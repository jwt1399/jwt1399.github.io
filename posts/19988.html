<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Q&amp;AÔºöJUC, ÁÆÄÁÆÄ,ÁÆÄÁÆÄÂçöÂÆ¢,ÁΩëÁªúÂÆâÂÖ®,ËÆ°ÁÆóÊú∫,JavaÂºÄÂèë">
    <meta name="description" content="‚ë†Á∫øÁ®ã‚ù∂Âü∫Á°ÄüåüÁ∫øÁ®ãÂíåËøõÁ®ãÁöÑÂå∫Âà´


Âå∫Âà´
Á∫øÁ®ã
ËøõÁ®ã



Ë∞ÉÂ∫¶
Á®ãÂ∫èÊâßË°åÁöÑÂü∫Êú¨Âçï‰Ωç
ËµÑÊ∫êÁÆ°ÁêÜÁöÑÂü∫Êú¨Âçï‰Ωç


ËµÑÊ∫ê
Áã¨Á´ãÁöÑÂÜÖÂ≠òÂíåËµÑÊ∫ê
ÂÖ±‰∫´Êú¨ËøõÁ®ãÁöÑÂú∞ÂùÄÁ©∫Èó¥ÂíåËµÑÊ∫ê


ÂÖ≥Á≥ª
Á∫øÁ®ãÂ±û‰∫éËøõÁ®ã
ËøõÁ®ãÂåÖÂê´Á∫øÁ®ã


ÂàáÊç¢
‰∏ä‰∏ãÊñáÂàáÊç¢Âø´
‰∏ä‰∏ãÊñáÂàáÊç¢ÊÖ¢
">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="Content-Type" content="text/html;charset=gb2312" />
    <meta name="sogou_site_verification" content="VTcD33rrfd" />
    <meta name="google-site-verification" content="mHsYpjV9Rl0e0UzjioJFLg8RMtOhxw8HB3D21dIWvmc" />
	<meta name="referrer" content="unsafe-url">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <script src="/assets/algolia/algoliasearchLite.min.js" async></script>
    <meta property="algolia:search" data-application-id="E9ZV23QUNX" data-api-key="091fe3a39a7bcb639aebaab3ed078165" data-index-name="hexo_search">
    <title>Q&amp;AÔºöJUC | ÁÆÄË®Ä‰πã</title>
    <link rel="icon" type="image/png" href="/favicon.png">
	<!--ÂèòÁÅ∞-->
	<!-- <link href="http://static.isenyu.cn/file/css/MemorialDay.css"; rel="stylesheet" type="text/css" /> -->
    <!-- <style type="text/css">
     html{ filter: grayscale(100%); /* Ê†áÂáÜÂÜôÊ≥ï just for IE6-9 */ 
        -webkit-filter: grayscale(100%); /* webkit ÂÜÖÊ†∏ÊîØÊåÅÁ®ãÂ∫¶ËæÉÂ•Ω */ 
        -moz-filter: grayscale(100%); /* ÂÖ∂‰ªñÂÜÖÊ†∏Áé∞Âú®Âπ∂‰∏çÊîØÊåÅÔºå‰∏∫‰∫ÜÂ∞ÜÊù•ÂÖºÂÆπÊÄß‰π¶ÂÜô */ 
        -ms-filter: grayscale(100%); 
        -o-filter: grayscale(100%); filter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);
        filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); /* Firefox 3.5+ */ }
     </style> -->
     
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3"/>
    <link rel="stylesheet" type="text/css" href="https://cdn.staticfile.org/font-awesome/6.0.0/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.staticfile.org/aos/0.1.0/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">
    <script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script>


    <script src="https://upcdn.b0.upaiyun.com/libs/jquery/jquery-2.0.3.min.js"></script>
	<!--valine_‰∫∫Êú∫È™åËØÅ-->
	<script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
	<script src="/js/Valine-RJyanzheng.js"></script>

    
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.0.0"><link rel="alternate" href="/atom.xml" title="ÁÆÄË®Ä‰πã" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper head-container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img no-lazy src="/medias/logo.png" class="logo-img" alt="">
                    
                    <span class="logo-span">ÁÆÄË®Ä‰πã</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>Home</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-user-secret" style="zoom: 0.6;"></i>
      
      <span>Sec</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/categories/Web/">
          
          <i class="fab fa-internet-explorer" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Web</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/CTF/">
          
          <i class="fas fa-flag" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>CTF</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/Data/">
          
          <i class="fa-solid fa-shield" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Data</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fab fa-java" style="zoom: 0.6;"></i>
      
      <span>Java</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/categories/JavaSE/">
          
          <i class="fa-solid fa-mug-saucer" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>JavaSE</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/JavaWeb/">
          
          <i class="fa-solid fa-earth-americas" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>JavaWeb</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/Spring/">
          
          <i class="fa-solid fa-leaf" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Spring</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/Q-A/">
          
          <i class="fa-solid fa-bell" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Q&A</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fa-solid fa-desktop" style="zoom: 0.6;"></i>
      
      <span>CS</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/categories/CS%E5%9F%BA%E7%A1%80/">
          
          <i class="fa-solid fa-server" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>CSÂü∫Á°Ä</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/SQL/">
          
          <i class="fas fa-database" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Êï∞ÊçÆÂ∫ì</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/">
          
          <i class="fa-solid fa-bezier-curve" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>ÁªìÊûÑ-ÁÆóÊ≥ï</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-layer-group" style="zoom: 0.6;"></i>
      
      <span>Others</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/categories/Python/">
          
          <i class="fab fa-python" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Python</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/Course/">
          
          <i class="fa-solid fa-graduation-cap" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Course</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/Share/">
          
          <i class="fa-solid fa-crown" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Share~</span>
        </a>
      </li>
      
      <li>
        <a href="/categories/Tools/">
          
          <i class="fas fa-tools" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>Tools~</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-list" style="zoom: 0.6;"></i>
      
      <span>Êï¥ÁêÜ</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/tags/">
          
          <i class="fas fa-bookmark" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>ÂΩíÁ±ª</span>
        </a>
      </li>
      
      <li>
        <a href="/archives/">
          
          <i class="fas fa-file-contract" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>ÂΩíÊ°£</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fa-solid fa-paper-plane" style="zoom: 0.6;"></i>
      
      <span>‰∫§ÊµÅ</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/friends/">
          
          <i class="fas fa-venus-mars" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>ÂèãÈìæ</span>
        </a>
      </li>
      
      <li>
        <a href="/contact/">
          
          <i class="fas fa-envelope" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>ÁïôË®Ä</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about/" class="waves-effect waves-light">
      
      <i class="fas fa-id-card-alt" style="zoom: 0.6;"></i>
      
      <span>ÂÖ≥‰∫é</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="ÊêúÁ¥¢" style="zoom: 0.85;"></i>
    </a>
    <!-- <div id="docsearch"></div> -->
  </li>
</ul>

<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img no-lazy src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">ÁÆÄË®Ä‰πã</div>
        <div class="logo-desc">
            
            ÊÇÑÊó†Â£∞ÊÅØÂú∞ÂèòÂùöÂº∫ÔºåÂÆâÈùôÂú∞Âèò‰ºòÁßÄÔºÅ
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			Home
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-user-secret"></i>
			
			Sec
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="/categories/Web/ " style="margin-left:50px";>
				  
				   <i class="fab fa-internet-explorer" style="position: absolute;left:28px" ></i>
			      
		          <span>Web</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/CTF/ " style="margin-left:50px";>
				  
				   <i class="fas fa-flag" style="position: absolute;left:28px" ></i>
			      
		          <span>CTF</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/Data/ " style="margin-left:50px";>
				  
				   <i class="fa-solid fa-shield" style="position: absolute;left:28px" ></i>
			      
		          <span>Data</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fab fa-java"></i>
			
			Java
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="/categories/JavaSE/ " style="margin-left:50px";>
				  
				   <i class="fa-solid fa-mug-saucer" style="position: absolute;left:28px" ></i>
			      
		          <span>JavaSE</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/JavaWeb/ " style="margin-left:50px";>
				  
				   <i class="fa-solid fa-earth-americas" style="position: absolute;left:28px" ></i>
			      
		          <span>JavaWeb</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/Spring/ " style="margin-left:50px";>
				  
				   <i class="fa-solid fa-leaf" style="position: absolute;left:28px" ></i>
			      
		          <span>Spring</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/Q-A/ " style="margin-left:50px";>
				  
				   <i class="fa-solid fa-bell" style="position: absolute;left:28px" ></i>
			      
		          <span>Q&A</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fa-solid fa-desktop"></i>
			
			CS
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="/categories/CS%E5%9F%BA%E7%A1%80/ " style="margin-left:50px";>
				  
				   <i class="fa-solid fa-server" style="position: absolute;left:28px" ></i>
			      
		          <span>CSÂü∫Á°Ä</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/SQL/ " style="margin-left:50px";>
				  
				   <i class="fas fa-database" style="position: absolute;left:28px" ></i>
			      
		          <span>Êï∞ÊçÆÂ∫ì</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/%E7%BB%93%E6%9E%84-%E7%AE%97%E6%B3%95/ " style="margin-left:50px";>
				  
				   <i class="fa-solid fa-bezier-curve" style="position: absolute;left:28px" ></i>
			      
		          <span>ÁªìÊûÑ-ÁÆóÊ≥ï</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-layer-group"></i>
			
			Others
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="/categories/Python/ " style="margin-left:50px";>
				  
				   <i class="fab fa-python" style="position: absolute;left:28px" ></i>
			      
		          <span>Python</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/Course/ " style="margin-left:50px";>
				  
				   <i class="fa-solid fa-graduation-cap" style="position: absolute;left:28px" ></i>
			      
		          <span>Course</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/Share/ " style="margin-left:50px";>
				  
				   <i class="fa-solid fa-crown" style="position: absolute;left:28px" ></i>
			      
		          <span>Share~</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/categories/Tools/ " style="margin-left:50px";>
				  
				   <i class="fas fa-tools" style="position: absolute;left:28px" ></i>
			      
		          <span>Tools~</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-list"></i>
			
			Êï¥ÁêÜ
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="/tags/ " style="margin-left:50px";>
				  
				   <i class="fas fa-bookmark" style="position: absolute;left:28px" ></i>
			      
		          <span>ÂΩíÁ±ª</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/archives/ " style="margin-left:50px";>
				  
				   <i class="fas fa-file-contract" style="position: absolute;left:28px" ></i>
			      
		          <span>ÂΩíÊ°£</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fa-solid fa-paper-plane"></i>
			
			‰∫§ÊµÅ
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>   
				
                  <a href="/friends/ " style="margin-left:50px";>
				  
				   <i class="fas fa-venus-mars" style="position: absolute;left:28px" ></i>
			      
		          <span>ÂèãÈìæ</span>
                  </a>
                </li>
              
                <li>   
				
                  <a href="/contact/ " style="margin-left:50px";>
				  
				   <i class="fas fa-envelope" style="position: absolute;left:28px" ></i>
			      
		          <span>ÁïôË®Ä</span>
                  </a>
                </li>
               
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-id-card-alt"></i>
			
			ÂÖ≥‰∫é
		</a>
          
        </li>
        
        
    </ul>
</div>

        </div>

        
    </nav>

</header>

    
<script src="/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = 'de3bbd0fd7945e42581643b18cdf28dd3ed61d9c3d541b7b016081564b65a3f3';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('ÁåúÁåúÂØÜÁ†ÅÊòØ‰ªÄ‰πàÂë¢„ÉæÔæâ‚âß‚àÄ‚â¶)o')).toString(CryptoJS.enc.Hex)) {
                alert('ÂìéÂë¶ÔºÅÂØÜÁ†ÅÂ•ΩÂÉè‰∏çÂØπÂìüÔºåÂ∞ÜËøîÂõû‰∏ªÈ°µÔºÅ');
                location.href = '/';	
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://img.jwt1399.top/img/202212062044543.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Q&amp;AÔºöJUC</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    /*.toc-widget {
        width: 345px;
        padding-left: 20px;
    }*/
    .toc-widget {
        width: 345px;
        padding-left: 20px;
        /* ÊØõÁéªÁíÉ */
        /*background-color: rgba(162,101,228, 0.08);*/
        /*backdrop-filter: saturate(180%) blur(20px);*/
        /*ÁõÆÂΩïÊ†∑Âºè‰øÆÊîπ*/
        background-color: rgb(255, 255, 255,0.7);
        border-radius: 10px;
        box-shadow: 0 10px 35px 2px rgba(0, 0, 0, .15), 0 5px 15px rgba(0, 0, 0, .07), 0 2px 5px -5px rgba(0, 0, 0, .1) !important;
    }
    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #toc-content .is-active-link::before {
        background-color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- ÊñáÁ´†ÂÜÖÂÆπËØ¶ÊÉÖ -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/JUC/">
                                <span class="chip bg-color">JUC</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Q-A/" class="post-category">
                                Q&A
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>ÂèëÂ∏ÉÊó•Êúü:&nbsp;&nbsp;
                    2019-12-27
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>Êõ¥Êñ∞Êó•Êúü:&nbsp;&nbsp;
                    2023-08-05
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>ÊñáÁ´†Â≠óÊï∞:&nbsp;&nbsp;
                    24.5k
                </div>
                

                
				
                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>ÈòÖËØªÊ¨°Êï∞:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
            
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="‚ë†Á∫øÁ®ã"><a href="#‚ë†Á∫øÁ®ã" class="headerlink" title="‚ë†Á∫øÁ®ã"></a>‚ë†Á∫øÁ®ã</h1><h2 id="‚ù∂Âü∫Á°Ä"><a href="#‚ù∂Âü∫Á°Ä" class="headerlink" title="‚ù∂Âü∫Á°Ä"></a>‚ù∂Âü∫Á°Ä</h2><h3 id="üåüÁ∫øÁ®ãÂíåËøõÁ®ãÁöÑÂå∫Âà´"><a href="#üåüÁ∫øÁ®ãÂíåËøõÁ®ãÁöÑÂå∫Âà´" class="headerlink" title="üåüÁ∫øÁ®ãÂíåËøõÁ®ãÁöÑÂå∫Âà´"></a>üåüÁ∫øÁ®ãÂíåËøõÁ®ãÁöÑÂå∫Âà´</h3><table>
<thead>
<tr>
<th align="left">Âå∫Âà´</th>
<th>Á∫øÁ®ã</th>
<th>ËøõÁ®ã</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Ë∞ÉÂ∫¶</td>
<td>Á®ãÂ∫èÊâßË°åÁöÑÂü∫Êú¨Âçï‰Ωç</td>
<td>ËµÑÊ∫êÁÆ°ÁêÜÁöÑÂü∫Êú¨Âçï‰Ωç</td>
</tr>
<tr>
<td align="left">ËµÑÊ∫ê</td>
<td>Áã¨Á´ãÁöÑÂÜÖÂ≠òÂíåËµÑÊ∫ê</td>
<td>ÂÖ±‰∫´Êú¨ËøõÁ®ãÁöÑÂú∞ÂùÄÁ©∫Èó¥ÂíåËµÑÊ∫ê</td>
</tr>
<tr>
<td align="left">ÂÖ≥Á≥ª</td>
<td>Á∫øÁ®ãÂ±û‰∫éËøõÁ®ã</td>
<td>ËøõÁ®ãÂåÖÂê´Á∫øÁ®ã</td>
</tr>
<tr>
<td align="left">ÂàáÊç¢</td>
<td>‰∏ä‰∏ãÊñáÂàáÊç¢Âø´</td>
<td>‰∏ä‰∏ãÊñáÂàáÊç¢ÊÖ¢</td>
</tr>
<tr>
<td align="left">ÂºÄÈîÄ</td>
<td>ÂàõÂª∫„ÄÅÈîÄÊØÅÂºÄÈîÄÂ∞è</td>
<td>ÂàõÂª∫„ÄÅÈîÄÊØÅÂºÄÈîÄÂ§ß</td>
</tr>
</tbody></table>
<h3 id="üåüÁ∫øÁ®ãÈó¥ÈÄö‰ø°ÊñπÂºè"><a href="#üåüÁ∫øÁ®ãÈó¥ÈÄö‰ø°ÊñπÂºè" class="headerlink" title="üåüÁ∫øÁ®ãÈó¥ÈÄö‰ø°ÊñπÂºè"></a>üåüÁ∫øÁ®ãÈó¥ÈÄö‰ø°ÊñπÂºè</h3><p>Âêå‰∏ÄËøõÁ®ãÁöÑÁ∫øÁ®ãÂÖ±‰∫´Âú∞ÂùÄÁ©∫Èó¥ÔºåÈÄö‰ø°ÈÄöËøáÂÖ±‰∫´ÂÜÖÂ≠òÔºå‰∏ÄËà¨Êù•ËØ¥Âè™ÈúÄË¶ÅÂÅöÂ•ΩÂêåÊ≠•&#x2F;‰∫íÊñ•Ôºå‰øùÊä§ÂÖ±‰∫´ÁöÑÂÖ®Â±ÄÂèòÈáè„ÄÇ</p>
<ul>
<li><p><strong>ÈîÅÊú∫Âà∂</strong>ÔºöÂåÖÊã¨‰∫íÊñ•ÈîÅÔºåËØªÂÜôÈîÅÔºåËá™ÊóãÈîÅÔºåÊù°‰ª∂ÂèòÈáè„ÄÇsynchronized ÂÖ≥ÈîÆËØçÂíåÂêÑÁßç Lock ÈÉΩÊòØËøôÁßçÊú∫Âà∂„ÄÇ</p>
<ul>
<li>‰∫íÊñ•ÈîÅÊèê‰æõÊéí‰ªñÊñπÂºèÈò≤Ê≠¢Êï∞ÊçÆÁªìÊûÑË¢´‰øÆÊîπÁöÑÊñπÊ≥ïÔºå</li>
<li>ËØªÂÜôÈîÅÂÖÅËÆ∏Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂ËØªÂÖ±‰∫´ÂèòÈáèÔºåÂØπÂÜôÊìç‰Ωú‰∫íÊñ•Ôºå</li>
<li>Ëá™ÊóãÈîÅÂæ™ÁéØÊ£ÄÊµãÊòØÂê¶ÈáäÊîæÈîÅÔºå</li>
<li>Êù°‰ª∂ÂèòÈáè‰ª•ÂéüÂ≠êÊñπÂºèÈòªÂ°ûËøõÁ®ãÔºåÁõ¥Âà∞Êù°‰ª∂‰∏∫ÁúüÔºå‰∏é‰∫íÊñ•ÈîÅ‰∏ÄËµ∑‰ΩøÁî®„ÄÇ</li>
</ul>
</li>
<li><p><strong>ÂÖ±‰∫´ÂÜÖÂ≠òÊú∫Âà∂</strong>ÔºöÂ§ö‰∏™ËøõÁ®ãÊàñËÄÖÁ∫øÁ®ãÂèØ‰ª•Áõ¥Êé•ËÆøÈóÆÂêå‰∏ÄÂùóÁâ©ÁêÜÂÜÖÂ≠òÂú∞ÂùÄÔºåÊù•‰º†ÈÄíÊï∞ÊçÆ„ÄÇvolatile</p>
</li>
<li><p><strong>‰ø°Âè∑Êú∫Âà∂</strong>ÔºöÈÄöËøáÊòéÁ°ÆÁöÑÂèëÈÄÅ‰ø°ÊÅØÊù•ÊòæÁ§∫ÁöÑËøõË°åÈÄö‰ø°„ÄÇWait&#x2F;Notify„ÄÅjoin</p>
</li>
<li><p><strong>‰ø°Âè∑ÈáèÊú∫Âà∂</strong>ÔºöÂÖÅËÆ∏Âêå‰∏ÄÊó∂ÂàªÂ§ö‰∏™Á∫øÁ®ãËÆøÈóÆÂêå‰∏ÄËµÑÊ∫ê„ÄÇSemaphore</p>
</li>
<li><p>Ê∂àÊÅØÈòüÂàóÊú∫Âà∂Ôºö‰∏çÂêåËøõÁ®ãÊàñËÄÖÁ∫øÁ®ã‰πãÈó¥ÂèØ‰ª•ÈÄöËøáÊ∂àÊÅØÈòüÂàóÊù•‰º†ÈÄíÊï∞ÊçÆ„ÄÇ</p>
</li>
<li><p>ÁÆ°ÈÅìÊú∫Âà∂ÔºöÂèØ‰ª•ÂÆûÁé∞ËøõÁ®ãÊàñËÄÖÁ∫øÁ®ã‰πãÈó¥ÁöÑÂçïÂêëÈÄö‰ø°„ÄÇ</p>
</li>
</ul>
<h3 id="üåüËØ¥ËØ¥ÂçèÁ®ãÂíåÁ∫øÁ®ãÂå∫Âà´"><a href="#üåüËØ¥ËØ¥ÂçèÁ®ãÂíåÁ∫øÁ®ãÂå∫Âà´" class="headerlink" title="üåüËØ¥ËØ¥ÂçèÁ®ãÂíåÁ∫øÁ®ãÂå∫Âà´"></a>üåüËØ¥ËØ¥ÂçèÁ®ãÂíåÁ∫øÁ®ãÂå∫Âà´</h3><p>ÂçèÁ®ãÊòØ‰∏ÄÁßçÊØîÁ∫øÁ®ãÊõ¥Âä†ËΩªÈáèÁ∫ßÁöÑÂ≠òÂú®„ÄÇÂçèÁ®ã‰∏çÊòØË¢´Êìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏ÊâÄÁÆ°ÁêÜÔºåËÄåÂÆåÂÖ®ÊòØÁî±Á®ãÂ∫èÊâÄÊéßÂà∂Ôºà‰πüÂ∞±ÊòØÂú®Áî®Êà∑ÊÄÅ‰∏≠ÊâßË°åÔºâ„ÄÇËøôÊ†∑Â∏¶Êù•ÁöÑÂ•ΩÂ§ÑÂ∞±ÊòØÊÄßËÉΩÂæóÂà∞‰∫ÜÂæàÂ§ßÁöÑÊèêÂçáÔºå‰∏ç‰ºöÂÉèÁ∫øÁ®ãÂàáÊç¢ÈÇ£Ê†∑Ê∂àËÄóËµÑÊ∫ê„ÄÇÂõ†Ê≠§ÂçèÁ®ãÁöÑÂºÄÈîÄËøúËøúÂ∞è‰∫éÁ∫øÁ®ãÁöÑÂºÄÈîÄ„ÄÇ</p>
<p>ÂçèÁ®ãÊã•ÊúâËá™Â∑±ÁöÑÂØÑÂ≠òÂô®‰∏ä‰∏ãÊñáÂíåÊ†à„ÄÇÂçèÁ®ãË∞ÉÂ∫¶ÂàáÊç¢Êó∂ÔºåÂ∞ÜÂØÑÂ≠òÂô®‰∏ä‰∏ãÊñáÂíåÊ†à‰øùÂ≠òÂà∞ÂÖ∂ÂÆÉÂú∞ÊñπÔºåÂú®ÂàáÂõûÊù•ÁöÑÊó∂ÂÄôÔºåÊÅ¢Â§çÂÖàÂâç‰øùÂ≠òÁöÑÂØÑÂ≠òÂô®‰∏ä‰∏ãÊñáÂíåÊ†àÔºåÁõ¥Êé•Êìç‰ΩúÊ†àÂàôÂü∫Êú¨Ê≤°ÊúâÂÜÖÊ†∏ÂàáÊç¢ÁöÑÂºÄÈîÄÔºåÂèØ‰ª•‰∏çÂä†ÈîÅÁöÑËÆøÈóÆÂÖ®Â±ÄÂèòÈáèÔºåÊâÄ‰ª•‰∏ä‰∏ãÊñáÁöÑÂàáÊç¢ÈùûÂ∏∏Âø´„ÄÇ</p>
<ul>
<li>‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•ÊúâÂ§ö‰∏™ÂçèÁ®ãÔºå‰∏Ä‰∏™ËøõÁ®ã‰πüÂèØ‰ª•ÂçïÁã¨Êã•ÊúâÂ§ö‰∏™ÂçèÁ®ãÔºõ</li>
<li>Á∫øÁ®ãËøõÁ®ãÈÉΩÊòØÂêåÊ≠•Êú∫Âà∂ÔºåËÄåÂçèÁ®ãÂàôÊòØÂºÇÊ≠•Êú∫Âà∂Ôºõ</li>
<li>ÂçèÁ®ãËÉΩ‰øùÁïô‰∏ä‰∏ÄÊ¨°Ë∞ÉÁî®ÁöÑÁä∂ÊÄÅÔºåÊØèÊ¨°ÈáçÂÖ•Êó∂ÔºåÂ∞±Áõ∏ÂΩì‰∫éËøõÂÖ•‰∏ä‰∏ÄÊ¨°Ë∞ÉÁî®ÁöÑÁä∂ÊÄÅÔºõ</li>
</ul>
<h3 id="üåüÂêåÊ≠•ÂíåÂºÇÊ≠•ÁöÑÂå∫Âà´"><a href="#üåüÂêåÊ≠•ÂíåÂºÇÊ≠•ÁöÑÂå∫Âà´" class="headerlink" title="üåüÂêåÊ≠•ÂíåÂºÇÊ≠•ÁöÑÂå∫Âà´"></a>üåüÂêåÊ≠•ÂíåÂºÇÊ≠•ÁöÑÂå∫Âà´</h3><ul>
<li><strong>ÂêåÊ≠•</strong> ÔºöÂèëÂá∫‰∏Ä‰∏™Ë∞ÉÁî®‰πãÂêéÔºåÂú®Ê≤°ÊúâÂæóÂà∞ÁªìÊûú‰πãÂâçÔºå ËØ•Ë∞ÉÁî®Â∞±‰∏çÂèØ‰ª•ËøîÂõûÔºå‰∏ÄÁõ¥Á≠âÂæÖ„ÄÇ</li>
<li><strong>ÂºÇÊ≠•</strong> ÔºöË∞ÉÁî®Âú®ÂèëÂá∫‰πãÂêéÔºå‰∏çÁî®Á≠âÂæÖËøîÂõûÁªìÊûúÔºåËØ•Ë∞ÉÁî®Áõ¥Êé•ËøîÂõû„ÄÇ</li>
</ul>
<h3 id="üåüÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÁöÑÂå∫Âà´"><a href="#üåüÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÁöÑÂå∫Âà´" class="headerlink" title="üåüÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÁöÑÂå∫Âà´"></a>üåüÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÁöÑÂå∫Âà´</h3><p>Áî®Êà∑Á∫øÁ®ãÔºöÂπ≥Êó∂‰ΩøÁî®Âà∞ÁöÑÁ∫øÁ®ãÂùá‰∏∫Áî®Êà∑Á∫øÁ®ã„ÄÇ </p>
<p>ÂÆàÊä§Á∫øÁ®ãÔºöÁî®Êù•ÊúçÂä°Áî®Êà∑Á∫øÁ®ãÁöÑÁ∫øÁ®ãÔºå‰æãÂ¶ÇÂûÉÂúæÂõûÊî∂Á∫øÁ®ã„ÄÇ</p>
<p>ÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÁöÑÂå∫Âà´‰∏ªË¶ÅÂú®‰∫éJavaËôöÊãüÊú∫ÊòØÂê¶Â≠òÊ¥ª„ÄÇ</p>
<ul>
<li>Áî®Êà∑Á∫øÁ®ãÔºöÂΩì‰ªª‰Ωï‰∏Ä‰∏™Áî®Êà∑Á∫øÁ®ãÊú™ÁªìÊùüÔºåJavaËôöÊãüÊú∫Âàô‰∏ç‰ºöÁªìÊùü„ÄÇ </li>
<li>ÂÆàÊä§Á∫øÁ®ãÔºöÂ¶ÇÊûúÂè™Ââ©ÂÆàÊä§Á∫øÁ®ãÊú™ÁªìÊùüÔºåJavaËôöÊãüÊú∫ÁªìÊùü„ÄÇ</li>
</ul>
<p>‰ªª‰ΩïÁ∫øÁ®ãÈÉΩÂèØ‰ª•ËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ãÂíåÁî®Êà∑Á∫øÁ®ãÔºåÈÄöËøáÊñπÊ≥ï<code>Thread.setDaemon(true/false)</code> ËÆæÁΩÆ</p>
<ul>
<li>trueÂàôÊòØÂ∞ÜËØ•Á∫øÁ®ãËÆæÁΩÆ‰∏∫ÂÆàÊä§Á∫øÁ®ãÔºåfalseÂàôÊòØÂ∞ÜËØ•Á∫øÁ®ãËÆæÁΩÆ‰∏∫Áî®Êà∑Á∫øÁ®ã„ÄÇ</li>
<li>ÂøÖÈ°ªÂú® <code>Thread.start()</code> ‰πãÂâçË∞ÉÁî®ÔºåÂê¶ÂàôËøêË°åÊó∂‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇ</li>
</ul>
<h3 id="üåü‰∏∫‰ªÄ‰πà‰ΩøÁî®Â§öÁ∫øÁ®ã"><a href="#üåü‰∏∫‰ªÄ‰πà‰ΩøÁî®Â§öÁ∫øÁ®ã" class="headerlink" title="üåü‰∏∫‰ªÄ‰πà‰ΩøÁî®Â§öÁ∫øÁ®ã"></a>üåü‰∏∫‰ªÄ‰πà‰ΩøÁî®Â§öÁ∫øÁ®ã</h3><ul>
<li><p>‰∏∫‰∫ÜËÉΩÊèêÈ´òÁ®ãÂ∫èÁöÑÊâßË°åÊïàÁéáÂíåËøêË°åÈÄüÂ∫¶</p>
</li>
<li><p>Â§ö‰∏™Á∫øÁ®ãÂèØ‰ª•ÂêåÊó∂ËøêË°åÔºåËøôÂáèÂ∞ë‰∫ÜÁ∫øÁ®ã‰∏ä‰∏ãÊñáÂàáÊç¢ÁöÑÂºÄÈîÄ</p>
</li>
<li><p>Â§öÁ∫øÁ®ãÊú∫Âà∂ÂèØ‰ª•Â§ßÂ§ßÊèêÈ´òÁ≥ªÁªüÊï¥‰ΩìÁöÑÂπ∂ÂèëËÉΩÂäõ‰ª•ÂèäÊÄßËÉΩ</p>
</li>
<li><p>Â§öÁ∫øÁ®ãÂèØËÉΩ‰ºöÈÅáÂà∞ÔºöÂÜÖÂ≠òÊ≥ÑÊºè„ÄÅÊ≠ªÈîÅ„ÄÅÁ∫øÁ®ã‰∏çÂÆâÂÖ®Á≠âÁ≠â„ÄÇ</p>
</li>
</ul>
<h3 id="üåüÁ∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢"><a href="#üåüÁ∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢" class="headerlink" title="üåüÁ∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢"></a>üåüÁ∫øÁ®ãÁöÑ‰∏ä‰∏ãÊñáÂàáÊç¢</h3><p>CPU‰ºöÈÄöËøáÊó∂Èó¥ÁâáÂàÜÈÖçÁÆóÊ≥ïÊù•Âæ™ÁéØÊâßË°å‰ªªÂä°ÔºåÂΩìÂâç‰ªªÂä°ÊâßË°åÂÆå‰∏Ä‰∏™Êó∂Èó¥ÁâáÂêé‰ºöÂàáÊç¢Âà∞‰∏ã‰∏Ä‰∏™‰ªªÂä°Ôºå‰ΩÜÂàáÊç¢Ââç‰ºö‰øùÂ≠ò‰∏ä‰∏Ä‰∏™‰ªªÂä°ÁöÑÁä∂ÊÄÅÔºåÂõ†‰∏∫‰∏ãÊ¨°ÂàáÊç¢ÂõûËøô‰∏™‰ªªÂä°Êó∂ËøòË¶ÅÂä†ËΩΩËøô‰∏™‰ªªÂä°ÁöÑÁä∂ÊÄÅÁªßÁª≠ÊâßË°åÔºå‰ªé‰ªªÂä°‰øùÂ≠òÂà∞ÂÜçÂä†ËΩΩÁöÑËøáÁ®ãÂ∞±ÊòØ‰∏ÄÊ¨°‰∏ä‰∏ãÊñáÂàáÊç¢„ÄÇ</p>
<h3 id="üåüÁ∫øÁ®ãÁä∂ÊÄÅÂèäËΩ¨Êç¢"><a href="#üåüÁ∫øÁ®ãÁä∂ÊÄÅÂèäËΩ¨Êç¢" class="headerlink" title="üåüÁ∫øÁ®ãÁä∂ÊÄÅÂèäËΩ¨Êç¢"></a>üåüÁ∫øÁ®ãÁä∂ÊÄÅÂèäËΩ¨Êç¢</h3><blockquote>
<p>Á∫øÁ®ãÁöÑÁîüÂëΩÂë®ÊúüÂíåÁä∂ÊÄÅ</p>
</blockquote>
<p>Âú® Java API ‰∏≠ <code>java.lang.Thread.State</code> Ëøô‰∏™Êûö‰∏æ‰∏≠ÁªôÂá∫‰∫ÜÂÖ≠ÁßçÁ∫øÁ®ãÁä∂ÊÄÅÔºö</p>
<table>
<thead>
<tr>
<th>Á∫øÁ®ãÁä∂ÊÄÅ</th>
<th>ÂØºËá¥Áä∂ÊÄÅÂèëÁîüÊù°‰ª∂</th>
</tr>
</thead>
<tbody><tr>
<td>NEW</td>
<td>ÂàùÂßãÁä∂ÊÄÅÔºåÁ∫øÁ®ãÂàöË¢´ÂàõÂª∫Ôºå‰ΩÜÂπ∂Êú™ÂêØÂä®ÔºåËøòÊ≤°Ë∞ÉÁî® start ÊñπÊ≥ï</td>
</tr>
<tr>
<td>RUNNABLE</td>
<td>ËøêË°åÁä∂ÊÄÅÔºåÂåÖÂê´Â∞±Áª™ÂíåËøêË°å‰∏≠‰∏§ÁßçÁä∂ÊÄÅÔºåË∞ÉÁî®‰∫Ü start ÊñπÊ≥ï</td>
</tr>
<tr>
<td>BLOCKED</td>
<td>ÈòªÂ°ûÁä∂ÊÄÅÔºåÈúÄË¶ÅÁ≠âÂæÖÈîÅÈáäÊîæ</td>
</tr>
<tr>
<td>WAITING</td>
<td>Á≠âÂæÖÁä∂ÊÄÅ</td>
</tr>
<tr>
<td>TIME_WAITING</td>
<td>Ë∂ÖÊó∂Á≠âÂæÖÁä∂ÊÄÅÔºåÂíåÁ≠âÂæÖÁä∂ÊÄÅ‰∏çÂêåÁöÑÊòØÔºåÂÆÉÂèØ‰ª•Âú®Âà∂ÂÆöÁöÑÊó∂Èó¥Ëá™Ë°åËøîÂõû</td>
</tr>
<tr>
<td>TERMINATED</td>
<td>ÁªàÊ≠¢Áä∂ÊÄÅÔºåÁ∫øÁ®ãËøêË°åÁªìÊùü</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><img src="https://img.jwt1399.top/img/202212281951644.png"></th>
<th><img src="https://img.jwt1399.top/img/202212281939521.png" alt="Á∫øÁ®ãÁä∂ÊÄÅËΩ¨ÁßªÂõæ"></th>
</tr>
</thead>
</table>
<h3 id="üåüÁ∫øÁ®ãÊ≠ªÈîÅÊòØÂ¶Ç‰Ωï‰∫ßÁîüÁöÑÔºåÂ¶Ç‰ΩïÈÅøÂÖç"><a href="#üåüÁ∫øÁ®ãÊ≠ªÈîÅÊòØÂ¶Ç‰Ωï‰∫ßÁîüÁöÑÔºåÂ¶Ç‰ΩïÈÅøÂÖç" class="headerlink" title="üåüÁ∫øÁ®ãÊ≠ªÈîÅÊòØÂ¶Ç‰Ωï‰∫ßÁîüÁöÑÔºåÂ¶Ç‰ΩïÈÅøÂÖç"></a>üåüÁ∫øÁ®ãÊ≠ªÈîÅÊòØÂ¶Ç‰Ωï‰∫ßÁîüÁöÑÔºåÂ¶Ç‰ΩïÈÅøÂÖç</h3><p>Ê≠ªÈîÅÔºöÁî±‰∫é‰∏§‰∏™Êàñ‰∏§‰∏™‰ª•‰∏äÁöÑÁ∫øÁ®ãÁõ∏‰∫íÁ´û‰∫âÂØπÊñπÁöÑËµÑÊ∫êÔºåËÄåÂêåÊó∂‰∏çÈáäÊîæËá™Â∑±ÁöÑËµÑÊ∫êÔºåÂØºËá¥ÊâÄÊúâÁ∫øÁ®ãÂêåÊó∂Ë¢´ÈòªÂ°û„ÄÇ</p>
<p>Ê≠ªÈîÅ‰∫ßÁîüÁöÑÊù°‰ª∂Ôºö</p>
<ul>
<li>‰∫íÊñ•Êù°‰ª∂Ôºö‰∏Ä‰∏™ËµÑÊ∫êÂú®Âêå‰∏ÄÊó∂ÂàªÂè™Áî±‰∏Ä‰∏™Á∫øÁ®ãÂç†Áî®„ÄÇ</li>
<li>ËØ∑Ê±Ç‰∏é‰øùÊåÅÊù°‰ª∂Ôºö‰∏Ä‰∏™Á∫øÁ®ãÂú®ËØ∑Ê±ÇË¢´Âç†ËµÑÊ∫êÊó∂ÂèëÁîüÈòªÂ°ûÔºåÂπ∂ÂØπÂ∑≤Ëé∑ÂæóÁöÑËµÑÊ∫ê‰øùÊåÅ‰∏çÊîæ„ÄÇ</li>
<li>Âæ™ÁéØÁ≠âÂæÖÊù°‰ª∂ÔºöÂèëÁîüÊ≠ªÈîÅÊó∂ÔºåÊâÄÊúâÁöÑÁ∫øÁ®ã‰ºöÂΩ¢Êàê‰∏Ä‰∏™Ê≠ªÂæ™ÁéØÔºå‰∏ÄÁõ¥ÈòªÂ°û„ÄÇ</li>
<li>‰∏çÂâ•Â§∫Êù°‰ª∂ÔºöÁ∫øÁ®ãÂ∑≤Ëé∑ÂæóÁöÑËµÑÊ∫êÂú®Êú™‰ΩøÁî®ÂÆå‰∏çËÉΩË¢´ÂÖ∂‰ªñÁ∫øÁ®ãÂâ•Â§∫ÔºåÂè™ËÉΩÁî±Ëá™Â∑±‰ΩøÁî®ÂÆåÈáäÊîæËµÑÊ∫ê„ÄÇ</li>
</ul>
<p>ÈÅøÂÖçÊ≠ªÈîÅÁöÑÊñπÊ≥ï‰∏ªË¶ÅÊòØÁ†¥ÂùèÊ≠ªÈîÅ‰∫ßÁîüÁöÑÊù°‰ª∂„ÄÇ</p>
<ul>
<li>Á†¥Âùè‰∫íÊñ•Êù°‰ª∂ÔºöËøô‰∏™Êù°‰ª∂Êó†Ê≥ïËøõË°åÁ†¥ÂùèÔºåÈîÅÁöÑ‰ΩúÁî®Â∞±ÊòØ‰Ωø‰ªñ‰ª¨‰∫íÊñ•„ÄÇ</li>
<li>Á†¥ÂùèËØ∑Ê±Ç‰∏é‰øùÊåÅÊù°‰ª∂Ôºö‰∏ÄÊ¨°ÊÄßÁî≥ËØ∑ÊâÄÊúâÁöÑËµÑÊ∫ê„ÄÇ</li>
<li>Á†¥ÂùèÂæ™ÁéØÁ≠âÂæÖÊù°‰ª∂ÔºöÊåâÈ°∫Â∫èÊù•Áî≥ËØ∑ËµÑÊ∫ê„ÄÇ</li>
<li>Á†¥Âùè‰∏çÂâ•Â§∫Êù°‰ª∂ÔºöÁ∫øÁ®ãÂú®Áî≥ËØ∑‰∏çÂà∞ÊâÄÈúÄËµÑÊ∫êÊó∂Ôºå‰∏ªÂä®ÊîæÂºÉÊâÄÊåÅÊúâÁöÑËµÑÊ∫ê„ÄÇ</li>
</ul>
<h3 id="üåüÊ≠ªÈîÅ„ÄÅÊ¥ªÈîÅ„ÄÅÈ••È•øÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#üåüÊ≠ªÈîÅ„ÄÅÊ¥ªÈîÅ„ÄÅÈ••È•øÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="üåüÊ≠ªÈîÅ„ÄÅÊ¥ªÈîÅ„ÄÅÈ••È•øÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>üåüÊ≠ªÈîÅ„ÄÅÊ¥ªÈîÅ„ÄÅÈ••È•øÊúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h3><p>Ê¥ªÈîÅÔºö‰ªªÂä°ÊàñËÄÖÊâßË°åËÄÖÊ≤°ÊúâË¢´ÈòªÂ°ûÔºåÁî±‰∫éÊüê‰∫õÊù°‰ª∂Ê≤°ÊúâË¢´Êª°Ë∂≥ÔºåÂØºËá¥Á∫øÁ®ã‰∏ÄÁõ¥ÈáçÂ§çÂ∞ùËØï„ÄÅÂ§±Ë¥•„ÄÇ</p>
<p>Ê≠ªÈîÅÔºöÁî±‰∫é‰∏§‰∏™Êàñ‰∏§‰∏™‰ª•‰∏äÁöÑÁ∫øÁ®ãÁõ∏‰∫íÁ´û‰∫âÂØπÊñπÁöÑËµÑÊ∫êÔºåËÄåÂêåÊó∂‰∏çÈáäÊîæËá™Â∑±ÁöÑËµÑÊ∫êÔºåÂØºËá¥ÊâÄÊúâÁ∫øÁ®ãÂêåÊó∂Ë¢´ÈòªÂ°û„ÄÇ</p>
<p>È••È•øÔºö‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Á∫øÁ®ãÂõ†‰∏∫ÁßçÁßçÂéüÂõ†Êó†Ê≥ïËé∑ÂæóÊâÄÈúÄË¶ÅÁöÑËµÑÊ∫êÔºå ÂØºËá¥‰∏ÄÁõ¥Êó†Ê≥ïÊâßË°åÁöÑÁä∂ÊÄÅ„ÄÇ</p>
<p>Ê¥ªÈîÅÂíåÊ≠ªÈîÅÁöÑÂå∫Âà´Ôºö</p>
<ul>
<li>Ê¥ªÈîÅÊòØÂú®‰∏çÊñ≠Âú∞Â∞ùËØï„ÄÅÊ≠ªÈîÅÊòØÂú®‰∏ÄÁõ¥Á≠âÂæÖ„ÄÇ</li>
<li>Ê¥ªÈîÅÊúâÂèØËÉΩËá™Ë°åËß£ÂºÄ„ÄÅÊ≠ªÈîÅÊó†Ê≥ïËá™Ë°åËß£ÂºÄ„ÄÇ</li>
</ul>
<p>Ê≠ªÈîÅÂíåÈ••È•øÁöÑÂå∫Âà´ÔºöÈ••È•øÂèØËá™Ë°åËß£ÂºÄÔºåÊ≠ªÈîÅ‰∏çË°å„ÄÇ</p>
<h2 id="‚ù∑‰ΩøÁî®"><a href="#‚ù∑‰ΩøÁî®" class="headerlink" title="‚ù∑‰ΩøÁî®"></a>‚ù∑‰ΩøÁî®</h2><h3 id="üåüÂàõÂª∫Á∫øÁ®ãÁöÑÂá†ÁßçÊñπÂºè"><a href="#üåüÂàõÂª∫Á∫øÁ®ãÁöÑÂá†ÁßçÊñπÂºè" class="headerlink" title="üåüÂàõÂª∫Á∫øÁ®ãÁöÑÂá†ÁßçÊñπÂºè"></a>üåüÂàõÂª∫Á∫øÁ®ãÁöÑÂá†ÁßçÊñπÂºè</h3><blockquote>
<p>JavaÂÆûÁé∞Â§öÁ∫øÁ®ãÁöÑÊñπÂºè</p>
</blockquote>
<ol>
<li>ÁªßÊâø Thread Á±ªÂàõÂª∫Á∫øÁ®ãÔºõ</li>
<li>ÂÆûÁé∞ Runnable Êé•Âè£ÂàõÂª∫Á∫øÁ®ãÔºõ</li>
<li>ÈÄöËøá Callable Âíå Future ÂàõÂª∫Á∫øÁ®ãÔºõ</li>
<li>ÈÄöËøáÁ∫øÁ®ãÊ±†ÂàõÂª∫Á∫øÁ®ã„ÄÇ</li>
</ol>
<h3 id="üåürunnable-Âíå-callable-Êúâ‰ªÄ‰πàÂå∫Âà´"><a href="#üåürunnable-Âíå-callable-Êúâ‰ªÄ‰πàÂå∫Âà´" class="headerlink" title="üåürunnable Âíå callable Êúâ‰ªÄ‰πàÂå∫Âà´"></a>üåürunnable Âíå callable Êúâ‰ªÄ‰πàÂå∫Âà´</h3><ol>
<li>Runnable Êé•Âè£‰∏≠ÁöÑ run() ÊñπÊ≥ïÁöÑËøîÂõûÂÄºÊòØ voidÔºåÂÆÉÂÅöÁöÑ‰∫ãÊÉÖÂè™ÊòØÁ∫ØÁ≤πÂú∞ÂéªÊâßË°å run() ÊñπÊ≥ï‰∏≠ÁöÑ‰ª£Á†ÅËÄåÂ∑≤Ôºõ</li>
<li>Callable Êé•Âè£‰∏≠ÁöÑ call() ÊñπÊ≥ïÊòØÊúâËøîÂõûÂÄºÁöÑÔºåÊòØ‰∏Ä‰∏™Ê≥õÂûãÔºåÂíå Future„ÄÅFutureTask ÈÖçÂêàÂèØ‰ª•Áî®Êù•Ëé∑ÂèñÂºÇÊ≠•ÊâßË°åÁöÑÁªìÊûú„ÄÇ</li>
</ol>
<h3 id="üåürun-Âíå-start-Êúâ‰ªÄ‰πàÂå∫Âà´"><a href="#üåürun-Âíå-start-Êúâ‰ªÄ‰πàÂå∫Âà´" class="headerlink" title="üåürun() Âíå start() Êúâ‰ªÄ‰πàÂå∫Âà´"></a>üåürun() Âíå start() Êúâ‰ªÄ‰πàÂå∫Âà´</h3><ul>
<li>Á∫øÁ®ãÊòØÈÄöËøá<code>Thread</code>ÂØπË±°ÊâÄÂØπÂ∫îÁöÑÊñπÊ≥ï<code>run()</code>Êù•ÂÆåÊàêÂÖ∂Êìç‰ΩúÁöÑÔºåËÄåÁ∫øÁ®ãÁöÑÂêØÂä®ÊòØÈÄöËøá<code>start()</code>ÊñπÊ≥ïÊâßË°åÁöÑ„ÄÇ</li>
<li><code>run()</code>ÊñπÊ≥ïÂèØ‰ª•ÈáçÂ§çË∞ÉÁî®Ôºå<code>start()</code>ÊñπÊ≥ïÂè™ËÉΩË∞ÉÁî®‰∏ÄÊ¨°</li>
</ul>
<h3 id="üåüÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî®-Thread-Á±ªÁöÑ-run-ÊñπÊ≥ïÂêó"><a href="#üåüÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî®-Thread-Á±ªÁöÑ-run-ÊñπÊ≥ïÂêó" class="headerlink" title="üåüÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî® Thread Á±ªÁöÑ run ÊñπÊ≥ïÂêó"></a>üåüÂèØ‰ª•Áõ¥Êé•Ë∞ÉÁî® Thread Á±ªÁöÑ run ÊñπÊ≥ïÂêó</h3><blockquote>
<p>‰∏∫‰ªÄ‰πàË∞ÉÁî®start()ÊñπÊ≥ïÊó∂‰ºöÊâßË°årun()ÊñπÊ≥ïÔºåËÄå‰∏çÁõ¥Êé•ÊâßË°årun()ÊñπÊ≥ïÔºü</p>
</blockquote>
<p>ÁªìËÆ∫Ôºö‰∏çËÉΩÔºåË∞ÉÁî® <code>start()</code> ÊñπÊ≥ïÂèØÂêØÂä®Á∫øÁ®ãÂπ∂‰ΩøÁ∫øÁ®ãËøõÂÖ•Â∞±Áª™Áä∂ÊÄÅÔºåÁõ¥Êé•ÊâßË°å <code>run()</code> ÊñπÊ≥ïÁöÑËØù‰∏ç‰ºö‰ª•Â§öÁ∫øÁ®ãÁöÑÊñπÂºèÊâßË°åÔºåËÄåÂú®‰∏ªÁ∫øÁ®ã‰∏≠ÊâßË°åÁöÑ„ÄÇ</p>
<p>Ë∞ÉÁî® <code>start()</code>ÊñπÊ≥ïÔºå‰ºöÂêØÂä®‰∏Ä‰∏™Á∫øÁ®ãÔºåËøôÊó∂Á∫øÁ®ãÂ§Ñ‰∫éÂ∞±Áª™Áä∂ÊÄÅÔºåÂΩìÂàÜÈÖçÂà∞CPUÊó∂Èó¥ÁâáÂêéÔºåÂ∞±ÂºÄÂßãÊâßË°å<code>run()</code>ÊñπÊ≥ïÔºåÂÆÉÂåÖÂê´‰∫ÜË¶ÅÊâßË°åÁöÑËøô‰∏™Á∫øÁ®ãÁöÑÂÜÖÂÆπÔºåËøôÊòØÁúüÊ≠£ÁöÑÂ§öÁ∫øÁ®ãÂ∑•‰Ωú„ÄÇ </p>
<p>Áõ¥Êé•ÊâßË°å <code>run()</code> ÊñπÊ≥ïÔºå‰ºöÊää <code>run()</code> ÊñπÊ≥ïÂΩìÊàê‰∏Ä‰∏™ main Á∫øÁ®ã‰∏ãÁöÑÊôÆÈÄöÊñπÊ≥ïÂéªÊâßË°åÔºåÂπ∂‰∏ç‰ºöÂú®Êüê‰∏™Á∫øÁ®ã‰∏≠ÊâßË°åÂÆÉÔºåËøôÊ†∑Â∞±Ê≤°ÊúâËææÂà∞Â§öÁ∫øÁ®ãÁöÑÁõÆÁöÑ„ÄÇ</p>
<h3 id="üåüsleep-Âíå-wait-ÁöÑÂå∫Âà´"><a href="#üåüsleep-Âíå-wait-ÁöÑÂå∫Âà´" class="headerlink" title="üåüsleep() Âíå wait() ÁöÑÂå∫Âà´"></a>üåüsleep() Âíå wait() ÁöÑÂå∫Âà´</h3><blockquote>
<p>Thread.sleep()ÂíåObject.wait()ÁöÑÂå∫Âà´</p>
</blockquote>
<p><strong>ÂÖ±ÂêåÁÇπ</strong> Ôºö‰∏§ËÄÖÈÉΩÂèØ‰ª•ÊöÇÂÅúÁ∫øÁ®ãÁöÑÊâßË°å„ÄÇ</p>
<p><strong>Âå∫Âà´</strong> Ôºö</p>
<ul>
<li><code>sleep()</code> ÊòØ <code>Thread</code> Á±ªÁöÑÈùôÊÄÅÊú¨Âú∞ÊñπÊ≥ïÔºå<code>wait()</code> ÂàôÊòØ <code>Object</code> Á±ªÁöÑÊú¨Âú∞ÊñπÊ≥ï„ÄÇ</li>
<li><code>wait()</code> ÈÄöÂ∏∏Ë¢´Áî®‰∫éÁ∫øÁ®ãÈó¥‰∫§‰∫í&#x2F;ÈÄö‰ø°Ôºå<code>sleep()</code>ÈÄöÂ∏∏Ë¢´Áî®‰∫éÊöÇÂÅúÊâßË°å„ÄÇ</li>
<li><code>sleep()</code> ‰∏ç‰ºöÈáäÊîæÂç†ÊúâÁöÑÈîÅÔºåËÄå <code>wait()</code> ‰ºöÈáäÊîæÂç†ÊúâÁöÑÈîÅ „ÄÇ</li>
<li><code>wait()</code> ÊñπÊ≥ïË¢´Ë∞ÉÁî®ÂêéÔºåÁ∫øÁ®ã‰∏ç‰ºöËá™Âä®ËãèÈÜíÔºåÈúÄË¶ÅÂà´ÁöÑÁ∫øÁ®ãË∞ÉÁî®Âêå‰∏Ä‰∏™ÂØπË±°‰∏äÁöÑ <code>notify()</code>ÊàñËÄÖ <code>notifyAll()</code> ÊñπÊ≥ïÔºåÊàñËÄÖ‰ΩøÁî® <code>wait(long timeout)</code> Ë∂ÖÊó∂ÂêéÁ∫øÁ®ã‰ºöËá™Âä®ËãèÈÜí„ÄÇ<code>sleep()</code>ÊñπÊ≥ïÊâßË°åÂÆåÊàêÂêéÔºåÁ∫øÁ®ã‰ºöËá™Âä®ËãèÈÜí„ÄÇ</li>
</ul>
<h3 id="üåü‰∏∫‰ªÄ‰πàwait-Ôºånotify-ÂøÖÈ°ªÂú®ÂêåÊ≠•ÊñπÊ≥ïÊàñËÄÖÂêåÊ≠•Âùó‰∏≠Ë¢´Ë∞ÉÁî®"><a href="#üåü‰∏∫‰ªÄ‰πàwait-Ôºånotify-ÂøÖÈ°ªÂú®ÂêåÊ≠•ÊñπÊ≥ïÊàñËÄÖÂêåÊ≠•Âùó‰∏≠Ë¢´Ë∞ÉÁî®" class="headerlink" title="üåü‰∏∫‰ªÄ‰πàwait()Ôºånotify()ÂøÖÈ°ªÂú®ÂêåÊ≠•ÊñπÊ≥ïÊàñËÄÖÂêåÊ≠•Âùó‰∏≠Ë¢´Ë∞ÉÁî®"></a>üåü‰∏∫‰ªÄ‰πàwait()Ôºånotify()ÂøÖÈ°ªÂú®ÂêåÊ≠•ÊñπÊ≥ïÊàñËÄÖÂêåÊ≠•Âùó‰∏≠Ë¢´Ë∞ÉÁî®</h3><blockquote>
<p>‰∏∫‰ªÄ‰πàwait()„ÄÅnotify()„ÄÅnotifyAll()Ë¢´ÂÆö‰πâÂú®ObjectÁ±ª‰∏≠ËÄå‰∏çÊòØÂú®ThreadÁ±ª‰∏≠</p>
</blockquote>
<p>Âõ†‰∏∫wait()ÊöÇÂÅúÁöÑÊòØÊåÅÊúâÈîÅÁöÑ<strong>ÂØπË±°</strong>Ôºånotify()ÊàñnotifyAll()Âî§ÈÜíÁöÑÊòØÁ≠âÂæÖÈîÅÁöÑ<strong>ÂØπË±°</strong>„ÄÇ</p>
<p>ÊâÄ‰ª•wait()„ÄÅnotify()„ÄÅnotifyAll()ÈÉΩÈúÄË¶ÅÁ∫øÁ®ãÊåÅÊúâÈîÅÁöÑÂØπË±°ÔºåËøõËÄåÈúÄË¶ÅÂú®ÂêåÊ≠•ÊñπÊ≥ïÊàñËÄÖÂêåÊ≠•Âùó‰∏≠Ë¢´Ë∞ÉÁî®„ÄÇÂèØ‰ª•Ë¢´‰ªªÊÑèÂØπË±°Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÊòØÂÆö‰πâÂú®ObjectÁ±ª‰∏≠„ÄÇ</p>
<h3 id="üåüÂ¶Ç‰ΩïÂÆûÁé∞‰∏§‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°ÂíåÂçè‰Ωú"><a href="#üåüÂ¶Ç‰ΩïÂÆûÁé∞‰∏§‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°ÂíåÂçè‰Ωú" class="headerlink" title="üåüÂ¶Ç‰ΩïÂÆûÁé∞‰∏§‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°ÂíåÂçè‰Ωú"></a>üåüÂ¶Ç‰ΩïÂÆûÁé∞‰∏§‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÈÄö‰ø°ÂíåÂçè‰Ωú</h3><ul>
<li><code>syncrhoized</code>Âä†ÈîÅÁöÑÁ∫øÁ®ãÁöÑ<code>Object</code>Á±ªÁöÑ<code>wait()</code>&#x2F;<code>notify()</code>&#x2F;<code>notifyAll()</code></li>
<li>‰ΩøÁî® <code>volatile</code> ÂÖ≥ÈîÆÂ≠ó„ÄÇÂÖ∂Â∫ïÂ±Ç‰ΩøÁî®‰∫ÜÂÖ±‰∫´ÂÜÖÂ≠ò„ÄÇÁÆÄÂçïÊù•ËØ¥ÔºåÂ∞±ÊòØÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÁõëÂê¨‰∏Ä‰∏™ÂèòÈáèÔºåÂΩìËøô‰∏™ÂèòÈáèÂèëÁîüÂèòÂåñÁöÑÊó∂ÂÄô ÔºåÁ∫øÁ®ãËÉΩÂ§üÊÑüÁü•Âπ∂ÊâßË°åÁõ∏Â∫îÁöÑ‰∏öÂä°„ÄÇ</li>
<li><code>ReentrantLock</code>Á±ªÂä†ÈîÅÁöÑÁ∫øÁ®ãÁöÑ<code>Condition</code>Á±ªÁöÑ<code>await()</code>&#x2F;<code>signal()</code>&#x2F;<code>signalAll()</code></li>
<li>Âü∫‰∫é <code>LockSupport</code> ÂÆûÁé∞Á∫øÁ®ãÈó¥ÁöÑÈòªÂ°ûÂíåÂî§ÈÜí„ÄÇ<code>LockSupport</code> ÊòØ‰∏ÄÁßçÈùûÂ∏∏ÁÅµÊ¥ªÁöÑÂÆûÁé∞Á∫øÁ®ãÈó¥ÈòªÂ°ûÂíåÂî§ÈÜíÁöÑÂ∑•ÂÖ∑Ôºå‰ΩøÁî®ÂÆÉ‰∏çÁî®ÂÖ≥Ê≥®ÊòØÁ≠âÂæÖÁ∫øÁ®ãÂÖàËøõË°åËøòÊòØÂî§ÈÜíÁ∫øÁ®ãÂÖàËøêË°åÔºå‰ΩÜÊòØÂæóÁü•ÈÅìÁ∫øÁ®ãÁöÑÂêçÂ≠ó„ÄÇ</li>
<li>‰ΩøÁî®JUCÂ∑•ÂÖ∑Á±ª <code>CountDownLatch</code>„ÄÇjdk1.5 ‰πãÂêéÂú®<code>java.util.concurrent</code>ÂåÖ‰∏ãÊèê‰æõ‰∫ÜÂæàÂ§öÂπ∂ÂèëÁºñÁ®ãÁõ∏ÂÖ≥ÁöÑÂ∑•ÂÖ∑Á±ªÔºåÁÆÄÂåñ‰∫ÜÂπ∂ÂèëÁºñÁ®ãÂºÄÂèëÔºå<code>CountDownLatch</code> Âü∫‰∫é AQS Ê°ÜÊû∂ÔºåÁõ∏ÂΩì‰∫é‰πüÊòØÁª¥Êä§‰∫Ü‰∏Ä‰∏™Á∫øÁ®ãÈó¥ÂÖ±‰∫´ÂèòÈáè state„ÄÇ</li>
</ul>
<h3 id="üåüÁ∫øÁ®ãÂêåÊ≠•ÔºüÁ∫øÁ®ã‰∫íÊñ•ÔºüÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"><a href="#üåüÁ∫øÁ®ãÂêåÊ≠•ÔºüÁ∫øÁ®ã‰∫íÊñ•ÔºüÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü" class="headerlink" title="üåüÁ∫øÁ®ãÂêåÊ≠•ÔºüÁ∫øÁ®ã‰∫íÊñ•ÔºüÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"></a>üåüÁ∫øÁ®ãÂêåÊ≠•ÔºüÁ∫øÁ®ã‰∫íÊñ•ÔºüÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü</h3><p>Á∫øÁ®ã‰∫íÊñ•ÊòØÊåáÊüê‰∏Ä‰∏™ËµÑÊ∫êÂè™ËÉΩË¢´‰∏Ä‰∏™ËÆøÈóÆËÄÖËÆøÈóÆÔºåÂÖ∑ÊúâÂîØ‰∏ÄÊÄßÂíåÊéí‰ªñÊÄß„ÄÇ‰ΩÜËÆøÈóÆËÄÖÂØπËµÑÊ∫êËÆøÈóÆÁöÑÈ°∫Â∫èÊòØ‰π±Â∫èÁöÑ„ÄÇ </p>
<p>Á∫øÁ®ãÂêåÊ≠•ÊòØÊåáÂú®‰∫íÊñ•ÁöÑÂü∫Á°Ä‰∏ä‰ΩøÂæóËÆøÈóÆËÄÖÂØπËµÑÊ∫êËøõË°åÊúâÂ∫èËÆøÈóÆ„ÄÇ ÈúÄË¶ÅÁ≠âÂæÖÂâçÈù¢ÁªìÊûúËøîÂõûÔºåÊâçËÉΩÁªßÁª≠ËøêË°å</p>
<p>Á∫øÁ®ãÂêåÊ≠•ÁöÑÂÆûÁé∞ÊñπÊ≥ïÔºö </p>
<ul>
<li>ÂêåÊ≠•ÊñπÊ≥ï„ÄÅÂêåÊ≠•‰ª£Á†ÅÂùó</li>
<li><code>wait()</code>Âíå<code>notify()</code></li>
<li>‰ΩøÁî®volatileÂÆûÁé∞Á∫øÁ®ãÂêåÊ≠•</li>
<li>‰ΩøÁî®ÈáçÂÖ•ÈîÅÂÆûÁé∞Á∫øÁ®ãÂêåÊ≠•</li>
<li>‰ΩøÁî®Â±ÄÈÉ®ÂèòÈáèÂÆûÁé∞Á∫øÁ®ãÂêåÊ≠•</li>
<li>‰ΩøÁî®ÈòªÂ°ûÈòüÂàóÂÆûÁé∞Á∫øÁ®ãÂêåÊ≠•</li>
</ul>
<h3 id="üåüÂ¶Ç‰Ωï‰øùËØÅÁ∫øÁ®ãÁöÑËøêË°åÂÆâÂÖ®"><a href="#üåüÂ¶Ç‰Ωï‰øùËØÅÁ∫øÁ®ãÁöÑËøêË°åÂÆâÂÖ®" class="headerlink" title="üåüÂ¶Ç‰Ωï‰øùËØÅÁ∫øÁ®ãÁöÑËøêË°åÂÆâÂÖ®"></a>üåüÂ¶Ç‰Ωï‰øùËØÅÁ∫øÁ®ãÁöÑËøêË°åÂÆâÂÖ®</h3><p>Á∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò‰∏ªË¶Å‰ΩìÁé∞Âú®ÂéüÂ≠êÊÄß„ÄÅÂèØËßÅÊÄßÂíåÊúâÂ∫èÊÄß„ÄÇ</p>
<ul>
<li>ÂéüÂ≠êÊÄßÔºö‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Êìç‰ΩúÂú® CPU ÊâßË°åÁöÑËøáÁ®ã‰∏≠‰∏çË¢´‰∏≠Êñ≠ÁöÑÁâπÊÄß„ÄÇÁ∫øÁ®ãÂàáÊç¢Â∏¶Êù•ÁöÑÂéüÂ≠êÊÄßÈóÆÈ¢ò„ÄÇ</li>
<li>ÂèØËßÅÊÄßÔºö‰∏Ä‰∏™Á∫øÁ®ãÂØπÂÖ±‰∫´ÂèòÈáèÁöÑ‰øÆÊîπÔºåÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãËÉΩÂ§üÁ´ãÂàªÁúãÂà∞„ÄÇÁºìÂ≠òÂØºËá¥ÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò„ÄÇ</li>
<li>ÊúâÂ∫èÊÄßÔºöÁ®ãÂ∫èÊâßË°åÁöÑÈ°∫Â∫èÊåâÁÖß‰ª£Á†ÅÁöÑÂÖàÂêéÈ°∫Â∫èÊâßË°å„ÄÇÁºñËØë‰ºòÂåñÂ∏¶Êù•ÁöÑÊúâÂ∫èÊÄßÈóÆÈ¢ò„ÄÇ</li>
</ul>
<p>Ëß£ÂÜ≥ÊñπÊ≥ïÔºö</p>
<ul>
<li>ÂéüÂ≠êÊÄßÈóÆÈ¢òÔºöÂèØÁî® <code>AtomicÂéüÂ≠êÁ±ª</code>„ÄÅ<code>synchronized</code>„ÄÅ<code>LOCK</code>Êù•Ëß£ÂÜ≥</li>
<li>ÂèØËßÅÊÄßÈóÆÈ¢òÔºöÂèØÁî®<code>synchronized</code>„ÄÅ<code>volatile</code>„ÄÅ<code>LOCK</code>Êù•Ëß£ÂÜ≥</li>
<li>ÊúâÂ∫èÊÄßÈóÆÈ¢òÔºöÂèØÁî®<code>Happens-Before</code> ËßÑÂàôÊù•Ëß£ÂÜ≥</li>
</ul>
<h3 id="üåüÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆûÁé∞ÊñπÊ≥ï"><a href="#üåüÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆûÁé∞ÊñπÊ≥ï" class="headerlink" title="üåüÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆûÁé∞ÊñπÊ≥ï"></a>üåüÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆûÁé∞ÊñπÊ≥ï</h3><ul>
<li>‰∫íÊñ•ÂêåÊ≠•Ôºösynchronized Ôºå ReentrantLock</li>
<li>ÈùûÈòªÂ°ûÂêåÊ≠•ÔºöCASÔºåAtomicÁ±ª</li>
<li>Êó†ÂêåÊ≠•ÊñπÊ°àÔºöÊ†àÂ∞ÅÈó≠ÔºåÊú¨Âú∞Â≠òÂÇ®(ThreadLocal)ÔºåÂèØÈáçÂÖ•‰ª£Á†Å</li>
</ul>
<h3 id="üåüÂ¶Ç‰ΩïÂÅúÊ≠¢‰∏Ä‰∏™Ê≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ã"><a href="#üåüÂ¶Ç‰ΩïÂÅúÊ≠¢‰∏Ä‰∏™Ê≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ã" class="headerlink" title="üåüÂ¶Ç‰ΩïÂÅúÊ≠¢‰∏Ä‰∏™Ê≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ã"></a>üåüÂ¶Ç‰ΩïÂÅúÊ≠¢‰∏Ä‰∏™Ê≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ã</h3><ul>
<li>‰∏≠Êñ≠Ôºö<code>Interrupt</code>ÊñπÊ≥ï‰∏≠Êñ≠Á∫øÁ®ã</li>
<li>‰ΩøÁî®<code>volatile boolean</code>Ê†áÂøó‰ΩçÂÅúÊ≠¢Á∫øÁ®ãÔºöÂú®Á∫øÁ®ã‰∏≠ËÆæÁΩÆ‰∏Ä‰∏™<code>boolean</code>Ê†áÂøó‰ΩçÔºåÂêåÊó∂Áî®<code>volatile</code>‰øÆÈ•∞‰øùËØÅÂèØËßÅÊÄßÔºåÂú®Á∫øÁ®ãÈáå‰∏çÊñ≠Âú∞ËØªÂèñËøô‰∏™ÂÄºÔºåÂÖ∂‰ªñÂú∞ÊñπÂèØ‰ª•‰øÆÊîπËøô‰∏™<code>boolean</code>ÂÄº„ÄÇ</li>
<li>‰ΩøÁî®<code>stop()</code>ÊñπÊ≥ïÂÅúÊ≠¢Á∫øÁ®ãÔºå‰ΩÜËØ•ÊñπÊ≥ïÂ∑≤ÁªèË¢´Â∫üÂºÉ„ÄÇÂõ†‰∏∫ËøôÊ†∑Á∫øÁ®ã‰∏çËÉΩÂú®ÂÅúÊ≠¢Ââç‰øùÂ≠òÊï∞ÊçÆÔºå‰ºöÂá∫Áé∞Êï∞ÊçÆÂÆåÊï¥ÊÄßÈóÆÈ¢ò„ÄÇ</li>
</ul>
<h3 id="üåüËØ¥ËØ¥Java-ÂÜÖÂ≠òÊ®°ÂûãÔºàJMMÔºâÁöÑÁêÜËß£Ôºü"><a href="#üåüËØ¥ËØ¥Java-ÂÜÖÂ≠òÊ®°ÂûãÔºàJMMÔºâÁöÑÁêÜËß£Ôºü" class="headerlink" title="üåüËØ¥ËØ¥Java ÂÜÖÂ≠òÊ®°ÂûãÔºàJMMÔºâÁöÑÁêÜËß£Ôºü"></a>üåüËØ¥ËØ¥Java ÂÜÖÂ≠òÊ®°ÂûãÔºàJMMÔºâÁöÑÁêÜËß£Ôºü</h3><blockquote>
<p>CPU Â§ÑÁêÜÈÄüÂ∫¶ÂíåÂÜÖÂ≠òÂ§ÑÁêÜÈÄüÂ∫¶‰∏çÂØπÁ≠âÔºåÊâÄ‰ª•ÈúÄË¶ÅÂú®‰∏≠Èó¥Âª∫Á´ã‰∏≠Èó¥Â±ÇÔºå‰πüÂ∞±ÊòØÈ´òÈÄüÁºìÂ≠òÔºåËøô‰ºöÂºïÂá∫ÁºìÂ≠ò‰∏ÄËá¥ÊÄßÈóÆÈ¢ò„ÄÇÂú®Â§öÂ§ÑÁêÜÂô®Á≥ªÁªü‰∏≠ÔºåÊØè‰∏™Â§ÑÁêÜÂô®ÈÉΩÊúâËá™Â∑±ÁöÑÈ´òÈÄüÁºìÂ≠òÔºåËÄåÂÆÉ‰ª¨ÂèàÂÖ±‰∫´Âêå‰∏Ä‰∏ªÂÜÖÂ≠òÔºàMain MemoryÔºâÔºåÊúâÂèØËÉΩÊìç‰ΩúÂêå‰∏Ä‰ΩçÁΩÆÂºïËµ∑ÂêÑËá™ÁºìÂ≠ò‰∏ç‰∏ÄËá¥ÔºåËøôÊó∂ÂÄôÈúÄË¶ÅÁ∫¶ÂÆöÂçèËÆÆÂú®‰øùËØÅ‰∏ÄËá¥ÊÄß„ÄÇ</p>
</blockquote>
<p>Java ÂÜÖÂ≠òÊ®°Âûã(Java Memory ModelÔºåJMM)Ôºö<strong>Â±èËîΩÊéâ‰∫ÜÂêÑÁßçÁ°¨‰ª∂ÂíåÊìç‰ΩúÁ≥ªÁªüÁöÑÂÜÖÂ≠òËÆøÈóÆÂ∑ÆÂºÇÔºåÂÆûÁé∞ËÆ© Java Á®ãÂ∫èÂú®ÂêÑÁßçÂπ≥Âè∞‰∏ãÈÉΩËÉΩËææÂà∞‰∏ÄËá¥ÊÄßÁöÑÂÜÖÂ≠òËÆøÈóÆÊïàÊûú</strong></p>
<p>javaÂÜÖÂ≠òÊ®°ÂûãÂÆö‰πâ‰∫ÜÁ®ãÂ∫è‰∏≠ÂêÑÁßçÂèòÈáèÁöÑËÆøÈóÆËßÑÂàô„ÄÇÂÖ∂ËßÑÂÆöÊâÄÊúâÂèòÈáèÈÉΩÂ≠òÂÇ®Âú®‰∏ªÂÜÖÂ≠òÔºåÁ∫øÁ®ãÂùáÊúâËá™Â∑±ÁöÑÂ∑•‰ΩúÂÜÖÂ≠ò„ÄÇ Â∑•‰ΩúÂÜÖÂ≠ò‰∏≠‰øùÂ≠ò‰∏ªÂÜÖÂ≠òÂâØÊú¨ÂíåËá™Â∑±ÁßÅÊúâÂèòÈáèÔºåÁ∫øÁ®ãÂØπÂèòÈáèÁöÑÊâÄÊúâÊìç‰ΩúÈÉΩÂøÖÈ°ªÂú®Â∑•‰ΩúÁ©∫Èó¥ËøõË°åÔºå‰∏çËÉΩÁõ¥Êé•ËØªÂÜô‰∏ªÂÜÖÂ≠òÊï∞ÊçÆ„ÄÇÊìç‰ΩúÂÆåÊàêÂêéÔºåÁ∫øÁ®ãÁöÑÂ∑•‰ΩúÂÜÖÂ≠òÈÄöËøáÁºìÂ≠ò‰∏ÄËá¥ÊÄßÂçèËÆÆÂ∞ÜÊìç‰ΩúÂÆåÁöÑÊï∞ÊçÆÂà∑Âõû‰∏ªÂ≠ò„ÄÇ</p>
<h1 id="‚ë°ÂÖ≥ÈîÆÂ≠ó"><a href="#‚ë°ÂÖ≥ÈîÆÂ≠ó" class="headerlink" title="‚ë°ÂÖ≥ÈîÆÂ≠ó"></a>‚ë°ÂÖ≥ÈîÆÂ≠ó</h1><h2 id="‚ù∂synchronized"><a href="#‚ù∂synchronized" class="headerlink" title="‚ù∂synchronized"></a>‚ù∂synchronized</h2><p>synchronizedËß£ÂÜ≥ÁöÑÊòØÂ§ö‰∏™Á∫øÁ®ã‰πãÈó¥ËÆøÈóÆËµÑÊ∫êÁöÑÂêåÊ≠•ÊÄßÔºåsynchronizedÂèØ‰ª•‰øùËØÅË¢´ÂÆÉ‰øÆÈ•∞ÁöÑÊñπÊ≥ïÊàñËÄÖ‰ª£Á†ÅÂùóÂú®‰ªªÊÑèÊó∂ÂàªÂè™ËÉΩÊúâ‰∏Ä‰∏™Á∫øÁ®ãÊâßË°å„ÄÇ</p>
<h3 id="üåüsynchronizedÁöÑÁî®Ê≥ïÊúâÂì™‰∫õ"><a href="#üåüsynchronizedÁöÑÁî®Ê≥ïÊúâÂì™‰∫õ" class="headerlink" title="üåüsynchronizedÁöÑÁî®Ê≥ïÊúâÂì™‰∫õ?"></a>üåüsynchronizedÁöÑÁî®Ê≥ïÊúâÂì™‰∫õ?</h3><blockquote>
<p>Â¶Ç‰ΩïÂú®È°πÁõÆ‰∏≠‰ΩøÁî® synchronized ÁöÑÔºü</p>
<p>synchronizedÂÖ≥ÈîÆÂ≠óÁöÑ‰ΩøÁî®ÊñπÊ≥ï?</p>
</blockquote>
<ol>
<li><strong>‰øÆÈ•∞ÊôÆÈÄöÊñπÊ≥ï</strong>Ôºö‰ΩúÁî®‰∫éÂΩìÂâçÂØπË±°ÂÆû‰æãÔºåËøõÂÖ•ÂêåÊ≠•‰ª£Á†ÅÂâçË¶ÅËé∑ÂæóÂΩìÂâçÂØπË±°ÂÆû‰æãÁöÑÈîÅ</li>
<li><strong>‰øÆÈ•∞ÈùôÊÄÅÊñπÊ≥ï</strong>Ôºö‰ΩúÁî®‰∫éÂΩìÂâçÁ±ªÔºåËøõÂÖ•ÂêåÊ≠•‰ª£Á†ÅÂâçË¶ÅËé∑ÂæóÂΩìÂâçÁ±ªÂØπË±°ÁöÑÈîÅ</li>
<li><strong>‰øÆÈ•∞‰ª£Á†ÅÂùó</strong>ÔºöÊåáÂÆöÂä†ÈîÅÂØπË±°Ôºåsynchronized(ÂØπË±°ÁöÑÂºïÁî®)ÈîÅÁöÑÊòØÂØπË±°ÂÆû‰æãÔºåsynchronized(Á±ª.class)ÈîÅÁöÑÊòØÁ±ª</li>
</ol>
<h3 id="üåüsynchronized‰∏âÂ§ßÁâπÊÄßÊòØ‰ªÄ‰πàÔºü"><a href="#üåüsynchronized‰∏âÂ§ßÁâπÊÄßÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="üåüsynchronized‰∏âÂ§ßÁâπÊÄßÊòØ‰ªÄ‰πàÔºü"></a>üåüsynchronized‰∏âÂ§ßÁâπÊÄßÊòØ‰ªÄ‰πàÔºü</h3><blockquote>
<p>synchronizedÁöÑ‰ΩúÁî®ÊúâÂì™‰∫õ</p>
<p>ÂèØËßÅÊÄßÂíåÂéüÂ≠êÊÄßÊúâ‰ªÄ‰πàÂå∫Âà´</p>
</blockquote>
<p><strong>ÂéüÂ≠êÊÄß</strong>Ôºö‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êìç‰ΩúË¶Å‰πàÂÖ®ÈÉ®ÊâßË°åÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®ÊâßË°åÂ§±Ë¥•„ÄÇÁ°Æ‰øùÁ∫øÁ®ã‰∫íÊñ•ÁöÑËÆøÈóÆÂêåÊ≠•‰ª£Á†ÅÔºõ</p>
<p><strong>ÂèØËßÅÊÄß</strong>ÔºöÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂØπÂÖ±‰∫´ÂèòÈáèËøõË°å‰øÆÊîπÂêéÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂèØ‰ª•Á´ãÂàªÁúãÂà∞„ÄÇ‰øùËØÅÂÖ±‰∫´ÂèòÈáèÁöÑ‰øÆÊîπËÉΩÂ§üÂèäÊó∂ÂèØËßÅÔºõ</p>
<p><strong>ÊúâÂ∫èÊÄß</strong>ÔºöÁ®ãÂ∫èÁöÑÊâßË°åÈ°∫Â∫è‰ºöÊåâÁÖß‰ª£Á†ÅÁöÑÂÖàÂêéÈ°∫Â∫èÊâßË°å„ÄÇÊúâÊïàËß£ÂÜ≥ÈáçÊéíÂ∫èÈóÆÈ¢ò„ÄÇ</p>
<h3 id="üåüsynchronizedÂèØÂÆûÁé∞‰ªÄ‰πàÁ±ªÂûãÁöÑÈîÅÔºü"><a href="#üåüsynchronizedÂèØÂÆûÁé∞‰ªÄ‰πàÁ±ªÂûãÁöÑÈîÅÔºü" class="headerlink" title="üåüsynchronizedÂèØÂÆûÁé∞‰ªÄ‰πàÁ±ªÂûãÁöÑÈîÅÔºü"></a>üåüsynchronizedÂèØÂÆûÁé∞‰ªÄ‰πàÁ±ªÂûãÁöÑÈîÅÔºü</h3><p><strong>ÊÇ≤ËßÇÈîÅ</strong>ÔºösynchronizedÂÖ≥ÈîÆÂ≠óÂÆûÁé∞ÁöÑÊòØÊÇ≤ËßÇÈîÅÔºåÊØèÊ¨°ËÆøÈóÆÂÖ±‰∫´ËµÑÊ∫êÊó∂ÈÉΩ‰ºö‰∏äÈîÅ„ÄÇ</p>
<p><strong>ÈùûÂÖ¨Âπ≥ÈîÅ</strong>ÔºösynchronizedÂÖ≥ÈîÆÂ≠óÂÆûÁé∞ÁöÑÊòØÈùûÂÖ¨Âπ≥ÈîÅÔºåÂç≥Á∫øÁ®ãËé∑ÂèñÈîÅÁöÑÈ°∫Â∫èÂπ∂‰∏ç‰∏ÄÂÆöÊòØÊåâÁÖßÁ∫øÁ®ãÈòªÂ°ûÁöÑÈ°∫Â∫è„ÄÇ</p>
<p><strong>ÂèØÈáçÂÖ•ÈîÅ</strong>ÔºösynchronizedÂÖ≥ÈîÆÂ≠óÂÆûÁé∞ÁöÑÊòØÂèØÈáçÂÖ•ÈîÅÔºåÂç≥Â∑≤ÁªèËé∑ÂèñÈîÅÁöÑÁ∫øÁ®ãÂèØ‰ª•ÂÜçÊ¨°Ëé∑ÂèñÈîÅ„ÄÇ</p>
<p><strong>Áã¨Âç†ÈîÅ&#x2F;Êéí‰ªñÈîÅ</strong>ÔºösynchronizedÂÖ≥ÈîÆÂ≠óÂÆûÁé∞ÁöÑÊòØÁã¨Âç†ÈîÅÔºåÂç≥ËØ•ÈîÅÂè™ËÉΩË¢´‰∏Ä‰∏™Á∫øÁ®ãÊâÄÊåÅÊúâÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂùáË¢´ÈòªÂ°û„ÄÇ</p>
<h3 id="üåüsynchronized-Â∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜÔºü"><a href="#üåüsynchronized-Â∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜÔºü" class="headerlink" title="üåüsynchronized Â∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜÔºü"></a>üåüsynchronized Â∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜÔºü</h3><p>Â∞ùËØïËé∑ÂèñÂØπË±°ÁöÑ<code>Monitor</code>Ôºå<code>Monitor</code>Â∑≤Ë¢´ÂÖ∂‰ªñÁ∫øÁ®ãÂç†Áî®Êó∂ÔºåËé∑ÂèñÂ§±Ë¥•ÔºåËØ•Á∫øÁ®ãËøõÂÖ•<code>EntrySet</code>ÔºàÈòªÂ°ûÈòüÂàóÔºâ„ÄÇÂç†Êúâ<code>Monitor</code>Êó∂Ë∞ÉÁî®<code>wait()</code>ËøõÂÖ•<code>WaitSet</code>ÔºàÁ≠âÂæÖÈòüÂàóÔºâ„ÄÇË∞ÉÁî®<code>notify()</code>Êó∂‰ªé<code>WaitSet</code>ÈáåÈöèÊú∫ÈÄâ‰∏Ä‰∏™Á∫øÁ®ãÂî§ÈÜíÔºåË∞ÉÁî®<code>notifyAll</code>Êó∂Âî§ÈÜí<code>WaitSet</code>ÈáåÊâÄÊúâÁ∫øÁ®ã</p>
<p>synchronized ÂêåÊ≠•‰ª£Á†ÅÂùóÁöÑÂÆûÁé∞ÊòØÈÄöËøá <code>monitorenter</code> Âíå <code>monitorexit</code> Êåá‰ª§Ôºå</p>
<ul>
<li><code>monitorenter</code> Êåá‰ª§ÊåáÂêëÂêåÊ≠•‰ª£Á†ÅÂùóÁöÑÂºÄÂßã‰ΩçÁΩÆÔºå</li>
<li><code>monitorexit</code> Êåá‰ª§ÂàôÊåáÊòéÂêåÊ≠•‰ª£Á†ÅÂùóÁöÑÁªìÊùü‰ΩçÁΩÆ„ÄÇ</li>
</ul>
<p>ÂΩìÊâßË°å <code>monitorenter</code> Êåá‰ª§Êó∂ÔºåÁ∫øÁ®ãËØïÂõæËé∑ÂèñÈîÅ‰πüÂ∞±ÊòØËé∑Âèñ <code>monitor</code>ÁöÑÊåÅÊúâÊùÉÔºàmonitorÂØπË±°Â≠òÂú®‰∫éÊØè‰∏™JavaÂØπË±°ÁöÑÂØπË±°Â§¥‰∏≠Ôºå synchronized ÈîÅ‰æøÊòØÈÄöËøáËøôÁßçÊñπÂºèËé∑ÂèñÈîÅÁöÑÔºå‰πüÊòØ‰∏∫‰ªÄ‰πàJava‰∏≠‰ªªÊÑèÂØπË±°ÂèØ‰ª•‰Ωú‰∏∫ÈîÅÁöÑÂéüÂõ†Ôºâ„ÄÇÂÖ∂ÂÜÖÈÉ®ÂåÖÂê´‰∏Ä‰∏™ËÆ°Êï∞Âô®ÔºåÂΩìËÆ°Êï∞Âô®‰∏∫0ÂàôÂèØ‰ª•ÊàêÂäüËé∑ÂèñÔºåËé∑ÂèñÂêéÂ∞ÜÈîÅËÆ°Êï∞Âô®ËÆæ‰∏∫1‰πüÂ∞±ÊòØÂä†1„ÄÇÁõ∏Â∫îÁöÑÂú®ÊâßË°å <code>monitorexit</code> Êåá‰ª§ÂêéÔºåÂ∞ÜÈîÅËÆ°Êï∞Âô®ËÆæ‰∏∫0 ÔºåË°®ÊòéÈîÅË¢´ÈáäÊîæ„ÄÇÂ¶ÇÊûúËé∑ÂèñÂØπË±°ÈîÅÂ§±Ë¥•ÔºåÈÇ£ÂΩìÂâçÁ∫øÁ®ãÂ∞±Ë¶ÅÈòªÂ°ûÁ≠âÂæÖÔºåÁõ¥Âà∞ÈîÅË¢´Âè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãÈáäÊîæ‰∏∫Ê≠¢</p>
<p>synchronized ‰øÆÈ•∞ÁöÑÊñπÊ≥ïÂπ∂Ê≤°Êúâ <code>monitorenter</code> Êåá‰ª§Âíå <code>monitorexit</code> Êåá‰ª§ÔºåÂèñÂæó‰ª£‰πãÁöÑÁ°ÆÂÆûÊòØ<code>ACC_SYNCHRONIZED</code> Ê†áËØÜÔºåËØ•Ê†áËØÜÊåáÊòé‰∫ÜËØ•ÊñπÊ≥ïÊòØ‰∏Ä‰∏™ÂêåÊ≠•ÊñπÊ≥ïÔºåJVM ÈÄöËøáËØ• <code>ACC_SYNCHRONIZED</code> ËÆøÈóÆÊ†áÂøóÊù•Ëæ®Âà´‰∏Ä‰∏™ÊñπÊ≥ïÊòØÂê¶Â£∞Êòé‰∏∫ÂêåÊ≠•ÊñπÊ≥ïÔºå‰ªéËÄåÊâßË°åÁõ∏Â∫îÁöÑÂêåÊ≠•Ë∞ÉÁî®„ÄÇ</p>
<hr>
<p>synchronizedÁî®ÁöÑÈîÅÊòØÂ≠òÂú®ÂØπË±°Â§¥ÈáåÁöÑÔºåÂØπË±°Â§¥ÂàôÁî±Mark WordÂíåClass MetadataAddressÁªÑÊàê„ÄÇMark WordÂ≠òÂÇ®ÂØπË±°ÁöÑhashCode„ÄÅÂàÜ‰ª£Âπ¥ÈæÑ„ÄÅ<strong>ÈîÅÊ†áËÆ∞‰Ωç</strong>„ÄÅÂÅèÂêëÁ∫øÁ®ãIDÁ≠â‰ø°ÊÅØ„ÄÇJavaËôöÊãüÊú∫ÊòØÂü∫‰∫éMonitorÂØπË±°Êù•ÂÆûÁé∞ÈáçÈáèÁ∫ßÈîÅÁöÑÔºåmonitorÂØπË±°Â≠òÂú®‰∫éÊØè‰∏™JavaÂØπË±°ÁöÑÂØπË±°Â§¥‰∏≠</p>
<p><img src="https://img.jwt1399.top/img/202308041542812.png" alt="monitor"></p>
<p><strong>JavaËôöÊãüÊú∫ÊòØÈÄöËøáËøõÂÖ•ÂíåÈÄÄÂá∫MonitorÂØπË±°Êù•ÂÆûÁé∞‰ª£Á†ÅÂùóÂêåÊ≠•ÂíåÊñπÊ≥ïÂêåÊ≠•ÁöÑÔºå‰ª£Á†ÅÂùóÂêåÊ≠•‰ΩøÁî®ÁöÑÊòØmonitorenter Âíå monitorexit Êåá‰ª§ÂÆûÁé∞ÁöÑÔºåËÄåÊñπÊ≥ïÂêåÊ≠•ÊòØÈÄöËøáAccess flagsÂêéÈù¢ÁöÑÊ†áËØÜÊù•Á°ÆÂÆöËØ•ÊñπÊ≥ïÊòØÂê¶‰∏∫ÂêåÊ≠•ÊñπÊ≥ï„ÄÇ</strong></p>
<p><a target="_blank" rel="noopener" href="https://www.mianshi.online/multi-thread-theory.html">synchronizedÂÖ≥ÈîÆÂ≠óÁöÑÂ∫ïÂ±ÇÂéüÁêÜ </a></p>
<h3 id="üåüJDK1-6ÂêésynchronizedÂÅö‰∫ÜÂì™‰∫õ‰ºòÂåñ"><a href="#üåüJDK1-6ÂêésynchronizedÂÅö‰∫ÜÂì™‰∫õ‰ºòÂåñ" class="headerlink" title="üåüJDK1.6ÂêésynchronizedÂÅö‰∫ÜÂì™‰∫õ‰ºòÂåñ"></a>üåüJDK1.6ÂêésynchronizedÂÅö‰∫ÜÂì™‰∫õ‰ºòÂåñ</h3><p>JDK1.6 ÂØπÈîÅÁöÑÂÆûÁé∞ÂºïÂÖ•‰∫ÜÂ§ßÈáèÁöÑ‰ºòÂåñÔºåÂ¶ÇÂÅèÂêëÈîÅ„ÄÅËΩªÈáèÁ∫ßÈîÅ„ÄÅËá™ÊóãÈîÅ„ÄÅÈÄÇÂ∫îÊÄßËá™ÊóãÈîÅ„ÄÅÈîÅÊ∂àÈô§„ÄÅÈîÅÁ≤óÂåñÁ≠âÊäÄÊúØÊù•ÂáèÂ∞ëÈîÅÊìç‰ΩúÁöÑÂºÄÈîÄ„ÄÇ</p>
<p>ÈîÅ‰∏ªË¶ÅÂ≠òÂú®ÂõõÁßçÁä∂ÊÄÅÔºå‰æùÊ¨°ÊòØÔºöÊó†ÈîÅÁä∂ÊÄÅ„ÄÅÂÅèÂêëÈîÅÁä∂ÊÄÅ„ÄÅËΩªÈáèÁ∫ßÈîÅÁä∂ÊÄÅ„ÄÅÈáçÈáèÁ∫ßÈîÅÁä∂ÊÄÅÔºå‰ªñ‰ª¨‰ºöÈöèÁùÄÁ´û‰∫âÁöÑÊøÄÁÉàËÄåÈÄêÊ∏êÂçáÁ∫ß„ÄÇÊ≥®ÊÑèÈîÅÂèØ‰ª•ÂçáÁ∫ß‰∏çÂèØÈôçÁ∫ßÔºåËøôÁßçÁ≠ñÁï•ÊòØ‰∏∫‰∫ÜÊèêÈ´òËé∑ÂæóÈîÅÂíåÈáäÊîæÈîÅÁöÑÊïàÁéá„ÄÇ</p>
<p><a target="_blank" rel="noopener" href="https://www.mianshi.online/multi-thread-synchronized-optimize.html">36.jdk1.6‰∏∫‰ªÄ‰πàË¶ÅÂØπsynchronizedËøõË°å‰ºòÂåñÔºüÂÅö‰∫ÜÂì™‰∫õ‰ºòÂåñÔºü - Ë∑Ø‰∫∫Âº†ÁöÑÈù¢ËØïÁ¨îËÆ∞ (mianshi.online)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.iamshuaidi.com/1084.html">ËØ¥ËØ¥ JDK1.6 ‰πãÂêéÁöÑ synchronized ÂÖ≥ÈîÆÂ≠óÂ∫ïÂ±ÇÂÅö‰∫ÜÂì™‰∫õ‰ºòÂåñÔºåÂèØ‰ª•ËØ¶ÁªÜ‰ªãÁªç‰∏Ä‰∏ãËøô‰∫õ‰ºòÂåñÂêóÔºü-Â∏ÖÂú∞Áé©ÁºñÁ®ã (iamshuaidi.com)</a></p>
<h3 id="üåüÈîÅÂçáÁ∫ßËøáÁ®ã"><a href="#üåüÈîÅÂçáÁ∫ßËøáÁ®ã" class="headerlink" title="üåüÈîÅÂçáÁ∫ßËøáÁ®ã"></a>üåüÈîÅÂçáÁ∫ßËøáÁ®ã</h3><p>synchronizedÈîÅÊúâÂõõÁßçÁä∂ÊÄÅÔºåÊó†ÈîÅÔºåÂÅèÂêëÈîÅÔºåËΩªÈáèÁ∫ßÈîÅÔºåÈáçÈáèÁ∫ßÈîÅÔºåËøôÂá†‰∏™Áä∂ÊÄÅ‰ºöÈöèÁùÄÁ´û‰∫âÁä∂ÊÄÅÈÄêÊ∏êÂçáÁ∫ßÔºå<strong>ÈîÅÂèØ‰ª•ÂçáÁ∫ß‰ΩÜ‰∏çËÉΩÈôçÁ∫ßÔºå‰ΩÜÊòØÂÅèÂêëÈîÅÁä∂ÊÄÅÂèØ‰ª•Ë¢´ÈáçÁΩÆ‰∏∫Êó†ÈîÅÁä∂ÊÄÅ</strong></p>
<p><img src="https://img.jwt1399.top/img/202212271733295.png"></p>
<p><img src="https://img.jwt1399.top/img/202212301531550.png"></p>
<p><a target="_blank" rel="noopener" href="https://www.mianshi.online/multi-thread-synchronized-optimize.html">ÈîÅÂçáÁ∫ß</a></p>
<h3 id="üåüÂÅèÂêëÈîÅ„ÄÅËΩªÈáèÁ∫ßÈîÅ„ÄÅÈáçÈáèÁ∫ßÈîÅÁöÑÂØπÊØî"><a href="#üåüÂÅèÂêëÈîÅ„ÄÅËΩªÈáèÁ∫ßÈîÅ„ÄÅÈáçÈáèÁ∫ßÈîÅÁöÑÂØπÊØî" class="headerlink" title="üåüÂÅèÂêëÈîÅ„ÄÅËΩªÈáèÁ∫ßÈîÅ„ÄÅÈáçÈáèÁ∫ßÈîÅÁöÑÂØπÊØî"></a>üåüÂÅèÂêëÈîÅ„ÄÅËΩªÈáèÁ∫ßÈîÅ„ÄÅÈáçÈáèÁ∫ßÈîÅÁöÑÂØπÊØî</h3><table>
<thead>
<tr>
<th>ÈîÅ</th>
<th align="center">‰ºòÁÇπ</th>
<th align="center">Áº∫ÁÇπ</th>
<th align="center">‰ΩøÁî®Âú∫ÊôØ</th>
</tr>
</thead>
<tbody><tr>
<td>ÂÅèÂêëÈîÅ</td>
<td align="center">Âä†ÈîÅÂíåËß£ÈîÅ‰∏çÈúÄË¶ÅCASÊìç‰ΩúÔºåÊ≤°ÊúâÈ¢ùÂ§ñÁöÑÊÄßËÉΩÊ∂àËÄóÔºåÂíåÊâßË°åÈùûÂêåÊ≠•ÊñπÊ≥ïÁõ∏ÊØî‰ªÖÂ≠òÂú®Á∫≥ÁßíÁ∫ßÁöÑÂ∑ÆË∑ù</td>
<td align="center">Â¶ÇÊûúÁ∫øÁ®ãÈó¥Â≠òÂú®ÈîÅÁ´û‰∫âÔºå‰ºöÂ∏¶Êù•È¢ùÂ§ñÁöÑÈîÅÊí§ÈîÄÁöÑÊ∂àËÄó</td>
<td align="center">ÈÄÇÁî®‰∫éÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆÂêåÊ≠•ÂùóÁöÑÂú∫ÊôØ</td>
</tr>
<tr>
<td>ËΩªÈáèÁ∫ßÈîÅ</td>
<td align="center">Á´û‰∫âÁöÑÁ∫øÁ®ã‰∏ç‰ºöÈòªÂ°ûÔºåÊèêÈ´ò‰∫ÜÂìçÂ∫îÈÄüÂ∫¶</td>
<td align="center">Â¶ÇÁ∫øÁ®ãÂßãÁªàÂæó‰∏çÂà∞ÈîÅÁ´û‰∫âÁöÑÁ∫øÁ®ãÔºå‰ΩøÁî®Ëá™Êóã‰ºöÊ∂àËÄóCPUÊÄßËÉΩ</td>
<td align="center">ËøΩÊ±ÇÂìçÂ∫îÊó∂Èó¥ÔºåÂêåÊ≠•ÂùóÊâßË°åÈÄüÂ∫¶ÈùûÂ∏∏Âø´</td>
</tr>
<tr>
<td>ÈáçÈáèÁ∫ßÈîÅ</td>
<td align="center">Á∫øÁ®ãÁ´û‰∫â‰∏çÈÄÇÁî®Ëá™ÊóãÔºå‰∏ç‰ºöÊ∂àËÄóCPU</td>
<td align="center">Á∫øÁ®ãÈòªÂ°ûÔºåÂìçÂ∫îÊó∂Èó¥ÁºìÊÖ¢ÔºåÂú®Â§öÁ∫øÁ®ã‰∏ãÔºåÈ¢ëÁπÅÁöÑËé∑ÂèñÈáäÊîæÈîÅÔºå‰ºöÂ∏¶Êù•Â∑®Â§ßÁöÑÊÄßËÉΩÊ∂àËÄó</td>
<td align="center">ËøΩÊ±ÇÂêûÂêêÈáèÔºåÂêåÊ≠•ÂùóÊâßË°åÈÄüÂ∫¶ËæÉÈïø</td>
</tr>
</tbody></table>
<h3 id="üåü‰∫ÜËß£ÈîÅÊ∂àÈô§ÂêóÔºü‰∫ÜËß£ÈîÅÁ≤óÂåñÂêóÔºü"><a href="#üåü‰∫ÜËß£ÈîÅÊ∂àÈô§ÂêóÔºü‰∫ÜËß£ÈîÅÁ≤óÂåñÂêóÔºü" class="headerlink" title="üåü‰∫ÜËß£ÈîÅÊ∂àÈô§ÂêóÔºü‰∫ÜËß£ÈîÅÁ≤óÂåñÂêóÔºü"></a>üåü‰∫ÜËß£ÈîÅÊ∂àÈô§ÂêóÔºü‰∫ÜËß£ÈîÅÁ≤óÂåñÂêóÔºü</h3><p>ÈîÅÊ∂àÈô§ÊòØÊåáJavaËôöÊãüÊú∫Âú®Âç≥Êó∂ÁºñËØëÊó∂ÔºåÈÄöËøáÂØπËøêË°å‰∏ä‰∏ãÁöÑÊâ´ÊèèÔºåÊ∂àÈô§ÈÇ£‰∫õ‰∏çÂèØËÉΩÂ≠òÂú®ÂÖ±‰∫´ËµÑÊ∫êÁ´û‰∫âÁöÑÈîÅ„ÄÇÈîÅÊ∂àÈô§ÂèØ‰ª•ËäÇÁ∫¶Êó†ÊÑè‰πâÁöÑËØ∑Ê±ÇÈîÅÊó∂Èó¥„ÄÇ</p>
<p>ÈîÅÁ≤óÂåñÊòØÊåáÂΩìËôöÊãüÊú∫Êé¢ÊµãÂà∞‰∏Ä‰∏≤ÁöÑÊìç‰ΩúÂØπÁõ∏ÂêåÂØπË±°Â§öÊ¨°Âä†ÈîÅÔºåÂØºËá¥Á∫øÁ®ãÂèëÁîüÂ§öÊ¨°ÈáçÂÖ•ÔºåÂ∞Ü‰ºöÊääÂä†ÈîÅÁöÑËåÉÂõ¥Êâ©Â±ïÔºàÁ≤óÂåñÔºâÂà∞Êï¥‰∏™Êìç‰ΩúÂ∫èÂàóÁöÑÂ§ñÈÉ®„ÄÇÂõ†‰∏∫È¢ëÁπÅÁöÑÂä†ÈîÅÊìç‰ΩúÂ∞±‰ºöÂØºËá¥ÊÄßËÉΩÊçüËÄóÔºåÂèØ‰ª•‰ΩøÁî®ÈîÅÁ≤óÂåñÊñπÂºè‰ºòÂåñ</p>
<h3 id="üåüsynchronizedÂíåvolatileÁöÑÂå∫Âà´"><a href="#üåüsynchronizedÂíåvolatileÁöÑÂå∫Âà´" class="headerlink" title="üåüsynchronizedÂíåvolatileÁöÑÂå∫Âà´"></a>üåüsynchronizedÂíåvolatileÁöÑÂå∫Âà´</h3><ul>
<li><code>volatile</code>‰∏ªË¶ÅÊòØÂëäËØâJVMÂΩìÂâçÂèòÈáèÂú®ÂØÑÂ≠òÂô®ÔºàÂ∑•‰ΩúÂÜÖÂ≠òÔºâ‰∏≠ÁöÑÂÄºÊòØ‰∏çÁ°ÆÂÆöÁöÑÔºåÈúÄË¶Å‰ªé‰∏ªÂ≠ò‰∏≠ËØªÂèñ„ÄÇ<code>synchronized</code>ÂàôÊòØÈîÅÂÆöÂΩìÂâçÂèòÈáèÔºåÂè™ÊúâÂΩìÂâçÁ∫øÁ®ãÂèØ‰ª•ËÆøÈóÆËØ•ÂèòÈáèÔºåÂÖ∂‰ªñÁ∫øÁ®ãË¢´ÈòªÂ°û‰Ωè„ÄÇ</li>
<li><code>volatile</code>‰ΩúÁî®‰∫éÂèòÈáèÔºå<code>synchronized</code>‰ΩúÁî®‰∫é‰ª£Á†ÅÂùóÊàñËÄÖÊñπÊ≥ï„ÄÇ</li>
<li><code>volatile</code>‰ªÖÂèØ‰ª•‰øùËØÅÊï∞ÊçÆÁöÑÂèØËßÅÊÄßÂíåÊúâÂ∫èÊÄßÔºå‰∏çËÉΩ‰øùËØÅÊï∞ÊçÆÁöÑÂéüÂ≠êÊÄß„ÄÇ<code>synchronized</code>ÂèØ‰ª•‰øùËØÅÊï∞ÊçÆÁöÑÂèØËßÅÊÄß„ÄÅÊúâÂ∫èÊÄß„ÄÅÂéüÂ≠êÊÄß„ÄÇ</li>
<li><code>volatile</code>‰∏ç‰ºöÈÄ†ÊàêÁ∫øÁ®ãÁöÑÈòªÂ°ûÔºå<code>synchronized</code>‰ºöÈÄ†ÊàêÁ∫øÁ®ãÁöÑÈòªÂ°û„ÄÇ</li>
<li><code>volatile</code> Ê†áËÆ∞ÁöÑÂèòÈáè‰∏ç‰ºöË¢´ÁºñËØëÂô®‰ºòÂåñÔºõ<code>synchronized</code> Ê†áËÆ∞ÁöÑÂèòÈáèÂèØ‰ª•Ë¢´ÁºñËØëÂô®‰ºòÂåñ„ÄÇ</li>
</ul>
<h3 id="üåüsynchronizedÂíåReentrantLockÂå∫Âà´"><a href="#üåüsynchronizedÂíåReentrantLockÂå∫Âà´" class="headerlink" title="üåüsynchronizedÂíåReentrantLockÂå∫Âà´"></a>üåüsynchronizedÂíåReentrantLockÂå∫Âà´</h3><p>Áõ∏ÂêåÁÇπÔºö‰∏§ËÄÖÈÉΩÊòØÂèØÈáçÂÖ•ÈîÅÔºåÂç≥Ëá™Â∑±ÂèØ‰ª•ÂÜçÊ¨°Ëé∑ÂèñËá™Â∑±ÁöÑÂÜÖÈÉ®ÈîÅ</p>
<p>Âå∫Âà´Ôºö</p>
<p>1„ÄÅ<strong>synchronized ÊòØÂÖ≥ÈîÆÂ≠óÔºåReentrantLock ÊòØÁ±ªÔºåËøôÊòØ‰∫åËÄÖÁöÑÊú¨Ë¥®Âå∫Âà´„ÄÇ</strong></p>
<p>Êó¢ÁÑ∂ ReentrantLock ÊòØÁ±ªÔºåÈÇ£‰πàÂÆÉÂ∞±Êèê‰æõ‰∫ÜÊØî synchronized Êõ¥Â§öÊõ¥ÁÅµÊ¥ªÁöÑÁâπÊÄßÔºöÁ≠âÂæÖÂèØ‰∏≠Êñ≠„ÄÅÂèØÂÆûÁé∞ÂÖ¨Âπ≥ÈîÅ„ÄÅÂèØÂÆûÁé∞ÈÄâÊã©ÊÄßÈÄöÁü•ÔºàÈîÅÂèØ‰ª•ÁªëÂÆöÂ§ö‰∏™Êù°‰ª∂Ôºâ„ÄÅÊÄßËÉΩÂ∑≤‰∏çÊòØÈÄâÊã©Ê†áÂáÜ„ÄÇ</p>
<p><strong>Á≠âÂæÖÂèØ‰∏≠Êñ≠</strong> : <code>ReentrantLock</code>Êèê‰æõ‰∫Ü‰∏ÄÁßçËÉΩÂ§ü‰∏≠Êñ≠Á≠âÂæÖÈîÅÁöÑÁ∫øÁ®ãÁöÑÊú∫Âà∂ÔºåÈÄöËøá <code>lock.lockInterruptibly()</code> Êù•ÂÆûÁé∞Ëøô‰∏™Êú∫Âà∂„ÄÇ‰πüÂ∞±ÊòØËØ¥Ê≠£Âú®Á≠âÂæÖÁöÑÁ∫øÁ®ãÂèØ‰ª•ÈÄâÊã©ÊîæÂºÉÁ≠âÂæÖÔºåÊîπ‰∏∫Â§ÑÁêÜÂÖ∂‰ªñ‰∫ãÊÉÖ„ÄÇ</p>
<p><strong>ÂèØÂÆûÁé∞ÂÖ¨Âπ≥ÈîÅ</strong> : <code>ReentrantLock</code>ÂèØ‰ª•ÊåáÂÆöÊòØÂÖ¨Âπ≥ÈîÅËøòÊòØÈùûÂÖ¨Âπ≥ÈîÅ„ÄÇËÄå<code>synchronized</code>Âè™ËÉΩÊòØÈùûÂÖ¨Âπ≥ÈîÅ„ÄÇÊâÄË∞ìÁöÑÂÖ¨Âπ≥ÈîÅÂ∞±ÊòØÂÖàÁ≠âÂæÖÁöÑÁ∫øÁ®ãÂÖàËé∑ÂæóÈîÅ„ÄÇ<code>ReentrantLock</code>ÈªòËÆ§ÊÉÖÂÜµÊòØÈùûÂÖ¨Âπ≥ÁöÑÔºåÂèØ‰ª•ÈÄöËøá <code>ReentrantLock</code>Á±ªÁöÑ<code>ReentrantLock(boolean fair)</code>ÊûÑÈÄ†ÊñπÊ≥ïÊù•Âà∂ÂÆöÊòØÂê¶ÊòØÂÖ¨Âπ≥ÁöÑ„ÄÇ</p>
<p><strong>ÂèØÂÆûÁé∞ÈÄâÊã©ÊÄßÈÄöÁü•ÔºàÈîÅÂèØ‰ª•ÁªëÂÆöÂ§ö‰∏™Êù°‰ª∂Ôºâ</strong>: <code>synchronized</code>ÂÖ≥ÈîÆÂ≠ó‰∏é<code>wait()</code>Âíå<code>notify()</code>&#x2F;<code>notifyAll()</code>ÊñπÊ≥ïÁõ∏ÁªìÂêàÂèØ‰ª•ÂÆûÁé∞Á≠âÂæÖ&#x2F;ÈÄöÁü•Êú∫Âà∂„ÄÇ<code>ReentrantLock</code>Á±ªÂΩìÁÑ∂‰πüÂèØ‰ª•ÂÆûÁé∞Ôºå‰ΩÜÊòØÈúÄË¶ÅÂÄüÂä©‰∫é<code>Condition</code>Êé•Âè£‰∏é<code>newCondition()</code>ÊñπÊ≥ï„ÄÇ</p>
<p>2„ÄÅ <strong>synchronized ‰æùËµñ‰∫é JVM ËÄå ReenTrantLock ‰æùËµñ‰∫é API„ÄÇ</strong></p>
<p>synchronized ÊòØ‰æùËµñ‰∫é JVM ÂÆûÁé∞ÁöÑÔºåJDK1.6 ‰∏∫ synchronized ÂÖ≥ÈîÆÂ≠óËøõË°å‰∫ÜÂæàÂ§ö‰ºòÂåñÔºå‰ΩÜÊòØËøô‰∫õ‰ºòÂåñÈÉΩÊòØÂú®ËôöÊãüÊú∫Â±ÇÈù¢ÂÆûÁé∞ÁöÑÔºåÂπ∂Ê≤°ÊúâÁõ¥Êé•Êö¥Èú≤ÁªôÊàë‰ª¨„ÄÇ</p>
<p>ReenTrantLock ÊòØ JDK Â±ÇÈù¢ÂÆûÁé∞ÁöÑÔºà‰πüÂ∞±ÊòØ API Â±ÇÈù¢ÔºåÈúÄË¶Å lock() Âíå unlock ÊñπÊ≥ïÈÖçÂêà try&#x2F;finally ËØ≠Âè•ÂùóÊù•ÂÆåÊàêÔºâÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•ÈÄöËøáÊü•ÁúãÂÆÉÁöÑÊ∫ê‰ª£Á†ÅÔºåÊù•ÁúãÂÆÉÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑ„ÄÇ</p>
<p>3„ÄÅ<strong>ReentrantLock ÈúÄË¶ÅÊâãÂä®Ëß£ÈîÅÔºåsynchronized ÊâßË°åÂÆå‰ª£Á†ÅÂùóËá™Âä®Ëß£ÈîÅ</strong></p>
<h3 id="üåüsynchronizedÂíåLockÁöÑÂå∫Âà´"><a href="#üåüsynchronizedÂíåLockÁöÑÂå∫Âà´" class="headerlink" title="üåüsynchronizedÂíåLockÁöÑÂå∫Âà´"></a>üåüsynchronizedÂíåLockÁöÑÂå∫Âà´</h3><table>
<thead>
<tr>
<th></th>
<th>synchronized</th>
<th>Lock</th>
</tr>
</thead>
<tbody><tr>
<td>Êú¨Ë¥®</td>
<td>ÂÖ≥ÈîÆÂ≠óÔºåÊòØ‰æùËµñJVMÂÆûÁé∞ÁöÑ</td>
<td>Êé•Âè£ÔºåÊòØJDKÂÆûÁé∞ÁöÑ</td>
</tr>
<tr>
<td>Á±ªÂûã</td>
<td>ÈöêÂ£´ÈîÅÔºåÂèØ‰ª•Ëá™Âä®ÈáäÊîæÈîÅ</td>
<td>ÊòæÁ§∫ÈîÅÔºåÈúÄË¶ÅÊâãÂä®ÂºÄÂêØÂíåÂÖ≥Èó≠</td>
</tr>
<tr>
<td>‰∏≠Êñ≠</td>
<td>‰∏çÂèØ‰∏≠Êñ≠ÈîÅÔºåÈúÄË¶ÅÁ∫øÁ®ãÊâßË°åÂÆåÊâçËÉΩÈáäÊîæÈîÅ</td>
<td>ÂèØ‰∏≠Êñ≠ÈîÅ</td>
</tr>
<tr>
<td>ÈîÅÁ±ªÂûã</td>
<td>ÂèØÈáçÂÖ•ÈîÅÔºåÈùûÂÖ¨Âπ≥ÈîÅ</td>
<td>ÂèØÈáçÂÖ•ÈîÅ„ÄÅÂÖ¨Âπ≥ÈîÅ</td>
</tr>
<tr>
<td>ÂèëÁîüÂºÇÂ∏∏Êó∂</td>
<td>‰ºöËá™Âä®ÈáäÊîæÂç†ÊúâÁöÑÈîÅÔºå‰∏ç‰ºöÂá∫Áé∞Ê≠ªÈîÅÁöÑÊÉÖÂÜµ</td>
<td>‰∏ç‰ºö‰∏ªÂä®ÈáäÊîæÂç†ÊúâÁöÑÈîÅÔºåÂøÖÈ°ªÈÄöËøáunlockÊâãÂä®ÈáäÊîæÔºåÂõ†Ê≠§ÂèØËÉΩÂºïÂèëÊ≠ªÈîÅ</td>
</tr>
<tr>
<td>Âú∫ÊôØ</td>
<td>ÈÄÇÁî®‰∫éÂ∞ëÈáèÂêåÊ≠•‰ª£Á†ÅÂùóÁöÑÂú∫ÊôØ</td>
<td>ÈÄÇÁî®‰∫éÂ§ßÈáèÂêåÊ≠•‰ª£Á†ÅÂùóÁöÑÂú∫ÊôØ</td>
</tr>
</tbody></table>
<h2 id="‚ù∑volatile"><a href="#‚ù∑volatile" class="headerlink" title="‚ù∑volatile"></a>‚ù∑volatile</h2><h3 id="üåüvolatileÁöÑÁâπÊÄßÊúâÂì™‰∫õÔºü"><a href="#üåüvolatileÁöÑÁâπÊÄßÊúâÂì™‰∫õÔºü" class="headerlink" title="üåüvolatileÁöÑÁâπÊÄßÊúâÂì™‰∫õÔºü"></a>üåüvolatileÁöÑÁâπÊÄßÊúâÂì™‰∫õÔºü</h3><blockquote>
<p>Âπ∂ÂèëÁºñÁ®ãÁöÑ‰∏âÂ§ßÁâπÊÄß‰∏∫ÂèØËßÅÊÄß„ÄÅÊúâÂ∫èÊÄßÂíåÂéüÂ≠êÊÄß„ÄÇÈÄöÂ∏∏Êù•ËÆ≤<code>volatile</code>ÂèØ‰ª•‰øùËØÅ<strong>ÂèØËßÅÊÄß</strong>Âíå<strong>ÊúâÂ∫èÊÄß</strong>„ÄÇ</p>
</blockquote>
<ul>
<li>ÂèØËßÅÊÄßÔºö<code>volatile</code>ÂèØ‰ª•‰øùËØÅ‰∏çÂêåÁ∫øÁ®ãÂØπÂÖ±‰∫´ÂèòÈáèËøõË°åÊìç‰ΩúÊó∂ÁöÑÂèØËßÅÊÄß„ÄÇÂç≥ÂΩì‰∏Ä‰∏™Á∫øÁ®ã‰øÆÊîπ‰∫ÜÂÖ±‰∫´ÂèòÈáèÊó∂ÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•ËØªÂèñÂà∞ÂÖ±‰∫´ÂèòÈáèË¢´‰øÆÊîπÂêéÁöÑÂÄº„ÄÇÂ¶ÇÊûúÊàë‰ª¨Â∞ÜÂèòÈáèÂ£∞Êòé‰∏∫ <strong><code>volatile</code></strong> ÔºåËøôÂ∞±ÊåáÁ§∫ JVMÔºåËøô‰∏™ÂèòÈáèÊòØÂÖ±‰∫´‰∏î‰∏çÁ®≥ÂÆöÁöÑÔºåÊØèÊ¨°‰ΩøÁî®ÂÆÉÈÉΩÂà∞‰∏ªÂ≠ò‰∏≠ËøõË°åËØªÂèñ„ÄÇ</li>
<li>ÊúâÂ∫èÊÄßÔºö<code>volatile</code>‰ºöÈÄöËøáÁ¶ÅÊ≠¢Êåá‰ª§ÈáçÊéíÂ∫èËøõËÄå‰øùËØÅÊúâÂ∫èÊÄß„ÄÇ</li>
<li>ÂéüÂ≠êÊÄßÔºöÂØπ‰∫éÂçï‰∏™ÁöÑ<code>volatile</code>‰øÆÈ•∞ÁöÑÂèòÈáèÁöÑËØªÂÜôÊòØÂèØ‰ª•‰øùËØÅÂéüÂ≠êÊÄßÁöÑÔºå‰ΩÜÂØπ‰∫é<code>i++</code>ËøôÁßçÂ§çÂêàÊìç‰ΩúÂπ∂‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄß„ÄÇËøôÂè•ËØùÁöÑÊÑèÊÄùÂü∫Êú¨‰∏äÂ∞±ÊòØËØ¥<code>volatile</code>‰∏çÂÖ∑Â§áÂéüÂ≠êÊÄß‰∫Ü„ÄÇ</li>
</ul>
<h3 id="üåüvolatileÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πà"><a href="#üåüvolatileÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πà" class="headerlink" title="üåüvolatileÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πà?"></a>üåüvolatileÁöÑ‰ΩúÁî®ÊòØ‰ªÄ‰πà?</h3><ol>
<li><strong>‰øùËØÅÂèòÈáèÂØπÊâÄÊúâÁ∫øÁ®ãÁöÑÂèØËßÅÊÄß</strong>„ÄÇ ÂΩì‰∏ÄÊù°Á∫øÁ®ã‰øÆÊîπ‰∫ÜÂèòÈáèÂÄºÔºåÊñ∞ÂÄºÂØπ‰∫éÂÖ∂‰ªñÁ∫øÁ®ãÊù•ËØ¥ÊòØÁ´ãÂç≥ÂèØ‰ª•ÂæóÁü•ÁöÑ„ÄÇ</li>
<li><strong>Á¶ÅÊ≠¢Êåá‰ª§ÈáçÊéíÂ∫è‰ºòÂåñ</strong>„ÄÇ‰ΩøÁî® volatile ÂèòÈáèËøõË°åÂÜôÊìç‰ΩúÔºåÊ±áÁºñÊåá‰ª§Â∏¶Êúâ lock ÂâçÁºÄÔºåÁõ∏ÂΩì‰∫é‰∏Ä‰∏™<strong>ÂÜÖÂ≠òÂ±èÈöú</strong>ÔºåÁºñËØëÂô®‰∏ç‰ºöÂ∞ÜÂêéÈù¢ÁöÑÊåá‰ª§ÈáçÊéíÂà∞ÂÜÖÂ≠òÂ±èÈöú‰πãÂâç„ÄÇ</li>
</ol>
<h3 id="üåüÂ¶Ç‰Ωï‰øùËØÅÂèòÈáèÁöÑÂèØËßÅÊÄßÔºü"><a href="#üåüÂ¶Ç‰Ωï‰øùËØÅÂèòÈáèÁöÑÂèØËßÅÊÄßÔºü" class="headerlink" title="üåüÂ¶Ç‰Ωï‰øùËØÅÂèòÈáèÁöÑÂèØËßÅÊÄßÔºü"></a>üåüÂ¶Ç‰Ωï‰øùËØÅÂèòÈáèÁöÑÂèØËßÅÊÄßÔºü</h3><p>Âú® Java ‰∏≠Ôºå<code>volatile</code> ÂÖ≥ÈîÆÂ≠óÂèØ‰ª•‰øùËØÅÂèòÈáèÁöÑÂèØËßÅÊÄßÔºåÂ¶ÇÊûúÊàë‰ª¨Â∞ÜÂèòÈáèÂ£∞Êòé‰∏∫ <strong><code>volatile</code></strong> ÔºåËøôÂ∞±ÊåáÁ§∫ JVMÔºåËøô‰∏™ÂèòÈáèÊòØÂÖ±‰∫´‰∏î‰∏çÁ®≥ÂÆöÁöÑÔºåÊØèÊ¨°‰ΩøÁî®ÂÆÉÈÉΩÂà∞‰∏ªÂ≠ò‰∏≠ËøõË°åËØªÂèñ„ÄÇ</p>
<p><code>volatile</code> ÂÖ≥ÈîÆÂ≠óËÉΩ‰øùËØÅÊï∞ÊçÆÁöÑÂèØËßÅÊÄßÔºå‰ΩÜ‰∏çËÉΩ‰øùËØÅÊï∞ÊçÆÁöÑÂéüÂ≠êÊÄß„ÄÇ<code>synchronized</code> ÂÖ≥ÈîÆÂ≠ó‰∏§ËÄÖÈÉΩËÉΩ‰øùËØÅ„ÄÇ</p>
<h3 id="üåüvolatileÂÆûÁé∞ÂÜÖÂ≠òÂèØËßÅÊÄßÂéüÁêÜ"><a href="#üåüvolatileÂÆûÁé∞ÂÜÖÂ≠òÂèØËßÅÊÄßÂéüÁêÜ" class="headerlink" title="üåüvolatileÂÆûÁé∞ÂÜÖÂ≠òÂèØËßÅÊÄßÂéüÁêÜ?"></a>üåüvolatileÂÆûÁé∞ÂÜÖÂ≠òÂèØËßÅÊÄßÂéüÁêÜ?</h3><blockquote>
<p><strong>ÂØºËá¥ÂÜÖÂ≠ò‰∏çÂèØËßÅÁöÑ‰∏ªË¶ÅÂéüÂõ†Â∞±ÊòØJavaÂÜÖÂ≠òÊ®°Âûã‰∏≠ÁöÑÊú¨Âú∞ÂÜÖÂ≠òÂíå‰∏ªÂÜÖÂ≠ò‰πãÈó¥ÁöÑÂÄº‰∏ç‰∏ÄËá¥ÊâÄÂØºËá¥</strong>ÔºåÁ∫øÁ®ãAËÆøÈóÆËá™Â∑±Êú¨Âú∞ÂÜÖÂ≠òAÁöÑXÂÄºÊó∂Ôºå‰ΩÜÊ≠§Êó∂‰∏ªÂÜÖÂ≠òÁöÑXÂÄºÂ∑≤ÁªèË¢´Á∫øÁ®ãBÊâÄ‰øÆÊîπÔºåÊâÄ‰ª•Á∫øÁ®ãAÊâÄËÆøÈóÆÂà∞ÁöÑÂÄºÊòØ‰∏Ä‰∏™ËÑèÊï∞ÊçÆ„ÄÇÈÇ£Â¶Ç‰ΩïËß£ÂÜ≥ËøôÁßçÈóÆÈ¢òÂë¢Ôºü</p>
</blockquote>
<p><code>volatile</code>ÂèØ‰ª•‰øùËØÅÂÜÖÂ≠òÂèØËßÅÊÄßÁöÑÂÖ≥ÈîÆÊòØ<code>volatile</code>ÁöÑËØª&#x2F;ÂÜôÂÆûÁé∞‰∫ÜÁºìÂ≠ò‰∏ÄËá¥ÊÄßÔºåÁºìÂ≠ò‰∏ÄËá¥ÊÄßÁöÑ‰∏ªË¶ÅÂÜÖÂÆπ‰∏∫Ôºö</p>
<ul>
<li>ÊØè‰∏™Â§ÑÁêÜÂô®‰ºöÈÄöËøáÂóÖÊé¢ÊÄªÁ∫ø‰∏äÁöÑÊï∞ÊçÆÊù•Êü•ÁúãËá™Â∑±ÁöÑÊï∞ÊçÆÊòØÂê¶ËøáÊúüÔºå‰∏ÄÊó¶Â§ÑÁêÜÂô®ÂèëÁé∞Ëá™Â∑±ÁºìÂ≠òÂØπÂ∫îÁöÑÂÜÖÂ≠òÂú∞ÂùÄË¢´‰øÆÊîπÔºåÂ∞±‰ºöÂ∞ÜÂΩìÂâçÂ§ÑÁêÜÂô®ÁöÑÁºìÂ≠òËÆæ‰∏∫Êó†ÊïàÁä∂ÊÄÅ„ÄÇÊ≠§Êó∂ÔºåÂ¶ÇÊûúÂ§ÑÁêÜÂô®ÈúÄË¶ÅËé∑ÂèñËøô‰∏™Êï∞ÊçÆÈúÄÈáçÊñ∞‰ªé‰∏ªÂÜÖÂ≠òÂ∞ÜÂÖ∂ËØªÂèñÂà∞Êú¨Âú∞ÂÜÖÂ≠ò„ÄÇ</li>
<li>ÂΩìÂ§ÑÁêÜÂô®ÂÜôÊï∞ÊçÆÊó∂ÔºåÂ¶ÇÊûúÂèëÁé∞Êìç‰ΩúÁöÑÊòØÂÖ±‰∫´ÂèòÈáèÔºå‰ºöÈÄöÁü•ÂÖ∂‰ªñÂ§ÑÁêÜÂô®Â∞ÜËØ•ÂèòÈáèÁöÑÁºìÂ≠òËÆæ‰∏∫Êó†ÊïàÁä∂ÊÄÅ„ÄÇ</li>
</ul>
<p>ÈÇ£ÁºìÂ≠ò‰∏ÄËá¥ÊÄßÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢Ôºü</p>
<p>ÈÄöËøá<code>volatile</code>‰øÆÈ•∞ÁöÑÂèòÈáèÔºåÁîüÊàêÊ±áÁºñÊåá‰ª§Êó∂‰ºöÊØîÊôÆÈÄöÁöÑÂèòÈáèÂ§öÂá∫‰∏Ä‰∏™<code>Lock</code>Êåá‰ª§ÔºåËøô‰∏™<code>Lock</code>Êåá‰ª§Â∞±ÊòØ<code>volatile</code>ÂÖ≥ÈîÆÂ≠óÂèØ‰ª•‰øùËØÅÂÜÖÂ≠òÂèØËßÅÊÄßÁöÑÂÖ≥ÈîÆÔºåÂÆÉ‰∏ªË¶ÅÊúâ‰∏§‰∏™‰ΩúÁî®Ôºö</p>
<ul>
<li>Â∞ÜÂΩìÂâçÂ§ÑÁêÜÂô®ÁºìÂ≠òÁöÑÊï∞ÊçÆÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠ò„ÄÇ</li>
<li>Âà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠òÊó∂‰ºö‰ΩøÂæóÂÖ∂‰ªñÂ§ÑÁêÜÂô®ÁºìÂ≠òÁöÑËØ•ÂÜÖÂ≠òÂú∞ÂùÄÁöÑÊï∞ÊçÆÊó†Êïà„ÄÇ</li>
</ul>
<h3 id="üåüvolatileÂ¶Ç‰ΩïÂÆûÁé∞ÊúâÂ∫èÊÄß"><a href="#üåüvolatileÂ¶Ç‰ΩïÂÆûÁé∞ÊúâÂ∫èÊÄß" class="headerlink" title="üåüvolatileÂ¶Ç‰ΩïÂÆûÁé∞ÊúâÂ∫èÊÄß"></a>üåüvolatileÂ¶Ç‰ΩïÂÆûÁé∞ÊúâÂ∫èÊÄß</h3><p>‰∏∫‰∫ÜÂÆûÁé∞volatileÁöÑÂÜÖÂ≠òËØ≠‰πâÔºåÁºñËØëÂô®Âú®ÁîüÊàêÂ≠óËäÇÁ†ÅÊó∂‰ºöÈÄöËøáÊèíÂÖ•<strong>ÂÜÖÂ≠òÂ±èÈöú</strong>Êù•Á¶ÅÊ≠¢Êåá‰ª§ÈáçÊéíÂ∫è„ÄÇ</p>
<p>happens-beforeÁ≠â</p>
<h3 id="üåüas-if-serial-amp-happens-before"><a href="#üåüas-if-serial-amp-happens-before" class="headerlink" title="üåüas-if-serial &amp; happens-before"></a>üåüas-if-serial &amp; happens-before</h3><p>as-if-serial ‰øùËØÅÂçïÁ∫øÁ®ãÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûú‰∏çÂèòÔºåhappens-before ‰øùËØÅÊ≠£Á°ÆÂêåÊ≠•ÁöÑÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÁöÑÊâßË°åÁªìÊûú‰∏çÂèò„ÄÇ</p>
<p>as-if-serial ÁºñËØëÂô®Á≠â‰ºöÂØπÂéüÂßãÁöÑÁ®ãÂ∫èËøõË°åÊåá‰ª§ÈáçÊéíÂ∫èÂíå‰ºòÂåñ„ÄÇ‰ΩÜ‰∏çÁÆ°ÊÄé‰πàÈáçÊéíÂ∫èÔºåÂÖ∂ÁªìÊûúÂíåÁî®Êà∑ÂéüÂßãÁ®ãÂ∫èËæìÂá∫È¢ÑÂÆöÁªìÊûú‰∏ÄËá¥„ÄÇ</p>
<p>happens-beforeÊòØÂèØËßÅÊÄß‰∏éÊúâÂ∫èÊÄßÁöÑ‰∏ÄÂ•óËßÑÂàôÊÄªÁªìÔºåJVM‰ºöÂØπ‰ª£Á†ÅËøõË°åÁºñËØë‰ºòÂåñÔºå‰ºöÂá∫Áé∞Êåá‰ª§ÈáçÊéíÂ∫èÊÉÖÂÜµÔºå‰∏∫‰∫ÜÈÅøÂÖçÁºñËØë‰ºòÂåñÂØπÂπ∂ÂèëÁºñÁ®ãÂÆâÂÖ®ÊÄßÁöÑÂΩ±ÂìçÔºåÈúÄË¶Åhappens-beforeËßÑÂàôÂÆö‰πâ‰∏Ä‰∫õÁ¶ÅÊ≠¢ÁºñËØë‰ºòÂåñÁöÑÂú∫ÊôØÔºå‰øùËØÅÂπ∂ÂèëÁºñÁ®ãÁöÑÊ≠£Á°ÆÊÄß„ÄÇÂÖ´Â§ßËßÑÂàô</p>
<ul>
<li><p>Á®ãÂ∫èÊ¨°Â∫èËßÑÂàôÔºö‰∏Ä‰∏™Á∫øÁ®ãÂÜÖÂÜôÂú®ÂâçÈù¢ÁöÑÊìç‰ΩúÂÖàË°åÂèëÁîü‰∫éÂêéÈù¢ÁöÑ„ÄÇ</p>
</li>
<li><p>ÈîÅÂÆöËßÑÂàôÔºö unlock Êìç‰ΩúÂÖàË°åÂèëÁîü‰∫éÂêéÈù¢ÂØπÂêå‰∏Ä‰∏™ÈîÅÁöÑ lock Êìç‰Ωú„ÄÇ</p>
</li>
<li><p>volatile ËßÑÂàôÔºöÁ∫øÁ®ãÂØπ volatile ÂèòÈáèÁöÑÂÜôÔºåÂØπÊé•‰∏ãÊù•ÂÖ∂ÂÆÉÁ∫øÁ®ãÂØπËØ•ÂèòÈáèÁöÑËØªÂèØËßÅ„ÄÇ</p>
</li>
<li><p>Á∫øÁ®ãÂêØÂä®ËßÑÂàôÔºöÁ∫øÁ®ãÁöÑ start ÊñπÊ≥ïÂÖàË°åÂèëÁîü‰∫éÁ∫øÁ®ãÁöÑÊØè‰∏™Âä®‰Ωú„ÄÇ</p>
</li>
<li><p>Á∫øÁ®ã‰∏≠Êñ≠ËßÑÂàôÔºöÂØπÁ∫øÁ®ãinterrupt()ÊñπÊ≥ïÁöÑË∞ÉÁî®ÂÖàË°åÂèëÁîü‰∫éË¢´‰∏≠Êñ≠Á∫øÁ®ãÁöÑ‰ª£Á†ÅÊ£ÄÊµãÂà∞‰∏≠Êñ≠‰∫ã‰ª∂ÁöÑÂèëÁîü„ÄÇ</p>
</li>
<li><p>Á∫øÁ®ãÁªàÊ≠¢ËßÑÂàôÔºöÁ∫øÁ®ã‰∏≠ÊâÄÊúâÊìç‰ΩúÂÖàË°åÂèëÁîü‰∫éÂØπÁ∫øÁ®ãÁöÑÁªàÊ≠¢Ê£ÄÊµã„ÄÇ</p>
</li>
<li><p>ÂØπË±°ÁªàÁªìËßÑÂàôÔºöÂØπË±°ÁöÑÂàùÂßãÂåñÂÖàË°åÂèëÁîü‰∫é finalize ÊñπÊ≥ï„ÄÇ</p>
</li>
<li><p>‰º†ÈÄíÊÄßËßÑÂàôÔºöÂ¶ÇÊûúÊìç‰Ωú A ÂÖàË°åÂèëÁîü‰∫éÊìç‰Ωú BÔºåÊìç‰Ωú B ÂÖàË°åÂèëÁîü‰∫éÊìç‰Ωú CÔºåÈÇ£‰πàÊìç‰Ωú A ÂÖàË°åÂèëÁîü‰∫éÊìç‰Ωú C</p>
</li>
</ul>
<h3 id="üåüvolatileËÉΩ‰øùËØÅÂéüÂ≠êÊÄßÂêó"><a href="#üåüvolatileËÉΩ‰øùËØÅÂéüÂ≠êÊÄßÂêó" class="headerlink" title="üåüvolatileËÉΩ‰øùËØÅÂéüÂ≠êÊÄßÂêó?"></a>üåüvolatileËÉΩ‰øùËØÅÂéüÂ≠êÊÄßÂêó?</h3><p><strong><code>volatile</code> ÂÖ≥ÈîÆÂ≠óËÉΩ‰øùËØÅÂèòÈáèÁöÑÂèØËßÅÊÄß„ÄÅÊúâÂ∫èÊÄßÔºå‰ΩÜ‰∏çËÉΩ‰øùËØÅÂØπÂèòÈáèÁöÑÊìç‰ΩúÊòØÂéüÂ≠êÊÄßÁöÑ„ÄÇ</strong></p>
<p>‰∏ÄÊó¶ÈúÄË¶ÅÂØπÂèòÈáèËøõË°åËá™Â¢ûËøôÊ†∑ÁöÑÈùûÂéüÂ≠êÊìç‰ΩúÔºåÂ∞±‰∏ç‰ºö‰øùËØÅËøô‰∏™ÂèòÈáèÁöÑÂéüÂ≠êÊÄß‰∫Ü„ÄÇ</p>
<h3 id="üåüi-‰∏∫‰ªÄ‰πà‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄß"><a href="#üåüi-‰∏∫‰ªÄ‰πà‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄß" class="headerlink" title="üåüi++‰∏∫‰ªÄ‰πà‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄß?"></a>üåüi++‰∏∫‰ªÄ‰πà‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄß?</h3><p><code>i++</code> ÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™Â§çÂêàÊìç‰ΩúÔºåÂåÖÊã¨‰∏âÊ≠•Ôºö</p>
<ol>
<li>ËØªÂèñ i ÁöÑÂÄº„ÄÇ</li>
<li>ÂØπ i Âä† 1„ÄÇ</li>
<li>Â∞Ü i ÁöÑÂÄºÂÜôÂõûÂÜÖÂ≠ò„ÄÇ</li>
</ol>
<h3 id="üåüÂ¶Ç‰Ωï‰øùËØÅÂ§öÁ∫øÁ®ã‰∏ã-i-ÁªìÊûúÊ≠£Á°Æ"><a href="#üåüÂ¶Ç‰Ωï‰øùËØÅÂ§öÁ∫øÁ®ã‰∏ã-i-ÁªìÊûúÊ≠£Á°Æ" class="headerlink" title="üåüÂ¶Ç‰Ωï‰øùËØÅÂ§öÁ∫øÁ®ã‰∏ã i++ ÁªìÊûúÊ≠£Á°Æ"></a>üåüÂ¶Ç‰Ωï‰øùËØÅÂ§öÁ∫øÁ®ã‰∏ã i++ ÁªìÊûúÊ≠£Á°Æ</h3><ol>
<li>‰ΩøÁî®Âæ™ÁéØ<strong>CAS+volatile</strong>ÔºåÂÆûÁé∞ i++ÂéüÂ≠êÊìç‰ΩúÔºõ  </li>
<li>‰ΩøÁî® <strong>synchronized</strong>ÔºåÂÆûÁé∞ i++ÂéüÂ≠êÊìç‰ΩúÔºõ </li>
<li>‰ΩøÁî® <strong>LockÈîÅ</strong>Êú∫Âà∂ÔºåÂÆûÁé∞i++ÂéüÂ≠êÊìç‰ΩúÔºõ </li>
<li>‰ΩøÁî® <strong>AtomicInteger</strong>ÔºöÁî±Á°¨‰ª∂Êèê‰æõÂéüÂ≠êÊìç‰ΩúÊåá‰ª§ÂÆûÁé∞ÁöÑÔºõ</li>
<li>SemaphoreÊûÑÈÄ†ÊñπÊ≥ï‰∏≠‰º†ÂÖ•ÁöÑÂèÇÊï∞ÊòØ1ÁöÑÊó∂ÂÄôÔºåÊ≠§Êó∂Á∫øÁ®ãÂπ∂ÂèëÊï∞ÊúÄÂ§öÊòØ1‰∏™ÔºåÂç≥ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåËøôÁßçÊñπÂºè‰πüÂèØ‰ª•ÂÅöÂà∞Áé∞Âú∫‰∫íÊñ•„ÄÇ</li>
</ol>
<h3 id="üåü32‰ΩçÊú∫Âô®‰∏äÂÖ±‰∫´ÁöÑlongÂíådoubleÂèòÈáèÁöÑ‰∏∫‰ªÄ‰πàË¶ÅÁî®volatile-64‰ΩçÊú∫Âô®‰∏äÊòØÂê¶‰πüË¶ÅËÆæÁΩÆÂë¢"><a href="#üåü32‰ΩçÊú∫Âô®‰∏äÂÖ±‰∫´ÁöÑlongÂíådoubleÂèòÈáèÁöÑ‰∏∫‰ªÄ‰πàË¶ÅÁî®volatile-64‰ΩçÊú∫Âô®‰∏äÊòØÂê¶‰πüË¶ÅËÆæÁΩÆÂë¢" class="headerlink" title="üåü32‰ΩçÊú∫Âô®‰∏äÂÖ±‰∫´ÁöÑlongÂíådoubleÂèòÈáèÁöÑ‰∏∫‰ªÄ‰πàË¶ÅÁî®volatile? 64‰ΩçÊú∫Âô®‰∏äÊòØÂê¶‰πüË¶ÅËÆæÁΩÆÂë¢?"></a>üåü32‰ΩçÊú∫Âô®‰∏äÂÖ±‰∫´ÁöÑlongÂíådoubleÂèòÈáèÁöÑ‰∏∫‰ªÄ‰πàË¶ÅÁî®volatile? 64‰ΩçÊú∫Âô®‰∏äÊòØÂê¶‰πüË¶ÅËÆæÁΩÆÂë¢?</h3><p>ÂØπ‰∫é32‰ΩçÁöÑËôöÊãüÊú∫Êù•ËØ¥ÔºåÊØèÊ¨°ÂéüÂ≠êËØªÂÜôÈÉΩÊòØ32‰ΩçÁöÑÔºå‰ºöÂ∞Ü<code>long</code>Âíå<code>double</code>ÂûãÂèòÈáèÊãÜÂàÜÊàêÈ´ò32‰ΩçÂíå‰Ωé32‰ΩçÁöÑ‰∏§‰∏™Êìç‰ΩúÊù•ÊâßË°åÔºåËøôÊ†∑<code>long</code>Âíå<code>double</code>ÂûãÂèòÈáèÁöÑËØªÂÜôÂ∞±‰∏çËÉΩ‰øùËØÅÂéüÂ≠êÊÄß‰∫ÜÔºåÂõ†Ê≠§<strong>32‰ΩçÊú∫Âô®</strong>‰∏äÂÖ±‰∫´ÁöÑ<code>long</code>Âíå<code>double</code>ÂèòÈáèÁöÑÂøÖÈ°ªÂä†‰∏ä<code>volatile</code>‰øùËØÅÂÖ∂ÂéüÂ≠êÊÄß</p>
<p>64‰ΩçÁöÑ<code>long</code>ÂûãÂíå<code>double</code>ÂûãÂèòÈáèÁöÑÂèØ‰ª•‰øùËØÅÂéüÂ≠êÊÄßÔºåÂõ†Ê≠§‰∏çÁî®ËÆæÁΩÆ„ÄÇÁõÆÂâçÂêÑÁßçÂπ≥Âè∞‰∏ãÁöÑÂïÜÁî®ËôöÊãüÊú∫ÈÉΩÈÄâÊã©Êää 64 ‰ΩçÊï∞ÊçÆÁöÑËØªÂÜôÊìç‰Ωú‰Ωú‰∏∫ÂéüÂ≠êÊìç‰ΩúÊù•ÂØπÂæÖÔºåÂõ†Ê≠§Êàë‰ª¨Âú®ÁºñÂÜô‰ª£Á†ÅÊó∂‰∏ÄËà¨‰∏çÊäälong Âíå double ÂèòÈáè‰∏ìÈó®Â£∞Êòé‰∏∫ volatileÂ§öÊï∞ÊÉÖÂÜµ‰∏ã‰πüÊòØ‰∏ç‰ºöÈîôÁöÑ„ÄÇ</p>
<h3 id="üåüËØ¥‰∏ãvolatileÁöÑÂ∫îÁî®Âú∫ÊôØ"><a href="#üåüËØ¥‰∏ãvolatileÁöÑÂ∫îÁî®Âú∫ÊôØ" class="headerlink" title="üåüËØ¥‰∏ãvolatileÁöÑÂ∫îÁî®Âú∫ÊôØ?"></a>üåüËØ¥‰∏ãvolatileÁöÑÂ∫îÁî®Âú∫ÊôØ?</h3><p>‰ΩøÁî® volatile ÂøÖÈ°ªÂÖ∑Â§áÁöÑÊù°‰ª∂</p>
<ol>
<li>ÂØπÂèòÈáèÁöÑÂÜôÊìç‰Ωú‰∏ç‰æùËµñ‰∫éÂΩìÂâçÂÄº„ÄÇ</li>
<li>ËØ•ÂèòÈáèÊ≤°ÊúâÂåÖÂê´Âú®ÂÖ∑ÊúâÂÖ∂‰ªñÂèòÈáèÁöÑ‰∏çÂèòÂºè‰∏≠„ÄÇ</li>
<li>Âè™ÊúâÂú®Áä∂ÊÄÅÁúüÊ≠£Áã¨Á´ã‰∫éÁ®ãÂ∫èÂÜÖÂÖ∂‰ªñÂÜÖÂÆπÊó∂ÊâçËÉΩ‰ΩøÁî® volatile„ÄÇ</li>
</ol>
<ul>
<li>‰æãÂ≠ê 1Ôºö Âçï‰æãÊ®°Âºè</li>
<li>‰æãÂ≠ê2Ôºö volatile bean</li>
</ul>
<h3 id="üåüÂèåÈáçÊ£ÄÈ™åÈîÅ-DCL-ÂÆûÁé∞Âçï‰æãÊ®°ÂºèÁöÑÂéüÁêÜ"><a href="#üåüÂèåÈáçÊ£ÄÈ™åÈîÅ-DCL-ÂÆûÁé∞Âçï‰æãÊ®°ÂºèÁöÑÂéüÁêÜ" class="headerlink" title="üåüÂèåÈáçÊ£ÄÈ™åÈîÅ(DCL)ÂÆûÁé∞Âçï‰æãÊ®°ÂºèÁöÑÂéüÁêÜ"></a>üåüÂèåÈáçÊ£ÄÈ™åÈîÅ(DCL)ÂÆûÁé∞Âçï‰æãÊ®°ÂºèÁöÑÂéüÁêÜ</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">volatile</span> <span class="token keyword">static</span> Singleton singleton<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token function">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">public</span>  <span class="token keyword">static</span> Singleton <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment" spellcheck="true">//ÂÖàÂà§Êñ≠ÂØπË±°ÊòØÂê¶Â∑≤ÁªèÂÆû‰æãËøáÔºåÊ≤°ÊúâÂÆû‰æãÂåñËøáÊâçËøõÂÖ•Âä†ÈîÅ‰ª£Á†Å</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment" spellcheck="true">//Á±ªÂØπË±°Âä†ÈîÅ</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>Singleton<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>singleton <span class="token operator">==</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    singleton <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>‰∏∫‰ªÄ‰πàË¶ÅÂú®ÂèòÈáè <code>singleton</code> ‰πãÈó¥Âä†‰∏ä <code>volatile</code> ÂÖ≥ÈîÆÂ≠óÔºü</p>
<p>Âõ†‰∏∫ÂØπË±°ÁöÑÊûÑÈÄ†ËøáÁ®ãÂàÜ‰∏∫‰∏â‰∏™Ê≠•È™§Ôºö(<code>singleton = new Singleton();</code>)</p>
<ol>
<li>ÂàÜÈÖçÂÜÖÂ≠òÁ©∫Èó¥„Äê‰∏∫ <code>singleton</code> ÂàÜÈÖçÂÜÖÂ≠òÁ©∫Èó¥„Äë</li>
<li>ÂàùÂßãÂåñÂØπË±°„ÄêÂàùÂßãÂåñ <code>singleton</code>„Äë</li>
<li>Â∞ÜÂÜÖÂ≠òÁ©∫Èó¥ÁöÑÂú∞ÂùÄËµãÁªôÂØπË±°ÁöÑÂºïÁî®„ÄêÂ∞Ü <code>singleton</code> ÊåáÂêëÂàÜÈÖçÁöÑÂÜÖÂ≠òÂú∞ÂùÄ„Äë</li>
</ol>
<p>‰ΩÜÊòØÁî±‰∫é JVM ÂÖ∑ÊúâÊåá‰ª§ÈáçÊéíÁöÑÁâπÊÄßÔºåÊâßË°åÈ°∫Â∫èÊúâÂèØËÉΩÂèòÊàê 1-&gt;3-&gt;2„ÄÇÊåá‰ª§ÈáçÊéíÂú®ÂçïÁ∫øÁ®ãÁéØÂ¢É‰∏ã‰∏ç‰ºöÂá∫Áé∞ÈóÆÈ¢òÔºå‰ΩÜÊòØÂú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏ã‰ºöÂØºËá¥‰∏Ä‰∏™Á∫øÁ®ãËé∑ÂæóËøòÊ≤°ÊúâÂàùÂßãÂåñÁöÑÂÆû‰æã„ÄÇ</p>
<blockquote>
<p>‰æãÂ¶ÇÔºåÁ∫øÁ®ã T1 ÊâßË°å‰∫Ü 1 Âíå 3ÔºåÊ≠§Êó∂ T2 Ë∞ÉÁî® <code>getUInstance</code>() ÂêéÂèëÁé∞ <code>singleton</code> ‰∏ç‰∏∫Á©∫ÔºåÂõ†Ê≠§ËøîÂõû <code>singleton</code>Ôºå‰ΩÜÊ≠§Êó∂ <code>singleton</code> ËøòÊú™Ë¢´ÂàùÂßãÂåñ„ÄÇ</p>
</blockquote>
<h3 id="üåü‰∏∫‰ªÄ‰πàË¶ÅËøõË°åÊåá‰ª§ÈáçÊéíÔºü"><a href="#üåü‰∏∫‰ªÄ‰πàË¶ÅËøõË°åÊåá‰ª§ÈáçÊéíÔºü" class="headerlink" title="üåü‰∏∫‰ªÄ‰πàË¶ÅËøõË°åÊåá‰ª§ÈáçÊéíÔºü"></a>üåü‰∏∫‰ªÄ‰πàË¶ÅËøõË°åÊåá‰ª§ÈáçÊéíÔºü</h3><p>ËÆ°ÁÆóÊú∫Âú®ÊâßË°åÁ®ãÂ∫èÁöÑËøáÁ®ã‰∏≠ÔºåÁºñËØëÂô®ÂíåÂ§ÑÁêÜÂô®ÈÄöÂ∏∏‰ºöÂØπÊåá‰ª§ËøõË°åÈáçÊéíÂ∫èÔºåËøôÊ†∑ÂÅöÁöÑÁõÆÁöÑÊòØ‰∏∫‰∫ÜÊèêÈ´òÊÄßËÉΩ„ÄÇ</p>
<p>Êåá‰ª§ÈáçÊéíÂ∫è‰∏ÄËà¨ÂàÜ‰∏∫<strong>ÁºñËØëÂô®‰ºòÂåñÈáçÊéí</strong>„ÄÅ<strong>Êåá‰ª§Âπ∂Ë°åÈáçÊéí</strong>Âíå<strong>ÂÜÖÂ≠òÁ≥ªÁªüÈáçÊéí</strong>‰∏âÁßç„ÄÇ</p>
<ul>
<li>ÁºñËØëÂô®‰ºòÂåñÈáçÊéíÔºöÁºñËØëÂô®Âú®‰∏çÊîπÂèòÂçïÁ∫øÁ®ãÁ®ãÂ∫èËØ≠‰πâÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•ÂØπËØ≠Âè•ÁöÑÊâßË°åÈ°∫Â∫èËøõË°åÈáçÊñ∞ÊéíÂ∫è„ÄÇ</li>
<li>Êåá‰ª§Âπ∂Ë°åÈáçÊéíÔºöÁé∞‰ª£Â§ÑÁêÜÂô®Â§öÈááÁî®Êåá‰ª§Á∫ßÂπ∂Ë°åÊäÄÊúØÊù•Â∞ÜÂ§öÊù°Êåá‰ª§ÈáçÂè†ÊâßË°å„ÄÇ</li>
<li>ÂÜÖÂ≠òÁ≥ªÁªüÈáçÊéíÔºöÂ§ÑÁêÜÂô®‰ΩøÁî®ÁºìÂ≠òÂíåËØª&#x2F;ÂÜôÁºìÂÜ≤Âå∫Ôºå‰ΩøÂæóÂä†ËΩΩÂíåÂ≠òÂÇ®Áúã‰∏äÂéªÂÉèÊòØÂú®‰π±Â∫èÊâßË°å„ÄÇ</li>
</ul>
<p>Ëøô‰∏âÁßçÊåá‰ª§ÈáçÊéíËØ¥Êòé‰∫Ü‰∏Ä‰∏™ÈóÆÈ¢òÔºå<strong>Êåá‰ª§ÈáçÊéíÂú®ÂçïÁ∫øÁ®ã‰∏ãÂèØ‰ª•ÊèêÈ´ò‰ª£Á†ÅÁöÑÊÄßËÉΩÔºå‰ΩÜÂú®Â§öÁ∫øÁ®ã‰∏ã‰ºöÁ†¥ÂùèÁ®ãÂ∫èÁöÑËØ≠‰πâ</strong></p>
<h2 id="‚ù∏final"><a href="#‚ù∏final" class="headerlink" title="‚ù∏final"></a>‚ù∏final</h2><h3 id="üåü-finalÂü∫Á°Ä‰ΩøÁî®"><a href="#üåü-finalÂü∫Á°Ä‰ΩøÁî®" class="headerlink" title="üåü finalÂü∫Á°Ä‰ΩøÁî®"></a>üåü finalÂü∫Á°Ä‰ΩøÁî®</h3><ul>
<li><p><code>final</code> ‰øÆÈ•∞ÁöÑÁ±ª‰∏çËÉΩË¢´ÁªßÊâø</p>
</li>
<li><p><code>final</code> ‰øÆÈ•∞ÁöÑÊñπÊ≥ï‰∏çËÉΩË¢´ÈáçÂÜô</p>
</li>
<li><p><code>final</code> ‰øÆÈ•∞ÁöÑÂèòÈáèÊòØÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂàôÂÄº‰∏çËÉΩÊîπÂèò</p>
</li>
<li><p><code>final</code> ‰øÆÈ•∞ÁöÑÂèòÈáèÊòØÂºïÁî®Á±ªÂûãÂàô‰∏çËÉΩÂÜçÊåáÂêëÂÖ∂‰ªñÂØπË±°</p>
</li>
</ul>
<p> finalÊñπÊ≥ïÂèØ‰ª•Ë¢´ÈáçËΩΩÂêó? ÂèØ‰ª•</p>
<p>Áà∂Á±ªÁöÑfinalÊñπÊ≥ïËÉΩ‰∏çËÉΩÂ§üË¢´Â≠êÁ±ªÈáçÂÜô? ‰∏çÂèØ‰ª•</p>
<p>Â¶ÇÊûúÂ≠óÊÆµÁî±staticÂíåfinal‰øÆÈ•∞Ôºå‰ªÖËÉΩÂú®Â£∞ÊòéÊó∂ËµãÂÄºÊàñÂ£∞ÊòéÂêéÂú®ÈùôÊÄÅ‰ª£Á†ÅÂùó‰∏≠ËµãÂÄºÔºåÂõ†‰∏∫ËØ•Â≠óÊÆµÂ±û‰∫éËøô‰∏™Á±ª„ÄÇ</p>
<h3 id="üåüÊâÄÊúâfinal‰øÆÈ•∞ÁöÑÂ≠óÊÆµÈÉΩÊòØÁºñËØëÊúüÂ∏∏ÈáèÂêó"><a href="#üåüÊâÄÊúâfinal‰øÆÈ•∞ÁöÑÂ≠óÊÆµÈÉΩÊòØÁºñËØëÊúüÂ∏∏ÈáèÂêó" class="headerlink" title="üåüÊâÄÊúâfinal‰øÆÈ•∞ÁöÑÂ≠óÊÆµÈÉΩÊòØÁºñËØëÊúüÂ∏∏ÈáèÂêó"></a>üåüÊâÄÊúâfinal‰øÆÈ•∞ÁöÑÂ≠óÊÆµÈÉΩÊòØÁºñËØëÊúüÂ∏∏ÈáèÂêó</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">//ÁºñËØëÊúüÂ∏∏Èáè</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> J <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//ÈùûÁºñËØëÊúüÂ∏∏Èáè</span>
    Random r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token keyword">int</span> k <span class="token operator">=</span> r<span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>‰∏çÊòØÊâÄÊúâÁöÑfinal‰øÆÈ•∞ÁöÑÂ≠óÊÆµÈÉΩÊòØÁºñËØëÊúüÂ∏∏ÈáèÔºåkÁöÑÂÄºÁî±ÈöèÊú∫Êï∞ÂØπË±°ÂÜ≥ÂÆöÔºåÂè™ÊòØkÁöÑÂÄºÂú®Ë¢´ÂàùÂßãÂåñÂêéÊó†Ê≥ïË¢´Êõ¥Êîπ„ÄÇ</p>
<h3 id="üåüËØ¥ËØ¥finalÁ±ªÂûãÁöÑÁ±ªÂ¶Ç‰ΩïÊãìÂ±ï"><a href="#üåüËØ¥ËØ¥finalÁ±ªÂûãÁöÑÁ±ªÂ¶Ç‰ΩïÊãìÂ±ï" class="headerlink" title="üåüËØ¥ËØ¥finalÁ±ªÂûãÁöÑÁ±ªÂ¶Ç‰ΩïÊãìÂ±ï?"></a>üåüËØ¥ËØ¥finalÁ±ªÂûãÁöÑÁ±ªÂ¶Ç‰ΩïÊãìÂ±ï?</h3><blockquote>
<p>ÊØîÂ¶ÇStringÊòØfinalÁ±ªÂûãÔºåÊàë‰ª¨ÊÉ≥ÂÜô‰∏™MyStringÂ§çÁî®ÊâÄÊúâString‰∏≠ÊñπÊ≥ïÔºåÂêåÊó∂Â¢ûÂä†‰∏Ä‰∏™Êñ∞ÁöÑtoMyString()ÁöÑÊñπÊ≥ïÔºåÂ∫îËØ•Â¶Ç‰ΩïÂÅö?</p>
</blockquote>
<p>ËÆæËÆ°Ê®°Âºè‰∏≠ÊúÄÈáçË¶ÅÁöÑ‰∏§ÁßçÂÖ≥Á≥ªÔºå‰∏ÄÁßçÊòØÁªßÊâø&#x2F;ÂÆûÁé∞ÔºõÂè¶Â§ñ‰∏ÄÁßçÊòØÁªÑÂêàÂÖ≥Á≥ª„ÄÇÊâÄ‰ª•ÂΩìÈÅáÂà∞‰∏çËÉΩÁî®ÁªßÊâøÁöÑ(final‰øÆÈ•∞ÁöÑÁ±ª),Â∫îËØ•ËÄÉËôëÁî®ÁªÑÂêà, Â¶Ç‰∏ã‰ª£Á†ÅÂ§ßÊ¶ÇÂÜô‰∏™ÁªÑÂêàÂÆûÁé∞ÁöÑÊÑèÊÄùÔºö</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">MyString</span><span class="token punctuation">{</span>

    <span class="token keyword">private</span> String innerString<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">// ...init &amp; other methods</span>

    <span class="token comment" spellcheck="true">// ÊîØÊåÅËÄÅÁöÑÊñπÊ≥ï</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> innerString<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ÈÄöËøáinnerStringË∞ÉÁî®ËÄÅÁöÑÊñπÊ≥ï</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">// Ê∑ªÂä†Êñ∞ÊñπÊ≥ï</span>
    <span class="token keyword">public</span> String <span class="token function">toMyString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">//...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="üåüËØ¥ËØ¥finalÁöÑÂéüÁêÜ"><a href="#üåüËØ¥ËØ¥finalÁöÑÂéüÁêÜ" class="headerlink" title="üåüËØ¥ËØ¥finalÁöÑÂéüÁêÜ?"></a>üåüËØ¥ËØ¥finalÁöÑÂéüÁêÜ?</h3><h3 id="üåüString‰∏∫‰ªÄ‰πà‰∏çÂèØÂèò"><a href="#üåüString‰∏∫‰ªÄ‰πà‰∏çÂèØÂèò" class="headerlink" title="üåüString‰∏∫‰ªÄ‰πà‰∏çÂèØÂèò"></a>üåüString‰∏∫‰ªÄ‰πà‰∏çÂèØÂèò</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">String</span> <span class="token keyword">implements</span> <span class="token class-name">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>Serializable</span><span class="token punctuation">,</span> Comparable<span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">,</span> CharSequence <span class="token punctuation">{</span> 		<span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">char</span> value<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">//...</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<ul>
<li><code>String</code> ÂÜÖÈÉ®Áî® <code>private final</code> ‰øÆÈ•∞ <code>char</code> Êï∞ÁªÑÔºåÂπ∂‰∏î<code>String</code> Á±ªÊ≤°ÊúâÊèê‰æõÊö¥Èú≤‰øÆÊîπËøô‰∏™Êï∞ÁªÑÁöÑÊñπÊ≥ï„ÄÇ<ul>
<li>Áî® <code>final</code> ‰øÆÈ•∞ <code>char</code> Êï∞ÁªÑÔºåËøô‰∏™Êï∞ÁªÑÊó†Ê≥ïË¢´‰øÆÊîπ„ÄÇ(<strong>‰ªÖ‰ªÖÊòØÊåáÂºïÁî®Âú∞ÂùÄ‰∏çÂèØË¢´‰øÆÊîπ</strong>Ôºå<strong>Âπ∂ÈùûÊòØvalue[]Ëøô‰∏™Êï∞ÁªÑÁöÑÂÜÖÂÆπ‰∏çÂèØ‰øÆÊîπ</strong>)</li>
<li>Áî® <code>private</code> ‰øÆÈ•∞ <code>char</code> Êï∞ÁªÑÔºå‰∏î<code>String</code> Á±ª‰∏çÊèê‰æõ‰øÆÊîπËøô‰∏™Êï∞ÁªÑÁöÑÊñπÊ≥ïÔºåÊâÄ‰ª•ÂàùÂßãÂåñ‰πãÂêéÊàë‰ª¨Ê≤°Ê≥ïÊîπÂèòÊï∞ÁªÑÁöÑÂÜÖÂÆπ„ÄÇ</li>
</ul>
</li>
<li><code>String</code> Á±ªË¢´ <code>final</code> ‰øÆÈ•∞ÂØºËá¥ÂÖ∂‰∏çËÉΩË¢´ÁªßÊâøÔºåËøõËÄåÈÅøÂÖç‰∫ÜÂ≠êÁ±ªÁ†¥Âùè <code>String</code> ‰∏çÂèØÂèò„ÄÇ</li>
</ul>
<p>Java ‰ΩúËÄÖÂú® String ÁöÑÊâÄÊúâÊñπÊ≥ïÈáåÈù¢ÔºåÈÉΩÂæàÂ∞èÂøÉÂú∞ÈÅøÂÖçÂéª‰øÆÊîπ‰∫Ü char Êï∞ÁªÑ‰∏≠ÁöÑÊï∞ÊçÆÔºå<strong>Ê∂âÂèäÂà∞ÂØπ char Êï∞ÁªÑ‰∏≠Êï∞ÊçÆËøõË°å‰øÆÊîπÁöÑÊìç‰ΩúÂÖ®ÈÉ®ÈÉΩ‰ºöÈáçÊñ∞ÂàõÂª∫‰∏Ä‰∏™ String ÂØπË±°</strong>„ÄÇÊØîÂ¶Ç substring ÊñπÊ≥ï</p>
<p>Â¶Ç‰ΩïËÆ©StringÂèØÂèò</p>
<p>valueÊòØÁßÅÊúâÂ±ûÊÄßÔºå‰Ω†Âè™ÈúÄË¶Å‰∏ÄÁßçÊñπÊ≥ïËÆøÈóÆÁ±ªÁöÑÁßÅÊúâÂ±ûÊÄßÂç≥ÂèØ„ÄÇ‰ΩøÁî®ÂèçÂ∞ÑÂèØ‰ª•Áõ¥Êé•‰øÆÊîπvalueÊï∞ÁªÑ‰∏≠ÁöÑÂÜÖÂÆπÔºåÂΩìÁÑ∂Âª∫ËÆÆ‰∏çË¶ÅËøôÊ†∑ÂÅö„ÄÇ</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/MwaZqbXw9W0S30mXljQhuA">ÈòøÈáå‰∫ë‰∫åÈù¢Ôºö String ‰∏∫‰ªÄ‰πà‰∏çÂèØÂèòÔºü</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_52173163/article/details/125227267"> ‰Ω†ÁúüÁöÑÁü•ÈÅìString‰∏çÂèØÂèòÁöÑÂéüÂõ†ÂêóÔºü</a></p>
<h1 id="‚ë¢Êó†ÈîÅ"><a href="#‚ë¢Êó†ÈîÅ" class="headerlink" title="‚ë¢Êó†ÈîÅ"></a>‚ë¢Êó†ÈîÅ</h1><h2 id="‚ù∂CAS"><a href="#‚ù∂CAS" class="headerlink" title="‚ù∂CAS"></a>‚ù∂CAS</h2><h3 id="üåü‰ªÄ‰πàÊòØCASÔºü"><a href="#üåü‰ªÄ‰πàÊòØCASÔºü" class="headerlink" title="üåü‰ªÄ‰πàÊòØCASÔºü"></a>üåü‰ªÄ‰πàÊòØCASÔºü</h3><p>CASÂÖ®Áß∞<code>Compare And Swap</code>ÔºåÊØîËæÉ‰∏é‰∫§Êç¢ÔºåJava‰∏≠ÂèØ‰ª•ÈÄöËøáCASÊìç‰ΩúÊù•‰øùËØÅÂéüÂ≠êÊÄßÔºåÊòØ‰πêËßÇÈîÅÁöÑ‰∏ªË¶ÅÂÆûÁé∞ÊñπÂºè„ÄÇCASÂú®‰∏ç‰ΩøÁî®ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÂÆûÁé∞Â§öÁ∫øÁ®ã‰πãÈó¥ÁöÑÂèòÈáèÂêåÊ≠•„ÄÇ<code>ReentrantLock</code>ÂÜÖÈÉ®ÁöÑAQSÂíåÂéüÂ≠êÁ±ªÂÜÖÈÉ®ÈÉΩ‰ΩøÁî®‰∫ÜCAS„ÄÇ</p>
<p>CASÁÆóÊ≥ïÊ∂âÂèäÂà∞‰∏â‰∏™Êìç‰ΩúÊï∞Ôºö</p>
<ul>
<li>ÈúÄË¶ÅËØªÂÜôÁöÑÂÜÖÂ≠òÂÄºVÔºàÂÜÖÂ≠òÂÄºÔºâ„ÄÇ</li>
<li>ËøõË°åÊØîËæÉÁöÑÂÄºAÔºàÊóßÂÄºÔºâ„ÄÇ</li>
<li>Ë¶ÅÂÜôÂÖ•ÁöÑÊñ∞ÂÄºBÔºàÊñ∞ÂÄºÔºâ„ÄÇ</li>
</ul>
<p>Âè™ÊúâÂΩìVÁöÑÂÄºÁ≠â‰∫éAÊó∂ÔºåÊâç‰ºö‰ΩøÁî®ÂéüÂ≠êÊñπÂºèÁî®Êñ∞ÂÄºBÊù•Êõ¥Êñ∞VÁöÑÂÄºÔºåÂê¶Âàô‰ºöÁªßÁª≠ÈáçËØïÁõ¥Âà∞ÊàêÂäüÊõ¥Êñ∞ÂÄº„ÄÇ</p>
<p>ÂΩìÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂Êìç‰Ωú‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÊó∂ÔºåÂè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•ÂØπÂèòÈáèËøõË°åÊàêÂäüÊõ¥Êñ∞ÔºåÂÖ∂‰ªñÁ∫øÁ®ãÂùá‰ºöÂ§±Ë¥•Ôºå‰ΩÜÊòØÂ§±Ë¥•Âπ∂‰∏ç‰ºöË¢´ÊåÇËµ∑ÔºåËøõË°åÂÜçÊ¨°Â∞ùËØïÔºå‰πüÂ∞±ÊòØËá™Êóã„ÄÇJava‰∏≠ÁöÑ<strong>Ëá™ÊóãÈîÅ</strong>Â∞±ÊòØÂà©Áî®CASÊù•ÂÆûÁé∞ÁöÑ„ÄÇ</p>
<p>Ëá™ÊóãÈîÅÁöÑÂÆö‰πâÔºöÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂ∞ùËØïÂéªËé∑ÂèñÊüê‰∏ÄÊääÈîÅÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúËøô‰∏™ÈîÅÊ≠§Êó∂Â∑≤ÁªèË¢´Âà´‰∫∫Ëé∑Âèñ(Âç†Áî®)ÔºåÈÇ£‰πàÊ≠§Á∫øÁ®ãÂ∞±Êó†Ê≥ïËé∑ÂèñÂà∞ËøôÊääÈîÅÔºåËØ•Á∫øÁ®ãÂ∞Ü‰ºöÁ≠âÂæÖÔºåÈó¥Èöî‰∏ÄÊÆµÊó∂Èó¥Âêé‰ºöÂÜçÊ¨°Â∞ùËØïËé∑Âèñ„ÄÇ</p>
<h3 id="üåüCASÂ≠òÂú®ÁöÑÈóÆÈ¢òÂèä‰ºòÁÇπ"><a href="#üåüCASÂ≠òÂú®ÁöÑÈóÆÈ¢òÂèä‰ºòÁÇπ" class="headerlink" title="üåüCASÂ≠òÂú®ÁöÑÈóÆÈ¢òÂèä‰ºòÁÇπ"></a>üåüCASÂ≠òÂú®ÁöÑÈóÆÈ¢òÂèä‰ºòÁÇπ</h3><blockquote>
<p>ÂÖ∂‰∏≠ABAÈóÆÈ¢òÊòØÈù¢ËØï‰∏≠ÊØîËæÉÂ∏∏ËßÅÁöÑÈóÆÈ¢ò</p>
</blockquote>
<ul>
<li><strong>ABAÈóÆÈ¢ò</strong></li>
</ul>
<p>Âú®CASÁöÑÁÆóÊ≥ïÊµÅÁ®ã‰∏≠ÔºåÈ¶ñÂÖàË¶ÅÂÖàÊØîËæÉVÁöÑÂÄºÂíåAÁöÑÂÄºÔºåÂ¶ÇÊûúÁõ∏Á≠âÂàôËøõË°åÊõ¥Êñ∞„ÄÇ</p>
<p>ABA ÈóÆÈ¢òÔºöÂΩìËøõË°åËé∑Âèñ‰∏ªÂÜÖÂ≠òÂÄºÊó∂ÔºåËØ•ÂÜÖÂ≠òÂÄºÂú®ÂÜôÂÖ•‰∏ªÂÜÖÂ≠òÊó∂Â∑≤ÁªèË¢´‰øÆÊîπ‰∫Ü N Ê¨°Ôºå‰ΩÜÊòØÊúÄÁªàÂèàÊîπÊàêÂéüÊù•ÁöÑÂÄº„ÄÇÂç≥ÂÖ∂‰ªñÁ∫øÁ®ãÂÖàÊää A ÊîπÊàê B ÂèàÊîπÂõû AÔºå‰∏ªÁ∫øÁ®ã<strong>‰ªÖËÉΩÂà§Êñ≠Âá∫ÂÖ±‰∫´ÂèòÈáèÁöÑÂÄº‰∏éÊúÄÂàùÂÄº A ÊòØÂê¶Áõ∏Âêå</strong>Ôºå‰∏çËÉΩÊÑüÁü•Âà∞ËøôÁßç‰ªé A Êîπ‰∏∫ B Âèà ÊîπÂõû A ÁöÑÊÉÖÂÜµÔºåËøôÊó∂ CAS ËôΩÁÑ∂ÊàêÂäüÔºå‰ΩÜÊòØËøáÁ®ãÂ≠òÂú®ÈóÆÈ¢ò„ÄÇ</p>
<p>ABA ÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÂºèÔºöABA ÁöÑËß£ÂÜ≥ÊñπÊ≥ï‰πüÂæàÁÆÄÂçïÔºåÂ∞±ÊòØÂà©Áî®<strong>ÁâàÊú¨Âè∑</strong>„ÄÇÁªôÂèòÈáèÂä†‰∏ä‰∏Ä‰∏™ÁâàÊú¨Âè∑ÔºåÊØèÊ¨°ÂèòÈáèÊõ¥Êñ∞ÁöÑÊó∂ÂÄôÂ∞±ÊääÁâàÊú¨Âè∑Âä†1ÔºåËøôÊ†∑Âç≥‰Ωø ÊóßÂÄºA ÁöÑ‰ªé A‚Äî&gt;B‚Äî&gt;AÔºåÁâàÊú¨Âè∑‰πüÂèëÁîü‰∫ÜÂèòÂåñÔºåËøôÊ†∑Â∞±Ëß£ÂÜ≥‰∫ÜCASÂá∫Áé∞ÁöÑABAÈóÆÈ¢ò„ÄÇÂü∫‰∫éCASÁöÑ‰πêËßÇÈîÅ‰πüÊòØËøô‰∏™ÂÆûÁé∞ÂéüÁêÜ„ÄÇ</p>
<ul>
<li><strong>Âæ™ÁéØÊó∂Èó¥ËøáÈïøÂØºËá¥ÂºÄÈîÄÂ§™Â§ß</strong></li>
</ul>
<p>CASËá™ÊóãÊó∂Èó¥ËøáÈïø‰ºöÁªôCPUÂ∏¶Êù•ÈùûÂ∏∏Â§ßÁöÑÂºÄÈîÄÔºåÂú®JUC‰∏≠Êúâ‰∫õÂú∞ÊñπÂ∞±ÈôêÂà∂‰∫ÜCASËá™ÊóãÁöÑÊ¨°Êï∞Ôºå‰æãÂ¶ÇBlockingQueueÁöÑSynchronousQueue„ÄÇ</p>
<ul>
<li><strong>Âè™ËÉΩ‰øùËØÅ‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÁöÑÂéüÂ≠êÊìç‰Ωú</strong></li>
</ul>
<p>Âú®Êìç‰Ωú‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèÊó∂ÔºåÂèØ‰ª•ÈÄöËøáCASÁöÑÊñπÂºè‰øùËØÅÊìç‰ΩúÁöÑÂéüÂ≠êÊÄßÔºå‰ΩÜÂ¶ÇÊûúÂØπÂ§ö‰∏™ÂÖ±‰∫´ÂèòÈáèËøõË°åÊìç‰ΩúÊó∂ÔºåCASÂàôÊó†Ê≥ï‰øùËØÅÊìç‰ΩúÁöÑÂéüÂ≠êÊÄßÔºåËøôÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÁî®ÈîÅ‰∫Ü„ÄÇ‰ªéJava1.5ÂºÄÂßãJDKÊèê‰æõ‰∫Ü<strong>AtomicReference</strong>Á±ªÊù•‰øùËØÅÂºïÁî®ÂØπË±°‰πãÈó¥ÁöÑÂéüÂ≠êÊÄßÔºå‰Ω†ÂèØ‰ª•ÊääÂ§ö‰∏™ÂèòÈáèÊîæÂú®‰∏Ä‰∏™ÂØπË±°ÈáåÊù•ËøõË°åCASÊìç‰Ωú„ÄÇ</p>
<p>ÈÇ£‰πàCASÊúâ‰ªÄ‰πà‰ºòÁÇπÂë¢ÔºüÂú®Âπ∂ÂèëÈáè‰∏çÊòØÂæàÂ§ßÊó∂ÊèêÈ´òÊïàÁéá„ÄÇ </p>
<h3 id="üåüËØ¥‰∏ãÂØπÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅÁöÑÁêÜËß£Ôºü"><a href="#üåüËØ¥‰∏ãÂØπÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅÁöÑÁêÜËß£Ôºü" class="headerlink" title="üåüËØ¥‰∏ãÂØπÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅÁöÑÁêÜËß£Ôºü"></a>üåüËØ¥‰∏ãÂØπÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅÁöÑÁêÜËß£Ôºü</h3><ul>
<li><strong>ÊÇ≤ËßÇÈîÅ</strong></li>
</ul>
<p>ÊÄªÊòØÂÅáËÆæÊúÄÂùèÁöÑÊÉÖÂÜµÔºåÊØèÊ¨°ÂéªÊìç‰ΩúÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩËÆ§‰∏∫Âà´‰∫∫‰ºö‰øÆÊîπÔºåÊâÄ‰ª•ÊØèÊ¨°Âú®ÊãøÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩ‰ºö‰∏äÈîÅÔºåËøôÊ†∑Âà´‰∫∫ÊÉ≥ÊãøËøô‰∏™Êï∞ÊçÆÂ∞±‰ºöÈòªÂ°ûÁõ¥Âà∞ÂÆÉÊãøÂà∞ÈîÅÔºàÂÖ±‰∫´ËµÑÊ∫êÊØèÊ¨°Âè™Áªô‰∏Ä‰∏™Á∫øÁ®ã‰ΩøÁî®ÔºåÂÖ∂ÂÆÉÁ∫øÁ®ãÈòªÂ°ûÔºåÁî®ÂÆåÂêéÂÜçÊääËµÑÊ∫êËΩ¨ËÆ©ÁªôÂÖ∂ÂÆÉÁ∫øÁ®ãÔºâ„ÄÇ</p>
<p>‰º†ÁªüÁöÑÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÈáåËæπÂ∞±Áî®Âà∞‰∫ÜÂæàÂ§öËøôÁßçÈîÅÊú∫Âà∂ÔºåÊØîÂ¶ÇÔºöË°åÈîÅ„ÄÅË°®ÈîÅ„ÄÅËØªÈîÅ„ÄÅÂÜôÈîÅÁ≠âÔºåÈÉΩÊòØÂú®ÂÅöÊìç‰Ωú‰πãÂâçÂÖà‰∏äÈîÅ„ÄÇJava ‰∏≠ synchronized Âíå ReentrantLock Á≠âÁã¨Âç†ÈîÅÂ∞±ÊòØÊÇ≤ËßÇÈîÅÊÄùÊÉ≥ÁöÑÂÆûÁé∞„ÄÇ</p>
<ul>
<li><strong>‰πêËßÇÈîÅ</strong></li>
</ul>
<p>ÊÄªÊòØÂÅáËÆæÊúÄÂ•ΩÁöÑÊÉÖÂÜµÔºåÊØèÊ¨°ÂéªÊìç‰ΩúÊï∞ÊçÆÁöÑÊó∂ÂÄôÈÉΩËÆ§‰∏∫Âà´‰∫∫‰∏ç‰ºö‰øÆÊîπÔºåÊâÄ‰ª•‰∏ç‰ºö‰∏äÈîÅÔºå‰ΩÜÊòØÂú®Êõ¥Êñ∞ÁöÑÊó∂ÂÄô‰ºöÂà§Êñ≠‰∏Ä‰∏ãÂú®Ê≠§ÊúüÈó¥Âà´‰∫∫ÊúâÊ≤°ÊúâÂéªÊõ¥Êñ∞Ëøô‰∏™Êï∞ÊçÆÔºåÂèØ‰ª•‰ΩøÁî®ÁâàÊú¨Âè∑Êú∫Âà∂Âíå CAS ÁÆóÊ≥ïÂÆûÁé∞„ÄÇ</p>
<p>‰πêËßÇÈîÅÈÄÇÁî®‰∫éÂ§öËØªÁöÑÂ∫îÁî®Á±ªÂûãÔºåËøôÊ†∑ÂèØ‰ª•ÊèêÈ´òÂêûÂêêÈáèÔºåÂÉèÊï∞ÊçÆÂ∫ìÊèê‰æõÁöÑÁ±ª‰ºº‰∫é write_condition Êú∫Âà∂ÔºåÂÖ∂ÂÆûÈÉΩÊòØÊèê‰æõÁöÑ‰πêËßÇÈîÅ„ÄÇÂú® Java ‰∏≠ÁöÑÂéüÂ≠êÂèòÈáèÁ±ªÂ∞±ÊòØ‰ΩøÁî®‰∫Ü‰πêËßÇÈîÅÁöÑ‰∏ÄÁßçÂÆûÁé∞ÊñπÂºè CAS ÂÆûÁé∞ÁöÑ„ÄÇ</p>
<ul>
<li><strong>‰∏§ÁßçÈîÅÁöÑ‰ΩøÁî®Âú∫ÊôØ</strong></li>
</ul>
<p>‰∏§ÁßçÈîÅÂêÑÊúâ‰ºòÁº∫ÁÇπÔºå‰∏çÂèØËÆ§‰∏∫‰∏ÄÁßçÂ•Ω‰∫éÂè¶‰∏ÄÁßçÔºå</p>
<ul>
<li><strong>ÊÇ≤ËßÇÈîÅÈÄÇÂêàÂÜôÊìç‰ΩúÂ§öÁöÑÂú∫ÊôØ</strong>ÔºåÂÖàÂä†ÈîÅÂèØ‰ª•‰øùËØÅÂÜôÊìç‰ΩúÊó∂Êï∞ÊçÆÊ≠£Á°Æ„ÄÇ</li>
<li><strong>‰πêËßÇÈîÅÈÄÇÂêàËØªÊìç‰ΩúÂ§öÁöÑÂú∫ÊôØ</strong>Ôºå‰∏çÂä†ÈîÅÁöÑÁâπÁÇπËÉΩÂ§ü‰ΩøÂÖ∂ËØªÊìç‰ΩúÁöÑÊÄßËÉΩÂ§ßÂπÖÊèêÂçá„ÄÇ</li>
</ul>
<h3 id="üåü‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÁöÑÂå∫Âà´ÂèØ‰ª•ËØ¥‰∏Ä‰∏ãÂêóÔºü"><a href="#üåü‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÁöÑÂå∫Âà´ÂèØ‰ª•ËØ¥‰∏Ä‰∏ãÂêóÔºü" class="headerlink" title="üåü‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÁöÑÂå∫Âà´ÂèØ‰ª•ËØ¥‰∏Ä‰∏ãÂêóÔºü"></a>üåü‰πêËßÇÈîÅÂíåÊÇ≤ËßÇÈîÅÁöÑÂå∫Âà´ÂèØ‰ª•ËØ¥‰∏Ä‰∏ãÂêóÔºü</h3><p>ÊÇ≤ËßÇÈîÅÔºå<strong>ÊØèÊ¨°ËÆøÈóÆËµÑÊ∫êÈÉΩ‰ºöÂä†ÈîÅ</strong>ÔºåÊâßË°åÂÆåÂêåÊ≠•‰ª£Á†ÅÈáäÊîæÈîÅÔºå<code>synchronized</code>Âíå<code>ReentrantLock</code>Â±û‰∫éÊÇ≤ËßÇÈîÅ„ÄÇ</p>
<p>‰πêËßÇÈîÅÔºå<strong>‰∏ç‰ºöÈîÅÂÆöËµÑÊ∫ê</strong>ÔºåÊâÄÊúâÁöÑÁ∫øÁ®ãÈÉΩËÉΩËÆøÈóÆÂπ∂‰øÆÊîπÂêå‰∏Ä‰∏™ËµÑÊ∫êÔºåÂ¶ÇÊûúÊ≤°ÊúâÂÜ≤Á™ÅÂ∞±‰øÆÊîπÊàêÂäüÂπ∂ÈÄÄÂá∫ÔºåÂê¶ÂàôÂ∞±‰ºöÁªßÁª≠Âæ™ÁéØÂ∞ùËØï„ÄÇ‰πêËßÇÈîÅÊúÄÂ∏∏ËßÅÁöÑÂÆûÁé∞Â∞±ÊòØ<code>CAS</code>„ÄÇ</p>
<h3 id="üåü‰πêËßÇÈîÅÂ∏∏ËßÅÁöÑ‰∏§ÁßçÂÆûÁé∞ÊñπÂºèÊòØ‰ªÄ‰πàÔºü"><a href="#üåü‰πêËßÇÈîÅÂ∏∏ËßÅÁöÑ‰∏§ÁßçÂÆûÁé∞ÊñπÂºèÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="üåü‰πêËßÇÈîÅÂ∏∏ËßÅÁöÑ‰∏§ÁßçÂÆûÁé∞ÊñπÂºèÊòØ‰ªÄ‰πàÔºü"></a>üåü‰πêËßÇÈîÅÂ∏∏ËßÅÁöÑ‰∏§ÁßçÂÆûÁé∞ÊñπÂºèÊòØ‰ªÄ‰πàÔºü</h3><p>‰πêËßÇÈîÅ‰∏ÄËà¨‰ºö‰ΩøÁî®ÁâàÊú¨Âè∑Êú∫Âà∂ÊàñËÄÖ CAS ÁÆóÊ≥ïÂÆûÁé∞„ÄÇ</p>
<ul>
<li><p><strong>ÁâàÊú¨Âè∑Êú∫Âà∂</strong></p>
<p>‰∏ÄËà¨ÊòØÂú®Êï∞ÊçÆË°®‰∏≠Âä†‰∏ä‰∏Ä‰∏™Êï∞ÊçÆÁâàÊú¨Âè∑ version Â≠óÊÆµÔºåË°®Á§∫Êï∞ÊçÆË¢´‰øÆÊîπÁöÑÊ¨°Êï∞ÔºåÂΩìÊï∞ÊçÆË¢´‰øÆÊîπÊó∂Ôºåversion ÂÄº‰ºöÂä† 1„ÄÇÂΩìÁ∫øÁ®ã A Ë¶ÅÊõ¥Êñ∞Êï∞ÊçÆÂÄºÊó∂ÔºåÂú®ËØªÂèñÊï∞ÊçÆÁöÑÂêåÊó∂‰πü‰ºöËØªÂèñ version ÂÄºÔºåÂú®Êèê‰∫§Êõ¥Êñ∞Êó∂ÔºåËã•ÂàöÊâçËØªÂèñÂà∞ÁöÑ version ÂÄº‰∏∫ÂΩìÂâçÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑ version ÂÄºÁõ∏Á≠âÊó∂ÊâçÊõ¥Êñ∞ÔºåÂê¶ÂàôÈáçËØïÊõ¥Êñ∞Êìç‰ΩúÔºåÁõ¥Âà∞Êõ¥Êñ∞ÊàêÂäü„ÄÇ</p>
</li>
<li><p><strong>CAS ÁÆóÊ≥ï</strong></p>
<p>Âç≥ compare and swapÔºàÊØîËæÉ‰∏é‰∫§Êç¢ÔºâÔºåÊòØ‰∏ÄÁßçÊúâÂêçÁöÑÊó†ÈîÅÁÆóÊ≥ï„ÄÇÊó†ÈîÅÁºñÁ®ãÔºåÂç≥‰∏ç‰ΩøÁî®ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÂÆûÁé∞Â§öÁ∫øÁ®ã‰πãÈó¥ÁöÑÂèòÈáèÂêåÊ≠•Ôºå‰πüÂ∞±ÊòØÂú®Ê≤°ÊúâÁ∫øÁ®ãË¢´ÈòªÂ°ûÁöÑÊÉÖÂÜµ‰∏ãÂÆûÁé∞ÂèòÈáèÁöÑÂêåÊ≠•ÔºåÊâÄ‰ª•‰πüÂè´ÈùûÈòªÂ°ûÂêåÊ≠•ÔºàNon-blocking SynchronizationÔºâ„ÄÇCAS ÁÆóÊ≥ïÊ∂âÂèäÂà∞‰∏â‰∏™Êìç‰ΩúÊï∞ÔºöÈúÄË¶ÅËØªÂÜôÁöÑÂÜÖÂ≠òÂÄº V„ÄÅËøõË°åÊØîËæÉÁöÑÂÄº A„ÄÅÊãüÂÜôÂÖ•ÁöÑÊñ∞ÂÄº B</p>
</li>
</ul>
<p>ÂΩì‰∏î‰ªÖÂΩì V ÁöÑÂÄºÁ≠â‰∫é A Êó∂ÔºåCAS ÈÄöËøáÂéüÂ≠êÊñπÂºèÁî®Êñ∞ÂÄº B Êù•Êõ¥Êñ∞ V ÁöÑÂÄºÔºåÂê¶Âàô‰∏ç‰ºöÊâßË°å‰ªª‰ΩïÊìç‰ΩúÔºàÊØîËæÉÂíåÊõøÊç¢ÊòØ‰∏Ä‰∏™ÂéüÂ≠êÊìç‰ΩúÔºâ„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊòØ‰∏Ä‰∏™Ëá™ÊóãÊìç‰ΩúÔºåÂç≥‰∏çÊñ≠ÁöÑÈáçËØï„ÄÇ</p>
<h3 id="üåüCAS-Âíå-synchronized-ÁöÑ‰ΩøÁî®Âú∫ÊôØÔºü"><a href="#üåüCAS-Âíå-synchronized-ÁöÑ‰ΩøÁî®Âú∫ÊôØÔºü" class="headerlink" title="üåüCAS Âíå synchronized ÁöÑ‰ΩøÁî®Âú∫ÊôØÔºü"></a>üåüCAS Âíå synchronized ÁöÑ‰ΩøÁî®Âú∫ÊôØÔºü</h3><blockquote>
<p>ÊÇ≤ËßÇÈîÅÂíå‰πêËßÇÈîÅÁöÑ‰ΩøÁî®Âú∫ÊôØ</p>
</blockquote>
<ul>
<li><p>CAS ÈÄÇÁî®‰∫éÂÜôÊØîËæÉÂ∞ëÁöÑÊÉÖÂÜµ‰∏ãÔºàÂ§öËØªÂú∫ÊôØÔºåÂÜ≤Á™Å‰∏ÄËà¨ËæÉÂ∞ëÔºâ</p>
<ul>
<li><p>ÂØπ‰∫éËµÑÊ∫êÁ´û‰∫âËæÉÂ∞ëÔºàÁ∫øÁ®ãÂÜ≤Á™ÅËæÉËΩªÔºâÁöÑÊÉÖÂÜµÔºå CAS Âü∫‰∫éÁ°¨‰ª∂ÂÆûÁé∞Ôºå‰∏çÈúÄË¶ÅËøõÂÖ•ÂÜÖÊ†∏Ôºå‰∏çÈúÄË¶ÅÂàáÊç¢Á∫øÁ®ãÔºåÊìç‰ΩúËá™ÊóãÂá†ÁéáËæÉÂ∞ëÔºåÂõ†Ê≠§ÂèØ‰ª•Ëé∑ÂæóÊõ¥È´òÁöÑÊÄßËÉΩ„ÄÇ</p>
</li>
<li><p>ÂéüÂ≠êÊìç‰ΩúÁ±ªÊòØCASÂú®Java‰∏≠ÁöÑÂ∫îÁî®</p>
</li>
<li><p>Âπ∂ÂèëÈòüÂàóÁöÑÊó†ÈîÅÂåñ‰πüÊòØÈÄöËøáCASÂÆûÁé∞</p>
</li>
</ul>
</li>
<li><p>synchronized ÈÄÇÁî®‰∫éÂÜôÊØîËæÉÂ§öÁöÑÊÉÖÂÜµ‰∏ãÔºàÂ§öÂÜôÂú∫ÊôØÔºåÂÜ≤Á™Å‰∏ÄËà¨ËæÉÂ§öÔºâ</p>
<ul>
<li>ÂØπ‰∫éËµÑÊ∫êÁ´û‰∫â‰∏•ÈáçÔºàÁ∫øÁ®ãÂÜ≤Á™Å‰∏•ÈáçÔºâÁöÑÊÉÖÂÜµÔºåCAS Ëá™ÊóãÁöÑÊ¶ÇÁéá‰ºöÊØîËæÉÂ§ßÔºå‰ªéËÄåÊµ™Ë¥πÊõ¥Â§öÁöÑ CPU ËµÑÊ∫êÔºåÊïàÁéá‰Ωé‰∫é synchronized„ÄÇ</li>
</ul>
</li>
</ul>
<h3 id="üåüJVM-‰∏≠ÁöÑ-CAS-ÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü"><a href="#üåüJVM-‰∏≠ÁöÑ-CAS-ÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü" class="headerlink" title="üåüJVM ‰∏≠ÁöÑ CAS ÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü"></a>üåüJVM ‰∏≠ÁöÑ CAS ÊòØÊÄé‰πàÂÆûÁé∞ÁöÑÔºü</h3><p>JAVA‰∏≠ÁöÑCASÊìç‰ΩúÈÉΩÊòØÈÄöËøáUnsafeÁ±ªÂÆûÁé∞ÔºåÊò†Â∞ÑÂà∞Êìç‰ΩúÁ≥ªÁªüÂ∞±ÊòØ‰∏ÄÊù°CPUÁöÑÂéüÂ≠êÊåá‰ª§ÔºåÂÖ∂‰ΩúÁî®ÊòØËÆ©CPUÂÖàËøõË°åÊØîËæÉ‰∏§‰∏™ÂÄºÊòØÂê¶Áõ∏Á≠âÔºåÁÑ∂ÂêéÂéüÂ≠êÂú∞Êõ¥Êñ∞Êüê‰∏™‰ΩçÁΩÆÁöÑÂÄº„ÄÇÂÖ∂ÂÆûÁé∞ÊñπÂºèÊòØ<strong>Âü∫‰∫éÁ°¨‰ª∂Âπ≥Âè∞ÁöÑÊ±áÁºñÊåá‰ª§ÔºåÂú®intelÁöÑCPU‰∏≠Ôºå‰ΩøÁî®ÁöÑÊòØcmpxchgÊåá‰ª§ÔºåÂ∞±ÊòØËØ¥CASÊòØÈù†Á°¨‰ª∂ÂÆûÁé∞ÁöÑÔºå‰ªéËÄåÂú®Á°¨‰ª∂Â±ÇÈù¢ÊèêÂçáÊïàÁéá„ÄÇ</strong></p>
<h2 id="‚ù∑Atomic"><a href="#‚ù∑Atomic" class="headerlink" title="‚ù∑Atomic"></a>‚ù∑Atomic</h2><h3 id="üåüËØ∑ÈòêËø∞‰Ω†ÂØπUnsafeÁ±ªÁöÑÁêÜËß£"><a href="#üåüËØ∑ÈòêËø∞‰Ω†ÂØπUnsafeÁ±ªÁöÑÁêÜËß£" class="headerlink" title="üåüËØ∑ÈòêËø∞‰Ω†ÂØπUnsafeÁ±ªÁöÑÁêÜËß£?"></a>üåüËØ∑ÈòêËø∞‰Ω†ÂØπUnsafeÁ±ªÁöÑÁêÜËß£?</h3><p>Unsafe ÊòØ CAS ÁöÑÊ†∏ÂøÉÁ±ªÔºåÁî±‰∫é Java Êó†Ê≥ïÁõ¥Êé•ËÆøÈóÆÂ∫ïÂ±ÇÁ≥ªÁªüÔºåÈúÄË¶ÅÈÄöËøáÊú¨Âú∞ÔºàNativeÔºâÊñπÊ≥ïÊù•ËÆøÈóÆ</p>
<p>UnsafeÁ±ªÂèØ‰ª•Áõ¥Êé•Êìç‰ΩúÁâπÂÆöÁöÑÂÜÖÂ≠òÊï∞ÊçÆÔºåÂÖ∂ÂÜÖÈÉ®ÊñπÊ≥ïÊìç‰ΩúÁ±ª‰ºº C ÁöÑÊåáÈíàÔºåËøôÊó†Áñë‰πüÂ¢ûÂä†‰∫ÜÁ®ãÂ∫èÂèëÁîüÁõ∏ÂÖ≥ÊåáÈíàÈóÆÈ¢òÁöÑÈ£éÈô©„ÄÇ</p>
<hr>
<p>Unsafe Á±ª‰∏ªË¶ÅÊèê‰æõ‰∏Ä‰∫õÁî®‰∫éÊâßË°å‰ΩéÁ∫ßÂà´„ÄÅ‰∏çÂÆâÂÖ®Êìç‰ΩúÁöÑÊñπÊ≥ïÔºåÂ¶ÇÁõ¥Êé•ËÆøÈóÆÁ≥ªÁªüÂÜÖÂ≠òËµÑÊ∫ê„ÄÅËá™‰∏ªÁÆ°ÁêÜÂÜÖÂ≠òËµÑÊ∫êÁ≠âÔºåÂÖ∂‰∏≠ÊâÄÊúâÊñπÊ≥ïÈÉΩÊòØ native ‰øÆÈ•∞ÁöÑÔºåÈÉΩÊòØÁõ¥Êé•Ë∞ÉÁî®<strong>Êìç‰ΩúÁ≥ªÁªüÂ∫ïÂ±ÇËµÑÊ∫ê</strong>ÊâßË°åÁõ∏Â∫îÁöÑ‰ªªÂä°Ôºå</p>
<p>Âú®Á®ãÂ∫è‰∏≠ËøáÂ∫¶„ÄÅ‰∏çÊ≠£Á°Æ‰ΩøÁî®UnsafeÁ±ª‰ºö‰ΩøÂæóÁ®ãÂ∫èÂá∫ÈîôÁöÑÊ¶ÇÁéáÂèòÂ§ßÔºå‰ΩøÂæóJavaËøôÁßçÂÆâÂÖ®ÁöÑËØ≠Ë®ÄÂèòÂæó‰∏çÂÜç‚ÄúÂÆâÂÖ®‚ÄùÔºåÂõ†Ê≠§ÂØπUnsafeÁöÑ‰ΩøÁî®‰∏ÄÂÆöË¶ÅÊÖéÈáç„ÄÇ</p>
<p><a target="_blank" rel="noopener" href="https://tech.meituan.com/2019/02/14/talk-about-java-magic-class-unsafe.html">JavaÈ≠îÊ≥ïÁ±ªÔºöUnsafeÂ∫îÁî®Ëß£Êûê - ÁæéÂõ¢ÊäÄÊúØÂõ¢Èòü (meituan.com)</a></p>
<h3 id="üåüÁÆÄÂçïËØ¥‰∏ãÂØπ-Java-‰∏≠ÁöÑÂéüÂ≠êÁ±ªÁöÑÁêÜËß£Ôºü"><a href="#üåüÁÆÄÂçïËØ¥‰∏ãÂØπ-Java-‰∏≠ÁöÑÂéüÂ≠êÁ±ªÁöÑÁêÜËß£Ôºü" class="headerlink" title="üåüÁÆÄÂçïËØ¥‰∏ãÂØπ Java ‰∏≠ÁöÑÂéüÂ≠êÁ±ªÁöÑÁêÜËß£Ôºü"></a>üåüÁÆÄÂçïËØ¥‰∏ãÂØπ Java ‰∏≠ÁöÑÂéüÂ≠êÁ±ªÁöÑÁêÜËß£Ôºü</h3><blockquote>
<p>ËØ¥ËØ¥‰ΩúÁî®Âíå‰ΩøÁî®Âú∫ÊôØ„ÄÇ</p>
<p>Atomic Êåá‰∏Ä‰∏™Êìç‰ΩúÊòØ‰∏çÂèØ‰∏≠Êñ≠ÁöÑ„ÄÇÂç≥‰ΩøÊòØÂú®Â§ö‰∏™Á∫øÁ®ã‰∏ÄËµ∑ÊâßË°åÁöÑÊó∂ÂÄôÔºå‰∏Ä‰∏™Êìç‰Ωú‰∏ÄÊó¶ÂºÄÂßãÔºåÂ∞±‰∏ç‰ºöË¢´ÂÖ∂‰ªñÁ∫øÁ®ãÂπ≤Êâ∞„ÄÇ</p>
</blockquote>
<p>ÂéüÂ≠êÊìç‰ΩúÁ±ªÊòØÂü∫‰∫éCASÔºàÂü∫‰∫é<code>Unsafe</code>ÂÆûÁé∞ÔºâÂÆûÁé∞ÁöÑÔºåÊèê‰æõ‰∫Ü‰∏ÄÁßçÁî®Ê≥ïÁÆÄÂçï„ÄÅÊÄßËÉΩÈ´òÊïà„ÄÅÁ∫øÁ®ãÂÆâÂÖ®Âú∞Êõ¥Êñ∞‰∏Ä‰∏™ÂèòÈáèÁöÑÊñπÂºè„ÄÇÂåÖÂê´4ÁªÑÔºå13‰∏™</p>
<p>JUCÂåÖ‰∏≠ÁöÑ4ÁßçÂéüÂ≠êÁ±ª</p>
<ul>
<li><strong>Âü∫Êú¨Á±ªÂûã</strong>Ôºö‰ΩøÁî®ÂéüÂ≠êÁöÑÊñπÂºèÊõ¥Êñ∞Âü∫Êú¨Á±ªÂûã<ul>
<li><code>AtomicInteger</code>ÔºöÊï¥ÂΩ¢ÂéüÂ≠êÁ±ª</li>
<li><code>AtomicLong</code>ÔºöÈïøÊï¥ÂûãÂéüÂ≠êÁ±ª</li>
<li><code>AtomicBoolean</code>ÔºöÂ∏ÉÂ∞îÂûãÂéüÂ≠êÁ±ª</li>
</ul>
</li>
<li><strong>Êï∞ÁªÑÁ±ªÂûã</strong>Ôºö‰ΩøÁî®ÂéüÂ≠êÁöÑÊñπÂºèÊõ¥Êñ∞Êï∞ÁªÑÈáåÁöÑÊüê‰∏™ÂÖÉÁ¥†<ul>
<li><code>AtomicIntegerArray</code>ÔºöÊï¥ÂΩ¢Êï∞ÁªÑÂéüÂ≠êÁ±ª</li>
<li><code>AtomicLongArray</code>ÔºöÈïøÊï¥ÂΩ¢Êï∞ÁªÑÂéüÂ≠êÁ±ª</li>
<li><code>AtomicReferenceArray</code>ÔºöÂºïÁî®Á±ªÂûãÊï∞ÁªÑÂéüÂ≠êÁ±ª</li>
</ul>
</li>
<li><strong>ÂºïÁî®Á±ªÂûã</strong>Ôºö<ul>
<li><code>AtomicReference</code>ÔºöÂºïÁî®Á±ªÂûãÂéüÂ≠êÁ±ªÔºåÂ≠òÂú®ABAÈóÆÈ¢ò</li>
<li><code>AtomicStampedReference</code>ÔºöÂéüÂ≠êÊõ¥Êñ∞Â∏¶ÊúâÁâàÊú¨Âè∑ÁöÑÂºïÁî®Á±ªÂûã„ÄÇËØ•Á±ªÂ∞ÜÊï¥Êï∞ÂÄº‰∏éÂºïÁî®ÂÖ≥ËÅîËµ∑Êù•ÔºåÂèØÁî®‰∫éÂéüÂ≠êÁöÑÊõ¥Êñ∞Êï∞ÊçÆÂíåÊï∞ÊçÆÁöÑÁâàÊú¨Âè∑ÔºåÂèØ‰ª•Ëß£ÂÜ≥‰ΩøÁî®CASËøõË°åÂéüÂ≠êÊõ¥Êñ∞Êó∂ÂèØËÉΩÂá∫Áé∞ÁöÑABAÈóÆÈ¢ò„ÄÇ</li>
<li><code>AtomicMarkableReference</code>ÔºöÂéüÂ≠êÊõ¥Êñ∞Â∏¶ÊúâÊ†áËÆ∞‰ΩçÁöÑÂºïÁî®Á±ªÂûã</li>
</ul>
</li>
<li><strong>ÂéüÂ≠êÊõ¥Êñ∞Â≠óÊÆµÁ±ª</strong><ul>
<li><code>AtomicIntegerFieldUpdater</code>ÔºöÂéüÂ≠êÊõ¥Êñ∞Êï¥ÂûãÁöÑÂ≠óÊÆµÁöÑÊõ¥Êñ∞Âô®„ÄÇ</li>
<li><code>AtomicLongFieldUpdater</code>ÔºöÂéüÂ≠êÊõ¥Êñ∞ÈïøÊï¥ÂûãÂ≠óÊÆµÁöÑÊõ¥Êñ∞Âô®„ÄÇ</li>
<li><code>AtomicReferenceFieldUpdater</code>ÔºöÂéüÂ≠êÊõ¥Êñ∞ÂºïÁî®Á±ªÂûãÂ≠óÊÆµÁöÑÊõ¥Êñ∞Âô®</li>
</ul>
</li>
</ul>
<h3 id="üåüAtomic-ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü"><a href="#üåüAtomic-ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="üåüAtomic ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü"></a>üåüAtomic ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü</h3><p>Atomic ÈÄöËøá CAS+volatileÂÆûÁé∞ÔºåÂΩìÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂØπËØ•ÂèòÈáèÁöÑÂÄºËøõË°åÊõ¥Êñ∞Êó∂Ôºå‰ªÖÊúâ‰∏Ä‰∏™Á∫øÁ®ãËÉΩÊàêÂäüÔºåËÄåÊú™ÊàêÂäüÁöÑÁ∫øÁ®ãÂèØ‰ª•ÂêëËá™ÊóãÈîÅ‰∏ÄÊ†∑ÔºåÁªßÁª≠Â∞ùËØïÔºå‰∏ÄÁõ¥Á≠âÂà∞ÊâßË°åÊàêÂäü„ÄÇ</p>
<h2 id="‚ù∏ThreadLocal"><a href="#‚ù∏ThreadLocal" class="headerlink" title="‚ù∏ThreadLocal"></a>‚ù∏ThreadLocal</h2><h3 id="üåü‰ªÄ‰πàÊòØThreadLocalÔºü"><a href="#üåü‰ªÄ‰πàÊòØThreadLocalÔºü" class="headerlink" title="üåü‰ªÄ‰πàÊòØThreadLocalÔºü"></a>üåü‰ªÄ‰πàÊòØThreadLocalÔºü</h3><blockquote>
<p>ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂàõÂª∫ÁöÑÂèòÈáèÊòØÂèØ‰ª•Ë¢´‰ªª‰Ωï‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆÂπ∂‰øÆÊîπÁöÑ„ÄÇÂ¶ÇÊûúÊÉ≥ÂÆûÁé∞ÊØè‰∏Ä‰∏™Á∫øÁ®ãÈÉΩÊúâËá™Â∑±ÁöÑ‰∏ìÂ±ûÊú¨Âú∞ÂèòÈáèËØ•Â¶Ç‰ΩïËß£ÂÜ≥Âë¢Ôºü<code>ThreadLocal</code>Á±ªÊ≠£ÊòØ‰∏∫‰∫ÜËß£ÂÜ≥ËøôÊ†∑ÁöÑÈóÆÈ¢ò„ÄÇ</p>
</blockquote>
<p><code>ThreadLocal</code>‰∏∫ÂèòÈáèÂú®ÊØè‰∏™Á∫øÁ®ã‰∏≠ÈÉΩÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂâØÊú¨ÔºåÈÇ£‰πàÊØè‰∏™Á∫øÁ®ãÂèØ‰ª•ËÆøÈóÆËá™Â∑±ÂÜÖÈÉ®ÁöÑÂâØÊú¨ÂèòÈáèÔºåÂ∞±‰∏ç‰ºöÂíåÂÖ∂‰ªñÁ∫øÁ®ãÁöÑÂ±ÄÈÉ®ÂèòÈáèÂÜ≤Á™ÅÔºå<strong>ÂÆûÁé∞‰∫ÜÁ∫øÁ®ãÈó¥ÁöÑÊï∞ÊçÆÈöîÁ¶ª</strong>„ÄÇ</p>
<p>Â¶ÇÊûú‰Ω†ÂàõÂª∫‰∫Ü‰∏Ä‰∏™<code>ThreadLocal</code>ÂèòÈáèÔºåÂèØ‰ª•‰ΩøÁî® <code>get()</code> Âíå <code>set()</code> ÊñπÊ≥ïÊù•Ëé∑ÂèñÈªòËÆ§ÂÄºÊàñÂ∞ÜÂÖ∂ÂÄºÊõ¥Êîπ‰∏∫ÂΩìÂâçÁ∫øÁ®ãÊâÄÂ≠òÁöÑÂâØÊú¨ÁöÑÂÄºÔºå‰ªéËÄåÈÅøÂÖç‰∫ÜÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇ</p>
<h3 id="üåüThreadLocalÂéüÁêÜÔºüÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÈöîÁ¶ª"><a href="#üåüThreadLocalÂéüÁêÜÔºüÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÈöîÁ¶ª" class="headerlink" title="üåüThreadLocalÂéüÁêÜÔºüÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÈöîÁ¶ª?"></a>üåüThreadLocalÂéüÁêÜÔºüÂ¶Ç‰ΩïÂÆûÁé∞Á∫øÁ®ãÈöîÁ¶ª?</h3><p>JDK8 ‰ª•ÂêéÔºöÊØè‰∏™ Thread ÂÜÖÈÉ®Áª¥Êä§‰∏Ä‰∏™ ThreadLocalMapÔºåThread ÂÜÖÈÉ®ÁöÑ Map ÊòØÁî± ThreadLocal Áª¥Êä§ÁöÑÔºåÁî± ThreadLocal Ë¥üË¥£Âêë map Ëé∑ÂèñÂíåËÆæÁΩÆÁ∫øÁ®ãÁöÑÂèòÈáèÂÄºÔºåËøô‰∏™ Map ÁöÑ key ÊòØ ThreadLocal ÂÆû‰æãÊú¨Ë∫´Ôºåvalue ÊòØÁúüÊ≠£Ë¶ÅÂ≠òÂÇ®ÁöÑÂÄºÔºåÂØπ‰∫é‰∏çÂêåÁöÑÁ∫øÁ®ãÔºåÊØèÊ¨°Ëé∑ÂèñÂâØÊú¨ÂÄºÊó∂ÔºåÂà´ÁöÑÁ∫øÁ®ãÂπ∂‰∏çËÉΩËé∑ÂèñÂà∞ÂΩìÂâçÁ∫øÁ®ãÁöÑÂâØÊú¨ÂÄºÔºåÂΩ¢ÊàêÂâØÊú¨ÁöÑÈöîÁ¶ªÔºå‰∫í‰∏çÂπ≤Êâ∞</p>
<img src="https://img.jwt1399.top/img/202301032103152.png" style="zoom: 67%;" />

<hr>
<p>ÊØè‰∏™Á∫øÁ®ãÈÉΩÊúâ‰∏Ä‰∏™<code>ThreadLocalMap</code>Ôºà<code>ThreadLocal</code>ÁöÑÈùôÊÄÅÂÜÖÈÉ®Á±ªÔºâÔºåMap‰∏≠ÂÖÉÁ¥†ÁöÑÈîÆ‰∏∫<code>ThreadLocal</code>ÔºåËÄåÂÄºÂØπÂ∫îÁ∫øÁ®ãÁöÑÂèòÈáèÂâØÊú¨„ÄÇ</p>
<p>Ë∞ÉÁî®<code>threadLocal.set()</code>‚Äì&gt;Ë∞ÉÁî®<code>getMap(Thread)</code>‚Äì&gt;ËøîÂõûÂΩìÂâçÁ∫øÁ®ãÁöÑ<code>ThreadLocalMap&lt;ThreadLocal, value&gt;</code>‚Äì&gt;<code>map.set(this, value)</code>ÔºåthisÊòØ<code>threadLocal</code>Êú¨Ë∫´„ÄÇÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span>T value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Thread t <span class="token operator">=</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ThreadLocalMap map <span class="token operator">=</span> <span class="token function">getMap</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>map <span class="token operator">!=</span> null<span class="token punctuation">)</span>
        map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">else</span>
        <span class="token function">createMap</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

ThreadLocalMap <span class="token function">getMap</span><span class="token punctuation">(</span>Thread t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> t<span class="token punctuation">.</span>threadLocals<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">createMap</span><span class="token punctuation">(</span>Thread t<span class="token punctuation">,</span> T firstValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span>threadLocals <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ThreadLocalMap</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> firstValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Ë∞ÉÁî®<code>get()</code>‚Äì&gt;Ë∞ÉÁî®<code>getMap(Thread)</code>‚Äì&gt;ËøîÂõûÂΩìÂâçÁ∫øÁ®ãÁöÑ<code>ThreadLocalMap&lt;ThreadLocal, value&gt;</code>‚Äì&gt;<code>map.getEntry(this)</code>ÔºåËøîÂõû<code>value</code>„ÄÇÊ∫êÁ†ÅÂ¶Ç‰∏ãÔºö</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> T <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Thread t <span class="token operator">=</span> Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ThreadLocalMap map <span class="token operator">=</span> <span class="token function">getMap</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>map <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    ThreadLocalMap<span class="token punctuation">.</span>Entry e <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">getEntry</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">"unchecked"</span><span class="token punctuation">)</span>
      T result <span class="token operator">=</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span>e<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">setInitialValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="üåüThreadLocalÊúâÂì™‰∫õÂ∫îÁî®Âú∫ÊôØÔºü"><a href="#üåüThreadLocalÊúâÂì™‰∫õÂ∫îÁî®Âú∫ÊôØÔºü" class="headerlink" title="üåüThreadLocalÊúâÂì™‰∫õÂ∫îÁî®Âú∫ÊôØÔºü"></a>üåüThreadLocalÊúâÂì™‰∫õÂ∫îÁî®Âú∫ÊôØÔºü</h3><p><code>ThreadLocal</code>ÁöÑÂ∫îÁî®Âú∫ÊôØ‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂá†‰∏™ÊñπÈù¢Ôºö</p>
<ul>
<li><p>ÊØè‰∏™Á∫øÁ®ãÈúÄË¶ÅÊúâËá™Â∑±ÂçïÁã¨ÁöÑÂÆû‰æã</p>
</li>
<li><p>ÂÆû‰æãÈúÄË¶ÅÂú®Â§ö‰∏™ÊñπÊ≥ï‰∏≠ÂÖ±‰∫´Ôºå‰ΩÜ‰∏çÂ∏åÊúõË¢´Â§öÁ∫øÁ®ãÂÖ±‰∫´</p>
</li>
<li><p>‰øùÂ≠òÁ∫øÁ®ã‰∏ä‰∏ãÊñá‰ø°ÊÅØÔºåÂú®ÈúÄË¶ÅÁöÑÂú∞ÊñπÂèØ‰ª•Ëé∑Âèñ</p>
</li>
<li><p>Á∫øÁ®ãÈó¥Êï∞ÊçÆÈöîÁ¶ª</p>
</li>
<li><p>Êï∞ÊçÆÂ∫ìËøûÊé•</p>
</li>
<li><p>sessionÁÆ°ÁêÜ</p>
</li>
<li><p>Áî®‰∫é‰øùÂ≠òÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÂ∑•ÂÖ∑Á±ªÔºåSimpleDateFormat</p>
</li>
</ul>
<h3 id="üåüThreadLocalÂÜÖÂ≠òÊ≥ÑÈú≤-Â¶Ç‰ΩïËß£ÂÜ≥"><a href="#üåüThreadLocalÂÜÖÂ≠òÊ≥ÑÈú≤-Â¶Ç‰ΩïËß£ÂÜ≥" class="headerlink" title="üåüThreadLocalÂÜÖÂ≠òÊ≥ÑÈú≤? Â¶Ç‰ΩïËß£ÂÜ≥"></a>üåüThreadLocalÂÜÖÂ≠òÊ≥ÑÈú≤? Â¶Ç‰ΩïËß£ÂÜ≥</h3><blockquote>
<p>ThreadLocal ÂÜÖÂ≠òÊ≥ÑÈú≤ÈóÆÈ¢òÊòØÊÄé‰πàÂØºËá¥ÁöÑÔºü</p>
<p>ThreadLocal ÂÜÖÂ≠òÊ≥ÑÊºèÂ¶Ç‰ΩïËß£ÂÜ≥</p>
<p>ThreadLocal ÂÜÖÈÉ®Â¶Ç‰ΩïÈò≤Ê≠¢ÂÜÖÂ≠òÊ≥ÑÊºèÔºåÂú®Âì™‰∫õÊñπÊ≥ï‰∏≠Â≠òÂú®</p>
</blockquote>
<p><code>ThreadLocalMap</code> ‰∏≠‰ΩøÁî®ÁöÑ key ‰∏∫ <code>ThreadLocal</code> ÁöÑÂº±ÂºïÁî®ÔºåËÄå value ÊòØÂº∫ÂºïÁî®„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇÊûú <code>ThreadLocal</code> Ê≤°ÊúâË¢´Â§ñÈÉ®Âº∫ÂºïÁî®ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂú®ÂûÉÂúæÂõûÊî∂ÁöÑÊó∂ÂÄôÔºåkey ‰ºöË¢´Ê∏ÖÁêÜÊéâÔºåËÄå value ‰∏ç‰ºöË¢´Ê∏ÖÁêÜÊéâ„ÄÇ</p>
<p>ËøôÊ†∑‰∏ÄÊù•Ôºå<code>ThreadLocalMap</code> ‰∏≠Â∞±‰ºöÂá∫Áé∞ key ‰∏∫ null ÁöÑ Entry„ÄÇÂÅáÂ¶ÇÊàë‰ª¨‰∏çÂÅö‰ªª‰ΩïÊé™ÊñΩÁöÑËØùÔºåvalue Ê∞∏ËøúÊó†Ê≥ïË¢´ GC ÂõûÊî∂ÔºåËøô‰∏™Êó∂ÂÄôÂ∞±ÂèØËÉΩ‰ºö‰∫ßÁîüÂÜÖÂ≠òÊ≥ÑÈú≤„ÄÇ</p>
<p><strong>Â¶Ç‰ΩïËß£ÂÜ≥</strong></p>
<p><code>ThreadLocalMap</code> ÂÆûÁé∞‰∏≠Â∑≤ÁªèËÄÉËôë‰∫ÜËøôÁßçÊÉÖÂÜµÔºåÂú®Ë∞ÉÁî® <code>set()</code>„ÄÅ<code>get()</code>„ÄÅ<code>remove()</code> ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºå‰ºö‰∏ªÂä®Ê∏ÖÁêÜÊéâ key ‰∏∫ null  ÁöÑÊó†Êïà Entry Êù•ÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÊºèÈóÆÈ¢ò„ÄÇ</p>
<p>Ë¶ÅÂΩªÂ∫ïËß£ÂÜ≥ÂÜÖÂ≠òÊ≥ÑÊºèÈóÆÈ¢òÔºöÊØèÊ¨°‰Ωø‚Ω§ÂÆå<code>ThreadLocal</code>Â∞±Ë∞É‚Ω§ÂÆÉÁöÑ<code>remove()</code>‚ΩÖÊ≥ïÔºåÊúÄÂ•ΩÊâãÂä®Â∞ÜÂØπÂ∫îÁöÑÈîÆÂÄºÂØπÂà†Èô§Ôºå‰ªé‚ΩΩÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ</p>
<h3 id="üåüThreadLocal-Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ"><a href="#üåüThreadLocal-Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ" class="headerlink" title="üåüThreadLocal Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ"></a>üåüThreadLocal Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ</h3><p>ThreadLocal Â∫ïÂ±ÇÊòØÈÄöËøá ThreadLocalMap Ëøô‰∏™ÈùôÊÄÅÂÜÖÈÉ®Á±ªÊù•Â≠òÂÇ®Êï∞ÊçÆÁöÑÔºåThreadLocalMap Â∞±ÊòØ‰∏Ä‰∏™ÈîÆÂÄºÂØπÁöÑ MapÔºåÂÆÉÁöÑÂ∫ïÂ±ÇÊòØ Entry ÂØπË±°Êï∞ÁªÑÔºåEntry ÂØπË±°‰∏≠Â≠òÊîæÁöÑÈîÆÊòØ ThreadLocal ÂØπË±°ÔºåÂÄºÊòØ Object Á±ªÂûãÁöÑÂÖ∑‰ΩìÂ≠òÂÇ®ÂÜÖÂÆπ„ÄÇ</p>
<h3 id="üåüThreadLocalMap-ÁöÑÊï£ÂàóÊñπÂºè"><a href="#üåüThreadLocalMap-ÁöÑÊï£ÂàóÊñπÂºè" class="headerlink" title="üåüThreadLocalMap ÁöÑÊï£ÂàóÊñπÂºè"></a>üåüThreadLocalMap ÁöÑÊï£ÂàóÊñπÂºè</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token comment" spellcheck="true">// Ëé∑ÂèñÂΩìÂâç ThreadLocal ÂØπË±°ÁöÑÊï£ÂàóÂÄº</span>
<span class="token keyword">int</span> i <span class="token operator">=</span> key<span class="token punctuation">.</span>threadLocalHashCode <span class="token operator">&amp;</span> <span class="token punctuation">(</span>table<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>ËøôË°å‰ª£Á†ÅÂæóÂà∞ÁöÑÂÄºÂÖ∂ÂÆûÊòØ‰∏Ä‰∏™ ThreadLocal ÂØπË±°ÁöÑÊï£ÂàóÂÄºÔºåËøôÂ∞±ÊòØ ThreadLocal ÁöÑÊï£ÂàóÊñπÂºèÔºåÊàë‰ª¨Áß∞‰πã‰∏∫ <strong>ÊñêÊ≥¢ÈÇ£Â•ëÊï£Âàó</strong> „ÄÇ</p>
<p>ThreadLocal ÁöÑÊï£ÂàóÊñπÂºèÁß∞‰πã‰∏∫<strong>ÊñêÊ≥¢ÈÇ£Â•ëÊï£Âàó</strong>ÔºåÊØèÊ¨°Ëé∑ÂèñÂìàÂ∏åÂÄºÈÉΩ‰ºöÂä†‰∏ä <code>HASH_INCREMENT</code>ÔºåËøôÊ†∑ÂÅöÂèØ‰ª•Â∞ΩÈáèÈÅøÂÖç hash ÂÜ≤Á™ÅÔºåËÆ©ÂìàÂ∏åÂÄºËÉΩÂùáÂåÄÁöÑÂàÜÂ∏ÉÂú® 2 ÁöÑ n Ê¨°ÊñπÁöÑÊï∞ÁªÑ‰∏≠</p>
<ul>
<li><p>ËÆ°ÁÆó ThreadLocal ÂØπË±°ÁöÑÂìàÂ∏åÂÄºÔºö</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">int</span> threadLocalHashCode <span class="token operator">=</span> <span class="token function">nextHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">nextHashCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> nextHashCode<span class="token punctuation">.</span><span class="token function">getAndAdd</span><span class="token punctuation">(</span>HASH_INCREMENT<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>ÊØèÂàõÂª∫‰∏Ä‰∏™ ThreadLocal ÂØπË±°Â∞±‰ºö‰ΩøÁî® nextHashCode ÂàÜÈÖç‰∏Ä‰∏™ hash ÂÄºÁªôËøô‰∏™ÂØπË±°Ôºö</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> AtomicInteger nextHashCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>ÊñêÊ≥¢ÈÇ£Â•ëÊï∞‰πüÂè´ÈªÑÈáëÂàÜÂâ≤Êï∞Ôºåhash ÁöÑ<strong>Â¢ûÈáè</strong>Â∞±ÊòØËøô‰∏™Êï∞Â≠óÔºåÂ∏¶Êù•ÁöÑÂ•ΩÂ§ÑÊòØ hash ÂàÜÂ∏ÉÈùûÂ∏∏ÂùáÂåÄÔºö</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> HASH_INCREMENT <span class="token operator">=</span> <span class="token number">0x61c88647</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
</ul>
<h3 id="üåüThreadLocalMap-Â¶Ç‰ΩïÂ§ÑÁêÜÂìàÂ∏åÂÜ≤Á™Å"><a href="#üåüThreadLocalMap-Â¶Ç‰ΩïÂ§ÑÁêÜÂìàÂ∏åÂÜ≤Á™Å" class="headerlink" title="üåüThreadLocalMap Â¶Ç‰ΩïÂ§ÑÁêÜÂìàÂ∏åÂÜ≤Á™Å"></a>üåüThreadLocalMap Â¶Ç‰ΩïÂ§ÑÁêÜÂìàÂ∏åÂÜ≤Á™Å</h3><p>ThreadLocalMap ‰ΩøÁî®<strong>Á∫øÊÄßÊé¢ÊµãÊ≥ïÊù•Ëß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™Å</strong>ÔºåËØ•ÊñπÊ≥ï‰ºö‰∏ÄÁõ¥Êé¢Êµã‰∏ã‰∏Ä‰∏™Âú∞ÂùÄÔºåÁõ¥Âà∞ÊúâÁ©∫ÁöÑÂú∞ÂùÄÂêéÊèíÂÖ•ÔºåËã•ÊèíÂÖ•Âêé Map Êï∞ÈáèË∂ÖËøáÈòàÂÄºÔºåÊï∞ÁªÑ‰ºöÊâ©ÂÆπ‰∏∫ÂéüÊù•ÁöÑ 2 ÂÄçÔºåÂú®Êé¢ÊµãËøáÁ®ã‰∏≠ ThreadLocal ‰ºöÂ§çÁî® key ‰∏∫ null ÁöÑËÑè Entry ÂØπË±°ÔºåÂπ∂ËøõË°åÂûÉÂúæÊ∏ÖÁêÜÔºåÈò≤Ê≠¢Âá∫Áé∞ÂÜÖÂ≠òÊ≥ÑÊºè</p>
<blockquote>
<p>ÂÅáËÆæÂΩìÂâç table ÈïøÂ∫¶‰∏∫16ÔºåËÆ°ÁÆóÂá∫Êù• key ÁöÑ hash ÂÄº‰∏∫ 14ÔºåÂ¶ÇÊûú table[14] ‰∏äÂ∑≤ÁªèÊúâÂÄºÔºåÂπ∂‰∏îÂÖ∂ key ‰∏éÂΩìÂâç key ‰∏ç‰∏ÄËá¥ÔºåÈÇ£‰πàÂ∞±ÂèëÁîü‰∫Ü hash ÂÜ≤Á™ÅÔºåËøô‰∏™Êó∂ÂÄôÂ∞Ü 14 Âä† 1 ÂæóÂà∞ 15ÔºåÂèñ table[15] ËøõË°åÂà§Êñ≠ÔºåÂ¶ÇÊûúËøòÊòØÂÜ≤Á™Å‰ºöÂõûÂà∞ 0ÔºåÂèñ table[0]Ôºå‰ª•Ê≠§Á±ªÊé®ÔºåÁõ¥Âà∞ÂèØ‰ª•ÊèíÂÖ•ÔºåÂèØ‰ª•Êää Entry[]  table ÁúãÊàê‰∏Ä‰∏™<strong>ÁéØÂΩ¢Êï∞ÁªÑ</strong></p>
</blockquote>
<h3 id="üåüThreadLocalMap-Êâ©ÂÆπÊú∫Âà∂"><a href="#üåüThreadLocalMap-Êâ©ÂÆπÊú∫Âà∂" class="headerlink" title="üåüThreadLocalMap Êâ©ÂÆπÊú∫Âà∂"></a>üåüThreadLocalMap Êâ©ÂÆπÊú∫Âà∂</h3><p>ThreadLocalMap ÁöÑÂàùÂßãÂÆπÈáèÊòØ 16ÔºåÂú®Êâ©ÂÆπÂâçÊúâ‰∏§‰∏™Âà§Êñ≠ÁöÑÊ≠•È™§ÔºåÈÉΩÊª°Ë∂≥ÂêéÊâç‰ºöËøõË°åÊúÄÁªàÊâ©ÂÆπ</p>
<ul>
<li><strong>ThreadLocalMap#set(ThreadLocal&lt;?&gt; key, Object value)</strong> ÊñπÊ≥ï‰∏≠ÂèØËÉΩ‰ºöËß¶ÂèëÂêØÂèëÂºèÊ∏ÖÁêÜÔºåÂú®Ê∏ÖÁêÜÊó†Êïà Entry ÂØπË±°ÂêéÔºåÂ¶ÇÊûúÊï∞ÁªÑÈïøÂ∫¶Â§ß‰∫éÁ≠â‰∫éÊï∞ÁªÑÂÆö‰πâÈïøÂ∫¶ÁöÑ 2&#x2F;3ÔºåÂàôÈ¶ñÂÖàËøõË°å rehashÔºõ</li>
<li>rehash ‰ºöËß¶Âèë‰∏ÄÊ¨°ÂÖ®ÈáèÊ∏ÖÁêÜÔºåÂ¶ÇÊûúÊï∞ÁªÑÈïøÂ∫¶Â§ß‰∫éÁ≠â‰∫éÊï∞ÁªÑÂÆö‰πâÈïøÂ∫¶ÁöÑ 1&#x2F;2ÔºåÂàôËøõË°å resizeÔºàÊâ©ÂÆπÔºâÔºõ</li>
</ul>
<p>ËøõË°åÊâ©ÂÆπÊó∂ÔºåEntry Êï∞ÁªÑÊâ©ÂÆπ‰∏∫ <strong>ÂéüÊù•ÁöÑ2ÂÄç</strong> ÔºåÈáçÊñ∞ËÆ°ÁÆó key ÁöÑÊï£ÂàóÂÄºÔºåÂ¶ÇÊûúÈÅáÂà∞ key ‰∏∫ NULL ÁöÑÊÉÖÂÜµÔºå‰ºöÂ∞ÜÂÖ∂ value ‰πüÁΩÆ‰∏∫ NULLÔºåÂ∏ÆÂä©ËôöÊãüÊú∫ËøõË°åGC„ÄÇ</p>
<h3 id="üåüThreadLocalÂéüÁêÜÊÄªÁªì"><a href="#üåüThreadLocalÂéüÁêÜÊÄªÁªì" class="headerlink" title="üåüThreadLocalÂéüÁêÜÊÄªÁªì"></a>üåüThreadLocalÂéüÁêÜÊÄªÁªì</h3><p>ThreadLocal Â∞ÜËá™Ë∫´‰Ωú‰∏∫keyÔºåÂíåÈúÄË¶Å‰øùÂ≠òÁöÑvalue‰∏ÄËµ∑Â≠òÂÖ•Âà∞ÂΩìÂâçÁ∫øÁ®ãÁöÑ threadlocalmap ‰∏≠„ÄÇ</p>
<p>ThreadLocalMap ÁöÑ key ÊòØ‰∏Ä‰∏™ threadLocal ÂèòÈáèÔºåThreadLocalMap ÂØπÂÆÉÁöÑÂºïÁî®ÊòØ‰∏Ä‰∏™Âº±ÂºïÁî®Ôºå‰πüÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûúÈô§‰∫Ü ThreadLocalMap ‰ª•Â§ñÊ≤°ÊúâÊåáÂêë threadLocal ÁöÑÂºïÁî®ÔºåÈÇ£‰πàËøô‰∏™ threadlocal Â∞±‰ºöË¢´ÂõûÊî∂„ÄÇ</p>
<p>ThreadLocalMap ‰ΩøÁî®Á∫øÊÄßÊé¢ÊµãÊ≥ïËß£ÂÜ≥ÂìàÂ∏åÂÜ≤Á™ÅÔºöÊØè‰∏™ threadlocal Âú®ÊèíÂÖ•Êó∂‰ºöÊ£ÄÊü•Êï∞ÁªÑÁöÑÂΩìÂâç‰ΩçÁΩÆÁöÑÊÉÖÂÜµÔºåÂ¶ÇÊûú‰∏∫ null Áõ¥Êé•ÊèíÂÖ•Ôºå‰∏ç‰∏∫ null ÂàôÈ°∫Â∫èÊü•Êâæ‰∏ã‰∏Ä‰∏™ÔºåÁõ¥Âà∞ÊâæÂà∞Á©∫‰ΩçÁΩÆ‰∏∫Ê≠¢„ÄÇ</p>
<p>ÂΩì ThreadLocalMap ÂÜÖÂÖÉÁ¥†Ë∂ÖËøáÊúÄÂ§ßÂ§ßÂ∞èÁöÑ 3&#x2F;4 Êó∂‰ºöËøõË°åÊâ©ÂÆπÔºåÊñ∞ map Â§ßÂ∞è‰∏∫ 2 ÂÄç„ÄÇÊâ©ÂÆπÊó∂‰ªéÁ¨¨‰∏Ä‰∏™entry ÂºÄÂßãÔºå‰æùÊ¨°ÂæÄÊñ∞ map ÈáåËøÅÁßªÔºåÂΩì‰∏≠‰ºö‰∏¢ÂºÉÊéâ key ‰∏∫ null ÁöÑ„ÄÇ</p>
<h1 id="‚ë£Á∫øÁ®ãÊ±†"><a href="#‚ë£Á∫øÁ®ãÊ±†" class="headerlink" title="‚ë£Á∫øÁ®ãÊ±†"></a>‚ë£Á∫øÁ®ãÊ±†</h1><h2 id="üåü‰ªÄ‰πàÊòØÁ∫øÁ®ãÊ±†Ôºü"><a href="#üåü‰ªÄ‰πàÊòØÁ∫øÁ®ãÊ±†Ôºü" class="headerlink" title="üåü‰ªÄ‰πàÊòØÁ∫øÁ®ãÊ±†Ôºü"></a>üåü‰ªÄ‰πàÊòØÁ∫øÁ®ãÊ±†Ôºü</h2><p>Á∫øÁ®ãÊ±†Ôºö‰∏Ä‰∏™ÂÆπÁ∫≥Â§ö‰∏™Á∫øÁ®ãÁöÑÂÆπÂô®ÔºåÂÆπÂô®‰∏≠ÁöÑÁ∫øÁ®ãÂèØ‰ª•ÈáçÂ§ç‰ΩøÁî®ÔºåÈÅøÂÖçÈ¢ëÁπÅÂàõÂª∫ÂíåÈîÄÊØÅÁ∫øÁ®ãÂØπË±°ÁöÑÊìç‰Ωú</p>
<p>Á∫øÁ®ãÊ±†ÁöÑÊ†∏ÂøÉÊÄùÊÉ≥Ôºö<strong>Á∫øÁ®ãÂ§çÁî®</strong>ÔºåÂêå‰∏Ä‰∏™Á∫øÁ®ãÂèØ‰ª•Ë¢´ÈáçÂ§ç‰ΩøÁî®ÔºåÊù•Â§ÑÁêÜÂ§ö‰∏™‰ªªÂä°</p>
<p>Ê±†ÂåñÊäÄÊúØ (Pool) Ôºö‰∏ÄÁßçÁºñÁ®ãÊäÄÂ∑ßÔºåÊ†∏ÂøÉÊÄùÊÉ≥ÊòØËµÑÊ∫êÂ§çÁî®ÔºåÂú®ËØ∑Ê±ÇÈáèÂ§ßÊó∂ËÉΩ‰ºòÂåñÂ∫îÁî®ÊÄßËÉΩÔºåÈôç‰ΩéÁ≥ªÁªüÈ¢ëÁπÅÂª∫ËøûÁöÑËµÑÊ∫êÂºÄÈîÄ</p>
<h2 id="üåü‰∏∫‰ªÄ‰πàË¶ÅÁî®Á∫øÁ®ãÊ±†Ôºü"><a href="#üåü‰∏∫‰ªÄ‰πàË¶ÅÁî®Á∫øÁ®ãÊ±†Ôºü" class="headerlink" title="üåü‰∏∫‰ªÄ‰πàË¶ÅÁî®Á∫øÁ®ãÊ±†Ôºü"></a>üåü‰∏∫‰ªÄ‰πàË¶ÅÁî®Á∫øÁ®ãÊ±†Ôºü</h2><blockquote>
<p>‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®ExecutorÁ∫øÁ®ãÊ±†Ê°ÜÊû∂Âë¢ÔºüËØ¥‰∏ãÂØπÁ∫øÁ®ãÊ±†ÁöÑÁêÜËß£Ôºü</p>
</blockquote>
<p>Á∫øÁ®ãÊ±†ËÉΩÂ§üÂØπÁ∫øÁ®ãËøõË°åÁªü‰∏ÄÂàÜÈÖçÔºåË∞É‰ºòÂíåÁõëÊéß:</p>
<ul>
<li><strong>Èôç‰ΩéËµÑÊ∫êÊ∂àËÄó</strong>„ÄÇÈÄöËøáÈáçÂ§çÂà©Áî®Â∑≤ÂàõÂª∫ÁöÑÁ∫øÁ®ãÈôç‰ΩéÁ∫øÁ®ãÂàõÂª∫ÂíåÈîÄÊØÅÈÄ†ÊàêÁöÑÊ∂àËÄó„ÄÇ</li>
<li><strong>ÊèêÈ´òÂìçÂ∫îÈÄüÂ∫¶</strong>„ÄÇÂΩì‰ªªÂä°Âà∞ËææÊó∂Ôºå‰ªªÂä°ÂèØ‰ª•‰∏çÈúÄË¶ÅÁ≠âÂà∞Á∫øÁ®ãÂàõÂª∫Â∞±ËÉΩÁ´ãÂç≥ÊâßË°å„ÄÇ</li>
<li><strong>ÊèêÈ´òÁ∫øÁ®ãÁöÑÂèØÁÆ°ÁêÜÊÄß</strong>„ÄÇ‰ΩøÁî®Á∫øÁ®ãÊ±†ÂèØ‰ª•ÂØπÁ∫øÁ®ãËøõË°åÁªü‰∏ÄÁöÑÂàÜÈÖç„ÄÅË∞É‰ºòÂíåÁõëÊéß„ÄÇ</li>
</ul>
<p>Áº∫ÁÇπ</p>
<ul>
<li>Ê≠ªÈîÅ</li>
<li>Á∫øÁ®ãÊ≥ÑÈú≤</li>
</ul>
<h2 id="üåüÁ∫øÁ®ãÊ±†ÂàõÂª∫ÁöÑÊñπÊ≥ï"><a href="#üåüÁ∫øÁ®ãÊ±†ÂàõÂª∫ÁöÑÊñπÊ≥ï" class="headerlink" title="üåüÁ∫øÁ®ãÊ±†ÂàõÂª∫ÁöÑÊñπÊ≥ï"></a>üåüÁ∫øÁ®ãÊ±†ÂàõÂª∫ÁöÑÊñπÊ≥ï</h2><blockquote>
<p>„ÄäÈòøÈáåÂ∑¥Â∑¥ Java ÂºÄÂèëÊâãÂÜå„Äã‰∏≠Âº∫Âà∂Á∫øÁ®ãÊ±†‰∏çÂÖÅËÆ∏‰ΩøÁî® Executors ÂéªÂàõÂª∫ÔºåËÄåÊòØÈÄöËøá ThreadPoolExecutor ÁöÑÊñπÂºèÔºåËøôÊ†∑ÁöÑÂ§ÑÁêÜÊñπÂºèËÆ©ÂÜôÁöÑÂêåÂ≠¶Êõ¥Âä†ÊòéÁ°ÆÁ∫øÁ®ãÊ±†ÁöÑËøêË°åËßÑÂàôÔºåËßÑÈÅøËµÑÊ∫êËÄóÂ∞ΩÁöÑÈ£éÈô©</p>
</blockquote>
<p>Á∫øÁ®ãÊ±†ÁöÑÂ∏∏Áî®ÂàõÂª∫ÊñπÂºè‰∏ªË¶ÅÊúâ‰∏§ÁßçÔºåÈÄöËøáÈÄöËøáThreadPoolExecutor ÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂàõÂª∫ÂíåExecutorsÂ∑•ÂéÇÊñπÊ≥ïÂàõÂª∫</p>
<p>ÊñπÂºè‰∏ÄÔºö<strong>ÈÄöËøá ThreadPoolExecutor ÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂÆûÁé∞</strong>Ôºö</p>
<p><img src="https://img.jwt1399.top/img/202306021024822.jpeg" alt="ThreadPoolExecutorÊûÑÈÄ†ÊñπÊ≥ï"></p>
<p>ÊñπÂºè‰∫åÔºö<strong>ÈÄöËøá Executor Ê°ÜÊû∂ÁöÑÂ∑•ÂÖ∑Á±ª Executors Êù•ÂÆûÁé∞</strong>ÔºåÊåâÁÖßÂÖ∂ËÆæËÆ°Â•ΩÁöÑ‰∏â‰∏™Á∫øÁ®ãÊ±†Ê®°ÊùøËøõË°åÂàõÂª∫</p>
<ul>
<li><strong>FixedThreadPool</strong> ÔºöËøîÂõû‰∏Ä‰∏™Âõ∫ÂÆöÁ∫øÁ®ãÊï∞ÈáèÁöÑÁ∫øÁ®ãÊ±†„ÄÇËØ•Á∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞ÈáèÂßãÁªà‰∏çÂèò„ÄÇÂΩìÊúâ‰∏Ä‰∏™Êñ∞ÁöÑ‰ªªÂä°Êèê‰∫§Êó∂ÔºåÁ∫øÁ®ãÊ±†‰∏≠Ëã•ÊúâÁ©∫Èó≤Á∫øÁ®ãÔºåÂàôÁ´ãÂç≥ÊâßË°å„ÄÇËã•Ê≤°ÊúâÔºåÂàôÊñ∞ÁöÑ‰ªªÂä°‰ºöË¢´ÊöÇÂ≠òÂú®‰∏Ä‰∏™‰ªªÂä°ÈòüÂàó‰∏≠ÔºåÂæÖÊúâÁ∫øÁ®ãÁ©∫Èó≤Êó∂Ôºå‰æøÂ§ÑÁêÜÂú®‰ªªÂä°ÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°„ÄÇ</li>
<li><strong>SingleThreadExecutorÔºö</strong> ËøîÂõû‰∏Ä‰∏™Âè™Êúâ‰∏Ä‰∏™Á∫øÁ®ãÁöÑÁ∫øÁ®ãÊ±†„ÄÇËã•Â§ö‰Ωô‰∏Ä‰∏™‰ªªÂä°Ë¢´Êèê‰∫§Âà∞ËØ•Á∫øÁ®ãÊ±†Ôºå‰ªªÂä°‰ºöË¢´‰øùÂ≠òÂú®‰∏Ä‰∏™‰ªªÂä°ÈòüÂàó‰∏≠ÔºåÂæÖÁ∫øÁ®ãÁ©∫Èó≤ÔºåÊåâÂÖàÂÖ•ÂÖàÂá∫ÁöÑÈ°∫Â∫èÊâßË°åÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°„ÄÇ</li>
<li><strong>CachedThreadPoolÔºö</strong>ËøîÂõû‰∏Ä‰∏™ÂèØÊ†πÊçÆÂÆûÈôÖÊÉÖÂÜµË∞ÉÊï¥Á∫øÁ®ãÊï∞ÈáèÁöÑÁ∫øÁ®ãÊ±†„ÄÇÁ∫øÁ®ãÊ±†ÁöÑÁ∫øÁ®ãÊï∞Èáè‰∏çÁ°ÆÂÆöÔºå‰ΩÜËã•ÊúâÁ©∫Èó≤Á∫øÁ®ãÂèØ‰ª•Â§çÁî®ÔºåÂàô‰ºö‰ºòÂÖà‰ΩøÁî®ÂèØÂ§çÁî®ÁöÑÁ∫øÁ®ã„ÄÇËã•ÊâÄÊúâÁ∫øÁ®ãÂùáÂú®Â∑•‰ΩúÔºåÂèàÊúâÊñ∞ÁöÑ‰ªªÂä°Êèê‰∫§ÔºåÂàô‰ºöÂàõÂª∫Êñ∞ÁöÑÁ∫øÁ®ãÂ§ÑÁêÜ‰ªªÂä°„ÄÇÊâÄÊúâÁ∫øÁ®ãÂú®ÂΩìÂâç‰ªªÂä°ÊâßË°åÂÆåÊØïÂêéÔºåÂ∞ÜËøîÂõûÁ∫øÁ®ãÊ±†ËøõË°åÂ§çÁî®„ÄÇ</li>
</ul>
<h2 id="üåü‰∏çÂÖÅËÆ∏‰ΩøÁî®ExecutorsÂàõÂª∫Á∫øÁ®ãÊ±†"><a href="#üåü‰∏çÂÖÅËÆ∏‰ΩøÁî®ExecutorsÂàõÂª∫Á∫øÁ®ãÊ±†" class="headerlink" title="üåü‰∏çÂÖÅËÆ∏‰ΩøÁî®ExecutorsÂàõÂª∫Á∫øÁ®ãÊ±†?"></a>üåü‰∏çÂÖÅËÆ∏‰ΩøÁî®ExecutorsÂàõÂª∫Á∫øÁ®ãÊ±†?</h2><p>„ÄäÈòøÈáåÂ∑¥Â∑¥ Java ÂºÄÂèëÊâãÂÜå„Äã‰∏≠Âº∫Âà∂Á∫øÁ®ãÊ±†‰∏çÂÖÅËÆ∏‰ΩøÁî® Executors ÂéªÂàõÂª∫ÔºåËÄåÊòØÈÄöËøá ThreadPoolExecutor ÁöÑÊñπÂºè</p>
<ul>
<li><p>1„ÄÅExecutorsÊèê‰æõÁöÑÊ®°Êùø‰∏çÂ§üÁÅµÊ¥ªÔºåÂ§öÊï∞ÊÉÖÂÜµÈúÄË¶ÅÁ®ãÂ∫èÂëòËá™ÂÆö‰πâÁ∫øÁ®ãÊ±†</p>
</li>
<li><p>2„ÄÅÊ®°ÊùøÂÆπÊòìÈÄ†ÊàêÂÜÖÂ≠òÊ∫¢Âá∫Ôºà1Âíå2ÈòüÂàóËøáËΩΩ„ÄÅ3Á∫øÁ®ãÊ±†ËøáËΩΩÔºâ</p>
<ul>
<li><strong>FixedThreadPool Âíå SingleThreadExecutor</strong> Ôºö ÂÖÅËÆ∏ËØ∑Ê±ÇÁöÑÈòüÂàóÈïøÂ∫¶‰∏∫ Integer.MAX_VALUE ÔºåÂèØËÉΩÂ†ÜÁßØÂ§ßÈáèÁöÑËØ∑Ê±ÇÔºå‰ªéËÄåÂØºËá¥ OOM„ÄÇ</li>
</ul>
</li>
<li><p><strong>CachedThreadPool</strong> ÔºöÂÖÅËÆ∏ÂàõÂª∫ÁöÑÁ∫øÁ®ãÊï∞Èáè‰∏∫ Integer.MAX_VALUE ÔºåÂèØËÉΩ‰ºöÂàõÂª∫Â§ßÈáèÁ∫øÁ®ãÔºå‰ªéËÄåÂØºËá¥ OOM„ÄÇ</p>
</li>
</ul>
<h2 id="üåüThreadPoolExecutorÊûÑÈÄ†ÂáΩÊï∞ÂèÇÊï∞ÂàÜÊûê"><a href="#üåüThreadPoolExecutorÊûÑÈÄ†ÂáΩÊï∞ÂèÇÊï∞ÂàÜÊûê" class="headerlink" title="üåüThreadPoolExecutorÊûÑÈÄ†ÂáΩÊï∞ÂèÇÊï∞ÂàÜÊûê"></a>üåüThreadPoolExecutorÊûÑÈÄ†ÂáΩÊï∞ÂèÇÊï∞ÂàÜÊûê</h2><pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token function">ThreadPoolExecutor</span><span class="token punctuation">(</span><span class="token keyword">int</span> corePoolSize<span class="token punctuation">,</span><span class="token comment" spellcheck="true">//Á∫øÁ®ãÊ±†ÁöÑÊ†∏ÂøÉÁ∫øÁ®ãÊï∞Èáè</span>
                          <span class="token keyword">int</span> maximumPoolSize<span class="token punctuation">,</span><span class="token comment" spellcheck="true">//Á∫øÁ®ãÊ±†ÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞</span>
                          <span class="token keyword">long</span> keepAliveTime<span class="token punctuation">,</span><span class="token comment" spellcheck="true">//ÂΩìÁ∫øÁ®ãÊï∞Â§ß‰∫éÊ†∏ÂøÉÁ∫øÁ®ãÊï∞Êó∂ÔºåÂ§ö‰ΩôÁöÑÁ©∫Èó≤Á∫øÁ®ãÂ≠òÊ¥ªÁöÑÊúÄÈïøÊó∂Èó¥</span>
                          TimeUnit unit<span class="token punctuation">,</span><span class="token comment" spellcheck="true">//Êó∂Èó¥Âçï‰Ωç</span>
                          BlockingQueue<span class="token operator">&lt;</span>Runnable<span class="token operator">></span> workQueue<span class="token punctuation">,</span><span class="token comment" spellcheck="true">//‰ªªÂä°ÈòüÂàóÔºåÂÇ®Â≠òÁ≠âÂæÖÊâßË°å‰ªªÂä°ÁöÑÈòüÂàó</span>
                          ThreadFactory threadFactory<span class="token punctuation">,</span><span class="token comment" spellcheck="true">//Á∫øÁ®ãÂ∑•ÂéÇÔºåÁî®Êù•ÂàõÂª∫Á∫øÁ®ãÔºå‰∏ÄËà¨ÈªòËÆ§Âç≥ÂèØ</span>
                          RejectedExecutionHandler handler<span class="token comment" spellcheck="true">//ÊãíÁªùÁ≠ñÁï•ÔºåÂΩìÊèê‰∫§ÁöÑ‰ªªÂä°ËøáÂ§öËÄå‰∏çËÉΩÂèäÊó∂Â§ÑÁêÜÊó∂ÔºåÊàë‰ª¨ÂèØ‰ª•ÂÆöÂà∂Á≠ñÁï•Êù•Â§ÑÁêÜ‰ªªÂä°</span>
                               <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>corePoolSize <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span>
            maximumPoolSize <span class="token operator">&lt;=</span> <span class="token number">0</span> <span class="token operator">||</span>
            maximumPoolSize <span class="token operator">&lt;</span> corePoolSize <span class="token operator">||</span>
            keepAliveTime <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>workQueue <span class="token operator">==</span> null <span class="token operator">||</span> threadFactory <span class="token operator">==</span> null <span class="token operator">||</span> handler <span class="token operator">==</span> null<span class="token punctuation">)</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>corePoolSize <span class="token operator">=</span> corePoolSize<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>maximumPoolSize <span class="token operator">=</span> maximumPoolSize<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>workQueue <span class="token operator">=</span> workQueue<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>keepAliveTime <span class="token operator">=</span> unit<span class="token punctuation">.</span><span class="token function">toNanos</span><span class="token punctuation">(</span>keepAliveTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>threadFactory <span class="token operator">=</span> threadFactory<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>handler <span class="token operator">=</span> handler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p><strong><code>corePoolSizeÔºàÁ∫øÁ®ãÊ±†ÁöÑÂü∫Êú¨Â§ßÂ∞èÔºâ</code></strong> ÔºöÊ†∏ÂøÉÁ∫øÁ®ãÊï∞ÔºåÂÆö‰πâ‰∫ÜÊúÄÂ∞èÂèØ‰ª•ÂêåÊó∂ËøêË°åÁöÑÁ∫øÁ®ãÊï∞Èáè„ÄÇ</p>
</li>
<li><p><strong><code>maximumPoolSizeÔºàÁ∫øÁ®ãÊ±†ÊúÄÂ§ßÊï∞ÈáèÔºâ</code></strong> ÔºöÁ∫øÁ®ã‰∏≠ÂÖÅËÆ∏Â≠òÂú®ÁöÑÊúÄÂ§ßÂ∑•‰ΩúÁ∫øÁ®ãÊï∞Èáè</p>
</li>
<li><p><code>keepAliveTimeÔºàÁ∫øÁ®ãÊ¥ªÂä®‰øùÊåÅÊó∂Èó¥Ôºâ</code>ÔºöÂΩìÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÊï∞ÈáèÂ§ß‰∫éÊ†∏ÂøÉÁ∫øÁ®ãÊï∞Êó∂ÔºåÂ¶ÇÊûúÊ≤°ÊúâÊñ∞ÁöÑ‰ªªÂä°Êèê‰∫§ÔºåÊ†∏ÂøÉÁ∫øÁ®ã‰πãÂ§ñÁöÑÁ∫øÁ®ã‰∏ç‰ºöÁ´ãÂç≥ÈîÄÊØÅÔºåËÄåÊòØ‰ºöÁ≠âÂà∞Êó∂Èó¥Ë∂ÖËøá<code>keepAliveTime</code>Êó∂Êâç‰ºöË¢´ÈîÄÊØÅ„ÄÇ</p>
</li>
<li><p><code>unitÔºàÁ∫øÁ®ãÊ¥ªÂä®‰øùÊåÅÊó∂Èó¥ÁöÑÂçï‰ΩçÔºâ</code> Ôºö<code>keepAliveTime</code> ÂèÇÊï∞ÁöÑÊó∂Èó¥Âçï‰Ωç„ÄÇÂèØÈÄâÁöÑÂçï‰ΩçÊúâÂ§©ÔºàDAYSÔºâ„ÄÅÂ∞èÊó∂ÔºàHOURSÔºâ„ÄÅÂàÜÈíüÔºàMINUTESÔºâ„ÄÅÊØ´ÁßíÔºàMILLISECONDSÔºâ„ÄÅÂæÆÁßíÔºàMICROSECONDSÔºåÂçÉÂàÜ‰πã‰∏ÄÊØ´ÁßíÔºâÂíåÁ∫≥ÁßíÔºàNANOSECONDSÔºåÂçÉÂàÜ‰πã‰∏ÄÂæÆÁßíÔºâ„ÄÇ</p>
</li>
<li><p>**<code>workQueueÔºà‰ªªÂä°ÈòüÂàóÔºâ</code>**ÔºöÂ≠òÊîæ‰ªªÂä°ÁöÑÈòªÂ°ûÈòüÂàó„ÄÇÊñ∞Êù•ÁöÑ‰ªªÂä°‰ºöÂÖàÂà§Êñ≠ÂΩìÂâçËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÊòØÂê¶Âà∞ËææÊ†∏ÂøÉÁ∫øÁ®ãÊï∞ÔºåÂ¶ÇÊûúÂà∞ËææÁöÑËØùÔºå‰ªªÂä°Â∞±‰ºöÂÖàÊîæÂà∞ÈòªÂ°ûÈòüÂàó„ÄÇ</p>
</li>
<li><p><code>threadFactoryÔºàÁ∫øÁ®ãÂ∑•ÂéÇÔºâ</code>Ôºö‰∏∫Á∫øÁ®ãÊ±†Êèê‰æõÂàõÂª∫Êñ∞Á∫øÁ®ãÁöÑÁ∫øÁ®ãÂ∑•ÂéÇ„ÄÇ</p>
</li>
<li><p><code>handlerÔºàÈ•±ÂíåÁ≠ñÁï•Ôºâ</code> ÔºöÂΩìÂêåÊó∂ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèËææÂà∞ÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÈáèÂπ∂‰∏îÈòªÂ°ûÈòüÂàó‰πüÂ∑≤ÁªèÊîæÊª°‰∫Ü‰ªªÂä°Êó∂ÁöÑÊãíÁªùÁ≠ñÁï•„ÄÇ</p>
</li>
</ul>
<h2 id="üåüThreadPoolExecutorÁöÑ‰ªªÂä°ÈòüÂàó"><a href="#üåüThreadPoolExecutorÁöÑ‰ªªÂä°ÈòüÂàó" class="headerlink" title="üåüThreadPoolExecutorÁöÑ‰ªªÂä°ÈòüÂàó"></a>üåüThreadPoolExecutorÁöÑ‰ªªÂä°ÈòüÂàó</h2><p>ÂèØ‰ª•ÈÄâÊã©‰ª•‰∏ãÂá†‰∏™ÈòªÂ°ûÈòüÂàóÔºöÔºàÈÉΩÊòØBlockingQueue ÁöÑÂÆûÁé∞Á±ªÔºâ</p>
<ul>
<li><p>1ÔºâArrayBlockingQueueÔºöÊòØ‰∏Ä‰∏™Âü∫‰∫éÊï∞ÁªÑÁªìÊûÑÁöÑÊúâÁïåÈòªÂ°ûÈòüÂàóÔºåÊ≠§ÈòüÂàóÊåâ FIFO ÂéüÂàôÂØπÂÖÉÁ¥†ËøõË°åÊéíÂ∫è„ÄÇ</p>
</li>
<li><p>2ÔºâLinkedBlockingQueueÔºö‰∏Ä‰∏™Âü∫‰∫éÈìæË°®ÁªìÊûÑÁöÑÈòªÂ°ûÈòüÂàóÔºåÊ≠§ÈòüÂàóÊåâ FIFO ÊéíÂ∫èÂÖÉÁ¥†ÔºåÂêûÂêêÈáèÈÄöÂ∏∏Ë¶ÅÈ´ò‰∫é ArrayBlockingQueue„ÄÇÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ï Executors.newFixedThreadPool() ‰ΩøÁî®‰∫ÜËøô‰∏™ÈòüÂàó„ÄÇ</p>
</li>
<li><p>3ÔºâSynchronousQueueÔºö‰∏Ä‰∏™‰∏çÂ≠òÂÇ®ÂÖÉÁ¥†ÁöÑÈòªÂ°ûÈòüÂàó„ÄÇÊØè‰∏™ÊèíÂÖ•Êìç‰ΩúÂøÖÈ°ªÁ≠âÂà∞Âè¶‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®ÁßªÈô§Êìç‰ΩúÔºåÂê¶ÂàôÊèíÂÖ•Êìç‰Ωú‰∏ÄÁõ¥Â§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºåÂêûÂêêÈáèÈÄöÂ∏∏Ë¶ÅÈ´ò‰∫é LinkedBlockingQueueÔºåÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ï Executors.newCachedThreadPool ‰ΩøÁî®‰∫ÜËøô‰∏™ÈòüÂàó„ÄÇ</p>
</li>
<li><p>4ÔºâPriorityBlockingQueueÔºö‰∏Ä‰∏™ÂÖ∑Êúâ‰ºòÂÖàÁ∫ßÁöÑÊó†ÈôêÈòªÂ°ûÈòüÂàó„ÄÇ</p>
</li>
</ul>
<h2 id="üåüThreadPoolExecutorÁöÑÈ•±ÂíåÁ≠ñÁï•"><a href="#üåüThreadPoolExecutorÁöÑÈ•±ÂíåÁ≠ñÁï•" class="headerlink" title="üåüThreadPoolExecutorÁöÑÈ•±ÂíåÁ≠ñÁï•"></a>üåüThreadPoolExecutorÁöÑÈ•±ÂíåÁ≠ñÁï•</h2><blockquote>
<p>ËØ¥ËØ¥ThreadPoolExecutorÊúâÂì™‰∫õRejectedExecutionHandlerÁ≠ñÁï•? ÈªòËÆ§ÊòØ‰ªÄ‰πàÁ≠ñÁï•?</p>
<p>ÂΩìÈòüÂàóÊª°‰∫ÜÂπ∂‰∏îworkerÁöÑÊï∞ÈáèËææÂà∞maxSizeÁöÑÊó∂ÂÄôÔºå‰ºöÊÄé‰πàÊ†∑? ÊâßË°åÂÖ∑‰ΩìÁöÑÊãíÁªùÁ≠ñÁï•</p>
</blockquote>
<p>ÂΩìÂêåÊó∂ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèËææÂà∞ÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÈáèÂπ∂‰∏îÈòªÂ°ûÈòüÂàó‰πüÂ∑≤ÁªèÊîæÊª°‰∫Ü‰ªªÂä°Êó∂Ôºå<code>ThreadPoolExecutor</code>‰ºöÊåáÂÆö‰∏Ä‰∫õÈ•±ÂíåÁ≠ñÁï•„ÄÇ‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂõõÁßçÁ±ªÂûãÔºö</p>
<ul>
<li><code>AbortPolicy</code>Á≠ñÁï•ÔºöËØ•Á≠ñÁï•‰ºöÁõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏ÊãíÁªùÊñ∞‰ªªÂä°Ôºå<strong>ÈªòËÆ§Á≠ñÁï•</strong></li>
<li><code>CallerRunsPolicy</code>Á≠ñÁï•ÔºöÂè™Áî®Ë∞ÉÁî®ËÄÖÊâÄÂú®Á∫øÁ®ãÊù•ËøêË°å‰ªªÂä°„ÄÇ</li>
<li><code>DiscardPolicy</code>Á≠ñÁï•ÔºöÁõ¥Êé•‰∏¢ÂºÉÊñ∞‰ªªÂä°„ÄÇ</li>
<li><code>DiscardOldestPolicy</code>Á≠ñÁï•Ôºö‰∏¢ÂºÉÊúÄÊó©ÁöÑÊú™Â§ÑÁêÜÁöÑ‰ªªÂä°ËØ∑Ê±Ç„ÄÇ</li>
</ul>
<p>ÂΩìÁÑ∂Ôºå‰πüÂèØ‰ª•Ê†πÊçÆÂ∫îÁî®Âú∫ÊôØÈúÄË¶ÅÊù•ÂÆûÁé∞ RejectedExecutionHandler Êé•Âè£Ëá™ÂÆö‰πâÁ≠ñÁï•„ÄÇÂ¶ÇËÆ∞ÂΩïÊó•ÂøóÊàñÊåÅ‰πÖÂåñÂ≠òÂÇ®‰∏çËÉΩÂ§ÑÁêÜÁöÑ‰ªªÂä°„ÄÇ</p>
<p>Ë°•ÂÖÖÔºöÂÖ∂‰ªñÊ°ÜÊû∂ÊãíÁªùÁ≠ñÁï•</p>
<ul>
<li>DubboÔºöÂú®ÊäõÂá∫ RejectedExecutionException ÂºÇÂ∏∏ÂâçËÆ∞ÂΩïÊó•ÂøóÔºåÂπ∂ dump Á∫øÁ®ãÊ†à‰ø°ÊÅØÔºåÊñπ‰æøÂÆö‰ΩçÈóÆÈ¢ò</li>
<li>NettyÔºöÂàõÂª∫‰∏Ä‰∏™Êñ∞Á∫øÁ®ãÊù•ÊâßË°å‰ªªÂä°</li>
<li>ActiveMQÔºöÂ∏¶Ë∂ÖÊó∂Á≠âÂæÖÔºà60sÔºâÂ∞ùËØïÊîæÂÖ•ÈòüÂàó</li>
<li>PinPointÔºöÂÆÉ‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÊãíÁªùÁ≠ñÁï•ÈìæÔºå‰ºöÈÄê‰∏ÄÂ∞ùËØïÁ≠ñÁï•Èìæ‰∏≠ÊØèÁßçÊãíÁªùÁ≠ñÁï•</li>
</ul>
<h2 id="üåüÁ∫øÁ®ãÊ±†ÁöÑËøêË°åÊµÅÁ®ã"><a href="#üåüÁ∫øÁ®ãÊ±†ÁöÑËøêË°åÊµÅÁ®ã" class="headerlink" title="üåüÁ∫øÁ®ãÊ±†ÁöÑËøêË°åÊµÅÁ®ã"></a>üåüÁ∫øÁ®ãÊ±†ÁöÑËøêË°åÊµÅÁ®ã</h2><blockquote>
<p>ÂÅáÂ¶ÇÊàëÊää corepoolsize Âíå maxpoolsize ÂàÜÂà´ËÆæÁΩÆ‰∏∫ 5 Âíå 10ÔºåÂÅáËÆæ‰ªªÂä°ËÆ°ÁÆóÊó∂Èó¥ÂæàÈïøÔºåÊàëÂæÄÈáåÈù¢ËøûÁª≠ÊîæÂÖ• 20 ‰∏™‰ªªÂä°ÔºåÊåâÊó∂Èó¥È°∫Â∫è‰ºöÂèëÁîü‰ªÄ‰πà</p>
</blockquote>
<p>ÂàõÂª∫Á∫øÁ®ãÊ±†ÂàõÂª∫ÂêéÊèê‰∫§‰ªªÂä°ÁöÑÊµÅÁ®ãÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö</p>
<p><img src="https://img.jwt1399.top/img/202301041523688.png" alt="Á∫øÁ®ãÊ±†ÊâßË°åÊµÅÁ®ã"></p>
<p><img src="https://img.jwt1399.top/img/202301031724574.png"></p>
<ol>
<li><p>ÂàõÂª∫Á∫øÁ®ãÊ±†Êó∂ÔºåÊ≤°ÊúâÁ∫øÁ®ãÔºåÁ≠âÂæÖÊèê‰∫§ËøáÊù•ÁöÑ‰ªªÂä°ËØ∑Ê±ÇÔºà<strong>ÊáíÊÉ∞</strong>ÔºâÔºåË∞ÉÁî® execute ÊñπÊ≥ïÊâç‰ºöÂàõÂª∫Á∫øÁ®ã„Äê‚ë†„Äë</p>
</li>
<li><p>ÂΩìË∞ÉÁî® execute() ÊñπÊ≥ïÊ∑ªÂä†‰∏Ä‰∏™ËØ∑Ê±Ç‰ªªÂä°Êó∂ÔºåÁ∫øÁ®ãÊ±†‰ºöÂÅöÂ¶Ç‰∏ãÂà§Êñ≠Ôºö</p>
<ul>
<li>Â¶ÇÊûúÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ∞è‰∫é corePoolSizeÔºåÈÇ£‰πàÈ©¨‰∏äÂàõÂª∫Á∫øÁ®ãËøêË°åËøô‰∏™‰ªªÂä°„Äê‚ë°„Äë</li>
<li>Â¶ÇÊûúÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÊàñÁ≠â‰∫é corePoolSizeÔºåÈÇ£‰πàÂ∞ÜËøô‰∏™‰ªªÂä°ÊîæÂÖ•ÈòüÂàó„Äê‚ë¢„Äë</li>
<li>Â¶ÇÊûúËøôÊó∂ÈòüÂàóÊª°‰∫Ü‰∏îÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèËøòÂ∞è‰∫é maximumPoolSizeÔºåÈÇ£‰πà‰ºöÂàõÂª∫ÈùûÊ†∏ÂøÉÁ∫øÁ®ãÁ´ãÂàªËøêË°åËøô‰∏™‰ªªÂä°„Äê‚ë£„Äë</li>
<li>Â¶ÇÊûúÈòüÂàóÊª°‰∫Ü‰∏îÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÊàñÁ≠â‰∫é maximumPoolSizeÔºåÈÇ£‰πàÁ∫øÁ®ãÊ±†‰ºöÂêØÂä®È•±Âíå<strong>ÊãíÁªùÁ≠ñÁï•</strong>Êù•ÊâßË°å„Äê‚ë§„Äë</li>
</ul>
</li>
<li><p>ÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂÆåÊàê‰ªªÂä°Êó∂Ôºå‰ºö‰ªéÈòüÂàó‰∏≠Âèñ‰∏ã‰∏Ä‰∏™‰ªªÂä°Êù•ÊâßË°å„Äêtake&#x2F;poll„Äë</p>
</li>
<li><p>ÂΩì‰∏Ä‰∏™Á∫øÁ®ãÁ©∫Èó≤Ë∂ÖËøá‰∏ÄÂÆöÁöÑÊó∂Èó¥ÔºàkeepAliveTimeÔºâÊó∂ÔºåÁ∫øÁ®ãÊ±†‰ºöÂà§Êñ≠ÔºöÂ¶ÇÊûúÂΩìÂâçËøêË°åÁöÑÁ∫øÁ®ãÊï∞Â§ß‰∫é corePoolSizeÔºåÈÇ£‰πàËøô‰∏™Á∫øÁ®ãÂ∞±Ë¢´ÂÅúÊéâ„ÄÇÁ∫øÁ®ãÊ±†ÁöÑÊâÄÊúâ‰ªªÂä°ÂÆåÊàêÂêéÊúÄÁªà‰ºöÊî∂Áº©Âà∞ corePoolSize Â§ßÂ∞è</p>
</li>
</ol>
<h2 id="üåüÁ∫øÁ®ãÊ±†‰∏≠‰ªªÂä°ÊòØÂ¶Ç‰ΩïÊèê‰∫§ÁöÑ"><a href="#üåüÁ∫øÁ®ãÊ±†‰∏≠‰ªªÂä°ÊòØÂ¶Ç‰ΩïÊèê‰∫§ÁöÑ" class="headerlink" title="üåüÁ∫øÁ®ãÊ±†‰∏≠‰ªªÂä°ÊòØÂ¶Ç‰ΩïÊèê‰∫§ÁöÑ?"></a>üåüÁ∫øÁ®ãÊ±†‰∏≠‰ªªÂä°ÊòØÂ¶Ç‰ΩïÊèê‰∫§ÁöÑ?</h2><p>ÊñπÂºè‰∏ÄÔºöÊèê‰∫§Êó†ËøîÂõûÂÄºÁöÑ‰ªªÂä° <code>execute()</code></p>
<p>ÊñπÂºè‰∫åÔºöÊèê‰∫§ÊúâËøîÂõûÂÄºÁöÑ‰ªªÂä° <code>submit()</code></p>
<p>execute()ÔºöÊâßË°å‰ªªÂä°Ôºå<strong>‰ΩÜÊòØÊ≤°ÊúâËøîÂõûÂÄºÔºåÊ≤°ÂäûÊ≥ïËé∑Âèñ‰ªªÂä°ÊâßË°åÁªìÊûú</strong>ÔºåÂá∫Áé∞ÂºÇÂ∏∏‰ºöÁõ¥Êé•ÊäõÂá∫‰ªªÂä°ÊâßË°åÊó∂ÁöÑÂºÇÂ∏∏„ÄÇÊ†πÊçÆÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞ÔºåÈÄâÊã©Ê∑ªÂä†‰ªªÂä°Êó∂ÁöÑÂ§ÑÁêÜÊñπÂºè</p>
<p>submit()ÔºöÊèê‰∫§‰ªªÂä°Ôºå<strong>Êää Runnable Êàñ Callable ‰ªªÂä°Â∞ÅË£ÖÊàê FutureTask ÊâßË°å</strong>ÔºåÂèØ‰ª•ÈÄöËøáÊñπÊ≥ïËøîÂõûÁöÑ‰ªªÂä°ÂØπË±°ÔºåË∞ÉÁî® get ÈòªÂ°ûËé∑Âèñ‰ªªÂä°ÊâßË°åÁöÑÁªìÊûúÊàñËÄÖÂºÇÂ∏∏</p>
<h2 id="üåüexecute-ÊñπÊ≥ïÂíåsubmit-ÊñπÊ≥ïÁöÑÂå∫Âà´"><a href="#üåüexecute-ÊñπÊ≥ïÂíåsubmit-ÊñπÊ≥ïÁöÑÂå∫Âà´" class="headerlink" title="üåüexecute()ÊñπÊ≥ïÂíåsubmit()ÊñπÊ≥ïÁöÑÂå∫Âà´"></a>üåüexecute()ÊñπÊ≥ïÂíåsubmit()ÊñπÊ≥ïÁöÑÂå∫Âà´</h2><blockquote>
<p>Ëøô‰∏™Âú∞ÊñπÈ¶ñÂÖàË¶ÅÁü•ÈÅìRunnableÊé•Âè£ÂíåCallableÊé•Âè£ÁöÑÂå∫Âà´Ôºå‰πãÂâçÊúâÂÜôÂà∞Ëøá</p>
</blockquote>
<p><code>execute()</code>Âíå<code>submit()</code>ÁöÑÂå∫Âà´‰∏ªË¶ÅÊúâ‰∏§ÁÇπÔºö</p>
<ul>
<li><code>execute()</code>ÊñπÊ≥ïÂè™ËÉΩÊâßË°å<code>Runnable</code> Á±ªÂûãÁöÑ‰ªªÂä°ÔºåÊ≤°ÊúâËøîÂõûÂÄº„ÄÇ<code>submit()</code>ÊñπÊ≥ïÂèØ‰ª•ÊâßË°å<code>Runnable</code>Âíå <code>Callable</code>Á±ªÂûãÁöÑ‰ªªÂä°ÔºåÂΩì‰ªªÂä°Á±ªÂûã‰∏∫<code>Callable</code>Êó∂ÔºåËøîÂõûÂÄºÁ±ªÂûã‰∏∫<code>Future</code>Ôºå‰ΩÜÂΩì‰ªªÂä°Á±ªÂûã‰∏∫<code>Runnable</code>Êó∂ÔºåËøîÂõûÂÄº‰∏∫<code>null</code>„ÄÇ</li>
<li><code>execute()</code> ‰ºöÁõ¥Êé•ÊäõÂá∫‰ªªÂä°ÊâßË°åÊó∂ÁöÑÂºÇÂ∏∏Ôºå<code>submit()</code> ‰ºöÂêûÊéâÂºÇÂ∏∏ÔºåÂèØÈÄöËøá Future ÁöÑ <code>get()</code> ÊñπÊ≥ïÂ∞Ü‰ªªÂä°ÊâßË°åÊó∂ÁöÑÂºÇÂ∏∏ÈáçÊñ∞ÊäõÂá∫</li>
</ul>
<table>
<thead>
<tr>
<th align="center"><code>execute()</code>ÊñπÊ≥ï</th>
<th align="center"><code>submit()</code>ÊñπÊ≥ï</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Âú® <code>Executor</code> Êé•Âè£‰∏≠Â£∞Êòé</td>
<td align="center">Âú® <code>ExecutorService</code> Êé•Âè£‰∏≠Â£∞Êòé</td>
</tr>
<tr>
<td align="center">ÊâßË°å<code>Runnable</code> Á±ªÂûãÁöÑ‰ªªÂä°</td>
<td align="center">ÊâßË°å<code>Runnable</code>Âíå <code>Callable</code>Á±ªÂûãÁöÑ‰ªªÂä°</td>
</tr>
<tr>
<td align="center">ËøîÂõûÁ±ªÂûã‰∏∫ <code>void</code></td>
<td align="center">ËøîÂõûÁ±ªÂûã‰∏∫ <code>Future/void</code></td>
</tr>
<tr>
<td align="center">‰ºöÁõ¥Êé•ÊäõÂá∫‰ªªÂä°ÊâßË°åÊó∂ÁöÑÂºÇÂ∏∏</td>
<td align="center">‰ºöÂêûÊéâÂºÇÂ∏∏ÔºåÂèØÈÄöËøá Future ÁöÑ <code>get()</code> ÊñπÊ≥ïÂ∞Ü‰ªªÂä°ÊâßË°åÊó∂ÁöÑÂºÇÂ∏∏ÈáçÊñ∞ÊäõÂá∫</td>
</tr>
</tbody></table>
<h2 id="üåüÁ∫øÁ®ãÊ±†‰∏≠‰ªªÂä°ÊòØÂ¶Ç‰ΩïÂÖ≥Èó≠ÁöÑ"><a href="#üåüÁ∫øÁ®ãÊ±†‰∏≠‰ªªÂä°ÊòØÂ¶Ç‰ΩïÂÖ≥Èó≠ÁöÑ" class="headerlink" title="üåüÁ∫øÁ®ãÊ±†‰∏≠‰ªªÂä°ÊòØÂ¶Ç‰ΩïÂÖ≥Èó≠ÁöÑ?"></a>üåüÁ∫øÁ®ãÊ±†‰∏≠‰ªªÂä°ÊòØÂ¶Ç‰ΩïÂÖ≥Èó≠ÁöÑ?</h2><p>Á∫øÁ®ãÊ±†Ëá™Âä®ÂÖ≥Èó≠ÁöÑ‰∏§‰∏™Êù°‰ª∂Ôºö1„ÄÅÁ∫øÁ®ãÊ±†ÁöÑÂºïÁî®‰∏çÂèØËææÔºõ2„ÄÅÁ∫øÁ®ãÊ±†‰∏≠Ê≤°ÊúâÁ∫øÁ®ãÔºõ</p>
<p><code>shutdown()</code>ÔºöÁ∫øÁ®ãÊ±†Áä∂ÊÄÅÂèò‰∏∫ SHUTDOWNÔºåÁ≠âÂæÖ‰ªªÂä°ÊâßË°åÂÆåÂêéÂÖ≥Èó≠Á∫øÁ®ãÊ±†Ôºå‰∏ç‰ºöÊé•Êî∂Êñ∞‰ªªÂä°Ôºå‰ΩÜÂ∑≤Êèê‰∫§‰ªªÂä°‰ºöÊâßË°åÂÆåÔºåËÄå‰∏î‰πüÂèØ‰ª•Ê∑ªÂä†Á∫øÁ®ãÔºà‰∏çÁªëÂÆö‰ªªÂä°Ôºâ</p>
<p><code>shutdownNow()</code>ÔºöÁ∫øÁ®ãÊ±†Áä∂ÊÄÅÂèò‰∏∫ STOPÔºåÁî® interrupt ‰∏≠Êñ≠Ê≠£Âú®ÊâßË°åÁöÑ‰ªªÂä°ÔºåÁõ¥Êé•ÂÖ≥Èó≠Á∫øÁ®ãÊ±†Ôºå‰∏ç‰ºöÊé•Êî∂Êñ∞‰ªªÂä°Ôºå‰ºöÂ∞ÜÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°ËøîÂõû</p>
<p><img src="https://img.jwt1399.top/img/202301031912289.png"></p>
<h2 id="üåüÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁöÑÁ∫øÁ®ãÊï∞ÊÄé‰πàËÆæÁΩÆÔºü"><a href="#üåüÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁöÑÁ∫øÁ®ãÊï∞ÊÄé‰πàËÆæÁΩÆÔºü" class="headerlink" title="üåüÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁöÑÁ∫øÁ®ãÊï∞ÊÄé‰πàËÆæÁΩÆÔºü"></a>üåüÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁöÑÁ∫øÁ®ãÊï∞ÊÄé‰πàËÆæÁΩÆÔºü</h2><blockquote>
<p>ÈÖçÁΩÆÁ∫øÁ®ãÊ±†ÈúÄË¶ÅËÄÉËôëÂì™‰∫õÂõ†Á¥†?</p>
<p>Á∫øÁ®ãÊ±†ÈáåÁöÑÂÖ∑‰ΩìÁöÑÊï∞ÈáèÔºåÂ¶Ç‰ΩïÂéªÂÆö</p>
</blockquote>
<p>ÊÄßË¥®‰∏çÂêåÁöÑ‰ªªÂä°ÂèØÁî®‰ΩøÁî®‰∏çÂêåËßÑÊ®°ÁöÑÁ∫øÁ®ãÊ±†ÂàÜÂºÄÂ§ÑÁêÜÔºöÔºàÊ†∏ÂøÉÁ∫øÁ®ãÊï∞Â∏∏Áî®ÂÖ¨ÂºèÔºâ</p>
<ul>
<li><strong>CPU ÂØÜÈõÜÂûã‰ªªÂä°(N+1)Ôºö</strong> ËøôÁßç‰ªªÂä°Ê∂àËÄóÁöÑ‰∏ªË¶ÅÊòØ CPU ËµÑÊ∫êÔºåÂèØ‰ª•Â∞ÜÁ∫øÁ®ãÊï∞ËÆæÁΩÆ‰∏∫ NÔºàCPU Ê†∏ÂøÉÊï∞Ôºâ+1ÔºåÊØî CPU Ê†∏ÂøÉÊï∞Â§öÂá∫Êù•ÁöÑ‰∏Ä‰∏™Á∫øÁ®ãÊòØ<strong>‰∏∫‰∫ÜÈò≤Ê≠¢Á∫øÁ®ãÂÅ∂ÂèëÁöÑÁº∫È°µ‰∏≠Êñ≠ÔºåÊàñËÄÖÂÖ∂ÂÆÉÂéüÂõ†ÂØºËá¥ÁöÑ‰ªªÂä°ÊöÇÂÅúËÄåÂ∏¶Êù•ÁöÑÂΩ±Âìç</strong>„ÄÇ‰∏ÄÊó¶‰ªªÂä°ÊöÇÂÅúÔºåCPU Â∞±‰ºöÂ§Ñ‰∫éÁ©∫Èó≤Áä∂ÊÄÅÔºåËÄåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÂ§öÂá∫Êù•ÁöÑ‰∏Ä‰∏™Á∫øÁ®ãÂ∞±ÂèØ‰ª•ÂÖÖÂàÜÂà©Áî® CPU ÁöÑÁ©∫Èó≤Êó∂Èó¥„ÄÇ</li>
<li><strong>I&#x2F;O ÂØÜÈõÜÂûã‰ªªÂä°(2N)Ôºö</strong> ËøôÁßç‰ªªÂä°Á≥ªÁªü‰ºöÁî®Â§ßÈÉ®ÂàÜÁöÑÊó∂Èó¥Êù•Â§ÑÁêÜ I&#x2F;O ‰∫§‰∫íÔºåËÄåÁ∫øÁ®ãÂú®Â§ÑÁêÜ I&#x2F;O ÁöÑÊó∂Èó¥ÊÆµÂÜÖ‰∏ç‰ºöÂç†Áî® CPU Êù•Â§ÑÁêÜÔºåËøôÊó∂Â∞±ÂèØ‰ª•Â∞Ü CPU ‰∫§Âá∫ÁªôÂÖ∂ÂÆÉÁ∫øÁ®ã‰ΩøÁî®„ÄÇÂõ†Ê≠§Âú® I&#x2F;O ÂØÜÈõÜÂûã‰ªªÂä°ÁöÑÂ∫îÁî®‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•Â§öÈÖçÁΩÆ‰∏Ä‰∫õÁ∫øÁ®ãÔºåÂÖ∑‰ΩìÁöÑËÆ°ÁÆóÊñπÊ≥ïÊòØ 2N„ÄÇ</li>
</ul>
<p><strong>Â¶Ç‰ΩïÂà§Êñ≠ÊòØ CPU ÂØÜÈõÜ‰ªªÂä°ËøòÊòØ IO ÂØÜÈõÜ‰ªªÂä°Ôºü</strong></p>
<p>CPU ÂØÜÈõÜÂûãÁÆÄÂçïÁêÜËß£Â∞±ÊòØÂà©Áî® CPU ËÆ°ÁÆóËÉΩÂäõÁöÑ‰ªªÂä°„ÄÇÊØîÂ¶ÇÂú®ÂÜÖÂ≠ò‰∏≠ÂØπÂ§ßÈáèÊï∞ÊçÆËøõË°åÊéíÂ∫è„ÄÇ</p>
<p> IO ÂØÜÈõÜÂûãÊòØÊ∂âÂèäÂà∞ÁΩëÁªúËØªÂèñÔºåÊñá‰ª∂ËØªÂèñÁöÑËøôÁ±ª‰ªªÂä°„ÄÇËøôÁ±ª‰ªªÂä°ÁöÑÁâπÁÇπÊòØ CPU ËÆ°ÁÆóËÄóË¥πÊó∂Èó¥Áõ∏ÊØî‰∫éÁ≠âÂæÖ IO Êìç‰ΩúÂÆåÊàêÁöÑÊó∂Èó¥Êù•ËØ¥ÂæàÂ∞ëÔºåÂ§ßÈÉ®ÂàÜÊó∂Èó¥ÈÉΩËä±Âú®‰∫ÜÁ≠âÂæÖ IO Êìç‰ΩúÂÆåÊàê‰∏ä„ÄÇ</p>
<h1 id="‚ë§JUCÈîÅ"><a href="#‚ë§JUCÈîÅ" class="headerlink" title="‚ë§JUCÈîÅ"></a>‚ë§JUCÈîÅ</h1><p><img src="https://img.jwt1399.top/img/202301051556064.png"></p>
<h2 id="‚ù∂AQS"><a href="#‚ù∂AQS" class="headerlink" title="‚ù∂AQS"></a>‚ù∂AQS</h2><h3 id="üåüAQS-ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü"><a href="#üåüAQS-ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="üåüAQS ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü"></a>üåüAQS ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü</h3><blockquote>
<p>AQSÔºàAbstractQueuedSynchronizerÔºâ ÊäΩË±°ÈòüÂàóÂêåÊ≠•Âô®„ÄÇÊòØ‰∏Ä‰∏™Áî®Êù•ÊûÑÂª∫ÈîÅÂíåÂêåÊ≠•Âô®ÁöÑÊ°ÜÊû∂ÔºåÂÉèReentrantLockÔºåSemaphoreÔºåCountDownLatchÔºåReentrantReadWriteLockÔºåSynchronousQueueÔºåFutureTaskÈÉΩÊòØÂü∫‰∫éAQSÂÆûÁé∞ÁöÑ„ÄÇ</p>
</blockquote>
<p>‰∏ªË¶Å‰æùËµñ‰∫é‰∏Ä‰∏™<strong>ÂèåÂêëÈìæË°®</strong>ÔºàFIFOÁ≠âÂæÖÈòüÂàóÔºâÂíå‰∏Ä‰∏™<strong>volatileÁ±ªÂûãÁöÑÊï¥Êï∞state</strong>Êù•ÂÆûÁé∞ÂêåÊ≠•ÊéßÂà∂„ÄÇÂ¶ÇÊûúÁ∫øÁ®ãËé∑ÂèñËµÑÊ∫êÂ§±Ë¥•ÔºåÂàôËøõÂÖ•ÂêåÊ≠•ÈòüÂàóÁ≠âÂæÖÔºõÂ¶ÇÊûúËé∑ÂèñÊàêÂäüÂ∞±ÊâßË°å‰∏¥ÁïåÂå∫‰ª£Á†ÅÔºåÈáäÊîæËµÑÊ∫êÊó∂‰ºöÈÄöÁü•ÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑÁ≠âÂæÖÁ∫øÁ®ã„ÄÇ</p>
<p>Â≠êÁ±ªÈÄöËøáÁªßÊâøÂêåÊ≠•Âô®Âπ∂ÂÆûÁé∞ÂÆÉÁöÑÊäΩË±°ÊñπÊ≥ïgetState„ÄÅsetState Âíå compareAndSetStateÂØπÂêåÊ≠•Áä∂ÊÄÅËøõË°åÊõ¥Êîπ„ÄÇ</p>
<p><img src="https://img.jwt1399.top/img/202301041734275.png" alt="AQSÂéüÁêÜÂõæ"></p>
<p>AQS ÊòØÁª¥Êä§‰∫Ü‰∏Ä‰∏™ÂÖ±‰∫´ËµÑÊ∫êÂíå‰∏Ä‰∏™ FIFO ÁöÑÁ∫øÁ®ãÁ≠âÂæÖÈòüÂàó</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">private</span> volatile int state<span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//Áî®‰∫éÂ±ïÁ§∫ÂΩìÂâç‰∏¥ÁïåËµÑÊ∫êÁöÑËé∑ÈîÅÊÉÖÂÜµ</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>ÈÄöËøá<code>volatile</code>Êù•‰øùËØÅ state ÁöÑÁ∫øÁ®ãÂèØËßÅÊÄßÔºåstate ÁöÑËÆøÈóÆÊñπÂºè‰∏ªË¶ÅÊúâ‰∏âÁßçÔºåÂ¶Ç‰∏ã</p>
<pre class="line-numbers language-js"><code class="language-js"><span class="token keyword">protected</span> final int <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>               <span class="token comment" spellcheck="true">//Ëé∑ÂèñstateÁöÑÂÄº</span>
    <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">protected</span> final <span class="token keyword">void</span> <span class="token function">setState</span><span class="token punctuation">(</span>int newState<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">//ËÆæÁΩÆstateÁöÑÂÄº</span>
    state <span class="token operator">=</span> newState<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment" spellcheck="true">//‰ΩøÁî® volatile ‰øÆÈ•∞ÈÖçÂêà casÔºå‰øùËØÅ‰øÆÊîπÊó∂ÁöÑÂéüÂ≠êÊÄß</span>
<span class="token keyword">protected</span> final boolean <span class="token function">compareAndSetState</span><span class="token punctuation">(</span>int expect<span class="token punctuation">,</span> int update<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment" spellcheck="true">//ÈÄöËøáCASÊìç‰ΩúÊõ¥Êñ∞stateÁöÑÂÄº</span>
    <span class="token keyword">return</span> unsafe<span class="token punctuation">.</span><span class="token function">compareAndSwapInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> stateOffset<span class="token punctuation">,</span> expect<span class="token punctuation">,</span> update<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="üåüAQSÁöÑËµÑÊ∫êÂÖ±‰∫´ÊñπÂºèÊúâÂì™‰∫õÔºü"><a href="#üåüAQSÁöÑËµÑÊ∫êÂÖ±‰∫´ÊñπÂºèÊúâÂì™‰∫õÔºü" class="headerlink" title="üåüAQSÁöÑËµÑÊ∫êÂÖ±‰∫´ÊñπÂºèÊúâÂì™‰∫õÔºü"></a>üåüAQSÁöÑËµÑÊ∫êÂÖ±‰∫´ÊñπÂºèÊúâÂì™‰∫õÔºü</h3><blockquote>
<p>üåüAQS ÂÖ±‰∫´ÈîÅÂíåÁã¨Âç†ÈîÅÁöÑÂå∫Âà´Ôºü</p>
</blockquote>
<ul>
<li>Áã¨Âç†ÂºèÔºöÂêå‰∏ÄÊó∂ÂàªÂè™ËÉΩÊúâ<strong>‰∏Ä‰∏™Á∫øÁ®ã</strong>Ëé∑ÂèñÂêåÊ≠•Áä∂ÊÄÅÔºå‰æãÂ¶ÇReentrantLockÔºåÂèàÂèØÂàÜ‰∏∫ÂÖ¨Âπ≥ÈîÅÂíåÈùûÂÖ¨Âπ≥ÈîÅ</li>
<li>ÂÖ±‰∫´ÂºèÔºöÂêå‰∏ÄÊó∂ÂàªÂèØ‰ª•Êúâ<strong>Â§ö‰∏™Á∫øÁ®ã</strong>Ëé∑ÂèñÂêåÊ≠•Áä∂ÊÄÅÔºåÂ¶ÇÔºöCountDownLatch„ÄÅSemaphore„ÄÅ CyclicBarrier„ÄÅReadWriteLock„ÄÇ</li>
</ul>
<p>acquire Âíå acquireShared ÁöÑÂå∫Âà´ÔºöacquireShared Âú®Ëé∑ÂèñÈîÅÂêé‰ºöË∞ÉÁî® doReleaseShared() Âî§ÈÜí‰∏ã‰∏Ä‰∏™ËäÇÁÇπÔºõacquire ‰∏ç‰ºöÔºåÂè™‰ºöÂî§ÈÜí‰∏Ä‰∏™<br>release Âíå releaseShared ÁöÑÂå∫Âà´ÔºöreleaseShared ÈúÄË¶ÅÁ°Æ‰øùÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂõ†‰∏∫ÂèØËÉΩ‰ºöÊúâÂá†‰∏™Á∫øÁ®ãÂêåÊó∂ÈáäÊîæÔºõrelease‰∏çÈúÄË¶Å‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÔºåÂõ†‰∏∫‰∏ÄÂÆöÊòØÁã¨Âç†ÁöÑ</p>
<h3 id="üåüAQSÂ∫ïÂ±Ç‰ΩøÁî®‰∫Ü‰ªÄ‰πàÊ†∑ÁöÑËÆæËÆ°Ê®°Âºè"><a href="#üåüAQSÂ∫ïÂ±Ç‰ΩøÁî®‰∫Ü‰ªÄ‰πàÊ†∑ÁöÑËÆæËÆ°Ê®°Âºè" class="headerlink" title="üåüAQSÂ∫ïÂ±Ç‰ΩøÁî®‰∫Ü‰ªÄ‰πàÊ†∑ÁöÑËÆæËÆ°Ê®°Âºè?"></a>üåüAQSÂ∫ïÂ±Ç‰ΩøÁî®‰∫Ü‰ªÄ‰πàÊ†∑ÁöÑËÆæËÆ°Ê®°Âºè?</h3><p>Ê®°ÊùøÔºå ÂÖ±‰∫´ÈîÅÂíåÁã¨Âç†ÈîÅÂú®‰∏Ä‰∏™Êé•Âè£Á±ª‰∏≠„ÄÇ</p>
<h3 id="üåüÂ¶Ç‰Ωï‰ΩøÁî®AQSËá™ÂÆö‰πâÂêåÊ≠•Âô®Ôºü"><a href="#üåüÂ¶Ç‰Ωï‰ΩøÁî®AQSËá™ÂÆö‰πâÂêåÊ≠•Âô®Ôºü" class="headerlink" title="üåüÂ¶Ç‰Ωï‰ΩøÁî®AQSËá™ÂÆö‰πâÂêåÊ≠•Âô®Ôºü"></a>üåüÂ¶Ç‰Ωï‰ΩøÁî®AQSËá™ÂÆö‰πâÂêåÊ≠•Âô®Ôºü</h3><blockquote>
<p>AQS Â∫ïÂ±Ç‰ΩøÁî®‰∫Ü<strong>Ê®°ÊùøÊñπÊ≥ïÊ®°Âºè</strong>Ôºå‰Ω†ËÉΩËØ¥Âá∫Âá†‰∏™ÈúÄË¶ÅÈáçÂÜôÁöÑÊñπÊ≥ïÂêóÔºü</p>
</blockquote>
<p>AQSÁöÑÂ∫ïÂ±Ç‰ΩøÁî®‰∫ÜÊ®°ÊùøÊñπÊ≥ïÊ®°ÂºèÔºåËá™ÂÆö‰πâÂêåÊ≠•Âô®Âè™ÈúÄË¶Å‰∏§Ê≠•Ôºö</p>
<p>Á¨¨‰∏ÄÔºåÁªßÊâø<code>AbstractQueuedSynchronizer</code></p>
<p>Á¨¨‰∫åÔºåÈáçÂÜô‰ª•‰∏ãÂá†ÁßçÊñπÊ≥ïÔºö</p>
<ol>
<li>isHeldExclusively() ÔºöËØ•Á∫øÁ®ãÊòØÂê¶Ê≠£Âú®Áã¨Âç†ËµÑÊ∫ê„ÄÇÂè™ÊúâÁî®Âà∞ condition ÊâçÈúÄË¶ÅÂéªÂÆûÁé∞ÂÆÉ„ÄÇ</li>
<li>tryAcquire(int) ÔºöÁã¨Âç†ÊñπÂºè„ÄÇÂ∞ùËØïËé∑ÂèñËµÑÊ∫êÔºåÊàêÂäüÂàôËøîÂõû trueÔºåÂ§±Ë¥•ÂàôËøîÂõû false„ÄÇ</li>
<li>tryRelease(int) ÔºöÁã¨Âç†ÊñπÂºè„ÄÇÂ∞ùËØïÈáäÊîæËµÑÊ∫êÔºåÊàêÂäüÂàôËøîÂõû trueÔºåÂ§±Ë¥•ÂàôËøîÂõû false„ÄÇ</li>
<li>tryAcquireShared(int) ÔºöÂÖ±‰∫´ÊñπÂºè„ÄÇÂ∞ùËØïËé∑ÂèñËµÑÊ∫ê„ÄÇË¥üÊï∞Ë°®Á§∫Â§±Ë¥•Ôºõ0 Ë°®Á§∫ÊàêÂäüÔºå‰ΩÜÊ≤°ÊúâÂâ©‰ΩôÂèØÁî®ËµÑÊ∫êÔºõÊ≠£Êï∞Ë°®Á§∫ÊàêÂäüÔºå‰∏îÊúâÂâ©‰ΩôËµÑÊ∫ê„ÄÇ</li>
<li>tryReleaseShared(int) ÔºöÂÖ±‰∫´ÊñπÂºè„ÄÇÂ∞ùËØïÈáäÊîæËµÑÊ∫êÔºåÊàêÂäüÂàôËøîÂõû trueÔºåÂ§±Ë¥•ÂàôËøîÂõû false„ÄÇ</li>
</ol>
<h2 id="‚ù∑ReentrantLock"><a href="#‚ù∑ReentrantLock" class="headerlink" title="‚ù∑ReentrantLock"></a>‚ù∑ReentrantLock</h2><h3 id="üåüReentrantLock-ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂèØÈáçÂÖ•ÊÄßÁöÑ"><a href="#üåüReentrantLock-ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂèØÈáçÂÖ•ÊÄßÁöÑ" class="headerlink" title="üåüReentrantLock ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂèØÈáçÂÖ•ÊÄßÁöÑ?"></a>üåüReentrantLock ÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂèØÈáçÂÖ•ÊÄßÁöÑ?</h3><p><code>ReentrantLock</code>ÂÜÖÈÉ®Ëá™ÂÆö‰πâ‰∫ÜÂêåÊ≠•Âô®syncÔºåÂú®Âä†ÈîÅÁöÑÊó∂ÂÄôÈÄöËøáCASÁÆóÊ≥ïÔºåÂ∞ÜÁ∫øÁ®ãÂØπË±°ÊîæÂà∞‰∏Ä‰∏™ÂèåÂêëÈìæË°®‰∏≠ÔºåÊØèÊ¨°Ëé∑ÂèñÈîÅÁöÑÊó∂ÂÄôÔºåÊ£ÄÊü•ÂΩìÂâçÁª¥Êä§ÁöÑÈÇ£‰∏™Á∫øÁ®ãIDÂíåÂΩìÂâçËØ∑Ê±ÇÁöÑÁ∫øÁ®ãIDÊòØÂê¶‰∏ÄËá¥ÔºåÂ¶ÇÊûú‰∏ÄËá¥ÔºåÂêåÊ≠•Áä∂ÊÄÅÂä†1ÔºåË°®Á§∫ÈîÅË¢´ÂΩìÂâçÁ∫øÁ®ãËé∑Âèñ‰∫ÜÂ§öÊ¨°„ÄÇ</p>
<h3 id="üåüReentrantLockÊÄé‰πàÂÆûÁé∞ÁöÑ-ÁªßÊâø"><a href="#üåüReentrantLockÊÄé‰πàÂÆûÁé∞ÁöÑ-ÁªßÊâø" class="headerlink" title="üåüReentrantLockÊÄé‰πàÂÆûÁé∞ÁöÑ? ÁªßÊâø"></a>üåüReentrantLockÊÄé‰πàÂÆûÁé∞ÁöÑ? ÁªßÊâø</h3><p>ÈÄöËøáÂàÜÊûêReentrantLockÁöÑÊ∫êÁ†ÅÔºåÂèØÁü•ÂØπÂÖ∂Êìç‰ΩúÈÉΩËΩ¨Âåñ‰∏∫ÂØπSyncÂØπË±°ÁöÑÊìç‰ΩúÔºåÁî±‰∫éSyncÁªßÊâø‰∫ÜAQSÔºåÊâÄ‰ª•Âü∫Êú¨‰∏äÈÉΩÂèØ‰ª•ËΩ¨Âåñ‰∏∫ÂØπAQSÁöÑÊìç‰Ωú„ÄÇÊâÄ‰ª•ÂèØÁü•ÔºåÂú®ReentrantLockÁöÑËÉåÂêéÔºåÊòØAQSÂØπÂÖ∂ÊúçÂä°Êèê‰æõ‰∫ÜÊîØÊåÅ„ÄÇ</p>
<p>ReentrantLockÊÄªÂÖ±Êúâ‰∏â‰∏™ÂÜÖÈÉ®Á±ªÔºåÂπ∂‰∏î‰∏â‰∏™ÂÜÖÈÉ®Á±ªÊòØÁ¥ßÂØÜÁõ∏ÂÖ≥ÁöÑÔºå‰∏ãÈù¢ÂÖàÁúã‰∏â‰∏™Á±ªÁöÑÂÖ≥Á≥ª„ÄÇ</p>
<p><img src="/../images/Q&A%EF%BC%9AJUC/java-thread-x-juc-reentrantlock-1.png"></p>
<ul>
<li>ReentrantLockÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÂÖ¨Âπ≥ÈîÅÁöÑ? FairSync</li>
<li>ReentrantLockÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÈùûÂÖ¨Âπ≥ÈîÅÁöÑ? UnFairSync</li>
<li>ReentrantLockÈªòËÆ§ÂÆûÁé∞ÁöÑÊòØÂÖ¨Âπ≥ËøòÊòØÈùûÂÖ¨Âπ≥ÈîÅ?ÈùûÂÖ¨Âπ≥ÈîÅ</li>
</ul>
<h3 id="üåüReentrantReadWriteLockÁâπÁÇπ"><a href="#üåüReentrantReadWriteLockÁâπÁÇπ" class="headerlink" title="üåüReentrantReadWriteLockÁâπÁÇπ"></a>üåüReentrantReadWriteLockÁâπÁÇπ</h3><p>ËØªÈîÅÂíåÂÜôÈîÅÂàÜÁ¶ªÔºöReentrantReadWriteLock‰∏≠ÂåÖÂê´‰∫Ü‰∏§ÁßçÈîÅÔºåËØªÈîÅReadLockÂíåÂÜôÈîÅWriteLockÔºåÂèØ‰ª•ÈÄöËøáËøô‰∏§ÁßçÈîÅÂÆûÁé∞Á∫øÁ®ãÈó¥ÁöÑÂêåÊ≠•„ÄÇ</p>
<p>ReentrantReadWriteLock ÂÖ∂<strong>ËØªÈîÅÊòØÂÖ±‰∫´ÈîÅÔºåÂÜôÈîÅÊòØÁã¨Âç†ÈîÅ</strong>ÔºåÂèØÂÆûÁé∞ËØªËØªÂÖ±‰∫´ÔºåËØªÂÜô‰∫íÊñ•ÔºåÂÜôÂÜô‰∫íÊñ•</p>
<h3 id="üåüReentrantReadWriteLockÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜ"><a href="#üåüReentrantReadWriteLockÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜ" class="headerlink" title="üåüReentrantReadWriteLockÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜ"></a>üåüReentrantReadWriteLockÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜ</h3><p>Âü∫‰∫éAQSÂíåLockÂÆûÁé∞</p>
<p>ReentrantReadWriteLockÊúâ‰∫î‰∏™ÂÜÖÈÉ®Á±ªÔºå‰∫î‰∏™ÂÜÖÈÉ®Á±ª‰πãÈó¥‰πüÊòØÁõ∏‰∫íÂÖ≥ËÅîÁöÑ„ÄÇÂÜÖÈÉ®Á±ªÁöÑÂÖ≥Á≥ªÂ¶Ç‰∏ãÂõæÊâÄÁ§∫„ÄÇ</p>
<p><img src="/../images/Q&A%EF%BC%9AJUC/java-thread-x-readwritelock-1.png"></p>
<p>SyncÁªßÊâøËá™AQS„ÄÅNonfairSyncÁªßÊâøËá™SyncÁ±ª„ÄÅFairSyncÁªßÊâøËá™SyncÁ±ªÔºõReadLockÂÆûÁé∞‰∫ÜLockÊé•Âè£„ÄÅWriteLock‰πüÂÆûÁé∞‰∫ÜLockÊé•Âè£„ÄÇ</p>
<h3 id="üåüReentrantReadWriteLockÂ∫ïÂ±ÇÂ¶Ç‰ΩïËÆæËÆ°"><a href="#üåüReentrantReadWriteLockÂ∫ïÂ±ÇÂ¶Ç‰ΩïËÆæËÆ°" class="headerlink" title="üåüReentrantReadWriteLockÂ∫ïÂ±ÇÂ¶Ç‰ΩïËÆæËÆ°"></a>üåüReentrantReadWriteLockÂ∫ïÂ±ÇÂ¶Ç‰ΩïËÆæËÆ°</h3><ul>
<li><p>È´ò16‰Ωç‰∏∫ËØªÈîÅÔºå‰Ωé16‰Ωç‰∏∫ÂÜôÈîÅ</p>
</li>
<li><p>ËØªÈîÅÂíåÂÜôÈîÅÁöÑÊúÄÂ§ßÊï∞ÈáèÊòØÂ§öÂ∞ë?  2^16 - 1</p>
</li>
<li><p>ÂÜôÈîÅÁöÑËé∑Âèñ‰∏éÈáäÊîæÊòØÊÄé‰πàÂÆûÁé∞ÁöÑ?  tryAcquire&#x2F;tryRelease</p>
</li>
<li><p>ËØªÈîÅÁöÑËé∑Âèñ‰∏éÈáäÊîæÊòØÊÄé‰πàÂÆûÁé∞ÁöÑ?  tryAcquireShared&#x2F;tryReleaseShared</p>
</li>
</ul>
<h2 id="‚ù∏Semaphore"><a href="#‚ù∏Semaphore" class="headerlink" title="‚ù∏Semaphore"></a>‚ù∏Semaphore</h2><h3 id="üåüSemaphore-Êúâ‰ªÄ‰πàÁî®Ôºü"><a href="#üåüSemaphore-Êúâ‰ªÄ‰πàÁî®Ôºü" class="headerlink" title="üåüSemaphore Êúâ‰ªÄ‰πàÁî®Ôºü"></a>üåüSemaphore Êúâ‰ªÄ‰πàÁî®Ôºü</h3><p><code>synchronized</code> Âíå <code>ReentrantLock</code> ÈÉΩÊòØ‰∏ÄÊ¨°Âè™ÂÖÅËÆ∏‰∏Ä‰∏™Á∫øÁ®ãËÆøÈóÆÊüê‰∏™ËµÑÊ∫êÔºåËÄå<code>Semaphore</code>(‰ø°Âè∑Èáè)ÂèØ‰ª•Áî®Êù•<strong>ÊéßÂà∂ÂêåÊó∂ËÆøÈóÆÁâπÂÆöËµÑÊ∫êÁöÑÁ∫øÁ®ãÊï∞Èáè„ÄÇ</strong></p>
<ul>
<li><p>ÊâßË°å acquire ÊñπÊ≥ïÈòªÂ°ûÔºåÁõ¥Âà∞Êúâ‰∏Ä‰∏™ËÆ∏ÂèØËØÅÂèØ‰ª•Ëé∑ÂæóÁÑ∂ÂêéÊãøËµ∞‰∏Ä‰∏™ËÆ∏ÂèØËØÅÔºõ</p>
</li>
<li><p>ÊØè‰∏™ release ÊñπÊ≥ïÂ¢ûÂä†‰∏Ä‰∏™ËÆ∏ÂèØËØÅÔºåËøôÂèØËÉΩ‰ºöÈáäÊîæ‰∏Ä‰∏™ÈòªÂ°ûÁöÑ acquire ÊñπÊ≥ï„ÄÇ</p>
</li>
</ul>
<p><code>Semaphore</code> ÈÄöÂ∏∏Áî®‰∫éÈÇ£‰∫õËµÑÊ∫êÊúâÊòéÁ°ÆËÆøÈóÆÊï∞ÈáèÈôêÂà∂ÁöÑÂú∫ÊôØÊØîÂ¶ÇÈôêÊµÅÔºà‰ªÖÈôê‰∫éÂçïÊú∫Ê®°ÂºèÔºåÂÆûÈôÖÈ°πÁõÆ‰∏≠Êé®Ëçê‰ΩøÁî® Redis +Lua Êù•ÂÅöÈôêÊµÅÔºâ„ÄÇ</p>
<h3 id="üåüSemaphore-ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü"><a href="#üåüSemaphore-ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="üåüSemaphore ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü"></a>üåüSemaphore ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü</h3><p><code>Semaphore</code>Âç≥‰ø°Âè∑ÈáèÔºå ÊòØÂÖ±‰∫´ÈîÅÁöÑ‰∏ÄÁßçÂÆûÁé∞ÔºåÂÆÉÈªòËÆ§ÊûÑÈÄ† AQS ÁöÑ <code>state</code> ÂÄº‰∏∫ <code>permits</code>(ËÆ∏ÂèØËØÅ)ÔºåÂè™ÊúâÊãøÂà∞ËÆ∏ÂèØËØÅÁöÑÁ∫øÁ®ãÊâçËÉΩÊâßË°å„ÄÇ‰ΩøÁî® <code>acquire</code> ÊñπÊ≥ïËé∑Âæó‰∏Ä‰∏™ËÆ∏ÂèØËØÅÔºåËÆ°Êï∞Âô®Âáè‰∏ÄÔºå‰ΩøÁî® <code>release</code> ÊñπÊ≥ïÈáäÊîæËÆ∏ÂèØÔºåËÆ°Êï∞Âô®Âä†‰∏Ä„ÄÇÂ¶ÇÊûúÊ≠§Êó∂ËÆ°Êï∞Âô®ÂÄº‰∏∫0ÔºåÁ∫øÁ®ãËøõÂÖ•‰ºëÁú†„ÄÇ</p>
<hr>
<ul>
<li><p>Ë∞ÉÁî®<code>semaphore.acquire()</code> ÔºåÁ∫øÁ®ãÂ∞ùËØïËé∑ÂèñËÆ∏ÂèØËØÅÔºåÂ¶ÇÊûú <code>state&gt;=0</code> ÁöÑËØùÔºåÂàôË°®Á§∫ÂèØ‰ª•Ëé∑ÂèñÊàêÂäü„ÄÇÂ¶ÇÊûúËé∑ÂèñÊàêÂäüÁöÑËØùÔºå‰ΩøÁî® CAS Êìç‰ΩúÂéª‰øÆÊîπ <code>state</code> ÁöÑÂÄº <code>state=state-1</code>„ÄÇÂ¶ÇÊûú <code>state&lt;0</code> ÁöÑËØùÔºåÂàôË°®Á§∫ËÆ∏ÂèØËØÅÊï∞Èáè‰∏çË∂≥„ÄÇÊ≠§Êó∂‰ºöÂàõÂª∫‰∏Ä‰∏™ <code>Node</code> ËäÇÁÇπÂä†ÂÖ•ÈòªÂ°ûÈòüÂàóÔºåÊåÇËµ∑ÂΩìÂâçÁ∫øÁ®ã„ÄÇ</p>
</li>
<li><p>Ë∞ÉÁî®<code>semaphore.release()</code> ÔºåÁ∫øÁ®ãÂ∞ùËØïÈáäÊîæËÆ∏ÂèØËØÅÔºåÂπ∂‰ΩøÁî® CAS Êìç‰ΩúÂéª‰øÆÊîπ <code>state</code> ÁöÑÂÄº <code>state=state+1</code>„ÄÇÈáäÊîæËÆ∏ÂèØËØÅÊàêÂäü‰πãÂêéÔºåÂêåÊó∂‰ºöÂî§ÈÜíÂêåÊ≠•ÈòüÂàó‰∏≠ÁöÑ‰∏Ä‰∏™Á∫øÁ®ã„ÄÇË¢´Âî§ÈÜíÁöÑÁ∫øÁ®ã‰ºöÈáçÊñ∞Â∞ùËØïÂéª‰øÆÊîπ <code>state</code> ÁöÑÂÄº <code>state=state-1</code> ÔºåÂ¶ÇÊûú <code>state&gt;=0</code> ÂàôËé∑Âèñ‰ª§ÁâåÊàêÂäüÔºåÂê¶ÂàôÈáçÊñ∞ËøõÂÖ•ÈòªÂ°ûÈòüÂàóÔºåÊåÇËµ∑Á∫øÁ®ã„ÄÇ</p>
</li>
</ul>
<h3 id="üåüSemaphoreÂú∫ÊôØÈóÆÈ¢ò"><a href="#üåüSemaphoreÂú∫ÊôØÈóÆÈ¢ò" class="headerlink" title="üåüSemaphoreÂú∫ÊôØÈóÆÈ¢ò"></a>üåüSemaphoreÂú∫ÊôØÈóÆÈ¢ò</h3><ul>
<li><p>SemaphoreÂàùÂßãÂåñÊúâ10‰∏™‰ª§ÁâåÔºå11‰∏™Á∫øÁ®ãÂêåÊó∂ÂêÑË∞ÉÁî®1Ê¨°acquireÊñπÊ≥ïÔºå‰ºöÂèëÁîü‰ªÄ‰πà?</p>
<ul>
<li>Êãø‰∏çÂà∞‰ª§ÁâåÁöÑÁ∫øÁ®ãÈòªÂ°ûÔºå‰∏ç‰ºöÁªßÁª≠ÂæÄ‰∏ãËøêË°å„ÄÇ</li>
</ul>
</li>
<li><p>SemaphoreÂàùÂßãÂåñÊúâ10‰∏™‰ª§ÁâåÔºå‰∏Ä‰∏™Á∫øÁ®ãÈáçÂ§çË∞ÉÁî®11Ê¨°acquireÊñπÊ≥ïÔºå‰ºöÂèëÁîü‰ªÄ‰πà?</p>
<ul>
<li>Á∫øÁ®ãÈòªÂ°ûÔºå‰∏ç‰ºöÁªßÁª≠ÂæÄ‰∏ãËøêË°å„ÄÇÂèØËÉΩ‰Ω†‰ºöËÄÉËôëÁ±ª‰ºº‰∫éÈîÅÁöÑÈáçÂÖ•ÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØÔºå‰ª§ÁâåÊ≤°ÊúâÈáçÂÖ•ÁöÑÊ¶ÇÂøµ„ÄÇ‰Ω†Âè™Ë¶ÅË∞ÉÁî®‰∏ÄÊ¨°acquireÊñπÊ≥ïÔºåÂ∞±ÈúÄË¶ÅÊúâ‰∏Ä‰∏™‰ª§ÁâåÊâçËÉΩÁªßÁª≠ËøêË°å„ÄÇ</li>
</ul>
</li>
<li><p>SemaphoreÂàùÂßãÂåñÊúâ1‰∏™‰ª§ÁâåÔºå1‰∏™Á∫øÁ®ãË∞ÉÁî®‰∏ÄÊ¨°acquireÊñπÊ≥ïÔºåÁÑ∂ÂêéË∞ÉÁî®‰∏§Ê¨°releaseÊñπÊ≥ïÔºå‰πãÂêéÂè¶Â§ñ‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®acquire(2)ÊñπÊ≥ïÔºåÊ≠§Á∫øÁ®ãËÉΩÂ§üËé∑ÂèñÂà∞Ë∂≥Â§üÁöÑ‰ª§ÁâåÂπ∂ÁªßÁª≠ËøêË°åÂêó?</p>
<ul>
<li>ËÉΩÔºåÂéüÂõ†ÊòØreleaseÊñπÊ≥ï‰ºöÊ∑ªÂä†‰ª§ÁâåÔºåÂπ∂‰∏ç‰ºö‰ª•ÂàùÂßãÂåñÁöÑÂ§ßÂ∞è‰∏∫ÂáÜ„ÄÇ</li>
</ul>
</li>
<li><p>SemaphoreÂàùÂßãÂåñÊúâ2‰∏™‰ª§ÁâåÔºå‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®1Ê¨°releaseÊñπÊ≥ïÔºåÁÑ∂Âêé‰∏ÄÊ¨°ÊÄßËé∑Âèñ3‰∏™‰ª§ÁâåÔºå‰ºöËé∑ÂèñÂà∞Âêó?</p>
<ul>
<li>ËÉΩÔºåÂéüÂõ†ÊòØrelease‰ºöÊ∑ªÂä†‰ª§ÁâåÔºåÂπ∂‰∏ç‰ºö‰ª•ÂàùÂßãÂåñÁöÑÂ§ßÂ∞è‰∏∫ÂáÜ„ÄÇSemaphore‰∏≠releaseÊñπÊ≥ïÁöÑË∞ÉÁî®Âπ∂Ê≤°ÊúâÈôêÂà∂Ë¶ÅÂú®acquireÂêéË∞ÉÁî®„ÄÇ</li>
</ul>
</li>
</ul>
<h2 id="‚ùπLockSupport"><a href="#‚ùπLockSupport" class="headerlink" title="‚ùπLockSupport"></a>‚ùπLockSupport</h2><p>ÂΩìË∞ÉÁî®<code>LockSupport.park</code>Êó∂ÔºåË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãÂ∞Ü‰ºöÁ≠âÂæÖÔºåÁõ¥Ëá≥Ëé∑ÂæóËÆ∏ÂèØÔºåÂΩìË∞ÉÁî®<code>LockSupport.unpark</code>Êó∂ÔºåÂøÖÈ°ªÊääÁ≠âÂæÖËé∑ÂæóËÆ∏ÂèØÁöÑÁ∫øÁ®ã‰Ωú‰∏∫ÂèÇÊï∞ËøõË°å‰º†ÈÄíÔºåÂ•ΩËÆ©Ê≠§Á∫øÁ®ãÁªßÁª≠ËøêË°å„ÄÇ</p>
<h3 id="üåü‰∏∫‰ªÄ‰πàLockSupport‰πüÊòØÊ†∏ÂøÉÂü∫Á°ÄÁ±ª"><a href="#üåü‰∏∫‰ªÄ‰πàLockSupport‰πüÊòØÊ†∏ÂøÉÂü∫Á°ÄÁ±ª" class="headerlink" title="üåü‰∏∫‰ªÄ‰πàLockSupport‰πüÊòØÊ†∏ÂøÉÂü∫Á°ÄÁ±ª?"></a>üåü‰∏∫‰ªÄ‰πàLockSupport‰πüÊòØÊ†∏ÂøÉÂü∫Á°ÄÁ±ª?</h3><p>AQSÊ°ÜÊû∂ÂÄüÂä©‰∫é‰∏§‰∏™Á±ªÔºöUnsafe(Êèê‰æõCASÊìç‰Ωú)ÂíåLockSupport(Êèê‰æõpark&#x2F;unparkÊìç‰Ωú)</p>
<h3 id="üåüÈÄöËøáwait-x2F-notifyÂÆûÁé∞ÂêåÊ≠•"><a href="#üåüÈÄöËøáwait-x2F-notifyÂÆûÁé∞ÂêåÊ≠•" class="headerlink" title="üåüÈÄöËøáwait&#x2F;notifyÂÆûÁé∞ÂêåÊ≠•"></a>üåüÈÄöËøáwait&#x2F;notifyÂÆûÁé∞ÂêåÊ≠•</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token comment" spellcheck="true">//ÊåÇËµ∑Á∫øÁ®ã</span>
<span class="token keyword">synchronized</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">while</span><span class="token punctuation">(</span>Êù°‰ª∂ÊàêÁ´ã<span class="token punctuation">)</span><span class="token punctuation">{</span>
          lock<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
      <span class="token comment" spellcheck="true">// Â∑•‰Ωú‰ª£Á†Å</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">//Âî§ÈÜíÁ∫øÁ®ã</span>
<span class="token keyword">synchronized</span><span class="token punctuation">(</span>lock<span class="token punctuation">)</span><span class="token punctuation">{</span>
  lock<span class="token punctuation">.</span><span class="token function">notifyAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>‰ΩøÁî®wait&#x2F;notifyÂÆûÁé∞ÂêåÊ≠•Êó∂ÔºåÂøÖÈ°ªÂÖàË∞ÉÁî®waitÔºåÂêéË∞ÉÁî®notifyÔºåÂ¶ÇÊûúÂÖàË∞ÉÁî®notifyÔºåÂÜçË∞ÉÁî®waitÔºåÂ∞ÜËµ∑‰∏ç‰∫Ü‰ΩúÁî®„ÄÇ</p>
<h3 id="üåüÈÄöËøápark-x2F-unparkÂÆûÁé∞ÂêåÊ≠•"><a href="#üåüÈÄöËøápark-x2F-unparkÂÆûÁé∞ÂêåÊ≠•" class="headerlink" title="üåüÈÄöËøápark&#x2F;unparkÂÆûÁé∞ÂêåÊ≠•"></a>üåüÈÄöËøápark&#x2F;unparkÂÆûÁé∞ÂêåÊ≠•</h3><pre class="line-numbers language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**
 *ÂÖà park ÂÜç unpark
**/</span>
<span class="token comment" spellcheck="true">//ÊåÇËµ∑Á∫øÁ®ã</span>
Thread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    LockSupport<span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// Â∑•‰Ωú‰ª£Á†Å</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//Âî§ÈÜíÁ∫øÁ®ã</span>
LockSupport<span class="token punctuation">.</span><span class="token function">unpark</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 *ÂÖà unpark ÂÜç park
**/</span>
<span class="token comment" spellcheck="true">//ÊåÇËµ∑Á∫øÁ®ã</span>
Thread t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    LockSupport<span class="token punctuation">.</span><span class="token function">park</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// Â∑•‰Ωú‰ª£Á†Å</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">//Âî§ÈÜíÁ∫øÁ®ã</span>
LockSupport<span class="token punctuation">.</span><span class="token function">unpark</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>‰ΩøÁî®park&#x2F;unparkÂÆûÁé∞ÂêåÊ≠•Êó∂ÔºåÂèØ‰ª•ÂÖàË∞ÉÁî®unparkÔºåÂÜçË∞ÉÁî®parkÔºå‰∏ç‰ºöÈÄ†ÊàêÁî±wait&#x2F;notifyË∞ÉÁî®È°∫Â∫è‰∏çÂΩìÊâÄÂºïËµ∑ÁöÑÈòªÂ°û„ÄÇÂõ†Ê≠§park&#x2F;unparkÁõ∏ÊØîwait&#x2F;notifyÊõ¥Âä†ÁöÑÁÅµÊ¥ª„ÄÇ</p>
<h3 id="üåüObject-wait-ÂíåCondition-await-ÁöÑÂå∫Âà´"><a href="#üåüObject-wait-ÂíåCondition-await-ÁöÑÂå∫Âà´" class="headerlink" title="üåüObject.wait()ÂíåCondition.await()ÁöÑÂå∫Âà´"></a>üåüObject.wait()ÂíåCondition.await()ÁöÑÂå∫Âà´</h3><p><code>Object.wait()</code>Âíå<code>Condition.await()</code>ÁöÑÂéüÁêÜÊòØÂü∫Êú¨‰∏ÄËá¥ÁöÑÔºå‰∏çÂêåÁöÑÊòØ<code>Condition.await()</code>Â∫ïÂ±ÇÊòØË∞ÉÁî®<code>LockSupport.park()</code>Êù•ÂÆûÁé∞ÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÁöÑ„ÄÇ</p>
<p>ÂÆûÈôÖ‰∏äÔºåÂÆÉÂú®ÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ã‰πãÂâçËøòÂπ≤‰∫Ü‰∏§‰ª∂‰∫ãÔºå‰∏ÄÊòØÊääÂΩìÂâçÁ∫øÁ®ãÊ∑ªÂä†Âà∞Êù°‰ª∂ÈòüÂàó‰∏≠Ôºå‰∫åÊòØ‚ÄúÂÆåÂÖ®‚ÄùÈáäÊîæÈîÅÔºå‰πüÂ∞±ÊòØËÆ©stateÁä∂ÊÄÅÂèòÈáèÂèò‰∏∫0ÔºåÁÑ∂ÂêéÊâçÊòØË∞ÉÁî®<code>LockSupport.park()</code>ÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ã„ÄÇ</p>
<h3 id="üåüsleep-Âíåpark-ÁöÑÂå∫Âà´"><a href="#üåüsleep-Âíåpark-ÁöÑÂå∫Âà´" class="headerlink" title="üåüsleep()Âíåpark()ÁöÑÂå∫Âà´"></a>üåüsleep()Âíåpark()ÁöÑÂå∫Âà´</h3><blockquote>
<p>LockSupport.park()ËøòÊúâÂá†‰∏™ÂÖÑÂºüÊñπÊ≥ïÔºöparkNanos()„ÄÅparkUtil()Á≠âÔºåÊàë‰ª¨ËøôÈáåËØ¥ÁöÑpark()ÊñπÊ≥ïÁªüÁß∞Ëøô‰∏ÄÁ±ªÊñπÊ≥ï„ÄÇ</p>
</blockquote>
<p>Áõ∏ÂêåÁÇπÔºöÈÉΩÊòØÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÁöÑÊâßË°åÔºå‰∏îÈÉΩ‰∏ç‰ºöÈáäÊîæÂΩìÂâçÁ∫øÁ®ãÂç†ÊúâÁöÑÈîÅËµÑÊ∫êÔºõ</p>
<p>Âå∫Âà´Ôºö</p>
<table>
<thead>
<tr>
<th></th>
<th align="left">Thread.sleep()</th>
<th>LockSupport.park()</th>
</tr>
</thead>
<tbody><tr>
<td>Âî§ÈÜí</td>
<td align="left">Ê≤°Ê≥ï‰ªéÂ§ñÈÉ®Âî§ÈÜíÔºåÂè™ËÉΩËá™Â∑±ÈÜíËøáÊù•</td>
<td>ÂèØ‰ª•Ë¢´Âè¶‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®LockSupport.unpark()ÊñπÊ≥ïÂî§ÈÜí„ÄÇ</td>
</tr>
<tr>
<td>ÂºÇÂ∏∏</td>
<td align="left">ÊñπÊ≥ïÂ£∞Êòé‰∏äÊäõÂá∫‰∫Ü<code>InterruptedException</code>‰∏≠Êñ≠ÂºÇÂ∏∏ÔºåË∞ÉÁî®ËÄÖÈúÄË¶ÅÊçïËé∑Ëøô‰∏™ÂºÇÂ∏∏ÊàñËÄÖÂÜçÊäõÂá∫Ôºõ</td>
<td>‰∏çÈúÄË¶ÅÊçïËé∑‰∏≠Êñ≠ÂºÇÂ∏∏</td>
</tr>
<tr>
<td>Â∫ïÂ±Ç</td>
<td align="left">Êú¨Ë∫´Â∞±ÊòØ<code>native</code>ÊñπÊ≥ï</td>
<td>Â∫ïÂ±ÇÊòØË∞ÉÁî®ÁöÑ<code>Unsafe</code>ÁöÑ<code>native</code>ÊñπÊ≥ï</td>
</tr>
</tbody></table>
<h3 id="üåüwait-Âíåpark-ÁöÑÂå∫Âà´"><a href="#üåüwait-Âíåpark-ÁöÑÂå∫Âà´" class="headerlink" title="üåüwait()Âíåpark()ÁöÑÂå∫Âà´"></a>üåüwait()Âíåpark()ÁöÑÂå∫Âà´</h3><p>Áõ∏ÂêåÁÇπÔºö‰∫åËÄÖÈÉΩ‰ºöÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÁöÑËøêË°å</p>
<p>Âå∫Âà´Ôºö</p>
<table>
<thead>
<tr>
<th></th>
<th>Object.wait()</th>
<th>LockSupport.park()</th>
</tr>
</thead>
<tbody><tr>
<td>ÂÆö‰πâ‰ΩçÁΩÆ</td>
<td>Âú®<code>synchronized</code>Âùó‰∏≠ÊâßË°å</td>
<td>ÂèØ‰ª•Âú®‰ªªÊÑèÂú∞ÊñπÊâßË°å</td>
</tr>
<tr>
<td>‰ΩøÁî®ËßÑÂàô</td>
<td>notify ÈöèÊú∫Âî§ÈÜí‰∏Ä‰∏™Á≠âÂæÖÁ∫øÁ®ãÔºånotifyAll ÊòØÂî§ÈÜíÊâÄÊúâÁ≠âÂæÖÁ∫øÁ®ã</td>
<td>unpark ‰ª•Á∫øÁ®ã‰∏∫Âçï‰ΩçÊù•ÈòªÂ°ûÂíåÂî§ÈÜíÁ∫øÁ®ã</td>
</tr>
<tr>
<td>‰ΩøÁî®È°∫Â∫è</td>
<td>wait &amp; notify ‰∏çËÉΩÂÖà notify</td>
<td>park &amp; unpark ÂèØ‰ª•ÂÖà unpark</td>
</tr>
<tr>
<td>ÈáäÊîæÈîÅËµÑÊ∫ê</td>
<td>‰ºöÈáäÊîæÈîÅËµÑÊ∫êËøõÂÖ•Á≠âÂæÖÈòüÂàó</td>
<td>park ‰∏ç‰ºöÈáäÊîæÈîÅËµÑÊ∫êÔºåÂè™Ë¥üË¥£ÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºå‰ºöÈáäÊîæ CPU</td>
</tr>
<tr>
<td>‰∏≠Êñ≠ÂºÇÂ∏∏</td>
<td>Â£∞ÊòéÊäõÂá∫‰∫Ü‰∏≠Êñ≠ÂºÇÂ∏∏ÔºåË∞ÉÁî®ËÄÖÈúÄË¶ÅÊçïËé∑ÊàñËÄÖÂÜçÊäõÂá∫</td>
<td>‰∏çÈúÄË¶ÅÊçïËé∑‰∏≠Êñ≠ÂºÇÂ∏∏</td>
</tr>
</tbody></table>
<p>park()&#x2F;unpark()Â∫ïÂ±ÇÁöÑÂéüÁêÜÊòØ‚Äú‰∫åÂÖÉ‰ø°Âè∑Èáè‚ÄùÔºå‰Ω†ÂèØ‰ª•ÊääÂÆÉÁõ∏ÂÉèÊàêÂè™Êúâ‰∏Ä‰∏™ËÆ∏ÂèØËØÅÁöÑSemaphoreÔºåÂè™‰∏çËøáËøô‰∏™‰ø°Âè∑ÈáèÂú®ÈáçÂ§çÊâßË°åunpark()ÁöÑÊó∂ÂÄô‰πü‰∏ç‰ºöÂÜçÂ¢ûÂä†ËÆ∏ÂèØËØÅÔºåÊúÄÂ§öÂè™Êúâ‰∏Ä‰∏™ËÆ∏ÂèØËØÅ„ÄÇ</p>
<h3 id="üåüÂ¶ÇÊûúÂú®wait-‰πãÂâçÊâßË°å‰∫Ünotify-‰ºöÊÄéÊ†∑"><a href="#üåüÂ¶ÇÊûúÂú®wait-‰πãÂâçÊâßË°å‰∫Ünotify-‰ºöÊÄéÊ†∑" class="headerlink" title="üåüÂ¶ÇÊûúÂú®wait()‰πãÂâçÊâßË°å‰∫Ünotify()‰ºöÊÄéÊ†∑"></a>üåüÂ¶ÇÊûúÂú®wait()‰πãÂâçÊâßË°å‰∫Ünotify()‰ºöÊÄéÊ†∑</h3><ul>
<li><p>Â¶ÇÊûúÂΩìÂâçÁöÑÁ∫øÁ®ã‰∏çÊòØÊ≠§ÂØπË±°ÈîÅÁöÑÊâÄÊúâËÄÖÔºåÂç¥Ë∞ÉÁî®ËØ•ÂØπË±°ÁöÑnotify()Êàñwait()ÊñπÊ≥ïÊó∂ÊäõÂá∫<code>IllegalMonitorStateException</code>ÂºÇÂ∏∏Ôºõ</p>
</li>
<li><p>Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÊòØÊ≠§ÂØπË±°ÈîÅÁöÑÊâÄÊúâËÄÖÔºåwait()Â∞Ü‰∏ÄÁõ¥ÈòªÂ°ûÔºåÂõ†‰∏∫ÂêéÁª≠Â∞ÜÊ≤°ÊúâÂÖ∂ÂÆÉnotify()Âî§ÈÜíÂÆÉ„ÄÇ</p>
</li>
</ul>
<p>ÁªìËÆ∫Ôºöwait &amp; notify ‰∏çËÉΩÂÖà notify</p>
<h3 id="üåüÂ¶ÇÊûúÂú®park-‰πãÂâçÊâßË°å‰∫Üunpark-‰ºöÊÄéÊ†∑"><a href="#üåüÂ¶ÇÊûúÂú®park-‰πãÂâçÊâßË°å‰∫Üunpark-‰ºöÊÄéÊ†∑" class="headerlink" title="üåüÂ¶ÇÊûúÂú®park()‰πãÂâçÊâßË°å‰∫Üunpark()‰ºöÊÄéÊ†∑"></a>üåüÂ¶ÇÊûúÂú®park()‰πãÂâçÊâßË°å‰∫Üunpark()‰ºöÊÄéÊ†∑</h3><p>Á∫øÁ®ã‰∏ç‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Êé•Ë∑≥Ëøápark()ÔºåÁªßÁª≠ÊâßË°åÂêéÁª≠ÂÜÖÂÆπ</p>
<p>ÁªìËÆ∫ÔºöÂÖà park ÂÜç unpark ÂíåÂÖà unpark ÂÜç park ÊïàÊûú‰∏ÄÊ†∑ÔºåÈÉΩ‰ºöÁõ¥Êé•ÊÅ¢Â§çÁ∫øÁ®ãÁöÑËøêË°å</p>
<h3 id="üåüLockSupport-park-‰ºöÈáäÊîæÈîÅËµÑÊ∫êÂêó"><a href="#üåüLockSupport-park-‰ºöÈáäÊîæÈîÅËµÑÊ∫êÂêó" class="headerlink" title="üåüLockSupport.park()‰ºöÈáäÊîæÈîÅËµÑÊ∫êÂêó?"></a>üåüLockSupport.park()‰ºöÈáäÊîæÈîÅËµÑÊ∫êÂêó?</h3><p>‰∏ç‰ºöÔºåÂÆÉÂè™Ë¥üË¥£ÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÔºåÈáäÊîæÈîÅËµÑÊ∫êÂÆûÈôÖ‰∏äÊòØÂú®ConditionÁöÑawait()ÊñπÊ≥ï‰∏≠ÂÆûÁé∞ÁöÑ„ÄÇ</p>
<h1 id="‚ë•JUCÂ∑•ÂÖ∑Á±ª"><a href="#‚ë•JUCÂ∑•ÂÖ∑Á±ª" class="headerlink" title="‚ë•JUCÂ∑•ÂÖ∑Á±ª"></a>‚ë•JUCÂ∑•ÂÖ∑Á±ª</h1><h2 id="‚ù∂CountDownLatch"><a href="#‚ù∂CountDownLatch" class="headerlink" title="‚ù∂CountDownLatch"></a>‚ù∂CountDownLatch</h2><h3 id="üåü‰ªÄ‰πàÊòØCountDownLatch"><a href="#üåü‰ªÄ‰πàÊòØCountDownLatch" class="headerlink" title="üåü‰ªÄ‰πàÊòØCountDownLatch?"></a>üåü‰ªÄ‰πàÊòØCountDownLatch?</h3><blockquote>
<p>CountDownLatch Êúâ‰ªÄ‰πàÁî®Ôºü</p>
</blockquote>
<p>CountDownLatchÔºåËÆ°Êï∞Âô®ÔºåÂ∫ïÂ±Ç‰πüÊòØÁî±AQSÔºåÁî®Êù•ËøõË°åÁ∫øÁ®ãÂêåÊ≠•Âçè‰ΩúÔºåÁ≠âÂæÖÊâÄÊúâÁ∫øÁ®ãÂÆåÊàê„ÄÇ</p>
<p>CountDownLatch ÂÖÅËÆ∏ <code>count</code> ‰∏™Á∫øÁ®ãÈòªÂ°ûÂú®‰∏Ä‰∏™Âú∞ÊñπÔºåÁõ¥Ëá≥ÊâÄÊúâÁ∫øÁ®ãÁöÑ‰ªªÂä°ÈÉΩÊâßË°åÂÆåÊØï„ÄÇÈÄöËøá‰∏Ä‰∏™ËÆ°Êï∞Âô®Êù•ÂÆûÁé∞ÁöÑÔºåËÆ°Êï∞Âô®ÁöÑÂàùÂßãÂÄº <code>count</code> ÊòØÁ∫øÁ®ãÁöÑÊï∞Èáè„ÄÇÊØèÂΩì‰∏Ä‰∏™Á∫øÁ®ãÊâßË°åÂÆåÊØïÂêéÔºåË∞ÉÁî®countDownÊñπÊ≥ïÔºåËÆ°Êï∞Âô®ÁöÑÂÄºÂ∞±Âáè1ÔºåÂΩìËÆ°Êï∞Âô®ÁöÑÂÄº‰∏∫0Êó∂ÔºåË°®Á§∫ÊâÄÊúâÁ∫øÁ®ãÈÉΩÊâßË°åÂÆåÊØïÔºåÁÑ∂ÂêéÂú®Á≠âÂæÖÁöÑÁ∫øÁ®ãÂ∞±ÂèØ‰ª•ÊÅ¢Â§çÂ∑•‰Ωú‰∫Ü„ÄÇ Âè™ËÉΩ‰∏ÄÊ¨°ÊÄß‰ΩøÁî®Ôºå‰∏çËÉΩreset„ÄÇÔºà<code>CountDownLatch</code> ÊòØ‰∏ÄÊ¨°ÊÄßÁöÑÔºåËÆ°Êï∞Âô®ÁöÑÂÄºÂè™ËÉΩÂú®ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÂàùÂßãÂåñ‰∏ÄÊ¨°Ôºå‰πãÂêéÊ≤°Êúâ‰ªª‰ΩïÊú∫Âà∂ÂÜçÊ¨°ÂØπÂÖ∂ËÆæÁΩÆÂÄºÔºåÂΩì <code>CountDownLatch</code> ‰ΩøÁî®ÂÆåÊØïÂêéÔºåÂÆÉ‰∏çËÉΩÂÜçÊ¨°Ë¢´‰ΩøÁî®Ôºâ</p>
<p>CountDownLatch‰∏ÄÊ¨°ÂèØ‰ª•Âî§ÈÜíÂá†‰∏™‰ªªÂä°? Â§ö‰∏™</p>
<h3 id="üåüCountDownLatchÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜ"><a href="#üåüCountDownLatchÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜ" class="headerlink" title="üåüCountDownLatchÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜ?"></a>üåüCountDownLatchÂ∫ïÂ±ÇÂÆûÁé∞ÂéüÁêÜ?</h3><p><code>CountDownLatch</code> ÊòØÂÖ±‰∫´ÈîÅÁöÑ‰∏ÄÁßçÂÆûÁé∞ÔºåÂÆÉÈªòËÆ§ÊûÑÈÄ† AQS ÁöÑ <code>state</code> ÂÄº‰∏∫ <code>count</code>„ÄÇÂΩìÁ∫øÁ®ã‰ΩøÁî® <code>countDown()</code> ÊñπÊ≥ïÊó∂ÔºåÂÖ∂ÂÆû‰ΩøÁî®‰∫Ü<code>tryReleaseShared</code>ÊñπÊ≥ï‰ª• CAS ÁöÑÊìç‰ΩúÊù•ÂáèÂ∞ë <code>state</code>ÔºåÁõ¥Ëá≥ <code>state</code> ‰∏∫ 0 „ÄÇÂΩìË∞ÉÁî® <code>await()</code> ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûú <code>state</code> ‰∏ç‰∏∫ 0ÔºåÈÇ£Â∞±ËØÅÊòé‰ªªÂä°ËøòÊ≤°ÊúâÊâßË°åÂÆåÊØïÔºå<code>await()</code> ÊñπÊ≥ïÂ∞±‰ºö‰∏ÄÁõ¥ÈòªÂ°ûÔºå‰πüÂ∞±ÊòØËØ¥ <code>await()</code> ÊñπÊ≥ï‰πãÂêéÁöÑËØ≠Âè•‰∏ç‰ºöË¢´ÊâßË°å„ÄÇÁÑ∂ÂêéÔºå<code>CountDownLatch</code> ‰ºöËá™Êóã CAS Âà§Êñ≠ <code>state == 0</code>ÔºåÂ¶ÇÊûú <code>state == 0</code> ÁöÑËØùÔºåÂ∞±‰ºöÈáäÊîæÊâÄÊúâÁ≠âÂæÖÁöÑÁ∫øÁ®ãÔºå<code>await()</code> ÊñπÊ≥ï‰πãÂêéÁöÑËØ≠Âè•ÂæóÂà∞ÊâßË°å„ÄÇ</p>
<h3 id="üåüCountDownLatchÊúâÂì™‰∫õ‰∏ªË¶ÅÊñπÊ≥ï"><a href="#üåüCountDownLatchÊúâÂì™‰∫õ‰∏ªË¶ÅÊñπÊ≥ï" class="headerlink" title="üåüCountDownLatchÊúâÂì™‰∫õ‰∏ªË¶ÅÊñπÊ≥ï?"></a>üåüCountDownLatchÊúâÂì™‰∫õ‰∏ªË¶ÅÊñπÊ≥ï?</h3><p><code>CountDownLatch(int count)</code>ÔºöÊûÑÈÄ†ÊñπÊ≥ïÔºåÂàùÂßãÂåñÂî§ÈÜíÈúÄË¶Å down Âá†Ê≠•</p>
<p><code>await()</code>ÔºöÊ≠§ÂáΩÊï∞Â∞Ü‰ºö‰ΩøÂΩìÂâçÁ∫øÁ®ãÂú®ËÆ°Êï∞Âô®ÂÄíËÆ°Ëá≥Èõ∂‰πãÂâç‰∏ÄÁõ¥Á≠âÂæÖÔºåÈô§ÈùûÁ∫øÁ®ãË¢´‰∏≠Êñ≠„ÄÇ</p>
<p><code>countDown()</code>ÔºöÊ≠§ÂáΩÂ∞ÜËÆ°Êï∞Âô®ËøõË°åÂáè 1ÔºåÂ¶ÇÊûúËÆ°Êï∞Âà∞ËææÈõ∂ÔºåÂàôÈáäÊîæÊâÄÊúâÁ≠âÂæÖÁöÑÁ∫øÁ®ã</p>
<h3 id="üåüÁî®Ëøá-CountDownLatch-‰πàÔºü‰ªÄ‰πàÂú∫ÊôØ‰∏ãÁî®ÁöÑÔºü"><a href="#üåüÁî®Ëøá-CountDownLatch-‰πàÔºü‰ªÄ‰πàÂú∫ÊôØ‰∏ãÁî®ÁöÑÔºü" class="headerlink" title="üåüÁî®Ëøá CountDownLatch ‰πàÔºü‰ªÄ‰πàÂú∫ÊôØ‰∏ãÁî®ÁöÑÔºü"></a>üåüÁî®Ëøá CountDownLatch ‰πàÔºü‰ªÄ‰πàÂú∫ÊôØ‰∏ãÁî®ÁöÑÔºü</h3><p><code>CountDownLatch</code> ÁöÑ‰ΩúÁî®Â∞±ÊòØ ÂÖÅËÆ∏ <code>count</code> ‰∏™Á∫øÁ®ãÈòªÂ°ûÂú®‰∏Ä‰∏™Âú∞ÊñπÔºåÁõ¥Ëá≥ÊâÄÊúâÁ∫øÁ®ãÁöÑ‰ªªÂä°ÈÉΩÊâßË°åÂÆåÊØï„ÄÇ‰πãÂâçÂú®È°πÁõÆ‰∏≠ÔºåÊúâ‰∏Ä‰∏™‰ΩøÁî®Â§öÁ∫øÁ®ãËØªÂèñÂ§ö‰∏™Êñá‰ª∂Â§ÑÁêÜÁöÑÂú∫ÊôØÔºåÊàëÁî®Âà∞‰∫Ü <code>CountDownLatch</code> „ÄÇÂÖ∑‰ΩìÂú∫ÊôØÊòØ‰∏ãÈù¢ËøôÊ†∑ÁöÑÔºö</p>
<p>Êàë‰ª¨Ë¶ÅËØªÂèñÂ§ÑÁêÜ 6 ‰∏™Êñá‰ª∂ÔºåËøô 6 ‰∏™‰ªªÂä°ÈÉΩÊòØÊ≤°ÊúâÊâßË°åÈ°∫Â∫è‰æùËµñÁöÑ‰ªªÂä°Ôºå‰ΩÜÊòØÊàë‰ª¨ÈúÄË¶ÅËøîÂõûÁªôÁî®Êà∑ÁöÑÊó∂ÂÄôÂ∞ÜËøôÂá†‰∏™Êñá‰ª∂ÁöÑÂ§ÑÁêÜÁöÑÁªìÊûúËøõË°åÁªüËÆ°Êï¥ÁêÜ„ÄÇ</p>
<p>‰∏∫Ê≠§Êàë‰ª¨ÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Á∫øÁ®ãÊ±†Âíå count ‰∏∫ 6 ÁöÑ<code>CountDownLatch</code>ÂØπË±° „ÄÇ‰ΩøÁî®Á∫øÁ®ãÊ±†Â§ÑÁêÜËØªÂèñ‰ªªÂä°ÔºåÊØè‰∏Ä‰∏™Á∫øÁ®ãÂ§ÑÁêÜÂÆå‰πãÂêéÂ∞±Â∞Ü count-1ÔºåË∞ÉÁî®<code>CountDownLatch</code>ÂØπË±°ÁöÑ <code>await()</code>ÊñπÊ≥ïÔºåÁõ¥Âà∞ÊâÄÊúâÊñá‰ª∂ËØªÂèñÂÆå‰πãÂêéÔºåÊâç‰ºöÊé•ÁùÄÊâßË°åÂêéÈù¢ÁöÑÈÄªËæë„ÄÇ</p>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CountDownLatchExample1</span> <span class="token punctuation">{</span>
    <span class="token comment" spellcheck="true">// Â§ÑÁêÜÊñá‰ª∂ÁöÑÊï∞Èáè</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> threadCount <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// ÂàõÂª∫‰∏Ä‰∏™ÂÖ∑ÊúâÂõ∫ÂÆöÁ∫øÁ®ãÊï∞ÈáèÁöÑÁ∫øÁ®ãÊ±†ÂØπË±°ÔºàÊé®Ëçê‰ΩøÁî®ÊûÑÈÄ†ÊñπÊ≥ïÂàõÂª∫Ôºâ</span>
        ExecutorService threadPool <span class="token operator">=</span> Executors<span class="token punctuation">.</span><span class="token function">newFixedThreadPool</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">final</span> CountDownLatch countDownLatch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span>threadCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> threadCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">final</span> <span class="token keyword">int</span> threadnum <span class="token operator">=</span> i<span class="token punctuation">;</span>
            threadPool<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token comment" spellcheck="true">//Â§ÑÁêÜÊñá‰ª∂ÁöÑ‰∏öÂä°Êìç‰Ωú</span>
                    <span class="token comment" spellcheck="true">//......</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
                    <span class="token comment" spellcheck="true">//Ë°®Á§∫‰∏Ä‰∏™Êñá‰ª∂Â∑≤ÁªèË¢´ÂÆåÊàê</span>
                    countDownLatch<span class="token punctuation">.</span><span class="token function">countDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        countDownLatch<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        threadPool<span class="token punctuation">.</span><span class="token function">shutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"finish"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>ÊúâÊ≤°ÊúâÂèØ‰ª•ÊîπËøõÁöÑÂú∞ÊñπÂë¢Ôºü</strong></p>
<p>ÂèØ‰ª•‰ΩøÁî® <code>CompletableFuture</code> Á±ªÊù•ÊîπËøõÔºÅJava8 ÁöÑ <code>CompletableFuture</code> Êèê‰æõ‰∫ÜÂæàÂ§öÂØπÂ§öÁ∫øÁ®ãÂèãÂ•ΩÁöÑÊñπÊ≥ïÔºå‰ΩøÁî®ÂÆÉÂèØ‰ª•ÂæàÊñπ‰æøÂú∞‰∏∫Êàë‰ª¨ÁºñÂÜôÂ§öÁ∫øÁ®ãÁ®ãÂ∫èÔºå‰ªÄ‰πàÂºÇÊ≠•„ÄÅ‰∏≤Ë°å„ÄÅÂπ∂Ë°åÊàñËÄÖÁ≠âÂæÖÊâÄÊúâÁ∫øÁ®ãÊâßË°åÂÆå‰ªªÂä°‰ªÄ‰πàÁöÑÈÉΩÈùûÂ∏∏Êñπ‰æø„ÄÇ</p>
<h3 id="üåüÊúâÂõõ‰∏™Á∫øÁ®ãA„ÄÅB„ÄÅC„ÄÅD„ÄÅEÔºåÁé∞Âú®ÈúÄË¶Å-EÁ∫øÁ®ãÂú®-ABCDÂõõ‰∏™Á∫øÁ®ãÁªìÊùü‰πãÂêéÂÜçÊâßË°å"><a href="#üåüÊúâÂõõ‰∏™Á∫øÁ®ãA„ÄÅB„ÄÅC„ÄÅD„ÄÅEÔºåÁé∞Âú®ÈúÄË¶Å-EÁ∫øÁ®ãÂú®-ABCDÂõõ‰∏™Á∫øÁ®ãÁªìÊùü‰πãÂêéÂÜçÊâßË°å" class="headerlink" title="üåüÊúâÂõõ‰∏™Á∫øÁ®ãA„ÄÅB„ÄÅC„ÄÅD„ÄÅEÔºåÁé∞Âú®ÈúÄË¶Å EÁ∫øÁ®ãÂú® ABCDÂõõ‰∏™Á∫øÁ®ãÁªìÊùü‰πãÂêéÂÜçÊâßË°å"></a>üåüÊúâÂõõ‰∏™Á∫øÁ®ãA„ÄÅB„ÄÅC„ÄÅD„ÄÅEÔºåÁé∞Âú®ÈúÄË¶Å EÁ∫øÁ®ãÂú® ABCDÂõõ‰∏™Á∫øÁ®ãÁªìÊùü‰πãÂêéÂÜçÊâßË°å</h3><ol>
<li><p>join ËÆ©‰∏ªÁ∫øÁ®ãÁ≠âÂæÖÂ≠êÁ∫øÁ®ãËøêË°åÁªìÊùüÂêéÂÜçÁªßÁª≠ËøêË°åÔºöjoinÊñπÊ≥ï‰∏≠Â¶ÇÊûú‰º†ÂÖ•ÂèÇÊï∞ÔºåÂàôË°®Á§∫ËøôÊ†∑ÁöÑÊÑèÊÄùÔºöÂ¶ÇÊûúÁ∫øÁ®ãA ‰∏≠ÊéâÁî®Á∫øÁ®ãBÁöÑ join(10)ÔºåÂàôË°®Á§∫Á∫øÁ®ãA ‰ºöÁ≠âÂæÖÁ∫øÁ®ãB ÊâßË°å10ÊØ´ÁßíÔºå10ÊØ´ÁßíËøáÂêéÔºåA„ÄÅBÁ∫øÁ®ãÂπ∂Ë°åÊâßË°å„ÄÇÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåjdkËßÑÂÆöÔºåjoin(0)ÁöÑÊÑèÊÄù‰∏çÊòØ Á∫øÁ®ãAÁ≠âÂæÖÁ∫øÁ®ãB 0ÁßíÔºåËÄåÊòØÁ∫øÁ®ãA Á≠âÂæÖÁ∫øÁ®ãB Êó†ÈôêÊó∂Èó¥ÔºåÁõ¥Âà∞Á∫øÁ®ãB ÊâßË°åÂÆåÊØïÔºåÂç≥join(0)Á≠â‰ª∑‰∫éjoin()„ÄÇ(ÂÖ∂ÂÆûjoin()‰∏≠Ë∞ÉÁî®ÁöÑÊòØjoin(0))</p>
</li>
<li><p>Âà©Áî®Âπ∂ÂèëÂåÖÈáåÁöÑ ExcutorsÁöÑ newSingleThreadExecutor‰∫ßÁîü‰∏Ä‰∏™ÂçïÁ∫øÁ®ãÁöÑÁ∫øÁ®ãÊ±†ÔºåËÄåËøô‰∏™Á∫øÁ®ãÊ±†ÁöÑÂ∫ïÂ±ÇÂéüÁêÜÂ∞±ÊòØ‰∏Ä‰∏™ÂÖàËøõÂÖàÂá∫ÔºàFIFOÔºâÁöÑÈòüÂàó„ÄÇ‰ª£Á†Å‰∏≠ executor.submit‰æùÊ¨°Ê∑ªÂä†‰∫Ü123Á∫øÁ®ãÔºåÊåâÁÖß FIFOÁöÑÁâπÊÄßÔºåÊâßË°åÈ°∫Â∫è‰πüÂ∞±ÊòØ123ÁöÑÊâßË°åÁªìÊûúÔºå‰ªéËÄå‰øùËØÅ‰∫ÜÊâßË°åÈ°∫Â∫è„ÄÇ</p>
</li>
<li><p>‰ΩøÁî® CountDownLatch ÊéßÂà∂Â§ö‰∏™Á∫øÁ®ãÊâßË°åÈ°∫Â∫è cutDown()ÊñπÊ≥ïÂíå await()ÊñπÊ≥ïÔºöÂèØ‰ª•ÈÄöËøáË∞ÉÁî®CounDownLatchÂØπË±°ÁöÑcutDown()ÊñπÊ≥ïÔºåÊù•‰ΩøËÆ°Êï∞Âáè1ÔºõÂ¶ÇÊûúË∞ÉÁî®ÂØπË±°‰∏äÁöÑawait()ÊñπÊ≥ïÔºåÈÇ£‰πàË∞ÉÁî®ËÄÖÂ∞±‰ºö‰∏ÄÁõ¥ÈòªÂ°ûÂú®ËøôÈáåÔºåÁõ¥Âà∞Âà´‰∫∫ÈÄöËøácutDownÊñπÊ≥ïÔºåÂ∞ÜËÆ°Êï∞ÂáèÂà∞0ÔºåÊâçÂèØ‰ª•ÁªßÁª≠ÊâßË°å„ÄÇ</p>
</li>
</ol>
<h3 id="üåüCountDownLatch‰ª£Á†ÅÈ¢ò"><a href="#üåüCountDownLatch‰ª£Á†ÅÈ¢ò" class="headerlink" title="üåüCountDownLatch‰ª£Á†ÅÈ¢ò"></a>üåüCountDownLatch‰ª£Á†ÅÈ¢ò</h3><blockquote>
<p>ÂÆûÁé∞‰∏Ä‰∏™ÂÆπÂô®ÔºåÊèê‰æõ‰∏§‰∏™ÊñπÊ≥ïÔºåaddÔºåsize ÔºõÂÜô‰∏§‰∏™Á∫øÁ®ãÔºåÁ∫øÁ®ã1Ê∑ªÂä†10‰∏™ÂÖÉÁ¥†Âà∞ÂÆπÂô®‰∏≠ÔºåÁ∫øÁ®ã2ÂÆûÁé∞ÁõëÊéßÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ÔºåÂΩì‰∏™Êï∞Âà∞5‰∏™Êó∂ÔºåÁ∫øÁ®ã2ÁªôÂá∫ÊèêÁ§∫Âπ∂ÁªìÊùü.</p>
</blockquote>
<pre class="line-numbers language-java"><code class="language-java"><span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ArrayList<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>CountDownLatch<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">/**
 * ‰ΩøÁî®CountDownLatch ‰ª£Êõøwait notify Â•ΩÂ§ÑÊòØÈÄöËÆØÊñπÂºèÁÆÄÂçïÔºå‰∏çÊ∂âÂèäÈîÅÂÆö  Count ÂÄº‰∏∫0Êó∂ÂΩìÂâçÁ∫øÁ®ãÁªßÁª≠ÊâßË°åÔºå
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>

   <span class="token keyword">volatile</span> List list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Demo t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        CountDownLatch countDownLatch <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"t2 start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               <span class="token keyword">try</span> <span class="token punctuation">{</span>
                   countDownLatch<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"t2 end"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                   e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
           <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">"t2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">></span><span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"t1 start"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               t<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
               System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"add"</span><span class="token operator">+</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                   System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"countdown is open"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                   countDownLatch<span class="token punctuation">.</span><span class="token function">countDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
               <span class="token punctuation">}</span>
           <span class="token punctuation">}</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"t1 end"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">"t1"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="‚ù∑CyclicBarrier"><a href="#‚ù∑CyclicBarrier" class="headerlink" title="‚ù∑CyclicBarrier"></a>‚ù∑CyclicBarrier</h2><h3 id="üåüCyclicBarrier-Êúâ‰ªÄ‰πàÁî®Ôºü"><a href="#üåüCyclicBarrier-Êúâ‰ªÄ‰πàÁî®Ôºü" class="headerlink" title="üåüCyclicBarrier Êúâ‰ªÄ‰πàÁî®Ôºü"></a>üåüCyclicBarrier Êúâ‰ªÄ‰πàÁî®Ôºü</h3><blockquote>
<p><code>CountDownLatch</code> ÁöÑÂÆûÁé∞ÊòØÂü∫‰∫é AQS ÁöÑÔºåËÄå <code>CycliBarrier</code> ÊòØÂü∫‰∫é <code>ReentrantLock</code>Âíå <code>Condition</code> ÁöÑ„ÄÇ</p>
</blockquote>
<p><code>CyclicBarrier</code>Âæ™ÁéØÂ±èÈöúÔºå‰∏ªË¶ÅÂäüËÉΩÂíå<code>countDownLatch</code>Á±ª‰ººÔºå‰πüÊòØÈÄöËøá‰∏Ä‰∏™ËÆ°Êï∞Âô®Ôºå‰Ωø‰∏Ä‰∏™Á∫øÁ®ãÁ≠âÂæÖÂÖ∂‰ªñÁ∫øÁ®ãÂêÑËá™ÊâßË°åÂÆåÊØïÂêéÂÜçÊâßË°å„ÄÇ‰ΩÜÊòØÂÖ∂ÂèØ‰ª•ÈáçÂ§ç‰ΩøÁî®ÔºàresetÔºâ„ÄÇ</p>
<h3 id="üåüCyclicBarrier-ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü"><a href="#üåüCyclicBarrier-ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü" class="headerlink" title="üåüCyclicBarrier ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü"></a>üåüCyclicBarrier ÁöÑÂéüÁêÜÊòØ‰ªÄ‰πàÔºü</h3><p><code>CyclicBarrier</code> ÂÜÖÈÉ®ÈÄöËøá‰∏Ä‰∏™ <code>count</code> ÂèòÈáè‰Ωú‰∏∫ËÆ°Êï∞Âô®Ôºå<code>count</code> ÁöÑÂàùÂßãÂÄº‰∏∫ <code>parties</code> Â±ûÊÄßÁöÑÂàùÂßãÂåñÂÄºÔºåÊØèÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂà∞‰∫ÜÊ†ÖÊ†èËøôÈáå‰∫ÜÔºåÈÇ£‰πàÂ∞±Â∞ÜËÆ°Êï∞Âô®Âáè 1„ÄÇÂ¶ÇÊûú count ÂÄº‰∏∫ 0 ‰∫ÜÔºåË°®Á§∫ËøôÊòØËøô‰∏Ä‰ª£ÊúÄÂêé‰∏Ä‰∏™Á∫øÁ®ãÂà∞ËææÊ†ÖÊ†èÔºåÂ∞±Â∞ùËØïÊâßË°åÊàë‰ª¨ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ËæìÂÖ•ÁöÑ‰ªªÂä°„ÄÇ</p>
<h3 id="üåüCountDownLatch-Âíå-CyclicBarrier-Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü"><a href="#üåüCountDownLatch-Âíå-CyclicBarrier-Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü" class="headerlink" title="üåüCountDownLatch Âíå CyclicBarrier Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü"></a>üåüCountDownLatch Âíå CyclicBarrier Êúâ‰ªÄ‰πàÂå∫Âà´Ôºü</h3><p>CountDownLatch ÊòØËÆ°Êï∞Âô®ÔºåÂè™ËÉΩ‰ΩøÁî®‰∏ÄÊ¨°ÔºåËÄå CyclicBarrier ÁöÑËÆ°Êï∞Âô®Êèê‰æõ reset ÂäüËÉΩÔºåÂèØ‰ª•Â§öÊ¨°‰ΩøÁî®„ÄÇ</p>
<p>CountDownLatch ÊòØËÆ°Êï∞Âô®ÔºåÁ∫øÁ®ãÂÆåÊàê‰∏Ä‰∏™ËÆ∞ÂΩï‰∏Ä‰∏™ÔºåÂè™‰∏çËøáËÆ°Êï∞‰∏çÊòØÈÄíÂ¢ûËÄåÊòØÈÄíÂáèÔºåËÄå CyclicBarrier Êõ¥ÂÉèÊòØ‰∏Ä‰∏™ÈòÄÈó®ÔºåÈúÄË¶ÅÊâÄÊúâÁ∫øÁ®ãÈÉΩÂà∞ËææÔºåÈòÄÈó®ÊâçËÉΩÊâìÂºÄÔºåÁÑ∂ÂêéÁªßÁª≠ÊâßË°å„ÄÇ</p>
<p><strong>CountDownLatch Â∫îÁî®Âú∫ÊôØÔºö</strong></p>
<p>1„ÄÅÊüê‰∏ÄÁ∫øÁ®ãÂú®ÂºÄÂßãËøêË°åÂâçÁ≠âÂæÖ n ‰∏™Á∫øÁ®ãÊâßË°åÂÆåÊØï„ÄÇÂêØÂä®‰∏Ä‰∏™ÊúçÂä°Êó∂Ôºå‰∏ªÁ∫øÁ®ãÈúÄË¶ÅÁ≠âÂæÖÂ§ö‰∏™ÁªÑ‰ª∂Âä†ËΩΩÂÆåÊØïÔºå‰πãÂêéÂÜçÁªßÁª≠ÊâßË°å„ÄÇ</p>
<p>2„ÄÅÂÆûÁé∞Â§ö‰∏™Á∫øÁ®ãÂºÄÂßãÊâßË°å‰ªªÂä°ÁöÑÊúÄÂ§ßÂπ∂Ë°åÊÄß„ÄÇÊ≥®ÊÑèÊòØÂπ∂Ë°åÊÄßÔºå‰∏çÊòØÂπ∂ÂèëÔºåÂº∫Ë∞ÉÁöÑÊòØÂ§ö‰∏™Á∫øÁ®ãÂú®Êüê‰∏ÄÊó∂ÂàªÂêåÊó∂ÂºÄÂßãÊâßË°å„ÄÇÁ±ª‰ºº‰∫éËµõË∑ëÔºåÂ∞ÜÂ§ö‰∏™Á∫øÁ®ãÊîæÂà∞Ëµ∑ÁÇπÔºåÁ≠âÂæÖÂèë‰ª§Êû™ÂìçÔºåÁÑ∂ÂêéÂêåÊó∂ÂºÄË∑ë„ÄÇ</p>
<p>3„ÄÅÊ≠ªÈîÅÊ£ÄÊµã„ÄÇ‰ΩøÁî® n ‰∏™Á∫øÁ®ãËÆøÈóÆÂÖ±‰∫´ËµÑÊ∫êÔºåÂú®ÊØèÊ¨°ÊµãËØïÈò∂ÊÆµÁöÑÁ∫øÁ®ãÊï∞ÁõÆÊòØ‰∏çÂêåÁöÑÔºåÂπ∂Â∞ùËØï‰∫ßÁîüÊ≠ªÈîÅ„ÄÇ</p>
<p><strong>CyclicBarrier Â∫îÁî®Âú∫ÊôØÔºö</strong></p>
<p>CyclicBarrier ÂèØ‰ª•Áî®‰∫éÂ§öÁ∫øÁ®ãËÆ°ÁÆóÊï∞ÊçÆÔºåÊúÄÂêéÂêàÂπ∂ËÆ°ÁÆóÁªìÊûúÁöÑÂ∫îÁî®Âú∫ÊôØ„ÄÇ</p>
<h2 id="‚ù∏Exchanger"><a href="#‚ù∏Exchanger" class="headerlink" title="‚ù∏Exchanger"></a>‚ù∏Exchanger</h2><h3 id="üåüExchanger‰∏ªË¶ÅËß£ÂÜ≥‰ªÄ‰πàÈóÆÈ¢ò"><a href="#üåüExchanger‰∏ªË¶ÅËß£ÂÜ≥‰ªÄ‰πàÈóÆÈ¢ò" class="headerlink" title="üåüExchanger‰∏ªË¶ÅËß£ÂÜ≥‰ªÄ‰πàÈóÆÈ¢ò?"></a>üåüExchanger‰∏ªË¶ÅËß£ÂÜ≥‰ªÄ‰πàÈóÆÈ¢ò?</h3><p><code>Exchanger</code>Áî®‰∫é<strong>ËøõË°å‰∏§‰∏™Á∫øÁ®ã‰πãÈó¥ÁöÑÊï∞ÊçÆ‰∫§Êç¢</strong>„ÄÇÂÆÉÊèê‰æõ‰∏Ä‰∏™ÂêåÊ≠•ÁÇπÔºåÂú®Ëøô‰∏™ÂêåÊ≠•ÁÇπÔºå‰∏§‰∏™Á∫øÁ®ãÂèØ‰ª•‰∫§Êç¢ÂΩºÊ≠§ÁöÑÊï∞ÊçÆ„ÄÇËøô‰∏§‰∏™Á∫øÁ®ãÈÄöËøá<code>exchange()</code>ÊñπÊ≥ï‰∫§Êç¢Êï∞ÊçÆÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂÖàÊâßË°å<code>exchange()</code>ÊñπÊ≥ïÂêé‰ºöÈòªÂ°ûÔºåÂÆÉ‰ºö‰∏ÄÁõ¥Á≠âÂæÖÁ¨¨‰∫å‰∏™Á∫øÁ®ã‰πüÊâßË°å<code>exchange()</code>ÊñπÊ≥ïÔºåÂΩìËøô‰∏§‰∏™Á∫øÁ®ãÂà∞ËææÂêåÊ≠•ÁÇπÊó∂ÔºåËøô‰∏§‰∏™Á∫øÁ®ãÂ∞±ÂèØ‰ª•‰∫§Êç¢Êï∞ÊçÆ‰∫Ü„ÄÇ</p>
<h3 id="üåüÂØπÊØîSynchronousQueueÔºå‰∏∫‰ªÄ‰πàËØ¥ExchangerÂèØË¢´ËßÜ‰∏∫-SynchronousQueue-ÁöÑÂèåÂêëÂΩ¢Âºè"><a href="#üåüÂØπÊØîSynchronousQueueÔºå‰∏∫‰ªÄ‰πàËØ¥ExchangerÂèØË¢´ËßÜ‰∏∫-SynchronousQueue-ÁöÑÂèåÂêëÂΩ¢Âºè" class="headerlink" title="üåüÂØπÊØîSynchronousQueueÔºå‰∏∫‰ªÄ‰πàËØ¥ExchangerÂèØË¢´ËßÜ‰∏∫ SynchronousQueue ÁöÑÂèåÂêëÂΩ¢Âºè?"></a>üåüÂØπÊØîSynchronousQueueÔºå‰∏∫‰ªÄ‰πàËØ¥ExchangerÂèØË¢´ËßÜ‰∏∫ SynchronousQueue ÁöÑÂèåÂêëÂΩ¢Âºè?</h3><p>ExchangerÊòØ‰∏ÄÁßçÁ∫øÁ®ãÈó¥ÂÆâÂÖ®‰∫§Êç¢Êï∞ÊçÆÁöÑÊú∫Âà∂„ÄÇ</p>
<p>Á∫øÁ®ãAÈÄöËøá<code>SynchronousQueue</code>Â∞ÜÊï∞ÊçÆa‰∫§ÁªôÁ∫øÁ®ãBÔºõ</p>
<p>Á∫øÁ®ãAÈÄöËøá<code>Exchanger</code>ÂíåÁ∫øÁ®ãB‰∫§Êç¢Êï∞ÊçÆÔºåÁ∫øÁ®ãAÊääÊï∞ÊçÆa‰∫§ÁªôÁ∫øÁ®ãBÔºåÂêåÊó∂Á∫øÁ®ãBÊääÊï∞ÊçÆb‰∫§ÁªôÁ∫øÁ®ãA„ÄÇ</p>
<p>ÂèØËßÅÔºå<code>SynchronousQueue</code>ÊòØ‰∫§Êç¢‰∏Ä‰∏™Êï∞ÊçÆÔºå<code>Exchanger</code>ÊòØ‰∫§Êç¢‰∏§‰∏™Êï∞ÊçÆ„ÄÇ</p>
<h3 id="üåüExchangerÂú®‰∏çÂêåÁöÑJDKÁâàÊú¨‰∏≠ÂÆûÁé∞Êúâ‰ªÄ‰πàÂ∑ÆÂà´"><a href="#üåüExchangerÂú®‰∏çÂêåÁöÑJDKÁâàÊú¨‰∏≠ÂÆûÁé∞Êúâ‰ªÄ‰πàÂ∑ÆÂà´" class="headerlink" title="üåüExchangerÂú®‰∏çÂêåÁöÑJDKÁâàÊú¨‰∏≠ÂÆûÁé∞Êúâ‰ªÄ‰πàÂ∑ÆÂà´?"></a>üåüExchangerÂú®‰∏çÂêåÁöÑJDKÁâàÊú¨‰∏≠ÂÆûÁé∞Êúâ‰ªÄ‰πàÂ∑ÆÂà´?</h3><ul>
<li>Âú®JDK5‰∏≠ExchangerË¢´ËÆæËÆ°Êàê‰∏Ä‰∏™ÂÆπÈáè‰∏∫1ÁöÑÂÆπÂô®ÔºåÂ≠òÊîæ‰∏Ä‰∏™Á≠âÂæÖÁ∫øÁ®ãÔºåÁõ¥Âà∞ÊúâÂè¶Â§ñÁ∫øÁ®ãÂà∞Êù•Â∞±‰ºöÂèëÁîüÊï∞ÊçÆ‰∫§Êç¢ÔºåÁÑ∂ÂêéÊ∏ÖÁ©∫ÂÆπÂô®ÔºåÁ≠âÂà∞‰∏ã‰∏Ä‰∏™Âà∞Êù•ÁöÑÁ∫øÁ®ã„ÄÇ</li>
<li>‰ªéJDK6ÂºÄÂßãÔºåExchangerÁî®‰∫ÜÁ±ª‰ººConcurrentMapÁöÑÂàÜÊÆµÊÄùÊÉ≥ÔºåÊèê‰æõ‰∫ÜÂ§ö‰∏™slotÔºåÂ¢ûÂä†‰∫ÜÂπ∂ÂèëÊâßË°åÊó∂ÁöÑÂêûÂêêÈáè„ÄÇ</li>
</ul>
<h1 id="‚ë¶Âπ∂ÂèëÂÆπÂô®"><a href="#‚ë¶Âπ∂ÂèëÂÆπÂô®" class="headerlink" title="‚ë¶Âπ∂ÂèëÂÆπÂô®"></a>‚ë¶Âπ∂ÂèëÂÆπÂô®</h1><p>JDK Êèê‰æõÁöÑËøô‰∫õÂÆπÂô®Â§ßÈÉ®ÂàÜÂú® <code>java.util.concurrent</code> ÂåÖ‰∏≠„ÄÇ</p>
<ul>
<li><strong><code>ConcurrentHashMap</code></strong> : Á∫øÁ®ãÂÆâÂÖ®ÁöÑ <code>HashMap</code></li>
<li><strong><code>CopyOnWriteArrayList</code></strong> : Á∫øÁ®ãÂÆâÂÖ®ÁöÑ <code>List</code>ÔºåÂú®ËØªÂ§öÂÜôÂ∞ëÁöÑÂú∫ÂêàÊÄßËÉΩÈùûÂ∏∏Â•ΩÔºåËøúËøúÂ•Ω‰∫é <code>Vector</code>„ÄÇ</li>
<li><strong><code>ConcurrentLinkedQueue</code></strong> : È´òÊïàÁöÑÂπ∂ÂèëÈòüÂàóÔºå‰ΩøÁî®ÈìæË°®ÂÆûÁé∞„ÄÇÂèØ‰ª•ÁúãÂÅö‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑ <code>LinkedList</code>ÔºåËøôÊòØ‰∏Ä‰∏™ÈùûÈòªÂ°ûÈòüÂàó„ÄÇ</li>
<li><strong><code>BlockingQueue</code></strong> : ËøôÊòØ‰∏Ä‰∏™Êé•Âè£ÔºåJDK ÂÜÖÈÉ®ÈÄöËøáÈìæË°®„ÄÅÊï∞ÁªÑÁ≠âÊñπÂºèÂÆûÁé∞‰∫ÜËøô‰∏™Êé•Âè£„ÄÇË°®Á§∫ÈòªÂ°ûÈòüÂàóÔºåÈùûÂ∏∏ÈÄÇÂêàÁî®‰∫é‰Ωú‰∏∫Êï∞ÊçÆÂÖ±‰∫´ÁöÑÈÄöÈÅì„ÄÇ</li>
<li><strong><code>ConcurrentSkipListMap</code></strong> : Ë∑≥Ë°®ÁöÑÂÆûÁé∞„ÄÇËøôÊòØ‰∏Ä‰∏™ MapÔºå‰ΩøÁî®Ë∑≥Ë°®ÁöÑÊï∞ÊçÆÁªìÊûÑËøõË°åÂø´ÈÄüÊü•Êâæ„ÄÇ</li>
</ul>
<h2 id="‚ù∂ConcurrentHashMap"><a href="#‚ù∂ConcurrentHashMap" class="headerlink" title="‚ù∂ConcurrentHashMap"></a>‚ù∂ConcurrentHashMap</h2><h3 id="üåü‰ªÄ‰πàÊòØConcurrentHashMapÔºüÁõ∏ÊØî‰∫éHashMapÂíåHashTableÊúâ‰ªÄ‰πà‰ºòÂäøÔºü"><a href="#üåü‰ªÄ‰πàÊòØConcurrentHashMapÔºüÁõ∏ÊØî‰∫éHashMapÂíåHashTableÊúâ‰ªÄ‰πà‰ºòÂäøÔºü" class="headerlink" title="üåü‰ªÄ‰πàÊòØConcurrentHashMapÔºüÁõ∏ÊØî‰∫éHashMapÂíåHashTableÊúâ‰ªÄ‰πà‰ºòÂäøÔºü"></a>üåü‰ªÄ‰πàÊòØConcurrentHashMapÔºüÁõ∏ÊØî‰∫éHashMapÂíåHashTableÊúâ‰ªÄ‰πà‰ºòÂäøÔºü</h3><blockquote>
<p>Âú®Âπ∂ÂèëÂú∫ÊôØ‰∏ãÂ¶ÇÊûúË¶Å‰øùËØÅ‰∏ÄÁßçÂèØË°åÁöÑÊñπÂºèÊòØ‰ΩøÁî® <code>Collections.synchronizedMap()</code> ÊñπÊ≥ïÊù•ÂåÖË£ÖÊàë‰ª¨ÁöÑ <code>HashMap</code>„ÄÇ‰ΩÜËøôÊòØÈÄöËøá‰ΩøÁî®‰∏Ä‰∏™ÂÖ®Â±ÄÁöÑÈîÅÊù•ÂêåÊ≠•‰∏çÂêåÁ∫øÁ®ãÈó¥ÁöÑÂπ∂ÂèëËÆøÈóÆÔºåÂõ†Ê≠§‰ºöÂ∏¶Êù•‰∏çÂèØÂøΩËßÜÁöÑÊÄßËÉΩÈóÆÈ¢ò„ÄÇ</p>
</blockquote>
<p><code>CocurrentHashMap</code>ÂèØ‰ª•Áúã‰Ωú<strong>Á∫øÁ®ãÂÆâÂÖ®‰∏îÈ´òÊïà</strong>ÁöÑ<code>HashMap</code>ÔºåÁõ∏ÊØî‰∫é<code>HashMap</code>ÂÖ∑ÊúâÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ‰ºòÂäøÔºåÁõ∏ÊØî‰∫é<code>HashTable</code>ÂÖ∑ÊúâÊïàÁéáÈ´òÁöÑ‰ºòÂäø„ÄÇ</p>
<h3 id="üåüConcurrentHashMapÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"><a href="#üåüConcurrentHashMapÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü" class="headerlink" title="üåüConcurrentHashMapÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü"></a>üåüConcurrentHashMapÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÔºü</h3><p><strong>JDK1.7</strong></p>
<p>Âú®JDK1.7ÁâàÊú¨‰∏≠Ôºå<code>ConcurrentHashMap</code>ÁöÑÊï∞ÊçÆÁªìÊûÑÊòØÁî±‰∏Ä‰∏™<code>Segment</code>Êï∞ÁªÑÂíåÂ§ö‰∏™<code>HashEntry</code>Êï∞ÁªÑÁªÑÊàêÔºå<code>Segment</code>Â≠òÂÇ®ÁöÑÊòØÈìæË°®Êï∞ÁªÑÁöÑÂΩ¢Âºè„ÄÇ</p>
<p><img src="https://img.jwt1399.top/img/202301071551771.png" alt="concurrentHashMap-jdk1.7"></p>
<p>‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫Ôºå<code>ConcurrentHashMap</code>ÂÆö‰Ωç‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑËøáÁ®ãÈúÄË¶Å‰∏§Ê¨°HashÁöÑËøáÁ®ãÔºåÁ¨¨‰∏ÄÊ¨°HashÁöÑÁõÆÁöÑÊòØÂÆö‰ΩçÂà∞SegmentÔºåÁ¨¨‰∫åÊ¨°HashÁöÑÁõÆÁöÑÊòØÂÆö‰ΩçÂà∞ÈìæË°®ÁöÑÂ§¥ÈÉ®„ÄÇ‰∏§Ê¨°HashÊâÄ‰ΩøÁî®ÁöÑÊó∂Èó¥ÊØî‰∏ÄÊ¨°HashÁöÑÊó∂Èó¥Ë¶ÅÈïøÔºå‰ΩÜËøôÊ†∑ÂÅöÂèØ‰ª•Âú®ÂÜôÊìç‰ΩúÊó∂ÔºåÂè™ÂØπÂÖÉÁ¥†ÊâÄÂú®ÁöÑ segment Âä†ÈîÅÔºå‰∏ç‰ºöÂΩ±ÂìçÂà∞ÂÖ∂‰ªñsegmentÔºåËøôÊ†∑ÂèØ‰ª•Â§ßÂ§ßÊèêÈ´òÂπ∂ÂèëËÉΩÂäõ„ÄÇ</p>
<p><strong>JDK1.8</strong></p>
<p>JDK1.8‰∏çÂú®ÈááÁî®segmentÁöÑÁªìÊûÑÔºåËÄåÊòØ‰ΩøÁî®NodeÊï∞ÁªÑ+ÈìæË°®&#x2F;Á∫¢ÈªëÊ†ëÁöÑÊï∞ÊçÆÁªìÊûÑÊù•ÂÆûÁé∞ÁöÑÔºàÂíå<code>HashMap</code>‰∏ÄÊ†∑ÔºåÈìæË°®ËäÇÁÇπ‰∏™Êï∞Â§ß‰∫é8ÔºåÈìæË°®‰ºöËΩ¨Êç¢‰∏∫Á∫¢ÈªëÊ†ëÔºâ</p>
<p><img src="https://img.jwt1399.top/img/202301071551735.png" alt=" concurrentHashMap-jdk1.8"></p>
<p>‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºåÂØπ‰∫é<code>ConcurrentHashMap</code>ÁöÑÂÆûÁé∞ÔºåJDK1.8ÁöÑÂÆûÁé∞ÊñπÂºèÂèØ‰ª•Èôç‰ΩéÈîÅÁöÑÁ≤íÂ∫¶ÔºåÂõ†‰∏∫JDLK1.7ÊâÄÂÆûÁé∞ÁöÑ<code>ConcurrentHashMap</code>ÁöÑ<strong>ÈîÅÁöÑÁ≤íÂ∫¶ÊòØÂü∫‰∫éSegment</strong>ÔºåËÄå‰∏Ä‰∏™SegmentÂåÖÂê´Â§ö‰∏™HashEntry„ÄÇJDLK1.8<strong>ÈîÅÂÆöÂΩìÂâçÈìæË°®ÊàñÁ∫¢Èªë‰∫åÂèâÊ†ëÁöÑÈ¶ñËäÇÁÇπ</strong>„ÄÇ</p>
<h3 id="üåüConcurrentHashMapÁªìÊûÑ‰∏≠ÂèòÈáè‰ΩøÁî®volatileÂíåfinal‰øÆÈ•∞Êúâ‰ªÄ‰πà‰ΩúÁî®Ôºü"><a href="#üåüConcurrentHashMapÁªìÊûÑ‰∏≠ÂèòÈáè‰ΩøÁî®volatileÂíåfinal‰øÆÈ•∞Êúâ‰ªÄ‰πà‰ΩúÁî®Ôºü" class="headerlink" title="üåüConcurrentHashMapÁªìÊûÑ‰∏≠ÂèòÈáè‰ΩøÁî®volatileÂíåfinal‰øÆÈ•∞Êúâ‰ªÄ‰πà‰ΩúÁî®Ôºü"></a>üåüConcurrentHashMapÁªìÊûÑ‰∏≠ÂèòÈáè‰ΩøÁî®volatileÂíåfinal‰øÆÈ•∞Êúâ‰ªÄ‰πà‰ΩúÁî®Ôºü</h3><p><code>final</code>‰øÆÈ•∞ÂèòÈáèÂèØ‰ª•‰øùËØÅÂèòÈáè‰∏çÈúÄË¶ÅÂêåÊ≠•Â∞±ÂèØ‰ª•Ë¢´ËÆøÈóÆÂíåÂÖ±‰∫´Ôºå<code>volatile</code>ÂèØ‰ª•‰øùËØÅÂÜÖÂ≠òÁöÑÂèØËßÅÊÄßÔºåÈÖçÂêàCASÊìç‰ΩúÂèØ‰ª•Âú®‰∏çÂä†ÈîÅÁöÑÂâçÊèêÊîØÊåÅÂπ∂Âèë„ÄÇ</p>
<h3 id="üåüConcurrentHashMapÊúâ‰ªÄ‰πàÁº∫ÁÇπÔºü"><a href="#üåüConcurrentHashMapÊúâ‰ªÄ‰πàÁº∫ÁÇπÔºü" class="headerlink" title="üåüConcurrentHashMapÊúâ‰ªÄ‰πàÁº∫ÁÇπÔºü"></a>üåüConcurrentHashMapÊúâ‰ªÄ‰πàÁº∫ÁÇπÔºü</h3><p>Âõ†‰∏∫<code>ConcurrentHashMap</code>Âú®Êõ¥Êñ∞Êï∞ÊçÆÊó∂Âè™‰ºöÈîÅ‰ΩèÈÉ®ÂàÜÊï∞ÊçÆÔºåÂπ∂‰∏ç‰ºöÂ∞ÜÊï¥‰∏™Ë°®ÈîÅ‰ΩèÔºåËØªÂèñÁöÑÊó∂ÂÄô‰πüÂπ∂‰∏çËÉΩ‰øùËØÅËØªÂèñÂà∞ÊúÄËøëÁöÑÊõ¥Êñ∞ÔºåÂè™ËÉΩ‰øùËØÅËØªÂèñÂà∞Â∑≤ÁªèÈ°∫Âà©ÊèíÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇ</p>
<h3 id="üåüConcurrentHashMapÈªòËÆ§ÂàùÂßãÂÆπÈáèÊòØÂ§öÂ∞ëÔºüÊØèÊ¨°Êâ©ÂÆπ‰∏∫ÂéüÊù•ÁöÑÂá†ÂÄçÔºü"><a href="#üåüConcurrentHashMapÈªòËÆ§ÂàùÂßãÂÆπÈáèÊòØÂ§öÂ∞ëÔºüÊØèÊ¨°Êâ©ÂÆπ‰∏∫ÂéüÊù•ÁöÑÂá†ÂÄçÔºü" class="headerlink" title="üåüConcurrentHashMapÈªòËÆ§ÂàùÂßãÂÆπÈáèÊòØÂ§öÂ∞ëÔºüÊØèÊ¨°Êâ©ÂÆπ‰∏∫ÂéüÊù•ÁöÑÂá†ÂÄçÔºü"></a>üåüConcurrentHashMapÈªòËÆ§ÂàùÂßãÂÆπÈáèÊòØÂ§öÂ∞ëÔºüÊØèÊ¨°Êâ©ÂÆπ‰∏∫ÂéüÊù•ÁöÑÂá†ÂÄçÔºü</h3><p>ConcurrentHashMapÈªòËÆ§ÁöÑÂàùÂßãÂÆπÈáè‰∏∫16ÔºåÊØèÊ¨°Êâ©ÂÆπ‰∏∫‰πãÂâçÁöÑ‰∏§ÂÄç„ÄÇ</p>
<p>ConCurrentHashmapÂú®JDK1.8‰∏≠Ôºå‰ªÄ‰πàÊÉÖÂÜµ‰∏ãÈìæË°®‰ºöËΩ¨Âåñ‰∏∫Á∫¢ÈªëÊ†ëÔºüÂΩìÈìæË°®ÈïøÂ∫¶Â§ß‰∫é8ÔºåNodeÊï∞ÁªÑÊï∞Â§ß‰∫é64Êó∂„ÄÇ</p>
<h3 id="üåüConCurrentHashMapÁöÑkeyÔºåvalueÊòØÂê¶ÂèØ‰ª•‰∏∫nullÔºüHashMap‰∏≠ÁöÑkeyÔºåvalueÊòØÂê¶ÂèØ‰ª•‰∏∫nullÔºü"><a href="#üåüConCurrentHashMapÁöÑkeyÔºåvalueÊòØÂê¶ÂèØ‰ª•‰∏∫nullÔºüHashMap‰∏≠ÁöÑkeyÔºåvalueÊòØÂê¶ÂèØ‰ª•‰∏∫nullÔºü" class="headerlink" title="üåüConCurrentHashMapÁöÑkeyÔºåvalueÊòØÂê¶ÂèØ‰ª•‰∏∫nullÔºüHashMap‰∏≠ÁöÑkeyÔºåvalueÊòØÂê¶ÂèØ‰ª•‰∏∫nullÔºü"></a>üåüConCurrentHashMapÁöÑkeyÔºåvalueÊòØÂê¶ÂèØ‰ª•‰∏∫nullÔºüHashMap‰∏≠ÁöÑkeyÔºåvalueÊòØÂê¶ÂèØ‰ª•‰∏∫nullÔºü</h3><p><code>ConCurrentHashMap</code>‰∏≠ÁöÑ<code>key</code>Âíå<code>value</code>‰∏∫<code>null</code>‰ºöÂá∫Áé∞Á©∫ÊåáÈíàÂºÇÂ∏∏ÔºåËÄå<code>HashMap</code>‰∏≠ÁöÑ<code>key</code>Âíå<code>value</code>ÂÄºÊòØÂèØ‰ª•‰∏∫<code>null</code>ÁöÑ„ÄÇ</p>
<p>ÂéüÂõ†Â¶Ç‰∏ãÔºö<code>ConCurrentHashMap</code>ÊòØÂú®Â§öÁ∫øÁ®ãÂú∫ÊôØ‰∏ã‰ΩøÁî®ÁöÑÔºåÂ¶ÇÊûú<code>ConcurrentHashMap.get(key)</code>ÁöÑÂÄº‰∏∫<code>null</code>ÔºåÈÇ£‰πàÊó†Ê≥ïÂà§Êñ≠Âà∞Â∫ïÊòØ<code>key</code>ÂØπÂ∫îÁöÑ<code>value</code>ÁöÑÂÄº‰∏∫<code>null</code>ËøòÊòØ‰∏çÂ≠òÂú®ÂØπÂ∫îÁöÑ<code>key</code>ÂÄº„ÄÇËÄåÂú®ÂçïÁ∫øÁ®ãÂú∫ÊôØ‰∏ãÁöÑ<code>HashMap</code>‰∏≠ÔºåÂèØ‰ª•‰ΩøÁî®<code>containsKey(key)</code>Êù•Âà§Êñ≠Âà∞Â∫ïÊòØÂê¶Â≠òÂú®Ëøô‰∏™<code>key</code>ËøòÊòØ<code>key</code>ÂØπÂ∫îÁöÑ<code>value</code>ÁöÑÂÄº‰∏∫<code>null</code>„ÄÇÂú®Â§öÁ∫øÁ®ãÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®<code>containsKey(key)</code>Êù•ÂÅöËøô‰∏™Âà§Êñ≠ÊòØÂ≠òÂú®ÈóÆÈ¢òÁöÑÔºåÂõ†‰∏∫Âú®<code>containsKey(key)</code>Âíå<code>ConcurrentHashMap.get(key)</code>‰∏§Ê¨°Ë∞ÉÁî®ÁöÑËøáÁ®ã‰∏≠Ôºå<code>key</code>ÁöÑÂÄºÂ∑≤ÁªèÂèëÁîü‰∫ÜÊîπÂèò„ÄÇ</p>
<h3 id="üåüConcurrentHashMapÂú®JDK1-7ÂíåJDK1-8ÁâàÊú¨‰∏≠ÁöÑÂå∫Âà´Ôºü"><a href="#üåüConcurrentHashMapÂú®JDK1-7ÂíåJDK1-8ÁâàÊú¨‰∏≠ÁöÑÂå∫Âà´Ôºü" class="headerlink" title="üåüConcurrentHashMapÂú®JDK1.7ÂíåJDK1.8ÁâàÊú¨‰∏≠ÁöÑÂå∫Âà´Ôºü"></a>üåüConcurrentHashMapÂú®JDK1.7ÂíåJDK1.8ÁâàÊú¨‰∏≠ÁöÑÂå∫Âà´Ôºü</h3><ul>
<li>ÂÆûÁé∞ÁªìÊûÑ‰∏äÁöÑ‰∏çÂêåÔºåJDK1.7ÊòØÂü∫‰∫éSegmentÂÆûÁé∞ÁöÑÔºåJDK1.8ÊòØÂü∫‰∫éNodeÊï∞ÁªÑ+ÈìæË°®&#x2F;Á∫¢ÈªëÊ†ëÂÆûÁé∞ÁöÑ„ÄÇ</li>
<li>‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®ÊñπÈù¢ÔºöJDK1.7ÈááÁî®‰∫ÜÂàÜÊÆµÈîÅÁöÑÊú∫Âà∂ÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂç†Áî®ÈîÅÊó∂Ôºå‰ºöÈîÅ‰Ωè‰∏Ä‰∏™SegmentÂØπË±°Ôºå‰∏ç‰ºöÂΩ±ÂìçÂÖ∂‰ªñSegmentÂØπË±°„ÄÇJDK1.8ÂàôÊòØÈááÁî®‰∫ÜCASÂíå<code>synchronize</code>ÁöÑÊñπÂºèÊù•‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®„ÄÇ</li>
<li>Âú®Â≠òÂèñÊï∞ÊçÆÊñπÈù¢Ôºö<ul>
<li><strong>JDK1.7‰∏≠ÁöÑ<code>put()</code>ÊñπÊ≥ïÔºö</strong><ul>
<li>ÂÖàËÆ°ÁÆóÂá∫<code>key</code>ÁöÑ<code>hash</code>ÂÄºÔºåÂà©Áî®<code>hash</code>ÂÄºÂØπsegmentÊï∞ÁªÑÂèñ‰ΩôÊâæÂà∞ÂØπÂ∫îÁöÑsegmentÂØπË±°„ÄÇ</li>
<li>Â∞ùËØïËé∑ÂèñÈîÅÔºåÂ§±Ë¥•ÂàôËá™ÊóãÁõ¥Ëá≥ÊàêÂäüÔºåËé∑ÂèñÂà∞ÈîÅÔºåÈÄöËøáËÆ°ÁÆóÁöÑ<code>hash</code>ÂÄºÂØπhashentryÊï∞ÁªÑËøõË°åÂèñ‰ΩôÔºåÊâæÂà∞ÂØπÂ∫îÁöÑentryÂØπË±°„ÄÇ</li>
<li>ÈÅçÂéÜÈìæË°®ÔºåÊü•ÊâæÂØπÂ∫îÁöÑ<code>key</code>ÂÄºÔºåÂ¶ÇÊûúÊâæÂà∞ÂàôÂ∞ÜÊóßÁöÑvalueÁõ¥Êé•Ë¶ÜÁõñÔºåÂ¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ÔºåÂàôÊ∑ªÂä†Âà∞ÈìæË°®‰∏≠„ÄÇÔºàJDK1.7ÊòØÊèíÂÖ•Âà∞ÈìæË°®Â§¥ÈÉ®ÔºåJDK1.8ÊòØÊèíÂÖ•Âà∞ÈìæË°®Â∞æÈÉ®ÔºåËøôÈáåÂèØ‰ª•ÊÄùËÄÉ‰∏Ä‰∏ã‰∏∫‰ªÄ‰πàËøôÊ†∑Ôºâ</li>
</ul>
</li>
<li><strong>JDK1.8‰∏≠ÁöÑ<code>put()</code>ÊñπÊ≥ï:</strong><ul>
<li>ËÆ°ÁÆó<code>key</code>ÂÄºÁöÑ<code>hash</code>ÂÄºÔºåÊâæÂà∞ÂØπÂ∫îÁöÑ<code>Node</code>ÔºåÂ¶ÇÊûúÂΩìÂâç‰ΩçÁΩÆ‰∏∫Á©∫ÂàôÂèØ‰ª•Áõ¥Êé•ÂÜôÂÖ•Êï∞ÊçÆ„ÄÇ</li>
<li>Âà©Áî®CASÂ∞ùËØïÂÜôÂÖ•ÔºåÂ¶ÇÊûúÂ§±Ë¥•ÂàôËá™ÊóãÁõ¥Ëá≥ÊàêÂäüÔºåÂ¶ÇÊûúÈÉΩ‰∏çÊª°Ë∂≥ÔºåÂàôÂà©Áî®<code>synchronized</code>ÈîÅÂÜôÂÖ•Êï∞ÊçÆ„ÄÇ</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="üåüConcurrentHashMapËø≠‰ª£Âô®ÊòØÂº∫‰∏ÄËá¥ÊÄßËøòÊòØÂº±‰∏ÄËá¥ÊÄßÔºü"><a href="#üåüConcurrentHashMapËø≠‰ª£Âô®ÊòØÂº∫‰∏ÄËá¥ÊÄßËøòÊòØÂº±‰∏ÄËá¥ÊÄßÔºü" class="headerlink" title="üåüConcurrentHashMapËø≠‰ª£Âô®ÊòØÂº∫‰∏ÄËá¥ÊÄßËøòÊòØÂº±‰∏ÄËá¥ÊÄßÔºü"></a>üåüConcurrentHashMapËø≠‰ª£Âô®ÊòØÂº∫‰∏ÄËá¥ÊÄßËøòÊòØÂº±‰∏ÄËá¥ÊÄßÔºü</h3><p>‰∏éHashMap‰∏çÂêåÁöÑÊòØÔºå<code>ConcurrentHashMap</code>Ëø≠‰ª£Âô®ÊòØÂº±‰∏ÄËá¥ÊÄß„ÄÇ</p>
<p>Âº±‰∏ÄËá¥ÊÄßÔºöÂΩì<code>ConcurrentHashMap</code>ÁöÑËø≠‰ª£Âô®ÂàõÂª∫ÂêéÔºå‰ºöÈÅçÂéÜÂìàÂ∏åË°®‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÂú®ÈÅçÂéÜÁöÑËøáÁ®ã‰∏≠ÔºåÂìàÂ∏åË°®‰∏≠ÁöÑÂÖÉÁ¥†ÂèØËÉΩÂèëÁîüÂèòÂåñÔºåÂ¶ÇÊûúËøôÈÉ®ÂàÜÂèòÂåñÂèëÁîüÂú®Â∑≤ÁªèÈÅçÂéÜËøáÁöÑÂú∞ÊñπÔºåËø≠‰ª£Âô®Âàô‰∏ç‰ºöÂèçÊò†Âá∫Êù•ÔºåÂ¶ÇÊûúËøôÈÉ®ÂàÜÂèòÂåñÂèëÁîüÂú®Êú™ÈÅçÂéÜËøáÁöÑÂú∞ÊñπÔºåËø≠‰ª£Âô®Âàô‰ºöÂèçÊò†Âá∫Êù•„ÄÇÊç¢ÁßçËØ¥Ê≥ïÂ∞±ÊòØ<code>put()</code>ÊñπÊ≥ïÂ∞Ü‰∏Ä‰∏™ÂÖÉÁ¥†Âä†ÂÖ•Âà∞Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÂêéÔºå<code>get()</code>ÂèØËÉΩÂú®ÊüêÊÆµÊó∂Èó¥ÂÜÖËøòÁúã‰∏çÂà∞Ëøô‰∏™ÂÖÉÁ¥†„ÄÇ</p>
<p>ËøôÊ†∑ËÆæËÆ°‰∏ªË¶ÅÊòØ‰∏∫<code>ConcurrenthashMap</code>ÁöÑÊÄßËÉΩËÄÉËôëÔºåÂ¶ÇÊûúÊÉ≥ÂÅöÂà∞Âº∫‰∏ÄËá¥ÊÄßÔºåÂ∞±Ë¶ÅÂà∞Â§ÑÂä†ÈîÅÔºåÊÄßËÉΩ‰ºö‰∏ãÈôçÂæàÂ§ö„ÄÇÊâÄ‰ª•<code>ConcurrentHashMap</code>ÊòØÊîØÊåÅÂú®Ëø≠‰ª£ËøáÁ®ã‰∏≠ÔºåÂêëmap‰∏≠Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÔºåËÄå<code>HashMap</code>ËøôÊ†∑Êìç‰ΩúÂàô‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇ</p>
<h2 id="‚ù∑CopyOnWriteArrayList"><a href="#‚ù∑CopyOnWriteArrayList" class="headerlink" title="‚ù∑CopyOnWriteArrayList"></a>‚ù∑CopyOnWriteArrayList</h2><h3 id="üåü‰ªÄ‰πàÊòØCopyOnWriteArrayListÔºü"><a href="#üåü‰ªÄ‰πàÊòØCopyOnWriteArrayListÔºü" class="headerlink" title="üåü‰ªÄ‰πàÊòØCopyOnWriteArrayListÔºü"></a>üåü‰ªÄ‰πàÊòØCopyOnWriteArrayListÔºü</h3><blockquote>
<p><code>CopyOnWriteArrayList</code>‰∏é<code>ReentrantReadWriteLock</code> ËØªÂÜôÈîÅÁöÑÊÄùÊÉ≥ÈùûÂ∏∏Á±ª‰ººÔºå‰πüÂ∞±ÊòØËØªËØªÂÖ±‰∫´„ÄÅÂÜôÂÜô‰∫íÊñ•„ÄÅËØªÂÜô‰∫íÊñ•„ÄÅÂÜôËØª‰∫íÊñ•„ÄÇJDK ‰∏≠Êèê‰æõ‰∫Ü <code>CopyOnWriteArrayList</code> Á±ªÁõ∏ÊØî‰∫éËØªÂÜôÈîÅÁöÑÊÄùÊÉ≥ÂèàÊõ¥Ëøõ‰∏ÄÊ≠•„ÄÇ</p>
</blockquote>
<p>CopyOnWriteArrayList ÈááÁî®‰∫Ü<strong>ÂÜôÊó∂Â§çÂà∂</strong>ÁöÑÊÄùÊÉ≥ÔºåÂ¢ûÂà†ÊîπÊìç‰Ωú‰ºöÂ∞ÜÂ∫ïÂ±ÇÊï∞ÁªÑÊã∑Ë¥ù‰∏Ä‰ªΩÔºåÂú®Êñ∞Êï∞ÁªÑ‰∏äÊâßË°åÊìç‰ΩúÔºå‰∏çÂΩ±ÂìçÂÖ∂ÂÆÉÁ∫øÁ®ãÁöÑ<strong>Âπ∂ÂèëËØªÔºåÂÆûÁé∞ËØªÂÜôÂàÜÁ¶ª</strong></p>
<h3 id="üåüCopyOnWriteArrayList-ÊòØÂ¶Ç‰ΩïÂÅöÂà∞ÁöÑÔºü"><a href="#üåüCopyOnWriteArrayList-ÊòØÂ¶Ç‰ΩïÂÅöÂà∞ÁöÑÔºü" class="headerlink" title="üåüCopyOnWriteArrayList ÊòØÂ¶Ç‰ΩïÂÅöÂà∞ÁöÑÔºü"></a>üåüCopyOnWriteArrayList ÊòØÂ¶Ç‰ΩïÂÅöÂà∞ÁöÑÔºü</h3><p>CopyOnWriteArrayListÁöÑÂÆûÁé∞ÂéüÁêÜ‰∏ªË¶ÅÂàÜ‰∏∫‰∏§‰∏™ÊñπÈù¢Ôºå‰∏ÄÊòØÂà©Áî®ÂèØÈáçÂÖ•ÈîÅÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®Ôºå‰∫åÊòØÈÄöËøáÂ§çÂà∂Êï∞ÁªÑÂÆûÁé∞ËØªÂÜôÂàÜÁ¶ª„ÄÇ</p>
<p>Âú®CopyOnWriteArrayList‰∏≠ÔºåÊØèÊ¨°ÂÜôÊìç‰ΩúÈÉΩ‰ºöÂÖàËé∑ÂèñÂèØÈáçÂÖ•ÈîÅÔºåÁÑ∂ÂêéÂ∞ÜÂΩìÂâçÊï∞ÁªÑÂ§çÂà∂‰∏Ä‰ªΩÔºåÂú®Êñ∞Êï∞ÁªÑ‰∏äÊâßË°åÊìç‰ΩúÔºå‰øÆÊîπÂêéÂÜçÂ∞ÜÊñ∞ÁöÑÊï∞ÁªÑËµãÂÄºÁªôÂéüÊù•ÁöÑÂºïÁî®ÔºåÂú®‰øÆÊîπÂÆåÊàêÂêéÈáäÊîæÈîÅ„ÄÇÁî±‰∫éËØªÊìç‰Ωú‰∏ç‰ºöÂØπÂéüÊï∞ÁªÑËøõË°å‰øÆÊîπÔºåÊâÄ‰ª•ËØªÊìç‰ΩúÂèØ‰ª•Áõ¥Êé•ÂØπÂéüÊù•ÁöÑÊï∞ÁªÑËøõË°åËØªÂèñÔºåÊó†ÈúÄÂä†ÈîÅ„ÄÇËøôÊ†∑Â∞±ÂÆûÁé∞‰∫Ü<strong>ËØªÂÜôÂàÜÁ¶ª</strong>ÁöÑÊïàÊûúÔºåÂèØ‰ª•Âú®‰∏çÂΩ±ÂìçÊ≠£Âú®ËøõË°åÁöÑËØªÊìç‰ΩúÁöÑÊÉÖÂÜµ‰∏ãËøõË°åÂÜôÊìç‰Ωú„ÄÇ</p>
<h3 id="üåüCopyOnWriteArrayListÊúâ‰ΩïÁº∫Èô∑ÔºåËØ¥ËØ¥ÂÖ∂Â∫îÁî®Âú∫ÊôØ"><a href="#üåüCopyOnWriteArrayListÊúâ‰ΩïÁº∫Èô∑ÔºåËØ¥ËØ¥ÂÖ∂Â∫îÁî®Âú∫ÊôØ" class="headerlink" title="üåüCopyOnWriteArrayListÊúâ‰ΩïÁº∫Èô∑ÔºåËØ¥ËØ¥ÂÖ∂Â∫îÁî®Âú∫ÊôØ?"></a>üåüCopyOnWriteArrayListÊúâ‰ΩïÁº∫Èô∑ÔºåËØ¥ËØ¥ÂÖ∂Â∫îÁî®Âú∫ÊôØ?</h3><ul>
<li>Áî±‰∫éÂÜôÊìç‰ΩúÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÊã∑Ë¥ùÊï∞ÁªÑÔºå‰ºö<strong>Ê∂àËÄóÂÜÖÂ≠òÔºåÊÄßËÉΩËæÉ‰Ωé</strong>ÔºåÂ¶ÇÊûúÂéüÊï∞ÁªÑÁöÑÂÜÖÂÆπÊØîËæÉÂ§öÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØËÉΩ<strong>ÂØºËá¥young gcÊàñËÄÖfull gc</strong></li>
<li><strong>‰∏çËÉΩ‰øùËØÅÊï∞ÊçÆÁöÑÂÆûÊó∂‰∏ÄËá¥ÊÄß</strong>ÔºåÁî±‰∫éÂÜôÊìç‰ΩúÁöÑÁªìÊûúÂè™‰ºöÂØπÊñ∞ÁöÑÊï∞ÁªÑ‰∫ßÁîüÂΩ±ÂìçÔºåÊâÄ‰ª•Âú®Â§öÁ∫øÁ®ãÁéØÂ¢É‰∏≠ÔºåËØªÂèñÂà∞ÁöÑÊï∞ÊçÆÂèØËÉΩ‰∏çÊòØÊúÄÊñ∞ÁöÑ„ÄÇÂõ†Ê≠§ÔºåCopyOnWriteArrayListÈÄÇÁî®‰∫é<strong>ËØªÂ§öÂÜôÂ∞ë</strong>‰∏î<strong>ÂØπÂÆûÊó∂ÊÄßË¶ÅÊ±Ç‰∏çÈ´ò</strong>ÁöÑÂú∫ÊôØ„ÄÇ</li>
</ul>
<h2 id="‚ù∏ConcurrentLinkedQueue"><a href="#‚ù∏ConcurrentLinkedQueue" class="headerlink" title="‚ù∏ConcurrentLinkedQueue"></a>‚ù∏ConcurrentLinkedQueue</h2><p>Java Êèê‰æõÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ <code>Queue</code> ÂèØ‰ª•ÂàÜ‰∏∫<strong>ÈòªÂ°ûÈòüÂàó</strong>Âíå<strong>ÈùûÈòªÂ°ûÈòüÂàó</strong></p>
<ul>
<li>ÈòªÂ°ûÈòüÂàóÁöÑÂÖ∏Âûã‰æãÂ≠êÊòØ <code>BlockingQueue</code>ÔºåÈòªÂ°ûÈòüÂàóÂèØ‰ª•ÈÄöËøá<strong>Âä†ÈîÅ</strong>Êù•ÂÆûÁé∞</li>
<li>ÈùûÈòªÂ°ûÈòüÂàóÁöÑÂÖ∏Âûã‰æãÂ≠êÊòØ <code>ConcurrentLinkedQueue</code>Ôºå ÈùûÈòªÂ°ûÈòüÂàóÂèØ‰ª•ÈÄöËøá <strong>CAS</strong> Êìç‰ΩúÂÆûÁé∞„ÄÇ</li>
</ul>
<p><code>ConcurrentLinkedQueue</code>Ëøô‰∏™ÈòüÂàó‰ΩøÁî®ÈìæË°®‰Ωú‰∏∫ÂÖ∂Êï∞ÊçÆÁªìÊûÑÔºé<code>ConcurrentLinkedQueue</code> Â∫îËØ•ÁÆóÊòØÂú®È´òÂπ∂ÂèëÁéØÂ¢É‰∏≠ÊÄßËÉΩÊúÄÂ•ΩÁöÑÈòüÂàó‰∫Ü„ÄÇÂÆÉ‰πãÊâÄÊúâËÉΩÊúâÂæàÂ•ΩÁöÑÊÄßËÉΩÔºåÊòØÂõ†‰∏∫ÂÖ∂ÂÜÖÈÉ®Â§çÊùÇÁöÑÂÆûÁé∞„ÄÇ</p>
<p> <code>ConcurrentLinkedQueue</code> ‰∏ªË¶Å‰ΩøÁî® CAS ÈùûÈòªÂ°ûÁÆóÊ≥ïÊù•ÂÆûÁé∞Á∫øÁ®ãÂÆâÂÖ®„ÄÇ</p>
<p><code>ConcurrentLinkedQueue</code> ÈÄÇÂêàÂú®ÂØπÊÄßËÉΩË¶ÅÊ±ÇÁõ∏ÂØπËæÉÈ´òÔºåÂêåÊó∂ÂØπÈòüÂàóÁöÑËØªÂÜôÂ≠òÂú®Â§ö‰∏™Á∫øÁ®ãÂêåÊó∂ËøõË°åÁöÑÂú∫ÊôØÔºåÂç≥Â¶ÇÊûúÂØπÈòüÂàóÂä†ÈîÅÁöÑÊàêÊú¨ËæÉÈ´òÂàôÈÄÇÂêà‰ΩøÁî®Êó†ÈîÅÁöÑ <code>ConcurrentLinkedQueue</code> Êù•Êõø‰ª£„ÄÇ</p>
<h2 id="‚ùπBlockingQueue"><a href="#‚ùπBlockingQueue" class="headerlink" title="‚ùπBlockingQueue"></a>‚ùπBlockingQueue</h2><p>BlockingQueueÊòØJava‰∏≠‰∏Ä‰∏™Á∫øÁ®ãÂÆâÂÖ®ÁöÑÈòüÂàóÊé•Âè£ÔºåÂÆÉÊâ©Â±ï‰∫ÜQueueÊé•Âè£Ôºå<strong>Êèê‰æõ‰∫ÜÈòªÂ°ûÊìç‰Ωú</strong>ÔºåÂèØ‰ª•Âú®ÈòüÂàó‰∏∫Á©∫ÊàñËÄÖÈòüÂàóÂ∑≤Êª°Êó∂Ëá™Âä®ÈòªÂ°ûÁ≠âÂæÖ„ÄÇ</p>
<p>BlockingQueueÂú®Â§öÁ∫øÁ®ãÁºñÁ®ã‰∏≠ÂπøÊ≥õÂ∫îÁî®ÔºåÁâπÂà´ÊòØÂú®Áîü‰∫ßËÄÖ-Ê∂àË¥πËÄÖÊ®°Âºè‰∏≠„ÄÇÂÖ∂ÂéüÂõ†ÊòØ BlockingQueue Êèê‰æõ‰∫ÜÂèØÈòªÂ°ûÁöÑÊèíÂÖ•ÂíåÁßªÈô§ÁöÑÊñπÊ≥ï„ÄÇÂΩìÈòüÂàóÂÆπÂô®Â∑≤Êª°ÔºåÁîü‰∫ßËÄÖÁ∫øÁ®ã‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Âà∞ÈòüÂàóÊú™Êª°ÔºõÂΩìÈòüÂàóÂÆπÂô®‰∏∫Á©∫Êó∂ÔºåÊ∂àË¥πËÄÖÁ∫øÁ®ã‰ºöË¢´ÈòªÂ°ûÔºåÁõ¥Ëá≥ÈòüÂàóÈùûÁ©∫Êó∂‰∏∫Ê≠¢„ÄÇ</p>
<p>Java‰∏≠Êèê‰æõ‰∫ÜÂ§öÁßç<code>BlockingQueue</code>ÁöÑÂÆûÁé∞Á±ªÔºåÂ¶Ç<code>ArrayBlockingQueue</code>„ÄÅ<code>LinkedBlockingQueue</code>„ÄÅ<code>PriorityBlockingQueue</code>Á≠â„ÄÇÂÖ∂‰∏≠Ôºå<code>ArrayBlockingQueue</code>Âíå<code>LinkedBlockingQueue</code>ÊòØÊúÄÂ∏∏Áî®ÁöÑÂÆûÁé∞Á±ª„ÄÇ</p>
<ul>
<li><p>1ÔºâArrayBlockingQueueÔºöÊòØ‰∏Ä‰∏™Âü∫‰∫éÊï∞ÁªÑÁªìÊûÑÁöÑÊúâÁïåÈòªÂ°ûÈòüÂàóÔºåÊ≠§ÈòüÂàóÊåâ FIFOÔºàÂÖàËøõÂÖàÂá∫ÔºâÂéüÂàôÂØπÂÖÉÁ¥†ËøõË°åÊéíÂ∫è„ÄÇ</p>
</li>
<li><p>2ÔºâLinkedBlockingQueueÔºö‰∏Ä‰∏™Âü∫‰∫éÈìæË°®ÁªìÊûÑÁöÑÈòªÂ°ûÈòüÂàóÔºåÊ≠§ÈòüÂàóÊåâ FIFO ÊéíÂ∫èÂÖÉÁ¥†ÔºåÂêûÂêêÈáèÈÄöÂ∏∏Ë¶ÅÈ´ò‰∫é ArrayBlockingQueue„ÄÇÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ï Executors.newFixedThreadPool() ‰ΩøÁî®‰∫ÜËøô‰∏™ÈòüÂàó„ÄÇ</p>
</li>
<li><p>3ÔºâSynchronousQueueÔºö‰∏Ä‰∏™‰∏çÂ≠òÂÇ®ÂÖÉÁ¥†ÁöÑÈòªÂ°ûÈòüÂàó„ÄÇÊØè‰∏™ÊèíÂÖ•Êìç‰ΩúÂøÖÈ°ªÁ≠âÂà∞Âè¶‰∏Ä‰∏™Á∫øÁ®ãË∞ÉÁî®ÁßªÈô§Êìç‰ΩúÔºåÂê¶ÂàôÊèíÂÖ•Êìç‰Ωú‰∏ÄÁõ¥Â§Ñ‰∫éÈòªÂ°ûÁä∂ÊÄÅÔºåÂêûÂêêÈáèÈÄöÂ∏∏Ë¶ÅÈ´ò‰∫é LinkedBlockingQueueÔºåÈùôÊÄÅÂ∑•ÂéÇÊñπÊ≥ï Executors.newCachedThreadPool ‰ΩøÁî®‰∫ÜËøô‰∏™ÈòüÂàó„ÄÇ</p>
</li>
<li><p>4ÔºâPriorityBlockingQueueÔºö‰∏Ä‰∏™ÂÖ∑Êúâ‰ºòÂÖàÁ∫ßÁöÑÊó†ÈôêÈòªÂ°ûÈòüÂàó„ÄÇ</p>
</li>
</ul>
<p><img src="https://img.jwt1399.top/img/202301071556671.png"></p>
<h2 id="‚ù∫ConcurrentSkipListMap"><a href="#‚ù∫ConcurrentSkipListMap" class="headerlink" title="‚ù∫ConcurrentSkipListMap"></a>‚ù∫ConcurrentSkipListMap</h2><p>ÂØπ‰∫é‰∏Ä‰∏™ÂçïÈìæË°®ÔºåÂç≥‰ΩøÈìæË°®ÊòØÊúâÂ∫èÁöÑÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅÂú®ÂÖ∂‰∏≠Êü•ÊâæÊüê‰∏™Êï∞ÊçÆÔºå‰πüÂè™ËÉΩ‰ªéÂ§¥Âà∞Â∞æÈÅçÂéÜÈìæË°®ÔºåËøôÊ†∑ÊïàÁéáËá™ÁÑ∂Â∞±‰ºöÂæà‰ΩéÔºåË∑≥Ë°®Â∞±‰∏ç‰∏ÄÊ†∑‰∫Ü„ÄÇË∑≥Ë°®ÊòØ‰∏ÄÁßçÂèØ‰ª•Áî®Êù•Âø´ÈÄüÊü•ÊâæÁöÑÊï∞ÊçÆÁªìÊûÑÔºåÊúâÁÇπÁ±ª‰ºº‰∫éÂπ≥Ë°°Ê†ë„ÄÇÂÆÉ‰ª¨ÈÉΩÂèØ‰ª•ÂØπÂÖÉÁ¥†ËøõË°åÂø´ÈÄüÁöÑÊü•Êâæ„ÄÇ</p>
<p>‰ΩÜ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂå∫Âà´ÊòØÔºöÂØπÂπ≥Ë°°Ê†ëÁöÑÊèíÂÖ•ÂíåÂà†Èô§ÂæÄÂæÄÂæàÂèØËÉΩÂØºËá¥Âπ≥Ë°°Ê†ëËøõË°å‰∏ÄÊ¨°ÂÖ®Â±ÄÁöÑË∞ÉÊï¥„ÄÇËÄåÂØπË∑≥Ë°®ÁöÑÊèíÂÖ•ÂíåÂà†Èô§Âè™ÈúÄË¶ÅÂØπÊï¥‰∏™Êï∞ÊçÆÁªìÊûÑÁöÑÂ±ÄÈÉ®ËøõË°åÊìç‰ΩúÂç≥ÂèØ„ÄÇËøôÊ†∑Â∏¶Êù•ÁöÑÂ•ΩÂ§ÑÊòØÔºöÂú®È´òÂπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÔºå‰Ω†‰ºöÈúÄË¶Å‰∏Ä‰∏™ÂÖ®Â±ÄÈîÅÊù•‰øùËØÅÊï¥‰∏™Âπ≥Ë°°Ê†ëÁöÑÁ∫øÁ®ãÂÆâÂÖ®„ÄÇËÄåÂØπ‰∫éË∑≥Ë°®Ôºå‰Ω†Âè™ÈúÄË¶ÅÈÉ®ÂàÜÈîÅÂç≥ÂèØ„ÄÇËøôÊ†∑ÔºåÂú®È´òÂπ∂ÂèëÁéØÂ¢É‰∏ãÔºå‰Ω†Â∞±ÂèØ‰ª•Êã•ÊúâÊõ¥Â•ΩÁöÑÊÄßËÉΩ„ÄÇËÄåÂ∞±Êü•ËØ¢ÁöÑÊÄßËÉΩËÄåË®ÄÔºåË∑≥Ë°®ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶‰πüÊòØ O(logn) „ÄÇË∑≥Ë°®ÁöÑÊú¨Ë¥®ÊòØÂêåÊó∂Áª¥Êä§‰∫ÜÂ§ö‰∏™ÈìæË°®ÔºåÂπ∂‰∏îÈìæË°®ÊòØÂàÜÂ±ÇÁöÑ„ÄÇ</p>
<h1 id="üìöÂèÇËÄÉËµÑÊñô"><a href="#üìöÂèÇËÄÉËµÑÊñô" class="headerlink" title="üìöÂèÇËÄÉËµÑÊñô"></a>üìöÂèÇËÄÉËµÑÊñô</h1><ul>
<li><a target="_blank" rel="noopener" href="https://pdai.tech/md/java/thread/java-thread-x-overview.html">‚ô•JavaÂπ∂ÂèëÁü•ËØÜ‰ΩìÁ≥ªËØ¶Ëß£‚ô• | Java ÂÖ®Ê†àÁü•ËØÜ‰ΩìÁ≥ª (pdai.tech)</a></li>
<li><a target="_blank" rel="noopener" href="https://www.mianshi.online/multi-thread-daemon-thread.html">Ë∑Ø‰∫∫Âº†ÁöÑÈù¢ËØïÁ¨îËÆ∞ (mianshi.online)</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/CL0610/Java-concurrency">JavaÂπ∂ÂèëÁü•ËØÜÁÇπÊÄªÁªì (github.com)</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/feichitianxia/article/details/110495764?spm=1001.2014.3001.5502"> ‰∏ÄÊñáËÆ©‰Ω†ÂΩªÂ∫ïÊòéÁôΩThreadLocal</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/crazymakercircle/p/14491965.html#autoid-h2-0-0-0">ThreadLocalÔºàÂè≤‰∏äÊúÄÂÖ®Ôºâ</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.nowcoder.net/n/3f413b4af088415baafc159591a1a411">CASÊìç‰ΩúÁöÑÂ∫ïÂ±ÇÂéüÁêÜ‰ª•ÂèäÂ∫îÁî®ËØ¶Ëß£</a></li>
</ul>
<h1 id="‚ù§Ô∏èSponsor"><a href="#‚ù§Ô∏èSponsor" class="headerlink" title="‚ù§Ô∏èSponsor"></a>‚ù§Ô∏èSponsor</h1><p>ÊÇ®ÁöÑÊîØÊåÅÊòØÊàë‰∏çÊñ≠ÂâçËøõÁöÑÂä®ÂäõÔºåÂ¶ÇÊûúÊÇ®ÊÑüËßâÊú¨ÊñáÂØπÊÇ®ÊúâÊâÄÂ∏ÆÂä©ÁöÑËØùÔºåÂèØ‰ª•ËÄÉËôëÊâìËµè‰∏Ä‰∏ãÊú¨ÊñáÔºåÁî®‰ª•Áª¥ÊåÅÊú¨ÂçöÂÆ¢ÁöÑËøêËê•Ë¥πÁî®ÔºåÊãíÁªùÁôΩÂ´ñÔºå‰ªé‰Ω†ÊàëÂÅöËµ∑ÔºÅü•∞ü•∞ü•∞</p>
<table>
  <tbody>
     <tr>
         <td style="text-align:center;">ÊîØ‰ªòÂÆù</td>
         <td style="text-align:center;">ÂæÆ‰ø°</td>
     </tr>
   <tr>
    <td style="text-align:center;" ><img width="200" src="https://jwt1399.top/medias/reward/alipay.png"></td>    
      <td style="text-align:center;"><img width="200" src="https://jwt1399.top/medias/reward/sponor_wechat.png"></td>     
  </tr>
</tbody></table>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        ÊñáÁ´†‰ΩúËÄÖ:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jwt1399.top" rel="external nofollow noreferrer">ÁÆÄÁÆÄ</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        ÊñáÁ´†ÈìæÊé•:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://jwt1399.top/posts/19988.html">https://jwt1399.top/posts/19988.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        ÁâàÊùÉÂ£∞Êòé:
                    </i>
                </span>
                <span class="reprint-info">
                    Êú¨ÂçöÂÆ¢ÊâÄÊúâÊñáÁ´†Èô§ÁâπÂà•Â£∞ÊòéÂ§ñÔºåÂùáÈááÁî®
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    ËÆ∏ÂèØÂçèËÆÆ„ÄÇËΩ¨ËΩΩËØ∑Ê≥®ÊòéÊù•Ê∫ê
                    <a href="https://jwt1399.top" target="_blank">ÁÆÄÁÆÄ</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Â§çÂà∂ÊàêÂäüÔºåËØ∑ÈÅµÂæ™Êú¨ÊñáÁöÑËΩ¨ËΩΩËßÑÂàô</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">Êü•Áúã</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/JUC/">
                                    <span class="chip bg-color">JUC</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">

<div id="article-share">
    
    
    <div class="social-share" data-sites="qq,qzone,wechat,weibo,linkedin,facebook,twitter,google,douban" data-wechat-qrcode-helper="<p>ÂæÆ‰ø°Êâ´‰∏ÄÊâ´Âç≥ÂèØÂàÜ‰∫´ÔºÅ</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">Êâì</a>
	<a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">Ëµè</a>
    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">‰Ω†ÁöÑËµèËØÜÊòØÊàëÂâçËøõÁöÑÂä®Âäõ</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">ÊîØ‰ªòÂÆù</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">ÂæÆ ‰ø°</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.png" class="reward-img" alt="ÊîØ‰ªòÂÆùÊâìËµè‰∫åÁª¥Á†Å">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="ÂæÆ‰ø°ÊâìËµè‰∫åÁª¥Á†Å">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>
            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        /*max-width: 100%;*/
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
    .v[data-class=v] .vinput {
     padding: 0px 0px;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>ËØÑËÆ∫<center>Â°´‰∏äÈÇÆÁÆ±‰ºöÊî∂Âà∞ËØÑËÆ∫ÂõûÂ§çÊèêÈÜíÂì¶!!!</center></span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/valine/1.4.18/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'Awf92dhT3VWqTfENqbCDoqbA-gzGzoHsz',
        appKey: '9uN7ODvigK9GAp8CYBz0fOrX',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: '',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: '[Â°´‰∏äÈÇÆÁÆ±Ôºå‰ºöÁªô‰Ω†ÂèëÈÄÅËØÑËÆ∫ÊèêÈÜí]Ôºå„ÉæÔæâ‚âß‚àÄ‚â¶)o ËØ∑ÁïÖÊâÄÊ¨≤Ë®Ä~',
        enableQQ: true,
        boolean: true,
    });
</script>

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;‰∏ä‰∏ÄÁØá</div>
            <div class="card">
                <a href="/posts/55970.html">
                    <div class="card-image">
                        
                        <img src="https://wac-cdn.atlassian.com/dam/jcr:56587a16-e96f-49f2-b302-74c3e90d1199/Distributed-Architecture-article.png?cdnVersion=1127" class="responsive-img" alt="Q&A: ÂàÜÂ∏ÉÂºè/ÂæÆÊúçÂä°">
                        
                        <span class="card-title">Q&A: ÂàÜÂ∏ÉÂºè/ÂæÆÊúçÂä°</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            ÂàÜÂ∏ÉÂºè‰ªÄ‰πàÊòØÂàÜÂ∏ÉÂºè?ÂàÜÂ∏ÉÂºèÂ∞±ÊòØÊàë‰ª¨ÊääÊï¥‰∏™Á≥ªÁªüÊãÜÂàÜÊàê‰∏çÂêåÁöÑÊúçÂä°ÁÑ∂ÂêéÂ∞ÜËøô‰∫õÊúçÂä°ÊîæÂú®‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏äÂáèËΩªÂçï‰ΩìÊúçÂä°ÁöÑÂéãÂäõÊèêÈ´òÂπ∂ÂèëÈáèÂíåÊÄßËÉΩ„ÄÇÊØîÂ¶ÇÁîµÂïÜÁ≥ªÁªüÂèØ‰ª•ÁÆÄÂçïÂú∞ÊãÜÂàÜÊàêËÆ¢ÂçïÁ≥ªÁªü„ÄÅÂïÜÂìÅÁ≥ªÁªü„ÄÅÁôªÂΩïÁ≥ªÁªüÁ≠âÁ≠âÔºåÊãÜÂàÜ‰πãÂêéÁöÑÊØè‰∏™ÊúçÂä°ÂèØ‰ª•ÈÉ®ÁΩ≤Âú®‰∏çÂêåÁöÑÊú∫Âô®‰∏äÔºåÂ¶ÇÊûúÊüê‰∏Ä
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2019-12-30
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Q-A/" class="post-category">
                                    Q&A
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Dubbo/">
                        <span class="chip bg-color">Dubbo</span>
                    </a>
                    
                    <a href="/tags/ZooKeeper/">
                        <span class="chip bg-color">ZooKeeper</span>
                    </a>
                    
                    <a href="/tags/Kafka/">
                        <span class="chip bg-color">Kafka</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                ‰∏ã‰∏ÄÁØá&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/posts/38527.html">
                    <div class="card-image">
                        
                        <img src="https://img.jwt1399.top/img/202212022124200.jpg" class="responsive-img" alt="Q&AÔºöJVM">
                        
                        <span class="card-title">Q&AÔºöJVM</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Êú¨ÁØáÊñáÁ´†‰∏≠Êï¥ÁêÜ‰∫ÜJVM‰∏≠ÂøÖÁü•ÂøÖ‰ºöÁü•ËØÜÁÇπÔºåÂåÖÂê´JVMÂÜÖÂ≠òÁªìÊûÑ„ÄÅÂØπË±°ÂÆû‰æãÂåñ„ÄÅÂûÉÂúæÂõûÊî∂„ÄÅÁ±ªÂä†ËΩΩ„ÄÅJVMË∞É‰ºòÁ≠âÁ≠âÁªèÂÖ∏ÈóÆÈ¢ò
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2019-12-24
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Q-A/" class="post-category">
                                    Q&A
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/JVM/">
                        <span class="chip bg-color">JVM</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('100')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + 'Êù•Ê∫ê: ÁÆÄË®Ä‰πã<br />'
            + 'ÊñáÁ´†‰ΩúËÄÖ: ÁÆÄÁÆÄ<br />'
            + 'ÊñáÁ´†ÈìæÊé•: <a href="' + url + '">' + url + '</a><br />'
            + 'Êú¨ÊñáÁ´†Ëëó‰ΩúÊùÉÂΩí‰ΩúËÄÖÊâÄÊúâÔºå‰ªª‰ΩïÂΩ¢ÂºèÁöÑËΩ¨ËΩΩÈÉΩËØ∑Ê≥®ÊòéÂá∫Â§Ñ„ÄÇ';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- ‰ª£Á†ÅÂùóÂäüËÉΩ‰æùËµñ -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- ‰ª£Á†ÅËØ≠Ë®Ä -->

    
<!-- ‰ª£Á†ÅÂùóÂ§çÂà∂ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ‰ª£Á†ÅÂùóÊî∂Áº© -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- ‰ª£Á†ÅÂùóÊäòË°å -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>

    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;ÁõÆÂΩï</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC ÊÇ¨ÊµÆÊåâÈíÆ. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('2'),
            headingSelector: 'h1, h2, h3, h4, h5, h6'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4, h5, h6').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ‰øÆÂ§çÊñáÁ´†Âç°Áâá div ÁöÑÂÆΩÂ∫¶. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // ÂàáÊç¢TOCÁõÆÂΩïÂ±ïÂºÄÊî∂Áº©ÁöÑÁõ∏ÂÖ≥Êìç‰Ωú.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


    <footer class="page-footer bg-color">
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2019</span>
            <a href="https://jwt1399.top" target="_blank"><b>ÁÆÄÁÆÄ</b>&nbsp;|&nbsp;Sponsored by</a>
            <!-- <span>|&nbsp;‰∏∫ üíóüíûü©∑ ÂèëÁîµ</span> -->
            <!-- |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> -->
            <!-- |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>&nbsp;| -->

			
            <a target="_blank" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"><img no-lazy src="https://img.jwt1399.top/img/20200824181422.png" style="width: 47px; vertical-align: middle;" ></a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;Word:&nbsp;<span
                class="white-color">1132.9k</span>&nbsp;Â≠ó
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;PV:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;Ê¨°
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;UV:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;‰∫∫
            </span>
            
            <br>

            
            <span id="sitetime">ËΩΩÂÖ•ËøêË°åÊó∂Èó¥...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2019";
                    var startMonth = "7";
                    var startDate = "2";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "Êú¨Á´ôÂ∑≤ÂÆâÂÖ®ËøêË°å " + diffDays + " Â§© " + diffHours +
                            " Â∞èÊó∂ " + diffMinutes + " ÂàÜÈíü " + diffSeconds + " Áßí";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "Êú¨Á´ôÂ∑≤ÂÆâÂÖ®ËøêË°å " + diffYears + " Âπ¥ " + diffDays +
                            " Â§© " + diffHours + " Â∞èÊó∂ " + diffMinutes + " ÂàÜÈíü " + diffSeconds + " Áßí";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            <a href="https://search.google.com/search-console?resource_id=http%3A%2F%2Fjwt1399.top%2F" target="_blank"
                rel="nofollow noopener">Ë∞∑Ê≠åÁªüËÆ°</a>&nbsp;|
            
            <span id="icp"><img no-lazy src="/medias/icp.png" style="vertical-align: text-bottom;" />
                <a href="http://www.beian.miit.gov.cn/" target="_blank">ËúÄICPÂ§á19020450Âè∑</a>
            </span>
            |
            
            <a href="https://tongji.baidu.com/web/10000159136/overview/index?siteId=14519996" target="_blank"
                rel="nofollow noopener">ÁôæÂ∫¶ÁªüËÆ°</a>

        </div>
        <div class="col s12 m4 l4 social-link social-statis">

    <a href="https://jwt1399.top/baidusitemap.xml" class="tooltipped" target="_blank" data-tooltip="ËÆøÈóÆÊàëÁöÑsitemap" data-position="top" data-delay="50">
        <i class="fas fa-sitemap"></i>
    </a>


    <a href="https://pl.jwt1399.top" class="tooltipped" target="_blank" data-tooltip="valineËØÑËÆ∫: https://pl.jwt1399.top" data-position="top" data-delay="50">
        <i class="fab fa-optin-monster"></i>
    </a>


    <a href="mailto:1019084218@qq.com" class="tooltipped" target="_blank" data-tooltip="ÈÇÆ‰ª∂ËÅîÁ≥ªÊàë" data-position="top" data-delay="50">
        <i class="fas fa-envelope"></i>
    </a>













    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1019084218" class="tooltipped" target="_blank" data-tooltip="QQËÅîÁ≥ªÊàë: 1019084218" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>


    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS ËÆ¢ÈòÖ" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>

    <!-- ÊêúÁ¥¢ÈÅÆÁΩ©Ê°Ü -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;ÊêúÁ¥¢</span>
            <input type="search" id="searchInput" name="s" placeholder="ËØ∑ËæìÂÖ•ÊêúÁ¥¢ÁöÑÂÖ≥ÈîÆÂ≠ó" class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>
<!-- AlgoliaÊêúÁ¥¢ -->
<!-- <script type="text/javascript">
    // ÂàùÂßãÂåñAlgoliaÊêúÁ¥¢ÂÆ¢Êà∑Á´Ø
    const searchClient = algoliasearch('E9ZV23QUNX', '091fe3a39a7bcb639aebaab3ed078165');
    const index = searchClient.initIndex('hexo_search');

    // ÊêúÁ¥¢ÂáΩÊï∞
    const searchFunc = function(search_id, content_id) {
        const $input = document.getElementById(search_id);
        const $resultContent = document.getElementById(content_id);
        $input.addEventListener('input', function() {
            const query = this.value.trim();
            $resultContent.innerHTML = "";

            if (query.length > 0) {
                index.search(query).then(({ hits }) => {
                    let str = '<ul class="search-result-list">';
                    hits.forEach(hit => {
                        str += `<li>
                            <a href="${hit.permalink}" class="search-result-title">${hit.title}</a>
                        </li>`;
                    });
                    str += '</ul>';
                    $resultContent.innerHTML = str;
                }).catch(err => {
                    console.error(err);
                });
            }
        });
    };

    // Ë∞ÉÁî®ÊêúÁ¥¢ÂáΩÊï∞
    searchFunc('searchInput', 'searchResult');

     // ÂàùÂßãÂåñ Materialize CSS ÁöÑ modal
     document.addEventListener('DOMContentLoaded', function() {
        M.Modal.init(document.querySelectorAll('.modal'));
    });
</script> -->

<!-- <script type="text/javascript">
    docsearch({
    appId: "P70KOYK3UD",
    apiKey: "e555715ec4df8ee633f8644bf8f2326a",
    indexName: "jwt1399",
    container: "#docsearch",
    debug: false 
    });
    </script> -->

<!-- ËÄÅÁâàÊêúÁ¥¢ -->
<script src="/js/search_old.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/" + "search.json", 'searchInput', 'searchResult');
});
</script>
    <!-- ÂõûÂà∞È°∂ÈÉ®ÊåâÈíÆ -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.staticfile.org/aos/3.0.0-beta.6/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>
	<!--valine_‰∫∫Êú∫È™åËØÅ-->
	<button id="TencentCaptcha"data-appid="2046265119"data-cbfn="callback"type="button" hidden></button>
	
    <!-- Global site tag (gtag.js) - Google Analytics -->

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-160042502-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-160042502-1');
</script>


    <!-- Baidu Analytics -->

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?0e306ce3426983ae6367d094d39f1190";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    
    <script type="text/javascript" color="0,0,255"
        pointColor="0,0,255" opacity='0.7'
        zIndex="-1" count="99"
        src="/libs/background/canvas-nest.js"></script>
    

    
    
    <script type="text/javascript" size="150" alpha='0.6'
        zIndex="-1" src="/libs/background/ribbon.min.js" async="async"></script>
    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    
    
    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

        
</body>

</html>
